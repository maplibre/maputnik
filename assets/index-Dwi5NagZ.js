(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function t(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=t(r);fetch(r.href,o)}})();function eu(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function zD(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function i(){var r=!1;try{r=this instanceof i}catch{}return r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var r=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,r.get?r:{enumerable:!0,get:function(){return n[i]}})}),t}var X6={exports:{}},s2={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DL;function Dae(){if(DL)return s2;DL=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,r,o){var s=null;if(o!==void 0&&(s=""+o),r.key!==void 0&&(s=""+r.key),"key"in r){o={};for(var a in r)a!=="key"&&(o[a]=r[a])}else o=r;return r=o.ref,{$$typeof:n,type:i,key:s,ref:r!==void 0?r:null,props:o}}return s2.Fragment=e,s2.jsx=t,s2.jsxs=t,s2}var PL;function Pae(){return PL||(PL=1,X6.exports=Dae()),X6.exports}var ie=Pae(),J6={exports:{}},Yr={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UL;function Uae(){if(UL)return Yr;UL=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),s=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),M=Symbol.iterator;function x(we){return we===null||typeof we!="object"?null:(we=M&&we[M]||we["@@iterator"],typeof we=="function"?we:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},P=Object.assign,F={};function j(we,ze,Me){this.props=we,this.context=ze,this.refs=F,this.updater=Me||T}j.prototype.isReactComponent={},j.prototype.setState=function(we,ze){if(typeof we!="object"&&typeof we!="function"&&we!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,we,ze,"setState")},j.prototype.forceUpdate=function(we){this.updater.enqueueForceUpdate(this,we,"forceUpdate")};function q(){}q.prototype=j.prototype;function V(we,ze,Me){this.props=we,this.context=ze,this.refs=F,this.updater=Me||T}var H=V.prototype=new q;H.constructor=V,P(H,j.prototype),H.isPureReactComponent=!0;var Q=Array.isArray;function Y(){}var z={H:null,A:null,T:null,S:null},se=Object.prototype.hasOwnProperty;function le(we,ze,Me){var lt=Me.ref;return{$$typeof:n,type:we,key:ze,ref:lt!==void 0?lt:null,props:Me}}function pe(we,ze){return le(we.type,ze,we.props)}function de(we){return typeof we=="object"&&we!==null&&we.$$typeof===n}function ve(we){var ze={"=":"=0",":":"=2"};return"$"+we.replace(/[=:]/g,function(Me){return ze[Me]})}var Ee=/\/+/g;function Re(we,ze){return typeof we=="object"&&we!==null&&we.key!=null?ve(""+we.key):ze.toString(36)}function je(we){switch(we.status){case"fulfilled":return we.value;case"rejected":throw we.reason;default:switch(typeof we.status=="string"?we.then(Y,Y):(we.status="pending",we.then(function(ze){we.status==="pending"&&(we.status="fulfilled",we.value=ze)},function(ze){we.status==="pending"&&(we.status="rejected",we.reason=ze)})),we.status){case"fulfilled":return we.value;case"rejected":throw we.reason}}throw we}function Ie(we,ze,Me,lt,nt){var bt=typeof we;(bt==="undefined"||bt==="boolean")&&(we=null);var Bt=!1;if(we===null)Bt=!0;else switch(bt){case"bigint":case"string":case"number":Bt=!0;break;case"object":switch(we.$$typeof){case n:case e:Bt=!0;break;case m:return Bt=we._init,Ie(Bt(we._payload),ze,Me,lt,nt)}}if(Bt)return nt=nt(we),Bt=lt===""?"."+Re(we,0):lt,Q(nt)?(Me="",Bt!=null&&(Me=Bt.replace(Ee,"$&/")+"/"),Ie(nt,ze,Me,"",function(Se){return Se})):nt!=null&&(de(nt)&&(nt=pe(nt,Me+(nt.key==null||we&&we.key===nt.key?"":(""+nt.key).replace(Ee,"$&/")+"/")+Bt)),ze.push(nt)),1;Bt=0;var Ke=lt===""?".":lt+":";if(Q(we))for(var Te=0;Te<we.length;Te++)lt=we[Te],bt=Ke+Re(lt,Te),Bt+=Ie(lt,ze,Me,bt,nt);else if(Te=x(we),typeof Te=="function")for(we=Te.call(we),Te=0;!(lt=we.next()).done;)lt=lt.value,bt=Ke+Re(lt,Te++),Bt+=Ie(lt,ze,Me,bt,nt);else if(bt==="object"){if(typeof we.then=="function")return Ie(je(we),ze,Me,lt,nt);throw ze=String(we),Error("Objects are not valid as a React child (found: "+(ze==="[object Object]"?"object with keys {"+Object.keys(we).join(", ")+"}":ze)+"). If you meant to render a collection of children, use an array instead.")}return Bt}function qe(we,ze,Me){if(we==null)return we;var lt=[],nt=0;return Ie(we,lt,"","",function(bt){return ze.call(Me,bt,nt++)}),lt}function tt(we){if(we._status===-1){var ze=we._result;ze=ze(),ze.then(function(Me){(we._status===0||we._status===-1)&&(we._status=1,we._result=Me)},function(Me){(we._status===0||we._status===-1)&&(we._status=2,we._result=Me)}),we._status===-1&&(we._status=0,we._result=ze)}if(we._status===1)return we._result.default;throw we._result}var At=typeof reportError=="function"?reportError:function(we){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ze=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof we=="object"&&we!==null&&typeof we.message=="string"?String(we.message):String(we),error:we});if(!window.dispatchEvent(ze))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",we);return}console.error(we)},ke={map:qe,forEach:function(we,ze,Me){qe(we,function(){ze.apply(this,arguments)},Me)},count:function(we){var ze=0;return qe(we,function(){ze++}),ze},toArray:function(we){return qe(we,function(ze){return ze})||[]},only:function(we){if(!de(we))throw Error("React.Children.only expected to receive a single React element child.");return we}};return Yr.Activity=y,Yr.Children=ke,Yr.Component=j,Yr.Fragment=t,Yr.Profiler=r,Yr.PureComponent=V,Yr.StrictMode=i,Yr.Suspense=c,Yr.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=z,Yr.__COMPILER_RUNTIME={__proto__:null,c:function(we){return z.H.useMemoCache(we)}},Yr.cache=function(we){return function(){return we.apply(null,arguments)}},Yr.cacheSignal=function(){return null},Yr.cloneElement=function(we,ze,Me){if(we==null)throw Error("The argument must be a React element, but you passed "+we+".");var lt=P({},we.props),nt=we.key;if(ze!=null)for(bt in ze.key!==void 0&&(nt=""+ze.key),ze)!se.call(ze,bt)||bt==="key"||bt==="__self"||bt==="__source"||bt==="ref"&&ze.ref===void 0||(lt[bt]=ze[bt]);var bt=arguments.length-2;if(bt===1)lt.children=Me;else if(1<bt){for(var Bt=Array(bt),Ke=0;Ke<bt;Ke++)Bt[Ke]=arguments[Ke+2];lt.children=Bt}return le(we.type,nt,lt)},Yr.createContext=function(we){return we={$$typeof:s,_currentValue:we,_currentValue2:we,_threadCount:0,Provider:null,Consumer:null},we.Provider=we,we.Consumer={$$typeof:o,_context:we},we},Yr.createElement=function(we,ze,Me){var lt,nt={},bt=null;if(ze!=null)for(lt in ze.key!==void 0&&(bt=""+ze.key),ze)se.call(ze,lt)&&lt!=="key"&&lt!=="__self"&&lt!=="__source"&&(nt[lt]=ze[lt]);var Bt=arguments.length-2;if(Bt===1)nt.children=Me;else if(1<Bt){for(var Ke=Array(Bt),Te=0;Te<Bt;Te++)Ke[Te]=arguments[Te+2];nt.children=Ke}if(we&&we.defaultProps)for(lt in Bt=we.defaultProps,Bt)nt[lt]===void 0&&(nt[lt]=Bt[lt]);return le(we,bt,nt)},Yr.createRef=function(){return{current:null}},Yr.forwardRef=function(we){return{$$typeof:a,render:we}},Yr.isValidElement=de,Yr.lazy=function(we){return{$$typeof:m,_payload:{_status:-1,_result:we},_init:tt}},Yr.memo=function(we,ze){return{$$typeof:h,type:we,compare:ze===void 0?null:ze}},Yr.startTransition=function(we){var ze=z.T,Me={};z.T=Me;try{var lt=we(),nt=z.S;nt!==null&&nt(Me,lt),typeof lt=="object"&&lt!==null&&typeof lt.then=="function"&&lt.then(Y,At)}catch(bt){At(bt)}finally{ze!==null&&Me.types!==null&&(ze.types=Me.types),z.T=ze}},Yr.unstable_useCacheRefresh=function(){return z.H.useCacheRefresh()},Yr.use=function(we){return z.H.use(we)},Yr.useActionState=function(we,ze,Me){return z.H.useActionState(we,ze,Me)},Yr.useCallback=function(we,ze){return z.H.useCallback(we,ze)},Yr.useContext=function(we){return z.H.useContext(we)},Yr.useDebugValue=function(){},Yr.useDeferredValue=function(we,ze){return z.H.useDeferredValue(we,ze)},Yr.useEffect=function(we,ze){return z.H.useEffect(we,ze)},Yr.useEffectEvent=function(we){return z.H.useEffectEvent(we)},Yr.useId=function(){return z.H.useId()},Yr.useImperativeHandle=function(we,ze,Me){return z.H.useImperativeHandle(we,ze,Me)},Yr.useInsertionEffect=function(we,ze){return z.H.useInsertionEffect(we,ze)},Yr.useLayoutEffect=function(we,ze){return z.H.useLayoutEffect(we,ze)},Yr.useMemo=function(we,ze){return z.H.useMemo(we,ze)},Yr.useOptimistic=function(we,ze){return z.H.useOptimistic(we,ze)},Yr.useReducer=function(we,ze,Me){return z.H.useReducer(we,ze,Me)},Yr.useRef=function(we){return z.H.useRef(we)},Yr.useState=function(we){return z.H.useState(we)},Yr.useSyncExternalStore=function(we,ze,Me){return z.H.useSyncExternalStore(we,ze,Me)},Yr.useTransition=function(){return z.H.useTransition()},Yr.version="19.2.0",Yr}var KL;function Qa(){return KL||(KL=1,J6.exports=Uae()),J6.exports}var St=Qa();const En=eu(St);var HH={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},ox=En.createContext&&En.createContext(HH),Kae=["attr","size","title"];function Lae(n,e){if(n==null)return{};var t=Fae(n,e),i,r;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(r=0;r<o.length;r++)i=o[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}function Fae(n,e){if(n==null)return{};var t={};for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){if(e.indexOf(i)>=0)continue;t[i]=n[i]}return t}function Tw(){return Tw=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Tw.apply(this,arguments)}function LL(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function Rw(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?LL(Object(t),!0).forEach(function(i){zae(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):LL(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function zae(n,e,t){return e=jae(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function jae(n){var e=Nae(n,"string");return typeof e=="symbol"?e:e+""}function Nae(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function ZH(n){return n&&n.map((e,t)=>En.createElement(e.tag,Rw({key:t},e.attr),ZH(e.child)))}function Io(n){return e=>En.createElement(Gae,Tw({attr:Rw({},n.attr)},e),ZH(n.child))}function Gae(n){var e=t=>{var{attr:i,size:r,title:o}=n,s=Lae(n,Kae),a=r||t.size||"1em",c;return t.className&&(c=t.className),n.className&&(c=(c?c+" ":"")+n.className),En.createElement("svg",Tw({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,i,s,{className:c,style:Rw(Rw({color:n.color||t.color},t.style),n.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),o&&En.createElement("title",null,o),n.children)};return ox!==void 0?En.createElement(ox.Consumer,null,t=>e(t)):e(HH)}var eO={exports:{}},a2={},tO={exports:{}},nO={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FL;function Wae(){return FL||(FL=1,(function(n){function e(Ie,qe){var tt=Ie.length;Ie.push(qe);e:for(;0<tt;){var At=tt-1>>>1,ke=Ie[At];if(0<r(ke,qe))Ie[At]=qe,Ie[tt]=ke,tt=At;else break e}}function t(Ie){return Ie.length===0?null:Ie[0]}function i(Ie){if(Ie.length===0)return null;var qe=Ie[0],tt=Ie.pop();if(tt!==qe){Ie[0]=tt;e:for(var At=0,ke=Ie.length,we=ke>>>1;At<we;){var ze=2*(At+1)-1,Me=Ie[ze],lt=ze+1,nt=Ie[lt];if(0>r(Me,tt))lt<ke&&0>r(nt,Me)?(Ie[At]=nt,Ie[lt]=tt,At=lt):(Ie[At]=Me,Ie[ze]=tt,At=ze);else if(lt<ke&&0>r(nt,tt))Ie[At]=nt,Ie[lt]=tt,At=lt;else break e}}return qe}function r(Ie,qe){var tt=Ie.sortIndex-qe.sortIndex;return tt!==0?tt:Ie.id-qe.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();n.unstable_now=function(){return s.now()-a}}var c=[],h=[],m=1,y=null,M=3,x=!1,T=!1,P=!1,F=!1,j=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,V=typeof setImmediate<"u"?setImmediate:null;function H(Ie){for(var qe=t(h);qe!==null;){if(qe.callback===null)i(h);else if(qe.startTime<=Ie)i(h),qe.sortIndex=qe.expirationTime,e(c,qe);else break;qe=t(h)}}function Q(Ie){if(P=!1,H(Ie),!T)if(t(c)!==null)T=!0,Y||(Y=!0,ve());else{var qe=t(h);qe!==null&&je(Q,qe.startTime-Ie)}}var Y=!1,z=-1,se=5,le=-1;function pe(){return F?!0:!(n.unstable_now()-le<se)}function de(){if(F=!1,Y){var Ie=n.unstable_now();le=Ie;var qe=!0;try{e:{T=!1,P&&(P=!1,q(z),z=-1),x=!0;var tt=M;try{t:{for(H(Ie),y=t(c);y!==null&&!(y.expirationTime>Ie&&pe());){var At=y.callback;if(typeof At=="function"){y.callback=null,M=y.priorityLevel;var ke=At(y.expirationTime<=Ie);if(Ie=n.unstable_now(),typeof ke=="function"){y.callback=ke,H(Ie),qe=!0;break t}y===t(c)&&i(c),H(Ie)}else i(c);y=t(c)}if(y!==null)qe=!0;else{var we=t(h);we!==null&&je(Q,we.startTime-Ie),qe=!1}}break e}finally{y=null,M=tt,x=!1}qe=void 0}}finally{qe?ve():Y=!1}}}var ve;if(typeof V=="function")ve=function(){V(de)};else if(typeof MessageChannel<"u"){var Ee=new MessageChannel,Re=Ee.port2;Ee.port1.onmessage=de,ve=function(){Re.postMessage(null)}}else ve=function(){j(de,0)};function je(Ie,qe){z=j(function(){Ie(n.unstable_now())},qe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Ie){Ie.callback=null},n.unstable_forceFrameRate=function(Ie){0>Ie||125<Ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):se=0<Ie?Math.floor(1e3/Ie):5},n.unstable_getCurrentPriorityLevel=function(){return M},n.unstable_next=function(Ie){switch(M){case 1:case 2:case 3:var qe=3;break;default:qe=M}var tt=M;M=qe;try{return Ie()}finally{M=tt}},n.unstable_requestPaint=function(){F=!0},n.unstable_runWithPriority=function(Ie,qe){switch(Ie){case 1:case 2:case 3:case 4:case 5:break;default:Ie=3}var tt=M;M=Ie;try{return qe()}finally{M=tt}},n.unstable_scheduleCallback=function(Ie,qe,tt){var At=n.unstable_now();switch(typeof tt=="object"&&tt!==null?(tt=tt.delay,tt=typeof tt=="number"&&0<tt?At+tt:At):tt=At,Ie){case 1:var ke=-1;break;case 2:ke=250;break;case 5:ke=1073741823;break;case 4:ke=1e4;break;default:ke=5e3}return ke=tt+ke,Ie={id:m++,callback:qe,priorityLevel:Ie,startTime:tt,expirationTime:ke,sortIndex:-1},tt>At?(Ie.sortIndex=tt,e(h,Ie),t(c)===null&&Ie===t(h)&&(P?(q(z),z=-1):P=!0,je(Q,tt-At))):(Ie.sortIndex=ke,e(c,Ie),T||x||(T=!0,Y||(Y=!0,ve()))),Ie},n.unstable_shouldYield=pe,n.unstable_wrapCallback=function(Ie){var qe=M;return function(){var tt=M;M=qe;try{return Ie.apply(this,arguments)}finally{M=tt}}}})(nO)),nO}var zL;function Qae(){return zL||(zL=1,tO.exports=Wae()),tO.exports}var iO={exports:{}},zA={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jL;function qae(){if(jL)return zA;jL=1;var n=Qa();function e(c){var h="https://react.dev/errors/"+c;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)h+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+c+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function o(c,h,m){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:y==null?null:""+y,children:c,containerInfo:h,implementation:m}}var s=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function a(c,h){if(c==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return zA.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,zA.createPortal=function(c,h){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return o(c,h,null,m)},zA.flushSync=function(c){var h=s.T,m=i.p;try{if(s.T=null,i.p=2,c)return c()}finally{s.T=h,i.p=m,i.d.f()}},zA.preconnect=function(c,h){typeof c=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,i.d.C(c,h))},zA.prefetchDNS=function(c){typeof c=="string"&&i.d.D(c)},zA.preinit=function(c,h){if(typeof c=="string"&&h&&typeof h.as=="string"){var m=h.as,y=a(m,h.crossOrigin),M=typeof h.integrity=="string"?h.integrity:void 0,x=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;m==="style"?i.d.S(c,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:y,integrity:M,fetchPriority:x}):m==="script"&&i.d.X(c,{crossOrigin:y,integrity:M,fetchPriority:x,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},zA.preinitModule=function(c,h){if(typeof c=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var m=a(h.as,h.crossOrigin);i.d.M(c,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&i.d.M(c)},zA.preload=function(c,h){if(typeof c=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var m=h.as,y=a(m,h.crossOrigin);i.d.L(c,m,{crossOrigin:y,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},zA.preloadModule=function(c,h){if(typeof c=="string")if(h){var m=a(h.as,h.crossOrigin);i.d.m(c,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else i.d.m(c)},zA.requestFormReset=function(c){i.d.r(c)},zA.unstable_batchedUpdates=function(c,h){return c(h)},zA.useFormState=function(c,h,m){return s.H.useFormState(c,h,m)},zA.useFormStatus=function(){return s.H.useHostTransitionStatus()},zA.version="19.2.0",zA}var NL;function jD(){if(NL)return iO.exports;NL=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),iO.exports=qae(),iO.exports}var GL;function Yae(){if(GL)return a2;GL=1;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=Qae(),e=Qa(),t=jD();function i(A){var g="https://react.dev/errors/"+A;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)g+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+A+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(A){return!(!A||A.nodeType!==1&&A.nodeType!==9&&A.nodeType!==11)}function o(A){var g=A,_=A;if(A.alternate)for(;g.return;)g=g.return;else{A=g;do g=A,(g.flags&4098)!==0&&(_=g.return),A=g.return;while(A)}return g.tag===3?_:null}function s(A){if(A.tag===13){var g=A.memoizedState;if(g===null&&(A=A.alternate,A!==null&&(g=A.memoizedState)),g!==null)return g.dehydrated}return null}function a(A){if(A.tag===31){var g=A.memoizedState;if(g===null&&(A=A.alternate,A!==null&&(g=A.memoizedState)),g!==null)return g.dehydrated}return null}function c(A){if(o(A)!==A)throw Error(i(188))}function h(A){var g=A.alternate;if(!g){if(g=o(A),g===null)throw Error(i(188));return g!==A?null:A}for(var _=A,I=g;;){var W=_.return;if(W===null)break;var J=W.alternate;if(J===null){if(I=W.return,I!==null){_=I;continue}break}if(W.child===J.child){for(J=W.child;J;){if(J===_)return c(W),A;if(J===I)return c(W),g;J=J.sibling}throw Error(i(188))}if(_.return!==I.return)_=W,I=J;else{for(var xe=!1,$e=W.child;$e;){if($e===_){xe=!0,_=W,I=J;break}if($e===I){xe=!0,I=W,_=J;break}$e=$e.sibling}if(!xe){for($e=J.child;$e;){if($e===_){xe=!0,_=J,I=W;break}if($e===I){xe=!0,I=J,_=W;break}$e=$e.sibling}if(!xe)throw Error(i(189))}}if(_.alternate!==I)throw Error(i(190))}if(_.tag!==3)throw Error(i(188));return _.stateNode.current===_?A:g}function m(A){var g=A.tag;if(g===5||g===26||g===27||g===6)return A;for(A=A.child;A!==null;){if(g=m(A),g!==null)return g;A=A.sibling}return null}var y=Object.assign,M=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),T=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),F=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),q=Symbol.for("react.consumer"),V=Symbol.for("react.context"),H=Symbol.for("react.forward_ref"),Q=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),se=Symbol.for("react.lazy"),le=Symbol.for("react.activity"),pe=Symbol.for("react.memo_cache_sentinel"),de=Symbol.iterator;function ve(A){return A===null||typeof A!="object"?null:(A=de&&A[de]||A["@@iterator"],typeof A=="function"?A:null)}var Ee=Symbol.for("react.client.reference");function Re(A){if(A==null)return null;if(typeof A=="function")return A.$$typeof===Ee?null:A.displayName||A.name||null;if(typeof A=="string")return A;switch(A){case P:return"Fragment";case j:return"Profiler";case F:return"StrictMode";case Q:return"Suspense";case Y:return"SuspenseList";case le:return"Activity"}if(typeof A=="object")switch(A.$$typeof){case T:return"Portal";case V:return A.displayName||"Context";case q:return(A._context.displayName||"Context")+".Consumer";case H:var g=A.render;return A=A.displayName,A||(A=g.displayName||g.name||"",A=A!==""?"ForwardRef("+A+")":"ForwardRef"),A;case z:return g=A.displayName||null,g!==null?g:Re(A.type)||"Memo";case se:g=A._payload,A=A._init;try{return Re(A(g))}catch{}}return null}var je=Array.isArray,Ie=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,qe=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,tt={pending:!1,data:null,method:null,action:null},At=[],ke=-1;function we(A){return{current:A}}function ze(A){0>ke||(A.current=At[ke],At[ke]=null,ke--)}function Me(A,g){ke++,At[ke]=A.current,A.current=g}var lt=we(null),nt=we(null),bt=we(null),Bt=we(null);function Ke(A,g){switch(Me(bt,g),Me(nt,A),Me(lt,null),g.nodeType){case 9:case 11:A=(A=g.documentElement)&&(A=A.namespaceURI)?vg(A):0;break;default:if(A=g.tagName,g=g.namespaceURI)g=vg(g),A=Ja(g,A);else switch(A){case"svg":A=1;break;case"math":A=2;break;default:A=0}}ze(lt),Me(lt,A)}function Te(){ze(lt),ze(nt),ze(bt)}function Se(A){A.memoizedState!==null&&Me(Bt,A);var g=lt.current,_=Ja(g,A.type);g!==_&&(Me(nt,A),Me(lt,_))}function We(A){nt.current===A&&(ze(lt),ze(nt)),Bt.current===A&&(ze(Bt),Zt._currentValue=tt)}var at,it;function ft(A){if(at===void 0)try{throw Error()}catch(_){var g=_.stack.trim().match(/\n( *(at )?)/);at=g&&g[1]||"",it=-1<_.stack.indexOf(`
    at`)?" (<anonymous>)":-1<_.stack.indexOf("@")?"@unknown:0:0":""}return`
`+at+A+it}var Dt=!1;function Ot(A,g){if(!A||Dt)return"";Dt=!0;var _=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var I={DetermineComponentFrameRoot:function(){try{if(g){var pn=function(){throw Error()};if(Object.defineProperty(pn.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(pn,[])}catch(rn){var Xt=rn}Reflect.construct(A,[],pn)}else{try{pn.call()}catch(rn){Xt=rn}A.call(pn.prototype)}}else{try{throw Error()}catch(rn){Xt=rn}(pn=A())&&typeof pn.catch=="function"&&pn.catch(function(){})}}catch(rn){if(rn&&Xt&&typeof rn.stack=="string")return[rn.stack,Xt.stack]}return[null,null]}};I.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var W=Object.getOwnPropertyDescriptor(I.DetermineComponentFrameRoot,"name");W&&W.configurable&&Object.defineProperty(I.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var J=I.DetermineComponentFrameRoot(),xe=J[0],$e=J[1];if(xe&&$e){var _t=xe.split(`
`),$t=$e.split(`
`);for(W=I=0;I<_t.length&&!_t[I].includes("DetermineComponentFrameRoot");)I++;for(;W<$t.length&&!$t[W].includes("DetermineComponentFrameRoot");)W++;if(I===_t.length||W===$t.length)for(I=_t.length-1,W=$t.length-1;1<=I&&0<=W&&_t[I]!==$t[W];)W--;for(;1<=I&&0<=W;I--,W--)if(_t[I]!==$t[W]){if(I!==1||W!==1)do if(I--,W--,0>W||_t[I]!==$t[W]){var ln=`
`+_t[I].replace(" at new "," at ");return A.displayName&&ln.includes("<anonymous>")&&(ln=ln.replace("<anonymous>",A.displayName)),ln}while(1<=I&&0<=W);break}}}finally{Dt=!1,Error.prepareStackTrace=_}return(_=A?A.displayName||A.name:"")?ft(_):""}function Jt(A,g){switch(A.tag){case 26:case 27:case 5:return ft(A.type);case 16:return ft("Lazy");case 13:return A.child!==g&&g!==null?ft("Suspense Fallback"):ft("Suspense");case 19:return ft("SuspenseList");case 0:case 15:return Ot(A.type,!1);case 11:return Ot(A.type.render,!1);case 1:return Ot(A.type,!0);case 31:return ft("Activity");default:return""}}function Dn(A){try{var g="",_=null;do g+=Jt(A,_),_=A,A=A.return;while(A);return g}catch(I){return`
Error generating stack: `+I.message+`
`+I.stack}}var Pn=Object.prototype.hasOwnProperty,oi=n.unstable_scheduleCallback,In=n.unstable_cancelCallback,Tn=n.unstable_shouldYield,dn=n.unstable_requestPaint,$n=n.unstable_now,Un=n.unstable_getCurrentPriorityLevel,It=n.unstable_ImmediatePriority,_e=n.unstable_UserBlockingPriority,oe=n.unstable_NormalPriority,ee=n.unstable_LowPriority,ne=n.unstable_IdlePriority,ue=n.log,be=n.unstable_setDisableYieldValue,Le=null,Ve=null;function rt(A){if(typeof ue=="function"&&be(A),Ve&&typeof Ve.setStrictMode=="function")try{Ve.setStrictMode(Le,A)}catch{}}var ye=Math.clz32?Math.clz32:yt,Be=Math.log,v=Math.LN2;function yt(A){return A>>>=0,A===0?32:31-(Be(A)/v|0)|0}var Mt=256,Pt=262144,en=4194304;function mt(A){var g=A&42;if(g!==0)return g;switch(A&-A){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return A&261888;case 262144:case 524288:case 1048576:case 2097152:return A&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return A&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return A}}function Qn(A,g,_){var I=A.pendingLanes;if(I===0)return 0;var W=0,J=A.suspendedLanes,xe=A.pingedLanes;A=A.warmLanes;var $e=I&134217727;return $e!==0?(I=$e&~J,I!==0?W=mt(I):(xe&=$e,xe!==0?W=mt(xe):_||(_=$e&~A,_!==0&&(W=mt(_))))):($e=I&~J,$e!==0?W=mt($e):xe!==0?W=mt(xe):_||(_=I&~A,_!==0&&(W=mt(_)))),W===0?0:g!==0&&g!==W&&(g&J)===0&&(J=W&-W,_=g&-g,J>=_||J===32&&(_&4194048)!==0)?g:W}function Xn(A,g){return(A.pendingLanes&~(A.suspendedLanes&~A.pingedLanes)&g)===0}function Cn(A,g){switch(A){case 1:case 2:case 4:case 8:case 64:return g+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Fn(){var A=en;return en<<=1,(en&62914560)===0&&(en=4194304),A}function pi(A){for(var g=[],_=0;31>_;_++)g.push(A);return g}function Hi(A,g){A.pendingLanes|=g,g!==268435456&&(A.suspendedLanes=0,A.pingedLanes=0,A.warmLanes=0)}function Ii(A,g,_,I,W,J){var xe=A.pendingLanes;A.pendingLanes=_,A.suspendedLanes=0,A.pingedLanes=0,A.warmLanes=0,A.expiredLanes&=_,A.entangledLanes&=_,A.errorRecoveryDisabledLanes&=_,A.shellSuspendCounter=0;var $e=A.entanglements,_t=A.expirationTimes,$t=A.hiddenUpdates;for(_=xe&~_;0<_;){var ln=31-ye(_),pn=1<<ln;$e[ln]=0,_t[ln]=-1;var Xt=$t[ln];if(Xt!==null)for($t[ln]=null,ln=0;ln<Xt.length;ln++){var rn=Xt[ln];rn!==null&&(rn.lane&=-536870913)}_&=~pn}I!==0&&Ar(A,I,0),J!==0&&W===0&&A.tag!==0&&(A.suspendedLanes|=J&~(xe&~g))}function Ar(A,g,_){A.pendingLanes|=g,A.suspendedLanes&=~g;var I=31-ye(g);A.entangledLanes|=g,A.entanglements[I]=A.entanglements[I]|1073741824|_&261930}function ii(A,g){var _=A.entangledLanes|=g;for(A=A.entanglements;_;){var I=31-ye(_),W=1<<I;W&g|A[I]&g&&(A[I]|=g),_&=~W}}function Fi(A,g){var _=g&-g;return _=(_&42)!==0?1:Ri(_),(_&(A.suspendedLanes|g))!==0?0:_}function Ri(A){switch(A){case 2:A=1;break;case 8:A=4;break;case 32:A=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:A=128;break;case 268435456:A=134217728;break;default:A=0}return A}function on(A){return A&=-A,2<A?8<A?(A&134217727)!==0?32:268435456:8:2}function nr(){var A=qe.p;return A!==0?A:(A=window.event,A===void 0?32:wl(A.type))}function Go(A,g){var _=qe.p;try{return qe.p=A,g()}finally{qe.p=_}}var Co=Math.random().toString(36).slice(2),gr="__reactFiber$"+Co,gn="__reactProps$"+Co,Ni="__reactContainer$"+Co,ni="__reactEvents$"+Co,ga="__reactListeners$"+Co,Ra="__reactHandles$"+Co,zs="__reactResources$"+Co,Pi="__reactMarker$"+Co;function kl(A){delete A[gr],delete A[gn],delete A[ni],delete A[ga],delete A[Ra]}function eo(A){var g=A[gr];if(g)return g;for(var _=A.parentNode;_;){if(g=_[Ni]||_[gr]){if(_=g.alternate,g.child!==null||_!==null&&_.child!==null)for(A=Ay(A);A!==null;){if(_=A[gr])return _;A=Ay(A)}return g}A=_,_=A.parentNode}return null}function ya(A){if(A=A[gr]||A[Ni]){var g=A.tag;if(g===5||g===6||g===13||g===31||g===26||g===27||g===3)return A}return null}function tu(A){var g=A.tag;if(g===5||g===26||g===27||g===6)return A.stateNode;throw Error(i(33))}function Xs(A){var g=A[zs];return g||(g=A[zs]={hoistableStyles:new Map,hoistableScripts:new Map}),g}function Ko(A){A[Pi]=!0}var Zo=new Set,gs={};function jr(A,g){Da(A,g),Da(A+"Capture",g)}function Da(A,g){for(gs[A]=g,A=0;A<g.length;A++)Zo.add(g[A])}var os=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Bc={},Mu={};function nu(A){return Pn.call(Mu,A)?!0:Pn.call(Bc,A)?!1:os.test(A)?Mu[A]=!0:(Bc[A]=!0,!1)}function oA(A,g,_){if(nu(g))if(_===null)A.removeAttribute(g);else{switch(typeof _){case"undefined":case"function":case"symbol":A.removeAttribute(g);return;case"boolean":var I=g.toLowerCase().slice(0,5);if(I!=="data-"&&I!=="aria-"){A.removeAttribute(g);return}}A.setAttribute(g,""+_)}}function tc(A,g,_){if(_===null)A.removeAttribute(g);else{switch(typeof _){case"undefined":case"function":case"symbol":case"boolean":A.removeAttribute(g);return}A.setAttribute(g,""+_)}}function gl(A,g,_,I){if(I===null)A.removeAttribute(_);else{switch(typeof I){case"undefined":case"function":case"symbol":case"boolean":A.removeAttribute(_);return}A.setAttributeNS(g,_,""+I)}}function Lo(A){switch(typeof A){case"bigint":case"boolean":case"number":case"string":case"undefined":return A;case"object":return A;default:return""}}function nc(A){var g=A.type;return(A=A.nodeName)&&A.toLowerCase()==="input"&&(g==="checkbox"||g==="radio")}function iu(A,g,_){var I=Object.getOwnPropertyDescriptor(A.constructor.prototype,g);if(!A.hasOwnProperty(g)&&typeof I<"u"&&typeof I.get=="function"&&typeof I.set=="function"){var W=I.get,J=I.set;return Object.defineProperty(A,g,{configurable:!0,get:function(){return W.call(this)},set:function(xe){_=""+xe,J.call(this,xe)}}),Object.defineProperty(A,g,{enumerable:I.enumerable}),{getValue:function(){return _},setValue:function(xe){_=""+xe},stopTracking:function(){A._valueTracker=null,delete A[g]}}}}function Ic(A){if(!A._valueTracker){var g=nc(A)?"checked":"value";A._valueTracker=iu(A,g,""+A[g])}}function ic(A){if(!A)return!1;var g=A._valueTracker;if(!g)return!0;var _=g.getValue(),I="";return A&&(I=nc(A)?A.checked?"true":"false":A.value),A=I,A!==_?(g.setValue(A),!0):!1}function kc(A){if(A=A||(typeof document<"u"?document:void 0),typeof A>"u")return null;try{return A.activeElement||A.body}catch{return A.body}}var ZA=/[\n"\\]/g;function Ss(A){return A.replace(ZA,function(g){return"\\"+g.charCodeAt(0).toString(16)+" "})}function Tc(A,g,_,I,W,J,xe,$e){A.name="",xe!=null&&typeof xe!="function"&&typeof xe!="symbol"&&typeof xe!="boolean"?A.type=xe:A.removeAttribute("type"),g!=null?xe==="number"?(g===0&&A.value===""||A.value!=g)&&(A.value=""+Lo(g)):A.value!==""+Lo(g)&&(A.value=""+Lo(g)):xe!=="submit"&&xe!=="reset"||A.removeAttribute("value"),g!=null?ru(A,xe,Lo(g)):_!=null?ru(A,xe,Lo(_)):I!=null&&A.removeAttribute("value"),W==null&&J!=null&&(A.defaultChecked=!!J),W!=null&&(A.checked=W&&typeof W!="function"&&typeof W!="symbol"),$e!=null&&typeof $e!="function"&&typeof $e!="symbol"&&typeof $e!="boolean"?A.name=""+Lo($e):A.removeAttribute("name")}function wu(A,g,_,I,W,J,xe,$e){if(J!=null&&typeof J!="function"&&typeof J!="symbol"&&typeof J!="boolean"&&(A.type=J),g!=null||_!=null){if(!(J!=="submit"&&J!=="reset"||g!=null)){Ic(A);return}_=_!=null?""+Lo(_):"",g=g!=null?""+Lo(g):_,$e||g===A.value||(A.value=g),A.defaultValue=g}I=I??W,I=typeof I!="function"&&typeof I!="symbol"&&!!I,A.checked=$e?A.checked:!!I,A.defaultChecked=!!I,xe!=null&&typeof xe!="function"&&typeof xe!="symbol"&&typeof xe!="boolean"&&(A.name=xe),Ic(A)}function ru(A,g,_){g==="number"&&kc(A.ownerDocument)===A||A.defaultValue===""+_||(A.defaultValue=""+_)}function ou(A,g,_,I){if(A=A.options,g){g={};for(var W=0;W<_.length;W++)g["$"+_[W]]=!0;for(_=0;_<A.length;_++)W=g.hasOwnProperty("$"+A[_].value),A[_].selected!==W&&(A[_].selected=W),W&&I&&(A[_].defaultSelected=!0)}else{for(_=""+Lo(_),g=null,W=0;W<A.length;W++){if(A[W].value===_){A[W].selected=!0,I&&(A[W].defaultSelected=!0);return}g!==null||A[W].disabled||(g=A[W])}g!==null&&(g.selected=!0)}}function su(A,g,_){if(g!=null&&(g=""+Lo(g),g!==A.value&&(A.value=g),_==null)){A.defaultValue!==g&&(A.defaultValue=g);return}A.defaultValue=_!=null?""+Lo(_):""}function Es(A,g,_,I){if(g==null){if(I!=null){if(_!=null)throw Error(i(92));if(je(I)){if(1<I.length)throw Error(i(93));I=I[0]}_=I}_==null&&(_=""),g=_}_=Lo(g),A.defaultValue=_,I=A.textContent,I===_&&I!==""&&I!==null&&(A.value=I),Ic(A)}function wo(A,g){if(g){var _=A.firstChild;if(_&&_===A.lastChild&&_.nodeType===3){_.nodeValue=g;return}}A.textContent=g}var Tl=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Js(A,g,_){var I=g.indexOf("--")===0;_==null||typeof _=="boolean"||_===""?I?A.setProperty(g,""):g==="float"?A.cssFloat="":A[g]="":I?A.setProperty(g,_):typeof _!="number"||_===0||Tl.has(g)?g==="float"?A.cssFloat=_:A[g]=(""+_).trim():A[g]=_+"px"}function Ui(A,g,_){if(g!=null&&typeof g!="object")throw Error(i(62));if(A=A.style,_!=null){for(var I in _)!_.hasOwnProperty(I)||g!=null&&g.hasOwnProperty(I)||(I.indexOf("--")===0?A.setProperty(I,""):I==="float"?A.cssFloat="":A[I]="");for(var W in g)I=g[W],g.hasOwnProperty(W)&&_[W]!==I&&Js(A,W,I)}else for(var J in g)g.hasOwnProperty(J)&&Js(A,J,g[J])}function au(A){if(A.indexOf("-")===-1)return!1;switch(A){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var aa=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Su=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ir(A){return Su.test(""+A)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":A}function Pa(){}var ko=null;function Rl(A){return A=A.target||A.srcElement||window,A.correspondingUseElement&&(A=A.correspondingUseElement),A.nodeType===3?A.parentNode:A}var ss=null,fo=null;function as(A){var g=ya(A);if(g&&(A=g.stateNode)){var _=A[gn]||null;e:switch(A=g.stateNode,g.type){case"input":if(Tc(A,_.value,_.defaultValue,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name),g=_.name,_.type==="radio"&&g!=null){for(_=A;_.parentNode;)_=_.parentNode;for(_=_.querySelectorAll('input[name="'+Ss(""+g)+'"][type="radio"]'),g=0;g<_.length;g++){var I=_[g];if(I!==A&&I.form===A.form){var W=I[gn]||null;if(!W)throw Error(i(90));Tc(I,W.value,W.defaultValue,W.defaultValue,W.checked,W.defaultChecked,W.type,W.name)}}for(g=0;g<_.length;g++)I=_[g],I.form===A.form&&ic(I)}break e;case"textarea":su(A,_.value,_.defaultValue);break e;case"select":g=_.value,g!=null&&ou(A,!!_.multiple,g,!1)}}}var Fo=!1;function _o(A,g,_){if(Fo)return A(g,_);Fo=!0;try{var I=A(g);return I}finally{if(Fo=!1,(ss!==null||fo!==null)&&(q1(),ss&&(g=ss,A=fo,fo=ss=null,as(g),A)))for(g=0;g<A.length;g++)as(A[g])}}function Ua(A,g){var _=A.stateNode;if(_===null)return null;var I=_[gn]||null;if(I===null)return null;_=I[g];e:switch(g){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(I=!I.disabled)||(A=A.type,I=!(A==="button"||A==="input"||A==="select"||A==="textarea")),A=!I;break e;default:A=!1}if(A)return null;if(_&&typeof _!="function")throw Error(i(231,g,typeof _));return _}var So=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ea=!1;if(So)try{var oo={};Object.defineProperty(oo,"passive",{get:function(){ea=!0}}),window.addEventListener("test",oo,oo),window.removeEventListener("test",oo,oo)}catch{ea=!1}var Ka=null,Nr=null,Gi=null;function Ai(){if(Gi)return Gi;var A,g=Nr,_=g.length,I,W="value"in Ka?Ka.value:Ka.textContent,J=W.length;for(A=0;A<_&&g[A]===W[A];A++);var xe=_-A;for(I=1;I<=xe&&g[_-I]===W[J-I];I++);return Gi=W.slice(A,1<I?1-I:void 0)}function X(A){var g=A.keyCode;return"charCode"in A?(A=A.charCode,A===0&&g===13&&(A=13)):A=g,A===10&&(A=13),32<=A||A===13?A:0}function Ce(){return!0}function Qe(){return!1}function Et(A){function g(_,I,W,J,xe){this._reactName=_,this._targetInst=W,this.type=I,this.nativeEvent=J,this.target=xe,this.currentTarget=null;for(var $e in A)A.hasOwnProperty($e)&&(_=A[$e],this[$e]=_?_(J):J[$e]);return this.isDefaultPrevented=(J.defaultPrevented!=null?J.defaultPrevented:J.returnValue===!1)?Ce:Qe,this.isPropagationStopped=Qe,this}return y(g.prototype,{preventDefault:function(){this.defaultPrevented=!0;var _=this.nativeEvent;_&&(_.preventDefault?_.preventDefault():typeof _.returnValue!="unknown"&&(_.returnValue=!1),this.isDefaultPrevented=Ce)},stopPropagation:function(){var _=this.nativeEvent;_&&(_.stopPropagation?_.stopPropagation():typeof _.cancelBubble!="unknown"&&(_.cancelBubble=!0),this.isPropagationStopped=Ce)},persist:function(){},isPersistent:Ce}),g}var jn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(A){return A.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},On=Et(jn),_i=y({},jn,{view:0,detail:0}),zi=Et(_i),ki,Ei,Cr,so=y({},_i,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Dd,button:0,buttons:0,relatedTarget:function(A){return A.relatedTarget===void 0?A.fromElement===A.srcElement?A.toElement:A.fromElement:A.relatedTarget},movementX:function(A){return"movementX"in A?A.movementX:(A!==Cr&&(Cr&&A.type==="mousemove"?(ki=A.screenX-Cr.screenX,Ei=A.screenY-Cr.screenY):Ei=ki=0,Cr=A),ki)},movementY:function(A){return"movementY"in A?A.movementY:Ei}}),yr=Et(so),Ji=y({},so,{dataTransfer:0}),rr=Et(Ji),ys=y({},_i,{relatedTarget:0}),Xo=Et(ys),Os=y({},jn,{animationName:0,elapsedTime:0,pseudoElement:0}),Bs=Et(Os),lu=y({},jn,{clipboardData:function(A){return"clipboardData"in A?A.clipboardData:window.clipboardData}}),vs=Et(lu),_1=y({},jn,{data:0}),rc=Et(_1),qa={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Td={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ya={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Rd(A){var g=this.nativeEvent;return g.getModifierState?g.getModifierState(A):(A=Ya[A])?!!g[A]:!1}function Dd(){return Rd}var Jo=y({},_i,{key:function(A){if(A.key){var g=qa[A.key]||A.key;if(g!=="Unidentified")return g}return A.type==="keypress"?(A=X(A),A===13?"Enter":String.fromCharCode(A)):A.type==="keydown"||A.type==="keyup"?Td[A.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Dd,charCode:function(A){return A.type==="keypress"?X(A):0},keyCode:function(A){return A.type==="keydown"||A.type==="keyup"?A.keyCode:0},which:function(A){return A.type==="keypress"?X(A):A.type==="keydown"||A.type==="keyup"?A.keyCode:0}}),Dl=Et(Jo),oc=y({},so,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),h0=Et(oc),Bf=y({},_i,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Dd}),dv=Et(Bf),d0=y({},jn,{propertyName:0,elapsedTime:0,pseudoElement:0}),fv=Et(d0),Sp=y({},so,{deltaX:function(A){return"deltaX"in A?A.deltaX:"wheelDeltaX"in A?-A.wheelDeltaX:0},deltaY:function(A){return"deltaY"in A?A.deltaY:"wheelDeltaY"in A?-A.wheelDeltaY:"wheelDelta"in A?-A.wheelDelta:0},deltaZ:0,deltaMode:0}),If=Et(Sp),XA=y({},jn,{newState:0,oldState:0}),kf=Et(XA),Lm=[9,13,27,32],Eu=So&&"CompositionEvent"in window,Rh=null;So&&"documentMode"in document&&(Rh=document.documentMode);var Ep=So&&"TextEvent"in window&&!Rh,Dh=So&&(!Eu||Rh&&8<Rh&&11>=Rh),Tf=" ",Fm=!1;function Pd(A,g){switch(A){case"keyup":return Lm.indexOf(g.keyCode)!==-1;case"keydown":return g.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function x1(A){return A=A.detail,typeof A=="object"&&"data"in A?A.data:null}var Rc=!1;function Ou(A,g){switch(A){case"compositionend":return x1(g);case"keypress":return g.which!==32?null:(Fm=!0,Tf);case"textInput":return A=g.data,A===Tf&&Fm?null:A;default:return null}}function Op(A,g){if(Rc)return A==="compositionend"||!Eu&&Pd(A,g)?(A=Ai(),Gi=Nr=Ka=null,Rc=!1,A):null;switch(A){case"paste":return null;case"keypress":if(!(g.ctrlKey||g.altKey||g.metaKey)||g.ctrlKey&&g.altKey){if(g.char&&1<g.char.length)return g.char;if(g.which)return String.fromCharCode(g.which)}return null;case"compositionend":return Dh&&g.locale!=="ko"?null:g.data;default:return null}}var Rf={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zm(A){var g=A&&A.nodeName&&A.nodeName.toLowerCase();return g==="input"?!!Rf[A.type]:g==="textarea"}function Bp(A,g,_,I){ss?fo?fo.push(I):fo=[I]:ss=I,g=pg(g,"onChange"),0<g.length&&(_=new On("onChange","change",null,_,I),A.push({event:_,listeners:g}))}var Df=null,Pf=null;function Ip(A){MC(A,0)}function kp(A){var g=tu(A);if(ic(g))return A}function Ph(A,g){if(A==="change")return g}var Uh=!1;if(So){var jm;if(So){var JA="oninput"in document;if(!JA){var Tp=document.createElement("div");Tp.setAttribute("oninput","return;"),JA=typeof Tp.oninput=="function"}jm=JA}else jm=!1;Uh=jm&&(!document.documentMode||9<document.documentMode)}function Uf(){Df&&(Df.detachEvent("onpropertychange",eh),Pf=Df=null)}function eh(A){if(A.propertyName==="value"&&kp(Pf)){var g=[];Bp(g,Pf,A,Rl(A)),_o(Ip,g)}}function Rp(A,g,_){A==="focusin"?(Uf(),Df=g,Pf=_,Df.attachEvent("onpropertychange",eh)):A==="focusout"&&Uf()}function f0(A){if(A==="selectionchange"||A==="keyup"||A==="keydown")return kp(Pf)}function M1(A,g){if(A==="click")return kp(g)}function w1(A,g){if(A==="input"||A==="change")return kp(g)}function Kh(A,g){return A===g&&(A!==0||1/A===1/g)||A!==A&&g!==g}var Is=typeof Object.is=="function"?Object.is:Kh;function th(A,g){if(Is(A,g))return!0;if(typeof A!="object"||A===null||typeof g!="object"||g===null)return!1;var _=Object.keys(A),I=Object.keys(g);if(_.length!==I.length)return!1;for(I=0;I<_.length;I++){var W=_[I];if(!Pn.call(g,W)||!Is(A[W],g[W]))return!1}return!0}function xA(A){for(;A&&A.firstChild;)A=A.firstChild;return A}function Nm(A,g){var _=xA(A);A=0;for(var I;_;){if(_.nodeType===3){if(I=A+_.textContent.length,A<=g&&I>=g)return{node:_,offset:g-A};A=I}e:{for(;_;){if(_.nextSibling){_=_.nextSibling;break e}_=_.parentNode}_=void 0}_=xA(_)}}function Gm(A,g){return A&&g?A===g?!0:A&&A.nodeType===3?!1:g&&g.nodeType===3?Gm(A,g.parentNode):"contains"in A?A.contains(g):A.compareDocumentPosition?!!(A.compareDocumentPosition(g)&16):!1:!1}function ao(A){A=A!=null&&A.ownerDocument!=null&&A.ownerDocument.defaultView!=null?A.ownerDocument.defaultView:window;for(var g=kc(A.document);g instanceof A.HTMLIFrameElement;){try{var _=typeof g.contentWindow.location.href=="string"}catch{_=!1}if(_)A=g.contentWindow;else break;g=kc(A.document)}return g}function Wm(A){var g=A&&A.nodeName&&A.nodeName.toLowerCase();return g&&(g==="input"&&(A.type==="text"||A.type==="search"||A.type==="tel"||A.type==="url"||A.type==="password")||g==="textarea"||A.contentEditable==="true")}var Lh=So&&"documentMode"in document&&11>=document.documentMode,Ut=null,sn=null,nn=null,mi=!1;function vr(A,g,_){var I=_.window===_?_.document:_.nodeType===9?_:_.ownerDocument;mi||Ut==null||Ut!==kc(I)||(I=Ut,"selectionStart"in I&&Wm(I)?I={start:I.selectionStart,end:I.selectionEnd}:(I=(I.ownerDocument&&I.ownerDocument.defaultView||window).getSelection(),I={anchorNode:I.anchorNode,anchorOffset:I.anchorOffset,focusNode:I.focusNode,focusOffset:I.focusOffset}),nn&&th(nn,I)||(nn=I,I=pg(sn,"onSelect"),0<I.length&&(g=new On("onSelect","select",null,g,_),A.push({event:g,listeners:I}),g.target=Ut)))}function Vr(A,g){var _={};return _[A.toLowerCase()]=g.toLowerCase(),_["Webkit"+A]="webkit"+g,_["Moz"+A]="moz"+g,_}var ks={animationend:Vr("Animation","AnimationEnd"),animationiteration:Vr("Animation","AnimationIteration"),animationstart:Vr("Animation","AnimationStart"),transitionrun:Vr("Transition","TransitionRun"),transitionstart:Vr("Transition","TransitionStart"),transitioncancel:Vr("Transition","TransitionCancel"),transitionend:Vr("Transition","TransitionEnd")},Wo={},Dp={};So&&(Dp=document.createElement("div").style,"AnimationEvent"in window||(delete ks.animationend.animation,delete ks.animationiteration.animation,delete ks.animationstart.animation),"TransitionEvent"in window||delete ks.transitionend.transition);function MA(A){if(Wo[A])return Wo[A];if(!ks[A])return A;var g=ks[A],_;for(_ in g)if(g.hasOwnProperty(_)&&_ in Dp)return Wo[A]=g[_];return A}var Pl=MA("animationend"),Fh=MA("animationiteration"),Qm=MA("animationstart"),Dc=MA("transitionrun"),zh=MA("transitionstart"),nh=MA("transitioncancel"),kr=MA("transitionend"),p0=new Map,Pp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Pp.push("scrollEnd");function Ul(A,g){p0.set(A,g),jr(g,[A])}var wA=typeof reportError=="function"?reportError:function(A){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var g=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof A=="object"&&A!==null&&typeof A.message=="string"?String(A.message):String(A),error:A});if(!window.dispatchEvent(g))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",A);return}console.error(A)},uu=[],ih=0,SA=0;function Bu(){for(var A=ih,g=SA=ih=0;g<A;){var _=uu[g];uu[g++]=null;var I=uu[g];uu[g++]=null;var W=uu[g];uu[g++]=null;var J=uu[g];if(uu[g++]=null,I!==null&&W!==null){var xe=I.pending;xe===null?W.next=W:(W.next=xe.next,xe.next=W),I.pending=W}J!==0&&qm(_,W,J)}}function jh(A,g,_,I){uu[ih++]=A,uu[ih++]=g,uu[ih++]=_,uu[ih++]=I,SA|=I,A.lanes|=I,A=A.alternate,A!==null&&(A.lanes|=I)}function rh(A,g,_,I){return jh(A,g,_,I),oh(A)}function cu(A,g){return jh(A,null,null,g),oh(A)}function qm(A,g,_){A.lanes|=_;var I=A.alternate;I!==null&&(I.lanes|=_);for(var W=!1,J=A.return;J!==null;)J.childLanes|=_,I=J.alternate,I!==null&&(I.childLanes|=_),J.tag===22&&(A=J.stateNode,A===null||A._visibility&1||(W=!0)),A=J,J=J.return;return A.tag===3?(J=A.stateNode,W&&g!==null&&(W=31-ye(_),A=J.hiddenUpdates,I=A[W],I===null?A[W]=[g]:I.push(g),g.lane=_|536870912),J):null}function oh(A){if(50<Aa)throw Aa=0,I0=null,Error(i(185));for(var g=A.return;g!==null;)A=g,g=A.return;return A.tag===3?A.stateNode:null}var hr={};function Up(A,g,_,I){this.tag=A,this.key=_,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=g,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=I,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yl(A,g,_,I){return new Up(A,g,_,I)}function sA(A){return A=A.prototype,!(!A||!A.isReactComponent)}function Kl(A,g){var _=A.alternate;return _===null?(_=yl(A.tag,g,A.key,A.mode),_.elementType=A.elementType,_.type=A.type,_.stateNode=A.stateNode,_.alternate=A,A.alternate=_):(_.pendingProps=g,_.type=A.type,_.flags=0,_.subtreeFlags=0,_.deletions=null),_.flags=A.flags&65011712,_.childLanes=A.childLanes,_.lanes=A.lanes,_.child=A.child,_.memoizedProps=A.memoizedProps,_.memoizedState=A.memoizedState,_.updateQueue=A.updateQueue,g=A.dependencies,_.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext},_.sibling=A.sibling,_.index=A.index,_.ref=A.ref,_.refCleanup=A.refCleanup,_}function S1(A,g){A.flags&=65011714;var _=A.alternate;return _===null?(A.childLanes=0,A.lanes=g,A.child=null,A.subtreeFlags=0,A.memoizedProps=null,A.memoizedState=null,A.updateQueue=null,A.dependencies=null,A.stateNode=null):(A.childLanes=_.childLanes,A.lanes=_.lanes,A.child=_.child,A.subtreeFlags=0,A.deletions=null,A.memoizedProps=_.memoizedProps,A.memoizedState=_.memoizedState,A.updateQueue=_.updateQueue,A.type=_.type,g=_.dependencies,A.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext}),A}function Ud(A,g,_,I,W,J){var xe=0;if(I=A,typeof A=="function")sA(A)&&(xe=1);else if(typeof A=="string")xe=De(A,_,lt.current)?26:A==="html"||A==="head"||A==="body"?27:5;else e:switch(A){case le:return A=yl(31,_,g,W),A.elementType=le,A.lanes=J,A;case P:return sh(_.children,W,J,g);case F:xe=8,W|=24;break;case j:return A=yl(12,_,g,W|2),A.elementType=j,A.lanes=J,A;case Q:return A=yl(13,_,g,W),A.elementType=Q,A.lanes=J,A;case Y:return A=yl(19,_,g,W),A.elementType=Y,A.lanes=J,A;default:if(typeof A=="object"&&A!==null)switch(A.$$typeof){case V:xe=10;break e;case q:xe=9;break e;case H:xe=11;break e;case z:xe=14;break e;case se:xe=16,I=null;break e}xe=29,_=Error(i(130,A===null?"null":typeof A,"")),I=null}return g=yl(xe,_,g,W),g.elementType=A,g.type=I,g.lanes=J,g}function sh(A,g,_,I){return A=yl(7,A,I,g),A.lanes=_,A}function Kf(A,g,_){return A=yl(6,A,null,g),A.lanes=_,A}function Kd(A){var g=yl(18,null,null,0);return g.stateNode=A,g}function Nh(A,g,_){return g=yl(4,A.children!==null?A.children:[],A.key,g),g.lanes=_,g.stateNode={containerInfo:A.containerInfo,pendingChildren:null,implementation:A.implementation},g}var Kp=new WeakMap;function Ll(A,g){if(typeof A=="object"&&A!==null){var _=Kp.get(A);return _!==void 0?_:(g={value:A,source:g,stack:Dn(g)},Kp.set(A,g),g)}return{value:A,source:g,stack:Dn(g)}}var ah=[],Gh=0,Ts=null,ta=0,Fl=[],sl=0,Pc=null,EA=1,zl="";function sc(A,g){ah[Gh++]=ta,ah[Gh++]=Ts,Ts=A,ta=g}function Lp(A,g,_){Fl[sl++]=EA,Fl[sl++]=zl,Fl[sl++]=Pc,Pc=A;var I=EA;A=zl;var W=32-ye(I)-1;I&=~(1<<W),_+=1;var J=32-ye(g)+W;if(30<J){var xe=W-W%5;J=(I&(1<<xe)-1).toString(32),I>>=xe,W-=xe,EA=1<<32-ye(g)+W|_<<W|I,zl=J+A}else EA=1<<J|_<<W|I,zl=A}function Uc(A){A.return!==null&&(sc(A,1),Lp(A,1,0))}function OA(A){for(;A===Ts;)Ts=ah[--Gh],ah[Gh]=null,ta=ah[--Gh],ah[Gh]=null;for(;A===Pc;)Pc=Fl[--sl],Fl[sl]=null,zl=Fl[--sl],Fl[sl]=null,EA=Fl[--sl],Fl[sl]=null}function lh(A,g){Fl[sl++]=EA,Fl[sl++]=zl,Fl[sl++]=Pc,EA=g.id,zl=g.overflow,Pc=A}var na=null,lo=null,Gr=!1,aA=null,ac=!1,js=Error(i(519));function Iu(A){var g=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw lc(Ll(g,A)),js}function jl(A){var g=A.stateNode,_=A.type,I=A.memoizedProps;switch(g[gr]=A,g[gn]=I,_){case"dialog":co("cancel",g),co("close",g);break;case"iframe":case"object":case"embed":co("load",g);break;case"video":case"audio":for(_=0;_<L0.length;_++)co(L0[_],g);break;case"source":co("error",g);break;case"img":case"image":case"link":co("error",g),co("load",g);break;case"details":co("toggle",g);break;case"input":co("invalid",g),wu(g,I.value,I.defaultValue,I.checked,I.defaultChecked,I.type,I.name,!0);break;case"select":co("invalid",g);break;case"textarea":co("invalid",g),Es(g,I.value,I.defaultValue,I.children)}_=I.children,typeof _!="string"&&typeof _!="number"&&typeof _!="bigint"||g.textContent===""+_||I.suppressHydrationWarning===!0||Gv(g.textContent,_)?(I.popover!=null&&(co("beforetoggle",g),co("toggle",g)),I.onScroll!=null&&co("scroll",g),I.onScrollEnd!=null&&co("scrollend",g),I.onClick!=null&&(g.onclick=Pa),g=!0):g=!1,g||Iu(A,!0)}function Wh(A){for(na=A.return;na;)switch(na.tag){case 5:case 31:case 13:ac=!1;return;case 27:case 3:ac=!0;return;default:na=na.return}}function BA(A){if(A!==na)return!1;if(!Gr)return Wh(A),Gr=!0,!1;var g=A.tag,_;if((_=g!==3&&g!==27)&&((_=g===5)&&(_=A.type,_=!(_!=="form"&&_!=="button")||sf(A.type,A.memoizedProps)),_=!_),_&&lo&&Iu(A),Wh(A),g===13){if(A=A.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(i(317));lo=qv(A)}else if(g===31){if(A=A.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(i(317));lo=qv(A)}else g===27?(g=lo,ar(A.type)?(A=cy,cy=null,lo=A):lo=g):lo=na?$c(A.stateNode.nextSibling):null;return!0}function Ye(){lo=na=null,Gr=!1}function ku(){var A=aA;return A!==null&&(mc===null?mc=A:mc.push.apply(mc,A),aA=null),A}function lc(A){aA===null?aA=[A]:aA.push(A)}var al=we(null),br=null,lA=null;function uh(A,g,_){Me(al,g._currentValue),g._currentValue=_}function uA(A){A._currentValue=al.current,ze(al)}function cA(A,g,_){for(;A!==null;){var I=A.alternate;if((A.childLanes&g)!==g?(A.childLanes|=g,I!==null&&(I.childLanes|=g)):I!==null&&(I.childLanes&g)!==g&&(I.childLanes|=g),A===_)break;A=A.return}}function Qh(A,g,_,I){var W=A.child;for(W!==null&&(W.return=A);W!==null;){var J=W.dependencies;if(J!==null){var xe=W.child;J=J.firstContext;e:for(;J!==null;){var $e=J;J=W;for(var _t=0;_t<g.length;_t++)if($e.context===g[_t]){J.lanes|=_,$e=J.alternate,$e!==null&&($e.lanes|=_),cA(J.return,_,A),I||(xe=null);break e}J=$e.next}}else if(W.tag===18){if(xe=W.return,xe===null)throw Error(i(341));xe.lanes|=_,J=xe.alternate,J!==null&&(J.lanes|=_),cA(xe,_,A),xe=null}else xe=W.child;if(xe!==null)xe.return=W;else for(xe=W;xe!==null;){if(xe===A){xe=null;break}if(W=xe.sibling,W!==null){W.return=xe.return,xe=W;break}xe=xe.return}W=xe}}function Kc(A,g,_,I){A=null;for(var W=g,J=!1;W!==null;){if(!J){if((W.flags&524288)!==0)J=!0;else if((W.flags&262144)!==0)break}if(W.tag===10){var xe=W.alternate;if(xe===null)throw Error(i(387));if(xe=xe.memoizedProps,xe!==null){var $e=W.type;Is(W.pendingProps.value,xe.value)||(A!==null?A.push($e):A=[$e])}}else if(W===Bt.current){if(xe=W.alternate,xe===null)throw Error(i(387));xe.memoizedState.memoizedState!==W.memoizedState.memoizedState&&(A!==null?A.push(Zt):A=[Zt])}W=W.return}A!==null&&Qh(g,A,_,I),g.flags|=262144}function Fp(A){for(A=A.firstContext;A!==null;){if(!Is(A.context._currentValue,A.memoizedValue))return!0;A=A.next}return!1}function qh(A){br=A,lA=null,A=A.dependencies,A!==null&&(A.firstContext=null)}function ll(A){return m0(br,A)}function uc(A,g){return br===null&&qh(A),m0(A,g)}function m0(A,g){var _=g._currentValue;if(g={context:g,memoizedValue:_,next:null},lA===null){if(A===null)throw Error(i(308));lA=g,A.dependencies={lanes:0,firstContext:g},A.flags|=524288}else lA=lA.next=g;return _}var Lf=typeof AbortController<"u"?AbortController:function(){var A=[],g=this.signal={aborted:!1,addEventListener:function(_,I){A.push(I)}};this.abort=function(){g.aborted=!0,A.forEach(function(_){return _()})}},Ff=n.unstable_scheduleCallback,Tu=n.unstable_NormalPriority,ls={$$typeof:V,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function cc(){return{controller:new Lf,data:new Map,refCount:0}}function Nl(A){A.refCount--,A.refCount===0&&Ff(Tu,function(){A.controller.abort()})}var Au=null,Yh=0,vl=0,Ac=null;function Ld(A,g){if(Au===null){var _=Au=[];Yh=0,vl=$l(),Ac={status:"pending",value:void 0,then:function(I){_.push(I)}}}return Yh++,g.then(Ym,Ym),g}function Ym(){if(--Yh===0&&Au!==null){Ac!==null&&(Ac.status="fulfilled");var A=Au;Au=null,vl=0,Ac=null;for(var g=0;g<A.length;g++)(0,A[g])()}}function pv(A,g){var _=[],I={status:"pending",value:null,reason:null,then:function(W){_.push(W)}};return A.then(function(){I.status="fulfilled",I.value=g;for(var W=0;W<_.length;W++)(0,_[W])(g)},function(W){for(I.status="rejected",I.reason=W,W=0;W<_.length;W++)(0,_[W])(void 0)}),I}var Gl=Ie.S;Ie.S=function(A,g){gC=$n(),typeof g=="object"&&g!==null&&typeof g.then=="function"&&Ld(A,g),Gl!==null&&Gl(A,g)};var $h=we(null);function Fd(){var A=$h.current;return A!==null?A:hs.pooledCache}function Lc(A,g){g===null?Me($h,$h.current):Me($h,g.pool)}function Vn(){var A=Fd();return A===null?null:{parent:ls._currentValue,pool:A}}var zd=Error(i(460)),zf=Error(i(474)),ch=Error(i(542)),Vh={then:function(){}};function Hh(A){return A=A.status,A==="fulfilled"||A==="rejected"}function Ah(A,g,_){switch(_=A[_],_===void 0?A.push(g):_!==g&&(g.then(Pa,Pa),g=_),g.status){case"fulfilled":return g.value;case"rejected":throw A=g.reason,jf(A),A;default:if(typeof g.status=="string")g.then(Pa,Pa);else{if(A=hs,A!==null&&100<A.shellSuspendCounter)throw Error(i(482));A=g,A.status="pending",A.then(function(I){if(g.status==="pending"){var W=g;W.status="fulfilled",W.value=I}},function(I){if(g.status==="pending"){var W=g;W.status="rejected",W.reason=I}})}switch(g.status){case"fulfilled":return g.value;case"rejected":throw A=g.reason,jf(A),A}throw hc=g,zd}}function or(A){try{var g=A._init;return g(A._payload)}catch(_){throw _!==null&&typeof _=="object"&&typeof _.then=="function"?(hc=_,zd):_}}var hc=null;function g0(){if(hc===null)throw Error(i(459));var A=hc;return hc=null,A}function jf(A){if(A===zd||A===ch)throw Error(i(483))}var Zh=null,Ru=0;function jd(A){var g=Ru;return Ru+=1,Zh===null&&(Zh=[]),Ah(Zh,A,g)}function Du(A,g){g=g.props.ref,A.ref=g!==void 0?g:null}function Wl(A,g){throw g.$$typeof===M?Error(i(525)):(A=Object.prototype.toString.call(g),Error(i(31,A==="[object Object]"?"object with keys {"+Object.keys(g).join(", ")+"}":A)))}function y0(A){function g(Kt,kt){if(A){var qt=Kt.deletions;qt===null?(Kt.deletions=[kt],Kt.flags|=16):qt.push(kt)}}function _(Kt,kt){if(!A)return null;for(;kt!==null;)g(Kt,kt),kt=kt.sibling;return null}function I(Kt){for(var kt=new Map;Kt!==null;)Kt.key!==null?kt.set(Kt.key,Kt):kt.set(Kt.index,Kt),Kt=Kt.sibling;return kt}function W(Kt,kt){return Kt=Kl(Kt,kt),Kt.index=0,Kt.sibling=null,Kt}function J(Kt,kt,qt){return Kt.index=qt,A?(qt=Kt.alternate,qt!==null?(qt=qt.index,qt<kt?(Kt.flags|=67108866,kt):qt):(Kt.flags|=67108866,kt)):(Kt.flags|=1048576,kt)}function xe(Kt){return A&&Kt.alternate===null&&(Kt.flags|=67108866),Kt}function $e(Kt,kt,qt,hn){return kt===null||kt.tag!==6?(kt=Kf(qt,Kt.mode,hn),kt.return=Kt,kt):(kt=W(kt,qt),kt.return=Kt,kt)}function _t(Kt,kt,qt,hn){var Zi=qt.type;return Zi===P?ln(Kt,kt,qt.props.children,hn,qt.key):kt!==null&&(kt.elementType===Zi||typeof Zi=="object"&&Zi!==null&&Zi.$$typeof===se&&or(Zi)===kt.type)?(kt=W(kt,qt.props),Du(kt,qt),kt.return=Kt,kt):(kt=Ud(qt.type,qt.key,qt.props,null,Kt.mode,hn),Du(kt,qt),kt.return=Kt,kt)}function $t(Kt,kt,qt,hn){return kt===null||kt.tag!==4||kt.stateNode.containerInfo!==qt.containerInfo||kt.stateNode.implementation!==qt.implementation?(kt=Nh(qt,Kt.mode,hn),kt.return=Kt,kt):(kt=W(kt,qt.children||[]),kt.return=Kt,kt)}function ln(Kt,kt,qt,hn,Zi){return kt===null||kt.tag!==7?(kt=sh(qt,Kt.mode,hn,Zi),kt.return=Kt,kt):(kt=W(kt,qt),kt.return=Kt,kt)}function pn(Kt,kt,qt){if(typeof kt=="string"&&kt!==""||typeof kt=="number"||typeof kt=="bigint")return kt=Kf(""+kt,Kt.mode,qt),kt.return=Kt,kt;if(typeof kt=="object"&&kt!==null){switch(kt.$$typeof){case x:return qt=Ud(kt.type,kt.key,kt.props,null,Kt.mode,qt),Du(qt,kt),qt.return=Kt,qt;case T:return kt=Nh(kt,Kt.mode,qt),kt.return=Kt,kt;case se:return kt=or(kt),pn(Kt,kt,qt)}if(je(kt)||ve(kt))return kt=sh(kt,Kt.mode,qt,null),kt.return=Kt,kt;if(typeof kt.then=="function")return pn(Kt,jd(kt),qt);if(kt.$$typeof===V)return pn(Kt,uc(Kt,kt),qt);Wl(Kt,kt)}return null}function Xt(Kt,kt,qt,hn){var Zi=kt!==null?kt.key:null;if(typeof qt=="string"&&qt!==""||typeof qt=="number"||typeof qt=="bigint")return Zi!==null?null:$e(Kt,kt,""+qt,hn);if(typeof qt=="object"&&qt!==null){switch(qt.$$typeof){case x:return qt.key===Zi?_t(Kt,kt,qt,hn):null;case T:return qt.key===Zi?$t(Kt,kt,qt,hn):null;case se:return qt=or(qt),Xt(Kt,kt,qt,hn)}if(je(qt)||ve(qt))return Zi!==null?null:ln(Kt,kt,qt,hn,null);if(typeof qt.then=="function")return Xt(Kt,kt,jd(qt),hn);if(qt.$$typeof===V)return Xt(Kt,kt,uc(Kt,qt),hn);Wl(Kt,qt)}return null}function rn(Kt,kt,qt,hn,Zi){if(typeof hn=="string"&&hn!==""||typeof hn=="number"||typeof hn=="bigint")return Kt=Kt.get(qt)||null,$e(kt,Kt,""+hn,Zi);if(typeof hn=="object"&&hn!==null){switch(hn.$$typeof){case x:return Kt=Kt.get(hn.key===null?qt:hn.key)||null,_t(kt,Kt,hn,Zi);case T:return Kt=Kt.get(hn.key===null?qt:hn.key)||null,$t(kt,Kt,hn,Zi);case se:return hn=or(hn),rn(Kt,kt,qt,hn,Zi)}if(je(hn)||ve(hn))return Kt=Kt.get(qt)||null,ln(kt,Kt,hn,Zi,null);if(typeof hn.then=="function")return rn(Kt,kt,qt,jd(hn),Zi);if(hn.$$typeof===V)return rn(Kt,kt,qt,uc(kt,hn),Zi);Wl(kt,hn)}return null}function Ti(Kt,kt,qt,hn){for(var Zi=null,jo=null,ri=kt,tr=kt=0,Kr=null;ri!==null&&tr<qt.length;tr++){ri.index>tr?(Kr=ri,ri=null):Kr=ri.sibling;var Lr=Xt(Kt,ri,qt[tr],hn);if(Lr===null){ri===null&&(ri=Kr);break}A&&ri&&Lr.alternate===null&&g(Kt,ri),kt=J(Lr,kt,tr),jo===null?Zi=Lr:jo.sibling=Lr,jo=Lr,ri=Kr}if(tr===qt.length)return _(Kt,ri),Gr&&sc(Kt,tr),Zi;if(ri===null){for(;tr<qt.length;tr++)ri=pn(Kt,qt[tr],hn),ri!==null&&(kt=J(ri,kt,tr),jo===null?Zi=ri:jo.sibling=ri,jo=ri);return Gr&&sc(Kt,tr),Zi}for(ri=I(ri);tr<qt.length;tr++)Kr=rn(ri,Kt,tr,qt[tr],hn),Kr!==null&&(A&&Kr.alternate!==null&&ri.delete(Kr.key===null?tr:Kr.key),kt=J(Kr,kt,tr),jo===null?Zi=Kr:jo.sibling=Kr,jo=Kr);return A&&ri.forEach(function(Zc){return g(Kt,Zc)}),Gr&&sc(Kt,tr),Zi}function lr(Kt,kt,qt,hn){if(qt==null)throw Error(i(151));for(var Zi=null,jo=null,ri=kt,tr=kt=0,Kr=null,Lr=qt.next();ri!==null&&!Lr.done;tr++,Lr=qt.next()){ri.index>tr?(Kr=ri,ri=null):Kr=ri.sibling;var Zc=Xt(Kt,ri,Lr.value,hn);if(Zc===null){ri===null&&(ri=Kr);break}A&&ri&&Zc.alternate===null&&g(Kt,ri),kt=J(Zc,kt,tr),jo===null?Zi=Zc:jo.sibling=Zc,jo=Zc,ri=Kr}if(Lr.done)return _(Kt,ri),Gr&&sc(Kt,tr),Zi;if(ri===null){for(;!Lr.done;tr++,Lr=qt.next())Lr=pn(Kt,Lr.value,hn),Lr!==null&&(kt=J(Lr,kt,tr),jo===null?Zi=Lr:jo.sibling=Lr,jo=Lr);return Gr&&sc(Kt,tr),Zi}for(ri=I(ri);!Lr.done;tr++,Lr=qt.next())Lr=rn(ri,Kt,tr,Lr.value,hn),Lr!==null&&(A&&Lr.alternate!==null&&ri.delete(Lr.key===null?tr:Lr.key),kt=J(Lr,kt,tr),jo===null?Zi=Lr:jo.sibling=Lr,jo=Lr);return A&&ri.forEach(function(hd){return g(Kt,hd)}),Gr&&sc(Kt,tr),Zi}function Ms(Kt,kt,qt,hn){if(typeof qt=="object"&&qt!==null&&qt.type===P&&qt.key===null&&(qt=qt.props.children),typeof qt=="object"&&qt!==null){switch(qt.$$typeof){case x:e:{for(var Zi=qt.key;kt!==null;){if(kt.key===Zi){if(Zi=qt.type,Zi===P){if(kt.tag===7){_(Kt,kt.sibling),hn=W(kt,qt.props.children),hn.return=Kt,Kt=hn;break e}}else if(kt.elementType===Zi||typeof Zi=="object"&&Zi!==null&&Zi.$$typeof===se&&or(Zi)===kt.type){_(Kt,kt.sibling),hn=W(kt,qt.props),Du(hn,qt),hn.return=Kt,Kt=hn;break e}_(Kt,kt);break}else g(Kt,kt);kt=kt.sibling}qt.type===P?(hn=sh(qt.props.children,Kt.mode,hn,qt.key),hn.return=Kt,Kt=hn):(hn=Ud(qt.type,qt.key,qt.props,null,Kt.mode,hn),Du(hn,qt),hn.return=Kt,Kt=hn)}return xe(Kt);case T:e:{for(Zi=qt.key;kt!==null;){if(kt.key===Zi)if(kt.tag===4&&kt.stateNode.containerInfo===qt.containerInfo&&kt.stateNode.implementation===qt.implementation){_(Kt,kt.sibling),hn=W(kt,qt.children||[]),hn.return=Kt,Kt=hn;break e}else{_(Kt,kt);break}else g(Kt,kt);kt=kt.sibling}hn=Nh(qt,Kt.mode,hn),hn.return=Kt,Kt=hn}return xe(Kt);case se:return qt=or(qt),Ms(Kt,kt,qt,hn)}if(je(qt))return Ti(Kt,kt,qt,hn);if(ve(qt)){if(Zi=ve(qt),typeof Zi!="function")throw Error(i(150));return qt=Zi.call(qt),lr(Kt,kt,qt,hn)}if(typeof qt.then=="function")return Ms(Kt,kt,jd(qt),hn);if(qt.$$typeof===V)return Ms(Kt,kt,uc(Kt,qt),hn);Wl(Kt,qt)}return typeof qt=="string"&&qt!==""||typeof qt=="number"||typeof qt=="bigint"?(qt=""+qt,kt!==null&&kt.tag===6?(_(Kt,kt.sibling),hn=W(kt,qt),hn.return=Kt,Kt=hn):(_(Kt,kt),hn=Kf(qt,Kt.mode,hn),hn.return=Kt,Kt=hn),xe(Kt)):_(Kt,kt)}return function(Kt,kt,qt,hn){try{Ru=0;var Zi=Ms(Kt,kt,qt,hn);return Zh=null,Zi}catch(ri){if(ri===zd||ri===ch)throw ri;var jo=yl(29,ri,null,Kt.mode);return jo.lanes=hn,jo.return=Kt,jo}finally{}}}var hh=y0(!0),$m=y0(!1),dc=!1;function bl(A){A.updateQueue={baseState:A.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function To(A,g){A=A.updateQueue,g.updateQueue===A&&(g.updateQueue={baseState:A.baseState,firstBaseUpdate:A.firstBaseUpdate,lastBaseUpdate:A.lastBaseUpdate,shared:A.shared,callbacks:null})}function dh(A){return{lane:A,tag:0,payload:null,callback:null,next:null}}function hu(A,g,_){var I=A.updateQueue;if(I===null)return null;if(I=I.shared,(Mo&2)!==0){var W=I.pending;return W===null?g.next=g:(g.next=W.next,W.next=g),I.pending=g,g=oh(A),qm(A,null,_),g}return jh(A,I,g,_),oh(A)}function Xh(A,g,_){if(g=g.updateQueue,g!==null&&(g=g.shared,(_&4194048)!==0)){var I=g.lanes;I&=A.pendingLanes,_|=I,g.lanes=_,ii(A,_)}}function Nf(A,g){var _=A.updateQueue,I=A.alternate;if(I!==null&&(I=I.updateQueue,_===I)){var W=null,J=null;if(_=_.firstBaseUpdate,_!==null){do{var xe={lane:_.lane,tag:_.tag,payload:_.payload,callback:null,next:null};J===null?W=J=xe:J=J.next=xe,_=_.next}while(_!==null);J===null?W=J=g:J=J.next=g}else W=J=g;_={baseState:I.baseState,firstBaseUpdate:W,lastBaseUpdate:J,shared:I.shared,callbacks:I.callbacks},A.updateQueue=_;return}A=_.lastBaseUpdate,A===null?_.firstBaseUpdate=g:A.next=g,_.lastBaseUpdate=g}var ia=!1;function Jh(){if(ia){var A=Ac;if(A!==null)throw A}}function ed(A,g,_,I){ia=!1;var W=A.updateQueue;dc=!1;var J=W.firstBaseUpdate,xe=W.lastBaseUpdate,$e=W.shared.pending;if($e!==null){W.shared.pending=null;var _t=$e,$t=_t.next;_t.next=null,xe===null?J=$t:xe.next=$t,xe=_t;var ln=A.alternate;ln!==null&&(ln=ln.updateQueue,$e=ln.lastBaseUpdate,$e!==xe&&($e===null?ln.firstBaseUpdate=$t:$e.next=$t,ln.lastBaseUpdate=_t))}if(J!==null){var pn=W.baseState;xe=0,ln=$t=_t=null,$e=J;do{var Xt=$e.lane&-536870913,rn=Xt!==$e.lane;if(rn?(mo&Xt)===Xt:(I&Xt)===Xt){Xt!==0&&Xt===vl&&(ia=!0),ln!==null&&(ln=ln.next={lane:0,tag:$e.tag,payload:$e.payload,callback:null,next:null});e:{var Ti=A,lr=$e;Xt=g;var Ms=_;switch(lr.tag){case 1:if(Ti=lr.payload,typeof Ti=="function"){pn=Ti.call(Ms,pn,Xt);break e}pn=Ti;break e;case 3:Ti.flags=Ti.flags&-65537|128;case 0:if(Ti=lr.payload,Xt=typeof Ti=="function"?Ti.call(Ms,pn,Xt):Ti,Xt==null)break e;pn=y({},pn,Xt);break e;case 2:dc=!0}}Xt=$e.callback,Xt!==null&&(A.flags|=64,rn&&(A.flags|=8192),rn=W.callbacks,rn===null?W.callbacks=[Xt]:rn.push(Xt))}else rn={lane:Xt,tag:$e.tag,payload:$e.payload,callback:$e.callback,next:null},ln===null?($t=ln=rn,_t=pn):ln=ln.next=rn,xe|=Xt;if($e=$e.next,$e===null){if($e=W.shared.pending,$e===null)break;rn=$e,$e=rn.next,rn.next=null,W.lastBaseUpdate=rn,W.shared.pending=null}}while(!0);ln===null&&(_t=pn),W.baseState=_t,W.firstBaseUpdate=$t,W.lastBaseUpdate=ln,J===null&&(W.shared.lanes=0),Xf|=xe,A.lanes=xe,A.memoizedState=pn}}function La(A,g){if(typeof A!="function")throw Error(i(191,A));A.call(g)}function Nd(A,g){var _=A.callbacks;if(_!==null)for(A.callbacks=null,A=0;A<_.length;A++)La(_[A],g)}var ti=we(null),Ci=we(0);function td(A,g){A=LA,Me(Ci,A),Me(ti,g),LA=A|g.baseLanes}function ul(){Me(Ci,LA),Me(ti,ti.current)}function nd(){LA=Ci.current,ze(ti),ze(Ci)}var us=we(null),fc=null;function cl(A){var g=A.alternate;Me(bs,bs.current&1),Me(us,A),fc===null&&(g===null||ti.current!==null||g.memoizedState!==null)&&(fc=A)}function AA(A){Me(bs,bs.current),Me(us,A),fc===null&&(fc=A)}function E1(A){A.tag===22?(Me(bs,bs.current),Me(us,A),fc===null&&(fc=A)):Fc()}function Fc(){Me(bs,bs.current),Me(us,us.current)}function Pu(A){ze(us),fc===A&&(fc=null),ze(bs)}var bs=we(0);function cs(A){for(var g=A;g!==null;){if(g.tag===13){var _=g.memoizedState;if(_!==null&&(_=_.dehydrated,_===null||uy(_)||_h(_)))return g}else if(g.tag===19&&(g.memoizedProps.revealOrder==="forwards"||g.memoizedProps.revealOrder==="backwards"||g.memoizedProps.revealOrder==="unstable_legacy-backwards"||g.memoizedProps.revealOrder==="together")){if((g.flags&128)!==0)return g}else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===A)break;for(;g.sibling===null;){if(g.return===null||g.return===A)return null;g=g.return}g.sibling.return=g.return,g=g.sibling}return null}var po=0,sr=null,xo=null,As=null,id=!1,IA=!1,fh=!1,hA=0,zc=0,kA=null,Vm=0;function zo(){throw Error(i(321))}function Gf(A,g){if(g===null)return!1;for(var _=0;_<g.length&&_<A.length;_++)if(!Is(A[_],g[_]))return!1;return!0}function Wf(A,g,_,I,W,J){return po=J,sr=g,g.memoizedState=null,g.updateQueue=null,g.lanes=0,Ie.H=A===null||A.memoizedState===null?Hm:fA,fh=!1,J=_(I,W),fh=!1,IA&&(J=Gd(g,_,I,W)),Qf(A),J}function Qf(A){Ie.H=DA;var g=xo!==null&&xo.next!==null;if(po=0,As=xo=sr=null,id=!1,zc=0,kA=null,g)throw Error(i(300));A===null||ca||(A=A.dependencies,A!==null&&Fp(A)&&(ca=!0))}function Gd(A,g,_,I){sr=A;var W=0;do{if(IA&&(kA=null),zc=0,IA=!1,25<=W)throw Error(i(301));if(W+=1,As=xo=null,A.updateQueue!=null){var J=A.updateQueue;J.lastEffect=null,J.events=null,J.stores=null,J.memoCache!=null&&(J.memoCache.index=0)}Ie.H=qd,J=g(_,I)}while(IA);return J}function O(){var A=Ie.H,g=A.useState()[0];return g=typeof g.then=="function"?G(g):g,A=A.useState()[0],(xo!==null?xo.memoizedState:null)!==A&&(sr.flags|=1024),g}function l(){var A=hA!==0;return hA=0,A}function p(A,g,_){g.updateQueue=A.updateQueue,g.flags&=-2053,A.lanes&=~_}function C(A){if(id){for(A=A.memoizedState;A!==null;){var g=A.queue;g!==null&&(g.pending=null),A=A.next}id=!1}po=0,As=xo=sr=null,IA=!1,zc=hA=0,kA=null}function E(){var A={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return As===null?sr.memoizedState=As=A:As=As.next=A,As}function B(){if(xo===null){var A=sr.alternate;A=A!==null?A.memoizedState:null}else A=xo.next;var g=As===null?sr.memoizedState:As.next;if(g!==null)As=g,xo=A;else{if(A===null)throw sr.alternate===null?Error(i(467)):Error(i(310));xo=A,A={memoizedState:xo.memoizedState,baseState:xo.baseState,baseQueue:xo.baseQueue,queue:xo.queue,next:null},As===null?sr.memoizedState=As=A:As=As.next=A}return As}function U(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function G(A){var g=zc;return zc+=1,kA===null&&(kA=[]),A=Ah(kA,A,g),g=sr,(As===null?g.memoizedState:As.next)===null&&(g=g.alternate,Ie.H=g===null||g.memoizedState===null?Hm:fA),A}function Z(A){if(A!==null&&typeof A=="object"){if(typeof A.then=="function")return G(A);if(A.$$typeof===V)return ll(A)}throw Error(i(438,String(A)))}function ae(A){var g=null,_=sr.updateQueue;if(_!==null&&(g=_.memoCache),g==null){var I=sr.alternate;I!==null&&(I=I.updateQueue,I!==null&&(I=I.memoCache,I!=null&&(g={data:I.data.map(function(W){return W.slice()}),index:0})))}if(g==null&&(g={data:[],index:0}),_===null&&(_=U(),sr.updateQueue=_),_.memoCache=g,_=g.data[g.index],_===void 0)for(_=g.data[g.index]=Array(A),I=0;I<A;I++)_[I]=pe;return g.index++,_}function ce(A,g){return typeof g=="function"?g(A):g}function me(A){var g=B();return ge(g,xo,A)}function ge(A,g,_){var I=A.queue;if(I===null)throw Error(i(311));I.lastRenderedReducer=_;var W=A.baseQueue,J=I.pending;if(J!==null){if(W!==null){var xe=W.next;W.next=J.next,J.next=xe}g.baseQueue=W=J,I.pending=null}if(J=A.baseState,W===null)A.memoizedState=J;else{g=W.next;var $e=xe=null,_t=null,$t=g,ln=!1;do{var pn=$t.lane&-536870913;if(pn!==$t.lane?(mo&pn)===pn:(po&pn)===pn){var Xt=$t.revertLane;if(Xt===0)_t!==null&&(_t=_t.next={lane:0,revertLane:0,gesture:null,action:$t.action,hasEagerState:$t.hasEagerState,eagerState:$t.eagerState,next:null}),pn===vl&&(ln=!0);else if((po&Xt)===Xt){$t=$t.next,Xt===vl&&(ln=!0);continue}else pn={lane:0,revertLane:$t.revertLane,gesture:null,action:$t.action,hasEagerState:$t.hasEagerState,eagerState:$t.eagerState,next:null},_t===null?($e=_t=pn,xe=J):_t=_t.next=pn,sr.lanes|=Xt,Xf|=Xt;pn=$t.action,fh&&_(J,pn),J=$t.hasEagerState?$t.eagerState:_(J,pn)}else Xt={lane:pn,revertLane:$t.revertLane,gesture:$t.gesture,action:$t.action,hasEagerState:$t.hasEagerState,eagerState:$t.eagerState,next:null},_t===null?($e=_t=Xt,xe=J):_t=_t.next=Xt,sr.lanes|=pn,Xf|=pn;$t=$t.next}while($t!==null&&$t!==g);if(_t===null?xe=J:_t.next=$e,!Is(J,A.memoizedState)&&(ca=!0,ln&&(_=Ac,_!==null)))throw _;A.memoizedState=J,A.baseState=xe,A.baseQueue=_t,I.lastRenderedState=J}return W===null&&(I.lanes=0),[A.memoizedState,I.dispatch]}function Pe(A){var g=B(),_=g.queue;if(_===null)throw Error(i(311));_.lastRenderedReducer=A;var I=_.dispatch,W=_.pending,J=g.memoizedState;if(W!==null){_.pending=null;var xe=W=W.next;do J=A(J,xe.action),xe=xe.next;while(xe!==W);Is(J,g.memoizedState)||(ca=!0),g.memoizedState=J,g.baseQueue===null&&(g.baseState=J),_.lastRenderedState=J}return[J,I]}function Ne(A,g,_){var I=sr,W=B(),J=Gr;if(J){if(_===void 0)throw Error(i(407));_=_()}else _=g();var xe=!Is((xo||W).memoizedState,_);if(xe&&(W.memoizedState=_,ca=!0),W=W.queue,Br(et.bind(null,I,W,A),[A]),W.getSnapshot!==g||xe||As!==null&&As.memoizedState.tag&1){if(I.flags|=2048,Er(9,{destroy:void 0},Xe.bind(null,I,W,_,g),null),hs===null)throw Error(i(349));J||(po&127)!==0||Ze(I,g,_)}return _}function Ze(A,g,_){A.flags|=16384,A={getSnapshot:g,value:_},g=sr.updateQueue,g===null?(g=U(),sr.updateQueue=g,g.stores=[A]):(_=g.stores,_===null?g.stores=[A]:_.push(A))}function Xe(A,g,_,I){g.value=_,g.getSnapshot=I,ot(g)&&ht(A)}function et(A,g,_){return _(function(){ot(g)&&ht(A)})}function ot(A){var g=A.getSnapshot;A=A.value;try{var _=g();return!Is(A,_)}catch{return!0}}function ht(A){var g=cu(A,2);g!==null&&zu(g,A,2)}function ut(A){var g=E();if(typeof A=="function"){var _=A;if(A=_(),fh){rt(!0);try{_()}finally{rt(!1)}}}return g.memoizedState=g.baseState=A,g.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ce,lastRenderedState:A},g}function gt(A,g,_,I){return A.baseState=_,ge(A,xo,typeof I=="function"?I:ce)}function xt(A,g,_,I,W){if(pu(A))throw Error(i(485));if(A=g.action,A!==null){var J={payload:W,action:A,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(xe){J.listeners.push(xe)}};Ie.T!==null?_(!0):J.isTransition=!1,I(J),_=g.pending,_===null?(J.next=g.pending=J,ct(g,J)):(J.next=_.next,g.pending=_.next=J)}}function ct(A,g){var _=g.action,I=g.payload,W=A.state;if(g.isTransition){var J=Ie.T,xe={};Ie.T=xe;try{var $e=_(W,I),_t=Ie.S;_t!==null&&_t(xe,$e),wt(A,g,$e)}catch($t){Lt(A,g,$t)}finally{J!==null&&xe.types!==null&&(J.types=xe.types),Ie.T=J}}else try{J=_(W,I),wt(A,g,J)}catch($t){Lt(A,g,$t)}}function wt(A,g,_){_!==null&&typeof _=="object"&&typeof _.then=="function"?_.then(function(I){Wt(A,g,I)},function(I){return Lt(A,g,I)}):Wt(A,g,_)}function Wt(A,g,_){g.status="fulfilled",g.value=_,Nt(g),A.state=_,g=A.pending,g!==null&&(_=g.next,_===g?A.pending=null:(_=_.next,g.next=_,ct(A,_)))}function Lt(A,g,_){var I=A.pending;if(A.pending=null,I!==null){I=I.next;do g.status="rejected",g.reason=_,Nt(g),g=g.next;while(g!==I)}A.action=null}function Nt(A){A=A.listeners;for(var g=0;g<A.length;g++)(0,A[g])()}function Gt(A,g){return g}function Bn(A,g){if(Gr){var _=hs.formState;if(_!==null){e:{var I=sr;if(Gr){if(lo){t:{for(var W=lo,J=ac;W.nodeType!==8;){if(!J){W=null;break t}if(W=$c(W.nextSibling),W===null){W=null;break t}}J=W.data,W=J==="F!"||J==="F"?W:null}if(W){lo=$c(W.nextSibling),I=W.data==="F!";break e}}Iu(I)}I=!1}I&&(g=_[0])}}return _=E(),_.memoizedState=_.baseState=g,I={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gt,lastRenderedState:g},_.queue=I,_=Qd.bind(null,sr,I),I.dispatch=_,I=ut(!1),J=Ku.bind(null,sr,!1,I.queue),I=E(),W={state:g,dispatch:null,action:A,pending:null},I.queue=W,_=xt.bind(null,sr,W,J,_),W.dispatch=_,I.memoizedState=A,[g,_,!1]}function kn(A){var g=B();return cn(g,xo,A)}function cn(A,g,_){if(g=ge(A,g,Gt)[0],A=me(ce)[0],typeof g=="object"&&g!==null&&typeof g.then=="function")try{var I=G(g)}catch(xe){throw xe===zd?ch:xe}else I=g;g=B();var W=g.queue,J=W.dispatch;return _!==g.memoizedState&&(sr.flags|=2048,Er(9,{destroy:void 0},si.bind(null,W,_),null)),[I,J,A]}function si(A,g){A.action=g}function Xi(A){var g=B(),_=xo;if(_!==null)return cn(g,_,A);B(),g=g.memoizedState,_=B();var I=_.queue.dispatch;return _.memoizedState=A,[g,I,!1]}function Er(A,g,_,I){return A={tag:A,create:_,deps:I,inst:g,next:null},g=sr.updateQueue,g===null&&(g=U(),sr.updateQueue=g),_=g.lastEffect,_===null?g.lastEffect=A.next=A:(I=_.next,_.next=A,A.next=I,g.lastEffect=A),A}function Eo(){return B().memoizedState}function Wr(A,g,_,I){var W=E();sr.flags|=A,W.memoizedState=Er(1|g,{destroy:void 0},_,I===void 0?null:I)}function es(A,g,_,I){var W=B();I=I===void 0?null:I;var J=W.memoizedState.inst;xo!==null&&I!==null&&Gf(I,xo.memoizedState.deps)?W.memoizedState=Er(g,J,_,I):(sr.flags|=A,W.memoizedState=Er(1|g,J,_,I))}function Qo(A,g){Wr(8390656,8,A,g)}function Br(A,g){es(2048,8,A,g)}function Rs(A){sr.flags|=4;var g=sr.updateQueue;if(g===null)g=U(),sr.updateQueue=g,g.events=[A];else{var _=g.events;_===null?g.events=[A]:_.push(A)}}function Al(A){var g=B().memoizedState;return Rs({ref:g,nextImpl:A}),function(){if((Mo&2)!==0)throw Error(i(440));return g.impl.apply(void 0,arguments)}}function la(A,g){return es(4,2,A,g)}function ra(A,g){return es(4,4,A,g)}function Cl(A,g){if(typeof g=="function"){A=A();var _=g(A);return function(){typeof _=="function"?_():g(null)}}if(g!=null)return A=A(),g.current=A,function(){g.current=null}}function ph(A,g,_){_=_!=null?_.concat([A]):null,es(4,4,Cl.bind(null,g,A),_)}function Uu(){}function TA(A,g){var _=B();g=g===void 0?null:g;var I=_.memoizedState;return g!==null&&Gf(g,I[1])?I[0]:(_.memoizedState=[A,g],A)}function va(A,g){var _=B();g=g===void 0?null:g;var I=_.memoizedState;if(g!==null&&Gf(g,I[1]))return I[0];if(I=A(),fh){rt(!0);try{A()}finally{rt(!1)}}return _.memoizedState=[I,g],I}function du(A,g,_){return _===void 0||(po&1073741824)!==0&&(mo&261930)===0?A.memoizedState=g:(A.memoizedState=_,A=kv(),sr.lanes|=A,Xf|=A,_)}function Wd(A,g,_,I){return Is(_,g)?_:ti.current!==null?(A=du(A,_,I),Is(A,g)||(ca=!0),A):(po&42)===0||(po&1073741824)!==0&&(mo&261930)===0?(ca=!0,A.memoizedState=_):(A=kv(),sr.lanes|=A,Xf|=A,g)}function RA(A,g,_,I,W){var J=qe.p;qe.p=J!==0&&8>J?J:8;var xe=Ie.T,$e={};Ie.T=$e,Ku(A,!1,g,_);try{var _t=W(),$t=Ie.S;if($t!==null&&$t($e,_t),_t!==null&&typeof _t=="object"&&typeof _t.then=="function"){var ln=pv(_t,I);Nc(A,g,ln,qc(A))}else Nc(A,g,I,qc(A))}catch(pn){Nc(A,g,{then:function(){},status:"rejected",reason:pn},qc())}finally{qe.p=J,xe!==null&&$e.types!==null&&(xe.types=$e.types),Ie.T=xe}}function Ql(){}function _l(A,g,_,I){if(A.tag!==5)throw Error(i(476));var W=jc(A).queue;RA(A,W,g,tt,_===null?Ql:function(){return fu(A),_(I)})}function jc(A){var g=A.memoizedState;if(g!==null)return g;g={memoizedState:tt,baseState:tt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ce,lastRenderedState:tt},next:null};var _={};return g.next={memoizedState:_,baseState:_,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ce,lastRenderedState:_},next:null},A.memoizedState=g,A=A.alternate,A!==null&&(A.memoizedState=g),g}function fu(A){var g=jc(A);g.next===null&&(g=A.alternate.memoizedState),Nc(A,g.next.queue,{},qc())}function Ns(){return ll(Zt)}function ba(){return B().memoizedState}function $a(){return B().memoizedState}function ua(A){for(var g=A.return;g!==null;){switch(g.tag){case 24:case 3:var _=qc();A=dh(_);var I=hu(g,A,_);I!==null&&(zu(I,g,_),Xh(I,g,_)),g={cache:cc()},A.payload=g;return}g=g.return}}function v0(A,g,_){var I=qc();_={lane:I,revertLane:0,gesture:null,action:_,hasEagerState:!1,eagerState:null,next:null},pu(A)?Gc(g,_):(_=rh(A,g,_,I),_!==null&&(zu(_,A,I),dA(_,g,I)))}function Qd(A,g,_){var I=qc();Nc(A,g,_,I)}function Nc(A,g,_,I){var W={lane:I,revertLane:0,gesture:null,action:_,hasEagerState:!1,eagerState:null,next:null};if(pu(A))Gc(g,W);else{var J=A.alternate;if(A.lanes===0&&(J===null||J.lanes===0)&&(J=g.lastRenderedReducer,J!==null))try{var xe=g.lastRenderedState,$e=J(xe,_);if(W.hasEagerState=!0,W.eagerState=$e,Is($e,xe))return jh(A,g,W,0),hs===null&&Bu(),!1}catch{}finally{}if(_=rh(A,g,W,I),_!==null)return zu(_,A,I),dA(_,g,I),!0}return!1}function Ku(A,g,_,I){if(I={lane:2,revertLane:$l(),gesture:null,action:I,hasEagerState:!1,eagerState:null,next:null},pu(A)){if(g)throw Error(i(479))}else g=rh(A,_,I,2),g!==null&&zu(g,A,2)}function pu(A){var g=A.alternate;return A===sr||g!==null&&g===sr}function Gc(A,g){IA=id=!0;var _=A.pending;_===null?g.next=g:(g.next=_.next,_.next=g),A.pending=g}function dA(A,g,_){if((_&4194048)!==0){var I=g.lanes;I&=A.pendingLanes,_|=I,g.lanes=_,ii(A,_)}}var DA={readContext:ll,use:Z,useCallback:zo,useContext:zo,useEffect:zo,useImperativeHandle:zo,useLayoutEffect:zo,useInsertionEffect:zo,useMemo:zo,useReducer:zo,useRef:zo,useState:zo,useDebugValue:zo,useDeferredValue:zo,useTransition:zo,useSyncExternalStore:zo,useId:zo,useHostTransitionStatus:zo,useFormState:zo,useActionState:zo,useOptimistic:zo,useMemoCache:zo,useCacheRefresh:zo};DA.useEffectEvent=zo;var Hm={readContext:ll,use:Z,useCallback:function(A,g){return E().memoizedState=[A,g===void 0?null:g],A},useContext:ll,useEffect:Qo,useImperativeHandle:function(A,g,_){_=_!=null?_.concat([A]):null,Wr(4194308,4,Cl.bind(null,g,A),_)},useLayoutEffect:function(A,g){return Wr(4194308,4,A,g)},useInsertionEffect:function(A,g){Wr(4,2,A,g)},useMemo:function(A,g){var _=E();g=g===void 0?null:g;var I=A();if(fh){rt(!0);try{A()}finally{rt(!1)}}return _.memoizedState=[I,g],I},useReducer:function(A,g,_){var I=E();if(_!==void 0){var W=_(g);if(fh){rt(!0);try{_(g)}finally{rt(!1)}}}else W=g;return I.memoizedState=I.baseState=W,A={pending:null,lanes:0,dispatch:null,lastRenderedReducer:A,lastRenderedState:W},I.queue=A,A=A.dispatch=v0.bind(null,sr,A),[I.memoizedState,A]},useRef:function(A){var g=E();return A={current:A},g.memoizedState=A},useState:function(A){A=ut(A);var g=A.queue,_=Qd.bind(null,sr,g);return g.dispatch=_,[A.memoizedState,_]},useDebugValue:Uu,useDeferredValue:function(A,g){var _=E();return du(_,A,g)},useTransition:function(){var A=ut(!1);return A=RA.bind(null,sr,A.queue,!0,!1),E().memoizedState=A,[!1,A]},useSyncExternalStore:function(A,g,_){var I=sr,W=E();if(Gr){if(_===void 0)throw Error(i(407));_=_()}else{if(_=g(),hs===null)throw Error(i(349));(mo&127)!==0||Ze(I,g,_)}W.memoizedState=_;var J={value:_,getSnapshot:g};return W.queue=J,Qo(et.bind(null,I,J,A),[A]),I.flags|=2048,Er(9,{destroy:void 0},Xe.bind(null,I,J,_,g),null),_},useId:function(){var A=E(),g=hs.identifierPrefix;if(Gr){var _=zl,I=EA;_=(I&~(1<<32-ye(I)-1)).toString(32)+_,g="_"+g+"R_"+_,_=hA++,0<_&&(g+="H"+_.toString(32)),g+="_"}else _=Vm++,g="_"+g+"r_"+_.toString(32)+"_";return A.memoizedState=g},useHostTransitionStatus:Ns,useFormState:Bn,useActionState:Bn,useOptimistic:function(A){var g=E();g.memoizedState=g.baseState=A;var _={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return g.queue=_,g=Ku.bind(null,sr,!0,_),_.dispatch=g,[A,g]},useMemoCache:ae,useCacheRefresh:function(){return E().memoizedState=ua.bind(null,sr)},useEffectEvent:function(A){var g=E(),_={impl:A};return g.memoizedState=_,function(){if((Mo&2)!==0)throw Error(i(440));return _.impl.apply(void 0,arguments)}}},fA={readContext:ll,use:Z,useCallback:TA,useContext:ll,useEffect:Br,useImperativeHandle:ph,useInsertionEffect:la,useLayoutEffect:ra,useMemo:va,useReducer:me,useRef:Eo,useState:function(){return me(ce)},useDebugValue:Uu,useDeferredValue:function(A,g){var _=B();return Wd(_,xo.memoizedState,A,g)},useTransition:function(){var A=me(ce)[0],g=B().memoizedState;return[typeof A=="boolean"?A:G(A),g]},useSyncExternalStore:Ne,useId:ba,useHostTransitionStatus:Ns,useFormState:kn,useActionState:kn,useOptimistic:function(A,g){var _=B();return gt(_,xo,A,g)},useMemoCache:ae,useCacheRefresh:$a};fA.useEffectEvent=Al;var qd={readContext:ll,use:Z,useCallback:TA,useContext:ll,useEffect:Br,useImperativeHandle:ph,useInsertionEffect:la,useLayoutEffect:ra,useMemo:va,useReducer:Pe,useRef:Eo,useState:function(){return Pe(ce)},useDebugValue:Uu,useDeferredValue:function(A,g){var _=B();return xo===null?du(_,A,g):Wd(_,xo.memoizedState,A,g)},useTransition:function(){var A=Pe(ce)[0],g=B().memoizedState;return[typeof A=="boolean"?A:G(A),g]},useSyncExternalStore:Ne,useId:ba,useHostTransitionStatus:Ns,useFormState:Xi,useActionState:Xi,useOptimistic:function(A,g){var _=B();return xo!==null?gt(_,xo,A,g):(_.baseState=A,[A,_.queue.dispatch])},useMemoCache:ae,useCacheRefresh:$a};qd.useEffectEvent=Al;function qf(A,g,_,I){g=A.memoizedState,_=_(I,g),_=_==null?g:y({},g,_),A.memoizedState=_,A.lanes===0&&(A.updateQueue.baseState=_)}var mh={enqueueSetState:function(A,g,_){A=A._reactInternals;var I=qc(),W=dh(I);W.payload=g,_!=null&&(W.callback=_),g=hu(A,W,I),g!==null&&(zu(g,A,I),Xh(g,A,I))},enqueueReplaceState:function(A,g,_){A=A._reactInternals;var I=qc(),W=dh(I);W.tag=1,W.payload=g,_!=null&&(W.callback=_),g=hu(A,W,I),g!==null&&(zu(g,A,I),Xh(g,A,I))},enqueueForceUpdate:function(A,g){A=A._reactInternals;var _=qc(),I=dh(_);I.tag=2,g!=null&&(I.callback=g),g=hu(A,I,_),g!==null&&(zu(g,A,_),Xh(g,A,_))}};function mv(A,g,_,I,W,J,xe){return A=A.stateNode,typeof A.shouldComponentUpdate=="function"?A.shouldComponentUpdate(I,J,xe):g.prototype&&g.prototype.isPureReactComponent?!th(_,I)||!th(W,J):!0}function Yd(A,g,_,I){A=g.state,typeof g.componentWillReceiveProps=="function"&&g.componentWillReceiveProps(_,I),typeof g.UNSAFE_componentWillReceiveProps=="function"&&g.UNSAFE_componentWillReceiveProps(_,I),g.state!==A&&mh.enqueueReplaceState(g,g.state,null)}function Va(A,g){var _=g;if("ref"in g){_={};for(var I in g)I!=="ref"&&(_[I]=g[I])}if(A=A.defaultProps){_===g&&(_=y({},_));for(var W in A)_[W]===void 0&&(_[W]=A[W])}return _}function O1(A){wA(A)}function gv(A){console.error(A)}function B1(A){wA(A)}function Zm(A,g){try{var _=A.onUncaughtError;_(g.value,{componentStack:g.stack})}catch(I){setTimeout(function(){throw I})}}function b0(A,g,_){try{var I=A.onCaughtError;I(_.value,{componentStack:_.stack,errorBoundary:g.tag===1?g.stateNode:null})}catch(W){setTimeout(function(){throw W})}}function I1(A,g,_){return _=dh(_),_.tag=3,_.payload={element:null},_.callback=function(){Zm(A,g)},_}function rd(A){return A=dh(A),A.tag=3,A}function Xm(A,g,_,I){var W=_.type.getDerivedStateFromError;if(typeof W=="function"){var J=I.value;A.payload=function(){return W(J)},A.callback=function(){b0(g,_,I)}}var xe=_.stateNode;xe!==null&&typeof xe.componentDidCatch=="function"&&(A.callback=function(){b0(g,_,I),typeof W!="function"&&(ef===null?ef=new Set([this]):ef.add(this));var $e=I.stack;this.componentDidCatch(I.value,{componentStack:$e!==null?$e:""})})}function yv(A,g,_,I,W){if(_.flags|=32768,I!==null&&typeof I=="object"&&typeof I.then=="function"){if(g=_.alternate,g!==null&&Kc(g,_,W,!0),_=us.current,_!==null){switch(_.tag){case 31:case 13:return fc===null?Y1():_.alternate===null&&_a===0&&(_a=3),_.flags&=-257,_.flags|=65536,_.lanes=W,I===Vh?_.flags|=16384:(g=_.updateQueue,g===null?_.updateQueue=new Set([I]):g.add(I),P0(A,I,W)),!1;case 22:return _.flags|=65536,I===Vh?_.flags|=16384:(g=_.updateQueue,g===null?(g={transitions:null,markerInstances:null,retryQueue:new Set([I])},_.updateQueue=g):(_=g.retryQueue,_===null?g.retryQueue=new Set([I]):_.add(I)),P0(A,I,W)),!1}throw Error(i(435,_.tag))}return P0(A,I,W),Y1(),!1}if(Gr)return g=us.current,g!==null?((g.flags&65536)===0&&(g.flags|=256),g.flags|=65536,g.lanes=W,I!==js&&(A=Error(i(422),{cause:I}),lc(Ll(A,_)))):(I!==js&&(g=Error(i(423),{cause:I}),lc(Ll(g,_))),A=A.current.alternate,A.flags|=65536,W&=-W,A.lanes|=W,I=Ll(I,_),W=I1(A.stateNode,I,W),Nf(A,W),_a!==4&&(_a=2)),!1;var J=Error(i(520),{cause:I});if(J=Ll(J,_),Xp===null?Xp=[J]:Xp.push(J),_a!==4&&(_a=2),g===null)return!0;I=Ll(I,_),_=g;do{switch(_.tag){case 3:return _.flags|=65536,A=W&-W,_.lanes|=A,A=I1(_.stateNode,I,A),Nf(_,A),!1;case 1:if(g=_.type,J=_.stateNode,(_.flags&128)===0&&(typeof g.getDerivedStateFromError=="function"||J!==null&&typeof J.componentDidCatch=="function"&&(ef===null||!ef.has(J))))return _.flags|=65536,W&=-W,_.lanes|=W,W=rd(W),Xm(W,A,_,I),Nf(_,W),!1}_=_.return}while(_!==null);return!1}var zp=Error(i(461)),ca=!1;function Ca(A,g,_,I){g.child=A===null?$m(g,null,_,I):hh(g,A.child,_,I)}function Qi(A,g,_,I,W){_=_.render;var J=g.ref;if("ref"in I){var xe={};for(var $e in I)$e!=="ref"&&(xe[$e]=I[$e])}else xe=I;return qh(g),I=Wf(A,g,_,xe,J,W),$e=l(),A!==null&&!ca?(p(A,g,W),UA(A,g,W)):(Gr&&$e&&Uc(g),g.flags|=1,Ca(A,g,I,W),g.child)}function C0(A,g,_,I,W){if(A===null){var J=_.type;return typeof J=="function"&&!sA(J)&&J.defaultProps===void 0&&_.compare===null?(g.tag=15,g.type=J,$d(A,g,J,I,W)):(A=Ud(_.type,null,I,g,g.mode,W),A.ref=g.ref,A.return=g,g.child=A)}if(J=A.child,!D1(A,W)){var xe=J.memoizedProps;if(_=_.compare,_=_!==null?_:th,_(xe,I)&&A.ref===g.ref)return UA(A,g,W)}return g.flags|=1,A=Kl(J,I),A.ref=g.ref,A.return=g,g.child=A}function $d(A,g,_,I,W){if(A!==null){var J=A.memoizedProps;if(th(J,I)&&A.ref===g.ref)if(ca=!1,g.pendingProps=I=J,D1(A,W))(A.flags&131072)!==0&&(ca=!0);else return g.lanes=A.lanes,UA(A,g,W)}return Jm(A,g,_,I,W)}function gh(A,g,_,I){var W=I.children,J=A!==null?A.memoizedState:null;if(A===null&&g.stateNode===null&&(g.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),I.mode==="hidden"){if((g.flags&128)!==0){if(J=J!==null?J.baseLanes|_:_,A!==null){for(I=g.child=A.child,W=0;I!==null;)W=W|I.lanes|I.childLanes,I=I.sibling;I=W&~J}else I=0,g.child=null;return k1(A,g,J,_,I)}if((_&536870912)!==0)g.memoizedState={baseLanes:0,cachePool:null},A!==null&&Lc(g,J!==null?J.cachePool:null),J!==null?td(g,J):ul(),E1(g);else return I=g.lanes=536870912,k1(A,g,J!==null?J.baseLanes|_:_,_,I)}else J!==null?(Lc(g,J.cachePool),td(g,J),Fc(),g.memoizedState=null):(A!==null&&Lc(g,null),ul(),Fc());return Ca(A,g,W,_),g.child}function Yf(A,g){return A!==null&&A.tag===22||g.stateNode!==null||(g.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),g.sibling}function k1(A,g,_,I,W){var J=Fd();return J=J===null?null:{parent:ls._currentValue,pool:J},g.memoizedState={baseLanes:_,cachePool:J},A!==null&&Lc(g,null),ul(),E1(g),A!==null&&Kc(A,g,I,!0),g.childLanes=W,null}function _0(A,g){return g=M0({mode:g.mode,children:g.children},A.mode),g.ref=A.ref,A.child=g,g.return=A,g}function mu(A,g,_){return hh(g,A.child,null,_),A=_0(g,g.pendingProps),A.flags|=2,Pu(g),g.memoizedState=null,A}function Xx(A,g,_){var I=g.pendingProps,W=(g.flags&128)!==0;if(g.flags&=-129,A===null){if(Gr){if(I.mode==="hidden")return A=_0(g,I),g.lanes=536870912,Yf(null,A);if(AA(g),(A=lo)?(A=EC(A,ac),A=A!==null&&A.data==="&"?A:null,A!==null&&(g.memoizedState={dehydrated:A,treeContext:Pc!==null?{id:EA,overflow:zl}:null,retryLane:536870912,hydrationErrors:null},_=Kd(A),_.return=g,g.child=_,na=g,lo=null)):A=null,A===null)throw Iu(g);return g.lanes=536870912,null}return _0(g,I)}var J=A.memoizedState;if(J!==null){var xe=J.dehydrated;if(AA(g),W)if(g.flags&256)g.flags&=-257,g=mu(A,g,_);else if(g.memoizedState!==null)g.child=A.child,g.flags|=128,g=null;else throw Error(i(558));else if(ca||Kc(A,g,_,!1),W=(_&A.childLanes)!==0,ca||W){if(I=hs,I!==null&&(xe=Fi(I,_),xe!==0&&xe!==J.retryLane))throw J.retryLane=xe,cu(A,xe),zu(I,A,xe),zp;Y1(),g=mu(A,g,_)}else A=J.treeContext,lo=$c(xe.nextSibling),na=g,Gr=!0,aA=null,ac=!1,A!==null&&lh(g,A),g=_0(g,I),g.flags|=4096;return g}return A=Kl(A.child,{mode:I.mode,children:I.children}),A.ref=g.ref,g.child=A,A.return=g,A}function x0(A,g){var _=g.ref;if(_===null)A!==null&&A.ref!==null&&(g.flags|=4194816);else{if(typeof _!="function"&&typeof _!="object")throw Error(i(284));(A===null||A.ref!==_)&&(g.flags|=4194816)}}function Jm(A,g,_,I,W){return qh(g),_=Wf(A,g,_,I,void 0,W),I=l(),A!==null&&!ca?(p(A,g,W),UA(A,g,W)):(Gr&&I&&Uc(g),g.flags|=1,Ca(A,g,_,W),g.child)}function vv(A,g,_,I,W,J){return qh(g),g.updateQueue=null,_=Gd(g,I,_,W),Qf(A),I=l(),A!==null&&!ca?(p(A,g,J),UA(A,g,J)):(Gr&&I&&Uc(g),g.flags|=1,Ca(A,g,_,J),g.child)}function T1(A,g,_,I,W){if(qh(g),g.stateNode===null){var J=hr,xe=_.contextType;typeof xe=="object"&&xe!==null&&(J=ll(xe)),J=new _(I,J),g.memoizedState=J.state!==null&&J.state!==void 0?J.state:null,J.updater=mh,g.stateNode=J,J._reactInternals=g,J=g.stateNode,J.props=I,J.state=g.memoizedState,J.refs={},bl(g),xe=_.contextType,J.context=typeof xe=="object"&&xe!==null?ll(xe):hr,J.state=g.memoizedState,xe=_.getDerivedStateFromProps,typeof xe=="function"&&(qf(g,_,xe,I),J.state=g.memoizedState),typeof _.getDerivedStateFromProps=="function"||typeof J.getSnapshotBeforeUpdate=="function"||typeof J.UNSAFE_componentWillMount!="function"&&typeof J.componentWillMount!="function"||(xe=J.state,typeof J.componentWillMount=="function"&&J.componentWillMount(),typeof J.UNSAFE_componentWillMount=="function"&&J.UNSAFE_componentWillMount(),xe!==J.state&&mh.enqueueReplaceState(J,J.state,null),ed(g,I,J,W),Jh(),J.state=g.memoizedState),typeof J.componentDidMount=="function"&&(g.flags|=4194308),I=!0}else if(A===null){J=g.stateNode;var $e=g.memoizedProps,_t=Va(_,$e);J.props=_t;var $t=J.context,ln=_.contextType;xe=hr,typeof ln=="object"&&ln!==null&&(xe=ll(ln));var pn=_.getDerivedStateFromProps;ln=typeof pn=="function"||typeof J.getSnapshotBeforeUpdate=="function",$e=g.pendingProps!==$e,ln||typeof J.UNSAFE_componentWillReceiveProps!="function"&&typeof J.componentWillReceiveProps!="function"||($e||$t!==xe)&&Yd(g,J,I,xe),dc=!1;var Xt=g.memoizedState;J.state=Xt,ed(g,I,J,W),Jh(),$t=g.memoizedState,$e||Xt!==$t||dc?(typeof pn=="function"&&(qf(g,_,pn,I),$t=g.memoizedState),(_t=dc||mv(g,_,_t,I,Xt,$t,xe))?(ln||typeof J.UNSAFE_componentWillMount!="function"&&typeof J.componentWillMount!="function"||(typeof J.componentWillMount=="function"&&J.componentWillMount(),typeof J.UNSAFE_componentWillMount=="function"&&J.UNSAFE_componentWillMount()),typeof J.componentDidMount=="function"&&(g.flags|=4194308)):(typeof J.componentDidMount=="function"&&(g.flags|=4194308),g.memoizedProps=I,g.memoizedState=$t),J.props=I,J.state=$t,J.context=xe,I=_t):(typeof J.componentDidMount=="function"&&(g.flags|=4194308),I=!1)}else{J=g.stateNode,To(A,g),xe=g.memoizedProps,ln=Va(_,xe),J.props=ln,pn=g.pendingProps,Xt=J.context,$t=_.contextType,_t=hr,typeof $t=="object"&&$t!==null&&(_t=ll($t)),$e=_.getDerivedStateFromProps,($t=typeof $e=="function"||typeof J.getSnapshotBeforeUpdate=="function")||typeof J.UNSAFE_componentWillReceiveProps!="function"&&typeof J.componentWillReceiveProps!="function"||(xe!==pn||Xt!==_t)&&Yd(g,J,I,_t),dc=!1,Xt=g.memoizedState,J.state=Xt,ed(g,I,J,W),Jh();var rn=g.memoizedState;xe!==pn||Xt!==rn||dc||A!==null&&A.dependencies!==null&&Fp(A.dependencies)?(typeof $e=="function"&&(qf(g,_,$e,I),rn=g.memoizedState),(ln=dc||mv(g,_,ln,I,Xt,rn,_t)||A!==null&&A.dependencies!==null&&Fp(A.dependencies))?($t||typeof J.UNSAFE_componentWillUpdate!="function"&&typeof J.componentWillUpdate!="function"||(typeof J.componentWillUpdate=="function"&&J.componentWillUpdate(I,rn,_t),typeof J.UNSAFE_componentWillUpdate=="function"&&J.UNSAFE_componentWillUpdate(I,rn,_t)),typeof J.componentDidUpdate=="function"&&(g.flags|=4),typeof J.getSnapshotBeforeUpdate=="function"&&(g.flags|=1024)):(typeof J.componentDidUpdate!="function"||xe===A.memoizedProps&&Xt===A.memoizedState||(g.flags|=4),typeof J.getSnapshotBeforeUpdate!="function"||xe===A.memoizedProps&&Xt===A.memoizedState||(g.flags|=1024),g.memoizedProps=I,g.memoizedState=rn),J.props=I,J.state=rn,J.context=_t,I=ln):(typeof J.componentDidUpdate!="function"||xe===A.memoizedProps&&Xt===A.memoizedState||(g.flags|=4),typeof J.getSnapshotBeforeUpdate!="function"||xe===A.memoizedProps&&Xt===A.memoizedState||(g.flags|=1024),I=!1)}return J=I,x0(A,g),I=(g.flags&128)!==0,J||I?(J=g.stateNode,_=I&&typeof _.getDerivedStateFromError!="function"?null:J.render(),g.flags|=1,A!==null&&I?(g.child=hh(g,A.child,null,W),g.child=hh(g,null,_,W)):Ca(A,g,_,W),g.memoizedState=J.state,A=g.child):A=UA(A,g,W),A}function aC(A,g,_,I){return Ye(),g.flags|=256,Ca(A,g,_,I),g.child}var bv={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function R1(A){return{baseLanes:A,cachePool:Vn()}}function PA(A,g,_){return A=A!==null?A.childLanes&~_:0,g&&(A|=pA),A}function Lu(A,g,_){var I=g.pendingProps,W=!1,J=(g.flags&128)!==0,xe;if((xe=J)||(xe=A!==null&&A.memoizedState===null?!1:(bs.current&2)!==0),xe&&(W=!0,g.flags&=-129),xe=(g.flags&32)!==0,g.flags&=-33,A===null){if(Gr){if(W?cl(g):Fc(),(A=lo)?(A=EC(A,ac),A=A!==null&&A.data!=="&"?A:null,A!==null&&(g.memoizedState={dehydrated:A,treeContext:Pc!==null?{id:EA,overflow:zl}:null,retryLane:536870912,hydrationErrors:null},_=Kd(A),_.return=g,g.child=_,na=g,lo=null)):A=null,A===null)throw Iu(g);return _h(A)?g.lanes=32:g.lanes=536870912,null}var $e=I.children;return I=I.fallback,W?(Fc(),W=g.mode,$e=M0({mode:"hidden",children:$e},W),I=sh(I,W,_,null),$e.return=g,I.return=g,$e.sibling=I,g.child=$e,I=g.child,I.memoizedState=R1(_),I.childLanes=PA(A,xe,_),g.memoizedState=bv,Yf(null,I)):(cl(g),jp(g,$e))}var _t=A.memoizedState;if(_t!==null&&($e=_t.dehydrated,$e!==null)){if(J)g.flags&256?(cl(g),g.flags&=-257,g=Np(A,g,_)):g.memoizedState!==null?(Fc(),g.child=A.child,g.flags|=128,g=null):(Fc(),$e=I.fallback,W=g.mode,I=M0({mode:"visible",children:I.children},W),$e=sh($e,W,_,null),$e.flags|=2,I.return=g,$e.return=g,I.sibling=$e,g.child=I,hh(g,A.child,null,_),I=g.child,I.memoizedState=R1(_),I.childLanes=PA(A,xe,_),g.memoizedState=bv,g=Yf(null,I));else if(cl(g),_h($e)){if(xe=$e.nextSibling&&$e.nextSibling.dataset,xe)var $t=xe.dgst;xe=$t,I=Error(i(419)),I.stack="",I.digest=xe,lc({value:I,source:null,stack:null}),g=Np(A,g,_)}else if(ca||Kc(A,g,_,!1),xe=(_&A.childLanes)!==0,ca||xe){if(xe=hs,xe!==null&&(I=Fi(xe,_),I!==0&&I!==_t.retryLane))throw _t.retryLane=I,cu(A,I),zu(xe,A,I),zp;uy($e)||Y1(),g=Np(A,g,_)}else uy($e)?(g.flags|=192,g.child=A.child,g=null):(A=_t.treeContext,lo=$c($e.nextSibling),na=g,Gr=!0,aA=null,ac=!1,A!==null&&lh(g,A),g=jp(g,I.children),g.flags|=4096);return g}return W?(Fc(),$e=I.fallback,W=g.mode,_t=A.child,$t=_t.sibling,I=Kl(_t,{mode:"hidden",children:I.children}),I.subtreeFlags=_t.subtreeFlags&65011712,$t!==null?$e=Kl($t,$e):($e=sh($e,W,_,null),$e.flags|=2),$e.return=g,I.return=g,I.sibling=$e,g.child=I,Yf(null,I),I=g.child,$e=A.child.memoizedState,$e===null?$e=R1(_):(W=$e.cachePool,W!==null?(_t=ls._currentValue,W=W.parent!==_t?{parent:_t,pool:_t}:W):W=Vn(),$e={baseLanes:$e.baseLanes|_,cachePool:W}),I.memoizedState=$e,I.childLanes=PA(A,xe,_),g.memoizedState=bv,Yf(A.child,I)):(cl(g),_=A.child,A=_.sibling,_=Kl(_,{mode:"visible",children:I.children}),_.return=g,_.sibling=null,A!==null&&(xe=g.deletions,xe===null?(g.deletions=[A],g.flags|=16):xe.push(A)),g.child=_,g.memoizedState=null,_)}function jp(A,g){return g=M0({mode:"visible",children:g},A.mode),g.return=A,A.child=g}function M0(A,g){return A=yl(22,A,null,g),A.lanes=0,A}function Np(A,g,_){return hh(g,A.child,null,_),A=jp(g,g.pendingProps.children),A.flags|=2,g.memoizedState=null,A}function eg(A,g,_){A.lanes|=g;var I=A.alternate;I!==null&&(I.lanes|=g),cA(A.return,g,_)}function gu(A,g,_,I,W,J){var xe=A.memoizedState;xe===null?A.memoizedState={isBackwards:g,rendering:null,renderingStartTime:0,last:I,tail:_,tailMode:W,treeForkCount:J}:(xe.isBackwards=g,xe.rendering=null,xe.renderingStartTime=0,xe.last=I,xe.tail=_,xe.tailMode=W,xe.treeForkCount=J)}function Gp(A,g,_){var I=g.pendingProps,W=I.revealOrder,J=I.tail;I=I.children;var xe=bs.current,$e=(xe&2)!==0;if($e?(xe=xe&1|2,g.flags|=128):xe&=1,Me(bs,xe),Ca(A,g,I,_),I=Gr?ta:0,!$e&&A!==null&&(A.flags&128)!==0)e:for(A=g.child;A!==null;){if(A.tag===13)A.memoizedState!==null&&eg(A,_,g);else if(A.tag===19)eg(A,_,g);else if(A.child!==null){A.child.return=A,A=A.child;continue}if(A===g)break e;for(;A.sibling===null;){if(A.return===null||A.return===g)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}switch(W){case"forwards":for(_=g.child,W=null;_!==null;)A=_.alternate,A!==null&&cs(A)===null&&(W=_),_=_.sibling;_=W,_===null?(W=g.child,g.child=null):(W=_.sibling,_.sibling=null),gu(g,!1,W,_,J,I);break;case"backwards":case"unstable_legacy-backwards":for(_=null,W=g.child,g.child=null;W!==null;){if(A=W.alternate,A!==null&&cs(A)===null){g.child=W;break}A=W.sibling,W.sibling=_,_=W,W=A}gu(g,!0,_,null,J,I);break;case"together":gu(g,!1,null,null,void 0,I);break;default:g.memoizedState=null}return g.child}function UA(A,g,_){if(A!==null&&(g.dependencies=A.dependencies),Xf|=g.lanes,(_&g.childLanes)===0)if(A!==null){if(Kc(A,g,_,!1),(_&g.childLanes)===0)return null}else return null;if(A!==null&&g.child!==A.child)throw Error(i(153));if(g.child!==null){for(A=g.child,_=Kl(A,A.pendingProps),g.child=_,_.return=g;A.sibling!==null;)A=A.sibling,_=_.sibling=Kl(A,A.pendingProps),_.return=g;_.sibling=null}return g.child}function D1(A,g){return(A.lanes&g)!==0?!0:(A=A.dependencies,!!(A!==null&&Fp(A)))}function lC(A,g,_){switch(g.tag){case 3:Ke(g,g.stateNode.containerInfo),uh(g,ls,A.memoizedState.cache),Ye();break;case 27:case 5:Se(g);break;case 4:Ke(g,g.stateNode.containerInfo);break;case 10:uh(g,g.type,g.memoizedProps.value);break;case 31:if(g.memoizedState!==null)return g.flags|=128,AA(g),null;break;case 13:var I=g.memoizedState;if(I!==null)return I.dehydrated!==null?(cl(g),g.flags|=128,null):(_&g.child.childLanes)!==0?Lu(A,g,_):(cl(g),A=UA(A,g,_),A!==null?A.sibling:null);cl(g);break;case 19:var W=(A.flags&128)!==0;if(I=(_&g.childLanes)!==0,I||(Kc(A,g,_,!1),I=(_&g.childLanes)!==0),W){if(I)return Gp(A,g,_);g.flags|=128}if(W=g.memoizedState,W!==null&&(W.rendering=null,W.tail=null,W.lastEffect=null),Me(bs,bs.current),I)break;return null;case 22:return g.lanes=0,gh(A,g,_,g.pendingProps);case 24:uh(g,ls,A.memoizedState.cache)}return UA(A,g,_)}function uC(A,g,_){if(A!==null)if(A.memoizedProps!==g.pendingProps)ca=!0;else{if(!D1(A,_)&&(g.flags&128)===0)return ca=!1,lC(A,g,_);ca=(A.flags&131072)!==0}else ca=!1,Gr&&(g.flags&1048576)!==0&&Lp(g,ta,g.index);switch(g.lanes=0,g.tag){case 16:e:{var I=g.pendingProps;if(A=or(g.elementType),g.type=A,typeof A=="function")sA(A)?(I=Va(A,I),g.tag=1,g=T1(null,g,A,I,_)):(g.tag=0,g=Jm(null,g,A,I,_));else{if(A!=null){var W=A.$$typeof;if(W===H){g.tag=11,g=Qi(null,g,A,I,_);break e}else if(W===z){g.tag=14,g=C0(null,g,A,I,_);break e}}throw g=Re(A)||A,Error(i(306,g,""))}}return g;case 0:return Jm(A,g,g.type,g.pendingProps,_);case 1:return I=g.type,W=Va(I,g.pendingProps),T1(A,g,I,W,_);case 3:e:{if(Ke(g,g.stateNode.containerInfo),A===null)throw Error(i(387));I=g.pendingProps;var J=g.memoizedState;W=J.element,To(A,g),ed(g,I,null,_);var xe=g.memoizedState;if(I=xe.cache,uh(g,ls,I),I!==J.cache&&Qh(g,[ls],_,!0),Jh(),I=xe.element,J.isDehydrated)if(J={element:I,isDehydrated:!1,cache:xe.cache},g.updateQueue.baseState=J,g.memoizedState=J,g.flags&256){g=aC(A,g,I,_);break e}else if(I!==W){W=Ll(Error(i(424)),g),lc(W),g=aC(A,g,I,_);break e}else{switch(A=g.stateNode.containerInfo,A.nodeType){case 9:A=A.body;break;default:A=A.nodeName==="HTML"?A.ownerDocument.body:A}for(lo=$c(A.firstChild),na=g,Gr=!0,aA=null,ac=!0,_=$m(g,null,I,_),g.child=_;_;)_.flags=_.flags&-3|4096,_=_.sibling}else{if(Ye(),I===W){g=UA(A,g,_);break e}Ca(A,g,I,_)}g=g.child}return g;case 26:return x0(A,g),A===null?(_=kC(g.type,null,g.pendingProps,null))?g.memoizedState=_:Gr||(_=g.type,A=g.pendingProps,I=j0(bt.current).createElement(_),I[gr]=g,I[gn]=A,Xa(I,_,A),Ko(I),g.stateNode=I):g.memoizedState=kC(g.type,A.memoizedProps,g.pendingProps,A.memoizedState),null;case 27:return Se(g),A===null&&Gr&&(I=g.stateNode=OC(g.type,g.pendingProps,bt.current),na=g,ac=!0,W=lo,ar(g.type)?(cy=W,lo=$c(I.firstChild)):lo=W),Ca(A,g,g.pendingProps.children,_),x0(A,g),A===null&&(g.flags|=4194304),g.child;case 5:return A===null&&Gr&&((W=I=lo)&&(I=ly(I,g.type,g.pendingProps,ac),I!==null?(g.stateNode=I,na=g,lo=$c(I.firstChild),ac=!1,W=!0):W=!1),W||Iu(g)),Se(g),W=g.type,J=g.pendingProps,xe=A!==null?A.memoizedProps:null,I=J.children,sf(W,J)?I=null:xe!==null&&sf(W,xe)&&(g.flags|=32),g.memoizedState!==null&&(W=Wf(A,g,O,null,null,_),Zt._currentValue=W),x0(A,g),Ca(A,g,I,_),g.child;case 6:return A===null&&Gr&&((A=_=lo)&&(_=ns(_,g.pendingProps,ac),_!==null?(g.stateNode=_,na=g,lo=null,A=!0):A=!1),A||Iu(g)),null;case 13:return Lu(A,g,_);case 4:return Ke(g,g.stateNode.containerInfo),I=g.pendingProps,A===null?g.child=hh(g,null,I,_):Ca(A,g,I,_),g.child;case 11:return Qi(A,g,g.type,g.pendingProps,_);case 7:return Ca(A,g,g.pendingProps,_),g.child;case 8:return Ca(A,g,g.pendingProps.children,_),g.child;case 12:return Ca(A,g,g.pendingProps.children,_),g.child;case 10:return I=g.pendingProps,uh(g,g.type,I.value),Ca(A,g,I.children,_),g.child;case 9:return W=g.type._context,I=g.pendingProps.children,qh(g),W=ll(W),I=I(W),g.flags|=1,Ca(A,g,I,_),g.child;case 14:return C0(A,g,g.type,g.pendingProps,_);case 15:return $d(A,g,g.type,g.pendingProps,_);case 19:return Gp(A,g,_);case 31:return Xx(A,g,_);case 22:return gh(A,g,_,g.pendingProps);case 24:return qh(g),I=ll(ls),A===null?(W=Fd(),W===null&&(W=hs,J=cc(),W.pooledCache=J,J.refCount++,J!==null&&(W.pooledCacheLanes|=_),W=J),g.memoizedState={parent:I,cache:W},bl(g),uh(g,ls,W)):((A.lanes&_)!==0&&(To(A,g),ed(g,null,null,_),Jh()),W=A.memoizedState,J=g.memoizedState,W.parent!==I?(W={parent:I,cache:I},g.memoizedState=W,g.lanes===0&&(g.memoizedState=g.updateQueue.baseState=W),uh(g,ls,I)):(I=J.cache,uh(g,ls,I),I!==W.cache&&Qh(g,[ls],_,!0))),Ca(A,g,g.pendingProps.children,_),g.child;case 29:throw g.pendingProps}throw Error(i(156,g.tag))}function Vd(A){A.flags|=4}function P1(A,g,_,I,W){if((g=(A.mode&32)!==0)&&(g=!1),g){if(A.flags|=16777216,(W&335544128)===W)if(A.stateNode.complete)A.flags|=8192;else if(k0())A.flags|=8192;else throw hc=Vh,zf}else A.flags&=-16777217}function Cv(A,g){if(g.type!=="stylesheet"||(g.state.loading&4)!==0)A.flags&=-16777217;else if(A.flags|=16777216,!Ue(g))if(k0())A.flags|=8192;else throw hc=Vh,zf}function Wp(A,g){g!==null&&(A.flags|=4),A.flags&16384&&(g=A.tag!==22?Fn():536870912,A.lanes|=g,Zp|=g)}function tg(A,g){if(!Gr)switch(A.tailMode){case"hidden":g=A.tail;for(var _=null;g!==null;)g.alternate!==null&&(_=g),g=g.sibling;_===null?A.tail=null:_.sibling=null;break;case"collapsed":_=A.tail;for(var I=null;_!==null;)_.alternate!==null&&(I=_),_=_.sibling;I===null?g||A.tail===null?A.tail=null:A.tail.sibling=null:I.sibling=null}}function Cs(A){var g=A.alternate!==null&&A.alternate.child===A.child,_=0,I=0;if(g)for(var W=A.child;W!==null;)_|=W.lanes|W.childLanes,I|=W.subtreeFlags&65011712,I|=W.flags&65011712,W.return=A,W=W.sibling;else for(W=A.child;W!==null;)_|=W.lanes|W.childLanes,I|=W.subtreeFlags,I|=W.flags,W.return=A,W=W.sibling;return A.subtreeFlags|=I,A.childLanes=_,g}function cC(A,g,_){var I=g.pendingProps;switch(OA(g),g.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Cs(g),null;case 1:return Cs(g),null;case 3:return _=g.stateNode,I=null,A!==null&&(I=A.memoizedState.cache),g.memoizedState.cache!==I&&(g.flags|=2048),uA(ls),Te(),_.pendingContext&&(_.context=_.pendingContext,_.pendingContext=null),(A===null||A.child===null)&&(BA(g)?Vd(g):A===null||A.memoizedState.isDehydrated&&(g.flags&256)===0||(g.flags|=1024,ku())),Cs(g),null;case 26:var W=g.type,J=g.memoizedState;return A===null?(Vd(g),J!==null?(Cs(g),Cv(g,J)):(Cs(g),P1(g,W,null,I,_))):J?J!==A.memoizedState?(Vd(g),Cs(g),Cv(g,J)):(Cs(g),g.flags&=-16777217):(A=A.memoizedProps,A!==I&&Vd(g),Cs(g),P1(g,W,A,I,_)),null;case 27:if(We(g),_=bt.current,W=g.type,A!==null&&g.stateNode!=null)A.memoizedProps!==I&&Vd(g);else{if(!I){if(g.stateNode===null)throw Error(i(166));return Cs(g),null}A=lt.current,BA(g)?jl(g):(A=OC(W,I,_),g.stateNode=A,Vd(g))}return Cs(g),null;case 5:if(We(g),W=g.type,A!==null&&g.stateNode!=null)A.memoizedProps!==I&&Vd(g);else{if(!I){if(g.stateNode===null)throw Error(i(166));return Cs(g),null}if(J=lt.current,BA(g))jl(g);else{var xe=j0(bt.current);switch(J){case 1:J=xe.createElementNS("http://www.w3.org/2000/svg",W);break;case 2:J=xe.createElementNS("http://www.w3.org/1998/Math/MathML",W);break;default:switch(W){case"svg":J=xe.createElementNS("http://www.w3.org/2000/svg",W);break;case"math":J=xe.createElementNS("http://www.w3.org/1998/Math/MathML",W);break;case"script":J=xe.createElement("div"),J.innerHTML="<script><\/script>",J=J.removeChild(J.firstChild);break;case"select":J=typeof I.is=="string"?xe.createElement("select",{is:I.is}):xe.createElement("select"),I.multiple?J.multiple=!0:I.size&&(J.size=I.size);break;default:J=typeof I.is=="string"?xe.createElement(W,{is:I.is}):xe.createElement(W)}}J[gr]=g,J[gn]=I;e:for(xe=g.child;xe!==null;){if(xe.tag===5||xe.tag===6)J.appendChild(xe.stateNode);else if(xe.tag!==4&&xe.tag!==27&&xe.child!==null){xe.child.return=xe,xe=xe.child;continue}if(xe===g)break e;for(;xe.sibling===null;){if(xe.return===null||xe.return===g)break e;xe=xe.return}xe.sibling.return=xe.return,xe=xe.sibling}g.stateNode=J;e:switch(Xa(J,W,I),W){case"button":case"input":case"select":case"textarea":I=!!I.autoFocus;break e;case"img":I=!0;break e;default:I=!1}I&&Vd(g)}}return Cs(g),P1(g,g.type,A===null?null:A.memoizedProps,g.pendingProps,_),null;case 6:if(A&&g.stateNode!=null)A.memoizedProps!==I&&Vd(g);else{if(typeof I!="string"&&g.stateNode===null)throw Error(i(166));if(A=bt.current,BA(g)){if(A=g.stateNode,_=g.memoizedProps,I=null,W=na,W!==null)switch(W.tag){case 27:case 5:I=W.memoizedProps}A[gr]=g,A=!!(A.nodeValue===_||I!==null&&I.suppressHydrationWarning===!0||Gv(A.nodeValue,_)),A||Iu(g,!0)}else A=j0(A).createTextNode(I),A[gr]=g,g.stateNode=A}return Cs(g),null;case 31:if(_=g.memoizedState,A===null||A.memoizedState!==null){if(I=BA(g),_!==null){if(A===null){if(!I)throw Error(i(318));if(A=g.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(i(557));A[gr]=g}else Ye(),(g.flags&128)===0&&(g.memoizedState=null),g.flags|=4;Cs(g),A=!1}else _=ku(),A!==null&&A.memoizedState!==null&&(A.memoizedState.hydrationErrors=_),A=!0;if(!A)return g.flags&256?(Pu(g),g):(Pu(g),null);if((g.flags&128)!==0)throw Error(i(558))}return Cs(g),null;case 13:if(I=g.memoizedState,A===null||A.memoizedState!==null&&A.memoizedState.dehydrated!==null){if(W=BA(g),I!==null&&I.dehydrated!==null){if(A===null){if(!W)throw Error(i(318));if(W=g.memoizedState,W=W!==null?W.dehydrated:null,!W)throw Error(i(317));W[gr]=g}else Ye(),(g.flags&128)===0&&(g.memoizedState=null),g.flags|=4;Cs(g),W=!1}else W=ku(),A!==null&&A.memoizedState!==null&&(A.memoizedState.hydrationErrors=W),W=!0;if(!W)return g.flags&256?(Pu(g),g):(Pu(g),null)}return Pu(g),(g.flags&128)!==0?(g.lanes=_,g):(_=I!==null,A=A!==null&&A.memoizedState!==null,_&&(I=g.child,W=null,I.alternate!==null&&I.alternate.memoizedState!==null&&I.alternate.memoizedState.cachePool!==null&&(W=I.alternate.memoizedState.cachePool.pool),J=null,I.memoizedState!==null&&I.memoizedState.cachePool!==null&&(J=I.memoizedState.cachePool.pool),J!==W&&(I.flags|=2048)),_!==A&&_&&(g.child.flags|=8192),Wp(g,g.updateQueue),Cs(g),null);case 4:return Te(),A===null&&ty(g.stateNode.containerInfo),Cs(g),null;case 10:return uA(g.type),Cs(g),null;case 19:if(ze(bs),I=g.memoizedState,I===null)return Cs(g),null;if(W=(g.flags&128)!==0,J=I.rendering,J===null)if(W)tg(I,!1);else{if(_a!==0||A!==null&&(A.flags&128)!==0)for(A=g.child;A!==null;){if(J=cs(A),J!==null){for(g.flags|=128,tg(I,!1),A=J.updateQueue,g.updateQueue=A,Wp(g,A),g.subtreeFlags=0,A=_,_=g.child;_!==null;)S1(_,A),_=_.sibling;return Me(bs,bs.current&1|2),Gr&&sc(g,I.treeForkCount),g.child}A=A.sibling}I.tail!==null&&$n()>sd&&(g.flags|=128,W=!0,tg(I,!1),g.lanes=4194304)}else{if(!W)if(A=cs(J),A!==null){if(g.flags|=128,W=!0,A=A.updateQueue,g.updateQueue=A,Wp(g,A),tg(I,!0),I.tail===null&&I.tailMode==="hidden"&&!J.alternate&&!Gr)return Cs(g),null}else 2*$n()-I.renderingStartTime>sd&&_!==536870912&&(g.flags|=128,W=!0,tg(I,!1),g.lanes=4194304);I.isBackwards?(J.sibling=g.child,g.child=J):(A=I.last,A!==null?A.sibling=J:g.child=J,I.last=J)}return I.tail!==null?(A=I.tail,I.rendering=A,I.tail=A.sibling,I.renderingStartTime=$n(),A.sibling=null,_=bs.current,Me(bs,W?_&1|2:_&1),Gr&&sc(g,I.treeForkCount),A):(Cs(g),null);case 22:case 23:return Pu(g),nd(),I=g.memoizedState!==null,A!==null?A.memoizedState!==null!==I&&(g.flags|=8192):I&&(g.flags|=8192),I?(_&536870912)!==0&&(g.flags&128)===0&&(Cs(g),g.subtreeFlags&6&&(g.flags|=8192)):Cs(g),_=g.updateQueue,_!==null&&Wp(g,_.retryQueue),_=null,A!==null&&A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(_=A.memoizedState.cachePool.pool),I=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(I=g.memoizedState.cachePool.pool),I!==_&&(g.flags|=2048),A!==null&&ze($h),null;case 24:return _=null,A!==null&&(_=A.memoizedState.cache),g.memoizedState.cache!==_&&(g.flags|=2048),uA(ls),Cs(g),null;case 25:return null;case 30:return null}throw Error(i(156,g.tag))}function w0(A,g){switch(OA(g),g.tag){case 1:return A=g.flags,A&65536?(g.flags=A&-65537|128,g):null;case 3:return uA(ls),Te(),A=g.flags,(A&65536)!==0&&(A&128)===0?(g.flags=A&-65537|128,g):null;case 26:case 27:case 5:return We(g),null;case 31:if(g.memoizedState!==null){if(Pu(g),g.alternate===null)throw Error(i(340));Ye()}return A=g.flags,A&65536?(g.flags=A&-65537|128,g):null;case 13:if(Pu(g),A=g.memoizedState,A!==null&&A.dehydrated!==null){if(g.alternate===null)throw Error(i(340));Ye()}return A=g.flags,A&65536?(g.flags=A&-65537|128,g):null;case 19:return ze(bs),null;case 4:return Te(),null;case 10:return uA(g.type),null;case 22:case 23:return Pu(g),nd(),A!==null&&ze($h),A=g.flags,A&65536?(g.flags=A&-65537|128,g):null;case 24:return uA(ls),null;case 25:return null;default:return null}}function U1(A,g){switch(OA(g),g.tag){case 3:uA(ls),Te();break;case 26:case 27:case 5:We(g);break;case 4:Te();break;case 31:g.memoizedState!==null&&Pu(g);break;case 13:Pu(g);break;case 19:ze(bs);break;case 10:uA(g.type);break;case 22:case 23:Pu(g),nd(),A!==null&&ze($h);break;case 24:uA(ls)}}function Hd(A,g){try{var _=g.updateQueue,I=_!==null?_.lastEffect:null;if(I!==null){var W=I.next;_=W;do{if((_.tag&A)===A){I=void 0;var J=_.create,xe=_.inst;I=J(),xe.destroy=I}_=_.next}while(_!==W)}}catch($e){qo(g,g.return,$e)}}function yh(A,g,_){try{var I=g.updateQueue,W=I!==null?I.lastEffect:null;if(W!==null){var J=W.next;I=J;do{if((I.tag&A)===A){var xe=I.inst,$e=xe.destroy;if($e!==void 0){xe.destroy=void 0,W=g;var _t=_,$t=$e;try{$t()}catch(ln){qo(W,_t,ln)}}}I=I.next}while(I!==J)}}catch(ln){qo(g,g.return,ln)}}function ng(A){var g=A.updateQueue;if(g!==null){var _=A.stateNode;try{Nd(g,_)}catch(I){qo(A,A.return,I)}}}function Zd(A,g,_){_.props=Va(A.type,A.memoizedProps),_.state=A.memoizedState;try{_.componentWillUnmount()}catch(I){qo(A,g,I)}}function ql(A,g){try{var _=A.ref;if(_!==null){switch(A.tag){case 26:case 27:case 5:var I=A.stateNode;break;case 30:I=A.stateNode;break;default:I=A.stateNode}typeof _=="function"?A.refCleanup=_(I):_.current=I}}catch(W){qo(A,g,W)}}function Fu(A,g){var _=A.ref,I=A.refCleanup;if(_!==null)if(typeof I=="function")try{I()}catch(W){qo(A,g,W)}finally{A.refCleanup=null,A=A.alternate,A!=null&&(A.refCleanup=null)}else if(typeof _=="function")try{_(null)}catch(W){qo(A,g,W)}else _.current=null}function AC(A){var g=A.type,_=A.memoizedProps,I=A.stateNode;try{e:switch(g){case"button":case"input":case"select":case"textarea":_.autoFocus&&I.focus();break e;case"img":_.src?I.src=_.src:_.srcSet&&(I.srcset=_.srcSet)}}catch(W){qo(A,A.return,W)}}function K1(A,g,_){try{var I=A.stateNode;nm(I,A.type,_,g),I[gn]=g}catch(W){qo(A,A.return,W)}}function hC(A){return A.tag===5||A.tag===3||A.tag===26||A.tag===27&&ar(A.type)||A.tag===4}function _v(A){e:for(;;){for(;A.sibling===null;){if(A.return===null||hC(A.return))return null;A=A.return}for(A.sibling.return=A.return,A=A.sibling;A.tag!==5&&A.tag!==6&&A.tag!==18;){if(A.tag===27&&ar(A.type)||A.flags&2||A.child===null||A.tag===4)continue e;A.child.return=A,A=A.child}if(!(A.flags&2))return A.stateNode}}function xv(A,g,_){var I=A.tag;if(I===5||I===6)A=A.stateNode,g?(_.nodeType===9?_.body:_.nodeName==="HTML"?_.ownerDocument.body:_).insertBefore(A,g):(g=_.nodeType===9?_.body:_.nodeName==="HTML"?_.ownerDocument.body:_,g.appendChild(A),_=_._reactRootContainer,_!=null||g.onclick!==null||(g.onclick=Pa));else if(I!==4&&(I===27&&ar(A.type)&&(_=A.stateNode,g=null),A=A.child,A!==null))for(xv(A,g,_),A=A.sibling;A!==null;)xv(A,g,_),A=A.sibling}function L1(A,g,_){var I=A.tag;if(I===5||I===6)A=A.stateNode,g?_.insertBefore(A,g):_.appendChild(A);else if(I!==4&&(I===27&&ar(A.type)&&(_=A.stateNode),A=A.child,A!==null))for(L1(A,g,_),A=A.sibling;A!==null;)L1(A,g,_),A=A.sibling}function F1(A){var g=A.stateNode,_=A.memoizedProps;try{for(var I=A.type,W=g.attributes;W.length;)g.removeAttributeNode(W[0]);Xa(g,I,_),g[gr]=A,g[gn]=_}catch(J){qo(A,A.return,J)}}var Xd=!1,Ha=!1,Qp=!1,dC=typeof WeakSet=="function"?WeakSet:Set,Qr=null;function ig(A,g){if(A=A.containerInfo,yg=ji,A=ao(A),Wm(A)){if("selectionStart"in A)var _={start:A.selectionStart,end:A.selectionEnd};else e:{_=(_=A.ownerDocument)&&_.defaultView||window;var I=_.getSelection&&_.getSelection();if(I&&I.rangeCount!==0){_=I.anchorNode;var W=I.anchorOffset,J=I.focusNode;I=I.focusOffset;try{_.nodeType,J.nodeType}catch{_=null;break e}var xe=0,$e=-1,_t=-1,$t=0,ln=0,pn=A,Xt=null;t:for(;;){for(var rn;pn!==_||W!==0&&pn.nodeType!==3||($e=xe+W),pn!==J||I!==0&&pn.nodeType!==3||(_t=xe+I),pn.nodeType===3&&(xe+=pn.nodeValue.length),(rn=pn.firstChild)!==null;)Xt=pn,pn=rn;for(;;){if(pn===A)break t;if(Xt===_&&++$t===W&&($e=xe),Xt===J&&++ln===I&&(_t=xe),(rn=pn.nextSibling)!==null)break;pn=Xt,Xt=pn.parentNode}pn=rn}_=$e===-1||_t===-1?null:{start:$e,end:_t}}else _=null}_=_||{start:0,end:0}}else _=null;for(oy={focusedElem:A,selectionRange:_},ji=!1,Qr=g;Qr!==null;)if(g=Qr,A=g.child,(g.subtreeFlags&1028)!==0&&A!==null)A.return=g,Qr=A;else for(;Qr!==null;){switch(g=Qr,J=g.alternate,A=g.flags,g.tag){case 0:if((A&4)!==0&&(A=g.updateQueue,A=A!==null?A.events:null,A!==null))for(_=0;_<A.length;_++)W=A[_],W.ref.impl=W.nextImpl;break;case 11:case 15:break;case 1:if((A&1024)!==0&&J!==null){A=void 0,_=g,W=J.memoizedProps,J=J.memoizedState,I=_.stateNode;try{var Ti=Va(_.type,W);A=I.getSnapshotBeforeUpdate(Ti,J),I.__reactInternalSnapshotBeforeUpdate=A}catch(lr){qo(_,_.return,lr)}}break;case 3:if((A&1024)!==0){if(A=g.stateNode.containerInfo,_=A.nodeType,_===9)im(A);else if(_===1)switch(A.nodeName){case"HEAD":case"HTML":case"BODY":im(A);break;default:A.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((A&1024)!==0)throw Error(i(163))}if(A=g.sibling,A!==null){A.return=g.return,Qr=A;break}Qr=g.return}}function z1(A,g,_){var I=_.flags;switch(_.tag){case 0:case 11:case 15:Jd(A,_),I&4&&Hd(5,_);break;case 1:if(Jd(A,_),I&4)if(A=_.stateNode,g===null)try{A.componentDidMount()}catch(xe){qo(_,_.return,xe)}else{var W=Va(_.type,g.memoizedProps);g=g.memoizedState;try{A.componentDidUpdate(W,g,A.__reactInternalSnapshotBeforeUpdate)}catch(xe){qo(_,_.return,xe)}}I&64&&ng(_),I&512&&ql(_,_.return);break;case 3:if(Jd(A,_),I&64&&(A=_.updateQueue,A!==null)){if(g=null,_.child!==null)switch(_.child.tag){case 27:case 5:g=_.child.stateNode;break;case 1:g=_.child.stateNode}try{Nd(A,g)}catch(xe){qo(_,_.return,xe)}}break;case 27:g===null&&I&4&&F1(_);case 26:case 5:Jd(A,_),g===null&&I&4&&AC(_),I&512&&ql(_,_.return);break;case 12:Jd(A,_);break;case 31:Jd(A,_),I&4&&qp(A,_);break;case 13:Jd(A,_),I&4&&j1(A,_),I&64&&(A=_.memoizedState,A!==null&&(A=A.dehydrated,A!==null&&(_=Z1.bind(null,_),Vl(A,_))));break;case 22:if(I=_.memoizedState!==null||Xd,!I){g=g!==null&&g.memoizedState!==null||Ha,W=Xd;var J=Ha;Xd=I,(Ha=g)&&!J?Wc(A,_,(_.subtreeFlags&8772)!==0):Jd(A,_),Xd=W,Ha=J}break;case 30:break;default:Jd(A,_)}}function rg(A){var g=A.alternate;g!==null&&(A.alternate=null,rg(g)),A.child=null,A.deletions=null,A.sibling=null,A.tag===5&&(g=A.stateNode,g!==null&&kl(g)),A.stateNode=null,A.return=null,A.dependencies=null,A.memoizedProps=null,A.memoizedState=null,A.pendingProps=null,A.stateNode=null,A.updateQueue=null}var _s=null,Yl=!1;function od(A,g,_){for(_=_.child;_!==null;)Mv(A,g,_),_=_.sibling}function Mv(A,g,_){if(Ve&&typeof Ve.onCommitFiberUnmount=="function")try{Ve.onCommitFiberUnmount(Le,_)}catch{}switch(_.tag){case 26:Ha||Fu(_,g),od(A,g,_),_.memoizedState?_.memoizedState.count--:_.stateNode&&(_=_.stateNode,_.parentNode.removeChild(_));break;case 27:Ha||Fu(_,g);var I=_s,W=Yl;ar(_.type)&&(_s=_.stateNode,Yl=!1),od(A,g,_),bg(_.stateNode),_s=I,Yl=W;break;case 5:Ha||Fu(_,g);case 6:if(I=_s,W=Yl,_s=null,od(A,g,_),_s=I,Yl=W,_s!==null)if(Yl)try{(_s.nodeType===9?_s.body:_s.nodeName==="HTML"?_s.ownerDocument.body:_s).removeChild(_.stateNode)}catch(J){qo(_,g,J)}else try{_s.removeChild(_.stateNode)}catch(J){qo(_,g,J)}break;case 18:_s!==null&&(Yl?(A=_s,ay(A.nodeType===9?A.body:A.nodeName==="HTML"?A.ownerDocument.body:A,_.stateNode),Qu(A)):ay(_s,_.stateNode));break;case 4:I=_s,W=Yl,_s=_.stateNode.containerInfo,Yl=!0,od(A,g,_),_s=I,Yl=W;break;case 0:case 11:case 14:case 15:yh(2,_,g),Ha||yh(4,_,g),od(A,g,_);break;case 1:Ha||(Fu(_,g),I=_.stateNode,typeof I.componentWillUnmount=="function"&&Zd(_,g,I)),od(A,g,_);break;case 21:od(A,g,_);break;case 22:Ha=(I=Ha)||_.memoizedState!==null,od(A,g,_),Ha=I;break;default:od(A,g,_)}}function qp(A,g){if(g.memoizedState===null&&(A=g.alternate,A!==null&&(A=A.memoizedState,A!==null))){A=A.dehydrated;try{Qu(A)}catch(_){qo(g,g.return,_)}}}function j1(A,g){if(g.memoizedState===null&&(A=g.alternate,A!==null&&(A=A.memoizedState,A!==null&&(A=A.dehydrated,A!==null))))try{Qu(A)}catch(_){qo(g,g.return,_)}}function og(A){switch(A.tag){case 31:case 13:case 19:var g=A.stateNode;return g===null&&(g=A.stateNode=new dC),g;case 22:return A=A.stateNode,g=A._retryCache,g===null&&(g=A._retryCache=new dC),g;default:throw Error(i(435,A.tag))}}function Yp(A,g){var _=og(A);g.forEach(function(I){if(!_.has(I)){_.add(I);var W=n2.bind(null,A,I);I.then(W,W)}})}function xl(A,g){var _=g.deletions;if(_!==null)for(var I=0;I<_.length;I++){var W=_[I],J=A,xe=g,$e=xe;e:for(;$e!==null;){switch($e.tag){case 27:if(ar($e.type)){_s=$e.stateNode,Yl=!1;break e}break;case 5:_s=$e.stateNode,Yl=!1;break e;case 3:case 4:_s=$e.stateNode.containerInfo,Yl=!0;break e}$e=$e.return}if(_s===null)throw Error(i(160));Mv(J,xe,W),_s=null,Yl=!1,J=W.alternate,J!==null&&(J.return=null),W.return=null}if(g.subtreeFlags&13886)for(g=g.child;g!==null;)fC(g,A),g=g.sibling}var pc=null;function fC(A,g){var _=A.alternate,I=A.flags;switch(A.tag){case 0:case 11:case 14:case 15:xl(g,A),Gs(A),I&4&&(yh(3,A,A.return),Hd(3,A),yh(5,A,A.return));break;case 1:xl(g,A),Gs(A),I&512&&(Ha||_===null||Fu(_,_.return)),I&64&&Xd&&(A=A.updateQueue,A!==null&&(I=A.callbacks,I!==null&&(_=A.shared.hiddenCallbacks,A.shared.hiddenCallbacks=_===null?I:_.concat(I))));break;case 26:var W=pc;if(xl(g,A),Gs(A),I&512&&(Ha||_===null||Fu(_,_.return)),I&4){var J=_!==null?_.memoizedState:null;if(I=A.memoizedState,_===null)if(I===null)if(A.stateNode===null){e:{I=A.type,_=A.memoizedProps,W=W.ownerDocument||W;t:switch(I){case"title":J=W.getElementsByTagName("title")[0],(!J||J[Pi]||J[gr]||J.namespaceURI==="http://www.w3.org/2000/svg"||J.hasAttribute("itemprop"))&&(J=W.createElement(I),W.head.insertBefore(J,W.querySelector("head > title"))),Xa(J,I,_),J[gr]=A,Ko(J),I=J;break e;case"link":var xe=Ae("link","href",W).get(I+(_.href||""));if(xe){for(var $e=0;$e<xe.length;$e++)if(J=xe[$e],J.getAttribute("href")===(_.href==null||_.href===""?null:_.href)&&J.getAttribute("rel")===(_.rel==null?null:_.rel)&&J.getAttribute("title")===(_.title==null?null:_.title)&&J.getAttribute("crossorigin")===(_.crossOrigin==null?null:_.crossOrigin)){xe.splice($e,1);break t}}J=W.createElement(I),Xa(J,I,_),W.head.appendChild(J);break;case"meta":if(xe=Ae("meta","content",W).get(I+(_.content||""))){for($e=0;$e<xe.length;$e++)if(J=xe[$e],J.getAttribute("content")===(_.content==null?null:""+_.content)&&J.getAttribute("name")===(_.name==null?null:_.name)&&J.getAttribute("property")===(_.property==null?null:_.property)&&J.getAttribute("http-equiv")===(_.httpEquiv==null?null:_.httpEquiv)&&J.getAttribute("charset")===(_.charSet==null?null:_.charSet)){xe.splice($e,1);break t}}J=W.createElement(I),Xa(J,I,_),W.head.appendChild(J);break;default:throw Error(i(468,I))}J[gr]=A,Ko(J),I=J}A.stateNode=I}else Oe(W,A.type,A.stateNode);else A.stateNode=D(W,I,A.memoizedProps);else J!==I?(J===null?_.stateNode!==null&&(_=_.stateNode,_.parentNode.removeChild(_)):J.count--,I===null?Oe(W,A.type,A.stateNode):D(W,I,A.memoizedProps)):I===null&&A.stateNode!==null&&K1(A,A.memoizedProps,_.memoizedProps)}break;case 27:xl(g,A),Gs(A),I&512&&(Ha||_===null||Fu(_,_.return)),_!==null&&I&4&&K1(A,A.memoizedProps,_.memoizedProps);break;case 5:if(xl(g,A),Gs(A),I&512&&(Ha||_===null||Fu(_,_.return)),A.flags&32){W=A.stateNode;try{wo(W,"")}catch(Ti){qo(A,A.return,Ti)}}I&4&&A.stateNode!=null&&(W=A.memoizedProps,K1(A,W,_!==null?_.memoizedProps:W)),I&1024&&(Qp=!0);break;case 6:if(xl(g,A),Gs(A),I&4){if(A.stateNode===null)throw Error(i(162));I=A.memoizedProps,_=A.stateNode;try{_.nodeValue=I}catch(Ti){qo(A,A.return,Ti)}}break;case 3:if(re=null,W=pc,pc=N0(g.containerInfo),xl(g,A),pc=W,Gs(A),I&4&&_!==null&&_.memoizedState.isDehydrated)try{Qu(g.containerInfo)}catch(Ti){qo(A,A.return,Ti)}Qp&&(Qp=!1,$f(A));break;case 4:I=pc,pc=N0(A.stateNode.containerInfo),xl(g,A),Gs(A),pc=I;break;case 12:xl(g,A),Gs(A);break;case 31:xl(g,A),Gs(A),I&4&&(I=A.updateQueue,I!==null&&(A.updateQueue=null,Yp(A,I)));break;case 13:xl(g,A),Gs(A),A.child.flags&8192&&A.memoizedState!==null!=(_!==null&&_.memoizedState!==null)&&(lg=$n()),I&4&&(I=A.updateQueue,I!==null&&(A.updateQueue=null,Yp(A,I)));break;case 22:W=A.memoizedState!==null;var _t=_!==null&&_.memoizedState!==null,$t=Xd,ln=Ha;if(Xd=$t||W,Ha=ln||_t,xl(g,A),Ha=ln,Xd=$t,Gs(A),I&8192)e:for(g=A.stateNode,g._visibility=W?g._visibility&-2:g._visibility|1,W&&(_===null||_t||Xd||Ha||Vf(A)),_=null,g=A;;){if(g.tag===5||g.tag===26){if(_===null){_t=_=g;try{if(J=_t.stateNode,W)xe=J.style,typeof xe.setProperty=="function"?xe.setProperty("display","none","important"):xe.display="none";else{$e=_t.stateNode;var pn=_t.memoizedProps.style,Xt=pn!=null&&pn.hasOwnProperty("display")?pn.display:null;$e.style.display=Xt==null||typeof Xt=="boolean"?"":(""+Xt).trim()}}catch(Ti){qo(_t,_t.return,Ti)}}}else if(g.tag===6){if(_===null){_t=g;try{_t.stateNode.nodeValue=W?"":_t.memoizedProps}catch(Ti){qo(_t,_t.return,Ti)}}}else if(g.tag===18){if(_===null){_t=g;try{var rn=_t.stateNode;W?ju(rn,!0):ju(_t.stateNode,!1)}catch(Ti){qo(_t,_t.return,Ti)}}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===A)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===A)break e;for(;g.sibling===null;){if(g.return===null||g.return===A)break e;_===g&&(_=null),g=g.return}_===g&&(_=null),g.sibling.return=g.return,g=g.sibling}I&4&&(I=A.updateQueue,I!==null&&(_=I.retryQueue,_!==null&&(I.retryQueue=null,Yp(A,_))));break;case 19:xl(g,A),Gs(A),I&4&&(I=A.updateQueue,I!==null&&(A.updateQueue=null,Yp(A,I)));break;case 30:break;case 21:break;default:xl(g,A),Gs(A)}}function Gs(A){var g=A.flags;if(g&2){try{for(var _,I=A.return;I!==null;){if(hC(I)){_=I;break}I=I.return}if(_==null)throw Error(i(160));switch(_.tag){case 27:var W=_.stateNode,J=_v(A);L1(A,J,W);break;case 5:var xe=_.stateNode;_.flags&32&&(wo(xe,""),_.flags&=-33);var $e=_v(A);L1(A,$e,xe);break;case 3:case 4:var _t=_.stateNode.containerInfo,$t=_v(A);xv(A,$t,_t);break;default:throw Error(i(161))}}catch(ln){qo(A,A.return,ln)}A.flags&=-3}g&4096&&(A.flags&=-4097)}function $f(A){if(A.subtreeFlags&1024)for(A=A.child;A!==null;){var g=A;$f(g),g.tag===5&&g.flags&1024&&g.stateNode.reset(),A=A.sibling}}function Jd(A,g){if(g.subtreeFlags&8772)for(g=g.child;g!==null;)z1(A,g.alternate,g),g=g.sibling}function Vf(A){for(A=A.child;A!==null;){var g=A;switch(g.tag){case 0:case 11:case 14:case 15:yh(4,g,g.return),Vf(g);break;case 1:Fu(g,g.return);var _=g.stateNode;typeof _.componentWillUnmount=="function"&&Zd(g,g.return,_),Vf(g);break;case 27:bg(g.stateNode);case 26:case 5:Fu(g,g.return),Vf(g);break;case 22:g.memoizedState===null&&Vf(g);break;case 30:Vf(g);break;default:Vf(g)}A=A.sibling}}function Wc(A,g,_){for(_=_&&(g.subtreeFlags&8772)!==0,g=g.child;g!==null;){var I=g.alternate,W=A,J=g,xe=J.flags;switch(J.tag){case 0:case 11:case 15:Wc(W,J,_),Hd(4,J);break;case 1:if(Wc(W,J,_),I=J,W=I.stateNode,typeof W.componentDidMount=="function")try{W.componentDidMount()}catch($t){qo(I,I.return,$t)}if(I=J,W=I.updateQueue,W!==null){var $e=I.stateNode;try{var _t=W.shared.hiddenCallbacks;if(_t!==null)for(W.shared.hiddenCallbacks=null,W=0;W<_t.length;W++)La(_t[W],$e)}catch($t){qo(I,I.return,$t)}}_&&xe&64&&ng(J),ql(J,J.return);break;case 27:F1(J);case 26:case 5:Wc(W,J,_),_&&I===null&&xe&4&&AC(J),ql(J,J.return);break;case 12:Wc(W,J,_);break;case 31:Wc(W,J,_),_&&xe&4&&qp(W,J);break;case 13:Wc(W,J,_),_&&xe&4&&j1(W,J);break;case 22:J.memoizedState===null&&Wc(W,J,_),ql(J,J.return);break;case 30:break;default:Wc(W,J,_)}g=g.sibling}}function S0(A,g){var _=null;A!==null&&A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(_=A.memoizedState.cachePool.pool),A=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(A=g.memoizedState.cachePool.pool),A!==_&&(A!=null&&A.refCount++,_!=null&&Nl(_))}function N1(A,g){A=null,g.alternate!==null&&(A=g.alternate.memoizedState.cache),g=g.memoizedState.cache,g!==A&&(g.refCount++,A!=null&&Nl(A))}function KA(A,g,_,I){if(g.subtreeFlags&10256)for(g=g.child;g!==null;)pC(A,g,_,I),g=g.sibling}function pC(A,g,_,I){var W=g.flags;switch(g.tag){case 0:case 11:case 15:KA(A,g,_,I),W&2048&&Hd(9,g);break;case 1:KA(A,g,_,I);break;case 3:KA(A,g,_,I),W&2048&&(A=null,g.alternate!==null&&(A=g.alternate.memoizedState.cache),g=g.memoizedState.cache,g!==A&&(g.refCount++,A!=null&&Nl(A)));break;case 12:if(W&2048){KA(A,g,_,I),A=g.stateNode;try{var J=g.memoizedProps,xe=J.id,$e=J.onPostCommit;typeof $e=="function"&&$e(xe,g.alternate===null?"mount":"update",A.passiveEffectDuration,-0)}catch(_t){qo(g,g.return,_t)}}else KA(A,g,_,I);break;case 31:KA(A,g,_,I);break;case 13:KA(A,g,_,I);break;case 23:break;case 22:J=g.stateNode,xe=g.alternate,g.memoizedState!==null?J._visibility&2?KA(A,g,_,I):E0(A,g):J._visibility&2?KA(A,g,_,I):(J._visibility|=2,Hf(A,g,_,I,(g.subtreeFlags&10256)!==0||!1)),W&2048&&S0(xe,g);break;case 24:KA(A,g,_,I),W&2048&&N1(g.alternate,g);break;default:KA(A,g,_,I)}}function Hf(A,g,_,I,W){for(W=W&&((g.subtreeFlags&10256)!==0||!1),g=g.child;g!==null;){var J=A,xe=g,$e=_,_t=I,$t=xe.flags;switch(xe.tag){case 0:case 11:case 15:Hf(J,xe,$e,_t,W),Hd(8,xe);break;case 23:break;case 22:var ln=xe.stateNode;xe.memoizedState!==null?ln._visibility&2?Hf(J,xe,$e,_t,W):E0(J,xe):(ln._visibility|=2,Hf(J,xe,$e,_t,W)),W&&$t&2048&&S0(xe.alternate,xe);break;case 24:Hf(J,xe,$e,_t,W),W&&$t&2048&&N1(xe.alternate,xe);break;default:Hf(J,xe,$e,_t,W)}g=g.sibling}}function E0(A,g){if(g.subtreeFlags&10256)for(g=g.child;g!==null;){var _=A,I=g,W=I.flags;switch(I.tag){case 22:E0(_,I),W&2048&&S0(I.alternate,I);break;case 24:E0(_,I),W&2048&&N1(I.alternate,I);break;default:E0(_,I)}g=g.sibling}}var O0=8192;function sg(A,g,_){if(A.subtreeFlags&O0)for(A=A.child;A!==null;)$p(A,g,_),A=A.sibling}function $p(A,g,_){switch(A.tag){case 26:sg(A,g,_),A.flags&O0&&A.memoizedState!==null&&Ge(_,pc,A.memoizedState,A.memoizedProps);break;case 5:sg(A,g,_);break;case 3:case 4:var I=pc;pc=N0(A.stateNode.containerInfo),sg(A,g,_),pc=I;break;case 22:A.memoizedState===null&&(I=A.alternate,I!==null&&I.memoizedState!==null?(I=O0,O0=16777216,sg(A,g,_),O0=I):sg(A,g,_));break;default:sg(A,g,_)}}function mC(A){var g=A.alternate;if(g!==null&&(A=g.child,A!==null)){g.child=null;do g=A.sibling,A.sibling=null,A=g;while(A!==null)}}function B0(A){var g=A.deletions;if((A.flags&16)!==0){if(g!==null)for(var _=0;_<g.length;_++){var I=g[_];Qr=I,Sv(I,A)}mC(A)}if(A.subtreeFlags&10256)for(A=A.child;A!==null;)wv(A),A=A.sibling}function wv(A){switch(A.tag){case 0:case 11:case 15:B0(A),A.flags&2048&&yh(9,A,A.return);break;case 3:B0(A);break;case 12:B0(A);break;case 22:var g=A.stateNode;A.memoizedState!==null&&g._visibility&2&&(A.return===null||A.return.tag!==13)?(g._visibility&=-3,G1(A)):B0(A);break;default:B0(A)}}function G1(A){var g=A.deletions;if((A.flags&16)!==0){if(g!==null)for(var _=0;_<g.length;_++){var I=g[_];Qr=I,Sv(I,A)}mC(A)}for(A=A.child;A!==null;){switch(g=A,g.tag){case 0:case 11:case 15:yh(8,g,g.return),G1(g);break;case 22:_=g.stateNode,_._visibility&2&&(_._visibility&=-3,G1(g));break;default:G1(g)}A=A.sibling}}function Sv(A,g){for(;Qr!==null;){var _=Qr;switch(_.tag){case 0:case 11:case 15:yh(8,_,g);break;case 23:case 22:if(_.memoizedState!==null&&_.memoizedState.cachePool!==null){var I=_.memoizedState.cachePool.pool;I!=null&&I.refCount++}break;case 24:Nl(_.memoizedState.cache)}if(I=_.child,I!==null)I.return=_,Qr=I;else e:for(_=A;Qr!==null;){I=Qr;var W=I.sibling,J=I.return;if(rg(I),I===_){Qr=null;break e}if(W!==null){W.return=J,Qr=W;break e}Qr=J}}}var Jx={getCacheForType:function(A){var g=ll(ls),_=g.data.get(A);return _===void 0&&(_=A(),g.data.set(A,_)),_},cacheSignal:function(){return ll(ls).controller.signal}},Ev=typeof WeakMap=="function"?WeakMap:Map,Mo=0,hs=null,uo=null,mo=0,ts=0,Qc=null,Zf=!1,ag=!1,Vp=!1,LA=0,_a=0,Xf=0,Hp=0,Ov=0,pA=0,Zp=0,Xp=null,mc=null,W1=!1,lg=0,gC=0,sd=1/0,Q1=null,ef=null,Ml=0,Jf=null,ug=null,ad=0,Bv=0,Iv=null,cg=null,Aa=0,I0=null;function qc(){return(Mo&2)!==0&&mo!==0?mo&-mo:Ie.T!==null?$l():nr()}function kv(){if(pA===0)if((mo&536870912)===0||Gr){var A=Pt;Pt<<=1,(Pt&3932160)===0&&(Pt=262144),pA=A}else pA=536870912;return A=us.current,A!==null&&(A.flags|=32),pA}function zu(A,g,_){(A===hs&&(ts===2||ts===9)||A.cancelPendingCommit!==null)&&(Ag(A,0),tf(A,mo,pA,!1)),Hi(A,_),((Mo&2)===0||A!==hs)&&(A===hs&&((Mo&2)===0&&(Hp|=_),_a===4&&tf(A,mo,pA,!1)),bh(A))}function Jp(A,g,_){if((Mo&6)!==0)throw Error(i(327));var I=!_&&(g&127)===0&&(g&A.expiredLanes)===0||Xn(A,g),W=I?_C(A,g):Dv(A,g,!0),J=I;do{if(W===0){ag&&!I&&tf(A,g,0,!1);break}else{if(_=A.current.alternate,J&&!yC(_)){W=Dv(A,g,!1),J=!1;continue}if(W===2){if(J=g,A.errorRecoveryDisabledLanes&J)var xe=0;else xe=A.pendingLanes&-536870913,xe=xe!==0?xe:xe&536870912?536870912:0;if(xe!==0){g=xe;e:{var $e=A;W=Xp;var _t=$e.current.memoizedState.isDehydrated;if(_t&&(Ag($e,xe).flags|=256),xe=Dv($e,xe,!1),xe!==2){if(Vp&&!_t){$e.errorRecoveryDisabledLanes|=J,Hp|=J,W=4;break e}J=mc,mc=W,J!==null&&(mc===null?mc=J:mc.push.apply(mc,J))}W=xe}if(J=!1,W!==2)continue}}if(W===1){Ag(A,0),tf(A,g,0,!0);break}e:{switch(I=A,J=W,J){case 0:case 1:throw Error(i(345));case 4:if((g&4194048)!==g)break;case 6:tf(I,g,pA,!Zf);break e;case 2:mc=null;break;case 3:case 5:break;default:throw Error(i(329))}if((g&62914560)===g&&(W=lg+300-$n(),10<W)){if(tf(I,g,pA,!Zf),Qn(I,0,!0)!==0)break e;ad=g,I.timeoutHandle=Wv(Tv.bind(null,I,_,mc,Q1,W1,g,pA,Hp,Zp,Zf,J,"Throttled",-0,0),W);break e}Tv(I,_,mc,Q1,W1,g,pA,Hp,Zp,Zf,J,null,-0,0)}}break}while(!0);bh(A)}function Tv(A,g,_,I,W,J,xe,$e,_t,$t,ln,pn,Xt,rn){if(A.timeoutHandle=-1,pn=g.subtreeFlags,pn&8192||(pn&16785408)===16785408){pn={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Pa},$p(g,J,pn);var Ti=(J&62914560)===J?lg-$n():(J&4194048)===J?gC-$n():0;if(Ti=st(pn,Ti),Ti!==null){ad=J,A.cancelPendingCommit=Ti(T0.bind(null,A,g,J,_,I,W,xe,$e,_t,ln,pn,null,Xt,rn)),tf(A,J,xe,!$t);return}}T0(A,g,J,_,I,W,xe,$e,_t)}function yC(A){for(var g=A;;){var _=g.tag;if((_===0||_===11||_===15)&&g.flags&16384&&(_=g.updateQueue,_!==null&&(_=_.stores,_!==null)))for(var I=0;I<_.length;I++){var W=_[I],J=W.getSnapshot;W=W.value;try{if(!Is(J(),W))return!1}catch{return!1}}if(_=g.child,g.subtreeFlags&16384&&_!==null)_.return=g,g=_;else{if(g===A)break;for(;g.sibling===null;){if(g.return===null||g.return===A)return!0;g=g.return}g.sibling.return=g.return,g=g.sibling}}return!0}function tf(A,g,_,I){g&=~Ov,g&=~Hp,A.suspendedLanes|=g,A.pingedLanes&=~g,I&&(A.warmLanes|=g),I=A.expirationTimes;for(var W=g;0<W;){var J=31-ye(W),xe=1<<J;I[J]=-1,W&=~xe}_!==0&&Ar(A,_,g)}function q1(){return(Mo&6)===0?(tm(0),!1):!0}function Rv(){if(uo!==null){if(ts===0)var A=uo.return;else A=uo,lA=br=null,C(A),Zh=null,Ru=0,A=uo;for(;A!==null;)U1(A.alternate,A),A=A.return;uo=null}}function Ag(A,g){var _=A.timeoutHandle;_!==-1&&(A.timeoutHandle=-1,o2(_)),_=A.cancelPendingCommit,_!==null&&(A.cancelPendingCommit=null,_()),ad=0,Rv(),hs=A,uo=_=Kl(A.current,null),mo=g,ts=0,Qc=null,Zf=!1,ag=Xn(A,g),Vp=!1,Zp=pA=Ov=Hp=Xf=_a=0,mc=Xp=null,W1=!1,(g&8)!==0&&(g|=g&32);var I=A.entangledLanes;if(I!==0)for(A=A.entanglements,I&=g;0<I;){var W=31-ye(I),J=1<<W;g|=A[W],I&=~J}return LA=g,Bu(),_}function vC(A,g){sr=null,Ie.H=DA,g===zd||g===ch?(g=g0(),ts=3):g===zf?(g=g0(),ts=4):ts=g===zp?8:g!==null&&typeof g=="object"&&typeof g.then=="function"?6:1,Qc=g,uo===null&&(_a=1,Zm(A,Ll(g,A.current)))}function k0(){var A=us.current;return A===null?!0:(mo&4194048)===mo?fc===null:(mo&62914560)===mo||(mo&536870912)!==0?A===fc:!1}function bC(){var A=Ie.H;return Ie.H=DA,A===null?DA:A}function CC(){var A=Ie.A;return Ie.A=Jx,A}function Y1(){_a=4,Zf||(mo&4194048)!==mo&&us.current!==null||(ag=!0),(Xf&134217727)===0&&(Hp&134217727)===0||hs===null||tf(hs,mo,pA,!1)}function Dv(A,g,_){var I=Mo;Mo|=2;var W=bC(),J=CC();(hs!==A||mo!==g)&&(Q1=null,Ag(A,g)),g=!1;var xe=_a;e:do try{if(ts!==0&&uo!==null){var $e=uo,_t=Qc;switch(ts){case 8:Rv(),xe=6;break e;case 3:case 2:case 9:case 6:us.current===null&&(g=!0);var $t=ts;if(ts=0,Qc=null,ld(A,$e,_t,$t),_&&ag){xe=0;break e}break;default:$t=ts,ts=0,Qc=null,ld(A,$e,_t,$t)}}e2(),xe=_a;break}catch(ln){vC(A,ln)}while(!0);return g&&A.shellSuspendCounter++,lA=br=null,Mo=I,Ie.H=W,Ie.A=J,uo===null&&(hs=null,mo=0,Bu()),xe}function e2(){for(;uo!==null;)Uv(uo)}function _C(A,g){var _=Mo;Mo|=2;var I=bC(),W=CC();hs!==A||mo!==g?(Q1=null,sd=$n()+500,Ag(A,g)):ag=Xn(A,g);e:do try{if(ts!==0&&uo!==null){g=uo;var J=Qc;t:switch(ts){case 1:ts=0,Qc=null,ld(A,g,J,1);break;case 2:case 9:if(Hh(J)){ts=0,Qc=null,nf(g);break}g=function(){ts!==2&&ts!==9||hs!==A||(ts=7),bh(A)},J.then(g,g);break e;case 3:ts=7;break e;case 4:ts=5;break e;case 7:Hh(J)?(ts=0,Qc=null,nf(g)):(ts=0,Qc=null,ld(A,g,J,7));break;case 5:var xe=null;switch(uo.tag){case 26:xe=uo.memoizedState;case 5:case 27:var $e=uo;if(xe?Ue(xe):$e.stateNode.complete){ts=0,Qc=null;var _t=$e.sibling;if(_t!==null)uo=_t;else{var $t=$e.return;$t!==null?(uo=$t,rf($t)):uo=null}break t}}ts=0,Qc=null,ld(A,g,J,5);break;case 6:ts=0,Qc=null,ld(A,g,J,6);break;case 8:Rv(),_a=6;break e;default:throw Error(i(462))}}Pv();break}catch(ln){vC(A,ln)}while(!0);return lA=br=null,Ie.H=I,Ie.A=W,Mo=_,uo!==null?0:(hs=null,mo=0,Bu(),_a)}function Pv(){for(;uo!==null&&!Tn();)Uv(uo)}function Uv(A){var g=uC(A.alternate,A,LA);A.memoizedProps=A.pendingProps,g===null?rf(A):uo=g}function nf(A){var g=A,_=g.alternate;switch(g.tag){case 15:case 0:g=vv(_,g,g.pendingProps,g.type,void 0,mo);break;case 11:g=vv(_,g,g.pendingProps,g.type.render,g.ref,mo);break;case 5:C(g);default:U1(_,g),g=uo=S1(g,LA),g=uC(_,g,LA)}A.memoizedProps=A.pendingProps,g===null?rf(A):uo=g}function ld(A,g,_,I){lA=br=null,C(g),Zh=null,Ru=0;var W=g.return;try{if(yv(A,W,g,_,mo)){_a=1,Zm(A,Ll(_,A.current)),uo=null;return}}catch(J){if(W!==null)throw uo=W,J;_a=1,Zm(A,Ll(_,A.current)),uo=null;return}g.flags&32768?(Gr||I===1?A=!0:ag||(mo&536870912)!==0?A=!1:(Zf=A=!0,(I===2||I===9||I===3||I===6)&&(I=us.current,I!==null&&I.tag===13&&(I.flags|=16384))),ep(g,A)):rf(g)}function rf(A){var g=A;do{if((g.flags&32768)!==0){ep(g,Zf);return}A=g.return;var _=cC(g.alternate,g,LA);if(_!==null){uo=_;return}if(g=g.sibling,g!==null){uo=g;return}uo=g=A}while(g!==null);_a===0&&(_a=5)}function ep(A,g){do{var _=w0(A.alternate,A);if(_!==null){_.flags&=32767,uo=_;return}if(_=A.return,_!==null&&(_.flags|=32768,_.subtreeFlags=0,_.deletions=null),!g&&(A=A.sibling,A!==null)){uo=A;return}uo=A=_}while(A!==null);_a=6,uo=null}function T0(A,g,_,I,W,J,xe,$e,_t){A.cancelPendingCommit=null;do D0();while(Ml!==0);if((Mo&6)!==0)throw Error(i(327));if(g!==null){if(g===A.current)throw Error(i(177));if(J=g.lanes|g.childLanes,J|=SA,Ii(A,_,J,xe,$e,_t),A===hs&&(uo=hs=null,mo=0),ug=g,Jf=A,ad=_,Bv=J,Iv=W,cg=I,(g.subtreeFlags&10256)!==0||(g.flags&10256)!==0?(A.callbackNode=null,A.callbackPriority=0,i2(oe,function(){return V1(),null})):(A.callbackNode=null,A.callbackPriority=0),I=(g.flags&13878)!==0,(g.subtreeFlags&13878)!==0||I){I=Ie.T,Ie.T=null,W=qe.p,qe.p=2,xe=Mo,Mo|=4;try{ig(A,g,_)}finally{Mo=xe,qe.p=W,Ie.T=I}}Ml=1,Kv(),Lv(),R0()}}function Kv(){if(Ml===1){Ml=0;var A=Jf,g=ug,_=(g.flags&13878)!==0;if((g.subtreeFlags&13878)!==0||_){_=Ie.T,Ie.T=null;var I=qe.p;qe.p=2;var W=Mo;Mo|=4;try{fC(g,A);var J=oy,xe=ao(A.containerInfo),$e=J.focusedElem,_t=J.selectionRange;if(xe!==$e&&$e&&$e.ownerDocument&&Gm($e.ownerDocument.documentElement,$e)){if(_t!==null&&Wm($e)){var $t=_t.start,ln=_t.end;if(ln===void 0&&(ln=$t),"selectionStart"in $e)$e.selectionStart=$t,$e.selectionEnd=Math.min(ln,$e.value.length);else{var pn=$e.ownerDocument||document,Xt=pn&&pn.defaultView||window;if(Xt.getSelection){var rn=Xt.getSelection(),Ti=$e.textContent.length,lr=Math.min(_t.start,Ti),Ms=_t.end===void 0?lr:Math.min(_t.end,Ti);!rn.extend&&lr>Ms&&(xe=Ms,Ms=lr,lr=xe);var Kt=Nm($e,lr),kt=Nm($e,Ms);if(Kt&&kt&&(rn.rangeCount!==1||rn.anchorNode!==Kt.node||rn.anchorOffset!==Kt.offset||rn.focusNode!==kt.node||rn.focusOffset!==kt.offset)){var qt=pn.createRange();qt.setStart(Kt.node,Kt.offset),rn.removeAllRanges(),lr>Ms?(rn.addRange(qt),rn.extend(kt.node,kt.offset)):(qt.setEnd(kt.node,kt.offset),rn.addRange(qt))}}}}for(pn=[],rn=$e;rn=rn.parentNode;)rn.nodeType===1&&pn.push({element:rn,left:rn.scrollLeft,top:rn.scrollTop});for(typeof $e.focus=="function"&&$e.focus(),$e=0;$e<pn.length;$e++){var hn=pn[$e];hn.element.scrollLeft=hn.left,hn.element.scrollTop=hn.top}}ji=!!yg,oy=yg=null}finally{Mo=W,qe.p=I,Ie.T=_}}A.current=g,Ml=2}}function Lv(){if(Ml===2){Ml=0;var A=Jf,g=ug,_=(g.flags&8772)!==0;if((g.subtreeFlags&8772)!==0||_){_=Ie.T,Ie.T=null;var I=qe.p;qe.p=2;var W=Mo;Mo|=4;try{z1(A,g.alternate,g)}finally{Mo=W,qe.p=I,Ie.T=_}}Ml=3}}function R0(){if(Ml===4||Ml===3){Ml=0,dn();var A=Jf,g=ug,_=ad,I=cg;(g.subtreeFlags&10256)!==0||(g.flags&10256)!==0?Ml=5:(Ml=0,ug=Jf=null,$1(A,A.pendingLanes));var W=A.pendingLanes;if(W===0&&(ef=null),on(_),g=g.stateNode,Ve&&typeof Ve.onCommitFiberRoot=="function")try{Ve.onCommitFiberRoot(Le,g,void 0,(g.current.flags&128)===128)}catch{}if(I!==null){g=Ie.T,W=qe.p,qe.p=2,Ie.T=null;try{for(var J=A.onRecoverableError,xe=0;xe<I.length;xe++){var $e=I[xe];J($e.value,{componentStack:$e.stack})}}finally{Ie.T=g,qe.p=W}}(ad&3)!==0&&D0(),bh(A),W=A.pendingLanes,(_&261930)!==0&&(W&42)!==0?A===I0?Aa++:(Aa=0,I0=A):Aa=0,tm(0)}}function $1(A,g){(A.pooledCacheLanes&=g)===0&&(g=A.pooledCache,g!=null&&(A.pooledCache=null,Nl(g)))}function D0(){return Kv(),Lv(),R0(),V1()}function V1(){if(Ml!==5)return!1;var A=Jf,g=Bv;Bv=0;var _=on(ad),I=Ie.T,W=qe.p;try{qe.p=32>_?32:_,Ie.T=null,_=Iv,Iv=null;var J=Jf,xe=ad;if(Ml=0,ug=Jf=null,ad=0,(Mo&6)!==0)throw Error(i(331));var $e=Mo;if(Mo|=4,wv(J.current),pC(J,J.current,xe,_),Mo=$e,tm(0,!1),Ve&&typeof Ve.onPostCommitFiberRoot=="function")try{Ve.onPostCommitFiberRoot(Le,J)}catch{}return!0}finally{qe.p=W,Ie.T=I,$1(A,g)}}function H1(A,g,_){g=Ll(_,g),g=I1(A.stateNode,g,2),A=hu(A,g,2),A!==null&&(Hi(A,2),bh(A))}function qo(A,g,_){if(A.tag===3)H1(A,A,_);else for(;g!==null;){if(g.tag===3){H1(g,A,_);break}else if(g.tag===1){var I=g.stateNode;if(typeof g.type.getDerivedStateFromError=="function"||typeof I.componentDidCatch=="function"&&(ef===null||!ef.has(I))){A=Ll(_,A),_=rd(2),I=hu(g,_,2),I!==null&&(Xm(_,I,g,A),Hi(I,2),bh(I));break}}g=g.return}}function P0(A,g,_){var I=A.pingCache;if(I===null){I=A.pingCache=new Ev;var W=new Set;I.set(g,W)}else W=I.get(g),W===void 0&&(W=new Set,I.set(g,W));W.has(_)||(Vp=!0,W.add(_),A=t2.bind(null,A,g,_),g.then(A,A))}function t2(A,g,_){var I=A.pingCache;I!==null&&I.delete(g),A.pingedLanes|=A.suspendedLanes&_,A.warmLanes&=~_,hs===A&&(mo&_)===_&&(_a===4||_a===3&&(mo&62914560)===mo&&300>$n()-lg?(Mo&2)===0&&Ag(A,0):Ov|=_,Zp===mo&&(Zp=0)),bh(A)}function hg(A,g){g===0&&(g=Fn()),A=cu(A,g),A!==null&&(Hi(A,g),bh(A))}function Z1(A){var g=A.memoizedState,_=0;g!==null&&(_=g.retryLane),hg(A,_)}function n2(A,g){var _=0;switch(A.tag){case 31:case 13:var I=A.stateNode,W=A.memoizedState;W!==null&&(_=W.retryLane);break;case 19:I=A.stateNode;break;case 22:I=A.stateNode._retryCache;break;default:throw Error(i(314))}I!==null&&I.delete(g),hg(A,_)}function i2(A,g){return oi(A,g)}var dg=null,em=null,X1=!1,U0=!1,vh=!1,gc=0;function bh(A){A!==em&&A.next===null&&(em===null?dg=em=A:em=em.next=A),U0=!0,X1||(X1=!0,Fv())}function tm(A,g){if(!vh&&U0){vh=!0;do for(var _=!1,I=dg;I!==null;){if(A!==0){var W=I.pendingLanes;if(W===0)var J=0;else{var xe=I.suspendedLanes,$e=I.pingedLanes;J=(1<<31-ye(42|A)+1)-1,J&=W&~(xe&~$e),J=J&201326741?J&201326741|1:J?J|2:0}J!==0&&(_=!0,ey(I,J))}else J=mo,J=Qn(I,I===hs?J:0,I.cancelPendingCommit!==null||I.timeoutHandle!==-1),(J&3)===0||Xn(I,J)||(_=!0,ey(I,J));I=I.next}while(_);vh=!1}}function r2(){K0()}function K0(){U0=X1=!1;var A=0;gc!==0&&wC()&&(A=gc);for(var g=$n(),_=null,I=dg;I!==null;){var W=I.next,J=J1(I,g);J===0?(I.next=null,_===null?dg=W:_.next=W,W===null&&(em=_)):(_=I,(A!==0||(J&3)!==0)&&(U0=!0)),I=W}Ml!==0&&Ml!==5||tm(A),gc!==0&&(gc=0)}function J1(A,g){for(var _=A.suspendedLanes,I=A.pingedLanes,W=A.expirationTimes,J=A.pendingLanes&-62914561;0<J;){var xe=31-ye(J),$e=1<<xe,_t=W[xe];_t===-1?(($e&_)===0||($e&I)!==0)&&(W[xe]=Cn($e,g)):_t<=g&&(A.expiredLanes|=$e),J&=~$e}if(g=hs,_=mo,_=Qn(A,A===g?_:0,A.cancelPendingCommit!==null||A.timeoutHandle!==-1),I=A.callbackNode,_===0||A===g&&(ts===2||ts===9)||A.cancelPendingCommit!==null)return I!==null&&I!==null&&In(I),A.callbackNode=null,A.callbackPriority=0;if((_&3)===0||Xn(A,_)){if(g=_&-_,g===A.callbackPriority)return g;switch(I!==null&&In(I),on(_)){case 2:case 8:_=_e;break;case 32:_=oe;break;case 268435456:_=ne;break;default:_=oe}return I=xC.bind(null,A),_=oi(_,I),A.callbackPriority=g,A.callbackNode=_,g}return I!==null&&I!==null&&In(I),A.callbackPriority=2,A.callbackNode=null,2}function xC(A,g){if(Ml!==0&&Ml!==5)return A.callbackNode=null,A.callbackPriority=0,null;var _=A.callbackNode;if(D0()&&A.callbackNode!==_)return null;var I=mo;return I=Qn(A,A===hs?I:0,A.cancelPendingCommit!==null||A.timeoutHandle!==-1),I===0?null:(Jp(A,I,g),J1(A,$n()),A.callbackNode!=null&&A.callbackNode===_?xC.bind(null,A):null)}function ey(A,g){if(D0())return null;Jp(A,g,!0)}function Fv(){Qv(function(){(Mo&6)!==0?oi(It,r2):K0()})}function $l(){if(gc===0){var A=vl;A===0&&(A=Mt,Mt<<=1,(Mt&261888)===0&&(Mt=256)),gc=A}return gc}function zv(A){return A==null||typeof A=="symbol"||typeof A=="boolean"?null:typeof A=="function"?A:ir(""+A)}function jv(A,g){var _=g.ownerDocument.createElement("input");return _.name=g.name,_.value=g.value,A.id&&_.setAttribute("form",A.id),g.parentNode.insertBefore(_,g),A=new FormData(A),_.parentNode.removeChild(_),A}function of(A,g,_,I,W){if(g==="submit"&&_&&_.stateNode===W){var J=zv((W[gn]||null).action),xe=I.submitter;xe&&(g=(g=xe[gn]||null)?zv(g.formAction):xe.getAttribute("formAction"),g!==null&&(J=g,xe=null));var $e=new On("action","action",null,I,W);A.push({event:$e,listeners:[{instance:null,listener:function(){if(I.defaultPrevented){if(gc!==0){var _t=xe?jv(W,xe):new FormData(W);_l(_,{pending:!0,data:_t,method:W.method,action:J},null,_t)}}else typeof J=="function"&&($e.preventDefault(),_t=xe?jv(W,xe):new FormData(W),_l(_,{pending:!0,data:_t,method:W.method,action:J},J,_t))},currentTarget:W}]})}}for(var _r=0;_r<Pp.length;_r++){var fg=Pp[_r],yc=fg.toLowerCase(),Za=fg[0].toUpperCase()+fg.slice(1);Ul(yc,"on"+Za)}Ul(Pl,"onAnimationEnd"),Ul(Fh,"onAnimationIteration"),Ul(Qm,"onAnimationStart"),Ul("dblclick","onDoubleClick"),Ul("focusin","onFocus"),Ul("focusout","onBlur"),Ul(Dc,"onTransitionRun"),Ul(zh,"onTransitionStart"),Ul(nh,"onTransitionCancel"),Ul(kr,"onTransitionEnd"),Da("onMouseEnter",["mouseout","mouseover"]),Da("onMouseLeave",["mouseout","mouseover"]),Da("onPointerEnter",["pointerout","pointerover"]),Da("onPointerLeave",["pointerout","pointerover"]),jr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),jr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),jr("onBeforeInput",["compositionend","keypress","textInput","paste"]),jr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),jr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),jr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var L0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tp=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(L0));function MC(A,g){g=(g&4)!==0;for(var _=0;_<A.length;_++){var I=A[_],W=I.event;I=I.listeners;e:{var J=void 0;if(g)for(var xe=I.length-1;0<=xe;xe--){var $e=I[xe],_t=$e.instance,$t=$e.currentTarget;if($e=$e.listener,_t!==J&&W.isPropagationStopped())break e;J=$e,W.currentTarget=$t;try{J(W)}catch(ln){wA(ln)}W.currentTarget=null,J=_t}else for(xe=0;xe<I.length;xe++){if($e=I[xe],_t=$e.instance,$t=$e.currentTarget,$e=$e.listener,_t!==J&&W.isPropagationStopped())break e;J=$e,W.currentTarget=$t;try{J(W)}catch(ln){wA(ln)}W.currentTarget=null,J=_t}}}}function co(A,g){var _=g[ni];_===void 0&&(_=g[ni]=new Set);var I=A+"__bubble";_.has(I)||(z0(g,A,2,!1),_.add(I))}function F0(A,g,_){var I=0;g&&(I|=4),z0(_,A,I,g)}var Ch="_reactListening"+Math.random().toString(36).slice(2);function ty(A){if(!A[Ch]){A[Ch]=!0,Zo.forEach(function(_){_!=="selectionchange"&&(tp.has(_)||F0(_,!1,A),F0(_,!0,A))});var g=A.nodeType===9?A:A.ownerDocument;g===null||g[Ch]||(g[Ch]=!0,F0("selectionchange",!1,g))}}function z0(A,g,_,I){switch(wl(g)){case 2:var W=er;break;case 8:W=Di;break;default:W=hi}_=W.bind(null,g,_,A),W=void 0,!ea||g!=="touchstart"&&g!=="touchmove"&&g!=="wheel"||(W=!0),I?W!==void 0?A.addEventListener(g,_,{capture:!0,passive:W}):A.addEventListener(g,_,!0):W!==void 0?A.addEventListener(g,_,{passive:W}):A.addEventListener(g,_,!1)}function ny(A,g,_,I,W){var J=I;if((g&1)===0&&(g&2)===0&&I!==null)e:for(;;){if(I===null)return;var xe=I.tag;if(xe===3||xe===4){var $e=I.stateNode.containerInfo;if($e===W)break;if(xe===4)for(xe=I.return;xe!==null;){var _t=xe.tag;if((_t===3||_t===4)&&xe.stateNode.containerInfo===W)return;xe=xe.return}for(;$e!==null;){if(xe=eo($e),xe===null)return;if(_t=xe.tag,_t===5||_t===6||_t===26||_t===27){I=J=xe;continue e}$e=$e.parentNode}}I=I.return}_o(function(){var $t=J,ln=Rl(_),pn=[];e:{var Xt=p0.get(A);if(Xt!==void 0){var rn=On,Ti=A;switch(A){case"keypress":if(X(_)===0)break e;case"keydown":case"keyup":rn=Dl;break;case"focusin":Ti="focus",rn=Xo;break;case"focusout":Ti="blur",rn=Xo;break;case"beforeblur":case"afterblur":rn=Xo;break;case"click":if(_.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":rn=yr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":rn=rr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":rn=dv;break;case Pl:case Fh:case Qm:rn=Bs;break;case kr:rn=fv;break;case"scroll":case"scrollend":rn=zi;break;case"wheel":rn=If;break;case"copy":case"cut":case"paste":rn=vs;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":rn=h0;break;case"toggle":case"beforetoggle":rn=kf}var lr=(g&4)!==0,Ms=!lr&&(A==="scroll"||A==="scrollend"),Kt=lr?Xt!==null?Xt+"Capture":null:Xt;lr=[];for(var kt=$t,qt;kt!==null;){var hn=kt;if(qt=hn.stateNode,hn=hn.tag,hn!==5&&hn!==26&&hn!==27||qt===null||Kt===null||(hn=Ua(kt,Kt),hn!=null&&lr.push(Yc(kt,hn,qt))),Ms)break;kt=kt.return}0<lr.length&&(Xt=new rn(Xt,Ti,null,_,ln),pn.push({event:Xt,listeners:lr}))}}if((g&7)===0){e:{if(Xt=A==="mouseover"||A==="pointerover",rn=A==="mouseout"||A==="pointerout",Xt&&_!==ko&&(Ti=_.relatedTarget||_.fromElement)&&(eo(Ti)||Ti[Ni]))break e;if((rn||Xt)&&(Xt=ln.window===ln?ln:(Xt=ln.ownerDocument)?Xt.defaultView||Xt.parentWindow:window,rn?(Ti=_.relatedTarget||_.toElement,rn=$t,Ti=Ti?eo(Ti):null,Ti!==null&&(Ms=o(Ti),lr=Ti.tag,Ti!==Ms||lr!==5&&lr!==27&&lr!==6)&&(Ti=null)):(rn=null,Ti=$t),rn!==Ti)){if(lr=yr,hn="onMouseLeave",Kt="onMouseEnter",kt="mouse",(A==="pointerout"||A==="pointerover")&&(lr=h0,hn="onPointerLeave",Kt="onPointerEnter",kt="pointer"),Ms=rn==null?Xt:tu(rn),qt=Ti==null?Xt:tu(Ti),Xt=new lr(hn,kt+"leave",rn,_,ln),Xt.target=Ms,Xt.relatedTarget=qt,hn=null,eo(ln)===$t&&(lr=new lr(Kt,kt+"enter",Ti,_,ln),lr.target=qt,lr.relatedTarget=Ms,hn=lr),Ms=hn,rn&&Ti)t:{for(lr=mg,Kt=rn,kt=Ti,qt=0,hn=Kt;hn;hn=lr(hn))qt++;hn=0;for(var Zi=kt;Zi;Zi=lr(Zi))hn++;for(;0<qt-hn;)Kt=lr(Kt),qt--;for(;0<hn-qt;)kt=lr(kt),hn--;for(;qt--;){if(Kt===kt||kt!==null&&Kt===kt.alternate){lr=Kt;break t}Kt=lr(Kt),kt=lr(kt)}lr=null}else lr=null;rn!==null&&oa(pn,Xt,rn,lr,!1),Ti!==null&&Ms!==null&&oa(pn,Ms,Ti,lr,!0)}}e:{if(Xt=$t?tu($t):window,rn=Xt.nodeName&&Xt.nodeName.toLowerCase(),rn==="select"||rn==="input"&&Xt.type==="file")var jo=Ph;else if(zm(Xt))if(Uh)jo=w1;else{jo=f0;var ri=Rp}else rn=Xt.nodeName,!rn||rn.toLowerCase()!=="input"||Xt.type!=="checkbox"&&Xt.type!=="radio"?$t&&au($t.elementType)&&(jo=Ph):jo=M1;if(jo&&(jo=jo(A,$t))){Bp(pn,jo,_,ln);break e}ri&&ri(A,Xt,$t),A==="focusout"&&$t&&Xt.type==="number"&&$t.memoizedProps.value!=null&&ru(Xt,"number",Xt.value)}switch(ri=$t?tu($t):window,A){case"focusin":(zm(ri)||ri.contentEditable==="true")&&(Ut=ri,sn=$t,nn=null);break;case"focusout":nn=sn=Ut=null;break;case"mousedown":mi=!0;break;case"contextmenu":case"mouseup":case"dragend":mi=!1,vr(pn,_,ln);break;case"selectionchange":if(Lh)break;case"keydown":case"keyup":vr(pn,_,ln)}var tr;if(Eu)e:{switch(A){case"compositionstart":var Kr="onCompositionStart";break e;case"compositionend":Kr="onCompositionEnd";break e;case"compositionupdate":Kr="onCompositionUpdate";break e}Kr=void 0}else Rc?Pd(A,_)&&(Kr="onCompositionEnd"):A==="keydown"&&_.keyCode===229&&(Kr="onCompositionStart");Kr&&(Dh&&_.locale!=="ko"&&(Rc||Kr!=="onCompositionStart"?Kr==="onCompositionEnd"&&Rc&&(tr=Ai()):(Ka=ln,Nr="value"in Ka?Ka.value:Ka.textContent,Rc=!0)),ri=pg($t,Kr),0<ri.length&&(Kr=new rc(Kr,A,null,_,ln),pn.push({event:Kr,listeners:ri}),tr?Kr.data=tr:(tr=x1(_),tr!==null&&(Kr.data=tr)))),(tr=Ep?Ou(A,_):Op(A,_))&&(Kr=pg($t,"onBeforeInput"),0<Kr.length&&(ri=new rc("onBeforeInput","beforeinput",null,_,ln),pn.push({event:ri,listeners:Kr}),ri.data=tr)),of(pn,A,$t,_,ln)}MC(pn,g)})}function Yc(A,g,_){return{instance:A,listener:g,currentTarget:_}}function pg(A,g){for(var _=g+"Capture",I=[];A!==null;){var W=A,J=W.stateNode;if(W=W.tag,W!==5&&W!==26&&W!==27||J===null||(W=Ua(A,_),W!=null&&I.unshift(Yc(A,W,J)),W=Ua(A,g),W!=null&&I.push(Yc(A,W,J))),A.tag===3)return I;A=A.return}return[]}function mg(A){if(A===null)return null;do A=A.return;while(A&&A.tag!==5&&A.tag!==27);return A||null}function oa(A,g,_,I,W){for(var J=g._reactName,xe=[];_!==null&&_!==I;){var $e=_,_t=$e.alternate,$t=$e.stateNode;if($e=$e.tag,_t!==null&&_t===I)break;$e!==5&&$e!==26&&$e!==27||$t===null||(_t=$t,W?($t=Ua(_,J),$t!=null&&xe.unshift(Yc(_,$t,_t))):W||($t=Ua(_,J),$t!=null&&xe.push(Yc(_,$t,_t)))),_=_.return}xe.length!==0&&A.push({event:g,listeners:xe})}var Ws=/\r\n?/g,Nv=/\u0000|\uFFFD/g;function iy(A){return(typeof A=="string"?A:""+A).replace(Ws,`
`).replace(Nv,"")}function Gv(A,g){return g=iy(g),iy(A)===g}function qr(A,g,_,I,W,J){switch(_){case"children":typeof I=="string"?g==="body"||g==="textarea"&&I===""||wo(A,I):(typeof I=="number"||typeof I=="bigint")&&g!=="body"&&wo(A,""+I);break;case"className":tc(A,"class",I);break;case"tabIndex":tc(A,"tabindex",I);break;case"dir":case"role":case"viewBox":case"width":case"height":tc(A,_,I);break;case"style":Ui(A,I,J);break;case"data":if(g!=="object"){tc(A,"data",I);break}case"src":case"href":if(I===""&&(g!=="a"||_!=="href")){A.removeAttribute(_);break}if(I==null||typeof I=="function"||typeof I=="symbol"||typeof I=="boolean"){A.removeAttribute(_);break}I=ir(""+I),A.setAttribute(_,I);break;case"action":case"formAction":if(typeof I=="function"){A.setAttribute(_,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof J=="function"&&(_==="formAction"?(g!=="input"&&qr(A,g,"name",W.name,W,null),qr(A,g,"formEncType",W.formEncType,W,null),qr(A,g,"formMethod",W.formMethod,W,null),qr(A,g,"formTarget",W.formTarget,W,null)):(qr(A,g,"encType",W.encType,W,null),qr(A,g,"method",W.method,W,null),qr(A,g,"target",W.target,W,null)));if(I==null||typeof I=="symbol"||typeof I=="boolean"){A.removeAttribute(_);break}I=ir(""+I),A.setAttribute(_,I);break;case"onClick":I!=null&&(A.onclick=Pa);break;case"onScroll":I!=null&&co("scroll",A);break;case"onScrollEnd":I!=null&&co("scrollend",A);break;case"dangerouslySetInnerHTML":if(I!=null){if(typeof I!="object"||!("__html"in I))throw Error(i(61));if(_=I.__html,_!=null){if(W.children!=null)throw Error(i(60));A.innerHTML=_}}break;case"multiple":A.multiple=I&&typeof I!="function"&&typeof I!="symbol";break;case"muted":A.muted=I&&typeof I!="function"&&typeof I!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(I==null||typeof I=="function"||typeof I=="boolean"||typeof I=="symbol"){A.removeAttribute("xlink:href");break}_=ir(""+I),A.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",_);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":I!=null&&typeof I!="function"&&typeof I!="symbol"?A.setAttribute(_,""+I):A.removeAttribute(_);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":I&&typeof I!="function"&&typeof I!="symbol"?A.setAttribute(_,""):A.removeAttribute(_);break;case"capture":case"download":I===!0?A.setAttribute(_,""):I!==!1&&I!=null&&typeof I!="function"&&typeof I!="symbol"?A.setAttribute(_,I):A.removeAttribute(_);break;case"cols":case"rows":case"size":case"span":I!=null&&typeof I!="function"&&typeof I!="symbol"&&!isNaN(I)&&1<=I?A.setAttribute(_,I):A.removeAttribute(_);break;case"rowSpan":case"start":I==null||typeof I=="function"||typeof I=="symbol"||isNaN(I)?A.removeAttribute(_):A.setAttribute(_,I);break;case"popover":co("beforetoggle",A),co("toggle",A),oA(A,"popover",I);break;case"xlinkActuate":gl(A,"http://www.w3.org/1999/xlink","xlink:actuate",I);break;case"xlinkArcrole":gl(A,"http://www.w3.org/1999/xlink","xlink:arcrole",I);break;case"xlinkRole":gl(A,"http://www.w3.org/1999/xlink","xlink:role",I);break;case"xlinkShow":gl(A,"http://www.w3.org/1999/xlink","xlink:show",I);break;case"xlinkTitle":gl(A,"http://www.w3.org/1999/xlink","xlink:title",I);break;case"xlinkType":gl(A,"http://www.w3.org/1999/xlink","xlink:type",I);break;case"xmlBase":gl(A,"http://www.w3.org/XML/1998/namespace","xml:base",I);break;case"xmlLang":gl(A,"http://www.w3.org/XML/1998/namespace","xml:lang",I);break;case"xmlSpace":gl(A,"http://www.w3.org/XML/1998/namespace","xml:space",I);break;case"is":oA(A,"is",I);break;case"innerText":case"textContent":break;default:(!(2<_.length)||_[0]!=="o"&&_[0]!=="O"||_[1]!=="n"&&_[1]!=="N")&&(_=aa.get(_)||_,oA(A,_,I))}}function np(A,g,_,I,W,J){switch(_){case"style":Ui(A,I,J);break;case"dangerouslySetInnerHTML":if(I!=null){if(typeof I!="object"||!("__html"in I))throw Error(i(61));if(_=I.__html,_!=null){if(W.children!=null)throw Error(i(60));A.innerHTML=_}}break;case"children":typeof I=="string"?wo(A,I):(typeof I=="number"||typeof I=="bigint")&&wo(A,""+I);break;case"onScroll":I!=null&&co("scroll",A);break;case"onScrollEnd":I!=null&&co("scrollend",A);break;case"onClick":I!=null&&(A.onclick=Pa);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!gs.hasOwnProperty(_))e:{if(_[0]==="o"&&_[1]==="n"&&(W=_.endsWith("Capture"),g=_.slice(2,W?_.length-7:void 0),J=A[gn]||null,J=J!=null?J[_]:null,typeof J=="function"&&A.removeEventListener(g,J,W),typeof I=="function")){typeof J!="function"&&J!==null&&(_ in A?A[_]=null:A.hasAttribute(_)&&A.removeAttribute(_)),A.addEventListener(g,I,W);break e}_ in A?A[_]=I:I===!0?A.setAttribute(_,""):oA(A,_,I)}}}function Xa(A,g,_){switch(g){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":co("error",A),co("load",A);var I=!1,W=!1,J;for(J in _)if(_.hasOwnProperty(J)){var xe=_[J];if(xe!=null)switch(J){case"src":I=!0;break;case"srcSet":W=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,g));default:qr(A,g,J,xe,_,null)}}W&&qr(A,g,"srcSet",_.srcSet,_,null),I&&qr(A,g,"src",_.src,_,null);return;case"input":co("invalid",A);var $e=J=xe=W=null,_t=null,$t=null;for(I in _)if(_.hasOwnProperty(I)){var ln=_[I];if(ln!=null)switch(I){case"name":W=ln;break;case"type":xe=ln;break;case"checked":_t=ln;break;case"defaultChecked":$t=ln;break;case"value":J=ln;break;case"defaultValue":$e=ln;break;case"children":case"dangerouslySetInnerHTML":if(ln!=null)throw Error(i(137,g));break;default:qr(A,g,I,ln,_,null)}}wu(A,J,$e,_t,$t,xe,W,!1);return;case"select":co("invalid",A),I=xe=J=null;for(W in _)if(_.hasOwnProperty(W)&&($e=_[W],$e!=null))switch(W){case"value":J=$e;break;case"defaultValue":xe=$e;break;case"multiple":I=$e;default:qr(A,g,W,$e,_,null)}g=J,_=xe,A.multiple=!!I,g!=null?ou(A,!!I,g,!1):_!=null&&ou(A,!!I,_,!0);return;case"textarea":co("invalid",A),J=W=I=null;for(xe in _)if(_.hasOwnProperty(xe)&&($e=_[xe],$e!=null))switch(xe){case"value":I=$e;break;case"defaultValue":W=$e;break;case"children":J=$e;break;case"dangerouslySetInnerHTML":if($e!=null)throw Error(i(91));break;default:qr(A,g,xe,$e,_,null)}Es(A,I,W,J);return;case"option":for(_t in _)if(_.hasOwnProperty(_t)&&(I=_[_t],I!=null))switch(_t){case"selected":A.selected=I&&typeof I!="function"&&typeof I!="symbol";break;default:qr(A,g,_t,I,_,null)}return;case"dialog":co("beforetoggle",A),co("toggle",A),co("cancel",A),co("close",A);break;case"iframe":case"object":co("load",A);break;case"video":case"audio":for(I=0;I<L0.length;I++)co(L0[I],A);break;case"image":co("error",A),co("load",A);break;case"details":co("toggle",A);break;case"embed":case"source":case"link":co("error",A),co("load",A);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for($t in _)if(_.hasOwnProperty($t)&&(I=_[$t],I!=null))switch($t){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,g));default:qr(A,g,$t,I,_,null)}return;default:if(au(g)){for(ln in _)_.hasOwnProperty(ln)&&(I=_[ln],I!==void 0&&np(A,g,ln,I,_,void 0));return}}for($e in _)_.hasOwnProperty($e)&&(I=_[$e],I!=null&&qr(A,g,$e,I,_,null))}function nm(A,g,_,I){switch(g){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var W=null,J=null,xe=null,$e=null,_t=null,$t=null,ln=null;for(rn in _){var pn=_[rn];if(_.hasOwnProperty(rn)&&pn!=null)switch(rn){case"checked":break;case"value":break;case"defaultValue":_t=pn;default:I.hasOwnProperty(rn)||qr(A,g,rn,null,I,pn)}}for(var Xt in I){var rn=I[Xt];if(pn=_[Xt],I.hasOwnProperty(Xt)&&(rn!=null||pn!=null))switch(Xt){case"type":J=rn;break;case"name":W=rn;break;case"checked":$t=rn;break;case"defaultChecked":ln=rn;break;case"value":xe=rn;break;case"defaultValue":$e=rn;break;case"children":case"dangerouslySetInnerHTML":if(rn!=null)throw Error(i(137,g));break;default:rn!==pn&&qr(A,g,Xt,rn,I,pn)}}Tc(A,xe,$e,_t,$t,ln,J,W);return;case"select":rn=xe=$e=Xt=null;for(J in _)if(_t=_[J],_.hasOwnProperty(J)&&_t!=null)switch(J){case"value":break;case"multiple":rn=_t;default:I.hasOwnProperty(J)||qr(A,g,J,null,I,_t)}for(W in I)if(J=I[W],_t=_[W],I.hasOwnProperty(W)&&(J!=null||_t!=null))switch(W){case"value":Xt=J;break;case"defaultValue":$e=J;break;case"multiple":xe=J;default:J!==_t&&qr(A,g,W,J,I,_t)}g=$e,_=xe,I=rn,Xt!=null?ou(A,!!_,Xt,!1):!!I!=!!_&&(g!=null?ou(A,!!_,g,!0):ou(A,!!_,_?[]:"",!1));return;case"textarea":rn=Xt=null;for($e in _)if(W=_[$e],_.hasOwnProperty($e)&&W!=null&&!I.hasOwnProperty($e))switch($e){case"value":break;case"children":break;default:qr(A,g,$e,null,I,W)}for(xe in I)if(W=I[xe],J=_[xe],I.hasOwnProperty(xe)&&(W!=null||J!=null))switch(xe){case"value":Xt=W;break;case"defaultValue":rn=W;break;case"children":break;case"dangerouslySetInnerHTML":if(W!=null)throw Error(i(91));break;default:W!==J&&qr(A,g,xe,W,I,J)}su(A,Xt,rn);return;case"option":for(var Ti in _)if(Xt=_[Ti],_.hasOwnProperty(Ti)&&Xt!=null&&!I.hasOwnProperty(Ti))switch(Ti){case"selected":A.selected=!1;break;default:qr(A,g,Ti,null,I,Xt)}for(_t in I)if(Xt=I[_t],rn=_[_t],I.hasOwnProperty(_t)&&Xt!==rn&&(Xt!=null||rn!=null))switch(_t){case"selected":A.selected=Xt&&typeof Xt!="function"&&typeof Xt!="symbol";break;default:qr(A,g,_t,Xt,I,rn)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var lr in _)Xt=_[lr],_.hasOwnProperty(lr)&&Xt!=null&&!I.hasOwnProperty(lr)&&qr(A,g,lr,null,I,Xt);for($t in I)if(Xt=I[$t],rn=_[$t],I.hasOwnProperty($t)&&Xt!==rn&&(Xt!=null||rn!=null))switch($t){case"children":case"dangerouslySetInnerHTML":if(Xt!=null)throw Error(i(137,g));break;default:qr(A,g,$t,Xt,I,rn)}return;default:if(au(g)){for(var Ms in _)Xt=_[Ms],_.hasOwnProperty(Ms)&&Xt!==void 0&&!I.hasOwnProperty(Ms)&&np(A,g,Ms,void 0,I,Xt);for(ln in I)Xt=I[ln],rn=_[ln],!I.hasOwnProperty(ln)||Xt===rn||Xt===void 0&&rn===void 0||np(A,g,ln,Xt,I,rn);return}}for(var Kt in _)Xt=_[Kt],_.hasOwnProperty(Kt)&&Xt!=null&&!I.hasOwnProperty(Kt)&&qr(A,g,Kt,null,I,Xt);for(pn in I)Xt=I[pn],rn=_[pn],!I.hasOwnProperty(pn)||Xt===rn||Xt==null&&rn==null||qr(A,g,pn,Xt,I,rn)}function ry(A){switch(A){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function gg(){if(typeof performance.getEntriesByType=="function"){for(var A=0,g=0,_=performance.getEntriesByType("resource"),I=0;I<_.length;I++){var W=_[I],J=W.transferSize,xe=W.initiatorType,$e=W.duration;if(J&&$e&&ry(xe)){for(xe=0,$e=W.responseEnd,I+=1;I<_.length;I++){var _t=_[I],$t=_t.startTime;if($t>$e)break;var ln=_t.transferSize,pn=_t.initiatorType;ln&&ry(pn)&&(_t=_t.responseEnd,xe+=ln*(_t<$e?1:($e-$t)/(_t-$t)))}if(--I,g+=8*(J+xe)/(W.duration/1e3),A++,10<A)break}}if(0<A)return g/A/1e6}return navigator.connection&&(A=navigator.connection.downlink,typeof A=="number")?A:5}var yg=null,oy=null;function j0(A){return A.nodeType===9?A:A.ownerDocument}function vg(A){switch(A){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ja(A,g){if(A===0)switch(g){case"svg":return 1;case"math":return 2;default:return 0}return A===1&&g==="foreignObject"?0:A}function sf(A,g){return A==="textarea"||A==="noscript"||typeof g.children=="string"||typeof g.children=="number"||typeof g.children=="bigint"||typeof g.dangerouslySetInnerHTML=="object"&&g.dangerouslySetInnerHTML!==null&&g.dangerouslySetInnerHTML.__html!=null}var sy=null;function wC(){var A=window.event;return A&&A.type==="popstate"?A===sy?!1:(sy=A,!0):(sy=null,!1)}var Wv=typeof setTimeout=="function"?setTimeout:void 0,o2=typeof clearTimeout=="function"?clearTimeout:void 0,SC=typeof Promise=="function"?Promise:void 0,Qv=typeof queueMicrotask=="function"?queueMicrotask:typeof SC<"u"?function(A){return SC.resolve(null).then(A).catch(ud)}:Wv;function ud(A){setTimeout(function(){throw A})}function ar(A){return A==="head"}function ay(A,g){var _=g,I=0;do{var W=_.nextSibling;if(A.removeChild(_),W&&W.nodeType===8)if(_=W.data,_==="/$"||_==="/&"){if(I===0){A.removeChild(W),Qu(g);return}I--}else if(_==="$"||_==="$?"||_==="$~"||_==="$!"||_==="&")I++;else if(_==="html")bg(A.ownerDocument.documentElement);else if(_==="head"){_=A.ownerDocument.head,bg(_);for(var J=_.firstChild;J;){var xe=J.nextSibling,$e=J.nodeName;J[Pi]||$e==="SCRIPT"||$e==="STYLE"||$e==="LINK"&&J.rel.toLowerCase()==="stylesheet"||_.removeChild(J),J=xe}}else _==="body"&&bg(A.ownerDocument.body);_=W}while(_);Qu(g)}function ju(A,g){var _=A;A=0;do{var I=_.nextSibling;if(_.nodeType===1?g?(_._stashedDisplay=_.style.display,_.style.display="none"):(_.style.display=_._stashedDisplay||"",_.getAttribute("style")===""&&_.removeAttribute("style")):_.nodeType===3&&(g?(_._stashedText=_.nodeValue,_.nodeValue=""):_.nodeValue=_._stashedText||""),I&&I.nodeType===8)if(_=I.data,_==="/$"){if(A===0)break;A--}else _!=="$"&&_!=="$?"&&_!=="$~"&&_!=="$!"||A++;_=I}while(_)}function im(A){var g=A.firstChild;for(g&&g.nodeType===10&&(g=g.nextSibling);g;){var _=g;switch(g=g.nextSibling,_.nodeName){case"HTML":case"HEAD":case"BODY":im(_),kl(_);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(_.rel.toLowerCase()==="stylesheet")continue}A.removeChild(_)}}function ly(A,g,_,I){for(;A.nodeType===1;){var W=_;if(A.nodeName.toLowerCase()!==g.toLowerCase()){if(!I&&(A.nodeName!=="INPUT"||A.type!=="hidden"))break}else if(I){if(!A[Pi])switch(g){case"meta":if(!A.hasAttribute("itemprop"))break;return A;case"link":if(J=A.getAttribute("rel"),J==="stylesheet"&&A.hasAttribute("data-precedence"))break;if(J!==W.rel||A.getAttribute("href")!==(W.href==null||W.href===""?null:W.href)||A.getAttribute("crossorigin")!==(W.crossOrigin==null?null:W.crossOrigin)||A.getAttribute("title")!==(W.title==null?null:W.title))break;return A;case"style":if(A.hasAttribute("data-precedence"))break;return A;case"script":if(J=A.getAttribute("src"),(J!==(W.src==null?null:W.src)||A.getAttribute("type")!==(W.type==null?null:W.type)||A.getAttribute("crossorigin")!==(W.crossOrigin==null?null:W.crossOrigin))&&J&&A.hasAttribute("async")&&!A.hasAttribute("itemprop"))break;return A;default:return A}}else if(g==="input"&&A.type==="hidden"){var J=W.name==null?null:""+W.name;if(W.type==="hidden"&&A.getAttribute("name")===J)return A}else return A;if(A=$c(A.nextSibling),A===null)break}return null}function ns(A,g,_){if(g==="")return null;for(;A.nodeType!==3;)if((A.nodeType!==1||A.nodeName!=="INPUT"||A.type!=="hidden")&&!_||(A=$c(A.nextSibling),A===null))return null;return A}function EC(A,g){for(;A.nodeType!==8;)if((A.nodeType!==1||A.nodeName!=="INPUT"||A.type!=="hidden")&&!g||(A=$c(A.nextSibling),A===null))return null;return A}function uy(A){return A.data==="$?"||A.data==="$~"}function _h(A){return A.data==="$!"||A.data==="$?"&&A.ownerDocument.readyState!=="loading"}function Vl(A,g){var _=A.ownerDocument;if(A.data==="$~")A._reactRetry=g;else if(A.data!=="$?"||_.readyState!=="loading")g();else{var I=function(){g(),_.removeEventListener("DOMContentLoaded",I)};_.addEventListener("DOMContentLoaded",I),A._reactRetry=I}}function $c(A){for(;A!=null;A=A.nextSibling){var g=A.nodeType;if(g===1||g===3)break;if(g===8){if(g=A.data,g==="$"||g==="$!"||g==="$?"||g==="$~"||g==="&"||g==="F!"||g==="F")break;if(g==="/$"||g==="/&")return null}}return A}var cy=null;function qv(A){A=A.nextSibling;for(var g=0;A;){if(A.nodeType===8){var _=A.data;if(_==="/$"||_==="/&"){if(g===0)return $c(A.nextSibling);g--}else _!=="$"&&_!=="$!"&&_!=="$?"&&_!=="$~"&&_!=="&"||g++}A=A.nextSibling}return null}function Ay(A){A=A.previousSibling;for(var g=0;A;){if(A.nodeType===8){var _=A.data;if(_==="$"||_==="$!"||_==="$?"||_==="$~"||_==="&"){if(g===0)return A;g--}else _!=="/$"&&_!=="/&"||g++}A=A.previousSibling}return null}function OC(A,g,_){switch(g=j0(_),A){case"html":if(A=g.documentElement,!A)throw Error(i(452));return A;case"head":if(A=g.head,!A)throw Error(i(453));return A;case"body":if(A=g.body,!A)throw Error(i(454));return A;default:throw Error(i(451))}}function bg(A){for(var g=A.attributes;g.length;)A.removeAttributeNode(g[0]);kl(A)}var mA=new Map,BC=new Set;function N0(A){return typeof A.getRootNode=="function"?A.getRootNode():A.nodeType===9?A:A.ownerDocument}var xh=qe.d;qe.d={f:Yv,r:IC,D:dy,C:$v,L:fy,m:G0,X:Nu,S:hl,M:Vv};function Yv(){var A=xh.f(),g=q1();return A||g}function IC(A){var g=ya(A);g!==null&&g.tag===5&&g.type==="form"?fu(g):xh.r(A)}var FA=typeof document>"u"?null:document;function hy(A,g,_){var I=FA;if(I&&typeof g=="string"&&g){var W=Ss(g);W='link[rel="'+A+'"][href="'+W+'"]',typeof _=="string"&&(W+='[crossorigin="'+_+'"]'),BC.has(W)||(BC.add(W),A={rel:A,crossOrigin:_,href:g},I.querySelector(W)===null&&(g=I.createElement("link"),Xa(g,"link",A),Ko(g),I.head.appendChild(g)))}}function dy(A){xh.D(A),hy("dns-prefetch",A,null)}function $v(A,g){xh.C(A,g),hy("preconnect",A,g)}function fy(A,g,_){xh.L(A,g,_);var I=FA;if(I&&A&&g){var W='link[rel="preload"][as="'+Ss(g)+'"]';g==="image"&&_&&_.imageSrcSet?(W+='[imagesrcset="'+Ss(_.imageSrcSet)+'"]',typeof _.imageSizes=="string"&&(W+='[imagesizes="'+Ss(_.imageSizes)+'"]')):W+='[href="'+Ss(A)+'"]';var J=W;switch(g){case"style":J=f(A);break;case"script":J=w(A)}mA.has(J)||(A=y({rel:"preload",href:g==="image"&&_&&_.imageSrcSet?void 0:A,as:g},_),mA.set(J,A),I.querySelector(W)!==null||g==="style"&&I.querySelector(u(J))||g==="script"&&I.querySelector(k(J))||(g=I.createElement("link"),Xa(g,"link",A),Ko(g),I.head.appendChild(g)))}}function G0(A,g){xh.m(A,g);var _=FA;if(_&&A){var I=g&&typeof g.as=="string"?g.as:"script",W='link[rel="modulepreload"][as="'+Ss(I)+'"][href="'+Ss(A)+'"]',J=W;switch(I){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":J=w(A)}if(!mA.has(J)&&(A=y({rel:"modulepreload",href:A},g),mA.set(J,A),_.querySelector(W)===null)){switch(I){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(_.querySelector(k(J)))return}I=_.createElement("link"),Xa(I,"link",A),Ko(I),_.head.appendChild(I)}}}function hl(A,g,_){xh.S(A,g,_);var I=FA;if(I&&A){var W=Xs(I).hoistableStyles,J=f(A);g=g||"default";var xe=W.get(J);if(!xe){var $e={loading:0,preload:null};if(xe=I.querySelector(u(J)))$e.loading=5;else{A=y({rel:"stylesheet",href:A,"data-precedence":g},_),(_=mA.get(J))&&N(A,_);var _t=xe=I.createElement("link");Ko(_t),Xa(_t,"link",A),_t._p=new Promise(function($t,ln){_t.onload=$t,_t.onerror=ln}),_t.addEventListener("load",function(){$e.loading|=1}),_t.addEventListener("error",function(){$e.loading|=2}),$e.loading|=4,K(xe,g,I)}xe={type:"stylesheet",instance:xe,count:1,state:$e},W.set(J,xe)}}}function Nu(A,g){xh.X(A,g);var _=FA;if(_&&A){var I=Xs(_).hoistableScripts,W=w(A),J=I.get(W);J||(J=_.querySelector(k(W)),J||(A=y({src:A,async:!0},g),(g=mA.get(W))&&te(A,g),J=_.createElement("script"),Ko(J),Xa(J,"link",A),_.head.appendChild(J)),J={type:"script",instance:J,count:1,state:null},I.set(W,J))}}function Vv(A,g){xh.M(A,g);var _=FA;if(_&&A){var I=Xs(_).hoistableScripts,W=w(A),J=I.get(W);J||(J=_.querySelector(k(W)),J||(A=y({src:A,async:!0,type:"module"},g),(g=mA.get(W))&&te(A,g),J=_.createElement("script"),Ko(J),Xa(J,"link",A),_.head.appendChild(J)),J={type:"script",instance:J,count:1,state:null},I.set(W,J))}}function kC(A,g,_,I){var W=(W=bt.current)?N0(W):null;if(!W)throw Error(i(446));switch(A){case"meta":case"title":return null;case"style":return typeof _.precedence=="string"&&typeof _.href=="string"?(g=f(_.href),_=Xs(W).hoistableStyles,I=_.get(g),I||(I={type:"style",instance:null,count:0,state:null},_.set(g,I)),I):{type:"void",instance:null,count:0,state:null};case"link":if(_.rel==="stylesheet"&&typeof _.href=="string"&&typeof _.precedence=="string"){A=f(_.href);var J=Xs(W).hoistableStyles,xe=J.get(A);if(xe||(W=W.ownerDocument||W,xe={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},J.set(A,xe),(J=W.querySelector(u(A)))&&!J._p&&(xe.instance=J,xe.state.loading=5),mA.has(A)||(_={rel:"preload",as:"style",href:_.href,crossOrigin:_.crossOrigin,integrity:_.integrity,media:_.media,hrefLang:_.hrefLang,referrerPolicy:_.referrerPolicy},mA.set(A,_),J||b(W,A,_,xe.state))),g&&I===null)throw Error(i(528,""));return xe}if(g&&I!==null)throw Error(i(529,""));return null;case"script":return g=_.async,_=_.src,typeof _=="string"&&g&&typeof g!="function"&&typeof g!="symbol"?(g=w(_),_=Xs(W).hoistableScripts,I=_.get(g),I||(I={type:"script",instance:null,count:0,state:null},_.set(g,I)),I):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,A))}}function f(A){return'href="'+Ss(A)+'"'}function u(A){return'link[rel="stylesheet"]['+A+"]"}function d(A){return y({},A,{"data-precedence":A.precedence,precedence:null})}function b(A,g,_,I){A.querySelector('link[rel="preload"][as="style"]['+g+"]")?I.loading=1:(g=A.createElement("link"),I.preload=g,g.addEventListener("load",function(){return I.loading|=1}),g.addEventListener("error",function(){return I.loading|=2}),Xa(g,"link",_),Ko(g),A.head.appendChild(g))}function w(A){return'[src="'+Ss(A)+'"]'}function k(A){return"script[async]"+A}function D(A,g,_){if(g.count++,g.instance===null)switch(g.type){case"style":var I=A.querySelector('style[data-href~="'+Ss(_.href)+'"]');if(I)return g.instance=I,Ko(I),I;var W=y({},_,{"data-href":_.href,"data-precedence":_.precedence,href:null,precedence:null});return I=(A.ownerDocument||A).createElement("style"),Ko(I),Xa(I,"style",W),K(I,_.precedence,A),g.instance=I;case"stylesheet":W=f(_.href);var J=A.querySelector(u(W));if(J)return g.state.loading|=4,g.instance=J,Ko(J),J;I=d(_),(W=mA.get(W))&&N(I,W),J=(A.ownerDocument||A).createElement("link"),Ko(J);var xe=J;return xe._p=new Promise(function($e,_t){xe.onload=$e,xe.onerror=_t}),Xa(J,"link",I),g.state.loading|=4,K(J,_.precedence,A),g.instance=J;case"script":return J=w(_.src),(W=A.querySelector(k(J)))?(g.instance=W,Ko(W),W):(I=_,(W=mA.get(J))&&(I=y({},_),te(I,W)),A=A.ownerDocument||A,W=A.createElement("script"),Ko(W),Xa(W,"link",I),A.head.appendChild(W),g.instance=W);case"void":return null;default:throw Error(i(443,g.type))}else g.type==="stylesheet"&&(g.state.loading&4)===0&&(I=g.instance,g.state.loading|=4,K(I,_.precedence,A));return g.instance}function K(A,g,_){for(var I=_.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),W=I.length?I[I.length-1]:null,J=W,xe=0;xe<I.length;xe++){var $e=I[xe];if($e.dataset.precedence===g)J=$e;else if(J!==W)break}J?J.parentNode.insertBefore(A,J.nextSibling):(g=_.nodeType===9?_.head:_,g.insertBefore(A,g.firstChild))}function N(A,g){A.crossOrigin==null&&(A.crossOrigin=g.crossOrigin),A.referrerPolicy==null&&(A.referrerPolicy=g.referrerPolicy),A.title==null&&(A.title=g.title)}function te(A,g){A.crossOrigin==null&&(A.crossOrigin=g.crossOrigin),A.referrerPolicy==null&&(A.referrerPolicy=g.referrerPolicy),A.integrity==null&&(A.integrity=g.integrity)}var re=null;function Ae(A,g,_){if(re===null){var I=new Map,W=re=new Map;W.set(_,I)}else W=re,I=W.get(_),I||(I=new Map,W.set(_,I));if(I.has(A))return I;for(I.set(A,null),_=_.getElementsByTagName(A),W=0;W<_.length;W++){var J=_[W];if(!(J[Pi]||J[gr]||A==="link"&&J.getAttribute("rel")==="stylesheet")&&J.namespaceURI!=="http://www.w3.org/2000/svg"){var xe=J.getAttribute(g)||"";xe=A+xe;var $e=I.get(xe);$e?$e.push(J):I.set(xe,[J])}}return I}function Oe(A,g,_){A=A.ownerDocument||A,A.head.insertBefore(_,g==="title"?A.querySelector("head > title"):null)}function De(A,g,_){if(_===1||g.itemProp!=null)return!1;switch(A){case"meta":case"title":return!0;case"style":if(typeof g.precedence!="string"||typeof g.href!="string"||g.href==="")break;return!0;case"link":if(typeof g.rel!="string"||typeof g.href!="string"||g.href===""||g.onLoad||g.onError)break;switch(g.rel){case"stylesheet":return A=g.disabled,typeof g.precedence=="string"&&A==null;default:return!0}case"script":if(g.async&&typeof g.async!="function"&&typeof g.async!="symbol"&&!g.onLoad&&!g.onError&&g.src&&typeof g.src=="string")return!0}return!1}function Ue(A){return!(A.type==="stylesheet"&&(A.state.loading&3)===0)}function Ge(A,g,_,I){if(_.type==="stylesheet"&&(typeof I.media!="string"||matchMedia(I.media).matches!==!1)&&(_.state.loading&4)===0){if(_.instance===null){var W=f(I.href),J=g.querySelector(u(W));if(J){g=J._p,g!==null&&typeof g=="object"&&typeof g.then=="function"&&(A.count++,A=Tt.bind(A),g.then(A,A)),_.state.loading|=4,_.instance=J,Ko(J);return}J=g.ownerDocument||g,I=d(I),(W=mA.get(W))&&N(I,W),J=J.createElement("link"),Ko(J);var xe=J;xe._p=new Promise(function($e,_t){xe.onload=$e,xe.onerror=_t}),Xa(J,"link",I),_.instance=J}A.stylesheets===null&&(A.stylesheets=new Map),A.stylesheets.set(_,g),(g=_.state.preload)&&(_.state.loading&3)===0&&(A.count++,_=Tt.bind(A),g.addEventListener("load",_),g.addEventListener("error",_))}}var He=0;function st(A,g){return A.stylesheets&&A.count===0&&Ct(A,A.stylesheets),0<A.count||0<A.imgCount?function(_){var I=setTimeout(function(){if(A.stylesheets&&Ct(A,A.stylesheets),A.unsuspend){var J=A.unsuspend;A.unsuspend=null,J()}},6e4+g);0<A.imgBytes&&He===0&&(He=62500*gg());var W=setTimeout(function(){if(A.waitingForImages=!1,A.count===0&&(A.stylesheets&&Ct(A,A.stylesheets),A.unsuspend)){var J=A.unsuspend;A.unsuspend=null,J()}},(A.imgBytes>He?50:800)+g);return A.unsuspend=_,function(){A.unsuspend=null,clearTimeout(I),clearTimeout(W)}}:null}function Tt(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ct(this,this.stylesheets);else if(this.unsuspend){var A=this.unsuspend;this.unsuspend=null,A()}}}var dt=null;function Ct(A,g){A.stylesheets=null,A.unsuspend!==null&&(A.count++,dt=new Map,g.forEach(jt,A),dt=null,Tt.call(A))}function jt(A,g){if(!(g.state.loading&4)){var _=dt.get(A);if(_)var I=_.get(null);else{_=new Map,dt.set(A,_);for(var W=A.querySelectorAll("link[data-precedence],style[data-precedence]"),J=0;J<W.length;J++){var xe=W[J];(xe.nodeName==="LINK"||xe.getAttribute("media")!=="not all")&&(_.set(xe.dataset.precedence,xe),I=xe)}I&&_.set(null,I)}W=g.instance,xe=W.getAttribute("data-precedence"),J=_.get(xe)||I,J===I&&_.set(null,W),_.set(xe,W),this.count++,I=Tt.bind(this),W.addEventListener("load",I),W.addEventListener("error",I),J?J.parentNode.insertBefore(W,J.nextSibling):(A=A.nodeType===9?A.head:A,A.insertBefore(W,A.firstChild)),g.state.loading|=4}}var Zt={$$typeof:V,Provider:null,Consumer:null,_currentValue:tt,_currentValue2:tt,_threadCount:0};function fn(A,g,_,I,W,J,xe,$e,_t){this.tag=1,this.containerInfo=A,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=pi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pi(0),this.hiddenUpdates=pi(null),this.identifierPrefix=I,this.onUncaughtError=W,this.onCaughtError=J,this.onRecoverableError=xe,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=_t,this.incompleteTransitions=new Map}function Wn(A,g,_,I,W,J,xe,$e,_t,$t,ln,pn){return A=new fn(A,g,_,xe,_t,$t,ln,pn,$e),g=1,J===!0&&(g|=24),J=yl(3,null,null,g),A.current=J,J.stateNode=A,g=cc(),g.refCount++,A.pooledCache=g,g.refCount++,J.memoizedState={element:I,isDehydrated:_,cache:g},bl(J),A}function Kn(A){return A?(A=hr,A):hr}function Nn(A,g,_,I,W,J){W=Kn(W),I.context===null?I.context=W:I.pendingContext=W,I=dh(g),I.payload={element:_},J=J===void 0?null:J,J!==null&&(I.callback=J),_=hu(A,I,g),_!==null&&(zu(_,A,g),Xh(_,A,g))}function xi(A,g){if(A=A.memoizedState,A!==null&&A.dehydrated!==null){var _=A.retryLane;A.retryLane=_!==0&&_<g?_:g}}function zn(A,g){xi(A,g),(A=A.alternate)&&xi(A,g)}function Gn(A){if(A.tag===13||A.tag===31){var g=cu(A,67108864);g!==null&&zu(g,A,67108864),zn(A,67108864)}}function an(A){if(A.tag===13||A.tag===31){var g=qc();g=Ri(g);var _=cu(A,g);_!==null&&zu(_,A,g),zn(A,g)}}var ji=!0;function er(A,g,_,I){var W=Ie.T;Ie.T=null;var J=qe.p;try{qe.p=2,hi(A,g,_,I)}finally{qe.p=J,Ie.T=W}}function Di(A,g,_,I){var W=Ie.T;Ie.T=null;var J=qe.p;try{qe.p=8,hi(A,g,_,I)}finally{qe.p=J,Ie.T=W}}function hi(A,g,_,I){if(ji){var W=Tr(I);if(W===null)ny(A,g,I,xs,_),Vc(A,I);else if(Wu(W,A,g,_,I))I.stopPropagation();else if(Vc(A,I),g&4&&-1<Gu.indexOf(A)){for(;W!==null;){var J=ya(W);if(J!==null)switch(J.tag){case 3:if(J=J.stateNode,J.current.memoizedState.isDehydrated){var xe=mt(J.pendingLanes);if(xe!==0){var $e=J;for($e.pendingLanes|=2,$e.entangledLanes|=2;xe;){var _t=1<<31-ye(xe);$e.entanglements[1]|=_t,xe&=~_t}bh(J),(Mo&6)===0&&(sd=$n()+500,tm(0))}}break;case 31:case 13:$e=cu(J,2),$e!==null&&zu($e,J,2),q1(),zn(J,2)}if(J=Tr(I),J===null&&ny(A,g,I,xs,_),J===W)break;W=J}W!==null&&I.stopPropagation()}else ny(A,g,I,null,_)}}function Tr(A){return A=Rl(A),xa(A)}var xs=null;function xa(A){if(xs=null,A=eo(A),A!==null){var g=o(A);if(g===null)A=null;else{var _=g.tag;if(_===13){if(A=s(g),A!==null)return A;A=null}else if(_===31){if(A=a(g),A!==null)return A;A=null}else if(_===3){if(g.stateNode.current.memoizedState.isDehydrated)return g.tag===3?g.stateNode.containerInfo:null;A=null}else g!==A&&(A=null)}}return xs=A,null}function wl(A){switch(A){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Un()){case It:return 2;case _e:return 8;case oe:case ee:return 32;case ne:return 268435456;default:return 32}default:return 32}}var vc=!1,Fa=null,Qs=null,Ro=null,ha=new Map,Ma=new Map,qs=[],Gu="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Vc(A,g){switch(A){case"focusin":case"focusout":Fa=null;break;case"dragenter":case"dragleave":Qs=null;break;case"mouseover":case"mouseout":Ro=null;break;case"pointerover":case"pointerout":ha.delete(g.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ma.delete(g.pointerId)}}function Ys(A,g,_,I,W,J){return A===null||A.nativeEvent!==J?(A={blockedOn:g,domEventName:_,eventSystemFlags:I,nativeEvent:J,targetContainers:[W]},g!==null&&(g=ya(g),g!==null&&Gn(g)),A):(A.eventSystemFlags|=I,g=A.targetContainers,W!==null&&g.indexOf(W)===-1&&g.push(W),A)}function Wu(A,g,_,I,W){switch(g){case"focusin":return Fa=Ys(Fa,A,g,_,I,W),!0;case"dragenter":return Qs=Ys(Qs,A,g,_,I,W),!0;case"mouseover":return Ro=Ys(Ro,A,g,_,I,W),!0;case"pointerover":var J=W.pointerId;return ha.set(J,Ys(ha.get(J)||null,A,g,_,I,W)),!0;case"gotpointercapture":return J=W.pointerId,Ma.set(J,Ys(Ma.get(J)||null,A,g,_,I,W)),!0}return!1}function wa(A){var g=eo(A.target);if(g!==null){var _=o(g);if(_!==null){if(g=_.tag,g===13){if(g=s(_),g!==null){A.blockedOn=g,Go(A.priority,function(){an(_)});return}}else if(g===31){if(g=a(_),g!==null){A.blockedOn=g,Go(A.priority,function(){an(_)});return}}else if(g===3&&_.stateNode.current.memoizedState.isDehydrated){A.blockedOn=_.tag===3?_.stateNode.containerInfo:null;return}}}A.blockedOn=null}function Sa(A){if(A.blockedOn!==null)return!1;for(var g=A.targetContainers;0<g.length;){var _=Tr(A.nativeEvent);if(_===null){_=A.nativeEvent;var I=new _.constructor(_.type,_);ko=I,_.target.dispatchEvent(I),ko=null}else return g=ya(_),g!==null&&Gn(g),A.blockedOn=_,!1;g.shift()}return!0}function el(A,g,_){Sa(A)&&_.delete(g)}function za(){vc=!1,Fa!==null&&Sa(Fa)&&(Fa=null),Qs!==null&&Sa(Qs)&&(Qs=null),Ro!==null&&Sa(Ro)&&(Ro=null),ha.forEach(el),Ma.forEach(el)}function Do(A,g){A.blockedOn===g&&(A.blockedOn=null,vc||(vc=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,za)))}var Hc=null;function rm(A){Hc!==A&&(Hc=A,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Hc===A&&(Hc=null);for(var g=0;g<A.length;g+=3){var _=A[g],I=A[g+1],W=A[g+2];if(typeof I!="function"){if(xa(I||_)===null)continue;break}var J=ya(_);J!==null&&(A.splice(g,3),g-=3,_l(J,{pending:!0,data:W,method:_.method,action:I},I,W))}}))}function Qu(A){function g(_t){return Do(_t,A)}Fa!==null&&Do(Fa,A),Qs!==null&&Do(Qs,A),Ro!==null&&Do(Ro,A),ha.forEach(g),Ma.forEach(g);for(var _=0;_<qs.length;_++){var I=qs[_];I.blockedOn===A&&(I.blockedOn=null)}for(;0<qs.length&&(_=qs[0],_.blockedOn===null);)wa(_),_.blockedOn===null&&qs.shift();if(_=(A.ownerDocument||A).$$reactFormReplay,_!=null)for(I=0;I<_.length;I+=3){var W=_[I],J=_[I+1],xe=W[gn]||null;if(typeof J=="function")xe||rm(_);else if(xe){var $e=null;if(J&&J.hasAttribute("formAction")){if(W=J,xe=J[gn]||null)$e=xe.formAction;else if(xa(W)!==null)continue}else $e=xe.action;typeof $e=="function"?_[I+1]=$e:(_.splice(I,3),I-=3),rm(_)}}}function bc(){function A(J){J.canIntercept&&J.info==="react-transition"&&J.intercept({handler:function(){return new Promise(function(xe){return W=xe})},focusReset:"manual",scroll:"manual"})}function g(){W!==null&&(W(),W=null),I||setTimeout(_,20)}function _(){if(!I&&!navigation.transition){var J=navigation.currentEntry;J&&J.url!=null&&navigation.navigate(J.url,{state:J.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var I=!1,W=null;return navigation.addEventListener("navigate",A),navigation.addEventListener("navigatesuccess",g),navigation.addEventListener("navigateerror",g),setTimeout(_,100),function(){I=!0,navigation.removeEventListener("navigate",A),navigation.removeEventListener("navigatesuccess",g),navigation.removeEventListener("navigateerror",g),W!==null&&(W(),W=null)}}}function cd(A){this._internalRoot=A}Ad.prototype.render=cd.prototype.render=function(A){var g=this._internalRoot;if(g===null)throw Error(i(409));var _=g.current,I=qc();Nn(_,I,A,g,null,null)},Ad.prototype.unmount=cd.prototype.unmount=function(){var A=this._internalRoot;if(A!==null){this._internalRoot=null;var g=A.containerInfo;Nn(A.current,2,null,A,null,null),q1(),g[Ni]=null}};function Ad(A){this._internalRoot=A}Ad.prototype.unstable_scheduleHydration=function(A){if(A){var g=nr();A={blockedOn:null,target:A,priority:g};for(var _=0;_<qs.length&&g!==0&&g<qs[_].priority;_++);qs.splice(_,0,A),_===0&&wa(A)}};var om=e.version;if(om!=="19.2.0")throw Error(i(527,om,"19.2.0"));qe.findDOMNode=function(A){var g=A._reactInternals;if(g===void 0)throw typeof A.render=="function"?Error(i(188)):(A=Object.keys(A).join(","),Error(i(268,A)));return A=h(g),A=A!==null?m(A):null,A=A===null?null:A.stateNode,A};var Cg={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:Ie,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var af=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!af.isDisabled&&af.supportsFiber)try{Le=af.inject(Cg),Ve=af}catch{}}return a2.createRoot=function(A,g){if(!r(A))throw Error(i(299));var _=!1,I="",W=O1,J=gv,xe=B1;return g!=null&&(g.unstable_strictMode===!0&&(_=!0),g.identifierPrefix!==void 0&&(I=g.identifierPrefix),g.onUncaughtError!==void 0&&(W=g.onUncaughtError),g.onCaughtError!==void 0&&(J=g.onCaughtError),g.onRecoverableError!==void 0&&(xe=g.onRecoverableError)),g=Wn(A,1,!1,null,null,_,I,null,W,J,xe,bc),A[Ni]=g.current,ty(A),new cd(g)},a2.hydrateRoot=function(A,g,_){if(!r(A))throw Error(i(299));var I=!1,W="",J=O1,xe=gv,$e=B1,_t=null;return _!=null&&(_.unstable_strictMode===!0&&(I=!0),_.identifierPrefix!==void 0&&(W=_.identifierPrefix),_.onUncaughtError!==void 0&&(J=_.onUncaughtError),_.onCaughtError!==void 0&&(xe=_.onCaughtError),_.onRecoverableError!==void 0&&($e=_.onRecoverableError),_.formState!==void 0&&(_t=_.formState)),g=Wn(A,1,!0,g,_??null,I,W,_t,J,xe,$e,bc),g.context=Kn(null),_=g.current,I=qc(),I=Ri(I),W=dh(I),W.callback=null,hu(_,W,I),_=I,g.current.lanes=_,Hi(g,_),bh(g),A[Ni]=g.current,ty(A),new Ad(g)},a2.version="19.2.0",a2}var WL;function $ae(){if(WL)return eO.exports;WL=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),eO.exports=Yae(),eO.exports}var XH=$ae();const Vae="modulepreload",Hae=function(n){return"/maputnik/"+n},QL={},TC=function(e,t,i){let r=Promise.resolve();if(t&&t.length>0){let h=function(m){return Promise.all(m.map(y=>Promise.resolve(y).then(M=>({status:"fulfilled",value:M}),M=>({status:"rejected",reason:M}))))};var s=h;document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),c=a?.nonce||a?.getAttribute("nonce");r=h(t.map(m=>{if(m=Hae(m),m in QL)return;QL[m]=!0;const y=m.endsWith(".css"),M=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${M}`))return;const x=document.createElement("link");if(x.rel=y?"stylesheet":Vae,y||(x.as="script"),x.crossOrigin="",x.href=m,c&&x.setAttribute("nonce",c),document.head.appendChild(x),y)return new Promise((T,P)=>{x.addEventListener("load",T),x.addEventListener("error",()=>P(new Error(`Unable to preload CSS for ${m}`)))})}))}function o(a){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=a,window.dispatchEvent(c),!c.defaultPrevented)throw a}return r.then(a=>{for(const c of a||[])c.status==="rejected"&&o(c.reason);return e().catch(o)})},Zae=(n,e,t)=>{const i=n[e];return i?typeof i=="function"?i():Promise.resolve(i):new Promise((r,o)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(o.bind(null,new Error("Unknown variable dynamic import: "+e+(e.split("/").length!==t?". Note that variables only represent file names one level deep.":""))))})},zr=n=>typeof n=="string",l2=()=>{let n,e;const t=new Promise((i,r)=>{n=i,e=r});return t.resolve=n,t.reject=e,t},qL=n=>n==null?"":""+n,Xae=(n,e,t)=>{n.forEach(i=>{e[i]&&(t[i]=e[i])})},Jae=/###/g,YL=n=>n&&n.indexOf("###")>-1?n.replace(Jae,"."):n,$L=n=>!n||zr(n),r3=(n,e,t)=>{const i=zr(e)?e.split("."):e;let r=0;for(;r<i.length-1;){if($L(n))return{};const o=YL(i[r]);!n[o]&&t&&(n[o]=new t),Object.prototype.hasOwnProperty.call(n,o)?n=n[o]:n={},++r}return $L(n)?{}:{obj:n,k:YL(i[r])}},VL=(n,e,t)=>{const{obj:i,k:r}=r3(n,e,Object);if(i!==void 0||e.length===1){i[r]=t;return}let o=e[e.length-1],s=e.slice(0,e.length-1),a=r3(n,s,Object);for(;a.obj===void 0&&s.length;)o=`${s[s.length-1]}.${o}`,s=s.slice(0,s.length-1),a=r3(n,s,Object),a?.obj&&typeof a.obj[`${a.k}.${o}`]<"u"&&(a.obj=void 0);a.obj[`${a.k}.${o}`]=t},ele=(n,e,t,i)=>{const{obj:r,k:o}=r3(n,e,Object);r[o]=r[o]||[],r[o].push(t)},Dw=(n,e)=>{const{obj:t,k:i}=r3(n,e);if(t&&Object.prototype.hasOwnProperty.call(t,i))return t[i]},tle=(n,e,t)=>{const i=Dw(n,t);return i!==void 0?i:Dw(e,t)},JH=(n,e,t)=>{for(const i in e)i!=="__proto__"&&i!=="constructor"&&(i in n?zr(n[i])||n[i]instanceof String||zr(e[i])||e[i]instanceof String?t&&(n[i]=e[i]):JH(n[i],e[i],t):n[i]=e[i]);return n},RC=n=>n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var nle={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const ile=n=>zr(n)?n.replace(/[&<>"'\/]/g,e=>nle[e]):n;class rle{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(t!==void 0)return t;const i=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,i),this.regExpQueue.push(e),i}}const ole=[" ",",","?","!",";"],sle=new rle(20),ale=(n,e,t)=>{e=e||"",t=t||"";const i=ole.filter(s=>e.indexOf(s)<0&&t.indexOf(s)<0);if(i.length===0)return!0;const r=sle.getRegExp(`(${i.map(s=>s==="?"?"\\?":s).join("|")})`);let o=!r.test(n);if(!o){const s=n.indexOf(t);s>0&&!r.test(n.substring(0,s))&&(o=!0)}return o},XT=(n,e,t=".")=>{if(!n)return;if(n[e])return Object.prototype.hasOwnProperty.call(n,e)?n[e]:void 0;const i=e.split(t);let r=n;for(let o=0;o<i.length;){if(!r||typeof r!="object")return;let s,a="";for(let c=o;c<i.length;++c)if(c!==o&&(a+=t),a+=i[c],s=r[a],s!==void 0){if(["string","number","boolean"].indexOf(typeof s)>-1&&c<i.length-1)continue;o+=c-o+1;break}r=s}return r},R3=n=>n?.replace("_","-"),lle={type:"logger",log(n){this.output("log",n)},warn(n){this.output("warn",n)},error(n){this.output("error",n)},output(n,e){console?.[n]?.apply?.(console,e)}};class Pw{constructor(e,t={}){this.init(e,t)}init(e,t={}){this.prefix=t.prefix||"i18next:",this.logger=e||lle,this.options=t,this.debug=t.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,i,r){return r&&!this.debug?null:(zr(e[0])&&(e[0]=`${i}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new Pw(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new Pw(this.logger,e)}}var Kg=new Pw;class oE{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(i=>{this.observers[i]||(this.observers[i]=new Map);const r=this.observers[i].get(t)||0;this.observers[i].set(t,r+1)}),this}off(e,t){if(this.observers[e]){if(!t){delete this.observers[e];return}this.observers[e].delete(t)}}emit(e,...t){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([r,o])=>{for(let s=0;s<o;s++)r(...t)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([r,o])=>{for(let s=0;s<o;s++)r.apply(r,[e,...t])})}}class HL extends oE{constructor(e,t={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,i,r={}){const o=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator,s=r.ignoreJSONStructure!==void 0?r.ignoreJSONStructure:this.options.ignoreJSONStructure;let a;e.indexOf(".")>-1?a=e.split("."):(a=[e,t],i&&(Array.isArray(i)?a.push(...i):zr(i)&&o?a.push(...i.split(o)):a.push(i)));const c=Dw(this.data,a);return!c&&!t&&!i&&e.indexOf(".")>-1&&(e=a[0],t=a[1],i=a.slice(2).join(".")),c||!s||!zr(i)?c:XT(this.data?.[e]?.[t],i,o)}addResource(e,t,i,r,o={silent:!1}){const s=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator;let a=[e,t];i&&(a=a.concat(s?i.split(s):i)),e.indexOf(".")>-1&&(a=e.split("."),r=t,t=a[1]),this.addNamespaces(t),VL(this.data,a,r),o.silent||this.emit("added",e,t,i,r)}addResources(e,t,i,r={silent:!1}){for(const o in i)(zr(i[o])||Array.isArray(i[o]))&&this.addResource(e,t,o,i[o],{silent:!0});r.silent||this.emit("added",e,t,i)}addResourceBundle(e,t,i,r,o,s={silent:!1,skipCopy:!1}){let a=[e,t];e.indexOf(".")>-1&&(a=e.split("."),r=i,i=t,t=a[1]),this.addNamespaces(t);let c=Dw(this.data,a)||{};s.skipCopy||(i=JSON.parse(JSON.stringify(i))),r?JH(c,i,o):c={...c,...i},VL(this.data,a,c),s.silent||this.emit("added",e,t,i)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return this.getResource(e,t)!==void 0}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(r=>t[r]&&Object.keys(t[r]).length>0)}toJSON(){return this.data}}var eZ={processors:{},addPostProcessor(n){this.processors[n.name]=n},handle(n,e,t,i,r){return n.forEach(o=>{e=this.processors[o]?.process(e,t,i,r)??e}),e}};const tZ=Symbol("i18next/PATH_KEY");function ule(){const n=[],e=Object.create(null);let t;return e.get=(i,r)=>(t?.revoke?.(),r===tZ?n:(n.push(r),t=Proxy.revocable(i,e),t.proxy)),Proxy.revocable(Object.create(null),e).proxy}function JT(n,e){const{[tZ]:t}=n(ule());return t.join(e?.keySeparator??".")}const ZL={},rO=n=>!zr(n)&&typeof n!="boolean"&&typeof n!="number";class Uw extends oE{constructor(e,t={}){super(),Xae(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Kg.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,t={interpolation:{}}){const i={...t};if(e==null)return!1;const r=this.resolve(e,i);if(r?.res===void 0)return!1;const o=rO(r.res);return!(i.returnObjects===!1&&o)}extractFromKey(e,t){let i=t.nsSeparator!==void 0?t.nsSeparator:this.options.nsSeparator;i===void 0&&(i=":");const r=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator;let o=t.ns||this.options.defaultNS||[];const s=i&&e.indexOf(i)>-1,a=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!ale(e,i,r);if(s&&!a){const c=e.match(this.interpolator.nestingRegexp);if(c&&c.length>0)return{key:e,namespaces:zr(o)?[o]:o};const h=e.split(i);(i!==r||i===r&&this.options.ns.indexOf(h[0])>-1)&&(o=h.shift()),e=h.join(r)}return{key:e,namespaces:zr(o)?[o]:o}}translate(e,t,i){let r=typeof t=="object"?{...t}:t;if(typeof r!="object"&&this.options.overloadTranslationOptionHandler&&(r=this.options.overloadTranslationOptionHandler(arguments)),typeof r=="object"&&(r={...r}),r||(r={}),e==null)return"";typeof e=="function"&&(e=JT(e,{...this.options,...r})),Array.isArray(e)||(e=[String(e)]);const o=r.returnDetails!==void 0?r.returnDetails:this.options.returnDetails,s=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator,{key:a,namespaces:c}=this.extractFromKey(e[e.length-1],r),h=c[c.length-1];let m=r.nsSeparator!==void 0?r.nsSeparator:this.options.nsSeparator;m===void 0&&(m=":");const y=r.lng||this.language,M=r.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(y?.toLowerCase()==="cimode")return M?o?{res:`${h}${m}${a}`,usedKey:a,exactUsedKey:a,usedLng:y,usedNS:h,usedParams:this.getUsedParamsDetails(r)}:`${h}${m}${a}`:o?{res:a,usedKey:a,exactUsedKey:a,usedLng:y,usedNS:h,usedParams:this.getUsedParamsDetails(r)}:a;const x=this.resolve(e,r);let T=x?.res;const P=x?.usedKey||a,F=x?.exactUsedKey||a,j=["[object Number]","[object Function]","[object RegExp]"],q=r.joinArrays!==void 0?r.joinArrays:this.options.joinArrays,V=!this.i18nFormat||this.i18nFormat.handleAsObject,H=r.count!==void 0&&!zr(r.count),Q=Uw.hasDefaultValue(r),Y=H?this.pluralResolver.getSuffix(y,r.count,r):"",z=r.ordinal&&H?this.pluralResolver.getSuffix(y,r.count,{ordinal:!1}):"",se=H&&!r.ordinal&&r.count===0,le=se&&r[`defaultValue${this.options.pluralSeparator}zero`]||r[`defaultValue${Y}`]||r[`defaultValue${z}`]||r.defaultValue;let pe=T;V&&!T&&Q&&(pe=le);const de=rO(pe),ve=Object.prototype.toString.apply(pe);if(V&&pe&&de&&j.indexOf(ve)<0&&!(zr(q)&&Array.isArray(pe))){if(!r.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const Ee=this.options.returnedObjectHandler?this.options.returnedObjectHandler(P,pe,{...r,ns:c}):`key '${a} (${this.language})' returned an object instead of string.`;return o?(x.res=Ee,x.usedParams=this.getUsedParamsDetails(r),x):Ee}if(s){const Ee=Array.isArray(pe),Re=Ee?[]:{},je=Ee?F:P;for(const Ie in pe)if(Object.prototype.hasOwnProperty.call(pe,Ie)){const qe=`${je}${s}${Ie}`;Q&&!T?Re[Ie]=this.translate(qe,{...r,defaultValue:rO(le)?le[Ie]:void 0,joinArrays:!1,ns:c}):Re[Ie]=this.translate(qe,{...r,joinArrays:!1,ns:c}),Re[Ie]===qe&&(Re[Ie]=pe[Ie])}T=Re}}else if(V&&zr(q)&&Array.isArray(T))T=T.join(q),T&&(T=this.extendTranslation(T,e,r,i));else{let Ee=!1,Re=!1;!this.isValidLookup(T)&&Q&&(Ee=!0,T=le),this.isValidLookup(T)||(Re=!0,T=a);const Ie=(r.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&Re?void 0:T,qe=Q&&le!==T&&this.options.updateMissing;if(Re||Ee||qe){if(this.logger.log(qe?"updateKey":"missingKey",y,h,a,qe?le:T),s){const we=this.resolve(a,{...r,keySeparator:!1});we&&we.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let tt=[];const At=this.languageUtils.getFallbackCodes(this.options.fallbackLng,r.lng||this.language);if(this.options.saveMissingTo==="fallback"&&At&&At[0])for(let we=0;we<At.length;we++)tt.push(At[we]);else this.options.saveMissingTo==="all"?tt=this.languageUtils.toResolveHierarchy(r.lng||this.language):tt.push(r.lng||this.language);const ke=(we,ze,Me)=>{const lt=Q&&Me!==T?Me:Ie;this.options.missingKeyHandler?this.options.missingKeyHandler(we,h,ze,lt,qe,r):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(we,h,ze,lt,qe,r),this.emit("missingKey",we,h,ze,T)};this.options.saveMissing&&(this.options.saveMissingPlurals&&H?tt.forEach(we=>{const ze=this.pluralResolver.getSuffixes(we,r);se&&r[`defaultValue${this.options.pluralSeparator}zero`]&&ze.indexOf(`${this.options.pluralSeparator}zero`)<0&&ze.push(`${this.options.pluralSeparator}zero`),ze.forEach(Me=>{ke([we],a+Me,r[`defaultValue${Me}`]||le)})}):ke(tt,a,le))}T=this.extendTranslation(T,e,r,x,i),Re&&T===a&&this.options.appendNamespaceToMissingKey&&(T=`${h}${m}${a}`),(Re||Ee)&&this.options.parseMissingKeyHandler&&(T=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${h}${m}${a}`:a,Ee?T:void 0,r))}return o?(x.res=T,x.usedParams=this.getUsedParamsDetails(r),x):T}extendTranslation(e,t,i,r,o){if(this.i18nFormat?.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...i},i.lng||this.language||r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!i.skipInterpolation){i.interpolation&&this.interpolator.init({...i,interpolation:{...this.options.interpolation,...i.interpolation}});const c=zr(e)&&(i?.interpolation?.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let h;if(c){const y=e.match(this.interpolator.nestingRegexp);h=y&&y.length}let m=i.replace&&!zr(i.replace)?i.replace:i;if(this.options.interpolation.defaultVariables&&(m={...this.options.interpolation.defaultVariables,...m}),e=this.interpolator.interpolate(e,m,i.lng||this.language||r.usedLng,i),c){const y=e.match(this.interpolator.nestingRegexp),M=y&&y.length;h<M&&(i.nest=!1)}!i.lng&&r&&r.res&&(i.lng=this.language||r.usedLng),i.nest!==!1&&(e=this.interpolator.nest(e,(...y)=>o?.[0]===y[0]&&!i.context?(this.logger.warn(`It seems you are nesting recursively key: ${y[0]} in key: ${t[0]}`),null):this.translate(...y,t),i)),i.interpolation&&this.interpolator.reset()}const s=i.postProcess||this.options.postProcess,a=zr(s)?[s]:s;return e!=null&&a?.length&&i.applyPostProcessor!==!1&&(e=eZ.handle(a,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...r,usedParams:this.getUsedParamsDetails(i)},...i}:i,this)),e}resolve(e,t={}){let i,r,o,s,a;return zr(e)&&(e=[e]),e.forEach(c=>{if(this.isValidLookup(i))return;const h=this.extractFromKey(c,t),m=h.key;r=m;let y=h.namespaces;this.options.fallbackNS&&(y=y.concat(this.options.fallbackNS));const M=t.count!==void 0&&!zr(t.count),x=M&&!t.ordinal&&t.count===0,T=t.context!==void 0&&(zr(t.context)||typeof t.context=="number")&&t.context!=="",P=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);y.forEach(F=>{this.isValidLookup(i)||(a=F,!ZL[`${P[0]}-${F}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(a)&&(ZL[`${P[0]}-${F}`]=!0,this.logger.warn(`key "${r}" for languages "${P.join(", ")}" won't get resolved as namespace "${a}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),P.forEach(j=>{if(this.isValidLookup(i))return;s=j;const q=[m];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(q,m,j,F,t);else{let H;M&&(H=this.pluralResolver.getSuffix(j,t.count,t));const Q=`${this.options.pluralSeparator}zero`,Y=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(M&&(t.ordinal&&H.indexOf(Y)===0&&q.push(m+H.replace(Y,this.options.pluralSeparator)),q.push(m+H),x&&q.push(m+Q)),T){const z=`${m}${this.options.contextSeparator||"_"}${t.context}`;q.push(z),M&&(t.ordinal&&H.indexOf(Y)===0&&q.push(z+H.replace(Y,this.options.pluralSeparator)),q.push(z+H),x&&q.push(z+Q))}}let V;for(;V=q.pop();)this.isValidLookup(i)||(o=V,i=this.getResource(j,F,V,t))}))})}),{res:i,usedKey:r,exactUsedKey:o,usedLng:s,usedNS:a}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,t,i,r={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(e,t,i,r):this.resourceStore.getResource(e,t,i,r)}getUsedParamsDetails(e={}){const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],i=e.replace&&!zr(e.replace);let r=i?e.replace:e;if(i&&typeof e.count<"u"&&(r.count=e.count),this.options.interpolation.defaultVariables&&(r={...this.options.interpolation.defaultVariables,...r}),!i){r={...r};for(const o of t)delete r[o]}return r}static hasDefaultValue(e){const t="defaultValue";for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&t===i.substring(0,t.length)&&e[i]!==void 0)return!0;return!1}}class XL{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Kg.create("languageUtils")}getScriptPartFromCode(e){if(e=R3(e),!e||e.indexOf("-")<0)return null;const t=e.split("-");return t.length===2||(t.pop(),t[t.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(t.join("-"))}getLanguagePartFromCode(e){if(e=R3(e),!e||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(zr(e)&&e.indexOf("-")>-1){let t;try{t=Intl.getCanonicalLocales(e)[0]}catch{}return t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(i=>{if(t)return;const r=this.formatLanguageCode(i);(!this.options.supportedLngs||this.isSupportedCode(r))&&(t=r)}),!t&&this.options.supportedLngs&&e.forEach(i=>{if(t)return;const r=this.getScriptPartFromCode(i);if(this.isSupportedCode(r))return t=r;const o=this.getLanguagePartFromCode(i);if(this.isSupportedCode(o))return t=o;t=this.options.supportedLngs.find(s=>{if(s===o)return s;if(!(s.indexOf("-")<0&&o.indexOf("-")<0)&&(s.indexOf("-")>0&&o.indexOf("-")<0&&s.substring(0,s.indexOf("-"))===o||s.indexOf(o)===0&&o.length>1))return s})}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if(typeof e=="function"&&(e=e(t)),zr(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let i=e[t];return i||(i=e[this.getScriptPartFromCode(t)]),i||(i=e[this.formatLanguageCode(t)]),i||(i=e[this.getLanguagePartFromCode(t)]),i||(i=e.default),i||[]}toResolveHierarchy(e,t){const i=this.getFallbackCodes((t===!1?[]:t)||this.options.fallbackLng||[],e),r=[],o=s=>{s&&(this.isSupportedCode(s)?r.push(s):this.logger.warn(`rejecting language code not found in supportedLngs: ${s}`))};return zr(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&o(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&o(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&o(this.getLanguagePartFromCode(e))):zr(e)&&o(this.formatLanguageCode(e)),i.forEach(s=>{r.indexOf(s)<0&&o(this.formatLanguageCode(s))}),r}}const JL={zero:0,one:1,two:2,few:3,many:4,other:5},eF={select:n=>n===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class cle{constructor(e,t={}){this.languageUtils=e,this.options=t,this.logger=Kg.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e,t={}){const i=R3(e==="dev"?"en":e),r=t.ordinal?"ordinal":"cardinal",o=JSON.stringify({cleanedCode:i,type:r});if(o in this.pluralRulesCache)return this.pluralRulesCache[o];let s;try{s=new Intl.PluralRules(i,{type:r})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),eF;if(!e.match(/-|_/))return eF;const c=this.languageUtils.getLanguagePartFromCode(e);s=this.getRule(c,t)}return this.pluralRulesCache[o]=s,s}needsPlural(e,t={}){let i=this.getRule(e,t);return i||(i=this.getRule("dev",t)),i?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(e,t,i={}){return this.getSuffixes(e,i).map(r=>`${t}${r}`)}getSuffixes(e,t={}){let i=this.getRule(e,t);return i||(i=this.getRule("dev",t)),i?i.resolvedOptions().pluralCategories.sort((r,o)=>JL[r]-JL[o]).map(r=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${r}`):[]}getSuffix(e,t,i={}){const r=this.getRule(e,i);return r?`${this.options.prepend}${i.ordinal?`ordinal${this.options.prepend}`:""}${r.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",t,i))}}const tF=(n,e,t,i=".",r=!0)=>{let o=tle(n,e,t);return!o&&r&&zr(t)&&(o=XT(n,t,i),o===void 0&&(o=XT(e,t,i))),o},oO=n=>n.replace(/\$/g,"$$$$");class Ale{constructor(e={}){this.logger=Kg.create("interpolator"),this.options=e,this.format=e?.interpolation?.format||(t=>t),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:i,useRawValueToEscape:r,prefix:o,prefixEscaped:s,suffix:a,suffixEscaped:c,formatSeparator:h,unescapeSuffix:m,unescapePrefix:y,nestingPrefix:M,nestingPrefixEscaped:x,nestingSuffix:T,nestingSuffixEscaped:P,nestingOptionsSeparator:F,maxReplaces:j,alwaysFormat:q}=e.interpolation;this.escape=t!==void 0?t:ile,this.escapeValue=i!==void 0?i:!0,this.useRawValueToEscape=r!==void 0?r:!1,this.prefix=o?RC(o):s||"{{",this.suffix=a?RC(a):c||"}}",this.formatSeparator=h||",",this.unescapePrefix=m?"":y||"-",this.unescapeSuffix=this.unescapePrefix?"":m||"",this.nestingPrefix=M?RC(M):x||RC("$t("),this.nestingSuffix=T?RC(T):P||RC(")"),this.nestingOptionsSeparator=F||",",this.maxReplaces=j||1e3,this.alwaysFormat=q!==void 0?q:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(t,i)=>t?.source===i?(t.lastIndex=0,t):new RegExp(i,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,t,i,r){let o,s,a;const c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},h=x=>{if(x.indexOf(this.formatSeparator)<0){const j=tF(t,c,x,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(j,void 0,i,{...r,...t,interpolationkey:x}):j}const T=x.split(this.formatSeparator),P=T.shift().trim(),F=T.join(this.formatSeparator).trim();return this.format(tF(t,c,P,this.options.keySeparator,this.options.ignoreJSONStructure),F,i,{...r,...t,interpolationkey:P})};this.resetRegExp();const m=r?.missingInterpolationHandler||this.options.missingInterpolationHandler,y=r?.interpolation?.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:x=>oO(x)},{regex:this.regexp,safeValue:x=>this.escapeValue?oO(this.escape(x)):oO(x)}].forEach(x=>{for(a=0;o=x.regex.exec(e);){const T=o[1].trim();if(s=h(T),s===void 0)if(typeof m=="function"){const F=m(e,o,r);s=zr(F)?F:""}else if(r&&Object.prototype.hasOwnProperty.call(r,T))s="";else if(y){s=o[0];continue}else this.logger.warn(`missed to pass in variable ${T} for interpolating ${e}`),s="";else!zr(s)&&!this.useRawValueToEscape&&(s=qL(s));const P=x.safeValue(s);if(e=e.replace(o[0],P),y?(x.regex.lastIndex+=s.length,x.regex.lastIndex-=o[0].length):x.regex.lastIndex=0,a++,a>=this.maxReplaces)break}}),e}nest(e,t,i={}){let r,o,s;const a=(c,h)=>{const m=this.nestingOptionsSeparator;if(c.indexOf(m)<0)return c;const y=c.split(new RegExp(`${m}[ ]*{`));let M=`{${y[1]}`;c=y[0],M=this.interpolate(M,s);const x=M.match(/'/g),T=M.match(/"/g);((x?.length??0)%2===0&&!T||T.length%2!==0)&&(M=M.replace(/'/g,'"'));try{s=JSON.parse(M),h&&(s={...h,...s})}catch(P){return this.logger.warn(`failed parsing options string in nesting for key ${c}`,P),`${c}${m}${M}`}return s.defaultValue&&s.defaultValue.indexOf(this.prefix)>-1&&delete s.defaultValue,c};for(;r=this.nestingRegexp.exec(e);){let c=[];s={...i},s=s.replace&&!zr(s.replace)?s.replace:s,s.applyPostProcessor=!1,delete s.defaultValue;const h=/{.*}/.test(r[1])?r[1].lastIndexOf("}")+1:r[1].indexOf(this.formatSeparator);if(h!==-1&&(c=r[1].slice(h).split(this.formatSeparator).map(m=>m.trim()).filter(Boolean),r[1]=r[1].slice(0,h)),o=t(a.call(this,r[1].trim(),s),s),o&&r[0]===e&&!zr(o))return o;zr(o)||(o=qL(o)),o||(this.logger.warn(`missed to resolve ${r[1]} for nesting ${e}`),o=""),c.length&&(o=c.reduce((m,y)=>this.format(m,y,i.lng,{...i,interpolationkey:r[1].trim()}),o.trim())),e=e.replace(r[0],o),this.regexp.lastIndex=0}return e}}const hle=n=>{let e=n.toLowerCase().trim();const t={};if(n.indexOf("(")>-1){const i=n.split("(");e=i[0].toLowerCase().trim();const r=i[1].substring(0,i[1].length-1);e==="currency"&&r.indexOf(":")<0?t.currency||(t.currency=r.trim()):e==="relativetime"&&r.indexOf(":")<0?t.range||(t.range=r.trim()):r.split(";").forEach(s=>{if(s){const[a,...c]=s.split(":"),h=c.join(":").trim().replace(/^'+|'+$/g,""),m=a.trim();t[m]||(t[m]=h),h==="false"&&(t[m]=!1),h==="true"&&(t[m]=!0),isNaN(h)||(t[m]=parseInt(h,10))}})}return{formatName:e,formatOptions:t}},nF=n=>{const e={};return(t,i,r)=>{let o=r;r&&r.interpolationkey&&r.formatParams&&r.formatParams[r.interpolationkey]&&r[r.interpolationkey]&&(o={...o,[r.interpolationkey]:void 0});const s=i+JSON.stringify(o);let a=e[s];return a||(a=n(R3(i),r),e[s]=a),a(t)}},dle=n=>(e,t,i)=>n(R3(t),i)(e);class fle{constructor(e={}){this.logger=Kg.create("formatter"),this.options=e,this.init(e)}init(e,t={interpolation:{}}){this.formatSeparator=t.interpolation.formatSeparator||",";const i=t.cacheInBuiltFormats?nF:dle;this.formats={number:i((r,o)=>{const s=new Intl.NumberFormat(r,{...o});return a=>s.format(a)}),currency:i((r,o)=>{const s=new Intl.NumberFormat(r,{...o,style:"currency"});return a=>s.format(a)}),datetime:i((r,o)=>{const s=new Intl.DateTimeFormat(r,{...o});return a=>s.format(a)}),relativetime:i((r,o)=>{const s=new Intl.RelativeTimeFormat(r,{...o});return a=>s.format(a,o.range||"day")}),list:i((r,o)=>{const s=new Intl.ListFormat(r,{...o});return a=>s.format(a)})}}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=nF(t)}format(e,t,i,r={}){const o=t.split(this.formatSeparator);if(o.length>1&&o[0].indexOf("(")>1&&o[0].indexOf(")")<0&&o.find(a=>a.indexOf(")")>-1)){const a=o.findIndex(c=>c.indexOf(")")>-1);o[0]=[o[0],...o.splice(1,a)].join(this.formatSeparator)}return o.reduce((a,c)=>{const{formatName:h,formatOptions:m}=hle(c);if(this.formats[h]){let y=a;try{const M=r?.formatParams?.[r.interpolationkey]||{},x=M.locale||M.lng||r.locale||r.lng||i;y=this.formats[h](a,x,{...m,...r,...M})}catch(M){this.logger.warn(M)}return y}else this.logger.warn(`there was no format function for ${h}`);return a},e)}}const ple=(n,e)=>{n.pending[e]!==void 0&&(delete n.pending[e],n.pendingCount--)};class mle extends oE{constructor(e,t,i,r={}){super(),this.backend=e,this.store=t,this.services=i,this.languageUtils=i.languageUtils,this.options=r,this.logger=Kg.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=r.maxParallelReads||10,this.readingCalls=0,this.maxRetries=r.maxRetries>=0?r.maxRetries:5,this.retryTimeout=r.retryTimeout>=1?r.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(i,r.backend,r)}queueLoad(e,t,i,r){const o={},s={},a={},c={};return e.forEach(h=>{let m=!0;t.forEach(y=>{const M=`${h}|${y}`;!i.reload&&this.store.hasResourceBundle(h,y)?this.state[M]=2:this.state[M]<0||(this.state[M]===1?s[M]===void 0&&(s[M]=!0):(this.state[M]=1,m=!1,s[M]===void 0&&(s[M]=!0),o[M]===void 0&&(o[M]=!0),c[y]===void 0&&(c[y]=!0)))}),m||(a[h]=!0)}),(Object.keys(o).length||Object.keys(s).length)&&this.queue.push({pending:s,pendingCount:Object.keys(s).length,loaded:{},errors:[],callback:r}),{toLoad:Object.keys(o),pending:Object.keys(s),toLoadLanguages:Object.keys(a),toLoadNamespaces:Object.keys(c)}}loaded(e,t,i){const r=e.split("|"),o=r[0],s=r[1];t&&this.emit("failedLoading",o,s,t),!t&&i&&this.store.addResourceBundle(o,s,i,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&i&&(this.state[e]=0);const a={};this.queue.forEach(c=>{ele(c.loaded,[o],s),ple(c,e),t&&c.errors.push(t),c.pendingCount===0&&!c.done&&(Object.keys(c.loaded).forEach(h=>{a[h]||(a[h]={});const m=c.loaded[h];m.length&&m.forEach(y=>{a[h][y]===void 0&&(a[h][y]=!0)})}),c.done=!0,c.errors.length?c.callback(c.errors):c.callback())}),this.emit("loaded",a),this.queue=this.queue.filter(c=>!c.done)}read(e,t,i,r=0,o=this.retryTimeout,s){if(!e.length)return s(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:t,fcName:i,tried:r,wait:o,callback:s});return}this.readingCalls++;const a=(h,m)=>{if(this.readingCalls--,this.waitingReads.length>0){const y=this.waitingReads.shift();this.read(y.lng,y.ns,y.fcName,y.tried,y.wait,y.callback)}if(h&&m&&r<this.maxRetries){setTimeout(()=>{this.read.call(this,e,t,i,r+1,o*2,s)},o);return}s(h,m)},c=this.backend[i].bind(this.backend);if(c.length===2){try{const h=c(e,t);h&&typeof h.then=="function"?h.then(m=>a(null,m)).catch(a):a(null,h)}catch(h){a(h)}return}return c(e,t,a)}prepareLoading(e,t,i={},r){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),r&&r();zr(e)&&(e=this.languageUtils.toResolveHierarchy(e)),zr(t)&&(t=[t]);const o=this.queueLoad(e,t,i,r);if(!o.toLoad.length)return o.pending.length||r(),null;o.toLoad.forEach(s=>{this.loadOne(s)})}load(e,t,i){this.prepareLoading(e,t,{},i)}reload(e,t,i){this.prepareLoading(e,t,{reload:!0},i)}loadOne(e,t=""){const i=e.split("|"),r=i[0],o=i[1];this.read(r,o,"read",void 0,void 0,(s,a)=>{s&&this.logger.warn(`${t}loading namespace ${o} for language ${r} failed`,s),!s&&a&&this.logger.log(`${t}loaded namespace ${o} for language ${r}`,a),this.loaded(e,s,a)})}saveMissing(e,t,i,r,o,s={},a=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(t)){this.logger.warn(`did not save key "${i}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(i==null||i==="")){if(this.backend?.create){const c={...s,isUpdate:o},h=this.backend.create.bind(this.backend);if(h.length<6)try{let m;h.length===5?m=h(e,t,i,r,c):m=h(e,t,i,r),m&&typeof m.then=="function"?m.then(y=>a(null,y)).catch(a):a(null,m)}catch(m){a(m)}else h(e,t,i,r,a,c)}!e||!e[0]||this.store.addResource(e[0],t,i,r)}}}const iF=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:n=>{let e={};if(typeof n[1]=="object"&&(e=n[1]),zr(n[1])&&(e.defaultValue=n[1]),zr(n[2])&&(e.tDescription=n[2]),typeof n[2]=="object"||typeof n[3]=="object"){const t=n[3]||n[2];Object.keys(t).forEach(i=>{e[i]=t[i]})}return e},interpolation:{escapeValue:!0,format:n=>n,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),rF=n=>(zr(n.ns)&&(n.ns=[n.ns]),zr(n.fallbackLng)&&(n.fallbackLng=[n.fallbackLng]),zr(n.fallbackNS)&&(n.fallbackNS=[n.fallbackNS]),n.supportedLngs?.indexOf?.("cimode")<0&&(n.supportedLngs=n.supportedLngs.concat(["cimode"])),typeof n.initImmediate=="boolean"&&(n.initAsync=n.initImmediate),n),U5=()=>{},gle=n=>{Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach(t=>{typeof n[t]=="function"&&(n[t]=n[t].bind(n))})};class D3 extends oE{constructor(e={},t){if(super(),this.options=rF(e),this.services={},this.logger=Kg,this.modules={external:[]},gle(this),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(e={},t){this.isInitializing=!0,typeof e=="function"&&(t=e,e={}),e.defaultNS==null&&e.ns&&(zr(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const i=iF();this.options={...i,...this.options,...rF(e)},this.options.interpolation={...i.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator);const r=h=>h?typeof h=="function"?new h:h:null;if(!this.options.isClone){this.modules.logger?Kg.init(r(this.modules.logger),this.options):Kg.init(null,this.options);let h;this.modules.formatter?h=this.modules.formatter:h=fle;const m=new XL(this.options);this.store=new HL(this.options.resources,this.options);const y=this.services;y.logger=Kg,y.resourceStore=this.store,y.languageUtils=m,y.pluralResolver=new cle(m,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==i.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),h&&(!this.options.interpolation.format||this.options.interpolation.format===i.interpolation.format)&&(y.formatter=r(h),y.formatter.init&&y.formatter.init(y,this.options),this.options.interpolation.format=y.formatter.format.bind(y.formatter)),y.interpolator=new Ale(this.options),y.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},y.backendConnector=new mle(r(this.modules.backend),y.resourceStore,y,this.options),y.backendConnector.on("*",(x,...T)=>{this.emit(x,...T)}),this.modules.languageDetector&&(y.languageDetector=r(this.modules.languageDetector),y.languageDetector.init&&y.languageDetector.init(y,this.options.detection,this.options)),this.modules.i18nFormat&&(y.i18nFormat=r(this.modules.i18nFormat),y.i18nFormat.init&&y.i18nFormat.init(this)),this.translator=new Uw(this.services,this.options),this.translator.on("*",(x,...T)=>{this.emit(x,...T)}),this.modules.external.forEach(x=>{x.init&&x.init(this)})}if(this.format=this.options.interpolation.format,t||(t=U5),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const h=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);h.length>0&&h[0]!=="dev"&&(this.options.lng=h[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(h=>{this[h]=(...m)=>this.store[h](...m)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(h=>{this[h]=(...m)=>(this.store[h](...m),this)});const a=l2(),c=()=>{const h=(m,y)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),a.resolve(y),t(m,y)};if(this.languages&&!this.isInitialized)return h(null,this.t.bind(this));this.changeLanguage(this.options.lng,h)};return this.options.resources||!this.options.initAsync?c():setTimeout(c,0),a}loadResources(e,t=U5){let i=t;const r=zr(e)?e:this.language;if(typeof e=="function"&&(i=e),!this.options.resources||this.options.partialBundledLanguages){if(r?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return i();const o=[],s=a=>{if(!a||a==="cimode")return;this.services.languageUtils.toResolveHierarchy(a).forEach(h=>{h!=="cimode"&&o.indexOf(h)<0&&o.push(h)})};r?s(r):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(c=>s(c)),this.options.preload?.forEach?.(a=>s(a)),this.services.backendConnector.load(o,this.options.ns,a=>{!a&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),i(a)})}else i(null)}reloadResources(e,t,i){const r=l2();return typeof e=="function"&&(i=e,e=void 0),typeof t=="function"&&(i=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),i||(i=U5),this.services.backendConnector.reload(e,t,o=>{r.resolve(),i(o)}),r}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&eZ.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let t=0;t<this.languages.length;t++){const i=this.languages[t];if(!(["cimode","dev"].indexOf(i)>-1)&&this.store.hasLanguageSomeTranslations(i)){this.resolvedLanguage=i;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,t){this.isLanguageChangingTo=e;const i=l2();this.emit("languageChanging",e);const r=a=>{this.language=a,this.languages=this.services.languageUtils.toResolveHierarchy(a),this.resolvedLanguage=void 0,this.setResolvedLanguage(a)},o=(a,c)=>{c?this.isLanguageChangingTo===e&&(r(c),this.translator.changeLanguage(c),this.isLanguageChangingTo=void 0,this.emit("languageChanged",c),this.logger.log("languageChanged",c)):this.isLanguageChangingTo=void 0,i.resolve((...h)=>this.t(...h)),t&&t(a,(...h)=>this.t(...h))},s=a=>{!e&&!a&&this.services.languageDetector&&(a=[]);const c=zr(a)?a:a&&a[0],h=this.store.hasLanguageSomeTranslations(c)?c:this.services.languageUtils.getBestMatchFromCodes(zr(a)?[a]:a);h&&(this.language||r(h),this.translator.language||this.translator.changeLanguage(h),this.services.languageDetector?.cacheUserLanguage?.(h)),this.loadResources(h,m=>{o(m,h)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?s(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(s):this.services.languageDetector.detect(s):s(e),i}getFixedT(e,t,i){const r=(o,s,...a)=>{let c;typeof s!="object"?c=this.options.overloadTranslationOptionHandler([o,s].concat(a)):c={...s},c.lng=c.lng||r.lng,c.lngs=c.lngs||r.lngs,c.ns=c.ns||r.ns,c.keyPrefix!==""&&(c.keyPrefix=c.keyPrefix||i||r.keyPrefix);const h=this.options.keySeparator||".";let m;return c.keyPrefix&&Array.isArray(o)?m=o.map(y=>(typeof y=="function"&&(y=JT(y,{...this.options,...s})),`${c.keyPrefix}${h}${y}`)):(typeof o=="function"&&(o=JT(o,{...this.options,...s})),m=c.keyPrefix?`${c.keyPrefix}${h}${o}`:o),this.t(m,c)};return zr(e)?r.lng=e:r.lngs=e,r.ns=t,r.keyPrefix=i,r}t(...e){return this.translator?.translate(...e)}exists(...e){return this.translator?.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,t={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const i=t.lng||this.resolvedLanguage||this.languages[0],r=this.options?this.options.fallbackLng:!1,o=this.languages[this.languages.length-1];if(i.toLowerCase()==="cimode")return!0;const s=(a,c)=>{const h=this.services.backendConnector.state[`${a}|${c}`];return h===-1||h===0||h===2};if(t.precheck){const a=t.precheck(this,s);if(a!==void 0)return a}return!!(this.hasResourceBundle(i,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||s(i,e)&&(!r||s(o,e)))}loadNamespaces(e,t){const i=l2();return this.options.ns?(zr(e)&&(e=[e]),e.forEach(r=>{this.options.ns.indexOf(r)<0&&this.options.ns.push(r)}),this.loadResources(r=>{i.resolve(),t&&t(r)}),i):(t&&t(),Promise.resolve())}loadLanguages(e,t){const i=l2();zr(e)&&(e=[e]);const r=this.options.preload||[],o=e.filter(s=>r.indexOf(s)<0&&this.services.languageUtils.isSupportedCode(s));return o.length?(this.options.preload=r.concat(o),this.loadResources(s=>{i.resolve(),t&&t(s)}),i):(t&&t(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!e)return"rtl";try{const r=new Intl.Locale(e);if(r&&r.getTextInfo){const o=r.getTextInfo();if(o&&o.direction)return o.direction}}catch{}const t=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],i=this.services?.languageUtils||new XL(iF());return e.toLowerCase().indexOf("-latn")>1?"ltr":t.indexOf(i.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},t){return new D3(e,t)}cloneInstance(e={},t=U5){const i=e.forkResourceStore;i&&delete e.forkResourceStore;const r={...this.options,...e,isClone:!0},o=new D3(r);if((e.debug!==void 0||e.prefix!==void 0)&&(o.logger=o.logger.clone(e)),["store","services","language"].forEach(a=>{o[a]=this[a]}),o.services={...this.services},o.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},i){const a=Object.keys(this.store.data).reduce((c,h)=>(c[h]={...this.store.data[h]},c[h]=Object.keys(c[h]).reduce((m,y)=>(m[y]={...c[h][y]},m),c[h]),c),{});o.store=new HL(a,r),o.services.resourceStore=o.store}return o.translator=new Uw(o.services,r),o.translator.on("*",(a,...c)=>{o.emit(a,...c)}),o.init(r,t),o.translator.options=r,o.translator.backendConnector.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const _A=D3.createInstance();_A.createInstance=D3.createInstance;_A.createInstance;_A.dir;_A.init;_A.loadResources;_A.reloadResources;_A.use;_A.changeLanguage;_A.getFixedT;_A.t;_A.exists;_A.setDefaultNamespace;_A.hasLoadedNamespace;_A.loadNamespaces;_A.loadLanguages;const{slice:yle,forEach:vle}=[];function ble(n){return vle.call(yle.call(arguments,1),e=>{if(e)for(const t in e)n[t]===void 0&&(n[t]=e[t])}),n}function Cle(n){return typeof n!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(t=>t.test(n))}const oF=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,_le=function(n,e){const i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},r=encodeURIComponent(e);let o=`${n}=${r}`;if(i.maxAge>0){const s=i.maxAge-0;if(Number.isNaN(s))throw new Error("maxAge should be a Number");o+=`; Max-Age=${Math.floor(s)}`}if(i.domain){if(!oF.test(i.domain))throw new TypeError("option domain is invalid");o+=`; Domain=${i.domain}`}if(i.path){if(!oF.test(i.path))throw new TypeError("option path is invalid");o+=`; Path=${i.path}`}if(i.expires){if(typeof i.expires.toUTCString!="function")throw new TypeError("option expires is invalid");o+=`; Expires=${i.expires.toUTCString()}`}if(i.httpOnly&&(o+="; HttpOnly"),i.secure&&(o+="; Secure"),i.sameSite)switch(typeof i.sameSite=="string"?i.sameSite.toLowerCase():i.sameSite){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return i.partitioned&&(o+="; Partitioned"),o},sF={create(n,e,t,i){let r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};t&&(r.expires=new Date,r.expires.setTime(r.expires.getTime()+t*60*1e3)),i&&(r.domain=i),document.cookie=_le(n,e,r)},read(n){const e=`${n}=`,t=document.cookie.split(";");for(let i=0;i<t.length;i++){let r=t[i];for(;r.charAt(0)===" ";)r=r.substring(1,r.length);if(r.indexOf(e)===0)return r.substring(e.length,r.length)}return null},remove(n,e){this.create(n,"",-1,e)}};var xle={name:"cookie",lookup(n){let{lookupCookie:e}=n;if(e&&typeof document<"u")return sF.read(e)||void 0},cacheUserLanguage(n,e){let{lookupCookie:t,cookieMinutes:i,cookieDomain:r,cookieOptions:o}=e;t&&typeof document<"u"&&sF.create(t,n,i,r,o)}},Mle={name:"querystring",lookup(n){let{lookupQuerystring:e}=n,t;if(typeof window<"u"){let{search:i}=window.location;!window.location.search&&window.location.hash?.indexOf("?")>-1&&(i=window.location.hash.substring(window.location.hash.indexOf("?")));const o=i.substring(1).split("&");for(let s=0;s<o.length;s++){const a=o[s].indexOf("=");a>0&&o[s].substring(0,a)===e&&(t=o[s].substring(a+1))}}return t}},wle={name:"hash",lookup(n){let{lookupHash:e,lookupFromHashIndex:t}=n,i;if(typeof window<"u"){const{hash:r}=window.location;if(r&&r.length>2){const o=r.substring(1);if(e){const s=o.split("&");for(let a=0;a<s.length;a++){const c=s[a].indexOf("=");c>0&&s[a].substring(0,c)===e&&(i=s[a].substring(c+1))}}if(i)return i;if(!i&&t>-1){const s=r.match(/\/([a-zA-Z-]*)/g);return Array.isArray(s)?s[typeof t=="number"?t:0]?.replace("/",""):void 0}}}return i}};let DC=null;const aF=()=>{if(DC!==null)return DC;try{if(DC=typeof window<"u"&&window.localStorage!==null,!DC)return!1;const n="i18next.translate.boo";window.localStorage.setItem(n,"foo"),window.localStorage.removeItem(n)}catch{DC=!1}return DC};var Sle={name:"localStorage",lookup(n){let{lookupLocalStorage:e}=n;if(e&&aF())return window.localStorage.getItem(e)||void 0},cacheUserLanguage(n,e){let{lookupLocalStorage:t}=e;t&&aF()&&window.localStorage.setItem(t,n)}};let PC=null;const lF=()=>{if(PC!==null)return PC;try{if(PC=typeof window<"u"&&window.sessionStorage!==null,!PC)return!1;const n="i18next.translate.boo";window.sessionStorage.setItem(n,"foo"),window.sessionStorage.removeItem(n)}catch{PC=!1}return PC};var Ele={name:"sessionStorage",lookup(n){let{lookupSessionStorage:e}=n;if(e&&lF())return window.sessionStorage.getItem(e)||void 0},cacheUserLanguage(n,e){let{lookupSessionStorage:t}=e;t&&lF()&&window.sessionStorage.setItem(t,n)}},Ole={name:"navigator",lookup(n){const e=[];if(typeof navigator<"u"){const{languages:t,userLanguage:i,language:r}=navigator;if(t)for(let o=0;o<t.length;o++)e.push(t[o]);i&&e.push(i),r&&e.push(r)}return e.length>0?e:void 0}},Ble={name:"htmlTag",lookup(n){let{htmlTag:e}=n,t;const i=e||(typeof document<"u"?document.documentElement:null);return i&&typeof i.getAttribute=="function"&&(t=i.getAttribute("lang")),t}},Ile={name:"path",lookup(n){let{lookupFromPathIndex:e}=n;if(typeof window>"u")return;const t=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(t)?t[typeof e=="number"?e:0]?.replace("/",""):void 0}},kle={name:"subdomain",lookup(n){let{lookupFromSubdomainIndex:e}=n;const t=typeof e=="number"?e+1:1,i=typeof window<"u"&&window.location?.hostname?.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(i)return i[t]}};let nZ=!1;try{document.cookie,nZ=!0}catch{}const iZ=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];nZ||iZ.splice(1,1);const Tle=()=>({order:iZ,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:n=>n});class rZ{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(e,t)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=e,this.options=ble(t,this.options||{},Tle()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=r=>r.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=i,this.addDetector(xle),this.addDetector(Mle),this.addDetector(Sle),this.addDetector(Ele),this.addDetector(Ole),this.addDetector(Ble),this.addDetector(Ile),this.addDetector(kle),this.addDetector(wle)}addDetector(e){return this.detectors[e.name]=e,this}detect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,t=[];return e.forEach(i=>{if(this.detectors[i]){let r=this.detectors[i].lookup(this.options);r&&typeof r=="string"&&(r=[r]),r&&(t=t.concat(r))}}),t=t.filter(i=>i!=null&&!Cle(i)).map(i=>this.options.convertDetectedLanguage(i)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?t:t.length>0?t[0]:null}cacheUserLanguage(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;t&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||t.forEach(i=>{this.detectors[i]&&this.detectors[i].cacheUserLanguage(e,this.options)}))}}rZ.type="languageDetector";var Rle=function(e){return{type:"backend",init:function(i,r,o){},read:function(i,r,o){if(typeof e=="function"){if(e.length<3){try{var s=e(i,r);s&&typeof s.then=="function"?s.then(function(a){return o(null,a&&a.default||a)}).catch(o):o(null,s)}catch(a){o(a)}return}e(i,r,o);return}o(null,e&&e[i]&&e[i][r])}}},sO,uF;function Dle(){return uF||(uF=1,sO={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),sO}var Ple=Dle();const Ule=eu(Ple);var Kle=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function cF(n){var e={type:"tag",name:"",voidElement:!1,attrs:{},children:[]},t=n.match(/<\/?([^\s]+?)[/\s>]/);if(t&&(e.name=t[1],(Ule[t[1]]||n.charAt(n.length-2)==="/")&&(e.voidElement=!0),e.name.startsWith("!--"))){var i=n.indexOf("-->");return{type:"comment",comment:i!==-1?n.slice(4,i):""}}for(var r=new RegExp(Kle),o=null;(o=r.exec(n))!==null;)if(o[0].trim())if(o[1]){var s=o[1].trim(),a=[s,""];s.indexOf("=")>-1&&(a=s.split("=")),e.attrs[a[0]]=a[1],r.lastIndex--}else o[2]&&(e.attrs[o[2]]=o[3].trim().substring(1,o[3].length-1));return e}var Lle=/<[a-zA-Z0-9\-\!\/](?:"[^"]*"|'[^']*'|[^'">])*>/g,Fle=/^\s*$/,zle=Object.create(null);function oZ(n,e){switch(e.type){case"text":return n+e.content;case"tag":return n+="<"+e.name+(e.attrs?(function(t){var i=[];for(var r in t)i.push(r+'="'+t[r]+'"');return i.length?" "+i.join(" "):""})(e.attrs):"")+(e.voidElement?"/>":">"),e.voidElement?n:n+e.children.reduce(oZ,"")+"</"+e.name+">";case"comment":return n+"<!--"+e.comment+"-->"}}var jle={parse:function(n,e){e||(e={}),e.components||(e.components=zle);var t,i=[],r=[],o=-1,s=!1;if(n.indexOf("<")!==0){var a=n.indexOf("<");i.push({type:"text",content:a===-1?n:n.substring(0,a)})}return n.replace(Lle,function(c,h){if(s){if(c!=="</"+t.name+">")return;s=!1}var m,y=c.charAt(1)!=="/",M=c.startsWith("<!--"),x=h+c.length,T=n.charAt(x);if(M){var P=cF(c);return o<0?(i.push(P),i):((m=r[o]).children.push(P),i)}if(y&&(o++,(t=cF(c)).type==="tag"&&e.components[t.name]&&(t.type="component",s=!0),t.voidElement||s||!T||T==="<"||t.children.push({type:"text",content:n.slice(x,n.indexOf("<",x))}),o===0&&i.push(t),(m=r[o-1])&&m.children.push(t),r[o]=t),(!y||t.voidElement)&&(o>-1&&(t.voidElement||t.name===c.slice(2,-1))&&(o--,t=o===-1?i:r[o]),!s&&T!=="<"&&T)){m=o===-1?i:r[o].children;var F=n.indexOf("<",x),j=n.slice(x,F===-1?void 0:F);Fle.test(j)&&(j=" "),(F>-1&&o+m.length>=0||j!==" ")&&m.push({type:"text",content:j})}}),i},stringify:function(n){return n.reduce(function(e,t){return e+oZ("",t)},"")}};const ew=(n,e,t,i)=>{const r=[t,{code:e,...i||{}}];if(n?.services?.logger?.forward)return n.services.logger.forward(r,"warn","react-i18next::",!0);wf(r[0])&&(r[0]=`react-i18next:: ${r[0]}`),n?.services?.logger?.warn?n.services.logger.warn(...r):console?.warn&&console.warn(...r)},AF={},P3=(n,e,t,i)=>{wf(t)&&AF[t]||(wf(t)&&(AF[t]=new Date),ew(n,e,t,i))},sZ=(n,e)=>()=>{if(n.isInitialized)e();else{const t=()=>{setTimeout(()=>{n.off("initialized",t)},0),e()};n.on("initialized",t)}},e9=(n,e,t)=>{n.loadNamespaces(e,sZ(n,t))},hF=(n,e,t,i)=>{if(wf(t)&&(t=[t]),n.options.preload&&n.options.preload.indexOf(e)>-1)return e9(n,t,i);t.forEach(r=>{n.options.ns.indexOf(r)<0&&n.options.ns.push(r)}),n.loadLanguages(e,sZ(n,i))},Nle=(n,e,t={})=>!e.languages||!e.languages.length?(P3(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(n,{lng:t.lng,precheck:(i,r)=>{if(t.bindI18n&&t.bindI18n.indexOf("languageChanging")>-1&&i.services.backendConnector.backend&&i.isLanguageChangingTo&&!r(i.isLanguageChangingTo,n))return!1}}),Gle=n=>n.displayName||n.name||(wf(n)&&n.length>0?n:"Unknown"),wf=n=>typeof n=="string",Dy=n=>typeof n=="object"&&n!==null,Wle=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,Qle={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},qle=n=>Qle[n],Yle=n=>n.replace(Wle,qle);let t9={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:Yle};const $le=(n={})=>{t9={...t9,...n}},aZ=()=>t9;let lZ;const Vle=n=>{lZ=n},ND=()=>lZ,aO=(n,e)=>{if(!n)return!1;const t=n.props?.children??n.children;return e?t.length>0:!!t},lO=n=>{if(!n)return[];const e=n.props?.children??n.children;return n.props?.i18nIsDynamicList?w_(e):e},Hle=n=>Array.isArray(n)&&n.every(St.isValidElement),w_=n=>Array.isArray(n)?n:[n],Zle=(n,e)=>{const t={...e};return t.props=Object.assign(n.props,e.props),t},uZ=(n,e,t,i)=>{if(!n)return"";let r="";const o=w_(n),s=e?.transSupportBasicHtmlNodes?e.transKeepBasicHtmlNodesFor??[]:[];return o.forEach((a,c)=>{if(wf(a)){r+=`${a}`;return}if(St.isValidElement(a)){const{props:h,type:m}=a,y=Object.keys(h).length,M=s.indexOf(m)>-1,x=h.children;if(!x&&M&&!y){r+=`<${m}/>`;return}if(!x&&(!M||y)||h.i18nIsDynamicList){r+=`<${c}></${c}>`;return}if(M&&y===1&&wf(x)){r+=`<${m}>${x}</${m}>`;return}const T=uZ(x,e,t,i);r+=`<${c}>${T}</${c}>`;return}if(a===null){ew(t,"TRANS_NULL_VALUE","Passed in a null value as child",{i18nKey:i});return}if(Dy(a)){const{format:h,...m}=a,y=Object.keys(m);if(y.length===1){const M=h?`${y[0]}, ${h}`:y[0];r+=`{{${M}}}`;return}ew(t,"TRANS_INVALID_OBJ","Invalid child - Object should only have keys {{ value, format }} (format is optional).",{i18nKey:i,child:a});return}ew(t,"TRANS_INVALID_VAR","Passed in a variable like {number} - pass variables for interpolation as full objects like {{number}}.",{i18nKey:i,child:a})}),r},Xle=(n,e,t,i,r,o,s)=>{if(t==="")return[];const a=r.transKeepBasicHtmlNodesFor||[],c=t&&new RegExp(a.map(j=>`<${j}`).join("|")).test(t);if(!n&&!e&&!c&&!s)return[t];const h=e??{},m=j=>{w_(j).forEach(V=>{wf(V)||(aO(V)?m(lO(V)):Dy(V)&&!St.isValidElement(V)&&Object.assign(h,V))})};m(n);const y=jle.parse(`<0>${t}</0>`),M={...h,...o},x=(j,q,V)=>{const H=lO(j),Q=P(H,q.children,V);return Hle(H)&&Q.length===0||j.props?.i18nIsDynamicList?H:Q},T=(j,q,V,H,Q)=>{j.dummy?(j.children=q,V.push(St.cloneElement(j,{key:H},Q?void 0:q))):V.push(...St.Children.map([j],Y=>{const z={...Y.props};return delete z.i18nIsDynamicList,St.createElement(Y.type,{...z,key:H,ref:Y.props.ref??Y.ref},Q?null:q)}))},P=(j,q,V)=>{const H=w_(j);return w_(q).reduce((Y,z,se)=>{const le=z.children?.[0]?.content&&i.services.interpolator.interpolate(z.children[0].content,M,i.language);if(z.type==="tag"){let pe=H[parseInt(z.name,10)];!pe&&e&&(pe=e[z.name]),V.length===1&&!pe&&(pe=V[0][z.name]),pe||(pe={});const de=Object.keys(z.attrs).length!==0?Zle({props:z.attrs},pe):pe,ve=St.isValidElement(de),Ee=ve&&aO(z,!0)&&!z.voidElement,Re=c&&Dy(de)&&de.dummy&&!ve,je=Dy(e)&&Object.hasOwnProperty.call(e,z.name);if(wf(de)){const Ie=i.services.interpolator.interpolate(de,M,i.language);Y.push(Ie)}else if(aO(de)||Ee){const Ie=x(de,z,V);T(de,Ie,Y,se)}else if(Re){const Ie=P(H,z.children,V);T(de,Ie,Y,se)}else if(Number.isNaN(parseFloat(z.name)))if(je){const Ie=x(de,z,V);T(de,Ie,Y,se,z.voidElement)}else if(r.transSupportBasicHtmlNodes&&a.indexOf(z.name)>-1)if(z.voidElement)Y.push(St.createElement(z.name,{key:`${z.name}-${se}`}));else{const Ie=P(H,z.children,V);Y.push(St.createElement(z.name,{key:`${z.name}-${se}`},Ie))}else if(z.voidElement)Y.push(`<${z.name} />`);else{const Ie=P(H,z.children,V);Y.push(`<${z.name}>${Ie}</${z.name}>`)}else if(Dy(de)&&!ve){const Ie=z.children[0]?le:null;Ie&&Y.push(Ie)}else T(de,le,Y,se,z.children.length!==1||!le)}else if(z.type==="text"){const pe=r.transWrapTextNodes,de=s?r.unescape(i.services.interpolator.interpolate(z.content,M,i.language)):i.services.interpolator.interpolate(z.content,M,i.language);pe?Y.push(St.createElement(pe,{key:`${z.name}-${se}`},de)):Y.push(de)}return Y},[])},F=P([{dummy:!0,children:n||[]}],y,w_(n||[]));return lO(F[0])},cZ=(n,e,t)=>{const i=n.key||e,r=St.cloneElement(n,{key:i});if(!r.props||!r.props.children||t.indexOf(`${e}/>`)<0&&t.indexOf(`${e} />`)<0)return r;function o(){return St.createElement(St.Fragment,null,r)}return St.createElement(o,{key:i})},Jle=(n,e)=>n.map((t,i)=>cZ(t,i,e)),eue=(n,e)=>{const t={};return Object.keys(n).forEach(i=>{Object.assign(t,{[i]:cZ(n[i],i,e)})}),t},tue=(n,e,t,i)=>n?Array.isArray(n)?Jle(n,e):Dy(n)?eue(n,e):(P3(t,"TRANS_INVALID_COMPONENTS",'<Trans /> "components" prop expects an object or array',{i18nKey:i}),null):null,nue=n=>!Dy(n)||Array.isArray(n)?!1:Object.keys(n).reduce((e,t)=>e&&Number.isNaN(Number.parseFloat(t)),!0);function iue({children:n,count:e,parent:t,i18nKey:i,context:r,tOptions:o={},values:s,defaults:a,components:c,ns:h,i18n:m,t:y,shouldUnescape:M,...x}){const T=m||ND();if(!T)return P3(T,"NO_I18NEXT_INSTANCE","Trans: You need to pass in an i18next instance using i18nextReactModule",{i18nKey:i}),n;const P=y||T.t.bind(T)||(Re=>Re),F={...aZ(),...T.options?.react};let j=h||P.ns||T.options?.defaultNS;j=wf(j)?[j]:j||["translation"];const q=uZ(n,F,T,i),V=a||q||F.transEmptyNodeValue||i,{hashTransKey:H}=F,Q=i||(H?H(q||V):q||V);T.options?.interpolation?.defaultVariables&&(s=s&&Object.keys(s).length>0?{...s,...T.options.interpolation.defaultVariables}:{...T.options.interpolation.defaultVariables});const Y=s||e!==void 0&&!T.options?.interpolation?.alwaysFormat||!n?o.interpolation:{interpolation:{...o.interpolation,prefix:"#$?",suffix:"?$#"}},z={...o,context:r||o.context,count:e,...s,...Y,defaultValue:V,ns:j},se=Q?P(Q,z):V,le=tue(c,se,T,i);let pe=le||n,de=null;nue(le)&&(de=le,pe=n);const ve=Xle(pe,de,se,T,F,z,M),Ee=t??F.defaultTransParent;return Ee?St.createElement(Ee,x,ve):ve}const rue={type:"3rdParty",init(n){$le(n.options.react),Vle(n)}},AZ=St.createContext();class oue{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(t=>{this.usedNamespaces[t]||(this.usedNamespaces[t]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}function Cb({children:n,count:e,parent:t,i18nKey:i,context:r,tOptions:o={},values:s,defaults:a,components:c,ns:h,i18n:m,t:y,shouldUnescape:M,...x}){const{i18n:T,defaultNS:P}=St.useContext(AZ)||{},F=m||T||ND(),j=y||F?.t.bind(F);return iue({children:n,count:e,parent:t,i18nKey:i,context:r,tOptions:o,values:s,defaults:a,components:c,ns:h||j?.ns||P||F?.options?.defaultNS,i18n:F,t:y,shouldUnescape:M,...x})}const sue=(n,e)=>{const t=St.useRef();return St.useEffect(()=>{t.current=n},[n,e]),t.current},hZ=(n,e,t,i)=>n.getFixedT(e,t,i),aue=(n,e,t,i)=>St.useCallback(hZ(n,e,t,i),[n,e,t,i]),lue=(n,e={})=>{const{i18n:t}=e,{i18n:i,defaultNS:r}=St.useContext(AZ)||{},o=t||i||ND();if(o&&!o.reportNamespaces&&(o.reportNamespaces=new oue),!o){P3(o,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const H=(Y,z)=>wf(z)?z:Dy(z)&&wf(z.defaultValue)?z.defaultValue:Array.isArray(Y)?Y[Y.length-1]:Y,Q=[H,{},!1];return Q.t=H,Q.i18n={},Q.ready=!1,Q}o.options.react?.wait&&P3(o,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const s={...aZ(),...o.options.react,...e},{useSuspense:a,keyPrefix:c}=s;let h=r||o.options?.defaultNS;h=wf(h)?[h]:h||["translation"],o.reportNamespaces.addUsedNamespaces?.(h);const m=(o.isInitialized||o.initializedStoreOnce)&&h.every(H=>Nle(H,o,s)),y=aue(o,e.lng||null,s.nsMode==="fallback"?h:h[0],c),M=()=>y,x=()=>hZ(o,e.lng||null,s.nsMode==="fallback"?h:h[0],c),[T,P]=St.useState(M);let F=h.join();e.lng&&(F=`${e.lng}${F}`);const j=sue(F),q=St.useRef(!0);St.useEffect(()=>{const{bindI18n:H,bindI18nStore:Q}=s;q.current=!0,!m&&!a&&(e.lng?hF(o,e.lng,h,()=>{q.current&&P(x)}):e9(o,h,()=>{q.current&&P(x)})),m&&j&&j!==F&&q.current&&P(x);const Y=()=>{q.current&&P(x)};return H&&o?.on(H,Y),Q&&o?.store.on(Q,Y),()=>{q.current=!1,o&&H&&H?.split(" ").forEach(z=>o.off(z,Y)),Q&&o&&Q.split(" ").forEach(z=>o.store.off(z,Y))}},[o,F]),St.useEffect(()=>{q.current&&m&&P(M)},[o,c,m]);const V=[T,o,m];if(V.t=T,V.i18n=o,V.ready=m,m||!m&&!a)return V;throw new Promise(H=>{e.lng?hF(o,e.lng,h,()=>H()):e9(o,h,()=>H())})},No=(n,e={})=>function(i){function r({forwardedRef:s,...a}){const[c,h,m]=lue(n,{...a,keyPrefix:e.keyPrefix}),y={...a,t:c,i18n:h,tReady:m};return e.withRef&&s?y.ref=s:!e.withRef&&s&&(y.forwardedRef=s),St.createElement(i,y)}r.displayName=`withI18nextTranslation(${Gle(i)})`,r.WrappedComponent=i;const o=(s,a)=>St.createElement(r,Object.assign({},s,{forwardedRef:a}));return e.withRef?St.forwardRef(o):r};function fa(){var n="/home/runner/work/maputnik/maputnik/src/i18n.ts",e="529ee327821ff95d86675c5d3e41229f0d9cb0df",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/i18n.ts",statementMap:{0:{start:{line:5,column:34},end:{line:13,column:1}},1:{start:{line:14,column:0},end:{line:40,column:3}},2:{start:{line:16,column:4},end:{line:18,column:5}},3:{start:{line:17,column:6},end:{line:17,column:16}},4:{start:{line:19,column:4},end:{line:19,column:593}},5:{start:{line:19,column:119},end:{line:19,column:158}},6:{start:{line:19,column:198},end:{line:19,column:237}},7:{start:{line:19,column:277},end:{line:19,column:316}},8:{start:{line:19,column:356},end:{line:19,column:395}},9:{start:{line:19,column:435},end:{line:19,column:474}},10:{start:{line:19,column:514},end:{line:19,column:553}},11:{start:{line:35,column:4},end:{line:37,column:5}},12:{start:{line:36,column:6},end:{line:36,column:13}},13:{start:{line:38,column:4},end:{line:38,column:77}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:15,column:21},end:{line:15,column:22}},loc:{start:{line:15,column:35},end:{line:20,column:3}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:19,column:113},end:{line:19,column:114}},loc:{start:{line:19,column:119},end:{line:19,column:158}},line:19},2:{name:"(anonymous_2)",decl:{start:{line:19,column:192},end:{line:19,column:193}},loc:{start:{line:19,column:198},end:{line:19,column:237}},line:19},3:{name:"(anonymous_3)",decl:{start:{line:19,column:271},end:{line:19,column:272}},loc:{start:{line:19,column:277},end:{line:19,column:316}},line:19},4:{name:"(anonymous_4)",decl:{start:{line:19,column:350},end:{line:19,column:351}},loc:{start:{line:19,column:356},end:{line:19,column:395}},line:19},5:{name:"(anonymous_5)",decl:{start:{line:19,column:429},end:{line:19,column:430}},loc:{start:{line:19,column:435},end:{line:19,column:474}},line:19},6:{name:"(anonymous_6)",decl:{start:{line:19,column:508},end:{line:19,column:509}},loc:{start:{line:19,column:514},end:{line:19,column:553}},line:19},7:{name:"(anonymous_7)",decl:{start:{line:34,column:21},end:{line:34,column:22}},loc:{start:{line:34,column:41},end:{line:39,column:3}},line:34}},branchMap:{0:{loc:{start:{line:16,column:4},end:{line:18,column:5}},type:"if",locations:[{start:{line:16,column:4},end:{line:18,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:16},1:{loc:{start:{line:35,column:4},end:{line:37,column:5}},type:"if",locations:[{start:{line:35,column:4},end:{line:37,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:35}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/i18n.ts"],names:[],mappings:"AAAA,MAAA,CAAA,oCAAA,CAAA,IAAA,CAAA,CAAA,CAAA,IAAA,CAAA,OAAA,CAAA,MAAA,CAAA,MAAA,CAAA,EAAA,CAAA,CAAA,MAAA,CAAO,IAAA,CAAA,IAAA,CAAU,CAAA,OAAA,CAAA;AACjB,MAAA,CAAO,QAAA,CAAA,IAAA,CAAc,CAAA,OAAA,CAAA,OAAA,CAAA,gBAAA,CAAA;AACrB,MAAA,CAAO,kBAAA,CAAA,IAAA,CAAwB,CAAA,OAAA,CAAA,SAAA,CAAA,EAAA,CAAA,OAAA,CAAA;AAC/B,MAAA,CAAA,CAAA,CAAS,gBAAA,CAAA,CAAA,CAAA,IAAA,CAAwB,CAAA,KAAA,CAAA,OAAA,CAAA;AAE1B,MAAA,CAAA,KAAA,CAAM,kBAAA,CAAA,CAAA,CAAqB;AAAA,CAAA,CAChC,CAAA,EAAA,CAAA,CAAA,CAAM,CAAA,OAAA,CAAA;AAAA,CAAA,CACN,CAAA,EAAA,CAAA,CAAA,CAAM,CAAA,OAAA,CAAA;AAAA,CAAA,CACN,CAAA,EAAA,CAAA,CAAA,CAAM,CAAA,IAAA,CAAA,GAAA,CAAA;AAAA,CAAA,CACN,CAAA,EAAA,CAAA,CAAA,CAAM,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;AAAA,CAAA,CACN,CAAA,EAAA,CAAA,CAAA,CAAM,CAAA,QAAA,CAAA;AAAA,CAAA,CACN,CAAA,EAAA,CAAA,CAAA,CAAM,CAAA,CAAA,CAAA,CAAA,CAAA;AAAA,CAAA,CACN,CAAA,EAAA,CAAA,CAAA,CAAM,CAAA,CAAA,CAAA,CAAA,CAAA;AACR,CAAA;AAEA,IAAA,CACG,GAAA,CAAI,QAAQ,CAAA,CACZ,GAAA;AAAA,CAAA,CACC,kBAAA,CAAmB,CAAC,IAAA,CAAA,CAAc,EAAA,CAAA,CAAA,CAAA,CAAA,CAAe;AAC/C,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,CAAI,SAAS,CAAA,EAAA,CAAA,CAAA,CAAM;AAEjB,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,MAAA,CAAO,CAAC,CAAA;AAAA,CAAA,CAAA,CAAA,CACV;AACA,CAAA,CAAA,CAAA,CAAA,MAAA,CAAO,oCAAA,CAAA,CAAA,0fAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,OAAA,CAAA,CAAA,CAAA,IAAA,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,CAAA,IAAA,CAAA,CAAA,CAAA,CAAA,CAA8B;AAAA,CAAA,CACvC,CAAC;AACH,CAAA,CACC,GAAA,CAAI,gBAAgB,CAAA,CACpB,IAAA,CAAK;AAAA,CAAA,CACJ,aAAA,CAAA,CAAe,MAAA,CAAO,IAAA,CAAK,kBAAkB,CAAA;AAAA,CAAA,CAC7C,YAAA,CAAA,CAAc,KAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,EAAA,CAAA,GAAA,CAAA,GAAA,CAAA,IAAA,CAAA,EAAA,CAAA,IAAA,CAAA,QAAA,CAAA;AAAA,CAAA,CACd,WAAA,CAAA,CAAa,KAAA;AAAA,CAAA,CACb,aAAA,CAAA,CAAe;AAAA,CAAA,CAAA,CAAA,CACb,WAAA,CAAA,CAAa;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,KAAA,CAAA,OAAA,CAAA,OAAA,CAAA,GAAA,CAAA;AAAA,CAAA,CACf,CAAA;AAAA,CAAA,CACA,WAAA,CAAA,CAAa,IAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,IAAA,CAAA,KAAA,CAAA,EAAA,CAAA,EAAA,CAAA,GAAA,CAAA,GAAA,CAAA,iBAAA,CAAA,EAAA,CAAA;AAAA,CAAA,CACb,WAAA,CAAA,CAAa,KAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,GAAA,CAAA,GAAA,CAAA,QAAA,CAAA,EAAA,CAAA,KAAA,CAAA,EAAA,CAAA,EAAA,CAAA,GAAA,CAAA,GAAA,CAAA,GAAA,CAAA,OAAA,CAAA,QAAA,CAAA,EAAA,CAAA,GAAA,CAAA;AAAA,CAAA,CACb,iBAAA,CAAA,CAAmB,CAAC,IAAA,CAAA,CAAM,GAAA,CAAA,CAAK,GAAA,CAAA,CAAA,CAAA,CAAA,CAAQ;AACrC,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,CAAI,IAAA,CAAK,CAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAM,CAAA,EAAA,CAAA,CAAA,CAAM;AAAE,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,MAAA;AAAA,CAAA,CAAA,CAAA,CAAQ;AAChC,CAAA,CAAA,CAAA,CAAA,OAAA,CAAQ,IAAA,CAAK,4BAA4B,GAAG,CAAA,CAAA,CAAA,EAAA,CAAA,CAAA,CAAA,CAAS,KAAK,IAAA,CAAK,CAAA,CAAA,CAAA,CAAI,CAAC,CAAA,CAAA,CAAG,CAAA;AAAA,CAAA,CACzE;AACF,CAAC,CAAA;AAEH,MAAA,CAAA,OAAA,CAAe,IAAA;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"529ee327821ff95d86675c5d3e41229f0d9cb0df"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return fa=function(){return s},s}fa();const dZ=(fa().s[0]++,{de:"Deutsch",en:"English",fr:"Franais",he:"",it:"Italiano",ja:"",zh:""});fa().s[1]++;_A.use(rZ).use(Rle((n,e)=>(fa().f[0]++,fa().s[2]++,n==="en"?(fa().b[0][0]++,fa().s[3]++,{}):(fa().b[0][1]++,fa().s[4]++,Zae(Object.assign({"./locales/de/translation.json":()=>(fa().f[1]++,fa().s[5]++,TC(()=>import("./translation-CQD4fuPu.js"),[])),"./locales/fr/translation.json":()=>(fa().f[2]++,fa().s[6]++,TC(()=>import("./translation-XoriI0W-.js"),[])),"./locales/he/translation.json":()=>(fa().f[3]++,fa().s[7]++,TC(()=>import("./translation-aD1CAGoy.js"),[])),"./locales/it/translation.json":()=>(fa().f[4]++,fa().s[8]++,TC(()=>import("./translation-CZ64AJ8H.js"),[])),"./locales/ja/translation.json":()=>(fa().f[5]++,fa().s[9]++,TC(()=>import("./translation-BhJ-ufwk.js"),[])),"./locales/zh/translation.json":()=>(fa().f[6]++,fa().s[10]++,TC(()=>import("./translation-BrzYPxJn.js"),[]))}),`./locales/${n}/${e}.json`,4))))).use(rue).init({supportedLngs:Object.keys(dZ),keySeparator:!1,nsSeparator:!1,interpolation:{escapeValue:!1},saveMissing:!0,fallbackLng:!1,missingKeyHandler:(n,e,t)=>{if(fa().f[7]++,fa().s[11]++,n[0]==="en"){fa().b[1][0]++,fa().s[12]++;return}else fa().b[1][1]++;fa().s[13]++,console.warn(`Missing translation for "${t}" in "${n.join(", ")}"`)}});var T2={exports:{}};T2.exports;var dF;function uue(){return dF||(dF=1,(function(n,e){var t=200,i="__lodash_hash_undefined__",r=9007199254740991,o="[object Arguments]",s="[object Array]",a="[object Boolean]",c="[object Date]",h="[object Error]",m="[object Function]",y="[object GeneratorFunction]",M="[object Map]",x="[object Number]",T="[object Object]",P="[object Promise]",F="[object RegExp]",j="[object Set]",q="[object String]",V="[object Symbol]",H="[object WeakMap]",Q="[object ArrayBuffer]",Y="[object DataView]",z="[object Float32Array]",se="[object Float64Array]",le="[object Int8Array]",pe="[object Int16Array]",de="[object Int32Array]",ve="[object Uint8Array]",Ee="[object Uint8ClampedArray]",Re="[object Uint16Array]",je="[object Uint32Array]",Ie=/[\\^$.*+?()[\]{}|]/g,qe=/\w*$/,tt=/^\[object .+?Constructor\]$/,At=/^(?:0|[1-9]\d*)$/,ke={};ke[o]=ke[s]=ke[Q]=ke[Y]=ke[a]=ke[c]=ke[z]=ke[se]=ke[le]=ke[pe]=ke[de]=ke[M]=ke[x]=ke[T]=ke[F]=ke[j]=ke[q]=ke[V]=ke[ve]=ke[Ee]=ke[Re]=ke[je]=!0,ke[h]=ke[m]=ke[H]=!1;var we=typeof window=="object"&&window&&window.Object===Object&&window,ze=typeof self=="object"&&self&&self.Object===Object&&self,Me=we||ze||Function("return this")(),lt=e&&!e.nodeType&&e,nt=lt&&!0&&n&&!n.nodeType&&n,bt=nt&&nt.exports===lt;function Bt(X,Ce){return X.set(Ce[0],Ce[1]),X}function Ke(X,Ce){return X.add(Ce),X}function Te(X,Ce){for(var Qe=-1,Et=X?X.length:0;++Qe<Et&&Ce(X[Qe],Qe,X)!==!1;);return X}function Se(X,Ce){for(var Qe=-1,Et=Ce.length,jn=X.length;++Qe<Et;)X[jn+Qe]=Ce[Qe];return X}function We(X,Ce,Qe,Et){for(var jn=-1,On=X?X.length:0;++jn<On;)Qe=Ce(Qe,X[jn],jn,X);return Qe}function at(X,Ce){for(var Qe=-1,Et=Array(X);++Qe<X;)Et[Qe]=Ce(Qe);return Et}function it(X,Ce){return X?.[Ce]}function ft(X){var Ce=!1;if(X!=null&&typeof X.toString!="function")try{Ce=!!(X+"")}catch{}return Ce}function Dt(X){var Ce=-1,Qe=Array(X.size);return X.forEach(function(Et,jn){Qe[++Ce]=[jn,Et]}),Qe}function Ot(X,Ce){return function(Qe){return X(Ce(Qe))}}function Jt(X){var Ce=-1,Qe=Array(X.size);return X.forEach(function(Et){Qe[++Ce]=Et}),Qe}var Dn=Array.prototype,Pn=Function.prototype,oi=Object.prototype,In=Me["__core-js_shared__"],Tn=(function(){var X=/[^.]+$/.exec(In&&In.keys&&In.keys.IE_PROTO||"");return X?"Symbol(src)_1."+X:""})(),dn=Pn.toString,$n=oi.hasOwnProperty,Un=oi.toString,It=RegExp("^"+dn.call($n).replace(Ie,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),_e=bt?Me.Buffer:void 0,oe=Me.Symbol,ee=Me.Uint8Array,ne=Ot(Object.getPrototypeOf,Object),ue=Object.create,be=oi.propertyIsEnumerable,Le=Dn.splice,Ve=Object.getOwnPropertySymbols,rt=_e?_e.isBuffer:void 0,ye=Ot(Object.keys,Object),Be=Es(Me,"DataView"),v=Es(Me,"Map"),yt=Es(Me,"Promise"),Mt=Es(Me,"Set"),Pt=Es(Me,"WeakMap"),en=Es(Object,"create"),mt=ko(Be),Qn=ko(v),Xn=ko(yt),Cn=ko(Mt),Fn=ko(Pt),pi=oe?oe.prototype:void 0,Hi=pi?pi.valueOf:void 0;function Ii(X){var Ce=-1,Qe=X?X.length:0;for(this.clear();++Ce<Qe;){var Et=X[Ce];this.set(Et[0],Et[1])}}function Ar(){this.__data__=en?en(null):{}}function ii(X){return this.has(X)&&delete this.__data__[X]}function Fi(X){var Ce=this.__data__;if(en){var Qe=Ce[X];return Qe===i?void 0:Qe}return $n.call(Ce,X)?Ce[X]:void 0}function Ri(X){var Ce=this.__data__;return en?Ce[X]!==void 0:$n.call(Ce,X)}function on(X,Ce){var Qe=this.__data__;return Qe[X]=en&&Ce===void 0?i:Ce,this}Ii.prototype.clear=Ar,Ii.prototype.delete=ii,Ii.prototype.get=Fi,Ii.prototype.has=Ri,Ii.prototype.set=on;function nr(X){var Ce=-1,Qe=X?X.length:0;for(this.clear();++Ce<Qe;){var Et=X[Ce];this.set(Et[0],Et[1])}}function Go(){this.__data__=[]}function Co(X){var Ce=this.__data__,Qe=Da(Ce,X);if(Qe<0)return!1;var Et=Ce.length-1;return Qe==Et?Ce.pop():Le.call(Ce,Qe,1),!0}function gr(X){var Ce=this.__data__,Qe=Da(Ce,X);return Qe<0?void 0:Ce[Qe][1]}function gn(X){return Da(this.__data__,X)>-1}function Ni(X,Ce){var Qe=this.__data__,Et=Da(Qe,X);return Et<0?Qe.push([X,Ce]):Qe[Et][1]=Ce,this}nr.prototype.clear=Go,nr.prototype.delete=Co,nr.prototype.get=gr,nr.prototype.has=gn,nr.prototype.set=Ni;function ni(X){var Ce=-1,Qe=X?X.length:0;for(this.clear();++Ce<Qe;){var Et=X[Ce];this.set(Et[0],Et[1])}}function ga(){this.__data__={hash:new Ii,map:new(v||nr),string:new Ii}}function Ra(X){return su(this,X).delete(X)}function zs(X){return su(this,X).get(X)}function Pi(X){return su(this,X).has(X)}function kl(X,Ce){return su(this,X).set(X,Ce),this}ni.prototype.clear=ga,ni.prototype.delete=Ra,ni.prototype.get=zs,ni.prototype.has=Pi,ni.prototype.set=kl;function eo(X){this.__data__=new nr(X)}function ya(){this.__data__=new nr}function tu(X){return this.__data__.delete(X)}function Xs(X){return this.__data__.get(X)}function Ko(X){return this.__data__.has(X)}function Zo(X,Ce){var Qe=this.__data__;if(Qe instanceof nr){var Et=Qe.__data__;if(!v||Et.length<t-1)return Et.push([X,Ce]),this;Qe=this.__data__=new ni(Et)}return Qe.set(X,Ce),this}eo.prototype.clear=ya,eo.prototype.delete=tu,eo.prototype.get=Xs,eo.prototype.has=Ko,eo.prototype.set=Zo;function gs(X,Ce){var Qe=as(X)||fo(X)?at(X.length,String):[],Et=Qe.length,jn=!!Et;for(var On in X)$n.call(X,On)&&!(jn&&(On=="length"||aa(On,Et)))&&Qe.push(On);return Qe}function jr(X,Ce,Qe){var Et=X[Ce];(!($n.call(X,Ce)&&ss(Et,Qe))||Qe===void 0&&!(Ce in X))&&(X[Ce]=Qe)}function Da(X,Ce){for(var Qe=X.length;Qe--;)if(ss(X[Qe][0],Ce))return Qe;return-1}function os(X,Ce){return X&&wu(Ce,Nr(Ce),X)}function Bc(X,Ce,Qe,Et,jn,On,_i){var zi;if(Et&&(zi=On?Et(X,jn,On,_i):Et(X)),zi!==void 0)return zi;if(!oo(X))return X;var ki=as(X);if(ki){if(zi=Js(X),!Ce)return Tc(X,zi)}else{var Ei=Tl(X),Cr=Ei==m||Ei==y;if(Ua(X))return Lo(X,Ce);if(Ei==T||Ei==o||Cr&&!On){if(ft(X))return On?X:{};if(zi=Ui(Cr?{}:X),!Ce)return ru(X,os(zi,X))}else{if(!ke[Ei])return On?X:{};zi=au(X,Ei,Bc,Ce)}}_i||(_i=new eo);var so=_i.get(X);if(so)return so;if(_i.set(X,zi),!ki)var yr=Qe?ou(X):Nr(X);return Te(yr||X,function(Ji,rr){yr&&(rr=Ji,Ji=X[rr]),jr(zi,rr,Bc(Ji,Ce,Qe,Et,rr,X,_i))}),zi}function Mu(X){return oo(X)?ue(X):{}}function nu(X,Ce,Qe){var Et=Ce(X);return as(X)?Et:Se(Et,Qe(X))}function oA(X){return Un.call(X)}function tc(X){if(!oo(X)||ir(X))return!1;var Ce=So(X)||ft(X)?It:tt;return Ce.test(ko(X))}function gl(X){if(!Pa(X))return ye(X);var Ce=[];for(var Qe in Object(X))$n.call(X,Qe)&&Qe!="constructor"&&Ce.push(Qe);return Ce}function Lo(X,Ce){if(Ce)return X.slice();var Qe=new X.constructor(X.length);return X.copy(Qe),Qe}function nc(X){var Ce=new X.constructor(X.byteLength);return new ee(Ce).set(new ee(X)),Ce}function iu(X,Ce){var Qe=Ce?nc(X.buffer):X.buffer;return new X.constructor(Qe,X.byteOffset,X.byteLength)}function Ic(X,Ce,Qe){var Et=Ce?Qe(Dt(X),!0):Dt(X);return We(Et,Bt,new X.constructor)}function ic(X){var Ce=new X.constructor(X.source,qe.exec(X));return Ce.lastIndex=X.lastIndex,Ce}function kc(X,Ce,Qe){var Et=Ce?Qe(Jt(X),!0):Jt(X);return We(Et,Ke,new X.constructor)}function ZA(X){return Hi?Object(Hi.call(X)):{}}function Ss(X,Ce){var Qe=Ce?nc(X.buffer):X.buffer;return new X.constructor(Qe,X.byteOffset,X.length)}function Tc(X,Ce){var Qe=-1,Et=X.length;for(Ce||(Ce=Array(Et));++Qe<Et;)Ce[Qe]=X[Qe];return Ce}function wu(X,Ce,Qe,Et){Qe||(Qe={});for(var jn=-1,On=Ce.length;++jn<On;){var _i=Ce[jn],zi=void 0;jr(Qe,_i,zi===void 0?X[_i]:zi)}return Qe}function ru(X,Ce){return wu(X,wo(X),Ce)}function ou(X){return nu(X,Nr,wo)}function su(X,Ce){var Qe=X.__data__;return Su(Ce)?Qe[typeof Ce=="string"?"string":"hash"]:Qe.map}function Es(X,Ce){var Qe=it(X,Ce);return tc(Qe)?Qe:void 0}var wo=Ve?Ot(Ve,Object):Gi,Tl=oA;(Be&&Tl(new Be(new ArrayBuffer(1)))!=Y||v&&Tl(new v)!=M||yt&&Tl(yt.resolve())!=P||Mt&&Tl(new Mt)!=j||Pt&&Tl(new Pt)!=H)&&(Tl=function(X){var Ce=Un.call(X),Qe=Ce==T?X.constructor:void 0,Et=Qe?ko(Qe):void 0;if(Et)switch(Et){case mt:return Y;case Qn:return M;case Xn:return P;case Cn:return j;case Fn:return H}return Ce});function Js(X){var Ce=X.length,Qe=X.constructor(Ce);return Ce&&typeof X[0]=="string"&&$n.call(X,"index")&&(Qe.index=X.index,Qe.input=X.input),Qe}function Ui(X){return typeof X.constructor=="function"&&!Pa(X)?Mu(ne(X)):{}}function au(X,Ce,Qe,Et){var jn=X.constructor;switch(Ce){case Q:return nc(X);case a:case c:return new jn(+X);case Y:return iu(X,Et);case z:case se:case le:case pe:case de:case ve:case Ee:case Re:case je:return Ss(X,Et);case M:return Ic(X,Et,Qe);case x:case q:return new jn(X);case F:return ic(X);case j:return kc(X,Et,Qe);case V:return ZA(X)}}function aa(X,Ce){return Ce=Ce??r,!!Ce&&(typeof X=="number"||At.test(X))&&X>-1&&X%1==0&&X<Ce}function Su(X){var Ce=typeof X;return Ce=="string"||Ce=="number"||Ce=="symbol"||Ce=="boolean"?X!=="__proto__":X===null}function ir(X){return!!Tn&&Tn in X}function Pa(X){var Ce=X&&X.constructor,Qe=typeof Ce=="function"&&Ce.prototype||oi;return X===Qe}function ko(X){if(X!=null){try{return dn.call(X)}catch{}try{return X+""}catch{}}return""}function Rl(X){return Bc(X,!0,!0)}function ss(X,Ce){return X===Ce||X!==X&&Ce!==Ce}function fo(X){return _o(X)&&$n.call(X,"callee")&&(!be.call(X,"callee")||Un.call(X)==o)}var as=Array.isArray;function Fo(X){return X!=null&&ea(X.length)&&!So(X)}function _o(X){return Ka(X)&&Fo(X)}var Ua=rt||Ai;function So(X){var Ce=oo(X)?Un.call(X):"";return Ce==m||Ce==y}function ea(X){return typeof X=="number"&&X>-1&&X%1==0&&X<=r}function oo(X){var Ce=typeof X;return!!X&&(Ce=="object"||Ce=="function")}function Ka(X){return!!X&&typeof X=="object"}function Nr(X){return Fo(X)?gs(X):gl(X)}function Gi(){return[]}function Ai(){return!1}n.exports=Rl})(T2,T2.exports)),T2.exports}var cue=uue();const fF=eu(cue);var uO,pF;function Aue(){if(pF)return uO;pF=1;var n=NaN,e="[object Symbol]",t=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,r=/^0b[01]+$/i,o=/^0o[0-7]+$/i,s=parseInt,a=Object.prototype,c=a.toString;function h(P,F,j){return P===P&&(j!==void 0&&(P=P<=j?P:j),F!==void 0&&(P=P>=F?P:F)),P}function m(P){var F=typeof P;return!!P&&(F=="object"||F=="function")}function y(P){return!!P&&typeof P=="object"}function M(P){return typeof P=="symbol"||y(P)&&c.call(P)==e}function x(P){if(typeof P=="number")return P;if(M(P))return n;if(m(P)){var F=typeof P.valueOf=="function"?P.valueOf():P;P=m(F)?F+"":F}if(typeof P!="string")return P===0?P:+P;P=P.replace(t,"");var j=r.test(P);return j||o.test(P)?s(P.slice(2),j?2:8):i.test(P)?n:+P}function T(P,F,j){return j===void 0&&(j=F,F=void 0),j!==void 0&&(j=x(j),j=j===j?j:0),F!==void 0&&(F=x(F),F=F===F?F:0),h(x(P),F,j)}return uO=T,uO}var hue=Aue();const mF=eu(hue);var cO={},u2={},gF;function due(){if(gF)return u2;gF=1,u2.byteLength=a,u2.toByteArray=h,u2.fromByteArray=M;for(var n=[],e=[],t=typeof Uint8Array<"u"?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=0,o=i.length;r<o;++r)n[r]=i[r],e[i.charCodeAt(r)]=r;e[45]=62,e[95]=63;function s(x){var T=x.length;if(T%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var P=x.indexOf("=");P===-1&&(P=T);var F=P===T?0:4-P%4;return[P,F]}function a(x){var T=s(x),P=T[0],F=T[1];return(P+F)*3/4-F}function c(x,T,P){return(T+P)*3/4-P}function h(x){var T,P=s(x),F=P[0],j=P[1],q=new t(c(x,F,j)),V=0,H=j>0?F-4:F,Q;for(Q=0;Q<H;Q+=4)T=e[x.charCodeAt(Q)]<<18|e[x.charCodeAt(Q+1)]<<12|e[x.charCodeAt(Q+2)]<<6|e[x.charCodeAt(Q+3)],q[V++]=T>>16&255,q[V++]=T>>8&255,q[V++]=T&255;return j===2&&(T=e[x.charCodeAt(Q)]<<2|e[x.charCodeAt(Q+1)]>>4,q[V++]=T&255),j===1&&(T=e[x.charCodeAt(Q)]<<10|e[x.charCodeAt(Q+1)]<<4|e[x.charCodeAt(Q+2)]>>2,q[V++]=T>>8&255,q[V++]=T&255),q}function m(x){return n[x>>18&63]+n[x>>12&63]+n[x>>6&63]+n[x&63]}function y(x,T,P){for(var F,j=[],q=T;q<P;q+=3)F=(x[q]<<16&16711680)+(x[q+1]<<8&65280)+(x[q+2]&255),j.push(m(F));return j.join("")}function M(x){for(var T,P=x.length,F=P%3,j=[],q=16383,V=0,H=P-F;V<H;V+=q)j.push(y(x,V,V+q>H?H:V+q));return F===1?(T=x[P-1],j.push(n[T>>2]+n[T<<4&63]+"==")):F===2&&(T=(x[P-2]<<8)+x[P-1],j.push(n[T>>10]+n[T>>4&63]+n[T<<2&63]+"=")),j.join("")}return u2}var K5={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var yF;function fue(){return yF||(yF=1,K5.read=function(n,e,t,i,r){var o,s,a=r*8-i-1,c=(1<<a)-1,h=c>>1,m=-7,y=t?r-1:0,M=t?-1:1,x=n[e+y];for(y+=M,o=x&(1<<-m)-1,x>>=-m,m+=a;m>0;o=o*256+n[e+y],y+=M,m-=8);for(s=o&(1<<-m)-1,o>>=-m,m+=i;m>0;s=s*256+n[e+y],y+=M,m-=8);if(o===0)o=1-h;else{if(o===c)return s?NaN:(x?-1:1)*(1/0);s=s+Math.pow(2,i),o=o-h}return(x?-1:1)*s*Math.pow(2,o-i)},K5.write=function(n,e,t,i,r,o){var s,a,c,h=o*8-r-1,m=(1<<h)-1,y=m>>1,M=r===23?Math.pow(2,-24)-Math.pow(2,-77):0,x=i?0:o-1,T=i?1:-1,P=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=m):(s=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-s))<1&&(s--,c*=2),s+y>=1?e+=M/c:e+=M*Math.pow(2,1-y),e*c>=2&&(s++,c/=2),s+y>=m?(a=0,s=m):s+y>=1?(a=(e*c-1)*Math.pow(2,r),s=s+y):(a=e*Math.pow(2,y-1)*Math.pow(2,r),s=0));r>=8;n[t+x]=a&255,x+=T,a/=256,r-=8);for(s=s<<r|a,h+=r;h>0;n[t+x]=s&255,x+=T,s/=256,h-=8);n[t+x-T]|=P*128}),K5}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var vF;function pue(){return vF||(vF=1,(function(n){const e=due(),t=fue(),i=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=a,n.SlowBuffer=q,n.INSPECT_MAX_BYTES=50;const r=2147483647;n.kMaxLength=r,a.TYPED_ARRAY_SUPPORT=o(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function o(){try{const _e=new Uint8Array(1),oe={foo:function(){return 42}};return Object.setPrototypeOf(oe,Uint8Array.prototype),Object.setPrototypeOf(_e,oe),_e.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function s(_e){if(_e>r)throw new RangeError('The value "'+_e+'" is invalid for option "size"');const oe=new Uint8Array(_e);return Object.setPrototypeOf(oe,a.prototype),oe}function a(_e,oe,ee){if(typeof _e=="number"){if(typeof oe=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return y(_e)}return c(_e,oe,ee)}a.poolSize=8192;function c(_e,oe,ee){if(typeof _e=="string")return M(_e,oe);if(ArrayBuffer.isView(_e))return T(_e);if(_e==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof _e);if(Tn(_e,ArrayBuffer)||_e&&Tn(_e.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Tn(_e,SharedArrayBuffer)||_e&&Tn(_e.buffer,SharedArrayBuffer)))return P(_e,oe,ee);if(typeof _e=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const ne=_e.valueOf&&_e.valueOf();if(ne!=null&&ne!==_e)return a.from(ne,oe,ee);const ue=F(_e);if(ue)return ue;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof _e[Symbol.toPrimitive]=="function")return a.from(_e[Symbol.toPrimitive]("string"),oe,ee);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof _e)}a.from=function(_e,oe,ee){return c(_e,oe,ee)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function h(_e){if(typeof _e!="number")throw new TypeError('"size" argument must be of type number');if(_e<0)throw new RangeError('The value "'+_e+'" is invalid for option "size"')}function m(_e,oe,ee){return h(_e),_e<=0?s(_e):oe!==void 0?typeof ee=="string"?s(_e).fill(oe,ee):s(_e).fill(oe):s(_e)}a.alloc=function(_e,oe,ee){return m(_e,oe,ee)};function y(_e){return h(_e),s(_e<0?0:j(_e)|0)}a.allocUnsafe=function(_e){return y(_e)},a.allocUnsafeSlow=function(_e){return y(_e)};function M(_e,oe){if((typeof oe!="string"||oe==="")&&(oe="utf8"),!a.isEncoding(oe))throw new TypeError("Unknown encoding: "+oe);const ee=V(_e,oe)|0;let ne=s(ee);const ue=ne.write(_e,oe);return ue!==ee&&(ne=ne.slice(0,ue)),ne}function x(_e){const oe=_e.length<0?0:j(_e.length)|0,ee=s(oe);for(let ne=0;ne<oe;ne+=1)ee[ne]=_e[ne]&255;return ee}function T(_e){if(Tn(_e,Uint8Array)){const oe=new Uint8Array(_e);return P(oe.buffer,oe.byteOffset,oe.byteLength)}return x(_e)}function P(_e,oe,ee){if(oe<0||_e.byteLength<oe)throw new RangeError('"offset" is outside of buffer bounds');if(_e.byteLength<oe+(ee||0))throw new RangeError('"length" is outside of buffer bounds');let ne;return oe===void 0&&ee===void 0?ne=new Uint8Array(_e):ee===void 0?ne=new Uint8Array(_e,oe):ne=new Uint8Array(_e,oe,ee),Object.setPrototypeOf(ne,a.prototype),ne}function F(_e){if(a.isBuffer(_e)){const oe=j(_e.length)|0,ee=s(oe);return ee.length===0||_e.copy(ee,0,0,oe),ee}if(_e.length!==void 0)return typeof _e.length!="number"||dn(_e.length)?s(0):x(_e);if(_e.type==="Buffer"&&Array.isArray(_e.data))return x(_e.data)}function j(_e){if(_e>=r)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r.toString(16)+" bytes");return _e|0}function q(_e){return+_e!=_e&&(_e=0),a.alloc(+_e)}a.isBuffer=function(oe){return oe!=null&&oe._isBuffer===!0&&oe!==a.prototype},a.compare=function(oe,ee){if(Tn(oe,Uint8Array)&&(oe=a.from(oe,oe.offset,oe.byteLength)),Tn(ee,Uint8Array)&&(ee=a.from(ee,ee.offset,ee.byteLength)),!a.isBuffer(oe)||!a.isBuffer(ee))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(oe===ee)return 0;let ne=oe.length,ue=ee.length;for(let be=0,Le=Math.min(ne,ue);be<Le;++be)if(oe[be]!==ee[be]){ne=oe[be],ue=ee[be];break}return ne<ue?-1:ue<ne?1:0},a.isEncoding=function(oe){switch(String(oe).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(oe,ee){if(!Array.isArray(oe))throw new TypeError('"list" argument must be an Array of Buffers');if(oe.length===0)return a.alloc(0);let ne;if(ee===void 0)for(ee=0,ne=0;ne<oe.length;++ne)ee+=oe[ne].length;const ue=a.allocUnsafe(ee);let be=0;for(ne=0;ne<oe.length;++ne){let Le=oe[ne];if(Tn(Le,Uint8Array))be+Le.length>ue.length?(a.isBuffer(Le)||(Le=a.from(Le)),Le.copy(ue,be)):Uint8Array.prototype.set.call(ue,Le,be);else if(a.isBuffer(Le))Le.copy(ue,be);else throw new TypeError('"list" argument must be an Array of Buffers');be+=Le.length}return ue};function V(_e,oe){if(a.isBuffer(_e))return _e.length;if(ArrayBuffer.isView(_e)||Tn(_e,ArrayBuffer))return _e.byteLength;if(typeof _e!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof _e);const ee=_e.length,ne=arguments.length>2&&arguments[2]===!0;if(!ne&&ee===0)return 0;let ue=!1;for(;;)switch(oe){case"ascii":case"latin1":case"binary":return ee;case"utf8":case"utf-8":return Jt(_e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ee*2;case"hex":return ee>>>1;case"base64":return oi(_e).length;default:if(ue)return ne?-1:Jt(_e).length;oe=(""+oe).toLowerCase(),ue=!0}}a.byteLength=V;function H(_e,oe,ee){let ne=!1;if((oe===void 0||oe<0)&&(oe=0),oe>this.length||((ee===void 0||ee>this.length)&&(ee=this.length),ee<=0)||(ee>>>=0,oe>>>=0,ee<=oe))return"";for(_e||(_e="utf8");;)switch(_e){case"hex":return At(this,oe,ee);case"utf8":case"utf-8":return Re(this,oe,ee);case"ascii":return qe(this,oe,ee);case"latin1":case"binary":return tt(this,oe,ee);case"base64":return Ee(this,oe,ee);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ke(this,oe,ee);default:if(ne)throw new TypeError("Unknown encoding: "+_e);_e=(_e+"").toLowerCase(),ne=!0}}a.prototype._isBuffer=!0;function Q(_e,oe,ee){const ne=_e[oe];_e[oe]=_e[ee],_e[ee]=ne}a.prototype.swap16=function(){const oe=this.length;if(oe%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let ee=0;ee<oe;ee+=2)Q(this,ee,ee+1);return this},a.prototype.swap32=function(){const oe=this.length;if(oe%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let ee=0;ee<oe;ee+=4)Q(this,ee,ee+3),Q(this,ee+1,ee+2);return this},a.prototype.swap64=function(){const oe=this.length;if(oe%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let ee=0;ee<oe;ee+=8)Q(this,ee,ee+7),Q(this,ee+1,ee+6),Q(this,ee+2,ee+5),Q(this,ee+3,ee+4);return this},a.prototype.toString=function(){const oe=this.length;return oe===0?"":arguments.length===0?Re(this,0,oe):H.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(oe){if(!a.isBuffer(oe))throw new TypeError("Argument must be a Buffer");return this===oe?!0:a.compare(this,oe)===0},a.prototype.inspect=function(){let oe="";const ee=n.INSPECT_MAX_BYTES;return oe=this.toString("hex",0,ee).replace(/(.{2})/g,"$1 ").trim(),this.length>ee&&(oe+=" ... "),"<Buffer "+oe+">"},i&&(a.prototype[i]=a.prototype.inspect),a.prototype.compare=function(oe,ee,ne,ue,be){if(Tn(oe,Uint8Array)&&(oe=a.from(oe,oe.offset,oe.byteLength)),!a.isBuffer(oe))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof oe);if(ee===void 0&&(ee=0),ne===void 0&&(ne=oe?oe.length:0),ue===void 0&&(ue=0),be===void 0&&(be=this.length),ee<0||ne>oe.length||ue<0||be>this.length)throw new RangeError("out of range index");if(ue>=be&&ee>=ne)return 0;if(ue>=be)return-1;if(ee>=ne)return 1;if(ee>>>=0,ne>>>=0,ue>>>=0,be>>>=0,this===oe)return 0;let Le=be-ue,Ve=ne-ee;const rt=Math.min(Le,Ve),ye=this.slice(ue,be),Be=oe.slice(ee,ne);for(let v=0;v<rt;++v)if(ye[v]!==Be[v]){Le=ye[v],Ve=Be[v];break}return Le<Ve?-1:Ve<Le?1:0};function Y(_e,oe,ee,ne,ue){if(_e.length===0)return-1;if(typeof ee=="string"?(ne=ee,ee=0):ee>2147483647?ee=2147483647:ee<-2147483648&&(ee=-2147483648),ee=+ee,dn(ee)&&(ee=ue?0:_e.length-1),ee<0&&(ee=_e.length+ee),ee>=_e.length){if(ue)return-1;ee=_e.length-1}else if(ee<0)if(ue)ee=0;else return-1;if(typeof oe=="string"&&(oe=a.from(oe,ne)),a.isBuffer(oe))return oe.length===0?-1:z(_e,oe,ee,ne,ue);if(typeof oe=="number")return oe=oe&255,typeof Uint8Array.prototype.indexOf=="function"?ue?Uint8Array.prototype.indexOf.call(_e,oe,ee):Uint8Array.prototype.lastIndexOf.call(_e,oe,ee):z(_e,[oe],ee,ne,ue);throw new TypeError("val must be string, number or Buffer")}function z(_e,oe,ee,ne,ue){let be=1,Le=_e.length,Ve=oe.length;if(ne!==void 0&&(ne=String(ne).toLowerCase(),ne==="ucs2"||ne==="ucs-2"||ne==="utf16le"||ne==="utf-16le")){if(_e.length<2||oe.length<2)return-1;be=2,Le/=2,Ve/=2,ee/=2}function rt(Be,v){return be===1?Be[v]:Be.readUInt16BE(v*be)}let ye;if(ue){let Be=-1;for(ye=ee;ye<Le;ye++)if(rt(_e,ye)===rt(oe,Be===-1?0:ye-Be)){if(Be===-1&&(Be=ye),ye-Be+1===Ve)return Be*be}else Be!==-1&&(ye-=ye-Be),Be=-1}else for(ee+Ve>Le&&(ee=Le-Ve),ye=ee;ye>=0;ye--){let Be=!0;for(let v=0;v<Ve;v++)if(rt(_e,ye+v)!==rt(oe,v)){Be=!1;break}if(Be)return ye}return-1}a.prototype.includes=function(oe,ee,ne){return this.indexOf(oe,ee,ne)!==-1},a.prototype.indexOf=function(oe,ee,ne){return Y(this,oe,ee,ne,!0)},a.prototype.lastIndexOf=function(oe,ee,ne){return Y(this,oe,ee,ne,!1)};function se(_e,oe,ee,ne){ee=Number(ee)||0;const ue=_e.length-ee;ne?(ne=Number(ne),ne>ue&&(ne=ue)):ne=ue;const be=oe.length;ne>be/2&&(ne=be/2);let Le;for(Le=0;Le<ne;++Le){const Ve=parseInt(oe.substr(Le*2,2),16);if(dn(Ve))return Le;_e[ee+Le]=Ve}return Le}function le(_e,oe,ee,ne){return In(Jt(oe,_e.length-ee),_e,ee,ne)}function pe(_e,oe,ee,ne){return In(Dn(oe),_e,ee,ne)}function de(_e,oe,ee,ne){return In(oi(oe),_e,ee,ne)}function ve(_e,oe,ee,ne){return In(Pn(oe,_e.length-ee),_e,ee,ne)}a.prototype.write=function(oe,ee,ne,ue){if(ee===void 0)ue="utf8",ne=this.length,ee=0;else if(ne===void 0&&typeof ee=="string")ue=ee,ne=this.length,ee=0;else if(isFinite(ee))ee=ee>>>0,isFinite(ne)?(ne=ne>>>0,ue===void 0&&(ue="utf8")):(ue=ne,ne=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const be=this.length-ee;if((ne===void 0||ne>be)&&(ne=be),oe.length>0&&(ne<0||ee<0)||ee>this.length)throw new RangeError("Attempt to write outside buffer bounds");ue||(ue="utf8");let Le=!1;for(;;)switch(ue){case"hex":return se(this,oe,ee,ne);case"utf8":case"utf-8":return le(this,oe,ee,ne);case"ascii":case"latin1":case"binary":return pe(this,oe,ee,ne);case"base64":return de(this,oe,ee,ne);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ve(this,oe,ee,ne);default:if(Le)throw new TypeError("Unknown encoding: "+ue);ue=(""+ue).toLowerCase(),Le=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Ee(_e,oe,ee){return oe===0&&ee===_e.length?e.fromByteArray(_e):e.fromByteArray(_e.slice(oe,ee))}function Re(_e,oe,ee){ee=Math.min(_e.length,ee);const ne=[];let ue=oe;for(;ue<ee;){const be=_e[ue];let Le=null,Ve=be>239?4:be>223?3:be>191?2:1;if(ue+Ve<=ee){let rt,ye,Be,v;switch(Ve){case 1:be<128&&(Le=be);break;case 2:rt=_e[ue+1],(rt&192)===128&&(v=(be&31)<<6|rt&63,v>127&&(Le=v));break;case 3:rt=_e[ue+1],ye=_e[ue+2],(rt&192)===128&&(ye&192)===128&&(v=(be&15)<<12|(rt&63)<<6|ye&63,v>2047&&(v<55296||v>57343)&&(Le=v));break;case 4:rt=_e[ue+1],ye=_e[ue+2],Be=_e[ue+3],(rt&192)===128&&(ye&192)===128&&(Be&192)===128&&(v=(be&15)<<18|(rt&63)<<12|(ye&63)<<6|Be&63,v>65535&&v<1114112&&(Le=v))}}Le===null?(Le=65533,Ve=1):Le>65535&&(Le-=65536,ne.push(Le>>>10&1023|55296),Le=56320|Le&1023),ne.push(Le),ue+=Ve}return Ie(ne)}const je=4096;function Ie(_e){const oe=_e.length;if(oe<=je)return String.fromCharCode.apply(String,_e);let ee="",ne=0;for(;ne<oe;)ee+=String.fromCharCode.apply(String,_e.slice(ne,ne+=je));return ee}function qe(_e,oe,ee){let ne="";ee=Math.min(_e.length,ee);for(let ue=oe;ue<ee;++ue)ne+=String.fromCharCode(_e[ue]&127);return ne}function tt(_e,oe,ee){let ne="";ee=Math.min(_e.length,ee);for(let ue=oe;ue<ee;++ue)ne+=String.fromCharCode(_e[ue]);return ne}function At(_e,oe,ee){const ne=_e.length;(!oe||oe<0)&&(oe=0),(!ee||ee<0||ee>ne)&&(ee=ne);let ue="";for(let be=oe;be<ee;++be)ue+=$n[_e[be]];return ue}function ke(_e,oe,ee){const ne=_e.slice(oe,ee);let ue="";for(let be=0;be<ne.length-1;be+=2)ue+=String.fromCharCode(ne[be]+ne[be+1]*256);return ue}a.prototype.slice=function(oe,ee){const ne=this.length;oe=~~oe,ee=ee===void 0?ne:~~ee,oe<0?(oe+=ne,oe<0&&(oe=0)):oe>ne&&(oe=ne),ee<0?(ee+=ne,ee<0&&(ee=0)):ee>ne&&(ee=ne),ee<oe&&(ee=oe);const ue=this.subarray(oe,ee);return Object.setPrototypeOf(ue,a.prototype),ue};function we(_e,oe,ee){if(_e%1!==0||_e<0)throw new RangeError("offset is not uint");if(_e+oe>ee)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(oe,ee,ne){oe=oe>>>0,ee=ee>>>0,ne||we(oe,ee,this.length);let ue=this[oe],be=1,Le=0;for(;++Le<ee&&(be*=256);)ue+=this[oe+Le]*be;return ue},a.prototype.readUintBE=a.prototype.readUIntBE=function(oe,ee,ne){oe=oe>>>0,ee=ee>>>0,ne||we(oe,ee,this.length);let ue=this[oe+--ee],be=1;for(;ee>0&&(be*=256);)ue+=this[oe+--ee]*be;return ue},a.prototype.readUint8=a.prototype.readUInt8=function(oe,ee){return oe=oe>>>0,ee||we(oe,1,this.length),this[oe]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(oe,ee){return oe=oe>>>0,ee||we(oe,2,this.length),this[oe]|this[oe+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(oe,ee){return oe=oe>>>0,ee||we(oe,2,this.length),this[oe]<<8|this[oe+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(oe,ee){return oe=oe>>>0,ee||we(oe,4,this.length),(this[oe]|this[oe+1]<<8|this[oe+2]<<16)+this[oe+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(oe,ee){return oe=oe>>>0,ee||we(oe,4,this.length),this[oe]*16777216+(this[oe+1]<<16|this[oe+2]<<8|this[oe+3])},a.prototype.readBigUInt64LE=Un(function(oe){oe=oe>>>0,it(oe,"offset");const ee=this[oe],ne=this[oe+7];(ee===void 0||ne===void 0)&&ft(oe,this.length-8);const ue=ee+this[++oe]*2**8+this[++oe]*2**16+this[++oe]*2**24,be=this[++oe]+this[++oe]*2**8+this[++oe]*2**16+ne*2**24;return BigInt(ue)+(BigInt(be)<<BigInt(32))}),a.prototype.readBigUInt64BE=Un(function(oe){oe=oe>>>0,it(oe,"offset");const ee=this[oe],ne=this[oe+7];(ee===void 0||ne===void 0)&&ft(oe,this.length-8);const ue=ee*2**24+this[++oe]*2**16+this[++oe]*2**8+this[++oe],be=this[++oe]*2**24+this[++oe]*2**16+this[++oe]*2**8+ne;return(BigInt(ue)<<BigInt(32))+BigInt(be)}),a.prototype.readIntLE=function(oe,ee,ne){oe=oe>>>0,ee=ee>>>0,ne||we(oe,ee,this.length);let ue=this[oe],be=1,Le=0;for(;++Le<ee&&(be*=256);)ue+=this[oe+Le]*be;return be*=128,ue>=be&&(ue-=Math.pow(2,8*ee)),ue},a.prototype.readIntBE=function(oe,ee,ne){oe=oe>>>0,ee=ee>>>0,ne||we(oe,ee,this.length);let ue=ee,be=1,Le=this[oe+--ue];for(;ue>0&&(be*=256);)Le+=this[oe+--ue]*be;return be*=128,Le>=be&&(Le-=Math.pow(2,8*ee)),Le},a.prototype.readInt8=function(oe,ee){return oe=oe>>>0,ee||we(oe,1,this.length),this[oe]&128?(255-this[oe]+1)*-1:this[oe]},a.prototype.readInt16LE=function(oe,ee){oe=oe>>>0,ee||we(oe,2,this.length);const ne=this[oe]|this[oe+1]<<8;return ne&32768?ne|4294901760:ne},a.prototype.readInt16BE=function(oe,ee){oe=oe>>>0,ee||we(oe,2,this.length);const ne=this[oe+1]|this[oe]<<8;return ne&32768?ne|4294901760:ne},a.prototype.readInt32LE=function(oe,ee){return oe=oe>>>0,ee||we(oe,4,this.length),this[oe]|this[oe+1]<<8|this[oe+2]<<16|this[oe+3]<<24},a.prototype.readInt32BE=function(oe,ee){return oe=oe>>>0,ee||we(oe,4,this.length),this[oe]<<24|this[oe+1]<<16|this[oe+2]<<8|this[oe+3]},a.prototype.readBigInt64LE=Un(function(oe){oe=oe>>>0,it(oe,"offset");const ee=this[oe],ne=this[oe+7];(ee===void 0||ne===void 0)&&ft(oe,this.length-8);const ue=this[oe+4]+this[oe+5]*2**8+this[oe+6]*2**16+(ne<<24);return(BigInt(ue)<<BigInt(32))+BigInt(ee+this[++oe]*2**8+this[++oe]*2**16+this[++oe]*2**24)}),a.prototype.readBigInt64BE=Un(function(oe){oe=oe>>>0,it(oe,"offset");const ee=this[oe],ne=this[oe+7];(ee===void 0||ne===void 0)&&ft(oe,this.length-8);const ue=(ee<<24)+this[++oe]*2**16+this[++oe]*2**8+this[++oe];return(BigInt(ue)<<BigInt(32))+BigInt(this[++oe]*2**24+this[++oe]*2**16+this[++oe]*2**8+ne)}),a.prototype.readFloatLE=function(oe,ee){return oe=oe>>>0,ee||we(oe,4,this.length),t.read(this,oe,!0,23,4)},a.prototype.readFloatBE=function(oe,ee){return oe=oe>>>0,ee||we(oe,4,this.length),t.read(this,oe,!1,23,4)},a.prototype.readDoubleLE=function(oe,ee){return oe=oe>>>0,ee||we(oe,8,this.length),t.read(this,oe,!0,52,8)},a.prototype.readDoubleBE=function(oe,ee){return oe=oe>>>0,ee||we(oe,8,this.length),t.read(this,oe,!1,52,8)};function ze(_e,oe,ee,ne,ue,be){if(!a.isBuffer(_e))throw new TypeError('"buffer" argument must be a Buffer instance');if(oe>ue||oe<be)throw new RangeError('"value" argument is out of bounds');if(ee+ne>_e.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(oe,ee,ne,ue){if(oe=+oe,ee=ee>>>0,ne=ne>>>0,!ue){const Ve=Math.pow(2,8*ne)-1;ze(this,oe,ee,ne,Ve,0)}let be=1,Le=0;for(this[ee]=oe&255;++Le<ne&&(be*=256);)this[ee+Le]=oe/be&255;return ee+ne},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(oe,ee,ne,ue){if(oe=+oe,ee=ee>>>0,ne=ne>>>0,!ue){const Ve=Math.pow(2,8*ne)-1;ze(this,oe,ee,ne,Ve,0)}let be=ne-1,Le=1;for(this[ee+be]=oe&255;--be>=0&&(Le*=256);)this[ee+be]=oe/Le&255;return ee+ne},a.prototype.writeUint8=a.prototype.writeUInt8=function(oe,ee,ne){return oe=+oe,ee=ee>>>0,ne||ze(this,oe,ee,1,255,0),this[ee]=oe&255,ee+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(oe,ee,ne){return oe=+oe,ee=ee>>>0,ne||ze(this,oe,ee,2,65535,0),this[ee]=oe&255,this[ee+1]=oe>>>8,ee+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(oe,ee,ne){return oe=+oe,ee=ee>>>0,ne||ze(this,oe,ee,2,65535,0),this[ee]=oe>>>8,this[ee+1]=oe&255,ee+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(oe,ee,ne){return oe=+oe,ee=ee>>>0,ne||ze(this,oe,ee,4,4294967295,0),this[ee+3]=oe>>>24,this[ee+2]=oe>>>16,this[ee+1]=oe>>>8,this[ee]=oe&255,ee+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(oe,ee,ne){return oe=+oe,ee=ee>>>0,ne||ze(this,oe,ee,4,4294967295,0),this[ee]=oe>>>24,this[ee+1]=oe>>>16,this[ee+2]=oe>>>8,this[ee+3]=oe&255,ee+4};function Me(_e,oe,ee,ne,ue){at(oe,ne,ue,_e,ee,7);let be=Number(oe&BigInt(4294967295));_e[ee++]=be,be=be>>8,_e[ee++]=be,be=be>>8,_e[ee++]=be,be=be>>8,_e[ee++]=be;let Le=Number(oe>>BigInt(32)&BigInt(4294967295));return _e[ee++]=Le,Le=Le>>8,_e[ee++]=Le,Le=Le>>8,_e[ee++]=Le,Le=Le>>8,_e[ee++]=Le,ee}function lt(_e,oe,ee,ne,ue){at(oe,ne,ue,_e,ee,7);let be=Number(oe&BigInt(4294967295));_e[ee+7]=be,be=be>>8,_e[ee+6]=be,be=be>>8,_e[ee+5]=be,be=be>>8,_e[ee+4]=be;let Le=Number(oe>>BigInt(32)&BigInt(4294967295));return _e[ee+3]=Le,Le=Le>>8,_e[ee+2]=Le,Le=Le>>8,_e[ee+1]=Le,Le=Le>>8,_e[ee]=Le,ee+8}a.prototype.writeBigUInt64LE=Un(function(oe,ee=0){return Me(this,oe,ee,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=Un(function(oe,ee=0){return lt(this,oe,ee,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(oe,ee,ne,ue){if(oe=+oe,ee=ee>>>0,!ue){const rt=Math.pow(2,8*ne-1);ze(this,oe,ee,ne,rt-1,-rt)}let be=0,Le=1,Ve=0;for(this[ee]=oe&255;++be<ne&&(Le*=256);)oe<0&&Ve===0&&this[ee+be-1]!==0&&(Ve=1),this[ee+be]=(oe/Le>>0)-Ve&255;return ee+ne},a.prototype.writeIntBE=function(oe,ee,ne,ue){if(oe=+oe,ee=ee>>>0,!ue){const rt=Math.pow(2,8*ne-1);ze(this,oe,ee,ne,rt-1,-rt)}let be=ne-1,Le=1,Ve=0;for(this[ee+be]=oe&255;--be>=0&&(Le*=256);)oe<0&&Ve===0&&this[ee+be+1]!==0&&(Ve=1),this[ee+be]=(oe/Le>>0)-Ve&255;return ee+ne},a.prototype.writeInt8=function(oe,ee,ne){return oe=+oe,ee=ee>>>0,ne||ze(this,oe,ee,1,127,-128),oe<0&&(oe=255+oe+1),this[ee]=oe&255,ee+1},a.prototype.writeInt16LE=function(oe,ee,ne){return oe=+oe,ee=ee>>>0,ne||ze(this,oe,ee,2,32767,-32768),this[ee]=oe&255,this[ee+1]=oe>>>8,ee+2},a.prototype.writeInt16BE=function(oe,ee,ne){return oe=+oe,ee=ee>>>0,ne||ze(this,oe,ee,2,32767,-32768),this[ee]=oe>>>8,this[ee+1]=oe&255,ee+2},a.prototype.writeInt32LE=function(oe,ee,ne){return oe=+oe,ee=ee>>>0,ne||ze(this,oe,ee,4,2147483647,-2147483648),this[ee]=oe&255,this[ee+1]=oe>>>8,this[ee+2]=oe>>>16,this[ee+3]=oe>>>24,ee+4},a.prototype.writeInt32BE=function(oe,ee,ne){return oe=+oe,ee=ee>>>0,ne||ze(this,oe,ee,4,2147483647,-2147483648),oe<0&&(oe=4294967295+oe+1),this[ee]=oe>>>24,this[ee+1]=oe>>>16,this[ee+2]=oe>>>8,this[ee+3]=oe&255,ee+4},a.prototype.writeBigInt64LE=Un(function(oe,ee=0){return Me(this,oe,ee,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=Un(function(oe,ee=0){return lt(this,oe,ee,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function nt(_e,oe,ee,ne,ue,be){if(ee+ne>_e.length)throw new RangeError("Index out of range");if(ee<0)throw new RangeError("Index out of range")}function bt(_e,oe,ee,ne,ue){return oe=+oe,ee=ee>>>0,ue||nt(_e,oe,ee,4),t.write(_e,oe,ee,ne,23,4),ee+4}a.prototype.writeFloatLE=function(oe,ee,ne){return bt(this,oe,ee,!0,ne)},a.prototype.writeFloatBE=function(oe,ee,ne){return bt(this,oe,ee,!1,ne)};function Bt(_e,oe,ee,ne,ue){return oe=+oe,ee=ee>>>0,ue||nt(_e,oe,ee,8),t.write(_e,oe,ee,ne,52,8),ee+8}a.prototype.writeDoubleLE=function(oe,ee,ne){return Bt(this,oe,ee,!0,ne)},a.prototype.writeDoubleBE=function(oe,ee,ne){return Bt(this,oe,ee,!1,ne)},a.prototype.copy=function(oe,ee,ne,ue){if(!a.isBuffer(oe))throw new TypeError("argument should be a Buffer");if(ne||(ne=0),!ue&&ue!==0&&(ue=this.length),ee>=oe.length&&(ee=oe.length),ee||(ee=0),ue>0&&ue<ne&&(ue=ne),ue===ne||oe.length===0||this.length===0)return 0;if(ee<0)throw new RangeError("targetStart out of bounds");if(ne<0||ne>=this.length)throw new RangeError("Index out of range");if(ue<0)throw new RangeError("sourceEnd out of bounds");ue>this.length&&(ue=this.length),oe.length-ee<ue-ne&&(ue=oe.length-ee+ne);const be=ue-ne;return this===oe&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(ee,ne,ue):Uint8Array.prototype.set.call(oe,this.subarray(ne,ue),ee),be},a.prototype.fill=function(oe,ee,ne,ue){if(typeof oe=="string"){if(typeof ee=="string"?(ue=ee,ee=0,ne=this.length):typeof ne=="string"&&(ue=ne,ne=this.length),ue!==void 0&&typeof ue!="string")throw new TypeError("encoding must be a string");if(typeof ue=="string"&&!a.isEncoding(ue))throw new TypeError("Unknown encoding: "+ue);if(oe.length===1){const Le=oe.charCodeAt(0);(ue==="utf8"&&Le<128||ue==="latin1")&&(oe=Le)}}else typeof oe=="number"?oe=oe&255:typeof oe=="boolean"&&(oe=Number(oe));if(ee<0||this.length<ee||this.length<ne)throw new RangeError("Out of range index");if(ne<=ee)return this;ee=ee>>>0,ne=ne===void 0?this.length:ne>>>0,oe||(oe=0);let be;if(typeof oe=="number")for(be=ee;be<ne;++be)this[be]=oe;else{const Le=a.isBuffer(oe)?oe:a.from(oe,ue),Ve=Le.length;if(Ve===0)throw new TypeError('The value "'+oe+'" is invalid for argument "value"');for(be=0;be<ne-ee;++be)this[be+ee]=Le[be%Ve]}return this};const Ke={};function Te(_e,oe,ee){Ke[_e]=class extends ee{constructor(){super(),Object.defineProperty(this,"message",{value:oe.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${_e}]`,this.stack,delete this.name}get code(){return _e}set code(ue){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:ue,writable:!0})}toString(){return`${this.name} [${_e}]: ${this.message}`}}}Te("ERR_BUFFER_OUT_OF_BOUNDS",function(_e){return _e?`${_e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Te("ERR_INVALID_ARG_TYPE",function(_e,oe){return`The "${_e}" argument must be of type number. Received type ${typeof oe}`},TypeError),Te("ERR_OUT_OF_RANGE",function(_e,oe,ee){let ne=`The value of "${_e}" is out of range.`,ue=ee;return Number.isInteger(ee)&&Math.abs(ee)>2**32?ue=Se(String(ee)):typeof ee=="bigint"&&(ue=String(ee),(ee>BigInt(2)**BigInt(32)||ee<-(BigInt(2)**BigInt(32)))&&(ue=Se(ue)),ue+="n"),ne+=` It must be ${oe}. Received ${ue}`,ne},RangeError);function Se(_e){let oe="",ee=_e.length;const ne=_e[0]==="-"?1:0;for(;ee>=ne+4;ee-=3)oe=`_${_e.slice(ee-3,ee)}${oe}`;return`${_e.slice(0,ee)}${oe}`}function We(_e,oe,ee){it(oe,"offset"),(_e[oe]===void 0||_e[oe+ee]===void 0)&&ft(oe,_e.length-(ee+1))}function at(_e,oe,ee,ne,ue,be){if(_e>ee||_e<oe){const Le=typeof oe=="bigint"?"n":"";let Ve;throw oe===0||oe===BigInt(0)?Ve=`>= 0${Le} and < 2${Le} ** ${(be+1)*8}${Le}`:Ve=`>= -(2${Le} ** ${(be+1)*8-1}${Le}) and < 2 ** ${(be+1)*8-1}${Le}`,new Ke.ERR_OUT_OF_RANGE("value",Ve,_e)}We(ne,ue,be)}function it(_e,oe){if(typeof _e!="number")throw new Ke.ERR_INVALID_ARG_TYPE(oe,"number",_e)}function ft(_e,oe,ee){throw Math.floor(_e)!==_e?(it(_e,ee),new Ke.ERR_OUT_OF_RANGE("offset","an integer",_e)):oe<0?new Ke.ERR_BUFFER_OUT_OF_BOUNDS:new Ke.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${oe}`,_e)}const Dt=/[^+/0-9A-Za-z-_]/g;function Ot(_e){if(_e=_e.split("=")[0],_e=_e.trim().replace(Dt,""),_e.length<2)return"";for(;_e.length%4!==0;)_e=_e+"=";return _e}function Jt(_e,oe){oe=oe||1/0;let ee;const ne=_e.length;let ue=null;const be=[];for(let Le=0;Le<ne;++Le){if(ee=_e.charCodeAt(Le),ee>55295&&ee<57344){if(!ue){if(ee>56319){(oe-=3)>-1&&be.push(239,191,189);continue}else if(Le+1===ne){(oe-=3)>-1&&be.push(239,191,189);continue}ue=ee;continue}if(ee<56320){(oe-=3)>-1&&be.push(239,191,189),ue=ee;continue}ee=(ue-55296<<10|ee-56320)+65536}else ue&&(oe-=3)>-1&&be.push(239,191,189);if(ue=null,ee<128){if((oe-=1)<0)break;be.push(ee)}else if(ee<2048){if((oe-=2)<0)break;be.push(ee>>6|192,ee&63|128)}else if(ee<65536){if((oe-=3)<0)break;be.push(ee>>12|224,ee>>6&63|128,ee&63|128)}else if(ee<1114112){if((oe-=4)<0)break;be.push(ee>>18|240,ee>>12&63|128,ee>>6&63|128,ee&63|128)}else throw new Error("Invalid code point")}return be}function Dn(_e){const oe=[];for(let ee=0;ee<_e.length;++ee)oe.push(_e.charCodeAt(ee)&255);return oe}function Pn(_e,oe){let ee,ne,ue;const be=[];for(let Le=0;Le<_e.length&&!((oe-=2)<0);++Le)ee=_e.charCodeAt(Le),ne=ee>>8,ue=ee%256,be.push(ue),be.push(ne);return be}function oi(_e){return e.toByteArray(Ot(_e))}function In(_e,oe,ee,ne){let ue;for(ue=0;ue<ne&&!(ue+ee>=oe.length||ue>=_e.length);++ue)oe[ue+ee]=_e[ue];return ue}function Tn(_e,oe){return _e instanceof oe||_e!=null&&_e.constructor!=null&&_e.constructor.name!=null&&_e.constructor.name===oe.name}function dn(_e){return _e!==_e}const $n=(function(){const _e="0123456789abcdef",oe=new Array(256);for(let ee=0;ee<16;++ee){const ne=ee*16;for(let ue=0;ue<16;++ue)oe[ne+ue]=_e[ee]+_e[ue]}return oe})();function Un(_e){return typeof BigInt>"u"?It:_e}function It(){throw new Error("BigInt not supported")}})(cO)),cO}var mue=pue();const gue=eu(mue);var AO,bF;function yue(){if(bF)return AO;bF=1;var n="Expected a function",e="__lodash_hash_undefined__",t="[object Function]",i="[object GeneratorFunction]",r="[object Symbol]",o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/,a=/^\./,c=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,h=/[\\^$.*+?()[\]{}|]/g,m=/\\(\\)?/g,y=/^\[object .+?Constructor\]$/,M=typeof window=="object"&&window&&window.Object===Object&&window,x=typeof self=="object"&&self&&self.Object===Object&&self,T=M||x||Function("return this")();function P(ye,Be){return ye?.[Be]}function F(ye){var Be=!1;if(ye!=null&&typeof ye.toString!="function")try{Be=!!(ye+"")}catch{}return Be}var j=Array.prototype,q=Function.prototype,V=Object.prototype,H=T["__core-js_shared__"],Q=(function(){var ye=/[^.]+$/.exec(H&&H.keys&&H.keys.IE_PROTO||"");return ye?"Symbol(src)_1."+ye:""})(),Y=q.toString,z=V.hasOwnProperty,se=V.toString,le=RegExp("^"+Y.call(z).replace(h,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),pe=T.Symbol,de=j.splice,ve=oi(T,"Map"),Ee=oi(Object,"create"),Re=pe?pe.prototype:void 0,je=Re?Re.toString:void 0;function Ie(ye){var Be=-1,v=ye?ye.length:0;for(this.clear();++Be<v;){var yt=ye[Be];this.set(yt[0],yt[1])}}function qe(){this.__data__=Ee?Ee(null):{}}function tt(ye){return this.has(ye)&&delete this.__data__[ye]}function At(ye){var Be=this.__data__;if(Ee){var v=Be[ye];return v===e?void 0:v}return z.call(Be,ye)?Be[ye]:void 0}function ke(ye){var Be=this.__data__;return Ee?Be[ye]!==void 0:z.call(Be,ye)}function we(ye,Be){var v=this.__data__;return v[ye]=Ee&&Be===void 0?e:Be,this}Ie.prototype.clear=qe,Ie.prototype.delete=tt,Ie.prototype.get=At,Ie.prototype.has=ke,Ie.prototype.set=we;function ze(ye){var Be=-1,v=ye?ye.length:0;for(this.clear();++Be<v;){var yt=ye[Be];this.set(yt[0],yt[1])}}function Me(){this.__data__=[]}function lt(ye){var Be=this.__data__,v=ft(Be,ye);if(v<0)return!1;var yt=Be.length-1;return v==yt?Be.pop():de.call(Be,v,1),!0}function nt(ye){var Be=this.__data__,v=ft(Be,ye);return v<0?void 0:Be[v][1]}function bt(ye){return ft(this.__data__,ye)>-1}function Bt(ye,Be){var v=this.__data__,yt=ft(v,ye);return yt<0?v.push([ye,Be]):v[yt][1]=Be,this}ze.prototype.clear=Me,ze.prototype.delete=lt,ze.prototype.get=nt,ze.prototype.has=bt,ze.prototype.set=Bt;function Ke(ye){var Be=-1,v=ye?ye.length:0;for(this.clear();++Be<v;){var yt=ye[Be];this.set(yt[0],yt[1])}}function Te(){this.__data__={hash:new Ie,map:new(ve||ze),string:new Ie}}function Se(ye){return Pn(this,ye).delete(ye)}function We(ye){return Pn(this,ye).get(ye)}function at(ye){return Pn(this,ye).has(ye)}function it(ye,Be){return Pn(this,ye).set(ye,Be),this}Ke.prototype.clear=Te,Ke.prototype.delete=Se,Ke.prototype.get=We,Ke.prototype.has=at,Ke.prototype.set=it;function ft(ye,Be){for(var v=ye.length;v--;)if(oe(ye[v][0],Be))return v;return-1}function Dt(ye,Be){Be=In(Be,ye)?[Be]:Dn(Be);for(var v=0,yt=Be.length;ye!=null&&v<yt;)ye=ye[Un(Be[v++])];return v&&v==yt?ye:void 0}function Ot(ye){if(!ue(ye)||dn(ye))return!1;var Be=ne(ye)||F(ye)?le:y;return Be.test(It(ye))}function Jt(ye){if(typeof ye=="string")return ye;if(Le(ye))return je?je.call(ye):"";var Be=ye+"";return Be=="0"&&1/ye==-1/0?"-0":Be}function Dn(ye){return ee(ye)?ye:$n(ye)}function Pn(ye,Be){var v=ye.__data__;return Tn(Be)?v[typeof Be=="string"?"string":"hash"]:v.map}function oi(ye,Be){var v=P(ye,Be);return Ot(v)?v:void 0}function In(ye,Be){if(ee(ye))return!1;var v=typeof ye;return v=="number"||v=="symbol"||v=="boolean"||ye==null||Le(ye)?!0:s.test(ye)||!o.test(ye)||Be!=null&&ye in Object(Be)}function Tn(ye){var Be=typeof ye;return Be=="string"||Be=="number"||Be=="symbol"||Be=="boolean"?ye!=="__proto__":ye===null}function dn(ye){return!!Q&&Q in ye}var $n=_e(function(ye){ye=Ve(ye);var Be=[];return a.test(ye)&&Be.push(""),ye.replace(c,function(v,yt,Mt,Pt){Be.push(Mt?Pt.replace(m,"$1"):yt||v)}),Be});function Un(ye){if(typeof ye=="string"||Le(ye))return ye;var Be=ye+"";return Be=="0"&&1/ye==-1/0?"-0":Be}function It(ye){if(ye!=null){try{return Y.call(ye)}catch{}try{return ye+""}catch{}}return""}function _e(ye,Be){if(typeof ye!="function"||Be&&typeof Be!="function")throw new TypeError(n);var v=function(){var yt=arguments,Mt=Be?Be.apply(this,yt):yt[0],Pt=v.cache;if(Pt.has(Mt))return Pt.get(Mt);var en=ye.apply(this,yt);return v.cache=Pt.set(Mt,en),en};return v.cache=new(_e.Cache||Ke),v}_e.Cache=Ke;function oe(ye,Be){return ye===Be||ye!==ye&&Be!==Be}var ee=Array.isArray;function ne(ye){var Be=ue(ye)?se.call(ye):"";return Be==t||Be==i}function ue(ye){var Be=typeof ye;return!!ye&&(Be=="object"||Be=="function")}function be(ye){return!!ye&&typeof ye=="object"}function Le(ye){return typeof ye=="symbol"||be(ye)&&se.call(ye)==r}function Ve(ye){return ye==null?"":Jt(ye)}function rt(ye,Be,v){var yt=ye==null?void 0:Dt(ye,Be);return yt===void 0?v:yt}return AO=rt,AO}var vue=yue();const bue=eu(vue);var R2={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var Cue=R2.exports,CF;function _ue(){return CF||(CF=1,(function(n,e){(function(){var t,i="4.17.21",r=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",s="Expected a function",a="Invalid `variable` option passed into `_.template`",c="__lodash_hash_undefined__",h=500,m="__lodash_placeholder__",y=1,M=2,x=4,T=1,P=2,F=1,j=2,q=4,V=8,H=16,Q=32,Y=64,z=128,se=256,le=512,pe=30,de="...",ve=800,Ee=16,Re=1,je=2,Ie=3,qe=1/0,tt=9007199254740991,At=17976931348623157e292,ke=NaN,we=4294967295,ze=we-1,Me=we>>>1,lt=[["ary",z],["bind",F],["bindKey",j],["curry",V],["curryRight",H],["flip",le],["partial",Q],["partialRight",Y],["rearg",se]],nt="[object Arguments]",bt="[object Array]",Bt="[object AsyncFunction]",Ke="[object Boolean]",Te="[object Date]",Se="[object DOMException]",We="[object Error]",at="[object Function]",it="[object GeneratorFunction]",ft="[object Map]",Dt="[object Number]",Ot="[object Null]",Jt="[object Object]",Dn="[object Promise]",Pn="[object Proxy]",oi="[object RegExp]",In="[object Set]",Tn="[object String]",dn="[object Symbol]",$n="[object Undefined]",Un="[object WeakMap]",It="[object WeakSet]",_e="[object ArrayBuffer]",oe="[object DataView]",ee="[object Float32Array]",ne="[object Float64Array]",ue="[object Int8Array]",be="[object Int16Array]",Le="[object Int32Array]",Ve="[object Uint8Array]",rt="[object Uint8ClampedArray]",ye="[object Uint16Array]",Be="[object Uint32Array]",v=/\b__p \+= '';/g,yt=/\b(__p \+=) '' \+/g,Mt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Pt=/&(?:amp|lt|gt|quot|#39);/g,en=/[&<>"']/g,mt=RegExp(Pt.source),Qn=RegExp(en.source),Xn=/<%-([\s\S]+?)%>/g,Cn=/<%([\s\S]+?)%>/g,Fn=/<%=([\s\S]+?)%>/g,pi=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Hi=/^\w*$/,Ii=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ar=/[\\^$.*+?()[\]{}|]/g,ii=RegExp(Ar.source),Fi=/^\s+/,Ri=/\s/,on=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,nr=/\{\n\/\* \[wrapped with (.+)\] \*/,Go=/,? & /,Co=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,gr=/[()=,{}\[\]\/\s]/,gn=/\\(\\)?/g,Ni=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ni=/\w*$/,ga=/^[-+]0x[0-9a-f]+$/i,Ra=/^0b[01]+$/i,zs=/^\[object .+?Constructor\]$/,Pi=/^0o[0-7]+$/i,kl=/^(?:0|[1-9]\d*)$/,eo=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ya=/($^)/,tu=/['\n\r\u2028\u2029\\]/g,Xs="\\ud800-\\udfff",Ko="\\u0300-\\u036f",Zo="\\ufe20-\\ufe2f",gs="\\u20d0-\\u20ff",jr=Ko+Zo+gs,Da="\\u2700-\\u27bf",os="a-z\\xdf-\\xf6\\xf8-\\xff",Bc="\\xac\\xb1\\xd7\\xf7",Mu="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",nu="\\u2000-\\u206f",oA=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",tc="A-Z\\xc0-\\xd6\\xd8-\\xde",gl="\\ufe0e\\ufe0f",Lo=Bc+Mu+nu+oA,nc="[']",iu="["+Xs+"]",Ic="["+Lo+"]",ic="["+jr+"]",kc="\\d+",ZA="["+Da+"]",Ss="["+os+"]",Tc="[^"+Xs+Lo+kc+Da+os+tc+"]",wu="\\ud83c[\\udffb-\\udfff]",ru="(?:"+ic+"|"+wu+")",ou="[^"+Xs+"]",su="(?:\\ud83c[\\udde6-\\uddff]){2}",Es="[\\ud800-\\udbff][\\udc00-\\udfff]",wo="["+tc+"]",Tl="\\u200d",Js="(?:"+Ss+"|"+Tc+")",Ui="(?:"+wo+"|"+Tc+")",au="(?:"+nc+"(?:d|ll|m|re|s|t|ve))?",aa="(?:"+nc+"(?:D|LL|M|RE|S|T|VE))?",Su=ru+"?",ir="["+gl+"]?",Pa="(?:"+Tl+"(?:"+[ou,su,Es].join("|")+")"+ir+Su+")*",ko="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Rl="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",ss=ir+Su+Pa,fo="(?:"+[ZA,su,Es].join("|")+")"+ss,as="(?:"+[ou+ic+"?",ic,su,Es,iu].join("|")+")",Fo=RegExp(nc,"g"),_o=RegExp(ic,"g"),Ua=RegExp(wu+"(?="+wu+")|"+as+ss,"g"),So=RegExp([wo+"?"+Ss+"+"+au+"(?="+[Ic,wo,"$"].join("|")+")",Ui+"+"+aa+"(?="+[Ic,wo+Js,"$"].join("|")+")",wo+"?"+Js+"+"+au,wo+"+"+aa,Rl,ko,kc,fo].join("|"),"g"),ea=RegExp("["+Tl+Xs+jr+gl+"]"),oo=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ka=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Nr=-1,Gi={};Gi[ee]=Gi[ne]=Gi[ue]=Gi[be]=Gi[Le]=Gi[Ve]=Gi[rt]=Gi[ye]=Gi[Be]=!0,Gi[nt]=Gi[bt]=Gi[_e]=Gi[Ke]=Gi[oe]=Gi[Te]=Gi[We]=Gi[at]=Gi[ft]=Gi[Dt]=Gi[Jt]=Gi[oi]=Gi[In]=Gi[Tn]=Gi[Un]=!1;var Ai={};Ai[nt]=Ai[bt]=Ai[_e]=Ai[oe]=Ai[Ke]=Ai[Te]=Ai[ee]=Ai[ne]=Ai[ue]=Ai[be]=Ai[Le]=Ai[ft]=Ai[Dt]=Ai[Jt]=Ai[oi]=Ai[In]=Ai[Tn]=Ai[dn]=Ai[Ve]=Ai[rt]=Ai[ye]=Ai[Be]=!0,Ai[We]=Ai[at]=Ai[Un]=!1;var X={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},Ce={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Qe={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Et={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},jn=parseFloat,On=parseInt,_i=typeof window=="object"&&window&&window.Object===Object&&window,zi=typeof self=="object"&&self&&self.Object===Object&&self,ki=_i||zi||Function("return this")(),Ei=e&&!e.nodeType&&e,Cr=Ei&&!0&&n&&!n.nodeType&&n,so=Cr&&Cr.exports===Ei,yr=so&&_i.process,Ji=(function(){try{var Ut=Cr&&Cr.require&&Cr.require("util").types;return Ut||yr&&yr.binding&&yr.binding("util")}catch{}})(),rr=Ji&&Ji.isArrayBuffer,ys=Ji&&Ji.isDate,Xo=Ji&&Ji.isMap,Os=Ji&&Ji.isRegExp,Bs=Ji&&Ji.isSet,lu=Ji&&Ji.isTypedArray;function vs(Ut,sn,nn){switch(nn.length){case 0:return Ut.call(sn);case 1:return Ut.call(sn,nn[0]);case 2:return Ut.call(sn,nn[0],nn[1]);case 3:return Ut.call(sn,nn[0],nn[1],nn[2])}return Ut.apply(sn,nn)}function _1(Ut,sn,nn,mi){for(var vr=-1,Vr=Ut==null?0:Ut.length;++vr<Vr;){var ks=Ut[vr];sn(mi,ks,nn(ks),Ut)}return mi}function rc(Ut,sn){for(var nn=-1,mi=Ut==null?0:Ut.length;++nn<mi&&sn(Ut[nn],nn,Ut)!==!1;);return Ut}function qa(Ut,sn){for(var nn=Ut==null?0:Ut.length;nn--&&sn(Ut[nn],nn,Ut)!==!1;);return Ut}function Td(Ut,sn){for(var nn=-1,mi=Ut==null?0:Ut.length;++nn<mi;)if(!sn(Ut[nn],nn,Ut))return!1;return!0}function Ya(Ut,sn){for(var nn=-1,mi=Ut==null?0:Ut.length,vr=0,Vr=[];++nn<mi;){var ks=Ut[nn];sn(ks,nn,Ut)&&(Vr[vr++]=ks)}return Vr}function Rd(Ut,sn){var nn=Ut==null?0:Ut.length;return!!nn&&XA(Ut,sn,0)>-1}function Dd(Ut,sn,nn){for(var mi=-1,vr=Ut==null?0:Ut.length;++mi<vr;)if(nn(sn,Ut[mi]))return!0;return!1}function Jo(Ut,sn){for(var nn=-1,mi=Ut==null?0:Ut.length,vr=Array(mi);++nn<mi;)vr[nn]=sn(Ut[nn],nn,Ut);return vr}function Dl(Ut,sn){for(var nn=-1,mi=sn.length,vr=Ut.length;++nn<mi;)Ut[vr+nn]=sn[nn];return Ut}function oc(Ut,sn,nn,mi){var vr=-1,Vr=Ut==null?0:Ut.length;for(mi&&Vr&&(nn=Ut[++vr]);++vr<Vr;)nn=sn(nn,Ut[vr],vr,Ut);return nn}function h0(Ut,sn,nn,mi){var vr=Ut==null?0:Ut.length;for(mi&&vr&&(nn=Ut[--vr]);vr--;)nn=sn(nn,Ut[vr],vr,Ut);return nn}function Bf(Ut,sn){for(var nn=-1,mi=Ut==null?0:Ut.length;++nn<mi;)if(sn(Ut[nn],nn,Ut))return!0;return!1}var dv=Rh("length");function d0(Ut){return Ut.split("")}function fv(Ut){return Ut.match(Co)||[]}function Sp(Ut,sn,nn){var mi;return nn(Ut,function(vr,Vr,ks){if(sn(vr,Vr,ks))return mi=Vr,!1}),mi}function If(Ut,sn,nn,mi){for(var vr=Ut.length,Vr=nn+(mi?1:-1);mi?Vr--:++Vr<vr;)if(sn(Ut[Vr],Vr,Ut))return Vr;return-1}function XA(Ut,sn,nn){return sn===sn?M1(Ut,sn,nn):If(Ut,Lm,nn)}function kf(Ut,sn,nn,mi){for(var vr=nn-1,Vr=Ut.length;++vr<Vr;)if(mi(Ut[vr],sn))return vr;return-1}function Lm(Ut){return Ut!==Ut}function Eu(Ut,sn){var nn=Ut==null?0:Ut.length;return nn?Fm(Ut,sn)/nn:ke}function Rh(Ut){return function(sn){return sn==null?t:sn[Ut]}}function Ep(Ut){return function(sn){return Ut==null?t:Ut[sn]}}function Dh(Ut,sn,nn,mi,vr){return vr(Ut,function(Vr,ks,Wo){nn=mi?(mi=!1,Vr):sn(nn,Vr,ks,Wo)}),nn}function Tf(Ut,sn){var nn=Ut.length;for(Ut.sort(sn);nn--;)Ut[nn]=Ut[nn].value;return Ut}function Fm(Ut,sn){for(var nn,mi=-1,vr=Ut.length;++mi<vr;){var Vr=sn(Ut[mi]);Vr!==t&&(nn=nn===t?Vr:nn+Vr)}return nn}function Pd(Ut,sn){for(var nn=-1,mi=Array(Ut);++nn<Ut;)mi[nn]=sn(nn);return mi}function x1(Ut,sn){return Jo(sn,function(nn){return[nn,Ut[nn]]})}function Rc(Ut){return Ut&&Ut.slice(0,th(Ut)+1).replace(Fi,"")}function Ou(Ut){return function(sn){return Ut(sn)}}function Op(Ut,sn){return Jo(sn,function(nn){return Ut[nn]})}function Rf(Ut,sn){return Ut.has(sn)}function zm(Ut,sn){for(var nn=-1,mi=Ut.length;++nn<mi&&XA(sn,Ut[nn],0)>-1;);return nn}function Bp(Ut,sn){for(var nn=Ut.length;nn--&&XA(sn,Ut[nn],0)>-1;);return nn}function Df(Ut,sn){for(var nn=Ut.length,mi=0;nn--;)Ut[nn]===sn&&++mi;return mi}var Pf=Ep(X),Ip=Ep(Ce);function kp(Ut){return"\\"+Et[Ut]}function Ph(Ut,sn){return Ut==null?t:Ut[sn]}function Uh(Ut){return ea.test(Ut)}function jm(Ut){return oo.test(Ut)}function JA(Ut){for(var sn,nn=[];!(sn=Ut.next()).done;)nn.push(sn.value);return nn}function Tp(Ut){var sn=-1,nn=Array(Ut.size);return Ut.forEach(function(mi,vr){nn[++sn]=[vr,mi]}),nn}function Uf(Ut,sn){return function(nn){return Ut(sn(nn))}}function eh(Ut,sn){for(var nn=-1,mi=Ut.length,vr=0,Vr=[];++nn<mi;){var ks=Ut[nn];(ks===sn||ks===m)&&(Ut[nn]=m,Vr[vr++]=nn)}return Vr}function Rp(Ut){var sn=-1,nn=Array(Ut.size);return Ut.forEach(function(mi){nn[++sn]=mi}),nn}function f0(Ut){var sn=-1,nn=Array(Ut.size);return Ut.forEach(function(mi){nn[++sn]=[mi,mi]}),nn}function M1(Ut,sn,nn){for(var mi=nn-1,vr=Ut.length;++mi<vr;)if(Ut[mi]===sn)return mi;return-1}function w1(Ut,sn,nn){for(var mi=nn+1;mi--;)if(Ut[mi]===sn)return mi;return mi}function Kh(Ut){return Uh(Ut)?Nm(Ut):dv(Ut)}function Is(Ut){return Uh(Ut)?Gm(Ut):d0(Ut)}function th(Ut){for(var sn=Ut.length;sn--&&Ri.test(Ut.charAt(sn)););return sn}var xA=Ep(Qe);function Nm(Ut){for(var sn=Ua.lastIndex=0;Ua.test(Ut);)++sn;return sn}function Gm(Ut){return Ut.match(Ua)||[]}function ao(Ut){return Ut.match(So)||[]}var Wm=(function Ut(sn){sn=sn==null?ki:Lh.defaults(ki.Object(),sn,Lh.pick(ki,Ka));var nn=sn.Array,mi=sn.Date,vr=sn.Error,Vr=sn.Function,ks=sn.Math,Wo=sn.Object,Dp=sn.RegExp,MA=sn.String,Pl=sn.TypeError,Fh=nn.prototype,Qm=Vr.prototype,Dc=Wo.prototype,zh=sn["__core-js_shared__"],nh=Qm.toString,kr=Dc.hasOwnProperty,p0=0,Pp=(function(){var S=/[^.]+$/.exec(zh&&zh.keys&&zh.keys.IE_PROTO||"");return S?"Symbol(src)_1."+S:""})(),Ul=Dc.toString,wA=nh.call(Wo),uu=ki._,ih=Dp("^"+nh.call(kr).replace(Ar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),SA=so?sn.Buffer:t,Bu=sn.Symbol,jh=sn.Uint8Array,rh=SA?SA.allocUnsafe:t,cu=Uf(Wo.getPrototypeOf,Wo),qm=Wo.create,oh=Dc.propertyIsEnumerable,hr=Fh.splice,Up=Bu?Bu.isConcatSpreadable:t,yl=Bu?Bu.iterator:t,sA=Bu?Bu.toStringTag:t,Kl=(function(){try{var S=gh(Wo,"defineProperty");return S({},"",{}),S}catch{}})(),S1=sn.clearTimeout!==ki.clearTimeout&&sn.clearTimeout,Ud=mi&&mi.now!==ki.Date.now&&mi.now,sh=sn.setTimeout!==ki.setTimeout&&sn.setTimeout,Kf=ks.ceil,Kd=ks.floor,Nh=Wo.getOwnPropertySymbols,Kp=SA?SA.isBuffer:t,Ll=sn.isFinite,ah=Fh.join,Gh=Uf(Wo.keys,Wo),Ts=ks.max,ta=ks.min,Fl=mi.now,sl=sn.parseInt,Pc=ks.random,EA=Fh.reverse,zl=gh(sn,"DataView"),sc=gh(sn,"Map"),Lp=gh(sn,"Promise"),Uc=gh(sn,"Set"),OA=gh(sn,"WeakMap"),lh=gh(Wo,"create"),na=OA&&new OA,lo={},Gr=Fu(zl),aA=Fu(sc),ac=Fu(Lp),js=Fu(Uc),Iu=Fu(OA),jl=Bu?Bu.prototype:t,Wh=jl?jl.valueOf:t,BA=jl?jl.toString:t;function Ye(S){if(Ws(S)&&!_r(S)&&!(S instanceof br)){if(S instanceof al)return S;if(kr.call(S,"__wrapped__"))return K1(S)}return new al(S)}var ku=(function(){function S(){}return function(R){if(!oa(R))return{};if(qm)return qm(R);S.prototype=R;var $=new S;return S.prototype=t,$}})();function lc(){}function al(S,R){this.__wrapped__=S,this.__actions__=[],this.__chain__=!!R,this.__index__=0,this.__values__=t}Ye.templateSettings={escape:Xn,evaluate:Cn,interpolate:Fn,variable:"",imports:{_:Ye}},Ye.prototype=lc.prototype,Ye.prototype.constructor=Ye,al.prototype=ku(lc.prototype),al.prototype.constructor=al;function br(S){this.__wrapped__=S,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=we,this.__views__=[]}function lA(){var S=new br(this.__wrapped__);return S.__actions__=va(this.__actions__),S.__dir__=this.__dir__,S.__filtered__=this.__filtered__,S.__iteratees__=va(this.__iteratees__),S.__takeCount__=this.__takeCount__,S.__views__=va(this.__views__),S}function uh(){if(this.__filtered__){var S=new br(this);S.__dir__=-1,S.__filtered__=!0}else S=this.clone(),S.__dir__*=-1;return S}function uA(){var S=this.__wrapped__.value(),R=this.__dir__,$=_r(S),he=R<0,Fe=$?S.length:0,Je=Xx(0,Fe,this.__views__),vt=Je.start,Rt=Je.end,zt=Rt-vt,_n=he?Rt:vt-1,xn=this.__iteratees__,Ln=xn.length,gi=0,Vi=ta(zt,this.__takeCount__);if(!$||!he&&Fe==zt&&Vi==zt)return Bn(S,this.__actions__);var xr=[];e:for(;zt--&&gi<Vi;){_n+=R;for(var go=-1,Mr=S[_n];++go<Ln;){var Po=xn[go],Yo=Po.iteratee,lf=Po.type,Mh=Yo(Mr);if(lf==je)Mr=Mh;else if(!Mh){if(lf==Re)continue e;break e}}xr[gi++]=Mr}return xr}br.prototype=ku(lc.prototype),br.prototype.constructor=br;function cA(S){var R=-1,$=S==null?0:S.length;for(this.clear();++R<$;){var he=S[R];this.set(he[0],he[1])}}function Qh(){this.__data__=lh?lh(null):{},this.size=0}function Kc(S){var R=this.has(S)&&delete this.__data__[S];return this.size-=R?1:0,R}function Fp(S){var R=this.__data__;if(lh){var $=R[S];return $===c?t:$}return kr.call(R,S)?R[S]:t}function qh(S){var R=this.__data__;return lh?R[S]!==t:kr.call(R,S)}function ll(S,R){var $=this.__data__;return this.size+=this.has(S)?0:1,$[S]=lh&&R===t?c:R,this}cA.prototype.clear=Qh,cA.prototype.delete=Kc,cA.prototype.get=Fp,cA.prototype.has=qh,cA.prototype.set=ll;function uc(S){var R=-1,$=S==null?0:S.length;for(this.clear();++R<$;){var he=S[R];this.set(he[0],he[1])}}function m0(){this.__data__=[],this.size=0}function Lf(S){var R=this.__data__,$=hc(R,S);if($<0)return!1;var he=R.length-1;return $==he?R.pop():hr.call(R,$,1),--this.size,!0}function Ff(S){var R=this.__data__,$=hc(R,S);return $<0?t:R[$][1]}function Tu(S){return hc(this.__data__,S)>-1}function ls(S,R){var $=this.__data__,he=hc($,S);return he<0?(++this.size,$.push([S,R])):$[he][1]=R,this}uc.prototype.clear=m0,uc.prototype.delete=Lf,uc.prototype.get=Ff,uc.prototype.has=Tu,uc.prototype.set=ls;function cc(S){var R=-1,$=S==null?0:S.length;for(this.clear();++R<$;){var he=S[R];this.set(he[0],he[1])}}function Nl(){this.size=0,this.__data__={hash:new cA,map:new(sc||uc),string:new cA}}function Au(S){var R=C0(this,S).delete(S);return this.size-=R?1:0,R}function Yh(S){return C0(this,S).get(S)}function vl(S){return C0(this,S).has(S)}function Ac(S,R){var $=C0(this,S),he=$.size;return $.set(S,R),this.size+=$.size==he?0:1,this}cc.prototype.clear=Nl,cc.prototype.delete=Au,cc.prototype.get=Yh,cc.prototype.has=vl,cc.prototype.set=Ac;function Ld(S){var R=-1,$=S==null?0:S.length;for(this.__data__=new cc;++R<$;)this.add(S[R])}function Ym(S){return this.__data__.set(S,c),this}function pv(S){return this.__data__.has(S)}Ld.prototype.add=Ld.prototype.push=Ym,Ld.prototype.has=pv;function Gl(S){var R=this.__data__=new uc(S);this.size=R.size}function $h(){this.__data__=new uc,this.size=0}function Fd(S){var R=this.__data__,$=R.delete(S);return this.size=R.size,$}function Lc(S){return this.__data__.get(S)}function Vn(S){return this.__data__.has(S)}function zd(S,R){var $=this.__data__;if($ instanceof uc){var he=$.__data__;if(!sc||he.length<r-1)return he.push([S,R]),this.size=++$.size,this;$=this.__data__=new cc(he)}return $.set(S,R),this.size=$.size,this}Gl.prototype.clear=$h,Gl.prototype.delete=Fd,Gl.prototype.get=Lc,Gl.prototype.has=Vn,Gl.prototype.set=zd;function zf(S,R){var $=_r(S),he=!$&&of(S),Fe=!$&&!he&&tp(S),Je=!$&&!he&&!Fe&&sf(S),vt=$||he||Fe||Je,Rt=vt?Pd(S.length,MA):[],zt=Rt.length;for(var _n in S)(R||kr.call(S,_n))&&!(vt&&(_n=="length"||Fe&&(_n=="offset"||_n=="parent")||Je&&(_n=="buffer"||_n=="byteLength"||_n=="byteOffset")||PA(_n,zt)))&&Rt.push(_n);return Rt}function ch(S){var R=S.length;return R?S[Z(0,R-1)]:t}function Vh(S,R){return ng(va(S),Du(R,0,S.length))}function Hh(S){return ng(va(S))}function Ah(S,R,$){($!==t&&!$l(S[R],$)||$===t&&!(R in S))&&Ru(S,R,$)}function or(S,R,$){var he=S[R];(!(kr.call(S,R)&&$l(he,$))||$===t&&!(R in S))&&Ru(S,R,$)}function hc(S,R){for(var $=S.length;$--;)if($l(S[$][0],R))return $;return-1}function g0(S,R,$,he){return bl(S,function(Fe,Je,vt){R(he,Fe,$(Fe),vt)}),he}function jf(S,R){return S&&du(R,hl(R),S)}function Zh(S,R){return S&&du(R,Nu(R),S)}function Ru(S,R,$){R=="__proto__"&&Kl?Kl(S,R,{configurable:!0,enumerable:!0,value:$,writable:!0}):S[R]=$}function jd(S,R){for(var $=-1,he=R.length,Fe=nn(he),Je=S==null;++$<he;)Fe[$]=Je?t:FA(S,R[$]);return Fe}function Du(S,R,$){return S===S&&($!==t&&(S=S<=$?S:$),R!==t&&(S=S>=R?S:R)),S}function Wl(S,R,$,he,Fe,Je){var vt,Rt=R&y,zt=R&M,_n=R&x;if($&&(vt=Fe?$(S,he,Fe,Je):$(S)),vt!==t)return vt;if(!oa(S))return S;var xn=_r(S);if(xn){if(vt=vv(S),!Rt)return va(S,vt)}else{var Ln=mu(S),gi=Ln==at||Ln==it;if(tp(S))return Qo(S,Rt);if(Ln==Jt||Ln==nt||gi&&!Fe){if(vt=zt||gi?{}:T1(S),!Rt)return zt?RA(S,Zh(vt,S)):Wd(S,jf(vt,S))}else{if(!Ai[Ln])return Fe?S:{};vt=aC(S,Ln,Rt)}}Je||(Je=new Gl);var Vi=Je.get(S);if(Vi)return Vi;Je.set(S,vt),j0(S)?S.forEach(function(Mr){vt.add(Wl(Mr,R,$,Mr,S,Je))}):Nv(S)&&S.forEach(function(Mr,Po){vt.set(Po,Wl(Mr,R,$,Po,S,Je))});var xr=_n?zt?yv:Xm:zt?Nu:hl,go=xn?t:xr(S);return rc(go||S,function(Mr,Po){go&&(Po=Mr,Mr=S[Po]),or(vt,Po,Wl(Mr,R,$,Po,S,Je))}),vt}function y0(S){var R=hl(S);return function($){return hh($,S,R)}}function hh(S,R,$){var he=$.length;if(S==null)return!he;for(S=Wo(S);he--;){var Fe=$[he],Je=R[Fe],vt=S[Fe];if(vt===t&&!(Fe in S)||!Je(vt))return!1}return!0}function $m(S,R,$){if(typeof S!="function")throw new Pl(s);return w0(function(){S.apply(t,$)},R)}function dc(S,R,$,he){var Fe=-1,Je=Rd,vt=!0,Rt=S.length,zt=[],_n=R.length;if(!Rt)return zt;$&&(R=Jo(R,Ou($))),he?(Je=Dd,vt=!1):R.length>=r&&(Je=Rf,vt=!1,R=new Ld(R));e:for(;++Fe<Rt;){var xn=S[Fe],Ln=$==null?xn:$(xn);if(xn=he||xn!==0?xn:0,vt&&Ln===Ln){for(var gi=_n;gi--;)if(R[gi]===Ln)continue e;zt.push(xn)}else Je(R,Ln,he)||zt.push(xn)}return zt}var bl=jc(La),To=jc(Nd,!0);function dh(S,R){var $=!0;return bl(S,function(he,Fe,Je){return $=!!R(he,Fe,Je),$}),$}function hu(S,R,$){for(var he=-1,Fe=S.length;++he<Fe;){var Je=S[he],vt=R(Je);if(vt!=null&&(Rt===t?vt===vt&&!Ja(vt):$(vt,Rt)))var Rt=vt,zt=Je}return zt}function Xh(S,R,$,he){var Fe=S.length;for($=ar($),$<0&&($=-$>Fe?0:Fe+$),he=he===t||he>Fe?Fe:ar(he),he<0&&(he+=Fe),he=$>he?0:ay(he);$<he;)S[$++]=R;return S}function Nf(S,R){var $=[];return bl(S,function(he,Fe,Je){R(he,Fe,Je)&&$.push(he)}),$}function ia(S,R,$,he,Fe){var Je=-1,vt=S.length;for($||($=R1),Fe||(Fe=[]);++Je<vt;){var Rt=S[Je];R>0&&$(Rt)?R>1?ia(Rt,R-1,$,he,Fe):Dl(Fe,Rt):he||(Fe[Fe.length]=Rt)}return Fe}var Jh=fu(),ed=fu(!0);function La(S,R){return S&&Jh(S,R,hl)}function Nd(S,R){return S&&ed(S,R,hl)}function ti(S,R){return Ya(R,function($){return Yc(S[$])})}function Ci(S,R){R=Er(R,S);for(var $=0,he=R.length;S!=null&&$<he;)S=S[ql(R[$++])];return $&&$==he?S:t}function td(S,R,$){var he=R(S);return _r(S)?he:Dl(he,$(S))}function ul(S){return S==null?S===t?$n:Ot:sA&&sA in Wo(S)?Yf(S):P1(S)}function nd(S,R){return S>R}function us(S,R){return S!=null&&kr.call(S,R)}function fc(S,R){return S!=null&&R in Wo(S)}function cl(S,R,$){return S>=ta(R,$)&&S<Ts(R,$)}function AA(S,R,$){for(var he=$?Dd:Rd,Fe=S[0].length,Je=S.length,vt=Je,Rt=nn(Je),zt=1/0,_n=[];vt--;){var xn=S[vt];vt&&R&&(xn=Jo(xn,Ou(R))),zt=ta(xn.length,zt),Rt[vt]=!$&&(R||Fe>=120&&xn.length>=120)?new Ld(vt&&xn):t}xn=S[0];var Ln=-1,gi=Rt[0];e:for(;++Ln<Fe&&_n.length<zt;){var Vi=xn[Ln],xr=R?R(Vi):Vi;if(Vi=$||Vi!==0?Vi:0,!(gi?Rf(gi,xr):he(_n,xr,$))){for(vt=Je;--vt;){var go=Rt[vt];if(!(go?Rf(go,xr):he(S[vt],xr,$)))continue e}gi&&gi.push(xr),_n.push(Vi)}}return _n}function E1(S,R,$,he){return La(S,function(Fe,Je,vt){R(he,$(Fe),Je,vt)}),he}function Fc(S,R,$){R=Er(R,S),S=Wp(S,R);var he=S==null?S:S[ql(Gs(R))];return he==null?t:vs(he,S,$)}function Pu(S){return Ws(S)&&ul(S)==nt}function bs(S){return Ws(S)&&ul(S)==_e}function cs(S){return Ws(S)&&ul(S)==Te}function po(S,R,$,he,Fe){return S===R?!0:S==null||R==null||!Ws(S)&&!Ws(R)?S!==S&&R!==R:sr(S,R,$,he,po,Fe)}function sr(S,R,$,he,Fe,Je){var vt=_r(S),Rt=_r(R),zt=vt?bt:mu(S),_n=Rt?bt:mu(R);zt=zt==nt?Jt:zt,_n=_n==nt?Jt:_n;var xn=zt==Jt,Ln=_n==Jt,gi=zt==_n;if(gi&&tp(S)){if(!tp(R))return!1;vt=!0,xn=!1}if(gi&&!xn)return Je||(Je=new Gl),vt||sf(S)?Zm(S,R,$,he,Fe,Je):b0(S,R,zt,$,he,Fe,Je);if(!($&T)){var Vi=xn&&kr.call(S,"__wrapped__"),xr=Ln&&kr.call(R,"__wrapped__");if(Vi||xr){var go=Vi?S.value():S,Mr=xr?R.value():R;return Je||(Je=new Gl),Fe(go,Mr,$,he,Je)}}return gi?(Je||(Je=new Gl),I1(S,R,$,he,Fe,Je)):!1}function xo(S){return Ws(S)&&mu(S)==ft}function As(S,R,$,he){var Fe=$.length,Je=Fe,vt=!he;if(S==null)return!Je;for(S=Wo(S);Fe--;){var Rt=$[Fe];if(vt&&Rt[2]?Rt[1]!==S[Rt[0]]:!(Rt[0]in S))return!1}for(;++Fe<Je;){Rt=$[Fe];var zt=Rt[0],_n=S[zt],xn=Rt[1];if(vt&&Rt[2]){if(_n===t&&!(zt in S))return!1}else{var Ln=new Gl;if(he)var gi=he(_n,xn,zt,S,R,Ln);if(!(gi===t?po(xn,_n,T|P,he,Ln):gi))return!1}}return!0}function id(S){if(!oa(S)||eg(S))return!1;var R=Yc(S)?ih:zs;return R.test(Fu(S))}function IA(S){return Ws(S)&&ul(S)==oi}function fh(S){return Ws(S)&&mu(S)==In}function hA(S){return Ws(S)&&mg(S.length)&&!!Gi[ul(S)]}function zc(S){return typeof S=="function"?S:S==null?bc:typeof S=="object"?_r(S)?Qf(S[0],S[1]):Wf(S):$e(S)}function kA(S){if(!Gp(S))return Gh(S);var R=[];for(var $ in Wo(S))kr.call(S,$)&&$!="constructor"&&R.push($);return R}function Vm(S){if(!oa(S))return Vd(S);var R=Gp(S),$=[];for(var he in S)he=="constructor"&&(R||!kr.call(S,he))||$.push(he);return $}function zo(S,R){return S<R}function Gf(S,R){var $=-1,he=yc(S)?nn(S.length):[];return bl(S,function(Fe,Je,vt){he[++$]=R(Fe,Je,vt)}),he}function Wf(S){var R=$d(S);return R.length==1&&R[0][2]?D1(R[0][0],R[0][1]):function($){return $===S||As($,S,R)}}function Qf(S,R){return jp(S)&&UA(R)?D1(ql(S),R):function($){var he=FA($,S);return he===t&&he===R?dy($,S):po(R,he,T|P)}}function Gd(S,R,$,he,Fe){S!==R&&Jh(R,function(Je,vt){if(Fe||(Fe=new Gl),oa(Je))O(S,R,vt,$,Gd,he,Fe);else{var Rt=he?he(Cs(S,vt),Je,vt+"",S,R,Fe):t;Rt===t&&(Rt=Je),Ah(S,vt,Rt)}},Nu)}function O(S,R,$,he,Fe,Je,vt){var Rt=Cs(S,$),zt=Cs(R,$),_n=vt.get(zt);if(_n){Ah(S,$,_n);return}var xn=Je?Je(Rt,zt,$+"",S,R,vt):t,Ln=xn===t;if(Ln){var gi=_r(zt),Vi=!gi&&tp(zt),xr=!gi&&!Vi&&sf(zt);xn=zt,gi||Vi||xr?_r(Rt)?xn=Rt:Za(Rt)?xn=va(Rt):Vi?(Ln=!1,xn=Qo(zt,!0)):xr?(Ln=!1,xn=ra(zt,!0)):xn=[]:gg(zt)||of(zt)?(xn=Rt,of(Rt)?xn=im(Rt):(!oa(Rt)||Yc(Rt))&&(xn=T1(zt))):Ln=!1}Ln&&(vt.set(zt,xn),Fe(xn,zt,he,Je,vt),vt.delete(zt)),Ah(S,$,xn)}function l(S,R){var $=S.length;if($)return R+=R<0?$:0,PA(R,$)?S[R]:t}function p(S,R,$){R.length?R=Jo(R,function(Je){return _r(Je)?function(vt){return Ci(vt,Je.length===1?Je[0]:Je)}:Je}):R=[bc];var he=-1;R=Jo(R,Ou(Qi()));var Fe=Gf(S,function(Je,vt,Rt){var zt=Jo(R,function(_n){return _n(Je)});return{criteria:zt,index:++he,value:Je}});return Tf(Fe,function(Je,vt){return ph(Je,vt,$)})}function C(S,R){return E(S,R,function($,he){return dy(S,he)})}function E(S,R,$){for(var he=-1,Fe=R.length,Je={};++he<Fe;){var vt=R[he],Rt=Ci(S,vt);$(Rt,vt)&&Ne(Je,Er(vt,S),Rt)}return Je}function B(S){return function(R){return Ci(R,S)}}function U(S,R,$,he){var Fe=he?kf:XA,Je=-1,vt=R.length,Rt=S;for(S===R&&(R=va(R)),$&&(Rt=Jo(S,Ou($)));++Je<vt;)for(var zt=0,_n=R[Je],xn=$?$(_n):_n;(zt=Fe(Rt,xn,zt,he))>-1;)Rt!==S&&hr.call(Rt,zt,1),hr.call(S,zt,1);return S}function G(S,R){for(var $=S?R.length:0,he=$-1;$--;){var Fe=R[$];if($==he||Fe!==Je){var Je=Fe;PA(Fe)?hr.call(S,Fe,1):Lt(S,Fe)}}return S}function Z(S,R){return S+Kd(Pc()*(R-S+1))}function ae(S,R,$,he){for(var Fe=-1,Je=Ts(Kf((R-S)/($||1)),0),vt=nn(Je);Je--;)vt[he?Je:++Fe]=S,S+=$;return vt}function ce(S,R){var $="";if(!S||R<1||R>tt)return $;do R%2&&($+=S),R=Kd(R/2),R&&(S+=S);while(R);return $}function me(S,R){return U1(Cv(S,R,bc),S+"")}function ge(S){return ch(Ge(S))}function Pe(S,R){var $=Ge(S);return ng($,Du(R,0,$.length))}function Ne(S,R,$,he){if(!oa(S))return S;R=Er(R,S);for(var Fe=-1,Je=R.length,vt=Je-1,Rt=S;Rt!=null&&++Fe<Je;){var zt=ql(R[Fe]),_n=$;if(zt==="__proto__"||zt==="constructor"||zt==="prototype")return S;if(Fe!=vt){var xn=Rt[zt];_n=he?he(xn,zt,Rt):t,_n===t&&(_n=oa(xn)?xn:PA(R[Fe+1])?[]:{})}or(Rt,zt,_n),Rt=Rt[zt]}return S}var Ze=na?function(S,R){return na.set(S,R),S}:bc,Xe=Kl?function(S,R){return Kl(S,"toString",{configurable:!0,enumerable:!1,value:Do(R),writable:!0})}:bc;function et(S){return ng(Ge(S))}function ot(S,R,$){var he=-1,Fe=S.length;R<0&&(R=-R>Fe?0:Fe+R),$=$>Fe?Fe:$,$<0&&($+=Fe),Fe=R>$?0:$-R>>>0,R>>>=0;for(var Je=nn(Fe);++he<Fe;)Je[he]=S[he+R];return Je}function ht(S,R){var $;return bl(S,function(he,Fe,Je){return $=R(he,Fe,Je),!$}),!!$}function ut(S,R,$){var he=0,Fe=S==null?he:S.length;if(typeof R=="number"&&R===R&&Fe<=Me){for(;he<Fe;){var Je=he+Fe>>>1,vt=S[Je];vt!==null&&!Ja(vt)&&($?vt<=R:vt<R)?he=Je+1:Fe=Je}return Fe}return gt(S,R,bc,$)}function gt(S,R,$,he){var Fe=0,Je=S==null?0:S.length;if(Je===0)return 0;R=$(R);for(var vt=R!==R,Rt=R===null,zt=Ja(R),_n=R===t;Fe<Je;){var xn=Kd((Fe+Je)/2),Ln=$(S[xn]),gi=Ln!==t,Vi=Ln===null,xr=Ln===Ln,go=Ja(Ln);if(vt)var Mr=he||xr;else _n?Mr=xr&&(he||gi):Rt?Mr=xr&&gi&&(he||!Vi):zt?Mr=xr&&gi&&!Vi&&(he||!go):Vi||go?Mr=!1:Mr=he?Ln<=R:Ln<R;Mr?Fe=xn+1:Je=xn}return ta(Je,ze)}function xt(S,R){for(var $=-1,he=S.length,Fe=0,Je=[];++$<he;){var vt=S[$],Rt=R?R(vt):vt;if(!$||!$l(Rt,zt)){var zt=Rt;Je[Fe++]=vt===0?0:vt}}return Je}function ct(S){return typeof S=="number"?S:Ja(S)?ke:+S}function wt(S){if(typeof S=="string")return S;if(_r(S))return Jo(S,wt)+"";if(Ja(S))return BA?BA.call(S):"";var R=S+"";return R=="0"&&1/S==-qe?"-0":R}function Wt(S,R,$){var he=-1,Fe=Rd,Je=S.length,vt=!0,Rt=[],zt=Rt;if($)vt=!1,Fe=Dd;else if(Je>=r){var _n=R?null:mv(S);if(_n)return Rp(_n);vt=!1,Fe=Rf,zt=new Ld}else zt=R?[]:Rt;e:for(;++he<Je;){var xn=S[he],Ln=R?R(xn):xn;if(xn=$||xn!==0?xn:0,vt&&Ln===Ln){for(var gi=zt.length;gi--;)if(zt[gi]===Ln)continue e;R&&zt.push(Ln),Rt.push(xn)}else Fe(zt,Ln,$)||(zt!==Rt&&zt.push(Ln),Rt.push(xn))}return Rt}function Lt(S,R){return R=Er(R,S),S=Wp(S,R),S==null||delete S[ql(Gs(R))]}function Nt(S,R,$,he){return Ne(S,R,$(Ci(S,R)),he)}function Gt(S,R,$,he){for(var Fe=S.length,Je=he?Fe:-1;(he?Je--:++Je<Fe)&&R(S[Je],Je,S););return $?ot(S,he?0:Je,he?Je+1:Fe):ot(S,he?Je+1:0,he?Fe:Je)}function Bn(S,R){var $=S;return $ instanceof br&&($=$.value()),oc(R,function(he,Fe){return Fe.func.apply(Fe.thisArg,Dl([he],Fe.args))},$)}function kn(S,R,$){var he=S.length;if(he<2)return he?Wt(S[0]):[];for(var Fe=-1,Je=nn(he);++Fe<he;)for(var vt=S[Fe],Rt=-1;++Rt<he;)Rt!=Fe&&(Je[Fe]=dc(Je[Fe]||vt,S[Rt],R,$));return Wt(ia(Je,1),R,$)}function cn(S,R,$){for(var he=-1,Fe=S.length,Je=R.length,vt={};++he<Fe;){var Rt=he<Je?R[he]:t;$(vt,S[he],Rt)}return vt}function si(S){return Za(S)?S:[]}function Xi(S){return typeof S=="function"?S:bc}function Er(S,R){return _r(S)?S:jp(S,R)?[S]:Zd(ns(S))}var Eo=me;function Wr(S,R,$){var he=S.length;return $=$===t?he:$,!R&&$>=he?S:ot(S,R,$)}var es=S1||function(S){return ki.clearTimeout(S)};function Qo(S,R){if(R)return S.slice();var $=S.length,he=rh?rh($):new S.constructor($);return S.copy(he),he}function Br(S){var R=new S.constructor(S.byteLength);return new jh(R).set(new jh(S)),R}function Rs(S,R){var $=R?Br(S.buffer):S.buffer;return new S.constructor($,S.byteOffset,S.byteLength)}function Al(S){var R=new S.constructor(S.source,ni.exec(S));return R.lastIndex=S.lastIndex,R}function la(S){return Wh?Wo(Wh.call(S)):{}}function ra(S,R){var $=R?Br(S.buffer):S.buffer;return new S.constructor($,S.byteOffset,S.length)}function Cl(S,R){if(S!==R){var $=S!==t,he=S===null,Fe=S===S,Je=Ja(S),vt=R!==t,Rt=R===null,zt=R===R,_n=Ja(R);if(!Rt&&!_n&&!Je&&S>R||Je&&vt&&zt&&!Rt&&!_n||he&&vt&&zt||!$&&zt||!Fe)return 1;if(!he&&!Je&&!_n&&S<R||_n&&$&&Fe&&!he&&!Je||Rt&&$&&Fe||!vt&&Fe||!zt)return-1}return 0}function ph(S,R,$){for(var he=-1,Fe=S.criteria,Je=R.criteria,vt=Fe.length,Rt=$.length;++he<vt;){var zt=Cl(Fe[he],Je[he]);if(zt){if(he>=Rt)return zt;var _n=$[he];return zt*(_n=="desc"?-1:1)}}return S.index-R.index}function Uu(S,R,$,he){for(var Fe=-1,Je=S.length,vt=$.length,Rt=-1,zt=R.length,_n=Ts(Je-vt,0),xn=nn(zt+_n),Ln=!he;++Rt<zt;)xn[Rt]=R[Rt];for(;++Fe<vt;)(Ln||Fe<Je)&&(xn[$[Fe]]=S[Fe]);for(;_n--;)xn[Rt++]=S[Fe++];return xn}function TA(S,R,$,he){for(var Fe=-1,Je=S.length,vt=-1,Rt=$.length,zt=-1,_n=R.length,xn=Ts(Je-Rt,0),Ln=nn(xn+_n),gi=!he;++Fe<xn;)Ln[Fe]=S[Fe];for(var Vi=Fe;++zt<_n;)Ln[Vi+zt]=R[zt];for(;++vt<Rt;)(gi||Fe<Je)&&(Ln[Vi+$[vt]]=S[Fe++]);return Ln}function va(S,R){var $=-1,he=S.length;for(R||(R=nn(he));++$<he;)R[$]=S[$];return R}function du(S,R,$,he){var Fe=!$;$||($={});for(var Je=-1,vt=R.length;++Je<vt;){var Rt=R[Je],zt=he?he($[Rt],S[Rt],Rt,$,S):t;zt===t&&(zt=S[Rt]),Fe?Ru($,Rt,zt):or($,Rt,zt)}return $}function Wd(S,R){return du(S,k1(S),R)}function RA(S,R){return du(S,_0(S),R)}function Ql(S,R){return function($,he){var Fe=_r($)?_1:g0,Je=R?R():{};return Fe($,S,Qi(he,2),Je)}}function _l(S){return me(function(R,$){var he=-1,Fe=$.length,Je=Fe>1?$[Fe-1]:t,vt=Fe>2?$[2]:t;for(Je=S.length>3&&typeof Je=="function"?(Fe--,Je):t,vt&&Lu($[0],$[1],vt)&&(Je=Fe<3?t:Je,Fe=1),R=Wo(R);++he<Fe;){var Rt=$[he];Rt&&S(R,Rt,he,Je)}return R})}function jc(S,R){return function($,he){if($==null)return $;if(!yc($))return S($,he);for(var Fe=$.length,Je=R?Fe:-1,vt=Wo($);(R?Je--:++Je<Fe)&&he(vt[Je],Je,vt)!==!1;);return $}}function fu(S){return function(R,$,he){for(var Fe=-1,Je=Wo(R),vt=he(R),Rt=vt.length;Rt--;){var zt=vt[S?Rt:++Fe];if($(Je[zt],zt,Je)===!1)break}return R}}function Ns(S,R,$){var he=R&F,Fe=ua(S);function Je(){var vt=this&&this!==ki&&this instanceof Je?Fe:S;return vt.apply(he?$:this,arguments)}return Je}function ba(S){return function(R){R=ns(R);var $=Uh(R)?Is(R):t,he=$?$[0]:R.charAt(0),Fe=$?Wr($,1).join(""):R.slice(1);return he[S]()+Fe}}function $a(S){return function(R){return oc(Wu(Zt(R).replace(Fo,"")),S,"")}}function ua(S){return function(){var R=arguments;switch(R.length){case 0:return new S;case 1:return new S(R[0]);case 2:return new S(R[0],R[1]);case 3:return new S(R[0],R[1],R[2]);case 4:return new S(R[0],R[1],R[2],R[3]);case 5:return new S(R[0],R[1],R[2],R[3],R[4]);case 6:return new S(R[0],R[1],R[2],R[3],R[4],R[5]);case 7:return new S(R[0],R[1],R[2],R[3],R[4],R[5],R[6])}var $=ku(S.prototype),he=S.apply($,R);return oa(he)?he:$}}function v0(S,R,$){var he=ua(S);function Fe(){for(var Je=arguments.length,vt=nn(Je),Rt=Je,zt=Ca(Fe);Rt--;)vt[Rt]=arguments[Rt];var _n=Je<3&&vt[0]!==zt&&vt[Je-1]!==zt?[]:eh(vt,zt);if(Je-=_n.length,Je<$)return qf(S,R,Ku,Fe.placeholder,t,vt,_n,t,t,$-Je);var xn=this&&this!==ki&&this instanceof Fe?he:S;return vs(xn,this,vt)}return Fe}function Qd(S){return function(R,$,he){var Fe=Wo(R);if(!yc(R)){var Je=Qi($,3);R=hl(R),$=function(Rt){return Je(Fe[Rt],Rt,Fe)}}var vt=S(R,$,he);return vt>-1?Fe[Je?R[vt]:vt]:t}}function Nc(S){return rd(function(R){var $=R.length,he=$,Fe=al.prototype.thru;for(S&&R.reverse();he--;){var Je=R[he];if(typeof Je!="function")throw new Pl(s);if(Fe&&!vt&&ca(Je)=="wrapper")var vt=new al([],!0)}for(he=vt?he:$;++he<$;){Je=R[he];var Rt=ca(Je),zt=Rt=="wrapper"?zp(Je):t;zt&&Np(zt[0])&&zt[1]==(z|V|Q|se)&&!zt[4].length&&zt[9]==1?vt=vt[ca(zt[0])].apply(vt,zt[3]):vt=Je.length==1&&Np(Je)?vt[Rt]():vt.thru(Je)}return function(){var _n=arguments,xn=_n[0];if(vt&&_n.length==1&&_r(xn))return vt.plant(xn).value();for(var Ln=0,gi=$?R[Ln].apply(this,_n):xn;++Ln<$;)gi=R[Ln].call(this,gi);return gi}})}function Ku(S,R,$,he,Fe,Je,vt,Rt,zt,_n){var xn=R&z,Ln=R&F,gi=R&j,Vi=R&(V|H),xr=R&le,go=gi?t:ua(S);function Mr(){for(var Po=arguments.length,Yo=nn(Po),lf=Po;lf--;)Yo[lf]=arguments[lf];if(Vi)var Mh=Ca(Mr),uf=Df(Yo,Mh);if(he&&(Yo=Uu(Yo,he,Fe,Vi)),Je&&(Yo=TA(Yo,Je,vt,Vi)),Po-=uf,Vi&&Po<_n){var yu=eh(Yo,Mh);return qf(S,R,Ku,Mr.placeholder,$,Yo,yu,Rt,zt,_n-Po)}var sm=Ln?$:this,W0=gi?sm[S]:S;return Po=Yo.length,Rt?Yo=tg(Yo,Rt):xr&&Po>1&&Yo.reverse(),xn&&zt<Po&&(Yo.length=zt),this&&this!==ki&&this instanceof Mr&&(W0=go||ua(W0)),W0.apply(sm,Yo)}return Mr}function pu(S,R){return function($,he){return E1($,S,R(he),{})}}function Gc(S,R){return function($,he){var Fe;if($===t&&he===t)return R;if($!==t&&(Fe=$),he!==t){if(Fe===t)return he;typeof $=="string"||typeof he=="string"?($=wt($),he=wt(he)):($=ct($),he=ct(he)),Fe=S($,he)}return Fe}}function dA(S){return rd(function(R){return R=Jo(R,Ou(Qi())),me(function($){var he=this;return S(R,function(Fe){return vs(Fe,he,$)})})})}function DA(S,R){R=R===t?" ":wt(R);var $=R.length;if($<2)return $?ce(R,S):R;var he=ce(R,Kf(S/Kh(R)));return Uh(R)?Wr(Is(he),0,S).join(""):he.slice(0,S)}function Hm(S,R,$,he){var Fe=R&F,Je=ua(S);function vt(){for(var Rt=-1,zt=arguments.length,_n=-1,xn=he.length,Ln=nn(xn+zt),gi=this&&this!==ki&&this instanceof vt?Je:S;++_n<xn;)Ln[_n]=he[_n];for(;zt--;)Ln[_n++]=arguments[++Rt];return vs(gi,Fe?$:this,Ln)}return vt}function fA(S){return function(R,$,he){return he&&typeof he!="number"&&Lu(R,$,he)&&($=he=t),R=ud(R),$===t?($=R,R=0):$=ud($),he=he===t?R<$?1:-1:ud(he),ae(R,$,he,S)}}function qd(S){return function(R,$){return typeof R=="string"&&typeof $=="string"||(R=ju(R),$=ju($)),S(R,$)}}function qf(S,R,$,he,Fe,Je,vt,Rt,zt,_n){var xn=R&V,Ln=xn?vt:t,gi=xn?t:vt,Vi=xn?Je:t,xr=xn?t:Je;R|=xn?Q:Y,R&=~(xn?Y:Q),R&q||(R&=-4);var go=[S,R,Fe,Vi,Ln,xr,gi,Rt,zt,_n],Mr=$.apply(t,go);return Np(S)&&cC(Mr,go),Mr.placeholder=he,Hd(Mr,S,R)}function mh(S){var R=ks[S];return function($,he){if($=ju($),he=he==null?0:ta(ar(he),292),he&&Ll($)){var Fe=(ns($)+"e").split("e"),Je=R(Fe[0]+"e"+(+Fe[1]+he));return Fe=(ns(Je)+"e").split("e"),+(Fe[0]+"e"+(+Fe[1]-he))}return R($)}}var mv=Uc&&1/Rp(new Uc([,-0]))[1]==qe?function(S){return new Uc(S)}:_;function Yd(S){return function(R){var $=mu(R);return $==ft?Tp(R):$==In?f0(R):x1(R,S(R))}}function Va(S,R,$,he,Fe,Je,vt,Rt){var zt=R&j;if(!zt&&typeof S!="function")throw new Pl(s);var _n=he?he.length:0;if(_n||(R&=-97,he=Fe=t),vt=vt===t?vt:Ts(ar(vt),0),Rt=Rt===t?Rt:ar(Rt),_n-=Fe?Fe.length:0,R&Y){var xn=he,Ln=Fe;he=Fe=t}var gi=zt?t:zp(S),Vi=[S,R,$,he,Fe,xn,Ln,Je,vt,Rt];if(gi&&uC(Vi,gi),S=Vi[0],R=Vi[1],$=Vi[2],he=Vi[3],Fe=Vi[4],Rt=Vi[9]=Vi[9]===t?zt?0:S.length:Ts(Vi[9]-_n,0),!Rt&&R&(V|H)&&(R&=-25),!R||R==F)var xr=Ns(S,R,$);else R==V||R==H?xr=v0(S,R,Rt):(R==Q||R==(F|Q))&&!Fe.length?xr=Hm(S,R,$,he):xr=Ku.apply(t,Vi);var go=gi?Ze:cC;return Hd(go(xr,Vi),S,R)}function O1(S,R,$,he){return S===t||$l(S,Dc[$])&&!kr.call(he,$)?R:S}function gv(S,R,$,he,Fe,Je){return oa(S)&&oa(R)&&(Je.set(R,S),Gd(S,R,t,gv,Je),Je.delete(R)),S}function B1(S){return gg(S)?t:S}function Zm(S,R,$,he,Fe,Je){var vt=$&T,Rt=S.length,zt=R.length;if(Rt!=zt&&!(vt&&zt>Rt))return!1;var _n=Je.get(S),xn=Je.get(R);if(_n&&xn)return _n==R&&xn==S;var Ln=-1,gi=!0,Vi=$&P?new Ld:t;for(Je.set(S,R),Je.set(R,S);++Ln<Rt;){var xr=S[Ln],go=R[Ln];if(he)var Mr=vt?he(go,xr,Ln,R,S,Je):he(xr,go,Ln,S,R,Je);if(Mr!==t){if(Mr)continue;gi=!1;break}if(Vi){if(!Bf(R,function(Po,Yo){if(!Rf(Vi,Yo)&&(xr===Po||Fe(xr,Po,$,he,Je)))return Vi.push(Yo)})){gi=!1;break}}else if(!(xr===go||Fe(xr,go,$,he,Je))){gi=!1;break}}return Je.delete(S),Je.delete(R),gi}function b0(S,R,$,he,Fe,Je,vt){switch($){case oe:if(S.byteLength!=R.byteLength||S.byteOffset!=R.byteOffset)return!1;S=S.buffer,R=R.buffer;case _e:return!(S.byteLength!=R.byteLength||!Je(new jh(S),new jh(R)));case Ke:case Te:case Dt:return $l(+S,+R);case We:return S.name==R.name&&S.message==R.message;case oi:case Tn:return S==R+"";case ft:var Rt=Tp;case In:var zt=he&T;if(Rt||(Rt=Rp),S.size!=R.size&&!zt)return!1;var _n=vt.get(S);if(_n)return _n==R;he|=P,vt.set(S,R);var xn=Zm(Rt(S),Rt(R),he,Fe,Je,vt);return vt.delete(S),xn;case dn:if(Wh)return Wh.call(S)==Wh.call(R)}return!1}function I1(S,R,$,he,Fe,Je){var vt=$&T,Rt=Xm(S),zt=Rt.length,_n=Xm(R),xn=_n.length;if(zt!=xn&&!vt)return!1;for(var Ln=zt;Ln--;){var gi=Rt[Ln];if(!(vt?gi in R:kr.call(R,gi)))return!1}var Vi=Je.get(S),xr=Je.get(R);if(Vi&&xr)return Vi==R&&xr==S;var go=!0;Je.set(S,R),Je.set(R,S);for(var Mr=vt;++Ln<zt;){gi=Rt[Ln];var Po=S[gi],Yo=R[gi];if(he)var lf=vt?he(Yo,Po,gi,R,S,Je):he(Po,Yo,gi,S,R,Je);if(!(lf===t?Po===Yo||Fe(Po,Yo,$,he,Je):lf)){go=!1;break}Mr||(Mr=gi=="constructor")}if(go&&!Mr){var Mh=S.constructor,uf=R.constructor;Mh!=uf&&"constructor"in S&&"constructor"in R&&!(typeof Mh=="function"&&Mh instanceof Mh&&typeof uf=="function"&&uf instanceof uf)&&(go=!1)}return Je.delete(S),Je.delete(R),go}function rd(S){return U1(Cv(S,t,_s),S+"")}function Xm(S){return td(S,hl,k1)}function yv(S){return td(S,Nu,_0)}var zp=na?function(S){return na.get(S)}:_;function ca(S){for(var R=S.name+"",$=lo[R],he=kr.call(lo,R)?$.length:0;he--;){var Fe=$[he],Je=Fe.func;if(Je==null||Je==S)return Fe.name}return R}function Ca(S){var R=kr.call(Ye,"placeholder")?Ye:S;return R.placeholder}function Qi(){var S=Ye.iteratee||cd;return S=S===cd?zc:S,arguments.length?S(arguments[0],arguments[1]):S}function C0(S,R){var $=S.__data__;return M0(R)?$[typeof R=="string"?"string":"hash"]:$.map}function $d(S){for(var R=hl(S),$=R.length;$--;){var he=R[$],Fe=S[he];R[$]=[he,Fe,UA(Fe)]}return R}function gh(S,R){var $=Ph(S,R);return id($)?$:t}function Yf(S){var R=kr.call(S,sA),$=S[sA];try{S[sA]=t;var he=!0}catch{}var Fe=Ul.call(S);return he&&(R?S[sA]=$:delete S[sA]),Fe}var k1=Nh?function(S){return S==null?[]:(S=Wo(S),Ya(Nh(S),function(R){return oh.call(S,R)}))}:pn,_0=Nh?function(S){for(var R=[];S;)Dl(R,k1(S)),S=cu(S);return R}:pn,mu=ul;(zl&&mu(new zl(new ArrayBuffer(1)))!=oe||sc&&mu(new sc)!=ft||Lp&&mu(Lp.resolve())!=Dn||Uc&&mu(new Uc)!=In||OA&&mu(new OA)!=Un)&&(mu=function(S){var R=ul(S),$=R==Jt?S.constructor:t,he=$?Fu($):"";if(he)switch(he){case Gr:return oe;case aA:return ft;case ac:return Dn;case js:return In;case Iu:return Un}return R});function Xx(S,R,$){for(var he=-1,Fe=$.length;++he<Fe;){var Je=$[he],vt=Je.size;switch(Je.type){case"drop":S+=vt;break;case"dropRight":R-=vt;break;case"take":R=ta(R,S+vt);break;case"takeRight":S=Ts(S,R-vt);break}}return{start:S,end:R}}function x0(S){var R=S.match(nr);return R?R[1].split(Go):[]}function Jm(S,R,$){R=Er(R,S);for(var he=-1,Fe=R.length,Je=!1;++he<Fe;){var vt=ql(R[he]);if(!(Je=S!=null&&$(S,vt)))break;S=S[vt]}return Je||++he!=Fe?Je:(Fe=S==null?0:S.length,!!Fe&&mg(Fe)&&PA(vt,Fe)&&(_r(S)||of(S)))}function vv(S){var R=S.length,$=new S.constructor(R);return R&&typeof S[0]=="string"&&kr.call(S,"index")&&($.index=S.index,$.input=S.input),$}function T1(S){return typeof S.constructor=="function"&&!Gp(S)?ku(cu(S)):{}}function aC(S,R,$){var he=S.constructor;switch(R){case _e:return Br(S);case Ke:case Te:return new he(+S);case oe:return Rs(S,$);case ee:case ne:case ue:case be:case Le:case Ve:case rt:case ye:case Be:return ra(S,$);case ft:return new he;case Dt:case Tn:return new he(S);case oi:return Al(S);case In:return new he;case dn:return la(S)}}function bv(S,R){var $=R.length;if(!$)return S;var he=$-1;return R[he]=($>1?"& ":"")+R[he],R=R.join($>2?", ":" "),S.replace(on,`{
/* [wrapped with `+R+`] */
`)}function R1(S){return _r(S)||of(S)||!!(Up&&S&&S[Up])}function PA(S,R){var $=typeof S;return R=R??tt,!!R&&($=="number"||$!="symbol"&&kl.test(S))&&S>-1&&S%1==0&&S<R}function Lu(S,R,$){if(!oa($))return!1;var he=typeof R;return(he=="number"?yc($)&&PA(R,$.length):he=="string"&&R in $)?$l($[R],S):!1}function jp(S,R){if(_r(S))return!1;var $=typeof S;return $=="number"||$=="symbol"||$=="boolean"||S==null||Ja(S)?!0:Hi.test(S)||!pi.test(S)||R!=null&&S in Wo(R)}function M0(S){var R=typeof S;return R=="string"||R=="number"||R=="symbol"||R=="boolean"?S!=="__proto__":S===null}function Np(S){var R=ca(S),$=Ye[R];if(typeof $!="function"||!(R in br.prototype))return!1;if(S===$)return!0;var he=zp($);return!!he&&S===he[0]}function eg(S){return!!Pp&&Pp in S}var gu=zh?Yc:Xt;function Gp(S){var R=S&&S.constructor,$=typeof R=="function"&&R.prototype||Dc;return S===$}function UA(S){return S===S&&!oa(S)}function D1(S,R){return function($){return $==null?!1:$[S]===R&&(R!==t||S in Wo($))}}function lC(S){var R=hg(S,function(he){return $.size===h&&$.clear(),he}),$=R.cache;return R}function uC(S,R){var $=S[1],he=R[1],Fe=$|he,Je=Fe<(F|j|z),vt=he==z&&$==V||he==z&&$==se&&S[7].length<=R[8]||he==(z|se)&&R[7].length<=R[8]&&$==V;if(!(Je||vt))return S;he&F&&(S[2]=R[2],Fe|=$&F?0:q);var Rt=R[3];if(Rt){var zt=S[3];S[3]=zt?Uu(zt,Rt,R[4]):Rt,S[4]=zt?eh(S[3],m):R[4]}return Rt=R[5],Rt&&(zt=S[5],S[5]=zt?TA(zt,Rt,R[6]):Rt,S[6]=zt?eh(S[5],m):R[6]),Rt=R[7],Rt&&(S[7]=Rt),he&z&&(S[8]=S[8]==null?R[8]:ta(S[8],R[8])),S[9]==null&&(S[9]=R[9]),S[0]=R[0],S[1]=Fe,S}function Vd(S){var R=[];if(S!=null)for(var $ in Wo(S))R.push($);return R}function P1(S){return Ul.call(S)}function Cv(S,R,$){return R=Ts(R===t?S.length-1:R,0),function(){for(var he=arguments,Fe=-1,Je=Ts(he.length-R,0),vt=nn(Je);++Fe<Je;)vt[Fe]=he[R+Fe];Fe=-1;for(var Rt=nn(R+1);++Fe<R;)Rt[Fe]=he[Fe];return Rt[R]=$(vt),vs(S,this,Rt)}}function Wp(S,R){return R.length<2?S:Ci(S,ot(R,0,-1))}function tg(S,R){for(var $=S.length,he=ta(R.length,$),Fe=va(S);he--;){var Je=R[he];S[he]=PA(Je,$)?Fe[Je]:t}return S}function Cs(S,R){if(!(R==="constructor"&&typeof S[R]=="function")&&R!="__proto__")return S[R]}var cC=yh(Ze),w0=sh||function(S,R){return ki.setTimeout(S,R)},U1=yh(Xe);function Hd(S,R,$){var he=R+"";return U1(S,bv(he,AC(x0(he),$)))}function yh(S){var R=0,$=0;return function(){var he=Fl(),Fe=Ee-(he-$);if($=he,Fe>0){if(++R>=ve)return arguments[0]}else R=0;return S.apply(t,arguments)}}function ng(S,R){var $=-1,he=S.length,Fe=he-1;for(R=R===t?he:R;++$<R;){var Je=Z($,Fe),vt=S[Je];S[Je]=S[$],S[$]=vt}return S.length=R,S}var Zd=lC(function(S){var R=[];return S.charCodeAt(0)===46&&R.push(""),S.replace(Ii,function($,he,Fe,Je){R.push(Fe?Je.replace(gn,"$1"):he||$)}),R});function ql(S){if(typeof S=="string"||Ja(S))return S;var R=S+"";return R=="0"&&1/S==-qe?"-0":R}function Fu(S){if(S!=null){try{return nh.call(S)}catch{}try{return S+""}catch{}}return""}function AC(S,R){return rc(lt,function($){var he="_."+$[0];R&$[1]&&!Rd(S,he)&&S.push(he)}),S.sort()}function K1(S){if(S instanceof br)return S.clone();var R=new al(S.__wrapped__,S.__chain__);return R.__actions__=va(S.__actions__),R.__index__=S.__index__,R.__values__=S.__values__,R}function hC(S,R,$){($?Lu(S,R,$):R===t)?R=1:R=Ts(ar(R),0);var he=S==null?0:S.length;if(!he||R<1)return[];for(var Fe=0,Je=0,vt=nn(Kf(he/R));Fe<he;)vt[Je++]=ot(S,Fe,Fe+=R);return vt}function _v(S){for(var R=-1,$=S==null?0:S.length,he=0,Fe=[];++R<$;){var Je=S[R];Je&&(Fe[he++]=Je)}return Fe}function xv(){var S=arguments.length;if(!S)return[];for(var R=nn(S-1),$=arguments[0],he=S;he--;)R[he-1]=arguments[he];return Dl(_r($)?va($):[$],ia(R,1))}var L1=me(function(S,R){return Za(S)?dc(S,ia(R,1,Za,!0)):[]}),F1=me(function(S,R){var $=Gs(R);return Za($)&&($=t),Za(S)?dc(S,ia(R,1,Za,!0),Qi($,2)):[]}),Xd=me(function(S,R){var $=Gs(R);return Za($)&&($=t),Za(S)?dc(S,ia(R,1,Za,!0),t,$):[]});function Ha(S,R,$){var he=S==null?0:S.length;return he?(R=$||R===t?1:ar(R),ot(S,R<0?0:R,he)):[]}function Qp(S,R,$){var he=S==null?0:S.length;return he?(R=$||R===t?1:ar(R),R=he-R,ot(S,0,R<0?0:R)):[]}function dC(S,R){return S&&S.length?Gt(S,Qi(R,3),!0,!0):[]}function Qr(S,R){return S&&S.length?Gt(S,Qi(R,3),!0):[]}function ig(S,R,$,he){var Fe=S==null?0:S.length;return Fe?($&&typeof $!="number"&&Lu(S,R,$)&&($=0,he=Fe),Xh(S,R,$,he)):[]}function z1(S,R,$){var he=S==null?0:S.length;if(!he)return-1;var Fe=$==null?0:ar($);return Fe<0&&(Fe=Ts(he+Fe,0)),If(S,Qi(R,3),Fe)}function rg(S,R,$){var he=S==null?0:S.length;if(!he)return-1;var Fe=he-1;return $!==t&&(Fe=ar($),Fe=$<0?Ts(he+Fe,0):ta(Fe,he-1)),If(S,Qi(R,3),Fe,!0)}function _s(S){var R=S==null?0:S.length;return R?ia(S,1):[]}function Yl(S){var R=S==null?0:S.length;return R?ia(S,qe):[]}function od(S,R){var $=S==null?0:S.length;return $?(R=R===t?1:ar(R),ia(S,R)):[]}function Mv(S){for(var R=-1,$=S==null?0:S.length,he={};++R<$;){var Fe=S[R];he[Fe[0]]=Fe[1]}return he}function qp(S){return S&&S.length?S[0]:t}function j1(S,R,$){var he=S==null?0:S.length;if(!he)return-1;var Fe=$==null?0:ar($);return Fe<0&&(Fe=Ts(he+Fe,0)),XA(S,R,Fe)}function og(S){var R=S==null?0:S.length;return R?ot(S,0,-1):[]}var Yp=me(function(S){var R=Jo(S,si);return R.length&&R[0]===S[0]?AA(R):[]}),xl=me(function(S){var R=Gs(S),$=Jo(S,si);return R===Gs($)?R=t:$.pop(),$.length&&$[0]===S[0]?AA($,Qi(R,2)):[]}),pc=me(function(S){var R=Gs(S),$=Jo(S,si);return R=typeof R=="function"?R:t,R&&$.pop(),$.length&&$[0]===S[0]?AA($,t,R):[]});function fC(S,R){return S==null?"":ah.call(S,R)}function Gs(S){var R=S==null?0:S.length;return R?S[R-1]:t}function $f(S,R,$){var he=S==null?0:S.length;if(!he)return-1;var Fe=he;return $!==t&&(Fe=ar($),Fe=Fe<0?Ts(he+Fe,0):ta(Fe,he-1)),R===R?w1(S,R,Fe):If(S,Lm,Fe,!0)}function Jd(S,R){return S&&S.length?l(S,ar(R)):t}var Vf=me(Wc);function Wc(S,R){return S&&S.length&&R&&R.length?U(S,R):S}function S0(S,R,$){return S&&S.length&&R&&R.length?U(S,R,Qi($,2)):S}function N1(S,R,$){return S&&S.length&&R&&R.length?U(S,R,t,$):S}var KA=rd(function(S,R){var $=S==null?0:S.length,he=jd(S,R);return G(S,Jo(R,function(Fe){return PA(Fe,$)?+Fe:Fe}).sort(Cl)),he});function pC(S,R){var $=[];if(!(S&&S.length))return $;var he=-1,Fe=[],Je=S.length;for(R=Qi(R,3);++he<Je;){var vt=S[he];R(vt,he,S)&&($.push(vt),Fe.push(he))}return G(S,Fe),$}function Hf(S){return S==null?S:EA.call(S)}function E0(S,R,$){var he=S==null?0:S.length;return he?($&&typeof $!="number"&&Lu(S,R,$)?(R=0,$=he):(R=R==null?0:ar(R),$=$===t?he:ar($)),ot(S,R,$)):[]}function O0(S,R){return ut(S,R)}function sg(S,R,$){return gt(S,R,Qi($,2))}function $p(S,R){var $=S==null?0:S.length;if($){var he=ut(S,R);if(he<$&&$l(S[he],R))return he}return-1}function mC(S,R){return ut(S,R,!0)}function B0(S,R,$){return gt(S,R,Qi($,2),!0)}function wv(S,R){var $=S==null?0:S.length;if($){var he=ut(S,R,!0)-1;if($l(S[he],R))return he}return-1}function G1(S){return S&&S.length?xt(S):[]}function Sv(S,R){return S&&S.length?xt(S,Qi(R,2)):[]}function Jx(S){var R=S==null?0:S.length;return R?ot(S,1,R):[]}function Ev(S,R,$){return S&&S.length?(R=$||R===t?1:ar(R),ot(S,0,R<0?0:R)):[]}function Mo(S,R,$){var he=S==null?0:S.length;return he?(R=$||R===t?1:ar(R),R=he-R,ot(S,R<0?0:R,he)):[]}function hs(S,R){return S&&S.length?Gt(S,Qi(R,3),!1,!0):[]}function uo(S,R){return S&&S.length?Gt(S,Qi(R,3)):[]}var mo=me(function(S){return Wt(ia(S,1,Za,!0))}),ts=me(function(S){var R=Gs(S);return Za(R)&&(R=t),Wt(ia(S,1,Za,!0),Qi(R,2))}),Qc=me(function(S){var R=Gs(S);return R=typeof R=="function"?R:t,Wt(ia(S,1,Za,!0),t,R)});function Zf(S){return S&&S.length?Wt(S):[]}function ag(S,R){return S&&S.length?Wt(S,Qi(R,2)):[]}function Vp(S,R){return R=typeof R=="function"?R:t,S&&S.length?Wt(S,t,R):[]}function LA(S){if(!(S&&S.length))return[];var R=0;return S=Ya(S,function($){if(Za($))return R=Ts($.length,R),!0}),Pd(R,function($){return Jo(S,Rh($))})}function _a(S,R){if(!(S&&S.length))return[];var $=LA(S);return R==null?$:Jo($,function(he){return vs(R,t,he)})}var Xf=me(function(S,R){return Za(S)?dc(S,R):[]}),Hp=me(function(S){return kn(Ya(S,Za))}),Ov=me(function(S){var R=Gs(S);return Za(R)&&(R=t),kn(Ya(S,Za),Qi(R,2))}),pA=me(function(S){var R=Gs(S);return R=typeof R=="function"?R:t,kn(Ya(S,Za),t,R)}),Zp=me(LA);function Xp(S,R){return cn(S||[],R||[],or)}function mc(S,R){return cn(S||[],R||[],Ne)}var W1=me(function(S){var R=S.length,$=R>1?S[R-1]:t;return $=typeof $=="function"?(S.pop(),$):t,_a(S,$)});function lg(S){var R=Ye(S);return R.__chain__=!0,R}function gC(S,R){return R(S),S}function sd(S,R){return R(S)}var Q1=rd(function(S){var R=S.length,$=R?S[0]:0,he=this.__wrapped__,Fe=function(Je){return jd(Je,S)};return R>1||this.__actions__.length||!(he instanceof br)||!PA($)?this.thru(Fe):(he=he.slice($,+$+(R?1:0)),he.__actions__.push({func:sd,args:[Fe],thisArg:t}),new al(he,this.__chain__).thru(function(Je){return R&&!Je.length&&Je.push(t),Je}))});function ef(){return lg(this)}function Ml(){return new al(this.value(),this.__chain__)}function Jf(){this.__values__===t&&(this.__values__=Qv(this.value()));var S=this.__index__>=this.__values__.length,R=S?t:this.__values__[this.__index__++];return{done:S,value:R}}function ug(){return this}function ad(S){for(var R,$=this;$ instanceof lc;){var he=K1($);he.__index__=0,he.__values__=t,R?Fe.__wrapped__=he:R=he;var Fe=he;$=$.__wrapped__}return Fe.__wrapped__=S,R}function Bv(){var S=this.__wrapped__;if(S instanceof br){var R=S;return this.__actions__.length&&(R=new br(this)),R=R.reverse(),R.__actions__.push({func:sd,args:[Hf],thisArg:t}),new al(R,this.__chain__)}return this.thru(Hf)}function Iv(){return Bn(this.__wrapped__,this.__actions__)}var cg=Ql(function(S,R,$){kr.call(S,$)?++S[$]:Ru(S,$,1)});function Aa(S,R,$){var he=_r(S)?Td:dh;return $&&Lu(S,R,$)&&(R=t),he(S,Qi(R,3))}function I0(S,R){var $=_r(S)?Ya:Nf;return $(S,Qi(R,3))}var qc=Qd(z1),kv=Qd(rg);function zu(S,R){return ia(k0(S,R),1)}function Jp(S,R){return ia(k0(S,R),qe)}function Tv(S,R,$){return $=$===t?1:ar($),ia(k0(S,R),$)}function yC(S,R){var $=_r(S)?rc:bl;return $(S,Qi(R,3))}function tf(S,R){var $=_r(S)?qa:To;return $(S,Qi(R,3))}var q1=Ql(function(S,R,$){kr.call(S,$)?S[$].push(R):Ru(S,$,[R])});function Rv(S,R,$,he){S=yc(S)?S:Ge(S),$=$&&!he?ar($):0;var Fe=S.length;return $<0&&($=Ts(Fe+$,0)),vg(S)?$<=Fe&&S.indexOf(R,$)>-1:!!Fe&&XA(S,R,$)>-1}var Ag=me(function(S,R,$){var he=-1,Fe=typeof R=="function",Je=yc(S)?nn(S.length):[];return bl(S,function(vt){Je[++he]=Fe?vs(R,vt,$):Fc(vt,R,$)}),Je}),vC=Ql(function(S,R,$){Ru(S,$,R)});function k0(S,R){var $=_r(S)?Jo:Gf;return $(S,Qi(R,3))}function bC(S,R,$,he){return S==null?[]:(_r(R)||(R=R==null?[]:[R]),$=he?t:$,_r($)||($=$==null?[]:[$]),p(S,R,$))}var CC=Ql(function(S,R,$){S[$?0:1].push(R)},function(){return[[],[]]});function Y1(S,R,$){var he=_r(S)?oc:Dh,Fe=arguments.length<3;return he(S,Qi(R,4),$,Fe,bl)}function Dv(S,R,$){var he=_r(S)?h0:Dh,Fe=arguments.length<3;return he(S,Qi(R,4),$,Fe,To)}function e2(S,R){var $=_r(S)?Ya:Nf;return $(S,Z1(Qi(R,3)))}function _C(S){var R=_r(S)?ch:ge;return R(S)}function Pv(S,R,$){($?Lu(S,R,$):R===t)?R=1:R=ar(R);var he=_r(S)?Vh:Pe;return he(S,R)}function Uv(S){var R=_r(S)?Hh:et;return R(S)}function nf(S){if(S==null)return 0;if(yc(S))return vg(S)?Kh(S):S.length;var R=mu(S);return R==ft||R==In?S.size:kA(S).length}function ld(S,R,$){var he=_r(S)?Bf:ht;return $&&Lu(S,R,$)&&(R=t),he(S,Qi(R,3))}var rf=me(function(S,R){if(S==null)return[];var $=R.length;return $>1&&Lu(S,R[0],R[1])?R=[]:$>2&&Lu(R[0],R[1],R[2])&&(R=[R[0]]),p(S,ia(R,1),[])}),ep=Ud||function(){return ki.Date.now()};function T0(S,R){if(typeof R!="function")throw new Pl(s);return S=ar(S),function(){if(--S<1)return R.apply(this,arguments)}}function Kv(S,R,$){return R=$?t:R,R=S&&R==null?S.length:R,Va(S,z,t,t,t,t,R)}function Lv(S,R){var $;if(typeof R!="function")throw new Pl(s);return S=ar(S),function(){return--S>0&&($=R.apply(this,arguments)),S<=1&&(R=t),$}}var R0=me(function(S,R,$){var he=F;if($.length){var Fe=eh($,Ca(R0));he|=Q}return Va(S,he,R,$,Fe)}),$1=me(function(S,R,$){var he=F|j;if($.length){var Fe=eh($,Ca($1));he|=Q}return Va(R,he,S,$,Fe)});function D0(S,R,$){R=$?t:R;var he=Va(S,V,t,t,t,t,t,R);return he.placeholder=D0.placeholder,he}function V1(S,R,$){R=$?t:R;var he=Va(S,H,t,t,t,t,t,R);return he.placeholder=V1.placeholder,he}function H1(S,R,$){var he,Fe,Je,vt,Rt,zt,_n=0,xn=!1,Ln=!1,gi=!0;if(typeof S!="function")throw new Pl(s);R=ju(R)||0,oa($)&&(xn=!!$.leading,Ln="maxWait"in $,Je=Ln?Ts(ju($.maxWait)||0,R):Je,gi="trailing"in $?!!$.trailing:gi);function Vi(yu){var sm=he,W0=Fe;return he=Fe=t,_n=yu,vt=S.apply(W0,sm),vt}function xr(yu){return _n=yu,Rt=w0(Po,R),xn?Vi(yu):vt}function go(yu){var sm=yu-zt,W0=yu-_n,RL=R-sm;return Ln?ta(RL,Je-W0):RL}function Mr(yu){var sm=yu-zt,W0=yu-_n;return zt===t||sm>=R||sm<0||Ln&&W0>=Je}function Po(){var yu=ep();if(Mr(yu))return Yo(yu);Rt=w0(Po,go(yu))}function Yo(yu){return Rt=t,gi&&he?Vi(yu):(he=Fe=t,vt)}function lf(){Rt!==t&&es(Rt),_n=0,he=zt=Fe=Rt=t}function Mh(){return Rt===t?vt:Yo(ep())}function uf(){var yu=ep(),sm=Mr(yu);if(he=arguments,Fe=this,zt=yu,sm){if(Rt===t)return xr(zt);if(Ln)return es(Rt),Rt=w0(Po,R),Vi(zt)}return Rt===t&&(Rt=w0(Po,R)),vt}return uf.cancel=lf,uf.flush=Mh,uf}var qo=me(function(S,R){return $m(S,1,R)}),P0=me(function(S,R,$){return $m(S,ju(R)||0,$)});function t2(S){return Va(S,le)}function hg(S,R){if(typeof S!="function"||R!=null&&typeof R!="function")throw new Pl(s);var $=function(){var he=arguments,Fe=R?R.apply(this,he):he[0],Je=$.cache;if(Je.has(Fe))return Je.get(Fe);var vt=S.apply(this,he);return $.cache=Je.set(Fe,vt)||Je,vt};return $.cache=new(hg.Cache||cc),$}hg.Cache=cc;function Z1(S){if(typeof S!="function")throw new Pl(s);return function(){var R=arguments;switch(R.length){case 0:return!S.call(this);case 1:return!S.call(this,R[0]);case 2:return!S.call(this,R[0],R[1]);case 3:return!S.call(this,R[0],R[1],R[2])}return!S.apply(this,R)}}function n2(S){return Lv(2,S)}var i2=Eo(function(S,R){R=R.length==1&&_r(R[0])?Jo(R[0],Ou(Qi())):Jo(ia(R,1),Ou(Qi()));var $=R.length;return me(function(he){for(var Fe=-1,Je=ta(he.length,$);++Fe<Je;)he[Fe]=R[Fe].call(this,he[Fe]);return vs(S,this,he)})}),dg=me(function(S,R){var $=eh(R,Ca(dg));return Va(S,Q,t,R,$)}),em=me(function(S,R){var $=eh(R,Ca(em));return Va(S,Y,t,R,$)}),X1=rd(function(S,R){return Va(S,se,t,t,t,R)});function U0(S,R){if(typeof S!="function")throw new Pl(s);return R=R===t?R:ar(R),me(S,R)}function vh(S,R){if(typeof S!="function")throw new Pl(s);return R=R==null?0:Ts(ar(R),0),me(function($){var he=$[R],Fe=Wr($,0,R);return he&&Dl(Fe,he),vs(S,this,Fe)})}function gc(S,R,$){var he=!0,Fe=!0;if(typeof S!="function")throw new Pl(s);return oa($)&&(he="leading"in $?!!$.leading:he,Fe="trailing"in $?!!$.trailing:Fe),H1(S,R,{leading:he,maxWait:R,trailing:Fe})}function bh(S){return Kv(S,1)}function tm(S,R){return dg(Xi(R),S)}function r2(){if(!arguments.length)return[];var S=arguments[0];return _r(S)?S:[S]}function K0(S){return Wl(S,x)}function J1(S,R){return R=typeof R=="function"?R:t,Wl(S,x,R)}function xC(S){return Wl(S,y|x)}function ey(S,R){return R=typeof R=="function"?R:t,Wl(S,y|x,R)}function Fv(S,R){return R==null||hh(S,R,hl(R))}function $l(S,R){return S===R||S!==S&&R!==R}var zv=qd(nd),jv=qd(function(S,R){return S>=R}),of=Pu((function(){return arguments})())?Pu:function(S){return Ws(S)&&kr.call(S,"callee")&&!oh.call(S,"callee")},_r=nn.isArray,fg=rr?Ou(rr):bs;function yc(S){return S!=null&&mg(S.length)&&!Yc(S)}function Za(S){return Ws(S)&&yc(S)}function L0(S){return S===!0||S===!1||Ws(S)&&ul(S)==Ke}var tp=Kp||Xt,MC=ys?Ou(ys):cs;function co(S){return Ws(S)&&S.nodeType===1&&!gg(S)}function F0(S){if(S==null)return!0;if(yc(S)&&(_r(S)||typeof S=="string"||typeof S.splice=="function"||tp(S)||sf(S)||of(S)))return!S.length;var R=mu(S);if(R==ft||R==In)return!S.size;if(Gp(S))return!kA(S).length;for(var $ in S)if(kr.call(S,$))return!1;return!0}function Ch(S,R){return po(S,R)}function ty(S,R,$){$=typeof $=="function"?$:t;var he=$?$(S,R):t;return he===t?po(S,R,t,$):!!he}function z0(S){if(!Ws(S))return!1;var R=ul(S);return R==We||R==Se||typeof S.message=="string"&&typeof S.name=="string"&&!gg(S)}function ny(S){return typeof S=="number"&&Ll(S)}function Yc(S){if(!oa(S))return!1;var R=ul(S);return R==at||R==it||R==Bt||R==Pn}function pg(S){return typeof S=="number"&&S==ar(S)}function mg(S){return typeof S=="number"&&S>-1&&S%1==0&&S<=tt}function oa(S){var R=typeof S;return S!=null&&(R=="object"||R=="function")}function Ws(S){return S!=null&&typeof S=="object"}var Nv=Xo?Ou(Xo):xo;function iy(S,R){return S===R||As(S,R,$d(R))}function Gv(S,R,$){return $=typeof $=="function"?$:t,As(S,R,$d(R),$)}function qr(S){return ry(S)&&S!=+S}function np(S){if(gu(S))throw new vr(o);return id(S)}function Xa(S){return S===null}function nm(S){return S==null}function ry(S){return typeof S=="number"||Ws(S)&&ul(S)==Dt}function gg(S){if(!Ws(S)||ul(S)!=Jt)return!1;var R=cu(S);if(R===null)return!0;var $=kr.call(R,"constructor")&&R.constructor;return typeof $=="function"&&$ instanceof $&&nh.call($)==wA}var yg=Os?Ou(Os):IA;function oy(S){return pg(S)&&S>=-tt&&S<=tt}var j0=Bs?Ou(Bs):fh;function vg(S){return typeof S=="string"||!_r(S)&&Ws(S)&&ul(S)==Tn}function Ja(S){return typeof S=="symbol"||Ws(S)&&ul(S)==dn}var sf=lu?Ou(lu):hA;function sy(S){return S===t}function wC(S){return Ws(S)&&mu(S)==Un}function Wv(S){return Ws(S)&&ul(S)==It}var o2=qd(zo),SC=qd(function(S,R){return S<=R});function Qv(S){if(!S)return[];if(yc(S))return vg(S)?Is(S):va(S);if(yl&&S[yl])return JA(S[yl]());var R=mu(S),$=R==ft?Tp:R==In?Rp:Ge;return $(S)}function ud(S){if(!S)return S===0?S:0;if(S=ju(S),S===qe||S===-qe){var R=S<0?-1:1;return R*At}return S===S?S:0}function ar(S){var R=ud(S),$=R%1;return R===R?$?R-$:R:0}function ay(S){return S?Du(ar(S),0,we):0}function ju(S){if(typeof S=="number")return S;if(Ja(S))return ke;if(oa(S)){var R=typeof S.valueOf=="function"?S.valueOf():S;S=oa(R)?R+"":R}if(typeof S!="string")return S===0?S:+S;S=Rc(S);var $=Ra.test(S);return $||Pi.test(S)?On(S.slice(2),$?2:8):ga.test(S)?ke:+S}function im(S){return du(S,Nu(S))}function ly(S){return S?Du(ar(S),-tt,tt):S===0?S:0}function ns(S){return S==null?"":wt(S)}var EC=_l(function(S,R){if(Gp(R)||yc(R)){du(R,hl(R),S);return}for(var $ in R)kr.call(R,$)&&or(S,$,R[$])}),uy=_l(function(S,R){du(R,Nu(R),S)}),_h=_l(function(S,R,$,he){du(R,Nu(R),S,he)}),Vl=_l(function(S,R,$,he){du(R,hl(R),S,he)}),$c=rd(jd);function cy(S,R){var $=ku(S);return R==null?$:jf($,R)}var qv=me(function(S,R){S=Wo(S);var $=-1,he=R.length,Fe=he>2?R[2]:t;for(Fe&&Lu(R[0],R[1],Fe)&&(he=1);++$<he;)for(var Je=R[$],vt=Nu(Je),Rt=-1,zt=vt.length;++Rt<zt;){var _n=vt[Rt],xn=S[_n];(xn===t||$l(xn,Dc[_n])&&!kr.call(S,_n))&&(S[_n]=Je[_n])}return S}),Ay=me(function(S){return S.push(t,gv),vs(u,t,S)});function OC(S,R){return Sp(S,Qi(R,3),La)}function bg(S,R){return Sp(S,Qi(R,3),Nd)}function mA(S,R){return S==null?S:Jh(S,Qi(R,3),Nu)}function BC(S,R){return S==null?S:ed(S,Qi(R,3),Nu)}function N0(S,R){return S&&La(S,Qi(R,3))}function xh(S,R){return S&&Nd(S,Qi(R,3))}function Yv(S){return S==null?[]:ti(S,hl(S))}function IC(S){return S==null?[]:ti(S,Nu(S))}function FA(S,R,$){var he=S==null?t:Ci(S,R);return he===t?$:he}function hy(S,R){return S!=null&&Jm(S,R,us)}function dy(S,R){return S!=null&&Jm(S,R,fc)}var $v=pu(function(S,R,$){R!=null&&typeof R.toString!="function"&&(R=Ul.call(R)),S[R]=$},Do(bc)),fy=pu(function(S,R,$){R!=null&&typeof R.toString!="function"&&(R=Ul.call(R)),kr.call(S,R)?S[R].push($):S[R]=[$]},Qi),G0=me(Fc);function hl(S){return yc(S)?zf(S):kA(S)}function Nu(S){return yc(S)?zf(S,!0):Vm(S)}function Vv(S,R){var $={};return R=Qi(R,3),La(S,function(he,Fe,Je){Ru($,R(he,Fe,Je),he)}),$}function kC(S,R){var $={};return R=Qi(R,3),La(S,function(he,Fe,Je){Ru($,Fe,R(he,Fe,Je))}),$}var f=_l(function(S,R,$){Gd(S,R,$)}),u=_l(function(S,R,$,he){Gd(S,R,$,he)}),d=rd(function(S,R){var $={};if(S==null)return $;var he=!1;R=Jo(R,function(Je){return Je=Er(Je,S),he||(he=Je.length>1),Je}),du(S,yv(S),$),he&&($=Wl($,y|M|x,B1));for(var Fe=R.length;Fe--;)Lt($,R[Fe]);return $});function b(S,R){return k(S,Z1(Qi(R)))}var w=rd(function(S,R){return S==null?{}:C(S,R)});function k(S,R){if(S==null)return{};var $=Jo(yv(S),function(he){return[he]});return R=Qi(R),E(S,$,function(he,Fe){return R(he,Fe[0])})}function D(S,R,$){R=Er(R,S);var he=-1,Fe=R.length;for(Fe||(Fe=1,S=t);++he<Fe;){var Je=S==null?t:S[ql(R[he])];Je===t&&(he=Fe,Je=$),S=Yc(Je)?Je.call(S):Je}return S}function K(S,R,$){return S==null?S:Ne(S,R,$)}function N(S,R,$,he){return he=typeof he=="function"?he:t,S==null?S:Ne(S,R,$,he)}var te=Yd(hl),re=Yd(Nu);function Ae(S,R,$){var he=_r(S),Fe=he||tp(S)||sf(S);if(R=Qi(R,4),$==null){var Je=S&&S.constructor;Fe?$=he?new Je:[]:oa(S)?$=Yc(Je)?ku(cu(S)):{}:$={}}return(Fe?rc:La)(S,function(vt,Rt,zt){return R($,vt,Rt,zt)}),$}function Oe(S,R){return S==null?!0:Lt(S,R)}function De(S,R,$){return S==null?S:Nt(S,R,Xi($))}function Ue(S,R,$,he){return he=typeof he=="function"?he:t,S==null?S:Nt(S,R,Xi($),he)}function Ge(S){return S==null?[]:Op(S,hl(S))}function He(S){return S==null?[]:Op(S,Nu(S))}function st(S,R,$){return $===t&&($=R,R=t),$!==t&&($=ju($),$=$===$?$:0),R!==t&&(R=ju(R),R=R===R?R:0),Du(ju(S),R,$)}function Tt(S,R,$){return R=ud(R),$===t?($=R,R=0):$=ud($),S=ju(S),cl(S,R,$)}function dt(S,R,$){if($&&typeof $!="boolean"&&Lu(S,R,$)&&(R=$=t),$===t&&(typeof R=="boolean"?($=R,R=t):typeof S=="boolean"&&($=S,S=t)),S===t&&R===t?(S=0,R=1):(S=ud(S),R===t?(R=S,S=0):R=ud(R)),S>R){var he=S;S=R,R=he}if($||S%1||R%1){var Fe=Pc();return ta(S+Fe*(R-S+jn("1e-"+((Fe+"").length-1))),R)}return Z(S,R)}var Ct=$a(function(S,R,$){return R=R.toLowerCase(),S+($?jt(R):R)});function jt(S){return Ys(ns(S).toLowerCase())}function Zt(S){return S=ns(S),S&&S.replace(eo,Pf).replace(_o,"")}function fn(S,R,$){S=ns(S),R=wt(R);var he=S.length;$=$===t?he:Du(ar($),0,he);var Fe=$;return $-=R.length,$>=0&&S.slice($,Fe)==R}function Wn(S){return S=ns(S),S&&Qn.test(S)?S.replace(en,Ip):S}function Kn(S){return S=ns(S),S&&ii.test(S)?S.replace(Ar,"\\$&"):S}var Nn=$a(function(S,R,$){return S+($?"-":"")+R.toLowerCase()}),xi=$a(function(S,R,$){return S+($?" ":"")+R.toLowerCase()}),zn=ba("toLowerCase");function Gn(S,R,$){S=ns(S),R=ar(R);var he=R?Kh(S):0;if(!R||he>=R)return S;var Fe=(R-he)/2;return DA(Kd(Fe),$)+S+DA(Kf(Fe),$)}function an(S,R,$){S=ns(S),R=ar(R);var he=R?Kh(S):0;return R&&he<R?S+DA(R-he,$):S}function ji(S,R,$){S=ns(S),R=ar(R);var he=R?Kh(S):0;return R&&he<R?DA(R-he,$)+S:S}function er(S,R,$){return $||R==null?R=0:R&&(R=+R),sl(ns(S).replace(Fi,""),R||0)}function Di(S,R,$){return($?Lu(S,R,$):R===t)?R=1:R=ar(R),ce(ns(S),R)}function hi(){var S=arguments,R=ns(S[0]);return S.length<3?R:R.replace(S[1],S[2])}var Tr=$a(function(S,R,$){return S+($?"_":"")+R.toLowerCase()});function xs(S,R,$){return $&&typeof $!="number"&&Lu(S,R,$)&&(R=$=t),$=$===t?we:$>>>0,$?(S=ns(S),S&&(typeof R=="string"||R!=null&&!yg(R))&&(R=wt(R),!R&&Uh(S))?Wr(Is(S),0,$):S.split(R,$)):[]}var xa=$a(function(S,R,$){return S+($?" ":"")+Ys(R)});function wl(S,R,$){return S=ns(S),$=$==null?0:Du(ar($),0,S.length),R=wt(R),S.slice($,$+R.length)==R}function vc(S,R,$){var he=Ye.templateSettings;$&&Lu(S,R,$)&&(R=t),S=ns(S),R=_h({},R,he,O1);var Fe=_h({},R.imports,he.imports,O1),Je=hl(Fe),vt=Op(Fe,Je),Rt,zt,_n=0,xn=R.interpolate||ya,Ln="__p += '",gi=Dp((R.escape||ya).source+"|"+xn.source+"|"+(xn===Fn?Ni:ya).source+"|"+(R.evaluate||ya).source+"|$","g"),Vi="//# sourceURL="+(kr.call(R,"sourceURL")?(R.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Nr+"]")+`
`;S.replace(gi,function(Mr,Po,Yo,lf,Mh,uf){return Yo||(Yo=lf),Ln+=S.slice(_n,uf).replace(tu,kp),Po&&(Rt=!0,Ln+=`' +
__e(`+Po+`) +
'`),Mh&&(zt=!0,Ln+=`';
`+Mh+`;
__p += '`),Yo&&(Ln+=`' +
((__t = (`+Yo+`)) == null ? '' : __t) +
'`),_n=uf+Mr.length,Mr}),Ln+=`';
`;var xr=kr.call(R,"variable")&&R.variable;if(!xr)Ln=`with (obj) {
`+Ln+`
}
`;else if(gr.test(xr))throw new vr(a);Ln=(zt?Ln.replace(v,""):Ln).replace(yt,"$1").replace(Mt,"$1;"),Ln="function("+(xr||"obj")+`) {
`+(xr?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Rt?", __e = _.escape":"")+(zt?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Ln+`return __p
}`;var go=wa(function(){return Vr(Je,Vi+"return "+Ln).apply(t,vt)});if(go.source=Ln,z0(go))throw go;return go}function Fa(S){return ns(S).toLowerCase()}function Qs(S){return ns(S).toUpperCase()}function Ro(S,R,$){if(S=ns(S),S&&($||R===t))return Rc(S);if(!S||!(R=wt(R)))return S;var he=Is(S),Fe=Is(R),Je=zm(he,Fe),vt=Bp(he,Fe)+1;return Wr(he,Je,vt).join("")}function ha(S,R,$){if(S=ns(S),S&&($||R===t))return S.slice(0,th(S)+1);if(!S||!(R=wt(R)))return S;var he=Is(S),Fe=Bp(he,Is(R))+1;return Wr(he,0,Fe).join("")}function Ma(S,R,$){if(S=ns(S),S&&($||R===t))return S.replace(Fi,"");if(!S||!(R=wt(R)))return S;var he=Is(S),Fe=zm(he,Is(R));return Wr(he,Fe).join("")}function qs(S,R){var $=pe,he=de;if(oa(R)){var Fe="separator"in R?R.separator:Fe;$="length"in R?ar(R.length):$,he="omission"in R?wt(R.omission):he}S=ns(S);var Je=S.length;if(Uh(S)){var vt=Is(S);Je=vt.length}if($>=Je)return S;var Rt=$-Kh(he);if(Rt<1)return he;var zt=vt?Wr(vt,0,Rt).join(""):S.slice(0,Rt);if(Fe===t)return zt+he;if(vt&&(Rt+=zt.length-Rt),yg(Fe)){if(S.slice(Rt).search(Fe)){var _n,xn=zt;for(Fe.global||(Fe=Dp(Fe.source,ns(ni.exec(Fe))+"g")),Fe.lastIndex=0;_n=Fe.exec(xn);)var Ln=_n.index;zt=zt.slice(0,Ln===t?Rt:Ln)}}else if(S.indexOf(wt(Fe),Rt)!=Rt){var gi=zt.lastIndexOf(Fe);gi>-1&&(zt=zt.slice(0,gi))}return zt+he}function Gu(S){return S=ns(S),S&&mt.test(S)?S.replace(Pt,xA):S}var Vc=$a(function(S,R,$){return S+($?" ":"")+R.toUpperCase()}),Ys=ba("toUpperCase");function Wu(S,R,$){return S=ns(S),R=$?t:R,R===t?jm(S)?ao(S):fv(S):S.match(R)||[]}var wa=me(function(S,R){try{return vs(S,t,R)}catch($){return z0($)?$:new vr($)}}),Sa=rd(function(S,R){return rc(R,function($){$=ql($),Ru(S,$,R0(S[$],S))}),S});function el(S){var R=S==null?0:S.length,$=Qi();return S=R?Jo(S,function(he){if(typeof he[1]!="function")throw new Pl(s);return[$(he[0]),he[1]]}):[],me(function(he){for(var Fe=-1;++Fe<R;){var Je=S[Fe];if(vs(Je[0],this,he))return vs(Je[1],this,he)}})}function za(S){return y0(Wl(S,y))}function Do(S){return function(){return S}}function Hc(S,R){return S==null||S!==S?R:S}var rm=Nc(),Qu=Nc(!0);function bc(S){return S}function cd(S){return zc(typeof S=="function"?S:Wl(S,y))}function Ad(S){return Wf(Wl(S,y))}function om(S,R){return Qf(S,Wl(R,y))}var Cg=me(function(S,R){return function($){return Fc($,S,R)}}),af=me(function(S,R){return function($){return Fc(S,$,R)}});function A(S,R,$){var he=hl(R),Fe=ti(R,he);$==null&&!(oa(R)&&(Fe.length||!he.length))&&($=R,R=S,S=this,Fe=ti(R,hl(R)));var Je=!(oa($)&&"chain"in $)||!!$.chain,vt=Yc(S);return rc(Fe,function(Rt){var zt=R[Rt];S[Rt]=zt,vt&&(S.prototype[Rt]=function(){var _n=this.__chain__;if(Je||_n){var xn=S(this.__wrapped__),Ln=xn.__actions__=va(this.__actions__);return Ln.push({func:zt,args:arguments,thisArg:S}),xn.__chain__=_n,xn}return zt.apply(S,Dl([this.value()],arguments))})}),S}function g(){return ki._===this&&(ki._=uu),this}function _(){}function I(S){return S=ar(S),me(function(R){return l(R,S)})}var W=dA(Jo),J=dA(Td),xe=dA(Bf);function $e(S){return jp(S)?Rh(ql(S)):B(S)}function _t(S){return function(R){return S==null?t:Ci(S,R)}}var $t=fA(),ln=fA(!0);function pn(){return[]}function Xt(){return!1}function rn(){return{}}function Ti(){return""}function lr(){return!0}function Ms(S,R){if(S=ar(S),S<1||S>tt)return[];var $=we,he=ta(S,we);R=Qi(R),S-=we;for(var Fe=Pd(he,R);++$<S;)R($);return Fe}function Kt(S){return _r(S)?Jo(S,ql):Ja(S)?[S]:va(Zd(ns(S)))}function kt(S){var R=++p0;return ns(S)+R}var qt=Gc(function(S,R){return S+R},0),hn=mh("ceil"),Zi=Gc(function(S,R){return S/R},1),jo=mh("floor");function ri(S){return S&&S.length?hu(S,bc,nd):t}function tr(S,R){return S&&S.length?hu(S,Qi(R,2),nd):t}function Kr(S){return Eu(S,bc)}function Lr(S,R){return Eu(S,Qi(R,2))}function Zc(S){return S&&S.length?hu(S,bc,zo):t}function hd(S,R){return S&&S.length?hu(S,Qi(R,2),zo):t}var Bae=Gc(function(S,R){return S*R},1),Iae=mh("round"),kae=Gc(function(S,R){return S-R},0);function Tae(S){return S&&S.length?Fm(S,bc):0}function Rae(S,R){return S&&S.length?Fm(S,Qi(R,2)):0}return Ye.after=T0,Ye.ary=Kv,Ye.assign=EC,Ye.assignIn=uy,Ye.assignInWith=_h,Ye.assignWith=Vl,Ye.at=$c,Ye.before=Lv,Ye.bind=R0,Ye.bindAll=Sa,Ye.bindKey=$1,Ye.castArray=r2,Ye.chain=lg,Ye.chunk=hC,Ye.compact=_v,Ye.concat=xv,Ye.cond=el,Ye.conforms=za,Ye.constant=Do,Ye.countBy=cg,Ye.create=cy,Ye.curry=D0,Ye.curryRight=V1,Ye.debounce=H1,Ye.defaults=qv,Ye.defaultsDeep=Ay,Ye.defer=qo,Ye.delay=P0,Ye.difference=L1,Ye.differenceBy=F1,Ye.differenceWith=Xd,Ye.drop=Ha,Ye.dropRight=Qp,Ye.dropRightWhile=dC,Ye.dropWhile=Qr,Ye.fill=ig,Ye.filter=I0,Ye.flatMap=zu,Ye.flatMapDeep=Jp,Ye.flatMapDepth=Tv,Ye.flatten=_s,Ye.flattenDeep=Yl,Ye.flattenDepth=od,Ye.flip=t2,Ye.flow=rm,Ye.flowRight=Qu,Ye.fromPairs=Mv,Ye.functions=Yv,Ye.functionsIn=IC,Ye.groupBy=q1,Ye.initial=og,Ye.intersection=Yp,Ye.intersectionBy=xl,Ye.intersectionWith=pc,Ye.invert=$v,Ye.invertBy=fy,Ye.invokeMap=Ag,Ye.iteratee=cd,Ye.keyBy=vC,Ye.keys=hl,Ye.keysIn=Nu,Ye.map=k0,Ye.mapKeys=Vv,Ye.mapValues=kC,Ye.matches=Ad,Ye.matchesProperty=om,Ye.memoize=hg,Ye.merge=f,Ye.mergeWith=u,Ye.method=Cg,Ye.methodOf=af,Ye.mixin=A,Ye.negate=Z1,Ye.nthArg=I,Ye.omit=d,Ye.omitBy=b,Ye.once=n2,Ye.orderBy=bC,Ye.over=W,Ye.overArgs=i2,Ye.overEvery=J,Ye.overSome=xe,Ye.partial=dg,Ye.partialRight=em,Ye.partition=CC,Ye.pick=w,Ye.pickBy=k,Ye.property=$e,Ye.propertyOf=_t,Ye.pull=Vf,Ye.pullAll=Wc,Ye.pullAllBy=S0,Ye.pullAllWith=N1,Ye.pullAt=KA,Ye.range=$t,Ye.rangeRight=ln,Ye.rearg=X1,Ye.reject=e2,Ye.remove=pC,Ye.rest=U0,Ye.reverse=Hf,Ye.sampleSize=Pv,Ye.set=K,Ye.setWith=N,Ye.shuffle=Uv,Ye.slice=E0,Ye.sortBy=rf,Ye.sortedUniq=G1,Ye.sortedUniqBy=Sv,Ye.split=xs,Ye.spread=vh,Ye.tail=Jx,Ye.take=Ev,Ye.takeRight=Mo,Ye.takeRightWhile=hs,Ye.takeWhile=uo,Ye.tap=gC,Ye.throttle=gc,Ye.thru=sd,Ye.toArray=Qv,Ye.toPairs=te,Ye.toPairsIn=re,Ye.toPath=Kt,Ye.toPlainObject=im,Ye.transform=Ae,Ye.unary=bh,Ye.union=mo,Ye.unionBy=ts,Ye.unionWith=Qc,Ye.uniq=Zf,Ye.uniqBy=ag,Ye.uniqWith=Vp,Ye.unset=Oe,Ye.unzip=LA,Ye.unzipWith=_a,Ye.update=De,Ye.updateWith=Ue,Ye.values=Ge,Ye.valuesIn=He,Ye.without=Xf,Ye.words=Wu,Ye.wrap=tm,Ye.xor=Hp,Ye.xorBy=Ov,Ye.xorWith=pA,Ye.zip=Zp,Ye.zipObject=Xp,Ye.zipObjectDeep=mc,Ye.zipWith=W1,Ye.entries=te,Ye.entriesIn=re,Ye.extend=uy,Ye.extendWith=_h,A(Ye,Ye),Ye.add=qt,Ye.attempt=wa,Ye.camelCase=Ct,Ye.capitalize=jt,Ye.ceil=hn,Ye.clamp=st,Ye.clone=K0,Ye.cloneDeep=xC,Ye.cloneDeepWith=ey,Ye.cloneWith=J1,Ye.conformsTo=Fv,Ye.deburr=Zt,Ye.defaultTo=Hc,Ye.divide=Zi,Ye.endsWith=fn,Ye.eq=$l,Ye.escape=Wn,Ye.escapeRegExp=Kn,Ye.every=Aa,Ye.find=qc,Ye.findIndex=z1,Ye.findKey=OC,Ye.findLast=kv,Ye.findLastIndex=rg,Ye.findLastKey=bg,Ye.floor=jo,Ye.forEach=yC,Ye.forEachRight=tf,Ye.forIn=mA,Ye.forInRight=BC,Ye.forOwn=N0,Ye.forOwnRight=xh,Ye.get=FA,Ye.gt=zv,Ye.gte=jv,Ye.has=hy,Ye.hasIn=dy,Ye.head=qp,Ye.identity=bc,Ye.includes=Rv,Ye.indexOf=j1,Ye.inRange=Tt,Ye.invoke=G0,Ye.isArguments=of,Ye.isArray=_r,Ye.isArrayBuffer=fg,Ye.isArrayLike=yc,Ye.isArrayLikeObject=Za,Ye.isBoolean=L0,Ye.isBuffer=tp,Ye.isDate=MC,Ye.isElement=co,Ye.isEmpty=F0,Ye.isEqual=Ch,Ye.isEqualWith=ty,Ye.isError=z0,Ye.isFinite=ny,Ye.isFunction=Yc,Ye.isInteger=pg,Ye.isLength=mg,Ye.isMap=Nv,Ye.isMatch=iy,Ye.isMatchWith=Gv,Ye.isNaN=qr,Ye.isNative=np,Ye.isNil=nm,Ye.isNull=Xa,Ye.isNumber=ry,Ye.isObject=oa,Ye.isObjectLike=Ws,Ye.isPlainObject=gg,Ye.isRegExp=yg,Ye.isSafeInteger=oy,Ye.isSet=j0,Ye.isString=vg,Ye.isSymbol=Ja,Ye.isTypedArray=sf,Ye.isUndefined=sy,Ye.isWeakMap=wC,Ye.isWeakSet=Wv,Ye.join=fC,Ye.kebabCase=Nn,Ye.last=Gs,Ye.lastIndexOf=$f,Ye.lowerCase=xi,Ye.lowerFirst=zn,Ye.lt=o2,Ye.lte=SC,Ye.max=ri,Ye.maxBy=tr,Ye.mean=Kr,Ye.meanBy=Lr,Ye.min=Zc,Ye.minBy=hd,Ye.stubArray=pn,Ye.stubFalse=Xt,Ye.stubObject=rn,Ye.stubString=Ti,Ye.stubTrue=lr,Ye.multiply=Bae,Ye.nth=Jd,Ye.noConflict=g,Ye.noop=_,Ye.now=ep,Ye.pad=Gn,Ye.padEnd=an,Ye.padStart=ji,Ye.parseInt=er,Ye.random=dt,Ye.reduce=Y1,Ye.reduceRight=Dv,Ye.repeat=Di,Ye.replace=hi,Ye.result=D,Ye.round=Iae,Ye.runInContext=Ut,Ye.sample=_C,Ye.size=nf,Ye.snakeCase=Tr,Ye.some=ld,Ye.sortedIndex=O0,Ye.sortedIndexBy=sg,Ye.sortedIndexOf=$p,Ye.sortedLastIndex=mC,Ye.sortedLastIndexBy=B0,Ye.sortedLastIndexOf=wv,Ye.startCase=xa,Ye.startsWith=wl,Ye.subtract=kae,Ye.sum=Tae,Ye.sumBy=Rae,Ye.template=vc,Ye.times=Ms,Ye.toFinite=ud,Ye.toInteger=ar,Ye.toLength=ay,Ye.toLower=Fa,Ye.toNumber=ju,Ye.toSafeInteger=ly,Ye.toString=ns,Ye.toUpper=Qs,Ye.trim=Ro,Ye.trimEnd=ha,Ye.trimStart=Ma,Ye.truncate=qs,Ye.unescape=Gu,Ye.uniqueId=kt,Ye.upperCase=Vc,Ye.upperFirst=Ys,Ye.each=yC,Ye.eachRight=tf,Ye.first=qp,A(Ye,(function(){var S={};return La(Ye,function(R,$){kr.call(Ye.prototype,$)||(S[$]=R)}),S})(),{chain:!1}),Ye.VERSION=i,rc(["bind","bindKey","curry","curryRight","partial","partialRight"],function(S){Ye[S].placeholder=Ye}),rc(["drop","take"],function(S,R){br.prototype[S]=function($){$=$===t?1:Ts(ar($),0);var he=this.__filtered__&&!R?new br(this):this.clone();return he.__filtered__?he.__takeCount__=ta($,he.__takeCount__):he.__views__.push({size:ta($,we),type:S+(he.__dir__<0?"Right":"")}),he},br.prototype[S+"Right"]=function($){return this.reverse()[S]($).reverse()}}),rc(["filter","map","takeWhile"],function(S,R){var $=R+1,he=$==Re||$==Ie;br.prototype[S]=function(Fe){var Je=this.clone();return Je.__iteratees__.push({iteratee:Qi(Fe,3),type:$}),Je.__filtered__=Je.__filtered__||he,Je}}),rc(["head","last"],function(S,R){var $="take"+(R?"Right":"");br.prototype[S]=function(){return this[$](1).value()[0]}}),rc(["initial","tail"],function(S,R){var $="drop"+(R?"":"Right");br.prototype[S]=function(){return this.__filtered__?new br(this):this[$](1)}}),br.prototype.compact=function(){return this.filter(bc)},br.prototype.find=function(S){return this.filter(S).head()},br.prototype.findLast=function(S){return this.reverse().find(S)},br.prototype.invokeMap=me(function(S,R){return typeof S=="function"?new br(this):this.map(function($){return Fc($,S,R)})}),br.prototype.reject=function(S){return this.filter(Z1(Qi(S)))},br.prototype.slice=function(S,R){S=ar(S);var $=this;return $.__filtered__&&(S>0||R<0)?new br($):(S<0?$=$.takeRight(-S):S&&($=$.drop(S)),R!==t&&(R=ar(R),$=R<0?$.dropRight(-R):$.take(R-S)),$)},br.prototype.takeRightWhile=function(S){return this.reverse().takeWhile(S).reverse()},br.prototype.toArray=function(){return this.take(we)},La(br.prototype,function(S,R){var $=/^(?:filter|find|map|reject)|While$/.test(R),he=/^(?:head|last)$/.test(R),Fe=Ye[he?"take"+(R=="last"?"Right":""):R],Je=he||/^find/.test(R);Fe&&(Ye.prototype[R]=function(){var vt=this.__wrapped__,Rt=he?[1]:arguments,zt=vt instanceof br,_n=Rt[0],xn=zt||_r(vt),Ln=function(Po){var Yo=Fe.apply(Ye,Dl([Po],Rt));return he&&gi?Yo[0]:Yo};xn&&$&&typeof _n=="function"&&_n.length!=1&&(zt=xn=!1);var gi=this.__chain__,Vi=!!this.__actions__.length,xr=Je&&!gi,go=zt&&!Vi;if(!Je&&xn){vt=go?vt:new br(this);var Mr=S.apply(vt,Rt);return Mr.__actions__.push({func:sd,args:[Ln],thisArg:t}),new al(Mr,gi)}return xr&&go?S.apply(this,Rt):(Mr=this.thru(Ln),xr?he?Mr.value()[0]:Mr.value():Mr)})}),rc(["pop","push","shift","sort","splice","unshift"],function(S){var R=Fh[S],$=/^(?:push|sort|unshift)$/.test(S)?"tap":"thru",he=/^(?:pop|shift)$/.test(S);Ye.prototype[S]=function(){var Fe=arguments;if(he&&!this.__chain__){var Je=this.value();return R.apply(_r(Je)?Je:[],Fe)}return this[$](function(vt){return R.apply(_r(vt)?vt:[],Fe)})}}),La(br.prototype,function(S,R){var $=Ye[R];if($){var he=$.name+"";kr.call(lo,he)||(lo[he]=[]),lo[he].push({name:R,func:$})}}),lo[Ku(t,j).name]=[{name:"wrapper",func:t}],br.prototype.clone=lA,br.prototype.reverse=uh,br.prototype.value=uA,Ye.prototype.at=Q1,Ye.prototype.chain=ef,Ye.prototype.commit=Ml,Ye.prototype.next=Jf,Ye.prototype.plant=ad,Ye.prototype.reverse=Bv,Ye.prototype.toJSON=Ye.prototype.valueOf=Ye.prototype.value=Iv,Ye.prototype.first=Ye.prototype.head,yl&&(Ye.prototype[yl]=ug),Ye}),Lh=Wm();Cr?((Cr.exports=Lh)._=Lh,Ei._=Lh):ki._=Lh}).call(Cue)})(R2,R2.exports)),R2.exports}var Q4=_ue();const n9=eu(Q4);function xue(n,e,t){const i=e<0?n.length+e:e;if(i>=0&&i<n.length){const r=t<0?n.length+t:t,[o]=n.splice(e,1);n.splice(r,0,o)}}var hO,_F;function Mue(){if(_F)return hO;_F=1;function n(e){for(var t=5381,i=e.length;i;)t=t*33^e.charCodeAt(--i);return t>>>0}return hO=n,hO}var wue=Mue();const xF=eu(wue);var gf=Uint8Array,S_=Uint16Array,Sue=Int32Array,fZ=new gf([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),pZ=new gf([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Eue=new gf([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),mZ=function(n,e){for(var t=new S_(31),i=0;i<31;++i)t[i]=e+=1<<n[i-1];for(var r=new Sue(t[30]),i=1;i<30;++i)for(var o=t[i];o<t[i+1];++o)r[o]=o-t[i]<<5|i;return{b:t,r}},gZ=mZ(fZ,2),yZ=gZ.b,Oue=gZ.r;yZ[28]=258,Oue[258]=28;var Bue=mZ(pZ,0),Iue=Bue.b,i9=new S_(32768);for(var rl=0;rl<32768;++rl){var py=(rl&43690)>>1|(rl&21845)<<1;py=(py&52428)>>2|(py&13107)<<2,py=(py&61680)>>4|(py&3855)<<4,i9[rl]=((py&65280)>>8|(py&255)<<8)>>1}var o3=(function(n,e,t){for(var i=n.length,r=0,o=new S_(e);r<i;++r)n[r]&&++o[n[r]-1];var s=new S_(e);for(r=1;r<e;++r)s[r]=s[r-1]+o[r-1]<<1;var a;if(t){a=new S_(1<<e);var c=15-e;for(r=0;r<i;++r)if(n[r])for(var h=r<<4|n[r],m=e-n[r],y=s[n[r]-1]++<<m,M=y|(1<<m)-1;y<=M;++y)a[i9[y]>>c]=h}else for(a=new S_(i),r=0;r<i;++r)n[r]&&(a[r]=i9[s[n[r]-1]++]>>15-n[r]);return a}),q4=new gf(288);for(var rl=0;rl<144;++rl)q4[rl]=8;for(var rl=144;rl<256;++rl)q4[rl]=9;for(var rl=256;rl<280;++rl)q4[rl]=7;for(var rl=280;rl<288;++rl)q4[rl]=8;var vZ=new gf(32);for(var rl=0;rl<32;++rl)vZ[rl]=5;var kue=o3(q4,9,1),Tue=o3(vZ,5,1),dO=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},am=function(n,e,t){var i=e/8|0;return(n[i]|n[i+1]<<8)>>(e&7)&t},fO=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},Rue=function(n){return(n+7)/8|0},Due=function(n,e,t){return(t==null||t>n.length)&&(t=n.length),new gf(n.subarray(e,t))},Pue=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],df=function(n,e,t){var i=new Error(e||Pue[n]);if(i.code=n,Error.captureStackTrace&&Error.captureStackTrace(i,df),!t)throw i;return i},GD=function(n,e,t,i){var r=n.length,o=0;if(!r||e.f&&!e.l)return t||new gf(0);var s=!t,a=s||e.i!=2,c=e.i;s&&(t=new gf(r*3));var h=function(We){var at=t.length;if(We>at){var it=new gf(Math.max(at*2,We));it.set(t),t=it}},m=e.f||0,y=e.p||0,M=e.b||0,x=e.l,T=e.d,P=e.m,F=e.n,j=r*8;do{if(!x){m=am(n,y,1);var q=am(n,y+1,3);if(y+=3,q)if(q==1)x=kue,T=Tue,P=9,F=5;else if(q==2){var Y=am(n,y,31)+257,z=am(n,y+10,15)+4,se=Y+am(n,y+5,31)+1;y+=14;for(var le=new gf(se),pe=new gf(19),de=0;de<z;++de)pe[Eue[de]]=am(n,y+de*3,7);y+=z*3;for(var ve=dO(pe),Ee=(1<<ve)-1,Re=o3(pe,ve,1),de=0;de<se;){var je=Re[am(n,y,Ee)];y+=je&15;var V=je>>4;if(V<16)le[de++]=V;else{var Ie=0,qe=0;for(V==16?(qe=3+am(n,y,3),y+=2,Ie=le[de-1]):V==17?(qe=3+am(n,y,7),y+=3):V==18&&(qe=11+am(n,y,127),y+=7);qe--;)le[de++]=Ie}}var tt=le.subarray(0,Y),At=le.subarray(Y);P=dO(tt),F=dO(At),x=o3(tt,P,1),T=o3(At,F,1)}else df(1);else{var V=Rue(y)+4,H=n[V-4]|n[V-3]<<8,Q=V+H;if(Q>r){c&&df(0);break}a&&h(M+H),t.set(n.subarray(V,Q),M),e.b=M+=H,e.p=y=Q*8,e.f=m;continue}if(y>j){c&&df(0);break}}a&&h(M+131072);for(var ke=(1<<P)-1,we=(1<<F)-1,ze=y;;ze=y){var Ie=x[fO(n,y)&ke],Me=Ie>>4;if(y+=Ie&15,y>j){c&&df(0);break}if(Ie||df(2),Me<256)t[M++]=Me;else if(Me==256){ze=y,x=null;break}else{var lt=Me-254;if(Me>264){var de=Me-257,nt=fZ[de];lt=am(n,y,(1<<nt)-1)+yZ[de],y+=nt}var bt=T[fO(n,y)&we],Bt=bt>>4;bt||df(3),y+=bt&15;var At=Iue[Bt];if(Bt>3){var nt=pZ[Bt];At+=fO(n,y)&(1<<nt)-1,y+=nt}if(y>j){c&&df(0);break}a&&h(M+131072);var Ke=M+lt;if(M<At){var Te=o-At,Se=Math.min(At,Ke);for(Te+M<0&&df(3);M<Se;++M)t[M]=i[Te+M]}for(;M<Ke;++M)t[M]=t[M-At]}}e.l=x,e.p=ze,e.b=M,e.f=m,x&&(m=1,e.m=P,e.d=T,e.n=F)}while(!m);return M!=t.length&&s?Due(t,0,M):t.subarray(0,M)},Uue=new gf(0),Kue=function(n){(n[0]!=31||n[1]!=139||n[2]!=8)&&df(6,"invalid gzip data");var e=n[3],t=10;e&4&&(t+=(n[10]|n[11]<<8)+2);for(var i=(e>>3&1)+(e>>4&1);i>0;i-=!n[t++]);return t+(e&2)},Lue=function(n){var e=n.length;return(n[e-4]|n[e-3]<<8|n[e-2]<<16|n[e-1]<<24)>>>0},Fue=function(n,e){return((n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31)&&df(6,"invalid zlib data"),(n[1]>>5&1)==1&&df(6,"invalid zlib data: "+(n[1]&32?"need":"unexpected")+" dictionary"),(n[1]>>3&4)+2};function zue(n,e){return GD(n,{i:2},e,e)}function jue(n,e){var t=Kue(n);return t+8>n.length&&df(6,"invalid gzip data"),GD(n.subarray(t,-8),{i:2},new gf(Lue(n)),e)}function Nue(n,e){return GD(n.subarray(Fue(n),-4),{i:2},e,e)}function Gue(n,e){return n[0]==31&&n[1]==139&&n[2]==8?jue(n,e):(n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31?zue(n,e):Nue(n,e)}var Wue=typeof TextDecoder<"u"&&new TextDecoder,Que=0;try{Wue.decode(Uue,{stream:!0}),Que=1}catch{}var que=Object.defineProperty,s3=Math.pow,pa=(n,e)=>que(n,"name",{value:e,configurable:!0}),tA=(n,e,t)=>new Promise((i,r)=>{var o=c=>{try{a(t.next(c))}catch(h){r(h)}},s=c=>{try{a(t.throw(c))}catch(h){r(h)}},a=c=>c.done?i(c.value):Promise.resolve(c.value).then(o,s);a((t=t.apply(n,e)).next())});pa((n,e)=>{let t=!1,i="",r=L.GridLayer.extend({createTile:pa((o,s)=>{let a=document.createElement("img"),c=new AbortController,h=c.signal;return a.cancel=()=>{c.abort()},t||(n.getHeader().then(m=>{m.tileType===1?console.error("Error: archive contains MVT vector tiles, but leafletRasterLayer is for displaying raster tiles. See https://github.com/protomaps/PMTiles/tree/main/js for details."):m.tileType===2?i="image/png":m.tileType===3?i="image/jpeg":m.tileType===4?i="image/webp":m.tileType===5&&(i="image/avif")}),t=!0),n.getZxy(o.z,o.x,o.y,h).then(m=>{if(m){let y=new Blob([m.data],{type:i}),M=window.URL.createObjectURL(y);a.src=M,a.cancel=void 0,s(void 0,a)}}).catch(m=>{if(m.name!=="AbortError")throw m}),a},"createTile"),_removeTile:pa(function(o){let s=this._tiles[o];s&&(s.el.cancel&&s.el.cancel(),s.el.width=0,s.el.height=0,s.el.deleted=!0,L.DomUtil.remove(s.el),delete this._tiles[o],this.fire("tileunload",{tile:s.el,coords:this._keyToTileCoords(o)}))},"_removeTile")});return new r(e)},"leafletRasterLayer");var Yue=pa(n=>(e,t)=>{if(t instanceof AbortController)return n(e,t);let i=new AbortController;return n(e,i).then(r=>t(void 0,r.data,r.cacheControl||"",r.expires||""),r=>t(r)).catch(r=>t(r)),{cancel:pa(()=>i.abort(),"cancel")}},"v3compat"),bZ=class{constructor(e){this.tilev4=pa((t,i)=>tA(this,null,function*(){if(t.type==="json"){let x=t.url.substr(10),T=this.tiles.get(x);if(T||(T=new o9(x),this.tiles.set(x,T)),this.metadata)return{data:yield T.getTileJson(t.url)};let P=yield T.getHeader();return(P.minLon>=P.maxLon||P.minLat>=P.maxLat)&&console.error(`Bounds of PMTiles archive ${P.minLon},${P.minLat},${P.maxLon},${P.maxLat} are not valid.`),{data:{tiles:[`${t.url}/{z}/{x}/{y}`],minzoom:P.minZoom,maxzoom:P.maxZoom,bounds:[P.minLon,P.minLat,P.maxLon,P.maxLat]}}}let r=new RegExp(/pmtiles:\/\/(.+)\/(\d+)\/(\d+)\/(\d+)/),o=t.url.match(r);if(!o)throw new Error("Invalid PMTiles protocol URL");let s=o[1],a=this.tiles.get(s);a||(a=new o9(s),this.tiles.set(s,a));let c=o[2],h=o[3],m=o[4],y=yield a.getHeader(),M=yield a?.getZxy(+c,+h,+m,i.signal);if(M)return{data:new Uint8Array(M.data),cacheControl:M.cacheControl,expires:M.expires};if(y.tileType===1){if(this.errorOnMissingTile)throw new Error("Tile not found.");return{data:new Uint8Array}}return{data:null}}),"tilev4"),this.tile=Yue(this.tilev4),this.tiles=new Map,this.metadata=e?.metadata||!1,this.errorOnMissingTile=e?.errorOnMissingTile||!1}add(e){this.tiles.set(e.source.getKey(),e)}get(e){return this.tiles.get(e)}};pa(bZ,"Protocol");var $ue=bZ;function CZ(n,e){return(e>>>0)*4294967296+(n>>>0)}pa(CZ,"toNum");function _Z(n,e){let t=e.buf,i=t[e.pos++],r=(i&112)>>4;if(i<128||(i=t[e.pos++],r|=(i&127)<<3,i<128)||(i=t[e.pos++],r|=(i&127)<<10,i<128)||(i=t[e.pos++],r|=(i&127)<<17,i<128)||(i=t[e.pos++],r|=(i&127)<<24,i<128)||(i=t[e.pos++],r|=(i&1)<<31,i<128))return CZ(n,r);throw new Error("Expected varint not more than 10 bytes")}pa(_Z,"readVarintRemainder");function h_(n){let e=n.buf,t=e[n.pos++],i=t&127;return t<128||(t=e[n.pos++],i|=(t&127)<<7,t<128)||(t=e[n.pos++],i|=(t&127)<<14,t<128)||(t=e[n.pos++],i|=(t&127)<<21,t<128)?i:(t=e[n.pos],i|=(t&15)<<28,_Z(i,n))}pa(h_,"readVarint");function WD(n,e,t,i){if(i===0){t===1&&(e[0]=n-1-e[0],e[1]=n-1-e[1]);let r=e[0];e[0]=e[1],e[1]=r}}pa(WD,"rotate");function xZ(n,e){let t=s3(2,n),i=e,r=e,o=e,s=[0,0],a=1;for(;a<t;)i=1&o/2,r=1&(o^i),WD(a,s,i,r),s[0]+=a*i,s[1]+=a*r,o=o/4,a*=2;return[n,s[0],s[1]]}pa(xZ,"idOnLevel");var Vue=[0,1,5,21,85,341,1365,5461,21845,87381,349525,1398101,5592405,22369621,89478485,357913941,1431655765,5726623061,22906492245,91625968981,366503875925,1466015503701,5864062014805,23456248059221,93824992236885,375299968947541,0x5555555555555];function MZ(n,e,t){if(n>26)throw new Error("Tile zoom level exceeds max safe number limit (26)");if(e>s3(2,n)-1||t>s3(2,n)-1)throw new Error("tile x/y outside zoom level bounds");let i=Vue[n],r=s3(2,n),o=0,s=0,a=0,c=[e,t],h=r/2;for(;h>0;)o=(c[0]&h)>0?1:0,s=(c[1]&h)>0?1:0,a+=h*h*(3*o^s),WD(h,c,o,s),h=h/2;return i+a}pa(MZ,"zxyToTileId");function Hue(n){let e=0;for(let t=0;t<27;t++){let i=(1<<t)*(1<<t);if(e+i>n)return xZ(t,n-e);e+=i}throw new Error("Tile zoom level exceeds max safe number limit (26)")}pa(Hue,"tileIdToZxy");var Zue=(n=>(n[n.Unknown=0]="Unknown",n[n.None=1]="None",n[n.Gzip=2]="Gzip",n[n.Brotli=3]="Brotli",n[n.Zstd=4]="Zstd",n))(Zue||{});function sE(n,e){return tA(this,null,function*(){if(e===1||e===0)return n;if(e===2){if(typeof globalThis.DecompressionStream>"u")return Gue(new Uint8Array(n));let t=new Response(n).body;if(!t)throw new Error("Failed to read response stream");let i=t.pipeThrough(new globalThis.DecompressionStream("gzip"));return new Response(i).arrayBuffer()}throw new Error("Compression method not supported")})}pa(sE,"defaultDecompress");var Xue=(n=>(n[n.Unknown=0]="Unknown",n[n.Mvt=1]="Mvt",n[n.Png=2]="Png",n[n.Jpeg=3]="Jpeg",n[n.Webp=4]="Webp",n[n.Avif=5]="Avif",n))(Xue||{});function wZ(n){return n===1?".mvt":n===2?".png":n===3?".jpg":n===4?".webp":n===5?".avif":""}pa(wZ,"tileTypeExt");var Jue=127;function SZ(n,e){let t=0,i=n.length-1;for(;t<=i;){let r=i+t>>1,o=e-n[r].tileId;if(o>0)t=r+1;else if(o<0)i=r-1;else return n[r]}return i>=0&&(n[i].runLength===0||e-n[i].tileId<n[i].runLength)?n[i]:null}pa(SZ,"findTile");var ece=class{constructor(e){this.file=e}getKey(){return this.file.name}getBytes(e,t){return tA(this,null,function*(){return{data:yield this.file.slice(e,e+t).arrayBuffer()}})}};pa(ece,"FileSource");var EZ=class{constructor(e,t=new Headers){this.url=e,this.customHeaders=t,this.mustReload=!1;let i="";"navigator"in globalThis&&(i=globalThis.navigator.userAgent||"");let r=i.indexOf("Windows")>-1,o=/Chrome|Chromium|Edg|OPR|Brave/.test(i);this.chromeWindowsNoCache=!1,r&&o&&(this.chromeWindowsNoCache=!0)}getKey(){return this.url}setHeaders(e){this.customHeaders=e}getBytes(e,t,i,r){return tA(this,null,function*(){let o,s;i?s=i:(o=new AbortController,s=o.signal);let a=new Headers(this.customHeaders);a.set("range",`bytes=${e}-${e+t-1}`);let c;this.mustReload?c="reload":this.chromeWindowsNoCache&&(c="no-store");let h=yield fetch(this.url,{signal:s,cache:c,headers:a});if(e===0&&h.status===416){let M=h.headers.get("Content-Range");if(!M||!M.startsWith("bytes */"))throw new Error("Missing content-length on 416 response");let x=+M.substr(8);h=yield fetch(this.url,{signal:s,cache:"reload",headers:{range:`bytes=0-${x-1}`}})}let m=h.headers.get("Etag");if(m!=null&&m.startsWith("W/")&&(m=null),h.status===416||r&&m&&m!==r)throw this.mustReload=!0,new r9(`Server returned non-matching ETag ${r} after one retry. Check browser extensions and servers for issues that may affect correct ETag headers.`);if(h.status>=300)throw new Error(`Bad response code: ${h.status}`);let y=h.headers.get("Content-Length");if(h.status===200&&(!y||+y>t))throw o&&o.abort(),new Error("Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.");return{data:yield h.arrayBuffer(),etag:m||void 0,cacheControl:h.headers.get("Cache-Control")||void 0,expires:h.headers.get("Expires")||void 0}})}};pa(EZ,"FetchSource");var tce=EZ;function rp(n,e){let t=n.getUint32(e+4,!0),i=n.getUint32(e+0,!0);return t*s3(2,32)+i}pa(rp,"getUint64");function OZ(n,e){let t=new DataView(n),i=t.getUint8(7);if(i>3)throw new Error(`Archive is spec version ${i} but this library supports up to spec version 3`);return{specVersion:i,rootDirectoryOffset:rp(t,8),rootDirectoryLength:rp(t,16),jsonMetadataOffset:rp(t,24),jsonMetadataLength:rp(t,32),leafDirectoryOffset:rp(t,40),leafDirectoryLength:rp(t,48),tileDataOffset:rp(t,56),tileDataLength:rp(t,64),numAddressedTiles:rp(t,72),numTileEntries:rp(t,80),numTileContents:rp(t,88),clustered:t.getUint8(96)===1,internalCompression:t.getUint8(97),tileCompression:t.getUint8(98),tileType:t.getUint8(99),minZoom:t.getUint8(100),maxZoom:t.getUint8(101),minLon:t.getInt32(102,!0)/1e7,minLat:t.getInt32(106,!0)/1e7,maxLon:t.getInt32(110,!0)/1e7,maxLat:t.getInt32(114,!0)/1e7,centerZoom:t.getUint8(118),centerLon:t.getInt32(119,!0)/1e7,centerLat:t.getInt32(123,!0)/1e7,etag:e}}pa(OZ,"bytesToHeader");function QD(n){let e={buf:new Uint8Array(n),pos:0},t=h_(e),i=[],r=0;for(let o=0;o<t;o++){let s=h_(e);i.push({tileId:r+s,offset:0,length:0,runLength:1}),r+=s}for(let o=0;o<t;o++)i[o].runLength=h_(e);for(let o=0;o<t;o++)i[o].length=h_(e);for(let o=0;o<t;o++){let s=h_(e);s===0&&o>0?i[o].offset=i[o-1].offset+i[o-1].length:i[o].offset=s-1}return i}pa(QD,"deserializeIndex");var BZ=class extends Error{};pa(BZ,"EtagMismatch");var r9=BZ;function qD(n,e){return tA(this,null,function*(){let t=yield n.getBytes(0,16384);if(new DataView(t.data).getUint16(0,!0)!==19792)throw new Error("Wrong magic number for PMTiles archive");let i=t.data.slice(0,Jue),r=OZ(i,t.etag),o=t.data.slice(r.rootDirectoryOffset,r.rootDirectoryOffset+r.rootDirectoryLength),s=`${n.getKey()}|${r.etag||""}|${r.rootDirectoryOffset}|${r.rootDirectoryLength}`,a=QD(yield e(o,r.internalCompression));return[r,[s,a.length,a]]})}pa(qD,"getHeaderAndRoot");function YD(n,e,t,i,r){return tA(this,null,function*(){let o=yield n.getBytes(t,i,void 0,r.etag),s=yield e(o.data,r.internalCompression),a=QD(s);if(a.length===0)throw new Error("Empty directory is invalid");return a})}pa(YD,"getDirectory");var nce=class{constructor(e=100,t=!0,i=sE){this.cache=new Map,this.maxCacheEntries=e,this.counter=1,this.decompress=i}getHeader(e){return tA(this,null,function*(){let t=e.getKey(),i=this.cache.get(t);if(i)return i.lastUsed=this.counter++,i.data;let r=yield qD(e,this.decompress);return r[1]&&this.cache.set(r[1][0],{lastUsed:this.counter++,data:r[1][2]}),this.cache.set(t,{lastUsed:this.counter++,data:r[0]}),this.prune(),r[0]})}getDirectory(e,t,i,r){return tA(this,null,function*(){let o=`${e.getKey()}|${r.etag||""}|${t}|${i}`,s=this.cache.get(o);if(s)return s.lastUsed=this.counter++,s.data;let a=yield YD(e,this.decompress,t,i,r);return this.cache.set(o,{lastUsed:this.counter++,data:a}),this.prune(),a})}prune(){if(this.cache.size>this.maxCacheEntries){let e=1/0,t;this.cache.forEach((i,r)=>{i.lastUsed<e&&(e=i.lastUsed,t=r)}),t&&this.cache.delete(t)}}invalidate(e){return tA(this,null,function*(){this.cache.delete(e.getKey())})}};pa(nce,"ResolvedValueCache");var IZ=class{constructor(e=100,t=!0,i=sE){this.cache=new Map,this.invalidations=new Map,this.maxCacheEntries=e,this.counter=1,this.decompress=i}getHeader(e){return tA(this,null,function*(){let t=e.getKey(),i=this.cache.get(t);if(i)return i.lastUsed=this.counter++,yield i.data;let r=new Promise((o,s)=>{qD(e,this.decompress).then(a=>{a[1]&&this.cache.set(a[1][0],{lastUsed:this.counter++,data:Promise.resolve(a[1][2])}),o(a[0]),this.prune()}).catch(a=>{s(a)})});return this.cache.set(t,{lastUsed:this.counter++,data:r}),r})}getDirectory(e,t,i,r){return tA(this,null,function*(){let o=`${e.getKey()}|${r.etag||""}|${t}|${i}`,s=this.cache.get(o);if(s)return s.lastUsed=this.counter++,yield s.data;let a=new Promise((c,h)=>{YD(e,this.decompress,t,i,r).then(m=>{c(m),this.prune()}).catch(m=>{h(m)})});return this.cache.set(o,{lastUsed:this.counter++,data:a}),a})}prune(){if(this.cache.size>=this.maxCacheEntries){let e=1/0,t;this.cache.forEach((i,r)=>{i.lastUsed<e&&(e=i.lastUsed,t=r)}),t&&this.cache.delete(t)}}invalidate(e){return tA(this,null,function*(){let t=e.getKey();if(this.invalidations.get(t))return yield this.invalidations.get(t);this.cache.delete(e.getKey());let i=new Promise((r,o)=>{this.getHeader(e).then(s=>{r(),this.invalidations.delete(t)}).catch(s=>{o(s)})});this.invalidations.set(t,i)})}};pa(IZ,"SharedPromiseCache");var ice=IZ,kZ=class{constructor(e,t,i){typeof e=="string"?this.source=new tce(e):this.source=e,i?this.decompress=i:this.decompress=sE,t?this.cache=t:this.cache=new ice}getHeader(){return tA(this,null,function*(){return yield this.cache.getHeader(this.source)})}getZxyAttempt(e,t,i,r){return tA(this,null,function*(){let o=MZ(e,t,i),s=yield this.cache.getHeader(this.source);if(e<s.minZoom||e>s.maxZoom)return;let a=s.rootDirectoryOffset,c=s.rootDirectoryLength;for(let h=0;h<=3;h++){let m=yield this.cache.getDirectory(this.source,a,c,s),y=SZ(m,o);if(y){if(y.runLength>0){let M=yield this.source.getBytes(s.tileDataOffset+y.offset,y.length,r,s.etag);return{data:yield this.decompress(M.data,s.tileCompression),cacheControl:M.cacheControl,expires:M.expires}}a=s.leafDirectoryOffset+y.offset,c=y.length}else return}throw new Error("Maximum directory depth exceeded")})}getZxy(e,t,i,r){return tA(this,null,function*(){try{return yield this.getZxyAttempt(e,t,i,r)}catch(o){if(o instanceof r9)return this.cache.invalidate(this.source),yield this.getZxyAttempt(e,t,i,r);throw o}})}getMetadataAttempt(){return tA(this,null,function*(){let e=yield this.cache.getHeader(this.source),t=yield this.source.getBytes(e.jsonMetadataOffset,e.jsonMetadataLength,void 0,e.etag),i=yield this.decompress(t.data,e.internalCompression),r=new TextDecoder("utf-8");return JSON.parse(r.decode(i))})}getMetadata(){return tA(this,null,function*(){try{return yield this.getMetadataAttempt()}catch(e){if(e instanceof r9)return this.cache.invalidate(this.source),yield this.getMetadataAttempt();throw e}})}getTileJson(e){return tA(this,null,function*(){let t=yield this.getHeader(),i=yield this.getMetadata(),r=wZ(t.tileType);return{tilejson:"3.0.0",scheme:"xyz",tiles:[`${e}/{z}/{x}/{y}${r}`],vector_layers:i.vector_layers,attribution:i.attribution,description:i.description,name:i.name,version:i.version,bounds:[t.minLon,t.minLat,t.maxLon,t.maxLat],center:[t.centerLon,t.centerLat,t.centerZoom],minzoom:t.minZoom,maxzoom:t.maxZoom}})}};pa(kZ,"PMTiles");var o9=kZ,rce=8,oce={version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},"font-faces":{type:"array",value:"fontFaces"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sce={"*":{type:"source"}},ace=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],lce={type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},encoding:{type:"enum",values:{mvt:{},mlt:{}},default:"mvt"},"*":{type:"*"}},uce={type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},cce={type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},Ace={type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},hce={type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},dce={type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},fce={id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},pce=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],mce={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},gce={"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},yce={"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},vce={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},bce={"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Cce={"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},_ce={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},xce={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Mce={type:"array",value:"*"},wce={type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},Sce={type:"enum",values:{Point:{},LineString:{},Polygon:{}}},Ece={type:"array",minimum:0,maximum:24,value:["number","color"],length:2},Oce={type:"array",value:"*",minimum:1},Bce={anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},Ice={"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},kce={source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},Tce={type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},Rce=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],Dce={"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},Pce={"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},Uce={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},Kce={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Lce={"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},Fce={"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},zce={"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},jce={"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Nce={duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},Gce={"*":{type:"string"}},is={$version:rce,$root:oce,sources:sce,source:ace,source_vector:lce,source_raster:uce,source_raster_dem:cce,source_geojson:Ace,source_video:hce,source_image:dce,layer:fce,layout:pce,layout_background:mce,layout_fill:gce,layout_circle:yce,layout_heatmap:vce,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:bce,layout_symbol:Cce,layout_raster:_ce,layout_hillshade:xce,"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:Mce,filter_operator:wce,geometry_type:Sce,function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:Ece,expression:Oce,light:Bce,sky:Ice,terrain:kce,projection:Tce,paint:Rce,paint_fill:Dce,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:Pce,paint_circle:Uce,paint_heatmap:Kce,paint_symbol:Lce,paint_raster:Fce,paint_hillshade:zce,"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:jce,transition:Nce,"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:Gce};const Wce=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Qce(n,e){const t={};for(const i in n)i!=="ref"&&(t[i]=n[i]);return Wce.forEach(i=>{i in e&&(t[i]=e[i])}),t}function qce(n){n=n.slice();const e=Object.create(null);for(let t=0;t<n.length;t++)e[n[t].id]=n[t];for(let t=0;t<n.length;t++)"ref"in n[t]&&(n[t]=Qce(n[t],e[n[t].ref]));return n}function Us(n,e){if(Array.isArray(n)){if(!Array.isArray(e)||n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(!Us(n[t],e[t]))return!1;return!0}if(typeof n=="object"&&n!==null&&e!==null){if(typeof e!="object"||Object.keys(n).length!==Object.keys(e).length)return!1;for(const i in n)if(!Us(n[i],e[i]))return!1;return!0}return n===e}function sp(n,e){n.push(e)}function TZ(n,e,t){sp(t,{command:"addSource",args:[n,e[n]]})}function RZ(n,e,t){sp(e,{command:"removeSource",args:[n]}),t[n]=!0}function Yce(n,e,t,i){RZ(n,t,i),TZ(n,e,t)}function $ce(n,e,t){let i;for(i in n[t])if(Object.prototype.hasOwnProperty.call(n[t],i)&&i!=="data"&&!Us(n[t][i],e[t][i]))return!1;for(i in e[t])if(Object.prototype.hasOwnProperty.call(e[t],i)&&i!=="data"&&!Us(n[t][i],e[t][i]))return!1;return!0}function Vce(n,e,t,i){n=n||{},e=e||{};let r;for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(Object.prototype.hasOwnProperty.call(e,r)||RZ(r,t,i));for(r in e)Object.prototype.hasOwnProperty.call(e,r)&&(Object.prototype.hasOwnProperty.call(n,r)?Us(n[r],e[r])||(n[r].type==="geojson"&&e[r].type==="geojson"&&$ce(n,e,r)?sp(t,{command:"setGeoJSONSourceData",args:[r,e[r].data]}):Yce(r,e,t,i)):TZ(r,e,t))}function L5(n,e,t,i,r,o){n=n||{},e=e||{};for(const s in n)Object.prototype.hasOwnProperty.call(n,s)&&(Us(n[s],e[s])||t.push({command:o,args:[i,s,e[s],r]}));for(const s in e)!Object.prototype.hasOwnProperty.call(e,s)||Object.prototype.hasOwnProperty.call(n,s)||Us(n[s],e[s])||t.push({command:o,args:[i,s,e[s],r]})}function MF(n){return n.id}function wF(n,e){return n[e.id]=e,n}function Hce(n,e,t){n=n||[],e=e||[];const i=n.map(MF),r=e.map(MF),o=n.reduce(wF,{}),s=e.reduce(wF,{}),a=i.slice(),c=Object.create(null);let h,m,y,M,x;for(let T=0,P=0;T<i.length;T++)h=i[T],Object.prototype.hasOwnProperty.call(s,h)?P++:(sp(t,{command:"removeLayer",args:[h]}),a.splice(a.indexOf(h,P),1));for(let T=0,P=0;T<r.length;T++)h=r[r.length-1-T],a[a.length-1-T]!==h&&(Object.prototype.hasOwnProperty.call(o,h)?(sp(t,{command:"removeLayer",args:[h]}),a.splice(a.lastIndexOf(h,a.length-P),1)):P++,M=a[a.length-T],sp(t,{command:"addLayer",args:[s[h],M]}),a.splice(a.length-T,0,h),c[h]=!0);for(let T=0;T<r.length;T++)if(h=r[T],m=o[h],y=s[h],!(c[h]||Us(m,y))){if(!Us(m.source,y.source)||!Us(m["source-layer"],y["source-layer"])||!Us(m.type,y.type)){sp(t,{command:"removeLayer",args:[h]}),M=a[a.lastIndexOf(h)+1],sp(t,{command:"addLayer",args:[y,M]});continue}L5(m.layout,y.layout,t,h,null,"setLayoutProperty"),L5(m.paint,y.paint,t,h,null,"setPaintProperty"),Us(m.filter,y.filter)||sp(t,{command:"setFilter",args:[h,y.filter]}),(!Us(m.minzoom,y.minzoom)||!Us(m.maxzoom,y.maxzoom))&&sp(t,{command:"setLayerZoomRange",args:[h,y.minzoom,y.maxzoom]});for(x in m)Object.prototype.hasOwnProperty.call(m,x)&&(x==="layout"||x==="paint"||x==="filter"||x==="metadata"||x==="minzoom"||x==="maxzoom"||(x.indexOf("paint.")===0?L5(m[x],y[x],t,h,x.slice(6),"setPaintProperty"):Us(m[x],y[x])||sp(t,{command:"setLayerProperty",args:[h,x,y[x]]})));for(x in y)!Object.prototype.hasOwnProperty.call(y,x)||Object.prototype.hasOwnProperty.call(m,x)||x==="layout"||x==="paint"||x==="filter"||x==="metadata"||x==="minzoom"||x==="maxzoom"||(x.indexOf("paint.")===0?L5(m[x],y[x],t,h,x.slice(6),"setPaintProperty"):Us(m[x],y[x])||sp(t,{command:"setLayerProperty",args:[h,x,y[x]]}))}}function Zce(n,e){if(!n)return[{command:"setStyle",args:[e]}];let t=[];try{if(!Us(n.version,e.version))return[{command:"setStyle",args:[e]}];Us(n.center,e.center)||t.push({command:"setCenter",args:[e.center]}),Us(n.state,e.state)||t.push({command:"setGlobalState",args:[e.state]}),Us(n.centerAltitude,e.centerAltitude)||t.push({command:"setCenterAltitude",args:[e.centerAltitude]}),Us(n.zoom,e.zoom)||t.push({command:"setZoom",args:[e.zoom]}),Us(n.bearing,e.bearing)||t.push({command:"setBearing",args:[e.bearing]}),Us(n.pitch,e.pitch)||t.push({command:"setPitch",args:[e.pitch]}),Us(n.roll,e.roll)||t.push({command:"setRoll",args:[e.roll]}),Us(n.sprite,e.sprite)||t.push({command:"setSprite",args:[e.sprite]}),Us(n.glyphs,e.glyphs)||t.push({command:"setGlyphs",args:[e.glyphs]}),Us(n.transition,e.transition)||t.push({command:"setTransition",args:[e.transition]}),Us(n.light,e.light)||t.push({command:"setLight",args:[e.light]}),Us(n.terrain,e.terrain)||t.push({command:"setTerrain",args:[e.terrain]}),Us(n.sky,e.sky)||t.push({command:"setSky",args:[e.sky]}),Us(n.projection,e.projection)||t.push({command:"setProjection",args:[e.projection]});const i={},r=[];Vce(n.sources,e.sources,r,i);const o=[];n.layers&&n.layers.forEach(s=>{"source"in s&&i[s.source]?t.push({command:"removeLayer",args:[s.id]}):o.push(s)}),t=t.concat(r),Hce(o,e.layers,t)}catch(i){console.warn("Unable to compute style diff:",i),t=[{command:"setStyle",args:[e]}]}return t}class Yn{constructor(e,t,i,r){this.message=(e?`${e}: `:"")+i,r&&(this.identifier=r),t!=null&&t.__line__&&(this.line=t.__line__)}}function sx(n,...e){for(const t of e)for(const i in t)n[i]=t[i];return n}let kg=class extends Error{constructor(e,t){super(t),this.message=t,this.key=e}},Xce=class DZ{constructor(e,t=[]){this.parent=e,this.bindings={};for(const[i,r]of t)this.bindings[i]=r}concat(e){return new DZ(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return this.bindings[e]?!0:this.parent?this.parent.has(e):!1}};const aE={kind:"null"},Jn={kind:"number"},yo={kind:"string"},no={kind:"boolean"},Qg={kind:"color"},lE={kind:"projectionDefinition"},_b={kind:"object"},Xr={kind:"value"},Jce={kind:"error"},uE={kind:"collator"},cE={kind:"formatted"},AE={kind:"padding"},U3={kind:"colorArray"},hE={kind:"numberArray"},Y4={kind:"resolvedImage"},dE={kind:"variableAnchorOffsetCollection"};function yf(n,e){return{kind:"array",itemType:n,N:e}}function fl(n){if(n.kind==="array"){const e=fl(n.itemType);return typeof n.N=="number"?`array<${e}, ${n.N}>`:n.itemType.kind==="value"?"array":`array<${e}>`}else return n.kind}const eAe=[aE,Jn,yo,no,Qg,lE,cE,_b,yf(Xr),AE,hE,U3,Y4,dE];function K3(n,e){if(e.kind==="error")return null;if(n.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!K3(n.itemType,e.itemType))&&(typeof n.N!="number"||n.N===e.N))return null}else{if(n.kind===e.kind)return null;if(n.kind==="value"){for(const t of eAe)if(!K3(t,e))return null}}return`Expected ${fl(n)} but found ${fl(e)} instead.`}function $D(n,e){return e.some(t=>t.kind===n.kind)}function xb(n,e){return e.some(t=>t==="null"?n===null:t==="array"?Array.isArray(n):t==="object"?n&&!Array.isArray(n)&&typeof n=="object":t===typeof n)}function my(n,e){return n.kind==="array"&&e.kind==="array"?n.itemType.kind===e.itemType.kind&&typeof n.N=="number":n.kind===e.kind}const PZ=.96422,UZ=1,KZ=.82521,LZ=4/29,K_=6/29,FZ=3*K_*K_,tAe=K_*K_*K_,nAe=Math.PI/180,iAe=180/Math.PI;function zZ(n){return n=n%360,n<0&&(n+=360),n}function jZ([n,e,t,i]){n=pO(n),e=pO(e),t=pO(t);let r,o;const s=mO((.2225045*n+.7168786*e+.0606169*t)/UZ);n===e&&e===t?r=o=s:(r=mO((.4360747*n+.3850649*e+.1430804*t)/PZ),o=mO((.0139322*n+.0971045*e+.7141733*t)/KZ));const a=116*s-16;return[a<0?0:a,500*(r-s),200*(s-o),i]}function pO(n){return n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function mO(n){return n>tAe?Math.pow(n,1/3):n/FZ+LZ}function NZ([n,e,t,i]){let r=(n+16)/116,o=isNaN(e)?r:r+e/500,s=isNaN(t)?r:r-t/200;return r=UZ*yO(r),o=PZ*yO(o),s=KZ*yO(s),[gO(3.1338561*o-1.6168667*r-.4906146*s),gO(-.9787684*o+1.9161415*r+.033454*s),gO(.0719453*o-.2289914*r+1.4052427*s),i]}function gO(n){return n=n<=.00304?12.92*n:1.055*Math.pow(n,1/2.4)-.055,n<0?0:n>1?1:n}function yO(n){return n>K_?n*n*n:FZ*(n-LZ)}function rAe(n){const[e,t,i,r]=jZ(n),o=Math.sqrt(t*t+i*i);return[Math.round(o*1e4)?zZ(Math.atan2(i,t)*iAe):NaN,o,e,r]}function oAe([n,e,t,i]){return n=isNaN(n)?0:n*nAe,NZ([t,Math.cos(n)*e,Math.sin(n)*e,i])}function sAe([n,e,t,i]){n=zZ(n),e/=100,t/=100;function r(o){const s=(o+n/30)%12,a=e*Math.min(t,1-t);return t-a*Math.max(-1,Math.min(s-3,9-s,1))}return[r(0),r(8),r(4),i]}const aAe=Object.hasOwn||function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};function a3(n,e){return aAe(n,e)?n[e]:void 0}function lAe(n){if(n=n.toLowerCase().trim(),n==="transparent")return[0,0,0,0];const e=a3(uAe,n);if(e){const[r,o,s]=e;return[r/255,o/255,s/255,1]}if(n.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(n)){const o=n.length<6?1:2;let s=1;return[F5(n.slice(s,s+=o)),F5(n.slice(s,s+=o)),F5(n.slice(s,s+=o)),F5(n.slice(s,s+o)||"ff")]}if(n.startsWith("rgb")){const r=/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,o=n.match(r);if(o){const[s,a,c,h,m,y,M,x,T,P,F,j]=o,q=[h||" ",M||" ",P].join("");if(q==="  "||q==="  /"||q===",,"||q===",,,"){const V=[c,y,T].join(""),H=V==="%%%"?100:V===""?255:0;if(H){const Q=[d_(+a/H,0,1),d_(+m/H,0,1),d_(+x/H,0,1),F?SF(+F,j):1];if(EF(Q))return Q}}return}}const t=/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,i=n.match(t);if(i){const[r,o,s,a,c,h,m,y,M]=i,x=[s||" ",c||" ",m].join("");if(x==="  "||x==="  /"||x===",,"||x===",,,"){const T=[+o,d_(+a,0,100),d_(+h,0,100),y?SF(+y,M):1];if(EF(T))return sAe(T)}}}function F5(n){return parseInt(n.padEnd(2,n),16)/255}function SF(n,e){return d_(e?n/100:n,0,1)}function d_(n,e,t){return Math.min(Math.max(e,n),t)}function EF(n){return!n.some(Number.isNaN)}const uAe={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function qy(n,e,t){return n+t*(e-n)}function ax(n,e,t){return n.map((i,r)=>qy(i,e[r],t))}function cAe(n){return n==="rgb"||n==="hcl"||n==="lab"}let ma=class f_{constructor(e,t,i,r=1,o=!0){this.r=e,this.g=t,this.b=i,this.a=r,o||(this.r*=r,this.g*=r,this.b*=r,r||this.overwriteGetter("rgb",[e,t,i,r]))}static parse(e){if(e instanceof f_)return e;if(typeof e!="string")return;const t=lAe(e);if(t)return new f_(...t,!1)}get rgb(){const{r:e,g:t,b:i,a:r}=this,o=r||1/0;return this.overwriteGetter("rgb",[e/o,t/o,i/o,r])}get hcl(){return this.overwriteGetter("hcl",rAe(this.rgb))}get lab(){return this.overwriteGetter("lab",jZ(this.rgb))}overwriteGetter(e,t){return Object.defineProperty(this,e,{value:t}),t}toString(){const[e,t,i,r]=this.rgb;return`rgba(${[e,t,i].map(o=>Math.round(o*255)).join(",")},${r})`}static interpolate(e,t,i,r="rgb"){switch(r){case"rgb":{const[o,s,a,c]=ax(e.rgb,t.rgb,i);return new f_(o,s,a,c,!1)}case"hcl":{const[o,s,a,c]=e.hcl,[h,m,y,M]=t.hcl;let x,T;if(!isNaN(o)&&!isNaN(h)){let V=h-o;h>o&&V>180?V-=360:h<o&&o-h>180&&(V+=360),x=o+i*V}else isNaN(o)?isNaN(h)?x=NaN:(x=h,(a===1||a===0)&&(T=m)):(x=o,(y===1||y===0)&&(T=s));const[P,F,j,q]=oAe([x,T??qy(s,m,i),qy(a,y,i),qy(c,M,i)]);return new f_(P,F,j,q,!1)}case"lab":{const[o,s,a,c]=NZ(ax(e.lab,t.lab,i));return new f_(o,s,a,c,!1)}}}};ma.black=new ma(0,0,0,1);ma.white=new ma(1,1,1,1);ma.transparent=new ma(0,0,0,0);ma.red=new ma(1,0,0,1);let VD=class{constructor(e,t,i){e?this.sensitivity=t?"variant":"case":this.sensitivity=t?"accent":"base",this.locale=i,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,t){return this.collator.compare(e,t)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}};const AAe=["bottom","center","top"];let s9=class{constructor(e,t,i,r,o,s){this.text=e,this.image=t,this.scale=i,this.fontStack=r,this.textColor=o,this.verticalAlign=s}},Ix=class tw{constructor(e){this.sections=e}static fromString(e){return new tw([new s9(e,null,null,null,null,null)])}isEmpty(){return this.sections.length===0?!0:!this.sections.some(e=>e.text.length!==0||e.image&&e.image.name.length!==0)}static factory(e){return e instanceof tw?e:tw.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map(e=>e.text).join("")}},a0=class D2{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof D2)return e;if(typeof e=="number")return new D2([e,e,e,e]);if(Array.isArray(e)&&!(e.length<1||e.length>4)){for(const t of e)if(typeof t!="number")return;switch(e.length){case 1:e=[e[0],e[0],e[0],e[0]];break;case 2:e=[e[0],e[1],e[0],e[1]];break;case 3:e=[e[0],e[1],e[2],e[1]];break}return new D2(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,i){return new D2(ax(e.values,t.values,i))}},l0=class P2{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof P2)return e;if(typeof e=="number")return new P2([e]);if(Array.isArray(e)){for(const t of e)if(typeof t!="number")return;return new P2(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,i){return new P2(ax(e.values,t.values,i))}},yp=class U2{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof U2)return e;if(typeof e=="string"){const i=ma.parse(e);return i?new U2([i]):void 0}if(!Array.isArray(e))return;const t=[];for(const i of e){if(typeof i!="string")return;const r=ma.parse(i);if(!r)return;t.push(r)}return new U2(t)}toString(){return JSON.stringify(this.values)}static interpolate(e,t,i,r="rgb"){const o=[];if(e.values.length!=t.values.length)throw new Error(`colorArray: Arrays have mismatched length (${e.values.length} vs. ${t.values.length}), cannot interpolate.`);for(let s=0;s<e.values.length;s++)o.push(ma.interpolate(e.values[s],t.values[s],i,r));return new U2(o)}},El=class extends Error{constructor(e){super(e),this.name="RuntimeError"}toJSON(){return this.message}};const hAe=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);let av=class nw{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof nw)return e;if(!(!Array.isArray(e)||e.length<1||e.length%2!==0)){for(let t=0;t<e.length;t+=2){const i=e[t],r=e[t+1];if(typeof i!="string"||!hAe.has(i)||!Array.isArray(r)||r.length!==2||typeof r[0]!="number"||typeof r[1]!="number")return}return new nw(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,i){const r=e.values,o=t.values;if(r.length!==o.length)throw new El(`Cannot interpolate values of different length. from: ${e.toString()}, to: ${t.toString()}`);const s=[];for(let a=0;a<r.length;a+=2){if(r[a]!==o[a])throw new El(`Cannot interpolate values containing mismatched anchors. from[${a}]: ${r[a]}, to[${a}]: ${o[a]}`);s.push(r[a]);const[c,h]=r[a+1],[m,y]=o[a+1];s.push([qy(c,m,i),qy(h,y,i)])}return new nw(s)}},Vb=class GZ{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new GZ({name:e,available:!1}):null}},kx=class p_{constructor(e,t,i){this.from=e,this.to=t,this.transition=i}static interpolate(e,t,i){return new p_(e,t,i)}static parse(e){if(e instanceof p_)return e;if(Array.isArray(e)&&e.length===3&&typeof e[0]=="string"&&typeof e[1]=="string"&&typeof e[2]=="number")return new p_(e[0],e[1],e[2]);if(typeof e=="object"&&typeof e.from=="string"&&typeof e.to=="string"&&typeof e.transition=="number")return new p_(e.from,e.to,e.transition);if(typeof e=="string")return new p_(e,e,1)}};function WZ(n,e,t,i){return typeof n=="number"&&n>=0&&n<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof t=="number"&&t>=0&&t<=255?typeof i>"u"||typeof i=="number"&&i>=0&&i<=1?null:`Invalid rgba value [${[n,e,t,i].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof i=="number"?[n,e,t,i]:[n,e,t]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function L3(n){if(n===null||typeof n=="string"||typeof n=="boolean"||typeof n=="number"||n instanceof kx||n instanceof ma||n instanceof VD||n instanceof Ix||n instanceof a0||n instanceof l0||n instanceof yp||n instanceof av||n instanceof Vb)return!0;if(Array.isArray(n)){for(const e of n)if(!L3(e))return!1;return!0}else if(typeof n=="object"){for(const e in n)if(!L3(n[e]))return!1;return!0}else return!1}function Zu(n){if(n===null)return aE;if(typeof n=="string")return yo;if(typeof n=="boolean")return no;if(typeof n=="number")return Jn;if(n instanceof ma)return Qg;if(n instanceof kx)return lE;if(n instanceof VD)return uE;if(n instanceof Ix)return cE;if(n instanceof a0)return AE;if(n instanceof l0)return hE;if(n instanceof yp)return U3;if(n instanceof av)return dE;if(n instanceof Vb)return Y4;if(Array.isArray(n)){const e=n.length;let t;for(const i of n){const r=Zu(i);if(!t)t=r;else{if(t===r)continue;t=Xr;break}}return yf(t||Xr,e)}else return _b}function l3(n){const e=typeof n;return n===null?"":e==="string"||e==="number"||e==="boolean"?String(n):n instanceof ma||n instanceof kx||n instanceof Ix||n instanceof a0||n instanceof l0||n instanceof yp||n instanceof av||n instanceof Vb?n.toString():JSON.stringify(n)}let Kw=class QZ{constructor(e,t){this.type=e,this.value=t}static parse(e,t){if(e.length!==2)return t.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!L3(e[1]))return t.error("invalid value");const i=e[1];let r=Zu(i);const o=t.expectedType;return r.kind==="array"&&r.N===0&&o&&o.kind==="array"&&(typeof o.N!="number"||o.N===0)&&(r=o),new QZ(r,i)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}};const z5={string:yo,number:Jn,boolean:no,object:_b};let e1=class qZ{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let i=1,r;const o=e[0];if(o==="array"){let a;if(e.length>2){const h=e[1];if(typeof h!="string"||!(h in z5)||h==="object")return t.error('The item type argument of "array" must be one of string, number, boolean',1);a=z5[h],i++}else a=Xr;let c;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);c=e[2],i++}r=yf(a,c)}else{if(!z5[o])throw new Error(`Types doesn't contain name = ${o}`);r=z5[o]}const s=[];for(;i<e.length;i++){const a=t.parse(e[i],i,Xr);if(!a)return null;s.push(a)}return new qZ(r,s)}evaluate(e){for(let t=0;t<this.args.length;t++){const i=this.args[t].evaluate(e);if(K3(this.type,Zu(i))){if(t===this.args.length-1)throw new El(`Expected value to be of type ${fl(this.type)}, but found ${fl(Zu(i))} instead.`)}else return i}throw new Error}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}};const OF={"to-boolean":no,"to-color":Qg,"to-number":Jn,"to-string":yo};let E_=class YZ{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const i=e[0];if(!OF[i])throw new Error(`Can't parse ${i} as it is not part of the known types`);if((i==="to-boolean"||i==="to-string")&&e.length!==2)return t.error("Expected one argument.");const r=OF[i],o=[];for(let s=1;s<e.length;s++){const a=t.parse(e[s],s,Xr);if(!a)return null;o.push(a)}return new YZ(r,o)}evaluate(e){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(e);case"color":{let t,i;for(const r of this.args){if(t=r.evaluate(e),i=null,t instanceof ma)return t;if(typeof t=="string"){const o=e.parseColor(t);if(o)return o}else if(Array.isArray(t)&&(t.length<3||t.length>4?i=`Invalid rgba value ${JSON.stringify(t)}: expected an array containing either three or four numeric values.`:i=WZ(t[0],t[1],t[2],t[3]),!i))return new ma(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new El(i||`Could not parse color from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"padding":{let t;for(const i of this.args){t=i.evaluate(e);const r=a0.parse(t);if(r)return r}throw new El(`Could not parse padding from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"numberArray":{let t;for(const i of this.args){t=i.evaluate(e);const r=l0.parse(t);if(r)return r}throw new El(`Could not parse numberArray from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"colorArray":{let t;for(const i of this.args){t=i.evaluate(e);const r=yp.parse(t);if(r)return r}throw new El(`Could not parse colorArray from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"variableAnchorOffsetCollection":{let t;for(const i of this.args){t=i.evaluate(e);const r=av.parse(t);if(r)return r}throw new El(`Could not parse variableAnchorOffsetCollection from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"number":{let t=null;for(const i of this.args){if(t=i.evaluate(e),t===null)return 0;const r=Number(t);if(!isNaN(r))return r}throw new El(`Could not convert ${JSON.stringify(t)} to number.`)}case"formatted":return Ix.fromString(l3(this.args[0].evaluate(e)));case"resolvedImage":return Vb.fromString(l3(this.args[0].evaluate(e)));case"projectionDefinition":return this.args[0].evaluate(e);default:return l3(this.args[0].evaluate(e))}}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}};const dAe=["Unknown","Point","LineString","Polygon"];let $Z=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?dAe[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(e){let t=this._parseColorCache.get(e);return t||(t=ma.parse(e),this._parseColorCache.set(e,t)),t}},VZ=class HZ{constructor(e,t,i=[],r,o=new Xce,s=[]){this.registry=e,this.path=i,this.key=i.map(a=>`[${a}]`).join(""),this.scope=o,this.errors=s,this.expectedType=r,this._isConstant=t}parse(e,t,i,r,o={}){return t?this.concat(t,i,r)._parse(e,o):this._parse(e,o)}_parse(e,t){(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number")&&(e=["literal",e]);function i(r,o,s){return s==="assert"?new e1(o,[r]):s==="coerce"?new E_(o,[r]):r}if(Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const r=e[0];if(typeof r!="string")return this.error(`Expression name must be a string, but found ${typeof r} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const o=this.registry[r];if(o){let s=o.parse(e,this);if(!s)return null;if(this.expectedType){const a=this.expectedType,c=s.type;if((a.kind==="string"||a.kind==="number"||a.kind==="boolean"||a.kind==="object"||a.kind==="array")&&c.kind==="value")s=i(s,a,t.typeAnnotation||"assert");else if(a.kind==="projectionDefinition"&&["string","array"].includes(c.kind)||["color","formatted","resolvedImage"].includes(a.kind)&&["value","string"].includes(c.kind)||["padding","numberArray"].includes(a.kind)&&["value","number","array"].includes(c.kind)||a.kind==="colorArray"&&["value","string","array"].includes(c.kind)||a.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(c.kind))s=i(s,a,t.typeAnnotation||"coerce");else if(this.checkSubtype(a,c))return null}if(!(s instanceof Kw)&&s.type.kind!=="resolvedImage"&&this._isConstant(s)){const a=new $Z;try{s=new Kw(s.type,s.evaluate(a))}catch(c){return this.error(c.message),null}}return s}return this.error(`Unknown expression "${r}". If you wanted a literal array, use ["literal", [...]].`,0)}else return typeof e>"u"?this.error("'undefined' value invalid. Use null instead."):typeof e=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof e} instead.`)}concat(e,t,i){const r=typeof e=="number"?this.path.concat(e):this.path,o=i?this.scope.concat(i):this.scope;return new HZ(this.registry,this._isConstant,r,t||null,o,this.errors)}error(e,...t){const i=`${this.key}${t.map(r=>`[${r}]`).join("")}`;this.errors.push(new kg(i,e))}checkSubtype(e,t){const i=K3(e,t);return i&&this.error(i),i}},ZZ=class XZ{constructor(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const t of this.bindings)e(t[1]);e(this.result)}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const i=[];for(let o=1;o<e.length-1;o+=2){const s=e[o];if(typeof s!="string")return t.error(`Expected string, but found ${typeof s} instead.`,o);if(/[^a-zA-Z0-9_]/.test(s))return t.error("Variable names must contain only alphanumeric characters or '_'.",o);const a=t.parse(e[o+1],o+1);if(!a)return null;i.push([s,a])}const r=t.parse(e[e.length-1],e.length-1,t.expectedType,i);return r?new XZ(i,r):null}outputDefined(){return this.result.outputDefined()}},JZ=class eX{constructor(e,t){this.type=t.type,this.name=e,this.boundExpression=t}static parse(e,t){if(e.length!==2||typeof e[1]!="string")return t.error("'var' expression requires exactly one string literal argument.");const i=e[1];return t.scope.has(i)?new eX(i,t.scope.get(i)):t.error(`Unknown variable "${i}". Make sure "${i}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}},fAe=class tX{constructor(e,t,i){this.type=e,this.index=t,this.input=i}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,Jn),r=t.parse(e[2],2,yf(t.expectedType||Xr));if(!i||!r)return null;const o=r.type;return new tX(o.itemType,i,r)}evaluate(e){const t=this.index.evaluate(e),i=this.input.evaluate(e);if(t<0)throw new El(`Array index out of bounds: ${t} < 0.`);if(t>=i.length)throw new El(`Array index out of bounds: ${t} > ${i.length-1}.`);if(t!==Math.floor(t))throw new El(`Array index must be an integer, but found ${t} instead.`);return i[t]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}},pAe=class nX{constructor(e,t){this.type=no,this.needle=e,this.haystack=t}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,Xr),r=t.parse(e[2],2,Xr);return!i||!r?null:$D(i.type,[no,yo,Jn,aE,Xr])?new nX(i,r):t.error(`Expected first argument to be of type boolean, string, number or null, but found ${fl(i.type)} instead`)}evaluate(e){const t=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!i)return!1;if(!xb(t,["boolean","string","number","null"]))throw new El(`Expected first argument to be of type boolean, string, number or null, but found ${fl(Zu(t))} instead.`);if(!xb(i,["string","array"]))throw new El(`Expected second argument to be of type array or string, but found ${fl(Zu(i))} instead.`);return i.indexOf(t)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}},mAe=class a9{constructor(e,t,i){this.type=Jn,this.needle=e,this.haystack=t,this.fromIndex=i}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 2 or 3 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,Xr),r=t.parse(e[2],2,Xr);if(!i||!r)return null;if(!$D(i.type,[no,yo,Jn,aE,Xr]))return t.error(`Expected first argument to be of type boolean, string, number or null, but found ${fl(i.type)} instead`);if(e.length===4){const o=t.parse(e[3],3,Jn);return o?new a9(i,r,o):null}else return new a9(i,r)}evaluate(e){const t=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!xb(t,["boolean","string","number","null"]))throw new El(`Expected first argument to be of type boolean, string, number or null, but found ${fl(Zu(t))} instead.`);let r;if(this.fromIndex&&(r=this.fromIndex.evaluate(e)),xb(i,["string"])){const o=i.indexOf(t,r);return o===-1?-1:[...i.slice(0,o)].length}else{if(xb(i,["array"]))return i.indexOf(t,r);throw new El(`Expected second argument to be of type array or string, but found ${fl(Zu(i))} instead.`)}}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}},gAe=class iX{constructor(e,t,i,r,o,s){this.inputType=e,this.type=t,this.input=i,this.cases=r,this.outputs=o,this.otherwise=s}static parse(e,t){if(e.length<5)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!==1)return t.error("Expected an even number of arguments.");let i,r;t.expectedType&&t.expectedType.kind!=="value"&&(r=t.expectedType);const o={},s=[];for(let h=2;h<e.length-1;h+=2){let m=e[h];const y=e[h+1];Array.isArray(m)||(m=[m]);const M=t.concat(h);if(m.length===0)return M.error("Expected at least one branch label.");for(const T of m){if(typeof T!="number"&&typeof T!="string")return M.error("Branch labels must be numbers or strings.");if(typeof T=="number"&&Math.abs(T)>Number.MAX_SAFE_INTEGER)return M.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof T=="number"&&Math.floor(T)!==T)return M.error("Numeric branch labels must be integer values.");if(!i)i=Zu(T);else if(M.checkSubtype(i,Zu(T)))return null;if(typeof o[String(T)]<"u")return M.error("Branch labels must be unique.");o[String(T)]=s.length}const x=t.parse(y,h,r);if(!x)return null;r=r||x.type,s.push(x)}const a=t.parse(e[1],1,Xr);if(!a)return null;const c=t.parse(e[e.length-1],e.length-1,r);return!c||a.type.kind!=="value"&&t.concat(1).checkSubtype(i,a.type)?null:new iX(i,r,a,o,s,c)}evaluate(e){const t=this.input.evaluate(e);return(Zu(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}},yAe=class rX{constructor(e,t,i){this.type=e,this.branches=t,this.otherwise=i}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!==0)return t.error("Expected an odd number of arguments.");let i;t.expectedType&&t.expectedType.kind!=="value"&&(i=t.expectedType);const r=[];for(let s=1;s<e.length-1;s+=2){const a=t.parse(e[s],s,no);if(!a)return null;const c=t.parse(e[s+1],s+1,i);if(!c)return null;r.push([a,c]),i=i||c.type}const o=t.parse(e[e.length-1],e.length-1,i);if(!o)return null;if(!i)throw new Error("Can't infer output type");return new rX(i,r,o)}evaluate(e){for(const[t,i]of this.branches)if(t.evaluate(e))return i.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[t,i]of this.branches)e(t),e(i);e(this.otherwise)}outputDefined(){return this.branches.every(([e,t])=>t.outputDefined())&&this.otherwise.outputDefined()}},vAe=class l9{constructor(e,t,i,r){this.type=e,this.input=t,this.beginIndex=i,this.endIndex=r}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 2 or 3 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,Xr),r=t.parse(e[2],2,Jn);if(!i||!r)return null;if(!$D(i.type,[yf(Xr),yo,Xr]))return t.error(`Expected first argument to be of type array or string, but found ${fl(i.type)} instead`);if(e.length===4){const o=t.parse(e[3],3,Jn);return o?new l9(i.type,i,r,o):null}else return new l9(i.type,i,r)}evaluate(e){const t=this.input.evaluate(e),i=this.beginIndex.evaluate(e);let r;if(this.endIndex&&(r=this.endIndex.evaluate(e)),xb(t,["string"]))return[...t].slice(i,r).join("");if(xb(t,["array"]))return t.slice(i,r);throw new El(`Expected first argument to be of type array or string, but found ${fl(Zu(t))} instead.`)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}};function fE(n,e){const t=n.length-1;let i=0,r=t,o=0,s,a;for(;i<=r;)if(o=Math.floor((i+r)/2),s=n[o],a=n[o+1],s<=e){if(o===t||e<a)return o;i=o+1}else if(s>e)r=o-1;else throw new El("Input is not a number.");return 0}let oX=class sX{constructor(e,t,i){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(const[r,o]of i)this.labels.push(r),this.outputs.push(o)}static parse(e,t){if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");const i=t.parse(e[1],1,Jn);if(!i)return null;const r=[];let o=null;t.expectedType&&t.expectedType.kind!=="value"&&(o=t.expectedType);for(let s=1;s<e.length;s+=2){const a=s===1?-1/0:e[s],c=e[s+1],h=s,m=s+1;if(typeof a!="number")return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',h);if(r.length&&r[r.length-1][0]>=a)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',h);const y=t.parse(c,m,o);if(!y)return null;o=o||y.type,r.push([a,y])}return new sX(o,i,r)}evaluate(e){const t=this.labels,i=this.outputs;if(t.length===1)return i[0].evaluate(e);const r=this.input.evaluate(e);if(r<=t[0])return i[0].evaluate(e);const o=t.length;if(r>=t[o-1])return i[o-1].evaluate(e);const s=fE(t,r);return i[s].evaluate(e)}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}};function bAe(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var vO,BF;function CAe(){if(BF)return vO;BF=1,vO=n;function n(e,t,i,r){this.cx=3*e,this.bx=3*(i-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(r-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=t,this.p2x=i,this.p2y=r}return n.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,t){if(t===void 0&&(t=1e-6),e<0)return 0;if(e>1)return 1;for(var i=e,r=0;r<8;r++){var o=this.sampleCurveX(i)-e;if(Math.abs(o)<t)return i;var s=this.sampleCurveDerivativeX(i);if(Math.abs(s)<1e-6)break;i=i-o/s}var a=0,c=1;for(i=e,r=0;r<20&&(o=this.sampleCurveX(i),!(Math.abs(o-e)<t));r++)e>o?a=i:c=i,i=(c-a)*.5+a;return i},solve:function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}},vO}var _Ae=CAe(),xAe=bAe(_Ae);let i1=class u9{constructor(e,t,i,r,o){this.type=e,this.operator=t,this.interpolation=i,this.input=r,this.labels=[],this.outputs=[];for(const[s,a]of o)this.labels.push(s),this.outputs.push(a)}static interpolationFactor(e,t,i,r){let o=0;if(e.name==="exponential")o=bO(t,e.base,i,r);else if(e.name==="linear")o=bO(t,1,i,r);else if(e.name==="cubic-bezier"){const s=e.controlPoints;o=new xAe(s[0],s[1],s[2],s[3]).solve(bO(t,1,i,r))}return o}static parse(e,t){let[i,r,o,...s]=e;if(!Array.isArray(r)||r.length===0)return t.error("Expected an interpolation type expression.",1);if(r[0]==="linear")r={name:"linear"};else if(r[0]==="exponential"){const h=r[1];if(typeof h!="number")return t.error("Exponential interpolation requires a numeric base.",1,1);r={name:"exponential",base:h}}else if(r[0]==="cubic-bezier"){const h=r.slice(1);if(h.length!==4||h.some(m=>typeof m!="number"||m<0||m>1))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);r={name:"cubic-bezier",controlPoints:h}}else return t.error(`Unknown interpolation type ${String(r[0])}`,1,0);if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");if(o=t.parse(o,2,Jn),!o)return null;const a=[];let c=null;(i==="interpolate-hcl"||i==="interpolate-lab")&&t.expectedType!=U3?c=Qg:t.expectedType&&t.expectedType.kind!=="value"&&(c=t.expectedType);for(let h=0;h<s.length;h+=2){const m=s[h],y=s[h+1],M=h+3,x=h+4;if(typeof m!="number")return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',M);if(a.length&&a[a.length-1][0]>=m)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',M);const T=t.parse(y,x,c);if(!T)return null;c=c||T.type,a.push([m,T])}return!my(c,Jn)&&!my(c,lE)&&!my(c,Qg)&&!my(c,AE)&&!my(c,hE)&&!my(c,U3)&&!my(c,dE)&&!my(c,yf(Jn))?t.error(`Type ${fl(c)} is not interpolatable.`):new u9(c,i,r,o,a)}evaluate(e){const t=this.labels,i=this.outputs;if(t.length===1)return i[0].evaluate(e);const r=this.input.evaluate(e);if(r<=t[0])return i[0].evaluate(e);const o=t.length;if(r>=t[o-1])return i[o-1].evaluate(e);const s=fE(t,r),a=t[s],c=t[s+1],h=u9.interpolationFactor(this.interpolation,r,a,c),m=i[s].evaluate(e),y=i[s+1].evaluate(e);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return qy(m,y,h);case"color":return ma.interpolate(m,y,h);case"padding":return a0.interpolate(m,y,h);case"colorArray":return yp.interpolate(m,y,h);case"numberArray":return l0.interpolate(m,y,h);case"variableAnchorOffsetCollection":return av.interpolate(m,y,h);case"array":return ax(m,y,h);case"projectionDefinition":return kx.interpolate(m,y,h)}case"interpolate-hcl":switch(this.type.kind){case"color":return ma.interpolate(m,y,h,"hcl");case"colorArray":return yp.interpolate(m,y,h,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return ma.interpolate(m,y,h,"lab");case"colorArray":return yp.interpolate(m,y,h,"lab")}}}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}};function bO(n,e,t,i){const r=i-t,o=n-t;return r===0?0:e===1?o/r:(Math.pow(e,o)-1)/(Math.pow(e,r)-1)}const MAe={color:ma.interpolate,number:qy,padding:a0.interpolate,numberArray:l0.interpolate,colorArray:yp.interpolate,variableAnchorOffsetCollection:av.interpolate,array:ax};let aX=class c9{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let i=null;const r=t.expectedType;r&&r.kind!=="value"&&(i=r);const o=[];for(const a of e.slice(1)){const c=t.parse(a,1+o.length,i,void 0,{typeAnnotation:"omit"});if(!c)return null;i=i||c.type,o.push(c)}if(!i)throw new Error("No output type");return r&&o.some(a=>K3(r,a.type))?new c9(Xr,o):new c9(i,o)}evaluate(e){let t=null,i=0,r;for(const o of this.args)if(i++,t=o.evaluate(e),t&&t instanceof Vb&&!t.available&&(r||(r=t.name),t=null,i===this.args.length&&(t=r)),t!==null)break;return t}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}};function IF(n,e){return n==="=="||n==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function wAe(n,e,t){return e===t}function SAe(n,e,t){return e!==t}function EAe(n,e,t){return e<t}function OAe(n,e,t){return e>t}function BAe(n,e,t){return e<=t}function IAe(n,e,t){return e>=t}function lX(n,e,t,i){return i.compare(e,t)===0}function kAe(n,e,t,i){return!lX(n,e,t,i)}function TAe(n,e,t,i){return i.compare(e,t)<0}function RAe(n,e,t,i){return i.compare(e,t)>0}function DAe(n,e,t,i){return i.compare(e,t)<=0}function PAe(n,e,t,i){return i.compare(e,t)>=0}function Tx(n,e,t){const i=n!=="=="&&n!=="!=";return class uX{constructor(o,s,a){this.type=no,this.lhs=o,this.rhs=s,this.collator=a,this.hasUntypedArgument=o.type.kind==="value"||s.type.kind==="value"}static parse(o,s){if(o.length!==3&&o.length!==4)return s.error("Expected two or three arguments.");const a=o[0];let c=s.parse(o[1],1,Xr);if(!c)return null;if(!IF(a,c.type))return s.concat(1).error(`"${a}" comparisons are not supported for type '${fl(c.type)}'.`);let h=s.parse(o[2],2,Xr);if(!h)return null;if(!IF(a,h.type))return s.concat(2).error(`"${a}" comparisons are not supported for type '${fl(h.type)}'.`);if(c.type.kind!==h.type.kind&&c.type.kind!=="value"&&h.type.kind!=="value")return s.error(`Cannot compare types '${fl(c.type)}' and '${fl(h.type)}'.`);i&&(c.type.kind==="value"&&h.type.kind!=="value"?c=new e1(h.type,[c]):c.type.kind!=="value"&&h.type.kind==="value"&&(h=new e1(c.type,[h])));let m=null;if(o.length===4){if(c.type.kind!=="string"&&h.type.kind!=="string"&&c.type.kind!=="value"&&h.type.kind!=="value")return s.error("Cannot use collator to compare non-string types.");if(m=s.parse(o[3],3,uE),!m)return null}return new uX(c,h,m)}evaluate(o){const s=this.lhs.evaluate(o),a=this.rhs.evaluate(o);if(i&&this.hasUntypedArgument){const c=Zu(s),h=Zu(a);if(c.kind!==h.kind||!(c.kind==="string"||c.kind==="number"))throw new El(`Expected arguments for "${n}" to be (string, string) or (number, number), but found (${c.kind}, ${h.kind}) instead.`)}if(this.collator&&!i&&this.hasUntypedArgument){const c=Zu(s),h=Zu(a);if(c.kind!=="string"||h.kind!=="string")return e(o,s,a)}return this.collator?t(o,s,a,this.collator.evaluate(o)):e(o,s,a)}eachChild(o){o(this.lhs),o(this.rhs),this.collator&&o(this.collator)}outputDefined(){return!0}}}const UAe=Tx("==",wAe,lX),KAe=Tx("!=",SAe,kAe),LAe=Tx("<",EAe,TAe),FAe=Tx(">",OAe,RAe),zAe=Tx("<=",BAe,DAe),jAe=Tx(">=",IAe,PAe);let cX=class AX{constructor(e,t,i){this.type=uE,this.locale=i,this.caseSensitive=e,this.diacriticSensitive=t}static parse(e,t){if(e.length!==2)return t.error("Expected one argument.");const i=e[1];if(typeof i!="object"||Array.isArray(i))return t.error("Collator options argument must be an object.");const r=t.parse(i["case-sensitive"]===void 0?!1:i["case-sensitive"],1,no);if(!r)return null;const o=t.parse(i["diacritic-sensitive"]===void 0?!1:i["diacritic-sensitive"],1,no);if(!o)return null;let s=null;return i.locale&&(s=t.parse(i.locale,1,yo),!s)?null:new AX(r,o,s)}evaluate(e){return new VD(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}},NAe=class hX{constructor(e,t,i,r,o){this.type=yo,this.number=e,this.locale=t,this.currency=i,this.minFractionDigits=r,this.maxFractionDigits=o}static parse(e,t){if(e.length!==3)return t.error("Expected two arguments.");const i=t.parse(e[1],1,Jn);if(!i)return null;const r=e[2];if(typeof r!="object"||Array.isArray(r))return t.error("NumberFormat options argument must be an object.");let o=null;if(r.locale&&(o=t.parse(r.locale,1,yo),!o))return null;let s=null;if(r.currency&&(s=t.parse(r.currency,1,yo),!s))return null;let a=null;if(r["min-fraction-digits"]&&(a=t.parse(r["min-fraction-digits"],1,Jn),!a))return null;let c=null;return r["max-fraction-digits"]&&(c=t.parse(r["max-fraction-digits"],1,Jn),!c)?null:new hX(i,o,s,a,c)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}},GAe=class dX{constructor(e){this.type=cE,this.sections=e}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const i=e[1];if(!Array.isArray(i)&&typeof i=="object")return t.error("First argument must be an image or text section.");const r=[];let o=!1;for(let s=1;s<=e.length-1;++s){const a=e[s];if(o&&typeof a=="object"&&!Array.isArray(a)){o=!1;let c=null;if(a["font-scale"]&&(c=t.parse(a["font-scale"],1,Jn),!c))return null;let h=null;if(a["text-font"]&&(h=t.parse(a["text-font"],1,yf(yo)),!h))return null;let m=null;if(a["text-color"]&&(m=t.parse(a["text-color"],1,Qg),!m))return null;let y=null;if(a["vertical-align"]){if(typeof a["vertical-align"]=="string"&&!AAe.includes(a["vertical-align"]))return t.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${a["vertical-align"]}' instead.`);if(y=t.parse(a["vertical-align"],1,yo),!y)return null}const M=r[r.length-1];M.scale=c,M.font=h,M.textColor=m,M.verticalAlign=y}else{const c=t.parse(e[s],1,Xr);if(!c)return null;const h=c.type.kind;if(h!=="string"&&h!=="value"&&h!=="null"&&h!=="resolvedImage")return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");o=!0,r.push({content:c,scale:null,font:null,textColor:null,verticalAlign:null})}}return new dX(r)}evaluate(e){const t=i=>{const r=i.content.evaluate(e);return Zu(r)===Y4?new s9("",r,null,null,null,i.verticalAlign?i.verticalAlign.evaluate(e):null):new s9(l3(r),null,i.scale?i.scale.evaluate(e):null,i.font?i.font.evaluate(e).join(","):null,i.textColor?i.textColor.evaluate(e):null,i.verticalAlign?i.verticalAlign.evaluate(e):null)};return new Ix(this.sections.map(t))}eachChild(e){for(const t of this.sections)e(t.content),t.scale&&e(t.scale),t.font&&e(t.font),t.textColor&&e(t.textColor),t.verticalAlign&&e(t.verticalAlign)}outputDefined(){return!1}},WAe=class fX{constructor(e){this.type=Y4,this.input=e}static parse(e,t){if(e.length!==2)return t.error("Expected two arguments.");const i=t.parse(e[1],1,yo);return i?new fX(i):t.error("No image name provided.")}evaluate(e){const t=this.input.evaluate(e),i=Vb.fromString(t);return i&&e.availableImages&&(i.available=e.availableImages.indexOf(t)>-1),i}eachChild(e){e(this.input)}outputDefined(){return!1}},QAe=class pX{constructor(e){this.type=Jn,this.input=e}static parse(e,t){if(e.length!==2)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const i=t.parse(e[1],1);return i?i.type.kind!=="array"&&i.type.kind!=="string"&&i.type.kind!=="value"?t.error(`Expected argument of type string or array, but found ${fl(i.type)} instead.`):new pX(i):null}evaluate(e){const t=this.input.evaluate(e);if(typeof t=="string")return[...t].length;if(Array.isArray(t))return t.length;throw new El(`Expected value to be of type string or array, but found ${fl(Zu(t))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}};const qg=8192;function qAe(n,e){const t=YAe(n[0]),i=VAe(n[1]),r=Math.pow(2,e.z);return[Math.round(t*r*qg),Math.round(i*r*qg)]}function HD(n,e){const t=Math.pow(2,e.z),i=(n[0]/qg+e.x)/t,r=(n[1]/qg+e.y)/t;return[$Ae(i),HAe(r)]}function YAe(n){return(180+n)/360}function $Ae(n){return n*360-180}function VAe(n){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n*Math.PI/360)))/360}function HAe(n){return 360/Math.PI*Math.atan(Math.exp((180-n*360)*Math.PI/180))-90}function $4(n,e){n[0]=Math.min(n[0],e[0]),n[1]=Math.min(n[1],e[1]),n[2]=Math.max(n[2],e[0]),n[3]=Math.max(n[3],e[1])}function F3(n,e){return!(n[0]<=e[0]||n[2]>=e[2]||n[1]<=e[1]||n[3]>=e[3])}function ZAe(n,e,t){return e[1]>n[1]!=t[1]>n[1]&&n[0]<(t[0]-e[0])*(n[1]-e[1])/(t[1]-e[1])+e[0]}function XAe(n,e,t){const i=n[0]-e[0],r=n[1]-e[1],o=n[0]-t[0],s=n[1]-t[1];return i*s-o*r===0&&i*o<=0&&r*s<=0}function pE(n,e,t,i){const r=[e[0]-n[0],e[1]-n[1]],o=[i[0]-t[0],i[1]-t[1]];return nhe(o,r)===0?!1:!!(kF(n,e,t,i)&&kF(t,i,n,e))}function JAe(n,e,t){for(const i of t)for(let r=0;r<i.length-1;++r)if(pE(n,e,i[r],i[r+1]))return!0;return!1}function Rx(n,e,t=!1){let i=!1;for(const r of e)for(let o=0;o<r.length-1;o++){if(XAe(n,r[o],r[o+1]))return t;ZAe(n,r[o],r[o+1])&&(i=!i)}return i}function ehe(n,e){for(const t of e)if(Rx(n,t))return!0;return!1}function mX(n,e){for(const t of n)if(!Rx(t,e))return!1;for(let t=0;t<n.length-1;++t)if(JAe(n[t],n[t+1],e))return!1;return!0}function the(n,e){for(const t of e)if(mX(n,t))return!0;return!1}function nhe(n,e){return n[0]*e[1]-n[1]*e[0]}function kF(n,e,t,i){const r=n[0]-t[0],o=n[1]-t[1],s=e[0]-t[0],a=e[1]-t[1],c=i[0]-t[0],h=i[1]-t[1],m=r*h-c*o,y=s*h-c*a;return m>0&&y<0||m<0&&y>0}function ZD(n,e,t){const i=[];for(let r=0;r<n.length;r++){const o=[];for(let s=0;s<n[r].length;s++){const a=qAe(n[r][s],t);$4(e,a),o.push(a)}i.push(o)}return i}function gX(n,e,t){const i=[];for(let r=0;r<n.length;r++){const o=ZD(n[r],e,t);i.push(o)}return i}function yX(n,e,t,i){if(n[0]<t[0]||n[0]>t[2]){const r=i*.5;let o=n[0]-t[0]>r?-i:t[0]-n[0]>r?i:0;o===0&&(o=n[0]-t[2]>r?-i:t[2]-n[0]>r?i:0),n[0]+=o}$4(e,n)}function ihe(n){n[0]=n[1]=1/0,n[2]=n[3]=-1/0}function TF(n,e,t,i){const r=Math.pow(2,i.z)*qg,o=[i.x*qg,i.y*qg],s=[];for(const a of n)for(const c of a){const h=[c.x+o[0],c.y+o[1]];yX(h,e,t,r),s.push(h)}return s}function RF(n,e,t,i){const r=Math.pow(2,i.z)*qg,o=[i.x*qg,i.y*qg],s=[];for(const a of n){const c=[];for(const h of a){const m=[h.x+o[0],h.y+o[1]];$4(e,m),c.push(m)}s.push(c)}if(e[2]-e[0]<=r/2){ihe(e);for(const a of s)for(const c of a)yX(c,e,t,r)}return s}function rhe(n,e){const t=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],r=n.canonicalID();if(e.type==="Polygon"){const o=ZD(e.coordinates,i,r),s=TF(n.geometry(),t,i,r);if(!F3(t,i))return!1;for(const a of s)if(!Rx(a,o))return!1}if(e.type==="MultiPolygon"){const o=gX(e.coordinates,i,r),s=TF(n.geometry(),t,i,r);if(!F3(t,i))return!1;for(const a of s)if(!ehe(a,o))return!1}return!0}function ohe(n,e){const t=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],r=n.canonicalID();if(e.type==="Polygon"){const o=ZD(e.coordinates,i,r),s=RF(n.geometry(),t,i,r);if(!F3(t,i))return!1;for(const a of s)if(!mX(a,o))return!1}if(e.type==="MultiPolygon"){const o=gX(e.coordinates,i,r),s=RF(n.geometry(),t,i,r);if(!F3(t,i))return!1;for(const a of s)if(!the(a,o))return!1}return!0}let XD=class iw{constructor(e,t){this.type=no,this.geojson=e,this.geometries=t}static parse(e,t){if(e.length!==2)return t.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(L3(e[1])){const i=e[1];if(i.type==="FeatureCollection"){const r=[];for(const o of i.features){const{type:s,coordinates:a}=o.geometry;s==="Polygon"&&r.push(a),s==="MultiPolygon"&&r.push(...a)}if(r.length){const o={type:"MultiPolygon",coordinates:r};return new iw(i,o)}}else if(i.type==="Feature"){const r=i.geometry.type;if(r==="Polygon"||r==="MultiPolygon")return new iw(i,i.geometry)}else if(i.type==="Polygon"||i.type==="MultiPolygon")return new iw(i,i)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return rhe(e,this.geometries);if(e.geometryType()==="LineString")return ohe(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}},vX=class{constructor(e=[],t=(i,r)=>i<r?-1:i>r?1:0){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let i=(this.length>>1)-1;i>=0;i--)this._down(i)}push(e){this.data.push(e),this._up(this.length++)}pop(){if(this.length===0)return;const e=this.data[0],t=this.data.pop();return--this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:i}=this,r=t[e];for(;e>0;){const o=e-1>>1,s=t[o];if(i(r,s)>=0)break;t[e]=s,e=o}t[e]=r}_down(e){const{data:t,compare:i}=this,r=this.length>>1,o=t[e];for(;e<r;){let s=(e<<1)+1;const a=s+1;if(a<this.length&&i(t[a],t[s])<0&&(s=a),i(t[s],o)>=0)break;t[e]=t[s],e=s}t[e]=o}};function she(n,e){if(n.length<=1)return[n];const i=[];let r,o;for(const s of n){const a=ahe(s);a!==0&&(s.area=Math.abs(a),o===void 0&&(o=a<0),o===a<0?(r&&i.push(r),r=[s]):r.push(s))}return r&&i.push(r),i}function ahe(n){let e=0;for(let t=0,i=n.length,r=i-1,o,s;t<i;r=t++)o=n[t],s=n[r],e+=(s.x-o.x)*(o.y+s.y);return e}const lhe=6378.137,DF=1/298.257223563,PF=DF*(2-DF),UF=Math.PI/180;let JD=class{constructor(e){const t=UF*lhe*1e3,i=Math.cos(e*UF),r=1/(1-PF*(1-i*i)),o=Math.sqrt(r);this.kx=t*o*i,this.ky=t*o*r*(1-PF)}distance(e,t){const i=this.wrap(e[0]-t[0])*this.kx,r=(e[1]-t[1])*this.ky;return Math.sqrt(i*i+r*r)}pointOnLine(e,t){let i=1/0,r,o,s,a;for(let c=0;c<e.length-1;c++){let h=e[c][0],m=e[c][1],y=this.wrap(e[c+1][0]-h)*this.kx,M=(e[c+1][1]-m)*this.ky,x=0;(y!==0||M!==0)&&(x=(this.wrap(t[0]-h)*this.kx*y+(t[1]-m)*this.ky*M)/(y*y+M*M),x>1?(h=e[c+1][0],m=e[c+1][1]):x>0&&(h+=y/this.kx*x,m+=M/this.ky*x)),y=this.wrap(t[0]-h)*this.kx,M=(t[1]-m)*this.ky;const T=y*y+M*M;T<i&&(i=T,r=h,o=m,s=c,a=x)}return{point:[r,o],index:s,t:Math.max(0,Math.min(1,a))}}wrap(e){for(;e<-180;)e+=360;for(;e>180;)e-=360;return e}};const A9=100,h9=50;function bX(n,e){return e[0]-n[0]}function Lw(n){return n[1]-n[0]+1}function u1(n,e){return n[1]>=n[0]&&n[1]<e}function d9(n,e){if(n[0]>n[1])return[null,null];const t=Lw(n);if(e){if(t===2)return[n,null];const r=Math.floor(t/2);return[[n[0],n[0]+r],[n[0]+r,n[1]]]}if(t===1)return[n,null];const i=Math.floor(t/2)-1;return[[n[0],n[0]+i],[n[0]+i+1,n[1]]]}function f9(n,e){if(!u1(e,n.length))return[1/0,1/0,-1/0,-1/0];const t=[1/0,1/0,-1/0,-1/0];for(let i=e[0];i<=e[1];++i)$4(t,n[i]);return t}function p9(n){const e=[1/0,1/0,-1/0,-1/0];for(const t of n)for(const i of t)$4(e,i);return e}function KF(n){return n[0]!==-1/0&&n[1]!==-1/0&&n[2]!==1/0&&n[3]!==1/0}function eP(n,e,t){if(!KF(n)||!KF(e))return NaN;let i=0,r=0;return n[2]<e[0]&&(i=e[0]-n[2]),n[0]>e[2]&&(i=n[0]-e[2]),n[1]>e[3]&&(r=n[1]-e[3]),n[3]<e[1]&&(r=e[1]-n[3]),t.distance([0,0],[i,r])}function hb(n,e,t){const i=t.pointOnLine(e,n);return t.distance(n,i.point)}function tP(n,e,t,i,r){const o=Math.min(hb(n,[t,i],r),hb(e,[t,i],r)),s=Math.min(hb(t,[n,e],r),hb(i,[n,e],r));return Math.min(o,s)}function uhe(n,e,t,i,r){if(!(u1(e,n.length)&&u1(i,t.length)))return 1/0;let s=1/0;for(let a=e[0];a<e[1];++a){const c=n[a],h=n[a+1];for(let m=i[0];m<i[1];++m){const y=t[m],M=t[m+1];if(pE(c,h,y,M))return 0;s=Math.min(s,tP(c,h,y,M,r))}}return s}function che(n,e,t,i,r){if(!(u1(e,n.length)&&u1(i,t.length)))return NaN;let s=1/0;for(let a=e[0];a<=e[1];++a)for(let c=i[0];c<=i[1];++c)if(s=Math.min(s,r.distance(n[a],t[c])),s===0)return s;return s}function Ahe(n,e,t){if(Rx(n,e,!0))return 0;let i=1/0;for(const r of e){const o=r[0],s=r[r.length-1];if(o!==s&&(i=Math.min(i,hb(n,[s,o],t)),i===0))return i;const a=t.pointOnLine(r,n);if(i=Math.min(i,t.distance(n,a.point)),i===0)return i}return i}function hhe(n,e,t,i){if(!u1(e,n.length))return NaN;for(let o=e[0];o<=e[1];++o)if(Rx(n[o],t,!0))return 0;let r=1/0;for(let o=e[0];o<e[1];++o){const s=n[o],a=n[o+1];for(const c of t)for(let h=0,m=c.length,y=m-1;h<m;y=h++){const M=c[y],x=c[h];if(pE(s,a,M,x))return 0;r=Math.min(r,tP(s,a,M,x,i))}}return r}function LF(n,e){for(const t of n)for(const i of t)if(Rx(i,e,!0))return!0;return!1}function dhe(n,e,t,i=1/0){const r=p9(n),o=p9(e);if(i!==1/0&&eP(r,o,t)>=i)return i;if(F3(r,o)){if(LF(n,e))return 0}else if(LF(e,n))return 0;let s=1/0;for(const a of n)for(let c=0,h=a.length,m=h-1;c<h;m=c++){const y=a[m],M=a[c];for(const x of e)for(let T=0,P=x.length,F=P-1;T<P;F=T++){const j=x[F],q=x[T];if(pE(y,M,j,q))return 0;s=Math.min(s,tP(y,M,j,q,t))}}return s}function FF(n,e,t,i,r,o){if(!o)return;const s=eP(f9(i,o),r,t);s<e&&n.push([s,o,[0,0]])}function j5(n,e,t,i,r,o,s){if(!o||!s)return;const a=eP(f9(i,o),f9(r,s),t);a<e&&n.push([a,o,s])}function Fw(n,e,t,i,r=1/0){let o=Math.min(i.distance(n[0],t[0][0]),r);if(o===0)return o;const s=new vX([[0,[0,n.length-1],[0,0]]],bX),a=p9(t);for(;s.length>0;){const c=s.pop();if(c[0]>=o)continue;const h=c[1],m=e?h9:A9;if(Lw(h)<=m){if(!u1(h,n.length))return NaN;if(e){const y=hhe(n,h,t,i);if(isNaN(y)||y===0)return y;o=Math.min(o,y)}else for(let y=h[0];y<=h[1];++y){const M=Ahe(n[y],t,i);if(o=Math.min(o,M),o===0)return 0}}else{const y=d9(h,e);FF(s,o,i,n,a,y[0]),FF(s,o,i,n,a,y[1])}}return o}function zw(n,e,t,i,r,o=1/0){let s=Math.min(o,r.distance(n[0],t[0]));if(s===0)return s;const a=new vX([[0,[0,n.length-1],[0,t.length-1]]],bX);for(;a.length>0;){const c=a.pop();if(c[0]>=s)continue;const h=c[1],m=c[2],y=e?h9:A9,M=i?h9:A9;if(Lw(h)<=y&&Lw(m)<=M){if(!u1(h,n.length)&&u1(m,t.length))return NaN;let x;if(e&&i)x=uhe(n,h,t,m,r),s=Math.min(s,x);else if(e&&!i){const T=n.slice(h[0],h[1]+1);for(let P=m[0];P<=m[1];++P)if(x=hb(t[P],T,r),s=Math.min(s,x),s===0)return s}else if(!e&&i){const T=t.slice(m[0],m[1]+1);for(let P=h[0];P<=h[1];++P)if(x=hb(n[P],T,r),s=Math.min(s,x),s===0)return s}else x=che(n,h,t,m,r),s=Math.min(s,x)}else{const x=d9(h,e),T=d9(m,i);j5(a,s,r,n,t,x[0],T[0]),j5(a,s,r,n,t,x[0],T[1]),j5(a,s,r,n,t,x[1],T[0]),j5(a,s,r,n,t,x[1],T[1])}}return s}function fhe(n,e){const t=n.geometry(),i=t.flat().map(s=>HD([s.x,s.y],n.canonical));if(t.length===0)return NaN;const r=new JD(i[0][1]);let o=1/0;for(const s of e){switch(s.type){case"Point":o=Math.min(o,zw(i,!1,[s.coordinates],!1,r,o));break;case"LineString":o=Math.min(o,zw(i,!1,s.coordinates,!0,r,o));break;case"Polygon":o=Math.min(o,Fw(i,!1,s.coordinates,r,o));break}if(o===0)return o}return o}function phe(n,e){const t=n.geometry(),i=t.flat().map(s=>HD([s.x,s.y],n.canonical));if(t.length===0)return NaN;const r=new JD(i[0][1]);let o=1/0;for(const s of e){switch(s.type){case"Point":o=Math.min(o,zw(i,!0,[s.coordinates],!1,r,o));break;case"LineString":o=Math.min(o,zw(i,!0,s.coordinates,!0,r,o));break;case"Polygon":o=Math.min(o,Fw(i,!0,s.coordinates,r,o));break}if(o===0)return o}return o}function mhe(n,e){const t=n.geometry();if(t.length===0||t[0].length===0)return NaN;const i=she(t).map(s=>s.map(a=>a.map(c=>HD([c.x,c.y],n.canonical)))),r=new JD(i[0][0][0][1]);let o=1/0;for(const s of e)for(const a of i){switch(s.type){case"Point":o=Math.min(o,Fw([s.coordinates],!1,a,r,o));break;case"LineString":o=Math.min(o,Fw(s.coordinates,!0,a,r,o));break;case"Polygon":o=Math.min(o,dhe(a,s.coordinates,r,o));break}if(o===0)return o}return o}function CO(n){return n.type==="MultiPolygon"?n.coordinates.map(e=>({type:"Polygon",coordinates:e})):n.type==="MultiLineString"?n.coordinates.map(e=>({type:"LineString",coordinates:e})):n.type==="MultiPoint"?n.coordinates.map(e=>({type:"Point",coordinates:e})):[n]}let nP=class rw{constructor(e,t){this.type=Jn,this.geojson=e,this.geometries=t}static parse(e,t){if(e.length!==2)return t.error(`'distance' expression requires exactly one argument, but found ${e.length-1} instead.`);if(L3(e[1])){const i=e[1];if(i.type==="FeatureCollection")return new rw(i,i.features.map(r=>CO(r.geometry)).flat());if(i.type==="Feature")return new rw(i,CO(i.geometry));if("type"in i&&"coordinates"in i)return new rw(i,CO(i))}return t.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return fhe(e,this.geometries);if(e.geometryType()==="LineString")return phe(e,this.geometries);if(e.geometryType()==="Polygon")return mhe(e,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}},iP=class CX{constructor(e){this.type=Xr,this.key=e}static parse(e,t){if(e.length!==2)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const i=e[1];return i==null?t.error("Global state property must be defined."):typeof i!="string"?t.error(`Global state property must be string, but found ${typeof e[1]} instead.`):new CX(i)}evaluate(e){var t;const i=(t=e.globals)===null||t===void 0?void 0:t.globalState;return!i||Object.keys(i).length===0?null:a3(i,this.key)}eachChild(){}outputDefined(){return!1}};const rP={"==":UAe,"!=":KAe,">":FAe,"<":LAe,">=":jAe,"<=":zAe,array:e1,at:fAe,boolean:e1,case:yAe,coalesce:aX,collator:cX,format:GAe,image:WAe,in:pAe,"index-of":mAe,interpolate:i1,"interpolate-hcl":i1,"interpolate-lab":i1,length:QAe,let:ZZ,literal:Kw,match:gAe,number:e1,"number-format":NAe,object:e1,slice:vAe,step:oX,string:e1,"to-boolean":E_,"to-color":E_,"to-number":E_,"to-string":E_,var:JZ,within:XD,distance:nP,"global-state":iP};let Dx=class K2{constructor(e,t,i,r){this.name=e,this.type=t,this._evaluate=i,this.args=r}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}static parse(e,t){const i=e[0],r=K2.definitions[i];if(!r)return t.error(`Unknown expression "${i}". If you wanted a literal array, use ["literal", [...]].`,0);const o=Array.isArray(r)?r[0]:r.type,s=Array.isArray(r)?[[r[1],r[2]]]:r.overloads,a=s.filter(([h])=>!Array.isArray(h)||h.length===e.length-1);let c=null;for(const[h,m]of a){c=new VZ(t.registry,jw,t.path,null,t.scope);const y=[];let M=!1;for(let x=1;x<e.length;x++){const T=e[x],P=Array.isArray(h)?h[x-1]:h.type,F=c.parse(T,1+y.length,P);if(!F){M=!0;break}y.push(F)}if(!M){if(Array.isArray(h)&&h.length!==y.length){c.error(`Expected ${h.length} arguments, but found ${y.length} instead.`);continue}for(let x=0;x<y.length;x++){const T=Array.isArray(h)?h[x]:h.type,P=y[x];c.concat(x+1).checkSubtype(T,P.type)}if(c.errors.length===0)return new K2(i,o,m,y)}}if(a.length===1)t.errors.push(...c.errors);else{const m=(a.length?a:s).map(([M])=>yhe(M)).join(" | "),y=[];for(let M=1;M<e.length;M++){const x=t.parse(e[M],1+y.length);if(!x)return null;y.push(fl(x.type))}t.error(`Expected arguments of type ${m}, but found (${y.join(", ")}) instead.`)}return null}static register(e,t){K2.definitions=t;for(const i in t)e[i]=K2}};function zF(n,[e,t,i,r]){e=e.evaluate(n),t=t.evaluate(n),i=i.evaluate(n);const o=r?r.evaluate(n):1,s=WZ(e,t,i,o);if(s)throw new El(s);return new ma(e/255,t/255,i/255,o,!1)}function jF(n,e){return n in e}function _O(n,e){const t=e[n];return typeof t>"u"?null:t}function ghe(n,e,t,i){for(;t<=i;){const r=t+i>>1;if(e[r]===n)return!0;e[r]>n?i=r-1:t=r+1}return!1}function Hv(n){return{type:n}}Dx.register(rP,{error:[Jce,[yo],(n,[e])=>{throw new El(e.evaluate(n))}],typeof:[yo,[Xr],(n,[e])=>fl(Zu(e.evaluate(n)))],"to-rgba":[yf(Jn,4),[Qg],(n,[e])=>{const[t,i,r,o]=e.evaluate(n).rgb;return[t*255,i*255,r*255,o]}],rgb:[Qg,[Jn,Jn,Jn],zF],rgba:[Qg,[Jn,Jn,Jn,Jn],zF],has:{type:no,overloads:[[[yo],(n,[e])=>jF(e.evaluate(n),n.properties())],[[yo,_b],(n,[e,t])=>jF(e.evaluate(n),t.evaluate(n))]]},get:{type:Xr,overloads:[[[yo],(n,[e])=>_O(e.evaluate(n),n.properties())],[[yo,_b],(n,[e,t])=>_O(e.evaluate(n),t.evaluate(n))]]},"feature-state":[Xr,[yo],(n,[e])=>_O(e.evaluate(n),n.featureState||{})],properties:[_b,[],n=>n.properties()],"geometry-type":[yo,[],n=>n.geometryType()],id:[Xr,[],n=>n.id()],zoom:[Jn,[],n=>n.globals.zoom],"heatmap-density":[Jn,[],n=>n.globals.heatmapDensity||0],elevation:[Jn,[],n=>n.globals.elevation||0],"line-progress":[Jn,[],n=>n.globals.lineProgress||0],accumulated:[Xr,[],n=>n.globals.accumulated===void 0?null:n.globals.accumulated],"+":[Jn,Hv(Jn),(n,e)=>{let t=0;for(const i of e)t+=i.evaluate(n);return t}],"*":[Jn,Hv(Jn),(n,e)=>{let t=1;for(const i of e)t*=i.evaluate(n);return t}],"-":{type:Jn,overloads:[[[Jn,Jn],(n,[e,t])=>e.evaluate(n)-t.evaluate(n)],[[Jn],(n,[e])=>-e.evaluate(n)]]},"/":[Jn,[Jn,Jn],(n,[e,t])=>e.evaluate(n)/t.evaluate(n)],"%":[Jn,[Jn,Jn],(n,[e,t])=>e.evaluate(n)%t.evaluate(n)],ln2:[Jn,[],()=>Math.LN2],pi:[Jn,[],()=>Math.PI],e:[Jn,[],()=>Math.E],"^":[Jn,[Jn,Jn],(n,[e,t])=>Math.pow(e.evaluate(n),t.evaluate(n))],sqrt:[Jn,[Jn],(n,[e])=>Math.sqrt(e.evaluate(n))],log10:[Jn,[Jn],(n,[e])=>Math.log(e.evaluate(n))/Math.LN10],ln:[Jn,[Jn],(n,[e])=>Math.log(e.evaluate(n))],log2:[Jn,[Jn],(n,[e])=>Math.log(e.evaluate(n))/Math.LN2],sin:[Jn,[Jn],(n,[e])=>Math.sin(e.evaluate(n))],cos:[Jn,[Jn],(n,[e])=>Math.cos(e.evaluate(n))],tan:[Jn,[Jn],(n,[e])=>Math.tan(e.evaluate(n))],asin:[Jn,[Jn],(n,[e])=>Math.asin(e.evaluate(n))],acos:[Jn,[Jn],(n,[e])=>Math.acos(e.evaluate(n))],atan:[Jn,[Jn],(n,[e])=>Math.atan(e.evaluate(n))],min:[Jn,Hv(Jn),(n,e)=>Math.min(...e.map(t=>t.evaluate(n)))],max:[Jn,Hv(Jn),(n,e)=>Math.max(...e.map(t=>t.evaluate(n)))],abs:[Jn,[Jn],(n,[e])=>Math.abs(e.evaluate(n))],round:[Jn,[Jn],(n,[e])=>{const t=e.evaluate(n);return t<0?-Math.round(-t):Math.round(t)}],floor:[Jn,[Jn],(n,[e])=>Math.floor(e.evaluate(n))],ceil:[Jn,[Jn],(n,[e])=>Math.ceil(e.evaluate(n))],"filter-==":[no,[yo,Xr],(n,[e,t])=>n.properties()[e.value]===t.value],"filter-id-==":[no,[Xr],(n,[e])=>n.id()===e.value],"filter-type-==":[no,[yo],(n,[e])=>n.geometryType()===e.value],"filter-<":[no,[yo,Xr],(n,[e,t])=>{const i=n.properties()[e.value],r=t.value;return typeof i==typeof r&&i<r}],"filter-id-<":[no,[Xr],(n,[e])=>{const t=n.id(),i=e.value;return typeof t==typeof i&&t<i}],"filter->":[no,[yo,Xr],(n,[e,t])=>{const i=n.properties()[e.value],r=t.value;return typeof i==typeof r&&i>r}],"filter-id->":[no,[Xr],(n,[e])=>{const t=n.id(),i=e.value;return typeof t==typeof i&&t>i}],"filter-<=":[no,[yo,Xr],(n,[e,t])=>{const i=n.properties()[e.value],r=t.value;return typeof i==typeof r&&i<=r}],"filter-id-<=":[no,[Xr],(n,[e])=>{const t=n.id(),i=e.value;return typeof t==typeof i&&t<=i}],"filter->=":[no,[yo,Xr],(n,[e,t])=>{const i=n.properties()[e.value],r=t.value;return typeof i==typeof r&&i>=r}],"filter-id->=":[no,[Xr],(n,[e])=>{const t=n.id(),i=e.value;return typeof t==typeof i&&t>=i}],"filter-has":[no,[Xr],(n,[e])=>e.value in n.properties()],"filter-has-id":[no,[],n=>n.id()!==null&&n.id()!==void 0],"filter-type-in":[no,[yf(yo)],(n,[e])=>e.value.indexOf(n.geometryType())>=0],"filter-id-in":[no,[yf(Xr)],(n,[e])=>e.value.indexOf(n.id())>=0],"filter-in-small":[no,[yo,yf(Xr)],(n,[e,t])=>t.value.indexOf(n.properties()[e.value])>=0],"filter-in-large":[no,[yo,yf(Xr)],(n,[e,t])=>ghe(n.properties()[e.value],t.value,0,t.value.length-1)],all:{type:no,overloads:[[[no,no],(n,[e,t])=>e.evaluate(n)&&t.evaluate(n)],[Hv(no),(n,e)=>{for(const t of e)if(!t.evaluate(n))return!1;return!0}]]},any:{type:no,overloads:[[[no,no],(n,[e,t])=>e.evaluate(n)||t.evaluate(n)],[Hv(no),(n,e)=>{for(const t of e)if(t.evaluate(n))return!0;return!1}]]},"!":[no,[no],(n,[e])=>!e.evaluate(n)],"is-supported-script":[no,[yo],(n,[e])=>{const t=n.globals&&n.globals.isSupportedScript;return t?t(e.evaluate(n)):!0}],upcase:[yo,[yo],(n,[e])=>e.evaluate(n).toUpperCase()],downcase:[yo,[yo],(n,[e])=>e.evaluate(n).toLowerCase()],concat:[yo,Hv(Xr),(n,e)=>e.map(t=>l3(t.evaluate(n))).join("")],"resolved-locale":[yo,[uE],(n,[e])=>e.evaluate(n).resolvedLocale()]});function yhe(n){return Array.isArray(n)?`(${n.map(fl).join(", ")})`:`(${fl(n.type)}...)`}function jw(n){if(n instanceof JZ)return jw(n.boundExpression);if(n instanceof Dx&&n.name==="error")return!1;if(n instanceof cX)return!1;if(n instanceof XD)return!1;if(n instanceof nP)return!1;if(n instanceof iP)return!1;const e=n instanceof E_||n instanceof e1;let t=!0;return n.eachChild(i=>{e?t=t&&jw(i):t=t&&i instanceof Kw}),t?mE(n)&&gE(n,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"]):!1}function mE(n){if(n instanceof Dx){if(n.name==="get"&&n.args.length===1)return!1;if(n.name==="feature-state")return!1;if(n.name==="has"&&n.args.length===1)return!1;if(n.name==="properties"||n.name==="geometry-type"||n.name==="id")return!1;if(/^filter-/.test(n.name))return!1}if(n instanceof XD||n instanceof nP)return!1;let e=!0;return n.eachChild(t=>{e&&!mE(t)&&(e=!1)}),e}function z3(n){if(n instanceof Dx&&n.name==="feature-state")return!1;let e=!0;return n.eachChild(t=>{e&&!z3(t)&&(e=!1)}),e}function gE(n,e){if(n instanceof Dx&&e.indexOf(n.name)>=0)return!1;let t=!0;return n.eachChild(i=>{t&&!gE(i,e)&&(t=!1)}),t}function m9(n){return{result:"success",value:n}}function m_(n){return{result:"error",value:n}}function Nw(n){return n["property-type"]==="data-driven"||n["property-type"]==="cross-faded-data-driven"}function _X(n){return!!n.expression&&n.expression.parameters.indexOf("zoom")>-1}function oP(n){return!!n.expression&&n.expression.interpolated}function bo(n){return n instanceof Number?"number":n instanceof String?"string":n instanceof Boolean?"boolean":Array.isArray(n)?"array":n===null?"null":typeof n}function V4(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)&&Zu(n)===_b}function vhe(n){return n}function bhe(n){switch(n.type){case"color":return ma.parse;case"padding":return a0.parse;case"numberArray":return l0.parse;case"colorArray":return yp.parse;default:return null}}function Che(n){switch(n){case"exponential":return xX;case"interval":return xhe;case"categorical":return _he;case"identity":return Mhe;default:throw new Error(`Unknown function type "${n}"`)}}function sP(n,e){const t=n.stops&&typeof n.stops[0][0]=="object",i=t||n.property!==void 0,r=t||!i,o=n.type||(oP(e)?"exponential":"interval"),s=bhe(e);if(s&&(n=sx({},n),n.stops&&(n.stops=n.stops.map(m=>[m[0],s(m[1])])),n.default?n.default=s(n.default):n.default=s(e.default)),n.colorSpace&&!cAe(n.colorSpace))throw new Error(`Unknown color space: "${n.colorSpace}"`);const a=Che(o);let c,h;if(o==="categorical"){c=Object.create(null);for(const m of n.stops)c[m[0]]=m[1];h=typeof n.stops[0][0]}if(t){const m={},y=[];for(let T=0;T<n.stops.length;T++){const P=n.stops[T],F=P[0].zoom;m[F]===void 0&&(m[F]={zoom:F,type:n.type,property:n.property,default:n.default,stops:[]},y.push(F)),m[F].stops.push([P[0].value,P[1]])}const M=[];for(const T of y)M.push([m[T].zoom,sP(m[T],e)]);const x={name:"linear"};return{kind:"composite",interpolationType:x,interpolationFactor:i1.interpolationFactor.bind(void 0,x),zoomStops:M.map(T=>T[0]),evaluate({zoom:T},P){return xX({stops:M,base:n.base},e,T).evaluate(T,P)}}}else if(r){const m=o==="exponential"?{name:"exponential",base:n.base!==void 0?n.base:1}:null;return{kind:"camera",interpolationType:m,interpolationFactor:i1.interpolationFactor.bind(void 0,m),zoomStops:n.stops.map(y=>y[0]),evaluate:({zoom:y})=>a(n,e,y,c,h)}}else return{kind:"source",evaluate(m,y){const M=y&&y.properties?y.properties[n.property]:void 0;return M===void 0?H4(n.default,e.default):a(n,e,M,c,h)}}}function H4(n,e,t){if(n!==void 0)return n;if(e!==void 0)return e;if(t!==void 0)return t}function _he(n,e,t,i,r){const o=typeof t===r?i[t]:void 0;return H4(o,n.default,e.default)}function xhe(n,e,t){if(bo(t)!=="number")return H4(n.default,e.default);const i=n.stops.length;if(i===1||t<=n.stops[0][0])return n.stops[0][1];if(t>=n.stops[i-1][0])return n.stops[i-1][1];const r=fE(n.stops.map(o=>o[0]),t);return n.stops[r][1]}function xX(n,e,t){const i=n.base!==void 0?n.base:1;if(bo(t)!=="number")return H4(n.default,e.default);const r=n.stops.length;if(r===1||t<=n.stops[0][0])return n.stops[0][1];if(t>=n.stops[r-1][0])return n.stops[r-1][1];const o=fE(n.stops.map(m=>m[0]),t),s=whe(t,i,n.stops[o][0],n.stops[o+1][0]),a=n.stops[o][1],c=n.stops[o+1][1],h=MAe[e.type]||vhe;return typeof a.evaluate=="function"?{evaluate(...m){const y=a.evaluate.apply(void 0,m),M=c.evaluate.apply(void 0,m);if(!(y===void 0||M===void 0))return h(y,M,s,n.colorSpace)}}:h(a,c,s,n.colorSpace)}function Mhe(n,e,t){switch(e.type){case"color":t=ma.parse(t);break;case"formatted":t=Ix.fromString(t.toString());break;case"resolvedImage":t=Vb.fromString(t.toString());break;case"padding":t=a0.parse(t);break;case"colorArray":t=yp.parse(t);break;case"numberArray":t=l0.parse(t);break;default:bo(t)!==e.type&&(e.type!=="enum"||!e.values[t])&&(t=void 0)}return H4(t,n.default,e.default)}function whe(n,e,t,i){const r=i-t,o=n-t;return r===0?0:e===1?o/r:(Math.pow(e,o)-1)/(Math.pow(e,r)-1)}let MX=class{constructor(e,t,i){this.expression=e,this._warningHistory={},this._evaluator=new $Z,this._defaultValue=t?Bhe(t):null,this._enumValues=t&&t.type==="enum"?t.values:null,this._globalState=i}evaluateWithoutErrorHandling(e,t,i,r,o,s){return this._globalState&&(e=lx(e,this._globalState)),this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=i,this._evaluator.canonical=r,this._evaluator.availableImages=o||null,this._evaluator.formattedSection=s,this.expression.evaluate(this._evaluator)}evaluate(e,t,i,r,o,s){this._globalState&&(e=lx(e,this._globalState)),this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=i||null,this._evaluator.canonical=r,this._evaluator.availableImages=o||null,this._evaluator.formattedSection=s||null;try{const a=this.expression.evaluate(this._evaluator);if(a==null||typeof a=="number"&&a!==a)return this._defaultValue;if(this._enumValues&&!(a in this._enumValues))throw new El(`Expected value to be one of ${Object.keys(this._enumValues).map(c=>JSON.stringify(c)).join(", ")}, but found ${JSON.stringify(a)} instead.`);return a}catch(a){return this._warningHistory[a.message]||(this._warningHistory[a.message]=!0,typeof console<"u"&&console.warn(a.message)),this._defaultValue}}};function Z4(n){return Array.isArray(n)&&n.length>0&&typeof n[0]=="string"&&n[0]in rP}function aP(n,e,t){const i=new VZ(rP,jw,[],e?Ohe(e):void 0),r=i.parse(n,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return r?m9(new MX(r,e,t)):m_(i.errors)}let g9=class{constructor(e,t,i){this.kind=e,this._styleExpression=t,this.isStateDependent=e!=="constant"&&!z3(t.expression),this.globalStateRefs=uP(t.expression),this._globalState=i}evaluateWithoutErrorHandling(e,t,i,r,o,s){return this._globalState&&(e=lx(e,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(e,t,i,r,o,s)}evaluate(e,t,i,r,o,s){return this._globalState&&(e=lx(e,this._globalState)),this._styleExpression.evaluate(e,t,i,r,o,s)}},y9=class{constructor(e,t,i,r,o){this.kind=e,this.zoomStops=i,this._styleExpression=t,this.isStateDependent=e!=="camera"&&!z3(t.expression),this.globalStateRefs=uP(t.expression),this.interpolationType=r,this._globalState=o}evaluateWithoutErrorHandling(e,t,i,r,o,s){return this._globalState&&(e=lx(e,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(e,t,i,r,o,s)}evaluate(e,t,i,r,o,s){return this._globalState&&(e=lx(e,this._globalState)),this._styleExpression.evaluate(e,t,i,r,o,s)}interpolationFactor(e,t,i){return this.interpolationType?i1.interpolationFactor(this.interpolationType,e,t,i):0}};function She(n){return n._styleExpression!==void 0}function lP(n,e,t){const i=aP(n,e,t);if(i.result==="error")return i;const r=i.value.expression,o=mE(r);if(!o&&!Nw(e))return m_([new kg("","data expressions not supported")]);const s=gE(r,["zoom"]);if(!s&&!_X(e))return m_([new kg("","zoom expressions not supported")]);const a=ow(r);if(!a&&!s)return m_([new kg("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(a instanceof kg)return m_([a]);if(a instanceof i1&&!oP(e))return m_([new kg("",'"interpolate" expressions cannot be used with this property')]);if(!a)return m9(o?new g9("constant",i.value,t):new g9("source",i.value,t));const c=a instanceof i1?a.interpolation:void 0;return m9(o?new y9("camera",i.value,a.labels,c,t):new y9("composite",i.value,a.labels,c,t))}class yE{constructor(e,t){this._parameters=e,this._specification=t,sx(this,sP(this._parameters,this._specification))}static deserialize(e){return new yE(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function Ehe(n,e,t){if(V4(n))return new yE(n,e);if(Z4(n)){const i=lP(n,e,t);if(i.result==="error")throw new Error(i.value.map(r=>`${r.key}: ${r.message}`).join(", "));return i.value}else{let i=n;return e.type==="color"&&typeof n=="string"?i=ma.parse(n):e.type==="padding"&&(typeof n=="number"||Array.isArray(n))?i=a0.parse(n):e.type==="numberArray"&&(typeof n=="number"||Array.isArray(n))?i=l0.parse(n):e.type==="colorArray"&&(typeof n=="string"||Array.isArray(n))?i=yp.parse(n):e.type==="variableAnchorOffsetCollection"&&Array.isArray(n)?i=av.parse(n):e.type==="projectionDefinition"&&typeof n=="string"&&(i=kx.parse(n)),{globalStateRefs:new Set,_globalState:null,kind:"constant",evaluate:()=>i}}}function ow(n){let e=null;if(n instanceof ZZ)e=ow(n.result);else if(n instanceof aX){for(const t of n.args)if(e=ow(t),e)break}else(n instanceof oX||n instanceof i1)&&n.input instanceof Dx&&n.input.name==="zoom"&&(e=n);return e instanceof kg||n.eachChild(t=>{const i=ow(t);i instanceof kg?e=i:!e&&i?e=new kg("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&i&&e!==i&&(e=new kg("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}function uP(n,e=new Set){return n instanceof iP&&e.add(n.key),n.eachChild(t=>{uP(t,e)}),e}function Ohe(n){const e={color:Qg,string:yo,number:Jn,enum:yo,boolean:no,formatted:cE,padding:AE,numberArray:hE,colorArray:U3,projectionDefinition:lE,resolvedImage:Y4,variableAnchorOffsetCollection:dE};return n.type==="array"?yf(e[n.value]||Xr,n.length):e[n.type]}function Bhe(n){if(n.type==="color"&&V4(n.default))return new ma(0,0,0,0);switch(n.type){case"color":return ma.parse(n.default)||null;case"padding":return a0.parse(n.default)||null;case"numberArray":return l0.parse(n.default)||null;case"colorArray":return yp.parse(n.default)||null;case"variableAnchorOffsetCollection":return av.parse(n.default)||null;case"projectionDefinition":return kx.parse(n.default)||null;default:return n.default===void 0?null:n.default}}function lx(n,e){const{zoom:t,heatmapDensity:i,elevation:r,lineProgress:o,isSupportedScript:s,accumulated:a}=n??{};return{zoom:t,heatmapDensity:i,elevation:r,lineProgress:o,isSupportedScript:s,accumulated:a,globalState:e}}function vE(n){if(n===!0||n===!1)return!0;if(!Array.isArray(n)||n.length===0)return!1;switch(n[0]){case"has":return n.length>=2&&n[1]!=="$id"&&n[1]!=="$type";case"in":return n.length>=3&&(typeof n[1]!="string"||Array.isArray(n[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return n.length!==3||Array.isArray(n[1])||Array.isArray(n[2]);case"any":case"all":for(const e of n.slice(1))if(!vE(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}function u3(n,e={}){if(vE(n))return n;if(!n)return!0;const t=n,i=t[0];if(n.length<=1)return i!=="any";switch(i){case"==":case"!=":case"<":case">":case"<=":case">=":{const[,r,o]=n;return khe(r,o,i,e)}case"any":{const[,...r]=t;return["any",...r.map(s=>{const a={},c=u3(s,a),h=Ihe(a);return h===!0?c:["case",h,c,!1]})]}case"all":{const[,...r]=t,o=r.map(s=>u3(s,e));return o.length>1?["all",...o]:o[0]}case"none":{const[,...r]=t;return["!",u3(["any",...r],{})]}case"in":{const[,r,...o]=t;return NF(r,o)}case"!in":{const[,r,...o]=t;return NF(r,o,!0)}case"has":return GF(t[1]);case"!has":return["!",GF(t[1])];default:return!0}}function Ihe(n){const e=[];for(const t in n){const i=t==="$id"?["id"]:["get",t];e.push(["==",["typeof",i],n[t]])}return e.length===0?!0:e.length===1?e[0]:["all",...e]}function khe(n,e,t,i){let r;if(n==="$type")return[t,["geometry-type"],e];if(n==="$id"?r=["id"]:r=["get",n],i&&e!==null){const o=typeof e;i[n]=o}return t==="=="&&n!=="$id"&&e===null?["all",["has",n],["==",r,null]]:t==="!="&&n!=="$id"&&e===null?["any",["!",["has",n]],["!=",r,null]]:[t,r,e]}function NF(n,e,t=!1){if(e.length===0)return t;let i;n==="$type"?i=["geometry-type"]:n==="$id"?i=["id"]:i=["get",n];let r=!0;const o=typeof e[0];for(const s of e)if(typeof s!==o){r=!1;break}if(r&&(o==="string"||o==="number")){const s=e.sort().filter((a,c)=>c===0||e[c-1]!==a);return["match",i,s,!t,t]}return t?["all",...e.map(s=>["!=",i,s])]:["any",...e.map(s=>["==",i,s])]}function GF(n){return n==="$type"?!0:n==="$id"?["!=",["id"],null]:["has",n]}function j3(n){return typeof n=="object"?["literal",n]:n}function wX(n,e){let t=n.stops;if(!t)return The(n,e);const i=t&&typeof t[0][0]=="object",r=i||n.property!==void 0,o=i||!r;return t=t.map(s=>!r&&e.tokens&&typeof s[1]=="string"?[s[0],SX(s[1])]:[s[0],j3(s[1])]),i?Rhe(n,e,t):o?Phe(n,e,t):v9(n,e,t)}function The(n,e){const t=["get",n.property];if(n.default===void 0)return e.type==="string"?["string",t]:t;if(e.type==="enum")return["match",t,Object.keys(e.values),t,n.default];{const i=[e.type==="color"?"to-color":e.type,t,j3(n.default)];return e.type==="array"&&i.splice(1,0,e.value,e.length||null),i}}function cP(n){switch(n.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function Rhe(n,e,t){const i={},r={},o=[];for(let a=0;a<t.length;a++){const c=t[a],h=c[0].zoom;i[h]===void 0&&(i[h]={zoom:h,type:n.type,property:n.property,default:n.default},r[h]=[],o.push(h)),r[h].push([c[0].value,c[1]])}if(hP({},e)==="exponential"){const a=[cP(n),["linear"],["zoom"]];for(const c of o){const h=v9(i[c],e,r[c]);L_(a,c,h,!1)}return a}else{const a=["step",["zoom"]];for(const c of o){const h=v9(i[c],e,r[c]);L_(a,c,h,!0)}return AP(a),a}}function Dhe(n,e){if(n!==void 0)return n;if(e!==void 0)return e}function WF(n,e){const t=j3(Dhe(n.default,e.default));return t===void 0&&e.type==="resolvedImage"?"":t}function v9(n,e,t){const i=hP(n,e),r=["get",n.property];if(i==="categorical"&&typeof t[0][0]=="boolean"){const o=["case"];for(const s of t)o.push(["==",r,s[0]],s[1]);return o.push(WF(n,e)),o}else if(i==="categorical"){const o=["match",r];for(const s of t)L_(o,s[0],s[1],!1);return o.push(WF(n,e)),o}else if(i==="interval"){const o=["step",["number",r]];for(const s of t)L_(o,s[0],s[1],!0);return AP(o),n.default===void 0?o:["case",["==",["typeof",r],"number"],o,j3(n.default)]}else if(i==="exponential"){const o=n.base!==void 0?n.base:1,s=[cP(n),o===1?["linear"]:["exponential",o],["number",r]];for(const a of t)L_(s,a[0],a[1],!1);return n.default===void 0?s:["case",["==",["typeof",r],"number"],s,j3(n.default)]}else throw new Error(`Unknown property function type ${i}`)}function Phe(n,e,t,i=["zoom"]){const r=hP(n,e);let o,s=!1;if(r==="interval")o=["step",i],s=!0;else if(r==="exponential"){const a=n.base!==void 0?n.base:1;o=[cP(n),a===1?["linear"]:["exponential",a],i]}else throw new Error(`Unknown zoom function type "${r}"`);for(const a of t)L_(o,a[0],a[1],s);return AP(o),o}function AP(n){n[0]==="step"&&n.length===3&&(n.push(0),n.push(n[3]))}function L_(n,e,t,i){n.length>3&&e===n[n.length-2]||(i&&n.length===2||n.push(e),n.push(t))}function hP(n,e){return n.type?n.type:e.expression.interpolated?"exponential":"interval"}function SX(n){const e=["concat"],t=/{([^{}]+)}/g;let i=0;for(let r=t.exec(n);r!==null;r=t.exec(n)){const o=n.slice(i,t.lastIndex-r[0].length);i=t.lastIndex,o.length>0&&e.push(o),e.push(["get",r[1]])}if(e.length===1)return n;if(i<n.length)e.push(n.slice(i));else if(e.length===2)return["to-string",e[1]];return e}function Uhe(n){for(let e=0;e<is.layout.length;e++)for(const t in is[is.layout[e]])if(t===n)return is[is.layout[e]][t];for(let e=0;e<is.paint.length;e++)for(const t in is[is.paint[e]])if(t===n)return is[is.paint[e]][t];return null}function Khe(n,e){for(const t in n.sources)e(n.sources[t])}function c3(n,e){for(const t of n.layers)e(t)}function dP(n,e,t){function i(r,o){const s=r[o];s&&Object.keys(s).forEach(a=>{t({path:[r.id,o,a],key:a,value:s[a],reference:Uhe(a),set(c){s[a]=c}})})}c3(n,r=>{e.paint&&i(r,"paint"),e.layout&&i(r,"layout")})}function EX(n){const e=n.key,t=n.value;return t?[new Yn(e,t,"constants have been deprecated as of v8")]:[]}function Xl(n){return n instanceof Number||n instanceof String||n instanceof Boolean?n.valueOf():n}function Ub(n){if(Array.isArray(n))return n.map(Ub);if(n instanceof Object&&!(n instanceof Number||n instanceof String||n instanceof Boolean)){const e={};for(const t in n)e[t]=Ub(n[t]);return e}return Xl(n)}function dp(n){const e=n.key,t=n.value,i=n.valueSpec||{},r=n.objectElementValidators||{},o=n.style,s=n.styleSpec,a=n.validateSpec;let c=[];const h=bo(t);if(h!=="object")return[new Yn(e,t,`object expected, ${h} found`)];for(const m in t){const y=m.split(".")[0],M=a3(i,y)||i["*"];let x;if(a3(r,y))x=r[y];else if(a3(i,y))x=a;else if(r["*"])x=r["*"];else if(i["*"])x=a;else{c.push(new Yn(e,t[m],`unknown property "${m}"`));continue}c=c.concat(x({key:(e&&`${e}.`)+m,value:t[m],valueSpec:M,style:o,styleSpec:s,object:t,objectKey:m,validateSpec:a},t))}for(const m in i)r[m]||i[m].required&&i[m].default===void 0&&t[m]===void 0&&c.push(new Yn(e,t,`missing required property "${m}"`));return c}function fP(n){const e=n.value,t=n.valueSpec,i=n.validateSpec,r=n.style,o=n.styleSpec,s=n.key,a=n.arrayElementValidator||i;if(bo(e)!=="array")return[new Yn(s,e,`array expected, ${bo(e)} found`)];if(t.length&&e.length!==t.length)return[new Yn(s,e,`array length ${t.length} expected, length ${e.length} found`)];if(t["min-length"]&&e.length<t["min-length"])return[new Yn(s,e,`array length at least ${t["min-length"]} expected, length ${e.length} found`)];let c={type:t.value,values:t.values};o.$version<7&&(c.function=t.function),bo(t.value)==="object"&&(c=t.value);let h=[];for(let m=0;m<e.length;m++)h=h.concat(a({array:e,arrayIndex:m,value:e[m],valueSpec:c,validateSpec:n.validateSpec,style:r,styleSpec:o,key:`${s}[${m}]`}));return h}function bE(n){const e=n.key,t=n.value,i=n.valueSpec;let r=bo(t);return r==="number"&&t!==t&&(r="NaN"),r!=="number"?[new Yn(e,t,`number expected, ${r} found`)]:"minimum"in i&&t<i.minimum?[new Yn(e,t,`${t} is less than the minimum value ${i.minimum}`)]:"maximum"in i&&t>i.maximum?[new Yn(e,t,`${t} is greater than the maximum value ${i.maximum}`)]:[]}function OX(n){const e=n.valueSpec,t=Xl(n.value.type);let i,r={},o,s;const a=t!=="categorical"&&n.value.property===void 0,c=!a,h=bo(n.value.stops)==="array"&&bo(n.value.stops[0])==="array"&&bo(n.value.stops[0][0])==="object",m=dp({key:n.key,value:n.value,valueSpec:n.styleSpec.function,validateSpec:n.validateSpec,style:n.style,styleSpec:n.styleSpec,objectElementValidators:{stops:y,default:T}});return t==="identity"&&a&&m.push(new Yn(n.key,n.value,'missing required property "property"')),t!=="identity"&&!n.value.stops&&m.push(new Yn(n.key,n.value,'missing required property "stops"')),t==="exponential"&&n.valueSpec.expression&&!oP(n.valueSpec)&&m.push(new Yn(n.key,n.value,"exponential functions not supported")),n.styleSpec.$version>=8&&(c&&!Nw(n.valueSpec)?m.push(new Yn(n.key,n.value,"property functions not supported")):a&&!_X(n.valueSpec)&&m.push(new Yn(n.key,n.value,"zoom functions not supported"))),(t==="categorical"||h)&&n.value.property===void 0&&m.push(new Yn(n.key,n.value,'"property" property is required')),m;function y(P){if(t==="identity")return[new Yn(P.key,P.value,'identity function may not have a "stops" property')];let F=[];const j=P.value;return F=F.concat(fP({key:P.key,value:j,valueSpec:P.valueSpec,validateSpec:P.validateSpec,style:P.style,styleSpec:P.styleSpec,arrayElementValidator:M})),bo(j)==="array"&&j.length===0&&F.push(new Yn(P.key,j,"array must have at least one stop")),F}function M(P){let F=[];const j=P.value,q=P.key;if(bo(j)!=="array")return[new Yn(q,j,`array expected, ${bo(j)} found`)];if(j.length!==2)return[new Yn(q,j,`array length 2 expected, length ${j.length} found`)];if(h){if(bo(j[0])!=="object")return[new Yn(q,j,`object expected, ${bo(j[0])} found`)];if(j[0].zoom===void 0)return[new Yn(q,j,"object stop key must have zoom")];if(j[0].value===void 0)return[new Yn(q,j,"object stop key must have value")];if(s&&s>Xl(j[0].zoom))return[new Yn(q,j[0].zoom,"stop zoom values must appear in ascending order")];Xl(j[0].zoom)!==s&&(s=Xl(j[0].zoom),o=void 0,r={}),F=F.concat(dp({key:`${q}[0]`,value:j[0],valueSpec:{zoom:{}},validateSpec:P.validateSpec,style:P.style,styleSpec:P.styleSpec,objectElementValidators:{zoom:bE,value:x}}))}else F=F.concat(x({key:`${q}[0]`,value:j[0],validateSpec:P.validateSpec,style:P.style,styleSpec:P.styleSpec},j));return Z4(Ub(j[1]))?F.concat([new Yn(`${q}[1]`,j[1],"expressions are not allowed in function stops.")]):F.concat(P.validateSpec({key:`${q}[1]`,value:j[1],valueSpec:e,validateSpec:P.validateSpec,style:P.style,styleSpec:P.styleSpec}))}function x(P,F){const j=bo(P.value),q=Xl(P.value),V=P.value!==null?P.value:F;if(!i)i=j;else if(j!==i)return[new Yn(P.key,V,`${j} stop domain type must match previous stop domain type ${i}`)];if(j!=="number"&&j!=="string"&&j!=="boolean")return[new Yn(P.key,V,"stop domain value must be a number, string, or boolean")];if(j!=="number"&&t!=="categorical"){let H=`number expected, ${j} found`;return Nw(e)&&t===void 0&&(H+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Yn(P.key,V,H)]}return t==="categorical"&&j==="number"&&(!isFinite(q)||Math.floor(q)!==q)?[new Yn(P.key,V,`integer expected, found ${q}`)]:t!=="categorical"&&j==="number"&&o!==void 0&&q<o?[new Yn(P.key,V,"stop domain values must appear in ascending order")]:(o=q,t==="categorical"&&q in r?[new Yn(P.key,V,"stop domain values must be unique")]:(r[q]=!0,[]))}function T(P){return P.validateSpec({key:P.key,value:P.value,valueSpec:e,validateSpec:P.validateSpec,style:P.style,styleSpec:P.styleSpec})}}function ux(n){const e=(n.expressionContext==="property"?lP:aP)(Ub(n.value),n.valueSpec);if(e.result==="error")return e.value.map(i=>new Yn(`${n.key}${i.key}`,n.value,i.message));const t=e.value.expression||e.value._styleExpression.expression;if(n.expressionContext==="property"&&n.propertyKey==="text-font"&&!t.outputDefined())return[new Yn(n.key,n.value,`Invalid data expression for "${n.propertyKey}". Output values must be contained as literals within the expression.`)];if(n.expressionContext==="property"&&n.propertyType==="layout"&&!z3(t))return[new Yn(n.key,n.value,'"feature-state" data expressions are not supported with layout properties.')];if(n.expressionContext==="filter"&&!z3(t))return[new Yn(n.key,n.value,'"feature-state" data expressions are not supported with filters.')];if(n.expressionContext&&n.expressionContext.indexOf("cluster")===0){if(!gE(t,["zoom","feature-state"]))return[new Yn(n.key,n.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(n.expressionContext==="cluster-initial"&&!mE(t))return[new Yn(n.key,n.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Lhe(n){const e=n.value,t=n.key,i=bo(e);return i!=="boolean"?[new Yn(t,e,`boolean expected, ${i} found`)]:[]}function b9(n){const e=n.key,t=n.value,i=bo(t);return i!=="string"?[new Yn(e,t,`color expected, ${i} found`)]:ma.parse(String(t))?[]:[new Yn(e,t,`color expected, "${t}" found`)]}function N3(n){const e=n.key,t=n.value,i=n.valueSpec,r=[];return Array.isArray(i.values)?i.values.indexOf(Xl(t))===-1&&r.push(new Yn(e,t,`expected one of [${i.values.join(", ")}], ${JSON.stringify(t)} found`)):Object.keys(i.values).indexOf(Xl(t))===-1&&r.push(new Yn(e,t,`expected one of [${Object.keys(i.values).join(", ")}], ${JSON.stringify(t)} found`)),r}function pP(n){return vE(Ub(n.value))?ux(sx({},n,{expressionContext:"filter",valueSpec:{value:"boolean"}})):BX(n)}function BX(n){const e=n.value,t=n.key;if(bo(e)!=="array")return[new Yn(t,e,`array expected, ${bo(e)} found`)];const i=n.styleSpec;let r,o=[];if(e.length<1)return[new Yn(t,e,"filter array must have at least 1 element")];switch(o=o.concat(N3({key:`${t}[0]`,value:e[0],valueSpec:i.filter_operator,style:n.style,styleSpec:n.styleSpec})),Xl(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&Xl(e[1])==="$type"&&o.push(new Yn(t,e,`"$type" cannot be use with operator "${e[0]}"`));case"==":case"!=":e.length!==3&&o.push(new Yn(t,e,`filter array for operator "${e[0]}" must have 3 elements`));case"in":case"!in":e.length>=2&&(r=bo(e[1]),r!=="string"&&o.push(new Yn(`${t}[1]`,e[1],`string expected, ${r} found`)));for(let s=2;s<e.length;s++)r=bo(e[s]),Xl(e[1])==="$type"?o=o.concat(N3({key:`${t}[${s}]`,value:e[s],valueSpec:i.geometry_type,style:n.style,styleSpec:n.styleSpec})):r!=="string"&&r!=="number"&&r!=="boolean"&&o.push(new Yn(`${t}[${s}]`,e[s],`string, number, or boolean expected, ${r} found`));break;case"any":case"all":case"none":for(let s=1;s<e.length;s++)o=o.concat(BX({key:`${t}[${s}]`,value:e[s],style:n.style,styleSpec:n.styleSpec}));break;case"has":case"!has":r=bo(e[1]),e.length!==2?o.push(new Yn(t,e,`filter array for "${e[0]}" operator must have 2 elements`)):r!=="string"&&o.push(new Yn(`${t}[1]`,e[1],`string expected, ${r} found`));break}return o}function IX(n,e){const t=n.key,i=n.validateSpec,r=n.style,o=n.styleSpec,s=n.value,a=n.objectKey,c=o[`${e}_${n.layerType}`];if(!c)return[];const h=a.match(/^(.*)-transition$/);if(e==="paint"&&h&&c[h[1]]&&c[h[1]].transition)return i({key:t,value:s,valueSpec:o.transition,style:r,styleSpec:o});const m=n.valueSpec||c[a];if(!m)return[new Yn(t,s,`unknown property "${a}"`)];let y;if(bo(s)==="string"&&Nw(m)&&!m.tokens&&(y=/^{([^}]+)}$/.exec(s)))return[new Yn(t,s,`"${a}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(y[1])} }\`.`)];const M=[];return n.layerType==="symbol"&&(a==="text-field"&&r&&!r.glyphs&&M.push(new Yn(t,s,'use of "text-field" requires a style "glyphs" property')),a==="text-font"&&V4(Ub(s))&&Xl(s.type)==="identity"&&M.push(new Yn(t,s,'"text-font" does not support identity functions'))),M.concat(i({key:n.key,value:s,valueSpec:m,style:r,styleSpec:o,expressionContext:"property",propertyType:e,propertyKey:a}))}function kX(n){return IX(n,"paint")}function TX(n){return IX(n,"layout")}function RX(n){let e=[];const t=n.value,i=n.key,r=n.style,o=n.styleSpec;if(bo(t)!=="object")return[new Yn(i,t,`object expected, ${bo(t)} found`)];!t.type&&!t.ref&&e.push(new Yn(i,t,'either "type" or "ref" is required'));let s=Xl(t.type);const a=Xl(t.ref);if(t.id){const c=Xl(t.id);for(let h=0;h<n.arrayIndex;h++){const m=r.layers[h];Xl(m.id)===c&&e.push(new Yn(i,t.id,`duplicate layer id "${t.id}", previously used at line ${m.id.__line__}`))}}if("ref"in t){["type","source","source-layer","filter","layout"].forEach(h=>{h in t&&e.push(new Yn(i,t[h],`"${h}" is prohibited for ref layers`))});let c;r.layers.forEach(h=>{Xl(h.id)===a&&(c=h)}),c?c.ref?e.push(new Yn(i,t.ref,"ref cannot reference another ref layer")):s=Xl(c.type):e.push(new Yn(i,t.ref,`ref layer "${a}" not found`))}else if(s!=="background")if(!t.source)e.push(new Yn(i,t,'missing required property "source"'));else{const c=r.sources&&r.sources[t.source],h=c&&Xl(c.type);c?h==="vector"&&s==="raster"?e.push(new Yn(i,t.source,`layer "${t.id}" requires a raster source`)):h!=="raster-dem"&&s==="hillshade"?e.push(new Yn(i,t.source,`layer "${t.id}" requires a raster-dem source`)):h!=="raster-dem"&&s==="color-relief"?e.push(new Yn(i,t.source,`layer "${t.id}" requires a raster-dem source`)):h==="raster"&&s!=="raster"?e.push(new Yn(i,t.source,`layer "${t.id}" requires a vector source`)):h==="vector"&&!t["source-layer"]?e.push(new Yn(i,t,`layer "${t.id}" must specify a "source-layer"`)):h==="raster-dem"&&s!=="hillshade"&&s!=="color-relief"?e.push(new Yn(i,t.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):s==="line"&&t.paint&&t.paint["line-gradient"]&&(h!=="geojson"||!c.lineMetrics)&&e.push(new Yn(i,t,`layer "${t.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):e.push(new Yn(i,t.source,`source "${t.source}" not found`))}return e=e.concat(dp({key:i,value:t,valueSpec:o.layer,style:n.style,styleSpec:n.styleSpec,validateSpec:n.validateSpec,objectElementValidators:{"*"(){return[]},type(){return n.validateSpec({key:`${i}.type`,value:t.type,valueSpec:o.layer.type,style:n.style,styleSpec:n.styleSpec,validateSpec:n.validateSpec,object:t,objectKey:"type"})},filter:pP,layout(c){return dp({layer:t,key:c.key,value:c.value,style:c.style,styleSpec:c.styleSpec,validateSpec:c.validateSpec,objectElementValidators:{"*"(h){return TX(sx({layerType:s},h))}}})},paint(c){return dp({layer:t,key:c.key,value:c.value,style:c.style,styleSpec:c.styleSpec,validateSpec:c.validateSpec,objectElementValidators:{"*"(h){return kX(sx({layerType:s},h))}}})}}})),e}function Kb(n){const e=n.value,t=n.key,i=bo(e);return i!=="string"?[new Yn(t,e,`string expected, ${i} found`)]:[]}function Fhe(n){var e;const t=(e=n.sourceName)!==null&&e!==void 0?e:"",i=n.value,r=n.styleSpec,o=r.source_raster_dem,s=n.style;let a=[];const c=bo(i);if(i===void 0)return a;if(c!=="object")return a.push(new Yn("source_raster_dem",i,`object expected, ${c} found`)),a;const m=Xl(i.encoding)==="custom",y=["redFactor","greenFactor","blueFactor","baseShift"],M=n.value.encoding?`"${n.value.encoding}"`:"Default";for(const x in i)!m&&y.includes(x)?a.push(new Yn(x,i[x],`In "${t}": "${x}" is only valid when "encoding" is set to "custom". ${M} encoding found`)):o[x]?a=a.concat(n.validateSpec({key:x,value:i[x],valueSpec:o[x],validateSpec:n.validateSpec,style:s,styleSpec:r})):a.push(new Yn(x,i[x],`unknown property "${x}"`));return a}const QF={promoteId:zhe};function DX(n){const e=n.value,t=n.key,i=n.styleSpec,r=n.style,o=n.validateSpec;if(!e.type)return[new Yn(t,e,'"type" is required')];const s=Xl(e.type);let a;switch(s){case"vector":case"raster":return a=dp({key:t,value:e,valueSpec:i[`source_${s.replace("-","_")}`],style:n.style,styleSpec:i,objectElementValidators:QF,validateSpec:o}),a;case"raster-dem":return a=Fhe({sourceName:t,value:e,style:n.style,styleSpec:i,validateSpec:o}),a;case"geojson":if(a=dp({key:t,value:e,valueSpec:i.source_geojson,style:r,styleSpec:i,validateSpec:o,objectElementValidators:QF}),e.cluster)for(const c in e.clusterProperties){const[h,m]=e.clusterProperties[c],y=typeof h=="string"?[h,["accumulated"],["get",c]]:h;a.push(...ux({key:`${t}.${c}.map`,value:m,expressionContext:"cluster-map"})),a.push(...ux({key:`${t}.${c}.reduce`,value:y,expressionContext:"cluster-reduce"}))}return a;case"video":return dp({key:t,value:e,valueSpec:i.source_video,style:r,validateSpec:o,styleSpec:i});case"image":return dp({key:t,value:e,valueSpec:i.source_image,style:r,validateSpec:o,styleSpec:i});case"canvas":return[new Yn(t,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return N3({key:`${t}.type`,value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function zhe({key:n,value:e}){if(bo(e)==="string")return Kb({key:n,value:e});{const t=[];for(const i in e)t.push(...Kb({key:`${n}.${i}`,value:e[i]}));return t}}function PX(n){const e=n.value,t=n.styleSpec,i=t.light,r=n.style;let o=[];const s=bo(e);if(e===void 0)return o;if(s!=="object")return o=o.concat([new Yn("light",e,`object expected, ${s} found`)]),o;for(const a in e){const c=a.match(/^(.*)-transition$/);c&&i[c[1]]&&i[c[1]].transition?o=o.concat(n.validateSpec({key:a,value:e[a],valueSpec:t.transition,validateSpec:n.validateSpec,style:r,styleSpec:t})):i[a]?o=o.concat(n.validateSpec({key:a,value:e[a],valueSpec:i[a],validateSpec:n.validateSpec,style:r,styleSpec:t})):o=o.concat([new Yn(a,e[a],`unknown property "${a}"`)])}return o}function UX(n){const e=n.value,t=n.styleSpec,i=t.sky,r=n.style,o=bo(e);if(e===void 0)return[];if(o!=="object")return[new Yn("sky",e,`object expected, ${o} found`)];let s=[];for(const a in e)i[a]?s=s.concat(n.validateSpec({key:a,value:e[a],valueSpec:i[a],style:r,styleSpec:t})):s=s.concat([new Yn(a,e[a],`unknown property "${a}"`)]);return s}function KX(n){const e=n.value,t=n.styleSpec,i=t.terrain,r=n.style;let o=[];const s=bo(e);if(e===void 0)return o;if(s!=="object")return o=o.concat([new Yn("terrain",e,`object expected, ${s} found`)]),o;for(const a in e)i[a]?o=o.concat(n.validateSpec({key:a,value:e[a],valueSpec:i[a],validateSpec:n.validateSpec,style:r,styleSpec:t})):o=o.concat([new Yn(a,e[a],`unknown property "${a}"`)]);return o}function jhe(n){return Kb(n).length===0?[]:ux(n)}function Nhe(n){return Kb(n).length===0?[]:ux(n)}function Ghe(n){const e=n.key,t=n.value;if(bo(t)==="array"){if(t.length<1||t.length>4)return[new Yn(e,t,`padding requires 1 to 4 values; ${t.length} values found`)];const r={type:"number"};let o=[];for(let s=0;s<t.length;s++)o=o.concat(n.validateSpec({key:`${e}[${s}]`,value:t[s],validateSpec:n.validateSpec,valueSpec:r}));return o}else return bE({key:e,value:t,valueSpec:{}})}function Whe(n){const e=n.key,t=n.value;if(bo(t)==="array"){const r={type:"number"};if(t.length<1)return[new Yn(e,t,"array length at least 1 expected, length 0 found")];let o=[];for(let s=0;s<t.length;s++)o=o.concat(n.validateSpec({key:`${e}[${s}]`,value:t[s],validateSpec:n.validateSpec,valueSpec:r}));return o}else return bE({key:e,value:t,valueSpec:{}})}function Qhe(n){const e=n.key,t=n.value;if(bo(t)==="array"){if(t.length<1)return[new Yn(e,t,"array length at least 1 expected, length 0 found")];let r=[];for(let o=0;o<t.length;o++)r=r.concat(b9({key:`${e}[${o}]`,value:t[o]}));return r}else return b9({key:e,value:t})}function qhe(n){const e=n.key,t=n.value,i=bo(t),r=n.styleSpec;if(i!=="array"||t.length<1||t.length%2!==0)return[new Yn(e,t,"variableAnchorOffsetCollection requires a non-empty array of even length")];let o=[];for(let s=0;s<t.length;s+=2)o=o.concat(N3({key:`${e}[${s}]`,value:t[s],valueSpec:r.layout_symbol["text-anchor"]})),o=o.concat(fP({key:`${e}[${s+1}]`,value:t[s+1],valueSpec:{length:2,value:"number"},validateSpec:n.validateSpec,style:n.style,styleSpec:r}));return o}function LX(n){let e=[];const t=n.value,i=n.key;if(Array.isArray(t)){const r=[],o=[];for(const s in t){t[s].id&&r.includes(t[s].id)&&e.push(new Yn(i,t,`all the sprites' ids must be unique, but ${t[s].id} is duplicated`)),r.push(t[s].id),t[s].url&&o.includes(t[s].url)&&e.push(new Yn(i,t,`all the sprites' URLs must be unique, but ${t[s].url} is duplicated`)),o.push(t[s].url);const a={id:{type:"string",required:!0},url:{type:"string",required:!0}};e=e.concat(dp({key:`${i}[${s}]`,value:t[s],valueSpec:a,validateSpec:n.validateSpec}))}return e}else return Kb({key:i,value:t})}function Yhe(n){const e=n.value,t=n.styleSpec,i=t.projection,r=n.style,o=bo(e);if(e===void 0)return[];if(o!=="object")return[new Yn("projection",e,`object expected, ${o} found`)];let s=[];for(const a in e)i[a]?s=s.concat(n.validateSpec({key:a,value:e[a],valueSpec:i[a],style:r,styleSpec:t})):s=s.concat([new Yn(a,e[a],`unknown property "${a}"`)]);return s}function $he(n){const e=n.key;let t=n.value;t=t instanceof String?t.valueOf():t;const i=bo(t);return i==="array"&&!Hhe(t)&&!Vhe(t)?[new Yn(e,t,`projection expected, invalid array ${JSON.stringify(t)} found`)]:["array","string"].includes(i)?[]:[new Yn(e,t,`projection expected, invalid type "${i}" found`)]}function Vhe(n){return!!["interpolate","step","literal"].includes(n[0])}function Hhe(n){return Array.isArray(n)&&n.length===3&&typeof n[0]=="string"&&typeof n[1]=="string"&&typeof n[2]=="number"}function Zhe(n){return!!n&&n.constructor===Object}function FX(n){return Zhe(n.value)?[]:[new Yn(n.key,n.value,`object expected, ${bo(n.value)} found`)]}const qF={"*"(){return[]},array:fP,boolean:Lhe,number:bE,color:b9,constants:EX,enum:N3,filter:pP,function:OX,layer:RX,object:dp,source:DX,light:PX,sky:UX,terrain:KX,projection:Yhe,projectionDefinition:$he,string:Kb,formatted:jhe,resolvedImage:Nhe,padding:Ghe,numberArray:Whe,colorArray:Qhe,variableAnchorOffsetCollection:qhe,sprite:LX,state:FX};function Gw(n){const e=n.value,t=n.valueSpec,i=n.styleSpec;return n.validateSpec=Gw,t.expression&&V4(Xl(e))?OX(n):t.expression&&Z4(Ub(e))?ux(n):t.type&&qF[t.type]?qF[t.type](n):dp(sx({},n,{valueSpec:t.type?i[t.type]:t}))}function zX(n){const e=n.value,t=n.key,i=Kb(n);return i.length||(e.indexOf("{fontstack}")===-1&&i.push(new Yn(t,e,'"glyphs" url must include a "{fontstack}" token')),e.indexOf("{range}")===-1&&i.push(new Yn(t,e,'"glyphs" url must include a "{range}" token'))),i}function Bd(n,e=is){let t=[];return t=t.concat(Gw({key:"",value:n,valueSpec:e.$root,styleSpec:e,style:n,validateSpec:Gw,objectElementValidators:{glyphs:zX,"*"(){return[]}}})),n.constants&&(t=t.concat(EX({key:"constants",value:n.constants}))),jX(t)}Bd.source=km(Im(DX));Bd.sprite=km(Im(LX));Bd.glyphs=km(Im(zX));Bd.light=km(Im(PX));Bd.sky=km(Im(UX));Bd.terrain=km(Im(KX));Bd.state=km(Im(FX));Bd.layer=km(Im(RX));Bd.filter=km(Im(pP));Bd.paintProperty=km(Im(kX));Bd.layoutProperty=km(Im(TX));function Im(n){return function(e){return n(Object.assign({},e,{validateSpec:Gw}))}}function jX(n){return[].concat(n).sort((e,t)=>e.line-t.line)}function km(n){return function(...e){return jX(n.apply(this,e))}}const Xhe=/("(?:[^\\"]|\\.)*")|[:,]/g;function Jhe(n,e={}){const t=JSON.stringify([1],void 0,e.indent===void 0?2:e.indent).slice(2,-3),i=t===""?1/0:e.maxLength===void 0?80:e.maxLength;let{replacer:r}=e;return(function o(s,a,c){s&&typeof s.toJSON=="function"&&(s=s.toJSON());const h=JSON.stringify(s,r);if(h===void 0)return h;const m=i-a.length-c;if(h.length<=m){const y=h.replace(Xhe,(M,x)=>x||`${M} `);if(y.length<=m)return y}if(r!=null&&(s=JSON.parse(h),r=void 0),typeof s=="object"&&s!==null){const y=a+t,M=[];let x=0,T,P;if(Array.isArray(s)){T="[",P="]";const{length:F}=s;for(;x<F;x++)M.push(o(s[x],y,x===F-1?0:1)||"null")}else{T="{",P="}";const F=Object.keys(s),{length:j}=F;for(;x<j;x++){const q=F[x],V=`${JSON.stringify(q)}: `,H=o(s[q],y,V.length+(x===j-1?0:1));H!==void 0&&M.push(V+H)}}if(M.length>0)return[T,t+M.join(`,
${y}`),P].join(`
${a}`)}return h})(n,"",0)}function YF(n,e){const t={};for(const i in e)n[i]!==void 0&&(t[i]=n[i]);for(const i in n)t[i]===void 0&&(t[i]=n[i]);return t}function ede(n,e=2){return n=YF(n,is.$root),n.layers&&(n.layers=n.layers.map(t=>YF(t,is.layer))),Jhe(n,{indent:e})}function xO(n,e){for(const t in n)t.indexOf("layout")===0&&e(n[t],t)}function $F(n,e){for(const t in n)t.indexOf("paint")===0&&e(n[t],t)}function C9(n,e){return typeof e=="string"&&e[0]==="@"?C9(n,n.constants[e]):e}function tde(n){return Array.isArray(n.stops)}function c2(n,e,t){n[t]=n[e],delete n[e]}function nde(n){n.version=8,Khe(n,r=>{r.type==="video"&&r.url!==void 0&&c2(r,"url","urls"),r.type==="video"&&r.coordinates.forEach(o=>o.reverse())}),c3(n,r=>{xO(r,o=>{o["symbol-min-distance"]!==void 0&&c2(o,"symbol-min-distance","symbol-spacing")}),$F(r,o=>{o["background-image"]!==void 0&&c2(o,"background-image","background-pattern"),o["line-image"]!==void 0&&c2(o,"line-image","line-pattern"),o["fill-image"]!==void 0&&c2(o,"fill-image","fill-pattern")})}),dP(n,{paint:!0,layout:!0},r=>{const o=C9(n,r.value);tde(o)&&o.stops.forEach(s=>{s[1]=C9(n,s[1])}),r.set(o)}),delete n.constants,c3(n,r=>{xO(r,o=>{delete o["text-max-size"],delete o["icon-max-size"]}),$F(r,o=>{o["text-size"]&&(r.layout||(r.layout={}),r.layout["text-size"]=o["text-size"],delete o["text-size"]),o["icon-size"]&&(r.layout||(r.layout={}),r.layout["icon-size"]=o["icon-size"],delete o["icon-size"])})});function e(r){function o(s){return s.split(",").map(a=>a.trim())}if(Array.isArray(r))return r;if(typeof r=="string")return o(r);if(typeof r=="object")return r.stops.forEach(s=>{s[1]=o(s[1])}),r;throw new Error("unexpected font value")}c3(n,r=>{xO(r,o=>{o["text-font"]&&(o["text-font"]=e(o["text-font"]))})});let t=0;for(let r=n.layers.length-1;r>=0;r--)if(n.layers[r].type!=="symbol"){t=r+1;break}const i=n.layers.splice(t);return i.reverse(),n.layers=n.layers.concat(i),n}function ide(n){const e=[];return c3(n,t=>{t.filter&&(t.filter=u3(t.filter))}),dP(n,{paint:!0,layout:!0},({path:t,key:i,value:r,reference:o,set:s})=>{Z4(r)||i.endsWith("-transition")||o===null||(typeof r=="object"&&!Array.isArray(r)?(s(wX(r,o)),e.push(t.join("."))):o.tokens&&typeof r=="string"&&s(SX(r)))}),n}function rde(n){return JSON.parse(ode(JSON.stringify(n)))}function ode(n){return n.replace(/"hsla?\((.+?)\)"/gi,(e,t)=>{const i=t.match(/^(.+?)\s*,\s*(.+?)\s*,\s*(.+?)(?:\s*,\s*(.+))?$/i);if(i){let[r,o,s,a]=i.slice(1);return[o,s]=[o,s].map(c=>c.endsWith("%")?c:`${parseFloat(c)*100}%`),`"hsl${typeof a=="string"?"a":""}(${[r,o,s,a].filter(Boolean).join(",")})"`}return e})}function sde(n){let e=!1;if(n.version===7&&(n=nde(n),e=!0),n.version===8&&(e=!!ide(n),e=!0),dP(n,{paint:!0,layout:!0},({value:t,reference:i,set:r})=>{i?.type==="color"&&r(rde(t))}),!e)throw new Error(`Cannot migrate from ${n.version}`);return n}const hp=is,ade={StyleExpression:MX,StylePropertyFunction:yE,ZoomConstantExpression:g9,ZoomDependentExpression:y9,createExpression:aP,createPropertyExpression:lP,isExpression:Z4,isExpressionFilter:vE,isZoomExpression:She,normalizePropertyExpression:Ehe},lde={convertFunction:wX,createFunction:sP,isFunction:V4},ude=8,cde=JSON.parse('{"version":{"required":true,"type":"enum","values":[8],"doc":"Style specification version number. Must be 8.","example":8},"name":{"type":"string","doc":"A human-readable name for the style.","example":"Bright"},"metadata":{"type":"*","doc":"Arbitrary properties useful to track with the stylesheet, but do not influence rendering. Properties should be prefixed to avoid collisions, like \'maplibre:\'.","example":{"styleeditor:slimmode":true,"styleeditor:comment":"Style generated 1677776383","styleeditor:version":"3.14.159265","example:object":{"String":"one","Number":2,"Boolean":false}}},"center":{"type":"array","value":"number","doc":"Default map center in longitude and latitude.  The style center will be used only if the map has not been positioned by other means (e.g. map options or user interaction).","example":[-73.9749,40.7736]},"centerAltitude":{"type":"number","doc":"Default map center altitude in meters above sea level. The style center altitude defines the altitude where the camera is looking at and will be used only if the map has not been positioned by other means (e.g. map options or user interaction).","example":123.4,"sdk-support":{"basic functionality":{"js":"5.0.0","android":"https://github.com/maplibre/maplibre-native/issues/2980","ios":"https://github.com/maplibre/maplibre-native/issues/2980"}}},"zoom":{"type":"number","doc":"Default zoom level.  The style zoom will be used only if the map has not been positioned by other means (e.g. map options or user interaction).","example":12.5},"bearing":{"type":"number","default":0,"period":360,"units":"degrees","doc":"Default bearing, in degrees. The bearing is the compass direction that is \\"up\\"; for example, a bearing of 90 orients the map so that east is up. This value will be used only if the map has not been positioned by other means (e.g. map options or user interaction).","example":29},"pitch":{"type":"number","default":0,"units":"degrees","doc":"Default pitch, in degrees. Zero is perpendicular to the surface, for a look straight down at the map, while a greater value like 60 looks ahead towards the horizon. The style pitch will be used only if the map has not been positioned by other means (e.g. map options or user interaction).","example":50,"sdk-support":{"0-60 degrees":{"js":"0.8.0","android":"1.0.0","ios":"1.0.0"},"0-85 degrees":{"js":"2.0.0","android":"https://github.com/maplibre/maplibre-native/issues/1909","ios":"https://github.com/maplibre/maplibre-native/issues/1909"},"0-180 degrees":{"js":"5.0.0","android":"https://github.com/maplibre/maplibre-native/issues/1909","ios":"https://github.com/maplibre/maplibre-native/issues/1909"}}},"roll":{"type":"number","default":0,"units":"degrees","doc":"Default roll, in degrees. The roll angle is measured counterclockwise about the camera boresight. The style roll will be used only if the map has not been positioned by other means (e.g. map options or user interaction).","example":45,"sdk-support":{"basic functionality":{"js":"5.0.0","android":"https://github.com/maplibre/maplibre-native/issues/2941","ios":"https://github.com/maplibre/maplibre-native/issues/2941"}}},"state":{"type":"state","default":{},"doc":"An object used to define default values when using the [`global-state`](https://maplibre.org/maplibre-style-spec/expressions/#global-state) expression.","example":{"chargerType":{"default":["CCS","CHAdeMO","Type2"]},"minPreferredChargingSpeed":{"default":50}},"sdk-support":{"basic functionality":{"js":"5.6.0","android":"https://github.com/maplibre/maplibre-native/issues/3302","ios":"https://github.com/maplibre/maplibre-native/issues/3302"}}},"light":{"type":"light","doc":"The global light source.","example":{"anchor":"viewport","color":"white","intensity":0.4}},"sky":{"type":"sky","doc":"The map\'s sky configuration. **Note:** this definition is still experimental and is under development in maplibre-gl-js.","example":{"sky-color":"#199EF3","sky-horizon-blend":0.5,"horizon-color":"#ffffff","horizon-fog-blend":0.5,"fog-color":"#0000ff","fog-ground-blend":0.5,"atmosphere-blend":["interpolate",["linear"],["zoom"],0,1,10,1,12,0]}},"projection":{"type":"projection","doc":"The projection configuration","example":{"type":["interpolate",["linear"],["zoom"],10,"vertical-perspective",12,"mercator"]}},"terrain":{"type":"terrain","doc":"The terrain configuration.","example":{"source":"raster-dem-source","exaggeration":0.5}},"sources":{"required":true,"type":"sources","doc":"Sources state which data the map should display. Specify the type of source with the `type` property. Adding a source isn\'t enough to make data appear on the map because sources don\'t contain styling details like color or width. Layers refer to a source and give it a visual representation. This makes it possible to style the same source in different ways, like differentiating between types of roads in a highways layer.\\n\\nTiled sources (vector and raster) must specify their details according to the [TileJSON specification](https://github.com/mapbox/tilejson-spec).","example":{"maplibre-demotiles":{"type":"vector","url":"https://demotiles.maplibre.org/tiles/tiles.json"},"maplibre-tilejson":{"type":"vector","url":"http://api.example.com/tilejson.json"},"maplibre-streets":{"type":"vector","tiles":["http://a.example.com/tiles/{z}/{x}/{y}.pbf","http://b.example.com/tiles/{z}/{x}/{y}.pbf"],"maxzoom":14},"wms-imagery":{"type":"raster","tiles":["http://a.example.com/wms?bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&srs=EPSG:3857&width=256&height=256&layers=example"],"tileSize":256}}},"sprite":{"type":"sprite","doc":"An array of `{id: \'my-sprite\', url: \'https://example.com/sprite\'}` objects. Each object should represent a unique URL to load a sprite from and and a unique ID to use as a prefix when referencing images from that sprite (i.e. \'my-sprite:image\'). All the URLs are internally extended to load both .json and .png files. If the `id` field is equal to \'default\', the prefix is omitted (just \'image\' instead of \'default:image\'). All the IDs and URLs must be unique. For backwards compatibility, instead of an array, one can also provide a single string that represent a URL to load the sprite from. The images in this case won\'t be prefixed.","example":"https://demotiles.maplibre.org/styles/osm-bright-gl-style/sprite"},"glyphs":{"type":"string","doc":"A URL template for loading signed-distance-field glyph sets in PBF format.\\n\\nIf this property is set, any text in the `text-field` layout property is displayed in the font stack named by the `text-font` layout property based on glyphs located at the URL specified by this property. Otherwise, font faces will be determined by the `text-font` property based on the local environment.\\n\\nThe URL must include:\\n\\n - `{fontstack}` - When requesting glyphs, this token is replaced with a comma separated list of fonts from a font stack specified in the `text-font` property of a symbol layer. \\n\\n - `{range}` - When requesting glyphs, this token is replaced with a range of 256 Unicode code points. For example, to load glyphs for the Unicode Basic Latin and Basic Latin-1 Supplement blocks, the range would be 0-255. The actual ranges that are loaded are determined at runtime based on what text needs to be displayed.\\n\\nThe URL must be absolute, containing the [scheme, authority and path components](https://en.wikipedia.org/wiki/URL#Syntax).","example":"https://demotiles.maplibre.org/font/{fontstack}/{range}.pbf","sdk-support":{"basic functionality":{"js":"0.0.16","android":"0.1.1","ios":"0.1.0"},"omit to use local fonts":{"js":"https://github.com/maplibre/maplibre-gl-js/issues/3302","android":"https://github.com/maplibre/maplibre-native/issues/165","ios":"https://github.com/maplibre/maplibre-native/issues/165"}}},"font-faces":{"type":"array","value":"fontFaces","doc":"The `font-faces` property can be used to specify what font files to use for rendering text. Font faces contain information needed to render complex texts such as [Devanagari](https://en.wikipedia.org/wiki/Devanagari), [Khmer](https://en.wikipedia.org/wiki/Khmer_script) among many others.<h2>Unicode range</h2>The optional `unicode-range` property can be used to only use a particular font file for characters within the specified unicode range(s). Its value should be an array of strings, each indicating a start and end of a unicode range, similar to the [CSS descriptor with the same name](https://developer.mozilla.org/en-US/docs/Web/CSS/@font-face/unicode-range). This allows specifying multiple non-consecutive unicode ranges. When not specified, the default value is `U+0-10FFFF`, meaning the font file will be used for all unicode characters.\\n\\nRefer to the [Unicode Character Code Charts](https://www.unicode.org/charts/) to see ranges for scripts supported by Unicode. To see what unicode code-points are available in a font, use a tool like [FontDrop](https://fontdrop.info/).\\n\\n<h2>Font Resolution</h2>For every name in a symbol layers [`text-font`](./layers.md/#text-font) array, characters are matched if they are covered one of the by the font files in the corresponding entry of the `font-faces` map. Any still-unmatched characters then fall back to the [`glyphs`](./glyphs.md) URL if provided.\\n\\n<h2>Supported Fonts</h2>What type of fonts are supported is implementation-defined. Unsupported fonts are ignored.","example":{"Noto Sans Regular":[{"url":"https://cdn.jsdelivr.net/gh/notofonts/notofonts.github.io/fonts/NotoSansKhmer/hinted/ttf/NotoSansKhmer-Regular.ttf","unicode-range":["U+1780-17FF"]},{"url":"https://cdn.jsdelivr.net/gh/notofonts/notofonts.github.io/fonts/NotoSansDevanagari/hinted/ttf/NotoSansDevanagari-Regular.ttf","unicode-range":["U+0900-097F"]},{"url":"https://cdn.jsdelivr.net/gh/notofonts/notofonts.github.io/fonts/NotoSansMyanmar/hinted/ttf/NotoSansMyanmar-Regular.ttf","unicode-range":["U+1000-109F"]},{"url":"https://cdn.jsdelivr.net/gh/notofonts/notofonts.github.io/fonts/NotoSansEthiopic/hinted/ttf/NotoSansEthiopic-Regular.ttf","unicode-range":["U+1200-137F"]}],"Unifont":"https://ftp.gnu.org/gnu/unifont/unifont-15.0.01/unifont-15.0.01.ttf"},"sdk-support":{"basic functionality":{"js":"https://github.com/maplibre/maplibre-gl-js/issues/50","android":"11.13.0","ios":"6.18.0"}}},"transition":{"type":"transition","doc":"A global transition definition to use as a default across properties, to be used for timing transitions between one value and the next when no property-specific transition is set. Collision-based symbol fading is controlled independently of the style\'s `transition` property.","example":{"duration":300,"delay":0}},"layers":{"required":true,"type":"array","value":"layer","doc":"A style\'s `layers` property lists all the layers available in that style. The type of layer is specified by the `type` property, and must be one of `background`, `fill`, `line`, `symbol`, `raster`, `circle`, `fill-extrusion`, `heatmap`, `hillshade`, `color-relief`.\\n\\nExcept for layers of the `background` type, each layer needs to refer to a source. Layers take the data that they get from a source, optionally filter features, and then define how those features are styled.","example":[{"id":"coastline","source":"maplibre","source-layer":"countries","type":"line","paint":{"line-color":"#198EC8"}}]}}'),Ade={"*":{type:"source",doc:"Specification of a data source. For vector and raster sources, either TileJSON or a URL to a TileJSON must be provided. For image and video sources, a URL must be provided. For GeoJSON sources, a URL or inline GeoJSON must be provided."}},hde=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],dde={type:{required:!0,type:"enum",values:{vector:{doc:"A vector tile source."}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:` and `https:`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by MapLibre."},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`. If specified as a string for a vector tile source, the same property is used across all its source layers."},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0",js:"wontfix"}}},encoding:{type:"enum",values:{mvt:{doc:"Mapbox Vector Tiles. See http://github.com/mapbox/vector-tile-spec for more info."},mlt:{doc:"MapLibre Vector Tiles. See https://github.com/maplibre/maplibre-tile-spec for more info."}},default:"mvt",doc:"The encoding used by this source. Mapbox Vector Tiles encoding is used by default.","sdk-support":{mvt:{android:"supported",ios:"supported",js:"supported"},mlt:{android:"https://github.com/maplibre/maplibre-native/issues/3721",ios:"https://github.com/maplibre/maplibre-native/issues/3721",js:"https://github.com/maplibre/maplibre-gl-js/issues/6258"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},fde={type:{required:!0,type:"enum",values:{raster:{doc:"A raster tile source."}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:` and `https:`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by MapLibre."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0",js:"wontfix"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},pde={type:{required:!0,type:"enum",values:{"raster-dem":{doc:"A RGB-encoded raster DEM source"}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:` and `https:`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by MapLibre."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},encoding:{type:"enum",values:{terrarium:{doc:"Terrarium format PNG tiles. See https://aws.amazon.com/es/public-datasets/terrain/ for more info."},mapbox:{doc:"Mapbox Terrain RGB tiles. See https://www.mapbox.com/help/access-elevation-data/#mapbox-terrain-rgb for more info."},custom:{doc:"Decodes tiles using the redFactor, blueFactor, greenFactor, baseShift parameters."}},default:"mapbox",doc:"The encoding used by this source. Mapbox Terrain RGB is used by default.","sdk-support":{"mapbox, terrarium":{js:"0.43.0",ios:"6.0.0",android:"6.0.0"},custom:{js:"3.4.0",ios:"https://github.com/maplibre/maplibre-native/issues/2783",android:"https://github.com/maplibre/maplibre-native/issues/2783"}}},redFactor:{type:"number",default:1,doc:"Value that will be multiplied by the red channel value when decoding. Only used on custom encodings.","sdk-support":{"basic functionality":{js:"3.4.0",ios:"https://github.com/maplibre/maplibre-native/issues/2783",android:"https://github.com/maplibre/maplibre-native/issues/2783"}}},blueFactor:{type:"number",default:1,doc:"Value that will be multiplied by the blue channel value when decoding. Only used on custom encodings.","sdk-support":{"basic functionality":{js:"3.4.0",ios:"https://github.com/maplibre/maplibre-native/issues/2783",android:"https://github.com/maplibre/maplibre-native/issues/2783"}}},greenFactor:{type:"number",default:1,doc:"Value that will be multiplied by the green channel value when decoding. Only used on custom encodings.","sdk-support":{"basic functionality":{js:"3.4.0",ios:"https://github.com/maplibre/maplibre-native/issues/2358",android:"https://github.com/maplibre/maplibre-native/issues/2783"}}},baseShift:{type:"number",default:0,doc:"Value that will be added to the encoding mix when decoding. Only used on custom encodings.","sdk-support":{"basic functionality":{js:"3.4.0",ios:"https://github.com/maplibre/maplibre-native/issues/2783",android:"https://github.com/maplibre/maplibre-native/issues/2783"}}},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0",js:"wontfix"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},mde={type:{required:!0,type:"enum",values:{geojson:{doc:"A GeoJSON data source."}},doc:"The data type of the GeoJSON source."},data:{required:!0,type:"*",doc:"A URL to a GeoJSON file, or inline GeoJSON."},maxzoom:{type:"number",default:18,doc:"Maximum zoom level at which to create vector tiles (higher means greater detail at high zoom levels)."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},buffer:{type:"number",default:128,maximum:512,minimum:0,doc:"Size of the tile buffer on each side. A value of 0 produces no buffer. A value of 512 produces a buffer as wide as the tile itself. Larger values produce fewer rendering artifacts near tile edges and slower performance."},filter:{type:"*",doc:"An expression for filtering features prior to processing them for rendering."},tolerance:{type:"number",default:.375,doc:"Douglas-Peucker simplification tolerance (higher means simpler geometries and faster performance)."},cluster:{type:"boolean",default:!1,doc:"If the data is a collection of point features, setting this to true clusters the points by radius into groups. Cluster groups become new `Point` features in the source with additional properties:\n\n * `cluster` Is `true` if the point is a cluster \n\n * `cluster_id` A unique id for the cluster to be used in conjunction with the [cluster inspection methods](https://maplibre.org/maplibre-gl-js/docs/API/classes/GeoJSONSource/#getclusterexpansionzoom)\n\n * `point_count` Number of original points grouped into this cluster\n\n * `point_count_abbreviated` An abbreviated point count"},clusterRadius:{type:"number",default:50,minimum:0,doc:"Radius of each cluster if clustering is enabled. A value of 512 indicates a radius equal to the width of a tile."},clusterMaxZoom:{type:"number",doc:"Max zoom on which to cluster points if clustering is enabled. Defaults to one zoom less than maxzoom (so that last zoom features are not clustered). Clusters are re-evaluated at integer zoom levels so setting clusterMaxZoom to 14 means the clusters will be displayed until z15."},clusterMinPoints:{type:"number",doc:"Minimum number of points necessary to form a cluster if clustering is enabled. Defaults to `2`."},clusterProperties:{type:"*",doc:'An object defining custom properties on the generated clusters if clustering is enabled, aggregating values from clustered points. Has the form `{"property_name": [operator, map_expression]}`. `operator` is any expression function that accepts at least 2 operands (e.g. `"+"` or `"max"`)  it accumulates the property value from clusters/points the cluster contains; `map_expression` produces the value of a single point.\n\nExample: `{"sum": ["+", ["get", "scalerank"]]}`.\n\nFor more advanced use cases, in place of `operator`, you can use a custom reduce expression that references a special `["accumulated"]` value, e.g.:\n\n`{"sum": [["+", ["accumulated"], ["get", "sum"]], ["get", "scalerank"]]}`'},lineMetrics:{type:"boolean",default:!1,doc:"Whether to calculate line distance metrics. This is required for line layers that specify `line-gradient` values."},generateId:{type:"boolean",default:!1,doc:"Whether to generate ids for the geojson features. When enabled, the `feature.id` property will be auto assigned based on its index in the `features` array, over-writing any previous values."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`."}},gde={type:{required:!0,type:"enum",values:{video:{doc:"A video data source."}},doc:"The data type of the video source."},urls:{required:!0,type:"array",value:"string",doc:"URLs to video content in order of preferred format."},coordinates:{required:!0,doc:"Corners of video specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},yde={type:{required:!0,type:"enum",values:{image:{doc:"An image data source."}},doc:"The data type of the image source."},url:{required:!0,type:"string",doc:"URL that points to an image."},coordinates:{required:!0,doc:"Corners of image specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},vde={id:{type:"string",doc:"Unique layer name.",required:!0},type:{type:"enum",values:{fill:{doc:"A filled polygon with an optional stroked border.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},line:{doc:"A stroked line.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},symbol:{doc:"An icon or a text label.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},circle:{doc:"A filled circle.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},heatmap:{doc:"A heatmap.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}}},"fill-extrusion":{doc:"An extruded (3D) polygon.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}},raster:{doc:"Raster map textures such as satellite imagery.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},hillshade:{doc:"Client-side hillshading visualization based on DEM data. The implementation supports Mapbox Terrain RGB, Mapzen Terrarium tiles and custom encodings.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"},"additional methods":{js:"5.5.0",android:"https://github.com/maplibre/maplibre-native/issues/3396",ios:"https://github.com/maplibre/maplibre-native/issues/3396"}}},"color-relief":{doc:"Client-side elevation coloring based on DEM data. The implementation supports Mapbox Terrain RGB, Mapzen Terrarium tiles and custom encodings.","sdk-support":{"basic functionality":{js:"5.6.0",android:"https://github.com/maplibre/maplibre-native/issues/3408",ios:"https://github.com/maplibre/maplibre-native/issues/3408"}}},background:{doc:"The background color or pattern of the map.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}}},doc:"Rendering type of this layer.",required:!0},metadata:{type:"*",doc:"Arbitrary properties useful to track with the layer, but do not influence rendering. Properties should be prefixed to avoid collisions, like 'maplibre:'.",example:{"source:comment":"Hydrology FCCODE 460 - Narrow wash"}},source:{type:"string",doc:"Name of a source description to be used for this layer. Required for all layer types except `background`."},"source-layer":{type:"string",doc:"Layer to use from a vector tile source. Required for vector tile sources; prohibited for all other source types, including GeoJSON sources."},minzoom:{type:"number",minimum:0,maximum:24,doc:"The minimum zoom level for the layer. At zoom levels less than the minzoom, the layer will be hidden."},maxzoom:{type:"number",minimum:0,maximum:24,doc:"The maximum zoom level for the layer. At zoom levels equal to or greater than the maxzoom, the layer will be hidden."},filter:{type:"filter",doc:"A expression specifying conditions on source features. Only features that match the filter are displayed. Zoom expressions in filters are only evaluated at integer zoom levels. The `feature-state` expression is not supported in filter expressions."},layout:{type:"layout",doc:"Layout properties for the layer."},paint:{type:"paint",doc:"Default paint properties for this layer."}},bde=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],Cde={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},"property-type":"constant"}},_de={"fill-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.1.0",ios:"5.8.0"},"data-driven styling":{js:"1.2.0",android:"9.1.0",ios:"5.8.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},"property-type":"constant"}},xde={"circle-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.2.0",ios:"5.9.0"},"data-driven styling":{js:"1.2.0",android:"9.2.0",ios:"5.9.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},"property-type":"constant"}},Mde={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}},"property-type":"constant"}},wde={"line-cap":{type:"enum",values:{butt:{doc:"A cap with a squared-off end which is drawn to the exact endpoint of the line."},round:{doc:"A cap with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},square:{doc:"A cap with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."}},default:"butt",doc:"The display of line endings.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{doc:"A join with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."},round:{doc:"A join with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},miter:{doc:"A join with a sharp, angled corner which is drawn with the outer sides beyond the endpoint of the path until they meet."}},default:"miter",doc:"The display of lines when joining.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,doc:"Used to automatically convert miter joins to bevel joins for sharp angles.",requires:[{"line-join":"miter"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,doc:"Used to automatically convert round joins to miter joins for shallow angles.",requires:[{"line-join":"round"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.1.0",ios:"5.8.0"},"data-driven styling":{js:"1.2.0",android:"9.1.0",ios:"5.8.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},"property-type":"constant"}},Sde=JSON.parse('{"symbol-placement":{"type":"enum","values":{"point":{"doc":"The label is placed at the point where the geometry is located."},"line":{"doc":"The label is placed along the line of the geometry. Can only be used on `LineString` and `Polygon` geometries."},"line-center":{"doc":"The label is placed at the center of the line of the geometry. Can only be used on `LineString` and `Polygon` geometries. Note that a single feature in a vector tile may contain multiple line geometries."}},"default":"point","doc":"Label placement relative to its geometry.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"`line-center` value":{"js":"0.47.0","android":"6.4.0","ios":"4.3.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","doc":"Distance between two symbol anchors.","requires":[{"symbol-placement":"line"}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"doc":"If true, the symbols will not cross tile edges to avoid mutual collisions. Recommended in layers that don\'t have enough padding in the vector tile to prevent collisions, or if it is a point symbol layer placed after a line symbol layer. When using a client that supports global collision detection, like MapLibre GL JS version 0.42.0 or greater, enabling this property is not needed to prevent clipped labels at tile boundaries.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","doc":"Sorts features in ascending order based on this value. Features with lower sort keys are drawn and placed first.  When `icon-allow-overlap` or `text-allow-overlap` is `false`, features with a lower sort key will have priority during placement. When `icon-allow-overlap` or `text-allow-overlap` is set to `true`, features with a higher sort key will overlap over features with a lower sort key.","sdk-support":{"basic functionality":{"js":"0.53.0","android":"7.4.0","ios":"4.11.0"},"data-driven styling":{"js":"0.53.0","android":"7.4.0","ios":"4.11.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{"doc":"Sorts symbols by `symbol-sort-key` if set. Otherwise, sorts symbols by their y-position relative to the viewport if `icon-allow-overlap` or `text-allow-overlap` is set to `true` or `icon-ignore-placement` or `text-ignore-placement` is `false`."},"viewport-y":{"doc":"Sorts symbols by their y-position relative to the viewport if `icon-allow-overlap` or `text-allow-overlap` is set to `true` or `icon-ignore-placement` or `text-ignore-placement` is `false`."},"source":{"doc":"Sorts symbols by `symbol-sort-key` if set. Otherwise, no sorting is applied; symbols are rendered in the same order as the source data."}},"default":"auto","doc":"Determines whether overlapping symbols in the same layer are rendered in the order that they appear in the data source or by their y-position relative to the viewport. To control the order and prioritization of symbols otherwise, use `symbol-sort-key`.","sdk-support":{"basic functionality":{"js":"0.49.0","android":"6.6.0","ios":"4.5.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"doc":"If true, the icon will be visible even if it collides with other previously drawn symbols.","requires":["icon-image",{"!":"icon-overlap"}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-overlap":{"type":"enum","values":{"never":{"doc":"The icon will be hidden if it collides with any other previously drawn symbol."},"always":{"doc":"The icon will be visible even if it collides with any other previously drawn symbol."},"cooperative":{"doc":"If the icon collides with another previously drawn symbol, the overlap mode for that symbol is checked. If the previous symbol was placed using `never` overlap mode, the new icon is hidden. If the previous symbol was placed using `always` or `cooperative` overlap mode, the new icon is visible."}},"doc":"Allows for control over whether to show an icon when it overlaps other symbols on the map. If `icon-overlap` is not set, `icon-allow-overlap` is used instead.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"2.1.0","android":"https://github.com/maplibre/maplibre-native/issues/251","ios":"https://github.com/maplibre/maplibre-native/issues/251"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"doc":"If true, other symbols can be visible even if they collide with the icon.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"doc":"If true, text will display without their corresponding icons when the icon collides with other symbols and the text does not.","requires":["icon-image","text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{"doc":"When `symbol-placement` is set to `point`, aligns icons east-west. When `symbol-placement` is set to `line` or `line-center`, aligns icon x-axes with the line."},"viewport":{"doc":"Produces icons whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},"auto":{"doc":"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},"default":"auto","doc":"In combination with `symbol-placement`, determines the rotation behavior of icons.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"`auto` value":{"js":"0.25.0","android":"4.2.0","ios":"3.4.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","doc":"Scales the original size of the icon by the provided factor. The new pixel size of the image will be the original pixel size multiplied by `icon-size`. 1 is the original size; 3 triples the size of the image.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.35.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{"doc":"The icon is displayed at its intrinsic aspect ratio."},"width":{"doc":"The icon is scaled in the x-dimension to fit the width of the text."},"height":{"doc":"The icon is scaled in the y-dimension to fit the height of the text."},"both":{"doc":"The icon is scaled in both x- and y-dimensions."}},"default":"none","doc":"Scales the icon to fit around the associated text.","requires":["icon-image","text-field"],"sdk-support":{"basic functionality":{"js":"0.21.0","android":"4.2.0","ios":"3.4.0"},"stretchable icons":{"js":"1.6.0","android":"9.2.0","ios":"5.8.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","doc":"Size of the additional area added to dimensions determined by `icon-text-fit`, in clockwise order: top, right, bottom, left.","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"sdk-support":{"basic functionality":{"js":"0.21.0","android":"4.2.0","ios":"3.4.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","doc":"Name of image in sprite to use for drawing an image background.","tokens":true,"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.35.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","doc":"Rotates the icon clockwise.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.21.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"padding","default":[2],"units":"pixels","doc":"Size of additional area round the icon bounding box used for detecting symbol collisions.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"2.2.0","android":"https://github.com/maplibre/maplibre-native/issues/2754","ios":"https://github.com/maplibre/maplibre-native/issues/2754"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{"type":"boolean","default":false,"doc":"If true, the icon may be flipped to prevent it from being rendered upside-down.","requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"doc":"Offset distance of icon from its anchor. Positive values indicate right and down, while negative values indicate left and up. Each component is multiplied by the value of `icon-size` to obtain the final offset in pixels. When combined with `icon-rotate` the offset will be as if the rotated direction was up.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.29.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{"doc":"The center of the icon is placed closest to the anchor."},"left":{"doc":"The left side of the icon is placed closest to the anchor."},"right":{"doc":"The right side of the icon is placed closest to the anchor."},"top":{"doc":"The top of the icon is placed closest to the anchor."},"bottom":{"doc":"The bottom of the icon is placed closest to the anchor."},"top-left":{"doc":"The top left corner of the icon is placed closest to the anchor."},"top-right":{"doc":"The top right corner of the icon is placed closest to the anchor."},"bottom-left":{"doc":"The bottom left corner of the icon is placed closest to the anchor."},"bottom-right":{"doc":"The bottom right corner of the icon is placed closest to the anchor."}},"default":"center","doc":"Part of the icon placed closest to the anchor.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.40.0","android":"5.2.0","ios":"3.7.0"},"data-driven styling":{"js":"0.40.0","android":"5.2.0","ios":"3.7.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{"doc":"The icon is aligned to the plane of the map."},"viewport":{"doc":"The icon is aligned to the plane of the viewport."},"auto":{"doc":"Automatically matches the value of `icon-rotation-alignment`."}},"default":"auto","doc":"Orientation of icon when map is pitched.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.39.0","android":"5.2.0","ios":"3.7.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{"doc":"The text is aligned to the plane of the map."},"viewport":{"doc":"The text is aligned to the plane of the viewport."},"auto":{"doc":"Automatically matches the value of `text-rotation-alignment`."}},"default":"auto","doc":"Orientation of text when map is pitched.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.21.0","android":"4.2.0","ios":"3.4.0"},"`auto` value":{"js":"0.25.0","android":"4.2.0","ios":"3.4.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{"doc":"When `symbol-placement` is set to `point`, aligns text east-west. When `symbol-placement` is set to `line` or `line-center`, aligns text x-axes with the line."},"viewport":{"doc":"Produces glyphs whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},"viewport-glyph":{"doc":"When `symbol-placement` is set to `point`, aligns text to the x-axis of the viewport. When `symbol-placement` is set to `line` or `line-center`, aligns glyphs to the x-axis of the viewport and places them along the line."},"auto":{"doc":"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},"default":"auto","doc":"In combination with `symbol-placement`, determines the rotation behavior of the individual glyphs forming the text.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"`auto` value":{"js":"0.25.0","android":"4.2.0","ios":"3.4.0"},"`viewport-glyph` value":{"js":"2.1.8","android":"https://github.com/maplibre/maplibre-native/issues/250","ios":"https://github.com/maplibre/maplibre-native/issues/250"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"doc":"Value to use for a text label. If a plain `string` is provided, it will be treated as a `formatted` with default/inherited formatting options.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.33.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"doc":"Fonts to use for displaying text. If the `glyphs` root property is specified, this array is joined together and interpreted as a font stack name. Otherwise, it is interpreted as a cascading fallback list of local font names.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.43.0","android":"6.0.0","ios":"4.0.0"},"local fonts":{"js":"https://github.com/maplibre/maplibre-gl-js/issues/3302","android":"https://github.com/maplibre/maplibre-native/issues/165","ios":"https://github.com/maplibre/maplibre-native/issues/165"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","doc":"Font size.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.35.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","doc":"The maximum line width for text wrapping.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.40.0","android":"5.2.0","ios":"3.7.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","doc":"Text leading value for multi-line text.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","doc":"Text tracking amount.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.40.0","android":"5.2.0","ios":"3.7.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{"doc":"The text is aligned towards the anchor position."},"left":{"doc":"The text is aligned to the left."},"center":{"doc":"The text is centered."},"right":{"doc":"The text is aligned to the right."}},"default":"center","doc":"Text justification options.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.39.0","android":"5.2.0","ios":"3.7.0"},"auto":{"js":"0.54.0","android":"7.4.0","ios":"4.10.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"doc":"Radial offset of text, in the direction of the symbol\'s anchor. Useful in combination with `text-variable-anchor`, which defaults to using the two-dimensional `text-offset` if present.","sdk-support":{"basic functionality":{"js":"0.54.0","android":"7.4.0","ios":"4.10.0"},"data-driven styling":{"js":"0.54.0","android":"7.4.0","ios":"4.10.0"}},"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{"doc":"The center of the text is placed closest to the anchor."},"left":{"doc":"The left side of the text is placed closest to the anchor."},"right":{"doc":"The right side of the text is placed closest to the anchor."},"top":{"doc":"The top of the text is placed closest to the anchor."},"bottom":{"doc":"The bottom of the text is placed closest to the anchor."},"top-left":{"doc":"The top left corner of the text is placed closest to the anchor."},"top-right":{"doc":"The top right corner of the text is placed closest to the anchor."},"bottom-left":{"doc":"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{"doc":"The bottom right corner of the text is placed closest to the anchor."}},"requires":["text-field",{"symbol-placement":["point"]}],"doc":"To increase the chance of placing high-priority labels on the map, you can provide an array of `text-anchor` locations: the renderer will attempt to place the label at each location, in order, before moving onto the next label. Use `text-justify: auto` to choose justification based on anchor position. To apply an offset, use the `text-radial-offset` or the two-dimensional `text-offset`.","sdk-support":{"basic functionality":{"js":"0.54.0","android":"7.4.0","ios":"4.10.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{"type":"variableAnchorOffsetCollection","requires":["text-field",{"symbol-placement":["point"]}],"doc":"To increase the chance of placing high-priority labels on the map, you can provide an array of `text-anchor` locations, each paired with an offset value. The renderer will attempt to place the label at each location, in order, before moving on to the next location+offset. Use `text-justify: auto` to choose justification based on anchor position. \\n\\n The length of the array must be even, and must alternate between enum and point entries. i.e., each anchor location must be accompanied by a point, and that point defines the offset when the corresponding anchor location is used. Positive offset values indicate right and down, while negative values indicate left and up. Anchor locations may repeat, allowing the renderer to try multiple offsets to try and place a label using the same anchor. \\n\\n When present, this property takes precedence over `text-anchor`, `text-variable-anchor`, `text-offset`, and `text-radial-offset`. \\n\\n ```json \\n\\n { \\"text-variable-anchor-offset\\": [\\"top\\", [0, 4], \\"left\\", [3,0], \\"bottom\\", [1, 1]] } \\n\\n ``` \\n\\n When the renderer chooses the `top` anchor, `[0, 4]` will be used for `text-offset`; the text will be shifted down by 4 ems. \\n\\n When the renderer chooses the `left` anchor, `[3, 0]` will be used for `text-offset`; the text will be shifted right by 3 ems.","sdk-support":{"basic functionality":{"js":"3.3.0","ios":"6.8.0","android":"11.6.0"},"data-driven styling":{"js":"3.3.0","ios":"https://github.com/maplibre/maplibre-native/issues/2358","android":"https://github.com/maplibre/maplibre-native/issues/2358"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{"type":"enum","values":{"center":{"doc":"The center of the text is placed closest to the anchor."},"left":{"doc":"The left side of the text is placed closest to the anchor."},"right":{"doc":"The right side of the text is placed closest to the anchor."},"top":{"doc":"The top of the text is placed closest to the anchor."},"bottom":{"doc":"The bottom of the text is placed closest to the anchor."},"top-left":{"doc":"The top left corner of the text is placed closest to the anchor."},"top-right":{"doc":"The top right corner of the text is placed closest to the anchor."},"bottom-left":{"doc":"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{"doc":"The bottom right corner of the text is placed closest to the anchor."}},"default":"center","doc":"Part of the text placed closest to the anchor.","requires":["text-field",{"!":"text-variable-anchor"}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.39.0","android":"5.2.0","ios":"3.7.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","doc":"Maximum angle change between adjacent characters.","requires":["text-field",{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{"doc":"If a text\'s language supports horizontal writing mode, symbols with point placement would be laid out horizontally."},"vertical":{"doc":"If a text\'s language supports vertical writing mode, symbols with point placement would be laid out vertically."}},"doc":"The property allows control over a symbol\'s orientation. Note that the property values act as a hint, so that a symbol whose language doesnt support the provided orientation will be laid out in its natural orientation. Example: English point symbol will be rendered horizontally even if array value contains single \'vertical\' enum value. The order of elements in an array define priority order for the placement of an orientation variant.","requires":["text-field",{"symbol-placement":["point"]}],"sdk-support":{"basic functionality":{"js":"1.3.0","android":"8.3.0","ios":"5.3.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","doc":"Rotates the text clockwise.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.35.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","doc":"Size of the additional area around the text bounding box used for detecting symbol collisions.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"doc":"If true, the text may be flipped vertically to prevent it from being rendered upside-down.","requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{"doc":"The text is not altered."},"uppercase":{"doc":"Forces all letters to be displayed in uppercase."},"lowercase":{"doc":"Forces all letters to be displayed in lowercase."}},"default":"none","doc":"Specifies how to capitalize text, similar to the CSS `text-transform` property.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.33.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","doc":"Offset distance of text from its anchor. Positive values indicate right and down, while negative values indicate left and up. If used with text-variable-anchor, input values will be taken as absolute values. Offsets along the x- and y-axis will be applied automatically based on the anchor position.","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.35.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"doc":"If true, the text will be visible even if it collides with other previously drawn symbols.","requires":["text-field",{"!":"text-overlap"}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-overlap":{"type":"enum","values":{"never":{"doc":"The text will be hidden if it collides with any other previously drawn symbol."},"always":{"doc":"The text will be visible even if it collides with any other previously drawn symbol."},"cooperative":{"doc":"If the text collides with another previously drawn symbol, the overlap mode for that symbol is checked. If the previous symbol was placed using `never` overlap mode, the new text is hidden. If the previous symbol was placed using `always` or `cooperative` overlap mode, the new text is visible."}},"doc":"Allows for control over whether to show symbol text when it overlaps other symbols on the map. If `text-overlap` is not set, `text-allow-overlap` is used instead","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"2.1.0","android":"https://github.com/maplibre/maplibre-native/issues/251","ios":"https://github.com/maplibre/maplibre-native/issues/251"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"doc":"If true, other symbols can be visible even if they collide with the text.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"doc":"If true, icons will display without their corresponding text when the text collides with other symbols and the icon does not.","requires":["text-field","icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{"doc":"The layer is shown."},"none":{"doc":"The layer is not shown."}},"default":"visible","doc":"Whether this layer is displayed.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"property-type":"constant"}}'),Ede={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},"property-type":"constant"}},Ode={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},"property-type":"constant"}},Bde={type:"array",value:"*",doc:"A filter selects specific features from a layer."},Ide={type:"enum",values:{"==":{doc:'`["==", key, value]` equality: `feature[key] = value`'},"!=":{doc:'`["!=", key, value]` inequality: `feature[key]  value`'},">":{doc:'`[">", key, value]` greater than: `feature[key] > value`'},">=":{doc:'`[">=", key, value]` greater than or equal: `feature[key]  value`'},"<":{doc:'`["<", key, value]` less than: `feature[key] < value`'},"<=":{doc:'`["<=", key, value]` less than or equal: `feature[key]  value`'},in:{doc:'`["in", key, v0, ..., vn]` set inclusion: `feature[key]  {v0, ..., vn}`'},"!in":{doc:'`["!in", key, v0, ..., vn]` set exclusion: `feature[key]  {v0, ..., vn}`'},all:{doc:'`["all", f0, ..., fn]` logical `AND`: `f0  ...  fn`'},any:{doc:'`["any", f0, ..., fn]` logical `OR`: `f0  ...  fn`'},none:{doc:'`["none", f0, ..., fn]` logical `NOR`: `f0  ...  fn`'},has:{doc:'`["has", key]` `feature[key]` exists'},"!has":{doc:'`["!has", key]` `feature[key]` does not exist'}},doc:"The filter operator."},kde={type:"enum",values:{Point:{doc:"Filter to point geometries."},LineString:{doc:"Filter to line geometries."},Polygon:{doc:"Filter to polygon geometries."}},doc:"The geometry type for the filter to select."},Tde={type:"array",minimum:0,maximum:24,value:["number","color"],length:2,doc:"Zoom level and value pair."},Rde={type:"array",value:"*",minimum:1,doc:"An expression defines a function that can be used for data-driven style properties or feature filters."},Dde=JSON.parse('{"doc":"","type":"enum","values":{"let":{"doc":"Binds expressions to named variables, which can then be referenced in the result expression using `[\\"var\\", \\"variable_name\\"]`.\\n\\n - [Visualize population density](https://maplibre.org/maplibre-gl-js/docs/examples/visualize-population-density/)","syntax":{"overloads":[{"parameters":["var_1_name","var_1_value","...","var_n_name","var_n_value","expression"],"output-type":"any"}],"parameters":[{"name":"var_i_name","type":"string literal","description":"The name of the i-th variable."},{"name":"var_i_value","type":"any","description":"The value of the i-th variable."},{"name":"expression","type":"any","description":"The expression within which the named variables can be referenced."}]},"example":["let","someNumber",500,["interpolate",["linear"],["var","someNumber"],274,"#edf8e9",1551,"#006d2c"]],"group":"Variable binding","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"var":{"doc":"References variable bound using `let`.\\n\\n - [Visualize population density](https://maplibre.org/maplibre-gl-js/docs/examples/visualize-population-density/)","syntax":{"overloads":[{"parameters":["var_name"],"output-type":"any"}],"parameters":[{"name":"var_name","type":"string literal","description":"The name of the variable bound using `let`."}]},"example":["var","density"],"group":"Variable binding","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"literal":{"doc":"Provides a literal array or object value.\\n\\n - [Display and style rich text labels](https://maplibre.org/maplibre-gl-js/docs/examples/display-and-style-rich-text-labels/)","syntax":{"overloads":[{"parameters":["json_object"],"output-type":"object"},{"parameters":["json_array"],"output-type":"array"}],"parameters":[{"name":"json_object","type":"JSON object"},{"name":"json_array","type":"JSON array"}]},"example":["literal",["DIN Offc Pro Italic","Arial Unicode MS Regular"]],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"array":{"doc":"Asserts that the input is an array (optionally with a specific item type and length). If, when the input expression is evaluated, it is not of the asserted type or length, then this assertion will cause the whole expression to be aborted.","syntax":{"overloads":[{"parameters":["value"],"output-type":"array"},{"parameters":["type","value"],"output-type":"array<type>"},{"parameters":["type","length","value"],"output-type":"array<type, length>"}],"parameters":[{"name":"value","type":"any"},{"name":"type","type":"\\"string\\" | \\"number\\" | \\"boolean\\"","description":"The asserted type of the input array."},{"name":"length","type":"number literal","description":"The asserted length of the input array."}]},"example":["array","string",3,["literal",["a","b","c"]]],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"at":{"doc":"Retrieves an item from an array.","syntax":{"overloads":[{"parameters":["index","array"],"output-type":"T"}],"parameters":[{"name":"index","type":"number","description":"The index into `array`."},{"name":"array","type":"array<T>","description":"The array of items to retrieve the specified item from."}]},"example":["at",1,["literal",["a","b","c"]]],"group":"Lookup","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"in":{"doc":"Determines whether an item exists in an array or a substring exists in a string.\\n\\n - [Measure distances](https://maplibre.org/maplibre-gl-js/docs/examples/measure-distances/)","syntax":{"overloads":[{"parameters":["item","array"],"output-type":"boolean"},{"parameters":["substring","string"],"output-type":"boolean"}],"parameters":[{"name":"item","type":"T","description":"The needle to search for within `array`."},{"name":"array","type":"array<T>","description":"The haystack through which to search for `item`."},{"name":"substring","type":"string","description":"The needle to search for within `string`."},{"name":"string","type":"string","description":"The haystack through which to search for `substring`."}]},"example":["in","$type","Point"],"group":"Lookup","sdk-support":{"basic functionality":{"js":"1.6.0","android":"9.1.0","ios":"5.8.0"}}},"index-of":{"doc":"Returns the first position at which an item can be found in an array or a substring can be found in a string, or `-1` if the input cannot be found. Accepts an optional index from where to begin the search. In a string, a UTF-16 surrogate pair counts as a single position.","syntax":{"overloads":[{"parameters":["item","array","from_index?"],"output-type":"number"},{"parameters":["substring","string","from_index?"],"output-type":"number"}],"parameters":[{"name":"item","type":"T","description":"The needle to search for within `array`."},{"name":"array","type":"array<T>","description":"The haystack through which to search for `item`."},{"name":"substring","type":"string","description":"The needle to search for within `string`."},{"name":"string","type":"string","description":"The haystack through which to search for `substring`."},{"name":"from_index","type":"number","description":"The index from where to begin the search."}]},"example":["index-of","foo",["baz","bar","hello","foo","world"]],"group":"Lookup","sdk-support":{"basic functionality":{"js":"1.10.0","android":"10.3.0","ios":"6.0.0"}}},"slice":{"doc":"Returns a subarray from an array or a substring from a string from a specified start index, or between a start index and an end index if set. The return value is inclusive of the start index but not of the end index. In a string, a UTF-16 surrogate pair counts as a single position.","syntax":{"overloads":[{"parameters":["array","start_index","end_index?"],"output-type":"array<T>"},{"parameters":["string","start_index","end_index?"],"output-type":"string"}],"parameters":[{"name":"array","type":"array<T>","description":"The original array from which to extract the subarray."},{"name":"string","type":"string","description":"The original string from which to extract the substring."},{"name":"start_index","type":"number","description":"The inclusive index from which `slice` extracts items or characters from the subarray or substring."},{"name":"end_index","type":"number","description":"The non-inclusive index up to which `slice` extracts items or characters from the subarray or substring."}]},"example":["slice",["get","name"],0,3],"group":"Lookup","sdk-support":{"basic functionality":{"js":"1.10.0","android":"10.3.0","ios":"6.0.0"}}},"case":{"doc":"Selects the first output whose corresponding test condition evaluates to true, or the fallback value otherwise.\\n\\n - [Create a hover effect](https://maplibre.org/maplibre-gl-js/docs/examples/create-a-hover-effect/)\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/display-html-clusters-with-custom-properties/)","syntax":{"overloads":[{"parameters":["condition_1","output_1","...","condition_n","output_n","fallback"],"output-type":"any"}],"parameters":[{"name":"condition_i","type":"boolean"},{"name":"output_i","type":"any"},{"name":"fallback","type":"any","description":"The result when no condition evaluates to true."}]},"example":["case",["boolean",["feature-state","hover"],false],1,0.5],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"match":{"doc":"Selects the output whose label value matches the input value, or the fallback value if no match is found. The input can be any expression (e.g. `[\\"get\\", \\"building_type\\"]`). Each label must be either:\\n\\n - a single literal value; or\\n\\n - an array of literal values, whose values must be all strings or all numbers (e.g. `[100, 101]` or `[\\"c\\", \\"b\\"]`). The input matches if any of the values in the array matches, similar to the `\\"in\\"` operator.\\n\\nEach label must be unique. If the input type does not match the type of the labels, the result will be the fallback value.","syntax":{"overloads":[{"parameters":["input","label_1","output_1","...","label_n","output_n","fallback"],"output-type":"any"}],"parameters":[{"name":"input","type":"string | number","description":"Any expression."},{"name":"label_i","type":"string literal | number literal | array<string literal> | array<number literal>","description":"The i-th literal value or array of literal values to match the input against."},{"name":"output_i","type":"any","description":"The result when the i-th label is the first label to match the input."},{"name":"fallback","type":"any","description":"The result when no label matches the input."}]},"example":["match",["get","building_type"],"residential","#f00","commercial","#0f0","#000"],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"coalesce":{"doc":"Evaluates each expression in turn until the first non-null value is obtained, and returns that value.\\n\\n - [Use a fallback image](https://maplibre.org/maplibre-gl-js/docs/examples/use-a-fallback-image/)","syntax":{"overloads":[{"parameters":["expression_1","...","expression_n"],"output-type":"any"}],"parameters":[{"name":"expression_i","type":"any"}]},"example":["coalesce",["image",["concat",["get","icon"],"_15"]],["image","marker_15"]],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"step":{"doc":"Produces discrete, stepped results by evaluating a piecewise-constant function defined by pairs of input and output values (\\"stops\\"). The `input` may be any numeric expression (e.g., `[\\"get\\", \\"population\\"]`). Stop inputs must be numeric literals in strictly ascending order.\\n\\nReturns the output value of the stop just less than the input, or the first output if the input is less than the first stop.\\n\\n - [Create and style clusters](https://maplibre.org/maplibre-gl-js/docs/examples/create-and-style-clusters/)","syntax":{"overloads":[{"parameters":["input","output_0","stop_1_input","stop_1_output","...","stop_n_input","stop_n_output"],"output-type":"any"}],"parameters":[{"name":"input","type":"number","description":"Any numeric expression."},{"name":"output_0","type":"any","description":"The result when the `input` is less than the first stop."},{"name":"stop_i_input","type":"number literal","description":"The value of the i-th stop against which the `input` is compared."},{"name":"stop_i_output","type":"any","description":"The result when the i-th stop is the last stop less than the `input`."}]},"example":["step",["get","point_count"],20,100,30,750,40],"group":"Ramps, scales, curves","sdk-support":{"basic functionality":{"js":"0.42.0","android":"6.0.0","ios":"4.0.0"}}},"interpolate":{"doc":"Produces continuous, smooth results by interpolating between pairs of input and output values (\\"stops\\"). The `input` may be any numeric expression (e.g., `[\\"get\\", \\"population\\"]`). Stop inputs must be numeric literals in strictly ascending order. The output type must be `number`, `array<number>`, `color`, `array<color>`, or `projection`.\\n\\nInterpolation types:\\n\\n- `[\\"linear\\"]`, or an expression returning one of those types: Interpolates linearly between the pair of stops just less than and just greater than the input.\\n\\n- `[\\"exponential\\", base]`: Interpolates exponentially between the stops just less than and just greater than the input. `base` controls the rate at which the output increases: higher values make the output increase more towards the high end of the range. With values close to 1 the output increases linearly.\\n\\n- `[\\"cubic-bezier\\", x1, y1, x2, y2]`: Interpolates using the cubic bezier curve defined by the given control points.\\n\\n - [Animate map camera around a point](https://maplibre.org/maplibre-gl-js/docs/examples/animate-camera-around-point/)\\n\\n - [Change building color based on zoom level](https://maplibre.org/maplibre-gl-js/docs/examples/change-building-color-based-on-zoom-level/)\\n\\n - [Create a heatmap layer](https://maplibre.org/maplibre-gl-js/docs/examples/heatmap-layer/)\\n\\n - [Visualize population density](https://maplibre.org/maplibre-gl-js/docs/examples/visualize-population-density/)","syntax":{"overloads":[{"parameters":["interpolation_type","input","stop_1_input","stop_1_output","...","stop_n_input","stop_n_output"],"output-type":"number | array<number> | color | array<color> | projection"}],"parameters":[{"name":"interpolation_type","type":"[\\"linear\\"] | [\\"exponential\\", base] | [\\"cubic-bezier\\", x1, y1, x2, y2]","description":"The interpolation type."},{"name":"input","type":"number","description":"Any numeric expression."},{"name":"stop_i_input","type":"number literal","description":"The value of the i-th stop against which the `input` is compared."},{"name":"stop_i_output","type":"number | array<number> | color | array<color> | projection","description":"The output value corresponding to the i-th stop."}]},"example":["interpolate",["linear"],["zoom"],15,0,15.05,["get","height"]],"group":"Ramps, scales, curves","sdk-support":{"basic functionality":{"js":"0.42.0","android":"6.0.0","ios":"4.0.0"}}},"interpolate-hcl":{"doc":"Produces continuous, smooth results by interpolating between pairs of input and output values (\\"stops\\"). Works like `interpolate`, but the output type must be `color` or `array<color>`, and the interpolation is performed in the Hue-Chroma-Luminance color space.","syntax":{"overloads":[{"parameters":["interpolation_type","input","stop_1_input","stop_1_output","...","stop_n_input","stop_n_output"],"output-type":"color | array<color>"}],"parameters":[{"name":"interpolation_type","type":"[\\"linear\\"] | [\\"exponential\\", base] | [\\"cubic-bezier\\", x1, y1, x2, y2]"},{"name":"input","type":"number"},{"name":"stop_i_input","type":"number literal"},{"name":"stop_i_output","type":"color | array<color>"}]},"example":["interpolate-hcl",["linear"],["zoom"],15,"#f00",15.05,"#00f"],"group":"Ramps, scales, curves","sdk-support":{"basic functionality":{"js":"0.49.0","ios":"https://github.com/maplibre/maplibre-native/issues/2784","android":"https://github.com/maplibre/maplibre-native/issues/2784"}}},"interpolate-lab":{"doc":"Produces continuous, smooth results by interpolating between pairs of input and output values (\\"stops\\"). Works like `interpolate`, but the output type must be `color` or `array<color>`, and the interpolation is performed in the CIELAB color space.","syntax":{"overloads":[{"parameters":["interpolation_type","input","stop_1_input","stop_1_output","...","stop_n_input","stop_n_output"],"output-type":"color | array<color>"}],"parameters":[{"name":"interpolation_type","type":"[\\"linear\\"] | [\\"exponential\\", base] | [\\"cubic-bezier\\", x1, y1, x2, y2]"},{"name":"input","type":"number"},{"name":"stop_i_input","type":"number literal"},{"name":"stop_i_output","type":"color | array<color>"}]},"example":["interpolate-lab",["linear"],["zoom"],15,"#f00",15.05,"#00f"],"group":"Ramps, scales, curves","sdk-support":{"basic functionality":{"js":"0.49.0","ios":"https://github.com/maplibre/maplibre-native/issues/2784","android":"https://github.com/maplibre/maplibre-native/issues/2784"}}},"ln2":{"doc":"Returns the mathematical constant ln(2).","syntax":{"overloads":[{"parameters":[],"output-type":"number"}]},"example":["ln2"],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"pi":{"doc":"Returns the mathematical constant pi.","syntax":{"overloads":[{"parameters":[],"output-type":"number"}]},"example":["pi"],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"e":{"doc":"Returns the mathematical constant e.","syntax":{"overloads":[{"parameters":[],"output-type":"number"}]},"example":["e"],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"typeof":{"doc":"Returns a string describing the type of the given value.","syntax":{"overloads":[{"parameters":["value"],"output-type":"string"}],"parameters":[{"name":"value","type":"any"}]},"example":["typeof",["get","name"]],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"string":{"doc":"Asserts that the input value is a string. If multiple values are provided, each one is evaluated in order until a string is obtained. If none of the inputs are strings, the expression is an error.","syntax":{"overloads":[{"parameters":["value_1","...","value_n"],"output-type":"string"}],"parameters":[{"name":"value_i","type":"any"}]},"example":["string",["get","name"]],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"number":{"doc":"Asserts that the input value is a number. If multiple values are provided, each one is evaluated in order until a number is obtained. If none of the inputs are numbers, the expression is an error.","syntax":{"overloads":[{"parameters":["value_1","...","value_n"],"output-type":"number"}],"parameters":[{"name":"value_i","type":"any"}]},"example":["number",["get","population"]],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"boolean":{"doc":"Asserts that the input value is a boolean. If multiple values are provided, each one is evaluated in order until a boolean is obtained. If none of the inputs are booleans, the expression is an error.\\n\\n - [Create a hover effect](https://maplibre.org/maplibre-gl-js/docs/examples/create-a-hover-effect/)","syntax":{"overloads":[{"parameters":["value_1","...","value_n"],"output-type":"boolean"}],"parameters":[{"name":"value_i","type":"any"}]},"example":["boolean",["feature-state","hover"],false],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"object":{"doc":"Asserts that the input value is an object. If multiple values are provided, each one is evaluated in order until an object is obtained. If none of the inputs are objects, the expression is an error.","syntax":{"overloads":[{"parameters":["value_1","...","value_n"],"output-type":"object"}],"parameters":[{"name":"value_i","type":"any"}]},"example":["object",["get","some-property"]],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"collator":{"doc":"Returns a `collator` for use in locale-dependent comparison operations. The `case-sensitive` and `diacritic-sensitive` options default to `false`. The `locale` argument specifies the IETF language tag of the locale to use. If none is provided, the default locale is used. If the requested locale is not available, the `collator` will use a system-defined fallback locale. Use `resolved-locale` to test the results of locale fallback behavior.","syntax":{"overloads":[{"parameters":["options"],"output-type":"collator"}],"parameters":[{"name":"options","type":"{ \\"case-sensitive\\"?: boolean, \\"diacritic-sensitive\\"?: boolean, \\"locale\\"?: string }"}]},"example":["collator",{"case-sensitive":true,"diacritic-sensitive":true,"locale":"fr"}],"group":"Types","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},"format":{"doc":"Returns a `formatted` string for displaying mixed-format text in the `text-field` property. The input may contain a string literal or expression, including an [`\'image\'`](#image) expression. Strings may be followed by a style override object that supports the following properties:\\n\\n- `\\"text-font\\"`: Overrides the font stack specified by the root layout property.\\n\\n- `\\"text-color\\"`: Overrides the color specified by the root paint property.\\n\\n- `\\"font-scale\\"`: Applies a scaling factor on `text-size` as specified by the root layout property.\\n\\n- `\\"vertical-align\\"`: Aligns vertically text section or image in relation to the row it belongs to. Possible values are: \\n\\t- `\\"bottom\\"` *default*: align the bottom of this section with the bottom of other sections.\\n<img alt=\\"Visual representation of bottom alignment\\" src=\\"https://github.com/user-attachments/assets/0474a2fd-a4b2-417c-9187-7a13a28695bc\\"/>\\n\\t- `\\"center\\"`: align the center of this section with the center of other sections.\\n<img alt=\\"Visual representation of center alignment\\" src=\\"https://github.com/user-attachments/assets/92237455-be6d-4c5d-b8f6-8127effc1950\\"/>\\n\\t- `\\"top\\"`: align the top of this section with the top of other sections.\\n<img alt=\\"Visual representation of top alignment\\" src=\\"https://github.com/user-attachments/assets/45dccb28-d977-4abb-a006-4ea9792b7c53\\"/>\\n\\t- Refer to [the design proposal](https://github.com/maplibre/maplibre-style-spec/issues/832) for more details.\\n\\n - [Change the case of labels](https://maplibre.org/maplibre-gl-js/docs/examples/change-case-of-labels/)\\n\\n - [Display and style rich text labels](https://maplibre.org/maplibre-gl-js/docs/examples/display-and-style-rich-text-labels/)","syntax":{"overloads":[{"parameters":["input_1","style_overrides_1?","...","input_n","style_overrides_n?"],"output-type":"formatted"}],"parameters":[{"name":"input_i","type":"string | image"},{"name":"style_overrides_i","type":"{ \\"text-font\\"?: string, \\"text-color\\"?: color, \\"font-scale\\"?: number, \\"vertical-align\\"?: \\"bottom\\" | \\"center\\" | \\"top\\" }"}]},"example":["format",["upcase",["get","FacilityName"]],{"font-scale":0.8},"\\n\\n",{},["downcase",["get","Comments"]],{"font-scale":0.6,"vertical-align":"center"}],"group":"Types","sdk-support":{"basic functionality":{"js":"0.48.0","android":"6.7.0","ios":"4.6.0"},"text-font":{"js":"0.48.0","android":"6.7.0","ios":"4.6.0"},"font-scale":{"js":"0.48.0","android":"6.7.0","ios":"4.6.0"},"text-color":{"js":"1.3.0","android":"7.3.0","ios":"4.10.0"},"vertical-align":{"js":"5.1.0","android":"https://github.com/maplibre/maplibre-native/issues/3055","ios":"https://github.com/maplibre/maplibre-native/issues/3055"},"image":{"js":"1.6.0","android":"8.6.0","ios":"5.7.0"}}},"image":{"doc":"Returns an `image` type for use in `icon-image`, `*-pattern` entries and as a section in the `format` expression. If set, the `image` argument will check that the requested image exists in the style and will return either the resolved image name or `null`, depending on whether or not the image is currently in the style. This validation process is synchronous and requires the image to have been added to the style before requesting it in the `image` argument.\\n\\n - [Use a fallback image](https://maplibre.org/maplibre-gl-js/docs/examples/use-a-fallback-image/)","syntax":{"overloads":[{"parameters":["image_name"],"output-type":"image"}],"parameters":[{"name":"image_name","type":"string"}]},"example":["image","marker_15"],"group":"Types","sdk-support":{"basic functionality":{"js":"1.4.0","android":"8.6.0","ios":"5.7.0"}}},"global-state":{"doc":"Retrieves a property value from global state that can be set with platform-specific APIs. Defaults can be provided using the [`state`](https://maplibre.org/maplibre-style-spec/root/#state) root property. Returns `null` if no value nor default value is set for the retrieved property.","group":"Lookup","syntax":{"overloads":[{"parameters":["property_name"],"output-type":"any"}],"parameters":[{"name":"property_name","type":"string literal","description":"The name of the global state property to retrieve."}]},"example":["global-state","someProperty"],"sdk-support":{"basic functionality":{"js":"https://github.com/maplibre/maplibre-gl-js/issues/4964","android":"https://github.com/maplibre/maplibre-native/issues/3302","ios":"https://github.com/maplibre/maplibre-native/issues/3302"}}},"number-format":{"doc":"Converts the input number into a string representation using the providing formatting rules. If set, the `locale` argument specifies the locale to use, as a BCP 47 language tag. If set, the `currency` argument specifies an ISO 4217 code to use for currency-style formatting. If set, the `min-fraction-digits` and `max-fraction-digits` arguments specify the minimum and maximum number of fractional digits to include.\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/display-html-clusters-with-custom-properties/)","syntax":{"overloads":[{"parameters":["input","format_options"],"output-type":"string"}],"parameters":[{"name":"input","type":"number"},{"name":"format_options","type":"{ \\"locale\\"?: string, \\"currency\\"?: string, \\"min-fraction-digits\\"?: number, \\"max-fraction-digits\\"?: number }"}]},"example":["number-format",["get","mag"],{"min-fraction-digits":1,"max-fraction-digits":1}],"group":"Types","sdk-support":{"basic functionality":{"js":"0.54.0","android":"8.4.0","ios":"supported"}}},"to-string":{"doc":"Converts the input value to a string. If the input is `null`, the result is `\\"\\"`. If the input is a boolean, the result is `\\"true\\"` or `\\"false\\"`. If the input is a number, it is converted to a string as specified by the [\\"NumberToString\\" algorithm](https://tc39.github.io/ecma262/#sec-tostring-applied-to-the-number-type) of the ECMAScript Language Specification. If the input is a color, it is converted to a string of the form `\\"rgba(r,g,b,a)\\"`, where `r`, `g`, and `b` are numerals ranging from 0 to 255, and `a` ranges from 0 to 1. Otherwise, the input is converted to a string in the format specified by the [`JSON.stringify`](https://tc39.github.io/ecma262/#sec-json.stringify) function of the ECMAScript Language Specification.\\n\\n - [Create a time slider](https://maplibre.org/maplibre-gl-js/docs/examples/create-a-time-slider/)","syntax":{"overloads":[{"parameters":["value"],"output-type":"string"}],"parameters":[{"name":"value","type":"any"}]},"example":["to-string",["get","mag"]],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"to-number":{"doc":"Converts the input value to a number, if possible. If the input is `null` or `false`, the result is 0. If the input is `true`, the result is 1. If the input is a string, it is converted to a number as specified by the [\\"ToNumber Applied to the String Type\\" algorithm](https://tc39.github.io/ecma262/#sec-tonumber-applied-to-the-string-type) of the ECMAScript Language Specification. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.","syntax":{"overloads":[{"parameters":["value_1","...","value_n"],"output-type":"number"}],"parameters":[{"name":"value_i","type":"any"}]},"example":["to-number","someProperty"],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"to-boolean":{"doc":"Converts the input value to a boolean. The result is `false` when the input is an empty string, 0, `false`, `null`, or `NaN`; otherwise it is `true`.","syntax":{"overloads":[{"parameters":["value"],"output-type":"boolean"}],"parameters":[{"name":"value","type":"any"}]},"example":["to-boolean","someProperty"],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"to-rgba":{"doc":"Returns a four-element array containing the input color\'s red, green, blue, and alpha components, in that order.","syntax":{"overloads":[{"parameters":["color"],"output-type":"array"}],"parameters":[{"name":"color","type":"color"}]},"example":["to-rgba","#ff0000"],"group":"Color","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"to-color":{"doc":"Converts the input value to a color. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.\\n\\n - [Visualize population density](https://maplibre.org/maplibre-gl-js/docs/examples/visualize-population-density/)","syntax":{"overloads":[{"parameters":["value_1","...","value_n"],"output-type":"color"}],"parameters":[{"name":"value_i","type":"any"}]},"example":["to-color","#edf8e9"],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"rgb":{"doc":"Creates a color value from red, green, and blue components, which must range between 0 and 255, and an alpha component of 1. If any component is out of range, the expression is an error.","syntax":{"overloads":[{"parameters":["red","green","blue"],"output-type":"color"}],"parameters":[{"name":"red","type":"number"},{"name":"green","type":"number"},{"name":"blue","type":"number"}]},"example":["rgb",255,0,0],"group":"Color","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"rgba":{"doc":"Creates a color value from red, green, blue components, which must range between 0 and 255, and an alpha component which must range between 0 and 1. If any component is out of range, the expression is an error.","syntax":{"overloads":[{"parameters":["red","green","blue","alpha"],"output-type":"color"}],"parameters":[{"name":"red","type":"number"},{"name":"green","type":"number"},{"name":"blue","type":"number"},{"name":"alpha","type":"number"}]},"example":["rgba",255,0,0,1],"group":"Color","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"get":{"doc":"Retrieves a property value from the current feature\'s properties, or from another object if a second argument is provided. Returns null if the requested property is missing.\\n\\n - [Change the case of labels](https://maplibre.org/maplibre-gl-js/docs/examples/change-case-of-labels/)\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/display-html-clusters-with-custom-properties/)\\n\\n - [Extrude polygons for 3D indoor mapping](https://maplibre.org/maplibre-gl-js/docs/examples/extrude-polygons-for-3d-indoor-mapping/)","syntax":{"overloads":[{"parameters":["property_name","object?"],"output-type":"any"}],"parameters":[{"name":"property_name","type":"string","description":"The name of the property to retrieve the value of."},{"name":"object","type":"object","description":"The object to retrieve the value from."}]},"example":["get","someProperty"],"group":"Lookup","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"has":{"doc":"Tests for the presence of a property value in the current feature\'s properties, or from another object if a second argument is provided.\\n\\n - [Create and style clusters](https://maplibre.org/maplibre-gl-js/docs/examples/create-and-style-clusters/)","syntax":{"overloads":[{"parameters":["property_name","object?"],"output-type":"boolean"}],"parameters":[{"name":"property_name","type":"string","description":"The name of the property to test for the presence of."},{"name":"object","type":"object","description":"The object in which to test for the presence of the `property_name` property."}]},"example":["has","someProperty"],"group":"Lookup","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"length":{"doc":"Gets the length of an array or string. In a string, a UTF-16 surrogate pair counts as a single position.","syntax":{"overloads":[{"parameters":["array_or_string"],"output-type":"number"}],"parameters":[{"name":"array_or_string","type":"array | string"}]},"example":["length",["get","myArray"]],"group":"Lookup","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"properties":{"doc":"Gets the feature properties object.  Note that in some cases, it may be more efficient to use [\\"get\\", \\"property_name\\"] directly.","syntax":{"overloads":[{"parameters":[],"output-type":"object"}]},"example":["properties"],"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"feature-state":{"doc":"Retrieves a property value from the current feature\'s state. Returns null if the requested property is not present on the feature\'s state. A feature\'s state is not part of the GeoJSON or vector tile data, and must be set programmatically on each feature. When `source.promoteId` is not provided, features are identified by their `id` attribute, which must be an integer or a string that can be cast to an integer. When `source.promoteId` is provided, features are identified by their `promoteId` property, which may be a number, string, or any primitive data type. Note that [\\"feature-state\\"] can only be used with paint properties that support data-driven styling.\\n\\n - [Create a hover effect](https://maplibre.org/maplibre-gl-js/docs/examples/create-a-hover-effect/)","syntax":{"overloads":[{"parameters":["property_name"],"output-type":"any"}],"parameters":[{"name":"property_name","type":"string"}]},"example":["feature-state","hover"],"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.46.0","ios":"https://github.com/maplibre/maplibre-native/issues/1698","android":"https://github.com/maplibre/maplibre-native/issues/1698"}}},"geometry-type":{"doc":"Returns the feature\'s simple geometry type: `Point`, `LineString`, or `Polygon`. `MultiPoint`, `MultiLineString`, and `MultiPolygon` are returned as `Point`, `LineString`, and `Polygon`, respectively.","syntax":{"overloads":[{"parameters":[],"output-type":"string"}]},"example":["==",["geometry-type"],"Polygon"],"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"id":{"doc":"Gets the feature\'s id, if it has one.","syntax":{"overloads":[{"parameters":[],"output-type":"any"}]},"example":["id"],"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"zoom":{"doc":"Gets the current zoom level.  Note that in style layout and paint properties, [\\"zoom\\"] may only appear as the input to a top-level \\"step\\" or \\"interpolate\\" expression.","syntax":{"overloads":[{"parameters":[],"output-type":"number"}]},"example":["interpolate",["linear"],["zoom"],15,0,15.05,["get","height"]],"group":"Zoom","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"heatmap-density":{"doc":"Gets the kernel density estimation of a pixel in a heatmap layer, which is a relative measure of how many data points are crowded around a particular pixel. Can only be used in the `heatmap-color` property.","syntax":{"overloads":[{"parameters":[],"output-type":"number"}]},"example":["heatmap-density"],"group":"Heatmap","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"elevation":{"doc":"Gets the elevation of a pixel (in meters above the vertical datum reference of the `raster-dem` tiles) from a `raster-dem` source. Can only be used in the `color-relief-color` property of a `color-relief` layer.","syntax":{"overloads":[{"parameters":[],"output-type":"number"}]},"example":["elevation"],"group":"Color Relief","sdk-support":{"basic functionality":{"js":"5.6.0","android":"https://github.com/maplibre/maplibre-native/issues/3408","ios":"https://github.com/maplibre/maplibre-native/issues/3408"}}},"line-progress":{"doc":"Gets the progress along a gradient line. Can only be used in the `line-gradient` property.","syntax":{"overloads":[{"parameters":[],"output-type":"number"}]},"example":["line-progress"],"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.5.0","ios":"4.6.0"}}},"accumulated":{"doc":"Gets the value of a cluster property accumulated so far. Can only be used in the `clusterProperties` option of a clustered GeoJSON source.","syntax":{"overloads":[{"parameters":[],"output-type":"any"}]},"example":["accumulated"],"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.53.0","ios":"supported","android":"supported"}}},"+":{"doc":"Returns the sum of the inputs.","syntax":{"overloads":[{"parameters":["input_1","...","input_n"],"output-type":"number"}],"parameters":[{"name":"input_i","type":"number"}]},"example":["+",2,3],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"*":{"doc":"Returns the product of the inputs.","syntax":{"overloads":[{"parameters":["input_1","...","input_n"],"output-type":"number"}],"parameters":[{"name":"input_i","type":"number"}]},"example":["*",2,3],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"-":{"doc":"For two inputs, returns the result of subtracting the second input from the first. For a single input, returns the result of subtracting it from 0.","syntax":{"overloads":[{"parameters":["input_1","input_2"],"output-type":"number"},{"parameters":["single_input"],"output-type":"number"}],"parameters":[{"name":"input_1","type":"number","description":"The number from which to subtract `input_2`."},{"name":"input_2","type":"number","description":"The number to subtract from `input_1`."},{"name":"single_input","type":"number","description":"The number to subtract from 0."}]},"example":["-",10],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"/":{"doc":"Returns the result of floating point division of the first input by the second.\\n\\n - [Visualize population density](https://maplibre.org/maplibre-gl-js/docs/examples/visualize-population-density/)","syntax":{"overloads":[{"parameters":["input_1","input_2"],"output-type":"number"}],"parameters":[{"name":"input_1","type":"number","description":"The dividend."},{"name":"input_2","type":"number","description":"The divisor."}]},"example":["/",["get","population"],["get","sq-km"]],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"%":{"doc":"Returns the remainder after integer division of the first input by the second.","syntax":{"overloads":[{"parameters":["input_1","input_2"],"output-type":"number"}],"parameters":[{"name":"input_1","type":"number","description":"The dividend."},{"name":"input_2","type":"number","description":"The divisor."}]},"example":["%",10,3],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"^":{"doc":"Returns the result of raising the first input to the power specified by the second.","syntax":{"overloads":[{"parameters":["input_1","input_2"],"output-type":"number"}],"parameters":[{"name":"input_1","type":"number","description":"The base."},{"name":"input_2","type":"number","description":"The exponent."}]},"example":["^",2,3],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"sqrt":{"doc":"Returns the square root of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number","description":"The radicand."}]},"example":["sqrt",9],"group":"Math","sdk-support":{"basic functionality":{"js":"0.42.0","android":"6.0.0","ios":"4.0.0"}}},"log10":{"doc":"Returns the base-ten logarithm of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["log10",8],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"ln":{"doc":"Returns the natural logarithm of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["ln",8],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"log2":{"doc":"Returns the base-two logarithm of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["log2",8],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"sin":{"doc":"Returns the sine of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["sin",1],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"cos":{"doc":"Returns the cosine of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["cos",1],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"tan":{"doc":"Returns the tangent of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["tan",1],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"asin":{"doc":"Returns the arcsine of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["asin",1],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"acos":{"doc":"Returns the arccosine of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["acos",1],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"atan":{"doc":"Returns the arctangent of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["atan",1],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"min":{"doc":"Returns the minimum value of the inputs.","syntax":{"overloads":[{"parameters":["input_1","...","input_n"],"output-type":"number"}],"parameters":[{"name":"input_i","type":"number"}]},"example":["min",1,2],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"max":{"doc":"Returns the maximum value of the inputs.","syntax":{"overloads":[{"parameters":["input_1","...","input_n"],"output-type":"number"}],"parameters":[{"name":"input_i","type":"number"}]},"example":["max",1,2],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"round":{"doc":"Rounds the input to the nearest integer. Halfway values are rounded away from zero. For example, `[\\"round\\", -1.5]` evaluates to -2.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["round",1.5],"group":"Math","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.0.0","ios":"4.0.0"}}},"abs":{"doc":"Returns the absolute value of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["abs",-1.5],"group":"Math","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.0.0","ios":"4.0.0"}}},"ceil":{"doc":"Returns the smallest integer that is greater than or equal to the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["ceil",1.5],"group":"Math","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.0.0","ios":"4.0.0"}}},"floor":{"doc":"Returns the largest integer that is less than or equal to the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["floor",1.5],"group":"Math","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.0.0","ios":"4.0.0"}}},"distance":{"doc":"Returns the shortest distance in meters between the evaluated feature and the input geometry. The input value can be a valid GeoJSON of type `Point`, `MultiPoint`, `LineString`, `MultiLineString`, `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Distance values returned may vary in precision due to loss in precision from encoding geometries, particularly below zoom level 13.","syntax":{"overloads":[{"parameters":["geojson"],"output-type":"number"}],"parameters":[{"name":"geojson","type":"GeoJSON object"}]},"example":["distance",{"type":"Point","coordinates":[0,0]}],"group":"Math","sdk-support":{"basic functionality":{"js":"4.2.0","android":"9.2.0","ios":"5.9.0"}}},"==":{"doc":"Returns `true` if the input values are equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.\\n\\n - [Add multiple geometries from one GeoJSON source](https://maplibre.org/maplibre-gl-js/docs/examples/multiple-geometries/)\\n\\n - [Create a time slider](https://maplibre.org/maplibre-gl-js/docs/examples/timeline-animation/)\\n\\n - [Display buildings in 3D](https://maplibre.org/maplibre-gl-js/docs/examples/display-buildings-in-3d/)\\n\\n - [Filter symbols by toggling a list](https://maplibre.org/maplibre-gl-js/docs/examples/filter-symbols-by-toggling-a-list/)","syntax":{"overloads":[{"parameters":["input_1","input_2","collator?"],"output-type":"boolean"}],"parameters":[{"name":"input_1","type":"any"},{"name":"input_2","type":"any"},{"name":"collator","type":"collator","description":"Options for locale-dependent comparison."}]},"example":["==","$type","Polygon"],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},"!=":{"doc":"Returns `true` if the input values are not equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/display-html-clusters-with-custom-properties/)","syntax":{"overloads":[{"parameters":["input_1","input_2","collator?"],"output-type":"boolean"}],"parameters":[{"name":"input_1","type":"any"},{"name":"input_2","type":"any"},{"name":"collator","type":"collator","description":"Options for locale-dependent comparison."}]},"example":["!=","cluster",true],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},">":{"doc":"Returns `true` if the first input is strictly greater than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.","syntax":{"overloads":[{"parameters":["string_1","string_2","collator?"],"output-type":"boolean"},{"parameters":["number_1","number_2","collator?"],"output-type":"boolean"}],"parameters":[{"name":"string_i","type":"string"},{"name":"number_i","type":"number"},{"name":"collator","type":"collator","description":"Options for locale-dependent comparison."}]},"example":[">",["get","mag"],2],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},"<":{"doc":"Returns `true` if the first input is strictly less than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/display-html-clusters-with-custom-properties/)","syntax":{"overloads":[{"parameters":["string_1","string_2","collator?"],"output-type":"boolean"},{"parameters":["number_1","number_2","collator?"],"output-type":"boolean"}],"parameters":[{"name":"string_i","type":"string"},{"name":"number_i","type":"number"},{"name":"collator","type":"collator","description":"Options for locale-dependent comparison."}]},"example":["<",["get","mag"],2],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},">=":{"doc":"Returns `true` if the first input is greater than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/display-html-clusters-with-custom-properties/)","syntax":{"overloads":[{"parameters":["string_1","string_2","collator?"],"output-type":"boolean"},{"parameters":["number_1","number_2","collator?"],"output-type":"boolean"}],"parameters":[{"name":"string_i","type":"string"},{"name":"number_i","type":"number"},{"name":"collator","type":"collator","description":"Options for locale-dependent comparison."}]},"example":[">=",["get","mag"],6],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},"<=":{"doc":"Returns `true` if the first input is less than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.","syntax":{"overloads":[{"parameters":["string_1","string_2","collator?"],"output-type":"boolean"},{"parameters":["number_1","number_2","collator?"],"output-type":"boolean"}],"parameters":[{"name":"string_i","type":"string"},{"name":"number_i","type":"number"},{"name":"collator","type":"collator","description":"Options for locale-dependent comparison."}]},"example":["<=",["get","mag"],6],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},"all":{"doc":"Returns `true` if all the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `false`, the result is `false` and no further input expressions are evaluated.\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/display-html-clusters-with-custom-properties/)","syntax":{"overloads":[{"parameters":["input_1","...","input_n"],"output-type":"boolean"}],"parameters":[{"name":"input_i","type":"boolean"}]},"example":["all",[">=",["get","mag"],4],["<",["get","mag"],5]],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"any":{"doc":"Returns `true` if any of the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `true`, the result is `true` and no further input expressions are evaluated.","syntax":{"overloads":[{"parameters":["input_1","...","input_n"],"output-type":"boolean"}],"parameters":[{"name":"input_i","type":"boolean"}]},"example":["any",[">=",["get","mag"],4],["<",["get","mag"],5]],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"!":{"doc":"Logical negation. Returns `true` if the input is `false`, and `false` if the input is `true`.\\n\\n - [Create and style clusters](https://maplibre.org/maplibre-gl-js/docs/examples/create-and-style-clusters/)","syntax":{"overloads":[{"parameters":["input"],"output-type":"boolean"}],"parameters":[{"name":"input","type":"boolean"}]},"example":["!",["has","point_count"]],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"within":{"doc":"Returns `true` if the evaluated feature is fully contained inside a boundary of the input geometry, `false` otherwise. The input value can be a valid GeoJSON of type `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Supported features for evaluation:\\n\\n- `Point`: Returns `false` if a point is on the boundary or falls outside the boundary.\\n\\n- `LineString`: Returns `false` if any part of a line falls outside the boundary, the line intersects the boundary, or a line\'s endpoint is on the boundary.","syntax":{"overloads":[{"parameters":["geojson"],"output-type":"boolean"}],"parameters":[{"name":"geojson","type":"GeoJSON object"}]},"example":["within",{"type":"Polygon","coordinates":[[[0,0],[0,5],[5,5],[5,0],[0,0]]]}],"group":"Decision","sdk-support":{"basic functionality":{"js":"1.9.0","android":"9.1.0","ios":"5.8.0"}}},"is-supported-script":{"doc":"Returns `true` if the input string is expected to render legibly. Returns `false` if the input string contains sections that cannot be rendered without potential loss of meaning (e.g. Indic scripts that require complex text shaping, or right-to-left scripts if the `mapbox-gl-rtl-text` plugin is not in use in MapLibre GL JS).","syntax":{"overloads":[{"parameters":["input"],"output-type":"boolean"}],"parameters":[{"name":"input","type":"string"}]},"example":["is-supported-script",""],"group":"String","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.6.0","ios":"supported"}}},"upcase":{"doc":"Returns the input string converted to uppercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.\\n\\n - [Change the case of labels](https://maplibre.org/maplibre-gl-js/docs/examples/change-case-of-labels/)","syntax":{"overloads":[{"parameters":["input"],"output-type":"string"}],"parameters":[{"name":"input","type":"string"}]},"example":["upcase",["get","name"]],"group":"String","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"downcase":{"doc":"Returns the input string converted to lowercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.\\n\\n - [Change the case of labels](https://maplibre.org/maplibre-gl-js/docs/examples/change-case-of-labels/)","syntax":{"overloads":[{"parameters":["input"],"output-type":"string"}],"parameters":[{"name":"input","type":"string"}]},"example":["downcase",["get","name"]],"group":"String","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"concat":{"doc":"Returns a `string` consisting of the concatenation of the inputs. Each input is converted to a string as if by `to-string`.\\n\\n - [Add a generated icon to the map](https://maplibre.org/maplibre-gl-js/docs/examples/add-a-generated-icon-to-the-map/)\\n\\n - [Create a time slider](https://maplibre.org/maplibre-gl-js/docs/examples/create-a-time-slider/)\\n\\n - [Use a fallback image](https://maplibre.org/maplibre-gl-js/docs/examples/fallback-image/)\\n\\n - [Variable label placement](https://maplibre.org/maplibre-gl-js/docs/examples/variable-label-placement/)","syntax":{"overloads":[{"parameters":["input_1","...","input_n"],"output-type":"string"}],"parameters":[{"name":"input_i","type":"any"}]},"example":["concat","square-rgb-",["get","color"]],"group":"String","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"resolved-locale":{"doc":"Returns the IETF language tag of the locale being used by the provided `collator`. This can be used to determine the default system locale, or to determine if a requested locale was successfully loaded.","syntax":{"overloads":[{"parameters":["collator"],"output-type":"string"}],"parameters":[{"name":"collator","type":"collator"}]},"example":["resolved-locale",["collator",{"case-sensitive":true,"diacritic-sensitive":false,"locale":"de"}]],"group":"String","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}}}}'),Pde={anchor:{type:"enum",default:"viewport",values:{map:{doc:"The position of the light source is aligned to the rotation of the map."},viewport:{doc:"The position of the light source is aligned to the rotation of the viewport."}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]},doc:"Whether extruded geometries are lit relative to the map or viewport.",example:"map","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},doc:"Position of the light source relative to lit (extruded) geometries, in [r radial coordinate, a azimuthal angle, p polar angle] where r indicates the distance from the center of the base of an object to its light, a indicates the position of the light relative to 0 (0 when `light.anchor` is set to `viewport` corresponds to the top of the viewport, or 0 when `light.anchor` is set to `map` corresponds to due north, and degrees proceed clockwise), and p indicates the height of the light (from 0, directly above, to 180, directly below).",example:[1.5,90,80],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Color tint for lighting extruded geometries.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Intensity of lighting (on a scale from 0 to 1). Higher numbers will present as more extreme contrast.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}}},Ude={"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The base color for the sky."},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The base color at the horizon."},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The base color for the fog. Requires 3D terrain."},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"How to blend the fog over the 3D terrain. Where 0 is the map center and 1 is the horizon."},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"How to blend the fog color and the horizon color. Where 0 is using the horizon color only and 1 is using the fog color only."},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"How to blend the sky color and the horizon color. Where 1 is blending the color at the middle of the sky and 0 is not blending at all and using the sky color only."},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"How to blend the atmosphere. Where 1 is visible atmosphere and 0 is hidden. It is best to interpolate this expression when using globe projection."}},Kde={source:{type:"string",doc:"The source for the terrain data.",required:!0,"sdk-support":{"basic functionality":{js:"2.2.0",ios:"https://github.com/maplibre/maplibre-native/issues/252",android:"https://github.com/maplibre/maplibre-native/issues/252"}}},exaggeration:{type:"number",minimum:0,doc:"The exaggeration of the terrain - how high it will look.",default:1,"sdk-support":{"basic functionality":{js:"2.2.0",ios:"https://github.com/maplibre/maplibre-native/issues/252",android:"https://github.com/maplibre/maplibre-native/issues/252"}}}},Lde={type:{type:"projectionDefinition",doc:"The projection definition type. Can be specified as a string, a transition state, or an expression.",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},Fde=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],zde={"fill-antialias":{type:"boolean",default:!0,doc:"Whether or not the fill should be antialiased.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill layer. In contrast to the `fill-color`, this value will also affect the 1px stroke around the fill, if the stroke is used.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.21.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",doc:"The color of the filled part of this layer. This color can be specified as `rgba` with an alpha component and the color's opacity will not affect the opacity of the 1px stroke, if it is used.",transition:!0,requires:[{"!":"fill-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",doc:"The outline color of the fill. Matches the value of `fill-color` if unspecified.",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{doc:"The fill is translated relative to the map."},viewport:{doc:"The fill is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-translate`.",default:"map",requires:["fill-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing image fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},jde={"line-opacity":{type:"number",doc:"The opacity at which the line will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",doc:"The color with which the line will be drawn.",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.23.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{doc:"The line is translated relative to the map."},viewport:{doc:"The line is translated relative to the viewport."}},doc:"Controls the frame of reference for `line-translate`.",default:"map",requires:["line-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",doc:"Stroke thickness.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,doc:"Draws a line casing outside of a line's actual path. Value indicates the width of the inner gap.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,doc:"The line's offset. For linear features, a positive value offsets the line to the right, relative to the direction of the line, and a negative value to the left. For polygon features, a positive value results in an inset, and a negative value results in an outset.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.12.1",android:"3.0.0",ios:"3.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Blur applied to the line, in pixels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",doc:'Specifies the lengths of the alternating dashes and gaps that form the dash pattern. The lengths are later scaled by the line width. To convert a dash length to pixels, multiply the length by the current line width. GeoJSON sources with `lineMetrics: true` specified won\'t render dashed lines to the expected scale. Zoom-dependent expressions will be evaluated only at integer zoom levels. The only way to create an array value is using `["literal", [...]]`; arrays cannot be read from or derived from feature properties.',minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"5.8.0",ios:"https://github.com/maplibre/maplibre-native/issues/744",android:"https://github.com/maplibre/maplibre-native/issues/744"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing image lines. For seamless patterns, image width must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",doc:'Defines a gradient with which to color a line feature. Can only be used with GeoJSON sources that specify `"lineMetrics": true`.',transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],"sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.4.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},Nde={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",doc:"Circle radius.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",doc:"The fill color of the circle.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,doc:"Amount to blur the circle. 1 blurs the circle such that only the centerpoint is full opacity.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",doc:"The opacity at which the circle will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{doc:"The circle is translated relative to the map."},viewport:{doc:"The circle is translated relative to the viewport."}},doc:"Controls the frame of reference for `circle-translate`.",default:"map",requires:["circle-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{doc:"Circles are scaled according to their apparent distance to the camera."},viewport:{doc:"Circles are not scaled."}},default:"map",doc:"Controls the scaling behavior of the circle when the map is pitched.","sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{doc:"The circle is aligned to the plane of the map."},viewport:{doc:"The circle is aligned to the plane of the viewport."}},default:"viewport",doc:"Orientation of circle when map is pitched.","sdk-support":{"basic functionality":{js:"0.39.0",android:"5.2.0",ios:"3.7.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The width of the circle's stroke. Strokes are placed outside of the `circle-radius`.","sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",doc:"The stroke color of the circle.",transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",doc:"The opacity of the circle's stroke.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},Gde={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",doc:"Radius of influence of one heatmap point in pixels. Increasing the value makes the heatmap smoother, but less detailed.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"},"data-driven styling":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,doc:"A measure of how much an individual point contributes to the heatmap. A value of 10 would be equivalent to having 10 points of weight 1 in the same spot. Especially useful when combined with clustering.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"},"data-driven styling":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,doc:"Similar to `heatmap-weight` but controls the intensity of the heatmap globally. Primarily used for adjusting the heatmap based on zoom level.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],doc:'Defines the color of each pixel based on its density value in a heatmap.  Should be an expression that uses `["heatmap-density"]` as input.',transition:!1,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",doc:"The global opacity at which the heatmap layer will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Wde={"icon-opacity":{doc:"The opacity at which the icon will be drawn.",type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,doc:"The color of the icon. This can only be used with SDF icons.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,doc:"The color of the icon's halo. Icon halos can only be used with SDF icons.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the icon outline. \n\nThe unit is in pixels only for SDF sprites that were created with a blur radius of 8, multiplied by the display density. I.e., the radius needs to be 16 for `@2x` sprites, etc.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Fade out the halo towards the outside.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the icon's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{doc:"Icons are translated relative to the map."},viewport:{doc:"Icons are translated relative to the viewport."}},doc:"Controls the frame of reference for `icon-translate`.",default:"map",requires:["icon-image","icon-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",doc:"The opacity at which the text will be drawn.",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",doc:"The color with which the text will be drawn.",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,doc:"The color of the text's halo, which helps it stand out from backgrounds.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the font outline. Max text halo width is 1/4 of the font-size.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The halo's fadeout distance towards the outside.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the text's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{doc:"The text is translated relative to the map."},viewport:{doc:"The text is translated relative to the viewport."}},doc:"Controls the frame of reference for `text-translate`.",default:"map",requires:["text-field","text-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},Qde={"raster-opacity":{type:"number",doc:"The opacity at which the image will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",doc:"Rotates hues around the color wheel.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the minimum brightness.",default:0,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the maximum brightness.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",doc:"Increase or reduce the saturation of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",doc:"Increase or reduce the contrast of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",doc:"The resampling/interpolation method to use for overscaling, also known as texture magnification filter",values:{linear:{doc:"(Bi)linear filtering interpolates pixel values using the weighted average of the four closest original source pixels creating a smooth but blurry look when overscaled"},nearest:{doc:"Nearest neighbor filtering interpolates pixel values using the nearest original source pixel creating a sharp but pixelated look when overscaled"}},default:"linear","sdk-support":{"basic functionality":{js:"0.47.0",android:"6.3.0",ios:"4.2.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",doc:"Fade duration when a new tile is added, or when a video is started or its coordinates are updated.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},qde={"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,doc:"The direction of the light source(s) used to generate the hillshading with 0 as the top of the viewport if `hillshade-illumination-anchor` is set to `viewport` and due north if `hillshade-illumination-anchor` is set to `map`. Only when `hillshade-method` is set to `multidirectional` can you specify multiple light sources.",transition:!1,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"},multidirectional:{js:"5.5.0",android:"https://github.com/maplibre/maplibre-native/issues/3396",ios:"https://github.com/maplibre/maplibre-native/issues/3396"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,doc:"The altitude of the light source(s) used to generate the hillshading with 0 as sunset and 90 as noon. Only when `hillshade-method` is set to `multidirectional` can you specify multiple light sources.",transition:!1,"sdk-support":{"basic functionality":{js:"5.5.0",android:"https://github.com/maplibre/maplibre-native/issues/3396",ios:"https://github.com/maplibre/maplibre-native/issues/3396"},multidirectional:{js:"5.5.0",android:"https://github.com/maplibre/maplibre-native/issues/3396",ios:"https://github.com/maplibre/maplibre-native/issues/3396"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{doc:"The hillshade illumination is relative to the north direction."},viewport:{doc:"The hillshade illumination is relative to the top of the viewport."}},default:"viewport",doc:"Direction of light source when map is rotated.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",doc:"Intensity of the hillshade",default:.5,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",doc:"The shading color of areas that face away from the light source(s). Only when `hillshade-method` is set to `multidirectional` can you specify multiple light sources.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"},multidirectional:{js:"5.5.0",android:"https://github.com/maplibre/maplibre-native/issues/3396",ios:"https://github.com/maplibre/maplibre-native/issues/3396"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",doc:"The shading color of areas that faces towards the light source(s). Only when `hillshade-method` is set to `multidirectional` can you specify multiple light sources.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"},multidirectional:{js:"5.5.0",android:"https://github.com/maplibre/maplibre-native/issues/3396",ios:"https://github.com/maplibre/maplibre-native/issues/3396"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",doc:"The shading color used to accentuate rugged terrain like sharp cliffs and gorges.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{doc:"The legacy hillshade method."},basic:{doc:"Basic hillshade. Uses a simple physics model where the reflected light intensity is proportional to the cosine of the angle between the incident light and the surface normal. Similar to GDAL's `gdaldem` default algorithm."},combined:{doc:"Hillshade algorithm whose intensity scales with slope. Similar to GDAL's `gdaldem` with `-combined` option."},igor:{doc:"Hillshade algorithm which tries to minimize effects on other map features beneath. Similar to GDAL's `gdaldem` with `-igor` option."},multidirectional:{doc:"Hillshade with multiple illumination directions. Uses the basic hillshade model with multiple independent light sources."}},default:"standard",doc:"The hillshade algorithm to use, one of `standard`, `basic`, `combined`, `igor`, or `multidirectional`. ![image](assets/hillshade_methods.png)","sdk-support":{"basic functionality":{js:"5.5.0",android:"https://github.com/maplibre/maplibre-native/issues/3396",ios:"https://github.com/maplibre/maplibre-native/issues/3396"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},Yde={"background-color":{type:"color",default:"#000000",doc:"The color with which the background will be drawn.",transition:!0,requires:[{"!":"background-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing an image background. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity at which the background will be drawn.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},$de={duration:{type:"number",default:300,minimum:0,units:"milliseconds",doc:"Time allotted for transitions to complete."},delay:{type:"number",default:0,minimum:0,units:"milliseconds",doc:"Length of time before a transition begins."}},Vde={"*":{type:"string",doc:"A name of a feature property to use as ID for feature state."}},Zr={$version:ude,$root:cde,sources:Ade,source:hde,source_vector:dde,source_raster:fde,source_raster_dem:pde,source_geojson:mde,source_video:gde,source_image:yde,layer:vde,layout:bde,layout_background:Cde,layout_fill:_de,layout_circle:xde,layout_heatmap:Mde,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},"property-type":"constant"}},layout_line:wde,layout_symbol:Sde,layout_raster:Ede,layout_hillshade:Ode,"layout_color-relief":{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{}},"property-type":"constant"}},filter:Bde,filter_operator:Ide,geometry_type:kde,function:{expression:{type:"expression",doc:"An expression."},stops:{type:"array",doc:"An array of stops.",value:"function_stop"},base:{type:"number",default:1,minimum:0,doc:"The exponential base of the interpolation curve. It controls the rate at which the result increases. Higher values make the result increase more towards the high end of the range. With `1` the stops are interpolated linearly."},property:{type:"string",doc:"The name of a feature property to use as the function input.",default:"$zoom"},type:{type:"enum",values:{identity:{doc:"Return the input value as the output value."},exponential:{doc:"Generate an output by interpolating between stops just less than and just greater than the function input."},interval:{doc:"Return the output value of the stop just less than the function input."},categorical:{doc:"Return the output value of the stop equal to the function input."}},doc:"The interpolation strategy to use in function evaluation.",default:"exponential"},colorSpace:{type:"enum",values:{rgb:{doc:"Use the RGB color space to interpolate color values"},lab:{doc:"Use the LAB color space to interpolate color values."},hcl:{doc:"Use the HCL color space to interpolate color values, interpolating the Hue, Chroma, and Luminance channels individually."}},doc:"The color space in which colors interpolated. Interpolating colors in perceptual color spaces like LAB and HCL tend to produce color ramps that look more consistent and produce colors that can be differentiated more easily than those interpolated in RGB space.",default:"rgb"},default:{type:"*",required:!1,doc:`A value to serve as a fallback function result when a value isn't otherwise available. It is used in the following circumstances:

* In categorical functions, when the feature value does not match any of the stop domain values.

* In property and zoom-and-property functions, when a feature does not contain a value for the specified property.

* In identity functions, when the feature value is not valid for the style property (for example, if the function is being used for a \`circle-color\` property but the feature property value is not a string or not a valid color).

* In interval or exponential property and zoom-and-property functions, when the feature value is not numeric.

If no default is provided, the style property's default is used in these circumstances.`}},function_stop:Tde,expression:Rde,expression_name:Dde,light:Pde,sky:Ude,terrain:Kde,projection:Lde,paint:Fde,paint_fill:zde,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill extrusion layer. This is rendered on a per-layer, not per-feature, basis, and data-driven styling is not available.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",doc:"The base color of the extruded fill. The extrusion's surfaces will be shaded differently based on this color in combination with the root `light` settings. If this color is specified as `rgba` with an alpha component, the alpha component will be ignored; use `fill-extrusion-opacity` to set layer opacity.",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up (on the flat plane), respectively.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{doc:"The fill extrusion is translated relative to the map."},viewport:{doc:"The fill extrusion is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-extrusion-translate`.",default:"map",requires:["fill-extrusion-translate"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing images on extruded fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude this layer.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude the base of this layer. Must be less than or equal to `fill-extrusion-height`.",transition:!0,requires:["fill-extrusion-height"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,doc:"Whether to apply a vertical gradient to the sides of a fill-extrusion layer. If true, sides will be shaded slightly darker farther down.",transition:!1,"sdk-support":{"basic functionality":{js:"0.50.0",ios:"4.7.0",android:"7.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:jde,paint_circle:Nde,paint_heatmap:Gde,paint_symbol:Wde,paint_raster:Qde,paint_hillshade:qde,"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity at which the color-relief will be drawn.",transition:!0,"sdk-support":{"basic functionality":{js:"5.6.0",android:"https://github.com/maplibre/maplibre-native/issues/3408",ios:"https://github.com/maplibre/maplibre-native/issues/3408"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",doc:'Defines the color of each pixel based on its elevation. Should be an expression that uses `["elevation"]` as input.',example:["interpolate",["linear"],["elevation"],0,"black",8849,"white"],transition:!1,"sdk-support":{"basic functionality":{js:"5.6.0",android:"https://github.com/maplibre/maplibre-native/issues/3408",ios:"https://github.com/maplibre/maplibre-native/issues/3408"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:Yde,transition:$de,"property-type":{"data-driven":{type:"property-type",doc:"Property is interpolable and can be represented using a property expression."},"cross-faded":{type:"property-type",doc:"Property is non-interpolable; rather, its values will be cross-faded to smoothly transition between integer zooms."},"cross-faded-data-driven":{type:"property-type",doc:"Property is non-interpolable; rather, its values will be cross-faded to smoothly transition between integer zooms. It can be represented using a property expression."},"color-ramp":{type:"property-type",doc:"Property should be specified using a color ramp from which the output color can be sampled based on a property calculation."},"data-constant":{type:"property-type",doc:"Property is interpolable but cannot be represented using a property expression."},constant:{type:"property-type",doc:"Property is constant across all zoom levels and property values."}},promoteId:Vde};var sw={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.9.0/LICENSE.txt
 */var Hde=sw.exports,VF;function Zde(){return VF||(VF=1,(function(n,e){(function(t,i){n.exports=i()})(Hde,(function(){var t={},i={};function r(s,a,c){if(i[s]=c,s==="index"){var h="var sharedModule = {}; ("+i.shared+")(sharedModule); ("+i.worker+")(sharedModule);",m={};return i.shared(m),i.index(t,m),typeof window<"u"&&t.setWorkerUrl(window.URL.createObjectURL(new Blob([h],{type:"text/javascript"}))),t}}r("shared",["exports"],(function(s){function a(f,u,d,b){return new(d||(d=Promise))((function(w,k){function D(te){try{N(b.next(te))}catch(re){k(re)}}function K(te){try{N(b.throw(te))}catch(re){k(re)}}function N(te){var re;te.done?w(te.value):(re=te.value,re instanceof d?re:new d((function(Ae){Ae(re)}))).then(D,K)}N((b=b.apply(f,u||[])).next())}))}function c(f,u){this.x=f,this.y=u}function h(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f}var m,y;typeof SuppressedError=="function"&&SuppressedError,c.prototype={clone(){return new c(this.x,this.y)},add(f){return this.clone()._add(f)},sub(f){return this.clone()._sub(f)},multByPoint(f){return this.clone()._multByPoint(f)},divByPoint(f){return this.clone()._divByPoint(f)},mult(f){return this.clone()._mult(f)},div(f){return this.clone()._div(f)},rotate(f){return this.clone()._rotate(f)},rotateAround(f,u){return this.clone()._rotateAround(f,u)},matMult(f){return this.clone()._matMult(f)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(f){return this.x===f.x&&this.y===f.y},dist(f){return Math.sqrt(this.distSqr(f))},distSqr(f){const u=f.x-this.x,d=f.y-this.y;return u*u+d*d},angle(){return Math.atan2(this.y,this.x)},angleTo(f){return Math.atan2(this.y-f.y,this.x-f.x)},angleWith(f){return this.angleWithSep(f.x,f.y)},angleWithSep(f,u){return Math.atan2(this.x*u-this.y*f,this.x*f+this.y*u)},_matMult(f){const u=f[2]*this.x+f[3]*this.y;return this.x=f[0]*this.x+f[1]*this.y,this.y=u,this},_add(f){return this.x+=f.x,this.y+=f.y,this},_sub(f){return this.x-=f.x,this.y-=f.y,this},_mult(f){return this.x*=f,this.y*=f,this},_div(f){return this.x/=f,this.y/=f,this},_multByPoint(f){return this.x*=f.x,this.y*=f.y,this},_divByPoint(f){return this.x/=f.x,this.y/=f.y,this},_unit(){return this._div(this.mag()),this},_perp(){const f=this.y;return this.y=this.x,this.x=-f,this},_rotate(f){const u=Math.cos(f),d=Math.sin(f),b=d*this.x+u*this.y;return this.x=u*this.x-d*this.y,this.y=b,this},_rotateAround(f,u){const d=Math.cos(f),b=Math.sin(f),w=u.y+b*(this.x-u.x)+d*(this.y-u.y);return this.x=u.x+d*(this.x-u.x)-b*(this.y-u.y),this.y=w,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:c},c.convert=function(f){if(f instanceof c)return f;if(Array.isArray(f))return new c(+f[0],+f[1]);if(f.x!==void 0&&f.y!==void 0)return new c(+f.x,+f.y);throw new Error("Expected [x, y] or {x, y} point format")};var M=(function(){if(y)return m;function f(u,d,b,w){this.cx=3*u,this.bx=3*(b-u)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*d,this.by=3*(w-d)-this.cy,this.ay=1-this.cy-this.by,this.p1x=u,this.p1y=d,this.p2x=b,this.p2y=w}return y=1,m=f,f.prototype={sampleCurveX:function(u){return((this.ax*u+this.bx)*u+this.cx)*u},sampleCurveY:function(u){return((this.ay*u+this.by)*u+this.cy)*u},sampleCurveDerivativeX:function(u){return(3*this.ax*u+2*this.bx)*u+this.cx},solveCurveX:function(u,d){if(d===void 0&&(d=1e-6),u<0)return 0;if(u>1)return 1;for(var b=u,w=0;w<8;w++){var k=this.sampleCurveX(b)-u;if(Math.abs(k)<d)return b;var D=this.sampleCurveDerivativeX(b);if(Math.abs(D)<1e-6)break;b-=k/D}var K=0,N=1;for(b=u,w=0;w<20&&(k=this.sampleCurveX(b),!(Math.abs(k-u)<d));w++)u>k?K=b:N=b,b=.5*(N-K)+K;return b},solve:function(u,d){return this.sampleCurveY(this.solveCurveX(u,d))}},m})(),x=h(M);let T,P;function F(){return T==null&&(T=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),T}function j(){if(P==null&&(P=!1,F())){const u=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(u){for(let b=0;b<25;b++){const w=4*b;u.fillStyle=`rgb(${w},${w+1},${w+2})`,u.fillRect(b%5,Math.floor(b/5),1,1)}const d=u.getImageData(0,0,5,5).data;for(let b=0;b<100;b++)if(b%4!=3&&d[b]!==b){P=!0;break}}}return P||!1}var q=1e-6,V=typeof Float32Array<"u"?Float32Array:Array;function H(){var f=new V(9);return V!=Float32Array&&(f[1]=0,f[2]=0,f[3]=0,f[5]=0,f[6]=0,f[7]=0),f[0]=1,f[4]=1,f[8]=1,f}function Q(f){return f[0]=1,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=1,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=1,f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f}function Y(){var f=new V(3);return V!=Float32Array&&(f[0]=0,f[1]=0,f[2]=0),f}function z(f){var u=f[0],d=f[1],b=f[2];return Math.sqrt(u*u+d*d+b*b)}function se(f,u,d){var b=new V(3);return b[0]=f,b[1]=u,b[2]=d,b}function le(f,u,d){return f[0]=u[0]+d[0],f[1]=u[1]+d[1],f[2]=u[2]+d[2],f}function pe(f,u,d){return f[0]=u[0]*d,f[1]=u[1]*d,f[2]=u[2]*d,f}function de(f,u,d){var b=u[0],w=u[1],k=u[2],D=d[0],K=d[1],N=d[2];return f[0]=w*N-k*K,f[1]=k*D-b*N,f[2]=b*K-w*D,f}var ve,Ee=z;function Re(f,u,d){var b=u[0],w=u[1],k=u[2],D=u[3];return f[0]=d[0]*b+d[4]*w+d[8]*k+d[12]*D,f[1]=d[1]*b+d[5]*w+d[9]*k+d[13]*D,f[2]=d[2]*b+d[6]*w+d[10]*k+d[14]*D,f[3]=d[3]*b+d[7]*w+d[11]*k+d[15]*D,f}function je(){var f=new V(4);return V!=Float32Array&&(f[0]=0,f[1]=0,f[2]=0),f[3]=1,f}function Ie(f,u,d,b){var w=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"zyx",k=Math.PI/360;u*=k,b*=k,d*=k;var D=Math.sin(u),K=Math.cos(u),N=Math.sin(d),te=Math.cos(d),re=Math.sin(b),Ae=Math.cos(b);switch(w){case"xyz":f[0]=D*te*Ae+K*N*re,f[1]=K*N*Ae-D*te*re,f[2]=K*te*re+D*N*Ae,f[3]=K*te*Ae-D*N*re;break;case"xzy":f[0]=D*te*Ae-K*N*re,f[1]=K*N*Ae-D*te*re,f[2]=K*te*re+D*N*Ae,f[3]=K*te*Ae+D*N*re;break;case"yxz":f[0]=D*te*Ae+K*N*re,f[1]=K*N*Ae-D*te*re,f[2]=K*te*re-D*N*Ae,f[3]=K*te*Ae+D*N*re;break;case"yzx":f[0]=D*te*Ae+K*N*re,f[1]=K*N*Ae+D*te*re,f[2]=K*te*re-D*N*Ae,f[3]=K*te*Ae-D*N*re;break;case"zxy":f[0]=D*te*Ae-K*N*re,f[1]=K*N*Ae+D*te*re,f[2]=K*te*re+D*N*Ae,f[3]=K*te*Ae-D*N*re;break;case"zyx":f[0]=D*te*Ae-K*N*re,f[1]=K*N*Ae+D*te*re,f[2]=K*te*re-D*N*Ae,f[3]=K*te*Ae+D*N*re;break;default:throw new Error("Unknown angle order "+w)}return f}function qe(){var f=new V(2);return V!=Float32Array&&(f[0]=0,f[1]=0),f}function tt(f,u){var d=new V(2);return d[0]=f,d[1]=u,d}Y(),ve=new V(4),V!=Float32Array&&(ve[0]=0,ve[1]=0,ve[2]=0,ve[3]=0),Y(),se(1,0,0),se(0,1,0),je(),je(),H(),qe();const At=8192;function ke(f,u,d){return u*(At/(f.tileSize*Math.pow(2,d-f.tileID.overscaledZ)))}function we(f,u){return(f%u+u)%u}function ze(f,u,d){return f*(1-d)+u*d}function Me(f){if(f<=0)return 0;if(f>=1)return 1;const u=f*f,d=u*f;return 4*(f<.5?d:3*(f-u)+d-.75)}function lt(f,u,d,b){const w=new x(f,u,d,b);return k=>w.solve(k)}const nt=lt(.25,.1,.25,1);function bt(f,u,d){return Math.min(d,Math.max(u,f))}function Bt(f,u,d){const b=d-u,w=((f-u)%b+b)%b+u;return w===u?d:w}function Ke(f,...u){for(const d of u)for(const b in d)f[b]=d[b];return f}let Te=1;function Se(f,u,d){const b={};for(const w in f)b[w]=u.call(this,f[w],w,f);return b}function We(f,u,d){const b={};for(const w in f)u.call(this,f[w],w,f)&&(b[w]=f[w]);return b}function at(f){return Array.isArray(f)?f.map(at):typeof f=="object"&&f?Se(f,at):f}const it={};function ft(f){it[f]||(typeof console<"u"&&console.warn(f),it[f]=!0)}function Dt(f,u,d){return(d.y-f.y)*(u.x-f.x)>(u.y-f.y)*(d.x-f.x)}function Ot(f){return typeof WorkerGlobalScope<"u"&&f!==void 0&&f instanceof WorkerGlobalScope}let Jt=null;function Dn(f){if(Jt==null){const u=f.navigator?f.navigator.userAgent:null;Jt=!!f.safari||!(!u||!(/\b(iPad|iPhone|iPod)\b/.test(u)||u.match("Safari")&&!u.match("Chrome")))}return Jt}function Pn(f){return typeof ImageBitmap<"u"&&f instanceof ImageBitmap}const oi="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function In(f,u,d,b,w){return a(this,void 0,void 0,(function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const k=new VideoFrame(f,{timestamp:0});try{const D=k?.format;if(!D||!D.startsWith("BGR")&&!D.startsWith("RGB"))throw new Error(`Unrecognized format ${D}`);const K=D.startsWith("BGR"),N=new Uint8ClampedArray(b*w*4);if(yield k.copyTo(N,(function(te,re,Ae,Oe,De){const Ue=4*Math.max(-re,0),Ge=(Math.max(0,Ae)-Ae)*Oe*4+Ue,He=4*Oe,st=Math.max(0,re),Tt=Math.max(0,Ae);return{rect:{x:st,y:Tt,width:Math.min(te.width,re+Oe)-st,height:Math.min(te.height,Ae+De)-Tt},layout:[{offset:Ge,stride:He}]}})(f,u,d,b,w)),K)for(let te=0;te<N.length;te+=4){const re=N[te];N[te]=N[te+2],N[te+2]=re}return N}finally{k.close()}}))}let Tn,dn;function $n(f,u,d,b){return f.addEventListener(u,d,b),{unsubscribe:()=>{f.removeEventListener(u,d,b)}}}function Un(f){return f*Math.PI/180}function It(f){return f/Math.PI*180}const _e={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},oe={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},ee="AbortError";function ne(){return new Error(ee)}const ue={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function be(f){return ue.REGISTERED_PROTOCOLS[f.substring(0,f.indexOf("://"))]}const Le="global-dispatcher";class Ve extends Error{constructor(u,d,b,w){super(`AJAXError: ${d} (${u}): ${b}`),this.status=u,this.statusText=d,this.url=b,this.body=w}}const rt=()=>Ot(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,ye=function(f,u){if(/:\/\//.test(f.url)&&!/^https?:|^file:/.test(f.url)){const b=be(f.url);if(b)return b(f,u);if(Ot(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:f,targetMapId:Le},u)}if(!(/^file:/.test(d=f.url)||/^file:/.test(rt())&&!/^\w+:/.test(d))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return(function(b,w){return a(this,void 0,void 0,(function*(){const k=new Request(b.url,{method:b.method||"GET",body:b.body,credentials:b.credentials,headers:b.headers,cache:b.cache,referrer:rt(),signal:w.signal});let D,K;b.type!=="json"||k.headers.has("Accept")||k.headers.set("Accept","application/json");try{D=yield fetch(k)}catch(te){throw new Ve(0,te.message,b.url,new Blob)}if(!D.ok){const te=yield D.blob();throw new Ve(D.status,D.statusText,b.url,te)}K=b.type==="arrayBuffer"||b.type==="image"?D.arrayBuffer():b.type==="json"?D.json():D.text();const N=yield K;if(w.signal.aborted)throw ne();return{data:N,cacheControl:D.headers.get("Cache-Control"),expires:D.headers.get("Expires")}}))})(f,u);if(Ot(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:f,mustQueue:!0,targetMapId:Le},u)}var d;return(function(b,w){return new Promise(((k,D)=>{var K;const N=new XMLHttpRequest;N.open(b.method||"GET",b.url,!0),b.type!=="arrayBuffer"&&b.type!=="image"||(N.responseType="arraybuffer");for(const te in b.headers)N.setRequestHeader(te,b.headers[te]);b.type==="json"&&(N.responseType="text",!((K=b.headers)===null||K===void 0)&&K.Accept||N.setRequestHeader("Accept","application/json")),N.withCredentials=b.credentials==="include",N.onerror=()=>{D(new Error(N.statusText))},N.onload=()=>{if(!w.signal.aborted)if((N.status>=200&&N.status<300||N.status===0)&&N.response!==null){let te=N.response;if(b.type==="json")try{te=JSON.parse(N.response)}catch(re){return void D(re)}k({data:te,cacheControl:N.getResponseHeader("Cache-Control"),expires:N.getResponseHeader("Expires")})}else{const te=new Blob([N.response],{type:N.getResponseHeader("Content-Type")});D(new Ve(N.status,N.statusText,b.url,te))}},w.signal.addEventListener("abort",(()=>{N.abort(),D(ne())})),N.send(b.body)}))})(f,u)};function Be(f){if(!f||f.indexOf("://")<=0||f.indexOf("data:image/")===0||f.indexOf("blob:")===0)return!0;const u=new URL(f),d=window.location;return u.protocol===d.protocol&&u.host===d.host}function v(f,u,d){d[f]&&d[f].indexOf(u)!==-1||(d[f]=d[f]||[],d[f].push(u))}function yt(f,u,d){if(d&&d[f]){const b=d[f].indexOf(u);b!==-1&&d[f].splice(b,1)}}class Mt{constructor(u,d={}){Ke(this,d),this.type=u}}class Pt extends Mt{constructor(u,d={}){super("error",Ke({error:u},d))}}class en{on(u,d){return this._listeners=this._listeners||{},v(u,d,this._listeners),{unsubscribe:()=>{this.off(u,d)}}}off(u,d){return yt(u,d,this._listeners),yt(u,d,this._oneTimeListeners),this}once(u,d){return d?(this._oneTimeListeners=this._oneTimeListeners||{},v(u,d,this._oneTimeListeners),this):new Promise((b=>this.once(u,b)))}fire(u,d){typeof u=="string"&&(u=new Mt(u,d||{}));const b=u.type;if(this.listens(b)){u.target=this;const w=this._listeners&&this._listeners[b]?this._listeners[b].slice():[];for(const K of w)K.call(this,u);const k=this._oneTimeListeners&&this._oneTimeListeners[b]?this._oneTimeListeners[b].slice():[];for(const K of k)yt(b,K,this._oneTimeListeners),K.call(this,u);const D=this._eventedParent;D&&(Ke(u,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),D.fire(u))}else u instanceof Pt&&console.error(u.error);return this}listens(u){return this._listeners&&this._listeners[u]&&this._listeners[u].length>0||this._oneTimeListeners&&this._oneTimeListeners[u]&&this._oneTimeListeners[u].length>0||this._eventedParent&&this._eventedParent.listens(u)}setEventedParent(u,d){return this._eventedParent=u,this._eventedParentData=d,this}}var mt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},"font-faces":{type:"array",value:"fontFaces"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const Qn=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Xn(f,u){const d={};for(const b in f)b!=="ref"&&(d[b]=f[b]);return Qn.forEach((b=>{b in u&&(d[b]=u[b])})),d}function Cn(f,u){if(Array.isArray(f)){if(!Array.isArray(u)||f.length!==u.length)return!1;for(let d=0;d<f.length;d++)if(!Cn(f[d],u[d]))return!1;return!0}if(typeof f=="object"&&f!==null&&u!==null){if(typeof u!="object"||Object.keys(f).length!==Object.keys(u).length)return!1;for(const d in f)if(!Cn(f[d],u[d]))return!1;return!0}return f===u}function Fn(f,u){f.push(u)}function pi(f,u,d){Fn(d,{command:"addSource",args:[f,u[f]]})}function Hi(f,u,d){Fn(u,{command:"removeSource",args:[f]}),d[f]=!0}function Ii(f,u,d,b){Hi(f,d,b),pi(f,u,d)}function Ar(f,u,d){let b;for(b in f[d])if(Object.prototype.hasOwnProperty.call(f[d],b)&&b!=="data"&&!Cn(f[d][b],u[d][b]))return!1;for(b in u[d])if(Object.prototype.hasOwnProperty.call(u[d],b)&&b!=="data"&&!Cn(f[d][b],u[d][b]))return!1;return!0}function ii(f,u,d,b,w,k){f=f||{},u=u||{};for(const D in f)Object.prototype.hasOwnProperty.call(f,D)&&(Cn(f[D],u[D])||d.push({command:k,args:[b,D,u[D],w]}));for(const D in u)Object.prototype.hasOwnProperty.call(u,D)&&!Object.prototype.hasOwnProperty.call(f,D)&&(Cn(f[D],u[D])||d.push({command:k,args:[b,D,u[D],w]}))}function Fi(f){return f.id}function Ri(f,u){return f[u.id]=u,f}class on{constructor(u,d,b,w){this.message=(u?`${u}: `:"")+b,w&&(this.identifier=w),d!=null&&d.__line__&&(this.line=d.__line__)}}function nr(f,...u){for(const d of u)for(const b in d)f[b]=d[b];return f}class Go extends Error{constructor(u,d){super(d),this.message=d,this.key=u}}class Co{constructor(u,d=[]){this.parent=u,this.bindings={};for(const[b,w]of d)this.bindings[b]=w}concat(u){return new Co(this,u)}get(u){if(this.bindings[u])return this.bindings[u];if(this.parent)return this.parent.get(u);throw new Error(`${u} not found in scope.`)}has(u){return!!this.bindings[u]||!!this.parent&&this.parent.has(u)}}const gr={kind:"null"},gn={kind:"number"},Ni={kind:"string"},ni={kind:"boolean"},ga={kind:"color"},Ra={kind:"projectionDefinition"},zs={kind:"object"},Pi={kind:"value"},kl={kind:"collator"},eo={kind:"formatted"},ya={kind:"padding"},tu={kind:"colorArray"},Xs={kind:"numberArray"},Ko={kind:"resolvedImage"},Zo={kind:"variableAnchorOffsetCollection"};function gs(f,u){return{kind:"array",itemType:f,N:u}}function jr(f){if(f.kind==="array"){const u=jr(f.itemType);return typeof f.N=="number"?`array<${u}, ${f.N}>`:f.itemType.kind==="value"?"array":`array<${u}>`}return f.kind}const Da=[gr,gn,Ni,ni,ga,Ra,eo,zs,gs(Pi),ya,Xs,tu,Ko,Zo];function os(f,u){if(u.kind==="error")return null;if(f.kind==="array"){if(u.kind==="array"&&(u.N===0&&u.itemType.kind==="value"||!os(f.itemType,u.itemType))&&(typeof f.N!="number"||f.N===u.N))return null}else{if(f.kind===u.kind)return null;if(f.kind==="value"){for(const d of Da)if(!os(d,u))return null}}return`Expected ${jr(f)} but found ${jr(u)} instead.`}function Bc(f,u){return u.some((d=>d.kind===f.kind))}function Mu(f,u){return u.some((d=>d==="null"?f===null:d==="array"?Array.isArray(f):d==="object"?f&&!Array.isArray(f)&&typeof f=="object":d===typeof f))}function nu(f,u){return f.kind==="array"&&u.kind==="array"?f.itemType.kind===u.itemType.kind&&typeof f.N=="number":f.kind===u.kind}const oA=.96422,tc=.82521,gl=4/29,Lo=6/29,nc=3*Lo*Lo,iu=Lo*Lo*Lo,Ic=Math.PI/180,ic=180/Math.PI;function kc(f){return(f%=360)<0&&(f+=360),f}function ZA([f,u,d,b]){let w,k;const D=Tc((.2225045*(f=Ss(f))+.7168786*(u=Ss(u))+.0606169*(d=Ss(d)))/1);f===u&&u===d?w=k=D:(w=Tc((.4360747*f+.3850649*u+.1430804*d)/oA),k=Tc((.0139322*f+.0971045*u+.7141733*d)/tc));const K=116*D-16;return[K<0?0:K,500*(w-D),200*(D-k),b]}function Ss(f){return f<=.04045?f/12.92:Math.pow((f+.055)/1.055,2.4)}function Tc(f){return f>iu?Math.pow(f,1/3):f/nc+gl}function wu([f,u,d,b]){let w=(f+16)/116,k=isNaN(u)?w:w+u/500,D=isNaN(d)?w:w-d/200;return w=1*ou(w),k=oA*ou(k),D=tc*ou(D),[ru(3.1338561*k-1.6168667*w-.4906146*D),ru(-.9787684*k+1.9161415*w+.033454*D),ru(.0719453*k-.2289914*w+1.4052427*D),b]}function ru(f){return(f=f<=.00304?12.92*f:1.055*Math.pow(f,1/2.4)-.055)<0?0:f>1?1:f}function ou(f){return f>Lo?f*f*f:nc*(f-gl)}const su=Object.hasOwn||function(f,u){return Object.prototype.hasOwnProperty.call(f,u)};function Es(f,u){return su(f,u)?f[u]:void 0}function wo(f){return parseInt(f.padEnd(2,f),16)/255}function Tl(f,u){return Js(u?f/100:f,0,1)}function Js(f,u,d){return Math.min(Math.max(u,f),d)}function Ui(f){return!f.some(Number.isNaN)}const au={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function aa(f,u,d){return f+d*(u-f)}function Su(f,u,d){return f.map(((b,w)=>aa(b,u[w],d)))}class ir{constructor(u,d,b,w=1,k=!0){this.r=u,this.g=d,this.b=b,this.a=w,k||(this.r*=w,this.g*=w,this.b*=w,w||this.overwriteGetter("rgb",[u,d,b,w]))}static parse(u){if(u instanceof ir)return u;if(typeof u!="string")return;const d=(function(b){if((b=b.toLowerCase().trim())==="transparent")return[0,0,0,0];const w=Es(au,b);if(w){const[D,K,N]=w;return[D/255,K/255,N/255,1]}if(b.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(b)){const D=b.length<6?1:2;let K=1;return[wo(b.slice(K,K+=D)),wo(b.slice(K,K+=D)),wo(b.slice(K,K+=D)),wo(b.slice(K,K+D)||"ff")]}if(b.startsWith("rgb")){const D=b.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(D){const[K,N,te,re,Ae,Oe,De,Ue,Ge,He,st,Tt]=D,dt=[re||" ",De||" ",He].join("");if(dt==="  "||dt==="  /"||dt===",,"||dt===",,,"){const Ct=[te,Oe,Ge].join(""),jt=Ct==="%%%"?100:Ct===""?255:0;if(jt){const Zt=[Js(+N/jt,0,1),Js(+Ae/jt,0,1),Js(+Ue/jt,0,1),st?Tl(+st,Tt):1];if(Ui(Zt))return Zt}}return}}const k=b.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(k){const[D,K,N,te,re,Ae,Oe,De,Ue]=k,Ge=[N||" ",re||" ",Oe].join("");if(Ge==="  "||Ge==="  /"||Ge===",,"||Ge===",,,"){const He=[+K,Js(+te,0,100),Js(+Ae,0,100),De?Tl(+De,Ue):1];if(Ui(He))return(function([st,Tt,dt,Ct]){function jt(Zt){const fn=(Zt+st/30)%12,Wn=Tt*Math.min(dt,1-dt);return dt-Wn*Math.max(-1,Math.min(fn-3,9-fn,1))}return st=kc(st),Tt/=100,dt/=100,[jt(0),jt(8),jt(4),Ct]})(He)}}})(u);return d?new ir(...d,!1):void 0}get rgb(){const{r:u,g:d,b,a:w}=this,k=w||1/0;return this.overwriteGetter("rgb",[u/k,d/k,b/k,w])}get hcl(){return this.overwriteGetter("hcl",(function(u){const[d,b,w,k]=ZA(u),D=Math.sqrt(b*b+w*w);return[Math.round(1e4*D)?kc(Math.atan2(w,b)*ic):NaN,D,d,k]})(this.rgb))}get lab(){return this.overwriteGetter("lab",ZA(this.rgb))}overwriteGetter(u,d){return Object.defineProperty(this,u,{value:d}),d}toString(){const[u,d,b,w]=this.rgb;return`rgba(${[u,d,b].map((k=>Math.round(255*k))).join(",")},${w})`}static interpolate(u,d,b,w="rgb"){switch(w){case"rgb":{const[k,D,K,N]=Su(u.rgb,d.rgb,b);return new ir(k,D,K,N,!1)}case"hcl":{const[k,D,K,N]=u.hcl,[te,re,Ae,Oe]=d.hcl;let De,Ue;if(isNaN(k)||isNaN(te))isNaN(k)?isNaN(te)?De=NaN:(De=te,K!==1&&K!==0||(Ue=re)):(De=k,Ae!==1&&Ae!==0||(Ue=D));else{let dt=te-k;te>k&&dt>180?dt-=360:te<k&&k-te>180&&(dt+=360),De=k+b*dt}const[Ge,He,st,Tt]=(function([dt,Ct,jt,Zt]){return dt=isNaN(dt)?0:dt*Ic,wu([jt,Math.cos(dt)*Ct,Math.sin(dt)*Ct,Zt])})([De,Ue??aa(D,re,b),aa(K,Ae,b),aa(N,Oe,b)]);return new ir(Ge,He,st,Tt,!1)}case"lab":{const[k,D,K,N]=wu(Su(u.lab,d.lab,b));return new ir(k,D,K,N,!1)}}}}ir.black=new ir(0,0,0,1),ir.white=new ir(1,1,1,1),ir.transparent=new ir(0,0,0,0),ir.red=new ir(1,0,0,1);class Pa{constructor(u,d,b){this.sensitivity=u?d?"variant":"case":d?"accent":"base",this.locale=b,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(u,d){return this.collator.compare(u,d)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const ko=["bottom","center","top"];class Rl{constructor(u,d,b,w,k,D){this.text=u,this.image=d,this.scale=b,this.fontStack=w,this.textColor=k,this.verticalAlign=D}}class ss{constructor(u){this.sections=u}static fromString(u){return new ss([new Rl(u,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some((u=>u.text.length!==0||u.image&&u.image.name.length!==0))}static factory(u){return u instanceof ss?u:ss.fromString(u)}toString(){return this.sections.length===0?"":this.sections.map((u=>u.text)).join("")}}class fo{constructor(u){this.values=u.slice()}static parse(u){if(u instanceof fo)return u;if(typeof u=="number")return new fo([u,u,u,u]);if(Array.isArray(u)&&!(u.length<1||u.length>4)){for(const d of u)if(typeof d!="number")return;switch(u.length){case 1:u=[u[0],u[0],u[0],u[0]];break;case 2:u=[u[0],u[1],u[0],u[1]];break;case 3:u=[u[0],u[1],u[2],u[1]]}return new fo(u)}}toString(){return JSON.stringify(this.values)}static interpolate(u,d,b){return new fo(Su(u.values,d.values,b))}}class as{constructor(u){this.values=u.slice()}static parse(u){if(u instanceof as)return u;if(typeof u=="number")return new as([u]);if(Array.isArray(u)){for(const d of u)if(typeof d!="number")return;return new as(u)}}toString(){return JSON.stringify(this.values)}static interpolate(u,d,b){return new as(Su(u.values,d.values,b))}}class Fo{constructor(u){this.values=u.slice()}static parse(u){if(u instanceof Fo)return u;if(typeof u=="string"){const b=ir.parse(u);return b?new Fo([b]):void 0}if(!Array.isArray(u))return;const d=[];for(const b of u){if(typeof b!="string")return;const w=ir.parse(b);if(!w)return;d.push(w)}return new Fo(d)}toString(){return JSON.stringify(this.values)}static interpolate(u,d,b,w="rgb"){const k=[];if(u.values.length!=d.values.length)throw new Error(`colorArray: Arrays have mismatched length (${u.values.length} vs. ${d.values.length}), cannot interpolate.`);for(let D=0;D<u.values.length;D++)k.push(ir.interpolate(u.values[D],d.values[D],b,w));return new Fo(k)}}class _o extends Error{constructor(u){super(u),this.name="RuntimeError"}toJSON(){return this.message}}const Ua=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class So{constructor(u){this.values=u.slice()}static parse(u){if(u instanceof So)return u;if(Array.isArray(u)&&!(u.length<1)&&u.length%2==0){for(let d=0;d<u.length;d+=2){const b=u[d],w=u[d+1];if(typeof b!="string"||!Ua.has(b)||!Array.isArray(w)||w.length!==2||typeof w[0]!="number"||typeof w[1]!="number")return}return new So(u)}}toString(){return JSON.stringify(this.values)}static interpolate(u,d,b){const w=u.values,k=d.values;if(w.length!==k.length)throw new _o(`Cannot interpolate values of different length. from: ${u.toString()}, to: ${d.toString()}`);const D=[];for(let K=0;K<w.length;K+=2){if(w[K]!==k[K])throw new _o(`Cannot interpolate values containing mismatched anchors. from[${K}]: ${w[K]}, to[${K}]: ${k[K]}`);D.push(w[K]);const[N,te]=w[K+1],[re,Ae]=k[K+1];D.push([aa(N,re,b),aa(te,Ae,b)])}return new So(D)}}class ea{constructor(u){this.name=u.name,this.available=u.available}toString(){return this.name}static fromString(u){return u?new ea({name:u,available:!1}):null}}class oo{constructor(u,d,b){this.from=u,this.to=d,this.transition=b}static interpolate(u,d,b){return new oo(u,d,b)}static parse(u){return u instanceof oo?u:Array.isArray(u)&&u.length===3&&typeof u[0]=="string"&&typeof u[1]=="string"&&typeof u[2]=="number"?new oo(u[0],u[1],u[2]):typeof u=="object"&&typeof u.from=="string"&&typeof u.to=="string"&&typeof u.transition=="number"?new oo(u.from,u.to,u.transition):typeof u=="string"?new oo(u,u,1):void 0}}function Ka(f,u,d,b){return typeof f=="number"&&f>=0&&f<=255&&typeof u=="number"&&u>=0&&u<=255&&typeof d=="number"&&d>=0&&d<=255?b===void 0||typeof b=="number"&&b>=0&&b<=1?null:`Invalid rgba value [${[f,u,d,b].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof b=="number"?[f,u,d,b]:[f,u,d]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Nr(f){if(f===null||typeof f=="string"||typeof f=="boolean"||typeof f=="number"||f instanceof oo||f instanceof ir||f instanceof Pa||f instanceof ss||f instanceof fo||f instanceof as||f instanceof Fo||f instanceof So||f instanceof ea)return!0;if(Array.isArray(f)){for(const u of f)if(!Nr(u))return!1;return!0}if(typeof f=="object"){for(const u in f)if(!Nr(f[u]))return!1;return!0}return!1}function Gi(f){if(f===null)return gr;if(typeof f=="string")return Ni;if(typeof f=="boolean")return ni;if(typeof f=="number")return gn;if(f instanceof ir)return ga;if(f instanceof oo)return Ra;if(f instanceof Pa)return kl;if(f instanceof ss)return eo;if(f instanceof fo)return ya;if(f instanceof as)return Xs;if(f instanceof Fo)return tu;if(f instanceof So)return Zo;if(f instanceof ea)return Ko;if(Array.isArray(f)){const u=f.length;let d;for(const b of f){const w=Gi(b);if(d){if(d===w)continue;d=Pi;break}d=w}return gs(d||Pi,u)}return zs}function Ai(f){const u=typeof f;return f===null?"":u==="string"||u==="number"||u==="boolean"?String(f):f instanceof ir||f instanceof oo||f instanceof ss||f instanceof fo||f instanceof as||f instanceof Fo||f instanceof So||f instanceof ea?f.toString():JSON.stringify(f)}class X{constructor(u,d){this.type=u,this.value=d}static parse(u,d){if(u.length!==2)return d.error(`'literal' expression requires exactly one argument, but found ${u.length-1} instead.`);if(!Nr(u[1]))return d.error("invalid value");const b=u[1];let w=Gi(b);const k=d.expectedType;return w.kind!=="array"||w.N!==0||!k||k.kind!=="array"||typeof k.N=="number"&&k.N!==0||(w=k),new X(w,b)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const Ce={string:Ni,number:gn,boolean:ni,object:zs};class Qe{constructor(u,d){this.type=u,this.args=d}static parse(u,d){if(u.length<2)return d.error("Expected at least one argument.");let b,w=1;const k=u[0];if(k==="array"){let K,N;if(u.length>2){const te=u[1];if(typeof te!="string"||!(te in Ce)||te==="object")return d.error('The item type argument of "array" must be one of string, number, boolean',1);K=Ce[te],w++}else K=Pi;if(u.length>3){if(u[2]!==null&&(typeof u[2]!="number"||u[2]<0||u[2]!==Math.floor(u[2])))return d.error('The length argument to "array" must be a positive integer literal',2);N=u[2],w++}b=gs(K,N)}else{if(!Ce[k])throw new Error(`Types doesn't contain name = ${k}`);b=Ce[k]}const D=[];for(;w<u.length;w++){const K=d.parse(u[w],w,Pi);if(!K)return null;D.push(K)}return new Qe(b,D)}evaluate(u){for(let d=0;d<this.args.length;d++){const b=this.args[d].evaluate(u);if(!os(this.type,Gi(b)))return b;if(d===this.args.length-1)throw new _o(`Expected value to be of type ${jr(this.type)}, but found ${jr(Gi(b))} instead.`)}throw new Error}eachChild(u){this.args.forEach(u)}outputDefined(){return this.args.every((u=>u.outputDefined()))}}const Et={"to-boolean":ni,"to-color":ga,"to-number":gn,"to-string":Ni};class jn{constructor(u,d){this.type=u,this.args=d}static parse(u,d){if(u.length<2)return d.error("Expected at least one argument.");const b=u[0];if(!Et[b])throw new Error(`Can't parse ${b} as it is not part of the known types`);if((b==="to-boolean"||b==="to-string")&&u.length!==2)return d.error("Expected one argument.");const w=Et[b],k=[];for(let D=1;D<u.length;D++){const K=d.parse(u[D],D,Pi);if(!K)return null;k.push(K)}return new jn(w,k)}evaluate(u){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(u);case"color":{let d,b;for(const w of this.args){if(d=w.evaluate(u),b=null,d instanceof ir)return d;if(typeof d=="string"){const k=u.parseColor(d);if(k)return k}else if(Array.isArray(d)&&(b=d.length<3||d.length>4?`Invalid rgba value ${JSON.stringify(d)}: expected an array containing either three or four numeric values.`:Ka(d[0],d[1],d[2],d[3]),!b))return new ir(d[0]/255,d[1]/255,d[2]/255,d[3])}throw new _o(b||`Could not parse color from value '${typeof d=="string"?d:JSON.stringify(d)}'`)}case"padding":{let d;for(const b of this.args){d=b.evaluate(u);const w=fo.parse(d);if(w)return w}throw new _o(`Could not parse padding from value '${typeof d=="string"?d:JSON.stringify(d)}'`)}case"numberArray":{let d;for(const b of this.args){d=b.evaluate(u);const w=as.parse(d);if(w)return w}throw new _o(`Could not parse numberArray from value '${typeof d=="string"?d:JSON.stringify(d)}'`)}case"colorArray":{let d;for(const b of this.args){d=b.evaluate(u);const w=Fo.parse(d);if(w)return w}throw new _o(`Could not parse colorArray from value '${typeof d=="string"?d:JSON.stringify(d)}'`)}case"variableAnchorOffsetCollection":{let d;for(const b of this.args){d=b.evaluate(u);const w=So.parse(d);if(w)return w}throw new _o(`Could not parse variableAnchorOffsetCollection from value '${typeof d=="string"?d:JSON.stringify(d)}'`)}case"number":{let d=null;for(const b of this.args){if(d=b.evaluate(u),d===null)return 0;const w=Number(d);if(!isNaN(w))return w}throw new _o(`Could not convert ${JSON.stringify(d)} to number.`)}case"formatted":return ss.fromString(Ai(this.args[0].evaluate(u)));case"resolvedImage":return ea.fromString(Ai(this.args[0].evaluate(u)));case"projectionDefinition":return this.args[0].evaluate(u);default:return Ai(this.args[0].evaluate(u))}}eachChild(u){this.args.forEach(u)}outputDefined(){return this.args.every((u=>u.outputDefined()))}}const On=["Unknown","Point","LineString","Polygon"];class _i{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?On[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(u){let d=this._parseColorCache.get(u);return d||(d=ir.parse(u),this._parseColorCache.set(u,d)),d}}class zi{constructor(u,d,b=[],w,k=new Co,D=[]){this.registry=u,this.path=b,this.key=b.map((K=>`[${K}]`)).join(""),this.scope=k,this.errors=D,this.expectedType=w,this._isConstant=d}parse(u,d,b,w,k={}){return d?this.concat(d,b,w)._parse(u,k):this._parse(u,k)}_parse(u,d){function b(w,k,D){return D==="assert"?new Qe(k,[w]):D==="coerce"?new jn(k,[w]):w}if(u!==null&&typeof u!="string"&&typeof u!="boolean"&&typeof u!="number"||(u=["literal",u]),Array.isArray(u)){if(u.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const w=u[0];if(typeof w!="string")return this.error(`Expression name must be a string, but found ${typeof w} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const k=this.registry[w];if(k){let D=k.parse(u,this);if(!D)return null;if(this.expectedType){const K=this.expectedType,N=D.type;if(K.kind!=="string"&&K.kind!=="number"&&K.kind!=="boolean"&&K.kind!=="object"&&K.kind!=="array"||N.kind!=="value"){if(K.kind==="projectionDefinition"&&["string","array"].includes(N.kind)||["color","formatted","resolvedImage"].includes(K.kind)&&["value","string"].includes(N.kind)||["padding","numberArray"].includes(K.kind)&&["value","number","array"].includes(N.kind)||K.kind==="colorArray"&&["value","string","array"].includes(N.kind)||K.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(N.kind))D=b(D,K,d.typeAnnotation||"coerce");else if(this.checkSubtype(K,N))return null}else D=b(D,K,d.typeAnnotation||"assert")}if(!(D instanceof X)&&D.type.kind!=="resolvedImage"&&this._isConstant(D)){const K=new _i;try{D=new X(D.type,D.evaluate(K))}catch(N){return this.error(N.message),null}}return D}return this.error(`Unknown expression "${w}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(u===void 0?"'undefined' value invalid. Use null instead.":typeof u=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof u} instead.`)}concat(u,d,b){const w=typeof u=="number"?this.path.concat(u):this.path,k=b?this.scope.concat(b):this.scope;return new zi(this.registry,this._isConstant,w,d||null,k,this.errors)}error(u,...d){const b=`${this.key}${d.map((w=>`[${w}]`)).join("")}`;this.errors.push(new Go(b,u))}checkSubtype(u,d){const b=os(u,d);return b&&this.error(b),b}}class ki{constructor(u,d){this.type=d.type,this.bindings=[].concat(u),this.result=d}evaluate(u){return this.result.evaluate(u)}eachChild(u){for(const d of this.bindings)u(d[1]);u(this.result)}static parse(u,d){if(u.length<4)return d.error(`Expected at least 3 arguments, but found ${u.length-1} instead.`);const b=[];for(let k=1;k<u.length-1;k+=2){const D=u[k];if(typeof D!="string")return d.error(`Expected string, but found ${typeof D} instead.`,k);if(/[^a-zA-Z0-9_]/.test(D))return d.error("Variable names must contain only alphanumeric characters or '_'.",k);const K=d.parse(u[k+1],k+1);if(!K)return null;b.push([D,K])}const w=d.parse(u[u.length-1],u.length-1,d.expectedType,b);return w?new ki(b,w):null}outputDefined(){return this.result.outputDefined()}}class Ei{constructor(u,d){this.type=d.type,this.name=u,this.boundExpression=d}static parse(u,d){if(u.length!==2||typeof u[1]!="string")return d.error("'var' expression requires exactly one string literal argument.");const b=u[1];return d.scope.has(b)?new Ei(b,d.scope.get(b)):d.error(`Unknown variable "${b}". Make sure "${b}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(u){return this.boundExpression.evaluate(u)}eachChild(){}outputDefined(){return!1}}class Cr{constructor(u,d,b){this.type=u,this.index=d,this.input=b}static parse(u,d){if(u.length!==3)return d.error(`Expected 2 arguments, but found ${u.length-1} instead.`);const b=d.parse(u[1],1,gn),w=d.parse(u[2],2,gs(d.expectedType||Pi));return b&&w?new Cr(w.type.itemType,b,w):null}evaluate(u){const d=this.index.evaluate(u),b=this.input.evaluate(u);if(d<0)throw new _o(`Array index out of bounds: ${d} < 0.`);if(d>=b.length)throw new _o(`Array index out of bounds: ${d} > ${b.length-1}.`);if(d!==Math.floor(d))throw new _o(`Array index must be an integer, but found ${d} instead.`);return b[d]}eachChild(u){u(this.index),u(this.input)}outputDefined(){return!1}}class so{constructor(u,d){this.type=ni,this.needle=u,this.haystack=d}static parse(u,d){if(u.length!==3)return d.error(`Expected 2 arguments, but found ${u.length-1} instead.`);const b=d.parse(u[1],1,Pi),w=d.parse(u[2],2,Pi);return b&&w?Bc(b.type,[ni,Ni,gn,gr,Pi])?new so(b,w):d.error(`Expected first argument to be of type boolean, string, number or null, but found ${jr(b.type)} instead`):null}evaluate(u){const d=this.needle.evaluate(u),b=this.haystack.evaluate(u);if(!b)return!1;if(!Mu(d,["boolean","string","number","null"]))throw new _o(`Expected first argument to be of type boolean, string, number or null, but found ${jr(Gi(d))} instead.`);if(!Mu(b,["string","array"]))throw new _o(`Expected second argument to be of type array or string, but found ${jr(Gi(b))} instead.`);return b.indexOf(d)>=0}eachChild(u){u(this.needle),u(this.haystack)}outputDefined(){return!0}}class yr{constructor(u,d,b){this.type=gn,this.needle=u,this.haystack=d,this.fromIndex=b}static parse(u,d){if(u.length<=2||u.length>=5)return d.error(`Expected 2 or 3 arguments, but found ${u.length-1} instead.`);const b=d.parse(u[1],1,Pi),w=d.parse(u[2],2,Pi);if(!b||!w)return null;if(!Bc(b.type,[ni,Ni,gn,gr,Pi]))return d.error(`Expected first argument to be of type boolean, string, number or null, but found ${jr(b.type)} instead`);if(u.length===4){const k=d.parse(u[3],3,gn);return k?new yr(b,w,k):null}return new yr(b,w)}evaluate(u){const d=this.needle.evaluate(u),b=this.haystack.evaluate(u);if(!Mu(d,["boolean","string","number","null"]))throw new _o(`Expected first argument to be of type boolean, string, number or null, but found ${jr(Gi(d))} instead.`);let w;if(this.fromIndex&&(w=this.fromIndex.evaluate(u)),Mu(b,["string"])){const k=b.indexOf(d,w);return k===-1?-1:[...b.slice(0,k)].length}if(Mu(b,["array"]))return b.indexOf(d,w);throw new _o(`Expected second argument to be of type array or string, but found ${jr(Gi(b))} instead.`)}eachChild(u){u(this.needle),u(this.haystack),this.fromIndex&&u(this.fromIndex)}outputDefined(){return!1}}class Ji{constructor(u,d,b,w,k,D){this.inputType=u,this.type=d,this.input=b,this.cases=w,this.outputs=k,this.otherwise=D}static parse(u,d){if(u.length<5)return d.error(`Expected at least 4 arguments, but found only ${u.length-1}.`);if(u.length%2!=1)return d.error("Expected an even number of arguments.");let b,w;d.expectedType&&d.expectedType.kind!=="value"&&(w=d.expectedType);const k={},D=[];for(let te=2;te<u.length-1;te+=2){let re=u[te];const Ae=u[te+1];Array.isArray(re)||(re=[re]);const Oe=d.concat(te);if(re.length===0)return Oe.error("Expected at least one branch label.");for(const Ue of re){if(typeof Ue!="number"&&typeof Ue!="string")return Oe.error("Branch labels must be numbers or strings.");if(typeof Ue=="number"&&Math.abs(Ue)>Number.MAX_SAFE_INTEGER)return Oe.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof Ue=="number"&&Math.floor(Ue)!==Ue)return Oe.error("Numeric branch labels must be integer values.");if(b){if(Oe.checkSubtype(b,Gi(Ue)))return null}else b=Gi(Ue);if(k[String(Ue)]!==void 0)return Oe.error("Branch labels must be unique.");k[String(Ue)]=D.length}const De=d.parse(Ae,te,w);if(!De)return null;w=w||De.type,D.push(De)}const K=d.parse(u[1],1,Pi);if(!K)return null;const N=d.parse(u[u.length-1],u.length-1,w);return N?K.type.kind!=="value"&&d.concat(1).checkSubtype(b,K.type)?null:new Ji(b,w,K,k,D,N):null}evaluate(u){const d=this.input.evaluate(u);return(Gi(d)===this.inputType&&this.outputs[this.cases[d]]||this.otherwise).evaluate(u)}eachChild(u){u(this.input),this.outputs.forEach(u),u(this.otherwise)}outputDefined(){return this.outputs.every((u=>u.outputDefined()))&&this.otherwise.outputDefined()}}class rr{constructor(u,d,b){this.type=u,this.branches=d,this.otherwise=b}static parse(u,d){if(u.length<4)return d.error(`Expected at least 3 arguments, but found only ${u.length-1}.`);if(u.length%2!=0)return d.error("Expected an odd number of arguments.");let b;d.expectedType&&d.expectedType.kind!=="value"&&(b=d.expectedType);const w=[];for(let D=1;D<u.length-1;D+=2){const K=d.parse(u[D],D,ni);if(!K)return null;const N=d.parse(u[D+1],D+1,b);if(!N)return null;w.push([K,N]),b=b||N.type}const k=d.parse(u[u.length-1],u.length-1,b);if(!k)return null;if(!b)throw new Error("Can't infer output type");return new rr(b,w,k)}evaluate(u){for(const[d,b]of this.branches)if(d.evaluate(u))return b.evaluate(u);return this.otherwise.evaluate(u)}eachChild(u){for(const[d,b]of this.branches)u(d),u(b);u(this.otherwise)}outputDefined(){return this.branches.every((([u,d])=>d.outputDefined()))&&this.otherwise.outputDefined()}}class ys{constructor(u,d,b,w){this.type=u,this.input=d,this.beginIndex=b,this.endIndex=w}static parse(u,d){if(u.length<=2||u.length>=5)return d.error(`Expected 2 or 3 arguments, but found ${u.length-1} instead.`);const b=d.parse(u[1],1,Pi),w=d.parse(u[2],2,gn);if(!b||!w)return null;if(!Bc(b.type,[gs(Pi),Ni,Pi]))return d.error(`Expected first argument to be of type array or string, but found ${jr(b.type)} instead`);if(u.length===4){const k=d.parse(u[3],3,gn);return k?new ys(b.type,b,w,k):null}return new ys(b.type,b,w)}evaluate(u){const d=this.input.evaluate(u),b=this.beginIndex.evaluate(u);let w;if(this.endIndex&&(w=this.endIndex.evaluate(u)),Mu(d,["string"]))return[...d].slice(b,w).join("");if(Mu(d,["array"]))return d.slice(b,w);throw new _o(`Expected first argument to be of type array or string, but found ${jr(Gi(d))} instead.`)}eachChild(u){u(this.input),u(this.beginIndex),this.endIndex&&u(this.endIndex)}outputDefined(){return!1}}function Xo(f,u){const d=f.length-1;let b,w,k=0,D=d,K=0;for(;k<=D;)if(K=Math.floor((k+D)/2),b=f[K],w=f[K+1],b<=u){if(K===d||u<w)return K;k=K+1}else{if(!(b>u))throw new _o("Input is not a number.");D=K-1}return 0}class Os{constructor(u,d,b){this.type=u,this.input=d,this.labels=[],this.outputs=[];for(const[w,k]of b)this.labels.push(w),this.outputs.push(k)}static parse(u,d){if(u.length-1<4)return d.error(`Expected at least 4 arguments, but found only ${u.length-1}.`);if((u.length-1)%2!=0)return d.error("Expected an even number of arguments.");const b=d.parse(u[1],1,gn);if(!b)return null;const w=[];let k=null;d.expectedType&&d.expectedType.kind!=="value"&&(k=d.expectedType);for(let D=1;D<u.length;D+=2){const K=D===1?-1/0:u[D],N=u[D+1],te=D,re=D+1;if(typeof K!="number")return d.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',te);if(w.length&&w[w.length-1][0]>=K)return d.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',te);const Ae=d.parse(N,re,k);if(!Ae)return null;k=k||Ae.type,w.push([K,Ae])}return new Os(k,b,w)}evaluate(u){const d=this.labels,b=this.outputs;if(d.length===1)return b[0].evaluate(u);const w=this.input.evaluate(u);if(w<=d[0])return b[0].evaluate(u);const k=d.length;return w>=d[k-1]?b[k-1].evaluate(u):b[Xo(d,w)].evaluate(u)}eachChild(u){u(this.input);for(const d of this.outputs)u(d)}outputDefined(){return this.outputs.every((u=>u.outputDefined()))}}function Bs(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f}var lu,vs,_1=(function(){if(vs)return lu;function f(u,d,b,w){this.cx=3*u,this.bx=3*(b-u)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*d,this.by=3*(w-d)-this.cy,this.ay=1-this.cy-this.by,this.p1x=u,this.p1y=d,this.p2x=b,this.p2y=w}return vs=1,lu=f,f.prototype={sampleCurveX:function(u){return((this.ax*u+this.bx)*u+this.cx)*u},sampleCurveY:function(u){return((this.ay*u+this.by)*u+this.cy)*u},sampleCurveDerivativeX:function(u){return(3*this.ax*u+2*this.bx)*u+this.cx},solveCurveX:function(u,d){if(d===void 0&&(d=1e-6),u<0)return 0;if(u>1)return 1;for(var b=u,w=0;w<8;w++){var k=this.sampleCurveX(b)-u;if(Math.abs(k)<d)return b;var D=this.sampleCurveDerivativeX(b);if(Math.abs(D)<1e-6)break;b-=k/D}var K=0,N=1;for(b=u,w=0;w<20&&(k=this.sampleCurveX(b),!(Math.abs(k-u)<d));w++)u>k?K=b:N=b,b=.5*(N-K)+K;return b},solve:function(u,d){return this.sampleCurveY(this.solveCurveX(u,d))}},lu})(),rc=Bs(_1);class qa{constructor(u,d,b,w,k){this.type=u,this.operator=d,this.interpolation=b,this.input=w,this.labels=[],this.outputs=[];for(const[D,K]of k)this.labels.push(D),this.outputs.push(K)}static interpolationFactor(u,d,b,w){let k=0;if(u.name==="exponential")k=Td(d,u.base,b,w);else if(u.name==="linear")k=Td(d,1,b,w);else if(u.name==="cubic-bezier"){const D=u.controlPoints;k=new rc(D[0],D[1],D[2],D[3]).solve(Td(d,1,b,w))}return k}static parse(u,d){let[b,w,k,...D]=u;if(!Array.isArray(w)||w.length===0)return d.error("Expected an interpolation type expression.",1);if(w[0]==="linear")w={name:"linear"};else if(w[0]==="exponential"){const te=w[1];if(typeof te!="number")return d.error("Exponential interpolation requires a numeric base.",1,1);w={name:"exponential",base:te}}else{if(w[0]!=="cubic-bezier")return d.error(`Unknown interpolation type ${String(w[0])}`,1,0);{const te=w.slice(1);if(te.length!==4||te.some((re=>typeof re!="number"||re<0||re>1)))return d.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);w={name:"cubic-bezier",controlPoints:te}}}if(u.length-1<4)return d.error(`Expected at least 4 arguments, but found only ${u.length-1}.`);if((u.length-1)%2!=0)return d.error("Expected an even number of arguments.");if(k=d.parse(k,2,gn),!k)return null;const K=[];let N=null;b!=="interpolate-hcl"&&b!=="interpolate-lab"||d.expectedType==tu?d.expectedType&&d.expectedType.kind!=="value"&&(N=d.expectedType):N=ga;for(let te=0;te<D.length;te+=2){const re=D[te],Ae=D[te+1],Oe=te+3,De=te+4;if(typeof re!="number")return d.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Oe);if(K.length&&K[K.length-1][0]>=re)return d.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Oe);const Ue=d.parse(Ae,De,N);if(!Ue)return null;N=N||Ue.type,K.push([re,Ue])}return nu(N,gn)||nu(N,Ra)||nu(N,ga)||nu(N,ya)||nu(N,Xs)||nu(N,tu)||nu(N,Zo)||nu(N,gs(gn))?new qa(N,b,w,k,K):d.error(`Type ${jr(N)} is not interpolatable.`)}evaluate(u){const d=this.labels,b=this.outputs;if(d.length===1)return b[0].evaluate(u);const w=this.input.evaluate(u);if(w<=d[0])return b[0].evaluate(u);const k=d.length;if(w>=d[k-1])return b[k-1].evaluate(u);const D=Xo(d,w),K=qa.interpolationFactor(this.interpolation,w,d[D],d[D+1]),N=b[D].evaluate(u),te=b[D+1].evaluate(u);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return aa(N,te,K);case"color":return ir.interpolate(N,te,K);case"padding":return fo.interpolate(N,te,K);case"colorArray":return Fo.interpolate(N,te,K);case"numberArray":return as.interpolate(N,te,K);case"variableAnchorOffsetCollection":return So.interpolate(N,te,K);case"array":return Su(N,te,K);case"projectionDefinition":return oo.interpolate(N,te,K)}case"interpolate-hcl":switch(this.type.kind){case"color":return ir.interpolate(N,te,K,"hcl");case"colorArray":return Fo.interpolate(N,te,K,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return ir.interpolate(N,te,K,"lab");case"colorArray":return Fo.interpolate(N,te,K,"lab")}}}eachChild(u){u(this.input);for(const d of this.outputs)u(d)}outputDefined(){return this.outputs.every((u=>u.outputDefined()))}}function Td(f,u,d,b){const w=b-d,k=f-d;return w===0?0:u===1?k/w:(Math.pow(u,k)-1)/(Math.pow(u,w)-1)}const Ya={color:ir.interpolate,number:aa,padding:fo.interpolate,numberArray:as.interpolate,colorArray:Fo.interpolate,variableAnchorOffsetCollection:So.interpolate,array:Su};class Rd{constructor(u,d){this.type=u,this.args=d}static parse(u,d){if(u.length<2)return d.error("Expected at least one argument.");let b=null;const w=d.expectedType;w&&w.kind!=="value"&&(b=w);const k=[];for(const K of u.slice(1)){const N=d.parse(K,1+k.length,b,void 0,{typeAnnotation:"omit"});if(!N)return null;b=b||N.type,k.push(N)}if(!b)throw new Error("No output type");const D=w&&k.some((K=>os(w,K.type)));return new Rd(D?Pi:b,k)}evaluate(u){let d,b=null,w=0;for(const k of this.args)if(w++,b=k.evaluate(u),b&&b instanceof ea&&!b.available&&(d||(d=b.name),b=null,w===this.args.length&&(b=d)),b!==null)break;return b}eachChild(u){this.args.forEach(u)}outputDefined(){return this.args.every((u=>u.outputDefined()))}}function Dd(f,u){return f==="=="||f==="!="?u.kind==="boolean"||u.kind==="string"||u.kind==="number"||u.kind==="null"||u.kind==="value":u.kind==="string"||u.kind==="number"||u.kind==="value"}function Jo(f,u,d,b){return b.compare(u,d)===0}function Dl(f,u,d){const b=f!=="=="&&f!=="!=";return class NX{constructor(k,D,K){this.type=ni,this.lhs=k,this.rhs=D,this.collator=K,this.hasUntypedArgument=k.type.kind==="value"||D.type.kind==="value"}static parse(k,D){if(k.length!==3&&k.length!==4)return D.error("Expected two or three arguments.");const K=k[0];let N=D.parse(k[1],1,Pi);if(!N)return null;if(!Dd(K,N.type))return D.concat(1).error(`"${K}" comparisons are not supported for type '${jr(N.type)}'.`);let te=D.parse(k[2],2,Pi);if(!te)return null;if(!Dd(K,te.type))return D.concat(2).error(`"${K}" comparisons are not supported for type '${jr(te.type)}'.`);if(N.type.kind!==te.type.kind&&N.type.kind!=="value"&&te.type.kind!=="value")return D.error(`Cannot compare types '${jr(N.type)}' and '${jr(te.type)}'.`);b&&(N.type.kind==="value"&&te.type.kind!=="value"?N=new Qe(te.type,[N]):N.type.kind!=="value"&&te.type.kind==="value"&&(te=new Qe(N.type,[te])));let re=null;if(k.length===4){if(N.type.kind!=="string"&&te.type.kind!=="string"&&N.type.kind!=="value"&&te.type.kind!=="value")return D.error("Cannot use collator to compare non-string types.");if(re=D.parse(k[3],3,kl),!re)return null}return new NX(N,te,re)}evaluate(k){const D=this.lhs.evaluate(k),K=this.rhs.evaluate(k);if(b&&this.hasUntypedArgument){const N=Gi(D),te=Gi(K);if(N.kind!==te.kind||N.kind!=="string"&&N.kind!=="number")throw new _o(`Expected arguments for "${f}" to be (string, string) or (number, number), but found (${N.kind}, ${te.kind}) instead.`)}if(this.collator&&!b&&this.hasUntypedArgument){const N=Gi(D),te=Gi(K);if(N.kind!=="string"||te.kind!=="string")return u(k,D,K)}return this.collator?d(k,D,K,this.collator.evaluate(k)):u(k,D,K)}eachChild(k){k(this.lhs),k(this.rhs),this.collator&&k(this.collator)}outputDefined(){return!0}}}const oc=Dl("==",(function(f,u,d){return u===d}),Jo),h0=Dl("!=",(function(f,u,d){return u!==d}),(function(f,u,d,b){return!Jo(0,u,d,b)})),Bf=Dl("<",(function(f,u,d){return u<d}),(function(f,u,d,b){return b.compare(u,d)<0})),dv=Dl(">",(function(f,u,d){return u>d}),(function(f,u,d,b){return b.compare(u,d)>0})),d0=Dl("<=",(function(f,u,d){return u<=d}),(function(f,u,d,b){return b.compare(u,d)<=0})),fv=Dl(">=",(function(f,u,d){return u>=d}),(function(f,u,d,b){return b.compare(u,d)>=0}));class Sp{constructor(u,d,b){this.type=kl,this.locale=b,this.caseSensitive=u,this.diacriticSensitive=d}static parse(u,d){if(u.length!==2)return d.error("Expected one argument.");const b=u[1];if(typeof b!="object"||Array.isArray(b))return d.error("Collator options argument must be an object.");const w=d.parse(b["case-sensitive"]!==void 0&&b["case-sensitive"],1,ni);if(!w)return null;const k=d.parse(b["diacritic-sensitive"]!==void 0&&b["diacritic-sensitive"],1,ni);if(!k)return null;let D=null;return b.locale&&(D=d.parse(b.locale,1,Ni),!D)?null:new Sp(w,k,D)}evaluate(u){return new Pa(this.caseSensitive.evaluate(u),this.diacriticSensitive.evaluate(u),this.locale?this.locale.evaluate(u):null)}eachChild(u){u(this.caseSensitive),u(this.diacriticSensitive),this.locale&&u(this.locale)}outputDefined(){return!1}}class If{constructor(u,d,b,w,k){this.type=Ni,this.number=u,this.locale=d,this.currency=b,this.minFractionDigits=w,this.maxFractionDigits=k}static parse(u,d){if(u.length!==3)return d.error("Expected two arguments.");const b=d.parse(u[1],1,gn);if(!b)return null;const w=u[2];if(typeof w!="object"||Array.isArray(w))return d.error("NumberFormat options argument must be an object.");let k=null;if(w.locale&&(k=d.parse(w.locale,1,Ni),!k))return null;let D=null;if(w.currency&&(D=d.parse(w.currency,1,Ni),!D))return null;let K=null;if(w["min-fraction-digits"]&&(K=d.parse(w["min-fraction-digits"],1,gn),!K))return null;let N=null;return w["max-fraction-digits"]&&(N=d.parse(w["max-fraction-digits"],1,gn),!N)?null:new If(b,k,D,K,N)}evaluate(u){return new Intl.NumberFormat(this.locale?this.locale.evaluate(u):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(u):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(u):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(u):void 0}).format(this.number.evaluate(u))}eachChild(u){u(this.number),this.locale&&u(this.locale),this.currency&&u(this.currency),this.minFractionDigits&&u(this.minFractionDigits),this.maxFractionDigits&&u(this.maxFractionDigits)}outputDefined(){return!1}}class XA{constructor(u){this.type=eo,this.sections=u}static parse(u,d){if(u.length<2)return d.error("Expected at least one argument.");const b=u[1];if(!Array.isArray(b)&&typeof b=="object")return d.error("First argument must be an image or text section.");const w=[];let k=!1;for(let D=1;D<=u.length-1;++D){const K=u[D];if(k&&typeof K=="object"&&!Array.isArray(K)){k=!1;let N=null;if(K["font-scale"]&&(N=d.parse(K["font-scale"],1,gn),!N))return null;let te=null;if(K["text-font"]&&(te=d.parse(K["text-font"],1,gs(Ni)),!te))return null;let re=null;if(K["text-color"]&&(re=d.parse(K["text-color"],1,ga),!re))return null;let Ae=null;if(K["vertical-align"]){if(typeof K["vertical-align"]=="string"&&!ko.includes(K["vertical-align"]))return d.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${K["vertical-align"]}' instead.`);if(Ae=d.parse(K["vertical-align"],1,Ni),!Ae)return null}const Oe=w[w.length-1];Oe.scale=N,Oe.font=te,Oe.textColor=re,Oe.verticalAlign=Ae}else{const N=d.parse(u[D],1,Pi);if(!N)return null;const te=N.type.kind;if(te!=="string"&&te!=="value"&&te!=="null"&&te!=="resolvedImage")return d.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");k=!0,w.push({content:N,scale:null,font:null,textColor:null,verticalAlign:null})}}return new XA(w)}evaluate(u){return new ss(this.sections.map((d=>{const b=d.content.evaluate(u);return Gi(b)===Ko?new Rl("",b,null,null,null,d.verticalAlign?d.verticalAlign.evaluate(u):null):new Rl(Ai(b),null,d.scale?d.scale.evaluate(u):null,d.font?d.font.evaluate(u).join(","):null,d.textColor?d.textColor.evaluate(u):null,d.verticalAlign?d.verticalAlign.evaluate(u):null)})))}eachChild(u){for(const d of this.sections)u(d.content),d.scale&&u(d.scale),d.font&&u(d.font),d.textColor&&u(d.textColor),d.verticalAlign&&u(d.verticalAlign)}outputDefined(){return!1}}class kf{constructor(u){this.type=Ko,this.input=u}static parse(u,d){if(u.length!==2)return d.error("Expected two arguments.");const b=d.parse(u[1],1,Ni);return b?new kf(b):d.error("No image name provided.")}evaluate(u){const d=this.input.evaluate(u),b=ea.fromString(d);return b&&u.availableImages&&(b.available=u.availableImages.indexOf(d)>-1),b}eachChild(u){u(this.input)}outputDefined(){return!1}}class Lm{constructor(u){this.type=gn,this.input=u}static parse(u,d){if(u.length!==2)return d.error(`Expected 1 argument, but found ${u.length-1} instead.`);const b=d.parse(u[1],1);return b?b.type.kind!=="array"&&b.type.kind!=="string"&&b.type.kind!=="value"?d.error(`Expected argument of type string or array, but found ${jr(b.type)} instead.`):new Lm(b):null}evaluate(u){const d=this.input.evaluate(u);if(typeof d=="string")return[...d].length;if(Array.isArray(d))return d.length;throw new _o(`Expected value to be of type string or array, but found ${jr(Gi(d))} instead.`)}eachChild(u){u(this.input)}outputDefined(){return!1}}const Eu=8192;function Rh(f,u){const d=(180+f[0])/360,b=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+f[1]*Math.PI/360)))/360,w=Math.pow(2,u.z);return[Math.round(d*w*Eu),Math.round(b*w*Eu)]}function Ep(f,u){const d=Math.pow(2,u.z);return[(w=(f[0]/Eu+u.x)/d,360*w-180),(b=(f[1]/Eu+u.y)/d,360/Math.PI*Math.atan(Math.exp((180-360*b)*Math.PI/180))-90)];var b,w}function Dh(f,u){f[0]=Math.min(f[0],u[0]),f[1]=Math.min(f[1],u[1]),f[2]=Math.max(f[2],u[0]),f[3]=Math.max(f[3],u[1])}function Tf(f,u){return!(f[0]<=u[0]||f[2]>=u[2]||f[1]<=u[1]||f[3]>=u[3])}function Fm(f,u,d){const b=f[0]-u[0],w=f[1]-u[1],k=f[0]-d[0],D=f[1]-d[1];return b*D-k*w==0&&b*k<=0&&w*D<=0}function Pd(f,u,d,b){return(w=[b[0]-d[0],b[1]-d[1]])[0]*(k=[u[0]-f[0],u[1]-f[1]])[1]-w[1]*k[0]!=0&&!(!zm(f,u,d,b)||!zm(d,b,f,u));var w,k}function x1(f,u,d){for(const b of d)for(let w=0;w<b.length-1;++w)if(Pd(f,u,b[w],b[w+1]))return!0;return!1}function Rc(f,u,d=!1){let b=!1;for(const K of u)for(let N=0;N<K.length-1;N++){if(Fm(f,K[N],K[N+1]))return d;(k=K[N])[1]>(w=f)[1]!=(D=K[N+1])[1]>w[1]&&w[0]<(D[0]-k[0])*(w[1]-k[1])/(D[1]-k[1])+k[0]&&(b=!b)}var w,k,D;return b}function Ou(f,u){for(const d of u)if(Rc(f,d))return!0;return!1}function Op(f,u){for(const d of f)if(!Rc(d,u))return!1;for(let d=0;d<f.length-1;++d)if(x1(f[d],f[d+1],u))return!1;return!0}function Rf(f,u){for(const d of u)if(Op(f,d))return!0;return!1}function zm(f,u,d,b){const w=b[0]-d[0],k=b[1]-d[1],D=(f[0]-d[0])*k-w*(f[1]-d[1]),K=(u[0]-d[0])*k-w*(u[1]-d[1]);return D>0&&K<0||D<0&&K>0}function Bp(f,u,d){const b=[];for(let w=0;w<f.length;w++){const k=[];for(let D=0;D<f[w].length;D++){const K=Rh(f[w][D],d);Dh(u,K),k.push(K)}b.push(k)}return b}function Df(f,u,d){const b=[];for(let w=0;w<f.length;w++){const k=Bp(f[w],u,d);b.push(k)}return b}function Pf(f,u,d,b){if(f[0]<d[0]||f[0]>d[2]){const w=.5*b;let k=f[0]-d[0]>w?-b:d[0]-f[0]>w?b:0;k===0&&(k=f[0]-d[2]>w?-b:d[2]-f[0]>w?b:0),f[0]+=k}Dh(u,f)}function Ip(f,u,d,b){const w=Math.pow(2,b.z)*Eu,k=[b.x*Eu,b.y*Eu],D=[];for(const K of f)for(const N of K){const te=[N.x+k[0],N.y+k[1]];Pf(te,u,d,w),D.push(te)}return D}function kp(f,u,d,b){const w=Math.pow(2,b.z)*Eu,k=[b.x*Eu,b.y*Eu],D=[];for(const N of f){const te=[];for(const re of N){const Ae=[re.x+k[0],re.y+k[1]];Dh(u,Ae),te.push(Ae)}D.push(te)}if(u[2]-u[0]<=w/2){(K=u)[0]=K[1]=1/0,K[2]=K[3]=-1/0;for(const N of D)for(const te of N)Pf(te,u,d,w)}var K;return D}class Ph{constructor(u,d){this.type=ni,this.geojson=u,this.geometries=d}static parse(u,d){if(u.length!==2)return d.error(`'within' expression requires exactly one argument, but found ${u.length-1} instead.`);if(Nr(u[1])){const b=u[1];if(b.type==="FeatureCollection"){const w=[];for(const k of b.features){const{type:D,coordinates:K}=k.geometry;D==="Polygon"&&w.push(K),D==="MultiPolygon"&&w.push(...K)}if(w.length)return new Ph(b,{type:"MultiPolygon",coordinates:w})}else if(b.type==="Feature"){const w=b.geometry.type;if(w==="Polygon"||w==="MultiPolygon")return new Ph(b,b.geometry)}else if(b.type==="Polygon"||b.type==="MultiPolygon")return new Ph(b,b)}return d.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(u){if(u.geometry()!=null&&u.canonicalID()!=null){if(u.geometryType()==="Point")return(function(d,b){const w=[1/0,1/0,-1/0,-1/0],k=[1/0,1/0,-1/0,-1/0],D=d.canonicalID();if(b.type==="Polygon"){const K=Bp(b.coordinates,k,D),N=Ip(d.geometry(),w,k,D);if(!Tf(w,k))return!1;for(const te of N)if(!Rc(te,K))return!1}if(b.type==="MultiPolygon"){const K=Df(b.coordinates,k,D),N=Ip(d.geometry(),w,k,D);if(!Tf(w,k))return!1;for(const te of N)if(!Ou(te,K))return!1}return!0})(u,this.geometries);if(u.geometryType()==="LineString")return(function(d,b){const w=[1/0,1/0,-1/0,-1/0],k=[1/0,1/0,-1/0,-1/0],D=d.canonicalID();if(b.type==="Polygon"){const K=Bp(b.coordinates,k,D),N=kp(d.geometry(),w,k,D);if(!Tf(w,k))return!1;for(const te of N)if(!Op(te,K))return!1}if(b.type==="MultiPolygon"){const K=Df(b.coordinates,k,D),N=kp(d.geometry(),w,k,D);if(!Tf(w,k))return!1;for(const te of N)if(!Rf(te,K))return!1}return!0})(u,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let Uh=class{constructor(f=[],u=(d,b)=>d<b?-1:d>b?1:0){if(this.data=f,this.length=this.data.length,this.compare=u,this.length>0)for(let d=(this.length>>1)-1;d>=0;d--)this._down(d)}push(f){this.data.push(f),this._up(this.length++)}pop(){if(this.length===0)return;const f=this.data[0],u=this.data.pop();return--this.length>0&&(this.data[0]=u,this._down(0)),f}peek(){return this.data[0]}_up(f){const{data:u,compare:d}=this,b=u[f];for(;f>0;){const w=f-1>>1,k=u[w];if(d(b,k)>=0)break;u[f]=k,f=w}u[f]=b}_down(f){const{data:u,compare:d}=this,b=this.length>>1,w=u[f];for(;f<b;){let k=1+(f<<1);const D=k+1;if(D<this.length&&d(u[D],u[k])<0&&(k=D),d(u[k],w)>=0)break;u[f]=u[k],f=k}u[f]=w}};function jm(f,u,d=0,b=f.length-1,w=Tp){for(;b>d;){if(b-d>600){const N=b-d+1,te=u-d+1,re=Math.log(N),Ae=.5*Math.exp(2*re/3),Oe=.5*Math.sqrt(re*Ae*(N-Ae)/N)*(te-N/2<0?-1:1);jm(f,u,Math.max(d,Math.floor(u-te*Ae/N+Oe)),Math.min(b,Math.floor(u+(N-te)*Ae/N+Oe)),w)}const k=f[u];let D=d,K=b;for(JA(f,d,u),w(f[b],k)>0&&JA(f,d,b);D<K;){for(JA(f,D,K),D++,K--;w(f[D],k)<0;)D++;for(;w(f[K],k)>0;)K--}w(f[d],k)===0?JA(f,d,K):(K++,JA(f,K,b)),K<=u&&(d=K+1),u<=K&&(b=K-1)}}function JA(f,u,d){const b=f[u];f[u]=f[d],f[d]=b}function Tp(f,u){return f<u?-1:f>u?1:0}function Uf(f,u){if(f.length<=1)return[f];const d=[];let b,w;for(const k of f){const D=Rp(k);D!==0&&(k.area=Math.abs(D),w===void 0&&(w=D<0),w===D<0?(b&&d.push(b),b=[k]):b.push(k))}if(b&&d.push(b),u>1)for(let k=0;k<d.length;k++)d[k].length<=u||(jm(d[k],u,1,d[k].length-1,eh),d[k]=d[k].slice(0,u));return d}function eh(f,u){return u.area-f.area}function Rp(f){let u=0;for(let d,b,w=0,k=f.length,D=k-1;w<k;D=w++)d=f[w],b=f[D],u+=(b.x-d.x)*(d.y+b.y);return u}const f0=1/298.257223563,M1=f0*(2-f0),w1=Math.PI/180;class Kh{constructor(u){const d=6378.137*w1*1e3,b=Math.cos(u*w1),w=1/(1-M1*(1-b*b)),k=Math.sqrt(w);this.kx=d*k*b,this.ky=d*k*w*(1-M1)}distance(u,d){const b=this.wrap(u[0]-d[0])*this.kx,w=(u[1]-d[1])*this.ky;return Math.sqrt(b*b+w*w)}pointOnLine(u,d){let b,w,k,D,K=1/0;for(let N=0;N<u.length-1;N++){let te=u[N][0],re=u[N][1],Ae=this.wrap(u[N+1][0]-te)*this.kx,Oe=(u[N+1][1]-re)*this.ky,De=0;Ae===0&&Oe===0||(De=(this.wrap(d[0]-te)*this.kx*Ae+(d[1]-re)*this.ky*Oe)/(Ae*Ae+Oe*Oe),De>1?(te=u[N+1][0],re=u[N+1][1]):De>0&&(te+=Ae/this.kx*De,re+=Oe/this.ky*De)),Ae=this.wrap(d[0]-te)*this.kx,Oe=(d[1]-re)*this.ky;const Ue=Ae*Ae+Oe*Oe;Ue<K&&(K=Ue,b=te,w=re,k=N,D=De)}return{point:[b,w],index:k,t:Math.max(0,Math.min(1,D))}}wrap(u){for(;u<-180;)u+=360;for(;u>180;)u-=360;return u}}function Is(f,u){return u[0]-f[0]}function th(f){return f[1]-f[0]+1}function xA(f,u){return f[1]>=f[0]&&f[1]<u}function Nm(f,u){if(f[0]>f[1])return[null,null];const d=th(f);if(u){if(d===2)return[f,null];const w=Math.floor(d/2);return[[f[0],f[0]+w],[f[0]+w,f[1]]]}if(d===1)return[f,null];const b=Math.floor(d/2)-1;return[[f[0],f[0]+b],[f[0]+b+1,f[1]]]}function Gm(f,u){if(!xA(u,f.length))return[1/0,1/0,-1/0,-1/0];const d=[1/0,1/0,-1/0,-1/0];for(let b=u[0];b<=u[1];++b)Dh(d,f[b]);return d}function ao(f){const u=[1/0,1/0,-1/0,-1/0];for(const d of f)for(const b of d)Dh(u,b);return u}function Wm(f){return f[0]!==-1/0&&f[1]!==-1/0&&f[2]!==1/0&&f[3]!==1/0}function Lh(f,u,d){if(!Wm(f)||!Wm(u))return NaN;let b=0,w=0;return f[2]<u[0]&&(b=u[0]-f[2]),f[0]>u[2]&&(b=f[0]-u[2]),f[1]>u[3]&&(w=f[1]-u[3]),f[3]<u[1]&&(w=u[1]-f[3]),d.distance([0,0],[b,w])}function Ut(f,u,d){const b=d.pointOnLine(u,f);return d.distance(f,b.point)}function sn(f,u,d,b,w){const k=Math.min(Ut(f,[d,b],w),Ut(u,[d,b],w)),D=Math.min(Ut(d,[f,u],w),Ut(b,[f,u],w));return Math.min(k,D)}function nn(f,u,d,b,w){if(!xA(u,f.length)||!xA(b,d.length))return 1/0;let k=1/0;for(let D=u[0];D<u[1];++D){const K=f[D],N=f[D+1];for(let te=b[0];te<b[1];++te){const re=d[te],Ae=d[te+1];if(Pd(K,N,re,Ae))return 0;k=Math.min(k,sn(K,N,re,Ae,w))}}return k}function mi(f,u,d,b,w){if(!xA(u,f.length)||!xA(b,d.length))return NaN;let k=1/0;for(let D=u[0];D<=u[1];++D)for(let K=b[0];K<=b[1];++K)if(k=Math.min(k,w.distance(f[D],d[K])),k===0)return k;return k}function vr(f,u,d){if(Rc(f,u,!0))return 0;let b=1/0;for(const w of u){const k=w[0],D=w[w.length-1];if(k!==D&&(b=Math.min(b,Ut(f,[D,k],d)),b===0))return b;const K=d.pointOnLine(w,f);if(b=Math.min(b,d.distance(f,K.point)),b===0)return b}return b}function Vr(f,u,d,b){if(!xA(u,f.length))return NaN;for(let k=u[0];k<=u[1];++k)if(Rc(f[k],d,!0))return 0;let w=1/0;for(let k=u[0];k<u[1];++k){const D=f[k],K=f[k+1];for(const N of d)for(let te=0,re=N.length,Ae=re-1;te<re;Ae=te++){const Oe=N[Ae],De=N[te];if(Pd(D,K,Oe,De))return 0;w=Math.min(w,sn(D,K,Oe,De,b))}}return w}function ks(f,u){for(const d of f)for(const b of d)if(Rc(b,u,!0))return!0;return!1}function Wo(f,u,d,b=1/0){const w=ao(f),k=ao(u);if(b!==1/0&&Lh(w,k,d)>=b)return b;if(Tf(w,k)){if(ks(f,u))return 0}else if(ks(u,f))return 0;let D=1/0;for(const K of f)for(let N=0,te=K.length,re=te-1;N<te;re=N++){const Ae=K[re],Oe=K[N];for(const De of u)for(let Ue=0,Ge=De.length,He=Ge-1;Ue<Ge;He=Ue++){const st=De[He],Tt=De[Ue];if(Pd(Ae,Oe,st,Tt))return 0;D=Math.min(D,sn(Ae,Oe,st,Tt,d))}}return D}function Dp(f,u,d,b,w,k){if(!k)return;const D=Lh(Gm(b,k),w,d);D<u&&f.push([D,k,[0,0]])}function MA(f,u,d,b,w,k,D){if(!k||!D)return;const K=Lh(Gm(b,k),Gm(w,D),d);K<u&&f.push([K,k,D])}function Pl(f,u,d,b,w=1/0){let k=Math.min(b.distance(f[0],d[0][0]),w);if(k===0)return k;const D=new Uh([[0,[0,f.length-1],[0,0]]],Is),K=ao(d);for(;D.length>0;){const N=D.pop();if(N[0]>=k)continue;const te=N[1],re=u?50:100;if(th(te)<=re){if(!xA(te,f.length))return NaN;if(u){const Ae=Vr(f,te,d,b);if(isNaN(Ae)||Ae===0)return Ae;k=Math.min(k,Ae)}else for(let Ae=te[0];Ae<=te[1];++Ae){const Oe=vr(f[Ae],d,b);if(k=Math.min(k,Oe),k===0)return 0}}else{const Ae=Nm(te,u);Dp(D,k,b,f,K,Ae[0]),Dp(D,k,b,f,K,Ae[1])}}return k}function Fh(f,u,d,b,w,k=1/0){let D=Math.min(k,w.distance(f[0],d[0]));if(D===0)return D;const K=new Uh([[0,[0,f.length-1],[0,d.length-1]]],Is);for(;K.length>0;){const N=K.pop();if(N[0]>=D)continue;const te=N[1],re=N[2],Ae=u?50:100,Oe=b?50:100;if(th(te)<=Ae&&th(re)<=Oe){if(!xA(te,f.length)&&xA(re,d.length))return NaN;let De;if(u&&b)De=nn(f,te,d,re,w),D=Math.min(D,De);else if(u&&!b){const Ue=f.slice(te[0],te[1]+1);for(let Ge=re[0];Ge<=re[1];++Ge)if(De=Ut(d[Ge],Ue,w),D=Math.min(D,De),D===0)return D}else if(!u&&b){const Ue=d.slice(re[0],re[1]+1);for(let Ge=te[0];Ge<=te[1];++Ge)if(De=Ut(f[Ge],Ue,w),D=Math.min(D,De),D===0)return D}else De=mi(f,te,d,re,w),D=Math.min(D,De)}else{const De=Nm(te,u),Ue=Nm(re,b);MA(K,D,w,f,d,De[0],Ue[0]),MA(K,D,w,f,d,De[0],Ue[1]),MA(K,D,w,f,d,De[1],Ue[0]),MA(K,D,w,f,d,De[1],Ue[1])}}return D}function Qm(f){return f.type==="MultiPolygon"?f.coordinates.map((u=>({type:"Polygon",coordinates:u}))):f.type==="MultiLineString"?f.coordinates.map((u=>({type:"LineString",coordinates:u}))):f.type==="MultiPoint"?f.coordinates.map((u=>({type:"Point",coordinates:u}))):[f]}class Dc{constructor(u,d){this.type=gn,this.geojson=u,this.geometries=d}static parse(u,d){if(u.length!==2)return d.error(`'distance' expression requires exactly one argument, but found ${u.length-1} instead.`);if(Nr(u[1])){const b=u[1];if(b.type==="FeatureCollection")return new Dc(b,b.features.map((w=>Qm(w.geometry))).flat());if(b.type==="Feature")return new Dc(b,Qm(b.geometry));if("type"in b&&"coordinates"in b)return new Dc(b,Qm(b))}return d.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(u){if(u.geometry()!=null&&u.canonicalID()!=null){if(u.geometryType()==="Point")return(function(d,b){const w=d.geometry(),k=w.flat().map((N=>Ep([N.x,N.y],d.canonical)));if(w.length===0)return NaN;const D=new Kh(k[0][1]);let K=1/0;for(const N of b){switch(N.type){case"Point":K=Math.min(K,Fh(k,!1,[N.coordinates],!1,D,K));break;case"LineString":K=Math.min(K,Fh(k,!1,N.coordinates,!0,D,K));break;case"Polygon":K=Math.min(K,Pl(k,!1,N.coordinates,D,K))}if(K===0)return K}return K})(u,this.geometries);if(u.geometryType()==="LineString")return(function(d,b){const w=d.geometry(),k=w.flat().map((N=>Ep([N.x,N.y],d.canonical)));if(w.length===0)return NaN;const D=new Kh(k[0][1]);let K=1/0;for(const N of b){switch(N.type){case"Point":K=Math.min(K,Fh(k,!0,[N.coordinates],!1,D,K));break;case"LineString":K=Math.min(K,Fh(k,!0,N.coordinates,!0,D,K));break;case"Polygon":K=Math.min(K,Pl(k,!0,N.coordinates,D,K))}if(K===0)return K}return K})(u,this.geometries);if(u.geometryType()==="Polygon")return(function(d,b){const w=d.geometry();if(w.length===0||w[0].length===0)return NaN;const k=Uf(w,0).map((N=>N.map((te=>te.map((re=>Ep([re.x,re.y],d.canonical))))))),D=new Kh(k[0][0][0][1]);let K=1/0;for(const N of b)for(const te of k){switch(N.type){case"Point":K=Math.min(K,Pl([N.coordinates],!1,te,D,K));break;case"LineString":K=Math.min(K,Pl(N.coordinates,!0,te,D,K));break;case"Polygon":K=Math.min(K,Wo(te,N.coordinates,D,K))}if(K===0)return K}return K})(u,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class zh{constructor(u){this.type=Pi,this.key=u}static parse(u,d){if(u.length!==2)return d.error(`Expected 1 argument, but found ${u.length-1} instead.`);const b=u[1];return b==null?d.error("Global state property must be defined."):typeof b!="string"?d.error(`Global state property must be string, but found ${typeof u[1]} instead.`):new zh(b)}evaluate(u){var d;const b=(d=u.globals)===null||d===void 0?void 0:d.globalState;return b&&Object.keys(b).length!==0?Es(b,this.key):null}eachChild(){}outputDefined(){return!1}}const nh={"==":oc,"!=":h0,">":dv,"<":Bf,">=":fv,"<=":d0,array:Qe,at:Cr,boolean:Qe,case:rr,coalesce:Rd,collator:Sp,format:XA,image:kf,in:so,"index-of":yr,interpolate:qa,"interpolate-hcl":qa,"interpolate-lab":qa,length:Lm,let:ki,literal:X,match:Ji,number:Qe,"number-format":If,object:Qe,slice:ys,step:Os,string:Qe,"to-boolean":jn,"to-color":jn,"to-number":jn,"to-string":jn,var:Ei,within:Ph,distance:Dc,"global-state":zh};class kr{constructor(u,d,b,w){this.name=u,this.type=d,this._evaluate=b,this.args=w}evaluate(u){return this._evaluate(u,this.args)}eachChild(u){this.args.forEach(u)}outputDefined(){return!1}static parse(u,d){const b=u[0],w=kr.definitions[b];if(!w)return d.error(`Unknown expression "${b}". If you wanted a literal array, use ["literal", [...]].`,0);const k=Array.isArray(w)?w[0]:w.type,D=Array.isArray(w)?[[w[1],w[2]]]:w.overloads,K=D.filter((([te])=>!Array.isArray(te)||te.length===u.length-1));let N=null;for(const[te,re]of K){N=new zi(d.registry,uu,d.path,null,d.scope);const Ae=[];let Oe=!1;for(let De=1;De<u.length;De++){const Ue=u[De],Ge=Array.isArray(te)?te[De-1]:te.type,He=N.parse(Ue,1+Ae.length,Ge);if(!He){Oe=!0;break}Ae.push(He)}if(!Oe)if(Array.isArray(te)&&te.length!==Ae.length)N.error(`Expected ${te.length} arguments, but found ${Ae.length} instead.`);else{for(let De=0;De<Ae.length;De++){const Ue=Array.isArray(te)?te[De]:te.type,Ge=Ae[De];N.concat(De+1).checkSubtype(Ue,Ge.type)}if(N.errors.length===0)return new kr(b,k,re,Ae)}}if(K.length===1)d.errors.push(...N.errors);else{const te=(K.length?K:D).map((([Ae])=>{return Oe=Ae,Array.isArray(Oe)?`(${Oe.map(jr).join(", ")})`:`(${jr(Oe.type)}...)`;var Oe})).join(" | "),re=[];for(let Ae=1;Ae<u.length;Ae++){const Oe=d.parse(u[Ae],1+re.length);if(!Oe)return null;re.push(jr(Oe.type))}d.error(`Expected arguments of type ${te}, but found (${re.join(", ")}) instead.`)}return null}static register(u,d){kr.definitions=d;for(const b in d)u[b]=kr}}function p0(f,[u,d,b,w]){u=u.evaluate(f),d=d.evaluate(f),b=b.evaluate(f);const k=w?w.evaluate(f):1,D=Ka(u,d,b,k);if(D)throw new _o(D);return new ir(u/255,d/255,b/255,k,!1)}function Pp(f,u){return f in u}function Ul(f,u){const d=u[f];return d===void 0?null:d}function wA(f){return{type:f}}function uu(f){if(f instanceof Ei)return uu(f.boundExpression);if(f instanceof kr&&f.name==="error"||f instanceof Sp||f instanceof Ph||f instanceof Dc||f instanceof zh)return!1;const u=f instanceof jn||f instanceof Qe;let d=!0;return f.eachChild((b=>{d=u?d&&uu(b):d&&b instanceof X})),!!d&&ih(f)&&Bu(f,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"])}function ih(f){if(f instanceof kr&&(f.name==="get"&&f.args.length===1||f.name==="feature-state"||f.name==="has"&&f.args.length===1||f.name==="properties"||f.name==="geometry-type"||f.name==="id"||/^filter-/.test(f.name))||f instanceof Ph||f instanceof Dc)return!1;let u=!0;return f.eachChild((d=>{u&&!ih(d)&&(u=!1)})),u}function SA(f){if(f instanceof kr&&f.name==="feature-state")return!1;let u=!0;return f.eachChild((d=>{u&&!SA(d)&&(u=!1)})),u}function Bu(f,u){if(f instanceof kr&&u.indexOf(f.name)>=0)return!1;let d=!0;return f.eachChild((b=>{d&&!Bu(b,u)&&(d=!1)})),d}function jh(f){return{result:"success",value:f}}function rh(f){return{result:"error",value:f}}function cu(f){return f["property-type"]==="data-driven"||f["property-type"]==="cross-faded-data-driven"}function qm(f){return!!f.expression&&f.expression.parameters.indexOf("zoom")>-1}function oh(f){return!!f.expression&&f.expression.interpolated}function hr(f){return f instanceof Number?"number":f instanceof String?"string":f instanceof Boolean?"boolean":Array.isArray(f)?"array":f===null?"null":typeof f}function Up(f){return typeof f=="object"&&f!==null&&!Array.isArray(f)&&Gi(f)===zs}function yl(f){return f}function sA(f,u){const d=f.stops&&typeof f.stops[0][0]=="object",b=d||!(d||f.property!==void 0),w=f.type||(oh(u)?"exponential":"interval"),k=(function(re){switch(re.type){case"color":return ir.parse;case"padding":return fo.parse;case"numberArray":return as.parse;case"colorArray":return Fo.parse;default:return null}})(u);if(k&&((f=nr({},f)).stops&&(f.stops=f.stops.map((re=>[re[0],k(re[1])]))),f.default=k(f.default?f.default:u.default)),f.colorSpace&&(D=f.colorSpace)!=="rgb"&&D!=="hcl"&&D!=="lab")throw new Error(`Unknown color space: "${f.colorSpace}"`);var D;const K=(function(re){switch(re){case"exponential":return sh;case"interval":return Ud;case"categorical":return S1;case"identity":return Kf;default:throw new Error(`Unknown function type "${re}"`)}})(w);let N,te;if(w==="categorical"){N=Object.create(null);for(const re of f.stops)N[re[0]]=re[1];te=typeof f.stops[0][0]}if(d){const re={},Ae=[];for(let Ue=0;Ue<f.stops.length;Ue++){const Ge=f.stops[Ue],He=Ge[0].zoom;re[He]===void 0&&(re[He]={zoom:He,type:f.type,property:f.property,default:f.default,stops:[]},Ae.push(He)),re[He].stops.push([Ge[0].value,Ge[1]])}const Oe=[];for(const Ue of Ae)Oe.push([re[Ue].zoom,sA(re[Ue],u)]);const De={name:"linear"};return{kind:"composite",interpolationType:De,interpolationFactor:qa.interpolationFactor.bind(void 0,De),zoomStops:Oe.map((Ue=>Ue[0])),evaluate:({zoom:Ue},Ge)=>sh({stops:Oe,base:f.base},u,Ue).evaluate(Ue,Ge)}}if(b){const re=w==="exponential"?{name:"exponential",base:f.base!==void 0?f.base:1}:null;return{kind:"camera",interpolationType:re,interpolationFactor:qa.interpolationFactor.bind(void 0,re),zoomStops:f.stops.map((Ae=>Ae[0])),evaluate:({zoom:Ae})=>K(f,u,Ae,N,te)}}return{kind:"source",evaluate(re,Ae){const Oe=Ae&&Ae.properties?Ae.properties[f.property]:void 0;return Oe===void 0?Kl(f.default,u.default):K(f,u,Oe,N,te)}}}function Kl(f,u,d){return f!==void 0?f:u!==void 0?u:d!==void 0?d:void 0}function S1(f,u,d,b,w){return Kl(typeof d===w?b[d]:void 0,f.default,u.default)}function Ud(f,u,d){if(hr(d)!=="number")return Kl(f.default,u.default);const b=f.stops.length;if(b===1||d<=f.stops[0][0])return f.stops[0][1];if(d>=f.stops[b-1][0])return f.stops[b-1][1];const w=Xo(f.stops.map((k=>k[0])),d);return f.stops[w][1]}function sh(f,u,d){const b=f.base!==void 0?f.base:1;if(hr(d)!=="number")return Kl(f.default,u.default);const w=f.stops.length;if(w===1||d<=f.stops[0][0])return f.stops[0][1];if(d>=f.stops[w-1][0])return f.stops[w-1][1];const k=Xo(f.stops.map((re=>re[0])),d),D=(function(re,Ae,Oe,De){const Ue=De-Oe,Ge=re-Oe;return Ue===0?0:Ae===1?Ge/Ue:(Math.pow(Ae,Ge)-1)/(Math.pow(Ae,Ue)-1)})(d,b,f.stops[k][0],f.stops[k+1][0]),K=f.stops[k][1],N=f.stops[k+1][1],te=Ya[u.type]||yl;return typeof K.evaluate=="function"?{evaluate(...re){const Ae=K.evaluate.apply(void 0,re),Oe=N.evaluate.apply(void 0,re);if(Ae!==void 0&&Oe!==void 0)return te(Ae,Oe,D,f.colorSpace)}}:te(K,N,D,f.colorSpace)}function Kf(f,u,d){switch(u.type){case"color":d=ir.parse(d);break;case"formatted":d=ss.fromString(d.toString());break;case"resolvedImage":d=ea.fromString(d.toString());break;case"padding":d=fo.parse(d);break;case"colorArray":d=Fo.parse(d);break;case"numberArray":d=as.parse(d);break;default:hr(d)===u.type||u.type==="enum"&&u.values[d]||(d=void 0)}return Kl(d,f.default,u.default)}kr.register(nh,{error:[{kind:"error"},[Ni],(f,[u])=>{throw new _o(u.evaluate(f))}],typeof:[Ni,[Pi],(f,[u])=>jr(Gi(u.evaluate(f)))],"to-rgba":[gs(gn,4),[ga],(f,[u])=>{const[d,b,w,k]=u.evaluate(f).rgb;return[255*d,255*b,255*w,k]}],rgb:[ga,[gn,gn,gn],p0],rgba:[ga,[gn,gn,gn,gn],p0],has:{type:ni,overloads:[[[Ni],(f,[u])=>Pp(u.evaluate(f),f.properties())],[[Ni,zs],(f,[u,d])=>Pp(u.evaluate(f),d.evaluate(f))]]},get:{type:Pi,overloads:[[[Ni],(f,[u])=>Ul(u.evaluate(f),f.properties())],[[Ni,zs],(f,[u,d])=>Ul(u.evaluate(f),d.evaluate(f))]]},"feature-state":[Pi,[Ni],(f,[u])=>Ul(u.evaluate(f),f.featureState||{})],properties:[zs,[],f=>f.properties()],"geometry-type":[Ni,[],f=>f.geometryType()],id:[Pi,[],f=>f.id()],zoom:[gn,[],f=>f.globals.zoom],"heatmap-density":[gn,[],f=>f.globals.heatmapDensity||0],elevation:[gn,[],f=>f.globals.elevation||0],"line-progress":[gn,[],f=>f.globals.lineProgress||0],accumulated:[Pi,[],f=>f.globals.accumulated===void 0?null:f.globals.accumulated],"+":[gn,wA(gn),(f,u)=>{let d=0;for(const b of u)d+=b.evaluate(f);return d}],"*":[gn,wA(gn),(f,u)=>{let d=1;for(const b of u)d*=b.evaluate(f);return d}],"-":{type:gn,overloads:[[[gn,gn],(f,[u,d])=>u.evaluate(f)-d.evaluate(f)],[[gn],(f,[u])=>-u.evaluate(f)]]},"/":[gn,[gn,gn],(f,[u,d])=>u.evaluate(f)/d.evaluate(f)],"%":[gn,[gn,gn],(f,[u,d])=>u.evaluate(f)%d.evaluate(f)],ln2:[gn,[],()=>Math.LN2],pi:[gn,[],()=>Math.PI],e:[gn,[],()=>Math.E],"^":[gn,[gn,gn],(f,[u,d])=>Math.pow(u.evaluate(f),d.evaluate(f))],sqrt:[gn,[gn],(f,[u])=>Math.sqrt(u.evaluate(f))],log10:[gn,[gn],(f,[u])=>Math.log(u.evaluate(f))/Math.LN10],ln:[gn,[gn],(f,[u])=>Math.log(u.evaluate(f))],log2:[gn,[gn],(f,[u])=>Math.log(u.evaluate(f))/Math.LN2],sin:[gn,[gn],(f,[u])=>Math.sin(u.evaluate(f))],cos:[gn,[gn],(f,[u])=>Math.cos(u.evaluate(f))],tan:[gn,[gn],(f,[u])=>Math.tan(u.evaluate(f))],asin:[gn,[gn],(f,[u])=>Math.asin(u.evaluate(f))],acos:[gn,[gn],(f,[u])=>Math.acos(u.evaluate(f))],atan:[gn,[gn],(f,[u])=>Math.atan(u.evaluate(f))],min:[gn,wA(gn),(f,u)=>Math.min(...u.map((d=>d.evaluate(f))))],max:[gn,wA(gn),(f,u)=>Math.max(...u.map((d=>d.evaluate(f))))],abs:[gn,[gn],(f,[u])=>Math.abs(u.evaluate(f))],round:[gn,[gn],(f,[u])=>{const d=u.evaluate(f);return d<0?-Math.round(-d):Math.round(d)}],floor:[gn,[gn],(f,[u])=>Math.floor(u.evaluate(f))],ceil:[gn,[gn],(f,[u])=>Math.ceil(u.evaluate(f))],"filter-==":[ni,[Ni,Pi],(f,[u,d])=>f.properties()[u.value]===d.value],"filter-id-==":[ni,[Pi],(f,[u])=>f.id()===u.value],"filter-type-==":[ni,[Ni],(f,[u])=>f.geometryType()===u.value],"filter-<":[ni,[Ni,Pi],(f,[u,d])=>{const b=f.properties()[u.value],w=d.value;return typeof b==typeof w&&b<w}],"filter-id-<":[ni,[Pi],(f,[u])=>{const d=f.id(),b=u.value;return typeof d==typeof b&&d<b}],"filter->":[ni,[Ni,Pi],(f,[u,d])=>{const b=f.properties()[u.value],w=d.value;return typeof b==typeof w&&b>w}],"filter-id->":[ni,[Pi],(f,[u])=>{const d=f.id(),b=u.value;return typeof d==typeof b&&d>b}],"filter-<=":[ni,[Ni,Pi],(f,[u,d])=>{const b=f.properties()[u.value],w=d.value;return typeof b==typeof w&&b<=w}],"filter-id-<=":[ni,[Pi],(f,[u])=>{const d=f.id(),b=u.value;return typeof d==typeof b&&d<=b}],"filter->=":[ni,[Ni,Pi],(f,[u,d])=>{const b=f.properties()[u.value],w=d.value;return typeof b==typeof w&&b>=w}],"filter-id->=":[ni,[Pi],(f,[u])=>{const d=f.id(),b=u.value;return typeof d==typeof b&&d>=b}],"filter-has":[ni,[Pi],(f,[u])=>u.value in f.properties()],"filter-has-id":[ni,[],f=>f.id()!==null&&f.id()!==void 0],"filter-type-in":[ni,[gs(Ni)],(f,[u])=>u.value.indexOf(f.geometryType())>=0],"filter-id-in":[ni,[gs(Pi)],(f,[u])=>u.value.indexOf(f.id())>=0],"filter-in-small":[ni,[Ni,gs(Pi)],(f,[u,d])=>d.value.indexOf(f.properties()[u.value])>=0],"filter-in-large":[ni,[Ni,gs(Pi)],(f,[u,d])=>(function(b,w,k,D){for(;k<=D;){const K=k+D>>1;if(w[K]===b)return!0;w[K]>b?D=K-1:k=K+1}return!1})(f.properties()[u.value],d.value,0,d.value.length-1)],all:{type:ni,overloads:[[[ni,ni],(f,[u,d])=>u.evaluate(f)&&d.evaluate(f)],[wA(ni),(f,u)=>{for(const d of u)if(!d.evaluate(f))return!1;return!0}]]},any:{type:ni,overloads:[[[ni,ni],(f,[u,d])=>u.evaluate(f)||d.evaluate(f)],[wA(ni),(f,u)=>{for(const d of u)if(d.evaluate(f))return!0;return!1}]]},"!":[ni,[ni],(f,[u])=>!u.evaluate(f)],"is-supported-script":[ni,[Ni],(f,[u])=>{const d=f.globals&&f.globals.isSupportedScript;return!d||d(u.evaluate(f))}],upcase:[Ni,[Ni],(f,[u])=>u.evaluate(f).toUpperCase()],downcase:[Ni,[Ni],(f,[u])=>u.evaluate(f).toLowerCase()],concat:[Ni,wA(Pi),(f,u)=>u.map((d=>Ai(d.evaluate(f)))).join("")],"resolved-locale":[Ni,[kl],(f,[u])=>u.evaluate(f).resolvedLocale()]});class Kd{constructor(u,d,b){this.expression=u,this._warningHistory={},this._evaluator=new _i,this._defaultValue=d?(function(w){if(w.type==="color"&&Up(w.default))return new ir(0,0,0,0);switch(w.type){case"color":return ir.parse(w.default)||null;case"padding":return fo.parse(w.default)||null;case"numberArray":return as.parse(w.default)||null;case"colorArray":return Fo.parse(w.default)||null;case"variableAnchorOffsetCollection":return So.parse(w.default)||null;case"projectionDefinition":return oo.parse(w.default)||null;default:return w.default===void 0?null:w.default}})(d):null,this._enumValues=d&&d.type==="enum"?d.values:null,this._globalState=b}evaluateWithoutErrorHandling(u,d,b,w,k,D){return this._globalState&&(u=sl(u,this._globalState)),this._evaluator.globals=u,this._evaluator.feature=d,this._evaluator.featureState=b,this._evaluator.canonical=w,this._evaluator.availableImages=k||null,this._evaluator.formattedSection=D,this.expression.evaluate(this._evaluator)}evaluate(u,d,b,w,k,D){this._globalState&&(u=sl(u,this._globalState)),this._evaluator.globals=u,this._evaluator.feature=d||null,this._evaluator.featureState=b||null,this._evaluator.canonical=w,this._evaluator.availableImages=k||null,this._evaluator.formattedSection=D||null;try{const K=this.expression.evaluate(this._evaluator);if(K==null||typeof K=="number"&&K!=K)return this._defaultValue;if(this._enumValues&&!(K in this._enumValues))throw new _o(`Expected value to be one of ${Object.keys(this._enumValues).map((N=>JSON.stringify(N))).join(", ")}, but found ${JSON.stringify(K)} instead.`);return K}catch(K){return this._warningHistory[K.message]||(this._warningHistory[K.message]=!0,typeof console<"u"&&console.warn(K.message)),this._defaultValue}}}function Nh(f){return Array.isArray(f)&&f.length>0&&typeof f[0]=="string"&&f[0]in nh}function Kp(f,u,d){const b=new zi(nh,uu,[],u?(function(k){const D={color:ga,string:Ni,number:gn,enum:Ni,boolean:ni,formatted:eo,padding:ya,numberArray:Xs,colorArray:tu,projectionDefinition:Ra,resolvedImage:Ko,variableAnchorOffsetCollection:Zo};return k.type==="array"?gs(D[k.value]||Pi,k.length):D[k.type]})(u):void 0),w=b.parse(f,void 0,void 0,void 0,u&&u.type==="string"?{typeAnnotation:"coerce"}:void 0);return w?jh(new Kd(w,u,d)):rh(b.errors)}class Ll{constructor(u,d,b){this.kind=u,this._styleExpression=d,this.isStateDependent=u!=="constant"&&!SA(d.expression),this.globalStateRefs=Fl(d.expression),this._globalState=b}evaluateWithoutErrorHandling(u,d,b,w,k,D){return this._globalState&&(u=sl(u,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(u,d,b,w,k,D)}evaluate(u,d,b,w,k,D){return this._globalState&&(u=sl(u,this._globalState)),this._styleExpression.evaluate(u,d,b,w,k,D)}}class ah{constructor(u,d,b,w,k){this.kind=u,this.zoomStops=b,this._styleExpression=d,this.isStateDependent=u!=="camera"&&!SA(d.expression),this.globalStateRefs=Fl(d.expression),this.interpolationType=w,this._globalState=k}evaluateWithoutErrorHandling(u,d,b,w,k,D){return this._globalState&&(u=sl(u,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(u,d,b,w,k,D)}evaluate(u,d,b,w,k,D){return this._globalState&&(u=sl(u,this._globalState)),this._styleExpression.evaluate(u,d,b,w,k,D)}interpolationFactor(u,d,b){return this.interpolationType?qa.interpolationFactor(this.interpolationType,u,d,b):0}}function Gh(f,u,d){const b=Kp(f,u,d);if(b.result==="error")return b;const w=b.value.expression,k=ih(w);if(!k&&!cu(u))return rh([new Go("","data expressions not supported")]);const D=Bu(w,["zoom"]);if(!D&&!qm(u))return rh([new Go("","zoom expressions not supported")]);const K=ta(w);return K||D?K instanceof Go?rh([K]):K instanceof qa&&!oh(u)?rh([new Go("",'"interpolate" expressions cannot be used with this property')]):jh(K?new ah(k?"camera":"composite",b.value,K.labels,K instanceof qa?K.interpolation:void 0,d):new Ll(k?"constant":"source",b.value,d)):rh([new Go("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Ts{constructor(u,d){this._parameters=u,this._specification=d,nr(this,sA(this._parameters,this._specification))}static deserialize(u){return new Ts(u._parameters,u._specification)}static serialize(u){return{_parameters:u._parameters,_specification:u._specification}}}function ta(f){let u=null;if(f instanceof ki)u=ta(f.result);else if(f instanceof Rd){for(const d of f.args)if(u=ta(d),u)break}else(f instanceof Os||f instanceof qa)&&f.input instanceof kr&&f.input.name==="zoom"&&(u=f);return u instanceof Go||f.eachChild((d=>{const b=ta(d);b instanceof Go?u=b:!u&&b?u=new Go("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):u&&b&&u!==b&&(u=new Go("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),u}function Fl(f,u=new Set){return f instanceof zh&&u.add(f.key),f.eachChild((d=>{Fl(d,u)})),u}function sl(f,u){const{zoom:d,heatmapDensity:b,elevation:w,lineProgress:k,isSupportedScript:D,accumulated:K}=f??{};return{zoom:d,heatmapDensity:b,elevation:w,lineProgress:k,isSupportedScript:D,accumulated:K,globalState:u}}function Pc(f){if(f===!0||f===!1)return!0;if(!Array.isArray(f)||f.length===0)return!1;switch(f[0]){case"has":return f.length>=2&&f[1]!=="$id"&&f[1]!=="$type";case"in":return f.length>=3&&(typeof f[1]!="string"||Array.isArray(f[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return f.length!==3||Array.isArray(f[1])||Array.isArray(f[2]);case"any":case"all":for(const u of f.slice(1))if(!Pc(u)&&typeof u!="boolean")return!1;return!0;default:return!0}}const EA={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function zl(f,u){if(f==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};Pc(f)||(f=Uc(f));const d=Kp(f,EA,u);if(d.result==="error")throw new Error(d.value.map((b=>`${b.key}: ${b.message}`)).join(", "));return{filter:(b,w,k)=>d.value.evaluate(b,w,{},k),needGeometry:Lp(f),getGlobalStateRefs:()=>Fl(d.value.expression)}}function sc(f,u){return f<u?-1:f>u?1:0}function Lp(f){if(!Array.isArray(f))return!1;if(f[0]==="within"||f[0]==="distance")return!0;for(let u=1;u<f.length;u++)if(Lp(f[u]))return!0;return!1}function Uc(f){if(!f)return!0;const u=f[0];return f.length<=1?u!=="any":u==="=="?OA(f[1],f[2],"=="):u==="!="?lo(OA(f[1],f[2],"==")):u==="<"||u===">"||u==="<="||u===">="?OA(f[1],f[2],u):u==="any"?(d=f.slice(1),["any"].concat(d.map(Uc))):u==="all"?["all"].concat(f.slice(1).map(Uc)):u==="none"?["all"].concat(f.slice(1).map(Uc).map(lo)):u==="in"?lh(f[1],f.slice(2)):u==="!in"?lo(lh(f[1],f.slice(2))):u==="has"?na(f[1]):u!=="!has"||lo(na(f[1]));var d}function OA(f,u,d){switch(f){case"$type":return[`filter-type-${d}`,u];case"$id":return[`filter-id-${d}`,u];default:return[`filter-${d}`,f,u]}}function lh(f,u){if(u.length===0)return!1;switch(f){case"$type":return["filter-type-in",["literal",u]];case"$id":return["filter-id-in",["literal",u]];default:return u.length>200&&!u.some((d=>typeof d!=typeof u[0]))?["filter-in-large",f,["literal",u.sort(sc)]]:["filter-in-small",f,["literal",u]]}}function na(f){switch(f){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",f]}}function lo(f){return["!",f]}function Gr(f){const u=typeof f;if(u==="number"||u==="boolean"||u==="string"||f==null)return JSON.stringify(f);if(Array.isArray(f)){let w="[";for(const k of f)w+=`${Gr(k)},`;return`${w}]`}const d=Object.keys(f).sort();let b="{";for(let w=0;w<d.length;w++)b+=`${JSON.stringify(d[w])}:${Gr(f[d[w]])},`;return`${b}}`}function aA(f){let u="";for(const d of Qn)u+=`/${Gr(f[d])}`;return u}function ac(f){const u=f.value;return u?[new on(f.key,u,"constants have been deprecated as of v8")]:[]}function js(f){return f instanceof Number||f instanceof String||f instanceof Boolean?f.valueOf():f}function Iu(f){if(Array.isArray(f))return f.map(Iu);if(f instanceof Object&&!(f instanceof Number||f instanceof String||f instanceof Boolean)){const u={};for(const d in f)u[d]=Iu(f[d]);return u}return js(f)}function jl(f){const u=f.key,d=f.value,b=f.valueSpec||{},w=f.objectElementValidators||{},k=f.style,D=f.styleSpec,K=f.validateSpec;let N=[];const te=hr(d);if(te!=="object")return[new on(u,d,`object expected, ${te} found`)];for(const re in d){const Ae=re.split(".")[0],Oe=Es(b,Ae)||b["*"];let De;if(Es(w,Ae))De=w[Ae];else if(Es(b,Ae))De=K;else if(w["*"])De=w["*"];else{if(!b["*"]){N.push(new on(u,d[re],`unknown property "${re}"`));continue}De=K}N=N.concat(De({key:(u&&`${u}.`)+re,value:d[re],valueSpec:Oe,style:k,styleSpec:D,object:d,objectKey:re,validateSpec:K},d))}for(const re in b)w[re]||b[re].required&&b[re].default===void 0&&d[re]===void 0&&N.push(new on(u,d,`missing required property "${re}"`));return N}function Wh(f){const u=f.value,d=f.valueSpec,b=f.style,w=f.styleSpec,k=f.key,D=f.arrayElementValidator||f.validateSpec;if(hr(u)!=="array")return[new on(k,u,`array expected, ${hr(u)} found`)];if(d.length&&u.length!==d.length)return[new on(k,u,`array length ${d.length} expected, length ${u.length} found`)];if(d["min-length"]&&u.length<d["min-length"])return[new on(k,u,`array length at least ${d["min-length"]} expected, length ${u.length} found`)];let K={type:d.value,values:d.values};w.$version<7&&(K.function=d.function),hr(d.value)==="object"&&(K=d.value);let N=[];for(let te=0;te<u.length;te++)N=N.concat(D({array:u,arrayIndex:te,value:u[te],valueSpec:K,validateSpec:f.validateSpec,style:b,styleSpec:w,key:`${k}[${te}]`}));return N}function BA(f){const u=f.key,d=f.value,b=f.valueSpec;let w=hr(d);return w==="number"&&d!=d&&(w="NaN"),w!=="number"?[new on(u,d,`number expected, ${w} found`)]:"minimum"in b&&d<b.minimum?[new on(u,d,`${d} is less than the minimum value ${b.minimum}`)]:"maximum"in b&&d>b.maximum?[new on(u,d,`${d} is greater than the maximum value ${b.maximum}`)]:[]}function Ye(f){const u=f.valueSpec,d=js(f.value.type);let b,w,k,D={};const K=d!=="categorical"&&f.value.property===void 0,N=!K,te=hr(f.value.stops)==="array"&&hr(f.value.stops[0])==="array"&&hr(f.value.stops[0][0])==="object",re=jl({key:f.key,value:f.value,valueSpec:f.styleSpec.function,validateSpec:f.validateSpec,style:f.style,styleSpec:f.styleSpec,objectElementValidators:{stops:function(De){if(d==="identity")return[new on(De.key,De.value,'identity function may not have a "stops" property')];let Ue=[];const Ge=De.value;return Ue=Ue.concat(Wh({key:De.key,value:Ge,valueSpec:De.valueSpec,validateSpec:De.validateSpec,style:De.style,styleSpec:De.styleSpec,arrayElementValidator:Ae})),hr(Ge)==="array"&&Ge.length===0&&Ue.push(new on(De.key,Ge,"array must have at least one stop")),Ue},default:function(De){return De.validateSpec({key:De.key,value:De.value,valueSpec:u,validateSpec:De.validateSpec,style:De.style,styleSpec:De.styleSpec})}}});return d==="identity"&&K&&re.push(new on(f.key,f.value,'missing required property "property"')),d==="identity"||f.value.stops||re.push(new on(f.key,f.value,'missing required property "stops"')),d==="exponential"&&f.valueSpec.expression&&!oh(f.valueSpec)&&re.push(new on(f.key,f.value,"exponential functions not supported")),f.styleSpec.$version>=8&&(N&&!cu(f.valueSpec)?re.push(new on(f.key,f.value,"property functions not supported")):K&&!qm(f.valueSpec)&&re.push(new on(f.key,f.value,"zoom functions not supported"))),d!=="categorical"&&!te||f.value.property!==void 0||re.push(new on(f.key,f.value,'"property" property is required')),re;function Ae(De){let Ue=[];const Ge=De.value,He=De.key;if(hr(Ge)!=="array")return[new on(He,Ge,`array expected, ${hr(Ge)} found`)];if(Ge.length!==2)return[new on(He,Ge,`array length 2 expected, length ${Ge.length} found`)];if(te){if(hr(Ge[0])!=="object")return[new on(He,Ge,`object expected, ${hr(Ge[0])} found`)];if(Ge[0].zoom===void 0)return[new on(He,Ge,"object stop key must have zoom")];if(Ge[0].value===void 0)return[new on(He,Ge,"object stop key must have value")];if(k&&k>js(Ge[0].zoom))return[new on(He,Ge[0].zoom,"stop zoom values must appear in ascending order")];js(Ge[0].zoom)!==k&&(k=js(Ge[0].zoom),w=void 0,D={}),Ue=Ue.concat(jl({key:`${He}[0]`,value:Ge[0],valueSpec:{zoom:{}},validateSpec:De.validateSpec,style:De.style,styleSpec:De.styleSpec,objectElementValidators:{zoom:BA,value:Oe}}))}else Ue=Ue.concat(Oe({key:`${He}[0]`,value:Ge[0],validateSpec:De.validateSpec,style:De.style,styleSpec:De.styleSpec},Ge));return Nh(Iu(Ge[1]))?Ue.concat([new on(`${He}[1]`,Ge[1],"expressions are not allowed in function stops.")]):Ue.concat(De.validateSpec({key:`${He}[1]`,value:Ge[1],valueSpec:u,validateSpec:De.validateSpec,style:De.style,styleSpec:De.styleSpec}))}function Oe(De,Ue){const Ge=hr(De.value),He=js(De.value),st=De.value!==null?De.value:Ue;if(b){if(Ge!==b)return[new on(De.key,st,`${Ge} stop domain type must match previous stop domain type ${b}`)]}else b=Ge;if(Ge!=="number"&&Ge!=="string"&&Ge!=="boolean")return[new on(De.key,st,"stop domain value must be a number, string, or boolean")];if(Ge!=="number"&&d!=="categorical"){let Tt=`number expected, ${Ge} found`;return cu(u)&&d===void 0&&(Tt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new on(De.key,st,Tt)]}return d!=="categorical"||Ge!=="number"||isFinite(He)&&Math.floor(He)===He?d!=="categorical"&&Ge==="number"&&w!==void 0&&He<w?[new on(De.key,st,"stop domain values must appear in ascending order")]:(w=He,d==="categorical"&&He in D?[new on(De.key,st,"stop domain values must be unique")]:(D[He]=!0,[])):[new on(De.key,st,`integer expected, found ${He}`)]}}function ku(f){const u=(f.expressionContext==="property"?Gh:Kp)(Iu(f.value),f.valueSpec);if(u.result==="error")return u.value.map((b=>new on(`${f.key}${b.key}`,f.value,b.message)));const d=u.value.expression||u.value._styleExpression.expression;if(f.expressionContext==="property"&&f.propertyKey==="text-font"&&!d.outputDefined())return[new on(f.key,f.value,`Invalid data expression for "${f.propertyKey}". Output values must be contained as literals within the expression.`)];if(f.expressionContext==="property"&&f.propertyType==="layout"&&!SA(d))return[new on(f.key,f.value,'"feature-state" data expressions are not supported with layout properties.')];if(f.expressionContext==="filter"&&!SA(d))return[new on(f.key,f.value,'"feature-state" data expressions are not supported with filters.')];if(f.expressionContext&&f.expressionContext.indexOf("cluster")===0){if(!Bu(d,["zoom","feature-state"]))return[new on(f.key,f.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(f.expressionContext==="cluster-initial"&&!ih(d))return[new on(f.key,f.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function lc(f){const u=f.key,d=f.value,b=hr(d);return b!=="string"?[new on(u,d,`color expected, ${b} found`)]:ir.parse(String(d))?[]:[new on(u,d,`color expected, "${d}" found`)]}function al(f){const u=f.key,d=f.value,b=f.valueSpec,w=[];return Array.isArray(b.values)?b.values.indexOf(js(d))===-1&&w.push(new on(u,d,`expected one of [${b.values.join(", ")}], ${JSON.stringify(d)} found`)):Object.keys(b.values).indexOf(js(d))===-1&&w.push(new on(u,d,`expected one of [${Object.keys(b.values).join(", ")}], ${JSON.stringify(d)} found`)),w}function br(f){return Pc(Iu(f.value))?ku(nr({},f,{expressionContext:"filter",valueSpec:{value:"boolean"}})):lA(f)}function lA(f){const u=f.value,d=f.key;if(hr(u)!=="array")return[new on(d,u,`array expected, ${hr(u)} found`)];const b=f.styleSpec;let w,k=[];if(u.length<1)return[new on(d,u,"filter array must have at least 1 element")];switch(k=k.concat(al({key:`${d}[0]`,value:u[0],valueSpec:b.filter_operator,style:f.style,styleSpec:f.styleSpec})),js(u[0])){case"<":case"<=":case">":case">=":u.length>=2&&js(u[1])==="$type"&&k.push(new on(d,u,`"$type" cannot be use with operator "${u[0]}"`));case"==":case"!=":u.length!==3&&k.push(new on(d,u,`filter array for operator "${u[0]}" must have 3 elements`));case"in":case"!in":u.length>=2&&(w=hr(u[1]),w!=="string"&&k.push(new on(`${d}[1]`,u[1],`string expected, ${w} found`)));for(let D=2;D<u.length;D++)w=hr(u[D]),js(u[1])==="$type"?k=k.concat(al({key:`${d}[${D}]`,value:u[D],valueSpec:b.geometry_type,style:f.style,styleSpec:f.styleSpec})):w!=="string"&&w!=="number"&&w!=="boolean"&&k.push(new on(`${d}[${D}]`,u[D],`string, number, or boolean expected, ${w} found`));break;case"any":case"all":case"none":for(let D=1;D<u.length;D++)k=k.concat(lA({key:`${d}[${D}]`,value:u[D],style:f.style,styleSpec:f.styleSpec}));break;case"has":case"!has":w=hr(u[1]),u.length!==2?k.push(new on(d,u,`filter array for "${u[0]}" operator must have 2 elements`)):w!=="string"&&k.push(new on(`${d}[1]`,u[1],`string expected, ${w} found`))}return k}function uh(f,u){const d=f.key,b=f.validateSpec,w=f.style,k=f.styleSpec,D=f.value,K=f.objectKey,N=k[`${u}_${f.layerType}`];if(!N)return[];const te=K.match(/^(.*)-transition$/);if(u==="paint"&&te&&N[te[1]]&&N[te[1]].transition)return b({key:d,value:D,valueSpec:k.transition,style:w,styleSpec:k});const re=f.valueSpec||N[K];if(!re)return[new on(d,D,`unknown property "${K}"`)];let Ae;if(hr(D)==="string"&&cu(re)&&!re.tokens&&(Ae=/^{([^}]+)}$/.exec(D)))return[new on(d,D,`"${K}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(Ae[1])} }\`.`)];const Oe=[];return f.layerType==="symbol"&&(K==="text-field"&&w&&!w.glyphs&&Oe.push(new on(d,D,'use of "text-field" requires a style "glyphs" property')),K==="text-font"&&Up(Iu(D))&&js(D.type)==="identity"&&Oe.push(new on(d,D,'"text-font" does not support identity functions'))),Oe.concat(b({key:f.key,value:D,valueSpec:re,style:w,styleSpec:k,expressionContext:"property",propertyType:u,propertyKey:K}))}function uA(f){return uh(f,"paint")}function cA(f){return uh(f,"layout")}function Qh(f){let u=[];const d=f.value,b=f.key,w=f.style,k=f.styleSpec;if(hr(d)!=="object")return[new on(b,d,`object expected, ${hr(d)} found`)];d.type||d.ref||u.push(new on(b,d,'either "type" or "ref" is required'));let D=js(d.type);const K=js(d.ref);if(d.id){const N=js(d.id);for(let te=0;te<f.arrayIndex;te++){const re=w.layers[te];js(re.id)===N&&u.push(new on(b,d.id,`duplicate layer id "${d.id}", previously used at line ${re.id.__line__}`))}}if("ref"in d){let N;["type","source","source-layer","filter","layout"].forEach((te=>{te in d&&u.push(new on(b,d[te],`"${te}" is prohibited for ref layers`))})),w.layers.forEach((te=>{js(te.id)===K&&(N=te)})),N?N.ref?u.push(new on(b,d.ref,"ref cannot reference another ref layer")):D=js(N.type):u.push(new on(b,d.ref,`ref layer "${K}" not found`))}else if(D!=="background")if(d.source){const N=w.sources&&w.sources[d.source],te=N&&js(N.type);N?te==="vector"&&D==="raster"?u.push(new on(b,d.source,`layer "${d.id}" requires a raster source`)):te!=="raster-dem"&&D==="hillshade"||te!=="raster-dem"&&D==="color-relief"?u.push(new on(b,d.source,`layer "${d.id}" requires a raster-dem source`)):te==="raster"&&D!=="raster"?u.push(new on(b,d.source,`layer "${d.id}" requires a vector source`)):te!=="vector"||d["source-layer"]?te==="raster-dem"&&D!=="hillshade"&&D!=="color-relief"?u.push(new on(b,d.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):D!=="line"||!d.paint||!d.paint["line-gradient"]||te==="geojson"&&N.lineMetrics||u.push(new on(b,d,`layer "${d.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):u.push(new on(b,d,`layer "${d.id}" must specify a "source-layer"`)):u.push(new on(b,d.source,`source "${d.source}" not found`))}else u.push(new on(b,d,'missing required property "source"'));return u=u.concat(jl({key:b,value:d,valueSpec:k.layer,style:f.style,styleSpec:f.styleSpec,validateSpec:f.validateSpec,objectElementValidators:{"*":()=>[],type:()=>f.validateSpec({key:`${b}.type`,value:d.type,valueSpec:k.layer.type,style:f.style,styleSpec:f.styleSpec,validateSpec:f.validateSpec,object:d,objectKey:"type"}),filter:br,layout:N=>jl({layer:d,key:N.key,value:N.value,style:N.style,styleSpec:N.styleSpec,validateSpec:N.validateSpec,objectElementValidators:{"*":te=>cA(nr({layerType:D},te))}}),paint:N=>jl({layer:d,key:N.key,value:N.value,style:N.style,styleSpec:N.styleSpec,validateSpec:N.validateSpec,objectElementValidators:{"*":te=>uA(nr({layerType:D},te))}})}})),u}function Kc(f){const u=f.value,d=f.key,b=hr(u);return b!=="string"?[new on(d,u,`string expected, ${b} found`)]:[]}const Fp={promoteId:function({key:f,value:u}){if(hr(u)==="string")return Kc({key:f,value:u});{const d=[];for(const b in u)d.push(...Kc({key:`${f}.${b}`,value:u[b]}));return d}}};function qh(f){const u=f.value,d=f.key,b=f.styleSpec,w=f.style,k=f.validateSpec;if(!u.type)return[new on(d,u,'"type" is required')];const D=js(u.type);let K;switch(D){case"vector":case"raster":return K=jl({key:d,value:u,valueSpec:b[`source_${D.replace("-","_")}`],style:f.style,styleSpec:b,objectElementValidators:Fp,validateSpec:k}),K;case"raster-dem":return K=(function(N){var te;const re=(te=N.sourceName)!==null&&te!==void 0?te:"",Ae=N.value,Oe=N.styleSpec,De=Oe.source_raster_dem,Ue=N.style;let Ge=[];const He=hr(Ae);if(Ae===void 0)return Ge;if(He!=="object")return Ge.push(new on("source_raster_dem",Ae,`object expected, ${He} found`)),Ge;const st=js(Ae.encoding)==="custom",Tt=["redFactor","greenFactor","blueFactor","baseShift"],dt=N.value.encoding?`"${N.value.encoding}"`:"Default";for(const Ct in Ae)!st&&Tt.includes(Ct)?Ge.push(new on(Ct,Ae[Ct],`In "${re}": "${Ct}" is only valid when "encoding" is set to "custom". ${dt} encoding found`)):De[Ct]?Ge=Ge.concat(N.validateSpec({key:Ct,value:Ae[Ct],valueSpec:De[Ct],validateSpec:N.validateSpec,style:Ue,styleSpec:Oe})):Ge.push(new on(Ct,Ae[Ct],`unknown property "${Ct}"`));return Ge})({sourceName:d,value:u,style:f.style,styleSpec:b,validateSpec:k}),K;case"geojson":if(K=jl({key:d,value:u,valueSpec:b.source_geojson,style:w,styleSpec:b,validateSpec:k,objectElementValidators:Fp}),u.cluster)for(const N in u.clusterProperties){const[te,re]=u.clusterProperties[N],Ae=typeof te=="string"?[te,["accumulated"],["get",N]]:te;K.push(...ku({key:`${d}.${N}.map`,value:re,expressionContext:"cluster-map"})),K.push(...ku({key:`${d}.${N}.reduce`,value:Ae,expressionContext:"cluster-reduce"}))}return K;case"video":return jl({key:d,value:u,valueSpec:b.source_video,style:w,validateSpec:k,styleSpec:b});case"image":return jl({key:d,value:u,valueSpec:b.source_image,style:w,validateSpec:k,styleSpec:b});case"canvas":return[new on(d,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return al({key:`${d}.type`,value:u.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function ll(f){const u=f.value,d=f.styleSpec,b=d.light,w=f.style;let k=[];const D=hr(u);if(u===void 0)return k;if(D!=="object")return k=k.concat([new on("light",u,`object expected, ${D} found`)]),k;for(const K in u){const N=K.match(/^(.*)-transition$/);k=k.concat(N&&b[N[1]]&&b[N[1]].transition?f.validateSpec({key:K,value:u[K],valueSpec:d.transition,validateSpec:f.validateSpec,style:w,styleSpec:d}):b[K]?f.validateSpec({key:K,value:u[K],valueSpec:b[K],validateSpec:f.validateSpec,style:w,styleSpec:d}):[new on(K,u[K],`unknown property "${K}"`)])}return k}function uc(f){const u=f.value,d=f.styleSpec,b=d.sky,w=f.style,k=hr(u);if(u===void 0)return[];if(k!=="object")return[new on("sky",u,`object expected, ${k} found`)];let D=[];for(const K in u)D=D.concat(b[K]?f.validateSpec({key:K,value:u[K],valueSpec:b[K],style:w,styleSpec:d}):[new on(K,u[K],`unknown property "${K}"`)]);return D}function m0(f){const u=f.value,d=f.styleSpec,b=d.terrain,w=f.style;let k=[];const D=hr(u);if(u===void 0)return k;if(D!=="object")return k=k.concat([new on("terrain",u,`object expected, ${D} found`)]),k;for(const K in u)k=k.concat(b[K]?f.validateSpec({key:K,value:u[K],valueSpec:b[K],validateSpec:f.validateSpec,style:w,styleSpec:d}):[new on(K,u[K],`unknown property "${K}"`)]);return k}function Lf(f){let u=[];const d=f.value,b=f.key;if(Array.isArray(d)){const w=[],k=[];for(const D in d)d[D].id&&w.includes(d[D].id)&&u.push(new on(b,d,`all the sprites' ids must be unique, but ${d[D].id} is duplicated`)),w.push(d[D].id),d[D].url&&k.includes(d[D].url)&&u.push(new on(b,d,`all the sprites' URLs must be unique, but ${d[D].url} is duplicated`)),k.push(d[D].url),u=u.concat(jl({key:`${b}[${D}]`,value:d[D],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:f.validateSpec}));return u}return Kc({key:b,value:d})}function Ff(f){return u=f.value,u&&u.constructor===Object?[]:[new on(f.key,f.value,`object expected, ${hr(f.value)} found`)];var u}const Tu={"*":()=>[],array:Wh,boolean:function(f){const u=f.value,d=f.key,b=hr(u);return b!=="boolean"?[new on(d,u,`boolean expected, ${b} found`)]:[]},number:BA,color:lc,constants:ac,enum:al,filter:br,function:Ye,layer:Qh,object:jl,source:qh,light:ll,sky:uc,terrain:m0,projection:function(f){const u=f.value,d=f.styleSpec,b=d.projection,w=f.style,k=hr(u);if(u===void 0)return[];if(k!=="object")return[new on("projection",u,`object expected, ${k} found`)];let D=[];for(const K in u)D=D.concat(b[K]?f.validateSpec({key:K,value:u[K],valueSpec:b[K],style:w,styleSpec:d}):[new on(K,u[K],`unknown property "${K}"`)]);return D},projectionDefinition:function(f){const u=f.key;let d=f.value;d=d instanceof String?d.valueOf():d;const b=hr(d);return b!=="array"||(function(w){return Array.isArray(w)&&w.length===3&&typeof w[0]=="string"&&typeof w[1]=="string"&&typeof w[2]=="number"})(d)||(function(w){return!!["interpolate","step","literal"].includes(w[0])})(d)?["array","string"].includes(b)?[]:[new on(u,d,`projection expected, invalid type "${b}" found`)]:[new on(u,d,`projection expected, invalid array ${JSON.stringify(d)} found`)]},string:Kc,formatted:function(f){return Kc(f).length===0?[]:ku(f)},resolvedImage:function(f){return Kc(f).length===0?[]:ku(f)},padding:function(f){const u=f.key,d=f.value;if(hr(d)==="array"){if(d.length<1||d.length>4)return[new on(u,d,`padding requires 1 to 4 values; ${d.length} values found`)];const b={type:"number"};let w=[];for(let k=0;k<d.length;k++)w=w.concat(f.validateSpec({key:`${u}[${k}]`,value:d[k],validateSpec:f.validateSpec,valueSpec:b}));return w}return BA({key:u,value:d,valueSpec:{}})},numberArray:function(f){const u=f.key,d=f.value;if(hr(d)==="array"){const b={type:"number"};if(d.length<1)return[new on(u,d,"array length at least 1 expected, length 0 found")];let w=[];for(let k=0;k<d.length;k++)w=w.concat(f.validateSpec({key:`${u}[${k}]`,value:d[k],validateSpec:f.validateSpec,valueSpec:b}));return w}return BA({key:u,value:d,valueSpec:{}})},colorArray:function(f){const u=f.key,d=f.value;if(hr(d)==="array"){if(d.length<1)return[new on(u,d,"array length at least 1 expected, length 0 found")];let b=[];for(let w=0;w<d.length;w++)b=b.concat(lc({key:`${u}[${w}]`,value:d[w]}));return b}return lc({key:u,value:d})},variableAnchorOffsetCollection:function(f){const u=f.key,d=f.value,b=hr(d),w=f.styleSpec;if(b!=="array"||d.length<1||d.length%2!=0)return[new on(u,d,"variableAnchorOffsetCollection requires a non-empty array of even length")];let k=[];for(let D=0;D<d.length;D+=2)k=k.concat(al({key:`${u}[${D}]`,value:d[D],valueSpec:w.layout_symbol["text-anchor"]})),k=k.concat(Wh({key:`${u}[${D+1}]`,value:d[D+1],valueSpec:{length:2,value:"number"},validateSpec:f.validateSpec,style:f.style,styleSpec:w}));return k},sprite:Lf,state:Ff};function ls(f){const u=f.value,d=f.valueSpec,b=f.styleSpec;return f.validateSpec=ls,d.expression&&Up(js(u))?Ye(f):d.expression&&Nh(Iu(u))?ku(f):d.type&&Tu[d.type]?Tu[d.type](f):jl(nr({},f,{valueSpec:d.type?b[d.type]:d}))}function cc(f){const u=f.value,d=f.key,b=Kc(f);return b.length||(u.indexOf("{fontstack}")===-1&&b.push(new on(d,u,'"glyphs" url must include a "{fontstack}" token')),u.indexOf("{range}")===-1&&b.push(new on(d,u,'"glyphs" url must include a "{range}" token'))),b}function Nl(f,u=mt){let d=[];return d=d.concat(ls({key:"",value:f,valueSpec:u.$root,styleSpec:u,style:f,validateSpec:ls,objectElementValidators:{glyphs:cc,"*":()=>[]}})),f.constants&&(d=d.concat(ac({key:"constants",value:f.constants}))),Yh(d)}function Au(f){return function(u){return f(Object.assign({},u,{validateSpec:ls}))}}function Yh(f){return[].concat(f).sort(((u,d)=>u.line-d.line))}function vl(f){return function(...u){return Yh(f.apply(this,u))}}Nl.source=vl(Au(qh)),Nl.sprite=vl(Au(Lf)),Nl.glyphs=vl(Au(cc)),Nl.light=vl(Au(ll)),Nl.sky=vl(Au(uc)),Nl.terrain=vl(Au(m0)),Nl.state=vl(Au(Ff)),Nl.layer=vl(Au(Qh)),Nl.filter=vl(Au(br)),Nl.paintProperty=vl(Au(uA)),Nl.layoutProperty=vl(Au(cA));const Ac=Nl,Ld=Ac.light,Ym=Ac.sky,pv=Ac.paintProperty,Gl=Ac.layoutProperty;function $h(f,u){let d=!1;if(u&&u.length)for(const b of u)f.fire(new Pt(new Error(b.message))),d=!0;return d}class Fd{constructor(u,d,b){const w=this.cells=[];if(u instanceof ArrayBuffer){this.arrayBuffer=u;const D=new Int32Array(this.arrayBuffer);u=D[0],this.d=(d=D[1])+2*(b=D[2]);for(let N=0;N<this.d*this.d;N++){const te=D[3+N],re=D[3+N+1];w.push(te===re?null:D.subarray(te,re))}const K=D[3+w.length+1];this.keys=D.subarray(D[3+w.length],K),this.bboxes=D.subarray(K),this.insert=this._insertReadonly}else{this.d=d+2*b;for(let D=0;D<this.d*this.d;D++)w.push([]);this.keys=[],this.bboxes=[]}this.n=d,this.extent=u,this.padding=b,this.scale=d/u,this.uid=0;const k=b/d*u;this.min=-k,this.max=u+k}insert(u,d,b,w,k){this._forEachCell(d,b,w,k,this._insertCell,this.uid++,void 0,void 0),this.keys.push(u),this.bboxes.push(d),this.bboxes.push(b),this.bboxes.push(w),this.bboxes.push(k)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(u,d,b,w,k,D){this.cells[k].push(D)}query(u,d,b,w,k){const D=this.min,K=this.max;if(u<=D&&d<=D&&K<=b&&K<=w&&!k)return Array.prototype.slice.call(this.keys);{const N=[];return this._forEachCell(u,d,b,w,this._queryCell,N,{},k),N}}_queryCell(u,d,b,w,k,D,K,N){const te=this.cells[k];if(te!==null){const re=this.keys,Ae=this.bboxes;for(let Oe=0;Oe<te.length;Oe++){const De=te[Oe];if(K[De]===void 0){const Ue=4*De;(N?N(Ae[Ue+0],Ae[Ue+1],Ae[Ue+2],Ae[Ue+3]):u<=Ae[Ue+2]&&d<=Ae[Ue+3]&&b>=Ae[Ue+0]&&w>=Ae[Ue+1])?(K[De]=!0,D.push(re[De])):K[De]=!1}}}}_forEachCell(u,d,b,w,k,D,K,N){const te=this._convertToCellCoord(u),re=this._convertToCellCoord(d),Ae=this._convertToCellCoord(b),Oe=this._convertToCellCoord(w);for(let De=te;De<=Ae;De++)for(let Ue=re;Ue<=Oe;Ue++){const Ge=this.d*Ue+De;if((!N||N(this._convertFromCellCoord(De),this._convertFromCellCoord(Ue),this._convertFromCellCoord(De+1),this._convertFromCellCoord(Ue+1)))&&k.call(this,u,d,b,w,Ge,D,K,N))return}}_convertFromCellCoord(u){return(u-this.padding)/this.scale}_convertToCellCoord(u){return Math.max(0,Math.min(this.d-1,Math.floor(u*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const u=this.cells,d=3+this.cells.length+1+1;let b=0;for(let D=0;D<this.cells.length;D++)b+=this.cells[D].length;const w=new Int32Array(d+b+this.keys.length+this.bboxes.length);w[0]=this.extent,w[1]=this.n,w[2]=this.padding;let k=d;for(let D=0;D<u.length;D++){const K=u[D];w[3+D]=k,w.set(K,k),k+=K.length}return w[3+u.length]=k,w.set(this.keys,k),k+=this.keys.length,w[3+u.length+1]=k,w.set(this.bboxes,k),k+=this.bboxes.length,w.buffer}static serialize(u,d){const b=u.toArrayBuffer();return d&&d.push(b),{buffer:b}}static deserialize(u){return new Fd(u.buffer)}}const Lc={};function Vn(f,u,d={}){if(Lc[f])throw new Error(`${f} is already registered.`);Object.defineProperty(u,"_classRegistryKey",{value:f,writeable:!1}),Lc[f]={klass:u,omit:d.omit||[],shallow:d.shallow||[]}}Vn("Object",Object),Vn("Set",Set),Vn("TransferableGridIndex",Fd),Vn("Color",ir),Vn("Error",Error),Vn("AJAXError",Ve),Vn("ResolvedImage",ea),Vn("StylePropertyFunction",Ts),Vn("StyleExpression",Kd,{omit:["_evaluator"]}),Vn("ZoomDependentExpression",ah),Vn("ZoomConstantExpression",Ll),Vn("CompoundExpression",kr,{omit:["_evaluate"]});for(const f in nh)nh[f]._classRegistryKey||Vn(`Expression_${f}`,nh[f]);function zd(f){return f&&typeof ArrayBuffer<"u"&&(f instanceof ArrayBuffer||f.constructor&&f.constructor.name==="ArrayBuffer")}function zf(f){return f.$name||f.constructor._classRegistryKey}function ch(f){return!(function(u){if(u===null||typeof u!="object")return!1;const d=zf(u);return!(!d||d==="Object")})(f)&&(f==null||typeof f=="boolean"||typeof f=="number"||typeof f=="string"||f instanceof Boolean||f instanceof Number||f instanceof String||f instanceof Date||f instanceof RegExp||f instanceof Blob||f instanceof Error||zd(f)||Pn(f)||ArrayBuffer.isView(f)||f instanceof ImageData)}function Vh(f,u){if(ch(f))return(zd(f)||Pn(f))&&u&&u.push(f),ArrayBuffer.isView(f)&&u&&u.push(f.buffer),f instanceof ImageData&&u&&u.push(f.data.buffer),f;if(Array.isArray(f)){const k=[];for(const D of f)k.push(Vh(D,u));return k}if(typeof f!="object")throw new Error("can't serialize object of type "+typeof f);const d=zf(f);if(!d)throw new Error(`can't serialize object of unregistered class ${f.constructor.name}`);if(!Lc[d])throw new Error(`${d} is not registered.`);const{klass:b}=Lc[d],w=b.serialize?b.serialize(f,u):{};if(b.serialize){if(u&&w===u[u.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const k in f){if(!f.hasOwnProperty(k)||Lc[d].omit.indexOf(k)>=0)continue;const D=f[k];w[k]=Lc[d].shallow.indexOf(k)>=0?D:Vh(D,u)}f instanceof Error&&(w.message=f.message)}if(w.$name)throw new Error("$name property is reserved for worker serialization logic.");return d!=="Object"&&(w.$name=d),w}function Hh(f){if(ch(f))return f;if(Array.isArray(f))return f.map(Hh);if(typeof f!="object")throw new Error("can't deserialize object of type "+typeof f);const u=zf(f)||"Object";if(!Lc[u])throw new Error(`can't deserialize unregistered class ${u}`);const{klass:d}=Lc[u];if(!d)throw new Error(`can't deserialize unregistered class ${u}`);if(d.deserialize)return d.deserialize(f);const b=Object.create(d.prototype);for(const w of Object.keys(f)){if(w==="$name")continue;const k=f[w];b[w]=Lc[u].shallow.indexOf(w)>=0?k:Hh(k)}return b}class Ah{constructor(){this.first=!0}update(u,d){const b=Math.floor(u);return this.first?(this.first=!1,this.lastIntegerZoom=b,this.lastIntegerZoomTime=0,this.lastZoom=u,this.lastFloorZoom=b,!0):(this.lastFloorZoom>b?(this.lastIntegerZoom=b+1,this.lastIntegerZoomTime=d):this.lastFloorZoom<b&&(this.lastIntegerZoom=b,this.lastIntegerZoomTime=d),u!==this.lastZoom&&(this.lastZoom=u,this.lastFloorZoom=b,!0))}}const or={"Latin-1 Supplement":f=>f>=128&&f<=255,"Hangul Jamo":f=>f>=4352&&f<=4607,Khmer:f=>f>=6016&&f<=6143,"General Punctuation":f=>f>=8192&&f<=8303,"Letterlike Symbols":f=>f>=8448&&f<=8527,"Number Forms":f=>f>=8528&&f<=8591,"Miscellaneous Technical":f=>f>=8960&&f<=9215,"Control Pictures":f=>f>=9216&&f<=9279,"Optical Character Recognition":f=>f>=9280&&f<=9311,"Enclosed Alphanumerics":f=>f>=9312&&f<=9471,"Geometric Shapes":f=>f>=9632&&f<=9727,"Miscellaneous Symbols":f=>f>=9728&&f<=9983,"Miscellaneous Symbols and Arrows":f=>f>=11008&&f<=11263,"Ideographic Description Characters":f=>f>=12272&&f<=12287,"CJK Symbols and Punctuation":f=>f>=12288&&f<=12351,Hiragana:f=>f>=12352&&f<=12447,Katakana:f=>f>=12448&&f<=12543,Kanbun:f=>f>=12688&&f<=12703,"CJK Strokes":f=>f>=12736&&f<=12783,"Enclosed CJK Letters and Months":f=>f>=12800&&f<=13055,"CJK Compatibility":f=>f>=13056&&f<=13311,"Yijing Hexagram Symbols":f=>f>=19904&&f<=19967,"CJK Unified Ideographs":f=>f>=19968&&f<=40959,"Hangul Syllables":f=>f>=44032&&f<=55215,"Private Use Area":f=>f>=57344&&f<=63743,"Vertical Forms":f=>f>=65040&&f<=65055,"CJK Compatibility Forms":f=>f>=65072&&f<=65103,"Small Form Variants":f=>f>=65104&&f<=65135,"Halfwidth and Fullwidth Forms":f=>f>=65280&&f<=65519};function hc(f){for(const u of f)if(Du(u.charCodeAt(0)))return!0;return!1}function g0(f){for(const u of f)if(!Ru(u.charCodeAt(0)))return!1;return!0}function jf(f){const u=f.map((d=>{try{return new RegExp(`\\p{sc=${d}}`,"u").source}catch{return null}})).filter((d=>d));return new RegExp(u.join("|"),"u")}const Zh=jf(["Arab","Dupl","Mong","Ougr","Syrc"]);function Ru(f){return!Zh.test(String.fromCodePoint(f))}const jd=jf(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function Du(f){return!(f!==746&&f!==747&&(f<4352||!(or["CJK Compatibility Forms"](f)&&!(f>=65097&&f<=65103)||or["CJK Compatibility"](f)||or["CJK Strokes"](f)||!(!or["CJK Symbols and Punctuation"](f)||f>=12296&&f<=12305||f>=12308&&f<=12319||f===12336)||or["Enclosed CJK Letters and Months"](f)||or["Ideographic Description Characters"](f)||or.Kanbun(f)||or.Katakana(f)&&f!==12540||!(!or["Halfwidth and Fullwidth Forms"](f)||f===65288||f===65289||f===65293||f>=65306&&f<=65310||f===65339||f===65341||f===65343||f>=65371&&f<=65503||f===65507||f>=65512&&f<=65519)||!(!or["Small Form Variants"](f)||f>=65112&&f<=65118||f>=65123&&f<=65126)||or["Vertical Forms"](f)||or["Yijing Hexagram Symbols"](f)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(f))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(f))||jd.test(String.fromCodePoint(f)))))}function Wl(f){return!(Du(f)||(function(u){return!!(or["Latin-1 Supplement"](u)&&(u===167||u===169||u===174||u===177||u===188||u===189||u===190||u===215||u===247)||or["General Punctuation"](u)&&(u===8214||u===8224||u===8225||u===8240||u===8241||u===8251||u===8252||u===8258||u===8263||u===8264||u===8265||u===8273)||or["Letterlike Symbols"](u)||or["Number Forms"](u)||or["Miscellaneous Technical"](u)&&(u>=8960&&u<=8967||u>=8972&&u<=8991||u>=8996&&u<=9e3||u===9003||u>=9085&&u<=9114||u>=9150&&u<=9165||u===9167||u>=9169&&u<=9179||u>=9186&&u<=9215)||or["Control Pictures"](u)&&u!==9251||or["Optical Character Recognition"](u)||or["Enclosed Alphanumerics"](u)||or["Geometric Shapes"](u)||or["Miscellaneous Symbols"](u)&&!(u>=9754&&u<=9759)||or["Miscellaneous Symbols and Arrows"](u)&&(u>=11026&&u<=11055||u>=11088&&u<=11097||u>=11192&&u<=11243)||or["CJK Symbols and Punctuation"](u)||or.Katakana(u)||or["Private Use Area"](u)||or["CJK Compatibility Forms"](u)||or["Small Form Variants"](u)||or["Halfwidth and Fullwidth Forms"](u)||u===8734||u===8756||u===8757||u>=9984&&u<=10087||u>=10102&&u<=10131||u===65532||u===65533)})(f))}const y0=jf(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function hh(f){return y0.test(String.fromCodePoint(f))}function $m(f,u){return!(!u&&hh(f)||f>=2304&&f<=3583||f>=3840&&f<=4255||or.Khmer(f))}function dc(f){for(const u of f)if(hh(u.charCodeAt(0)))return!0;return!1}const bl=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(f){this.pluginStatus=f.pluginStatus,this.pluginURL=f.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(f){if(bl.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=f.applyArabicShaping,this.processBidirectionalText=f.processBidirectionalText,this.processStyledBidirectionalText=f.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(f,u){return a(this,void 0,void 0,(function*(){if(this.isParsed())return this.getState();if(f.pluginStatus!=="loading")return this.setState(f),f;const d=f.pluginURL,b=new Promise((k=>{this.loadScriptResolve=k}));u(d);const w=new Promise((k=>setTimeout((()=>k()),this.TIMEOUT)));if(yield Promise.race([b,w]),this.isParsed()){const k={pluginStatus:"loaded",pluginURL:d};return this.setState(k),k}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${d}`)}))}};class To{constructor(u,d){this.isSupportedScript=dh,this.zoom=u,d?(this.now=d.now||0,this.fadeDuration=d.fadeDuration||0,this.zoomHistory=d.zoomHistory||new Ah,this.transition=d.transition||{}):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Ah,this.transition={})}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const u=this.zoom,d=u-Math.floor(u),b=this.crossFadingFactor();return u>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:d+(1-d)*b}:{fromScale:.5,toScale:1,t:1-(1-b)*d}}}function dh(f){return(function(u,d){for(const b of u)if(!$m(b.charCodeAt(0),d))return!1;return!0})(f,bl.getRTLTextPluginStatus()==="loaded")}class hu{constructor(u,d,b){this.property=u,this.value=d,this.expression=(function(w,k,D){if(Up(w))return new Ts(w,k);if(Nh(w)){const K=Gh(w,k,D);if(K.result==="error")throw new Error(K.value.map((N=>`${N.key}: ${N.message}`)).join(", "));return K.value}{let K=w;return k.type==="color"&&typeof w=="string"?K=ir.parse(w):k.type!=="padding"||typeof w!="number"&&!Array.isArray(w)?k.type!=="numberArray"||typeof w!="number"&&!Array.isArray(w)?k.type!=="colorArray"||typeof w!="string"&&!Array.isArray(w)?k.type==="variableAnchorOffsetCollection"&&Array.isArray(w)?K=So.parse(w):k.type==="projectionDefinition"&&typeof w=="string"&&(K=oo.parse(w)):K=Fo.parse(w):K=as.parse(w):K=fo.parse(w),{globalStateRefs:new Set,_globalState:null,kind:"constant",evaluate:()=>K}}})(d===void 0?u.specification.default:d,u.specification,b)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}getGlobalStateRefs(){return this.expression.globalStateRefs||new Set}possiblyEvaluate(u,d,b){return this.property.possiblyEvaluate(this,u,d,b)}}class Xh{constructor(u,d){this.property=u,this.value=new hu(u,void 0,d)}transitioned(u,d){return new ia(this.property,this.value,d,Ke({},u.transition,this.transition),u.now)}untransitioned(){return new ia(this.property,this.value,null,{},0)}}class Nf{constructor(u,d){this._properties=u,this._values=Object.create(u.defaultTransitionablePropertyValues),this._globalState=d}getValue(u){return at(this._values[u].value.value)}setValue(u,d){Object.prototype.hasOwnProperty.call(this._values,u)||(this._values[u]=new Xh(this._values[u].property,this._globalState)),this._values[u].value=new hu(this._values[u].property,d===null?void 0:at(d),this._globalState)}getTransition(u){return at(this._values[u].transition)}setTransition(u,d){Object.prototype.hasOwnProperty.call(this._values,u)||(this._values[u]=new Xh(this._values[u].property,this._globalState)),this._values[u].transition=at(d)||void 0}serialize(){const u={};for(const d of Object.keys(this._values)){const b=this.getValue(d);b!==void 0&&(u[d]=b);const w=this.getTransition(d);w!==void 0&&(u[`${d}-transition`]=w)}return u}transitioned(u,d){const b=new Jh(this._properties);for(const w of Object.keys(this._values))b._values[w]=this._values[w].transitioned(u,d._values[w]);return b}untransitioned(){const u=new Jh(this._properties);for(const d of Object.keys(this._values))u._values[d]=this._values[d].untransitioned();return u}}class ia{constructor(u,d,b,w,k){this.property=u,this.value=d,this.begin=k+w.delay||0,this.end=this.begin+w.duration||0,u.specification.transition&&(w.delay||w.duration)&&(this.prior=b)}possiblyEvaluate(u,d,b){const w=u.now||0,k=this.value.possiblyEvaluate(u,d,b),D=this.prior;if(D){if(w>this.end)return this.prior=null,k;if(this.value.isDataDriven())return this.prior=null,k;if(w<this.begin)return D.possiblyEvaluate(u,d,b);{const K=(w-this.begin)/(this.end-this.begin);return this.property.interpolate(D.possiblyEvaluate(u,d,b),k,Me(K))}}return k}}class Jh{constructor(u){this._properties=u,this._values=Object.create(u.defaultTransitioningPropertyValues)}possiblyEvaluate(u,d,b){const w=new Nd(this._properties);for(const k of Object.keys(this._values))w._values[k]=this._values[k].possiblyEvaluate(u,d,b);return w}hasTransition(){for(const u of Object.keys(this._values))if(this._values[u].prior)return!0;return!1}}class ed{constructor(u,d){this._properties=u,this._values=Object.create(u.defaultPropertyValues),this._globalState=d}hasValue(u){return this._values[u].value!==void 0}getValue(u){return at(this._values[u].value)}setValue(u,d){this._values[u]=new hu(this._values[u].property,d===null?void 0:at(d),this._globalState)}serialize(){const u={};for(const d of Object.keys(this._values)){const b=this.getValue(d);b!==void 0&&(u[d]=b)}return u}possiblyEvaluate(u,d,b){const w=new Nd(this._properties);for(const k of Object.keys(this._values))w._values[k]=this._values[k].possiblyEvaluate(u,d,b);return w}}class La{constructor(u,d,b){this.property=u,this.value=d,this.parameters=b}isConstant(){return this.value.kind==="constant"}constantOr(u){return this.value.kind==="constant"?this.value.value:u}evaluate(u,d,b,w){return this.property.evaluate(this.value,this.parameters,u,d,b,w)}}class Nd{constructor(u){this._properties=u,this._values=Object.create(u.defaultPossiblyEvaluatedValues)}get(u){return this._values[u]}}class ti{constructor(u){this.specification=u}possiblyEvaluate(u,d){if(u.isDataDriven())throw new Error("Value should not be data driven");return u.expression.evaluate(d)}interpolate(u,d,b){const w=Ya[this.specification.type];return w?w(u,d,b):u}}class Ci{constructor(u,d){this.specification=u,this.overrides=d}possiblyEvaluate(u,d,b,w){return new La(this,u.expression.kind==="constant"||u.expression.kind==="camera"?{kind:"constant",value:u.expression.evaluate(d,null,{},b,w)}:u.expression,d)}interpolate(u,d,b){if(u.value.kind!=="constant"||d.value.kind!=="constant")return u;if(u.value.value===void 0||d.value.value===void 0)return new La(this,{kind:"constant",value:void 0},u.parameters);const w=Ya[this.specification.type];if(w){const k=w(u.value.value,d.value.value,b);return new La(this,{kind:"constant",value:k},u.parameters)}return u}evaluate(u,d,b,w,k,D){return u.kind==="constant"?u.value:u.evaluate(d,b,w,k,D)}}class td extends Ci{possiblyEvaluate(u,d,b,w){if(u.value===void 0)return new La(this,{kind:"constant",value:void 0},d);if(u.expression.kind==="constant"){const k=u.expression.evaluate(d,null,{},b,w),D=u.property.specification.type==="resolvedImage"&&typeof k!="string"?k.name:k,K=this._calculate(D,D,D,d);return new La(this,{kind:"constant",value:K},d)}if(u.expression.kind==="camera"){const k=this._calculate(u.expression.evaluate({zoom:d.zoom-1}),u.expression.evaluate({zoom:d.zoom}),u.expression.evaluate({zoom:d.zoom+1}),d);return new La(this,{kind:"constant",value:k},d)}return new La(this,u.expression,d)}evaluate(u,d,b,w,k,D){if(u.kind==="source"){const K=u.evaluate(d,b,w,k,D);return this._calculate(K,K,K,d)}return u.kind==="composite"?this._calculate(u.evaluate({zoom:Math.floor(d.zoom)-1},b,w),u.evaluate({zoom:Math.floor(d.zoom)},b,w),u.evaluate({zoom:Math.floor(d.zoom)+1},b,w),d):u.value}_calculate(u,d,b,w){return w.zoom>w.zoomHistory.lastIntegerZoom?{from:u,to:d}:{from:b,to:d}}interpolate(u){return u}}class ul{constructor(u){this.specification=u}possiblyEvaluate(u,d,b,w){if(u.value!==void 0){if(u.expression.kind==="constant"){const k=u.expression.evaluate(d,null,{},b,w);return this._calculate(k,k,k,d)}return this._calculate(u.expression.evaluate(new To(Math.floor(d.zoom-1),d)),u.expression.evaluate(new To(Math.floor(d.zoom),d)),u.expression.evaluate(new To(Math.floor(d.zoom+1),d)),d)}}_calculate(u,d,b,w){return w.zoom>w.zoomHistory.lastIntegerZoom?{from:u,to:d}:{from:b,to:d}}interpolate(u){return u}}class nd{constructor(u){this.specification=u}possiblyEvaluate(u,d,b,w){return!!u.expression.evaluate(d,null,{},b,w)}interpolate(){return!1}}class us{constructor(u){this.properties=u,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const d in u){const b=u[d];b.specification.overridable&&this.overridableProperties.push(d);const w=this.defaultPropertyValues[d]=new hu(b,void 0,void 0),k=this.defaultTransitionablePropertyValues[d]=new Xh(b,void 0);this.defaultTransitioningPropertyValues[d]=k.untransitioned(),this.defaultPossiblyEvaluatedValues[d]=w.possiblyEvaluate({})}}}Vn("DataDrivenProperty",Ci),Vn("DataConstantProperty",ti),Vn("CrossFadedDataDrivenProperty",td),Vn("CrossFadedProperty",ul),Vn("ColorRampProperty",nd);const fc="-transition";class cl extends en{constructor(u,d,b){if(super(),this.id=u.id,this.type=u.type,this._globalState=b,this._featureFilter={filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set},u.type!=="custom"&&(this.metadata=u.metadata,this.minzoom=u.minzoom,this.maxzoom=u.maxzoom,u.type!=="background"&&(this.source=u.source,this.sourceLayer=u["source-layer"],this.filter=u.filter,this._featureFilter=zl(u.filter,b)),d.layout&&(this._unevaluatedLayout=new ed(d.layout,b)),d.paint)){this._transitionablePaint=new Nf(d.paint,b);for(const w in u.paint)this.setPaintProperty(w,u.paint[w],{validate:!1});for(const w in u.layout)this.setLayoutProperty(w,u.layout[w],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Nd(d.paint)}}setFilter(u){this.filter=u,this._featureFilter=zl(u,this._globalState)}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(u){return u==="visibility"?this.visibility:this._unevaluatedLayout.getValue(u)}getLayoutAffectingGlobalStateRefs(){const u=new Set;if(this._unevaluatedLayout)for(const d in this._unevaluatedLayout._values){const b=this._unevaluatedLayout._values[d];for(const w of b.getGlobalStateRefs())u.add(w)}for(const d of this._featureFilter.getGlobalStateRefs())u.add(d);return u}getPaintAffectingGlobalStateRefs(){var u;const d=new globalThis.Map;if(this._transitionablePaint)for(const b in this._transitionablePaint._values){const w=this._transitionablePaint._values[b].value;for(const k of w.getGlobalStateRefs()){const D=(u=d.get(k))!==null&&u!==void 0?u:[];D.push({name:b,value:w.value}),d.set(k,D)}}return d}setLayoutProperty(u,d,b={}){d!=null&&this._validate(Gl,`layers.${this.id}.layout.${u}`,u,d,b)||(u!=="visibility"?this._unevaluatedLayout.setValue(u,d):this.visibility=d)}getPaintProperty(u){return u.endsWith(fc)?this._transitionablePaint.getTransition(u.slice(0,-11)):this._transitionablePaint.getValue(u)}setPaintProperty(u,d,b={}){if(d!=null&&this._validate(pv,`layers.${this.id}.paint.${u}`,u,d,b))return!1;if(u.endsWith(fc))return this._transitionablePaint.setTransition(u.slice(0,-11),d||void 0),!1;{const w=this._transitionablePaint._values[u],k=w.property.specification["property-type"]==="cross-faded-data-driven",D=w.value.isDataDriven(),K=w.value;this._transitionablePaint.setValue(u,d),this._handleSpecialPaintPropertyUpdate(u);const N=this._transitionablePaint._values[u].value;return N.isDataDriven()||D||k||this._handleOverridablePaintPropertyUpdate(u,K,N)}}_handleSpecialPaintPropertyUpdate(u){}_handleOverridablePaintPropertyUpdate(u,d,b){return!1}isHidden(u){return!!(this.minzoom&&u<this.minzoom)||!!(this.maxzoom&&u>=this.maxzoom)||this.visibility==="none"}updateTransitions(u){this._transitioningPaint=this._transitionablePaint.transitioned(u,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(u,d){u.getCrossfadeParameters&&(this._crossfadeParameters=u.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(u,void 0,d)),this.paint=this._transitioningPaint.possiblyEvaluate(u,void 0,d)}serialize(){const u={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(u.layout=u.layout||{},u.layout.visibility=this.visibility),We(u,((d,b)=>!(d===void 0||b==="layout"&&!Object.keys(d).length||b==="paint"&&!Object.keys(d).length)))}_validate(u,d,b,w,k={}){return(!k||k.validate!==!1)&&$h(this,u.call(Ac,{key:d,layerType:this.type,objectKey:b,value:w,styleSpec:mt,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const u in this.paint._values){const d=this.paint.get(u);if(d instanceof La&&cu(d.property.specification)&&(d.value.kind==="source"||d.value.kind==="composite")&&d.value.isStateDependent)return!0}return!1}}let AA;var E1={get paint(){return AA=AA||new us({"raster-opacity":new ti(mt.paint_raster["raster-opacity"]),"raster-hue-rotate":new ti(mt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new ti(mt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new ti(mt.paint_raster["raster-brightness-max"]),"raster-saturation":new ti(mt.paint_raster["raster-saturation"]),"raster-contrast":new ti(mt.paint_raster["raster-contrast"]),"raster-resampling":new ti(mt.paint_raster["raster-resampling"]),"raster-fade-duration":new ti(mt.paint_raster["raster-fade-duration"])})}};class Fc extends cl{constructor(u,d){super(u,E1,d)}}const Pu={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class bs{constructor(u,d){this._structArray=u,this._pos1=d*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class cs{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(u,d){return u._trim(),d&&(u.isTransferred=!0,d.push(u.arrayBuffer)),{length:u.length,arrayBuffer:u.arrayBuffer}}static deserialize(u){const d=Object.create(this.prototype);return d.arrayBuffer=u.arrayBuffer,d.length=u.length,d.capacity=u.arrayBuffer.byteLength/d.bytesPerElement,d._refreshViews(),d}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(u){this.reserve(u),this.length=u}reserve(u){if(u>this.capacity){this.capacity=Math.max(u,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const d=this.uint8;this._refreshViews(),d&&this.uint8.set(d)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function po(f,u=1){let d=0,b=0;return{members:f.map((w=>{const k=Pu[w.type].BYTES_PER_ELEMENT,D=d=sr(d,Math.max(u,k)),K=w.components||1;return b=Math.max(b,k),d+=k*K,{name:w.name,type:w.type,components:K,offset:D}})),size:sr(d,Math.max(b,u)),alignment:u}}function sr(f,u){return Math.ceil(f/u)*u}class xo extends cs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,d){const b=this.length;return this.resize(b+1),this.emplace(b,u,d)}emplace(u,d,b){const w=2*u;return this.int16[w+0]=d,this.int16[w+1]=b,u}}xo.prototype.bytesPerElement=4,Vn("StructArrayLayout2i4",xo);class As extends cs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,d,b){const w=this.length;return this.resize(w+1),this.emplace(w,u,d,b)}emplace(u,d,b,w){const k=3*u;return this.int16[k+0]=d,this.int16[k+1]=b,this.int16[k+2]=w,u}}As.prototype.bytesPerElement=6,Vn("StructArrayLayout3i6",As);class id extends cs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,d,b,w){const k=this.length;return this.resize(k+1),this.emplace(k,u,d,b,w)}emplace(u,d,b,w,k){const D=4*u;return this.int16[D+0]=d,this.int16[D+1]=b,this.int16[D+2]=w,this.int16[D+3]=k,u}}id.prototype.bytesPerElement=8,Vn("StructArrayLayout4i8",id);class IA extends cs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,d,b,w,k,D){const K=this.length;return this.resize(K+1),this.emplace(K,u,d,b,w,k,D)}emplace(u,d,b,w,k,D,K){const N=6*u;return this.int16[N+0]=d,this.int16[N+1]=b,this.int16[N+2]=w,this.int16[N+3]=k,this.int16[N+4]=D,this.int16[N+5]=K,u}}IA.prototype.bytesPerElement=12,Vn("StructArrayLayout2i4i12",IA);class fh extends cs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,d,b,w,k,D){const K=this.length;return this.resize(K+1),this.emplace(K,u,d,b,w,k,D)}emplace(u,d,b,w,k,D,K){const N=4*u,te=8*u;return this.int16[N+0]=d,this.int16[N+1]=b,this.uint8[te+4]=w,this.uint8[te+5]=k,this.uint8[te+6]=D,this.uint8[te+7]=K,u}}fh.prototype.bytesPerElement=8,Vn("StructArrayLayout2i4ub8",fh);class hA extends cs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,d){const b=this.length;return this.resize(b+1),this.emplace(b,u,d)}emplace(u,d,b){const w=2*u;return this.float32[w+0]=d,this.float32[w+1]=b,u}}hA.prototype.bytesPerElement=8,Vn("StructArrayLayout2f8",hA);class zc extends cs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,d,b,w,k,D,K,N,te,re){const Ae=this.length;return this.resize(Ae+1),this.emplace(Ae,u,d,b,w,k,D,K,N,te,re)}emplace(u,d,b,w,k,D,K,N,te,re,Ae){const Oe=10*u;return this.uint16[Oe+0]=d,this.uint16[Oe+1]=b,this.uint16[Oe+2]=w,this.uint16[Oe+3]=k,this.uint16[Oe+4]=D,this.uint16[Oe+5]=K,this.uint16[Oe+6]=N,this.uint16[Oe+7]=te,this.uint16[Oe+8]=re,this.uint16[Oe+9]=Ae,u}}zc.prototype.bytesPerElement=20,Vn("StructArrayLayout10ui20",zc);class kA extends cs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,d,b,w,k,D,K,N){const te=this.length;return this.resize(te+1),this.emplace(te,u,d,b,w,k,D,K,N)}emplace(u,d,b,w,k,D,K,N,te){const re=8*u;return this.uint16[re+0]=d,this.uint16[re+1]=b,this.uint16[re+2]=w,this.uint16[re+3]=k,this.uint16[re+4]=D,this.uint16[re+5]=K,this.uint16[re+6]=N,this.uint16[re+7]=te,u}}kA.prototype.bytesPerElement=16,Vn("StructArrayLayout8ui16",kA);class Vm extends cs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,d,b,w,k,D,K,N,te,re,Ae,Oe){const De=this.length;return this.resize(De+1),this.emplace(De,u,d,b,w,k,D,K,N,te,re,Ae,Oe)}emplace(u,d,b,w,k,D,K,N,te,re,Ae,Oe,De){const Ue=12*u;return this.int16[Ue+0]=d,this.int16[Ue+1]=b,this.int16[Ue+2]=w,this.int16[Ue+3]=k,this.uint16[Ue+4]=D,this.uint16[Ue+5]=K,this.uint16[Ue+6]=N,this.uint16[Ue+7]=te,this.int16[Ue+8]=re,this.int16[Ue+9]=Ae,this.int16[Ue+10]=Oe,this.int16[Ue+11]=De,u}}Vm.prototype.bytesPerElement=24,Vn("StructArrayLayout4i4ui4i24",Vm);class zo extends cs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,d,b){const w=this.length;return this.resize(w+1),this.emplace(w,u,d,b)}emplace(u,d,b,w){const k=3*u;return this.float32[k+0]=d,this.float32[k+1]=b,this.float32[k+2]=w,u}}zo.prototype.bytesPerElement=12,Vn("StructArrayLayout3f12",zo);class Gf extends cs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(u){const d=this.length;return this.resize(d+1),this.emplace(d,u)}emplace(u,d){return this.uint32[1*u+0]=d,u}}Gf.prototype.bytesPerElement=4,Vn("StructArrayLayout1ul4",Gf);class Wf extends cs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,d,b,w,k,D,K,N,te){const re=this.length;return this.resize(re+1),this.emplace(re,u,d,b,w,k,D,K,N,te)}emplace(u,d,b,w,k,D,K,N,te,re){const Ae=10*u,Oe=5*u;return this.int16[Ae+0]=d,this.int16[Ae+1]=b,this.int16[Ae+2]=w,this.int16[Ae+3]=k,this.int16[Ae+4]=D,this.int16[Ae+5]=K,this.uint32[Oe+3]=N,this.uint16[Ae+8]=te,this.uint16[Ae+9]=re,u}}Wf.prototype.bytesPerElement=20,Vn("StructArrayLayout6i1ul2ui20",Wf);class Qf extends cs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,d,b,w,k,D){const K=this.length;return this.resize(K+1),this.emplace(K,u,d,b,w,k,D)}emplace(u,d,b,w,k,D,K){const N=6*u;return this.int16[N+0]=d,this.int16[N+1]=b,this.int16[N+2]=w,this.int16[N+3]=k,this.int16[N+4]=D,this.int16[N+5]=K,u}}Qf.prototype.bytesPerElement=12,Vn("StructArrayLayout2i2i2i12",Qf);class Gd extends cs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,d,b,w,k){const D=this.length;return this.resize(D+1),this.emplace(D,u,d,b,w,k)}emplace(u,d,b,w,k,D){const K=4*u,N=8*u;return this.float32[K+0]=d,this.float32[K+1]=b,this.float32[K+2]=w,this.int16[N+6]=k,this.int16[N+7]=D,u}}Gd.prototype.bytesPerElement=16,Vn("StructArrayLayout2f1f2i16",Gd);class O extends cs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,d,b,w,k,D){const K=this.length;return this.resize(K+1),this.emplace(K,u,d,b,w,k,D)}emplace(u,d,b,w,k,D,K){const N=16*u,te=4*u,re=8*u;return this.uint8[N+0]=d,this.uint8[N+1]=b,this.float32[te+1]=w,this.float32[te+2]=k,this.int16[re+6]=D,this.int16[re+7]=K,u}}O.prototype.bytesPerElement=16,Vn("StructArrayLayout2ub2f2i16",O);class l extends cs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,d,b){const w=this.length;return this.resize(w+1),this.emplace(w,u,d,b)}emplace(u,d,b,w){const k=3*u;return this.uint16[k+0]=d,this.uint16[k+1]=b,this.uint16[k+2]=w,u}}l.prototype.bytesPerElement=6,Vn("StructArrayLayout3ui6",l);class p extends cs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,d,b,w,k,D,K,N,te,re,Ae,Oe,De,Ue,Ge,He,st){const Tt=this.length;return this.resize(Tt+1),this.emplace(Tt,u,d,b,w,k,D,K,N,te,re,Ae,Oe,De,Ue,Ge,He,st)}emplace(u,d,b,w,k,D,K,N,te,re,Ae,Oe,De,Ue,Ge,He,st,Tt){const dt=24*u,Ct=12*u,jt=48*u;return this.int16[dt+0]=d,this.int16[dt+1]=b,this.uint16[dt+2]=w,this.uint16[dt+3]=k,this.uint32[Ct+2]=D,this.uint32[Ct+3]=K,this.uint32[Ct+4]=N,this.uint16[dt+10]=te,this.uint16[dt+11]=re,this.uint16[dt+12]=Ae,this.float32[Ct+7]=Oe,this.float32[Ct+8]=De,this.uint8[jt+36]=Ue,this.uint8[jt+37]=Ge,this.uint8[jt+38]=He,this.uint32[Ct+10]=st,this.int16[dt+22]=Tt,u}}p.prototype.bytesPerElement=48,Vn("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",p);class C extends cs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,d,b,w,k,D,K,N,te,re,Ae,Oe,De,Ue,Ge,He,st,Tt,dt,Ct,jt,Zt,fn,Wn,Kn,Nn,xi,zn){const Gn=this.length;return this.resize(Gn+1),this.emplace(Gn,u,d,b,w,k,D,K,N,te,re,Ae,Oe,De,Ue,Ge,He,st,Tt,dt,Ct,jt,Zt,fn,Wn,Kn,Nn,xi,zn)}emplace(u,d,b,w,k,D,K,N,te,re,Ae,Oe,De,Ue,Ge,He,st,Tt,dt,Ct,jt,Zt,fn,Wn,Kn,Nn,xi,zn,Gn){const an=32*u,ji=16*u;return this.int16[an+0]=d,this.int16[an+1]=b,this.int16[an+2]=w,this.int16[an+3]=k,this.int16[an+4]=D,this.int16[an+5]=K,this.int16[an+6]=N,this.int16[an+7]=te,this.uint16[an+8]=re,this.uint16[an+9]=Ae,this.uint16[an+10]=Oe,this.uint16[an+11]=De,this.uint16[an+12]=Ue,this.uint16[an+13]=Ge,this.uint16[an+14]=He,this.uint16[an+15]=st,this.uint16[an+16]=Tt,this.uint16[an+17]=dt,this.uint16[an+18]=Ct,this.uint16[an+19]=jt,this.uint16[an+20]=Zt,this.uint16[an+21]=fn,this.uint16[an+22]=Wn,this.uint32[ji+12]=Kn,this.float32[ji+13]=Nn,this.float32[ji+14]=xi,this.uint16[an+30]=zn,this.uint16[an+31]=Gn,u}}C.prototype.bytesPerElement=64,Vn("StructArrayLayout8i15ui1ul2f2ui64",C);class E extends cs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u){const d=this.length;return this.resize(d+1),this.emplace(d,u)}emplace(u,d){return this.float32[1*u+0]=d,u}}E.prototype.bytesPerElement=4,Vn("StructArrayLayout1f4",E);class B extends cs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,d,b){const w=this.length;return this.resize(w+1),this.emplace(w,u,d,b)}emplace(u,d,b,w){const k=3*u;return this.uint16[6*u+0]=d,this.float32[k+1]=b,this.float32[k+2]=w,u}}B.prototype.bytesPerElement=12,Vn("StructArrayLayout1ui2f12",B);class U extends cs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,d,b){const w=this.length;return this.resize(w+1),this.emplace(w,u,d,b)}emplace(u,d,b,w){const k=4*u;return this.uint32[2*u+0]=d,this.uint16[k+2]=b,this.uint16[k+3]=w,u}}U.prototype.bytesPerElement=8,Vn("StructArrayLayout1ul2ui8",U);class G extends cs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,d){const b=this.length;return this.resize(b+1),this.emplace(b,u,d)}emplace(u,d,b){const w=2*u;return this.uint16[w+0]=d,this.uint16[w+1]=b,u}}G.prototype.bytesPerElement=4,Vn("StructArrayLayout2ui4",G);class Z extends cs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u){const d=this.length;return this.resize(d+1),this.emplace(d,u)}emplace(u,d){return this.uint16[1*u+0]=d,u}}Z.prototype.bytesPerElement=2,Vn("StructArrayLayout1ui2",Z);class ae extends cs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,d,b,w){const k=this.length;return this.resize(k+1),this.emplace(k,u,d,b,w)}emplace(u,d,b,w,k){const D=4*u;return this.float32[D+0]=d,this.float32[D+1]=b,this.float32[D+2]=w,this.float32[D+3]=k,u}}ae.prototype.bytesPerElement=16,Vn("StructArrayLayout4f16",ae);class ce extends bs{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new c(this.anchorPointX,this.anchorPointY)}}ce.prototype.size=20;class me extends Wf{get(u){return new ce(this,u)}}Vn("CollisionBoxArray",me);class ge extends bs{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(u){this._structArray.uint8[this._pos1+37]=u}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(u){this._structArray.uint8[this._pos1+38]=u}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(u){this._structArray.uint32[this._pos4+10]=u}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}ge.prototype.size=48;class Pe extends p{get(u){return new ge(this,u)}}Vn("PlacedSymbolArray",Pe);class Ne extends bs{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(u){this._structArray.uint32[this._pos4+12]=u}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}Ne.prototype.size=64;class Ze extends C{get(u){return new Ne(this,u)}}Vn("SymbolInstanceArray",Ze);class Xe extends E{getoffsetX(u){return this.float32[1*u+0]}}Vn("GlyphOffsetArray",Xe);class et extends As{getx(u){return this.int16[3*u+0]}gety(u){return this.int16[3*u+1]}gettileUnitDistanceFromAnchor(u){return this.int16[3*u+2]}}Vn("SymbolLineVertexArray",et);class ot extends bs{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}ot.prototype.size=12;class ht extends B{get(u){return new ot(this,u)}}Vn("TextAnchorOffsetArray",ht);class ut extends bs{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}ut.prototype.size=8;class gt extends U{get(u){return new ut(this,u)}}Vn("FeatureIndexArray",gt);class xt extends xo{}class ct extends xo{}class wt extends xo{}class Wt extends IA{}class Lt extends fh{}class Nt extends hA{}class Gt extends zc{}class Bn extends kA{}class kn extends Vm{}class cn extends zo{}class si extends Gf{}class Xi extends Qf{}class Er extends O{}class Eo extends l{}class Wr extends G{}const es=po([{name:"a_pos",components:2,type:"Int16"}],4),{members:Qo}=es;class Br{constructor(u=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=u}prepareSegment(u,d,b,w){const k=this.segments[this.segments.length-1];return u>Br.MAX_VERTEX_ARRAY_LENGTH&&ft(`Max vertices per segment is ${Br.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${u}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${Br.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!k||k.vertexLength+u>Br.MAX_VERTEX_ARRAY_LENGTH||k.sortKey!==w?this.createNewSegment(d,b,w):k}createNewSegment(u,d,b){const w={vertexOffset:u.length,primitiveOffset:d.length,vertexLength:0,primitiveLength:0,vaos:{}};return b!==void 0&&(w.sortKey=b),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(w),w}getOrCreateLatestSegment(u,d,b){return this.prepareSegment(0,u,d,b)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const u of this.segments)for(const d in u.vaos)u.vaos[d].destroy()}static simpleSegment(u,d,b,w){return new Br([{vertexOffset:u,primitiveOffset:d,vertexLength:b,primitiveLength:w,vaos:{},sortKey:0}])}}function Rs(f,u){return 256*(f=bt(Math.floor(f),0,255))+bt(Math.floor(u),0,255)}Br.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Vn("SegmentVector",Br);const Al=po([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),la=po([{name:"a_dasharray_from",components:4,type:"Uint16"},{name:"a_dasharray_to",components:4,type:"Uint16"}]);var ra,Cl,ph,Uu={exports:{}},TA={exports:{}},va={exports:{}},du=(function(){if(ph)return Uu.exports;ph=1;var f=(ra||(ra=1,TA.exports=function(d,b){var w,k,D,K,N,te,re,Ae;for(k=d.length-(w=3&d.length),D=b,N=3432918353,te=461845907,Ae=0;Ae<k;)re=255&d.charCodeAt(Ae)|(255&d.charCodeAt(++Ae))<<8|(255&d.charCodeAt(++Ae))<<16|(255&d.charCodeAt(++Ae))<<24,++Ae,D=27492+(65535&(K=5*(65535&(D=(D^=re=(65535&(re=(re=(65535&re)*N+(((re>>>16)*N&65535)<<16)&4294967295)<<15|re>>>17))*te+(((re>>>16)*te&65535)<<16)&4294967295)<<13|D>>>19))+((5*(D>>>16)&65535)<<16)&4294967295))+((58964+(K>>>16)&65535)<<16);switch(re=0,w){case 3:re^=(255&d.charCodeAt(Ae+2))<<16;case 2:re^=(255&d.charCodeAt(Ae+1))<<8;case 1:D^=re=(65535&(re=(re=(65535&(re^=255&d.charCodeAt(Ae)))*N+(((re>>>16)*N&65535)<<16)&4294967295)<<15|re>>>17))*te+(((re>>>16)*te&65535)<<16)&4294967295}return D^=d.length,D=2246822507*(65535&(D^=D>>>16))+((2246822507*(D>>>16)&65535)<<16)&4294967295,D=3266489909*(65535&(D^=D>>>13))+((3266489909*(D>>>16)&65535)<<16)&4294967295,(D^=D>>>16)>>>0}),TA.exports),u=(Cl||(Cl=1,va.exports=function(d,b){for(var w,k=d.length,D=b^k,K=0;k>=4;)w=1540483477*(65535&(w=255&d.charCodeAt(K)|(255&d.charCodeAt(++K))<<8|(255&d.charCodeAt(++K))<<16|(255&d.charCodeAt(++K))<<24))+((1540483477*(w>>>16)&65535)<<16),D=1540483477*(65535&D)+((1540483477*(D>>>16)&65535)<<16)^(w=1540483477*(65535&(w^=w>>>24))+((1540483477*(w>>>16)&65535)<<16)),k-=4,++K;switch(k){case 3:D^=(255&d.charCodeAt(K+2))<<16;case 2:D^=(255&d.charCodeAt(K+1))<<8;case 1:D=1540483477*(65535&(D^=255&d.charCodeAt(K)))+((1540483477*(D>>>16)&65535)<<16)}return D=1540483477*(65535&(D^=D>>>13))+((1540483477*(D>>>16)&65535)<<16),(D^=D>>>15)>>>0}),va.exports);return Uu.exports=f,Uu.exports.murmur3=f,Uu.exports.murmur2=u,Uu.exports})(),Wd=h(du);class RA{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(u,d,b,w){this.ids.push(Ql(u)),this.positions.push(d,b,w)}getPositions(u){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const d=Ql(u);let b=0,w=this.ids.length-1;for(;b<w;){const D=b+w>>1;this.ids[D]>=d?w=D:b=D+1}const k=[];for(;this.ids[b]===d;)k.push({index:this.positions[3*b],start:this.positions[3*b+1],end:this.positions[3*b+2]}),b++;return k}static serialize(u,d){const b=new Float64Array(u.ids),w=new Uint32Array(u.positions);return _l(b,w,0,b.length-1),d&&d.push(b.buffer,w.buffer),{ids:b,positions:w}}static deserialize(u){const d=new RA;return d.ids=u.ids,d.positions=u.positions,d.indexed=!0,d}}function Ql(f){const u=+f;return!isNaN(u)&&u<=Number.MAX_SAFE_INTEGER?u:Wd(String(f))}function _l(f,u,d,b){for(;d<b;){const w=f[d+b>>1];let k=d-1,D=b+1;for(;;){do k++;while(f[k]<w);do D--;while(f[D]>w);if(k>=D)break;jc(f,k,D),jc(u,3*k,3*D),jc(u,3*k+1,3*D+1),jc(u,3*k+2,3*D+2)}D-d<b-D?(_l(f,u,d,D),d=D+1):(_l(f,u,D+1,b),b=D)}}function jc(f,u,d){const b=f[u];f[u]=f[d],f[d]=b}Vn("FeaturePositionMap",RA);class fu{constructor(u,d){this.gl=u.gl,this.location=d}}class Ns extends fu{constructor(u,d){super(u,d),this.current=0}set(u){this.current!==u&&(this.current=u,this.gl.uniform1f(this.location,u))}}class ba extends fu{constructor(u,d){super(u,d),this.current=[0,0,0,0]}set(u){u[0]===this.current[0]&&u[1]===this.current[1]&&u[2]===this.current[2]&&u[3]===this.current[3]||(this.current=u,this.gl.uniform4f(this.location,u[0],u[1],u[2],u[3]))}}class $a extends fu{constructor(u,d){super(u,d),this.current=ir.transparent}set(u){u.r===this.current.r&&u.g===this.current.g&&u.b===this.current.b&&u.a===this.current.a||(this.current=u,this.gl.uniform4f(this.location,u.r,u.g,u.b,u.a))}}const ua=new Float32Array(16);function v0(f){return[Rs(255*f.r,255*f.g),Rs(255*f.b,255*f.a)]}class Qd{constructor(u,d,b){this.value=u,this.uniformNames=d.map((w=>`u_${w}`)),this.type=b}setUniform(u,d,b){u.set(b.constantOr(this.value))}getBinding(u,d,b){return this.type==="color"?new $a(u,d):new Ns(u,d)}}class Nc{constructor(u,d){this.uniformNames=d.map((b=>`u_${b}`)),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(u,d){this.pixelRatioFrom=d.pixelRatio,this.pixelRatioTo=u.pixelRatio,this.patternFrom=d.tlbr,this.patternTo=u.tlbr}setConstantDashPositions(u,d){this.dashTo=[0,u.y,u.height,u.width],this.dashFrom=[0,d.y,d.height,d.width]}setUniform(u,d,b,w){let k=null;w==="u_pattern_to"?k=this.patternTo:w==="u_pattern_from"?k=this.patternFrom:w==="u_dasharray_to"?k=this.dashTo:w==="u_dasharray_from"?k=this.dashFrom:w==="u_pixel_ratio_to"?k=this.pixelRatioTo:w==="u_pixel_ratio_from"&&(k=this.pixelRatioFrom),k!==null&&u.set(k)}getBinding(u,d,b){return b.substr(0,9)==="u_pattern"||b.substr(0,12)==="u_dasharray_"?new ba(u,d):new Ns(u,d)}}class Ku{constructor(u,d,b,w){this.expression=u,this.type=b,this.maxValue=0,this.paintVertexAttributes=d.map((k=>({name:`a_${k}`,type:"Float32",components:b==="color"?2:1,offset:0}))),this.paintVertexArray=new w}populatePaintArray(u,d,b){const w=this.paintVertexArray.length,k=this.expression.evaluate(new To(0,b),d,{},b.canonical,[],b.formattedSection);this.paintVertexArray.resize(u),this._setPaintValue(w,u,k)}updatePaintArray(u,d,b,w,k){const D=this.expression.evaluate(new To(0,k),b,w);this._setPaintValue(u,d,D)}_setPaintValue(u,d,b){if(this.type==="color"){const w=v0(b);for(let k=u;k<d;k++)this.paintVertexArray.emplace(k,w[0],w[1])}else{for(let w=u;w<d;w++)this.paintVertexArray.emplace(w,b);this.maxValue=Math.max(this.maxValue,Math.abs(b))}}upload(u){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=u.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class pu{constructor(u,d,b,w,k,D){this.expression=u,this.uniformNames=d.map((K=>`u_${K}_t`)),this.type=b,this.useIntegerZoom=w,this.zoom=k,this.maxValue=0,this.paintVertexAttributes=d.map((K=>({name:`a_${K}`,type:"Float32",components:b==="color"?4:2,offset:0}))),this.paintVertexArray=new D}populatePaintArray(u,d,b){const w=this.expression.evaluate(new To(this.zoom,b),d,{},b.canonical,[],b.formattedSection),k=this.expression.evaluate(new To(this.zoom+1,b),d,{},b.canonical,[],b.formattedSection),D=this.paintVertexArray.length;this.paintVertexArray.resize(u),this._setPaintValue(D,u,w,k)}updatePaintArray(u,d,b,w,k){const D=this.expression.evaluate(new To(this.zoom,k),b,w),K=this.expression.evaluate(new To(this.zoom+1,k),b,w);this._setPaintValue(u,d,D,K)}_setPaintValue(u,d,b,w){if(this.type==="color"){const k=v0(b),D=v0(w);for(let K=u;K<d;K++)this.paintVertexArray.emplace(K,k[0],k[1],D[0],D[1])}else{for(let k=u;k<d;k++)this.paintVertexArray.emplace(k,b,w);this.maxValue=Math.max(this.maxValue,Math.abs(b),Math.abs(w))}}upload(u){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=u.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(u,d){const b=this.useIntegerZoom?Math.floor(d.zoom):d.zoom,w=bt(this.expression.interpolationFactor(b,this.zoom,this.zoom+1),0,1);u.set(w)}getBinding(u,d,b){return new Ns(u,d)}}class Gc{constructor(u,d,b,w,k,D){this.expression=u,this.type=d,this.useIntegerZoom=b,this.zoom=w,this.layerId=D,this.zoomInPaintVertexArray=new k,this.zoomOutPaintVertexArray=new k}populatePaintArray(u,d,b){const w=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(u),this.zoomOutPaintVertexArray.resize(u),this._setPaintValues(w,u,this.getPositionIds(d),b)}updatePaintArray(u,d,b,w,k){this._setPaintValues(u,d,this.getPositionIds(b),k)}_setPaintValues(u,d,b,w){const k=this.getPositions(w);if(!k||!b)return;const D=k[b.min],K=k[b.mid],N=k[b.max];if(D&&K&&N)for(let te=u;te<d;te++)this.emplace(this.zoomInPaintVertexArray,te,K,D),this.emplace(this.zoomOutPaintVertexArray,te,K,N)}upload(u){if(this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer){const d=this.getVertexAttributes();this.zoomInPaintVertexBuffer=u.createVertexBuffer(this.zoomInPaintVertexArray,d,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=u.createVertexBuffer(this.zoomOutPaintVertexArray,d,this.expression.isStateDependent)}}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class dA extends Gc{getPositions(u){return u.imagePositions}getPositionIds(u){return u.patterns&&u.patterns[this.layerId]}getVertexAttributes(){return Al.members}emplace(u,d,b,w){u.emplace(d,b.tlbr[0],b.tlbr[1],b.tlbr[2],b.tlbr[3],w.tlbr[0],w.tlbr[1],w.tlbr[2],w.tlbr[3],b.pixelRatio,w.pixelRatio)}}class DA extends Gc{getPositions(u){return u.dashPositions}getPositionIds(u){return u.dashes&&u.dashes[this.layerId]}getVertexAttributes(){return la.members}emplace(u,d,b,w){u.emplace(d,0,b.y,b.height,b.width,0,w.y,w.height,w.width)}}class Hm{constructor(u,d,b){this.binders={},this._buffers=[];const w=[];for(const k in u.paint._values){if(!b(k))continue;const D=u.paint.get(k);if(!(D instanceof La&&cu(D.property.specification)))continue;const K=qd(k,u.type),N=D.value,te=D.property.specification.type,re=D.property.useIntegerZoom,Ae=D.property.specification["property-type"],Oe=Ae==="cross-faded"||Ae==="cross-faded-data-driven";if(N.kind==="constant")this.binders[k]=Oe?new Nc(N.value,K):new Qd(N.value,K,te),w.push(`/u_${k}`);else if(N.kind==="source"||Oe){const De=qf(k,te,"source");this.binders[k]=Oe?k==="line-dasharray"?new DA(N,te,re,d,De,u.id):new dA(N,te,re,d,De,u.id):new Ku(N,K,te,De),w.push(`/a_${k}`)}else{const De=qf(k,te,"composite");this.binders[k]=new pu(N,K,te,re,d,De),w.push(`/z_${k}`)}}this.cacheKey=w.sort().join("")}getMaxValue(u){const d=this.binders[u];return d instanceof Ku||d instanceof pu?d.maxValue:0}populatePaintArrays(u,d,b){for(const w in this.binders){const k=this.binders[w];(k instanceof Ku||k instanceof pu||k instanceof Gc)&&k.populatePaintArray(u,d,b)}}setConstantPatternPositions(u,d){for(const b in this.binders){const w=this.binders[b];w instanceof Nc&&w.setConstantPatternPositions(u,d)}}setConstantDashPositions(u,d){for(const b in this.binders){const w=this.binders[b];w instanceof Nc&&w.setConstantDashPositions(u,d)}}updatePaintArrays(u,d,b,w,k){let D=!1;for(const K in u){const N=d.getPositions(K);for(const te of N){const re=b.feature(te.index);for(const Ae in this.binders){const Oe=this.binders[Ae];if((Oe instanceof Ku||Oe instanceof pu||Oe instanceof Gc)&&Oe.expression.isStateDependent===!0){const De=w.paint.get(Ae);Oe.expression=De.value,Oe.updatePaintArray(te.start,te.end,re,u[K],k),D=!0}}}}return D}defines(){const u=[];for(const d in this.binders){const b=this.binders[d];(b instanceof Qd||b instanceof Nc)&&u.push(...b.uniformNames.map((w=>`#define HAS_UNIFORM_${w}`)))}return u}getBinderAttributes(){const u=[];for(const d in this.binders){const b=this.binders[d];if(b instanceof Ku||b instanceof pu)for(let w=0;w<b.paintVertexAttributes.length;w++)u.push(b.paintVertexAttributes[w].name);else if(b instanceof Gc){const w=b.getVertexAttributes();for(const k of w)u.push(k.name)}}return u}getBinderUniforms(){const u=[];for(const d in this.binders){const b=this.binders[d];if(b instanceof Qd||b instanceof Nc||b instanceof pu)for(const w of b.uniformNames)u.push(w)}return u}getPaintVertexBuffers(){return this._buffers}getUniforms(u,d){const b=[];for(const w in this.binders){const k=this.binders[w];if(k instanceof Qd||k instanceof Nc||k instanceof pu){for(const D of k.uniformNames)if(d[D]){const K=k.getBinding(u,d[D],D);b.push({name:D,property:w,binding:K})}}}return b}setUniforms(u,d,b,w){for(const{name:k,property:D,binding:K}of d)this.binders[D].setUniform(K,w,b.get(D),k)}updatePaintBuffers(u){this._buffers=[];for(const d in this.binders){const b=this.binders[d];if(u&&b instanceof Gc){const w=u.fromScale===2?b.zoomInPaintVertexBuffer:b.zoomOutPaintVertexBuffer;w&&this._buffers.push(w)}else(b instanceof Ku||b instanceof pu)&&b.paintVertexBuffer&&this._buffers.push(b.paintVertexBuffer)}}upload(u){for(const d in this.binders){const b=this.binders[d];(b instanceof Ku||b instanceof pu||b instanceof Gc)&&b.upload(u)}this.updatePaintBuffers()}destroy(){for(const u in this.binders){const d=this.binders[u];(d instanceof Ku||d instanceof pu||d instanceof Gc)&&d.destroy()}}}class fA{constructor(u,d,b=()=>!0){this.programConfigurations={};for(const w of u)this.programConfigurations[w.id]=new Hm(w,d,b);this.needsUpload=!1,this._featureMap=new RA,this._bufferOffset=0}populatePaintArrays(u,d,b,w){for(const k in this.programConfigurations)this.programConfigurations[k].populatePaintArrays(u,d,w);d.id!==void 0&&this._featureMap.add(d.id,b,this._bufferOffset,u),this._bufferOffset=u,this.needsUpload=!0}updatePaintArrays(u,d,b,w){for(const k of b)this.needsUpload=this.programConfigurations[k.id].updatePaintArrays(u,this._featureMap,d,k,w)||this.needsUpload}get(u){return this.programConfigurations[u]}upload(u){if(this.needsUpload){for(const d in this.programConfigurations)this.programConfigurations[d].upload(u);this.needsUpload=!1}}destroy(){for(const u in this.programConfigurations)this.programConfigurations[u].destroy()}}function qd(f,u){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-dasharray":["dasharray_to","dasharray_from"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[f]||[f.replace(`${u}-`,"").replace(/-/g,"_")]}function qf(f,u,d){const b={color:{source:hA,composite:ae},number:{source:E,composite:hA}},w=(function(k){return{"line-pattern":{source:Gt,composite:Gt},"fill-pattern":{source:Gt,composite:Gt},"fill-extrusion-pattern":{source:Gt,composite:Gt},"line-dasharray":{source:Bn,composite:Bn}}[k]})(f);return w&&w[d]||b[u][d]}Vn("ConstantBinder",Qd),Vn("CrossFadedConstantBinder",Nc),Vn("SourceExpressionBinder",Ku),Vn("CrossFadedPatternBinder",dA),Vn("CrossFadedDasharrayBinder",DA),Vn("CompositeExpressionBinder",pu),Vn("ProgramConfiguration",Hm,{omit:["_buffers"]}),Vn("ProgramConfigurationSet",fA);const mh=Math.pow(2,14)-1,mv=-mh-1;function Yd(f){const u=At/f.extent,d=f.loadGeometry();for(let b=0;b<d.length;b++){const w=d[b];for(let k=0;k<w.length;k++){const D=w[k],K=Math.round(D.x*u),N=Math.round(D.y*u);D.x=bt(K,mv,mh),D.y=bt(N,mv,mh),(K<D.x||K>D.x+1||N<D.y||N>D.y+1)&&ft("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return d}function Va(f,u){return{type:f.type,id:f.id,properties:f.properties,geometry:u?Yd(f):[]}}const O1=-32768;function gv(f,u,d,b,w){f.emplaceBack(O1+8*u+b,O1+8*d+w)}class B1{constructor(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map((d=>d.id)),this.index=u.index,this.hasDependencies=!1,this.layoutVertexArray=new ct,this.indexArray=new Eo,this.segments=new Br,this.programConfigurations=new fA(u.layers,u.zoom),this.stateDependentLayerIds=this.layers.filter((d=>d.isStateDependent())).map((d=>d.id))}populate(u,d,b){const w=this.layers[0],k=[];let D=null,K=!1,N=w.type==="heatmap";if(w.type==="circle"){const re=w;D=re.layout.get("circle-sort-key"),K=!D.isConstant(),N=N||re.paint.get("circle-pitch-alignment")==="map"}const te=N?d.subdivisionGranularity.circle:1;for(const{feature:re,id:Ae,index:Oe,sourceLayerIndex:De}of u){const Ue=this.layers[0]._featureFilter.needGeometry,Ge=Va(re,Ue);if(!this.layers[0]._featureFilter.filter(new To(this.zoom),Ge,b))continue;const He=K?D.evaluate(Ge,{},b):void 0,st={id:Ae,properties:re.properties,type:re.type,sourceLayerIndex:De,index:Oe,geometry:Ue?Ge.geometry:Yd(re),patterns:{},sortKey:He};k.push(st)}K&&k.sort(((re,Ae)=>re.sortKey-Ae.sortKey));for(const re of k){const{geometry:Ae,index:Oe,sourceLayerIndex:De}=re,Ue=u[Oe].feature;this.addFeature(re,Ae,Oe,b,te),d.featureIndex.insert(Ue,Ae,Oe,De,this.index)}}update(u,d,b){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,d,this.stateDependentLayers,{imagePositions:b})}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,Qo),this.indexBuffer=u.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(u,d,b,w,k=1){let D;switch(k){case 1:D=[0,7];break;case 3:D=[0,2,5,7];break;case 5:D=[0,1,3,4,6,7];break;case 7:D=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${k}; valid values are 1, 3, 5, 7.`)}const K=D.length;for(const N of d)for(const te of N){const re=te.x,Ae=te.y;if(re<0||re>=At||Ae<0||Ae>=At)continue;const Oe=this.segments.prepareSegment(K*K,this.layoutVertexArray,this.indexArray,u.sortKey),De=Oe.vertexLength;for(let Ue=0;Ue<K;Ue++)for(let Ge=0;Ge<K;Ge++)gv(this.layoutVertexArray,re,Ae,D[Ge],D[Ue]);for(let Ue=0;Ue<K-1;Ue++)for(let Ge=0;Ge<K-1;Ge++){const He=De+Ue*K+Ge,st=De+(Ue+1)*K+Ge;this.indexArray.emplaceBack(He,st+1,He+1),this.indexArray.emplaceBack(He,st,st+1)}Oe.vertexLength+=K*K,Oe.primitiveLength+=(K-1)*(K-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,b,{imagePositions:{},canonical:w})}}function Zm(f,u){for(let d=0;d<f.length;d++)if(Qi(u,f[d]))return!0;for(let d=0;d<u.length;d++)if(Qi(f,u[d]))return!0;return!!Xm(f,u)}function b0(f,u,d){return!!Qi(f,u)||!!zp(u,f,d)}function I1(f,u){if(f.length===1)return Ca(u,f[0]);for(let d=0;d<u.length;d++){const b=u[d];for(let w=0;w<b.length;w++)if(Qi(f,b[w]))return!0}for(let d=0;d<f.length;d++)if(Ca(u,f[d]))return!0;for(let d=0;d<u.length;d++)if(Xm(f,u[d]))return!0;return!1}function rd(f,u,d){if(f.length>1){if(Xm(f,u))return!0;for(let b=0;b<u.length;b++)if(zp(u[b],f,d))return!0}for(let b=0;b<f.length;b++)if(zp(f[b],u,d))return!0;return!1}function Xm(f,u){if(f.length===0||u.length===0)return!1;for(let d=0;d<f.length-1;d++){const b=f[d],w=f[d+1];for(let k=0;k<u.length-1;k++)if(yv(b,w,u[k],u[k+1]))return!0}return!1}function yv(f,u,d,b){return Dt(f,d,b)!==Dt(u,d,b)&&Dt(f,u,d)!==Dt(f,u,b)}function zp(f,u,d){const b=d*d;if(u.length===1)return f.distSqr(u[0])<b;for(let w=1;w<u.length;w++)if(ca(f,u[w-1],u[w])<b)return!0;return!1}function ca(f,u,d){const b=u.distSqr(d);if(b===0)return f.distSqr(u);const w=((f.x-u.x)*(d.x-u.x)+(f.y-u.y)*(d.y-u.y))/b;return f.distSqr(w<0?u:w>1?d:d.sub(u)._mult(w)._add(u))}function Ca(f,u){let d,b,w,k=!1;for(let D=0;D<f.length;D++){d=f[D];for(let K=0,N=d.length-1;K<d.length;N=K++)b=d[K],w=d[N],b.y>u.y!=w.y>u.y&&u.x<(w.x-b.x)*(u.y-b.y)/(w.y-b.y)+b.x&&(k=!k)}return k}function Qi(f,u){let d=!1;for(let b=0,w=f.length-1;b<f.length;w=b++){const k=f[b],D=f[w];k.y>u.y!=D.y>u.y&&u.x<(D.x-k.x)*(u.y-k.y)/(D.y-k.y)+k.x&&(d=!d)}return d}function C0(f,u,d){const b=d[0],w=d[2];if(f.x<b.x&&u.x<b.x||f.x>w.x&&u.x>w.x||f.y<b.y&&u.y<b.y||f.y>w.y&&u.y>w.y)return!1;const k=Dt(f,u,d[0]);return k!==Dt(f,u,d[1])||k!==Dt(f,u,d[2])||k!==Dt(f,u,d[3])}function $d(f,u,d){const b=u.paint.get(f).value;return b.kind==="constant"?b.value:d.programConfigurations.get(u.id).getMaxValue(f)}function gh(f){return Math.sqrt(f[0]*f[0]+f[1]*f[1])}function Yf(f,u,d,b,w){if(!u[0]&&!u[1])return f;const k=c.convert(u)._mult(w);d==="viewport"&&k._rotate(-b);const D=[];for(let K=0;K<f.length;K++)D.push(f[K].sub(k));return D}function k1({queryGeometry:f,size:u},d){return b0(f,d,u)}function _0({queryGeometry:f,size:u,transform:d,unwrappedTileID:b,getElevation:w},k){return b0(f,k,u*(d.projectTileCoordinates(k.x,k.y,b,w).signedDistanceFromCamera/d.cameraToCenterDistance))}function mu({queryGeometry:f,size:u,transform:d,unwrappedTileID:b,getElevation:w},k){const D=d.projectTileCoordinates(k.x,k.y,b,w).signedDistanceFromCamera,K=u*(d.cameraToCenterDistance/D);return b0(f,Jm(k,d,b,w),K)}function Xx({queryGeometry:f,size:u,transform:d,unwrappedTileID:b,getElevation:w},k){return b0(f,Jm(k,d,b,w),u)}function x0({queryGeometry:f,size:u,transform:d,unwrappedTileID:b,getElevation:w,pitchAlignment:k="map",pitchScale:D="map"},K){const N=k==="map"?D==="map"?k1:_0:D==="map"?mu:Xx,te={queryGeometry:f,size:u,transform:d,unwrappedTileID:b,getElevation:w};for(const re of K)for(const Ae of re)if(N(te,Ae))return!0;return!1}function Jm(f,u,d,b){const w=u.projectTileCoordinates(f.x,f.y,d,b).point;return new c((.5*w.x+.5)*u.width,(.5*-w.y+.5)*u.height)}let vv,T1;Vn("CircleBucket",B1,{omit:["layers"]});var aC={get paint(){return T1=T1||new us({"circle-radius":new Ci(mt.paint_circle["circle-radius"]),"circle-color":new Ci(mt.paint_circle["circle-color"]),"circle-blur":new Ci(mt.paint_circle["circle-blur"]),"circle-opacity":new Ci(mt.paint_circle["circle-opacity"]),"circle-translate":new ti(mt.paint_circle["circle-translate"]),"circle-translate-anchor":new ti(mt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new ti(mt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new ti(mt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Ci(mt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Ci(mt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Ci(mt.paint_circle["circle-stroke-opacity"])})},get layout(){return vv=vv||new us({"circle-sort-key":new Ci(mt.layout_circle["circle-sort-key"])})}};class bv extends cl{constructor(u,d){super(u,aC,d)}createBucket(u){return new B1(u)}queryRadius(u){const d=u;return $d("circle-radius",this,d)+$d("circle-stroke-width",this,d)+gh(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:u,feature:d,featureState:b,geometry:w,transform:k,pixelsToTileUnits:D,unwrappedTileID:K,getElevation:N}){const te=Yf(u,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-k.bearingInRadians,D),re=this.paint.get("circle-radius").evaluate(d,b)+this.paint.get("circle-stroke-width").evaluate(d,b),Ae=this.paint.get("circle-pitch-scale"),Oe=this.paint.get("circle-pitch-alignment");let De,Ue;return Oe==="map"?(De=te,Ue=re*D):(De=(function(Ge,He,st,Tt){return Ge.map((dt=>Jm(dt,He,st,Tt)))})(te,k,K,N),Ue=re),x0({queryGeometry:De,size:Ue,transform:k,unwrappedTileID:K,getElevation:N,pitchAlignment:Oe,pitchScale:Ae},w)}}class R1 extends B1{}let PA;Vn("HeatmapBucket",R1,{omit:["layers"]});var Lu={get paint(){return PA=PA||new us({"heatmap-radius":new Ci(mt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Ci(mt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new ti(mt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new nd(mt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new ti(mt.paint_heatmap["heatmap-opacity"])})}};function jp(f,{width:u,height:d},b,w){if(w){if(w instanceof Uint8ClampedArray)w=new Uint8Array(w.buffer);else if(w.length!==u*d*b)throw new RangeError(`mismatched image size. expected: ${w.length} but got: ${u*d*b}`)}else w=new Uint8Array(u*d*b);return f.width=u,f.height=d,f.data=w,f}function M0(f,{width:u,height:d},b){if(u===f.width&&d===f.height)return;const w=jp({},{width:u,height:d},b);Np(f,w,{x:0,y:0},{x:0,y:0},{width:Math.min(f.width,u),height:Math.min(f.height,d)},b),f.width=u,f.height=d,f.data=w.data}function Np(f,u,d,b,w,k){if(w.width===0||w.height===0)return u;if(w.width>f.width||w.height>f.height||d.x>f.width-w.width||d.y>f.height-w.height)throw new RangeError("out of range source coordinates for image copy");if(w.width>u.width||w.height>u.height||b.x>u.width-w.width||b.y>u.height-w.height)throw new RangeError("out of range destination coordinates for image copy");const D=f.data,K=u.data;if(D===K)throw new Error("srcData equals dstData, so image is already copied");for(let N=0;N<w.height;N++){const te=((d.y+N)*f.width+d.x)*k,re=((b.y+N)*u.width+b.x)*k;for(let Ae=0;Ae<w.width*k;Ae++)K[re+Ae]=D[te+Ae]}return u}class eg{constructor(u,d){jp(this,u,1,d)}resize(u){M0(this,u,1)}clone(){return new eg({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(u,d,b,w,k){Np(u,d,b,w,k,1)}}class gu{constructor(u,d){jp(this,u,4,d)}resize(u){M0(this,u,4)}replace(u,d){d?this.data.set(u):this.data=u instanceof Uint8ClampedArray?new Uint8Array(u.buffer):u}clone(){return new gu({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(u,d,b,w,k){Np(u,d,b,w,k,4)}setPixel(u,d,b){const w=4*(u*this.width+d);this.data[w+0]=Math.round(255*b.r/b.a),this.data[w+1]=Math.round(255*b.g/b.a),this.data[w+2]=Math.round(255*b.b/b.a),this.data[w+3]=Math.round(255*b.a)}}function Gp(f){const u={},d=f.resolution||256,b=f.clips?f.clips.length:1,w=f.image||new gu({width:d,height:b});if(Math.log(d)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${d}`);const k=(D,K,N)=>{u[f.evaluationKey]=N;const te=f.expression.evaluate(u);w.setPixel(D/4/d,K/4,te)};if(f.clips)for(let D=0,K=0;D<b;++D,K+=4*d)for(let N=0,te=0;N<d;N++,te+=4){const re=N/(d-1),{start:Ae,end:Oe}=f.clips[D];k(K,te,Ae*(1-re)+Oe*re)}else for(let D=0,K=0;D<d;D++,K+=4)k(0,K,D/(d-1));return w}Vn("AlphaImage",eg),Vn("RGBAImage",gu);const UA="big-fb";class D1 extends cl{createBucket(u){return new R1(u)}constructor(u,d){super(u,Lu,d),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(u){u==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Gp({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(UA)&&this.heatmapFbos.delete(UA)}queryRadius(u){return $d("heatmap-radius",this,u)}queryIntersectsFeature({queryGeometry:u,feature:d,featureState:b,geometry:w,transform:k,pixelsToTileUnits:D,unwrappedTileID:K,getElevation:N}){return x0({queryGeometry:u,size:this.paint.get("heatmap-radius").evaluate(d,b)*D,transform:k,unwrappedTileID:K,getElevation:N},w)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let lC;var uC={get paint(){return lC=lC||new us({"hillshade-illumination-direction":new ti(mt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new ti(mt.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new ti(mt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new ti(mt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new ti(mt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new ti(mt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new ti(mt.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new ti(mt.paint_hillshade["hillshade-method"])})}};class Vd extends cl{constructor(u,d){super(u,uC,d),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let u=this.paint.get("hillshade-illumination-direction").values,d=this.paint.get("hillshade-illumination-altitude").values,b=this.paint.get("hillshade-highlight-color").values,w=this.paint.get("hillshade-shadow-color").values;const k=Math.max(u.length,d.length,b.length,w.length);u=u.concat(Array(k-u.length).fill(u.at(-1))),d=d.concat(Array(k-d.length).fill(d.at(-1))),b=b.concat(Array(k-b.length).fill(b.at(-1))),w=w.concat(Array(k-w.length).fill(w.at(-1)));const D=d.map(Un);return{directionRadians:u.map(Un),altitudeRadians:D,shadowColor:w,highlightColor:b}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}let P1;var Cv={get paint(){return P1=P1||new us({"color-relief-opacity":new ti(mt["paint_color-relief"]["color-relief-opacity"]),"color-relief-color":new nd(mt["paint_color-relief"]["color-relief-color"])})}};class Wp{constructor(u,d,b,w){this.context=u,this.format=b,this.texture=u.gl.createTexture(),this.update(d,w)}update(u,d,b){const{width:w,height:k}=u,D=!(this.size&&this.size[0]===w&&this.size[1]===k||b),{context:K}=this,{gl:N}=K;if(this.useMipmap=!!(d&&d.useMipmap),N.bindTexture(N.TEXTURE_2D,this.texture),K.pixelStoreUnpackFlipY.set(!1),K.pixelStoreUnpack.set(1),K.pixelStoreUnpackPremultiplyAlpha.set(this.format===N.RGBA&&(!d||d.premultiply!==!1)),D)this.size=[w,k],u instanceof HTMLImageElement||u instanceof HTMLCanvasElement||u instanceof HTMLVideoElement||u instanceof ImageData||Pn(u)?N.texImage2D(N.TEXTURE_2D,0,this.format,this.format,N.UNSIGNED_BYTE,u):N.texImage2D(N.TEXTURE_2D,0,this.format,w,k,0,this.format,N.UNSIGNED_BYTE,u.data);else{const{x:te,y:re}=b||{x:0,y:0};u instanceof HTMLImageElement||u instanceof HTMLCanvasElement||u instanceof HTMLVideoElement||u instanceof ImageData||Pn(u)?N.texSubImage2D(N.TEXTURE_2D,0,te,re,N.RGBA,N.UNSIGNED_BYTE,u):N.texSubImage2D(N.TEXTURE_2D,0,te,re,w,k,N.RGBA,N.UNSIGNED_BYTE,u.data)}this.useMipmap&&this.isSizePowerOfTwo()&&N.generateMipmap(N.TEXTURE_2D),K.pixelStoreUnpackFlipY.setDefault(),K.pixelStoreUnpack.setDefault(),K.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(u,d,b){const{context:w}=this,{gl:k}=w;k.bindTexture(k.TEXTURE_2D,this.texture),b!==k.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(b=k.LINEAR),u!==this.filter&&(k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MAG_FILTER,u),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MIN_FILTER,b||u),this.filter=u),d!==this.wrap&&(k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_S,d),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_T,d),this.wrap=d)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:u}=this.context;u.deleteTexture(this.texture),this.texture=null}}class tg{constructor(u,d,b,w=1,k=1,D=1,K=0){if(this.uid=u,d.height!==d.width)throw new RangeError("DEM tiles must be square");if(b&&!["mapbox","terrarium","custom"].includes(b))return void ft(`"${b}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=d.height;const N=this.dim=d.height-2;switch(this.data=new Uint32Array(d.data.buffer),b){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=w,this.greenFactor=k,this.blueFactor=D,this.baseShift=K;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let te=0;te<N;te++)this.data[this._idx(-1,te)]=this.data[this._idx(0,te)],this.data[this._idx(N,te)]=this.data[this._idx(N-1,te)],this.data[this._idx(te,-1)]=this.data[this._idx(te,0)],this.data[this._idx(te,N)]=this.data[this._idx(te,N-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(N,-1)]=this.data[this._idx(N-1,0)],this.data[this._idx(-1,N)]=this.data[this._idx(0,N-1)],this.data[this._idx(N,N)]=this.data[this._idx(N-1,N-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let te=0;te<N;te++)for(let re=0;re<N;re++){const Ae=this.get(te,re);Ae>this.max&&(this.max=Ae),Ae<this.min&&(this.min=Ae)}}get(u,d){const b=new Uint8Array(this.data.buffer),w=4*this._idx(u,d);return this.unpack(b[w],b[w+1],b[w+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(u,d){if(u<-1||u>=this.dim+1||d<-1||d>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(d+1)*this.stride+(u+1)}unpack(u,d,b){return u*this.redFactor+d*this.greenFactor+b*this.blueFactor-this.baseShift}pack(u){return Cs(u,this.getUnpackVector())}getPixels(){return new gu({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(u,d,b){if(this.dim!==u.dim)throw new Error("dem dimension mismatch");let w=d*this.dim,k=d*this.dim+this.dim,D=b*this.dim,K=b*this.dim+this.dim;switch(d){case-1:w=k-1;break;case 1:k=w+1}switch(b){case-1:D=K-1;break;case 1:K=D+1}const N=-d*this.dim,te=-b*this.dim;for(let re=D;re<K;re++)for(let Ae=w;Ae<k;Ae++)this.data[this._idx(Ae,re)]=u.data[this._idx(Ae+N,re+te)]}}function Cs(f,u){const d=u[0],b=u[1],w=u[2],k=u[3],D=Math.min(d,b,w),K=Math.round((f+k)/D);return{r:Math.floor(K*D/d)%256,g:Math.floor(K*D/b)%256,b:Math.floor(K*D/w)%256}}Vn("DEMData",tg);class cC extends cl{constructor(u,d){super(u,Cv,d)}_createColorRamp(u){const d={elevationStops:[],colorStops:[]},b=this._transitionablePaint._values["color-relief-color"].value.expression;if(b instanceof Ll&&b._styleExpression.expression instanceof qa){this.colorRampExpression=b;const D=b._styleExpression.expression;d.elevationStops=D.labels,d.colorStops=[];for(const K of d.elevationStops)d.colorStops.push(D.evaluate({globals:{elevation:K}}))}if(d.elevationStops.length<1&&(d.elevationStops=[0],d.colorStops=[ir.transparent]),d.elevationStops.length<2&&(d.elevationStops.push(d.elevationStops[0]+1),d.colorStops.push(d.colorStops[0])),d.elevationStops.length<=u)return d;const w={elevationStops:[],colorStops:[]},k=(d.elevationStops.length-1)/(u-1);for(let D=0;D<d.elevationStops.length-.5;D+=k)w.elevationStops.push(d.elevationStops[Math.round(D)]),w.colorStops.push(d.colorStops[Math.round(D)]);return ft(`Too many colors in specification of ${this.id} color-relief layer, may not render properly.`),w}_colorRampChanged(){return this.colorRampExpression!=this._transitionablePaint._values["color-relief-color"].value.expression}getColorRampTextures(u,d,b){if(this.colorRampTextures&&!this._colorRampChanged())return this.colorRampTextures;const w=this._createColorRamp(d),k=new gu({width:w.colorStops.length,height:1}),D=new gu({width:w.colorStops.length,height:1});for(let K=0;K<w.elevationStops.length;K++){const N=Cs(w.elevationStops[K],b);D.setPixel(0,K,new ir(N.r/255,N.g/255,N.b/255,1)),k.setPixel(0,K,w.colorStops[K])}return this.colorRampTextures={elevationTexture:new Wp(u,D,u.gl.RGBA),colorTexture:new Wp(u,k,u.gl.RGBA)},this.colorRampTextures}hasOffscreenPass(){return this.visibility!=="none"&&!!this.colorRampTextures}}const w0=po([{name:"a_pos",components:2,type:"Int16"}],4),{members:U1}=w0;function Hd(f,u,d){const b=d.patternDependencies;let w=!1;for(const k of u){const D=k.paint.get(`${f}-pattern`);D.isConstant()||(w=!0);const K=D.constantOr(null);K&&(w=!0,b[K.to]=!0,b[K.from]=!0)}return w}function yh(f,u,d,b,w){const{zoom:k}=b,D=w.patternDependencies;for(const K of u){const N=K.paint.get(`${f}-pattern`).value;if(N.kind!=="constant"){let te=N.evaluate({zoom:k-1},d,{},w.availableImages),re=N.evaluate({zoom:k},d,{},w.availableImages),Ae=N.evaluate({zoom:k+1},d,{},w.availableImages);te=te&&te.name?te.name:te,re=re&&re.name?re.name:re,Ae=Ae&&Ae.name?Ae.name:Ae,D[te]=!0,D[re]=!0,D[Ae]=!0,d.patterns[K.id]={min:te,mid:re,max:Ae}}}return d}function ng(f,u,d,b,w){let k;if(w===(function(D,K,N,te){let re=0;for(let Ae=K,Oe=N-te;Ae<N;Ae+=te)re+=(D[Oe]-D[Ae])*(D[Ae+1]+D[Oe+1]),Oe=Ae;return re})(f,u,d,b)>0)for(let D=u;D<d;D+=b)k=Mv(D/b|0,f[D],f[D+1],k);else for(let D=d-b;D>=u;D-=b)k=Mv(D/b|0,f[D],f[D+1],k);return k&&ig(k,k.next)&&(qp(k),k=k.next),k}function Zd(f,u){if(!f)return f;u||(u=f);let d,b=f;do if(d=!1,b.steiner||!ig(b,b.next)&&Qr(b.prev,b,b.next)!==0)b=b.next;else{if(qp(b),b=u=b.prev,b===b.next)break;d=!0}while(d||b!==u);return u}function ql(f,u,d,b,w,k,D){if(!f)return;!D&&k&&(function(N,te,re,Ae){let Oe=N;do Oe.z===0&&(Oe.z=F1(Oe.x,Oe.y,te,re,Ae)),Oe.prevZ=Oe.prev,Oe.nextZ=Oe.next,Oe=Oe.next;while(Oe!==N);Oe.prevZ.nextZ=null,Oe.prevZ=null,(function(De){let Ue,Ge=1;do{let He,st=De;De=null;let Tt=null;for(Ue=0;st;){Ue++;let dt=st,Ct=0;for(let Zt=0;Zt<Ge&&(Ct++,dt=dt.nextZ,dt);Zt++);let jt=Ge;for(;Ct>0||jt>0&&dt;)Ct!==0&&(jt===0||!dt||st.z<=dt.z)?(He=st,st=st.nextZ,Ct--):(He=dt,dt=dt.nextZ,jt--),Tt?Tt.nextZ=He:De=He,He.prevZ=Tt,Tt=He;st=dt}Tt.nextZ=null,Ge*=2}while(Ue>1)})(Oe)})(f,b,w,k);let K=f;for(;f.prev!==f.next;){const N=f.prev,te=f.next;if(k?AC(f,b,w,k):Fu(f))u.push(N.i,f.i,te.i),qp(f),f=te.next,K=te.next;else if((f=te)===K){D?D===1?ql(f=K1(Zd(f),u),u,d,b,w,k,2):D===2&&hC(f,u,d,b,w,k):ql(Zd(f),u,d,b,w,k,1);break}}}function Fu(f){const u=f.prev,d=f,b=f.next;if(Qr(u,d,b)>=0)return!1;const w=u.x,k=d.x,D=b.x,K=u.y,N=d.y,te=b.y,re=Math.min(w,k,D),Ae=Math.min(K,N,te),Oe=Math.max(w,k,D),De=Math.max(K,N,te);let Ue=b.next;for(;Ue!==u;){if(Ue.x>=re&&Ue.x<=Oe&&Ue.y>=Ae&&Ue.y<=De&&Qp(w,K,k,N,D,te,Ue.x,Ue.y)&&Qr(Ue.prev,Ue,Ue.next)>=0)return!1;Ue=Ue.next}return!0}function AC(f,u,d,b){const w=f.prev,k=f,D=f.next;if(Qr(w,k,D)>=0)return!1;const K=w.x,N=k.x,te=D.x,re=w.y,Ae=k.y,Oe=D.y,De=Math.min(K,N,te),Ue=Math.min(re,Ae,Oe),Ge=Math.max(K,N,te),He=Math.max(re,Ae,Oe),st=F1(De,Ue,u,d,b),Tt=F1(Ge,He,u,d,b);let dt=f.prevZ,Ct=f.nextZ;for(;dt&&dt.z>=st&&Ct&&Ct.z<=Tt;){if(dt.x>=De&&dt.x<=Ge&&dt.y>=Ue&&dt.y<=He&&dt!==w&&dt!==D&&Qp(K,re,N,Ae,te,Oe,dt.x,dt.y)&&Qr(dt.prev,dt,dt.next)>=0||(dt=dt.prevZ,Ct.x>=De&&Ct.x<=Ge&&Ct.y>=Ue&&Ct.y<=He&&Ct!==w&&Ct!==D&&Qp(K,re,N,Ae,te,Oe,Ct.x,Ct.y)&&Qr(Ct.prev,Ct,Ct.next)>=0))return!1;Ct=Ct.nextZ}for(;dt&&dt.z>=st;){if(dt.x>=De&&dt.x<=Ge&&dt.y>=Ue&&dt.y<=He&&dt!==w&&dt!==D&&Qp(K,re,N,Ae,te,Oe,dt.x,dt.y)&&Qr(dt.prev,dt,dt.next)>=0)return!1;dt=dt.prevZ}for(;Ct&&Ct.z<=Tt;){if(Ct.x>=De&&Ct.x<=Ge&&Ct.y>=Ue&&Ct.y<=He&&Ct!==w&&Ct!==D&&Qp(K,re,N,Ae,te,Oe,Ct.x,Ct.y)&&Qr(Ct.prev,Ct,Ct.next)>=0)return!1;Ct=Ct.nextZ}return!0}function K1(f,u){let d=f;do{const b=d.prev,w=d.next.next;!ig(b,w)&&z1(b,d,d.next,w)&&Yl(b,w)&&Yl(w,b)&&(u.push(b.i,d.i,w.i),qp(d),qp(d.next),d=f=w),d=d.next}while(d!==f);return Zd(d)}function hC(f,u,d,b,w,k){let D=f;do{let K=D.next.next;for(;K!==D.prev;){if(D.i!==K.i&&dC(D,K)){let N=od(D,K);return D=Zd(D,D.next),N=Zd(N,N.next),ql(D,u,d,b,w,k,0),void ql(N,u,d,b,w,k,0)}K=K.next}D=D.next}while(D!==f)}function _v(f,u){let d=f.x-u.x;return d===0&&(d=f.y-u.y,d===0)&&(d=(f.next.y-f.y)/(f.next.x-f.x)-(u.next.y-u.y)/(u.next.x-u.x)),d}function xv(f,u){const d=(function(w,k){let D=k;const K=w.x,N=w.y;let te,re=-1/0;if(ig(w,D))return D;do{if(ig(w,D.next))return D.next;if(N<=D.y&&N>=D.next.y&&D.next.y!==D.y){const Ge=D.x+(N-D.y)*(D.next.x-D.x)/(D.next.y-D.y);if(Ge<=K&&Ge>re&&(re=Ge,te=D.x<D.next.x?D:D.next,Ge===K))return te}D=D.next}while(D!==k);if(!te)return null;const Ae=te,Oe=te.x,De=te.y;let Ue=1/0;D=te;do{if(K>=D.x&&D.x>=Oe&&K!==D.x&&Ha(N<De?K:re,N,Oe,De,N<De?re:K,N,D.x,D.y)){const Ge=Math.abs(N-D.y)/(K-D.x);Yl(D,w)&&(Ge<Ue||Ge===Ue&&(D.x>te.x||D.x===te.x&&L1(te,D)))&&(te=D,Ue=Ge)}D=D.next}while(D!==Ae);return te})(f,u);if(!d)return u;const b=od(d,f);return Zd(b,b.next),Zd(d,d.next)}function L1(f,u){return Qr(f.prev,f,u.prev)<0&&Qr(u.next,f,f.next)<0}function F1(f,u,d,b,w){return(f=1431655765&((f=858993459&((f=252645135&((f=16711935&((f=(f-d)*w|0)|f<<8))|f<<4))|f<<2))|f<<1))|(u=1431655765&((u=858993459&((u=252645135&((u=16711935&((u=(u-b)*w|0)|u<<8))|u<<4))|u<<2))|u<<1))<<1}function Xd(f){let u=f,d=f;do(u.x<d.x||u.x===d.x&&u.y<d.y)&&(d=u),u=u.next;while(u!==f);return d}function Ha(f,u,d,b,w,k,D,K){return(w-D)*(u-K)>=(f-D)*(k-K)&&(f-D)*(b-K)>=(d-D)*(u-K)&&(d-D)*(k-K)>=(w-D)*(b-K)}function Qp(f,u,d,b,w,k,D,K){return!(f===D&&u===K)&&Ha(f,u,d,b,w,k,D,K)}function dC(f,u){return f.next.i!==u.i&&f.prev.i!==u.i&&!(function(d,b){let w=d;do{if(w.i!==d.i&&w.next.i!==d.i&&w.i!==b.i&&w.next.i!==b.i&&z1(w,w.next,d,b))return!0;w=w.next}while(w!==d);return!1})(f,u)&&(Yl(f,u)&&Yl(u,f)&&(function(d,b){let w=d,k=!1;const D=(d.x+b.x)/2,K=(d.y+b.y)/2;do w.y>K!=w.next.y>K&&w.next.y!==w.y&&D<(w.next.x-w.x)*(K-w.y)/(w.next.y-w.y)+w.x&&(k=!k),w=w.next;while(w!==d);return k})(f,u)&&(Qr(f.prev,f,u.prev)||Qr(f,u.prev,u))||ig(f,u)&&Qr(f.prev,f,f.next)>0&&Qr(u.prev,u,u.next)>0)}function Qr(f,u,d){return(u.y-f.y)*(d.x-u.x)-(u.x-f.x)*(d.y-u.y)}function ig(f,u){return f.x===u.x&&f.y===u.y}function z1(f,u,d,b){const w=_s(Qr(f,u,d)),k=_s(Qr(f,u,b)),D=_s(Qr(d,b,f)),K=_s(Qr(d,b,u));return w!==k&&D!==K||!(w!==0||!rg(f,d,u))||!(k!==0||!rg(f,b,u))||!(D!==0||!rg(d,f,b))||!(K!==0||!rg(d,u,b))}function rg(f,u,d){return u.x<=Math.max(f.x,d.x)&&u.x>=Math.min(f.x,d.x)&&u.y<=Math.max(f.y,d.y)&&u.y>=Math.min(f.y,d.y)}function _s(f){return f>0?1:f<0?-1:0}function Yl(f,u){return Qr(f.prev,f,f.next)<0?Qr(f,u,f.next)>=0&&Qr(f,f.prev,u)>=0:Qr(f,u,f.prev)<0||Qr(f,f.next,u)<0}function od(f,u){const d=j1(f.i,f.x,f.y),b=j1(u.i,u.x,u.y),w=f.next,k=u.prev;return f.next=u,u.prev=f,d.next=w,w.prev=d,b.next=d,d.prev=b,k.next=b,b.prev=k,b}function Mv(f,u,d,b){const w=j1(f,u,d);return b?(w.next=b.next,w.prev=b,b.next.prev=w,b.next=w):(w.prev=w,w.next=w),w}function qp(f){f.next.prev=f.prev,f.prev.next=f.next,f.prevZ&&(f.prevZ.nextZ=f.nextZ),f.nextZ&&(f.nextZ.prevZ=f.prevZ)}function j1(f,u,d){return{i:f,x:u,y:d,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class og{constructor(u,d){if(d>u)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=u,this._minGranularity=d}getGranularityForZoomLevel(u){return Math.max(Math.floor(this._baseZoomGranularity/(1<<u)),this._minGranularity,1)}}class Yp{constructor(u){this.fill=u.fill,this.line=u.line,this.tile=u.tile,this.stencil=u.stencil,this.circle=u.circle}}Yp.noSubdivision=new Yp({fill:new og(0,0),line:new og(0,0),tile:new og(0,0),stencil:new og(0,0),circle:1}),Vn("SubdivisionGranularityExpression",og),Vn("SubdivisionGranularitySetting",Yp);const xl=-32768,pc=32767;class fC{constructor(u,d){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=u,this._granularityCellSize=At/u,this._canonical=d}_getKey(u,d){return(u+=32768)<<16|d+32768}_vertexToIndex(u,d){if(u<-32768||d<-32768||u>32767||d>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const b=0|Math.round(u),w=0|Math.round(d),k=this._getKey(b,w);if(this._vertexDictionary.has(k))return this._vertexDictionary.get(k);const D=this._vertexBuffer.length/2;return this._vertexDictionary.set(k,D),this._vertexBuffer.push(b,w),D}_subdivideTrianglesScanline(u){if(this._granularity<2)return(function(w,k){const D=[];for(let K=0;K<k.length;K+=3){const N=k[K],te=k[K+1],re=k[K+2],Ae=w[2*N],Oe=w[2*N+1];(w[2*te]-Ae)*(w[2*re+1]-Oe)-(w[2*te+1]-Oe)*(w[2*re]-Ae)>0?(D.push(N),D.push(re),D.push(te)):(D.push(N),D.push(te),D.push(re))}return D})(this._vertexBuffer,u);const d=[],b=u.length;for(let w=0;w<b;w+=3){const k=[u[w+0],u[w+1],u[w+2]],D=[this._vertexBuffer[2*u[w+0]+0],this._vertexBuffer[2*u[w+0]+1],this._vertexBuffer[2*u[w+1]+0],this._vertexBuffer[2*u[w+1]+1],this._vertexBuffer[2*u[w+2]+0],this._vertexBuffer[2*u[w+2]+1]];let K=1/0,N=1/0,te=-1/0,re=-1/0;for(let Ge=0;Ge<3;Ge++){const He=D[2*Ge],st=D[2*Ge+1];K=Math.min(K,He),te=Math.max(te,He),N=Math.min(N,st),re=Math.max(re,st)}if(K===te||N===re)continue;const Ae=Math.floor(K/this._granularityCellSize),Oe=Math.ceil(te/this._granularityCellSize),De=Math.floor(N/this._granularityCellSize),Ue=Math.ceil(re/this._granularityCellSize);if(Ae!==Oe||De!==Ue)for(let Ge=De;Ge<Ue;Ge++){const He=this._scanlineGenerateVertexRingForCellRow(Ge,D,k);Jd(this._vertexBuffer,He,d)}else d.push(...k)}return d}_scanlineGenerateVertexRingForCellRow(u,d,b){const w=u*this._granularityCellSize,k=w+this._granularityCellSize,D=[];for(let K=0;K<3;K++){const N=d[2*K],te=d[2*K+1],re=d[2*(K+1)%6],Ae=d[(2*(K+1)+1)%6],Oe=d[2*(K+2)%6],De=d[(2*(K+2)+1)%6],Ue=re-N,Ge=Ae-te,He=Ue===0,st=Ge===0,Tt=(w-te)/Ge,dt=(k-te)/Ge,Ct=Math.min(Tt,dt),jt=Math.max(Tt,dt);if(!st&&(Ct>=1||jt<=0)||st&&(te<w||te>k)){Ae>=w&&Ae<=k&&D.push(b[(K+1)%3]);continue}!st&&Ct>0&&D.push(this._vertexToIndex(N+Ue*Ct,te+Ge*Ct));const Zt=N+Ue*Math.max(Ct,0),fn=N+Ue*Math.min(jt,1);He||this._generateIntraEdgeVertices(D,N,te,re,Ae,Zt,fn),!st&&jt<1&&D.push(this._vertexToIndex(N+Ue*jt,te+Ge*jt)),(st||Ae>=w&&Ae<=k)&&D.push(b[(K+1)%3]),!st&&(Ae<=w||Ae>=k)&&this._generateInterEdgeVertices(D,N,te,re,Ae,Oe,De,fn,w,k)}return D}_generateIntraEdgeVertices(u,d,b,w,k,D,K){const N=w-d,te=k-b,re=te===0,Ae=re?Math.min(d,w):Math.min(D,K),Oe=re?Math.max(d,w):Math.max(D,K),De=Math.floor(Ae/this._granularityCellSize)+1,Ue=Math.ceil(Oe/this._granularityCellSize)-1;if(re?d<w:D<K)for(let Ge=De;Ge<=Ue;Ge++){const He=Ge*this._granularityCellSize;u.push(this._vertexToIndex(He,b+te*(He-d)/N))}else for(let Ge=Ue;Ge>=De;Ge--){const He=Ge*this._granularityCellSize;u.push(this._vertexToIndex(He,b+te*(He-d)/N))}}_generateInterEdgeVertices(u,d,b,w,k,D,K,N,te,re){const Ae=k-b,Oe=D-w,De=K-k,Ue=(te-k)/De,Ge=(re-k)/De,He=Math.min(Ue,Ge),st=Math.max(Ue,Ge),Tt=w+Oe*He;let dt=Math.floor(Math.min(Tt,N)/this._granularityCellSize)+1,Ct=Math.ceil(Math.max(Tt,N)/this._granularityCellSize)-1,jt=N<Tt;const Zt=De===0;if(Zt&&(K===te||K===re))return;if(Zt||He>=1||st<=0){const Wn=b-K,Kn=D+(d-D)*Math.min((te-K)/Wn,(re-K)/Wn);dt=Math.floor(Math.min(Kn,N)/this._granularityCellSize)+1,Ct=Math.ceil(Math.max(Kn,N)/this._granularityCellSize)-1,jt=N<Kn}const fn=Ae>0?re:te;if(jt)for(let Wn=dt;Wn<=Ct;Wn++)u.push(this._vertexToIndex(Wn*this._granularityCellSize,fn));else for(let Wn=Ct;Wn>=dt;Wn--)u.push(this._vertexToIndex(Wn*this._granularityCellSize,fn))}_generateOutline(u){const d=[];for(const b of u){const w=$f(b,this._granularity,!0),k=this._pointArrayToIndices(w),D=[];for(let K=1;K<k.length;K++)D.push(k[K-1]),D.push(k[K]);d.push(D)}return d}_handlePoles(u){let d=!1,b=!1;this._canonical&&(this._canonical.y===0&&(d=!0),this._canonical.y===(1<<this._canonical.z)-1&&(b=!0)),(d||b)&&this._fillPoles(u,d,b)}_ensureNoPoleVertices(){const u=this._vertexBuffer;for(let d=0;d<u.length;d+=2){const b=u[d+1];b===xl&&(u[d+1]=-32767),b===pc&&(u[d+1]=32766)}}_generatePoleQuad(u,d,b,w,k,D){w>k!=(D===xl)?(u.push(d),u.push(b),u.push(this._vertexToIndex(w,D)),u.push(b),u.push(this._vertexToIndex(k,D)),u.push(this._vertexToIndex(w,D))):(u.push(b),u.push(d),u.push(this._vertexToIndex(w,D)),u.push(this._vertexToIndex(k,D)),u.push(b),u.push(this._vertexToIndex(w,D)))}_fillPoles(u,d,b){const w=this._vertexBuffer,k=At,D=u.length;for(let K=2;K<D;K+=3){const N=u[K-2],te=u[K-1],re=u[K],Ae=w[2*N],Oe=w[2*N+1],De=w[2*te],Ue=w[2*te+1],Ge=w[2*re],He=w[2*re+1];d&&(Oe===0&&Ue===0&&this._generatePoleQuad(u,N,te,Ae,De,xl),Ue===0&&He===0&&this._generatePoleQuad(u,te,re,De,Ge,xl),He===0&&Oe===0&&this._generatePoleQuad(u,re,N,Ge,Ae,xl)),b&&(Oe===k&&Ue===k&&this._generatePoleQuad(u,N,te,Ae,De,pc),Ue===k&&He===k&&this._generatePoleQuad(u,te,re,De,Ge,pc),He===k&&Oe===k&&this._generatePoleQuad(u,re,N,Ge,Ae,pc))}}_initializeVertices(u){for(let d=0;d<u.length;d+=2)this._vertexToIndex(u[d],u[d+1])}subdividePolygonInternal(u,d){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:b,holeIndices:w}=(function(K){const N=[],te=[];for(const re of K)if(re.length!==0){re!==K[0]&&N.push(te.length/2);for(let Ae=0;Ae<re.length;Ae++)te.push(re[Ae].x),te.push(re[Ae].y)}return{flattened:te,holeIndices:N}})(u);let k;this._initializeVertices(b);try{const K=(function(te,re,Ae=2){const Oe=re&&re.length,De=Oe?re[0]*Ae:te.length;let Ue=ng(te,0,De,Ae,!0);const Ge=[];if(!Ue||Ue.next===Ue.prev)return Ge;let He,st,Tt;if(Oe&&(Ue=(function(dt,Ct,jt,Zt){const fn=[];for(let Wn=0,Kn=Ct.length;Wn<Kn;Wn++){const Nn=ng(dt,Ct[Wn]*Zt,Wn<Kn-1?Ct[Wn+1]*Zt:dt.length,Zt,!1);Nn===Nn.next&&(Nn.steiner=!0),fn.push(Xd(Nn))}fn.sort(_v);for(let Wn=0;Wn<fn.length;Wn++)jt=xv(fn[Wn],jt);return jt})(te,re,Ue,Ae)),te.length>80*Ae){He=te[0],st=te[1];let dt=He,Ct=st;for(let jt=Ae;jt<De;jt+=Ae){const Zt=te[jt],fn=te[jt+1];Zt<He&&(He=Zt),fn<st&&(st=fn),Zt>dt&&(dt=Zt),fn>Ct&&(Ct=fn)}Tt=Math.max(dt-He,Ct-st),Tt=Tt!==0?32767/Tt:0}return ql(Ue,Ge,Ae,He,st,Tt,0),Ge})(b,w),N=this._convertIndices(b,K);k=this._subdivideTrianglesScanline(N)}catch(K){console.error(K)}let D=[];return d&&(D=this._generateOutline(u)),this._ensureNoPoleVertices(),this._handlePoles(k),{verticesFlattened:this._vertexBuffer,indicesTriangles:k,indicesLineList:D}}_convertIndices(u,d){const b=[];for(let w=0;w<d.length;w++)b.push(this._vertexToIndex(u[2*d[w]],u[2*d[w]+1]));return b}_pointArrayToIndices(u){const d=[];for(let b=0;b<u.length;b++){const w=u[b];d.push(this._vertexToIndex(w.x,w.y))}return d}}function Gs(f,u,d,b=!0){return new fC(d,u).subdividePolygonInternal(f,b)}function $f(f,u,d=!1){if(!f||f.length<1)return[];if(f.length<2)return[];const b=f[0],w=f[f.length-1],k=d&&(b.x!==w.x||b.y!==w.y);if(u<2)return k?[...f,f[0]]:[...f];const D=Math.floor(At/u),K=[];K.push(new c(f[0].x,f[0].y));const N=f.length,te=k?N:N-1;for(let re=0;re<te;re++){const Ae=f[re],Oe=re<N-1?f[re+1]:f[0],De=Ae.x,Ue=Ae.y,Ge=Oe.x,He=Oe.y,st=De!==Ge,Tt=Ue!==He;if(!st&&!Tt)continue;const dt=Ge-De,Ct=He-Ue,jt=Math.abs(dt),Zt=Math.abs(Ct);let fn=De,Wn=Ue;for(;;){const Nn=dt>0?(Math.floor(fn/D)+1)*D:(Math.ceil(fn/D)-1)*D,xi=Ct>0?(Math.floor(Wn/D)+1)*D:(Math.ceil(Wn/D)-1)*D,zn=Math.abs(fn-Nn),Gn=Math.abs(Wn-xi),an=Math.abs(fn-Ge),ji=Math.abs(Wn-He),er=st?zn/jt:Number.POSITIVE_INFINITY,Di=Tt?Gn/Zt:Number.POSITIVE_INFINITY;if((an<=zn||!st)&&(ji<=Gn||!Tt))break;if(er<Di&&st||!Tt){fn=Nn,Wn+=Ct*er;const hi=new c(fn,Math.round(Wn));K[K.length-1].x===hi.x&&K[K.length-1].y===hi.y||K.push(hi)}else{fn+=dt*Di,Wn=xi;const hi=new c(Math.round(fn),Wn);K[K.length-1].x===hi.x&&K[K.length-1].y===hi.y||K.push(hi)}}const Kn=new c(Ge,He);K[K.length-1].x===Kn.x&&K[K.length-1].y===Kn.y||K.push(Kn)}return K}function Jd(f,u,d){if(u.length===0)throw new Error("Subdivision vertex ring is empty.");let b=0,w=f[2*u[0]];for(let N=1;N<u.length;N++){const te=f[2*u[N]];te<w&&(w=te,b=N)}const k=u.length;let D=b,K=(D+1)%k;for(;;){const N=D-1>=0?D-1:k-1,te=(K+1)%k,re=f[2*u[N]],Ae=f[2*u[te]],Oe=f[2*u[D]],De=f[2*u[D]+1],Ue=f[2*u[K]+1];let Ge=!1;if(re<Ae)Ge=!0;else if(re>Ae)Ge=!1;else{const He=Ue-De,st=-(f[2*u[K]]-Oe),Tt=De<Ue?1:-1;((re-Oe)*He+(f[2*u[N]+1]-De)*st)*Tt>((Ae-Oe)*He+(f[2*u[te]+1]-De)*st)*Tt&&(Ge=!0)}if(Ge){const He=u[N],st=u[D],Tt=u[K];He!==st&&He!==Tt&&st!==Tt&&d.push(Tt,st,He),D--,D<0&&(D=k-1)}else{const He=u[te],st=u[D],Tt=u[K];He!==st&&He!==Tt&&st!==Tt&&d.push(Tt,st,He),K++,K>=k&&(K=0)}if(N===te)break}}function Vf(f,u,d,b,w,k,D,K,N){const te=w.length/2,re=D&&K&&N;if(te<Br.MAX_VERTEX_ARRAY_LENGTH){const Ae=u.prepareSegment(te,d,b),Oe=Ae.vertexLength;for(let Ge=0;Ge<k.length;Ge+=3)b.emplaceBack(Oe+k[Ge],Oe+k[Ge+1],Oe+k[Ge+2]);let De,Ue;Ae.vertexLength+=te,Ae.primitiveLength+=k.length/3,re&&(Ue=D.prepareSegment(te,d,K),De=Ue.vertexLength,Ue.vertexLength+=te);for(let Ge=0;Ge<w.length;Ge+=2)f(w[Ge],w[Ge+1]);if(re)for(let Ge=0;Ge<N.length;Ge++){const He=N[Ge];for(let st=1;st<He.length;st+=2)K.emplaceBack(De+He[st-1],De+He[st]);Ue.primitiveLength+=He.length/2}}else(function(Ae,Oe,De,Ue,Ge,He){const st=[];for(let Zt=0;Zt<Ue.length/2;Zt++)st.push(-1);const Tt={count:0};let dt=0,Ct=Ae.getOrCreateLatestSegment(Oe,De),jt=Ct.vertexLength;for(let Zt=2;Zt<Ge.length;Zt+=3){const fn=Ge[Zt-2],Wn=Ge[Zt-1],Kn=Ge[Zt];let Nn=st[fn]<dt,xi=st[Wn]<dt,zn=st[Kn]<dt;Ct.vertexLength+((Nn?1:0)+(xi?1:0)+(zn?1:0))>Br.MAX_VERTEX_ARRAY_LENGTH&&(Ct=Ae.createNewSegment(Oe,De),dt=Tt.count,Nn=!0,xi=!0,zn=!0,jt=0);const Gn=Wc(st,Ue,He,Tt,fn,Nn,Ct),an=Wc(st,Ue,He,Tt,Wn,xi,Ct),ji=Wc(st,Ue,He,Tt,Kn,zn,Ct);De.emplaceBack(jt+Gn-dt,jt+an-dt,jt+ji-dt),Ct.primitiveLength++}})(u,d,b,w,k,f),re&&(function(Ae,Oe,De,Ue,Ge,He){const st=[];for(let Zt=0;Zt<Ue.length/2;Zt++)st.push(-1);const Tt={count:0};let dt=0,Ct=Ae.getOrCreateLatestSegment(Oe,De),jt=Ct.vertexLength;for(let Zt=0;Zt<Ge.length;Zt++){const fn=Ge[Zt];for(let Wn=1;Wn<Ge[Zt].length;Wn+=2){const Kn=fn[Wn-1],Nn=fn[Wn];let xi=st[Kn]<dt,zn=st[Nn]<dt;Ct.vertexLength+((xi?1:0)+(zn?1:0))>Br.MAX_VERTEX_ARRAY_LENGTH&&(Ct=Ae.createNewSegment(Oe,De),dt=Tt.count,xi=!0,zn=!0,jt=0);const Gn=Wc(st,Ue,He,Tt,Kn,xi,Ct),an=Wc(st,Ue,He,Tt,Nn,zn,Ct);De.emplaceBack(jt+Gn-dt,jt+an-dt),Ct.primitiveLength++}}})(D,d,K,w,N,f),u.forceNewSegmentOnNextPrepare(),D?.forceNewSegmentOnNextPrepare()}function Wc(f,u,d,b,w,k,D){if(k){const K=b.count;return d(u[2*w],u[2*w+1]),f[w]=b.count,b.count++,D.vertexLength++,K}return f[w]}class S0{constructor(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map((d=>d.id)),this.index=u.index,this.hasDependencies=!1,this.patternFeatures=[],this.layoutVertexArray=new wt,this.indexArray=new Eo,this.indexArray2=new Wr,this.programConfigurations=new fA(u.layers,u.zoom),this.segments=new Br,this.segments2=new Br,this.stateDependentLayerIds=this.layers.filter((d=>d.isStateDependent())).map((d=>d.id))}populate(u,d,b){this.hasDependencies=Hd("fill",this.layers,d);const w=this.layers[0].layout.get("fill-sort-key"),k=!w.isConstant(),D=[];for(const{feature:K,id:N,index:te,sourceLayerIndex:re}of u){const Ae=this.layers[0]._featureFilter.needGeometry,Oe=Va(K,Ae);if(!this.layers[0]._featureFilter.filter(new To(this.zoom),Oe,b))continue;const De=k?w.evaluate(Oe,{},b,d.availableImages):void 0,Ue={id:N,properties:K.properties,type:K.type,sourceLayerIndex:re,index:te,geometry:Ae?Oe.geometry:Yd(K),patterns:{},sortKey:De};D.push(Ue)}k&&D.sort(((K,N)=>K.sortKey-N.sortKey));for(const K of D){const{geometry:N,index:te,sourceLayerIndex:re}=K;if(this.hasDependencies){const Ae=yh("fill",this.layers,K,{zoom:this.zoom},d);this.patternFeatures.push(Ae)}else this.addFeature(K,N,te,b,{},d.subdivisionGranularity);d.featureIndex.insert(u[te].feature,N,te,re,this.index)}}update(u,d,b){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,d,this.stateDependentLayers,{imagePositions:b})}addFeatures(u,d,b){for(const w of this.patternFeatures)this.addFeature(w,w.geometry,w.index,d,b,u.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,U1),this.indexBuffer=u.createIndexBuffer(this.indexArray),this.indexBuffer2=u.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(u,d,b,w,k,D){for(const K of Uf(d,500)){const N=Gs(K,w,D.fill.getGranularityForZoomLevel(w.z)),te=this.layoutVertexArray;Vf(((re,Ae)=>{te.emplaceBack(re,Ae)}),this.segments,this.layoutVertexArray,this.indexArray,N.verticesFlattened,N.indicesTriangles,this.segments2,this.indexArray2,N.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,b,{imagePositions:k,canonical:w})}}let N1,KA;Vn("FillBucket",S0,{omit:["layers","patternFeatures"]});var pC={get paint(){return KA=KA||new us({"fill-antialias":new ti(mt.paint_fill["fill-antialias"]),"fill-opacity":new Ci(mt.paint_fill["fill-opacity"]),"fill-color":new Ci(mt.paint_fill["fill-color"]),"fill-outline-color":new Ci(mt.paint_fill["fill-outline-color"]),"fill-translate":new ti(mt.paint_fill["fill-translate"]),"fill-translate-anchor":new ti(mt.paint_fill["fill-translate-anchor"]),"fill-pattern":new td(mt.paint_fill["fill-pattern"])})},get layout(){return N1=N1||new us({"fill-sort-key":new Ci(mt.layout_fill["fill-sort-key"])})}};class Hf extends cl{constructor(u,d){super(u,pC,d)}recalculate(u,d){super.recalculate(u,d);const b=this.paint._values["fill-outline-color"];b.value.kind==="constant"&&b.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(u){return new S0(u)}queryRadius(){return gh(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:u,geometry:d,transform:b,pixelsToTileUnits:w}){return I1(Yf(u,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-b.bearingInRadians,w),d)}isTileClipped(){return!0}}const E0=po([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),O0=po([{name:"a_centroid",components:2,type:"Int16"}],4),{members:sg}=E0;class $p{constructor(u,d,b,w,k){this.properties={},this.extent=b,this.type=0,this.id=void 0,this._pbf=u,this._geometry=-1,this._keys=w,this._values=k,u.readFields(mC,this,d)}loadGeometry(){const u=this._pbf;u.pos=this._geometry;const d=u.readVarint()+u.pos,b=[];let w,k=1,D=0,K=0,N=0;for(;u.pos<d;){if(D<=0){const te=u.readVarint();k=7&te,D=te>>3}if(D--,k===1||k===2)K+=u.readSVarint(),N+=u.readSVarint(),k===1&&(w&&b.push(w),w=[]),w&&w.push(new c(K,N));else{if(k!==7)throw new Error(`unknown command ${k}`);w&&w.push(w[0].clone())}}return w&&b.push(w),b}bbox(){const u=this._pbf;u.pos=this._geometry;const d=u.readVarint()+u.pos;let b=1,w=0,k=0,D=0,K=1/0,N=-1/0,te=1/0,re=-1/0;for(;u.pos<d;){if(w<=0){const Ae=u.readVarint();b=7&Ae,w=Ae>>3}if(w--,b===1||b===2)k+=u.readSVarint(),D+=u.readSVarint(),k<K&&(K=k),k>N&&(N=k),D<te&&(te=D),D>re&&(re=D);else if(b!==7)throw new Error(`unknown command ${b}`)}return[K,te,N,re]}toGeoJSON(u,d,b){const w=this.extent*Math.pow(2,b),k=this.extent*u,D=this.extent*d,K=this.loadGeometry();function N(Oe){return[360*(Oe.x+k)/w-180,360/Math.PI*Math.atan(Math.exp((1-2*(Oe.y+D)/w)*Math.PI))-90]}function te(Oe){return Oe.map(N)}let re;if(this.type===1){const Oe=[];for(const Ue of K)Oe.push(Ue[0]);const De=te(Oe);re=Oe.length===1?{type:"Point",coordinates:De[0]}:{type:"MultiPoint",coordinates:De}}else if(this.type===2){const Oe=K.map(te);re=Oe.length===1?{type:"LineString",coordinates:Oe[0]}:{type:"MultiLineString",coordinates:Oe}}else{if(this.type!==3)throw new Error("unknown feature type");{const Oe=(function(Ue){const Ge=Ue.length;if(Ge<=1)return[Ue];const He=[];let st,Tt;for(let dt=0;dt<Ge;dt++){const Ct=B0(Ue[dt]);Ct!==0&&(Tt===void 0&&(Tt=Ct<0),Tt===Ct<0?(st&&He.push(st),st=[Ue[dt]]):st&&st.push(Ue[dt]))}return st&&He.push(st),He})(K),De=[];for(const Ue of Oe)De.push(Ue.map(te));re=De.length===1?{type:"Polygon",coordinates:De[0]}:{type:"MultiPolygon",coordinates:De}}}const Ae={type:"Feature",geometry:re,properties:this.properties};return this.id!=null&&(Ae.id=this.id),Ae}}function mC(f,u,d){f===1?u.id=d.readVarint():f===2?(function(b,w){const k=b.readVarint()+b.pos;for(;b.pos<k;){const D=w._keys[b.readVarint()],K=w._values[b.readVarint()];w.properties[D]=K}})(d,u):f===3?u.type=d.readVarint():f===4&&(u._geometry=d.pos)}function B0(f){let u=0;for(let d,b,w=0,k=f.length,D=k-1;w<k;D=w++)d=f[w],b=f[D],u+=(b.x-d.x)*(d.y+b.y);return u}$p.types=["Unknown","Point","LineString","Polygon"];class wv{constructor(u,d){this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=u,this._keys=[],this._values=[],this._features=[],u.readFields(G1,this,d),this.length=this._features.length}feature(u){if(u<0||u>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[u];const d=this._pbf.readVarint()+this._pbf.pos;return new $p(this._pbf,d,this.extent,this._keys,this._values)}}function G1(f,u,d){f===15?u.version=d.readVarint():f===1?u.name=d.readString():f===5?u.extent=d.readVarint():f===2?u._features.push(d.pos):f===3?u._keys.push(d.readString()):f===4&&u._values.push((function(b){let w=null;const k=b.readVarint()+b.pos;for(;b.pos<k;){const D=b.readVarint()>>3;w=D===1?b.readString():D===2?b.readFloat():D===3?b.readDouble():D===4?b.readVarint64():D===5?b.readVarint():D===6?b.readSVarint():D===7?b.readBoolean():null}if(w==null)throw new Error("unknown feature value");return w})(d))}class Sv{constructor(u,d){this.layers=u.readFields(Jx,{},d)}}function Jx(f,u,d){if(f===3){const b=new wv(d,d.readVarint()+d.pos);b.length&&(u[b.name]=b)}}const Ev=Math.pow(2,13);function Mo(f,u,d,b,w,k,D,K){f.emplaceBack(u,d,2*Math.floor(b*Ev)+D,w*Ev*2,k*Ev*2,Math.round(K))}class hs{constructor(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map((d=>d.id)),this.index=u.index,this.hasDependencies=!1,this.layoutVertexArray=new Wt,this.centroidVertexArray=new xt,this.indexArray=new Eo,this.programConfigurations=new fA(u.layers,u.zoom),this.segments=new Br,this.stateDependentLayerIds=this.layers.filter((d=>d.isStateDependent())).map((d=>d.id))}populate(u,d,b){this.features=[],this.hasDependencies=Hd("fill-extrusion",this.layers,d);for(const{feature:w,id:k,index:D,sourceLayerIndex:K}of u){const N=this.layers[0]._featureFilter.needGeometry,te=Va(w,N);if(!this.layers[0]._featureFilter.filter(new To(this.zoom),te,b))continue;const re={id:k,sourceLayerIndex:K,index:D,geometry:N?te.geometry:Yd(w),properties:w.properties,type:w.type,patterns:{}};this.hasDependencies?this.features.push(yh("fill-extrusion",this.layers,re,{zoom:this.zoom},d)):this.addFeature(re,re.geometry,D,b,{},d.subdivisionGranularity),d.featureIndex.insert(w,re.geometry,D,K,this.index,!0)}}addFeatures(u,d,b){for(const w of this.features){const{geometry:k}=w;this.addFeature(w,k,w.index,d,b,u.subdivisionGranularity)}}update(u,d,b){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,d,this.stateDependentLayers,{imagePositions:b})}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,sg),this.centroidVertexBuffer=u.createVertexBuffer(this.centroidVertexArray,O0.members,!0),this.indexBuffer=u.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(u,d,b,w,k,D){for(const K of Uf(d,500)){const N={x:0,y:0,sampleCount:0},te=this.layoutVertexArray.length;this.processPolygon(N,w,u,K,D);const re=this.layoutVertexArray.length-te,Ae=Math.floor(N.x/N.sampleCount),Oe=Math.floor(N.y/N.sampleCount);for(let De=0;De<re;De++)this.centroidVertexArray.emplaceBack(Ae,Oe)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,b,{imagePositions:k,canonical:w})}processPolygon(u,d,b,w,k){if(w.length<1||ts(w[0]))return;for(const Ae of w)Ae.length!==0&&uo(u,Ae);const D={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},K=k.fill.getGranularityForZoomLevel(d.z),N=$p.types[b.type]==="Polygon";for(const Ae of w){if(Ae.length===0||ts(Ae))continue;const Oe=$f(Ae,K,N);this._generateSideFaces(Oe,D)}if(!N)return;const te=Gs(w,d,K,!1),re=this.layoutVertexArray;Vf(((Ae,Oe)=>{Mo(re,Ae,Oe,0,0,1,1,0)}),this.segments,this.layoutVertexArray,this.indexArray,te.verticesFlattened,te.indicesTriangles)}_generateSideFaces(u,d){let b=0;for(let w=1;w<u.length;w++){const k=u[w],D=u[w-1];if(mo(k,D))continue;d.segment.vertexLength+4>Br.MAX_VERTEX_ARRAY_LENGTH&&(d.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const K=k.sub(D)._perp()._unit(),N=D.dist(k);b+N>32768&&(b=0),Mo(this.layoutVertexArray,k.x,k.y,K.x,K.y,0,0,b),Mo(this.layoutVertexArray,k.x,k.y,K.x,K.y,0,1,b),b+=N,Mo(this.layoutVertexArray,D.x,D.y,K.x,K.y,0,0,b),Mo(this.layoutVertexArray,D.x,D.y,K.x,K.y,0,1,b);const te=d.segment.vertexLength;this.indexArray.emplaceBack(te,te+2,te+1),this.indexArray.emplaceBack(te+1,te+2,te+3),d.segment.vertexLength+=4,d.segment.primitiveLength+=2}}}function uo(f,u){for(let d=0;d<u.length;d++){const b=u[d];d===u.length-1&&u[0].x===b.x&&u[0].y===b.y||(f.x+=b.x,f.y+=b.y,f.sampleCount++)}}function mo(f,u){return f.x===u.x&&(f.x<0||f.x>At)||f.y===u.y&&(f.y<0||f.y>At)}function ts(f){return f.every((u=>u.x<0))||f.every((u=>u.x>At))||f.every((u=>u.y<0))||f.every((u=>u.y>At))}let Qc;Vn("FillExtrusionBucket",hs,{omit:["layers","features"]});var Zf={get paint(){return Qc=Qc||new us({"fill-extrusion-opacity":new ti(mt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Ci(mt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new ti(mt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new ti(mt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new td(mt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Ci(mt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Ci(mt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new ti(mt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class ag extends cl{constructor(u,d){super(u,Zf,d)}createBucket(u){return new hs(u)}queryRadius(){return gh(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:u,feature:d,featureState:b,geometry:w,transform:k,pixelsToTileUnits:D,pixelPosMatrix:K}){const N=Yf(u,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-k.bearingInRadians,D),te=this.paint.get("fill-extrusion-height").evaluate(d,b),re=this.paint.get("fill-extrusion-base").evaluate(d,b),Ae=(function(De,Ue){const Ge=[];for(const He of De){const st=[He.x,He.y,0,1];Re(st,st,Ue),Ge.push(new c(st[0]/st[3],st[1]/st[3]))}return Ge})(N,K),Oe=(function(De,Ue,Ge,He){const st=[],Tt=[],dt=He[8]*Ue,Ct=He[9]*Ue,jt=He[10]*Ue,Zt=He[11]*Ue,fn=He[8]*Ge,Wn=He[9]*Ge,Kn=He[10]*Ge,Nn=He[11]*Ge;for(const xi of De){const zn=[],Gn=[];for(const an of xi){const ji=an.x,er=an.y,Di=He[0]*ji+He[4]*er+He[12],hi=He[1]*ji+He[5]*er+He[13],Tr=He[2]*ji+He[6]*er+He[14],xs=He[3]*ji+He[7]*er+He[15],xa=Tr+jt,wl=xs+Zt,vc=Di+fn,Fa=hi+Wn,Qs=Tr+Kn,Ro=xs+Nn,ha=new c((Di+dt)/wl,(hi+Ct)/wl);ha.z=xa/wl,zn.push(ha);const Ma=new c(vc/Ro,Fa/Ro);Ma.z=Qs/Ro,Gn.push(Ma)}st.push(zn),Tt.push(Gn)}return[st,Tt]})(w,re,te,K);return(function(De,Ue,Ge){let He=1/0;I1(Ge,Ue)&&(He=LA(Ge,Ue[0]));for(let st=0;st<Ue.length;st++){const Tt=Ue[st],dt=De[st];for(let Ct=0;Ct<Tt.length-1;Ct++){const jt=Tt[Ct],Zt=[jt,Tt[Ct+1],dt[Ct+1],dt[Ct],jt];Zm(Ge,Zt)&&(He=Math.min(He,LA(Ge,Zt)))}}return He!==1/0&&He})(Oe[0],Oe[1],Ae)}}function Vp(f,u){return f.x*u.x+f.y*u.y}function LA(f,u){if(f.length===1){let d=0;const b=u[d++];let w;for(;!w||b.equals(w);)if(w=u[d++],!w)return 1/0;for(;d<u.length;d++){const k=u[d],D=f[0],K=w.sub(b),N=k.sub(b),te=D.sub(b),re=Vp(K,K),Ae=Vp(K,N),Oe=Vp(N,N),De=Vp(te,K),Ue=Vp(te,N),Ge=re*Oe-Ae*Ae,He=(Oe*De-Ae*Ue)/Ge,st=(re*Ue-Ae*De)/Ge,Tt=b.z*(1-He-st)+w.z*He+k.z*st;if(isFinite(Tt))return Tt}return 1/0}{let d=1/0;for(const b of u)d=Math.min(d,b.z);return d}}const _a=po([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Xf}=_a,Hp=po([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Ov}=Hp,pA=Math.cos(Math.PI/180*37.5),Zp=Math.pow(2,14)/.5;class Xp{constructor(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map((d=>d.id)),this.index=u.index,this.hasDependencies=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((d=>{this.gradients[d.id]={}})),this.layoutVertexArray=new Lt,this.layoutVertexArray2=new Nt,this.indexArray=new Eo,this.programConfigurations=new fA(u.layers,u.zoom),this.segments=new Br,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((d=>d.isStateDependent())).map((d=>d.id))}populate(u,d,b){this.hasDependencies=Hd("line",this.layers,d)||this.hasLineDasharray(this.layers);const w=this.layers[0].layout.get("line-sort-key"),k=!w.isConstant(),D=[];for(const{feature:K,id:N,index:te,sourceLayerIndex:re}of u){const Ae=this.layers[0]._featureFilter.needGeometry,Oe=Va(K,Ae);if(!this.layers[0]._featureFilter.filter(new To(this.zoom),Oe,b))continue;const De=k?w.evaluate(Oe,{},b):void 0,Ue={id:N,properties:K.properties,type:K.type,sourceLayerIndex:re,index:te,geometry:Ae?Oe.geometry:Yd(K),patterns:{},dashes:{},sortKey:De};D.push(Ue)}k&&D.sort(((K,N)=>K.sortKey-N.sortKey));for(const K of D){const{geometry:N,index:te,sourceLayerIndex:re}=K;this.hasDependencies?(Hd("line",this.layers,d)?yh("line",this.layers,K,{zoom:this.zoom},d):this.hasLineDasharray(this.layers)&&this.addLineDashDependencies(this.layers,K,this.zoom,d),this.patternFeatures.push(K)):this.addFeature(K,N,te,b,{},{},d.subdivisionGranularity),d.featureIndex.insert(u[te].feature,N,te,re,this.index)}}update(u,d,b,w){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,d,this.stateDependentLayers,{imagePositions:b,dashPositions:w})}addFeatures(u,d,b,w){for(const k of this.patternFeatures)this.addFeature(k,k.geometry,k.index,d,b,w,u.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=u.createVertexBuffer(this.layoutVertexArray2,Ov)),this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,Xf),this.indexBuffer=u.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(u){if(u.properties&&Object.prototype.hasOwnProperty.call(u.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(u.properties,"mapbox_clip_end"))return{start:+u.properties.mapbox_clip_start,end:+u.properties.mapbox_clip_end}}addFeature(u,d,b,w,k,D,K){const N=this.layers[0].layout,te=N.get("line-join").evaluate(u,{}),re=N.get("line-cap"),Ae=N.get("line-miter-limit"),Oe=N.get("line-round-limit");this.lineClips=this.lineFeatureClips(u);for(const De of d)this.addLine(De,u,te,re,Ae,Oe,w,K);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,b,{imagePositions:k,dashPositions:D,canonical:w})}addLine(u,d,b,w,k,D,K,N){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,u=$f(u,K?N.line.getGranularityForZoomLevel(K.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let dt=0;dt<u.length-1;dt++)this.totalDistance+=u[dt].dist(u[dt+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const te=$p.types[d.type]==="Polygon";let re=u.length;for(;re>=2&&u[re-1].equals(u[re-2]);)re--;let Ae=0;for(;Ae<re-1&&u[Ae].equals(u[Ae+1]);)Ae++;if(re<(te?3:2))return;b==="bevel"&&(k=1.05);const Oe=this.overscaling<=16?122880/(512*this.overscaling):0,De=this.segments.prepareSegment(10*re,this.layoutVertexArray,this.indexArray);let Ue,Ge,He,st,Tt;this.e1=this.e2=-1,te&&(Ue=u[re-2],Tt=u[Ae].sub(Ue)._unit()._perp());for(let dt=Ae;dt<re;dt++){if(He=dt===re-1?te?u[Ae+1]:void 0:u[dt+1],He&&u[dt].equals(He))continue;Tt&&(st=Tt),Ue&&(Ge=Ue),Ue=u[dt],Tt=He?He.sub(Ue)._unit()._perp():st,st=st||Tt;let Ct=st.add(Tt);Ct.x===0&&Ct.y===0||Ct._unit();const jt=st.x*Tt.x+st.y*Tt.y,Zt=Ct.x*Tt.x+Ct.y*Tt.y,fn=Zt!==0?1/Zt:1/0,Wn=2*Math.sqrt(2-2*Zt),Kn=Zt<pA&&Ge&&He,Nn=st.x*Tt.y-st.y*Tt.x>0;if(Kn&&dt>Ae){const Gn=Ue.dist(Ge);if(Gn>2*Oe){const an=Ue.sub(Ue.sub(Ge)._mult(Oe/Gn)._round());this.updateDistance(Ge,an),this.addCurrentVertex(an,st,0,0,De),Ge=an}}const xi=Ge&&He;let zn=xi?b:te?"butt":w;if(xi&&zn==="round"&&(fn<D?zn="miter":fn<=2&&(zn="fakeround")),zn==="miter"&&fn>k&&(zn="bevel"),zn==="bevel"&&(fn>2&&(zn="flipbevel"),fn<k&&(zn="miter")),Ge&&this.updateDistance(Ge,Ue),zn==="miter")Ct._mult(fn),this.addCurrentVertex(Ue,Ct,0,0,De);else if(zn==="flipbevel"){if(fn>100)Ct=Tt.mult(-1);else{const Gn=fn*st.add(Tt).mag()/st.sub(Tt).mag();Ct._perp()._mult(Gn*(Nn?-1:1))}this.addCurrentVertex(Ue,Ct,0,0,De),this.addCurrentVertex(Ue,Ct.mult(-1),0,0,De)}else if(zn==="bevel"||zn==="fakeround"){const Gn=-Math.sqrt(fn*fn-1),an=Nn?Gn:0,ji=Nn?0:Gn;if(Ge&&this.addCurrentVertex(Ue,st,an,ji,De),zn==="fakeround"){const er=Math.round(180*Wn/Math.PI/20);for(let Di=1;Di<er;Di++){let hi=Di/er;if(hi!==.5){const xs=hi-.5;hi+=hi*xs*(hi-1)*((1.0904+jt*(jt*(3.55645-1.43519*jt)-3.2452))*xs*xs+(.848013+jt*(.215638*jt-1.06021)))}const Tr=Tt.sub(st)._mult(hi)._add(st)._unit()._mult(Nn?-1:1);this.addHalfVertex(Ue,Tr.x,Tr.y,!1,Nn,0,De)}}He&&this.addCurrentVertex(Ue,Tt,-an,-ji,De)}else if(zn==="butt")this.addCurrentVertex(Ue,Ct,0,0,De);else if(zn==="square"){const Gn=Ge?1:-1;this.addCurrentVertex(Ue,Ct,Gn,Gn,De)}else zn==="round"&&(Ge&&(this.addCurrentVertex(Ue,st,0,0,De),this.addCurrentVertex(Ue,st,1,1,De,!0)),He&&(this.addCurrentVertex(Ue,Tt,-1,-1,De,!0),this.addCurrentVertex(Ue,Tt,0,0,De)));if(Kn&&dt<re-1){const Gn=Ue.dist(He);if(Gn>2*Oe){const an=Ue.add(He.sub(Ue)._mult(Oe/Gn)._round());this.updateDistance(Ue,an),this.addCurrentVertex(an,Tt,0,0,De),Ue=an}}}}addCurrentVertex(u,d,b,w,k,D=!1){const K=d.y*w-d.x,N=-d.y-d.x*w;this.addHalfVertex(u,d.x+d.y*b,d.y-d.x*b,D,!1,b,k),this.addHalfVertex(u,K,N,D,!0,-w,k),this.distance>Zp/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(u,d,b,w,k,D))}addHalfVertex({x:u,y:d},b,w,k,D,K,N){const te=.5*(this.lineClips?this.scaledDistance*(Zp-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((u<<1)+(k?1:0),(d<<1)+(D?1:0),Math.round(63*b)+128,Math.round(63*w)+128,1+(K===0?0:K<0?-1:1)|(63&te)<<2,te>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const re=N.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,re,this.e2),N.primitiveLength++),D?this.e2=re:this.e1=re}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(u,d){this.distance+=u.dist(d),this.updateScaledDistance()}hasLineDasharray(u){for(const d of u){const b=d.paint.get("line-dasharray");if(b&&!b.isConstant())return!0}return!1}addLineDashDependencies(u,d,b,w){for(const k of u){const D=k.paint.get("line-dasharray");if(!D||D.value.kind==="constant")continue;const K=k.layout.get("line-cap")==="round",N={dasharray:D.value.evaluate({zoom:b-1},d,{}),round:K},te={dasharray:D.value.evaluate({zoom:b},d,{}),round:K},re={dasharray:D.value.evaluate({zoom:b+1},d,{}),round:K},Ae=`${N.dasharray.join(",")},${N.round}`,Oe=`${te.dasharray.join(",")},${te.round}`,De=`${re.dasharray.join(",")},${re.round}`;w.dashDependencies[Ae]=N,w.dashDependencies[Oe]=te,w.dashDependencies[De]=re,d.dashes[k.id]={min:Ae,mid:Oe,max:De}}}}let mc,W1;Vn("LineBucket",Xp,{omit:["layers","patternFeatures"]});var lg={get paint(){return W1=W1||new us({"line-opacity":new Ci(mt.paint_line["line-opacity"]),"line-color":new Ci(mt.paint_line["line-color"]),"line-translate":new ti(mt.paint_line["line-translate"]),"line-translate-anchor":new ti(mt.paint_line["line-translate-anchor"]),"line-width":new Ci(mt.paint_line["line-width"]),"line-gap-width":new Ci(mt.paint_line["line-gap-width"]),"line-offset":new Ci(mt.paint_line["line-offset"]),"line-blur":new Ci(mt.paint_line["line-blur"]),"line-dasharray":new td(mt.paint_line["line-dasharray"]),"line-pattern":new td(mt.paint_line["line-pattern"]),"line-gradient":new nd(mt.paint_line["line-gradient"])})},get layout(){return mc=mc||new us({"line-cap":new ti(mt.layout_line["line-cap"]),"line-join":new Ci(mt.layout_line["line-join"]),"line-miter-limit":new ti(mt.layout_line["line-miter-limit"]),"line-round-limit":new ti(mt.layout_line["line-round-limit"]),"line-sort-key":new Ci(mt.layout_line["line-sort-key"])})}};class gC extends Ci{possiblyEvaluate(u,d){return d=new To(Math.floor(d.zoom),{now:d.now,fadeDuration:d.fadeDuration,zoomHistory:d.zoomHistory,transition:d.transition}),super.possiblyEvaluate(u,d)}evaluate(u,d,b,w){return d=Ke({},d,{zoom:Math.floor(d.zoom)}),super.evaluate(u,d,b,w)}}let sd;class Q1 extends cl{constructor(u,d){super(u,lg,d),this.gradientVersion=0,sd||(sd=new gC(lg.paint.properties["line-width"].specification),sd.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(u){if(u==="line-gradient"){const d=this.gradientExpression();this.stepInterpolant=!!(function(b){return b._styleExpression!==void 0})(d)&&d._styleExpression.expression instanceof Os,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(u,d){super.recalculate(u,d),this.paint._values["line-floorwidth"]=sd.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,u)}createBucket(u){return new Xp(u)}queryRadius(u){const d=u,b=ef($d("line-width",this,d),$d("line-gap-width",this,d)),w=$d("line-offset",this,d);return b/2+Math.abs(w)+gh(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:u,feature:d,featureState:b,geometry:w,transform:k,pixelsToTileUnits:D}){const K=Yf(u,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-k.bearingInRadians,D),N=D/2*ef(this.paint.get("line-width").evaluate(d,b),this.paint.get("line-gap-width").evaluate(d,b)),te=this.paint.get("line-offset").evaluate(d,b);return te&&(w=(function(re,Ae){const Oe=[];for(let De=0;De<re.length;De++){const Ue=re[De],Ge=[];for(let He=0;He<Ue.length;He++){const st=Ue[He-1],Tt=Ue[He],dt=Ue[He+1],Ct=He===0?new c(0,0):Tt.sub(st)._unit()._perp(),jt=He===Ue.length-1?new c(0,0):dt.sub(Tt)._unit()._perp(),Zt=Ct._add(jt)._unit(),fn=Zt.x*jt.x+Zt.y*jt.y;fn!==0&&Zt._mult(1/fn),Ge.push(Zt._mult(Ae)._add(Tt))}Oe.push(Ge)}return Oe})(w,te*D)),(function(re,Ae,Oe){for(let De=0;De<Ae.length;De++){const Ue=Ae[De];if(re.length>=3){for(let Ge=0;Ge<Ue.length;Ge++)if(Qi(re,Ue[Ge]))return!0}if(rd(re,Ue,Oe))return!0}return!1})(K,w,N)}isTileClipped(){return!0}}function ef(f,u){return u>0?u+2*f:f}const Ml=po([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Jf=po([{name:"a_projected_pos",components:3,type:"Float32"}],4);po([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const ug=po([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);po([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const ad=po([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Bv=po([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Iv(f,u,d){return f.sections.forEach((b=>{b.text=(function(w,k,D){const K=k.layout.get("text-transform").evaluate(D,{});return K==="uppercase"?w=w.toLocaleUpperCase():K==="lowercase"&&(w=w.toLocaleLowerCase()),bl.applyArabicShaping&&(w=bl.applyArabicShaping(w)),w})(b.text,u,d)})),f}po([{name:"triangle",components:3,type:"Uint16"}]),po([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),po([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),po([{type:"Float32",name:"offsetX"}]),po([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),po([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const cg={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var Aa=24;const I0=4294967296,qc=1/I0,kv=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");class zu{constructor(u=new Uint8Array(16)){this.buf=ArrayBuffer.isView(u)?u:new Uint8Array(u),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(u,d,b=this.length){for(;this.pos<b;){const w=this.readVarint(),k=w>>3,D=this.pos;this.type=7&w,u(k,d,this),this.pos===D&&this.skip(w)}return d}readMessage(u,d){return this.readFields(u,d,this.readVarint()+this.pos)}readFixed32(){const u=this.dataView.getUint32(this.pos,!0);return this.pos+=4,u}readSFixed32(){const u=this.dataView.getInt32(this.pos,!0);return this.pos+=4,u}readFixed64(){const u=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*I0;return this.pos+=8,u}readSFixed64(){const u=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*I0;return this.pos+=8,u}readFloat(){const u=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,u}readDouble(){const u=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,u}readVarint(u){const d=this.buf;let b,w;return w=d[this.pos++],b=127&w,w<128?b:(w=d[this.pos++],b|=(127&w)<<7,w<128?b:(w=d[this.pos++],b|=(127&w)<<14,w<128?b:(w=d[this.pos++],b|=(127&w)<<21,w<128?b:(w=d[this.pos],b|=(15&w)<<28,(function(k,D,K){const N=K.buf;let te,re;if(re=N[K.pos++],te=(112&re)>>4,re<128||(re=N[K.pos++],te|=(127&re)<<3,re<128)||(re=N[K.pos++],te|=(127&re)<<10,re<128)||(re=N[K.pos++],te|=(127&re)<<17,re<128)||(re=N[K.pos++],te|=(127&re)<<24,re<128)||(re=N[K.pos++],te|=(1&re)<<31,re<128))return Jp(k,te,D);throw new Error("Expected varint not more than 10 bytes")})(b,u,this)))))}readVarint64(){return this.readVarint(!0)}readSVarint(){const u=this.readVarint();return u%2==1?(u+1)/-2:u/2}readBoolean(){return!!this.readVarint()}readString(){const u=this.readVarint()+this.pos,d=this.pos;return this.pos=u,u-d>=12&&kv?kv.decode(this.buf.subarray(d,u)):(function(b,w,k){let D="",K=w;for(;K<k;){const N=b[K];let te,re,Ae,Oe=null,De=N>239?4:N>223?3:N>191?2:1;if(K+De>k)break;De===1?N<128&&(Oe=N):De===2?(te=b[K+1],(192&te)==128&&(Oe=(31&N)<<6|63&te,Oe<=127&&(Oe=null))):De===3?(te=b[K+1],re=b[K+2],(192&te)==128&&(192&re)==128&&(Oe=(15&N)<<12|(63&te)<<6|63&re,(Oe<=2047||Oe>=55296&&Oe<=57343)&&(Oe=null))):De===4&&(te=b[K+1],re=b[K+2],Ae=b[K+3],(192&te)==128&&(192&re)==128&&(192&Ae)==128&&(Oe=(15&N)<<18|(63&te)<<12|(63&re)<<6|63&Ae,(Oe<=65535||Oe>=1114112)&&(Oe=null))),Oe===null?(Oe=65533,De=1):Oe>65535&&(Oe-=65536,D+=String.fromCharCode(Oe>>>10&1023|55296),Oe=56320|1023&Oe),D+=String.fromCharCode(Oe),K+=De}return D})(this.buf,d,u)}readBytes(){const u=this.readVarint()+this.pos,d=this.buf.subarray(this.pos,u);return this.pos=u,d}readPackedVarint(u=[],d){const b=this.readPackedEnd();for(;this.pos<b;)u.push(this.readVarint(d));return u}readPackedSVarint(u=[]){const d=this.readPackedEnd();for(;this.pos<d;)u.push(this.readSVarint());return u}readPackedBoolean(u=[]){const d=this.readPackedEnd();for(;this.pos<d;)u.push(this.readBoolean());return u}readPackedFloat(u=[]){const d=this.readPackedEnd();for(;this.pos<d;)u.push(this.readFloat());return u}readPackedDouble(u=[]){const d=this.readPackedEnd();for(;this.pos<d;)u.push(this.readDouble());return u}readPackedFixed32(u=[]){const d=this.readPackedEnd();for(;this.pos<d;)u.push(this.readFixed32());return u}readPackedSFixed32(u=[]){const d=this.readPackedEnd();for(;this.pos<d;)u.push(this.readSFixed32());return u}readPackedFixed64(u=[]){const d=this.readPackedEnd();for(;this.pos<d;)u.push(this.readFixed64());return u}readPackedSFixed64(u=[]){const d=this.readPackedEnd();for(;this.pos<d;)u.push(this.readSFixed64());return u}readPackedEnd(){return this.type===2?this.readVarint()+this.pos:this.pos+1}skip(u){const d=7&u;if(d===0)for(;this.buf[this.pos++]>127;);else if(d===2)this.pos=this.readVarint()+this.pos;else if(d===5)this.pos+=4;else{if(d!==1)throw new Error(`Unimplemented type: ${d}`);this.pos+=8}}writeTag(u,d){this.writeVarint(u<<3|d)}realloc(u){let d=this.length||16;for(;d<this.pos+u;)d*=2;if(d!==this.length){const b=new Uint8Array(d);b.set(this.buf),this.buf=b,this.dataView=new DataView(b.buffer),this.length=d}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(u){this.realloc(4),this.dataView.setInt32(this.pos,u,!0),this.pos+=4}writeSFixed32(u){this.realloc(4),this.dataView.setInt32(this.pos,u,!0),this.pos+=4}writeFixed64(u){this.realloc(8),this.dataView.setInt32(this.pos,-1&u,!0),this.dataView.setInt32(this.pos+4,Math.floor(u*qc),!0),this.pos+=8}writeSFixed64(u){this.realloc(8),this.dataView.setInt32(this.pos,-1&u,!0),this.dataView.setInt32(this.pos+4,Math.floor(u*qc),!0),this.pos+=8}writeVarint(u){(u=+u||0)>268435455||u<0?(function(d,b){let w,k;if(d>=0?(w=d%4294967296|0,k=d/4294967296|0):(w=~(-d%4294967296),k=~(-d/4294967296),4294967295^w?w=w+1|0:(w=0,k=k+1|0)),d>=18446744073709552e3||d<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");b.realloc(10),(function(D,K,N){N.buf[N.pos++]=127&D|128,D>>>=7,N.buf[N.pos++]=127&D|128,D>>>=7,N.buf[N.pos++]=127&D|128,D>>>=7,N.buf[N.pos++]=127&D|128,N.buf[N.pos]=127&(D>>>=7)})(w,0,b),(function(D,K){const N=(7&D)<<4;K.buf[K.pos++]|=N|((D>>>=3)?128:0),D&&(K.buf[K.pos++]=127&D|((D>>>=7)?128:0),D&&(K.buf[K.pos++]=127&D|((D>>>=7)?128:0),D&&(K.buf[K.pos++]=127&D|((D>>>=7)?128:0),D&&(K.buf[K.pos++]=127&D|((D>>>=7)?128:0),D&&(K.buf[K.pos++]=127&D)))))})(k,b)})(u,this):(this.realloc(4),this.buf[this.pos++]=127&u|(u>127?128:0),u<=127||(this.buf[this.pos++]=127&(u>>>=7)|(u>127?128:0),u<=127||(this.buf[this.pos++]=127&(u>>>=7)|(u>127?128:0),u<=127||(this.buf[this.pos++]=u>>>7&127))))}writeSVarint(u){this.writeVarint(u<0?2*-u-1:2*u)}writeBoolean(u){this.writeVarint(+u)}writeString(u){u=String(u),this.realloc(4*u.length),this.pos++;const d=this.pos;this.pos=(function(w,k,D){for(let K,N,te=0;te<k.length;te++){if(K=k.charCodeAt(te),K>55295&&K<57344){if(!N){K>56319||te+1===k.length?(w[D++]=239,w[D++]=191,w[D++]=189):N=K;continue}if(K<56320){w[D++]=239,w[D++]=191,w[D++]=189,N=K;continue}K=N-55296<<10|K-56320|65536,N=null}else N&&(w[D++]=239,w[D++]=191,w[D++]=189,N=null);K<128?w[D++]=K:(K<2048?w[D++]=K>>6|192:(K<65536?w[D++]=K>>12|224:(w[D++]=K>>18|240,w[D++]=K>>12&63|128),w[D++]=K>>6&63|128),w[D++]=63&K|128)}return D})(this.buf,u,this.pos);const b=this.pos-d;b>=128&&Tv(d,b,this),this.pos=d-1,this.writeVarint(b),this.pos+=b}writeFloat(u){this.realloc(4),this.dataView.setFloat32(this.pos,u,!0),this.pos+=4}writeDouble(u){this.realloc(8),this.dataView.setFloat64(this.pos,u,!0),this.pos+=8}writeBytes(u){const d=u.length;this.writeVarint(d),this.realloc(d);for(let b=0;b<d;b++)this.buf[this.pos++]=u[b]}writeRawMessage(u,d){this.pos++;const b=this.pos;u(d,this);const w=this.pos-b;w>=128&&Tv(b,w,this),this.pos=b-1,this.writeVarint(w),this.pos+=w}writeMessage(u,d,b){this.writeTag(u,2),this.writeRawMessage(d,b)}writePackedVarint(u,d){d.length&&this.writeMessage(u,yC,d)}writePackedSVarint(u,d){d.length&&this.writeMessage(u,tf,d)}writePackedBoolean(u,d){d.length&&this.writeMessage(u,Ag,d)}writePackedFloat(u,d){d.length&&this.writeMessage(u,q1,d)}writePackedDouble(u,d){d.length&&this.writeMessage(u,Rv,d)}writePackedFixed32(u,d){d.length&&this.writeMessage(u,vC,d)}writePackedSFixed32(u,d){d.length&&this.writeMessage(u,k0,d)}writePackedFixed64(u,d){d.length&&this.writeMessage(u,bC,d)}writePackedSFixed64(u,d){d.length&&this.writeMessage(u,CC,d)}writeBytesField(u,d){this.writeTag(u,2),this.writeBytes(d)}writeFixed32Field(u,d){this.writeTag(u,5),this.writeFixed32(d)}writeSFixed32Field(u,d){this.writeTag(u,5),this.writeSFixed32(d)}writeFixed64Field(u,d){this.writeTag(u,1),this.writeFixed64(d)}writeSFixed64Field(u,d){this.writeTag(u,1),this.writeSFixed64(d)}writeVarintField(u,d){this.writeTag(u,0),this.writeVarint(d)}writeSVarintField(u,d){this.writeTag(u,0),this.writeSVarint(d)}writeStringField(u,d){this.writeTag(u,2),this.writeString(d)}writeFloatField(u,d){this.writeTag(u,5),this.writeFloat(d)}writeDoubleField(u,d){this.writeTag(u,1),this.writeDouble(d)}writeBooleanField(u,d){this.writeVarintField(u,+d)}}function Jp(f,u,d){return d?4294967296*u+(f>>>0):4294967296*(u>>>0)+(f>>>0)}function Tv(f,u,d){const b=u<=16383?1:u<=2097151?2:u<=268435455?3:Math.floor(Math.log(u)/(7*Math.LN2));d.realloc(b);for(let w=d.pos-1;w>=f;w--)d.buf[w+b]=d.buf[w]}function yC(f,u){for(let d=0;d<f.length;d++)u.writeVarint(f[d])}function tf(f,u){for(let d=0;d<f.length;d++)u.writeSVarint(f[d])}function q1(f,u){for(let d=0;d<f.length;d++)u.writeFloat(f[d])}function Rv(f,u){for(let d=0;d<f.length;d++)u.writeDouble(f[d])}function Ag(f,u){for(let d=0;d<f.length;d++)u.writeBoolean(f[d])}function vC(f,u){for(let d=0;d<f.length;d++)u.writeFixed32(f[d])}function k0(f,u){for(let d=0;d<f.length;d++)u.writeSFixed32(f[d])}function bC(f,u){for(let d=0;d<f.length;d++)u.writeFixed64(f[d])}function CC(f,u){for(let d=0;d<f.length;d++)u.writeSFixed64(f[d])}function Y1(f,u,d){f===1&&d.readMessage(Dv,u)}function Dv(f,u,d){if(f===3){const{id:b,bitmap:w,width:k,height:D,left:K,top:N,advance:te}=d.readMessage(e2,{});u.push({id:b,bitmap:new eg({width:k+6,height:D+6},w),metrics:{width:k,height:D,left:K,top:N,advance:te}})}}function e2(f,u,d){f===1?u.id=d.readVarint():f===2?u.bitmap=d.readBytes():f===3?u.width=d.readVarint():f===4?u.height=d.readVarint():f===5?u.left=d.readSVarint():f===6?u.top=d.readSVarint():f===7&&(u.advance=d.readVarint())}function _C(f){let u=0,d=0;for(const D of f)u+=D.w*D.h,d=Math.max(d,D.w);f.sort(((D,K)=>K.h-D.h));const b=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(u/.95)),d),h:1/0}];let w=0,k=0;for(const D of f)for(let K=b.length-1;K>=0;K--){const N=b[K];if(!(D.w>N.w||D.h>N.h)){if(D.x=N.x,D.y=N.y,k=Math.max(k,D.y+D.h),w=Math.max(w,D.x+D.w),D.w===N.w&&D.h===N.h){const te=b.pop();te&&K<b.length&&(b[K]=te)}else D.h===N.h?(N.x+=D.w,N.w-=D.w):D.w===N.w?(N.y+=D.h,N.h-=D.h):(b.push({x:N.x+D.w,y:N.y,w:N.w-D.w,h:D.h}),N.y+=D.h,N.h-=D.h);break}}return{w,h:k,fill:u/(w*k)||0}}class Pv{constructor(u,{pixelRatio:d,version:b,stretchX:w,stretchY:k,content:D,textFitWidth:K,textFitHeight:N}){this.paddedRect=u,this.pixelRatio=d,this.stretchX=w,this.stretchY=k,this.content=D,this.version=b,this.textFitWidth=K,this.textFitHeight=N}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class Uv{constructor(u,d){const b={},w={};this.haveRenderCallbacks=[];const k=[];this.addImages(u,b,k),this.addImages(d,w,k);const{w:D,h:K}=_C(k),N=new gu({width:D||1,height:K||1});for(const te in u){const re=u[te],Ae=b[te].paddedRect;gu.copy(re.data,N,{x:0,y:0},{x:Ae.x+1,y:Ae.y+1},re.data)}for(const te in d){const re=d[te],Ae=w[te].paddedRect,Oe=Ae.x+1,De=Ae.y+1,Ue=re.data.width,Ge=re.data.height;gu.copy(re.data,N,{x:0,y:0},{x:Oe,y:De},re.data),gu.copy(re.data,N,{x:0,y:Ge-1},{x:Oe,y:De-1},{width:Ue,height:1}),gu.copy(re.data,N,{x:0,y:0},{x:Oe,y:De+Ge},{width:Ue,height:1}),gu.copy(re.data,N,{x:Ue-1,y:0},{x:Oe-1,y:De},{width:1,height:Ge}),gu.copy(re.data,N,{x:0,y:0},{x:Oe+Ue,y:De},{width:1,height:Ge})}this.image=N,this.iconPositions=b,this.patternPositions=w}addImages(u,d,b){for(const w in u){const k=u[w],D={x:0,y:0,w:k.data.width+2,h:k.data.height+2};b.push(D),d[w]=new Pv(D,k),k.hasRenderCallback&&this.haveRenderCallbacks.push(w)}}patchUpdatedImages(u,d){u.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const b in u.updatedImages)this.patchUpdatedImage(this.iconPositions[b],u.getImage(b),d),this.patchUpdatedImage(this.patternPositions[b],u.getImage(b),d)}patchUpdatedImage(u,d,b){if(!u||!d||u.version===d.version)return;u.version=d.version;const[w,k]=u.tl;b.update(d.data,void 0,{x:w,y:k})}}var nf;Vn("ImagePosition",Pv),Vn("ImageAtlas",Uv),s.ao=void 0,(nf=s.ao||(s.ao={}))[nf.none=0]="none",nf[nf.horizontal=1]="horizontal",nf[nf.vertical=2]="vertical",nf[nf.horizontalOnly=3]="horizontalOnly";class ld{constructor(){this.scale=1,this.fontStack="",this.imageName=null,this.verticalAlign="bottom"}static forText(u,d,b){const w=new ld;return w.scale=u||1,w.fontStack=d,w.verticalAlign=b||"bottom",w}static forImage(u,d){const b=new ld;return b.imageName=u,b.verticalAlign=d||"bottom",b}}class rf{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(u,d){const b=new rf;for(let w=0;w<u.sections.length;w++){const k=u.sections[w];k.image?b.addImageSection(k):b.addTextSection(k,d)}return b}length(){return this.text.length}getSection(u){return this.sections[this.sectionIndex[u]]}getSectionIndex(u){return this.sectionIndex[u]}getCharCode(u){return this.text.charCodeAt(u)}verticalizePunctuation(){this.text=(function(u){let d="";for(let b=0;b<u.length;b++){const w=u.charCodeAt(b+1)||null,k=u.charCodeAt(b-1)||null;d+=w&&Wl(w)&&!cg[u[b+1]]||k&&Wl(k)&&!cg[u[b-1]]||!cg[u[b]]?u[b]:cg[u[b]]}return d})(this.text)}trim(){let u=0;for(let b=0;b<this.text.length&&T0[this.text.charCodeAt(b)];b++)u++;let d=this.text.length;for(let b=this.text.length-1;b>=0&&b>=u&&T0[this.text.charCodeAt(b)];b--)d--;this.text=this.text.substring(u,d),this.sectionIndex=this.sectionIndex.slice(u,d)}substring(u,d){const b=new rf;return b.text=this.text.substring(u,d),b.sectionIndex=this.sectionIndex.slice(u,d),b.sections=this.sections,b}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((u,d)=>Math.max(u,this.sections[d].scale)),0)}getMaxImageSize(u){let d=0,b=0;for(let w=0;w<this.length();w++){const k=this.getSection(w);if(k.imageName){const D=u[k.imageName];if(!D)continue;const K=D.displaySize;d=Math.max(d,K[0]),b=Math.max(b,K[1])}}return{maxImageWidth:d,maxImageHeight:b}}addTextSection(u,d){this.text+=u.text,this.sections.push(ld.forText(u.scale,u.fontStack||d,u.verticalAlign));const b=this.sections.length-1;for(let w=0;w<u.text.length;++w)this.sectionIndex.push(b)}addImageSection(u){const d=u.image?u.image.name:"";if(d.length===0)return void ft("Can't add FormattedSection with an empty image.");const b=this.getNextImageSectionCharCode();b?(this.text+=String.fromCharCode(b),this.sections.push(ld.forImage(d,u.verticalAlign)),this.sectionIndex.push(this.sections.length-1)):ft("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function ep(f,u,d,b,w,k,D,K,N,te,re,Ae,Oe,De,Ue){const Ge=rf.fromFeature(f,w);let He;Ae===s.ao.vertical&&Ge.verticalizePunctuation();const{processBidirectionalText:st,processStyledBidirectionalText:Tt}=bl;if(st&&Ge.sections.length===1){He=[];const jt=st(Ge.toString(),qo(Ge,te,k,u,b,De));for(const Zt of jt){const fn=new rf;fn.text=Zt,fn.sections=Ge.sections;for(let Wn=0;Wn<Zt.length;Wn++)fn.sectionIndex.push(0);He.push(fn)}}else if(Tt){He=[];const jt=Tt(Ge.text,Ge.sectionIndex,qo(Ge,te,k,u,b,De));for(const Zt of jt){const fn=new rf;fn.text=Zt[0],fn.sectionIndex=Zt[1],fn.sections=Ge.sections,He.push(fn)}}else He=(function(jt,Zt){const fn=[],Wn=jt.text;let Kn=0;for(const Nn of Zt)fn.push(jt.substring(Kn,Nn)),Kn=Nn;return Kn<Wn.length&&fn.push(jt.substring(Kn,Wn.length)),fn})(Ge,qo(Ge,te,k,u,b,De));const dt=[],Ct={positionedLines:dt,text:Ge.toString(),top:re[1],bottom:re[1],left:re[0],right:re[0],writingMode:Ae,iconsInText:!1,verticalizable:!1};return(function(jt,Zt,fn,Wn,Kn,Nn,xi,zn,Gn,an,ji,er){let Di=0,hi=0,Tr=0,xs=0;const xa=zn==="right"?1:zn==="left"?0:.5,wl=Aa/er;let vc=0;for(const Ro of Kn){Ro.trim();const ha=Ro.getMaxScale(),Ma={positionedGlyphs:[],lineOffset:0};jt.positionedLines[vc]=Ma;const qs=Ma.positionedGlyphs;let Gu=0;if(!Ro.length()){hi+=Nn,++vc;continue}const Vc=t2(Wn,Ro,wl);for(let Wu=0;Wu<Ro.length();Wu++){const wa=Ro.getSection(Wu),Sa=Ro.getSectionIndex(Wu),el=Ro.getCharCode(Wu),za=Z1(Gn,ji,el);let Do;if(wa.imageName){if(jt.iconsInText=!0,wa.scale=wa.scale*wl,Do=i2(wa,za,ha,Vc,Wn),!Do)continue;Gu=Math.max(Gu,Do.imageOffset)}else if(Do=n2(wa,el,za,Vc,Zt,fn),!Do)continue;const{rect:Hc,metrics:rm,baselineOffset:Qu}=Do;qs.push({glyph:el,imageName:wa.imageName,x:Di,y:hi+Qu+-17,vertical:za,scale:wa.scale,fontStack:wa.fontStack,sectionIndex:Sa,metrics:rm,rect:Hc}),za?(jt.verticalizable=!0,Di+=(wa.imageName?rm.advance:Aa)*wa.scale+an):Di+=rm.advance*wa.scale+an}qs.length!==0&&(Tr=Math.max(Di-an,Tr),dg(qs,0,qs.length-1,xa)),Di=0,Ma.lineOffset=Math.max(Gu,(ha-1)*Aa);const Ys=Nn*ha+Gu;hi+=Ys,xs=Math.max(Ys,xs),++vc}const{horizontalAlign:Fa,verticalAlign:Qs}=P0(xi);(function(Ro,ha,Ma,qs,Gu,Vc,Ys,Wu,wa){const Sa=(ha-Ma)*Gu;let el=0;el=Vc!==Ys?-Wu*qs- -17:-qs*wa*Ys+.5*Ys;for(const za of Ro)for(const Do of za.positionedGlyphs)Do.x+=Sa,Do.y+=el})(jt.positionedLines,xa,Fa,Qs,Tr,xs,Nn,hi,Kn.length),jt.top+=-Qs*hi,jt.bottom=jt.top+hi,jt.left+=-Fa*Tr,jt.right=jt.left+Tr})(Ct,u,d,b,He,D,K,N,Ae,te,Oe,Ue),!(function(jt){for(const Zt of jt)if(Zt.positionedGlyphs.length!==0)return!1;return!0})(dt)&&Ct}const T0={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Kv={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},Lv={40:!0};function R0(f,u,d,b,w,k){if(u.imageName){const D=b[u.imageName];return D?D.displaySize[0]*u.scale*Aa/k+w:0}{const D=d[u.fontStack],K=D&&D[f];return K?K.metrics.advance*u.scale+w:0}}function $1(f,u,d,b){const w=Math.pow(f-u,2);return b?f<u?w/2:2*w:w+Math.abs(d)*d}function D0(f,u,d){let b=0;return f===10&&(b-=1e4),d&&(b+=150),f!==40&&f!==65288||(b+=50),u!==41&&u!==65289||(b+=50),b}function V1(f,u,d,b,w,k){let D=null,K=$1(u,d,w,k);for(const N of b){const te=$1(u-N.x,d,w,k)+N.badness;te<=K&&(D=N,K=te)}return{index:f,x:u,priorBreak:D,badness:K}}function H1(f){return f?H1(f.priorBreak).concat(f.index):[]}function qo(f,u,d,b,w,k){if(!f)return[];const D=[],K=(function(Ae,Oe,De,Ue,Ge,He){let st=0;for(let Tt=0;Tt<Ae.length();Tt++){const dt=Ae.getSection(Tt);st+=R0(Ae.getCharCode(Tt),dt,Ue,Ge,Oe,He)}return st/Math.max(1,Math.ceil(st/De))})(f,u,d,b,w,k),N=f.text.indexOf("")>=0;let te=0;for(let Ae=0;Ae<f.length();Ae++){const Oe=f.getSection(Ae),De=f.getCharCode(Ae);if(T0[De]||(te+=R0(De,Oe,b,w,u,k)),Ae<f.length()-1){const Ue=!((re=De)<11904)&&(!!or["CJK Compatibility Forms"](re)||!!or["CJK Compatibility"](re)||!!or["CJK Strokes"](re)||!!or["CJK Symbols and Punctuation"](re)||!!or["Enclosed CJK Letters and Months"](re)||!!or["Halfwidth and Fullwidth Forms"](re)||!!or["Ideographic Description Characters"](re)||!!or["Vertical Forms"](re)||jd.test(String.fromCodePoint(re)));(Kv[De]||Ue||Oe.imageName||Ae!==f.length()-2&&Lv[f.getCharCode(Ae+1)])&&D.push(V1(Ae+1,te,K,D,D0(De,f.getCharCode(Ae+1),Ue&&N),!1))}}var re;return H1(V1(f.length(),te,K,D,0,!0))}function P0(f){let u=.5,d=.5;switch(f){case"right":case"top-right":case"bottom-right":u=1;break;case"left":case"top-left":case"bottom-left":u=0}switch(f){case"bottom":case"bottom-right":case"bottom-left":d=1;break;case"top":case"top-right":case"top-left":d=0}return{horizontalAlign:u,verticalAlign:d}}function t2(f,u,d){const b=u.getMaxScale()*Aa,{maxImageWidth:w,maxImageHeight:k}=u.getMaxImageSize(f),D=Math.max(b,k*d);return{verticalLineContentWidth:Math.max(b,w*d),horizontalLineContentHeight:D}}function hg(f){switch(f){case"top":return 0;case"center":return .5;default:return 1}}function Z1(f,u,d){return!(f===s.ao.horizontal||!u&&!Du(d)||u&&(T0[d]||(b=d,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(b)))));var b}function n2(f,u,d,b,w,k){const D=k[f.fontStack],K=(function(te,re,Ae,Oe){if(te&&te.rect)return te;const De=re[Ae.fontStack],Ue=De&&De[Oe];return Ue?{rect:null,metrics:Ue.metrics}:null})(D&&D[u],w,f,u);if(K===null)return null;let N;if(d)N=b.verticalLineContentWidth-f.scale*Aa;else{const te=hg(f.verticalAlign);N=(b.horizontalLineContentHeight-f.scale*Aa)*te}return{rect:K.rect,metrics:K.metrics,baselineOffset:N}}function i2(f,u,d,b,w){const k=w[f.imageName];if(!k)return null;const D=k.paddedRect,K=k.displaySize,N={width:K[0],height:K[1],left:1,top:-3,advance:u?K[1]:K[0]};let te;if(u)te=b.verticalLineContentWidth-K[1]*f.scale;else{const re=hg(f.verticalAlign);te=(b.horizontalLineContentHeight-K[1]*f.scale)*re}return{rect:D,metrics:N,baselineOffset:te,imageOffset:(u?K[0]:K[1])*f.scale-Aa*d}}function dg(f,u,d,b){if(b===0)return;const w=f[d],k=(f[d].x+w.metrics.advance*w.scale)*b;for(let D=u;D<=d;D++)f[D].x-=k}function em(f,u,d){const{horizontalAlign:b,verticalAlign:w}=P0(d),k=u[0]-f.displaySize[0]*b,D=u[1]-f.displaySize[1]*w;return{image:f,top:D,bottom:D+f.displaySize[1],left:k,right:k+f.displaySize[0]}}function X1(f){var u,d;let b=f.left,w=f.top,k=f.right-b,D=f.bottom-w;const K=(u=f.image.textFitWidth)!==null&&u!==void 0?u:"stretchOrShrink",N=(d=f.image.textFitHeight)!==null&&d!==void 0?d:"stretchOrShrink",te=(f.image.content[2]-f.image.content[0])/(f.image.content[3]-f.image.content[1]);if(N==="proportional"){if(K==="stretchOnly"&&k/D<te||K==="proportional"){const re=Math.ceil(D*te);b*=re/k,k=re}}else if(K==="proportional"&&N==="stretchOnly"&&te!==0&&k/D>te){const re=Math.ceil(k/te);w*=re/D,D=re}return{x1:b,y1:w,x2:b+k,y2:w+D}}function U0(f,u,d,b,w,k){const D=f.image;let K;if(D.content){const He=D.content,st=D.pixelRatio||1;K=[He[0]/st,He[1]/st,D.displaySize[0]-He[2]/st,D.displaySize[1]-He[3]/st]}const N=u.left*k,te=u.right*k;let re,Ae,Oe,De;d==="width"||d==="both"?(De=w[0]+N-b[3],Ae=w[0]+te+b[1]):(De=w[0]+(N+te-D.displaySize[0])/2,Ae=De+D.displaySize[0]);const Ue=u.top*k,Ge=u.bottom*k;return d==="height"||d==="both"?(re=w[1]+Ue-b[0],Oe=w[1]+Ge+b[2]):(re=w[1]+(Ue+Ge-D.displaySize[1])/2,Oe=re+D.displaySize[1]),{image:D,top:re,right:Ae,bottom:Oe,left:De,collisionPadding:K}}const vh=128,gc=32640;function bh(f,u){const{expression:d}=u;if(d.kind==="constant")return{kind:"constant",layoutSize:d.evaluate(new To(f+1))};if(d.kind==="source")return{kind:"source"};{const{zoomStops:b,interpolationType:w}=d;let k=0;for(;k<b.length&&b[k]<=f;)k++;k=Math.max(0,k-1);let D=k;for(;D<b.length&&b[D]<f+1;)D++;D=Math.min(b.length-1,D);const K=b[k],N=b[D];return d.kind==="composite"?{kind:"composite",minZoom:K,maxZoom:N,interpolationType:w}:{kind:"camera",minZoom:K,maxZoom:N,minSize:d.evaluate(new To(K)),maxSize:d.evaluate(new To(N)),interpolationType:w}}}function tm(f,u,d){let b="never";const w=f.get(u);return w?b=w:f.get(d)&&(b="always"),b}const r2=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function K0(f,u,d,b,w,k,D,K,N,te,re,Ae,Oe){const De=K?Math.min(gc,Math.round(K[0])):0,Ue=K?Math.min(gc,Math.round(K[1])):0;f.emplaceBack(u,d,Math.round(32*b),Math.round(32*w),k,D,(De<<1)+(N?1:0),Ue,16*te,16*re,256*Ae,256*Oe)}function J1(f,u,d){f.emplaceBack(u.x,u.y,d),f.emplaceBack(u.x,u.y,d),f.emplaceBack(u.x,u.y,d),f.emplaceBack(u.x,u.y,d)}function xC(f){for(const u of f.sections)if(dc(u.text))return!0;return!1}class ey{constructor(u){this.layoutVertexArray=new kn,this.indexArray=new Eo,this.programConfigurations=u,this.segments=new Br,this.dynamicLayoutVertexArray=new cn,this.opacityVertexArray=new si,this.hasVisibleVertices=!1,this.placedSymbolArray=new Pe}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(u,d,b,w){this.isEmpty()||(b&&(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,Ml.members),this.indexBuffer=u.createIndexBuffer(this.indexArray,d),this.dynamicLayoutVertexBuffer=u.createVertexBuffer(this.dynamicLayoutVertexArray,Jf.members,!0),this.opacityVertexBuffer=u.createVertexBuffer(this.opacityVertexArray,r2,!0),this.opacityVertexBuffer.itemSize=1),(b||w)&&this.programConfigurations.upload(u))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Vn("SymbolBuffers",ey);class Fv{constructor(u,d,b){this.layoutVertexArray=new u,this.layoutAttributes=d,this.indexArray=new b,this.segments=new Br,this.collisionVertexArray=new Er}upload(u){this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=u.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=u.createVertexBuffer(this.collisionVertexArray,ug.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Vn("CollisionBuffers",Fv);class $l{constructor(u){this.collisionBoxArray=u.collisionBoxArray,this.zoom=u.zoom,this.overscaling=Dn(globalThis)?Math.min(u.overscaling,128):u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map((D=>D.id)),this.index=u.index,this.pixelRatio=u.pixelRatio,this.sourceLayerIndex=u.sourceLayerIndex,this.hasDependencies=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const d=this.layers[0]._unevaluatedLayout._values;this.textSizeData=bh(this.zoom,d["text-size"]),this.iconSizeData=bh(this.zoom,d["icon-size"]);const b=this.layers[0].layout,w=b.get("symbol-sort-key"),k=b.get("symbol-z-order");this.canOverlap=tm(b,"text-overlap","text-allow-overlap")!=="never"||tm(b,"icon-overlap","icon-allow-overlap")!=="never"||b.get("text-ignore-placement")||b.get("icon-ignore-placement"),this.sortFeaturesByKey=k!=="viewport-y"&&!w.isConstant(),this.sortFeaturesByY=(k==="viewport-y"||k==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,b.get("symbol-placement")==="point"&&(this.writingModes=b.get("text-writing-mode").map((D=>s.ao[D]))),this.stateDependentLayerIds=this.layers.filter((D=>D.isStateDependent())).map((D=>D.id)),this.sourceID=u.sourceID}createArrays(){this.text=new ey(new fA(this.layers,this.zoom,(u=>/^text/.test(u)))),this.icon=new ey(new fA(this.layers,this.zoom,(u=>/^icon/.test(u)))),this.glyphOffsetArray=new Xe,this.lineVertexArray=new et,this.symbolInstances=new Ze,this.textAnchorOffsets=new ht}calculateGlyphDependencies(u,d,b,w,k){for(let D=0;D<u.length;D++)if(d[u.charCodeAt(D)]=!0,(b||w)&&k){const K=cg[u.charAt(D)];K&&(d[K.charCodeAt(0)]=!0)}}populate(u,d,b){const w=this.layers[0],k=w.layout,D=k.get("text-font"),K=k.get("text-field"),N=k.get("icon-image"),te=(K.value.kind!=="constant"||K.value.value instanceof ss&&!K.value.value.isEmpty()||K.value.value.toString().length>0)&&(D.value.kind!=="constant"||D.value.value.length>0),re=N.value.kind!=="constant"||!!N.value.value||Object.keys(N.parameters).length>0,Ae=k.get("symbol-sort-key");if(this.features=[],!te&&!re)return;const Oe=d.iconDependencies,De=d.glyphDependencies,Ue=d.availableImages,Ge=new To(this.zoom);for(const{feature:He,id:st,index:Tt,sourceLayerIndex:dt}of u){const Ct=w._featureFilter.needGeometry,jt=Va(He,Ct);if(!w._featureFilter.filter(Ge,jt,b))continue;let Zt,fn;if(Ct||(jt.geometry=Yd(He)),te){const Kn=w.getValueAndResolveTokens("text-field",jt,b,Ue),Nn=ss.factory(Kn),xi=this.hasRTLText=this.hasRTLText||xC(Nn);(!xi||bl.getRTLTextPluginStatus()==="unavailable"||xi&&bl.isParsed())&&(Zt=Iv(Nn,w,jt))}if(re){const Kn=w.getValueAndResolveTokens("icon-image",jt,b,Ue);fn=Kn instanceof ea?Kn:ea.fromString(Kn)}if(!Zt&&!fn)continue;const Wn=this.sortFeaturesByKey?Ae.evaluate(jt,{},b):void 0;if(this.features.push({id:st,text:Zt,icon:fn,index:Tt,sourceLayerIndex:dt,geometry:jt.geometry,properties:He.properties,type:$p.types[He.type],sortKey:Wn}),fn&&(Oe[fn.name]=!0),Zt){const Kn=D.evaluate(jt,{},b).join(","),Nn=k.get("text-rotation-alignment")!=="viewport"&&k.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(s.ao.vertical)>=0;for(const xi of Zt.sections)if(xi.image)Oe[xi.image.name]=!0;else{const zn=hc(Zt.toString()),Gn=xi.fontStack||Kn,an=De[Gn]=De[Gn]||{};this.calculateGlyphDependencies(xi.text,an,Nn,this.allowVerticalPlacement,zn)}}}k.get("symbol-placement")==="line"&&(this.features=(function(He){const st={},Tt={},dt=[];let Ct=0;function jt(Kn){dt.push(He[Kn]),Ct++}function Zt(Kn,Nn,xi){const zn=Tt[Kn];return delete Tt[Kn],Tt[Nn]=zn,dt[zn].geometry[0].pop(),dt[zn].geometry[0]=dt[zn].geometry[0].concat(xi[0]),zn}function fn(Kn,Nn,xi){const zn=st[Nn];return delete st[Nn],st[Kn]=zn,dt[zn].geometry[0].shift(),dt[zn].geometry[0]=xi[0].concat(dt[zn].geometry[0]),zn}function Wn(Kn,Nn,xi){const zn=xi?Nn[0][Nn[0].length-1]:Nn[0][0];return`${Kn}:${zn.x}:${zn.y}`}for(let Kn=0;Kn<He.length;Kn++){const Nn=He[Kn],xi=Nn.geometry,zn=Nn.text?Nn.text.toString():null;if(!zn){jt(Kn);continue}const Gn=Wn(zn,xi),an=Wn(zn,xi,!0);if(Gn in Tt&&an in st&&Tt[Gn]!==st[an]){const ji=fn(Gn,an,xi),er=Zt(Gn,an,dt[ji].geometry);delete st[Gn],delete Tt[an],Tt[Wn(zn,dt[er].geometry,!0)]=er,dt[ji].geometry=null}else Gn in Tt?Zt(Gn,an,xi):an in st?fn(Gn,an,xi):(jt(Kn),st[Gn]=Ct-1,Tt[an]=Ct-1)}return dt.filter((Kn=>Kn.geometry))})(this.features)),this.sortFeaturesByKey&&this.features.sort(((He,st)=>He.sortKey-st.sortKey))}update(u,d,b){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(u,d,this.layers,{imagePositions:b}),this.icon.programConfigurations.updatePaintArrays(u,d,this.layers,{imagePositions:b}))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(u){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(u),this.iconCollisionBox.upload(u)),this.text.upload(u,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(u,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(u,d){const b=this.lineVertexArray.length;if(u.segment!==void 0){let w=u.dist(d[u.segment+1]),k=u.dist(d[u.segment]);const D={};for(let K=u.segment+1;K<d.length;K++)D[K]={x:d[K].x,y:d[K].y,tileUnitDistanceFromAnchor:w},K<d.length-1&&(w+=d[K+1].dist(d[K]));for(let K=u.segment||0;K>=0;K--)D[K]={x:d[K].x,y:d[K].y,tileUnitDistanceFromAnchor:k},K>0&&(k+=d[K-1].dist(d[K]));for(let K=0;K<d.length;K++){const N=D[K];this.lineVertexArray.emplaceBack(N.x,N.y,N.tileUnitDistanceFromAnchor)}}return{lineStartIndex:b,lineLength:this.lineVertexArray.length-b}}addSymbols(u,d,b,w,k,D,K,N,te,re,Ae,Oe){const De=u.indexArray,Ue=u.layoutVertexArray,Ge=u.segments.prepareSegment(4*d.length,Ue,De,this.canOverlap?D.sortKey:void 0),He=this.glyphOffsetArray.length,st=Ge.vertexLength,Tt=this.allowVerticalPlacement&&K===s.ao.vertical?Math.PI/2:0,dt=D.text&&D.text.sections;for(let Ct=0;Ct<d.length;Ct++){const{tl:jt,tr:Zt,bl:fn,br:Wn,tex:Kn,pixelOffsetTL:Nn,pixelOffsetBR:xi,minFontScaleX:zn,minFontScaleY:Gn,glyphOffset:an,isSDF:ji,sectionIndex:er}=d[Ct],Di=Ge.vertexLength,hi=an[1];K0(Ue,N.x,N.y,jt.x,hi+jt.y,Kn.x,Kn.y,b,ji,Nn.x,Nn.y,zn,Gn),K0(Ue,N.x,N.y,Zt.x,hi+Zt.y,Kn.x+Kn.w,Kn.y,b,ji,xi.x,Nn.y,zn,Gn),K0(Ue,N.x,N.y,fn.x,hi+fn.y,Kn.x,Kn.y+Kn.h,b,ji,Nn.x,xi.y,zn,Gn),K0(Ue,N.x,N.y,Wn.x,hi+Wn.y,Kn.x+Kn.w,Kn.y+Kn.h,b,ji,xi.x,xi.y,zn,Gn),J1(u.dynamicLayoutVertexArray,N,Tt),De.emplaceBack(Di,Di+2,Di+1),De.emplaceBack(Di+1,Di+2,Di+3),Ge.vertexLength+=4,Ge.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(an[0]),Ct!==d.length-1&&er===d[Ct+1].sectionIndex||u.programConfigurations.populatePaintArrays(Ue.length,D,D.index,{imagePositions:{},canonical:Oe,formattedSection:dt&&dt[er]})}u.placedSymbolArray.emplaceBack(N.x,N.y,He,this.glyphOffsetArray.length-He,st,te,re,N.segment,b?b[0]:0,b?b[1]:0,w[0],w[1],K,0,!1,0,Ae)}_addCollisionDebugVertex(u,d,b,w,k,D){return d.emplaceBack(0,0),u.emplaceBack(b.x,b.y,w,k,Math.round(D.x),Math.round(D.y))}addCollisionDebugVertices(u,d,b,w,k,D,K){const N=k.segments.prepareSegment(4,k.layoutVertexArray,k.indexArray),te=N.vertexLength,re=k.layoutVertexArray,Ae=k.collisionVertexArray,Oe=K.anchorX,De=K.anchorY;this._addCollisionDebugVertex(re,Ae,D,Oe,De,new c(u,d)),this._addCollisionDebugVertex(re,Ae,D,Oe,De,new c(b,d)),this._addCollisionDebugVertex(re,Ae,D,Oe,De,new c(b,w)),this._addCollisionDebugVertex(re,Ae,D,Oe,De,new c(u,w)),N.vertexLength+=4;const Ue=k.indexArray;Ue.emplaceBack(te,te+1),Ue.emplaceBack(te+1,te+2),Ue.emplaceBack(te+2,te+3),Ue.emplaceBack(te+3,te),N.primitiveLength+=4}addDebugCollisionBoxes(u,d,b,w){for(let k=u;k<d;k++){const D=this.collisionBoxArray.get(k);this.addCollisionDebugVertices(D.x1,D.y1,D.x2,D.y2,w?this.textCollisionBox:this.iconCollisionBox,D.anchorPoint,b)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Fv(Xi,ad.members,Wr),this.iconCollisionBox=new Fv(Xi,ad.members,Wr);for(let u=0;u<this.symbolInstances.length;u++){const d=this.symbolInstances.get(u);this.addDebugCollisionBoxes(d.textBoxStartIndex,d.textBoxEndIndex,d,!0),this.addDebugCollisionBoxes(d.verticalTextBoxStartIndex,d.verticalTextBoxEndIndex,d,!0),this.addDebugCollisionBoxes(d.iconBoxStartIndex,d.iconBoxEndIndex,d,!1),this.addDebugCollisionBoxes(d.verticalIconBoxStartIndex,d.verticalIconBoxEndIndex,d,!1)}}_deserializeCollisionBoxesForSymbol(u,d,b,w,k,D,K,N,te){const re={};for(let Ae=d;Ae<b;Ae++){const Oe=u.get(Ae);re.textBox={x1:Oe.x1,y1:Oe.y1,x2:Oe.x2,y2:Oe.y2,anchorPointX:Oe.anchorPointX,anchorPointY:Oe.anchorPointY},re.textFeatureIndex=Oe.featureIndex;break}for(let Ae=w;Ae<k;Ae++){const Oe=u.get(Ae);re.verticalTextBox={x1:Oe.x1,y1:Oe.y1,x2:Oe.x2,y2:Oe.y2,anchorPointX:Oe.anchorPointX,anchorPointY:Oe.anchorPointY},re.verticalTextFeatureIndex=Oe.featureIndex;break}for(let Ae=D;Ae<K;Ae++){const Oe=u.get(Ae);re.iconBox={x1:Oe.x1,y1:Oe.y1,x2:Oe.x2,y2:Oe.y2,anchorPointX:Oe.anchorPointX,anchorPointY:Oe.anchorPointY},re.iconFeatureIndex=Oe.featureIndex;break}for(let Ae=N;Ae<te;Ae++){const Oe=u.get(Ae);re.verticalIconBox={x1:Oe.x1,y1:Oe.y1,x2:Oe.x2,y2:Oe.y2,anchorPointX:Oe.anchorPointX,anchorPointY:Oe.anchorPointY},re.verticalIconFeatureIndex=Oe.featureIndex;break}return re}deserializeCollisionBoxes(u){this.collisionArrays=[];for(let d=0;d<this.symbolInstances.length;d++){const b=this.symbolInstances.get(d);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(u,b.textBoxStartIndex,b.textBoxEndIndex,b.verticalTextBoxStartIndex,b.verticalTextBoxEndIndex,b.iconBoxStartIndex,b.iconBoxEndIndex,b.verticalIconBoxStartIndex,b.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(u,d){const b=u.placedSymbolArray.get(d),w=b.vertexStartIndex+4*b.numGlyphs;for(let k=b.vertexStartIndex;k<w;k+=4)u.indexArray.emplaceBack(k,k+2,k+1),u.indexArray.emplaceBack(k+1,k+2,k+3)}getSortedSymbolIndexes(u){if(this.sortedAngle===u&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const d=Math.sin(u),b=Math.cos(u),w=[],k=[],D=[];for(let K=0;K<this.symbolInstances.length;++K){D.push(K);const N=this.symbolInstances.get(K);w.push(0|Math.round(d*N.anchorX+b*N.anchorY)),k.push(N.featureIndex)}return D.sort(((K,N)=>w[K]-w[N]||k[N]-k[K])),D}addToSortKeyRanges(u,d){const b=this.sortKeyRanges[this.sortKeyRanges.length-1];b&&b.sortKey===d?b.symbolInstanceEnd=u+1:this.sortKeyRanges.push({sortKey:d,symbolInstanceStart:u,symbolInstanceEnd:u+1})}sortFeatures(u){if(this.sortFeaturesByY&&this.sortedAngle!==u&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(u),this.sortedAngle=u,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const d of this.symbolInstanceIndexes){const b=this.symbolInstances.get(d);this.featureSortOrder.push(b.featureIndex),[b.rightJustifiedTextSymbolIndex,b.centerJustifiedTextSymbolIndex,b.leftJustifiedTextSymbolIndex].forEach(((w,k,D)=>{w>=0&&D.indexOf(w)===k&&this.addIndicesForPlacedSymbol(this.text,w)})),b.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,b.verticalPlacedTextSymbolIndex),b.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,b.placedIconSymbolIndex),b.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,b.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let zv,jv;Vn("SymbolBucket",$l,{omit:["layers","collisionBoxArray","features","compareText"]}),$l.MAX_GLYPHS=65535,$l.addDynamicAttributes=J1;var of={get paint(){return jv=jv||new us({"icon-opacity":new Ci(mt.paint_symbol["icon-opacity"]),"icon-color":new Ci(mt.paint_symbol["icon-color"]),"icon-halo-color":new Ci(mt.paint_symbol["icon-halo-color"]),"icon-halo-width":new Ci(mt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Ci(mt.paint_symbol["icon-halo-blur"]),"icon-translate":new ti(mt.paint_symbol["icon-translate"]),"icon-translate-anchor":new ti(mt.paint_symbol["icon-translate-anchor"]),"text-opacity":new Ci(mt.paint_symbol["text-opacity"]),"text-color":new Ci(mt.paint_symbol["text-color"],{runtimeType:ga,getOverride:f=>f.textColor,hasOverride:f=>!!f.textColor}),"text-halo-color":new Ci(mt.paint_symbol["text-halo-color"]),"text-halo-width":new Ci(mt.paint_symbol["text-halo-width"]),"text-halo-blur":new Ci(mt.paint_symbol["text-halo-blur"]),"text-translate":new ti(mt.paint_symbol["text-translate"]),"text-translate-anchor":new ti(mt.paint_symbol["text-translate-anchor"])})},get layout(){return zv=zv||new us({"symbol-placement":new ti(mt.layout_symbol["symbol-placement"]),"symbol-spacing":new ti(mt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new ti(mt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Ci(mt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new ti(mt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new ti(mt.layout_symbol["icon-allow-overlap"]),"icon-overlap":new ti(mt.layout_symbol["icon-overlap"]),"icon-ignore-placement":new ti(mt.layout_symbol["icon-ignore-placement"]),"icon-optional":new ti(mt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new ti(mt.layout_symbol["icon-rotation-alignment"]),"icon-size":new Ci(mt.layout_symbol["icon-size"]),"icon-text-fit":new ti(mt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new ti(mt.layout_symbol["icon-text-fit-padding"]),"icon-image":new Ci(mt.layout_symbol["icon-image"]),"icon-rotate":new Ci(mt.layout_symbol["icon-rotate"]),"icon-padding":new Ci(mt.layout_symbol["icon-padding"]),"icon-keep-upright":new ti(mt.layout_symbol["icon-keep-upright"]),"icon-offset":new Ci(mt.layout_symbol["icon-offset"]),"icon-anchor":new Ci(mt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new ti(mt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new ti(mt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new ti(mt.layout_symbol["text-rotation-alignment"]),"text-field":new Ci(mt.layout_symbol["text-field"]),"text-font":new Ci(mt.layout_symbol["text-font"]),"text-size":new Ci(mt.layout_symbol["text-size"]),"text-max-width":new Ci(mt.layout_symbol["text-max-width"]),"text-line-height":new ti(mt.layout_symbol["text-line-height"]),"text-letter-spacing":new Ci(mt.layout_symbol["text-letter-spacing"]),"text-justify":new Ci(mt.layout_symbol["text-justify"]),"text-radial-offset":new Ci(mt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new ti(mt.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Ci(mt.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Ci(mt.layout_symbol["text-anchor"]),"text-max-angle":new ti(mt.layout_symbol["text-max-angle"]),"text-writing-mode":new ti(mt.layout_symbol["text-writing-mode"]),"text-rotate":new Ci(mt.layout_symbol["text-rotate"]),"text-padding":new ti(mt.layout_symbol["text-padding"]),"text-keep-upright":new ti(mt.layout_symbol["text-keep-upright"]),"text-transform":new Ci(mt.layout_symbol["text-transform"]),"text-offset":new Ci(mt.layout_symbol["text-offset"]),"text-allow-overlap":new ti(mt.layout_symbol["text-allow-overlap"]),"text-overlap":new ti(mt.layout_symbol["text-overlap"]),"text-ignore-placement":new ti(mt.layout_symbol["text-ignore-placement"]),"text-optional":new ti(mt.layout_symbol["text-optional"])})}};class _r{constructor(u){if(u.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=u.property.overrides?u.property.overrides.runtimeType:gr,this.defaultValue=u}evaluate(u){if(u.formattedSection){const d=this.defaultValue.property.overrides;if(d&&d.hasOverride(u.formattedSection))return d.getOverride(u.formattedSection)}return u.feature&&u.featureState?this.defaultValue.evaluate(u.feature,u.featureState):this.defaultValue.property.specification.default}eachChild(u){this.defaultValue.isConstant()||u(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Vn("FormatSectionOverride",_r,{omit:["defaultValue"]});class fg extends cl{constructor(u,d){super(u,of,d)}recalculate(u,d){if(super.recalculate(u,d),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const b=this.layout.get("text-writing-mode");if(b){const w=[];for(const k of b)w.indexOf(k)<0&&w.push(k);this.layout._values["text-writing-mode"]=w}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(u,d,b,w){const k=this.layout.get(u).evaluate(d,{},b,w),D=this._unevaluatedLayout._values[u];return D.isDataDriven()||Nh(D.value)||!k?k:(function(K,N){return N.replace(/{([^{}]+)}/g,((te,re)=>K&&re in K?String(K[re]):""))})(d.properties,k)}createBucket(u){return new $l(u)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const u of of.paint.overridableProperties){if(!fg.hasPaintOverride(this.layout,u))continue;const d=this.paint.get(u),b=new _r(d),w=new Kd(b,d.property.specification);let k=null;k=d.value.kind==="constant"||d.value.kind==="source"?new Ll("source",w):new ah("composite",w,d.value.zoomStops),this.paint._values[u]=new La(d.property,k,d.parameters)}}_handleOverridablePaintPropertyUpdate(u,d,b){return!(!this.layout||d.isDataDriven()||b.isDataDriven())&&fg.hasPaintOverride(this.layout,u)}static hasPaintOverride(u,d){const b=u.get("text-field"),w=of.paint.properties[d];let k=!1;const D=K=>{for(const N of K)if(w.overrides&&w.overrides.hasOverride(N))return void(k=!0)};if(b.value.kind==="constant"&&b.value.value instanceof ss)D(b.value.value.sections);else if(b.value.kind==="source"||b.value.kind==="composite"){const K=te=>{k||(te instanceof X&&Gi(te.value)===eo?D(te.value.sections):te instanceof XA?D(te.sections):te.eachChild(K))},N=b.value;N._styleExpression&&K(N._styleExpression.expression)}return k}}let yc;var Za={get paint(){return yc=yc||new us({"background-color":new ti(mt.paint_background["background-color"]),"background-pattern":new ul(mt.paint_background["background-pattern"]),"background-opacity":new ti(mt.paint_background["background-opacity"])})}};class L0 extends cl{constructor(u,d){super(u,Za,d)}}class tp extends cl{constructor(u,d){super(u,{},d),this.onAdd=b=>{this.implementation.onAdd&&this.implementation.onAdd(b,b.painter.context.gl)},this.onRemove=b=>{this.implementation.onRemove&&this.implementation.onRemove(b,b.painter.context.gl)},this.implementation=u}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class MC{constructor(u){this._methodToThrottle=u,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._methodToThrottle()}),0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const co={once:!0},F0=63710088e-1;class Ch{constructor(u,d){if(isNaN(u)||isNaN(d))throw new Error(`Invalid LngLat object: (${u}, ${d})`);if(this.lng=+u,this.lat=+d,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Ch(Bt(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(u){const d=Math.PI/180,b=this.lat*d,w=u.lat*d,k=Math.sin(b)*Math.sin(w)+Math.cos(b)*Math.cos(w)*Math.cos((u.lng-this.lng)*d);return F0*Math.acos(Math.min(k,1))}static convert(u){if(u instanceof Ch)return u;if(Array.isArray(u)&&(u.length===2||u.length===3))return new Ch(Number(u[0]),Number(u[1]));if(!Array.isArray(u)&&typeof u=="object"&&u!==null)return new Ch(Number("lng"in u?u.lng:u.lon),Number(u.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const ty=2*Math.PI*F0;function z0(f){return ty*Math.cos(f*Math.PI/180)}function ny(f){return(180+f)/360}function Yc(f){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+f*Math.PI/360)))/360}function pg(f,u){return f/z0(u)}function mg(f){return 360/Math.PI*Math.atan(Math.exp((180-360*f)*Math.PI/180))-90}function oa(f,u){return f*z0(mg(u))}class Ws{constructor(u,d,b=0){this.x=+u,this.y=+d,this.z=+b}static fromLngLat(u,d=0){const b=Ch.convert(u);return new Ws(ny(b.lng),Yc(b.lat),pg(d,b.lat))}toLngLat(){return new Ch(360*this.x-180,mg(this.y))}toAltitude(){return oa(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/ty*(u=mg(this.y),1/Math.cos(u*Math.PI/180));var u}}function Nv(f,u,d){var b=2*Math.PI*6378137/256/Math.pow(2,d);return[f*b-2*Math.PI*6378137/2,u*b-2*Math.PI*6378137/2]}class iy{constructor(u,d,b){if(!(function(w,k,D){return!(w<0||w>25||D<0||D>=Math.pow(2,w)||k<0||k>=Math.pow(2,w))})(u,d,b))throw new Error(`x=${d}, y=${b}, z=${u} outside of bounds. 0<=x<${Math.pow(2,u)}, 0<=y<${Math.pow(2,u)} 0<=z<=25 `);this.z=u,this.x=d,this.y=b,this.key=np(0,u,u,d,b)}equals(u){return this.z===u.z&&this.x===u.x&&this.y===u.y}url(u,d,b){const w=(D=this.y,K=this.z,N=Nv(256*(k=this.x),256*(D=Math.pow(2,K)-D-1),K),te=Nv(256*(k+1),256*(D+1),K),N[0]+","+N[1]+","+te[0]+","+te[1]);var k,D,K,N,te;const re=(function(Ae,Oe,De){let Ue,Ge="";for(let He=Ae;He>0;He--)Ue=1<<He-1,Ge+=(Oe&Ue?1:0)+(De&Ue?2:0);return Ge})(this.z,this.x,this.y);return u[(this.x+this.y)%u.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(b==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,d>1?"@2x":"").replace(/{quadkey}/g,re).replace(/{bbox-epsg-3857}/g,w)}isChildOf(u){const d=this.z-u.z;return d>0&&u.x===this.x>>d&&u.y===this.y>>d}getTilePoint(u){const d=Math.pow(2,this.z);return new c((u.x*d-this.x)*At,(u.y*d-this.y)*At)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Gv{constructor(u,d){this.wrap=u,this.canonical=d,this.key=np(u,d.z,d.z,d.x,d.y)}}class qr{constructor(u,d,b,w,k){if(this.terrainRttPosMatrix32f=null,u<b)throw new Error(`overscaledZ should be >= z; overscaledZ = ${u}; z = ${b}`);this.overscaledZ=u,this.wrap=d,this.canonical=new iy(b,+w,+k),this.key=np(d,u,b,w,k)}clone(){return new qr(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(u){return this.overscaledZ===u.overscaledZ&&this.wrap===u.wrap&&this.canonical.equals(u.canonical)}scaledTo(u){if(u>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${u}; overscaledZ = ${this.overscaledZ}`);const d=this.canonical.z-u;return u>this.canonical.z?new qr(u,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new qr(u,this.wrap,u,this.canonical.x>>d,this.canonical.y>>d)}isOverscaled(){return this.overscaledZ>this.canonical.z}calculateScaledKey(u,d){if(u>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${u}; overscaledZ = ${this.overscaledZ}`);const b=this.canonical.z-u;return u>this.canonical.z?np(this.wrap*+d,u,this.canonical.z,this.canonical.x,this.canonical.y):np(this.wrap*+d,u,u,this.canonical.x>>b,this.canonical.y>>b)}isChildOf(u){if(u.wrap!==this.wrap||this.overscaledZ-u.overscaledZ<=0)return!1;if(u.overscaledZ===0)return this.overscaledZ>0;const d=this.canonical.z-u.canonical.z;return!(d<0)&&u.canonical.x===this.canonical.x>>d&&u.canonical.y===this.canonical.y>>d}children(u){if(this.overscaledZ>=u)return[new qr(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const d=this.canonical.z+1,b=2*this.canonical.x,w=2*this.canonical.y;return[new qr(d,this.wrap,d,b,w),new qr(d,this.wrap,d,b+1,w),new qr(d,this.wrap,d,b,w+1),new qr(d,this.wrap,d,b+1,w+1)]}isLessThan(u){return this.wrap<u.wrap||!(this.wrap>u.wrap)&&(this.overscaledZ<u.overscaledZ||!(this.overscaledZ>u.overscaledZ)&&(this.canonical.x<u.canonical.x||!(this.canonical.x>u.canonical.x)&&this.canonical.y<u.canonical.y))}wrapped(){return new qr(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(u){return new qr(this.overscaledZ,u,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Gv(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(u){return this.canonical.getTilePoint(new Ws(u.x-this.wrap,u.y))}}function np(f,u,d,b,w){(f*=2)<0&&(f=-1*f-1);const k=1<<d;return(k*k*f+k*w+b).toString(36)+d.toString(36)+u.toString(36)}function Xa(f,u){return u?f.properties[u]:f.id}Vn("CanonicalTileID",iy),Vn("OverscaledTileID",qr,{omit:["terrainRttPosMatrix32f"]});class nm{constructor(){this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0}extend(u){return this.minX=Math.min(this.minX,u.x),this.minY=Math.min(this.minY,u.y),this.maxX=Math.max(this.maxX,u.x),this.maxY=Math.max(this.maxY,u.y),this}expandBy(u){return this.minX-=u,this.minY-=u,this.maxX+=u,this.maxY+=u,(this.minX>this.maxX||this.minY>this.maxY)&&(this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0),this}shrinkBy(u){return this.expandBy(-u)}map(u){const d=new nm;return d.extend(u(new c(this.minX,this.minY))),d.extend(u(new c(this.maxX,this.minY))),d.extend(u(new c(this.minX,this.maxY))),d.extend(u(new c(this.maxX,this.maxY))),d}static fromPoints(u){const d=new nm;for(const b of u)d.extend(b);return d}contains(u){return u.x>=this.minX&&u.x<=this.maxX&&u.y>=this.minY&&u.y<=this.maxY}empty(){return this.minX>this.maxX}width(){return this.maxX-this.minX}height(){return this.maxY-this.minY}covers(u){return!this.empty()&&!u.empty()&&u.minX>=this.minX&&u.maxX<=this.maxX&&u.minY>=this.minY&&u.maxY<=this.maxY}intersects(u){return!this.empty()&&!u.empty()&&u.minX<=this.maxX&&u.maxX>=this.minX&&u.minY<=this.maxY&&u.maxY>=this.minY}}class ry{constructor(u){this._stringToNumber={},this._numberToString=[];for(let d=0;d<u.length;d++){const b=u[d];this._stringToNumber[b]=d,this._numberToString[d]=b}}encode(u){return this._stringToNumber[u]}decode(u){if(u>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${u} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[u]}}class gg{constructor(u,d,b,w,k){this.type="Feature",this._vectorTileFeature=u,u._z=d,u._x=b,u._y=w,this.properties=u.properties,this.id=k}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(u){this._geometry=u}toJSON(){const u={geometry:this.geometry};for(const d in this)d!=="_geometry"&&d!=="_vectorTileFeature"&&(u[d]=this[d]);return u}}class yg{constructor(u,d){this.tileID=u,this.x=u.canonical.x,this.y=u.canonical.y,this.z=u.canonical.z,this.grid=new Fd(At,16,0),this.grid3D=new Fd(At,16,0),this.featureIndexArray=new gt,this.promoteId=d}insert(u,d,b,w,k,D){const K=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(b,w,k);const N=D?this.grid3D:this.grid;for(let te=0;te<d.length;te++){const re=d[te],Ae=[1/0,1/0,-1/0,-1/0];for(let Oe=0;Oe<re.length;Oe++){const De=re[Oe];Ae[0]=Math.min(Ae[0],De.x),Ae[1]=Math.min(Ae[1],De.y),Ae[2]=Math.max(Ae[2],De.x),Ae[3]=Math.max(Ae[3],De.y)}Ae[0]<At&&Ae[1]<At&&Ae[2]>=0&&Ae[3]>=0&&N.insert(K,Ae[0],Ae[1],Ae[2],Ae[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Sv(new zu(this.rawTileData)).layers,this.sourceLayerCoder=new ry(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(u,d,b,w){this.loadVTLayers();const k=u.params,D=At/u.tileSize/u.scale,K=zl(k.filter,k.globalState),N=u.queryGeometry,te=u.queryPadding*D,re=nm.fromPoints(N),Ae=this.grid.query(re.minX-te,re.minY-te,re.maxX+te,re.maxY+te),Oe=nm.fromPoints(u.cameraQueryGeometry).expandBy(te),De=this.grid3D.query(Oe.minX,Oe.minY,Oe.maxX,Oe.maxY,((He,st,Tt,dt)=>(function(Ct,jt,Zt,fn,Wn){for(const Nn of Ct)if(jt<=Nn.x&&Zt<=Nn.y&&fn>=Nn.x&&Wn>=Nn.y)return!0;const Kn=[new c(jt,Zt),new c(jt,Wn),new c(fn,Wn),new c(fn,Zt)];if(Ct.length>2){for(const Nn of Kn)if(Qi(Ct,Nn))return!0}for(let Nn=0;Nn<Ct.length-1;Nn++)if(C0(Ct[Nn],Ct[Nn+1],Kn))return!0;return!1})(u.cameraQueryGeometry,He-te,st-te,Tt+te,dt+te)));for(const He of De)Ae.push(He);Ae.sort(j0);const Ue={};let Ge;for(let He=0;He<Ae.length;He++){const st=Ae[He];if(st===Ge)continue;Ge=st;const Tt=this.featureIndexArray.get(st);let dt=null;this.loadMatchingFeature(Ue,Tt.bucketIndex,Tt.sourceLayerIndex,Tt.featureIndex,K,k.layers,k.availableImages,d,b,w,((Ct,jt,Zt)=>(dt||(dt=Yd(Ct)),jt.queryIntersectsFeature({queryGeometry:N,feature:Ct,featureState:Zt,geometry:dt,zoom:this.z,transform:u.transform,pixelsToTileUnits:D,pixelPosMatrix:u.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:u.getElevation}))))}return Ue}loadMatchingFeature(u,d,b,w,k,D,K,N,te,re,Ae){const Oe=this.bucketLayerIDs[d];if(D&&!Oe.some((He=>D.has(He))))return;const De=this.sourceLayerCoder.decode(b),Ue=this.vtLayers[De].feature(w);if(k.needGeometry){const He=Va(Ue,!0);if(!k.filter(new To(this.tileID.overscaledZ),He,this.tileID.canonical))return}else if(!k.filter(new To(this.tileID.overscaledZ),Ue))return;const Ge=this.getId(Ue,De);for(let He=0;He<Oe.length;He++){const st=Oe[He];if(D&&!D.has(st))continue;const Tt=N[st];if(!Tt)continue;let dt={};Ge&&re&&(dt=re.getState(Tt.sourceLayer||"_geojsonTileLayer",Ge));const Ct=Ke({},te[st]);Ct.paint=oy(Ct.paint,Tt.paint,Ue,dt,K),Ct.layout=oy(Ct.layout,Tt.layout,Ue,dt,K);const jt=!Ae||Ae(Ue,Tt,dt);if(!jt)continue;const Zt=new gg(Ue,this.z,this.x,this.y,Ge);Zt.layer=Ct;let fn=u[st];fn===void 0&&(fn=u[st]=[]),fn.push({featureIndex:w,feature:Zt,intersectionZ:jt})}}lookupSymbolFeatures(u,d,b,w,k,D,K,N){const te={};this.loadVTLayers();const re=zl(k.filterSpec,k.globalState);for(const Ae of u)this.loadMatchingFeature(te,b,w,Ae,re,D,K,N,d);return te}hasLayer(u){for(const d of this.bucketLayerIDs)for(const b of d)if(u===b)return!0;return!1}getId(u,d){var b;let w=u.id;return this.promoteId&&(w=u.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[d]],typeof w=="boolean"&&(w=Number(w)),w===void 0&&(!((b=u.properties)===null||b===void 0)&&b.cluster)&&this.promoteId&&(w=Number(u.properties.cluster_id))),w}}function oy(f,u,d,b,w){return Se(f,((k,D)=>{const K=u instanceof Nd?u.get(D):null;return K&&K.evaluate?K.evaluate(d,b,w):K}))}function j0(f,u){return u-f}function vg(f,u,d,b,w){const k=[];for(let D=0;D<f.length;D++){const K=f[D];let N;for(let te=0;te<K.length-1;te++){let re=K[te],Ae=K[te+1];re.x<u&&Ae.x<u||(re.x<u?re=new c(u,re.y+(u-re.x)/(Ae.x-re.x)*(Ae.y-re.y))._round():Ae.x<u&&(Ae=new c(u,re.y+(u-re.x)/(Ae.x-re.x)*(Ae.y-re.y))._round()),re.y<d&&Ae.y<d||(re.y<d?re=new c(re.x+(d-re.y)/(Ae.y-re.y)*(Ae.x-re.x),d)._round():Ae.y<d&&(Ae=new c(re.x+(d-re.y)/(Ae.y-re.y)*(Ae.x-re.x),d)._round()),re.x>=b&&Ae.x>=b||(re.x>=b?re=new c(b,re.y+(b-re.x)/(Ae.x-re.x)*(Ae.y-re.y))._round():Ae.x>=b&&(Ae=new c(b,re.y+(b-re.x)/(Ae.x-re.x)*(Ae.y-re.y))._round()),re.y>=w&&Ae.y>=w||(re.y>=w?re=new c(re.x+(w-re.y)/(Ae.y-re.y)*(Ae.x-re.x),w)._round():Ae.y>=w&&(Ae=new c(re.x+(w-re.y)/(Ae.y-re.y)*(Ae.x-re.x),w)._round()),N&&re.equals(N[N.length-1])||(N=[re],k.push(N)),N.push(Ae)))))}}return k}Vn("FeatureIndex",yg,{omit:["rawTileData","sourceLayerCoder"]});class Ja extends c{constructor(u,d,b,w){super(u,d),this.angle=b,w!==void 0&&(this.segment=w)}clone(){return new Ja(this.x,this.y,this.angle,this.segment)}}function sf(f,u,d,b,w){if(u.segment===void 0||d===0)return!0;let k=u,D=u.segment+1,K=0;for(;K>-d/2;){if(D--,D<0)return!1;K-=f[D].dist(k),k=f[D]}K+=f[D].dist(f[D+1]),D++;const N=[];let te=0;for(;K<d/2;){const re=f[D],Ae=f[D+1];if(!Ae)return!1;let Oe=f[D-1].angleTo(re)-re.angleTo(Ae);for(Oe=Math.abs((Oe+3*Math.PI)%(2*Math.PI)-Math.PI),N.push({distance:K,angleDelta:Oe}),te+=Oe;K-N[0].distance>b;)te-=N.shift().angleDelta;if(te>w)return!1;D++,K+=re.dist(Ae)}return!0}function sy(f){let u=0;for(let d=0;d<f.length-1;d++)u+=f[d].dist(f[d+1]);return u}function wC(f,u,d){return f?.6*u*d:0}function Wv(f,u){return Math.max(f?f.right-f.left:0,u?u.right-u.left:0)}function o2(f,u,d,b,w,k){const D=wC(d,w,k),K=Wv(d,b)*k;let N=0;const te=sy(f)/2;for(let re=0;re<f.length-1;re++){const Ae=f[re],Oe=f[re+1],De=Ae.dist(Oe);if(N+De>te){const Ue=(te-N)/De,Ge=Ya.number(Ae.x,Oe.x,Ue),He=Ya.number(Ae.y,Oe.y,Ue),st=new Ja(Ge,He,Oe.angleTo(Ae),re);return st._round(),!D||sf(f,st,K,D,u)?st:void 0}N+=De}}function SC(f,u,d,b,w,k,D,K,N){const te=wC(b,k,D),re=Wv(b,w),Ae=re*D,Oe=f[0].x===0||f[0].x===N||f[0].y===0||f[0].y===N;return u-Ae<u/4&&(u=Ae+u/4),Qv(f,Oe?u/2*K%u:(re/2+2*k)*D*K%u,u,te,d,Ae,Oe,!1,N)}function Qv(f,u,d,b,w,k,D,K,N){const te=k/2,re=sy(f);let Ae=0,Oe=u-d,De=[];for(let Ue=0;Ue<f.length-1;Ue++){const Ge=f[Ue],He=f[Ue+1],st=Ge.dist(He),Tt=He.angleTo(Ge);for(;Oe+d<Ae+st;){Oe+=d;const dt=(Oe-Ae)/st,Ct=Ya.number(Ge.x,He.x,dt),jt=Ya.number(Ge.y,He.y,dt);if(Ct>=0&&Ct<N&&jt>=0&&jt<N&&Oe-te>=0&&Oe+te<=re){const Zt=new Ja(Ct,jt,Tt,Ue);Zt._round(),b&&!sf(f,Zt,k,b,w)||De.push(Zt)}}Ae+=st}return K||De.length||D||(De=Qv(f,Ae/2,d,b,w,k,D,!0,N)),De}function ud(f,u,d,b){const w=[],k=f.image,D=k.pixelRatio,K=k.paddedRect.w-2,N=k.paddedRect.h-2;let te={x1:f.left,y1:f.top,x2:f.right,y2:f.bottom};const re=k.stretchX||[[0,K]],Ae=k.stretchY||[[0,N]],Oe=(an,ji)=>an+ji[1]-ji[0],De=re.reduce(Oe,0),Ue=Ae.reduce(Oe,0),Ge=K-De,He=N-Ue;let st=0,Tt=De,dt=0,Ct=Ue,jt=0,Zt=Ge,fn=0,Wn=He;if(k.content&&b){const an=k.content,ji=an[2]-an[0],er=an[3]-an[1];(k.textFitWidth||k.textFitHeight)&&(te=X1(f)),st=ar(re,0,an[0]),dt=ar(Ae,0,an[1]),Tt=ar(re,an[0],an[2]),Ct=ar(Ae,an[1],an[3]),jt=an[0]-st,fn=an[1]-dt,Zt=ji-Tt,Wn=er-Ct}const Kn=te.x1,Nn=te.y1,xi=te.x2-Kn,zn=te.y2-Nn,Gn=(an,ji,er,Di)=>{const hi=ju(an.stretch-st,Tt,xi,Kn),Tr=im(an.fixed-jt,Zt,an.stretch,De),xs=ju(ji.stretch-dt,Ct,zn,Nn),xa=im(ji.fixed-fn,Wn,ji.stretch,Ue),wl=ju(er.stretch-st,Tt,xi,Kn),vc=im(er.fixed-jt,Zt,er.stretch,De),Fa=ju(Di.stretch-dt,Ct,zn,Nn),Qs=im(Di.fixed-fn,Wn,Di.stretch,Ue),Ro=new c(hi,xs),ha=new c(wl,xs),Ma=new c(wl,Fa),qs=new c(hi,Fa),Gu=new c(Tr/D,xa/D),Vc=new c(vc/D,Qs/D),Ys=u*Math.PI/180;if(Ys){const Sa=Math.sin(Ys),el=Math.cos(Ys),za=[el,-Sa,Sa,el];Ro._matMult(za),ha._matMult(za),qs._matMult(za),Ma._matMult(za)}const Wu=an.stretch+an.fixed,wa=ji.stretch+ji.fixed;return{tl:Ro,tr:ha,bl:qs,br:Ma,tex:{x:k.paddedRect.x+1+Wu,y:k.paddedRect.y+1+wa,w:er.stretch+er.fixed-Wu,h:Di.stretch+Di.fixed-wa},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Gu,pixelOffsetBR:Vc,minFontScaleX:Zt/D/xi,minFontScaleY:Wn/D/zn,isSDF:d}};if(b&&(k.stretchX||k.stretchY)){const an=ay(re,Ge,De),ji=ay(Ae,He,Ue);for(let er=0;er<an.length-1;er++){const Di=an[er],hi=an[er+1];for(let Tr=0;Tr<ji.length-1;Tr++)w.push(Gn(Di,ji[Tr],hi,ji[Tr+1]))}}else w.push(Gn({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:K+1},{fixed:0,stretch:N+1}));return w}function ar(f,u,d){let b=0;for(const w of f)b+=Math.max(u,Math.min(d,w[1]))-Math.max(u,Math.min(d,w[0]));return b}function ay(f,u,d){const b=[{fixed:-1,stretch:0}];for(const[w,k]of f){const D=b[b.length-1];b.push({fixed:w-D.stretch,stretch:D.stretch}),b.push({fixed:w-D.stretch,stretch:D.stretch+(k-w)})}return b.push({fixed:u+1,stretch:d}),b}function ju(f,u,d,b){return f/u*d+b}function im(f,u,d,b){return f-u*d/b}Vn("Anchor",Ja);class ly{constructor(u,d,b,w,k,D,K,N,te,re){var Ae;if(this.boxStartIndex=u.length,te){let Oe=D.top,De=D.bottom;const Ue=D.collisionPadding;Ue&&(Oe-=Ue[1],De+=Ue[3]);let Ge=De-Oe;Ge>0&&(Ge=Math.max(10,Ge),this.circleDiameter=Ge)}else{const Oe=!((Ae=D.image)===null||Ae===void 0)&&Ae.content&&(D.image.textFitWidth||D.image.textFitHeight)?X1(D):{x1:D.left,y1:D.top,x2:D.right,y2:D.bottom};Oe.y1=Oe.y1*K-N[0],Oe.y2=Oe.y2*K+N[2],Oe.x1=Oe.x1*K-N[3],Oe.x2=Oe.x2*K+N[1];const De=D.collisionPadding;if(De&&(Oe.x1-=De[0]*K,Oe.y1-=De[1]*K,Oe.x2+=De[2]*K,Oe.y2+=De[3]*K),re){const Ue=new c(Oe.x1,Oe.y1),Ge=new c(Oe.x2,Oe.y1),He=new c(Oe.x1,Oe.y2),st=new c(Oe.x2,Oe.y2),Tt=re*Math.PI/180;Ue._rotate(Tt),Ge._rotate(Tt),He._rotate(Tt),st._rotate(Tt),Oe.x1=Math.min(Ue.x,Ge.x,He.x,st.x),Oe.x2=Math.max(Ue.x,Ge.x,He.x,st.x),Oe.y1=Math.min(Ue.y,Ge.y,He.y,st.y),Oe.y2=Math.max(Ue.y,Ge.y,He.y,st.y)}u.emplaceBack(d.x,d.y,Oe.x1,Oe.y1,Oe.x2,Oe.y2,b,w,k)}this.boxEndIndex=u.length}}class ns{constructor(u=[],d=(b,w)=>b<w?-1:b>w?1:0){if(this.data=u,this.length=this.data.length,this.compare=d,this.length>0)for(let b=(this.length>>1)-1;b>=0;b--)this._down(b)}push(u){this.data.push(u),this._up(this.length++)}pop(){if(this.length===0)return;const u=this.data[0],d=this.data.pop();return--this.length>0&&(this.data[0]=d,this._down(0)),u}peek(){return this.data[0]}_up(u){const{data:d,compare:b}=this,w=d[u];for(;u>0;){const k=u-1>>1,D=d[k];if(b(w,D)>=0)break;d[u]=D,u=k}d[u]=w}_down(u){const{data:d,compare:b}=this,w=this.length>>1,k=d[u];for(;u<w;){let D=1+(u<<1);const K=D+1;if(K<this.length&&b(d[K],d[D])<0&&(D=K),b(d[D],k)>=0)break;d[u]=d[D],u=D}d[u]=k}}function EC(f,u=1,d=!1){const b=nm.fromPoints(f[0]),w=Math.min(b.width(),b.height());let k=w/2;const D=new ns([],uy),{minX:K,minY:N,maxX:te,maxY:re}=b;if(w===0)return new c(K,N);for(let De=K;De<te;De+=w)for(let Ue=N;Ue<re;Ue+=w)D.push(new _h(De+k,Ue+k,k,f));let Ae=(function(De){let Ue=0,Ge=0,He=0;const st=De[0];for(let Tt=0,dt=st.length,Ct=dt-1;Tt<dt;Ct=Tt++){const jt=st[Tt],Zt=st[Ct],fn=jt.x*Zt.y-Zt.x*jt.y;Ge+=(jt.x+Zt.x)*fn,He+=(jt.y+Zt.y)*fn,Ue+=3*fn}return new _h(Ge/Ue,He/Ue,0,De)})(f),Oe=D.length;for(;D.length;){const De=D.pop();(De.d>Ae.d||!Ae.d)&&(Ae=De,d&&console.log("found best %d after %d probes",Math.round(1e4*De.d)/1e4,Oe)),De.max-Ae.d<=u||(k=De.h/2,D.push(new _h(De.p.x-k,De.p.y-k,k,f)),D.push(new _h(De.p.x+k,De.p.y-k,k,f)),D.push(new _h(De.p.x-k,De.p.y+k,k,f)),D.push(new _h(De.p.x+k,De.p.y+k,k,f)),Oe+=4)}return d&&(console.log(`num probes: ${Oe}`),console.log(`best distance: ${Ae.d}`)),Ae.p}function uy(f,u){return u.max-f.max}function _h(f,u,d,b){this.p=new c(f,u),this.h=d,this.d=(function(w,k){let D=!1,K=1/0;for(let N=0;N<k.length;N++){const te=k[N];for(let re=0,Ae=te.length,Oe=Ae-1;re<Ae;Oe=re++){const De=te[re],Ue=te[Oe];De.y>w.y!=Ue.y>w.y&&w.x<(Ue.x-De.x)*(w.y-De.y)/(Ue.y-De.y)+De.x&&(D=!D),K=Math.min(K,ca(w,De,Ue))}}return(D?1:-1)*Math.sqrt(K)})(this.p,b),this.max=this.d+this.h*Math.SQRT2}var Vl;s.aE=void 0,(Vl=s.aE||(s.aE={}))[Vl.center=1]="center",Vl[Vl.left=2]="left",Vl[Vl.right=3]="right",Vl[Vl.top=4]="top",Vl[Vl.bottom=5]="bottom",Vl[Vl["top-left"]=6]="top-left",Vl[Vl["top-right"]=7]="top-right",Vl[Vl["bottom-left"]=8]="bottom-left",Vl[Vl["bottom-right"]=9]="bottom-right";const $c=Number.POSITIVE_INFINITY;function cy(f,u){return u[1]!==$c?(function(d,b,w){let k=0,D=0;switch(b=Math.abs(b),w=Math.abs(w),d){case"top-right":case"top-left":case"top":D=w-7;break;case"bottom-right":case"bottom-left":case"bottom":D=7-w}switch(d){case"top-right":case"bottom-right":case"right":k=-b;break;case"top-left":case"bottom-left":case"left":k=b}return[k,D]})(f,u[0],u[1]):(function(d,b){let w=0,k=0;b<0&&(b=0);const D=b/Math.SQRT2;switch(d){case"top-right":case"top-left":k=D-7;break;case"bottom-right":case"bottom-left":k=7-D;break;case"bottom":k=7-b;break;case"top":k=b-7}switch(d){case"top-right":case"bottom-right":w=-D;break;case"top-left":case"bottom-left":w=D;break;case"left":w=b;break;case"right":w=-b}return[w,k]})(f,u[0])}function qv(f,u,d){var b;const w=f.layout,k=(b=w.get("text-variable-anchor-offset"))===null||b===void 0?void 0:b.evaluate(u,{},d);if(k){const K=k.values,N=[];for(let te=0;te<K.length;te+=2){const re=N[te]=K[te],Ae=K[te+1].map((Oe=>Oe*Aa));re.startsWith("top")?Ae[1]-=7:re.startsWith("bottom")&&(Ae[1]+=7),N[te+1]=Ae}return new So(N)}const D=w.get("text-variable-anchor");if(D){let K;K=f._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[w.get("text-radial-offset").evaluate(u,{},d)*Aa,$c]:w.get("text-offset").evaluate(u,{},d).map((te=>te*Aa));const N=[];for(const te of D)N.push(te,cy(te,K));return new So(N)}return null}function Ay(f){switch(f){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function OC(f,u,d,b,w,k,D,K,N,te,re,Ae){let Oe=k.textMaxSize.evaluate(u,{});Oe===void 0&&(Oe=D);const De=f.layers[0].layout,Ue=De.get("icon-offset").evaluate(u,{},re),Ge=mA(d.horizontal),He=D/24,st=f.tilePixelRatio*He,Tt=f.tilePixelRatio*Oe/24,dt=f.tilePixelRatio*K,Ct=f.tilePixelRatio*De.get("symbol-spacing"),jt=De.get("text-padding")*f.tilePixelRatio,Zt=(function(er,Di,hi,Tr=1){const xs=er.get("icon-padding").evaluate(Di,{},hi),xa=xs&&xs.values;return[xa[0]*Tr,xa[1]*Tr,xa[2]*Tr,xa[3]*Tr]})(De,u,re,f.tilePixelRatio),fn=De.get("text-max-angle")/180*Math.PI,Wn=De.get("text-rotation-alignment")!=="viewport"&&De.get("symbol-placement")!=="point",Kn=De.get("icon-rotation-alignment")==="map"&&De.get("symbol-placement")!=="point",Nn=De.get("symbol-placement"),xi=Ct/2,zn=De.get("icon-text-fit");let Gn;b&&zn!=="none"&&(f.allowVerticalPlacement&&d.vertical&&(Gn=U0(b,d.vertical,zn,De.get("icon-text-fit-padding"),Ue,He)),Ge&&(b=U0(b,Ge,zn,De.get("icon-text-fit-padding"),Ue,He)));const an=re?Ae.line.getGranularityForZoomLevel(re.z):1,ji=(er,Di)=>{Di.x<0||Di.x>=At||Di.y<0||Di.y>=At||(function(hi,Tr,xs,xa,wl,vc,Fa,Qs,Ro,ha,Ma,qs,Gu,Vc,Ys,Wu,wa,Sa,el,za,Do,Hc,rm,Qu,bc){const cd=hi.addToLineVertexArray(Tr,xs);let Ad,om,Cg,af,A=0,g=0,_=0,I=0,W=-1,J=-1;const xe={};let $e=Wd("");if(hi.allowVerticalPlacement&&xa.vertical){const ri=Qs.layout.get("text-rotate").evaluate(Do,{},Qu)+90;Cg=new ly(Ro,Tr,ha,Ma,qs,xa.vertical,Gu,Vc,Ys,ri),Fa&&(af=new ly(Ro,Tr,ha,Ma,qs,Fa,wa,Sa,Ys,ri))}if(wl){const ri=Qs.layout.get("icon-rotate").evaluate(Do,{}),tr=Qs.layout.get("icon-text-fit")!=="none",Kr=ud(wl,ri,rm,tr),Lr=Fa?ud(Fa,ri,rm,tr):void 0;om=new ly(Ro,Tr,ha,Ma,qs,wl,wa,Sa,!1,ri),A=4*Kr.length;const Zc=hi.iconSizeData;let hd=null;Zc.kind==="source"?(hd=[vh*Qs.layout.get("icon-size").evaluate(Do,{})],hd[0]>gc&&ft(`${hi.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):Zc.kind==="composite"&&(hd=[vh*Hc.compositeIconSizes[0].evaluate(Do,{},Qu),vh*Hc.compositeIconSizes[1].evaluate(Do,{},Qu)],(hd[0]>gc||hd[1]>gc)&&ft(`${hi.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),hi.addSymbols(hi.icon,Kr,hd,za,el,Do,s.ao.none,Tr,cd.lineStartIndex,cd.lineLength,-1,Qu),W=hi.icon.placedSymbolArray.length-1,Lr&&(g=4*Lr.length,hi.addSymbols(hi.icon,Lr,hd,za,el,Do,s.ao.vertical,Tr,cd.lineStartIndex,cd.lineLength,-1,Qu),J=hi.icon.placedSymbolArray.length-1)}const _t=Object.keys(xa.horizontal);for(const ri of _t){const tr=xa.horizontal[ri];if(!Ad){$e=Wd(tr.text);const Lr=Qs.layout.get("text-rotate").evaluate(Do,{},Qu);Ad=new ly(Ro,Tr,ha,Ma,qs,tr,Gu,Vc,Ys,Lr)}const Kr=tr.positionedLines.length===1;if(_+=bg(hi,Tr,tr,vc,Qs,Ys,Do,Wu,cd,xa.vertical?s.ao.horizontal:s.ao.horizontalOnly,Kr?_t:[ri],xe,W,Hc,Qu),Kr)break}xa.vertical&&(I+=bg(hi,Tr,xa.vertical,vc,Qs,Ys,Do,Wu,cd,s.ao.vertical,["vertical"],xe,J,Hc,Qu));const $t=Ad?Ad.boxStartIndex:hi.collisionBoxArray.length,ln=Ad?Ad.boxEndIndex:hi.collisionBoxArray.length,pn=Cg?Cg.boxStartIndex:hi.collisionBoxArray.length,Xt=Cg?Cg.boxEndIndex:hi.collisionBoxArray.length,rn=om?om.boxStartIndex:hi.collisionBoxArray.length,Ti=om?om.boxEndIndex:hi.collisionBoxArray.length,lr=af?af.boxStartIndex:hi.collisionBoxArray.length,Ms=af?af.boxEndIndex:hi.collisionBoxArray.length;let Kt=-1;const kt=(ri,tr)=>ri&&ri.circleDiameter?Math.max(ri.circleDiameter,tr):tr;Kt=kt(Ad,Kt),Kt=kt(Cg,Kt),Kt=kt(om,Kt),Kt=kt(af,Kt);const qt=Kt>-1?1:0;qt&&(Kt*=bc/Aa),hi.glyphOffsetArray.length>=$l.MAX_GLYPHS&&ft("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Do.sortKey!==void 0&&hi.addToSortKeyRanges(hi.symbolInstances.length,Do.sortKey);const hn=qv(Qs,Do,Qu),[Zi,jo]=(function(ri,tr){const Kr=ri.length,Lr=tr?.values;if(Lr?.length>0)for(let Zc=0;Zc<Lr.length;Zc+=2){const hd=Lr[Zc+1];ri.emplaceBack(s.aE[Lr[Zc]],hd[0],hd[1])}return[Kr,ri.length]})(hi.textAnchorOffsets,hn);hi.symbolInstances.emplaceBack(Tr.x,Tr.y,xe.right>=0?xe.right:-1,xe.center>=0?xe.center:-1,xe.left>=0?xe.left:-1,xe.vertical||-1,W,J,$e,$t,ln,pn,Xt,rn,Ti,lr,Ms,ha,_,I,A,g,qt,0,Gu,Kt,Zi,jo)})(f,Di,er,d,b,w,Gn,f.layers[0],f.collisionBoxArray,u.index,u.sourceLayerIndex,f.index,st,[jt,jt,jt,jt],Wn,N,dt,Zt,Kn,Ue,u,k,te,re,D)};if(Nn==="line")for(const er of vg(u.geometry,0,0,At,At)){const Di=$f(er,an),hi=SC(Di,Ct,fn,d.vertical||Ge,b,24,Tt,f.overscaling,At);for(const Tr of hi)Ge&&BC(f,Ge.text,xi,Tr)||ji(Di,Tr)}else if(Nn==="line-center"){for(const er of u.geometry)if(er.length>1){const Di=$f(er,an),hi=o2(Di,fn,d.vertical||Ge,b,24,Tt);hi&&ji(Di,hi)}}else if(u.type==="Polygon")for(const er of Uf(u.geometry,0)){const Di=EC(er,16);ji($f(er[0],an,!0),new Ja(Di.x,Di.y,0))}else if(u.type==="LineString")for(const er of u.geometry){const Di=$f(er,an);ji(Di,new Ja(Di[0].x,Di[0].y,0))}else if(u.type==="Point")for(const er of u.geometry)for(const Di of er)ji([Di],new Ja(Di.x,Di.y,0))}function bg(f,u,d,b,w,k,D,K,N,te,re,Ae,Oe,De,Ue){const Ge=(function(Tt,dt,Ct,jt,Zt,fn,Wn,Kn){const Nn=jt.layout.get("text-rotate").evaluate(fn,{})*Math.PI/180,xi=[];for(const zn of dt.positionedLines)for(const Gn of zn.positionedGlyphs){if(!Gn.rect)continue;const an=Gn.rect||{};let ji=4,er=!0,Di=1,hi=0;const Tr=(Zt||Kn)&&Gn.vertical,xs=Gn.metrics.advance*Gn.scale/2;if(Kn&&dt.verticalizable&&(hi=zn.lineOffset/2-(Gn.imageName?-(Aa-Gn.metrics.width*Gn.scale)/2:(Gn.scale-1)*Aa)),Gn.imageName){const Sa=Wn[Gn.imageName];er=Sa.sdf,Di=Sa.pixelRatio,ji=1/Di}const xa=Zt?[Gn.x+xs,Gn.y]:[0,0];let wl=Zt?[0,0]:[Gn.x+xs+Ct[0],Gn.y+Ct[1]-hi],vc=[0,0];Tr&&(vc=wl,wl=[0,0]);const Fa=Gn.metrics.isDoubleResolution?2:1,Qs=(Gn.metrics.left-ji)*Gn.scale-xs+wl[0],Ro=(-Gn.metrics.top-ji)*Gn.scale+wl[1],ha=Qs+an.w/Fa*Gn.scale/Di,Ma=Ro+an.h/Fa*Gn.scale/Di,qs=new c(Qs,Ro),Gu=new c(ha,Ro),Vc=new c(Qs,Ma),Ys=new c(ha,Ma);if(Tr){const Sa=new c(-xs,xs- -17),el=-Math.PI/2,za=12-xs,Do=new c(22-za,-(Gn.imageName?za:0)),Hc=new c(...vc);qs._rotateAround(el,Sa)._add(Do)._add(Hc),Gu._rotateAround(el,Sa)._add(Do)._add(Hc),Vc._rotateAround(el,Sa)._add(Do)._add(Hc),Ys._rotateAround(el,Sa)._add(Do)._add(Hc)}if(Nn){const Sa=Math.sin(Nn),el=Math.cos(Nn),za=[el,-Sa,Sa,el];qs._matMult(za),Gu._matMult(za),Vc._matMult(za),Ys._matMult(za)}const Wu=new c(0,0),wa=new c(0,0);xi.push({tl:qs,tr:Gu,bl:Vc,br:Ys,tex:an,writingMode:dt.writingMode,glyphOffset:xa,sectionIndex:Gn.sectionIndex,isSDF:er,pixelOffsetTL:Wu,pixelOffsetBR:wa,minFontScaleX:0,minFontScaleY:0})}return xi})(0,d,K,w,k,D,b,f.allowVerticalPlacement),He=f.textSizeData;let st=null;He.kind==="source"?(st=[vh*w.layout.get("text-size").evaluate(D,{})],st[0]>gc&&ft(`${f.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):He.kind==="composite"&&(st=[vh*De.compositeTextSizes[0].evaluate(D,{},Ue),vh*De.compositeTextSizes[1].evaluate(D,{},Ue)],(st[0]>gc||st[1]>gc)&&ft(`${f.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),f.addSymbols(f.text,Ge,st,K,k,D,te,u,N.lineStartIndex,N.lineLength,Oe,Ue);for(const Tt of re)Ae[Tt]=f.text.placedSymbolArray.length-1;return 4*Ge.length}function mA(f){for(const u in f)return f[u];return null}function BC(f,u,d,b){const w=f.compareText;if(u in w){const k=w[u];for(let D=k.length-1;D>=0;D--)if(b.dist(k[D])<d)return!0}else w[u]=[];return w[u].push(b),!1}const N0=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class xh{static from(u){if(!(u instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[d,b]=new Uint8Array(u,0,2);if(d!==219)throw new Error("Data does not appear to be in a KDBush format.");const w=b>>4;if(w!==1)throw new Error(`Got v${w} data when expected v1.`);const k=N0[15&b];if(!k)throw new Error("Unrecognized array type.");const[D]=new Uint16Array(u,2,1),[K]=new Uint32Array(u,4,1);return new xh(K,D,k,u)}constructor(u,d=64,b=Float64Array,w){if(isNaN(u)||u<0)throw new Error(`Unpexpected numItems value: ${u}.`);this.numItems=+u,this.nodeSize=Math.min(Math.max(+d,2),65535),this.ArrayType=b,this.IndexArrayType=u<65536?Uint16Array:Uint32Array;const k=N0.indexOf(this.ArrayType),D=2*u*this.ArrayType.BYTES_PER_ELEMENT,K=u*this.IndexArrayType.BYTES_PER_ELEMENT,N=(8-K%8)%8;if(k<0)throw new Error(`Unexpected typed array class: ${b}.`);w&&w instanceof ArrayBuffer?(this.data=w,this.ids=new this.IndexArrayType(this.data,8,u),this.coords=new this.ArrayType(this.data,8+K+N,2*u),this._pos=2*u,this._finished=!0):(this.data=new ArrayBuffer(8+D+K+N),this.ids=new this.IndexArrayType(this.data,8,u),this.coords=new this.ArrayType(this.data,8+K+N,2*u),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+k]),new Uint16Array(this.data,2,1)[0]=d,new Uint32Array(this.data,4,1)[0]=u)}add(u,d){const b=this._pos>>1;return this.ids[b]=b,this.coords[this._pos++]=u,this.coords[this._pos++]=d,b}finish(){const u=this._pos>>1;if(u!==this.numItems)throw new Error(`Added ${u} items when expected ${this.numItems}.`);return Yv(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(u,d,b,w){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:k,coords:D,nodeSize:K}=this,N=[0,k.length-1,0],te=[];for(;N.length;){const re=N.pop()||0,Ae=N.pop()||0,Oe=N.pop()||0;if(Ae-Oe<=K){for(let He=Oe;He<=Ae;He++){const st=D[2*He],Tt=D[2*He+1];st>=u&&st<=b&&Tt>=d&&Tt<=w&&te.push(k[He])}continue}const De=Oe+Ae>>1,Ue=D[2*De],Ge=D[2*De+1];Ue>=u&&Ue<=b&&Ge>=d&&Ge<=w&&te.push(k[De]),(re===0?u<=Ue:d<=Ge)&&(N.push(Oe),N.push(De-1),N.push(1-re)),(re===0?b>=Ue:w>=Ge)&&(N.push(De+1),N.push(Ae),N.push(1-re))}return te}within(u,d,b){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:w,coords:k,nodeSize:D}=this,K=[0,w.length-1,0],N=[],te=b*b;for(;K.length;){const re=K.pop()||0,Ae=K.pop()||0,Oe=K.pop()||0;if(Ae-Oe<=D){for(let He=Oe;He<=Ae;He++)dy(k[2*He],k[2*He+1],u,d)<=te&&N.push(w[He]);continue}const De=Oe+Ae>>1,Ue=k[2*De],Ge=k[2*De+1];dy(Ue,Ge,u,d)<=te&&N.push(w[De]),(re===0?u-b<=Ue:d-b<=Ge)&&(K.push(Oe),K.push(De-1),K.push(1-re)),(re===0?u+b>=Ue:d+b>=Ge)&&(K.push(De+1),K.push(Ae),K.push(1-re))}return N}}function Yv(f,u,d,b,w,k){if(w-b<=d)return;const D=b+w>>1;IC(f,u,D,b,w,k),Yv(f,u,d,b,D-1,1-k),Yv(f,u,d,D+1,w,1-k)}function IC(f,u,d,b,w,k){for(;w>b;){if(w-b>600){const te=w-b+1,re=d-b+1,Ae=Math.log(te),Oe=.5*Math.exp(2*Ae/3),De=.5*Math.sqrt(Ae*Oe*(te-Oe)/te)*(re-te/2<0?-1:1);IC(f,u,d,Math.max(b,Math.floor(d-re*Oe/te+De)),Math.min(w,Math.floor(d+(te-re)*Oe/te+De)),k)}const D=u[2*d+k];let K=b,N=w;for(FA(f,u,b,d),u[2*w+k]>D&&FA(f,u,b,w);K<N;){for(FA(f,u,K,N),K++,N--;u[2*K+k]<D;)K++;for(;u[2*N+k]>D;)N--}u[2*b+k]===D?FA(f,u,b,N):(N++,FA(f,u,N,w)),N<=d&&(b=N+1),d<=N&&(w=N-1)}}function FA(f,u,d,b){hy(f,d,b),hy(u,2*d,2*b),hy(u,2*d+1,2*b+1)}function hy(f,u,d){const b=f[u];f[u]=f[d],f[d]=b}function dy(f,u,d,b){const w=f-d,k=u-b;return w*w+k*k}var $v;s.cx=void 0,($v=s.cx||(s.cx={})).create="create",$v.load="load",$v.fullLoad="fullLoad";let fy=null,G0=[];const hl=1e3/60,Nu="loadTime",Vv="fullLoadTime",kC={mark(f){performance.mark(f)},frame(f){const u=f;fy!=null&&G0.push(u-fy),fy=u},clearMetrics(){fy=null,G0=[],performance.clearMeasures(Nu),performance.clearMeasures(Vv);for(const f in s.cx)performance.clearMarks(s.cx[f])},getPerformanceMetrics(){performance.measure(Nu,s.cx.create,s.cx.load),performance.measure(Vv,s.cx.create,s.cx.fullLoad);const f=performance.getEntriesByName(Nu)[0].duration,u=performance.getEntriesByName(Vv)[0].duration,d=G0.length,b=1/(G0.reduce(((k,D)=>k+D),0)/d/1e3),w=G0.filter((k=>k>hl)).reduce(((k,D)=>k+(D-hl)/hl),0);return{loadTime:f,fullLoadTime:u,fps:b,percentDroppedFrames:w/(d+w)*100,totalFrames:d}}};s.$=At,s.A=V,s.B=function([f,u,d]){return u+=90,u*=Math.PI/180,d*=Math.PI/180,{x:f*Math.cos(u)*Math.sin(d),y:f*Math.sin(u)*Math.sin(d),z:f*Math.cos(d)}},s.C=Ya,s.D=ti,s.E=en,s.F=To,s.G=Ym,s.H=Dn,s.I=Pv,s.J=class{constructor(f,u){this.target=f,this.mapId=u,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new MC((()=>this.process())),this.subscription=$n(this.target,"message",(d=>this.receive(d)),!1),this.globalScope=Ot(self)?f:window}registerMessageHandler(f,u){this.messageHandlers[f]=u}sendAsync(f,u){return new Promise(((d,b)=>{const w=Math.round(1e18*Math.random()).toString(36).substring(0,10),k=u?$n(u.signal,"abort",(()=>{k?.unsubscribe(),delete this.resolveRejects[w];const N={id:w,type:"<cancel>",origin:location.origin,targetMapId:f.targetMapId,sourceMapId:this.mapId};this.target.postMessage(N)}),co):null;this.resolveRejects[w]={resolve:N=>{k?.unsubscribe(),d(N)},reject:N=>{k?.unsubscribe(),b(N)}};const D=[],K=Object.assign(Object.assign({},f),{id:w,sourceMapId:this.mapId,origin:location.origin,data:Vh(f.data,D)});this.target.postMessage(K,{transfer:D})}))}receive(f){const u=f.data,d=u.id;if(!(u.origin!=="file://"&&location.origin!=="file://"&&u.origin!=="resource://android"&&location.origin!=="resource://android"&&u.origin!==location.origin||u.targetMapId&&this.mapId!==u.targetMapId)){if(u.type==="<cancel>"){delete this.tasks[d];const b=this.abortControllers[d];return delete this.abortControllers[d],void(b&&b.abort())}if(Ot(self)||u.mustQueue)return this.tasks[d]=u,this.taskQueue.push(d),void this.invoker.trigger();this.processTask(d,u)}}process(){if(this.taskQueue.length===0)return;const f=this.taskQueue.shift(),u=this.tasks[f];delete this.tasks[f],this.taskQueue.length>0&&this.invoker.trigger(),u&&this.processTask(f,u)}processTask(f,u){return a(this,void 0,void 0,(function*(){if(u.type==="<response>"){const w=this.resolveRejects[f];return delete this.resolveRejects[f],w?void(u.error?w.reject(Hh(u.error)):w.resolve(Hh(u.data))):void 0}if(!this.messageHandlers[u.type])return void this.completeTask(f,new Error(`Could not find a registered handler for ${u.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const d=Hh(u.data),b=new AbortController;this.abortControllers[f]=b;try{const w=yield this.messageHandlers[u.type](u.sourceMapId,d,b);this.completeTask(f,null,w)}catch(w){this.completeTask(f,w)}}))}completeTask(f,u,d){const b=[];delete this.abortControllers[f];const w={id:f,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:u?Vh(u):null,data:Vh(d,b)};this.target.postMessage(w,{transfer:b})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},s.K=Le,s.L=function(){var f=new V(16);return V!=Float32Array&&(f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[11]=0,f[12]=0,f[13]=0,f[14]=0),f[0]=1,f[5]=1,f[10]=1,f[15]=1,f},s.M=function(f,u,d){var b,w,k,D,K,N,te,re,Ae,Oe,De,Ue,Ge=d[0],He=d[1],st=d[2];return u===f?(f[12]=u[0]*Ge+u[4]*He+u[8]*st+u[12],f[13]=u[1]*Ge+u[5]*He+u[9]*st+u[13],f[14]=u[2]*Ge+u[6]*He+u[10]*st+u[14],f[15]=u[3]*Ge+u[7]*He+u[11]*st+u[15]):(w=u[1],k=u[2],D=u[3],K=u[4],N=u[5],te=u[6],re=u[7],Ae=u[8],Oe=u[9],De=u[10],Ue=u[11],f[0]=b=u[0],f[1]=w,f[2]=k,f[3]=D,f[4]=K,f[5]=N,f[6]=te,f[7]=re,f[8]=Ae,f[9]=Oe,f[10]=De,f[11]=Ue,f[12]=b*Ge+K*He+Ae*st+u[12],f[13]=w*Ge+N*He+Oe*st+u[13],f[14]=k*Ge+te*He+De*st+u[14],f[15]=D*Ge+re*He+Ue*st+u[15]),f},s.N=function(f,u,d){var b=d[0],w=d[1],k=d[2];return f[0]=u[0]*b,f[1]=u[1]*b,f[2]=u[2]*b,f[3]=u[3]*b,f[4]=u[4]*w,f[5]=u[5]*w,f[6]=u[6]*w,f[7]=u[7]*w,f[8]=u[8]*k,f[9]=u[9]*k,f[10]=u[10]*k,f[11]=u[11]*k,f[12]=u[12],f[13]=u[13],f[14]=u[14],f[15]=u[15],f},s.O=function(f,u,d){var b=u[0],w=u[1],k=u[2],D=u[3],K=u[4],N=u[5],te=u[6],re=u[7],Ae=u[8],Oe=u[9],De=u[10],Ue=u[11],Ge=u[12],He=u[13],st=u[14],Tt=u[15],dt=d[0],Ct=d[1],jt=d[2],Zt=d[3];return f[0]=dt*b+Ct*K+jt*Ae+Zt*Ge,f[1]=dt*w+Ct*N+jt*Oe+Zt*He,f[2]=dt*k+Ct*te+jt*De+Zt*st,f[3]=dt*D+Ct*re+jt*Ue+Zt*Tt,f[4]=(dt=d[4])*b+(Ct=d[5])*K+(jt=d[6])*Ae+(Zt=d[7])*Ge,f[5]=dt*w+Ct*N+jt*Oe+Zt*He,f[6]=dt*k+Ct*te+jt*De+Zt*st,f[7]=dt*D+Ct*re+jt*Ue+Zt*Tt,f[8]=(dt=d[8])*b+(Ct=d[9])*K+(jt=d[10])*Ae+(Zt=d[11])*Ge,f[9]=dt*w+Ct*N+jt*Oe+Zt*He,f[10]=dt*k+Ct*te+jt*De+Zt*st,f[11]=dt*D+Ct*re+jt*Ue+Zt*Tt,f[12]=(dt=d[12])*b+(Ct=d[13])*K+(jt=d[14])*Ae+(Zt=d[15])*Ge,f[13]=dt*w+Ct*N+jt*Oe+Zt*He,f[14]=dt*k+Ct*te+jt*De+Zt*st,f[15]=dt*D+Ct*re+jt*Ue+Zt*Tt,f},s.P=c,s.Q=function(f,u){const d={};for(let b=0;b<u.length;b++){const w=u[b];w in f&&(d[w]=f[w])}return d},s.R=gu,s.S=Ch,s.T=Wp,s.U=Yc,s.V=ny,s.W=F,s.X=j,s.Y=In,s.Z=qr,s._=a,s.a=ue,s.a$=Ee,s.a0=function(f,u){var d,b,w,k,D;if(!f)return u??{};if(!u)return f;let K=Object.assign({},f);if(u.removeAll&&(K={removeAll:!0}),u.remove){const N=new Set(u.remove);K.add&&(K.add=K.add.filter((re=>!N.has(re.id)))),K.update&&(K.update=K.update.filter((re=>!N.has(re.id))));const te=new Set(((d=f.add)!==null&&d!==void 0?d:[]).map((re=>re.id)));u.remove=u.remove.filter((re=>!te.has(re)))}if(u.remove){const N=new Set(K.remove?K.remove.concat(u.remove):u.remove);K.remove=Array.from(N.values())}if(u.add){const N=K.add?K.add.concat(u.add):u.add,te=new Map(N.map((re=>[re.id,re])));K.add=Array.from(te.values())}if(u.update){const N=new Map((b=K.update)===null||b===void 0?void 0:b.map((te=>[te.id,te])));for(const te of u.update){const re=(w=N.get(te.id))!==null&&w!==void 0?w:{id:te.id};te.newGeometry&&(re.newGeometry=te.newGeometry),te.addOrUpdateProperties&&(re.addOrUpdateProperties=((k=re.addOrUpdateProperties)!==null&&k!==void 0?k:[]).concat(te.addOrUpdateProperties)),te.removeProperties&&(re.removeProperties=((D=re.removeProperties)!==null&&D!==void 0?D:[]).concat(te.removeProperties)),te.removeAllProperties&&(re.removeAllProperties=!0),N.set(te.id,re)}K.update=Array.from(N.values())}return K.remove&&K.add&&(K.remove=K.remove.filter((N=>K.add.findIndex((te=>te.id===N))===-1))),K},s.a1=Ws,s.a2=nm,s.a3=25,s.a4=iy,s.a5=f=>{const u=window.document.createElement("video");return u.muted=!0,new Promise((d=>{u.onloadstart=()=>{d(u)};for(const b of f){const w=window.document.createElement("source");Be(b)||(u.crossOrigin="Anonymous"),w.src=b,u.appendChild(w)}}))},s.a6=on,s.a7=function(){return Te++},s.a8=me,s.a9=$l,s.aA=function(f){let u=1/0,d=1/0,b=-1/0,w=-1/0;for(const k of f)u=Math.min(u,k.x),d=Math.min(d,k.y),b=Math.max(b,k.x),w=Math.max(w,k.y);return[u,d,b,w]},s.aB=Aa,s.aC=ke,s.aD=function(f,u,d,b,w=!1){if(!d[0]&&!d[1])return[0,0];const k=w?b==="map"?-f.bearingInRadians:0:b==="viewport"?f.bearingInRadians:0;if(k){const D=Math.sin(k),K=Math.cos(k);d=[d[0]*K-d[1]*D,d[0]*D+d[1]*K]}return[w?d[0]:ke(u,d[0],f.zoom),w?d[1]:ke(u,d[1],f.zoom)]},s.aF=tm,s.aG=Ay,s.aH=P0,s.aI=xh,s.aJ=po,s.aK=Yp,s.aL=xt,s.aM=Br,s.aN=Eo,s.aO=Bt,s.aP=It,s.aQ=oa,s.aR=pe,s.aS=le,s.aT=function(f){var u=new V(3);return u[0]=f[0],u[1]=f[1],u[2]=f[2],u},s.aU=function(f,u,d){return f[0]=u[0]-d[0],f[1]=u[1]-d[1],f[2]=u[2]-d[2],f},s.aV=function(f,u){var d=u[0],b=u[1],w=u[2],k=d*d+b*b+w*w;return k>0&&(k=1/Math.sqrt(k)),f[0]=u[0]*k,f[1]=u[1]*k,f[2]=u[2]*k,f},s.aW=de,s.aX=function(f,u){return f[0]*u[0]+f[1]*u[1]+f[2]*u[2]},s.aY=function(f,u,d){return f[0]=u[0]*d[0],f[1]=u[1]*d[1],f[2]=u[2]*d[2],f[3]=u[3]*d[3],f},s.aZ=z,s.a_=function(f,u,d){const b=u[0]*d[0]+u[1]*d[1]+u[2]*d[2];return b===0?null:(-(f[0]*d[0]+f[1]*d[1]+f[2]*d[2])-d[3])/b},s.aa=zl,s.ab=Va,s.ac=gg,s.ad=function(f){const u={};if(f.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((d,b,w,k)=>{const D=w||k;return u[b]=!D||D.toLowerCase(),""})),u["max-age"]){const d=parseInt(u["max-age"],10);isNaN(d)?delete u["max-age"]:u["max-age"]=d}return u},s.ae=Un,s.af=function(f){return Math.pow(2,f)},s.ag=Q,s.ah=bt,s.ai=85.051129,s.aj=pg,s.ak=function(f){return Math.log(f)/Math.LN2},s.al=function(f){var u=f[0],d=f[1];return u*u+d*d},s.am=function(f){if(!f.length)return new Set;const u=Math.max(...f.map((N=>N.canonical.z)));let d=1/0,b=-1/0,w=1/0,k=-1/0;const D=[];for(const N of f){const{x:te,y:re,z:Ae}=N.canonical,Oe=Math.pow(2,u-Ae),De=te*Oe,Ue=re*Oe;D.push({id:N,x:De,y:Ue}),De<d&&(d=De),De>b&&(b=De),Ue<w&&(w=Ue),Ue>k&&(k=Ue)}const K=new Set;for(const N of D)N.x!==d&&N.x!==b&&N.y!==w&&N.y!==k||K.add(N.id);return K},s.an=function(f,u){let d=0,b=0;if(f.kind==="constant")b=f.layoutSize;else if(f.kind!=="source"){const{interpolationType:w,minZoom:k,maxZoom:D}=f,K=w?bt(qa.interpolationFactor(w,u,k,D),0,1):0;f.kind==="camera"?b=Ya.number(f.minSize,f.maxSize,K):d=K}return{uSizeT:d,uSize:b}},s.ap=function(f,{uSize:u,uSizeT:d},{lowerSize:b,upperSize:w}){return f.kind==="source"?b/vh:f.kind==="composite"?Ya.number(b/vh,w/vh,d):u},s.aq=function(f,u){var d=u[0],b=u[1],w=u[2],k=u[3],D=u[4],K=u[5],N=u[6],te=u[7],re=u[8],Ae=u[9],Oe=u[10],De=u[11],Ue=u[12],Ge=u[13],He=u[14],st=u[15],Tt=d*K-b*D,dt=d*N-w*D,Ct=d*te-k*D,jt=b*N-w*K,Zt=b*te-k*K,fn=w*te-k*N,Wn=re*Ge-Ae*Ue,Kn=re*He-Oe*Ue,Nn=re*st-De*Ue,xi=Ae*He-Oe*Ge,zn=Ae*st-De*Ge,Gn=Oe*st-De*He,an=Tt*Gn-dt*zn+Ct*xi+jt*Nn-Zt*Kn+fn*Wn;return an?(f[0]=(K*Gn-N*zn+te*xi)*(an=1/an),f[1]=(w*zn-b*Gn-k*xi)*an,f[2]=(Ge*fn-He*Zt+st*jt)*an,f[3]=(Oe*Zt-Ae*fn-De*jt)*an,f[4]=(N*Nn-D*Gn-te*Kn)*an,f[5]=(d*Gn-w*Nn+k*Kn)*an,f[6]=(He*Ct-Ue*fn-st*dt)*an,f[7]=(re*fn-Oe*Ct+De*dt)*an,f[8]=(D*zn-K*Nn+te*Wn)*an,f[9]=(b*Nn-d*zn-k*Wn)*an,f[10]=(Ue*Zt-Ge*Ct+st*Tt)*an,f[11]=(Ae*Ct-re*Zt-De*Tt)*an,f[12]=(K*Kn-D*xi-N*Wn)*an,f[13]=(d*xi-b*Kn+w*Wn)*an,f[14]=(Ge*dt-Ue*jt-He*Tt)*an,f[15]=(re*jt-Ae*dt+Oe*Tt)*an,f):null},s.ar=qe,s.as=function(f){var u=f[0],d=f[1];return Math.sqrt(u*u+d*d)},s.at=function(f){return f[0]=0,f[1]=0,f},s.au=function(f,u,d){return f[0]=u[0]*d,f[1]=u[1]*d,f},s.av=J1,s.aw=Re,s.ax=function(f,u,d,b){const w=u.y-f.y,k=u.x-f.x,D=b.y-d.y,K=b.x-d.x,N=D*k-K*w;if(N===0)return null;const te=(K*(f.y-d.y)-D*(f.x-d.x))/N;return new c(f.x+te*k,f.y+te*w)},s.ay=vg,s.az=Zm,s.b=Pn,s.b$=class extends fu{constructor(f,u){super(f,u),this.current=new Array}set(f){if(f!=this.current){this.current=f;const u=new Float32Array(f);this.gl.uniform1fv(this.location,u)}}},s.b0=function(f,u,d){return f[0]=u[0]*d,f[1]=u[1]*d,f[2]=u[2]*d,f[3]=u[3]*d,f},s.b1=function(f,u){return f[0]*u[0]+f[1]*u[1]+f[2]*u[2]+f[3]},s.b2=Gv,s.b3=np,s.b4=function(f,u,d,b,w){var k=1/Math.tan(u/2);if(f[0]=k/d,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=k,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[11]=-1,f[12]=0,f[13]=0,f[15]=0,w!=null&&w!==1/0){var D=1/(b-w);f[10]=(w+b)*D,f[14]=2*w*b*D}else f[10]=-1,f[14]=-2*b;return f},s.b5=function(f){var u=new V(16);return u[0]=f[0],u[1]=f[1],u[2]=f[2],u[3]=f[3],u[4]=f[4],u[5]=f[5],u[6]=f[6],u[7]=f[7],u[8]=f[8],u[9]=f[9],u[10]=f[10],u[11]=f[11],u[12]=f[12],u[13]=f[13],u[14]=f[14],u[15]=f[15],u},s.b6=function(f,u,d){var b=Math.sin(d),w=Math.cos(d),k=u[0],D=u[1],K=u[2],N=u[3],te=u[4],re=u[5],Ae=u[6],Oe=u[7];return u!==f&&(f[8]=u[8],f[9]=u[9],f[10]=u[10],f[11]=u[11],f[12]=u[12],f[13]=u[13],f[14]=u[14],f[15]=u[15]),f[0]=k*w+te*b,f[1]=D*w+re*b,f[2]=K*w+Ae*b,f[3]=N*w+Oe*b,f[4]=te*w-k*b,f[5]=re*w-D*b,f[6]=Ae*w-K*b,f[7]=Oe*w-N*b,f},s.b7=function(f,u,d){var b=Math.sin(d),w=Math.cos(d),k=u[4],D=u[5],K=u[6],N=u[7],te=u[8],re=u[9],Ae=u[10],Oe=u[11];return u!==f&&(f[0]=u[0],f[1]=u[1],f[2]=u[2],f[3]=u[3],f[12]=u[12],f[13]=u[13],f[14]=u[14],f[15]=u[15]),f[4]=k*w+te*b,f[5]=D*w+re*b,f[6]=K*w+Ae*b,f[7]=N*w+Oe*b,f[8]=te*w-k*b,f[9]=re*w-D*b,f[10]=Ae*w-K*b,f[11]=Oe*w-N*b,f},s.b8=function(){const f=new Float32Array(16);return Q(f),f},s.b9=function(){const f=new Float64Array(16);return Q(f),f},s.bA=function(f,u){const d=we(f,360),b=we(u,360),w=b-d,k=b>d?w-360:w+360;return Math.abs(w)<Math.abs(k)?w:k},s.bB=function(f){return f[0]=0,f[1]=0,f[2]=0,f},s.bC=function(f,u,d,b){const w=Math.sqrt(f*f+u*u),k=Math.sqrt(d*d+b*b);f/=w,u/=w,d/=k,b/=k;const D=Math.acos(f*d+u*b);return-u*d+f*b>0?D:-D},s.bD=function(f,u){const d=we(f,2*Math.PI),b=we(u,2*Math.PI);return Math.min(Math.abs(d-b),Math.abs(d-b+2*Math.PI),Math.abs(d-b-2*Math.PI))},s.bE=function(){const f={},u=mt.$version;for(const d in mt.$root){const b=mt.$root[d];if(b.required){let w=null;w=d==="version"?u:b.type==="array"?[]:{},w!=null&&(f[d]=w)}}return f},s.bF=Ah,s.bG=rt,s.bH=function f(u,d){if(Array.isArray(u)){if(!Array.isArray(d)||u.length!==d.length)return!1;for(let b=0;b<u.length;b++)if(!f(u[b],d[b]))return!1;return!0}if(typeof u=="object"&&u!==null&&d!==null){if(typeof d!="object"||Object.keys(u).length!==Object.keys(d).length)return!1;for(const b in u)if(!f(u[b],d[b]))return!1;return!0}return u===d},s.bI=function(f){f=f.slice();const u=Object.create(null);for(let d=0;d<f.length;d++)u[f[d].id]=f[d];for(let d=0;d<f.length;d++)"ref"in f[d]&&(f[d]=Xn(f[d],u[f[d].ref]));return f},s.bJ=function(f,u){if(f.type==="custom")return new tp(f,u);switch(f.type){case"background":return new L0(f,u);case"circle":return new bv(f,u);case"color-relief":return new cC(f,u);case"fill":return new Hf(f,u);case"fill-extrusion":return new ag(f,u);case"heatmap":return new D1(f,u);case"hillshade":return new Vd(f,u);case"line":return new Q1(f,u);case"raster":return new Fc(f,u);case"symbol":return new fg(f,u)}},s.bK=f=>f.type==="raster",s.bL=at,s.bM=function(f,u){if(!f)return[{command:"setStyle",args:[u]}];let d=[];try{if(!Cn(f.version,u.version))return[{command:"setStyle",args:[u]}];Cn(f.center,u.center)||d.push({command:"setCenter",args:[u.center]}),Cn(f.state,u.state)||d.push({command:"setGlobalState",args:[u.state]}),Cn(f.centerAltitude,u.centerAltitude)||d.push({command:"setCenterAltitude",args:[u.centerAltitude]}),Cn(f.zoom,u.zoom)||d.push({command:"setZoom",args:[u.zoom]}),Cn(f.bearing,u.bearing)||d.push({command:"setBearing",args:[u.bearing]}),Cn(f.pitch,u.pitch)||d.push({command:"setPitch",args:[u.pitch]}),Cn(f.roll,u.roll)||d.push({command:"setRoll",args:[u.roll]}),Cn(f.sprite,u.sprite)||d.push({command:"setSprite",args:[u.sprite]}),Cn(f.glyphs,u.glyphs)||d.push({command:"setGlyphs",args:[u.glyphs]}),Cn(f.transition,u.transition)||d.push({command:"setTransition",args:[u.transition]}),Cn(f.light,u.light)||d.push({command:"setLight",args:[u.light]}),Cn(f.terrain,u.terrain)||d.push({command:"setTerrain",args:[u.terrain]}),Cn(f.sky,u.sky)||d.push({command:"setSky",args:[u.sky]}),Cn(f.projection,u.projection)||d.push({command:"setProjection",args:[u.projection]});const b={},w=[];(function(D,K,N,te){let re;for(re in K=K||{},D=D||{})Object.prototype.hasOwnProperty.call(D,re)&&(Object.prototype.hasOwnProperty.call(K,re)||Hi(re,N,te));for(re in K)Object.prototype.hasOwnProperty.call(K,re)&&(Object.prototype.hasOwnProperty.call(D,re)?Cn(D[re],K[re])||(D[re].type==="geojson"&&K[re].type==="geojson"&&Ar(D,K,re)?Fn(N,{command:"setGeoJSONSourceData",args:[re,K[re].data]}):Ii(re,K,N,te)):pi(re,K,N))})(f.sources,u.sources,w,b);const k=[];f.layers&&f.layers.forEach((D=>{"source"in D&&b[D.source]?d.push({command:"removeLayer",args:[D.id]}):k.push(D)})),d=d.concat(w),(function(D,K,N){K=K||[];const te=(D=D||[]).map(Fi),re=K.map(Fi),Ae=D.reduce(Ri,{}),Oe=K.reduce(Ri,{}),De=te.slice(),Ue=Object.create(null);let Ge,He,st,Tt,dt;for(let Ct=0,jt=0;Ct<te.length;Ct++)Ge=te[Ct],Object.prototype.hasOwnProperty.call(Oe,Ge)?jt++:(Fn(N,{command:"removeLayer",args:[Ge]}),De.splice(De.indexOf(Ge,jt),1));for(let Ct=0,jt=0;Ct<re.length;Ct++)Ge=re[re.length-1-Ct],De[De.length-1-Ct]!==Ge&&(Object.prototype.hasOwnProperty.call(Ae,Ge)?(Fn(N,{command:"removeLayer",args:[Ge]}),De.splice(De.lastIndexOf(Ge,De.length-jt),1)):jt++,Tt=De[De.length-Ct],Fn(N,{command:"addLayer",args:[Oe[Ge],Tt]}),De.splice(De.length-Ct,0,Ge),Ue[Ge]=!0);for(let Ct=0;Ct<re.length;Ct++)if(Ge=re[Ct],He=Ae[Ge],st=Oe[Ge],!Ue[Ge]&&!Cn(He,st))if(Cn(He.source,st.source)&&Cn(He["source-layer"],st["source-layer"])&&Cn(He.type,st.type)){for(dt in ii(He.layout,st.layout,N,Ge,null,"setLayoutProperty"),ii(He.paint,st.paint,N,Ge,null,"setPaintProperty"),Cn(He.filter,st.filter)||Fn(N,{command:"setFilter",args:[Ge,st.filter]}),Cn(He.minzoom,st.minzoom)&&Cn(He.maxzoom,st.maxzoom)||Fn(N,{command:"setLayerZoomRange",args:[Ge,st.minzoom,st.maxzoom]}),He)Object.prototype.hasOwnProperty.call(He,dt)&&dt!=="layout"&&dt!=="paint"&&dt!=="filter"&&dt!=="metadata"&&dt!=="minzoom"&&dt!=="maxzoom"&&(dt.indexOf("paint.")===0?ii(He[dt],st[dt],N,Ge,dt.slice(6),"setPaintProperty"):Cn(He[dt],st[dt])||Fn(N,{command:"setLayerProperty",args:[Ge,dt,st[dt]]}));for(dt in st)Object.prototype.hasOwnProperty.call(st,dt)&&!Object.prototype.hasOwnProperty.call(He,dt)&&dt!=="layout"&&dt!=="paint"&&dt!=="filter"&&dt!=="metadata"&&dt!=="minzoom"&&dt!=="maxzoom"&&(dt.indexOf("paint.")===0?ii(He[dt],st[dt],N,Ge,dt.slice(6),"setPaintProperty"):Cn(He[dt],st[dt])||Fn(N,{command:"setLayerProperty",args:[Ge,dt,st[dt]]}))}else Fn(N,{command:"removeLayer",args:[Ge]}),Tt=De[De.lastIndexOf(Ge)+1],Fn(N,{command:"addLayer",args:[st,Tt]})})(k,u.layers,d)}catch(b){console.warn("Unable to compute style diff:",b),d=[{command:"setStyle",args:[u]}]}return d},s.bN=function(f){const u=[],d=f.id;return d===void 0&&u.push({message:`layers.${d}: missing required property "id"`}),f.render===void 0&&u.push({message:`layers.${d}: missing required method "render"`}),f.renderingMode&&f.renderingMode!=="2d"&&f.renderingMode!=="3d"&&u.push({message:`layers.${d}: property "renderingMode" must be either "2d" or "3d"`}),u},s.bO=Se,s.bP=We,s.bQ=class extends fu{constructor(f,u){super(f,u),this.current=0}set(f){this.current!==f&&(this.current=f,this.gl.uniform1i(this.location,f))}},s.bR=$a,s.bS=class extends fu{constructor(f,u){super(f,u),this.current=ua}set(f){if(f[12]!==this.current[12]||f[0]!==this.current[0])return this.current=f,void this.gl.uniformMatrix4fv(this.location,!1,f);for(let u=1;u<16;u++)if(f[u]!==this.current[u]){this.current=f,this.gl.uniformMatrix4fv(this.location,!1,f);break}}},s.bT=ba,s.bU=class extends fu{constructor(f,u){super(f,u),this.current=[0,0,0]}set(f){f[0]===this.current[0]&&f[1]===this.current[1]&&f[2]===this.current[2]||(this.current=f,this.gl.uniform3f(this.location,f[0],f[1],f[2]))}},s.bV=class extends fu{constructor(f,u){super(f,u),this.current=[0,0]}set(f){f[0]===this.current[0]&&f[1]===this.current[1]||(this.current=f,this.gl.uniform2f(this.location,f[0],f[1]))}},s.bW=H,s.bX=function(f,u){var d=Math.sin(u),b=Math.cos(u);return f[0]=b,f[1]=d,f[2]=0,f[3]=-d,f[4]=b,f[5]=0,f[6]=0,f[7]=0,f[8]=1,f},s.bY=function(f,u,d){var b=u[0],w=u[1],k=u[2];return f[0]=b*d[0]+w*d[3]+k*d[6],f[1]=b*d[1]+w*d[4]+k*d[7],f[2]=b*d[2]+w*d[5]+k*d[8],f},s.bZ=function(f,u,d,b,w,k,D){var K=1/(u-d),N=1/(b-w),te=1/(k-D);return f[0]=-2*K,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=-2*N,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=2*te,f[11]=0,f[12]=(u+d)*K,f[13]=(w+b)*N,f[14]=(D+k)*te,f[15]=1,f},s.b_=class extends fu{constructor(f,u){super(f,u),this.current=new Array}set(f){if(f!=this.current){this.current=f;const u=new Float32Array(4*f.length);for(let d=0;d<f.length;d++)u[4*d]=f[d].r,u[4*d+1]=f[d].g,u[4*d+2]=f[d].b,u[4*d+3]=f[d].a;this.gl.uniform4fv(this.location,u)}}},s.ba=function(){return new Float64Array(16)},s.bb=function(f,u,d){const b=new Float64Array(4);return Ie(b,f,u-90,d),b},s.bc=function(f,u,d,b){var w,k,D,K,N,te=u[0],re=u[1],Ae=u[2],Oe=u[3],De=d[0],Ue=d[1],Ge=d[2],He=d[3];return(k=te*De+re*Ue+Ae*Ge+Oe*He)<0&&(k=-k,De=-De,Ue=-Ue,Ge=-Ge,He=-He),1-k>q?(w=Math.acos(k),D=Math.sin(w),K=Math.sin((1-b)*w)/D,N=Math.sin(b*w)/D):(K=1-b,N=b),f[0]=K*te+N*De,f[1]=K*re+N*Ue,f[2]=K*Ae+N*Ge,f[3]=K*Oe+N*He,f},s.bd=function(f){const u=new Float64Array(9);var d,b,w,k,D,K,N,te,re,Ae,Oe,De,Ue,Ge,He,st,Tt,dt;Ae=(w=(b=f)[0])*(N=w+w),Oe=(k=b[1])*N,Ue=(D=b[2])*N,Ge=D*(te=k+k),st=(K=b[3])*N,Tt=K*te,dt=K*(re=D+D),(d=u)[0]=1-(De=k*te)-(He=D*re),d[3]=Oe-dt,d[6]=Ue+Tt,d[1]=Oe+dt,d[4]=1-Ae-He,d[7]=Ge-st,d[2]=Ue-Tt,d[5]=Ge+st,d[8]=1-Ae-De;const Ct=It(-Math.asin(bt(u[2],-1,1)));let jt,Zt;return Math.hypot(u[5],u[8])<.001?(jt=0,Zt=-It(Math.atan2(u[3],u[4]))):(jt=It(u[5]===0&&u[8]===0?0:Math.atan2(u[5],u[8])),Zt=It(u[1]===0&&u[0]===0?0:Math.atan2(u[1],u[0]))),{roll:jt,pitch:Ct+90,bearing:Zt}},s.be=function(f,u){return f.roll==u.roll&&f.pitch==u.pitch&&f.bearing==u.bearing},s.bf=ir,s.bg=Ns,s.bh=xl,s.bi=pc,s.bj=og,s.bk=ze,s.bl=Me,s.bm=oo,s.bn=function(f,u,d,b,w){return ze(b,w,bt((f-u)/(d-u),0,1))},s.bo=we,s.bp=function(){return new Float64Array(3)},s.bq=function(f,u,d,b){return f[0]=u[0]+d[0]*b,f[1]=u[1]+d[1]*b,f[2]=u[2]+d[2]*b,f},s.br=Ie,s.bs=function(f,u,d){var b=d[0],w=d[1],k=d[2],D=d[3],K=u[0],N=u[1],te=u[2],re=w*te-k*N,Ae=k*K-b*te,Oe=b*N-w*K;return f[0]=K+D*(re+=re)+w*(Oe+=Oe)-k*(Ae+=Ae),f[1]=N+D*Ae+k*re-b*Oe,f[2]=te+D*Oe+b*Ae-w*re,f},s.bt=function(f,u,d){const b=(w=[f[0],f[1],f[2],u[0],u[1],u[2],d[0],d[1],d[2]])[0]*((re=w[8])*(D=w[4])-(K=w[5])*(te=w[7]))+w[1]*(-re*(k=w[3])+K*(N=w[6]))+w[2]*(te*k-D*N);var w,k,D,K,N,te,re;if(b===0)return null;const Ae=de([],[u[0],u[1],u[2]],[d[0],d[1],d[2]]),Oe=de([],[d[0],d[1],d[2]],[f[0],f[1],f[2]]),De=de([],[f[0],f[1],f[2]],[u[0],u[1],u[2]]),Ue=pe([],Ae,-f[3]);return le(Ue,Ue,pe([],Oe,-u[3])),le(Ue,Ue,pe([],De,-d[3])),pe(Ue,Ue,1/b),Ue},s.bu=F0,s.bv=function(){return new Float64Array(4)},s.bw=function(f,u,d,b){var w=[],k=[];return w[0]=u[0]-d[0],w[1]=u[1]-d[1],w[2]=u[2]-d[2],k[0]=w[0]*Math.cos(b)-w[1]*Math.sin(b),k[1]=w[0]*Math.sin(b)+w[1]*Math.cos(b),k[2]=w[2],f[0]=k[0]+d[0],f[1]=k[1]+d[1],f[2]=k[2]+d[2],f},s.bx=function(f,u,d,b){var w=[],k=[];return w[0]=u[0]-d[0],w[1]=u[1]-d[1],w[2]=u[2]-d[2],k[0]=w[0],k[1]=w[1]*Math.cos(b)-w[2]*Math.sin(b),k[2]=w[1]*Math.sin(b)+w[2]*Math.cos(b),f[0]=k[0]+d[0],f[1]=k[1]+d[1],f[2]=k[2]+d[2],f},s.by=function(f,u,d,b){var w=[],k=[];return w[0]=u[0]-d[0],w[1]=u[1]-d[1],w[2]=u[2]-d[2],k[0]=w[2]*Math.sin(b)+w[0]*Math.cos(b),k[1]=w[1],k[2]=w[2]*Math.cos(b)-w[0]*Math.sin(b),f[0]=k[0]+d[0],f[1]=k[1]+d[1],f[2]=k[2]+d[2],f},s.bz=function(f,u,d){var b=Math.sin(d),w=Math.cos(d),k=u[0],D=u[1],K=u[2],N=u[3],te=u[8],re=u[9],Ae=u[10],Oe=u[11];return u!==f&&(f[4]=u[4],f[5]=u[5],f[6]=u[6],f[7]=u[7],f[12]=u[12],f[13]=u[13],f[14]=u[14],f[15]=u[15]),f[0]=k*w-te*b,f[1]=D*w-re*b,f[2]=K*w-Ae*b,f[3]=N*w-Oe*b,f[8]=k*b+te*w,f[9]=D*b+re*w,f[10]=K*b+Ae*w,f[11]=N*b+Oe*w,f},s.c=ne,s.c0=class extends Gd{},s.c1=Bv,s.c2=class extends l{},s.c3=UA,s.c4=function(f){return f<=1?1:Math.pow(2,Math.ceil(Math.log(f)/Math.LN2))},s.c5=Gp,s.c6=function(f,u,d){var b=u[0],w=u[1],k=u[2],D=d[3]*b+d[7]*w+d[11]*k+d[15];return f[0]=(d[0]*b+d[4]*w+d[8]*k+d[12])/(D=D||1),f[1]=(d[1]*b+d[5]*w+d[9]*k+d[13])/D,f[2]=(d[2]*b+d[6]*w+d[10]*k+d[14])/D,f},s.c7=class extends id{},s.c8=class extends Z{},s.c9=function(f,u){return f[0]===u[0]&&f[1]===u[1]&&f[2]===u[2]&&f[3]===u[3]&&f[4]===u[4]&&f[5]===u[5]&&f[6]===u[6]&&f[7]===u[7]&&f[8]===u[8]&&f[9]===u[9]&&f[10]===u[10]&&f[11]===u[11]&&f[12]===u[12]&&f[13]===u[13]&&f[14]===u[14]&&f[15]===u[15]},s.cA=function(f,u){ue.REGISTERED_PROTOCOLS[f]=u},s.cB=function(f){delete ue.REGISTERED_PROTOCOLS[f]},s.cC=function(f,u){const d={};for(let w=0;w<f.length;w++){const k=u&&u[f[w].id]||aA(f[w]);u&&(u[f[w].id]=k);let D=d[k];D||(D=d[k]=[]),D.push(f[w])}const b=[];for(const w in d)b.push(d[w]);return b},s.cD=Vn,s.cE=ry,s.cF=yg,s.cG=Uv,s.cH=function(f){f.bucket.createArrays(),f.bucket.tilePixelRatio=At/(512*f.bucket.overscaling),f.bucket.compareText={},f.bucket.iconsNeedLinear=!1;const u=f.bucket.layers[0],d=u.layout,b=u._unevaluatedLayout._values,w={layoutIconSize:b["icon-size"].possiblyEvaluate(new To(f.bucket.zoom+1),f.canonical),layoutTextSize:b["text-size"].possiblyEvaluate(new To(f.bucket.zoom+1),f.canonical),textMaxSize:b["text-size"].possiblyEvaluate(new To(18))};if(f.bucket.textSizeData.kind==="composite"){const{minZoom:te,maxZoom:re}=f.bucket.textSizeData;w.compositeTextSizes=[b["text-size"].possiblyEvaluate(new To(te),f.canonical),b["text-size"].possiblyEvaluate(new To(re),f.canonical)]}if(f.bucket.iconSizeData.kind==="composite"){const{minZoom:te,maxZoom:re}=f.bucket.iconSizeData;w.compositeIconSizes=[b["icon-size"].possiblyEvaluate(new To(te),f.canonical),b["icon-size"].possiblyEvaluate(new To(re),f.canonical)]}const k=d.get("text-line-height")*Aa,D=d.get("text-rotation-alignment")!=="viewport"&&d.get("symbol-placement")!=="point",K=d.get("text-keep-upright"),N=d.get("text-size");for(const te of f.bucket.features){const re=d.get("text-font").evaluate(te,{},f.canonical).join(","),Ae=N.evaluate(te,{},f.canonical),Oe=w.layoutTextSize.evaluate(te,{},f.canonical),De=w.layoutIconSize.evaluate(te,{},f.canonical),Ue={horizontal:{},vertical:void 0},Ge=te.text;let He,st=[0,0];if(Ge){const Ct=Ge.toString(),jt=d.get("text-letter-spacing").evaluate(te,{},f.canonical)*Aa,Zt=g0(Ct)?jt:0,fn=d.get("text-anchor").evaluate(te,{},f.canonical),Wn=qv(u,te,f.canonical);if(!Wn){const zn=d.get("text-radial-offset").evaluate(te,{},f.canonical);st=zn?cy(fn,[zn*Aa,$c]):d.get("text-offset").evaluate(te,{},f.canonical).map((Gn=>Gn*Aa))}let Kn=D?"center":d.get("text-justify").evaluate(te,{},f.canonical);const Nn=d.get("symbol-placement")==="point"?d.get("text-max-width").evaluate(te,{},f.canonical)*Aa:1/0,xi=()=>{f.bucket.allowVerticalPlacement&&hc(Ct)&&(Ue.vertical=ep(Ge,f.glyphMap,f.glyphPositions,f.imagePositions,re,Nn,k,fn,"left",Zt,st,s.ao.vertical,!0,Oe,Ae))};if(!D&&Wn){const zn=new Set;if(Kn==="auto")for(let an=0;an<Wn.values.length;an+=2)zn.add(Ay(Wn.values[an]));else zn.add(Kn);let Gn=!1;for(const an of zn)if(!Ue.horizontal[an])if(Gn)Ue.horizontal[an]=Ue.horizontal[0];else{const ji=ep(Ge,f.glyphMap,f.glyphPositions,f.imagePositions,re,Nn,k,"center",an,Zt,st,s.ao.horizontal,!1,Oe,Ae);ji&&(Ue.horizontal[an]=ji,Gn=ji.positionedLines.length===1)}xi()}else{Kn==="auto"&&(Kn=Ay(fn));const zn=ep(Ge,f.glyphMap,f.glyphPositions,f.imagePositions,re,Nn,k,fn,Kn,Zt,st,s.ao.horizontal,!1,Oe,Ae);zn&&(Ue.horizontal[Kn]=zn),xi(),hc(Ct)&&D&&K&&(Ue.vertical=ep(Ge,f.glyphMap,f.glyphPositions,f.imagePositions,re,Nn,k,fn,Kn,Zt,st,s.ao.vertical,!1,Oe,Ae))}}let Tt=!1;if(te.icon&&te.icon.name){const Ct=f.imageMap[te.icon.name];Ct&&(He=em(f.imagePositions[te.icon.name],d.get("icon-offset").evaluate(te,{},f.canonical),d.get("icon-anchor").evaluate(te,{},f.canonical)),Tt=!!Ct.sdf,f.bucket.sdfIcons===void 0?f.bucket.sdfIcons=Tt:f.bucket.sdfIcons!==Tt&&ft("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ct.pixelRatio!==f.bucket.pixelRatio||d.get("icon-rotate").constantOr(1)!==0)&&(f.bucket.iconsNeedLinear=!0))}const dt=mA(Ue.horizontal)||Ue.vertical;f.bucket.iconsInText=!!dt&&dt.iconsInText,(dt||He)&&OC(f.bucket,te,Ue,He,f.imageMap,w,Oe,De,st,Tt,f.canonical,f.subdivisionGranularity)}f.showCollisionBoxes&&f.bucket.generateCollisionDebugBuffers()},s.cI=S0,s.cJ=hs,s.cK=Xp,s.cL=Sv,s.cM=zu,s.cN=class{constructor(f){this._marks={start:[f.url,"start"].join("#"),end:[f.url,"end"].join("#"),measure:f.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let f=performance.getEntriesByName(this._marks.measure);return f.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),f=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),f}},s.cO=function(f,u,d,b,w){return a(this,void 0,void 0,(function*(){if(j())try{return yield In(f,u,d,b,w)}catch{}return(function(k,D,K,N,te){const re=k.width,Ae=k.height;Tn&&dn||(Tn=new OffscreenCanvas(re,Ae),dn=Tn.getContext("2d",{willReadFrequently:!0})),Tn.width=re,Tn.height=Ae,dn.drawImage(k,0,0,re,Ae);const Oe=dn.getImageData(D,K,N,te);return dn.clearRect(0,0,re,Ae),Oe.data})(f,u,d,b,w)}))},s.cP=tg,s.cQ=h,s.cR=wv,s.cS=$p,s.cT=Kp,s.cU=function(f,u){const d=new Map;if(f!=null)if(f.type==="Feature")d.set(Xa(f,u),f);else for(const b of f.features)d.set(Xa(b,u),b);return d},s.cV=function(f,u){if(f==null)return!0;if(f.type==="Feature")return Xa(f,u)!=null;if(f.type==="FeatureCollection"){const d=new Set;for(const b of f.features){const w=Xa(b,u);if(w==null||d.has(w))return!1;d.add(w)}return!0}return!1},s.cW=function(f,u,d){var b,w,k,D;if(u.removeAll&&f.clear(),u.remove)for(const K of u.remove)f.delete(K);if(u.add)for(const K of u.add){const N=Xa(K,d);N!=null&&f.set(N,K)}if(u.update)for(const K of u.update){let N=f.get(K.id);if(N==null)continue;const te=!K.removeAllProperties&&(((b=K.removeProperties)===null||b===void 0?void 0:b.length)>0||((w=K.addOrUpdateProperties)===null||w===void 0?void 0:w.length)>0);if((K.newGeometry||K.removeAllProperties||te)&&(N=Object.assign({},N),f.set(K.id,N),te&&(N.properties=Object.assign({},N.properties))),K.newGeometry&&(N.geometry=K.newGeometry),K.removeAllProperties)N.properties={};else if(((k=K.removeProperties)===null||k===void 0?void 0:k.length)>0)for(const re of K.removeProperties)Object.prototype.hasOwnProperty.call(N.properties,re)&&delete N.properties[re];if(((D=K.addOrUpdateProperties)===null||D===void 0?void 0:D.length)>0)for(const{key:re,value:Ae}of K.addOrUpdateProperties)N.properties[re]=Ae}},s.cX=bl,s.ca=function(f,u){var d=f[0],b=f[1],w=f[2],k=f[3],D=f[4],K=f[5],N=f[6],te=f[7],re=f[8],Ae=f[9],Oe=f[10],De=f[11],Ue=f[12],Ge=f[13],He=f[14],st=f[15],Tt=u[0],dt=u[1],Ct=u[2],jt=u[3],Zt=u[4],fn=u[5],Wn=u[6],Kn=u[7],Nn=u[8],xi=u[9],zn=u[10],Gn=u[11],an=u[12],ji=u[13],er=u[14],Di=u[15];return Math.abs(d-Tt)<=q*Math.max(1,Math.abs(d),Math.abs(Tt))&&Math.abs(b-dt)<=q*Math.max(1,Math.abs(b),Math.abs(dt))&&Math.abs(w-Ct)<=q*Math.max(1,Math.abs(w),Math.abs(Ct))&&Math.abs(k-jt)<=q*Math.max(1,Math.abs(k),Math.abs(jt))&&Math.abs(D-Zt)<=q*Math.max(1,Math.abs(D),Math.abs(Zt))&&Math.abs(K-fn)<=q*Math.max(1,Math.abs(K),Math.abs(fn))&&Math.abs(N-Wn)<=q*Math.max(1,Math.abs(N),Math.abs(Wn))&&Math.abs(te-Kn)<=q*Math.max(1,Math.abs(te),Math.abs(Kn))&&Math.abs(re-Nn)<=q*Math.max(1,Math.abs(re),Math.abs(Nn))&&Math.abs(Ae-xi)<=q*Math.max(1,Math.abs(Ae),Math.abs(xi))&&Math.abs(Oe-zn)<=q*Math.max(1,Math.abs(Oe),Math.abs(zn))&&Math.abs(De-Gn)<=q*Math.max(1,Math.abs(De),Math.abs(Gn))&&Math.abs(Ue-an)<=q*Math.max(1,Math.abs(Ue),Math.abs(an))&&Math.abs(Ge-ji)<=q*Math.max(1,Math.abs(Ge),Math.abs(ji))&&Math.abs(He-er)<=q*Math.max(1,Math.abs(He),Math.abs(er))&&Math.abs(st-Di)<=q*Math.max(1,Math.abs(st),Math.abs(Di))},s.cb=function(f,u){return f[0]=u[0],f[1]=u[1],f[2]=u[2],f[3]=u[3],f[4]=u[4],f[5]=u[5],f[6]=u[6],f[7]=u[7],f[8]=u[8],f[9]=u[9],f[10]=u[10],f[11]=u[11],f[12]=u[12],f[13]=u[13],f[14]=u[14],f[15]=u[15],f},s.cc=f=>f.type==="symbol",s.cd=f=>f.type==="circle",s.ce=f=>f.type==="heatmap",s.cf=f=>f.type==="line",s.cg=f=>f.type==="fill",s.ch=f=>f.type==="fill-extrusion",s.ci=f=>f.type==="hillshade",s.cj=f=>f.type==="color-relief",s.ck=f=>f.type==="background",s.cl=f=>f.type==="custom",s.cm=lt,s.cn=function(f,u,d){const b=tt(u.x-d.x,u.y-d.y),w=tt(f.x-d.x,f.y-d.y);var k,D;return It(Math.atan2(b[0]*w[1]-b[1]*w[0],(k=b)[0]*(D=w)[0]+k[1]*D[1]))},s.co=nt,s.cp=function(f,u){return oe[u]&&(f instanceof MouseEvent||f instanceof WheelEvent)},s.cq=function(f,u){return _e[u]&&"touches"in f},s.cr=function(f){return _e[f]||oe[f]},s.cs=function(f,u,d){var b=u[0],w=u[1];return f[0]=d[0]*b+d[4]*w+d[12],f[1]=d[1]*b+d[5]*w+d[13],f},s.ct=function(f,u){const{x:d,y:b}=Ws.fromLngLat(u);return!(f<0||f>25||b<0||b>=1||d<0||d>=1)},s.cu=function(f,u){return f[0]=u[0],f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=u[1],f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=u[2],f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f},s.cv=class extends As{},s.cw=kC,s.cy=function(f){return f.message===ee},s.cz=Ve,s.d=Be,s.e=Ke,s.f=f=>a(void 0,void 0,void 0,(function*(){if(f.byteLength===0)return createImageBitmap(new ImageData(1,1));const u=new Blob([new Uint8Array(f)],{type:"image/png"});try{return createImageBitmap(u)}catch(d){throw new Error(`Could not load image because of ${d.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}})),s.g=be,s.h=f=>new Promise(((u,d)=>{const b=new Image;b.onload=()=>{u(b),URL.revokeObjectURL(b.src),b.onload=null,window.requestAnimationFrame((()=>{b.src=oi}))},b.onerror=()=>d(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const w=new Blob([new Uint8Array(f)],{type:"image/png"});b.src=f.byteLength?URL.createObjectURL(w):oi})),s.i=Ot,s.j=(f,u)=>ye(Ke(f,{type:"json"}),u),s.k=Pt,s.l=Mt,s.m=ye,s.n=(f,u)=>ye(Ke(f,{type:"arrayBuffer"}),u),s.o=function(f){return new zu(f).readFields(Y1,[])},s.p=_C,s.q=eg,s.r=us,s.s=$n,s.t=Nf,s.u=or,s.v=mt,s.w=ft,s.x=Ld,s.y=$h,s.z=Ac})),r("worker",["./shared"],(function(s){class a{constructor(ne,ue){this.keyCache={},ne&&this.replace(ne,ue)}replace(ne,ue){this._layerConfigs={},this._layers={},this.update(ne,[],ue)}update(ne,ue,be){for(const Ve of ne){this._layerConfigs[Ve.id]=Ve;const rt=this._layers[Ve.id]=s.bJ(Ve,be);rt._featureFilter=s.aa(rt.filter,be),this.keyCache[Ve.id]&&delete this.keyCache[Ve.id]}for(const Ve of ue)delete this.keyCache[Ve],delete this._layerConfigs[Ve],delete this._layers[Ve];this.familiesBySource={};const Le=s.cC(Object.values(this._layerConfigs),this.keyCache);for(const Ve of Le){const rt=Ve.map((Pt=>this._layers[Pt.id])),ye=rt[0];if(ye.visibility==="none")continue;const Be=ye.source||"";let v=this.familiesBySource[Be];v||(v=this.familiesBySource[Be]={});const yt=ye.sourceLayer||"_geojsonTileLayer";let Mt=v[yt];Mt||(Mt=v[yt]=[]),Mt.push(rt)}}}class c{constructor(ne){const ue={},be=[];for(const ye in ne){const Be=ne[ye],v=ue[ye]={};for(const yt in Be){const Mt=Be[+yt];if(!Mt||Mt.bitmap.width===0||Mt.bitmap.height===0)continue;const Pt={x:0,y:0,w:Mt.bitmap.width+2,h:Mt.bitmap.height+2};be.push(Pt),v[yt]={rect:Pt,metrics:Mt.metrics}}}const{w:Le,h:Ve}=s.p(be),rt=new s.q({width:Le||1,height:Ve||1});for(const ye in ne){const Be=ne[ye];for(const v in Be){const yt=Be[+v];if(!yt||yt.bitmap.width===0||yt.bitmap.height===0)continue;const Mt=ue[ye][v].rect;s.q.copy(yt.bitmap,rt,{x:0,y:0},{x:Mt.x+1,y:Mt.y+1},yt.bitmap)}}this.image=rt,this.positions=ue}}s.cD("GlyphAtlas",c);class h{constructor(ne){this.tileID=new s.Z(ne.tileID.overscaledZ,ne.tileID.wrap,ne.tileID.canonical.z,ne.tileID.canonical.x,ne.tileID.canonical.y),this.uid=ne.uid,this.zoom=ne.zoom,this.pixelRatio=ne.pixelRatio,this.tileSize=ne.tileSize,this.source=ne.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=ne.showCollisionBoxes,this.collectResourceTiming=!!ne.collectResourceTiming,this.returnDependencies=!!ne.returnDependencies,this.promoteId=ne.promoteId,this.inFlightDependencies=[]}parse(ne,ue,be,Le,Ve){return s._(this,void 0,void 0,(function*(){this.status="parsing",this.data=ne,this.collisionBoxArray=new s.a8;const rt=new s.cE(Object.keys(ne.layers).sort()),ye=new s.cF(this.tileID,this.promoteId);ye.bucketLayerIDs=[];const Be={},v={featureIndex:ye,iconDependencies:{},patternDependencies:{},glyphDependencies:{},dashDependencies:{},availableImages:be,subdivisionGranularity:Ve},yt=ue.familiesBySource[this.source];for(const Ri in yt){const on=ne.layers[Ri];if(!on)continue;on.version===1&&s.w(`Vector tile source "${this.source}" layer "${Ri}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const nr=rt.encode(Ri),Go=[];for(let Co=0;Co<on.length;Co++){const gr=on.feature(Co),gn=ye.getId(gr,Ri);Go.push({feature:gr,id:gn,index:Co,sourceLayerIndex:nr})}for(const Co of yt[Ri]){const gr=Co[0];gr.source!==this.source&&s.w(`layer.source = ${gr.source} does not equal this.source = ${this.source}`),gr.minzoom&&this.zoom<Math.floor(gr.minzoom)||gr.maxzoom&&this.zoom>=gr.maxzoom||gr.visibility!=="none"&&(m(Co,this.zoom,be),(Be[gr.id]=gr.createBucket({index:ye.bucketLayerIDs.length,layers:Co,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:nr,sourceID:this.source})).populate(Go,v,this.tileID.canonical),ye.bucketLayerIDs.push(Co.map((gn=>gn.id))))}}const Mt=s.bO(v.glyphDependencies,(Ri=>Object.keys(Ri).map(Number)));this.inFlightDependencies.forEach((Ri=>Ri?.abort())),this.inFlightDependencies=[];let Pt=Promise.resolve({});if(Object.keys(Mt).length){const Ri=new AbortController;this.inFlightDependencies.push(Ri),Pt=Le.sendAsync({type:"GG",data:{stacks:Mt,source:this.source,tileID:this.tileID,type:"glyphs"}},Ri)}const en=Object.keys(v.iconDependencies);let mt=Promise.resolve({});if(en.length){const Ri=new AbortController;this.inFlightDependencies.push(Ri),mt=Le.sendAsync({type:"GI",data:{icons:en,source:this.source,tileID:this.tileID,type:"icons"}},Ri)}const Qn=Object.keys(v.patternDependencies);let Xn=Promise.resolve({});if(Qn.length){const Ri=new AbortController;this.inFlightDependencies.push(Ri),Xn=Le.sendAsync({type:"GI",data:{icons:Qn,source:this.source,tileID:this.tileID,type:"patterns"}},Ri)}const Cn=v.dashDependencies;let Fn=Promise.resolve({});if(Object.keys(Cn).length){const Ri=new AbortController;this.inFlightDependencies.push(Ri),Fn=Le.sendAsync({type:"GDA",data:{dashes:Cn}},Ri)}const[pi,Hi,Ii,Ar]=yield Promise.all([Pt,mt,Xn,Fn]),ii=new c(pi),Fi=new s.cG(Hi,Ii);for(const Ri in Be){const on=Be[Ri];on instanceof s.a9?(m(on.layers,this.zoom,be),s.cH({bucket:on,glyphMap:pi,glyphPositions:ii.positions,imageMap:Hi,imagePositions:Fi.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:v.subdivisionGranularity})):on.hasDependencies&&(on instanceof s.cI||on instanceof s.cJ||on instanceof s.cK)&&(m(on.layers,this.zoom,be),on.addFeatures(v,this.tileID.canonical,Fi.patternPositions,Ar))}return this.status="done",{buckets:Object.values(Be).filter((Ri=>!Ri.isEmpty())),featureIndex:ye,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:ii.image,imageAtlas:Fi,dashPositions:Ar,glyphMap:this.returnDependencies?pi:null,iconMap:this.returnDependencies?Hi:null,glyphPositions:this.returnDependencies?ii.positions:null}}))}}function m(ee,ne,ue){const be=new s.F(ne);for(const Le of ee)Le.recalculate(be,ue)}class y{constructor(ne,ue,be){this.actor=ne,this.layerIndex=ue,this.availableImages=be,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(ne,ue){return s._(this,void 0,void 0,(function*(){const be=yield s.n(ne.request,ue);try{return{vectorTile:new s.cL(new s.cM(be.data)),rawData:be.data,cacheControl:be.cacheControl,expires:be.expires}}catch(Le){const Ve=new Uint8Array(be.data);let rt=`Unable to parse the tile at ${ne.request.url}, `;throw rt+=Ve[0]===31&&Ve[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Le.message}`,new Error(rt)}}))}loadTile(ne){return s._(this,void 0,void 0,(function*(){const ue=ne.uid,be=!!(ne&&ne.request&&ne.request.collectResourceTiming)&&new s.cN(ne.request),Le=new h(ne);this.loading[ue]=Le;const Ve=new AbortController;Le.abort=Ve;try{const rt=yield this.loadVectorTile(ne,Ve);if(delete this.loading[ue],!rt)return null;const ye=rt.rawData,Be={};rt.expires&&(Be.expires=rt.expires),rt.cacheControl&&(Be.cacheControl=rt.cacheControl);const v={};if(be){const Mt=be.finish();Mt&&(v.resourceTiming=JSON.parse(JSON.stringify(Mt)))}Le.vectorTile=rt.vectorTile;const yt=Le.parse(rt.vectorTile,this.layerIndex,this.availableImages,this.actor,ne.subdivisionGranularity);this.loaded[ue]=Le,this.fetching[ue]={rawTileData:ye,cacheControl:Be,resourceTiming:v};try{const Mt=yield yt;return s.e({rawTileData:ye.slice(0)},Mt,Be,v)}finally{delete this.fetching[ue]}}catch(rt){throw delete this.loading[ue],Le.status="done",this.loaded[ue]=Le,rt}}))}reloadTile(ne){return s._(this,void 0,void 0,(function*(){const ue=ne.uid;if(!this.loaded||!this.loaded[ue])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const be=this.loaded[ue];if(be.showCollisionBoxes=ne.showCollisionBoxes,be.status==="parsing"){const Le=yield be.parse(be.vectorTile,this.layerIndex,this.availableImages,this.actor,ne.subdivisionGranularity);let Ve;if(this.fetching[ue]){const{rawTileData:rt,cacheControl:ye,resourceTiming:Be}=this.fetching[ue];delete this.fetching[ue],Ve=s.e({rawTileData:rt.slice(0)},Le,ye,Be)}else Ve=Le;return Ve}if(be.status==="done"&&be.vectorTile)return be.parse(be.vectorTile,this.layerIndex,this.availableImages,this.actor,ne.subdivisionGranularity)}))}abortTile(ne){return s._(this,void 0,void 0,(function*(){const ue=this.loading,be=ne.uid;ue&&ue[be]&&ue[be].abort&&(ue[be].abort.abort(),delete ue[be])}))}removeTile(ne){return s._(this,void 0,void 0,(function*(){this.loaded&&this.loaded[ne.uid]&&delete this.loaded[ne.uid]}))}}class M{constructor(){this.loaded={}}loadTile(ne){return s._(this,void 0,void 0,(function*(){const{uid:ue,encoding:be,rawImageData:Le,redFactor:Ve,greenFactor:rt,blueFactor:ye,baseShift:Be}=ne,v=Le.width+2,yt=Le.height+2,Mt=s.b(Le)?new s.R({width:v,height:yt},yield s.cO(Le,-1,-1,v,yt)):Le,Pt=new s.cP(ue,Mt,be,Ve,rt,ye,Be);return this.loaded=this.loaded||{},this.loaded[ue]=Pt,Pt}))}removeTile(ne){const ue=this.loaded,be=ne.uid;ue&&ue[be]&&delete ue[be]}}var x,T,P=(function(){if(T)return x;function ee(ue,be){if(ue.length!==0){ne(ue[0],be);for(var Le=1;Le<ue.length;Le++)ne(ue[Le],!be)}}function ne(ue,be){for(var Le=0,Ve=0,rt=0,ye=ue.length,Be=ye-1;rt<ye;Be=rt++){var v=(ue[rt][0]-ue[Be][0])*(ue[Be][1]+ue[rt][1]),yt=Le+v;Ve+=Math.abs(Le)>=Math.abs(v)?Le-yt+v:v-yt+Le,Le=yt}Le+Ve>=0!=!!be&&ue.reverse()}return T=1,x=function ue(be,Le){var Ve,rt=be&&be.type;if(rt==="FeatureCollection")for(Ve=0;Ve<be.features.length;Ve++)ue(be.features[Ve],Le);else if(rt==="GeometryCollection")for(Ve=0;Ve<be.geometries.length;Ve++)ue(be.geometries[Ve],Le);else if(rt==="Feature")ue(be.geometry,Le);else if(rt==="Polygon")ee(be.coordinates,Le);else if(rt==="MultiPolygon")for(Ve=0;Ve<be.coordinates.length;Ve++)ee(be.coordinates[Ve],Le);return be}})(),F=s.cQ(P);class j extends s.cS{constructor(ne,ue){super(new s.cM,0,ue,[],[]),this.feature=ne,this.type=ne.type,this.properties=ne.tags?ne.tags:{},"id"in ne&&(typeof ne.id=="string"?this.id=parseInt(ne.id,10):typeof ne.id!="number"||isNaN(ne.id)||(this.id=ne.id))}loadGeometry(){const ne=[],ue=this.feature.type===1?[this.feature.geometry]:this.feature.geometry;for(const be of ue){const Le=[];for(const Ve of be)Le.push(new s.P(Ve[0],Ve[1]));ne.push(Le)}return ne}}class q extends s.cR{constructor(ne,ue){super(new s.cM),this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.version=ue?ue.version:1,this.extent=ue?ue.extent:4096,this.length=ne.length,this.features=ne}feature(ne){return new j(this.features[ne],this.extent)}}function V(ee,ne){ne.writeVarintField(15,ee.version||1),ne.writeStringField(1,ee.name||""),ne.writeVarintField(5,ee.extent||4096);const ue={keys:[],values:[],keycache:{},valuecache:{}};for(let Ve=0;Ve<ee.length;Ve++)ue.feature=ee.feature(Ve),ne.writeMessage(2,H,ue);const be=ue.keys;for(const Ve of be)ne.writeStringField(3,Ve);const Le=ue.values;for(const Ve of Le)ne.writeMessage(4,le,Ve)}function H(ee,ne){if(!ee.feature)return;const ue=ee.feature;ue.id!==void 0&&ne.writeVarintField(1,ue.id),ne.writeMessage(2,Q,ee),ne.writeVarintField(3,ue.type),ne.writeMessage(4,se,ue)}function Q(ee,ne){for(const ue in ee.feature?.properties){let be=ee.feature.properties[ue],Le=ee.keycache[ue];if(be===null)continue;Le===void 0&&(ee.keys.push(ue),Le=ee.keys.length-1,ee.keycache[ue]=Le),ne.writeVarint(Le),typeof be!="string"&&typeof be!="boolean"&&typeof be!="number"&&(be=JSON.stringify(be));const Ve=typeof be+":"+be;let rt=ee.valuecache[Ve];rt===void 0&&(ee.values.push(be),rt=ee.values.length-1,ee.valuecache[Ve]=rt),ne.writeVarint(rt)}}function Y(ee,ne){return(ne<<3)+(7&ee)}function z(ee){return ee<<1^ee>>31}function se(ee,ne){const ue=ee.loadGeometry(),be=ee.type;let Le=0,Ve=0;for(const rt of ue){let ye=1;be===1&&(ye=rt.length),ne.writeVarint(Y(1,ye));const Be=be===3?rt.length-1:rt.length;for(let v=0;v<Be;v++){v===1&&be!==1&&ne.writeVarint(Y(2,Be-1));const yt=rt[v].x-Le,Mt=rt[v].y-Ve;ne.writeVarint(z(yt)),ne.writeVarint(z(Mt)),Le+=yt,Ve+=Mt}ee.type===3&&ne.writeVarint(Y(7,1))}}function le(ee,ne){const ue=typeof ee;ue==="string"?ne.writeStringField(1,ee):ue==="boolean"?ne.writeBooleanField(7,ee):ue==="number"&&(ee%1!=0?ne.writeDoubleField(3,ee):ee<0?ne.writeSVarintField(6,ee):ne.writeVarintField(5,ee))}const pe={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ee=>ee},de=Math.fround||(ve=new Float32Array(1),ee=>(ve[0]=+ee,ve[0]));var ve;class Ee{constructor(ne){this.options=Object.assign(Object.create(pe),ne),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(ne){const{log:ue,minZoom:be,maxZoom:Le}=this.options;ue&&console.time("total time");const Ve=`prepare ${ne.length} points`;ue&&console.time(Ve),this.points=ne;const rt=[];for(let Be=0;Be<ne.length;Be++){const v=ne[Be];if(!v.geometry)continue;const[yt,Mt]=v.geometry.coordinates,Pt=de(Ie(yt)),en=de(qe(Mt));rt.push(Pt,en,1/0,Be,-1,1),this.options.reduce&&rt.push(0)}let ye=this.trees[Le+1]=this._createTree(rt);ue&&console.timeEnd(Ve);for(let Be=Le;Be>=be;Be--){const v=+Date.now();ye=this.trees[Be]=this._createTree(this._cluster(ye,Be)),ue&&console.log("z%d: %d clusters in %dms",Be,ye.numItems,+Date.now()-v)}return ue&&console.timeEnd("total time"),this}getClusters(ne,ue){let be=((ne[0]+180)%360+360)%360-180;const Le=Math.max(-90,Math.min(90,ne[1]));let Ve=ne[2]===180?180:((ne[2]+180)%360+360)%360-180;const rt=Math.max(-90,Math.min(90,ne[3]));if(ne[2]-ne[0]>=360)be=-180,Ve=180;else if(be>Ve){const Mt=this.getClusters([be,Le,180,rt],ue),Pt=this.getClusters([-180,Le,Ve,rt],ue);return Mt.concat(Pt)}const ye=this.trees[this._limitZoom(ue)],Be=ye.range(Ie(be),qe(rt),Ie(Ve),qe(Le)),v=ye.data,yt=[];for(const Mt of Be){const Pt=this.stride*Mt;yt.push(v[Pt+5]>1?Re(v,Pt,this.clusterProps):this.points[v[Pt+3]])}return yt}getChildren(ne){const ue=this._getOriginId(ne),be=this._getOriginZoom(ne),Le="No cluster with the specified id.",Ve=this.trees[be];if(!Ve)throw new Error(Le);const rt=Ve.data;if(ue*this.stride>=rt.length)throw new Error(Le);const ye=this.options.radius/(this.options.extent*Math.pow(2,be-1)),Be=Ve.within(rt[ue*this.stride],rt[ue*this.stride+1],ye),v=[];for(const yt of Be){const Mt=yt*this.stride;rt[Mt+4]===ne&&v.push(rt[Mt+5]>1?Re(rt,Mt,this.clusterProps):this.points[rt[Mt+3]])}if(v.length===0)throw new Error(Le);return v}getLeaves(ne,ue,be){const Le=[];return this._appendLeaves(Le,ne,ue=ue||10,be=be||0,0),Le}getTile(ne,ue,be){const Le=this.trees[this._limitZoom(ne)],Ve=Math.pow(2,ne),{extent:rt,radius:ye}=this.options,Be=ye/rt,v=(be-Be)/Ve,yt=(be+1+Be)/Ve,Mt={features:[]};return this._addTileFeatures(Le.range((ue-Be)/Ve,v,(ue+1+Be)/Ve,yt),Le.data,ue,be,Ve,Mt),ue===0&&this._addTileFeatures(Le.range(1-Be/Ve,v,1,yt),Le.data,Ve,be,Ve,Mt),ue===Ve-1&&this._addTileFeatures(Le.range(0,v,Be/Ve,yt),Le.data,-1,be,Ve,Mt),Mt.features.length?Mt:null}getClusterExpansionZoom(ne){let ue=this._getOriginZoom(ne)-1;for(;ue<=this.options.maxZoom;){const be=this.getChildren(ne);if(ue++,be.length!==1)break;ne=be[0].properties.cluster_id}return ue}_appendLeaves(ne,ue,be,Le,Ve){const rt=this.getChildren(ue);for(const ye of rt){const Be=ye.properties;if(Be&&Be.cluster?Ve+Be.point_count<=Le?Ve+=Be.point_count:Ve=this._appendLeaves(ne,Be.cluster_id,be,Le,Ve):Ve<Le?Ve++:ne.push(ye),ne.length===be)break}return Ve}_createTree(ne){const ue=new s.aI(ne.length/this.stride|0,this.options.nodeSize,Float32Array);for(let be=0;be<ne.length;be+=this.stride)ue.add(ne[be],ne[be+1]);return ue.finish(),ue.data=ne,ue}_addTileFeatures(ne,ue,be,Le,Ve,rt){for(const ye of ne){const Be=ye*this.stride,v=ue[Be+5]>1;let yt,Mt,Pt;if(v)yt=je(ue,Be,this.clusterProps),Mt=ue[Be],Pt=ue[Be+1];else{const Qn=this.points[ue[Be+3]];yt=Qn.properties;const[Xn,Cn]=Qn.geometry.coordinates;Mt=Ie(Xn),Pt=qe(Cn)}const en={type:1,geometry:[[Math.round(this.options.extent*(Mt*Ve-be)),Math.round(this.options.extent*(Pt*Ve-Le))]],tags:yt};let mt;mt=v||this.options.generateId?ue[Be+3]:this.points[ue[Be+3]].id,mt!==void 0&&(en.id=mt),rt.features.push(en)}}_limitZoom(ne){return Math.max(this.options.minZoom,Math.min(Math.floor(+ne),this.options.maxZoom+1))}_cluster(ne,ue){const{radius:be,extent:Le,reduce:Ve,minPoints:rt}=this.options,ye=be/(Le*Math.pow(2,ue)),Be=ne.data,v=[],yt=this.stride;for(let Mt=0;Mt<Be.length;Mt+=yt){if(Be[Mt+2]<=ue)continue;Be[Mt+2]=ue;const Pt=Be[Mt],en=Be[Mt+1],mt=ne.within(Be[Mt],Be[Mt+1],ye),Qn=Be[Mt+5];let Xn=Qn;for(const Cn of mt){const Fn=Cn*yt;Be[Fn+2]>ue&&(Xn+=Be[Fn+5])}if(Xn>Qn&&Xn>=rt){let Cn,Fn=Pt*Qn,pi=en*Qn,Hi=-1;const Ii=(Mt/yt<<5)+(ue+1)+this.points.length;for(const Ar of mt){const ii=Ar*yt;if(Be[ii+2]<=ue)continue;Be[ii+2]=ue;const Fi=Be[ii+5];Fn+=Be[ii]*Fi,pi+=Be[ii+1]*Fi,Be[ii+4]=Ii,Ve&&(Cn||(Cn=this._map(Be,Mt,!0),Hi=this.clusterProps.length,this.clusterProps.push(Cn)),Ve(Cn,this._map(Be,ii)))}Be[Mt+4]=Ii,v.push(Fn/Xn,pi/Xn,1/0,Ii,-1,Xn),Ve&&v.push(Hi)}else{for(let Cn=0;Cn<yt;Cn++)v.push(Be[Mt+Cn]);if(Xn>1)for(const Cn of mt){const Fn=Cn*yt;if(!(Be[Fn+2]<=ue)){Be[Fn+2]=ue;for(let pi=0;pi<yt;pi++)v.push(Be[Fn+pi])}}}}return v}_getOriginId(ne){return ne-this.points.length>>5}_getOriginZoom(ne){return(ne-this.points.length)%32}_map(ne,ue,be){if(ne[ue+5]>1){const rt=this.clusterProps[ne[ue+6]];return be?Object.assign({},rt):rt}const Le=this.points[ne[ue+3]].properties,Ve=this.options.map(Le);return be&&Ve===Le?Object.assign({},Ve):Ve}}function Re(ee,ne,ue){return{type:"Feature",id:ee[ne+3],properties:je(ee,ne,ue),geometry:{type:"Point",coordinates:[(be=ee[ne],360*(be-.5)),tt(ee[ne+1])]}};var be}function je(ee,ne,ue){const be=ee[ne+5],Le=be>=1e4?`${Math.round(be/1e3)}k`:be>=1e3?Math.round(be/100)/10+"k":be,Ve=ee[ne+6],rt=Ve===-1?{}:Object.assign({},ue[Ve]);return Object.assign(rt,{cluster:!0,cluster_id:ee[ne+3],point_count:be,point_count_abbreviated:Le})}function Ie(ee){return ee/360+.5}function qe(ee){const ne=Math.sin(ee*Math.PI/180),ue=.5-.25*Math.log((1+ne)/(1-ne))/Math.PI;return ue<0?0:ue>1?1:ue}function tt(ee){const ne=(180-360*ee)*Math.PI/180;return 360*Math.atan(Math.exp(ne))/Math.PI-90}function At(ee,ne,ue,be){let Le=be;const Ve=ne+(ue-ne>>1);let rt,ye=ue-ne;const Be=ee[ne],v=ee[ne+1],yt=ee[ue],Mt=ee[ue+1];for(let Pt=ne+3;Pt<ue;Pt+=3){const en=ke(ee[Pt],ee[Pt+1],Be,v,yt,Mt);if(en>Le)rt=Pt,Le=en;else if(en===Le){const mt=Math.abs(Pt-Ve);mt<ye&&(rt=Pt,ye=mt)}}Le>be&&(rt-ne>3&&At(ee,ne,rt,be),ee[rt+2]=Le,ue-rt>3&&At(ee,rt,ue,be))}function ke(ee,ne,ue,be,Le,Ve){let rt=Le-ue,ye=Ve-be;if(rt!==0||ye!==0){const Be=((ee-ue)*rt+(ne-be)*ye)/(rt*rt+ye*ye);Be>1?(ue=Le,be=Ve):Be>0&&(ue+=rt*Be,be+=ye*Be)}return rt=ee-ue,ye=ne-be,rt*rt+ye*ye}function we(ee,ne,ue,be){const Le={id:ee??null,type:ne,geometry:ue,tags:be,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(ne==="Point"||ne==="MultiPoint"||ne==="LineString")ze(Le,ue);else if(ne==="Polygon")ze(Le,ue[0]);else if(ne==="MultiLineString")for(const Ve of ue)ze(Le,Ve);else if(ne==="MultiPolygon")for(const Ve of ue)ze(Le,Ve[0]);return Le}function ze(ee,ne){for(let ue=0;ue<ne.length;ue+=3)ee.minX=Math.min(ee.minX,ne[ue]),ee.minY=Math.min(ee.minY,ne[ue+1]),ee.maxX=Math.max(ee.maxX,ne[ue]),ee.maxY=Math.max(ee.maxY,ne[ue+1])}function Me(ee,ne,ue,be){if(!ne.geometry)return;const Le=ne.geometry.coordinates;if(Le&&Le.length===0)return;const Ve=ne.geometry.type,rt=Math.pow(ue.tolerance/((1<<ue.maxZoom)*ue.extent),2);let ye=[],Be=ne.id;if(ue.promoteId?Be=ne.properties[ue.promoteId]:ue.generateId&&(Be=be||0),Ve==="Point")lt(Le,ye);else if(Ve==="MultiPoint")for(const v of Le)lt(v,ye);else if(Ve==="LineString")nt(Le,ye,rt,!1);else if(Ve==="MultiLineString"){if(ue.lineMetrics){for(const v of Le)ye=[],nt(v,ye,rt,!1),ee.push(we(Be,"LineString",ye,ne.properties));return}bt(Le,ye,rt,!1)}else if(Ve==="Polygon")bt(Le,ye,rt,!0);else{if(Ve!=="MultiPolygon"){if(Ve==="GeometryCollection"){for(const v of ne.geometry.geometries)Me(ee,{id:Be,geometry:v,properties:ne.properties},ue,be);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const v of Le){const yt=[];bt(v,yt,rt,!0),ye.push(yt)}}ee.push(we(Be,Ve,ye,ne.properties))}function lt(ee,ne){ne.push(Bt(ee[0]),Ke(ee[1]),0)}function nt(ee,ne,ue,be){let Le,Ve,rt=0;for(let Be=0;Be<ee.length;Be++){const v=Bt(ee[Be][0]),yt=Ke(ee[Be][1]);ne.push(v,yt,0),Be>0&&(rt+=be?(Le*yt-v*Ve)/2:Math.sqrt(Math.pow(v-Le,2)+Math.pow(yt-Ve,2))),Le=v,Ve=yt}const ye=ne.length-3;ne[2]=1,At(ne,0,ye,ue),ne[ye+2]=1,ne.size=Math.abs(rt),ne.start=0,ne.end=ne.size}function bt(ee,ne,ue,be){for(let Le=0;Le<ee.length;Le++){const Ve=[];nt(ee[Le],Ve,ue,be),ne.push(Ve)}}function Bt(ee){return ee/360+.5}function Ke(ee){const ne=Math.sin(ee*Math.PI/180),ue=.5-.25*Math.log((1+ne)/(1-ne))/Math.PI;return ue<0?0:ue>1?1:ue}function Te(ee,ne,ue,be,Le,Ve,rt,ye){if(be/=ne,Ve>=(ue/=ne)&&rt<be)return ee;if(rt<ue||Ve>=be)return null;const Be=[];for(const v of ee){const yt=v.geometry;let Mt=v.type;const Pt=Le===0?v.minX:v.minY,en=Le===0?v.maxX:v.maxY;if(Pt>=ue&&en<be){Be.push(v);continue}if(en<ue||Pt>=be)continue;let mt=[];if(Mt==="Point"||Mt==="MultiPoint")Se(yt,mt,ue,be,Le);else if(Mt==="LineString")We(yt,mt,ue,be,Le,!1,ye.lineMetrics);else if(Mt==="MultiLineString")it(yt,mt,ue,be,Le,!1);else if(Mt==="Polygon")it(yt,mt,ue,be,Le,!0);else if(Mt==="MultiPolygon")for(const Qn of yt){const Xn=[];it(Qn,Xn,ue,be,Le,!0),Xn.length&&mt.push(Xn)}if(mt.length){if(ye.lineMetrics&&Mt==="LineString"){for(const Qn of mt)Be.push(we(v.id,Mt,Qn,v.tags));continue}Mt!=="LineString"&&Mt!=="MultiLineString"||(mt.length===1?(Mt="LineString",mt=mt[0]):Mt="MultiLineString"),Mt!=="Point"&&Mt!=="MultiPoint"||(Mt=mt.length===3?"Point":"MultiPoint"),Be.push(we(v.id,Mt,mt,v.tags))}}return Be.length?Be:null}function Se(ee,ne,ue,be,Le){for(let Ve=0;Ve<ee.length;Ve+=3){const rt=ee[Ve+Le];rt>=ue&&rt<=be&&ft(ne,ee[Ve],ee[Ve+1],ee[Ve+2])}}function We(ee,ne,ue,be,Le,Ve,rt){let ye=at(ee);const Be=Le===0?Dt:Ot;let v,yt,Mt=ee.start;for(let Xn=0;Xn<ee.length-3;Xn+=3){const Cn=ee[Xn],Fn=ee[Xn+1],pi=ee[Xn+2],Hi=ee[Xn+3],Ii=ee[Xn+4],Ar=Le===0?Cn:Fn,ii=Le===0?Hi:Ii;let Fi=!1;rt&&(v=Math.sqrt(Math.pow(Cn-Hi,2)+Math.pow(Fn-Ii,2))),Ar<ue?ii>ue&&(yt=Be(ye,Cn,Fn,Hi,Ii,ue),rt&&(ye.start=Mt+v*yt)):Ar>be?ii<be&&(yt=Be(ye,Cn,Fn,Hi,Ii,be),rt&&(ye.start=Mt+v*yt)):ft(ye,Cn,Fn,pi),ii<ue&&Ar>=ue&&(yt=Be(ye,Cn,Fn,Hi,Ii,ue),Fi=!0),ii>be&&Ar<=be&&(yt=Be(ye,Cn,Fn,Hi,Ii,be),Fi=!0),!Ve&&Fi&&(rt&&(ye.end=Mt+v*yt),ne.push(ye),ye=at(ee)),rt&&(Mt+=v)}let Pt=ee.length-3;const en=ee[Pt],mt=ee[Pt+1],Qn=Le===0?en:mt;Qn>=ue&&Qn<=be&&ft(ye,en,mt,ee[Pt+2]),Pt=ye.length-3,Ve&&Pt>=3&&(ye[Pt]!==ye[0]||ye[Pt+1]!==ye[1])&&ft(ye,ye[0],ye[1],ye[2]),ye.length&&ne.push(ye)}function at(ee){const ne=[];return ne.size=ee.size,ne.start=ee.start,ne.end=ee.end,ne}function it(ee,ne,ue,be,Le,Ve){for(const rt of ee)We(rt,ne,ue,be,Le,Ve,!1)}function ft(ee,ne,ue,be){ee.push(ne,ue,be)}function Dt(ee,ne,ue,be,Le,Ve){const rt=(Ve-ne)/(be-ne);return ft(ee,Ve,ue+(Le-ue)*rt,1),rt}function Ot(ee,ne,ue,be,Le,Ve){const rt=(Ve-ue)/(Le-ue);return ft(ee,ne+(be-ne)*rt,Ve,1),rt}function Jt(ee,ne){const ue=[];for(let be=0;be<ee.length;be++){const Le=ee[be],Ve=Le.type;let rt;if(Ve==="Point"||Ve==="MultiPoint"||Ve==="LineString")rt=Dn(Le.geometry,ne);else if(Ve==="MultiLineString"||Ve==="Polygon"){rt=[];for(const ye of Le.geometry)rt.push(Dn(ye,ne))}else if(Ve==="MultiPolygon"){rt=[];for(const ye of Le.geometry){const Be=[];for(const v of ye)Be.push(Dn(v,ne));rt.push(Be)}}ue.push(we(Le.id,Ve,rt,Le.tags))}return ue}function Dn(ee,ne){const ue=[];ue.size=ee.size,ee.start!==void 0&&(ue.start=ee.start,ue.end=ee.end);for(let be=0;be<ee.length;be+=3)ue.push(ee[be]+ne,ee[be+1],ee[be+2]);return ue}function Pn(ee,ne){if(ee.transformed)return ee;const ue=1<<ee.z,be=ee.x,Le=ee.y;for(const Ve of ee.features){const rt=Ve.geometry,ye=Ve.type;if(Ve.geometry=[],ye===1)for(let Be=0;Be<rt.length;Be+=2)Ve.geometry.push(oi(rt[Be],rt[Be+1],ne,ue,be,Le));else for(let Be=0;Be<rt.length;Be++){const v=[];for(let yt=0;yt<rt[Be].length;yt+=2)v.push(oi(rt[Be][yt],rt[Be][yt+1],ne,ue,be,Le));Ve.geometry.push(v)}}return ee.transformed=!0,ee}function oi(ee,ne,ue,be,Le,Ve){return[Math.round(ue*(ee*be-Le)),Math.round(ue*(ne*be-Ve))]}function In(ee,ne,ue,be,Le){const Ve=ne===Le.maxZoom?0:Le.tolerance/((1<<ne)*Le.extent),rt={features:[],numPoints:0,numSimplified:0,numFeatures:ee.length,source:null,x:ue,y:be,z:ne,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const ye of ee)Tn(rt,ye,Ve,Le);return rt}function Tn(ee,ne,ue,be){const Le=ne.geometry,Ve=ne.type,rt=[];if(ee.minX=Math.min(ee.minX,ne.minX),ee.minY=Math.min(ee.minY,ne.minY),ee.maxX=Math.max(ee.maxX,ne.maxX),ee.maxY=Math.max(ee.maxY,ne.maxY),Ve==="Point"||Ve==="MultiPoint")for(let ye=0;ye<Le.length;ye+=3)rt.push(Le[ye],Le[ye+1]),ee.numPoints++,ee.numSimplified++;else if(Ve==="LineString")dn(rt,Le,ee,ue,!1,!1);else if(Ve==="MultiLineString"||Ve==="Polygon")for(let ye=0;ye<Le.length;ye++)dn(rt,Le[ye],ee,ue,Ve==="Polygon",ye===0);else if(Ve==="MultiPolygon")for(let ye=0;ye<Le.length;ye++){const Be=Le[ye];for(let v=0;v<Be.length;v++)dn(rt,Be[v],ee,ue,!0,v===0)}if(rt.length){let ye=ne.tags||null;if(Ve==="LineString"&&be.lineMetrics){ye={};for(const v in ne.tags)ye[v]=ne.tags[v];ye.mapbox_clip_start=Le.start/Le.size,ye.mapbox_clip_end=Le.end/Le.size}const Be={geometry:rt,type:Ve==="Polygon"||Ve==="MultiPolygon"?3:Ve==="LineString"||Ve==="MultiLineString"?2:1,tags:ye};ne.id!==null&&(Be.id=ne.id),ee.features.push(Be)}}function dn(ee,ne,ue,be,Le,Ve){const rt=be*be;if(be>0&&ne.size<(Le?rt:be))return void(ue.numPoints+=ne.length/3);const ye=[];for(let Be=0;Be<ne.length;Be+=3)(be===0||ne[Be+2]>rt)&&(ue.numSimplified++,ye.push(ne[Be],ne[Be+1])),ue.numPoints++;Le&&(function(Be,v){let yt=0;for(let Mt=0,Pt=Be.length,en=Pt-2;Mt<Pt;en=Mt,Mt+=2)yt+=(Be[Mt]-Be[en])*(Be[Mt+1]+Be[en+1]);if(yt>0===v)for(let Mt=0,Pt=Be.length;Mt<Pt/2;Mt+=2){const en=Be[Mt],mt=Be[Mt+1];Be[Mt]=Be[Pt-2-Mt],Be[Mt+1]=Be[Pt-1-Mt],Be[Pt-2-Mt]=en,Be[Pt-1-Mt]=mt}})(ye,Ve),ee.push(ye)}const $n={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Un{constructor(ne,ue){const be=(ue=this.options=(function(Ve,rt){for(const ye in rt)Ve[ye]=rt[ye];return Ve})(Object.create($n),ue)).debug;if(be&&console.time("preprocess data"),ue.maxZoom<0||ue.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ue.promoteId&&ue.generateId)throw new Error("promoteId and generateId cannot be used together.");let Le=(function(Ve,rt){const ye=[];if(Ve.type==="FeatureCollection")for(let Be=0;Be<Ve.features.length;Be++)Me(ye,Ve.features[Be],rt,Be);else Me(ye,Ve.type==="Feature"?Ve:{geometry:Ve},rt);return ye})(ne,ue);this.tiles={},this.tileCoords=[],be&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ue.indexMaxZoom,ue.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Le=(function(Ve,rt){const ye=rt.buffer/rt.extent;let Be=Ve;const v=Te(Ve,1,-1-ye,ye,0,-1,2,rt),yt=Te(Ve,1,1-ye,2+ye,0,-1,2,rt);return(v||yt)&&(Be=Te(Ve,1,-ye,1+ye,0,-1,2,rt)||[],v&&(Be=Jt(v,1).concat(Be)),yt&&(Be=Be.concat(Jt(yt,-1)))),Be})(Le,ue),Le.length&&this.splitTile(Le,0,0,0),be&&(Le.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(ne,ue,be,Le,Ve,rt,ye){const Be=[ne,ue,be,Le],v=this.options,yt=v.debug;for(;Be.length;){Le=Be.pop(),be=Be.pop(),ue=Be.pop(),ne=Be.pop();const Mt=1<<ue,Pt=It(ue,be,Le);let en=this.tiles[Pt];if(!en&&(yt>1&&console.time("creation"),en=this.tiles[Pt]=In(ne,ue,be,Le,v),this.tileCoords.push({z:ue,x:be,y:Le}),yt)){yt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ue,be,Le,en.numFeatures,en.numPoints,en.numSimplified),console.timeEnd("creation"));const Fi=`z${ue}`;this.stats[Fi]=(this.stats[Fi]||0)+1,this.total++}if(en.source=ne,Ve==null){if(ue===v.indexMaxZoom||en.numPoints<=v.indexMaxPoints)continue}else{if(ue===v.maxZoom||ue===Ve)continue;if(Ve!=null){const Fi=Ve-ue;if(be!==rt>>Fi||Le!==ye>>Fi)continue}}if(en.source=null,ne.length===0)continue;yt>1&&console.time("clipping");const mt=.5*v.buffer/v.extent,Qn=.5-mt,Xn=.5+mt,Cn=1+mt;let Fn=null,pi=null,Hi=null,Ii=null,Ar=Te(ne,Mt,be-mt,be+Xn,0,en.minX,en.maxX,v),ii=Te(ne,Mt,be+Qn,be+Cn,0,en.minX,en.maxX,v);ne=null,Ar&&(Fn=Te(Ar,Mt,Le-mt,Le+Xn,1,en.minY,en.maxY,v),pi=Te(Ar,Mt,Le+Qn,Le+Cn,1,en.minY,en.maxY,v),Ar=null),ii&&(Hi=Te(ii,Mt,Le-mt,Le+Xn,1,en.minY,en.maxY,v),Ii=Te(ii,Mt,Le+Qn,Le+Cn,1,en.minY,en.maxY,v),ii=null),yt>1&&console.timeEnd("clipping"),Be.push(Fn||[],ue+1,2*be,2*Le),Be.push(pi||[],ue+1,2*be,2*Le+1),Be.push(Hi||[],ue+1,2*be+1,2*Le),Be.push(Ii||[],ue+1,2*be+1,2*Le+1)}}getTile(ne,ue,be){ne=+ne,ue=+ue,be=+be;const Le=this.options,{extent:Ve,debug:rt}=Le;if(ne<0||ne>24)return null;const ye=1<<ne,Be=It(ne,ue=ue+ye&ye-1,be);if(this.tiles[Be])return Pn(this.tiles[Be],Ve);rt>1&&console.log("drilling down to z%d-%d-%d",ne,ue,be);let v,yt=ne,Mt=ue,Pt=be;for(;!v&&yt>0;)yt--,Mt>>=1,Pt>>=1,v=this.tiles[It(yt,Mt,Pt)];return v&&v.source?(rt>1&&(console.log("found parent tile z%d-%d-%d",yt,Mt,Pt),console.time("drilling down")),this.splitTile(v.source,yt,Mt,Pt,ne,ue,be),rt>1&&console.timeEnd("drilling down"),this.tiles[Be]?Pn(this.tiles[Be],Ve):null):null}}function It(ee,ne,ue){return 32*((1<<ee)*ue+ne)+ee}class _e extends y{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(ne,ue){return s._(this,void 0,void 0,(function*(){const be=ne.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const Le=this._geoJSONIndex.getTile(be.z,be.x,be.y);if(!Le)return null;const Ve=new q(Le.features,{version:2,extent:s.$});let rt=(function(ye){const Be=new s.cM;return(function(v,yt){for(const Mt in v.layers)yt.writeMessage(3,V,v.layers[Mt])})(ye,Be),Be.finish()})(Ve);return rt.byteOffset===0&&rt.byteLength===rt.buffer.byteLength||(rt=new Uint8Array(rt)),{vectorTile:Ve,rawData:rt.buffer}}))}loadData(ne){return s._(this,void 0,void 0,(function*(){var ue;(ue=this._pendingRequest)===null||ue===void 0||ue.abort();const be=!!(ne&&ne.request&&ne.request.collectResourceTiming)&&new s.cN(ne.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(ne,this._pendingRequest);const Le=yield this._pendingData;this._geoJSONIndex=ne.cluster?new Ee((function({superclusterOptions:rt,clusterProperties:ye}){if(!ye||!rt)return rt;const Be={},v={},yt={accumulated:null,zoom:0},Mt={properties:null},Pt=Object.keys(ye);for(const en of Pt){const[mt,Qn]=ye[en],Xn=s.cT(Qn),Cn=s.cT(typeof mt=="string"?[mt,["accumulated"],["get",en]]:mt);Be[en]=Xn.value,v[en]=Cn.value}return rt.map=en=>{Mt.properties=en;const mt={};for(const Qn of Pt)mt[Qn]=Be[Qn].evaluate(yt,Mt);return mt},rt.reduce=(en,mt)=>{Mt.properties=mt;for(const Qn of Pt)yt.accumulated=en[Qn],en[Qn]=v[Qn].evaluate(yt,Mt)},rt})(ne)).load(Le.features):(function(rt,ye){return new Un(rt,ye)})(Le,ne.geojsonVtOptions),this.loaded={};const Ve={data:Le};if(be){const rt=be.finish();rt&&(Ve.resourceTiming={},Ve.resourceTiming[ne.source]=JSON.parse(JSON.stringify(rt)))}return Ve}catch(Le){if(delete this._pendingRequest,s.cy(Le))return{abandoned:!0};throw Le}}))}getData(){return s._(this,void 0,void 0,(function*(){return this._pendingData}))}reloadTile(ne){const ue=this.loaded;return ue&&ue[ne.uid]?super.reloadTile(ne):this.loadTile(ne)}loadAndProcessGeoJSON(ne,ue){return s._(this,void 0,void 0,(function*(){let be=yield this.loadGeoJSON(ne,ue);if(delete this._pendingRequest,typeof be!="object")throw new Error(`Input data given to '${ne.source}' is not a valid GeoJSON object.`);if(F(be,!0),ne.filter){const Le=s.cT(ne.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Le.result==="error")throw new Error(Le.value.map((rt=>`${rt.key}: ${rt.message}`)).join(", "));be={type:"FeatureCollection",features:be.features.filter((rt=>Le.value.evaluate({zoom:0},rt)))}}return be}))}loadGeoJSON(ne,ue){return s._(this,void 0,void 0,(function*(){const{promoteId:be}=ne;if(ne.request){const Le=yield s.j(ne.request,ue);return this._dataUpdateable=s.cV(Le.data,be)?s.cU(Le.data,be):void 0,Le.data}if(typeof ne.data=="string")try{const Le=JSON.parse(ne.data);return this._dataUpdateable=s.cV(Le,be)?s.cU(Le,be):void 0,Le}catch{throw new Error(`Input data given to '${ne.source}' is not a valid GeoJSON object.`)}if(!ne.dataDiff)throw new Error(`Input data given to '${ne.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${ne.source}`);return s.cW(this._dataUpdateable,ne.dataDiff,be),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}}))}removeSource(ne){return s._(this,void 0,void 0,(function*(){this._pendingRequest&&this._pendingRequest.abort()}))}getClusterExpansionZoom(ne){return this._geoJSONIndex.getClusterExpansionZoom(ne.clusterId)}getClusterChildren(ne){return this._geoJSONIndex.getChildren(ne.clusterId)}getClusterLeaves(ne){return this._geoJSONIndex.getLeaves(ne.clusterId,ne.limit,ne.offset)}}class oe{constructor(ne){this.self=ne,this.actor=new s.J(ne),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.globalStates=new Map,this.self.registerWorkerSource=(ue,be)=>{if(this.externalWorkerSourceTypes[ue])throw new Error(`Worker source with name "${ue}" already registered.`);this.externalWorkerSourceTypes[ue]=be},this.self.addProtocol=s.cA,this.self.removeProtocol=s.cB,this.self.registerRTLTextPlugin=ue=>{s.cX.setMethods(ue)},this.actor.registerMessageHandler("LDT",((ue,be)=>this._getDEMWorkerSource(ue,be.source).loadTile(be))),this.actor.registerMessageHandler("RDT",((ue,be)=>s._(this,void 0,void 0,(function*(){this._getDEMWorkerSource(ue,be.source).removeTile(be)})))),this.actor.registerMessageHandler("GCEZ",((ue,be)=>s._(this,void 0,void 0,(function*(){return this._getWorkerSource(ue,be.type,be.source).getClusterExpansionZoom(be)})))),this.actor.registerMessageHandler("GCC",((ue,be)=>s._(this,void 0,void 0,(function*(){return this._getWorkerSource(ue,be.type,be.source).getClusterChildren(be)})))),this.actor.registerMessageHandler("GCL",((ue,be)=>s._(this,void 0,void 0,(function*(){return this._getWorkerSource(ue,be.type,be.source).getClusterLeaves(be)})))),this.actor.registerMessageHandler("LD",((ue,be)=>this._getWorkerSource(ue,be.type,be.source).loadData(be))),this.actor.registerMessageHandler("GD",((ue,be)=>this._getWorkerSource(ue,be.type,be.source).getData())),this.actor.registerMessageHandler("LT",((ue,be)=>this._getWorkerSource(ue,be.type,be.source).loadTile(be))),this.actor.registerMessageHandler("RT",((ue,be)=>this._getWorkerSource(ue,be.type,be.source).reloadTile(be))),this.actor.registerMessageHandler("AT",((ue,be)=>this._getWorkerSource(ue,be.type,be.source).abortTile(be))),this.actor.registerMessageHandler("RMT",((ue,be)=>this._getWorkerSource(ue,be.type,be.source).removeTile(be))),this.actor.registerMessageHandler("RS",((ue,be)=>s._(this,void 0,void 0,(function*(){if(!this.workerSources[ue]||!this.workerSources[ue][be.type]||!this.workerSources[ue][be.type][be.source])return;const Le=this.workerSources[ue][be.type][be.source];delete this.workerSources[ue][be.type][be.source],Le.removeSource!==void 0&&Le.removeSource(be)})))),this.actor.registerMessageHandler("RM",(ue=>s._(this,void 0,void 0,(function*(){delete this.layerIndexes[ue],delete this.availableImages[ue],delete this.workerSources[ue],delete this.demWorkerSources[ue],this.globalStates.delete(ue)})))),this.actor.registerMessageHandler("SR",((ue,be)=>s._(this,void 0,void 0,(function*(){this.referrer=be})))),this.actor.registerMessageHandler("SRPS",((ue,be)=>this._syncRTLPluginState(ue,be))),this.actor.registerMessageHandler("IS",((ue,be)=>s._(this,void 0,void 0,(function*(){this.self.importScripts(be)})))),this.actor.registerMessageHandler("SI",((ue,be)=>this._setImages(ue,be))),this.actor.registerMessageHandler("UL",((ue,be)=>s._(this,void 0,void 0,(function*(){this._getLayerIndex(ue).update(be.layers,be.removedIds,this._getGlobalState(ue))})))),this.actor.registerMessageHandler("UGS",((ue,be)=>s._(this,void 0,void 0,(function*(){const Le=this._getGlobalState(ue);for(const Ve in be)Le[Ve]=be[Ve]})))),this.actor.registerMessageHandler("SL",((ue,be)=>s._(this,void 0,void 0,(function*(){this._getLayerIndex(ue).replace(be,this._getGlobalState(ue))}))))}_getGlobalState(ne){let ue=this.globalStates.get(ne);return ue||(ue={},this.globalStates.set(ne,ue)),ue}_setImages(ne,ue){return s._(this,void 0,void 0,(function*(){this.availableImages[ne]=ue;for(const be in this.workerSources[ne]){const Le=this.workerSources[ne][be];for(const Ve in Le)Le[Ve].availableImages=ue}}))}_syncRTLPluginState(ne,ue){return s._(this,void 0,void 0,(function*(){return yield s.cX.syncState(ue,this.self.importScripts)}))}_getAvailableImages(ne){let ue=this.availableImages[ne];return ue||(ue=[]),ue}_getLayerIndex(ne){let ue=this.layerIndexes[ne];return ue||(ue=this.layerIndexes[ne]=new a),ue}_getWorkerSource(ne,ue,be){if(this.workerSources[ne]||(this.workerSources[ne]={}),this.workerSources[ne][ue]||(this.workerSources[ne][ue]={}),!this.workerSources[ne][ue][be]){const Le={sendAsync:(Ve,rt)=>(Ve.targetMapId=ne,this.actor.sendAsync(Ve,rt))};switch(ue){case"vector":this.workerSources[ne][ue][be]=new y(Le,this._getLayerIndex(ne),this._getAvailableImages(ne));break;case"geojson":this.workerSources[ne][ue][be]=new _e(Le,this._getLayerIndex(ne),this._getAvailableImages(ne));break;default:this.workerSources[ne][ue][be]=new this.externalWorkerSourceTypes[ue](Le,this._getLayerIndex(ne),this._getAvailableImages(ne))}}return this.workerSources[ne][ue][be]}_getDEMWorkerSource(ne,ue){return this.demWorkerSources[ne]||(this.demWorkerSources[ne]={}),this.demWorkerSources[ne][ue]||(this.demWorkerSources[ne][ue]=new M),this.demWorkerSources[ne][ue]}}return s.i(self)&&(self.worker=new oe(self)),oe})),r("index",["exports","./shared"],(function(s,a){var c="5.9.0";function h(){var O=new a.A(4);return a.A!=Float32Array&&(O[1]=0,O[2]=0),O[0]=1,O[3]=1,O}let m,y;const M={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(O,l,p){const C=requestAnimationFrame((B=>{E(),l(B)})),{unsubscribe:E}=a.s(O.signal,"abort",(()=>{E(),cancelAnimationFrame(C),p(a.c())}),!1)},frameAsync(O){return new Promise(((l,p)=>{this.frame(O,l,p)}))},getImageData(O,l=0){return this.getImageCanvasContext(O).getImageData(-l,-l,O.width+2*l,O.height+2*l)},getImageCanvasContext(O){const l=window.document.createElement("canvas"),p=l.getContext("2d",{willReadFrequently:!0});if(!p)throw new Error("failed to create canvas 2d context");return l.width=O.width,l.height=O.height,p.drawImage(O,0,0,O.width,O.height),p},resolveURL:O=>(m||(m=document.createElement("a")),m.href=O,m.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(y==null&&(y=matchMedia("(prefers-reduced-motion: reduce)")),y.matches)}};class x{static testProp(l){if(!x.docStyle)return l[0];for(let p=0;p<l.length;p++)if(l[p]in x.docStyle)return l[p];return l[0]}static create(l,p,C){const E=window.document.createElement(l);return p!==void 0&&(E.className=p),C&&C.appendChild(E),E}static createNS(l,p){return window.document.createElementNS(l,p)}static disableDrag(){x.docStyle&&x.selectProp&&(x.userSelect=x.docStyle[x.selectProp],x.docStyle[x.selectProp]="none")}static enableDrag(){x.docStyle&&x.selectProp&&(x.docStyle[x.selectProp]=x.userSelect)}static setTransform(l,p){l.style[x.transformProp]=p}static addEventListener(l,p,C,E={}){l.addEventListener(p,C,"passive"in E?E:E.capture)}static removeEventListener(l,p,C,E={}){l.removeEventListener(p,C,"passive"in E?E:E.capture)}static suppressClickInternal(l){l.preventDefault(),l.stopPropagation(),window.removeEventListener("click",x.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",x.suppressClickInternal,!0),window.setTimeout((()=>{window.removeEventListener("click",x.suppressClickInternal,!0)}),0)}static getScale(l){const p=l.getBoundingClientRect();return{x:p.width/l.offsetWidth||1,y:p.height/l.offsetHeight||1,boundingClientRect:p}}static getPoint(l,p,C){const E=p.boundingClientRect;return new a.P((C.clientX-E.left)/p.x-l.clientLeft,(C.clientY-E.top)/p.y-l.clientTop)}static mousePos(l,p){const C=x.getScale(l);return x.getPoint(l,C,p)}static touchPos(l,p){const C=[],E=x.getScale(l);for(let B=0;B<p.length;B++)C.push(x.getPoint(l,E,p[B]));return C}static mouseButton(l){return l.button}static remove(l){l.parentNode&&l.parentNode.removeChild(l)}static sanitize(l){const p=new DOMParser().parseFromString(l,"text/html").body||document.createElement("body"),C=p.querySelectorAll("script");for(const E of C)E.remove();return x.clean(p),p.innerHTML}static isPossiblyDangerous(l,p){const C=p.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(l)||!C.includes("javascript:")&&!C.includes("data:"))||!!l.startsWith("on")||void 0}static clean(l){const p=l.children;for(const C of p)x.removeAttributes(C),x.clean(C)}static removeAttributes(l){for(const{name:p,value:C}of l.attributes)x.isPossiblyDangerous(p,C)&&l.removeAttribute(p)}}x.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,x.selectProp=x.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),x.transformProp=x.testProp(["transform","WebkitTransform"]);const T={supported:!1,testSupport:function(O){!j&&F&&(q?V(O):P=O)}};let P,F,j=!1,q=!1;function V(O){const l=O.createTexture();O.bindTexture(O.TEXTURE_2D,l);try{if(O.texImage2D(O.TEXTURE_2D,0,O.RGBA,O.RGBA,O.UNSIGNED_BYTE,F),O.isContextLost())return;T.supported=!0}catch{}O.deleteTexture(l),j=!0}var H;typeof document<"u"&&(F=document.createElement("img"),F.onload=()=>{P&&V(P),P=null,q=!0},F.onerror=()=>{j=!0,P=null},F.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),(function(O){let l,p,C,E;O.resetRequestQueue=()=>{l=[],p=0,C=0,E={}},O.addThrottleControl=Z=>{const ae=C++;return E[ae]=Z,ae},O.removeThrottleControl=Z=>{delete E[Z],U()},O.getImage=(Z,ae,ce=!0)=>new Promise(((me,ge)=>{T.supported&&(Z.headers||(Z.headers={}),Z.headers.accept="image/webp,*/*"),a.e(Z,{type:"image"}),l.push({abortController:ae,requestParameters:Z,supportImageRefresh:ce,state:"queued",onError:Pe=>{ge(Pe)},onSuccess:Pe=>{me(Pe)}}),U()}));const B=Z=>a._(this,void 0,void 0,(function*(){Z.state="running";const{requestParameters:ae,supportImageRefresh:ce,onError:me,onSuccess:ge,abortController:Pe}=Z,Ne=ce===!1&&!a.i(self)&&!a.g(ae.url)&&(!ae.headers||Object.keys(ae.headers).reduce(((et,ot)=>et&&ot==="accept"),!0));p++;const Ze=Ne?G(ae,Pe):a.m(ae,Pe);try{const et=yield Ze;delete Z.abortController,Z.state="completed",et.data instanceof HTMLImageElement||a.b(et.data)?ge(et):et.data&&ge({data:yield(Xe=et.data,typeof createImageBitmap=="function"?a.f(Xe):a.h(Xe)),cacheControl:et.cacheControl,expires:et.expires})}catch(et){delete Z.abortController,me(et)}finally{p--,U()}var Xe})),U=()=>{const Z=(()=>{for(const ae of Object.keys(E))if(E[ae]())return!0;return!1})()?a.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:a.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let ae=p;ae<Z&&l.length>0;ae++){const ce=l.shift();ce.abortController.signal.aborted?ae--:B(ce)}},G=(Z,ae)=>new Promise(((ce,me)=>{const ge=new Image,Pe=Z.url,Ne=Z.credentials;Ne&&Ne==="include"?ge.crossOrigin="use-credentials":(Ne&&Ne==="same-origin"||!a.d(Pe))&&(ge.crossOrigin="anonymous"),ae.signal.addEventListener("abort",(()=>{ge.src="",me(a.c())})),ge.fetchPriority="high",ge.onload=()=>{ge.onerror=ge.onload=null,ce({data:ge})},ge.onerror=()=>{ge.onerror=ge.onload=null,ae.signal.aborted||me(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},ge.src=Pe}))})(H||(H={})),H.resetRequestQueue();class Q{constructor(l){this._transformRequestFn=l??null}transformRequest(l,p){return this._transformRequestFn&&this._transformRequestFn(l,p)||{url:l}}setTransformRequest(l){this._transformRequestFn=l}}function Y(O){const l=[];if(typeof O=="string")l.push({id:"default",url:O});else if(O&&O.length>0){const p=[];for(const{id:C,url:E}of O){const B=`${C}${E}`;p.indexOf(B)===-1&&(p.push(B),l.push({id:C,url:E}))}}return l}function z(O,l,p){try{const C=new URL(O);return C.pathname+=`${l}${p}`,C.toString()}catch{throw new Error(`Invalid sprite URL "${O}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}function se(O){const{userImage:l}=O;return!!(l&&l.render&&l.render())&&(O.data.replace(new Uint8Array(l.data.buffer)),!0)}class le extends a.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new a.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(l){if(this.loaded!==l&&(this.loaded=l,l)){for(const{ids:p,promiseResolve:C}of this.requestors)C(this._getImagesForIds(p));this.requestors=[]}}getImage(l){const p=this.images[l];if(p&&!p.data&&p.spriteData){const C=p.spriteData;p.data=new a.R({width:C.width,height:C.height},C.context.getImageData(C.x,C.y,C.width,C.height).data),p.spriteData=null}return p}addImage(l,p){if(this.images[l])throw new Error(`Image id ${l} already exist, use updateImage instead`);this._validate(l,p)&&(this.images[l]=p)}_validate(l,p){let C=!0;const E=p.data||p.spriteData;return this._validateStretch(p.stretchX,E&&E.width)||(this.fire(new a.k(new Error(`Image "${l}" has invalid "stretchX" value`))),C=!1),this._validateStretch(p.stretchY,E&&E.height)||(this.fire(new a.k(new Error(`Image "${l}" has invalid "stretchY" value`))),C=!1),this._validateContent(p.content,p)||(this.fire(new a.k(new Error(`Image "${l}" has invalid "content" value`))),C=!1),C}_validateStretch(l,p){if(!l)return!0;let C=0;for(const E of l){if(E[0]<C||E[1]<E[0]||p<E[1])return!1;C=E[1]}return!0}_validateContent(l,p){if(!l)return!0;if(l.length!==4)return!1;const C=p.spriteData,E=C&&C.width||p.data.width,B=C&&C.height||p.data.height;return!(l[0]<0||E<l[0]||l[1]<0||B<l[1]||l[2]<0||E<l[2]||l[3]<0||B<l[3]||l[2]<l[0]||l[3]<l[1])}updateImage(l,p,C=!0){const E=this.getImage(l);if(C&&(E.data.width!==p.data.width||E.data.height!==p.data.height))throw new Error(`size mismatch between old image (${E.data.width}x${E.data.height}) and new image (${p.data.width}x${p.data.height}).`);p.version=E.version+1,this.images[l]=p,this.updatedImages[l]=!0}removeImage(l){const p=this.images[l];delete this.images[l],delete this.patterns[l],p.userImage&&p.userImage.onRemove&&p.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(l){return new Promise(((p,C)=>{let E=!0;if(!this.isLoaded())for(const B of l)this.images[B]||(E=!1);this.isLoaded()||E?p(this._getImagesForIds(l)):this.requestors.push({ids:l,promiseResolve:p})}))}_getImagesForIds(l){const p={};for(const C of l){let E=this.getImage(C);E||(this.fire(new a.l("styleimagemissing",{id:C})),E=this.getImage(C)),E?p[C]={data:E.data.clone(),pixelRatio:E.pixelRatio,sdf:E.sdf,version:E.version,stretchX:E.stretchX,stretchY:E.stretchY,content:E.content,textFitWidth:E.textFitWidth,textFitHeight:E.textFitHeight,hasRenderCallback:!!(E.userImage&&E.userImage.render)}:a.w(`Image "${C}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return p}getPixelSize(){const{width:l,height:p}=this.atlasImage;return{width:l,height:p}}getPattern(l){const p=this.patterns[l],C=this.getImage(l);if(!C)return null;if(p&&p.position.version===C.version)return p.position;if(p)p.position.version=C.version;else{const E={w:C.data.width+2,h:C.data.height+2,x:0,y:0},B=new a.I(E,C);this.patterns[l]={bin:E,position:B}}return this._updatePatternAtlas(),this.patterns[l].position}bind(l){const p=l.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new a.T(l,this.atlasImage,p.RGBA),this.atlasTexture.bind(p.LINEAR,p.CLAMP_TO_EDGE)}_updatePatternAtlas(){const l=[];for(const B in this.patterns)l.push(this.patterns[B].bin);const{w:p,h:C}=a.p(l),E=this.atlasImage;E.resize({width:p||1,height:C||1});for(const B in this.patterns){const{bin:U}=this.patterns[B],G=U.x+1,Z=U.y+1,ae=this.getImage(B).data,ce=ae.width,me=ae.height;a.R.copy(ae,E,{x:0,y:0},{x:G,y:Z},{width:ce,height:me}),a.R.copy(ae,E,{x:0,y:me-1},{x:G,y:Z-1},{width:ce,height:1}),a.R.copy(ae,E,{x:0,y:0},{x:G,y:Z+me},{width:ce,height:1}),a.R.copy(ae,E,{x:ce-1,y:0},{x:G-1,y:Z},{width:1,height:me}),a.R.copy(ae,E,{x:0,y:0},{x:G+ce,y:Z},{width:1,height:me})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(l){for(const p of l){if(this.callbackDispatchedThisFrame[p])continue;this.callbackDispatchedThisFrame[p]=!0;const C=this.getImage(p);C||a.w(`Image with ID: "${p}" was not found`),se(C)&&this.updateImage(p,C)}}}const pe=1e20;function de(O,l,p,C,E,B,U,G,Z){for(let ae=l;ae<l+C;ae++)ve(O,p*B+ae,B,E,U,G,Z);for(let ae=p;ae<p+E;ae++)ve(O,ae*B+l,1,C,U,G,Z)}function ve(O,l,p,C,E,B,U){B[0]=0,U[0]=-pe,U[1]=pe,E[0]=O[l];for(let G=1,Z=0,ae=0;G<C;G++){E[G]=O[l+G*p];const ce=G*G;do{const me=B[Z];ae=(E[G]-E[me]+ce-me*me)/(G-me)/2}while(ae<=U[Z]&&--Z>-1);Z++,B[Z]=G,U[Z]=ae,U[Z+1]=pe}for(let G=0,Z=0;G<C;G++){for(;U[Z+1]<G;)Z++;const ae=B[Z],ce=G-ae;O[l+G*p]=E[ae]+ce*ce}}class Ee{constructor(l,p,C){this.requestManager=l,this.localIdeographFontFamily=p,this.entries={},this.lang=C}setURL(l){this.url=l}getGlyphs(l){return a._(this,void 0,void 0,(function*(){const p=[];for(const B in l)for(const U of l[B])p.push(this._getAndCacheGlyphsPromise(B,U));const C=yield Promise.all(p),E={};for(const{stack:B,id:U,glyph:G}of C)E[B]||(E[B]={}),E[B][U]=G&&{id:G.id,bitmap:G.bitmap.clone(),metrics:G.metrics};return E}))}_getAndCacheGlyphsPromise(l,p){return a._(this,void 0,void 0,(function*(){let C=this.entries[l];C||(C=this.entries[l]={glyphs:{},requests:{},ranges:{}});let E=C.glyphs[p];if(E!==void 0)return{stack:l,id:p,glyph:E};if(E=this._tinySDF(C,l,p),E)return C.glyphs[p]=E,{stack:l,id:p,glyph:E};const B=Math.floor(p/256);if(256*B>65535)throw new Error("glyphs > 65535 not supported");if(C.ranges[B])return{stack:l,id:p,glyph:E};if(!this.url)throw new Error("glyphsUrl is not set");if(!C.requests[B]){const G=Ee.loadGlyphRange(l,B,this.url,this.requestManager);C.requests[B]=G}const U=yield C.requests[B];for(const G in U)this._doesCharSupportLocalGlyph(+G)||(C.glyphs[+G]=U[+G]);return C.ranges[B]=!0,{stack:l,id:p,glyph:U[p]||null}}))}_doesCharSupportLocalGlyph(l){return!!this.localIdeographFontFamily&&(new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(l))||a.u["CJK Unified Ideographs"](l)||a.u["Hangul Syllables"](l)||a.u.Hiragana(l)||a.u.Katakana(l)||a.u["CJK Symbols and Punctuation"](l)||a.u["Halfwidth and Fullwidth Forms"](l))}_tinySDF(l,p,C){const E=this.localIdeographFontFamily;if(!E||!this._doesCharSupportLocalGlyph(C))return;let B=l.tinySDF;if(!B){let G="400";/bold/i.test(p)?G="900":/medium/i.test(p)?G="500":/light/i.test(p)&&(G="200"),B=l.tinySDF=new Ee.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,lang:this.lang,fontFamily:E,fontWeight:G})}const U=B.draw(String.fromCharCode(C));return{id:C,bitmap:new a.q({width:U.width||60,height:U.height||60},U.data),metrics:{width:U.glyphWidth/2||24,height:U.glyphHeight/2||24,left:U.glyphLeft/2+.5||0,top:U.glyphTop/2-27.5||-8,advance:U.glyphAdvance/2||24,isDoubleResolution:!0}}}}Ee.loadGlyphRange=function(O,l,p,C){return a._(this,void 0,void 0,(function*(){const E=256*l,B=E+255,U=C.transformRequest(p.replace("{fontstack}",O).replace("{range}",`${E}-${B}`),"Glyphs"),G=yield a.n(U,new AbortController);if(!G||!G.data)throw new Error(`Could not load glyph range. range: ${l}, ${E}-${B}`);const Z={};for(const ae of a.o(G.data))Z[ae.id]=ae;return Z}))},Ee.TinySDF=class{constructor({fontSize:O=24,buffer:l=3,radius:p=8,cutoff:C=.25,fontFamily:E="sans-serif",fontWeight:B="normal",fontStyle:U="normal",lang:G=null}={}){this.buffer=l,this.cutoff=C,this.radius=p,this.lang=G;const Z=this.size=O+4*l,ae=this._createCanvas(Z),ce=this.ctx=ae.getContext("2d",{willReadFrequently:!0});ce.font=`${U} ${B} ${O}px ${E}`,ce.textBaseline="alphabetic",ce.textAlign="left",ce.fillStyle="black",this.gridOuter=new Float64Array(Z*Z),this.gridInner=new Float64Array(Z*Z),this.f=new Float64Array(Z),this.z=new Float64Array(Z+1),this.v=new Uint16Array(Z)}_createCanvas(O){const l=document.createElement("canvas");return l.width=l.height=O,l}draw(O){const{width:l,actualBoundingBoxAscent:p,actualBoundingBoxDescent:C,actualBoundingBoxLeft:E,actualBoundingBoxRight:B}=this.ctx.measureText(O),U=Math.ceil(p),G=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(B-E))),Z=Math.min(this.size-this.buffer,U+Math.ceil(C)),ae=G+2*this.buffer,ce=Z+2*this.buffer,me=Math.max(ae*ce,0),ge=new Uint8ClampedArray(me),Pe={data:ge,width:ae,height:ce,glyphWidth:G,glyphHeight:Z,glyphTop:U,glyphLeft:0,glyphAdvance:l};if(G===0||Z===0)return Pe;const{ctx:Ne,buffer:Ze,gridInner:Xe,gridOuter:et}=this;this.lang&&(Ne.lang=this.lang),Ne.clearRect(Ze,Ze,G,Z),Ne.fillText(O,Ze,Ze+U);const ot=Ne.getImageData(Ze,Ze,G,Z);et.fill(pe,0,me),Xe.fill(0,0,me);for(let ht=0;ht<Z;ht++)for(let ut=0;ut<G;ut++){const gt=ot.data[4*(ht*G+ut)+3]/255;if(gt===0)continue;const xt=(ht+Ze)*ae+ut+Ze;if(gt===1)et[xt]=0,Xe[xt]=pe;else{const ct=.5-gt;et[xt]=ct>0?ct*ct:0,Xe[xt]=ct<0?ct*ct:0}}de(et,0,0,ae,ce,ae,this.f,this.v,this.z),de(Xe,Ze,Ze,G,Z,ae,this.f,this.v,this.z);for(let ht=0;ht<me;ht++){const ut=Math.sqrt(et[ht])-Math.sqrt(Xe[ht]);ge[ht]=Math.round(255-255*(ut/this.radius+this.cutoff))}return Pe}};class Re{constructor(){this.specification=a.v.light.position}possiblyEvaluate(l,p){return a.B(l.expression.evaluate(p))}interpolate(l,p,C){return{x:a.C.number(l.x,p.x,C),y:a.C.number(l.y,p.y,C),z:a.C.number(l.z,p.z,C)}}}let je;class Ie extends a.E{constructor(l){super(),je=je||new a.r({anchor:new a.D(a.v.light.anchor),position:new Re,color:new a.D(a.v.light.color),intensity:new a.D(a.v.light.intensity)}),this._transitionable=new a.t(je,void 0),this.setLight(l),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(l,p={}){if(!this._validate(a.x,l,p))for(const C in l){const E=l[C];C.endsWith("-transition")?this._transitionable.setTransition(C.slice(0,-11),E):this._transitionable.setValue(C,E)}}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}_validate(l,p,C){return(!C||C.validate!==!1)&&a.y(this,l.call(a.z,{value:p,style:{glyphs:!0,sprite:!0},styleSpec:a.v}))}}const qe=new a.r({"sky-color":new a.D(a.v.sky["sky-color"]),"horizon-color":new a.D(a.v.sky["horizon-color"]),"fog-color":new a.D(a.v.sky["fog-color"]),"fog-ground-blend":new a.D(a.v.sky["fog-ground-blend"]),"horizon-fog-blend":new a.D(a.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new a.D(a.v.sky["sky-horizon-blend"]),"atmosphere-blend":new a.D(a.v.sky["atmosphere-blend"])});class tt extends a.E{constructor(l){super(),this._transitionable=new a.t(qe,void 0),this.setSky(l),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new a.F(0))}setSky(l,p={}){if(!this._validate(a.G,l,p)){l||(l={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const C in l){const E=l[C];C.endsWith("-transition")?this._transitionable.setTransition(C.slice(0,-11),E):this._transitionable.setValue(C,E)}}}getSky(){return this._transitionable.serialize()}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}_validate(l,p,C={}){return C?.validate!==!1&&a.y(this,l.call(a.z,a.e({value:p,style:{glyphs:!0,sprite:!0},styleSpec:a.v})))}calculateFogBlendOpacity(l){return l<60?0:l<70?(l-60)/10:1}}class At{constructor(l,p){this.width=l,this.height=p,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(l,p){const C=l.join(",")+String(p);return this.dashEntry[C]||(this.dashEntry[C]=this.addDash(l,p)),this.dashEntry[C]}getDashRanges(l,p,C){const E=[];let B=l.length%2==1?-l[l.length-1]*C:0,U=l[0]*C,G=!0;E.push({left:B,right:U,isDash:G,zeroLength:l[0]===0});let Z=l[0];for(let ae=1;ae<l.length;ae++){G=!G;const ce=l[ae];B=Z*C,Z+=ce,U=Z*C,E.push({left:B,right:U,isDash:G,zeroLength:ce===0})}return E}addRoundDash(l,p,C){const E=p/2;for(let B=-C;B<=C;B++){const U=this.width*(this.nextRow+C+B);let G=0,Z=l[G];for(let ae=0;ae<this.width;ae++){ae/Z.right>1&&(Z=l[++G]);const ce=Math.abs(ae-Z.left),me=Math.abs(ae-Z.right),ge=Math.min(ce,me);let Pe;const Ne=B/C*(E+1);if(Z.isDash){const Ze=E-Math.abs(Ne);Pe=Math.sqrt(ge*ge+Ze*Ze)}else Pe=E-Math.sqrt(ge*ge+Ne*Ne);this.data[U+ae]=Math.max(0,Math.min(255,Pe+128))}}}addRegularDash(l){for(let G=l.length-1;G>=0;--G){const Z=l[G],ae=l[G+1];Z.zeroLength?l.splice(G,1):ae&&ae.isDash===Z.isDash&&(ae.left=Z.left,l.splice(G,1))}const p=l[0],C=l[l.length-1];p.isDash===C.isDash&&(p.left=C.left-this.width,C.right=p.right+this.width);const E=this.width*this.nextRow;let B=0,U=l[B];for(let G=0;G<this.width;G++){G/U.right>1&&(U=l[++B]);const Z=Math.abs(G-U.left),ae=Math.abs(G-U.right),ce=Math.min(Z,ae);this.data[E+G]=Math.max(0,Math.min(255,(U.isDash?ce:-ce)+128))}}addDash(l,p){const C=p?7:0,E=2*C+1;if(this.nextRow+E>this.height)return a.w("LineAtlas out of space"),null;let B=0;for(let G=0;G<l.length;G++)B+=l[G];if(B!==0){const G=this.width/B,Z=this.getDashRanges(l,this.width,G);p?this.addRoundDash(Z,G,C):this.addRegularDash(Z)}const U={y:this.nextRow+C,height:2*C,width:B};return this.nextRow+=E,this.dirty=!0,U}bind(l){const p=l.gl;this.texture?(p.bindTexture(p.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,p.texSubImage2D(p.TEXTURE_2D,0,0,0,this.width,this.height,p.ALPHA,p.UNSIGNED_BYTE,this.data))):(this.texture=p.createTexture(),p.bindTexture(p.TEXTURE_2D,this.texture),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.REPEAT),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.REPEAT),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.LINEAR),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.LINEAR),p.texImage2D(p.TEXTURE_2D,0,p.ALPHA,this.width,this.height,0,p.ALPHA,p.UNSIGNED_BYTE,this.data))}}const ke="maplibre_preloaded_worker_pool";class we{constructor(){this.active={}}acquire(l){if(!this.workers)for(this.workers=[];this.workers.length<we.workerCount;)this.workers.push(new Worker(a.a.WORKER_URL));return this.active[l]=!0,this.workers.slice()}release(l){delete this.active[l],this.numActive()===0&&(this.workers.forEach((p=>{p.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[ke]}numActive(){return Object.keys(this.active).length}}const ze=Math.floor(M.hardwareConcurrency/2);let Me,lt;function nt(){return Me||(Me=new we),Me}we.workerCount=a.H(globalThis)?Math.max(Math.min(ze,3),1):1;class bt{constructor(l,p){this.workerPool=l,this.actors=[],this.currentActor=0,this.id=p;const C=this.workerPool.acquire(p);for(let E=0;E<C.length;E++){const B=new a.J(C[E],p);B.name=`Worker ${E}`,this.actors.push(B)}if(!this.actors.length)throw new Error("No actors found")}broadcast(l,p){const C=[];for(const E of this.actors)C.push(E.sendAsync({type:l,data:p}));return Promise.all(C)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(l=!0){this.actors.forEach((p=>{p.remove()})),this.actors=[],l&&this.workerPool.release(this.id)}registerMessageHandler(l,p){for(const C of this.actors)C.registerMessageHandler(l,p)}}function Bt(){return lt||(lt=new bt(nt(),a.K),lt.registerMessageHandler("GR",((O,l,p)=>a.m(l,p)))),lt}function Ke(O,l){const p=a.L();return a.M(p,p,[1,1,0]),a.N(p,p,[.5*O.width,.5*O.height,1]),O.calculatePosMatrix?a.O(p,p,O.calculatePosMatrix(l.toUnwrapped())):p}function Te(O,l,p,C,E,B,U){var G;const Z=(function(ge,Pe,Ne){if(ge)for(const Ze of ge){const Xe=Pe[Ze];if(Xe&&Xe.source===Ne&&Xe.type==="fill-extrusion")return!0}else for(const Ze in Pe){const Xe=Pe[Ze];if(Xe.source===Ne&&Xe.type==="fill-extrusion")return!0}return!1})((G=E?.layers)!==null&&G!==void 0?G:null,l,O.id),ae=B.maxPitchScaleFactor(),ce=O.tilesIn(C,ae,Z);ce.sort(Se);const me=[];for(const ge of ce)me.push({wrappedTileID:ge.tileID.wrapped().key,queryResults:ge.tile.queryRenderedFeatures(l,p,O._state,ge.queryGeometry,ge.cameraQueryGeometry,ge.scale,E,B,ae,Ke(O.transform,ge.tileID),U?(Pe,Ne)=>U(ge.tileID,Pe,Ne):void 0)});return(function(ge,Pe){for(const Ne in ge)for(const Ze of ge[Ne])We(Ze,Pe);return ge})((function(ge){const Pe={},Ne={};for(const Ze of ge){const Xe=Ze.queryResults,et=Ze.wrappedTileID,ot=Ne[et]=Ne[et]||{};for(const ht in Xe){const ut=Xe[ht],gt=ot[ht]=ot[ht]||{},xt=Pe[ht]=Pe[ht]||[];for(const ct of ut)gt[ct.featureIndex]||(gt[ct.featureIndex]=!0,xt.push(ct))}}return Pe})(me),O)}function Se(O,l){const p=O.tileID,C=l.tileID;return p.overscaledZ-C.overscaledZ||p.canonical.y-C.canonical.y||p.wrap-C.wrap||p.canonical.x-C.canonical.x}function We(O,l){const p=O.feature,C=l.getFeatureState(p.layer["source-layer"],p.id);p.source=p.layer.source,p.layer["source-layer"]&&(p.sourceLayer=p.layer["source-layer"]),p.state=C}function at(O,l,p){return a._(this,void 0,void 0,(function*(){let C=O;if(O.url?C=(yield a.j(l.transformRequest(O.url,"Source"),p)).data:yield M.frameAsync(p),!C)return null;const E=a.Q(a.e(C,O),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in C&&C.vector_layers&&(E.vectorLayerIds=C.vector_layers.map((B=>B.id))),E}))}class it{constructor(l,p){l&&(p?this.setSouthWest(l).setNorthEast(p):Array.isArray(l)&&(l.length===4?this.setSouthWest([l[0],l[1]]).setNorthEast([l[2],l[3]]):this.setSouthWest(l[0]).setNorthEast(l[1])))}setNorthEast(l){return this._ne=l instanceof a.S?new a.S(l.lng,l.lat):a.S.convert(l),this}setSouthWest(l){return this._sw=l instanceof a.S?new a.S(l.lng,l.lat):a.S.convert(l),this}extend(l){const p=this._sw,C=this._ne;let E,B;if(l instanceof a.S)E=l,B=l;else{if(!(l instanceof it))return Array.isArray(l)?l.length===4||l.every(Array.isArray)?this.extend(it.convert(l)):this.extend(a.S.convert(l)):l&&("lng"in l||"lon"in l)&&"lat"in l?this.extend(a.S.convert(l)):this;if(E=l._sw,B=l._ne,!E||!B)return this}return p||C?(p.lng=Math.min(E.lng,p.lng),p.lat=Math.min(E.lat,p.lat),C.lng=Math.max(B.lng,C.lng),C.lat=Math.max(B.lat,C.lat)):(this._sw=new a.S(E.lng,E.lat),this._ne=new a.S(B.lng,B.lat)),this}getCenter(){return new a.S((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new a.S(this.getWest(),this.getNorth())}getSouthEast(){return new a.S(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(l){const{lng:p,lat:C}=a.S.convert(l);let E=this._sw.lng<=p&&p<=this._ne.lng;return this._sw.lng>this._ne.lng&&(E=this._sw.lng>=p&&p>=this._ne.lng),this._sw.lat<=C&&C<=this._ne.lat&&E}static convert(l){return l instanceof it?l:l&&new it(l)}static fromLngLat(l,p=0){const C=360*p/40075017,E=C/Math.cos(Math.PI/180*l.lat);return new it(new a.S(l.lng-E,l.lat-C),new a.S(l.lng+E,l.lat+C))}adjustAntiMeridian(){const l=new a.S(this._sw.lng,this._sw.lat),p=new a.S(this._ne.lng,this._ne.lat);return new it(l,l.lng>p.lng?new a.S(p.lng+360,p.lat):p)}}class ft{constructor(l,p,C){this.bounds=it.convert(this.validateBounds(l)),this.minzoom=p||0,this.maxzoom=C||24}validateBounds(l){return Array.isArray(l)&&l.length===4?[Math.max(-180,l[0]),Math.max(-90,l[1]),Math.min(180,l[2]),Math.min(90,l[3])]:[-180,-90,180,90]}contains(l){const p=Math.pow(2,l.z),C=Math.floor(a.V(this.bounds.getWest())*p),E=Math.floor(a.U(this.bounds.getNorth())*p),B=Math.ceil(a.V(this.bounds.getEast())*p),U=Math.ceil(a.U(this.bounds.getSouth())*p);return l.x>=C&&l.x<B&&l.y>=E&&l.y<U}}class Dt extends a.E{constructor(l,p,C,E){if(super(),this.id=l,this.dispatcher=C,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.e(this,a.Q(p,["url","scheme","tileSize","promoteId"])),this._options=a.e({type:"vector"},p),this._collectResourceTiming=p.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(E)}load(){return a._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const l=yield at(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),l&&(a.e(this,l),l.bounds&&(this.tileBounds=new ft(l.bounds,this.minzoom,this.maxzoom)),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.l("data",{dataType:"source",sourceDataType:"content"})))}catch(l){this._tileJSONRequest=null,this._loaded=!0,this.fire(new a.k(l))}}))}loaded(){return this._loaded}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}onAdd(l){this.map=l,this.load()}setSourceProperty(l){this._tileJSONRequest&&this._tileJSONRequest.abort(),l(),this.load()}setTiles(l){return this.setSourceProperty((()=>{this._options.tiles=l})),this}setUrl(l){return this.setSourceProperty((()=>{this.url=l,this._options.url=l})),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return a.e({},this._options)}loadTile(l){return a._(this,void 0,void 0,(function*(){const p=l.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),C={request:this.map._requestManager.transformRequest(p,"Tile"),uid:l.uid,tileID:l.tileID,zoom:l.tileID.overscaledZ,tileSize:this.tileSize*l.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};C.request.collectResourceTiming=this._collectResourceTiming;let E="RT";if(l.actor&&l.state!=="expired"){if(l.state==="loading")return new Promise(((B,U)=>{l.reloadPromise={resolve:B,reject:U}}))}else l.actor=this.dispatcher.getActor(),E="LT";l.abortController=new AbortController;try{const B=yield l.actor.sendAsync({type:E,data:C},l.abortController);if(delete l.abortController,l.aborted)return;this._afterTileLoadWorkerResponse(l,B)}catch(B){if(delete l.abortController,l.aborted)return;if(B&&B.status!==404)throw B;this._afterTileLoadWorkerResponse(l,null)}}))}_afterTileLoadWorkerResponse(l,p){if(p&&p.resourceTiming&&(l.resourceTiming=p.resourceTiming),p&&this.map._refreshExpiredTiles&&l.setExpiryData(p),l.loadVectorData(p,this.map.painter),l.reloadPromise){const C=l.reloadPromise;l.reloadPromise=null,this.loadTile(l).then(C.resolve).catch(C.reject)}}abortTile(l){return a._(this,void 0,void 0,(function*(){l.abortController&&(l.abortController.abort(),delete l.abortController),l.actor&&(yield l.actor.sendAsync({type:"AT",data:{uid:l.uid,type:this.type,source:this.id}}))}))}unloadTile(l){return a._(this,void 0,void 0,(function*(){l.unloadVectorData(),l.actor&&(yield l.actor.sendAsync({type:"RMT",data:{uid:l.uid,type:this.type,source:this.id}}))}))}hasTransition(){return!1}}class Ot extends a.E{constructor(l,p,C,E){super(),this.id=l,this.dispatcher=C,this.setEventedParent(E),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.e({type:"raster"},p),a.e(this,a.Q(p,["url","scheme","tileSize"]))}load(){return a._(this,arguments,void 0,(function*(l=!1){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const p=yield at(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,p&&(a.e(this,p),p.bounds&&(this.tileBounds=new ft(p.bounds,this.minzoom,this.maxzoom)),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:l})))}catch(p){this._tileJSONRequest=null,this._loaded=!0,this.fire(new a.k(p))}}))}loaded(){return this._loaded}onAdd(l){this.map=l,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(l){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),l(),this.load(!0)}setTiles(l){return this.setSourceProperty((()=>{this._options.tiles=l})),this}setUrl(l){return this.setSourceProperty((()=>{this.url=l,this._options.url=l})),this}serialize(){return a.e({},this._options)}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}loadTile(l){return a._(this,void 0,void 0,(function*(){const p=l.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);l.abortController=new AbortController;try{const C=yield H.getImage(this.map._requestManager.transformRequest(p,"Tile"),l.abortController,this.map._refreshExpiredTiles);if(delete l.abortController,l.aborted)return void(l.state="unloaded");if(C&&C.data){this.map._refreshExpiredTiles&&(C.cacheControl||C.expires)&&l.setExpiryData({cacheControl:C.cacheControl,expires:C.expires});const E=this.map.painter.context,B=E.gl,U=C.data;l.texture=this.map.painter.getTileTexture(U.width),l.texture?l.texture.update(U,{useMipmap:!0}):(l.texture=new a.T(E,U,B.RGBA,{useMipmap:!0}),l.texture.bind(B.LINEAR,B.CLAMP_TO_EDGE,B.LINEAR_MIPMAP_NEAREST)),l.state="loaded"}}catch(C){if(delete l.abortController,l.aborted)l.state="unloaded";else if(C)throw l.state="errored",C}}))}abortTile(l){return a._(this,void 0,void 0,(function*(){l.abortController&&(l.abortController.abort(),delete l.abortController)}))}unloadTile(l){return a._(this,void 0,void 0,(function*(){l.texture&&this.map.painter.saveTileTexture(l.texture)}))}hasTransition(){return!1}}class Jt extends Ot{constructor(l,p,C,E){super(l,p,C,E),this.type="raster-dem",this.maxzoom=22,this._options=a.e({type:"raster-dem"},p),this.encoding=p.encoding||"mapbox",this.redFactor=p.redFactor,this.greenFactor=p.greenFactor,this.blueFactor=p.blueFactor,this.baseShift=p.baseShift}loadTile(l){return a._(this,void 0,void 0,(function*(){const p=l.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),C=this.map._requestManager.transformRequest(p,"Tile");l.neighboringTiles=this._getNeighboringTiles(l.tileID),l.abortController=new AbortController;try{const E=yield H.getImage(C,l.abortController,this.map._refreshExpiredTiles);if(delete l.abortController,l.aborted)return void(l.state="unloaded");if(E&&E.data){const B=E.data;this.map._refreshExpiredTiles&&(E.cacheControl||E.expires)&&l.setExpiryData({cacheControl:E.cacheControl,expires:E.expires});const U=a.b(B)&&a.W()?B:yield this.readImageNow(B),G={type:this.type,uid:l.uid,source:this.id,rawImageData:U,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!l.actor||l.state==="expired"){l.actor=this.dispatcher.getActor();const Z=yield l.actor.sendAsync({type:"LDT",data:G});l.dem=Z,l.needsHillshadePrepare=!0,l.needsTerrainPrepare=!0,l.state="loaded"}}}catch(E){if(delete l.abortController,l.aborted)l.state="unloaded";else if(E)throw l.state="errored",E}}))}readImageNow(l){return a._(this,void 0,void 0,(function*(){if(typeof VideoFrame<"u"&&a.X()){const p=l.width+2,C=l.height+2;try{return new a.R({width:p,height:C},yield a.Y(l,-1,-1,p,C))}catch{}}return M.getImageData(l,1)}))}_getNeighboringTiles(l){const p=l.canonical,C=Math.pow(2,p.z),E=(p.x-1+C)%C,B=p.x===0?l.wrap-1:l.wrap,U=(p.x+1+C)%C,G=p.x+1===C?l.wrap+1:l.wrap,Z={};return Z[new a.Z(l.overscaledZ,B,p.z,E,p.y).key]={backfilled:!1},Z[new a.Z(l.overscaledZ,G,p.z,U,p.y).key]={backfilled:!1},p.y>0&&(Z[new a.Z(l.overscaledZ,B,p.z,E,p.y-1).key]={backfilled:!1},Z[new a.Z(l.overscaledZ,l.wrap,p.z,p.x,p.y-1).key]={backfilled:!1},Z[new a.Z(l.overscaledZ,G,p.z,U,p.y-1).key]={backfilled:!1}),p.y+1<C&&(Z[new a.Z(l.overscaledZ,B,p.z,E,p.y+1).key]={backfilled:!1},Z[new a.Z(l.overscaledZ,l.wrap,p.z,p.x,p.y+1).key]={backfilled:!1},Z[new a.Z(l.overscaledZ,G,p.z,U,p.y+1).key]={backfilled:!1}),Z}unloadTile(l){return a._(this,void 0,void 0,(function*(){l.demTexture&&this.map.painter.saveTileTexture(l.demTexture),l.fbo&&(l.fbo.destroy(),delete l.fbo),l.dem&&delete l.dem,delete l.neighboringTiles,l.state="unloaded",l.actor&&(yield l.actor.sendAsync({type:"RDT",data:{type:this.type,uid:l.uid,source:this.id}}))}))}}class Dn extends a.E{constructor(l,p,C,E){super(),this.id=l,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._isUpdatingWorker=!1,this._pendingWorkerUpdate={data:p.data},this.actor=C.getActor(),this.setEventedParent(E),this._data=p.data,this._options=a.e({},p),this._collectResourceTiming=p.collectResourceTiming,p.maxzoom!==void 0&&(this.maxzoom=p.maxzoom),p.type&&(this.type=p.type),p.attribution&&(this.attribution=p.attribution),this.promoteId=p.promoteId,p.clusterMaxZoom!==void 0&&this.maxzoom<=p.clusterMaxZoom&&a.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${p.clusterMaxZoom}".`),this.workerOptions=a.e({source:this.id,cluster:p.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(p.buffer!==void 0?p.buffer:128),tolerance:this._pixelsToTileUnits(p.tolerance!==void 0?p.tolerance:.375),extent:a.$,maxZoom:this.maxzoom,lineMetrics:p.lineMetrics||!1,generateId:p.generateId||!1},superclusterOptions:{maxZoom:this._getClusterMaxZoom(p.clusterMaxZoom),minPoints:Math.max(2,p.clusterMinPoints||2),extent:a.$,radius:this._pixelsToTileUnits(p.clusterRadius||50),log:!1,generateId:p.generateId||!1},clusterProperties:p.clusterProperties,filter:p.filter},p.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_pixelsToTileUnits(l){return l*(a.$/this.tileSize)}_getClusterMaxZoom(l){const p=l?Math.round(l):this.maxzoom-1;return Number.isInteger(l)||l===void 0||a.w(`Integer expected for option 'clusterMaxZoom': provided value "${l}" rounded to "${p}"`),p}load(){return a._(this,void 0,void 0,(function*(){yield this._updateWorkerData()}))}onAdd(l){this.map=l,this.load()}setData(l){return this._data=l,this._pendingWorkerUpdate={data:l},this._updateWorkerData(),this}updateData(l){return this._pendingWorkerUpdate.diff=a.a0(this._pendingWorkerUpdate.diff,l),this._updateWorkerData(),this}getData(){return a._(this,void 0,void 0,(function*(){const l=a.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:l})}))}getCoordinatesFromGeometry(l){return l.type==="GeometryCollection"?l.geometries.map((p=>p.coordinates)).flat(1/0):l.coordinates.flat(1/0)}getBounds(){return a._(this,void 0,void 0,(function*(){const l=new it,p=yield this.getData();let C;switch(p.type){case"FeatureCollection":C=p.features.map((E=>this.getCoordinatesFromGeometry(E.geometry))).flat(1/0);break;case"Feature":C=this.getCoordinatesFromGeometry(p.geometry);break;default:C=this.getCoordinatesFromGeometry(p)}if(C.length==0)return l;for(let E=0;E<C.length-1;E+=2)l.extend([C[E],C[E+1]]);return l}))}setClusterOptions(l){return this.workerOptions.cluster=l.cluster,l&&(l.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(l.clusterRadius)),l.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=this._getClusterMaxZoom(l.clusterMaxZoom))),this._updateWorkerData(),this}getClusterExpansionZoom(l){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:l,source:this.id}})}getClusterChildren(l){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:l,source:this.id}})}getClusterLeaves(l,p,C){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:l,limit:p,offset:C}})}_updateWorkerData(){return a._(this,void 0,void 0,(function*(){if(this._isUpdatingWorker)return;const{data:l,diff:p}=this._pendingWorkerUpdate;if(!l&&!p)return void a.w(`No data or diff provided to GeoJSONSource ${this.id}.`);const C=a.e({type:this.type},this.workerOptions);l?(typeof l=="string"?(C.request=this.map._requestManager.transformRequest(M.resolveURL(l),"Source"),C.request.collectResourceTiming=this._collectResourceTiming):C.data=JSON.stringify(l),this._pendingWorkerUpdate.data=void 0):p&&(C.dataDiff=p,this._pendingWorkerUpdate.diff=void 0),this._isUpdatingWorker=!0,this.fire(new a.l("dataloading",{dataType:"source"}));try{const E=yield this.actor.sendAsync({type:"LD",data:C});if(this._isUpdatingWorker=!1,this._removed||E.abandoned)return void this.fire(new a.l("dataabort",{dataType:"source"}));this._data=E.data;let B=null;E.resourceTiming&&E.resourceTiming[this.id]&&(B=E.resourceTiming[this.id].slice(0));const U={dataType:"source"};this._collectResourceTiming&&B&&B.length>0&&a.e(U,{resourceTiming:B}),this.fire(new a.l("data",Object.assign(Object.assign({},U),{sourceDataType:"metadata"}))),this.fire(new a.l("data",Object.assign(Object.assign({},U),{sourceDataType:"content"})))}catch(E){if(this._isUpdatingWorker=!1,this._removed)return void this.fire(new a.l("dataabort",{dataType:"source"}));this.fire(new a.k(E))}finally{(this._pendingWorkerUpdate.data||this._pendingWorkerUpdate.diff)&&this._updateWorkerData()}}))}loaded(){return!this._isUpdatingWorker&&this._pendingWorkerUpdate.data===void 0&&this._pendingWorkerUpdate.diff===void 0}loadTile(l){return a._(this,void 0,void 0,(function*(){const p=l.actor?"RT":"LT";l.actor=this.actor;const C={type:this.type,uid:l.uid,tileID:l.tileID,zoom:l.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};l.abortController=new AbortController;const E=yield this.actor.sendAsync({type:p,data:C},l.abortController);delete l.abortController,l.unloadVectorData(),l.aborted||l.loadVectorData(E,this.map.painter,p==="RT")}))}abortTile(l){return a._(this,void 0,void 0,(function*(){l.abortController&&(l.abortController.abort(),delete l.abortController),l.aborted=!0}))}unloadTile(l){return a._(this,void 0,void 0,(function*(){l.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:l.uid,type:this.type,source:this.id}})}))}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return a.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}class Pn extends a.E{constructor(l,p,C,E){super(),this.flippedWindingOrder=!1,this.id=l,this.dispatcher=C,this.coordinates=p.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(E),this.options=p}load(l){return a._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const p=yield H.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,p&&p.data&&(this.image=p.data,l&&(this.coordinates=l),this._finishLoading())}catch(p){this._request=null,this._loaded=!0,this.fire(new a.k(p))}}))}loaded(){return this._loaded}updateImage(l){return l.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=l.url,this.load(l.coordinates).finally((()=>{this.texture=null})),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(l){this.map=l,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(l){this.coordinates=l;const p=l.map(a.a1.fromLngLat);var C;return this.tileID=(function(E){const B=a.a2.fromPoints(E),U=B.width(),G=B.height(),Z=Math.max(U,G),ae=Math.max(0,Math.floor(-Math.log(Z)/Math.LN2)),ce=Math.pow(2,ae);return new a.a4(ae,Math.floor((B.minX+B.maxX)/2*ce),Math.floor((B.minY+B.maxY)/2*ce))})(p),this.terrainTileRanges=this._getOverlappingTileRanges(p),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=p.map((E=>this.tileID.getTilePoint(E)._round())),this.flippedWindingOrder=((C=this.tileCoords)[1].x-C[0].x)*(C[2].y-C[0].y)-(C[1].y-C[0].y)*(C[2].x-C[0].x)<0,this.fire(new a.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const l=this.map.painter.context,p=l.gl;this.texture||(this.texture=new a.T(l,this.image,p.RGBA),this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE));let C=!1;for(const E in this.tiles){const B=this.tiles[E];B.state!=="loaded"&&(B.state="loaded",B.texture=this.texture,C=!0)}C&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(l){return a._(this,void 0,void 0,(function*(){this.tileID&&this.tileID.equals(l.tileID.canonical)?(this.tiles[String(l.tileID.wrap)]=l,l.buckets={}):l.state="errored"}))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(l){const{minX:p,minY:C,maxX:E,maxY:B}=a.a2.fromPoints(l),U={};for(let G=0;G<=a.a3;G++){const Z=Math.pow(2,G),ae=Math.floor(p*Z),ce=Math.floor(C*Z),me=Math.floor(E*Z),ge=Math.floor(B*Z);U[G]={minTileX:ae,minTileY:ce,maxTileX:me,maxTileY:ge}}return U}}class oi extends Pn{constructor(l,p,C,E){super(l,p,C,E),this.roundZoom=!0,this.type="video",this.options=p}load(){return a._(this,void 0,void 0,(function*(){this._loaded=!1;const l=this.options;this.urls=[];for(const p of l.urls)this.urls.push(this.map._requestManager.transformRequest(p,"Source").url);try{const p=yield a.a5(this.urls);if(this._loaded=!0,!p)return;this.video=p,this.video.loop=!0,this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading()}catch(p){this.fire(new a.k(p))}}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(l){if(this.video){const p=this.video.seekable;l<p.start(0)||l>p.end(0)?this.fire(new a.k(new a.a6(`sources.${this.id}`,null,`Playback for this video can be set only between the ${p.start(0)} and ${p.end(0)}-second mark.`))):this.video.currentTime=l}}getVideo(){return this.video}onAdd(l){this.map||(this.map=l,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const l=this.map.painter.context,p=l.gl;this.texture?this.video.paused||(this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE),p.texSubImage2D(p.TEXTURE_2D,0,0,0,p.RGBA,p.UNSIGNED_BYTE,this.video)):(this.texture=new a.T(l,this.video,p.RGBA),this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE));let C=!1;for(const E in this.tiles){const B=this.tiles[E];B.state!=="loaded"&&(B.state="loaded",B.texture=this.texture,C=!0)}C&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class In extends Pn{constructor(l,p,C,E){super(l,p,C,E),p.coordinates?Array.isArray(p.coordinates)&&p.coordinates.length===4&&!p.coordinates.some((B=>!Array.isArray(B)||B.length!==2||B.some((U=>typeof U!="number"))))||this.fire(new a.k(new a.a6(`sources.${l}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.k(new a.a6(`sources.${l}`,null,'missing required property "coordinates"'))),p.animate&&typeof p.animate!="boolean"&&this.fire(new a.k(new a.a6(`sources.${l}`,null,'optional "animate" property must be a boolean value'))),p.canvas?typeof p.canvas=="string"||p.canvas instanceof HTMLCanvasElement||this.fire(new a.k(new a.a6(`sources.${l}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.k(new a.a6(`sources.${l}`,null,'missing required property "canvas"'))),this.options=p,this.animate=p.animate===void 0||p.animate}load(){return a._(this,void 0,void 0,(function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}))}getCanvas(){return this.canvas}onAdd(l){this.map=l,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let l=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,l=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,l=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const p=this.map.painter.context,C=p.gl;this.texture?(l||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new a.T(p,this.canvas,C.RGBA,{premultiply:!0});let E=!1;for(const B in this.tiles){const U=this.tiles[B];U.state!=="loaded"&&(U.state="loaded",U.texture=this.texture,E=!0)}E&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const l of[this.canvas.width,this.canvas.height])if(isNaN(l)||l<=0)return!0;return!1}}const Tn={},dn=O=>{switch(O){case"geojson":return Dn;case"image":return Pn;case"raster":return Ot;case"raster-dem":return Jt;case"vector":return Dt;case"video":return oi;case"canvas":return In}return Tn[O]},$n="RTLPluginLoaded";class Un extends a.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=Bt()}_syncState(l){return this.status=l,this.dispatcher.broadcast("SRPS",{pluginStatus:l,pluginURL:this.url}).catch((p=>{throw this.status="error",p}))}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(l){return a._(this,arguments,void 0,(function*(p,C=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=M.resolveURL(p),!this.url)throw new Error(`requested url ${p} is invalid`);if(this.status==="unavailable"){if(!C)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()}))}_requestImport(){return a._(this,void 0,void 0,(function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new a.l($n))}))}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let It=null;function _e(){return It||(It=new Un),It}var oe,ee;(function(O){O[O.Base=0]="Base",O[O.Parent=1]="Parent"})(oe||(oe={})),(function(O){O[O.Departing=0]="Departing",O[O.Incoming=1]="Incoming"})(ee||(ee={}));class ne{constructor(l,p){this.timeAdded=0,this.fadeEndTime=0,this.fadeOpacity=1,this.tileID=l,this.uid=a.a7(),this.uses=0,this.tileSize=p,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}isRenderable(l){return this.hasData()&&(!this.fadeEndTime||this.fadeOpacity>0)&&(l||!this.holdingForSymbolFade())}setCrossFadeLogic({fadingRole:l,fadingDirection:p,fadingParentID:C,fadeEndTime:E}){this.resetFadeLogic(),this.fadingRole=l,this.fadingDirection=p,this.fadingParentID=C,this.fadeEndTime=E}setSelfFadeLogic(l){this.resetFadeLogic(),this.selfFading=!0,this.fadeEndTime=l}resetFadeLogic(){this.fadingRole=null,this.fadingDirection=null,this.fadingParentID=null,this.selfFading=!1,this.timeAdded=M.now(),this.fadeEndTime=0,this.fadeOpacity=1}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(l){this.demTexture&&l.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(l,p,C){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",l){l.featureIndex&&(this.latestFeatureIndex=l.featureIndex,l.rawTileData?(this.latestRawTileData=l.rawTileData,this.latestFeatureIndex.rawTileData=l.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=l.collisionBoxArray,this.buckets=(function(E,B){const U={};if(!B)return U;for(const G of E){const Z=G.layerIds.map((ae=>B.getLayer(ae))).filter(Boolean);if(Z.length!==0){G.layers=Z,G.stateDependentLayerIds&&(G.stateDependentLayers=G.stateDependentLayerIds.map((ae=>Z.filter((ce=>ce.id===ae))[0])));for(const ae of Z)U[ae.id]=G}}return U})(l.buckets,p?.style),this.hasSymbolBuckets=!1;for(const E in this.buckets){const B=this.buckets[E];if(B instanceof a.a9){if(this.hasSymbolBuckets=!0,!C)break;B.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const E in this.buckets){const B=this.buckets[E];if(B instanceof a.a9&&B.hasRTLText){this.hasRTLText=!0,_e().lazyLoad();break}}this.queryPadding=0;for(const E in this.buckets){const B=this.buckets[E];this.queryPadding=Math.max(this.queryPadding,p.style.getLayer(E).queryRadius(B))}l.imageAtlas&&(this.imageAtlas=l.imageAtlas),l.glyphAtlasImage&&(this.glyphAtlasImage=l.glyphAtlasImage),this.dashPositions=l.dashPositions}else this.collisionBoxArray=new a.a8}unloadVectorData(){for(const l in this.buckets)this.buckets[l].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.dashPositions&&(this.dashPositions=null),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(l){return this.buckets[l.id]}upload(l){for(const C in this.buckets){const E=this.buckets[C];E.uploadPending()&&E.upload(l)}const p=l.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new a.T(l,this.imageAtlas.image,p.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new a.T(l,this.glyphAtlasImage,p.ALPHA),this.glyphAtlasImage=null)}prepare(l){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(l,this.imageAtlasTexture)}queryRenderedFeatures(l,p,C,E,B,U,G,Z,ae,ce,me){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:E,cameraQueryGeometry:B,scale:U,tileSize:this.tileSize,pixelPosMatrix:ce,transform:Z,params:G,queryPadding:this.queryPadding*ae,getElevation:me},l,p,C):{}}querySourceFeatures(l,p){const C=this.latestFeatureIndex;if(!C||!C.rawTileData)return;const E=C.loadVTLayers(),B=p&&p.sourceLayer?p.sourceLayer:"",U=E._geojsonTileLayer||E[B];if(!U)return;const G=a.aa(p?.filter,p?.globalState),{z:Z,x:ae,y:ce}=this.tileID.canonical,me={z:Z,x:ae,y:ce};for(let ge=0;ge<U.length;ge++){const Pe=U.feature(ge);if(G.needGeometry){const Xe=a.ab(Pe,!0);if(!G.filter(new a.F(this.tileID.overscaledZ),Xe,this.tileID.canonical))continue}else if(!G.filter(new a.F(this.tileID.overscaledZ),Pe))continue;const Ne=C.getId(Pe,B),Ze=new a.ac(Pe,Z,ae,ce,Ne);Ze.tile=me,l.push(Ze)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(l){const p=this.expirationTime;if(l.cacheControl){const C=a.ad(l.cacheControl);C["max-age"]&&(this.expirationTime=Date.now()+1e3*C["max-age"])}else l.expires&&(this.expirationTime=new Date(l.expires).getTime());if(this.expirationTime){const C=Date.now();let E=!1;if(this.expirationTime>C)E=!1;else if(p)if(this.expirationTime<p)E=!0;else{const B=this.expirationTime-p;B?this.expirationTime=C+Math.max(B,3e4):E=!0}else E=!0;E?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(l,p){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(l).length===0)return;const C=this.latestFeatureIndex.loadVTLayers();for(const E in this.buckets){if(!p.style.hasLayer(E))continue;const B=this.buckets[E],U=B.layers[0].sourceLayer||"_geojsonTileLayer",G=C[U],Z=l[U];if(!G||!Z||Object.keys(Z).length===0)continue;B.update(Z,G,this.imageAtlas&&this.imageAtlas.patternPositions||{},this.dashPositions||{});const ae=p&&p.style&&p.style.getLayer(E);ae&&(this.queryPadding=Math.max(this.queryPadding,ae.queryRadius(B)))}}holdingForSymbolFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<M.now()}clearSymbolFadeHold(){this.symbolFadeHoldUntil=void 0}setSymbolHoldDuration(l){this.symbolFadeHoldUntil=M.now()+l}setDependencies(l,p){const C={};for(const E of p)C[E]=!0;this.dependencies[l]=C}hasDependency(l,p){for(const C of l){const E=this.dependencies[C];if(E){for(const B of p)if(E[B])return!0}}return!1}}class ue{constructor(l,p){this.max=l,this.onRemove=p,this.reset()}reset(){for(const l in this.data)for(const p of this.data[l])p.timeout&&clearTimeout(p.timeout),this.onRemove(p.value);return this.data={},this.order=[],this}add(l,p,C){const E=l.wrapped().key;this.data[E]===void 0&&(this.data[E]=[]);const B={value:p,timeout:void 0};if(C!==void 0&&(B.timeout=setTimeout((()=>{this.remove(l,B)}),C)),this.data[E].push(B),this.order.push(E),this.order.length>this.max){const U=this._getAndRemoveByKey(this.order[0]);U&&this.onRemove(U)}return this}has(l){return l.wrapped().key in this.data}getAndRemove(l){return this.has(l)?this._getAndRemoveByKey(l.wrapped().key):null}_getAndRemoveByKey(l){const p=this.data[l].shift();return p.timeout&&clearTimeout(p.timeout),this.data[l].length===0&&delete this.data[l],this.order.splice(this.order.indexOf(l),1),p.value}getByKey(l){const p=this.data[l];return p?p[0].value:null}get(l){return this.has(l)?this.data[l.wrapped().key][0].value:null}remove(l,p){if(!this.has(l))return this;const C=l.wrapped().key,E=p===void 0?0:this.data[C].indexOf(p),B=this.data[C][E];return this.data[C].splice(E,1),B.timeout&&clearTimeout(B.timeout),this.data[C].length===0&&delete this.data[C],this.onRemove(B.value),this.order.splice(this.order.indexOf(C),1),this}setMaxSize(l){for(this.max=l;this.order.length>this.max;){const p=this._getAndRemoveByKey(this.order[0]);p&&this.onRemove(p)}return this}filter(l){const p=[];for(const C in this.data)for(const E of this.data[C])l(E.value)||p.push(E);for(const C of p)this.remove(C.value.tileID,C)}}class be{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(l,p,C){const E=String(p);if(this.stateChanges[l]=this.stateChanges[l]||{},this.stateChanges[l][E]=this.stateChanges[l][E]||{},a.e(this.stateChanges[l][E],C),this.deletedStates[l]===null){this.deletedStates[l]={};for(const B in this.state[l])B!==E&&(this.deletedStates[l][B]=null)}else if(this.deletedStates[l]&&this.deletedStates[l][E]===null){this.deletedStates[l][E]={};for(const B in this.state[l][E])C[B]||(this.deletedStates[l][E][B]=null)}else for(const B in C)this.deletedStates[l]&&this.deletedStates[l][E]&&this.deletedStates[l][E][B]===null&&delete this.deletedStates[l][E][B]}removeFeatureState(l,p,C){if(this.deletedStates[l]===null)return;const E=String(p);if(this.deletedStates[l]=this.deletedStates[l]||{},C&&p!==void 0)this.deletedStates[l][E]!==null&&(this.deletedStates[l][E]=this.deletedStates[l][E]||{},this.deletedStates[l][E][C]=null);else if(p!==void 0)if(this.stateChanges[l]&&this.stateChanges[l][E])for(C in this.deletedStates[l][E]={},this.stateChanges[l][E])this.deletedStates[l][E][C]=null;else this.deletedStates[l][E]=null;else this.deletedStates[l]=null}getState(l,p){const C=String(p),E=a.e({},(this.state[l]||{})[C],(this.stateChanges[l]||{})[C]);if(this.deletedStates[l]===null)return{};if(this.deletedStates[l]){const B=this.deletedStates[l][p];if(B===null)return{};for(const U in B)delete E[U]}return E}initializeTileState(l,p){l.setFeatureState(this.state,p)}coalesceChanges(l,p){const C={};for(const E in this.stateChanges){this.state[E]=this.state[E]||{};const B={};for(const U in this.stateChanges[E])this.state[E][U]||(this.state[E][U]={}),a.e(this.state[E][U],this.stateChanges[E][U]),B[U]=this.state[E][U];C[E]=B}for(const E in this.deletedStates){this.state[E]=this.state[E]||{};const B={};if(this.deletedStates[E]===null)for(const U in this.state[E])B[U]={},this.state[E][U]={};else for(const U in this.deletedStates[E]){if(this.deletedStates[E][U]===null)this.state[E][U]={};else for(const G of Object.keys(this.deletedStates[E][U]))delete this.state[E][U][G];B[U]=this.state[E][U]}C[E]=C[E]||{},a.e(C[E],B)}if(this.stateChanges={},this.deletedStates={},Object.keys(C).length!==0)for(const E in l)l[E].setFeatureState(C,p)}}const Le=89.25;function Ve(O,l){const p=a.ah(l.lat,-a.ai,a.ai);return new a.P(a.V(l.lng)*O,a.U(p)*O)}function rt(O,l){return new a.a1(l.x/O,l.y/O).toLngLat()}function ye(O){return O.cameraToCenterDistance*Math.min(.85*Math.tan(a.ae(90-O.pitch)),Math.tan(a.ae(Le-O.pitch)))}function Be(O,l){const p=O.canonical,C=l/a.af(p.z),E=p.x+Math.pow(2,p.z)*O.wrap,B=a.ag(new Float64Array(16));return a.M(B,B,[E*C,p.y*C,0]),a.N(B,B,[C/a.$,C/a.$,1]),B}function v(O,l,p,C,E){const B=a.a1.fromLngLat(O,l),U=E*a.aj(1,O.lat),G=U*Math.cos(a.ae(p)),Z=Math.sqrt(U*U-G*G),ae=Z*Math.sin(a.ae(-C)),ce=Z*Math.cos(a.ae(-C));return new a.a1(B.x+ae,B.y+ce,B.z+G)}function yt(O,l,p){const C=l.intersectsFrustum(O);if(!p||C===0)return C;const E=l.intersectsPlane(p);return E===0?0:C===2&&E===2?2:1}function Mt(O,l,p){let C=0;const E=(p-l)/10;for(let B=0;B<10;B++)C+=E*Math.pow(Math.cos(l+(B+.5)/10*(p-l)),O);return C}function Pt(O,l){return function(p,C,E,B,U){const G=2*((O-1)/a.ak(Math.cos(a.ae(Le-U))/Math.cos(a.ae(Le)))-1),Z=Math.acos(E/B),ae=2*Mt(G-1,0,a.ae(U/2)),ce=Math.min(a.ae(Le),Z+a.ae(U/2)),me=Mt(G-1,Math.min(ce,Z-a.ae(U/2)),ce),ge=Math.atan(C/E),Pe=Math.hypot(C,E);let Ne=p;return Ne+=a.ak(B/Pe/Math.max(.5,Math.cos(a.ae(U/2)))),Ne+=G*a.ak(Math.cos(ge))/2,Ne-=a.ak(Math.max(1,me/ae/l))/2,Ne}}const en=Pt(9.314,3);function mt(O,l){const p=(l.roundZoom?Math.round:Math.floor)(O.zoom+a.ak(O.tileSize/l.tileSize));return Math.max(0,p)}function Qn(O,l){const p=O.getCameraFrustum(),C=O.getClippingPlane(),E=O.screenPointToMercatorCoordinate(O.getCameraPoint()),B=a.a1.fromLngLat(O.center,O.elevation);E.z=B.z+Math.cos(O.pitchInRadians)*O.cameraToCenterDistance/O.worldSize;const U=O.getCoveringTilesDetailsProvider(),G=U.allowVariableZoom(O,l),Z=mt(O,l),ae=l.minzoom||0,ce=l.maxzoom!==void 0?l.maxzoom:O.maxZoom,me=Math.min(Math.max(0,Z),ce),ge=Math.pow(2,me),Pe=[ge*E.x,ge*E.y,0],Ne=[ge*B.x,ge*B.y,0],Ze=Math.hypot(B.x-E.x,B.y-E.y),Xe=Math.abs(B.z-E.z),et=Math.hypot(Ze,Xe),ot=gt=>({zoom:0,x:0,y:0,wrap:gt,fullyVisible:!1}),ht=[],ut=[];if(O.renderWorldCopies&&U.allowWorldCopies())for(let gt=1;gt<=3;gt++)ht.push(ot(-gt)),ht.push(ot(gt));for(ht.push(ot(0));ht.length>0;){const gt=ht.pop(),xt=gt.x,ct=gt.y;let wt=gt.fullyVisible;const Wt={x:xt,y:ct,z:gt.zoom},Lt=U.getTileBoundingVolume(Wt,gt.wrap,O.elevation,l);if(!wt){const kn=yt(p,Lt,C);if(kn===0)continue;wt=kn===2}const Nt=U.distanceToTile2d(E.x,E.y,Wt,Lt);let Gt=Z;G&&(Gt=(l.calculateTileZoom||en)(O.zoom+a.ak(O.tileSize/l.tileSize),Nt,Xe,et,O.fov)),Gt=(l.roundZoom?Math.round:Math.floor)(Gt),Gt=Math.max(0,Gt);const Bn=Math.min(Gt,ce);if(gt.wrap=U.getWrap(B,Wt,gt.wrap),gt.zoom>=Bn){if(gt.zoom<ae)continue;const kn=me-gt.zoom,cn=Pe[0]-.5-(xt<<kn),si=Pe[1]-.5-(ct<<kn),Xi=l.reparseOverscaled?Math.max(gt.zoom,Gt):gt.zoom;ut.push({tileID:new a.Z(gt.zoom===ce?Xi:gt.zoom,gt.wrap,gt.zoom,xt,ct),distanceSq:a.al([Ne[0]-.5-xt,Ne[1]-.5-ct]),tileDistanceToCamera:Math.sqrt(cn*cn+si*si)})}else for(let kn=0;kn<4;kn++)ht.push({zoom:gt.zoom+1,x:(xt<<1)+kn%2,y:(ct<<1)+(kn>>1),wrap:gt.wrap,fullyVisible:wt})}return ut.sort(((gt,xt)=>gt.distanceSq-xt.distanceSq)).map((gt=>gt.tileID))}const Xn=a.a2.fromPoints([new a.P(0,0),new a.P(a.$,a.$)]);class Cn extends a.E{constructor(l,p,C){super(),this.id=l,this.dispatcher=C,this.on("data",(E=>this._dataHandler(E))),this.on("dataloading",(()=>{this._sourceErrored=!1})),this.on("error",(()=>{this._sourceErrored=this._source.loaded()})),this._source=((E,B,U,G)=>{const Z=new(dn(B.type))(E,B,U,G);if(Z.id!==E)throw new Error(`Expected Source id to be ${E} instead of ${Z.id}`);return Z})(l,p,C,this),this._tiles={},this._cache=new ue(0,(E=>this._unloadTile(E))),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._rasterFadeDuration=0,this._maxFadingAncestorLevels=5,this._state=new be,this._didEmitContent=!1,this._updated=!1}onAdd(l){this.map=l,this._maxTileCacheSize=l?l._maxTileCacheSize:null,this._maxTileCacheZoomLevels=l?l._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(l)}onRemove(l){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(l)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const l in this._tiles){const p=this._tiles[l];if(p.state!=="loaded"&&p.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const l=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,l&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(l,p,C){return a._(this,void 0,void 0,(function*(){try{yield this._source.loadTile(l),this._tileLoaded(l,p,C)}catch(E){l.state="errored",E.status!==404?this._source.fire(new a.k(E,{tile:l})):this.update(this.transform,this.terrain)}}))}_unloadTile(l){this._source.unloadTile&&this._source.unloadTile(l)}_abortTile(l){this._source.abortTile&&this._source.abortTile(l),this._source.fire(new a.l("dataabort",{tile:l,coord:l.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(l){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const p in this._tiles){const C=this._tiles[p];C.upload(l),C.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map((l=>l.tileID)).sort(Fn).map((l=>l.key))}getRenderableIds(l){const p=[];for(const C in this._tiles)this._isIdRenderable(C,l)&&p.push(this._tiles[C]);return l?p.sort(((C,E)=>{const B=C.tileID,U=E.tileID,G=new a.P(B.canonical.x,B.canonical.y)._rotate(-this.transform.bearingInRadians),Z=new a.P(U.canonical.x,U.canonical.y)._rotate(-this.transform.bearingInRadians);return B.overscaledZ-U.overscaledZ||Z.y-G.y||Z.x-G.x})).map((C=>C.tileID.key)):p.map((C=>C.tileID)).sort(Fn).map((C=>C.key))}hasRenderableParent(l){const p=l.overscaledZ-1;if(p>=this._source.minzoom){const C=this._getLoadedTile(l.scaledTo(p));if(C)return this._isIdRenderable(C.tileID.key)}return!1}_isIdRenderable(l,p=!1){var C;return(C=this._tiles[l])===null||C===void 0?void 0:C.isRenderable(p)}reload(l){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const p in this._tiles)l?this._reloadTile(p,"expired"):this._tiles[p].state!=="errored"&&this._reloadTile(p,"reloading")}}_reloadTile(l,p){return a._(this,void 0,void 0,(function*(){const C=this._tiles[l];C&&(C.state!=="loading"&&(C.state=p),yield this._loadTile(C,l,p))}))}_tileLoaded(l,p,C){l.timeAdded=M.now(),C==="expired"&&(l.refreshedUponExpiration=!0),this._setTileReloadTimer(p,l),this.getSource().type==="raster-dem"&&l.dem&&this._backfillDEM(l),this._state.initializeTileState(l,this.map?this.map.painter:null),l.aborted||this._source.fire(new a.l("data",{dataType:"source",tile:l,coord:l.tileID}))}_backfillDEM(l){const p=this.getRenderableIds();for(let E=0;E<p.length;E++){const B=p[E];if(l.neighboringTiles&&l.neighboringTiles[B]){const U=this.getTileByID(B);C(l,U),C(U,l)}}function C(E,B){E.needsHillshadePrepare=!0,E.needsTerrainPrepare=!0;let U=B.tileID.canonical.x-E.tileID.canonical.x;const G=B.tileID.canonical.y-E.tileID.canonical.y,Z=Math.pow(2,E.tileID.canonical.z),ae=B.tileID.key;U===0&&G===0||Math.abs(G)>1||(Math.abs(U)>1&&(Math.abs(U+Z)===1?U+=Z:Math.abs(U-Z)===1&&(U-=Z)),B.dem&&E.dem&&(E.dem.backfillBorder(B.dem,U,G),E.neighboringTiles&&E.neighboringTiles[ae]&&(E.neighboringTiles[ae].backfilled=!0)))}}getTile(l){return this.getTileByID(l.key)}getTileByID(l){return this._tiles[l]}_retainLoadedChildren(l,p){const C=Object.values(l),E=this._getLoadedDescendents(C),B={};for(const U of C){const G=E[U.key];if(!G?.length){B[U.key]=U;continue}const Z=U.overscaledZ+Cn.maxUnderzooming,ae=G.filter((ge=>ge.tileID.overscaledZ<=Z));if(!ae.length){B[U.key]=U;continue}const ce=Math.min(...ae.map((ge=>ge.tileID.overscaledZ))),me=ae.filter((ge=>ge.tileID.overscaledZ===ce)).map((ge=>ge.tileID));for(const ge of me)p[ge.key]=ge;this._areDescendentsComplete(me,ce,U.overscaledZ)||(B[U.key]=U)}return B}_getLoadedDescendents(l){var p;const C={};for(const E in this._tiles){const B=this._tiles[E];if(B.hasData())for(const U of l)B.tileID.isChildOf(U)&&(C[p=U.key]||(C[p]=[])).push(B)}return C}_areDescendentsComplete(l,p,C){return l.length===1&&l[0].isOverscaled()?l[0].overscaledZ===p:Math.pow(4,p-C)===l.length}_getLoadedTile(l){const p=this._tiles[l.key];return p?.hasData()?p:null}updateCacheSize(l){const p=Math.ceil(l.width/this._source.tileSize)+1,C=Math.ceil(l.height/this._source.tileSize)+1,E=Math.floor(p*C*(this._maxTileCacheZoomLevels===null?a.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),B=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,E):E;this._cache.setMaxSize(B)}handleWrapJump(l){const p=Math.round((l-(this._prevLng===void 0?l:this._prevLng))/360);if(this._prevLng=l,p){const C={};for(const E in this._tiles){const B=this._tiles[E];B.tileID=B.tileID.unwrapTo(B.tileID.wrap+p),C[B.tileID.key]=B}this._tiles=C;for(const E in this._timers)clearTimeout(this._timers[E]),delete this._timers[E];for(const E in this._tiles)this._setTileReloadTimer(E,this._tiles[E])}}update(l,p){if(!this._sourceLoaded||this._paused)return;let C;this.transform=l,this.terrain=p,this.updateCacheSize(l),this.handleWrapJump(this.transform.center.lng),this.used||this.usedForTerrain?this._source.tileID?C=l.getVisibleUnwrappedCoordinates(this._source.tileID).map((Z=>new a.Z(Z.canonical.z,Z.wrap,Z.canonical.z,Z.canonical.x,Z.canonical.y))):(C=Qn(l,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:p,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(C=C.filter((Z=>this._source.hasTile(Z))))):C=[],this.usedForTerrain&&(C=this._addTerrainIdealTiles(C));const E=C.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,E&&this.fire(new a.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const B=mt(l,this._source),U=this._updateRetainedTiles(C,B),G=pi(this._source.type);G&&this._rasterFadeDuration>0&&!p&&this._updateFadingTiles(C,U),G?this._cleanUpRasterTiles(U):this._cleanUpVectorTiles(U)}_cleanUpRasterTiles(l){for(const p in this._tiles)l[p]||this._removeTile(p)}_cleanUpVectorTiles(l){for(const p in this._tiles){const C=this._tiles[p];l[p]?C.clearSymbolFadeHold():C.hasSymbolBuckets?C.holdingForSymbolFade()?C.symbolFadeFinished()&&this._removeTile(p):C.setSymbolHoldDuration(this.map._fadeDuration):this._removeTile(p)}}_addTerrainIdealTiles(l){const p=[];for(const C of l)if(C.canonical.z>this._source.minzoom){const E=C.scaledTo(C.canonical.z-1);p.push(E);const B=C.scaledTo(Math.max(this._source.minzoom,Math.min(C.canonical.z,5)));p.push(B)}return l.concat(p)}releaseSymbolFadeTiles(){for(const l in this._tiles)this._tiles[l].holdingForSymbolFade()&&this._removeTile(l)}_updateRetainedTiles(l,p){var C;const E={},B={},U=Math.max(p-Cn.maxOverzooming,this._source.minzoom);let G={};for(const Z of l){const ae=this._addTile(Z);E[Z.key]=Z,ae.hasData()||(G[Z.key]=Z)}G=this._retainLoadedChildren(G,E);for(const Z in G){const ae=G[Z];let ce=this._tiles[Z],me=ce?.wasRequested();for(let ge=ae.overscaledZ-1;ge>=U;--ge){const Pe=ae.scaledTo(ge);if(B[Pe.key])break;if(B[Pe.key]=!0,ce=this.getTile(Pe),!ce&&me&&(ce=this._addTile(Pe)),ce){const Ne=ce.hasData();if((Ne||!(!((C=this.map)===null||C===void 0)&&C.cancelPendingTileRequestsWhileZooming)||me)&&(E[Pe.key]=Pe),me=ce.wasRequested(),Ne)break}}}return E}_updateFadingTiles(l,p){const C=M.now(),E=a.am(l);for(const B of l){const U=this._tiles[B.key];U.fadingDirection!==ee.Departing&&U.fadeOpacity!==0||U.resetFadeLogic(),this._updateFadingAncestor(U,p,C)||this._updateFadingDescendents(U,p,C)||this._updateFadingEdge(U,E,C)||U.resetFadeLogic()}}_updateFadingAncestor(l,p,C){if(!l.hasData())return!1;const{tileID:E,fadingRole:B,fadingDirection:U,fadingParentID:G}=l;if(B===oe.Base&&U===ee.Incoming&&G)return p[G.key]=G,!0;const Z=Math.max(E.overscaledZ-this._maxFadingAncestorLevels,this._source.minzoom);for(let ae=E.overscaledZ-1;ae>=Z;ae--){const ce=E.scaledTo(ae),me=this._getLoadedTile(ce);if(me)return l.setCrossFadeLogic({fadingRole:oe.Base,fadingDirection:ee.Incoming,fadingParentID:me.tileID,fadeEndTime:C+this._rasterFadeDuration}),me.setCrossFadeLogic({fadingRole:oe.Parent,fadingDirection:ee.Departing,fadeEndTime:C+this._rasterFadeDuration}),p[ce.key]=ce,!0}return!1}_updateFadingDescendents(l,p,C){if(!l.hasData())return!1;const E=l.tileID.children(this._source.maxzoom);let B=this._updateFadingChildren(l,E,p,C);if(B)return!0;for(const U of E){const G=U.children(this._source.maxzoom);this._updateFadingChildren(l,G,p,C)&&(B=!0)}return B}_updateFadingChildren(l,p,C,E){if(p[0].overscaledZ>=this._source.maxzoom)return!1;let B=!1;for(const U of p){const G=this._getLoadedTile(U);if(!G)continue;const{fadingRole:Z,fadingDirection:ae,fadingParentID:ce}=G;Z===oe.Base&&ae===ee.Departing&&ce||(G.setCrossFadeLogic({fadingRole:oe.Base,fadingDirection:ee.Departing,fadingParentID:l.tileID,fadeEndTime:E+this._rasterFadeDuration}),l.setCrossFadeLogic({fadingRole:oe.Parent,fadingDirection:ee.Incoming,fadeEndTime:E+this._rasterFadeDuration})),C[U.key]=U,B=!0}return B}_updateFadingEdge(l,p,C){const E=l.tileID;return!!l.selfFading||!l.hasData()&&!!p.has(E)&&(l.setSelfFadeLogic(C+this._rasterFadeDuration),!0)}_addTile(l){let p=this._tiles[l.key];if(p)return p;p=this._cache.getAndRemove(l),p&&(p.resetFadeLogic(),this._setTileReloadTimer(l.key,p),p.tileID=l,this._state.initializeTileState(p,this.map?this.map.painter:null),this._cacheTimers[l.key]&&(clearTimeout(this._cacheTimers[l.key]),delete this._cacheTimers[l.key],this._setTileReloadTimer(l.key,p)));const C=p;return p||(p=new ne(l,this._source.tileSize*l.overscaleFactor()),this._loadTile(p,l.key,p.state)),p.uses++,this._tiles[l.key]=p,C||this._source.fire(new a.l("dataloading",{tile:p,coord:p.tileID,dataType:"source"})),p}_setTileReloadTimer(l,p){l in this._timers&&(clearTimeout(this._timers[l]),delete this._timers[l]);const C=p.getExpiryTimeout();C&&(this._timers[l]=setTimeout((()=>{this._reloadTile(l,"expired"),delete this._timers[l]}),C))}refreshTiles(l){for(const p in this._tiles)(this._isIdRenderable(p)||this._tiles[p].state=="errored")&&l.some((C=>C.equals(this._tiles[p].tileID.canonical)))&&this._reloadTile(p,"expired")}_removeTile(l){const p=this._tiles[l];p&&(p.uses--,delete this._tiles[l],this._timers[l]&&(clearTimeout(this._timers[l]),delete this._timers[l]),p.uses>0||(p.hasData()&&p.state!=="reloading"?this._cache.add(p.tileID,p,p.getExpiryTimeout()):(p.aborted=!0,this._abortTile(p),this._unloadTile(p))))}_dataHandler(l){l.dataType==="source"&&(l.sourceDataType!=="metadata"?l.sourceDataType==="content"&&this._sourceLoaded&&!this._paused&&(this.reload(l.sourceDataChanged),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0):this._sourceLoaded=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const l in this._tiles)this._removeTile(l);this._cache.reset()}tilesIn(l,p,C){const E=[],B=this.transform;if(!B)return E;const U=B.getCoveringTilesDetailsProvider().allowWorldCopies(),G=C?B.getCameraQueryGeometry(l):l,Z=Pe=>B.screenPointToMercatorCoordinate(Pe,this.terrain),ae=this.transformBbox(l,Z,!U),ce=this.transformBbox(G,Z,!U),me=this.getIds(),ge=a.a2.fromPoints(ce);for(let Pe=0;Pe<me.length;Pe++){const Ne=this._tiles[me[Pe]];if(Ne.holdingForSymbolFade())continue;const Ze=U?[Ne.tileID]:[Ne.tileID.unwrapTo(-1),Ne.tileID.unwrapTo(0)],Xe=Math.pow(2,B.zoom-Ne.tileID.overscaledZ),et=p*Ne.queryPadding*a.$/Ne.tileSize/Xe;for(const ot of Ze){const ht=ge.map((ut=>ot.getTilePoint(new a.a1(ut.x,ut.y))));if(ht.expandBy(et),ht.intersects(Xn)){const ut=ae.map((xt=>ot.getTilePoint(xt))),gt=ce.map((xt=>ot.getTilePoint(xt)));E.push({tile:Ne,tileID:U?ot:ot.unwrapTo(0),queryGeometry:ut,cameraQueryGeometry:gt,scale:Xe})}}}return E}transformBbox(l,p,C){let E=l.map(p);if(C){const B=a.a2.fromPoints(l);B.shrinkBy(.001*Math.min(B.width(),B.height()));const U=B.map(p);a.a2.fromPoints(E).covers(U)||(E=E.map((G=>G.x>.5?new a.a1(G.x-1,G.y,G.z):G)))}return E}getVisibleCoordinates(l){const p=this.getRenderableIds(l).map((C=>this._tiles[C].tileID));return this.transform&&this.transform.populateCache(p),p}hasTransition(){if(this._source.hasTransition())return!0;if(pi(this._source.type)&&this._rasterFadeDuration>0){const l=M.now();for(const p in this._tiles)if(this._tiles[p].fadeEndTime>=l)return!0}return!1}setRasterFadeDuration(l){this._rasterFadeDuration=l}setFeatureState(l,p,C){this._state.updateState(l=l||"_geojsonTileLayer",p,C)}removeFeatureState(l,p,C){this._state.removeFeatureState(l=l||"_geojsonTileLayer",p,C)}getFeatureState(l,p){return this._state.getState(l=l||"_geojsonTileLayer",p)}setDependencies(l,p,C){const E=this._tiles[l];E&&E.setDependencies(p,C)}reloadTilesForDependencies(l,p){for(const C in this._tiles)this._tiles[C].hasDependency(l,p)&&this._reloadTile(C,"reloading");this._cache.filter((C=>!C.hasDependency(l,p)))}}function Fn(O,l){const p=Math.abs(2*O.wrap)-+(O.wrap<0),C=Math.abs(2*l.wrap)-+(l.wrap<0);return O.overscaledZ-l.overscaledZ||C-p||l.canonical.y-O.canonical.y||l.canonical.x-O.canonical.x}function pi(O){return O==="raster"||O==="image"||O==="video"}Cn.maxOverzooming=10,Cn.maxUnderzooming=3;class Hi{constructor(l,p){this.reset(l,p)}reset(l,p){this.points=l||[],this._distances=[0];for(let C=1;C<this.points.length;C++)this._distances[C]=this._distances[C-1]+this.points[C].dist(this.points[C-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(p||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(l){if(this.points.length===1)return this.points[0];l=a.ah(l,0,1);let p=1,C=this._distances[p];const E=l*this.paddedLength+this.padding;for(;C<E&&p<this._distances.length;)C=this._distances[++p];const B=p-1,U=this._distances[B],G=C-U,Z=G>0?(E-U)/G:0;return this.points[B].mult(1-Z).add(this.points[p].mult(Z))}}function Ii(O,l){let p=!0;return O==="always"||O!=="never"&&l!=="never"||(p=!1),p}class Ar{constructor(l,p,C){const E=this.boxCells=[],B=this.circleCells=[];this.xCellCount=Math.ceil(l/C),this.yCellCount=Math.ceil(p/C);for(let U=0;U<this.xCellCount*this.yCellCount;U++)E.push([]),B.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=l,this.height=p,this.xScale=this.xCellCount/l,this.yScale=this.yCellCount/p,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(l,p,C,E,B){this._forEachCell(p,C,E,B,this._insertBoxCell,this.boxUid++),this.boxKeys.push(l),this.bboxes.push(p),this.bboxes.push(C),this.bboxes.push(E),this.bboxes.push(B)}insertCircle(l,p,C,E){this._forEachCell(p-E,C-E,p+E,C+E,this._insertCircleCell,this.circleUid++),this.circleKeys.push(l),this.circles.push(p),this.circles.push(C),this.circles.push(E)}_insertBoxCell(l,p,C,E,B,U){this.boxCells[B].push(U)}_insertCircleCell(l,p,C,E,B,U){this.circleCells[B].push(U)}_query(l,p,C,E,B,U,G){if(C<0||l>this.width||E<0||p>this.height)return[];const Z=[];if(l<=0&&p<=0&&this.width<=C&&this.height<=E){if(B)return[{key:null,x1:l,y1:p,x2:C,y2:E}];for(let ae=0;ae<this.boxKeys.length;ae++)Z.push({key:this.boxKeys[ae],x1:this.bboxes[4*ae],y1:this.bboxes[4*ae+1],x2:this.bboxes[4*ae+2],y2:this.bboxes[4*ae+3]});for(let ae=0;ae<this.circleKeys.length;ae++){const ce=this.circles[3*ae],me=this.circles[3*ae+1],ge=this.circles[3*ae+2];Z.push({key:this.circleKeys[ae],x1:ce-ge,y1:me-ge,x2:ce+ge,y2:me+ge})}}else this._forEachCell(l,p,C,E,this._queryCell,Z,{hitTest:B,overlapMode:U,seenUids:{box:{},circle:{}}},G);return Z}query(l,p,C,E){return this._query(l,p,C,E,!1,null)}hitTest(l,p,C,E,B,U){return this._query(l,p,C,E,!0,B,U).length>0}hitTestCircle(l,p,C,E,B){const U=l-C,G=l+C,Z=p-C,ae=p+C;if(G<0||U>this.width||ae<0||Z>this.height)return!1;const ce=[];return this._forEachCell(U,Z,G,ae,this._queryCellCircle,ce,{hitTest:!0,overlapMode:E,circle:{x:l,y:p,radius:C},seenUids:{box:{},circle:{}}},B),ce.length>0}_queryCell(l,p,C,E,B,U,G,Z){const{seenUids:ae,hitTest:ce,overlapMode:me}=G,ge=this.boxCells[B];if(ge!==null){const Ne=this.bboxes;for(const Ze of ge)if(!ae.box[Ze]){ae.box[Ze]=!0;const Xe=4*Ze,et=this.boxKeys[Ze];if(l<=Ne[Xe+2]&&p<=Ne[Xe+3]&&C>=Ne[Xe+0]&&E>=Ne[Xe+1]&&(!Z||Z(et))&&(!ce||!Ii(me,et.overlapMode))&&(U.push({key:et,x1:Ne[Xe],y1:Ne[Xe+1],x2:Ne[Xe+2],y2:Ne[Xe+3]}),ce))return!0}}const Pe=this.circleCells[B];if(Pe!==null){const Ne=this.circles;for(const Ze of Pe)if(!ae.circle[Ze]){ae.circle[Ze]=!0;const Xe=3*Ze,et=this.circleKeys[Ze];if(this._circleAndRectCollide(Ne[Xe],Ne[Xe+1],Ne[Xe+2],l,p,C,E)&&(!Z||Z(et))&&(!ce||!Ii(me,et.overlapMode))){const ot=Ne[Xe],ht=Ne[Xe+1],ut=Ne[Xe+2];if(U.push({key:et,x1:ot-ut,y1:ht-ut,x2:ot+ut,y2:ht+ut}),ce)return!0}}}return!1}_queryCellCircle(l,p,C,E,B,U,G,Z){const{circle:ae,seenUids:ce,overlapMode:me}=G,ge=this.boxCells[B];if(ge!==null){const Ne=this.bboxes;for(const Ze of ge)if(!ce.box[Ze]){ce.box[Ze]=!0;const Xe=4*Ze,et=this.boxKeys[Ze];if(this._circleAndRectCollide(ae.x,ae.y,ae.radius,Ne[Xe+0],Ne[Xe+1],Ne[Xe+2],Ne[Xe+3])&&(!Z||Z(et))&&!Ii(me,et.overlapMode))return U.push(!0),!0}}const Pe=this.circleCells[B];if(Pe!==null){const Ne=this.circles;for(const Ze of Pe)if(!ce.circle[Ze]){ce.circle[Ze]=!0;const Xe=3*Ze,et=this.circleKeys[Ze];if(this._circlesCollide(Ne[Xe],Ne[Xe+1],Ne[Xe+2],ae.x,ae.y,ae.radius)&&(!Z||Z(et))&&!Ii(me,et.overlapMode))return U.push(!0),!0}}}_forEachCell(l,p,C,E,B,U,G,Z){const ae=this._convertToXCellCoord(l),ce=this._convertToYCellCoord(p),me=this._convertToXCellCoord(C),ge=this._convertToYCellCoord(E);for(let Pe=ae;Pe<=me;Pe++)for(let Ne=ce;Ne<=ge;Ne++)if(B.call(this,l,p,C,E,this.xCellCount*Ne+Pe,U,G,Z))return}_convertToXCellCoord(l){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(l*this.xScale)))}_convertToYCellCoord(l){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(l*this.yScale)))}_circlesCollide(l,p,C,E,B,U){const G=E-l,Z=B-p,ae=C+U;return ae*ae>G*G+Z*Z}_circleAndRectCollide(l,p,C,E,B,U,G){const Z=(U-E)/2,ae=Math.abs(l-(E+Z));if(ae>Z+C)return!1;const ce=(G-B)/2,me=Math.abs(p-(B+ce));if(me>ce+C)return!1;if(ae<=Z||me<=ce)return!0;const ge=ae-Z,Pe=me-ce;return ge*ge+Pe*Pe<=C*C}}function ii(O,l,p){const C=a.L();if(!O){const{vecSouth:me,vecEast:ge}=Ri(l),Pe=h();Pe[0]=ge[0],Pe[1]=ge[1],Pe[2]=me[0],Pe[3]=me[1],E=Pe,(ce=(U=(B=Pe)[0])*(ae=B[3])-(Z=B[2])*(G=B[1]))&&(E[0]=ae*(ce=1/ce),E[1]=-G*ce,E[2]=-Z*ce,E[3]=U*ce),C[0]=Pe[0],C[1]=Pe[1],C[4]=Pe[2],C[5]=Pe[3]}var E,B,U,G,Z,ae,ce;return a.N(C,C,[1/p,1/p,1]),C}function Fi(O,l,p,C){if(O){const E=a.L();if(!l){const{vecSouth:B,vecEast:U}=Ri(p);E[0]=U[0],E[1]=U[1],E[4]=B[0],E[5]=B[1]}return a.N(E,E,[C,C,1]),E}return p.pixelsToClipSpaceMatrix}function Ri(O){const l=Math.cos(O.rollInRadians),p=Math.sin(O.rollInRadians),C=Math.cos(O.pitchInRadians),E=Math.cos(O.bearingInRadians),B=Math.sin(O.bearingInRadians),U=a.ar();U[0]=-E*C*p-B*l,U[1]=-B*C*p+E*l;const G=a.as(U);G<1e-9?a.at(U):a.au(U,U,1/G);const Z=a.ar();Z[0]=E*C*l-B*p,Z[1]=B*C*l+E*p;const ae=a.as(Z);return ae<1e-9?a.at(Z):a.au(Z,Z,1/ae),{vecEast:Z,vecSouth:U}}function on(O,l,p,C){let E;C?(E=[O,l,C(O,l),1],a.aw(E,E,p)):(E=[O,l,0,1],Ko(E,E,p));const B=E[3];return{point:new a.P(E[0]/B,E[1]/B),signedDistanceFromCamera:B,isOccluded:!1}}function nr(O,l){return .5+O/l*.5}function Go(O,l){return O.x>=-l[0]&&O.x<=l[0]&&O.y>=-l[1]&&O.y<=l[1]}function Co(O,l,p,C,E,B,U,G,Z,ae,ce,me,ge){const Pe=p?O.textSizeData:O.iconSizeData,Ne=a.an(Pe,l.transform.zoom),Ze=[256/l.width*2+1,256/l.height*2+1],Xe=p?O.text.dynamicLayoutVertexArray:O.icon.dynamicLayoutVertexArray;Xe.clear();const et=O.lineVertexArray,ot=p?O.text.placedSymbolArray:O.icon.placedSymbolArray,ht=l.transform.width/l.transform.height;let ut=!1;for(let gt=0;gt<ot.length;gt++){const xt=ot.get(gt);if(xt.hidden||xt.writingMode===a.ao.vertical&&!ut){Xs(xt.numGlyphs,Xe);continue}ut=!1;const ct=new a.P(xt.anchorX,xt.anchorY),wt={getElevation:ge,pitchedLabelPlaneMatrix:C,lineVertexArray:et,pitchWithMap:B,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:l.transform,tileAnchorPoint:ct,unwrappedTileID:Z,width:ae,height:ce,translation:me},Wt=Pi(xt.anchorX,xt.anchorY,wt);if(!Go(Wt.point,Ze)){Xs(xt.numGlyphs,Xe);continue}const Lt=nr(l.transform.cameraToCenterDistance,Wt.signedDistanceFromCamera),Nt=a.ap(Pe,Ne,xt),Gt=B?Nt*l.transform.getPitchedTextCorrection(xt.anchorX,xt.anchorY,Z)/Lt:Nt*Lt,Bn=Ni({projectionContext:wt,pitchedLabelPlaneMatrixInverse:E,symbol:xt,fontSize:Gt,flip:!1,keepUpright:U,glyphOffsetArray:O.glyphOffsetArray,dynamicLayoutVertexArray:Xe,aspectRatio:ht,rotateToLine:G});ut=Bn.useVertical,(Bn.notEnoughRoom||ut||Bn.needsFlipping&&Ni({projectionContext:wt,pitchedLabelPlaneMatrixInverse:E,symbol:xt,fontSize:Gt,flip:!0,keepUpright:U,glyphOffsetArray:O.glyphOffsetArray,dynamicLayoutVertexArray:Xe,aspectRatio:ht,rotateToLine:G}).notEnoughRoom)&&Xs(xt.numGlyphs,Xe)}p?O.text.dynamicLayoutVertexBuffer.updateData(Xe):O.icon.dynamicLayoutVertexBuffer.updateData(Xe)}function gr(O,l,p,C,E,B,U,G){const Z=B.glyphStartIndex+B.numGlyphs,ae=B.lineStartIndex,ce=B.lineStartIndex+B.lineLength,me=l.getoffsetX(B.glyphStartIndex),ge=l.getoffsetX(Z-1),Pe=ya(O*me,p,C,E,B.segment,ae,ce,G,U);if(!Pe)return null;const Ne=ya(O*ge,p,C,E,B.segment,ae,ce,G,U);return Ne?G.projectionCache.anyProjectionOccluded?null:{first:Pe,last:Ne}:null}function gn(O,l,p,C){return O===a.ao.horizontal&&Math.abs(p.y-l.y)>Math.abs(p.x-l.x)*C?{useVertical:!0}:(O===a.ao.vertical?l.y<p.y:l.x>p.x)?{needsFlipping:!0}:null}function Ni(O){const{projectionContext:l,pitchedLabelPlaneMatrixInverse:p,symbol:C,fontSize:E,flip:B,keepUpright:U,glyphOffsetArray:G,dynamicLayoutVertexArray:Z,aspectRatio:ae,rotateToLine:ce}=O,me=E/24,ge=C.lineOffsetX*me,Pe=C.lineOffsetY*me;let Ne;if(C.numGlyphs>1){const Ze=C.glyphStartIndex+C.numGlyphs,Xe=C.lineStartIndex,et=C.lineStartIndex+C.lineLength,ot=gr(me,G,ge,Pe,B,C,ce,l);if(!ot)return{notEnoughRoom:!0};const ht=zs(ot.first.point.x,ot.first.point.y,l,p),ut=zs(ot.last.point.x,ot.last.point.y,l,p);if(U&&!B){const gt=gn(C.writingMode,ht,ut,ae);if(gt)return gt}Ne=[ot.first];for(let gt=C.glyphStartIndex+1;gt<Ze-1;gt++){const xt=ya(me*G.getoffsetX(gt),ge,Pe,B,C.segment,Xe,et,l,ce);if(!xt)return{notEnoughRoom:!0};Ne.push(xt)}Ne.push(ot.last)}else{if(U&&!B){const Xe=Ra(l.tileAnchorPoint.x,l.tileAnchorPoint.y,l).point,et=C.lineStartIndex+C.segment+1,ot=new a.P(l.lineVertexArray.getx(et),l.lineVertexArray.gety(et)),ht=Ra(ot.x,ot.y,l),ut=ht.signedDistanceFromCamera>0?ht.point:ni(l.tileAnchorPoint,ot,Xe,1,l),gt=zs(Xe.x,Xe.y,l,p),xt=zs(ut.x,ut.y,l,p),ct=gn(C.writingMode,gt,xt,ae);if(ct)return ct}const Ze=ya(me*G.getoffsetX(C.glyphStartIndex),ge,Pe,B,C.segment,C.lineStartIndex,C.lineStartIndex+C.lineLength,l,ce);if(!Ze||l.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};Ne=[Ze]}for(const Ze of Ne)a.av(Z,Ze.point,Ze.angle);return{}}function ni(O,l,p,C,E){const B=O.add(O.sub(l)._unit()),U=Ra(B.x,B.y,E).point,G=p.sub(U);return p.add(G._mult(C/G.mag()))}function ga(O,l,p){const C=l.projectionCache;if(C.projections[O])return C.projections[O];const E=new a.P(l.lineVertexArray.getx(O),l.lineVertexArray.gety(O)),B=Ra(E.x,E.y,l);if(B.signedDistanceFromCamera>0)return C.projections[O]=B.point,C.anyProjectionOccluded=C.anyProjectionOccluded||B.isOccluded,B.point;const U=O-p.direction;return ni(p.distanceFromAnchor===0?l.tileAnchorPoint:new a.P(l.lineVertexArray.getx(U),l.lineVertexArray.gety(U)),E,p.previousVertex,p.absOffsetX-p.distanceFromAnchor+1,l)}function Ra(O,l,p){const C=O+p.translation[0],E=l+p.translation[1];let B;return p.pitchWithMap?(B=on(C,E,p.pitchedLabelPlaneMatrix,p.getElevation),B.isOccluded=!1):(B=p.transform.projectTileCoordinates(C,E,p.unwrappedTileID,p.getElevation),B.point.x=(.5*B.point.x+.5)*p.width,B.point.y=(.5*-B.point.y+.5)*p.height),B}function zs(O,l,p,C){if(p.pitchWithMap){const E=[O,l,0,1];return a.aw(E,E,C),p.transform.projectTileCoordinates(E[0]/E[3],E[1]/E[3],p.unwrappedTileID,p.getElevation).point}return{x:O/p.width*2-1,y:1-l/p.height*2}}function Pi(O,l,p){return p.transform.projectTileCoordinates(O,l,p.unwrappedTileID,p.getElevation)}function kl(O,l,p){return O._unit()._perp()._mult(l*p)}function eo(O,l,p,C,E,B,U,G,Z){if(G.projectionCache.offsets[O])return G.projectionCache.offsets[O];const ae=p.add(l);if(O+Z.direction<C||O+Z.direction>=E)return G.projectionCache.offsets[O]=ae,ae;const ce=ga(O+Z.direction,G,Z),me=kl(ce.sub(p),U,Z.direction),ge=p.add(me),Pe=ce.add(me);return G.projectionCache.offsets[O]=a.ax(B,ae,ge,Pe)||ae,G.projectionCache.offsets[O]}function ya(O,l,p,C,E,B,U,G,Z){const ae=C?O-l:O+l;let ce=ae>0?1:-1,me=0;C&&(ce*=-1,me=Math.PI),ce<0&&(me+=Math.PI);let ge,Pe=ce>0?B+E:B+E+1;G.projectionCache.cachedAnchorPoint?ge=G.projectionCache.cachedAnchorPoint:(ge=Ra(G.tileAnchorPoint.x,G.tileAnchorPoint.y,G).point,G.projectionCache.cachedAnchorPoint=ge);let Ne,Ze,Xe=ge,et=ge,ot=0,ht=0;const ut=Math.abs(ae),gt=[];let xt;for(;ot+ht<=ut;){if(Pe+=ce,Pe<B||Pe>=U)return null;ot+=ht,et=Xe,Ze=Ne;const Wt={absOffsetX:ut,direction:ce,distanceFromAnchor:ot,previousVertex:et};if(Xe=ga(Pe,G,Wt),p===0)gt.push(et),xt=Xe.sub(et);else{let Lt;const Nt=Xe.sub(et);Lt=Nt.mag()===0?kl(ga(Pe+ce,G,Wt).sub(Xe),p,ce):kl(Nt,p,ce),Ze||(Ze=et.add(Lt)),Ne=eo(Pe,Lt,Xe,B,U,Ze,p,G,Wt),gt.push(Ze),xt=Ne.sub(Ze)}ht=xt.mag()}const ct=xt._mult((ut-ot)/ht)._add(Ze||et),wt=me+Math.atan2(Xe.y-et.y,Xe.x-et.x);return gt.push(ct),{point:ct,angle:Z?wt:0,path:gt}}const tu=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Xs(O,l){for(let p=0;p<O;p++){const C=l.length;l.resize(C+4),l.float32.set(tu,3*C)}}function Ko(O,l,p){const C=l[0],E=l[1];return O[0]=p[0]*C+p[4]*E+p[12],O[1]=p[1]*C+p[5]*E+p[13],O[3]=p[3]*C+p[7]*E+p[15],O}const Zo=100;class gs{constructor(l,p=new Ar(l.width+200,l.height+200,25),C=new Ar(l.width+200,l.height+200,25)){this.transform=l,this.grid=p,this.ignoredGrid=C,this.pitchFactor=Math.cos(l.pitch*Math.PI/180)*l.cameraToCenterDistance,this.screenRightBoundary=l.width+Zo,this.screenBottomBoundary=l.height+Zo,this.gridRightBoundary=l.width+200,this.gridBottomBoundary=l.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(l,p,C,E,B,U,G,Z,ae,ce,me,ge){const Pe=this.projectAndGetPerspectiveRatio(l.anchorPointX+Z[0],l.anchorPointY+Z[1],B,ce,ge),Ne=C*Pe.perspectiveRatio;let Ze;if(U||G)Ze=this._projectCollisionBox(l,Ne,E,B,U,G,Z,Pe,ce,me,ge);else{const xt=Pe.x+(me?me.x*Ne:0),ct=Pe.y+(me?me.y*Ne:0);Ze={allPointsOccluded:!1,box:[xt+l.x1*Ne,ct+l.y1*Ne,xt+l.x2*Ne,ct+l.y2*Ne]}}const[Xe,et,ot,ht]=Ze.box,ut=U?Ze.allPointsOccluded:Pe.isOccluded;let gt=ut;return gt||(gt=Pe.perspectiveRatio<this.perspectiveRatioCutoff),gt||(gt=!this.isInsideGrid(Xe,et,ot,ht)),gt||p!=="always"&&this.grid.hitTest(Xe,et,ot,ht,p,ae)?{box:[Xe,et,ot,ht],placeable:!1,offscreen:!1,occluded:ut}:{box:[Xe,et,ot,ht],placeable:!0,offscreen:this.isOffscreen(Xe,et,ot,ht),occluded:ut}}placeCollisionCircles(l,p,C,E,B,U,G,Z,ae,ce,me,ge,Pe,Ne){const Ze=[],Xe=new a.P(p.anchorX,p.anchorY),et=this.getPerspectiveRatio(Xe.x,Xe.y,U,Ne),ot=(ae?B*this.transform.getPitchedTextCorrection(p.anchorX,p.anchorY,U)/et:B*et)/a.aB,ht={getElevation:Ne,pitchedLabelPlaneMatrix:G,lineVertexArray:C,pitchWithMap:ae,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:Xe,unwrappedTileID:U,width:this.transform.width,height:this.transform.height,translation:Pe},ut=gr(ot,E,p.lineOffsetX*ot,p.lineOffsetY*ot,!1,p,!1,ht);let gt=!1,xt=!1,ct=!0;if(ut){const wt=.5*me*et+ge,Wt=new a.P(-100,-100),Lt=new a.P(this.screenRightBoundary,this.screenBottomBoundary),Nt=new Hi,Gt=ut.first,Bn=ut.last;let kn=[];for(let Xi=Gt.path.length-1;Xi>=1;Xi--)kn.push(Gt.path[Xi]);for(let Xi=1;Xi<Bn.path.length;Xi++)kn.push(Bn.path[Xi]);const cn=2.5*wt;if(ae){const Xi=this.projectPathToScreenSpace(kn,ht);kn=Xi.some((Er=>Er.signedDistanceFromCamera<=0))?[]:Xi.map((Er=>Er.point))}let si=[];if(kn.length>0){const Xi=kn[0].clone(),Er=kn[0].clone();for(let Eo=1;Eo<kn.length;Eo++)Xi.x=Math.min(Xi.x,kn[Eo].x),Xi.y=Math.min(Xi.y,kn[Eo].y),Er.x=Math.max(Er.x,kn[Eo].x),Er.y=Math.max(Er.y,kn[Eo].y);si=Xi.x>=Wt.x&&Er.x<=Lt.x&&Xi.y>=Wt.y&&Er.y<=Lt.y?[kn]:Er.x<Wt.x||Xi.x>Lt.x||Er.y<Wt.y||Xi.y>Lt.y?[]:a.ay([kn],Wt.x,Wt.y,Lt.x,Lt.y)}for(const Xi of si){Nt.reset(Xi,.25*wt);let Er=0;Er=Nt.length<=.5*wt?1:Math.ceil(Nt.paddedLength/cn)+1;for(let Eo=0;Eo<Er;Eo++){const Wr=Eo/Math.max(Er-1,1),es=Nt.lerp(Wr),Qo=es.x+Zo,Br=es.y+Zo;Ze.push(Qo,Br,wt,0);const Rs=Qo-wt,Al=Br-wt,la=Qo+wt,ra=Br+wt;if(ct=ct&&this.isOffscreen(Rs,Al,la,ra),xt=xt||this.isInsideGrid(Rs,Al,la,ra),l!=="always"&&this.grid.hitTestCircle(Qo,Br,wt,l,ce)&&(gt=!0,!Z))return{circles:[],offscreen:!1,collisionDetected:gt}}}}return{circles:!Z&&gt||!xt||et<this.perspectiveRatioCutoff?[]:Ze,offscreen:ct,collisionDetected:gt}}projectPathToScreenSpace(l,p){const C=(function(E,B){const U=a.L();return a.aq(U,B.pitchedLabelPlaneMatrix),E.map((G=>{const Z=on(G.x,G.y,U,B.getElevation),ae=B.transform.projectTileCoordinates(Z.point.x,Z.point.y,B.unwrappedTileID,B.getElevation);return ae.point.x=(.5*ae.point.x+.5)*B.width,ae.point.y=(.5*-ae.point.y+.5)*B.height,ae}))})(l,p);return(function(E){let B=0,U=0,G=0,Z=0;for(let ae=0;ae<E.length;ae++)E[ae].isOccluded?(G=ae+1,Z=0):(Z++,Z>U&&(U=Z,B=G));return E.slice(B,B+U)})(C)}queryRenderedSymbols(l){if(l.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const p=[],C=new a.a2;for(const me of l){const ge=new a.P(me.x+Zo,me.y+Zo);C.extend(ge),p.push(ge)}const{minX:E,minY:B,maxX:U,maxY:G}=C,Z=this.grid.query(E,B,U,G).concat(this.ignoredGrid.query(E,B,U,G)),ae={},ce={};for(const me of Z){const ge=me.key;if(ae[ge.bucketInstanceId]===void 0&&(ae[ge.bucketInstanceId]={}),ae[ge.bucketInstanceId][ge.featureIndex])continue;const Pe=[new a.P(me.x1,me.y1),new a.P(me.x2,me.y1),new a.P(me.x2,me.y2),new a.P(me.x1,me.y2)];a.az(p,Pe)&&(ae[ge.bucketInstanceId][ge.featureIndex]=!0,ce[ge.bucketInstanceId]===void 0&&(ce[ge.bucketInstanceId]=[]),ce[ge.bucketInstanceId].push(ge.featureIndex))}return ce}insertCollisionBox(l,p,C,E,B,U){(C?this.ignoredGrid:this.grid).insert({bucketInstanceId:E,featureIndex:B,collisionGroupID:U,overlapMode:p},l[0],l[1],l[2],l[3])}insertCollisionCircles(l,p,C,E,B,U){const G=C?this.ignoredGrid:this.grid,Z={bucketInstanceId:E,featureIndex:B,collisionGroupID:U,overlapMode:p};for(let ae=0;ae<l.length;ae+=4)G.insertCircle(Z,l[ae],l[ae+1],l[ae+2])}projectAndGetPerspectiveRatio(l,p,C,E,B){if(B){let U;E?(U=[l,p,E(l,p),1],a.aw(U,U,B)):(U=[l,p,0,1],Ko(U,U,B));const G=U[3];return{x:(U[0]/G+1)/2*this.transform.width+Zo,y:(-U[1]/G+1)/2*this.transform.height+Zo,perspectiveRatio:.5+this.transform.cameraToCenterDistance/G*.5,isOccluded:!1,signedDistanceFromCamera:G}}{const U=this.transform.projectTileCoordinates(l,p,C,E);return{x:(U.point.x+1)/2*this.transform.width+Zo,y:(1-U.point.y)/2*this.transform.height+Zo,perspectiveRatio:.5+this.transform.cameraToCenterDistance/U.signedDistanceFromCamera*.5,isOccluded:U.isOccluded,signedDistanceFromCamera:U.signedDistanceFromCamera}}}getPerspectiveRatio(l,p,C,E){const B=this.transform.projectTileCoordinates(l,p,C,E);return .5+this.transform.cameraToCenterDistance/B.signedDistanceFromCamera*.5}isOffscreen(l,p,C,E){return C<Zo||l>=this.screenRightBoundary||E<Zo||p>this.screenBottomBoundary}isInsideGrid(l,p,C,E){return C>=0&&l<this.gridRightBoundary&&E>=0&&p<this.gridBottomBoundary}getViewportMatrix(){const l=a.ag([]);return a.M(l,l,[-100,-100,0]),l}_projectCollisionBox(l,p,C,E,B,U,G,Z,ae,ce,me){let ge=1,Pe=0,Ne=0,Ze=1;const Xe=l.anchorPointX+G[0],et=l.anchorPointY+G[1];if(U&&!B){const kn=this.projectAndGetPerspectiveRatio(Xe+1,et,E,ae,me),cn=kn.x-Z.x,si=Math.atan((kn.y-Z.y)/cn)+(cn<0?Math.PI:0),Xi=Math.sin(si),Er=Math.cos(si);ge=Er,Pe=Xi,Ne=-Xi,Ze=Er}else if(!U&&B){const kn=Ri(this.transform);ge=kn.vecEast[0],Pe=kn.vecEast[1],Ne=kn.vecSouth[0],Ze=kn.vecSouth[1]}let ot=Z.x,ht=Z.y,ut=p;B&&(ot=Xe,ht=et,ut=Math.pow(2,-(this.transform.zoom-C.overscaledZ)),ut*=this.transform.getPitchedTextCorrection(Xe,et,E),ce||(ut*=a.ah(.5+Z.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),ce&&(ot+=ge*ce.x*ut+Ne*ce.y*ut,ht+=Pe*ce.x*ut+Ze*ce.y*ut);const gt=l.x1*ut,xt=l.x2*ut,ct=(gt+xt)/2,wt=l.y1*ut,Wt=l.y2*ut,Lt=(wt+Wt)/2,Nt=[{offsetX:gt,offsetY:wt},{offsetX:ct,offsetY:wt},{offsetX:xt,offsetY:wt},{offsetX:xt,offsetY:Lt},{offsetX:xt,offsetY:Wt},{offsetX:ct,offsetY:Wt},{offsetX:gt,offsetY:Wt},{offsetX:gt,offsetY:Lt}];let Gt=[];for(const{offsetX:kn,offsetY:cn}of Nt)Gt.push(new a.P(ot+ge*kn+Ne*cn,ht+Pe*kn+Ze*cn));let Bn=!1;if(B){const kn=Gt.map((cn=>this.projectAndGetPerspectiveRatio(cn.x,cn.y,E,ae,me)));Bn=kn.some((cn=>!cn.isOccluded)),Gt=kn.map((cn=>new a.P(cn.x,cn.y)))}else Bn=!0;return{box:a.aA(Gt),allPointsOccluded:!Bn}}}class jr{constructor(l,p,C,E){this.opacity=l?Math.max(0,Math.min(1,l.opacity+(l.placed?p:-p))):E&&C?1:0,this.placed=C}isHidden(){return this.opacity===0&&!this.placed}}class Da{constructor(l,p,C,E,B){this.text=new jr(l?l.text:null,p,C,B),this.icon=new jr(l?l.icon:null,p,E,B)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class os{constructor(l,p,C){this.text=l,this.icon=p,this.skipFade=C}}class Bc{constructor(l,p,C,E,B){this.bucketInstanceId=l,this.featureIndex=p,this.sourceLayerIndex=C,this.bucketIndex=E,this.tileID=B}}class Mu{constructor(l){this.crossSourceCollisions=l,this.maxGroupID=0,this.collisionGroups={}}get(l){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[l]){const p=++this.maxGroupID;this.collisionGroups[l]={ID:p,predicate:C=>C.collisionGroupID===p}}return this.collisionGroups[l]}}function nu(O,l,p,C,E){const{horizontalAlign:B,verticalAlign:U}=a.aH(O);return new a.P(-(B-.5)*l+C[0]*E,-(U-.5)*p+C[1]*E)}class oA{constructor(l,p,C,E,B){this.transform=l.clone(),this.terrain=p,this.collisionIndex=new gs(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=C,this.retainedQueryData={},this.collisionGroups=new Mu(E),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=B,B&&(B.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(l){const p=this.terrain;return p?(C,E)=>p.getElevation(l,C,E):null}getBucketParts(l,p,C,E){const B=C.getBucket(p),U=C.latestFeatureIndex;if(!B||!U||p.id!==B.layerIds[0])return;const G=C.collisionBoxArray,Z=B.layers[0].layout,ae=B.layers[0].paint,ce=Math.pow(2,this.transform.zoom-C.tileID.overscaledZ),me=C.tileSize/a.$,ge=C.tileID.toUnwrapped(),Pe=Z.get("text-rotation-alignment")==="map",Ne=a.aC(C,1,this.transform.zoom),Ze=a.aD(this.collisionIndex.transform,C,ae.get("text-translate"),ae.get("text-translate-anchor")),Xe=a.aD(this.collisionIndex.transform,C,ae.get("icon-translate"),ae.get("icon-translate-anchor")),et=ii(Pe,this.transform,Ne);this.retainedQueryData[B.bucketInstanceId]=new Bc(B.bucketInstanceId,U,B.sourceLayerIndex,B.index,C.tileID);const ot={bucket:B,layout:Z,translationText:Ze,translationIcon:Xe,unwrappedTileID:ge,pitchedLabelPlaneMatrix:et,scale:ce,textPixelRatio:me,holdingForFade:C.holdingForSymbolFade(),collisionBoxArray:G,partiallyEvaluatedTextSize:a.an(B.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(B.sourceID)};if(E)for(const ht of B.sortKeyRanges){const{sortKey:ut,symbolInstanceStart:gt,symbolInstanceEnd:xt}=ht;l.push({sortKey:ut,symbolInstanceStart:gt,symbolInstanceEnd:xt,parameters:ot})}else l.push({symbolInstanceStart:0,symbolInstanceEnd:B.symbolInstances.length,parameters:ot})}attemptAnchorPlacement(l,p,C,E,B,U,G,Z,ae,ce,me,ge,Pe,Ne,Ze,Xe,et,ot,ht,ut){const gt=a.aE[l.textAnchor],xt=[l.textOffset0,l.textOffset1],ct=nu(gt,C,E,xt,B),wt=this.collisionIndex.placeCollisionBox(p,ge,Z,ae,ce,G,U,Xe,me.predicate,ht,ct,ut);if((!ot||this.collisionIndex.placeCollisionBox(ot,ge,Z,ae,ce,G,U,et,me.predicate,ht,ct,ut).placeable)&&wt.placeable){let Wt;if(this.prevPlacement&&this.prevPlacement.variableOffsets[Pe.crossTileID]&&this.prevPlacement.placements[Pe.crossTileID]&&this.prevPlacement.placements[Pe.crossTileID].text&&(Wt=this.prevPlacement.variableOffsets[Pe.crossTileID].anchor),Pe.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[Pe.crossTileID]={textOffset:xt,width:C,height:E,anchor:gt,textBoxScale:B,prevAnchor:Wt},this.markUsedJustification(Ne,gt,Pe,Ze),Ne.allowVerticalPlacement&&(this.markUsedOrientation(Ne,Ze,Pe),this.placedOrientations[Pe.crossTileID]=Ze),{shift:ct,placedGlyphBoxes:wt}}}placeLayerBucketPart(l,p,C){const{bucket:E,layout:B,translationText:U,translationIcon:G,unwrappedTileID:Z,pitchedLabelPlaneMatrix:ae,textPixelRatio:ce,holdingForFade:me,collisionBoxArray:ge,partiallyEvaluatedTextSize:Pe,collisionGroup:Ne}=l.parameters,Ze=B.get("text-optional"),Xe=B.get("icon-optional"),et=a.aF(B,"text-overlap","text-allow-overlap"),ot=et==="always",ht=a.aF(B,"icon-overlap","icon-allow-overlap"),ut=ht==="always",gt=B.get("text-rotation-alignment")==="map",xt=B.get("text-pitch-alignment")==="map",ct=B.get("icon-text-fit")!=="none",wt=B.get("symbol-z-order")==="viewport-y",Wt=ot&&(ut||!E.hasIconData()||Xe),Lt=ut&&(ot||!E.hasTextData()||Ze);!E.collisionArrays&&ge&&E.deserializeCollisionBoxes(ge);const Nt=this.retainedQueryData[E.bucketInstanceId].tileID,Gt=this._getTerrainElevationFunc(Nt),Bn=this.transform.getFastPathSimpleProjectionMatrix(Nt),kn=(cn,si,Xi)=>{var Er,Eo;if(p[cn.crossTileID])return;if(me)return void(this.placements[cn.crossTileID]=new os(!1,!1,!1));let Wr=!1,es=!1,Qo=!0,Br=null,Rs={box:null,placeable:!1,offscreen:null,occluded:!1},Al={placeable:!1},la=null,ra=null,Cl=null,ph=0,Uu=0,TA=0;si.textFeatureIndex?ph=si.textFeatureIndex:cn.useRuntimeCollisionCircles&&(ph=cn.featureIndex),si.verticalTextFeatureIndex&&(Uu=si.verticalTextFeatureIndex);const va=si.textBox;if(va){const Ql=Ns=>{let ba=a.ao.horizontal;if(E.allowVerticalPlacement&&!Ns&&this.prevPlacement){const $a=this.prevPlacement.placedOrientations[cn.crossTileID];$a&&(this.placedOrientations[cn.crossTileID]=$a,ba=$a,this.markUsedOrientation(E,ba,cn))}return ba},_l=(Ns,ba)=>{if(E.allowVerticalPlacement&&cn.numVerticalGlyphVertices>0&&si.verticalTextBox){for(const $a of E.writingModes)if($a===a.ao.vertical?(Rs=ba(),Al=Rs):Rs=Ns(),Rs&&Rs.placeable)break}else Rs=Ns()},jc=cn.textAnchorOffsetStartIndex,fu=cn.textAnchorOffsetEndIndex;if(fu===jc){const Ns=(ba,$a)=>{const ua=this.collisionIndex.placeCollisionBox(ba,et,ce,Nt,Z,xt,gt,U,Ne.predicate,Gt,void 0,Bn);return ua&&ua.placeable&&(this.markUsedOrientation(E,$a,cn),this.placedOrientations[cn.crossTileID]=$a),ua};_l((()=>Ns(va,a.ao.horizontal)),(()=>{const ba=si.verticalTextBox;return E.allowVerticalPlacement&&cn.numVerticalGlyphVertices>0&&ba?Ns(ba,a.ao.vertical):{box:null,offscreen:null}})),Ql(Rs&&Rs.placeable)}else{let Ns=a.aE[(Eo=(Er=this.prevPlacement)===null||Er===void 0?void 0:Er.variableOffsets[cn.crossTileID])===null||Eo===void 0?void 0:Eo.anchor];const ba=(ua,v0,Qd)=>{const Nc=ua.x2-ua.x1,Ku=ua.y2-ua.y1,pu=cn.textBoxScale,Gc=ct&&ht==="never"?v0:null;let dA=null,DA=et==="never"?1:2,Hm="never";Ns&&DA++;for(let fA=0;fA<DA;fA++){for(let qd=jc;qd<fu;qd++){const qf=E.textAnchorOffsets.get(qd);if(Ns&&qf.textAnchor!==Ns)continue;const mh=this.attemptAnchorPlacement(qf,ua,Nc,Ku,pu,gt,xt,ce,Nt,Z,Ne,Hm,cn,E,Qd,U,G,Gc,Gt);if(mh&&(dA=mh.placedGlyphBoxes,dA&&dA.placeable))return Wr=!0,Br=mh.shift,dA}Ns?Ns=null:Hm=et}return C&&!dA&&(dA={box:this.collisionIndex.placeCollisionBox(va,"always",ce,Nt,Z,xt,gt,U,Ne.predicate,Gt,void 0,Bn).box,offscreen:!1,placeable:!1,occluded:!1}),dA};_l((()=>ba(va,si.iconBox,a.ao.horizontal)),(()=>{const ua=si.verticalTextBox;return E.allowVerticalPlacement&&(!Rs||!Rs.placeable)&&cn.numVerticalGlyphVertices>0&&ua?ba(ua,si.verticalIconBox,a.ao.vertical):{box:null,occluded:!0,offscreen:null}})),Rs&&(Wr=Rs.placeable,Qo=Rs.offscreen);const $a=Ql(Rs&&Rs.placeable);if(!Wr&&this.prevPlacement){const ua=this.prevPlacement.variableOffsets[cn.crossTileID];ua&&(this.variableOffsets[cn.crossTileID]=ua,this.markUsedJustification(E,ua.anchor,cn,$a))}}}if(la=Rs,Wr=la&&la.placeable,Qo=la&&la.offscreen,cn.useRuntimeCollisionCircles&&cn.centerJustifiedTextSymbolIndex>=0){const Ql=E.text.placedSymbolArray.get(cn.centerJustifiedTextSymbolIndex),_l=a.ap(E.textSizeData,Pe,Ql),jc=B.get("text-padding");ra=this.collisionIndex.placeCollisionCircles(et,Ql,E.lineVertexArray,E.glyphOffsetArray,_l,Z,ae,C,xt,Ne.predicate,cn.collisionCircleDiameter,jc,U,Gt),ra.circles.length&&ra.collisionDetected&&!C&&a.w("Collisions detected, but collision boxes are not shown"),Wr=ot||ra.circles.length>0&&!ra.collisionDetected,Qo=Qo&&ra.offscreen}if(si.iconFeatureIndex&&(TA=si.iconFeatureIndex),si.iconBox){const Ql=_l=>this.collisionIndex.placeCollisionBox(_l,ht,ce,Nt,Z,xt,gt,G,Ne.predicate,Gt,ct&&Br?Br:void 0,Bn);Al&&Al.placeable&&si.verticalIconBox?(Cl=Ql(si.verticalIconBox),es=Cl.placeable):(Cl=Ql(si.iconBox),es=Cl.placeable),Qo=Qo&&Cl.offscreen}const du=Ze||cn.numHorizontalGlyphVertices===0&&cn.numVerticalGlyphVertices===0,Wd=Xe||cn.numIconVertices===0;du||Wd?Wd?du||(es=es&&Wr):Wr=es&&Wr:es=Wr=es&&Wr;const RA=es&&Cl.placeable;if(Wr&&la.placeable&&this.collisionIndex.insertCollisionBox(la.box,et,B.get("text-ignore-placement"),E.bucketInstanceId,Al&&Al.placeable&&Uu?Uu:ph,Ne.ID),RA&&this.collisionIndex.insertCollisionBox(Cl.box,ht,B.get("icon-ignore-placement"),E.bucketInstanceId,TA,Ne.ID),ra&&Wr&&this.collisionIndex.insertCollisionCircles(ra.circles,et,B.get("text-ignore-placement"),E.bucketInstanceId,ph,Ne.ID),C&&this.storeCollisionData(E.bucketInstanceId,Xi,si,la,Cl,ra),cn.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(E.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[cn.crossTileID]=new os((Wr||Wt)&&!la?.occluded,(es||Lt)&&!Cl?.occluded,Qo||E.justReloaded),p[cn.crossTileID]=!0};if(wt){if(l.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const cn=E.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let si=cn.length-1;si>=0;--si){const Xi=cn[si];kn(E.symbolInstances.get(Xi),E.collisionArrays[Xi],Xi)}}else for(let cn=l.symbolInstanceStart;cn<l.symbolInstanceEnd;cn++)kn(E.symbolInstances.get(cn),E.collisionArrays[cn],cn);E.justReloaded=!1}storeCollisionData(l,p,C,E,B,U){if(C.textBox||C.iconBox){let G,Z;this.collisionBoxArrays.has(l)?G=this.collisionBoxArrays.get(l):(G=new Map,this.collisionBoxArrays.set(l,G)),G.has(p)?Z=G.get(p):(Z={text:null,icon:null},G.set(p,Z)),C.textBox&&(Z.text=E.box),C.iconBox&&(Z.icon=B.box)}if(U){let G=this.collisionCircleArrays[l];G===void 0&&(G=this.collisionCircleArrays[l]=[]);for(let Z=0;Z<U.circles.length;Z+=4)G.push(U.circles[Z+0]-Zo),G.push(U.circles[Z+1]-Zo),G.push(U.circles[Z+2]),G.push(U.collisionDetected?1:0)}}markUsedJustification(l,p,C,E){let B;B=E===a.ao.vertical?C.verticalPlacedTextSymbolIndex:{left:C.leftJustifiedTextSymbolIndex,center:C.centerJustifiedTextSymbolIndex,right:C.rightJustifiedTextSymbolIndex}[a.aG(p)];const U=[C.leftJustifiedTextSymbolIndex,C.centerJustifiedTextSymbolIndex,C.rightJustifiedTextSymbolIndex,C.verticalPlacedTextSymbolIndex];for(const G of U)G>=0&&(l.text.placedSymbolArray.get(G).crossTileID=B>=0&&G!==B?0:C.crossTileID)}markUsedOrientation(l,p,C){const E=p===a.ao.horizontal||p===a.ao.horizontalOnly?p:0,B=p===a.ao.vertical?p:0,U=[C.leftJustifiedTextSymbolIndex,C.centerJustifiedTextSymbolIndex,C.rightJustifiedTextSymbolIndex];for(const G of U)l.text.placedSymbolArray.get(G).placedOrientation=E;C.verticalPlacedTextSymbolIndex&&(l.text.placedSymbolArray.get(C.verticalPlacedTextSymbolIndex).placedOrientation=B)}commit(l){this.commitTime=l,this.zoomAtLastRecencyCheck=this.transform.zoom;const p=this.prevPlacement;let C=!1;this.prevZoomAdjustment=p?p.zoomAdjustment(this.transform.zoom):0;const E=p?p.symbolFadeChange(l):1,B=p?p.opacities:{},U=p?p.variableOffsets:{},G=p?p.placedOrientations:{};for(const Z in this.placements){const ae=this.placements[Z],ce=B[Z];ce?(this.opacities[Z]=new Da(ce,E,ae.text,ae.icon),C=C||ae.text!==ce.text.placed||ae.icon!==ce.icon.placed):(this.opacities[Z]=new Da(null,E,ae.text,ae.icon,ae.skipFade),C=C||ae.text||ae.icon)}for(const Z in B){const ae=B[Z];if(!this.opacities[Z]){const ce=new Da(ae,E,!1,!1);ce.isHidden()||(this.opacities[Z]=ce,C=C||ae.text.placed||ae.icon.placed)}}for(const Z in U)this.variableOffsets[Z]||!this.opacities[Z]||this.opacities[Z].isHidden()||(this.variableOffsets[Z]=U[Z]);for(const Z in G)this.placedOrientations[Z]||!this.opacities[Z]||this.opacities[Z].isHidden()||(this.placedOrientations[Z]=G[Z]);if(p&&p.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");C?this.lastPlacementChangeTime=l:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=p?p.lastPlacementChangeTime:l)}updateLayerOpacities(l,p){const C={};for(const E of p){const B=E.getBucket(l);B&&E.latestFeatureIndex&&l.id===B.layerIds[0]&&this.updateBucketOpacities(B,E.tileID,C,E.collisionBoxArray)}}updateBucketOpacities(l,p,C,E){l.hasTextData()&&(l.text.opacityVertexArray.clear(),l.text.hasVisibleVertices=!1),l.hasIconData()&&(l.icon.opacityVertexArray.clear(),l.icon.hasVisibleVertices=!1),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexArray.clear(),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexArray.clear();const B=l.layers[0],U=B.layout,G=new Da(null,0,!1,!1,!0),Z=U.get("text-allow-overlap"),ae=U.get("icon-allow-overlap"),ce=B._unevaluatedLayout.hasValue("text-variable-anchor")||B._unevaluatedLayout.hasValue("text-variable-anchor-offset"),me=U.get("text-rotation-alignment")==="map",ge=U.get("text-pitch-alignment")==="map",Pe=U.get("icon-text-fit")!=="none",Ne=new Da(null,0,Z&&(ae||!l.hasIconData()||U.get("icon-optional")),ae&&(Z||!l.hasTextData()||U.get("text-optional")),!0);!l.collisionArrays&&E&&(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData())&&l.deserializeCollisionBoxes(E);const Ze=(et,ot,ht)=>{for(let ut=0;ut<ot/4;ut++)et.opacityVertexArray.emplaceBack(ht);et.hasVisibleVertices=et.hasVisibleVertices||ht!==Ss},Xe=this.collisionBoxArrays.get(l.bucketInstanceId);for(let et=0;et<l.symbolInstances.length;et++){const ot=l.symbolInstances.get(et),{numHorizontalGlyphVertices:ht,numVerticalGlyphVertices:ut,crossTileID:gt}=ot;let xt=this.opacities[gt];C[gt]?xt=G:xt||(xt=Ne,this.opacities[gt]=xt),C[gt]=!0;const ct=ot.numIconVertices>0,wt=this.placedOrientations[ot.crossTileID],Wt=wt===a.ao.vertical,Lt=wt===a.ao.horizontal||wt===a.ao.horizontalOnly;if(ht>0||ut>0){const Gt=ZA(xt.text);Ze(l.text,ht,Wt?Ss:Gt),Ze(l.text,ut,Lt?Ss:Gt);const Bn=xt.text.isHidden();[ot.rightJustifiedTextSymbolIndex,ot.centerJustifiedTextSymbolIndex,ot.leftJustifiedTextSymbolIndex].forEach((si=>{si>=0&&(l.text.placedSymbolArray.get(si).hidden=Bn||Wt?1:0)})),ot.verticalPlacedTextSymbolIndex>=0&&(l.text.placedSymbolArray.get(ot.verticalPlacedTextSymbolIndex).hidden=Bn||Lt?1:0);const kn=this.variableOffsets[ot.crossTileID];kn&&this.markUsedJustification(l,kn.anchor,ot,wt);const cn=this.placedOrientations[ot.crossTileID];cn&&(this.markUsedJustification(l,"left",ot,cn),this.markUsedOrientation(l,cn,ot))}if(ct){const Gt=ZA(xt.icon),Bn=!(Pe&&ot.verticalPlacedIconSymbolIndex&&Wt);ot.placedIconSymbolIndex>=0&&(Ze(l.icon,ot.numIconVertices,Bn?Gt:Ss),l.icon.placedSymbolArray.get(ot.placedIconSymbolIndex).hidden=xt.icon.isHidden()),ot.verticalPlacedIconSymbolIndex>=0&&(Ze(l.icon,ot.numVerticalIconVertices,Bn?Ss:Gt),l.icon.placedSymbolArray.get(ot.verticalPlacedIconSymbolIndex).hidden=xt.icon.isHidden())}const Nt=Xe&&Xe.has(et)?Xe.get(et):{text:null,icon:null};if(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData()){const Gt=l.collisionArrays[et];if(Gt){let Bn=new a.P(0,0);if(Gt.textBox||Gt.verticalTextBox){let kn=!0;if(ce){const cn=this.variableOffsets[gt];cn?(Bn=nu(cn.anchor,cn.width,cn.height,cn.textOffset,cn.textBoxScale),me&&Bn._rotate(ge?-this.transform.bearingInRadians:this.transform.bearingInRadians)):kn=!1}if(Gt.textBox||Gt.verticalTextBox){let cn;Gt.textBox&&(cn=Wt),Gt.verticalTextBox&&(cn=Lt),tc(l.textCollisionBox.collisionVertexArray,xt.text.placed,!kn||cn,Nt.text,Bn.x,Bn.y)}}if(Gt.iconBox||Gt.verticalIconBox){const kn=!!(!Lt&&Gt.verticalIconBox);let cn;Gt.iconBox&&(cn=kn),Gt.verticalIconBox&&(cn=!kn),tc(l.iconCollisionBox.collisionVertexArray,xt.icon.placed,cn,Nt.icon,Pe?Bn.x:0,Pe?Bn.y:0)}}}}if(l.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[l.bucketInstanceId]&&(this.retainedQueryData[l.bucketInstanceId].featureSortOrder=l.featureSortOrder),l.hasTextData()&&l.text.opacityVertexBuffer&&l.text.opacityVertexBuffer.updateData(l.text.opacityVertexArray),l.hasIconData()&&l.icon.opacityVertexBuffer&&l.icon.opacityVertexBuffer.updateData(l.icon.opacityVertexArray),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexBuffer&&l.iconCollisionBox.collisionVertexBuffer.updateData(l.iconCollisionBox.collisionVertexArray),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexBuffer&&l.textCollisionBox.collisionVertexBuffer.updateData(l.textCollisionBox.collisionVertexArray),l.text.opacityVertexArray.length!==l.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${l.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${l.text.layoutVertexArray.length}) / 4`);if(l.icon.opacityVertexArray.length!==l.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${l.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${l.icon.layoutVertexArray.length}) / 4`);l.bucketInstanceId in this.collisionCircleArrays&&(l.collisionCircleArray=this.collisionCircleArrays[l.bucketInstanceId],delete this.collisionCircleArrays[l.bucketInstanceId])}symbolFadeChange(l){return this.fadeDuration===0?1:(l-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(l){return Math.max(0,(this.transform.zoom-l)/1.5)}hasTransitions(l){return this.stale||l-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(l,p){const C=this.zoomAtLastRecencyCheck===p?1-this.zoomAdjustment(p):1;return this.zoomAtLastRecencyCheck=p,this.commitTime+this.fadeDuration*C>l}setStale(){this.stale=!0}}function tc(O,l,p,C,E,B){C&&C.length!==0||(C=[0,0,0,0]);const U=C[0]-Zo,G=C[1]-Zo,Z=C[2]-Zo,ae=C[3]-Zo;O.emplaceBack(l?1:0,p?1:0,E||0,B||0,U,G),O.emplaceBack(l?1:0,p?1:0,E||0,B||0,Z,G),O.emplaceBack(l?1:0,p?1:0,E||0,B||0,Z,ae),O.emplaceBack(l?1:0,p?1:0,E||0,B||0,U,ae)}const gl=Math.pow(2,25),Lo=Math.pow(2,24),nc=Math.pow(2,17),iu=Math.pow(2,16),Ic=Math.pow(2,9),ic=Math.pow(2,8),kc=Math.pow(2,1);function ZA(O){if(O.opacity===0&&!O.placed)return 0;if(O.opacity===1&&O.placed)return 4294967295;const l=O.placed?1:0,p=Math.floor(127*O.opacity);return p*gl+l*Lo+p*nc+l*iu+p*Ic+l*ic+p*kc+l}const Ss=0;class Tc{constructor(l){this._sortAcrossTiles=l.layout.get("symbol-z-order")!=="viewport-y"&&!l.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(l,p,C,E,B){const U=this._bucketParts;for(;this._currentTileIndex<l.length;)if(p.getBucketParts(U,E,l[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,B())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,U.sort(((G,Z)=>G.sortKey-Z.sortKey)));this._currentPartIndex<U.length;)if(p.placeLayerBucketPart(U[this._currentPartIndex],this._seenCrossTileIDs,C),this._currentPartIndex++,B())return!0;return!1}}class wu{constructor(l,p,C,E,B,U,G,Z){this.placement=new oA(l,p,U,G,Z),this._currentPlacementIndex=C.length-1,this._forceFullPlacement=E,this._showCollisionBoxes=B,this._done=!1}isDone(){return this._done}continuePlacement(l,p,C){const E=M.now(),B=()=>!this._forceFullPlacement&&M.now()-E>2;for(;this._currentPlacementIndex>=0;){const U=p[l[this._currentPlacementIndex]],G=this.placement.collisionIndex.transform.zoom;if(U.type==="symbol"&&(!U.minzoom||U.minzoom<=G)&&(!U.maxzoom||U.maxzoom>G)){if(this._inProgressLayer||(this._inProgressLayer=new Tc(U)),this._inProgressLayer.continuePlacement(C[U.source],this.placement,this._showCollisionBoxes,U,B))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(l){return this.placement.commit(l),this.placement}}const ru=512/a.$/2;class ou{constructor(l,p,C){this.tileID=l,this.bucketInstanceId=C,this._symbolsByKey={};const E=new Map;for(let B=0;B<p.length;B++){const U=p.get(B),G=U.key,Z=E.get(G);Z?Z.push(U):E.set(G,[U])}for(const[B,U]of E){const G={positions:U.map((Z=>({x:Math.floor(Z.anchorX*ru),y:Math.floor(Z.anchorY*ru)}))),crossTileIDs:U.map((Z=>Z.crossTileID))};if(G.positions.length>128){const Z=new a.aI(G.positions.length,16,Uint16Array);for(const{x:ae,y:ce}of G.positions)Z.add(ae,ce);Z.finish(),delete G.positions,G.index=Z}this._symbolsByKey[B]=G}}getScaledCoordinates(l,p){const{x:C,y:E,z:B}=this.tileID.canonical,{x:U,y:G,z:Z}=p.canonical,ae=ru/Math.pow(2,Z-B),ce=(G*a.$+l.anchorY)*ae,me=E*a.$*ru;return{x:Math.floor((U*a.$+l.anchorX)*ae-C*a.$*ru),y:Math.floor(ce-me)}}findMatches(l,p,C){const E=this.tileID.canonical.z<p.canonical.z?1:Math.pow(2,this.tileID.canonical.z-p.canonical.z);for(let B=0;B<l.length;B++){const U=l.get(B);if(U.crossTileID)continue;const G=this._symbolsByKey[U.key];if(!G)continue;const Z=this.getScaledCoordinates(U,p);if(G.index){const ae=G.index.range(Z.x-E,Z.y-E,Z.x+E,Z.y+E).sort();for(const ce of ae){const me=G.crossTileIDs[ce];if(!C[me]){C[me]=!0,U.crossTileID=me;break}}}else if(G.positions)for(let ae=0;ae<G.positions.length;ae++){const ce=G.positions[ae],me=G.crossTileIDs[ae];if(Math.abs(ce.x-Z.x)<=E&&Math.abs(ce.y-Z.y)<=E&&!C[me]){C[me]=!0,U.crossTileID=me;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map((({crossTileIDs:l})=>l))}}class su{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Es{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(l){const p=Math.round((l-this.lng)/360);if(p!==0)for(const C in this.indexes){const E=this.indexes[C],B={};for(const U in E){const G=E[U];G.tileID=G.tileID.unwrapTo(G.tileID.wrap+p),B[G.tileID.key]=G}this.indexes[C]=B}this.lng=l}addBucket(l,p,C){if(this.indexes[l.overscaledZ]&&this.indexes[l.overscaledZ][l.key]){if(this.indexes[l.overscaledZ][l.key].bucketInstanceId===p.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(l.overscaledZ,this.indexes[l.overscaledZ][l.key])}for(let B=0;B<p.symbolInstances.length;B++)p.symbolInstances.get(B).crossTileID=0;this.usedCrossTileIDs[l.overscaledZ]||(this.usedCrossTileIDs[l.overscaledZ]={});const E=this.usedCrossTileIDs[l.overscaledZ];for(const B in this.indexes){const U=this.indexes[B];if(Number(B)>l.overscaledZ)for(const G in U){const Z=U[G];Z.tileID.isChildOf(l)&&Z.findMatches(p.symbolInstances,l,E)}else{const G=U[l.scaledTo(Number(B)).key];G&&G.findMatches(p.symbolInstances,l,E)}}for(let B=0;B<p.symbolInstances.length;B++){const U=p.symbolInstances.get(B);U.crossTileID||(U.crossTileID=C.generate(),E[U.crossTileID]=!0)}return this.indexes[l.overscaledZ]===void 0&&(this.indexes[l.overscaledZ]={}),this.indexes[l.overscaledZ][l.key]=new ou(l,p.symbolInstances,p.bucketInstanceId),!0}removeBucketCrossTileIDs(l,p){for(const C of p.getCrossTileIDsLists())for(const E of C)delete this.usedCrossTileIDs[l][E]}removeStaleBuckets(l){let p=!1;for(const C in this.indexes){const E=this.indexes[C];for(const B in E)l[E[B].bucketInstanceId]||(this.removeBucketCrossTileIDs(C,E[B]),delete E[B],p=!0)}return p}}class wo{constructor(){this.layerIndexes={},this.crossTileIDs=new su,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(l,p,C){let E=this.layerIndexes[l.id];E===void 0&&(E=this.layerIndexes[l.id]=new Es);let B=!1;const U={};E.handleWrapJump(C);for(const G of p){const Z=G.getBucket(l);Z&&l.id===Z.layerIds[0]&&(Z.bucketInstanceId||(Z.bucketInstanceId=++this.maxBucketInstanceId),E.addBucket(G.tileID,Z,this.crossTileIDs)&&(B=!0),U[Z.bucketInstanceId]=!0)}return E.removeStaleBuckets(U)&&(B=!0),B}pruneUnusedLayers(l){const p={};l.forEach((C=>{p[C]=!0}));for(const C in this.layerIndexes)p[C]||delete this.layerIndexes[C]}}var Tl="void main() {fragColor=vec4(1.0);}";const Js={prelude:Ui(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:Ui("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:Ui("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:Ui(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:Ui(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Ui(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Ui(Tl,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:Ui(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:Ui(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Ui("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Ui("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),colorRelief:Ui(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;uniform vec4 u_unpack;uniform sampler2D u_elevation_stops;uniform sampler2D u_color_stops;uniform int u_color_ramp_size;uniform float u_opacity;in vec2 v_pos;float getElevation(vec2 coord) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}float getElevationStop(int stop) {float x=(float(stop)+0.5)/float(u_color_ramp_size);vec4 data=texture(u_elevation_stops,vec2(x,0))*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {float el=getElevation(v_pos);int r=(u_color_ramp_size-1);int l=0;float el_l=getElevationStop(l);float el_r=getElevationStop(r);while(r-l > 1){int m=(r+l)/2;float el_m=getElevationStop(m);if(el < el_m){r=m;el_r=el_m;}else
{l=m;el_l=el_m;}}float x=(float(l)+(el-el_l)/(el_r-el_l)+0.5)/float(u_color_ramp_size);fragColor=u_opacity*texture(u_color_stops,vec2(x,0));
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_dimension;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_pos/8192.0)*scale+epsilon;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),debug:Ui("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:Ui(Tl,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:Ui(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:Ui(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:Ui(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:Ui(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Ui(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Ui(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Ui(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Ui(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;if (u_method==BASIC) {basic_hillshade(deriv);} else if (u_method==COMBINED) {combined_hillshade(deriv);} else if (u_method==IGOR) {igor_hillshade(deriv);} else if (u_method==MULTIDIRECTIONAL) {multidirectional_hillshade(deriv);} else if (u_method==STANDARD) {standard_hillshade(deriv);} else {standard_hillshade(deriv);}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:Ui(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Ui(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Ui(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Ui(`uniform lowp float u_device_pixel_ratio;uniform lowp float u_lineatlas_width;uniform sampler2D u_image;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0)/min(dasharray_from.w,dasharray_to.w);alpha*=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),lineGradientSDF:Ui(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform sampler2D u_image_dash;uniform float u_mix;uniform lowp float u_lineatlas_width;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);float sdfdist_a=texture(u_image_dash,v_tex_a).a;float sdfdist_b=texture(u_image_dash,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0)/min(dasharray_from.w,dasharray_to.w);float dash_alpha=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*dash_alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;out vec2 v_tex_a;out vec2 v_tex_b;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;float texel_height=1.0/u_image_height;float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),raster:Ui(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:Ui(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Ui(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Ui(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Ui("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:Ui("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:Ui("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:Ui("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:Ui(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:Ui("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function Ui(O,l){const p=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,C=l.match(/in ([\w]+) ([\w]+)/g),E=O.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),B=l.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),U=B?B.concat(E):E,G={};return{fragmentSource:O=O.replace(p,((Z,ae,ce,me,ge)=>(G[ge]=!0,ae==="define"?`
#ifndef HAS_UNIFORM_u_${ge}
in ${ce} ${me} ${ge};
#else
uniform ${ce} ${me} u_${ge};
#endif
`:`
#ifdef HAS_UNIFORM_u_${ge}
    ${ce} ${me} ${ge} = u_${ge};
#endif
`))),vertexSource:l=l.replace(p,((Z,ae,ce,me,ge)=>{const Pe=me==="float"?"vec2":"vec4",Ne=ge.match(/color/)?"color":Pe;return G[ge]?ae==="define"?`
#ifndef HAS_UNIFORM_u_${ge}
uniform lowp float u_${ge}_t;
in ${ce} ${Pe} a_${ge};
out ${ce} ${me} ${ge};
#else
uniform ${ce} ${me} u_${ge};
#endif
`:Ne==="vec4"?`
#ifndef HAS_UNIFORM_u_${ge}
    ${ge} = a_${ge};
#else
    ${ce} ${me} ${ge} = u_${ge};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ge}
    ${ge} = unpack_mix_${Ne}(a_${ge}, u_${ge}_t);
#else
    ${ce} ${me} ${ge} = u_${ge};
#endif
`:ae==="define"?`
#ifndef HAS_UNIFORM_u_${ge}
uniform lowp float u_${ge}_t;
in ${ce} ${Pe} a_${ge};
#else
uniform ${ce} ${me} u_${ge};
#endif
`:Ne==="vec4"?`
#ifndef HAS_UNIFORM_u_${ge}
    ${ce} ${me} ${ge} = a_${ge};
#else
    ${ce} ${me} ${ge} = u_${ge};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ge}
    ${ce} ${me} ${ge} = unpack_mix_${Ne}(a_${ge}, u_${ge}_t);
#else
    ${ce} ${me} ${ge} = u_${ge};
#endif
`})),staticAttributes:C,staticUniforms:U}}class au{constructor(l,p,C){this.vertexBuffer=l,this.indexBuffer=p,this.segments=C}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var aa=a.aJ([{name:"a_pos",type:"Int16",components:2}]);const Su="#define PROJECTION_MERCATOR",ir="mercator";class Pa{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return ir}get shaderDefine(){return Su}get shaderPreludeCode(){return Js.projectionMercator}get vertexShaderPreludeCode(){return Js.projectionMercator.vertexSource}get subdivisionGranularity(){return a.aK.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(l){}getMeshFromTileID(l,p,C,E,B){if(this._cachedMesh)return this._cachedMesh;const U=new a.aL;U.emplaceBack(0,0),U.emplaceBack(a.$,0),U.emplaceBack(0,a.$),U.emplaceBack(a.$,a.$);const G=l.createVertexBuffer(U,aa.members),Z=a.aM.simpleSegment(0,0,4,2),ae=new a.aN;ae.emplaceBack(1,0,2),ae.emplaceBack(1,2,3);const ce=l.createIndexBuffer(ae);return this._cachedMesh=new au(G,ce,Z),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(l){}}class ko{constructor(l=0,p=0,C=0,E=0){if(isNaN(l)||l<0||isNaN(p)||p<0||isNaN(C)||C<0||isNaN(E)||E<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=l,this.bottom=p,this.left=C,this.right=E}interpolate(l,p,C){return p.top!=null&&l.top!=null&&(this.top=a.C.number(l.top,p.top,C)),p.bottom!=null&&l.bottom!=null&&(this.bottom=a.C.number(l.bottom,p.bottom,C)),p.left!=null&&l.left!=null&&(this.left=a.C.number(l.left,p.left,C)),p.right!=null&&l.right!=null&&(this.right=a.C.number(l.right,p.right,C)),this}getCenter(l,p){const C=a.ah((this.left+l-this.right)/2,0,l),E=a.ah((this.top+p-this.bottom)/2,0,p);return new a.P(C,E)}equals(l){return this.top===l.top&&this.bottom===l.bottom&&this.left===l.left&&this.right===l.right}clone(){return new ko(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Rl(O,l){if(!O.renderWorldCopies||O.lngRange)return;const p=l.lng-O.center.lng;l.lng+=p>180?-360:p<-180?360:0}function ss(O){return Math.max(0,Math.floor(O))}class fo{constructor(l,p,C,E,B,U){this._callbacks=l,this._tileSize=512,this._renderWorldCopies=U===void 0||!!U,this._minZoom=p||0,this._maxZoom=C||22,this._minPitch=E??0,this._maxPitch=B??60,this.setMaxBounds(),this._width=0,this._height=0,this._center=new a.S(0,0),this._elevation=0,this._zoom=0,this._tileZoom=ss(this._zoom),this._scale=a.af(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new ko,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(l,p,C){this._latRange=l.latRange,this._lngRange=l.lngRange,this._width=l.width,this._height=l.height,this._center=l.center,this._elevation=l.elevation,this._minElevationForCurrentTile=l.minElevationForCurrentTile,this._zoom=l.zoom,this._tileZoom=ss(this._zoom),this._scale=a.af(this._zoom),this._bearingInRadians=l.bearingInRadians,this._fovInRadians=l.fovInRadians,this._pitchInRadians=l.pitchInRadians,this._rollInRadians=l.rollInRadians,this._unmodified=l.unmodified,this._edgeInsets=new ko(l.padding.top,l.padding.bottom,l.padding.left,l.padding.right),this._minZoom=l.minZoom,this._maxZoom=l.maxZoom,this._minPitch=l.minPitch,this._maxPitch=l.maxPitch,this._renderWorldCopies=l.renderWorldCopies,this._cameraToCenterDistance=l.cameraToCenterDistance,this._nearZ=l.nearZ,this._farZ=l.farZ,this._autoCalculateNearFarZ=!C&&l.autoCalculateNearFarZ,p&&this._constrain(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(l){this._minElevationForCurrentTile=l}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(l){this._minZoom!==l&&(this._minZoom=l,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(l){this._maxZoom!==l&&(this._maxZoom=l,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(l){this._minPitch!==l&&(this._minPitch=l,this.setPitch(Math.max(this.pitch,l)))}get maxPitch(){return this._maxPitch}setMaxPitch(l){this._maxPitch!==l&&(this._maxPitch=l,this.setPitch(Math.min(this.pitch,l)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(l){l===void 0?l=!0:l===null&&(l=!1),this._renderWorldCopies=l}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new a.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(l){const p=a.aO(l,-180,180)*Math.PI/180;var C,E,B,U,G,Z,ae,ce,me;this._bearingInRadians!==p&&(this._unmodified=!1,this._bearingInRadians=p,this._calcMatrices(),this._rotationMatrix=h(),C=this._rotationMatrix,B=-this._bearingInRadians,U=(E=this._rotationMatrix)[0],G=E[1],Z=E[2],ae=E[3],ce=Math.sin(B),me=Math.cos(B),C[0]=U*me+Z*ce,C[1]=G*me+ae*ce,C[2]=U*-ce+Z*me,C[3]=G*-ce+ae*me)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(l){const p=a.ah(l,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==p&&(this._unmodified=!1,this._pitchInRadians=p,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(l){const p=l/180*Math.PI;this._rollInRadians!==p&&(this._unmodified=!1,this._rollInRadians=p,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return a.aP(this._fovInRadians)}setFov(l){l=a.ah(l,.1,150),this.fov!==l&&(this._unmodified=!1,this._fovInRadians=a.ae(l),this._calcMatrices())}get zoom(){return this._zoom}setZoom(l){const p=this.getConstrained(this._center,l).zoom;this._zoom!==p&&(this._unmodified=!1,this._zoom=p,this._tileZoom=Math.max(0,Math.floor(p)),this._scale=a.af(p),this._constrain(),this._calcMatrices())}get center(){return this._center}setCenter(l){l.lat===this._center.lat&&l.lng===this._center.lng||(this._unmodified=!1,this._center=l,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(l){l!==this._elevation&&(this._elevation=l,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(l){this._edgeInsets.equals(l)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,l,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(l,p){this._autoCalculateNearFarZ=!1,this._nearZ=l,this._farZ=p,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(l){return this._edgeInsets.equals(l)}interpolatePadding(l,p,C){this._unmodified=!1,this._edgeInsets.interpolate(l,p,C),this._constrain(),this._calcMatrices()}resize(l,p,C=!0){this._width=l,this._height=p,C&&this._constrain(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new it([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(l){l?(this._lngRange=[l.getWest(),l.getEast()],this._latRange=[l.getSouth(),l.getNorth()],this._constrain()):(this._lngRange=null,this._latRange=[-a.ai,a.ai])}getConstrained(l,p){return this._callbacks.getConstrained(l,p)}getCameraQueryGeometry(l,p){if(p.length===1)return[p[0],l];{const{minX:C,minY:E,maxX:B,maxY:U}=a.a2.fromPoints(p).extend(l);return[new a.P(C,E),new a.P(B,E),new a.P(B,U),new a.P(C,U),new a.P(C,E)]}}_constrain(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const l=this._unmodified,{center:p,zoom:C}=this.getConstrained(this.center,this.zoom);this.setCenter(p),this.setZoom(C),this._unmodified=l,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let l=a.ag(new Float64Array(16));a.N(l,l,[this._width/2,-this._height/2,1]),a.M(l,l,[1,-1,0]),this._clipSpaceToPixelsMatrix=l,l=a.ag(new Float64Array(16)),a.N(l,l,[1,-1,1]),a.M(l,l,[-1,-1,0]),a.N(l,l,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=l,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(l,p,C,E){const B=C!==void 0?C:this.bearing,U=E=E!==void 0?E:this.pitch,G=a.a1.fromLngLat(l,p),Z=-Math.cos(a.ae(U)),ae=Math.sin(a.ae(U)),ce=ae*Math.sin(a.ae(B)),me=-ae*Math.cos(a.ae(B));let ge=this.elevation;const Pe=p-ge;let Ne;Z*Pe>=0||Math.abs(Z)<.1?(Ne=1e4,ge=p+Ne*Z):Ne=-Pe/Z;let Ze,Xe,et=a.aQ(1,G.y),ot=0;do{if(ot+=1,ot>10)break;Xe=Ne/et,Ze=new a.a1(G.x+ce*Xe,G.y+me*Xe),et=1/Ze.meterInMercatorCoordinateUnits()}while(Math.abs(Ne-Xe*et)>1e-12);return{center:Ze.toLngLat(),elevation:ge,zoom:a.ak(this.height/2/Math.tan(this.fovInRadians/2)/Xe/this.tileSize)}}recalculateZoomAndCenter(l){if(this.elevation-l==0)return;const p=a.aj(1,this.center.lat)*this.worldSize,C=this.cameraToCenterDistance/p,E=a.a1.fromLngLat(this.center,this.elevation),B=v(this.center,this.elevation,this.pitch,this.bearing,C);this._elevation=l;const U=this.calculateCenterFromCameraLngLatAlt(B.toLngLat(),a.aQ(B.z,E.y),this.bearing,this.pitch);this._elevation=U.elevation,this._center=U.center,this.setZoom(U.zoom)}getCameraPoint(){const l=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.P(l*Math.sin(this.rollInRadians),l*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const l=a.aj(1,this.center.lat)*this.worldSize;return v(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/l).toLngLat()}getMercatorTileCoordinates(l){if(!l)return[0,0,1,1];const p=l.canonical.z>=0?1<<l.canonical.z:Math.pow(2,l.canonical.z);return[l.canonical.x/p,l.canonical.y/p,1/p/a.$,1/p/a.$]}}class as{constructor(l,p){this.min=l,this.max=p,this.center=a.aR([],a.aS([],this.min,this.max),.5)}quadrant(l){const p=[l%2==0,l<2],C=a.aT(this.min),E=a.aT(this.max);for(let B=0;B<p.length;B++)C[B]=p[B]?this.min[B]:this.center[B],E[B]=p[B]?this.center[B]:this.max[B];return E[2]=this.max[2],new as(C,E)}distanceX(l){return Math.max(Math.min(this.max[0],l[0]),this.min[0])-l[0]}distanceY(l){return Math.max(Math.min(this.max[1],l[1]),this.min[1])-l[1]}intersectsFrustum(l){let p=!0;for(let C=0;C<l.planes.length;C++){const E=this.intersectsPlane(l.planes[C]);if(E===0)return 0;E===1&&(p=!1)}return p?2:l.aabb.min[0]>this.max[0]||l.aabb.min[1]>this.max[1]||l.aabb.min[2]>this.max[2]||l.aabb.max[0]<this.min[0]||l.aabb.max[1]<this.min[1]||l.aabb.max[2]<this.min[2]?0:1}intersectsPlane(l){let p=l[3],C=l[3];for(let E=0;E<3;E++)l[E]>0?(p+=l[E]*this.min[E],C+=l[E]*this.max[E]):(C+=l[E]*this.min[E],p+=l[E]*this.max[E]);return p>=0?2:C<0?0:1}}class Fo{distanceToTile2d(l,p,C,E){const B=E.distanceX([l,p]),U=E.distanceY([l,p]);return Math.hypot(B,U)}getWrap(l,p,C){return C}getTileBoundingVolume(l,p,C,E){var B,U;let G=0,Z=0;if(E?.terrain){const ce=new a.Z(l.z,p,l.z,l.x,l.y),me=E.terrain.getMinMaxElevation(ce);G=(B=me.minElevation)!==null&&B!==void 0?B:Math.min(0,C),Z=(U=me.maxElevation)!==null&&U!==void 0?U:Math.max(0,C)}const ae=1<<l.z;return new as([p+l.x/ae,l.y/ae,G],[p+(l.x+1)/ae,(l.y+1)/ae,Z])}allowVariableZoom(l,p){const C=l.fov*(Math.abs(Math.cos(l.rollInRadians))*l.height+Math.abs(Math.sin(l.rollInRadians))*l.width)/l.height,E=a.ah(78.5-C/2,0,60);return!!p.terrain||l.pitch>E}allowWorldCopies(){return!0}prepareNextFrame(){}}class _o{constructor(l,p,C){this.points=l,this.planes=p,this.aabb=C}static fromInvProjectionMatrix(l,p=1,C=0,E,B){const U=B?[[6,5,4],[0,1,2],[0,3,7],[2,1,5],[3,2,6],[0,4,5]]:[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],G=Math.pow(2,C),Z=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((ge=>(function(Pe,Ne,Ze,Xe){const et=a.aw([],Pe,Ne),ot=1/et[3]/Ze*Xe;return a.aY(et,et,[ot,ot,1/et[3],ot])})(ge,l,p,G)));E&&(function(ge,Pe,Ne,Ze){const Xe=Ze?4:0,et=Ze?0:4;let ot=0;const ht=[],ut=[];for(let ct=0;ct<4;ct++){const wt=a.aU([],ge[ct+et],ge[ct+Xe]),Wt=a.aZ(wt);a.aR(wt,wt,1/Wt),ht.push(Wt),ut.push(wt)}for(let ct=0;ct<4;ct++){const wt=a.a_(ge[ct+Xe],ut[ct],Ne);ot=wt!==null&&wt>=0?Math.max(ot,wt):Math.max(ot,ht[ct])}const gt=(function(ct,wt){const Wt=a.aU([],ct[wt[0]],ct[wt[1]]),Lt=a.aU([],ct[wt[2]],ct[wt[1]]),Nt=[0,0,0,0];return a.aV(Nt,a.aW([],Wt,Lt)),Nt[3]=-a.aX(Nt,ct[wt[0]]),Nt})(ge,Pe),xt=(function(ct,wt){const Wt=a.a$(ct),Lt=a.b0([],ct,1/Wt),Nt=a.aU([],wt,a.aR([],Lt,a.aX(wt,Lt))),Gt=a.a$(Nt);if(Gt>0){const Bn=Math.sqrt(1-Lt[3]*Lt[3]),kn=a.aR([],Lt,-Lt[3]),cn=a.aS([],kn,a.aR([],Nt,Bn/Gt));return a.b1(wt,cn)}return null})(Ne,gt);if(xt!==null){const ct=xt/a.aX(ut[0],gt);ot=Math.min(ot,ct)}for(let ct=0;ct<4;ct++){const wt=Math.min(ot,ht[ct]);ge[ct+et]=[ge[ct+Xe][0]+ut[ct][0]*wt,ge[ct+Xe][1]+ut[ct][1]*wt,ge[ct+Xe][2]+ut[ct][2]*wt,1]}})(Z,U[0],E,B);const ae=U.map((ge=>{const Pe=a.aU([],Z[ge[0]],Z[ge[1]]),Ne=a.aU([],Z[ge[2]],Z[ge[1]]),Ze=a.aV([],a.aW([],Pe,Ne)),Xe=-a.aX(Ze,Z[ge[1]]);return Ze.concat(Xe)})),ce=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],me=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const ge of Z)for(let Pe=0;Pe<3;Pe++)ce[Pe]=Math.min(ce[Pe],ge[Pe]),me[Pe]=Math.max(me[Pe],ge[Pe]);return new _o(Z,ae,new as(ce,me))}}class Ua{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(l){this._helper.setMinZoom(l)}setMaxZoom(l){this._helper.setMaxZoom(l)}setMinPitch(l){this._helper.setMinPitch(l)}setMaxPitch(l){this._helper.setMaxPitch(l)}setRenderWorldCopies(l){this._helper.setRenderWorldCopies(l)}setBearing(l){this._helper.setBearing(l)}setPitch(l){this._helper.setPitch(l)}setRoll(l){this._helper.setRoll(l)}setFov(l){this._helper.setFov(l)}setZoom(l){this._helper.setZoom(l)}setCenter(l){this._helper.setCenter(l)}setElevation(l){this._helper.setElevation(l)}setMinElevationForCurrentTile(l){this._helper.setMinElevationForCurrentTile(l)}setPadding(l){this._helper.setPadding(l)}interpolatePadding(l,p,C){return this._helper.interpolatePadding(l,p,C)}isPaddingEqual(l){return this._helper.isPaddingEqual(l)}resize(l,p,C=!0){this._helper.resize(l,p,C)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(l){this._helper.setMaxBounds(l)}overrideNearFarZ(l,p){this._helper.overrideNearFarZ(l,p)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(l){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),l)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(l,p){}constructor(l,p,C,E,B){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this._helper=new fo({calcMatrices:()=>{this._calcMatrices()},getConstrained:(U,G)=>this.getConstrained(U,G)},l,p,C,E,B),this._coveringTilesDetailsProvider=new Fo}clone(){const l=new Ua;return l.apply(this),l}apply(l,p,C){this._helper.apply(l,p,C)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(l){const p=[new a.b2(0,l)];if(this._helper._renderWorldCopies){const C=this.screenPointToMercatorCoordinate(new a.P(0,0)),E=this.screenPointToMercatorCoordinate(new a.P(this._helper._width,0)),B=this.screenPointToMercatorCoordinate(new a.P(this._helper._width,this._helper._height)),U=this.screenPointToMercatorCoordinate(new a.P(0,this._helper._height)),G=Math.floor(Math.min(C.x,E.x,B.x,U.x)),Z=Math.floor(Math.max(C.x,E.x,B.x,U.x)),ae=1;for(let ce=G-ae;ce<=Z+ae;ce++)ce!==0&&p.push(new a.b2(ce,l))}return p}getCameraFrustum(){return _o.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(l){const p=this.screenPointToLocation(this.centerPoint,l),C=l?l.getElevationForLngLatZoom(p,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(C)}setLocationAtPoint(l,p){const C=a.aj(this.elevation,this.center.lat),E=this.screenPointToMercatorCoordinateAtZ(p,C),B=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,C),U=a.a1.fromLngLat(l),G=new a.a1(U.x-(E.x-B.x),U.y-(E.y-B.y));this.setCenter(G?.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(l,p){return p?this.coordinatePoint(a.a1.fromLngLat(l),p.getElevationForLngLatZoom(l,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(a.a1.fromLngLat(l))}screenPointToLocation(l,p){var C;return(C=this.screenPointToMercatorCoordinate(l,p))===null||C===void 0?void 0:C.toLngLat()}screenPointToMercatorCoordinate(l,p){if(p){const C=p.pointCoordinate(l);if(C!=null)return C}return this.screenPointToMercatorCoordinateAtZ(l)}screenPointToMercatorCoordinateAtZ(l,p){const C=p||0,E=[l.x,l.y,0,1],B=[l.x,l.y,1,1];a.aw(E,E,this._pixelMatrixInverse),a.aw(B,B,this._pixelMatrixInverse);const U=E[3],G=B[3],Z=E[1]/U,ae=B[1]/G,ce=E[2]/U,me=B[2]/G,ge=ce===me?0:(C-ce)/(me-ce);return new a.a1(a.C.number(E[0]/U,B[0]/G,ge)/this.worldSize,a.C.number(Z,ae,ge)/this.worldSize,C)}coordinatePoint(l,p=0,C=this._pixelMatrix){const E=[l.x*this.worldSize,l.y*this.worldSize,p,1];return a.aw(E,E,C),new a.P(E[0]/E[3],E[1]/E[3])}getBounds(){const l=Math.max(0,this._helper._height/2-ye(this));return new it().extend(this.screenPointToLocation(new a.P(0,l))).extend(this.screenPointToLocation(new a.P(this._helper._width,l))).extend(this.screenPointToLocation(new a.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new a.P(0,this._helper._height)))}isPointOnMapSurface(l,p){return p?p.pointCoordinate(l)!=null:l.y>this.height/2-ye(this)}calculatePosMatrix(l,p=!1,C){var E;const B=(E=l.key)!==null&&E!==void 0?E:a.b3(l.wrap,l.canonical.z,l.canonical.z,l.canonical.x,l.canonical.y),U=p?this._alignedPosMatrixCache:this._posMatrixCache;if(U.has(B)){const ae=U.get(B);return C?ae.f32:ae.f64}const G=Be(l,this.worldSize);a.O(G,p?this._alignedProjMatrix:this._viewProjMatrix,G);const Z={f64:G,f32:new Float32Array(G)};return U.set(B,Z),C?Z.f32:Z.f64}calculateFogMatrix(l){const p=l.key,C=this._fogMatrixCacheF32;if(C.has(p))return C.get(p);const E=Be(l,this.worldSize);return a.O(E,this._fogMatrix,E),C.set(p,new Float32Array(E)),C.get(p)}getConstrained(l,p){p=a.ah(+p,this.minZoom,this.maxZoom);const C={center:new a.S(l.lng,l.lat),zoom:p};let E=this._helper._lngRange;if(!this._helper._renderWorldCopies&&E===null){const ht=179.9999999999;E=[-ht,ht]}const B=this.tileSize*a.af(C.zoom);let U=0,G=B,Z=0,ae=B,ce=0,me=0;const{x:ge,y:Pe}=this.size;if(this._helper._latRange){const ht=this._helper._latRange;U=a.U(ht[1])*B,G=a.U(ht[0])*B,G-U<Pe&&(ce=Pe/(G-U))}E&&(Z=a.aO(a.V(E[0])*B,0,B),ae=a.aO(a.V(E[1])*B,0,B),ae<Z&&(ae+=B),ae-Z<ge&&(me=ge/(ae-Z)));const{x:Ne,y:Ze}=Ve(B,l);let Xe,et;const ot=Math.max(me||0,ce||0);if(ot){const ht=new a.P(me?(ae+Z)/2:Ne,ce?(G+U)/2:Ze);return C.center=rt(B,ht).wrap(),C.zoom+=a.ak(ot),C}if(this._helper._latRange){const ht=Pe/2;Ze-ht<U&&(et=U+ht),Ze+ht>G&&(et=G-ht)}if(E){const ht=(Z+ae)/2;let ut=Ne;this._helper._renderWorldCopies&&(ut=a.aO(Ne,ht-B/2,ht+B/2));const gt=ge/2;ut-gt<Z&&(Xe=Z+gt),ut+gt>ae&&(Xe=ae-gt)}if(Xe!==void 0||et!==void 0){const ht=new a.P(Xe??Ne,et??Ze);C.center=rt(B,ht).wrap()}return C}calculateCenterFromCameraLngLatAlt(l,p,C,E){return this._helper.calculateCenterFromCameraLngLatAlt(l,p,C,E)}_calculateNearFarZIfNeeded(l,p,C){if(!this._helper.autoCalculateNearFarZ)return;const E=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),B=l-E*this._helper._pixelPerMeter/Math.cos(p),U=E<0?B:l,G=Math.PI/2+this.pitchInRadians,Z=a.ae(this.fov)*(Math.abs(Math.cos(a.ae(this.roll)))*this.height+Math.abs(Math.sin(a.ae(this.roll)))*this.width)/this.height*(.5+C.y/this.height),ae=Math.sin(Z)*U/Math.sin(a.ah(Math.PI-G-Z,.01,Math.PI-.01)),ce=ye(this),me=Math.atan(ce/this._helper.cameraToCenterDistance),ge=a.ae(.75),Pe=me>ge?2*me*(.5+C.y/(2*ce)):ge,Ne=Math.sin(Pe)*U/Math.sin(a.ah(Math.PI-G-Pe,.01,Math.PI-.01)),Ze=Math.min(ae,Ne);this._helper._farZ=1.01*(Math.cos(Math.PI/2-p)*Ze+U),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const l=this.centerOffset,p=Ve(this.worldSize,this.center),C=p.x,E=p.y;this._helper._pixelPerMeter=a.aj(1,this.center.lat)*this.worldSize;const B=a.ae(Math.min(this.pitch,Le)),U=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(B));let G;this._calculateNearFarZIfNeeded(U,B,l),G=new Float64Array(16),a.b4(G,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),a.aq(this._invProjMatrix,G),G[8]=2*-l.x/this._helper._width,G[9]=2*l.y/this._helper._height,this._projectionMatrix=a.b5(G),a.N(G,G,[1,-1,1]),a.M(G,G,[0,0,-this._helper.cameraToCenterDistance]),a.b6(G,G,-this.rollInRadians),a.b7(G,G,this.pitchInRadians),a.b6(G,G,-this.bearingInRadians),a.M(G,G,[-C,-E,0]),this._mercatorMatrix=a.N([],G,[this.worldSize,this.worldSize,this.worldSize]),a.N(G,G,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=a.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,G),a.M(G,G,[0,0,-this.elevation]),this._viewProjMatrix=G,this._invViewProjMatrix=a.aq([],G);const Z=[0,0,-1,1];a.aw(Z,Z,this._invViewProjMatrix),this._cameraPosition=[Z[0]/Z[3],Z[1]/Z[3],Z[2]/Z[3]],this._fogMatrix=new Float64Array(16),a.b4(this._fogMatrix,this.fovInRadians,this.width/this.height,U,this._helper._farZ),this._fogMatrix[8]=2*-l.x/this.width,this._fogMatrix[9]=2*l.y/this.height,a.N(this._fogMatrix,this._fogMatrix,[1,-1,1]),a.M(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),a.b6(this._fogMatrix,this._fogMatrix,-this.rollInRadians),a.b7(this._fogMatrix,this._fogMatrix,this.pitchInRadians),a.b6(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),a.M(this._fogMatrix,this._fogMatrix,[-C,-E,0]),a.N(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),a.M(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=a.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,G);const ae=this._helper._width%2/2,ce=this._helper._height%2/2,me=Math.cos(this.bearingInRadians),ge=Math.sin(-this.bearingInRadians),Pe=C-Math.round(C)+me*ae+ge*ce,Ne=E-Math.round(E)+me*ce+ge*ae,Ze=new Float64Array(G);if(a.M(Ze,Ze,[Pe>.5?Pe-1:Pe,Ne>.5?Ne-1:Ne,0]),this._alignedProjMatrix=Ze,G=a.aq(new Float64Array(16),this._pixelMatrix),!G)throw new Error("failed to invert matrix");this._pixelMatrixInverse=G,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const l=this.screenPointToMercatorCoordinate(new a.P(0,0)),p=[l.x*this.worldSize,l.y*this.worldSize,0,1];return a.aw(p,p,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const l=a.aj(1,this.center.lat)*this.worldSize;return v(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/l).toLngLat()}lngLatToCameraDepth(l,p){const C=a.a1.fromLngLat(l),E=[C.x*this.worldSize,C.y*this.worldSize,p,1];return a.aw(E,E,this._viewProjMatrix),E[2]/E[3]}getProjectionData(l){const{overscaledTileID:p,aligned:C,applyTerrainMatrix:E}=l,B=this._helper.getMercatorTileCoordinates(p),U=p?this.calculatePosMatrix(p,C,!0):null;let G;return G=p&&p.terrainRttPosMatrix32f&&E?p.terrainRttPosMatrix32f:U||a.b8(),{mainMatrix:G,tileMercatorCoords:B,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:G}}isLocationOccluded(l){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(l,p,C){return 1}transformLightDirection(l){return a.aT(l)}getRayDirectionFromPixel(l){throw new Error("Not implemented.")}projectTileCoordinates(l,p,C,E){const B=this.calculatePosMatrix(C);let U;E?(U=[l,p,E(l,p),1],a.aw(U,U,B)):(U=[l,p,0,1],Ko(U,U,B));const G=U[3];return{point:new a.P(U[0]/G,U[1]/G),signedDistanceFromCamera:G,isOccluded:!1}}populateCache(l){for(const p of l)this.calculatePosMatrix(p)}getMatrixForModel(l,p){const C=a.a1.fromLngLat(l,p),E=C.meterInMercatorCoordinateUnits(),B=a.b9();return a.M(B,B,[C.x,C.y,C.z]),a.b6(B,B,Math.PI),a.b7(B,B,Math.PI/2),a.N(B,B,[-E,E,E]),B}getProjectionDataForCustomLayer(l=!0){const p=new a.Z(0,0,0,0,0),C=this.getProjectionData({overscaledTileID:p,applyGlobeMatrix:l}),E=Be(p,this.worldSize);a.O(E,this._viewProjMatrix,E),C.tileMercatorCoords=[0,0,1,1];const B=[a.$,a.$,this.worldSize/this._helper.pixelsPerMeter],U=a.ba();return a.N(U,E,B),C.fallbackMatrix=U,C.mainMatrix=U,C}getFastPathSimpleProjectionMatrix(l){return this.calculatePosMatrix(l)}}function So(){a.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function ea(O){if(O.useSlerp)if(O.k<1){const l=a.bb(O.startEulerAngles.roll,O.startEulerAngles.pitch,O.startEulerAngles.bearing),p=a.bb(O.endEulerAngles.roll,O.endEulerAngles.pitch,O.endEulerAngles.bearing),C=new Float64Array(4);a.bc(C,l,p,O.k);const E=a.bd(C);O.tr.setRoll(E.roll),O.tr.setPitch(E.pitch),O.tr.setBearing(E.bearing)}else O.tr.setRoll(O.endEulerAngles.roll),O.tr.setPitch(O.endEulerAngles.pitch),O.tr.setBearing(O.endEulerAngles.bearing);else O.tr.setRoll(a.C.number(O.startEulerAngles.roll,O.endEulerAngles.roll,O.k)),O.tr.setPitch(a.C.number(O.startEulerAngles.pitch,O.endEulerAngles.pitch,O.k)),O.tr.setBearing(a.C.number(O.startEulerAngles.bearing,O.endEulerAngles.bearing,O.k))}function oo(O,l,p,C,E){const B=E.padding,U=Ve(E.worldSize,p.getNorthWest()),G=Ve(E.worldSize,p.getNorthEast()),Z=Ve(E.worldSize,p.getSouthEast()),ae=Ve(E.worldSize,p.getSouthWest()),ce=a.ae(-C),me=U.rotate(ce),ge=G.rotate(ce),Pe=Z.rotate(ce),Ne=ae.rotate(ce),Ze=new a.P(Math.max(me.x,ge.x,Ne.x,Pe.x),Math.max(me.y,ge.y,Ne.y,Pe.y)),Xe=new a.P(Math.min(me.x,ge.x,Ne.x,Pe.x),Math.min(me.y,ge.y,Ne.y,Pe.y)),et=Ze.sub(Xe),ot=(E.width-(B.left+B.right+l.left+l.right))/et.x,ht=(E.height-(B.top+B.bottom+l.top+l.bottom))/et.y;if(ht<0||ot<0)return void So();const ut=Math.min(a.ak(E.scale*Math.min(ot,ht)),O.maxZoom),gt=a.P.convert(O.offset),xt=new a.P((l.left-l.right)/2,(l.top-l.bottom)/2).rotate(a.ae(C)),ct=gt.add(xt).mult(E.scale/a.af(ut));return{center:rt(E.worldSize,U.add(Z).div(2).sub(ct)),zoom:ut,bearing:C}}class Ka{get useGlobeControls(){return!1}handlePanInertia(l,p){const C=l.mag(),E=Math.abs(ye(p));return{easingOffset:l.mult(Math.min(.75*E/C,1)),easingCenter:p.center}}handleMapControlsRollPitchBearingZoom(l,p){l.bearingDelta&&p.setBearing(p.bearing+l.bearingDelta),l.pitchDelta&&p.setPitch(p.pitch+l.pitchDelta),l.rollDelta&&p.setRoll(p.roll+l.rollDelta),l.zoomDelta&&p.setZoom(p.zoom+l.zoomDelta)}handleMapControlsPan(l,p,C){l.around.distSqr(p.centerPoint)<.01||p.setLocationAtPoint(C,l.around)}cameraForBoxAndBearing(l,p,C,E,B){return oo(l,p,C,E,B)}handleJumpToCenterZoom(l,p){l.zoom!==(p.zoom!==void 0?+p.zoom:l.zoom)&&l.setZoom(+p.zoom),p.center!==void 0&&l.setCenter(a.S.convert(p.center))}handleEaseTo(l,p){const C=l.zoom,E=l.padding,B={roll:l.roll,pitch:l.pitch,bearing:l.bearing},U={roll:p.roll===void 0?l.roll:p.roll,pitch:p.pitch===void 0?l.pitch:p.pitch,bearing:p.bearing===void 0?l.bearing:p.bearing},G=p.zoom!==void 0,Z=!l.isPaddingEqual(p.padding);let ae=!1;const ce=G?+p.zoom:l.zoom;let me=l.centerPoint.add(p.offsetAsPoint);const ge=l.screenPointToLocation(me),{center:Pe,zoom:Ne}=l.getConstrained(a.S.convert(p.center||ge),ce??C);Rl(l,Pe);const Ze=Ve(l.worldSize,ge),Xe=Ve(l.worldSize,Pe).sub(Ze),et=a.af(Ne-C);return ae=Ne!==C,{easeFunc:ot=>{if(ae&&l.setZoom(a.C.number(C,Ne,ot)),a.be(B,U)||ea({startEulerAngles:B,endEulerAngles:U,tr:l,k:ot,useSlerp:B.roll!=U.roll}),Z&&(l.interpolatePadding(E,p.padding,ot),me=l.centerPoint.add(p.offsetAsPoint)),p.around)l.setLocationAtPoint(p.around,p.aroundPoint);else{const ht=a.af(l.zoom-C),ut=Ne>C?Math.min(2,et):Math.max(.5,et),gt=Math.pow(ut,1-ot),xt=rt(l.worldSize,Ze.add(Xe.mult(ot*gt)).mult(ht));l.setLocationAtPoint(l.renderWorldCopies?xt.wrap():xt,me)}},isZooming:ae,elevationCenter:Pe}}handleFlyTo(l,p){const C=p.zoom!==void 0,E=l.zoom,B=l.getConstrained(a.S.convert(p.center||p.locationAtOffset),C?+p.zoom:E),U=B.center,G=B.zoom;Rl(l,U);const Z=Ve(l.worldSize,p.locationAtOffset),ae=Ve(l.worldSize,U).sub(Z),ce=ae.mag(),me=a.af(G-E);let ge;if(p.minZoom!==void 0){const Pe=Math.min(+p.minZoom,E,G),Ne=l.getConstrained(U,Pe).zoom;ge=a.af(Ne-E)}return{easeFunc:(Pe,Ne,Ze,Xe)=>{l.setZoom(Pe===1?G:E+a.ak(Ne));const et=Pe===1?U:rt(l.worldSize,Z.add(ae.mult(Ze)).mult(Ne));l.setLocationAtPoint(l.renderWorldCopies?et.wrap():et,Xe)},scaleOfZoom:me,targetCenter:U,scaleOfMinZoom:ge,pixelPathLength:ce}}}class Nr{constructor(l,p,C){this.blendFunction=l,this.blendColor=p,this.mask=C}}Nr.Replace=[1,0],Nr.disabled=new Nr(Nr.Replace,a.bf.transparent,[!1,!1,!1,!1]),Nr.unblended=new Nr(Nr.Replace,a.bf.transparent,[!0,!0,!0,!0]),Nr.alphaBlended=new Nr([1,771],a.bf.transparent,[!0,!0,!0,!0]);const Gi=2305;class Ai{constructor(l,p,C){this.enable=l,this.mode=p,this.frontFace=C}}Ai.disabled=new Ai(!1,1029,Gi),Ai.backCCW=new Ai(!0,1029,Gi),Ai.frontCCW=new Ai(!0,1028,Gi);class X{constructor(l,p,C){this.func=l,this.mask=p,this.range=C}}X.ReadOnly=!1,X.ReadWrite=!0,X.disabled=new X(519,X.ReadOnly,[0,1]);const Ce=7680;class Qe{constructor(l,p,C,E,B,U){this.test=l,this.ref=p,this.mask=C,this.fail=E,this.depthFail=B,this.pass=U}}Qe.disabled=new Qe({func:519,mask:0},0,0,Ce,Ce,Ce);const Et=new WeakMap;function jn(O){var l;if(Et.has(O))return Et.get(O);{const p=(l=O.getParameter(O.VERSION))===null||l===void 0?void 0:l.startsWith("WebGL 2.0");return Et.set(O,p),p}}class On{get awaitingQuery(){return!!this._readbackQueue}constructor(l){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=l;const p=l.context,C=p.gl;this._texFormat=C.RGBA,this._texType=C.UNSIGNED_BYTE;const E=new a.aL;E.emplaceBack(-1,-1),E.emplaceBack(2,-1),E.emplaceBack(-1,2);const B=new a.aN;B.emplaceBack(0,1,2),this._fullscreenTriangle=new au(p.createVertexBuffer(E,aa.members),p.createIndexBuffer(B),a.aM.simpleSegment(0,0,E.length,B.length)),this._resultBuffer=new Uint8Array(4),p.activeTexture.set(C.TEXTURE1);const U=C.createTexture();C.bindTexture(C.TEXTURE_2D,U),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_S,C.CLAMP_TO_EDGE),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_T,C.CLAMP_TO_EDGE),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MIN_FILTER,C.NEAREST),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MAG_FILTER,C.NEAREST),C.texImage2D(C.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=p.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(U),jn(C)&&(this._pbo=C.createBuffer(),C.bindBuffer(C.PIXEL_PACK_BUFFER,this._pbo),C.bufferData(C.PIXEL_PACK_BUFFER,4,C.STREAM_READ),C.bindBuffer(C.PIXEL_PACK_BUFFER,null))}destroy(){const l=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),l.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(l,p){const C=this._updateCount;return this._readbackQueue?C>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():C>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(l,p),this._updateCount++,this._measuredError}_bindFramebuffer(){const l=this._cachedRenderContext.context,p=l.gl;l.activeTexture.set(p.TEXTURE1),p.bindTexture(p.TEXTURE_2D,this._fbo.colorAttachment.get()),l.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(l,p){const C=this._cachedRenderContext.context,E=C.gl;if(this._bindFramebuffer(),C.viewport.set([0,0,this._texWidth,this._texHeight]),C.clear({color:a.bf.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(C,E.TRIANGLES,X.disabled,Qe.disabled,Nr.unblended,Ai.disabled,((B,U)=>({u_input:B,u_output_expected:U}))(l,p),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&jn(E)){E.bindBuffer(E.PIXEL_PACK_BUFFER,this._pbo),E.readBuffer(E.COLOR_ATTACHMENT0),E.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),E.bindBuffer(E.PIXEL_PACK_BUFFER,null);const B=E.fenceSync(E.SYNC_GPU_COMMANDS_COMPLETE,0);E.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:B}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const l=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&jn(l)){const p=l.clientWaitSync(this._readbackQueue.sync,0,0);if(p===l.WAIT_FAILED)return a.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(p===l.TIMEOUT_EXPIRED)return;l.bindBuffer(l.PIXEL_PACK_BUFFER,this._pbo),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),l.bindBuffer(l.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),l.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=On._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(l){let p=0;return p+=l[0]/256,p+=l[1]/65536,p+=l[2]/16777216,l[3]<127&&(p=-p),p/128}}const _i=a.$/128;function zi(O,l){const p=O.granularity!==void 0?Math.max(O.granularity,1):1,C=p+(O.generateBorders?2:0),E=p+(O.extendToNorthPole||O.generateBorders?1:0)+(O.extendToSouthPole||O.generateBorders?1:0),B=C+1,U=E+1,G=O.generateBorders?-1:0,Z=O.generateBorders||O.extendToNorthPole?-1:0,ae=p+(O.generateBorders?1:0),ce=p+(O.generateBorders||O.extendToSouthPole?1:0),me=B*U,ge=C*E*6,Pe=B*U>65536;if(Pe&&l==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const Ne=Pe||l==="32bit",Ze=new Int16Array(2*me);let Xe=0;for(let ht=Z;ht<=ce;ht++)for(let ut=G;ut<=ae;ut++){let gt=ut/p*a.$;ut===-1&&(gt=-_i),ut===p+1&&(gt=a.$+_i);let xt=ht/p*a.$;ht===-1&&(xt=O.extendToNorthPole?a.bh:-_i),ht===p+1&&(xt=O.extendToSouthPole?a.bi:a.$+_i),Ze[Xe++]=gt,Ze[Xe++]=xt}const et=Ne?new Uint32Array(ge):new Uint16Array(ge);let ot=0;for(let ht=0;ht<E;ht++)for(let ut=0;ut<C;ut++){const gt=ut+1+ht*B,xt=ut+(ht+1)*B,ct=ut+1+(ht+1)*B;et[ot++]=ut+ht*B,et[ot++]=xt,et[ot++]=gt,et[ot++]=gt,et[ot++]=xt,et[ot++]=ct}return{vertices:Ze.buffer.slice(0),indices:et.buffer.slice(0),uses32bitIndices:Ne}}const ki=new a.aK({fill:new a.bj(128,2),line:new a.bj(512,0),tile:new a.bj(128,32),stencil:new a.bj(128,1),circle:3});class Ei{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return Js.projectionGlobe}get vertexShaderPreludeCode(){return Js.projectionMercator.vertexSource}get subdivisionGranularity(){return ki}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(l){this._errorMeasurement||(this._errorMeasurement=new On(l));const p=a.U(this._errorQueryLatitudeDegrees),C=2*Math.atan(Math.exp(Math.PI-p*Math.PI*2))-.5*Math.PI,E=this._errorMeasurement.updateErrorLoop(p,C),B=M.now();E!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=E,this._errorMeasurementLastChangeTime=B);const U=Math.min(Math.max((B-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=a.bk(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,a.bl(U))}_getMeshKey(l){return`${l.granularity.toString(36)}_${l.generateBorders?"b":""}${l.extendToNorthPole?"n":""}${l.extendToSouthPole?"s":""}`}getMeshFromTileID(l,p,C,E,B){const U=(B==="stencil"?ki.stencil:ki.tile).getGranularityForZoomLevel(p.z);return this._getMesh(l,{granularity:U,generateBorders:C,extendToNorthPole:p.y===0&&E,extendToSouthPole:p.y===(1<<p.z)-1&&E})}_getMesh(l,p){const C=this._getMeshKey(p);if(C in this._tileMeshCache)return this._tileMeshCache[C];const E=(function(B,U){const G=zi(U,"16bit"),Z=a.aL.deserialize({arrayBuffer:G.vertices,length:G.vertices.byteLength/2/2}),ae=a.aN.deserialize({arrayBuffer:G.indices,length:G.indices.byteLength/2/3});return new au(B.createVertexBuffer(Z,aa.members),B.createIndexBuffer(ae),a.aM.simpleSegment(0,0,Z.length,ae.length))})(l,p);return this._tileMeshCache[C]=E,E}recalculate(l){}hasTransition(){const l=M.now();let p=!1;return p=p||(l-this._errorMeasurementLastChangeTime)/1e3<.7,p=p||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,p}setErrorQueryLatitudeDegrees(l){this._errorQueryLatitudeDegrees=l}}const Cr=new a.r({type:new a.D(a.v.projection.type)});class so extends a.E{constructor(l){super(),this._transitionable=new a.t(Cr,void 0),this.setProjection(l),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new a.F(0)),this._mercatorProjection=new Pa,this._verticalPerspectiveProjection=new Ei}get transitionState(){const l=this.properties.get("type");if(typeof l=="string"&&l==="mercator")return 0;if(typeof l=="string"&&l==="vertical-perspective")return 1;if(l instanceof a.bm){if(l.from==="vertical-perspective"&&l.to==="mercator")return 1-l.transition;if(l.from==="mercator"&&l.to==="vertical-perspective")return l.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(l){this._mercatorProjection.updateGPUdependent(l),this._verticalPerspectiveProjection.updateGPUdependent(l)}getMeshFromTileID(l,p,C,E,B){return this.currentProjection.getMeshFromTileID(l,p,C,E,B)}setProjection(l){this._transitionable.setValue("type",l?.type||"mercator")}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}setErrorQueryLatitudeDegrees(l){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(l),this._mercatorProjection.setErrorQueryLatitudeDegrees(l)}}function yr(O){const l=ys(O.worldSize,O.center.lat);return 2*Math.PI*l}function Ji(O,l,p,C,E){const B=1/(1<<E),U=l/a.$*B+C*B,G=a.bo((O/a.$*B+p*B)*Math.PI*2+Math.PI,2*Math.PI),Z=2*Math.atan(Math.exp(Math.PI-U*Math.PI*2))-.5*Math.PI,ae=Math.cos(Z),ce=new Float64Array(3);return ce[0]=Math.sin(G)*ae,ce[1]=Math.sin(Z),ce[2]=Math.cos(G)*ae,ce}function rr(O){return(function(l,p){const C=Math.cos(p),E=new Float64Array(3);return E[0]=Math.sin(l)*C,E[1]=Math.sin(p),E[2]=Math.cos(l)*C,E})(O.lng*Math.PI/180,O.lat*Math.PI/180)}function ys(O,l){return O/(2*Math.PI)/Math.cos(l*Math.PI/180)}function Xo(O){const l=Math.asin(O[1])/Math.PI*180,p=Math.sqrt(O[0]*O[0]+O[2]*O[2]);if(p>1e-6){const C=O[0]/p,E=Math.acos(O[2]/p),B=(C>0?E:-E)/Math.PI*180;return new a.S(a.aO(B,-180,180),l)}return new a.S(0,l)}function Os(O){return Math.cos(O*Math.PI/180)}function Bs(O,l){const p=Os(O),C=Os(l);return a.ak(C/p)}function lu(O,l){const p=O.rotate(l.bearingInRadians),C=l.zoom+Bs(l.center.lat,0),E=a.bk(1/Os(l.center.lat),1/Os(Math.min(Math.abs(l.center.lat),60)),a.bn(C,7,3,0,1)),B=360/yr({worldSize:l.worldSize,center:{lat:l.center.lat}});return new a.S(l.center.lng-p.x*B*E,a.ah(l.center.lat+p.y*B,-a.ai,a.ai))}function vs(O){const l=.5*O,p=Math.sin(l),C=Math.cos(l);return Math.log(p+C)-Math.log(C-p)}function _1(O,l,p,C){const E=O.lat+p*C;if(Math.abs(p)>1){const B=(Math.sign(O.lat+p)!==Math.sign(O.lat)?-Math.abs(O.lat):Math.abs(O.lat))*Math.PI/180,U=Math.abs(O.lat+p)*Math.PI/180,G=vs(B+C*(U-B)),Z=vs(B),ae=vs(U);return new a.S(O.lng+l*((G-Z)/(ae-Z)),E)}return new a.S(O.lng+l*C,E)}class rc{constructor(l){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._boundingVolumeFactory=l}swapBuffers(){if(!this._hadAnyChanges)return;const l=this._cachePrevious;this._cachePrevious=this._cache,this._cache=l,this._cache.clear(),this._hadAnyChanges=!1}getTileBoundingVolume(l,p,C,E){const B=`${l.z}_${l.x}_${l.y}_${E?.terrain?"t":""}`,U=this._cache.get(B);if(U)return U;const G=this._cachePrevious.get(B);if(G)return this._cache.set(B,G),G;const Z=this._boundingVolumeFactory(l,p,C,E);return this._cache.set(B,Z),this._hadAnyChanges=!0,Z}}class qa{constructor(l,p,C,E){this.min=C,this.max=E,this.points=l,this.planes=p}static fromAabb(l,p){const C=[];for(let E=0;E<8;E++)C.push([1&~E?l[0]:p[0],(E>>1&1)==1?p[1]:l[1],(E>>2&1)==1?p[2]:l[2]]);return new qa(C,[[-1,0,0,p[0]],[1,0,0,-l[0]],[0,-1,0,p[1]],[0,1,0,-l[1]],[0,0,-1,p[2]],[0,0,1,-l[2]]],l,p)}static fromCenterSizeAngles(l,p,C){const E=a.br([],C[0],C[1],C[2]),B=a.bs([],[p[0],0,0],E),U=a.bs([],[0,p[1],0],E),G=a.bs([],[0,0,p[2]],E),Z=[...l],ae=[...l];for(let me=0;me<8;me++)for(let ge=0;ge<3;ge++){const Pe=l[ge]+B[ge]*(1&~me?-1:1)+U[ge]*((me>>1&1)==1?1:-1)+G[ge]*((me>>2&1)==1?1:-1);Z[ge]=Math.min(Z[ge],Pe),ae[ge]=Math.max(ae[ge],Pe)}const ce=[];for(let me=0;me<8;me++){const ge=[...l];a.aS(ge,ge,a.aR([],B,1&~me?-1:1)),a.aS(ge,ge,a.aR([],U,(me>>1&1)==1?1:-1)),a.aS(ge,ge,a.aR([],G,(me>>2&1)==1?1:-1)),ce.push(ge)}return new qa(ce,[[...B,-a.aX(B,ce[0])],[...U,-a.aX(U,ce[0])],[...G,-a.aX(G,ce[0])],[-B[0],-B[1],-B[2],-a.aX(B,ce[7])],[-U[0],-U[1],-U[2],-a.aX(U,ce[7])],[-G[0],-G[1],-G[2],-a.aX(G,ce[7])]],Z,ae)}intersectsFrustum(l){let p=!0;const C=this.points.length,E=this.planes.length,B=l.planes.length,U=l.points.length;for(let G=0;G<B;G++){const Z=l.planes[G];let ae=0;for(let ce=0;ce<C;ce++){const me=this.points[ce];Z[0]*me[0]+Z[1]*me[1]+Z[2]*me[2]+Z[3]>=0&&ae++}if(ae===0)return 0;ae<C&&(p=!1)}if(p)return 2;for(let G=0;G<E;G++){const Z=this.planes[G];let ae=0;for(let ce=0;ce<U;ce++){const me=l.points[ce];Z[0]*me[0]+Z[1]*me[1]+Z[2]*me[2]+Z[3]>=0&&ae++}if(ae===0)return 0}return 1}intersectsPlane(l){const p=this.points.length;let C=0;for(let E=0;E<p;E++){const B=this.points[E];l[0]*B[0]+l[1]*B[1]+l[2]*B[2]+l[3]>=0&&C++}return C===p?2:C===0?0:1}}function Td(O,l,p){const C=O-l;return C<0?-C:Math.max(0,C-p)}function Ya(O,l,p,C,E){const B=O-p;let U;return U=B<0?Math.min(-B,1+B-E):B>1?Math.min(Math.max(B-E,0),1-B):0,Math.max(U,Td(l,C,E))}class Rd{constructor(){this._boundingVolumeCache=new rc(this._computeTileBoundingVolume)}prepareNextFrame(){this._boundingVolumeCache.swapBuffers()}distanceToTile2d(l,p,C,E){const B=1<<C.z,U=1/B,G=C.x/B,Z=C.y/B;let ae=2;return ae=Math.min(ae,Ya(l,p,G,Z,U)),ae=Math.min(ae,Ya(l,p,G+.5,-Z-U,U)),ae=Math.min(ae,Ya(l,p,G+.5,2-Z-U,U)),ae}getWrap(l,p,C){const E=1<<p.z,B=1/E,U=p.x/E,G=Td(l.x,U,B),Z=Td(l.x,U-1,B),ae=Td(l.x,U+1,B),ce=Math.min(G,Z,ae);return ce===ae?1:ce===Z?-1:0}allowVariableZoom(l,p){return mt(l,p)>4}allowWorldCopies(){return!1}getTileBoundingVolume(l,p,C,E){return this._boundingVolumeCache.getTileBoundingVolume(l,p,C,E)}_computeTileBoundingVolume(l,p,C,E){var B,U;let G=0,Z=0;if(E?.terrain){const ae=new a.Z(l.z,p,l.z,l.x,l.y),ce=E.terrain.getMinMaxElevation(ae);G=(B=ce.minElevation)!==null&&B!==void 0?B:Math.min(0,C),Z=(U=ce.maxElevation)!==null&&U!==void 0?U:Math.max(0,C)}if(G/=a.bu,Z/=a.bu,G+=1,Z+=1,l.z<=0)return qa.fromAabb([-Z,-Z,-Z],[Z,Z,Z]);if(l.z===1)return qa.fromAabb([l.x===0?-Z:0,l.y===0?0:-Z,-Z],[l.x===0?0:Z,l.y===0?Z:0,Z]);{const ae=[Ji(0,0,l.x,l.y,l.z),Ji(a.$,0,l.x,l.y,l.z),Ji(a.$,a.$,l.x,l.y,l.z),Ji(0,a.$,l.x,l.y,l.z)],ce=[];for(const Nt of ae)ce.push(a.aR([],Nt,Z));if(Z!==G)for(const Nt of ae)ce.push(a.aR([],Nt,G));l.y===0&&ce.push([0,1,0]),l.y===(1<<l.z)-1&&ce.push([0,-1,0]);const me=[1,1,1],ge=[-1,-1,-1];for(const Nt of ce)for(let Gt=0;Gt<3;Gt++)me[Gt]=Math.min(me[Gt],Nt[Gt]),ge[Gt]=Math.max(ge[Gt],Nt[Gt]);const Pe=Ji(a.$/2,a.$/2,l.x,l.y,l.z),Ne=a.aW([],[0,1,0],Pe);a.aV(Ne,Ne);const Ze=a.aW([],Pe,Ne);a.aV(Ze,Ze);const Xe=a.aW([],ae[2],ae[1]);a.aV(Xe,Xe);const et=a.aW([],ae[0],ae[3]);a.aV(et,et),ce.push(a.aR([],Pe,Z)),l.y>=(1<<l.z)/2&&ce.push(a.aR([],Ji(a.$/2,0,l.x,l.y,l.z),Z)),l.y<(1<<l.z)/2&&ce.push(a.aR([],Ji(a.$/2,a.$,l.x,l.y,l.z),Z));const ot=Dd(Pe,ce),ht=Dd(Ze,ce),ut=[-Pe[0],-Pe[1],-Pe[2],ot.max],gt=[Pe[0],Pe[1],Pe[2],-ot.min],xt=[-Ze[0],-Ze[1],-Ze[2],ht.max],ct=[Ze[0],Ze[1],Ze[2],-ht.min],wt=[...Xe,0],Wt=[...et,0],Lt=[];return l.y===0?Lt.push(a.bt(Wt,wt,ut),a.bt(Wt,wt,gt)):Lt.push(a.bt(xt,wt,ut),a.bt(xt,wt,gt),a.bt(xt,Wt,ut),a.bt(xt,Wt,gt)),l.y===(1<<l.z)-1?Lt.push(a.bt(Wt,wt,ut),a.bt(Wt,wt,gt)):Lt.push(a.bt(ct,wt,ut),a.bt(ct,wt,gt),a.bt(ct,Wt,ut),a.bt(ct,Wt,gt)),new qa(Lt,[ut,gt,xt,ct,wt,Wt],me,ge)}}}function Dd(O,l){let p=1/0,C=-1/0;for(const E of l){const B=a.aX(O,E);p=Math.min(p,B),C=Math.max(C,B)}return{min:p,max:C}}class Jo{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(l){this._helper.setMinZoom(l)}setMaxZoom(l){this._helper.setMaxZoom(l)}setMinPitch(l){this._helper.setMinPitch(l)}setMaxPitch(l){this._helper.setMaxPitch(l)}setRenderWorldCopies(l){this._helper.setRenderWorldCopies(l)}setBearing(l){this._helper.setBearing(l)}setPitch(l){this._helper.setPitch(l)}setRoll(l){this._helper.setRoll(l)}setFov(l){this._helper.setFov(l)}setZoom(l){this._helper.setZoom(l)}setCenter(l){this._helper.setCenter(l)}setElevation(l){this._helper.setElevation(l)}setMinElevationForCurrentTile(l){this._helper.setMinElevationForCurrentTile(l)}setPadding(l){this._helper.setPadding(l)}interpolatePadding(l,p,C){return this._helper.interpolatePadding(l,p,C)}isPaddingEqual(l){return this._helper.isPaddingEqual(l)}resize(l,p){this._helper.resize(l,p)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(l){this._helper.setMaxBounds(l)}overrideNearFarZ(l,p){this._helper.overrideNearFarZ(l,p)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(l){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),l)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(l){}constructor(){this._cachedClippingPlane=a.bv(),this._projectionMatrix=a.b9(),this._globeViewProjMatrix32f=a.b8(),this._globeViewProjMatrixNoCorrection=a.b9(),this._globeViewProjMatrixNoCorrectionInverted=a.b9(),this._globeProjMatrixInverted=a.b9(),this._cameraPosition=a.bp(),this._globeLatitudeErrorCorrectionRadians=0,this._helper=new fo({calcMatrices:()=>{this._calcMatrices()},getConstrained:(l,p)=>this.getConstrained(l,p)}),this._coveringTilesDetailsProvider=new Rd}clone(){const l=new Jo;return l.apply(this),l}apply(l,p){this._globeLatitudeErrorCorrectionRadians=p||0,this._helper.apply(l)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const l=a.bp();return l[0]=this._cameraPosition[0],l[1]=this._cameraPosition[1],l[2]=this._cameraPosition[2],l}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(l){const{overscaledTileID:p,applyGlobeMatrix:C}=l,E=this._helper.getMercatorTileCoordinates(p);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:E,clippingPlane:this._cachedClippingPlane,projectionTransition:C?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(l){const p=this.pitchInRadians,C=this.cameraToCenterDistance/l,E=Math.sin(p)*C,B=Math.cos(p)*C+1,U=1/Math.sqrt(E*E+B*B)*1;let G=-E,Z=B;const ae=Math.sqrt(G*G+Z*Z);G/=ae,Z/=ae;const ce=[0,G,Z];a.bw(ce,ce,[0,0,0],-this.bearingInRadians),a.bx(ce,ce,[0,0,0],-1*this.center.lat*Math.PI/180),a.by(ce,ce,[0,0,0],this.center.lng*Math.PI/180);const me=1/a.aZ(ce);return a.aR(ce,ce,me),[...ce,-U*me]}isLocationOccluded(l){return!this.isSurfacePointVisible(rr(l))}transformLightDirection(l){const p=this._helper._center.lng*Math.PI/180,C=this._helper._center.lat*Math.PI/180,E=Math.cos(C),B=[Math.sin(p)*E,Math.sin(C),Math.cos(p)*E],U=[B[2],0,-B[0]],G=[0,0,0];a.aW(G,U,B),a.aV(U,U),a.aV(G,G);const Z=[0,0,0];return a.aV(Z,[U[0]*l[0]+G[0]*l[1]+B[0]*l[2],U[1]*l[0]+G[1]*l[1]+B[1]*l[2],U[2]*l[0]+G[2]*l[1]+B[2]*l[2]]),Z}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(l,p,C){const E=(function(G,Z,ae){const ce=1/(1<<ae.z);return new a.a1(G/a.$*ce+ae.x*ce,Z/a.$*ce+ae.y*ce)})(l,p,C.canonical),B=(U=E.y,[a.bo(E.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-U*Math.PI*2))-.5*Math.PI]);var U;return this.getCircleRadiusCorrection()/Math.cos(B[1])}projectTileCoordinates(l,p,C,E){const B=C.canonical,U=Ji(l,p,B.x,B.y,B.z),G=1+(E?E(l,p):0)/a.bu,Z=[U[0]*G,U[1]*G,U[2]*G,1];a.aw(Z,Z,this._globeViewProjMatrixNoCorrection);const ae=this._cachedClippingPlane,ce=ae[0]*U[0]+ae[1]*U[1]+ae[2]*U[2]+ae[3]<0;return{point:new a.P(Z[0]/Z[3],Z[1]/Z[3]),signedDistanceFromCamera:Z[3],isOccluded:ce}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const l=ys(this.worldSize,this.center.lat),p=a.ba(),C=a.ba();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*l),a.b4(p,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const E=this.centerOffset;p[8]=2*-E.x/this._helper._width,p[9]=2*E.y/this._helper._height,this._projectionMatrix=a.b5(p),this._globeProjMatrixInverted=a.ba(),a.aq(this._globeProjMatrixInverted,p),a.M(p,p,[0,0,-this.cameraToCenterDistance]),a.b6(p,p,this.rollInRadians),a.b7(p,p,-this.pitchInRadians),a.b6(p,p,this.bearingInRadians),a.M(p,p,[0,0,-l]);const B=a.bp();B[0]=l,B[1]=l,B[2]=l,a.b7(C,p,this.center.lat*Math.PI/180),a.bz(C,C,-this.center.lng*Math.PI/180),a.N(C,C,B),this._globeViewProjMatrixNoCorrection=C,a.b7(p,p,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),a.bz(p,p,-this.center.lng*Math.PI/180),a.N(p,p,B),this._globeViewProjMatrix32f=new Float32Array(p),this._globeViewProjMatrixNoCorrectionInverted=a.ba(),a.aq(this._globeViewProjMatrixNoCorrectionInverted,C);const U=a.bp();this._cameraPosition=a.bp(),this._cameraPosition[2]=this.cameraToCenterDistance/l,a.bw(this._cameraPosition,this._cameraPosition,U,-this.rollInRadians),a.bx(this._cameraPosition,this._cameraPosition,U,this.pitchInRadians),a.bw(this._cameraPosition,this._cameraPosition,U,-this.bearingInRadians),a.aS(this._cameraPosition,this._cameraPosition,[0,0,1]),a.bx(this._cameraPosition,this._cameraPosition,U,-this.center.lat*Math.PI/180),a.by(this._cameraPosition,this._cameraPosition,U,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(l);const G=a.b5(this._globeViewProjMatrixNoCorrectionInverted);a.N(G,G,[1,1,-1]),this._cachedFrustum=_o.fromInvProjectionMatrix(G,1,0,this._cachedClippingPlane,!0)}calculateFogMatrix(l){a.w("calculateFogMatrix is not supported on globe projection.");const p=a.ba();return a.ag(p),p}getVisibleUnwrappedCoordinates(l){return[new a.b2(0,l)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(l){l&&a.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(l,p){if(!this._globeViewProjMatrixNoCorrection)return 1;const C=rr(l);a.aR(C,C,1+p/a.bu);const E=a.bv();return a.aw(E,[C[0],C[1],C[2],1],this._globeViewProjMatrixNoCorrection),E[2]/E[3]}populateCache(l){}getBounds(){const l=.5*this.width,p=.5*this.height,C=[new a.P(0,0),new a.P(l,0),new a.P(this.width,0),new a.P(this.width,p),new a.P(this.width,this.height),new a.P(l,this.height),new a.P(0,this.height),new a.P(0,p)],E=[];for(const me of C)E.push(this.unprojectScreenPoint(me));let B=0,U=0,G=0,Z=0;const ae=this.center;for(const me of E){const ge=a.bA(ae.lng,me.lng),Pe=a.bA(ae.lat,me.lat);ge<U&&(U=ge),ge>B&&(B=ge),Pe<Z&&(Z=Pe),Pe>G&&(G=Pe)}const ce=[ae.lng+U,ae.lat+Z,ae.lng+B,ae.lat+G];return this.isSurfacePointOnScreen([0,1,0])&&(ce[3]=90,ce[0]=-180,ce[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(ce[1]=-90,ce[0]=-180,ce[2]=180),new it(ce)}getConstrained(l,p){const C=a.ah(l.lat,-a.ai,a.ai),E=a.ah(+p,this.minZoom+Bs(0,C),this.maxZoom);return{center:new a.S(l.lng,C),zoom:E}}calculateCenterFromCameraLngLatAlt(l,p,C,E){return this._helper.calculateCenterFromCameraLngLatAlt(l,p,C,E)}setLocationAtPoint(l,p){const C=rr(this.unprojectScreenPoint(p)),E=rr(l),B=a.bp();a.bB(B);const U=a.bp();a.by(U,C,B,-this.center.lng*Math.PI/180),a.bx(U,U,B,this.center.lat*Math.PI/180);const G=E[0]*E[0]+E[2]*E[2],Z=U[0]*U[0];if(G<Z)return;const ae=Math.sqrt(G-Z),ce=-ae,me=a.bC(E[0],E[2],U[0],ae),ge=a.bC(E[0],E[2],U[0],ce),Pe=a.bp();a.by(Pe,E,B,-me);const Ne=a.bC(Pe[1],Pe[2],U[1],U[2]),Ze=a.bp();a.by(Ze,E,B,-ge);const Xe=a.bC(Ze[1],Ze[2],U[1],U[2]),et=.5*Math.PI,ot=Ne>=-et&&Ne<=et,ht=Xe>=-et&&Xe<=et;let ut,gt;if(ot&&ht){const Wt=this.center.lng*Math.PI/180,Lt=this.center.lat*Math.PI/180;a.bD(me,Wt)+a.bD(Ne,Lt)<a.bD(ge,Wt)+a.bD(Xe,Lt)?(ut=me,gt=Ne):(ut=ge,gt=Xe)}else if(ot)ut=me,gt=Ne;else{if(!ht)return;ut=ge,gt=Xe}const xt=ut/Math.PI*180,ct=gt/Math.PI*180,wt=this.center.lat;this.setCenter(new a.S(xt,a.ah(ct,-90,90))),this.setZoom(this.zoom+Bs(wt,this.center.lat))}locationToScreenPoint(l,p){const C=rr(l);if(p){const E=p.getElevationForLngLatZoom(l,this._helper._tileZoom);a.aR(C,C,1+E/a.bu)}return this._projectSurfacePointToScreen(C)}_projectSurfacePointToScreen(l){const p=a.bv();return a.aw(p,[...l,1],this._globeViewProjMatrixNoCorrection),p[0]/=p[3],p[1]/=p[3],new a.P((.5*p[0]+.5)*this.width,(.5*-p[1]+.5)*this.height)}screenPointToMercatorCoordinate(l,p){if(p){const C=p.pointCoordinate(l);if(C)return C}return a.a1.fromLngLat(this.unprojectScreenPoint(l))}screenPointToLocation(l,p){var C;return(C=this.screenPointToMercatorCoordinate(l,p))===null||C===void 0?void 0:C.toLngLat()}isPointOnMapSurface(l,p){const C=this._cameraPosition,E=this.getRayDirectionFromPixel(l);return!!this.rayPlanetIntersection(C,E)}getRayDirectionFromPixel(l){const p=a.bv();p[0]=l.x/this.width*2-1,p[1]=-1*(l.y/this.height*2-1),p[2]=1,p[3]=1,a.aw(p,p,this._globeViewProjMatrixNoCorrectionInverted),p[0]/=p[3],p[1]/=p[3],p[2]/=p[3];const C=a.bp();C[0]=p[0]-this._cameraPosition[0],C[1]=p[1]-this._cameraPosition[1],C[2]=p[2]-this._cameraPosition[2];const E=a.bp();return a.aV(E,C),E}isSurfacePointVisible(l){const p=this._cachedClippingPlane;return p[0]*l[0]+p[1]*l[1]+p[2]*l[2]+p[3]>=0}isSurfacePointOnScreen(l){if(!this.isSurfacePointVisible(l))return!1;const p=a.bv();return a.aw(p,[...l,1],this._globeViewProjMatrixNoCorrection),p[0]/=p[3],p[1]/=p[3],p[2]/=p[3],p[0]>-1&&p[0]<1&&p[1]>-1&&p[1]<1&&p[2]>-1&&p[2]<1}rayPlanetIntersection(l,p){const C=a.aX(l,p),E=a.bp(),B=a.bp();a.aR(B,p,C),a.aU(E,l,B);const U=1-a.aX(E,E);if(U<0)return null;const G=a.aX(l,l)-1,Z=-C+(C<0?1:-1)*Math.sqrt(U),ae=G/Z,ce=Z;return{tMin:Math.min(ae,ce),tMax:Math.max(ae,ce)}}unprojectScreenPoint(l){const p=this._cameraPosition,C=this.getRayDirectionFromPixel(l),E=this.rayPlanetIntersection(p,C);if(E){const ce=a.bp();a.aS(ce,p,[C[0]*E.tMin,C[1]*E.tMin,C[2]*E.tMin]);const me=a.bp();return a.aV(me,ce),Xo(me)}const B=this._cachedClippingPlane,U=B[0]*C[0]+B[1]*C[1]+B[2]*C[2],G=-a.b1(B,p)/U,Z=a.bp();if(G>0)a.aS(Z,p,[C[0]*G,C[1]*G,C[2]*G]);else{const ce=a.bp();a.aS(ce,p,[2*C[0],2*C[1],2*C[2]]);const me=a.b1(this._cachedClippingPlane,ce);a.aU(Z,ce,[this._cachedClippingPlane[0]*me,this._cachedClippingPlane[1]*me,this._cachedClippingPlane[2]*me])}const ae=(function(ce){const me=a.bp();return me[0]=ce[0]*-ce[3],me[1]=ce[1]*-ce[3],me[2]=ce[2]*-ce[3],{center:me,radius:Math.sqrt(1-ce[3]*ce[3])}})(B);return Xo((function(ce,me,ge){const Pe=a.bp();a.aU(Pe,ge,ce);const Ne=a.bp();return a.bq(Ne,ce,Pe,me/a.a$(Pe)),Ne})(ae.center,ae.radius,Z))}getMatrixForModel(l,p){const C=a.S.convert(l),E=1/a.bu,B=a.b9();return a.bz(B,B,C.lng/180*Math.PI),a.b7(B,B,-C.lat/180*Math.PI),a.M(B,B,[0,0,1+p/a.bu]),a.b7(B,B,.5*Math.PI),a.N(B,B,[E,E,E]),B}getProjectionDataForCustomLayer(l=!0){const p=this.getProjectionData({overscaledTileID:new a.Z(0,0,0,0,0),applyGlobeMatrix:l});return p.tileMercatorCoords=[0,0,1,1],p}getFastPathSimpleProjectionMatrix(l){}}class Dl{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(l){this._helper.setMinZoom(l)}setMaxZoom(l){this._helper.setMaxZoom(l)}setMinPitch(l){this._helper.setMinPitch(l)}setMaxPitch(l){this._helper.setMaxPitch(l)}setRenderWorldCopies(l){this._helper.setRenderWorldCopies(l)}setBearing(l){this._helper.setBearing(l)}setPitch(l){this._helper.setPitch(l)}setRoll(l){this._helper.setRoll(l)}setFov(l){this._helper.setFov(l)}setZoom(l){this._helper.setZoom(l)}setCenter(l){this._helper.setCenter(l)}setElevation(l){this._helper.setElevation(l)}setMinElevationForCurrentTile(l){this._helper.setMinElevationForCurrentTile(l)}setPadding(l){this._helper.setPadding(l)}interpolatePadding(l,p,C){return this._helper.interpolatePadding(l,p,C)}isPaddingEqual(l){return this._helper.isPaddingEqual(l)}resize(l,p,C=!0){this._helper.resize(l,p,C)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(l){this._helper.setMaxBounds(l)}overrideNearFarZ(l,p){this._helper.overrideNearFarZ(l,p)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(l){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),l)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(l,p){this._globeness=l,this._globeLatitudeErrorCorrectionRadians=p,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().prepareNextFrame(),this._mercatorTransform.getCoveringTilesDetailsProvider().prepareNextFrame()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this._helper=new fo({calcMatrices:()=>{this._calcMatrices()},getConstrained:(l,p)=>this.getConstrained(l,p)}),this._globeness=1,this._mercatorTransform=new Ua,this._verticalPerspectiveTransform=new Jo}clone(){const l=new Dl;return l._globeness=this._globeness,l._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,l.apply(this),l}apply(l){this._helper.apply(l),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(l){const p=this._mercatorTransform.getProjectionData(l),C=this._verticalPerspectiveTransform.getProjectionData(l);return{mainMatrix:this.isGlobeRendering?C.mainMatrix:p.mainMatrix,clippingPlane:C.clippingPlane,tileMercatorCoords:C.tileMercatorCoords,projectionTransition:l.applyGlobeMatrix?this._globeness:0,fallbackMatrix:p.fallbackMatrix}}isLocationOccluded(l){return this.currentTransform.isLocationOccluded(l)}transformLightDirection(l){return this.currentTransform.transformLightDirection(l)}getPixelScale(){return a.bk(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return a.bk(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(l,p,C){const E=this._mercatorTransform.getPitchedTextCorrection(l,p,C),B=this._verticalPerspectiveTransform.getPitchedTextCorrection(l,p,C);return a.bk(E,B,this._globeness)}projectTileCoordinates(l,p,C,E){return this.currentTransform.projectTileCoordinates(l,p,C,E)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(l){return this.currentTransform.calculateFogMatrix(l)}getVisibleUnwrappedCoordinates(l){return this.currentTransform.getVisibleUnwrappedCoordinates(l)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(l){this._mercatorTransform.recalculateZoomAndCenter(l),this._verticalPerspectiveTransform.recalculateZoomAndCenter(l)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(l,p){return this.currentTransform.lngLatToCameraDepth(l,p)}populateCache(l){this._mercatorTransform.populateCache(l),this._verticalPerspectiveTransform.populateCache(l)}getBounds(){return this.currentTransform.getBounds()}getConstrained(l,p){return this.currentTransform.getConstrained(l,p)}calculateCenterFromCameraLngLatAlt(l,p,C,E){return this._helper.calculateCenterFromCameraLngLatAlt(l,p,C,E)}setLocationAtPoint(l,p){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(l,p),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(l,p),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(l,p){return this.currentTransform.locationToScreenPoint(l,p)}screenPointToMercatorCoordinate(l,p){return this.currentTransform.screenPointToMercatorCoordinate(l,p)}screenPointToLocation(l,p){return this.currentTransform.screenPointToLocation(l,p)}isPointOnMapSurface(l,p){return this.currentTransform.isPointOnMapSurface(l,p)}getRayDirectionFromPixel(l){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(l)}getMatrixForModel(l,p){return this.currentTransform.getMatrixForModel(l,p)}getProjectionDataForCustomLayer(l=!0){const p=this._mercatorTransform.getProjectionDataForCustomLayer(l);if(!this.isGlobeRendering)return p;const C=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(l);return C.fallbackMatrix=p.mainMatrix,C}getFastPathSimpleProjectionMatrix(l){return this.currentTransform.getFastPathSimpleProjectionMatrix(l)}}class oc{get useGlobeControls(){return!0}handlePanInertia(l,p){const C=lu(l,p);return Math.abs(C.lng-p.center.lng)>180&&(C.lng=p.center.lng+179.5*Math.sign(C.lng-p.center.lng)),{easingCenter:C,easingOffset:new a.P(0,0)}}handleMapControlsRollPitchBearingZoom(l,p){const C=l.around,E=p.screenPointToLocation(C);l.bearingDelta&&p.setBearing(p.bearing+l.bearingDelta),l.pitchDelta&&p.setPitch(p.pitch+l.pitchDelta),l.rollDelta&&p.setRoll(p.roll+l.rollDelta);const B=p.zoom;l.zoomDelta&&p.setZoom(p.zoom+l.zoomDelta);const U=p.zoom-B;if(U===0)return;const G=a.bA(p.center.lng,E.lng),Z=G/(Math.abs(G/180)+1),ae=a.bA(p.center.lat,E.lat),ce=p.getRayDirectionFromPixel(C),me=p.cameraPosition,ge=-1*a.aX(me,ce),Pe=a.bp();a.aS(Pe,me,[ce[0]*ge,ce[1]*ge,ce[2]*ge]);const Ne=a.aZ(Pe)-1,Ze=Math.exp(.5*-Math.max(Ne-.3,0)),Xe=ys(p.worldSize,p.center.lat)/Math.min(p.width,p.height),et=a.bn(Xe,.9,.5,1,.25),ot=(1-a.af(-U))*Math.min(Ze,et),ht=p.center.lat,ut=p.zoom,gt=new a.S(p.center.lng+Z*ot,a.ah(p.center.lat+ae*ot,-a.ai,a.ai));p.setLocationAtPoint(E,C);const xt=p.center,ct=a.bn(Math.abs(G),45,85,0,1),wt=a.bn(Xe,.75,.35,0,1),Wt=Math.pow(Math.max(ct,wt),.25),Lt=a.bA(xt.lng,gt.lng),Nt=a.bA(xt.lat,gt.lat);p.setCenter(new a.S(xt.lng+Lt*Wt,xt.lat+Nt*Wt).wrap()),p.setZoom(ut+Bs(ht,p.center.lat))}handleMapControlsPan(l,p,C){if(!l.panDelta)return;const E=p.center.lat,B=p.zoom;p.setCenter(lu(l.panDelta,p).wrap()),p.setZoom(B+Bs(E,p.center.lat))}cameraForBoxAndBearing(l,p,C,E,B){const U=oo(l,p,C,E,B),G=p.left/B.width*2-1,Z=(B.width-p.right)/B.width*2-1,ae=p.top/B.height*-2+1,ce=(B.height-p.bottom)/B.height*-2+1,me=a.bA(C.getWest(),C.getEast())<0,ge=me?C.getEast():C.getWest(),Pe=me?C.getWest():C.getEast(),Ne=Math.max(C.getNorth(),C.getSouth()),Ze=Math.min(C.getNorth(),C.getSouth()),Xe=ge+.5*a.bA(ge,Pe),et=Ne+.5*a.bA(Ne,Ze),ot=B.clone();ot.setCenter(U.center),ot.setBearing(U.bearing),ot.setPitch(0),ot.setRoll(0),ot.setZoom(U.zoom);const ht=ot.modelViewProjectionMatrix,ut=[rr(C.getNorthWest()),rr(C.getNorthEast()),rr(C.getSouthWest()),rr(C.getSouthEast()),rr(new a.S(Pe,et)),rr(new a.S(ge,et)),rr(new a.S(Xe,Ne)),rr(new a.S(Xe,Ze))],gt=rr(U.center);let xt=Number.POSITIVE_INFINITY;for(const ct of ut)G<0&&(xt=oc.getLesserNonNegativeNonNull(xt,oc.solveVectorScale(ct,gt,ht,"x",G))),Z>0&&(xt=oc.getLesserNonNegativeNonNull(xt,oc.solveVectorScale(ct,gt,ht,"x",Z))),ae>0&&(xt=oc.getLesserNonNegativeNonNull(xt,oc.solveVectorScale(ct,gt,ht,"y",ae))),ce<0&&(xt=oc.getLesserNonNegativeNonNull(xt,oc.solveVectorScale(ct,gt,ht,"y",ce)));if(Number.isFinite(xt)&&xt!==0)return U.zoom=ot.zoom+a.ak(xt),U;So()}handleJumpToCenterZoom(l,p){const C=l.center.lat,E=l.getConstrained(p.center?a.S.convert(p.center):l.center,l.zoom).center;l.setCenter(E.wrap());const B=p.zoom!==void 0?+p.zoom:l.zoom+Bs(C,E.lat);l.zoom!==B&&l.setZoom(B)}handleEaseTo(l,p){const C=l.zoom,E=l.center,B=l.padding,U={roll:l.roll,pitch:l.pitch,bearing:l.bearing},G={roll:p.roll===void 0?l.roll:p.roll,pitch:p.pitch===void 0?l.pitch:p.pitch,bearing:p.bearing===void 0?l.bearing:p.bearing},Z=p.zoom!==void 0,ae=!l.isPaddingEqual(p.padding);let ce=!1;const me=p.center?a.S.convert(p.center):E,ge=l.getConstrained(me,C).center;Rl(l,ge);const Pe=l.clone();Pe.setCenter(ge),Pe.setZoom(Z?+p.zoom:C+Bs(E.lat,me.lat)),Pe.setBearing(p.bearing);const Ne=new a.P(a.ah(l.centerPoint.x+p.offsetAsPoint.x,0,l.width),a.ah(l.centerPoint.y+p.offsetAsPoint.y,0,l.height));Pe.setLocationAtPoint(ge,Ne);const Ze=(p.offset&&p.offsetAsPoint.mag())>0?Pe.center:ge,Xe=Z?+p.zoom:C+Bs(E.lat,Ze.lat),et=C+Bs(E.lat,0),ot=Xe+Bs(Ze.lat,0),ht=a.bA(E.lng,Ze.lng),ut=a.bA(E.lat,Ze.lat),gt=a.af(ot-et);return ce=Xe!==C,{easeFunc:xt=>{if(a.be(U,G)||ea({startEulerAngles:U,endEulerAngles:G,tr:l,k:xt,useSlerp:U.roll!=G.roll}),ae&&l.interpolatePadding(B,p.padding,xt),p.around)a.w("Easing around a point is not supported under globe projection."),l.setLocationAtPoint(p.around,p.aroundPoint);else{const ct=ot>et?Math.min(2,gt):Math.max(.5,gt),wt=Math.pow(ct,1-xt),Wt=_1(E,ht,ut,xt*wt);l.setCenter(Wt.wrap())}if(ce){const ct=a.C.number(et,ot,xt)+Bs(0,l.center.lat);l.setZoom(ct)}},isZooming:ce,elevationCenter:Ze}}handleFlyTo(l,p){const C=p.zoom!==void 0,E=l.center,B=l.zoom,U=l.padding,G=!l.isPaddingEqual(p.padding),Z=l.getConstrained(a.S.convert(p.center||p.locationAtOffset),B).center,ae=C?+p.zoom:l.zoom+Bs(l.center.lat,Z.lat),ce=l.clone();ce.setCenter(Z),ce.setZoom(ae),ce.setBearing(p.bearing);const me=new a.P(a.ah(l.centerPoint.x+p.offsetAsPoint.x,0,l.width),a.ah(l.centerPoint.y+p.offsetAsPoint.y,0,l.height));ce.setLocationAtPoint(Z,me);const ge=ce.center;Rl(l,ge);const Pe=(function(ut,gt,xt){const ct=rr(gt),wt=rr(xt),Wt=a.aX(ct,wt),Lt=Math.acos(Wt),Nt=yr(ut);return Lt/(2*Math.PI)*Nt})(l,E,ge),Ne=B+Bs(E.lat,0),Ze=ae+Bs(ge.lat,0),Xe=a.af(Ze-Ne);let et;if(typeof p.minZoom=="number"){const ut=+p.minZoom+Bs(ge.lat,0),gt=Math.min(ut,Ne,Ze)+Bs(0,ge.lat),xt=l.getConstrained(ge,gt).zoom+Bs(ge.lat,0);et=a.af(xt-Ne)}const ot=a.bA(E.lng,ge.lng),ht=a.bA(E.lat,ge.lat);return{easeFunc:(ut,gt,xt,ct)=>{const wt=_1(E,ot,ht,xt);G&&l.interpolatePadding(U,p.padding,ut);const Wt=ut===1?ge:wt;l.setCenter(Wt.wrap());const Lt=Ne+a.ak(gt);l.setZoom(ut===1?ae:Lt+Bs(0,Wt.lat))},scaleOfZoom:Xe,targetCenter:ge,scaleOfMinZoom:et,pixelPathLength:Pe}}static solveVectorScale(l,p,C,E,B){const U=E==="x"?[C[0],C[4],C[8],C[12]]:[C[1],C[5],C[9],C[13]],G=[C[3],C[7],C[11],C[15]],Z=l[0]*U[0]+l[1]*U[1]+l[2]*U[2],ae=l[0]*G[0]+l[1]*G[1]+l[2]*G[2],ce=p[0]*U[0]+p[1]*U[1]+p[2]*U[2],me=p[0]*G[0]+p[1]*G[1]+p[2]*G[2];return ce+B*ae===Z+B*me||G[3]*(Z-ce)+U[3]*(me-ae)+Z*me==ce*ae?null:(ce+U[3]-B*me-B*G[3])/(ce-Z-B*me+B*ae)}static getLesserNonNegativeNonNull(l,p){return p!==null&&p>=0&&p<l?p:l}}class h0{constructor(l){this._globe=l,this._mercatorCameraHelper=new Ka,this._verticalPerspectiveCameraHelper=new oc}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(l,p){return this.currentHelper.handlePanInertia(l,p)}handleMapControlsRollPitchBearingZoom(l,p){return this.currentHelper.handleMapControlsRollPitchBearingZoom(l,p)}handleMapControlsPan(l,p,C){this.currentHelper.handleMapControlsPan(l,p,C)}cameraForBoxAndBearing(l,p,C,E,B){return this.currentHelper.cameraForBoxAndBearing(l,p,C,E,B)}handleJumpToCenterZoom(l,p){this.currentHelper.handleJumpToCenterZoom(l,p)}handleEaseTo(l,p){return this.currentHelper.handleEaseTo(l,p)}handleFlyTo(l,p){return this.currentHelper.handleFlyTo(l,p)}}const Bf=(O,l)=>a.y(O,l&&l.filter((p=>p.identifier!=="source.canvas"))),dv=a.bE();class d0 extends a.E{constructor(l,p={}){var C,E;super(),this._rtlPluginLoaded=()=>{for(const U in this.sourceCaches){const G=this.sourceCaches[U].getSource().type;G!=="vector"&&G!=="geojson"||this.sourceCaches[U].reload()}},this.map=l,this.dispatcher=new bt(nt(),l._getMapId()),this.dispatcher.registerMessageHandler("GG",((U,G)=>this.getGlyphs(U,G))),this.dispatcher.registerMessageHandler("GI",((U,G)=>this.getImages(U,G))),this.dispatcher.registerMessageHandler("GDA",((U,G)=>this.getDashes(U,G))),this.imageManager=new le,this.imageManager.setEventedParent(this);const B=((C=l._container)===null||C===void 0?void 0:C.lang)||typeof document<"u"&&((E=document.documentElement)===null||E===void 0?void 0:E.lang)||void 0;this.glyphManager=new Ee(l._requestManager,p.localIdeographFontFamily,B),this.lineAtlas=new At(256,512),this.crossTileSymbolIndex=new wo,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new a.bF,this._loaded=!1,this._availableImages=[],this._globalState={},this._resetUpdates(),this.dispatcher.broadcast("SR",a.bG()),_e().on($n,this._rtlPluginLoaded),this.on("data",(U=>{if(U.dataType!=="source"||U.sourceDataType!=="metadata")return;const G=this.sourceCaches[U.sourceId];if(!G)return;const Z=G.getSource();if(Z&&Z.vectorLayerIds)for(const ae in this._layers){const ce=this._layers[ae];ce.source===Z.id&&this._validateLayer(ce)}}))}setGlobalStateProperty(l,p){var C,E,B;this._checkLoaded();const U=p===null?(B=(E=(C=this.stylesheet.state)===null||C===void 0?void 0:C[l])===null||E===void 0?void 0:E.default)!==null&&B!==void 0?B:null:p;if(a.bH(U,this._globalState[l]))return this;this._globalState[l]=U,this._applyGlobalStateChanges([l])}getGlobalState(){return this._globalState}setGlobalState(l){this._checkLoaded();const p=[];for(const C in l)!a.bH(this._globalState[C],l[C].default)&&(p.push(C),this._globalState[C]=l[C].default);this._applyGlobalStateChanges(p)}_applyGlobalStateChanges(l){if(l.length===0)return;const p=new Set,C={};for(const E of l){C[E]=this._globalState[E];for(const B in this._layers){const U=this._layers[B],G=U.getLayoutAffectingGlobalStateRefs(),Z=U.getPaintAffectingGlobalStateRefs();if(G.has(E)&&p.add(U.source),Z.has(E))for(const{name:ae,value:ce}of Z.get(E))this._updatePaintProperty(U,ae,ce)}}this.dispatcher.broadcast("UGS",C);for(const E in this.sourceCaches)p.has(E)&&(this._reloadSource(E),this._changed=!0)}loadURL(l,p={},C){this.fire(new a.l("dataloading",{dataType:"style"})),p.validate=typeof p.validate!="boolean"||p.validate;const E=this.map._requestManager.transformRequest(l,"Style");this._loadStyleRequest=new AbortController;const B=this._loadStyleRequest;a.j(E,this._loadStyleRequest).then((U=>{this._loadStyleRequest=null,this._load(U.data,p,C)})).catch((U=>{this._loadStyleRequest=null,U&&!B.signal.aborted&&this.fire(new a.k(U))}))}loadJSON(l,p={},C){this.fire(new a.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,M.frameAsync(this._frameRequest).then((()=>{this._frameRequest=null,p.validate=p.validate!==!1,this._load(l,p,C)})).catch((()=>{}))}loadEmpty(){this.fire(new a.l("dataloading",{dataType:"style"})),this._load(dv,{validate:!1})}_load(l,p,C){var E,B;let U=p.transformStyle?p.transformStyle(C,l):l;if(!p.validate||!Bf(this,a.z(U))){U=Object.assign({},U),this._loaded=!0,this.stylesheet=U;for(const G in U.sources)this.addSource(G,U.sources[G],{validate:!1});U.sprite?this._loadSprite(U.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(U.glyphs),this._createLayers(),this.light=new Ie(this.stylesheet.light),this._setProjectionInternal(((E=this.stylesheet.projection)===null||E===void 0?void 0:E.type)||"mercator"),this.sky=new tt(this.stylesheet.sky),this.map.setTerrain((B=this.stylesheet.terrain)!==null&&B!==void 0?B:null),this.fire(new a.l("data",{dataType:"style"})),this.fire(new a.l("style.load"))}}_createLayers(){var l,p,C;const E=a.bI(this.stylesheet.layers);this.setGlobalState((l=this.stylesheet.state)!==null&&l!==void 0?l:null),this.dispatcher.broadcast("SL",E),this._order=E.map((B=>B.id)),this._layers={},this._serializedLayers=null;for(const B of E){const U=a.bJ(B,this._globalState);if(U.setEventedParent(this,{layer:{id:B.id}}),this._layers[B.id]=U,a.bK(U)&&this.sourceCaches[U.source]){const G=(C=(p=B.paint)===null||p===void 0?void 0:p["raster-fade-duration"])!==null&&C!==void 0?C:U.paint.get("raster-fade-duration");this.sourceCaches[U.source].setRasterFadeDuration(G)}}}_loadSprite(l,p=!1,C=void 0){let E;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,(function(B,U,G,Z){return a._(this,void 0,void 0,(function*(){const ae=Y(B),ce=G>1?"@2x":"",me={},ge={};for(const{id:Pe,url:Ne}of ae){const Ze=U.transformRequest(z(Ne,ce,".json"),"SpriteJSON");me[Pe]=a.j(Ze,Z);const Xe=U.transformRequest(z(Ne,ce,".png"),"SpriteImage");ge[Pe]=H.getImage(Xe,Z)}return yield Promise.all([...Object.values(me),...Object.values(ge)]),(function(Pe,Ne){return a._(this,void 0,void 0,(function*(){const Ze={};for(const Xe in Pe){Ze[Xe]={};const et=M.getImageCanvasContext((yield Ne[Xe]).data),ot=(yield Pe[Xe]).data;for(const ht in ot){const{width:ut,height:gt,x:xt,y:ct,sdf:wt,pixelRatio:Wt,stretchX:Lt,stretchY:Nt,content:Gt,textFitWidth:Bn,textFitHeight:kn}=ot[ht];Ze[Xe][ht]={data:null,pixelRatio:Wt,sdf:wt,stretchX:Lt,stretchY:Nt,content:Gt,textFitWidth:Bn,textFitHeight:kn,spriteData:{width:ut,height:gt,x:xt,y:ct,context:et}}}}return Ze}))})(me,ge)}))})(l,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then((B=>{if(this._spriteRequest=null,B)for(const U in B){this._spritesImagesIds[U]=[];const G=this._spritesImagesIds[U]?this._spritesImagesIds[U].filter((Z=>!(Z in B))):[];for(const Z of G)this.imageManager.removeImage(Z),this._changedImages[Z]=!0;for(const Z in B[U]){const ae=U==="default"?Z:`${U}:${Z}`;this._spritesImagesIds[U].push(ae),ae in this.imageManager.images?this.imageManager.updateImage(ae,B[U][Z],!1):this.imageManager.addImage(ae,B[U][Z]),p&&(this._changedImages[ae]=!0)}}})).catch((B=>{this._spriteRequest=null,E=B,this.fire(new a.k(E))})).finally((()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),p&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"})),C&&C(E)}))}_unloadSprite(){for(const l of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(l),this._changedImages[l]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}_validateLayer(l){const p=this.sourceCaches[l.source];if(!p)return;const C=l.sourceLayer;if(!C)return;const E=p.getSource();(E.type==="geojson"||E.vectorLayerIds&&E.vectorLayerIds.indexOf(C)===-1)&&this.fire(new a.k(new Error(`Source layer "${C}" does not exist on source "${E.id}" as specified by style layer "${l.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const l in this.sourceCaches)if(!this.sourceCaches[l].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(l,p=!1){const C=this._serializedAllLayers();if(!l||l.length===0)return Object.values(p?a.bL(C):C);const E=[];for(const B of l)if(C[B]){const U=p?a.bL(C[B]):C[B];E.push(U)}return E}_serializedAllLayers(){let l=this._serializedLayers;if(l)return l;l=this._serializedLayers={};const p=Object.keys(this._layers);for(const C of p){const E=this._layers[C];E.type!=="custom"&&(l[C]=E.serialize())}return l}hasTransitions(){var l,p,C;if(!((l=this.light)===null||l===void 0)&&l.hasTransition()||!((p=this.sky)===null||p===void 0)&&p.hasTransition()||!((C=this.projection)===null||C===void 0)&&C.hasTransition())return!0;for(const E in this.sourceCaches)if(this.sourceCaches[E].hasTransition())return!0;for(const E in this._layers)if(this._layers[E].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(l){if(!this._loaded)return;const p=this._changed;if(p){const E=Object.keys(this._updatedLayers),B=Object.keys(this._removedLayers);(E.length||B.length)&&this._updateWorkerLayers(E,B);for(const U in this._updatedSources){const G=this._updatedSources[U];if(G==="reload")this._reloadSource(U);else{if(G!=="clear")throw new Error(`Invalid action ${G}`);this._clearSource(U)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const U in this._updatedPaintProps)this._layers[U].updateTransitions(l);this.light.updateTransitions(l),this.sky.updateTransitions(l),this._resetUpdates()}const C={};for(const E in this.sourceCaches){const B=this.sourceCaches[E];C[E]=B.used,B.used=!1}for(const E of this._order){const B=this._layers[E];B.recalculate(l,this._availableImages),!B.isHidden(l.zoom)&&B.source&&(this.sourceCaches[B.source].used=!0)}for(const E in C){const B=this.sourceCaches[E];!!C[E]!=!!B.used&&B.fire(new a.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:E}))}this.light.recalculate(l),this.sky.recalculate(l),this.projection.recalculate(l),this.z=l.zoom,p&&this.fire(new a.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const l=Object.keys(this._changedImages);if(l.length){for(const p in this.sourceCaches)this.sourceCaches[p].reloadTilesForDependencies(["icons","patterns"],l);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const l in this.sourceCaches)this.sourceCaches[l].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(l,p){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(l,!1),removedIds:p})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(l,p={}){var C;this._checkLoaded();const E=this.serialize();if(l=p.transformStyle?p.transformStyle(E,l):l,((C=p.validate)===null||C===void 0||C)&&Bf(this,a.z(l)))return!1;(l=a.bL(l)).layers=a.bI(l.layers);const B=a.bM(E,l),U=this._getOperationsToPerform(B);if(U.unimplemented.length>0)throw new Error(`Unimplemented: ${U.unimplemented.join(", ")}.`);if(U.operations.length===0)return!1;for(const G of U.operations)G();return this.stylesheet=l,this._serializedLayers=null,!0}_getOperationsToPerform(l){const p=[],C=[];for(const E of l)switch(E.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":p.push((()=>this.addLayer.apply(this,E.args)));break;case"removeLayer":p.push((()=>this.removeLayer.apply(this,E.args)));break;case"setPaintProperty":p.push((()=>this.setPaintProperty.apply(this,E.args)));break;case"setLayoutProperty":p.push((()=>this.setLayoutProperty.apply(this,E.args)));break;case"setFilter":p.push((()=>this.setFilter.apply(this,E.args)));break;case"addSource":p.push((()=>this.addSource.apply(this,E.args)));break;case"removeSource":p.push((()=>this.removeSource.apply(this,E.args)));break;case"setLayerZoomRange":p.push((()=>this.setLayerZoomRange.apply(this,E.args)));break;case"setLight":p.push((()=>this.setLight.apply(this,E.args)));break;case"setGeoJSONSourceData":p.push((()=>this.setGeoJSONSourceData.apply(this,E.args)));break;case"setGlyphs":p.push((()=>this.setGlyphs.apply(this,E.args)));break;case"setSprite":p.push((()=>this.setSprite.apply(this,E.args)));break;case"setTerrain":p.push((()=>this.map.setTerrain.apply(this,E.args)));break;case"setSky":p.push((()=>this.setSky.apply(this,E.args)));break;case"setProjection":this.setProjection.apply(this,E.args);break;case"setGlobalState":p.push((()=>this.setGlobalState.apply(this,E.args)));break;case"setTransition":p.push((()=>{}));break;default:C.push(E.command)}return{operations:p,unimplemented:C}}addImage(l,p){if(this.getImage(l))return this.fire(new a.k(new Error(`An image named "${l}" already exists.`)));this.imageManager.addImage(l,p),this._afterImageUpdated(l)}updateImage(l,p){this.imageManager.updateImage(l,p)}getImage(l){return this.imageManager.getImage(l)}removeImage(l){if(!this.getImage(l))return this.fire(new a.k(new Error(`An image named "${l}" does not exist.`)));this.imageManager.removeImage(l),this._afterImageUpdated(l)}_afterImageUpdated(l){this._availableImages=this.imageManager.listImages(),this._changedImages[l]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(l,p,C={}){if(this._checkLoaded(),this.sourceCaches[l]!==void 0)throw new Error(`Source "${l}" already exists.`);if(!p.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(p).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(p.type)>=0&&this._validate(a.z.source,`sources.${l}`,p,null,C))return;this.map&&this.map._collectResourceTiming&&(p.collectResourceTiming=!0);const E=this.sourceCaches[l]=new Cn(l,p,this.dispatcher);E.style=this,E.setEventedParent(this,(()=>({isSourceLoaded:E.loaded(),source:E.serialize(),sourceId:l}))),E.onAdd(this.map),this._changed=!0}removeSource(l){if(this._checkLoaded(),this.sourceCaches[l]===void 0)throw new Error("There is no source with this ID");for(const C in this._layers)if(this._layers[C].source===l)return this.fire(new a.k(new Error(`Source "${l}" cannot be removed while layer "${C}" is using it.`)));const p=this.sourceCaches[l];delete this.sourceCaches[l],delete this._updatedSources[l],p.fire(new a.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:l})),p.setEventedParent(null),p.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(l,p){if(this._checkLoaded(),this.sourceCaches[l]===void 0)throw new Error(`There is no source with this ID=${l}`);const C=this.sourceCaches[l].getSource();if(C.type!=="geojson")throw new Error(`geojsonSource.type is ${C.type}, which is !== 'geojson`);C.setData(p),this._changed=!0}getSource(l){return this.sourceCaches[l]&&this.sourceCaches[l].getSource()}addLayer(l,p,C={}){this._checkLoaded();const E=l.id;if(this.getLayer(E))return void this.fire(new a.k(new Error(`Layer "${E}" already exists on this map.`)));let B;if(l.type==="custom"){if(Bf(this,a.bN(l)))return;B=a.bJ(l,this._globalState)}else{if("source"in l&&typeof l.source=="object"&&(this.addSource(E,l.source),l=a.bL(l),l=a.e(l,{source:E})),this._validate(a.z.layer,`layers.${E}`,l,{arrayIndex:-1},C))return;B=a.bJ(l,this._globalState),this._validateLayer(B),B.setEventedParent(this,{layer:{id:E}})}const U=p?this._order.indexOf(p):this._order.length;if(p&&U===-1)this.fire(new a.k(new Error(`Cannot add layer "${E}" before non-existing layer "${p}".`)));else{if(this._order.splice(U,0,E),this._layerOrderChanged=!0,this._layers[E]=B,this._removedLayers[E]&&B.source&&B.type!=="custom"){const G=this._removedLayers[E];delete this._removedLayers[E],G.type!==B.type?this._updatedSources[B.source]="clear":(this._updatedSources[B.source]="reload",this.sourceCaches[B.source].pause())}this._updateLayer(B),B.onAdd&&B.onAdd(this.map)}}moveLayer(l,p){if(this._checkLoaded(),this._changed=!0,!this._layers[l])return void this.fire(new a.k(new Error(`The layer '${l}' does not exist in the map's style and cannot be moved.`)));if(l===p)return;const C=this._order.indexOf(l);this._order.splice(C,1);const E=p?this._order.indexOf(p):this._order.length;p&&E===-1?this.fire(new a.k(new Error(`Cannot move layer "${l}" before non-existing layer "${p}".`))):(this._order.splice(E,0,l),this._layerOrderChanged=!0)}removeLayer(l){this._checkLoaded();const p=this._layers[l];if(!p)return void this.fire(new a.k(new Error(`Cannot remove non-existing layer "${l}".`)));p.setEventedParent(null);const C=this._order.indexOf(l);this._order.splice(C,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[l]=p,delete this._layers[l],this._serializedLayers&&delete this._serializedLayers[l],delete this._updatedLayers[l],delete this._updatedPaintProps[l],p.onRemove&&p.onRemove(this.map)}getLayer(l){return this._layers[l]}getLayersOrder(){return[...this._order]}hasLayer(l){return l in this._layers}setLayerZoomRange(l,p,C){this._checkLoaded();const E=this.getLayer(l);E?E.minzoom===p&&E.maxzoom===C||(p!=null&&(E.minzoom=p),C!=null&&(E.maxzoom=C),this._updateLayer(E)):this.fire(new a.k(new Error(`Cannot set the zoom range of non-existing layer "${l}".`)))}setFilter(l,p,C={}){this._checkLoaded();const E=this.getLayer(l);if(E){if(!a.bH(E.filter,p))return p==null?(E.setFilter(void 0),void this._updateLayer(E)):void(this._validate(a.z.filter,`layers.${E.id}.filter`,p,null,C)||(E.setFilter(a.bL(p)),this._updateLayer(E)))}else this.fire(new a.k(new Error(`Cannot filter non-existing layer "${l}".`)))}getFilter(l){return a.bL(this.getLayer(l).filter)}setLayoutProperty(l,p,C,E={}){this._checkLoaded();const B=this.getLayer(l);B?a.bH(B.getLayoutProperty(p),C)||(B.setLayoutProperty(p,C,E),this._updateLayer(B)):this.fire(new a.k(new Error(`Cannot style non-existing layer "${l}".`)))}getLayoutProperty(l,p){const C=this.getLayer(l);if(C)return C.getLayoutProperty(p);this.fire(new a.k(new Error(`Cannot get style of non-existing layer "${l}".`)))}setPaintProperty(l,p,C,E={}){this._checkLoaded();const B=this.getLayer(l);B?a.bH(B.getPaintProperty(p),C)||this._updatePaintProperty(B,p,C,E):this.fire(new a.k(new Error(`Cannot style non-existing layer "${l}".`)))}_updatePaintProperty(l,p,C,E={}){l.setPaintProperty(p,C,E)&&this._updateLayer(l),a.bK(l)&&p==="raster-fade-duration"&&this.sourceCaches[l.source].setRasterFadeDuration(C),this._changed=!0,this._updatedPaintProps[l.id]=!0,this._serializedLayers=null}getPaintProperty(l,p){return this.getLayer(l).getPaintProperty(p)}setFeatureState(l,p){this._checkLoaded();const C=l.source,E=l.sourceLayer,B=this.sourceCaches[C];if(B===void 0)return void this.fire(new a.k(new Error(`The source '${C}' does not exist in the map's style.`)));const U=B.getSource().type;U==="geojson"&&E?this.fire(new a.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):U!=="vector"||E?(l.id===void 0&&this.fire(new a.k(new Error("The feature id parameter must be provided."))),B.setFeatureState(E,l.id,p)):this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(l,p){this._checkLoaded();const C=l.source,E=this.sourceCaches[C];if(E===void 0)return void this.fire(new a.k(new Error(`The source '${C}' does not exist in the map's style.`)));const B=E.getSource().type,U=B==="vector"?l.sourceLayer:void 0;B!=="vector"||U?p&&typeof l.id!="string"&&typeof l.id!="number"?this.fire(new a.k(new Error("A feature id is required to remove its specific state property."))):E.removeFeatureState(U,l.id,p):this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(l){this._checkLoaded();const p=l.source,C=l.sourceLayer,E=this.sourceCaches[p];if(E!==void 0)return E.getSource().type!=="vector"||C?(l.id===void 0&&this.fire(new a.k(new Error("The feature id parameter must be provided."))),E.getFeatureState(C,l.id)):void this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new a.k(new Error(`The source '${p}' does not exist in the map's style.`)))}getTransition(){return a.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const l=a.bO(this.sourceCaches,(B=>B.serialize())),p=this._serializeByIds(this._order,!0),C=this.map.getTerrain()||void 0,E=this.stylesheet;return a.bP({version:E.version,name:E.name,metadata:E.metadata,light:E.light,sky:E.sky,center:E.center,zoom:E.zoom,bearing:E.bearing,pitch:E.pitch,sprite:E.sprite,glyphs:E.glyphs,transition:E.transition,projection:E.projection,sources:l,layers:p,terrain:C},(B=>B!==void 0))}_updateLayer(l){this._updatedLayers[l.id]=!0,l.source&&!this._updatedSources[l.source]&&this.sourceCaches[l.source].getSource().type!=="raster"&&(this._updatedSources[l.source]="reload",this.sourceCaches[l.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(l){const p=U=>this._layers[U].type==="fill-extrusion",C={},E=[];for(let U=this._order.length-1;U>=0;U--){const G=this._order[U];if(p(G)){C[G]=U;for(const Z of l){const ae=Z[G];if(ae)for(const ce of ae)E.push(ce)}}}E.sort(((U,G)=>G.intersectionZ-U.intersectionZ));const B=[];for(let U=this._order.length-1;U>=0;U--){const G=this._order[U];if(p(G))for(let Z=E.length-1;Z>=0;Z--){const ae=E[Z].feature;if(C[ae.layer.id]<U)break;B.push(ae),E.pop()}else for(const Z of l){const ae=Z[G];if(ae)for(const ce of ae)B.push(ce.feature)}}return B}queryRenderedFeatures(l,p,C){p&&p.filter&&this._validate(a.z.filter,"queryRenderedFeatures.filter",p.filter,null,p);const E={};if(p&&p.layers){if(!(Array.isArray(p.layers)||p.layers instanceof Set))return this.fire(new a.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const ae of p.layers){const ce=this._layers[ae];if(!ce)return this.fire(new a.k(new Error(`The layer '${ae}' does not exist in the map's style and cannot be queried for features.`))),[];E[ce.source]=!0}}const B=[];p.availableImages=this._availableImages;const U=this._serializedAllLayers(),G=p.layers instanceof Set?p.layers:Array.isArray(p.layers)?new Set(p.layers):null,Z=Object.assign(Object.assign({},p),{layers:G,globalState:this._globalState});for(const ae in this.sourceCaches)p.layers&&!E[ae]||B.push(Te(this.sourceCaches[ae],this._layers,U,l,Z,C,this.map.terrain?(ce,me,ge)=>this.map.terrain.getElevation(ce,me,ge):void 0));return this.placement&&B.push((function(ae,ce,me,ge,Pe,Ne,Ze){const Xe={},et=Ne.queryRenderedSymbols(ge),ot=[];for(const ht of Object.keys(et).map(Number))ot.push(Ze[ht]);ot.sort(Se);for(const ht of ot){const ut=ht.featureIndex.lookupSymbolFeatures(et[ht.bucketInstanceId],ce,ht.bucketIndex,ht.sourceLayerIndex,{filterSpec:Pe.filter,globalState:Pe.globalState},Pe.layers,Pe.availableImages,ae);for(const gt in ut){const xt=Xe[gt]=Xe[gt]||[],ct=ut[gt];ct.sort(((wt,Wt)=>{const Lt=ht.featureSortOrder;if(Lt){const Nt=Lt.indexOf(wt.featureIndex);return Lt.indexOf(Wt.featureIndex)-Nt}return Wt.featureIndex-wt.featureIndex}));for(const wt of ct)xt.push(wt)}}return(function(ht,ut,gt){for(const xt in ht)for(const ct of ht[xt])We(ct,gt[ut[xt].source]);return ht})(Xe,ae,me)})(this._layers,U,this.sourceCaches,l,Z,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(B)}querySourceFeatures(l,p){p?.filter&&this._validate(a.z.filter,"querySourceFeatures.filter",p.filter,null,p);const C=this.sourceCaches[l];return C?(function(E,B){const U=E.getRenderableIds().map((ae=>E.getTileByID(ae))),G=[],Z={};for(let ae=0;ae<U.length;ae++){const ce=U[ae],me=ce.tileID.canonical.key;Z[me]||(Z[me]=!0,ce.querySourceFeatures(G,B))}return G})(C,p?Object.assign(Object.assign({},p),{globalState:this._globalState}):{globalState:this._globalState}):[]}getLight(){return this.light.getLight()}setLight(l,p={}){this._checkLoaded();const C=this.light.getLight();let E=!1;for(const U in l)if(!a.bH(l[U],C[U])){E=!0;break}if(!E)return;const B={now:M.now(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(l,p),this.light.updateTransitions(B)}getProjection(){var l;return(l=this.stylesheet)===null||l===void 0?void 0:l.projection}setProjection(l){if(this._checkLoaded(),this.projection){if(this.projection.name===l.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=l,this._setProjectionInternal(l.type)}getSky(){var l;return(l=this.stylesheet)===null||l===void 0?void 0:l.sky}setSky(l,p={}){this._checkLoaded();const C=this.getSky();let E=!1;if(!l&&!C)return;if(l&&!C)E=!0;else if(!l&&C)E=!0;else for(const U in l)if(!a.bH(l[U],C[U])){E=!0;break}if(!E)return;const B={now:M.now(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=l,this.sky.setSky(l,p),this.sky.updateTransitions(B)}_setProjectionInternal(l){const p=(function(C){if(Array.isArray(C)){const E=new so({type:C});return{projection:E,transform:new Dl,cameraHelper:new h0(E)}}switch(C){case"mercator":return{projection:new Pa,transform:new Ua,cameraHelper:new Ka};case"globe":{const E=new so({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:E,transform:new Dl,cameraHelper:new h0(E)}}case"vertical-perspective":return{projection:new Ei,transform:new Jo,cameraHelper:new oc};default:return a.w(`Unknown projection name: ${C}. Falling back to mercator projection.`),{projection:new Pa,transform:new Ua,cameraHelper:new Ka}}})(l);this.projection=p.projection,this.map.migrateProjection(p.transform,p.cameraHelper);for(const C in this.sourceCaches)this.sourceCaches[C].reload()}_validate(l,p,C,E,B={}){return(!B||B.validate!==!1)&&Bf(this,l.call(a.z,a.e({key:p,style:this.serialize(),value:C,styleSpec:a.v},E)))}_remove(l=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),_e().off($n,this._rtlPluginLoaded);for(const p in this._layers)this._layers[p].setEventedParent(null);for(const p in this.sourceCaches){const C=this.sourceCaches[p];C.setEventedParent(null),C.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),l&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(l)}_clearSource(l){this.sourceCaches[l].clearTiles()}_reloadSource(l){this.sourceCaches[l].resume(),this.sourceCaches[l].reload()}_updateSources(l){for(const p in this.sourceCaches)this.sourceCaches[p].update(l,this.map.terrain)}_generateCollisionBoxes(){for(const l in this.sourceCaches)this._reloadSource(l)}_updatePlacement(l,p,C,E,B=!1){let U=!1,G=!1;const Z={};for(const ae of this._order){const ce=this._layers[ae];if(ce.type!=="symbol")continue;if(!Z[ce.source]){const ge=this.sourceCaches[ce.source];Z[ce.source]=ge.getRenderableIds(!0).map((Pe=>ge.getTileByID(Pe))).sort(((Pe,Ne)=>Ne.tileID.overscaledZ-Pe.tileID.overscaledZ||(Pe.tileID.isLessThan(Ne.tileID)?-1:1)))}const me=this.crossTileSymbolIndex.addLayer(ce,Z[ce.source],l.center.lng);U=U||me}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((B=B||this._layerOrderChanged||C===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(M.now(),l.zoom))&&(this.pauseablePlacement=new wu(l,this.map.terrain,this._order,B,p,C,E,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,Z),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(M.now()),G=!0),U&&this.pauseablePlacement.placement.setStale()),G||U)for(const ae of this._order){const ce=this._layers[ae];ce.type==="symbol"&&this.placement.updateLayerOpacities(ce,Z[ce.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(M.now())}_releaseSymbolFadeTiles(){for(const l in this.sourceCaches)this.sourceCaches[l].releaseSymbolFadeTiles()}getImages(l,p){return a._(this,void 0,void 0,(function*(){const C=yield this.imageManager.getImages(p.icons);this._updateTilesForChangedImages();const E=this.sourceCaches[p.source];return E&&E.setDependencies(p.tileID.key,p.type,p.icons),C}))}getGlyphs(l,p){return a._(this,void 0,void 0,(function*(){const C=yield this.glyphManager.getGlyphs(p.stacks),E=this.sourceCaches[p.source];return E&&E.setDependencies(p.tileID.key,p.type,[""]),C}))}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(l,p={}){this._checkLoaded(),l&&this._validate(a.z.glyphs,"glyphs",l,null,p)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=l,this.glyphManager.entries={},this.glyphManager.setURL(l))}getDashes(l,p){return a._(this,void 0,void 0,(function*(){const C={};for(const[E,B]of Object.entries(p.dashes))C[E]=this.lineAtlas.getDash(B.dasharray,B.round);return C}))}addSprite(l,p,C={},E){this._checkLoaded();const B=[{id:l,url:p}],U=[...Y(this.stylesheet.sprite),...B];this._validate(a.z.sprite,"sprite",U,null,C)||(this.stylesheet.sprite=U,this._loadSprite(B,!0,E))}removeSprite(l){this._checkLoaded();const p=Y(this.stylesheet.sprite);if(p.find((C=>C.id===l))){if(this._spritesImagesIds[l])for(const C of this._spritesImagesIds[l])this.imageManager.removeImage(C),this._changedImages[C]=!0;p.splice(p.findIndex((C=>C.id===l)),1),this.stylesheet.sprite=p.length>0?p:void 0,delete this._spritesImagesIds[l],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}else this.fire(new a.k(new Error(`Sprite "${l}" doesn't exists on this map.`)))}getSprite(){return Y(this.stylesheet.sprite)}setSprite(l,p={},C){this._checkLoaded(),l&&this._validate(a.z.sprite,"sprite",l,null,p)||(this.stylesheet.sprite=l,l?this._loadSprite(l,!0,C):(this._unloadSprite(),C&&C(null)))}}var fv=a.aJ([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Sp{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(l,p,C,E,B,U,G,Z,ae){this.context=l;let ce=this.boundPaintVertexBuffers.length!==E.length;for(let me=0;!ce&&me<E.length;me++)this.boundPaintVertexBuffers[me]!==E[me]&&(ce=!0);!this.vao||this.boundProgram!==p||this.boundLayoutVertexBuffer!==C||ce||this.boundIndexBuffer!==B||this.boundVertexOffset!==U||this.boundDynamicVertexBuffer!==G||this.boundDynamicVertexBuffer2!==Z||this.boundDynamicVertexBuffer3!==ae?this.freshBind(p,C,E,B,U,G,Z,ae):(l.bindVertexArray.set(this.vao),G&&G.bind(),B&&B.dynamicDraw&&B.bind(),Z&&Z.bind(),ae&&ae.bind())}freshBind(l,p,C,E,B,U,G,Z){const ae=l.numAttributes,ce=this.context,me=ce.gl;this.vao&&this.destroy(),this.vao=ce.createVertexArray(),ce.bindVertexArray.set(this.vao),this.boundProgram=l,this.boundLayoutVertexBuffer=p,this.boundPaintVertexBuffers=C,this.boundIndexBuffer=E,this.boundVertexOffset=B,this.boundDynamicVertexBuffer=U,this.boundDynamicVertexBuffer2=G,this.boundDynamicVertexBuffer3=Z,p.enableAttributes(me,l);for(const ge of C)ge.enableAttributes(me,l);U&&U.enableAttributes(me,l),G&&G.enableAttributes(me,l),Z&&Z.enableAttributes(me,l),p.bind(),p.setVertexAttribPointers(me,l,B);for(const ge of C)ge.bind(),ge.setVertexAttribPointers(me,l,B);U&&(U.bind(),U.setVertexAttribPointers(me,l,B)),E&&E.bind(),G&&(G.bind(),G.setVertexAttribPointers(me,l,B)),Z&&(Z.bind(),Z.setVertexAttribPointers(me,l,B)),ce.currentNumAttributes=ae}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const If=(O,l,p,C,E)=>({u_texture:0,u_ele_delta:O,u_fog_matrix:l,u_fog_color:p?p.properties.get("fog-color"):a.bf.white,u_fog_ground_blend:p?p.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:E?0:p?p.calculateFogBlendOpacity(C):0,u_horizon_color:p?p.properties.get("horizon-color"):a.bf.white,u_horizon_fog_blend:p?p.properties.get("horizon-fog-blend"):1,u_is_globe_mode:E?1:0}),XA={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function kf(O){const l=[];for(let p=0;p<O.length;p++){if(O[p]===null)continue;const C=O[p].split(" ");l.push(C.pop())}return l}class Lm{constructor(l,p,C,E,B,U,G,Z,ae=[]){const ce=l.gl;this.program=ce.createProgram();const me=kf(p.staticAttributes),ge=C?C.getBinderAttributes():[],Pe=me.concat(ge),Ne=Js.prelude.staticUniforms?kf(Js.prelude.staticUniforms):[],Ze=G.staticUniforms?kf(G.staticUniforms):[],Xe=p.staticUniforms?kf(p.staticUniforms):[],et=C?C.getBinderUniforms():[],ot=Ne.concat(Ze).concat(Xe).concat(et),ht=[];for(const Lt of ot)ht.indexOf(Lt)<0&&ht.push(Lt);const ut=C?C.defines():[];jn(ce)&&ut.unshift("#version 300 es"),B&&ut.push("#define OVERDRAW_INSPECTOR;"),U&&ut.push("#define TERRAIN3D;"),Z&&ut.push(Z),ae&&ut.push(...ae);let gt=ut.concat(Js.prelude.fragmentSource,G.fragmentSource,p.fragmentSource).join(`
`),xt=ut.concat(Js.prelude.vertexSource,G.vertexSource,p.vertexSource).join(`
`);jn(ce)||(gt=(function(Lt){return Lt.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")})(gt),xt=(function(Lt){return Lt.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")})(xt));const ct=ce.createShader(ce.FRAGMENT_SHADER);if(ce.isContextLost())return void(this.failedToCreate=!0);if(ce.shaderSource(ct,gt),ce.compileShader(ct),!ce.getShaderParameter(ct,ce.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${ce.getShaderInfoLog(ct)}`);ce.attachShader(this.program,ct);const wt=ce.createShader(ce.VERTEX_SHADER);if(ce.isContextLost())return void(this.failedToCreate=!0);if(ce.shaderSource(wt,xt),ce.compileShader(wt),!ce.getShaderParameter(wt,ce.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${ce.getShaderInfoLog(wt)}`);ce.attachShader(this.program,wt),this.attributes={};const Wt={};this.numAttributes=Pe.length;for(let Lt=0;Lt<this.numAttributes;Lt++)Pe[Lt]&&(ce.bindAttribLocation(this.program,Lt,Pe[Lt]),this.attributes[Pe[Lt]]=Lt);if(ce.linkProgram(this.program),!ce.getProgramParameter(this.program,ce.LINK_STATUS))throw new Error(`Program failed to link: ${ce.getProgramInfoLog(this.program)}`);ce.deleteShader(wt),ce.deleteShader(ct);for(let Lt=0;Lt<ht.length;Lt++){const Nt=ht[Lt];if(Nt&&!Wt[Nt]){const Gt=ce.getUniformLocation(this.program,Nt);Gt&&(Wt[Nt]=Gt)}}this.fixedUniforms=E(l,Wt),this.terrainUniforms=((Lt,Nt)=>({u_depth:new a.bQ(Lt,Nt.u_depth),u_terrain:new a.bQ(Lt,Nt.u_terrain),u_terrain_dim:new a.bg(Lt,Nt.u_terrain_dim),u_terrain_matrix:new a.bS(Lt,Nt.u_terrain_matrix),u_terrain_unpack:new a.bT(Lt,Nt.u_terrain_unpack),u_terrain_exaggeration:new a.bg(Lt,Nt.u_terrain_exaggeration)}))(l,Wt),this.projectionUniforms=((Lt,Nt)=>({u_projection_matrix:new a.bS(Lt,Nt.u_projection_matrix),u_projection_tile_mercator_coords:new a.bT(Lt,Nt.u_projection_tile_mercator_coords),u_projection_clipping_plane:new a.bT(Lt,Nt.u_projection_clipping_plane),u_projection_transition:new a.bg(Lt,Nt.u_projection_transition),u_projection_fallback_matrix:new a.bS(Lt,Nt.u_projection_fallback_matrix)}))(l,Wt),this.binderUniforms=C?C.getUniforms(l,Wt):[]}draw(l,p,C,E,B,U,G,Z,ae,ce,me,ge,Pe,Ne,Ze,Xe,et,ot,ht){const ut=l.gl;if(this.failedToCreate)return;if(l.program.set(this.program),l.setDepthMode(C),l.setStencilMode(E),l.setColorMode(B),l.setCullFace(U),Z){l.activeTexture.set(ut.TEXTURE2),ut.bindTexture(ut.TEXTURE_2D,Z.depthTexture),l.activeTexture.set(ut.TEXTURE3),ut.bindTexture(ut.TEXTURE_2D,Z.texture);for(const xt in this.terrainUniforms)this.terrainUniforms[xt].set(Z[xt])}if(ae)for(const xt in ae)this.projectionUniforms[XA[xt]].set(ae[xt]);if(G)for(const xt in this.fixedUniforms)this.fixedUniforms[xt].set(G[xt]);Xe&&Xe.setUniforms(l,this.binderUniforms,Ne,{zoom:Ze});let gt=0;switch(p){case ut.LINES:gt=2;break;case ut.TRIANGLES:gt=3;break;case ut.LINE_STRIP:gt=1}for(const xt of Pe.get()){const ct=xt.vaos||(xt.vaos={});(ct[ce]||(ct[ce]=new Sp)).bind(l,this,me,Xe?Xe.getPaintVertexBuffers():[],ge,xt.vertexOffset,et,ot,ht),ut.drawElements(p,xt.primitiveLength*gt,ut.UNSIGNED_SHORT,xt.primitiveOffset*gt*2)}}}function Eu(O,l,p){const C=1/a.aC(p,1,l.transform.tileZoom),E=Math.pow(2,p.tileID.overscaledZ),B=p.tileSize*Math.pow(2,l.transform.tileZoom)/E,U=B*(p.tileID.canonical.x+p.tileID.wrap*E),G=B*p.tileID.canonical.y;return{u_image:0,u_texsize:p.imageAtlasTexture.size,u_scale:[C,O.fromScale,O.toScale],u_fade:O.t,u_pixel_coord_upper:[U>>16,G>>16],u_pixel_coord_lower:[65535&U,65535&G]}}const Rh=(O,l,p,C)=>{const E=O.style.light,B=E.properties.get("position"),U=[B.x,B.y,B.z],G=a.bW();E.properties.get("anchor")==="viewport"&&a.bX(G,O.transform.bearingInRadians),a.bY(U,U,G);const Z=O.transform.transformLightDirection(U),ae=E.properties.get("color");return{u_lightpos:U,u_lightpos_globe:Z,u_lightintensity:E.properties.get("intensity"),u_lightcolor:[ae.r,ae.g,ae.b],u_vertical_gradient:+l,u_opacity:p,u_fill_translate:C}},Ep=(O,l,p,C,E,B,U)=>a.e(Rh(O,l,p,C),Eu(B,O,U),{u_height_factor:-Math.pow(2,E.overscaledZ)/U.tileSize/8}),Dh=(O,l,p,C)=>a.e(Eu(l,O,p),{u_fill_translate:C}),Tf=(O,l)=>({u_world:O,u_fill_translate:l}),Fm=(O,l,p,C,E)=>a.e(Dh(O,l,p,E),{u_world:C}),Pd=(O,l,p,C,E)=>{const B=O.transform;let U,G,Z=0;if(p.paint.get("circle-pitch-alignment")==="map"){const ae=a.aC(l,1,B.zoom);U=!0,G=[ae,ae],Z=ae/(a.$*Math.pow(2,l.tileID.overscaledZ))*2*Math.PI*E}else U=!1,G=B.pixelsToGLUnits;return{u_camera_to_center_distance:B.cameraToCenterDistance,u_scale_with_map:+(p.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+U,u_device_pixel_ratio:O.pixelRatio,u_extrude_scale:G,u_globe_extrude_scale:Z,u_translate:C}},x1=O=>({u_pixel_extrude_scale:[1/O.width,1/O.height]}),Rc=O=>({u_viewport_size:[O.width,O.height]}),Ou=(O,l=1)=>({u_color:O,u_overlay:0,u_overlay_scale:l}),Op=(O,l,p,C)=>{const E=a.aC(O,1,l)/(a.$*Math.pow(2,O.tileID.overscaledZ))*2*Math.PI*C;return{u_extrude_scale:a.aC(O,1,l),u_intensity:p,u_globe_extrude_scale:E}},Rf=(O,l,p,C)=>{const E=a.L();a.bZ(E,0,O.width,O.height,0,0,1);const B=O.context.gl;return{u_matrix:E,u_world:[B.drawingBufferWidth,B.drawingBufferHeight],u_image:p,u_color_ramp:C,u_opacity:l.paint.get("heatmap-opacity")}},zm=(O,l,p)=>{const C=p.paint.get("hillshade-accent-color");let E;switch(p.paint.get("hillshade-method")){case"basic":E=4;break;case"combined":E=1;break;case"igor":E=2;break;case"multidirectional":E=3;break;default:E=0}const B=p.getIlluminationProperties();for(let U=0;U<B.directionRadians.length;U++)p.paint.get("hillshade-illumination-anchor")==="viewport"&&(B.directionRadians[U]+=O.transform.bearingInRadians);return{u_image:0,u_latrange:Df(0,l.tileID),u_exaggeration:p.paint.get("hillshade-exaggeration"),u_altitudes:B.altitudeRadians,u_azimuths:B.directionRadians,u_accent:C,u_method:E,u_highlights:B.highlightColor,u_shadows:B.shadowColor}},Bp=(O,l)=>{const p=l.stride,C=a.L();return a.bZ(C,0,a.$,-a.$,0,0,1),a.M(C,C,[0,-a.$,0]),{u_matrix:C,u_image:1,u_dimension:[p,p],u_zoom:O.overscaledZ,u_unpack:l.getUnpackVector()}};function Df(O,l){const p=Math.pow(2,l.canonical.z),C=l.canonical.y;return[new a.a1(0,C/p).toLngLat().lat,new a.a1(0,(C+1)/p).toLngLat().lat]}const Pf=(O,l,p=0)=>({u_image:0,u_unpack:l.getUnpackVector(),u_dimension:[l.stride,l.stride],u_elevation_stops:1,u_color_stops:4,u_color_ramp_size:p,u_opacity:O.paint.get("color-relief-opacity")}),Ip=(O,l,p,C)=>{const E=O.transform;return{u_translation:Tp(O,l,p),u_ratio:C/a.aC(l,1,E.zoom),u_device_pixel_ratio:O.pixelRatio,u_units_to_pixels:[1/E.pixelsToGLUnits[0],1/E.pixelsToGLUnits[1]]}},kp=(O,l,p,C,E)=>a.e(Ip(O,l,p,C),{u_image:0,u_image_height:E}),Ph=(O,l,p,C,E)=>{const B=O.transform,U=JA(l,B);return{u_translation:Tp(O,l,p),u_texsize:l.imageAtlasTexture.size,u_ratio:C/a.aC(l,1,B.zoom),u_device_pixel_ratio:O.pixelRatio,u_image:0,u_scale:[U,E.fromScale,E.toScale],u_fade:E.t,u_units_to_pixels:[1/B.pixelsToGLUnits[0],1/B.pixelsToGLUnits[1]]}},Uh=(O,l,p,C,E)=>{const B=JA(l,O.transform);return a.e(Ip(O,l,p,C),{u_tileratio:B,u_crossfade_from:E.fromScale,u_crossfade_to:E.toScale,u_image:0,u_mix:E.t,u_lineatlas_width:O.lineAtlas.width,u_lineatlas_height:O.lineAtlas.height})},jm=(O,l,p,C,E,B)=>{const U=JA(l,O.transform);return a.e(Ip(O,l,p,C),{u_image:0,u_image_height:B,u_tileratio:U,u_crossfade_from:E.fromScale,u_crossfade_to:E.toScale,u_image_dash:1,u_mix:E.t,u_lineatlas_width:O.lineAtlas.width,u_lineatlas_height:O.lineAtlas.height})};function JA(O,l){return 1/a.aC(O,1,l.tileZoom)}function Tp(O,l,p){return a.aD(O.transform,l,p.paint.get("line-translate"),p.paint.get("line-translate-anchor"))}const Uf=(O,l,p,C,E)=>{return{u_tl_parent:O,u_scale_parent:l,u_buffer_scale:1,u_fade_t:p.mix,u_opacity:p.opacity*C.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:C.paint.get("raster-brightness-min"),u_brightness_high:C.paint.get("raster-brightness-max"),u_saturation_factor:(U=C.paint.get("raster-saturation"),U>0?1-1/(1.001-U):-U),u_contrast_factor:(B=C.paint.get("raster-contrast"),B>0?1/(1-B):1+B),u_spin_weights:eh(C.paint.get("raster-hue-rotate")),u_coords_top:[E[0].x,E[0].y,E[1].x,E[1].y],u_coords_bottom:[E[3].x,E[3].y,E[2].x,E[2].y]};var B,U};function eh(O){O*=Math.PI/180;const l=Math.sin(O),p=Math.cos(O);return[(2*p+1)/3,(-Math.sqrt(3)*l-p+1)/3,(Math.sqrt(3)*l-p+1)/3]}const Rp=(O,l,p,C,E,B,U,G,Z,ae,ce,me,ge)=>{const Pe=U.transform;return{u_is_size_zoom_constant:+(O==="constant"||O==="source"),u_is_size_feature_constant:+(O==="constant"||O==="camera"),u_size_t:l?l.uSizeT:0,u_size:l?l.uSize:0,u_camera_to_center_distance:Pe.cameraToCenterDistance,u_pitch:Pe.pitch/360*2*Math.PI,u_rotate_symbol:+p,u_aspect_ratio:Pe.width/Pe.height,u_fade_change:U.options.fadeDuration?U.symbolFadeChange:1,u_label_plane_matrix:G,u_coord_matrix:Z,u_is_text:+ce,u_pitch_with_map:+C,u_is_along_line:E,u_is_variable_anchor:B,u_texsize:me,u_texture:0,u_translation:ae,u_pitched_scale:ge}},f0=(O,l,p,C,E,B,U,G,Z,ae,ce,me,ge,Pe)=>{const Ne=U.transform;return a.e(Rp(O,l,p,C,E,B,U,G,Z,ae,ce,me,Pe),{u_gamma_scale:C?Math.cos(Ne.pitch*Math.PI/180)*Ne.cameraToCenterDistance:1,u_device_pixel_ratio:U.pixelRatio,u_is_halo:1})},M1=(O,l,p,C,E,B,U,G,Z,ae,ce,me,ge)=>a.e(f0(O,l,p,C,E,B,U,G,Z,ae,!0,ce,0,ge),{u_texsize_icon:me,u_texture_icon:1}),w1=(O,l)=>({u_opacity:O,u_color:l}),Kh=(O,l,p,C,E)=>a.e((function(B,U,G,Z){const ae=G.imageManager.getPattern(B.from.toString()),ce=G.imageManager.getPattern(B.to.toString()),{width:me,height:ge}=G.imageManager.getPixelSize(),Pe=Math.pow(2,Z.tileID.overscaledZ),Ne=Z.tileSize*Math.pow(2,G.transform.tileZoom)/Pe,Ze=Ne*(Z.tileID.canonical.x+Z.tileID.wrap*Pe),Xe=Ne*Z.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:ae.tl,u_pattern_br_a:ae.br,u_pattern_tl_b:ce.tl,u_pattern_br_b:ce.br,u_texsize:[me,ge],u_mix:U.t,u_pattern_size_a:ae.displaySize,u_pattern_size_b:ce.displaySize,u_scale_a:U.fromScale,u_scale_b:U.toScale,u_tile_units_to_pixels:1/a.aC(Z,1,G.transform.tileZoom),u_pixel_coord_upper:[Ze>>16,Xe>>16],u_pixel_coord_lower:[65535&Ze,65535&Xe]}})(p,E,l,C),{u_opacity:O}),Is=(O,l)=>{},th={fillExtrusion:(O,l)=>({u_lightpos:new a.bU(O,l.u_lightpos),u_lightpos_globe:new a.bU(O,l.u_lightpos_globe),u_lightintensity:new a.bg(O,l.u_lightintensity),u_lightcolor:new a.bU(O,l.u_lightcolor),u_vertical_gradient:new a.bg(O,l.u_vertical_gradient),u_opacity:new a.bg(O,l.u_opacity),u_fill_translate:new a.bV(O,l.u_fill_translate)}),fillExtrusionPattern:(O,l)=>({u_lightpos:new a.bU(O,l.u_lightpos),u_lightpos_globe:new a.bU(O,l.u_lightpos_globe),u_lightintensity:new a.bg(O,l.u_lightintensity),u_lightcolor:new a.bU(O,l.u_lightcolor),u_vertical_gradient:new a.bg(O,l.u_vertical_gradient),u_height_factor:new a.bg(O,l.u_height_factor),u_opacity:new a.bg(O,l.u_opacity),u_fill_translate:new a.bV(O,l.u_fill_translate),u_image:new a.bQ(O,l.u_image),u_texsize:new a.bV(O,l.u_texsize),u_pixel_coord_upper:new a.bV(O,l.u_pixel_coord_upper),u_pixel_coord_lower:new a.bV(O,l.u_pixel_coord_lower),u_scale:new a.bU(O,l.u_scale),u_fade:new a.bg(O,l.u_fade)}),fill:(O,l)=>({u_fill_translate:new a.bV(O,l.u_fill_translate)}),fillPattern:(O,l)=>({u_image:new a.bQ(O,l.u_image),u_texsize:new a.bV(O,l.u_texsize),u_pixel_coord_upper:new a.bV(O,l.u_pixel_coord_upper),u_pixel_coord_lower:new a.bV(O,l.u_pixel_coord_lower),u_scale:new a.bU(O,l.u_scale),u_fade:new a.bg(O,l.u_fade),u_fill_translate:new a.bV(O,l.u_fill_translate)}),fillOutline:(O,l)=>({u_world:new a.bV(O,l.u_world),u_fill_translate:new a.bV(O,l.u_fill_translate)}),fillOutlinePattern:(O,l)=>({u_world:new a.bV(O,l.u_world),u_image:new a.bQ(O,l.u_image),u_texsize:new a.bV(O,l.u_texsize),u_pixel_coord_upper:new a.bV(O,l.u_pixel_coord_upper),u_pixel_coord_lower:new a.bV(O,l.u_pixel_coord_lower),u_scale:new a.bU(O,l.u_scale),u_fade:new a.bg(O,l.u_fade),u_fill_translate:new a.bV(O,l.u_fill_translate)}),circle:(O,l)=>({u_camera_to_center_distance:new a.bg(O,l.u_camera_to_center_distance),u_scale_with_map:new a.bQ(O,l.u_scale_with_map),u_pitch_with_map:new a.bQ(O,l.u_pitch_with_map),u_extrude_scale:new a.bV(O,l.u_extrude_scale),u_device_pixel_ratio:new a.bg(O,l.u_device_pixel_ratio),u_globe_extrude_scale:new a.bg(O,l.u_globe_extrude_scale),u_translate:new a.bV(O,l.u_translate)}),collisionBox:(O,l)=>({u_pixel_extrude_scale:new a.bV(O,l.u_pixel_extrude_scale)}),collisionCircle:(O,l)=>({u_viewport_size:new a.bV(O,l.u_viewport_size)}),debug:(O,l)=>({u_color:new a.bR(O,l.u_color),u_overlay:new a.bQ(O,l.u_overlay),u_overlay_scale:new a.bg(O,l.u_overlay_scale)}),depth:Is,clippingMask:Is,heatmap:(O,l)=>({u_extrude_scale:new a.bg(O,l.u_extrude_scale),u_intensity:new a.bg(O,l.u_intensity),u_globe_extrude_scale:new a.bg(O,l.u_globe_extrude_scale)}),heatmapTexture:(O,l)=>({u_matrix:new a.bS(O,l.u_matrix),u_world:new a.bV(O,l.u_world),u_image:new a.bQ(O,l.u_image),u_color_ramp:new a.bQ(O,l.u_color_ramp),u_opacity:new a.bg(O,l.u_opacity)}),hillshade:(O,l)=>({u_image:new a.bQ(O,l.u_image),u_latrange:new a.bV(O,l.u_latrange),u_exaggeration:new a.bg(O,l.u_exaggeration),u_altitudes:new a.b$(O,l.u_altitudes),u_azimuths:new a.b$(O,l.u_azimuths),u_accent:new a.bR(O,l.u_accent),u_method:new a.bQ(O,l.u_method),u_shadows:new a.b_(O,l.u_shadows),u_highlights:new a.b_(O,l.u_highlights)}),hillshadePrepare:(O,l)=>({u_matrix:new a.bS(O,l.u_matrix),u_image:new a.bQ(O,l.u_image),u_dimension:new a.bV(O,l.u_dimension),u_zoom:new a.bg(O,l.u_zoom),u_unpack:new a.bT(O,l.u_unpack)}),colorRelief:(O,l)=>({u_image:new a.bQ(O,l.u_image),u_unpack:new a.bT(O,l.u_unpack),u_dimension:new a.bV(O,l.u_dimension),u_elevation_stops:new a.bQ(O,l.u_elevation_stops),u_color_stops:new a.bQ(O,l.u_color_stops),u_color_ramp_size:new a.bQ(O,l.u_color_ramp_size),u_opacity:new a.bg(O,l.u_opacity)}),line:(O,l)=>({u_translation:new a.bV(O,l.u_translation),u_ratio:new a.bg(O,l.u_ratio),u_device_pixel_ratio:new a.bg(O,l.u_device_pixel_ratio),u_units_to_pixels:new a.bV(O,l.u_units_to_pixels)}),lineGradient:(O,l)=>({u_translation:new a.bV(O,l.u_translation),u_ratio:new a.bg(O,l.u_ratio),u_device_pixel_ratio:new a.bg(O,l.u_device_pixel_ratio),u_units_to_pixels:new a.bV(O,l.u_units_to_pixels),u_image:new a.bQ(O,l.u_image),u_image_height:new a.bg(O,l.u_image_height)}),linePattern:(O,l)=>({u_translation:new a.bV(O,l.u_translation),u_texsize:new a.bV(O,l.u_texsize),u_ratio:new a.bg(O,l.u_ratio),u_device_pixel_ratio:new a.bg(O,l.u_device_pixel_ratio),u_image:new a.bQ(O,l.u_image),u_units_to_pixels:new a.bV(O,l.u_units_to_pixels),u_scale:new a.bU(O,l.u_scale),u_fade:new a.bg(O,l.u_fade)}),lineSDF:(O,l)=>({u_translation:new a.bV(O,l.u_translation),u_ratio:new a.bg(O,l.u_ratio),u_device_pixel_ratio:new a.bg(O,l.u_device_pixel_ratio),u_units_to_pixels:new a.bV(O,l.u_units_to_pixels),u_image:new a.bQ(O,l.u_image),u_mix:new a.bg(O,l.u_mix),u_tileratio:new a.bg(O,l.u_tileratio),u_crossfade_from:new a.bg(O,l.u_crossfade_from),u_crossfade_to:new a.bg(O,l.u_crossfade_to),u_lineatlas_width:new a.bg(O,l.u_lineatlas_width),u_lineatlas_height:new a.bg(O,l.u_lineatlas_height)}),lineGradientSDF:(O,l)=>({u_translation:new a.bV(O,l.u_translation),u_ratio:new a.bg(O,l.u_ratio),u_device_pixel_ratio:new a.bg(O,l.u_device_pixel_ratio),u_units_to_pixels:new a.bV(O,l.u_units_to_pixels),u_image:new a.bQ(O,l.u_image),u_image_height:new a.bg(O,l.u_image_height),u_tileratio:new a.bg(O,l.u_tileratio),u_crossfade_from:new a.bg(O,l.u_crossfade_from),u_crossfade_to:new a.bg(O,l.u_crossfade_to),u_image_dash:new a.bQ(O,l.u_image_dash),u_mix:new a.bg(O,l.u_mix),u_lineatlas_width:new a.bg(O,l.u_lineatlas_width),u_lineatlas_height:new a.bg(O,l.u_lineatlas_height)}),raster:(O,l)=>({u_tl_parent:new a.bV(O,l.u_tl_parent),u_scale_parent:new a.bg(O,l.u_scale_parent),u_buffer_scale:new a.bg(O,l.u_buffer_scale),u_fade_t:new a.bg(O,l.u_fade_t),u_opacity:new a.bg(O,l.u_opacity),u_image0:new a.bQ(O,l.u_image0),u_image1:new a.bQ(O,l.u_image1),u_brightness_low:new a.bg(O,l.u_brightness_low),u_brightness_high:new a.bg(O,l.u_brightness_high),u_saturation_factor:new a.bg(O,l.u_saturation_factor),u_contrast_factor:new a.bg(O,l.u_contrast_factor),u_spin_weights:new a.bU(O,l.u_spin_weights),u_coords_top:new a.bT(O,l.u_coords_top),u_coords_bottom:new a.bT(O,l.u_coords_bottom)}),symbolIcon:(O,l)=>({u_is_size_zoom_constant:new a.bQ(O,l.u_is_size_zoom_constant),u_is_size_feature_constant:new a.bQ(O,l.u_is_size_feature_constant),u_size_t:new a.bg(O,l.u_size_t),u_size:new a.bg(O,l.u_size),u_camera_to_center_distance:new a.bg(O,l.u_camera_to_center_distance),u_pitch:new a.bg(O,l.u_pitch),u_rotate_symbol:new a.bQ(O,l.u_rotate_symbol),u_aspect_ratio:new a.bg(O,l.u_aspect_ratio),u_fade_change:new a.bg(O,l.u_fade_change),u_label_plane_matrix:new a.bS(O,l.u_label_plane_matrix),u_coord_matrix:new a.bS(O,l.u_coord_matrix),u_is_text:new a.bQ(O,l.u_is_text),u_pitch_with_map:new a.bQ(O,l.u_pitch_with_map),u_is_along_line:new a.bQ(O,l.u_is_along_line),u_is_variable_anchor:new a.bQ(O,l.u_is_variable_anchor),u_texsize:new a.bV(O,l.u_texsize),u_texture:new a.bQ(O,l.u_texture),u_translation:new a.bV(O,l.u_translation),u_pitched_scale:new a.bg(O,l.u_pitched_scale)}),symbolSDF:(O,l)=>({u_is_size_zoom_constant:new a.bQ(O,l.u_is_size_zoom_constant),u_is_size_feature_constant:new a.bQ(O,l.u_is_size_feature_constant),u_size_t:new a.bg(O,l.u_size_t),u_size:new a.bg(O,l.u_size),u_camera_to_center_distance:new a.bg(O,l.u_camera_to_center_distance),u_pitch:new a.bg(O,l.u_pitch),u_rotate_symbol:new a.bQ(O,l.u_rotate_symbol),u_aspect_ratio:new a.bg(O,l.u_aspect_ratio),u_fade_change:new a.bg(O,l.u_fade_change),u_label_plane_matrix:new a.bS(O,l.u_label_plane_matrix),u_coord_matrix:new a.bS(O,l.u_coord_matrix),u_is_text:new a.bQ(O,l.u_is_text),u_pitch_with_map:new a.bQ(O,l.u_pitch_with_map),u_is_along_line:new a.bQ(O,l.u_is_along_line),u_is_variable_anchor:new a.bQ(O,l.u_is_variable_anchor),u_texsize:new a.bV(O,l.u_texsize),u_texture:new a.bQ(O,l.u_texture),u_gamma_scale:new a.bg(O,l.u_gamma_scale),u_device_pixel_ratio:new a.bg(O,l.u_device_pixel_ratio),u_is_halo:new a.bQ(O,l.u_is_halo),u_translation:new a.bV(O,l.u_translation),u_pitched_scale:new a.bg(O,l.u_pitched_scale)}),symbolTextAndIcon:(O,l)=>({u_is_size_zoom_constant:new a.bQ(O,l.u_is_size_zoom_constant),u_is_size_feature_constant:new a.bQ(O,l.u_is_size_feature_constant),u_size_t:new a.bg(O,l.u_size_t),u_size:new a.bg(O,l.u_size),u_camera_to_center_distance:new a.bg(O,l.u_camera_to_center_distance),u_pitch:new a.bg(O,l.u_pitch),u_rotate_symbol:new a.bQ(O,l.u_rotate_symbol),u_aspect_ratio:new a.bg(O,l.u_aspect_ratio),u_fade_change:new a.bg(O,l.u_fade_change),u_label_plane_matrix:new a.bS(O,l.u_label_plane_matrix),u_coord_matrix:new a.bS(O,l.u_coord_matrix),u_is_text:new a.bQ(O,l.u_is_text),u_pitch_with_map:new a.bQ(O,l.u_pitch_with_map),u_is_along_line:new a.bQ(O,l.u_is_along_line),u_is_variable_anchor:new a.bQ(O,l.u_is_variable_anchor),u_texsize:new a.bV(O,l.u_texsize),u_texsize_icon:new a.bV(O,l.u_texsize_icon),u_texture:new a.bQ(O,l.u_texture),u_texture_icon:new a.bQ(O,l.u_texture_icon),u_gamma_scale:new a.bg(O,l.u_gamma_scale),u_device_pixel_ratio:new a.bg(O,l.u_device_pixel_ratio),u_is_halo:new a.bQ(O,l.u_is_halo),u_translation:new a.bV(O,l.u_translation),u_pitched_scale:new a.bg(O,l.u_pitched_scale)}),background:(O,l)=>({u_opacity:new a.bg(O,l.u_opacity),u_color:new a.bR(O,l.u_color)}),backgroundPattern:(O,l)=>({u_opacity:new a.bg(O,l.u_opacity),u_image:new a.bQ(O,l.u_image),u_pattern_tl_a:new a.bV(O,l.u_pattern_tl_a),u_pattern_br_a:new a.bV(O,l.u_pattern_br_a),u_pattern_tl_b:new a.bV(O,l.u_pattern_tl_b),u_pattern_br_b:new a.bV(O,l.u_pattern_br_b),u_texsize:new a.bV(O,l.u_texsize),u_mix:new a.bg(O,l.u_mix),u_pattern_size_a:new a.bV(O,l.u_pattern_size_a),u_pattern_size_b:new a.bV(O,l.u_pattern_size_b),u_scale_a:new a.bg(O,l.u_scale_a),u_scale_b:new a.bg(O,l.u_scale_b),u_pixel_coord_upper:new a.bV(O,l.u_pixel_coord_upper),u_pixel_coord_lower:new a.bV(O,l.u_pixel_coord_lower),u_tile_units_to_pixels:new a.bg(O,l.u_tile_units_to_pixels)}),terrain:(O,l)=>({u_texture:new a.bQ(O,l.u_texture),u_ele_delta:new a.bg(O,l.u_ele_delta),u_fog_matrix:new a.bS(O,l.u_fog_matrix),u_fog_color:new a.bR(O,l.u_fog_color),u_fog_ground_blend:new a.bg(O,l.u_fog_ground_blend),u_fog_ground_blend_opacity:new a.bg(O,l.u_fog_ground_blend_opacity),u_horizon_color:new a.bR(O,l.u_horizon_color),u_horizon_fog_blend:new a.bg(O,l.u_horizon_fog_blend),u_is_globe_mode:new a.bg(O,l.u_is_globe_mode)}),terrainDepth:(O,l)=>({u_ele_delta:new a.bg(O,l.u_ele_delta)}),terrainCoords:(O,l)=>({u_texture:new a.bQ(O,l.u_texture),u_terrain_coords_id:new a.bg(O,l.u_terrain_coords_id),u_ele_delta:new a.bg(O,l.u_ele_delta)}),projectionErrorMeasurement:(O,l)=>({u_input:new a.bg(O,l.u_input),u_output_expected:new a.bg(O,l.u_output_expected)}),atmosphere:(O,l)=>({u_sun_pos:new a.bU(O,l.u_sun_pos),u_atmosphere_blend:new a.bg(O,l.u_atmosphere_blend),u_globe_position:new a.bU(O,l.u_globe_position),u_globe_radius:new a.bg(O,l.u_globe_radius),u_inv_proj_matrix:new a.bS(O,l.u_inv_proj_matrix)}),sky:(O,l)=>({u_sky_color:new a.bR(O,l.u_sky_color),u_horizon_color:new a.bR(O,l.u_horizon_color),u_horizon:new a.bV(O,l.u_horizon),u_horizon_normal:new a.bV(O,l.u_horizon_normal),u_sky_horizon_blend:new a.bg(O,l.u_sky_horizon_blend),u_sky_blend:new a.bg(O,l.u_sky_blend)})};class xA{constructor(l,p,C){this.context=l;const E=l.gl;this.buffer=E.createBuffer(),this.dynamicDraw=!!C,this.context.unbindVAO(),l.bindElementBuffer.set(this.buffer),E.bufferData(E.ELEMENT_ARRAY_BUFFER,p.arrayBuffer,this.dynamicDraw?E.DYNAMIC_DRAW:E.STATIC_DRAW),this.dynamicDraw||delete p.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(l){const p=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),p.bufferSubData(p.ELEMENT_ARRAY_BUFFER,0,l.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Nm={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Gm{constructor(l,p,C,E){this.length=p.length,this.attributes=C,this.itemSize=p.bytesPerElement,this.dynamicDraw=E,this.context=l;const B=l.gl;this.buffer=B.createBuffer(),l.bindVertexBuffer.set(this.buffer),B.bufferData(B.ARRAY_BUFFER,p.arrayBuffer,this.dynamicDraw?B.DYNAMIC_DRAW:B.STATIC_DRAW),this.dynamicDraw||delete p.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(l){if(l.length!==this.length)throw new Error(`Length of new data is ${l.length}, which doesn't match current length of ${this.length}`);const p=this.context.gl;this.bind(),p.bufferSubData(p.ARRAY_BUFFER,0,l.arrayBuffer)}enableAttributes(l,p){for(let C=0;C<this.attributes.length;C++){const E=p.attributes[this.attributes[C].name];E!==void 0&&l.enableVertexAttribArray(E)}}setVertexAttribPointers(l,p,C){for(let E=0;E<this.attributes.length;E++){const B=this.attributes[E],U=p.attributes[B.name];U!==void 0&&l.vertexAttribPointer(U,B.components,l[Nm[B.type]],!1,this.itemSize,B.offset+this.itemSize*(C||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class ao{constructor(l){this.gl=l.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(l){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Wm extends ao{getDefault(){return a.bf.transparent}set(l){const p=this.current;(l.r!==p.r||l.g!==p.g||l.b!==p.b||l.a!==p.a||this.dirty)&&(this.gl.clearColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class Lh extends ao{getDefault(){return 1}set(l){(l!==this.current||this.dirty)&&(this.gl.clearDepth(l),this.current=l,this.dirty=!1)}}class Ut extends ao{getDefault(){return 0}set(l){(l!==this.current||this.dirty)&&(this.gl.clearStencil(l),this.current=l,this.dirty=!1)}}class sn extends ao{getDefault(){return[!0,!0,!0,!0]}set(l){const p=this.current;(l[0]!==p[0]||l[1]!==p[1]||l[2]!==p[2]||l[3]!==p[3]||this.dirty)&&(this.gl.colorMask(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class nn extends ao{getDefault(){return!0}set(l){(l!==this.current||this.dirty)&&(this.gl.depthMask(l),this.current=l,this.dirty=!1)}}class mi extends ao{getDefault(){return 255}set(l){(l!==this.current||this.dirty)&&(this.gl.stencilMask(l),this.current=l,this.dirty=!1)}}class vr extends ao{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(l){const p=this.current;(l.func!==p.func||l.ref!==p.ref||l.mask!==p.mask||this.dirty)&&(this.gl.stencilFunc(l.func,l.ref,l.mask),this.current=l,this.dirty=!1)}}class Vr extends ao{getDefault(){const l=this.gl;return[l.KEEP,l.KEEP,l.KEEP]}set(l){const p=this.current;(l[0]!==p[0]||l[1]!==p[1]||l[2]!==p[2]||this.dirty)&&(this.gl.stencilOp(l[0],l[1],l[2]),this.current=l,this.dirty=!1)}}class ks extends ao{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const p=this.gl;l?p.enable(p.STENCIL_TEST):p.disable(p.STENCIL_TEST),this.current=l,this.dirty=!1}}class Wo extends ao{getDefault(){return[0,1]}set(l){const p=this.current;(l[0]!==p[0]||l[1]!==p[1]||this.dirty)&&(this.gl.depthRange(l[0],l[1]),this.current=l,this.dirty=!1)}}class Dp extends ao{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const p=this.gl;l?p.enable(p.DEPTH_TEST):p.disable(p.DEPTH_TEST),this.current=l,this.dirty=!1}}class MA extends ao{getDefault(){return this.gl.LESS}set(l){(l!==this.current||this.dirty)&&(this.gl.depthFunc(l),this.current=l,this.dirty=!1)}}class Pl extends ao{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const p=this.gl;l?p.enable(p.BLEND):p.disable(p.BLEND),this.current=l,this.dirty=!1}}class Fh extends ao{getDefault(){const l=this.gl;return[l.ONE,l.ZERO]}set(l){const p=this.current;(l[0]!==p[0]||l[1]!==p[1]||this.dirty)&&(this.gl.blendFunc(l[0],l[1]),this.current=l,this.dirty=!1)}}class Qm extends ao{getDefault(){return a.bf.transparent}set(l){const p=this.current;(l.r!==p.r||l.g!==p.g||l.b!==p.b||l.a!==p.a||this.dirty)&&(this.gl.blendColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class Dc extends ao{getDefault(){return this.gl.FUNC_ADD}set(l){(l!==this.current||this.dirty)&&(this.gl.blendEquation(l),this.current=l,this.dirty=!1)}}class zh extends ao{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const p=this.gl;l?p.enable(p.CULL_FACE):p.disable(p.CULL_FACE),this.current=l,this.dirty=!1}}class nh extends ao{getDefault(){return this.gl.BACK}set(l){(l!==this.current||this.dirty)&&(this.gl.cullFace(l),this.current=l,this.dirty=!1)}}class kr extends ao{getDefault(){return this.gl.CCW}set(l){(l!==this.current||this.dirty)&&(this.gl.frontFace(l),this.current=l,this.dirty=!1)}}class p0 extends ao{getDefault(){return null}set(l){(l!==this.current||this.dirty)&&(this.gl.useProgram(l),this.current=l,this.dirty=!1)}}class Pp extends ao{getDefault(){return this.gl.TEXTURE0}set(l){(l!==this.current||this.dirty)&&(this.gl.activeTexture(l),this.current=l,this.dirty=!1)}}class Ul extends ao{getDefault(){const l=this.gl;return[0,0,l.drawingBufferWidth,l.drawingBufferHeight]}set(l){const p=this.current;(l[0]!==p[0]||l[1]!==p[1]||l[2]!==p[2]||l[3]!==p[3]||this.dirty)&&(this.gl.viewport(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class wA extends ao{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const p=this.gl;p.bindFramebuffer(p.FRAMEBUFFER,l),this.current=l,this.dirty=!1}}class uu extends ao{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const p=this.gl;p.bindRenderbuffer(p.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class ih extends ao{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const p=this.gl;p.bindTexture(p.TEXTURE_2D,l),this.current=l,this.dirty=!1}}class SA extends ao{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const p=this.gl;p.bindBuffer(p.ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class Bu extends ao{getDefault(){return null}set(l){const p=this.gl;p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class jh extends ao{getDefault(){return null}set(l){var p;if(l===this.current&&!this.dirty)return;const C=this.gl;jn(C)?C.bindVertexArray(l):(p=C.getExtension("OES_vertex_array_object"))===null||p===void 0||p.bindVertexArrayOES(l),this.current=l,this.dirty=!1}}class rh extends ao{getDefault(){return 4}set(l){if(l===this.current&&!this.dirty)return;const p=this.gl;p.pixelStorei(p.UNPACK_ALIGNMENT,l),this.current=l,this.dirty=!1}}class cu extends ao{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const p=this.gl;p.pixelStorei(p.UNPACK_PREMULTIPLY_ALPHA_WEBGL,l),this.current=l,this.dirty=!1}}class qm extends ao{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const p=this.gl;p.pixelStorei(p.UNPACK_FLIP_Y_WEBGL,l),this.current=l,this.dirty=!1}}class oh extends ao{constructor(l,p){super(l),this.context=l,this.parent=p}getDefault(){return null}}class hr extends oh{setDirty(){this.dirty=!0}set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const p=this.gl;p.framebufferTexture2D(p.FRAMEBUFFER,p.COLOR_ATTACHMENT0,p.TEXTURE_2D,l,0),this.current=l,this.dirty=!1}}class Up extends oh{set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const p=this.gl;p.framebufferRenderbuffer(p.FRAMEBUFFER,p.DEPTH_ATTACHMENT,p.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class yl extends oh{set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const p=this.gl;p.framebufferRenderbuffer(p.FRAMEBUFFER,p.DEPTH_STENCIL_ATTACHMENT,p.RENDERBUFFER,l),this.current=l,this.dirty=!1}}const sA="Framebuffer is not complete";class Kl{constructor(l,p,C,E,B){this.context=l,this.width=p,this.height=C;const U=l.gl,G=this.framebuffer=U.createFramebuffer();if(this.colorAttachment=new hr(l,G),E)this.depthAttachment=B?new yl(l,G):new Up(l,G);else if(B)throw new Error("Stencil cannot be set without depth");if(U.checkFramebufferStatus(U.FRAMEBUFFER)!==U.FRAMEBUFFER_COMPLETE)throw new Error(sA)}destroy(){const l=this.context.gl,p=this.colorAttachment.get();if(p&&l.deleteTexture(p),this.depthAttachment){const C=this.depthAttachment.get();C&&l.deleteRenderbuffer(C)}l.deleteFramebuffer(this.framebuffer)}}class S1{constructor(l){var p,C;if(this.gl=l,this.clearColor=new Wm(this),this.clearDepth=new Lh(this),this.clearStencil=new Ut(this),this.colorMask=new sn(this),this.depthMask=new nn(this),this.stencilMask=new mi(this),this.stencilFunc=new vr(this),this.stencilOp=new Vr(this),this.stencilTest=new ks(this),this.depthRange=new Wo(this),this.depthTest=new Dp(this),this.depthFunc=new MA(this),this.blend=new Pl(this),this.blendFunc=new Fh(this),this.blendColor=new Qm(this),this.blendEquation=new Dc(this),this.cullFace=new zh(this),this.cullFaceSide=new nh(this),this.frontFace=new kr(this),this.program=new p0(this),this.activeTexture=new Pp(this),this.viewport=new Ul(this),this.bindFramebuffer=new wA(this),this.bindRenderbuffer=new uu(this),this.bindTexture=new ih(this),this.bindVertexBuffer=new SA(this),this.bindElementBuffer=new Bu(this),this.bindVertexArray=new jh(this),this.pixelStoreUnpack=new rh(this),this.pixelStoreUnpackPremultiplyAlpha=new cu(this),this.pixelStoreUnpackFlipY=new qm(this),this.extTextureFilterAnisotropic=l.getExtension("EXT_texture_filter_anisotropic")||l.getExtension("MOZ_EXT_texture_filter_anisotropic")||l.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=l.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=l.getParameter(l.MAX_TEXTURE_SIZE),jn(l)){this.HALF_FLOAT=l.HALF_FLOAT;const E=l.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(p=l.RGBA16F)!==null&&p!==void 0?p:E?.RGBA16F_EXT,this.RGB16F=(C=l.RGB16F)!==null&&C!==void 0?C:E?.RGB16F_EXT,l.getExtension("EXT_color_buffer_float")}else{l.getExtension("EXT_color_buffer_half_float"),l.getExtension("OES_texture_half_float_linear");const E=l.getExtension("OES_texture_half_float");this.HALF_FLOAT=E?.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(l,p){return new xA(this,l,p)}createVertexBuffer(l,p,C){return new Gm(this,l,p,C)}createRenderbuffer(l,p,C){const E=this.gl,B=E.createRenderbuffer();return this.bindRenderbuffer.set(B),E.renderbufferStorage(E.RENDERBUFFER,l,p,C),this.bindRenderbuffer.set(null),B}createFramebuffer(l,p,C,E){return new Kl(this,l,p,C,E)}clear({color:l,depth:p,stencil:C}){const E=this.gl;let B=0;l&&(B|=E.COLOR_BUFFER_BIT,this.clearColor.set(l),this.colorMask.set([!0,!0,!0,!0])),p!==void 0&&(B|=E.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(p),this.depthMask.set(!0)),C!==void 0&&(B|=E.STENCIL_BUFFER_BIT,this.clearStencil.set(C),this.stencilMask.set(255)),E.clear(B)}setCullFace(l){l.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(l.mode),this.frontFace.set(l.frontFace))}setDepthMode(l){l.func!==this.gl.ALWAYS||l.mask?(this.depthTest.set(!0),this.depthFunc.set(l.func),this.depthMask.set(l.mask),this.depthRange.set(l.range)):this.depthTest.set(!1)}setStencilMode(l){l.test.func!==this.gl.ALWAYS||l.mask?(this.stencilTest.set(!0),this.stencilMask.set(l.mask),this.stencilOp.set([l.fail,l.depthFail,l.pass]),this.stencilFunc.set({func:l.test.func,ref:l.ref,mask:l.test.mask})):this.stencilTest.set(!1)}setColorMode(l){a.bH(l.blendFunction,Nr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(l.blendFunction),this.blendColor.set(l.blendColor)),this.colorMask.set(l.mask)}createVertexArray(){var l;return jn(this.gl)?this.gl.createVertexArray():(l=this.gl.getExtension("OES_vertex_array_object"))===null||l===void 0?void 0:l.createVertexArrayOES()}deleteVertexArray(l){var p;return jn(this.gl)?this.gl.deleteVertexArray(l):(p=this.gl.getExtension("OES_vertex_array_object"))===null||p===void 0?void 0:p.deleteVertexArrayOES(l)}unbindVAO(){this.bindVertexArray.set(null)}}let Ud;function sh(O,l,p,C,E){const B=O.context,U=O.transform,G=B.gl,Z=O.useProgram("collisionBox"),ae=[];let ce=0,me=0;for(let et=0;et<C.length;et++){const ot=C[et],ht=l.getTile(ot).getBucket(p);if(!ht)continue;const ut=E?ht.textCollisionBox:ht.iconCollisionBox,gt=ht.collisionCircleArray;gt.length>0&&(ae.push({circleArray:gt,circleOffset:me,coord:ot}),ce+=gt.length/4,me=ce),ut&&Z.draw(B,G.LINES,X.disabled,Qe.disabled,O.colorModeForRenderPass(),Ai.disabled,x1(O.transform),O.style.map.terrain&&O.style.map.terrain.getTerrainData(ot),U.getProjectionData({overscaledTileID:ot,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),p.id,ut.layoutVertexBuffer,ut.indexBuffer,ut.segments,null,O.transform.zoom,null,null,ut.collisionVertexBuffer)}if(!E||!ae.length)return;const ge=O.useProgram("collisionCircle"),Pe=new a.c0;Pe.resize(4*ce),Pe._trim();let Ne=0;for(const et of ae)for(let ot=0;ot<et.circleArray.length/4;ot++){const ht=4*ot,ut=et.circleArray[ht+0],gt=et.circleArray[ht+1],xt=et.circleArray[ht+2],ct=et.circleArray[ht+3];Pe.emplace(Ne++,ut,gt,xt,ct,0),Pe.emplace(Ne++,ut,gt,xt,ct,1),Pe.emplace(Ne++,ut,gt,xt,ct,2),Pe.emplace(Ne++,ut,gt,xt,ct,3)}(!Ud||Ud.length<2*ce)&&(Ud=(function(et){const ot=2*et,ht=new a.c2;ht.resize(ot),ht._trim();for(let ut=0;ut<ot;ut++){const gt=6*ut;ht.uint16[gt+0]=4*ut+0,ht.uint16[gt+1]=4*ut+1,ht.uint16[gt+2]=4*ut+2,ht.uint16[gt+3]=4*ut+2,ht.uint16[gt+4]=4*ut+3,ht.uint16[gt+5]=4*ut+0}return ht})(ce));const Ze=B.createIndexBuffer(Ud,!0),Xe=B.createVertexBuffer(Pe,a.c1.members,!0);for(const et of ae){const ot=Rc(O.transform);ge.draw(B,G.TRIANGLES,X.disabled,Qe.disabled,O.colorModeForRenderPass(),Ai.disabled,ot,O.style.map.terrain&&O.style.map.terrain.getTerrainData(et.coord),null,p.id,Xe,Ze,a.aM.simpleSegment(0,2*et.circleOffset,et.circleArray.length,et.circleArray.length/2),null,O.transform.zoom,null,null,null)}Xe.destroy(),Ze.destroy()}const Kf=a.ag(new Float32Array(16));function Kd(O,l,p,C,E,B){const{horizontalAlign:U,verticalAlign:G}=a.aH(O);return new a.P((-(U-.5)*l/E+C[0])*B,(-(G-.5)*p/E+C[1])*B)}function Nh(O,l,p,C,E,B){const U=l.tileAnchorPoint.add(new a.P(l.translation[0],l.translation[1]));if(l.pitchWithMap){let G=C.mult(B);p||(G=G.rotate(-E));const Z=U.add(G);return on(Z.x,Z.y,l.pitchedLabelPlaneMatrix,l.getElevation).point}if(p){const G=Ra(l.tileAnchorPoint.x+1,l.tileAnchorPoint.y,l).point.sub(O),Z=Math.atan(G.y/G.x)+(G.x<0?Math.PI:0);return O.add(C.rotate(Z))}return O.add(C)}function Kp(O,l,p,C,E,B,U,G,Z,ae,ce,me){const ge=O.text.placedSymbolArray,Pe=O.text.dynamicLayoutVertexArray,Ne=O.icon.dynamicLayoutVertexArray,Ze={};Pe.clear();for(let Xe=0;Xe<ge.length;Xe++){const et=ge.get(Xe),ot=et.hidden||!et.crossTileID||O.allowVerticalPlacement&&!et.placedOrientation?null:C[et.crossTileID];if(ot){const ht=new a.P(et.anchorX,et.anchorY),ut={getElevation:me,width:E.width,height:E.height,pitchedLabelPlaneMatrix:B,pitchWithMap:p,transform:E,tileAnchorPoint:ht,translation:ae,unwrappedTileID:ce},gt=p?Pi(ht.x,ht.y,ut):Ra(ht.x,ht.y,ut),xt=nr(E.cameraToCenterDistance,gt.signedDistanceFromCamera);let ct=a.ap(O.textSizeData,G,et)*xt/a.aB;p&&(ct*=O.tilePixelRatio/U);const{width:wt,height:Wt,anchor:Lt,textOffset:Nt,textBoxScale:Gt}=ot,Bn=Kd(Lt,wt,Wt,Nt,Gt,ct),kn=E.getPitchedTextCorrection(ht.x+ae[0],ht.y+ae[1],ce),cn=Nh(gt.point,ut,l,Bn,-E.bearingInRadians,kn),si=O.allowVerticalPlacement&&et.placedOrientation===a.ao.vertical?Math.PI/2:0;for(let Xi=0;Xi<et.numGlyphs;Xi++)a.av(Pe,cn,si);Z&&et.associatedIconIndex>=0&&(Ze[et.associatedIconIndex]={shiftedAnchor:cn,angle:si})}else Xs(et.numGlyphs,Pe)}if(Z){Ne.clear();const Xe=O.icon.placedSymbolArray;for(let et=0;et<Xe.length;et++){const ot=Xe.get(et);if(ot.hidden)Xs(ot.numGlyphs,Ne);else{const ht=Ze[et];if(ht)for(let ut=0;ut<ot.numGlyphs;ut++)a.av(Ne,ht.shiftedAnchor,ht.angle);else Xs(ot.numGlyphs,Ne)}}O.icon.dynamicLayoutVertexBuffer.updateData(Ne)}O.text.dynamicLayoutVertexBuffer.updateData(Pe)}function Ll(O,l,p){return p.iconsInText&&l?"symbolTextAndIcon":O?"symbolSDF":"symbolIcon"}function ah(O,l,p,C,E,B,U,G,Z,ae,ce,me,ge){const Pe=O.context,Ne=Pe.gl,Ze=O.transform,Xe=G==="map",et=Z==="map",ot=G!=="viewport"&&p.layout.get("symbol-placement")!=="point",ht=Xe&&!et&&!ot,ut=!p.layout.get("symbol-sort-key").isConstant();let gt=!1;const xt=O.getDepthModeForSublayer(0,X.ReadOnly),ct=p._unevaluatedLayout.hasValue("text-variable-anchor")||p._unevaluatedLayout.hasValue("text-variable-anchor-offset"),wt=[],Wt=Ze.getCircleRadiusCorrection();for(const Lt of C){const Nt=l.getTile(Lt),Gt=Nt.getBucket(p);if(!Gt)continue;const Bn=E?Gt.text:Gt.icon;if(!Bn||!Bn.segments.get().length||!Bn.hasVisibleVertices)continue;const kn=Bn.programConfigurations.get(p.id),cn=E||Gt.sdfIcons,si=E?Gt.textSizeData:Gt.iconSizeData,Xi=et||Ze.pitch!==0,Er=O.useProgram(Ll(cn,E,Gt),kn),Eo=a.an(si,Ze.zoom),Wr=O.style.map.terrain&&O.style.map.terrain.getTerrainData(Lt);let es,Qo,Br,Rs,Al=[0,0],la=null;if(E)Qo=Nt.glyphAtlasTexture,Br=Ne.LINEAR,es=Nt.glyphAtlasTexture.size,Gt.iconsInText&&(Al=Nt.imageAtlasTexture.size,la=Nt.imageAtlasTexture,Rs=Xi||O.options.rotating||O.options.zooming||si.kind==="composite"||si.kind==="camera"?Ne.LINEAR:Ne.NEAREST);else{const Ns=p.layout.get("icon-size").constantOr(0)!==1||Gt.iconsNeedLinear;Qo=Nt.imageAtlasTexture,Br=cn||O.options.rotating||O.options.zooming||Ns||Xi?Ne.LINEAR:Ne.NEAREST,es=Nt.imageAtlasTexture.size}const ra=a.aC(Nt,1,O.transform.zoom),Cl=ii(Xe,O.transform,ra),ph=a.L();a.aq(ph,Cl);const Uu=Fi(et,Xe,O.transform,ra),TA=a.aD(Ze,Nt,B,U),va=Ze.getProjectionData({overscaledTileID:Lt,applyGlobeMatrix:!ge,applyTerrainMatrix:!0}),du=ct&&Gt.hasTextData(),Wd=p.layout.get("icon-text-fit")!=="none"&&du&&Gt.hasIconData();if(ot){const Ns=O.style.map.terrain?($a,ua)=>O.style.map.terrain.getElevation(Lt,$a,ua):null,ba=p.layout.get("text-rotation-alignment")==="map";Co(Gt,O,E,Cl,ph,et,ae,ba,Lt.toUnwrapped(),Ze.width,Ze.height,TA,Ns)}const RA=E&&ct||Wd,Ql=ot||RA?Kf:et?Cl:O.transform.clipSpaceToPixelsMatrix,_l=cn&&p.paint.get(E?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let jc;jc=cn?Gt.iconsInText?M1(si.kind,Eo,ht,et,ot,RA,O,Ql,Uu,TA,es,Al,Wt):f0(si.kind,Eo,ht,et,ot,RA,O,Ql,Uu,TA,E,es,0,Wt):Rp(si.kind,Eo,ht,et,ot,RA,O,Ql,Uu,TA,E,es,Wt);const fu={program:Er,buffers:Bn,uniformValues:jc,projectionData:va,atlasTexture:Qo,atlasTextureIcon:la,atlasInterpolation:Br,atlasInterpolationIcon:Rs,isSDF:cn,hasHalo:_l};if(ut&&Gt.canOverlap){gt=!0;const Ns=Bn.segments.get();for(const ba of Ns)wt.push({segments:new a.aM([ba]),sortKey:ba.sortKey,state:fu,terrainData:Wr})}else wt.push({segments:Bn.segments,sortKey:0,state:fu,terrainData:Wr})}gt&&wt.sort(((Lt,Nt)=>Lt.sortKey-Nt.sortKey));for(const Lt of wt){const Nt=Lt.state;if(Pe.activeTexture.set(Ne.TEXTURE0),Nt.atlasTexture.bind(Nt.atlasInterpolation,Ne.CLAMP_TO_EDGE),Nt.atlasTextureIcon&&(Pe.activeTexture.set(Ne.TEXTURE1),Nt.atlasTextureIcon&&Nt.atlasTextureIcon.bind(Nt.atlasInterpolationIcon,Ne.CLAMP_TO_EDGE)),Nt.isSDF){const Gt=Nt.uniformValues;Nt.hasHalo&&(Gt.u_is_halo=1,Gh(Nt.buffers,Lt.segments,p,O,Nt.program,xt,ce,me,Gt,Nt.projectionData,Lt.terrainData)),Gt.u_is_halo=0}Gh(Nt.buffers,Lt.segments,p,O,Nt.program,xt,ce,me,Nt.uniformValues,Nt.projectionData,Lt.terrainData)}}function Gh(O,l,p,C,E,B,U,G,Z,ae,ce){const me=C.context;E.draw(me,me.gl.TRIANGLES,B,U,G,Ai.backCCW,Z,ce,ae,p.id,O.layoutVertexBuffer,O.indexBuffer,l,p.paint,C.transform.zoom,O.programConfigurations.get(p.id),O.dynamicLayoutVertexBuffer,O.opacityVertexBuffer)}function Ts(O,l,p,C,E){const B=O.context,U=B.gl,G=Qe.disabled,Z=new Nr([U.ONE,U.ONE],a.bf.transparent,[!0,!0,!0,!0]),ae=l.getBucket(p);if(!ae)return;const ce=C.key;let me=p.heatmapFbos.get(ce);me||(me=Fl(B,l.tileSize,l.tileSize),p.heatmapFbos.set(ce,me)),B.bindFramebuffer.set(me.framebuffer),B.viewport.set([0,0,l.tileSize,l.tileSize]),B.clear({color:a.bf.transparent});const ge=ae.programConfigurations.get(p.id),Pe=O.useProgram("heatmap",ge,!E),Ne=O.transform.getProjectionData({overscaledTileID:l.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),Ze=O.style.map.terrain.getTerrainData(C);Pe.draw(B,U.TRIANGLES,X.disabled,G,Z,Ai.disabled,Op(l,O.transform.zoom,p.paint.get("heatmap-intensity"),1),Ze,Ne,p.id,ae.layoutVertexBuffer,ae.indexBuffer,ae.segments,p.paint,O.transform.zoom,ge)}function ta(O,l,p,C,E){const B=O.context,U=B.gl,G=O.transform;B.setColorMode(O.colorModeForRenderPass());const Z=sl(B,l),ae=p.key,ce=l.heatmapFbos.get(ae);if(!ce)return;B.activeTexture.set(U.TEXTURE0),U.bindTexture(U.TEXTURE_2D,ce.colorAttachment.get()),B.activeTexture.set(U.TEXTURE1),Z.bind(U.LINEAR,U.CLAMP_TO_EDGE);const me=G.getProjectionData({overscaledTileID:p,applyTerrainMatrix:E,applyGlobeMatrix:!C});O.useProgram("heatmapTexture").draw(B,U.TRIANGLES,X.disabled,Qe.disabled,O.colorModeForRenderPass(),Ai.disabled,Rf(O,l,0,1),null,me,l.id,O.rasterBoundsBuffer,O.quadTriangleIndexBuffer,O.rasterBoundsSegments,l.paint,G.zoom),ce.destroy(),l.heatmapFbos.delete(ae)}function Fl(O,l,p){var C,E;const B=O.gl,U=B.createTexture();B.bindTexture(B.TEXTURE_2D,U),B.texParameteri(B.TEXTURE_2D,B.TEXTURE_WRAP_S,B.CLAMP_TO_EDGE),B.texParameteri(B.TEXTURE_2D,B.TEXTURE_WRAP_T,B.CLAMP_TO_EDGE),B.texParameteri(B.TEXTURE_2D,B.TEXTURE_MIN_FILTER,B.LINEAR),B.texParameteri(B.TEXTURE_2D,B.TEXTURE_MAG_FILTER,B.LINEAR);const G=(C=O.HALF_FLOAT)!==null&&C!==void 0?C:B.UNSIGNED_BYTE,Z=(E=O.RGBA16F)!==null&&E!==void 0?E:B.RGBA;B.texImage2D(B.TEXTURE_2D,0,Z,l,p,0,B.RGBA,G,null);const ae=O.createFramebuffer(l,p,!1,!1);return ae.colorAttachment.set(U),ae}function sl(O,l){return l.colorRampTexture||(l.colorRampTexture=new a.T(O,l.colorRamp,O.gl.RGBA)),l.colorRampTexture}function Pc(O,l,p,C,E,B,U,G){let Z=256;if(E.stepInterpolant){const ae=l.getSource().maxzoom,ce=U.canonical.z===ae?Math.ceil(1<<O.transform.maxZoom-U.canonical.z):1;Z=a.ah(a.c4(B.maxLineLength/a.$*1024*ce),256,p.maxTextureSize)}return G.gradient=a.c5({expression:E.gradientExpression(),evaluationKey:"lineProgress",resolution:Z,image:G.gradient||void 0,clips:B.lineClipsArray}),G.texture?G.texture.update(G.gradient):G.texture=new a.T(p,G.gradient,C.RGBA),G.version=E.gradientVersion,G.texture}function EA(O,l,p,C,E){O.activeTexture.set(l.TEXTURE0),p.imageAtlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE),C.updatePaintBuffers(E)}function zl(O,l,p,C,E,B){(E||O.lineAtlas.dirty)&&(l.activeTexture.set(p.TEXTURE0),O.lineAtlas.bind(l)),C.updatePaintBuffers(B)}function sc(O,l,p,C,E,B,U){const G=B.gradients[E.id];let Z=G.texture;E.gradientVersion!==G.version&&(Z=Pc(O,l,p,C,E,B,U,G)),p.activeTexture.set(C.TEXTURE0),Z.bind(E.stepInterpolant?C.NEAREST:C.LINEAR,C.CLAMP_TO_EDGE)}function Lp(O,l,p,C,E,B,U,G,Z){const ae=B.gradients[E.id];let ce=ae.texture;E.gradientVersion!==ae.version&&(ce=Pc(O,l,p,C,E,B,U,ae)),p.activeTexture.set(C.TEXTURE0),ce.bind(E.stepInterpolant?C.NEAREST:C.LINEAR,C.CLAMP_TO_EDGE),p.activeTexture.set(C.TEXTURE1),O.lineAtlas.bind(p),G.updatePaintBuffers(Z)}function Uc(O,l,p,C,E){if(!p||!C||!C.imageAtlas)return;const B=C.imageAtlas.patternPositions;let U=B[p.to.toString()],G=B[p.from.toString()];if(!U&&G&&(U=G),!G&&U&&(G=U),!U||!G){const Z=E.getPaintProperty(l);U=B[Z],G=B[Z]}U&&G&&O.setConstantPatternPositions(U,G)}function OA(O,l,p,C,E,B,U,G){const Z=O.context.gl,ae="fill-pattern",ce=p.paint.get(ae),me=ce&&ce.constantOr(1),ge=p.getCrossfadeParameters();let Pe,Ne,Ze,Xe,et;const ot=O.transform,ht=p.paint.get("fill-translate"),ut=p.paint.get("fill-translate-anchor");U?(Ne=me&&!p.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Pe=Z.LINES):(Ne=me?"fillPattern":"fill",Pe=Z.TRIANGLES);const gt=ce.constantOr(null);for(const xt of C){const ct=l.getTile(xt);if(me&&!ct.patternsLoaded())continue;const wt=ct.getBucket(p);if(!wt)continue;const Wt=wt.programConfigurations.get(p.id),Lt=O.useProgram(Ne,Wt),Nt=O.style.map.terrain&&O.style.map.terrain.getTerrainData(xt);me&&(O.context.activeTexture.set(Z.TEXTURE0),ct.imageAtlasTexture.bind(Z.LINEAR,Z.CLAMP_TO_EDGE),Wt.updatePaintBuffers(ge)),Uc(Wt,ae,gt,ct,p);const Gt=ot.getProjectionData({overscaledTileID:xt,applyGlobeMatrix:!G,applyTerrainMatrix:!0}),Bn=a.aD(ot,ct,ht,ut);if(U){Xe=wt.indexBuffer2,et=wt.segments2;const cn=[Z.drawingBufferWidth,Z.drawingBufferHeight];Ze=Ne==="fillOutlinePattern"&&me?Fm(O,ge,ct,cn,Bn):Tf(cn,Bn)}else Xe=wt.indexBuffer,et=wt.segments,Ze=me?Dh(O,ge,ct,Bn):{u_fill_translate:Bn};const kn=O.stencilModeForClipping(xt);Lt.draw(O.context,Pe,E,kn,B,Ai.backCCW,Ze,Nt,Gt,p.id,wt.layoutVertexBuffer,Xe,et,p.paint,O.transform.zoom,Wt)}}function lh(O,l,p,C,E,B,U,G){const Z=O.context,ae=Z.gl,ce="fill-extrusion-pattern",me=p.paint.get(ce),ge=me.constantOr(1),Pe=p.getCrossfadeParameters(),Ne=p.paint.get("fill-extrusion-opacity"),Ze=me.constantOr(null),Xe=O.transform;for(const et of C){const ot=l.getTile(et),ht=ot.getBucket(p);if(!ht)continue;const ut=O.style.map.terrain&&O.style.map.terrain.getTerrainData(et),gt=ht.programConfigurations.get(p.id),xt=O.useProgram(ge?"fillExtrusionPattern":"fillExtrusion",gt);ge&&(O.context.activeTexture.set(ae.TEXTURE0),ot.imageAtlasTexture.bind(ae.LINEAR,ae.CLAMP_TO_EDGE),gt.updatePaintBuffers(Pe));const ct=Xe.getProjectionData({overscaledTileID:et,applyGlobeMatrix:!G,applyTerrainMatrix:!0});Uc(gt,ce,Ze,ot,p);const wt=a.aD(Xe,ot,p.paint.get("fill-extrusion-translate"),p.paint.get("fill-extrusion-translate-anchor")),Wt=p.paint.get("fill-extrusion-vertical-gradient"),Lt=ge?Ep(O,Wt,Ne,wt,et,Pe,ot):Rh(O,Wt,Ne,wt);xt.draw(Z,Z.gl.TRIANGLES,E,B,U,Ai.backCCW,Lt,ut,ct,p.id,ht.layoutVertexBuffer,ht.indexBuffer,ht.segments,p.paint,O.transform.zoom,gt,O.style.map.terrain&&ht.centroidVertexBuffer)}}function na(O,l,p,C,E,B,U,G,Z){var ae;const ce=O.style.projection,me=O.context,ge=O.transform,Pe=me.gl,Ne=[`#define NUM_ILLUMINATION_SOURCES ${p.paint.get("hillshade-highlight-color").values.length}`],Ze=O.useProgram("hillshade",null,!1,Ne),Xe=!O.options.moving;for(const et of C){const ot=l.getTile(et),ht=ot.fbo;if(!ht)continue;const ut=ce.getMeshFromTileID(me,et.canonical,G,!0,"raster"),gt=(ae=O.style.map.terrain)===null||ae===void 0?void 0:ae.getTerrainData(et);me.activeTexture.set(Pe.TEXTURE0),Pe.bindTexture(Pe.TEXTURE_2D,ht.colorAttachment.get());const xt=ge.getProjectionData({overscaledTileID:et,aligned:Xe,applyGlobeMatrix:!Z,applyTerrainMatrix:!0});Ze.draw(me,Pe.TRIANGLES,B,E[et.overscaledZ],U,Ai.backCCW,zm(O,ot,p),gt,xt,p.id,ut.vertexBuffer,ut.indexBuffer,ut.segments)}}function lo(O,l,p,C,E,B,U,G,Z){var ae;const ce=O.style.projection,me=O.context,ge=O.transform,Pe=me.gl,Ne=O.useProgram("colorRelief"),Ze=!O.options.moving;let Xe=!0,et=0;for(const ot of C){const ht=l.getTile(ot),ut=ht.dem;if(Xe){const Lt=Pe.getParameter(Pe.MAX_TEXTURE_SIZE),{elevationTexture:Nt,colorTexture:Gt}=p.getColorRampTextures(me,Lt,ut.getUnpackVector());me.activeTexture.set(Pe.TEXTURE1),Nt.bind(Pe.NEAREST,Pe.CLAMP_TO_EDGE),me.activeTexture.set(Pe.TEXTURE4),Gt.bind(Pe.LINEAR,Pe.CLAMP_TO_EDGE),Xe=!1,et=Nt.size[0]}if(!ut||!ut.data)continue;const gt=ut.stride,xt=ut.getPixels();if(me.activeTexture.set(Pe.TEXTURE0),me.pixelStoreUnpackPremultiplyAlpha.set(!1),ht.demTexture=ht.demTexture||O.getTileTexture(gt),ht.demTexture){const Lt=ht.demTexture;Lt.update(xt,{premultiply:!1}),Lt.bind(Pe.LINEAR,Pe.CLAMP_TO_EDGE)}else ht.demTexture=new a.T(me,xt,Pe.RGBA,{premultiply:!1}),ht.demTexture.bind(Pe.LINEAR,Pe.CLAMP_TO_EDGE);const ct=ce.getMeshFromTileID(me,ot.canonical,G,!0,"raster"),wt=(ae=O.style.map.terrain)===null||ae===void 0?void 0:ae.getTerrainData(ot),Wt=ge.getProjectionData({overscaledTileID:ot,aligned:Ze,applyGlobeMatrix:!Z,applyTerrainMatrix:!0});Ne.draw(me,Pe.TRIANGLES,B,E[ot.overscaledZ],U,Ai.backCCW,Pf(p,ht.dem,et),wt,Wt,p.id,ct.vertexBuffer,ct.indexBuffer,ct.segments)}}const Gr=[new a.P(0,0),new a.P(a.$,0),new a.P(a.$,a.$),new a.P(0,a.$)];function aA(O,l,p,C,E,B,U,G,Z=!1,ae=!1){const ce=C[C.length-1].overscaledZ,me=O.context,ge=me.gl,Pe=O.useProgram("raster"),Ne=O.transform,Ze=O.style.projection,Xe=O.colorModeForRenderPass(),et=!O.options.moving,ot=p.paint.get("raster-opacity"),ht=p.paint.get("raster-resampling"),ut=p.paint.get("raster-fade-duration"),gt=!!O.style.map.terrain;for(const xt of C){const ct=O.getDepthModeForSublayer(xt.overscaledZ-ce,ot===1?X.ReadWrite:X.ReadOnly,ge.LESS),wt=l.getTile(xt),Wt=ht==="nearest"?ge.NEAREST:ge.LINEAR;me.activeTexture.set(ge.TEXTURE0),wt.texture.bind(Wt,ge.CLAMP_TO_EDGE,ge.LINEAR_MIPMAP_NEAREST),me.activeTexture.set(ge.TEXTURE1);const{parentTile:Lt,parentScaleBy:Nt,parentTopLeft:Gt,fadeValues:Bn}=ac(wt,l,ut,gt);wt.fadeOpacity=Bn.tileOpacity,Lt?(Lt.fadeOpacity=Bn.parentTileOpacity,Lt.texture.bind(Wt,ge.CLAMP_TO_EDGE,ge.LINEAR_MIPMAP_NEAREST)):wt.texture.bind(Wt,ge.CLAMP_TO_EDGE,ge.LINEAR_MIPMAP_NEAREST),wt.texture.useMipmap&&me.extTextureFilterAnisotropic&&O.transform.pitch>20&&ge.texParameterf(ge.TEXTURE_2D,me.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,me.extTextureFilterAnisotropicMax);const kn=O.style.map.terrain&&O.style.map.terrain.getTerrainData(xt),cn=Ne.getProjectionData({overscaledTileID:xt,aligned:et,applyGlobeMatrix:!ae,applyTerrainMatrix:!0}),si=Uf(Gt,Nt,Bn.fadeMix,p,G),Xi=Ze.getMeshFromTileID(me,xt.canonical,B,U,"raster");Pe.draw(me,ge.TRIANGLES,ct,E?E[xt.overscaledZ]:Qe.disabled,Xe,Z?Ai.frontCCW:Ai.backCCW,si,kn,cn,p.id,Xi.vertexBuffer,Xi.indexBuffer,Xi.segments)}}function ac(O,l,p,C){const E={parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:{tileOpacity:1,parentTileOpacity:1,fadeMix:{opacity:1,mix:0}}};if(p===0||C)return E;if(O.fadingParentID){const B=l._getLoadedTile(O.fadingParentID);if(!B)return E;const U=Math.pow(2,B.tileID.overscaledZ-O.tileID.overscaledZ),G=[O.tileID.canonical.x*U%1,O.tileID.canonical.y*U%1],Z=(function(ae,ce,me){const ge=M.now(),Pe=(ge-ce.timeAdded)/me,Ne=ae.fadingDirection===ee.Incoming,Ze=a.ah((ge-ae.timeAdded)/me,0,1),Xe=a.ah(1-Pe,0,1),et=Ne?Ze:Xe;return{tileOpacity:et,parentTileOpacity:Ne?Xe:Ze,fadeMix:{opacity:1,mix:1-et}}})(O,B,p);return{parentTile:B,parentScaleBy:U,parentTopLeft:G,fadeValues:Z}}if(O.selfFading){const B=(function(U,G){const Z=M.now(),ae=a.ah((Z-U.timeAdded)/G,0,1);return{tileOpacity:ae,fadeMix:{opacity:ae,mix:0}}})(O,p);return{parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:B}}return E}const js=new a.bf(1,0,0,1),Iu=new a.bf(0,1,0,1),jl=new a.bf(0,0,1,1),Wh=new a.bf(1,0,1,1),BA=new a.bf(0,1,1,1);function Ye(O,l,p,C){lc(O,0,l+p/2,O.transform.width,p,C)}function ku(O,l,p,C){lc(O,l-p/2,0,p,O.transform.height,C)}function lc(O,l,p,C,E,B){const U=O.context,G=U.gl;G.enable(G.SCISSOR_TEST),G.scissor(l*O.pixelRatio,p*O.pixelRatio,C*O.pixelRatio,E*O.pixelRatio),U.clear({color:B}),G.disable(G.SCISSOR_TEST)}function al(O,l,p){const C=O.context,E=C.gl,B=O.useProgram("debug"),U=X.disabled,G=Qe.disabled,Z=O.colorModeForRenderPass(),ae="$debug",ce=O.style.map.terrain&&O.style.map.terrain.getTerrainData(p);C.activeTexture.set(E.TEXTURE0);const me=l.getTileByID(p.key).latestRawTileData,ge=Math.floor((me&&me.byteLength||0)/1024),Pe=l.getTile(p).tileSize,Ne=512/Math.min(Pe,512)*(p.overscaledZ/O.transform.zoom)*.5;let Ze=p.canonical.toString();p.overscaledZ!==p.canonical.z&&(Ze+=` => ${p.overscaledZ}`),(function(et,ot){et.initDebugOverlayCanvas();const ht=et.debugOverlayCanvas,ut=et.context.gl,gt=et.debugOverlayCanvas.getContext("2d");gt.clearRect(0,0,ht.width,ht.height),gt.shadowColor="white",gt.shadowBlur=2,gt.lineWidth=1.5,gt.strokeStyle="white",gt.textBaseline="top",gt.font="bold 36px Open Sans, sans-serif",gt.fillText(ot,5,5),gt.strokeText(ot,5,5),et.debugOverlayTexture.update(ht),et.debugOverlayTexture.bind(ut.LINEAR,ut.CLAMP_TO_EDGE)})(O,`${Ze} ${ge}kB`);const Xe=O.transform.getProjectionData({overscaledTileID:p,applyGlobeMatrix:!0,applyTerrainMatrix:!0});B.draw(C,E.TRIANGLES,U,G,Nr.alphaBlended,Ai.disabled,Ou(a.bf.transparent,Ne),null,Xe,ae,O.debugBuffer,O.quadTriangleIndexBuffer,O.debugSegments),B.draw(C,E.LINE_STRIP,U,G,Z,Ai.disabled,Ou(a.bf.red),ce,Xe,ae,O.debugBuffer,O.tileBorderIndexBuffer,O.debugSegments)}function br(O,l,p,C){const{isRenderingGlobe:E}=C,B=O.context,U=B.gl,G=O.transform,Z=O.colorModeForRenderPass(),ae=O.getDepthModeFor3D(),ce=O.useProgram("terrain");B.bindFramebuffer.set(null),B.viewport.set([0,0,O.width,O.height]);for(const me of p){const ge=l.getTerrainMesh(me.tileID),Pe=O.renderToTexture.getTexture(me),Ne=l.getTerrainData(me.tileID);B.activeTexture.set(U.TEXTURE0),U.bindTexture(U.TEXTURE_2D,Pe.texture);const Ze=l.getMeshFrameDelta(G.zoom),Xe=G.calculateFogMatrix(me.tileID.toUnwrapped()),et=If(Ze,Xe,O.style.sky,G.pitch,E),ot=G.getProjectionData({overscaledTileID:me.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});ce.draw(B,U.TRIANGLES,ae,Qe.disabled,Z,Ai.backCCW,et,Ne,ot,"terrain",ge.vertexBuffer,ge.indexBuffer,ge.segments)}}function lA(O,l){if(!l.mesh){const p=new a.aL;p.emplaceBack(-1,-1),p.emplaceBack(1,-1),p.emplaceBack(1,1),p.emplaceBack(-1,1);const C=new a.aN;C.emplaceBack(0,1,2),C.emplaceBack(0,2,3),l.mesh=new au(O.createVertexBuffer(p,aa.members),O.createIndexBuffer(C),a.aM.simpleSegment(0,0,p.length,C.length))}return l.mesh}class uh{constructor(l,p){this.context=new S1(l),this.transform=p,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:a.ag(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Cn.maxUnderzooming+Cn.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new wo}resize(l,p,C){if(this.width=Math.floor(l*C),this.height=Math.floor(p*C),this.pixelRatio=C,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const E of this.style._order)this.style._layers[E].resize()}setup(){const l=this.context,p=new a.aL;p.emplaceBack(0,0),p.emplaceBack(a.$,0),p.emplaceBack(0,a.$),p.emplaceBack(a.$,a.$),this.tileExtentBuffer=l.createVertexBuffer(p,aa.members),this.tileExtentSegments=a.aM.simpleSegment(0,0,4,2);const C=new a.aL;C.emplaceBack(0,0),C.emplaceBack(a.$,0),C.emplaceBack(0,a.$),C.emplaceBack(a.$,a.$),this.debugBuffer=l.createVertexBuffer(C,aa.members),this.debugSegments=a.aM.simpleSegment(0,0,4,5);const E=new a.c7;E.emplaceBack(0,0,0,0),E.emplaceBack(a.$,0,a.$,0),E.emplaceBack(0,a.$,0,a.$),E.emplaceBack(a.$,a.$,a.$,a.$),this.rasterBoundsBuffer=l.createVertexBuffer(E,fv.members),this.rasterBoundsSegments=a.aM.simpleSegment(0,0,4,2);const B=new a.aL;B.emplaceBack(0,0),B.emplaceBack(a.$,0),B.emplaceBack(0,a.$),B.emplaceBack(a.$,a.$),this.rasterBoundsBufferPosOnly=l.createVertexBuffer(B,aa.members),this.rasterBoundsSegmentsPosOnly=a.aM.simpleSegment(0,0,4,5);const U=new a.aL;U.emplaceBack(0,0),U.emplaceBack(1,0),U.emplaceBack(0,1),U.emplaceBack(1,1),this.viewportBuffer=l.createVertexBuffer(U,aa.members),this.viewportSegments=a.aM.simpleSegment(0,0,4,2);const G=new a.c8;G.emplaceBack(0),G.emplaceBack(1),G.emplaceBack(3),G.emplaceBack(2),G.emplaceBack(0),this.tileBorderIndexBuffer=l.createIndexBuffer(G);const Z=new a.aN;Z.emplaceBack(1,0,2),Z.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=l.createIndexBuffer(Z);const ae=this.context.gl;this.stencilClearMode=new Qe({func:ae.ALWAYS,mask:0},0,255,ae.ZERO,ae.ZERO,ae.ZERO),this.tileExtentMesh=new au(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const l=this.context,p=l.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const C=a.L();a.bZ(C,0,this.width,this.height,0,0,1),a.N(C,C,[p.drawingBufferWidth,p.drawingBufferHeight,0]);const E={mainMatrix:C,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:C};this.useProgram("clippingMask",null,!0).draw(l,p.TRIANGLES,X.disabled,this.stencilClearMode,Nr.disabled,Ai.disabled,null,null,E,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(l,p,C){if(this.currentStencilSource===l.source||!l.isTileClipped()||!p||!p.length)return;this.currentStencilSource=l.source,this.nextStencilID+p.length>256&&this.clearStencil();const E=this.context;E.setColorMode(Nr.disabled),E.setDepthMode(X.disabled);const B={};for(const U of p)B[U.key]=this.nextStencilID++;this._renderTileMasks(B,p,C,!0),this._renderTileMasks(B,p,C,!1),this._tileClippingMaskIDs=B}_renderTileMasks(l,p,C,E){const B=this.context,U=B.gl,G=this.style.projection,Z=this.transform,ae=this.useProgram("clippingMask");for(const ce of p){const me=l[ce.key],ge=this.style.map.terrain&&this.style.map.terrain.getTerrainData(ce),Pe=G.getMeshFromTileID(this.context,ce.canonical,E,!0,"stencil"),Ne=Z.getProjectionData({overscaledTileID:ce,applyGlobeMatrix:!C,applyTerrainMatrix:!0});ae.draw(B,U.TRIANGLES,X.disabled,new Qe({func:U.ALWAYS,mask:0},me,255,U.KEEP,U.KEEP,U.REPLACE),Nr.disabled,C?Ai.disabled:Ai.backCCW,null,ge,Ne,"$clipping",Pe.vertexBuffer,Pe.indexBuffer,Pe.segments)}}_renderTilesDepthBuffer(){const l=this.context,p=l.gl,C=this.style.projection,E=this.transform,B=this.useProgram("depth"),U=this.getDepthModeFor3D(),G=Qn(E,{tileSize:E.tileSize});for(const Z of G){const ae=this.style.map.terrain&&this.style.map.terrain.getTerrainData(Z),ce=C.getMeshFromTileID(this.context,Z.canonical,!0,!0,"raster"),me=E.getProjectionData({overscaledTileID:Z,applyGlobeMatrix:!0,applyTerrainMatrix:!0});B.draw(l,p.TRIANGLES,U,Qe.disabled,Nr.disabled,Ai.backCCW,null,ae,me,"$clipping",ce.vertexBuffer,ce.indexBuffer,ce.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const l=this.nextStencilID++,p=this.context.gl;return new Qe({func:p.NOTEQUAL,mask:255},l,255,p.KEEP,p.KEEP,p.REPLACE)}stencilModeForClipping(l){const p=this.context.gl;return new Qe({func:p.EQUAL,mask:255},this._tileClippingMaskIDs[l.key],0,p.KEEP,p.KEEP,p.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(l){const p=this.context.gl,C=l.sort(((U,G)=>G.overscaledZ-U.overscaledZ)),E=C[C.length-1].overscaledZ,B=C[0].overscaledZ-E+1;if(B>1){this.currentStencilSource=void 0,this.nextStencilID+B>256&&this.clearStencil();const U={};for(let G=0;G<B;G++)U[G+E]=new Qe({func:p.GEQUAL,mask:255},G+this.nextStencilID,255,p.KEEP,p.KEEP,p.REPLACE);return this.nextStencilID+=B,[U,C]}return[{[E]:Qe.disabled},C]}stencilConfigForOverlapTwoPass(l){const p=this.context.gl,C=l.sort(((U,G)=>G.overscaledZ-U.overscaledZ)),E=C[C.length-1].overscaledZ,B=C[0].overscaledZ-E+1;if(this.clearStencil(),B>1){const U={},G={};for(let Z=0;Z<B;Z++)U[Z+E]=new Qe({func:p.GREATER,mask:255},B+1+Z,255,p.KEEP,p.KEEP,p.REPLACE),G[Z+E]=new Qe({func:p.GREATER,mask:255},1+Z,255,p.KEEP,p.KEEP,p.REPLACE);return this.nextStencilID=2*B+1,[U,G,C]}return this.nextStencilID=3,[{[E]:new Qe({func:p.GREATER,mask:255},2,255,p.KEEP,p.KEEP,p.REPLACE)},{[E]:new Qe({func:p.GREATER,mask:255},1,255,p.KEEP,p.KEEP,p.REPLACE)},C]}colorModeForRenderPass(){const l=this.context.gl;return this._showOverdrawInspector?new Nr([l.CONSTANT_COLOR,l.ONE],new a.bf(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Nr.unblended:Nr.alphaBlended}getDepthModeForSublayer(l,p,C){if(!this.opaquePassEnabledForLayer())return X.disabled;const E=1-((1+this.currentLayer)*this.numSublayers+l)*this.depthEpsilon;return new X(C||this.context.gl.LEQUAL,p,[E,E])}getDepthModeFor3D(){return new X(this.context.gl.LEQUAL,X.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(l,p){var C,E;this.style=l,this.options=p,this.lineAtlas=l.lineAtlas,this.imageManager=l.imageManager,this.glyphManager=l.glyphManager,this.symbolFadeChange=l.placement.symbolFadeChange(M.now()),this.imageManager.beginFrame();const B=this.style._order,U=this.style.sourceCaches,G={},Z={},ae={},ce={isRenderingToTexture:!1,isRenderingGlobe:((C=l.projection)===null||C===void 0?void 0:C.transitionState)>0};for(const ge in U){const Pe=U[ge];Pe.used&&Pe.prepare(this.context),G[ge]=Pe.getVisibleCoordinates(!1),Z[ge]=G[ge].slice().reverse(),ae[ge]=Pe.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let ge=0;ge<B.length;ge++)if(this.style._layers[B[ge]].is3D()){this.opaquePassCutoff=ge;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const ge of B){const Pe=this.style._layers[ge];if(!Pe.hasOffscreenPass()||Pe.isHidden(this.transform.zoom))continue;const Ne=Z[Pe.source];(Pe.type==="custom"||Ne.length)&&this.renderLayer(this,U[Pe.source],Pe,Ne,ce)}if((E=this.style.projection)===null||E===void 0||E.updateGPUdependent({context:this.context,useProgram:ge=>this.useProgram(ge)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:p.showOverdrawInspector?a.bf.black:a.bf.transparent,depth:1}),this.clearStencil(),this.style.sky&&(function(ge,Pe){const Ne=ge.context,Ze=Ne.gl,Xe=((xt,ct,wt)=>{const Wt=Math.cos(ct.rollInRadians),Lt=Math.sin(ct.rollInRadians),Nt=ye(ct),Gt=ct.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:xt.properties.get("sky-color"),u_horizon_color:xt.properties.get("horizon-color"),u_horizon:[(ct.width/2-Nt*Lt)*wt,(ct.height/2+Nt*Wt)*wt],u_horizon_normal:[-Lt,Wt],u_sky_horizon_blend:xt.properties.get("sky-horizon-blend")*ct.height/2*wt,u_sky_blend:Gt}})(Pe,ge.style.map.transform,ge.pixelRatio),et=new X(Ze.LEQUAL,X.ReadWrite,[0,1]),ot=Qe.disabled,ht=ge.colorModeForRenderPass(),ut=ge.useProgram("sky"),gt=lA(Ne,Pe);ut.draw(Ne,Ze.TRIANGLES,et,ot,ht,Ai.disabled,Xe,null,void 0,"sky",gt.vertexBuffer,gt.indexBuffer,gt.segments)})(this,this.style.sky),this._showOverdrawInspector=p.showOverdrawInspector,this.depthRangeFor3D=[0,1-(l._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=B.length-1;this.currentLayer>=0;this.currentLayer--){const ge=this.style._layers[B[this.currentLayer]],Pe=U[ge.source],Ne=G[ge.source];this._renderTileClippingMasks(ge,Ne,!1),this.renderLayer(this,Pe,ge,Ne,ce)}this.renderPass="translucent";let me=!1;for(this.currentLayer=0;this.currentLayer<B.length;this.currentLayer++){const ge=this.style._layers[B[this.currentLayer]],Pe=U[ge.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(ge,ce))continue;this.opaquePassEnabledForLayer()||me||(me=!0,ce.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const Ne=(ge.type==="symbol"?ae:Z)[ge.source];this._renderTileClippingMasks(ge,G[ge.source],!!this.renderToTexture),this.renderLayer(this,Pe,ge,Ne,ce)}if(ce.isRenderingGlobe&&(function(ge,Pe,Ne){const Ze=ge.context,Xe=Ze.gl,et=ge.useProgram("atmosphere"),ot=new X(Xe.LEQUAL,X.ReadOnly,[0,1]),ht=ge.transform,ut=(function(Gt,Bn){const kn=Gt.properties.get("position"),cn=[-kn.x,-kn.y,-kn.z],si=a.ag(new Float64Array(16));return Gt.properties.get("anchor")==="map"&&(a.b6(si,si,Bn.rollInRadians),a.b7(si,si,-Bn.pitchInRadians),a.b6(si,si,Bn.bearingInRadians),a.b7(si,si,Bn.center.lat*Math.PI/180),a.bz(si,si,-Bn.center.lng*Math.PI/180)),a.c6(cn,cn,si),cn})(Ne,ge.transform),gt=ht.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),xt=Pe.properties.get("atmosphere-blend")*gt.projectionTransition;if(xt===0)return;const ct=ys(ht.worldSize,ht.center.lat),wt=ht.inverseProjectionMatrix,Wt=new Float64Array(4);Wt[3]=1,a.aw(Wt,Wt,ht.modelViewProjectionMatrix),Wt[0]/=Wt[3],Wt[1]/=Wt[3],Wt[2]/=Wt[3],Wt[3]=1,a.aw(Wt,Wt,wt),Wt[0]/=Wt[3],Wt[1]/=Wt[3],Wt[2]/=Wt[3],Wt[3]=1;const Lt=((Gt,Bn,kn,cn,si)=>({u_sun_pos:Gt,u_atmosphere_blend:Bn,u_globe_position:kn,u_globe_radius:cn,u_inv_proj_matrix:si}))(ut,xt,[Wt[0],Wt[1],Wt[2]],ct,wt),Nt=lA(Ze,Pe);et.draw(Ze,Xe.TRIANGLES,ot,Qe.disabled,Nr.alphaBlended,Ai.disabled,Lt,null,null,"atmosphere",Nt.vertexBuffer,Nt.indexBuffer,Nt.segments)})(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const ge=(function(Pe,Ne){let Ze=null;const Xe=Object.values(Pe._layers).flatMap((ut=>ut.source&&!ut.isHidden(Ne)?[Pe.sourceCaches[ut.source]]:[])),et=Xe.filter((ut=>ut.getSource().type==="vector")),ot=Xe.filter((ut=>ut.getSource().type!=="vector")),ht=ut=>{(!Ze||Ze.getSource().maxzoom<ut.getSource().maxzoom)&&(Ze=ut)};return et.forEach((ut=>ht(ut))),Ze||ot.forEach((ut=>ht(ut))),Ze})(this.style,this.transform.zoom);ge&&(function(Pe,Ne,Ze){for(let Xe=0;Xe<Ze.length;Xe++)al(Pe,Ne,Ze[Xe])})(this,ge,ge.getVisibleCoordinates())}this.options.showPadding&&(function(ge){const Pe=ge.transform.padding;Ye(ge,ge.transform.height-(Pe.top||0),3,js),Ye(ge,Pe.bottom||0,3,Iu),ku(ge,Pe.left||0,3,jl),ku(ge,ge.transform.width-(Pe.right||0),3,Wh);const Ne=ge.transform.centerPoint;(function(Ze,Xe,et,ot){lc(Ze,Xe-1,et-10,2,20,ot),lc(Ze,Xe-10,et-1,20,2,ot)})(ge,Ne.x,ge.transform.height-Ne.y,BA)})(this),this.context.setDefault()}maybeDrawDepthAndCoords(l){if(!this.style||!this.style.map||!this.style.map.terrain)return;const p=this.terrainFacilitator.matrix,C=this.transform.modelViewProjectionMatrix;let E=this.terrainFacilitator.dirty;E||(E=l?!a.c9(p,C):!a.ca(p,C)),E||(E=this.style.map.terrain.sourceCache.anyTilesAfterTime(this.terrainFacilitator.renderTime)),E&&(a.cb(p,C),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,(function(B,U){const G=B.context,Z=G.gl,ae=B.transform,ce=Nr.unblended,me=new X(Z.LEQUAL,X.ReadWrite,[0,1]),ge=U.sourceCache.getRenderableTiles(),Pe=B.useProgram("terrainDepth");G.bindFramebuffer.set(U.getFramebuffer("depth").framebuffer),G.viewport.set([0,0,B.width/devicePixelRatio,B.height/devicePixelRatio]),G.clear({color:a.bf.transparent,depth:1});for(const Ne of ge){const Ze=U.getTerrainMesh(Ne.tileID),Xe=U.getTerrainData(Ne.tileID),et=ae.getProjectionData({overscaledTileID:Ne.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),ot={u_ele_delta:U.getMeshFrameDelta(ae.zoom)};Pe.draw(G,Z.TRIANGLES,me,Qe.disabled,ce,Ai.backCCW,ot,Xe,et,"terrain",Ze.vertexBuffer,Ze.indexBuffer,Ze.segments)}G.bindFramebuffer.set(null),G.viewport.set([0,0,B.width,B.height])})(this,this.style.map.terrain),(function(B,U){const G=B.context,Z=G.gl,ae=B.transform,ce=Nr.unblended,me=new X(Z.LEQUAL,X.ReadWrite,[0,1]),ge=U.getCoordsTexture(),Pe=U.sourceCache.getRenderableTiles(),Ne=B.useProgram("terrainCoords");G.bindFramebuffer.set(U.getFramebuffer("coords").framebuffer),G.viewport.set([0,0,B.width/devicePixelRatio,B.height/devicePixelRatio]),G.clear({color:a.bf.transparent,depth:1}),U.coordsIndex=[];for(const Ze of Pe){const Xe=U.getTerrainMesh(Ze.tileID),et=U.getTerrainData(Ze.tileID);G.activeTexture.set(Z.TEXTURE0),Z.bindTexture(Z.TEXTURE_2D,ge.texture);const ot={u_terrain_coords_id:(255-U.coordsIndex.length)/255,u_texture:0,u_ele_delta:U.getMeshFrameDelta(ae.zoom)},ht=ae.getProjectionData({overscaledTileID:Ze.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});Ne.draw(G,Z.TRIANGLES,me,Qe.disabled,ce,Ai.backCCW,ot,et,ht,"terrain",Xe.vertexBuffer,Xe.indexBuffer,Xe.segments),U.coordsIndex.push(Ze.tileID.key)}G.bindFramebuffer.set(null),G.viewport.set([0,0,B.width,B.height])})(this,this.style.map.terrain))}renderLayer(l,p,C,E,B){C.isHidden(this.transform.zoom)||(C.type==="background"||C.type==="custom"||(E||[]).length)&&(this.id=C.id,a.cc(C)?(function(U,G,Z,ae,ce,me){if(U.renderPass!=="translucent")return;const{isRenderingToTexture:ge}=me,Pe=Qe.disabled,Ne=U.colorModeForRenderPass();(Z._unevaluatedLayout.hasValue("text-variable-anchor")||Z._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&(function(Ze,Xe,et,ot,ht,ut,gt,xt,ct){const wt=Xe.transform,Wt=Xe.style.map.terrain,Lt=ht==="map",Nt=ut==="map";for(const Gt of Ze){const Bn=ot.getTile(Gt),kn=Bn.getBucket(et);if(!kn||!kn.text||!kn.text.segments.get().length)continue;const cn=a.an(kn.textSizeData,wt.zoom),si=a.aC(Bn,1,Xe.transform.zoom),Xi=ii(Lt,Xe.transform,si),Er=et.layout.get("icon-text-fit")!=="none"&&kn.hasIconData();if(cn){const Eo=Math.pow(2,wt.zoom-Bn.tileID.overscaledZ),Wr=Wt?(es,Qo)=>Wt.getElevation(Gt,es,Qo):null;Kp(kn,Lt,Nt,ct,wt,Xi,Eo,cn,Er,a.aD(wt,Bn,gt,xt),Gt.toUnwrapped(),Wr)}}})(ae,U,Z,G,Z.layout.get("text-rotation-alignment"),Z.layout.get("text-pitch-alignment"),Z.paint.get("text-translate"),Z.paint.get("text-translate-anchor"),ce),Z.paint.get("icon-opacity").constantOr(1)!==0&&ah(U,G,Z,ae,!1,Z.paint.get("icon-translate"),Z.paint.get("icon-translate-anchor"),Z.layout.get("icon-rotation-alignment"),Z.layout.get("icon-pitch-alignment"),Z.layout.get("icon-keep-upright"),Pe,Ne,ge),Z.paint.get("text-opacity").constantOr(1)!==0&&ah(U,G,Z,ae,!0,Z.paint.get("text-translate"),Z.paint.get("text-translate-anchor"),Z.layout.get("text-rotation-alignment"),Z.layout.get("text-pitch-alignment"),Z.layout.get("text-keep-upright"),Pe,Ne,ge),G.map.showCollisionBoxes&&(sh(U,G,Z,ae,!0),sh(U,G,Z,ae,!1))})(l,p,C,E,this.style.placement.variableOffsets,B):a.cd(C)?(function(U,G,Z,ae,ce){if(U.renderPass!=="translucent")return;const{isRenderingToTexture:me}=ce,ge=Z.paint.get("circle-opacity"),Pe=Z.paint.get("circle-stroke-width"),Ne=Z.paint.get("circle-stroke-opacity"),Ze=!Z.layout.get("circle-sort-key").isConstant();if(ge.constantOr(1)===0&&(Pe.constantOr(1)===0||Ne.constantOr(1)===0))return;const Xe=U.context,et=Xe.gl,ot=U.transform,ht=U.getDepthModeForSublayer(0,X.ReadOnly),ut=Qe.disabled,gt=U.colorModeForRenderPass(),xt=[],ct=ot.getCircleRadiusCorrection();for(let wt=0;wt<ae.length;wt++){const Wt=ae[wt],Lt=G.getTile(Wt),Nt=Lt.getBucket(Z);if(!Nt)continue;const Gt=Z.paint.get("circle-translate"),Bn=Z.paint.get("circle-translate-anchor"),kn=a.aD(ot,Lt,Gt,Bn),cn=Nt.programConfigurations.get(Z.id),si=U.useProgram("circle",cn),Xi=Nt.layoutVertexBuffer,Er=Nt.indexBuffer,Eo=U.style.map.terrain&&U.style.map.terrain.getTerrainData(Wt),Wr={programConfiguration:cn,program:si,layoutVertexBuffer:Xi,indexBuffer:Er,uniformValues:Pd(U,Lt,Z,kn,ct),terrainData:Eo,projectionData:ot.getProjectionData({overscaledTileID:Wt,applyGlobeMatrix:!me,applyTerrainMatrix:!0})};if(Ze){const es=Nt.segments.get();for(const Qo of es)xt.push({segments:new a.aM([Qo]),sortKey:Qo.sortKey,state:Wr})}else xt.push({segments:Nt.segments,sortKey:0,state:Wr})}Ze&&xt.sort(((wt,Wt)=>wt.sortKey-Wt.sortKey));for(const wt of xt){const{programConfiguration:Wt,program:Lt,layoutVertexBuffer:Nt,indexBuffer:Gt,uniformValues:Bn,terrainData:kn,projectionData:cn}=wt.state;Lt.draw(Xe,et.TRIANGLES,ht,ut,gt,Ai.backCCW,Bn,kn,cn,Z.id,Nt,Gt,wt.segments,Z.paint,U.transform.zoom,Wt)}})(l,p,C,E,B):a.ce(C)?(function(U,G,Z,ae,ce){if(Z.paint.get("heatmap-opacity")===0)return;const me=U.context,{isRenderingToTexture:ge,isRenderingGlobe:Pe}=ce;if(U.style.map.terrain){for(const Ne of ae){const Ze=G.getTile(Ne);G.hasRenderableParent(Ne)||(U.renderPass==="offscreen"?Ts(U,Ze,Z,Ne,Pe):U.renderPass==="translucent"&&ta(U,Z,Ne,ge,Pe))}me.viewport.set([0,0,U.width,U.height])}else U.renderPass==="offscreen"?(function(Ne,Ze,Xe,et){const ot=Ne.context,ht=ot.gl,ut=Ne.transform,gt=Qe.disabled,xt=new Nr([ht.ONE,ht.ONE],a.bf.transparent,[!0,!0,!0,!0]);(function(ct,wt,Wt){const Lt=ct.gl;ct.activeTexture.set(Lt.TEXTURE1),ct.viewport.set([0,0,wt.width/4,wt.height/4]);let Nt=Wt.heatmapFbos.get(a.c3);Nt?(Lt.bindTexture(Lt.TEXTURE_2D,Nt.colorAttachment.get()),ct.bindFramebuffer.set(Nt.framebuffer)):(Nt=Fl(ct,wt.width/4,wt.height/4),Wt.heatmapFbos.set(a.c3,Nt))})(ot,Ne,Xe),ot.clear({color:a.bf.transparent});for(let ct=0;ct<et.length;ct++){const wt=et[ct];if(Ze.hasRenderableParent(wt))continue;const Wt=Ze.getTile(wt),Lt=Wt.getBucket(Xe);if(!Lt)continue;const Nt=Lt.programConfigurations.get(Xe.id),Gt=Ne.useProgram("heatmap",Nt),Bn=ut.getProjectionData({overscaledTileID:wt,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),kn=ut.getCircleRadiusCorrection();Gt.draw(ot,ht.TRIANGLES,X.disabled,gt,xt,Ai.backCCW,Op(Wt,ut.zoom,Xe.paint.get("heatmap-intensity"),kn),null,Bn,Xe.id,Lt.layoutVertexBuffer,Lt.indexBuffer,Lt.segments,Xe.paint,ut.zoom,Nt)}ot.viewport.set([0,0,Ne.width,Ne.height])})(U,G,Z,ae):U.renderPass==="translucent"&&(function(Ne,Ze){const Xe=Ne.context,et=Xe.gl;Xe.setColorMode(Ne.colorModeForRenderPass());const ot=Ze.heatmapFbos.get(a.c3);ot&&(Xe.activeTexture.set(et.TEXTURE0),et.bindTexture(et.TEXTURE_2D,ot.colorAttachment.get()),Xe.activeTexture.set(et.TEXTURE1),sl(Xe,Ze).bind(et.LINEAR,et.CLAMP_TO_EDGE),Ne.useProgram("heatmapTexture").draw(Xe,et.TRIANGLES,X.disabled,Qe.disabled,Ne.colorModeForRenderPass(),Ai.disabled,Rf(Ne,Ze,0,1),null,null,Ze.id,Ne.viewportBuffer,Ne.quadTriangleIndexBuffer,Ne.viewportSegments,Ze.paint,Ne.transform.zoom))})(U,Z)})(l,p,C,E,B):a.cf(C)?(function(U,G,Z,ae,ce){if(U.renderPass!=="translucent")return;const{isRenderingToTexture:me}=ce,ge=Z.paint.get("line-opacity"),Pe=Z.paint.get("line-width");if(ge.constantOr(1)===0||Pe.constantOr(1)===0)return;const Ne=U.getDepthModeForSublayer(0,X.ReadOnly),Ze=U.colorModeForRenderPass(),Xe=Z.paint.get("line-dasharray"),et=Xe.constantOr(1),ot=Z.paint.get("line-pattern"),ht=ot.constantOr(1),ut=Z.paint.get("line-gradient"),gt=Z.getCrossfadeParameters();let xt;xt=ht?"linePattern":et&&ut?"lineGradientSDF":et?"lineSDF":ut?"lineGradient":"line";const ct=U.context,wt=ct.gl,Wt=U.transform;let Lt=!0;for(const Nt of ae){const Gt=G.getTile(Nt);if(ht&&!Gt.patternsLoaded())continue;const Bn=Gt.getBucket(Z);if(!Bn)continue;const kn=Bn.programConfigurations.get(Z.id),cn=U.context.program.get(),si=U.useProgram(xt,kn),Xi=Lt||si.program!==cn,Er=U.style.map.terrain&&U.style.map.terrain.getTerrainData(Nt),Eo=ot.constantOr(null),Wr=Xe&&Xe.constantOr(null);if(Eo&&Gt.imageAtlas){const Al=Gt.imageAtlas,la=Al.patternPositions[Eo.to.toString()],ra=Al.patternPositions[Eo.from.toString()];la&&ra&&kn.setConstantPatternPositions(la,ra)}else if(Wr){const Al=Z.layout.get("line-cap")==="round",la=U.lineAtlas.getDash(Wr.to,Al),ra=U.lineAtlas.getDash(Wr.from,Al);kn.setConstantDashPositions(la,ra)}const es=Wt.getProjectionData({overscaledTileID:Nt,applyGlobeMatrix:!me,applyTerrainMatrix:!0}),Qo=Wt.getPixelScale();let Br;ht?(Br=Ph(U,Gt,Z,Qo,gt),EA(ct,wt,Gt,kn,gt)):et&&ut?(Br=jm(U,Gt,Z,Qo,gt,Bn.lineClipsArray.length),Lp(U,G,ct,wt,Z,Bn,Nt,kn,gt)):et?(Br=Uh(U,Gt,Z,Qo,gt),zl(U,ct,wt,kn,Xi,gt)):ut?(Br=kp(U,Gt,Z,Qo,Bn.lineClipsArray.length),sc(U,G,ct,wt,Z,Bn,Nt)):Br=Ip(U,Gt,Z,Qo);const Rs=U.stencilModeForClipping(Nt);si.draw(ct,wt.TRIANGLES,Ne,Rs,Ze,Ai.disabled,Br,Er,es,Z.id,Bn.layoutVertexBuffer,Bn.indexBuffer,Bn.segments,Z.paint,U.transform.zoom,kn,Bn.layoutVertexBuffer2),Lt=!1}})(l,p,C,E,B):a.cg(C)?(function(U,G,Z,ae,ce){const me=Z.paint.get("fill-color"),ge=Z.paint.get("fill-opacity");if(ge.constantOr(1)===0)return;const{isRenderingToTexture:Pe}=ce,Ne=U.colorModeForRenderPass(),Ze=Z.paint.get("fill-pattern"),Xe=U.opaquePassEnabledForLayer()&&!Ze.constantOr(1)&&me.constantOr(a.bf.transparent).a===1&&ge.constantOr(0)===1?"opaque":"translucent";if(U.renderPass===Xe){const et=U.getDepthModeForSublayer(1,U.renderPass==="opaque"?X.ReadWrite:X.ReadOnly);OA(U,G,Z,ae,et,Ne,!1,Pe)}if(U.renderPass==="translucent"&&Z.paint.get("fill-antialias")){const et=U.getDepthModeForSublayer(Z.getPaintProperty("fill-outline-color")?2:0,X.ReadOnly);OA(U,G,Z,ae,et,Ne,!0,Pe)}})(l,p,C,E,B):a.ch(C)?(function(U,G,Z,ae,ce){const me=Z.paint.get("fill-extrusion-opacity");if(me===0)return;const{isRenderingToTexture:ge}=ce;if(U.renderPass==="translucent"){const Pe=new X(U.context.gl.LEQUAL,X.ReadWrite,U.depthRangeFor3D);if(me!==1||Z.paint.get("fill-extrusion-pattern").constantOr(1))lh(U,G,Z,ae,Pe,Qe.disabled,Nr.disabled,ge),lh(U,G,Z,ae,Pe,U.stencilModeFor3D(),U.colorModeForRenderPass(),ge);else{const Ne=U.colorModeForRenderPass();lh(U,G,Z,ae,Pe,Qe.disabled,Ne,ge)}}})(l,p,C,E,B):a.ci(C)?(function(U,G,Z,ae,ce){if(U.renderPass!=="offscreen"&&U.renderPass!=="translucent")return;const{isRenderingToTexture:me}=ce,ge=U.context,Pe=U.style.projection.useSubdivision,Ne=U.getDepthModeForSublayer(0,X.ReadOnly),Ze=U.colorModeForRenderPass();if(U.renderPass==="offscreen")(function(Xe,et,ot,ht,ut,gt,xt){const ct=Xe.context,wt=ct.gl;for(const Wt of ot){const Lt=et.getTile(Wt),Nt=Lt.dem;if(!Nt||!Nt.data||!Lt.needsHillshadePrepare)continue;const Gt=Nt.dim,Bn=Nt.stride,kn=Nt.getPixels();if(ct.activeTexture.set(wt.TEXTURE1),ct.pixelStoreUnpackPremultiplyAlpha.set(!1),Lt.demTexture=Lt.demTexture||Xe.getTileTexture(Bn),Lt.demTexture){const si=Lt.demTexture;si.update(kn,{premultiply:!1}),si.bind(wt.NEAREST,wt.CLAMP_TO_EDGE)}else Lt.demTexture=new a.T(ct,kn,wt.RGBA,{premultiply:!1}),Lt.demTexture.bind(wt.NEAREST,wt.CLAMP_TO_EDGE);ct.activeTexture.set(wt.TEXTURE0);let cn=Lt.fbo;if(!cn){const si=new a.T(ct,{width:Gt,height:Gt,data:null},wt.RGBA);si.bind(wt.LINEAR,wt.CLAMP_TO_EDGE),cn=Lt.fbo=ct.createFramebuffer(Gt,Gt,!0,!1),cn.colorAttachment.set(si.texture)}ct.bindFramebuffer.set(cn.framebuffer),ct.viewport.set([0,0,Gt,Gt]),Xe.useProgram("hillshadePrepare").draw(ct,wt.TRIANGLES,ut,gt,xt,Ai.disabled,Bp(Lt.tileID,Nt),null,null,ht.id,Xe.rasterBoundsBuffer,Xe.quadTriangleIndexBuffer,Xe.rasterBoundsSegments),Lt.needsHillshadePrepare=!1}})(U,G,ae,Z,Ne,Qe.disabled,Ze),ge.viewport.set([0,0,U.width,U.height]);else if(U.renderPass==="translucent")if(Pe){const[Xe,et,ot]=U.stencilConfigForOverlapTwoPass(ae);na(U,G,Z,ot,Xe,Ne,Ze,!1,me),na(U,G,Z,ot,et,Ne,Ze,!0,me)}else{const[Xe,et]=U.getStencilConfigForOverlapAndUpdateStencilID(ae);na(U,G,Z,et,Xe,Ne,Ze,!1,me)}})(l,p,C,E,B):a.cj(C)?(function(U,G,Z,ae,ce){if(U.renderPass!=="translucent"||!ae.length)return;const{isRenderingToTexture:me}=ce,ge=U.style.projection.useSubdivision,Pe=U.getDepthModeForSublayer(0,X.ReadOnly),Ne=U.colorModeForRenderPass();if(ge){const[Ze,Xe,et]=U.stencilConfigForOverlapTwoPass(ae);lo(U,G,Z,et,Ze,Pe,Ne,!1,me),lo(U,G,Z,et,Xe,Pe,Ne,!0,me)}else{const[Ze,Xe]=U.getStencilConfigForOverlapAndUpdateStencilID(ae);lo(U,G,Z,Xe,Ze,Pe,Ne,!1,me)}})(l,p,C,E,B):a.bK(C)?(function(U,G,Z,ae,ce){if(U.renderPass!=="translucent"||Z.paint.get("raster-opacity")===0||!ae.length)return;const{isRenderingToTexture:me}=ce,ge=G.getSource(),Pe=U.style.projection.useSubdivision;if(ge instanceof Pn)aA(U,G,Z,ae,null,!1,!1,ge.tileCoords,ge.flippedWindingOrder,me);else if(Pe){const[Ne,Ze,Xe]=U.stencilConfigForOverlapTwoPass(ae);aA(U,G,Z,Xe,Ne,!1,!0,Gr,!1,me),aA(U,G,Z,Xe,Ze,!0,!0,Gr,!1,me)}else{const[Ne,Ze]=U.getStencilConfigForOverlapAndUpdateStencilID(ae);aA(U,G,Z,Ze,Ne,!1,!0,Gr,!1,me)}})(l,p,C,E,B):a.ck(C)?(function(U,G,Z,ae,ce){const me=Z.paint.get("background-color"),ge=Z.paint.get("background-opacity");if(ge===0)return;const{isRenderingToTexture:Pe}=ce,Ne=U.context,Ze=Ne.gl,Xe=U.style.projection,et=U.transform,ot=et.tileSize,ht=Z.paint.get("background-pattern");if(U.isPatternMissing(ht))return;const ut=!ht&&me.a===1&&ge===1&&U.opaquePassEnabledForLayer()?"opaque":"translucent";if(U.renderPass!==ut)return;const gt=Qe.disabled,xt=U.getDepthModeForSublayer(0,ut==="opaque"?X.ReadWrite:X.ReadOnly),ct=U.colorModeForRenderPass(),wt=U.useProgram(ht?"backgroundPattern":"background"),Wt=ae||Qn(et,{tileSize:ot,terrain:U.style.map.terrain});ht&&(Ne.activeTexture.set(Ze.TEXTURE0),U.imageManager.bind(U.context));const Lt=Z.getCrossfadeParameters();for(const Nt of Wt){const Gt=et.getProjectionData({overscaledTileID:Nt,applyGlobeMatrix:!Pe,applyTerrainMatrix:!0}),Bn=ht?Kh(ge,U,ht,{tileID:Nt,tileSize:ot},Lt):w1(ge,me),kn=U.style.map.terrain&&U.style.map.terrain.getTerrainData(Nt),cn=Xe.getMeshFromTileID(Ne,Nt.canonical,!1,!0,"raster");wt.draw(Ne,Ze.TRIANGLES,xt,gt,ct,Ai.backCCW,Bn,kn,Gt,Z.id,cn.vertexBuffer,cn.indexBuffer,cn.segments)}})(l,0,C,E,B):a.cl(C)&&(function(U,G,Z,ae){const{isRenderingGlobe:ce}=ae,me=U.context,ge=Z.implementation,Pe=U.style.projection,Ne=U.transform,Ze=Ne.getProjectionDataForCustomLayer(ce),Xe={farZ:Ne.farZ,nearZ:Ne.nearZ,fov:Ne.fov*Math.PI/180,modelViewProjectionMatrix:Ne.modelViewProjectionMatrix,projectionMatrix:Ne.projectionMatrix,shaderData:{variantName:Pe.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${Pe.shaderPreludeCode.vertexSource}`,define:Pe.shaderDefine},defaultProjectionData:Ze},et=ge.renderingMode?ge.renderingMode:"2d";if(U.renderPass==="offscreen"){const ot=ge.prerender;ot&&(U.setCustomLayerDefaults(),me.setColorMode(U.colorModeForRenderPass()),ot.call(ge,me.gl,Xe),me.setDirty(),U.setBaseState())}else if(U.renderPass==="translucent"){U.setCustomLayerDefaults(),me.setColorMode(U.colorModeForRenderPass()),me.setStencilMode(Qe.disabled);const ot=et==="3d"?U.getDepthModeFor3D():U.getDepthModeForSublayer(0,X.ReadOnly);me.setDepthMode(ot),ge.render(me.gl,Xe),me.setDirty(),U.setBaseState(),me.bindFramebuffer.set(null)}})(l,0,C,B))}saveTileTexture(l){const p=this._tileTextures[l.size[0]];p?p.push(l):this._tileTextures[l.size[0]]=[l]}getTileTexture(l){const p=this._tileTextures[l];return p&&p.length>0?p.pop():null}isPatternMissing(l){if(!l)return!1;if(!l.from||!l.to)return!0;const p=this.imageManager.getPattern(l.from.toString()),C=this.imageManager.getPattern(l.to.toString());return!p||!C}useProgram(l,p,C=!1,E=[]){this.cache=this.cache||{};const B=!!this.style.map.terrain,U=this.style.projection,G=C?Js.projectionMercator:U.shaderPreludeCode,Z=C?Su:U.shaderDefine,ae=l+(p?p.cacheKey:"")+`/${C?ir:U.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(B?"/terrain":"")+(E?`/${E.join("/")}`:"");return this.cache[ae]||(this.cache[ae]=new Lm(this.context,Js[l],p,th[l],this._showOverdrawInspector,B,G,Z,E)),this.cache[ae]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const l=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(l.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new a.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:l,drawingBufferHeight:p}=this.context.gl;return this.width!==l||this.height!==p}}function uA(O,l){let p,C=!1,E=null,B=null;const U=()=>{E=null,C&&(O.apply(B,p),E=setTimeout(U,l),C=!1)};return(...G)=>(C=!0,B=this,p=G,E||U(),E)}class cA{constructor(l){this._getCurrentHash=()=>{const p=window.location.hash.replace("#","");if(this._hashName){let C;return p.split("&").map((E=>E.split("="))).forEach((E=>{E[0]===this._hashName&&(C=E)})),(C&&C[1]||"").split("/")}return p.split("/")},this._onHashChange=()=>{const p=this._getCurrentHash();if(!this._isValidHash(p))return!1;const C=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(p[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+p[2],+p[1]],zoom:+p[0],bearing:C,pitch:+(p[4]||0)}),!0},this._updateHashUnthrottled=()=>{const p=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,p)},this._removeHash=()=>{const p=this._getCurrentHash();if(p.length===0)return;const C=p.join("/");let E=C;E.split("&").length>0&&(E=E.split("&")[0]),this._hashName&&(E=`${this._hashName}=${C}`);let B=window.location.hash.replace(E,"");B.startsWith("#&")?B=B.slice(0,1)+B.slice(2):B==="#"&&(B="");let U=window.location.href.replace(/(#.+)?$/,B);U=U.replace("&&","&"),window.history.replaceState(window.history.state,null,U)},this._updateHash=uA(this._updateHashUnthrottled,300),this._hashName=l&&encodeURIComponent(l)}addTo(l){return this._map=l,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(l){const p=this._map.getCenter(),C=Math.round(100*this._map.getZoom())/100,E=Math.ceil((C*Math.LN2+Math.log(512/360/.5))/Math.LN10),B=Math.pow(10,E),U=Math.round(p.lng*B)/B,G=Math.round(p.lat*B)/B,Z=this._map.getBearing(),ae=this._map.getPitch();let ce="";if(ce+=l?`/${U}/${G}/${C}`:`${C}/${G}/${U}`,(Z||ae)&&(ce+="/"+Math.round(10*Z)/10),ae&&(ce+=`/${Math.round(ae)}`),this._hashName){const me=this._hashName;let ge=!1;const Pe=window.location.hash.slice(1).split("&").map((Ne=>{const Ze=Ne.split("=")[0];return Ze===me?(ge=!0,`${Ze}=${ce}`):Ne})).filter((Ne=>Ne));return ge||Pe.push(`${me}=${ce}`),`#${Pe.join("&")}`}return`#${ce}`}_isValidHash(l){if(l.length<3||l.some(isNaN))return!1;try{new a.S(+l[2],+l[1])}catch{return!1}const p=+l[0],C=+(l[3]||0),E=+(l[4]||0);return p>=this._map.getMinZoom()&&p<=this._map.getMaxZoom()&&C>=-180&&C<=180&&E>=this._map.getMinPitch()&&E<=this._map.getMaxPitch()}}const Qh={linearity:.3,easing:a.cm(0,0,.3,1)},Kc=a.e({deceleration:2500,maxSpeed:1400},Qh),Fp=a.e({deceleration:20,maxSpeed:1400},Qh),qh=a.e({deceleration:1e3,maxSpeed:360},Qh),ll=a.e({deceleration:1e3,maxSpeed:90},Qh),uc=a.e({deceleration:1e3,maxSpeed:360},Qh);class m0{constructor(l){this._map=l,this.clear()}clear(){this._inertiaBuffer=[]}record(l){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:M.now(),settings:l})}_drainInertiaBuffer(){const l=this._inertiaBuffer,p=M.now();for(;l.length>0&&p-l[0].time>160;)l.shift()}_onMoveEnd(l){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const p={zoom:0,bearing:0,pitch:0,roll:0,pan:new a.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:B}of this._inertiaBuffer)p.zoom+=B.zoomDelta||0,p.bearing+=B.bearingDelta||0,p.pitch+=B.pitchDelta||0,p.roll+=B.rollDelta||0,B.panDelta&&p.pan._add(B.panDelta),B.around&&(p.around=B.around),B.pinchAround&&(p.pinchAround=B.pinchAround);const C=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,E={};if(p.pan.mag()){const B=Ff(p.pan.mag(),C,a.e({},Kc,l||{})),U=p.pan.mult(B.amount/p.pan.mag()),G=this._map.cameraHelper.handlePanInertia(U,this._map.transform);E.center=G.easingCenter,E.offset=G.easingOffset,Lf(E,B)}if(p.zoom){const B=Ff(p.zoom,C,Fp);E.zoom=this._map.transform.zoom+B.amount,Lf(E,B)}if(p.bearing){const B=Ff(p.bearing,C,qh);E.bearing=this._map.transform.bearing+a.ah(B.amount,-179,179),Lf(E,B)}if(p.pitch){const B=Ff(p.pitch,C,ll);E.pitch=this._map.transform.pitch+B.amount,Lf(E,B)}if(p.roll){const B=Ff(p.roll,C,uc);E.roll=this._map.transform.roll+a.ah(B.amount,-179,179),Lf(E,B)}if(E.zoom||E.bearing){const B=p.pinchAround===void 0?p.around:p.pinchAround;E.around=B?this._map.unproject(B):this._map.getCenter()}return this.clear(),a.e(E,{noMoveStart:!0})}}function Lf(O,l){(!O.duration||O.duration<l.duration)&&(O.duration=l.duration,O.easing=l.easing)}function Ff(O,l,p){const{maxSpeed:C,linearity:E,deceleration:B}=p,U=a.ah(O*E/(l/1e3),-C,C),G=Math.abs(U)/(B*E);return{easing:p.easing,duration:1e3*G,amount:U*(G/2)}}class Tu extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,p,C,E={}){C=C instanceof MouseEvent?C:new MouseEvent(l,C);const B=x.mousePos(p.getCanvas(),C),U=p.unproject(B);super(l,a.e({point:B,lngLat:U,originalEvent:C},E)),this._defaultPrevented=!1,this.target=p}}class ls extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,p,C){const E=l==="touchend"?C.changedTouches:C.touches,B=x.touchPos(p.getCanvasContainer(),E),U=B.map((Z=>p.unproject(Z))),G=B.reduce(((Z,ae,ce,me)=>Z.add(ae.div(me.length))),new a.P(0,0));super(l,{points:B,point:G,lngLats:U,lngLat:p.unproject(G),originalEvent:C}),this._defaultPrevented=!1}}class cc extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,p,C){super(l,{originalEvent:C}),this._defaultPrevented=!1}}class Nl{constructor(l,p){this._map=l,this._clickTolerance=p.clickTolerance}reset(){delete this._mousedownPos}wheel(l){return this._firePreventable(new cc(l.type,this._map,l))}mousedown(l,p){return this._mousedownPos=p,this._firePreventable(new Tu(l.type,this._map,l))}mouseup(l){this._map.fire(new Tu(l.type,this._map,l))}click(l,p){this._mousedownPos&&this._mousedownPos.dist(p)>=this._clickTolerance||this._map.fire(new Tu(l.type,this._map,l))}dblclick(l){return this._firePreventable(new Tu(l.type,this._map,l))}mouseover(l){this._map.fire(new Tu(l.type,this._map,l))}mouseout(l){this._map.fire(new Tu(l.type,this._map,l))}touchstart(l){return this._firePreventable(new ls(l.type,this._map,l))}touchmove(l){this._map.fire(new ls(l.type,this._map,l))}touchend(l){this._map.fire(new ls(l.type,this._map,l))}touchcancel(l){this._map.fire(new ls(l.type,this._map,l))}_firePreventable(l){if(this._map.fire(l),l.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Au{constructor(l){this._map=l}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(l){this._map.fire(new Tu(l.type,this._map,l))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Tu("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(l){this._delayContextMenu?this._contextMenuEvent=l:this._ignoreContextMenu||this._map.fire(new Tu(l.type,this._map,l)),this._map.listens("contextmenu")&&l.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Yh{constructor(l){this._map=l}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(l){return this.transform.screenPointToLocation(a.P.convert(l),this._map.terrain)}}class vl{constructor(l,p){this._map=l,this._tr=new Yh(l),this._el=l.getCanvasContainer(),this._container=l.getContainer(),this._clickTolerance=p.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(l,p){this.isEnabled()&&l.shiftKey&&l.button===0&&(x.disableDrag(),this._startPos=this._lastPos=p,this._active=!0)}mousemoveWindow(l,p){if(!this._active)return;const C=p;if(this._lastPos.equals(C)||!this._box&&C.dist(this._startPos)<this._clickTolerance)return;const E=this._startPos;this._lastPos=C,this._box||(this._box=x.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",l));const B=Math.min(E.x,C.x),U=Math.max(E.x,C.x),G=Math.min(E.y,C.y),Z=Math.max(E.y,C.y);x.setTransform(this._box,`translate(${B}px,${G}px)`),this._box.style.width=U-B+"px",this._box.style.height=Z-G+"px"}mouseupWindow(l,p){if(!this._active||l.button!==0)return;const C=this._startPos,E=p;if(this.reset(),x.suppressClick(),C.x!==E.x||C.y!==E.y)return this._map.fire(new a.l("boxzoomend",{originalEvent:l})),{cameraAnimation:B=>B.fitScreenCoordinates(C,E,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",l)}keydown(l){this._active&&l.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",l))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(x.remove(this._box),this._box=null),x.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(l,p){return this._map.fire(new a.l(l,{originalEvent:p}))}}function Ac(O,l){if(O.length!==l.length)throw new Error(`The number of touches and points are not equal - touches ${O.length}, points ${l.length}`);const p={};for(let C=0;C<O.length;C++)p[O[C].identifier]=l[C];return p}class Ld{constructor(l){this.reset(),this.numTouches=l.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(l,p,C){(this.centroid||C.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=l.timeStamp),C.length===this.numTouches&&(this.centroid=(function(E){const B=new a.P(0,0);for(const U of E)B._add(U);return B.div(E.length)})(p),this.touches=Ac(C,p)))}touchmove(l,p,C){if(this.aborted||!this.centroid)return;const E=Ac(C,p);for(const B in this.touches){const U=E[B];(!U||U.dist(this.touches[B])>30)&&(this.aborted=!0)}}touchend(l,p,C){if((!this.centroid||l.timeStamp-this.startTime>500)&&(this.aborted=!0),C.length===0){const E=!this.aborted&&this.centroid;if(this.reset(),E)return E}}}class Ym{constructor(l){this.singleTap=new Ld(l),this.numTaps=l.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(l,p,C){this.singleTap.touchstart(l,p,C)}touchmove(l,p,C){this.singleTap.touchmove(l,p,C)}touchend(l,p,C){const E=this.singleTap.touchend(l,p,C);if(E){const B=l.timeStamp-this.lastTime<500,U=!this.lastTap||this.lastTap.dist(E)<30;if(B&&U||this.reset(),this.count++,this.lastTime=l.timeStamp,this.lastTap=E,this.count===this.numTaps)return this.reset(),E}}}class pv{constructor(l){this._tr=new Yh(l),this._zoomIn=new Ym({numTouches:1,numTaps:2}),this._zoomOut=new Ym({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(l,p,C){this._zoomIn.touchstart(l,p,C),this._zoomOut.touchstart(l,p,C)}touchmove(l,p,C){this._zoomIn.touchmove(l,p,C),this._zoomOut.touchmove(l,p,C)}touchend(l,p,C){const E=this._zoomIn.touchend(l,p,C),B=this._zoomOut.touchend(l,p,C),U=this._tr;return E?(this._active=!0,l.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:G=>G.easeTo({duration:300,zoom:U.zoom+1,around:U.unproject(E)},{originalEvent:l})}):B?(this._active=!0,l.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:G=>G.easeTo({duration:300,zoom:U.zoom-1,around:U.unproject(B)},{originalEvent:l})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Gl{constructor(l){this._enabled=!!l.enable,this._moveStateManager=l.moveStateManager,this._clickTolerance=l.clickTolerance||1,this._moveFunction=l.move,this._activateOnStart=!!l.activateOnStart,l.assignEvents(this),this.reset()}reset(l){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(l)}_move(...l){const p=this._moveFunction(...l);if(p.bearingDelta||p.pitchDelta||p.rollDelta||p.around||p.panDelta)return this._active=!0,p}dragStart(l,p){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(l)&&(this._moveStateManager.startMove(l),this._lastPoint=Array.isArray(p)?p[0]:p,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(l,p){if(!this.isEnabled())return;const C=this._lastPoint;if(!C)return;if(l.preventDefault(),!this._moveStateManager.isValidMoveEvent(l))return void this.reset(l);const E=Array.isArray(p)?p[0]:p;return!this._moved&&E.dist(C)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=E,this._move(C,E))}dragEnd(l){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(l)&&(this._moved&&x.suppressClick(),this.reset(l))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const $h=0,Fd=2,Lc={[$h]:1,[Fd]:2};class Vn{constructor(l){this._correctEvent=l.checkCorrectEvent}startMove(l){const p=x.mouseButton(l);this._eventButton=p}endMove(l){delete this._eventButton}isValidStartEvent(l){return this._correctEvent(l)}isValidMoveEvent(l){return!(function(p,C){const E=Lc[C];return p.buttons===void 0||(p.buttons&E)!==E})(l,this._eventButton)}isValidEndEvent(l){return x.mouseButton(l)===this._eventButton}}class zd{constructor(){this._firstTouch=void 0}_isOneFingerTouch(l){return l.targetTouches.length===1}_isSameTouchEvent(l){return l.targetTouches[0].identifier===this._firstTouch}startMove(l){this._firstTouch=l.targetTouches[0].identifier}endMove(l){delete this._firstTouch}isValidStartEvent(l){return this._isOneFingerTouch(l)}isValidMoveEvent(l){return this._isOneFingerTouch(l)&&this._isSameTouchEvent(l)}isValidEndEvent(l){return this._isOneFingerTouch(l)&&this._isSameTouchEvent(l)}}class zf{constructor(l=new Vn({checkCorrectEvent:()=>!0}),p=new zd){this.mouseMoveStateManager=l,this.oneFingerTouchMoveStateManager=p}_executeRelevantHandler(l,p,C){return l instanceof MouseEvent?p(l):typeof TouchEvent<"u"&&l instanceof TouchEvent?C(l):void 0}startMove(l){this._executeRelevantHandler(l,(p=>this.mouseMoveStateManager.startMove(p)),(p=>this.oneFingerTouchMoveStateManager.startMove(p)))}endMove(l){this._executeRelevantHandler(l,(p=>this.mouseMoveStateManager.endMove(p)),(p=>this.oneFingerTouchMoveStateManager.endMove(p)))}isValidStartEvent(l){return this._executeRelevantHandler(l,(p=>this.mouseMoveStateManager.isValidStartEvent(p)),(p=>this.oneFingerTouchMoveStateManager.isValidStartEvent(p)))}isValidMoveEvent(l){return this._executeRelevantHandler(l,(p=>this.mouseMoveStateManager.isValidMoveEvent(p)),(p=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(p)))}isValidEndEvent(l){return this._executeRelevantHandler(l,(p=>this.mouseMoveStateManager.isValidEndEvent(p)),(p=>this.oneFingerTouchMoveStateManager.isValidEndEvent(p)))}}const ch=O=>{O.mousedown=O.dragStart,O.mousemoveWindow=O.dragMove,O.mouseup=O.dragEnd,O.contextmenu=l=>{l.preventDefault()}};class Vh{constructor(l,p){this._clickTolerance=l.clickTolerance||1,this._map=p,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new a.P(0,0)}_shouldBePrevented(l){return l<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(l,p,C){return this._calculateTransform(l,p,C)}touchmove(l,p,C){if(this._active){if(!this._shouldBePrevented(C.length))return l.preventDefault(),this._calculateTransform(l,p,C);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",l)}}touchend(l,p,C){this._calculateTransform(l,p,C),this._active&&this._shouldBePrevented(C.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(l,p,C){C.length>0&&(this._active=!0);const E=Ac(C,p),B=new a.P(0,0),U=new a.P(0,0);let G=0;for(const ae in E){const ce=E[ae],me=this._touches[ae];me&&(B._add(ce),U._add(ce.sub(me)),G++,E[ae]=ce)}if(this._touches=E,this._shouldBePrevented(G)||!U.mag())return;const Z=U.div(G);return this._sum._add(Z),this._sum.mag()<this._clickTolerance?void 0:{around:B.div(G),panDelta:Z}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Hh{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(l,p,C){this._firstTwoTouches||C.length<2||(this._firstTwoTouches=[C[0].identifier,C[1].identifier],this._start([p[0],p[1]]))}touchmove(l,p,C){if(!this._firstTwoTouches)return;l.preventDefault();const[E,B]=this._firstTwoTouches,U=Ah(C,p,E),G=Ah(C,p,B);if(!U||!G)return;const Z=this._aroundCenter?null:U.add(G).div(2);return this._move([U,G],Z,l)}touchend(l,p,C){if(!this._firstTwoTouches)return;const[E,B]=this._firstTwoTouches,U=Ah(C,p,E),G=Ah(C,p,B);U&&G||(this._active&&x.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(l){this._enabled=!0,this._aroundCenter=!!l&&l.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Ah(O,l,p){for(let C=0;C<O.length;C++)if(O[C].identifier===p)return l[C]}function or(O,l){return Math.log(O/l)/Math.LN2}class hc extends Hh{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(l){this._startDistance=this._distance=l[0].dist(l[1])}_move(l,p){const C=this._distance;if(this._distance=l[0].dist(l[1]),this._active||!(Math.abs(or(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:or(this._distance,C),pinchAround:p}}}function g0(O,l){return 180*O.angleWith(l)/Math.PI}class jf extends Hh{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(l){this._startVector=this._vector=l[0].sub(l[1]),this._minDiameter=l[0].dist(l[1])}_move(l,p,C){const E=this._vector;if(this._vector=l[0].sub(l[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:g0(this._vector,E),pinchAround:p}}_isBelowThreshold(l){this._minDiameter=Math.min(this._minDiameter,l.mag());const p=25/(Math.PI*this._minDiameter)*360,C=g0(l,this._startVector);return Math.abs(C)<p}}function Zh(O){return Math.abs(O.y)>Math.abs(O.x)}class Ru extends Hh{constructor(l){super(),this._currentTouchCount=0,this._map=l}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(l,p,C){super.touchstart(l,p,C),this._currentTouchCount=C.length}_start(l){this._lastPoints=l,Zh(l[0].sub(l[1]))&&(this._valid=!1)}_move(l,p,C){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const E=l[0].sub(this._lastPoints[0]),B=l[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(E,B,C.timeStamp),this._valid?(this._lastPoints=l,this._active=!0,{pitchDelta:(E.y+B.y)/2*-.5}):void 0}gestureBeginsVertically(l,p,C){if(this._valid!==void 0)return this._valid;const E=l.mag()>=2,B=p.mag()>=2;if(!E&&!B)return;if(!E||!B)return this._firstMove===void 0&&(this._firstMove=C),C-this._firstMove<100&&void 0;const U=l.y>0==p.y>0;return Zh(l)&&Zh(p)&&U}}const jd={panStep:100,bearingStep:15,pitchStep:10};class Du{constructor(l){this._tr=new Yh(l);const p=jd;this._panStep=p.panStep,this._bearingStep=p.bearingStep,this._pitchStep=p.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(l){if(l.altKey||l.ctrlKey||l.metaKey)return;let p=0,C=0,E=0,B=0,U=0;switch(l.keyCode){case 61:case 107:case 171:case 187:p=1;break;case 189:case 109:case 173:p=-1;break;case 37:l.shiftKey?C=-1:(l.preventDefault(),B=-1);break;case 39:l.shiftKey?C=1:(l.preventDefault(),B=1);break;case 38:l.shiftKey?E=1:(l.preventDefault(),U=-1);break;case 40:l.shiftKey?E=-1:(l.preventDefault(),U=1);break;default:return}return this._rotationDisabled&&(C=0,E=0),{cameraAnimation:G=>{const Z=this._tr;G.easeTo({duration:300,easeId:"keyboardHandler",easing:Wl,zoom:p?Math.round(Z.zoom)+p*(l.shiftKey?2:1):Z.zoom,bearing:Z.bearing+C*this._bearingStep,pitch:Z.pitch+E*this._pitchStep,offset:[-B*this._panStep,-U*this._panStep],center:Z.center},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Wl(O){return O*(2-O)}const y0=4.000244140625,hh=1/450;class $m{constructor(l,p){this._onTimeout=C=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(C)},this._map=l,this._tr=new Yh(l),this._triggerRenderFrame=p,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=hh}setZoomRate(l){this._defaultZoomRate=l}setWheelZoomRate(l){this._wheelZoomRate=l}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(l){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!l&&l.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(l){return!!this._map.cooperativeGestures.isEnabled()&&!(l.ctrlKey||this._map.cooperativeGestures.isBypassed(l))}wheel(l){if(!this.isEnabled())return;if(this._shouldBePrevented(l))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",l);let p=l.deltaMode===WheelEvent.DOM_DELTA_LINE?40*l.deltaY:l.deltaY;const C=M.now(),E=C-(this._lastWheelEventTime||0);this._lastWheelEventTime=C,p!==0&&p%y0==0?this._type="wheel":p!==0&&Math.abs(p)<4?this._type="trackpad":E>400?(this._type=null,this._lastValue=p,this._timeout=setTimeout(this._onTimeout,40,l)):this._type||(this._type=Math.abs(E*p)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,p+=this._lastValue)),l.shiftKey&&p&&(p/=4),this._type&&(this._lastWheelEvent=l,this._delta-=p,this._active||this._start(l)),l.preventDefault()}_start(l){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const p=x.mousePos(this._map.getCanvas(),l),C=this._tr;this._aroundPoint=this._aroundCenter?C.transform.locationToScreenPoint(a.S.convert(C.center)):p,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const l=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const G=l.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=G),typeof this._targetZoom=="number"&&(this._targetZoom+=G)}if(this._delta!==0){const G=this._type==="wheel"&&Math.abs(this._delta)>y0?this._wheelZoomRate:this._defaultZoomRate;let Z=2/(1+Math.exp(-Math.abs(this._delta*G)));this._delta<0&&Z!==0&&(Z=1/Z);const ae=typeof this._targetZoom!="number"?l.scale:a.af(this._targetZoom);this._targetZoom=l.getConstrained(l.getCameraLngLat(),a.ak(ae*Z)).zoom,this._type==="wheel"&&(this._startZoom=l.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const p=typeof this._targetZoom!="number"?l.zoom:this._targetZoom,C=this._startZoom,E=this._easing;let B,U=!1;if(this._type==="wheel"&&C&&E){const G=M.now()-this._lastWheelEventTime,Z=Math.min((G+5)/200,1),ae=E(Z);B=a.C.number(C,p,ae),Z<1?this._frameId||(this._frameId=!0):U=!0}else B=p,U=!0;return this._active=!0,U&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout}),200)),this._lastExpectedZoom=B,{noInertia:!0,needsRenderFrame:!U,zoomDelta:B-l.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(l){let p=a.co;if(this._prevEase){const C=this._prevEase,E=(M.now()-C.start)/C.duration,B=C.easing(E+.01)-C.easing(E),U=.27/Math.sqrt(B*B+1e-4)*.01,G=Math.sqrt(.0729-U*U);p=a.cm(U,G,.25,1)}return this._prevEase={start:M.now(),duration:l,easing:p},p}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class dc{constructor(l,p){this._clickZoom=l,this._tapZoom=p}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class bl{constructor(l){this._tr=new Yh(l),this.reset()}reset(){this._active=!1}dblclick(l,p){return l.preventDefault(),{cameraAnimation:C=>{C.easeTo({duration:300,zoom:this._tr.zoom+(l.shiftKey?-1:1),around:this._tr.unproject(p)},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class To{constructor(){this._tap=new Ym({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(l,p,C){if(!this._swipePoint)if(this._tapTime){const E=p[0],B=l.timeStamp-this._tapTime<500,U=this._tapPoint.dist(E)<30;B&&U?C.length>0&&(this._swipePoint=E,this._swipeTouch=C[0].identifier):this.reset()}else this._tap.touchstart(l,p,C)}touchmove(l,p,C){if(this._tapTime){if(this._swipePoint){if(C[0].identifier!==this._swipeTouch)return;const E=p[0],B=E.y-this._swipePoint.y;return this._swipePoint=E,l.preventDefault(),this._active=!0,{zoomDelta:B/128}}}else this._tap.touchmove(l,p,C)}touchend(l,p,C){if(this._tapTime)this._swipePoint&&C.length===0&&this.reset();else{const E=this._tap.touchend(l,p,C);E&&(this._tapTime=l.timeStamp,this._tapPoint=E)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class dh{constructor(l,p,C){this._el=l,this._mousePan=p,this._touchPan=C}enable(l){this._inertiaOptions=l||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class hu{constructor(l,p,C,E){this._pitchWithRotate=l.pitchWithRotate,this._rollEnabled=l.rollEnabled,this._mouseRotate=p,this._mousePitch=C,this._mouseRoll=E}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class Xh{constructor(l,p,C,E){this._el=l,this._touchZoom=p,this._touchRotate=C,this._tapDragZoom=E,this._rotationDisabled=!1,this._enabled=!0}enable(l){this._touchZoom.enable(l),this._rotationDisabled||this._touchRotate.enable(l),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class Nf{constructor(l,p){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=l,this._options=p,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const l=this._map.getCanvasContainer();l.classList.add("maplibregl-cooperative-gestures"),this._container=x.create("div","maplibregl-cooperative-gesture-screen",l);let p=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(p=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const C=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),E=document.createElement("div");E.className="maplibregl-desktop-message",E.textContent=p,this._container.appendChild(E);const B=document.createElement("div");B.className="maplibregl-mobile-message",B.textContent=C,this._container.appendChild(B),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(x.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(l){return l[this._bypassKey]}notifyGestureBlocked(l,p){this._enabled&&(this._map.fire(new a.l("cooperativegestureprevented",{gestureType:l,originalEvent:p})),this._container.classList.add("maplibregl-show"),setTimeout((()=>{this._container.classList.remove("maplibregl-show")}),100))}}const ia=O=>O.zoom||O.drag||O.roll||O.pitch||O.rotate;class Jh extends a.l{}function ed(O){return O.panDelta&&O.panDelta.mag()||O.zoomDelta||O.bearingDelta||O.pitchDelta||O.rollDelta}class La{constructor(l,p){this.handleWindowEvent=E=>{this.handleEvent(E,`${E.type}Window`)},this.handleEvent=(E,B)=>{if(E.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const U=E.type==="renderFrame"?void 0:E,G={needsRenderFrame:!1},Z={},ae={};for(const{handlerName:ge,handler:Pe,allowed:Ne}of this._handlers){if(!Pe.isEnabled())continue;let Ze;if(this._blockedByActive(ae,Ne,ge))Pe.reset();else if(Pe[B||E.type]){if(a.cp(E,B||E.type)){const Xe=x.mousePos(this._map.getCanvas(),E);Ze=Pe[B||E.type](E,Xe)}else if(a.cq(E,B||E.type)){const Xe=this._getMapTouches(E.touches),et=x.touchPos(this._map.getCanvas(),Xe);Ze=Pe[B||E.type](E,et,Xe)}else a.cr(B||E.type)||(Ze=Pe[B||E.type](E));this.mergeHandlerResult(G,Z,Ze,ge,U),Ze&&Ze.needsRenderFrame&&this._triggerRenderFrame()}(Ze||Pe.isActive())&&(ae[ge]=Pe)}const ce={};for(const ge in this._previousActiveHandlers)ae[ge]||(ce[ge]=U);this._previousActiveHandlers=ae,(Object.keys(ce).length||ed(G))&&(this._changes.push([G,Z,ce]),this._triggerRenderFrame()),(Object.keys(ae).length||ed(G))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:me}=G;me&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],me(this._map))},this._map=l,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new m0(l),this._bearingSnap=p.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(p);const C=this._el;this._listeners=[[C,"touchstart",{passive:!0}],[C,"touchmove",{passive:!1}],[C,"touchend",void 0],[C,"touchcancel",void 0],[C,"mousedown",void 0],[C,"mousemove",void 0],[C,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[C,"mouseover",void 0],[C,"mouseout",void 0],[C,"dblclick",void 0],[C,"click",void 0],[C,"keydown",{capture:!1}],[C,"keyup",void 0],[C,"wheel",{passive:!1}],[C,"contextmenu",void 0],[window,"blur",void 0]];for(const[E,B,U]of this._listeners)x.addEventListener(E,B,E===document?this.handleWindowEvent:this.handleEvent,U)}destroy(){for(const[l,p,C]of this._listeners)x.removeEventListener(l,p,l===document?this.handleWindowEvent:this.handleEvent,C)}_addDefaultHandlers(l){const p=this._map,C=p.getCanvasContainer();this._add("mapEvent",new Nl(p,l));const E=p.boxZoom=new vl(p,l);this._add("boxZoom",E),l.interactive&&l.boxZoom&&E.enable();const B=p.cooperativeGestures=new Nf(p,l.cooperativeGestures);this._add("cooperativeGestures",B),l.cooperativeGestures&&B.enable();const U=new pv(p),G=new bl(p);p.doubleClickZoom=new dc(G,U),this._add("tapZoom",U),this._add("clickZoom",G),l.interactive&&l.doubleClickZoom&&p.doubleClickZoom.enable();const Z=new To;this._add("tapDragZoom",Z);const ae=p.touchPitch=new Ru(p);this._add("touchPitch",ae),l.interactive&&l.touchPitch&&p.touchPitch.enable(l.touchPitch);const ce=()=>p.project(p.getCenter()),me=(function({enable:ut,clickTolerance:gt,aroundCenter:xt=!0,minPixelCenterThreshold:ct=100,rotateDegreesPerPixelMoved:wt=.8},Wt){const Lt=new Vn({checkCorrectEvent:Nt=>x.mouseButton(Nt)===0&&Nt.ctrlKey||x.mouseButton(Nt)===2&&!Nt.ctrlKey});return new Gl({clickTolerance:gt,move:(Nt,Gt)=>{const Bn=Wt();if(xt&&Math.abs(Bn.y-Nt.y)>ct)return{bearingDelta:a.cn(new a.P(Nt.x,Gt.y),Gt,Bn)};let kn=(Gt.x-Nt.x)*wt;return xt&&Gt.y<Bn.y&&(kn=-kn),{bearingDelta:kn}},moveStateManager:Lt,enable:ut,assignEvents:ch})})(l,ce),ge=(function({enable:ut,clickTolerance:gt,pitchDegreesPerPixelMoved:xt=-.5}){const ct=new Vn({checkCorrectEvent:wt=>x.mouseButton(wt)===0&&wt.ctrlKey||x.mouseButton(wt)===2});return new Gl({clickTolerance:gt,move:(wt,Wt)=>({pitchDelta:(Wt.y-wt.y)*xt}),moveStateManager:ct,enable:ut,assignEvents:ch})})(l),Pe=(function({enable:ut,clickTolerance:gt,rollDegreesPerPixelMoved:xt=.3},ct){const wt=new Vn({checkCorrectEvent:Wt=>x.mouseButton(Wt)===2&&Wt.ctrlKey});return new Gl({clickTolerance:gt,move:(Wt,Lt)=>{const Nt=ct();let Gt=(Lt.x-Wt.x)*xt;return Lt.y<Nt.y&&(Gt=-Gt),{rollDelta:Gt}},moveStateManager:wt,enable:ut,assignEvents:ch})})(l,ce);p.dragRotate=new hu(l,me,ge,Pe),this._add("mouseRotate",me,["mousePitch"]),this._add("mousePitch",ge,["mouseRotate","mouseRoll"]),this._add("mouseRoll",Pe,["mousePitch"]),l.interactive&&l.dragRotate&&p.dragRotate.enable();const Ne=(function({enable:ut,clickTolerance:gt}){const xt=new Vn({checkCorrectEvent:ct=>x.mouseButton(ct)===0&&!ct.ctrlKey});return new Gl({clickTolerance:gt,move:(ct,wt)=>({around:wt,panDelta:wt.sub(ct)}),activateOnStart:!0,moveStateManager:xt,enable:ut,assignEvents:ch})})(l),Ze=new Vh(l,p);p.dragPan=new dh(C,Ne,Ze),this._add("mousePan",Ne),this._add("touchPan",Ze,["touchZoom","touchRotate"]),l.interactive&&l.dragPan&&p.dragPan.enable(l.dragPan);const Xe=new jf,et=new hc;p.touchZoomRotate=new Xh(C,et,Xe,Z),this._add("touchRotate",Xe,["touchPan","touchZoom"]),this._add("touchZoom",et,["touchPan","touchRotate"]),l.interactive&&l.touchZoomRotate&&p.touchZoomRotate.enable(l.touchZoomRotate);const ot=p.scrollZoom=new $m(p,(()=>this._triggerRenderFrame()));this._add("scrollZoom",ot,["mousePan"]),l.interactive&&l.scrollZoom&&p.scrollZoom.enable(l.scrollZoom);const ht=p.keyboard=new Du(p);this._add("keyboard",ht),l.interactive&&l.keyboard&&p.keyboard.enable(),this._add("blockableMapEvent",new Au(p))}_add(l,p,C){this._handlers.push({handlerName:l,handler:p,allowed:C}),this._handlersById[l]=p}stop(l){if(!this._updatingCamera){for(const{handler:p}of this._handlers)p.reset();this._inertia.clear(),this._fireEvents({},{},l),this._changes=[]}}isActive(){for(const{handler:l}of this._handlers)if(l.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!ia(this._eventsInProgress)||this.isZooming()}_blockedByActive(l,p,C){for(const E in l)if(E!==C&&(!p||p.indexOf(E)<0))return!0;return!1}_getMapTouches(l){const p=[];for(const C of l)this._el.contains(C.target)&&p.push(C);return p}mergeHandlerResult(l,p,C,E,B){if(!C)return;a.e(l,C);const U={handlerName:E,originalEvent:C.originalEvent||B};C.zoomDelta!==void 0&&(p.zoom=U),C.panDelta!==void 0&&(p.drag=U),C.rollDelta!==void 0&&(p.roll=U),C.pitchDelta!==void 0&&(p.pitch=U),C.bearingDelta!==void 0&&(p.rotate=U)}_applyChanges(){const l={},p={},C={};for(const[E,B,U]of this._changes)E.panDelta&&(l.panDelta=(l.panDelta||new a.P(0,0))._add(E.panDelta)),E.zoomDelta&&(l.zoomDelta=(l.zoomDelta||0)+E.zoomDelta),E.bearingDelta&&(l.bearingDelta=(l.bearingDelta||0)+E.bearingDelta),E.pitchDelta&&(l.pitchDelta=(l.pitchDelta||0)+E.pitchDelta),E.rollDelta&&(l.rollDelta=(l.rollDelta||0)+E.rollDelta),E.around!==void 0&&(l.around=E.around),E.pinchAround!==void 0&&(l.pinchAround=E.pinchAround),E.noInertia&&(l.noInertia=E.noInertia),a.e(p,B),a.e(C,U);this._updateMapTransform(l,p,C),this._changes=[]}_updateMapTransform(l,p,C){const E=this._map,B=E._getTransformForUpdate(),U=E.terrain;if(!(ed(l)||U&&this._terrainMovement))return this._fireEvents(p,C,!0);E._stop(!0);let{panDelta:G,zoomDelta:Z,bearingDelta:ae,pitchDelta:ce,rollDelta:me,around:ge,pinchAround:Pe}=l;Pe!==void 0&&(ge=Pe),ge=ge||E.transform.centerPoint,U&&!B.isPointOnMapSurface(ge)&&(ge=B.centerPoint);const Ne={panDelta:G,zoomDelta:Z,rollDelta:me,pitchDelta:ce,bearingDelta:ae,around:ge};this._map.cameraHelper.useGlobeControls&&!B.isPointOnMapSurface(ge)&&(ge=B.centerPoint);const Ze=ge.distSqr(B.centerPoint)<.01?B.center:B.screenPointToLocation(G?ge.sub(G):ge);this._handleMapControls({terrain:U,tr:B,deltasForHelper:Ne,preZoomAroundLoc:Ze,combinedEventsInProgress:p,panDelta:G}),E._applyUpdatedTransform(B),this._map._update(),l.noInertia||this._inertia.record(l),this._fireEvents(p,C,!0)}_handleMapControls({terrain:l,tr:p,deltasForHelper:C,preZoomAroundLoc:E,combinedEventsInProgress:B,panDelta:U}){const G=this._map.cameraHelper;if(G.handleMapControlsRollPitchBearingZoom(C,p),l)return G.useGlobeControls?(this._terrainMovement||!B.drag&&!B.zoom||(this._terrainMovement=!0,this._map._elevationFreeze=!0),void G.handleMapControlsPan(C,p,E)):this._terrainMovement||!B.drag&&!B.zoom?void(B.drag&&this._terrainMovement&&U?p.setCenter(p.screenPointToLocation(p.centerPoint.sub(U))):G.handleMapControlsPan(C,p,E)):(this._terrainMovement=!0,this._map._elevationFreeze=!0,void G.handleMapControlsPan(C,p,E));G.handleMapControlsPan(C,p,E)}_fireEvents(l,p,C){const E=ia(this._eventsInProgress),B=ia(l),U={};for(const me in l){const{originalEvent:ge}=l[me];this._eventsInProgress[me]||(U[`${me}start`]=ge),this._eventsInProgress[me]=l[me]}!E&&B&&this._fireEvent("movestart",B.originalEvent);for(const me in U)this._fireEvent(me,U[me]);B&&this._fireEvent("move",B.originalEvent);for(const me in l){const{originalEvent:ge}=l[me];this._fireEvent(me,ge)}const G={};let Z;for(const me in this._eventsInProgress){const{handlerName:ge,originalEvent:Pe}=this._eventsInProgress[me];this._handlersById[ge].isActive()||(delete this._eventsInProgress[me],Z=p[ge]||Pe,G[`${me}end`]=Z)}for(const me in G)this._fireEvent(me,G[me]);const ae=ia(this._eventsInProgress),ce=(E||B)&&!ae;if(ce&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const me=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&me.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(me)}if(C&&ce){this._updatingCamera=!0;const me=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),ge=Pe=>Pe!==0&&-this._bearingSnap<Pe&&Pe<this._bearingSnap;!me||!me.essential&&M.prefersReducedMotion?(this._map.fire(new a.l("moveend",{originalEvent:Z})),ge(this._map.getBearing())&&this._map.resetNorth()):(ge(me.bearing||this._map.getBearing())&&(me.bearing=0),me.freezeElevation=!0,this._map.easeTo(me,{originalEvent:Z})),this._updatingCamera=!1}}_fireEvent(l,p){this._map.fire(new a.l(l,p?{originalEvent:p}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((l=>{delete this._frameId,this.handleEvent(new Jh("renderFrame",{timeStamp:l})),this._applyChanges()}))}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Nd extends a.E{constructor(l,p,C){super(),this._renderFrameCallback=()=>{const E=Math.min((M.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(E)),E<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=l,this._bearingSnap=C.bearingSnap,this.cameraHelper=p,this.on("moveend",(()=>{delete this._requestedCameraState}))}migrateProjection(l,p){l.apply(this.transform),this.transform=l,this.cameraHelper=p}getCenter(){return new a.S(this.transform.center.lng,this.transform.center.lat)}setCenter(l,p){return this.jumpTo({center:l},p)}getCenterElevation(){return this.transform.elevation}setCenterElevation(l,p){return this.jumpTo({elevation:l},p),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(l){this._centerClampedToGround=l}panBy(l,p,C){return l=a.P.convert(l).mult(-1),this.panTo(this.transform.center,a.e({offset:l},p),C)}panTo(l,p,C){return this.easeTo(a.e({center:l},p),C)}getZoom(){return this.transform.zoom}setZoom(l,p){return this.jumpTo({zoom:l},p),this}zoomTo(l,p,C){return this.easeTo(a.e({zoom:l},p),C)}zoomIn(l,p){return this.zoomTo(this.getZoom()+1,l,p),this}zoomOut(l,p){return this.zoomTo(this.getZoom()-1,l,p),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(l,p){return l!=this.transform.fov&&(this.transform.setFov(l),this.fire(new a.l("movestart",p)).fire(new a.l("move",p)).fire(new a.l("moveend",p))),this}getBearing(){return this.transform.bearing}setBearing(l,p){return this.jumpTo({bearing:l},p),this}getPadding(){return this.transform.padding}setPadding(l,p){return this.jumpTo({padding:l},p),this}rotateTo(l,p,C){return this.easeTo(a.e({bearing:l},p),C)}resetNorth(l,p){return this.rotateTo(0,a.e({duration:1e3},l),p),this}resetNorthPitch(l,p){return this.easeTo(a.e({bearing:0,pitch:0,roll:0,duration:1e3},l),p),this}snapToNorth(l,p){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(l,p):this}getPitch(){return this.transform.pitch}setPitch(l,p){return this.jumpTo({pitch:l},p),this}getRoll(){return this.transform.roll}setRoll(l,p){return this.jumpTo({roll:l},p),this}cameraForBounds(l,p){l=it.convert(l).adjustAntiMeridian();const C=p&&p.bearing||0;return this._cameraForBoxAndBearing(l.getNorthWest(),l.getSouthEast(),C,p)}_cameraForBoxAndBearing(l,p,C,E){const B={top:0,bottom:0,right:0,left:0};if(typeof(E=a.e({padding:B,offset:[0,0],maxZoom:this.transform.maxZoom},E)).padding=="number"){const ae=E.padding;E.padding={top:ae,bottom:ae,right:ae,left:ae}}const U=a.e(B,E.padding);E.padding=U;const G=this.transform,Z=new it(l,p);return this.cameraHelper.cameraForBoxAndBearing(E,U,Z,C,G)}fitBounds(l,p,C){return this._fitInternal(this.cameraForBounds(l,p),p,C)}fitScreenCoordinates(l,p,C,E,B){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(a.P.convert(l)),this.transform.screenPointToLocation(a.P.convert(p)),C,E),E,B)}_fitInternal(l,p,C){return l?(delete(p=a.e(l,p)).padding,p.linear?this.easeTo(p,C):this.flyTo(p,C)):this}jumpTo(l,p){this.stop();const C=this._getTransformForUpdate();let E=!1,B=!1,U=!1;const G=C.zoom;this.cameraHelper.handleJumpToCenterZoom(C,l);const Z=C.zoom!==G;return"elevation"in l&&C.elevation!==+l.elevation&&C.setElevation(+l.elevation),"bearing"in l&&C.bearing!==+l.bearing&&(E=!0,C.setBearing(+l.bearing)),"pitch"in l&&C.pitch!==+l.pitch&&(B=!0,C.setPitch(+l.pitch)),"roll"in l&&C.roll!==+l.roll&&(U=!0,C.setRoll(+l.roll)),l.padding==null||C.isPaddingEqual(l.padding)||C.setPadding(l.padding),this._applyUpdatedTransform(C),this.fire(new a.l("movestart",p)).fire(new a.l("move",p)),Z&&this.fire(new a.l("zoomstart",p)).fire(new a.l("zoom",p)).fire(new a.l("zoomend",p)),E&&this.fire(new a.l("rotatestart",p)).fire(new a.l("rotate",p)).fire(new a.l("rotateend",p)),B&&this.fire(new a.l("pitchstart",p)).fire(new a.l("pitch",p)).fire(new a.l("pitchend",p)),U&&this.fire(new a.l("rollstart",p)).fire(new a.l("roll",p)).fire(new a.l("rollend",p)),this.fire(new a.l("moveend",p))}calculateCameraOptionsFromTo(l,p,C,E=0){const B=a.a1.fromLngLat(l,p),U=a.a1.fromLngLat(C,E),G=U.x-B.x,Z=U.y-B.y,ae=U.z-B.z,ce=Math.hypot(G,Z,ae);if(ce===0)throw new Error("Can't calculate camera options with same From and To");const me=Math.hypot(G,Z),ge=a.ak(this.transform.cameraToCenterDistance/ce/this.transform.tileSize),Pe=180*Math.atan2(G,-Z)/Math.PI;let Ne=180*Math.acos(me/ce)/Math.PI;return Ne=ae<0?90-Ne:90+Ne,{center:U.toLngLat(),elevation:E,zoom:ge,pitch:Ne,bearing:Pe}}calculateCameraOptionsFromCameraLngLatAltRotation(l,p,C,E,B){const U=this.transform.calculateCenterFromCameraLngLatAlt(l,p,C,E);return{center:U.center,elevation:U.elevation,zoom:U.zoom,bearing:C,pitch:E,roll:B}}easeTo(l,p){this._stop(!1,l.easeId),((l=a.e({offset:[0,0],duration:500,easing:a.co},l)).animate===!1||!l.essential&&M.prefersReducedMotion)&&(l.duration=0);const C=this._getTransformForUpdate(),E=this.getBearing(),B=C.pitch,U=C.roll,G="bearing"in l?this._normalizeBearing(l.bearing,E):E,Z="pitch"in l?+l.pitch:B,ae="roll"in l?this._normalizeBearing(l.roll,U):U,ce="padding"in l?l.padding:C.padding,me=a.P.convert(l.offset);let ge,Pe;l.around&&(ge=a.S.convert(l.around),Pe=C.locationToScreenPoint(ge));const Ne={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},Ze=this.cameraHelper.handleEaseTo(C,{bearing:G,pitch:Z,roll:ae,padding:ce,around:ge,aroundPoint:Pe,offsetAsPoint:me,offset:l.offset,zoom:l.zoom,center:l.center});return this._rotating=this._rotating||E!==G,this._pitching=this._pitching||Z!==B,this._rolling=this._rolling||ae!==U,this._padding=!C.isPaddingEqual(ce),this._zooming=this._zooming||Ze.isZooming,this._easeId=l.easeId,this._prepareEase(p,l.noMoveStart,Ne),this.terrain&&this._prepareElevation(Ze.elevationCenter),this._ease((Xe=>{Ze.easeFunc(Xe),this.terrain&&!l.freezeElevation&&this._updateElevation(Xe),this._applyUpdatedTransform(C),this._fireMoveEvents(p)}),(Xe=>{this.terrain&&l.freezeElevation&&this._finalizeElevation(),this._afterEase(p,Xe)}),l),this}_prepareEase(l,p,C={}){this._moving=!0,p||C.moving||this.fire(new a.l("movestart",l)),this._zooming&&!C.zooming&&this.fire(new a.l("zoomstart",l)),this._rotating&&!C.rotating&&this.fire(new a.l("rotatestart",l)),this._pitching&&!C.pitching&&this.fire(new a.l("pitchstart",l)),this._rolling&&!C.rolling&&this.fire(new a.l("rollstart",l))}_prepareElevation(l){this._elevationCenter=l,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(l,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(l){this._elevationStart!==void 0&&this._elevationCenter!==void 0||this._prepareElevation(this.transform.center),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const p=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(l<1&&p!==this._elevationTarget){const C=this._elevationTarget-this._elevationStart;this._elevationStart+=l*(C-(p-(C*l+this._elevationStart))/(1-l)),this._elevationTarget=p}this.transform.setElevation(a.C.number(this._elevationStart,this._elevationTarget,l))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(l){if(!this.terrain&&l.elevation>=0&&l.pitch<=90)return{};const p=l.getCameraLngLat(),C=l.getCameraAltitude(),E=this.terrain?this.terrain.getElevationForLngLatZoom(p,l.zoom):0;if(C<E){const B=this.calculateCameraOptionsFromTo(p,E,l.center,l.elevation);return{pitch:B.pitch,zoom:B.zoom}}return{}}_applyUpdatedTransform(l){const p=[];if(p.push((E=>this._elevateCameraIfInsideTerrain(E))),this.transformCameraUpdate&&p.push((E=>this.transformCameraUpdate(E))),!p.length)return;const C=l.clone();for(const E of p){const B=C.clone(),{center:U,zoom:G,roll:Z,pitch:ae,bearing:ce,elevation:me}=E(B);U&&B.setCenter(U),me!==void 0&&B.setElevation(me),G!==void 0&&B.setZoom(G),Z!==void 0&&B.setRoll(Z),ae!==void 0&&B.setPitch(ae),ce!==void 0&&B.setBearing(ce),C.apply(B)}this.transform.apply(C)}_fireMoveEvents(l){this.fire(new a.l("move",l)),this._zooming&&this.fire(new a.l("zoom",l)),this._rotating&&this.fire(new a.l("rotate",l)),this._pitching&&this.fire(new a.l("pitch",l)),this._rolling&&this.fire(new a.l("roll",l))}_afterEase(l,p){if(this._easeId&&p&&this._easeId===p)return;delete this._easeId;const C=this._zooming,E=this._rotating,B=this._pitching,U=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,C&&this.fire(new a.l("zoomend",l)),E&&this.fire(new a.l("rotateend",l)),B&&this.fire(new a.l("pitchend",l)),U&&this.fire(new a.l("rollend",l)),this.fire(new a.l("moveend",l))}flyTo(l,p){if(!l.essential&&M.prefersReducedMotion){const Gt=a.Q(l,["center","zoom","bearing","pitch","roll","elevation"]);return this.jumpTo(Gt,p)}this.stop(),l=a.e({offset:[0,0],speed:1.2,curve:1.42,easing:a.co},l);const C=this._getTransformForUpdate(),E=C.bearing,B=C.pitch,U=C.roll,G=C.padding,Z="bearing"in l?this._normalizeBearing(l.bearing,E):E,ae="pitch"in l?+l.pitch:B,ce="roll"in l?this._normalizeBearing(l.roll,U):U,me="padding"in l?l.padding:C.padding,ge=a.P.convert(l.offset);let Pe=C.centerPoint.add(ge);const Ne=C.screenPointToLocation(Pe),Ze=this.cameraHelper.handleFlyTo(C,{bearing:Z,pitch:ae,roll:ce,padding:me,locationAtOffset:Ne,offsetAsPoint:ge,center:l.center,minZoom:l.minZoom,zoom:l.zoom});let Xe=l.curve;const et=Math.max(C.width,C.height),ot=et/Ze.scaleOfZoom,ht=Ze.pixelPathLength;typeof Ze.scaleOfMinZoom=="number"&&(Xe=Math.sqrt(et/Ze.scaleOfMinZoom/ht*2));const ut=Xe*Xe;function gt(Gt){const Bn=(ot*ot-et*et+(Gt?-1:1)*ut*ut*ht*ht)/(2*(Gt?ot:et)*ut*ht);return Math.log(Math.sqrt(Bn*Bn+1)-Bn)}function xt(Gt){return(Math.exp(Gt)-Math.exp(-Gt))/2}function ct(Gt){return(Math.exp(Gt)+Math.exp(-Gt))/2}const wt=gt(!1);let Wt=function(Gt){return ct(wt)/ct(wt+Xe*Gt)},Lt=function(Gt){return et*((ct(wt)*(xt(Bn=wt+Xe*Gt)/ct(Bn))-xt(wt))/ut)/ht;var Bn},Nt=(gt(!0)-wt)/Xe;if(Math.abs(ht)<2e-6||!isFinite(Nt)){if(Math.abs(et-ot)<1e-6)return this.easeTo(l,p);const Gt=ot<et?-1:1;Nt=Math.abs(Math.log(ot/et))/Xe,Lt=()=>0,Wt=Bn=>Math.exp(Gt*Xe*Bn)}return l.duration="duration"in l?+l.duration:1e3*Nt/("screenSpeed"in l?+l.screenSpeed/Xe:+l.speed),l.maxDuration&&l.duration>l.maxDuration&&(l.duration=0),this._zooming=!0,this._rotating=E!==Z,this._pitching=ae!==B,this._rolling=ce!==U,this._padding=!C.isPaddingEqual(me),this._prepareEase(p,!1),this.terrain&&this._prepareElevation(Ze.targetCenter),this._ease((Gt=>{const Bn=Gt*Nt,kn=1/Wt(Bn),cn=Lt(Bn);this._rotating&&C.setBearing(a.C.number(E,Z,Gt)),this._pitching&&C.setPitch(a.C.number(B,ae,Gt)),this._rolling&&C.setRoll(a.C.number(U,ce,Gt)),this._padding&&(C.interpolatePadding(G,me,Gt),Pe=C.centerPoint.add(ge)),Ze.easeFunc(Gt,kn,cn,Pe),this.terrain&&!l.freezeElevation&&this._updateElevation(Gt),this._applyUpdatedTransform(C),this._fireMoveEvents(p)}),(()=>{this.terrain&&l.freezeElevation&&this._finalizeElevation(),this._afterEase(p)}),l),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(l,p){var C;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const E=this._onEaseEnd;delete this._onEaseEnd,E.call(this,p)}return l||(C=this.handlers)===null||C===void 0||C.stop(!1),this}_ease(l,p,C){C.animate===!1||C.duration===0?(l(1),p()):(this._easeStart=M.now(),this._easeOptions=C,this._onEaseFrame=l,this._onEaseEnd=p,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(l,p){l=a.aO(l,-180,180);const C=Math.abs(l-p);return Math.abs(l-360-p)<C&&(l-=360),Math.abs(l+360-p)<C&&(l+=360),l}queryTerrainElevation(l){return this.terrain?this.terrain.getElevationForLngLatZoom(a.S.convert(l),this.transform.tileZoom):null}}const ti={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Ci{constructor(l=ti){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=p=>{!p||p.sourceDataType!=="metadata"&&p.sourceDataType!=="visibility"&&p.dataType!=="style"&&p.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=l}getDefaultPosition(){return"bottom-right"}onAdd(l){return this._map=l,this._compact=this.options.compact,this._container=x.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=x.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=x.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){x.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(l,p){const C=this._map._getUIString(`AttributionControl.${p}`);l.title=C,l.setAttribute("aria-label",C)}_updateAttributions(){if(!this._map.style)return;let l=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?l=l.concat(this.options.customAttribution.map((E=>typeof E!="string"?"":E))):typeof this.options.customAttribution=="string"&&l.push(this.options.customAttribution)),this._map.style.stylesheet){const E=this._map.style.stylesheet;this.styleOwner=E.owner,this.styleId=E.id}const p=this._map.style.sourceCaches;for(const E in p){const B=p[E];if(B.used||B.usedForTerrain){const U=B.getSource();U.attribution&&l.indexOf(U.attribution)<0&&l.push(U.attribution)}}l=l.filter((E=>String(E).trim())),l.sort(((E,B)=>E.length-B.length)),l=l.filter(((E,B)=>{for(let U=B+1;U<l.length;U++)if(l[U].indexOf(E)>=0)return!1;return!0}));const C=l.join(" | ");C!==this._attribHTML&&(this._attribHTML=C,l.length?(this._innerContainer.innerHTML=x.sanitize(C),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class td{constructor(l={}){this._updateCompact=()=>{const p=this._container.children;if(p.length){const C=p[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&C.classList.add("maplibregl-compact"):C.classList.remove("maplibregl-compact")}},this.options=l}getDefaultPosition(){return"bottom-left"}onAdd(l){this._map=l,this._compact=this.options&&this.options.compact,this._container=x.create("div","maplibregl-ctrl");const p=x.create("a","maplibregl-ctrl-logo");return p.target="_blank",p.rel="noopener nofollow",p.href="https://maplibre.org/",p.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),p.setAttribute("rel","noopener nofollow"),this._container.appendChild(p),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){x.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class ul{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(l){const p=++this._id;return this._queue.push({callback:l,id:p,cancelled:!1}),p}remove(l){const p=this._currentlyRunning,C=p?this._queue.concat(p):this._queue;for(const E of C)if(E.id===l)return void(E.cancelled=!0)}run(l=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const p=this._currentlyRunning=this._queue;this._queue=[];for(const C of p)if(!C.cancelled&&(C.callback(l),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var nd=a.aJ([{name:"a_pos3d",type:"Int16",components:3}]);class us extends a.E{constructor(l){super(),this._lastTilesetChange=M.now(),this.sourceCache=l,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=l._source.tileSize*2**this.deltaZoom,l.usedForTerrain=!0,l.tileSize=this.tileSize}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(l,p){this.sourceCache.update(l,p),this._renderableTilesKeys=[];const C={};for(const E of Qn(l,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:p,calculateTileZoom:this.sourceCache._source.calculateTileZoom}))C[E.key]=!0,this._renderableTilesKeys.push(E.key),this._tiles[E.key]||(E.terrainRttPosMatrix32f=new Float64Array(16),a.bZ(E.terrainRttPosMatrix32f,0,a.$,a.$,0,0,1),this._tiles[E.key]=new ne(E,this.tileSize),this._lastTilesetChange=M.now());for(const E in this._tiles)C[E]||delete this._tiles[E]}freeRtt(l){for(const p in this._tiles){const C=this._tiles[p];(!l||C.tileID.equals(l)||C.tileID.isChildOf(l)||l.isChildOf(C.tileID))&&(C.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map((l=>this.getTileByID(l)))}getTileByID(l){return this._tiles[l]}getTerrainCoords(l,p){return p?this._getTerrainCoordsForTileRanges(l,p):this._getTerrainCoordsForRegularTile(l)}_getTerrainCoordsForRegularTile(l){const p={};for(const C of this._renderableTilesKeys){const E=this._tiles[C].tileID,B=l.clone(),U=a.ba();if(E.canonical.equals(l.canonical))a.bZ(U,0,a.$,a.$,0,0,1);else if(E.canonical.isChildOf(l.canonical)){const G=E.canonical.z-l.canonical.z,Z=E.canonical.x-(E.canonical.x>>G<<G),ae=E.canonical.y-(E.canonical.y>>G<<G),ce=a.$>>G;a.bZ(U,0,ce,ce,0,0,1),a.M(U,U,[-Z*ce,-ae*ce,0])}else{if(!l.canonical.isChildOf(E.canonical))continue;{const G=l.canonical.z-E.canonical.z,Z=l.canonical.x-(l.canonical.x>>G<<G),ae=l.canonical.y-(l.canonical.y>>G<<G),ce=a.$>>G;a.bZ(U,0,a.$,a.$,0,0,1),a.M(U,U,[Z*ce,ae*ce,0]),a.N(U,U,[1/2**G,1/2**G,0])}}B.terrainRttPosMatrix32f=new Float32Array(U),p[C]=B}return p}_getTerrainCoordsForTileRanges(l,p){const C={};for(const E of this._renderableTilesKeys){const B=this._tiles[E].tileID;if(!this._isWithinTileRanges(B,p))continue;const U=l.clone(),G=a.ba();if(B.canonical.z===l.canonical.z){const Z=l.canonical.x-B.canonical.x,ae=l.canonical.y-B.canonical.y;a.bZ(G,0,a.$,a.$,0,0,1),a.M(G,G,[Z*a.$,ae*a.$,0])}else if(B.canonical.z>l.canonical.z){const Z=B.canonical.z-l.canonical.z,ae=B.canonical.x-(B.canonical.x>>Z<<Z),ce=B.canonical.y-(B.canonical.y>>Z<<Z),me=l.canonical.x-(B.canonical.x>>Z),ge=l.canonical.y-(B.canonical.y>>Z),Pe=a.$>>Z;a.bZ(G,0,Pe,Pe,0,0,1),a.M(G,G,[-ae*Pe+me*a.$,-ce*Pe+ge*a.$,0])}else{const Z=l.canonical.z-B.canonical.z,ae=l.canonical.x-(l.canonical.x>>Z<<Z),ce=l.canonical.y-(l.canonical.y>>Z<<Z),me=(l.canonical.x>>Z)-B.canonical.x,ge=(l.canonical.y>>Z)-B.canonical.y,Pe=a.$<<Z;a.bZ(G,0,Pe,Pe,0,0,1),a.M(G,G,[ae*a.$+me*Pe,ce*a.$+ge*Pe,0])}U.terrainRttPosMatrix32f=new Float32Array(G),C[E]=U}return C}getSourceTile(l,p){const C=this.sourceCache._source;let E=l.overscaledZ-this.deltaZoom;if(E>C.maxzoom&&(E=C.maxzoom),E<C.minzoom)return null;this._sourceTileCache[l.key]||(this._sourceTileCache[l.key]=l.scaledTo(E).key);let B=this.sourceCache.getTileByID(this._sourceTileCache[l.key]);if((!B||!B.dem)&&p)for(;E>=C.minzoom&&(!B||!B.dem);)B=this.sourceCache.getTileByID(l.scaledTo(E--).key);return B}anyTilesAfterTime(l=Date.now()){return this._lastTilesetChange>=l}_isWithinTileRanges(l,p){return p[l.canonical.z]&&l.canonical.x>=p[l.canonical.z].minTileX&&l.canonical.x<=p[l.canonical.z].maxTileX&&l.canonical.y>=p[l.canonical.z].minTileY&&l.canonical.y<=p[l.canonical.z].maxTileY}}class fc{constructor(l,p,C){this._meshCache={},this.painter=l,this.sourceCache=new us(p),this.options=C,this.exaggeration=typeof C.exaggeration=="number"?C.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(l,p,C,E=a.$){var B;if(!(p>=0&&p<E&&C>=0&&C<E))return 0;const U=this.getTerrainData(l),G=(B=U.tile)===null||B===void 0?void 0:B.dem;if(!G)return 0;const Z=a.cs([],[p/E*a.$,C/E*a.$],U.u_terrain_matrix),ae=[Z[0]*G.dim,Z[1]*G.dim],ce=Math.floor(ae[0]),me=Math.floor(ae[1]),ge=ae[0]-ce,Pe=ae[1]-me;return G.get(ce,me)*(1-ge)*(1-Pe)+G.get(ce+1,me)*ge*(1-Pe)+G.get(ce,me+1)*(1-ge)*Pe+G.get(ce+1,me+1)*ge*Pe}getElevationForLngLatZoom(l,p){if(!a.ct(p,l.wrap()))return 0;const{tileID:C,mercatorX:E,mercatorY:B}=this._getOverscaledTileIDFromLngLatZoom(l,p);return this.getElevation(C,E%a.$,B%a.$,a.$)}getElevation(l,p,C,E=a.$){return this.getDEMElevation(l,p,C,E)*this.exaggeration}getTerrainData(l){if(!this._emptyDemTexture){const E=this.painter.context,B=new a.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new a.T(E,B,E.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new a.T(E,new a.R({width:1,height:1}),E.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(E.gl.NEAREST,E.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=a.ag([])}const p=this.sourceCache.getSourceTile(l,!0);if(p&&p.dem&&(!p.demTexture||p.needsTerrainPrepare)){const E=this.painter.context;p.demTexture=this.painter.getTileTexture(p.dem.stride),p.demTexture?p.demTexture.update(p.dem.getPixels(),{premultiply:!1}):p.demTexture=new a.T(E,p.dem.getPixels(),E.gl.RGBA,{premultiply:!1}),p.demTexture.bind(E.gl.NEAREST,E.gl.CLAMP_TO_EDGE),p.needsTerrainPrepare=!1}const C=p&&p+p.tileID.key+l.key;if(C&&!this._demMatrixCache[C]){const E=this.sourceCache.sourceCache._source.maxzoom;let B=l.canonical.z-p.tileID.canonical.z;l.overscaledZ>l.canonical.z&&(l.canonical.z>=E?B=l.canonical.z-E:a.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const U=l.canonical.x-(l.canonical.x>>B<<B),G=l.canonical.y-(l.canonical.y>>B<<B),Z=a.cu(new Float64Array(16),[1/(a.$<<B),1/(a.$<<B),0]);a.M(Z,Z,[U*a.$,G*a.$,0]),this._demMatrixCache[l.key]={matrix:Z,coord:l}}return{u_depth:2,u_terrain:3,u_terrain_dim:p&&p.dem&&p.dem.dim||1,u_terrain_matrix:C?this._demMatrixCache[l.key].matrix:this._emptyDemMatrix,u_terrain_unpack:p&&p.dem&&p.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(p&&p.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:p}}getFramebuffer(l){const p=this.painter,C=p.width/devicePixelRatio,E=p.height/devicePixelRatio;return!this._fbo||this._fbo.width===C&&this._fbo.height===E||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new a.T(p.context,{width:C,height:E,data:null},p.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(p.context.gl.NEAREST,p.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new a.T(p.context,{width:C,height:E,data:null},p.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(p.context.gl.NEAREST,p.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=p.context.createFramebuffer(C,E,!0,!1),this._fbo.depthAttachment.set(p.context.createRenderbuffer(p.context.gl.DEPTH_COMPONENT16,C,E))),this._fbo.colorAttachment.set(l==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const l=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const p=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let B=0,U=0;B<this._coordsTextureSize;B++)for(let G=0;G<this._coordsTextureSize;G++,U+=4)p[U+0]=255&G,p[U+1]=255&B,p[U+2]=G>>8<<4|B>>8,p[U+3]=0;const C=new a.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(p.buffer)),E=new a.T(l,C,l.gl.RGBA,{premultiply:!1});return E.bind(l.gl.NEAREST,l.gl.CLAMP_TO_EDGE),this._coordsTexture=E,E}pointCoordinate(l){this.painter.maybeDrawDepthAndCoords(!0);const p=new Uint8Array(4),C=this.painter.context,E=C.gl,B=Math.round(l.x*this.painter.pixelRatio/devicePixelRatio),U=Math.round(l.y*this.painter.pixelRatio/devicePixelRatio),G=Math.round(this.painter.height/devicePixelRatio);C.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),E.readPixels(B,G-U-1,1,1,E.RGBA,E.UNSIGNED_BYTE,p),C.bindFramebuffer.set(null);const Z=p[0]+(p[2]>>4<<8),ae=p[1]+((15&p[2])<<8),ce=this.coordsIndex[255-p[3]],me=ce&&this.sourceCache.getTileByID(ce);if(!me)return null;const ge=this._coordsTextureSize,Pe=(1<<me.tileID.canonical.z)*ge;return new a.a1((me.tileID.canonical.x*ge+Z)/Pe+me.tileID.wrap,(me.tileID.canonical.y*ge+ae)/Pe,this.getElevation(me.tileID,Z,ae,ge))}depthAtPoint(l){const p=new Uint8Array(4),C=this.painter.context,E=C.gl;return C.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),E.readPixels(l.x,this.painter.height/devicePixelRatio-l.y-1,1,1,E.RGBA,E.UNSIGNED_BYTE,p),C.bindFramebuffer.set(null),(p[0]/16777216+p[1]/65536+p[2]/256+p[3])/256}getTerrainMesh(l){var p;const C=((p=this.painter.style.projection)===null||p===void 0?void 0:p.transitionState)>0,E=C&&l.canonical.y===0,B=C&&l.canonical.y===(1<<l.canonical.z)-1,U=`m_${E?"n":""}_${B?"s":""}`;if(this._meshCache[U])return this._meshCache[U];const G=this.painter.context,Z=new a.cv,ae=new a.aN,ce=this.meshSize,me=a.$/ce,ge=ce*ce;for(let ct=0;ct<=ce;ct++)for(let wt=0;wt<=ce;wt++)Z.emplaceBack(wt*me,ct*me,0);for(let ct=0;ct<ge;ct+=ce+1)for(let wt=0;wt<ce;wt++)ae.emplaceBack(wt+ct,ce+wt+ct+1,ce+wt+ct+2),ae.emplaceBack(wt+ct,ce+wt+ct+2,wt+ct+1);const Pe=Z.length,Ne=Pe+(ce+1),Ze=(ce+1)*ce,Xe=E?a.bh:0,et=E?0:1,ot=B?a.bi:a.$,ht=B?0:1;for(let ct=0;ct<=ce;ct++)Z.emplaceBack(ct*me,Xe,et);for(let ct=0;ct<=ce;ct++)Z.emplaceBack(ct*me,ot,ht);for(let ct=0;ct<ce;ct++)ae.emplaceBack(Ze+ct,Ne+ct,Ne+ct+1),ae.emplaceBack(Ze+ct,Ne+ct+1,Ze+ct+1),ae.emplaceBack(0+ct,Pe+ct+1,Pe+ct),ae.emplaceBack(0+ct,0+ct+1,Pe+ct+1);const ut=Z.length,gt=ut+2*(ce+1);for(const ct of[0,1])for(let wt=0;wt<=ce;wt++)for(const Wt of[0,1])Z.emplaceBack(ct*a.$,wt*me,Wt);for(let ct=0;ct<2*ce;ct+=2)ae.emplaceBack(ut+ct,ut+ct+1,ut+ct+3),ae.emplaceBack(ut+ct,ut+ct+3,ut+ct+2),ae.emplaceBack(gt+ct,gt+ct+3,gt+ct+1),ae.emplaceBack(gt+ct,gt+ct+2,gt+ct+3);const xt=new au(G.createVertexBuffer(Z,nd.members),G.createIndexBuffer(ae),a.aM.simpleSegment(0,0,Z.length,ae.length));return this._meshCache[U]=xt,xt}getMeshFrameDelta(l){return 2*Math.PI*a.bu/Math.pow(2,Math.max(l,0))/5}getMinTileElevationForLngLatZoom(l,p){var C;const{tileID:E}=this._getOverscaledTileIDFromLngLatZoom(l,p);return(C=this.getMinMaxElevation(E).minElevation)!==null&&C!==void 0?C:0}getMinMaxElevation(l){const p=this.getTerrainData(l).tile,C={minElevation:null,maxElevation:null};return p&&p.dem&&(C.minElevation=p.dem.min*this.exaggeration,C.maxElevation=p.dem.max*this.exaggeration),C}_getOverscaledTileIDFromLngLatZoom(l,p){const C=a.a1.fromLngLat(l.wrap()),E=(1<<p)*a.$,B=C.x*E,U=C.y*E,G=Math.floor(B/a.$),Z=Math.floor(U/a.$);return{tileID:new a.Z(p,0,p,G,Z),mercatorX:B,mercatorY:U}}}class cl{constructor(l,p,C){this._context=l,this._size=p,this._tileSize=C,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const l of this._objects)l.texture.destroy(),l.fbo.destroy()}_createObject(l){const p=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),C=new a.T(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return C.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),p.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),p.colorAttachment.set(C.texture),{id:l,fbo:p,texture:C,stamp:-1,inUse:!1}}getObjectForId(l){return this._objects[l]}useObject(l){l.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter((p=>l.id!==p)),this._recentlyUsed.push(l.id)}stampObject(l){l.stamp=++this._stamp}getOrCreateFreeObject(){for(const p of this._recentlyUsed)if(!this._objects[p].inUse)return this._objects[p];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const l=this._createObject(this._objects.length);return this._objects.push(l),l}freeObject(l){l.inUse=!1}freeAllObjects(){for(const l of this._objects)this.freeObject(l)}isFull(){return!(this._objects.length<this._size)&&this._objects.some((l=>!l.inUse))===!1}}const AA={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0,"color-relief":!0};class E1{constructor(l,p){this.painter=l,this.terrain=p,this.pool=new cl(l.context,30,p.sourceCache.tileSize*p.qualityFactor)}destruct(){this.pool.destruct()}getTexture(l){return this.pool.getObjectForId(l.rtt[this._stacks.length-1].id).texture}prepareForRender(l,p){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=l._order.filter((C=>!l._layers[C].isHidden(p))),this._coordsAscending={};for(const C in l.sourceCaches){this._coordsAscending[C]={};const E=l.sourceCaches[C].getVisibleCoordinates(),B=l.sourceCaches[C].getSource(),U=B instanceof Pn?B.terrainTileRanges:null;for(const G of E){const Z=this.terrain.sourceCache.getTerrainCoords(G,U);for(const ae in Z)this._coordsAscending[C][ae]||(this._coordsAscending[C][ae]=[]),this._coordsAscending[C][ae].push(Z[ae])}}this._coordsAscendingStr={};for(const C of l._order){const E=l._layers[C],B=E.source;if(AA[E.type]&&!this._coordsAscendingStr[B]){this._coordsAscendingStr[B]={};for(const U in this._coordsAscending[B])this._coordsAscendingStr[B][U]=this._coordsAscending[B][U].map((G=>G.key)).sort().join()}}for(const C of this._renderableTiles)for(const E in this._coordsAscendingStr){const B=this._coordsAscendingStr[E][C.tileID.key];B&&B!==C.rttCoords[E]&&(C.rtt=[])}}renderLayer(l,p){if(l.isHidden(this.painter.transform.zoom))return!1;const C=Object.assign(Object.assign({},p),{isRenderingToTexture:!0}),E=l.type,B=this.painter,U=this._renderableLayerIds[this._renderableLayerIds.length-1]===l.id;if(AA[E]&&(this._prevType&&AA[this._prevType]||this._stacks.push([]),this._prevType=E,this._stacks[this._stacks.length-1].push(l.id),!U))return!0;if(AA[this._prevType]||AA[E]&&U){this._prevType=E;const G=this._stacks.length-1,Z=this._stacks[G]||[];for(const ae of this._renderableTiles){if(this.pool.isFull()&&(br(this.painter,this.terrain,this._rttTiles,C),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(ae),ae.rtt[G]){const me=this.pool.getObjectForId(ae.rtt[G].id);if(me.stamp===ae.rtt[G].stamp){this.pool.useObject(me);continue}}const ce=this.pool.getOrCreateFreeObject();this.pool.useObject(ce),this.pool.stampObject(ce),ae.rtt[G]={id:ce.id,stamp:ce.stamp},B.context.bindFramebuffer.set(ce.fbo.framebuffer),B.context.clear({color:a.bf.transparent,stencil:0}),B.currentStencilSource=void 0;for(let me=0;me<Z.length;me++){const ge=B.style._layers[Z[me]],Pe=ge.source?this._coordsAscending[ge.source][ae.tileID.key]:[ae.tileID];B.context.viewport.set([0,0,ce.fbo.width,ce.fbo.height]),B._renderTileClippingMasks(ge,Pe,!0),B.renderLayer(B,B.style.sourceCaches[ge.source],ge,Pe,C),ge.source&&(ae.rttCoords[ge.source]=this._coordsAscendingStr[ge.source][ae.tileID.key])}}return br(this.painter,this.terrain,this._rttTiles,C),this._rttTiles=[],this.pool.freeAllObjects(),AA[E]}return!1}}const Fc={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},Pu=c,bs={hash:!1,interactive:!0,bearingSnap:7,attributionControl:ti,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:a.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0},cs={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class po{constructor(l,p,C=!1){this.mousedown=B=>{this.startMove(B,x.mousePos(this.element,B)),x.addEventListener(window,"mousemove",this.mousemove),x.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=B=>{this.move(B,x.mousePos(this.element,B))},this.mouseup=B=>{this._rotatePitchHandler.dragEnd(B),this.offTemp()},this.touchstart=B=>{B.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=x.touchPos(this.element,B.targetTouches)[0],this.startMove(B,this._startPos),x.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),x.addEventListener(window,"touchend",this.touchend))},this.touchmove=B=>{B.targetTouches.length!==1?this.reset():(this._lastPos=x.touchPos(this.element,B.targetTouches)[0],this.move(B,this._lastPos))},this.touchend=B=>{B.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHandler.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=p;const E=new zf;this._rotatePitchHandler=new Gl({clickTolerance:3,move:(B,U)=>{const G=p.getBoundingClientRect(),Z=new a.P((G.bottom-G.top)/2,(G.right-G.left)/2);return{bearingDelta:a.cn(new a.P(B.x,U.y),U,Z),pitchDelta:C?-.5*(U.y-B.y):void 0}},moveStateManager:E,enable:!0,assignEvents:()=>{}}),this.map=l,x.addEventListener(p,"mousedown",this.mousedown),x.addEventListener(p,"touchstart",this.touchstart,{passive:!1}),x.addEventListener(p,"touchcancel",this.reset)}startMove(l,p){this._rotatePitchHandler.dragStart(l,p),x.disableDrag()}move(l,p){const C=this.map,{bearingDelta:E,pitchDelta:B}=this._rotatePitchHandler.dragMove(l,p)||{};E&&C.setBearing(C.getBearing()+E),B&&C.setPitch(C.getPitch()+B)}off(){const l=this.element;x.removeEventListener(l,"mousedown",this.mousedown),x.removeEventListener(l,"touchstart",this.touchstart,{passive:!1}),x.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),x.removeEventListener(window,"touchend",this.touchend),x.removeEventListener(l,"touchcancel",this.reset),this.offTemp()}offTemp(){x.enableDrag(),x.removeEventListener(window,"mousemove",this.mousemove),x.removeEventListener(window,"mouseup",this.mouseup),x.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),x.removeEventListener(window,"touchend",this.touchend)}}let sr;function xo(O,l,p,C=!1){if(C||!p.getCoveringTilesDetailsProvider().allowWorldCopies())return O?.wrap();const E=new a.S(O.lng,O.lat);if(O=new a.S(O.lng,O.lat),l){const B=new a.S(O.lng-360,O.lat),U=new a.S(O.lng+360,O.lat),G=p.locationToScreenPoint(O).distSqr(l);p.locationToScreenPoint(B).distSqr(l)<G?O=B:p.locationToScreenPoint(U).distSqr(l)<G&&(O=U)}for(;Math.abs(O.lng-p.center.lng)>180;){const B=p.locationToScreenPoint(O);if(B.x>=0&&B.y>=0&&B.x<=p.width&&B.y<=p.height)break;O.lng>p.center.lng?O.lng-=360:O.lng+=360}return O.lng!==E.lng&&p.isPointOnMapSurface(p.locationToScreenPoint(O))?O:E}const As={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function id(O,l,p){const C=O.classList;for(const E in As)C.remove(`maplibregl-${p}-anchor-${E}`);C.add(`maplibregl-${p}-anchor-${l}`)}class IA extends a.E{constructor(l){if(super(),this._onKeyPress=p=>{const C=p.code,E=p.charCode||p.keyCode;C!=="Space"&&C!=="Enter"&&E!==32&&E!==13||this.togglePopup()},this._onMapClick=p=>{const C=p.originalEvent.target,E=this._element;this._popup&&(C===E||E.contains(C))&&this.togglePopup()},this._update=p=>{if(!this._map)return;const C=this._map.loaded()&&!this._map.isMoving();(p?.type==="terrain"||p?.type==="render"&&!C)&&this._map.once("render",this._update),this._lngLat=xo(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let E="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?E=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(E=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let B="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?B="rotateX(0deg)":this._pitchAlignment==="map"&&(B=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||p&&p.type!=="moveend"||(this._pos=this._pos.round()),x.setTransform(this._element,`${As[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${B} ${E}`),M.frameAsync(new AbortController).then((()=>{this._updateOpacity(p&&p.type==="moveend")})).catch((()=>{}))},this._onMove=p=>{if(!this._isDragging){const C=this._clickTolerance||this._map._clickTolerance;this._isDragging=p.point.dist(this._pointerdownPos)>=C}this._isDragging&&(this._pos=p.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.l("dragstart"))),this.fire(new a.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new a.l("dragend")),this._state="inactive"},this._addDragHandler=p=>{this._element.contains(p.originalEvent.target)&&(p.preventDefault(),this._positionDelta=p.point.sub(this._pos).add(this._offset),this._pointerdownPos=p.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=l&&l.anchor||"center",this._color=l&&l.color||"#3FB1CE",this._scale=l&&l.scale||1,this._draggable=l&&l.draggable||!1,this._clickTolerance=l&&l.clickTolerance||0,this._subpixelPositioning=l&&l.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=l&&l.rotation||0,this._rotationAlignment=l&&l.rotationAlignment||"auto",this._pitchAlignment=l&&l.pitchAlignment&&l.pitchAlignment!=="auto"?l.pitchAlignment:this._rotationAlignment,this.setOpacity(l?.opacity,l?.opacityWhenCovered),l&&l.element)this._element=l.element,this._offset=a.P.convert(l&&l.offset||[0,0]);else{this._defaultMarker=!0,this._element=x.create("div");const p=x.createNS("http://www.w3.org/2000/svg","svg"),C=41,E=27;p.setAttributeNS(null,"display","block"),p.setAttributeNS(null,"height",`${C}px`),p.setAttributeNS(null,"width",`${E}px`),p.setAttributeNS(null,"viewBox",`0 0 ${E} ${C}`);const B=x.createNS("http://www.w3.org/2000/svg","g");B.setAttributeNS(null,"stroke","none"),B.setAttributeNS(null,"stroke-width","1"),B.setAttributeNS(null,"fill","none"),B.setAttributeNS(null,"fill-rule","evenodd");const U=x.createNS("http://www.w3.org/2000/svg","g");U.setAttributeNS(null,"fill-rule","nonzero");const G=x.createNS("http://www.w3.org/2000/svg","g");G.setAttributeNS(null,"transform","translate(3.0, 29.0)"),G.setAttributeNS(null,"fill","#000000");const Z=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const et of Z){const ot=x.createNS("http://www.w3.org/2000/svg","ellipse");ot.setAttributeNS(null,"opacity","0.04"),ot.setAttributeNS(null,"cx","10.5"),ot.setAttributeNS(null,"cy","5.80029008"),ot.setAttributeNS(null,"rx",et.rx),ot.setAttributeNS(null,"ry",et.ry),G.appendChild(ot)}const ae=x.createNS("http://www.w3.org/2000/svg","g");ae.setAttributeNS(null,"fill",this._color);const ce=x.createNS("http://www.w3.org/2000/svg","path");ce.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),ae.appendChild(ce);const me=x.createNS("http://www.w3.org/2000/svg","g");me.setAttributeNS(null,"opacity","0.25"),me.setAttributeNS(null,"fill","#000000");const ge=x.createNS("http://www.w3.org/2000/svg","path");ge.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),me.appendChild(ge);const Pe=x.createNS("http://www.w3.org/2000/svg","g");Pe.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Pe.setAttributeNS(null,"fill","#FFFFFF");const Ne=x.createNS("http://www.w3.org/2000/svg","g");Ne.setAttributeNS(null,"transform","translate(8.0, 8.0)");const Ze=x.createNS("http://www.w3.org/2000/svg","circle");Ze.setAttributeNS(null,"fill","#000000"),Ze.setAttributeNS(null,"opacity","0.25"),Ze.setAttributeNS(null,"cx","5.5"),Ze.setAttributeNS(null,"cy","5.5"),Ze.setAttributeNS(null,"r","5.4999962");const Xe=x.createNS("http://www.w3.org/2000/svg","circle");Xe.setAttributeNS(null,"fill","#FFFFFF"),Xe.setAttributeNS(null,"cx","5.5"),Xe.setAttributeNS(null,"cy","5.5"),Xe.setAttributeNS(null,"r","5.4999962"),Ne.appendChild(Ze),Ne.appendChild(Xe),U.appendChild(G),U.appendChild(ae),U.appendChild(me),U.appendChild(Pe),U.appendChild(Ne),p.appendChild(U),p.setAttributeNS(null,"height",C*this._scale+"px"),p.setAttributeNS(null,"width",E*this._scale+"px"),this._element.appendChild(p),this._offset=a.P.convert(l&&l.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",(p=>{p.preventDefault()})),this._element.addEventListener("mousedown",(p=>{p.preventDefault()})),id(this._element,this._anchor,"marker"),l&&l.className)for(const p of l.className.split(" "))this._element.classList.add(p);this._popup=null}addTo(l){return this.remove(),this._map=l,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",l._getUIString("Marker.Title")),this._element.hasAttribute("role")||this._element.setAttribute("role","button"),l.getCanvasContainer().appendChild(this._element),l.on("move",this._update),l.on("moveend",this._update),l.on("terrain",this._update),l.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),x.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(l){return this._lngLat=a.S.convert(l),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(l){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),l){if(!("offset"in l.options)){const E=Math.abs(13.5)/Math.SQRT2;l.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[E,-1*(38.1-13.5+E)],"bottom-right":[-E,-1*(38.1-13.5+E)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=l,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(l){return this._subpixelPositioning=l,this}getPopup(){return this._popup}togglePopup(){const l=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:l?(l.isOpen()?l.remove():(l.setLngLat(this._lngLat),l.addTo(this._map)),this):this}_updateOpacity(l=!1){var p,C;const E=(p=this._map)===null||p===void 0?void 0:p.terrain,B=this._map.transform.isLocationOccluded(this._lngLat);if(!E||B){const Pe=B?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==Pe&&(this._element.style.opacity=Pe))}if(l)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout((()=>{this._opacityTimeout=null}),100)}const U=this._map,G=U.terrain.depthAtPoint(this._pos),Z=U.terrain.getElevationForLngLatZoom(this._lngLat,U.transform.tileZoom);if(U.transform.lngLatToCameraDepth(this._lngLat,Z)-G<.006)return void(this._element.style.opacity=this._opacity);const ae=-this._offset.y/U.transform.pixelsPerMeter,ce=Math.sin(U.getPitch()*Math.PI/180)*ae,me=U.terrain.depthAtPoint(new a.P(this._pos.x,this._pos.y-this._offset.y)),ge=U.transform.lngLatToCameraDepth(this._lngLat,Z+ce)-me>.006;!((C=this._popup)===null||C===void 0)&&C.isOpen()&&ge&&this._popup.remove(),this._element.style.opacity=ge?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(l){return this._offset=a.P.convert(l),this._update(),this}addClassName(l){this._element.classList.add(l)}removeClassName(l){this._element.classList.remove(l)}toggleClassName(l){return this._element.classList.toggle(l)}setDraggable(l){return this._draggable=!!l,this._map&&(l?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(l){return this._rotation=l||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(l){return this._rotationAlignment=l||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(l){return this._pitchAlignment=l&&l!=="auto"?l:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(l,p){return(this._opacity===void 0||l===void 0&&p===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),l!==void 0&&(this._opacity=l),p!==void 0&&(this._opacityWhenCovered=p),this._map&&this._updateOpacity(!0),this}}const fh={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let hA=0,zc=!1;const kA={maxWidth:100,unit:"metric"};function Vm(O,l,p){const C=p&&p.maxWidth||100,E=O._container.clientHeight/2,B=O._container.clientWidth/2,U=O.unproject([B-C/2,E]),G=O.unproject([B+C/2,E]),Z=Math.round(O.project(G).x-O.project(U).x),ae=Math.min(C,Z,O._container.clientWidth),ce=U.distanceTo(G);if(p&&p.unit==="imperial"){const me=3.2808*ce;me>5280?zo(l,ae,me/5280,O._getUIString("ScaleControl.Miles")):zo(l,ae,me,O._getUIString("ScaleControl.Feet"))}else p&&p.unit==="nautical"?zo(l,ae,ce/1852,O._getUIString("ScaleControl.NauticalMiles")):ce>=1e3?zo(l,ae,ce/1e3,O._getUIString("ScaleControl.Kilometers")):zo(l,ae,ce,O._getUIString("ScaleControl.Meters"))}function zo(O,l,p,C){const E=(function(B){const U=Math.pow(10,`${Math.floor(B)}`.length-1);let G=B/U;return G=G>=10?10:G>=5?5:G>=3?3:G>=2?2:G>=1?1:(function(Z){const ae=Math.pow(10,Math.ceil(-Math.log(Z)/Math.LN10));return Math.round(Z*ae)/ae})(G),U*G})(p);O.style.width=l*(E/p)+"px",O.innerHTML=`${E}&nbsp;${C}`}const Gf={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},Wf=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Qf(O){if(O){if(typeof O=="number"){const l=Math.round(Math.abs(O)/Math.SQRT2);return{center:new a.P(0,0),top:new a.P(0,O),"top-left":new a.P(l,l),"top-right":new a.P(-l,l),bottom:new a.P(0,-O),"bottom-left":new a.P(l,-l),"bottom-right":new a.P(-l,-l),left:new a.P(O,0),right:new a.P(-O,0)}}if(O instanceof a.P||Array.isArray(O)){const l=a.P.convert(O);return{center:l,top:l,"top-left":l,"top-right":l,bottom:l,"bottom-left":l,"bottom-right":l,left:l,right:l}}return{center:a.P.convert(O.center||[0,0]),top:a.P.convert(O.top||[0,0]),"top-left":a.P.convert(O["top-left"]||[0,0]),"top-right":a.P.convert(O["top-right"]||[0,0]),bottom:a.P.convert(O.bottom||[0,0]),"bottom-left":a.P.convert(O["bottom-left"]||[0,0]),"bottom-right":a.P.convert(O["bottom-right"]||[0,0]),left:a.P.convert(O.left||[0,0]),right:a.P.convert(O.right||[0,0])}}return Qf(new a.P(0,0))}const Gd=c;s.AJAXError=a.cz,s.Event=a.l,s.Evented=a.E,s.LngLat=a.S,s.MercatorCoordinate=a.a1,s.Point=a.P,s.addProtocol=a.cA,s.config=a.a,s.removeProtocol=a.cB,s.AttributionControl=Ci,s.BoxZoomHandler=vl,s.CanvasSource=In,s.CooperativeGesturesHandler=Nf,s.DoubleClickZoomHandler=dc,s.DragPanHandler=dh,s.DragRotateHandler=hu,s.EdgeInsets=ko,s.FullscreenControl=class extends a.E{constructor(O={}){super(),this._onFullscreenChange=()=>{var l;let p=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((l=p?.shadowRoot)===null||l===void 0)&&l.fullscreenElement;)p=p.shadowRoot.fullscreenElement;p===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,O&&O.container&&(O.container instanceof HTMLElement?this._container=O.container:a.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(O){return this._map=O,this._container||(this._container=this._map.getContainer()),this._controlContainer=x.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){x.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const O=this._fullscreenButton=x.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);x.create("span","maplibregl-ctrl-icon",O).setAttribute("aria-hidden","true"),O.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const O=this._getTitle();this._fullscreenButton.setAttribute("aria-label",O),this._fullscreenButton.title=O}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new a.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new a.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},s.GeoJSONSource=Dn,s.GeolocateControl=class extends a.E{constructor(O){super(),this._onSuccess=l=>{if(this._map){if(this._isOutOfMapMaxBounds(l))return this._setErrorState(),this.fire(new a.l("outofmaxbounds",l)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=l,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(l),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(l),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new a.l("geolocate",l)),this._finish()}},this._updateCamera=l=>{const p=new a.S(l.coords.longitude,l.coords.latitude),C=l.coords.accuracy,E=this._map.getBearing(),B=a.e({bearing:E},this.options.fitBoundsOptions),U=it.fromLngLat(p,C);this._map.fitBounds(U,B,{geolocateSource:!0})},this._updateMarker=l=>{if(l){const p=new a.S(l.coords.longitude,l.coords.latitude);this._accuracyCircleMarker.setLngLat(p).addTo(this._map),this._userLocationDotMarker.setLngLat(p).addTo(this._map),this._accuracy=l.coords.accuracy,this._updateCircleRadiusIfNeeded()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onUpdate=()=>{this._updateCircleRadiusIfNeeded()},this._onError=l=>{if(this._map){if(l.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const p=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=p,this._geolocateButton.setAttribute("aria-label",p),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(l.code===3&&zc)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new a.l("error",l)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",(l=>l.preventDefault())),this._geolocateButton=x.create("button","maplibregl-ctrl-geolocate",this._container),x.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=l=>{if(this._map){if(l===!1){a.w("Geolocation support is not available so the GeolocateControl will be disabled.");const p=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=p,this._geolocateButton.setAttribute("aria-label",p)}else{const p=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=p,this._geolocateButton.setAttribute("aria-label",p)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=x.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new IA({element:this._dotElement}),this._circleElement=x.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new IA({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onUpdate),this._map.on("move",this._onUpdate),this._map.on("rotate",this._onUpdate),this._map.on("pitch",this._onUpdate)),this._geolocateButton.addEventListener("click",(()=>this.trigger())),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(p=>{const C=p?.[0]instanceof ResizeObserverEntry;p.geolocateSource||this._watchState!=="ACTIVE_LOCK"||C||this._map.isZooming()||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new a.l("trackuserlocationend")),this.fire(new a.l("userlocationlostfocus")))}))}},this.options=a.e({},fh,O)}onAdd(O){return this._map=O,this._container=x.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),(function(){return a._(this,arguments,void 0,(function*(l=!1){if(sr!==void 0&&!l)return sr;if(window.navigator.permissions===void 0)return sr=!!window.navigator.geolocation,sr;try{sr=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{sr=!!window.navigator.geolocation}return sr}))})().then((l=>this._finishSetupUI(l))),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),x.remove(this._container),this._map.off("zoom",this._onUpdate),this._map.off("move",this._onUpdate),this._map.off("rotate",this._onUpdate),this._map.off("pitch",this._onUpdate),this._map=void 0,hA=0,zc=!1}_isOutOfMapMaxBounds(O){const l=this._map.getMaxBounds(),p=O.coords;return l&&(p.longitude<l.getWest()||p.longitude>l.getEast()||p.latitude<l.getSouth()||p.latitude>l.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":case"BACKGROUND_ERROR":case"OFF":case void 0:break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadiusIfNeeded(){const O=this._userLocationDotMarker.getLngLat();if(!(this.options.showUserLocation&&this.options.showAccuracyCircle&&this._accuracy&&O))return;const l=this._map.project(O),p=this._map.unproject([l.x+100,l.y]),C=O.distanceTo(p)/100,E=2*this._accuracy/C;this._circleElement.style.width=`${E.toFixed(2)}px`,this._circleElement.style.height=`${E.toFixed(2)}px`}trigger(){if(!this._setup)return a.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":hA--,zc=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new a.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.l("trackuserlocationstart")),this.fire(new a.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let O;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),hA++,hA>1?(O={maximumAge:6e5,timeout:0},zc=!0):(O=this.options.positionOptions,zc=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,O)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},s.GlobeControl=class{constructor(){this._toggleProjection=()=>{var O;const l=(O=this._map.getProjection())===null||O===void 0?void 0:O.type;this._map.setProjection(l!=="mercator"&&l?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var O;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((O=this._map.getProjection())===null||O===void 0?void 0:O.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(O){return this._map=O,this._container=x.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=x.create("button","maplibregl-ctrl-globe",this._container),x.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){x.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},s.Hash=cA,s.ImageSource=Pn,s.KeyboardHandler=Du,s.LngLatBounds=it,s.LogoControl=td,s.Map=class extends Nd{constructor(O){var l,p;a.cw.mark(a.cx.create);const C=Object.assign(Object.assign(Object.assign({},bs),O),{canvasContextAttributes:Object.assign(Object.assign({},bs.canvasContextAttributes),O.canvasContextAttributes)});if(C.minZoom!=null&&C.maxZoom!=null&&C.minZoom>C.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(C.minPitch!=null&&C.maxPitch!=null&&C.minPitch>C.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(C.minPitch!=null&&C.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(C.maxPitch!=null&&C.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const E=new Ua,B=new Ka;if(C.minZoom!==void 0&&E.setMinZoom(C.minZoom),C.maxZoom!==void 0&&E.setMaxZoom(C.maxZoom),C.minPitch!==void 0&&E.setMinPitch(C.minPitch),C.maxPitch!==void 0&&E.setMaxPitch(C.maxPitch),C.renderWorldCopies!==void 0&&E.setRenderWorldCopies(C.renderWorldCopies),super(E,B,{bearingSnap:C.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new ul,this._controls=[],this._mapId=a.a7(),this._contextLost=G=>{G.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new a.l("webglcontextlost",{originalEvent:G}))},this._contextRestored=G=>{this._setupPainter(),this.resize(),this._update(),this.fire(new a.l("webglcontextrestored",{originalEvent:G}))},this._onMapScroll=G=>{if(G.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=C.interactive,this._maxTileCacheSize=C.maxTileCacheSize,this._maxTileCacheZoomLevels=C.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},C.canvasContextAttributes),this._trackResize=C.trackResize===!0,this._bearingSnap=C.bearingSnap,this._centerClampedToGround=C.centerClampedToGround,this._refreshExpiredTiles=C.refreshExpiredTiles===!0,this._fadeDuration=C.fadeDuration,this._crossSourceCollisions=C.crossSourceCollisions===!0,this._collectResourceTiming=C.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Fc),C.locale),this._clickTolerance=C.clickTolerance,this._overridePixelRatio=C.pixelRatio,this._maxCanvasSize=C.maxCanvasSize,this.transformCameraUpdate=C.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=C.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=H.addThrottleControl((()=>this.isMoving())),this._requestManager=new Q(C.transformRequest),typeof C.container=="string"){if(this._container=document.getElementById(C.container),!this._container)throw new Error(`Container '${C.container}' not found.`)}else{if(!(C.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=C.container}if(C.maxBounds&&this.setMaxBounds(C.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),this.on("terrain",(()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)})),this.once("idle",(()=>{this._idleTriggered=!0})),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let G=!1;const Z=uA((ae=>{this._trackResize&&!this._removed&&(this.resize(ae),this.redraw())}),50);this._resizeObserver=new ResizeObserver((ae=>{G?Z(ae):G=!0})),this._resizeObserver.observe(this._container)}this.handlers=new La(this,C),this._hash=C.hash&&new cA(typeof C.hash=="string"&&C.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:C.center,elevation:C.elevation,zoom:C.zoom,bearing:C.bearing,pitch:C.pitch,roll:C.roll}),C.bounds&&(this.resize(),this.fitBounds(C.bounds,a.e({},C.fitBoundsOptions,{duration:0}))));const U=typeof C.style=="string"||((p=(l=C.style)===null||l===void 0?void 0:l.projection)===null||p===void 0?void 0:p.type)!=="globe";this.resize(null,U),this._localIdeographFontFamily=C.localIdeographFontFamily,this._validateStyle=C.validateStyle,C.style&&this.setStyle(C.style,{localIdeographFontFamily:C.localIdeographFontFamily}),C.attributionControl&&this.addControl(new Ci(typeof C.attributionControl=="boolean"?void 0:C.attributionControl)),C.maplibreLogo&&this.addControl(new td,C.logoPosition),this.on("style.load",(()=>{if(U||this._resizeTransform(),this.transform.unmodified){const G=a.Q(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(G)}})),this.on("data",(G=>{this._update(G.dataType==="style"),this.fire(new a.l(`${G.dataType}data`,G))})),this.on("dataloading",(G=>{this.fire(new a.l(`${G.dataType}dataloading`,G))})),this.on("dataabort",(G=>{this.fire(new a.l("sourcedataabort",G))}))}_getMapId(){return this._mapId}setGlobalStateProperty(O,l){return this.style.setGlobalStateProperty(O,l),this._update(!0)}getGlobalState(){return this.style.getGlobalState()}addControl(O,l){if(l===void 0&&(l=O.getDefaultPosition?O.getDefaultPosition():"top-right"),!O||!O.onAdd)return this.fire(new a.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const p=O.onAdd(this);this._controls.push(O);const C=this._controlPositions[l];return l.indexOf("bottom")!==-1?C.insertBefore(p,C.firstChild):C.appendChild(p),this}removeControl(O){if(!O||!O.onRemove)return this.fire(new a.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const l=this._controls.indexOf(O);return l>-1&&this._controls.splice(l,1),O.onRemove(this),this}hasControl(O){return this._controls.indexOf(O)>-1}coveringTiles(O){return Qn(this.transform,O)}calculateCameraOptionsFromTo(O,l,p,C){return C==null&&this.terrain&&(C=this.terrain.getElevationForLngLatZoom(p,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(O,l,p,C)}resize(O,l=!0){const[p,C]=this._containerDimensions(),E=this._getClampedPixelRatio(p,C);if(this._resizeCanvas(p,C,E),this.painter.resize(p,C,E),this.painter.overLimit()){const U=this.painter.context.gl;this._maxCanvasSize=[U.drawingBufferWidth,U.drawingBufferHeight];const G=this._getClampedPixelRatio(p,C);this._resizeCanvas(p,C,G),this.painter.resize(p,C,G)}this._resizeTransform(l);const B=!this._moving;return B&&(this.stop(),this.fire(new a.l("movestart",O)).fire(new a.l("move",O))),this.fire(new a.l("resize",O)),B&&this.fire(new a.l("moveend",O)),this}_resizeTransform(O=!0){var l;const[p,C]=this._containerDimensions();this.transform.resize(p,C,O),(l=this._requestedCameraState)===null||l===void 0||l.resize(p,C,O)}_getClampedPixelRatio(O,l){const{0:p,1:C}=this._maxCanvasSize,E=this.getPixelRatio(),B=O*E,U=l*E;return Math.min(B>p?p/B:1,U>C?C/U:1)*E}getPixelRatio(){var O;return(O=this._overridePixelRatio)!==null&&O!==void 0?O:devicePixelRatio}setPixelRatio(O){this._overridePixelRatio=O,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(O){return this.transform.setMaxBounds(it.convert(O)),this._update()}setMinZoom(O){if((O=O??-2)>=-2&&O<=this.transform.maxZoom)return this.transform.setMinZoom(O),this._update(),this.getZoom()<O&&this.setZoom(O),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(O){if((O=O??22)>=this.transform.minZoom)return this.transform.setMaxZoom(O),this._update(),this.getZoom()>O&&this.setZoom(O),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(O){if((O=O??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(O>=0&&O<=this.transform.maxPitch)return this.transform.setMinPitch(O),this._update(),this.getPitch()<O&&this.setPitch(O),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(O){if((O=O??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(O>=this.transform.minPitch)return this.transform.setMaxPitch(O),this._update(),this.getPitch()>O&&this.setPitch(O),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(O){return this.transform.setRenderWorldCopies(O),this._update()}project(O){return this.transform.locationToScreenPoint(a.S.convert(O),this.style&&this.terrain)}unproject(O){return this.transform.screenPointToLocation(a.P.convert(O),this.terrain)}isMoving(){var O;return this._moving||((O=this.handlers)===null||O===void 0?void 0:O.isMoving())}isZooming(){var O;return this._zooming||((O=this.handlers)===null||O===void 0?void 0:O.isZooming())}isRotating(){var O;return this._rotating||((O=this.handlers)===null||O===void 0?void 0:O.isRotating())}_createDelegatedListener(O,l,p){if(O==="mouseenter"||O==="mouseover"){let C=!1;return{layers:l,listener:p,delegates:{mousemove:B=>{const U=l.filter((Z=>this.getLayer(Z))),G=U.length!==0?this.queryRenderedFeatures(B.point,{layers:U}):[];G.length?C||(C=!0,p.call(this,new Tu(O,this,B.originalEvent,{features:G}))):C=!1},mouseout:()=>{C=!1}}}}if(O==="mouseleave"||O==="mouseout"){let C=!1;return{layers:l,listener:p,delegates:{mousemove:U=>{const G=l.filter((Z=>this.getLayer(Z)));(G.length!==0?this.queryRenderedFeatures(U.point,{layers:G}):[]).length?C=!0:C&&(C=!1,p.call(this,new Tu(O,this,U.originalEvent)))},mouseout:U=>{C&&(C=!1,p.call(this,new Tu(O,this,U.originalEvent)))}}}}{const C=E=>{const B=l.filter((G=>this.getLayer(G))),U=B.length!==0?this.queryRenderedFeatures(E.point,{layers:B}):[];U.length&&(E.features=U,p.call(this,E),delete E.features)};return{layers:l,listener:p,delegates:{[O]:C}}}}_saveDelegatedListener(O,l){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[O]=this._delegatedListeners[O]||[],this._delegatedListeners[O].push(l)}_removeDelegatedListener(O,l,p){if(!this._delegatedListeners||!this._delegatedListeners[O])return;const C=this._delegatedListeners[O];for(let E=0;E<C.length;E++){const B=C[E];if(B.listener===p&&B.layers.length===l.length&&B.layers.every((U=>l.includes(U)))){for(const U in B.delegates)this.off(U,B.delegates[U]);return void C.splice(E,1)}}}on(O,l,p){if(p===void 0)return super.on(O,l);const C=typeof l=="string"?[l]:l,E=this._createDelegatedListener(O,C,p);this._saveDelegatedListener(O,E);for(const B in E.delegates)this.on(B,E.delegates[B]);return{unsubscribe:()=>{this._removeDelegatedListener(O,C,p)}}}once(O,l,p){if(p===void 0)return super.once(O,l);const C=typeof l=="string"?[l]:l,E=this._createDelegatedListener(O,C,p);for(const B in E.delegates){const U=E.delegates[B];E.delegates[B]=(...G)=>{this._removeDelegatedListener(O,C,p),U(...G)}}this._saveDelegatedListener(O,E);for(const B in E.delegates)this.once(B,E.delegates[B]);return this}off(O,l,p){return p===void 0?super.off(O,l):(this._removeDelegatedListener(O,typeof l=="string"?[l]:l,p),this)}queryRenderedFeatures(O,l){if(!this.style)return[];let p;const C=O instanceof a.P||Array.isArray(O),E=C?O:[[0,0],[this.transform.width,this.transform.height]];if(l=l||(C?{}:O)||{},E instanceof a.P||typeof E[0]=="number")p=[a.P.convert(E)];else{const B=a.P.convert(E[0]),U=a.P.convert(E[1]);p=[B,new a.P(U.x,B.y),U,new a.P(B.x,U.y),B]}return this.style.queryRenderedFeatures(p,l,this.transform)}querySourceFeatures(O,l){return this.style.querySourceFeatures(O,l)}setStyle(O,l){return(l=a.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},l)).diff!==!1&&l.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&O?(this._diffStyle(O,l),this):(this._localIdeographFontFamily=l.localIdeographFontFamily,this._updateStyle(O,l))}setTransformRequest(O){return this._requestManager.setTransformRequest(O),this}_getUIString(O){const l=this._locale[O];if(l==null)throw new Error(`Missing UI string '${O}'`);return l}_updateStyle(O,l){var p,C;if(l.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",(()=>this._updateStyle(O,l)));const E=this.style&&l.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!O)),O?(this.style=new d0(this,l||{}),this.style.setEventedParent(this,{style:this.style}),typeof O=="string"?this.style.loadURL(O,l,E):this.style.loadJSON(O,l,E),this):((C=(p=this.style)===null||p===void 0?void 0:p.projection)===null||C===void 0||C.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new d0(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(O,l){if(typeof O=="string"){const p=this._requestManager.transformRequest(O,"Style");a.j(p,new AbortController).then((C=>{this._updateDiff(C.data,l)})).catch((C=>{C&&this.fire(new a.k(C))}))}else typeof O=="object"&&this._updateDiff(O,l)}_updateDiff(O,l){try{this.style.setState(O,l)&&this._update(!0)}catch(p){a.w(`Unable to perform style diff: ${p.message||p.error||p}.  Rebuilding the style from scratch.`),this._updateStyle(O,l)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():a.w("There is no style added to the map.")}addSource(O,l){return this._lazyInitEmptyStyle(),this.style.addSource(O,l),this._update(!0)}isSourceLoaded(O){const l=this.style&&this.style.sourceCaches[O];if(l!==void 0)return l.loaded();this.fire(new a.k(new Error(`There is no source with ID '${O}'`)))}setTerrain(O){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),O){const l=this.style.sourceCaches[O.source];if(!l)throw new Error(`cannot load terrain, because there exists no source with ID: ${O.source}`);this.terrain===null&&l.reload();for(const p in this.style._layers){const C=this.style._layers[p];C.type==="hillshade"&&C.source===O.source&&a.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality."),C.type==="color-relief"&&C.source===O.source&&a.w("You are using the same source for a color-relief layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new fc(this.painter,l,O),this.painter.renderToTexture=new E1(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=p=>{var C;p.dataType==="style"?this.terrain.sourceCache.freeRtt():p.dataType==="source"&&p.tile&&(p.sourceId!==O.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((C=p.source)===null||C===void 0?void 0:C.type)==="image"?this.terrain.sourceCache.freeRtt():this.terrain.sourceCache.freeRtt(p.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new a.l("terrain",{terrain:O})),this}getTerrain(){var O,l;return(l=(O=this.terrain)===null||O===void 0?void 0:O.options)!==null&&l!==void 0?l:null}areTilesLoaded(){const O=this.style&&this.style.sourceCaches;for(const l in O){const p=O[l]._tiles;for(const C in p){const E=p[C];if(E.state!=="loaded"&&E.state!=="errored")return!1}}return!0}removeSource(O){return this.style.removeSource(O),this._update(!0)}getSource(O){return this.style.getSource(O)}setSourceTileLodParams(O,l,p){if(p){const C=this.getSource(p);if(!C)throw new Error(`There is no source with ID "${p}", cannot set LOD parameters`);C.calculateTileZoom=Pt(Math.max(1,O),Math.max(1,l))}else for(const C in this.style.sourceCaches)this.style.sourceCaches[C].getSource().calculateTileZoom=Pt(Math.max(1,O),Math.max(1,l));return this._update(!0),this}refreshTiles(O,l){const p=this.style.sourceCaches[O];if(!p)throw new Error(`There is no source cache with ID "${O}", cannot refresh tile`);l===void 0?p.reload(!0):p.refreshTiles(l.map((C=>new a.a4(C.z,C.x,C.y))))}addImage(O,l,p={}){const{pixelRatio:C=1,sdf:E=!1,stretchX:B,stretchY:U,content:G,textFitWidth:Z,textFitHeight:ae}=p;if(this._lazyInitEmptyStyle(),!(l instanceof HTMLImageElement||a.b(l))){if(l.width===void 0||l.height===void 0)return this.fire(new a.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:ce,height:me,data:ge}=l,Pe=l;return this.style.addImage(O,{data:new a.R({width:ce,height:me},new Uint8Array(ge)),pixelRatio:C,stretchX:B,stretchY:U,content:G,textFitWidth:Z,textFitHeight:ae,sdf:E,version:0,userImage:Pe}),Pe.onAdd&&Pe.onAdd(this,O),this}}{const{width:ce,height:me,data:ge}=M.getImageData(l);this.style.addImage(O,{data:new a.R({width:ce,height:me},ge),pixelRatio:C,stretchX:B,stretchY:U,content:G,textFitWidth:Z,textFitHeight:ae,sdf:E,version:0})}}updateImage(O,l){const p=this.style.getImage(O);if(!p)return this.fire(new a.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const C=l instanceof HTMLImageElement||a.b(l)?M.getImageData(l):l,{width:E,height:B,data:U}=C;if(E===void 0||B===void 0)return this.fire(new a.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(E!==p.data.width||B!==p.data.height)return this.fire(new a.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const G=!(l instanceof HTMLImageElement||a.b(l));return p.data.replace(U,G),this.style.updateImage(O,p),this}getImage(O){return this.style.getImage(O)}hasImage(O){return O?!!this.style.getImage(O):(this.fire(new a.k(new Error("Missing required image id"))),!1)}removeImage(O){this.style.removeImage(O)}loadImage(O){return H.getImage(this._requestManager.transformRequest(O,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(O,l){return this._lazyInitEmptyStyle(),this.style.addLayer(O,l),this._update(!0)}moveLayer(O,l){return this.style.moveLayer(O,l),this._update(!0)}removeLayer(O){return this.style.removeLayer(O),this._update(!0)}getLayer(O){return this.style.getLayer(O)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(O,l,p){return this.style.setLayerZoomRange(O,l,p),this._update(!0)}setFilter(O,l,p={}){return this.style.setFilter(O,l,p),this._update(!0)}getFilter(O){return this.style.getFilter(O)}setPaintProperty(O,l,p,C={}){return this.style.setPaintProperty(O,l,p,C),this._update(!0)}getPaintProperty(O,l){return this.style.getPaintProperty(O,l)}setLayoutProperty(O,l,p,C={}){return this.style.setLayoutProperty(O,l,p,C),this._update(!0)}getLayoutProperty(O,l){return this.style.getLayoutProperty(O,l)}setGlyphs(O,l={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(O,l),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(O,l,p={}){return this._lazyInitEmptyStyle(),this.style.addSprite(O,l,p,(C=>{C||this._update(!0)})),this}removeSprite(O){return this._lazyInitEmptyStyle(),this.style.removeSprite(O),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(O,l={}){return this._lazyInitEmptyStyle(),this.style.setSprite(O,l,(p=>{p||this._update(!0)})),this}setLight(O,l={}){return this._lazyInitEmptyStyle(),this.style.setLight(O,l),this._update(!0)}getLight(){return this.style.getLight()}setSky(O,l={}){return this._lazyInitEmptyStyle(),this.style.setSky(O,l),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(O,l){return this.style.setFeatureState(O,l),this._update()}removeFeatureState(O,l){return this.style.removeFeatureState(O,l),this._update()}getFeatureState(O){return this.style.getFeatureState(O)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let O=0,l=0;return this._container&&(O=this._container.clientWidth||400,l=this._container.clientHeight||300),[O,l]}_setupContainer(){const O=this._container;O.classList.add("maplibregl-map");const l=this._canvasContainer=x.create("div","maplibregl-canvas-container",O);this._interactive&&l.classList.add("maplibregl-interactive"),this._canvas=x.create("canvas","maplibregl-canvas",l),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const p=this._containerDimensions(),C=this._getClampedPixelRatio(p[0],p[1]);this._resizeCanvas(p[0],p[1],C);const E=this._controlContainer=x.create("div","maplibregl-control-container",O),B=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((U=>{B[U]=x.create("div",`maplibregl-ctrl-${U} `,E)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(O,l,p){this._canvas.width=Math.floor(p*O),this._canvas.height=Math.floor(p*l),this._canvas.style.width=`${O}px`,this._canvas.style.height=`${l}px`}_setupPainter(){const O=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let l=null;this._canvas.addEventListener("webglcontextcreationerror",(C=>{l={requestedAttributes:O},C&&(l.statusMessage=C.statusMessage,l.type=C.type)}),{once:!0});let p=null;if(p=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,O):this._canvas.getContext("webgl2",O)||this._canvas.getContext("webgl",O),!p){const C="Failed to initialize WebGL";throw l?(l.message=C,new Error(JSON.stringify(l))):new Error(C)}this.painter=new uh(p,this.transform),T.testSupport(p)}migrateProjection(O,l){super.migrateProjection(O,l),this.painter.transform=O,this.fire(new a.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(O){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||O,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(O){return this._update(),this._renderTaskQueue.add(O)}_cancelRenderFrame(O){this._renderTaskQueue.remove(O)}_render(O){var l,p,C,E,B;const U=this._idleTriggered?this._fadeDuration:0,G=((l=this.style.projection)===null||l===void 0?void 0:l.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(O),this._removed)return;let Z=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const me=this.transform.zoom,ge=M.now();this.style.zoomHistory.update(me,ge);const Pe=new a.F(me,{now:ge,fadeDuration:U,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Ne=Pe.crossFadingFactor();Ne===1&&Ne===this._crossFadingFactor||(Z=!0,this._crossFadingFactor=Ne),this.style.update(Pe)}const ae=((p=this.style.projection)===null||p===void 0?void 0:p.transitionState)>0!==G;(C=this.style.projection)===null||C===void 0||C.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((E=this.style.projection)===null||E===void 0?void 0:E.transitionState,(B=this.style.projection)===null||B===void 0?void 0:B.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||ae)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,U,this._crossSourceCollisions,ae),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:U,showPadding:this.showPadding}),this.fire(new a.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,a.cw.mark(a.cx.load),this.fire(new a.l("load"))),this.style&&(this.style.hasTransitions()||Z)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const ce=this._sourcesDirty||this._styleDirty||this._placementDirty;return ce||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new a.l("idle")),!this._loaded||this._fullyLoaded||ce||(this._fullyLoaded=!0,a.cw.mark(a.cx.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var O;this._hash&&this._hash.remove();for(const p of this._controls)p.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),H.removeThrottleControl(this._imageQueueHandle),(O=this._resizeObserver)===null||O===void 0||O.disconnect();const l=this.painter.context.gl.getExtension("WEBGL_lose_context");l?.loseContext&&l.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),x.remove(this._canvasContainer),x.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),a.cw.clearMetrics(),this._removed=!0,this.fire(new a.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,M.frame(this._frameRequest,(O=>{a.cw.frame(O),this._frameRequest=null;try{this._render(O)}catch(l){if(!a.cy(l)&&!(function(p){return p.message===sA})(l))throw l}}),(()=>{})))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(O){this._showTileBoundaries!==O&&(this._showTileBoundaries=O,this._update())}get showPadding(){return!!this._showPadding}set showPadding(O){this._showPadding!==O&&(this._showPadding=O,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(O){this._showCollisionBoxes!==O&&(this._showCollisionBoxes=O,O?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(O){this._showOverdrawInspector!==O&&(this._showOverdrawInspector=O,this._update())}get repaint(){return!!this._repaint}set repaint(O){this._repaint!==O&&(this._repaint=O,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(O){this._vertices=O,this._update()}get version(){return Pu}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(O){return this._lazyInitEmptyStyle(),this.style.setProjection(O),this._update(!0)}},s.MapMouseEvent=Tu,s.MapTouchEvent=ls,s.MapWheelEvent=cc,s.Marker=IA,s.NavigationControl=class{constructor(O){this._updateZoomButtons=()=>{const l=this._map.getZoom(),p=l===this._map.getMaxZoom(),C=l===this._map.getMinZoom();this._zoomInButton.disabled=p,this._zoomOutButton.disabled=C,this._zoomInButton.setAttribute("aria-disabled",p.toString()),this._zoomOutButton.setAttribute("aria-disabled",C.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(l,p)=>{const C=this._map._getUIString(`NavigationControl.${p}`);l.title=C,l.setAttribute("aria-label",C)},this.options=a.e({},cs,O),this._container=x.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",(l=>l.preventDefault())),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",(l=>this._map.zoomIn({},{originalEvent:l}))),x.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",(l=>this._map.zoomOut({},{originalEvent:l}))),x.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",(l=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:l}):this._map.resetNorth({},{originalEvent:l})})),this._compassIcon=x.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(O){return this._map=O,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new po(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){x.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(O,l){const p=x.create("button",O,this._container);return p.type="button",p.addEventListener("click",l),p}},s.Popup=class extends a.E{constructor(O){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:"")},this.remove=()=>(this._content&&x.remove(this._content),this._container&&(x.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new a.l("close"))),this),this._onMouseUp=l=>{this._update(l.point)},this._onMouseMove=l=>{this._update(l.point)},this._onDrag=l=>{this._update(l.point)},this._update=l=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=x.create("div","maplibregl-popup",this._map.getContainer()),this._tip=x.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const U of this.options.className.split(" "))this._container.classList.add(U);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=xo(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!l)return;const p=this._flatPos=this._pos=this._trackPointer&&l?l:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&l?l:this._map.transform.locationToScreenPoint(this._lngLat));let C=this.options.anchor;const E=Qf(this.options.offset);if(!C){const U=this._container.offsetWidth,G=this._container.offsetHeight;let Z;Z=p.y+E.bottom.y<G?["top"]:p.y>this._map.transform.height-G?["bottom"]:[],p.x<U/2?Z.push("left"):p.x>this._map.transform.width-U/2&&Z.push("right"),C=Z.length===0?"bottom":Z.join("-")}let B=p.add(E[C]);this.options.subpixelPositioning||(B=B.round()),x.setTransform(this._container,`${As[C]} translate(${B.x}px,${B.y}px)`),id(this._container,C,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=a.e(Object.create(Gf),O)}addTo(O){return this._map&&this.remove(),this._map=O,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new a.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(O){return this._lngLat=a.S.convert(O),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(O){return this.setDOMContent(document.createTextNode(O))}setHTML(O){const l=document.createDocumentFragment(),p=document.createElement("body");let C;for(p.innerHTML=O;C=p.firstChild,C;)l.appendChild(C);return this.setDOMContent(l)}getMaxWidth(){var O;return(O=this._container)===null||O===void 0?void 0:O.style.maxWidth}setMaxWidth(O){return this.options.maxWidth=O,this._update(),this}setDOMContent(O){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=x.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(O),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(O){return this._container&&this._container.classList.add(O),this}removeClassName(O){return this._container&&this._container.classList.remove(O),this}setOffset(O){return this.options.offset=O,this._update(),this}toggleClassName(O){if(this._container)return this._container.classList.toggle(O)}setSubpixelPositioning(O){this.options.subpixelPositioning=O}_createCloseButton(){this.options.closeButton&&(this._closeButton=x.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const O=this._container.querySelector(Wf);O&&O.focus()}},s.RasterDEMTileSource=Jt,s.RasterTileSource=Ot,s.ScaleControl=class{constructor(O){this._onMove=()=>{Vm(this._map,this._container,this.options)},this.setUnit=l=>{this.options.unit=l,Vm(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},kA),O)}getDefaultPosition(){return"bottom-left"}onAdd(O){return this._map=O,this._container=x.create("div","maplibregl-ctrl maplibregl-ctrl-scale",O.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){x.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},s.ScrollZoomHandler=$m,s.Style=d0,s.TerrainControl=class{constructor(O){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=O}onAdd(O){return this._map=O,this._container=x.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=x.create("button","maplibregl-ctrl-terrain",this._container),x.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){x.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},s.TwoFingersTouchPitchHandler=Ru,s.TwoFingersTouchRotateHandler=jf,s.TwoFingersTouchZoomHandler=hc,s.TwoFingersTouchZoomRotateHandler=Xh,s.VectorTileSource=Dt,s.VideoSource=oi,s.addSourceType=(O,l)=>a._(void 0,void 0,void 0,(function*(){if(dn(O))throw new Error(`A source type called "${O}" already exists.`);((p,C)=>{Tn[p]=C})(O,l)})),s.clearPrewarmedResources=function(){const O=Me;O&&(O.isPreloaded()&&O.numActive()===1?(O.release(ke),Me=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},s.createTileMesh=zi,s.getMaxParallelImageRequests=function(){return a.a.MAX_PARALLEL_IMAGE_REQUESTS},s.getRTLTextPluginStatus=function(){return _e().getRTLTextPluginStatus()},s.getVersion=function(){return Gd},s.getWorkerCount=function(){return we.workerCount},s.getWorkerUrl=function(){return a.a.WORKER_URL},s.importScriptInWorkers=function(O){return Bt().broadcast("IS",O)},s.prewarm=function(){nt().acquire(ke)},s.setMaxParallelImageRequests=function(O){a.a.MAX_PARALLEL_IMAGE_REQUESTS=O},s.setRTLTextPlugin=function(O,l){return _e().setRTLTextPlugin(O,l)},s.setWorkerCount=function(O){we.workerCount=O},s.setWorkerUrl=function(O){a.a.WORKER_URL=O}}));var o=t;return o}))})(sw)),sw.exports}var Xde=Zde();const g_=eu(Xde);var N5=typeof globalThis<"u"?globalThis:typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{};function GX(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var L2={exports:{}};L2.exports;var HF;function Jde(){return HF||(HF=1,(function(n,e){var t=200,i="__lodash_hash_undefined__",r=1,o=2,s=9007199254740991,a="[object Arguments]",c="[object Array]",h="[object AsyncFunction]",m="[object Boolean]",y="[object Date]",M="[object Error]",x="[object Function]",T="[object GeneratorFunction]",P="[object Map]",F="[object Number]",j="[object Null]",q="[object Object]",V="[object Promise]",H="[object Proxy]",Q="[object RegExp]",Y="[object Set]",z="[object String]",se="[object Symbol]",le="[object Undefined]",pe="[object WeakMap]",de="[object ArrayBuffer]",ve="[object DataView]",Ee="[object Float32Array]",Re="[object Float64Array]",je="[object Int8Array]",Ie="[object Int16Array]",qe="[object Int32Array]",tt="[object Uint8Array]",At="[object Uint8ClampedArray]",ke="[object Uint16Array]",we="[object Uint32Array]",ze=/[\\^$.*+?()[\]{}|]/g,Me=/^\[object .+?Constructor\]$/,lt=/^(?:0|[1-9]\d*)$/,nt={};nt[Ee]=nt[Re]=nt[je]=nt[Ie]=nt[qe]=nt[tt]=nt[At]=nt[ke]=nt[we]=!0,nt[a]=nt[c]=nt[de]=nt[m]=nt[ve]=nt[y]=nt[M]=nt[x]=nt[P]=nt[F]=nt[q]=nt[Q]=nt[Y]=nt[z]=nt[pe]=!1;var bt=typeof N5=="object"&&N5&&N5.Object===Object&&N5,Bt=typeof self=="object"&&self&&self.Object===Object&&self,Ke=bt||Bt||Function("return this")(),Te=e&&!e.nodeType&&e,Se=Te&&!0&&n&&!n.nodeType&&n,We=Se&&Se.exports===Te,at=We&&bt.process,it=(function(){try{return at&&at.binding&&at.binding("util")}catch{}})(),ft=it&&it.isTypedArray;function Dt(X,Ce){for(var Qe=-1,Et=X==null?0:X.length,jn=0,On=[];++Qe<Et;){var _i=X[Qe];Ce(_i,Qe,X)&&(On[jn++]=_i)}return On}function Ot(X,Ce){for(var Qe=-1,Et=Ce.length,jn=X.length;++Qe<Et;)X[jn+Qe]=Ce[Qe];return X}function Jt(X,Ce){for(var Qe=-1,Et=X==null?0:X.length;++Qe<Et;)if(Ce(X[Qe],Qe,X))return!0;return!1}function Dn(X,Ce){for(var Qe=-1,Et=Array(X);++Qe<X;)Et[Qe]=Ce(Qe);return Et}function Pn(X){return function(Ce){return X(Ce)}}function oi(X,Ce){return X.has(Ce)}function In(X,Ce){return X?.[Ce]}function Tn(X){var Ce=-1,Qe=Array(X.size);return X.forEach(function(Et,jn){Qe[++Ce]=[jn,Et]}),Qe}function dn(X,Ce){return function(Qe){return X(Ce(Qe))}}function $n(X){var Ce=-1,Qe=Array(X.size);return X.forEach(function(Et){Qe[++Ce]=Et}),Qe}var Un=Array.prototype,It=Function.prototype,_e=Object.prototype,oe=Ke["__core-js_shared__"],ee=It.toString,ne=_e.hasOwnProperty,ue=(function(){var X=/[^.]+$/.exec(oe&&oe.keys&&oe.keys.IE_PROTO||"");return X?"Symbol(src)_1."+X:""})(),be=_e.toString,Le=RegExp("^"+ee.call(ne).replace(ze,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ve=We?Ke.Buffer:void 0,rt=Ke.Symbol,ye=Ke.Uint8Array,Be=_e.propertyIsEnumerable,v=Un.splice,yt=rt?rt.toStringTag:void 0,Mt=Object.getOwnPropertySymbols,Pt=Ve?Ve.isBuffer:void 0,en=dn(Object.keys,Object),mt=wo(Ke,"DataView"),Qn=wo(Ke,"Map"),Xn=wo(Ke,"Promise"),Cn=wo(Ke,"Set"),Fn=wo(Ke,"WeakMap"),pi=wo(Object,"create"),Hi=ko(mt),Ii=ko(Qn),Ar=ko(Xn),ii=ko(Cn),Fi=ko(Fn),Ri=rt?rt.prototype:void 0,on=Ri?Ri.valueOf:void 0;function nr(X){var Ce=-1,Qe=X==null?0:X.length;for(this.clear();++Ce<Qe;){var Et=X[Ce];this.set(Et[0],Et[1])}}function Go(){this.__data__=pi?pi(null):{},this.size=0}function Co(X){var Ce=this.has(X)&&delete this.__data__[X];return this.size-=Ce?1:0,Ce}function gr(X){var Ce=this.__data__;if(pi){var Qe=Ce[X];return Qe===i?void 0:Qe}return ne.call(Ce,X)?Ce[X]:void 0}function gn(X){var Ce=this.__data__;return pi?Ce[X]!==void 0:ne.call(Ce,X)}function Ni(X,Ce){var Qe=this.__data__;return this.size+=this.has(X)?0:1,Qe[X]=pi&&Ce===void 0?i:Ce,this}nr.prototype.clear=Go,nr.prototype.delete=Co,nr.prototype.get=gr,nr.prototype.has=gn,nr.prototype.set=Ni;function ni(X){var Ce=-1,Qe=X==null?0:X.length;for(this.clear();++Ce<Qe;){var Et=X[Ce];this.set(Et[0],Et[1])}}function ga(){this.__data__=[],this.size=0}function Ra(X){var Ce=this.__data__,Qe=Lo(Ce,X);if(Qe<0)return!1;var Et=Ce.length-1;return Qe==Et?Ce.pop():v.call(Ce,Qe,1),--this.size,!0}function zs(X){var Ce=this.__data__,Qe=Lo(Ce,X);return Qe<0?void 0:Ce[Qe][1]}function Pi(X){return Lo(this.__data__,X)>-1}function kl(X,Ce){var Qe=this.__data__,Et=Lo(Qe,X);return Et<0?(++this.size,Qe.push([X,Ce])):Qe[Et][1]=Ce,this}ni.prototype.clear=ga,ni.prototype.delete=Ra,ni.prototype.get=zs,ni.prototype.has=Pi,ni.prototype.set=kl;function eo(X){var Ce=-1,Qe=X==null?0:X.length;for(this.clear();++Ce<Qe;){var Et=X[Ce];this.set(Et[0],Et[1])}}function ya(){this.size=0,this.__data__={hash:new nr,map:new(Qn||ni),string:new nr}}function tu(X){var Ce=Es(this,X).delete(X);return this.size-=Ce?1:0,Ce}function Xs(X){return Es(this,X).get(X)}function Ko(X){return Es(this,X).has(X)}function Zo(X,Ce){var Qe=Es(this,X),Et=Qe.size;return Qe.set(X,Ce),this.size+=Qe.size==Et?0:1,this}eo.prototype.clear=ya,eo.prototype.delete=tu,eo.prototype.get=Xs,eo.prototype.has=Ko,eo.prototype.set=Zo;function gs(X){var Ce=-1,Qe=X==null?0:X.length;for(this.__data__=new eo;++Ce<Qe;)this.add(X[Ce])}function jr(X){return this.__data__.set(X,i),this}function Da(X){return this.__data__.has(X)}gs.prototype.add=gs.prototype.push=jr,gs.prototype.has=Da;function os(X){var Ce=this.__data__=new ni(X);this.size=Ce.size}function Bc(){this.__data__=new ni,this.size=0}function Mu(X){var Ce=this.__data__,Qe=Ce.delete(X);return this.size=Ce.size,Qe}function nu(X){return this.__data__.get(X)}function oA(X){return this.__data__.has(X)}function tc(X,Ce){var Qe=this.__data__;if(Qe instanceof ni){var Et=Qe.__data__;if(!Qn||Et.length<t-1)return Et.push([X,Ce]),this.size=++Qe.size,this;Qe=this.__data__=new eo(Et)}return Qe.set(X,Ce),this.size=Qe.size,this}os.prototype.clear=Bc,os.prototype.delete=Mu,os.prototype.get=nu,os.prototype.has=oA,os.prototype.set=tc;function gl(X,Ce){var Qe=fo(X),Et=!Qe&&ss(X),jn=!Qe&&!Et&&Fo(X),On=!Qe&&!Et&&!jn&&Ka(X),_i=Qe||Et||jn||On,zi=_i?Dn(X.length,String):[],ki=zi.length;for(var Ei in X)ne.call(X,Ei)&&!(_i&&(Ei=="length"||jn&&(Ei=="offset"||Ei=="parent")||On&&(Ei=="buffer"||Ei=="byteLength"||Ei=="byteOffset")||au(Ei,ki)))&&zi.push(Ei);return zi}function Lo(X,Ce){for(var Qe=X.length;Qe--;)if(Rl(X[Qe][0],Ce))return Qe;return-1}function nc(X,Ce,Qe){var Et=Ce(X);return fo(X)?Et:Ot(Et,Qe(X))}function iu(X){return X==null?X===void 0?le:j:yt&&yt in Object(X)?Tl(X):Pa(X)}function Ic(X){return oo(X)&&iu(X)==a}function ic(X,Ce,Qe,Et,jn){return X===Ce?!0:X==null||Ce==null||!oo(X)&&!oo(Ce)?X!==X&&Ce!==Ce:kc(X,Ce,Qe,Et,ic,jn)}function kc(X,Ce,Qe,Et,jn,On){var _i=fo(X),zi=fo(Ce),ki=_i?c:Ui(X),Ei=zi?c:Ui(Ce);ki=ki==a?q:ki,Ei=Ei==a?q:Ei;var Cr=ki==q,so=Ei==q,yr=ki==Ei;if(yr&&Fo(X)){if(!Fo(Ce))return!1;_i=!0,Cr=!1}if(yr&&!Cr)return On||(On=new os),_i||Ka(X)?wu(X,Ce,Qe,Et,jn,On):ru(X,Ce,ki,Qe,Et,jn,On);if(!(Qe&r)){var Ji=Cr&&ne.call(X,"__wrapped__"),rr=so&&ne.call(Ce,"__wrapped__");if(Ji||rr){var ys=Ji?X.value():X,Xo=rr?Ce.value():Ce;return On||(On=new os),jn(ys,Xo,Qe,Et,On)}}return yr?(On||(On=new os),ou(X,Ce,Qe,Et,jn,On)):!1}function ZA(X){if(!ea(X)||Su(X))return!1;var Ce=Ua(X)?Le:Me;return Ce.test(ko(X))}function Ss(X){return oo(X)&&So(X.length)&&!!nt[iu(X)]}function Tc(X){if(!ir(X))return en(X);var Ce=[];for(var Qe in Object(X))ne.call(X,Qe)&&Qe!="constructor"&&Ce.push(Qe);return Ce}function wu(X,Ce,Qe,Et,jn,On){var _i=Qe&r,zi=X.length,ki=Ce.length;if(zi!=ki&&!(_i&&ki>zi))return!1;var Ei=On.get(X);if(Ei&&On.get(Ce))return Ei==Ce;var Cr=-1,so=!0,yr=Qe&o?new gs:void 0;for(On.set(X,Ce),On.set(Ce,X);++Cr<zi;){var Ji=X[Cr],rr=Ce[Cr];if(Et)var ys=_i?Et(rr,Ji,Cr,Ce,X,On):Et(Ji,rr,Cr,X,Ce,On);if(ys!==void 0){if(ys)continue;so=!1;break}if(yr){if(!Jt(Ce,function(Xo,Os){if(!oi(yr,Os)&&(Ji===Xo||jn(Ji,Xo,Qe,Et,On)))return yr.push(Os)})){so=!1;break}}else if(!(Ji===rr||jn(Ji,rr,Qe,Et,On))){so=!1;break}}return On.delete(X),On.delete(Ce),so}function ru(X,Ce,Qe,Et,jn,On,_i){switch(Qe){case ve:if(X.byteLength!=Ce.byteLength||X.byteOffset!=Ce.byteOffset)return!1;X=X.buffer,Ce=Ce.buffer;case de:return!(X.byteLength!=Ce.byteLength||!On(new ye(X),new ye(Ce)));case m:case y:case F:return Rl(+X,+Ce);case M:return X.name==Ce.name&&X.message==Ce.message;case Q:case z:return X==Ce+"";case P:var zi=Tn;case Y:var ki=Et&r;if(zi||(zi=$n),X.size!=Ce.size&&!ki)return!1;var Ei=_i.get(X);if(Ei)return Ei==Ce;Et|=o,_i.set(X,Ce);var Cr=wu(zi(X),zi(Ce),Et,jn,On,_i);return _i.delete(X),Cr;case se:if(on)return on.call(X)==on.call(Ce)}return!1}function ou(X,Ce,Qe,Et,jn,On){var _i=Qe&r,zi=su(X),ki=zi.length,Ei=su(Ce),Cr=Ei.length;if(ki!=Cr&&!_i)return!1;for(var so=ki;so--;){var yr=zi[so];if(!(_i?yr in Ce:ne.call(Ce,yr)))return!1}var Ji=On.get(X);if(Ji&&On.get(Ce))return Ji==Ce;var rr=!0;On.set(X,Ce),On.set(Ce,X);for(var ys=_i;++so<ki;){yr=zi[so];var Xo=X[yr],Os=Ce[yr];if(Et)var Bs=_i?Et(Os,Xo,yr,Ce,X,On):Et(Xo,Os,yr,X,Ce,On);if(!(Bs===void 0?Xo===Os||jn(Xo,Os,Qe,Et,On):Bs)){rr=!1;break}ys||(ys=yr=="constructor")}if(rr&&!ys){var lu=X.constructor,vs=Ce.constructor;lu!=vs&&"constructor"in X&&"constructor"in Ce&&!(typeof lu=="function"&&lu instanceof lu&&typeof vs=="function"&&vs instanceof vs)&&(rr=!1)}return On.delete(X),On.delete(Ce),rr}function su(X){return nc(X,Nr,Js)}function Es(X,Ce){var Qe=X.__data__;return aa(Ce)?Qe[typeof Ce=="string"?"string":"hash"]:Qe.map}function wo(X,Ce){var Qe=In(X,Ce);return ZA(Qe)?Qe:void 0}function Tl(X){var Ce=ne.call(X,yt),Qe=X[yt];try{X[yt]=void 0;var Et=!0}catch{}var jn=be.call(X);return Et&&(Ce?X[yt]=Qe:delete X[yt]),jn}var Js=Mt?function(X){return X==null?[]:(X=Object(X),Dt(Mt(X),function(Ce){return Be.call(X,Ce)}))}:Gi,Ui=iu;(mt&&Ui(new mt(new ArrayBuffer(1)))!=ve||Qn&&Ui(new Qn)!=P||Xn&&Ui(Xn.resolve())!=V||Cn&&Ui(new Cn)!=Y||Fn&&Ui(new Fn)!=pe)&&(Ui=function(X){var Ce=iu(X),Qe=Ce==q?X.constructor:void 0,Et=Qe?ko(Qe):"";if(Et)switch(Et){case Hi:return ve;case Ii:return P;case Ar:return V;case ii:return Y;case Fi:return pe}return Ce});function au(X,Ce){return Ce=Ce??s,!!Ce&&(typeof X=="number"||lt.test(X))&&X>-1&&X%1==0&&X<Ce}function aa(X){var Ce=typeof X;return Ce=="string"||Ce=="number"||Ce=="symbol"||Ce=="boolean"?X!=="__proto__":X===null}function Su(X){return!!ue&&ue in X}function ir(X){var Ce=X&&X.constructor,Qe=typeof Ce=="function"&&Ce.prototype||_e;return X===Qe}function Pa(X){return be.call(X)}function ko(X){if(X!=null){try{return ee.call(X)}catch{}try{return X+""}catch{}}return""}function Rl(X,Ce){return X===Ce||X!==X&&Ce!==Ce}var ss=Ic((function(){return arguments})())?Ic:function(X){return oo(X)&&ne.call(X,"callee")&&!Be.call(X,"callee")},fo=Array.isArray;function as(X){return X!=null&&So(X.length)&&!Ua(X)}var Fo=Pt||Ai;function _o(X,Ce){return ic(X,Ce)}function Ua(X){if(!ea(X))return!1;var Ce=iu(X);return Ce==x||Ce==T||Ce==h||Ce==H}function So(X){return typeof X=="number"&&X>-1&&X%1==0&&X<=s}function ea(X){var Ce=typeof X;return X!=null&&(Ce=="object"||Ce=="function")}function oo(X){return X!=null&&typeof X=="object"}var Ka=ft?Pn(ft):Ss;function Nr(X){return as(X)?gl(X):Tc(X)}function Gi(){return[]}function Ai(){return!1}n.exports=_o})(L2,L2.exports)),L2.exports}var efe=Jde(),tfe=GX(efe);function _9(n,e,t){const i={id:[e,t,"circle"].join("_"),source:e,type:"circle",paint:{"circle-color":n,"circle-radius":2},filter:["==","$type","Point"]};return t&&(i["source-layer"]=t),i}function x9(n,e,t,i){const r={id:[t,i,"polygon"].join("_"),source:t,type:"fill",paint:{"fill-color":n,"fill-antialias":!0,"fill-outline-color":n},filter:["==","$type","Polygon"]};return i&&(r["source-layer"]=i),r}function M9(n,e,t){const i={id:[e,t,"line"].join("_"),source:e,layout:{"line-join":"round","line-cap":"round"},type:"line",paint:{"line-color":n},filter:["==","$type","LineString"]};return t&&(i["source-layer"]=t),i}function nfe(n,e){const t=[],i=[],r=[];function o(s){return{circle:e(s,.8),line:e(s,.6),polygon:e(s,.3),polygonOutline:e(s,.6),default:e(s,1)}}return Object.keys(n).forEach(s=>{const a=n[s];if(!a||a.length===0){const c=o(s);i.push(_9(c.circle,s)),r.push(M9(c.line,s)),t.push(x9(c.polygon,c.polygonOutline,s))}else a.forEach(c=>{const h=o(c);i.push(_9(h.circle,s,c)),r.push(M9(h.line,s,c)),t.push(x9(h.polygon,h.polygonOutline,s,c))})}),t.concat(r).concat(i)}function ife(n,e,t){t=Object.assign({backgroundColor:"#fff"},t);const i={id:"background",type:"background",paint:{"background-color":t.backgroundColor}},r={};return Object.keys(n.sources).forEach(o=>{const s=n.sources[o];(s.type==="vector"||s.type==="geojson")&&(r[o]=s)}),Object.assign(n,{layers:[i].concat(e),sources:r})}var ZF={polygonLayer:x9,lineLayer:M9,circleLayer:_9,generateInspectStyle:ife,generateColoredLayers:nfe};class rfe{constructor(e){e=Object.assign({show:!0,onToggle(){}},e),this._btn=this.createButton(),this._btn.onclick=e.onToggle,this.elem=this.createContainer(this._btn,e.show)}createButton(){const e=document.createElement("button");return e.className="maplibregl-ctrl-icon maplibregl-ctrl-inspect",e.type="button",e.title="Toggle Inspect",e.setAttribute("aria-label","Toggle Inspect"),e}createContainer(e,t){const i=document.createElement("div");return i.className="maplibregl-ctrl maplibregl-ctrl-group",i.appendChild(e),t||(i.style.display="none"),i}setInspectIcon(){this._btn.className="maplibregl-ctrl-icon maplibregl-ctrl-inspect"}setMapIcon(){this._btn.className="maplibregl-ctrl-icon maplibregl-ctrl-map"}}function ofe(n){return typeof n>"u"||n===null?n:n instanceof Date?n.toLocaleString():typeof n=="object"||typeof n=="number"||typeof n=="string"?n.toString():n}function MO(n,e){return`<div class="maplibregl-inspect_property"><div class="maplibregl-inspect_property-name">${n}</div><div class="maplibregl-inspect_property-value">${ofe(e)}</div></div>`}function sfe(n){return`<div class="maplibregl-inspect_layer">${n}</div>`}function afe(n){const e=sfe(n.layer["source-layer"]||n.layer.source),t=MO("$id",n.id),i=MO("$type",n.geometry.type),r=Object.keys(n.properties).map(o=>MO(o,n.properties[o]));return[e,t,i].concat(r).join("")}function lfe(n){return n.map(e=>`<div class="maplibregl-inspect_feature">${afe(e)}</div>`).join("")}function ufe(n){return`<div class="maplibregl-inspect_popup">${lfe(n)}</div>`}var F2={exports:{}},cfe=F2.exports,XF;function Afe(){return XF||(XF=1,(function(n,e){(function(t,i){{var r=i();n.exports&&(e=n.exports=r),e.randomColor=r}})(cfe,function(){var t=null,i={};j();var r=[],o=function(z){if(z=z||{},z.seed!==void 0&&z.seed!==null&&z.seed===parseInt(z.seed,10))t=z.seed;else if(typeof z.seed=="string")t=Q(z.seed);else{if(z.seed!==void 0&&z.seed!==null)throw new TypeError("The seed value must be an integer or string");t=null}var se,le,pe;if(z.count!==null&&z.count!==void 0){for(var de=z.count,ve=[],Ee=0;Ee<z.count;Ee++)r.push(!1);for(z.count=null;de>ve.length;){var Re=o(z);t!==null&&(z.seed=t),ve.push(Re)}return z.count=de,ve}return se=s(z),le=a(se,z),pe=c(se,le,z),h([se,le,pe],z)};function s(z){if(r.length>0){var se=Y(z.hue),le=T(se),pe=(se[1]-se[0])/r.length,de=parseInt((le-se[0])/pe);r[de]===!0?de=(de+2)%r.length:r[de]=!0;var ve=(se[0]+de*pe)%359,Ee=(se[0]+(de+1)*pe)%359;return se=[ve,Ee],le=T(se),le<0&&(le=360+le),le}else{var se=y(z.hue);return le=T(se),le<0&&(le=360+le),le}}function a(z,se){if(se.hue==="monochrome")return 0;if(se.luminosity==="random")return T([0,100]);var le=M(z),pe=le[0],de=le[1];switch(se.luminosity){case"bright":pe=55;break;case"dark":pe=de-10;break;case"light":de=55;break}return T([pe,de])}function c(z,se,le){var pe=m(z,se),de=100;switch(le.luminosity){case"dark":de=pe+20;break;case"light":pe=(de+pe)/2;break;case"random":pe=0,de=100;break}return T([pe,de])}function h(z,se){switch(se.format){case"hsvArray":return z;case"hslArray":return H(z);case"hsl":var le=H(z);return"hsl("+le[0]+", "+le[1]+"%, "+le[2]+"%)";case"hsla":var pe=H(z),Ee=se.alpha||Math.random();return"hsla("+pe[0]+", "+pe[1]+"%, "+pe[2]+"%, "+Ee+")";case"rgbArray":return q(z);case"rgb":var de=q(z);return"rgb("+de.join(", ")+")";case"rgba":var ve=q(z),Ee=se.alpha||Math.random();return"rgba("+ve.join(", ")+", "+Ee+")";default:return P(z)}}function m(z,se){for(var le=x(z).lowerBounds,pe=0;pe<le.length-1;pe++){var de=le[pe][0],ve=le[pe][1],Ee=le[pe+1][0],Re=le[pe+1][1];if(se>=de&&se<=Ee){var je=(Re-ve)/(Ee-de),Ie=ve-je*de;return je*se+Ie}}return 0}function y(z){if(typeof parseInt(z)=="number"){var se=parseInt(z);if(se<360&&se>0)return[se,se]}if(typeof z=="string"){if(i[z]){var le=i[z];if(le.hueRange)return le.hueRange}else if(z.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var pe=V(z)[0];return[pe,pe]}}return[0,360]}function M(z){return x(z).saturationRange}function x(z){z>=334&&z<=360&&(z-=360);for(var se in i){var le=i[se];if(le.hueRange&&z>=le.hueRange[0]&&z<=le.hueRange[1])return i[se]}return"Color not found"}function T(z){if(t===null){var se=.618033988749895,le=Math.random();return le+=se,le%=1,Math.floor(z[0]+le*(z[1]+1-z[0]))}else{var pe=z[1]||1,de=z[0]||0;t=(t*9301+49297)%233280;var ve=t/233280;return Math.floor(de+ve*(pe-de))}}function P(z){var se=q(z);function le(de){var ve=de.toString(16);return ve.length==1?"0"+ve:ve}var pe="#"+le(se[0])+le(se[1])+le(se[2]);return pe}function F(z,se,le){var pe=le[0][0],de=le[le.length-1][0],ve=le[le.length-1][1],Ee=le[0][1];i[z]={hueRange:se,lowerBounds:le,saturationRange:[pe,de],brightnessRange:[ve,Ee]}}function j(){F("monochrome",null,[[0,0],[100,0]]),F("red",[-26,18],[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]),F("orange",[18,46],[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]),F("yellow",[46,62],[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]),F("green",[62,178],[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]),F("blue",[178,257],[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]),F("purple",[257,282],[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]),F("pink",[282,334],[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]])}function q(z){var se=z[0];se===0&&(se=1),se===360&&(se=359),se=se/360;var le=z[1]/100,pe=z[2]/100,de=Math.floor(se*6),ve=se*6-de,Ee=pe*(1-le),Re=pe*(1-ve*le),je=pe*(1-(1-ve)*le),Ie=256,qe=256,tt=256;switch(de){case 0:Ie=pe,qe=je,tt=Ee;break;case 1:Ie=Re,qe=pe,tt=Ee;break;case 2:Ie=Ee,qe=pe,tt=je;break;case 3:Ie=Ee,qe=Re,tt=pe;break;case 4:Ie=je,qe=Ee,tt=pe;break;case 5:Ie=pe,qe=Ee,tt=Re;break}var At=[Math.floor(Ie*255),Math.floor(qe*255),Math.floor(tt*255)];return At}function V(z){z=z.replace(/^#/,""),z=z.length===3?z.replace(/(.)/g,"$1$1"):z;var se=parseInt(z.substr(0,2),16)/255,le=parseInt(z.substr(2,2),16)/255,pe=parseInt(z.substr(4,2),16)/255,de=Math.max(se,le,pe),ve=de-Math.min(se,le,pe),Ee=de?ve/de:0;switch(de){case se:return[60*((le-pe)/ve%6)||0,Ee,de];case le:return[60*((pe-se)/ve+2)||0,Ee,de];case pe:return[60*((se-le)/ve+4)||0,Ee,de]}}function H(z){var se=z[0],le=z[1]/100,pe=z[2]/100,de=(2-le)*pe;return[se,Math.round(le*pe/(de<1?de:2-de)*1e4)/100,de/2*100]}function Q(z){for(var se=0,le=0;le!==z.length&&!(se>=Number.MAX_SAFE_INTEGER);le++)se+=z.charCodeAt(le);return se}function Y(z){if(isNaN(z)){if(typeof z=="string"){if(i[z]){var le=i[z];if(le.hueRange)return le.hueRange}else if(z.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var pe=V(z)[0];return x(pe).hueRange}}}else{var se=parseInt(z);if(se<360&&se>0)return x(z).hueRange}return[0,360]}return o})})(F2,F2.exports)),F2.exports}var hfe=Afe(),dfe=GX(hfe);function ffe(n,e){let t="bright",i;return/water|ocean|lake|sea|river/.test(n)&&(i="blue"),/state|country|place/.test(n)&&(i="pink"),/road|highway|transport|streets/.test(n)&&(i="orange"),/contour|building|earth/.test(n)&&(i="monochrome"),/building/.test(n)&&(t="dark"),/earth/.test(n)&&(t="light"),/contour|landuse/.test(n)&&(i="yellow"),/wood|forest|park|landcover|land|natural/.test(n)&&(i="green"),`rgba(${dfe({luminosity:t,hue:i,seed:n,format:"rgbArray"}).join(", ")}, ${e||"1"})`}var pfe={brightColor:ffe};function mfe(n){return n.metadata&&n.metadata["maplibregl-inspect:inspect"]}function gfe(n){return Object.assign(n,{metadata:Object.assign({},n.metadata,{"maplibregl-inspect:inspect":!0})})}class mP{constructor(e){if(this._onSourceChange=i=>{if(i.sourceDataType==="visibility"||!i.isSourceLoaded)return;const r=Object.assign({},this.sources);this._setSourcesFromMap(),!tfe(r,this.sources)&&Object.keys(this.sources).length>0&&setTimeout(()=>this.render(),1e3)},this._onStyleChange=()=>{const i=this._map.getStyle();mfe(i)||(this._originalStyle=i)},this._onRightClick=()=>{!this.options.showMapPopupOnHover&&!this.options.showInspectMapPopupOnHover&&!this.options.blockHoverPopupOnClick&&this._popup&&this._popup.remove()},this._onMousemove=i=>{if(this._showInspectMap){if(!this.options.showInspectMapPopup||i.type==="mousemove"&&!this.options.showInspectMapPopupOnHover)return;i.type==="click"&&this.options.showInspectMapPopupOnHover&&this.options.blockHoverPopupOnClick&&(this._popupBlocked=!this._popupBlocked)}else{if(!this.options.showMapPopup||i.type==="mousemove"&&!this.options.showMapPopupOnHover)return;i.type==="click"&&this.options.showMapPopupOnHover&&this.options.blockHoverPopupOnClick&&(this._popupBlocked=!this._popupBlocked)}if(!this._popupBlocked&&this._popup){let r;this.options.selectThreshold===0?r=i.point:r=[[i.point.x-this.options.selectThreshold,i.point.y+this.options.selectThreshold],[i.point.x+this.options.selectThreshold,i.point.y-this.options.selectThreshold]];const o=this._map.queryRenderedFeatures(r,this.options.queryParameters)||[];if(this._map.getCanvas().style.cursor=o.length?"pointer":"",!o.length)this._popup.remove();else{this._popup.setLngLat(i.lngLat);const s=this.options.renderPopup(o);typeof s=="string"?this._popup.setHTML(s):this._popup.setDOMContent(s),this._popup.addTo(this._map)}}},!(this instanceof mP))throw new Error("MaplibreInspect needs to be called with the new keyword");let t=null;window.maplibregl?t=new window.maplibregl.Popup({closeButton:!1,closeOnClick:!1}):e.popup||console.error("Maplibre GL JS can not be found. Make sure to include it or pass an initialized MaplibreGL Popup to MaplibreInspect if you are using moduleis."),this.options=Object.assign({showInspectMap:!1,showInspectButton:!0,showInspectMapPopup:!0,showMapPopup:!1,showMapPopupOnHover:!0,showInspectMapPopupOnHover:!0,blockHoverPopupOnClick:!1,backgroundColor:"#fff",assignLayerColor:pfe.brightColor,buildInspectStyle:ZF.generateInspectStyle,renderPopup:ufe,popup:t,selectThreshold:5,useInspectStyle:!0,queryParameters:{},sources:{},toggleCallback(){},manageStyleOutside:!1},e),this.sources=this.options.sources,this.assignLayerColor=this.options.assignLayerColor,this._popup=this.options.popup,this._popupBlocked=!1,this._showInspectMap=this.options.showInspectMap,this._toggle=new rfe({show:this.options.showInspectButton,onToggle:()=>this.toggleInspector()})}toggleInspector(){this._showInspectMap=!this._showInspectMap,this._popupBlocked=!1,this.options.toggleCallback(this._showInspectMap),this.render()}_inspectStyle(){const e=ZF.generateColoredLayers(this.sources,this.assignLayerColor);return this.options.buildInspectStyle(this._map.getStyle(),e,{backgroundColor:this.options.backgroundColor})}render(){this._showInspectMap?(this.options.useInspectStyle&&this._map.setStyle(gfe(this._inspectStyle())),this._toggle.setMapIcon()):this._originalStyle&&(this._popup&&this._popup.remove(),this.options.useInspectStyle&&this._map.setStyle(this._originalStyle),this._toggle.setInspectIcon())}_setSourcesFromMap(){const e=Object.keys(this._map.getStyle().sources);Object.keys(this._map.style.sourceCaches).forEach(t=>{const i=this._map.style.sourceCaches[t]||{_source:{}},r=i._source.vectorLayerIds;r?this.sources[t]=r:i._source.type==="geojson"&&(this.sources[t]=[])}),Object.keys(this.sources).forEach(t=>{e.indexOf(t)===-1&&delete this.sources[t]})}setOriginalStyle(e){this._originalStyle=e,this._setSourcesFromMap()}onAdd(e){return this._map=e,Object.keys(this.sources).length===0&&(e.on("tiledata",this._onSourceChange),e.on("sourcedata",this._onSourceChange)),e.on("styledata",this._onStyleChange),e.on("load",this._onStyleChange),e.on("mousemove",this._onMousemove),e.on("click",this._onMousemove),e.on("contextmenu",this._onRightClick),this._toggle.elem}onRemove(){this._map.off("styledata",this._onStyleChange),this._map.off("load",this._onStyleChange),this._map.off("tiledata",this._onSourceChange),this._map.off("sourcedata",this._onSourceChange),this._map.off("mousemove",this._onMousemove),this._map.off("click",this._onMousemove),this._map.off("contextmenu",this._onRightClick);const e=this._toggle.elem;e.parentNode.removeChild(e),this._map=void 0}}var z2={exports:{}},yfe=z2.exports,JF;function vfe(){return JF||(JF=1,(function(n,e){(function(t,i){{var r=i();n&&n.exports&&(e=n.exports=r),e.randomColor=r}})(yfe,function(){var t=null,i={};j();var r=[],o=function(z){if(z=z||{},z.seed!==void 0&&z.seed!==null&&z.seed===parseInt(z.seed,10))t=z.seed;else if(typeof z.seed=="string")t=Q(z.seed);else{if(z.seed!==void 0&&z.seed!==null)throw new TypeError("The seed value must be an integer or string");t=null}var se,le,pe;if(z.count!==null&&z.count!==void 0){for(var de=z.count,ve=[],Ee=0;Ee<z.count;Ee++)r.push(!1);for(z.count=null;de>ve.length;){var Re=o(z);t!==null&&(z.seed=t),ve.push(Re)}return z.count=de,ve}return se=s(z),le=a(se,z),pe=c(se,le,z),h([se,le,pe],z)};function s(z){if(r.length>0){var se=Y(z.hue),le=T(se),pe=(se[1]-se[0])/r.length,de=parseInt((le-se[0])/pe);r[de]===!0?de=(de+2)%r.length:r[de]=!0;var ve=(se[0]+de*pe)%359,Ee=(se[0]+(de+1)*pe)%359;return se=[ve,Ee],le=T(se),le<0&&(le=360+le),le}else{var se=y(z.hue);return le=T(se),le<0&&(le=360+le),le}}function a(z,se){if(se.hue==="monochrome")return 0;if(se.luminosity==="random")return T([0,100]);var le=M(z),pe=le[0],de=le[1];switch(se.luminosity){case"bright":pe=55;break;case"dark":pe=de-10;break;case"light":de=55;break}return T([pe,de])}function c(z,se,le){var pe=m(z,se),de=100;switch(le.luminosity){case"dark":de=pe+20;break;case"light":pe=(de+pe)/2;break;case"random":pe=0,de=100;break}return T([pe,de])}function h(z,se){switch(se.format){case"hsvArray":return z;case"hslArray":return H(z);case"hsl":var le=H(z);return"hsl("+le[0]+", "+le[1]+"%, "+le[2]+"%)";case"hsla":var pe=H(z),Ee=se.alpha||Math.random();return"hsla("+pe[0]+", "+pe[1]+"%, "+pe[2]+"%, "+Ee+")";case"rgbArray":return q(z);case"rgb":var de=q(z);return"rgb("+de.join(", ")+")";case"rgba":var ve=q(z),Ee=se.alpha||Math.random();return"rgba("+ve.join(", ")+", "+Ee+")";default:return P(z)}}function m(z,se){for(var le=x(z).lowerBounds,pe=0;pe<le.length-1;pe++){var de=le[pe][0],ve=le[pe][1],Ee=le[pe+1][0],Re=le[pe+1][1];if(se>=de&&se<=Ee){var je=(Re-ve)/(Ee-de),Ie=ve-je*de;return je*se+Ie}}return 0}function y(z){if(typeof parseInt(z)=="number"){var se=parseInt(z);if(se<360&&se>0)return[se,se]}if(typeof z=="string"){if(i[z]){var le=i[z];if(le.hueRange)return le.hueRange}else if(z.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var pe=V(z)[0];return[pe,pe]}}return[0,360]}function M(z){return x(z).saturationRange}function x(z){z>=334&&z<=360&&(z-=360);for(var se in i){var le=i[se];if(le.hueRange&&z>=le.hueRange[0]&&z<=le.hueRange[1])return i[se]}return"Color not found"}function T(z){if(t===null){var se=.618033988749895,le=Math.random();return le+=se,le%=1,Math.floor(z[0]+le*(z[1]+1-z[0]))}else{var pe=z[1]||1,de=z[0]||0;t=(t*9301+49297)%233280;var ve=t/233280;return Math.floor(de+ve*(pe-de))}}function P(z){var se=q(z);function le(de){var ve=de.toString(16);return ve.length==1?"0"+ve:ve}var pe="#"+le(se[0])+le(se[1])+le(se[2]);return pe}function F(z,se,le){var pe=le[0][0],de=le[le.length-1][0],ve=le[le.length-1][1],Ee=le[0][1];i[z]={hueRange:se,lowerBounds:le,saturationRange:[pe,de],brightnessRange:[ve,Ee]}}function j(){F("monochrome",null,[[0,0],[100,0]]),F("red",[-26,18],[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]),F("orange",[18,46],[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]),F("yellow",[46,62],[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]),F("green",[62,178],[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]),F("blue",[178,257],[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]),F("purple",[257,282],[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]),F("pink",[282,334],[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]])}function q(z){var se=z[0];se===0&&(se=1),se===360&&(se=359),se=se/360;var le=z[1]/100,pe=z[2]/100,de=Math.floor(se*6),ve=se*6-de,Ee=pe*(1-le),Re=pe*(1-ve*le),je=pe*(1-(1-ve)*le),Ie=256,qe=256,tt=256;switch(de){case 0:Ie=pe,qe=je,tt=Ee;break;case 1:Ie=Re,qe=pe,tt=Ee;break;case 2:Ie=Ee,qe=pe,tt=je;break;case 3:Ie=Ee,qe=Re,tt=pe;break;case 4:Ie=je,qe=Ee,tt=pe;break;case 5:Ie=pe,qe=Ee,tt=Re;break}var At=[Math.floor(Ie*255),Math.floor(qe*255),Math.floor(tt*255)];return At}function V(z){z=z.replace(/^#/,""),z=z.length===3?z.replace(/(.)/g,"$1$1"):z;var se=parseInt(z.substr(0,2),16)/255,le=parseInt(z.substr(2,2),16)/255,pe=parseInt(z.substr(4,2),16)/255,de=Math.max(se,le,pe),ve=de-Math.min(se,le,pe),Ee=de?ve/de:0;switch(de){case se:return[60*((le-pe)/ve%6)||0,Ee,de];case le:return[60*((pe-se)/ve+2)||0,Ee,de];case pe:return[60*((se-le)/ve+4)||0,Ee,de]}}function H(z){var se=z[0],le=z[1]/100,pe=z[2]/100,de=(2-le)*pe;return[se,Math.round(le*pe/(de<1?de:2-de)*1e4)/100,de/2*100]}function Q(z){for(var se=0,le=0;le!==z.length&&!(se>=Number.MAX_SAFE_INTEGER);le++)se+=z.charCodeAt(le);return se}function Y(z){if(isNaN(z)){if(typeof z=="string"){if(i[z]){var le=i[z];if(le.hueRange)return le.hueRange}else if(z.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var pe=V(z)[0];return x(pe).hueRange}}}else{var se=parseInt(z);if(se<360&&se>0)return x(z).hueRange}return[0,360]}return o})})(z2,z2.exports)),z2.exports}var bfe=vfe();const Cfe=eu(bfe);function _fe(n,e){let t="bright",i;return/water|ocean|lake|sea|river/.test(n)&&(i="blue"),/state|country|place/.test(n)&&(i="pink"),/road|highway|transport|streets/.test(n)&&(i="orange"),/contour|building|earth/.test(n)&&(i="monochrome"),/building/.test(n)&&(t="dark"),/earth/.test(n)&&(t="light"),/contour|landuse/.test(n)&&(i="yellow"),/wood|forest|park|landcover|land|natural/.test(n)&&(i="green"),`rgba(${Cfe({luminosity:t,hue:i,seed:n,format:"rgbArray"}).join(", ")}, ${e||"1"})`}const WX={brightColor:_fe};function xfe(n){return Io({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M0 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v2h2a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2v-2H2a2 2 0 0 1-2-2zm2-1a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1z"},child:[]}]})(n)}function Mfe(n){return Io({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M6.95.435c.58-.58 1.52-.58 2.1 0l6.515 6.516c.58.58.58 1.519 0 2.098L9.05 15.565c-.58.58-1.519.58-2.098 0L.435 9.05a1.48 1.48 0 0 1 0-2.098z"},child:[]}]})(n)}function wfe(n){return Io({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8M8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0m0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13m8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5M3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8m10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0m-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0m9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707M4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708"},child:[]}]})(n)}function Sfe(n){return Io({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M9.4 16.6 4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0 4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"},child:[]}]})(n)}function Hb(n){return Io({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"},child:[]}]})(n)}function Efe(n){return Io({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 19.59V8l-6-6H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c.45 0 .85-.15 1.19-.4l-4.43-4.43c-.8.52-1.74.83-2.76.83-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5c0 1.02-.31 1.96-.83 2.75L20 19.59zM9 13c0 1.66 1.34 3 3 3s3-1.34 3-3-1.34-3-3-3-3 1.34-3 3z"},child:[]}]})(n)}function Ofe(n){return Io({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11 18h2v-2h-2v2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4z"},child:[]}]})(n)}function Bfe(n){return Io({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M14.59 8 12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41 14.59 8zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"},child:[]}]})(n)}function Ife(n){return Io({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M11 7h2v2h-2V7zm0 4h2v6h-2v-6zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"},child:[]}]})(n)}function kfe(n){return Io({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zm6.93 6h-2.95a15.65 15.65 0 0 0-1.38-3.56A8.03 8.03 0 0 1 18.92 8zM12 4.04c.83 1.2 1.48 2.53 1.91 3.96h-3.82c.43-1.43 1.08-2.76 1.91-3.96zM4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2 0 .68.06 1.34.14 2H4.26zm.82 2h2.95c.32 1.25.78 2.45 1.38 3.56A7.987 7.987 0 0 1 5.08 16zm2.95-8H5.08a7.987 7.987 0 0 1 4.33-3.56A15.65 15.65 0 0 0 8.03 8zM12 19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 1.43-1.08 2.76-1.91 3.96zM14.34 14H9.66c-.09-.66-.16-1.32-.16-2 0-.68.07-1.35.16-2h4.68c.09.65.16 1.32.16 2 0 .68-.07 1.34-.16 2zm.25 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95a8.03 8.03 0 0 1-4.33 3.56zM16.36 14c.08-.66.14-1.32.14-2 0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2h-3.38z"},child:[]}]})(n)}function Tfe(n){return Io({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 4H5a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h4v-2H5V8h14v10h-4v2h4c1.1 0 2-.9 2-2V6a2 2 0 0 0-2-2zm-7 6-4 4h3v6h2v-6h3l-4-4z"},child:[]}]})(n)}function Rfe(n){return Io({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58a.49.49 0 0 0 .12-.61l-1.92-3.32a.488.488 0 0 0-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54a.484.484 0 0 0-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58a.49.49 0 0 0-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"},child:[]}]})(n)}function Dfe(n){return Io({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0zm0 0h24v24H0zm0 0h24v24H0zm0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46A11.804 11.804 0 0 0 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"},child:[]}]})(n)}function Pfe(n){return Io({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"},child:[]}]})(n)}function QX(n){return Io({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"},child:[]}]})(n)}function Ufe(n){return Io({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"},child:[]}]})(n)}function w9(n){return Io({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"},child:[]}]})(n)}function Kfe(n){return Io({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z"},child:[]}]})(n)}function Lfe(n){return Io({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"circle",attr:{cx:"7.2",cy:"14.4",r:"3.2"},child:[]},{tag:"circle",attr:{cx:"14.8",cy:"18",r:"2"},child:[]},{tag:"circle",attr:{cx:"15.2",cy:"8.8",r:"4.8"},child:[]}]})(n)}function ez(n){return Io({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M18 4H6v2l6.5 6L6 18v2h12v-3h-7l5-5-5-5h7z"},child:[]}]})(n)}function Ffe(n){return Io({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"},child:[]}]})(n)}function tz(n){return Io({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z"},child:[]}]})(n)}function zfe(n){return Io({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2z"},child:[]}]})(n)}function jfe(n){return Io({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"},child:[]}]})(n)}function Nfe(n){return Io({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m11.99 18.54-7.37-5.73L3 14.07l9 7 9-7-1.63-1.27-7.38 5.74zM12 16l7.36-5.73L21 9l-9-7-9 7 1.63 1.27L12 16z"},child:[]}]})(n)}function Gfe(n){return Io({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C8.13 2 5 5.13 5 9c0 1.74.5 3.37 1.41 4.84.95 1.54 2.2 2.86 3.16 4.4.47.75.81 1.45 1.17 2.26.26.55.47 1.5 1.26 1.5s1-.95 1.25-1.5c.37-.81.7-1.51 1.17-2.26.96-1.53 2.21-2.85 3.16-4.4C18.5 12.37 19 10.74 19 9c0-3.87-3.13-7-7-7zm0 9.75a2.5 2.5 0 0 1 0-5 2.5 2.5 0 0 1 0 5z"},child:[]}]})(n)}function Wfe(n){return Io({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m20.5 3-.16.03L15 5.1 9 3 3.36 4.9c-.21.07-.36.25-.36.48V20.5c0 .28.22.5.5.5l.16-.03L9 18.9l6 2.1 5.64-1.9c.21-.07.36-.25.36-.48V3.5c0-.28-.22-.5-.5-.5zM15 19l-6-2.11V5l6 2.11V19z"},child:[]}]})(n)}function qX(n){return Io({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m7 10 5 5 5-5z"},child:[]}]})(n)}function YX(n){return Io({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m7 14 5-5 5 5z"},child:[]}]})(n)}function Qfe(n){return Io({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"},child:[]}]})(n)}function qfe(n){return Io({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"},child:[]}]})(n)}function Yfe(n){return Io({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"19",r:"2"},child:[]},{tag:"path",attr:{d:"M10 3h4v12h-4z"},child:[]}]})(n)}function $fe(n){return Io({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"},child:[]}]})(n)}function Vfe(n){return Io({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"m344 280 88-88m-200 24 64 64M80 320l104-104"},child:[]},{tag:"circle",attr:{cx:"456",cy:"168",r:"24",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"},child:[]},{tag:"circle",attr:{cx:"320",cy:"304",r:"24",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"},child:[]},{tag:"circle",attr:{cx:"208",cy:"192",r:"24",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"},child:[]},{tag:"circle",attr:{cx:"56",cy:"344",r:"24",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"},child:[]}]})(n)}function Hfe(n){return Io({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M467.3 168.1c-1.8 0-3.5.3-5.1 1l-177.6 92.1h-.1c-7.6 4.7-12.5 12.5-12.5 21.4v185.9c0 6.4 5.6 11.5 12.7 11.5 2.2 0 4.3-.5 6.1-1.4.2-.1.4-.2.5-.3L466 385.6l.3-.1c8.2-4.5 13.7-12.7 13.7-22.1V179.6c0-6.4-5.7-11.5-12.7-11.5zM454.3 118.5L272.6 36.8S261.9 32 256 32c-5.9 0-16.5 4.8-16.5 4.8L57.6 118.5s-8 3.3-8 9.5c0 6.6 8.3 11.5 8.3 11.5l185.5 97.8c3.8 1.7 8.1 2.6 12.6 2.6 4.6 0 8.9-1 12.7-2.7l185.4-97.9s7.5-4 7.5-11.5c.1-6.3-7.3-9.3-7.3-9.3zM227.5 261.2L49.8 169c-1.5-.6-3.3-1-5.1-1-7 0-12.7 5.1-12.7 11.5v183.8c0 9.4 5.5 17.6 13.7 22.1l.2.1 174.7 92.7c1.9 1.1 4.2 1.7 6.6 1.7 7 0 12.7-5.2 12.7-11.5V282.6c.1-8.9-4.9-16.8-12.4-21.4z"},child:[]}]})(n)}function Zfe(n){return Io({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M634.92 462.7l-288-448C341.03 5.54 330.89 0 320 0s-21.03 5.54-26.92 14.7l-288 448a32.001 32.001 0 0 0-1.17 32.64A32.004 32.004 0 0 0 32 512h576c11.71 0 22.48-6.39 28.09-16.67a31.983 31.983 0 0 0-1.17-32.63zM320 91.18L405.39 224H320l-64 64-38.06-38.06L320 91.18z"},child:[]}]})(n)}function da(){var n="/home/runner/work/maputnik/maputnik/src/components/IconLayer.tsx",e="0b6460c942a48f834d2809c818afa5c72625023a",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/IconLayer.tsx",statementMap:{0:{start:{line:7,column:18},end:{line:33,column:1}},1:{start:{line:8,column:20},end:{line:8,column:42}},2:{start:{line:9,column:2},end:{line:32,column:3}},3:{start:{line:11,column:6},end:{line:11,column:61}},4:{start:{line:13,column:6},end:{line:13,column:60}},5:{start:{line:15,column:6},end:{line:15,column:62}},6:{start:{line:17,column:6},end:{line:17,column:63}},7:{start:{line:19,column:6},end:{line:19,column:66}},8:{start:{line:21,column:6},end:{line:21,column:66}},9:{start:{line:23,column:6},end:{line:23,column:59}},10:{start:{line:25,column:6},end:{line:25,column:71}},11:{start:{line:27,column:6},end:{line:27,column:66}},12:{start:{line:29,column:6},end:{line:29,column:61}},13:{start:{line:31,column:6},end:{line:31,column:67}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:18},end:{line:7,column:19}},loc:{start:{line:7,column:29},end:{line:33,column:1}},line:7}},branchMap:{0:{loc:{start:{line:9,column:2},end:{line:32,column:3}},type:"switch",locations:[{start:{line:10,column:4},end:{line:11,column:61}},{start:{line:12,column:4},end:{line:13,column:60}},{start:{line:14,column:4},end:{line:15,column:62}},{start:{line:16,column:4},end:{line:17,column:63}},{start:{line:18,column:4},end:{line:19,column:66}},{start:{line:20,column:4},end:{line:21,column:66}},{start:{line:22,column:4},end:{line:23,column:59}},{start:{line:24,column:4},end:{line:25,column:71}},{start:{line:26,column:4},end:{line:27,column:66}},{start:{line:28,column:4},end:{line:29,column:61}},{start:{line:30,column:4},end:{line:31,column:67}}],line:9}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0},f:{0:0},b:{0:[0,0,0,0,0,0,0,0,0,0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/IconLayer.tsx"],names:[],mappings:"AAkBkC;AAflC,SAAS,QAAQ,eAAe,iBAAiB;AACjD,SAAS,eAAe,UAAU,eAAe,SAAS,sBAAsB;AAChF,SAAS,0BAA0B;AACnC,SAAS,gBAAgB;AACzB,SAAS,kBAAkB;AAQ3B,MAAM,YAAsC,CAAC,UAAU;AACrD,QAAM,YAAY,EAAE,OAAO,MAAM,MAAM;AACvC,UAAO,MAAM,MAAM;AAAA,IACjB,KAAK;AAAkB,aAAO,oBAAC,YAAU,GAAG,WAAW;AAAA,IACvD,KAAK;AAAU,aAAO,oBAAC,WAAS,GAAG,WAAW;AAAA,IAC9C,KAAK;AAAa,aAAO,oBAAC,aAAW,GAAG,WAAW;AAAA,IACnD,KAAK;AAAgB,aAAO,oBAAC,cAAY,GAAG,WAAW;AAAA,IACvD,KAAK;AAAW,aAAO,oBAAC,iBAAe,GAAG,WAAW;AAAA,IACrD,KAAK;AAAQ,aAAO,oBAAC,iBAAe,GAAG,WAAW;AAAA,IAClD,KAAK;AAAc,aAAO,oBAAC,UAAQ,GAAG,WAAW;AAAA,IACjD,KAAK;AAAQ,aAAO,oBAAC,sBAAoB,GAAG,WAAW;AAAA,IACvD,KAAK;AAAU,aAAO,oBAAC,iBAAe,GAAG,WAAW;AAAA,IACpD,KAAK;AAAU,aAAO,oBAAC,YAAU,GAAG,WAAW;AAAA,IAC/C;AAAS,aAAO,oBAAC,kBAAgB,GAAG,WAAW;AAAA,EACjD;AACF;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"0b6460c942a48f834d2809c818afa5c72625023a"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return da=function(){return s},s}da();da().s[0]++;const $X=n=>{da().f[0]++;const e=(da().s[1]++,{style:n.style});switch(da().s[2]++,n.type){case"fill-extrusion":return da().b[0][0]++,da().s[3]++,ie.jsx(Hfe,{...e});case"raster":return da().b[0][1]++,da().s[4]++,ie.jsx(jfe,{...e});case"hillshade":return da().b[0][2]++,da().s[5]++,ie.jsx(wfe,{...e});case"color-relief":return da().b[0][3]++,da().s[6]++,ie.jsx(Zfe,{...e});case"heatmap":return da().b[0][4]++,da().s[7]++,ie.jsx(Lfe,{...e});case"fill":return da().b[0][5]++,da().s[8]++,ie.jsx(Mfe,{...e});case"background":return da().b[0][6]++,da().s[9]++,ie.jsx(xfe,{...e});case"line":return da().b[0][7]++,da().s[10]++,ie.jsx(Vfe,{...e});case"symbol":return da().b[0][8]++,da().s[11]++,ie.jsx(Gfe,{...e});case"circle":return da().b[0][9]++,da().s[12]++,ie.jsx(zfe,{...e});default:return da().b[0][10]++,da().s[13]++,ie.jsx(Yfe,{...e})}};function Mi(){var n="/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlLayerPopup.tsx",e="6d83428b3c695d7740365dc3cc3e42bdf4d49028",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlLayerPopup.tsx",statementMap:{0:{start:{line:5,column:18},end:{line:5,column:20}},1:{start:{line:6,column:27},end:{line:6,column:29}},2:{start:{line:7,column:2},end:{line:18,column:5}},3:{start:{line:8,column:22},end:{line:8,column:51}},4:{start:{line:9,column:4},end:{line:17,column:5}},5:{start:{line:10,column:6},end:{line:10,column:43}},6:{start:{line:11,column:28},end:{line:11,column:91}},7:{start:{line:11,column:59},end:{line:11,column:90}},8:{start:{line:12,column:6},end:{line:12,column:65}},9:{start:{line:14,column:6},end:{line:14,column:52}},10:{start:{line:15,column:6},end:{line:15,column:39}},11:{start:{line:16,column:6},end:{line:16,column:45}},12:{start:{line:19,column:2},end:{line:19,column:17}},13:{start:{line:23,column:4},end:{line:25,column:5}},14:{start:{line:24,column:6},end:{line:24,column:13}},15:{start:{line:26,column:4},end:{line:44,column:5}},16:{start:{line:27,column:25},end:{line:27,column:44}},17:{start:{line:28,column:6},end:{line:30,column:7}},18:{start:{line:29,column:8},end:{line:29,column:48}},19:{start:{line:31,column:6},end:{line:33,column:7}},20:{start:{line:32,column:8},end:{line:32,column:48}},21:{start:{line:34,column:6},end:{line:36,column:7}},22:{start:{line:35,column:8},end:{line:35,column:48}},23:{start:{line:37,column:6},end:{line:39,column:7}},24:{start:{line:38,column:8},end:{line:38,column:58}},25:{start:{line:40,column:6},end:{line:40,column:21}},26:{start:{line:42,column:6},end:{line:42,column:63}},27:{start:{line:43,column:6},end:{line:43,column:21}},28:{start:{line:47,column:20},end:{line:47,column:67}},29:{start:{line:48,column:18},end:{line:93,column:6}},30:{start:{line:49,column:21},end:{line:88,column:8}},31:{start:{line:50,column:29},end:{line:50,column:76}},32:{start:{line:51,column:8},end:{line:87,column:10}},33:{start:{line:68,column:20},end:{line:68,column:63}},34:{start:{line:89,column:6},end:{line:92,column:26}},35:{start:{line:94,column:4},end:{line:94,column:152}}},fnMap:{0:{name:"groupFeaturesBySourceLayer",decl:{start:{line:4,column:9},end:{line:4,column:35}},loc:{start:{line:4,column:46},end:{line:20,column:1}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:7,column:19},end:{line:7,column:20}},loc:{start:{line:7,column:32},end:{line:18,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:11,column:52},end:{line:11,column:53}},loc:{start:{line:11,column:59},end:{line:11,column:90}},line:11},3:{name:"(anonymous_3)",decl:{start:{line:22,column:2},end:{line:22,column:3}},loc:{start:{line:22,column:35},end:{line:45,column:3}},line:22},4:{name:"(anonymous_4)",decl:{start:{line:46,column:2},end:{line:46,column:3}},loc:{start:{line:46,column:11},end:{line:95,column:3}},line:46},5:{name:"(anonymous_5)",decl:{start:{line:48,column:43},end:{line:48,column:44}},loc:{start:{line:48,column:62},end:{line:93,column:5}},line:48},6:{name:"(anonymous_6)",decl:{start:{line:49,column:48},end:{line:49,column:49}},loc:{start:{line:49,column:66},end:{line:88,column:7}},line:49},7:{name:"(anonymous_7)",decl:{start:{line:67,column:27},end:{line:67,column:28}},loc:{start:{line:67,column:33},end:{line:69,column:19}},line:67}},branchMap:{0:{loc:{start:{line:9,column:4},end:{line:17,column:5}},type:"if",locations:[{start:{line:9,column:4},end:{line:17,column:5}},{start:{line:13,column:11},end:{line:17,column:5}}],line:9},1:{loc:{start:{line:14,column:27},end:{line:14,column:51}},type:"binary-expr",locations:[{start:{line:14,column:27},end:{line:14,column:45}},{start:{line:14,column:49},end:{line:14,column:51}}],line:14},2:{loc:{start:{line:23,column:4},end:{line:25,column:5}},type:"if",locations:[{start:{line:23,column:4},end:{line:25,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:23},3:{loc:{start:{line:28,column:6},end:{line:30,column:7}},type:"if",locations:[{start:{line:28,column:6},end:{line:30,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:28},4:{loc:{start:{line:28,column:10},end:{line:28,column:64}},type:"binary-expr",locations:[{start:{line:28,column:10},end:{line:28,column:36}},{start:{line:28,column:40},end:{line:28,column:64}}],line:28},5:{loc:{start:{line:31,column:6},end:{line:33,column:7}},type:"if",locations:[{start:{line:31,column:6},end:{line:33,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:31},6:{loc:{start:{line:31,column:10},end:{line:31,column:64}},type:"binary-expr",locations:[{start:{line:31,column:10},end:{line:31,column:36}},{start:{line:31,column:40},end:{line:31,column:64}}],line:31},7:{loc:{start:{line:34,column:6},end:{line:36,column:7}},type:"if",locations:[{start:{line:34,column:6},end:{line:36,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:34},8:{loc:{start:{line:34,column:10},end:{line:34,column:64}},type:"binary-expr",locations:[{start:{line:34,column:10},end:{line:34,column:36}},{start:{line:34,column:40},end:{line:34,column:64}}],line:34},9:{loc:{start:{line:37,column:6},end:{line:39,column:7}},type:"if",locations:[{start:{line:37,column:6},end:{line:39,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},10:{loc:{start:{line:37,column:10},end:{line:37,column:84}},type:"binary-expr",locations:[{start:{line:37,column:10},end:{line:37,column:46}},{start:{line:37,column:50},end:{line:37,column:84}}],line:37},11:{loc:{start:{line:71,column:20},end:{line:75,column:24}},type:"binary-expr",locations:[{start:{line:71,column:20},end:{line:71,column:38}},{start:{line:71,column:58},end:{line:75,column:24}}],line:71},12:{loc:{start:{line:77,column:20},end:{line:80,column:24}},type:"binary-expr",locations:[{start:{line:77,column:20},end:{line:77,column:35}},{start:{line:77,column:55},end:{line:80,column:24}}],line:77}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlLayerPopup.tsx"],names:[],mappings:"AA8EU,cAkBsB,YAlBtB;AA9EV,OAAO,WAAW;AAClB,OAAO,eAAe;AAGtB,SAAS,2BAA2B,UAA4B;AAC9D,QAAM,UAA6C,CAAC;AAEpD,QAAM,mBAA4C,CAAC;AAEnD,WAAS,QAAQ,aAAW;AAC1B,UAAM,YAAY,QAAQ,MAAM,cAAc;AAC9C,QAAG,OAAO,UAAU,eAAe,KAAK,kBAAkB,QAAQ,MAAM,EAAE,GAAG;AAC3E,uBAAiB,QAAQ,MAAM,EAAE;AAEjC,YAAM,gBAAgB,QAAQ,SAAS,EAAE,KAAK,CAAC,MAAsB,EAAE,MAAM,OAAO,QAAQ,MAAM,EAAE;AAEpG,oBAAe,UAAU,iBAAiB,QAAQ,MAAM,EAAE;AAAA,IAC5D,OAAO;AACL,cAAQ,SAAS,IAAI,QAAQ,SAAS,KAAK,CAAC;AAC5C,cAAQ,SAAS,EAAE,KAAK,OAAO;AAE/B,uBAAiB,QAAQ,MAAM,EAAE,IAAI;AAAA,IACvC;AAAA,EACF,CAAC;AAED,SAAO;AACT;AAQA,MAAM,0BAA0B,MAAM,UAAkC;AAAA,EACtE,iBAAiB,SAAyB,OAAgB;AAExD,QAAI,CAAC,QAAQ,MAAM,OAAO;AACxB;AAAA,IACF;AAEA,QAAI;AACF,YAAM,aAAa,QAAQ,MAAM;AAEjC,UAAG,gBAAgB,cAAc,WAAW,YAAY,GAAG;AACzD,eAAO,OAAO,WAAW,YAAY,CAAC;AAAA,MACxC;AACA,UAAI,gBAAgB,cAAc,WAAW,YAAY,GAAG;AAC1D,eAAO,OAAO,WAAW,YAAY,CAAC;AAAA,MACxC;AACA,UAAI,gBAAgB,cAAc,WAAW,YAAY,GAAG;AAC1D,eAAO,OAAO,WAAW,YAAY,CAAC;AAAA,MACxC;AACA,UAAI,0BAA0B,cAAc,WAAW,sBAAsB,GAAG;AAC9E,eAAO,OAAO,WAAW,sBAAsB,CAAC;AAAA,MAClD;AAEA,aAAO;AAAA,IACT,SAGO,KAAK;AACV,cAAQ,KAAK,uCAAuC,GAAG;AACvD,aAAO;AAAA,IACT;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,UAAU,2BAA2B,KAAK,MAAM,QAAQ;AAE9D,UAAM,QAAQ,OAAO,KAAK,OAAO,EAAE,IAAI,mBAAiB;AACtD,YAAM,SAAS,QAAQ,aAAa,EAAE,IAAI,CAAC,SAAyB,QAAgB;AAClF,cAAM,eAAe,KAAK,iBAAiB,SAAS,KAAK,MAAM,IAAI;AAEnE,eAAO;AAAA,UAAC;AAAA;AAAA,YAEN,WAAU;AAAA,YAEV;AAAA;AAAA,gBAAC;AAAA;AAAA,kBACC,WAAU;AAAA,kBACV,OAAO,EAAC,YAAY,aAAY;AAAA;AAAA,cACjC;AAAA,cACD;AAAA,gBAAC;AAAA;AAAA,kBACC,WAAU;AAAA,kBACV,SAAS,MAAM;AACb,yBAAK,MAAM,cAAc,QAAQ,MAAM,EAAE;AAAA,kBAC3C;AAAA,kBAEC;AAAA,4BAAQ,MAAM,QACb,oBAAC,aAAU,MAAM,QAAQ,MAAM,MAAM,OAAO;AAAA,sBAC1C,OAAO;AAAA,sBACP,QAAQ;AAAA,sBACR,cAAc;AAAA,oBAChB,GAAE;AAAA,oBAEH,QAAQ,MAAM;AAAA,oBACd,QAAQ,WAAW,qBAAC,UAAK;AAAA;AAAA,sBAAI,QAAQ;AAAA,uBAAQ;AAAA;AAAA;AAAA,cAChD;AAAA;AAAA;AAAA,UAtBK;AAAA,QAuBP;AAAA,MACF,CAAC;AACD,aAAO,qBAAC,SACN;AAAA,4BAAC,SAAI,WAAU,2BAA2B,yBAAc;AAAA,QACvD;AAAA,WAFc,aAGjB;AAAA,IACF,CAAC;AAED,WAAO,oBAAC,SAAI,WAAU,gCAA+B,eAAY,uBAAsB,KAAI,OACxF,iBACH;AAAA,EACF;AACF;AAGA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"6d83428b3c695d7740365dc3cc3e42bdf4d49028"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Mi=function(){return s},s}Mi();function Xfe(n){Mi().f[0]++;const e=(Mi().s[0]++,{}),t=(Mi().s[1]++,{});return Mi().s[2]++,n.forEach(i=>{Mi().f[1]++;const r=(Mi().s[3]++,i.layer["source-layer"]);if(Mi().s[4]++,Object.prototype.hasOwnProperty.call(t,i.layer.id)){Mi().b[0][0]++,Mi().s[5]++,t[i.layer.id]++;const o=(Mi().s[6]++,e[r].find(s=>(Mi().f[2]++,Mi().s[7]++,s.layer.id===i.layer.id)));Mi().s[8]++,o.counter=t[i.layer.id]}else Mi().b[0][1]++,Mi().s[9]++,e[r]=(Mi().b[1][0]++,e[r]||(Mi().b[1][1]++,[])),Mi().s[10]++,e[r].push(i),Mi().s[11]++,t[i.layer.id]=1}),Mi().s[12]++,e}class VX extends En.Component{_getFeatureColor(e,t){if(Mi().f[3]++,Mi().s[13]++,e.layer.paint)Mi().b[2][1]++;else{Mi().b[2][0]++,Mi().s[14]++;return}Mi().s[15]++;try{const i=(Mi().s[16]++,e.layer.paint);return Mi().s[17]++,Mi().b[4][0]++,"text-color"in i&&(Mi().b[4][1]++,i["text-color"])?(Mi().b[3][0]++,Mi().s[18]++,String(i["text-color"])):(Mi().b[3][1]++,Mi().s[19]++,Mi().b[6][0]++,"fill-color"in i&&(Mi().b[6][1]++,i["fill-color"])?(Mi().b[5][0]++,Mi().s[20]++,String(i["fill-color"])):(Mi().b[5][1]++,Mi().s[21]++,Mi().b[8][0]++,"line-color"in i&&(Mi().b[8][1]++,i["line-color"])?(Mi().b[7][0]++,Mi().s[22]++,String(i["line-color"])):(Mi().b[7][1]++,Mi().s[23]++,Mi().b[10][0]++,"fill-extrusion-color"in i&&(Mi().b[10][1]++,i["fill-extrusion-color"])?(Mi().b[9][0]++,Mi().s[24]++,String(i["fill-extrusion-color"])):(Mi().b[9][1]++,Mi().s[25]++,"black"))))}catch(i){return Mi().s[26]++,console.warn("Unable to get feature color, error:",i),Mi().s[27]++,"black"}}render(){Mi().f[4]++;const e=(Mi().s[28]++,Xfe(this.props.features)),t=(Mi().s[29]++,Object.keys(e).map(i=>{Mi().f[5]++;const r=(Mi().s[30]++,e[i].map((o,s)=>{Mi().f[6]++;const a=(Mi().s[31]++,this._getFeatureColor(o,this.props.zoom));return Mi().s[32]++,ie.jsxs("div",{className:"maputnik-popup-layer",children:[ie.jsx("div",{className:"maputnik-popup-layer__swatch",style:{background:a}}),ie.jsxs("label",{className:"maputnik-popup-layer__label",onClick:()=>{Mi().f[7]++,Mi().s[33]++,this.props.onLayerSelect(o.layer.id)},children:[(Mi().b[11][0]++,o.layer.type&&(Mi().b[11][1]++,ie.jsx($X,{type:o.layer.type,style:{width:14,height:14,paddingRight:3}}))),o.layer.id,(Mi().b[12][0]++,o.counter&&(Mi().b[12][1]++,ie.jsxs("span",{children:["  ",o.counter]})))]})]},s)}));return Mi().s[34]++,ie.jsxs("div",{children:[ie.jsx("div",{className:"maputnik-popup-layer-id",children:i}),r]},i)}));return Mi().s[35]++,ie.jsx("div",{className:"maputnik-feature-layer-popup","data-wd-key":"feature-layer-popup",dir:"ltr",children:t})}}function mr(){var n="/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlFeaturePropertyPopup.tsx",e="1e4c480681bcaba84c2c41960b73ded2066b54bc",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlFeaturePropertyPopup.tsx",statementMap:{0:{start:{line:4,column:2},end:{line:4,column:67}},1:{start:{line:4,column:54},end:{line:4,column:67}},2:{start:{line:5,column:2},end:{line:5,column:59}},3:{start:{line:5,column:29},end:{line:5,column:59}},4:{start:{line:6,column:2},end:{line:6,column:115}},5:{start:{line:6,column:91},end:{line:6,column:115}},6:{start:{line:7,column:2},end:{line:7,column:15}},7:{start:{line:10,column:2},end:{line:13,column:12}},8:{start:{line:16,column:2},end:{line:32,column:12}},9:{start:{line:29,column:23},end:{line:29,column:55}},10:{start:{line:30,column:6},end:{line:30,column:74}},11:{start:{line:35,column:25},end:{line:35,column:27}},12:{start:{line:36,column:2},end:{line:49,column:5}},13:{start:{line:37,column:25},end:{line:39,column:6}},14:{start:{line:38,column:6},end:{line:38,column:156}},15:{start:{line:40,column:4},end:{line:48,column:5}},16:{start:{line:41,column:6},end:{line:41,column:35}},17:{start:{line:43,column:6},end:{line:47,column:7}},18:{start:{line:44,column:8},end:{line:44,column:58}},19:{start:{line:46,column:8},end:{line:46,column:60}},20:{start:{line:50,column:2},end:{line:50,column:24}},21:{start:{line:54,column:21},end:{line:54,column:66}},22:{start:{line:55,column:4},end:{line:55,column:303}}},fnMap:{0:{name:"displayValue",decl:{start:{line:3,column:9},end:{line:3,column:21}},loc:{start:{line:3,column:29},end:{line:8,column:1}},line:3},1:{name:"renderKeyValueTableRow",decl:{start:{line:9,column:9},end:{line:9,column:31}},loc:{start:{line:9,column:44},end:{line:14,column:1}},line:9},2:{name:"renderFeature",decl:{start:{line:15,column:9},end:{line:15,column:22}},loc:{start:{line:15,column:37},end:{line:33,column:1}},line:15},3:{name:"(anonymous_3)",decl:{start:{line:28,column:40},end:{line:28,column:41}},loc:{start:{line:28,column:58},end:{line:31,column:5}},line:28},4:{name:"removeDuplicatedFeatures",decl:{start:{line:34,column:9},end:{line:34,column:33}},loc:{start:{line:34,column:44},end:{line:51,column:1}},line:34},5:{name:"(anonymous_5)",decl:{start:{line:36,column:19},end:{line:36,column:20}},loc:{start:{line:36,column:32},end:{line:49,column:3}},line:36},6:{name:"(anonymous_6)",decl:{start:{line:37,column:50},end:{line:37,column:51}},loc:{start:{line:37,column:64},end:{line:39,column:5}},line:37},7:{name:"(anonymous_7)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:11},end:{line:56,column:3}},line:53}},branchMap:{0:{loc:{start:{line:4,column:2},end:{line:4,column:67}},type:"if",locations:[{start:{line:4,column:2},end:{line:4,column:67}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:4},1:{loc:{start:{line:4,column:6},end:{line:4,column:52}},type:"binary-expr",locations:[{start:{line:4,column:6},end:{line:4,column:34}},{start:{line:4,column:38},end:{line:4,column:52}}],line:4},2:{loc:{start:{line:5,column:2},end:{line:5,column:59}},type:"if",locations:[{start:{line:5,column:2},end:{line:5,column:59}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:5},3:{loc:{start:{line:6,column:2},end:{line:6,column:115}},type:"if",locations:[{start:{line:6,column:2},end:{line:6,column:115}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:6},4:{loc:{start:{line:6,column:6},end:{line:6,column:89}},type:"binary-expr",locations:[{start:{line:6,column:6},end:{line:6,column:31}},{start:{line:6,column:35},end:{line:6,column:60}},{start:{line:6,column:64},end:{line:6,column:89}}],line:6},5:{loc:{start:{line:21,column:6},end:{line:24,column:10}},type:"binary-expr",locations:[{start:{line:21,column:6},end:{line:21,column:32}},{start:{line:21,column:52},end:{line:24,column:10}}],line:21},6:{loc:{start:{line:38,column:13},end:{line:38,column:155}},type:"binary-expr",locations:[{start:{line:38,column:13},end:{line:38,column:77}},{start:{line:38,column:81},end:{line:38,column:155}}],line:38},7:{loc:{start:{line:40,column:4},end:{line:48,column:5}},type:"if",locations:[{start:{line:40,column:4},end:{line:48,column:5}},{start:{line:42,column:11},end:{line:48,column:5}}],line:40},8:{loc:{start:{line:43,column:6},end:{line:47,column:7}},type:"if",locations:[{start:{line:43,column:6},end:{line:47,column:7}},{start:{line:45,column:13},end:{line:47,column:7}}],line:43}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlFeaturePropertyPopup.tsx"],names:[],mappings:"AAkBS,SACL,KADK;AAlBT,OAAO,WAAW;AAQlB,SAAS,aAAa,OAAoD;AACxE,MAAI,OAAO,UAAU,eAAe,UAAU,KAAM,QAAO;AAC3D,MAAI,iBAAiB,KAAM,QAAO,MAAM,eAAe;AACvD,MAAI,OAAO,UAAU,YACb,OAAO,UAAU,YACjB,OAAO,UAAU,SAAU,QAAO,MAAM,SAAS;AACzD,SAAO;AACT;AAEA,SAAS,uBAAuB,KAAa,OAA2B;AACtE,SAAO,qBAAC,QACN;AAAA,wBAAC,QAAG,WAAU,6BAA6B,eAAI;AAAA,IAC/C,oBAAC,QAAG,WAAU,6BAA6B,iBAAM;AAAA,OAFnC,GAGhB;AACF;AAEA,SAAS,cAAc,SAAyB,KAAa;AAC3D,SAAO,qBAAC,MAAM,UAAN,EACN;AAAA,wBAAC,QACC,+BAAC,QAAG,SAAS,GAAG,WAAU,2BAA2B;AAAA,cAAQ,MAAM,QAAQ;AAAA,MAAE;AAAA,MAAG,QAAQ,MAAM,cAAc;AAAA,MAAG,QAAQ,sBAAsB,qBAAC,UAAK;AAAA;AAAA,QAAI,QAAQ;AAAA,SAAmB;AAAA,OAAQ,GAC5L;AAAA,IACC,uBAAuB,SAAS,QAAQ,SAAS,IAAI;AAAA,IACrD,uBAAuB,OAAO,aAAa,QAAQ,EAAE,CAAC;AAAA,IACtD,OAAO,KAAK,QAAQ,UAAU,EAAE,IAAI,kBAAgB;AACnD,YAAM,WAAW,QAAQ,WAAW,YAAY;AAChD,aAAO,uBAAuB,cAAc,aAAa,QAAQ,CAAC;AAAA,IACpE,CAAC;AAAA,OATyB,GAU5B;AACF;AAEA,SAAS,yBAAyB,UAA4B;AAC5D,QAAM,iBAAmC,CAAC;AAE1C,WAAS,QAAQ,aAAW;AAC1B,UAAM,eAAe,eAAe,UAAU,cAAY;AACxD,aAAO,QAAQ,MAAM,cAAc,MAAM,SAAS,MAAM,cAAc,KACjE,KAAK,UAAU,QAAQ,UAAU,MAAM,KAAK,UAAU,SAAS,UAAU;AAAA,IAChF,CAAC;AAED,QAAG,iBAAiB,IAAI;AACtB,qBAAe,KAAK,OAAO;AAAA,IAC7B,OAAO;AACL,UAAG,wBAAwB,eAAe,YAAY,GAAG;AACvD,uBAAe,YAAY,EAAE;AAAA,MAC/B,OAAO;AACL,uBAAe,YAAY,EAAE,qBAAqB;AAAA,MACpD;AAAA,IACF;AAAA,EACF,CAAC;AAED,SAAO;AACT;AAMA,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,SAAS;AACP,UAAM,WAAW,yBAAyB,KAAK,MAAM,QAAQ;AAC7D,WAAO,oBAAC,SAAI,WAAU,mCAAkC,KAAI,OAAM,eAAY,0BAC5E,8BAAC,WAAM,WAAU,wBACf,8BAAC,WACE,mBAAS,IAAI,aAAa,GAC7B,GACF,GACF;AAAA,EACF;AACF;AAGA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"1e4c480681bcaba84c2c41960b73ded2066b54bc"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return mr=function(){return s},s}mr();function nz(n){return mr().f[0]++,mr().s[0]++,mr().b[1][0]++,typeof n>"u"||(mr().b[1][1]++,n===null)?(mr().b[0][0]++,mr().s[1]++,n):(mr().b[0][1]++,mr().s[2]++,n instanceof Date?(mr().b[2][0]++,mr().s[3]++,n.toLocaleString()):(mr().b[2][1]++,mr().s[4]++,mr().b[4][0]++,typeof n=="object"||(mr().b[4][1]++,typeof n=="number")||(mr().b[4][2]++,typeof n=="string")?(mr().b[3][0]++,mr().s[5]++,n.toString()):(mr().b[3][1]++,mr().s[6]++,n)))}function wO(n,e){return mr().f[1]++,mr().s[7]++,ie.jsxs("tr",{children:[ie.jsx("td",{className:"maputnik-popup-table-cell",children:n}),ie.jsx("td",{className:"maputnik-popup-table-cell",children:e})]},n)}function Jfe(n,e){return mr().f[2]++,mr().s[8]++,ie.jsxs(En.Fragment,{children:[ie.jsx("tr",{children:ie.jsxs("td",{colSpan:2,className:"maputnik-popup-layer-id",children:[n.layer.source,": ",n.layer["source-layer"],(mr().b[5][0]++,n.inspectModeCounter&&(mr().b[5][1]++,ie.jsxs("span",{children:["  ",n.inspectModeCounter]})))]})}),wO("$type",n.geometry.type),wO("$id",nz(n.id)),Object.keys(n.properties).map(t=>{mr().f[3]++;const i=(mr().s[9]++,n.properties[t]);return mr().s[10]++,wO(t,nz(i))})]},e)}function epe(n){mr().f[4]++;const e=(mr().s[11]++,[]);return mr().s[12]++,n.forEach(t=>{mr().f[5]++;const i=(mr().s[13]++,e.findIndex(r=>(mr().f[6]++,mr().s[14]++,mr().b[6][0]++,t.layer["source-layer"]===r.layer["source-layer"]&&(mr().b[6][1]++,JSON.stringify(t.properties)===JSON.stringify(r.properties)))));mr().s[15]++,i===-1?(mr().b[7][0]++,mr().s[16]++,e.push(t)):(mr().b[7][1]++,mr().s[17]++,"inspectModeCounter"in e[i]?(mr().b[8][0]++,mr().s[18]++,e[i].inspectModeCounter++):(mr().b[8][1]++,mr().s[19]++,e[i].inspectModeCounter=2))}),mr().s[20]++,e}class tpe extends En.Component{render(){mr().f[7]++;const e=(mr().s[21]++,epe(this.props.features));return mr().s[22]++,ie.jsx("div",{className:"maputnik-feature-property-popup",dir:"ltr","data-wd-key":"feature-property-popup",children:ie.jsx("table",{className:"maputnik-popup-table",children:ie.jsx("tbody",{children:e.map(Jfe)})})})}}const A3={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},HX=Object.create(null);for(const n in A3)Object.hasOwn(A3,n)&&(HX[A3[n]]=n);const Sc={to:{},get:{}};Sc.get=function(n){const e=n.slice(0,3).toLowerCase();let t,i;switch(e){case"hsl":{t=Sc.get.hsl(n),i="hsl";break}case"hwb":{t=Sc.get.hwb(n),i="hwb";break}default:{t=Sc.get.rgb(n),i="rgb";break}}return t?{model:i,value:t}:null};Sc.get.rgb=function(n){if(!n)return null;const e=/^#([a-f\d]{3,4})$/i,t=/^#([a-f\d]{6})([a-f\d]{2})?$/i,i=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[\s,|/]\s*([+-]?[\d.]+)(%?)\s*)?\)$/,r=/^rgba?\(\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*(?:[\s,|/]\s*([+-]?[\d.]+)(%?)\s*)?\)$/,o=/^(\w+)$/;let s=[0,0,0,1],a,c,h;if(a=n.match(t)){for(h=a[2],a=a[1],c=0;c<3;c++){const m=c*2;s[c]=Number.parseInt(a.slice(m,m+2),16)}h&&(s[3]=Number.parseInt(h,16)/255)}else if(a=n.match(e)){for(a=a[1],h=a[3],c=0;c<3;c++)s[c]=Number.parseInt(a[c]+a[c],16);h&&(s[3]=Number.parseInt(h+h,16)/255)}else if(a=n.match(i)){for(c=0;c<3;c++)s[c]=Number.parseInt(a[c+1],10);a[4]&&(s[3]=a[5]?Number.parseFloat(a[4])*.01:Number.parseFloat(a[4]))}else if(a=n.match(r)){for(c=0;c<3;c++)s[c]=Math.round(Number.parseFloat(a[c+1])*2.55);a[4]&&(s[3]=a[5]?Number.parseFloat(a[4])*.01:Number.parseFloat(a[4]))}else return(a=n.match(o))?a[1]==="transparent"?[0,0,0,0]:Object.hasOwn(A3,a[1])?(s=A3[a[1]],s[3]=1,s):null:null;for(c=0;c<3;c++)s[c]=Yy(s[c],0,255);return s[3]=Yy(s[3],0,1),s};Sc.get.hsl=function(n){if(!n)return null;const e=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*(?:[,|/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,t=n.match(e);if(t){const i=Number.parseFloat(t[4]),r=(Number.parseFloat(t[1])%360+360)%360,o=Yy(Number.parseFloat(t[2]),0,100),s=Yy(Number.parseFloat(t[3]),0,100),a=Yy(Number.isNaN(i)?1:i,0,1);return[r,o,s,a]}return null};Sc.get.hwb=function(n){if(!n)return null;const e=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*[\s,]\s*([+-]?[\d.]+)%\s*[\s,]\s*([+-]?[\d.]+)%\s*(?:[\s,]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,t=n.match(e);if(t){const i=Number.parseFloat(t[4]),r=(Number.parseFloat(t[1])%360+360)%360,o=Yy(Number.parseFloat(t[2]),0,100),s=Yy(Number.parseFloat(t[3]),0,100),a=Yy(Number.isNaN(i)?1:i,0,1);return[r,o,s,a]}return null};Sc.to.hex=function(...n){return"#"+G5(n[0])+G5(n[1])+G5(n[2])+(n[3]<1?G5(Math.round(n[3]*255)):"")};Sc.to.rgb=function(...n){return n.length<4||n[3]===1?"rgb("+Math.round(n[0])+", "+Math.round(n[1])+", "+Math.round(n[2])+")":"rgba("+Math.round(n[0])+", "+Math.round(n[1])+", "+Math.round(n[2])+", "+n[3]+")"};Sc.to.rgb.percent=function(...n){const e=Math.round(n[0]/255*100),t=Math.round(n[1]/255*100),i=Math.round(n[2]/255*100);return n.length<4||n[3]===1?"rgb("+e+"%, "+t+"%, "+i+"%)":"rgba("+e+"%, "+t+"%, "+i+"%, "+n[3]+")"};Sc.to.hsl=function(...n){return n.length<4||n[3]===1?"hsl("+n[0]+", "+n[1]+"%, "+n[2]+"%)":"hsla("+n[0]+", "+n[1]+"%, "+n[2]+"%, "+n[3]+")"};Sc.to.hwb=function(...n){let e="";return n.length>=4&&n[3]!==1&&(e=", "+n[3]),"hwb("+n[0]+", "+n[1]+"%, "+n[2]+"%"+e+")"};Sc.to.keyword=function(...n){return HX[n.slice(0,3)]};function Yy(n,e,t){return Math.min(Math.max(e,n),t)}function G5(n){const e=Math.round(n).toString(16).toUpperCase();return e.length<2?"0"+e:e}const G3={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},ZX={};for(const n of Object.keys(G3))ZX[G3[n]]=n;const bi={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},oklab:{channels:3,labels:["okl","oka","okb"]},lch:{channels:3,labels:"lch"},oklch:{channels:3,labels:["okl","okc","okh"]},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}},r1=(6/29)**3;function F_(n){const e=n>.0031308?1.055*n**.4166666666666667-.055:n*12.92;return Math.min(Math.max(0,e),1)}function z_(n){return n>.04045?((n+.055)/1.055)**2.4:n/12.92}for(const n of Object.keys(bi)){if(!("channels"in bi[n]))throw new Error("missing channels property: "+n);if(!("labels"in bi[n]))throw new Error("missing channel labels property: "+n);if(bi[n].labels.length!==bi[n].channels)throw new Error("channel and label counts mismatch: "+n);const{channels:e,labels:t}=bi[n];delete bi[n].channels,delete bi[n].labels,Object.defineProperty(bi[n],"channels",{value:e}),Object.defineProperty(bi[n],"labels",{value:t})}bi.rgb.hsl=function(n){const e=n[0]/255,t=n[1]/255,i=n[2]/255,r=Math.min(e,t,i),o=Math.max(e,t,i),s=o-r;let a,c;switch(o){case r:{a=0;break}case e:{a=(t-i)/s;break}case t:{a=2+(i-e)/s;break}case i:{a=4+(e-t)/s;break}}a=Math.min(a*60,360),a<0&&(a+=360);const h=(r+o)/2;return o===r?c=0:h<=.5?c=s/(o+r):c=s/(2-o-r),[a,c*100,h*100]};bi.rgb.hsv=function(n){let e,t,i,r,o;const s=n[0]/255,a=n[1]/255,c=n[2]/255,h=Math.max(s,a,c),m=h-Math.min(s,a,c),y=function(M){return(h-M)/6/m+1/2};if(m===0)r=0,o=0;else{switch(o=m/h,e=y(s),t=y(a),i=y(c),h){case s:{r=i-t;break}case a:{r=1/3+e-i;break}case c:{r=2/3+t-e;break}}r<0?r+=1:r>1&&(r-=1)}return[r*360,o*100,h*100]};bi.rgb.hwb=function(n){const e=n[0],t=n[1];let i=n[2];const r=bi.rgb.hsl(n)[0],o=1/255*Math.min(e,Math.min(t,i));return i=1-1/255*Math.max(e,Math.max(t,i)),[r,o*100,i*100]};bi.rgb.oklab=function(n){const e=z_(n[0]/255),t=z_(n[1]/255),i=z_(n[2]/255),r=Math.cbrt(.4122214708*e+.5363325363*t+.0514459929*i),o=Math.cbrt(.2119034982*e+.6806995451*t+.1073969566*i),s=Math.cbrt(.0883024619*e+.2817188376*t+.6299787005*i),a=.2104542553*r+.793617785*o-.0040720468*s,c=1.9779984951*r-2.428592205*o+.4505937099*s,h=.0259040371*r+.7827717662*o-.808675766*s;return[a*100,c*100,h*100]};bi.rgb.cmyk=function(n){const e=n[0]/255,t=n[1]/255,i=n[2]/255,r=Math.min(1-e,1-t,1-i),o=(1-e-r)/(1-r)||0,s=(1-t-r)/(1-r)||0,a=(1-i-r)/(1-r)||0;return[o*100,s*100,a*100,r*100]};function npe(n,e){return(n[0]-e[0])**2+(n[1]-e[1])**2+(n[2]-e[2])**2}bi.rgb.keyword=function(n){const e=ZX[n];if(e)return e;let t=Number.POSITIVE_INFINITY,i;for(const r of Object.keys(G3)){const o=G3[r],s=npe(n,o);s<t&&(t=s,i=r)}return i};bi.keyword.rgb=function(n){return G3[n]};bi.rgb.xyz=function(n){const e=z_(n[0]/255),t=z_(n[1]/255),i=z_(n[2]/255),r=e*.4124564+t*.3575761+i*.1804375,o=e*.2126729+t*.7151522+i*.072175,s=e*.0193339+t*.119192+i*.9503041;return[r*100,o*100,s*100]};bi.rgb.lab=function(n){const e=bi.rgb.xyz(n);let t=e[0],i=e[1],r=e[2];t/=95.047,i/=100,r/=108.883,t=t>r1?t**(1/3):7.787*t+16/116,i=i>r1?i**(1/3):7.787*i+16/116,r=r>r1?r**(1/3):7.787*r+16/116;const o=116*i-16,s=500*(t-i),a=200*(i-r);return[o,s,a]};bi.hsl.rgb=function(n){const e=n[0]/360,t=n[1]/100,i=n[2]/100;let r,o;if(t===0)return o=i*255,[o,o,o];const s=i<.5?i*(1+t):i+t-i*t,a=2*i-s,c=[0,0,0];for(let h=0;h<3;h++)r=e+1/3*-(h-1),r<0&&r++,r>1&&r--,6*r<1?o=a+(s-a)*6*r:2*r<1?o=s:3*r<2?o=a+(s-a)*(2/3-r)*6:o=a,c[h]=o*255;return c};bi.hsl.hsv=function(n){const e=n[0];let t=n[1]/100,i=n[2]/100,r=t;const o=Math.max(i,.01);i*=2,t*=i<=1?i:2-i,r*=o<=1?o:2-o;const s=(i+t)/2,a=i===0?2*r/(o+r):2*t/(i+t);return[e,a*100,s*100]};bi.hsv.rgb=function(n){const e=n[0]/60,t=n[1]/100;let i=n[2]/100;const r=Math.floor(e)%6,o=e-Math.floor(e),s=255*i*(1-t),a=255*i*(1-t*o),c=255*i*(1-t*(1-o));switch(i*=255,r){case 0:return[i,c,s];case 1:return[a,i,s];case 2:return[s,i,c];case 3:return[s,a,i];case 4:return[c,s,i];case 5:return[i,s,a]}};bi.hsv.hsl=function(n){const e=n[0],t=n[1]/100,i=n[2]/100,r=Math.max(i,.01);let o,s;s=(2-t)*i;const a=(2-t)*r;return o=t*r,o/=a<=1?a:2-a,o=o||0,s/=2,[e,o*100,s*100]};bi.hwb.rgb=function(n){const e=n[0]/360;let t=n[1]/100,i=n[2]/100;const r=t+i;let o;r>1&&(t/=r,i/=r);const s=Math.floor(6*e),a=1-i;o=6*e-s,(s&1)!==0&&(o=1-o);const c=t+o*(a-t);let h,m,y;switch(s){default:case 6:case 0:{h=a,m=c,y=t;break}case 1:{h=c,m=a,y=t;break}case 2:{h=t,m=a,y=c;break}case 3:{h=t,m=c,y=a;break}case 4:{h=c,m=t,y=a;break}case 5:{h=a,m=t,y=c;break}}return[h*255,m*255,y*255]};bi.cmyk.rgb=function(n){const e=n[0]/100,t=n[1]/100,i=n[2]/100,r=n[3]/100,o=1-Math.min(1,e*(1-r)+r),s=1-Math.min(1,t*(1-r)+r),a=1-Math.min(1,i*(1-r)+r);return[o*255,s*255,a*255]};bi.xyz.rgb=function(n){const e=n[0]/100,t=n[1]/100,i=n[2]/100;let r,o,s;return r=e*3.2404542+t*-1.5371385+i*-.4985314,o=e*-.969266+t*1.8760108+i*.041556,s=e*.0556434+t*-.2040259+i*1.0572252,r=F_(r),o=F_(o),s=F_(s),[r*255,o*255,s*255]};bi.xyz.lab=function(n){let e=n[0],t=n[1],i=n[2];e/=95.047,t/=100,i/=108.883,e=e>r1?e**(1/3):7.787*e+16/116,t=t>r1?t**(1/3):7.787*t+16/116,i=i>r1?i**(1/3):7.787*i+16/116;const r=116*t-16,o=500*(e-t),s=200*(t-i);return[r,o,s]};bi.xyz.oklab=function(n){const e=n[0]/100,t=n[1]/100,i=n[2]/100,r=Math.cbrt(.8189330101*e+.3618667424*t-.1288597137*i),o=Math.cbrt(.0329845436*e+.9293118715*t+.0361456387*i),s=Math.cbrt(.0482003018*e+.2643662691*t+.633851707*i),a=.2104542553*r+.793617785*o-.0040720468*s,c=1.9779984951*r-2.428592205*o+.4505937099*s,h=.0259040371*r+.7827717662*o-.808675766*s;return[a*100,c*100,h*100]};bi.oklab.oklch=function(n){return bi.lab.lch(n)};bi.oklab.xyz=function(n){const e=n[0]/100,t=n[1]/100,i=n[2]/100,r=(.999999998*e+.396337792*t+.215803758*i)**3,o=(1.000000008*e-.105561342*t-.063854175*i)**3,s=(1.000000055*e-.089484182*t-1.291485538*i)**3,a=1.227013851*r-.55779998*o+.281256149*s,c=-.040580178*r+1.11225687*o-.071676679*s,h=-.076381285*r-.421481978*o+1.58616322*s;return[a*100,c*100,h*100]};bi.oklab.rgb=function(n){const e=n[0]/100,t=n[1]/100,i=n[2]/100,r=(e+.3963377774*t+.2158037573*i)**3,o=(e-.1055613458*t-.0638541728*i)**3,s=(e-.0894841775*t-1.291485548*i)**3,a=F_(4.0767416621*r-3.3077115913*o+.2309699292*s),c=F_(-1.2684380046*r+2.6097574011*o-.3413193965*s),h=F_(-.0041960863*r-.7034186147*o+1.707614701*s);return[a*255,c*255,h*255]};bi.oklch.oklab=function(n){return bi.lch.lab(n)};bi.lab.xyz=function(n){const e=n[0],t=n[1],i=n[2];let r,o,s;o=(e+16)/116,r=t/500+o,s=o-i/200;const a=o**3,c=r**3,h=s**3;return o=a>r1?a:(o-16/116)/7.787,r=c>r1?c:(r-16/116)/7.787,s=h>r1?h:(s-16/116)/7.787,r*=95.047,o*=100,s*=108.883,[r,o,s]};bi.lab.lch=function(n){const e=n[0],t=n[1],i=n[2];let r;r=Math.atan2(i,t)*360/2/Math.PI,r<0&&(r+=360);const s=Math.sqrt(t*t+i*i);return[e,s,r]};bi.lch.lab=function(n){const e=n[0],t=n[1],r=n[2]/360*2*Math.PI,o=t*Math.cos(r),s=t*Math.sin(r);return[e,o,s]};bi.rgb.ansi16=function(n,e=null){const[t,i,r]=n;let o=e===null?bi.rgb.hsv(n)[2]:e;if(o=Math.round(o/50),o===0)return 30;let s=30+(Math.round(r/255)<<2|Math.round(i/255)<<1|Math.round(t/255));return o===2&&(s+=60),s};bi.hsv.ansi16=function(n){return bi.rgb.ansi16(bi.hsv.rgb(n),n[2])};bi.rgb.ansi256=function(n){const e=n[0],t=n[1],i=n[2];return e>>4===t>>4&&t>>4===i>>4?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(t/255*5)+Math.round(i/255*5)};bi.ansi16.rgb=function(n){n=n[0];let e=n%10;if(e===0||e===7)return n>50&&(e+=3.5),e=e/10.5*255,[e,e,e];const t=(Math.trunc(n>50)+1)*.5,i=(e&1)*t*255,r=(e>>1&1)*t*255,o=(e>>2&1)*t*255;return[i,r,o]};bi.ansi256.rgb=function(n){if(n=n[0],n>=232){const o=(n-232)*10+8;return[o,o,o]}n-=16;let e;const t=Math.floor(n/36)/5*255,i=Math.floor((e=n%36)/6)/5*255,r=e%6/5*255;return[t,i,r]};bi.rgb.hex=function(n){const t=(((Math.round(n[0])&255)<<16)+((Math.round(n[1])&255)<<8)+(Math.round(n[2])&255)).toString(16).toUpperCase();return"000000".slice(t.length)+t};bi.hex.rgb=function(n){const e=n.toString(16).match(/[a-f\d]{6}|[a-f\d]{3}/i);if(!e)return[0,0,0];let t=e[0];e[0].length===3&&(t=[...t].map(a=>a+a).join(""));const i=Number.parseInt(t,16),r=i>>16&255,o=i>>8&255,s=i&255;return[r,o,s]};bi.rgb.hcg=function(n){const e=n[0]/255,t=n[1]/255,i=n[2]/255,r=Math.max(Math.max(e,t),i),o=Math.min(Math.min(e,t),i),s=r-o;let a;const c=s<1?o/(1-s):0;return s<=0?a=0:r===e?a=(t-i)/s%6:r===t?a=2+(i-e)/s:a=4+(e-t)/s,a/=6,a%=1,[a*360,s*100,c*100]};bi.hsl.hcg=function(n){const e=n[1]/100,t=n[2]/100,i=t<.5?2*e*t:2*e*(1-t);let r=0;return i<1&&(r=(t-.5*i)/(1-i)),[n[0],i*100,r*100]};bi.hsv.hcg=function(n){const e=n[1]/100,t=n[2]/100,i=e*t;let r=0;return i<1&&(r=(t-i)/(1-i)),[n[0],i*100,r*100]};bi.hcg.rgb=function(n){const e=n[0]/360,t=n[1]/100,i=n[2]/100;if(t===0)return[i*255,i*255,i*255];const r=[0,0,0],o=e%1*6,s=o%1,a=1-s;let c=0;switch(Math.floor(o)){case 0:{r[0]=1,r[1]=s,r[2]=0;break}case 1:{r[0]=a,r[1]=1,r[2]=0;break}case 2:{r[0]=0,r[1]=1,r[2]=s;break}case 3:{r[0]=0,r[1]=a,r[2]=1;break}case 4:{r[0]=s,r[1]=0,r[2]=1;break}default:r[0]=1,r[1]=0,r[2]=a}return c=(1-t)*i,[(t*r[0]+c)*255,(t*r[1]+c)*255,(t*r[2]+c)*255]};bi.hcg.hsv=function(n){const e=n[1]/100,t=n[2]/100,i=e+t*(1-e);let r=0;return i>0&&(r=e/i),[n[0],r*100,i*100]};bi.hcg.hsl=function(n){const e=n[1]/100,i=n[2]/100*(1-e)+.5*e;let r=0;return i>0&&i<.5?r=e/(2*i):i>=.5&&i<1&&(r=e/(2*(1-i))),[n[0],r*100,i*100]};bi.hcg.hwb=function(n){const e=n[1]/100,t=n[2]/100,i=e+t*(1-e);return[n[0],(i-e)*100,(1-i)*100]};bi.hwb.hcg=function(n){const e=n[1]/100,i=1-n[2]/100,r=i-e;let o=0;return r<1&&(o=(i-r)/(1-r)),[n[0],r*100,o*100]};bi.apple.rgb=function(n){return[n[0]/65535*255,n[1]/65535*255,n[2]/65535*255]};bi.rgb.apple=function(n){return[n[0]/255*65535,n[1]/255*65535,n[2]/255*65535]};bi.gray.rgb=function(n){return[n[0]/100*255,n[0]/100*255,n[0]/100*255]};bi.gray.hsl=function(n){return[0,0,n[0]]};bi.gray.hsv=bi.gray.hsl;bi.gray.hwb=function(n){return[0,100,n[0]]};bi.gray.cmyk=function(n){return[0,0,0,n[0]]};bi.gray.lab=function(n){return[n[0],0,0]};bi.gray.hex=function(n){const e=Math.round(n[0]/100*255)&255,i=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".slice(i.length)+i};bi.rgb.gray=function(n){return[(n[0]+n[1]+n[2])/3/255*100]};function ipe(){const n={},e=Object.keys(bi);for(let{length:t}=e,i=0;i<t;i++)n[e[i]]={distance:-1,parent:null};return n}function rpe(n){const e=ipe(),t=[n];for(e[n].distance=0;t.length>0;){const i=t.pop(),r=Object.keys(bi[i]);for(let{length:o}=r,s=0;s<o;s++){const a=r[s],c=e[a];c.distance===-1&&(c.distance=e[i].distance+1,c.parent=i,t.unshift(a))}}return e}function ope(n,e){return function(t){return e(n(t))}}function spe(n,e){const t=[e[n].parent,n];let i=bi[e[n].parent][n],r=e[n].parent;for(;e[r].parent;)t.unshift(e[r].parent),i=ope(bi[e[r].parent][r],i),r=e[r].parent;return i.conversion=t,i}function ape(n){const e=rpe(n),t={},i=Object.keys(e);for(let{length:r}=i,o=0;o<r;o++){const s=i[o];e[s].parent!==null&&(t[s]=spe(s,e))}return t}const iA={},lpe=Object.keys(bi);function upe(n){const e=function(...t){const i=t[0];return i==null?i:(i.length>1&&(t=i),n(t))};return"conversion"in n&&(e.conversion=n.conversion),e}function cpe(n){const e=function(...t){const i=t[0];if(i==null)return i;i.length>1&&(t=i);const r=n(t);if(typeof r=="object")for(let{length:o}=r,s=0;s<o;s++)r[s]=Math.round(r[s]);return r};return"conversion"in n&&(e.conversion=n.conversion),e}for(const n of lpe){iA[n]={},Object.defineProperty(iA[n],"channels",{value:bi[n].channels}),Object.defineProperty(iA[n],"labels",{value:bi[n].labels});const e=ape(n),t=Object.keys(e);for(const i of t){const r=e[i];iA[n][i]=cpe(r),iA[n][i].raw=upe(r)}}const XX=["keyword","gray","hex"],S9={};for(const n of Object.keys(iA))S9[[...iA[n].labels].sort().join("")]=n;const E9={};function Vu(n,e){if(!(this instanceof Vu))return new Vu(n,e);if(e&&e in XX&&(e=null),e&&!(e in iA))throw new Error("Unknown model: "+e);let t,i;if(n==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(n instanceof Vu)this.model=n.model,this.color=[...n.color],this.valpha=n.valpha;else if(typeof n=="string"){const r=Sc.get(n);if(r===null)throw new Error("Unable to parse color from string: "+n);this.model=r.model,i=iA[this.model].channels,this.color=r.value.slice(0,i),this.valpha=typeof r.value[i]=="number"?r.value[i]:1}else if(n.length>0){this.model=e||"rgb",i=iA[this.model].channels;const r=Array.prototype.slice.call(n,0,i);this.color=O9(r,i),this.valpha=typeof n[i]=="number"?n[i]:1}else if(typeof n=="number")this.model="rgb",this.color=[n>>16&255,n>>8&255,n&255],this.valpha=1;else{this.valpha=1;const r=Object.keys(n);"alpha"in n&&(r.splice(r.indexOf("alpha"),1),this.valpha=typeof n.alpha=="number"?n.alpha:0);const o=r.sort().join("");if(!(o in S9))throw new Error("Unable to parse color from object: "+JSON.stringify(n));this.model=S9[o];const{labels:s}=iA[this.model],a=[];for(t=0;t<s.length;t++)a.push(n[s[t]]);this.color=O9(a)}if(E9[this.model])for(i=iA[this.model].channels,t=0;t<i;t++){const r=E9[this.model][t];r&&(this.color[t]=r(this.color[t]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}Vu.prototype={toString(){return this.string()},toJSON(){return this[this.model]()},string(n){let e=this.model in Sc.to?this:this.rgb();e=e.round(typeof n=="number"?n:1);const t=e.valpha===1?e.color:[...e.color,this.valpha];return Sc.to[e.model](...t)},percentString(n){const e=this.rgb().round(typeof n=="number"?n:1),t=e.valpha===1?e.color:[...e.color,this.valpha];return Sc.to.rgb.percent(...t)},array(){return this.valpha===1?[...this.color]:[...this.color,this.valpha]},object(){const n={},{channels:e}=iA[this.model],{labels:t}=iA[this.model];for(let i=0;i<e;i++)n[t[i]]=this.color[i];return this.valpha!==1&&(n.alpha=this.valpha),n},unitArray(){const n=this.rgb().color;return n[0]/=255,n[1]/=255,n[2]/=255,this.valpha!==1&&n.push(this.valpha),n},unitObject(){const n=this.rgb().object();return n.r/=255,n.g/=255,n.b/=255,this.valpha!==1&&(n.alpha=this.valpha),n},round(n){return n=Math.max(n||0,0),new Vu([...this.color.map(hpe(n)),this.valpha],this.model)},alpha(n){return n!==void 0?new Vu([...this.color,Math.max(0,Math.min(1,n))],this.model):this.valpha},red:Hl("rgb",0,Cc(255)),green:Hl("rgb",1,Cc(255)),blue:Hl("rgb",2,Cc(255)),hue:Hl(["hsl","hsv","hsl","hwb","hcg"],0,n=>(n%360+360)%360),saturationl:Hl("hsl",1,Cc(100)),lightness:Hl("hsl",2,Cc(100)),saturationv:Hl("hsv",1,Cc(100)),value:Hl("hsv",2,Cc(100)),chroma:Hl("hcg",1,Cc(100)),gray:Hl("hcg",2,Cc(100)),white:Hl("hwb",1,Cc(100)),wblack:Hl("hwb",2,Cc(100)),cyan:Hl("cmyk",0,Cc(100)),magenta:Hl("cmyk",1,Cc(100)),yellow:Hl("cmyk",2,Cc(100)),black:Hl("cmyk",3,Cc(100)),x:Hl("xyz",0,Cc(95.047)),y:Hl("xyz",1,Cc(100)),z:Hl("xyz",2,Cc(108.833)),l:Hl("lab",0,Cc(100)),a:Hl("lab",1),b:Hl("lab",2),keyword(n){return n!==void 0?new Vu(n):iA[this.model].keyword(this.color)},hex(n){return n!==void 0?new Vu(n):Sc.to.hex(...this.rgb().round().color)},hexa(n){if(n!==void 0)return new Vu(n);const e=this.rgb().round().color;let t=Math.round(this.valpha*255).toString(16).toUpperCase();return t.length===1&&(t="0"+t),Sc.to.hex(...e)+t},rgbNumber(){const n=this.rgb().color;return(n[0]&255)<<16|(n[1]&255)<<8|n[2]&255},luminosity(){const n=this.rgb().color,e=[];for(const[t,i]of n.entries()){const r=i/255;e[t]=r<=.04045?r/12.92:((r+.055)/1.055)**2.4}return .2126*e[0]+.7152*e[1]+.0722*e[2]},contrast(n){const e=this.luminosity(),t=n.luminosity();return e>t?(e+.05)/(t+.05):(t+.05)/(e+.05)},level(n){const e=this.contrast(n);return e>=7?"AAA":e>=4.5?"AA":""},isDark(){const n=this.rgb().color;return(n[0]*2126+n[1]*7152+n[2]*722)/1e4<128},isLight(){return!this.isDark()},negate(){const n=this.rgb();for(let e=0;e<3;e++)n.color[e]=255-n.color[e];return n},lighten(n){const e=this.hsl();return e.color[2]+=e.color[2]*n,e},darken(n){const e=this.hsl();return e.color[2]-=e.color[2]*n,e},saturate(n){const e=this.hsl();return e.color[1]+=e.color[1]*n,e},desaturate(n){const e=this.hsl();return e.color[1]-=e.color[1]*n,e},whiten(n){const e=this.hwb();return e.color[1]+=e.color[1]*n,e},blacken(n){const e=this.hwb();return e.color[2]+=e.color[2]*n,e},grayscale(){const n=this.rgb().color,e=n[0]*.3+n[1]*.59+n[2]*.11;return Vu.rgb(e,e,e)},fade(n){return this.alpha(this.valpha-this.valpha*n)},opaquer(n){return this.alpha(this.valpha+this.valpha*n)},rotate(n){const e=this.hsl();let t=e.color[0];return t=(t+n)%360,t=t<0?360+t:t,e.color[0]=t,e},mix(n,e){if(!n||!n.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof n);const t=n.rgb(),i=this.rgb(),r=e===void 0?.5:e,o=2*r-1,s=t.alpha()-i.alpha(),a=((o*s===-1?o:(o+s)/(1+o*s))+1)/2,c=1-a;return Vu.rgb(a*t.red()+c*i.red(),a*t.green()+c*i.green(),a*t.blue()+c*i.blue(),t.alpha()*r+i.alpha()*(1-r))}};for(const n of Object.keys(iA)){if(XX.includes(n))continue;const{channels:e}=iA[n];Vu.prototype[n]=function(...t){return this.model===n?new Vu(this):t.length>0?new Vu(t,n):new Vu([...dpe(iA[this.model][n].raw(this.color)),this.valpha],n)},Vu[n]=function(...t){let i=t[0];return typeof i=="number"&&(i=O9(t,e)),new Vu(i,n)}}function Ape(n,e){return Number(n.toFixed(e))}function hpe(n){return function(e){return Ape(e,n)}}function Hl(n,e,t){n=Array.isArray(n)?n:[n];for(const i of n)(E9[i]||=[])[e]=t;return n=n[0],function(i){let r;return i!==void 0?(t&&(i=t(i)),r=this[n](),r.color[e]=i,r):(r=this[n]().color[e],t&&(r=t(r)),r)}}function Cc(n){return function(e){return Math.max(0,Math.min(n,e))}}function dpe(n){return Array.isArray(n)?n:[n]}function O9(n,e){for(let t=0;t<e;t++)typeof n[t]!="number"&&(n[t]=0);return n}function ds(){var n="/home/runner/work/maputnik/maputnik/src/libs/zoomcontrol.ts",e="9dd3eea5f46b0cc48ff3173a7af02bc32aa63f10",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/zoomcontrol.ts",statementMap:{0:{start:{line:2,column:9},end:{line:2,column:15}},1:{start:{line:3,column:15},end:{line:3,column:21}},2:{start:{line:4,column:12},end:{line:4,column:16}},3:{start:{line:8,column:4},end:{line:8,column:20}},4:{start:{line:9,column:4},end:{line:9,column:52}},5:{start:{line:10,column:4},end:{line:10,column:93}},6:{start:{line:11,column:4},end:{line:11,column:70}},7:{start:{line:12,column:4},end:{line:12,column:27}},8:{start:{line:13,column:4},end:{line:13,column:29}},9:{start:{line:14,column:4},end:{line:14,column:27}},10:{start:{line:17,column:4},end:{line:17,column:60}},11:{start:{line:20,column:4},end:{line:22,column:6}},12:{start:{line:23,column:4},end:{line:23,column:57}},13:{start:{line:24,column:4},end:{line:24,column:27}},14:{start:{line:27,column:4},end:{line:27,column:57}},15:{start:{line:27,column:33},end:{line:27,column:55}},16:{start:{line:28,column:4},end:{line:28,column:57}},17:{start:{line:28,column:33},end:{line:28,column:55}},18:{start:{line:29,column:4},end:{line:29,column:58}},19:{start:{line:29,column:34},end:{line:29,column:56}},20:{start:{line:32,column:4},end:{line:32,column:60}},21:{start:{line:33,column:4},end:{line:33,column:23}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:16},end:{line:6,column:3}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:13},end:{line:15,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:16,column:2},end:{line:16,column:3}},loc:{start:{line:16,column:20},end:{line:18,column:3}},line:16},3:{name:"(anonymous_3)",decl:{start:{line:19,column:2},end:{line:19,column:3}},loc:{start:{line:19,column:18},end:{line:25,column:3}},line:19},4:{name:"(anonymous_4)",decl:{start:{line:26,column:2},end:{line:26,column:3}},loc:{start:{line:26,column:22},end:{line:30,column:3}},line:26},5:{name:"(anonymous_5)",decl:{start:{line:27,column:27},end:{line:27,column:28}},loc:{start:{line:27,column:33},end:{line:27,column:55}},line:27},6:{name:"(anonymous_6)",decl:{start:{line:28,column:27},end:{line:28,column:28}},loc:{start:{line:28,column:33},end:{line:28,column:55}},line:28},7:{name:"(anonymous_7)",decl:{start:{line:29,column:28},end:{line:29,column:29}},loc:{start:{line:29,column:34},end:{line:29,column:56}},line:29},8:{name:"(anonymous_8)",decl:{start:{line:31,column:2},end:{line:31,column:3}},loc:{start:{line:31,column:13},end:{line:34,column:3}},line:31}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/zoomcontrol.ts"],names:[],mappings:"AAEA,qBAAqB,YAAY;AAAA,EAC/B,OAAuB;AAAA,EACvB,aAAyC;AAAA,EACzC,UAAkC;AAAA,EAElC,cAAc;AAAA,EAAC;AAAA,EAEf,MAAM,KAAU;AACd,SAAK,OAAO;AACZ,SAAK,aAAa,SAAS,cAAc,KAAK;AAC9C,SAAK,WAAW,YAAY;AAC5B,SAAK,WAAW,aAAa,eAAe,oBAAoB;AAChE,SAAK,SAAS,OAAO;AACrB,SAAK,kBAAkB;AAEvB,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,kBAAkB;AAChB,SAAK,QAAS,YAAY,KAAK,KAAM,QAAQ,EAAE,QAAQ,CAAC;AAAA,EAC1D;AAAA,EAEA,SAAS,OAAe;AACtB,SAAK,WAAY,YAAY;AAAA,QACzB,KAAK;AAAA;AAET,SAAK,UAAU,KAAK,WAAY,cAAc,MAAM;AACpD,SAAK,gBAAgB;AAAA,EACvB;AAAA,EAEA,oBAAoB;AAClB,SAAK,KAAM,GAAG,UAAU,MAAM,KAAK,gBAAgB,CAAC;AACpD,SAAK,KAAM,GAAG,UAAU,MAAM,KAAK,gBAAgB,CAAC;AACpD,SAAK,KAAM,GAAG,WAAW,MAAM,KAAK,gBAAgB,CAAC;AAAA,EACvD;AAAA,EAEA,WAAW;AACT,SAAK,WAAY,WAAY,YAAY,KAAK,UAAW;AACzD,SAAK,OAAO;AAAA,EACd;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"9dd3eea5f46b0cc48ff3173a7af02bc32aa63f10"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return ds=function(){return s},s}ds();class fpe{_map=(ds().s[0]++,void 0);_container=(ds().s[1]++,void 0);_textEl=(ds().s[2]++,null);constructor(){ds().f[0]++}onAdd(e){return ds().f[1]++,ds().s[3]++,this._map=e,ds().s[4]++,this._container=document.createElement("div"),ds().s[5]++,this._container.className="maplibregl-ctrl maplibregl-ctrl-group maplibregl-ctrl-zoom",ds().s[6]++,this._container.setAttribute("data-wd-key","maplibre:ctrl-zoom"),ds().s[7]++,this.setLabel("Zoom:"),ds().s[8]++,this.addEventListeners(),ds().s[9]++,this._container}updateZoomLevel(){ds().f[2]++,ds().s[10]++,this._textEl.innerHTML=this._map.getZoom().toFixed(2)}setLabel(e){ds().f[3]++,ds().s[11]++,this._container.innerHTML=`
      ${e} <span></span>
    `,ds().s[12]++,this._textEl=this._container.querySelector("span"),ds().s[13]++,this.updateZoomLevel()}addEventListeners(){ds().f[4]++,ds().s[14]++,this._map.on("render",()=>(ds().f[5]++,ds().s[15]++,this.updateZoomLevel())),ds().s[16]++,this._map.on("zoomIn",()=>(ds().f[6]++,ds().s[17]++,this.updateZoomLevel())),ds().s[18]++,this._map.on("zoomOut",()=>(ds().f[7]++,ds().s[19]++,this.updateZoomLevel()))}onRemove(){ds().f[8]++,ds().s[20]++,this._container.parentNode.removeChild(this._container),ds().s[21]++,this._map=void 0}}function B9(n,e,t){const i={id:[e,t,"circle"].join("_"),source:e,type:"circle",paint:{"circle-color":n,"circle-radius":2},filter:["==","$type","Point"]};return t&&(i["source-layer"]=t),i}function I9(n,e,t,i){const r={id:[t,i,"polygon"].join("_"),source:t,type:"fill",paint:{"fill-color":n,"fill-antialias":!0,"fill-outline-color":n},filter:["==","$type","Polygon"]};return i&&(r["source-layer"]=i),r}function k9(n,e,t){const i={id:[e,t,"line"].join("_"),source:e,layout:{"line-join":"round","line-cap":"round"},type:"line",paint:{"line-color":n},filter:["==","$type","LineString"]};return t&&(i["source-layer"]=t),i}function ppe(n,e){const t=[],i=[],r=[];function o(s){return{circle:e(s,.8),line:e(s,.6),polygon:e(s,.3),polygonOutline:e(s,.6),default:e(s,1)}}return Object.keys(n).forEach(s=>{const a=n[s];if(!a||a.length===0){const c=o(s);i.push(B9(c.circle,s)),r.push(k9(c.line,s)),t.push(I9(c.polygon,c.polygonOutline,s))}else a.forEach(c=>{const h=o(c);i.push(B9(h.circle,s,c)),r.push(k9(h.line,s,c)),t.push(I9(h.polygon,h.polygonOutline,s,c))})}),t.concat(r).concat(i)}function mpe(n,e,t){t=Object.assign({backgroundColor:"#fff"},t);const i={id:"background",type:"background",paint:{"background-color":t.backgroundColor}},r={};return Object.keys(n.sources).forEach(o=>{const s=n.sources[o];(s.type==="vector"||s.type==="geojson")&&(r[o]=s)}),Object.assign(n,{layers:[i].concat(e),sources:r})}const SO={polygonLayer:I9,lineLayer:k9,circleLayer:B9,generateInspectStyle:mpe,generateColoredLayers:ppe};function Dr(){var n="/home/runner/work/maputnik/maputnik/src/libs/highlight.ts",e="aec0f701e803624fae461cc89b5fc887ff556587",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/highlight.ts",statementMap:{0:{start:{line:4,column:2},end:{line:8,column:3}},1:{start:{line:5,column:4},end:{line:5,column:33}},2:{start:{line:6,column:9},end:{line:8,column:3}},3:{start:{line:7,column:4},end:{line:7,column:30}},4:{start:{line:9,column:2},end:{line:13,column:3}},5:{start:{line:10,column:4},end:{line:10,column:28}},6:{start:{line:12,column:4},end:{line:12,column:23}},7:{start:{line:14,column:2},end:{line:14,column:29}},8:{start:{line:15,column:2},end:{line:15,column:11}},9:{start:{line:18,column:2},end:{line:18,column:84}},10:{start:{line:18,column:72},end:{line:18,column:84}},11:{start:{line:19,column:24},end:{line:19,column:51}},12:{start:{line:20,column:16},end:{line:20,column:52}},13:{start:{line:21,column:2},end:{line:23,column:3}},14:{start:{line:22,column:4},end:{line:22,column:104}},15:{start:{line:24,column:2},end:{line:26,column:3}},16:{start:{line:25,column:4},end:{line:25,column:96}},17:{start:{line:27,column:2},end:{line:29,column:3}},18:{start:{line:28,column:4},end:{line:28,column:94}},19:{start:{line:30,column:2},end:{line:30,column:14}}},fnMap:{0:{name:"changeLayer",decl:{start:{line:3,column:9},end:{line:3,column:20}},loc:{start:{line:3,column:31},end:{line:16,column:1}},line:3},1:{name:"colorHighlightedLayer",decl:{start:{line:17,column:16},end:{line:17,column:37}},loc:{start:{line:17,column:45},end:{line:31,column:1}},line:17}},branchMap:{0:{loc:{start:{line:4,column:2},end:{line:8,column:3}},type:"if",locations:[{start:{line:4,column:2},end:{line:8,column:3}},{start:{line:6,column:9},end:{line:8,column:3}}],line:4},1:{loc:{start:{line:6,column:9},end:{line:8,column:3}},type:"if",locations:[{start:{line:6,column:9},end:{line:8,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:6},2:{loc:{start:{line:9,column:2},end:{line:13,column:3}},type:"if",locations:[{start:{line:9,column:2},end:{line:13,column:3}},{start:{line:11,column:9},end:{line:13,column:3}}],line:9},3:{loc:{start:{line:18,column:2},end:{line:18,column:84}},type:"if",locations:[{start:{line:18,column:2},end:{line:18,column:84}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:18},4:{loc:{start:{line:18,column:6},end:{line:18,column:70}},type:"binary-expr",locations:[{start:{line:18,column:6},end:{line:18,column:12}},{start:{line:18,column:16},end:{line:18,column:43}},{start:{line:18,column:47},end:{line:18,column:70}}],line:18},5:{loc:{start:{line:19,column:24},end:{line:19,column:51}},type:"binary-expr",locations:[{start:{line:19,column:24},end:{line:19,column:45}},{start:{line:19,column:49},end:{line:19,column:51}}],line:19},6:{loc:{start:{line:21,column:2},end:{line:23,column:3}},type:"if",locations:[{start:{line:21,column:2},end:{line:23,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:21},7:{loc:{start:{line:21,column:6},end:{line:21,column:62}},type:"binary-expr",locations:[{start:{line:21,column:6},end:{line:21,column:27}},{start:{line:21,column:31},end:{line:21,column:62}}],line:21},8:{loc:{start:{line:24,column:2},end:{line:26,column:3}},type:"if",locations:[{start:{line:24,column:2},end:{line:26,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:24},9:{loc:{start:{line:24,column:6},end:{line:24,column:56}},type:"binary-expr",locations:[{start:{line:24,column:6},end:{line:24,column:29}},{start:{line:24,column:33},end:{line:24,column:56}}],line:24},10:{loc:{start:{line:27,column:2},end:{line:29,column:3}},type:"if",locations:[{start:{line:27,column:2},end:{line:29,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:27}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0},f:{0:0,1:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/highlight.ts"],names:[],mappings:"AAAA,OAAO,cAAc;AACrB,OAAO,YAAY;AAKnB,SAAS,YAAY,GAAqB,OAA2B;AACnE,MAAG,EAAE,SAAS,UAAU;AACtB,MAAE,MAAO,eAAe,IAAI;AAAA,EAC9B,WAAU,EAAE,SAAS,QAAQ;AAC3B,MAAE,MAAO,YAAY,IAAI;AAAA,EAC3B;AAEA,MAAG,YAAY,OAAO;AACpB,MAAE,SAAS,MAAM;AAAA,EACnB,OAAO;AACL,WAAO,EAAE,QAAQ;AAAA,EACnB;AACA,IAAE,KAAK,EAAE,KAAK;AACd,SAAO;AACT;AAEO,gBAAS,sBAAsB,OAAqD;AACzF,MAAG,CAAC,SAAS,MAAM,SAAS,gBAAgB,MAAM,SAAS,SAAU,QAAO;AAE5E,QAAM,gBAAgB,MAAM,cAAc,KAAK;AAC/C,QAAM,QAAQ,OAAO,YAAY,eAAe,CAAC;AAEjD,MAAG,MAAM,SAAS,UAAU,MAAM,SAAS,kBAAkB;AAC3D,WAAO,YAAY,SAAS,aAAa,OAAO,OAAO,MAAM,QAAQ,MAAM,cAAc,CAAC,GAAG,KAAK;AAAA,EACpG;AAEA,MAAG,MAAM,SAAS,YAAY,MAAM,SAAS,UAAU;AACrD,WAAO,YAAY,SAAS,YAAY,OAAO,MAAM,QAAQ,MAAM,cAAc,CAAC,GAAG,KAAK;AAAA,EAC5F;AAEA,MAAG,MAAM,SAAS,QAAQ;AACxB,WAAO,YAAY,SAAS,UAAU,OAAO,MAAM,QAAQ,MAAM,cAAc,CAAC,GAAG,KAAK;AAAA,EAC1F;AAEA,SAAO;AACT;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"aec0f701e803624fae461cc89b5fc887ff556587"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Dr=function(){return s},s}Dr();function EO(n,e){return Dr().f[0]++,Dr().s[0]++,n.type==="circle"?(Dr().b[0][0]++,Dr().s[1]++,n.paint["circle-radius"]=3):(Dr().b[0][1]++,Dr().s[2]++,n.type==="line"?(Dr().b[1][0]++,Dr().s[3]++,n.paint["line-width"]=2):Dr().b[1][1]++),Dr().s[4]++,"filter"in e?(Dr().b[2][0]++,Dr().s[5]++,n.filter=e.filter):(Dr().b[2][1]++,Dr().s[6]++,delete n.filter),Dr().s[7]++,n.id=n.id+"_highlight",Dr().s[8]++,n}function gpe(n){if(Dr().f[1]++,Dr().s[9]++,Dr().b[4][0]++,!n||(Dr().b[4][1]++,n.type==="background")||(Dr().b[4][2]++,n.type==="raster"))return Dr().b[3][0]++,Dr().s[10]++,null;Dr().b[3][1]++;const e=(Dr().s[11]++,Dr().b[5][0]++,n["source-layer"]||(Dr().b[5][1]++,"")),t=(Dr().s[12]++,WX.brightColor(e,1));return Dr().s[13]++,Dr().b[7][0]++,n.type==="fill"||(Dr().b[7][1]++,n.type==="fill-extrusion")?(Dr().b[6][0]++,Dr().s[14]++,EO(SO.polygonLayer(t,t,n.source,n["source-layer"]),n)):(Dr().b[6][1]++,Dr().s[15]++,Dr().b[9][0]++,n.type==="symbol"||(Dr().b[9][1]++,n.type==="circle")?(Dr().b[8][0]++,Dr().s[16]++,EO(SO.circleLayer(t,n.source,n["source-layer"]),n)):(Dr().b[8][1]++,Dr().s[17]++,n.type==="line"?(Dr().b[10][0]++,Dr().s[18]++,EO(SO.lineLayer(t,n.source,n["source-layer"]),n)):(Dr().b[10][1]++,Dr().s[19]++,null)))}function gP(){var n="/home/runner/work/maputnik/maputnik/src/libs/maplibre-rtl.ts",e="a9dc98f82c73787713de0672aff7a601bfeb069d",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/maplibre-rtl.ts",statementMap:{0:{start:{line:2,column:0},end:{line:2,column:115}}},fnMap:{},branchMap:{},s:{0:0},f:{},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/maplibre-rtl.ts"],names:[],mappings:"AAAA,OAAO,gBAAgB;AAEvB,WAAW,iBAAiB,gFAAgF,KAAK;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a9dc98f82c73787713de0672aff7a601bfeb069d"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return gP=function(){return s},s}gP();gP().s[0]++;g_.setRTLTextPlugin("https://unpkg.com/@mapbox/mapbox-gl-rtl-text@0.2.3/mapbox-gl-rtl-text.min.js",!1);function OO(n,e,t,i){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(m){try{h(i.next(m))}catch(y){s(y)}}function c(m){try{h(i.throw(m))}catch(y){s(y)}}function h(m){m.done?o(m.value):r(m.value).then(a,c)}h((i=i.apply(n,e||[])).next())})}var W5=typeof globalThis<"u"?globalThis:typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{};function CE(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var BO,iz;function JX(){if(iz)return BO;iz=1,BO=e;var n=Object.prototype.hasOwnProperty;function e(){for(var t={},i=0;i<arguments.length;i++){var r=arguments[i];for(var o in r)n.call(r,o)&&(t[o]=r[o])}return t}return BO}var IO={exports:{}},rz;function ype(){return rz||(rz=1,(function(n,e){(function(){var t={};n.exports=t,t.simpleFilter=function(i,r){return r.filter(function(o){return t.test(i,o)})},t.test=function(i,r){return t.match(i,r)!==null},t.match=function(i,r,o){o=o||{};var s=0,a=[],c=r.length,h=0,m=0,y=o.pre||"",M=o.post||"",x=o.caseSensitive&&r||r.toLowerCase(),T;i=o.caseSensitive&&i||i.toLowerCase();for(var P=0;P<c;P++)T=r[P],x[P]===i[s]?(T=y+T+M,s+=1,m+=1+m):m=0,h+=m,a[a.length]=T;return s===i.length?(h=x===i?1/0:h,{rendered:a.join(""),score:h}):null},t.filter=function(i,r,o){return!r||r.length===0?[]:typeof i!="string"?r:(o=o||{},r.reduce(function(s,a,c,h){var m=a;o.extract&&(m=o.extract(a));var y=t.match(i,m,o);return y!=null&&(s[s.length]={string:y.rendered,score:y.score,index:c,original:a}),s},[]).sort(function(s,a){var c=a.score-s.score;return c||s.index-a.index}))}})()})(IO)),IO.exports}var kO,oz;function vpe(){if(oz)return kO;oz=1;var n=function(e){return this.component=e,this.items=[],this.active=e.options.noInitialSelection?-1:0,this.wrapper=document.createElement("div"),this.wrapper.className="suggestions-wrapper",this.element=document.createElement("ul"),this.element.className="suggestions",this.wrapper.appendChild(this.element),this.selectingListItem=!1,e.el.parentNode.insertBefore(this.wrapper,e.el.nextSibling),this};return n.prototype.show=function(){this.element.style.display="block"},n.prototype.hide=function(){this.element.style.display="none"},n.prototype.add=function(e){this.items.push(e)},n.prototype.clear=function(){this.items=[],this.active=this.component.options.noInitialSelection?-1:0},n.prototype.isEmpty=function(){return!this.items.length},n.prototype.isVisible=function(){return this.element.style.display==="block"},n.prototype.draw=function(){if(this.element.innerHTML="",this.items.length===0){this.hide();return}for(var e=0;e<this.items.length;e++)this.drawItem(this.items[e],this.active===e);this.show()},n.prototype.drawItem=function(e,t){var i=document.createElement("li"),r=document.createElement("a");t&&(i.className+=" active"),r.innerHTML=e.string,i.appendChild(r),this.element.appendChild(i),i.addEventListener("mousedown",(function(){this.selectingListItem=!0}).bind(this)),i.addEventListener("mouseup",(function(){this.handleMouseUp.call(this,e)}).bind(this))},n.prototype.handleMouseUp=function(e){this.selectingListItem=!1,this.component.value(e.original),this.clear(),this.draw()},n.prototype.move=function(e){this.active=e,this.draw()},n.prototype.previous=function(){this.move(this.active<=0?this.items.length-1:this.active-1)},n.prototype.next=function(){this.move(this.active>=this.items.length-1?0:this.active+1)},n.prototype.drawError=function(e){var t=document.createElement("li");t.innerHTML=e,this.element.appendChild(t),this.show()},kO=n,kO}var TO,sz;function bpe(){if(sz)return TO;sz=1;var n=JX(),e=ype(),t=vpe(),i=function(r,o,s){return s=s||{},this.options=n({minLength:2,limit:5,filter:!0,hideOnBlur:!0,noInitialSelection:!0},s),this.el=r,this.data=o||[],this.list=new t(this),this.query="",this.selected=null,this.list.draw(),this.el.addEventListener("keyup",(function(a){this.handleKeyUp(a.keyCode,a)}).bind(this),!1),this.el.addEventListener("keydown",(function(a){this.handleKeyDown(a)}).bind(this)),this.el.addEventListener("focus",(function(){this.handleFocus()}).bind(this)),this.el.addEventListener("blur",(function(){this.handleBlur()}).bind(this)),this.el.addEventListener("paste",(function(a){this.handlePaste(a)}).bind(this)),this.render=this.options.render?this.options.render.bind(this):this.render.bind(this),this.getItemValue=this.options.getItemValue?this.options.getItemValue.bind(this):this.getItemValue.bind(this),this};return i.prototype.handleKeyUp=function(r,o){if(!(r===40||r===38||r===27||r===9)){if(r===13){this.list.items[this.list.active]&&(this.list.handleMouseUp(this.list.items[this.list.active]),o.stopPropagation());return}this.handleInputChange(this.el.value)}},i.prototype.handleKeyDown=function(r){switch(r.keyCode){case 13:this.list.active>=0&&(this.list.selectingListItem=!0);break;case 9:this.list.isEmpty()||(this.list.isVisible()&&r.preventDefault(),this.value(this.list.active>=0?this.list.items[this.list.active].original:null),this.list.hide());break;case 27:this.list.isEmpty()||this.list.hide();break;case 38:this.list.previous();break;case 40:this.list.next();break}},i.prototype.handleBlur=function(){!this.list.selectingListItem&&this.options.hideOnBlur&&this.list.hide()},i.prototype.handlePaste=function(r){if(r.clipboardData)this.handleInputChange(r.clipboardData.getData("Text"));else{var o=this;setTimeout(function(){o.handleInputChange(r.target.value)},100)}},i.prototype.handleInputChange=function(r){if(this.query=this.normalize(r),this.list.clear(),this.query.length<this.options.minLength){this.list.draw();return}this.getCandidates((function(o){for(var s=0;s<o.length&&(this.list.add(o[s]),s!==this.options.limit-1);s++);this.list.draw()}).bind(this))},i.prototype.handleFocus=function(){this.list.isEmpty()||this.list.show(),this.list.selectingListItem=!1},i.prototype.update=function(r){this.data=r,this.handleKeyUp()},i.prototype.clear=function(){this.data=[],this.list.clear()},i.prototype.normalize=function(r){return r=r.toLowerCase(),r},i.prototype.match=function(r,o){return r.indexOf(o)>-1},i.prototype.value=function(r){if(this.selected=r,this.el.value=this.getItemValue(r||{place_name:this.query}),document.createEvent){var o=document.createEvent("HTMLEvents");o.initEvent("change",!0,!1),this.el.dispatchEvent(o)}else this.el.fireEvent("onchange")},i.prototype.getCandidates=function(r){var o={pre:"<strong>",post:"</strong>",extract:(function(a){return this.getItemValue(a)}).bind(this)},s;this.options.filter?(s=e.filter(this.query,this.data,o),s=s.map((function(a){return{original:a.original,string:this.render(a.original,a.string)}}).bind(this))):s=this.data.map((function(a){var c=this.render(a);return{original:a,string:c}}).bind(this)),r(s)},i.prototype.getItemValue=function(r){return r},i.prototype.render=function(r,o){if(o)return o;for(var s=r.original?this.getItemValue(r.original):this.getItemValue(r),a=this.normalize(s),c=a.lastIndexOf(this.query);c>-1;){var h=c+this.query.length;s=s.slice(0,c)+"<strong>"+s.slice(c,h)+"</strong>"+s.slice(h),c=a.slice(0,c).lastIndexOf(this.query)}return s},i.prototype.renderError=function(r){this.list.drawError(r)},TO=i,TO}var RO,az;function Cpe(){if(az)return RO;az=1;var n=bpe();return RO=n,typeof window<"u"&&(window.Suggestions=n),RO}var _pe=Cpe(),xpe=CE(_pe),aw={exports:{}},Mpe=aw.exports,lz;function wpe(){return lz||(lz=1,(function(n){(function(e,t,i){n.exports?n.exports=i():e[t]=i()})(Mpe,"subtag",function(){var e="",t=/^([a-zA-Z]{2,3})(?:[_-]+([a-zA-Z]{3})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{4})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{2}|[0-9]{3})(?=$|[_-]+))?/;function i(c){return c.match(t)||[]}function r(c){return i(c).filter(function(h,m){return h&&m})}function o(c){return c=i(c),{language:c[1]||e,extlang:c[2]||e,script:c[3]||e,region:c[4]||e}}function s(c,h,m){Object.defineProperty(c,h,{value:m,enumerable:!0})}function a(c,h,m){function y(M){return i(M)[c]||e}s(y,"pattern",h),s(o,m,y)}return a(1,/^[a-zA-Z]{2,3}$/,"language"),a(2,/^[a-zA-Z]{3}$/,"extlang"),a(3,/^[a-zA-Z]{4}$/,"script"),a(4,/^[a-zA-Z]{2}$|^[0-9]{3}$/,"region"),s(o,"split",r),o})})(aw)),aw.exports}var Spe=wpe(),Epe=CE(Spe),DO,uz;function Ope(){if(uz)return DO;uz=1;var n="Expected a function",e=NaN,t="[object Symbol]",i=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,s=/^0o[0-7]+$/i,a=parseInt,c=typeof W5=="object"&&W5&&W5.Object===Object&&W5,h=typeof self=="object"&&self&&self.Object===Object&&self,m=c||h||Function("return this")(),y=Object.prototype,M=y.toString,x=Math.max,T=Math.min,P=function(){return m.Date.now()};function F(Q,Y,z){var se,le,pe,de,ve,Ee,Re=0,je=!1,Ie=!1,qe=!0;if(typeof Q!="function")throw new TypeError(n);Y=H(Y)||0,j(z)&&(je=!!z.leading,Ie="maxWait"in z,pe=Ie?x(H(z.maxWait)||0,Y):pe,qe="trailing"in z?!!z.trailing:qe);function tt(Bt){var Ke=se,Te=le;return se=le=void 0,Re=Bt,de=Q.apply(Te,Ke),de}function At(Bt){return Re=Bt,ve=setTimeout(ze,Y),je?tt(Bt):de}function ke(Bt){var Ke=Bt-Ee,Te=Bt-Re,Se=Y-Ke;return Ie?T(Se,pe-Te):Se}function we(Bt){var Ke=Bt-Ee,Te=Bt-Re;return Ee===void 0||Ke>=Y||Ke<0||Ie&&Te>=pe}function ze(){var Bt=P();if(we(Bt))return Me(Bt);ve=setTimeout(ze,ke(Bt))}function Me(Bt){return ve=void 0,qe&&se?tt(Bt):(se=le=void 0,de)}function lt(){ve!==void 0&&clearTimeout(ve),Re=0,se=Ee=le=ve=void 0}function nt(){return ve===void 0?de:Me(P())}function bt(){var Bt=P(),Ke=we(Bt);if(se=arguments,le=this,Ee=Bt,Ke){if(ve===void 0)return At(Ee);if(Ie)return ve=setTimeout(ze,Y),tt(Ee)}return ve===void 0&&(ve=setTimeout(ze,Y)),de}return bt.cancel=lt,bt.flush=nt,bt}function j(Q){var Y=typeof Q;return!!Q&&(Y=="object"||Y=="function")}function q(Q){return!!Q&&typeof Q=="object"}function V(Q){return typeof Q=="symbol"||q(Q)&&M.call(Q)==t}function H(Q){if(typeof Q=="number")return Q;if(V(Q))return e;if(j(Q)){var Y=typeof Q.valueOf=="function"?Q.valueOf():Q;Q=j(Y)?Y+"":Y}if(typeof Q!="string")return Q===0?Q:+Q;Q=Q.replace(i,"");var z=o.test(Q);return z||s.test(Q)?a(Q.slice(2),z?2:8):r.test(Q)?e:+Q}return DO=F,DO}var Bpe=Ope(),Ipe=CE(Bpe),kpe=JX(),lm=CE(kpe),Q5={exports:{}},cz;function Tpe(){if(cz)return Q5.exports;cz=1;var n=typeof Reflect=="object"?Reflect:null,e=n&&typeof n.apply=="function"?n.apply:function(Q,Y,z){return Function.prototype.apply.call(Q,Y,z)},t;n&&typeof n.ownKeys=="function"?t=n.ownKeys:Object.getOwnPropertySymbols?t=function(Q){return Object.getOwnPropertyNames(Q).concat(Object.getOwnPropertySymbols(Q))}:t=function(Q){return Object.getOwnPropertyNames(Q)};function i(H){console&&console.warn&&console.warn(H)}var r=Number.isNaN||function(Q){return Q!==Q};function o(){o.init.call(this)}Q5.exports=o,Q5.exports.once=j,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var s=10;function a(H){if(typeof H!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof H)}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(H){if(typeof H!="number"||H<0||r(H))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+H+".");s=H}}),o.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(Q){if(typeof Q!="number"||Q<0||r(Q))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+Q+".");return this._maxListeners=Q,this};function c(H){return H._maxListeners===void 0?o.defaultMaxListeners:H._maxListeners}o.prototype.getMaxListeners=function(){return c(this)},o.prototype.emit=function(Q){for(var Y=[],z=1;z<arguments.length;z++)Y.push(arguments[z]);var se=Q==="error",le=this._events;if(le!==void 0)se=se&&le.error===void 0;else if(!se)return!1;if(se){var pe;if(Y.length>0&&(pe=Y[0]),pe instanceof Error)throw pe;var de=new Error("Unhandled error."+(pe?" ("+pe.message+")":""));throw de.context=pe,de}var ve=le[Q];if(ve===void 0)return!1;if(typeof ve=="function")e(ve,this,Y);else for(var Ee=ve.length,Re=T(ve,Ee),z=0;z<Ee;++z)e(Re[z],this,Y);return!0};function h(H,Q,Y,z){var se,le,pe;if(a(Y),le=H._events,le===void 0?(le=H._events=Object.create(null),H._eventsCount=0):(le.newListener!==void 0&&(H.emit("newListener",Q,Y.listener?Y.listener:Y),le=H._events),pe=le[Q]),pe===void 0)pe=le[Q]=Y,++H._eventsCount;else if(typeof pe=="function"?pe=le[Q]=z?[Y,pe]:[pe,Y]:z?pe.unshift(Y):pe.push(Y),se=c(H),se>0&&pe.length>se&&!pe.warned){pe.warned=!0;var de=new Error("Possible EventEmitter memory leak detected. "+pe.length+" "+String(Q)+" listeners added. Use emitter.setMaxListeners() to increase limit");de.name="MaxListenersExceededWarning",de.emitter=H,de.type=Q,de.count=pe.length,i(de)}return H}o.prototype.addListener=function(Q,Y){return h(this,Q,Y,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(Q,Y){return h(this,Q,Y,!0)};function m(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function y(H,Q,Y){var z={fired:!1,wrapFn:void 0,target:H,type:Q,listener:Y},se=m.bind(z);return se.listener=Y,z.wrapFn=se,se}o.prototype.once=function(Q,Y){return a(Y),this.on(Q,y(this,Q,Y)),this},o.prototype.prependOnceListener=function(Q,Y){return a(Y),this.prependListener(Q,y(this,Q,Y)),this},o.prototype.removeListener=function(Q,Y){var z,se,le,pe,de;if(a(Y),se=this._events,se===void 0)return this;if(z=se[Q],z===void 0)return this;if(z===Y||z.listener===Y)--this._eventsCount===0?this._events=Object.create(null):(delete se[Q],se.removeListener&&this.emit("removeListener",Q,z.listener||Y));else if(typeof z!="function"){for(le=-1,pe=z.length-1;pe>=0;pe--)if(z[pe]===Y||z[pe].listener===Y){de=z[pe].listener,le=pe;break}if(le<0)return this;le===0?z.shift():P(z,le),z.length===1&&(se[Q]=z[0]),se.removeListener!==void 0&&this.emit("removeListener",Q,de||Y)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(Q){var Y,z,se;if(z=this._events,z===void 0)return this;if(z.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):z[Q]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete z[Q]),this;if(arguments.length===0){var le=Object.keys(z),pe;for(se=0;se<le.length;++se)pe=le[se],pe!=="removeListener"&&this.removeAllListeners(pe);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(Y=z[Q],typeof Y=="function")this.removeListener(Q,Y);else if(Y!==void 0)for(se=Y.length-1;se>=0;se--)this.removeListener(Q,Y[se]);return this};function M(H,Q,Y){var z=H._events;if(z===void 0)return[];var se=z[Q];return se===void 0?[]:typeof se=="function"?Y?[se.listener||se]:[se]:Y?F(se):T(se,se.length)}o.prototype.listeners=function(Q){return M(this,Q,!0)},o.prototype.rawListeners=function(Q){return M(this,Q,!1)},o.listenerCount=function(H,Q){return typeof H.listenerCount=="function"?H.listenerCount(Q):x.call(H,Q)},o.prototype.listenerCount=x;function x(H){var Q=this._events;if(Q!==void 0){var Y=Q[H];if(typeof Y=="function")return 1;if(Y!==void 0)return Y.length}return 0}o.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]};function T(H,Q){for(var Y=new Array(Q),z=0;z<Q;++z)Y[z]=H[z];return Y}function P(H,Q){for(;Q+1<H.length;Q++)H[Q]=H[Q+1];H.pop()}function F(H){for(var Q=new Array(H.length),Y=0;Y<Q.length;++Y)Q[Y]=H[Y].listener||H[Y];return Q}function j(H,Q){return new Promise(function(Y,z){function se(pe){H.removeListener(Q,le),z(pe)}function le(){typeof H.removeListener=="function"&&H.removeListener("error",se),Y([].slice.call(arguments))}V(H,Q,le,{once:!0}),Q!=="error"&&q(H,se,{once:!0})})}function q(H,Q,Y){typeof H.on=="function"&&V(H,"error",Q,Y)}function V(H,Q,Y,z){if(typeof H.on=="function")z.once?H.once(Q,Y):H.on(Q,Y);else if(typeof H.addEventListener=="function")H.addEventListener(Q,function se(le){z.once&&H.removeEventListener(Q,se),Y(le)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof H)}return Q5.exports}var Rpe=Tpe();const Az={fr:{name:"France",bbox:[[-4.59235,41.380007],[9.560016,51.148506]]},us:{name:"United States",bbox:[[-171.791111,18.91619],[-66.96466,71.357764]]},ru:{name:"Russia",bbox:[[19.66064,41.151416],[190.10042,81.2504]]},ca:{name:"Canada",bbox:[[-140.99778,41.675105],[-52.648099,83.23324]]}},Dpe={de:"Suche",it:"Ricerca",en:"Search",nl:"Zoeken",fr:"Chercher",ca:"Cerca",he:"",ja:"",lv:"Meklt",pt:"Procurar",sr:"",zh:"",cs:"Vyhledvn",hu:"Keress",ka:"",nb:"Ske",sk:"Vyhadvanie",th:"",fi:"Hae",is:"Leita",ko:"",pl:"Szukaj",sl:"Iskanje",fa:"",ru:"",es:"Buscar"},Ppe={en:"No results found",de:"Keine Ergebnisse gefunden",es:"No hay resultados",fr:"Aucun rsultat trouv"},Upe={en:"There was an error reaching the server",de:"Verbindung fehlgeschlagen",es:"Error al conectarse al servidor",fr:"Une erreur est survenue lors de la connexion au serveur"};var A2={placeholder:Dpe,errorNoResults:Ppe,errorConnectionFailed:Upe};const Kpe=/(-?\d+\.?\d*)[, ]+(-?\d+\.?\d*)[ ]*$/;class Lpe{constructor(e,t){this.options={zoom:16,flyTo:!0,trackProximity:!0,showResultsWhileTyping:!1,minLength:2,reverseGeocode:!1,limit:5,enableEventLogging:!0,marker:!0,popup:!1,maplibregl:void 0,collapsed:!1,clearAndBlurOnEsc:!1,clearOnBlur:!1,proximityMinZoom:9,getItemValue:i=>i.text!==void 0?i.text:i.place_name,render:function(i){if(!i.geometry){const o=i.text,s=o.toLowerCase().indexOf(this.query.toLowerCase()),a=this.query.length,c=o.substring(0,s),h=o.substring(s,s+a),m=o.substring(s+a);return'<div class="maplibregl-ctrl-geocoder--suggestion"><svg class="maplibregl-ctrl-geocoder--suggestion-icon" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M22.8702 20.1258H21.4248L20.9125 19.6318C22.7055 17.546 23.785 14.8382 23.785 11.8925C23.785 5.32419 18.4608 0 11.8925 0C5.32419 0 0 5.32419 0 11.8925C0 18.4608 5.32419 23.785 11.8925 23.785C14.8382 23.785 17.546 22.7055 19.6318 20.9125L20.1258 21.4248V22.8702L29.2739 32L32 29.2739L22.8702 20.1258ZM11.8925 20.1258C7.33676 20.1258 3.65923 16.4483 3.65923 11.8925C3.65923 7.33676 7.33676 3.65923 11.8925 3.65923C16.4483 3.65923 20.1258 7.33676 20.1258 11.8925C20.1258 16.4483 16.4483 20.1258 11.8925 20.1258Z" fill="#687078"/></svg><div class="maplibregl-ctrl-geocoder--suggestion-info"><div class="maplibregl-ctrl-geocoder--suggestion-title">'+c+'<span class="maplibregl-ctrl-geocoder--suggestion-match">'+h+"</span>"+m+"</div></div></div>"}const r=i.place_name.split(",");return'<div class="maplibregl-ctrl-geocoder--result"><svg class="maplibregl-ctrl-geocoder--result-icon" viewBox="0 0 24 32" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 0C5.36571 0 0 5.38676 0 12.0471C0 21.0824 12 32 12 32C12 32 24 21.0824 24 12.0471C24 5.38676 18.6343 0 12 0ZM12 16.3496C9.63428 16.3496 7.71429 14.4221 7.71429 12.0471C7.71429 9.67207 9.63428 7.74454 12 7.74454C14.3657 7.74454 16.2857 9.67207 16.2857 12.0471C16.2857 14.4221 14.3657 16.3496 12 16.3496Z" fill="#687078"/></svg><div><div class="maplibregl-ctrl-geocoder--result-title">'+r[0]+'</div><div class="maplibregl-ctrl-geocoder--result-address">'+r.splice(1,r.length).join(",")+"</div></div></div>"},popupRender:i=>{const r=i.place_name.split(",");return'<div class="maplibregl-ctrl-geocoder--suggestion popup-suggestion"><div class="maplibregl-ctrl-geocoder--suggestion-title popup-suggestion-title">'+r[0]+'</div><div class="maplibregl-ctrl-geocoder--suggestion-address popup-suggestion-address">'+r.splice(1,r.length).join(",")+"</div></div>"},showResultMarkers:!0,debounceSearch:200},this._eventEmitter=new Rpe.EventEmitter,this.options=lm({},this.options,t),this.fresh=!0,this.lastSelected=null,this.geocoderApi=e}addTo(e){function t(i,r){if(!document.body.contains(r))throw new Error("Element provided to #addTo() exists, but is not in the DOM");const o=i.onAdd();r.appendChild(o)}if(e instanceof HTMLElement)t(this,e);else if(typeof e=="string"){const i=document.querySelectorAll(e);if(i.length===0)throw new Error("Element "+e+"not found.");if(i.length>1)throw new Error("Geocoder can only be added to a single html element");t(this,i[0])}else if("addControl"in e)e.addControl(this);else throw new Error("Error: addTo must be a maplibre-gl-js map, an html element, or a CSS selector query for a single html element")}onAdd(e){if(e&&typeof e!="string"&&(this._map=e),this.setLanguage(),this.options.localGeocoderOnly&&!this.options.localGeocoder)throw new Error("A localGeocoder function must be specified to use localGeocoderOnly mode");this._onChange=this._onChange.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onPaste=this._onPaste.bind(this),this._onBlur=this._onBlur.bind(this),this._showButton=this._showButton.bind(this),this._hideButton=this._hideButton.bind(this),this._onQueryResult=this._onQueryResult.bind(this),this.clear=this.clear.bind(this),this._updateProximity=this._updateProximity.bind(this),this._collapse=this._collapse.bind(this),this._unCollapse=this._unCollapse.bind(this),this._clear=this._clear.bind(this),this._clearOnBlur=this._clearOnBlur.bind(this);const t=this.container=document.createElement("div");t.className="maplibregl-ctrl-geocoder maplibregl-ctrl maplibregl-ctrl-geocoder maplibregl-ctrl";const i=this.createIcon("search",'<path d="M7.4 2.5c-2.7 0-4.9 2.2-4.9 4.9s2.2 4.9 4.9 4.9c1 0 1.8-.2 2.5-.8l3.7 3.7c.2.2.4.3.8.3.7 0 1.1-.4 1.1-1.1 0-.3-.1-.5-.3-.8L11.4 10c.4-.8.8-1.6.8-2.5.1-2.8-2.1-5-4.8-5zm0 1.6c1.8 0 3.2 1.4 3.2 3.2s-1.4 3.2-3.2 3.2-3.3-1.3-3.3-3.1 1.4-3.3 3.3-3.3z"/>');this._inputEl=document.createElement("input"),this._inputEl.type="search",this._inputEl.className="maplibregl-ctrl-geocoder--input",this.setPlaceholder(),this.options.collapsed&&(this._collapse(),this.container.addEventListener("mouseenter",this._unCollapse),this.container.addEventListener("mouseleave",this._collapse),this._inputEl.addEventListener("focus",this._unCollapse)),(this.options.collapsed||this.options.clearOnBlur)&&this._inputEl.addEventListener("blur",this._onBlur),this._inputEl.addEventListener("keydown",Ipe(this._onKeyDown,this.options.debounceSearch)),this._inputEl.addEventListener("paste",this._onPaste),this._inputEl.addEventListener("change",this._onChange),this.container.addEventListener("mouseenter",this._showButton),this.container.addEventListener("mouseleave",this._hideButton);const r=document.createElement("div");r.classList.add("maplibregl-ctrl-geocoder--pin-right"),this._clearEl=document.createElement("button"),this._clearEl.setAttribute("type","button"),this._clearEl.setAttribute("aria-label","Clear"),this._clearEl.addEventListener("click",this.clear),this._clearEl.className="maplibregl-ctrl-geocoder--button";const o=this.createIcon("close",'<path d="M3.8 2.5c-.6 0-1.3.7-1.3 1.3 0 .3.2.7.5.8L7.2 9 3 13.2c-.3.3-.5.7-.5 1 0 .6.7 1.3 1.3 1.3.3 0 .7-.2 1-.5L9 10.8l4.2 4.2c.2.3.7.3 1 .3.6 0 1.3-.7 1.3-1.3 0-.3-.2-.7-.3-1l-4.4-4L15 4.6c.3-.2.5-.5.5-.8 0-.7-.7-1.3-1.3-1.3-.3 0-.7.2-1 .3L9 7.1 4.8 2.8c-.3-.1-.7-.3-1-.3z"/>');return this._clearEl.appendChild(o),this._loadingEl=this.createIcon("loading",'<path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"/><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"/>'),r.appendChild(this._clearEl),r.appendChild(this._loadingEl),t.appendChild(i),t.appendChild(this._inputEl),t.appendChild(r),this._typeahead=new xpe(this._inputEl,[],{filter:!1,minLength:this.options.minLength,limit:this.options.limit,noInitialSelection:!0}),this.container.addEventListener("click",()=>{this._typeahead.update(this._typeahead.data)}),this.setRenderFunction(this.options.render),this._typeahead.getItemValue=this.options.getItemValue,this.mapMarker=null,this.resultMarkers=[],this._handleMarker=this._handleMarker.bind(this),this._handleResultMarkers=this._handleResultMarkers.bind(this),this._map&&(this.options.trackProximity&&(this._updateProximity(),this._map.on("moveend",this._updateProximity)),this._maplibregl=this.options.maplibregl,!this._maplibregl&&this.options.marker&&(console.error("No maplibregl detected in options. Map markers are disabled. Please set options.maplibregl."),this.options.marker=!1)),t}createIcon(e,t){const i=document.createElementNS("http://www.w3.org/2000/svg","svg");if(i.setAttribute("class","maplibregl-ctrl-geocoder--icon maplibregl-ctrl-geocoder--icon-"+e),i.setAttribute("viewBox","0 0 18 18"),i.setAttribute("xml:space","preserve"),i.setAttribute("width","18"),i.setAttribute("height","18"),"innerHTML"in i)i.innerHTML=t;else{const r=document.createElement("div");r.innerHTML="<svg>"+t.valueOf().toString()+"</svg>";const o=r.firstChild,s=o.firstChild;i.appendChild(s)}return i}onRemove(){return this.container.remove(),this.options.trackProximity&&this._map&&this._map.off("moveend",this._updateProximity),this._removeMarker(),this._map=null,this}_onPaste(e){const t=(e.clipboardData||window.clipboardData).getData("text");t.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(t)}_onKeyDown(e){if(e.keyCode===27&&this.options.clearAndBlurOnEsc)return this._clear(e),this._inputEl.blur();const o=this._inputEl.value;if(!o)return this.fresh=!0,e.keyCode!==9&&this.clear(e),this._clearEl.style.display="none";if(!(e.metaKey||[9,27,37,39,38,40].indexOf(e.keyCode)!==-1)){if(e.keyCode===13)if(!this.options.showResultsWhileTyping)this._typeahead.selected||this._geocode(o);else{this._typeahead.selected==null&&this.geocoderApi.getSuggestions?this._geocode(o,!0):this._typeahead.selected==null&&this.options.showResultMarkers&&this._fitBoundsForMarkers();return}o.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(o)}}_showButton(){this._inputEl.value.length>0&&(this._clearEl.style.display="block")}_hideButton(){this._typeahead.selected&&(this._clearEl.style.display="none")}_onBlur(e){this.options.clearOnBlur&&this._clearOnBlur(e),this.options.collapsed&&this._collapse()}_onChange(){const e=this._typeahead.selected;if(e&&!e.geometry)e.placeId?this._geocode(e.placeId,!0,!0):this._geocode(e.text,!0);else if(e&&JSON.stringify(e)!==this.lastSelected){if(this._clearEl.style.display="none",this.options.flyTo){let t;if(this._removeResultMarkers(),e.properties&&Az[e.properties.short_code])t=lm({},this.options.flyTo),this._map&&this._map.fitBounds(Az[e.properties.short_code].bbox,t);else if(e.bbox){const i=e.bbox;t=lm({},this.options.flyTo),this._map&&this._map.fitBounds([[i[0],i[1]],[i[2],i[3]]],t)}else{const i={zoom:this.options.zoom};t=lm({},i,this.options.flyTo),e.center?t.center=e.center:e.geometry&&e.geometry.type&&e.geometry.type==="Point"&&e.geometry.coordinates&&(t.center=e.geometry.coordinates),this._map&&this._map.flyTo(t)}}this.options.marker&&this._maplibregl&&this._handleMarker(e),this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0),this.lastSelected=JSON.stringify(e),this._typeahead.selected=null,this._eventEmitter.emit("result",{result:e})}}_getConfigForRequest(){return["bbox","limit","proximity","countries","types","language","reverseMode"].reduce((i,r)=>(this.options[r]&&(["countries","types","language"].indexOf(r)>-1?i[r]=this.options[r].split(/[\s,]+/):i[r]=this.options[r],r==="proximity"&&this.options[r]&&typeof this.options[r].longitude=="number"&&typeof this.options[r].latitude=="number"&&(i[r]=[this.options[r].longitude,this.options[r].latitude])),i),{})}_geocode(e){return OO(this,arguments,void 0,function*(t,i=!1,r=!1){this._loadingEl.style.display="block",this._eventEmitter.emit("loading",{query:t});const o=this._getConfigForRequest(),s=this._createGeocodeRequest(o,t,i,r),a=this.options.localGeocoder?this.options.localGeocoder(t)||[]:[];try{const c=yield s;yield this._handleGeocodeResponse(c,o,t,i,a)}catch(c){this._handleGeocodeErrorResponse(c,a)}return s})}_createGeocodeRequest(e,t,i,r){return this.options.localGeocoderOnly?Promise.resolve({}):this.options.reverseGeocode&&Kpe.test(t)?this._createReverseGeocodeRequest(t,e):(e.query=t,this.geocoderApi.getSuggestions?i?this.geocoderApi.searchByPlaceId&&r?this.geocoderApi.searchByPlaceId(e):this.geocoderApi.forwardGeocode(e):this.geocoderApi.getSuggestions(e):this.geocoderApi.forwardGeocode(e))}_createReverseGeocodeRequest(e,t){const i=e.split(/[\s(,)?]+/).map(r=>parseFloat(r)).reverse();return t.query=i,t.limit=1,"proximity"in t&&delete t.proximity,this.geocoderApi.reverseGeocode(t)}_handleGeocodeResponse(e,t,i,r,o){return OO(this,void 0,void 0,function*(){this._loadingEl.style.display="none";let s={};e?s=e:s={type:"FeatureCollection",features:[]},s.config=t,this.fresh&&(this.fresh=!1),s.features=s.features?o.concat(s.features):o;const a=this.options.externalGeocoder?this.options.externalGeocoder(i,s.features,t)||Promise.resolve([]):Promise.resolve([]);try{const h=yield a;s.features=s.features?h.concat(s.features):h}catch{}this.options.filter&&s.features.length&&(s.features=s.features.filter(this.options.filter));let c=[];"suggestions"in s?c=s.suggestions:"place"in s?c=[s.place]:c=s.features,c.length?(this._clearEl.style.display="block",this._typeahead.update(c),(!this.options.showResultsWhileTyping||r)&&this.options.showResultMarkers&&(s.features.length>0||"place"in s)&&this._fitBoundsForMarkers(),this._eventEmitter.emit("results",s)):(this._clearEl.style.display="none",this._typeahead.selected=null,this._renderNoResults(),this._eventEmitter.emit("results",s))})}_handleGeocodeErrorResponse(e,t){this._loadingEl.style.display="none",t.length&&this.options.localGeocoder?(this._clearEl.style.display="block",this._typeahead.update(t)):(this._clearEl.style.display="none",this._typeahead.selected=null,this._renderError()),this._eventEmitter.emit("results",{features:t}),this._eventEmitter.emit("error",{error:e})}_clear(e){e&&e.preventDefault(),this._inputEl.value="",this._typeahead.selected=null,this._typeahead.clear(),this._onChange(),this._clearEl.style.display="none",this._removeMarker(),this._removeResultMarkers(),this.lastSelected=null,this._eventEmitter.emit("clear"),this.fresh=!0}clear(e){this._clear(e),this._inputEl.focus()}_clearOnBlur(e){e.relatedTarget&&this._clear(e)}_onQueryResult(e){if(!("features"in e)||!e.features.length)return;const t=e.features[0];this._typeahead.selected=t,this._inputEl.value=t.place_name,this._onChange()}_updateProximity(){if(this._map)if(this._map.getZoom()>this.options.proximityMinZoom){const e=this._map.getCenter().wrap();this.setProximity({longitude:e.lng,latitude:e.lat})}else this.setProximity(null)}_collapse(){!this._inputEl.value&&this._inputEl!==document.activeElement&&this.container.classList.add("maplibregl-ctrl-geocoder--collapsed")}_unCollapse(){this.container.classList.remove("maplibregl-ctrl-geocoder--collapsed")}query(e){return OO(this,void 0,void 0,function*(){const t=yield this._geocode(e);this._onQueryResult(t)})}_renderError(){const e=`<div class='maplibre-gl-geocoder--error'>${this._localize("errorConnectionFailed")}</div>`;this._renderMessage(e)}_renderNoResults(){const e=`<div class='maplibre-gl-geocoder--error maplibre-gl-geocoder--no-results'>
        ${this._localize("errorNoResults")}</div>`;this._renderMessage(e)}_renderMessage(e){this._typeahead.update([]),this._typeahead.selected=null,this._typeahead.clear(),this._typeahead.renderError(e)}_localize(e){const t=Epe.language(this.options.language.split(",")[0]);return this.options.language&&A2?.[e][t]?A2[e][t]:A2[e].en}_fitBoundsForMarkers(){if(this._typeahead.data.length<1)return;const e=this._typeahead.data.filter(t=>typeof t!="string").slice(0,this.options.limit);if(this._clearEl.style.display="none",this.options.flyTo&&this._maplibregl&&this._map){const i=lm({},{padding:100},this.options.flyTo),r=new this._maplibregl.LngLatBounds;for(const o of e)r.extend(o.geometry.coordinates);this._map.fitBounds(r,i)}return e.length>0&&this._maplibregl&&this._handleResultMarkers(e),this}setInput(e){return this._inputEl.value=e,this._typeahead.selected=null,this._typeahead.clear(),e.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(e),this}setProximity(e){return this.options.proximity=e,this}getProximity(){return this.options.proximity}setRenderFunction(e){return e&&typeof e=="function"&&(this._typeahead.render=e),this}getRenderFunction(){return this._typeahead.render}setLanguage(e){return this.options.language=e||this.options.language||navigator.language,this}getLanguage(){return this.options.language}getZoom(){return this.options.zoom}setZoom(e){return this.options.zoom=e,this}getFlyTo(){return this.options.flyTo}setFlyTo(e){return this.options.flyTo=e,this}getPlaceholder(){return this.options.placeholder}setPlaceholder(e){return this.placeholder=e||this.options.placeholder||this._localize("placeholder"),this._inputEl.placeholder=this.placeholder,this._inputEl.setAttribute("aria-label",this.placeholder),this}getBbox(){return this.options.bbox}setBbox(e){return this.options.bbox=e,this}getCountries(){return this.options.countries}setCountries(e){return this.options.countries=e,this}getTypes(){return this.options.types}setTypes(e){return this.options.types=e,this}getMinLength(){return this.options.minLength}setMinLength(e){return this.options.minLength=e,this._typeahead&&(this._typeahead.options.minLength=e),this}getLimit(){return this.options.limit}setLimit(e){return this.options.limit=e,this._typeahead&&(this._typeahead.options.limit=e),this}getFilter(){return this.options.filter}setFilter(e){return this.options.filter=e,this}setGeocoderApi(e){return this.geocoderApi=e,this}getGeocoderApi(){return this.geocoderApi}_handleMarker(e){if(!this._map)return;this._removeMarker();const i=lm({},{color:"#4668F2"},this.options.marker);this.mapMarker=new this._maplibregl.Marker(i);let r;if(this.options.popup){const s=lm({},{},this.options.popup);r=new this._maplibregl.Popup(s).setHTML(this.options.popupRender(e))}return e.center?(this.mapMarker.setLngLat(e.center).addTo(this._map),this.options.popup&&this.mapMarker.setPopup(r)):e.geometry&&e.geometry.type&&e.geometry.type==="Point"&&e.geometry.coordinates&&(this.mapMarker.setLngLat(e.geometry.coordinates).addTo(this._map),this.options.popup&&this.mapMarker.setPopup(r)),this}_removeMarker(){this.mapMarker&&(this.mapMarker.remove(),this.mapMarker=null)}_handleResultMarkers(e){if(!this._map)return;this._removeResultMarkers();let i=lm({},{color:"#4668F2"},this.options.showResultMarkers);for(const r of e){let o;if(this.options.showResultMarkers){this.options.showResultMarkers&&this.options.showResultMarkers.element&&(o=this.options.showResultMarkers.element.cloneNode(!0),i=lm(i,{element:o}));const s=new this._maplibregl.Marker(lm({},i,{element:o}));let a;if(this.options.popup){const h=lm({},{},this.options.popup);a=new this._maplibregl.Popup(h).setHTML(this.options.popupRender(r))}r.center?(s.setLngLat(r.center).addTo(this._map),this.options.popup&&s.setPopup(a)):r.geometry&&r.geometry.type&&r.geometry.type==="Point"&&r.geometry.coordinates&&(s.setLngLat(r.geometry.coordinates).addTo(this._map),this.options.popup&&s.setPopup(a)),this.resultMarkers.push(s)}}return this}_removeResultMarkers(){this.resultMarkers&&this.resultMarkers.length>0&&(this.resultMarkers.forEach(function(e){e.remove()}),this.resultMarkers=[])}on(e,t){return this._eventEmitter.on(e,t),this}once(e){return new Promise(t=>{this._eventEmitter.once(e,t)})}off(e,t){return this._eventEmitter.removeListener(e,t),this}}function tn(){var n="/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGl.tsx",e="1655c5d10102378b1e2627d777374c6f3c3f21a7",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGl.tsx",statementMap:{0:{start:{line:21,column:26},end:{line:27,column:3}},1:{start:{line:28,column:16},end:{line:28,column:55}},2:{start:{line:29,column:2},end:{line:31,column:3}},3:{start:{line:30,column:4},end:{line:30,column:30}},4:{start:{line:32,column:18},end:{line:32,column:20}},5:{start:{line:33,column:2},end:{line:38,column:5}},6:{start:{line:34,column:19},end:{line:34,column:53}},7:{start:{line:35,column:4},end:{line:37,column:5}},8:{start:{line:36,column:6},end:{line:36,column:33}},9:{start:{line:39,column:23},end:{line:43,column:3}},10:{start:{line:44,column:2},end:{line:44,column:22}},11:{start:{line:47,column:24},end:{line:57,column:3}},12:{start:{line:58,column:14},end:{line:58,column:18}},13:{start:{line:60,column:4},end:{line:60,column:17}},14:{start:{line:61,column:4},end:{line:66,column:6}},15:{start:{line:67,column:4},end:{line:69,column:7}},16:{start:{line:68,column:6},end:{line:68,column:25}},17:{start:{line:72,column:17},end:{line:72,column:22}},18:{start:{line:73,column:4},end:{line:76,column:5}},19:{start:{line:74,column:6},end:{line:74,column:132}},20:{start:{line:77,column:4},end:{line:77,column:18}},21:{start:{line:80,column:16},end:{line:80,column:30}},22:{start:{line:81,column:28},end:{line:81,column:79}},23:{start:{line:82,column:4},end:{line:87,column:5}},24:{start:{line:83,column:6},end:{line:83,column:52}},25:{start:{line:84,column:6},end:{line:84,column:70}},26:{start:{line:85,column:6},end:{line:85,column:70}},27:{start:{line:86,column:6},end:{line:86,column:76}},28:{start:{line:88,column:4},end:{line:90,column:5}},29:{start:{line:89,column:6},end:{line:89,column:43}},30:{start:{line:91,column:4},end:{line:96,column:5}},31:{start:{line:92,column:6},end:{line:92,column:59}},32:{start:{line:93,column:6},end:{line:95,column:14}},33:{start:{line:94,column:8},end:{line:94,column:36}},34:{start:{line:99,column:20},end:{line:108,column:5}},35:{start:{line:109,column:21},end:{line:109,column:53}},36:{start:{line:110,column:4},end:{line:110,column:53}},37:{start:{line:111,column:16},end:{line:111,column:43}},38:{start:{line:112,column:26},end:{line:116,column:5}},39:{start:{line:113,column:21},end:{line:113,column:36}},40:{start:{line:114,column:19},end:{line:114,column:32}},41:{start:{line:115,column:6},end:{line:115,column:44}},42:{start:{line:117,column:4},end:{line:117,column:20}},43:{start:{line:118,column:4},end:{line:118,column:56}},44:{start:{line:119,column:4},end:{line:119,column:56}},45:{start:{line:120,column:4},end:{line:120,column:62}},46:{start:{line:121,column:21},end:{line:121,column:43}},47:{start:{line:122,column:24},end:{line:122,column:41}},48:{start:{line:123,column:4},end:{line:123,column:45}},49:{start:{line:124,column:16},end:{line:124,column:74}},50:{start:{line:125,column:4},end:{line:125,column:37}},51:{start:{line:126,column:20},end:{line:126,column:49}},52:{start:{line:127,column:17},end:{line:127,column:36}},53:{start:{line:128,column:25},end:{line:130,column:6}},54:{start:{line:131,column:20},end:{line:162,column:6}},55:{start:{line:139,column:8},end:{line:139,column:82}},56:{start:{line:141,column:62},end:{line:141,column:141}},57:{start:{line:143,column:8},end:{line:160,column:9}},58:{start:{line:144,column:10},end:{line:146,column:13}},59:{start:{line:145,column:12},end:{line:145,column:94}},60:{start:{line:147,column:10},end:{line:147,column:25}},61:{start:{line:149,column:10},end:{line:158,column:13}},62:{start:{line:150,column:12},end:{line:157,column:15}},63:{start:{line:159,column:10},end:{line:159,column:25}},64:{start:{line:163,column:4},end:{line:163,column:28}},65:{start:{line:164,column:4},end:{line:172,column:7}},66:{start:{line:165,column:6},end:{line:171,column:9}},67:{start:{line:173,column:4},end:{line:178,column:7}},68:{start:{line:174,column:6},end:{line:174,column:40}},69:{start:{line:174,column:33},end:{line:174,column:40}},70:{start:{line:175,column:6},end:{line:177,column:9}},71:{start:{line:179,column:4},end:{line:181,column:7}},72:{start:{line:180,column:6},end:{line:180,column:30}},73:{start:{line:182,column:4},end:{line:186,column:7}},74:{start:{line:183,column:6},end:{line:185,column:9}},75:{start:{line:187,column:4},end:{line:187,column:37}},76:{start:{line:188,column:4},end:{line:188,column:37}},77:{start:{line:190,column:22},end:{line:193,column:3}},78:{start:{line:191,column:18},end:{line:191,column:82}},79:{start:{line:191,column:66},end:{line:191,column:81}},80:{start:{line:192,column:4},end:{line:192,column:36}},81:{start:{line:195,column:27},end:{line:228,column:5}},82:{start:{line:197,column:25},end:{line:197,column:27}},83:{start:{line:198,column:8},end:{line:223,column:9}},84:{start:{line:199,column:26},end:{line:199,column:138}},85:{start:{line:200,column:27},end:{line:200,column:47}},86:{start:{line:201,column:26},end:{line:201,column:47}},87:{start:{line:202,column:10},end:{line:220,column:11}},88:{start:{line:203,column:27},end:{line:206,column:13}},89:{start:{line:207,column:26},end:{line:218,column:13}},90:{start:{line:219,column:12},end:{line:219,column:33}},91:{start:{line:222,column:10},end:{line:222,column:69}},92:{start:{line:224,column:8},end:{line:226,column:10}},93:{start:{line:229,column:21},end:{line:232,column:6}},94:{start:{line:233,column:4},end:{line:233,column:41}},95:{start:{line:234,column:4},end:{line:234,column:20}},96:{start:{line:237,column:14},end:{line:237,column:26}},97:{start:{line:238,column:4},end:{line:238,column:53}},98:{start:{line:239,column:4},end:{line:239,column:49}},99:{start:{line:240,column:4},end:{line:251,column:6}},100:{start:{line:247,column:10},end:{line:247,column:29}},101:{start:{line:254,column:22},end:{line:254,column:62}}},fnMap:{0:{name:"buildInspectStyle",decl:{start:{line:20,column:9},end:{line:20,column:26}},loc:{start:{line:20,column:78},end:{line:45,column:1}},line:20},1:{name:"(anonymous_1)",decl:{start:{line:33,column:48},end:{line:33,column:49}},loc:{start:{line:33,column:62},end:{line:38,column:3}},line:33},2:{name:"(anonymous_2)",decl:{start:{line:48,column:17},end:{line:48,column:18}},loc:{start:{line:48,column:23},end:{line:49,column:5}},line:48},3:{name:"(anonymous_3)",decl:{start:{line:50,column:18},end:{line:50,column:19}},loc:{start:{line:50,column:24},end:{line:51,column:5}},line:50},4:{name:"(anonymous_4)",decl:{start:{line:52,column:19},end:{line:52,column:20}},loc:{start:{line:52,column:25},end:{line:53,column:5}},line:52},5:{name:"(anonymous_5)",decl:{start:{line:54,column:14},end:{line:54,column:15}},loc:{start:{line:54,column:20},end:{line:55,column:5}},line:54},6:{name:"(anonymous_6)",decl:{start:{line:59,column:2},end:{line:59,column:3}},loc:{start:{line:59,column:21},end:{line:70,column:3}},line:59},7:{name:"(anonymous_7)",decl:{start:{line:67,column:34},end:{line:67,column:35}},loc:{start:{line:67,column:40},end:{line:69,column:5}},line:67},8:{name:"(anonymous_8)",decl:{start:{line:71,column:2},end:{line:71,column:3}},loc:{start:{line:71,column:46},end:{line:78,column:3}},line:71},9:{name:"(anonymous_9)",decl:{start:{line:79,column:2},end:{line:79,column:3}},loc:{start:{line:79,column:23},end:{line:97,column:3}},line:79},10:{name:"(anonymous_10)",decl:{start:{line:93,column:17},end:{line:93,column:18}},loc:{start:{line:93,column:23},end:{line:95,column:7}},line:93},11:{name:"(anonymous_11)",decl:{start:{line:98,column:2},end:{line:98,column:3}},loc:{start:{line:98,column:22},end:{line:189,column:3}},line:98},12:{name:"(anonymous_12)",decl:{start:{line:112,column:26},end:{line:112,column:27}},loc:{start:{line:112,column:32},end:{line:116,column:5}},line:112},13:{name:"(anonymous_13)",decl:{start:{line:138,column:24},end:{line:138,column:25}},loc:{start:{line:138,column:44},end:{line:140,column:7}},line:138},14:{name:"(anonymous_14)",decl:{start:{line:141,column:25},end:{line:141,column:26}},loc:{start:{line:141,column:62},end:{line:141,column:141}},line:141},15:{name:"(anonymous_15)",decl:{start:{line:142,column:19},end:{line:142,column:20}},loc:{start:{line:142,column:33},end:{line:161,column:7}},line:142},16:{name:"(anonymous_16)",decl:{start:{line:144,column:36},end:{line:144,column:37}},loc:{start:{line:144,column:42},end:{line:146,column:11}},line:144},17:{name:"(anonymous_17)",decl:{start:{line:149,column:36},end:{line:149,column:37}},loc:{start:{line:149,column:42},end:{line:158,column:11}},line:149},18:{name:"(anonymous_18)",decl:{start:{line:164,column:25},end:{line:164,column:26}},loc:{start:{line:164,column:31},end:{line:172,column:5}},line:164},19:{name:"(anonymous_19)",decl:{start:{line:173,column:19},end:{line:173,column:20}},loc:{start:{line:173,column:26},end:{line:178,column:5}},line:173},20:{name:"(anonymous_20)",decl:{start:{line:179,column:20},end:{line:179,column:21}},loc:{start:{line:179,column:27},end:{line:181,column:5}},line:179},21:{name:"(anonymous_21)",decl:{start:{line:182,column:19},end:{line:182,column:20}},loc:{start:{line:182,column:27},end:{line:186,column:5}},line:182},22:{name:"(anonymous_22)",decl:{start:{line:190,column:22},end:{line:190,column:23}},loc:{start:{line:190,column:30},end:{line:193,column:3}},line:190},23:{name:"(anonymous_23)",decl:{start:{line:191,column:55},end:{line:191,column:56}},loc:{start:{line:191,column:66},end:{line:191,column:81}},line:191},24:{name:"(anonymous_24)",decl:{start:{line:194,column:2},end:{line:194,column:3}},loc:{start:{line:194,column:20},end:{line:235,column:3}},line:194},25:{name:"(anonymous_25)",decl:{start:{line:196,column:22},end:{line:196,column:23}},loc:{start:{line:196,column:40},end:{line:227,column:7}},line:196},26:{name:"(anonymous_26)",decl:{start:{line:236,column:2},end:{line:236,column:3}},loc:{start:{line:236,column:11},end:{line:252,column:3}},line:236},27:{name:"(anonymous_27)",decl:{start:{line:246,column:13},end:{line:246,column:14}},loc:{start:{line:246,column:20},end:{line:248,column:9}},line:246}},branchMap:{0:{loc:{start:{line:29,column:2},end:{line:31,column:3}},type:"if",locations:[{start:{line:29,column:2},end:{line:31,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:29},1:{loc:{start:{line:35,column:4},end:{line:37,column:5}},type:"if",locations:[{start:{line:35,column:4},end:{line:37,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:35},2:{loc:{start:{line:35,column:8},end:{line:35,column:64}},type:"binary-expr",locations:[{start:{line:35,column:8},end:{line:35,column:32}},{start:{line:35,column:36},end:{line:35,column:64}}],line:35},3:{loc:{start:{line:74,column:15},end:{line:74,column:131}},type:"binary-expr",locations:[{start:{line:74,column:15},end:{line:74,column:71}},{start:{line:74,column:75},end:{line:74,column:131}}],line:74},4:{loc:{start:{line:82,column:4},end:{line:87,column:5}},type:"if",locations:[{start:{line:82,column:4},end:{line:87,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:82},5:{loc:{start:{line:88,column:4},end:{line:90,column:5}},type:"if",locations:[{start:{line:88,column:4},end:{line:90,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:88},6:{loc:{start:{line:88,column:8},end:{line:88,column:98}},type:"binary-expr",locations:[{start:{line:88,column:8},end:{line:88,column:26}},{start:{line:88,column:30},end:{line:88,column:98}}],line:88},7:{loc:{start:{line:91,column:4},end:{line:96,column:5}},type:"if",locations:[{start:{line:91,column:4},end:{line:96,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:91},8:{loc:{start:{line:91,column:8},end:{line:91,column:59}},type:"binary-expr",locations:[{start:{line:91,column:8},end:{line:91,column:26}},{start:{line:91,column:30},end:{line:91,column:59}}],line:91},9:{loc:{start:{line:143,column:8},end:{line:160,column:9}},type:"if",locations:[{start:{line:143,column:8},end:{line:160,column:9}},{start:{line:148,column:15},end:{line:160,column:9}}],line:143},10:{loc:{start:{line:174,column:6},end:{line:174,column:40}},type:"if",locations:[{start:{line:174,column:6},end:{line:174,column:40}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:174}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0,87:0,88:0,89:0,90:0,91:0,92:0,93:0,94:0,95:0,96:0,97:0,98:0,99:0,100:0,101:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGl.tsx"],names:[],mappings:"AA8LwB;AA9LxB,OAAO,WAAW;AAClB,SAAQ,kBAAiB;AACzB,OAAO,gBAAsI;AAC7I,OAAO,qBAAqB;AAC5B,OAAO,YAAY;AACnB,OAAO,6BAA6B;AACpC,OAAO,uCAAgE;AACvE,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,SAAgC,6BAA6B;AAC7D,OAAO;AACP,OAAO;AACP,OAAO;AACP,OAAO,sBAAoF;AAC3F,OAAO;AACP,SAAS,uBAA6C;AACtD,OAAO,aAAa;AACpB,SAAS,gBAAgB;AAEzB,SAAS,kBAAkB,kBAAsC,eAAmC,kBAAqC;AACvI,QAAM,kBAAkB;AAAA,IACtB,MAAM;AAAA,IACN,QAAQ;AAAA,IACR,SAAS;AAAA,MACP,oBAAoB;AAAA,IACtB;AAAA,EACF;AAEA,QAAM,QAAQ,sBAAsB,gBAAgB;AACpD,MAAG,OAAO;AACR,kBAAc,KAAK,KAAK;AAAA,EAC1B;AAEA,QAAM,UAA+C,CAAC;AAEtD,SAAO,KAAK,iBAAiB,OAAO,EAAE,QAAQ,cAAY;AACxD,UAAM,SAAS,iBAAiB,QAAQ,QAAQ;AAChD,QAAG,OAAO,SAAS,YAAY,OAAO,SAAS,cAAc;AAC3D,cAAQ,QAAQ,IAAI;AAAA,IACtB;AAAA,EACF,CAAC;AAED,QAAM,eAAe;AAAA,IACnB,GAAG;AAAA,IACH;AAAA,IACA,QAAQ,CAAC,eAAe,EAAE,OAAO,aAAqC;AAAA,EACxE;AACA,SAAO;AACT;AAyBA,MAAM,8BAA8B,MAAM,UAA0D;AAAA,EAClG,OAAO,eAAe;AAAA,IACpB,aAAa,MAAM;AAAA,IAAC;AAAA,IACpB,cAAc,MAAM;AAAA,IAAC;AAAA,IACrB,eAAe,MAAM;AAAA,IAAC;AAAA,IACtB,UAAU,MAAM;AAAA,IAAC;AAAA,IACjB,SAAS,CAAC;AAAA,EACZ;AAAA,EACA,YAAmC;AAAA,EAEnC,YAAY,OAAmC;AAC7C,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,KAAK;AAAA,MACL,SAAS;AAAA,MACT,UAAU;AAAA,MACV,aAAa;AAAA,IACf;AACA,YAAQ,GAAG,mBAAmB,MAAM;AAClC,WAAK,YAAY;AAAA,IACnB,CAAC;AAAA,EACH;AAAA,EAGA,sBAAsB,WAAuC,WAA+B;AAC1F,QAAI,SAAS;AACb,QAAI;AACF,eAAS,KAAK,UAAU,KAAK,KAAK,MAAM,KAAK,UAAU,SAAS,KAAK,KAAK,UAAU,KAAK,KAAK,MAAM,KAAK,UAAU,SAAS;AAAA,IAC9H,SAAQ,IAAI;AAAA,IAEZ;AACA,WAAO;AAAA,EACT;AAAA,EAEA,qBAAqB;AACnB,UAAM,MAAM,KAAK,MAAM;AAEvB,UAAM,kBAAkB,KAAK,MAAM,oBAAoB,KAAK,MAAM,QAAQ;AAC1E,QAAI,KAAK;AAIP,UAAI,SAAS,iBAAiB,EAAC,MAAM,KAAI,CAAC;AAC1C,UAAI,qBAAqB,KAAK,MAAM,SAAS;AAC7C,UAAI,qBAAqB,KAAK,MAAM,SAAS;AAC7C,UAAI,wBAAwB,KAAK,MAAM,SAAS;AAAA,IAClD;AAEA,QAAG,KAAK,MAAM,WAAW,KAAK,MAAM,uBAAuB,KAAK,MAAM,QAAQ,iBAAiB;AAC7F,WAAK,MAAM,QAAQ,gBAAgB;AAAA,IACrC;AACA,QAAI,KAAK,MAAM,WAAW,KAAK,MAAM,oBAAoB;AACvD,WAAK,MAAM,QAAQ,iBAAiB,eAAe;AAEnD,iBAAW,MAAM;AACf,aAAK,MAAM,QAAS,OAAO;AAAA,MAC7B,GAAG,GAAG;AAAA,IACR;AAAA,EAEF;AAAA,EAEA,oBAAoB;AAClB,UAAM,UAAU;AAAA,MACd,GAAG,KAAK,MAAM;AAAA,MACd,WAAW,KAAK;AAAA,MAChB,OAAO,KAAK,MAAM;AAAA,MAClB,MAAM;AAAA,MACN,SAAS;AAAA;AAAA;AAAA,MAGT,0BAA0B;AAAA,IAC5B;AAEA,UAAM,WAAW,IAAI,SAAS,EAAC,UAAU,KAAI,CAAC;AAC9C,eAAW,YAAY,WAAU,SAAS,IAAI;AAC9C,UAAM,MAAM,IAAI,WAAW,IAAI,OAAO;AAEtC,UAAM,gBAAgB,MAAM;AAC1B,YAAM,SAAS,IAAI,UAAU;AAC7B,YAAM,OAAO,IAAI,QAAQ;AACzB,WAAK,MAAM,SAAS,EAAC,QAAQ,KAAI,CAAC;AAAA,IACpC;AACA,kBAAc;AAEd,QAAI,qBAAqB,QAAQ;AACjC,QAAI,qBAAqB,QAAQ;AACjC,QAAI,wBAAwB,QAAQ;AAEpC,UAAM,WAAW,KAAK,aAAa,GAAG;AAEtC,UAAM,cAAc,IAAI,YAAY;AACpC,QAAI,WAAW,aAAa,WAAW;AAEvC,UAAM,MAAM,IAAI,WAAW,kBAAkB,EAAC,gBAAe,KAAI,CAAC;AAClE,QAAI,WAAW,KAAK,WAAW;AAE/B,UAAM,UAAU,SAAS,cAAc,KAAK;AAC5C,UAAM,OAAO,WAAW,OAAO;AAE/B,UAAM,eAAe,IAAI,WAAW,MAAM;AAAA,MACxC,cAAc;AAAA,IAChB,CAAC;AAED,UAAM,UAAU,IAAI,gBAAgB;AAAA,MAClC,OAAO;AAAA,MACP,cAAc;AAAA,MACd,qBAAqB;AAAA,MACrB,4BAA4B;AAAA,MAC5B,mBAAmB;AAAA,MACnB,wBAAwB;AAAA,MACxB,kBAAkB,CAAC,SAAiB,UAAkB;AACpD,eAAO,MAAM,OAAO,YAAY,SAAS,KAAK,CAAC,EAAE,WAAW,GAAG,EAAE,OAAO;AAAA,MAC1E;AAAA,MACA,mBAAmB,CAAC,kBAAsC,kBAAsC,kBAAkB,kBAAkB,eAAe,KAAK,MAAM,gBAAgB;AAAA,MAC9K,aAAa,CAAC,aAA+B;AAC3C,YAAG,KAAK,MAAM,oBAAoB;AAChC,uBAAa,KAAK,QAAQ,MAAM;AAC9B,iBAAK,OAAO,oBAAC,qCAAkC,UAAoB,CAAE;AAAA,UACvE,CAAC;AACD,iBAAO;AAAA,QACT,OAAO;AACL,uBAAa,KAAK,QAAQ,MAAM;AAC9B,iBAAK,OAAO;AAAA,cAAC;AAAA;AAAA,gBACX;AAAA,gBACA,eAAe,KAAK;AAAA,gBACpB,MAAM,KAAK,MAAM;AAAA;AAAA,YACnB,CAAG;AAAA,UACL,CAAC;AACD,iBAAO;AAAA,QACT;AAAA,MACF;AAAA,IACF,CAAC;AACD,QAAI,WAAW,OAAO;AAEtB,QAAI,GAAG,cAAc,MAAM;AACzB,WAAK,SAAS;AAAA,QACZ;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA,MAAM,IAAI,QAAQ;AAAA,MACpB,CAAC;AAAA,IACH,CAAC;AAED,QAAI,GAAG,QAAQ,OAAK;AAClB,UAAG,EAAE,aAAa,OAAQ;AAC1B,WAAK,MAAM,aAAc;AAAA,QACvB,KAAK,KAAK,MAAM;AAAA,MAClB,CAAC;AAAA,IACH,CAAC;AAED,QAAI,GAAG,SAAS,OAAK;AACnB,cAAQ,IAAI,SAAS,CAAC;AAAA,IACxB,CAAC;AAED,QAAI,GAAG,QAAQ,QAAM;AACnB,WAAK,SAAS;AAAA,QACZ,MAAM,IAAI,QAAQ;AAAA,MACpB,CAAC;AAAA,IACH,CAAC;AAED,QAAI,GAAG,WAAW,aAAa;AAC/B,QAAI,GAAG,WAAW,aAAa;AAAA,EACjC;AAAA,EAEA,oBAAoB,CAAC,OAAe;AAClC,UAAM,QAAQ,KAAK,MAAM,SAAS,OAAO,UAAU,WAAS,MAAM,OAAO,EAAE;AAC3E,SAAK,MAAM,cAAc,KAAK;AAAA,EAChC;AAAA,EAEA,aAAa,KAAU;AACrB,UAAM,iBAAiB;AAAA,MACrB,gBAAgB,OAAO,WAAsC;AAC3D,cAAM,WAAW,CAAC;AAClB,YAAI;AACF,gBAAM,UAAU,gDAAgD,OAAO,KAAK;AAC5E,gBAAM,WAAW,MAAM,MAAM,OAAO;AACpC,gBAAM,UAAU,MAAM,SAAS,KAAK;AACpC,qBAAW,WAAW,QAAQ,UAAU;AACtC,kBAAM,SAAS;AAAA,cACb,QAAQ,KAAK,CAAC,KACT,QAAQ,KAAK,CAAC,IAAI,QAAQ,KAAK,CAAC,KAAK;AAAA,cAC1C,QAAQ,KAAK,CAAC,KACT,QAAQ,KAAK,CAAC,IAAI,QAAQ,KAAK,CAAC,KAAK;AAAA,YAC5C;AACA,kBAAM,QAAQ;AAAA,cACZ,MAAM;AAAA,cACN,UAAU;AAAA,gBACR,MAAM;AAAA,gBACN,aAAa;AAAA,cACf;AAAA,cACA,YAAY,QAAQ,WAAW;AAAA,cAC/B,YAAY,QAAQ;AAAA,cACpB,MAAM,QAAQ,WAAW;AAAA,cACzB,YAAY,CAAC,OAAO;AAAA,cACpB;AAAA,YACF;AACA,qBAAS,KAAK,KAAK;AAAA,UACrB;AAAA,QACF,SAAS,GAAG;AACV,kBAAQ,MAAM,wCAAwC,CAAC,EAAE;AAAA,QAC3D;AACA,eAAO;AAAA,UACL;AAAA,QACF;AAAA,MACF;AAAA,IACF;AACA,UAAM,WAAW,IAAI,iBAAiB,gBAAgB;AAAA,MACpD,aAAa,KAAK,MAAM,EAAE,QAAQ;AAAA,MAClC,YAAY;AAAA,IACd,CAAC;AACD,QAAI,WAAW,UAAU,UAAU;AACnC,WAAO;AAAA,EACT;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,SAAK,MAAM,UAAU,eAAe,EAAE,QAAQ,CAAC;AAC/C,SAAK,MAAM,aAAa,SAAS,EAAE,OAAO,CAAC;AAC3C,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,MAAK;AAAA,QACL,cAAY,EAAE,UAAU;AAAA,QACxB,KAAK,OAAK;AAAC,eAAK,YAAY;AAAA,QAAE;AAAA,QAC9B,eAAY;AAAA;AAAA,IACb;AAAA,EACH;AACF;AAEA,MAAM,gBAAgB,gBAAgB,EAAE,qBAAqB;AAC7D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"1655c5d10102378b1e2627d777374c6f3c3f21a7"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return tn=function(){return s},s}tn();function Fpe(n,e,t){tn().f[0]++;const i=(tn().s[0]++,{id:"background",type:"background",paint:{"background-color":"#1c1f24"}}),r=(tn().s[1]++,gpe(t));tn().s[2]++,r?(tn().b[0][0]++,tn().s[3]++,e.push(r)):tn().b[0][1]++;const o=(tn().s[4]++,{});tn().s[5]++,Object.keys(n.sources).forEach(a=>{tn().f[1]++;const c=(tn().s[6]++,n.sources[a]);tn().s[7]++,tn().b[2][0]++,c.type!=="raster"&&(tn().b[2][1]++,c.type!=="raster-dem")?(tn().b[1][0]++,tn().s[8]++,o[a]=c):tn().b[1][1]++});const s=(tn().s[9]++,{...n,sources:o,layers:[i].concat(e)});return tn().s[10]++,s}class zpe extends En.Component{static defaultProps=(tn().s[11]++,{onMapLoaded:()=>{tn().f[2]++},onDataChange:()=>{tn().f[3]++},onLayerSelect:()=>{tn().f[4]++},onChange:()=>{tn().f[5]++},options:{}});container=(tn().s[12]++,null);constructor(e){tn().f[6]++,tn().s[13]++,super(e),tn().s[14]++,this.state={map:null,inspect:null,geocoder:null,zoomControl:null},tn().s[15]++,_A.on("languageChanged",()=>{tn().f[7]++,tn().s[16]++,this.forceUpdate()})}shouldComponentUpdate(e,t){tn().f[8]++;let i=(tn().s[17]++,!1);tn().s[18]++;try{tn().s[19]++,i=(tn().b[3][0]++,JSON.stringify(this.props)!==JSON.stringify(e)||(tn().b[3][1]++,JSON.stringify(this.state)!==JSON.stringify(t)))}catch{}return tn().s[20]++,i}componentDidUpdate(){tn().f[9]++;const e=(tn().s[21]++,this.state.map),t=(tn().s[22]++,this.props.replaceAccessTokens(this.props.mapStyle));tn().s[23]++,e?(tn().b[4][0]++,tn().s[24]++,e.setStyle(t,{diff:!0}),tn().s[25]++,e.showTileBoundaries=this.props.options?.showTileBoundaries,tn().s[26]++,e.showCollisionBoxes=this.props.options?.showCollisionBoxes,tn().s[27]++,e.showOverdrawInspector=this.props.options?.showOverdrawInspector):tn().b[4][1]++,tn().s[28]++,tn().b[6][0]++,this.state.inspect&&(tn().b[6][1]++,this.props.inspectModeEnabled!==this.state.inspect._showInspectMap)?(tn().b[5][0]++,tn().s[29]++,this.state.inspect.toggleInspector()):tn().b[5][1]++,tn().s[30]++,tn().b[8][0]++,this.state.inspect&&(tn().b[8][1]++,this.props.inspectModeEnabled)?(tn().b[7][0]++,tn().s[31]++,this.state.inspect.setOriginalStyle(t),tn().s[32]++,setTimeout(()=>{tn().f[10]++,tn().s[33]++,this.state.inspect.render()},500)):tn().b[7][1]++}componentDidMount(){tn().f[11]++;const e=(tn().s[34]++,{...this.props.options,container:this.container,style:this.props.mapStyle,hash:!0,maxZoom:24,localIdeographFontFamily:!1}),t=(tn().s[35]++,new $ue({metadata:!0}));tn().s[36]++,g_.addProtocol("pmtiles",t.tile);const i=(tn().s[37]++,new g_.Map(e));tn().s[38]++;const r=()=>{tn().f[12]++;const M=(tn().s[39]++,i.getCenter()),x=(tn().s[40]++,i.getZoom());tn().s[41]++,this.props.onChange({center:M,zoom:x})};tn().s[42]++,r(),tn().s[43]++,i.showTileBoundaries=e.showTileBoundaries,tn().s[44]++,i.showCollisionBoxes=e.showCollisionBoxes,tn().s[45]++,i.showOverdrawInspector=e.showOverdrawInspector;const o=(tn().s[46]++,this.initGeocoder(i)),s=(tn().s[47]++,new fpe);tn().s[48]++,i.addControl(s,"top-right");const a=(tn().s[49]++,new g_.NavigationControl({visualizePitch:!0}));tn().s[50]++,i.addControl(a,"top-right");const c=(tn().s[51]++,document.createElement("div")),h=(tn().s[52]++,XH.createRoot(c)),m=(tn().s[53]++,new g_.Popup({closeOnClick:!1})),y=(tn().s[54]++,new mP({popup:m,showMapPopup:!0,showMapPopupOnHover:!1,showInspectMapPopupOnHover:!0,showInspectButton:!1,blockHoverPopupOnClick:!0,assignLayerColor:(M,x)=>(tn().f[13]++,tn().s[55]++,Vu(WX.brightColor(M,x)).desaturate(.5).string()),buildInspectStyle:(M,x)=>(tn().f[14]++,tn().s[56]++,Fpe(M,x,this.props.highlightedLayer)),renderPopup:M=>(tn().f[15]++,tn().s[57]++,this.props.inspectModeEnabled?(tn().b[9][0]++,tn().s[58]++,m.once("open",()=>{tn().f[16]++,tn().s[59]++,h.render(ie.jsx(tpe,{features:M}))}),tn().s[60]++,c):(tn().b[9][1]++,tn().s[61]++,m.once("open",()=>{tn().f[17]++,tn().s[62]++,h.render(ie.jsx(VX,{features:M,onLayerSelect:this.onLayerSelectById,zoom:this.state.zoom}))}),tn().s[63]++,c))}));tn().s[64]++,i.addControl(y),tn().s[65]++,i.on("style.load",()=>{tn().f[18]++,tn().s[66]++,this.setState({map:i,inspect:y,geocoder:o,zoomControl:s,zoom:i.getZoom()})}),tn().s[67]++,i.on("data",M=>{if(tn().f[19]++,tn().s[68]++,M.dataType!=="tile"){tn().b[10][0]++,tn().s[69]++;return}else tn().b[10][1]++;tn().s[70]++,this.props.onDataChange({map:this.state.map})}),tn().s[71]++,i.on("error",M=>{tn().f[20]++,tn().s[72]++,console.log("ERROR",M)}),tn().s[73]++,i.on("zoom",M=>{tn().f[21]++,tn().s[74]++,this.setState({zoom:i.getZoom()})}),tn().s[75]++,i.on("dragend",r),tn().s[76]++,i.on("zoomend",r)}onLayerSelectById=(tn().s[77]++,e=>{tn().f[22]++;const t=(tn().s[78]++,this.props.mapStyle.layers.findIndex(i=>(tn().f[23]++,tn().s[79]++,i.id===e)));tn().s[80]++,this.props.onLayerSelect(t)});initGeocoder(e){tn().f[24]++;const t=(tn().s[81]++,{forwardGeocode:async r=>{tn().f[25]++;const o=(tn().s[82]++,[]);tn().s[83]++;try{const s=(tn().s[84]++,`https://nominatim.openstreetmap.org/search?q=${r.query}&format=geojson&polygon_geojson=1&addressdetails=1`),a=(tn().s[85]++,await fetch(s)),c=(tn().s[86]++,await a.json());tn().s[87]++;for(const h of c.features){const m=(tn().s[88]++,[h.bbox[0]+(h.bbox[2]-h.bbox[0])/2,h.bbox[1]+(h.bbox[3]-h.bbox[1])/2]),y=(tn().s[89]++,{type:"Feature",geometry:{type:"Point",coordinates:m},place_name:h.properties.display_name,properties:h.properties,text:h.properties.display_name,place_type:["place"],center:m});tn().s[90]++,o.push(y)}}catch(s){tn().s[91]++,console.error(`Failed to forwardGeocode with error: ${s}`)}return tn().s[92]++,{features:o}}}),i=(tn().s[93]++,new Lpe(t,{placeholder:this.props.t("Search"),maplibregl:g_}));return tn().s[94]++,e.addControl(i,"top-left"),tn().s[95]++,i}render(){tn().f[26]++;const e=(tn().s[96]++,this.props.t);return tn().s[97]++,this.state.geocoder?.setPlaceholder(e("Search")),tn().s[98]++,this.state.zoomControl?.setLabel(e("Zoom:")),tn().s[99]++,ie.jsx("div",{className:"maputnik-map__map",role:"region","aria-label":e("Map view"),ref:t=>{tn().f[27]++,tn().s[100]++,this.container=t},"data-wd-key":"maplibre:map"})}}const jpe=(tn().s[101]++,No()(zpe));var Npe=8,Gpe={version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},Wpe={"*":{type:"source"}},Qpe=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],qpe={type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},Ype={type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},$pe={type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},Vpe={type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},Hpe={type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},Zpe={type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},Xpe={id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},Jpe=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],eme={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},tme={"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},nme={"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},ime={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},rme={"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},ome={"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},sme={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},ame={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},lme={type:"array",value:"*"},ume={type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},cme={type:"enum",values:{Point:{},LineString:{},Polygon:{}}},Ame={type:"array",minimum:0,maximum:24,value:["number","color"],length:2},hme={type:"array",value:"*",minimum:1},dme={anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},fme={"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},pme={source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},mme={type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},gme=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],yme={"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},vme={"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},bme={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},Cme={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},_me={"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},xme={"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Mme={"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},wme={"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Sme={duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},Eme={"*":{type:"string"}},Ome={$version:Npe,$root:Gpe,sources:Wpe,source:Qpe,source_vector:qpe,source_raster:Ype,source_raster_dem:$pe,source_geojson:Vpe,source_video:Hpe,source_image:Zpe,layer:Xpe,layout:Jpe,layout_background:eme,layout_fill:tme,layout_circle:nme,layout_heatmap:ime,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:rme,layout_symbol:ome,layout_raster:sme,layout_hillshade:ame,"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:lme,filter_operator:ume,geometry_type:cme,function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:Ame,expression:hme,light:dme,sky:fme,terrain:pme,projection:mme,paint:gme,paint_fill:yme,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:vme,paint_circle:bme,paint_heatmap:Cme,paint_symbol:_me,paint_raster:xme,paint_hillshade:Mme,"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:wme,transition:Sme,"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:Eme};const Bme=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Ime(n,e){const t={};for(const i in n)i!=="ref"&&(t[i]=n[i]);return Bme.forEach(i=>{i in e&&(t[i]=e[i])}),t}function eJ(n){n=n.slice();const e=Object.create(null);for(let t=0;t<n.length;t++)e[n[t].id]=n[t];for(let t=0;t<n.length;t++)"ref"in n[t]&&(n[t]=Ime(n[t],e[n[t].ref]));return n}class Tg extends Error{constructor(e,t){super(t),this.message=t,this.key=e}}class yP{constructor(e,t=[]){this.parent=e,this.bindings={};for(const[i,r]of t)this.bindings[i]=r}concat(e){return new yP(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return this.bindings[e]?!0:this.parent?this.parent.has(e):!1}}const _E={kind:"null"},ei={kind:"number"},vo={kind:"string"},io={kind:"boolean"},Yg={kind:"color"},xE={kind:"projectionDefinition"},Mb={kind:"object"},Jr={kind:"value"},kme={kind:"error"},ME={kind:"collator"},wE={kind:"formatted"},SE={kind:"padding"},W3={kind:"colorArray"},EE={kind:"numberArray"},X4={kind:"resolvedImage"},OE={kind:"variableAnchorOffsetCollection"};function vf(n,e){return{kind:"array",itemType:n,N:e}}function pl(n){if(n.kind==="array"){const e=pl(n.itemType);return typeof n.N=="number"?`array<${e}, ${n.N}>`:n.itemType.kind==="value"?"array":`array<${e}>`}else return n.kind}const Tme=[_E,ei,vo,io,Yg,xE,wE,Mb,vf(Jr),SE,EE,W3,X4,OE];function Q3(n,e){if(e.kind==="error")return null;if(n.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!Q3(n.itemType,e.itemType))&&(typeof n.N!="number"||n.N===e.N))return null}else{if(n.kind===e.kind)return null;if(n.kind==="value"){for(const t of Tme)if(!Q3(t,e))return null}}return`Expected ${pl(n)} but found ${pl(e)} instead.`}function vP(n,e){return e.some(t=>t.kind===n.kind)}function wb(n,e){return e.some(t=>t==="null"?n===null:t==="array"?Array.isArray(n):t==="object"?n&&!Array.isArray(n)&&typeof n=="object":t===typeof n)}function gy(n,e){return n.kind==="array"&&e.kind==="array"?n.itemType.kind===e.itemType.kind&&typeof n.N=="number":n.kind===e.kind}const tJ=.96422,nJ=1,iJ=.82521,rJ=4/29,j_=6/29,oJ=3*j_*j_,Rme=j_*j_*j_,Dme=Math.PI/180,Pme=180/Math.PI;function sJ(n){return n=n%360,n<0&&(n+=360),n}function aJ([n,e,t,i]){n=PO(n),e=PO(e),t=PO(t);let r,o;const s=UO((.2225045*n+.7168786*e+.0606169*t)/nJ);n===e&&e===t?r=o=s:(r=UO((.4360747*n+.3850649*e+.1430804*t)/tJ),o=UO((.0139322*n+.0971045*e+.7141733*t)/iJ));const a=116*s-16;return[a<0?0:a,500*(r-s),200*(s-o),i]}function PO(n){return n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function UO(n){return n>Rme?Math.pow(n,1/3):n/oJ+rJ}function lJ([n,e,t,i]){let r=(n+16)/116,o=isNaN(e)?r:r+e/500,s=isNaN(t)?r:r-t/200;return r=nJ*LO(r),o=tJ*LO(o),s=iJ*LO(s),[KO(3.1338561*o-1.6168667*r-.4906146*s),KO(-.9787684*o+1.9161415*r+.033454*s),KO(.0719453*o-.2289914*r+1.4052427*s),i]}function KO(n){return n=n<=.00304?12.92*n:1.055*Math.pow(n,1/2.4)-.055,n<0?0:n>1?1:n}function LO(n){return n>j_?n*n*n:oJ*(n-rJ)}function Ume(n){const[e,t,i,r]=aJ(n),o=Math.sqrt(t*t+i*i);return[Math.round(o*1e4)?sJ(Math.atan2(i,t)*Pme):NaN,o,e,r]}function Kme([n,e,t,i]){return n=isNaN(n)?0:n*Dme,lJ([t,Math.cos(n)*e,Math.sin(n)*e,i])}function Lme([n,e,t,i]){n=sJ(n),e/=100,t/=100;function r(o){const s=(o+n/30)%12,a=e*Math.min(t,1-t);return t-a*Math.max(-1,Math.min(s-3,9-s,1))}return[r(0),r(8),r(4),i]}const Fme=Object.hasOwn||function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};function uJ(n,e){return Fme(n,e)?n[e]:void 0}function zme(n){if(n=n.toLowerCase().trim(),n==="transparent")return[0,0,0,0];const e=uJ(jme,n);if(e){const[r,o,s]=e;return[r/255,o/255,s/255,1]}if(n.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(n)){const o=n.length<6?1:2;let s=1;return[q5(n.slice(s,s+=o)),q5(n.slice(s,s+=o)),q5(n.slice(s,s+=o)),q5(n.slice(s,s+o)||"ff")]}if(n.startsWith("rgb")){const r=/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,o=n.match(r);if(o){const[s,a,c,h,m,y,M,x,T,P,F,j]=o,q=[h||" ",M||" ",P].join("");if(q==="  "||q==="  /"||q===",,"||q===",,,"){const V=[c,y,T].join(""),H=V==="%%%"?100:V===""?255:0;if(H){const Q=[y_(+a/H,0,1),y_(+m/H,0,1),y_(+x/H,0,1),F?hz(+F,j):1];if(dz(Q))return Q}}return}}const t=/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,i=n.match(t);if(i){const[r,o,s,a,c,h,m,y,M]=i,x=[s||" ",c||" ",m].join("");if(x==="  "||x==="  /"||x===",,"||x===",,,"){const T=[+o,y_(+a,0,100),y_(+h,0,100),y?hz(+y,M):1];if(dz(T))return Lme(T)}}}function q5(n){return parseInt(n.padEnd(2,n),16)/255}function hz(n,e){return y_(e?n/100:n,0,1)}function y_(n,e,t){return Math.min(Math.max(e,n),t)}function dz(n){return!n.some(Number.isNaN)}const jme={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function Sb(n,e,t){return n+t*(e-n)}function q3(n,e,t){return n.map((i,r)=>Sb(i,e[r],t))}class Vs{constructor(e,t,i,r=1,o=!0){this.r=e,this.g=t,this.b=i,this.a=r,o||(this.r*=r,this.g*=r,this.b*=r,r||this.overwriteGetter("rgb",[e,t,i,r]))}static parse(e){if(e instanceof Vs)return e;if(typeof e!="string")return;const t=zme(e);if(t)return new Vs(...t,!1)}get rgb(){const{r:e,g:t,b:i,a:r}=this,o=r||1/0;return this.overwriteGetter("rgb",[e/o,t/o,i/o,r])}get hcl(){return this.overwriteGetter("hcl",Ume(this.rgb))}get lab(){return this.overwriteGetter("lab",aJ(this.rgb))}overwriteGetter(e,t){return Object.defineProperty(this,e,{value:t}),t}toString(){const[e,t,i,r]=this.rgb;return`rgba(${[e,t,i].map(o=>Math.round(o*255)).join(",")},${r})`}static interpolate(e,t,i,r="rgb"){switch(r){case"rgb":{const[o,s,a,c]=q3(e.rgb,t.rgb,i);return new Vs(o,s,a,c,!1)}case"hcl":{const[o,s,a,c]=e.hcl,[h,m,y,M]=t.hcl;let x,T;if(!isNaN(o)&&!isNaN(h)){let V=h-o;h>o&&V>180?V-=360:h<o&&o-h>180&&(V+=360),x=o+i*V}else isNaN(o)?isNaN(h)?x=NaN:(x=h,(a===1||a===0)&&(T=m)):(x=o,(y===1||y===0)&&(T=s));const[P,F,j,q]=Kme([x,T??Sb(s,m,i),Sb(a,y,i),Sb(c,M,i)]);return new Vs(P,F,j,q,!1)}case"lab":{const[o,s,a,c]=lJ(q3(e.lab,t.lab,i));return new Vs(o,s,a,c,!1)}}}}Vs.black=new Vs(0,0,0,1);Vs.white=new Vs(1,1,1,1);Vs.transparent=new Vs(0,0,0,0);Vs.red=new Vs(1,0,0,1);class bP{constructor(e,t,i){e?this.sensitivity=t?"variant":"case":this.sensitivity=t?"accent":"base",this.locale=i,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,t){return this.collator.compare(e,t)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const Nme=["bottom","center","top"];class T9{constructor(e,t,i,r,o,s){this.text=e,this.image=t,this.scale=i,this.fontStack=r,this.textColor=o,this.verticalAlign=s}}class o1{constructor(e){this.sections=e}static fromString(e){return new o1([new T9(e,null,null,null,null,null)])}isEmpty(){return this.sections.length===0?!0:!this.sections.some(e=>e.text.length!==0||e.image&&e.image.name.length!==0)}static factory(e){return e instanceof o1?e:o1.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map(e=>e.text).join("")}}class bm{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof bm)return e;if(typeof e=="number")return new bm([e,e,e,e]);if(Array.isArray(e)&&!(e.length<1||e.length>4)){for(const t of e)if(typeof t!="number")return;switch(e.length){case 1:e=[e[0],e[0],e[0],e[0]];break;case 2:e=[e[0],e[1],e[0],e[1]];break;case 3:e=[e[0],e[1],e[2],e[1]];break}return new bm(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,i){return new bm(q3(e.values,t.values,i))}}class Cm{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof Cm)return e;if(typeof e=="number")return new Cm([e]);if(Array.isArray(e)){for(const t of e)if(typeof t!="number")return;return new Cm(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,i){return new Cm(q3(e.values,t.values,i))}}class Cf{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof Cf)return e;if(typeof e=="string"){const i=Vs.parse(e);return i?new Cf([i]):void 0}if(!Array.isArray(e))return;const t=[];for(const i of e){if(typeof i!="string")return;const r=Vs.parse(i);if(!r)return;t.push(r)}return new Cf(t)}toString(){return JSON.stringify(this.values)}static interpolate(e,t,i,r="rgb"){const o=[];if(e.values.length!=t.values.length)throw new Error(`colorArray: Arrays have mismatched length (${e.values.length} vs. ${t.values.length}), cannot interpolate.`);for(let s=0;s<e.values.length;s++)o.push(Vs.interpolate(e.values[s],t.values[s],i,r));return new Cf(o)}}class Ol extends Error{constructor(e){super(e),this.name="RuntimeError"}toJSON(){return this.message}}const Gme=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class $g{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof $g)return e;if(!(!Array.isArray(e)||e.length<1||e.length%2!==0)){for(let t=0;t<e.length;t+=2){const i=e[t],r=e[t+1];if(typeof i!="string"||!Gme.has(i)||!Array.isArray(r)||r.length!==2||typeof r[0]!="number"||typeof r[1]!="number")return}return new $g(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,i){const r=e.values,o=t.values;if(r.length!==o.length)throw new Ol(`Cannot interpolate values of different length. from: ${e.toString()}, to: ${t.toString()}`);const s=[];for(let a=0;a<r.length;a+=2){if(r[a]!==o[a])throw new Ol(`Cannot interpolate values containing mismatched anchors. from[${a}]: ${r[a]}, to[${a}]: ${o[a]}`);s.push(r[a]);const[c,h]=r[a+1],[m,y]=o[a+1];s.push([Sb(c,m,i),Sb(h,y,i)])}return new $g(s)}}class lv{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new lv({name:e,available:!1}):null}}class pm{constructor(e,t,i){this.from=e,this.to=t,this.transition=i}static interpolate(e,t,i){return new pm(e,t,i)}static parse(e){if(e instanceof pm)return e;if(Array.isArray(e)&&e.length===3&&typeof e[0]=="string"&&typeof e[1]=="string"&&typeof e[2]=="number")return new pm(e[0],e[1],e[2]);if(typeof e=="object"&&typeof e.from=="string"&&typeof e.to=="string"&&typeof e.transition=="number")return new pm(e.from,e.to,e.transition);if(typeof e=="string")return new pm(e,e,1)}}function cJ(n,e,t,i){return typeof n=="number"&&n>=0&&n<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof t=="number"&&t>=0&&t<=255?typeof i>"u"||typeof i=="number"&&i>=0&&i<=1?null:`Invalid rgba value [${[n,e,t,i].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof i=="number"?[n,e,t,i]:[n,e,t]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Y3(n){if(n===null||typeof n=="string"||typeof n=="boolean"||typeof n=="number"||n instanceof pm||n instanceof Vs||n instanceof bP||n instanceof o1||n instanceof bm||n instanceof Cm||n instanceof Cf||n instanceof $g||n instanceof lv)return!0;if(Array.isArray(n)){for(const e of n)if(!Y3(e))return!1;return!0}else if(typeof n=="object"){for(const e in n)if(!Y3(n[e]))return!1;return!0}else return!1}function Xu(n){if(n===null)return _E;if(typeof n=="string")return vo;if(typeof n=="boolean")return io;if(typeof n=="number")return ei;if(n instanceof Vs)return Yg;if(n instanceof pm)return xE;if(n instanceof bP)return ME;if(n instanceof o1)return wE;if(n instanceof bm)return SE;if(n instanceof Cm)return EE;if(n instanceof Cf)return W3;if(n instanceof $g)return OE;if(n instanceof lv)return X4;if(Array.isArray(n)){const e=n.length;let t;for(const i of n){const r=Xu(i);if(!t)t=r;else{if(t===r)continue;t=Jr;break}}return vf(t||Jr,e)}else return Mb}function h3(n){const e=typeof n;return n===null?"":e==="string"||e==="number"||e==="boolean"?String(n):n instanceof Vs||n instanceof pm||n instanceof o1||n instanceof bm||n instanceof Cm||n instanceof Cf||n instanceof $g||n instanceof lv?n.toString():JSON.stringify(n)}class cx{constructor(e,t){this.type=e,this.value=t}static parse(e,t){if(e.length!==2)return t.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!Y3(e[1]))return t.error("invalid value");const i=e[1];let r=Xu(i);const o=t.expectedType;return r.kind==="array"&&r.N===0&&o&&o.kind==="array"&&(typeof o.N!="number"||o.N===0)&&(r=o),new cx(r,i)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const Y5={string:vo,number:ei,boolean:io,object:Mb};class mm{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let i=1,r;const o=e[0];if(o==="array"){let a;if(e.length>2){const h=e[1];if(typeof h!="string"||!(h in Y5)||h==="object")return t.error('The item type argument of "array" must be one of string, number, boolean',1);a=Y5[h],i++}else a=Jr;let c;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);c=e[2],i++}r=vf(a,c)}else{if(!Y5[o])throw new Error(`Types doesn't contain name = ${o}`);r=Y5[o]}const s=[];for(;i<e.length;i++){const a=t.parse(e[i],i,Jr);if(!a)return null;s.push(a)}return new mm(r,s)}evaluate(e){for(let t=0;t<this.args.length;t++){const i=this.args[t].evaluate(e);if(Q3(this.type,Xu(i))){if(t===this.args.length-1)throw new Ol(`Expected value to be of type ${pl(this.type)}, but found ${pl(Xu(i))} instead.`)}else return i}throw new Error}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}const fz={"to-boolean":io,"to-color":Yg,"to-number":ei,"to-string":vo};class Py{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const i=e[0];if(!fz[i])throw new Error(`Can't parse ${i} as it is not part of the known types`);if((i==="to-boolean"||i==="to-string")&&e.length!==2)return t.error("Expected one argument.");const r=fz[i],o=[];for(let s=1;s<e.length;s++){const a=t.parse(e[s],s,Jr);if(!a)return null;o.push(a)}return new Py(r,o)}evaluate(e){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(e);case"color":{let t,i;for(const r of this.args){if(t=r.evaluate(e),i=null,t instanceof Vs)return t;if(typeof t=="string"){const o=e.parseColor(t);if(o)return o}else if(Array.isArray(t)&&(t.length<3||t.length>4?i=`Invalid rgba value ${JSON.stringify(t)}: expected an array containing either three or four numeric values.`:i=cJ(t[0],t[1],t[2],t[3]),!i))return new Vs(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new Ol(i||`Could not parse color from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"padding":{let t;for(const i of this.args){t=i.evaluate(e);const r=bm.parse(t);if(r)return r}throw new Ol(`Could not parse padding from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"numberArray":{let t;for(const i of this.args){t=i.evaluate(e);const r=Cm.parse(t);if(r)return r}throw new Ol(`Could not parse numberArray from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"colorArray":{let t;for(const i of this.args){t=i.evaluate(e);const r=Cf.parse(t);if(r)return r}throw new Ol(`Could not parse colorArray from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"variableAnchorOffsetCollection":{let t;for(const i of this.args){t=i.evaluate(e);const r=$g.parse(t);if(r)return r}throw new Ol(`Could not parse variableAnchorOffsetCollection from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"number":{let t=null;for(const i of this.args){if(t=i.evaluate(e),t===null)return 0;const r=Number(t);if(!isNaN(r))return r}throw new Ol(`Could not convert ${JSON.stringify(t)} to number.`)}case"formatted":return o1.fromString(h3(this.args[0].evaluate(e)));case"resolvedImage":return lv.fromString(h3(this.args[0].evaluate(e)));case"projectionDefinition":return this.args[0].evaluate(e);default:return h3(this.args[0].evaluate(e))}}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}const Wme=["Unknown","Point","LineString","Polygon"];class AJ{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Wme[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(e){let t=this._parseColorCache.get(e);return t||(t=Vs.parse(e),this._parseColorCache.set(e,t)),t}}class BE{constructor(e,t,i=[],r,o=new yP,s=[]){this.registry=e,this.path=i,this.key=i.map(a=>`[${a}]`).join(""),this.scope=o,this.errors=s,this.expectedType=r,this._isConstant=t}parse(e,t,i,r,o={}){return t?this.concat(t,i,r)._parse(e,o):this._parse(e,o)}_parse(e,t){(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number")&&(e=["literal",e]);function i(r,o,s){return s==="assert"?new mm(o,[r]):s==="coerce"?new Py(o,[r]):r}if(Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const r=e[0];if(typeof r!="string")return this.error(`Expression name must be a string, but found ${typeof r} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const o=this.registry[r];if(o){let s=o.parse(e,this);if(!s)return null;if(this.expectedType){const a=this.expectedType,c=s.type;if((a.kind==="string"||a.kind==="number"||a.kind==="boolean"||a.kind==="object"||a.kind==="array")&&c.kind==="value")s=i(s,a,t.typeAnnotation||"assert");else if(a.kind==="projectionDefinition"&&["string","array"].includes(c.kind)||["color","formatted","resolvedImage"].includes(a.kind)&&["value","string"].includes(c.kind)||["padding","numberArray"].includes(a.kind)&&["value","number","array"].includes(c.kind)||a.kind==="colorArray"&&["value","string","array"].includes(c.kind)||a.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(c.kind))s=i(s,a,t.typeAnnotation||"coerce");else if(this.checkSubtype(a,c))return null}if(!(s instanceof cx)&&s.type.kind!=="resolvedImage"&&this._isConstant(s)){const a=new AJ;try{s=new cx(s.type,s.evaluate(a))}catch(c){return this.error(c.message),null}}return s}return this.error(`Unknown expression "${r}". If you wanted a literal array, use ["literal", [...]].`,0)}else return typeof e>"u"?this.error("'undefined' value invalid. Use null instead."):typeof e=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof e} instead.`)}concat(e,t,i){const r=typeof e=="number"?this.path.concat(e):this.path,o=i?this.scope.concat(i):this.scope;return new BE(this.registry,this._isConstant,r,t||null,o,this.errors)}error(e,...t){const i=`${this.key}${t.map(r=>`[${r}]`).join("")}`;this.errors.push(new Tg(i,e))}checkSubtype(e,t){const i=Q3(e,t);return i&&this.error(i),i}}class IE{constructor(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const t of this.bindings)e(t[1]);e(this.result)}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const i=[];for(let o=1;o<e.length-1;o+=2){const s=e[o];if(typeof s!="string")return t.error(`Expected string, but found ${typeof s} instead.`,o);if(/[^a-zA-Z0-9_]/.test(s))return t.error("Variable names must contain only alphanumeric characters or '_'.",o);const a=t.parse(e[o+1],o+1);if(!a)return null;i.push([s,a])}const r=t.parse(e[e.length-1],e.length-1,t.expectedType,i);return r?new IE(i,r):null}outputDefined(){return this.result.outputDefined()}}class kE{constructor(e,t){this.type=t.type,this.name=e,this.boundExpression=t}static parse(e,t){if(e.length!==2||typeof e[1]!="string")return t.error("'var' expression requires exactly one string literal argument.");const i=e[1];return t.scope.has(i)?new kE(i,t.scope.get(i)):t.error(`Unknown variable "${i}". Make sure "${i}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}}class CP{constructor(e,t,i){this.type=e,this.index=t,this.input=i}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,ei),r=t.parse(e[2],2,vf(t.expectedType||Jr));if(!i||!r)return null;const o=r.type;return new CP(o.itemType,i,r)}evaluate(e){const t=this.index.evaluate(e),i=this.input.evaluate(e);if(t<0)throw new Ol(`Array index out of bounds: ${t} < 0.`);if(t>=i.length)throw new Ol(`Array index out of bounds: ${t} > ${i.length-1}.`);if(t!==Math.floor(t))throw new Ol(`Array index must be an integer, but found ${t} instead.`);return i[t]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}}class _P{constructor(e,t){this.type=io,this.needle=e,this.haystack=t}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,Jr),r=t.parse(e[2],2,Jr);return!i||!r?null:vP(i.type,[io,vo,ei,_E,Jr])?new _P(i,r):t.error(`Expected first argument to be of type boolean, string, number or null, but found ${pl(i.type)} instead`)}evaluate(e){const t=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!i)return!1;if(!wb(t,["boolean","string","number","null"]))throw new Ol(`Expected first argument to be of type boolean, string, number or null, but found ${pl(Xu(t))} instead.`);if(!wb(i,["string","array"]))throw new Ol(`Expected second argument to be of type array or string, but found ${pl(Xu(i))} instead.`);return i.indexOf(t)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}}class Ww{constructor(e,t,i){this.type=ei,this.needle=e,this.haystack=t,this.fromIndex=i}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,Jr),r=t.parse(e[2],2,Jr);if(!i||!r)return null;if(!vP(i.type,[io,vo,ei,_E,Jr]))return t.error(`Expected first argument to be of type boolean, string, number or null, but found ${pl(i.type)} instead`);if(e.length===4){const o=t.parse(e[3],3,ei);return o?new Ww(i,r,o):null}else return new Ww(i,r)}evaluate(e){const t=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!wb(t,["boolean","string","number","null"]))throw new Ol(`Expected first argument to be of type boolean, string, number or null, but found ${pl(Xu(t))} instead.`);let r;if(this.fromIndex&&(r=this.fromIndex.evaluate(e)),wb(i,["string"])){const o=i.indexOf(t,r);return o===-1?-1:[...i.slice(0,o)].length}else{if(wb(i,["array"]))return i.indexOf(t,r);throw new Ol(`Expected second argument to be of type array or string, but found ${pl(Xu(i))} instead.`)}}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}}class xP{constructor(e,t,i,r,o,s){this.inputType=e,this.type=t,this.input=i,this.cases=r,this.outputs=o,this.otherwise=s}static parse(e,t){if(e.length<5)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!==1)return t.error("Expected an even number of arguments.");let i,r;t.expectedType&&t.expectedType.kind!=="value"&&(r=t.expectedType);const o={},s=[];for(let h=2;h<e.length-1;h+=2){let m=e[h];const y=e[h+1];Array.isArray(m)||(m=[m]);const M=t.concat(h);if(m.length===0)return M.error("Expected at least one branch label.");for(const T of m){if(typeof T!="number"&&typeof T!="string")return M.error("Branch labels must be numbers or strings.");if(typeof T=="number"&&Math.abs(T)>Number.MAX_SAFE_INTEGER)return M.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof T=="number"&&Math.floor(T)!==T)return M.error("Numeric branch labels must be integer values.");if(!i)i=Xu(T);else if(M.checkSubtype(i,Xu(T)))return null;if(typeof o[String(T)]<"u")return M.error("Branch labels must be unique.");o[String(T)]=s.length}const x=t.parse(y,h,r);if(!x)return null;r=r||x.type,s.push(x)}const a=t.parse(e[1],1,Jr);if(!a)return null;const c=t.parse(e[e.length-1],e.length-1,r);return!c||a.type.kind!=="value"&&t.concat(1).checkSubtype(i,a.type)?null:new xP(i,r,a,o,s,c)}evaluate(e){const t=this.input.evaluate(e);return(Xu(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}}class MP{constructor(e,t,i){this.type=e,this.branches=t,this.otherwise=i}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!==0)return t.error("Expected an odd number of arguments.");let i;t.expectedType&&t.expectedType.kind!=="value"&&(i=t.expectedType);const r=[];for(let s=1;s<e.length-1;s+=2){const a=t.parse(e[s],s,io);if(!a)return null;const c=t.parse(e[s+1],s+1,i);if(!c)return null;r.push([a,c]),i=i||c.type}const o=t.parse(e[e.length-1],e.length-1,i);if(!o)return null;if(!i)throw new Error("Can't infer output type");return new MP(i,r,o)}evaluate(e){for(const[t,i]of this.branches)if(t.evaluate(e))return i.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[t,i]of this.branches)e(t),e(i);e(this.otherwise)}outputDefined(){return this.branches.every(([e,t])=>t.outputDefined())&&this.otherwise.outputDefined()}}class Qw{constructor(e,t,i,r){this.type=e,this.input=t,this.beginIndex=i,this.endIndex=r}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,Jr),r=t.parse(e[2],2,ei);if(!i||!r)return null;if(!vP(i.type,[vf(Jr),vo,Jr]))return t.error(`Expected first argument to be of type array or string, but found ${pl(i.type)} instead`);if(e.length===4){const o=t.parse(e[3],3,ei);return o?new Qw(i.type,i,r,o):null}else return new Qw(i.type,i,r)}evaluate(e){const t=this.input.evaluate(e),i=this.beginIndex.evaluate(e);let r;if(this.endIndex&&(r=this.endIndex.evaluate(e)),wb(t,["string"]))return[...t].slice(i,r).join("");if(wb(t,["array"]))return t.slice(i,r);throw new Ol(`Expected first argument to be of type array or string, but found ${pl(Xu(t))} instead.`)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}}function hJ(n,e){const t=n.length-1;let i=0,r=t,o=0,s,a;for(;i<=r;)if(o=Math.floor((i+r)/2),s=n[o],a=n[o+1],s<=e){if(o===t||e<a)return o;i=o+1}else if(s>e)r=o-1;else throw new Ol("Input is not a number.");return 0}class TE{constructor(e,t,i){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(const[r,o]of i)this.labels.push(r),this.outputs.push(o)}static parse(e,t){if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");const i=t.parse(e[1],1,ei);if(!i)return null;const r=[];let o=null;t.expectedType&&t.expectedType.kind!=="value"&&(o=t.expectedType);for(let s=1;s<e.length;s+=2){const a=s===1?-1/0:e[s],c=e[s+1],h=s,m=s+1;if(typeof a!="number")return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',h);if(r.length&&r[r.length-1][0]>=a)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',h);const y=t.parse(c,m,o);if(!y)return null;o=o||y.type,r.push([a,y])}return new TE(o,i,r)}evaluate(e){const t=this.labels,i=this.outputs;if(t.length===1)return i[0].evaluate(e);const r=this.input.evaluate(e);if(r<=t[0])return i[0].evaluate(e);const o=t.length;if(r>=t[o-1])return i[o-1].evaluate(e);const s=hJ(t,r);return i[s].evaluate(e)}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}}function Qme(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var FO,pz;function qme(){if(pz)return FO;pz=1,FO=n;function n(e,t,i,r){this.cx=3*e,this.bx=3*(i-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(r-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=t,this.p2x=i,this.p2y=r}return n.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,t){if(t===void 0&&(t=1e-6),e<0)return 0;if(e>1)return 1;for(var i=e,r=0;r<8;r++){var o=this.sampleCurveX(i)-e;if(Math.abs(o)<t)return i;var s=this.sampleCurveDerivativeX(i);if(Math.abs(s)<1e-6)break;i=i-o/s}var a=0,c=1;for(i=e,r=0;r<20&&(o=this.sampleCurveX(i),!(Math.abs(o-e)<t));r++)e>o?a=i:c=i,i=(c-a)*.5+a;return i},solve:function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}},FO}var Yme=qme(),$me=Qme(Yme);class Vg{constructor(e,t,i,r,o){this.type=e,this.operator=t,this.interpolation=i,this.input=r,this.labels=[],this.outputs=[];for(const[s,a]of o)this.labels.push(s),this.outputs.push(a)}static interpolationFactor(e,t,i,r){let o=0;if(e.name==="exponential")o=zO(t,e.base,i,r);else if(e.name==="linear")o=zO(t,1,i,r);else if(e.name==="cubic-bezier"){const s=e.controlPoints;o=new $me(s[0],s[1],s[2],s[3]).solve(zO(t,1,i,r))}return o}static parse(e,t){let[i,r,o,...s]=e;if(!Array.isArray(r)||r.length===0)return t.error("Expected an interpolation type expression.",1);if(r[0]==="linear")r={name:"linear"};else if(r[0]==="exponential"){const h=r[1];if(typeof h!="number")return t.error("Exponential interpolation requires a numeric base.",1,1);r={name:"exponential",base:h}}else if(r[0]==="cubic-bezier"){const h=r.slice(1);if(h.length!==4||h.some(m=>typeof m!="number"||m<0||m>1))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);r={name:"cubic-bezier",controlPoints:h}}else return t.error(`Unknown interpolation type ${String(r[0])}`,1,0);if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");if(o=t.parse(o,2,ei),!o)return null;const a=[];let c=null;(i==="interpolate-hcl"||i==="interpolate-lab")&&t.expectedType!=W3?c=Yg:t.expectedType&&t.expectedType.kind!=="value"&&(c=t.expectedType);for(let h=0;h<s.length;h+=2){const m=s[h],y=s[h+1],M=h+3,x=h+4;if(typeof m!="number")return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',M);if(a.length&&a[a.length-1][0]>=m)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',M);const T=t.parse(y,x,c);if(!T)return null;c=c||T.type,a.push([m,T])}return!gy(c,ei)&&!gy(c,xE)&&!gy(c,Yg)&&!gy(c,SE)&&!gy(c,EE)&&!gy(c,W3)&&!gy(c,OE)&&!gy(c,vf(ei))?t.error(`Type ${pl(c)} is not interpolatable.`):new Vg(c,i,r,o,a)}evaluate(e){const t=this.labels,i=this.outputs;if(t.length===1)return i[0].evaluate(e);const r=this.input.evaluate(e);if(r<=t[0])return i[0].evaluate(e);const o=t.length;if(r>=t[o-1])return i[o-1].evaluate(e);const s=hJ(t,r),a=t[s],c=t[s+1],h=Vg.interpolationFactor(this.interpolation,r,a,c),m=i[s].evaluate(e),y=i[s+1].evaluate(e);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return Sb(m,y,h);case"color":return Vs.interpolate(m,y,h);case"padding":return bm.interpolate(m,y,h);case"colorArray":return Cf.interpolate(m,y,h);case"numberArray":return Cm.interpolate(m,y,h);case"variableAnchorOffsetCollection":return $g.interpolate(m,y,h);case"array":return q3(m,y,h);case"projectionDefinition":return pm.interpolate(m,y,h)}case"interpolate-hcl":switch(this.type.kind){case"color":return Vs.interpolate(m,y,h,"hcl");case"colorArray":return Cf.interpolate(m,y,h,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return Vs.interpolate(m,y,h,"lab");case"colorArray":return Cf.interpolate(m,y,h,"lab")}}}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}}function zO(n,e,t,i){const r=i-t,o=n-t;return r===0?0:e===1?o/r:(Math.pow(e,o)-1)/(Math.pow(e,r)-1)}class $3{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let i=null;const r=t.expectedType;r&&r.kind!=="value"&&(i=r);const o=[];for(const a of e.slice(1)){const c=t.parse(a,1+o.length,i,void 0,{typeAnnotation:"omit"});if(!c)return null;i=i||c.type,o.push(c)}if(!i)throw new Error("No output type");return r&&o.some(a=>Q3(r,a.type))?new $3(Jr,o):new $3(i,o)}evaluate(e){let t=null,i=0,r;for(const o of this.args)if(i++,t=o.evaluate(e),t&&t instanceof lv&&!t.available&&(r||(r=t.name),t=null,i===this.args.length&&(t=r)),t!==null)break;return t}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}function mz(n,e){return n==="=="||n==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function Vme(n,e,t){return e===t}function Hme(n,e,t){return e!==t}function Zme(n,e,t){return e<t}function Xme(n,e,t){return e>t}function Jme(n,e,t){return e<=t}function ege(n,e,t){return e>=t}function dJ(n,e,t,i){return i.compare(e,t)===0}function tge(n,e,t,i){return!dJ(n,e,t,i)}function nge(n,e,t,i){return i.compare(e,t)<0}function ige(n,e,t,i){return i.compare(e,t)>0}function rge(n,e,t,i){return i.compare(e,t)<=0}function oge(n,e,t,i){return i.compare(e,t)>=0}function Px(n,e,t){const i=n!=="=="&&n!=="!=";return class fJ{constructor(o,s,a){this.type=io,this.lhs=o,this.rhs=s,this.collator=a,this.hasUntypedArgument=o.type.kind==="value"||s.type.kind==="value"}static parse(o,s){if(o.length!==3&&o.length!==4)return s.error("Expected two or three arguments.");const a=o[0];let c=s.parse(o[1],1,Jr);if(!c)return null;if(!mz(a,c.type))return s.concat(1).error(`"${a}" comparisons are not supported for type '${pl(c.type)}'.`);let h=s.parse(o[2],2,Jr);if(!h)return null;if(!mz(a,h.type))return s.concat(2).error(`"${a}" comparisons are not supported for type '${pl(h.type)}'.`);if(c.type.kind!==h.type.kind&&c.type.kind!=="value"&&h.type.kind!=="value")return s.error(`Cannot compare types '${pl(c.type)}' and '${pl(h.type)}'.`);i&&(c.type.kind==="value"&&h.type.kind!=="value"?c=new mm(h.type,[c]):c.type.kind!=="value"&&h.type.kind==="value"&&(h=new mm(c.type,[h])));let m=null;if(o.length===4){if(c.type.kind!=="string"&&h.type.kind!=="string"&&c.type.kind!=="value"&&h.type.kind!=="value")return s.error("Cannot use collator to compare non-string types.");if(m=s.parse(o[3],3,ME),!m)return null}return new fJ(c,h,m)}evaluate(o){const s=this.lhs.evaluate(o),a=this.rhs.evaluate(o);if(i&&this.hasUntypedArgument){const c=Xu(s),h=Xu(a);if(c.kind!==h.kind||!(c.kind==="string"||c.kind==="number"))throw new Ol(`Expected arguments for "${n}" to be (string, string) or (number, number), but found (${c.kind}, ${h.kind}) instead.`)}if(this.collator&&!i&&this.hasUntypedArgument){const c=Xu(s),h=Xu(a);if(c.kind!=="string"||h.kind!=="string")return e(o,s,a)}return this.collator?t(o,s,a,this.collator.evaluate(o)):e(o,s,a)}eachChild(o){o(this.lhs),o(this.rhs),this.collator&&o(this.collator)}outputDefined(){return!0}}}const sge=Px("==",Vme,dJ),age=Px("!=",Hme,tge),lge=Px("<",Zme,nge),uge=Px(">",Xme,ige),cge=Px("<=",Jme,rge),Age=Px(">=",ege,oge);class RE{constructor(e,t,i){this.type=ME,this.locale=i,this.caseSensitive=e,this.diacriticSensitive=t}static parse(e,t){if(e.length!==2)return t.error("Expected one argument.");const i=e[1];if(typeof i!="object"||Array.isArray(i))return t.error("Collator options argument must be an object.");const r=t.parse(i["case-sensitive"]===void 0?!1:i["case-sensitive"],1,io);if(!r)return null;const o=t.parse(i["diacritic-sensitive"]===void 0?!1:i["diacritic-sensitive"],1,io);if(!o)return null;let s=null;return i.locale&&(s=t.parse(i.locale,1,vo),!s)?null:new RE(r,o,s)}evaluate(e){return new bP(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}}class wP{constructor(e,t,i,r,o){this.type=vo,this.number=e,this.locale=t,this.currency=i,this.minFractionDigits=r,this.maxFractionDigits=o}static parse(e,t){if(e.length!==3)return t.error("Expected two arguments.");const i=t.parse(e[1],1,ei);if(!i)return null;const r=e[2];if(typeof r!="object"||Array.isArray(r))return t.error("NumberFormat options argument must be an object.");let o=null;if(r.locale&&(o=t.parse(r.locale,1,vo),!o))return null;let s=null;if(r.currency&&(s=t.parse(r.currency,1,vo),!s))return null;let a=null;if(r["min-fraction-digits"]&&(a=t.parse(r["min-fraction-digits"],1,ei),!a))return null;let c=null;return r["max-fraction-digits"]&&(c=t.parse(r["max-fraction-digits"],1,ei),!c)?null:new wP(i,o,s,a,c)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}}class SP{constructor(e){this.type=wE,this.sections=e}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const i=e[1];if(!Array.isArray(i)&&typeof i=="object")return t.error("First argument must be an image or text section.");const r=[];let o=!1;for(let s=1;s<=e.length-1;++s){const a=e[s];if(o&&typeof a=="object"&&!Array.isArray(a)){o=!1;let c=null;if(a["font-scale"]&&(c=t.parse(a["font-scale"],1,ei),!c))return null;let h=null;if(a["text-font"]&&(h=t.parse(a["text-font"],1,vf(vo)),!h))return null;let m=null;if(a["text-color"]&&(m=t.parse(a["text-color"],1,Yg),!m))return null;let y=null;if(a["vertical-align"]){if(typeof a["vertical-align"]=="string"&&!Nme.includes(a["vertical-align"]))return t.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${a["vertical-align"]}' instead.`);if(y=t.parse(a["vertical-align"],1,vo),!y)return null}const M=r[r.length-1];M.scale=c,M.font=h,M.textColor=m,M.verticalAlign=y}else{const c=t.parse(e[s],1,Jr);if(!c)return null;const h=c.type.kind;if(h!=="string"&&h!=="value"&&h!=="null"&&h!=="resolvedImage")return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");o=!0,r.push({content:c,scale:null,font:null,textColor:null,verticalAlign:null})}}return new SP(r)}evaluate(e){const t=i=>{const r=i.content.evaluate(e);return Xu(r)===X4?new T9("",r,null,null,null,i.verticalAlign?i.verticalAlign.evaluate(e):null):new T9(h3(r),null,i.scale?i.scale.evaluate(e):null,i.font?i.font.evaluate(e).join(","):null,i.textColor?i.textColor.evaluate(e):null,i.verticalAlign?i.verticalAlign.evaluate(e):null)};return new o1(this.sections.map(t))}eachChild(e){for(const t of this.sections)e(t.content),t.scale&&e(t.scale),t.font&&e(t.font),t.textColor&&e(t.textColor),t.verticalAlign&&e(t.verticalAlign)}outputDefined(){return!1}}class EP{constructor(e){this.type=X4,this.input=e}static parse(e,t){if(e.length!==2)return t.error("Expected two arguments.");const i=t.parse(e[1],1,vo);return i?new EP(i):t.error("No image name provided.")}evaluate(e){const t=this.input.evaluate(e),i=lv.fromString(t);return i&&e.availableImages&&(i.available=e.availableImages.indexOf(t)>-1),i}eachChild(e){e(this.input)}outputDefined(){return!1}}class OP{constructor(e){this.type=ei,this.input=e}static parse(e,t){if(e.length!==2)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const i=t.parse(e[1],1);return i?i.type.kind!=="array"&&i.type.kind!=="string"&&i.type.kind!=="value"?t.error(`Expected argument of type string or array, but found ${pl(i.type)} instead.`):new OP(i):null}evaluate(e){const t=this.input.evaluate(e);if(typeof t=="string")return[...t].length;if(Array.isArray(t))return t.length;throw new Ol(`Expected value to be of type string or array, but found ${pl(Xu(t))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}}const Hg=8192;function hge(n,e){const t=dge(n[0]),i=pge(n[1]),r=Math.pow(2,e.z);return[Math.round(t*r*Hg),Math.round(i*r*Hg)]}function BP(n,e){const t=Math.pow(2,e.z),i=(n[0]/Hg+e.x)/t,r=(n[1]/Hg+e.y)/t;return[fge(i),mge(r)]}function dge(n){return(180+n)/360}function fge(n){return n*360-180}function pge(n){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n*Math.PI/360)))/360}function mge(n){return 360/Math.PI*Math.atan(Math.exp((180-n*360)*Math.PI/180))-90}function J4(n,e){n[0]=Math.min(n[0],e[0]),n[1]=Math.min(n[1],e[1]),n[2]=Math.max(n[2],e[0]),n[3]=Math.max(n[3],e[1])}function V3(n,e){return!(n[0]<=e[0]||n[2]>=e[2]||n[1]<=e[1]||n[3]>=e[3])}function gge(n,e,t){return e[1]>n[1]!=t[1]>n[1]&&n[0]<(t[0]-e[0])*(n[1]-e[1])/(t[1]-e[1])+e[0]}function yge(n,e,t){const i=n[0]-e[0],r=n[1]-e[1],o=n[0]-t[0],s=n[1]-t[1];return i*s-o*r===0&&i*o<=0&&r*s<=0}function DE(n,e,t,i){const r=[e[0]-n[0],e[1]-n[1]],o=[i[0]-t[0],i[1]-t[1]];return _ge(o,r)===0?!1:!!(gz(n,e,t,i)&&gz(t,i,n,e))}function vge(n,e,t){for(const i of t)for(let r=0;r<i.length-1;++r)if(DE(n,e,i[r],i[r+1]))return!0;return!1}function Ux(n,e,t=!1){let i=!1;for(const r of e)for(let o=0;o<r.length-1;o++){if(yge(n,r[o],r[o+1]))return t;gge(n,r[o],r[o+1])&&(i=!i)}return i}function bge(n,e){for(const t of e)if(Ux(n,t))return!0;return!1}function pJ(n,e){for(const t of n)if(!Ux(t,e))return!1;for(let t=0;t<n.length-1;++t)if(vge(n[t],n[t+1],e))return!1;return!0}function Cge(n,e){for(const t of e)if(pJ(n,t))return!0;return!1}function _ge(n,e){return n[0]*e[1]-n[1]*e[0]}function gz(n,e,t,i){const r=n[0]-t[0],o=n[1]-t[1],s=e[0]-t[0],a=e[1]-t[1],c=i[0]-t[0],h=i[1]-t[1],m=r*h-c*o,y=s*h-c*a;return m>0&&y<0||m<0&&y>0}function IP(n,e,t){const i=[];for(let r=0;r<n.length;r++){const o=[];for(let s=0;s<n[r].length;s++){const a=hge(n[r][s],t);J4(e,a),o.push(a)}i.push(o)}return i}function mJ(n,e,t){const i=[];for(let r=0;r<n.length;r++){const o=IP(n[r],e,t);i.push(o)}return i}function gJ(n,e,t,i){if(n[0]<t[0]||n[0]>t[2]){const r=i*.5;let o=n[0]-t[0]>r?-i:t[0]-n[0]>r?i:0;o===0&&(o=n[0]-t[2]>r?-i:t[2]-n[0]>r?i:0),n[0]+=o}J4(e,n)}function xge(n){n[0]=n[1]=1/0,n[2]=n[3]=-1/0}function yz(n,e,t,i){const r=Math.pow(2,i.z)*Hg,o=[i.x*Hg,i.y*Hg],s=[];for(const a of n)for(const c of a){const h=[c.x+o[0],c.y+o[1]];gJ(h,e,t,r),s.push(h)}return s}function vz(n,e,t,i){const r=Math.pow(2,i.z)*Hg,o=[i.x*Hg,i.y*Hg],s=[];for(const a of n){const c=[];for(const h of a){const m=[h.x+o[0],h.y+o[1]];J4(e,m),c.push(m)}s.push(c)}if(e[2]-e[0]<=r/2){xge(e);for(const a of s)for(const c of a)gJ(c,e,t,r)}return s}function Mge(n,e){const t=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],r=n.canonicalID();if(e.type==="Polygon"){const o=IP(e.coordinates,i,r),s=yz(n.geometry(),t,i,r);if(!V3(t,i))return!1;for(const a of s)if(!Ux(a,o))return!1}if(e.type==="MultiPolygon"){const o=mJ(e.coordinates,i,r),s=yz(n.geometry(),t,i,r);if(!V3(t,i))return!1;for(const a of s)if(!bge(a,o))return!1}return!0}function wge(n,e){const t=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],r=n.canonicalID();if(e.type==="Polygon"){const o=IP(e.coordinates,i,r),s=vz(n.geometry(),t,i,r);if(!V3(t,i))return!1;for(const a of s)if(!pJ(a,o))return!1}if(e.type==="MultiPolygon"){const o=mJ(e.coordinates,i,r),s=vz(n.geometry(),t,i,r);if(!V3(t,i))return!1;for(const a of s)if(!Cge(a,o))return!1}return!0}class Eb{constructor(e,t){this.type=io,this.geojson=e,this.geometries=t}static parse(e,t){if(e.length!==2)return t.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(Y3(e[1])){const i=e[1];if(i.type==="FeatureCollection"){const r=[];for(const o of i.features){const{type:s,coordinates:a}=o.geometry;s==="Polygon"&&r.push(a),s==="MultiPolygon"&&r.push(...a)}if(r.length){const o={type:"MultiPolygon",coordinates:r};return new Eb(i,o)}}else if(i.type==="Feature"){const r=i.geometry.type;if(r==="Polygon"||r==="MultiPolygon")return new Eb(i,i.geometry)}else if(i.type==="Polygon"||i.type==="MultiPolygon")return new Eb(i,i)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return Mge(e,this.geometries);if(e.geometryType()==="LineString")return wge(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class yJ{constructor(e=[],t=(i,r)=>i<r?-1:i>r?1:0){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let i=(this.length>>1)-1;i>=0;i--)this._down(i)}push(e){this.data.push(e),this._up(this.length++)}pop(){if(this.length===0)return;const e=this.data[0],t=this.data.pop();return--this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:i}=this,r=t[e];for(;e>0;){const o=e-1>>1,s=t[o];if(i(r,s)>=0)break;t[e]=s,e=o}t[e]=r}_down(e){const{data:t,compare:i}=this,r=this.length>>1,o=t[e];for(;e<r;){let s=(e<<1)+1;const a=s+1;if(a<this.length&&i(t[a],t[s])<0&&(s=a),i(t[s],o)>=0)break;t[e]=t[s],e=s}t[e]=o}}function Sge(n,e){if(n.length<=1)return[n];const i=[];let r,o;for(const s of n){const a=Ege(s);a!==0&&(s.area=Math.abs(a),o===void 0&&(o=a<0),o===a<0?(r&&i.push(r),r=[s]):r.push(s))}return r&&i.push(r),i}function Ege(n){let e=0;for(let t=0,i=n.length,r=i-1,o,s;t<i;r=t++)o=n[t],s=n[r],e+=(s.x-o.x)*(o.y+s.y);return e}const Oge=6378.137,bz=1/298.257223563,Cz=bz*(2-bz),_z=Math.PI/180;class kP{constructor(e){const t=_z*Oge*1e3,i=Math.cos(e*_z),r=1/(1-Cz*(1-i*i)),o=Math.sqrt(r);this.kx=t*o*i,this.ky=t*o*r*(1-Cz)}distance(e,t){const i=this.wrap(e[0]-t[0])*this.kx,r=(e[1]-t[1])*this.ky;return Math.sqrt(i*i+r*r)}pointOnLine(e,t){let i=1/0,r,o,s,a;for(let c=0;c<e.length-1;c++){let h=e[c][0],m=e[c][1],y=this.wrap(e[c+1][0]-h)*this.kx,M=(e[c+1][1]-m)*this.ky,x=0;(y!==0||M!==0)&&(x=(this.wrap(t[0]-h)*this.kx*y+(t[1]-m)*this.ky*M)/(y*y+M*M),x>1?(h=e[c+1][0],m=e[c+1][1]):x>0&&(h+=y/this.kx*x,m+=M/this.ky*x)),y=this.wrap(t[0]-h)*this.kx,M=(t[1]-m)*this.ky;const T=y*y+M*M;T<i&&(i=T,r=h,o=m,s=c,a=x)}return{point:[r,o],index:s,t:Math.max(0,Math.min(1,a))}}wrap(e){for(;e<-180;)e+=360;for(;e>180;)e-=360;return e}}const R9=100,D9=50;function vJ(n,e){return e[0]-n[0]}function qw(n){return n[1]-n[0]+1}function c1(n,e){return n[1]>=n[0]&&n[1]<e}function P9(n,e){if(n[0]>n[1])return[null,null];const t=qw(n);if(e){if(t===2)return[n,null];const r=Math.floor(t/2);return[[n[0],n[0]+r],[n[0]+r,n[1]]]}if(t===1)return[n,null];const i=Math.floor(t/2)-1;return[[n[0],n[0]+i],[n[0]+i+1,n[1]]]}function U9(n,e){if(!c1(e,n.length))return[1/0,1/0,-1/0,-1/0];const t=[1/0,1/0,-1/0,-1/0];for(let i=e[0];i<=e[1];++i)J4(t,n[i]);return t}function K9(n){const e=[1/0,1/0,-1/0,-1/0];for(const t of n)for(const i of t)J4(e,i);return e}function xz(n){return n[0]!==-1/0&&n[1]!==-1/0&&n[2]!==1/0&&n[3]!==1/0}function TP(n,e,t){if(!xz(n)||!xz(e))return NaN;let i=0,r=0;return n[2]<e[0]&&(i=e[0]-n[2]),n[0]>e[2]&&(i=n[0]-e[2]),n[1]>e[3]&&(r=n[1]-e[3]),n[3]<e[1]&&(r=e[1]-n[3]),t.distance([0,0],[i,r])}function db(n,e,t){const i=t.pointOnLine(e,n);return t.distance(n,i.point)}function RP(n,e,t,i,r){const o=Math.min(db(n,[t,i],r),db(e,[t,i],r)),s=Math.min(db(t,[n,e],r),db(i,[n,e],r));return Math.min(o,s)}function Bge(n,e,t,i,r){if(!(c1(e,n.length)&&c1(i,t.length)))return 1/0;let s=1/0;for(let a=e[0];a<e[1];++a){const c=n[a],h=n[a+1];for(let m=i[0];m<i[1];++m){const y=t[m],M=t[m+1];if(DE(c,h,y,M))return 0;s=Math.min(s,RP(c,h,y,M,r))}}return s}function Ige(n,e,t,i,r){if(!(c1(e,n.length)&&c1(i,t.length)))return NaN;let s=1/0;for(let a=e[0];a<=e[1];++a)for(let c=i[0];c<=i[1];++c)if(s=Math.min(s,r.distance(n[a],t[c])),s===0)return s;return s}function kge(n,e,t){if(Ux(n,e,!0))return 0;let i=1/0;for(const r of e){const o=r[0],s=r[r.length-1];if(o!==s&&(i=Math.min(i,db(n,[s,o],t)),i===0))return i;const a=t.pointOnLine(r,n);if(i=Math.min(i,t.distance(n,a.point)),i===0)return i}return i}function Tge(n,e,t,i){if(!c1(e,n.length))return NaN;for(let o=e[0];o<=e[1];++o)if(Ux(n[o],t,!0))return 0;let r=1/0;for(let o=e[0];o<e[1];++o){const s=n[o],a=n[o+1];for(const c of t)for(let h=0,m=c.length,y=m-1;h<m;y=h++){const M=c[y],x=c[h];if(DE(s,a,M,x))return 0;r=Math.min(r,RP(s,a,M,x,i))}}return r}function Mz(n,e){for(const t of n)for(const i of t)if(Ux(i,e,!0))return!0;return!1}function Rge(n,e,t,i=1/0){const r=K9(n),o=K9(e);if(i!==1/0&&TP(r,o,t)>=i)return i;if(V3(r,o)){if(Mz(n,e))return 0}else if(Mz(e,n))return 0;let s=1/0;for(const a of n)for(let c=0,h=a.length,m=h-1;c<h;m=c++){const y=a[m],M=a[c];for(const x of e)for(let T=0,P=x.length,F=P-1;T<P;F=T++){const j=x[F],q=x[T];if(DE(y,M,j,q))return 0;s=Math.min(s,RP(y,M,j,q,t))}}return s}function wz(n,e,t,i,r,o){if(!o)return;const s=TP(U9(i,o),r,t);s<e&&n.push([s,o,[0,0]])}function $5(n,e,t,i,r,o,s){if(!o||!s)return;const a=TP(U9(i,o),U9(r,s),t);a<e&&n.push([a,o,s])}function Yw(n,e,t,i,r=1/0){let o=Math.min(i.distance(n[0],t[0][0]),r);if(o===0)return o;const s=new yJ([[0,[0,n.length-1],[0,0]]],vJ),a=K9(t);for(;s.length>0;){const c=s.pop();if(c[0]>=o)continue;const h=c[1],m=e?D9:R9;if(qw(h)<=m){if(!c1(h,n.length))return NaN;if(e){const y=Tge(n,h,t,i);if(isNaN(y)||y===0)return y;o=Math.min(o,y)}else for(let y=h[0];y<=h[1];++y){const M=kge(n[y],t,i);if(o=Math.min(o,M),o===0)return 0}}else{const y=P9(h,e);wz(s,o,i,n,a,y[0]),wz(s,o,i,n,a,y[1])}}return o}function $w(n,e,t,i,r,o=1/0){let s=Math.min(o,r.distance(n[0],t[0]));if(s===0)return s;const a=new yJ([[0,[0,n.length-1],[0,t.length-1]]],vJ);for(;a.length>0;){const c=a.pop();if(c[0]>=s)continue;const h=c[1],m=c[2],y=e?D9:R9,M=i?D9:R9;if(qw(h)<=y&&qw(m)<=M){if(!c1(h,n.length)&&c1(m,t.length))return NaN;let x;if(e&&i)x=Bge(n,h,t,m,r),s=Math.min(s,x);else if(e&&!i){const T=n.slice(h[0],h[1]+1);for(let P=m[0];P<=m[1];++P)if(x=db(t[P],T,r),s=Math.min(s,x),s===0)return s}else if(!e&&i){const T=t.slice(m[0],m[1]+1);for(let P=h[0];P<=h[1];++P)if(x=db(n[P],T,r),s=Math.min(s,x),s===0)return s}else x=Ige(n,h,t,m,r),s=Math.min(s,x)}else{const x=P9(h,e),T=P9(m,i);$5(a,s,r,n,t,x[0],T[0]),$5(a,s,r,n,t,x[0],T[1]),$5(a,s,r,n,t,x[1],T[0]),$5(a,s,r,n,t,x[1],T[1])}}return s}function Dge(n,e){const t=n.geometry(),i=t.flat().map(s=>BP([s.x,s.y],n.canonical));if(t.length===0)return NaN;const r=new kP(i[0][1]);let o=1/0;for(const s of e){switch(s.type){case"Point":o=Math.min(o,$w(i,!1,[s.coordinates],!1,r,o));break;case"LineString":o=Math.min(o,$w(i,!1,s.coordinates,!0,r,o));break;case"Polygon":o=Math.min(o,Yw(i,!1,s.coordinates,r,o));break}if(o===0)return o}return o}function Pge(n,e){const t=n.geometry(),i=t.flat().map(s=>BP([s.x,s.y],n.canonical));if(t.length===0)return NaN;const r=new kP(i[0][1]);let o=1/0;for(const s of e){switch(s.type){case"Point":o=Math.min(o,$w(i,!0,[s.coordinates],!1,r,o));break;case"LineString":o=Math.min(o,$w(i,!0,s.coordinates,!0,r,o));break;case"Polygon":o=Math.min(o,Yw(i,!0,s.coordinates,r,o));break}if(o===0)return o}return o}function Uge(n,e){const t=n.geometry();if(t.length===0||t[0].length===0)return NaN;const i=Sge(t).map(s=>s.map(a=>a.map(c=>BP([c.x,c.y],n.canonical)))),r=new kP(i[0][0][0][1]);let o=1/0;for(const s of e)for(const a of i){switch(s.type){case"Point":o=Math.min(o,Yw([s.coordinates],!1,a,r,o));break;case"LineString":o=Math.min(o,Yw(s.coordinates,!0,a,r,o));break;case"Polygon":o=Math.min(o,Rge(a,s.coordinates,r,o));break}if(o===0)return o}return o}function jO(n){return n.type==="MultiPolygon"?n.coordinates.map(e=>({type:"Polygon",coordinates:e})):n.type==="MultiLineString"?n.coordinates.map(e=>({type:"LineString",coordinates:e})):n.type==="MultiPoint"?n.coordinates.map(e=>({type:"Point",coordinates:e})):[n]}class Ob{constructor(e,t){this.type=ei,this.geojson=e,this.geometries=t}static parse(e,t){if(e.length!==2)return t.error(`'distance' expression requires exactly one argument, but found ${e.length-1} instead.`);if(Y3(e[1])){const i=e[1];if(i.type==="FeatureCollection")return new Ob(i,i.features.map(r=>jO(r.geometry)).flat());if(i.type==="Feature")return new Ob(i,jO(i.geometry));if("type"in i&&"coordinates"in i)return new Ob(i,jO(i))}return t.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return Dge(e,this.geometries);if(e.geometryType()==="LineString")return Pge(e,this.geometries);if(e.geometryType()==="Polygon")return Uge(e,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class e5{constructor(e){this.type=Jr,this.key=e}static parse(e,t){if(e.length!==2)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const i=e[1];return i==null?t.error("Global state property must be defined."):typeof i!="string"?t.error(`Global state property must be string, but found ${typeof e[1]} instead.`):new e5(i)}evaluate(e){var t;const i=(t=e.globals)===null||t===void 0?void 0:t.globalState;return!i||Object.keys(i).length===0?null:uJ(i,this.key)}eachChild(){}outputDefined(){return!1}}const PE={"==":sge,"!=":age,">":uge,"<":lge,">=":Age,"<=":cge,array:mm,at:CP,boolean:mm,case:MP,coalesce:$3,collator:RE,format:SP,image:EP,in:_P,"index-of":Ww,interpolate:Vg,"interpolate-hcl":Vg,"interpolate-lab":Vg,length:OP,let:IE,literal:cx,match:xP,number:mm,"number-format":wP,object:mm,slice:Qw,step:TE,string:mm,"to-boolean":Py,"to-color":Py,"to-number":Py,"to-string":Py,var:kE,within:Eb,distance:Ob,"global-state":e5};class _f{constructor(e,t,i,r){this.name=e,this.type=t,this._evaluate=i,this.args=r}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}static parse(e,t){const i=e[0],r=_f.definitions[i];if(!r)return t.error(`Unknown expression "${i}". If you wanted a literal array, use ["literal", [...]].`,0);const o=Array.isArray(r)?r[0]:r.type,s=Array.isArray(r)?[[r[1],r[2]]]:r.overloads,a=s.filter(([h])=>!Array.isArray(h)||h.length===e.length-1);let c=null;for(const[h,m]of a){c=new BE(t.registry,Vw,t.path,null,t.scope);const y=[];let M=!1;for(let x=1;x<e.length;x++){const T=e[x],P=Array.isArray(h)?h[x-1]:h.type,F=c.parse(T,1+y.length,P);if(!F){M=!0;break}y.push(F)}if(!M){if(Array.isArray(h)&&h.length!==y.length){c.error(`Expected ${h.length} arguments, but found ${y.length} instead.`);continue}for(let x=0;x<y.length;x++){const T=Array.isArray(h)?h[x]:h.type,P=y[x];c.concat(x+1).checkSubtype(T,P.type)}if(c.errors.length===0)return new _f(i,o,m,y)}}if(a.length===1)t.errors.push(...c.errors);else{const m=(a.length?a:s).map(([M])=>Lge(M)).join(" | "),y=[];for(let M=1;M<e.length;M++){const x=t.parse(e[M],1+y.length);if(!x)return null;y.push(pl(x.type))}t.error(`Expected arguments of type ${m}, but found (${y.join(", ")}) instead.`)}return null}static register(e,t){_f.definitions=t;for(const i in t)e[i]=_f}}function Sz(n,[e,t,i,r]){e=e.evaluate(n),t=t.evaluate(n),i=i.evaluate(n);const o=r?r.evaluate(n):1,s=cJ(e,t,i,o);if(s)throw new Ol(s);return new Vs(e/255,t/255,i/255,o,!1)}function Ez(n,e){return n in e}function NO(n,e){const t=e[n];return typeof t>"u"?null:t}function Kge(n,e,t,i){for(;t<=i;){const r=t+i>>1;if(e[r]===n)return!0;e[r]>n?i=r-1:t=r+1}return!1}function Zv(n){return{type:n}}_f.register(PE,{error:[kme,[vo],(n,[e])=>{throw new Ol(e.evaluate(n))}],typeof:[vo,[Jr],(n,[e])=>pl(Xu(e.evaluate(n)))],"to-rgba":[vf(ei,4),[Yg],(n,[e])=>{const[t,i,r,o]=e.evaluate(n).rgb;return[t*255,i*255,r*255,o]}],rgb:[Yg,[ei,ei,ei],Sz],rgba:[Yg,[ei,ei,ei,ei],Sz],has:{type:io,overloads:[[[vo],(n,[e])=>Ez(e.evaluate(n),n.properties())],[[vo,Mb],(n,[e,t])=>Ez(e.evaluate(n),t.evaluate(n))]]},get:{type:Jr,overloads:[[[vo],(n,[e])=>NO(e.evaluate(n),n.properties())],[[vo,Mb],(n,[e,t])=>NO(e.evaluate(n),t.evaluate(n))]]},"feature-state":[Jr,[vo],(n,[e])=>NO(e.evaluate(n),n.featureState||{})],properties:[Mb,[],n=>n.properties()],"geometry-type":[vo,[],n=>n.geometryType()],id:[Jr,[],n=>n.id()],zoom:[ei,[],n=>n.globals.zoom],"heatmap-density":[ei,[],n=>n.globals.heatmapDensity||0],elevation:[ei,[],n=>n.globals.elevation||0],"line-progress":[ei,[],n=>n.globals.lineProgress||0],accumulated:[Jr,[],n=>n.globals.accumulated===void 0?null:n.globals.accumulated],"+":[ei,Zv(ei),(n,e)=>{let t=0;for(const i of e)t+=i.evaluate(n);return t}],"*":[ei,Zv(ei),(n,e)=>{let t=1;for(const i of e)t*=i.evaluate(n);return t}],"-":{type:ei,overloads:[[[ei,ei],(n,[e,t])=>e.evaluate(n)-t.evaluate(n)],[[ei],(n,[e])=>-e.evaluate(n)]]},"/":[ei,[ei,ei],(n,[e,t])=>e.evaluate(n)/t.evaluate(n)],"%":[ei,[ei,ei],(n,[e,t])=>e.evaluate(n)%t.evaluate(n)],ln2:[ei,[],()=>Math.LN2],pi:[ei,[],()=>Math.PI],e:[ei,[],()=>Math.E],"^":[ei,[ei,ei],(n,[e,t])=>Math.pow(e.evaluate(n),t.evaluate(n))],sqrt:[ei,[ei],(n,[e])=>Math.sqrt(e.evaluate(n))],log10:[ei,[ei],(n,[e])=>Math.log(e.evaluate(n))/Math.LN10],ln:[ei,[ei],(n,[e])=>Math.log(e.evaluate(n))],log2:[ei,[ei],(n,[e])=>Math.log(e.evaluate(n))/Math.LN2],sin:[ei,[ei],(n,[e])=>Math.sin(e.evaluate(n))],cos:[ei,[ei],(n,[e])=>Math.cos(e.evaluate(n))],tan:[ei,[ei],(n,[e])=>Math.tan(e.evaluate(n))],asin:[ei,[ei],(n,[e])=>Math.asin(e.evaluate(n))],acos:[ei,[ei],(n,[e])=>Math.acos(e.evaluate(n))],atan:[ei,[ei],(n,[e])=>Math.atan(e.evaluate(n))],min:[ei,Zv(ei),(n,e)=>Math.min(...e.map(t=>t.evaluate(n)))],max:[ei,Zv(ei),(n,e)=>Math.max(...e.map(t=>t.evaluate(n)))],abs:[ei,[ei],(n,[e])=>Math.abs(e.evaluate(n))],round:[ei,[ei],(n,[e])=>{const t=e.evaluate(n);return t<0?-Math.round(-t):Math.round(t)}],floor:[ei,[ei],(n,[e])=>Math.floor(e.evaluate(n))],ceil:[ei,[ei],(n,[e])=>Math.ceil(e.evaluate(n))],"filter-==":[io,[vo,Jr],(n,[e,t])=>n.properties()[e.value]===t.value],"filter-id-==":[io,[Jr],(n,[e])=>n.id()===e.value],"filter-type-==":[io,[vo],(n,[e])=>n.geometryType()===e.value],"filter-<":[io,[vo,Jr],(n,[e,t])=>{const i=n.properties()[e.value],r=t.value;return typeof i==typeof r&&i<r}],"filter-id-<":[io,[Jr],(n,[e])=>{const t=n.id(),i=e.value;return typeof t==typeof i&&t<i}],"filter->":[io,[vo,Jr],(n,[e,t])=>{const i=n.properties()[e.value],r=t.value;return typeof i==typeof r&&i>r}],"filter-id->":[io,[Jr],(n,[e])=>{const t=n.id(),i=e.value;return typeof t==typeof i&&t>i}],"filter-<=":[io,[vo,Jr],(n,[e,t])=>{const i=n.properties()[e.value],r=t.value;return typeof i==typeof r&&i<=r}],"filter-id-<=":[io,[Jr],(n,[e])=>{const t=n.id(),i=e.value;return typeof t==typeof i&&t<=i}],"filter->=":[io,[vo,Jr],(n,[e,t])=>{const i=n.properties()[e.value],r=t.value;return typeof i==typeof r&&i>=r}],"filter-id->=":[io,[Jr],(n,[e])=>{const t=n.id(),i=e.value;return typeof t==typeof i&&t>=i}],"filter-has":[io,[Jr],(n,[e])=>e.value in n.properties()],"filter-has-id":[io,[],n=>n.id()!==null&&n.id()!==void 0],"filter-type-in":[io,[vf(vo)],(n,[e])=>e.value.indexOf(n.geometryType())>=0],"filter-id-in":[io,[vf(Jr)],(n,[e])=>e.value.indexOf(n.id())>=0],"filter-in-small":[io,[vo,vf(Jr)],(n,[e,t])=>t.value.indexOf(n.properties()[e.value])>=0],"filter-in-large":[io,[vo,vf(Jr)],(n,[e,t])=>Kge(n.properties()[e.value],t.value,0,t.value.length-1)],all:{type:io,overloads:[[[io,io],(n,[e,t])=>e.evaluate(n)&&t.evaluate(n)],[Zv(io),(n,e)=>{for(const t of e)if(!t.evaluate(n))return!1;return!0}]]},any:{type:io,overloads:[[[io,io],(n,[e,t])=>e.evaluate(n)||t.evaluate(n)],[Zv(io),(n,e)=>{for(const t of e)if(t.evaluate(n))return!0;return!1}]]},"!":[io,[io],(n,[e])=>!e.evaluate(n)],"is-supported-script":[io,[vo],(n,[e])=>{const t=n.globals&&n.globals.isSupportedScript;return t?t(e.evaluate(n)):!0}],upcase:[vo,[vo],(n,[e])=>e.evaluate(n).toUpperCase()],downcase:[vo,[vo],(n,[e])=>e.evaluate(n).toLowerCase()],concat:[vo,Zv(Jr),(n,e)=>e.map(t=>h3(t.evaluate(n))).join("")],"resolved-locale":[vo,[ME],(n,[e])=>e.evaluate(n).resolvedLocale()]});function Lge(n){return Array.isArray(n)?`(${n.map(pl).join(", ")})`:`(${pl(n.type)}...)`}function Vw(n){if(n instanceof kE)return Vw(n.boundExpression);if(n instanceof _f&&n.name==="error")return!1;if(n instanceof RE)return!1;if(n instanceof Eb)return!1;if(n instanceof Ob)return!1;if(n instanceof e5)return!1;const e=n instanceof Py||n instanceof mm;let t=!0;return n.eachChild(i=>{e?t=t&&Vw(i):t=t&&i instanceof cx}),t?DP(n)&&UP(n,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"]):!1}function DP(n){if(n instanceof _f){if(n.name==="get"&&n.args.length===1)return!1;if(n.name==="feature-state")return!1;if(n.name==="has"&&n.args.length===1)return!1;if(n.name==="properties"||n.name==="geometry-type"||n.name==="id")return!1;if(/^filter-/.test(n.name))return!1}if(n instanceof Eb||n instanceof Ob)return!1;let e=!0;return n.eachChild(t=>{e&&!DP(t)&&(e=!1)}),e}function PP(n){if(n instanceof _f&&n.name==="feature-state")return!1;let e=!0;return n.eachChild(t=>{e&&!PP(t)&&(e=!1)}),e}function UP(n,e){if(n instanceof _f&&e.indexOf(n.name)>=0)return!1;let t=!0;return n.eachChild(i=>{t&&!UP(i,e)&&(t=!1)}),t}function L9(n){return{result:"success",value:n}}function v_(n){return{result:"error",value:n}}function Fge(n){return n["property-type"]==="data-driven"||n["property-type"]==="cross-faded-data-driven"}function zge(n){return!!n.expression&&n.expression.parameters.indexOf("zoom")>-1}function jge(n){return!!n.expression&&n.expression.interpolated}function bJ(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)&&Xu(n)===Mb}class Nge{constructor(e,t){this.expression=e,this._warningHistory={},this._evaluator=new AJ,this._defaultValue=t?qge(t):null,this._enumValues=t&&t.type==="enum"?t.values:null}evaluateWithoutErrorHandling(e,t,i,r,o,s){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=i,this._evaluator.canonical=r,this._evaluator.availableImages=o||null,this._evaluator.formattedSection=s,this.expression.evaluate(this._evaluator)}evaluate(e,t,i,r,o,s){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=i||null,this._evaluator.canonical=r,this._evaluator.availableImages=o||null,this._evaluator.formattedSection=s||null;try{const a=this.expression.evaluate(this._evaluator);if(a==null||typeof a=="number"&&a!==a)return this._defaultValue;if(this._enumValues&&!(a in this._enumValues))throw new Ol(`Expected value to be one of ${Object.keys(this._enumValues).map(c=>JSON.stringify(c)).join(", ")}, but found ${JSON.stringify(a)} instead.`);return a}catch(a){return this._warningHistory[a.message]||(this._warningHistory[a.message]=!0,typeof console<"u"&&console.warn(a.message)),this._defaultValue}}}function Gge(n){return Array.isArray(n)&&n.length>0&&typeof n[0]=="string"&&n[0]in PE}function CJ(n,e){const t=new BE(PE,Vw,[],e?Qge(e):void 0),i=t.parse(n,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return i?L9(new Nge(i,e)):v_(t.errors)}class Oz{constructor(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent=e!=="constant"&&!PP(t.expression),this.globalStateRefs=UE(t.expression)}evaluateWithoutErrorHandling(e,t,i,r,o,s){return this._styleExpression.evaluateWithoutErrorHandling(e,t,i,r,o,s)}evaluate(e,t,i,r,o,s){return this._styleExpression.evaluate(e,t,i,r,o,s)}}class Bz{constructor(e,t,i,r){this.kind=e,this.zoomStops=i,this._styleExpression=t,this.isStateDependent=e!=="camera"&&!PP(t.expression),this.globalStateRefs=UE(t.expression),this.interpolationType=r}evaluateWithoutErrorHandling(e,t,i,r,o,s){return this._styleExpression.evaluateWithoutErrorHandling(e,t,i,r,o,s)}evaluate(e,t,i,r,o,s){return this._styleExpression.evaluate(e,t,i,r,o,s)}interpolationFactor(e,t,i){return this.interpolationType?Vg.interpolationFactor(this.interpolationType,e,t,i):0}}function Wge(n,e){const t=CJ(n,e);if(t.result==="error")return t;const i=t.value.expression,r=DP(i);if(!r&&!Fge(e))return v_([new Tg("","data expressions not supported")]);const o=UP(i,["zoom"]);if(!o&&!zge(e))return v_([new Tg("","zoom expressions not supported")]);const s=lw(i);if(!s&&!o)return v_([new Tg("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(s instanceof Tg)return v_([s]);if(s instanceof Vg&&!jge(e))return v_([new Tg("",'"interpolate" expressions cannot be used with this property')]);if(!s)return L9(r?new Oz("constant",t.value):new Oz("source",t.value));const a=s instanceof Vg?s.interpolation:void 0;return L9(r?new Bz("camera",t.value,s.labels,a):new Bz("composite",t.value,s.labels,a))}function lw(n){let e=null;if(n instanceof IE)e=lw(n.result);else if(n instanceof $3){for(const t of n.args)if(e=lw(t),e)break}else(n instanceof TE||n instanceof Vg)&&n.input instanceof _f&&n.input.name==="zoom"&&(e=n);return e instanceof Tg||n.eachChild(t=>{const i=lw(t);i instanceof Tg?e=i:!e&&i?e=new Tg("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&i&&e!==i&&(e=new Tg("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}function UE(n,e=new Set){return n instanceof e5&&e.add(n.key),n.eachChild(t=>{UE(t,e)}),e}function Qge(n){const e={color:Yg,string:vo,number:ei,enum:vo,boolean:io,formatted:wE,padding:SE,numberArray:EE,colorArray:W3,projectionDefinition:xE,resolvedImage:X4,variableAnchorOffsetCollection:OE};return n.type==="array"?vf(e[n.value]||Jr,n.length):e[n.type]}function qge(n){if(n.type==="color"&&bJ(n.default))return new Vs(0,0,0,0);switch(n.type){case"color":return Vs.parse(n.default)||null;case"padding":return bm.parse(n.default)||null;case"numberArray":return Cm.parse(n.default)||null;case"colorArray":return Cf.parse(n.default)||null;case"variableAnchorOffsetCollection":return $g.parse(n.default)||null;case"projectionDefinition":return pm.parse(n.default)||null;default:return n.default===void 0?null:n.default}}function _J(n){if(n===!0||n===!1)return!0;if(!Array.isArray(n)||n.length===0)return!1;switch(n[0]){case"has":return n.length>=2&&n[1]!=="$id"&&n[1]!=="$type";case"in":return n.length>=3&&(typeof n[1]!="string"||Array.isArray(n[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return n.length!==3||Array.isArray(n[1])||Array.isArray(n[2]);case"any":case"all":for(const e of n.slice(1))if(!_J(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}const Yge={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function $ge(n){if(n==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};_J(n)||(n=Hw(n));const e=CJ(n,Yge);if(e.result==="error")throw new Error(e.value.map(t=>`${t.key}: ${t.message}`).join(", "));{const t=xJ(n);return{filter:(i,r,o)=>e.value.evaluate(i,r,{},o),needGeometry:t,getGlobalStateRefs:()=>UE(e.value.expression)}}}function Vge(n,e){return n<e?-1:n>e?1:0}function xJ(n){if(!Array.isArray(n))return!1;if(n[0]==="within"||n[0]==="distance")return!0;for(let e=1;e<n.length;e++)if(xJ(n[e]))return!0;return!1}function Hw(n){if(!n)return!0;const e=n[0];return n.length<=1?e!=="any":e==="=="?GO(n[1],n[2],"=="):e==="!="?V5(GO(n[1],n[2],"==")):e==="<"||e===">"||e==="<="||e===">="?GO(n[1],n[2],e):e==="any"?Hge(n.slice(1)):e==="all"?["all"].concat(n.slice(1).map(Hw)):e==="none"?["all"].concat(n.slice(1).map(Hw).map(V5)):e==="in"?Iz(n[1],n.slice(2)):e==="!in"?V5(Iz(n[1],n.slice(2))):e==="has"?kz(n[1]):e==="!has"?V5(kz(n[1])):!0}function GO(n,e,t){switch(n){case"$type":return[`filter-type-${t}`,e];case"$id":return[`filter-id-${t}`,e];default:return[`filter-${t}`,n,e]}}function Hge(n){return["any"].concat(n.map(Hw))}function Iz(n,e){if(e.length===0)return!1;switch(n){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(t=>typeof t!=typeof e[0])?["filter-in-large",n,["literal",e.sort(Vge)]]:["filter-in-small",n,["literal",e]]}}function kz(n){switch(n){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",n]}}function V5(n){return["!",n]}function H3(n){return typeof n=="object"?["literal",n]:n}function Zge(n,e){let t=n.stops;if(!t)return Xge(n,e);const i=t&&typeof t[0][0]=="object",r=i||n.property!==void 0,o=i||!r;return t=t.map(s=>!r&&e.tokens&&typeof s[1]=="string"?[s[0],n0e(s[1])]:[s[0],H3(s[1])]),i?Jge(n,e,t):o?t0e(n,e,t):F9(n,e,t)}function Xge(n,e){const t=["get",n.property];if(n.default===void 0)return e.type==="string"?["string",t]:t;if(e.type==="enum")return["match",t,Object.keys(e.values),t,n.default];{const i=[e.type==="color"?"to-color":e.type,t,H3(n.default)];return e.type==="array"&&i.splice(1,0,e.value,e.length||null),i}}function KP(n){switch(n.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function Jge(n,e,t){const i={},r={},o=[];for(let a=0;a<t.length;a++){const c=t[a],h=c[0].zoom;i[h]===void 0&&(i[h]={zoom:h,type:n.type,property:n.property,default:n.default},r[h]=[],o.push(h)),r[h].push([c[0].value,c[1]])}if(FP({},e)==="exponential"){const a=[KP(n),["linear"],["zoom"]];for(const c of o){const h=F9(i[c],e,r[c]);N_(a,c,h,!1)}return a}else{const a=["step",["zoom"]];for(const c of o){const h=F9(i[c],e,r[c]);N_(a,c,h,!0)}return LP(a),a}}function e0e(n,e){if(n!==void 0)return n;if(e!==void 0)return e}function Tz(n,e){const t=H3(e0e(n.default,e.default));return t===void 0&&e.type==="resolvedImage"?"":t}function F9(n,e,t){const i=FP(n,e),r=["get",n.property];if(i==="categorical"&&typeof t[0][0]=="boolean"){const o=["case"];for(const s of t)o.push(["==",r,s[0]],s[1]);return o.push(Tz(n,e)),o}else if(i==="categorical"){const o=["match",r];for(const s of t)N_(o,s[0],s[1],!1);return o.push(Tz(n,e)),o}else if(i==="interval"){const o=["step",["number",r]];for(const s of t)N_(o,s[0],s[1],!0);return LP(o),n.default===void 0?o:["case",["==",["typeof",r],"number"],o,H3(n.default)]}else if(i==="exponential"){const o=n.base!==void 0?n.base:1,s=[KP(n),o===1?["linear"]:["exponential",o],["number",r]];for(const a of t)N_(s,a[0],a[1],!1);return n.default===void 0?s:["case",["==",["typeof",r],"number"],s,H3(n.default)]}else throw new Error(`Unknown property function type ${i}`)}function t0e(n,e,t,i=["zoom"]){const r=FP(n,e);let o,s=!1;if(r==="interval")o=["step",i],s=!0;else if(r==="exponential"){const a=n.base!==void 0?n.base:1;o=[KP(n),a===1?["linear"]:["exponential",a],i]}else throw new Error(`Unknown zoom function type "${r}"`);for(const a of t)N_(o,a[0],a[1],s);return LP(o),o}function LP(n){n[0]==="step"&&n.length===3&&(n.push(0),n.push(n[3]))}function N_(n,e,t,i){n.length>3&&e===n[n.length-2]||(i&&n.length===2||n.push(e),n.push(t))}function FP(n,e){return n.type?n.type:e.expression.interpolated?"exponential":"interval"}function n0e(n){const e=["concat"],t=/{([^{}]+)}/g;let i=0;for(let r=t.exec(n);r!==null;r=t.exec(n)){const o=n.slice(i,t.lastIndex-r[0].length);i=t.lastIndex,o.length>0&&e.push(o),e.push(["get",r[1]])}if(e.length===1)return n;if(i<n.length)e.push(n.slice(i));else if(e.length===2)return["to-string",e[1]];return e}const i0e=Ome;var Rz={thin:100,hairline:100,"ultra-light":200,"extra-light":200,light:300,book:300,regular:400,normal:400,plain:400,roman:400,standard:400,medium:500,"semi-bold":600,"demi-bold":600,bold:700,"extra-bold":800,"ultra-bold":800,heavy:900,black:900,"heavy-black":900,fat:900,poster:900,"ultra-black":950,"extra-black":950},h2=" ",Dz=/(italic|oblique)$/i,Pz={};function z9(n,e,t){var i=Pz[n];if(!i){Array.isArray(n)||(n=[n]);for(var r=400,o="normal",s=[],a,c,h=0,m=n.length;h<m;++h){var y=n[h],M=y.split(" "),x=M[M.length-1].toLowerCase();x=="normal"||x=="italic"||x=="oblique"?(o=c?o:x,c=!0,M.pop(),x=M[M.length-1].toLowerCase()):Dz.test(x)&&(x=x.replace(Dz,""),o=c?o:M[M.length-1].replace(x,""),c=!0);for(var T in Rz){var P=M.length>1?M[M.length-2].toLowerCase():"";if(x==T||x==T.replace("-","")||P+"-"+x==T){r=a?r:Rz[T],M.pop(),P&&T.startsWith(P)&&M.pop();break}}!a&&typeof x=="number"&&(r=x,a=!0);var F=M.join(h2).replace("Klokantech Noto Sans","Noto Sans").replace("DIN Pro","Barlow").replace("Arial Unicode MS","Arial");F.indexOf(h2)!==-1&&(F='"'+F+'"'),s.push(F)}i=Pz[n]=[o,r,s]}return i[0]+h2+i[1]+h2+e+"px"+(t?"/"+t:"")+h2+i[2]}const gd={ADD:"add",REMOVE:"remove"},Ax={PROPERTYCHANGE:"propertychange"},Ir={CHANGE:"change",ERROR:"error",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",TOUCHMOVE:"touchmove",WHEEL:"wheel"};class t5{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function r0e(n,e,t){let i,r;t=t||Zg;let o=0,s=n.length,a=!1;for(;o<s;)i=o+(s-o>>1),r=+t(n[i],e),r<0?o=i+1:(s=i,a=!r);return a?o:~o}function Zg(n,e){return n>e?1:n<e?-1:0}function o0e(n,e){return n<e?1:n>e?-1:0}function KE(n,e,t){if(n[0]<=e)return 0;const i=n.length;if(e<=n[i-1])return i-1;if(typeof t=="function"){for(let r=1;r<i;++r){const o=n[r];if(o===e)return r;if(o<e)return t(e,n[r-1],o)>0?r-1:r}return i-1}if(t>0){for(let r=1;r<i;++r)if(n[r]<e)return r-1;return i-1}if(t<0){for(let r=1;r<i;++r)if(n[r]<=e)return r;return i-1}for(let r=1;r<i;++r){if(n[r]==e)return r;if(n[r]<e)return n[r-1]-e<e-n[r]?r-1:r}return i-1}function s0e(n,e,t){for(;e<t;){const i=n[e];n[e]=n[t],n[t]=i,++e,--t}}function Xg(n,e){const t=Array.isArray(e)?e:[e],i=t.length;for(let r=0;r<i;r++)n[n.length]=t[r]}function uv(n,e){const t=n.length;if(t!==e.length)return!1;for(let i=0;i<t;i++)if(n[i]!==e[i])return!1;return!0}function a0e(n,e,t){const i=e||Zg;return n.every(function(r,o){if(o===0)return!0;const s=i(n[o-1],r);return!(s>0||s===0)})}function Z3(){return!0}function LE(){return!1}function X3(){}function MJ(n){let e,t,i;return function(){const r=Array.prototype.slice.call(arguments);return(!t||this!==i||!uv(r,t))&&(i=this,t=r,e=n.apply(this,arguments)),e}}function hx(n){function e(){let t;try{t=n()}catch(i){return Promise.reject(i)}return t instanceof Promise?t:Promise.resolve(t)}return e()}function n5(n){for(const e in n)delete n[e]}function ev(n){let e;for(e in n)return!1;return!e}class Tm{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}class i5 extends t5{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;const i=this.listeners_||(this.listeners_={}),r=i[e]||(i[e]=[]);r.includes(t)||r.push(t)}dispatchEvent(e){const t=typeof e=="string",i=t?e:e.type,r=this.listeners_&&this.listeners_[i];if(!r)return;const o=t?new Tm(e):e;o.target||(o.target=this.eventTarget_||this);const s=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});i in s||(s[i]=0,a[i]=0),++s[i];let c;for(let h=0,m=r.length;h<m;++h)if("handleEvent"in r[h]?c=r[h].handleEvent(o):c=r[h].call(this,o),c===!1||o.propagationStopped){c=!1;break}if(--s[i]===0){let h=a[i];for(delete a[i];h--;)this.removeEventListener(i,X3);delete s[i]}return c}disposeInternal(){this.listeners_&&n5(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,t){if(!this.listeners_)return;const i=this.listeners_[e];if(!i)return;const r=i.indexOf(t);r!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(i[r]=X3,++this.pendingRemovals_[e]):(i.splice(r,1),i.length===0&&delete this.listeners_[e]))}}function Vo(n,e,t,i,r){if(r){const s=t;t=function(a){return n.removeEventListener(e,t),s.call(i??this,a)}}else i&&i!==n&&(t=t.bind(i));const o={target:n,type:e,listener:t};return n.addEventListener(e,t),o}function Zw(n,e,t,i){return Vo(n,e,t,i,!0)}function Ta(n){n&&n.target&&(n.target.removeEventListener(n.type,n.listener),n5(n))}class r5 extends i5{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(Ir.CHANGE)}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){const i=e.length,r=new Array(i);for(let o=0;o<i;++o)r[o]=Vo(this,e[o],t);return r}return Vo(this,e,t)}onceInternal(e,t){let i;if(Array.isArray(e)){const r=e.length;i=new Array(r);for(let o=0;o<r;++o)i[o]=Zw(this,e[o],t)}else i=Zw(this,e,t);return t.ol_key=i,i}unInternal(e,t){const i=t.ol_key;if(i)l0e(i);else if(Array.isArray(e))for(let r=0,o=e.length;r<o;++r)this.removeEventListener(e[r],t);else this.removeEventListener(e,t)}}r5.prototype.on;r5.prototype.once;r5.prototype.un;function l0e(n){if(Array.isArray(n))for(let e=0,t=n.length;e<t;++e)Ta(n[e]);else Ta(n)}function Pr(){throw new Error("Unimplemented abstract method.")}let u0e=0;function $r(n){return n.ol_uid||(n.ol_uid=String(++u0e))}class Uz extends Tm{constructor(e,t,i){super(e),this.key=t,this.oldValue=i}}class Rm extends r5{constructor(e){super(),this.on,this.once,this.un,$r(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,t){let i;i=`change:${e}`,this.hasListener(i)&&this.dispatchEvent(new Uz(i,e,t)),i=Ax.PROPERTYCHANGE,this.hasListener(i)&&this.dispatchEvent(new Uz(i,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,i){const r=this.values_||(this.values_={});if(i)r[e]=t;else{const o=r[e];r[e]=t,o!==t&&this.notify(e,o)}}setProperties(e,t){for(const i in e)this.set(i,e[i],t)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){const i=this.values_[e];delete this.values_[e],ev(this.values_)&&(this.values_=null),t||this.notify(e,i)}}}const Kz={LENGTH:"length"};class H5 extends Tm{constructor(e,t,i){super(e),this.element=t,this.index=i}}class Lg extends Rm{constructor(e,t){if(super(),this.on,this.once,this.un,t=t||{},this.unique_=!!t.unique,this.array_=e||[],this.unique_)for(let i=0,r=this.array_.length;i<r;++i)this.assertUnique_(this.array_[i],i);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,i=e.length;t<i;++t)this.push(e[t]);return this}forEach(e){const t=this.array_;for(let i=0,r=t.length;i<r;++i)e(t[i],i,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(Kz.LENGTH)}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new H5(gd.ADD,t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){const t=this.array_;for(let i=0,r=t.length;i<r;++i)if(t[i]===e)return this.removeAt(i)}removeAt(e){if(e<0||e>=this.getLength())return;const t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new H5(gd.REMOVE,t,e)),t}setAt(e,t){const i=this.getLength();if(e>=i){this.insertAt(e,t);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);const r=this.array_[e];this.array_[e]=t,this.dispatchEvent(new H5(gd.REMOVE,r,e)),this.dispatchEvent(new H5(gd.ADD,t,e))}updateLength_(){this.set(Kz.LENGTH,this.array_.length)}assertUnique_(e,t){for(let i=0,r=this.array_.length;i<r;++i)if(this.array_[i]===e&&i!==t)throw new Error("Duplicate item added to a unique collection")}}class b_ extends Tm{constructor(e,t,i){super(e),this.map=t,this.frameState=i!==void 0?i:null}}class wy extends b_{constructor(e,t,i,r,o,s){super(e,t,o),this.originalEvent=i,this.pixel_=null,this.coordinate_=null,this.dragging=r!==void 0?r:!1,this.activePointers=s}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const Zl={SINGLECLICK:"singleclick",CLICK:Ir.CLICK,DBLCLICK:Ir.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},Lb=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",c0e=Lb.includes("safari")&&!Lb.includes("chrom");c0e&&(Lb.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(Lb));const A0e=Lb.includes("webkit")&&!Lb.includes("edge"),wJ=Lb.includes("macintosh"),h0e=typeof devicePixelRatio<"u"?devicePixelRatio:1,zP=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,SJ=typeof Image<"u"&&Image.prototype.decode,d0e=typeof createImageBitmap=="function",EJ=(function(){let n=!1;try{const e=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return n})(),j9={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown"};class f0e extends i5{constructor(e,t){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=t===void 0?1:t,this.down_=null;const i=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=i,this.pointerdownListenerKey_=Vo(i,j9.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=Vo(i,j9.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(Ir.TOUCHMOVE,this.boundHandleTouchMove_,EJ?{passive:!1}:!1)}emulateClick_(e){let t=new wy(Zl.CLICK,this.map_,e);this.dispatchEvent(t),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new wy(Zl.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const i=new wy(Zl.SINGLECLICK,this.map_,e);this.dispatchEvent(i)},250)}updateActivePointers_(e){const t=e,i=t.pointerId;if(t.type==Zl.POINTERUP||t.type==Zl.POINTERCANCEL){delete this.trackedTouches_[i];for(const r in this.trackedTouches_)if(this.trackedTouches_[r].target!==t.target){delete this.trackedTouches_[r];break}}else(t.type==Zl.POINTERDOWN||t.type==Zl.POINTERMOVE)&&(this.trackedTouches_[i]=t);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const t=new wy(Zl.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(Ta),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const t=new wy(Zl.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(t),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const i=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Vo(i,Zl.POINTERMOVE,this.handlePointerMove_,this),Vo(i,Zl.POINTERUP,this.handlePointerUp_,this),Vo(this.element_,Zl.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==i&&this.dragListenerKeys_.push(Vo(this.element_.getRootNode(),Zl.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const t=new wy(Zl.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const t=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new wy(Zl.POINTERMOVE,this.map_,e,t))}handleTouchMove_(e){const t=this.originalPointerMoveEvent_;(!t||t.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(Ta(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(Ir.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Ta(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Ta),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const Z0={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},NA={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},ai={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function ws(n,e){if(!n)throw new Error(e)}const Xw=1/0;class p0e{constructor(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,n5(this.queuedElements_)}dequeue(){const e=this.elements_,t=this.priorities_,i=e[0];e.length==1?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));const r=this.keyFunction_(i);return delete this.queuedElements_[r],i}enqueue(e){ws(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const t=this.priorityFunction_(e);return t!=Xw?(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const t=this.elements_,i=this.priorities_,r=t.length,o=t[e],s=i[e],a=e;for(;e<r>>1;){const c=this.getLeftChildIndex_(e),h=this.getRightChildIndex_(e),m=h<r&&i[h]<i[c]?h:c;t[e]=t[m],i[e]=i[m],e=m}t[e]=o,i[e]=s,this.siftDown_(a,e)}siftDown_(e,t){const i=this.elements_,r=this.priorities_,o=i[t],s=r[t];for(;t>e;){const a=this.getParentIndex_(t);if(r[a]>s)i[t]=i[a],r[t]=r[a],t=a;else break}i[t]=o,r[t]=s}reprioritize(){const e=this.priorityFunction_,t=this.elements_,i=this.priorities_;let r=0;const o=t.length;let s,a,c;for(a=0;a<o;++a)s=t[a],c=e(s),c==Xw?delete this.queuedElements_[this.keyFunction_(s)]:(i[r]=c,t[r++]=s);t.length=r,i.length=r,this.heapify_()}}class OJ extends p0e{constructor(e,t){super(i=>e.apply(null,i),i=>i[0].getKey()),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const t=super.enqueue(e);return t&&e[0].addEventListener(Ir.CHANGE,this.boundHandleTileChange_),t}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const t=e.target,i=t.getState();if(i===ai.LOADED||i===ai.ERROR||i===ai.EMPTY){i!==ai.ERROR&&t.removeEventListener(Ir.CHANGE,this.boundHandleTileChange_);const r=t.getKey();r in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[r],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,t){let i=0;for(;this.tilesLoading_<e&&i<t&&this.getCount()>0;){const r=this.dequeue()[0],o=r.getKey();r.getState()===ai.IDLE&&!(o in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[o]=!0,++this.tilesLoading_,++i,r.load())}}}function m0e(n,e,t,i,r){if(!n||!(t in n.wantedTiles)||!n.wantedTiles[t][e.getKey()])return Xw;const o=n.viewState.center,s=i[0]-o[0],a=i[1]-o[1];return 65536*Math.log(r)+Math.sqrt(s*s+a*a)/r}const dl={ANIMATING:0,INTERACTING:1},um={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function Bl(n,e,t){return Math.min(Math.max(n,e),t)}function g0e(n,e,t,i,r,o){const s=r-t,a=o-i;if(s!==0||a!==0){const c=((n-t)*s+(e-i)*a)/(s*s+a*a);c>1?(t=r,i=o):c>0&&(t+=s*c,i+=a*c)}return Bb(n,e,t,i)}function Bb(n,e,t,i){const r=t-n,o=i-e;return r*r+o*o}function y0e(n){const e=n.length;for(let i=0;i<e;i++){let r=i,o=Math.abs(n[i][i]);for(let a=i+1;a<e;a++){const c=Math.abs(n[a][i]);c>o&&(o=c,r=a)}if(o===0)return null;const s=n[r];n[r]=n[i],n[i]=s;for(let a=i+1;a<e;a++){const c=-n[a][i]/n[i][i];for(let h=i;h<e+1;h++)i==h?n[a][h]=0:n[a][h]+=c*n[i][h]}}const t=new Array(e);for(let i=e-1;i>=0;i--){t[i]=n[i][e]/n[i][i];for(let r=i-1;r>=0;r--)n[r][e]-=n[r][i]*t[i]}return t}function Lz(n){return n*180/Math.PI}function $y(n){return n*Math.PI/180}function Ib(n,e){const t=n%e;return t*e<0?t+e:t}function pf(n,e,t){return n+t*(e-n)}function FE(n,e){const t=Math.pow(10,e);return Math.round(n*t)/t}function Z5(n,e){return Math.floor(FE(n,e))}function Uy(n,e){return Math.ceil(FE(n,e))}function N9(n,e,t){if(n>=e&&n<t)return n;const i=t-e;return((n-e)%i+i)%i+e}function Fz(n,e,t){return(function(i,r,o,s,a){if(!i)return;if(!r&&!e)return i;const c=e?0:o[0]*r,h=e?0:o[1]*r,m=a?a[0]:0,y=a?a[1]:0;let M=n[0]+c/2+m,x=n[2]-c/2+m,T=n[1]+h/2+y,P=n[3]-h/2+y;M>x&&(M=(x+M)/2,x=M),T>P&&(T=(P+T)/2,P=T);let F=Bl(i[0],M,x),j=Bl(i[1],T,P);if(s&&t&&r){const q=30*r;F+=-q*Math.log(1+Math.max(0,M-i[0])/q)+q*Math.log(1+Math.max(0,i[0]-x)/q),j+=-q*Math.log(1+Math.max(0,T-i[1])/q)+q*Math.log(1+Math.max(0,i[1]-P)/q)}return[F,j]})}function v0e(n){return n}const Jc={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function G9(n){const e=_p();for(let t=0,i=n.length;t<i;++t)d3(e,n[t]);return e}function b0e(n,e,t){const i=Math.min.apply(null,n),r=Math.min.apply(null,e),o=Math.max.apply(null,n),s=Math.max.apply(null,e);return A1(i,r,o,s,t)}function Vy(n,e,t){return t?(t[0]=n[0]-e,t[1]=n[1]-e,t[2]=n[2]+e,t[3]=n[3]+e,t):[n[0]-e,n[1]-e,n[2]+e,n[3]+e]}function BJ(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n.slice()}function Zb(n,e,t){let i,r;return e<n[0]?i=n[0]-e:n[2]<e?i=e-n[2]:i=0,t<n[1]?r=n[1]-t:n[3]<t?r=t-n[3]:r=0,i*i+r*r}function Fb(n,e){return jP(n,e[0],e[1])}function Fg(n,e){return n[0]<=e[0]&&e[2]<=n[2]&&n[1]<=e[1]&&e[3]<=n[3]}function jP(n,e,t){return n[0]<=e&&e<=n[2]&&n[1]<=t&&t<=n[3]}function W9(n,e){const t=n[0],i=n[1],r=n[2],o=n[3],s=e[0],a=e[1];let c=Jc.UNKNOWN;return s<t?c=c|Jc.LEFT:s>r&&(c=c|Jc.RIGHT),a<i?c=c|Jc.BELOW:a>o&&(c=c|Jc.ABOVE),c===Jc.UNKNOWN&&(c=Jc.INTERSECTING),c}function _p(){return[1/0,1/0,-1/0,-1/0]}function A1(n,e,t,i,r){return r?(r[0]=n,r[1]=e,r[2]=t,r[3]=i,r):[n,e,t,i]}function Kx(n){return A1(1/0,1/0,-1/0,-1/0,n)}function IJ(n,e){const t=n[0],i=n[1];return A1(t,i,t,i,e)}function NP(n,e,t,i,r){const o=Kx(r);return TJ(o,n,e,t,i)}function h1(n,e){return n[0]==e[0]&&n[2]==e[2]&&n[1]==e[1]&&n[3]==e[3]}function kJ(n,e){return e[0]<n[0]&&(n[0]=e[0]),e[2]>n[2]&&(n[2]=e[2]),e[1]<n[1]&&(n[1]=e[1]),e[3]>n[3]&&(n[3]=e[3]),n}function d3(n,e){e[0]<n[0]&&(n[0]=e[0]),e[0]>n[2]&&(n[2]=e[0]),e[1]<n[1]&&(n[1]=e[1]),e[1]>n[3]&&(n[3]=e[1])}function TJ(n,e,t,i,r){for(;t<i;t+=r)C0e(n,e[t],e[t+1]);return n}function C0e(n,e,t){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}function RJ(n,e){let t;return t=e(zE(n)),t||(t=e(jE(n)),t)||(t=e(NE(n)),t)||(t=e(g1(n)),t)?t:!1}function Q9(n){let e=0;return Xb(n)||(e=rs(n)*Ju(n)),e}function zE(n){return[n[0],n[1]]}function jE(n){return[n[2],n[1]]}function Ef(n){return[(n[0]+n[2])/2,(n[1]+n[3])/2]}function _0e(n,e){let t;if(e==="bottom-left")t=zE(n);else if(e==="bottom-right")t=jE(n);else if(e==="top-left")t=g1(n);else if(e==="top-right")t=NE(n);else throw new Error("Invalid corner");return t}function Jw(n,e,t,i,r){const[o,s,a,c,h,m,y,M]=DJ(n,e,t,i);return A1(Math.min(o,a,h,y),Math.min(s,c,m,M),Math.max(o,a,h,y),Math.max(s,c,m,M),r)}function DJ(n,e,t,i){const r=e*i[0]/2,o=e*i[1]/2,s=Math.cos(t),a=Math.sin(t),c=r*s,h=r*a,m=o*s,y=o*a,M=n[0],x=n[1];return[M-c+y,x-h-m,M-c-y,x-h+m,M+c-y,x+h+m,M+c+y,x+h-m,M-c+y,x-h-m]}function Ju(n){return n[3]-n[1]}function Mm(n,e,t){const i=t||_p();return Jl(n,e)?(n[0]>e[0]?i[0]=n[0]:i[0]=e[0],n[1]>e[1]?i[1]=n[1]:i[1]=e[1],n[2]<e[2]?i[2]=n[2]:i[2]=e[2],n[3]<e[3]?i[3]=n[3]:i[3]=e[3]):Kx(i),i}function g1(n){return[n[0],n[3]]}function NE(n){return[n[2],n[3]]}function rs(n){return n[2]-n[0]}function Jl(n,e){return n[0]<=e[2]&&n[2]>=e[0]&&n[1]<=e[3]&&n[3]>=e[1]}function Xb(n){return n[2]<n[0]||n[3]<n[1]}function x0e(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n}function M0e(n,e,t){let i=!1;const r=W9(n,e),o=W9(n,t);if(r===Jc.INTERSECTING||o===Jc.INTERSECTING)i=!0;else{const s=n[0],a=n[1],c=n[2],h=n[3],m=e[0],y=e[1],M=t[0],x=t[1],T=(x-y)/(M-m);let P,F;o&Jc.ABOVE&&!(r&Jc.ABOVE)&&(P=M-(x-h)/T,i=P>=s&&P<=c),!i&&o&Jc.RIGHT&&!(r&Jc.RIGHT)&&(F=x-(M-c)*T,i=F>=a&&F<=h),!i&&o&Jc.BELOW&&!(r&Jc.BELOW)&&(P=M-(x-a)/T,i=P>=s&&P<=c),!i&&o&Jc.LEFT&&!(r&Jc.LEFT)&&(F=x-(M-s)*T,i=F>=a&&F<=h)}return i}function w0e(n,e,t,i){if(Xb(n))return Kx(t);let r=[];r=[n[0],n[1],n[2],n[1],n[2],n[3],n[0],n[3]],e(r,r,2);const o=[],s=[];for(let a=0,c=r.length;a<c;a+=2)o.push(r[a]),s.push(r[a+1]);return b0e(o,s,t)}function PJ(n,e){const t=e.getExtent(),i=Ef(n);if(e.canWrapX()&&(i[0]<t[0]||i[0]>=t[2])){const r=rs(t),s=Math.floor((i[0]-t[0])/r)*r;n[0]-=s,n[2]-=s}return n}function UJ(n,e,t){if(e.canWrapX()){const i=e.getExtent();if(!isFinite(n[0])||!isFinite(n[2]))return[[i[0],n[1],i[2],n[3]]];PJ(n,e);const r=rs(i);if(rs(n)>r&&!t)return[[i[0],n[1],i[2],n[3]]];if(n[0]<i[0])return[[n[0]+r,n[1],i[2],n[3]],[i[0],n[1],n[2],n[3]]];if(n[2]>i[2])return[[n[0],n[1],i[2],n[3]],[i[0],n[1],n[2]-r,n[3]]]}return[n]}function S0e(n,e){return n[0]+=+e[0],n[1]+=+e[1],n}function eS(n,e){let t=!0;for(let i=n.length-1;i>=0;--i)if(n[i]!=e[i]){t=!1;break}return t}function GP(n,e){const t=Math.cos(e),i=Math.sin(e),r=n[0]*t-n[1]*i,o=n[1]*t+n[0]*i;return n[0]=r,n[1]=o,n}function E0e(n,e){return n[0]*=e,n[1]*=e,n}function O0e(n,e){const t=n[0]-e[0],i=n[1]-e[1];return t*t+i*i}function B0e(n,e){return Math.sqrt(O0e(n,e))}function WP(n,e){if(e.canWrapX()){const t=rs(e.getExtent()),i=I0e(n,e,t);i&&(n[0]-=i*t)}return n}function I0e(n,e,t){const i=e.getExtent();let r=0;return e.canWrapX()&&(n[0]<i[0]||n[0]>i[2])&&(t=t||rs(i),r=Math.floor((n[0]-i[0])/t)),r}function KJ(n){return Math.pow(n,3)}function Lx(n){return 1-KJ(1-n)}function k0e(n){return 3*n*n-2*n*n*n}function T0e(n){return n}const R0e=63710088e-1;function zz(n,e,t){t=t||R0e;const i=$y(n[1]),r=$y(e[1]),o=(r-i)/2,s=$y(e[0]-n[0])/2,a=Math.sin(o)*Math.sin(o)+Math.sin(s)*Math.sin(s)*Math.cos(i)*Math.cos(r);return 2*t*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}function LJ(...n){console.warn(...n)}const tv={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class GE{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||tv[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const o5=6378137,O_=Math.PI*o5,D0e=[-O_,-O_,O_,O_],P0e=[-180,-85,180,85],X5=o5*Math.log(Math.tan(Math.PI/2));class UC extends GE{constructor(e){super({code:e,units:"m",extent:D0e,global:!0,worldExtent:P0e,getPointResolution:function(t,i){return t/Math.cosh(i[1]/o5)}})}}const jz=[new UC("EPSG:3857"),new UC("EPSG:102100"),new UC("EPSG:102113"),new UC("EPSG:900913"),new UC("http://www.opengis.net/def/crs/EPSG/0/3857"),new UC("http://www.opengis.net/gml/srs/epsg.xml#3857")];function U0e(n,e,t,i){const r=n.length;t=t>1?t:2,i=i??t,e===void 0&&(t>2?e=n.slice():e=new Array(r));for(let o=0;o<r;o+=i){e[o]=O_*n[o]/180;let s=o5*Math.log(Math.tan(Math.PI*(+n[o+1]+90)/360));s>X5?s=X5:s<-X5&&(s=-X5),e[o+1]=s}return e}function K0e(n,e,t,i){const r=n.length;t=t>1?t:2,i=i??t,e===void 0&&(t>2?e=n.slice():e=new Array(r));for(let o=0;o<r;o+=i)e[o]=180*n[o]/O_,e[o+1]=360*Math.atan(Math.exp(n[o+1]/o5))/Math.PI-90;return e}const L0e=6378137,Nz=[-180,-90,180,90],F0e=Math.PI*L0e/180;class Xv extends GE{constructor(e,t){super({code:e,units:"degrees",extent:Nz,axisOrientation:t,global:!0,metersPerUnit:F0e,worldExtent:Nz})}}const Gz=[new Xv("CRS:84"),new Xv("EPSG:4326","neu"),new Xv("urn:ogc:def:crs:OGC:1.3:CRS84"),new Xv("urn:ogc:def:crs:OGC:2:84"),new Xv("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new Xv("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Xv("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let q9={};function z0e(n){return q9[n]||q9[n.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function j0e(n,e){q9[n]=e}let G_={};function J3(n,e,t){const i=n.getCode(),r=e.getCode();i in G_||(G_[i]={}),G_[i][r]=t}function WO(n,e){return n in G_&&e in G_[n]?G_[n][e]:null}const tS=.9996,vp=.00669438,WE=vp*vp,QE=WE*vp,fb=vp/(1-vp),Wz=Math.sqrt(1-vp),dx=(1-Wz)/(1+Wz),FJ=dx*dx,QP=FJ*dx,qP=QP*dx,zJ=qP*dx,jJ=1-vp/4-3*WE/64-5*QE/256,N0e=3*vp/8+3*WE/32+45*QE/1024,G0e=15*WE/256+45*QE/1024,W0e=35*QE/3072,Q0e=3/2*dx-27/32*QP+269/512*zJ,q0e=21/16*FJ-55/32*qP,Y0e=151/96*QP-417/128*zJ,$0e=1097/512*qP,nS=6378137;function V0e(n,e,t){const i=n-5e5,s=(t.north?e:e-1e7)/tS/(nS*jJ),a=s+Q0e*Math.sin(2*s)+q0e*Math.sin(4*s)+Y0e*Math.sin(6*s)+$0e*Math.sin(8*s),c=Math.sin(a),h=c*c,m=Math.cos(a),y=c/m,M=y*y,x=M*M,T=1-vp*h,P=Math.sqrt(1-vp*h),F=nS/P,j=(1-vp)/T,q=fb*m**2,V=q*q,H=i/(F*tS),Q=H*H,Y=Q*H,z=Y*H,se=z*H,le=se*H,pe=a-y/j*(Q/2-z/24*(5+3*M+10*q-4*V-9*fb))+le/720*(61+90*M+298*q+45*x-252*fb-3*V);let de=(H-Y/6*(1+2*M+q)+se/120*(5-2*q+28*M-3*V+8*fb+24*x))/m;return de=N9(de+$y(NJ(t.number)),-Math.PI,Math.PI),[Lz(de),Lz(pe)]}const Qz=-80,qz=84,H0e=-180,Z0e=180;function X0e(n,e,t){n=N9(n,H0e,Z0e),e<Qz?e=Qz:e>qz&&(e=qz);const i=$y(e),r=Math.sin(i),o=Math.cos(i),s=r/o,a=s*s,c=a*a,h=$y(n),m=NJ(t.number),y=$y(m),M=nS/Math.sqrt(1-vp*r**2),x=fb*o**2,T=o*N9(h-y,-Math.PI,Math.PI),P=T*T,F=P*T,j=F*T,q=j*T,V=q*T,H=nS*(jJ*i-N0e*Math.sin(2*i)+G0e*Math.sin(4*i)-W0e*Math.sin(6*i)),Q=tS*M*(T+F/6*(1-a+x)+q/120*(5-18*a+c+72*x-58*fb))+5e5;let Y=tS*(H+M*s*(P/2+j/24*(5-a+9*x+4*x**2)+V/720*(61-58*a+c+600*x-330*fb)));return t.north||(Y+=1e7),[Q,Y]}function NJ(n){return(n-1)*6-180+3}const J0e=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function GJ(n){let e=0;for(const r of J0e){const o=n.match(r);if(o){e=parseInt(o[1]);break}}if(!e)return null;let t=0,i=!1;return e>32700&&e<32761?t=e-32700:e>32600&&e<32661&&(i=!0,t=e-32600),t?{number:t,north:i}:null}function Yz(n,e){return function(t,i,r,o){const s=t.length;r=r>1?r:2,o=o??r,i||(r>2?i=t.slice():i=new Array(s));for(let a=0;a<s;a+=o){const c=t[a],h=t[a+1],m=n(c,h,e);i[a]=m[0],i[a+1]=m[1]}return i}}function e1e(n){return GJ(n)?new GE({code:n,units:"m"}):null}function t1e(n){const e=GJ(n.getCode());return e?{forward:Yz(X0e,e),inverse:Yz(V0e,e)}:null}const n1e=[t1e],i1e=[e1e];let Y9=!0;function WJ(n){Y9=!1}function YP(n,e){if(e!==void 0){for(let t=0,i=n.length;t<i;++t)e[t]=n[t];e=e}else e=n.slice();return e}function $9(n){j0e(n.getCode(),n),J3(n,n,YP)}function r1e(n){n.forEach($9)}function Hs(n){if(typeof n!="string")return n;const e=z0e(n);if(e)return e;for(const t of i1e){const i=t(n);if(i)return i}return null}function V9(n,e,t,i){n=Hs(n);let r;const o=n.getPointResolutionFunc();if(o){if(r=o(e,t),i&&i!==n.getUnits()){const s=n.getMetersPerUnit();s&&(r=r*s/tv[i])}}else{const s=n.getUnits();if(s=="degrees"&&!i||i=="degrees")r=e;else{const a=s5(n,Hs("EPSG:4326"));if(!a&&s!=="degrees")r=e*n.getMetersPerUnit();else{let h=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];h=a(h,h,2);const m=zz(h.slice(0,2),h.slice(2,4)),y=zz(h.slice(4,6),h.slice(6,8));r=(m+y)/2}const c=i?tv[i]:n.getMetersPerUnit();c!==void 0&&(r/=c)}}return r}function $z(n){r1e(n),n.forEach(function(e){n.forEach(function(t){e!==t&&J3(e,t,YP)})})}function o1e(n,e,t,i){n.forEach(function(r){e.forEach(function(o){J3(r,o,t),J3(o,r,i)})})}function $P(n,e){return n?typeof n=="string"?Hs(n):n:Hs(e)}function s1e(n){return(function(e,t,i,r){const o=e.length;i=i!==void 0?i:2,r=r??i,t=t!==void 0?t:new Array(o);for(let s=0;s<o;s+=r){const a=n(e.slice(s,s+i)),c=a.length;for(let h=0,m=r;h<m;++h)t[s+h]=h>=c?e[s+h]:a[h]}return t})}function H9(n,e){return WJ(),qE(n,"EPSG:4326",e!==void 0?e:"EPSG:3857")}function QO(n,e){const t=qE(n,"EPSG:3857","EPSG:4326"),i=t[0];return(i<-180||i>180)&&(t[0]=Ib(i+180,360)-180),t}function Hy(n,e){if(n===e)return!0;const t=n.getUnits()===e.getUnits();return(n.getCode()===e.getCode()||s5(n,e)===YP)&&t}function s5(n,e){const t=n.getCode(),i=e.getCode();let r=WO(t,i);if(r)return r;let o=null,s=null;for(const c of n1e)o||(o=c(n)),s||(s=c(e));if(!o&&!s)return null;const a="EPSG:4326";if(s)if(o)r=qO(o.inverse,s.forward);else{const c=WO(t,a);c&&(r=qO(c,s.forward))}else{const c=WO(a,i);c&&(r=qO(o.inverse,c))}return r&&($9(n),$9(e),J3(n,e,r)),r}function qO(n,e){return function(t,i,r,o){return i=n(t,i,r,o),e(i,i,r,o)}}function e4(n,e){const t=Hs(n),i=Hs(e);return s5(t,i)}function qE(n,e,t){const i=e4(e,t);if(!i){const r=Hs(e).getCode(),o=Hs(t).getCode();throw new Error(`No transform available between ${r} and ${o}`)}return i(n,void 0,n.length)}let a1e=null;function l1e(){return a1e}function Z9(n,e){return n}function H0(n,e){return Y9&&!eS(n,[0,0])&&n[0]>=-180&&n[0]<=180&&n[1]>=-90&&n[1]<=90&&(Y9=!1,LJ("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),n}function VP(n,e){return n}function zg(n,e){return n}function u1e(){$z(jz),$z(Gz),o1e(Gz,jz,U0e,K0e)}u1e();const QJ=new Array(6);function wd(){return[1,0,0,1,0,0]}function Vz(n){return ZP(n,1,0,0,1,0,0)}function HP(n,e){const t=n[0],i=n[1],r=n[2],o=n[3],s=n[4],a=n[5],c=e[0],h=e[1],m=e[2],y=e[3],M=e[4],x=e[5];return n[0]=t*c+r*h,n[1]=i*c+o*h,n[2]=t*m+r*y,n[3]=i*m+o*y,n[4]=t*M+r*x+s,n[5]=i*M+o*x+a,n}function ZP(n,e,t,i,r,o,s){return n[0]=e,n[1]=t,n[2]=i,n[3]=r,n[4]=o,n[5]=s,n}function c1e(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n}function Hu(n,e){const t=e[0],i=e[1];return e[0]=n[0]*t+n[2]*i+n[4],e[1]=n[1]*t+n[3]*i+n[5],e}function YO(n,e,t){return HP(n,ZP(QJ,e,0,0,t,0,0))}function A1e(n,e,t){return HP(n,ZP(QJ,1,0,0,1,e,t))}function t0(n,e,t,i,r,o,s,a){const c=Math.sin(o),h=Math.cos(o);return n[0]=i*h,n[1]=r*c,n[2]=-i*c,n[3]=r*h,n[4]=s*i*h-a*i*c+e,n[5]=s*r*c+a*r*h+t,n}function qJ(n,e){const t=h1e(e);ws(t!==0,"Transformation matrix cannot be inverted");const i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],c=e[5];return n[0]=s/t,n[1]=-r/t,n[2]=-o/t,n[3]=i/t,n[4]=(o*c-s*a)/t,n[5]=-(i*c-r*a)/t,n}function h1e(n){return n[0]*n[3]-n[1]*n[2]}const d1e=[1e5,1e5,1e5,1e5,2,2];function f1e(n){return"matrix("+n.join(", ")+")"}function Hz(n){return n.substring(7,n.length-1).split(",").map(parseFloat)}function p1e(n,e){const t=Hz(n),i=Hz(e);for(let r=0;r<6;++r)if(Math.round((t[r]-i[r])*d1e[r])!==0)return!1;return!0}function Zy(n,e,t,i,r,o,s){o=o||[],s=s||2;let a=0;for(let c=e;c<t;c+=i){const h=n[c],m=n[c+1];o[a++]=r[0]*h+r[2]*m+r[4],o[a++]=r[1]*h+r[3]*m+r[5];for(let y=2;y<s;y++)o[a++]=n[c+y]}return o&&o.length!=a&&(o.length=a),o}function YJ(n,e,t,i,r,o,s){s=s||[];const a=Math.cos(r),c=Math.sin(r),h=o[0],m=o[1];let y=0;for(let M=e;M<t;M+=i){const x=n[M]-h,T=n[M+1]-m;s[y++]=h+x*a-T*c,s[y++]=m+x*c+T*a;for(let P=M+2;P<M+i;++P)s[y++]=n[P]}return s&&s.length!=y&&(s.length=y),s}function m1e(n,e,t,i,r,o,s,a){a=a||[];const c=s[0],h=s[1];let m=0;for(let y=e;y<t;y+=i){const M=n[y]-c,x=n[y+1]-h;a[m++]=c+r*M,a[m++]=h+o*x;for(let T=y+2;T<y+i;++T)a[m++]=n[T]}return a&&a.length!=m&&(a.length=m),a}function g1e(n,e,t,i,r,o,s){s=s||[];let a=0;for(let c=e;c<t;c+=i){s[a++]=n[c]+r,s[a++]=n[c+1]+o;for(let h=c+2;h<c+i;++h)s[a++]=n[h]}return s&&s.length!=a&&(s.length=a),s}const Zz=wd(),y1e=[NaN,NaN];class $J extends Rm{constructor(){super(),this.extent_=_p(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=MJ((e,t,i)=>{if(!i)return this.getSimplifiedGeometry(t);const r=this.clone();return r.applyTransform(i),r.getSimplifiedGeometry(t)})}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return Pr()}closestPointXY(e,t,i,r){return Pr()}containsXY(e,t){return this.closestPointXY(e,t,y1e,Number.MIN_VALUE)===0}getClosestPoint(e,t){return t=t||[NaN,NaN],this.closestPointXY(e[0],e[1],t,1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return Pr()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&Kx(t),this.extentRevision_=this.getRevision()}return x0e(this.extent_,e)}rotate(e,t){Pr()}scale(e,t,i){Pr()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return Pr()}getType(){return Pr()}applyTransform(e){Pr()}intersectsExtent(e){return Pr()}translate(e,t){Pr()}transform(e,t){const i=Hs(e),r=i.getUnits()=="tile-pixels"?function(o,s,a){const c=i.getExtent(),h=i.getWorldExtent(),m=Ju(h)/Ju(c);t0(Zz,h[0],h[3],m,-m,0,0,0);const y=Zy(o,0,o.length,a,Zz,s),M=e4(i,t);return M?M(y,y,a):y}:e4(i,t);return this.applyTransform(r),this}}class Jb extends $J{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return NP(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return Pr()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=Xz(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){Pr()}setLayout(e,t,i){let r;if(e)r=Xz(e);else{for(let o=0;o<i;++o){if(t.length===0){this.layout="XY",this.stride=2;return}t=t[0]}r=t.length,e=eC(r)}this.layout=e,this.stride=r}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(e,t){const i=this.getFlatCoordinates();if(i){const r=this.getStride();YJ(i,0,i.length,r,e,t,i),this.changed()}}scale(e,t,i){t===void 0&&(t=e),i||(i=Ef(this.getExtent()));const r=this.getFlatCoordinates();if(r){const o=this.getStride();m1e(r,0,r.length,o,e,t,i,r),this.changed()}}translate(e,t){const i=this.getFlatCoordinates();if(i){const r=this.getStride();g1e(i,0,i.length,r,e,t,i),this.changed()}}}function eC(n){let e;return n==2?e="XY":n==3?e="XYZ":n==4&&(e="XYZM"),e}function Xz(n){let e;return n=="XY"?e=2:n=="XYZ"||n=="XYM"?e=3:n=="XYZM"&&(e=4),e}function v1e(n,e,t){const i=n.getFlatCoordinates();if(!i)return null;const r=n.getStride();return Zy(i,0,i.length,r,e,t)}function VJ(n,e,t,i){let r=0;const o=n[t-i],s=n[t-i+1];let a=0,c=0;for(;e<t;e+=i){const h=n[e]-o,m=n[e+1]-s;r+=c*h-a*m,a=h,c=m}return r/2}function HJ(n,e,t,i){let r=0;for(let o=0,s=t.length;o<s;++o){const a=t[o];r+=VJ(n,e,a,i),e=a}return r}function b1e(n,e,t,i){let r=0;for(let o=0,s=t.length;o<s;++o){const a=t[o];r+=HJ(n,e,a,i),e=a[a.length-1]}return r}function Jz(n,e,t,i,r,o,s){const a=n[e],c=n[e+1],h=n[t]-a,m=n[t+1]-c;let y;if(h===0&&m===0)y=e;else{const M=((r-a)*h+(o-c)*m)/(h*h+m*m);if(M>1)y=t;else if(M>0){for(let x=0;x<i;++x)s[x]=pf(n[e+x],n[t+x],M);s.length=i;return}else y=e}for(let M=0;M<i;++M)s[M]=n[y+M];s.length=i}function XP(n,e,t,i,r){let o=n[e],s=n[e+1];for(e+=i;e<t;e+=i){const a=n[e],c=n[e+1],h=Bb(o,s,a,c);h>r&&(r=h),o=a,s=c}return r}function JP(n,e,t,i,r){for(let o=0,s=t.length;o<s;++o){const a=t[o];r=XP(n,e,a,i,r),e=a}return r}function C1e(n,e,t,i,r){for(let o=0,s=t.length;o<s;++o){const a=t[o];r=JP(n,e,a,i,r),e=a[a.length-1]}return r}function eU(n,e,t,i,r,o,s,a,c,h,m){if(e==t)return h;let y,M;if(r===0){if(M=Bb(s,a,n[e],n[e+1]),M<h){for(y=0;y<i;++y)c[y]=n[e+y];return c.length=i,M}return h}m=m||[NaN,NaN];let x=e+i;for(;x<t;)if(Jz(n,x-i,x,i,s,a,m),M=Bb(s,a,m[0],m[1]),M<h){for(h=M,y=0;y<i;++y)c[y]=m[y];c.length=i,x+=i}else x+=i*Math.max((Math.sqrt(M)-Math.sqrt(h))/r|0,1);if(o&&(Jz(n,t-i,e,i,s,a,m),M=Bb(s,a,m[0],m[1]),M<h)){for(h=M,y=0;y<i;++y)c[y]=m[y];c.length=i}return h}function tU(n,e,t,i,r,o,s,a,c,h,m){m=m||[NaN,NaN];for(let y=0,M=t.length;y<M;++y){const x=t[y];h=eU(n,e,x,i,r,o,s,a,c,h,m),e=x}return h}function _1e(n,e,t,i,r,o,s,a,c,h,m){m=m||[NaN,NaN];for(let y=0,M=t.length;y<M;++y){const x=t[y];h=tU(n,e,x,i,r,o,s,a,c,h,m),e=x[x.length-1]}return h}function x1e(n,e,t,i){for(let r=0,o=t.length;r<o;++r)n[e++]=t[r];return e}function YE(n,e,t,i){for(let r=0,o=t.length;r<o;++r){const s=t[r];for(let a=0;a<i;++a)n[e++]=s[a]}return e}function a5(n,e,t,i,r){r=r||[];let o=0;for(let s=0,a=t.length;s<a;++s){const c=YE(n,e,t[s],i);r[o++]=c,e=c}return r.length=o,r}function ZJ(n,e,t,i,r){r=r||[];let o=0;for(let s=0,a=t.length;s<a;++s){const c=a5(n,e,t[s],i,r[o]);c.length===0&&(c[0]=e),r[o++]=c,e=c[c.length-1]}return r.length=o,r}function Ky(n,e,t,i,r){r=r!==void 0?r:[];let o=0;for(let s=e;s<t;s+=i)r[o++]=n.slice(s,s+i);return r.length=o,r}function t4(n,e,t,i,r){r=r!==void 0?r:[];let o=0;for(let s=0,a=t.length;s<a;++s){const c=t[s];r[o++]=Ky(n,e,c,i,r[o]),e=c}return r.length=o,r}function X9(n,e,t,i,r){r=r!==void 0?r:[];let o=0;for(let s=0,a=t.length;s<a;++s){const c=t[s];r[o++]=c.length===1&&c[0]===e?[]:t4(n,e,c,i,r[o]),e=c[c.length-1]}return r.length=o,r}function $E(n,e,t,i,r,o,s){const a=(t-e)/i;if(a<3){for(;e<t;e+=i)o[s++]=n[e],o[s++]=n[e+1];return s}const c=new Array(a);c[0]=1,c[a-1]=1;const h=[e,t-i];let m=0;for(;h.length>0;){const y=h.pop(),M=h.pop();let x=0;const T=n[M],P=n[M+1],F=n[y],j=n[y+1];for(let q=M+i;q<y;q+=i){const V=n[q],H=n[q+1],Q=g0e(V,H,T,P,F,j);Q>x&&(m=q,x=Q)}x>r&&(c[(m-e)/i]=1,M+i<m&&h.push(M,m),m+i<y&&h.push(m,y))}for(let y=0;y<a;++y)c[y]&&(o[s++]=n[e+y*i],o[s++]=n[e+y*i+1]);return s}function XJ(n,e,t,i,r,o,s,a){for(let c=0,h=t.length;c<h;++c){const m=t[c];s=$E(n,e,m,i,r,o,s),a.push(s),e=m}return s}function ob(n,e){return e*Math.round(n/e)}function M1e(n,e,t,i,r,o,s){if(e==t)return s;let a=ob(n[e],r),c=ob(n[e+1],r);e+=i,o[s++]=a,o[s++]=c;let h,m;do if(h=ob(n[e],r),m=ob(n[e+1],r),e+=i,e==t)return o[s++]=h,o[s++]=m,s;while(h==a&&m==c);for(;e<t;){const y=ob(n[e],r),M=ob(n[e+1],r);if(e+=i,y==h&&M==m)continue;const x=h-a,T=m-c,P=y-a,F=M-c;if(x*F==T*P&&(x<0&&P<x||x==P||x>0&&P>x)&&(T<0&&F<T||T==F||T>0&&F>T)){h=y,m=M;continue}o[s++]=h,o[s++]=m,a=h,c=m,h=y,m=M}return o[s++]=h,o[s++]=m,s}function nU(n,e,t,i,r,o,s,a){for(let c=0,h=t.length;c<h;++c){const m=t[c];s=M1e(n,e,m,i,r,o,s),a.push(s),e=m}return s}function w1e(n,e,t,i,r,o,s,a){for(let c=0,h=t.length;c<h;++c){const m=t[c],y=[];s=nU(n,e,m,i,r,o,s,y),a.push(y),e=m[m.length-1]}return s}class n4 extends Jb{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}clone(){return new n4(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,i,r){return r<Zb(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(XP(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),eU(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,i,r))}getArea(){return VJ(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return Ky(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const t=[];return t.length=$E(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new n4(t,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=YE(this.flatCoordinates,0,e,this.stride),this.changed()}}class zb extends Jb{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){const e=new zb(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,r){const o=this.flatCoordinates,s=Bb(e,t,o[0],o[1]);if(s<r){const a=this.stride;for(let c=0;c<a;++c)i[c]=o[c];return i.length=a,s}return r}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return IJ(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return jP(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=x1e(this.flatCoordinates,0,e,this.stride),this.changed()}}function S1e(n,e,t,i,r){return!RJ(r,function(s){return!pb(n,e,t,i,s[0],s[1])})}function pb(n,e,t,i,r,o){let s=0,a=n[t-i],c=n[t-i+1];for(;e<t;e+=i){const h=n[e],m=n[e+1];c<=o?m>o&&(h-a)*(o-c)-(r-a)*(m-c)>0&&s++:m<=o&&(h-a)*(o-c)-(r-a)*(m-c)<0&&s--,a=h,c=m}return s!==0}function iU(n,e,t,i,r,o){if(t.length===0||!pb(n,e,t[0],i,r,o))return!1;for(let s=1,a=t.length;s<a;++s)if(pb(n,t[s-1],t[s],i,r,o))return!1;return!0}function E1e(n,e,t,i,r,o){if(t.length===0)return!1;for(let s=0,a=t.length;s<a;++s){const c=t[s];if(iU(n,e,c,i,r,o))return!0;e=c[c.length-1]}return!1}function rU(n,e,t,i,r,o,s){let a,c,h,m,y,M,x;const T=r[o+1],P=[];for(let q=0,V=t.length;q<V;++q){const H=t[q];for(m=n[H-i],M=n[H-i+1],a=e;a<H;a+=i)y=n[a],x=n[a+1],(T<=M&&x<=T||M<=T&&T<=x)&&(h=(T-M)/(x-M)*(y-m)+m,P.push(h)),m=y,M=x}let F=NaN,j=-1/0;for(P.sort(Zg),m=P[0],a=1,c=P.length;a<c;++a){y=P[a];const q=Math.abs(y-m);q>j&&(h=(m+y)/2,iU(n,e,t,i,h,T)&&(F=h,j=q)),m=y}return isNaN(F)&&(F=r[o]),s?(s.push(F,T,j),s):[F,T,j]}function JJ(n,e,t,i,r){let o=[];for(let s=0,a=t.length;s<a;++s){const c=t[s];o=rU(n,e,c,i,r,2*s,o),e=c[c.length-1]}return o}function eee(n,e,t,i,r){let o;for(e+=i;e<t;e+=i)if(o=r(n.slice(e-i,e),n.slice(e,e+i)),o)return o;return!1}function VE(n,e,t,i,r,o){return o=o??TJ(_p(),n,e,t,i),Jl(r,o)?o[0]>=r[0]&&o[2]<=r[2]||o[1]>=r[1]&&o[3]<=r[3]?!0:eee(n,e,t,i,function(s,a){return M0e(r,s,a)}):!1}function O1e(n,e,t,i,r){for(let o=0,s=t.length;o<s;++o){if(VE(n,e,t[o],i,r))return!0;e=t[o]}return!1}function tee(n,e,t,i,r){return!!(VE(n,e,t,i,r)||pb(n,e,t,i,r[0],r[1])||pb(n,e,t,i,r[0],r[3])||pb(n,e,t,i,r[2],r[1])||pb(n,e,t,i,r[2],r[3]))}function nee(n,e,t,i,r){if(!tee(n,e,t[0],i,r))return!1;if(t.length===1)return!0;for(let o=1,s=t.length;o<s;++o)if(S1e(n,t[o-1],t[o],i,r)&&!VE(n,t[o-1],t[o],i,r))return!1;return!0}function B1e(n,e,t,i,r){for(let o=0,s=t.length;o<s;++o){const a=t[o];if(nee(n,e,a,i,r))return!0;e=a[a.length-1]}return!1}function I1e(n,e,t,i){for(;e<t-i;){for(let r=0;r<i;++r){const o=n[e+r];n[e+r]=n[t-i+r],n[t-i+r]=o}e+=i,t-=i}}function oU(n,e,t,i){let r=0,o=n[t-i],s=n[t-i+1];for(;e<t;e+=i){const a=n[e],c=n[e+1];r+=(a-o)*(c+s),o=a,s=c}return r===0?void 0:r>0}function sU(n,e,t,i,r){r=r!==void 0?r:!1;for(let o=0,s=t.length;o<s;++o){const a=t[o],c=oU(n,e,a,i);if(o===0){if(r&&c||!r&&!c)return!1}else if(r&&!c||!r&&c)return!1;e=a}return!0}function iee(n,e,t,i,r){for(let o=0,s=t.length;o<s;++o){const a=t[o];if(!sU(n,e,a,i,r))return!1;a.length&&(e=a[a.length-1])}return!0}function iS(n,e,t,i,r){r=r!==void 0?r:!1;for(let o=0,s=t.length;o<s;++o){const a=t[o],c=oU(n,e,a,i);(o===0?r&&c||!r&&!c:r&&!c||!r&&c)&&I1e(n,e,a,i),e=a}return e}function J9(n,e,t,i,r){for(let o=0,s=t.length;o<s;++o)e=iS(n,e,t[o],i,r);return e}function ree(n,e){const t=[];let i=0,r=0,o;for(let s=0,a=e.length;s<a;++s){const c=e[s],h=oU(n,i,c,2);if(o===void 0&&(o=h),h===o)t.push(e.slice(r,s+1));else{if(t.length===0)continue;t[t.length-1].push(e[r])}r=s+1,i=c}return t}class d1 extends Jb{constructor(e,t,i){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,t!==void 0&&i?(this.setFlatCoordinates(t,e),this.ends_=i):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?Xg(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new d1(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,i,r){return r<Zb(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(JP(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),tU(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,i,r))}containsXY(e,t){return iU(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return HJ(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),iS(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,t4(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=Ef(this.getExtent());this.flatInteriorPoint_=rU(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new zb(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new n4(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,t=this.flatCoordinates,i=this.ends_,r=[];let o=0;for(let s=0,a=i.length;s<a;++s){const c=i[s],h=new n4(t.slice(o,c),e);r.push(h),o=c}return r}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;sU(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=iS(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=nU(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,i),new d1(t,"XY",i)}getType(){return"Polygon"}intersectsExtent(e){return nee(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=a5(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}function ej(n){if(Xb(n))throw new Error("Cannot create polygon from empty extent");const e=n[0],t=n[1],i=n[2],r=n[3],o=[e,t,e,r,i,r,i,t,e,t];return new d1(o,"XY",[o.length])}function aU(n,e,t,i){const r=rs(e)/t[0],o=Ju(e)/t[1];return i?Math.min(n,Math.max(r,o)):Math.min(n,Math.min(r,o))}function lU(n,e,t){let i=Math.min(n,e);const r=50;return i*=Math.log(1+r*Math.max(0,n/e-1))/r+1,t&&(i=Math.max(i,t),i/=Math.log(1+r*Math.max(0,t/n-1))/r+1),Bl(i,t/2,e*2)}function k1e(n,e,t,i){return e=e!==void 0?e:!0,(function(r,o,s,a){if(r!==void 0){const c=n[0],h=n[n.length-1],m=t?aU(c,t,s,i):c;if(a)return e?lU(r,m,h):Bl(r,h,m);const y=Math.min(m,r),M=Math.floor(KE(n,y,o));return n[M]>m&&M<n.length-1?n[M+1]:n[M]}})}function T1e(n,e,t,i,r,o){return i=i!==void 0?i:!0,t=t!==void 0?t:0,(function(s,a,c,h){if(s!==void 0){const m=r?aU(e,r,c,o):e;if(h)return i?lU(s,m,t):Bl(s,t,m);const y=1e-9,M=Math.ceil(Math.log(e/m)/Math.log(n)-y),x=-a*(.5-y)+.5,T=Math.min(m,s),P=Math.floor(Math.log(e/T)/Math.log(n)+x),F=Math.max(M,P),j=e/Math.pow(n,F);return Bl(j,t,m)}})}function tj(n,e,t,i,r){return t=t!==void 0?t:!0,(function(o,s,a,c){if(o!==void 0){const h=i?aU(n,i,a,r):n;return!t||!c?Bl(o,e,h):lU(o,h,e)}})}function uU(n){if(n!==void 0)return 0}function nj(n){if(n!==void 0)return n}function R1e(n){const e=2*Math.PI/n;return(function(t,i){if(i)return t;if(t!==void 0)return t=Math.floor(t/e+.5)*e,t})}function D1e(n){const e=$y(5);return(function(t,i){return i||t===void 0?t:Math.abs(t)<=e?0:t})}const oee=42,cU=256,$O=0;class gm extends Rm{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=$P(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&WJ(),e.center&&(e.center=H0(e.center,this.projection_)),e.extent&&(e.extent=zg(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const t=Object.assign({},e);for(const a in um)delete t[a];this.setProperties(t,!0);const i=U1e(e);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=i.minZoom;const r=P1e(e),o=i.constraint,s=K1e(e);this.constraints_={center:r,resolution:o,rotation:s},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;const i=this.getCenterInternal();if(i){const r=e||[0,0,0,0];t=t||[0,0,0,0];const o=this.getResolution(),s=o/2*(r[3]-t[3]+t[1]-r[1]),a=o/2*(r[0]-t[0]+t[2]-r[2]);this.setCenterInternal([i[0]+s,i[1]-a])}}getUpdatedOptions_(e){const t=this.getProperties();return t.resolution!==void 0?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const t=new Array(arguments.length);for(let i=0;i<t.length;++i){let r=arguments[i];r.center&&(r=Object.assign({},r),r.center=H0(r.center,this.getProjection())),r.anchor&&(r=Object.assign({},r),r.anchor=H0(r.anchor,this.getProjection())),t[i]=r}this.animateInternal.apply(this,t)}animateInternal(e){let t=arguments.length,i;t>1&&typeof arguments[t-1]=="function"&&(i=arguments[t-1],--t);let r=0;for(;r<t&&!this.isDef();++r){const m=arguments[r];m.center&&this.setCenterInternal(m.center),m.zoom!==void 0?this.setZoom(m.zoom):m.resolution&&this.setResolution(m.resolution),m.rotation!==void 0&&this.setRotation(m.rotation)}if(r===t){i&&J5(i,!0);return}let o=Date.now(),s=this.targetCenter_.slice(),a=this.targetResolution_,c=this.targetRotation_;const h=[];for(;r<t;++r){const m=arguments[r],y={start:o,complete:!1,anchor:m.anchor,duration:m.duration!==void 0?m.duration:1e3,easing:m.easing||k0e,callback:i};if(m.center&&(y.sourceCenter=s,y.targetCenter=m.center.slice(),s=y.targetCenter),m.zoom!==void 0?(y.sourceResolution=a,y.targetResolution=this.getResolutionForZoom(m.zoom),a=y.targetResolution):m.resolution&&(y.sourceResolution=a,y.targetResolution=m.resolution,a=y.targetResolution),m.rotation!==void 0){y.sourceRotation=c;const M=Ib(m.rotation-c+Math.PI,2*Math.PI)-Math.PI;y.targetRotation=c+M,c=y.targetRotation}L1e(y)?y.complete=!0:o+=y.duration,h.push(y)}this.animations_.push(h),this.setHint(dl.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[dl.ANIMATING]>0}getInteracting(){return this.hints_[dl.INTERACTING]>0}cancelAnimations(){this.setHint(dl.ANIMATING,-this.hints_[dl.ANIMATING]);let e;for(let t=0,i=this.animations_.length;t<i;++t){const r=this.animations_[t];if(r[0].callback&&J5(r[0].callback,!1),!e)for(let o=0,s=r.length;o<s;++o){const a=r[o];if(!a.complete){e=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let t=!1;for(let i=this.animations_.length-1;i>=0;--i){const r=this.animations_[i];let o=!0;for(let s=0,a=r.length;s<a;++s){const c=r[s];if(c.complete)continue;const h=e-c.start;let m=c.duration>0?h/c.duration:1;m>=1?(c.complete=!0,m=1):o=!1;const y=c.easing(m);if(c.sourceCenter){const M=c.sourceCenter[0],x=c.sourceCenter[1],T=c.targetCenter[0],P=c.targetCenter[1];this.nextCenter_=c.targetCenter;const F=M+y*(T-M),j=x+y*(P-x);this.targetCenter_=[F,j]}if(c.sourceResolution&&c.targetResolution){const M=y===1?c.targetResolution:c.sourceResolution+y*(c.targetResolution-c.sourceResolution);if(c.anchor){const x=this.getViewportSize_(this.getRotation()),T=this.constraints_.resolution(M,0,x,!0);this.targetCenter_=this.calculateCenterZoom(T,c.anchor)}this.nextResolution_=c.targetResolution,this.targetResolution_=M,this.applyTargetState_(!0)}if(c.sourceRotation!==void 0&&c.targetRotation!==void 0){const M=y===1?Ib(c.targetRotation+Math.PI,2*Math.PI)-Math.PI:c.sourceRotation+y*(c.targetRotation-c.sourceRotation);if(c.anchor){const x=this.constraints_.rotation(M,!0);this.targetCenter_=this.calculateCenterRotate(x,c.anchor)}this.nextRotation_=c.targetRotation,this.targetRotation_=M}if(this.applyTargetState_(!0),t=!0,!c.complete)break}if(o){this.animations_[i]=null,this.setHint(dl.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const s=r[0].callback;s&&J5(s,!0)}}this.animations_=this.animations_.filter(Boolean),t&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let i;const r=this.getCenterInternal();return r!==void 0&&(i=[r[0]-t[0],r[1]-t[1]],GP(i,e-this.getRotation()),S0e(i,t)),i}calculateCenterZoom(e,t){let i;const r=this.getCenterInternal(),o=this.getResolution();if(r!==void 0&&o!==void 0){const s=t[0]-e*(t[0]-r[0])/o,a=t[1]-e*(t[1]-r[1])/o;i=[s,a]}return i}getViewportSize_(e){const t=this.viewportSize_;if(e){const i=t[0],r=t[1];return[Math.abs(i*Math.cos(e))+Math.abs(r*Math.sin(e)),Math.abs(i*Math.sin(e))+Math.abs(r*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&Z9(e,this.getProjection())}getCenterInternal(){return this.get(um.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const t=this.calculateExtentInternal(e);return VP(t,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const t=this.getCenterInternal();ws(t,"The view center is not defined");const i=this.getResolution();ws(i!==void 0,"The view resolution is not defined");const r=this.getRotation();return ws(r!==void 0,"The view rotation is not defined"),Jw(t,i,r,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(um.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal(zg(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t=t||this.getViewportSizeMinusPadding_();const i=rs(e)/t[0],r=Ju(e)/t[1];return Math.max(i,r)}getResolutionForValueFunction(e){e=e||2;const t=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,r=Math.log(t/i)/Math.log(e);return(function(o){return t/Math.pow(e,o*r)})}getRotation(){return this.get(um.ROTATION)}getValueForResolutionFunction(e){const t=Math.log(e||2),i=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,o=Math.log(i/r)/t;return(function(s){return Math.log(i/s)/t/o})}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e);const i=this.padding_;return i&&(t=[t[0]-i[1]-i[3],t[1]-i[0]-i[2]]),t}getState(){const e=this.getProjection(),t=this.getResolution(),i=this.getRotation();let r=this.getCenterInternal();const o=this.padding_;if(o){const s=this.getViewportSizeMinusPadding_();r=VO(r,this.getViewportSize_(),[s[0]/2+o[3],s[1]/2+o[0]],t,i)}return{center:r.slice(0),projection:e!==void 0?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const t=this.getResolution();return t!==void 0&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let t=this.minZoom_||0,i,r;if(this.resolutions_){const o=KE(this.resolutions_,e,1);t=o,i=this.resolutions_[o],o==this.resolutions_.length-1?r=2:r=i/this.resolutions_[o+1]}else i=this.maxResolution_,r=this.zoomFactor_;return t+Math.log(i/e)/Math.log(r)}getResolutionForZoom(e){if(this.resolutions_?.length){if(this.resolutions_.length===1)return this.resolutions_[0];const t=Bl(Math.floor(e),0,this.resolutions_.length-2),i=this.resolutions_[t]/this.resolutions_[t+1];return this.resolutions_[t]/Math.pow(i,Bl(e-t,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){let i;if(ws(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){ws(!Xb(e),"Cannot fit empty extent provided as `geometry`");const r=zg(e,this.getProjection());i=ej(r)}else if(e.getType()==="Circle"){const r=zg(e.getExtent(),this.getProjection());i=ej(r),i.rotate(this.getRotation(),Ef(r))}else i=e;this.fitInternal(i,t)}rotatedExtentForGeometry(e){const t=this.getRotation(),i=Math.cos(t),r=Math.sin(-t),o=e.getFlatCoordinates(),s=e.getStride();let a=1/0,c=1/0,h=-1/0,m=-1/0;for(let y=0,M=o.length;y<M;y+=s){const x=o[y]*i-o[y+1]*r,T=o[y]*r+o[y+1]*i;a=Math.min(a,x),c=Math.min(c,T),h=Math.max(h,x),m=Math.max(m,T)}return[a,c,h,m]}fitInternal(e,t){t=t||{};let i=t.size;i||(i=this.getViewportSizeMinusPadding_());const r=t.padding!==void 0?t.padding:[0,0,0,0],o=t.nearest!==void 0?t.nearest:!1;let s;t.minResolution!==void 0?s=t.minResolution:t.maxZoom!==void 0?s=this.getResolutionForZoom(t.maxZoom):s=0;const a=this.rotatedExtentForGeometry(e);let c=this.getResolutionForExtentInternal(a,[i[0]-r[1]-r[3],i[1]-r[0]-r[2]]);c=isNaN(c)?s:Math.max(c,s),c=this.getConstrainedResolution(c,o?0:1);const h=this.getRotation(),m=Math.sin(h),y=Math.cos(h),M=Ef(a);M[0]+=(r[1]-r[3])/2*c,M[1]+=(r[0]-r[2])/2*c;const x=M[0]*y-M[1]*m,T=M[1]*y+M[0]*m,P=this.getConstrainedCenter([x,T],c),F=t.callback?t.callback:X3;t.duration!==void 0?this.animateInternal({resolution:c,center:P,duration:t.duration,easing:t.easing},F):(this.targetResolution_=c,this.targetCenter_=P,this.applyTargetState_(!1,!0),J5(F,!0))}centerOn(e,t,i){this.centerOnInternal(H0(e,this.getProjection()),t,i)}centerOnInternal(e,t,i){this.setCenterInternal(VO(e,t,i,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,i,r){let o;const s=this.padding_;if(s&&e){const a=this.getViewportSizeMinusPadding_(-i),c=VO(e,r,[a[0]/2+s[3],a[1]/2+s[0]],t,i);o=[e[0]-c[0],e[1]-c[1]]}return o}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const t=Z9(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){const t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t=t&&H0(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){const i=this.getAnimating()||this.getInteracting(),r=this.getViewportSize_(this.getRotation()),o=this.constraints_.resolution(this.targetResolution_*e,0,r,i);t&&(this.targetCenter_=this.calculateCenterZoom(o,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=H0(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){const i=this.getAnimating()||this.getInteracting(),r=this.constraints_.rotation(this.targetRotation_+e,i);t&&(this.targetCenter_=this.calculateCenterRotate(r,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&H0(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){const i=this.getAnimating()||this.getInteracting()||t,r=this.constraints_.rotation(this.targetRotation_,i),o=this.getViewportSize_(r),s=this.constraints_.resolution(this.targetResolution_,0,o,i),a=this.constraints_.center(this.targetCenter_,s,o,i,this.calculateCenterShift(this.targetCenter_,s,r,o));this.get(um.ROTATION)!==r&&this.set(um.ROTATION,r),this.get(um.RESOLUTION)!==s&&(this.set(um.RESOLUTION,s),this.set("zoom",this.getZoom(),!0)),(!a||!this.get(um.CENTER)||!eS(this.get(um.CENTER),a))&&this.set(um.CENTER,a),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,i){e=e!==void 0?e:200;const r=t||0,o=this.constraints_.rotation(this.targetRotation_),s=this.getViewportSize_(o),a=this.constraints_.resolution(this.targetResolution_,r,s),c=this.constraints_.center(this.targetCenter_,a,s,!1,this.calculateCenterShift(this.targetCenter_,a,o,s));if(e===0&&!this.cancelAnchor_){this.targetResolution_=a,this.targetRotation_=o,this.targetCenter_=c,this.applyTargetState_();return}i=i||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==a||this.getRotation()!==o||!this.getCenterInternal()||!eS(this.getCenterInternal(),c))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:o,center:c,resolution:a,duration:e,easing:Lx,anchor:i}))}beginInteraction(){this.resolveConstraints(0),this.setHint(dl.INTERACTING,1)}endInteraction(e,t,i){i=i&&H0(i,this.getProjection()),this.endInteractionInternal(e,t,i)}endInteractionInternal(e,t,i){this.getInteracting()&&(this.setHint(dl.INTERACTING,-1),this.resolveConstraints(e,t,i))}getConstrainedCenter(e,t){const i=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),i)}getConstrainedZoom(e,t){const i=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(i,t))}getConstrainedResolution(e,t){t=t||0;const i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,i)}}function J5(n,e){setTimeout(function(){n(e)},0)}function P1e(n){if(n.extent!==void 0){const t=n.smoothExtentConstraint!==void 0?n.smoothExtentConstraint:!0;return Fz(n.extent,n.constrainOnlyCenter,t)}const e=$P(n.projection,"EPSG:3857");if(n.multiWorld!==!0&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,Fz(t,!1,!1)}return v0e}function U1e(n){let e,t,i,s=n.minZoom!==void 0?n.minZoom:$O,a=n.maxZoom!==void 0?n.maxZoom:28;const c=n.zoomFactor!==void 0?n.zoomFactor:2,h=n.multiWorld!==void 0?n.multiWorld:!1,m=n.smoothResolutionConstraint!==void 0?n.smoothResolutionConstraint:!0,y=n.showFullExtent!==void 0?n.showFullExtent:!1,M=$P(n.projection,"EPSG:3857"),x=M.getExtent();let T=n.constrainOnlyCenter,P=n.extent;if(!h&&!P&&M.isGlobal()&&(T=!1,P=x),n.resolutions!==void 0){const F=n.resolutions;t=F[s],i=F[a]!==void 0?F[a]:F[F.length-1],n.constrainResolution?e=k1e(F,m,!T&&P,y):e=tj(t,i,m,!T&&P,y)}else{const j=(x?Math.max(rs(x),Ju(x)):360*tv.degrees/M.getMetersPerUnit())/cU/Math.pow(2,$O),q=j/Math.pow(2,28-$O);t=n.maxResolution,t!==void 0?s=0:t=j/Math.pow(c,s),i=n.minResolution,i===void 0&&(n.maxZoom!==void 0?n.maxResolution!==void 0?i=t/Math.pow(c,a):i=j/Math.pow(c,a):i=q),a=s+Math.floor(Math.log(t/i)/Math.log(c)),i=t/Math.pow(c,a-s),n.constrainResolution?e=T1e(c,t,i,m,!T&&P,y):e=tj(t,i,m,!T&&P,y)}return{constraint:e,maxResolution:t,minResolution:i,minZoom:s,zoomFactor:c}}function K1e(n){if(n.enableRotation!==void 0?n.enableRotation:!0){const t=n.constrainRotation;return t===void 0||t===!0?D1e():t===!1?nj:typeof t=="number"?R1e(t):nj}return uU}function L1e(n){return!(n.sourceCenter&&n.targetCenter&&!eS(n.sourceCenter,n.targetCenter)||n.sourceResolution!==n.targetResolution||n.sourceRotation!==n.targetRotation)}function VO(n,e,t,i,r){const o=Math.cos(-r);let s=Math.sin(-r),a=n[0]*o-n[1]*s,c=n[1]*o+n[0]*s;a+=(e[0]/2-t[0])*i,c+=(t[1]-e[1]/2)*i,s=-s;const h=a*o-c*s,m=c*o+a*s;return[h,m]}const eM="ol-hidden",F1e="ol-selectable",HE="ol-unselectable",AU="ol-control",ij="ol-collapsed",z1e=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z0-9]+?)\\s*$`].join(""),"i"),rj=["style","variant","weight","size","lineHeight","family"],eR={normal:400,bold:700},tR=function(n){const e=n.match(z1e);if(!e)return null;const t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"400",variant:"normal"};for(let i=0,r=rj.length;i<r;++i){const o=e[i+1];o!==void 0&&(t[rj[i]]=typeof o=="string"?o.trim():o)}return isNaN(Number(t.weight))&&t.weight in eR&&(t.weight=eR[t.weight]),t.families=t.family.split(/,\s?/).map(i=>i.trim().replace(/^['"]|['"]$/g,"")),t};function Il(n,e,t,i){let r;return t&&t.length?r=t.shift():zP?r=new OffscreenCanvas(n||300,e||300):r=document.createElement("canvas"),n&&(r.width=n),e&&(r.height=e),r.getContext("2d",i)}let HO;function rS(){return HO||(HO=Il(1,1)),HO}function l5(n){const e=n.canvas;e.width=1,e.height=1,n.clearRect(0,0,1,1)}function j1e(n){let e=n.offsetWidth;const t=getComputedStyle(n);return e+=parseInt(t.marginLeft,10)+parseInt(t.marginRight,10),e}function N1e(n){let e=n.offsetHeight;const t=getComputedStyle(n);return e+=parseInt(t.marginTop,10)+parseInt(t.marginBottom,10),e}function oj(n,e){const t=e.parentNode;t&&t.replaceChild(n,e)}function see(n){for(;n.lastChild;)n.lastChild.remove()}function G1e(n,e){const t=n.childNodes;for(let i=0;;++i){const r=t[i],o=e[i];if(!r&&!o)break;if(r!==o){if(!r){n.appendChild(o);continue}if(!o){n.removeChild(r),--i;continue}n.insertBefore(o,r)}}}class hU extends Rm{constructor(e){super();const t=e.element;t&&!e.target&&!t.style.pointerEvents&&(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){this.element?.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(e){this.map_&&this.element?.remove();for(let t=0,i=this.listenerKeys.length;t<i;++t)Ta(this.listenerKeys[t]);if(this.listenerKeys.length=0,this.map_=e,e){const t=this.target_??e.getOverlayContainerStopEvent();this.element&&t.appendChild(this.element),this.render!==X3&&this.listenerKeys.push(Vo(e,Z0.POSTRENDER,this.render,this)),e.render()}}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}class W1e extends hU{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.attributions_=e.attributions;const t=e.className!==void 0?e.className:"ol-attribution",i=e.tipLabel!==void 0?e.tipLabel:"Attributions",r=e.expandClassName!==void 0?e.expandClassName:t+"-expand",o=e.collapseLabel!==void 0?e.collapseLabel:"",s=e.collapseClassName!==void 0?e.collapseClassName:t+"-collapse";typeof o=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=o,this.collapseLabel_.className=s):this.collapseLabel_=o;const a=e.label!==void 0?e.label:"i";typeof a=="string"?(this.label_=document.createElement("span"),this.label_.textContent=a,this.label_.className=r):this.label_=a;const c=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=i,this.toggleButton_.appendChild(c),this.toggleButton_.addEventListener(Ir.CLICK,this.handleClick_.bind(this),!1);const h=t+" "+HE+" "+AU+(this.collapsed_&&this.collapsible_?" "+ij:"")+(this.collapsible_?"":" ol-uncollapsible"),m=this.element;m.className=h,m.appendChild(this.toggleButton_),m.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const t=this.getMap().getAllLayers(),i=new Set(t.flatMap(r=>r.getAttributions(e)));if(this.attributions_!==void 0&&(Array.isArray(this.attributions_)?this.attributions_.forEach(r=>i.add(r)):i.add(this.attributions_)),!this.overrideCollapsible_){const r=!t.some(o=>o.getSource()?.getAttributionsCollapsible()===!1);this.setCollapsible(r)}return Array.from(i)}async updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=await Promise.all(this.collectSourceAttributions_(e).map(r=>hx(()=>r))),i=t.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!uv(t,this.renderedAttributions_)){see(this.ulElement_);for(let r=0,o=t.length;r<o;++r){const s=document.createElement("li");s.innerHTML=t[r],this.ulElement_.appendChild(s)}this.renderedAttributions_=t}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(ij),this.collapsed_?oj(this.collapseLabel_,this.label_):oj(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}class Q1e extends hU{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const t=e.className!==void 0?e.className:"ol-rotate",i=e.label!==void 0?e.label:"",r=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof i=="string"?(this.label_=document.createElement("span"),this.label_.className=r,this.label_.textContent=i):(this.label_=i,this.label_.classList.add(r));const o=e.tipLabel?e.tipLabel:"Reset rotation",s=document.createElement("button");s.className=t+"-reset",s.setAttribute("type","button"),s.title=o,s.appendChild(this.label_),s.addEventListener(Ir.CLICK,this.handleClick_.bind(this),!1);const a=t+" "+HE+" "+AU,c=this.element;c.className=a,c.appendChild(s),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(eM)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const i=t.getRotation();i!==void 0&&(this.duration_>0&&i%(2*Math.PI)!==0?t.animate({rotation:0,duration:this.duration_,easing:Lx}):t.setRotation(0))}render(e){const t=e.frameState;if(!t)return;const i=t.viewState.rotation;if(i!=this.rotation_){const r="rotate("+i+"rad)";if(this.autoHide_){const o=this.element.classList.contains(eM);!o&&i===0?this.element.classList.add(eM):o&&i!==0&&this.element.classList.remove(eM)}this.label_.style.transform=r}this.rotation_=i}}class q1e extends hU{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const t=e.className!==void 0?e.className:"ol-zoom",i=e.delta!==void 0?e.delta:1,r=e.zoomInClassName!==void 0?e.zoomInClassName:t+"-in",o=e.zoomOutClassName!==void 0?e.zoomOutClassName:t+"-out",s=e.zoomInLabel!==void 0?e.zoomInLabel:"+",a=e.zoomOutLabel!==void 0?e.zoomOutLabel:"",c=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",h=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",m=document.createElement("button");m.className=r,m.setAttribute("type","button"),m.title=c,m.appendChild(typeof s=="string"?document.createTextNode(s):s),m.addEventListener(Ir.CLICK,this.handleClick_.bind(this,i),!1);const y=document.createElement("button");y.className=o,y.setAttribute("type","button"),y.title=h,y.appendChild(typeof a=="string"?document.createTextNode(a):a),y.addEventListener(Ir.CLICK,this.handleClick_.bind(this,-i),!1);const M=t+" "+HE+" "+AU,x=this.element;x.className=M,x.appendChild(m),x.appendChild(y),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,t){t.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const i=this.getMap().getView();if(!i)return;const r=i.getZoom();if(r!==void 0){const o=i.getConstrainedZoom(r+e);this.duration_>0?(i.getAnimating()&&i.cancelAnimations(),i.animate({zoom:o,duration:this.duration_,easing:Lx})):i.setZoom(o)}}}function Y1e(n){n=n||{};const e=new Lg;return(n.zoom!==void 0?n.zoom:!0)&&e.push(new q1e(n.zoomOptions)),(n.rotate!==void 0?n.rotate:!0)&&e.push(new Q1e(n.rotateOptions)),(n.attribution!==void 0?n.attribution:!0)&&e.push(new W1e(n.attributionOptions)),e}class $1e{constructor(e,t,i){this.decay_=e,this.minVelocity_=t,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,t){this.points_.push(e,t,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;let i=t-3;for(;i>0&&this.points_[i+2]>e;)i-=3;const r=this.points_[t+2]-this.points_[i+2];if(r<1e3/60)return!1;const o=this.points_[t]-this.points_[i],s=this.points_[t+1]-this.points_[i+1];return this.angle_=Math.atan2(s,o),this.initialVelocity_=Math.sqrt(o*o+s*s)/r,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}const sj={ACTIVE:"active"};class u5 extends Rm{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(sj.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(sj.ACTIVE,e)}setMap(e){this.map_=e}}function V1e(n,e,t){const i=n.getCenterInternal();if(i){const r=[i[0]+e[0],i[1]+e[1]];n.animateInternal({duration:t!==void 0?t:250,easing:T0e,center:n.getConstrainedCenter(r)})}}function dU(n,e,t,i){const r=n.getZoom();if(r===void 0)return;const o=n.getConstrainedZoom(r+e),s=n.getResolutionForZoom(o);n.getAnimating()&&n.cancelAnimations(),n.animate({resolution:s,anchor:t,duration:i!==void 0?i:250,easing:Lx})}class H1e extends u5{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let t=!1;if(e.type==Zl.DBLCLICK){const i=e.originalEvent,r=e.map,o=e.coordinate,s=i.shiftKey?-this.delta_:this.delta_,a=r.getView();dU(a,s,o,this.duration_),i.preventDefault(),t=!0}return!t}}function nR(n){const e=arguments;return function(t){let i=!0;for(let r=0,o=e.length;r<o&&(i=i&&e[r](t),!!i);++r);return i}}const Z1e=function(n){const e=n.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},X1e=function(n){const e=n.map.getTargetElement(),t=e.getRootNode(),i=n.map.getOwnerDocument().activeElement;return t instanceof ShadowRoot?t.host.contains(i):e.contains(i)},aee=function(n){const e=n.map.getTargetElement(),t=e.getRootNode();return(t instanceof ShadowRoot?t.host:e).hasAttribute("tabindex")?X1e(n):!0},J1e=Z3,lee=function(n){const e=n.originalEvent;return"pointerId"in e&&e.button==0&&!(A0e&&wJ&&e.ctrlKey)},uee=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},eye=function(n){const e=n.originalEvent;return wJ?e.metaKey:e.ctrlKey},tye=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},cee=function(n){const e=n.originalEvent,t=e.target.tagName;return t!=="INPUT"&&t!=="SELECT"&&t!=="TEXTAREA"&&!e.target.isContentEditable},ZO=function(n){const e=n.originalEvent;return"pointerId"in e&&e.pointerType=="mouse"},nye=function(n){const e=n.originalEvent;return"pointerId"in e&&e.isPrimary&&e.button===0};class c5 extends u5{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==Zl.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==Zl.POINTERUP){const i=this.handleUpEvent(e);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(e.type==Zl.POINTERDOWN){const i=this.handleDownEvent(e);this.handlingDownUpSequence=i,t=this.stopDown(i)}else e.type==Zl.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function fU(n){const e=n.length;let t=0,i=0;for(let r=0;r<e;r++)t+=n[r].clientX,i+=n[r].clientY;return{clientX:t/e,clientY:i/e}}class iye extends c5{constructor(e){super({stopDown:LE}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const t=e.condition?e.condition:nR(uee,nye);this.condition_=e.onFocusOnly?nR(aee,t):t,this.noKinetic_=!1}handleDragEvent(e){const t=e.map;this.panning_||(this.panning_=!0,t.getView().beginInteraction());const i=this.targetPointers,r=t.getEventPixel(fU(i));if(i.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(r[0],r[1]),this.lastCentroid){const o=[this.lastCentroid[0]-r[0],r[1]-this.lastCentroid[1]],a=e.map.getView();E0e(o,a.getResolution()),GP(o,a.getRotation()),a.adjustCenterInternal(o)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=r,this.lastPointersCount_=i.length,e.originalEvent.preventDefault()}handleUpEvent(e){const t=e.map,i=t.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const r=this.kinetic_.getDistance(),o=this.kinetic_.getAngle(),s=i.getCenterInternal(),a=t.getPixelFromCoordinateInternal(s),c=t.getCoordinateFromPixelInternal([a[0]-r*Math.cos(o),a[1]-r*Math.sin(o)]);i.animateInternal({center:i.getConstrainedCenter(c),duration:500,easing:Lx})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const i=e.map.getView();return this.lastCentroid=null,i.getAnimating()&&i.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class rye extends c5{constructor(e){e=e||{},super({stopDown:LE}),this.condition_=e.condition?e.condition:Z1e,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!ZO(e))return;const t=e.map,i=t.getView();if(i.getConstraints().rotation===uU)return;const r=t.getSize(),o=e.pixel,s=Math.atan2(r[1]/2-o[1],o[0]-r[0]/2);if(this.lastAngle_!==void 0){const a=s-this.lastAngle_;i.adjustRotationInternal(-a)}this.lastAngle_=s}handleUpEvent(e){return ZO(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return ZO(e)&&lee(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class oye extends t5{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,t=this.endPixel_,i="px",r=this.element_.style;r.left=Math.min(e[0],t[0])+i,r.top=Math.min(e[1],t[1])+i,r.width=Math.abs(t[0]-e[0])+i,r.height=Math.abs(t[1]-e[1])+i}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const e=this.startPixel_,t=this.endPixel_,r=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);r[4]=r[0].slice(),this.geometry_?this.geometry_.setCoordinates([r]):this.geometry_=new d1([r])}getGeometry(){return this.geometry_}}const KC={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class d2 extends Tm{constructor(e,t,i){super(e),this.coordinate=t,this.mapBrowserEvent=i}}class sye extends c5{constructor(e){super(),this.on,this.once,this.un,e=e??{},this.box_=new oye(e.className||"ol-dragbox"),this.minArea_=e.minArea??64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition??lee,this.boxEndCondition_=e.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(e,t,i){const r=i[0]-t[0],o=i[1]-t[1];return r*r+o*o>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.startPixel_&&(this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new d2(KC.BOXDRAG,e.coordinate,e)))}handleUpEvent(e){if(!this.startPixel_)return!1;const t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new d2(t?KC.BOXEND:KC.BOXCANCEL,e.coordinate,e)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new d2(KC.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}setActive(e){e||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new d2(KC.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(e)}setMap(e){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new d2(KC.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setMap(e)}}class aye extends sye{constructor(e){e=e||{};const t=e.condition?e.condition:tye;super({condition:t,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const i=this.getMap().getView();let r=this.getGeometry();if(this.out_){const o=i.rotatedExtentForGeometry(r),s=i.getResolutionForExtentInternal(o),a=i.getResolution()/s;r=r.clone(),r.scale(a*a)}i.fitInternal(r,{duration:this.duration_,easing:Lx})}}const Jv={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class lye extends u5{constructor(e){super(),e=e||{},this.defaultCondition_=function(t){return uee(t)&&cee(t)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let t=!1;if(e.type==Ir.KEYDOWN){const i=e.originalEvent,r=i.key;if(this.condition_(e)&&(r==Jv.DOWN||r==Jv.LEFT||r==Jv.RIGHT||r==Jv.UP)){const s=e.map.getView(),a=s.getResolution()*this.pixelDelta_;let c=0,h=0;r==Jv.DOWN?h=-a:r==Jv.LEFT?c=-a:r==Jv.RIGHT?c=a:h=a;const m=[c,h];GP(m,s.getRotation()),V1e(s,m,this.duration_),i.preventDefault(),t=!0}}return!t}}class uye extends u5{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(t){return!eye(t)&&cee(t)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let t=!1;if(e.type==Ir.KEYDOWN||e.type==Ir.KEYPRESS){const i=e.originalEvent,r=i.key;if(this.condition_(e)&&(r==="+"||r==="-")){const o=e.map,s=r==="+"?this.delta_:-this.delta_,a=o.getView();dU(a,s,void 0,this.duration_),i.preventDefault(),t=!0}}return!t}}const cye=40,Aye=300;class hye extends u5{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const t=e.condition?e.condition:J1e;this.condition_=e.onFocusOnly?nR(aee,t):t,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(e){if(!this.condition_(e)||e.type!==Ir.WHEEL)return!0;const i=e.map,r=e.originalEvent;r.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.pixel);let o=r.deltaY;switch(r.deltaMode){case WheelEvent.DOM_DELTA_LINE:o*=cye;break;case WheelEvent.DOM_DELTA_PAGE:o*=Aye;break}if(o===0)return!1;this.lastDelta_=o;const s=Date.now();this.startTime_===void 0&&(this.startTime_=s),(!this.mode_||s-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(o)<4?"trackpad":"wheel");const a=i.getView();if(this.mode_==="trackpad"&&!(a.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(a.getAnimating()&&a.cancelAnimations(),a.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),a.adjustZoom(-o/this.deltaPerZoom_,this.lastAnchor_?i.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=s,!1;this.totalDelta_+=o;const c=Math.max(this.timeout_-(s-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),c),!1}handleWheelZoom_(e){const t=e.getView();t.getAnimating()&&t.cancelAnimations();let i=-Bl(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),dU(t,i,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}class dye extends c5{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=LE),super(t),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let t=0;const i=this.targetPointers[0],r=this.targetPointers[1],o=Math.atan2(r.clientY-i.clientY,r.clientX-i.clientX);if(this.lastAngle_!==void 0){const c=o-this.lastAngle_;this.rotationDelta_+=c,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=c}this.lastAngle_=o;const s=e.map,a=s.getView();a.getConstraints().rotation!==uU&&(this.anchor_=s.getCoordinateFromPixelInternal(s.getEventPixel(fU(this.targetPointers))),this.rotating_&&(s.render(),a.adjustRotationInternal(t,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}class fye extends c5{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=LE),super(t),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let t=1;const i=this.targetPointers[0],r=this.targetPointers[1],o=i.clientX-r.clientX,s=i.clientY-r.clientY,a=Math.sqrt(o*o+s*s);this.lastDistance_!==void 0&&(t=this.lastDistance_/a),this.lastDistance_=a;const c=e.map,h=c.getView();t!=1&&(this.lastScaleDelta_=t),this.anchor_=c.getCoordinateFromPixelInternal(c.getEventPixel(fU(this.targetPointers))),c.render(),h.adjustResolutionInternal(t,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const i=e.map.getView(),r=this.lastScaleDelta_>1?1:-1;return i.endInteraction(this.duration_,r),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}function pye(n){n=n||{};const e=new Lg,t=new $1e(-.005,.05,100);return(n.altShiftDragRotate!==void 0?n.altShiftDragRotate:!0)&&e.push(new rye),(n.doubleClickZoom!==void 0?n.doubleClickZoom:!0)&&e.push(new H1e({delta:n.zoomDelta,duration:n.zoomDuration})),(n.dragPan!==void 0?n.dragPan:!0)&&e.push(new iye({onFocusOnly:n.onFocusOnly,kinetic:t})),(n.pinchRotate!==void 0?n.pinchRotate:!0)&&e.push(new dye),(n.pinchZoom!==void 0?n.pinchZoom:!0)&&e.push(new fye({duration:n.zoomDuration})),(n.keyboard!==void 0?n.keyboard:!0)&&(e.push(new lye),e.push(new uye({delta:n.zoomDelta,duration:n.zoomDuration}))),(n.mouseWheelZoom!==void 0?n.mouseWheelZoom:!0)&&e.push(new hye({onFocusOnly:n.onFocusOnly,duration:n.zoomDuration})),(n.shiftDragZoom!==void 0?n.shiftDragZoom:!0)&&e.push(new aye({duration:n.zoomDuration})),e}const sa={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class Aee extends Rm{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const t=Object.assign({},e);typeof e.properties=="object"&&(delete t.properties,Object.assign(t,e.properties)),t[sa.OPACITY]=e.opacity!==void 0?e.opacity:1,ws(typeof t[sa.OPACITY]=="number","Layer opacity must be a number"),t[sa.VISIBLE]=e.visible!==void 0?e.visible:!0,t[sa.Z_INDEX]=e.zIndex,t[sa.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,t[sa.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,t[sa.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,t[sa.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=t.className!==void 0?t.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const t=this.state_||{layer:this,managed:e===void 0?!0:e},i=this.getZIndex();return t.opacity=Bl(Math.round(this.getOpacity()*100)/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=i===void 0&&!t.managed?1/0:i,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return Pr()}getLayerStatesArray(e){return Pr()}getExtent(){return this.get(sa.EXTENT)}getMaxResolution(){return this.get(sa.MAX_RESOLUTION)}getMinResolution(){return this.get(sa.MIN_RESOLUTION)}getMinZoom(){return this.get(sa.MIN_ZOOM)}getMaxZoom(){return this.get(sa.MAX_ZOOM)}getOpacity(){return this.get(sa.OPACITY)}getSourceState(){return Pr()}getVisible(){return this.get(sa.VISIBLE)}getZIndex(){return this.get(sa.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(sa.EXTENT,e)}setMaxResolution(e){this.set(sa.MAX_RESOLUTION,e)}setMinResolution(e){this.set(sa.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(sa.MAX_ZOOM,e)}setMinZoom(e){this.set(sa.MIN_ZOOM,e)}setOpacity(e){ws(typeof e=="number","Layer opacity must be a number"),this.set(sa.OPACITY,e)}setVisible(e){this.set(sa.VISIBLE,e)}setZIndex(e){this.set(sa.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}class Ey extends Tm{constructor(e,t){super(e),this.layer=t}}const XO={LAYERS:"layers"};class Fx extends Aee{constructor(e){e=e||{};const t=Object.assign({},e);delete t.layers;let i=e.layers;super(t),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(XO.LAYERS,this.handleLayersChanged_),i?Array.isArray(i)?i=new Lg(i.slice(),{unique:!0}):ws(typeof i.getArray=="function","Expected `layers` to be an array or a `Collection`"):i=new Lg(void 0,{unique:!0}),this.setLayers(i)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(Ta),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(Vo(e,gd.ADD,this.handleLayersAdd_,this),Vo(e,gd.REMOVE,this.handleLayersRemove_,this));for(const i in this.listenerKeys_)this.listenerKeys_[i].forEach(Ta);n5(this.listenerKeys_);const t=e.getArray();for(let i=0,r=t.length;i<r;i++){const o=t[i];this.registerLayerListeners_(o),this.dispatchEvent(new Ey("addlayer",o))}this.changed()}registerLayerListeners_(e){const t=[Vo(e,Ax.PROPERTYCHANGE,this.handleLayerChange_,this),Vo(e,Ir.CHANGE,this.handleLayerChange_,this)];e instanceof Fx&&t.push(Vo(e,"addlayer",this.handleLayerGroupAdd_,this),Vo(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[$r(e)]=t}handleLayerGroupAdd_(e){this.dispatchEvent(new Ey("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new Ey("removelayer",e.layer))}handleLayersAdd_(e){const t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new Ey("addlayer",t)),this.changed()}handleLayersRemove_(e){const t=e.element,i=$r(t);this.listenerKeys_[i].forEach(Ta),delete this.listenerKeys_[i],this.dispatchEvent(new Ey("removelayer",t)),this.changed()}getLayers(){return this.get(XO.LAYERS)}setLayers(e){const t=this.getLayers();if(t){const i=t.getArray();for(let r=0,o=i.length;r<o;++r)this.dispatchEvent(new Ey("removelayer",i[r]))}this.set(XO.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(t){t.getLayersArray(e)}),e}getLayerStatesArray(e){const t=e!==void 0?e:[],i=t.length;this.getLayers().forEach(function(s){s.getLayerStatesArray(t)});const r=this.getLayerState();let o=r.zIndex;!e&&r.zIndex===void 0&&(o=0);for(let s=i,a=t.length;s<a;s++){const c=t[s];c.opacity*=r.opacity,c.visible=c.visible&&r.visible,c.maxResolution=Math.min(c.maxResolution,r.maxResolution),c.minResolution=Math.max(c.minResolution,r.minResolution),c.minZoom=Math.max(c.minZoom,r.minZoom),c.maxZoom=Math.min(c.maxZoom,r.maxZoom),r.extent!==void 0&&(c.extent!==void 0?c.extent=Mm(c.extent,r.extent):c.extent=r.extent),c.zIndex===void 0&&(c.zIndex=o)}return t}getSourceState(){return"ready"}}const fp={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};class zx extends Aee{constructor(e){const t=Object.assign({},e);delete t.source,super(t),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(sa.SOURCE,this.handleSourcePropertyChange_);const i=e.source?e.source:null;this.setSource(i)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(sa.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(Ta(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=Vo(e,Ir.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let t;const i=this.getMapInternal();!e&&i&&(e=i.getView()),e instanceof gm?t={viewState:e.getState(),extent:e.calculateExtent()}:t=e,!t.layerStatesArray&&i&&(t.layerStatesArray=i.getLayerGroup().getLayerStatesArray());let r;if(t.layerStatesArray){if(r=t.layerStatesArray.find(s=>s.layer===this),!r)return!1}else r=this.getLayerState();const o=this.getExtent();return pU(r,t.viewState)&&(!o||Jl(o,t.extent))}getAttributions(e){if(!this.isVisible(e))return[];const t=this.getSource()?.getAttributions();if(!t)return[];const i=e instanceof gm?e.getViewStateAndExtent():e;let r=t(i);return Array.isArray(r)||(r=[r]),r}render(e,t){const i=this.getRenderer();return i.prepareFrame(e)?(this.rendered=!0,i.renderFrame(e,t)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,t){}renderDeferred(e){const t=this.getRenderer();t&&t.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set(sa.MAP,e)}getMapInternal(){return this.get(sa.MAP)}setMap(e){this.mapPrecomposeKey_&&(Ta(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(Ta(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=Vo(e,fp.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=Vo(this,Ir.CHANGE,e.render,e),this.changed())}handlePrecompose_(e){const t=e.frameState.layerStatesArray,i=this.getLayerState(!1);ws(!t.some(r=>r.layer===i.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),t.push(i)}setSource(e){this.set(sa.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}}function pU(n,e){if(!n.visible)return!1;const t=e.resolution;if(t<n.minResolution||t>=n.maxResolution)return!1;const i=e.zoom;return i>n.minZoom&&i<=n.maxZoom}function hee(n,e,t=0,i=n.length-1,r=mye){for(;i>t;){if(i-t>600){const c=i-t+1,h=e-t+1,m=Math.log(c),y=.5*Math.exp(2*m/3),M=.5*Math.sqrt(m*y*(c-y)/c)*(h-c/2<0?-1:1),x=Math.max(t,Math.floor(e-h*y/c+M)),T=Math.min(i,Math.floor(e+(c-h)*y/c+M));hee(n,e,x,T,r)}const o=n[e];let s=t,a=i;for(f2(n,t,e),r(n[i],o)>0&&f2(n,t,i);s<a;){for(f2(n,s,a),s++,a--;r(n[s],o)<0;)s++;for(;r(n[a],o)>0;)a--}r(n[t],o)===0?f2(n,t,a):(a++,f2(n,a,i)),a<=e&&(t=a+1),e<=a&&(i=a-1)}}function f2(n,e,t){const i=n[e];n[e]=n[t],n[t]=i}function mye(n,e){return n<e?-1:n>e?1:0}let dee=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data;const i=[];if(!nM(e,t))return i;const r=this.toBBox,o=[];for(;t;){for(let s=0;s<t.children.length;s++){const a=t.children[s],c=t.leaf?r(a):a;nM(e,c)&&(t.leaf?i.push(a):eB(e,c)?this._all(a,i):o.push(a))}t=o.pop()}return i}collides(e){let t=this.data;if(!nM(e,t))return!1;const i=[];for(;t;){for(let r=0;r<t.children.length;r++){const o=t.children[r],s=t.leaf?this.toBBox(o):o;if(nM(e,s)){if(t.leaf||eB(e,s))return!0;i.push(o)}}t=i.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let i=0;i<e.length;i++)this.insert(e[i]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const i=this.data;this.data=t,t=i}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=C_([]),this}remove(e,t){if(!e)return this;let i=this.data;const r=this.toBBox(e),o=[],s=[];let a,c,h;for(;i||o.length;){if(i||(i=o.pop(),c=o[o.length-1],a=s.pop(),h=!0),i.leaf){const m=gye(e,i.children,t);if(m!==-1)return i.children.splice(m,1),o.push(i),this._condense(o),this}!h&&!i.leaf&&eB(i,r)?(o.push(i),s.push(a),a=0,c=i,i=i.children[0]):c?(a++,i=c.children[a],h=!1):i=null}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){const i=[];for(;e;)e.leaf?t.push(...e.children):i.push(...e.children),e=i.pop();return t}_build(e,t,i,r){const o=i-t+1;let s=this._maxEntries,a;if(o<=s)return a=C_(e.slice(t,i+1)),LC(a,this.toBBox),a;r||(r=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,r-1))),a=C_([]),a.leaf=!1,a.height=r;const c=Math.ceil(o/s),h=c*Math.ceil(Math.sqrt(s));aj(e,t,i,h,this.compareMinX);for(let m=t;m<=i;m+=h){const y=Math.min(m+h-1,i);aj(e,m,y,c,this.compareMinY);for(let M=m;M<=y;M+=c){const x=Math.min(M+c-1,y);a.children.push(this._build(e,M,x,r-1))}}return LC(a,this.toBBox),a}_chooseSubtree(e,t,i,r){for(;r.push(t),!(t.leaf||r.length-1===i);){let o=1/0,s=1/0,a;for(let c=0;c<t.children.length;c++){const h=t.children[c],m=JO(h),y=bye(e,h)-m;y<s?(s=y,o=m<o?m:o,a=h):y===s&&m<o&&(o=m,a=h)}t=a||t.children[0]}return t}_insert(e,t,i){const r=i?e:this.toBBox(e),o=[],s=this._chooseSubtree(r,this.data,t,o);for(s.children.push(e),N2(s,r);t>=0&&o[t].children.length>this._maxEntries;)this._split(o,t),t--;this._adjustParentBBoxes(r,o,t)}_split(e,t){const i=e[t],r=i.children.length,o=this._minEntries;this._chooseSplitAxis(i,o,r);const s=this._chooseSplitIndex(i,o,r),a=C_(i.children.splice(s,i.children.length-s));a.height=i.height,a.leaf=i.leaf,LC(i,this.toBBox),LC(a,this.toBBox),t?e[t-1].children.push(a):this._splitRoot(i,a)}_splitRoot(e,t){this.data=C_([e,t]),this.data.height=e.height+1,this.data.leaf=!1,LC(this.data,this.toBBox)}_chooseSplitIndex(e,t,i){let r,o=1/0,s=1/0;for(let a=t;a<=i-t;a++){const c=j2(e,0,a,this.toBBox),h=j2(e,a,i,this.toBBox),m=Cye(c,h),y=JO(c)+JO(h);m<o?(o=m,r=a,s=y<s?y:s):m===o&&y<s&&(s=y,r=a)}return r||i-t}_chooseSplitAxis(e,t,i){const r=e.leaf?this.compareMinX:yye,o=e.leaf?this.compareMinY:vye,s=this._allDistMargin(e,t,i,r),a=this._allDistMargin(e,t,i,o);s<a&&e.children.sort(r)}_allDistMargin(e,t,i,r){e.children.sort(r);const o=this.toBBox,s=j2(e,0,t,o),a=j2(e,i-t,i,o);let c=tM(s)+tM(a);for(let h=t;h<i-t;h++){const m=e.children[h];N2(s,e.leaf?o(m):m),c+=tM(s)}for(let h=i-t-1;h>=t;h--){const m=e.children[h];N2(a,e.leaf?o(m):m),c+=tM(a)}return c}_adjustParentBBoxes(e,t,i){for(let r=i;r>=0;r--)N2(t[r],e)}_condense(e){for(let t=e.length-1,i;t>=0;t--)e[t].children.length===0?t>0?(i=e[t-1].children,i.splice(i.indexOf(e[t]),1)):this.clear():LC(e[t],this.toBBox)}};function gye(n,e,t){if(!t)return e.indexOf(n);for(let i=0;i<e.length;i++)if(t(n,e[i]))return i;return-1}function LC(n,e){j2(n,0,n.children.length,e,n)}function j2(n,e,t,i,r){r||(r=C_(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(let o=e;o<t;o++){const s=n.children[o];N2(r,n.leaf?i(s):s)}return r}function N2(n,e){return n.minX=Math.min(n.minX,e.minX),n.minY=Math.min(n.minY,e.minY),n.maxX=Math.max(n.maxX,e.maxX),n.maxY=Math.max(n.maxY,e.maxY),n}function yye(n,e){return n.minX-e.minX}function vye(n,e){return n.minY-e.minY}function JO(n){return(n.maxX-n.minX)*(n.maxY-n.minY)}function tM(n){return n.maxX-n.minX+(n.maxY-n.minY)}function bye(n,e){return(Math.max(e.maxX,n.maxX)-Math.min(e.minX,n.minX))*(Math.max(e.maxY,n.maxY)-Math.min(e.minY,n.minY))}function Cye(n,e){const t=Math.max(n.minX,e.minX),i=Math.max(n.minY,e.minY),r=Math.min(n.maxX,e.maxX),o=Math.min(n.maxY,e.maxY);return Math.max(0,r-t)*Math.max(0,o-i)}function eB(n,e){return n.minX<=e.minX&&n.minY<=e.minY&&e.maxX<=n.maxX&&e.maxY<=n.maxY}function nM(n,e){return e.minX<=n.maxX&&e.minY<=n.maxY&&e.maxX>=n.minX&&e.maxY>=n.minY}function C_(n){return{children:n,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function aj(n,e,t,i,r){const o=[e,t];for(;o.length;){if(t=o.pop(),e=o.pop(),t-e<=i)continue;const s=e+Math.ceil((t-e)/i/2)*i;hee(n,s,e,t,r),o.push(e,s,s,t)}}const mU=[NaN,NaN,NaN,0];let tB;function _ye(){return tB||(tB=Il(1,1,void 0,{willReadFrequently:!0,desynchronized:!0})),tB}const xye=/^rgba?\(\s*(\d+%?)\s+(\d+%?)\s+(\d+%?)(?:\s*\/\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,Mye=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,wye=/^rgba?\(\s*(\d+%)\s*,\s*(\d+%)\s*,\s*(\d+%)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,Sye=/^#([\da-f]{3,4}|[\da-f]{6}|[\da-f]{8})$/i;function iM(n,e){return n.endsWith("%")?Number(n.substring(0,n.length-1))/e:Number(n)}function f3(n){throw new Error('failed to parse "'+n+'" as color')}function fee(n){if(n.toLowerCase().startsWith("rgb")){const o=n.match(Mye)||n.match(xye)||n.match(wye);if(o){const s=o[4],a=100/255;return[Bl(iM(o[1],a)+.5|0,0,255),Bl(iM(o[2],a)+.5|0,0,255),Bl(iM(o[3],a)+.5|0,0,255),s!==void 0?Bl(iM(s,100),0,1):1]}f3(n)}if(n.startsWith("#")){if(Sye.test(n)){const o=n.substring(1),s=o.length<=4?1:2,a=[0,0,0,255];for(let c=0,h=o.length;c<h;c+=s){let m=parseInt(o.substring(c,c+s),16);s===1&&(m+=m<<4),a[c/s]=m}return a[3]=a[3]/255,a}f3(n)}const e=_ye();e.fillStyle="#abcdef";let t=e.fillStyle;e.fillStyle=n,e.fillStyle===t&&(e.fillStyle="#fedcba",t=e.fillStyle,e.fillStyle=n,e.fillStyle===t&&f3(n));const i=e.fillStyle;if(i.startsWith("#")||i.startsWith("rgba"))return fee(i);e.clearRect(0,0,1,1),e.fillRect(0,0,1,1);const r=Array.from(e.getImageData(0,0,1,1).data);return r[3]=FE(r[3]/255,3),r}function Eye(n){return typeof n=="string"?n:yU(n)}const Oye=1024,p2={};let nB=0;function Bye(n){if(n.length===4)return n;const e=n.slice();return e[3]=1,e}function iB(n){return n>.0031308?Math.pow(n,1/2.4)*269.025-14.025:n*3294.6}function rB(n){return n>.2068965?Math.pow(n,3):(n-4/29)*(108/841)}function oB(n){return n>10.314724?Math.pow((n+14.025)/269.025,2.4):n/3294.6}function sB(n){return n>.0088564?Math.pow(n,1/3):n/(108/841)+4/29}function lj(n){const e=oB(n[0]),t=oB(n[1]),i=oB(n[2]),r=sB(e*.222488403+t*.716873169+i*.06060791),o=500*(sB(e*.452247074+t*.399439023+i*.148375274)-r),s=200*(r-sB(e*.016863605+t*.117638439+i*.865350722)),a=Math.atan2(s,o)*(180/Math.PI);return[116*r-16,Math.sqrt(o*o+s*s),a<0?a+360:a,n[3]]}function Iye(n){const e=(n[0]+16)/116,t=n[1],i=n[2]*Math.PI/180,r=rB(e),o=rB(e+t/500*Math.cos(i)),s=rB(e-t/200*Math.sin(i)),a=iB(o*3.021973625-r*1.617392459-s*.404875592),c=iB(o*-.943766287+r*1.916279586+s*.027607165),h=iB(o*.069407491-r*.22898585+s*1.159737864);return[Bl(a+.5|0,0,255),Bl(c+.5|0,0,255),Bl(h+.5|0,0,255),n[3]]}function gU(n){if(n==="none")return mU;if(p2.hasOwnProperty(n))return p2[n];if(nB>=Oye){let t=0;for(const i in p2)(t++&3)===0&&(delete p2[i],--nB)}const e=fee(n);e.length!==4&&f3(n);for(const t of e)isNaN(t)&&f3(n);return p2[n]=e,++nB,e}function fx(n){return Array.isArray(n)?n:gU(n)}function yU(n){let e=n[0];e!=(e|0)&&(e=e+.5|0);let t=n[1];t!=(t|0)&&(t=t+.5|0);let i=n[2];i!=(i|0)&&(i=i+.5|0);const r=n[3]===void 0?1:Math.round(n[3]*1e3)/1e3;return"rgba("+e+","+t+","+i+","+r+")"}function uj(n){return n[0]>0&&n[1]>0}function kye(n,e,t){return t===void 0&&(t=[0,0]),t[0]=n[0]*e+.5|0,t[1]=n[1]*e+.5|0,t}function YA(n,e){return Array.isArray(n)?n:(e===void 0?e=[n,n]:(e[0]=n,e[1]=n),e)}let tC=0;const Eh=1<<tC++,$o=1<<tC++,yd=1<<tC++,ym=1<<tC++,jb=1<<tC++,G2=1<<tC++,rM=Math.pow(2,tC)-1,vU={[Eh]:"boolean",[$o]:"number",[yd]:"string",[ym]:"color",[jb]:"number[]",[G2]:"size"},Tye=Object.keys(vU).map(Number).sort(Zg);function Rye(n){return n in vU}function W2(n){const e=[];for(const t of Tye)Q2(n,t)&&e.push(vU[t]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function Q2(n,e){return(n&e)===e}function yy(n,e){return n===e}class _c{constructor(e,t){if(!Rye(e))throw new Error(`literal expressions must have a specific type, got ${W2(e)}`);this.type=e,this.value=t}}class Dye{constructor(e,t,...i){this.type=e,this.operator=t,this.args=i}}function pee(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,mapState:!1}}function bA(n,e,t){switch(typeof n){case"boolean":{if(yy(e,yd))return new _c(yd,n?"true":"false");if(!Q2(e,Eh))throw new Error(`got a boolean, but expected ${W2(e)}`);return new _c(Eh,n)}case"number":{if(yy(e,G2))return new _c(G2,YA(n));if(yy(e,Eh))return new _c(Eh,!!n);if(yy(e,yd))return new _c(yd,n.toString());if(!Q2(e,$o))throw new Error(`got a number, but expected ${W2(e)}`);return new _c($o,n)}case"string":{if(yy(e,ym))return new _c(ym,gU(n));if(yy(e,Eh))return new _c(Eh,!!n);if(!Q2(e,yd))throw new Error(`got a string, but expected ${W2(e)}`);return new _c(yd,n)}}if(!Array.isArray(n))throw new Error("expression must be an array or a primitive value");if(n.length===0)throw new Error("empty expression");if(typeof n[0]=="string")return Qye(n,e,t);for(const i of n)if(typeof i!="number")throw new Error("expected an array of numbers");if(yy(e,G2)){if(n.length!==2)throw new Error(`expected an array of two values for a size, got ${n.length}`);return new _c(G2,n)}if(yy(e,ym)){if(n.length===3)return new _c(ym,[...n,1]);if(n.length===4)return new _c(ym,n);throw new Error(`expected an array of 3 or 4 values for a color, got ${n.length}`)}if(!Q2(e,jb))throw new Error(`got an array of numbers, but expected ${W2(e)}`);return new _c(jb,n)}const mn={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},Pye={[mn.Get]:Rr(Ao(1,1/0),cj),[mn.Var]:Rr(Ao(1,1),Uye),[mn.Has]:Rr(Ao(1,1/0),cj),[mn.Id]:Rr(Kye,FC),[mn.Concat]:Rr(Ao(2,1/0),Ds(yd)),[mn.GeometryType]:Rr(Lye,FC),[mn.LineMetric]:Rr(FC),[mn.Resolution]:Rr(aB,FC),[mn.Zoom]:Rr(aB,FC),[mn.Time]:Rr(aB,FC),[mn.Any]:Rr(Ao(2,1/0),Ds(Eh)),[mn.All]:Rr(Ao(2,1/0),Ds(Eh)),[mn.Not]:Rr(Ao(1,1),Ds(Eh)),[mn.Equal]:Rr(Ao(2,2),Ds(rM)),[mn.NotEqual]:Rr(Ao(2,2),Ds(rM)),[mn.GreaterThan]:Rr(Ao(2,2),Ds($o)),[mn.GreaterThanOrEqualTo]:Rr(Ao(2,2),Ds($o)),[mn.LessThan]:Rr(Ao(2,2),Ds($o)),[mn.LessThanOrEqualTo]:Rr(Ao(2,2),Ds($o)),[mn.Multiply]:Rr(Ao(2,1/0),Aj),[mn.Coalesce]:Rr(Ao(2,1/0),Aj),[mn.Divide]:Rr(Ao(2,2),Ds($o)),[mn.Add]:Rr(Ao(2,1/0),Ds($o)),[mn.Subtract]:Rr(Ao(2,2),Ds($o)),[mn.Clamp]:Rr(Ao(3,3),Ds($o)),[mn.Mod]:Rr(Ao(2,2),Ds($o)),[mn.Pow]:Rr(Ao(2,2),Ds($o)),[mn.Abs]:Rr(Ao(1,1),Ds($o)),[mn.Floor]:Rr(Ao(1,1),Ds($o)),[mn.Ceil]:Rr(Ao(1,1),Ds($o)),[mn.Round]:Rr(Ao(1,1),Ds($o)),[mn.Sin]:Rr(Ao(1,1),Ds($o)),[mn.Cos]:Rr(Ao(1,1),Ds($o)),[mn.Atan]:Rr(Ao(1,2),Ds($o)),[mn.Sqrt]:Rr(Ao(1,1),Ds($o)),[mn.Match]:Rr(Ao(4,1/0),hj,zye),[mn.Between]:Rr(Ao(3,3),Ds($o)),[mn.Interpolate]:Rr(Ao(6,1/0),hj,jye),[mn.Case]:Rr(Ao(3,1/0),Fye,Nye),[mn.In]:Rr(Ao(2,2),Gye),[mn.Number]:Rr(Ao(1,1/0),Ds(rM)),[mn.String]:Rr(Ao(1,1/0),Ds(rM)),[mn.Array]:Rr(Ao(1,1/0),Ds($o)),[mn.Color]:Rr(Ao(1,4),Ds($o)),[mn.Band]:Rr(Ao(1,3),Ds($o)),[mn.Palette]:Rr(Ao(2,2),Wye),[mn.ToString]:Rr(Ao(1,1),Ds(Eh|$o|yd|ym))};function cj(n,e,t){const i=n.length-1,r=new Array(i);for(let o=0;o<i;++o){const s=n[o+1];switch(typeof s){case"number":{r[o]=new _c($o,s);break}case"string":{r[o]=new _c(yd,s);break}default:throw new Error(`expected a string key or numeric array index for a get operation, got ${s}`)}o===0&&t.properties.add(String(s))}return r}function Uye(n,e,t){const i=n[1];if(typeof i!="string")throw new Error("expected a string argument for var operation");return t.variables.add(i),[new _c(yd,i)]}function Kye(n,e,t){t.featureId=!0}function Lye(n,e,t){t.geometryType=!0}function aB(n,e,t){t.mapState=!0}function FC(n,e,t){const i=n[0];if(n.length!==1)throw new Error(`expected no arguments for ${i} operation`);return[]}function Ao(n,e){return function(t,i,r){const o=t[0],s=t.length-1;if(n===e){if(s!==n){const a=n===1?"":"s";throw new Error(`expected ${n} argument${a} for ${o}, got ${s}`)}}else if(s<n||s>e){const a=e===1/0?`${n} or more`:`${n} to ${e}`;throw new Error(`expected ${a} arguments for ${o}, got ${s}`)}}}function Aj(n,e,t){const i=n.length-1,r=new Array(i);for(let o=0;o<i;++o){const s=bA(n[o+1],e,t);r[o]=s}return r}function Ds(n){return function(e,t,i){const r=e.length-1,o=new Array(r);for(let s=0;s<r;++s){const a=bA(e[s+1],n,i);o[s]=a}return o}}function Fye(n,e,t){const i=n[0],r=n.length-1;if(r%2===0)throw new Error(`expected an odd number of arguments for ${i}, got ${r} instead`)}function hj(n,e,t){const i=n[0],r=n.length-1;if(r%2===1)throw new Error(`expected an even number of arguments for operation ${i}, got ${r} instead`)}function zye(n,e,t){const i=n.length-1,r=yd|$o|Eh,o=bA(n[1],r,t),s=bA(n[n.length-1],e,t),a=new Array(i-2);for(let c=0;c<i-2;c+=2){try{const h=bA(n[c+2],o.type,t);a[c]=h}catch(h){throw new Error(`failed to parse argument ${c+1} of match expression: ${h.message}`)}try{const h=bA(n[c+3],s.type,t);a[c+1]=h}catch(h){throw new Error(`failed to parse argument ${c+2} of match expression: ${h.message}`)}}return[o,...a,s]}function jye(n,e,t){const i=n[1];let r;switch(i[0]){case"linear":r=1;break;case"exponential":const c=i[1];if(typeof c!="number"||c<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(c)} instead`);r=c;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(i)}`)}const o=new _c($o,r);let s;try{s=bA(n[2],$o,t)}catch(c){throw new Error(`failed to parse argument 1 in interpolate expression: ${c.message}`)}const a=new Array(n.length-3);for(let c=0;c<a.length;c+=2){try{const h=bA(n[c+3],$o,t);a[c]=h}catch(h){throw new Error(`failed to parse argument ${c+2} for interpolate expression: ${h.message}`)}try{const h=bA(n[c+4],e,t);a[c+1]=h}catch(h){throw new Error(`failed to parse argument ${c+3} for interpolate expression: ${h.message}`)}}return[o,s,...a]}function Nye(n,e,t){const i=bA(n[n.length-1],e,t),r=new Array(n.length-1);for(let o=0;o<r.length-1;o+=2){try{const s=bA(n[o+1],Eh,t);r[o]=s}catch(s){throw new Error(`failed to parse argument ${o} of case expression: ${s.message}`)}try{const s=bA(n[o+2],i.type,t);r[o+1]=s}catch(s){throw new Error(`failed to parse argument ${o+1} of case expression: ${s.message}`)}}return r[r.length-1]=i,r}function Gye(n,e,t){let i=n[2];if(!Array.isArray(i))throw new Error('the second argument for the "in" operator must be an array');let r;if(typeof i[0]=="string"){if(i[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(i[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');i=i[1],r=yd}else r=$o;const o=new Array(i.length);for(let a=0;a<o.length;a++)try{const c=bA(i[a],r,t);o[a]=c}catch(c){throw new Error(`failed to parse haystack item ${a} for "in" expression: ${c.message}`)}return[bA(n[1],r,t),...o]}function Wye(n,e,t){let i;try{i=bA(n[1],$o,t)}catch(s){throw new Error(`failed to parse first argument in palette expression: ${s.message}`)}const r=n[2];if(!Array.isArray(r))throw new Error("the second argument of palette must be an array");const o=new Array(r.length);for(let s=0;s<o.length;s++){let a;try{a=bA(r[s],ym,t)}catch(c){throw new Error(`failed to parse color at index ${s} in palette expression: ${c.message}`)}if(!(a instanceof _c))throw new Error(`the palette color at index ${s} must be a literal value`);o[s]=a}return[i,...o]}function Rr(...n){return function(e,t,i){const r=e[0];let o;for(let s=0;s<n.length;s++){const a=n[s](e,t,i);if(s==n.length-1){if(!a)throw new Error("expected last argument validator to return the parsed args");o=a}}return new Dye(t,r,...o)}}function Qye(n,e,t){const i=n[0],r=Pye[i];if(!r)throw new Error(`unknown operator: ${i}`);return r(n,e,t)}function mee(n){if(!n)return"";const e=n.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return mee(n.getGeometries()[0]);default:return""}}function gee(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function y1(n,e,t){const i=bA(n,e,t);return wm(i)}function wm(n,e){if(n instanceof _c){if(n.type===ym&&typeof n.value=="string"){const i=gU(n.value);return function(){return i}}return function(){return n.value}}const t=n.operator;switch(t){case mn.Number:case mn.String:case mn.Coalesce:return qye(n);case mn.Get:case mn.Var:case mn.Has:return Yye(n);case mn.Id:return i=>i.featureId;case mn.GeometryType:return i=>i.geometryType;case mn.Concat:{const i=n.args.map(r=>wm(r));return r=>"".concat(...i.map(o=>o(r).toString()))}case mn.Resolution:return i=>i.resolution;case mn.Any:case mn.All:case mn.Between:case mn.In:case mn.Not:return Vye(n);case mn.Equal:case mn.NotEqual:case mn.LessThan:case mn.LessThanOrEqualTo:case mn.GreaterThan:case mn.GreaterThanOrEqualTo:return $ye(n);case mn.Multiply:case mn.Divide:case mn.Add:case mn.Subtract:case mn.Clamp:case mn.Mod:case mn.Pow:case mn.Abs:case mn.Floor:case mn.Ceil:case mn.Round:case mn.Sin:case mn.Cos:case mn.Atan:case mn.Sqrt:return Hye(n);case mn.Case:return Zye(n);case mn.Match:return Xye(n);case mn.Interpolate:return Jye(n);case mn.ToString:return eve(n);default:throw new Error(`Unsupported operator ${t}`)}}function qye(n,e){const t=n.operator,i=n.args.length,r=new Array(i);for(let o=0;o<i;++o)r[o]=wm(n.args[o]);switch(t){case mn.Coalesce:return o=>{for(let s=0;s<i;++s){const a=r[s](o);if(typeof a<"u"&&a!==null)return a}throw new Error("Expected one of the values to be non-null")};case mn.Number:case mn.String:return o=>{for(let s=0;s<i;++s){const a=r[s](o);if(typeof a===t)return a}throw new Error(`Expected one of the values to be a ${t}`)};default:throw new Error(`Unsupported assertion operator ${t}`)}}function Yye(n,e){const i=n.args[0].value;switch(n.operator){case mn.Get:return r=>{const o=n.args;let s=r.properties[i];for(let a=1,c=o.length;a<c;++a){const m=o[a].value;s=s[m]}return s};case mn.Var:return r=>r.variables[i];case mn.Has:return r=>{const o=n.args;if(!(i in r.properties))return!1;let s=r.properties[i];for(let a=1,c=o.length;a<c;++a){const m=o[a].value;if(!s||!Object.hasOwn(s,m))return!1;s=s[m]}return!0};default:throw new Error(`Unsupported accessor operator ${n.operator}`)}}function $ye(n,e){const t=n.operator,i=wm(n.args[0]),r=wm(n.args[1]);switch(t){case mn.Equal:return o=>i(o)===r(o);case mn.NotEqual:return o=>i(o)!==r(o);case mn.LessThan:return o=>i(o)<r(o);case mn.LessThanOrEqualTo:return o=>i(o)<=r(o);case mn.GreaterThan:return o=>i(o)>r(o);case mn.GreaterThanOrEqualTo:return o=>i(o)>=r(o);default:throw new Error(`Unsupported comparison operator ${t}`)}}function Vye(n,e){const t=n.operator,i=n.args.length,r=new Array(i);for(let o=0;o<i;++o)r[o]=wm(n.args[o]);switch(t){case mn.Any:return o=>{for(let s=0;s<i;++s)if(r[s](o))return!0;return!1};case mn.All:return o=>{for(let s=0;s<i;++s)if(!r[s](o))return!1;return!0};case mn.Between:return o=>{const s=r[0](o),a=r[1](o),c=r[2](o);return s>=a&&s<=c};case mn.In:return o=>{const s=r[0](o);for(let a=1;a<i;++a)if(s===r[a](o))return!0;return!1};case mn.Not:return o=>!r[0](o);default:throw new Error(`Unsupported logical operator ${t}`)}}function Hye(n,e){const t=n.operator,i=n.args.length,r=new Array(i);for(let o=0;o<i;++o)r[o]=wm(n.args[o]);switch(t){case mn.Multiply:return o=>{let s=1;for(let a=0;a<i;++a)s*=r[a](o);return s};case mn.Divide:return o=>r[0](o)/r[1](o);case mn.Add:return o=>{let s=0;for(let a=0;a<i;++a)s+=r[a](o);return s};case mn.Subtract:return o=>r[0](o)-r[1](o);case mn.Clamp:return o=>{const s=r[0](o),a=r[1](o);if(s<a)return a;const c=r[2](o);return s>c?c:s};case mn.Mod:return o=>r[0](o)%r[1](o);case mn.Pow:return o=>Math.pow(r[0](o),r[1](o));case mn.Abs:return o=>Math.abs(r[0](o));case mn.Floor:return o=>Math.floor(r[0](o));case mn.Ceil:return o=>Math.ceil(r[0](o));case mn.Round:return o=>Math.round(r[0](o));case mn.Sin:return o=>Math.sin(r[0](o));case mn.Cos:return o=>Math.cos(r[0](o));case mn.Atan:return i===2?o=>Math.atan2(r[0](o),r[1](o)):o=>Math.atan(r[0](o));case mn.Sqrt:return o=>Math.sqrt(r[0](o));default:throw new Error(`Unsupported numeric operator ${t}`)}}function Zye(n,e){const t=n.args.length,i=new Array(t);for(let r=0;r<t;++r)i[r]=wm(n.args[r]);return r=>{for(let o=0;o<t-1;o+=2)if(i[o](r))return i[o+1](r);return i[t-1](r)}}function Xye(n,e){const t=n.args.length,i=new Array(t);for(let r=0;r<t;++r)i[r]=wm(n.args[r]);return r=>{const o=i[0](r);for(let s=1;s<t-1;s+=2)if(o===i[s](r))return i[s+1](r);return i[t-1](r)}}function Jye(n,e){const t=n.args.length,i=new Array(t);for(let r=0;r<t;++r)i[r]=wm(n.args[r]);return r=>{const o=i[0](r),s=i[1](r);let a,c;for(let h=2;h<t;h+=2){const m=i[h](r);let y=i[h+1](r);const M=Array.isArray(y);if(M&&(y=Bye(y)),m>=s)return h===2?y:M?tve(o,s,a,c,m,y):q2(o,s,a,c,m,y);a=m,c=y}return c}}function eve(n,e){const t=n.operator,i=n.args.length,r=new Array(i);for(let o=0;o<i;++o)r[o]=wm(n.args[o]);switch(t){case mn.ToString:return o=>{const s=r[0](o);return n.args[0].type===ym?yU(s):s.toString()};default:throw new Error(`Unsupported convert operator ${t}`)}}function q2(n,e,t,i,r,o){const s=r-t;if(s===0)return i;const a=e-t,c=n===1?a/s:(Math.pow(n,a)-1)/(Math.pow(n,s)-1);return i+c*(o-i)}function tve(n,e,t,i,r,o){if(r-t===0)return i;const a=lj(i),c=lj(o);let h=c[2]-a[2];h>180?h-=360:h<-180&&(h+=360);const m=[q2(n,e,t,a[0],r,c[0]),q2(n,e,t,a[1],r,c[1]),a[2]+q2(n,e,t,0,r,h),q2(n,e,t,i[3],r,o[3])];return Iye(m)}const Li={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class bU extends i5{constructor(e,t,i,r){super(),this.extent=e,this.pixelRatio_=i,this.resolution=t,this.state=typeof r=="function"?Li.IDLE:r,this.image_=null,this.loader=typeof r=="function"?r:null}changed(){this.dispatchEvent(Ir.CHANGE)}getExtent(){return this.extent}getImage(){return this.image_}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){if(this.state==Li.IDLE&&this.loader){this.state=Li.LOADING,this.changed();const e=this.getResolution(),t=Array.isArray(e)?e[0]:e;hx(()=>this.loader(this.getExtent(),t,this.getPixelRatio())).then(i=>{"image"in i&&(this.image_=i.image),"extent"in i&&(this.extent=i.extent),"resolution"in i&&(this.resolution=i.resolution),"pixelRatio"in i&&(this.pixelRatio_=i.pixelRatio),(i instanceof HTMLImageElement||d0e&&i instanceof ImageBitmap||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement)&&(this.image_=i),this.state=Li.LOADED}).catch(i=>{this.state=Li.ERROR,console.error(i)}).finally(()=>this.changed())}}setImage(e){this.image_=e}setResolution(e){this.resolution=e}}function nve(n,e,t){const i=n;let r=!0,o=!1,s=!1;const a=[Zw(i,Ir.LOAD,function(){s=!0,o||e()})];return i.src&&SJ?(o=!0,i.decode().then(function(){r&&e()}).catch(function(c){r&&(s?e():t())})):a.push(Zw(i,Ir.ERROR,t)),function(){r=!1,a.forEach(Ta)}}function ive(n,e){return new Promise((t,i)=>{function r(){s(),t(n)}function o(){s(),i(new Error("Image load error"))}function s(){n.removeEventListener("load",r),n.removeEventListener("error",o)}n.addEventListener("load",r),n.addEventListener("error",o)})}function rve(n,e){return e&&(n.src=e),n.src&&SJ?new Promise((t,i)=>n.decode().then(()=>t(n)).catch(r=>n.complete&&n.width?t(n):i(r))):ive(n)}class ove{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const t in this.cache_){const i=this.cache_[t];(e++&3)===0&&!i.hasListener()&&(delete this.cache_[t],delete this.patternCache_[t],--this.cacheSize_)}}}get(e,t,i){const r=lB(e,t,i);return r in this.cache_?this.cache_[r]:null}getPattern(e,t,i){const r=lB(e,t,i);return r in this.patternCache_?this.patternCache_[r]:null}set(e,t,i,r,o){const s=lB(e,t,i),a=s in this.cache_;this.cache_[s]=r,o&&(r.getImageState()===Li.IDLE&&r.load(),r.getImageState()===Li.LOADING?r.ready().then(()=>{this.patternCache_[s]=rS().createPattern(r.getImage(1),"repeat")}):this.patternCache_[s]=rS().createPattern(r.getImage(1),"repeat")),a||++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function lB(n,e,t){const i=t?fx(t):"null";return e+":"+n+":"+i}const pp=new ove;let m2=null;class yee extends i5{constructor(e,t,i,r,o){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=i,this.canvas_={},this.color_=o,this.imageState_=r===void 0?Li.IDLE:r,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=t,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===Li.LOADED){m2||(m2=Il(1,1,void 0,{willReadFrequently:!0})),m2.drawImage(this.image_,0,0);try{m2.getImageData(0,0,1,1),this.tainted_=!1}catch{m2=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(Ir.CHANGE)}handleImageError_(){this.imageState_=Li.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=Li.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],t=this.size_[1],i=Il(e,t);i.fillRect(0,0,e,t),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===Li.IDLE){this.image_||this.initializeImage_(),this.imageState_=Li.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&rve(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==Li.LOADED)return;const t=this.image_,i=Il(Math.ceil(t.width*e),Math.ceil(t.height*e)),r=i.canvas;i.scale(e,e),i.drawImage(t,0,0),i.globalCompositeOperation="multiply",i.fillStyle=Eye(this.color_),i.fillRect(0,0,r.width/e,r.height/e),i.globalCompositeOperation="destination-in",i.drawImage(t,0,0),this.canvas_[e]=r}ready(){return this.ready_||(this.ready_=new Promise(e=>{if(this.imageState_===Li.LOADED||this.imageState_===Li.ERROR)e();else{const t=()=>{(this.imageState_===Li.LOADED||this.imageState_===Li.ERROR)&&(this.removeEventListener(Ir.CHANGE,t),e())};this.addEventListener(Ir.CHANGE,t)}})),this.ready_}}function CU(n,e,t,i,r,o){let s=e===void 0?void 0:pp.get(e,t,r);return s||(s=new yee(n,n&&"src"in n?n.src||void 0:e,t,i,r),pp.set(e,t,r,s,o)),o&&s&&!pp.getPattern(e,t,r)&&pp.set(e,t,r,s,o),s}function jg(n){return n?Array.isArray(n)?yU(n):typeof n=="object"&&"src"in n?sve(n):n:null}function sve(n){if(!n.offset||!n.size)return pp.getPattern(n.src,"anonymous",n.color);const e=n.src+":"+n.offset,t=pp.getPattern(e,void 0,n.color);if(t)return t;const i=pp.get(n.src,"anonymous",null);if(i.getImageState()!==Li.LOADED)return null;const r=Il(n.size[0],n.size[1]);return r.drawImage(i.getImage(1),n.offset[0],n.offset[1],n.size[0],n.size[1],0,0,n.size[0],n.size[1]),CU(r.canvas,e,void 0,Li.LOADED,n.color,!0),pp.getPattern(e,void 0,n.color)}const vee="10px sans-serif",vd="#000",px="round",s1=[],a1=0,mx="round",i4=10,r4="#000",o4="center",oS="middle",mb=[0,0,0,0],s4=1,ab=new Rm;let g2=null,dj;const iR={},ave=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","emoji","math","fangsong"]);function lve(n,e,t){return`${n} ${e} 16px "${t}"`}const uve=(function(){let e,t;async function i(o){await t.ready;const s=await t.load(o);if(s.length===0)return!1;const a=tR(o),c=a.families[0].toLowerCase(),h=a.weight;return s.some(m=>{const y=m.family.replace(/^['"]|['"]$/g,"").toLowerCase(),M=eR[m.weight]||m.weight;return y===c&&m.style===a.style&&M==h})}async function r(){await t.ready;let o=!0;const s=ab.getProperties(),a=Object.keys(s).filter(c=>s[c]<100);for(let c=a.length-1;c>=0;--c){const h=a[c];let m=s[h];m<100&&(await i(h)?(n5(iR),ab.set(h,100)):(m+=10,ab.set(h,m,!0),m<100&&(o=!1)))}e=void 0,o||(e=setTimeout(r,100))}return async function(o){t||(t=zP?self.fonts:document.fonts);const s=tR(o);if(!s)return;const a=s.families;let c=!1;for(const h of a){if(ave.has(h))continue;const m=lve(s.style,s.weight,h);ab.get(m)===void 0&&(ab.set(m,0,!0),c=!0)}c&&(clearTimeout(e),e=setTimeout(r,100))}})(),cve=(function(){let n;return function(e){let t=iR[e];if(t==null){if(zP){const i=tR(e),r=bee(e,"g");t=(isNaN(Number(i.lineHeight))?1.2:Number(i.lineHeight))*(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)}else n||(n=document.createElement("div"),n.innerHTML="M",n.style.minHeight="0",n.style.maxHeight="none",n.style.height="auto",n.style.padding="0",n.style.border="none",n.style.position="absolute",n.style.display="block",n.style.left="-99999px"),n.style.font=e,document.body.appendChild(n),t=n.offsetHeight,document.body.removeChild(n);iR[e]=t}return t}})();function bee(n,e){return g2||(g2=Il(1,1)),n!=dj&&(g2.font=n,dj=g2.font),g2.measureText(e)}function Cee(n,e){return bee(n,e).width}function fj(n,e,t){if(e in t)return t[e];const i=e.split(`
`).reduce((r,o)=>Math.max(r,Cee(n,o)),0);return t[e]=i,i}function Ave(n,e){const t=[],i=[],r=[];let o=0,s=0,a=0,c=0;for(let h=0,m=e.length;h<=m;h+=2){const y=e[h];if(y===`
`||h===m){o=Math.max(o,s),r.push(s),s=0,a+=c,c=0;continue}const M=e[h+1]||n.font,x=Cee(M,y);t.push(x),s+=x;const T=cve(M);i.push(T),c=Math.max(c,T)}return{width:o,height:a,widths:t,heights:i,lineWidths:r}}function hve(n,e,t,i,r,o,s,a,c,h,m){n.save(),t!==1&&(n.globalAlpha===void 0?n.globalAlpha=y=>y.globalAlpha*=t:n.globalAlpha*=t),e&&n.transform.apply(n,e),i.contextInstructions?(n.translate(c,h),n.scale(m[0],m[1]),dve(i,n)):m[0]<0||m[1]<0?(n.translate(c,h),n.scale(m[0],m[1]),n.drawImage(i,r,o,s,a,0,0,s,a)):n.drawImage(i,r,o,s,a,c,h,s*m[0],a*m[1]),n.restore()}function dve(n,e){const t=n.contextInstructions;for(let i=0,r=t.length;i<r;i+=2)Array.isArray(t[i+1])?e[t[i]].apply(e,t[i+1]):e[t[i]]=t[i+1]}class ZE{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=YA(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new ZE({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return Pr()}getImage(e){return Pr()}getHitDetectionImage(){return Pr()}getPixelRatio(e){return 1}getImageState(){return Pr()}getImageSize(){return Pr()}getOrigin(){return Pr()}getSize(){return Pr()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=YA(e)}listenImageChange(e){Pr()}load(){Pr()}unlistenImageChange(e){Pr()}ready(){return Promise.resolve()}}class XE extends ZE{constructor(e){super({opacity:1,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius=e.radius,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?Li.LOADING:Li.LOADED,this.imageState_===Li.LOADING&&this.ready().then(()=>this.imageState_=Li.LOADED),this.render()}clone(){const e=this.getScale(),t=new XE({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}getAnchor(){const e=this.size_,t=this.getDisplacement(),i=this.getScaleArray();return[e[0]/2-t[0]/i[0],e[1]/2+t[1]/i[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){const t=this.fill_?.getKey(),i=`${e},${this.angle_},${this.radius},${this.radius2_},${this.points_},${t}`+Object.values(this.renderOptions_).join(",");let r=pp.get(i,null,null)?.getImage(1);if(!r){const o=this.renderOptions_,s=Math.ceil(o.size*e),a=Il(s,s);this.draw_(o,a,e),r=a.canvas,pp.set(i,null,null,new yee(r,void 0,null,Li.LOADED,null))}return r}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,i){if(t===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return t;let r=this.radius,o=this.radius2_===void 0?r:this.radius2_;if(r<o){const Y=r;r=o,o=Y}const s=this.radius2_===void 0?this.points_:this.points_*2,a=2*Math.PI/s,c=o*Math.sin(a),h=Math.sqrt(o*o-c*c),m=r-h,y=Math.sqrt(c*c+m*m),M=y/c;if(e==="miter"&&M<=i)return M*t;const x=t/2/M,T=t/2*(m/y),F=Math.sqrt((r+x)*(r+x)+T*T)-r;if(this.radius2_===void 0||e==="bevel")return F*2;const j=r*Math.sin(a),q=Math.sqrt(r*r-j*j),V=o-q,Q=Math.sqrt(j*j+V*V)/j;if(Q<=i){const Y=Q*t/2-o-r;return 2*Math.max(F,Y)}return F*2}createRenderOptions(){let e=px,t=mx,i=0,r=null,o=0,s,a=0;this.stroke_&&(s=jg(this.stroke_.getColor()??r4),a=this.stroke_.getWidth()??s4,r=this.stroke_.getLineDash(),o=this.stroke_.getLineDashOffset()??0,t=this.stroke_.getLineJoin()??mx,e=this.stroke_.getLineCap()??px,i=this.stroke_.getMiterLimit()??i4);const c=this.calculateLineJoinSize_(t,a,i),h=Math.max(this.radius,this.radius2_||0),m=Math.ceil(2*h+c);return{strokeStyle:s,strokeWidth:a,size:m,lineCap:e,lineDash:r,lineDashOffset:o,lineJoin:t,miterLimit:i}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,t,i){if(t.scale(i,i),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let r=this.fill_.getColor();r===null&&(r=vd),t.fillStyle=jg(r),t.fill()}e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){let t;if(this.fill_){let i=this.fill_.getColor(),r=0;typeof i=="string"&&(i=fx(i)),i===null?r=1:Array.isArray(i)&&(r=i.length===4?i[3]:1),r===0&&(t=Il(e.size,e.size),this.drawHitDetectionCanvas_(e,t))}return t?t.canvas:this.getImage(1)}createPath_(e){let t=this.points_;const i=this.radius;if(t===1/0)e.arc(0,0,i,0,2*Math.PI);else{const r=this.radius2_===void 0?i:this.radius2_;this.radius2_!==void 0&&(t*=2);const o=this.angle_-Math.PI/2,s=2*Math.PI/t;for(let a=0;a<t;a++){const c=o+a*s,h=a%2===0?i:r;e.lineTo(h*Math.cos(c),h*Math.sin(c))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=vd,t.fill(),e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class A5 extends XE{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),t=new A5({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}setRadius(e){this.radius=e,this.render()}}class n1{constructor(e){e=e||{},this.patternImage_=null,this.color_=null,e.color!==void 0&&this.setColor(e.color)}clone(){const e=this.getColor();return new n1({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){if(e!==null&&typeof e=="object"&&"src"in e){const t=CU(null,e.src,"anonymous",void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));t.ready().then(()=>{this.patternImage_=null}),t.getImageState()===Li.IDLE&&t.load(),t.getImageState()===Li.LOADING&&(this.patternImage_=t)}this.color_=e}getKey(){const e=this.getColor();return e?e instanceof CanvasPattern||e instanceof CanvasGradient?$r(e):typeof e=="object"&&"src"in e?e.src+":"+e.offset:fx(e).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}function pj(n,e,t,i){return t!==void 0&&i!==void 0?[t/n,i/e]:t!==void 0?t/n:i!==void 0?i/e:1}class gx extends ZE{constructor(e){e=e||{};const t=e.opacity!==void 0?e.opacity:1,i=e.rotation!==void 0?e.rotation:0,r=e.scale!==void 0?e.scale:1,o=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:t,rotation:i,scale:r,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:o,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const s=e.img!==void 0?e.img:null;let a=e.src;ws(!(a!==void 0&&s),"`image` and `src` cannot be provided at the same time"),(a===void 0||a.length===0)&&s&&(a=s.src||$r(s)),ws(a!==void 0&&a.length>0,"A defined and non-empty `src` or `image` must be provided"),ws(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let c;if(e.src!==void 0?c=Li.IDLE:s!==void 0&&("complete"in s?s.complete?c=s.src?Li.LOADED:Li.IDLE:c=Li.LOADING:c=Li.LOADED),this.color_=e.color!==void 0?fx(e.color):null,this.iconImage_=CU(s,a,this.crossOrigin_,c,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,this.initialOptions_,e.width!==void 0||e.height!==void 0){let h,m;if(e.size)[h,m]=e.size;else{const y=this.getImage(1);if(y.width&&y.height)h=y.width,m=y.height;else if(y instanceof HTMLImageElement){this.initialOptions_=e;const M=()=>{if(this.unlistenImageChange(M),!this.initialOptions_)return;const x=this.iconImage_.getSize();this.setScale(pj(x[0],x[1],e.width,e.height))};this.listenImageChange(M);return}}h!==void 0&&this.setScale(pj(h,m,e.width,e.height))}}clone(){let e,t,i;return this.initialOptions_?(t=this.initialOptions_.width,i=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new gx({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:t,height:i,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const r=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!r)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=r[0]),this.anchorYUnits_=="fraction"&&(e[1]*=r[1])}if(this.anchorOrigin_!="top-left"){if(!r)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+r[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+r[1])}this.normalizedAnchor_=e}const t=this.getDisplacement(),i=this.getScaleArray();return[e[0]-t[0]/i[0],e[1]+t[1]/i[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const t=this.getSize(),i=this.iconImage_.getSize();if(!t||!i)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=i[0]-t[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=i[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==Li.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){const e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==Li.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(Ir.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(Ir.CHANGE,e)}ready(){return this.iconImage_.ready()}}class Ly{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new Ly({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}class mf{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=mj,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new mf({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(t){return t.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=mj,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function fve(n){let e;if(typeof n=="function")e=n;else{let t;Array.isArray(n)?t=n:(ws(typeof n.getZIndex=="function","Expected an `Style` or an array of `Style`"),t=[n]),e=function(){return t}}return e}let uB=null;function _ee(n,e){if(!uB){const t=new n1({color:"rgba(255,255,255,0.4)"}),i=new Ly({color:"#3399CC",width:1.25});uB=[new mf({image:new A5({fill:t,stroke:i,radius:5}),fill:t,stroke:i})]}return uB}function mj(n){return n.getGeometry()}const pve="#333";let xee=class Mee{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.keepUpright_=e.keepUpright,this.scale_=e.scale,this.scaleArray_=YA(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new n1({color:pve}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new Mee({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setKeepUpright(e){this.keepUpright_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=YA(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}};function mve(n){return!0}function gve(n){const e=pee(),t=yve(n,e),i=gee();return function(r,o){if(i.properties=r.getPropertiesInternal(),i.resolution=o,e.featureId){const s=r.getId();s!==void 0?i.featureId=s:i.featureId=null}return e.geometryType&&(i.geometryType=mee(r.getGeometry())),t(i)}}function gj(n){const e=pee(),t=n.length,i=new Array(t);for(let s=0;s<t;++s)i[s]=rR(n[s],e);const r=gee(),o=new Array(t);return function(s,a){if(r.properties=s.getPropertiesInternal(),r.resolution=a,e.featureId){const h=s.getId();h!==void 0?r.featureId=h:r.featureId=null}let c=0;for(let h=0;h<t;++h){const m=i[h](r);m&&(o[c]=m,c+=1)}return o.length=c,o}}function yve(n,e){const t=n.length,i=new Array(t);for(let r=0;r<t;++r){const o=n[r],s="filter"in o?y1(o.filter,Eh,e):mve;let a;if(Array.isArray(o.style)){const c=o.style.length;a=new Array(c);for(let h=0;h<c;++h)a[h]=rR(o.style[h],e)}else a=[rR(o.style,e)];i[r]={filter:s,styles:a}}return function(r){const o=[];let s=!1;for(let a=0;a<t;++a){const c=i[a].filter;if(c(r)&&!(n[a].else&&s)){s=!0;for(const h of i[a].styles){const m=h(r);m&&o.push(m)}}}return o}}function rR(n,e){const t=a4(n,"",e),i=l4(n,"",e),r=vve(n,e),o=bve(n,e),s=xd(n,"z-index",e);if(!t&&!i&&!r&&!o&&!ev(n))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(n));const a=new mf;return function(c){let h=!0;if(t){const m=t(c);m&&(h=!1),a.setFill(m)}if(i){const m=i(c);m&&(h=!1),a.setStroke(m)}if(r){const m=r(c);m&&(h=!1),a.setText(m)}if(o){const m=o(c);m&&(h=!1),a.setImage(m)}return s&&a.setZIndex(s(c)),h?null:a}}function a4(n,e,t){let i;if(e+"fill-pattern-src"in n)i=Mve(n,e+"fill-",t);else{if(n[e+"fill-color"]==="none")return o=>null;i=_U(n,e+"fill-color",t)}if(!i)return null;const r=new n1;return function(o){const s=i(o);return s===mU?null:(r.setColor(s),r)}}function l4(n,e,t){const i=xd(n,e+"stroke-width",t),r=_U(n,e+"stroke-color",t);if(!i&&!r)return null;const o=X0(n,e+"stroke-line-cap",t),s=X0(n,e+"stroke-line-join",t),a=wee(n,e+"stroke-line-dash",t),c=xd(n,e+"stroke-line-dash-offset",t),h=xd(n,e+"stroke-miter-limit",t),m=new Ly;return function(y){if(r){const M=r(y);if(M===mU)return null;m.setColor(M)}if(i&&m.setWidth(i(y)),o){const M=o(y);if(M!=="butt"&&M!=="round"&&M!=="square")throw new Error("Expected butt, round, or square line cap");m.setLineCap(M)}if(s){const M=s(y);if(M!=="bevel"&&M!=="round"&&M!=="miter")throw new Error("Expected bevel, round, or miter line join");m.setLineJoin(M)}return a&&m.setLineDash(a(y)),c&&m.setLineDashOffset(c(y)),h&&m.setMiterLimit(h(y)),m}}function vve(n,e){const t="text-",i=X0(n,t+"value",e);if(!i)return null;const r=a4(n,t,e),o=a4(n,t+"background-",e),s=l4(n,t,e),a=l4(n,t+"background-",e),c=X0(n,t+"font",e),h=xd(n,t+"max-angle",e),m=xd(n,t+"offset-x",e),y=xd(n,t+"offset-y",e),M=W_(n,t+"overflow",e),x=X0(n,t+"placement",e),T=xd(n,t+"repeat",e),P=JE(n,t+"scale",e),F=W_(n,t+"rotate-with-view",e),j=xd(n,t+"rotation",e),q=X0(n,t+"align",e),V=X0(n,t+"justify",e),H=X0(n,t+"baseline",e),Q=W_(n,t+"keep-upright",e),Y=wee(n,t+"padding",e),z=e6(n,t+"declutter-mode"),se=new xee({declutterMode:z});return function(le){if(se.setText(i(le)),r&&se.setFill(r(le)),o&&se.setBackgroundFill(o(le)),s&&se.setStroke(s(le)),a&&se.setBackgroundStroke(a(le)),c&&se.setFont(c(le)),h&&se.setMaxAngle(h(le)),m&&se.setOffsetX(m(le)),y&&se.setOffsetY(y(le)),M&&se.setOverflow(M(le)),x){const pe=x(le);if(pe!=="point"&&pe!=="line")throw new Error("Expected point or line for text-placement");se.setPlacement(pe)}if(T&&se.setRepeat(T(le)),P&&se.setScale(P(le)),F&&se.setRotateWithView(F(le)),j&&se.setRotation(j(le)),q){const pe=q(le);if(pe!=="left"&&pe!=="center"&&pe!=="right"&&pe!=="end"&&pe!=="start")throw new Error("Expected left, right, center, start, or end for text-align");se.setTextAlign(pe)}if(V){const pe=V(le);if(pe!=="left"&&pe!=="right"&&pe!=="center")throw new Error("Expected left, right, or center for text-justify");se.setJustify(pe)}if(H){const pe=H(le);if(pe!=="bottom"&&pe!=="top"&&pe!=="middle"&&pe!=="alphabetic"&&pe!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");se.setTextBaseline(pe)}return Y&&se.setPadding(Y(le)),Q&&se.setKeepUpright(Q(le)),se}}function bve(n,e){return"icon-src"in n?Cve(n,e):"shape-points"in n?_ve(n,e):"circle-radius"in n?xve(n,e):null}function Cve(n,e){const t="icon-",i=t+"src",r=See(n[i],i),o=sS(n,t+"anchor",e),s=JE(n,t+"scale",e),a=xd(n,t+"opacity",e),c=sS(n,t+"displacement",e),h=xd(n,t+"rotation",e),m=W_(n,t+"rotate-with-view",e),y=vj(n,t+"anchor-origin"),M=bj(n,t+"anchor-x-units"),x=bj(n,t+"anchor-y-units"),T=Ove(n,t+"color"),P=Sve(n,t+"cross-origin"),F=Eve(n,t+"offset"),j=vj(n,t+"offset-origin"),q=aS(n,t+"width"),V=aS(n,t+"height"),H=wve(n,t+"size"),Q=e6(n,t+"declutter-mode"),Y=new gx({src:r,anchorOrigin:y,anchorXUnits:M,anchorYUnits:x,color:T,crossOrigin:P,offset:F,offsetOrigin:j,height:V,width:q,size:H,declutterMode:Q});return function(z){return a&&Y.setOpacity(a(z)),c&&Y.setDisplacement(c(z)),h&&Y.setRotation(h(z)),m&&Y.setRotateWithView(m(z)),s&&Y.setScale(s(z)),o&&Y.setAnchor(o(z)),Y}}function _ve(n,e){const t="shape-",i=t+"points",r=t+"radius",o=oR(n[i],i),s=oR(n[r],r),a=a4(n,t,e),c=l4(n,t,e),h=JE(n,t+"scale",e),m=sS(n,t+"displacement",e),y=xd(n,t+"rotation",e),M=W_(n,t+"rotate-with-view",e),x=aS(n,t+"radius2"),T=aS(n,t+"angle"),P=e6(n,t+"declutter-mode"),F=new XE({points:o,radius:s,radius2:x,angle:T,declutterMode:P});return function(j){return a&&F.setFill(a(j)),c&&F.setStroke(c(j)),m&&F.setDisplacement(m(j)),y&&F.setRotation(y(j)),M&&F.setRotateWithView(M(j)),h&&F.setScale(h(j)),F}}function xve(n,e){const t="circle-",i=a4(n,t,e),r=l4(n,t,e),o=xd(n,t+"radius",e),s=JE(n,t+"scale",e),a=sS(n,t+"displacement",e),c=xd(n,t+"rotation",e),h=W_(n,t+"rotate-with-view",e),m=e6(n,t+"declutter-mode"),y=new A5({radius:5,declutterMode:m});return function(M){return o&&y.setRadius(o(M)),i&&y.setFill(i(M)),r&&y.setStroke(r(M)),a&&y.setDisplacement(a(M)),c&&y.setRotation(c(M)),h&&y.setRotateWithView(h(M)),s&&y.setScale(s(M)),y}}function xd(n,e,t){if(!(e in n))return;const i=y1(n[e],$o,t);return function(r){return oR(i(r),e)}}function X0(n,e,t){if(!(e in n))return null;const i=y1(n[e],yd,t);return function(r){return See(i(r),e)}}function Mve(n,e,t){const i=X0(n,e+"pattern-src",t),r=yj(n,e+"pattern-offset",t),o=yj(n,e+"pattern-size",t),s=_U(n,e+"color",t);return function(a){return{src:i(a),offset:r&&r(a),size:o&&o(a),color:s&&s(a)}}}function W_(n,e,t){if(!(e in n))return null;const i=y1(n[e],Eh,t);return function(r){const o=i(r);if(typeof o!="boolean")throw new Error(`Expected a boolean for ${e}`);return o}}function _U(n,e,t){if(!(e in n))return null;const i=y1(n[e],ym,t);return function(r){return Eee(i(r),e)}}function wee(n,e,t){if(!(e in n))return null;const i=y1(n[e],jb,t);return function(r){return h5(i(r),e)}}function sS(n,e,t){if(!(e in n))return null;const i=y1(n[e],jb,t);return function(r){const o=h5(i(r),e);if(o.length!==2)throw new Error(`Expected two numbers for ${e}`);return o}}function yj(n,e,t){if(!(e in n))return null;const i=y1(n[e],jb,t);return function(r){return Oee(i(r),e)}}function JE(n,e,t){if(!(e in n))return null;const i=y1(n[e],jb|$o,t);return function(r){return Bve(i(r),e)}}function aS(n,e){const t=n[e];if(t!==void 0){if(typeof t!="number")throw new Error(`Expected a number for ${e}`);return t}}function wve(n,e){const t=n[e];if(t!==void 0){if(typeof t=="number")return YA(t);if(!Array.isArray(t))throw new Error(`Expected a number or size array for ${e}`);if(t.length!==2||typeof t[0]!="number"||typeof t[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return t}}function Sve(n,e){const t=n[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);return t}}function vj(n,e){const t=n[e];if(t!==void 0){if(t!=="bottom-left"&&t!=="bottom-right"&&t!=="top-left"&&t!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return t}}function bj(n,e){const t=n[e];if(t!==void 0){if(t!=="pixels"&&t!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return t}}function Eve(n,e){const t=n[e];if(t!==void 0)return h5(t,e)}function e6(n,e){const t=n[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);if(t!=="declutter"&&t!=="obstacle"&&t!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return t}}function Ove(n,e){const t=n[e];if(t!==void 0)return Eee(t,e)}function h5(n,e){if(!Array.isArray(n))throw new Error(`Expected an array for ${e}`);const t=n.length;for(let i=0;i<t;++i)if(typeof n[i]!="number")throw new Error(`Expected an array of numbers for ${e}`);return n}function See(n,e){if(typeof n!="string")throw new Error(`Expected a string for ${e}`);return n}function oR(n,e){if(typeof n!="number")throw new Error(`Expected a number for ${e}`);return n}function Eee(n,e){if(typeof n=="string")return n;const t=h5(n,e),i=t.length;if(i<3||i>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return t}function Oee(n,e){const t=h5(n,e);if(t.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return t}function Bve(n,e){return typeof n=="number"?n:Oee(n,e)}const Cj={RENDER_ORDER:"renderOrder"};class xU extends zx{constructor(e){e=e||{};const t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,super(t),this.declutter_=e.declutter?String(e.declutter):void 0,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(Cj.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e,t){const i=this.getDeclutter();i in e.declutter||(e.declutter[i]=new dee(9)),this.getRenderer().renderDeclutter(e,t)}setRenderOrder(e){this.set(Cj.RENDER_ORDER,e)}setStyle(e){this.style_=e===void 0?_ee:e;const t=Ive(e);this.styleFunction_=e===null?void 0:fve(t),this.changed()}setDeclutter(e){this.declutter_=e?String(e):void 0,this.changed()}}function Ive(n){if(n===void 0)return _ee;if(!n)return null;if(typeof n=="function"||n instanceof mf)return n;if(!Array.isArray(n))return gj([n]);if(n.length===0)return[];const e=n.length,t=n[0];if(t instanceof mf){const r=new Array(e);for(let o=0;o<e;++o){const s=n[o];if(!(s instanceof mf))throw new Error("Expected a list of style instances");r[o]=s}return r}if("style"in t){const r=new Array(e);for(let o=0;o<e;++o){const s=n[o];if(!("style"in s))throw new Error("Expected a list of rules with a style property");r[o]=s}return gve(r)}return gj(n)}class Bee extends Tm{constructor(e,t,i,r){super(e),this.inversePixelTransform=t,this.frameState=i,this.context=r}}class kve extends t5{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,t){Pr()}calculateMatrices2D(e){const t=e.viewState,i=e.coordinateToPixelTransform,r=e.pixelToCoordinateTransform;t0(i,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),qJ(r,i)}forEachFeatureAtCoordinate(e,t,i,r,o,s,a,c){let h;const m=t.viewState;function y(H,Q,Y,z){return o.call(s,Q,H?Y:null,z)}const M=m.projection,x=WP(e.slice(),M),T=[[0,0]];if(M.canWrapX()&&r){const H=M.getExtent(),Q=rs(H);T.push([-Q,0],[Q,0])}const P=t.layerStatesArray,F=P.length,j=[],q=[];for(let H=0;H<T.length;H++)for(let Q=F-1;Q>=0;--Q){const Y=P[Q],z=Y.layer;if(z.hasRenderer()&&pU(Y,m)&&a.call(c,z)){const se=z.getRenderer(),le=z.getSource();if(se&&le){const pe=le.getWrapX()?x:e,de=y.bind(null,Y.managed);q[0]=pe[0]+T[H][0],q[1]=pe[1]+T[H][1],h=se.forEachFeatureAtCoordinate(q,t,i,de,j)}if(h)return h}}if(j.length===0)return;const V=1/j.length;return j.forEach((H,Q)=>H.distanceSq+=Q*V),j.sort((H,Q)=>H.distanceSq-Q.distanceSq),j.some(H=>h=H.callback(H.feature,H.layer,H.geometry)),h}hasFeatureAtCoordinate(e,t,i,r,o,s){return this.forEachFeatureAtCoordinate(e,t,i,r,Z3,this,o,s)!==void 0}getMap(){return this.map_}renderFrame(e){Pr()}scheduleExpireIconCache(e){pp.canExpireCache()&&e.postRenderFunctions.push(Tve)}}function Tve(n,e){pp.expire()}class Rve extends kve{constructor(e){super(e),this.fontChangeListenerKey_=Vo(ab,Ax.PROPERTYCHANGE,e.redrawText,e),this.element_=document.createElement("div");const t=this.element_.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex="0",this.element_.className=HE+" ol-layers";const i=e.getViewport();i.insertBefore(this.element_,i.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,t){const i=this.getMap();if(i.hasListener(e)){const r=new Bee(e,void 0,t);i.dispatchEvent(r)}}disposeInternal(){Ta(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(fp.PRECOMPOSE,e);const t=e.layerStatesArray.sort((a,c)=>a.zIndex-c.zIndex);t.some(a=>a.layer instanceof xU&&a.layer.getDeclutter())&&(e.declutter={});const r=e.viewState;this.children_.length=0;const o=[];let s=null;for(let a=0,c=t.length;a<c;++a){const h=t[a];e.layerIndex=a;const m=h.layer,y=m.getSourceState();if(!pU(h,r)||y!="ready"&&y!="undefined"){m.unrender();continue}const M=m.render(e,s);M&&(M!==s&&(this.children_.push(M),s=M),o.push(h))}this.declutter(e,o),G1e(this.element_,this.children_),this.dispatchRenderEvent(fp.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}declutter(e,t){if(e.declutter){for(let i=t.length-1;i>=0;--i){const r=t[i],o=r.layer;o.getDeclutter()&&o.renderDeclutter(e,r)}t.forEach(i=>i.layer.renderDeferred(e))}}}function Iee(n){if(n instanceof zx){n.setMapInternal(null);return}n instanceof Fx&&n.getLayers().forEach(Iee)}function kee(n,e){if(n instanceof zx){n.setMapInternal(e);return}if(n instanceof Fx){const t=n.getLayers().getArray();for(let i=0,r=t.length;i<r;++i)kee(t[i],e)}}let t6=class extends Rm{constructor(e){super(),e=e||{},this.on,this.once,this.un;const t=Dve(e);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:h0e,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=wd(),this.pixelToCoordinateTransform_=wd(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=t.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=t.controls||Y1e(),this.interactions=t.interactions||pye({onFocusOnly:!0}),this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new OJ(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(NA.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(NA.VIEW,this.handleViewChanged_),this.addChangeListener(NA.SIZE,this.handleSizeChanged_),this.addChangeListener(NA.TARGET,this.handleTargetChanged_),this.setProperties(t.values);const i=this;e.view&&!(e.view instanceof gm)&&e.view.then(function(r){i.setView(new gm(r))}),this.controls.addEventListener(gd.ADD,r=>{r.element.setMap(this)}),this.controls.addEventListener(gd.REMOVE,r=>{r.element.setMap(null)}),this.interactions.addEventListener(gd.ADD,r=>{r.element.setMap(this)}),this.interactions.addEventListener(gd.REMOVE,r=>{r.element.setMap(null)}),this.overlays_.addEventListener(gd.ADD,r=>{this.addOverlayInternal_(r.element)}),this.overlays_.addEventListener(gd.REMOVE,r=>{const o=r.element.getId();o!==void 0&&delete this.overlayIdIndex_[o.toString()],r.element.setMap(null)}),this.controls.forEach(r=>{r.setMap(this)}),this.interactions.forEach(r=>{r.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){kee(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const t=e.getId();t!==void 0&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,t,i){if(!this.frameState_||!this.renderer_)return;const r=this.getCoordinateFromPixelInternal(e);i=i!==void 0?i:{};const o=i.hitTolerance!==void 0?i.hitTolerance:0,s=i.layerFilter!==void 0?i.layerFilter:Z3,a=i.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(r,this.frameState_,o,a,t,null,s,null)}getFeaturesAtPixel(e,t){const i=[];return this.forEachFeatureAtPixel(e,function(r){i.push(r)},t),i}getAllLayers(){const e=[];function t(i){i.forEach(function(r){r instanceof Fx?t(r.getLayers()):e.push(r)})}return t(this.getLayers()),e}hasFeatureAtPixel(e,t){if(!this.frameState_||!this.renderer_)return!1;const i=this.getCoordinateFromPixelInternal(e);t=t!==void 0?t:{};const r=t.layerFilter!==void 0?t.layerFilter:Z3,o=t.hitTolerance!==void 0?t.hitTolerance:0,s=t.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,o,s,r,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const i=this.viewport_.getBoundingClientRect(),r=this.getSize(),o=i.width/r[0],s=i.height/r[1],a="changedTouches"in e?e.changedTouches[0]:e;return[(a.clientX-i.left)/o,(a.clientY-i.top)/s]}getTarget(){return this.get(NA.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return Z9(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const t=this.frameState_;return t?Hu(t.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const t=this.overlayIdIndex_[e.toString()];return t!==void 0?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(NA.LAYERGROUP)}setLayers(e){const t=this.getLayerGroup();if(e instanceof Lg){t.setLayers(e);return}const i=t.getLayers();i.clear(),i.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,i=e.length;t<i;++t){const r=e[t];if(!r.visible)continue;const o=r.layer.getRenderer();if(o&&!o.ready)return!0;const s=r.layer.getSource();if(s&&s.loading)return!0}return!1}getPixelFromCoordinate(e){const t=H0(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(e){const t=this.frameState_;return t?Hu(t.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(NA.SIZE)}getView(){return this.get(NA.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,t,i,r){return m0e(this.frameState_,e,t,i,r)}handleBrowserEvent(e,t){t=t||e.type;const i=new wy(t,this,e);this.handleMapBrowserEvent(i)}handleMapBrowserEvent(e){if(!this.frameState_)return;const t=e.originalEvent,i=t.type;if(i===j9.POINTERDOWN||i===Ir.WHEEL||i===Ir.KEYDOWN){const r=this.getOwnerDocument(),o=this.viewport_.getRootNode?this.viewport_.getRootNode():r,s=t.target,a=o instanceof ShadowRoot?o.host===s?o.host.ownerDocument:o:o===r?r.documentElement:o;if(this.overlayContainerStopEvent_.contains(s)||!a.contains(s))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const r=this.getInteractions().getArray().slice();for(let o=r.length-1;o>=0;o--){const s=r[o];if(s.getMap()!==this||!s.getActive()||!this.getTargetElement())continue;if(!s.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let r=this.maxTilesLoading_,o=r;if(e){const s=e.viewHints;if(s[dl.ANIMATING]||s[dl.INTERACTING]){const a=Date.now()-e.time>8;r=a?0:8,o=a?0:2}}t.getTilesLoading()<r&&(t.reprioritize(),t.loadMoreTiles(r,o))}e&&this.renderer_&&!e.animate&&(this.renderComplete_?(this.hasListener(fp.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(fp.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new b_(Z0.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new b_(Z0.LOADSTART,this,e))));const i=this.postRenderFunctions_;if(e)for(let r=0,o=i.length;r<o;++r)i[r](this,e);i.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let i=0,r=this.targetChangeHandlerKeys_.length;i<r;++i)Ta(this.targetChangeHandlerKeys_[i]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(Ir.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(Ir.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const i=this.targetElement_.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.unobserve(i.host),this.setSize(void 0)}const e=this.getTarget(),t=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=t,!t)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new Rve(this)),this.mapBrowserEventHandler_=new f0e(this,this.moveTolerance_);for(const o in Zl)this.mapBrowserEventHandler_.addEventListener(Zl[o],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(Ir.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(Ir.WHEEL,this.boundHandleBrowserEvent_,EJ?{passive:!1}:!1);let i;if(this.keyboardEventTarget_)i=this.keyboardEventTarget_;else{const o=t.getRootNode();i=o instanceof ShadowRoot?o.host:t}this.targetChangeHandlerKeys_=[Vo(i,Ir.KEYDOWN,this.handleBrowserEvent,this),Vo(i,Ir.KEYPRESS,this.handleBrowserEvent,this)];const r=t.getRootNode();r instanceof ShadowRoot&&this.resizeObserver_.observe(r.host),this.resizeObserver_.observe(t)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(Ta(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Ta(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=Vo(e,Ax.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Vo(e,Ir.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(Ta),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new Ey("addlayer",e)),this.layerGroupPropertyListenerKeys_=[Vo(e,Ax.PROPERTYCHANGE,this.render,this),Vo(e,Ir.CHANGE,this.render,this),Vo(e,"addlayer",this.handleLayerAdd_,this),Vo(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){if(!this.frameState_)return;const e=this.frameState_.layerStatesArray;for(let t=0,i=e.length;t<i;++t){const r=e[t].layer;r.hasRenderer()&&r.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){Iee(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const t=this.getSize(),i=this.getView(),r=this.frameState_;let o=null;if(t!==void 0&&uj(t)&&i&&i.isDef()){const s=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=i.getState();if(o={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:Jw(a.center,a.resolution,a.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:a,viewHints:s,wantedTiles:{},mapId:$r(this),renderTargets:{}},a.nextCenter&&a.nextResolution){const c=isNaN(a.nextRotation)?a.rotation:a.nextRotation;o.nextExtent=Jw(a.nextCenter,a.nextResolution,c,t)}}this.frameState_=o,this.renderer_.renderFrame(o),o&&(o.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,o.postRenderFunctions),r&&(!this.previousExtent_||!Xb(this.previousExtent_)&&!h1(o.extent,this.previousExtent_))&&(this.dispatchEvent(new b_(Z0.MOVESTART,this,r)),this.previousExtent_=Kx(this.previousExtent_)),this.previousExtent_&&!o.viewHints[dl.ANIMATING]&&!o.viewHints[dl.INTERACTING]&&!h1(o.extent,this.previousExtent_)&&(this.dispatchEvent(new b_(Z0.MOVEEND,this,o)),BJ(o.extent,this.previousExtent_))),this.dispatchEvent(new b_(Z0.POSTRENDER,this,o)),this.renderComplete_=(this.hasListener(Z0.LOADSTART)||this.hasListener(Z0.LOADEND)||this.hasListener(fp.RENDERCOMPLETE))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const t=this.getLayerGroup();t&&this.handleLayerRemove_(new Ey("removelayer",t)),this.set(NA.LAYERGROUP,e)}setSize(e){this.set(NA.SIZE,e)}setTarget(e){this.set(NA.TARGET,e)}setView(e){if(!e||e instanceof gm){this.set(NA.VIEW,e);return}this.set(NA.VIEW,new gm);const t=this;e.then(function(i){t.setView(new gm(i))})}updateSize(){const e=this.getTargetElement();let t;if(e){const r=getComputedStyle(e),o=e.offsetWidth-parseFloat(r.borderLeftWidth)-parseFloat(r.paddingLeft)-parseFloat(r.paddingRight)-parseFloat(r.borderRightWidth),s=e.offsetHeight-parseFloat(r.borderTopWidth)-parseFloat(r.paddingTop)-parseFloat(r.paddingBottom)-parseFloat(r.borderBottomWidth);!isNaN(o)&&!isNaN(s)&&(t=[Math.max(0,o),Math.max(0,s)],!uj(t)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&LJ("No map visible because the map container's width or height are 0."))}const i=this.getSize();t&&(!i||!uv(t,i))&&(this.setSize(t),this.updateViewportSize_(t))}updateViewportSize_(e){const t=this.getView();t&&t.setViewportSize(e)}};function Dve(n){let e=null;n.keyboardEventTarget!==void 0&&(e=typeof n.keyboardEventTarget=="string"?document.getElementById(n.keyboardEventTarget):n.keyboardEventTarget);const t={},i=n.layers&&typeof n.layers.getLayers=="function"?n.layers:new Fx({layers:n.layers});t[NA.LAYERGROUP]=i,t[NA.TARGET]=n.target,t[NA.VIEW]=n.view instanceof gm?n.view:new gm;let r;n.controls!==void 0&&(Array.isArray(n.controls)?r=new Lg(n.controls.slice()):(ws(typeof n.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),r=n.controls));let o;n.interactions!==void 0&&(Array.isArray(n.interactions)?o=new Lg(n.interactions.slice()):(ws(typeof n.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),o=n.interactions));let s;return n.overlays!==void 0?Array.isArray(n.overlays)?s=new Lg(n.overlays.slice()):(ws(typeof n.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),s=n.overlays):s=new Lg,{controls:r,interactions:o,keyboardEventTarget:e,overlays:s,values:t}}class n6 extends Rm{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const t=e;this.setGeometry(t)}else{const t=e;this.setProperties(t)}}clone(){const e=new n6(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const t=this.getGeometry();t&&e.setGeometry(t.clone());const i=this.getStyle();return i&&e.setStyle(i),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(Ta(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=Vo(e,Ir.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?Pve(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function Pve(n){if(typeof n=="function")return n;let e;return Array.isArray(n)?e=n:(ws(typeof n.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[n]),function(){return e}}function Tee(n,e,t,i){const r=[];let o=_p();for(let s=0,a=t.length;s<a;++s){const c=t[s];o=NP(n,e,c[0],i),r.push((o[0]+o[2])/2,(o[1]+o[3])/2),e=c[c.length-1]}return r}function lS(n,e,t,i,r,o,s){let a,c;const h=(t-e)/i;if(h===1)a=e;else if(h===2)a=e,c=r;else if(h!==0){let m=n[e],y=n[e+1],M=0;const x=[0];for(let F=e+i;F<t;F+=i){const j=n[F],q=n[F+1];M+=Math.sqrt((j-m)*(j-m)+(q-y)*(q-y)),x.push(M),m=j,y=q}const T=r*M,P=r0e(x,T);P<0?(c=(T-x[-P-2])/(x[-P-1]-x[-P-2]),a=e+(-P-2)*i):a=e+P*i}s=s>1?s:2,o=o||new Array(s);for(let m=0;m<s;++m)o[m]=a===void 0?NaN:c===void 0?n[a+m]:pf(n[a+m],n[a+i+m],c);return o}function sR(n,e,t,i,r,o){if(t==e)return null;let s;if(r<n[e+i-1])return o?(s=n.slice(e,e+i),s[i-1]=r,s):null;if(n[t-1]<r)return o?(s=n.slice(t-i,t),s[i-1]=r,s):null;if(r==n[e+i-1])return n.slice(e,e+i);let a=e/i,c=t/i;for(;a<c;){const M=a+c>>1;r<n[(M+1)*i-1]?c=M:a=M+1}const h=n[a*i-1];if(r==h)return n.slice((a-1)*i,(a-1)*i+i);const m=n[(a+1)*i-1],y=(r-h)/(m-h);s=[];for(let M=0;M<i-1;++M)s.push(pf(n[(a-1)*i+M],n[a*i+M],y));return s.push(r),s}function Uve(n,e,t,i,r,o,s){if(s)return sR(n,e,t[t.length-1],i,r,o);let a;if(r<n[i-1])return o?(a=n.slice(0,i),a[i-1]=r,a):null;if(n[n.length-1]<r)return o?(a=n.slice(n.length-i),a[i-1]=r,a):null;for(let c=0,h=t.length;c<h;++c){const m=t[c];if(e!=m){if(r<n[e+i-1])return null;if(r<=n[m-1])return sR(n,e,m,i,r,!1);e=m}}return null}class uS extends $J{constructor(e){super(),this.geometries_=e,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(Ta),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const e=this.geometries_;for(let t=0,i=e.length;t<i;++t)this.changeEventsKeys_.push(Vo(e[t],Ir.CHANGE,this.changed,this))}clone(){const e=new uS(cB(this.geometries_));return e.applyProperties(this),e}closestPointXY(e,t,i,r){if(r<Zb(this.getExtent(),e,t))return r;const o=this.geometries_;for(let s=0,a=o.length;s<a;++s)r=o[s].closestPointXY(e,t,i,r);return r}containsXY(e,t){const i=this.geometries_;for(let r=0,o=i.length;r<o;++r)if(i[r].containsXY(e,t))return!0;return!1}computeExtent(e){Kx(e);const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)kJ(e,t[i].getExtent());return e}getGeometries(){return cB(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)t[i].getType()===this.getType()?e=e.concat(t[i].getGeometriesArrayRecursive()):e.push(t[i]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=[],i=this.geometries_;let r=!1;for(let o=0,s=i.length;o<s;++o){const a=i[o],c=a.getSimplifiedGeometry(e);t.push(c),c!==a&&(r=!0)}return r?new uS(t):(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getType(){return"GeometryCollection"}intersectsExtent(e){const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)if(t[i].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,t){const i=this.geometries_;for(let r=0,o=i.length;r<o;++r)i[r].rotate(e,t);this.changed()}scale(e,t,i){i||(i=Ef(this.getExtent()));const r=this.geometries_;for(let o=0,s=r.length;o<s;++o)r[o].scale(e,t,i);this.changed()}setGeometries(e){this.setGeometriesArray(cB(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)t[i].applyTransform(e);this.changed()}translate(e,t){const i=this.geometries_;for(let r=0,o=i.length;r<o;++r)i[r].translate(e,t);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function cB(n){return n.map(e=>e.clone())}function MU(n,e,t,i){let r=n[e],o=n[e+1],s=0;for(let a=e+i;a<t;a+=i){const c=n[a],h=n[a+1];s+=Math.sqrt((c-r)*(c-r)+(h-o)*(h-o)),r=c,o=h}return s}class Nb extends Jb{constructor(e,t){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendCoordinate(e){Xg(this.flatCoordinates,e),this.changed()}clone(){const e=new Nb(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,r){return r<Zb(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(XP(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),eU(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,t,i,r))}forEachSegment(e){return eee(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,t){return this.layout!="XYM"&&this.layout!="XYZM"?null:(t=t!==void 0?t:!1,sR(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t))}getCoordinates(){return Ky(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,t){return lS(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,this.stride)}getLength(){return MU(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const t=[];return t.length=$E(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new Nb(t,"XY")}getType(){return"LineString"}intersectsExtent(e){return VE(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,this.getExtent())}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=YE(this.flatCoordinates,0,e,this.stride),this.changed()}}class u4 extends Jb{constructor(e,t,i){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,t);else if(t!==void 0&&i)this.setFlatCoordinates(t,e),this.ends_=i;else{const r=e,o=[],s=[];for(let c=0,h=r.length;c<h;++c){const m=r[c];Xg(o,m.getFlatCoordinates()),s.push(o.length)}const a=r.length===0?this.getLayout():r[0].getLayout();this.setFlatCoordinates(a,o),this.ends_=s}}appendLineString(e){Xg(this.flatCoordinates,e.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new u4(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,i,r){return r<Zb(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(JP(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),tU(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,t,i,r))}getCoordinateAtM(e,t,i){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(t=t!==void 0?t:!1,i=i!==void 0?i:!1,Uve(this.flatCoordinates,0,this.ends_,this.stride,e,t,i))}getCoordinates(){return t4(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new Nb(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,t=this.ends_,i=this.layout,r=[];let o=0;for(let s=0,a=t.length;s<a;++s){const c=t[s],h=new Nb(e.slice(o,c),i);r.push(h),o=c}return r}getLength(){const e=this.ends_;let t=0,i=0;for(let r=0,o=e.length;r<o;++r)i+=MU(this.flatCoordinates,t,e[r],this.stride),t=e[r];return i}getFlatMidpoints(){const e=[],t=this.flatCoordinates;let i=0;const r=this.ends_,o=this.stride;for(let s=0,a=r.length;s<a;++s){const c=r[s],h=lS(t,i,c,o,.5);Xg(e,h),i=c}return e}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=XJ(this.flatCoordinates,0,this.ends_,this.stride,e,t,0,i),new u4(t,"XY",i)}getType(){return"MultiLineString"}intersectsExtent(e){return O1e(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=a5(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}class d5 extends Jb{constructor(e,t){super(),t&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendPoint(e){Xg(this.flatCoordinates,e.getFlatCoordinates()),this.changed()}clone(){const e=new d5(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,r){if(r<Zb(this.getExtent(),e,t))return r;const o=this.flatCoordinates,s=this.stride;for(let a=0,c=o.length;a<c;a+=s){const h=Bb(e,t,o[a],o[a+1]);if(h<r){r=h;for(let m=0;m<s;++m)i[m]=o[a+m];i.length=s}}return r}getCoordinates(){return Ky(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){const t=this.flatCoordinates.length/this.stride;return e<0||t<=e?null:new zb(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,t=this.layout,i=this.stride,r=[];for(let o=0,s=e.length;o<s;o+=i){const a=new zb(e.slice(o,o+i),t);r.push(a)}return r}getType(){return"MultiPoint"}intersectsExtent(e){const t=this.flatCoordinates,i=this.stride;for(let r=0,o=t.length;r<o;r+=i){const s=t[r],a=t[r+1];if(jP(e,s,a))return!0}return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=YE(this.flatCoordinates,0,e,this.stride),this.changed()}}class c4 extends Jb{constructor(e,t,i){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!i&&!Array.isArray(e[0])){const r=e,o=[],s=[];for(let a=0,c=r.length;a<c;++a){const h=r[a],m=o.length,y=h.getEnds();for(let M=0,x=y.length;M<x;++M)y[M]+=m;Xg(o,h.getFlatCoordinates()),s.push(y)}t=r.length===0?this.getLayout():r[0].getLayout(),e=o,i=s}t!==void 0&&i?(this.setFlatCoordinates(t,e),this.endss_=i):this.setCoordinates(e,t)}appendPolygon(e){let t;if(!this.flatCoordinates)this.flatCoordinates=e.getFlatCoordinates().slice(),t=e.getEnds().slice(),this.endss_.push();else{const i=this.flatCoordinates.length;Xg(this.flatCoordinates,e.getFlatCoordinates()),t=e.getEnds().slice();for(let r=0,o=t.length;r<o;++r)t[r]+=i}this.endss_.push(t),this.changed()}clone(){const e=this.endss_.length,t=new Array(e);for(let r=0;r<e;++r)t[r]=this.endss_[r].slice();const i=new c4(this.flatCoordinates.slice(),this.layout,t);return i.applyProperties(this),i}closestPointXY(e,t,i,r){return r<Zb(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(C1e(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),_1e(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,t,i,r))}containsXY(e,t){return E1e(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,t)}getArea(){return b1e(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),J9(t,0,this.endss_,this.stride,e)):t=this.flatCoordinates,X9(t,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=Tee(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=JJ(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new d5(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;iee(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=J9(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=w1e(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),t,0,i),new c4(t,"XY",i)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let t;if(e===0)t=0;else{const o=this.endss_[e-1];t=o[o.length-1]}const i=this.endss_[e].slice(),r=i[i.length-1];if(t!==0)for(let o=0,s=i.length;o<s;++o)i[o]-=t;return new d1(this.flatCoordinates.slice(t,r),this.layout,i)}getPolygons(){const e=this.layout,t=this.flatCoordinates,i=this.endss_,r=[];let o=0;for(let s=0,a=i.length;s<a;++s){const c=i[s].slice(),h=c[c.length-1];if(o!==0)for(let y=0,M=c.length;y<M;++y)c[y]-=o;const m=new d1(t.slice(o,h),e,c);r.push(m),o=h}return r}getType(){return"MultiPolygon"}intersectsExtent(e){return B1e(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const i=ZJ(this.flatCoordinates,0,e,this.stride,this.endss_);if(i.length===0)this.flatCoordinates.length=0;else{const r=i[i.length-1];this.flatCoordinates.length=r.length===0?0:r[r.length-1]}this.changed()}}const _j=wd();class QA{constructor(e,t,i,r,o,s){this.styleFunction,this.extent_,this.id_=s,this.type_=e,this.flatCoordinates_=t,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=i||null,this.properties_=o,this.squaredTolerance_,this.stride_=r,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?IJ(this.flatCoordinates_):NP(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=Ef(this.getExtent());this.flatInteriorPoints_=rU(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=ree(this.flatCoordinates_,this.ends_),t=Tee(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=JJ(this.flatCoordinates_,0,e,2,t)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=lS(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let t=0;const i=this.ends_;for(let r=0,o=i.length;r<o;++r){const s=i[r],a=lS(e,t,s,2,.5);Xg(this.flatMidpoints_,a),t=s}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,t){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=Hs(e);const t=e.getExtent(),i=e.getWorldExtent();if(t&&i){const r=Ju(i)/Ju(t);t0(_j,i[0],i[3],r,-r,0,0,0),Zy(this.flatCoordinates_,0,this.flatCoordinates_.length,2,_j,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){return new QA(this.type_,this.flatCoordinates_.slice(),this.ends_?.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=MJ((e,t)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),t&&this.simplifiedGeometry_.applyTransform(t);const i=this.simplifiedGeometry_.getFlatCoordinates();let r;switch(this.type_){case"LineString":i.length=$E(i,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,i,0),r=[i.length];break;case"MultiLineString":r=[],i.length=XJ(i,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,i,0,r);break;case"Polygon":r=[],i.length=nU(i,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),i,0,r);break}return r&&(this.simplifiedGeometry_=new QA(this.type_,i,r,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}}QA.prototype.getFlatCoordinates=QA.prototype.getOrientedFlatCoordinates;class Ree{drawCustom(e,t,i,r,o){}drawGeometry(e){}setStyle(e){}drawCircle(e,t,i){}drawFeature(e,t,i){}drawGeometryCollection(e,t,i){}drawLineString(e,t,i){}drawMultiLineString(e,t,i){}drawMultiPoint(e,t,i){}drawMultiPolygon(e,t,i){}drawPoint(e,t,i){}drawPolygon(e,t,i){}drawText(e,t,i){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}}class Kve extends Ree{constructor(e,t,i,r,o,s,a){super(),this.context_=e,this.pixelRatio_=t,this.extent_=i,this.transform_=r,this.transformRotation_=r?FE(Math.atan2(r[1],r[0]),10):0,this.viewRotation_=o,this.squaredTolerance_=s,this.userTransform_=a,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=wd()}drawImages_(e,t,i,r){if(!this.image_)return;const o=Zy(e,t,i,r,this.transform_,this.pixelCoordinates_),s=this.context_,a=this.tmpLocalTransform_,c=s.globalAlpha;this.imageOpacity_!=1&&(s.globalAlpha=c*this.imageOpacity_);let h=this.imageRotation_;this.transformRotation_===0&&(h-=this.viewRotation_),this.imageRotateWithView_&&(h+=this.viewRotation_);for(let m=0,y=o.length;m<y;m+=2){const M=o[m]-this.imageAnchorX_,x=o[m+1]-this.imageAnchorY_;if(h!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const T=M+this.imageAnchorX_,P=x+this.imageAnchorY_;t0(a,T,P,1,1,h,-T,-P),s.save(),s.transform.apply(s,a),s.translate(T,P),s.scale(this.imageScale_[0],this.imageScale_[1]),s.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),s.restore()}else s.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,M,x,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(s.globalAlpha=c)}drawText_(e,t,i,r){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const o=Zy(e,t,i,r,this.transform_,this.pixelCoordinates_),s=this.context_;let a=this.textRotation_;for(this.transformRotation_===0&&(a-=this.viewRotation_),this.textRotateWithView_&&(a+=this.viewRotation_);t<i;t+=r){const c=o[t]+this.textOffsetX_,h=o[t+1]+this.textOffsetY_;a!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(s.save(),s.translate(c-this.textOffsetX_,h-this.textOffsetY_),s.rotate(a),s.translate(this.textOffsetX_,this.textOffsetY_),s.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&s.strokeText(this.text_,0,0),this.textFillState_&&s.fillText(this.text_,0,0),s.restore()):(this.textStrokeState_&&s.strokeText(this.text_,c,h),this.textFillState_&&s.fillText(this.text_,c,h))}}moveToLineTo_(e,t,i,r,o){const s=this.context_,a=Zy(e,t,i,r,this.transform_,this.pixelCoordinates_);s.moveTo(a[0],a[1]);let c=a.length;o&&(c-=2);for(let h=2;h<c;h+=2)s.lineTo(a[h],a[h+1]);return o&&s.closePath(),i}drawRings_(e,t,i,r){for(let o=0,s=i.length;o<s;++o)t=this.moveToLineTo_(e,t,i[o],r,!0);return t}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Jl(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=v1e(e,this.transform_,this.pixelCoordinates_),i=t[2]-t[0],r=t[3]-t[1],o=Math.sqrt(i*i+r*r),s=this.context_;s.beginPath(),s.arc(t[0],t[1],o,0,2*Math.PI),this.fillState_&&s.fill(),this.strokeState_&&s.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,t){const i=t.getGeometryFunction()(e);i&&(this.setStyle(t),this.drawGeometry(i))}drawGeometryCollection(e){const t=e.getGeometriesArray();for(let i=0,r=t.length;i<r;++i)this.drawGeometry(t[i])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(t,0,t.length,i),this.text_!==""&&this.drawText_(t,0,t.length,i)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(t,0,t.length,i),this.text_!==""&&this.drawText_(t,0,t.length,i)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Jl(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const t=this.context_,i=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(i,0,i.length,e.getStride(),!1),t.stroke()}if(this.text_!==""){const t=e.getFlatMidpoint();this.drawText_(t,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getExtent();if(Jl(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const i=this.context_,r=e.getFlatCoordinates();let o=0;const s=e.getEnds(),a=e.getStride();i.beginPath();for(let c=0,h=s.length;c<h;++c)o=this.moveToLineTo_(r,o,s[c],a,!1);i.stroke()}if(this.text_!==""){const i=e.getFlatMidpoints();this.drawText_(i,0,i.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Jl(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoint();this.drawText_(t,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Jl(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_,i=e.getOrientedFlatCoordinates();let r=0;const o=e.getEndss(),s=e.getStride();t.beginPath();for(let a=0,c=o.length;a<c;++a){const h=o[a];r=this.drawRings_(i,r,h,s)}this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoints();this.drawText_(t,0,t.length,2)}}}setContextFillState_(e){const t=this.context_,i=this.contextFillState_;i?i.fillStyle!=e.fillStyle&&(i.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const t=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=e.lineCap&&(i.lineCap=e.lineCap,t.lineCap=e.lineCap),uv(i.lineDash,e.lineDash)||t.setLineDash(i.lineDash=e.lineDash),i.lineDashOffset!=e.lineDashOffset&&(i.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset),i.lineJoin!=e.lineJoin&&(i.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),i.lineWidth!=e.lineWidth&&(i.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),i.miterLimit!=e.miterLimit&&(i.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),i.strokeStyle!=e.strokeStyle&&(i.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const t=this.context_,i=this.contextTextState_,r=e.textAlign?e.textAlign:o4;i?(i.font!=e.font&&(i.font=e.font,t.font=e.font),i.textAlign!=r&&(i.textAlign=r,t.textAlign=r),i.textBaseline!=e.textBaseline&&(i.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=r,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:r,textBaseline:e.textBaseline})}setFillStrokeStyle(e,t){if(!e)this.fillState_=null;else{const i=e.getColor();this.fillState_={fillStyle:jg(i||vd)}}if(!t)this.strokeState_=null;else{const i=t.getColor(),r=t.getLineCap(),o=t.getLineDash(),s=t.getLineDashOffset(),a=t.getLineJoin(),c=t.getWidth(),h=t.getMiterLimit(),m=o||s1;this.strokeState_={lineCap:r!==void 0?r:px,lineDash:this.pixelRatio_===1?m:m.map(y=>y*this.pixelRatio_),lineDashOffset:(s||a1)*this.pixelRatio_,lineJoin:a!==void 0?a:mx,lineWidth:(c!==void 0?c:s4)*this.pixelRatio_,miterLimit:h!==void 0?h:i4,strokeStyle:jg(i||r4)}}}setImageStyle(e){let t;if(!e||!(t=e.getSize())){this.image_=null;return}const i=e.getPixelRatio(this.pixelRatio_),r=e.getAnchor(),o=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=r[0]*i,this.imageAnchorY_=r[1]*i,this.imageHeight_=t[1]*i,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=o[0],this.imageOriginY_=o[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const s=e.getScaleArray();this.imageScale_=[s[0]*this.pixelRatio_/i,s[1]*this.pixelRatio_/i],this.imageWidth_=t[0]*i}setTextStyle(e){if(!e)this.text_="";else{const t=e.getFill();if(!t)this.textFillState_=null;else{const x=t.getColor();this.textFillState_={fillStyle:jg(x||vd)}}const i=e.getStroke();if(!i)this.textStrokeState_=null;else{const x=i.getColor(),T=i.getLineCap(),P=i.getLineDash(),F=i.getLineDashOffset(),j=i.getLineJoin(),q=i.getWidth(),V=i.getMiterLimit();this.textStrokeState_={lineCap:T!==void 0?T:px,lineDash:P||s1,lineDashOffset:F||a1,lineJoin:j!==void 0?j:mx,lineWidth:q!==void 0?q:s4,miterLimit:V!==void 0?V:i4,strokeStyle:jg(x||r4)}}const r=e.getFont(),o=e.getOffsetX(),s=e.getOffsetY(),a=e.getRotateWithView(),c=e.getRotation(),h=e.getScaleArray(),m=e.getText(),y=e.getTextAlign(),M=e.getTextBaseline();this.textState_={font:r!==void 0?r:vee,textAlign:y!==void 0?y:o4,textBaseline:M!==void 0?M:oS},this.text_=m!==void 0?Array.isArray(m)?m.reduce((x,T,P)=>x+=P%2?" ":T,""):m:"",this.textOffsetX_=o!==void 0?this.pixelRatio_*o:0,this.textOffsetY_=s!==void 0?this.pixelRatio_*s:0,this.textRotateWithView_=a!==void 0?a:!1,this.textRotation_=c!==void 0?c:0,this.textScale_=[this.pixelRatio_*h[0],this.pixelRatio_*h[1]]}}}const Lve=.5,Dee={Point:qve,LineString:Gve,Polygon:$ve,MultiPoint:Yve,MultiLineString:Wve,MultiPolygon:Qve,GeometryCollection:Nve,Circle:zve};function Fve(n,e){return parseInt($r(n),10)-parseInt($r(e),10)}function aR(n,e){const t=Pee(n,e);return t*t}function Pee(n,e){return Lve*n/e}function zve(n,e,t,i,r){const o=t.getFill(),s=t.getStroke();if(o||s){const c=n.getBuilder(t.getZIndex(),"Circle");c.setFillStrokeStyle(o,s),c.drawCircle(e,i,r)}const a=t.getText();if(a&&a.getText()){const c=n.getBuilder(t.getZIndex(),"Text");c.setTextStyle(a),c.drawText(e,i)}}function cS(n,e,t,i,r,o,s,a){const c=[],h=t.getImage();if(h){let M=!0;const x=h.getImageState();x==Li.LOADED||x==Li.ERROR?M=!1:x==Li.IDLE&&h.load(),M&&c.push(h.ready())}const m=t.getFill();m&&m.loading()&&c.push(m.ready());const y=c.length>0;return y&&Promise.all(c).then(()=>r(null)),jve(n,e,t,i,o,s,a),y}function jve(n,e,t,i,r,o,s){const a=t.getGeometryFunction()(e);if(!a)return;const c=a.simplifyTransformed(i,r);if(t.getRenderer())Uee(n,c,t,e,s);else{const m=Dee[c.getType()];m(n,c,t,e,s,o)}}function Uee(n,e,t,i,r){if(e.getType()=="GeometryCollection"){const s=e.getGeometries();for(let a=0,c=s.length;a<c;++a)Uee(n,s[a],t,i,r);return}n.getBuilder(t.getZIndex(),"Default").drawCustom(e,i,t.getRenderer(),t.getHitDetectionRenderer(),r)}function Nve(n,e,t,i,r,o){const s=e.getGeometriesArray();let a,c;for(a=0,c=s.length;a<c;++a){const h=Dee[s[a].getType()];h(n,s[a],t,i,r,o)}}function Gve(n,e,t,i,r){const o=t.getStroke();if(o){const a=n.getBuilder(t.getZIndex(),"LineString");a.setFillStrokeStyle(null,o),a.drawLineString(e,i,r)}const s=t.getText();if(s&&s.getText()){const a=n.getBuilder(t.getZIndex(),"Text");a.setTextStyle(s),a.drawText(e,i,r)}}function Wve(n,e,t,i,r){const o=t.getStroke();if(o){const a=n.getBuilder(t.getZIndex(),"LineString");a.setFillStrokeStyle(null,o),a.drawMultiLineString(e,i,r)}const s=t.getText();if(s&&s.getText()){const a=n.getBuilder(t.getZIndex(),"Text");a.setTextStyle(s),a.drawText(e,i,r)}}function Qve(n,e,t,i,r){const o=t.getFill(),s=t.getStroke();if(s||o){const c=n.getBuilder(t.getZIndex(),"Polygon");c.setFillStrokeStyle(o,s),c.drawMultiPolygon(e,i,r)}const a=t.getText();if(a&&a.getText()){const c=n.getBuilder(t.getZIndex(),"Text");c.setTextStyle(a),c.drawText(e,i,r)}}function qve(n,e,t,i,r,o){const s=t.getImage(),a=t.getText(),c=a&&a.getText(),h=o&&s&&c?{}:void 0;if(s){if(s.getImageState()!=Li.LOADED)return;const m=n.getBuilder(t.getZIndex(),"Image");m.setImageStyle(s,h),m.drawPoint(e,i,r)}if(c){const m=n.getBuilder(t.getZIndex(),"Text");m.setTextStyle(a,h),m.drawText(e,i,r)}}function Yve(n,e,t,i,r,o){const s=t.getImage(),a=s&&s.getOpacity()!==0,c=t.getText(),h=c&&c.getText(),m=o&&a&&h?{}:void 0;if(a){if(s.getImageState()!=Li.LOADED)return;const y=n.getBuilder(t.getZIndex(),"Image");y.setImageStyle(s,m),y.drawMultiPoint(e,i,r)}if(h){const y=n.getBuilder(t.getZIndex(),"Text");y.setTextStyle(c,m),y.drawText(e,i,r)}}function $ve(n,e,t,i,r){const o=t.getFill(),s=t.getStroke();if(o||s){const c=n.getBuilder(t.getZIndex(),"Polygon");c.setFillStrokeStyle(o,s),c.drawPolygon(e,i,r)}const a=t.getText();if(a&&a.getText()){const c=n.getBuilder(t.getZIndex(),"Text");c.setTextStyle(a),c.drawText(e,i,r)}}let Vve=!1;function Kee(n,e,t,i,r,o,s){const a=new XMLHttpRequest;a.open("GET",typeof n=="function"?n(t,i,r):n,!0),e.getType()=="arraybuffer"&&(a.responseType="arraybuffer"),a.withCredentials=Vve,a.onload=function(c){if(!a.status||a.status>=200&&a.status<300){const h=e.getType();try{let m;h=="text"||h=="json"?m=a.responseText:h=="xml"?m=a.responseXML||a.responseText:h=="arraybuffer"&&(m=a.response),m?o(e.readFeatures(m,{extent:t,featureProjection:r}),e.readProjection(m)):s()}catch{s()}}else s()},a.onerror=s,a.send()}function xj(n,e){return function(t,i,r,o,s){Kee(n,e,t,i,r,(a,c)=>{this.addFeatures(a),o!==void 0&&o(a)},()=>{this.changed(),s!==void 0&&s()})}}function Hve(n,e){return[[-1/0,-1/0,1/0,1/0]]}function Zve(n,e){return[n]}class Mj{constructor(e){this.rbush_=new dee(e),this.items_={}}insert(e,t){const i={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(i),this.items_[$r(t)]=i}load(e,t){const i=new Array(t.length);for(let r=0,o=t.length;r<o;r++){const s=e[r],a=t[r],c={minX:s[0],minY:s[1],maxX:s[2],maxY:s[3],value:a};i[r]=c,this.items_[$r(a)]=c}this.rbush_.load(i)}remove(e){const t=$r(e),i=this.items_[t];return delete this.items_[t],this.rbush_.remove(i)!==null}update(e,t){const i=this.items_[$r(t)],r=[i.minX,i.minY,i.maxX,i.maxY];h1(r,e)||(this.remove(t),this.insert(e,t))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(e){const t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(t).map(function(r){return r.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,t){return this.forEach_(this.getInExtent(e),t)}forEach_(e,t){let i;for(let r=0,o=e.length;r<o;r++)if(i=t(e[r]),i)return i;return i}isEmpty(){return ev(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const t=this.rbush_.toJSON();return A1(t.minX,t.minY,t.maxX,t.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const t in e.items_)this.items_[t]=e.items_[t]}}class jx extends Rm{constructor(e){super(),this.projection=Hs(e.projection),this.attributions_=wj(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible??!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const t=this;this.viewPromise_=new Promise(function(i,r){t.viewResolver=i,t.viewRejector=r})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=wj(e),this.changed()}setState(e){this.state_=e,this.changed()}}function wj(n){return n?typeof n=="function"?n:(Array.isArray(n)||(n=[n]),e=>n):null}const ip={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};class vy extends Tm{constructor(e,t,i){super(e),this.feature=t,this.features=i}}class uw extends jx{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=X3,this.format_=e.format||null,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(ws(this.format_,"`format` must be set when `url` is set"),this.loader_=xj(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:Hve;const t=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=t?new Mj:null,this.loadedExtentsRtree_=new Mj,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let i,r;Array.isArray(e.features)?r=e.features:e.features&&(i=e.features,r=i.getArray()),!t&&i===void 0&&(i=new Lg(r)),r!==void 0&&this.addFeaturesInternal(r),i!==void 0&&this.bindFeaturesCollection_(i)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const t=$r(e);if(!this.addToIndex_(t,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(t,e);const i=e.getGeometry();if(i){const r=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(r,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new vy(ip.ADDFEATURE,e))}setupChangeEvents_(e,t){t instanceof QA||(this.featureChangeKeys_[e]=[Vo(t,Ir.CHANGE,this.handleFeatureChange_,this),Vo(t,Ax.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(e,t){let i=!0;if(t.getId()!==void 0){const r=String(t.getId());if(!(r in this.idIndex_))this.idIndex_[r]=t;else if(t instanceof QA){const o=this.idIndex_[r];o instanceof QA?Array.isArray(o)?o.push(t):this.idIndex_[r]=[o,t]:i=!1}else i=!1}return i&&(ws(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=t),i}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const t=[],i=[],r=[];for(let o=0,s=e.length;o<s;o++){const a=e[o],c=$r(a);this.addToIndex_(c,a)&&i.push(a)}for(let o=0,s=i.length;o<s;o++){const a=i[o],c=$r(a);this.setupChangeEvents_(c,a);const h=a.getGeometry();if(h){const m=h.getExtent();t.push(m),r.push(a)}else this.nullGeometryFeatures_[c]=a}if(this.featuresRtree_&&this.featuresRtree_.load(t,r),this.hasListener(ip.ADDFEATURE))for(let o=0,s=i.length;o<s;o++)this.dispatchEvent(new vy(ip.ADDFEATURE,i[o]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener(ip.ADDFEATURE,function(i){t||(t=!0,e.push(i.feature),t=!1)}),this.addEventListener(ip.REMOVEFEATURE,function(i){t||(t=!0,e.remove(i.feature),t=!1)}),e.addEventListener(gd.ADD,i=>{t||(t=!0,this.addFeature(i.element),t=!1)}),e.addEventListener(gd.REMOVE,i=>{t||(t=!0,this.removeFeature(i.element),t=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const i in this.featureChangeKeys_)this.featureChangeKeys_[i].forEach(Ta);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(i=>{this.removeFeatureInternal(i)});for(const i in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[i])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const t=new vy(ip.CLEAR);this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){const i=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(i,function(r){const o=r.getGeometry();if(o instanceof QA||o.intersectsCoordinate(e))return t(r)})}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,function(i){const r=i.getGeometry();if(r instanceof QA||r.intersectsExtent(e)){const o=t(i);if(o)return o}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),ev(this.nullGeometryFeatures_)||Xg(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const t=[];return this.forEachFeatureAtCoordinateDirect(e,function(i){t.push(i)}),t}getFeaturesInExtent(e,t){if(this.featuresRtree_){if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const r=UJ(e,t);return[].concat(...r.map(o=>this.featuresRtree_.getInExtent(o)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,t){const i=e[0],r=e[1];let o=null;const s=[NaN,NaN];let a=1/0;const c=[-1/0,-1/0,1/0,1/0];return t=t||Z3,this.featuresRtree_.forEachInExtent(c,function(h){if(t(h)){const m=h.getGeometry(),y=a;if(a=m instanceof QA?0:m.closestPointXY(i,r,s,a),a<y){o=h;const M=Math.sqrt(a);c[0]=i-M,c[1]=r-M,c[2]=i+M,c[3]=r+M}}}),o}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const t=this.idIndex_[e.toString()];return t!==void 0?t:null}getFeatureByUid(e){const t=this.uidIndex_[e];return t!==void 0?t:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const t=e.target,i=$r(t),r=t.getGeometry();if(!r)i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[i]=t);else{const s=r.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(s,t)):this.featuresRtree_&&this.featuresRtree_.update(s,t)}const o=t.getId();if(o!==void 0){const s=o.toString();this.idIndex_[s]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[s]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[i]=t;this.changed(),this.dispatchEvent(new vy(ip.CHANGEFEATURE,t))}hasFeature(e){const t=e.getId();return t!==void 0?t in this.idIndex_:$r(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&ev(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,t,i){const r=this.loadedExtentsRtree_,o=this.strategy_(e,t,i);for(let s=0,a=o.length;s<a;++s){const c=o[s];r.forEachInExtent(c,function(m){return Fg(m.extent,c)})||(++this.loadingExtentsCount_,this.dispatchEvent(new vy(ip.FEATURESLOADSTART)),this.loader_.call(this,c,t,i,m=>{--this.loadingExtentsCount_,this.dispatchEvent(new vy(ip.FEATURESLOADEND,void 0,m))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new vy(ip.FEATURESLOADERROR))}),r.insert(c,{extent:c.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const t=this.loadedExtentsRtree_,i=t.forEachInExtent(e,function(r){if(h1(r.extent,e))return r});i&&t.remove(i)}removeFeatures(e){let t=!1;for(let i=0,r=e.length;i<r;++i)t=this.removeFeatureInternal(e[i])||t;t&&this.changed()}removeFeature(e){if(!e)return;this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const t=$r(e);if(!(t in this.uidIndex_))return!1;t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e),this.featureChangeKeys_[t]?.forEach(Ta),delete this.featureChangeKeys_[t];const r=e.getId();if(r!==void 0){const o=r.toString(),s=this.idIndex_[o];s===e?delete this.idIndex_[o]:Array.isArray(s)&&(s.splice(s.indexOf(e),1),s.length===1&&(this.idIndex_[o]=s[0]))}return delete this.uidIndex_[t],this.hasListener(ip.REMOVEFEATURE)&&this.dispatchEvent(new vy(ip.REMOVEFEATURE,e)),!0}removeFromIdIndex_(e){for(const t in this.idIndex_)if(this.idIndex_[t]===e){delete this.idIndex_[t];break}}setLoader(e){this.loader_=e}setUrl(e){ws(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(xj(e,this.format_))}setOverlaps(e){this.overlaps_=e,this.changed()}}const fr={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},oM=[fr.FILL],Fy=[fr.STROKE],gb=[fr.BEGIN_PATH],Sj=[fr.CLOSE_PATH];class f5 extends Ree{constructor(e,t,i,r){super(),this.tolerance=e,this.maxExtent=t,this.pixelRatio=r,this.maxLineWidth=0,this.resolution=i,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const t=this.pixelRatio;return t==1?e:e.map(function(i){return i*t})}appendFlatPointCoordinates(e,t){const i=this.getBufferedMaxExtent(),r=this.tmpCoordinate_,o=this.coordinates;let s=o.length;for(let a=0,c=e.length;a<c;a+=t)r[0]=e[a],r[1]=e[a+1],Fb(i,r)&&(o[s++]=r[0],o[s++]=r[1]);return s}appendFlatLineCoordinates(e,t,i,r,o,s){const a=this.coordinates;let c=a.length;const h=this.getBufferedMaxExtent();s&&(t+=r);let m=e[t],y=e[t+1];const M=this.tmpCoordinate_;let x=!0,T,P,F;for(T=t+r;T<i;T+=r)M[0]=e[T],M[1]=e[T+1],F=W9(h,M),F!==P?(x&&(a[c++]=m,a[c++]=y,x=!1),a[c++]=M[0],a[c++]=M[1]):F===Jc.INTERSECTING?(a[c++]=M[0],a[c++]=M[1],x=!1):x=!0,m=M[0],y=M[1],P=F;return(o&&x||T===t+r)&&(a[c++]=m,a[c++]=y),c}drawCustomCoordinates_(e,t,i,r,o){for(let s=0,a=i.length;s<a;++s){const c=i[s],h=this.appendFlatLineCoordinates(e,t,c,r,!1,!1);o.push(h),t=c}return t}drawCustom(e,t,i,r,o){this.beginGeometry(e,t,o);const s=e.getType(),a=e.getStride(),c=this.coordinates.length;let h,m,y,M,x;switch(s){case"MultiPolygon":h=e.getOrientedFlatCoordinates(),M=[];const T=e.getEndss();x=0;for(let P=0,F=T.length;P<F;++P){const j=[];x=this.drawCustomCoordinates_(h,x,T[P],a,j),M.push(j)}this.instructions.push([fr.CUSTOM,c,M,e,i,X9,o]),this.hitDetectionInstructions.push([fr.CUSTOM,c,M,e,r||i,X9,o]);break;case"Polygon":case"MultiLineString":y=[],h=s=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),x=this.drawCustomCoordinates_(h,0,e.getEnds(),a,y),this.instructions.push([fr.CUSTOM,c,y,e,i,t4,o]),this.hitDetectionInstructions.push([fr.CUSTOM,c,y,e,r||i,t4,o]);break;case"LineString":case"Circle":h=e.getFlatCoordinates(),m=this.appendFlatLineCoordinates(h,0,h.length,a,!1,!1),this.instructions.push([fr.CUSTOM,c,m,e,i,Ky,o]),this.hitDetectionInstructions.push([fr.CUSTOM,c,m,e,r||i,Ky,o]);break;case"MultiPoint":h=e.getFlatCoordinates(),m=this.appendFlatPointCoordinates(h,a),m>c&&(this.instructions.push([fr.CUSTOM,c,m,e,i,Ky,o]),this.hitDetectionInstructions.push([fr.CUSTOM,c,m,e,r||i,Ky,o]));break;case"Point":h=e.getFlatCoordinates(),this.coordinates.push(h[0],h[1]),m=this.coordinates.length,this.instructions.push([fr.CUSTOM,c,m,e,i,void 0,o]),this.hitDetectionInstructions.push([fr.CUSTOM,c,m,e,r||i,void 0,o]);break}this.endGeometry(t)}beginGeometry(e,t,i){this.beginGeometryInstruction1_=[fr.BEGIN_GEOMETRY,t,0,e,i],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[fr.BEGIN_GEOMETRY,t,0,e,i],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let t;const i=e.length;let r,o,s=-1;for(t=0;t<i;++t)r=e[t],o=r[0],o==fr.END_GEOMETRY?s=t:o==fr.BEGIN_GEOMETRY&&(r[2]=t,s0e(this.hitDetectionInstructions,s,t),s=-1)}fillStyleToState(e,t={}){if(e){const i=e.getColor();t.fillPatternScale=i&&typeof i=="object"&&"src"in i?this.pixelRatio:1,t.fillStyle=jg(i||vd)}else t.fillStyle=void 0;return t}strokeStyleToState(e,t={}){if(e){const i=e.getColor();t.strokeStyle=jg(i||r4);const r=e.getLineCap();t.lineCap=r!==void 0?r:px;const o=e.getLineDash();t.lineDash=o?o.slice():s1;const s=e.getLineDashOffset();t.lineDashOffset=s||a1;const a=e.getLineJoin();t.lineJoin=a!==void 0?a:mx;const c=e.getWidth();t.lineWidth=c!==void 0?c:s4;const h=e.getMiterLimit();t.miterLimit=h!==void 0?h:i4,t.lineWidth>this.maxLineWidth&&(this.maxLineWidth=t.lineWidth,this.bufferedMaxExtent_=null)}else t.strokeStyle=void 0,t.lineCap=void 0,t.lineDash=null,t.lineDashOffset=void 0,t.lineJoin=void 0,t.lineWidth=void 0,t.miterLimit=void 0;return t}setFillStrokeStyle(e,t){const i=this.state;this.fillStyleToState(e,i),this.strokeStyleToState(t,i)}createFill(e){const t=e.fillStyle,i=[fr.SET_FILL_STYLE,t];return typeof t!="string"&&i.push(e.fillPatternScale),i}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[fr.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash?this.applyPixelRatio(e.lineDash):null,e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,t){const i=e.fillStyle;(typeof i!="string"||e.currentFillStyle!=i)&&(this.instructions.push(t.call(this,e)),e.currentFillStyle=i)}updateStrokeStyle(e,t){const i=e.strokeStyle,r=e.lineCap,o=e.lineDash,s=e.lineDashOffset,a=e.lineJoin,c=e.lineWidth,h=e.miterLimit;(e.currentStrokeStyle!=i||e.currentLineCap!=r||o!=e.currentLineDash&&!uv(e.currentLineDash,o)||e.currentLineDashOffset!=s||e.currentLineJoin!=a||e.currentLineWidth!=c||e.currentMiterLimit!=h)&&(t.call(this,e),e.currentStrokeStyle=i,e.currentLineCap=r,e.currentLineDash=o,e.currentLineDashOffset=s,e.currentLineJoin=a,e.currentLineWidth=c,e.currentMiterLimit=h)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const t=[fr.END_GEOMETRY,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=BJ(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;Vy(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class Xve extends f5{constructor(e,t,i,r){super(e,t,i,r),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,t,i){if(!this.image_||this.maxExtent&&!Fb(this.maxExtent,e.getFlatCoordinates()))return;this.beginGeometry(e,t,i);const r=e.getFlatCoordinates(),o=e.getStride(),s=this.coordinates.length,a=this.appendFlatPointCoordinates(r,o);this.instructions.push([fr.DRAW_IMAGE,s,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([fr.DRAW_IMAGE,s,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}drawMultiPoint(e,t,i){if(!this.image_)return;this.beginGeometry(e,t,i);const r=e.getFlatCoordinates(),o=[];for(let c=0,h=r.length;c<h;c+=e.getStride())(!this.maxExtent||Fb(this.maxExtent,r.slice(c,c+2)))&&o.push(r[c],r[c+1]);const s=this.coordinates.length,a=this.appendFlatPointCoordinates(o,2);this.instructions.push([fr.DRAW_IMAGE,s,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([fr.DRAW_IMAGE,s,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,t){const i=e.getAnchor(),r=e.getSize(),o=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=r[1],this.opacity_=e.getOpacity(),this.originX_=o[0],this.originY_=o[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=r[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}class Jve extends f5{constructor(e,t,i,r){super(e,t,i,r)}drawFlatCoordinates_(e,t,i,r){const o=this.coordinates.length,s=this.appendFlatLineCoordinates(e,t,i,r,!1,!1),a=[fr.MOVE_TO_LINE_TO,o,s];return this.instructions.push(a),this.hitDetectionInstructions.push(a),i}drawLineString(e,t,i){const r=this.state,o=r.strokeStyle,s=r.lineWidth;if(o===void 0||s===void 0)return;this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(e,t,i),this.hitDetectionInstructions.push([fr.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,s1,a1],gb);const a=e.getFlatCoordinates(),c=e.getStride();this.drawFlatCoordinates_(a,0,a.length,c),this.hitDetectionInstructions.push(Fy),this.endGeometry(t)}drawMultiLineString(e,t,i){const r=this.state,o=r.strokeStyle,s=r.lineWidth;if(o===void 0||s===void 0)return;this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(e,t,i),this.hitDetectionInstructions.push([fr.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,s1,a1],gb);const a=e.getEnds(),c=e.getFlatCoordinates(),h=e.getStride();let m=0;for(let y=0,M=a.length;y<M;++y)m=this.drawFlatCoordinates_(c,m,a[y],h);this.hitDetectionInstructions.push(Fy),this.endGeometry(t)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(Fy),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(Fy),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(gb)}}class Ej extends f5{constructor(e,t,i,r){super(e,t,i,r)}drawFlatCoordinatess_(e,t,i,r){const o=this.state,s=o.fillStyle!==void 0,a=o.strokeStyle!==void 0,c=i.length;this.instructions.push(gb),this.hitDetectionInstructions.push(gb);for(let h=0;h<c;++h){const m=i[h],y=this.coordinates.length,M=this.appendFlatLineCoordinates(e,t,m,r,!0,!a),x=[fr.MOVE_TO_LINE_TO,y,M];this.instructions.push(x),this.hitDetectionInstructions.push(x),a&&(this.instructions.push(Sj),this.hitDetectionInstructions.push(Sj)),t=m}return s&&(this.instructions.push(oM),this.hitDetectionInstructions.push(oM)),a&&(this.instructions.push(Fy),this.hitDetectionInstructions.push(Fy)),t}drawCircle(e,t,i){const r=this.state,o=r.fillStyle,s=r.strokeStyle;if(o===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,i),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([fr.SET_FILL_STYLE,vd]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([fr.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,s1,a1]);const a=e.getFlatCoordinates(),c=e.getStride(),h=this.coordinates.length;this.appendFlatLineCoordinates(a,0,a.length,c,!1,!1);const m=[fr.CIRCLE,h];this.instructions.push(gb,m),this.hitDetectionInstructions.push(gb,m),r.fillStyle!==void 0&&(this.instructions.push(oM),this.hitDetectionInstructions.push(oM)),r.strokeStyle!==void 0&&(this.instructions.push(Fy),this.hitDetectionInstructions.push(Fy)),this.endGeometry(t)}drawPolygon(e,t,i){const r=this.state,o=r.fillStyle,s=r.strokeStyle;if(o===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,i),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([fr.SET_FILL_STYLE,vd]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([fr.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,s1,a1]);const a=e.getEnds(),c=e.getOrientedFlatCoordinates(),h=e.getStride();this.drawFlatCoordinatess_(c,0,a,h),this.endGeometry(t)}drawMultiPolygon(e,t,i){const r=this.state,o=r.fillStyle,s=r.strokeStyle;if(o===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,i),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([fr.SET_FILL_STYLE,vd]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([fr.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,s1,a1]);const a=e.getEndss(),c=e.getOrientedFlatCoordinates(),h=e.getStride();let m=0;for(let y=0,M=a.length;y<M;++y)m=this.drawFlatCoordinatess_(c,m,a[y],h);this.endGeometry(t)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const t=this.coordinates;for(let i=0,r=t.length;i<r;++i)t[i]=ob(t[i],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;this.updateFillStyle(e,this.createFill),this.updateStrokeStyle(e,this.applyStroke)}}function ebe(n,e,t,i,r){const o=[];let s=t,a=0,c=e.slice(t,2);for(;a<n&&s+r<i;){const[h,m]=c.slice(-2),y=e[s+r],M=e[s+r+1],x=Math.sqrt((y-h)*(y-h)+(M-m)*(M-m));if(a+=x,a>=n){const T=(n-a+x)/x,P=pf(h,y,T),F=pf(m,M,T);c.push(P,F),o.push(c),c=[P,F],a==n&&(s+=r),a=0}else if(a<n)c.push(e[s+r],e[s+r+1]),s+=r;else{const T=x-a,P=pf(h,y,T/x),F=pf(m,M,T/x);c.push(P,F),o.push(c),c=[P,F],a=0,s+=r}}return a>0&&o.push(c),o}function tbe(n,e,t,i,r){let o=t,s=t,a=0,c=0,h=t,m,y,M,x,T,P,F,j,q,V;for(y=t;y<i;y+=r){const H=e[y],Q=e[y+1];T!==void 0&&(q=H-T,V=Q-P,x=Math.sqrt(q*q+V*V),F!==void 0&&(c+=M,m=Math.acos((F*q+j*V)/(M*x)),m>n&&(c>a&&(a=c,o=h,s=y),c=0,h=y-r)),M=x,F=q,j=V),T=H,P=Q}return c+=x,c>a?[h,y]:[o,s]}const AS={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class nbe extends f5{constructor(e,t,i,r){super(e,t,i,r),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textKeepUpright_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[vd]={fillStyle:vd},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,t,i){const r=this.textFillState_,o=this.textStrokeState_,s=this.textState_;if(this.text_===""||!s||!r&&!o)return;const a=this.coordinates;let c=a.length;const h=e.getType();let m=null,y=e.getStride();if(s.placement==="line"&&(h=="LineString"||h=="MultiLineString"||h=="Polygon"||h=="MultiPolygon")){if(!Jl(this.maxExtent,e.getExtent()))return;let M;if(m=e.getFlatCoordinates(),h=="LineString")M=[m.length];else if(h=="MultiLineString")M=e.getEnds();else if(h=="Polygon")M=e.getEnds().slice(0,1);else if(h=="MultiPolygon"){const F=e.getEndss();M=[];for(let j=0,q=F.length;j<q;++j)M.push(F[j][0])}this.beginGeometry(e,t,i);const x=s.repeat,T=x?void 0:s.textAlign;let P=0;for(let F=0,j=M.length;F<j;++F){let q;x?q=ebe(x*this.resolution,m,P,M[F],y):q=[m.slice(P,M[F])];for(let V=0,H=q.length;V<H;++V){const Q=q[V];let Y=0,z=Q.length;if(T==null){const le=tbe(s.maxAngle,Q,0,Q.length,2);Y=le[0],z=le[1]}for(let le=Y;le<z;le+=y)a.push(Q[le],Q[le+1]);const se=a.length;P=M[F],this.drawChars_(c,se),c=se}}this.endGeometry(t)}else{let M=s.overflow?null:[];switch(h){case"Point":case"MultiPoint":m=e.getFlatCoordinates();break;case"LineString":m=e.getFlatMidpoint();break;case"Circle":m=e.getCenter();break;case"MultiLineString":m=e.getFlatMidpoints(),y=2;break;case"Polygon":m=e.getFlatInteriorPoint(),s.overflow||M.push(m[2]/this.resolution),y=3;break;case"MultiPolygon":const H=e.getFlatInteriorPoints();m=[];for(let Q=0,Y=H.length;Q<Y;Q+=3)s.overflow||M.push(H[Q+2]/this.resolution),m.push(H[Q],H[Q+1]);if(m.length===0)return;y=2;break}const x=this.appendFlatPointCoordinates(m,y);if(x===c)return;if(M&&(x-c)/2!==m.length/y){let H=c/2;M=M.filter((Q,Y)=>{const z=a[(H+Y)*2]===m[Y*y]&&a[(H+Y)*2+1]===m[Y*y+1];return z||--H,z})}this.saveTextStates_();const T=s.backgroundFill?this.createFill(this.fillStyleToState(s.backgroundFill)):null,P=s.backgroundStroke?this.createStroke(this.strokeStyleToState(s.backgroundStroke)):null;this.beginGeometry(e,t,i);let F=s.padding;if(F!=mb&&(s.scale[0]<0||s.scale[1]<0)){let H=s.padding[0],Q=s.padding[1],Y=s.padding[2],z=s.padding[3];s.scale[0]<0&&(Q=-Q,z=-z),s.scale[1]<0&&(H=-H,Y=-Y),F=[H,Q,Y,z]}const j=this.pixelRatio;this.instructions.push([fr.DRAW_IMAGE,c,x,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,F==mb?mb:F.map(function(H){return H*j}),T,P,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,M]);const q=1/j,V=T?T.slice(0):null;V&&(V[1]=vd),this.hitDetectionInstructions.push([fr.DRAW_IMAGE,c,x,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[q,q],NaN,this.declutterMode_,this.declutterImageWithText_,F,V,P,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?vd:this.fillKey_,this.textOffsetX_,this.textOffsetY_,M]),this.endGeometry(t)}}saveTextStates_(){const e=this.textStrokeState_,t=this.textState_,i=this.textFillState_,r=this.strokeKey_;e&&(r in this.strokeStates||(this.strokeStates[r]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const o=this.textKey_;o in this.textStates||(this.textStates[o]={font:t.font,textAlign:t.textAlign||o4,justify:t.justify,textBaseline:t.textBaseline||oS,scale:t.scale});const s=this.fillKey_;i&&(s in this.fillStates||(this.fillStates[s]={fillStyle:i.fillStyle}))}drawChars_(e,t){const i=this.textStrokeState_,r=this.textState_,o=this.strokeKey_,s=this.textKey_,a=this.fillKey_;this.saveTextStates_();const c=this.pixelRatio,h=AS[r.textBaseline],m=this.textOffsetY_*c,y=this.text_,M=i?i.lineWidth*Math.abs(r.scale[0])/2:0;this.instructions.push([fr.DRAW_CHARS,e,t,h,r.overflow,a,r.maxAngle,c,m,o,M*c,y,s,1,this.declutterMode_,this.textKeepUpright_]),this.hitDetectionInstructions.push([fr.DRAW_CHARS,e,t,h,r.overflow,a&&vd,r.maxAngle,c,m,o,M*c,y,s,1/c,this.declutterMode_,this.textKeepUpright_])}setTextStyle(e,t){let i,r,o;if(!e)this.text_="";else{const s=e.getFill();s?(r=this.textFillState_,r||(r={},this.textFillState_=r),r.fillStyle=jg(s.getColor()||vd)):(r=null,this.textFillState_=r);const a=e.getStroke();if(!a)o=null,this.textStrokeState_=o;else{o=this.textStrokeState_,o||(o={},this.textStrokeState_=o);const P=a.getLineDash(),F=a.getLineDashOffset(),j=a.getWidth(),q=a.getMiterLimit();o.lineCap=a.getLineCap()||px,o.lineDash=P?P.slice():s1,o.lineDashOffset=F===void 0?a1:F,o.lineJoin=a.getLineJoin()||mx,o.lineWidth=j===void 0?s4:j,o.miterLimit=q===void 0?i4:q,o.strokeStyle=jg(a.getColor()||r4)}i=this.textState_;const c=e.getFont()||vee;uve(c);const h=e.getScaleArray();i.overflow=e.getOverflow(),i.font=c,i.maxAngle=e.getMaxAngle(),i.placement=e.getPlacement(),i.textAlign=e.getTextAlign(),i.repeat=e.getRepeat(),i.justify=e.getJustify(),i.textBaseline=e.getTextBaseline()||oS,i.backgroundFill=e.getBackgroundFill(),i.backgroundStroke=e.getBackgroundStroke(),i.padding=e.getPadding()||mb,i.scale=h===void 0?[1,1]:h;const m=e.getOffsetX(),y=e.getOffsetY(),M=e.getRotateWithView(),x=e.getKeepUpright(),T=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=m===void 0?0:m,this.textOffsetY_=y===void 0?0:y,this.textRotateWithView_=M===void 0?!1:M,this.textKeepUpright_=x===void 0?!0:x,this.textRotation_=T===void 0?0:T,this.strokeKey_=o?(typeof o.strokeStyle=="string"?o.strokeStyle:$r(o.strokeStyle))+o.lineCap+o.lineDashOffset+"|"+o.lineWidth+o.lineJoin+o.miterLimit+"["+o.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.repeat||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=r&&r.fillStyle?typeof r.fillStyle=="string"?r.fillStyle:"|"+$r(r.fillStyle):""}this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}const ibe={Circle:Ej,Default:f5,Image:Xve,LineString:Jve,Polygon:Ej,Text:nbe};class Lee{constructor(e,t,i,r){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=r,this.resolution_=i,this.buildersByZIndex_={}}finish(){const e={};for(const t in this.buildersByZIndex_){e[t]=e[t]||{};const i=this.buildersByZIndex_[t];for(const r in i){const o=i[r].finish();e[t][r]=o}}return e}getBuilder(e,t){const i=e!==void 0?e.toString():"0";let r=this.buildersByZIndex_[i];r===void 0&&(r={},this.buildersByZIndex_[i]=r);let o=r[t];if(o===void 0){const s=ibe[t];o=new s(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),r[t]=o}return o}}function rbe(n,e,t,i,r,o,s,a,c,h,m,y,M=!0){let x=n[e],T=n[e+1],P=0,F=0,j=0,q=0;function V(){P=x,F=T,e+=i,x=n[e],T=n[e+1],q+=j,j=Math.sqrt((x-P)*(x-P)+(T-F)*(T-F))}do V();while(e<t-i&&q+j<o);let H=j===0?0:(o-q)/j;const Q=pf(P,x,H),Y=pf(F,T,H),z=e-i,se=q,le=o+a*c(h,r,m);for(;e<t-i&&q+j<le;)V();H=j===0?0:(le-q)/j;const pe=pf(P,x,H),de=pf(F,T,H);let ve=!1;if(M)if(y){const qe=[Q,Y,pe,de];YJ(qe,0,4,2,y,qe,qe),ve=qe[0]>qe[2]}else ve=Q>pe;const Ee=Math.PI,Re=[],je=z+i===e;e=z,j=0,q=se,x=n[e],T=n[e+1];let Ie;if(je){V(),Ie=Math.atan2(T-F,x-P),ve&&(Ie+=Ie>0?-Ee:Ee);const qe=(pe+Q)/2,tt=(de+Y)/2;return Re[0]=[qe,tt,(le-o)/2,Ie,r],Re}r=r.replace(/\n/g," ");for(let qe=0,tt=r.length;qe<tt;){V();let At=Math.atan2(T-F,x-P);if(ve&&(At+=At>0?-Ee:Ee),Ie!==void 0){let nt=At-Ie;if(nt+=nt>Ee?-2*Ee:nt<-Ee?2*Ee:0,Math.abs(nt)>s)return null}Ie=At;const ke=qe;let we=0;for(;qe<tt;++qe){const nt=ve?tt-qe-1:qe,bt=a*c(h,r[nt],m);if(e+i<t&&q+j<o+we+bt/2)break;we+=bt}if(qe===ke)continue;const ze=ve?r.substring(tt-ke,tt-qe):r.substring(ke,qe);H=j===0?0:(o+we/2-q)/j;const Me=pf(P,x,H),lt=pf(F,T,H);Re.push([Me,lt,we/2,At,ze]),o+=we}return Re}class wU{constructor(){this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(rS(),{get:(e,t)=>{if(typeof rS()[t]=="function")return this.push_(t),this.pushMethodArgs_},set:(e,t,i)=>(this.push_(t,i),!0)})}push_(...e){const t=this.instructions_,i=this.zIndex+this.offset_;t[i]||(t[i]=[]),t[i].push(...e)}pushMethodArgs_=(...e)=>(this.push_(e),this);pushFunction(e){this.push_(e)}getContext(){return this.context_}draw(e){this.instructions_.forEach(t=>{for(let i=0,r=t.length;i<r;++i){const o=t[i];if(typeof o=="function"){o(e);continue}const s=t[++i];if(typeof e[o]=="function")e[o](...s);else{if(typeof s=="function"){e[o]=s(e);continue}e[o]=s}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const zC=_p(),by=[],Q0=[],q0=[],Cy=[];function Oj(n){return n[3].declutterBox}const Bj=new RegExp("[-----]");function AB(n,e){return e==="start"?e=Bj.test(n)?"right":"left":e==="end"&&(e=Bj.test(n)?"left":"right"),AS[e]}function obe(n,e,t){return t>0&&n.push(`
`,""),n.push(e,""),n}function sbe(n,e,t){return t%2===0&&(n+=e),n}class abe{constructor(e,t,i,r,o){this.overlaps=i,this.pixelRatio=t,this.resolution=e,this.alignAndScaleFill_,this.instructions=r.instructions,this.coordinates=r.coordinates,this.coordinateCache_={},this.renderedTransform_=wd(),this.hitDetectionInstructions=r.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=r.fillStates||{},this.strokeStates=r.strokeStates||{},this.textStates=r.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=o?new wU:null}getZIndexContext(){return this.zIndexContext_}createLabel(e,t,i,r){const o=e+t+i+r;if(this.labels_[o])return this.labels_[o];const s=r?this.strokeStates[r]:null,a=i?this.fillStates[i]:null,c=this.textStates[t],h=this.pixelRatio,m=[c.scale[0]*h,c.scale[1]*h],y=c.justify?AS[c.justify]:AB(Array.isArray(e)?e[0]:e,c.textAlign||o4),M=r&&s.lineWidth?s.lineWidth:0,x=Array.isArray(e)?e:String(e).split(`
`).reduce(obe,[]),{width:T,height:P,widths:F,heights:j,lineWidths:q}=Ave(c,x),V=T+M,H=[],Q=(V+2)*m[0],Y=(P+M)*m[1],z={width:Q<0?Math.floor(Q):Math.ceil(Q),height:Y<0?Math.floor(Y):Math.ceil(Y),contextInstructions:H};(m[0]!=1||m[1]!=1)&&H.push("scale",m),r&&(H.push("strokeStyle",s.strokeStyle),H.push("lineWidth",M),H.push("lineCap",s.lineCap),H.push("lineJoin",s.lineJoin),H.push("miterLimit",s.miterLimit),H.push("setLineDash",[s.lineDash]),H.push("lineDashOffset",s.lineDashOffset)),i&&H.push("fillStyle",a.fillStyle),H.push("textBaseline","middle"),H.push("textAlign","center");const se=.5-y;let le=y*V+se*M;const pe=[],de=[];let ve=0,Ee=0,Re=0,je=0,Ie;for(let qe=0,tt=x.length;qe<tt;qe+=2){const At=x[qe];if(At===`
`){Ee+=ve,ve=0,le=y*V+se*M,++je;continue}const ke=x[qe+1]||c.font;ke!==Ie&&(r&&pe.push("font",ke),i&&de.push("font",ke),Ie=ke),ve=Math.max(ve,j[Re]);const we=[At,le+se*F[Re]+y*(F[Re]-q[je]),.5*(M+ve)+Ee];le+=F[Re],r&&pe.push("strokeText",we),i&&de.push("fillText",we),++Re}return Array.prototype.push.apply(H,pe),Array.prototype.push.apply(H,de),this.labels_[o]=z,z}replayTextBackground_(e,t,i,r,o,s,a){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,i),e.lineTo.apply(e,r),e.lineTo.apply(e,o),e.lineTo.apply(e,t),s&&(this.alignAndScaleFill_=s[2],e.fillStyle=s[1],this.fill_(e)),a&&(this.setStrokeStyle_(e,a),e.stroke())}calculateImageOrLabelDimensions_(e,t,i,r,o,s,a,c,h,m,y,M,x,T,P,F){a*=M[0],c*=M[1];let j=i-a,q=r-c;const V=o+h>e?e-h:o,H=s+m>t?t-m:s,Q=T[3]+V*M[0]+T[1],Y=T[0]+H*M[1]+T[2],z=j-T[3],se=q-T[0];(P||y!==0)&&(by[0]=z,Cy[0]=z,by[1]=se,Q0[1]=se,Q0[0]=z+Q,q0[0]=Q0[0],q0[1]=se+Y,Cy[1]=q0[1]);let le;return y!==0?(le=t0(wd(),i,r,1,1,y,-i,-r),Hu(le,by),Hu(le,Q0),Hu(le,q0),Hu(le,Cy),A1(Math.min(by[0],Q0[0],q0[0],Cy[0]),Math.min(by[1],Q0[1],q0[1],Cy[1]),Math.max(by[0],Q0[0],q0[0],Cy[0]),Math.max(by[1],Q0[1],q0[1],Cy[1]),zC)):A1(Math.min(z,z+Q),Math.min(se,se+Y),Math.max(z,z+Q),Math.max(se,se+Y),zC),x&&(j=Math.round(j),q=Math.round(q)),{drawImageX:j,drawImageY:q,drawImageW:V,drawImageH:H,originX:h,originY:m,declutterBox:{minX:zC[0],minY:zC[1],maxX:zC[2],maxY:zC[3],value:F},canvasTransform:le,scale:M}}replayImageOrLabel_(e,t,i,r,o,s,a){const c=!!(s||a),h=r.declutterBox,m=a?a[2]*r.scale[0]/2:0;return h.minX-m<=t[0]&&h.maxX+m>=0&&h.minY-m<=t[1]&&h.maxY+m>=0&&(c&&this.replayTextBackground_(e,by,Q0,q0,Cy,s,a),hve(e,r.canvasTransform,o,i,r.originX,r.originY,r.drawImageW,r.drawImageH,r.drawImageX,r.drawImageY,r.scale)),!0}fill_(e){const t=this.alignAndScaleFill_;if(t){const i=Hu(this.renderedTransform_,[0,0]),r=512*this.pixelRatio;e.save(),e.translate(i[0]%r,i[1]%r),t!==1&&e.scale(t,t),e.rotate(this.viewRotation_)}e.fill(),t&&e.restore()}setStrokeStyle_(e,t){e.strokeStyle=t[1],t[1]&&(e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6]))}drawLabelWithPointPlacement_(e,t,i,r){const o=this.textStates[t],s=this.createLabel(e,t,r,i),a=this.strokeStates[i],c=this.pixelRatio,h=AB(Array.isArray(e)?e[0]:e,o.textAlign||o4),m=AS[o.textBaseline||oS],y=a&&a.lineWidth?a.lineWidth:0,M=s.width/c-2*o.scale[0],x=h*M+2*(.5-h)*y,T=m*s.height/c+2*(.5-m)*y;return{label:s,anchorX:x,anchorY:T}}execute_(e,t,i,r,o,s,a,c){const h=this.zIndexContext_;let m;this.pixelCoordinates_&&uv(i,this.renderedTransform_)?m=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),m=Zy(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),c1e(this.renderedTransform_,i));let y=0;const M=r.length;let x=0,T,P,F,j,q,V,H,Q,Y,z,se,le,pe,de=0,ve=0;const Ee=this.coordinateCache_,Re=this.viewRotation_,je=Math.round(Math.atan2(-i[1],i[0])*1e12)/1e12,Ie={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:Re},qe=this.instructions!=r||this.overlaps?0:200;let tt,At,ke,we;for(;y<M;){const ze=r[y];switch(ze[0]){case fr.BEGIN_GEOMETRY:tt=ze[1],we=ze[3],tt.getGeometry()?a!==void 0&&!Jl(a,we.getExtent())?y=ze[2]+1:++y:y=ze[2],h&&(h.zIndex=ze[4]);break;case fr.BEGIN_PATH:de>qe&&(this.fill_(e),de=0),ve>qe&&(e.stroke(),ve=0),!de&&!ve&&(e.beginPath(),q=NaN,V=NaN),++y;break;case fr.CIRCLE:x=ze[1];const lt=m[x],nt=m[x+1],bt=m[x+2],Bt=m[x+3],Ke=bt-lt,Te=Bt-nt,Se=Math.sqrt(Ke*Ke+Te*Te);e.moveTo(lt+Se,nt),e.arc(lt,nt,Se,0,2*Math.PI,!0),++y;break;case fr.CLOSE_PATH:e.closePath(),++y;break;case fr.CUSTOM:x=ze[1],T=ze[2];const We=ze[3],at=ze[4],it=ze[5];Ie.geometry=We,Ie.feature=tt,y in Ee||(Ee[y]=[]);const ft=Ee[y];it?it(m,x,T,2,ft):(ft[0]=m[x],ft[1]=m[x+1],ft.length=2),h&&(h.zIndex=ze[6]),at(ft,Ie),++y;break;case fr.DRAW_IMAGE:x=ze[1],T=ze[2],Y=ze[3],P=ze[4],F=ze[5];let Dt=ze[6];const Ot=ze[7],Jt=ze[8],Dn=ze[9],Pn=ze[10];let oi=ze[11];const In=ze[12];let Tn=ze[13];j=ze[14]||"declutter";const dn=ze[15];if(!Y&&ze.length>=20){z=ze[19],se=ze[20],le=ze[21],pe=ze[22];const Xn=this.drawLabelWithPointPlacement_(z,se,le,pe);Y=Xn.label,ze[3]=Y;const Cn=ze[23];P=(Xn.anchorX-Cn)*this.pixelRatio,ze[4]=P;const Fn=ze[24];F=(Xn.anchorY-Fn)*this.pixelRatio,ze[5]=F,Dt=Y.height,ze[6]=Dt,Tn=Y.width,ze[13]=Tn}let $n;ze.length>25&&($n=ze[25]);let Un,It,_e;ze.length>17?(Un=ze[16],It=ze[17],_e=ze[18]):(Un=mb,It=null,_e=null),Pn&&je?oi+=Re:!Pn&&!je&&(oi-=Re);let oe=0;for(;x<T;x+=2){if($n&&$n[oe++]<Tn/this.pixelRatio)continue;const Xn=this.calculateImageOrLabelDimensions_(Y.width,Y.height,m[x],m[x+1],Tn,Dt,P,F,Jt,Dn,oi,In,o,Un,!!It||!!_e,tt),Cn=[e,t,Y,Xn,Ot,It,_e];if(c){let Fn,pi,Hi;if(dn){const ii=T-x;if(!dn[ii]){dn[ii]={args:Cn,declutterMode:j};continue}const Fi=dn[ii];Fn=Fi.args,pi=Fi.declutterMode,delete dn[ii],Hi=Oj(Fn)}let Ii,Ar;if(Fn&&(pi!=="declutter"||!c.collides(Hi))&&(Ii=!0),(j!=="declutter"||!c.collides(Xn.declutterBox))&&(Ar=!0),pi==="declutter"&&j==="declutter"){const ii=Ii&&Ar;Ii=ii,Ar=ii}Ii&&(pi!=="none"&&c.insert(Hi),this.replayImageOrLabel_.apply(this,Fn)),Ar&&(j!=="none"&&c.insert(Xn.declutterBox),this.replayImageOrLabel_.apply(this,Cn))}else this.replayImageOrLabel_.apply(this,Cn)}++y;break;case fr.DRAW_CHARS:const ee=ze[1],ne=ze[2],ue=ze[3],be=ze[4];pe=ze[5];const Le=ze[6],Ve=ze[7],rt=ze[8];le=ze[9];const ye=ze[10];z=ze[11],Array.isArray(z)&&(z=z.reduce(sbe,"")),se=ze[12];const Be=[ze[13],ze[13]];j=ze[14]||"declutter";const v=ze[15],yt=this.textStates[se],Mt=yt.font,Pt=[yt.scale[0]*Ve,yt.scale[1]*Ve];let en;Mt in this.widths_?en=this.widths_[Mt]:(en={},this.widths_[Mt]=en);const mt=MU(m,ee,ne,2),Qn=Math.abs(Pt[0])*fj(Mt,z,en);if(be||Qn<=mt){const Xn=this.textStates[se].textAlign,Cn=(mt-Qn)*AB(z,Xn),Fn=rbe(m,ee,ne,2,z,Cn,Le,Math.abs(Pt[0]),fj,Mt,en,je?0:this.viewRotation_,v);e:if(Fn){const pi=[];let Hi,Ii,Ar,ii,Fi;if(le)for(Hi=0,Ii=Fn.length;Hi<Ii;++Hi){Fi=Fn[Hi],Ar=Fi[4],ii=this.createLabel(Ar,se,"",le),P=Fi[2]+(Pt[0]<0?-ye:ye),F=ue*ii.height+(.5-ue)*2*ye*Pt[1]/Pt[0]-rt;const Ri=this.calculateImageOrLabelDimensions_(ii.width,ii.height,Fi[0],Fi[1],ii.width,ii.height,P,F,0,0,Fi[3],Be,!1,mb,!1,tt);if(c&&j==="declutter"&&c.collides(Ri.declutterBox))break e;pi.push([e,t,ii,Ri,1,null,null])}if(pe)for(Hi=0,Ii=Fn.length;Hi<Ii;++Hi){Fi=Fn[Hi],Ar=Fi[4],ii=this.createLabel(Ar,se,pe,""),P=Fi[2],F=ue*ii.height-rt;const Ri=this.calculateImageOrLabelDimensions_(ii.width,ii.height,Fi[0],Fi[1],ii.width,ii.height,P,F,0,0,Fi[3],Be,!1,mb,!1,tt);if(c&&j==="declutter"&&c.collides(Ri.declutterBox))break e;pi.push([e,t,ii,Ri,1,null,null])}c&&j!=="none"&&c.load(pi.map(Oj));for(let Ri=0,on=pi.length;Ri<on;++Ri)this.replayImageOrLabel_.apply(this,pi[Ri])}}++y;break;case fr.END_GEOMETRY:if(s!==void 0){tt=ze[1];const Xn=s(tt,we,j);if(Xn)return Xn}++y;break;case fr.FILL:qe?de++:this.fill_(e),++y;break;case fr.MOVE_TO_LINE_TO:for(x=ze[1],T=ze[2],At=m[x],ke=m[x+1],e.moveTo(At,ke),q=At+.5|0,V=ke+.5|0,x+=2;x<T;x+=2)At=m[x],ke=m[x+1],H=At+.5|0,Q=ke+.5|0,(x==T-2||H!==q||Q!==V)&&(e.lineTo(At,ke),q=H,V=Q);++y;break;case fr.SET_FILL_STYLE:this.alignAndScaleFill_=ze[2],de&&(this.fill_(e),de=0,ve&&(e.stroke(),ve=0)),e.fillStyle=ze[1],++y;break;case fr.SET_STROKE_STYLE:ve&&(e.stroke(),ve=0),this.setStrokeStyle_(e,ze),++y;break;case fr.STROKE:qe?ve++:e.stroke(),++y;break;default:++y;break}}de&&this.fill_(e),ve&&e.stroke()}execute(e,t,i,r,o,s){this.viewRotation_=r,this.execute_(e,t,i,this.instructions,o,void 0,void 0,s)}executeHitDetection(e,t,i,r,o){return this.viewRotation_=i,this.execute_(e,[e.canvas.width,e.canvas.height],t,this.hitDetectionInstructions,!0,r,o)}}const lb=["Polygon","Circle","LineString","Image","Text","Default"],hS=["Image","Text"],lbe=lb.filter(n=>!hS.includes(n));class Fee{constructor(e,t,i,r,o,s,a){this.maxExtent_=e,this.overlaps_=r,this.pixelRatio_=i,this.resolution_=t,this.renderBuffer_=s,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=wd(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(o,a)}clip(e,t){const i=this.getClipCoords(t);e.beginPath(),e.moveTo(i[0],i[1]),e.lineTo(i[2],i[3]),e.lineTo(i[4],i[5]),e.lineTo(i[6],i[7]),e.clip()}createExecutors_(e,t){for(const i in e){let r=this.executorsByZIndex_[i];r===void 0&&(r={},this.executorsByZIndex_[i]=r);const o=e[i];for(const s in o){const a=o[s];r[s]=new abe(this.resolution_,this.pixelRatio_,this.overlaps_,a,t)}}}hasExecutors(e){for(const t in this.executorsByZIndex_){const i=this.executorsByZIndex_[t];for(let r=0,o=e.length;r<o;++r)if(e[r]in i)return!0}return!1}forEachFeatureAtCoordinate(e,t,i,r,o,s){r=Math.round(r);const a=r*2+1,c=t0(this.hitDetectionTransform_,r+.5,r+.5,1/t,-1/t,-i,-e[0],-e[1]),h=!this.hitDetectionContext_;h&&(this.hitDetectionContext_=Il(a,a));const m=this.hitDetectionContext_;m.canvas.width!==a||m.canvas.height!==a?(m.canvas.width=a,m.canvas.height=a):h||m.clearRect(0,0,a,a);let y;this.renderBuffer_!==void 0&&(y=_p(),d3(y,e),Vy(y,t*(this.renderBuffer_+r),y));const M=ube(r);let x;function T(Q,Y,z){const se=m.getImageData(0,0,a,a).data;for(let le=0,pe=M.length;le<pe;le++)if(se[M[le]]>0){if(!s||z==="none"||x!=="Image"&&x!=="Text"||s.includes(Q)){const de=(M[le]-3)/4,ve=r-de%a,Ee=r-(de/a|0),Re=o(Q,Y,ve*ve+Ee*Ee);if(Re)return Re}m.clearRect(0,0,a,a);break}}const P=Object.keys(this.executorsByZIndex_).map(Number);P.sort(Zg);let F,j,q,V,H;for(F=P.length-1;F>=0;--F){const Q=P[F].toString();for(q=this.executorsByZIndex_[Q],j=lb.length-1;j>=0;--j)if(x=lb[j],V=q[x],V!==void 0&&(H=V.executeHitDetection(m,c,i,T,y),H))return H}}getClipCoords(e){const t=this.maxExtent_;if(!t)return null;const i=t[0],r=t[1],o=t[2],s=t[3],a=[i,r,i,s,o,s,o,r];return Zy(a,0,8,2,e,a),a}isEmpty(){return ev(this.executorsByZIndex_)}execute(e,t,i,r,o,s,a){const c=Object.keys(this.executorsByZIndex_).map(Number);c.sort(a?o0e:Zg),s=s||lb;const h=lb.length;for(let m=0,y=c.length;m<y;++m){const M=c[m].toString(),x=this.executorsByZIndex_[M];for(let T=0,P=s.length;T<P;++T){const F=s[T],j=x[F];if(j!==void 0){const q=a===null?void 0:j.getZIndexContext(),V=q?q.getContext():e,H=this.maxExtent_&&F!=="Image"&&F!=="Text";if(H&&(V.save(),this.clip(V,i)),!q||F==="Text"||F==="Image"?j.execute(V,t,i,r,o,a):q.pushFunction(Q=>j.execute(Q,t,i,r,o,a)),H&&V.restore(),q){q.offset();const Q=c[m]*h+lb.indexOf(F);this.deferredZIndexContexts_[Q]||(this.deferredZIndexContexts_[Q]=[]),this.deferredZIndexContexts_[Q].push(q)}}}}this.renderedContext_=e}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const e=this.deferredZIndexContexts_,t=Object.keys(e).map(Number).sort(Zg);for(let i=0,r=t.length;i<r;++i)e[t[i]].forEach(o=>{o.draw(this.renderedContext_),o.clear()}),e[t[i]].length=0}}const hB={};function ube(n){if(hB[n]!==void 0)return hB[n];const e=n*2+1,t=n*n,i=new Array(t+1);for(let o=0;o<=n;++o)for(let s=0;s<=n;++s){const a=o*o+s*s;if(a>t)break;let c=i[a];c||(c=[],i[a]=c),c.push(((n+o)*e+(n+s))*4+3),o>0&&c.push(((n-o)*e+(n+s))*4+3),s>0&&(c.push(((n+o)*e+(n-s))*4+3),o>0&&c.push(((n-o)*e+(n-s))*4+3))}const r=[];for(let o=0,s=i.length;o<s;++o)i[o]&&r.push(...i[o]);return hB[n]=r,r}const bf=.5;function zee(n,e,t,i,r,o,s,a,c){const h=c?VP(r):r,m=n[0]*bf,y=n[1]*bf,M=Il(m,y);M.imageSmoothingEnabled=!1;const x=M.canvas,T=new Kve(M,bf,r,null,s,a,c?s5(l1e(),c):null),P=t.length,F=Math.floor((256*256*256-1)/P),j={};for(let V=1;V<=P;++V){const H=t[V-1],Q=H.getStyleFunction()||i;if(!Q)continue;let Y=Q(H,o);if(!Y)continue;Array.isArray(Y)||(Y=[Y]);const se=(V*F).toString(16).padStart(7,"#00000");for(let le=0,pe=Y.length;le<pe;++le){const de=Y[le],ve=de.getGeometryFunction()(H);if(!ve||!Jl(h,ve.getExtent()))continue;const Ee=de.clone(),Re=Ee.getFill();Re&&Re.setColor(se);const je=Ee.getStroke();je&&(je.setColor(se),je.setLineDash(null)),Ee.setText(void 0);const Ie=de.getImage();if(Ie){const ke=Ie.getImageSize();if(!ke)continue;const we=Il(ke[0],ke[1],void 0,{alpha:!1}),ze=we.canvas;we.fillStyle=se,we.fillRect(0,0,ze.width,ze.height),Ee.setImage(new gx({img:ze,anchor:Ie.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:Ie.getOrigin(),opacity:1,size:Ie.getSize(),scale:Ie.getScale(),rotation:Ie.getRotation(),rotateWithView:Ie.getRotateWithView()}))}const qe=Ee.getZIndex()||0;let tt=j[qe];tt||(tt={},j[qe]=tt,tt.Polygon=[],tt.Circle=[],tt.LineString=[],tt.Point=[]);const At=ve.getType();if(At==="GeometryCollection"){const ke=ve.getGeometriesArrayRecursive();for(let we=0,ze=ke.length;we<ze;++we){const Me=ke[we];tt[Me.getType().replace("Multi","")].push(Me,Ee)}}else tt[At.replace("Multi","")].push(ve,Ee)}}const q=Object.keys(j).map(Number).sort(Zg);for(let V=0,H=q.length;V<H;++V){const Q=j[q[V]];for(const Y in Q){const z=Q[Y];for(let se=0,le=z.length;se<le;se+=2){T.setStyle(z[se+1]);for(let pe=0,de=e.length;pe<de;++pe)T.setTransform(e[pe]),T.drawGeometry(z[se])}}}return M.getImageData(0,0,x.width,x.height)}function jee(n,e,t){const i=[];if(t){const r=Math.floor(Math.round(n[0])*bf),o=Math.floor(Math.round(n[1])*bf),s=(Bl(r,0,t.width-1)+Bl(o,0,t.height-1)*t.width)*4,a=t.data[s],c=t.data[s+1],m=t.data[s+2]+256*(c+256*a),y=Math.floor((256*256*256-1)/e.length);m&&m%y===0&&i.push(e[m/y-1])}return i}const cbe=5;class Abe extends r5{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.staleKeys_=new Array,this.maxStaleKeys=cbe}getStaleKeys(){return this.staleKeys_}prependStaleKey(e){this.staleKeys_.unshift(e),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(e){return Pr()}getData(e){return null}prepareFrame(e){return Pr()}renderFrame(e,t){return Pr()}forEachFeatureAtCoordinate(e,t,i,r,o){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const t=e.target;(t.getState()===Li.LOADED||t.getState()===Li.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return t!=Li.LOADED&&t!=Li.ERROR&&e.addEventListener(Ir.CHANGE,this.boundHandleImageChange_),t==Li.IDLE&&(e.load(),t=e.getState()),t==Li.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}}const Ij=[];let __=null;function hbe(){__=Il(1,1,void 0,{willReadFrequently:!0})}class SU extends Abe{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=wd(),this.pixelTransform=wd(),this.inversePixelTransform=wd(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(e,t,i){__||hbe(),__.clearRect(0,0,1,1);let r;try{__.drawImage(e,t,i,1,1,0,0,1,1),r=__.getImageData(0,0,1,1).data}catch{return __=null,null}return r}getBackground(e){let i=this.getLayer().getBackground();return typeof i=="function"&&(i=i(e.viewState.resolution)),i||void 0}useContainer(e,t,i){const r=this.getLayer().getClassName();let o,s;if(e&&e.className===r&&(!i||e&&e.style.backgroundColor&&uv(fx(e.style.backgroundColor),fx(i)))){const a=e.firstElementChild;a instanceof HTMLCanvasElement&&(s=a.getContext("2d"))}if(s&&p1e(s.canvas.style.transform,t)?(this.container=e,this.context=s,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){o=document.createElement("div"),o.className=r;let a=o.style;a.position="absolute",a.width="100%",a.height="100%",s=Il();const c=s.canvas;o.appendChild(c),a=c.style,a.position="absolute",a.left="0",a.transformOrigin="top left",this.container=o,this.context=s}!this.containerReused&&i&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=i)}clipUnrotated(e,t,i){const r=g1(i),o=NE(i),s=jE(i),a=zE(i);Hu(t.coordinateToPixelTransform,r),Hu(t.coordinateToPixelTransform,o),Hu(t.coordinateToPixelTransform,s),Hu(t.coordinateToPixelTransform,a);const c=this.inversePixelTransform;Hu(c,r),Hu(c,o),Hu(c,s),Hu(c,a),e.save(),e.beginPath(),e.moveTo(Math.round(r[0]),Math.round(r[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.lineTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.clip()}prepareContainer(e,t){const i=e.extent,r=e.viewState.resolution,o=e.viewState.rotation,s=e.pixelRatio,a=Math.round(rs(i)/r*s),c=Math.round(Ju(i)/r*s);t0(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/s,1/s,o,-a/2,-c/2),qJ(this.inversePixelTransform,this.pixelTransform);const h=f1e(this.pixelTransform);if(this.useContainer(t,h,this.getBackground(e)),!this.containerReused){const m=this.context.canvas;m.width!=a||m.height!=c?(m.width=a,m.height=c):this.context.clearRect(0,0,a,c),h!==m.style.transform&&(m.style.transform=h)}}dispatchRenderEvent_(e,t,i){const r=this.getLayer();if(r.hasListener(e)){const o=new Bee(e,this.inversePixelTransform,i,t);r.dispatchEvent(o)}}preRender(e,t){this.frameState=t,!t.declutter&&this.dispatchRenderEvent_(fp.PRERENDER,e,t)}postRender(e,t){t.declutter||this.dispatchRenderEvent_(fp.POSTRENDER,e,t)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new wU),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_(fp.PRERENDER,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(fp.POSTRENDER,this.context,e))}getRenderTransform(e,t,i,r,o,s,a){const c=o/2,h=s/2,m=r/t,y=-m,M=-e[0]+a,x=-e[1];return t0(this.tempTransform,c,h,m,y,-i,M,x)}disposeInternal(){delete this.frameState,super.disposeInternal()}}class dbe extends SU{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=_p(),this.wrappedRenderedExtent_=_p(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(e,t,i){const r=t.extent,o=t.viewState,s=o.center,a=o.resolution,c=o.projection,h=o.rotation,m=c.getExtent(),y=this.getLayer().getSource(),M=this.getLayer().getDeclutter(),x=t.pixelRatio,T=t.viewHints,P=!(T[dl.ANIMATING]||T[dl.INTERACTING]),F=this.context,j=Math.round(rs(r)/a*x),q=Math.round(Ju(r)/a*x),V=y.getWrapX()&&c.canWrapX(),H=V?rs(m):null,Q=V?Math.ceil((r[2]-m[2])/H)+1:1;let Y=V?Math.floor((r[0]-m[0])/H):0;do{let z=this.getRenderTransform(s,a,0,x,j,q,Y*H);t.declutter&&(z=z.slice(0)),e.execute(F,[F.canvas.width,F.canvas.height],z,h,P,i===void 0?lb:i?hS:lbe,i?M&&t.declutter[M]:void 0)}while(++Y<Q)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=Il(this.context.canvas.width,this.context.canvas.height,Ij))}resetDrawContext_(){if(this.opacity_!==1&&this.targetContext_){const e=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=e,l5(this.context),Ij.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(e){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,e,!0)}renderDeferredInternal(e){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(e,t){const i=e.layerStatesArray[e.layerIndex];this.opacity_=i.opacity;const r=e.viewState;this.prepareContainer(e,t);const o=this.context,s=this.replayGroup_;let a=s&&!s.isEmpty();if(!a&&!(this.getLayer().hasListener(fp.PRERENDER)||this.getLayer().hasListener(fp.POSTRENDER)))return this.container;if(this.setDrawContext_(),this.preRender(o,e),r.projection,this.clipped_=!1,a&&i.extent&&this.clipping){const c=zg(i.extent);a=Jl(c,e.extent),this.clipped_=a&&!Fg(c,e.extent),this.clipped_&&this.clipUnrotated(o,e,c)}return a&&this.renderWorlds(s,e,this.getLayer().getDeclutter()?!1:void 0),!e.declutter&&this.clipped_&&o.restore(),this.postRender(o,e),this.renderedRotation_!==r.rotation&&(this.renderedRotation_=r.rotation,this.hitDetectionImageData_=null),e.declutter||this.resetDrawContext_(),this.container}getFeatures(e){return new Promise(t=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const i=this.frameState.size.slice(),r=this.renderedCenter_,o=this.renderedResolution_,s=this.renderedRotation_,a=this.renderedProjection_,c=this.wrappedRenderedExtent_,h=this.getLayer(),m=[],y=i[0]*bf,M=i[1]*bf;m.push(this.getRenderTransform(r,o,s,bf,y,M,0).slice());const x=h.getSource(),T=a.getExtent();if(x.getWrapX()&&a.canWrapX()&&!Fg(T,c)){let P=c[0];const F=rs(T);let j=0,q;for(;P<T[0];)--j,q=F*j,m.push(this.getRenderTransform(r,o,s,bf,y,M,q).slice()),P+=F;for(j=0,P=c[2];P>T[2];)++j,q=F*j,m.push(this.getRenderTransform(r,o,s,bf,y,M,q).slice()),P-=F}this.hitDetectionImageData_=zee(i,m,this.renderedFeatures_,h.getStyleFunction(),c,o,s,aR(o,this.renderedPixelRatio_),null)}t(jee(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,t,i,r,o){if(!this.replayGroup_)return;const s=t.viewState.resolution,a=t.viewState.rotation,c=this.getLayer(),h={},m=function(M,x,T){const P=$r(M),F=h[P];if(F){if(F!==!0&&T<F.distanceSq){if(T===0)return h[P]=!0,o.splice(o.lastIndexOf(F),1),r(M,c,x);F.geometry=x,F.distanceSq=T}}else{if(T===0)return h[P]=!0,r(M,c,x);o.push(h[P]={feature:M,layer:c,geometry:x,distanceSq:T,callback:r})}},y=this.getLayer().getDeclutter();return this.replayGroup_.forEachFeatureAtCoordinate(e,s,a,i,m,y?t.declutter?.[y]?.all().map(M=>M.value):null)}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const t=this.getLayer(),i=t.getSource();if(!i)return!1;const r=e.viewHints[dl.ANIMATING],o=e.viewHints[dl.INTERACTING],s=t.getUpdateWhileAnimating(),a=t.getUpdateWhileInteracting();if(this.ready&&!s&&r||!a&&o)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const c=e.extent,h=e.viewState,m=h.projection,y=h.resolution,M=e.pixelRatio,x=t.getRevision(),T=t.getRenderBuffer();let P=t.getRenderOrder();P===void 0&&(P=Fve);const F=h.center.slice(),j=Vy(c,T*y),q=j.slice(),V=[j.slice()],H=m.getExtent();if(i.getWrapX()&&m.canWrapX()&&!Fg(H,e.extent)){const Re=rs(H),je=Math.max(rs(j)/2,Re);j[0]=H[0]-je,j[2]=H[2]+je,WP(F,m);const Ie=PJ(V[0],m);Ie[0]<H[0]&&Ie[2]<H[2]?V.push([Ie[0]+Re,Ie[1],Ie[2]+Re,Ie[3]]):Ie[0]>H[0]&&Ie[2]>H[2]&&V.push([Ie[0]-Re,Ie[1],Ie[2]-Re,Ie[3]])}if(this.ready&&this.renderedResolution_==y&&this.renderedRevision_==x&&this.renderedRenderOrder_==P&&this.renderedFrameDeclutter_===!!e.declutter&&Fg(this.wrappedRenderedExtent_,j))return uv(this.renderedExtent_,q)||(this.hitDetectionImageData_=null,this.renderedExtent_=q),this.renderedCenter_=F,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const Q=new Lee(Pee(y,M),j,y,M);let Y;for(let Re=0,je=V.length;Re<je;++Re)i.loadFeatures(V[Re],y,m);const z=aR(y,M);let se=!0;const le=((Re,je)=>{let Ie;const qe=Re.getStyleFunction()||t.getStyleFunction();if(qe&&(Ie=qe(Re,y)),Ie){const tt=this.renderFeature(Re,z,Ie,Q,Y,this.getLayer().getDeclutter(),je);se=se&&!tt}}),pe=VP(j),de=i.getFeaturesInExtent(pe);P&&de.sort(P);for(let Re=0,je=de.length;Re<je;++Re)le(de[Re],Re);this.renderedFeatures_=de,this.ready=se;const ve=Q.finish(),Ee=new Fee(j,y,M,i.getOverlaps(),ve,t.getRenderBuffer(),!!e.declutter);return this.renderedResolution_=y,this.renderedRevision_=x,this.renderedRenderOrder_=P,this.renderedFrameDeclutter_=!!e.declutter,this.renderedExtent_=q,this.wrappedRenderedExtent_=j,this.renderedCenter_=F,this.renderedProjection_=m,this.renderedPixelRatio_=M,this.replayGroup_=Ee,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,i,r,o,s,a){if(!i)return!1;let c=!1;if(Array.isArray(i))for(let h=0,m=i.length;h<m;++h)c=cS(r,e,i[h],t,this.boundHandleStyleImageChange_,o,s,a)||c;else c=cS(r,e,i,t,this.boundHandleStyleImageChange_,o,s,a);return c}}class EU extends xU{constructor(e){super(e)}createRenderer(){return new dbe(this)}}class fbe extends bU{constructor(e,t,i,r,o){const s=o!==void 0?Li.IDLE:Li.LOADED;super(e,t,i,s),this.loader_=o!==void 0?o:null,this.canvas_=r,this.error_=null}getError(){return this.error_}handleLoad_(e){e?(this.error_=e,this.state=Li.ERROR):this.state=Li.LOADED,this.changed()}load(){this.state==Li.IDLE&&(this.state=Li.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))}getImage(){return this.canvas_}}class p5 extends i5{constructor(e,t,i){super(),i=i||{},this.tileCoord=e,this.state=t,this.key="",this.transition_=i.transition===void 0?250:i.transition,this.transitionStarts_={},this.interpolate=!!i.interpolate}changed(){this.dispatchEvent(Ir.CHANGE)}release(){this.setState(ai.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==ai.EMPTY){if(this.state!==ai.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}}load(){Pr()}getAlpha(e,t){if(!this.transition_)return 1;let i=this.transitionStarts_[e];if(!i)i=t,this.transitionStarts_[e]=i;else if(i===-1)return 1;const r=t-i+1e3/60;return r>=this.transition_?1:KJ(r/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}disposeInternal(){this.release(),super.disposeInternal()}}class Nee extends p5{constructor(e,t,i,r,o,s){super(e,t,s),this.crossOrigin_=r,this.src_=i,this.key=i,this.image_=new Image,r!==null&&(this.image_.crossOrigin=r),this.unlisten_=null,this.tileLoadFunction_=o}getImage(){return this.image_}setImage(e){this.image_=e,this.state=ai.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=ai.ERROR,this.unlistenImage_(),this.image_=pbe(),this.changed()}handleImageLoad_(){const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=ai.LOADED:this.state=ai.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==ai.ERROR&&(this.state=ai.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==ai.IDLE&&(this.state=ai.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=nve(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}}function pbe(){const n=Il(1,1);return n.fillStyle="rgba(0,0,0,0)",n.fillRect(0,0,1,1),n.canvas}const jA={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};class mbe extends Rm{constructor(e){super(),this.on,this.once,this.un,this.options=e,this.id=e.id,this.insertFirst=e.insertFirst!==void 0?e.insertFirst:!0,this.stopEvent=e.stopEvent!==void 0?e.stopEvent:!0,this.element=document.createElement("div"),this.element.className=e.className!==void 0?e.className:"ol-overlay-container "+F1e,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=e.autoPan===!0?{}:e.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(jA.ELEMENT,this.handleElementChanged),this.addChangeListener(jA.MAP,this.handleMapChanged),this.addChangeListener(jA.OFFSET,this.handleOffsetChanged),this.addChangeListener(jA.POSITION,this.handlePositionChanged),this.addChangeListener(jA.POSITIONING,this.handlePositioningChanged),e.element!==void 0&&this.setElement(e.element),this.setOffset(e.offset!==void 0?e.offset:[0,0]),this.setPositioning(e.positioning||"top-left"),e.position!==void 0&&this.setPosition(e.position)}getElement(){return this.get(jA.ELEMENT)}getId(){return this.id}getMap(){return this.get(jA.MAP)||null}getOffset(){return this.get(jA.OFFSET)}getPosition(){return this.get(jA.POSITION)}getPositioning(){return this.get(jA.POSITIONING)}handleElementChanged(){see(this.element);const e=this.getElement();e&&this.element.appendChild(e)}handleMapChanged(){this.mapPostrenderListenerKey&&(this.element?.remove(),Ta(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const e=this.getMap();if(e){this.mapPostrenderListenerKey=Vo(e,Z0.POSTRENDER,this.render,this),this.updatePixelPosition();const t=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer();this.insertFirst?t.insertBefore(this.element,t.childNodes[0]||null):t.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(e){this.set(jA.ELEMENT,e)}setMap(e){this.set(jA.MAP,e)}setOffset(e){this.set(jA.OFFSET,e)}setPosition(e){this.set(jA.POSITION,e)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(e){const t=this.getMap();if(!t||!t.getTargetElement()||!this.get(jA.POSITION))return;const i=this.getRect(t.getTargetElement(),t.getSize()),r=this.getElement(),o=this.getRect(r,[j1e(r),N1e(r)]);e=e||{};const s=e.margin===void 0?20:e.margin;if(!Fg(i,o)){const a=o[0]-i[0],c=i[2]-o[2],h=o[1]-i[1],m=i[3]-o[3],y=[0,0];if(a<0?y[0]=a-s:c<0&&(y[0]=Math.abs(c)+s),h<0?y[1]=h-s:m<0&&(y[1]=Math.abs(m)+s),y[0]!==0||y[1]!==0){const M=t.getView().getCenterInternal(),x=t.getPixelFromCoordinateInternal(M);if(!x)return;const T=[x[0]+y[0],x[1]+y[1]],P=e.animation||{};t.getView().animateInternal({center:t.getCoordinateFromPixelInternal(T),duration:P.duration,easing:P.easing})}}}getRect(e,t){const i=e.getBoundingClientRect(),r=i.left+window.pageXOffset,o=i.top+window.pageYOffset;return[r,o,r+t[0],o+t[1]]}setPositioning(e){this.set(jA.POSITIONING,e)}setVisible(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)}updatePixelPosition(){const e=this.getMap(),t=this.getPosition();if(!e||!e.isRendered()||!t){this.setVisible(!1);return}const i=e.getPixelFromCoordinate(t),r=e.getSize();this.updateRenderedPosition(i,r)}updateRenderedPosition(e,t){const i=this.element.style,r=this.getOffset(),o=this.getPositioning();this.setVisible(!0);const s=`${e[0]+r[0]}px`,a=`${e[1]+r[1]}px`;let c="0%",h="0%";o=="bottom-right"||o=="center-right"||o=="top-right"?c="-100%":(o=="bottom-center"||o=="center-center"||o=="top-center")&&(c="-50%"),o=="bottom-left"||o=="bottom-center"||o=="bottom-right"?h="-100%":(o=="center-left"||o=="center-center"||o=="center-right")&&(h="-50%");const m=`translate(${c}, ${h}) translate(${s}, ${a})`;this.rendered.transform_!=m&&(this.rendered.transform_=m,i.transform=m)}getOptions(){return this.options}}class OU{constructor(e,t,i,r){this.minX=e,this.maxX=t,this.minY=i,this.maxY=r}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function jC(n,e,t,i,r){return r!==void 0?(r.minX=n,r.maxX=e,r.minY=t,r.maxY=i,r):new OU(n,e,t,i)}const kj=[];class gbe extends p5{constructor(e,t,i,r,o){super(e,t,{transition:0}),this.context_=null,this.executorGroups={},this.loadingSourceTiles=0,this.hitDetectionImageData={},this.replayState_={},this.sourceTiles=[],this.errorTileKeys={},this.wantedResolution,this.getSourceTiles=r.bind(void 0,this),this.removeSourceTiles_=o,this.wrappedTileCoord=i}getContext(){return this.context_||(this.context_=Il(1,1,kj)),this.context_}hasContext(){return!!this.context_}getImage(){return this.hasContext()?this.getContext().canvas:null}getReplayState(e){const t=$r(e);return t in this.replayState_||(this.replayState_[t]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[t]}load(){this.getSourceTiles()}release(){this.context_&&(l5(this.context_),kj.push(this.context_.canvas),this.context_=null),this.removeSourceTiles_(this),this.sourceTiles.length=0,super.release()}}let Gee=class extends p5{constructor(e,t,i,r,o,s){super(e,t,s),this.extent=null,this.format_=r,this.features_=null,this.loader_,this.projection=null,this.resolution,this.tileLoadFunction_=o,this.url_=i,this.key=i}getTileUrl(){return this.url_}getFormat(){return this.format_}getFeatures(){return this.features_}load(){this.state==ai.IDLE&&(this.setState(ai.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}onLoad(e,t){this.setFeatures(e)}onError(){this.setState(ai.ERROR)}setFeatures(e){this.features_=e,this.setState(ai.LOADED)}setLoader(e){this.loader_=e}};const Wee="https://api.mapbox.com";function BU(n){const e="mapbox://";return n.indexOf(e)!==0?"":n.slice(e.length)}function ybe(n,e,t){if(typeof n=="string")return[{id:"default",url:Tj(n,e,t)}];for(const i of n)i.url=Tj(i.url,e,t);return n}function Tj(n,e,t){const i=BU(n);if(!i)return decodeURI(new URL(n,t).href);const r="sprites/";if(i.indexOf(r)!==0)throw new Error(`unexpected sprites url: ${n}`);const o=i.slice(r.length);return`${Wee}/styles/v1/${o}/sprite?access_token=${e}`}function dS(n,e){const t=BU(n);if(!t)return decodeURI(new URL(n,location.href).href);const i="styles/";if(t.indexOf(i)!==0)throw new Error(`unexpected style url: ${n}`);const r=t.slice(i.length);return`${Wee}/styles/v1/${r}?&access_token=${e}`}const vbe=["a","b","c","d"];function cw(n,e,t,i){const r=new URL(n,i||location.href),o=BU(n);if(!o)return e?(r.searchParams.has(t)||r.searchParams.set(t,e),[decodeURI(r.href)]):[decodeURI(r.href)];if(o==="mapbox.satellite"){const s=window.devicePixelRatio>=1.5?"@2x":"";return[`https://api.mapbox.com/v4/${o}/{z}/{x}/{y}${s}.webp?access_token=${e}`]}return vbe.map(s=>`https://${s}.tiles.mapbox.com/v4/${o}/{z}/{x}/{y}.vector.pbf?access_token=${e}`)}const vm=Object.freeze({}),Rj={},Dj={};let bbe=0;function IU(n){return n.id||(n.id=bbe++),n.id}function Cbe(n,e){return IU(n)+"."+$r(e)}function Qee(n){let e=Rj[n.id];return e||(e={},Rj[IU(n)]=e),e}function _be(n){let e=Dj[n.id];return e||(e={},Dj[IU(n)]=e),e}function dB(n){return n*Math.PI/180}const Jg=(function(){const n=[];for(let e=78271.51696402048;n.length<=24;e/=2)n.push(e);return n})();function i6(n,e){if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof OffscreenCanvas<"u")return new OffscreenCanvas(n,e);const t=document.createElement("canvas");return t.width=n,t.height=e,t}function kU(n,e){let t=0;const i=e.length;for(;t<i;++t)if(e[t]<n&&t+1<i){const o=e[t]/e[t+1];return t+Math.log(e[t]/n)/Math.log(o)}return i-1}function Y2(n,e){const t=Math.floor(n),i=Math.pow(2,n-t);return e[t]/i}const NC={};function yx(n,e,t={},i){if(e in NC)return i&&(i.url=NC[e][0].url),NC[e][1];const r=t.transformRequest&&t.transformRequest(e,n)||e,o=function(c){return delete NC[e],Promise.reject(new Error("Error fetching source "+e))},s=function(c){return delete NC[e],c.ok?c.json():Promise.reject(new Error("Error fetching source "+e))},a=hx(()=>r).then(c=>c instanceof Response?(i&&(i.url=c.url),s(c)):(c instanceof Request||(c=new Request(c)),c.headers.get("Accept")||c.headers.set("Accept","application/json"),i&&(i.url=c.url),fetch(c).then(s).catch(o))).catch(o);return NC[e]=[r,a],a}function qee(n,e){if(typeof n=="string")if(n.trim().startsWith("{"))try{const t=JSON.parse(n);return Promise.resolve(t)}catch(t){return Promise.reject(t)}else return n=dS(n,e.accessToken),yx("Style",n,e);else return Promise.resolve(n)}const Pj={};function Yee(n,e,t={}){const i=[e,JSON.stringify(n)].toString();let r=Pj[i];if(!r||t.transformRequest){let o;t.transformRequest&&(o=(a,c)=>{const h=t.transformRequest&&t.transformRequest(c,"Tiles")||c;if(a instanceof Gee)a.setLoader((m,y,M)=>{const x=function(T){T.arrayBuffer().then(P=>{const j=a.getFormat().readFeatures(P,{extent:m,featureProjection:M});a.setFeatures(j)})};hx(()=>h).then(T=>{if(T instanceof Response)return x(T);fetch(T).then(x).catch(P=>a.setState(ai.ERROR))}).catch(T=>a.setState(ai.ERROR))});else{const m=a.getImage();hx(()=>h).then(y=>{if(typeof y=="string"){m.src=y;return}const M=x=>x.blob().then(T=>{const P=URL.createObjectURL(T);m.addEventListener("load",()=>URL.revokeObjectURL(P)),m.addEventListener("error",()=>URL.revokeObjectURL(P)),m.src=P});if(y instanceof Response)return M(y);fetch(y).then(M).catch(x=>a.setState(ai.ERROR))}).catch(y=>a.setState(ai.ERROR))}});const s=n.url;if(s&&!n.tiles){const a=cw(s,t.accessToken,t.accessTokenParam||"access_token",e||location.href);if(s.startsWith("mapbox://"))r=Promise.resolve({tileJson:Object.assign({},n,{url:void 0,tiles:a}),tileLoadFunction:o});else{const c={};r=yx("Source",a[0],t,c).then(function(h){return h.tiles=h.tiles.map(function(m){return h.scheme==="tms"&&(m=m.replace("{y}","{-y}")),cw(m,t.accessToken,t.accessTokenParam||"access_token",c.url)[0]}),Promise.resolve({tileJson:h,tileLoadFunction:o})})}}else n.tiles?(n=Object.assign({},n,{tiles:n.tiles.map(function(a){return n.scheme==="tms"&&(a=a.replace("{y}","{-y}")),cw(a,t.accessToken,t.accessTokenParam||"access_token",e||location.href)[0]})}),r=Promise.resolve({tileJson:Object.assign({},n),tileLoadFunction:o})):r=Promise.reject(new Error("source has no `tiles` nor `url`"));Pj[i]=r}return r}function Uj(n,e,t,i){const r=[2*t*e.pixelRatio+e.width,2*t*e.pixelRatio+e.height],o=i6(r[0],r[1]),s=o.getContext("2d");s.drawImage(n,e.x,e.y,e.width,e.height,t*e.pixelRatio,t*e.pixelRatio,e.width,e.height);const a=s.getImageData(0,0,r[0],r[1]);s.globalCompositeOperation="destination-over",s.fillStyle=`rgba(${i.r*255},${i.g*255},${i.b*255},${i.a})`;const c=a.data;for(let h=0,m=a.width;h<m;++h)for(let y=0,M=a.height;y<M;++y){const x=(y*m+h)*4;c[x+3]>0&&s.arc(h,y,t*e.pixelRatio,0,2*Math.PI)}return s.fill(),o}function xbe(n,e,t){const i=Math.max(0,Math.min(1,(t-n)/(e-n)));return i*i*(3-2*i)}function Kj(n,e,t){const i=i6(e.width,e.height),r=i.getContext("2d");r.drawImage(n,e.x,e.y,e.width,e.height,0,0,e.width,e.height);const o=r.getImageData(0,0,e.width,e.height),s=o.data;for(let a=0,c=o.width;a<c;++a)for(let h=0,m=o.height;h<m;++h){const y=(h*c+a)*4,M=s[y+3]/255,x=.75,T=.1,P=xbe(x-T,x+T,M);P>0?(s[y+0]=Math.round(255*t.r*P),s[y+1]=Math.round(255*t.g*P),s[y+2]=Math.round(255*t.b*P),s[y+3]=Math.round(255*P)):s[y+3]=0}return r.putImageData(o,0,0),i}const Mbe=Array(256).join("");function lR(n,e){if(e>=.05){let t="";const i=n.split(`
`),r=Mbe.slice(0,Math.round(e/.1));for(let o=0,s=i.length;o<s;++o)o>0&&(t+=`
`),t+=i[o].split("").join(r);return t}return n}let fB;function $ee(){return fB||(fB=i6(1,1).getContext("2d")),fB}function eb(n,e){return $ee().measureText(n).width+(n.length-1)*e}const fS={};ab.on("propertychange",()=>{for(const n in fS)delete fS[n]});function uR(n,e,t,i){if(n.indexOf(`
`)!==-1){const s=n.split(`
`),a=[];for(let c=0,h=s.length;c<h;++c)a.push(uR(s[c],e,t,i));return a.join(`
`)}const r=t+","+e+","+n+","+i;let o=fS[r];if(!o){const s=n.split(" ");if(s.length>1){const a=$ee();a.font=e;const h=a.measureText("M").width*t;let m="";const y=[];for(let M=0,x=s.length;M<x;++M){const T=s[M],P=m+(m?" ":"")+T;eb(P,i)<=h?m=P:(m&&y.push(m),m=T)}m&&y.push(m);for(let M=0,x=y.length;M<x&&x>1;++M){const T=y[M];if(eb(T,i)<h*.35){const P=M>0?eb(y[M-1],i):1/0,F=M<x-1?eb(y[M+1],i):1/0;y.splice(M,1),x-=1,P<F?(y[M-1]+=" "+T,M-=1):y[M]=T+" "+y[M]}}for(let M=0,x=y.length-1;M<x;++M){const T=y[M],P=y[M+1];if(eb(T,i)>h*.7&&eb(P,i)<h*.6){const F=T.split(" "),j=F.pop();eb(j,i)<h*.2&&(y[M]=F.join(" "),y[M+1]=j+" "+P),x-=1}}o=y.join(`
`)}else o=n;o=lR(o,i),fS[r]=o}return o}const wbe=["Arial","Courier New","Times New Roman","Verdana","sans-serif","serif","monospace","cursive","fantasy"],Lj={};function Sbe(n,e="https://cdn.jsdelivr.net/npm/@fontsource/{font-family}/{fontweight}{-fontstyle}.css"){let t;for(let i=0,r=n.length;i<r;++i){const o=n[i];if(o in Lj)continue;Lj[o]=!0;const a=z9(o,16).split(" ");t||(t=[]),t.push([a.slice(3).join(" ").replace(/"/g,""),a[1],a[0]])}return t&&(async()=>{await document.fonts.ready;for(let i=0,r=t.length;i<r;++i){const o=t[i],s=o[0];if(wbe.includes(s))continue;const a=o[1],c=o[2];if(!(await document.fonts.load(`${c} ${a} 16px "${s}"`)).some(m=>m.family.replace(/^['"]|['"]$/g,"").toLowerCase()===s.toLowerCase()&&m.weight==a&&m.style===c)){const m=e.replace("{font-family}",s.replace(/ /g,"-").toLowerCase()).replace("{Font+Family}",s.replace(/ /g,"+")).replace("{fontweight}",a).replace("{-fontstyle}",c.replace("normal","").replace(/(.+)/,"-$1")).replace("{fontstyle}",c);if(!document.querySelector('link[href="'+m+'"]')){const y=document.createElement("link");y.href=m,y.rel="stylesheet",document.head.appendChild(y)}}}})(),n}const Ebe={Point:1,MultiPoint:1,LineString:2,MultiLineString:2,Polygon:3,MultiPolygon:3},Obe={center:[.5,.5],left:[0,.5],right:[1,.5],top:[.5,0],bottom:[.5,1],"top-left":[0,0],"top-right":[1,0],"bottom-left":[0,1],"bottom-right":[1,1]},Bbe=function(n,e){const t=Wge(n,e);if(t.result==="error")throw new Error(t.value.map(i=>`${i.key}: ${i.message}`).join(", "));return t.value},Sf={zoom:0,distanceFromCenter:0};_f.register(PE,{..._f.definitions,pitch:[{kind:"number"},[],n=>Sf.pitch||90],"distance-from-center":[{kind:"number"},[],n=>Sf.distanceFromCenter||0]});let sM,pB;function Yi(n,e,t,i,r,o){const s=n.id;r||(r={},console.warn("No functionCache provided to getValue()")),r[s]||(r[s]={});const a=r[s];if(!a[t]){let c=(n[e]||vm)[t];const h=i0e[`${e}_${n.type}`][t];c===void 0&&(c=h.default);let m=Gge(c);if(!m&&bJ(c)&&(c=Zge(c,h),m=!0),m){const y=Bbe(c,h);a[t]=y.evaluate.bind(y)}else h.type=="color"&&(c=Vs.parse(c)),a[t]=function(){return c}}return a[t](Sf,i,o)}function Fj(n,e,t,i){return Yi(n,"layout",`${t}-allow-overlap`,e,i)?Yi(n,"layout",`${t}-ignore-placement`,e,i)?"none":"obstacle":"declutter"}function Ibe(n,e,t,i){if(i||console.warn("No filterCache provided to evaluateFilter()"),!(n in i))try{i[n]=$ge(e).filter}catch(r){console.warn("Filter will evaluate to false: "+r.message),i[n]=function(){return!1}}return i[n](Sf,t)}function Sy(n,e){if(n){if(n.a===0||e===0)return;const t=n.a;return e=e===void 0?1:e,t===0?"transparent":"rgba("+Math.round(n.r*255/t)+","+Math.round(n.g*255/t)+","+Math.round(n.b*255/t)+","+t*e+")"}return n}const kbe=/\{[^{}}]*\}/g;function mB(n,e){return n.replace(kbe,function(t){return e[t.slice(1,-1)]||""})}function zj(n,e){let t=n.split(":")[0];return t===n&&(t="default"),e[t]}const Tbe={};function Rbe(n,e,t,i=Jg,r=void 0,o=void 0,s=void 0,a=void 0){if(typeof e=="string"&&(e=JSON.parse(e)),e.version!=8)throw new Error("glStyle version 8 required.");Tbe[Cbe(e,n)]=Array.from(arguments);const c={};(typeof o=="string"||o instanceof Request||o instanceof Response||o instanceof Promise)&&(o={default:o});for(const Q in o){const Y=o[Q];hx(()=>Y).then(async z=>{let se;if(typeof Image<"u"){const le=new Image;if(typeof z=="string")le.crossOrigin="anonymous",le.src=z;else{let pe;z instanceof Request?pe=await fetch(z):z instanceof Response&&(pe=z);const de=await pe.blob();se=URL.createObjectURL(de),le.src=se}le.addEventListener("load",function pe(){le.removeEventListener("load",pe),c[Q]={image:le,size:[le.width,le.height]},n.changed(),se&&URL.revokeObjectURL(se)}),le.addEventListener("error",function pe(){URL.revokeObjectURL(se),le.removeEventListener("error",pe)})}else if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope){const le=self;le.postMessage({action:"loadImage",src:z}),le.addEventListener("message",function(de){de.data.action==="imageLoaded"&&de.data.src===z&&(c[Q]={image:de.data.image,size:[de.data.image.width,de.data.image.height]})})}})}const h=eJ(e.layers),m={},y=[],M={},x={},T=Qee(e),P=_be(e);let F;for(let Q=0,Y=h.length;Q<Y;++Q){const z=h[Q],se=z.id;if(typeof t=="string"&&z.source==t||Array.isArray(t)&&t.indexOf(se)!==-1){const le=z["source-layer"];if(F){if(z.source!==F)throw new Error(`Layer "${se}" does not use source "${F}`)}else{F=z.source;const de=e.sources[F];if(!de)throw new Error(`Source "${F}" is not defined`);const ve=de.type;if(ve!=="vector"&&ve!=="geojson")throw new Error(`Source "${F}" is not of type "vector" or "geojson", but "${ve}"`)}let pe=m[le];pe||(pe=[],m[le]=pe),pe.push({layer:z,index:Q}),y.push(se)}}const j=new Ly,q=new n1,V=[],H=function(Q,Y,z){const se=n.getSource?.()?.format_?.layerName_??"mvt:layer",le=Q.getProperties(),pe=m[le[se]];if(!pe)return;let de=i.indexOf(Y);de==-1&&(de=kU(Y,i)),Sf.zoom=de,Sf.distanceFromCenter=0;const ve=Q.getGeometry(),Ee=Ebe[ve.getType()],Re=n.get("map");if(Re&&Re instanceof t6&&Ee===1){const tt=Re.getSize();if(tt){const At=Re.getView().getCenter(),ke=Ef(ve.getExtent());Sf.distanceFromCenter=B0e(At,ke)/Y/tt[1]}}const je={id:Q.getId(),properties:le,type:Ee},Ie=n.get("mapbox-featurestate")[Q.getId()];let qe=-1;for(let tt=0,At=pe.length;tt<At;++tt){const ke=pe[tt],we=ke.layer,ze=we.id;if(z!==void 0&&z!==ze)continue;const Me=we.layout||vm,lt=we.paint||vm;if(Me.visibility==="none"||"minzoom"in we&&de<we.minzoom||"maxzoom"in we&&de>=we.maxzoom)continue;const nt=we.filter;if(!nt||Ibe(ze,nt,je,P)){let bt,Bt,Ke,Te,Se,We;const at=ke.index;if(Ee==3&&(we.type=="fill"||we.type=="fill-extrusion"))if(Bt=Yi(we,"paint",we.type+"-opacity",je,T,Ie),we.type+"-pattern"in lt){const Un=Yi(we,"paint",we.type+"-pattern",je,T,Ie);if(Un){const It=typeof Un=="string"?mB(Un,le):Un.toString(),_e=zj(It,c);if(r&&r[It]&&_e){++qe,We=V[qe],(!We||!We.getFill()||We.getStroke()||We.getText())&&(We=new mf({fill:new n1}),V[qe]=We),Ke=We.getFill(),We.setZIndex(at);const oe=It+"."+Bt;let ee=x[oe];if(!ee){const ne=r[It],ue=i6(ne.width,ne.height),be=ue.getContext("2d");be.globalAlpha=Bt,be.drawImage(_e.image,ne.x,ne.y,ne.width,ne.height,0,0,ne.width,ne.height),ee=be.createPattern(ue,"repeat"),x[oe]=ee}Ke.setColor(ee)}}}else bt=Sy(Yi(we,"paint",we.type+"-color",je,T,Ie),Bt),we.type+"-outline-color"in lt&&(Se=Sy(Yi(we,"paint",we.type+"-outline-color",je,T,Ie),Bt)),Se||(Se=bt),(bt||Se)&&(++qe,We=V[qe],(!We||bt&&!We.getFill()||!bt&&We.getFill()||Se&&!We.getStroke()||!Se&&We.getStroke()||We.getText())&&(We=new mf({fill:bt?new n1:void 0,stroke:Se?new Ly:void 0}),V[qe]=We),bt&&(Ke=We.getFill(),Ke.setColor(bt)),Se&&(Te=We.getStroke(),Te.setColor(Se),Te.setWidth(.5)),We.setZIndex(at));if(Ee!=1&&we.type=="line"){"line-pattern"in lt?bt=void 0:bt=Sy(Yi(we,"paint","line-color",je,T,Ie),Yi(we,"paint","line-opacity",je,T,Ie));const Un=Yi(we,"paint","line-width",je,T,Ie);bt&&Un>0&&(++qe,We=V[qe],(!We||!We.getStroke()||We.getFill()||We.getText())&&(We=new mf({stroke:new Ly}),V[qe]=We),Te=We.getStroke(),Te.setLineCap(Yi(we,"layout","line-cap",je,T,Ie)),Te.setLineJoin(Yi(we,"layout","line-join",je,T,Ie)),Te.setMiterLimit(Yi(we,"layout","line-miter-limit",je,T,Ie)),Te.setColor(bt),Te.setWidth(Un),Te.setLineDash(lt["line-dasharray"]?Yi(we,"paint","line-dasharray",je,T,Ie).map(function(It){return It*Un}):null),We.setZIndex(at))}let it=!1,ft=null,Dt=0,Ot,Jt,Dn;if((Ee==1||Ee==2)&&"icon-image"in Me){const Un=Yi(we,"layout","icon-image",je,T,Ie);if(Un){Ot=typeof Un=="string"?mB(Un,le):Un.toString();let It;const _e=a?a(n,Ot):void 0,oe=zj(Ot,c);if(r&&r[Ot]&&oe||_e){const ee=Yi(we,"layout","icon-rotation-alignment",je,T,Ie);if(Ee==2){const ne=Q.getGeometry();if(ne.getFlatMidpoint||ne.getFlatMidpoints){const ue=ne.getExtent();if(Math.sqrt(Math.max(Math.pow((ue[2]-ue[0])/Y,2),Math.pow((ue[3]-ue[1])/Y,2)))>150){const Le=ne.getType()==="MultiLineString"?ne.getFlatMidpoints():ne.getFlatMidpoint();if(pB||(sM=[NaN,NaN],pB=new QA("Point",sM,[],2,{},void 0)),It=pB,sM[0]=Le[0],sM[1]=Le[1],Yi(we,"layout","symbol-placement",je,T,Ie)==="line"&&ee==="map"){const rt=ne.getStride(),ye=ne.getFlatCoordinates();for(let Be=0,v=ye.length-rt;Be<v;Be+=rt){const yt=ye[Be],Mt=ye[Be+1],Pt=ye[Be+rt],en=ye[Be+rt+1],mt=Math.min(yt,Pt),Qn=Math.max(yt,Pt),Xn=Le[0],Cn=Le[1],Fn=(en-Mt)*(Xn-yt)-(Pt-yt)*(Cn-Mt);if(Math.abs(Fn)<.001&&Xn<=Qn&&Xn>=mt){Dt=Math.atan2(Mt-en,Pt-yt);break}}}}}}if(Ee!==2||It){const ne=Yi(we,"layout","icon-size",je,T,Ie),ue=lt["icon-color"]!==void 0?Yi(we,"paint","icon-color",je,T,Ie):null;if(!ue||ue.a!==0){const be=Yi(we,"paint","icon-halo-color",je,T,Ie),Le=Yi(we,"paint","icon-halo-width",je,T,Ie);let Ve=`${Ot}.${ne}.${Le}.${be}`;if(ue!==null&&(Ve+=`.${ue}`),Jt=M[Ve],!Jt){const rt=Fj(we,je,"icon",T);let ye;"icon-offset"in Me&&(ye=Yi(we,"layout","icon-offset",je,T,Ie).slice(0),ye[0]*=ne,ye[1]*=-ne);let Be=ue?[ue.r*255,ue.g*255,ue.b*255,ue.a]:void 0;if(_e){const v={color:Be,rotateWithView:ee==="map",displacement:ye,declutterMode:rt,scale:ne};typeof _e=="string"?v.src=_e:(v.img=_e,v.imgSize=[_e.width,_e.height]),Jt=new gx(v)}else{const v=r[Ot];let yt,Mt,Pt;if(Le)v.sdf?(yt=Uj(Kj(oe.image,v,ue||[0,0,0,1]),{x:0,y:0,width:v.width,height:v.height,pixelRatio:v.pixelRatio},Le,be),Be=void 0):yt=Uj(oe.image,v,Le,be);else{if(v.sdf&&!oe.unSDFed){const en=Kj(oe.image,{x:0,y:0,width:oe.size[0],height:oe.size[1]},{r:1,g:1,b:1});oe.image=en,oe.unSDFed=!0}yt=oe.image,Mt=[v.width,v.height],Pt=[v.x,v.y]}Jt=new gx({color:Be,img:yt,imgSize:oe.size,size:Mt,offset:Pt,rotateWithView:ee==="map",scale:ne/v.pixelRatio,displacement:ye,declutterMode:rt})}M[Ve]=Jt}}Jt&&(++qe,We=V[qe],(!We||!We.getImage()||We.getFill()||We.getStroke())&&(We=new mf,V[qe]=We),We.setGeometry(It),Jt.setRotation(Dt+dB(Yi(we,"layout","icon-rotate",je,T,Ie))),Jt.setOpacity(Yi(we,"paint","icon-opacity",je,T,Ie)),Jt.setAnchor(Obe[Yi(we,"layout","icon-anchor",je,T,Ie)]),We.setImage(Jt),ft=We.getText(),We.setText(void 0),We.setZIndex(at),it=!0,Dn=!1)}else Dn=!0}}}if(Ee==1&&we.type==="circle"){++qe,We=V[qe],(!We||!We.getImage()||We.getFill()||We.getStroke())&&(We=new mf,V[qe]=We);const Un="circle-radius"in lt?Yi(we,"paint","circle-radius",je,T,Ie):5,It=Sy(Yi(we,"paint","circle-stroke-color",je,T,Ie),Yi(we,"paint","circle-stroke-opacity",je,T,Ie)),_e=Yi(we,"paint","circle-translate",je,T,Ie),oe=Sy(Yi(we,"paint","circle-color",je,T,Ie),Yi(we,"paint","circle-opacity",je,T,Ie)),ee=Yi(we,"paint","circle-stroke-width",je,T,Ie),ne=Un+"."+It+"."+oe+"."+ee+"."+_e[0]+"."+_e[1];Jt=M[ne],Jt||(Jt=new A5({radius:Un,displacement:[_e[0],-_e[1]],stroke:It&&ee>0?new Ly({width:ee,color:It}):void 0,fill:oe?new n1({color:oe}):void 0,declutterMode:"none"}),M[ne]=Jt),We.setImage(Jt),ft=We.getText(),We.setText(void 0),We.setGeometry(void 0),We.setZIndex(at),it=!0}let Pn,oi,In,Tn,dn,$n;if("text-field"in Me){Tn=Math.round(Yi(we,"layout","text-size",je,T,Ie));const Un=Yi(we,"layout","text-font",je,T,Ie);In=Yi(we,"layout","text-line-height",je,T,Ie),oi=z9(s?s(Un,e.metadata?e.metadata["ol:webfonts"]:void 0):Un,Tn,In),oi.includes("sans-serif")||(oi+=",sans-serif"),dn=Yi(we,"layout","text-letter-spacing",je,T,Ie),$n=Yi(we,"layout","text-max-width",je,T,Ie);const It=Yi(we,"layout","text-field",je,T,Ie);typeof It=="object"&&It.sections?It.sections.length===1?Pn=It.toString():Pn=It.sections.reduce((_e,oe,ee)=>{const ne=oe.fontStack?oe.fontStack.split(","):Un,ue=z9(s?s(ne):ne,Tn*(oe.scale||1),In);let be=oe.text;if(be===`
`)return _e.push(`
`,""),_e;if(Ee==2)return _e.push(lR(be,dn),ue),_e;be=uR(be,ue,$n,dn).split(`
`);for(let Le=0,Ve=be.length;Le<Ve;++Le)Le>0&&_e.push(`
`,""),_e.push(be[Le],ue);return _e},[]):Pn=mB(It,le).trim(),Bt=Yi(we,"paint","text-opacity",je,T,Ie)}if(Pn&&Bt&&!Dn){it||(++qe,We=V[qe],(!We||!We.getText()||We.getFill()||We.getStroke())&&(We=new mf,V[qe]=We),We.setImage(void 0),We.setGeometry(void 0));const Un=Fj(we,je,"text",T);We.getText()||We.setText(ft),ft=We.getText(),(!ft||"getDeclutterMode"in ft&&ft.getDeclutterMode()!==Un)&&(ft=new xee({padding:[2,2,2,2],declutterMode:Un}),We.setText(ft));const It=Yi(we,"layout","text-transform",je,T,Ie);It=="uppercase"?Pn=Array.isArray(Pn)?Pn.map((Pt,en)=>en%2?Pt:Pt.toUpperCase()):Pn.toUpperCase():It=="lowercase"&&(Pn=Array.isArray(Pn)?Pn.map((Pt,en)=>en%2?Pt:Pt.toLowerCase()):Pn.toLowerCase());const _e=Array.isArray(Pn)?Pn:Ee==2?lR(Pn,dn):uR(Pn,oi,$n,dn);if(ft.setText(_e),ft.setFont(oi),ft.setRotation(dB(Yi(we,"layout","text-rotate",je,T,Ie))),typeof ft.setKeepUpright=="function"){const Pt=Yi(we,"layout","text-keep-upright",je,T,Ie);ft.setKeepUpright(Pt)}const oe=Yi(we,"layout","text-anchor",je,T,Ie),ee=it||Ee==1?"point":Yi(we,"layout","symbol-placement",je,T,Ie);let ne;if(ee==="line-center"?(ft.setPlacement("line"),ne="center"):ft.setPlacement(ee),ee==="line"&&typeof ft.setRepeat=="function"){const Pt=Yi(we,"layout","symbol-spacing",je,T,Ie);ft.setRepeat(Pt*2)}ft.setOverflow(ee==="point");let ue=Yi(we,"paint","text-halo-width",je,T,Ie);const be=Yi(we,"layout","text-offset",je,T,Ie),Le=Yi(we,"paint","text-translate",je,T,Ie);let Ve=0,rt=0;if(ee=="point"){ne="center",oe.indexOf("left")!==-1?(ne="left",rt=ue):oe.indexOf("right")!==-1&&(ne="right",rt=-ue);const Pt=Yi(we,"layout","text-rotation-alignment",je,T,Ie);ft.setRotateWithView(Pt=="map")}else ft.setMaxAngle(dB(Yi(we,"layout","text-max-angle",je,T,Ie))*Pn.length/_e.length),ft.setRotateWithView(!1);ft.setTextAlign(ne);let ye="middle";oe.indexOf("bottom")==0?(ye="bottom",Ve=-ue-.5*(In-1)*Tn):oe.indexOf("top")==0&&(ye="top",Ve=ue+.5*(In-1)*Tn),ft.setTextBaseline(ye);const Be=Yi(we,"layout","text-justify",je,T,Ie);ft.setJustify(Be==="auto"?void 0:Be),ft.setOffsetX(be[0]*Tn+rt+Le[0]),ft.setOffsetY(be[1]*Tn+Ve+Le[1]),q.setColor(Sy(Yi(we,"paint","text-color",je,T,Ie),Bt)),ft.setFill(q);const v=Sy(Yi(we,"paint","text-halo-color",je,T,Ie),Bt);if(v&&ue>0){j.setColor(v),ue*=2;const Pt=.5*Tn;j.setWidth(ue<=Pt?ue:Pt),ft.setStroke(j)}else ft.setStroke(void 0);const yt=Yi(we,"layout","text-padding",je,T,Ie),Mt=ft.getPadding();yt!==Mt[0]&&(Mt[0]=yt,Mt[1]=yt,Mt[2]=yt,Mt[3]=yt),We.setZIndex(at)}}}if(qe>-1)return V.length=qe+1,V};return n.setStyle(H),n.set("mapbox-layers",y),n.set("mapbox-source",F),n.set("mapbox-featurestate",n.get("mapbox-featurestate")||{}),H}class Vee{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=n6,this.supportedMediaTypes=null}getReadOptions(e,t){if(t){let i=t.dataProjection?Hs(t.dataProjection):this.readProjection(e);t.extent&&i&&i.getUnits()==="tile-pixels"&&(i=Hs(i),i.setWorldExtent(t.extent)),t={dataProjection:i,featureProjection:t.featureProjection}}return this.adaptOptions(t)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},e)}getType(){return Pr()}readFeature(e,t){return Pr()}readFeatures(e,t){return Pr()}readGeometry(e,t){return Pr()}readProjection(e){return Pr()}writeFeature(e,t){return Pr()}writeFeatures(e,t){return Pr()}writeGeometry(e,t){return Pr()}}function r6(n,e,t){const i=t?Hs(t.featureProjection):null,r=t?Hs(t.dataProjection):null;let o=n;if(i&&r&&!Hy(i,r)){e&&(o=n.clone());const s=e?i:r,a=e?r:i;s.getUnits()==="tile-pixels"?o.transform(s,a):o.applyTransform(e4(s,a))}if(e&&t&&t.decimals!==void 0){const s=Math.pow(10,t.decimals),a=function(c){for(let h=0,m=c.length;h<m;++h)c[h]=Math.round(c[h]*s)/s;return c};o===n&&(o=n.clone()),o.applyTransform(a)}return o}const Dbe={Point:zb,LineString:Nb,Polygon:d1,MultiPoint:d5,MultiLineString:u4,MultiPolygon:c4};function Pbe(n,e,t){return Array.isArray(e[0])?(iee(n,0,e,t)||(n=n.slice(),J9(n,0,e,t)),n):(sU(n,0,e,t)||(n=n.slice(),iS(n,0,e,t)),n)}function Hee(n,e){const t=n.geometry;if(!t)return[];if(Array.isArray(t))return t.map(o=>Hee({...n,geometry:o})).flat();const i=t.type==="MultiPolygon"?"Polygon":t.type;if(i==="GeometryCollection"||i==="Circle")throw new Error("Unsupported geometry type: "+i);const r=t.layout.length;return r6(new QA(i,i==="Polygon"?Pbe(t.flatCoordinates,t.ends,r):t.flatCoordinates,t.ends?.flat(),r,n.properties||{},n.id).enableSimplifyTransformed(),!1,e)}function TU(n,e){if(!n)return null;if(Array.isArray(n)){const i=n.map(r=>TU(r,e));return new uS(i)}const t=Dbe[n.type];return r6(new t(n.flatCoordinates,n.layout||"XY",n.ends),!1,e)}class Ube extends Vee{constructor(){super()}getType(){return"json"}readFeature(e,t){return this.readFeatureFromObject(aM(e),this.getReadOptions(e,t))}readFeatures(e,t){return this.readFeaturesFromObject(aM(e),this.getReadOptions(e,t))}readFeatureFromObject(e,t){return Pr()}readFeaturesFromObject(e,t){return Pr()}readGeometry(e,t){return this.readGeometryFromObject(aM(e),this.getReadOptions(e,t))}readGeometryFromObject(e,t){return Pr()}readProjection(e){return this.readProjectionFromObject(aM(e))}readProjectionFromObject(e){return Pr()}writeFeature(e,t){return JSON.stringify(this.writeFeatureObject(e,t))}writeFeatureObject(e,t){return Pr()}writeFeatures(e,t){return JSON.stringify(this.writeFeaturesObject(e,t))}writeFeaturesObject(e,t){return Pr()}writeGeometry(e,t){return JSON.stringify(this.writeGeometryObject(e,t))}writeGeometryObject(e,t){return Pr()}}function aM(n){if(typeof n=="string"){const e=JSON.parse(n);return e||null}return n!==null?n:null}class jj extends Ube{constructor(e){e=e||{},super(),this.dataProjection=Hs(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=Hs(e.featureProjection)),e.featureClass&&(this.featureClass=e.featureClass),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,t){let i=null;e.type==="Feature"?i=e:i={type:"Feature",geometry:e,properties:null};const r=RU(i.geometry);if(this.featureClass===QA)return Hee({geometry:r,id:i.id,properties:i.properties},t);const o=new n6;return this.geometryName_?o.setGeometryName(this.geometryName_):this.extractGeometryName_&&i.geometry_name&&o.setGeometryName(i.geometry_name),o.setGeometry(TU(r,t)),"id"in i&&o.setId(i.id),i.properties&&o.setProperties(i.properties,!0),o}readFeaturesFromObject(e,t){const i=e;let r=null;if(i.type==="FeatureCollection"){const o=e;r=[];const s=o.features;for(let a=0,c=s.length;a<c;++a){const h=this.readFeatureFromObject(s[a],t);h&&r.push(h)}}else r=[this.readFeatureFromObject(e,t)];return r.flat()}readGeometryFromObject(e,t){return Kbe(e,t)}readProjectionFromObject(e){const t=e.crs;let i;if(t)if(t.type=="name")i=Hs(t.properties.name);else if(t.type==="EPSG")i=Hs("EPSG:"+t.properties.code);else throw new Error("Unknown SRS type");else i=this.dataProjection;return i}writeFeatureObject(e,t){t=this.adaptOptions(t);const i={type:"Feature",geometry:null,properties:null},r=e.getId();if(r!==void 0&&(i.id=r),!e.hasProperties())return i;const o=e.getProperties(),s=e.getGeometry();return s&&(i.geometry=cR(s,t),delete o[e.getGeometryName()]),ev(o)||(i.properties=o),i}writeFeaturesObject(e,t){t=this.adaptOptions(t);const i=[];for(let r=0,o=e.length;r<o;++r)i.push(this.writeFeatureObject(e[r],t));return{type:"FeatureCollection",features:i}}writeGeometryObject(e,t){return cR(e,this.adaptOptions(t))}}function RU(n,e){if(!n)return null;let t;switch(n.type){case"Point":{t=Fbe(n);break}case"LineString":{t=zbe(n);break}case"Polygon":{t=Wbe(n);break}case"MultiPoint":{t=Nbe(n);break}case"MultiLineString":{t=jbe(n);break}case"MultiPolygon":{t=Gbe(n);break}case"GeometryCollection":{t=Lbe(n);break}default:throw new Error("Unsupported GeoJSON type: "+n.type)}return t}function Kbe(n,e){const t=RU(n);return TU(t,e)}function Lbe(n,e){return n.geometries.map(function(i){return RU(i)})}function Fbe(n){const e=n.coordinates;return{type:"Point",flatCoordinates:e,layout:eC(e.length)}}function zbe(n){const e=n.coordinates,t=e.flat();return{type:"LineString",flatCoordinates:t,ends:[t.length],layout:eC(e[0]?.length||2)}}function jbe(n){const e=n.coordinates,t=e[0]?.[0]?.length||2,i=[],r=a5(i,0,e,t);return{type:"MultiLineString",flatCoordinates:i,ends:r,layout:eC(t)}}function Nbe(n){const e=n.coordinates;return{type:"MultiPoint",flatCoordinates:e.flat(),layout:eC(e[0]?.length||2)}}function Gbe(n){const e=n.coordinates,t=[],i=e[0]?.[0]?.[0].length||2,r=ZJ(t,0,e,i);return{type:"MultiPolygon",flatCoordinates:t,ends:r,layout:eC(i)}}function Wbe(n){const e=n.coordinates,t=[],i=e[0]?.[0]?.length,r=a5(t,0,e,i);return{type:"Polygon",flatCoordinates:t,ends:r,layout:eC(i)}}function cR(n,e){n=r6(n,!0,e);const t=n.getType();let i;switch(t){case"Point":{i=Hbe(n);break}case"LineString":{i=qbe(n);break}case"Polygon":{i=Zbe(n,e);break}case"MultiPoint":{i=$be(n);break}case"MultiLineString":{i=Ybe(n);break}case"MultiPolygon":{i=Vbe(n,e);break}case"GeometryCollection":{i=Qbe(n,e);break}case"Circle":{i={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+t)}return i}function Qbe(n,e){return e=Object.assign({},e),delete e.featureProjection,{type:"GeometryCollection",geometries:n.getGeometriesArray().map(function(i){return cR(i,e)})}}function qbe(n,e){return{type:"LineString",coordinates:n.getCoordinates()}}function Ybe(n,e){return{type:"MultiLineString",coordinates:n.getCoordinates()}}function $be(n,e){return{type:"MultiPoint",coordinates:n.getCoordinates()}}function Vbe(n,e){let t;return e&&(t=e.rightHanded),{type:"MultiPolygon",coordinates:n.getCoordinates(t)}}function Hbe(n,e){return{type:"Point",coordinates:n.getCoordinates()}}function Zbe(n,e){let t;return e&&(t=e.rightHanded),{type:"Polygon",coordinates:n.getCoordinates(t)}}const AR=65536*65536,Nj=1/AR,Xbe=12,Gj=typeof TextDecoder>"u"?null:new TextDecoder("utf-8"),gB=0,lM=1,y2=2,uM=5;class Jbe{constructor(e=new Uint8Array(16)){this.buf=ArrayBuffer.isView(e)?e:new Uint8Array(e),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(e,t,i=this.length){for(;this.pos<i;){const r=this.readVarint(),o=r>>3,s=this.pos;this.type=r&7,e(o,t,this),this.pos===s&&this.skip(r)}return t}readMessage(e,t){return this.readFields(e,t,this.readVarint()+this.pos)}readFixed32(){const e=this.dataView.getUint32(this.pos,!0);return this.pos+=4,e}readSFixed32(){const e=this.dataView.getInt32(this.pos,!0);return this.pos+=4,e}readFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*AR;return this.pos+=8,e}readSFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*AR;return this.pos+=8,e}readFloat(){const e=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,e}readDouble(){const e=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,e}readVarint(e){const t=this.buf;let i,r;return r=t[this.pos++],i=r&127,r<128||(r=t[this.pos++],i|=(r&127)<<7,r<128)||(r=t[this.pos++],i|=(r&127)<<14,r<128)||(r=t[this.pos++],i|=(r&127)<<21,r<128)?i:(r=t[this.pos],i|=(r&15)<<28,eCe(i,e,this))}readVarint64(){return this.readVarint(!0)}readSVarint(){const e=this.readVarint();return e%2===1?(e+1)/-2:e/2}readBoolean(){return!!this.readVarint()}readString(){const e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=Xbe&&Gj?Gj.decode(this.buf.subarray(t,e)):dCe(this.buf,t,e)}readBytes(){const e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t}readPackedVarint(e=[],t){const i=this.readPackedEnd();for(;this.pos<i;)e.push(this.readVarint(t));return e}readPackedSVarint(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSVarint());return e}readPackedBoolean(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readBoolean());return e}readPackedFloat(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFloat());return e}readPackedDouble(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readDouble());return e}readPackedFixed32(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFixed32());return e}readPackedSFixed32(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSFixed32());return e}readPackedFixed64(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFixed64());return e}readPackedSFixed64(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSFixed64());return e}readPackedEnd(){return this.type===y2?this.readVarint()+this.pos:this.pos+1}skip(e){const t=e&7;if(t===gB)for(;this.buf[this.pos++]>127;);else if(t===y2)this.pos=this.readVarint()+this.pos;else if(t===uM)this.pos+=4;else if(t===lM)this.pos+=8;else throw new Error(`Unimplemented type: ${t}`)}writeTag(e,t){this.writeVarint(e<<3|t)}realloc(e){let t=this.length||16;for(;t<this.pos+e;)t*=2;if(t!==this.length){const i=new Uint8Array(t);i.set(this.buf),this.buf=i,this.dataView=new DataView(i.buffer),this.length=t}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeSFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,e&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*Nj),!0),this.pos+=8}writeSFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,e&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*Nj),!0),this.pos+=8}writeVarint(e){if(e=+e||0,e>268435455||e<0){tCe(e,this);return}this.realloc(4),this.buf[this.pos++]=e&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=e>>>7&127)))}writeSVarint(e){this.writeVarint(e<0?-e*2-1:e*2)}writeBoolean(e){this.writeVarint(+e)}writeString(e){e=String(e),this.realloc(e.length*4),this.pos++;const t=this.pos;this.pos=fCe(this.buf,e,this.pos);const i=this.pos-t;i>=128&&Wj(t,i,this),this.pos=t-1,this.writeVarint(i),this.pos+=i}writeFloat(e){this.realloc(4),this.dataView.setFloat32(this.pos,e,!0),this.pos+=4}writeDouble(e){this.realloc(8),this.dataView.setFloat64(this.pos,e,!0),this.pos+=8}writeBytes(e){const t=e.length;this.writeVarint(t),this.realloc(t);for(let i=0;i<t;i++)this.buf[this.pos++]=e[i]}writeRawMessage(e,t){this.pos++;const i=this.pos;e(t,this);const r=this.pos-i;r>=128&&Wj(i,r,this),this.pos=i-1,this.writeVarint(r),this.pos+=r}writeMessage(e,t,i){this.writeTag(e,y2),this.writeRawMessage(t,i)}writePackedVarint(e,t){t.length&&this.writeMessage(e,rCe,t)}writePackedSVarint(e,t){t.length&&this.writeMessage(e,oCe,t)}writePackedBoolean(e,t){t.length&&this.writeMessage(e,lCe,t)}writePackedFloat(e,t){t.length&&this.writeMessage(e,sCe,t)}writePackedDouble(e,t){t.length&&this.writeMessage(e,aCe,t)}writePackedFixed32(e,t){t.length&&this.writeMessage(e,uCe,t)}writePackedSFixed32(e,t){t.length&&this.writeMessage(e,cCe,t)}writePackedFixed64(e,t){t.length&&this.writeMessage(e,ACe,t)}writePackedSFixed64(e,t){t.length&&this.writeMessage(e,hCe,t)}writeBytesField(e,t){this.writeTag(e,y2),this.writeBytes(t)}writeFixed32Field(e,t){this.writeTag(e,uM),this.writeFixed32(t)}writeSFixed32Field(e,t){this.writeTag(e,uM),this.writeSFixed32(t)}writeFixed64Field(e,t){this.writeTag(e,lM),this.writeFixed64(t)}writeSFixed64Field(e,t){this.writeTag(e,lM),this.writeSFixed64(t)}writeVarintField(e,t){this.writeTag(e,gB),this.writeVarint(t)}writeSVarintField(e,t){this.writeTag(e,gB),this.writeSVarint(t)}writeStringField(e,t){this.writeTag(e,y2),this.writeString(t)}writeFloatField(e,t){this.writeTag(e,uM),this.writeFloat(t)}writeDoubleField(e,t){this.writeTag(e,lM),this.writeDouble(t)}writeBooleanField(e,t){this.writeVarintField(e,+t)}}function eCe(n,e,t){const i=t.buf;let r,o;if(o=i[t.pos++],r=(o&112)>>4,o<128||(o=i[t.pos++],r|=(o&127)<<3,o<128)||(o=i[t.pos++],r|=(o&127)<<10,o<128)||(o=i[t.pos++],r|=(o&127)<<17,o<128)||(o=i[t.pos++],r|=(o&127)<<24,o<128)||(o=i[t.pos++],r|=(o&1)<<31,o<128))return GC(n,r,e);throw new Error("Expected varint not more than 10 bytes")}function GC(n,e,t){return t?e*4294967296+(n>>>0):(e>>>0)*4294967296+(n>>>0)}function tCe(n,e){let t,i;if(n>=0?(t=n%4294967296|0,i=n/4294967296|0):(t=~(-n%4294967296),i=~(-n/4294967296),t^4294967295?t=t+1|0:(t=0,i=i+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),nCe(t,i,e),iCe(i,e)}function nCe(n,e,t){t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos]=n&127}function iCe(n,e){const t=(n&7)<<4;e.buf[e.pos++]|=t|((n>>>=3)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127)))))}function Wj(n,e,t){const i=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(Math.LN2*7));t.realloc(i);for(let r=t.pos-1;r>=n;r--)t.buf[r+i]=t.buf[r]}function rCe(n,e){for(let t=0;t<n.length;t++)e.writeVarint(n[t])}function oCe(n,e){for(let t=0;t<n.length;t++)e.writeSVarint(n[t])}function sCe(n,e){for(let t=0;t<n.length;t++)e.writeFloat(n[t])}function aCe(n,e){for(let t=0;t<n.length;t++)e.writeDouble(n[t])}function lCe(n,e){for(let t=0;t<n.length;t++)e.writeBoolean(n[t])}function uCe(n,e){for(let t=0;t<n.length;t++)e.writeFixed32(n[t])}function cCe(n,e){for(let t=0;t<n.length;t++)e.writeSFixed32(n[t])}function ACe(n,e){for(let t=0;t<n.length;t++)e.writeFixed64(n[t])}function hCe(n,e){for(let t=0;t<n.length;t++)e.writeSFixed64(n[t])}function dCe(n,e,t){let i="",r=e;for(;r<t;){const o=n[r];let s=null,a=o>239?4:o>223?3:o>191?2:1;if(r+a>t)break;let c,h,m;a===1?o<128&&(s=o):a===2?(c=n[r+1],(c&192)===128&&(s=(o&31)<<6|c&63,s<=127&&(s=null))):a===3?(c=n[r+1],h=n[r+2],(c&192)===128&&(h&192)===128&&(s=(o&15)<<12|(c&63)<<6|h&63,(s<=2047||s>=55296&&s<=57343)&&(s=null))):a===4&&(c=n[r+1],h=n[r+2],m=n[r+3],(c&192)===128&&(h&192)===128&&(m&192)===128&&(s=(o&15)<<18|(c&63)<<12|(h&63)<<6|m&63,(s<=65535||s>=1114112)&&(s=null))),s===null?(s=65533,a=1):s>65535&&(s-=65536,i+=String.fromCharCode(s>>>10&1023|55296),s=56320|s&1023),i+=String.fromCharCode(s),r+=a}return i}function fCe(n,e,t){for(let i=0,r,o;i<e.length;i++){if(r=e.charCodeAt(i),r>55295&&r<57344)if(o)if(r<56320){n[t++]=239,n[t++]=191,n[t++]=189,o=r;continue}else r=o-55296<<10|r-56320|65536,o=null;else{r>56319||i+1===e.length?(n[t++]=239,n[t++]=191,n[t++]=189):o=r;continue}else o&&(n[t++]=239,n[t++]=191,n[t++]=189,o=null);r<128?n[t++]=r:(r<2048?n[t++]=r>>6|192:(r<65536?n[t++]=r>>12|224:(n[t++]=r>>18|240,n[t++]=r>>12&63|128),n[t++]=r>>6&63|128),n[t++]=r&63|128)}return t}class Zee extends Vee{constructor(e){super(),e=e||{},this.dataProjection=new GE({code:"",units:"tile-pixels"}),this.featureClass=e.featureClass?e.featureClass:QA,this.geometryName_=e.geometryName,this.layerName_=e.layerName?e.layerName:"layer",this.layers_=e.layers?e.layers:null,this.idProperty_=e.idProperty,this.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"]}readRawGeometry_(e,t,i,r){e.pos=t.geometry;const o=e.readVarint()+e.pos;let s=1,a=0,c=0,h=0,m=0,y=0;for(;e.pos<o;){if(!a){const M=e.readVarint();s=M&7,a=M>>3}if(a--,s===1||s===2)c+=e.readSVarint(),h+=e.readSVarint(),s===1&&m>y&&(r.push(m),y=m),i.push(c,h),m+=2;else if(s===7)m>y&&(i.push(i[y],i[y+1]),m+=2);else throw new Error("Invalid command found in the PBF")}m>y&&(r.push(m),y=m)}createFeature_(e,t,i){const r=t.type;if(r===0)return null;let o;const s=t.properties;let a;this.idProperty_?(a=s[this.idProperty_],delete s[this.idProperty_]):a=t.id,s[this.layerName_]=t.layer.name;const c=[],h=[];this.readRawGeometry_(e,t,c,h);const m=vCe(r,h.length);if(this.featureClass===QA)o=new this.featureClass(m,c,h,2,s,a),o.transform(i.dataProjection);else{let y;if(m=="Polygon"){const T=ree(c,h);y=T.length>1?new c4(c,"XY",T):new d1(c,"XY",h)}else y=m==="Point"?new zb(c,"XY"):m==="LineString"?new Nb(c,"XY"):m==="MultiPoint"?new d5(c,"XY"):m==="MultiLineString"?new u4(c,"XY",h):null;const M=this.featureClass;o=new M,this.geometryName_&&o.setGeometryName(this.geometryName_);const x=r6(y,!1,i);o.setGeometry(x),a!==void 0&&o.setId(a),o.setProperties(s,!0)}return o}getType(){return"arraybuffer"}readFeatures(e,t){const i=this.layers_;t=this.adaptOptions(t);const r=Hs(t.dataProjection);r.setWorldExtent(t.extent),t.dataProjection=r;const o=new Jbe(e),s=o.readFields(pCe,{}),a=[];for(const c in s){if(i&&!i.includes(c))continue;const h=s[c],m=h?[0,0,h.extent,h.extent]:null;r.setExtent(m);for(let y=0,M=h.length;y<M;++y){const x=yCe(o,h,y),T=this.createFeature_(o,x,t);T!==null&&a.push(T)}}return a}readProjection(e){return this.dataProjection}setLayers(e){this.layers_=e}}function pCe(n,e,t){if(n===3){const i={keys:[],values:[],features:[]},r=t.readVarint()+t.pos;t.readFields(mCe,i,r),i.length=i.features.length,i.length&&(e[i.name]=i)}}function mCe(n,e,t){if(n===15)e.version=t.readVarint();else if(n===1)e.name=t.readString();else if(n===5)e.extent=t.readVarint();else if(n===2)e.features.push(t.pos);else if(n===3)e.keys.push(t.readString());else if(n===4){let i=null;const r=t.readVarint()+t.pos;for(;t.pos<r;)n=t.readVarint()>>3,i=n===1?t.readString():n===2?t.readFloat():n===3?t.readDouble():n===4?t.readVarint64():n===5?t.readVarint():n===6?t.readSVarint():n===7?t.readBoolean():null;e.values.push(i)}}function gCe(n,e,t){if(n==1)e.id=t.readVarint();else if(n==2){const i=t.readVarint()+t.pos;for(;t.pos<i;){const r=e.layer.keys[t.readVarint()],o=e.layer.values[t.readVarint()];e.properties[r]=o}}else n==3?e.type=t.readVarint():n==4&&(e.geometry=t.pos)}function yCe(n,e,t){n.pos=e.features[t];const i=n.readVarint()+n.pos,r={layer:e,type:0,properties:{}};return n.readFields(gCe,r,i),r}function vCe(n,e){let t;return n===1?t=e===1?"Point":"MultiPoint":n===2?t=e===1?"LineString":"MultiLineString":n===3&&(t="Polygon"),t}class bCe extends SU{constructor(e){super(e),this.image=null}getImage(){return this.image?this.image.getImage():null}prepareFrame(e){const t=e.layerStatesArray[e.layerIndex],i=e.pixelRatio,r=e.viewState,o=r.resolution,s=this.getLayer().getSource(),a=e.viewHints;let c=e.extent;if(t.extent!==void 0&&(c=Mm(c,zg(t.extent,r.projection))),!a[dl.ANIMATING]&&!a[dl.INTERACTING]&&!Xb(c))if(s){const h=r.projection,m=s.getImage(c,o,i,h);m&&(this.loadImage(m)?this.image=m:m.getState()===Li.EMPTY&&(this.image=null))}else this.image=null;return!!this.image}getData(e){const t=this.frameState;if(!t)return null;const i=this.getLayer(),r=Hu(t.pixelToCoordinateTransform,e.slice()),o=i.getExtent();if(o&&!Fb(o,r))return null;const s=this.image.getExtent(),a=this.image.getImage(),c=rs(s),h=Math.floor(a.width*((r[0]-s[0])/c));if(h<0||h>=a.width)return null;const m=Ju(s),y=Math.floor(a.height*((s[3]-r[1])/m));return y<0||y>=a.height?null:this.getImageData(a,h,y)}renderFrame(e,t){const i=this.image,r=i.getExtent(),o=i.getResolution(),[s,a]=Array.isArray(o)?o:[o,o],c=i.getPixelRatio(),h=e.layerStatesArray[e.layerIndex],m=e.pixelRatio,y=e.viewState,M=y.center,x=y.resolution,T=m*s/(x*c),P=m*a/(x*c);this.prepareContainer(e,t);const F=this.context.canvas.width,j=this.context.canvas.height,q=this.getRenderContext(e);let V=!1,H=!0;if(h.extent){const le=zg(h.extent,y.projection);H=Jl(le,e.extent),V=H&&!Fg(le,e.extent),V&&this.clipUnrotated(q,e,le)}const Q=i.getImage(),Y=t0(this.tempTransform,F/2,j/2,T,P,0,c*(r[0]-M[0])/s,c*(M[1]-r[3])/a);this.renderedResolution=a*m/c;const z=Q.width*Y[0],se=Q.height*Y[3];if(this.getLayer().getSource().getInterpolate()||(q.imageSmoothingEnabled=!1),this.preRender(q,e),H&&z>=.5&&se>=.5){const le=Y[4],pe=Y[5],de=h.opacity;de!==1&&(q.save(),q.globalAlpha=de),q.drawImage(Q,0,0,+Q.width,+Q.height,le,pe,z,se),de!==1&&q.restore()}return this.postRender(this.context,e),V&&q.restore(),q.imageSmoothingEnabled=!0,this.container}}class CCe extends zx{constructor(e){e=e||{},super(e)}}class Xee extends CCe{constructor(e){super(e)}createRenderer(){return new bCe(this)}getData(e){return super.getData(e)}}function hR(n){return n instanceof Image||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageBitmap?n:null}const _Ce=new Error("disposed"),xCe=[256,256];class Qj extends p5{constructor(e){const t=ai.IDLE;super(e.tileCoord,t,{transition:e.transition,interpolate:e.interpolate}),this.loader_=e.loader,this.data_=null,this.error_=null,this.size_=e.size||null,this.controller_=e.controller||null}getSize(){if(this.size_)return this.size_;const e=hR(this.data_);return e?[e.width,e.height]:xCe}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==ai.IDLE&&this.state!==ai.ERROR)return;this.state=ai.LOADING,this.changed();const e=this;this.loader_().then(function(t){e.data_=t,e.state=ai.LOADED,e.changed()}).catch(function(t){e.error_=t,e.state=ai.ERROR,e.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(_Ce),this.controller_=null),super.disposeInternal()}}let yB;const Q_=[];function qj(n,e,t,i,r){n.beginPath(),n.moveTo(0,0),n.lineTo(e,t),n.lineTo(i,r),n.closePath(),n.save(),n.clip(),n.fillRect(0,0,Math.max(e,i)+1,Math.max(t,r)),n.restore()}function vB(n,e){return Math.abs(n[e*4]-210)>2||Math.abs(n[e*4+3]-.75*255)>2}function MCe(){if(yB===void 0){const n=Il(6,6,Q_);n.globalCompositeOperation="lighter",n.fillStyle="rgba(210, 0, 0, 0.75)",qj(n,4,5,4,0),qj(n,4,5,0,5);const e=n.getImageData(0,0,3,3).data;yB=vB(e,0)||vB(e,4)||vB(e,8),l5(n),Q_.push(n.canvas)}return yB}function dR(n,e,t,i){const r=qE(t,e,n);let o=V9(e,i,t);const s=e.getMetersPerUnit();s!==void 0&&(o*=s);const a=n.getMetersPerUnit();a!==void 0&&(o/=a);const c=n.getExtent();if(!c||Fb(c,r)){const h=V9(n,o,r)/o;isFinite(h)&&h>0&&(o/=h)}return o}function wCe(n,e,t,i){const r=Ef(t);let o=dR(n,e,r,i);return(!isFinite(o)||o<=0)&&RJ(t,function(s){return o=dR(n,e,s,i),isFinite(o)&&o>0}),o}function Jee(n,e,t,i,r,o,s,a,c,h,m,y,M,x){const T=Il(Math.round(t*n),Math.round(t*e),Q_);if(y||(T.imageSmoothingEnabled=!1),c.length===0)return T.canvas;T.scale(t,t);function P(Q){return Math.round(Q*t)/t}T.globalCompositeOperation="lighter";const F=_p();c.forEach(function(Q,Y,z){kJ(F,Q.extent)});let j;const q=t/i,V=(y?1:1+Math.pow(2,-24))/q;(!M||c.length!==1||h!==0)&&(j=Il(Math.round(rs(F)*q),Math.round(Ju(F)*q),Q_),y||(j.imageSmoothingEnabled=!1),c.forEach(function(Q,Y,z){if(Q.image.width>0&&Q.image.height>0){if(Q.clipExtent){j.save();const ve=(Q.clipExtent[0]-F[0])*q,Ee=-(Q.clipExtent[3]-F[3])*q,Re=rs(Q.clipExtent)*q,je=Ju(Q.clipExtent)*q;j.rect(y?ve:Math.round(ve),y?Ee:Math.round(Ee),y?Re:Math.round(ve+Re)-Math.round(ve),y?je:Math.round(Ee+je)-Math.round(Ee)),j.clip()}const se=(Q.extent[0]-F[0])*q,le=-(Q.extent[3]-F[3])*q,pe=rs(Q.extent)*q,de=Ju(Q.extent)*q;j.drawImage(Q.image,h,h,Q.image.width-2*h,Q.image.height-2*h,y?se:Math.round(se),y?le:Math.round(le),y?pe:Math.round(se+pe)-Math.round(se),y?de:Math.round(le+de)-Math.round(le)),Q.clipExtent&&j.restore()}}));const H=g1(s);return a.getTriangles().forEach(function(Q,Y,z){const se=Q.source,le=Q.target;let pe=se[0][0],de=se[0][1],ve=se[1][0],Ee=se[1][1],Re=se[2][0],je=se[2][1];const Ie=P((le[0][0]-H[0])/o),qe=P(-(le[0][1]-H[1])/o),tt=P((le[1][0]-H[0])/o),At=P(-(le[1][1]-H[1])/o),ke=P((le[2][0]-H[0])/o),we=P(-(le[2][1]-H[1])/o),ze=pe,Me=de;pe=0,de=0,ve-=ze,Ee-=Me,Re-=ze,je-=Me;const lt=[[ve,Ee,0,0,tt-Ie],[Re,je,0,0,ke-Ie],[0,0,ve,Ee,At-qe],[0,0,Re,je,we-qe]],nt=y0e(lt);if(!nt)return;if(T.save(),T.beginPath(),MCe()||!y){T.moveTo(tt,At);const Bt=4,Ke=Ie-tt,Te=qe-At;for(let Se=0;Se<Bt;Se++)T.lineTo(tt+P((Se+1)*Ke/Bt),At+P(Se*Te/(Bt-1))),Se!=Bt-1&&T.lineTo(tt+P((Se+1)*Ke/Bt),At+P((Se+1)*Te/(Bt-1)));T.lineTo(ke,we)}else T.moveTo(tt,At),T.lineTo(Ie,qe),T.lineTo(ke,we);T.clip(),T.transform(nt[0],nt[2],nt[1],nt[3],Ie,qe),T.translate(F[0]-ze,F[3]-Me);let bt;if(j)bt=j.canvas,T.scale(V,-V);else{const Bt=c[0],Ke=Bt.extent;bt=Bt.image,T.scale(rs(Ke)/bt.width,-Ju(Ke)/bt.height)}T.drawImage(bt,0,0),T.restore()}),j&&(l5(j),Q_.push(j.canvas)),m&&(T.save(),T.globalCompositeOperation="source-over",T.strokeStyle="black",T.lineWidth=1,a.getTriangles().forEach(function(Q,Y,z){const se=Q.target,le=(se[0][0]-H[0])/o,pe=-(se[0][1]-H[1])/o,de=(se[1][0]-H[0])/o,ve=-(se[1][1]-H[1])/o,Ee=(se[2][0]-H[0])/o,Re=-(se[2][1]-H[1])/o;T.beginPath(),T.moveTo(de,ve),T.lineTo(le,pe),T.lineTo(Ee,Re),T.closePath(),T.stroke()}),T.restore()),T.canvas}const SCe=10,Yj=.25;class ete{constructor(e,t,i,r,o,s,a){this.sourceProj_=e,this.targetProj_=t;let c={};const h=a?s1e(V=>Hu(a,qE(V,this.targetProj_,this.sourceProj_))):e4(this.targetProj_,this.sourceProj_);this.transformInv_=function(V){const H=V[0]+"/"+V[1];return c[H]||(c[H]=h(V)),c[H]},this.maxSourceExtent_=r,this.errorThresholdSquared_=o*o,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!r&&!!this.sourceProj_.getExtent()&&rs(r)>=rs(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?rs(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?rs(this.targetProj_.getExtent()):null;const m=g1(i),y=NE(i),M=jE(i),x=zE(i),T=this.transformInv_(m),P=this.transformInv_(y),F=this.transformInv_(M),j=this.transformInv_(x),q=SCe+(s?Math.max(0,Math.ceil(Math.log2(Q9(i)/(s*s*256*256)))):0);if(this.addQuad_(m,y,M,x,T,P,F,j,q),this.wrapsXInSource_){let V=1/0;this.triangles_.forEach(function(H,Q,Y){V=Math.min(V,H.source[0][0],H.source[1][0],H.source[2][0])}),this.triangles_.forEach(H=>{if(Math.max(H.source[0][0],H.source[1][0],H.source[2][0])-V>this.sourceWorldWidth_/2){const Q=[[H.source[0][0],H.source[0][1]],[H.source[1][0],H.source[1][1]],[H.source[2][0],H.source[2][1]]];Q[0][0]-V>this.sourceWorldWidth_/2&&(Q[0][0]-=this.sourceWorldWidth_),Q[1][0]-V>this.sourceWorldWidth_/2&&(Q[1][0]-=this.sourceWorldWidth_),Q[2][0]-V>this.sourceWorldWidth_/2&&(Q[2][0]-=this.sourceWorldWidth_);const Y=Math.min(Q[0][0],Q[1][0],Q[2][0]);Math.max(Q[0][0],Q[1][0],Q[2][0])-Y<this.sourceWorldWidth_/2&&(H.source=Q)}})}c={}}addTriangle_(e,t,i,r,o,s){this.triangles_.push({source:[r,o,s],target:[e,t,i]})}addQuad_(e,t,i,r,o,s,a,c,h){const m=G9([o,s,a,c]),y=this.sourceWorldWidth_?rs(m)/this.sourceWorldWidth_:null,M=this.sourceWorldWidth_,x=this.sourceProj_.canWrapX()&&y>.5&&y<1;let T=!1;if(h>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const F=G9([e,t,i,r]);T=rs(F)/this.targetWorldWidth_>Yj||T}!x&&this.sourceProj_.isGlobal()&&y&&(T=y>Yj||T)}if(!T&&this.maxSourceExtent_&&isFinite(m[0])&&isFinite(m[1])&&isFinite(m[2])&&isFinite(m[3])&&!Jl(m,this.maxSourceExtent_))return;let P=0;if(!T&&(!isFinite(o[0])||!isFinite(o[1])||!isFinite(s[0])||!isFinite(s[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(c[0])||!isFinite(c[1]))){if(h>0)T=!0;else if(P=(!isFinite(o[0])||!isFinite(o[1])?8:0)+(!isFinite(s[0])||!isFinite(s[1])?4:0)+(!isFinite(a[0])||!isFinite(a[1])?2:0)+(!isFinite(c[0])||!isFinite(c[1])?1:0),P!=1&&P!=2&&P!=4&&P!=8)return}if(h>0){if(!T){const F=[(e[0]+i[0])/2,(e[1]+i[1])/2],j=this.transformInv_(F);let q;x?q=(Ib(o[0],M)+Ib(a[0],M))/2-Ib(j[0],M):q=(o[0]+a[0])/2-j[0];const V=(o[1]+a[1])/2-j[1];T=q*q+V*V>this.errorThresholdSquared_}if(T){if(Math.abs(e[0]-i[0])<=Math.abs(e[1]-i[1])){const F=[(t[0]+i[0])/2,(t[1]+i[1])/2],j=this.transformInv_(F),q=[(r[0]+e[0])/2,(r[1]+e[1])/2],V=this.transformInv_(q);this.addQuad_(e,t,F,q,o,s,j,V,h-1),this.addQuad_(q,F,i,r,V,j,a,c,h-1)}else{const F=[(e[0]+t[0])/2,(e[1]+t[1])/2],j=this.transformInv_(F),q=[(i[0]+r[0])/2,(i[1]+r[1])/2],V=this.transformInv_(q);this.addQuad_(e,F,q,r,o,j,V,c,h-1),this.addQuad_(F,t,i,q,j,s,a,V,h-1)}return}}if(x){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}(P&11)==0&&this.addTriangle_(e,i,r,o,a,c),(P&14)==0&&this.addTriangle_(e,i,t,o,a,s),P&&((P&13)==0&&this.addTriangle_(t,r,e,s,c,o),(P&7)==0&&this.addTriangle_(t,r,i,s,c,a))}calculateSourceExtent(){const e=_p();return this.triangles_.forEach(function(t,i,r){const o=t.source;d3(e,o[0]),d3(e,o[1]),d3(e,o[2])}),e}getTriangles(){return this.triangles_}}const tte=.5;class nte extends p5{constructor(e,t,i,r,o,s,a,c,h,m,y,M){super(o,ai.IDLE,M),this.renderEdges_=y!==void 0?y:!1,this.pixelRatio_=a,this.gutter_=c,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=r,this.wrappedTileCoord_=s||o,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=e.canWrapX()?e.getExtent():void 0;const x=r.getTileCoordExtent(this.wrappedTileCoord_),T=this.targetTileGrid_.getExtent();let P=this.sourceTileGrid_.getExtent();const F=T?Mm(x,T):x;if(Q9(F)===0){this.state=ai.EMPTY;return}const j=e.getExtent();j&&(P?P=Mm(P,j):P=j);const q=r.getResolution(this.wrappedTileCoord_[0]),V=wCe(e,i,F,q);if(!isFinite(V)||V<=0){this.state=ai.EMPTY;return}const H=m!==void 0?m:tte;if(this.triangulation_=new ete(e,i,F,P,V*H,q),this.triangulation_.getTriangles().length===0){this.state=ai.EMPTY;return}this.sourceZ_=t.getZForResolution(V);let Q=this.triangulation_.calculateSourceExtent();if(P&&(e.canWrapX()?(Q[1]=Bl(Q[1],P[1],P[3]),Q[3]=Bl(Q[3],P[1],P[3])):Q=Mm(Q,P)),!Q9(Q))this.state=ai.EMPTY;else{let Y=0,z=0;e.canWrapX()&&(Y=rs(j),z=Math.floor((Q[0]-j[0])/Y)),UJ(Q.slice(),e,!0).forEach(le=>{const pe=t.getTileRangeForExtentAndZ(le,this.sourceZ_);for(let de=pe.minX;de<=pe.maxX;de++)for(let ve=pe.minY;ve<=pe.maxY;ve++){const Ee=h(this.sourceZ_,de,ve,a);if(Ee){const Re=z*Y;this.sourceTiles_.push({tile:Ee,offset:Re})}}++z}),this.sourceTiles_.length===0&&(this.state=ai.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(t=>{const i=t.tile;if(i&&i.getState()==ai.LOADED){const r=this.sourceTileGrid_.getTileCoordExtent(i.tileCoord);r[0]+=t.offset,r[2]+=t.offset;const o=this.clipExtent_?.slice();o&&(o[0]+=t.offset,o[2]+=t.offset),e.push({extent:r,clipExtent:o,image:i.getImage()})}}),this.sourceTiles_.length=0,e.length===0)this.state=ai.ERROR;else{const t=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(t),r=typeof i=="number"?i:i[0],o=typeof i=="number"?i:i[1],s=this.targetTileGrid_.getResolution(t),a=this.sourceTileGrid_.getResolution(this.sourceZ_),c=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=Jee(r,o,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),s,c,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=ai.LOADED}this.changed()}load(){if(this.state==ai.IDLE){this.state=ai.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:t})=>{const i=t.getState();if(i==ai.IDLE||i==ai.LOADING){e++;const r=Vo(t,Ir.CHANGE,o=>{const s=t.getState();(s==ai.LOADED||s==ai.ERROR||s==ai.EMPTY)&&(Ta(r),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(r)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t},i,r){t.getState()==ai.IDLE&&t.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(Ta),this.sourcesListenerKeys_=null}release(){this.canvas_&&(l5(this.canvas_.getContext("2d")),Q_.push(this.canvas_),this.canvas_=null),super.release()}}class ECe{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}deleteOldest(){const e=this.pop();e instanceof t5&&e.dispose()}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.deleteOldest()}clear(){for(;this.oldest_;)this.deleteOldest()}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){const i=this.entries_[e];return ws(i!==void 0,"Tried to get a value for a key that does not exist in the cache"),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_}remove(e){const t=this.entries_[e];return ws(t!==void 0,"Tried to get a value for a key that does not exist in the cache"),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let t=0,i;for(i=this.newest_;i;i=i.older)e[t++]=i.key_;return e}getValues(){const e=new Array(this.count_);let t=0,i;for(i=this.newest_;i;i=i.older)e[t++]=i.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){return this.entries_[e]?.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){ws(!(e in this.entries_),"Tried to set a value for a key that is used already");const i={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[e]=i,++this.count_}setSize(e){this.highWaterMark=e}}function pS(n,e,t,i){return i!==void 0?(i[0]=n,i[1]=e,i[2]=t,i):[n,e,t]}function OCe(n,e,t){return n+"/"+e+"/"+t}function BCe(n){return ICe(n[0],n[1],n[2])}function ICe(n,e,t){return(e<<n)+t}function kCe(n,e){const t=n[0],i=n[1],r=n[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;const o=e.getFullTileRange(t);return o?o.containsXY(i,r):!0}function bB(n,e,t,i,r){return`${$r(n)},${e},${OCe(t,i,r)}`}function CB(n,e,t){if(!(t in n))return n[t]=new Set([e]),!0;const i=n[t],r=i.has(e);return r||i.add(e),!r}function TCe(n,e,t){const i=n[t];return i?i.delete(e):!1}function $j(n,e){const t=n.layerStatesArray[n.layerIndex];t.extent&&(e=Mm(e,zg(t.extent,n.viewState.projection)));const i=t.layer.getRenderSource();if(!i.getWrapX()){const r=i.getTileGridForProjection(n.viewState.projection).getExtent();r&&(e=Mm(e,r))}return e}class ite extends SU{constructor(e,t){super(e),t=t||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=_p(),this.tempTileRange_=new OU(0,0,0,0),this.tempTileCoord_=pS(0,0,0);const i=t.cacheSize!==void 0?t.cacheSize:512;this.tileCache_=new ECe(i),this.maxStaleKeys=i*.5}getTileCache(){return this.tileCache_}getOrCreateTile(e,t,i,r){const o=this.tileCache_,a=this.getLayer().getSource(),c=bB(a,a.getKey(),e,t,i);let h;if(o.containsKey(c))h=o.get(c);else{if(h=a.getTile(e,t,i,r.pixelRatio,r.viewState.projection),!h)return null;o.set(c,h)}return h}getTile(e,t,i,r){const o=this.getOrCreateTile(e,t,i,r);return o||null}getData(e){const t=this.frameState;if(!t)return null;const i=this.getLayer(),r=Hu(t.pixelToCoordinateTransform,e.slice()),o=i.getExtent();if(o&&!Fb(o,r))return null;const s=t.viewState,a=i.getRenderSource(),c=a.getTileGridForProjection(s.projection),h=a.getTilePixelRatio(t.pixelRatio);for(let m=c.getZForResolution(s.resolution);m>=c.getMinZoom();--m){const y=c.getTileCoordForCoordAndZ(r,m),M=this.getTile(m,y[1],y[2],t);if(!M||M.getState()!==ai.LOADED)continue;const x=c.getOrigin(m),T=YA(c.getTileSize(m)),P=c.getResolution(m);let F;if(M instanceof Nee||M instanceof nte)F=M.getImage();else if(M instanceof Qj){if(F=hR(M.getData()),!F)continue}else continue;const j=Math.floor(h*((r[0]-x[0])/P-y[1]*T[0])),q=Math.floor(h*((x[1]-r[1])/P-y[2]*T[1])),V=Math.round(h*a.getGutterForProjection(s.projection));return this.getImageData(F,j+V,q+V)}return null}prepareFrame(e){this.renderedProjection?e.viewState.projection!==this.renderedProjection&&(this.tileCache_.clear(),this.renderedProjection=e.viewState.projection):this.renderedProjection=e.viewState.projection;const t=this.getLayer().getSource();if(!t)return!1;const i=t.getRevision();return this.renderedSourceRevision_?this.renderedSourceRevision_!==i&&(this.renderedSourceRevision_=i,this.renderedSourceKey_===t.getKey()&&this.tileCache_.clear()):this.renderedSourceRevision_=i,!0}enqueueTiles(e,t,i,r,o){const s=e.viewState,a=this.getLayer(),c=a.getRenderSource(),h=c.getTileGridForProjection(s.projection),m=$r(c);m in e.wantedTiles||(e.wantedTiles[m]={});const y=e.wantedTiles[m],M=a.getMapInternal(),x=Math.max(i-o,h.getMinZoom(),h.getZForResolution(Math.min(a.getMaxResolution(),M?M.getView().getResolutionForZoom(Math.max(a.getMinZoom(),0)):h.getResolution(0)),c.zDirection)),T=s.rotation,P=T?DJ(s.center,s.resolution,T,e.size):void 0;for(let F=i;F>=x;--F){const j=h.getTileRangeForExtentAndZ(t,F,this.tempTileRange_),q=h.getResolution(F);for(let V=j.minX;V<=j.maxX;++V)for(let H=j.minY;H<=j.maxY;++H){if(T&&!h.tileCoordIntersectsViewport([F,V,H],P))continue;const Q=this.getTile(F,V,H,e);if(!Q||!CB(r,Q,F))continue;const z=Q.getKey();if(y[z]=!0,Q.getState()===ai.IDLE&&!e.tileQueue.isKeyQueued(z)){const se=pS(F,V,H,this.tempTileCoord_);e.tileQueue.enqueue([Q,m,h.getTileCoordCenter(se),q])}}}}findStaleTile_(e,t){const i=this.tileCache_,r=e[0],o=e[1],s=e[2],a=this.getStaleKeys();for(let c=0;c<a.length;++c){const h=bB(this.getLayer().getSource(),a[c],r,o,s);if(i.containsKey(h)){const m=i.peek(h);if(m.getState()===ai.LOADED)return m.endTransition($r(this)),CB(t,m,r),!0}}return!1}findAltTiles_(e,t,i,r){const o=e.getTileRangeForTileCoordAndZ(t,i,this.tempTileRange_);if(!o)return!1;let s=!0;const a=this.tileCache_,c=this.getLayer().getRenderSource(),h=c.getKey();for(let m=o.minX;m<=o.maxX;++m)for(let y=o.minY;y<=o.maxY;++y){const M=bB(c,h,i,m,y);let x=!1;if(a.containsKey(M)){const T=a.peek(M);T.getState()===ai.LOADED&&(CB(r,T,i),x=!0)}x||(s=!1)}return s}renderFrame(e,t){this.renderComplete=!0;const i=e.layerStatesArray[e.layerIndex],r=e.viewState,o=r.projection,s=r.resolution,a=r.center,c=e.pixelRatio,h=this.getLayer(),m=h.getSource(),y=m.getTileGridForProjection(o),M=y.getZForResolution(s,m.zDirection),x=y.getResolution(M),T=m.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==T&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=T):this.renderedSourceKey_=T;let P=e.extent;const F=m.getTilePixelRatio(c);this.prepareContainer(e,t);const j=this.context.canvas.width,q=this.context.canvas.height,V=i.extent&&zg(i.extent);V&&(P=Mm(P,zg(i.extent)));const H=x*j/2/F,Q=x*q/2/F,Y=[a[0]-H,a[1]-Q,a[0]+H,a[1]+Q],z={};this.renderedTiles.length=0;const se=h.getPreload();if(e.nextExtent){const tt=y.getZForResolution(r.nextResolution,m.zDirection),At=$j(e,e.nextExtent);this.enqueueTiles(e,At,tt,z,se)}const le=$j(e,P);if(this.enqueueTiles(e,le,M,z,0),se>0&&setTimeout(()=>{this.enqueueTiles(e,le,M-1,z,se-1)},0),!(M in z))return this.container;const pe=$r(this),de=e.time;for(const tt of z[M]){const At=tt.getState();if(At===ai.EMPTY)continue;const ke=tt.tileCoord;if(At===ai.LOADED&&tt.getAlpha(pe,de)===1){tt.endTransition(pe);continue}if(At!==ai.ERROR&&(this.renderComplete=!1),this.findStaleTile_(ke,z)){TCe(z,tt,M),e.animate=!0;continue}if(this.findAltTiles_(y,ke,M+1,z))continue;const Me=y.getMinZoom();for(let lt=M-1;lt>=Me&&!this.findAltTiles_(y,ke,lt,z);--lt);}const ve=x/s*c/F,Ee=this.getRenderContext(e);t0(this.tempTransform,j/2,q/2,ve,ve,0,-j/2,-q/2),i.extent&&this.clipUnrotated(Ee,e,V),m.getInterpolate()||(Ee.imageSmoothingEnabled=!1),this.preRender(Ee,e);const Re=Object.keys(z).map(Number);Re.sort(Zg);let je;const Ie=[],qe=[];for(let tt=Re.length-1;tt>=0;--tt){const At=Re[tt],ke=m.getTilePixelSize(At,c,o),ze=y.getResolution(At)/x,Me=ke[0]*ze*ve,lt=ke[1]*ze*ve,nt=y.getTileCoordForCoordAndZ(g1(Y),At),bt=y.getTileCoordExtent(nt),Bt=Hu(this.tempTransform,[F*(bt[0]-Y[0])/x,F*(Y[3]-bt[3])/x]),Ke=F*m.getGutterForProjection(o);for(const Te of z[At]){if(Te.getState()!==ai.LOADED)continue;const Se=Te.tileCoord,We=nt[1]-Se[1],at=Math.round(Bt[0]-(We-1)*Me),it=nt[2]-Se[2],ft=Math.round(Bt[1]-(it-1)*lt),Dt=Math.round(Bt[0]-We*Me),Ot=Math.round(Bt[1]-it*lt),Jt=at-Dt,Dn=ft-Ot,Pn=Re.length===1;let oi=!1;je=[Dt,Ot,Dt+Jt,Ot,Dt+Jt,Ot+Dn,Dt,Ot+Dn];for(let In=0,Tn=Ie.length;In<Tn;++In)if(!Pn&&At<qe[In]){const dn=Ie[In];Jl([Dt,Ot,Dt+Jt,Ot+Dn],[dn[0],dn[3],dn[4],dn[7]])&&(oi||(Ee.save(),oi=!0),Ee.beginPath(),Ee.moveTo(je[0],je[1]),Ee.lineTo(je[2],je[3]),Ee.lineTo(je[4],je[5]),Ee.lineTo(je[6],je[7]),Ee.moveTo(dn[6],dn[7]),Ee.lineTo(dn[4],dn[5]),Ee.lineTo(dn[2],dn[3]),Ee.lineTo(dn[0],dn[1]),Ee.clip())}Ie.push(je),qe.push(At),this.drawTile(Te,e,Dt,Ot,Jt,Dn,Ke,Pn),oi&&Ee.restore(),this.renderedTiles.unshift(Te),this.updateUsedTiles(e.usedTiles,m,Te)}}if(this.renderedResolution=x,this.extentChanged=!this.renderedExtent_||!h1(this.renderedExtent_,Y),this.renderedExtent_=Y,this.renderedPixelRatio=c,this.postRender(this.context,e),i.extent&&Ee.restore(),Ee.imageSmoothingEnabled=!0,this.renderComplete){const tt=(At,ke)=>{const we=$r(m),ze=ke.wantedTiles[we],Me=ze?Object.keys(ze).length:0;this.updateCacheSize(Me),this.tileCache_.expireCache()};e.postRenderFunctions.push(tt)}return this.container}updateCacheSize(e){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,e*2)}drawTile(e,t,i,r,o,s,a,c){let h;if(e instanceof Qj){if(h=hR(e.getData()),!h)throw new Error("Rendering array data is not yet supported")}else h=this.getTileImage(e);if(!h)return;const m=this.getRenderContext(t),y=$r(this),M=t.layerStatesArray[t.layerIndex],x=M.opacity*(c?e.getAlpha(y,t.time):1),T=x!==m.globalAlpha;T&&(m.save(),m.globalAlpha=x),m.drawImage(h,a,a,h.width-2*a,h.height-2*a,i,r,o,s),T&&m.restore(),x!==M.opacity?t.animate=!0:c&&e.endTransition(y)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}updateUsedTiles(e,t,i){const r=$r(t);r in e||(e[r]={}),e[r][i.getKey()]=!0}}const zy={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class RCe extends zx{constructor(e){e=e||{};const t=Object.assign({},e),i=e.cacheSize;delete e.cacheSize,delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=i,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(zy.PRELOAD)}setPreload(e){this.set(zy.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(zy.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(zy.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}class rte extends RCe{constructor(e){super(e)}createRenderer(){return new ite(this,{cacheSize:this.getCacheSize()})}}const DCe={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},Vj={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]};class PCe extends ite{constructor(e,t){super(e,t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.renderedLayerRevision_,this.renderedPixelToCoordinateTransform_=null,this.renderedRotation_,this.renderedOpacity_=1,this.tmpTransform_=wd(),this.tileClipContexts_=null}drawTile(e,t,i,r,o,s,a,c){this.updateExecutorGroup_(e,t.pixelRatio,t.viewState.projection),this.tileImageNeedsRender_(e)&&this.renderTileImage_(e,t),super.drawTile(e,t,i,r,o,s,a,c)}getTile(e,t,i,r){const o=this.getOrCreateTile(e,t,i,r);if(!o)return null;const a=r.viewState.resolution,c=r.viewHints;return(!(c[dl.ANIMATING]||c[dl.INTERACTING])||!o.wantedResolution)&&(o.wantedResolution=a),o}prepareFrame(e){const t=this.getLayer().getRevision();return this.renderedLayerRevision_!==t&&(this.renderedLayerRevision_=t,this.renderedTiles.length=0),super.prepareFrame(e)}updateExecutorGroup_(e,t,i){const r=this.getLayer(),o=r.getRevision(),s=r.getRenderOrder()||null,a=e.wantedResolution,c=e.getReplayState(r);if(!c.dirty&&c.renderedResolution===a&&c.renderedRevision==o&&c.renderedRenderOrder==s)return;const h=r.getSource(),m=!!r.getDeclutter(),y=h.getTileGrid(),x=h.getTileGridForProjection(i).getTileCoordExtent(e.wrappedTileCoord),T=h.getSourceTiles(t,i,e),P=$r(r);delete e.hitDetectionImageData[P],e.executorGroups[P]=[],c.dirty=!1;for(let F=0,j=T.length;F<j;++F){const q=T[F];if(q.getState()!=ai.LOADED)continue;const V=q.tileCoord,H=y.getTileCoordExtent(V),Q=Mm(x,H),Y=Vy(Q,r.getRenderBuffer()*a,this.tempExtent),z=h1(H,Q)?null:Y,se=new Lee(0,Q,a,t),le=aR(a,t),pe=function(je,Ie){let qe;const tt=je.getStyleFunction()||r.getStyleFunction();if(tt&&(qe=tt(je,a)),qe){const At=this.renderFeature(je,le,qe,se,m,Ie);c.dirty=c.dirty||At}},de=q.getFeatures();s&&s!==c.renderedRenderOrder&&de.sort(s);for(let je=0,Ie=de.length;je<Ie;++je){const qe=de[je];(!z||Jl(z,qe.getGeometry().getExtent()))&&pe.call(this,qe,je)}const ve=se.finish(),Ee=r.getRenderMode()!=="vector"&&m&&T.length===1?null:Q,Re=new Fee(Ee,a,t,h.getOverlaps(),ve,r.getRenderBuffer(),!0);e.executorGroups[P].push(Re)}c.renderedRevision=o,c.renderedRenderOrder=s,c.renderedResolution=a}forEachFeatureAtCoordinate(e,t,i,r,o){const s=t.viewState.resolution,a=t.viewState.rotation;i=i??0;const c=this.getLayer(),m=c.getSource().getTileGridForProjection(t.viewState.projection),y=G9([e]);Vy(y,s*i,y);const M={},x=function(V,H,Q){let Y=V.getId();Y===void 0&&(Y=$r(V));const z=M[Y];if(z){if(z!==!0&&Q<z.distanceSq){if(Q===0)return M[Y]=!0,o.splice(o.lastIndexOf(z),1),r(V,c,H);z.geometry=H,z.distanceSq=Q}}else{if(Q===0)return M[Y]=!0,r(V,c,H);o.push(M[Y]={feature:V,layer:c,geometry:H,distanceSq:Q,callback:r})}},T=this.renderedTiles,P=$r(c),F=c.getDeclutter(),j=F?t.declutter?.[F]?.all().map(V=>V.value):null;let q;e:for(let V=0,H=T.length;V<H;++V){const Q=T[V],Y=m.getTileCoordExtent(Q.wrappedTileCoord);if(!Jl(Y,y))continue;const z=Q.executorGroups[P];for(let se=0,le=z.length;se<le;++se)if(q=z[se].forEachFeatureAtCoordinate(e,s,a,i,x,j),q)break e}return q}getFeatures(e){return this.renderedTiles.length===0?Promise.resolve([]):new Promise((t,i)=>{const r=this.getLayer(),o=r.getSource(),s=this.renderedProjection,a=s.getExtent(),c=this.renderedResolution,h=o.getTileGridForProjection(s),m=Hu(this.renderedPixelToCoordinateTransform_,e.slice()),y=h.getTileCoordForCoordAndResolution(m,c).toString(),M=this.renderedTiles.find(V=>V.tileCoord.toString()===y&&V.getState()===ai.LOADED);if(!M||M.loadingSourceTiles>0){t([]);return}o.getWrapX()&&s.canWrapX()&&!Fg(a,h.getTileCoordExtent(M.tileCoord))&&WP(m,s);const x=$r(r),T=h.getTileCoordExtent(M.wrappedTileCoord),P=g1(T),F=[(m[0]-P[0])/c,(P[1]-m[1])/c],j=M.getSourceTiles().reduce((V,H)=>V.concat(H.getFeatures()),[]);let q=M.hitDetectionImageData[x];if(!q){const V=YA(h.getTileSize(h.getZForResolution(c,o.zDirection))),H=this.renderedRotation_,Q=[this.getRenderTransform(h.getTileCoordCenter(M.wrappedTileCoord),c,0,bf,V[0]*bf,V[1]*bf,0)];q=zee(V,Q,j,r.getStyleFunction(),h.getTileCoordExtent(M.wrappedTileCoord),M.getReplayState(r).renderedResolution,H),M.hitDetectionImageData[x]=q}t(jee(F,j,q))})}getFeaturesInExtent(e){const t=[],i=this.getTileCache();if(i.getCount()===0)return t;const o=this.getLayer().getSource().getTileGridForProjection(this.frameState.viewState.projection),s=o.getZForResolution(this.renderedResolution),a={};return i.forEach(c=>{if(c.tileCoord[0]!==s||c.getState()!==ai.LOADED)return;const h=c.getSourceTiles();for(let m=0,y=h.length;m<y;++m){const M=h[m],x=M.getKey();if(x in a)continue;a[x]=!0;const T=M.tileCoord;if(Jl(e,o.getTileCoordExtent(T))){const P=M.getFeatures();if(P)for(let F=0,j=P.length;F<j;++F){const q=P[F],V=q.getGeometry();Jl(e,V.getExtent())&&t.push(q)}}}}),t}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.renderedLayerRevision_!==void 0&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}renderDeclutter(e,t){const i=this.context,r=i.globalAlpha;i.globalAlpha=t.opacity;const o=e.viewHints,s=!(o[dl.ANIMATING]||o[dl.INTERACTING]),a=[this.context.canvas.width,this.context.canvas.height],c=this.getLayer().getDeclutter(),h=c?e.declutter?.[c]:void 0,m=$r(this.getLayer()),y=this.renderedTiles;for(let M=0,x=y.length;M<x;++M){const T=y[M],P=T.executorGroups[m];if(P)for(let F=P.length-1;F>=0;--F)P[F].execute(this.context,a,this.getTileRenderTransform(T,e),e.viewState.rotation,s,hS,h)}i.globalAlpha=r}renderDeferredInternal(e){const t=this.renderedTiles,i=$r(this.getLayer()),r=t.reduce((c,h,m)=>(h.executorGroups[i].forEach(y=>c.push({executorGroup:y,index:m})),c),[]),o=r.map(({executorGroup:c})=>c.getDeferredZIndexContexts()),s={};for(let c=0,h=r.length;c<h;++c){const m=r[c].executorGroup.getDeferredZIndexContexts();for(const y in m)s[y]=!0}Object.keys(s).map(Number).sort(Zg).forEach(c=>{o.forEach((h,m)=>{h[c]&&(h[c].forEach(y=>{const{executorGroup:M,index:x}=r[m],T=M.getRenderedContext(),P=T.globalAlpha;T.globalAlpha=this.renderedOpacity_;const F=this.tileClipContexts_[x];F&&F.draw(T),y.draw(T),F&&T.restore(),T.globalAlpha=P,y.clear()}),h[c].length=0)})})}getTileRenderTransform(e,t){const i=t.pixelRatio,r=t.viewState,o=r.center,s=r.resolution,a=r.rotation,c=t.size,h=Math.round(c[0]*i),m=Math.round(c[1]*i),M=this.getLayer().getSource().getTileGridForProjection(t.viewState.projection),x=e.tileCoord,T=M.getTileCoordExtent(e.wrappedTileCoord),P=M.getTileCoordExtent(x,this.tempExtent)[0]-T[0];return HP(YO(this.inversePixelTransform.slice(),1/i,1/i),this.getRenderTransform(o,s,a,i,h,m,P))}postRender(e,t){const i=t.viewHints,r=!(i[dl.ANIMATING]||i[dl.INTERACTING]);this.renderedPixelToCoordinateTransform_=t.pixelToCoordinateTransform.slice(),this.renderedRotation_=t.viewState.rotation,this.renderedOpacity_=t.layerStatesArray[t.layerIndex].opacity;const o=this.getLayer(),s=o.getRenderMode(),a=e.globalAlpha;e.globalAlpha=this.renderedOpacity_;const c=o.getDeclutter(),h=c?Vj[s].filter(Q=>!hS.includes(Q)):Vj[s],m=t.viewState,y=m.rotation,M=o.getSource(),T=M.getTileGridForProjection(m.projection).getZForResolution(m.resolution,M.zDirection),P=this.renderedTiles,F=[],j=[],q=[],V=$r(o);let H=!0;for(let Q=P.length-1;Q>=0;--Q){const Y=P[Q];H=H&&!Y.getReplayState(o).dirty;const z=Y.executorGroups[V].filter(Re=>Re.hasExecutors(h));if(z.length===0)continue;const se=this.getTileRenderTransform(Y,t),le=Y.tileCoord[0];let pe=!1;const de=z[0].getClipCoords(se);let ve=e,Ee;if(de){Ee=new wU,ve=Ee.getContext();for(let Re=0,je=F.length;Re<je;++Re)if(T!==le&&le<j[Re]){const Ie=F[Re];Jl([de[0],de[3],de[4],de[7]],[Ie[0],Ie[3],Ie[4],Ie[7]])&&(pe||(ve.save(),pe=!0),ve.beginPath(),ve.moveTo(de[0],de[1]),ve.lineTo(de[2],de[3]),ve.lineTo(de[4],de[5]),ve.lineTo(de[6],de[7]),ve.moveTo(Ie[6],Ie[7]),ve.lineTo(Ie[4],Ie[5]),ve.lineTo(Ie[2],Ie[3]),ve.lineTo(Ie[0],Ie[1]),ve.clip())}F.push(de),j.push(le)}for(let Re=0,je=z.length;Re<je;++Re)z[Re].execute(e,[e.canvas.width,e.canvas.height],se,y,r,h,t.declutter?.[c]);pe&&(ve===e?ve.restore():q[Q]=Ee)}e.globalAlpha=a,this.ready=H,this.tileClipContexts_=q,t.declutter||this.renderDeferredInternal(t),super.postRender(e,t)}renderFeature(e,t,i,r,o,s){if(!i)return!1;let a=!1;if(Array.isArray(i))for(let c=0,h=i.length;c<h;++c)a=cS(r,e,i[c],t,this.boundHandleStyleImageChange_,void 0,o,s)||a;else a=cS(r,e,i,t,this.boundHandleStyleImageChange_,void 0,o,s);return a}tileImageNeedsRender_(e){const t=this.getLayer();if(t.getRenderMode()==="vector")return!1;const i=e.getReplayState(t),r=t.getRevision(),o=e.wantedResolution;return i.renderedTileResolution!==o||i.renderedTileRevision!==r}renderTileImage_(e,t){const i=this.getLayer(),r=e.getReplayState(i),o=i.getRevision(),s=e.executorGroups[$r(i)];r.renderedTileRevision=o;const a=e.wrappedTileCoord,c=a[0],h=i.getSource();let m=t.pixelRatio;const M=t.viewState.projection,x=h.getTileGridForProjection(M),T=x.getResolution(e.tileCoord[0]),P=t.pixelRatio/e.wantedResolution*T,F=x.getResolution(c),j=e.getContext();m=Math.round(Math.max(m,P/m));const q=h.getTilePixelSize(c,m,M);j.canvas.width=q[0],j.canvas.height=q[1];const V=m/P;if(V!==1){const z=Vz(this.tmpTransform_);YO(z,V,V),j.setTransform.apply(j,z)}const H=x.getTileCoordExtent(a,this.tempExtent),Q=P/F,Y=Vz(this.tmpTransform_);YO(Y,Q,-Q),A1e(Y,-H[0],-H[3]);for(let z=0,se=s.length;z<se;++z)s[z].execute(j,[j.canvas.width*V,j.canvas.height*V],Y,0,!0,DCe[i.getRenderMode()],null);r.renderedTileResolution=e.wantedResolution}}class p3 extends xU{constructor(e){e=e||{};const t=Object.assign({},e);delete t.preload;const i=e.cacheSize===void 0?0:e.cacheSize;delete e.cacheSize,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=i;const r=e.renderMode||"hybrid";ws(r=="hybrid"||r=="vector","`renderMode` must be `'hybrid'` or `'vector'`"),this.renderMode_=r,this.setPreload(e.preload?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0),this.getBackground,this.setBackground}createRenderer(){return new PCe(this,{cacheSize:this.cacheSize_})}getFeatures(e){return super.getFeatures(e)}getFeaturesInExtent(e){return this.getRenderer().getFeaturesInExtent(e)}getRenderMode(){return this.renderMode_}getPreload(){return this.get(zy.PRELOAD)}getUseInterimTilesOnError(){return this.get(zy.USE_INTERIM_TILES_ON_ERROR)}setPreload(e){this.set(zy.PRELOAD,e)}setUseInterimTilesOnError(e){this.set(zy.USE_INTERIM_TILES_ON_ERROR,e)}}function fR(n){return Array.isArray(n)?Math.min(...n):n}class UCe extends bU{constructor(e,t,i,r,o,s,a){let c=e.getExtent();c&&e.canWrapX()&&(c=c.slice(),c[0]=-1/0,c[2]=1/0);let h=t.getExtent();h&&t.canWrapX()&&(h=h.slice(),h[0]=-1/0,h[2]=1/0);const m=h?Mm(i,h):i,y=Ef(m),M=dR(e,t,y,r),x=tte,T=new ete(e,t,m,c,M*x,r),P=T.calculateSourceExtent(),F=Xb(P)?null:s(P,M,o),j=F?Li.IDLE:Li.EMPTY,q=F?F.getPixelRatio():1;super(i,r,q,j),this.targetProj_=t,this.maxSourceExtent_=c,this.triangulation_=T,this.targetResolution_=r,this.targetExtent_=i,this.sourceImage_=F,this.sourcePixelRatio_=q,this.interpolate_=a,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==Li.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const e=this.sourceImage_.getState();if(e==Li.LOADED){const t=rs(this.targetExtent_)/this.targetResolution_,i=Ju(this.targetExtent_)/this.targetResolution_;this.canvas_=Jee(t,i,this.sourcePixelRatio_,fR(this.sourceImage_.getResolution()),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_,!0)}this.state=e,this.changed()}load(){if(this.state==Li.IDLE){this.state=Li.LOADING,this.changed();const e=this.sourceImage_.getState();e==Li.LOADED||e==Li.ERROR?this.reproject_():(this.sourceListenerKey_=Vo(this.sourceImage_,Ir.CHANGE,t=>{const i=this.sourceImage_.getState();(i==Li.LOADED||i==Li.ERROR)&&(this.unlistenSource_(),this.reproject_())}),this.sourceImage_.load())}}unlistenSource_(){Ta(this.sourceListenerKey_),this.sourceListenerKey_=null}}const cM=4,_B={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};class KCe extends Tm{constructor(e,t){super(e),this.image=t}}class ote extends jx{constructor(e){super({attributions:e.attributions,projection:e.projection,state:e.state,interpolate:e.interpolate!==void 0?e.interpolate:!0}),this.on,this.once,this.un,this.loader=e.loader||null,this.resolutions_=e.resolutions!==void 0?e.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0,this.image=null,this.wantedExtent_,this.wantedResolution_,this.static_=e.loader?e.loader.length===0:!1,this.wantedProjection_=null}getResolutions(){return this.resolutions_}setResolutions(e){this.resolutions_=e}findNearestResolution(e){const t=this.getResolutions();if(t){const i=KE(t,e,0);e=t[i]}return e}getImage(e,t,i,r){const o=this.getProjection();if(!o||!r||Hy(o,r))return o&&(r=o),this.getImageInternal(e,t,i,r);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&Hy(this.reprojectedImage_.getProjection(),r)&&this.reprojectedImage_.getResolution()==t&&h1(this.reprojectedImage_.getExtent(),e))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new UCe(o,r,e,t,i,(s,a,c)=>this.getImageInternal(s,a,c,o),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(e,t,i,r){if(this.loader){const o=LCe(e,t,i,1),s=this.findNearestResolution(t);if(this.image&&(this.static_||this.wantedProjection_===r&&(this.wantedExtent_&&Fg(this.wantedExtent_,o)||Fg(this.image.getExtent(),o))&&(this.wantedResolution_&&fR(this.wantedResolution_)===s||fR(this.image.getResolution())===s)))return this.image;this.wantedProjection_=r,this.wantedExtent_=o,this.wantedResolution_=s,this.image=new bU(o,s,i,this.loader),this.image.addEventListener(Ir.CHANGE,this.handleImageChange.bind(this))}return this.image}handleImageChange(e){const t=e.target;let i;switch(t.getState()){case Li.LOADING:this.loading=!0,i=_B.IMAGELOADSTART;break;case Li.LOADED:this.loading=!1,i=_B.IMAGELOADEND;break;case Li.ERROR:this.loading=!1,i=_B.IMAGELOADERROR;break;default:return}this.hasListener(i)&&this.dispatchEvent(new KCe(i,t))}}function LCe(n,e,t,i){const r=e/t,o=Ef(n),s=Uy(rs(n)/r,cM),a=Uy(Ju(n)/r,cM),c=Uy((i-1)*s/2,cM),h=s+2*c,m=Uy((i-1)*a/2,cM),y=a+2*m;return Jw(o,r,0,[h,y])}const WC=[0,0,0],_y=5;class o6{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,ws(a0e(this.resolutions_,(r,o)=>o-r),"`resolutions` must be sorted in descending order");let t;if(!e.origins){for(let r=0,o=this.resolutions_.length-1;r<o;++r)if(!t)t=this.resolutions_[r]/this.resolutions_[r+1];else if(this.resolutions_[r]/this.resolutions_[r+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,ws(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const i=e.extent;i!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=g1(i)),ws(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,ws(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:cU,ws(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=i!==void 0?i:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((r,o)=>{const s=new OU(Math.min(0,r[0]),Math.max(r[0]-1,-1),Math.min(0,r[1]),Math.max(r[1]-1,-1));if(i){const a=this.getTileRangeForExtentAndZ(i,o);s.minX=Math.max(a.minX,s.minX),s.maxX=Math.min(a.maxX,s.maxX),s.minY=Math.max(a.minY,s.minY),s.maxY=Math.min(a.maxY,s.maxY)}return s}):i&&this.calculateTileRanges_(i)}forEachTileCoord(e,t,i){const r=this.getTileRangeForExtentAndZ(e,t);for(let o=r.minX,s=r.maxX;o<=s;++o)for(let a=r.minY,c=r.maxY;a<=c;++a)i([t,o,a])}forEachTileCoordParentTileRange(e,t,i,r){let o,s,a,c=null,h=e[0]-1;for(this.zoomFactor_===2?(s=e[1],a=e[2]):c=this.getTileCoordExtent(e,r);h>=this.minZoom;){if(s!==void 0&&a!==void 0?(s=Math.floor(s/2),a=Math.floor(a/2),o=jC(s,s,a,a,i)):o=this.getTileRangeForExtentAndZ(c,h,i),t(h,o))return!0;--h}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,i){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const o=e[1]*2,s=e[2]*2;return jC(o,o+1,s,s+1,t)}const r=this.getTileCoordExtent(e,i||this.tmpExtent_);return this.getTileRangeForExtentAndZ(r,e[0]+1,t)}return null}getTileRangeForTileCoordAndZ(e,t,i){if(t>this.maxZoom||t<this.minZoom)return null;const r=e[0],o=e[1],s=e[2];if(t===r)return jC(o,s,o,s,i);if(this.zoomFactor_){const c=Math.pow(this.zoomFactor_,t-r),h=Math.floor(o*c),m=Math.floor(s*c);if(t<r)return jC(h,h,m,m,i);const y=Math.floor(c*(o+1))-1,M=Math.floor(c*(s+1))-1;return jC(h,y,m,M,i)}const a=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,t,i)}getTileRangeForExtentAndZ(e,t,i){this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,WC);const r=WC[1],o=WC[2];this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,WC);const s=WC[1],a=WC[2];return jC(r,s,o,a,i)}getTileCoordCenter(e){const t=this.getOrigin(e[0]),i=this.getResolution(e[0]),r=YA(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*r[0]*i,t[1]-(e[2]+.5)*r[1]*i]}getTileCoordExtent(e,t){const i=this.getOrigin(e[0]),r=this.getResolution(e[0]),o=YA(this.getTileSize(e[0]),this.tmpSize_),s=i[0]+e[1]*o[0]*r,a=i[1]-(e[2]+1)*o[1]*r,c=s+o[0]*r,h=a+o[1]*r;return A1(s,a,c,h,t)}getTileCoordForCoordAndResolution(e,t,i){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,i)}getTileCoordForXYAndResolution_(e,t,i,r,o){const s=this.getZForResolution(i),a=i/this.getResolution(s),c=this.getOrigin(s),h=YA(this.getTileSize(s),this.tmpSize_);let m=a*(e-c[0])/i/h[0],y=a*(c[1]-t)/i/h[1];return r?(m=Uy(m,_y)-1,y=Uy(y,_y)-1):(m=Z5(m,_y),y=Z5(y,_y)),pS(s,m,y,o)}getTileCoordForXYAndZ_(e,t,i,r,o){const s=this.getOrigin(i),a=this.getResolution(i),c=YA(this.getTileSize(i),this.tmpSize_);let h=(e-s[0])/a/c[0],m=(s[1]-t)/a/c[1];return r?(h=Uy(h,_y)-1,m=Uy(m,_y)-1):(h=Z5(h,_y),m=Z5(m,_y)),pS(i,h,m,o)}getTileCoordForCoordAndZ(e,t,i){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,i)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,t){const i=KE(this.resolutions_,e,t||0);return Bl(i,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,t){return tee(t,0,t.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const t=this.resolutions_.length,i=new Array(t);for(let r=this.minZoom;r<t;++r)i[r]=this.getTileRangeForExtentAndZ(e,r);this.fullTileRanges_=i}}function ste(n){let e=n.getDefaultTileGrid();return e||(e=jCe(n),n.setDefaultTileGrid(e)),e}function FCe(n,e,t){const i=e[0],r=n.getTileCoordCenter(e),o=s6(t);if(!Fb(o,r)){const s=rs(o),a=Math.ceil((o[0]-r[0])/s);return r[0]+=s*a,n.getTileCoordForCoordAndZ(r,i)}return e}function zCe(n,e,t,i){i=i!==void 0?i:"top-left";const r=ate(n,e,t);return new o6({extent:n,origin:_0e(n,i),resolutions:r,tileSize:t})}function DU(n){const e=n||{},t=e.extent||Hs("EPSG:3857").getExtent(),i={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:ate(t,e.maxZoom,e.tileSize,e.maxResolution)};return new o6(i)}function ate(n,e,t,i){e=e!==void 0?e:oee,t=YA(t!==void 0?t:cU);const r=Ju(n),o=rs(n);i=i>0?i:Math.max(o/t[0],r/t[1]);const s=e+1,a=new Array(s);for(let c=0;c<s;++c)a[c]=i/Math.pow(2,c);return a}function jCe(n,e,t,i){const r=s6(n);return zCe(r,e,t,i)}function s6(n){n=Hs(n);let e=n.getExtent();if(!e){const t=180*tv.degrees/n.getMetersPerUnit();e=A1(-t,-t,t,t)}return e}class lte extends jx{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const t=[256,256];this.tileGrid&&YA(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),t),this.tmpSize=[0,0],this.key_=e.key||$r(this),this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getResolutions(e){const t=e?this.getTileGridForProjection(e):this.tileGrid;return t?t.getResolutions():null}getTile(e,t,i,r,o){return Pr()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:ste(e)}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,i){const r=this.getTileGridForProjection(i),o=this.getTilePixelRatio(t),s=YA(r.getTileSize(e),this.tmpSize);return o==1?s:kye(s,o,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){const i=t!==void 0?t:this.getProjection(),r=t!==void 0?this.getTileGridForProjection(i):this.tileGrid||this.getTileGridForProjection(i);return this.getWrapX()&&i.isGlobal()&&(e=FCe(r,e,i)),kCe(e,r)?e:null}clear(){}refresh(){this.clear(),super.refresh()}}class NCe extends Tm{constructor(e,t){super(e),this.tile=t}}function ute(n){return function(e){const t=e.buffers,i=e.meta,r=e.imageOps,o=e.width,s=e.height,a=t.length,c=t[0].byteLength;if(r){const M=new Array(a);for(let T=0;T<a;++T)M[T]=new ImageData(new Uint8ClampedArray(t[T]),o,s);return n(M,i).data.buffer}const h=new Uint8ClampedArray(c),m=new Array(a),y=new Array(a);for(let M=0;M<a;++M)m[M]=new Uint8ClampedArray(t[M]),y[M]=[0,0,0,0];for(let M=0;M<c;M+=4){for(let T=0;T<a;++T){const P=m[T];y[T][0]=P[M],y[T][1]=P[M+1],y[T][2]=P[M+2],y[T][3]=P[M+3]}const x=n(y,i);h[M]=x[0],h[M+1]=x[1],h[M+2]=x[2],h[M+3]=x[3]}return h.buffer}}function GCe(n,e){const i=Object.keys(n.lib||{}).map(function(o){return"const "+o+" = "+n.lib[o].toString()+";"}).concat(["const __minion__ = ("+ute.toString()+")(",n.operation.toString(),");",'self.addEventListener("message", function(event) {',"  const buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),r=new Worker(typeof Blob>"u"?"data:text/javascript;base64,"+Buffer.from(i.join(`
`),"binary").toString("base64"):URL.createObjectURL(new Blob(i,{type:"text/javascript"})));return r.addEventListener("message",e),r}function WCe(n,e){const t=ute(n.operation);let i=!1;return{postMessage:function(r){setTimeout(function(){i||e({data:{buffer:t(r),meta:r.meta}})},0)},terminate:function(){i=!0}}}let QCe=class extends t5{constructor(e){super(),this.imageOps_=!!e.imageOps;let t;e.threads===0?t=0:this.imageOps_?t=1:t=e.threads||1;const i=new Array(t);if(t)for(let r=0;r<t;++r)i[r]=GCe(e,this.onWorkerMessage_.bind(this,r));else i[0]=WCe(e,this.onWorkerMessage_.bind(this,0));this.workers_=i,this.queue_=[],this.maxQueueLength_=e.queue||1/0,this.running_=0,this.dataLookup_={},this.job_=null}process(e,t,i){this.enqueue_({inputs:e,meta:t,callback:i}),this.dispatch_()}enqueue_(e){for(this.queue_.push(e);this.queue_.length>this.maxQueueLength_;)this.queue_.shift().callback(null,null)}dispatch_(){if(this.running_||this.queue_.length===0)return;const e=this.queue_.shift();this.job_=e;const t=e.inputs[0].width,i=e.inputs[0].height,r=e.inputs.map(function(c){return c.data.buffer}),o=this.workers_.length;if(this.running_=o,o===1){this.workers_[0].postMessage({buffers:r,meta:e.meta,imageOps:this.imageOps_,width:t,height:i},r);return}const s=e.inputs[0].data.length,a=4*Math.ceil(s/4/o);for(let c=0;c<o;++c){const h=c*a,m=[];for(let y=0,M=r.length;y<M;++y)m.push(r[y].slice(h,h+a));this.workers_[c].postMessage({buffers:m,meta:e.meta,imageOps:this.imageOps_,width:t,height:i},m)}}onWorkerMessage_(e,t){this.disposed||(this.dataLookup_[e]=t.data,--this.running_,this.running_===0&&this.resolveJob_())}resolveJob_(){const e=this.job_,t=this.workers_.length;let i,r;if(t===1)i=new Uint8ClampedArray(this.dataLookup_[0].buffer),r=this.dataLookup_[0].meta;else{const o=e.inputs[0].data.length;i=new Uint8ClampedArray(o),r=new Array(t);const s=4*Math.ceil(o/4/t);for(let a=0;a<t;++a){const c=this.dataLookup_[a].buffer,h=a*s;i.set(new Uint8ClampedArray(c),h),r[a]=this.dataLookup_[a].meta}}this.job_=null,this.dataLookup_={},e.callback(null,new ImageData(i,e.inputs[0].width,e.inputs[0].height),r),this.dispatch_()}disposeInternal(){for(let e=0;e<this.workers_.length;++e)this.workers_[e].terminate();this.workers_.length=0}};const Hj={BEFOREOPERATIONS:"beforeoperations",AFTEROPERATIONS:"afteroperations"};class Zj extends Tm{constructor(e,t,i){super(e),this.extent=t.extent,this.resolution=t.viewState.resolution/t.pixelRatio,this.data=i}}class cte extends ote{constructor(e){super({projection:null}),this.on,this.once,this.un,this.processor_=null,this.operationType_=e.operationType!==void 0?e.operationType:"pixel",this.threads_=e.threads!==void 0?e.threads:1,this.layers_=$Ce(e.sources);const t=this.changed.bind(this);for(let i=0,r=this.layers_.length;i<r;++i)this.layers_[i].addEventListener(Ir.CHANGE,t);this.useResolutions_=e.resolutions!==null,this.tileQueue_=new OJ(function(){return 1},this.processSources_.bind(this)),this.requestedFrameState_,this.renderedImageCanvas_=null,this.renderedRevision_,this.frameState_={animate:!1,coordinateToPixelTransform:wd(),declutter:null,extent:null,index:0,layerIndex:0,layerStatesArray:YCe(this.layers_),pixelRatio:1,pixelToCoordinateTransform:wd(),postRenderFunctions:[],size:[0,0],tileQueue:this.tileQueue_,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{},mapId:$r(this),renderTargets:{}},this.setAttributions(function(i){const r=[];for(let o=0,s=e.sources.length;o<s;++o){const a=e.sources[o],c=a instanceof jx?a:a.getSource();if(!c)continue;const h=c.getAttributions()?.(i);typeof h=="string"?r.push(h):h!==void 0&&r.push(...h)}return r}),e.operation!==void 0&&this.setOperation(e.operation,e.lib)}setOperation(e,t){this.processor_&&this.processor_.dispose(),this.processor_=new QCe({operation:e,imageOps:this.operationType_==="image",queue:1,lib:t,threads:this.threads_}),this.changed()}updateFrameState_(e,t,i){const r=Object.assign({},this.frameState_);r.viewState=Object.assign({},r.viewState);const o=Ef(e);r.size[0]=Math.ceil(rs(e)/t),r.size[1]=Math.ceil(Ju(e)/t),r.extent=[o[0]-r.size[0]*t/2,o[1]-r.size[1]*t/2,o[0]+r.size[0]*t/2,o[1]+r.size[1]*t/2],r.time=Date.now();const s=r.viewState;return s.center=o,s.projection=i,s.resolution=t,r}allSourcesReady_(){let e=!0,t;for(let i=0,r=this.layers_.length;i<r;++i)if(t=this.layers_[i].getSource(),!t||t.getState()!=="ready"){e=!1;break}return e}getImage(e,t,i,r){if(!this.allSourcesReady_())return null;this.tileQueue_.loadMoreTiles(16,16),t=this.findNearestResolution(t);const o=this.updateFrameState_(e,t,r);if(this.requestedFrameState_=o,this.renderedImageCanvas_){const s=this.renderedImageCanvas_.getResolution(),a=this.renderedImageCanvas_.getExtent();(t!==s||!h1(o.extent,a))&&(this.renderedImageCanvas_=null)}return(!this.renderedImageCanvas_||this.getRevision()!==this.renderedRevision_)&&this.processSources_(),o.animate&&requestAnimationFrame(this.changed.bind(this)),this.renderedImageCanvas_}processSources_(){const e=this.requestedFrameState_,t=this.layers_.length,i=new Array(t);for(let o=0;o<t;++o){e.layerIndex=o,e.renderTargets={};const s=qCe(this.layers_[o],e);if(s)i[o]=s;else return}const r={};this.dispatchEvent(new Zj(Hj.BEFOREOPERATIONS,e,r)),this.processor_.process(i,r,this.onWorkerComplete_.bind(this,e))}onWorkerComplete_(e,t,i,r){if(t||!i)return;const o=e.extent,s=e.viewState.resolution;if(s!==this.requestedFrameState_.viewState.resolution||!h1(o,this.requestedFrameState_.extent))return;let a;if(this.renderedImageCanvas_)a=this.renderedImageCanvas_.getImage().getContext("2d");else{const c=Math.round(rs(o)/s),h=Math.round(Ju(o)/s);a=Il(c,h),this.renderedImageCanvas_=new fbe(o,s,1,a.canvas)}a.putImageData(i,0,0),e.animate?requestAnimationFrame(this.changed.bind(this)):this.changed(),this.renderedRevision_=this.getRevision(),this.dispatchEvent(new Zj(Hj.AFTEROPERATIONS,e,r))}getResolutions(e){if(!this.useResolutions_)return null;let t=super.getResolutions();if(!t)for(let i=0,r=this.layers_.length;i<r&&(t=this.layers_[i].getSource().getResolutions(e),!t);++i);return t}disposeInternal(){this.processor_&&this.processor_.dispose(),super.disposeInternal()}}cte.prototype.dispose;let tb=null;function qCe(n,e){const t=n.getRenderer();if(!t)throw new Error("Unsupported layer type: "+n);if(!t.prepareFrame(e))return null;const i=e.size[0],r=e.size[1];if(i===0||r===0)return null;const o=t.renderFrame(e,null);let s;if(o instanceof HTMLCanvasElement)s=o;else{if(o&&(s=o.firstElementChild),!(s instanceof HTMLCanvasElement))throw new Error("Unsupported rendered element: "+s);if(s.width===i&&s.height===r)return s.getContext("2d").getImageData(0,0,i,r)}if(!tb)tb=Il(i,r,void 0,{willReadFrequently:!0});else{const a=tb.canvas;a.width!==i||a.height!==r?tb=Il(i,r,void 0,{willReadFrequently:!0}):tb.clearRect(0,0,i,r)}return tb.drawImage(s,0,0,i,r),tb.getImageData(0,0,i,r)}function YCe(n){return n.map(function(e){return e.getLayerState()})}function $Ce(n){const e=n.length,t=new Array(e);for(let i=0;i<e;++i)t[i]=VCe(n[i]);return t}function VCe(n){let e;return n instanceof jx?n instanceof lte?e=new rte({source:n}):n instanceof ote&&(e=new Xee({source:n})):e=n,e}function HCe(n,e,t,i){const r=document.createElement("script"),o="olc_"+$r(e);function s(){delete window[o],r.parentNode.removeChild(r)}r.async=!0,r.src=n+(n.includes("?")?"&":"?")+"callback="+o;const a=setTimeout(function(){s(),t&&t()},1e4);window[o]=function(c){clearTimeout(a),s(),e(c)},document.head.appendChild(r)}const ZCe=/\{z\}/g,XCe=/\{x\}/g,JCe=/\{y\}/g,e_e=/\{-y\}/g;function t_e(n,e,t,i,r){return n.replace(ZCe,e.toString()).replace(XCe,t.toString()).replace(JCe,i.toString()).replace(e_e,function(){if(r===void 0)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(r-i).toString()})}function n_e(n){const e=[];let t=/\{([a-z])-([a-z])\}/.exec(n);if(t){const i=t[1].charCodeAt(0),r=t[2].charCodeAt(0);let o;for(o=i;o<=r;++o)e.push(n.replace(t[0],String.fromCharCode(o)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(n),t){const i=parseInt(t[2],10);for(let r=parseInt(t[1],10);r<=i;r++)e.push(n.replace(t[0],r.toString()));return e}return e.push(n),e}function i_e(n,e){return(function(t,i,r){if(!t)return;let o;const s=t[0];if(e){const a=e.getFullTileRange(s);a&&(o=a.getHeight()-1)}return t_e(n,s,t[1],t[2],o)})}function Ate(n,e){const t=n.length,i=new Array(t);for(let r=0;r<t;++r)i[r]=i_e(n[r],e);return r_e(i)}function r_e(n){return n.length===1?n[0]:(function(e,t,i){if(!e)return;const r=BCe(e),o=Ib(r,n.length);return n[o](e,t,i)})}const xB={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class a6 extends lte{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===a6.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const t=e.target,i=$r(t),r=t.getState();let o;r==ai.LOADING?(this.tileLoadingKeys_[i]=!0,o=xB.TILELOADSTART):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],o=r==ai.ERROR?xB.TILELOADERROR:r==ai.LOADED?xB.TILELOADEND:void 0),o!=null&&this.dispatchEvent(new NCe(o,t))}setTileLoadFunction(e){this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,typeof t<"u"?this.setKey(t):this.changed()}setUrl(e){const t=n_e(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;const t=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(Ate(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,i){}}class o_e extends a6{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:s_e,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:Nee,this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(e){return this.getProjection()&&e&&!Hy(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||Hy(t,e)))return this.tileGrid;const i=$r(e);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=ste(e)),this.tileGridForProjection[i]}createTile_(e,t,i,r,o,s){const a=[e,t,i],c=this.getTileCoordForTileUrlFunction(a,o),h=c?this.tileUrlFunction(c,r,o):void 0,m=new this.tileClass(a,h!==void 0?ai.IDLE:ai.EMPTY,h!==void 0?h:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return m.key=s,m.addEventListener(Ir.CHANGE,this.handleTileChange.bind(this)),m}getTile(e,t,i,r,o){const s=this.getProjection();if(!s||!o||Hy(s,o))return this.getTileInternal(e,t,i,r,s||o);const a=[e,t,i],c=this.getKey(),h=this.getTileGridForProjection(s),m=this.getTileGridForProjection(o),y=this.getTileCoordForTileUrlFunction(a,o),M=new nte(s,h,o,m,a,y,this.getTilePixelRatio(r),this.getGutter(),(x,T,P,F)=>this.getTileInternal(x,T,P,F,s),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return M.key=c,M}getTileInternal(e,t,i,r,o){const s=this.getKey();return this.createTile_(e,t,i,r,o,s)}setRenderReprojectionEdges(e){this.renderReprojectionEdges_!=e&&(this.renderReprojectionEdges_=e,this.changed())}setTileGridForProjection(e,t){const i=Hs(e);if(i){const r=$r(i);r in this.tileGridForProjection||(this.tileGridForProjection[r]=t)}}}function s_e(n,e){n.getImage().src=e}class hte extends o_e{constructor(e){if(super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:Hs("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.tileJSON_=null,this.tileSize_=e.tileSize,e.url)if(e.jsonp)HCe(e.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const t=new XMLHttpRequest;t.addEventListener("load",this.onXHRLoad_.bind(this)),t.addEventListener("error",this.onXHRError_.bind(this)),t.open("GET",e.url),t.send()}else if(e.tileJSON)this.handleTileJSONResponse(e.tileJSON);else throw new Error("Either `url` or `tileJSON` options must be provided")}onXHRLoad_(e){const t=e.target;if(!t.status||t.status>=200&&t.status<300){let i;try{i=JSON.parse(t.responseText)}catch{this.handleTileJSONError();return}this.handleTileJSONResponse(i)}else this.handleTileJSONError()}onXHRError_(e){this.handleTileJSONError()}getTileJSON(){return this.tileJSON_}handleTileJSONResponse(e){const t=Hs("EPSG:4326"),i=this.getProjection();let r;if(e.bounds!==void 0){const h=s5(t,i);r=w0e(e.bounds,h)}const o=s6(i),s=e.minzoom||0,a=e.maxzoom||22,c=DU({extent:o,maxZoom:a,minZoom:s,tileSize:this.tileSize_});if(this.tileGrid=c,this.tileUrlFunction=Ate(e.tiles,c),e.attribution&&!this.getAttributions()){const h=r!==void 0?r:o;this.setAttributions(function(m){return Jl(h,m.extent)?[e.attribution]:null})}this.tileJSON_=e,this.setState("ready")}handleTileJSONError(){this.setState("error")}}class PU extends a6{constructor(e){const t=e.projection||"EPSG:3857",i=e.extent||s6(t),r=e.tileGrid||DU({extent:i,maxResolution:e.maxResolution,maxZoom:e.maxZoom!==void 0?e.maxZoom:22,minZoom:e.minZoom,tileSize:e.tileSize||512});super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,interpolate:!0,projection:t,state:e.state,tileGrid:r,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:dte,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX===void 0?!0:e.wrapX,transition:e.transition,zDirection:e.zDirection===void 0?1:e.zDirection}),this.format_=e.format?e.format:null,this.tileKeysBySourceTileUrl_={},this.sourceTiles_={},this.overlaps_=e.overlaps==null?!0:e.overlaps,this.tileClass=e.tileClass?e.tileClass:Gee,this.tileGrids_={}}getOverlaps(){return this.overlaps_}getSourceTiles(e,t,i){if(i.getState()===ai.IDLE){i.setState(ai.LOADING);const r=i.wrappedTileCoord,o=this.getTileGridForProjection(t),s=o.getTileCoordExtent(r),a=r[0],c=o.getResolution(a);Vy(s,-c,s);const h=this.tileGrid,m=h.getExtent();m&&Mm(s,m,s);const y=h.getZForResolution(c,this.zDirection);h.forEachTileCoord(s,y,M=>{const x=this.tileUrlFunction(M,e,t);this.sourceTiles_[x]||(this.sourceTiles_[x]=new this.tileClass(M,x?ai.IDLE:ai.EMPTY,x,this.format_,this.tileLoadFunction));const T=this.sourceTiles_[x];i.sourceTiles.push(T),this.tileKeysBySourceTileUrl_[x]||(this.tileKeysBySourceTileUrl_[x]=[]),this.tileKeysBySourceTileUrl_[x].push(i.getKey());const P=T.getState();if(P<ai.LOADED){const F=j=>{this.handleTileChange(j);const q=T.getState();if(q===ai.LOADED||q===ai.ERROR){const V=T.getKey();V in i.errorTileKeys?T.getState()===ai.LOADED&&delete i.errorTileKeys[V]:i.loadingSourceTiles--,q===ai.ERROR?i.errorTileKeys[V]=!0:T.removeEventListener(Ir.CHANGE,F),i.loadingSourceTiles===0&&i.setState(ev(i.errorTileKeys)?ai.LOADED:ai.ERROR)}};T.addEventListener(Ir.CHANGE,F),i.loadingSourceTiles++}P===ai.IDLE&&(T.extent=h.getTileCoordExtent(M),T.projection=t,T.resolution=h.getResolution(M[0]),T.load())}),i.loadingSourceTiles||i.setState(i.sourceTiles.some(M=>M.getState()===ai.ERROR)?ai.ERROR:ai.LOADED)}return i.sourceTiles}removeSourceTiles(e){const t=e.getKey(),i=e.sourceTiles;for(let r=0,o=i.length;r<o;++r){const s=i[r].getTileUrl();if(!this.tileKeysBySourceTileUrl_[s])return;const a=this.tileKeysBySourceTileUrl_[s].indexOf(t);a!==-1&&(this.tileKeysBySourceTileUrl_[s].splice(a,1),this.tileKeysBySourceTileUrl_[s].length===0&&(delete this.tileKeysBySourceTileUrl_[s],delete this.sourceTiles_[s]))}}getTile(e,t,i,r,o){const s=[e,t,i];let a=this.getTileCoordForTileUrlFunction(s,o);const c=this.getTileGrid().getExtent(),h=this.getTileGridForProjection(o);if(a&&c){const M=h.getTileCoordExtent(a);Vy(M,-h.getResolution(e),M),Jl(c,M)||(a=null)}let m=!0;if(a!==null){const M=this.tileGrid,x=h.getResolution(e),T=M.getZForResolution(x,1),P=h.getTileCoordExtent(a);Vy(P,-x,P),M.forEachTileCoord(P,T,F=>{m=m&&!this.tileUrlFunction(F,r,o)})}const y=new gbe(s,m?ai.EMPTY:ai.IDLE,a,this.getSourceTiles.bind(this,r,o),this.removeSourceTiles.bind(this));return y.key=this.getKey(),y}getTileGridForProjection(e){const t=e.getCode();let i=this.tileGrids_[t];if(!i){const r=this.getProjection();ws(r===null||Hy(r,e),"A VectorTile source can only be rendered if it has a projection compatible with the view projection.");const o=this.tileGrid,s=o.getResolutions().slice(),a=s.map(function(m,y){return o.getOrigin(y)}),c=s.map(function(m,y){return o.getTileSize(y)}),h=oee+1;for(let m=s.length;m<h;++m)s.push(s[m-1]/2),a.push(a[m-1]),c.push(c[m-1]);i=new o6({extent:o.getExtent(),origins:a,resolutions:s,tileSizes:c}),this.tileGrids_[t]=i}return i}getTilePixelRatio(e){return e}getTilePixelSize(e,t,i){const r=this.getTileGridForProjection(i),o=YA(r.getTileSize(e),this.tmpSize);return[Math.round(o[0]*t),Math.round(o[1]*t)]}setOverlaps(e){this.overlaps_=e,this.changed()}}function dte(n,e){n.setLoader(function(t,i,r){Kee(e,n.getFormat(),t,i,r,n.onLoad.bind(n),n.onError.bind(n))})}function a_e(n,e){const t=n[0],i=t.width,r=t.height,o=t.data,s=new Uint8ClampedArray(o.length),a=e.resolution*2,c=i-1,h=r-1,m=[0,0,0,0],y=2*Math.PI,M=Math.PI/2,x=Math.PI*e.sunEl/180,T=Math.PI*e.sunAz/180,P=Math.cos(x),F=Math.sin(x),j=e.highlightColor,q=e.shadowColor,V=e.accentColor,H=e.encoding;let Q,Y,z,se,le,pe,de,ve,Ee,Re,je,Ie,qe,tt,At,ke,we,ze,Me,lt,nt,bt;function Bt(Ke,Te="mapbox"){if(Te==="mapbox")return(Ke[0]*256*256+Ke[1]*256+Ke[2])*.1-1e4;if(Te==="terrarium")return Ke[0]*256+Ke[1]+Ke[2]/256-32768}for(Y=0;Y<=h;++Y)for(le=Y===0?0:Y-1,pe=Y===h?h:Y+1,Q=0;Q<=c;++Q)z=Q===0?0:Q-1,se=Q===c?c:Q+1,de=(Y*i+z)*4,m[0]=o[de],m[1]=o[de+1],m[2]=o[de+2],m[3]=o[de+3],ve=e.vert*Bt(m,H),de=(Y*i+se)*4,m[0]=o[de],m[1]=o[de+1],m[2]=o[de+2],m[3]=o[de+3],Ee=e.vert*Bt(m,H),Re=(Ee-ve)/a,de=(le*i+Q)*4,m[0]=o[de],m[1]=o[de+1],m[2]=o[de+2],m[3]=o[de+3],ve=e.vert*Bt(m,H),de=(pe*i+Q)*4,m[0]=o[de],m[1]=o[de+1],m[2]=o[de+2],m[3]=o[de+3],Ee=e.vert*Bt(m,H),je=(Ee-ve)/a,qe=Math.atan2(je,-Re),qe<0?qe=M-qe:qe>M?qe=y-qe+M:qe=M-qe,Ie=Math.atan(Math.sqrt(Re*Re+je*je)),bt=F*Math.cos(Ie)+P*Math.sin(Ie)*Math.cos(T-qe),tt=Math.cos(Ie),At=255*bt,Me=Math.min(Math.max(2*e.sunEl,0),1),lt=1.875-e.opacity*1.75,nt=e.opacity!==.5?M*((Math.pow(lt,Ie)-1)/(Math.pow(lt,M)-1)):Ie,we={r:(1-tt)*V.r*Me*255,g:(1-tt)*V.g*Me*255,b:(1-tt)*V.b*Me*255,a:(1-tt)*V.a*Me*255},ke=Math.abs(((qe+T)/Math.PI+.5)%2-1),ze={r:(j.r*(1-ke)+q.r*ke)*At,g:(j.g*(1-ke)+q.g*ke)*At,b:(j.b*(1-ke)+q.b*ke)*At,a:(j.a*(1-ke)+q.a*ke)*At},de=(Y*i+Q)*4,s[de]=we.r*(1-ke)+ze.r,s[de+1]=we.g*(1-ke)+ze.g,s[de+2]=we.b*(1-ke)+ze.b,s[de+3]=o[de+3]*e.opacity*Me*Math.sin(nt);return new ImageData(s,i,r)}function l_e(n,e=512){return n.getExtent()?DU({extent:n.getExtent(),tileSize:e,maxZoom:22}).getResolutions():Jg}function fte(n,e){return e.accessToken||(e=Object.assign({},e),new URL(n).searchParams.forEach((i,r)=>{e.accessToken=i,e.accessTokenParam=r})),e}function u_e(n,e,t="",i={},r=void 0){let o,s,a,c,h=!0;return typeof t!="string"&&!Array.isArray(t)?(a=t,c=a.source||a.layers,i=a):c=t,typeof i=="string"?(o=i,a={}):(o=i.styleUrl,a=i),a.updateSource===!1&&(h=!1),r||(r=a.resolutions),!o&&typeof e=="string"&&!e.trim().startsWith("{")&&(o=e),o&&(o=o.startsWith("data:")?location.href:dS(o,a.accessToken),a=fte(o,a)),new Promise(function(m,y){qee(e,a).then(function(M){if(M.version!=8)return y(new Error("glStyle version 8 required."));if(!(n instanceof EU||n instanceof p3))return y(new Error("Can only apply to VectorLayer or VectorTileLayer"));const x=n instanceof p3?"vector":"geojson";if(c?Array.isArray(c)?s=M.layers.find(function(H){return H.id===c[0]}).source:s=c:(s=M.layers.find(function(H){return H.source&&M.sources[H.source].type===x}).source,c=s),!s)return y(new Error(`No ${x} source found in the glStyle.`));function T(){if(!h)return Promise.resolve();if(n instanceof p3)return gte(M.sources[s],o,a).then(function(z){const se=n.getSource();se?z!==se&&(se.setTileUrlFunction(z.getTileUrlFunction()),typeof se.setUrls=="function"&&typeof z.getUrls=="function"&&se.setUrls(z.getUrls()),se.format_||(se.format_=z.format_),se.getAttributions()||se.setAttributions(z.getAttributions()),se.getTileLoadFunction()===dte&&se.setTileLoadFunction(z.getTileLoadFunction()),Hy(se.getProjection(),z.getProjection())&&(se.tileGrid=z.getTileGrid())):n.setSource(z);const le=n.getSource().getTileGrid();!isFinite(n.getMaxResolution())&&!isFinite(n.getMinZoom())&&le.getMinZoom()>0&&n.setMaxResolution(Y2(Math.max(0,le.getMinZoom()-1e-12),le.getResolutions()))});const H=M.sources[s];let Q=n.getSource();(!Q||Q.get("mapbox-source")!==H)&&(Q=bte(H,o,a));const Y=n.getSource();return Y?Q!==Y&&(Y.getAttributions()||Y.setAttributions(Q.getAttributions()),Y.format_||(Y.format_=Q.getFormat()),Y.url_=Q.getUrl()):n.setSource(Q),Promise.resolve()}let P,F;const j={},q={};function V(){if(!F&&(!M.sprite||j)){if(a.projection&&!r){const z=Hs(a.projection).getUnits();z!=="m"&&(r=Jg.map(se=>se/tv[z]))}let H;const Q=n.getSource();Q instanceof PU&&Q.format_ instanceof Zee&&(H=Q.format_.layerName_),F=Rbe(n,M,c,r,j,q,(Y,z=a.webfonts)=>Sbe(Y,z),a.getImage,H),n.getStyle()?T().then(m).catch(y):y(new Error(`Nothing to show for source [${s}]`))}else F?(n.setStyle(F),T().then(m).catch(y)):y(new Error("Something went wrong trying to apply style."))}if(M.sprite){const H=ybe(M.sprite,a.accessToken,o||location.href);P=window.devicePixelRatio>=1.5?.5:1;const Q=P==.5?"@2x":"";Promise.all(H.map(function(Y){const z=new URL(Y.url);let se=z.origin+z.pathname+Q+".json"+z.search;return new Promise(function(le,pe){yx("Sprite",se,a).then(le).catch(function(de){se=z.origin+z.pathname+".json"+z.search,yx("Sprite",se,a).then(le).catch(pe)})}).then(function(le){le===void 0&&y(new Error("No sprites found."));let pe;if(pe=z.origin+z.pathname+Q+".png"+z.search,a.transformRequest){const de=a.transformRequest(pe,"SpriteImage")||pe;(de instanceof Request||de instanceof Promise)&&(pe=de)}q[Y.id]=pe;for(const de in le){const ve=Y.id=="default"?de:`${Y.id}:${de}`;j[ve]=le[de]}}).catch(function(le){y(new Error(`Sprites cannot be loaded: ${se}: ${le.message}`))})})).then(V).catch(y)}else V()}).catch(y)})}function pte(n,e){let t;return n.some(function(i){if(i.id==e)return t=i.source,!0}),t}function c_e(n,e){const t=n.bounds;if(t){const i=H9([t[0],t[1]],e),r=H9([t[2],t[3]],e);return[i[0],i[1],r[0],r[1]]}return Hs(e).getExtent()}function mte(n,e,t){const i=new hte({tileJSON:e,tileSize:n.tileSize||e.tileSize||512}),r=i.getTileJSON(),o=i.getTileGrid(),s=Hs(t.projection||"EPSG:3857"),a=c_e(r,s),c=s.getExtent(),h=r.minzoom||0,m=r.maxzoom||22,y={attributions:i.getAttributions(),projection:s,tileGrid:new o6({origin:c?g1(c):o.getOrigin(0),extent:a||o.getExtent(),minZoom:h,resolutions:l_e(s,e.tileSize).slice(0,m+1),tileSize:o.getTileSize(0)})};return Array.isArray(r.tiles)?y.urls=r.tiles:y.url=r.tiles,y}function A_e(n,e,t,i){const r={id:n.id,type:n.type},o=n.layout||{},s=n.paint||{};r.paint=s,Sf.zoom=kU(e,t.resolutions||Jg),Sf.distanceFromCenter=0;let a;const c=Yi(r,"paint","background-color",vm,i);return s["background-opacity"]!==void 0&&(a=Yi(r,"paint","background-opacity",vm,i)),o.visibility=="none"?void 0:Sy(c,a)}function h_e(n,e,t){const i=document.createElement("div");return i.className="ol-mapbox-style-background",i.style.position="absolute",i.style.width="100%",i.style.height="100%",new zx({source:new jx({}),render(r){const o=A_e(n,r.viewState.resolution,e,t);return i.style.backgroundColor=o,i}})}function gte(n,e,t){return new Promise(function(i,r){Yee(n,e,t).then(function({tileJson:o,tileLoadFunction:s}){const a=mte(n,o,t);a.tileLoadFunction=s,a.format=new Zee({layerName:"mvt:layer"});const c=new PU(a);c.set("mapbox-source",n),i(c)}).catch(r)})}function d_e(n,e,t){const i=new p3({declutter:!0,visible:!1});return gte(n,e,t).then(function(r){i.setSource(r)}).catch(function(r){i.setSource(void 0)}),i}function yte(n){return`{bbox-${(n?n.getCode():"EPSG:3857").toLowerCase().replace(/[^a-z0-9]/g,"-")}}`}function f_e(n,e,t){return new Promise(function(i,r){Yee(n,e,t).then(function({tileJson:o,tileLoadFunction:s}){const a=new hte({interpolate:t.interpolate===void 0?!0:t.interpolate,transition:0,crossOrigin:"anonymous",tileJSON:o});a.tileGrid=mte(n,o,t).tileGrid,t.projection&&(a.projection=Hs(t.projection));const c=a.getTileUrlFunction();s&&a.setTileLoadFunction(s),a.setTileUrlFunction(function(h,m,y){const M=yte(y);let x=c(h,m,y);if(x.indexOf(M)!=-1){const T=a.getTileGrid().getTileCoordExtent(h);x=x.replace(M,T.toString())}return x}),a.set("mapbox-source",n),i(a)}).catch(function(o){r(o)})})}function vte(n,e,t){const i=new rte;return f_e(n,e,t).then(function(r){i.setSource(r)}).catch(function(){i.setSource(void 0)}),i}function p_e(n,e,t){const i=vte(n,e,t);return new Xee({source:new cte({operationType:"image",operation:a_e,sources:[i]})})}function bte(n,e,t){const i=t.projection?new jj({dataProjection:t.projection}):new jj,r=n.data,o={};if(typeof r=="string"){const[a]=cw(r,t.accessToken,t.accessTokenParam||"access_token",e||location.href);if(/\{bbox-[0-9a-z-]+\}/.test(a)){const h=(y,M,x)=>{const T=yte(x);return a.replace(T,`${y.join(",")}`)},m=new uw({attributions:n.attribution,format:i,loader:(y,M,x,T,P)=>{const F=typeof h=="function"?h(y,M,x):h;yx("GeoJSON",F,t).then(j=>{const q=m.getFormat().readFeatures(j,{featureProjection:x});m.addFeatures(q),T(q)}).catch(j=>{m.removeLoadedExtent(y),P()})},strategy:Zve});return m.set("mapbox-source",n),m}const c=new uw({attributions:n.attribution,format:i,url:a,loader:(h,m,y,M,x)=>{yx("GeoJSON",a,t).then(T=>{const P=c.getFormat().readFeatures(T,{featureProjection:y});c.addFeatures(P),M(P)}).catch(T=>{c.removeLoadedExtent(h),x()})}});return c}o.features=i.readFeatures(r,{featureProjection:"EPSG:3857"});const s=new uw(Object.assign({attributions:n.attribution,format:i},o));return s.set("mapbox-source",n),s}function m_e(n,e,t){return new EU({declutter:!0,source:bte(n,e,t),visible:!1})}function g_e(n,e,t){let i=null;return function(r){n.paint&&"raster-opacity"in n.paint&&r.frameState.viewState.zoom!==i&&(i=r.frameState.viewState.zoom,delete t[n.id],y_e(n,e,i,t))}}function y_e(n,e,t,i){Sf.zoom=t,Sf.distanceFromCenter=0;const r=Yi(n,"paint","raster-opacity",vm,i);e.setOpacity(r)}function v_e(n,e){function t(){const i=e.get("mapbox-style");if(!i)return;const r=eJ(i.layers),o=n.get("mapbox-layers"),s=r.filter(function(a){return o.includes(a.id)}).some(function(a){return!a.layout||!a.layout.visibility||a.layout.visibility==="visible"});n.get("visible")!==s&&n.setVisible(s)}n.on("change",t),t()}function b_e(n,e,t,i){const r=Qee(n),o=n.layers,s=t.type,a=t.source||pte(o,t.ref),c=n.sources[a];let h;if(s=="background")h=h_e(t,i,r);else if(c.type=="vector")h=d_e(c,e,i);else if(c.type=="raster")h=vte(c,e,i),h.setVisible(t.layout?t.layout.visibility!=="none":!0),h.on("prerender",g_e(t,h,r));else if(c.type=="geojson")h=m_e(c,e,i);else if(c.type=="raster-dem"&&t.type=="hillshade"){const y=p_e(c,e,i);h=y,y.getSource().on("beforeoperations",function(M){const x=M.data;x.resolution=V9(i.projection||"EPSG:3857",M.resolution,Ef(M.extent),"m"),Sf.zoom=kU(M.resolution,i.resolutions||Jg),Sf.distanceFromCenter=0,x.encoding=c.encoding,x.vert=5*Yi(t,"paint","hillshade-exaggeration",vm,r),x.sunAz=Yi(t,"paint","hillshade-illumination-direction",vm,r),x.sunEl=35,x.opacity=.3,x.highlightColor=Yi(t,"paint","hillshade-highlight-color",vm,r),x.shadowColor=Yi(t,"paint","hillshade-shadow-color",vm,r),x.accentColor=Yi(t,"paint","hillshade-accent-color",vm,r)}),h.setVisible(t.layout?t.layout.visibility!=="none":!0)}const m=a;return h&&h.set("mapbox-source",m),h}function Xj(n,e,t,i){const r=[];let o=null;if(e instanceof t6){if(o=e.getView(),!o.isDef()&&!o.getRotation()&&!o.getResolutions()){const y=i.projection?Hs(i.projection):o.getProjection();o=new gm(Object.assign(o.getProperties(),{maxResolution:Jg[0]/tv[y.getUnits()],projection:i.projection||o.getProjection()})),e.setView(o)}"center"in n&&!o.getCenter()&&o.setCenter(H9(n.center,o.getProjection())),"zoom"in n&&o.getZoom()===void 0&&o.setResolution(Jg[0]/tv[o.getProjection().getUnits()]/Math.pow(2,n.zoom)),(!o.getCenter()||o.getZoom()===void 0)&&o.fit(o.getProjection().getExtent(),{nearest:!0,size:e.getSize()})}e.set("mapbox-style",n),e.set("mapbox-metadata",{styleUrl:t,options:i});const s=n.layers;let a=[],c,h,m;for(let y=0,M=s.length;y<M;++y){const x=s[y],T=x.type;if(T=="heatmap"){console.debug(`layers[${y}].type "${T}" not supported`);continue}else m=x.source||pte(s,x.ref),(!m||m!=h)&&(a.length&&(r.push(Jj(c,a,n,t,e,i)),a=[]),c=b_e(n,t,x,i),c instanceof EU||c instanceof p3||(a=[]),h=c.get("mapbox-source")),a.push(x.id)}return r.push(Jj(c,a,n,t,e,i)),Promise.all(r)}function C_e(n,e,t={}){let i,r;if(typeof n=="string"||n instanceof HTMLElement?r=new t6({target:n}):r=n,typeof e=="string"){const o=e.startsWith("data:")?location.href:dS(e,t.accessToken);t=fte(o,t),i=new Promise(function(s,a){qee(e,t).then(function(c){Xj(c,r,o,t).then(function(){s(r)}).catch(a)}).catch(function(c){a(new Error(`Could not load ${e}: ${c.message}`))})})}else i=new Promise(function(o,s){Xj(e,r,!t.styleUrl||t.styleUrl.startsWith("data:")?location.href:dS(t.styleUrl,t.accessToken),t).then(function(){o(r)}).catch(s)});return i}function Jj(n,e,t,i,r,o={}){let s=24,a=0;const c=t.layers;for(let h=0,m=c.length;h<m;++h){const y=c[h];e.indexOf(y.id)!==-1&&(s=Math.min("minzoom"in y?y.minzoom:0,s),a=Math.max("maxzoom"in y?y.maxzoom:24,a))}return new Promise(function(h,m){const y=function(){const x=n.getSource();if(!x||x.getState()==="error"){m(new Error("Error accessing data for source "+n.get("mapbox-source")));return}if("getTileGrid"in x){const T=x.getTileGrid();if(T){const P=T.getMinZoom();(s>0||P>0)&&n.setMaxResolution(Math.min(Y2(Math.max(0,s-1e-12),Jg),Y2(Math.max(0,P-1e-12),T.getResolutions()))),a<24&&n.setMinResolution(Y2(a,Jg))}}else s>0&&n.setMaxResolution(Y2(Math.max(0,s-1e-12),Jg));x instanceof uw||x instanceof PU?u_e(n,t,e,Object.assign({styleUrl:i},o)).then(function(){v_e(n,r),h()}).catch(m):h()};n.set("mapbox-layers",e);const M=r.getLayers();M.getArray().indexOf(n)===-1&&M.push(n),n.getSource()?y():n.once("change:source",y)})}function Oi(){var n="/home/runner/work/maputnik/maputnik/src/components/MapOpenLayers.tsx",e="5f4719fc476214e7aff32d9043337b9c97544cf9",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/MapOpenLayers.tsx",statementMap:{0:{start:{line:11,column:2},end:{line:15,column:3}},1:{start:{line:12,column:4},end:{line:12,column:16}},2:{start:{line:14,column:4},end:{line:14,column:149}},3:{start:{line:14,column:103},end:{line:14,column:133}},4:{start:{line:18,column:24},end:{line:25,column:3}},5:{start:{line:28,column:14},end:{line:28,column:18}},6:{start:{line:30,column:19},end:{line:30,column:23}},7:{start:{line:32,column:4},end:{line:32,column:17}},8:{start:{line:33,column:4},end:{line:38,column:6}},9:{start:{line:39,column:4},end:{line:39,column:67}},10:{start:{line:42,column:4},end:{line:42,column:26}},11:{start:{line:42,column:19},end:{line:42,column:26}},12:{start:{line:43,column:4},end:{line:43,column:33}},13:{start:{line:44,column:4},end:{line:44,column:33}},14:{start:{line:47,column:4},end:{line:51,column:5}},15:{start:{line:48,column:6},end:{line:50,column:8}},16:{start:{line:54,column:4},end:{line:61,column:7}},17:{start:{line:62,column:16},end:{line:69,column:6}},18:{start:{line:70,column:4},end:{line:78,column:7}},19:{start:{line:71,column:21},end:{line:71,column:45}},20:{start:{line:72,column:6},end:{line:77,column:9}},21:{start:{line:79,column:22},end:{line:89,column:5}},22:{start:{line:80,column:19},end:{line:80,column:42}},23:{start:{line:81,column:21},end:{line:81,column:56}},24:{start:{line:82,column:6},end:{line:88,column:9}},25:{start:{line:90,column:4},end:{line:90,column:16}},26:{start:{line:91,column:4},end:{line:91,column:33}},27:{start:{line:92,column:4},end:{line:102,column:7}},28:{start:{line:93,column:21},end:{line:93,column:56}},29:{start:{line:94,column:6},end:{line:101,column:9}},30:{start:{line:103,column:4},end:{line:103,column:19}},31:{start:{line:104,column:4},end:{line:106,column:6}},32:{start:{line:108,column:17},end:{line:111,column:3}},33:{start:{line:109,column:4},end:{line:109,column:20}},34:{start:{line:110,column:4},end:{line:110,column:37}},35:{start:{line:113,column:14},end:{line:113,column:26}},36:{start:{line:114,column:4},end:{line:185,column:9}},37:{start:{line:119,column:12},end:{line:119,column:36}},38:{start:{line:176,column:12},end:{line:176,column:31}},39:{start:{line:188,column:22},end:{line:188,column:62}}},fnMap:{0:{name:"renderCoords",decl:{start:{line:10,column:9},end:{line:10,column:21}},loc:{start:{line:10,column:30},end:{line:16,column:1}},line:10},1:{name:"(anonymous_1)",decl:{start:{line:14,column:92},end:{line:14,column:93}},loc:{start:{line:14,column:103},end:{line:14,column:133}},line:14},2:{name:"(anonymous_2)",decl:{start:{line:19,column:17},end:{line:19,column:18}},loc:{start:{line:19,column:23},end:{line:20,column:5}},line:19},3:{name:"(anonymous_3)",decl:{start:{line:21,column:18},end:{line:21,column:19}},loc:{start:{line:21,column:24},end:{line:22,column:5}},line:21},4:{name:"(anonymous_4)",decl:{start:{line:23,column:19},end:{line:23,column:20}},loc:{start:{line:23,column:25},end:{line:24,column:5}},line:23},5:{name:"(anonymous_5)",decl:{start:{line:31,column:2},end:{line:31,column:3}},loc:{start:{line:31,column:21},end:{line:40,column:3}},line:31},6:{name:"(anonymous_6)",decl:{start:{line:41,column:2},end:{line:41,column:3}},loc:{start:{line:41,column:28},end:{line:45,column:3}},line:41},7:{name:"(anonymous_7)",decl:{start:{line:46,column:2},end:{line:46,column:3}},loc:{start:{line:46,column:32},end:{line:52,column:3}},line:46},8:{name:"(anonymous_8)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:22},end:{line:107,column:3}},line:53},9:{name:"(anonymous_9)",decl:{start:{line:70,column:26},end:{line:70,column:27}},loc:{start:{line:70,column:35},end:{line:78,column:5}},line:70},10:{name:"(anonymous_10)",decl:{start:{line:79,column:22},end:{line:79,column:23}},loc:{start:{line:79,column:28},end:{line:89,column:5}},line:79},11:{name:"(anonymous_11)",decl:{start:{line:92,column:25},end:{line:92,column:26}},loc:{start:{line:92,column:33},end:{line:102,column:5}},line:92},12:{name:"(anonymous_12)",decl:{start:{line:108,column:17},end:{line:108,column:18}},loc:{start:{line:108,column:24},end:{line:111,column:3}},line:108},13:{name:"(anonymous_13)",decl:{start:{line:112,column:2},end:{line:112,column:3}},loc:{start:{line:112,column:11},end:{line:186,column:3}},line:112},14:{name:"(anonymous_14)",decl:{start:{line:118,column:15},end:{line:118,column:16}},loc:{start:{line:118,column:22},end:{line:120,column:11}},line:118},15:{name:"(anonymous_15)",decl:{start:{line:175,column:15},end:{line:175,column:16}},loc:{start:{line:175,column:22},end:{line:177,column:11}},line:175}},branchMap:{0:{loc:{start:{line:11,column:2},end:{line:15,column:3}},type:"if",locations:[{start:{line:11,column:2},end:{line:15,column:3}},{start:{line:13,column:9},end:{line:15,column:3}}],line:11},1:{loc:{start:{line:11,column:6},end:{line:11,column:34}},type:"binary-expr",locations:[{start:{line:11,column:6},end:{line:11,column:13}},{start:{line:11,column:17},end:{line:11,column:34}}],line:11},2:{loc:{start:{line:42,column:4},end:{line:42,column:26}},type:"if",locations:[{start:{line:42,column:4},end:{line:42,column:26}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:42},3:{loc:{start:{line:47,column:4},end:{line:51,column:5}},type:"if",locations:[{start:{line:47,column:4},end:{line:51,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:47},4:{loc:{start:{line:136,column:26},end:{line:136,column:59}},type:"binary-expr",locations:[{start:{line:136,column:26},end:{line:136,column:53}},{start:{line:136,column:57},end:{line:136,column:59}}],line:136},5:{loc:{start:{line:148,column:6},end:{line:170,column:10}},type:"binary-expr",locations:[{start:{line:148,column:6},end:{line:148,column:29}},{start:{line:148,column:49},end:{line:170,column:10}}],line:148}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/MapOpenLayers.tsx"],names:[],mappings:"AAoBW,cAyIL,YAzIK;AApBX,OAAO,WAAW;AAClB,SAAQ,gBAAe;AACvB,SAA+B,uBAAuB;AAEtD,OAAO,6BAA6B;AAEpC,OAAO;AAEP,SAAQ,aAAY;AACpB,SAAQ,KAAK,MAAM,eAAc;AAEjC,SAAQ,gBAAe;AAIvB,SAAS,aAAc,QAAkB;AACvC,MAAI,CAAC,UAAU,OAAO,SAAS,GAAG;AAChC,WAAO;AAAA,EACT,OACK;AACH,WAAO,oBAAC,UAAK,WAAU,mBACpB,iBAAO,IAAI,CAAC,UAAU,OAAO,KAAK,EAAE,SAAS,GAAG,GAAQ,CAAC,EAAE,KAAK,IAAI,GACvE;AAAA,EACF;AACF;AAqBA,MAAM,8BAA8B,MAAM,UAA0D;AAAA,EAClG,OAAO,eAAe;AAAA,IACpB,aAAa,MAAM;AAAA,IAAC;AAAA,IACpB,cAAc,MAAM;AAAA,IAAC;AAAA,IACrB,eAAe,MAAM;AAAA,IAAC;AAAA,EACxB;AAAA,EACA;AAAA,EACA;AAAA,EACA,YAAmC;AAAA,EACnC;AAAA,EACA,iBAAqC;AAAA,EAErC,YAAY,OAAmC;AAC7C,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,MAAM;AAAA,MACN,UAAU;AAAA,MACV,QAAQ,CAAC;AAAA,MACT,QAAQ,CAAC;AAAA,IACX;AACA,SAAK,cAAc,SAAS,KAAK,aAAa,KAAK,IAAI,GAAG,GAAG;AAAA,EAC/D;AAAA,EAEA,aAAa,aAAiC;AAC5C,QAAG,CAAC,KAAK,IAAK;AAGd,SAAK,IAAI,UAAU,EAAE,MAAM;AAC3B,UAAM,KAAK,KAAK,WAAW;AAAA,EAC7B;AAAA,EAEA,mBAAmB,WAAuC;AACxD,QAAI,KAAK,MAAM,aAAa,UAAU,UAAU;AAC9C,WAAK;AAAA,QACH,KAAK,MAAM,oBAAoB,KAAK,MAAM,QAAQ;AAAA,MACpD;AAAA,IACF;AAAA,EACF;AAAA,EAEA,oBAAoB;AAClB,SAAK,UAAU,IAAI,QAAQ;AAAA,MACzB,SAAS,KAAK;AAAA,MACd,SAAS;AAAA,QACP,WAAW;AAAA,UACT,UAAU;AAAA,QACZ;AAAA,MACF;AAAA,IACF,CAAC;AAED,UAAM,MAAM,IAAI,IAAI;AAAA,MAClB,QAAQ,KAAK;AAAA,MACb,UAAU,CAAC,KAAK,OAAO;AAAA,MACvB,MAAM,IAAI,KAAK;AAAA,QACb,MAAM;AAAA,QACN,QAAQ,CAAC,KAAK,GAAG;AAAA,MACnB,CAAC;AAAA,IACH,CAAC;AAED,QAAI,GAAG,eAAe,CAAC,QAAQ;AAC7B,YAAM,SAAS,SAAS,IAAI,UAAU;AACtC,WAAK,SAAS;AAAA,QACZ,QAAQ;AAAA,UACN,OAAO,CAAC,EAAE,QAAQ,CAAC;AAAA,UACnB,OAAO,CAAC,EAAE,QAAQ,CAAC;AAAA,QACrB;AAAA,MACF,CAAC;AAAA,IACH,CAAC;AAED,UAAM,YAAY,MAAM;AACtB,YAAM,OAAO,IAAI,QAAQ,EAAE,QAAQ;AACnC,YAAM,SAAS,SAAS,IAAI,QAAQ,EAAE,UAAU,CAAE;AAElD,WAAK,MAAM,SAAS;AAAA,QAClB;AAAA,QACA,QAAQ;AAAA,UACN,KAAK,OAAO,CAAC;AAAA,UACb,KAAK,OAAO,CAAC;AAAA,QACf;AAAA,MACF,CAAC;AAAA,IACH;AAEA,cAAU;AACV,QAAI,GAAG,WAAW,SAAS;AAE3B,QAAI,GAAG,cAAc,CAAC,OAAO;AAC3B,YAAM,SAAS,SAAS,IAAI,QAAQ,EAAE,UAAU,CAAE;AAClD,WAAK,SAAS;AAAA,QACZ,QAAQ;AAAA,UACN,OAAO,CAAC,EAAE,QAAQ,CAAC;AAAA,UACnB,OAAO,CAAC,EAAE,QAAQ,CAAC;AAAA,QACrB;AAAA,QACA,UAAU,IAAI,QAAQ,EAAE,YAAY,EAAE,QAAQ,CAAC;AAAA,QAC/C,MAAM,IAAI,QAAQ,EAAE,QAAQ,EAAG,QAAQ,CAAC;AAAA,MAC1C,CAAC;AAAA,IACH,CAAC;AAID,SAAK,MAAM;AACX,SAAK;AAAA,MACH,KAAK,MAAM,oBAAoB,KAAK,MAAM,QAAQ;AAAA,IACpD;AAAA,EACF;AAAA,EAEA,eAAe,CAAC,MAAW;AACzB,MAAE,OAAO,KAAK;AACd,SAAK,QAAS,YAAY,MAAS;AAAA,EACrC;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SAAI,WAAU,yBACpB;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,KAAK,OAAK;AAAC,iBAAK,iBAAiB;AAAA,UAAE;AAAA,UACnC,OAAO,EAAC,YAAY,QAAO;AAAA,UAC3B,WAAU;AAAA,UAEV;AAAA;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,SAAS,KAAK;AAAA,gBACd,cAAY,EAAE,aAAa;AAAA,gBAC5B;AAAA;AAAA,YAED;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,UAAU,KAAK,MAAM,oBAAoB,CAAC;AAAA,gBAC1C,eAAe,KAAK,MAAM;AAAA;AAAA,YAC5B;AAAA;AAAA;AAAA,MACF;AAAA,MACA,qBAAC,SAAI,WAAU,oBACZ;AAAA,UAAE,OAAO;AAAA,QAAE;AAAA,QAAE,KAAK,MAAM;AAAA,SAC3B;AAAA,MACC,KAAK,MAAM,gBACV,qBAAC,SAAI,WAAU,qBACb;AAAA,6BAAC,SACC;AAAA,+BAAC,WAAO;AAAA,cAAE,SAAS;AAAA,YAAE;AAAA,aAAC;AAAA,UACtB,oBAAC,UAAM,uBAAa,KAAK,MAAM,MAAM,GAAE;AAAA,WACzC;AAAA,QACA,qBAAC,SACC;AAAA,+BAAC,WAAO;AAAA,cAAE,SAAS;AAAA,YAAE;AAAA,aAAC;AAAA,UACtB,oBAAC,UAAM,uBAAa,KAAK,MAAM,MAAM,GAAE;AAAA,WACzC;AAAA,QACA,qBAAC,SACC;AAAA,+BAAC,WAAO;AAAA,cAAE,WAAW;AAAA,YAAE;AAAA,aAAC;AAAA,UACxB,oBAAC,UAAM,eAAK,MAAM,UAAS;AAAA,WAC7B;AAAA,SACF;AAAA,MAEF;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,KAAK,OAAK;AAAC,iBAAK,YAAY;AAAA,UAAE;AAAA,UAC9B,MAAK;AAAA,UACL,cAAY,EAAE,UAAU;AAAA,UACxB,OAAO;AAAA,YACL,GAAG,KAAK,MAAM;AAAA,UAChB;AAAA;AAAA,MACF;AAAA,OACF;AAAA,EACF;AACF;AAEA,MAAM,gBAAgB,gBAAgB,EAAE,qBAAqB;AAC7D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"5f4719fc476214e7aff32d9043337b9c97544cf9"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Oi=function(){return s},s}Oi();function eN(n){return Oi().f[0]++,Oi().s[0]++,Oi().b[1][0]++,!n||(Oi().b[1][1]++,n.length<2)?(Oi().b[0][0]++,Oi().s[1]++,null):(Oi().b[0][1]++,Oi().s[2]++,ie.jsx("span",{className:"maputnik-coords",children:n.map(e=>(Oi().f[1]++,Oi().s[3]++,String(e).padStart(7,""))).join(", ")}))}class __e extends En.Component{static defaultProps=(Oi().s[4]++,{onMapLoaded:()=>{Oi().f[2]++},onDataChange:()=>{Oi().f[3]++},onLayerSelect:()=>{Oi().f[4]++}});updateStyle;map;container=(Oi().s[5]++,null);overlay;popupContainer=(Oi().s[6]++,null);constructor(e){Oi().f[5]++,Oi().s[7]++,super(e),Oi().s[8]++,this.state={zoom:"0",rotation:"0",cursor:[],center:[]},Oi().s[9]++,this.updateStyle=Q4.throttle(this._updateStyle.bind(this),200)}_updateStyle(e){if(Oi().f[6]++,Oi().s[10]++,this.map)Oi().b[2][1]++;else{Oi().b[2][0]++,Oi().s[11]++;return}Oi().s[12]++,this.map.getLayers().clear(),Oi().s[13]++,C_e(this.map,e)}componentDidUpdate(e){Oi().f[7]++,Oi().s[14]++,this.props.mapStyle!==e.mapStyle?(Oi().b[3][0]++,Oi().s[15]++,this.updateStyle(this.props.replaceAccessTokens(this.props.mapStyle))):Oi().b[3][1]++}componentDidMount(){Oi().f[8]++,Oi().s[16]++,this.overlay=new mbe({element:this.popupContainer,autoPan:{animation:{duration:250}}});const e=(Oi().s[17]++,new t6({target:this.container,overlays:[this.overlay],view:new gm({zoom:1,center:[180,-90]})}));Oi().s[18]++,e.on("pointermove",i=>{Oi().f[9]++;const r=(Oi().s[19]++,QO(i.coordinate));Oi().s[20]++,this.setState({cursor:[r[0].toFixed(2),r[1].toFixed(2)]})}),Oi().s[21]++;const t=()=>{Oi().f[10]++;const i=(Oi().s[22]++,e.getView().getZoom()),r=(Oi().s[23]++,QO(e.getView().getCenter()));Oi().s[24]++,this.props.onChange({zoom:i,center:{lng:r[0],lat:r[1]}})};Oi().s[25]++,t(),Oi().s[26]++,e.on("moveend",t),Oi().s[27]++,e.on("postrender",i=>{Oi().f[11]++;const r=(Oi().s[28]++,QO(e.getView().getCenter()));Oi().s[29]++,this.setState({center:[r[0].toFixed(2),r[1].toFixed(2)],rotation:e.getView().getRotation().toFixed(2),zoom:e.getView().getZoom().toFixed(2)})}),Oi().s[30]++,this.map=e,Oi().s[31]++,this.updateStyle(this.props.replaceAccessTokens(this.props.mapStyle))}closeOverlay=(Oi().s[32]++,e=>{Oi().f[12]++,Oi().s[33]++,e.target.blur(),Oi().s[34]++,this.overlay.setPosition(void 0)});render(){Oi().f[13]++;const e=(Oi().s[35]++,this.props.t);return Oi().s[36]++,ie.jsxs("div",{className:"maputnik-ol-container",children:[ie.jsxs("div",{ref:t=>{Oi().f[14]++,Oi().s[37]++,this.popupContainer=t},style:{background:"black"},className:"maputnik-popup",children:[ie.jsx("button",{className:"maplibregl-popup-close-button",onClick:this.closeOverlay,"aria-label":e("Close popup"),children:""}),ie.jsx(VX,{features:(Oi().b[4][0]++,this.state.selectedFeatures||(Oi().b[4][1]++,[])),onLayerSelect:this.props.onLayerSelect})]}),ie.jsxs("div",{className:"maputnik-ol-zoom",children:[e("Zoom:")," ",this.state.zoom]}),(Oi().b[5][0]++,this.props.debugToolbox&&(Oi().b[5][1]++,ie.jsxs("div",{className:"maputnik-ol-debug",children:[ie.jsxs("div",{children:[ie.jsxs("label",{children:[e("cursor:")," "]}),ie.jsx("span",{children:eN(this.state.cursor)})]}),ie.jsxs("div",{children:[ie.jsxs("label",{children:[e("center:")," "]}),ie.jsx("span",{children:eN(this.state.center)})]}),ie.jsxs("div",{children:[ie.jsxs("label",{children:[e("rotation:")," "]}),ie.jsx("span",{children:this.state.rotation})]})]}))),ie.jsx("div",{className:"maputnik-ol",ref:t=>{Oi().f[15]++,Oi().s[38]++,this.container=t},role:"region","aria-label":e("Map view"),style:{...this.props.style}})]})}}const x_e=(Oi().s[39]++,No()(__e));var MB={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var tN;function M_e(){return tN||(tN=1,(function(n){(function(){var e={}.hasOwnProperty;function t(){for(var o="",s=0;s<arguments.length;s++){var a=arguments[s];a&&(o=r(o,i(a)))}return o}function i(o){if(typeof o=="string"||typeof o=="number")return o;if(typeof o!="object")return"";if(Array.isArray(o))return t.apply(null,o);if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]"))return o.toString();var s="";for(var a in o)e.call(o,a)&&o[a]&&(s=r(s,a));return s}function r(o,s){return s?o?o+" "+s:o+s:o}n.exports?(t.default=t,n.exports=t):window.classNames=t})()})(MB)),MB.exports}var w_e=M_e();const u0=eu(w_e),S_e=/("(?:[^\\"]|\\.)*")|[:,]/g;function E_e(n,e={}){const t=JSON.stringify([1],void 0,e.indent===void 0?2:e.indent).slice(2,-3),i=t===""?1/0:e.maxLength===void 0?80:e.maxLength;let{replacer:r}=e;return(function o(s,a,c){s&&typeof s.toJSON=="function"&&(s=s.toJSON());const h=JSON.stringify(s,r);if(h===void 0)return h;const m=i-a.length-c;if(h.length<=m){const y=h.replace(S_e,(M,x)=>x||`${M} `);if(y.length<=m)return y}if(r!=null&&(s=JSON.parse(h),r=void 0),typeof s=="object"&&s!==null){const y=a+t,M=[];let x=0,T,P;if(Array.isArray(s)){T="[",P="]";const{length:F}=s;for(;x<F;x++)M.push(o(s[x],y,x===F-1?0:1)||"null")}else{T="{",P="}";const F=Object.keys(s),{length:j}=F;for(;x<j;x++){const q=F[x],V=`${JSON.stringify(q)}: `,H=o(s[q],y,V.length+(x===j-1?0:1));H!==void 0&&M.push(V+H)}}if(M.length>0)return[T,t+M.join(`,
${y}`),P].join(`
${a}`)}return h})(n,"",0)}let pR=[],Cte=[];(()=>{let n="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,t=0;e<n.length;e++)(e%2?Cte:pR).push(t=t+n[e])})();function O_e(n){if(n<768)return!1;for(let e=0,t=pR.length;;){let i=e+t>>1;if(n<pR[i])t=i;else if(n>=Cte[i])e=i+1;else return!0;if(e==t)return!1}}function nN(n){return n>=127462&&n<=127487}const iN=8205;function B_e(n,e,t=!0,i=!0){return(t?_te:I_e)(n,e,i)}function _te(n,e,t){if(e==n.length)return e;e&&xte(n.charCodeAt(e))&&Mte(n.charCodeAt(e-1))&&e--;let i=wB(n,e);for(e+=rN(i);e<n.length;){let r=wB(n,e);if(i==iN||r==iN||t&&O_e(r))e+=rN(r),i=r;else if(nN(r)){let o=0,s=e-2;for(;s>=0&&nN(wB(n,s));)o++,s-=2;if(o%2==0)break;e+=2}else break}return e}function I_e(n,e,t){for(;e>0;){let i=_te(n,e-2,t);if(i<e)return i;e--}return 0}function wB(n,e){let t=n.charCodeAt(e);if(!Mte(t)||e+1==n.length)return t;let i=n.charCodeAt(e+1);return xte(i)?(t-55296<<10)+(i-56320)+65536:t}function xte(n){return n>=56320&&n<57344}function Mte(n){return n>=55296&&n<56320}function rN(n){return n<65536?1:2}class ms{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,i){[e,t]=vx(this,e,t);let r=[];return this.decompose(0,e,r,2),i.length&&i.decompose(0,i.length,r,3),this.decompose(t,this.length,r,1),Rg.from(r,this.length-(t-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){[e,t]=vx(this,e,t);let i=[];return this.decompose(e,t,i,0),Rg.from(i,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),r=new m3(this),o=new m3(e);for(let s=t,a=t;;){if(r.next(s),o.next(s),s=0,r.lineBreak!=o.lineBreak||r.done!=o.done||r.value!=o.value)return!1;if(a+=r.value.length,r.done||a>=i)return!0}}iter(e=1){return new m3(this,e)}iterRange(e,t=this.length){return new wte(this,e,t)}iterLines(e,t){let i;if(e==null)i=this.iter();else{t==null&&(t=this.lines+1);let r=this.line(e).from;i=this.iterRange(r,Math.max(r,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new Ste(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?ms.empty:e.length<=32?new _u(e):Rg.from(_u.split(e,[]))}}class _u extends ms{constructor(e,t=k_e(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,i,r){for(let o=0;;o++){let s=this.text[o],a=r+s.length;if((t?i:a)>=e)return new T_e(r,a,i,s);r=a+1,i++}}decompose(e,t,i,r){let o=e<=0&&t>=this.length?this:new _u(oN(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(r&1){let s=i.pop(),a=Aw(o.text,s.text.slice(),0,o.length);if(a.length<=32)i.push(new _u(a,s.length+o.length));else{let c=a.length>>1;i.push(new _u(a.slice(0,c)),new _u(a.slice(c)))}}else i.push(o)}replace(e,t,i){if(!(i instanceof _u))return super.replace(e,t,i);[e,t]=vx(this,e,t);let r=Aw(this.text,Aw(i.text,oN(this.text,0,e)),t),o=this.length+i.length-(t-e);return r.length<=32?new _u(r,o):Rg.from(_u.split(r,[]),o)}sliceString(e,t=this.length,i=`
`){[e,t]=vx(this,e,t);let r="";for(let o=0,s=0;o<=t&&s<this.text.length;s++){let a=this.text[s],c=o+a.length;o>e&&s&&(r+=i),e<c&&t>o&&(r+=a.slice(Math.max(0,e-o),t-o)),o=c+1}return r}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let i=[],r=-1;for(let o of e)i.push(o),r+=o.length+1,i.length==32&&(t.push(new _u(i,r)),i=[],r=-1);return r>-1&&t.push(new _u(i,r)),t}}class Rg extends ms{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,t,i,r){for(let o=0;;o++){let s=this.children[o],a=r+s.length,c=i+s.lines-1;if((t?c:a)>=e)return s.lineInner(e,t,i,r);r=a+1,i=c+1}}decompose(e,t,i,r){for(let o=0,s=0;s<=t&&o<this.children.length;o++){let a=this.children[o],c=s+a.length;if(e<=c&&t>=s){let h=r&((s<=e?1:0)|(c>=t?2:0));s>=e&&c<=t&&!h?i.push(a):a.decompose(e-s,t-s,i,h)}s=c+1}}replace(e,t,i){if([e,t]=vx(this,e,t),i.lines<this.lines)for(let r=0,o=0;r<this.children.length;r++){let s=this.children[r],a=o+s.length;if(e>=o&&t<=a){let c=s.replace(e-o,t-o,i),h=this.lines-s.lines+c.lines;if(c.lines<h>>4&&c.lines>h>>6){let m=this.children.slice();return m[r]=c,new Rg(m,this.length-(t-e)+i.length)}return super.replace(o,a,c)}o=a+1}return super.replace(e,t,i)}sliceString(e,t=this.length,i=`
`){[e,t]=vx(this,e,t);let r="";for(let o=0,s=0;o<this.children.length&&s<=t;o++){let a=this.children[o],c=s+a.length;s>e&&o&&(r+=i),e<c&&t>s&&(r+=a.sliceString(e-s,t-s,i)),s=c+1}return r}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof Rg))return 0;let i=0,[r,o,s,a]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;r+=t,o+=t){if(r==s||o==a)return i;let c=this.children[r],h=e.children[o];if(c!=h)return i+c.scanIdentical(h,t);i+=c.length+1}}static from(e,t=e.reduce((i,r)=>i+r.length+1,-1)){let i=0;for(let x of e)i+=x.lines;if(i<32){let x=[];for(let T of e)T.flatten(x);return new _u(x,t)}let r=Math.max(32,i>>5),o=r<<1,s=r>>1,a=[],c=0,h=-1,m=[];function y(x){let T;if(x.lines>o&&x instanceof Rg)for(let P of x.children)y(P);else x.lines>s&&(c>s||!c)?(M(),a.push(x)):x instanceof _u&&c&&(T=m[m.length-1])instanceof _u&&x.lines+T.lines<=32?(c+=x.lines,h+=x.length+1,m[m.length-1]=new _u(T.text.concat(x.text),T.length+1+x.length)):(c+x.lines>r&&M(),c+=x.lines,h+=x.length+1,m.push(x))}function M(){c!=0&&(a.push(m.length==1?m[0]:Rg.from(m,h)),h=-1,c=m.length=0)}for(let x of e)y(x);return M(),a.length==1?a[0]:new Rg(a,t)}}ms.empty=new _u([""],0);function k_e(n){let e=-1;for(let t of n)e+=t.length+1;return e}function Aw(n,e,t=0,i=1e9){for(let r=0,o=0,s=!0;o<n.length&&r<=i;o++){let a=n[o],c=r+a.length;c>=t&&(c>i&&(a=a.slice(0,i-r)),r<t&&(a=a.slice(t-r)),s?(e[e.length-1]+=a,s=!1):e.push(a)),r=c+1}return e}function oN(n,e,t){return Aw(n,[""],e,t)}class m3{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof _u?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,r=this.nodes[i],o=this.offsets[i],s=o>>1,a=r instanceof _u?r.text.length:r.children.length;if(s==(t>0?a:0)){if(i==0)return this.done=!0,this.value="",this;t>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((o&1)==(t>0?0:1)){if(this.offsets[i]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(r instanceof _u){let c=r.text[s+(t<0?-1:0)];if(this.offsets[i]+=t,c.length>Math.max(0,e))return this.value=e==0?c:t>0?c.slice(e):c.slice(0,c.length-e),this;e-=c.length}else{let c=r.children[s+(t<0?-1:0)];e>c.length?(e-=c.length,this.offsets[i]+=t):(t<0&&this.offsets[i]--,this.nodes.push(c),this.offsets.push(t>0?1:(c instanceof _u?c.text.length:c.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class wte{constructor(e,t,i){this.value="",this.done=!1,this.cursor=new m3(e,t>i?-1:1),this.pos=t>i?e.length:0,this.from=Math.min(t,i),this.to=Math.max(t,i)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let i=t<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:r}=this.cursor.next(e);return this.pos+=(r.length+e)*t,this.value=r.length<=i?r:t<0?r.slice(r.length-i):r.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class Ste{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:i,value:r}=this.inner.next(e);return t&&this.afterBreak?(this.value="",this.afterBreak=!1):t?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(ms.prototype[Symbol.iterator]=function(){return this.iter()},m3.prototype[Symbol.iterator]=wte.prototype[Symbol.iterator]=Ste.prototype[Symbol.iterator]=function(){return this});class T_e{constructor(e,t,i,r){this.from=e,this.to=t,this.number=i,this.text=r}get length(){return this.to-this.from}}function vx(n,e,t){return e=Math.max(0,Math.min(n.length,e)),[e,Math.max(e,Math.min(n.length,t))]}function CA(n,e,t=!0,i=!0){return B_e(n,e,t,i)}function R_e(n){return n>=56320&&n<57344}function D_e(n){return n>=55296&&n<56320}function bd(n,e){let t=n.charCodeAt(e);if(!D_e(t)||e+1==n.length)return t;let i=n.charCodeAt(e+1);return R_e(i)?(t-55296<<10)+(i-56320)+65536:t}function UU(n){return n<=65535?String.fromCharCode(n):(n-=65536,String.fromCharCode((n>>10)+55296,(n&1023)+56320))}function Dg(n){return n<65536?1:2}const mR=/\r\n?|\n/;var Oh=(function(n){return n[n.Simple=0]="Simple",n[n.TrackDel=1]="TrackDel",n[n.TrackBefore=2]="TrackBefore",n[n.TrackAfter=3]="TrackAfter",n})(Oh||(Oh={}));class e0{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t+1];e+=i<0?this.sections[t]:i}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,i=0,r=0;t<this.sections.length;){let o=this.sections[t++],s=this.sections[t++];s<0?(e(i,r,o),r+=o):r+=s,i+=o}}iterChangedRanges(e,t=!1){gR(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let i=this.sections[t++],r=this.sections[t++];r<0?e.push(i,r):e.push(r,i)}return new e0(e)}composeDesc(e){return this.empty?e:e.empty?this:Ete(this,e)}mapDesc(e,t=!1){return e.empty?this:yR(this,e,t)}mapPos(e,t=-1,i=Oh.Simple){let r=0,o=0;for(let s=0;s<this.sections.length;){let a=this.sections[s++],c=this.sections[s++],h=r+a;if(c<0){if(h>e)return o+(e-r);o+=a}else{if(i!=Oh.Simple&&h>=e&&(i==Oh.TrackDel&&r<e&&h>e||i==Oh.TrackBefore&&r<e||i==Oh.TrackAfter&&h>e))return null;if(h>e||h==e&&t<0&&!a)return e==r||t<0?o:o+c;o+=c}r=h}if(e>r)throw new RangeError(`Position ${e} is out of range for changeset of length ${r}`);return o}touchesRange(e,t=e){for(let i=0,r=0;i<this.sections.length&&r<=t;){let o=this.sections[i++],s=this.sections[i++],a=r+o;if(s>=0&&r<=t&&a>=e)return r<e&&a>t?"cover":!0;r=a}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let i=this.sections[t++],r=this.sections[t++];e+=(e?" ":"")+i+(r>=0?":"+r:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new e0(e)}static create(e){return new e0(e)}}class Mc extends e0{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return gR(this,(t,i,r,o,s)=>e=e.replace(r,r+(i-t),s),!1),e}mapDesc(e,t=!1){return yR(this,e,t,!0)}invert(e){let t=this.sections.slice(),i=[];for(let r=0,o=0;r<t.length;r+=2){let s=t[r],a=t[r+1];if(a>=0){t[r]=a,t[r+1]=s;let c=r>>1;for(;i.length<c;)i.push(ms.empty);i.push(s?e.slice(o,o+s):ms.empty)}o+=s}return new Mc(t,i)}compose(e){return this.empty?e:e.empty?this:Ete(this,e,!0)}map(e,t=!1){return e.empty?this:yR(this,e,t,!0)}iterChanges(e,t=!1){gR(this,e,t)}get desc(){return e0.create(this.sections)}filter(e){let t=[],i=[],r=[],o=new A4(this);e:for(let s=0,a=0;;){let c=s==e.length?1e9:e[s++];for(;a<c||a==c&&o.len==0;){if(o.done)break e;let m=Math.min(o.len,c-a);WA(r,m,-1);let y=o.ins==-1?-1:o.off==0?o.ins:0;WA(t,m,y),y>0&&jy(i,t,o.text),o.forward(m),a+=m}let h=e[s++];for(;a<h;){if(o.done)break e;let m=Math.min(o.len,h-a);WA(t,m,-1),WA(r,m,o.ins==-1?-1:o.off==0?o.ins:0),o.forward(m),a+=m}}return{changes:new Mc(t,i),filtered:e0.create(r)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t],r=this.sections[t+1];r<0?e.push(i):r==0?e.push([i]):e.push([i].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,i){let r=[],o=[],s=0,a=null;function c(m=!1){if(!m&&!r.length)return;s<t&&WA(r,t-s,-1);let y=new Mc(r,o);a=a?a.compose(y.map(a)):y,r=[],o=[],s=0}function h(m){if(Array.isArray(m))for(let y of m)h(y);else if(m instanceof Mc){if(m.length!=t)throw new RangeError(`Mismatched change set length (got ${m.length}, expected ${t})`);c(),a=a?a.compose(m.map(a)):m}else{let{from:y,to:M=y,insert:x}=m;if(y>M||y<0||M>t)throw new RangeError(`Invalid change range ${y} to ${M} (in doc of length ${t})`);let T=x?typeof x=="string"?ms.of(x.split(i||mR)):x:ms.empty,P=T.length;if(y==M&&P==0)return;y<s&&c(),y>s&&WA(r,y-s,-1),WA(r,M-y,P),jy(o,r,T),s=M}}return h(e),c(!a),a}static empty(e){return new Mc(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],i=[];for(let r=0;r<e.length;r++){let o=e[r];if(typeof o=="number")t.push(o,-1);else{if(!Array.isArray(o)||typeof o[0]!="number"||o.some((s,a)=>a&&typeof s!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(o.length==1)t.push(o[0],0);else{for(;i.length<r;)i.push(ms.empty);i[r]=ms.of(o.slice(1)),t.push(o[0],i[r].length)}}}return new Mc(t,i)}static createSet(e,t){return new Mc(e,t)}}function WA(n,e,t,i=!1){if(e==0&&t<=0)return;let r=n.length-2;r>=0&&t<=0&&t==n[r+1]?n[r]+=e:r>=0&&e==0&&n[r]==0?n[r+1]+=t:i?(n[r]+=e,n[r+1]+=t):n.push(e,t)}function jy(n,e,t){if(t.length==0)return;let i=e.length-2>>1;if(i<n.length)n[n.length-1]=n[n.length-1].append(t);else{for(;n.length<i;)n.push(ms.empty);n.push(t)}}function gR(n,e,t){let i=n.inserted;for(let r=0,o=0,s=0;s<n.sections.length;){let a=n.sections[s++],c=n.sections[s++];if(c<0)r+=a,o+=a;else{let h=r,m=o,y=ms.empty;for(;h+=a,m+=c,c&&i&&(y=y.append(i[s-2>>1])),!(t||s==n.sections.length||n.sections[s+1]<0);)a=n.sections[s++],c=n.sections[s++];e(r,h,o,m,y),r=h,o=m}}}function yR(n,e,t,i=!1){let r=[],o=i?[]:null,s=new A4(n),a=new A4(e);for(let c=-1;;){if(s.done&&a.len||a.done&&s.len)throw new Error("Mismatched change set lengths");if(s.ins==-1&&a.ins==-1){let h=Math.min(s.len,a.len);WA(r,h,-1),s.forward(h),a.forward(h)}else if(a.ins>=0&&(s.ins<0||c==s.i||s.off==0&&(a.len<s.len||a.len==s.len&&!t))){let h=a.len;for(WA(r,a.ins,-1);h;){let m=Math.min(s.len,h);s.ins>=0&&c<s.i&&s.len<=m&&(WA(r,0,s.ins),o&&jy(o,r,s.text),c=s.i),s.forward(m),h-=m}a.next()}else if(s.ins>=0){let h=0,m=s.len;for(;m;)if(a.ins==-1){let y=Math.min(m,a.len);h+=y,m-=y,a.forward(y)}else if(a.ins==0&&a.len<m)m-=a.len,a.next();else break;WA(r,h,c<s.i?s.ins:0),o&&c<s.i&&jy(o,r,s.text),c=s.i,s.forward(s.len-m)}else{if(s.done&&a.done)return o?Mc.createSet(r,o):e0.create(r);throw new Error("Mismatched change set lengths")}}}function Ete(n,e,t=!1){let i=[],r=t?[]:null,o=new A4(n),s=new A4(e);for(let a=!1;;){if(o.done&&s.done)return r?Mc.createSet(i,r):e0.create(i);if(o.ins==0)WA(i,o.len,0,a),o.next();else if(s.len==0&&!s.done)WA(i,0,s.ins,a),r&&jy(r,i,s.text),s.next();else{if(o.done||s.done)throw new Error("Mismatched change set lengths");{let c=Math.min(o.len2,s.len),h=i.length;if(o.ins==-1){let m=s.ins==-1?-1:s.off?0:s.ins;WA(i,c,m,a),r&&m&&jy(r,i,s.text)}else s.ins==-1?(WA(i,o.off?0:o.len,c,a),r&&jy(r,i,o.textBit(c))):(WA(i,o.off?0:o.len,s.off?0:s.ins,a),r&&!s.off&&jy(r,i,s.text));a=(o.ins>c||s.ins>=0&&s.len>c)&&(a||i.length>h),o.forward2(c),s.forward(c)}}}}class A4{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?ms.empty:e[t]}textBit(e){let{inserted:t}=this.set,i=this.i-2>>1;return i>=t.length&&!e?ms.empty:t[i].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class yb{constructor(e,t,i){this.from=e,this.to=t,this.flags=i}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,t=-1){let i,r;return this.empty?i=r=e.mapPos(this.from,t):(i=e.mapPos(this.from,1),r=e.mapPos(this.to,-1)),i==this.from&&r==this.to?this:new yb(i,r,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return wn.range(e,t);let i=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return wn.range(this.anchor,i)}eq(e,t=!1){return this.anchor==e.anchor&&this.head==e.head&&(!t||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return wn.range(e.anchor,e.head)}static create(e,t,i){return new yb(e,t,i)}}class wn{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:wn.create(this.ranges.map(i=>i.map(e,t)),this.mainIndex)}eq(e,t=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let i=0;i<this.ranges.length;i++)if(!this.ranges[i].eq(e.ranges[i],t))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new wn([this.main],0)}addRange(e,t=!0){return wn.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let i=this.ranges.slice();return i[t]=e,wn.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new wn(e.ranges.map(t=>yb.fromJSON(t)),e.main)}static single(e,t=e){return new wn([wn.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,r=0;r<e.length;r++){let o=e[r];if(o.empty?o.from<=i:o.from<i)return wn.normalized(e.slice(),t);i=o.to}return new wn(e,t)}static cursor(e,t=0,i,r){return yb.create(e,e,(t==0?0:t<0?8:16)|(i==null?7:Math.min(6,i))|(r??16777215)<<6)}static range(e,t,i,r){let o=(i??16777215)<<6|(r==null?7:Math.min(6,r));return t<e?yb.create(t,e,48|o):yb.create(e,t,(t>e?8:0)|o)}static normalized(e,t=0){let i=e[t];e.sort((r,o)=>r.from-o.from),t=e.indexOf(i);for(let r=1;r<e.length;r++){let o=e[r],s=e[r-1];if(o.empty?o.from<=s.to:o.from<s.to){let a=s.from,c=Math.max(o.to,s.to);r<=t&&t--,e.splice(--r,2,o.anchor>o.head?wn.range(c,a):wn.range(a,c))}}return new wn(e,t)}}function Ote(n,e){for(let t of n.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let KU=0;class Bi{constructor(e,t,i,r,o){this.combine=e,this.compareInput=t,this.compare=i,this.isStatic=r,this.id=KU++,this.default=e([]),this.extensions=typeof o=="function"?o(this):o}get reader(){return this}static define(e={}){return new Bi(e.combine||(t=>t),e.compareInput||((t,i)=>t===i),e.compare||(e.combine?(t,i)=>t===i:LU),!!e.static,e.enables)}of(e){return new hw([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new hw(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new hw(e,this,2,t)}from(e,t){return t||(t=i=>i),this.compute([e],i=>t(i.field(e)))}}function LU(n,e){return n==e||n.length==e.length&&n.every((t,i)=>t===e[i])}class hw{constructor(e,t,i,r){this.dependencies=e,this.facet=t,this.type=i,this.value=r,this.id=KU++}dynamicSlot(e){var t;let i=this.value,r=this.facet.compareInput,o=this.id,s=e[o]>>1,a=this.type==2,c=!1,h=!1,m=[];for(let y of this.dependencies)y=="doc"?c=!0:y=="selection"?h=!0:(((t=e[y.id])!==null&&t!==void 0?t:1)&1)==0&&m.push(e[y.id]);return{create(y){return y.values[s]=i(y),1},update(y,M){if(c&&M.docChanged||h&&(M.docChanged||M.selection)||vR(y,m)){let x=i(y);if(a?!sN(x,y.values[s],r):!r(x,y.values[s]))return y.values[s]=x,1}return 0},reconfigure:(y,M)=>{let x,T=M.config.address[o];if(T!=null){let P=gS(M,T);if(this.dependencies.every(F=>F instanceof Bi?M.facet(F)===y.facet(F):F instanceof Oc?M.field(F,!1)==y.field(F,!1):!0)||(a?sN(x=i(y),P,r):r(x=i(y),P)))return y.values[s]=P,0}else x=i(y);return y.values[s]=x,1}}}}function sN(n,e,t){if(n.length!=e.length)return!1;for(let i=0;i<n.length;i++)if(!t(n[i],e[i]))return!1;return!0}function vR(n,e){let t=!1;for(let i of e)g3(n,i)&1&&(t=!0);return t}function P_e(n,e,t){let i=t.map(c=>n[c.id]),r=t.map(c=>c.type),o=i.filter(c=>!(c&1)),s=n[e.id]>>1;function a(c){let h=[];for(let m=0;m<i.length;m++){let y=gS(c,i[m]);if(r[m]==2)for(let M of y)h.push(M);else h.push(y)}return e.combine(h)}return{create(c){for(let h of i)g3(c,h);return c.values[s]=a(c),1},update(c,h){if(!vR(c,o))return 0;let m=a(c);return e.compare(m,c.values[s])?0:(c.values[s]=m,1)},reconfigure(c,h){let m=vR(c,i),y=h.config.facets[e.id],M=h.facet(e);if(y&&!m&&LU(t,y))return c.values[s]=M,0;let x=a(c);return e.compare(x,M)?(c.values[s]=M,0):(c.values[s]=x,1)}}}const AM=Bi.define({static:!0});class Oc{constructor(e,t,i,r,o){this.id=e,this.createF=t,this.updateF=i,this.compareF=r,this.spec=o,this.provides=void 0}static define(e){let t=new Oc(KU++,e.create,e.update,e.compare||((i,r)=>i===r),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(AM).find(i=>i.field==this);return(t?.create||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:i=>(i.values[t]=this.create(i),1),update:(i,r)=>{let o=i.values[t],s=this.updateF(o,r);return this.compareF(o,s)?0:(i.values[t]=s,1)},reconfigure:(i,r)=>{let o=i.facet(AM),s=r.facet(AM),a;return(a=o.find(c=>c.field==this))&&a!=s.find(c=>c.field==this)?(i.values[t]=a.create(i),1):r.config.address[this.id]!=null?(i.values[t]=r.field(this),0):(i.values[t]=this.create(i),1)}}}init(e){return[this,AM.of({field:this,create:e})]}get extension(){return this}}const ub={lowest:4,low:3,default:2,high:1,highest:0};function v2(n){return e=>new Bte(e,n)}const nC={highest:v2(ub.highest),high:v2(ub.high),default:v2(ub.default),low:v2(ub.low),lowest:v2(ub.lowest)};class Bte{constructor(e,t){this.inner=e,this.prec=t}}class m5{of(e){return new bR(this,e)}reconfigure(e){return m5.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class bR{constructor(e,t){this.compartment=e,this.inner=t}}class mS{constructor(e,t,i,r,o,s){for(this.base=e,this.compartments=t,this.dynamicSlots=i,this.address=r,this.staticValues=o,this.facets=s,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,i){let r=[],o=Object.create(null),s=new Map;for(let M of U_e(e,t,s))M instanceof Oc?r.push(M):(o[M.facet.id]||(o[M.facet.id]=[])).push(M);let a=Object.create(null),c=[],h=[];for(let M of r)a[M.id]=h.length<<1,h.push(x=>M.slot(x));let m=i?.config.facets;for(let M in o){let x=o[M],T=x[0].facet,P=m&&m[M]||[];if(x.every(F=>F.type==0))if(a[T.id]=c.length<<1|1,LU(P,x))c.push(i.facet(T));else{let F=T.combine(x.map(j=>j.value));c.push(i&&T.compare(F,i.facet(T))?i.facet(T):F)}else{for(let F of x)F.type==0?(a[F.id]=c.length<<1|1,c.push(F.value)):(a[F.id]=h.length<<1,h.push(j=>F.dynamicSlot(j)));a[T.id]=h.length<<1,h.push(F=>P_e(F,T,x))}}let y=h.map(M=>M(a));return new mS(e,s,y,a,c,o)}}function U_e(n,e,t){let i=[[],[],[],[],[]],r=new Map;function o(s,a){let c=r.get(s);if(c!=null){if(c<=a)return;let h=i[c].indexOf(s);h>-1&&i[c].splice(h,1),s instanceof bR&&t.delete(s.compartment)}if(r.set(s,a),Array.isArray(s))for(let h of s)o(h,a);else if(s instanceof bR){if(t.has(s.compartment))throw new RangeError("Duplicate use of compartment in extensions");let h=e.get(s.compartment)||s.inner;t.set(s.compartment,h),o(h,a)}else if(s instanceof Bte)o(s.inner,s.prec);else if(s instanceof Oc)i[a].push(s),s.provides&&o(s.provides,a);else if(s instanceof hw)i[a].push(s),s.facet.extensions&&o(s.facet.extensions,ub.default);else{let h=s.extension;if(!h)throw new Error(`Unrecognized extension value in extension set (${s}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);o(h,a)}}return o(n,ub.default),i.reduce((s,a)=>s.concat(a))}function g3(n,e){if(e&1)return 2;let t=e>>1,i=n.status[t];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;n.status[t]=4;let r=n.computeSlot(n,n.config.dynamicSlots[t]);return n.status[t]=2|r}function gS(n,e){return e&1?n.config.staticValues[e>>1]:n.values[e>>1]}const Ite=Bi.define(),CR=Bi.define({combine:n=>n.some(e=>e),static:!0}),kte=Bi.define({combine:n=>n.length?n[0]:void 0,static:!0}),Tte=Bi.define(),Rte=Bi.define(),Dte=Bi.define(),Pte=Bi.define({combine:n=>n.length?n[0]:!1});class v1{constructor(e,t){this.type=e,this.value=t}static define(){return new K_e}}class K_e{of(e){return new v1(this,e)}}class L_e{constructor(e){this.map=e}of(e){return new ro(this,e)}}class ro{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new ro(this.type,t)}is(e){return this.type==e}static define(e={}){return new L_e(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let i=[];for(let r of e){let o=r.map(t);o&&i.push(o)}return i}}ro.reconfigure=ro.define();ro.appendConfig=ro.define();class Ec{constructor(e,t,i,r,o,s){this.startState=e,this.changes=t,this.selection=i,this.effects=r,this.annotations=o,this.scrollIntoView=s,this._doc=null,this._state=null,i&&Ote(i,t.newLength),o.some(a=>a.type==Ec.time)||(this.annotations=o.concat(Ec.time.of(Date.now())))}static create(e,t,i,r,o,s){return new Ec(e,t,i,r,o,s)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(Ec.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}}Ec.time=v1.define();Ec.userEvent=v1.define();Ec.addToHistory=v1.define();Ec.remote=v1.define();function F_e(n,e){let t=[];for(let i=0,r=0;;){let o,s;if(i<n.length&&(r==e.length||e[r]>=n[i]))o=n[i++],s=n[i++];else if(r<e.length)o=e[r++],s=e[r++];else return t;!t.length||t[t.length-1]<o?t.push(o,s):t[t.length-1]<s&&(t[t.length-1]=s)}}function Ute(n,e,t){var i;let r,o,s;return t?(r=e.changes,o=Mc.empty(e.changes.length),s=n.changes.compose(e.changes)):(r=e.changes.map(n.changes),o=n.changes.mapDesc(e.changes,!0),s=n.changes.compose(r)),{changes:s,selection:e.selection?e.selection.map(o):(i=n.selection)===null||i===void 0?void 0:i.map(r),effects:ro.mapEffects(n.effects,r).concat(ro.mapEffects(e.effects,o)),annotations:n.annotations.length?n.annotations.concat(e.annotations):e.annotations,scrollIntoView:n.scrollIntoView||e.scrollIntoView}}function _R(n,e,t){let i=e.selection,r=q_(e.annotations);return e.userEvent&&(r=r.concat(Ec.userEvent.of(e.userEvent))),{changes:e.changes instanceof Mc?e.changes:Mc.of(e.changes||[],t,n.facet(kte)),selection:i&&(i instanceof wn?i:wn.single(i.anchor,i.head)),effects:q_(e.effects),annotations:r,scrollIntoView:!!e.scrollIntoView}}function Kte(n,e,t){let i=_R(n,e.length?e[0]:{},n.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let o=1;o<e.length;o++){e[o].filter===!1&&(t=!1);let s=!!e[o].sequential;i=Ute(i,_R(n,e[o],s?i.changes.newLength:n.doc.length),s)}let r=Ec.create(n,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return j_e(t?z_e(r):r)}function z_e(n){let e=n.startState,t=!0;for(let r of e.facet(Tte)){let o=r(n);if(o===!1){t=!1;break}Array.isArray(o)&&(t=t===!0?o:F_e(t,o))}if(t!==!0){let r,o;if(t===!1)o=n.changes.invertedDesc,r=Mc.empty(e.doc.length);else{let s=n.changes.filter(t);r=s.changes,o=s.filtered.mapDesc(s.changes).invertedDesc}n=Ec.create(e,r,n.selection&&n.selection.map(o),ro.mapEffects(n.effects,o),n.annotations,n.scrollIntoView)}let i=e.facet(Rte);for(let r=i.length-1;r>=0;r--){let o=i[r](n);o instanceof Ec?n=o:Array.isArray(o)&&o.length==1&&o[0]instanceof Ec?n=o[0]:n=Kte(e,q_(o),!1)}return n}function j_e(n){let e=n.startState,t=e.facet(Dte),i=n;for(let r=t.length-1;r>=0;r--){let o=t[r](n);o&&Object.keys(o).length&&(i=Ute(i,_R(e,o,n.changes.newLength),!0))}return i==n?n:Ec.create(e,n.changes,n.selection,i.effects,i.annotations,i.scrollIntoView)}const N_e=[];function q_(n){return n==null?N_e:Array.isArray(n)?n:[n]}var ml=(function(n){return n[n.Word=0]="Word",n[n.Space=1]="Space",n[n.Other=2]="Other",n})(ml||(ml={}));const G_e=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let xR;try{xR=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function W_e(n){if(xR)return xR.test(n);for(let e=0;e<n.length;e++){let t=n[e];if(/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||G_e.test(t)))return!0}return!1}function Q_e(n){return e=>{if(!/\S/.test(e))return ml.Space;if(W_e(e))return ml.Word;for(let t=0;t<n.length;t++)if(e.indexOf(n[t])>-1)return ml.Word;return ml.Other}}class ps{constructor(e,t,i,r,o,s){this.config=e,this.doc=t,this.selection=i,this.values=r,this.status=e.statusTemplate.slice(),this.computeSlot=o,s&&(s._state=this);for(let a=0;a<this.config.dynamicSlots.length;a++)g3(this,a<<1);this.computeSlot=null}field(e,t=!0){let i=this.config.address[e.id];if(i==null){if(t)throw new RangeError("Field is not present in this state");return}return g3(this,i),gS(this,i)}update(...e){return Kte(this,e,!0)}applyTransaction(e){let t=this.config,{base:i,compartments:r}=t;for(let a of e.effects)a.is(m5.reconfigure)?(t&&(r=new Map,t.compartments.forEach((c,h)=>r.set(h,c)),t=null),r.set(a.value.compartment,a.value.extension)):a.is(ro.reconfigure)?(t=null,i=a.value):a.is(ro.appendConfig)&&(t=null,i=q_(i).concat(a.value));let o;t?o=e.startState.values.slice():(t=mS.resolve(i,r,this),o=new ps(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(c,h)=>h.reconfigure(c,this),null).values);let s=e.startState.facet(CR)?e.newSelection:e.newSelection.asSingle();new ps(t,e.newDoc,s,o,(a,c)=>c.update(a,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:wn.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,i=e(t.ranges[0]),r=this.changes(i.changes),o=[i.range],s=q_(i.effects);for(let a=1;a<t.ranges.length;a++){let c=e(t.ranges[a]),h=this.changes(c.changes),m=h.map(r);for(let M=0;M<a;M++)o[M]=o[M].map(m);let y=r.mapDesc(h,!0);o.push(c.range.map(y)),r=r.compose(m),s=ro.mapEffects(s,m).concat(ro.mapEffects(q_(c.effects),y))}return{changes:r,selection:wn.create(o,t.mainIndex),effects:s}}changes(e=[]){return e instanceof Mc?e:Mc.of(e,this.doc.length,this.facet(ps.lineSeparator))}toText(e){return ms.of(e.split(this.facet(ps.lineSeparator)||mR))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(g3(this,t),gS(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let r=e[i];r instanceof Oc&&this.config.address[r.id]!=null&&(t[i]=r.spec.toJSON(this.field(e[i]),this))}return t}static fromJSON(e,t={},i){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let r=[];if(i){for(let o in i)if(Object.prototype.hasOwnProperty.call(e,o)){let s=i[o],a=e[o];r.push(s.init(c=>s.spec.fromJSON(a,c)))}}return ps.create({doc:e.doc,selection:wn.fromJSON(e.selection),extensions:t.extensions?r.concat([t.extensions]):r})}static create(e={}){let t=mS.resolve(e.extensions||[],new Map),i=e.doc instanceof ms?e.doc:ms.of((e.doc||"").split(t.staticFacet(ps.lineSeparator)||mR)),r=e.selection?e.selection instanceof wn?e.selection:wn.single(e.selection.anchor,e.selection.head):wn.single(0);return Ote(r,i.length),t.staticFacet(CR)||(r=r.asSingle()),new ps(t,i,r,t.dynamicSlots.map(()=>null),(o,s)=>s.create(o),null)}get tabSize(){return this.facet(ps.tabSize)}get lineBreak(){return this.facet(ps.lineSeparator)||`
`}get readOnly(){return this.facet(Pte)}phrase(e,...t){for(let i of this.facet(ps.phrases))if(Object.prototype.hasOwnProperty.call(i,e)){e=i[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(i,r)=>{if(r=="$")return"$";let o=+(r||1);return!o||o>t.length?i:t[o-1]})),e}languageDataAt(e,t,i=-1){let r=[];for(let o of this.facet(Ite))for(let s of o(this,t,i))Object.prototype.hasOwnProperty.call(s,e)&&r.push(s[e]);return r}charCategorizer(e){return Q_e(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:i,length:r}=this.doc.lineAt(e),o=this.charCategorizer(e),s=e-i,a=e-i;for(;s>0;){let c=CA(t,s,!1);if(o(t.slice(c,s))!=ml.Word)break;s=c}for(;a<r;){let c=CA(t,a);if(o(t.slice(a,c))!=ml.Word)break;a=c}return s==a?null:wn.range(s+i,a+i)}}ps.allowMultipleSelections=CR;ps.tabSize=Bi.define({combine:n=>n.length?n[0]:4});ps.lineSeparator=kte;ps.readOnly=Pte;ps.phrases=Bi.define({compare(n,e){let t=Object.keys(n),i=Object.keys(e);return t.length==i.length&&t.every(r=>n[r]==e[r])}});ps.languageData=Ite;ps.changeFilter=Tte;ps.transactionFilter=Rte;ps.transactionExtender=Dte;m5.reconfigure=ro.define();function Dm(n,e,t={}){let i={};for(let r of n)for(let o of Object.keys(r)){let s=r[o],a=i[o];if(a===void 0)i[o]=s;else if(!(a===s||s===void 0))if(Object.hasOwnProperty.call(t,o))i[o]=t[o](a,s);else throw new Error("Config merge conflict for field "+o)}for(let r in e)i[r]===void 0&&(i[r]=e[r]);return i}class Gb{eq(e){return this==e}range(e,t=e){return MR.create(e,t,this)}}Gb.prototype.startSide=Gb.prototype.endSide=0;Gb.prototype.point=!1;Gb.prototype.mapMode=Oh.TrackDel;let MR=class Lte{constructor(e,t,i){this.from=e,this.to=t,this.value=i}static create(e,t,i){return new Lte(e,t,i)}};function wR(n,e){return n.from-e.from||n.value.startSide-e.value.startSide}class FU{constructor(e,t,i,r){this.from=e,this.to=t,this.value=i,this.maxPoint=r}get length(){return this.to[this.to.length-1]}findIndex(e,t,i,r=0){let o=i?this.to:this.from;for(let s=r,a=o.length;;){if(s==a)return s;let c=s+a>>1,h=o[c]-e||(i?this.value[c].endSide:this.value[c].startSide)-t;if(c==s)return h>=0?s:a;h>=0?a=c:s=c+1}}between(e,t,i,r){for(let o=this.findIndex(t,-1e9,!0),s=this.findIndex(i,1e9,!1,o);o<s;o++)if(r(this.from[o]+e,this.to[o]+e,this.value[o])===!1)return!1}map(e,t){let i=[],r=[],o=[],s=-1,a=-1;for(let c=0;c<this.value.length;c++){let h=this.value[c],m=this.from[c]+e,y=this.to[c]+e,M,x;if(m==y){let T=t.mapPos(m,h.startSide,h.mapMode);if(T==null||(M=x=T,h.startSide!=h.endSide&&(x=t.mapPos(m,h.endSide),x<M)))continue}else if(M=t.mapPos(m,h.startSide),x=t.mapPos(y,h.endSide),M>x||M==x&&h.startSide>0&&h.endSide<=0)continue;(x-M||h.endSide-h.startSide)<0||(s<0&&(s=M),h.point&&(a=Math.max(a,x-M)),i.push(h),r.push(M-s),o.push(x-s))}return{mapped:i.length?new FU(r,o,i,a):null,pos:s}}}class Ho{constructor(e,t,i,r){this.chunkPos=e,this.chunk=t,this.nextLayer=i,this.maxPoint=r}static create(e,t,i,r){return new Ho(e,t,i,r)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:i=!1,filterFrom:r=0,filterTo:o=this.length}=e,s=e.filter;if(t.length==0&&!s)return this;if(i&&(t=t.slice().sort(wR)),this.isEmpty)return t.length?Ho.of(t):this;let a=new Fte(this,null,-1).goto(0),c=0,h=[],m=new f1;for(;a.value||c<t.length;)if(c<t.length&&(a.from-t[c].from||a.startSide-t[c].value.startSide)>=0){let y=t[c++];m.addInner(y.from,y.to,y.value)||h.push(y)}else a.rangeIndex==1&&a.chunkIndex<this.chunk.length&&(c==t.length||this.chunkEnd(a.chunkIndex)<t[c].from)&&(!s||r>this.chunkEnd(a.chunkIndex)||o<this.chunkPos[a.chunkIndex])&&m.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex])?a.nextChunk():((!s||r>a.to||o<a.from||s(a.from,a.to,a.value))&&(m.addInner(a.from,a.to,a.value)||h.push(MR.create(a.from,a.to,a.value))),a.next());return m.finishInner(this.nextLayer.isEmpty&&!h.length?Ho.empty:this.nextLayer.update({add:h,filter:s,filterFrom:r,filterTo:o}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],i=[],r=-1;for(let s=0;s<this.chunk.length;s++){let a=this.chunkPos[s],c=this.chunk[s],h=e.touchesRange(a,a+c.length);if(h===!1)r=Math.max(r,c.maxPoint),t.push(c),i.push(e.mapPos(a));else if(h===!0){let{mapped:m,pos:y}=c.map(a,e);m&&(r=Math.max(r,m.maxPoint),t.push(m),i.push(y))}}let o=this.nextLayer.map(e);return t.length==0?o:new Ho(i,t,o||Ho.empty,r)}between(e,t,i){if(!this.isEmpty){for(let r=0;r<this.chunk.length;r++){let o=this.chunkPos[r],s=this.chunk[r];if(t>=o&&e<=o+s.length&&s.between(o,e-o,t-o,i)===!1)return}this.nextLayer.between(e,t,i)}}iter(e=0){return h4.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return h4.from(e).goto(t)}static compare(e,t,i,r,o=-1){let s=e.filter(y=>y.maxPoint>0||!y.isEmpty&&y.maxPoint>=o),a=t.filter(y=>y.maxPoint>0||!y.isEmpty&&y.maxPoint>=o),c=aN(s,a,i),h=new b2(s,c,o),m=new b2(a,c,o);i.iterGaps((y,M,x)=>lN(h,y,m,M,x,r)),i.empty&&i.length==0&&lN(h,0,m,0,0,r)}static eq(e,t,i=0,r){r==null&&(r=999999999);let o=e.filter(m=>!m.isEmpty&&t.indexOf(m)<0),s=t.filter(m=>!m.isEmpty&&e.indexOf(m)<0);if(o.length!=s.length)return!1;if(!o.length)return!0;let a=aN(o,s),c=new b2(o,a,0).goto(i),h=new b2(s,a,0).goto(i);for(;;){if(c.to!=h.to||!SR(c.active,h.active)||c.point&&(!h.point||!c.point.eq(h.point)))return!1;if(c.to>r)return!0;c.next(),h.next()}}static spans(e,t,i,r,o=-1){let s=new b2(e,null,o).goto(t),a=t,c=s.openStart;for(;;){let h=Math.min(s.to,i);if(s.point){let m=s.activeForPoint(s.to),y=s.pointFrom<t?m.length+1:s.point.startSide<0?m.length:Math.min(m.length,c);r.point(a,h,s.point,m,y,s.pointRank),c=Math.min(s.openEnd(h),m.length)}else h>a&&(r.span(a,h,s.active,c),c=s.openEnd(h));if(s.to>i)return c+(s.point&&s.to>i?1:0);a=s.to,s.next()}}static of(e,t=!1){let i=new f1;for(let r of e instanceof MR?[e]:t?q_e(e):e)i.add(r.from,r.to,r.value);return i.finish()}static join(e){if(!e.length)return Ho.empty;let t=e[e.length-1];for(let i=e.length-2;i>=0;i--)for(let r=e[i];r!=Ho.empty;r=r.nextLayer)t=new Ho(r.chunkPos,r.chunk,t,Math.max(r.maxPoint,t.maxPoint));return t}}Ho.empty=new Ho([],[],null,-1);function q_e(n){if(n.length>1)for(let e=n[0],t=1;t<n.length;t++){let i=n[t];if(wR(e,i)>0)return n.slice().sort(wR);e=i}return n}Ho.empty.nextLayer=Ho.empty;class f1{finishChunk(e){this.chunks.push(new FU(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,i){this.addInner(e,t,i)||(this.nextLayer||(this.nextLayer=new f1)).add(e,t,i)}addInner(e,t,i){let r=e-this.lastTo||i.startSide-this.last.endSide;if(r<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return r<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=t,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let i=t.value.length-1;return this.last=t.value[i],this.lastFrom=t.from[i]+e,this.lastTo=t.to[i]+e,!0}finish(){return this.finishInner(Ho.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=Ho.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function aN(n,e,t){let i=new Map;for(let o of n)for(let s=0;s<o.chunk.length;s++)o.chunk[s].maxPoint<=0&&i.set(o.chunk[s],o.chunkPos[s]);let r=new Set;for(let o of e)for(let s=0;s<o.chunk.length;s++){let a=i.get(o.chunk[s]);a!=null&&(t?t.mapPos(a):a)==o.chunkPos[s]&&!t?.touchesRange(a,a+o.chunk[s].length)&&r.add(o.chunk[s])}return r}class Fte{constructor(e,t,i,r=0){this.layer=e,this.skip=t,this.minPoint=i,this.rank=r}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,i){for(;this.chunkIndex<this.layer.chunk.length;){let r=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(r)||this.layer.chunkEnd(this.chunkIndex)<e||r.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let r=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!i||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],i=e+t.from[this.rangeIndex];if(this.from=i,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class h4{constructor(e){this.heap=e}static from(e,t=null,i=-1){let r=[];for(let o=0;o<e.length;o++)for(let s=e[o];!s.isEmpty;s=s.nextLayer)s.maxPoint>=i&&r.push(new Fte(s,t,i,o));return r.length==1?r[0]:new h4(r)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let i of this.heap)i.goto(e,t);for(let i=this.heap.length>>1;i>=0;i--)SB(this.heap,i);return this.next(),this}forward(e,t){for(let i of this.heap)i.forward(e,t);for(let i=this.heap.length>>1;i>=0;i--)SB(this.heap,i);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),SB(this.heap,0)}}}function SB(n,e){for(let t=n[e];;){let i=(e<<1)+1;if(i>=n.length)break;let r=n[i];if(i+1<n.length&&r.compare(n[i+1])>=0&&(r=n[i+1],i++),t.compare(r)<0)break;n[i]=t,n[e]=r,e=i}}class b2{constructor(e,t,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=h4.from(e,t,i)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){hM(this.active,e),hM(this.activeTo,e),hM(this.activeRank,e),this.minActive=uN(this.active,this.activeTo)}addActive(e){let t=0,{value:i,to:r,rank:o}=this.cursor;for(;t<this.activeRank.length&&(o-this.activeRank[t]||r-this.activeTo[t])>0;)t++;dM(this.active,t,i),dM(this.activeTo,t,r),dM(this.activeRank,t,o),e&&dM(e,t,this.cursor.from),this.minActive=uN(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let r=this.minActive;if(r>-1&&(this.activeTo[r]-this.cursor.from||this.active[r].endSide-this.cursor.startSide)<0){if(this.activeTo[r]>e){this.to=this.activeTo[r],this.endSide=this.active[r].endSide;break}this.removeActive(r),i&&hM(i,r)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let o=this.cursor.value;if(!o.point)this.addActive(i),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=o,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=o.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){this.openStart=0;for(let r=i.length-1;r>=0&&i[r]<e;r--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&t.push(this.active[i]);return t.reverse()}openEnd(e){let t=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)t++;return t}}function lN(n,e,t,i,r,o){n.goto(e),t.goto(i);let s=i+r,a=i,c=i-e;for(;;){let h=n.to+c-t.to,m=h||n.endSide-t.endSide,y=m<0?n.to+c:t.to,M=Math.min(y,s);if(n.point||t.point?n.point&&t.point&&(n.point==t.point||n.point.eq(t.point))&&SR(n.activeForPoint(n.to),t.activeForPoint(t.to))||o.comparePoint(a,M,n.point,t.point):M>a&&!SR(n.active,t.active)&&o.compareRange(a,M,n.active,t.active),y>s)break;(h||n.openEnd!=t.openEnd)&&o.boundChange&&o.boundChange(y),a=y,m<=0&&n.next(),m>=0&&t.next()}}function SR(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!=e[t]&&!n[t].eq(e[t]))return!1;return!0}function hM(n,e){for(let t=e,i=n.length-1;t<i;t++)n[t]=n[t+1];n.pop()}function dM(n,e,t){for(let i=n.length-1;i>=e;i--)n[i+1]=n[i];n[e]=t}function uN(n,e){let t=-1,i=1e9;for(let r=0;r<e.length;r++)(e[r]-i||n[r].endSide-n[t].endSide)<0&&(t=r,i=e[r]);return t}function Nx(n,e,t=n.length){let i=0;for(let r=0;r<t&&r<n.length;)n.charCodeAt(r)==9?(i+=e-i%e,r++):(i++,r=CA(n,r));return i}function ER(n,e,t,i){for(let r=0,o=0;;){if(o>=e)return r;if(r==n.length)break;o+=n.charCodeAt(r)==9?t-o%t:1,r=CA(n,r)}return i===!0?-1:n.length}const OR="",cN=typeof Symbol>"u"?"__"+OR:Symbol.for(OR),BR=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),AN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class nv{constructor(e,t){this.rules=[];let{finish:i}=t||{};function r(s){return/^@/.test(s)?[s]:s.split(/,\s*/)}function o(s,a,c,h){let m=[],y=/^@(\w+)\b/.exec(s[0]),M=y&&y[1]=="keyframes";if(y&&a==null)return c.push(s[0]+";");for(let x in a){let T=a[x];if(/&/.test(x))o(x.split(/,\s*/).map(P=>s.map(F=>P.replace(/&/,F))).reduce((P,F)=>P.concat(F)),T,c);else if(T&&typeof T=="object"){if(!y)throw new RangeError("The value of a property ("+x+") should be a primitive value.");o(r(x),T,m,M)}else T!=null&&m.push(x.replace(/_.*/,"").replace(/[A-Z]/g,P=>"-"+P.toLowerCase())+": "+T+";")}(m.length||M)&&c.push((i&&!y&&!h?s.map(i):s).join(", ")+" {"+m.join(" ")+"}")}for(let s in e)o(r(s),e[s],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=AN[cN]||1;return AN[cN]=e+1,OR+e.toString(36)}static mount(e,t,i){let r=e[BR],o=i&&i.nonce;r?o&&r.setNonce(o):r=new Y_e(e,o),r.mount(Array.isArray(t)?t:[t],e)}}let hN=new Map;class Y_e{constructor(e,t){let i=e.ownerDocument||e,r=i.defaultView;if(!e.head&&e.adoptedStyleSheets&&r.CSSStyleSheet){let o=hN.get(i);if(o)return e[BR]=o;this.sheet=new r.CSSStyleSheet,hN.set(i,this)}else this.styleTag=i.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);this.modules=[],e[BR]=this}mount(e,t){let i=this.sheet,r=0,o=0;for(let s=0;s<e.length;s++){let a=e[s],c=this.modules.indexOf(a);if(c<o&&c>-1&&(this.modules.splice(c,1),o--,c=-1),c==-1){if(this.modules.splice(o++,0,a),i)for(let h=0;h<a.rules.length;h++)i.insertRule(a.rules[h],r++)}else{for(;o<c;)r+=this.modules[o++].rules.length;r+=a.rules.length,o++}}if(i)t.adoptedStyleSheets.indexOf(this.sheet)<0&&(t.adoptedStyleSheets=[this.sheet,...t.adoptedStyleSheets]);else{let s="";for(let c=0;c<this.modules.length;c++)s+=this.modules[c].getRules()+`
`;this.styleTag.textContent=s;let a=t.head||t;this.styleTag.parentNode!=a&&a.insertBefore(this.styleTag,a.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var iv={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},d4={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},$_e=typeof navigator<"u"&&/Mac/.test(navigator.platform),V_e=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var vA=0;vA<10;vA++)iv[48+vA]=iv[96+vA]=String(vA);for(var vA=1;vA<=24;vA++)iv[vA+111]="F"+vA;for(var vA=65;vA<=90;vA++)iv[vA]=String.fromCharCode(vA+32),d4[vA]=String.fromCharCode(vA);for(var EB in iv)d4.hasOwnProperty(EB)||(d4[EB]=iv[EB]);function H_e(n){var e=$_e&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||V_e&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?d4:iv)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}function Ba(){var n=arguments[0];typeof n=="string"&&(n=document.createElement(n));var e=1,t=arguments[1];if(t&&typeof t=="object"&&t.nodeType==null&&!Array.isArray(t)){for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var r=t[i];typeof r=="string"?n.setAttribute(i,r):r!=null&&(n[i]=r)}e++}for(;e<arguments.length;e++)zte(n,arguments[e]);return n}function zte(n,e){if(typeof e=="string")n.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)n.appendChild(e);else if(Array.isArray(e))for(var t=0;t<e.length;t++)zte(n,e[t]);else throw new RangeError("Unsupported child node: "+e)}function f4(n){let e;return n.nodeType==11?e=n.getSelection?n:n.ownerDocument:e=n,e.getSelection()}function IR(n,e){return e?n==e||n.contains(e.nodeType!=1?e.parentNode:e):!1}function dw(n,e){if(!e.anchorNode)return!1;try{return IR(n,e.anchorNode)}catch{return!1}}function p4(n){return n.nodeType==3?Qb(n,0,n.nodeValue.length).getClientRects():n.nodeType==1?n.getClientRects():[]}function y3(n,e,t,i){return t?dN(n,e,t,i,-1)||dN(n,e,t,i,1):!1}function Wb(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e}function yS(n){return n.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(n.nodeName)}function dN(n,e,t,i,r){for(;;){if(n==t&&e==i)return!0;if(e==(r<0?0:n0(n))){if(n.nodeName=="DIV")return!1;let o=n.parentNode;if(!o||o.nodeType!=1)return!1;e=Wb(n)+(r<0?0:1),n=o}else if(n.nodeType==1){if(n=n.childNodes[e+(r<0?-1:0)],n.nodeType==1&&n.contentEditable=="false")return!1;e=r<0?n0(n):0}else return!1}}function n0(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function l6(n,e){let t=e?n.left:n.right;return{left:t,right:t,top:n.top,bottom:n.bottom}}function Z_e(n){let e=n.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.innerWidth,top:0,bottom:n.innerHeight}}function jte(n,e){let t=e.width/n.offsetWidth,i=e.height/n.offsetHeight;return(t>.995&&t<1.005||!isFinite(t)||Math.abs(e.width-n.offsetWidth)<1)&&(t=1),(i>.995&&i<1.005||!isFinite(i)||Math.abs(e.height-n.offsetHeight)<1)&&(i=1),{scaleX:t,scaleY:i}}function X_e(n,e,t,i,r,o,s,a){let c=n.ownerDocument,h=c.defaultView||window;for(let m=n,y=!1;m&&!y;)if(m.nodeType==1){let M,x=m==c.body,T=1,P=1;if(x)M=Z_e(h);else{if(/^(fixed|sticky)$/.test(getComputedStyle(m).position)&&(y=!0),m.scrollHeight<=m.clientHeight&&m.scrollWidth<=m.clientWidth){m=m.assignedSlot||m.parentNode;continue}let q=m.getBoundingClientRect();({scaleX:T,scaleY:P}=jte(m,q)),M={left:q.left,right:q.left+m.clientWidth*T,top:q.top,bottom:q.top+m.clientHeight*P}}let F=0,j=0;if(r=="nearest")e.top<M.top?(j=e.top-(M.top+s),t>0&&e.bottom>M.bottom+j&&(j=e.bottom-M.bottom+s)):e.bottom>M.bottom&&(j=e.bottom-M.bottom+s,t<0&&e.top-j<M.top&&(j=e.top-(M.top+s)));else{let q=e.bottom-e.top,V=M.bottom-M.top;j=(r=="center"&&q<=V?e.top+q/2-V/2:r=="start"||r=="center"&&t<0?e.top-s:e.bottom-V+s)-M.top}if(i=="nearest"?e.left<M.left?(F=e.left-(M.left+o),t>0&&e.right>M.right+F&&(F=e.right-M.right+o)):e.right>M.right&&(F=e.right-M.right+o,t<0&&e.left<M.left+F&&(F=e.left-(M.left+o))):F=(i=="center"?e.left+(e.right-e.left)/2-(M.right-M.left)/2:i=="start"==a?e.left-o:e.right-(M.right-M.left)+o)-M.left,F||j)if(x)h.scrollBy(F,j);else{let q=0,V=0;if(j){let H=m.scrollTop;m.scrollTop+=j/P,V=(m.scrollTop-H)*P}if(F){let H=m.scrollLeft;m.scrollLeft+=F/T,q=(m.scrollLeft-H)*T}e={left:e.left-q,top:e.top-V,right:e.right-q,bottom:e.bottom-V},q&&Math.abs(q-F)<1&&(i="nearest"),V&&Math.abs(V-j)<1&&(r="nearest")}if(x)break;(e.top<M.top||e.bottom>M.bottom||e.left<M.left||e.right>M.right)&&(e={left:Math.max(e.left,M.left),right:Math.min(e.right,M.right),top:Math.max(e.top,M.top),bottom:Math.min(e.bottom,M.bottom)}),m=m.assignedSlot||m.parentNode}else if(m.nodeType==11)m=m.host;else break}function J_e(n){let e=n.ownerDocument,t,i;for(let r=n.parentNode;r&&!(r==e.body||t&&i);)if(r.nodeType==1)!i&&r.scrollHeight>r.clientHeight&&(i=r),!t&&r.scrollWidth>r.clientWidth&&(t=r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;return{x:t,y:i}}class exe{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:i}=e;this.set(t,Math.min(e.anchorOffset,t?n0(t):0),i,Math.min(e.focusOffset,i?n0(i):0))}set(e,t,i,r){this.anchorNode=e,this.anchorOffset=t,this.focusNode=i,this.focusOffset=r}}let QC=null;function Nte(n){if(n.setActive)return n.setActive();if(QC)return n.focus(QC);let e=[];for(let t=n;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(n.focus(QC==null?{get preventScroll(){return QC={preventScroll:!0},!0}}:void 0),!QC){QC=!1;for(let t=0;t<e.length;){let i=e[t++],r=e[t++],o=e[t++];i.scrollTop!=r&&(i.scrollTop=r),i.scrollLeft!=o&&(i.scrollLeft=o)}}}let fN;function Qb(n,e,t=e){let i=fN||(fN=document.createRange());return i.setEnd(n,t),i.setStart(n,e),i}function Y_(n,e,t,i){let r={key:e,code:e,keyCode:t,which:t,cancelable:!0};i&&({altKey:r.altKey,ctrlKey:r.ctrlKey,shiftKey:r.shiftKey,metaKey:r.metaKey}=i);let o=new KeyboardEvent("keydown",r);o.synthetic=!0,n.dispatchEvent(o);let s=new KeyboardEvent("keyup",r);return s.synthetic=!0,n.dispatchEvent(s),o.defaultPrevented||s.defaultPrevented}function txe(n){for(;n;){if(n&&(n.nodeType==9||n.nodeType==11&&n.host))return n;n=n.assignedSlot||n.parentNode}return null}function Gte(n){for(;n.attributes.length;)n.removeAttributeNode(n.attributes[0])}function nxe(n,e){let t=e.focusNode,i=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=i)return!1;for(i=Math.min(i,n0(t));;)if(i){if(t.nodeType!=1)return!1;let r=t.childNodes[i-1];r.contentEditable=="false"?i--:(t=r,i=n0(t))}else{if(t==n)return!0;i=Wb(t),t=t.parentNode}}function Wte(n){return n.scrollTop>Math.max(1,n.scrollHeight-n.clientHeight-4)}function Qte(n,e){for(let t=n,i=e;;){if(t.nodeType==3&&i>0)return{node:t,offset:i};if(t.nodeType==1&&i>0){if(t.contentEditable=="false")return null;t=t.childNodes[i-1],i=n0(t)}else if(t.parentNode&&!yS(t))i=Wb(t),t=t.parentNode;else return null}}function qte(n,e){for(let t=n,i=e;;){if(t.nodeType==3&&i<t.nodeValue.length)return{node:t,offset:i};if(t.nodeType==1&&i<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[i],i=0}else if(t.parentNode&&!yS(t))i=Wb(t)+1,t=t.parentNode;else return null}}class qA{constructor(e,t,i=!0){this.node=e,this.offset=t,this.precise=i}static before(e,t){return new qA(e.parentNode,Wb(e),t)}static after(e,t){return new qA(e.parentNode,Wb(e)+1,t)}}const zU=[];class ka{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let i of this.children){if(i==e)return t;t+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,t){if(this.flags&2){let i=this.dom,r=null,o;for(let s of this.children){if(s.flags&7){if(!s.dom&&(o=r?r.nextSibling:i.firstChild)){let a=ka.get(o);(!a||!a.parent&&a.canReuseDOM(s))&&s.reuseDOM(o)}s.sync(e,t),s.flags&=-8}if(o=r?r.nextSibling:i.firstChild,t&&!t.written&&t.node==i&&o!=s.dom&&(t.written=!0),s.dom.parentNode==i)for(;o&&o!=s.dom;)o=pN(o);else i.insertBefore(s.dom,o);r=s.dom}for(o=r?r.nextSibling:i.firstChild,o&&t&&t.node==i&&(t.written=!0);o;)o=pN(o)}else if(this.flags&1)for(let i of this.children)i.flags&7&&(i.sync(e,t),i.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,t){let i;if(e==this.dom)i=this.dom.childNodes[t];else{let r=n0(e)==0?0:t==0?-1:1;for(;;){let o=e.parentNode;if(o==this.dom)break;r==0&&o.firstChild!=o.lastChild&&(e==o.firstChild?r=-1:r=1),e=o}r<0?i=e:i=e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!ka.get(i);)i=i.nextSibling;if(!i)return this.length;for(let r=0,o=0;;r++){let s=this.children[r];if(s.dom==i)return o;o+=s.length+s.breakAfter}}domBoundsAround(e,t,i=0){let r=-1,o=-1,s=-1,a=-1;for(let c=0,h=i,m=i;c<this.children.length;c++){let y=this.children[c],M=h+y.length;if(h<e&&M>t)return y.domBoundsAround(e,t,h);if(M>=e&&r==-1&&(r=c,o=h),h>t&&y.dom.parentNode==this.dom){s=c,a=m;break}m=M,h=M+y.breakAfter}return{from:o,to:a<0?i+this.length:a,startDOM:(r?this.children[r-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:s<this.children.length&&s>=0?this.children[s].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.flags|=2),t.flags&1)return;t.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,i=zU){this.markDirty();for(let r=e;r<t;r++){let o=this.children[r];o.parent==this&&i.indexOf(o)<0&&o.destroy()}i.length<250?this.children.splice(e,t-e,...i):this.children=[].concat(this.children.slice(0,e),i,this.children.slice(t));for(let r=0;r<i.length;r++)i[r].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new Yte(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,i,r,o,s){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}ka.prototype.breakAfter=0;function pN(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class Yte{constructor(e,t,i){this.children=e,this.pos=t,this.i=i,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function $te(n,e,t,i,r,o,s,a,c){let{children:h}=n,m=h.length?h[e]:null,y=o.length?o[o.length-1]:null,M=y?y.breakAfter:s;if(!(e==i&&m&&!s&&!M&&o.length<2&&m.merge(t,r,o.length?y:null,t==0,a,c))){if(i<h.length){let x=h[i];x&&(r<x.length||x.breakAfter&&y?.breakAfter)?(e==i&&(x=x.split(r),r=0),!M&&y&&x.merge(0,r,y,!0,0,c)?o[o.length-1]=x:((r||x.children.length&&!x.children[0].length)&&x.merge(0,r,null,!1,0,c),o.push(x))):x?.breakAfter&&(y?y.breakAfter=1:s=1),i++}for(m&&(m.breakAfter=s,t>0&&(!s&&o.length&&m.merge(t,m.length,o[0],!1,a,0)?m.breakAfter=o.shift().breakAfter:(t<m.length||m.children.length&&m.children[m.children.length-1].length==0)&&m.merge(t,m.length,null,!1,a,0),e++));e<i&&o.length;)if(h[i-1].become(o[o.length-1]))i--,o.pop(),c=o.length?0:a;else if(h[e].become(o[0]))e++,o.shift(),a=o.length?0:c;else break;!o.length&&e&&i<h.length&&!h[e-1].breakAfter&&h[i].merge(0,0,h[e-1],!1,a,c)&&e--,(e<i||o.length)&&n.replaceChildren(e,i,o)}}function Vte(n,e,t,i,r,o){let s=n.childCursor(),{i:a,off:c}=s.findPos(t,1),{i:h,off:m}=s.findPos(e,-1),y=e-t;for(let M of i)y+=M.length;n.length+=y,$te(n,h,m,a,c,i,0,r,o)}let Cd=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},kR=typeof document<"u"?document:{documentElement:{style:{}}};const TR=/Edge\/(\d+)/.exec(Cd.userAgent),Hte=/MSIE \d/.test(Cd.userAgent),RR=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Cd.userAgent),u6=!!(Hte||RR||TR),mN=!u6&&/gecko\/(\d+)/i.test(Cd.userAgent),OB=!u6&&/Chrome\/(\d+)/.exec(Cd.userAgent),ixe="webkitFontSmoothing"in kR.documentElement.style,Zte=!u6&&/Apple Computer/.test(Cd.vendor),gN=Zte&&(/Mobile\/\w+/.test(Cd.userAgent)||Cd.maxTouchPoints>2);var wi={mac:gN||/Mac/.test(Cd.platform),windows:/Win/.test(Cd.platform),linux:/Linux|X11/.test(Cd.platform),ie:u6,ie_version:Hte?kR.documentMode||6:RR?+RR[1]:TR?+TR[1]:0,gecko:mN,gecko_version:mN?+(/Firefox\/(\d+)/.exec(Cd.userAgent)||[0,0])[1]:0,chrome:!!OB,chrome_version:OB?+OB[1]:0,ios:gN,android:/Android\b/.test(Cd.userAgent),safari:Zte,webkit_version:ixe?+(/\bAppleWebKit\/(\d+)/.exec(Cd.userAgent)||[0,0])[1]:0,tabSize:kR.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const rxe=256;class Sm extends ka{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,i){return this.flags&8||i&&(!(i instanceof Sm)||this.length-(t-e)+i.length>rxe||i.flags&8)?!1:(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new Sm(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t.flags|=this.flags&8,t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new qA(this.dom,e)}domBoundsAround(e,t,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return oxe(this.dom,e,t)}}class p1 extends ka{constructor(e,t=[],i=0){super(),this.mark=e,this.children=t,this.length=i;for(let r of t)r.setParent(this)}setAttrs(e){if(Gte(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,t){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,i,r,o,s){return i&&(!(i instanceof p1&&i.mark.eq(this.mark))||e&&o<=0||t<this.length&&s<=0)?!1:(Vte(this,e,t,i?i.children.slice():[],o-1,s-1),this.markDirty(),!0)}split(e){let t=[],i=0,r=-1,o=0;for(let a of this.children){let c=i+a.length;c>e&&t.push(i<e?a.split(e-i):a),r<0&&i>=e&&(r=o),i=c,o++}let s=this.length-e;return this.length=e,r>-1&&(this.children.length=r,this.markDirty()),new p1(this.mark,t,s)}domAtPos(e){return Xte(this,e)}coordsAt(e,t){return ene(this,e,t)}}function oxe(n,e,t){let i=n.nodeValue.length;e>i&&(e=i);let r=e,o=e,s=0;e==0&&t<0||e==i&&t>=0?wi.chrome||wi.gecko||(e?(r--,s=1):o<i&&(o++,s=-1)):t<0?r--:o<i&&o++;let a=Qb(n,r,o).getClientRects();if(!a.length)return null;let c=a[(s?s<0:t>=0)?0:a.length-1];return wi.safari&&!s&&c.width==0&&(c=Array.prototype.find.call(a,h=>h.width)||c),s?l6(c,s<0):c||null}class Ny extends ka{static create(e,t,i){return new Ny(e,t,i)}constructor(e,t,i){super(),this.widget=e,this.length=t,this.side=i,this.prevWidget=null}split(e){let t=Ny.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,t,i,r,o,s){return i&&(!(i instanceof Ny)||!this.widget.compare(i.widget)||e>0&&o<=0||t<this.length&&s<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}become(e){return e instanceof Ny&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return ms.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,i=t&&t.state.doc,r=this.posAtStart;return i?i.slice(r,r+this.length):ms.empty}domAtPos(e){return(this.length?e==0:this.side>0)?qA.before(this.dom):qA.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let i=this.widget.coordsAt(this.dom,e,t);if(i)return i;let r=this.dom.getClientRects(),o=null;if(!r.length)return null;let s=this.side?this.side<0:e>0;for(let a=s?r.length-1:0;o=r[a],!(e>0?a==0:a==r.length-1||o.top<o.bottom);a+=s?-1:1);return l6(o,!s)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class bx extends ka{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof bx&&e.side==this.side}split(){return new bx(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?qA.before(this.dom):qA.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return ms.empty}get isHidden(){return!0}}Sm.prototype.children=Ny.prototype.children=bx.prototype.children=zU;function Xte(n,e){let t=n.dom,{children:i}=n,r=0;for(let o=0;r<i.length;r++){let s=i[r],a=o+s.length;if(!(a==o&&s.getSide()<=0)){if(e>o&&e<a&&s.dom.parentNode==t)return s.domAtPos(e-o);if(e<=o)break;o=a}}for(let o=r;o>0;o--){let s=i[o-1];if(s.dom.parentNode==t)return s.domAtPos(s.length)}for(let o=r;o<i.length;o++){let s=i[o];if(s.dom.parentNode==t)return s.domAtPos(0)}return new qA(t,0)}function Jte(n,e,t){let i,{children:r}=n;t>0&&e instanceof p1&&r.length&&(i=r[r.length-1])instanceof p1&&i.mark.eq(e.mark)?Jte(i,e.children[0],t-1):(r.push(e),e.setParent(n)),n.length+=e.length}function ene(n,e,t){let i=null,r=-1,o=null,s=-1;function a(h,m){for(let y=0,M=0;y<h.children.length&&M<=m;y++){let x=h.children[y],T=M+x.length;T>=m&&(x.children.length?a(x,m-M):(!o||o.isHidden&&(t>0||axe(o,x)))&&(T>m||M==T&&x.getSide()>0)?(o=x,s=m-M):(M<m||M==T&&x.getSide()<0&&!x.isHidden)&&(i=x,r=m-M)),M=T}}a(n,e);let c=(t<0?i:o)||i||o;return c?c.coordsAt(Math.max(0,c==i?r:s),t):sxe(n)}function sxe(n){let e=n.dom.lastChild;if(!e)return n.dom.getBoundingClientRect();let t=p4(e);return t[t.length-1]||null}function axe(n,e){let t=n.coordsAt(0,1),i=e.coordsAt(0,1);return t&&i&&i.top<t.bottom}function DR(n,e){for(let t in n)t=="class"&&e.class?e.class+=" "+n.class:t=="style"&&e.style?e.style+=";"+n.style:e[t]=n[t];return e}const yN=Object.create(null);function vS(n,e,t){if(n==e)return!0;n||(n=yN),e||(e=yN);let i=Object.keys(n),r=Object.keys(e);if(i.length-(t&&i.indexOf(t)>-1?1:0)!=r.length-(t&&r.indexOf(t)>-1?1:0))return!1;for(let o of i)if(o!=t&&(r.indexOf(o)==-1||n[o]!==e[o]))return!1;return!0}function PR(n,e,t){let i=!1;if(e)for(let r in e)t&&r in t||(i=!0,r=="style"?n.style.cssText="":n.removeAttribute(r));if(t)for(let r in t)e&&e[r]==t[r]||(i=!0,r=="style"?n.style.cssText=t[r]:n.setAttribute(r,t[r]));return i}function lxe(n){let e=Object.create(null);for(let t=0;t<n.attributes.length;t++){let i=n.attributes[t];e[i.name]=i.value}return e}class cv{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,i){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var kh=(function(n){return n[n.Text=0]="Text",n[n.WidgetBefore=1]="WidgetBefore",n[n.WidgetAfter=2]="WidgetAfter",n[n.WidgetRange=3]="WidgetRange",n})(kh||(kh={}));class Or extends Gb{constructor(e,t,i,r){super(),this.startSide=e,this.endSide=t,this.widget=i,this.spec=r}get heightRelevant(){return!1}static mark(e){return new g5(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),i=!!e.block;return t+=i&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new rv(e,t,t,i,e.widget||null,!1)}static replace(e){let t=!!e.block,i,r;if(e.isBlockGap)i=-5e8,r=4e8;else{let{start:o,end:s}=tne(e,t);i=(o?t?-3e8:-1:5e8)-1,r=(s?t?2e8:1:-6e8)+1}return new rv(e,i,r,t,e.widget||null,!0)}static line(e){return new y5(e)}static set(e,t=!1){return Ho.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Or.none=Ho.empty;class g5 extends Or{constructor(e){let{start:t,end:i}=tne(e);super(t?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var t,i;return this==e||e instanceof g5&&this.tagName==e.tagName&&(this.class||((t=this.attrs)===null||t===void 0?void 0:t.class))==(e.class||((i=e.attrs)===null||i===void 0?void 0:i.class))&&vS(this.attrs,e.attrs,"class")}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}g5.prototype.point=!1;class y5 extends Or{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof y5&&this.spec.class==e.spec.class&&vS(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}y5.prototype.mapMode=Oh.TrackBefore;y5.prototype.point=!0;class rv extends Or{constructor(e,t,i,r,o,s){super(t,i,o,e),this.block=r,this.isReplace=s,this.mapMode=r?t<=0?Oh.TrackBefore:Oh.TrackAfter:Oh.TrackDel}get type(){return this.startSide!=this.endSide?kh.WidgetRange:this.startSide<=0?kh.WidgetBefore:kh.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof rv&&uxe(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}rv.prototype.point=!0;function tne(n,e=!1){let{inclusiveStart:t,inclusiveEnd:i}=n;return t==null&&(t=n.inclusive),i==null&&(i=n.inclusive),{start:t??e,end:i??e}}function uxe(n,e){return n==e||!!(n&&e&&n.compare(e))}function fw(n,e,t,i=0){let r=t.length-1;r>=0&&t[r]+i>=n?t[r]=Math.max(t[r],e):t.push(n,e)}class $u extends ka{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,i,r,o,s){if(i){if(!(i instanceof $u))return!1;this.dom||i.transferDOM(this)}return r&&this.setDeco(i?i.attrs:null),Vte(this,e,t,i?i.children.slice():[],o,s),!0}split(e){let t=new $u;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i,off:r}=this.childPos(e);r&&(t.append(this.children[i].split(r),0),this.children[i].merge(r,this.children[i].length,null,!1,0,0),i++);for(let o=i;o<this.children.length;o++)t.append(this.children[o],0);for(;i>0&&this.children[i-1].length==0;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){vS(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){Jte(this,e,t)}addLineDeco(e){let t=e.spec.attributes,i=e.spec.class;t&&(this.attrs=DR(t,this.attrs||{})),i&&(this.attrs=DR({class:i},this.attrs||{}))}domAtPos(e){return Xte(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,t){var i;this.dom?this.flags&4&&(Gte(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(PR(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let r=this.dom.lastChild;for(;r&&ka.get(r)instanceof p1;)r=r.lastChild;if(!r||!this.length||r.nodeName!="BR"&&((i=ka.get(r))===null||i===void 0?void 0:i.isEditable)==!1&&(!wi.ios||!this.children.some(o=>o instanceof Sm))){let o=document.createElement("BR");o.cmIgnore=!0,this.dom.appendChild(o)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,t;for(let i of this.children){if(!(i instanceof Sm)||/[^ -~]/.test(i.text))return null;let r=p4(i.dom);if(r.length!=1)return null;e+=r[0].width,t=r[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:t}:null}coordsAt(e,t){let i=ene(this,e,t);if(!this.children.length&&i&&this.parent){let{heightOracle:r}=this.parent.view.viewState,o=i.bottom-i.top;if(Math.abs(o-r.lineHeight)<2&&r.textHeight<o){let s=(o-r.textHeight)/2;return{top:i.top+s,bottom:i.bottom-s,left:i.left,right:i.left}}}return i}become(e){return e instanceof $u&&this.children.length==0&&e.children.length==0&&vS(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,t){for(let i=0,r=0;i<e.children.length;i++){let o=e.children[i],s=r+o.length;if(s>=t){if(o instanceof $u)return o;if(s>t)break}r=s+o.breakAfter}return null}}class l1 extends ka{constructor(e,t,i){super(),this.widget=e,this.length=t,this.deco=i,this.breakAfter=0,this.prevWidget=null}merge(e,t,i,r,o,s){return i&&(!(i instanceof l1)||!this.widget.compare(i.widget)||e>0&&o<=0||t<this.length&&s<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?qA.before(this.dom):qA.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let i=new l1(this.widget,t,this.deco);return i.breakAfter=this.breakAfter,i}get children(){return zU}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):ms.empty}domBoundsAround(){return null}become(e){return e instanceof l1&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,t){let i=this.widget.coordsAt(this.dom,e,t);return i||(this.widget instanceof UR?null:l6(this.dom.getBoundingClientRect(),this.length?e==0:t<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:t,endSide:i}=this.deco;return t==i?!1:e<0?t<0:i>0}}class UR extends cv{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class v3{constructor(e,t,i,r){this.doc=e,this.pos=t,this.end=i,this.disallowBlockEffectsFor=r,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof l1&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new $u),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(fM(new bx(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof l1)&&this.getLine()}buildText(e,t,i){for(;e>0;){if(this.textOff==this.text.length){let{value:s,lineBreak:a,done:c}=this.cursor.next(this.skip);if(this.skip=0,c)throw new Error("Ran out of text content when drawing inline views");if(a){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=s,this.textOff=0}let r=Math.min(this.text.length-this.textOff,e),o=Math.min(r,512);this.flushBuffer(t.slice(t.length-i)),this.getLine().append(fM(new Sm(this.text.slice(this.textOff,this.textOff+o)),t),i),this.atCursorPos=!0,this.textOff+=o,e-=o,i=r<=o?0:t.length}}span(e,t,i,r){this.buildText(t-e,i,r),this.pos=t,this.openStart<0&&(this.openStart=r)}point(e,t,i,r,o,s){if(this.disallowBlockEffectsFor[s]&&i instanceof rv){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let a=t-e;if(i instanceof rv)if(i.block)i.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new l1(i.widget||Cx.block,a,i));else{let c=Ny.create(i.widget||Cx.inline,a,a?0:i.startSide),h=this.atCursorPos&&!c.isEditable&&o<=r.length&&(e<t||i.startSide>0),m=!c.isEditable&&(e<t||o>r.length||i.startSide<=0),y=this.getLine();this.pendingBuffer==2&&!h&&!c.isEditable&&(this.pendingBuffer=0),this.flushBuffer(r),h&&(y.append(fM(new bx(1),r),o),o=r.length+Math.max(0,o-r.length)),y.append(fM(c,r),o),this.atCursorPos=m,this.pendingBuffer=m?e<t||o>r.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=r.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);a&&(this.textOff+a<=this.text.length?this.textOff+=a:(this.skip+=a-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=o)}static build(e,t,i,r,o){let s=new v3(e,t,i,o);return s.openEnd=Ho.spans(r,t,i,s),s.openStart<0&&(s.openStart=s.openEnd),s.finish(s.openEnd),s}}function fM(n,e){for(let t of e)n=new p1(t,[n],n.length);return n}class Cx extends cv{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}Cx.inline=new Cx("span");Cx.block=new Cx("div");var ol=(function(n){return n[n.LTR=0]="LTR",n[n.RTL=1]="RTL",n})(ol||(ol={}));const qb=ol.LTR,jU=ol.RTL;function nne(n){let e=[];for(let t=0;t<n.length;t++)e.push(1<<+n[t]);return e}const cxe=nne("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),Axe=nne("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),KR=Object.create(null),_g=[];for(let n of["()","[]","{}"]){let e=n.charCodeAt(0),t=n.charCodeAt(1);KR[e]=t,KR[t]=-e}function ine(n){return n<=247?cxe[n]:1424<=n&&n<=1524?2:1536<=n&&n<=1785?Axe[n-1536]:1774<=n&&n<=2220?4:8192<=n&&n<=8204?256:64336<=n&&n<=65023?4:1}const hxe=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Gy{get dir(){return this.level%2?jU:qb}constructor(e,t,i){this.from=e,this.to=t,this.level=i}side(e,t){return this.dir==t==e?this.to:this.from}forward(e,t){return e==(this.dir==t)}static find(e,t,i,r){let o=-1;for(let s=0;s<e.length;s++){let a=e[s];if(a.from<=t&&a.to>=t){if(a.level==i)return s;(o<0||(r!=0?r<0?a.from<t:a.to>t:e[o].level>a.level))&&(o=s)}}if(o<0)throw new RangeError("Index out of range");return o}}function rne(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++){let i=n[t],r=e[t];if(i.from!=r.from||i.to!=r.to||i.direction!=r.direction||!rne(i.inner,r.inner))return!1}return!0}const Ia=[];function dxe(n,e,t,i,r){for(let o=0;o<=i.length;o++){let s=o?i[o-1].to:e,a=o<i.length?i[o].from:t,c=o?256:r;for(let h=s,m=c,y=c;h<a;h++){let M=ine(n.charCodeAt(h));M==512?M=m:M==8&&y==4&&(M=16),Ia[h]=M==4?2:M,M&7&&(y=M),m=M}for(let h=s,m=c,y=c;h<a;h++){let M=Ia[h];if(M==128)h<a-1&&m==Ia[h+1]&&m&24?M=Ia[h]=m:Ia[h]=256;else if(M==64){let x=h+1;for(;x<a&&Ia[x]==64;)x++;let T=h&&m==8||x<t&&Ia[x]==8?y==1?1:8:256;for(let P=h;P<x;P++)Ia[P]=T;h=x-1}else M==8&&y==1&&(Ia[h]=1);m=M,M&7&&(y=M)}}}function fxe(n,e,t,i,r){let o=r==1?2:1;for(let s=0,a=0,c=0;s<=i.length;s++){let h=s?i[s-1].to:e,m=s<i.length?i[s].from:t;for(let y=h,M,x,T;y<m;y++)if(x=KR[M=n.charCodeAt(y)])if(x<0){for(let P=a-3;P>=0;P-=3)if(_g[P+1]==-x){let F=_g[P+2],j=F&2?r:F&4?F&1?o:r:0;j&&(Ia[y]=Ia[_g[P]]=j),a=P;break}}else{if(_g.length==189)break;_g[a++]=y,_g[a++]=M,_g[a++]=c}else if((T=Ia[y])==2||T==1){let P=T==r;c=P?0:1;for(let F=a-3;F>=0;F-=3){let j=_g[F+2];if(j&2)break;if(P)_g[F+2]|=2;else{if(j&4)break;_g[F+2]|=4}}}}}function pxe(n,e,t,i){for(let r=0,o=i;r<=t.length;r++){let s=r?t[r-1].to:n,a=r<t.length?t[r].from:e;for(let c=s;c<a;){let h=Ia[c];if(h==256){let m=c+1;for(;;)if(m==a){if(r==t.length)break;m=t[r++].to,a=r<t.length?t[r].from:e}else if(Ia[m]==256)m++;else break;let y=o==1,M=(m<e?Ia[m]:i)==1,x=y==M?y?1:2:i;for(let T=m,P=r,F=P?t[P-1].to:n;T>c;)T==F&&(T=t[--P].from,F=P?t[P-1].to:n),Ia[--T]=x;c=m}else o=h,c++}}}function LR(n,e,t,i,r,o,s){let a=i%2?2:1;if(i%2==r%2)for(let c=e,h=0;c<t;){let m=!0,y=!1;if(h==o.length||c<o[h].from){let P=Ia[c];P!=a&&(m=!1,y=P==16)}let M=!m&&a==1?[]:null,x=m?i:i+1,T=c;e:for(;;)if(h<o.length&&T==o[h].from){if(y)break e;let P=o[h];if(!m)for(let F=P.to,j=h+1;;){if(F==t)break e;if(j<o.length&&o[j].from==F)F=o[j++].to;else{if(Ia[F]==a)break e;break}}if(h++,M)M.push(P);else{P.from>c&&s.push(new Gy(c,P.from,x));let F=P.direction==qb!=!(x%2);FR(n,F?i+1:i,r,P.inner,P.from,P.to,s),c=P.to}T=P.to}else{if(T==t||(m?Ia[T]!=a:Ia[T]==a))break;T++}M?LR(n,c,T,i+1,r,M,s):c<T&&s.push(new Gy(c,T,x)),c=T}else for(let c=t,h=o.length;c>e;){let m=!0,y=!1;if(!h||c>o[h-1].to){let P=Ia[c-1];P!=a&&(m=!1,y=P==16)}let M=!m&&a==1?[]:null,x=m?i:i+1,T=c;e:for(;;)if(h&&T==o[h-1].to){if(y)break e;let P=o[--h];if(!m)for(let F=P.from,j=h;;){if(F==e)break e;if(j&&o[j-1].to==F)F=o[--j].from;else{if(Ia[F-1]==a)break e;break}}if(M)M.push(P);else{P.to<c&&s.push(new Gy(P.to,c,x));let F=P.direction==qb!=!(x%2);FR(n,F?i+1:i,r,P.inner,P.from,P.to,s),c=P.from}T=P.from}else{if(T==e||(m?Ia[T-1]!=a:Ia[T-1]==a))break;T--}M?LR(n,T,c,i+1,r,M,s):T<c&&s.push(new Gy(T,c,x)),c=T}}function FR(n,e,t,i,r,o,s){let a=e%2?2:1;dxe(n,r,o,i,a),fxe(n,r,o,i,a),pxe(r,o,i,a),LR(n,r,o,e,t,i,s)}function mxe(n,e,t){if(!n)return[new Gy(0,0,e==jU?1:0)];if(e==qb&&!t.length&&!hxe.test(n))return one(n.length);if(t.length)for(;n.length>Ia.length;)Ia[Ia.length]=256;let i=[],r=e==qb?0:1;return FR(n,r,r,t,0,n.length,i),i}function one(n){return[new Gy(0,n,0)]}let sne="";function gxe(n,e,t,i,r){var o;let s=i.head-n.from,a=Gy.find(e,s,(o=i.bidiLevel)!==null&&o!==void 0?o:-1,i.assoc),c=e[a],h=c.side(r,t);if(s==h){let M=a+=r?1:-1;if(M<0||M>=e.length)return null;c=e[a=M],s=c.side(!r,t),h=c.side(r,t)}let m=CA(n.text,s,c.forward(r,t));(m<c.from||m>c.to)&&(m=h),sne=n.text.slice(Math.min(s,m),Math.max(s,m));let y=a==(r?e.length-1:0)?null:e[a+(r?1:-1)];return y&&m==h&&y.level+(r?0:1)<c.level?wn.cursor(y.side(!r,t)+n.from,y.forward(r,t)?1:-1,y.level):wn.cursor(m+n.from,c.forward(r,t)?-1:1,c.level)}function yxe(n,e,t){for(let i=e;i<t;i++){let r=ine(n.charCodeAt(i));if(r==1)return qb;if(r==2||r==4)return jU}return qb}const ane=Bi.define(),lne=Bi.define(),une=Bi.define(),cne=Bi.define(),zR=Bi.define(),Ane=Bi.define(),hne=Bi.define(),NU=Bi.define(),GU=Bi.define(),dne=Bi.define({combine:n=>n.some(e=>e)}),fne=Bi.define({combine:n=>n.some(e=>e)}),pne=Bi.define();class $_{constructor(e,t="nearest",i="nearest",r=5,o=5,s=!1){this.range=e,this.y=t,this.x=i,this.yMargin=r,this.xMargin=o,this.isSnapshot=s}map(e){return e.empty?this:new $_(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new $_(wn.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const pM=ro.define({map:(n,e)=>n.map(e)}),mne=ro.define();function Ih(n,e,t){let i=n.facet(cne);i.length?i[0](e):window.onerror&&window.onerror(String(e),t,void 0,void 0,e)||(t?console.error(t+":",e):console.error(e))}const t1=Bi.define({combine:n=>n.length?n[0]:!0});let vxe=0;const B_=Bi.define({combine(n){return n.filter((e,t)=>{for(let i=0;i<t;i++)if(n[i].plugin==e.plugin)return!1;return!0})}});class xu{constructor(e,t,i,r,o){this.id=e,this.create=t,this.domEventHandlers=i,this.domEventObservers=r,this.baseExtensions=o(this),this.extension=this.baseExtensions.concat(B_.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(B_.of({plugin:this,arg:e}))}static define(e,t){const{eventHandlers:i,eventObservers:r,provide:o,decorations:s}=t||{};return new xu(vxe++,e,i,r,a=>{let c=[];return s&&c.push(m4.of(h=>{let m=h.plugin(a);return m?s(m):Or.none})),o&&c.push(o(a)),c})}static fromClass(e,t){return xu.define((i,r)=>new e(i,r),t)}}class BB{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(i){if(Ih(t.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(t){Ih(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(i){Ih(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const gne=Bi.define(),WU=Bi.define(),m4=Bi.define(),yne=Bi.define(),v5=Bi.define(),vne=Bi.define();function vN(n,e){let t=n.state.facet(vne);if(!t.length)return t;let i=t.map(o=>o instanceof Function?o(n):o),r=[];return Ho.spans(i,e.from,e.to,{point(){},span(o,s,a,c){let h=o-e.from,m=s-e.from,y=r;for(let M=a.length-1;M>=0;M--,c--){let x=a[M].spec.bidiIsolate,T;if(x==null&&(x=yxe(e.text,h,m)),c>0&&y.length&&(T=y[y.length-1]).to==h&&T.direction==x)T.to=m,y=T.inner;else{let P={from:h,to:m,direction:x,inner:[]};y.push(P),y=P.inner}}}}),r}const bne=Bi.define();function QU(n){let e=0,t=0,i=0,r=0;for(let o of n.state.facet(bne)){let s=o(n);s&&(s.left!=null&&(e=Math.max(e,s.left)),s.right!=null&&(t=Math.max(t,s.right)),s.top!=null&&(i=Math.max(i,s.top)),s.bottom!=null&&(r=Math.max(r,s.bottom)))}return{left:e,right:t,top:i,bottom:r}}const $2=Bi.define();class bp{constructor(e,t,i,r){this.fromA=e,this.toA=t,this.fromB=i,this.toB=r}join(e){return new bp(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,i=this;for(;t>0;t--){let r=e[t-1];if(!(r.fromA>i.toA)){if(r.toA<i.fromA)break;i=i.join(r),e.splice(t-1,1)}}return e.splice(t,0,i),e}static extendWithRanges(e,t){if(t.length==0)return e;let i=[];for(let r=0,o=0,s=0,a=0;;r++){let c=r==e.length?null:e[r],h=s-a,m=c?c.fromB:1e9;for(;o<t.length&&t[o]<m;){let y=t[o],M=t[o+1],x=Math.max(a,y),T=Math.min(m,M);if(x<=T&&new bp(x+h,T+h,x,T).addToSet(i),M>m)break;o+=2}if(!c)return i;new bp(c.fromA,c.toA,c.fromB,c.toB).addToSet(i),s=c.toA,a=c.toB}}}class bS{constructor(e,t,i){this.view=e,this.state=t,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=Mc.empty(this.startState.doc.length);for(let o of i)this.changes=this.changes.compose(o.changes);let r=[];this.changes.iterChangedRanges((o,s,a,c)=>r.push(new bp(o,s,a,c))),this.changedRanges=r}static create(e,t,i){return new bS(e,t,i)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class bN extends ka{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=Or.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new $u],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new bp(0,0,0,e.state.doc.length)],0,null)}update(e){var t;let i=e.changedRanges;this.minWidth>0&&i.length&&(i.every(({fromA:h,toA:m})=>m<this.minWidthFrom||h>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let r=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((t=this.domChanged)===null||t===void 0)&&t.newSel?r=this.domChanged.newSel.head:!Sxe(e.changes,this.hasComposition)&&!e.selectionSet&&(r=e.state.selection.main.head));let o=r>-1?Cxe(this.view,e.changes,r):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:h,to:m}=this.hasComposition;i=new bp(h,m,e.changes.mapPos(h,-1),e.changes.mapPos(m,1)).addToSet(i.slice())}this.hasComposition=o?{from:o.range.fromB,to:o.range.toB}:null,(wi.ie||wi.chrome)&&!o&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let s=this.decorations,a=this.updateDeco(),c=Mxe(s,a,e.changes);return i=bp.extendWithRanges(i,c),!(this.flags&7)&&i.length==0?!1:(this.updateInner(i,e.startState.doc.length,o),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t,i){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t,i);let{observer:r}=this.view;r.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let s=wi.chrome||wi.ios?{node:r.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,s),this.flags&=-8,s&&(s.written||r.selectionRange.focusNode!=s.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(s=>s.flags&=-9);let o=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let s of this.children)s instanceof l1&&s.widget instanceof UR&&o.push(s.dom);r.updateGaps(o)}updateChildren(e,t,i){let r=i?i.range.addToSet(e.slice()):e,o=this.childCursor(t);for(let s=r.length-1;;s--){let a=s>=0?r[s]:null;if(!a)break;let{fromA:c,toA:h,fromB:m,toB:y}=a,M,x,T,P;if(i&&i.range.fromB<y&&i.range.toB>m){let H=v3.build(this.view.state.doc,m,i.range.fromB,this.decorations,this.dynamicDecorationMap),Q=v3.build(this.view.state.doc,i.range.toB,y,this.decorations,this.dynamicDecorationMap);x=H.breakAtStart,T=H.openStart,P=Q.openEnd;let Y=this.compositionView(i);Q.breakAtStart?Y.breakAfter=1:Q.content.length&&Y.merge(Y.length,Y.length,Q.content[0],!1,Q.openStart,0)&&(Y.breakAfter=Q.content[0].breakAfter,Q.content.shift()),H.content.length&&Y.merge(0,0,H.content[H.content.length-1],!0,0,H.openEnd)&&H.content.pop(),M=H.content.concat(Y).concat(Q.content)}else({content:M,breakAtStart:x,openStart:T,openEnd:P}=v3.build(this.view.state.doc,m,y,this.decorations,this.dynamicDecorationMap));let{i:F,off:j}=o.findPos(h,1),{i:q,off:V}=o.findPos(c,-1);$te(this,q,V,F,j,M,x,T,P)}i&&this.fixCompositionDOM(i)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let t of e.transactions)for(let i of t.effects)i.is(mne)&&(this.editContextFormatting=i.value)}compositionView(e){let t=new Sm(e.text.nodeValue);t.flags|=8;for(let{deco:r}of e.marks)t=new p1(r,[t],t.length);let i=new $u;return i.append(t,0),i}fixCompositionDOM(e){let t=(o,s)=>{s.flags|=8|(s.children.some(c=>c.flags&7)?1:0),this.markedForComposition.add(s);let a=ka.get(o);a&&a!=s&&(a.dom=null),s.setDOM(o)},i=this.childPos(e.range.fromB,1),r=this.children[i.i];t(e.line,r);for(let o=e.marks.length-1;o>=-1;o--)i=r.childPos(i.off,1),r=r.children[i.i],t(o>=0?e.marks[o].node:e.text,r)}updateSelection(e=!1,t=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let i=this.view.root.activeElement,r=i==this.dom,o=!r&&!(this.view.state.facet(t1)||this.dom.tabIndex>-1)&&dw(this.dom,this.view.observer.selectionRange)&&!(i&&this.dom.contains(i));if(!(r||t||o))return;let s=this.forceSelection;this.forceSelection=!1;let a=this.view.state.selection.main,c=this.moveToLine(this.domAtPos(a.anchor)),h=a.empty?c:this.moveToLine(this.domAtPos(a.head));if(wi.gecko&&a.empty&&!this.hasComposition&&bxe(c)){let y=document.createTextNode("");this.view.observer.ignore(()=>c.node.insertBefore(y,c.node.childNodes[c.offset]||null)),c=h=new qA(y,0),s=!0}let m=this.view.observer.selectionRange;(s||!m.focusNode||(!y3(c.node,c.offset,m.anchorNode,m.anchorOffset)||!y3(h.node,h.offset,m.focusNode,m.focusOffset))&&!this.suppressWidgetCursorChange(m,a))&&(this.view.observer.ignore(()=>{wi.android&&wi.chrome&&this.dom.contains(m.focusNode)&&wxe(m.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let y=f4(this.view.root);if(y)if(a.empty){if(wi.gecko){let M=_xe(c.node,c.offset);if(M&&M!=3){let x=(M==1?Qte:qte)(c.node,c.offset);x&&(c=new qA(x.node,x.offset))}}y.collapse(c.node,c.offset),a.bidiLevel!=null&&y.caretBidiLevel!==void 0&&(y.caretBidiLevel=a.bidiLevel)}else if(y.extend){y.collapse(c.node,c.offset);try{y.extend(h.node,h.offset)}catch{}}else{let M=document.createRange();a.anchor>a.head&&([c,h]=[h,c]),M.setEnd(h.node,h.offset),M.setStart(c.node,c.offset),y.removeAllRanges(),y.addRange(M)}o&&this.view.root.activeElement==this.dom&&(this.dom.blur(),i&&i.focus())}),this.view.observer.setSelectionRange(c,h)),this.impreciseAnchor=c.precise?null:new qA(m.anchorNode,m.anchorOffset),this.impreciseHead=h.precise?null:new qA(m.focusNode,m.focusOffset)}suppressWidgetCursorChange(e,t){return this.hasComposition&&t.empty&&y3(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==t.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,i=f4(e.root),{anchorNode:r,anchorOffset:o}=e.observer.selectionRange;if(!i||!t.empty||!t.assoc||!i.modify)return;let s=$u.find(this,t.head);if(!s)return;let a=s.posAtStart;if(t.head==a||t.head==a+s.length)return;let c=this.coordsAt(t.head,-1),h=this.coordsAt(t.head,1);if(!c||!h||c.bottom>h.top)return;let m=this.domAtPos(t.head+t.assoc);i.collapse(m.node,m.offset),i.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let y=e.observer.selectionRange;e.docView.posFromDOM(y.anchorNode,y.anchorOffset)!=t.from&&i.collapse(r,o)}moveToLine(e){let t=this.dom,i;if(e.node!=t)return e;for(let r=e.offset;!i&&r<t.childNodes.length;r++){let o=ka.get(t.childNodes[r]);o instanceof $u&&(i=o.domAtPos(0))}for(let r=e.offset-1;!i&&r>=0;r--){let o=ka.get(t.childNodes[r]);o instanceof $u&&(i=o.domAtPos(o.length))}return i?new qA(i.node,i.offset,!0):e}nearest(e){for(let t=e;t;){let i=ka.get(t);if(i&&i.rootView==this)return i;t=t.parentNode}return null}posFromDOM(e,t){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,t)+i.posAtStart}domAtPos(e){let{i:t,off:i}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let r=this.children[t];if(i<r.length||r instanceof $u)break;t++,i=0}return this.children[t].domAtPos(i)}coordsAt(e,t){let i=null,r=0;for(let o=this.length,s=this.children.length-1;s>=0;s--){let a=this.children[s],c=o-a.breakAfter,h=c-a.length;if(c<e)break;if(h<=e&&(h<e||a.covers(-1))&&(c>e||a.covers(1))&&(!i||a instanceof $u&&!(i instanceof $u&&t>=0)))i=a,r=h;else if(i&&h==e&&c==e&&a instanceof l1&&Math.abs(t)<2){if(a.deco.startSide<0)break;s&&(i=null)}o=h}return i?i.coordsAt(e-r,t):null}coordsForChar(e){let{i:t,off:i}=this.childPos(e,1),r=this.children[t];if(!(r instanceof $u))return null;for(;r.children.length;){let{i:a,off:c}=r.childPos(i,1);for(;;a++){if(a==r.children.length)return null;if((r=r.children[a]).length)break}i=c}if(!(r instanceof Sm))return null;let o=CA(r.text,i);if(o==i)return null;let s=Qb(r.dom,i,o).getClientRects();for(let a=0;a<s.length;a++){let c=s[a];if(a==s.length-1||c.top<c.bottom&&c.left<c.right)return c}return null}measureVisibleLineHeights(e){let t=[],{from:i,to:r}=e,o=this.view.contentDOM.clientWidth,s=o>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,c=this.view.textDirection==ol.LTR;for(let h=0,m=0;m<this.children.length;m++){let y=this.children[m],M=h+y.length;if(M>r)break;if(h>=i){let x=y.dom.getBoundingClientRect();if(t.push(x.height),s){let T=y.dom.lastChild,P=T?p4(T):[];if(P.length){let F=P[P.length-1],j=c?F.right-x.left:x.right-F.left;j>a&&(a=j,this.minWidth=o,this.minWidthFrom=h,this.minWidthTo=M)}}}h=M+y.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return getComputedStyle(this.children[t].dom).direction=="rtl"?ol.RTL:ol.LTR}measureTextSize(){for(let o of this.children)if(o instanceof $u){let s=o.measureTextSize();if(s)return s}let e=document.createElement("div"),t,i,r;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let o=p4(e.firstChild)[0];t=e.getBoundingClientRect().height,i=o?o.width/27:7,r=o?o.height:t,e.remove()}),{lineHeight:t,charWidth:i,textHeight:r}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new Yte(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let i=0,r=0;;r++){let o=r==t.viewports.length?null:t.viewports[r],s=o?o.from-1:this.length;if(s>i){let a=(t.lineBlockAt(s).bottom-t.lineBlockAt(i).top)/this.view.scaleY;e.push(Or.replace({widget:new UR(a),block:!0,inclusive:!0,isBlockGap:!0}).range(i,s))}if(!o)break;i=o.to+1}return Or.set(e)}updateDeco(){let e=1,t=this.view.state.facet(m4).map(o=>(this.dynamicDecorationMap[e++]=typeof o=="function")?o(this.view):o),i=!1,r=this.view.state.facet(yne).map((o,s)=>{let a=typeof o=="function";return a&&(i=!0),a?o(this.view):o});for(r.length&&(this.dynamicDecorationMap[e++]=i,t.push(Ho.join(r))),this.decorations=[this.editContextFormatting,...t,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let h=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=h.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let h of this.view.state.facet(pne))try{if(h(this.view,e.range,e))return!0}catch(m){Ih(this.view.state,m,"scroll handler")}let{range:t}=e,i=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),r;if(!i)return;!t.empty&&(r=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(i={left:Math.min(i.left,r.left),top:Math.min(i.top,r.top),right:Math.max(i.right,r.right),bottom:Math.max(i.bottom,r.bottom)});let o=QU(this.view),s={left:i.left-o.left,top:i.top-o.top,right:i.right+o.right,bottom:i.bottom+o.bottom},{offsetWidth:a,offsetHeight:c}=this.view.scrollDOM;X_e(this.view.scrollDOM,s,t.head<t.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,a),-a),Math.max(Math.min(e.yMargin,c),-c),this.view.textDirection==ol.LTR)}}function bxe(n){return n.node.nodeType==1&&n.node.firstChild&&(n.offset==0||n.node.childNodes[n.offset-1].contentEditable=="false")&&(n.offset==n.node.childNodes.length||n.node.childNodes[n.offset].contentEditable=="false")}function Cne(n,e){let t=n.observer.selectionRange;if(!t.focusNode)return null;let i=Qte(t.focusNode,t.focusOffset),r=qte(t.focusNode,t.focusOffset),o=i||r;if(r&&i&&r.node!=i.node){let a=ka.get(r.node);if(!a||a instanceof Sm&&a.text!=r.node.nodeValue)o=r;else if(n.docView.lastCompositionAfterCursor){let c=ka.get(i.node);!c||c instanceof Sm&&c.text!=i.node.nodeValue||(o=r)}}if(n.docView.lastCompositionAfterCursor=o!=i,!o)return null;let s=e-o.offset;return{from:s,to:s+o.node.nodeValue.length,node:o.node}}function Cxe(n,e,t){let i=Cne(n,t);if(!i)return null;let{node:r,from:o,to:s}=i,a=r.nodeValue;if(/[\n\r]/.test(a)||n.state.doc.sliceString(i.from,i.to)!=a)return null;let c=e.invertedDesc,h=new bp(c.mapPos(o),c.mapPos(s),o,s),m=[];for(let y=r.parentNode;;y=y.parentNode){let M=ka.get(y);if(M instanceof p1)m.push({node:y,deco:M.mark});else{if(M instanceof $u||y.nodeName=="DIV"&&y.parentNode==n.contentDOM)return{range:h,text:r,marks:m,line:y};if(y!=n.contentDOM)m.push({node:y,deco:new g5({inclusive:!0,attributes:lxe(y),tagName:y.tagName.toLowerCase()})});else return null}}}function _xe(n,e){return n.nodeType!=1?0:(e&&n.childNodes[e-1].contentEditable=="false"?1:0)|(e<n.childNodes.length&&n.childNodes[e].contentEditable=="false"?2:0)}let xxe=class{constructor(){this.changes=[]}compareRange(e,t){fw(e,t,this.changes)}comparePoint(e,t){fw(e,t,this.changes)}boundChange(e){fw(e,e,this.changes)}};function Mxe(n,e,t){let i=new xxe;return Ho.compare(n,e,t,i),i.changes}function wxe(n,e){for(let t=n;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function Sxe(n,e){let t=!1;return e&&n.iterChangedRanges((i,r)=>{i<e.to&&r>e.from&&(t=!0)}),t}function Exe(n,e,t=1){let i=n.charCategorizer(e),r=n.doc.lineAt(e),o=e-r.from;if(r.length==0)return wn.cursor(e);o==0?t=1:o==r.length&&(t=-1);let s=o,a=o;t<0?s=CA(r.text,o,!1):a=CA(r.text,o);let c=i(r.text.slice(s,a));for(;s>0;){let h=CA(r.text,s,!1);if(i(r.text.slice(h,s))!=c)break;s=h}for(;a<r.length;){let h=CA(r.text,a);if(i(r.text.slice(a,h))!=c)break;a=h}return wn.range(s+r.from,a+r.from)}function Oxe(n,e){return e.left>n?e.left-n:Math.max(0,n-e.right)}function Bxe(n,e){return e.top>n?e.top-n:Math.max(0,n-e.bottom)}function IB(n,e){return n.top<e.bottom-1&&n.bottom>e.top+1}function CN(n,e){return e<n.top?{top:e,left:n.left,right:n.right,bottom:n.bottom}:n}function _N(n,e){return e>n.bottom?{top:n.top,left:n.left,right:n.right,bottom:e}:n}function jR(n,e,t){let i,r,o,s,a=!1,c,h,m,y;for(let T=n.firstChild;T;T=T.nextSibling){let P=p4(T);for(let F=0;F<P.length;F++){let j=P[F];r&&IB(r,j)&&(j=CN(_N(j,r.bottom),r.top));let q=Oxe(e,j),V=Bxe(t,j);if(q==0&&V==0)return T.nodeType==3?xN(T,e,t):jR(T,e,t);(!i||s>V||s==V&&o>q)&&(i=T,r=j,o=q,s=V,a=q?e<j.left?F>0:F<P.length-1:!0),q==0?t>j.bottom&&(!m||m.bottom<j.bottom)?(c=T,m=j):t<j.top&&(!y||y.top>j.top)&&(h=T,y=j):m&&IB(m,j)?m=_N(m,j.bottom):y&&IB(y,j)&&(y=CN(y,j.top))}}if(m&&m.bottom>=t?(i=c,r=m):y&&y.top<=t&&(i=h,r=y),!i)return{node:n,offset:0};let M=Math.max(r.left,Math.min(r.right,e));if(i.nodeType==3)return xN(i,M,t);if(a&&i.contentEditable!="false")return jR(i,M,t);let x=Array.prototype.indexOf.call(n.childNodes,i)+(e>=(r.left+r.right)/2?1:0);return{node:n,offset:x}}function xN(n,e,t){let i=n.nodeValue.length,r=-1,o=1e9,s=0;for(let a=0;a<i;a++){let c=Qb(n,a,a+1).getClientRects();for(let h=0;h<c.length;h++){let m=c[h];if(m.top==m.bottom)continue;s||(s=e-m.left);let y=(m.top>t?m.top-t:t-m.bottom)-1;if(m.left-1<=e&&m.right+1>=e&&y<o){let M=e>=(m.left+m.right)/2,x=M;if((wi.chrome||wi.gecko)&&Qb(n,a).getBoundingClientRect().left==m.right&&(x=!M),y<=0)return{node:n,offset:a+(x?1:0)};r=a+(x?1:0),o=y}}}return{node:n,offset:r>-1?r:s>0?n.nodeValue.length:0}}function _ne(n,e,t,i=-1){var r,o;let s=n.contentDOM.getBoundingClientRect(),a=s.top+n.viewState.paddingTop,c,{docHeight:h}=n.viewState,{x:m,y}=e,M=y-a;if(M<0)return 0;if(M>h)return n.state.doc.length;for(let H=n.viewState.heightOracle.textHeight/2,Q=!1;c=n.elementAtHeight(M),c.type!=kh.Text;)for(;M=i>0?c.bottom+H:c.top-H,!(M>=0&&M<=h);){if(Q)return t?null:0;Q=!0,i=-i}y=a+M;let x=c.from;if(x<n.viewport.from)return n.viewport.from==0?0:t?null:MN(n,s,c,m,y);if(x>n.viewport.to)return n.viewport.to==n.state.doc.length?n.state.doc.length:t?null:MN(n,s,c,m,y);let T=n.dom.ownerDocument,P=n.root.elementFromPoint?n.root:T,F=P.elementFromPoint(m,y);F&&!n.contentDOM.contains(F)&&(F=null),F||(m=Math.max(s.left+1,Math.min(s.right-1,m)),F=P.elementFromPoint(m,y),F&&!n.contentDOM.contains(F)&&(F=null));let j,q=-1;if(F&&((r=n.docView.nearest(F))===null||r===void 0?void 0:r.isEditable)!=!1){if(T.caretPositionFromPoint){let H=T.caretPositionFromPoint(m,y);H&&({offsetNode:j,offset:q}=H)}else if(T.caretRangeFromPoint){let H=T.caretRangeFromPoint(m,y);H&&({startContainer:j,startOffset:q}=H)}j&&(!n.contentDOM.contains(j)||wi.safari&&Ixe(j,q,m)||wi.chrome&&kxe(j,q,m))&&(j=void 0),j&&(q=Math.min(n0(j),q))}if(!j||!n.docView.dom.contains(j)){let H=$u.find(n.docView,x);if(!H)return M>c.top+c.height/2?c.to:c.from;({node:j,offset:q}=jR(H.dom,m,y))}let V=n.docView.nearest(j);if(!V)return null;if(V.isWidget&&((o=V.dom)===null||o===void 0?void 0:o.nodeType)==1){let H=V.dom.getBoundingClientRect();return e.y<H.top||e.y<=H.bottom&&e.x<=(H.left+H.right)/2?V.posAtStart:V.posAtEnd}else return V.localPosFromDOM(j,q)+V.posAtStart}function MN(n,e,t,i,r){let o=Math.round((i-e.left)*n.defaultCharacterWidth);if(n.lineWrapping&&t.height>n.defaultLineHeight*1.5){let a=n.viewState.heightOracle.textHeight,c=Math.floor((r-t.top-(n.defaultLineHeight-a)*.5)/a);o+=c*n.viewState.heightOracle.lineLength}let s=n.state.sliceDoc(t.from,t.to);return t.from+ER(s,o,n.state.tabSize)}function xne(n,e,t){let i,r=n;if(n.nodeType!=3||e!=(i=n.nodeValue.length))return!1;for(;;){let o=r.nextSibling;if(o){if(o.nodeName=="BR")break;return!1}else{let s=r.parentNode;if(!s||s.nodeName=="DIV")break;r=s}}return Qb(n,i-1,i).getBoundingClientRect().right>t}function Ixe(n,e,t){return xne(n,e,t)}function kxe(n,e,t){if(e!=0)return xne(n,e,t);for(let r=n;;){let o=r.parentNode;if(!o||o.nodeType!=1||o.firstChild!=r)return!1;if(o.classList.contains("cm-line"))break;r=o}let i=n.nodeType==1?n.getBoundingClientRect():Qb(n,0,Math.max(n.nodeValue.length,1)).getBoundingClientRect();return t-i.left>5}function NR(n,e,t){let i=n.lineBlockAt(e);if(Array.isArray(i.type)){let r;for(let o of i.type){if(o.from>e)break;if(!(o.to<e)){if(o.from<e&&o.to>e)return o;(!r||o.type==kh.Text&&(r.type!=o.type||(t<0?o.from<e:o.to>e)))&&(r=o)}}return r||i}return i}function Txe(n,e,t,i){let r=NR(n,e.head,e.assoc||-1),o=!i||r.type!=kh.Text||!(n.lineWrapping||r.widgetLineBreaks)?null:n.coordsAtPos(e.assoc<0&&e.head>r.from?e.head-1:e.head);if(o){let s=n.dom.getBoundingClientRect(),a=n.textDirectionAt(r.from),c=n.posAtCoords({x:t==(a==ol.LTR)?s.right-1:s.left+1,y:(o.top+o.bottom)/2});if(c!=null)return wn.cursor(c,t?-1:1)}return wn.cursor(t?r.to:r.from,t?-1:1)}function wN(n,e,t,i){let r=n.state.doc.lineAt(e.head),o=n.bidiSpans(r),s=n.textDirectionAt(r.from);for(let a=e,c=null;;){let h=gxe(r,o,s,a,t),m=sne;if(!h){if(r.number==(t?n.state.doc.lines:1))return a;m=`
`,r=n.state.doc.line(r.number+(t?1:-1)),o=n.bidiSpans(r),h=n.visualLineSide(r,!t)}if(c){if(!c(m))return a}else{if(!i)return h;c=i(m)}a=h}}function Rxe(n,e,t){let i=n.state.charCategorizer(e),r=i(t);return o=>{let s=i(o);return r==ml.Space&&(r=s),r==s}}function Dxe(n,e,t,i){let r=e.head,o=t?1:-1;if(r==(t?n.state.doc.length:0))return wn.cursor(r,e.assoc);let s=e.goalColumn,a,c=n.contentDOM.getBoundingClientRect(),h=n.coordsAtPos(r,e.assoc||-1),m=n.documentTop;if(h)s==null&&(s=h.left-c.left),a=o<0?h.top:h.bottom;else{let x=n.viewState.lineBlockAt(r);s==null&&(s=Math.min(c.right-c.left,n.defaultCharacterWidth*(r-x.from))),a=(o<0?x.top:x.bottom)+m}let y=c.left+s,M=i??n.viewState.heightOracle.textHeight>>1;for(let x=0;;x+=10){let T=a+(M+x)*o,P=_ne(n,{x:y,y:T},!1,o);if(T<c.top||T>c.bottom||(o<0?P<r:P>r)){let F=n.docView.coordsForChar(P),j=!F||T<F.top?-1:1;return wn.cursor(P,j,void 0,s)}}}function b3(n,e,t){for(;;){let i=0;for(let r of n)r.between(e-1,e+1,(o,s,a)=>{if(e>o&&e<s){let c=i||t||(e-o<s-e?-1:1);e=c<0?o:s,i=c}});if(!i)return e}}function Mne(n,e){let t=null;for(let i=0;i<e.ranges.length;i++){let r=e.ranges[i],o=null;if(r.empty){let s=b3(n,r.from,0);s!=r.from&&(o=wn.cursor(s,-1))}else{let s=b3(n,r.from,-1),a=b3(n,r.to,1);(s!=r.from||a!=r.to)&&(o=wn.range(r.from==r.anchor?s:a,r.from==r.head?s:a))}o&&(t||(t=e.ranges.slice()),t[i]=o)}return t?wn.create(t,e.mainIndex):e}function kB(n,e,t){let i=b3(n.state.facet(v5).map(r=>r(n)),t.from,e.head>t.from?-1:1);return i==t.from?t:wn.cursor(i,i<t.from?1:-1)}const V2="";class Pxe{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(ps.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=V2}readRange(e,t){if(!e)return this;let i=e.parentNode;for(let r=e;;){this.findPointBefore(i,r);let o=this.text.length;this.readNode(r);let s=r.nextSibling;if(s==t)break;let a=ka.get(r),c=ka.get(s);(a&&c?a.breakAfter:(a?a.breakAfter:yS(r))||yS(s)&&(r.nodeName!="BR"||r.cmIgnore)&&this.text.length>o)&&this.lineBreak(),r=s}return this.findPointBefore(i,t),this}readTextNode(e){let t=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,t.length));for(let i=0,r=this.lineSeparator?null:/\r\n?|\n/g;;){let o=-1,s=1,a;if(this.lineSeparator?(o=t.indexOf(this.lineSeparator,i),s=this.lineSeparator.length):(a=r.exec(t))&&(o=a.index,s=a[0].length),this.append(t.slice(i,o<0?t.length:o)),o<0)break;if(this.lineBreak(),s>1)for(let c of this.points)c.node==e&&c.pos>this.text.length&&(c.pos-=s-1);i=o+s}}readNode(e){if(e.cmIgnore)return;let t=ka.get(e),i=t&&t.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let r=i.iter();!r.next().done;)r.lineBreak?this.lineBreak():this.append(r.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==t&&(i.pos=this.text.length)}findPointInside(e,t){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+(Uxe(e,i.node,i.offset)?t:0))}}function Uxe(n,e,t){for(;;){if(!e||t<n0(e))return!1;if(e==n)return!0;t=Wb(e)+1,e=e.parentNode}}class SN{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class Kxe{constructor(e,t,i,r){this.typeOver=r,this.bounds=null,this.text="",this.domChanged=t>-1;let{impreciseHead:o,impreciseAnchor:s}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,i,0))){let a=o||s?[]:zxe(e),c=new Pxe(a,e.state);c.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=c.text,this.newSel=jxe(a,this.bounds.from)}else{let a=e.observer.selectionRange,c=o&&o.node==a.focusNode&&o.offset==a.focusOffset||!IR(e.contentDOM,a.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(a.focusNode,a.focusOffset),h=s&&s.node==a.anchorNode&&s.offset==a.anchorOffset||!IR(e.contentDOM,a.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(a.anchorNode,a.anchorOffset),m=e.viewport;if((wi.ios||wi.chrome)&&e.state.selection.main.empty&&c!=h&&(m.from>0||m.to<e.state.doc.length)){let y=Math.min(c,h),M=Math.max(c,h),x=m.from-y,T=m.to-M;(x==0||x==1||y==0)&&(T==0||T==-1||M==e.state.doc.length)&&(c=0,h=e.state.doc.length)}this.newSel=wn.single(h,c)}}}function wne(n,e){let t,{newSel:i}=e,r=n.state.selection.main,o=n.inputState.lastKeyTime>Date.now()-100?n.inputState.lastKeyCode:-1;if(e.bounds){let{from:s,to:a}=e.bounds,c=r.from,h=null;(o===8||wi.android&&e.text.length<a-s)&&(c=r.to,h="end");let m=Fxe(n.state.doc.sliceString(s,a,V2),e.text,c-s,h);m&&(wi.chrome&&o==13&&m.toB==m.from+2&&e.text.slice(m.from,m.toB)==V2+V2&&m.toB--,t={from:s+m.from,to:s+m.toA,insert:ms.of(e.text.slice(m.from,m.toB).split(V2))})}else i&&(!n.hasFocus&&n.state.facet(t1)||i.main.eq(r))&&(i=null);if(!t&&!i)return!1;if(!t&&e.typeOver&&!r.empty&&i&&i.main.empty?t={from:r.from,to:r.to,insert:n.state.doc.slice(r.from,r.to)}:(wi.mac||wi.android)&&t&&t.from==t.to&&t.from==r.head-1&&/^\. ?$/.test(t.insert.toString())&&n.contentDOM.getAttribute("autocorrect")=="off"?(i&&t.insert.length==2&&(i=wn.single(i.main.anchor-1,i.main.head-1)),t={from:t.from,to:t.to,insert:ms.of([t.insert.toString().replace("."," ")])}):t&&t.from>=r.from&&t.to<=r.to&&(t.from!=r.from||t.to!=r.to)&&r.to-r.from-(t.to-t.from)<=4?t={from:r.from,to:r.to,insert:n.state.doc.slice(r.from,t.from).append(t.insert).append(n.state.doc.slice(t.to,r.to))}:wi.chrome&&t&&t.from==t.to&&t.from==r.head&&t.insert.toString()==`
 `&&n.lineWrapping&&(i&&(i=wn.single(i.main.anchor-1,i.main.head-1)),t={from:r.from,to:r.to,insert:ms.of([" "])}),t)return qU(n,t,i,o);if(i&&!i.main.eq(r)){let s=!1,a="select";return n.inputState.lastSelectionTime>Date.now()-50&&(n.inputState.lastSelectionOrigin=="select"&&(s=!0),a=n.inputState.lastSelectionOrigin,a=="select.pointer"&&(i=Mne(n.state.facet(v5).map(c=>c(n)),i))),n.dispatch({selection:i,scrollIntoView:s,userEvent:a}),!0}else return!1}function qU(n,e,t,i=-1){if(wi.ios&&n.inputState.flushIOSKey(e))return!0;let r=n.state.selection.main;if(wi.android&&(e.to==r.to&&(e.from==r.from||e.from==r.from-1&&n.state.sliceDoc(e.from,r.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&Y_(n.contentDOM,"Enter",13)||(e.from==r.from-1&&e.to==r.to&&e.insert.length==0||i==8&&e.insert.length<e.to-e.from&&e.to>r.head)&&Y_(n.contentDOM,"Backspace",8)||e.from==r.from&&e.to==r.to+1&&e.insert.length==0&&Y_(n.contentDOM,"Delete",46)))return!0;let o=e.insert.toString();n.inputState.composing>=0&&n.inputState.composing++;let s,a=()=>s||(s=Lxe(n,e,t));return n.state.facet(Ane).some(c=>c(n,e.from,e.to,o,a))||n.dispatch(a()),!0}function Lxe(n,e,t){let i,r=n.state,o=r.selection.main,s=-1;if(e.from==e.to&&e.from<o.from||e.from>o.to){let c=e.from<o.from?-1:1,h=c<0?o.from:o.to,m=b3(r.facet(v5).map(y=>y(n)),h,c);e.from==m&&(s=m)}if(s>-1)i={changes:e,selection:wn.cursor(e.from+e.insert.length,-1)};else if(e.from>=o.from&&e.to<=o.to&&e.to-e.from>=(o.to-o.from)/3&&(!t||t.main.empty&&t.main.from==e.from+e.insert.length)&&n.inputState.composing<0){let c=o.from<e.from?r.sliceDoc(o.from,e.from):"",h=o.to>e.to?r.sliceDoc(e.to,o.to):"";i=r.replaceSelection(n.state.toText(c+e.insert.sliceString(0,void 0,n.state.lineBreak)+h))}else{let c=r.changes(e),h=t&&t.main.to<=c.newLength?t.main:void 0;if(r.selection.ranges.length>1&&n.inputState.composing>=0&&e.to<=o.to&&e.to>=o.to-10){let m=n.state.sliceDoc(e.from,e.to),y,M=t&&Cne(n,t.main.head);if(M){let P=e.insert.length-(e.to-e.from);y={from:M.from,to:M.to-P}}else y=n.state.doc.lineAt(o.head);let x=o.to-e.to,T=o.to-o.from;i=r.changeByRange(P=>{if(P.from==o.from&&P.to==o.to)return{changes:c,range:h||P.map(c)};let F=P.to-x,j=F-m.length;if(P.to-P.from!=T||n.state.sliceDoc(j,F)!=m||P.to>=y.from&&P.from<=y.to)return{range:P};let q=r.changes({from:j,to:F,insert:e.insert}),V=P.to-o.to;return{changes:q,range:h?wn.range(Math.max(0,h.anchor+V),Math.max(0,h.head+V)):P.map(q)}})}else i={changes:c,selection:h&&r.selection.replaceRange(h)}}let a="input.type";return(n.composing||n.inputState.compositionPendingChange&&n.inputState.compositionEndedAt>Date.now()-50)&&(n.inputState.compositionPendingChange=!1,a+=".compose",n.inputState.compositionFirstChange&&(a+=".start",n.inputState.compositionFirstChange=!1)),r.update(i,{userEvent:a,scrollIntoView:!0})}function Fxe(n,e,t,i){let r=Math.min(n.length,e.length),o=0;for(;o<r&&n.charCodeAt(o)==e.charCodeAt(o);)o++;if(o==r&&n.length==e.length)return null;let s=n.length,a=e.length;for(;s>0&&a>0&&n.charCodeAt(s-1)==e.charCodeAt(a-1);)s--,a--;if(i=="end"){let c=Math.max(0,o-Math.min(s,a));t-=s+c-o}if(s<o&&n.length<e.length){let c=t<=o&&t>=s?o-t:0;o-=c,a=o+(a-s),s=o}else if(a<o){let c=t<=o&&t>=a?o-t:0;o-=c,s=o+(s-a),a=o}return{from:o,toA:s,toB:a}}function zxe(n){let e=[];if(n.root.activeElement!=n.contentDOM)return e;let{anchorNode:t,anchorOffset:i,focusNode:r,focusOffset:o}=n.observer.selectionRange;return t&&(e.push(new SN(t,i)),(r!=t||o!=i)&&e.push(new SN(r,o))),e}function jxe(n,e){if(n.length==0)return null;let t=n[0].pos,i=n.length==2?n[1].pos:t;return t>-1&&i>-1?wn.single(t+e,i+e):null}class Nxe{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,wi.safari&&e.contentDOM.addEventListener("input",()=>null),wi.gecko&&r2e(e.contentDOM.ownerDocument)}handleEvent(e){!Hxe(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,t){let i=this.handlers[e];if(i){for(let r of i.observers)r(this.view,t);for(let r of i.handlers){if(t.defaultPrevented)break;if(r(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=Gxe(e),i=this.handlers,r=this.view.contentDOM;for(let o in t)if(o!="scroll"){let s=!t[o].handlers.length,a=i[o];a&&s!=!a.handlers.length&&(r.removeEventListener(o,this.handleEvent),a=null),a||r.addEventListener(o,this.handleEvent,{passive:s})}for(let o in i)o!="scroll"&&!t[o]&&r.removeEventListener(o,this.handleEvent);this.handlers=t}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&Ene.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),wi.android&&wi.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let t;return wi.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((t=Sne.find(i=>i.keyCode==e.keyCode))&&!e.ctrlKey||Wxe.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=t||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let t=this.pendingIOSKey;return!t||t.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,Y_(this.view.contentDOM,t.key,t.keyCode,t instanceof KeyboardEvent?t:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:wi.safari&&!wi.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function EN(n,e){return(t,i)=>{try{return e.call(n,i,t)}catch(r){Ih(t.state,r)}}}function Gxe(n){let e=Object.create(null);function t(i){return e[i]||(e[i]={observers:[],handlers:[]})}for(let i of n){let r=i.spec,o=r&&r.plugin.domEventHandlers,s=r&&r.plugin.domEventObservers;if(o)for(let a in o){let c=o[a];c&&t(a).handlers.push(EN(i.value,c))}if(s)for(let a in s){let c=s[a];c&&t(a).observers.push(EN(i.value,c))}}for(let i in Em)t(i).handlers.push(Em[i]);for(let i in xp)t(i).observers.push(xp[i]);return e}const Sne=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],Wxe="dthko",Ene=[16,17,18,20,91,92,224,225],mM=6;function gM(n){return Math.max(0,n)*.7+8}function Qxe(n,e){return Math.max(Math.abs(n.clientX-e.clientX),Math.abs(n.clientY-e.clientY))}class qxe{constructor(e,t,i,r){this.view=e,this.startEvent=t,this.style=i,this.mustSelect=r,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParents=J_e(e.contentDOM),this.atoms=e.state.facet(v5).map(s=>s(e));let o=e.contentDOM.ownerDocument;o.addEventListener("mousemove",this.move=this.move.bind(this)),o.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(ps.allowMultipleSelections)&&Yxe(e,t),this.dragging=Vxe(e,t)&&Ine(t)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&Qxe(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let t=0,i=0,r=0,o=0,s=this.view.win.innerWidth,a=this.view.win.innerHeight;this.scrollParents.x&&({left:r,right:s}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:o,bottom:a}=this.scrollParents.y.getBoundingClientRect());let c=QU(this.view);e.clientX-c.left<=r+mM?t=-gM(r-e.clientX):e.clientX+c.right>=s-mM&&(t=gM(e.clientX-s)),e.clientY-c.top<=o+mM?i=-gM(o-e.clientY):e.clientY+c.bottom>=a-mM&&(i=gM(e.clientY-a)),this.setScrollSpeed(t,i)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:t}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),t&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=t,t=0),(e||t)&&this.view.win.scrollBy(e,t),this.dragging===!1&&this.select(this.lastEvent)}select(e){let{view:t}=this,i=Mne(this.atoms,this.style.get(e,this.extend,this.multiple));(this.mustSelect||!i.eq(t.state.selection,this.dragging===!1))&&this.view.dispatch({selection:i,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(t=>t.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function Yxe(n,e){let t=n.state.facet(ane);return t.length?t[0](e):wi.mac?e.metaKey:e.ctrlKey}function $xe(n,e){let t=n.state.facet(lne);return t.length?t[0](e):wi.mac?!e.altKey:!e.ctrlKey}function Vxe(n,e){let{main:t}=n.state.selection;if(t.empty)return!1;let i=f4(n.root);if(!i||i.rangeCount==0)return!0;let r=i.getRangeAt(0).getClientRects();for(let o=0;o<r.length;o++){let s=r[o];if(s.left<=e.clientX&&s.right>=e.clientX&&s.top<=e.clientY&&s.bottom>=e.clientY)return!0}return!1}function Hxe(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,i;t!=n.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(i=ka.get(t))&&i.ignoreEvent(e))return!1;return!0}const Em=Object.create(null),xp=Object.create(null),One=wi.ie&&wi.ie_version<15||wi.ios&&wi.webkit_version<604;function Zxe(n){let e=n.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{n.focus(),t.remove(),Bne(n,t.value)},50)}function c6(n,e,t){for(let i of n.facet(e))t=i(t,n);return t}function Bne(n,e){e=c6(n.state,NU,e);let{state:t}=n,i,r=1,o=t.toText(e),s=o.lines==t.selection.ranges.length;if(GR!=null&&t.selection.ranges.every(c=>c.empty)&&GR==o.toString()){let c=-1;i=t.changeByRange(h=>{let m=t.doc.lineAt(h.from);if(m.from==c)return{range:h};c=m.from;let y=t.toText((s?o.line(r++).text:e)+t.lineBreak);return{changes:{from:m.from,insert:y},range:wn.cursor(h.from+y.length)}})}else s?i=t.changeByRange(c=>{let h=o.line(r++);return{changes:{from:c.from,to:c.to,insert:h.text},range:wn.cursor(c.from+h.length)}}):i=t.replaceSelection(o);n.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}xp.scroll=n=>{n.inputState.lastScrollTop=n.scrollDOM.scrollTop,n.inputState.lastScrollLeft=n.scrollDOM.scrollLeft};Em.keydown=(n,e)=>(n.inputState.setSelectionOrigin("select"),e.keyCode==27&&n.inputState.tabFocusMode!=0&&(n.inputState.tabFocusMode=Date.now()+2e3),!1);xp.touchstart=(n,e)=>{n.inputState.lastTouchTime=Date.now(),n.inputState.setSelectionOrigin("select.pointer")};xp.touchmove=n=>{n.inputState.setSelectionOrigin("select.pointer")};Em.mousedown=(n,e)=>{if(n.observer.flush(),n.inputState.lastTouchTime>Date.now()-2e3)return!1;let t=null;for(let i of n.state.facet(une))if(t=i(n,e),t)break;if(!t&&e.button==0&&(t=e2e(n,e)),t){let i=!n.hasFocus;n.inputState.startMouseSelection(new qxe(n,e,t,i)),i&&n.observer.ignore(()=>{Nte(n.contentDOM);let o=n.root.activeElement;o&&!o.contains(n.contentDOM)&&o.blur()});let r=n.inputState.mouseSelection;if(r)return r.start(e),r.dragging===!1}else n.inputState.setSelectionOrigin("select.pointer");return!1};function ON(n,e,t,i){if(i==1)return wn.cursor(e,t);if(i==2)return Exe(n.state,e,t);{let r=$u.find(n.docView,e),o=n.state.doc.lineAt(r?r.posAtEnd:e),s=r?r.posAtStart:o.from,a=r?r.posAtEnd:o.to;return a<n.state.doc.length&&a==o.to&&a++,wn.range(s,a)}}let BN=(n,e,t)=>e>=t.top&&e<=t.bottom&&n>=t.left&&n<=t.right;function Xxe(n,e,t,i){let r=$u.find(n.docView,e);if(!r)return 1;let o=e-r.posAtStart;if(o==0)return 1;if(o==r.length)return-1;let s=r.coordsAt(o,-1);if(s&&BN(t,i,s))return-1;let a=r.coordsAt(o,1);return a&&BN(t,i,a)?1:s&&s.bottom>=i?-1:1}function IN(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:Xxe(n,t,e.clientX,e.clientY)}}const Jxe=wi.ie&&wi.ie_version<=11;let kN=null,TN=0,RN=0;function Ine(n){if(!Jxe)return n.detail;let e=kN,t=RN;return kN=n,RN=Date.now(),TN=!e||t>Date.now()-400&&Math.abs(e.clientX-n.clientX)<2&&Math.abs(e.clientY-n.clientY)<2?(TN+1)%3:1}function e2e(n,e){let t=IN(n,e),i=Ine(e),r=n.state.selection;return{update(o){o.docChanged&&(t.pos=o.changes.mapPos(t.pos),r=r.map(o.changes))},get(o,s,a){let c=IN(n,o),h,m=ON(n,c.pos,c.bias,i);if(t.pos!=c.pos&&!s){let y=ON(n,t.pos,t.bias,i),M=Math.min(y.from,m.from),x=Math.max(y.to,m.to);m=M<m.from?wn.range(M,x):wn.range(x,M)}return s?r.replaceRange(r.main.extend(m.from,m.to)):a&&i==1&&r.ranges.length>1&&(h=t2e(r,c.pos))?h:a?r.addRange(m):wn.create([m])}}}function t2e(n,e){for(let t=0;t<n.ranges.length;t++){let{from:i,to:r}=n.ranges[t];if(i<=e&&r>=e)return wn.create(n.ranges.slice(0,t).concat(n.ranges.slice(t+1)),n.mainIndex==t?0:n.mainIndex-(n.mainIndex>t?1:0))}return null}Em.dragstart=(n,e)=>{let{selection:{main:t}}=n.state;if(e.target.draggable){let r=n.docView.nearest(e.target);if(r&&r.isWidget){let o=r.posAtStart,s=o+r.length;(o>=t.to||s<=t.from)&&(t=wn.range(o,s))}}let{inputState:i}=n;return i.mouseSelection&&(i.mouseSelection.dragging=!0),i.draggedContent=t,e.dataTransfer&&(e.dataTransfer.setData("Text",c6(n.state,GU,n.state.sliceDoc(t.from,t.to))),e.dataTransfer.effectAllowed="copyMove"),!1};Em.dragend=n=>(n.inputState.draggedContent=null,!1);function DN(n,e,t,i){if(t=c6(n.state,NU,t),!t)return;let r=n.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:o}=n.inputState,s=i&&o&&$xe(n,e)?{from:o.from,to:o.to}:null,a={from:r,insert:t},c=n.state.changes(s?[s,a]:a);n.focus(),n.dispatch({changes:c,selection:{anchor:c.mapPos(r,-1),head:c.mapPos(r,1)},userEvent:s?"move.drop":"input.drop"}),n.inputState.draggedContent=null}Em.drop=(n,e)=>{if(!e.dataTransfer)return!1;if(n.state.readOnly)return!0;let t=e.dataTransfer.files;if(t&&t.length){let i=Array(t.length),r=0,o=()=>{++r==t.length&&DN(n,e,i.filter(s=>s!=null).join(n.state.lineBreak),!1)};for(let s=0;s<t.length;s++){let a=new FileReader;a.onerror=o,a.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(a.result)||(i[s]=a.result),o()},a.readAsText(t[s])}return!0}else{let i=e.dataTransfer.getData("Text");if(i)return DN(n,e,i,!0),!0}return!1};Em.paste=(n,e)=>{if(n.state.readOnly)return!0;n.observer.flush();let t=One?null:e.clipboardData;return t?(Bne(n,t.getData("text/plain")||t.getData("text/uri-list")),!0):(Zxe(n),!1)};function n2e(n,e){let t=n.dom.parentNode;if(!t)return;let i=t.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),n.focus()},50)}function i2e(n){let e=[],t=[],i=!1;for(let r of n.selection.ranges)r.empty||(e.push(n.sliceDoc(r.from,r.to)),t.push(r));if(!e.length){let r=-1;for(let{from:o}of n.selection.ranges){let s=n.doc.lineAt(o);s.number>r&&(e.push(s.text),t.push({from:s.from,to:Math.min(n.doc.length,s.to+1)})),r=s.number}i=!0}return{text:c6(n,GU,e.join(n.lineBreak)),ranges:t,linewise:i}}let GR=null;Em.copy=Em.cut=(n,e)=>{let{text:t,ranges:i,linewise:r}=i2e(n.state);if(!t&&!r)return!1;GR=r?t:null,e.type=="cut"&&!n.state.readOnly&&n.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"});let o=One?null:e.clipboardData;return o?(o.clearData(),o.setData("text/plain",t),!0):(n2e(n,t),!1)};const kne=v1.define();function Tne(n,e){let t=[];for(let i of n.facet(hne)){let r=i(n,e);r&&t.push(r)}return t.length?n.update({effects:t,annotations:kne.of(!0)}):null}function Rne(n){setTimeout(()=>{let e=n.hasFocus;if(e!=n.inputState.notifiedFocused){let t=Tne(n.state,e);t?n.dispatch(t):n.update([])}},10)}xp.focus=n=>{n.inputState.lastFocusTime=Date.now(),!n.scrollDOM.scrollTop&&(n.inputState.lastScrollTop||n.inputState.lastScrollLeft)&&(n.scrollDOM.scrollTop=n.inputState.lastScrollTop,n.scrollDOM.scrollLeft=n.inputState.lastScrollLeft),Rne(n)};xp.blur=n=>{n.observer.clearSelectionRange(),Rne(n)};xp.compositionstart=xp.compositionupdate=n=>{n.observer.editContext||(n.inputState.compositionFirstChange==null&&(n.inputState.compositionFirstChange=!0),n.inputState.composing<0&&(n.inputState.composing=0))};xp.compositionend=n=>{n.observer.editContext||(n.inputState.composing=-1,n.inputState.compositionEndedAt=Date.now(),n.inputState.compositionPendingKey=!0,n.inputState.compositionPendingChange=n.observer.pendingRecords().length>0,n.inputState.compositionFirstChange=null,wi.chrome&&wi.android?n.observer.flushSoon():n.inputState.compositionPendingChange?Promise.resolve().then(()=>n.observer.flush()):setTimeout(()=>{n.inputState.composing<0&&n.docView.hasComposition&&n.update([])},50))};xp.contextmenu=n=>{n.inputState.lastContextMenu=Date.now()};Em.beforeinput=(n,e)=>{var t,i;if(e.inputType=="insertReplacementText"&&n.observer.editContext){let o=(t=e.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain"),s=e.getTargetRanges();if(o&&s.length){let a=s[0],c=n.posAtDOM(a.startContainer,a.startOffset),h=n.posAtDOM(a.endContainer,a.endOffset);return qU(n,{from:c,to:h,insert:n.state.toText(o)},null),!0}}let r;if(wi.chrome&&wi.android&&(r=Sne.find(o=>o.inputType==e.inputType))&&(n.observer.delayAndroidKey(r.key,r.keyCode),r.key=="Backspace"||r.key=="Delete")){let o=((i=window.visualViewport)===null||i===void 0?void 0:i.height)||0;setTimeout(()=>{var s;(((s=window.visualViewport)===null||s===void 0?void 0:s.height)||0)>o+10&&n.hasFocus&&(n.contentDOM.blur(),n.focus())},100)}return wi.ios&&e.inputType=="deleteContentForward"&&n.observer.flushSoon(),wi.safari&&e.inputType=="insertText"&&n.inputState.composing>=0&&setTimeout(()=>xp.compositionend(n,e),20),!1};const PN=new Set;function r2e(n){PN.has(n)||(PN.add(n),n.addEventListener("copy",()=>{}),n.addEventListener("cut",()=>{}))}const UN=["pre-wrap","normal","pre-line","break-spaces"];let _x=!1;function KN(){_x=!1}class o2e{constructor(e){this.lineWrapping=e,this.doc=ms.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,t){let i=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((t-e-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return UN.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let i=0;i<e.length;i++){let r=e[i];r<0?i++:this.heightSamples[Math.floor(r*10)]||(t=!0,this.heightSamples[Math.floor(r*10)]=!0)}return t}refresh(e,t,i,r,o,s){let a=UN.indexOf(e)>-1,c=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=a;if(this.lineWrapping=a,this.lineHeight=t,this.charWidth=i,this.textHeight=r,this.lineLength=o,c){this.heightSamples={};for(let h=0;h<s.length;h++){let m=s[h];m<0?h++:this.heightSamples[Math.floor(m*10)]=!0}}return c}}class s2e{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class Pg{constructor(e,t,i,r,o){this.from=e,this.length=t,this.top=i,this.height=r,this._content=o}get type(){return typeof this._content=="number"?kh.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof rv?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new Pg(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var il=(function(n){return n[n.ByPos=0]="ByPos",n[n.ByHeight=1]="ByHeight",n[n.ByPosNoHeight=2]="ByPosNoHeight",n})(il||(il={}));const pw=.001;class Th{constructor(e,t,i=2){this.length=e,this.height=t,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>pw&&(_x=!0),this.height=e)}replace(e,t,i){return Th.of(i)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,i,r){let o=this,s=i.doc;for(let a=r.length-1;a>=0;a--){let{fromA:c,toA:h,fromB:m,toB:y}=r[a],M=o.lineAt(c,il.ByPosNoHeight,i.setDoc(t),0,0),x=M.to>=h?M:o.lineAt(h,il.ByPosNoHeight,i,0,0);for(y+=x.to-h,h=x.to;a>0&&M.from<=r[a-1].toA;)c=r[a-1].fromA,m=r[a-1].fromB,a--,c<M.from&&(M=o.lineAt(c,il.ByPosNoHeight,i,0,0));m+=M.from-c,c=M.from;let T=YU.build(i.setDoc(s),e,m,y);o=CS(o,o.replace(c,h,T))}return o.updateHeight(i,0)}static empty(){return new ff(0,0)}static of(e){if(e.length==1)return e[0];let t=0,i=e.length,r=0,o=0;for(;;)if(t==i)if(r>o*2){let a=e[t-1];a.break?e.splice(--t,1,a.left,null,a.right):e.splice(--t,1,a.left,a.right),i+=1+a.break,r-=a.size}else if(o>r*2){let a=e[i];a.break?e.splice(i,1,a.left,null,a.right):e.splice(i,1,a.left,a.right),i+=2+a.break,o-=a.size}else break;else if(r<o){let a=e[t++];a&&(r+=a.size)}else{let a=e[--i];a&&(o+=a.size)}let s=0;return e[t-1]==null?(s=1,t--):e[t]==null&&(s=1,i++),new a2e(Th.of(e.slice(0,t)),s,Th.of(e.slice(i)))}}function CS(n,e){return n==e?n:(n.constructor!=e.constructor&&(_x=!0),e)}Th.prototype.size=1;class Dne extends Th{constructor(e,t,i){super(e,t),this.deco=i}blockAt(e,t,i,r){return new Pg(r,this.length,i,this.height,this.deco||0)}lineAt(e,t,i,r,o){return this.blockAt(0,i,r,o)}forEachLine(e,t,i,r,o,s){e<=o+this.length&&t>=o&&s(this.blockAt(0,i,r,o))}updateHeight(e,t=0,i=!1,r){return r&&r.from<=t&&r.more&&this.setHeight(r.heights[r.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class ff extends Dne{constructor(e,t){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,t,i,r){return new Pg(r,this.length,i,this.height,this.breaks)}replace(e,t,i){let r=i[0];return i.length==1&&(r instanceof ff||r instanceof yA&&r.flags&4)&&Math.abs(this.length-r.length)<10?(r instanceof yA?r=new ff(r.length,this.height):r.height=this.height,this.outdated||(r.outdated=!1),r):Th.of(i)}updateHeight(e,t=0,i=!1,r){return r&&r.from<=t&&r.more?this.setHeight(r.heights[r.index++]):(i||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class yA extends Th{constructor(e){super(e,0)}heightMetrics(e,t){let i=e.doc.lineAt(t).number,r=e.doc.lineAt(t+this.length).number,o=r-i+1,s,a=0;if(e.lineWrapping){let c=Math.min(this.height,e.lineHeight*o);s=c/o,this.length>o+1&&(a=(this.height-c)/(this.length-o-1))}else s=this.height/o;return{firstLine:i,lastLine:r,perLine:s,perChar:a}}blockAt(e,t,i,r){let{firstLine:o,lastLine:s,perLine:a,perChar:c}=this.heightMetrics(t,r);if(t.lineWrapping){let h=r+(e<t.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-i)/this.height))*this.length)),m=t.doc.lineAt(h),y=a+m.length*c,M=Math.max(i,e-y/2);return new Pg(m.from,m.length,M,y,0)}else{let h=Math.max(0,Math.min(s-o,Math.floor((e-i)/a))),{from:m,length:y}=t.doc.line(o+h);return new Pg(m,y,i+a*h,a,0)}}lineAt(e,t,i,r,o){if(t==il.ByHeight)return this.blockAt(e,i,r,o);if(t==il.ByPosNoHeight){let{from:x,to:T}=i.doc.lineAt(e);return new Pg(x,T-x,0,0,0)}let{firstLine:s,perLine:a,perChar:c}=this.heightMetrics(i,o),h=i.doc.lineAt(e),m=a+h.length*c,y=h.number-s,M=r+a*y+c*(h.from-o-y);return new Pg(h.from,h.length,Math.max(r,Math.min(M,r+this.height-m)),m,0)}forEachLine(e,t,i,r,o,s){e=Math.max(e,o),t=Math.min(t,o+this.length);let{firstLine:a,perLine:c,perChar:h}=this.heightMetrics(i,o);for(let m=e,y=r;m<=t;){let M=i.doc.lineAt(m);if(m==e){let T=M.number-a;y+=c*T+h*(e-o-T)}let x=c+h*M.length;s(new Pg(M.from,M.length,y,x,0)),y+=x,m=M.to+1}}replace(e,t,i){let r=this.length-t;if(r>0){let o=i[i.length-1];o instanceof yA?i[i.length-1]=new yA(o.length+r):i.push(null,new yA(r-1))}if(e>0){let o=i[0];o instanceof yA?i[0]=new yA(e+o.length):i.unshift(new yA(e-1),null)}return Th.of(i)}decomposeLeft(e,t){t.push(new yA(e-1),null)}decomposeRight(e,t){t.push(null,new yA(this.length-e-1))}updateHeight(e,t=0,i=!1,r){let o=t+this.length;if(r&&r.from<=t+this.length&&r.more){let s=[],a=Math.max(t,r.from),c=-1;for(r.from>t&&s.push(new yA(r.from-t-1).updateHeight(e,t));a<=o&&r.more;){let m=e.doc.lineAt(a).length;s.length&&s.push(null);let y=r.heights[r.index++];c==-1?c=y:Math.abs(y-c)>=pw&&(c=-2);let M=new ff(m,y);M.outdated=!1,s.push(M),a+=m+1}a<=o&&s.push(null,new yA(o-a).updateHeight(e,a));let h=Th.of(s);return(c<0||Math.abs(h.height-this.height)>=pw||Math.abs(c-this.heightMetrics(e,t).perLine)>=pw)&&(_x=!0),CS(this,h)}else(i||this.outdated)&&(this.setHeight(e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class a2e extends Th{constructor(e,t,i){super(e.length+t+i.length,e.height+i.height,t|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,t,i,r){let o=i+this.left.height;return e<o?this.left.blockAt(e,t,i,r):this.right.blockAt(e,t,o,r+this.left.length+this.break)}lineAt(e,t,i,r,o){let s=r+this.left.height,a=o+this.left.length+this.break,c=t==il.ByHeight?e<s:e<a,h=c?this.left.lineAt(e,t,i,r,o):this.right.lineAt(e,t,i,s,a);if(this.break||(c?h.to<a:h.from>a))return h;let m=t==il.ByPosNoHeight?il.ByPosNoHeight:il.ByPos;return c?h.join(this.right.lineAt(a,m,i,s,a)):this.left.lineAt(a,m,i,r,o).join(h)}forEachLine(e,t,i,r,o,s){let a=r+this.left.height,c=o+this.left.length+this.break;if(this.break)e<c&&this.left.forEachLine(e,t,i,r,o,s),t>=c&&this.right.forEachLine(e,t,i,a,c,s);else{let h=this.lineAt(c,il.ByPos,i,r,o);e<h.from&&this.left.forEachLine(e,h.from-1,i,r,o,s),h.to>=e&&h.from<=t&&s(h),t>h.to&&this.right.forEachLine(h.to+1,t,i,a,c,s)}}replace(e,t,i){let r=this.left.length+this.break;if(t<r)return this.balanced(this.left.replace(e,t,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-r,t-r,i));let o=[];e>0&&this.decomposeLeft(e,o);let s=o.length;for(let a of i)o.push(a);if(e>0&&LN(o,s-1),t<this.length){let a=o.length;this.decomposeRight(t,o),LN(o,a)}return Th.of(o)}decomposeLeft(e,t){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(i++,e>=i&&t.push(null)),e>i&&this.right.decomposeLeft(e-i,t)}decomposeRight(e,t){let i=this.left.length,r=i+this.break;if(e>=r)return this.right.decomposeRight(e-r,t);e<i&&this.left.decomposeRight(e,t),this.break&&e<r&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?Th.of(this.break?[e,null,t]:[e,t]):(this.left=CS(this.left,e),this.right=CS(this.right,t),this.setHeight(e.height+t.height),this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,i=!1,r){let{left:o,right:s}=this,a=t+o.length+this.break,c=null;return r&&r.from<=t+o.length&&r.more?c=o=o.updateHeight(e,t,i,r):o.updateHeight(e,t,i),r&&r.from<=a+s.length&&r.more?c=s=s.updateHeight(e,a,i,r):s.updateHeight(e,a,i),c?this.balanced(o,s):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function LN(n,e){let t,i;n[e]==null&&(t=n[e-1])instanceof yA&&(i=n[e+1])instanceof yA&&n.splice(e-1,3,new yA(t.length+1+i.length))}const l2e=5;class YU{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let i=Math.min(t,this.lineEnd),r=this.nodes[this.nodes.length-1];r instanceof ff?r.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new ff(i-this.pos,-1)),this.writtenTo=i,t>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,i){if(e<t||i.heightRelevant){let r=i.widget?i.widget.estimatedHeight:0,o=i.widget?i.widget.lineBreaks:0;r<0&&(r=this.oracle.lineHeight);let s=t-e;i.block?this.addBlock(new Dne(s,r,i)):(s||o||r>=l2e)&&this.addLineDeco(r,o,s)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new ff(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let i=new yA(t-e);return this.oracle.doc.lineAt(e).to==t&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof ff)return e;let t=new ff(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,i){let r=this.ensureLine();r.length+=i,r.collapsed+=i,r.widgetHeight=Math.max(r.widgetHeight,e),r.breaks+=t,this.writtenTo=this.pos=this.pos+i}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof ff)&&!this.isCovered?this.nodes.push(new ff(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let r of this.nodes)r instanceof ff&&r.updateHeight(this.oracle,i),i+=r?r.length:1;return this.nodes}static build(e,t,i,r){let o=new YU(i,e);return Ho.spans(t,i,r,o,0),o.finish(i)}}function u2e(n,e,t){let i=new c2e;return Ho.compare(n,e,t,i,0),i.changes}class c2e{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,i,r){(e<t||i&&i.heightRelevant||r&&r.heightRelevant)&&fw(e,t,this.changes,5)}}function A2e(n,e){let t=n.getBoundingClientRect(),i=n.ownerDocument,r=i.defaultView||window,o=Math.max(0,t.left),s=Math.min(r.innerWidth,t.right),a=Math.max(0,t.top),c=Math.min(r.innerHeight,t.bottom);for(let h=n.parentNode;h&&h!=i.body;)if(h.nodeType==1){let m=h,y=window.getComputedStyle(m);if((m.scrollHeight>m.clientHeight||m.scrollWidth>m.clientWidth)&&y.overflow!="visible"){let M=m.getBoundingClientRect();o=Math.max(o,M.left),s=Math.min(s,M.right),a=Math.max(a,M.top),c=Math.min(h==n.parentNode?r.innerHeight:c,M.bottom)}h=y.position=="absolute"||y.position=="fixed"?m.offsetParent:m.parentNode}else if(h.nodeType==11)h=h.host;else break;return{left:o-t.left,right:Math.max(o,s)-t.left,top:a-(t.top+e),bottom:Math.max(a,c)-(t.top+e)}}function h2e(n){let e=n.getBoundingClientRect(),t=n.ownerDocument.defaultView||window;return e.left<t.innerWidth&&e.right>0&&e.top<t.innerHeight&&e.bottom>0}function d2e(n,e){let t=n.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class TB{constructor(e,t,i,r){this.from=e,this.to=t,this.size=i,this.displaySize=r}static same(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++){let r=e[i],o=t[i];if(r.from!=o.from||r.to!=o.to||r.size!=o.size)return!1}return!0}draw(e,t){return Or.replace({widget:new f2e(this.displaySize*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}}class f2e extends cv{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class FN{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=zN,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=ol.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(WU).some(i=>typeof i!="function"&&i.class=="cm-lineWrapping");this.heightOracle=new o2e(t),this.stateDeco=e.facet(m4).filter(i=>typeof i!="function"),this.heightMap=Th.empty().applyChanges(this.stateDeco,ms.empty,this.heightOracle.setDoc(e.doc),[new bp(0,0,0,e.doc.length)]);for(let i=0;i<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());i++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Or.set(this.lineGaps.map(i=>i.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let i=0;i<=1;i++){let r=i?t.head:t.anchor;if(!e.some(({from:o,to:s})=>r>=o&&r<=s)){let{from:o,to:s}=this.lineBlockAt(r);e.push(new yM(o,s))}}return this.viewports=e.sort((i,r)=>i.from-r.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?zN:new $U(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(H2(e,this.scaler))})}update(e,t=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=this.state.facet(m4).filter(m=>typeof m!="function");let r=e.changedRanges,o=bp.extendWithRanges(r,u2e(i,this.stateDeco,e?e.changes:Mc.empty(this.state.doc.length))),s=this.heightMap.height,a=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);KN(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),o),(this.heightMap.height!=s||_x)&&(e.flags|=2),a?(this.scrollAnchorPos=e.changes.mapPos(a.from,-1),this.scrollAnchorHeight=a.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=s);let c=o.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<c.from||t.range.head>c.to)||!this.viewportIsAppropriate(c))&&(c=this.getViewport(0,t));let h=c.from!=this.viewport.from||c.to!=this.viewport.to;this.viewport=c,e.flags|=this.updateForViewport(),(h||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(fne)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,i=window.getComputedStyle(t),r=this.heightOracle,o=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?ol.RTL:ol.LTR;let s=this.heightOracle.mustRefreshForWrapping(o),a=t.getBoundingClientRect(),c=s||this.mustMeasureContent||this.contentDOMHeight!=a.height;this.contentDOMHeight=a.height,this.mustMeasureContent=!1;let h=0,m=0;if(a.width&&a.height){let{scaleX:H,scaleY:Q}=jte(t,a);(H>.005&&Math.abs(this.scaleX-H)>.005||Q>.005&&Math.abs(this.scaleY-Q)>.005)&&(this.scaleX=H,this.scaleY=Q,h|=16,s=c=!0)}let y=(parseInt(i.paddingTop)||0)*this.scaleY,M=(parseInt(i.paddingBottom)||0)*this.scaleY;(this.paddingTop!=y||this.paddingBottom!=M)&&(this.paddingTop=y,this.paddingBottom=M,h|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(r.lineWrapping&&(c=!0),this.editorWidth=e.scrollDOM.clientWidth,h|=16);let x=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=x&&(this.scrollAnchorHeight=-1,this.scrollTop=x),this.scrolledToBottom=Wte(e.scrollDOM);let T=(this.printing?d2e:A2e)(t,this.paddingTop),P=T.top-this.pixelViewport.top,F=T.bottom-this.pixelViewport.bottom;this.pixelViewport=T;let j=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(j!=this.inView&&(this.inView=j,j&&(c=!0)),!this.inView&&!this.scrollTarget&&!h2e(e.dom))return 0;let q=a.width;if((this.contentDOMWidth!=q||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=a.width,this.editorHeight=e.scrollDOM.clientHeight,h|=16),c){let H=e.docView.measureVisibleLineHeights(this.viewport);if(r.mustRefreshForHeights(H)&&(s=!0),s||r.lineWrapping&&Math.abs(q-this.contentDOMWidth)>r.charWidth){let{lineHeight:Q,charWidth:Y,textHeight:z}=e.docView.measureTextSize();s=Q>0&&r.refresh(o,Q,Y,z,Math.max(5,q/Y),H),s&&(e.docView.minWidth=0,h|=16)}P>0&&F>0?m=Math.max(P,F):P<0&&F<0&&(m=Math.min(P,F)),KN();for(let Q of this.viewports){let Y=Q.from==this.viewport.from?H:e.docView.measureVisibleLineHeights(Q);this.heightMap=(s?Th.empty().applyChanges(this.stateDeco,ms.empty,this.heightOracle,[new bp(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(r,0,s,new s2e(Q.from,Y))}_x&&(h|=2)}let V=!this.viewportIsAppropriate(this.viewport,m)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return V&&(h&2&&(h|=this.updateScaler()),this.viewport=this.getViewport(m,this.scrollTarget),h|=this.updateForViewport()),(h&2||V)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(s?[]:this.lineGaps,e)),h|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),h}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),r=this.heightMap,o=this.heightOracle,{visibleTop:s,visibleBottom:a}=this,c=new yM(r.lineAt(s-i*1e3,il.ByHeight,o,0,0).from,r.lineAt(a+(1-i)*1e3,il.ByHeight,o,0,0).to);if(t){let{head:h}=t.range;if(h<c.from||h>c.to){let m=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),y=r.lineAt(h,il.ByPos,o,0,0),M;t.y=="center"?M=(y.top+y.bottom)/2-m/2:t.y=="start"||t.y=="nearest"&&h<c.from?M=y.top:M=y.bottom-m,c=new yM(r.lineAt(M-1e3/2,il.ByHeight,o,0,0).from,r.lineAt(M+m+1e3/2,il.ByHeight,o,0,0).to)}}return c}mapViewport(e,t){let i=t.mapPos(e.from,-1),r=t.mapPos(e.to,1);return new yM(this.heightMap.lineAt(i,il.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(r,il.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},i=0){if(!this.inView)return!0;let{top:r}=this.heightMap.lineAt(e,il.ByPos,this.heightOracle,0,0),{bottom:o}=this.heightMap.lineAt(t,il.ByPos,this.heightOracle,0,0),{visibleTop:s,visibleBottom:a}=this;return(e==0||r<=s-Math.max(10,Math.min(-i,250)))&&(t==this.state.doc.length||o>=a+Math.max(10,Math.min(i,250)))&&r>s-2*1e3&&o<a+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let i=[];for(let r of e)t.touchesRange(r.from,r.to)||i.push(new TB(t.mapPos(r.from),t.mapPos(r.to),r.size,r.displaySize));return i}ensureLineGaps(e,t){let i=this.heightOracle.lineWrapping,r=i?1e4:2e3,o=r>>1,s=r<<1;if(this.defaultTextDirection!=ol.LTR&&!i)return[];let a=[],c=(m,y,M,x)=>{if(y-m<o)return;let T=this.state.selection.main,P=[T.from];T.empty||P.push(T.to);for(let j of P)if(j>m&&j<y){c(m,j-10,M,x),c(j+10,y,M,x);return}let F=m2e(e,j=>j.from>=M.from&&j.to<=M.to&&Math.abs(j.from-m)<o&&Math.abs(j.to-y)<o&&!P.some(q=>j.from<q&&j.to>q));if(!F){if(y<M.to&&t&&i&&t.visibleRanges.some(V=>V.from<=y&&V.to>=y)){let V=t.moveToLineBoundary(wn.cursor(y),!1,!0).head;V>m&&(y=V)}let j=this.gapSize(M,m,y,x),q=i||j<2e6?j:2e6;F=new TB(m,y,j,q)}a.push(F)},h=m=>{if(m.length<s||m.type!=kh.Text)return;let y=p2e(m.from,m.to,this.stateDeco);if(y.total<s)return;let M=this.scrollTarget?this.scrollTarget.range.head:null,x,T;if(i){let P=r/this.heightOracle.lineLength*this.heightOracle.lineHeight,F,j;if(M!=null){let q=bM(y,M),V=((this.visibleBottom-this.visibleTop)/2+P)/m.height;F=q-V,j=q+V}else F=(this.visibleTop-m.top-P)/m.height,j=(this.visibleBottom-m.top+P)/m.height;x=vM(y,F),T=vM(y,j)}else{let P=y.total*this.heightOracle.charWidth,F=r*this.heightOracle.charWidth,j=0;if(P>2e6)for(let Y of e)Y.from>=m.from&&Y.from<m.to&&Y.size!=Y.displaySize&&Y.from*this.heightOracle.charWidth+j<this.pixelViewport.left&&(j=Y.size-Y.displaySize);let q=this.pixelViewport.left+j,V=this.pixelViewport.right+j,H,Q;if(M!=null){let Y=bM(y,M),z=((V-q)/2+F)/P;H=Y-z,Q=Y+z}else H=(q-F)/P,Q=(V+F)/P;x=vM(y,H),T=vM(y,Q)}x>m.from&&c(m.from,x,m,y),T<m.to&&c(T,m.to,m,y)};for(let m of this.viewportLines)Array.isArray(m.type)?m.type.forEach(h):h(m);return a}gapSize(e,t,i,r){let o=bM(r,i)-bM(r,t);return this.heightOracle.lineWrapping?e.height*o:r.total*this.heightOracle.charWidth*o}updateLineGaps(e){TB.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Or.set(e.map(t=>t.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let t=this.stateDeco;this.lineGaps.length&&(t=t.concat(this.lineGapDeco));let i=[];Ho.spans(t,this.viewport.from,this.viewport.to,{span(o,s){i.push({from:o,to:s})},point(){}},20);let r=0;if(i.length!=this.visibleRanges.length)r=12;else for(let o=0;o<i.length&&!(r&8);o++){let s=this.visibleRanges[o],a=i[o];(s.from!=a.from||s.to!=a.to)&&(r|=4,e&&e.mapPos(s.from,-1)==a.from&&e.mapPos(s.to,1)==a.to||(r|=8))}return this.visibleRanges=i,r}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||H2(this.heightMap.lineAt(e,il.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(t=>t.top<=e&&t.bottom>=e)||H2(this.heightMap.lineAt(this.scaler.fromDOM(e),il.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return H2(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class yM{constructor(e,t){this.from=e,this.to=t}}function p2e(n,e,t){let i=[],r=n,o=0;return Ho.spans(t,n,e,{span(){},point(s,a){s>r&&(i.push({from:r,to:s}),o+=s-r),r=a}},20),r<e&&(i.push({from:r,to:e}),o+=e-r),{total:o,ranges:i}}function vM({total:n,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let i=Math.floor(n*t);for(let r=0;;r++){let{from:o,to:s}=e[r],a=s-o;if(i<=a)return o+i;i-=a}}function bM(n,e){let t=0;for(let{from:i,to:r}of n.ranges){if(e<=r){t+=e-i;break}t+=r-i}return t/n.total}function m2e(n,e){for(let t of n)if(e(t))return t}const zN={toDOM(n){return n},fromDOM(n){return n},scale:1,eq(n){return n==this}};class $U{constructor(e,t,i){let r=0,o=0,s=0;this.viewports=i.map(({from:a,to:c})=>{let h=t.lineAt(a,il.ByPos,e,0,0).top,m=t.lineAt(c,il.ByPos,e,0,0).bottom;return r+=m-h,{from:a,to:c,top:h,bottom:m,domTop:0,domBottom:0}}),this.scale=(7e6-r)/(t.height-r);for(let a of this.viewports)a.domTop=s+(a.top-o)*this.scale,s=a.domBottom=a.domTop+(a.bottom-a.top),o=a.bottom}toDOM(e){for(let t=0,i=0,r=0;;t++){let o=t<this.viewports.length?this.viewports[t]:null;if(!o||e<o.top)return r+(e-i)*this.scale;if(e<=o.bottom)return o.domTop+(e-o.top);i=o.bottom,r=o.domBottom}}fromDOM(e){for(let t=0,i=0,r=0;;t++){let o=t<this.viewports.length?this.viewports[t]:null;if(!o||e<o.domTop)return i+(e-r)/this.scale;if(e<=o.domBottom)return o.top+(e-o.domTop);i=o.bottom,r=o.domBottom}}eq(e){return e instanceof $U?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((t,i)=>t.from==e.viewports[i].from&&t.to==e.viewports[i].to):!1}}function H2(n,e){if(e.scale==1)return n;let t=e.toDOM(n.top),i=e.toDOM(n.bottom);return new Pg(n.from,n.length,t,i-t,Array.isArray(n._content)?n._content.map(r=>H2(r,e)):n._content)}const CM=Bi.define({combine:n=>n.join(" ")}),WR=Bi.define({combine:n=>n.indexOf(!0)>-1}),QR=nv.newName(),Pne=nv.newName(),Une=nv.newName(),Kne={"&light":"."+Pne,"&dark":"."+Une};function qR(n,e,t){return new nv(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,r=>{if(r=="&")return n;if(!t||!t[r])throw new RangeError(`Unsupported selector: ${r}`);return t[r]}):n+" "+i}})}const g2e=qR("."+QR,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},Kne),y2e={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},RB=wi.ie&&wi.ie_version<=11;class v2e{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new exe,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let i of t)this.queue.push(i);(wi.ie&&wi.ie_version<=11||wi.ios&&e.composing)&&t.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&wi.android&&e.constructor.EDIT_CONTEXT!==!1&&!(wi.chrome&&wi.chrome_version<126)&&(this.editContext=new C2e(e),e.state.facet(t1)&&(e.contentDOM.editContext=this.editContext.editContext)),RB&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var t;((t=this.view.docView)===null||t===void 0?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,i)=>t!=e[i]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,r=this.selectionRange;if(i.state.facet(t1)?i.root.activeElement!=this.dom:!dw(this.dom,r))return;let o=r.anchorNode&&i.docView.nearest(r.anchorNode);if(o&&o.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(wi.ie&&wi.ie_version<=11||wi.android&&wi.chrome)&&!i.state.selection.main.empty&&r.focusNode&&y3(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=f4(e.root);if(!t)return!1;let i=wi.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&b2e(this.view,t)||t;if(!i||this.selectionRange.eq(i))return!1;let r=dw(this.dom,i);return r&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&nxe(this.dom,i)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(i),r&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let i=this.dom;i;)if(i.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=t)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,y2e),RB&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),RB&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var i;if(!this.delayedAndroidKey){let r=()=>{let o=this.delayedAndroidKey;o&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=o.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&o.force&&Y_(this.dom,o.key,o.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(r)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((i=this.delayedAndroidKey)===null||i===void 0)&&i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,i=-1,r=!1;for(let o of e){let s=this.readMutation(o);s&&(s.typeOver&&(r=!0),t==-1?{from:t,to:i}=s:(t=Math.min(s.from,t),i=Math.max(s.to,i)))}return{from:t,to:i,typeOver:r}}readChange(){let{from:e,to:t,typeOver:i}=this.processRecords(),r=this.selectionChanged&&dw(this.dom,this.selectionRange);if(e<0&&!r)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let o=new Kxe(this.view,e,t,i);return this.view.docView.domChanged={newSel:o.newSel?o.newSel.main:null},o}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let i=this.view.state,r=wne(this.view,t);return this.view.state==i&&(t.domChanged||t.newSel&&!t.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),r}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.flags|=4),e.type=="childList"){let i=jN(t,e.previousSibling||e.target.previousSibling,-1),r=jN(t,e.nextSibling||e.target.nextSibling,1);return{from:i?t.posAfter(i):t.posAtStart,to:r?t.posBefore(r):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(t1)!=e.state.facet(t1)&&(e.view.contentDOM.editContext=e.state.facet(t1)?this.editContext.editContext:null))}destroy(){var e,t,i;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(i=this.resizeScroll)===null||i===void 0||i.disconnect();for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function jN(n,e,t){for(;e;){let i=ka.get(e);if(i&&i.parent==n)return i;let r=e.parentNode;e=r!=n.dom?r:t>0?e.nextSibling:e.previousSibling}return null}function NN(n,e){let t=e.startContainer,i=e.startOffset,r=e.endContainer,o=e.endOffset,s=n.docView.domAtPos(n.state.selection.main.anchor);return y3(s.node,s.offset,r,o)&&([t,i,r,o]=[r,o,t,i]),{anchorNode:t,anchorOffset:i,focusNode:r,focusOffset:o}}function b2e(n,e){if(e.getComposedRanges){let r=e.getComposedRanges(n.root)[0];if(r)return NN(n,r)}let t=null;function i(r){r.preventDefault(),r.stopImmediatePropagation(),t=r.getTargetRanges()[0]}return n.contentDOM.addEventListener("beforeinput",i,!0),n.dom.ownerDocument.execCommand("indent"),n.contentDOM.removeEventListener("beforeinput",i,!0),t?NN(n,t):null}class C2e{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let t=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=i=>{let r=e.state.selection.main,{anchor:o,head:s}=r,a=this.toEditorPos(i.updateRangeStart),c=this.toEditorPos(i.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:i.updateRangeStart,editorBase:a,drifted:!1});let h={from:a,to:c,insert:ms.of(i.text.split(`
`))};if(h.from==this.from&&o<this.from?h.from=o:h.to==this.to&&o>this.to&&(h.to=o),h.from==h.to&&!h.insert.length){let m=wn.single(this.toEditorPos(i.selectionStart),this.toEditorPos(i.selectionEnd));m.main.eq(r)||e.dispatch({selection:m,userEvent:"select"});return}if((wi.mac||wi.android)&&h.from==s-1&&/^\. ?$/.test(i.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(h={from:a,to:c,insert:ms.of([i.text.replace("."," ")])}),this.pendingContextChange=h,!e.state.readOnly){let m=this.to-this.from+(h.to-h.from+h.insert.length);qU(e,h,wn.single(this.toEditorPos(i.selectionStart,m),this.toEditorPos(i.selectionEnd,m)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)),h.from<h.to&&!h.insert.length&&e.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(t.text.slice(Math.max(0,i.updateRangeStart-1),Math.min(t.text.length,i.updateRangeStart+1)))&&this.handlers.compositionend(i)},this.handlers.characterboundsupdate=i=>{let r=[],o=null;for(let s=this.toEditorPos(i.rangeStart),a=this.toEditorPos(i.rangeEnd);s<a;s++){let c=e.coordsForChar(s);o=c&&new DOMRect(c.left,c.top,c.right-c.left,c.bottom-c.top)||o||new DOMRect,r.push(o)}t.updateCharacterBounds(i.rangeStart,r)},this.handlers.textformatupdate=i=>{let r=[];for(let o of i.getTextFormats()){let s=o.underlineStyle,a=o.underlineThickness;if(!/none/i.test(s)&&!/none/i.test(a)){let c=this.toEditorPos(o.rangeStart),h=this.toEditorPos(o.rangeEnd);if(c<h){let m=`text-decoration: underline ${/^[a-z]/.test(s)?s+" ":s=="Dashed"?"dashed ":s=="Squiggle"?"wavy ":""}${/thin/i.test(a)?1:2}px`;r.push(Or.mark({attributes:{style:m}}).range(c,h))}}}e.dispatch({effects:mne.of(Or.set(r))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:i}=this.composing;this.composing=null,i&&this.reset(e.state)}};for(let i in this.handlers)t.addEventListener(i,this.handlers[i]);this.measureReq={read:i=>{this.editContext.updateControlBounds(i.contentDOM.getBoundingClientRect());let r=f4(i.root);r&&r.rangeCount&&this.editContext.updateSelectionBounds(r.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let t=0,i=!1,r=this.pendingContextChange;return e.changes.iterChanges((o,s,a,c,h)=>{if(i)return;let m=h.length-(s-o);if(r&&s>=r.to)if(r.from==o&&r.to==s&&r.insert.eq(h)){r=this.pendingContextChange=null,t+=m,this.to+=m;return}else r=null,this.revertPending(e.state);if(o+=t,s+=t,s<=this.from)this.from+=m,this.to+=m;else if(o<this.to){if(o<this.from||s>this.to||this.to-this.from+h.length>3e4){i=!0;return}this.editContext.updateText(this.toContextPos(o),this.toContextPos(s),h.toString()),this.to+=m}t+=m}),r&&!i&&this.revertPending(e.state),!i}update(e){let t=this.pendingContextChange,i=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(i.from,i.to)&&e.transactions.some(r=>!r.isUserEvent("input.type")&&r.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||t)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:t}=e.selection.main;this.from=Math.max(0,t-1e4),this.to=Math.min(e.doc.length,t+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let t=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(t.from),this.toContextPos(t.from+t.insert.length),e.doc.sliceString(t.from,t.to))}setSelection(e){let{main:t}=e.selection,i=this.toContextPos(Math.max(this.from,Math.min(this.to,t.anchor))),r=this.toContextPos(t.head);(this.editContext.selectionStart!=i||this.editContext.selectionEnd!=r)&&this.editContext.updateSelection(i,r)}rangeIsValid(e){let{head:t}=e.selection.main;return!(this.from>0&&t-this.from<500||this.to<e.doc.length&&this.to-t<500||this.to-this.from>1e4*3)}toEditorPos(e,t=this.to-this.from){e=Math.min(e,t);let i=this.composing;return i&&i.drifted?i.editorBase+(e-i.contextBase):e+this.from}toContextPos(e){let t=this.composing;return t&&t.drifted?t.contextBase+(e-t.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class Si{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var t;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:i}=e;this.dispatchTransactions=e.dispatchTransactions||i&&(r=>r.forEach(o=>i(o,this)))||(r=>this.update(r)),this.dispatch=this.dispatch.bind(this),this._root=e.root||txe(e.parent)||document,this.viewState=new FN(e.state||ps.create(e)),e.scrollTo&&e.scrollTo.is(pM)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(B_).map(r=>new BB(r));for(let r of this.plugins)r.update(this);this.observer=new v2e(this),this.inputState=new Nxe(this),this.inputState.ensureHandlers(this.plugins),this.docView=new bN(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((t=document.fonts)===null||t===void 0)&&t.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let t=e.length==1&&e[0]instanceof Ec?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,i=!1,r,o=this.state;for(let M of e){if(M.startState!=o)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");o=M.state}if(this.destroyed){this.viewState.state=o;return}let s=this.hasFocus,a=0,c=null;e.some(M=>M.annotation(kne))?(this.inputState.notifiedFocused=s,a=1):s!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=s,c=Tne(o,s),c||(a=1));let h=this.observer.delayedAndroidKey,m=null;if(h?(this.observer.clearDelayedAndroidKey(),m=this.observer.readChange(),(m&&!this.state.doc.eq(o.doc)||!this.state.selection.eq(o.selection))&&(m=null)):this.observer.clear(),o.facet(ps.phrases)!=this.state.facet(ps.phrases))return this.setState(o);r=bS.create(this,o,e),r.flags|=a;let y=this.viewState.scrollTarget;try{this.updateState=2;for(let M of e){if(y&&(y=y.map(M.changes)),M.scrollIntoView){let{main:x}=M.state.selection;y=new $_(x.empty?x:wn.cursor(x.head,x.head>x.anchor?-1:1))}for(let x of M.effects)x.is(pM)&&(y=x.value.clip(this.state))}this.viewState.update(r,y),this.bidiCache=_S.update(this.bidiCache,r.changes),r.empty||(this.updatePlugins(r),this.inputState.update(r)),t=this.docView.update(r),this.state.facet($2)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(M=>M.isUserEvent("select.pointer")))}finally{this.updateState=0}if(r.startState.facet(CM)!=r.state.facet(CM)&&(this.viewState.mustMeasureContent=!0),(t||i||y||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),t&&this.docViewUpdate(),!r.empty)for(let M of this.state.facet(zR))try{M(r)}catch(x){Ih(this.state,x,"update listener")}(c||m)&&Promise.resolve().then(()=>{c&&this.state==c.startState&&this.dispatch(c),m&&!wne(this,m)&&h.force&&Y_(this.contentDOM,h.key,h.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new FN(e),this.plugins=e.facet(B_).map(i=>new BB(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView.destroy(),this.docView=new bN(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(B_),i=e.state.facet(B_);if(t!=i){let r=[];for(let o of i){let s=t.indexOf(o);if(s<0)r.push(new BB(o));else{let a=this.plugins[s];a.mustUpdate=e,r.push(a)}}for(let o of this.plugins)o.mustUpdate!=e&&o.destroy(this);this.plugins=r,this.pluginMap.clear()}else for(let r of this.plugins)r.mustUpdate=e;for(let r=0;r<this.plugins.length;r++)this.plugins[r].update(this);t!=i&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let t=e.value;if(t&&t.docViewUpdate)try{t.docViewUpdate(this)}catch(i){Ih(this.state,i,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,i=this.scrollDOM,r=i.scrollTop*this.scaleY,{scrollAnchorPos:o,scrollAnchorHeight:s}=this.viewState;Math.abs(r-this.viewState.scrollTop)>1&&(s=-1),this.viewState.scrollAnchorHeight=-1;try{for(let a=0;;a++){if(s<0)if(Wte(i))o=-1,s=this.viewState.heightMap.height;else{let x=this.viewState.scrollAnchorAt(r);o=x.from,s=x.top}this.updateState=1;let c=this.viewState.measure(this);if(!c&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(a>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let h=[];c&4||([this.measureRequests,h]=[h,this.measureRequests]);let m=h.map(x=>{try{return x.read(this)}catch(T){return Ih(this.state,T),GN}}),y=bS.create(this,this.state,[]),M=!1;y.flags|=c,t?t.flags|=c:t=y,this.updateState=2,y.empty||(this.updatePlugins(y),this.inputState.update(y),this.updateAttrs(),M=this.docView.update(y),M&&this.docViewUpdate());for(let x=0;x<h.length;x++)if(m[x]!=GN)try{let T=h[x];T.write&&T.write(m[x],this)}catch(T){Ih(this.state,T)}if(M&&this.docView.updateSelection(!0),!y.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,s=-1;continue}else{let T=(o<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(o).top)-s;if(T>1||T<-1){r=r+T,i.scrollTop=r/this.scaleY,s=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let a of this.state.facet(zR))a(t)}get themeClasses(){return QR+" "+(this.state.facet(WR)?Une:Pne)+" "+this.state.facet(CM)}updateAttrs(){let e=WN(this,gne,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(t1)?"true":"false",class:"cm-content",style:`${wi.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),WN(this,WU,t);let i=this.observer.ignore(()=>{let r=PR(this.contentDOM,this.contentAttrs,t),o=PR(this.dom,this.editorAttrs,e);return r||o});return this.editorAttrs=e,this.contentAttrs=t,i}showAnnouncements(e){let t=!0;for(let i of e)for(let r of i.effects)if(r.is(Si.announce)){t&&(this.announceDOM.textContent=""),t=!1;let o=this.announceDOM.appendChild(document.createElement("div"));o.textContent=r.value}}mountStyles(){this.styleModules=this.state.facet($2);let e=this.state.facet(Si.cspNonce);nv.mount(this.root,this.styleModules.concat(g2e).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.plugin!=e)&&this.pluginMap.set(e,t=this.plugins.find(i=>i.plugin==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,i){return kB(this,e,wN(this,e,t,i))}moveByGroup(e,t){return kB(this,e,wN(this,e,t,i=>Rxe(this,e.head,i)))}visualLineSide(e,t){let i=this.bidiSpans(e),r=this.textDirectionAt(e.from),o=i[t?i.length-1:0];return wn.cursor(o.side(t,r)+e.from,o.forward(!t,r)?1:-1)}moveToLineBoundary(e,t,i=!0){return Txe(this,e,t,i)}moveVertically(e,t,i){return kB(this,e,Dxe(this,e,t,i))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),_ne(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let i=this.docView.coordsAt(e,t);if(!i||i.left==i.right)return i;let r=this.state.doc.lineAt(e),o=this.bidiSpans(r),s=o[Gy.find(o,e-r.from,-1,t)];return l6(i,s.dir==ol.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(dne)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>_2e)return one(e.length);let t=this.textDirectionAt(e.from),i;for(let o of this.bidiCache)if(o.from==e.from&&o.dir==t&&(o.fresh||rne(o.isolates,i=vN(this,e))))return o.order;i||(i=vN(this,e));let r=mxe(e.text,t,i);return this.bidiCache.push(new _S(e.from,e.to,t,i,!0,r)),r}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||wi.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{Nte(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return pM.of(new $_(typeof e=="number"?wn.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:t}=this.scrollDOM,i=this.viewState.scrollAnchorAt(e);return pM.of(new $_(wn.cursor(i.from),"start","start",i.top-e,t,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return xu.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return xu.define(()=>({}),{eventObservers:e})}static theme(e,t){let i=nv.newName(),r=[CM.of(i),$2.of(qR(`.${i}`,e))];return t&&t.dark&&r.push(WR.of(!0)),r}static baseTheme(e){return nC.lowest($2.of(qR("."+QR,e,Kne)))}static findFromDOM(e){var t;let i=e.querySelector(".cm-content"),r=i&&ka.get(i)||ka.get(e);return((t=r?.rootView)===null||t===void 0?void 0:t.view)||null}}Si.styleModule=$2;Si.inputHandler=Ane;Si.clipboardInputFilter=NU;Si.clipboardOutputFilter=GU;Si.scrollHandler=pne;Si.focusChangeEffect=hne;Si.perLineTextDirection=dne;Si.exceptionSink=cne;Si.updateListener=zR;Si.editable=t1;Si.mouseSelectionStyle=une;Si.dragMovesSelection=lne;Si.clickAddsSelectionRange=ane;Si.decorations=m4;Si.outerDecorations=yne;Si.atomicRanges=v5;Si.bidiIsolatedRanges=vne;Si.scrollMargins=bne;Si.darkTheme=WR;Si.cspNonce=Bi.define({combine:n=>n.length?n[0]:""});Si.contentAttributes=WU;Si.editorAttributes=gne;Si.lineWrapping=Si.contentAttributes.of({class:"cm-lineWrapping"});Si.announce=ro.define();const _2e=4096,GN={};class _S{constructor(e,t,i,r,o,s){this.from=e,this.to=t,this.dir=i,this.isolates=r,this.fresh=o,this.order=s}static update(e,t){if(t.empty&&!e.some(o=>o.fresh))return e;let i=[],r=e.length?e[e.length-1].dir:ol.LTR;for(let o=Math.max(0,e.length-10);o<e.length;o++){let s=e[o];s.dir==r&&!t.touchesRange(s.from,s.to)&&i.push(new _S(t.mapPos(s.from,1),t.mapPos(s.to,-1),s.dir,s.isolates,!1,s.order))}return i}}function WN(n,e,t){for(let i=n.state.facet(e),r=i.length-1;r>=0;r--){let o=i[r],s=typeof o=="function"?o(n):o;s&&DR(s,t)}return t}const x2e=wi.mac?"mac":wi.windows?"win":wi.linux?"linux":"key";function M2e(n,e){const t=n.split(/-(?!$)/);let i=t[t.length-1];i=="Space"&&(i=" ");let r,o,s,a;for(let c=0;c<t.length-1;++c){const h=t[c];if(/^(cmd|meta|m)$/i.test(h))a=!0;else if(/^a(lt)?$/i.test(h))r=!0;else if(/^(c|ctrl|control)$/i.test(h))o=!0;else if(/^s(hift)?$/i.test(h))s=!0;else if(/^mod$/i.test(h))e=="mac"?a=!0:o=!0;else throw new Error("Unrecognized modifier name: "+h)}return r&&(i="Alt-"+i),o&&(i="Ctrl-"+i),a&&(i="Meta-"+i),s&&(i="Shift-"+i),i}function _M(n,e,t){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t!==!1&&e.shiftKey&&(n="Shift-"+n),n}const w2e=nC.default(Si.domEventHandlers({keydown(n,e){return Fne(Lne(e.state),n,e,"editor")}})),VU=Bi.define({enables:w2e}),QN=new WeakMap;function Lne(n){let e=n.facet(VU),t=QN.get(e);return t||QN.set(e,t=O2e(e.reduce((i,r)=>i.concat(r),[]))),t}function S2e(n,e,t){return Fne(Lne(n.state),e,n,t)}let ky=null;const E2e=4e3;function O2e(n,e=x2e){let t=Object.create(null),i=Object.create(null),r=(s,a)=>{let c=i[s];if(c==null)i[s]=a;else if(c!=a)throw new Error("Key binding "+s+" is used both as a regular binding and as a multi-stroke prefix")},o=(s,a,c,h,m)=>{var y,M;let x=t[s]||(t[s]=Object.create(null)),T=a.split(/ (?!$)/).map(j=>M2e(j,e));for(let j=1;j<T.length;j++){let q=T.slice(0,j).join(" ");r(q,!0),x[q]||(x[q]={preventDefault:!0,stopPropagation:!1,run:[V=>{let H=ky={view:V,prefix:q,scope:s};return setTimeout(()=>{ky==H&&(ky=null)},E2e),!0}]})}let P=T.join(" ");r(P,!1);let F=x[P]||(x[P]={preventDefault:!1,stopPropagation:!1,run:((M=(y=x._any)===null||y===void 0?void 0:y.run)===null||M===void 0?void 0:M.slice())||[]});c&&F.run.push(c),h&&(F.preventDefault=!0),m&&(F.stopPropagation=!0)};for(let s of n){let a=s.scope?s.scope.split(" "):["editor"];if(s.any)for(let h of a){let m=t[h]||(t[h]=Object.create(null));m._any||(m._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:y}=s;for(let M in m)m[M].run.push(x=>y(x,YR))}let c=s[e]||s.key;if(c)for(let h of a)o(h,c,s.run,s.preventDefault,s.stopPropagation),s.shift&&o(h,"Shift-"+c,s.shift,s.preventDefault,s.stopPropagation)}return t}let YR=null;function Fne(n,e,t,i){YR=e;let r=H_e(e),o=bd(r,0),s=Dg(o)==r.length&&r!=" ",a="",c=!1,h=!1,m=!1;ky&&ky.view==t&&ky.scope==i&&(a=ky.prefix+" ",Ene.indexOf(e.keyCode)<0&&(h=!0,ky=null));let y=new Set,M=F=>{if(F){for(let j of F.run)if(!y.has(j)&&(y.add(j),j(t)))return F.stopPropagation&&(m=!0),!0;F.preventDefault&&(F.stopPropagation&&(m=!0),h=!0)}return!1},x=n[i],T,P;return x&&(M(x[a+_M(r,e,!s)])?c=!0:s&&(e.altKey||e.metaKey||e.ctrlKey)&&!(wi.windows&&e.ctrlKey&&e.altKey)&&!(wi.mac&&e.altKey&&!(e.ctrlKey||e.metaKey))&&(T=iv[e.keyCode])&&T!=r?(M(x[a+_M(T,e,!0)])||e.shiftKey&&(P=d4[e.keyCode])!=r&&P!=T&&M(x[a+_M(P,e,!1)]))&&(c=!0):s&&e.shiftKey&&M(x[a+_M(r,e,!0)])&&(c=!0),!c&&M(x._any)&&(c=!0)),h&&(c=!0),c&&m&&e.stopPropagation(),YR=null,c}class b5{constructor(e,t,i,r,o){this.className=e,this.left=t,this.top=i,this.width=r,this.height=o}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,i){if(i.empty){let r=e.coordsAtPos(i.head,i.assoc||1);if(!r)return[];let o=zne(e);return[new b5(t,r.left-o.left,r.top-o.top,null,r.bottom-r.top)]}else return B2e(e,t,i)}}function zne(n){let e=n.scrollDOM.getBoundingClientRect();return{left:(n.textDirection==ol.LTR?e.left:e.right-n.scrollDOM.clientWidth*n.scaleX)-n.scrollDOM.scrollLeft*n.scaleX,top:e.top-n.scrollDOM.scrollTop*n.scaleY}}function qN(n,e,t,i){let r=n.coordsAtPos(e,t*2);if(!r)return i;let o=n.dom.getBoundingClientRect(),s=(r.top+r.bottom)/2,a=n.posAtCoords({x:o.left+1,y:s}),c=n.posAtCoords({x:o.right-1,y:s});return a==null||c==null?i:{from:Math.max(i.from,Math.min(a,c)),to:Math.min(i.to,Math.max(a,c))}}function B2e(n,e,t){if(t.to<=n.viewport.from||t.from>=n.viewport.to)return[];let i=Math.max(t.from,n.viewport.from),r=Math.min(t.to,n.viewport.to),o=n.textDirection==ol.LTR,s=n.contentDOM,a=s.getBoundingClientRect(),c=zne(n),h=s.querySelector(".cm-line"),m=h&&window.getComputedStyle(h),y=a.left+(m?parseInt(m.paddingLeft)+Math.min(0,parseInt(m.textIndent)):0),M=a.right-(m?parseInt(m.paddingRight):0),x=NR(n,i,1),T=NR(n,r,-1),P=x.type==kh.Text?x:null,F=T.type==kh.Text?T:null;if(P&&(n.lineWrapping||x.widgetLineBreaks)&&(P=qN(n,i,1,P)),F&&(n.lineWrapping||T.widgetLineBreaks)&&(F=qN(n,r,-1,F)),P&&F&&P.from==F.from&&P.to==F.to)return q(V(t.from,t.to,P));{let Q=P?V(t.from,null,P):H(x,!1),Y=F?V(null,t.to,F):H(T,!0),z=[];return(P||x).to<(F||T).from-(P&&F?1:0)||x.widgetLineBreaks>1&&Q.bottom+n.defaultLineHeight/2<Y.top?z.push(j(y,Q.bottom,M,Y.top)):Q.bottom<Y.top&&n.elementAtHeight((Q.bottom+Y.top)/2).type==kh.Text&&(Q.bottom=Y.top=(Q.bottom+Y.top)/2),q(Q).concat(z).concat(q(Y))}function j(Q,Y,z,se){return new b5(e,Q-c.left,Y-c.top,z-Q,se-Y)}function q({top:Q,bottom:Y,horizontal:z}){let se=[];for(let le=0;le<z.length;le+=2)se.push(j(z[le],Q,z[le+1],Y));return se}function V(Q,Y,z){let se=1e9,le=-1e9,pe=[];function de(Re,je,Ie,qe,tt){let At=n.coordsAtPos(Re,Re==z.to?-2:2),ke=n.coordsAtPos(Ie,Ie==z.from?2:-2);!At||!ke||(se=Math.min(At.top,ke.top,se),le=Math.max(At.bottom,ke.bottom,le),tt==ol.LTR?pe.push(o&&je?y:At.left,o&&qe?M:ke.right):pe.push(!o&&qe?y:ke.left,!o&&je?M:At.right))}let ve=Q??z.from,Ee=Y??z.to;for(let Re of n.visibleRanges)if(Re.to>ve&&Re.from<Ee)for(let je=Math.max(Re.from,ve),Ie=Math.min(Re.to,Ee);;){let qe=n.state.doc.lineAt(je);for(let tt of n.bidiSpans(qe)){let At=tt.from+qe.from,ke=tt.to+qe.from;if(At>=Ie)break;ke>je&&de(Math.max(At,je),Q==null&&At<=ve,Math.min(ke,Ie),Y==null&&ke>=Ee,tt.dir)}if(je=qe.to+1,je>=Ie)break}return pe.length==0&&de(ve,Q==null,Ee,Y==null,n.textDirection),{top:se,bottom:le,horizontal:pe}}function H(Q,Y){let z=a.top+(Y?Q.top:Q.bottom);return{top:z,bottom:z,horizontal:[]}}}function I2e(n,e){return n.constructor==e.constructor&&n.eq(e)}class k2e{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(mw)!=e.state.facet(mw)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let t=0,i=e.facet(mw);for(;t<i.length&&i[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:t}=this.view;(e!=this.scaleX||t!=this.scaleY)&&(this.scaleX=e,this.scaleY=t,this.dom.style.transform=`scale(${1/e}, ${1/t})`)}draw(e){if(e.length!=this.drawn.length||e.some((t,i)=>!I2e(t,this.drawn[i]))){let t=this.dom.firstChild,i=0;for(let r of e)r.update&&t&&r.constructor&&this.drawn[i].constructor&&r.update(t,this.drawn[i])?(t=t.nextSibling,i++):this.dom.insertBefore(r.draw(),t);for(;t;){let r=t.nextSibling;t.remove(),t=r}this.drawn=e,wi.ios&&(this.dom.style.display=this.dom.firstChild?"":"none")}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const mw=Bi.define();function jne(n){return[xu.define(e=>new k2e(e,n)),mw.of(n)]}const g4=Bi.define({combine(n){return Dm(n,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})}});function T2e(n={}){return[g4.of(n),R2e,D2e,P2e,fne.of(!0)]}function Nne(n){return n.startState.facet(g4)!=n.state.facet(g4)}const R2e=jne({above:!0,markers(n){let{state:e}=n,t=e.facet(g4),i=[];for(let r of e.selection.ranges){let o=r==e.selection.main;if(r.empty||t.drawRangeCursor){let s=o?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",a=r.empty?r:wn.cursor(r.head,r.head>r.anchor?-1:1);for(let c of b5.forRange(n,s,a))i.push(c)}}return i},update(n,e){n.transactions.some(i=>i.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let t=Nne(n);return t&&YN(n.state,e),n.docChanged||n.selectionSet||t},mount(n,e){YN(e.state,n)},class:"cm-cursorLayer"});function YN(n,e){e.style.animationDuration=n.facet(g4).cursorBlinkRate+"ms"}const D2e=jne({above:!1,markers(n){return n.state.selection.ranges.map(e=>e.empty?[]:b5.forRange(n,"cm-selectionBackground",e)).reduce((e,t)=>e.concat(t))},update(n,e){return n.docChanged||n.selectionSet||n.viewportChanged||Nne(n)},class:"cm-selectionLayer"}),P2e=nC.highest(Si.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}})),Gne=ro.define({map(n,e){return n==null?null:e.mapPos(n)}}),Z2=Oc.define({create(){return null},update(n,e){return n!=null&&(n=e.changes.mapPos(n)),e.effects.reduce((t,i)=>i.is(Gne)?i.value:t,n)}}),U2e=xu.fromClass(class{constructor(n){this.view=n,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(n){var e;let t=n.state.field(Z2);t==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(n.startState.field(Z2)!=t||n.docChanged||n.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:n}=this,e=n.state.field(Z2),t=e!=null&&n.coordsAtPos(e);if(!t)return null;let i=n.scrollDOM.getBoundingClientRect();return{left:t.left-i.left+n.scrollDOM.scrollLeft*n.scaleX,top:t.top-i.top+n.scrollDOM.scrollTop*n.scaleY,height:t.bottom-t.top}}drawCursor(n){if(this.cursor){let{scaleX:e,scaleY:t}=this.view;n?(this.cursor.style.left=n.left/e+"px",this.cursor.style.top=n.top/t+"px",this.cursor.style.height=n.height/t+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(n){this.view.state.field(Z2)!=n&&this.view.dispatch({effects:Gne.of(n)})}},{eventObservers:{dragover(n){this.setDropPos(this.view.posAtCoords({x:n.clientX,y:n.clientY}))},dragleave(n){(n.target==this.view.contentDOM||!this.view.contentDOM.contains(n.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function K2e(){return[Z2,U2e]}function $N(n,e,t,i,r){e.lastIndex=0;for(let o=n.iterRange(t,i),s=t,a;!o.next().done;s+=o.value.length)if(!o.lineBreak)for(;a=e.exec(o.value);)r(s+a.index,a)}function L2e(n,e){let t=n.visibleRanges;if(t.length==1&&t[0].from==n.viewport.from&&t[0].to==n.viewport.to)return t;let i=[];for(let{from:r,to:o}of t)r=Math.max(n.state.doc.lineAt(r).from,r-e),o=Math.min(n.state.doc.lineAt(o).to,o+e),i.length&&i[i.length-1].to>=r?i[i.length-1].to=o:i.push({from:r,to:o});return i}class F2e{constructor(e){const{regexp:t,decoration:i,decorate:r,boundary:o,maxLength:s=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,r)this.addMatch=(a,c,h,m)=>r(m,h,h+a[0].length,a,c);else if(typeof i=="function")this.addMatch=(a,c,h,m)=>{let y=i(a,c,h);y&&m(h,h+a[0].length,y)};else if(i)this.addMatch=(a,c,h,m)=>m(h,h+a[0].length,i);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=o,this.maxLength=s}createDeco(e){let t=new f1,i=t.add.bind(t);for(let{from:r,to:o}of L2e(e,this.maxLength))$N(e.state.doc,this.regexp,r,o,(s,a)=>this.addMatch(a,e,s,i));return t.finish()}updateDeco(e,t){let i=1e9,r=-1;return e.docChanged&&e.changes.iterChanges((o,s,a,c)=>{c>=e.view.viewport.from&&a<=e.view.viewport.to&&(i=Math.min(a,i),r=Math.max(c,r))}),e.viewportMoved||r-i>1e3?this.createDeco(e.view):r>-1?this.updateRange(e.view,t.map(e.changes),i,r):t}updateRange(e,t,i,r){for(let o of e.visibleRanges){let s=Math.max(o.from,i),a=Math.min(o.to,r);if(a>=s){let c=e.state.doc.lineAt(s),h=c.to<a?e.state.doc.lineAt(a):c,m=Math.max(o.from,c.from),y=Math.min(o.to,h.to);if(this.boundary){for(;s>c.from;s--)if(this.boundary.test(c.text[s-1-c.from])){m=s;break}for(;a<h.to;a++)if(this.boundary.test(h.text[a-h.from])){y=a;break}}let M=[],x,T=(P,F,j)=>M.push(j.range(P,F));if(c==h)for(this.regexp.lastIndex=m-c.from;(x=this.regexp.exec(c.text))&&x.index<y-c.from;)this.addMatch(x,e,x.index+c.from,T);else $N(e.state.doc,this.regexp,m,y,(P,F)=>this.addMatch(F,e,P,T));t=t.update({filterFrom:m,filterTo:y,filter:(P,F)=>P<m||F>y,add:M})}}return t}}const $R=/x/.unicode!=null?"gu":"g",z2e=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,$R),j2e={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let DB=null;function N2e(){var n;if(DB==null&&typeof document<"u"&&document.body){let e=document.body.style;DB=((n=e.tabSize)!==null&&n!==void 0?n:e.MozTabSize)!=null}return DB||!1}const gw=Bi.define({combine(n){let e=Dm(n,{render:null,specialChars:z2e,addSpecialChars:null});return(e.replaceTabs=!N2e())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,$R)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,$R)),e}});function G2e(n={}){return[gw.of(n),W2e()]}let VN=null;function W2e(){return VN||(VN=xu.fromClass(class{constructor(n){this.view=n,this.decorations=Or.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(n.state.facet(gw)),this.decorations=this.decorator.createDeco(n)}makeDecorator(n){return new F2e({regexp:n.specialChars,decoration:(e,t,i)=>{let{doc:r}=t.state,o=bd(e[0],0);if(o==9){let s=r.lineAt(i),a=t.state.tabSize,c=Nx(s.text,a,i-s.from);return Or.replace({widget:new $2e((a-c%a)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[o]||(this.decorationCache[o]=Or.replace({widget:new Y2e(n,o)}))},boundary:n.replaceTabs?void 0:/[^]/})}update(n){let e=n.state.facet(gw);n.startState.facet(gw)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(n.view)):this.decorations=this.decorator.updateDeco(n,this.decorations)}},{decorations:n=>n.decorations}))}const Q2e="";function q2e(n){return n>=32?Q2e:n==10?"":String.fromCharCode(9216+n)}class Y2e extends cv{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=q2e(this.code),i=e.state.phrase("Control character")+" "+(j2e[this.code]||"0x"+this.code.toString(16)),r=this.options.render&&this.options.render(this.code,i,t);if(r)return r;let o=document.createElement("span");return o.textContent=t,o.title=i,o.setAttribute("aria-label",i),o.className="cm-specialChar",o}ignoreEvent(){return!1}}class $2e extends cv{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function V2e(){return Z2e}const H2e=Or.line({class:"cm-activeLine"}),Z2e=xu.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.docChanged||n.selectionSet)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=-1,t=[];for(let i of n.state.selection.ranges){let r=n.lineBlockAt(i.head);r.from>e&&(t.push(H2e.range(r.from)),e=r.from)}return Or.set(t)}},{decorations:n=>n.decorations}),VR=2e3;function X2e(n,e,t){let i=Math.min(e.line,t.line),r=Math.max(e.line,t.line),o=[];if(e.off>VR||t.off>VR||e.col<0||t.col<0){let s=Math.min(e.off,t.off),a=Math.max(e.off,t.off);for(let c=i;c<=r;c++){let h=n.doc.line(c);h.length<=a&&o.push(wn.range(h.from+s,h.to+a))}}else{let s=Math.min(e.col,t.col),a=Math.max(e.col,t.col);for(let c=i;c<=r;c++){let h=n.doc.line(c),m=ER(h.text,s,n.tabSize,!0);if(m<0)o.push(wn.cursor(h.to));else{let y=ER(h.text,a,n.tabSize);o.push(wn.range(h.from+m,h.from+y))}}}return o}function J2e(n,e){let t=n.coordsAtPos(n.viewport.from);return t?Math.round(Math.abs((t.left-e)/n.defaultCharacterWidth)):-1}function HN(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1),i=n.state.doc.lineAt(t),r=t-i.from,o=r>VR?-1:r==i.length?J2e(n,e.clientX):Nx(i.text,n.state.tabSize,t-i.from);return{line:i.number,col:o,off:r}}function e3e(n,e){let t=HN(n,e),i=n.state.selection;return t?{update(r){if(r.docChanged){let o=r.changes.mapPos(r.startState.doc.line(t.line).from),s=r.state.doc.lineAt(o);t={line:s.number,col:t.col,off:Math.min(t.off,s.length)},i=i.map(r.changes)}},get(r,o,s){let a=HN(n,r);if(!a)return i;let c=X2e(n.state,t,a);return c.length?s?wn.create(c.concat(i.ranges)):wn.create(c):i}}:null}function t3e(n){let e=(t=>t.altKey&&t.button==0);return Si.mouseSelectionStyle.of((t,i)=>e(i)?e3e(t,i):null)}const n3e={Alt:[18,n=>!!n.altKey],Control:[17,n=>!!n.ctrlKey],Shift:[16,n=>!!n.shiftKey],Meta:[91,n=>!!n.metaKey]},i3e={style:"cursor: crosshair"};function r3e(n={}){let[e,t]=n3e[n.key||"Alt"],i=xu.fromClass(class{constructor(r){this.view=r,this.isDown=!1}set(r){this.isDown!=r&&(this.isDown=r,this.view.update([]))}},{eventObservers:{keydown(r){this.set(r.keyCode==e||t(r))},keyup(r){(r.keyCode==e||!t(r))&&this.set(!1)},mousemove(r){this.set(t(r))}}});return[i,Si.contentAttributes.of(r=>{var o;return!((o=r.plugin(i))===null||o===void 0)&&o.isDown?i3e:null})]}const C2="-10000px";class Wne{constructor(e,t,i,r){this.facet=t,this.createTooltipView=i,this.removeTooltipView=r,this.input=e.state.facet(t),this.tooltips=this.input.filter(s=>s);let o=null;this.tooltipViews=this.tooltips.map(s=>o=i(s,o))}update(e,t){var i;let r=e.state.facet(this.facet),o=r.filter(c=>c);if(r===this.input){for(let c of this.tooltipViews)c.update&&c.update(e);return!1}let s=[],a=t?[]:null;for(let c=0;c<o.length;c++){let h=o[c],m=-1;if(h){for(let y=0;y<this.tooltips.length;y++){let M=this.tooltips[y];M&&M.create==h.create&&(m=y)}if(m<0)s[c]=this.createTooltipView(h,c?s[c-1]:null),a&&(a[c]=!!h.above);else{let y=s[c]=this.tooltipViews[m];a&&(a[c]=t[m]),y.update&&y.update(e)}}}for(let c of this.tooltipViews)s.indexOf(c)<0&&(this.removeTooltipView(c),(i=c.destroy)===null||i===void 0||i.call(c));return t&&(a.forEach((c,h)=>t[h]=c),t.length=a.length),this.input=r,this.tooltips=o,this.tooltipViews=s,!0}}function o3e(n){let e=n.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:e.clientHeight,right:e.clientWidth}}const PB=Bi.define({combine:n=>{var e,t,i;return{position:wi.ios?"absolute":((e=n.find(r=>r.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((t=n.find(r=>r.parent))===null||t===void 0?void 0:t.parent)||null,tooltipSpace:((i=n.find(r=>r.tooltipSpace))===null||i===void 0?void 0:i.tooltipSpace)||o3e}}}),ZN=new WeakMap,HU=xu.fromClass(class{constructor(n){this.view=n,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=n.state.facet(PB);this.position=e.position,this.parent=e.parent,this.classes=n.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new Wne(n,A6,(t,i)=>this.createTooltip(t,i),t=>{this.resizeObserver&&this.resizeObserver.unobserve(t.dom),t.dom.remove()}),this.above=this.manager.tooltips.map(t=>!!t.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(t=>{Date.now()>this.lastTransaction-50&&t.length>0&&t[t.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),n.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let n of this.manager.tooltipViews)this.intersectionObserver.observe(n.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(n){n.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(n,this.above);e&&this.observeIntersection();let t=e||n.geometryChanged,i=n.state.facet(PB);if(i.position!=this.position&&!this.madeAbsolute){this.position=i.position;for(let r of this.manager.tooltipViews)r.dom.style.position=this.position;t=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let r of this.manager.tooltipViews)this.container.appendChild(r.dom);t=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);t&&this.maybeMeasure()}createTooltip(n,e){let t=n.create(this.view),i=e?e.dom:null;if(t.dom.classList.add("cm-tooltip"),n.arrow&&!t.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let r=document.createElement("div");r.className="cm-tooltip-arrow",t.dom.appendChild(r)}return t.dom.style.position=this.position,t.dom.style.top=C2,t.dom.style.left="0px",this.container.insertBefore(t.dom,i),t.mount&&t.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(t.dom),t}destroy(){var n,e,t;this.view.win.removeEventListener("resize",this.measureSoon);for(let i of this.manager.tooltipViews)i.dom.remove(),(n=i.destroy)===null||n===void 0||n.call(i);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(t=this.intersectionObserver)===null||t===void 0||t.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let n=1,e=1,t=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:o}=this.manager.tooltipViews[0];if(wi.gecko)t=o.offsetParent!=this.container.ownerDocument.body;else if(o.style.top==C2&&o.style.left=="0px"){let s=o.getBoundingClientRect();t=Math.abs(s.top+1e4)>1||Math.abs(s.left)>1}}if(t||this.position=="absolute")if(this.parent){let o=this.parent.getBoundingClientRect();o.width&&o.height&&(n=o.width/this.parent.offsetWidth,e=o.height/this.parent.offsetHeight)}else({scaleX:n,scaleY:e}=this.view.viewState);let i=this.view.scrollDOM.getBoundingClientRect(),r=QU(this.view);return{visible:{left:i.left+r.left,top:i.top+r.top,right:i.right-r.right,bottom:i.bottom-r.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((o,s)=>{let a=this.manager.tooltipViews[s];return a.getCoords?a.getCoords(o.pos):this.view.coordsAtPos(o.pos)}),size:this.manager.tooltipViews.map(({dom:o})=>o.getBoundingClientRect()),space:this.view.state.facet(PB).tooltipSpace(this.view),scaleX:n,scaleY:e,makeAbsolute:t}}writeMeasure(n){var e;if(n.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let a of this.manager.tooltipViews)a.dom.style.position="absolute"}let{visible:t,space:i,scaleX:r,scaleY:o}=n,s=[];for(let a=0;a<this.manager.tooltips.length;a++){let c=this.manager.tooltips[a],h=this.manager.tooltipViews[a],{dom:m}=h,y=n.pos[a],M=n.size[a];if(!y||c.clip!==!1&&(y.bottom<=Math.max(t.top,i.top)||y.top>=Math.min(t.bottom,i.bottom)||y.right<Math.max(t.left,i.left)-.1||y.left>Math.min(t.right,i.right)+.1)){m.style.top=C2;continue}let x=c.arrow?h.dom.querySelector(".cm-tooltip-arrow"):null,T=x?7:0,P=M.right-M.left,F=(e=ZN.get(h))!==null&&e!==void 0?e:M.bottom-M.top,j=h.offset||a3e,q=this.view.textDirection==ol.LTR,V=M.width>i.right-i.left?q?i.left:i.right-M.width:q?Math.max(i.left,Math.min(y.left-(x?14:0)+j.x,i.right-P)):Math.min(Math.max(i.left,y.left-P+(x?14:0)-j.x),i.right-P),H=this.above[a];!c.strictSide&&(H?y.top-F-T-j.y<i.top:y.bottom+F+T+j.y>i.bottom)&&H==i.bottom-y.bottom>y.top-i.top&&(H=this.above[a]=!H);let Q=(H?y.top-i.top:i.bottom-y.bottom)-T;if(Q<F&&h.resize!==!1){if(Q<this.view.defaultLineHeight){m.style.top=C2;continue}ZN.set(h,F),m.style.height=(F=Q)/o+"px"}else m.style.height&&(m.style.height="");let Y=H?y.top-F-T-j.y:y.bottom+T+j.y,z=V+P;if(h.overlap!==!0)for(let se of s)se.left<z&&se.right>V&&se.top<Y+F&&se.bottom>Y&&(Y=H?se.top-F-2-T:se.bottom+T+2);if(this.position=="absolute"?(m.style.top=(Y-n.parent.top)/o+"px",XN(m,(V-n.parent.left)/r)):(m.style.top=Y/o+"px",XN(m,V/r)),x){let se=y.left+(q?j.x:-j.x)-(V+14-7);x.style.left=se/r+"px"}h.overlap!==!0&&s.push({left:V,top:Y,right:z,bottom:Y+F}),m.classList.toggle("cm-tooltip-above",H),m.classList.toggle("cm-tooltip-below",!H),h.positioned&&h.positioned(n.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let n of this.manager.tooltipViews)n.dom.style.top=C2}},{eventObservers:{scroll(){this.maybeMeasure()}}});function XN(n,e){let t=parseInt(n.style.left,10);(isNaN(t)||Math.abs(e-t)>1)&&(n.style.left=e+"px")}const s3e=Si.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),a3e={x:0,y:0},A6=Bi.define({enables:[HU,s3e]}),xS=Bi.define({combine:n=>n.reduce((e,t)=>e.concat(t),[])});class h6{static create(e){return new h6(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new Wne(e,xS,(t,i)=>this.createHostedView(t,i),t=>t.dom.remove())}createHostedView(e,t){let i=e.create(this.view);return i.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(i.dom,t?t.dom.nextSibling:this.dom.firstChild),this.mounted&&i.mount&&i.mount(this.view),i}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(e){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let t of this.manager.tooltipViews)(e=t.destroy)===null||e===void 0||e.call(t)}passProp(e){let t;for(let i of this.manager.tooltipViews){let r=i[e];if(r!==void 0){if(t===void 0)t=r;else if(t!==r)return}}return t}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const l3e=A6.compute([xS],n=>{let e=n.facet(xS);return e.length===0?null:{pos:Math.min(...e.map(t=>t.pos)),end:Math.max(...e.map(t=>{var i;return(i=t.end)!==null&&i!==void 0?i:t.pos})),create:h6.create,above:e[0].above,arrow:e.some(t=>t.arrow)}});class u3e{constructor(e,t,i,r,o){this.view=e,this.source=t,this.field=i,this.setHover=r,this.hoverTime=o,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:t}=this,i=e.docView.nearest(t.target);if(!i)return;let r,o=1;if(i instanceof Ny)r=i.posAtStart;else{if(r=e.posAtCoords(t),r==null)return;let a=e.coordsAtPos(r);if(!a||t.y<a.top||t.y>a.bottom||t.x<a.left-e.defaultCharacterWidth||t.x>a.right+e.defaultCharacterWidth)return;let c=e.bidiSpans(e.state.doc.lineAt(r)).find(m=>m.from<=r&&m.to>=r),h=c&&c.dir==ol.RTL?-1:1;o=t.x<a.left?-h:h}let s=this.source(e,r,o);if(s?.then){let a=this.pending={pos:r};s.then(c=>{this.pending==a&&(this.pending=null,c&&!(Array.isArray(c)&&!c.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(c)?c:[c])}))},c=>Ih(e.state,c,"hover tooltip"))}else s&&!(Array.isArray(s)&&!s.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(s)?s:[s])})}get tooltip(){let e=this.view.plugin(HU),t=e?e.manager.tooltips.findIndex(i=>i.create==h6.create):-1;return t>-1?e.manager.tooltipViews[t]:null}mousemove(e){var t,i;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:r,tooltip:o}=this;if(r.length&&o&&!c3e(o.dom,e)||this.pending){let{pos:s}=r[0]||this.pending,a=(i=(t=r[0])===null||t===void 0?void 0:t.end)!==null&&i!==void 0?i:s;(s==a?this.view.posAtCoords(this.lastMove)!=s:!A3e(this.view,s,a,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:t}=this;if(t.length){let{tooltip:i}=this;i&&i.dom.contains(e.relatedTarget)?this.watchTooltipLeave(i.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let t=i=>{e.removeEventListener("mouseleave",t),this.active.length&&!this.view.dom.contains(i.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",t)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const xM=4;function c3e(n,e){let{left:t,right:i,top:r,bottom:o}=n.getBoundingClientRect(),s;if(s=n.querySelector(".cm-tooltip-arrow")){let a=s.getBoundingClientRect();r=Math.min(a.top,r),o=Math.max(a.bottom,o)}return e.clientX>=t-xM&&e.clientX<=i+xM&&e.clientY>=r-xM&&e.clientY<=o+xM}function A3e(n,e,t,i,r,o){let s=n.scrollDOM.getBoundingClientRect(),a=n.documentTop+n.documentPadding.top+n.contentHeight;if(s.left>i||s.right<i||s.top>r||Math.min(s.bottom,a)<r)return!1;let c=n.posAtCoords({x:i,y:r},!1);return c>=e&&c<=t}function h3e(n,e={}){let t=ro.define(),i=Oc.define({create(){return[]},update(r,o){if(r.length&&(e.hideOnChange&&(o.docChanged||o.selection)?r=[]:e.hideOn&&(r=r.filter(s=>!e.hideOn(o,s))),o.docChanged)){let s=[];for(let a of r){let c=o.changes.mapPos(a.pos,-1,Oh.TrackDel);if(c!=null){let h=Object.assign(Object.create(null),a);h.pos=c,h.end!=null&&(h.end=o.changes.mapPos(h.end)),s.push(h)}}r=s}for(let s of o.effects)s.is(t)&&(r=s.value),s.is(d3e)&&(r=[]);return r},provide:r=>xS.from(r)});return{active:i,extension:[i,xu.define(r=>new u3e(r,n,i,t,e.hoverTime||300)),l3e]}}function Qne(n,e){let t=n.plugin(HU);if(!t)return null;let i=t.manager.tooltips.indexOf(e);return i<0?null:t.manager.tooltipViews[i]}const d3e=ro.define(),JN=Bi.define({combine(n){let e,t;for(let i of n)e=e||i.topContainer,t=t||i.bottomContainer;return{topContainer:e,bottomContainer:t}}});function y4(n,e){let t=n.plugin(qne),i=t?t.specs.indexOf(e):-1;return i>-1?t.panels[i]:null}const qne=xu.fromClass(class{constructor(n){this.input=n.state.facet(v4),this.specs=this.input.filter(t=>t),this.panels=this.specs.map(t=>t(n));let e=n.state.facet(JN);this.top=new MM(n,!0,e.topContainer),this.bottom=new MM(n,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(n){let e=n.state.facet(JN);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new MM(n.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new MM(n.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let t=n.state.facet(v4);if(t!=this.input){let i=t.filter(c=>c),r=[],o=[],s=[],a=[];for(let c of i){let h=this.specs.indexOf(c),m;h<0?(m=c(n.view),a.push(m)):(m=this.panels[h],m.update&&m.update(n)),r.push(m),(m.top?o:s).push(m)}this.specs=i,this.panels=r,this.top.sync(o),this.bottom.sync(s);for(let c of a)c.dom.classList.add("cm-panel"),c.mount&&c.mount()}else for(let i of this.panels)i.update&&i.update(n)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:n=>Si.scrollMargins.of(e=>{let t=e.plugin(n);return t&&{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}})});class MM{constructor(e,t,i){this.view=e,this.top=t,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=eG(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=eG(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function eG(n){let e=n.nextSibling;return n.remove(),e}const v4=Bi.define({enables:qne});class i0 extends Gb{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}i0.prototype.elementClass="";i0.prototype.toDOM=void 0;i0.prototype.mapMode=Oh.TrackBefore;i0.prototype.startSide=i0.prototype.endSide=-1;i0.prototype.point=!0;const yw=Bi.define(),f3e=Bi.define(),p3e={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>Ho.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{},side:"before"},C3=Bi.define();function Yne(n){return[$ne(),C3.of({...p3e,...n})]}const tG=Bi.define({combine:n=>n.some(e=>e)});function $ne(n){return[m3e]}const m3e=xu.fromClass(class{constructor(n){this.view=n,this.domAfter=null,this.prevViewport=n.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=n.state.facet(C3).map(e=>new iG(n,e)),this.fixed=!n.state.facet(tG);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),n.scrollDOM.insertBefore(this.dom,n.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(n){if(this.updateGutters(n)){let e=this.prevViewport,t=n.view.viewport,i=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(i<(t.to-t.from)*.8)}if(n.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(tG)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=n.view.viewport}syncGutters(n){let e=this.dom.nextSibling;n&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let t=Ho.iter(this.view.state.facet(yw),this.view.viewport.from),i=[],r=this.gutters.map(o=>new g3e(o,this.view.viewport,-this.view.documentPadding.top));for(let o of this.view.viewportLineBlocks)if(i.length&&(i=[]),Array.isArray(o.type)){let s=!0;for(let a of o.type)if(a.type==kh.Text&&s){HR(t,i,a.from);for(let c of r)c.line(this.view,a,i);s=!1}else if(a.widget)for(let c of r)c.widget(this.view,a)}else if(o.type==kh.Text){HR(t,i,o.from);for(let s of r)s.line(this.view,o,i)}else if(o.widget)for(let s of r)s.widget(this.view,o);for(let o of r)o.finish();n&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(n){let e=n.startState.facet(C3),t=n.state.facet(C3),i=n.docChanged||n.heightChanged||n.viewportChanged||!Ho.eq(n.startState.facet(yw),n.state.facet(yw),n.view.viewport.from,n.view.viewport.to);if(e==t)for(let r of this.gutters)r.update(n)&&(i=!0);else{i=!0;let r=[];for(let o of t){let s=e.indexOf(o);s<0?r.push(new iG(this.view,o)):(this.gutters[s].update(n),r.push(this.gutters[s]))}for(let o of this.gutters)o.dom.remove(),r.indexOf(o)<0&&o.destroy();for(let o of r)o.config.side=="after"?this.getDOMAfter().appendChild(o.dom):this.dom.appendChild(o.dom);this.gutters=r}return i}destroy(){for(let n of this.gutters)n.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:n=>Si.scrollMargins.of(e=>{let t=e.plugin(n);if(!t||t.gutters.length==0||!t.fixed)return null;let i=t.dom.offsetWidth*e.scaleX,r=t.domAfter?t.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==ol.LTR?{left:i,right:r}:{right:i,left:r}})});function nG(n){return Array.isArray(n)?n:[n]}function HR(n,e,t){for(;n.value&&n.from<=t;)n.from==t&&e.push(n.value),n.next()}class g3e{constructor(e,t,i){this.gutter=e,this.height=i,this.i=0,this.cursor=Ho.iter(e.markers,t.from)}addElement(e,t,i){let{gutter:r}=this,o=(t.top-this.height)/e.scaleY,s=t.height/e.scaleY;if(this.i==r.elements.length){let a=new Vne(e,s,o,i);r.elements.push(a),r.dom.appendChild(a.dom)}else r.elements[this.i].update(e,s,o,i);this.height=t.bottom,this.i++}line(e,t,i){let r=[];HR(this.cursor,r,t.from),i.length&&(r=r.concat(i));let o=this.gutter.config.lineMarker(e,t,r);o&&r.unshift(o);let s=this.gutter;r.length==0&&!s.config.renderEmptyElements||this.addElement(e,t,r)}widget(e,t){let i=this.gutter.config.widgetMarker(e,t.widget,t),r=i?[i]:null;for(let o of e.state.facet(f3e)){let s=o(e,t.widget,t);s&&(r||(r=[])).push(s)}r&&this.addElement(e,t,r)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class iG{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in t.domEventHandlers)this.dom.addEventListener(i,r=>{let o=r.target,s;if(o!=this.dom&&this.dom.contains(o)){for(;o.parentNode!=this.dom;)o=o.parentNode;let c=o.getBoundingClientRect();s=(c.top+c.bottom)/2}else s=r.clientY;let a=e.lineBlockAtHeight(s-e.documentTop);t.domEventHandlers[i](e,a,r)&&r.preventDefault()});this.markers=nG(t.markers(e)),t.initialSpacer&&(this.spacer=new Vne(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=nG(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let r=this.config.updateSpacer(this.spacer.markers[0],e);r!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[r])}let i=e.view.viewport;return!Ho.eq(this.markers,t,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class Vne{constructor(e,t,i,r){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,i,r)}update(e,t,i,r){this.height!=t&&(this.height=t,this.dom.style.height=t+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),y3e(this.markers,r)||this.setMarkers(e,r)}setMarkers(e,t){let i="cm-gutterElement",r=this.dom.firstChild;for(let o=0,s=0;;){let a=s,c=o<t.length?t[o++]:null,h=!1;if(c){let m=c.elementClass;m&&(i+=" "+m);for(let y=s;y<this.markers.length;y++)if(this.markers[y].compare(c)){a=y,h=!0;break}}else a=this.markers.length;for(;s<a;){let m=this.markers[s++];if(m.toDOM){m.destroy(r);let y=r.nextSibling;r.remove(),r=y}}if(!c)break;c.toDOM&&(h?r=r.nextSibling:this.dom.insertBefore(c.toDOM(e),r)),h&&s++}this.dom.className=i,this.markers=t}destroy(){this.setMarkers(null,[])}}function y3e(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].compare(e[t]))return!1;return!0}const v3e=Bi.define(),b3e=Bi.define(),I_=Bi.define({combine(n){return Dm(n,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let i=Object.assign({},e);for(let r in t){let o=i[r],s=t[r];i[r]=o?(a,c,h)=>o(a,c,h)||s(a,c,h):s}return i}})}});class UB extends i0{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function KB(n,e){return n.state.facet(I_).formatNumber(e,n.state)}const C3e=C3.compute([I_],n=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(v3e)},lineMarker(e,t,i){return i.some(r=>r.toDOM)?null:new UB(KB(e,e.state.doc.lineAt(t.from).number))},widgetMarker:(e,t,i)=>{for(let r of e.state.facet(b3e)){let o=r(e,t,i);if(o)return o}return null},lineMarkerChange:e=>e.startState.facet(I_)!=e.state.facet(I_),initialSpacer(e){return new UB(KB(e,rG(e.state.doc.lines)))},updateSpacer(e,t){let i=KB(t.view,rG(t.view.state.doc.lines));return i==e.number?e:new UB(i)},domEventHandlers:n.facet(I_).domEventHandlers,side:"before"}));function _3e(n={}){return[I_.of(n),$ne(),C3e]}function rG(n){let e=9;for(;e<n;)e=e*10+9;return e}const x3e=new class extends i0{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},M3e=yw.compute(["selection"],n=>{let e=[],t=-1;for(let i of n.selection.ranges){let r=n.doc.lineAt(i.head).from;r>t&&(t=r,e.push(x3e.range(r)))}return Ho.of(e)});function w3e(){return M3e}const Hne=1024;let S3e=0;class LB{constructor(e,t){this.from=e,this.to=t}}class Bo{constructor(e={}){this.id=S3e++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Od.match(e)),t=>{let i=e(t);return i===void 0?null:[this,i]}}}Bo.closedBy=new Bo({deserialize:n=>n.split(" ")});Bo.openedBy=new Bo({deserialize:n=>n.split(" ")});Bo.group=new Bo({deserialize:n=>n.split(" ")});Bo.isolate=new Bo({deserialize:n=>{if(n&&n!="rtl"&&n!="ltr"&&n!="auto")throw new RangeError("Invalid value for isolate: "+n);return n||"auto"}});Bo.contextHash=new Bo({perNode:!0});Bo.lookAhead=new Bo({perNode:!0});Bo.mounted=new Bo({perNode:!0});class MS{constructor(e,t,i){this.tree=e,this.overlay=t,this.parser=i}static get(e){return e&&e.props&&e.props[Bo.mounted.id]}}const E3e=Object.create(null);class Od{constructor(e,t,i,r=0){this.name=e,this.props=t,this.id=i,this.flags=r}static define(e){let t=e.props&&e.props.length?Object.create(null):E3e,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),r=new Od(e.name||"",t,e.id,i);if(e.props){for(let o of e.props)if(Array.isArray(o)||(o=o(r)),o){if(o[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[o[0].id]=o[1]}}return r}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(Bo.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let i in e)for(let r of i.split(" "))t[r]=e[i];return i=>{for(let r=i.prop(Bo.group),o=-1;o<(r?r.length:0);o++){let s=t[o<0?i.name:r[o]];if(s)return s}}}}Od.none=new Od("",Object.create(null),0,8);class ZU{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let i of this.types){let r=null;for(let o of e){let s=o(i);s&&(r||(r=Object.assign({},i.props)),r[s[0].id]=s[1])}t.push(r?new Od(i.name,r,i.id,i.flags):i)}return new ZU(t)}}const wM=new WeakMap,oG=new WeakMap;var nA;(function(n){n[n.ExcludeBuffers=1]="ExcludeBuffers",n[n.IncludeAnonymous=2]="IncludeAnonymous",n[n.IgnoreMounts=4]="IgnoreMounts",n[n.IgnoreOverlays=8]="IgnoreOverlays"})(nA||(nA={}));class ec{constructor(e,t,i,r,o){if(this.type=e,this.children=t,this.positions=i,this.length=r,this.props=null,o&&o.length){this.props=Object.create(null);for(let[s,a]of o)this.props[typeof s=="number"?s:s.id]=a}}toString(){let e=MS.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let i of this.children){let r=i.toString();r&&(t&&(t+=","),t+=r)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new XR(this.topNode,e)}cursorAt(e,t=0,i=0){let r=wM.get(this)||this.topNode,o=new XR(r);return o.moveTo(e,t),wM.set(this,o._tree),o}get topNode(){return new Cp(this,0,0,null)}resolve(e,t=0){let i=b4(wM.get(this)||this.topNode,e,t,!1);return wM.set(this,i),i}resolveInner(e,t=0){let i=b4(oG.get(this)||this.topNode,e,t,!0);return oG.set(this,i),i}resolveStack(e,t=0){return I3e(this,e,t)}iterate(e){let{enter:t,leave:i,from:r=0,to:o=this.length}=e,s=e.mode||0,a=(s&nA.IncludeAnonymous)>0;for(let c=this.cursor(s|nA.IncludeAnonymous);;){let h=!1;if(c.from<=o&&c.to>=r&&(!a&&c.type.isAnonymous||t(c)!==!1)){if(c.firstChild())continue;h=!0}for(;h&&i&&(a||!c.type.isAnonymous)&&i(c),!c.nextSibling();){if(!c.parent())return;h=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:eK(Od.none,this.children,this.positions,0,this.children.length,0,this.length,(t,i,r)=>new ec(this.type,t,i,r,this.propValues),e.makeTree||((t,i,r)=>new ec(Od.none,t,i,r)))}static build(e){return k3e(e)}}ec.empty=new ec(Od.none,[],[],0);class XU{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new XU(this.buffer,this.index)}}class ov{constructor(e,t,i){this.buffer=e,this.length=t,this.set=i}get type(){return Od.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],i=this.buffer[e+3],r=this.set.types[t],o=r.name;if(/\W/.test(o)&&!r.isError&&(o=JSON.stringify(o)),e+=4,i==e)return o;let s=[];for(;e<i;)s.push(this.childString(e)),e=this.buffer[e+3];return o+"("+s.join(",")+")"}findChild(e,t,i,r,o){let{buffer:s}=this,a=-1;for(let c=e;c!=t&&!(Zne(o,r,s[c+1],s[c+2])&&(a=c,i>0));c=s[c+3]);return a}slice(e,t,i){let r=this.buffer,o=new Uint16Array(t-e),s=0;for(let a=e,c=0;a<t;){o[c++]=r[a++],o[c++]=r[a++]-i;let h=o[c++]=r[a++]-i;o[c++]=r[a++]-e,s=Math.max(s,h)}return new ov(o,s,this.set)}}function Zne(n,e,t,i){switch(n){case-2:return t<e;case-1:return i>=e&&t<e;case 0:return t<e&&i>e;case 1:return t<=e&&i>e;case 2:return i>e;case 4:return!0}}function b4(n,e,t,i){for(var r;n.from==n.to||(t<1?n.from>=e:n.from>e)||(t>-1?n.to<=e:n.to<e);){let s=!i&&n instanceof Cp&&n.index<0?null:n.parent;if(!s)return n;n=s}let o=i?0:nA.IgnoreOverlays;if(i)for(let s=n,a=s.parent;a;s=a,a=s.parent)s instanceof Cp&&s.index<0&&((r=a.enter(e,t,o))===null||r===void 0?void 0:r.from)!=s.from&&(n=a);for(;;){let s=n.enter(e,t,o);if(!s)return n;n=s}}class Xne{cursor(e=0){return new XR(this,e)}getChild(e,t=null,i=null){let r=sG(this,e,t,i);return r.length?r[0]:null}getChildren(e,t=null,i=null){return sG(this,e,t,i)}resolve(e,t=0){return b4(this,e,t,!1)}resolveInner(e,t=0){return b4(this,e,t,!0)}matchContext(e){return ZR(this.parent,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),i=this;for(;t;){let r=t.lastChild;if(!r||r.to!=t.to)break;r.type.isError&&r.from==r.to?(i=t,t=r.prevSibling):t=r}return i}get node(){return this}get next(){return this.parent}}class Cp extends Xne{constructor(e,t,i,r){super(),this._tree=e,this.from=t,this.index=i,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,i,r,o=0){for(let s=this;;){for(let{children:a,positions:c}=s._tree,h=t>0?a.length:-1;e!=h;e+=t){let m=a[e],y=c[e]+s.from;if(Zne(r,i,y,y+m.length)){if(m instanceof ov){if(o&nA.ExcludeBuffers)continue;let M=m.findChild(0,m.buffer.length,t,i-y,r);if(M>-1)return new Wy(new O3e(s,m,e,y),null,M)}else if(o&nA.IncludeAnonymous||!m.type.isAnonymous||JU(m)){let M;if(!(o&nA.IgnoreMounts)&&(M=MS.get(m))&&!M.overlay)return new Cp(M.tree,y,e,s);let x=new Cp(m,y,e,s);return o&nA.IncludeAnonymous||!x.type.isAnonymous?x:x.nextChild(t<0?m.children.length-1:0,t,i,r)}}}if(o&nA.IncludeAnonymous||!s.type.isAnonymous||(s.index>=0?e=s.index+t:e=t<0?-1:s._parent._tree.children.length,s=s._parent,!s))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,i=0){let r;if(!(i&nA.IgnoreOverlays)&&(r=MS.get(this._tree))&&r.overlay){let o=e-this.from;for(let{from:s,to:a}of r.overlay)if((t>0?s<=o:s<o)&&(t<0?a>=o:a>o))return new Cp(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function sG(n,e,t,i){let r=n.cursor(),o=[];if(!r.firstChild())return o;if(t!=null){for(let s=!1;!s;)if(s=r.type.is(t),!r.nextSibling())return o}for(;;){if(i!=null&&r.type.is(i))return o;if(r.type.is(e)&&o.push(r.node),!r.nextSibling())return i==null?o:[]}}function ZR(n,e,t=e.length-1){for(let i=n;t>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[t]&&e[t]!=i.name)return!1;t--}}return!0}class O3e{constructor(e,t,i,r){this.parent=e,this.buffer=t,this.index=i,this.start=r}}class Wy extends Xne{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,i){super(),this.context=e,this._parent=t,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}child(e,t,i){let{buffer:r}=this.context,o=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.context.start,i);return o<0?null:new Wy(this.context,this,o)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,i=0){if(i&nA.ExcludeBuffers)return null;let{buffer:r}=this.context,o=r.findChild(this.index+4,r.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return o<0?null:new Wy(this.context,this,o)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Wy(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new Wy(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:i}=this.context,r=this.index+4,o=i.buffer[this.index+3];if(o>r){let s=i.buffer[this.index+1];e.push(i.slice(r,o,s)),t.push(0)}return new ec(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function Jne(n){if(!n.length)return null;let e=0,t=n[0];for(let o=1;o<n.length;o++){let s=n[o];(s.from>t.from||s.to<t.to)&&(t=s,e=o)}let i=t instanceof Cp&&t.index<0?null:t.parent,r=n.slice();return i?r[e]=i:r.splice(e,1),new B3e(r,t)}class B3e{constructor(e,t){this.heads=e,this.node=t}get next(){return Jne(this.heads)}}function I3e(n,e,t){let i=n.resolveInner(e,t),r=null;for(let o=i instanceof Cp?i:i.context.parent;o;o=o.parent)if(o.index<0){let s=o.parent;(r||(r=[i])).push(s.resolve(e,t)),o=s}else{let s=MS.get(o.tree);if(s&&s.overlay&&s.overlay[0].from<=e&&s.overlay[s.overlay.length-1].to>=e){let a=new Cp(s.tree,s.overlay[0].from+o.from,-1,o);(r||(r=[i])).push(b4(a,e,t,!1))}}return r?Jne(r):i}class XR{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Cp)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:i,buffer:r}=this.buffer;return this.type=t||r.set.types[r.buffer[e]],this.from=i+r.buffer[e+1],this.to=i+r.buffer[e+2],!0}yield(e){return e?e instanceof Cp?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,i,this.mode));let{buffer:r}=this.buffer,o=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.buffer.start,i);return o<0?!1:(this.stack.push(this.index),this.yieldBuf(o))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,i=this.mode){return this.buffer?i&nA.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&nA.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&nA.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,i=this.stack.length-1;if(e<0){let r=i<0?0:this.stack[i]+4;if(this.index!=r)return this.yieldBuf(t.findChild(r,this.index,-1,0,4))}else{let r=t.buffer[this.index+3];if(r<(i<0?t.buffer.length:t.buffer[this.stack[i]+3]))return this.yieldBuf(r)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,i,{buffer:r}=this;if(r){if(e>0){if(this.index<r.buffer.buffer.length)return!1}else for(let o=0;o<this.index;o++)if(r.buffer.buffer[o+3]<this.index)return!1;({index:t,parent:i}=r)}else({index:t,_parent:i}=this._tree);for(;i;{index:t,_parent:i}=i)if(t>-1)for(let o=t+e,s=e<0?-1:i._tree.children.length;o!=s;o+=e){let a=i._tree.children[o];if(this.mode&nA.IncludeAnonymous||a instanceof ov||!a.type.isAnonymous||JU(a))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,i=0;if(e&&e.context==this.buffer)e:for(let r=this.index,o=this.stack.length;o>=0;){for(let s=e;s;s=s._parent)if(s.index==r){if(r==this.index)return s;t=s,i=o+1;break e}r=this.stack[--o]}for(let r=i;r<this.stack.length;r++)t=new Wy(this.buffer,t,this.stack[r]);return this.bufferNode=new Wy(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let i=0;;){let r=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(r=!0)}for(;;){if(r&&t&&t(this),r=this.type.isAnonymous,!i)return;if(this.nextSibling())break;this.parent(),i--,r=!0}}}matchContext(e){if(!this.buffer)return ZR(this.node.parent,e);let{buffer:t}=this.buffer,{types:i}=t.set;for(let r=e.length-1,o=this.stack.length-1;r>=0;o--){if(o<0)return ZR(this._tree,e,r);let s=i[t.buffer[this.stack[o]]];if(!s.isAnonymous){if(e[r]&&e[r]!=s.name)return!1;r--}}return!0}}function JU(n){return n.children.some(e=>e instanceof ov||!e.type.isAnonymous||JU(e))}function k3e(n){var e;let{buffer:t,nodeSet:i,maxBufferLength:r=Hne,reused:o=[],minRepeatType:s=i.types.length}=n,a=Array.isArray(t)?new XU(t,t.length):t,c=i.types,h=0,m=0;function y(Q,Y,z,se,le,pe){let{id:de,start:ve,end:Ee,size:Re}=a,je=m,Ie=h;for(;Re<0;)if(a.next(),Re==-1){let we=o[de];z.push(we),se.push(ve-Q);return}else if(Re==-3){h=de;return}else if(Re==-4){m=de;return}else throw new RangeError(`Unrecognized record size: ${Re}`);let qe=c[de],tt,At,ke=ve-Q;if(Ee-ve<=r&&(At=F(a.pos-Y,le))){let we=new Uint16Array(At.size-At.skip),ze=a.pos-At.size,Me=we.length;for(;a.pos>ze;)Me=j(At.start,we,Me);tt=new ov(we,Ee-At.start,i),ke=At.start-Q}else{let we=a.pos-Re;a.next();let ze=[],Me=[],lt=de>=s?de:-1,nt=0,bt=Ee;for(;a.pos>we;)lt>=0&&a.id==lt&&a.size>=0?(a.end<=bt-r&&(T(ze,Me,ve,nt,a.end,bt,lt,je,Ie),nt=ze.length,bt=a.end),a.next()):pe>2500?M(ve,we,ze,Me):y(ve,we,ze,Me,lt,pe+1);if(lt>=0&&nt>0&&nt<ze.length&&T(ze,Me,ve,nt,ve,bt,lt,je,Ie),ze.reverse(),Me.reverse(),lt>-1&&nt>0){let Bt=x(qe,Ie);tt=eK(qe,ze,Me,0,ze.length,0,Ee-ve,Bt,Bt)}else tt=P(qe,ze,Me,Ee-ve,je-Ee,Ie)}z.push(tt),se.push(ke)}function M(Q,Y,z,se){let le=[],pe=0,de=-1;for(;a.pos>Y;){let{id:ve,start:Ee,end:Re,size:je}=a;if(je>4)a.next();else{if(de>-1&&Ee<de)break;de<0&&(de=Re-r),le.push(ve,Ee,Re),pe++,a.next()}}if(pe){let ve=new Uint16Array(pe*4),Ee=le[le.length-2];for(let Re=le.length-3,je=0;Re>=0;Re-=3)ve[je++]=le[Re],ve[je++]=le[Re+1]-Ee,ve[je++]=le[Re+2]-Ee,ve[je++]=je;z.push(new ov(ve,le[2]-Ee,i)),se.push(Ee-Q)}}function x(Q,Y){return(z,se,le)=>{let pe=0,de=z.length-1,ve,Ee;if(de>=0&&(ve=z[de])instanceof ec){if(!de&&ve.type==Q&&ve.length==le)return ve;(Ee=ve.prop(Bo.lookAhead))&&(pe=se[de]+ve.length+Ee)}return P(Q,z,se,le,pe,Y)}}function T(Q,Y,z,se,le,pe,de,ve,Ee){let Re=[],je=[];for(;Q.length>se;)Re.push(Q.pop()),je.push(Y.pop()+z-le);Q.push(P(i.types[de],Re,je,pe-le,ve-pe,Ee)),Y.push(le-z)}function P(Q,Y,z,se,le,pe,de){if(pe){let ve=[Bo.contextHash,pe];de=de?[ve].concat(de):[ve]}if(le>25){let ve=[Bo.lookAhead,le];de=de?[ve].concat(de):[ve]}return new ec(Q,Y,z,se,de)}function F(Q,Y){let z=a.fork(),se=0,le=0,pe=0,de=z.end-r,ve={size:0,start:0,skip:0};e:for(let Ee=z.pos-Q;z.pos>Ee;){let Re=z.size;if(z.id==Y&&Re>=0){ve.size=se,ve.start=le,ve.skip=pe,pe+=4,se+=4,z.next();continue}let je=z.pos-Re;if(Re<0||je<Ee||z.start<de)break;let Ie=z.id>=s?4:0,qe=z.start;for(z.next();z.pos>je;){if(z.size<0)if(z.size==-3)Ie+=4;else break e;else z.id>=s&&(Ie+=4);z.next()}le=qe,se+=Re,pe+=Ie}return(Y<0||se==Q)&&(ve.size=se,ve.start=le,ve.skip=pe),ve.size>4?ve:void 0}function j(Q,Y,z){let{id:se,start:le,end:pe,size:de}=a;if(a.next(),de>=0&&se<s){let ve=z;if(de>4){let Ee=a.pos-(de-4);for(;a.pos>Ee;)z=j(Q,Y,z)}Y[--z]=ve,Y[--z]=pe-Q,Y[--z]=le-Q,Y[--z]=se}else de==-3?h=se:de==-4&&(m=se);return z}let q=[],V=[];for(;a.pos>0;)y(n.start||0,n.bufferStart||0,q,V,-1,0);let H=(e=n.length)!==null&&e!==void 0?e:q.length?V[0]+q[0].length:0;return new ec(c[n.topID],q.reverse(),V.reverse(),H)}const aG=new WeakMap;function vw(n,e){if(!n.isAnonymous||e instanceof ov||e.type!=n)return 1;let t=aG.get(e);if(t==null){t=1;for(let i of e.children){if(i.type!=n||!(i instanceof ec)){t=1;break}t+=vw(n,i)}aG.set(e,t)}return t}function eK(n,e,t,i,r,o,s,a,c){let h=0;for(let T=i;T<r;T++)h+=vw(n,e[T]);let m=Math.ceil(h*1.5/8),y=[],M=[];function x(T,P,F,j,q){for(let V=F;V<j;){let H=V,Q=P[V],Y=vw(n,T[V]);for(V++;V<j;V++){let z=vw(n,T[V]);if(Y+z>=m)break;Y+=z}if(V==H+1){if(Y>m){let z=T[H];x(z.children,z.positions,0,z.children.length,P[H]+q);continue}y.push(T[H])}else{let z=P[V-1]+T[V-1].length-Q;y.push(eK(n,T,P,H,V,Q,z,null,c))}M.push(Q+q-o)}}return x(e,t,i,r,0),(a||c)(y,M,s)}class kb{constructor(e,t,i,r,o=!1,s=!1){this.from=e,this.to=t,this.tree=i,this.offset=r,this.open=(o?1:0)|(s?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],i=!1){let r=[new kb(0,e.length,e,0,!1,i)];for(let o of t)o.to>e.length&&r.push(o);return r}static applyChanges(e,t,i=128){if(!t.length)return e;let r=[],o=1,s=e.length?e[0]:null;for(let a=0,c=0,h=0;;a++){let m=a<t.length?t[a]:null,y=m?m.fromA:1e9;if(y-c>=i)for(;s&&s.from<y;){let M=s;if(c>=M.from||y<=M.to||h){let x=Math.max(M.from,c)-h,T=Math.min(M.to,y)-h;M=x>=T?null:new kb(x,T,M.tree,M.offset+h,a>0,!!m)}if(M&&r.push(M),s.to>y)break;s=o<e.length?e[o++]:null}if(!m)break;c=m.toA,h=m.toA-m.toB}return r}}class eie{startParse(e,t,i){return typeof e=="string"&&(e=new T3e(e)),i=i?i.length?i.map(r=>new LB(r.from,r.to)):[new LB(0,0)]:[new LB(0,e.length)],this.createParse(e,t||[],i)}parse(e,t,i){let r=this.startParse(e,t,i);for(;;){let o=r.advance();if(o)return o}}}class T3e{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new Bo({perNode:!0});let R3e=0;class cp{constructor(e,t,i,r){this.name=e,this.set=t,this.base=i,this.modified=r,this.id=R3e++}toString(){let{name:e}=this;for(let t of this.modified)t.name&&(e=`${t.name}(${e})`);return e}static define(e,t){let i=typeof e=="string"?e:"?";if(e instanceof cp&&(t=e),t?.base)throw new Error("Can not derive from a modified tag");let r=new cp(i,[],null,[]);if(r.set.push(r),t)for(let o of t.set)r.set.push(o);return r}static defineModifier(e){let t=new wS(e);return i=>i.modified.indexOf(t)>-1?i:wS.get(i.base||i,i.modified.concat(t).sort((r,o)=>r.id-o.id))}}let D3e=0;class wS{constructor(e){this.name=e,this.instances=[],this.id=D3e++}static get(e,t){if(!t.length)return e;let i=t[0].instances.find(a=>a.base==e&&P3e(t,a.modified));if(i)return i;let r=[],o=new cp(e.name,r,e,t);for(let a of t)a.instances.push(o);let s=U3e(t);for(let a of e.set)if(!a.modified.length)for(let c of s)r.push(wS.get(a,c));return o}}function P3e(n,e){return n.length==e.length&&n.every((t,i)=>t==e[i])}function U3e(n){let e=[[]];for(let t=0;t<n.length;t++)for(let i=0,r=e.length;i<r;i++)e.push(e[i].concat(n[t]));return e.sort((t,i)=>i.length-t.length)}function tie(n){let e=Object.create(null);for(let t in n){let i=n[t];Array.isArray(i)||(i=[i]);for(let r of t.split(" "))if(r){let o=[],s=2,a=r;for(let y=0;;){if(a=="..."&&y>0&&y+3==r.length){s=1;break}let M=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(a);if(!M)throw new RangeError("Invalid path: "+r);if(o.push(M[0]=="*"?"":M[0][0]=='"'?JSON.parse(M[0]):M[0]),y+=M[0].length,y==r.length)break;let x=r[y++];if(y==r.length&&x=="!"){s=0;break}if(x!="/")throw new RangeError("Invalid path: "+r);a=r.slice(y)}let c=o.length-1,h=o[c];if(!h)throw new RangeError("Invalid path: "+r);let m=new SS(i,s,c>0?o.slice(0,c):null);e[h]=m.sort(e[h])}}return nie.add(e)}const nie=new Bo;class SS{constructor(e,t,i,r){this.tags=e,this.mode=t,this.context=i,this.next=r}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}SS.empty=new SS([],2,null);function iie(n,e){let t=Object.create(null);for(let o of n)if(!Array.isArray(o.tag))t[o.tag.id]=o.class;else for(let s of o.tag)t[s.id]=o.class;let{scope:i,all:r=null}=e||{};return{style:o=>{let s=r;for(let a of o)for(let c of a.set){let h=t[c.id];if(h){s=s?s+" "+h:h;break}}return s},scope:i}}function K3e(n,e){let t=null;for(let i of n){let r=i.style(e);r&&(t=t?t+" "+r:r)}return t}function L3e(n,e,t,i=0,r=n.length){let o=new F3e(i,Array.isArray(e)?e:[e],t);o.highlightRange(n.cursor(),i,r,"",o.highlighters),o.flush(r)}class F3e{constructor(e,t,i){this.at=e,this.highlighters=t,this.span=i,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,i,r,o){let{type:s,from:a,to:c}=e;if(a>=i||c<=t)return;s.isTop&&(o=this.highlighters.filter(x=>!x.scope||x.scope(s)));let h=r,m=z3e(e)||SS.empty,y=K3e(o,m.tags);if(y&&(h&&(h+=" "),h+=y,m.mode==1&&(r+=(r?" ":"")+y)),this.startSpan(Math.max(t,a),h),m.opaque)return;let M=e.tree&&e.tree.prop(Bo.mounted);if(M&&M.overlay){let x=e.node.enter(M.overlay[0].from+a,1),T=this.highlighters.filter(F=>!F.scope||F.scope(M.tree.type)),P=e.firstChild();for(let F=0,j=a;;F++){let q=F<M.overlay.length?M.overlay[F]:null,V=q?q.from+a:c,H=Math.max(t,j),Q=Math.min(i,V);if(H<Q&&P)for(;e.from<Q&&(this.highlightRange(e,H,Q,r,o),this.startSpan(Math.min(Q,e.to),h),!(e.to>=V||!e.nextSibling())););if(!q||V>i)break;j=q.to+a,j>t&&(this.highlightRange(x.cursor(),Math.max(t,q.from+a),Math.min(i,j),"",T),this.startSpan(Math.min(i,j),h))}P&&e.parent()}else if(e.firstChild()){M&&(r="");do if(!(e.to<=t)){if(e.from>=i)break;this.highlightRange(e,t,i,r,o),this.startSpan(Math.min(i,e.to),h)}while(e.nextSibling());e.parent()}}}function z3e(n){let e=n.type.prop(nie);for(;e&&e.context&&!n.matchContext(e.context);)e=e.next;return e||null}const ci=cp.define,SM=ci(),Oy=ci(),lG=ci(Oy),uG=ci(Oy),By=ci(),EM=ci(By),FB=ci(By),wg=ci(),nb=ci(wg),xg=ci(),Mg=ci(),JR=ci(),_2=ci(JR),OM=ci(),un={comment:SM,lineComment:ci(SM),blockComment:ci(SM),docComment:ci(SM),name:Oy,variableName:ci(Oy),typeName:lG,tagName:ci(lG),propertyName:uG,attributeName:ci(uG),className:ci(Oy),labelName:ci(Oy),namespace:ci(Oy),macroName:ci(Oy),literal:By,string:EM,docString:ci(EM),character:ci(EM),attributeValue:ci(EM),number:FB,integer:ci(FB),float:ci(FB),bool:ci(By),regexp:ci(By),escape:ci(By),color:ci(By),url:ci(By),keyword:xg,self:ci(xg),null:ci(xg),atom:ci(xg),unit:ci(xg),modifier:ci(xg),operatorKeyword:ci(xg),controlKeyword:ci(xg),definitionKeyword:ci(xg),moduleKeyword:ci(xg),operator:Mg,derefOperator:ci(Mg),arithmeticOperator:ci(Mg),logicOperator:ci(Mg),bitwiseOperator:ci(Mg),compareOperator:ci(Mg),updateOperator:ci(Mg),definitionOperator:ci(Mg),typeOperator:ci(Mg),controlOperator:ci(Mg),punctuation:JR,separator:ci(JR),bracket:_2,angleBracket:ci(_2),squareBracket:ci(_2),paren:ci(_2),brace:ci(_2),content:wg,heading:nb,heading1:ci(nb),heading2:ci(nb),heading3:ci(nb),heading4:ci(nb),heading5:ci(nb),heading6:ci(nb),contentSeparator:ci(wg),list:ci(wg),quote:ci(wg),emphasis:ci(wg),strong:ci(wg),link:ci(wg),monospace:ci(wg),strikethrough:ci(wg),inserted:ci(),deleted:ci(),changed:ci(),invalid:ci(),meta:OM,documentMeta:ci(OM),annotation:ci(OM),processingInstruction:ci(OM),definition:cp.defineModifier("definition"),constant:cp.defineModifier("constant"),function:cp.defineModifier("function"),standard:cp.defineModifier("standard"),local:cp.defineModifier("local"),special:cp.defineModifier("special")};for(let n in un){let e=un[n];e instanceof cp&&(e.name=n)}iie([{tag:un.link,class:"tok-link"},{tag:un.heading,class:"tok-heading"},{tag:un.emphasis,class:"tok-emphasis"},{tag:un.strong,class:"tok-strong"},{tag:un.keyword,class:"tok-keyword"},{tag:un.atom,class:"tok-atom"},{tag:un.bool,class:"tok-bool"},{tag:un.url,class:"tok-url"},{tag:un.labelName,class:"tok-labelName"},{tag:un.inserted,class:"tok-inserted"},{tag:un.deleted,class:"tok-deleted"},{tag:un.literal,class:"tok-literal"},{tag:un.string,class:"tok-string"},{tag:un.number,class:"tok-number"},{tag:[un.regexp,un.escape,un.special(un.string)],class:"tok-string2"},{tag:un.variableName,class:"tok-variableName"},{tag:un.local(un.variableName),class:"tok-variableName tok-local"},{tag:un.definition(un.variableName),class:"tok-variableName tok-definition"},{tag:un.special(un.variableName),class:"tok-variableName2"},{tag:un.definition(un.propertyName),class:"tok-propertyName tok-definition"},{tag:un.typeName,class:"tok-typeName"},{tag:un.namespace,class:"tok-namespace"},{tag:un.className,class:"tok-className"},{tag:un.macroName,class:"tok-macroName"},{tag:un.propertyName,class:"tok-propertyName"},{tag:un.operator,class:"tok-operator"},{tag:un.comment,class:"tok-comment"},{tag:un.meta,class:"tok-meta"},{tag:un.invalid,class:"tok-invalid"},{tag:un.punctuation,class:"tok-punctuation"}]);var zB;const k_=new Bo;function j3e(n){return Bi.define({combine:n?e=>e.concat(n):void 0})}const N3e=new Bo;class _m{constructor(e,t,i=[],r=""){this.data=e,this.name=r,ps.prototype.hasOwnProperty("tree")||Object.defineProperty(ps.prototype,"tree",{get(){return $A(this)}}),this.parser=t,this.extension=[sv.of(this),ps.languageData.of((o,s,a)=>{let c=cG(o,s,a),h=c.type.prop(k_);if(!h)return[];let m=o.facet(h),y=c.type.prop(N3e);if(y){let M=c.resolve(s-c.from,a);for(let x of y)if(x.test(M,o)){let T=o.facet(x.facet);return x.type=="replace"?T:T.concat(m)}}return m})].concat(i)}isActiveAt(e,t,i=-1){return cG(e,t,i).type.prop(k_)==this.data}findRegions(e){let t=e.facet(sv);if(t?.data==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let i=[],r=(o,s)=>{if(o.prop(k_)==this.data){i.push({from:s,to:s+o.length});return}let a=o.prop(Bo.mounted);if(a){if(a.tree.prop(k_)==this.data){if(a.overlay)for(let c of a.overlay)i.push({from:c.from+s,to:c.to+s});else i.push({from:s,to:s+o.length});return}else if(a.overlay){let c=i.length;if(r(a.tree,a.overlay[0].from+s),i.length>c)return}}for(let c=0;c<o.children.length;c++){let h=o.children[c];h instanceof ec&&r(h,o.positions[c]+s)}};return r($A(e),0),i}get allowsNesting(){return!0}}_m.setState=ro.define();function cG(n,e,t){let i=n.facet(sv),r=$A(n).topNode;if(!i||i.allowsNesting)for(let o=r;o;o=o.enter(e,t,nA.ExcludeBuffers))o.type.isTop&&(r=o);return r}class ES extends _m{constructor(e,t,i){super(e,t,[],i),this.parser=t}static define(e){let t=j3e(e.languageData);return new ES(t,e.parser.configure({props:[k_.add(i=>i.isTop?t:void 0)]}),e.name)}configure(e,t){return new ES(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function $A(n){let e=n.field(_m.state,!1);return e?e.tree:ec.empty}class G3e{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let i=this.cursorPos-this.string.length;return e<i||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-i,t-i)}}let x2=null;class OS{constructor(e,t,i=[],r,o,s,a,c){this.parser=e,this.state=t,this.fragments=i,this.tree=r,this.treeLen=o,this.viewport=s,this.skipped=a,this.scheduleOn=c,this.parse=null,this.tempSkipped=[]}static create(e,t,i){return new OS(e,t,[],ec.empty,0,i,[],null)}startParse(){return this.parser.startParse(new G3e(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=ec.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let r=Date.now()+e;e=()=>Date.now()>r}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let r=this.parse.advance();if(r)if(this.fragments=this.withoutTempSkipped(kb.addTree(r,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=r,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(kb.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=x2;x2=this;try{return e()}finally{x2=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=AG(e,t.from,t.to);return e}changes(e,t){let{fragments:i,tree:r,treeLen:o,viewport:s,skipped:a}=this;if(this.takeTree(),!e.empty){let c=[];if(e.iterChangedRanges((h,m,y,M)=>c.push({fromA:h,toA:m,fromB:y,toB:M})),i=kb.applyChanges(i,c),r=ec.empty,o=0,s={from:e.mapPos(s.from,-1),to:e.mapPos(s.to,1)},this.skipped.length){a=[];for(let h of this.skipped){let m=e.mapPos(h.from,1),y=e.mapPos(h.to,-1);m<y&&a.push({from:m,to:y})}}}return new OS(this.parser,t,i,r,o,s,a,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:r,to:o}=this.skipped[i];r<e.to&&o>e.from&&(this.fragments=AG(this.fragments,r,o),this.skipped.splice(i--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends eie{createParse(t,i,r){let o=r[0].from,s=r[r.length-1].to;return{parsedPos:o,advance(){let c=x2;if(c){for(let h of r)c.tempSkipped.push(h);e&&(c.scheduleOn=c.scheduleOn?Promise.all([c.scheduleOn,e]):e)}return this.parsedPos=s,new ec(Od.none,[],[],s-o)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return x2}}function AG(n,e,t){return kb.applyChanges(n,[{fromA:e,toA:t,fromB:e,toB:t}])}class xx{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,i)||t.takeTree(),new xx(t)}static init(e){let t=Math.min(3e3,e.doc.length),i=OS.create(e.facet(sv).parser,e,{from:0,to:t});return i.work(20,t)||i.takeTree(),new xx(i)}}_m.state=Oc.define({create:xx.init,update(n,e){for(let t of e.effects)if(t.is(_m.setState))return t.value;return e.startState.facet(sv)!=e.state.facet(sv)?xx.init(e.state):n.apply(e)}});let rie=n=>{let e=setTimeout(()=>n(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(rie=n=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(n,{timeout:400})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const jB=typeof navigator<"u"&&(!((zB=navigator.scheduling)===null||zB===void 0)&&zB.isInputPending)?()=>navigator.scheduling.isInputPending():null,W3e=xu.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(_m.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(_m.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=rie(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:r}}=this.view,o=i.field(_m.state);if(o.tree==o.context.tree&&o.context.isDone(r+1e5))return;let s=Date.now()+Math.min(this.chunkBudget,100,e&&!jB?Math.max(25,e.timeRemaining()-5):1e9),a=o.context.treeLen<r&&i.doc.length>r+1e3,c=o.context.work(()=>jB&&jB()||Date.now()>s,r+(a?0:1e5));this.chunkBudget-=Date.now()-t,(c||this.chunkBudget<=0)&&(o.context.takeTree(),this.view.dispatch({effects:_m.setState.of(new xx(o.context))})),this.chunkBudget>0&&!(c&&!a)&&this.scheduleWork(),this.checkAsyncSchedule(o.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>Ih(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),sv=Bi.define({combine(n){return n.length?n[0]:null},enables:n=>[_m.state,W3e,Si.contentAttributes.compute([n],e=>{let t=e.facet(n);return t&&t.name?{"data-language":t.name}:{}})]});class Q3e{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}const q3e=Bi.define(),tK=Bi.define({combine:n=>{if(!n.length)return"  ";let e=n[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(n[0]));return e}});function BS(n){let e=n.facet(tK);return e.charCodeAt(0)==9?n.tabSize*e.length:e.length}function C4(n,e){let t="",i=n.tabSize,r=n.facet(tK)[0];if(r=="	"){for(;e>=i;)t+="	",e-=i;r=" "}for(let o=0;o<e;o++)t+=r;return t}function nK(n,e){n instanceof ps&&(n=new d6(n));for(let i of n.state.facet(q3e)){let r=i(n,e);if(r!==void 0)return r}let t=$A(n.state);return t.length>=e?Y3e(n,t,e):null}class d6{constructor(e,t={}){this.state=e,this.options=t,this.unit=BS(e)}lineAt(e,t=1){let i=this.state.doc.lineAt(e),{simulateBreak:r,simulateDoubleBreak:o}=this.options;return r!=null&&r>=i.from&&r<=i.to?o&&r==e?{text:"",from:e}:(t<0?r<e:r<=e)?{text:i.text.slice(r-i.from),from:r}:{text:i.text.slice(0,r-i.from),from:i.from}:i}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:r}=this.lineAt(e,t);return i.slice(e-r,Math.min(i.length,e+100-r))}column(e,t=1){let{text:i,from:r}=this.lineAt(e,t),o=this.countColumn(i,e-r),s=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return s>-1&&(o+=s-this.countColumn(i,i.search(/\S|$/))),o}countColumn(e,t=e.length){return Nx(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:i,from:r}=this.lineAt(e,t),o=this.options.overrideIndentation;if(o){let s=o(r);if(s>-1)return s}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const oie=new Bo;function Y3e(n,e,t){let i=e.resolveStack(t),r=e.resolveInner(t,-1).resolve(t,0).enterUnfinishedNodesBefore(t);if(r!=i.node){let o=[];for(let s=r;s&&!(s.from<i.node.from||s.to>i.node.to||s.from==i.node.from&&s.type==i.node.type);s=s.parent)o.push(s);for(let s=o.length-1;s>=0;s--)i={node:o[s],next:i}}return sie(i,n,t)}function sie(n,e,t){for(let i=n;i;i=i.next){let r=V3e(i.node);if(r)return r(iK.create(e,t,i))}return 0}function $3e(n){return n.pos==n.options.simulateBreak&&n.options.simulateDoubleBreak}function V3e(n){let e=n.type.prop(oie);if(e)return e;let t=n.firstChild,i;if(t&&(i=t.type.prop(Bo.closedBy))){let r=n.lastChild,o=r&&i.indexOf(r.name)>-1;return s=>J3e(s,!0,1,void 0,o&&!$3e(s)?r.from:void 0)}return n.parent==null?H3e:null}function H3e(){return 0}class iK extends d6{constructor(e,t,i){super(e.state,e.options),this.base=e,this.pos=t,this.context=i}get node(){return this.context.node}static create(e,t,i){return new iK(e,t,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let i=e.resolve(t.from);for(;i.parent&&i.parent.from==i.from;)i=i.parent;if(Z3e(i,e))break;t=this.state.doc.lineAt(i.from)}return this.lineIndent(t.from)}continue(){return sie(this.context.next,this.base,this.pos)}}function Z3e(n,e){for(let t=e;t;t=t.parent)if(n==t)return!0;return!1}function X3e(n){let e=n.node,t=e.childAfter(e.from),i=e.lastChild;if(!t)return null;let r=n.options.simulateBreak,o=n.state.doc.lineAt(t.from),s=r==null||r<=o.from?o.to:Math.min(o.to,r);for(let a=t.to;;){let c=e.childAfter(a);if(!c||c==i)return null;if(!c.type.isSkipped){if(c.from>=s)return null;let h=/^ */.exec(o.text.slice(t.to-o.from))[0].length;return{from:t.from,to:t.to+h}}a=c.to}}function J3e(n,e,t,i,r){let o=n.textAfter,s=o.match(/^\s*/)[0].length,a=i&&o.slice(s,s+i.length)==i||r==n.pos+s,c=X3e(n);return c?a?n.column(c.from):n.column(c.to):n.baseIndent+(a?0:n.unit*t)}function hG({except:n,units:e=1}={}){return t=>{let i=n&&n.test(t.textAfter);return t.baseIndent+(i?0:e*t.unit)}}const e4e=200;function t4e(){return ps.transactionFilter.of(n=>{if(!n.docChanged||!n.isUserEvent("input.type")&&!n.isUserEvent("input.complete"))return n;let e=n.startState.languageDataAt("indentOnInput",n.startState.selection.main.head);if(!e.length)return n;let t=n.newDoc,{head:i}=n.newSelection.main,r=t.lineAt(i);if(i>r.from+e4e)return n;let o=t.sliceString(r.from,i);if(!e.some(h=>h.test(o)))return n;let{state:s}=n,a=-1,c=[];for(let{head:h}of s.selection.ranges){let m=s.doc.lineAt(h);if(m.from==a)continue;a=m.from;let y=nK(s,m.from);if(y==null)continue;let M=/^\s*/.exec(m.text)[0],x=C4(s,y);M!=x&&c.push({from:m.from,to:m.from+M.length,insert:x})}return c.length?[n,{changes:c,sequential:!0}]:n})}const n4e=Bi.define(),aie=new Bo;function i4e(n){let e=n.firstChild,t=n.lastChild;return e&&e.to<t.from?{from:e.to,to:t.type.isError?n.to:t.from}:null}function r4e(n,e,t){let i=$A(n);if(i.length<t)return null;let r=i.resolveStack(t,1),o=null;for(let s=r;s;s=s.next){let a=s.node;if(a.to<=t||a.from>t)continue;if(o&&a.from<e)break;let c=a.type.prop(aie);if(c&&(a.to<i.length-50||i.length==n.doc.length||!o4e(a))){let h=c(a,n);h&&h.from<=t&&h.from>=e&&h.to>t&&(o=h)}}return o}function o4e(n){let e=n.lastChild;return e&&e.to==n.to&&e.type.isError}function IS(n,e,t){for(let i of n.facet(n4e)){let r=i(n,e,t);if(r)return r}return r4e(n,e,t)}function lie(n,e){let t=e.mapPos(n.from,1),i=e.mapPos(n.to,-1);return t>=i?void 0:{from:t,to:i}}const f6=ro.define({map:lie}),C5=ro.define({map:lie});function uie(n){let e=[];for(let{head:t}of n.state.selection.ranges)e.some(i=>i.from<=t&&i.to>=t)||e.push(n.lineBlockAt(t));return e}const Yb=Oc.define({create(){return Or.none},update(n,e){e.isUserEvent("delete")&&e.changes.iterChangedRanges((t,i)=>n=dG(n,t,i)),n=n.map(e.changes);for(let t of e.effects)if(t.is(f6)&&!s4e(n,t.value.from,t.value.to)){let{preparePlaceholder:i}=e.state.facet(hie),r=i?Or.replace({widget:new d4e(i(e.state,t.value))}):fG;n=n.update({add:[r.range(t.value.from,t.value.to)]})}else t.is(C5)&&(n=n.update({filter:(i,r)=>t.value.from!=i||t.value.to!=r,filterFrom:t.value.from,filterTo:t.value.to}));return e.selection&&(n=dG(n,e.selection.main.head)),n},provide:n=>Si.decorations.from(n),toJSON(n,e){let t=[];return n.between(0,e.doc.length,(i,r)=>{t.push(i,r)}),t},fromJSON(n){if(!Array.isArray(n)||n.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let t=0;t<n.length;){let i=n[t++],r=n[t++];if(typeof i!="number"||typeof r!="number")throw new RangeError("Invalid JSON for fold state");e.push(fG.range(i,r))}return Or.set(e,!0)}});function dG(n,e,t=e){let i=!1;return n.between(e,t,(r,o)=>{r<t&&o>e&&(i=!0)}),i?n.update({filterFrom:e,filterTo:t,filter:(r,o)=>r>=t||o<=e}):n}function kS(n,e,t){var i;let r=null;return(i=n.field(Yb,!1))===null||i===void 0||i.between(e,t,(o,s)=>{(!r||r.from>o)&&(r={from:o,to:s})}),r}function s4e(n,e,t){let i=!1;return n.between(e,e,(r,o)=>{r==e&&o==t&&(i=!0)}),i}function cie(n,e){return n.field(Yb,!1)?e:e.concat(ro.appendConfig.of(die()))}const a4e=n=>{for(let e of uie(n)){let t=IS(n.state,e.from,e.to);if(t)return n.dispatch({effects:cie(n.state,[f6.of(t),Aie(n,t)])}),!0}return!1},l4e=n=>{if(!n.state.field(Yb,!1))return!1;let e=[];for(let t of uie(n)){let i=kS(n.state,t.from,t.to);i&&e.push(C5.of(i),Aie(n,i,!1))}return e.length&&n.dispatch({effects:e}),e.length>0};function Aie(n,e,t=!0){let i=n.state.doc.lineAt(e.from).number,r=n.state.doc.lineAt(e.to).number;return Si.announce.of(`${n.state.phrase(t?"Folded lines":"Unfolded lines")} ${i} ${n.state.phrase("to")} ${r}.`)}const u4e=n=>{let{state:e}=n,t=[];for(let i=0;i<e.doc.length;){let r=n.lineBlockAt(i),o=IS(e,r.from,r.to);o&&t.push(f6.of(o)),i=(o?n.lineBlockAt(o.to):r).to+1}return t.length&&n.dispatch({effects:cie(n.state,t)}),!!t.length},c4e=n=>{let e=n.state.field(Yb,!1);if(!e||!e.size)return!1;let t=[];return e.between(0,n.state.doc.length,(i,r)=>{t.push(C5.of({from:i,to:r}))}),n.dispatch({effects:t}),!0},A4e=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:a4e},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:l4e},{key:"Ctrl-Alt-[",run:u4e},{key:"Ctrl-Alt-]",run:c4e}],h4e={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},hie=Bi.define({combine(n){return Dm(n,h4e)}});function die(n){return[Yb,m4e]}function fie(n,e){let{state:t}=n,i=t.facet(hie),r=s=>{let a=n.lineBlockAt(n.posAtDOM(s.target)),c=kS(n.state,a.from,a.to);c&&n.dispatch({effects:C5.of(c)}),s.preventDefault()};if(i.placeholderDOM)return i.placeholderDOM(n,r,e);let o=document.createElement("span");return o.textContent=i.placeholderText,o.setAttribute("aria-label",t.phrase("folded code")),o.title=t.phrase("unfold"),o.className="cm-foldPlaceholder",o.onclick=r,o}const fG=Or.replace({widget:new class extends cv{toDOM(n){return fie(n,null)}}});class d4e extends cv{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return fie(e,this.value)}}const f4e={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class NB extends i0{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}function p4e(n={}){let e={...f4e,...n},t=new NB(e,!0),i=new NB(e,!1),r=xu.fromClass(class{constructor(s){this.from=s.viewport.from,this.markers=this.buildMarkers(s)}update(s){(s.docChanged||s.viewportChanged||s.startState.facet(sv)!=s.state.facet(sv)||s.startState.field(Yb,!1)!=s.state.field(Yb,!1)||$A(s.startState)!=$A(s.state)||e.foldingChanged(s))&&(this.markers=this.buildMarkers(s.view))}buildMarkers(s){let a=new f1;for(let c of s.viewportLineBlocks){let h=kS(s.state,c.from,c.to)?i:IS(s.state,c.from,c.to)?t:null;h&&a.add(c.from,c.from,h)}return a.finish()}}),{domEventHandlers:o}=e;return[r,Yne({class:"cm-foldGutter",markers(s){var a;return((a=s.plugin(r))===null||a===void 0?void 0:a.markers)||Ho.empty},initialSpacer(){return new NB(e,!1)},domEventHandlers:{...o,click:(s,a,c)=>{if(o.click&&o.click(s,a,c))return!0;let h=kS(s.state,a.from,a.to);if(h)return s.dispatch({effects:C5.of(h)}),!0;let m=IS(s.state,a.from,a.to);return m?(s.dispatch({effects:f6.of(m)}),!0):!1}}}),die()]}const m4e=Si.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class _5{constructor(e,t){this.specs=e;let i;function r(a){let c=nv.newName();return(i||(i=Object.create(null)))["."+c]=a,c}const o=typeof t.all=="string"?t.all:t.all?r(t.all):void 0,s=t.scope;this.scope=s instanceof _m?a=>a.prop(k_)==s.data:s?a=>a==s:void 0,this.style=iie(e.map(a=>({tag:a.tag,class:a.class||r(Object.assign({},a,{tag:null}))})),{all:o}).style,this.module=i?new nv(i):null,this.themeType=t.themeType}static define(e,t){return new _5(e,t||{})}}const eD=Bi.define(),pie=Bi.define({combine(n){return n.length?[n[0]]:null}});function GB(n){let e=n.facet(eD);return e.length?e:n.facet(pie)}function mie(n,e){let t=[y4e],i;return n instanceof _5&&(n.module&&t.push(Si.styleModule.of(n.module)),i=n.themeType),e?.fallback?t.push(pie.of(n)):i?t.push(eD.computeN([Si.darkTheme],r=>r.facet(Si.darkTheme)==(i=="dark")?[n]:[])):t.push(eD.of(n)),t}class g4e{constructor(e){this.markCache=Object.create(null),this.tree=$A(e.state),this.decorations=this.buildDeco(e,GB(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=$A(e.state),i=GB(e.state),r=i!=GB(e.startState),{viewport:o}=e.view,s=e.changes.mapPos(this.decoratedTo,1);t.length<o.to&&!r&&t.type==this.tree.type&&s>=o.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=s):(t!=this.tree||e.viewportChanged||r)&&(this.tree=t,this.decorations=this.buildDeco(e.view,i),this.decoratedTo=o.to)}buildDeco(e,t){if(!t||!this.tree.length)return Or.none;let i=new f1;for(let{from:r,to:o}of e.visibleRanges)L3e(this.tree,t,(s,a,c)=>{i.add(s,a,this.markCache[c]||(this.markCache[c]=Or.mark({class:c})))},r,o);return i.finish()}}const y4e=nC.high(xu.fromClass(g4e,{decorations:n=>n.decorations})),v4e=_5.define([{tag:un.meta,color:"#404740"},{tag:un.link,textDecoration:"underline"},{tag:un.heading,textDecoration:"underline",fontWeight:"bold"},{tag:un.emphasis,fontStyle:"italic"},{tag:un.strong,fontWeight:"bold"},{tag:un.strikethrough,textDecoration:"line-through"},{tag:un.keyword,color:"#708"},{tag:[un.atom,un.bool,un.url,un.contentSeparator,un.labelName],color:"#219"},{tag:[un.literal,un.inserted],color:"#164"},{tag:[un.string,un.deleted],color:"#a11"},{tag:[un.regexp,un.escape,un.special(un.string)],color:"#e40"},{tag:un.definition(un.variableName),color:"#00f"},{tag:un.local(un.variableName),color:"#30a"},{tag:[un.typeName,un.namespace],color:"#085"},{tag:un.className,color:"#167"},{tag:[un.special(un.variableName),un.macroName],color:"#256"},{tag:un.definition(un.propertyName),color:"#00c"},{tag:un.comment,color:"#940"},{tag:un.invalid,color:"#f00"}]),b4e=Si.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),gie=1e4,yie="()[]{}",vie=Bi.define({combine(n){return Dm(n,{afterCursor:!0,brackets:yie,maxScanDistance:gie,renderMatch:x4e})}}),C4e=Or.mark({class:"cm-matchingBracket"}),_4e=Or.mark({class:"cm-nonmatchingBracket"});function x4e(n){let e=[],t=n.matched?C4e:_4e;return e.push(t.range(n.start.from,n.start.to)),n.end&&e.push(t.range(n.end.from,n.end.to)),e}const M4e=Oc.define({create(){return Or.none},update(n,e){if(!e.docChanged&&!e.selection)return n;let t=[],i=e.state.facet(vie);for(let r of e.state.selection.ranges){if(!r.empty)continue;let o=Ng(e.state,r.head,-1,i)||r.head>0&&Ng(e.state,r.head-1,1,i)||i.afterCursor&&(Ng(e.state,r.head,1,i)||r.head<e.state.doc.length&&Ng(e.state,r.head+1,-1,i));o&&(t=t.concat(i.renderMatch(o,e.state)))}return Or.set(t,!0)},provide:n=>Si.decorations.from(n)}),w4e=[M4e,b4e];function S4e(n={}){return[vie.of(n),w4e]}const E4e=new Bo;function tD(n,e,t){let i=n.prop(e<0?Bo.openedBy:Bo.closedBy);if(i)return i;if(n.name.length==1){let r=t.indexOf(n.name);if(r>-1&&r%2==(e<0?1:0))return[t[r+e]]}return null}function nD(n){let e=n.type.prop(E4e);return e?e(n.node):n}function Ng(n,e,t,i={}){let r=i.maxScanDistance||gie,o=i.brackets||yie,s=$A(n),a=s.resolveInner(e,t);for(let c=a;c;c=c.parent){let h=tD(c.type,t,o);if(h&&c.from<c.to){let m=nD(c);if(m&&(t>0?e>=m.from&&e<m.to:e>m.from&&e<=m.to))return O4e(n,e,t,c,m,h,o)}}return B4e(n,e,t,s,a.type,r,o)}function O4e(n,e,t,i,r,o,s){let a=i.parent,c={from:r.from,to:r.to},h=0,m=a?.cursor();if(m&&(t<0?m.childBefore(i.from):m.childAfter(i.to)))do if(t<0?m.to<=i.from:m.from>=i.to){if(h==0&&o.indexOf(m.type.name)>-1&&m.from<m.to){let y=nD(m);return{start:c,end:y?{from:y.from,to:y.to}:void 0,matched:!0}}else if(tD(m.type,t,s))h++;else if(tD(m.type,-t,s)){if(h==0){let y=nD(m);return{start:c,end:y&&y.from<y.to?{from:y.from,to:y.to}:void 0,matched:!1}}h--}}while(t<0?m.prevSibling():m.nextSibling());return{start:c,matched:!1}}function B4e(n,e,t,i,r,o,s){let a=t<0?n.sliceDoc(e-1,e):n.sliceDoc(e,e+1),c=s.indexOf(a);if(c<0||c%2==0!=t>0)return null;let h={from:t<0?e-1:e,to:t>0?e+1:e},m=n.doc.iterRange(e,t>0?n.doc.length:0),y=0;for(let M=0;!m.next().done&&M<=o;){let x=m.value;t<0&&(M+=x.length);let T=e+M*t;for(let P=t>0?0:x.length-1,F=t>0?x.length:-1;P!=F;P+=t){let j=s.indexOf(x[P]);if(!(j<0||i.resolveInner(T+P,1).type!=r))if(j%2==0==t>0)y++;else{if(y==1)return{start:h,end:{from:T+P,to:T+P+1},matched:j>>1==c>>1};y--}}t>0&&(M+=x.length)}return m.done?{start:h,matched:!1}:null}const I4e=Object.create(null),pG=[Od.none],mG=[],gG=Object.create(null),k4e=Object.create(null);for(let[n,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])k4e[n]=T4e(I4e,e);function WB(n,e){mG.indexOf(n)>-1||(mG.push(n),console.warn(e))}function T4e(n,e){let t=[];for(let a of e.split(" ")){let c=[];for(let h of a.split(".")){let m=n[h]||un[h];m?typeof m=="function"?c.length?c=c.map(m):WB(h,`Modifier ${h} used at start of tag`):c.length?WB(h,`Tag ${h} used as modifier`):c=Array.isArray(m)?m:[m]:WB(h,`Unknown highlighting tag ${h}`)}for(let h of c)t.push(h)}if(!t.length)return 0;let i=e.replace(/ /g,"_"),r=i+" "+t.map(a=>a.id),o=gG[r];if(o)return o.id;let s=gG[r]=Od.define({id:pG.length,name:i,props:[tie({[i]:t})]});return pG.push(s),s.id}ol.RTL,ol.LTR;const R4e=n=>{let{state:e}=n,t=e.doc.lineAt(e.selection.main.from),i=oK(n.state,t.from);return i.line?D4e(n):i.block?U4e(n):!1};function rK(n,e){return({state:t,dispatch:i})=>{if(t.readOnly)return!1;let r=n(e,t);return r?(i(t.update(r)),!0):!1}}const D4e=rK(F4e,0),P4e=rK(bie,0),U4e=rK((n,e)=>bie(n,e,L4e(e)),0);function oK(n,e){let t=n.languageDataAt("commentTokens",e,1);return t.length?t[0]:{}}const M2=50;function K4e(n,{open:e,close:t},i,r){let o=n.sliceDoc(i-M2,i),s=n.sliceDoc(r,r+M2),a=/\s*$/.exec(o)[0].length,c=/^\s*/.exec(s)[0].length,h=o.length-a;if(o.slice(h-e.length,h)==e&&s.slice(c,c+t.length)==t)return{open:{pos:i-a,margin:a&&1},close:{pos:r+c,margin:c&&1}};let m,y;r-i<=2*M2?m=y=n.sliceDoc(i,r):(m=n.sliceDoc(i,i+M2),y=n.sliceDoc(r-M2,r));let M=/^\s*/.exec(m)[0].length,x=/\s*$/.exec(y)[0].length,T=y.length-x-t.length;return m.slice(M,M+e.length)==e&&y.slice(T,T+t.length)==t?{open:{pos:i+M+e.length,margin:/\s/.test(m.charAt(M+e.length))?1:0},close:{pos:r-x-t.length,margin:/\s/.test(y.charAt(T-1))?1:0}}:null}function L4e(n){let e=[];for(let t of n.selection.ranges){let i=n.doc.lineAt(t.from),r=t.to<=i.to?i:n.doc.lineAt(t.to);r.from>i.from&&r.from==t.to&&(r=t.to==i.to+1?i:n.doc.lineAt(t.to-1));let o=e.length-1;o>=0&&e[o].to>i.from?e[o].to=r.to:e.push({from:i.from+/^\s*/.exec(i.text)[0].length,to:r.to})}return e}function bie(n,e,t=e.selection.ranges){let i=t.map(o=>oK(e,o.from).block);if(!i.every(o=>o))return null;let r=t.map((o,s)=>K4e(e,i[s],o.from,o.to));if(n!=2&&!r.every(o=>o))return{changes:e.changes(t.map((o,s)=>r[s]?[]:[{from:o.from,insert:i[s].open+" "},{from:o.to,insert:" "+i[s].close}]))};if(n!=1&&r.some(o=>o)){let o=[];for(let s=0,a;s<r.length;s++)if(a=r[s]){let c=i[s],{open:h,close:m}=a;o.push({from:h.pos-c.open.length,to:h.pos+h.margin},{from:m.pos-m.margin,to:m.pos+c.close.length})}return{changes:o}}return null}function F4e(n,e,t=e.selection.ranges){let i=[],r=-1;for(let{from:o,to:s}of t){let a=i.length,c=1e9,h=oK(e,o).line;if(h){for(let m=o;m<=s;){let y=e.doc.lineAt(m);if(y.from>r&&(o==s||s>y.from)){r=y.from;let M=/^\s*/.exec(y.text)[0].length,x=M==y.length,T=y.text.slice(M,M+h.length)==h?M:-1;M<y.text.length&&M<c&&(c=M),i.push({line:y,comment:T,token:h,indent:M,empty:x,single:!1})}m=y.to+1}if(c<1e9)for(let m=a;m<i.length;m++)i[m].indent<i[m].line.text.length&&(i[m].indent=c);i.length==a+1&&(i[a].single=!0)}}if(n!=2&&i.some(o=>o.comment<0&&(!o.empty||o.single))){let o=[];for(let{line:a,token:c,indent:h,empty:m,single:y}of i)(y||!m)&&o.push({from:a.from+h,insert:c+" "});let s=e.changes(o);return{changes:s,selection:e.selection.map(s,1)}}else if(n!=1&&i.some(o=>o.comment>=0)){let o=[];for(let{line:s,comment:a,token:c}of i)if(a>=0){let h=s.from+a,m=h+c.length;s.text[m-s.from]==" "&&m++,o.push({from:h,to:m})}return{changes:o}}return null}const iD=v1.define(),z4e=v1.define(),j4e=Bi.define(),Cie=Bi.define({combine(n){return Dm(n,{minDepth:100,newGroupDelay:500,joinToEvent:(e,t)=>t},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,t)=>(i,r)=>e(i,r)||t(i,r)})}}),_ie=Oc.define({create(){return Gg.empty},update(n,e){let t=e.state.facet(Cie),i=e.annotation(iD);if(i){let c=Md.fromTransaction(e,i.selection),h=i.side,m=h==0?n.undone:n.done;return c?m=TS(m,m.length,t.minDepth,c):m=wie(m,e.startState.selection),new Gg(h==0?i.rest:m,h==0?m:i.rest)}let r=e.annotation(z4e);if((r=="full"||r=="before")&&(n=n.isolate()),e.annotation(Ec.addToHistory)===!1)return e.changes.empty?n:n.addMapping(e.changes.desc);let o=Md.fromTransaction(e),s=e.annotation(Ec.time),a=e.annotation(Ec.userEvent);return o?n=n.addChanges(o,s,a,t,e):e.selection&&(n=n.addSelection(e.startState.selection,s,a,t.newGroupDelay)),(r=="full"||r=="after")&&(n=n.isolate()),n},toJSON(n){return{done:n.done.map(e=>e.toJSON()),undone:n.undone.map(e=>e.toJSON())}},fromJSON(n){return new Gg(n.done.map(Md.fromJSON),n.undone.map(Md.fromJSON))}});function N4e(n={}){return[_ie,Cie.of(n),Si.domEventHandlers({beforeinput(e,t){let i=e.inputType=="historyUndo"?xie:e.inputType=="historyRedo"?rD:null;return i?(e.preventDefault(),i(t)):!1}})]}function p6(n,e){return function({state:t,dispatch:i}){if(!e&&t.readOnly)return!1;let r=t.field(_ie,!1);if(!r)return!1;let o=r.pop(n,t,e);return o?(i(o),!0):!1}}const xie=p6(0,!1),rD=p6(1,!1),G4e=p6(0,!0),W4e=p6(1,!0);class Md{constructor(e,t,i,r,o){this.changes=e,this.effects=t,this.mapped=i,this.startSelection=r,this.selectionsAfter=o}setSelAfter(e){return new Md(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,i;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(t=this.mapped)===null||t===void 0?void 0:t.toJSON(),startSelection:(i=this.startSelection)===null||i===void 0?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(r=>r.toJSON())}}static fromJSON(e){return new Md(e.changes&&Mc.fromJSON(e.changes),[],e.mapped&&e0.fromJSON(e.mapped),e.startSelection&&wn.fromJSON(e.startSelection),e.selectionsAfter.map(wn.fromJSON))}static fromTransaction(e,t){let i=mp;for(let r of e.startState.facet(j4e)){let o=r(e);o.length&&(i=i.concat(o))}return!i.length&&e.changes.empty?null:new Md(e.changes.invert(e.startState.doc),i,void 0,t||e.startState.selection,mp)}static selection(e){return new Md(void 0,mp,void 0,void 0,e)}}function TS(n,e,t,i){let r=e+1>t+20?e-t-1:0,o=n.slice(r,e);return o.push(i),o}function Q4e(n,e){let t=[],i=!1;return n.iterChangedRanges((r,o)=>t.push(r,o)),e.iterChangedRanges((r,o,s,a)=>{for(let c=0;c<t.length;){let h=t[c++],m=t[c++];a>=h&&s<=m&&(i=!0)}}),i}function q4e(n,e){return n.ranges.length==e.ranges.length&&n.ranges.filter((t,i)=>t.empty!=e.ranges[i].empty).length===0}function Mie(n,e){return n.length?e.length?n.concat(e):n:e}const mp=[],Y4e=200;function wie(n,e){if(n.length){let t=n[n.length-1],i=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-Y4e));return i.length&&i[i.length-1].eq(e)?n:(i.push(e),TS(n,n.length-1,1e9,t.setSelAfter(i)))}else return[Md.selection([e])]}function $4e(n){let e=n[n.length-1],t=n.slice();return t[n.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}function QB(n,e){if(!n.length)return n;let t=n.length,i=mp;for(;t;){let r=V4e(n[t-1],e,i);if(r.changes&&!r.changes.empty||r.effects.length){let o=n.slice(0,t);return o[t-1]=r,o}else e=r.mapped,t--,i=r.selectionsAfter}return i.length?[Md.selection(i)]:mp}function V4e(n,e,t){let i=Mie(n.selectionsAfter.length?n.selectionsAfter.map(a=>a.map(e)):mp,t);if(!n.changes)return Md.selection(i);let r=n.changes.map(e),o=e.mapDesc(n.changes,!0),s=n.mapped?n.mapped.composeDesc(o):o;return new Md(r,ro.mapEffects(n.effects,e),s,n.startSelection.map(o),i)}const H4e=/^(input\.type|delete)($|\.)/;class Gg{constructor(e,t,i=0,r=void 0){this.done=e,this.undone=t,this.prevTime=i,this.prevUserEvent=r}isolate(){return this.prevTime?new Gg(this.done,this.undone):this}addChanges(e,t,i,r,o){let s=this.done,a=s[s.length-1];return a&&a.changes&&!a.changes.empty&&e.changes&&(!i||H4e.test(i))&&(!a.selectionsAfter.length&&t-this.prevTime<r.newGroupDelay&&r.joinToEvent(o,Q4e(a.changes,e.changes))||i=="input.type.compose")?s=TS(s,s.length-1,r.minDepth,new Md(e.changes.compose(a.changes),Mie(ro.mapEffects(e.effects,a.changes),a.effects),a.mapped,a.startSelection,mp)):s=TS(s,s.length,r.minDepth,e),new Gg(s,mp,t,i)}addSelection(e,t,i,r){let o=this.done.length?this.done[this.done.length-1].selectionsAfter:mp;return o.length>0&&t-this.prevTime<r&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&q4e(o[o.length-1],e)?this:new Gg(wie(this.done,e),this.undone,t,i)}addMapping(e){return new Gg(QB(this.done,e),QB(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,i){let r=e==0?this.done:this.undone;if(r.length==0)return null;let o=r[r.length-1],s=o.selectionsAfter[0]||t.selection;if(i&&o.selectionsAfter.length)return t.update({selection:o.selectionsAfter[o.selectionsAfter.length-1],annotations:iD.of({side:e,rest:$4e(r),selection:s}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(o.changes){let a=r.length==1?mp:r.slice(0,r.length-1);return o.mapped&&(a=QB(a,o.mapped)),t.update({changes:o.changes,selection:o.startSelection,effects:o.effects,annotations:iD.of({side:e,rest:a,selection:s}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}Gg.empty=new Gg(mp,mp);const Z4e=[{key:"Mod-z",run:xie,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:rD,preventDefault:!0},{linux:"Ctrl-Shift-z",run:rD,preventDefault:!0},{key:"Mod-u",run:G4e,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:W4e,preventDefault:!0}];function Gx(n,e){return wn.create(n.ranges.map(e),n.mainIndex)}function c0(n,e){return n.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Pm({state:n,dispatch:e},t){let i=Gx(n.selection,t);return i.eq(n.selection,!0)?!1:(e(c0(n,i)),!0)}function m6(n,e){return wn.cursor(e?n.to:n.from)}function Sie(n,e){return Pm(n,t=>t.empty?n.moveByChar(t,e):m6(t,e))}function VA(n){return n.textDirectionAt(n.state.selection.main.head)==ol.LTR}const Eie=n=>Sie(n,!VA(n)),Oie=n=>Sie(n,VA(n));function Bie(n,e){return Pm(n,t=>t.empty?n.moveByGroup(t,e):m6(t,e))}const X4e=n=>Bie(n,!VA(n)),J4e=n=>Bie(n,VA(n));function e5e(n,e,t){if(e.type.prop(t))return!0;let i=e.to-e.from;return i&&(i>2||/[^\s,.;:]/.test(n.sliceDoc(e.from,e.to)))||e.firstChild}function g6(n,e,t){let i=$A(n).resolveInner(e.head),r=t?Bo.closedBy:Bo.openedBy;for(let c=e.head;;){let h=t?i.childAfter(c):i.childBefore(c);if(!h)break;e5e(n,h,r)?i=h:c=t?h.to:h.from}let o=i.type.prop(r),s,a;return o&&(s=t?Ng(n,i.from,1):Ng(n,i.to,-1))&&s.matched?a=t?s.end.to:s.end.from:a=t?i.to:i.from,wn.cursor(a,t?-1:1)}const t5e=n=>Pm(n,e=>g6(n.state,e,!VA(n))),n5e=n=>Pm(n,e=>g6(n.state,e,VA(n)));function Iie(n,e){return Pm(n,t=>{if(!t.empty)return m6(t,e);let i=n.moveVertically(t,e);return i.head!=t.head?i:n.moveToLineBoundary(t,e)})}const kie=n=>Iie(n,!1),Tie=n=>Iie(n,!0);function Rie(n){let e=n.scrollDOM.clientHeight<n.scrollDOM.scrollHeight-2,t=0,i=0,r;if(e){for(let o of n.state.facet(Si.scrollMargins)){let s=o(n);s?.top&&(t=Math.max(s?.top,t)),s?.bottom&&(i=Math.max(s?.bottom,i))}r=n.scrollDOM.clientHeight-t-i}else r=(n.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:t,marginBottom:i,selfScroll:e,height:Math.max(n.defaultLineHeight,r-5)}}function Die(n,e){let t=Rie(n),{state:i}=n,r=Gx(i.selection,s=>s.empty?n.moveVertically(s,e,t.height):m6(s,e));if(r.eq(i.selection))return!1;let o;if(t.selfScroll){let s=n.coordsAtPos(i.selection.main.head),a=n.scrollDOM.getBoundingClientRect(),c=a.top+t.marginTop,h=a.bottom-t.marginBottom;s&&s.top>c&&s.bottom<h&&(o=Si.scrollIntoView(r.main.head,{y:"start",yMargin:s.top-c}))}return n.dispatch(c0(i,r),{effects:o}),!0}const yG=n=>Die(n,!1),oD=n=>Die(n,!0);function Av(n,e,t){let i=n.lineBlockAt(e.head),r=n.moveToLineBoundary(e,t);if(r.head==e.head&&r.head!=(t?i.to:i.from)&&(r=n.moveToLineBoundary(e,t,!1)),!t&&r.head==i.from&&i.length){let o=/^\s*/.exec(n.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;o&&e.head!=i.from+o&&(r=wn.cursor(i.from+o))}return r}const i5e=n=>Pm(n,e=>Av(n,e,!0)),r5e=n=>Pm(n,e=>Av(n,e,!1)),o5e=n=>Pm(n,e=>Av(n,e,!VA(n))),s5e=n=>Pm(n,e=>Av(n,e,VA(n))),a5e=n=>Pm(n,e=>wn.cursor(n.lineBlockAt(e.head).from,1)),l5e=n=>Pm(n,e=>wn.cursor(n.lineBlockAt(e.head).to,-1));function u5e(n,e,t){let i=!1,r=Gx(n.selection,o=>{let s=Ng(n,o.head,-1)||Ng(n,o.head,1)||o.head>0&&Ng(n,o.head-1,1)||o.head<n.doc.length&&Ng(n,o.head+1,-1);if(!s||!s.end)return o;i=!0;let a=s.start.from==o.head?s.end.to:s.end.from;return wn.cursor(a)});return i?(e(c0(n,r)),!0):!1}const c5e=({state:n,dispatch:e})=>u5e(n,e);function Mp(n,e){let t=Gx(n.state.selection,i=>{let r=e(i);return wn.range(i.anchor,r.head,r.goalColumn,r.bidiLevel||void 0)});return t.eq(n.state.selection)?!1:(n.dispatch(c0(n.state,t)),!0)}function Pie(n,e){return Mp(n,t=>n.moveByChar(t,e))}const Uie=n=>Pie(n,!VA(n)),Kie=n=>Pie(n,VA(n));function Lie(n,e){return Mp(n,t=>n.moveByGroup(t,e))}const A5e=n=>Lie(n,!VA(n)),h5e=n=>Lie(n,VA(n)),d5e=n=>Mp(n,e=>g6(n.state,e,!VA(n))),f5e=n=>Mp(n,e=>g6(n.state,e,VA(n)));function Fie(n,e){return Mp(n,t=>n.moveVertically(t,e))}const zie=n=>Fie(n,!1),jie=n=>Fie(n,!0);function Nie(n,e){return Mp(n,t=>n.moveVertically(t,e,Rie(n).height))}const vG=n=>Nie(n,!1),bG=n=>Nie(n,!0),p5e=n=>Mp(n,e=>Av(n,e,!0)),m5e=n=>Mp(n,e=>Av(n,e,!1)),g5e=n=>Mp(n,e=>Av(n,e,!VA(n))),y5e=n=>Mp(n,e=>Av(n,e,VA(n))),v5e=n=>Mp(n,e=>wn.cursor(n.lineBlockAt(e.head).from)),b5e=n=>Mp(n,e=>wn.cursor(n.lineBlockAt(e.head).to)),CG=({state:n,dispatch:e})=>(e(c0(n,{anchor:0})),!0),_G=({state:n,dispatch:e})=>(e(c0(n,{anchor:n.doc.length})),!0),xG=({state:n,dispatch:e})=>(e(c0(n,{anchor:n.selection.main.anchor,head:0})),!0),MG=({state:n,dispatch:e})=>(e(c0(n,{anchor:n.selection.main.anchor,head:n.doc.length})),!0),C5e=({state:n,dispatch:e})=>(e(n.update({selection:{anchor:0,head:n.doc.length},userEvent:"select"})),!0),_5e=({state:n,dispatch:e})=>{let t=y6(n).map(({from:i,to:r})=>wn.range(i,Math.min(r+1,n.doc.length)));return e(n.update({selection:wn.create(t),userEvent:"select"})),!0},x5e=({state:n,dispatch:e})=>{let t=Gx(n.selection,i=>{let r=$A(n),o=r.resolveStack(i.from,1);if(i.empty){let s=r.resolveStack(i.from,-1);s.node.from>=o.node.from&&s.node.to<=o.node.to&&(o=s)}for(let s=o;s;s=s.next){let{node:a}=s;if((a.from<i.from&&a.to>=i.to||a.to>i.to&&a.from<=i.from)&&s.next)return wn.range(a.to,a.from)}return i});return t.eq(n.selection)?!1:(e(c0(n,t)),!0)},M5e=({state:n,dispatch:e})=>{let t=n.selection,i=null;return t.ranges.length>1?i=wn.create([t.main]):t.main.empty||(i=wn.create([wn.cursor(t.main.head)])),i?(e(c0(n,i)),!0):!1};function x5(n,e){if(n.state.readOnly)return!1;let t="delete.selection",{state:i}=n,r=i.changeByRange(o=>{let{from:s,to:a}=o;if(s==a){let c=e(o);c<s?(t="delete.backward",c=BM(n,c,!1)):c>s&&(t="delete.forward",c=BM(n,c,!0)),s=Math.min(s,c),a=Math.max(a,c)}else s=BM(n,s,!1),a=BM(n,a,!0);return s==a?{range:o}:{changes:{from:s,to:a},range:wn.cursor(s,s<o.head?-1:1)}});return r.changes.empty?!1:(n.dispatch(i.update(r,{scrollIntoView:!0,userEvent:t,effects:t=="delete.selection"?Si.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function BM(n,e,t){if(n instanceof Si)for(let i of n.state.facet(Si.atomicRanges).map(r=>r(n)))i.between(e,e,(r,o)=>{r<e&&o>e&&(e=t?o:r)});return e}const Gie=(n,e,t)=>x5(n,i=>{let r=i.from,{state:o}=n,s=o.doc.lineAt(r),a,c;if(t&&!e&&r>s.from&&r<s.from+200&&!/[^ \t]/.test(a=s.text.slice(0,r-s.from))){if(a[a.length-1]=="	")return r-1;let h=Nx(a,o.tabSize),m=h%BS(o)||BS(o);for(let y=0;y<m&&a[a.length-1-y]==" ";y++)r--;c=r}else c=CA(s.text,r-s.from,e,e)+s.from,c==r&&s.number!=(e?o.doc.lines:1)?c+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(s.text.slice(c-s.from,r-s.from))&&(c=CA(s.text,c-s.from,!1,!1)+s.from);return c}),sD=n=>Gie(n,!1,!0),Wie=n=>Gie(n,!0,!1),Qie=(n,e)=>x5(n,t=>{let i=t.head,{state:r}=n,o=r.doc.lineAt(i),s=r.charCategorizer(i);for(let a=null;;){if(i==(e?o.to:o.from)){i==t.head&&o.number!=(e?r.doc.lines:1)&&(i+=e?1:-1);break}let c=CA(o.text,i-o.from,e)+o.from,h=o.text.slice(Math.min(i,c)-o.from,Math.max(i,c)-o.from),m=s(h);if(a!=null&&m!=a)break;(h!=" "||i!=t.head)&&(a=m),i=c}return i}),qie=n=>Qie(n,!1),w5e=n=>Qie(n,!0),S5e=n=>x5(n,e=>{let t=n.lineBlockAt(e.head).to;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),E5e=n=>x5(n,e=>{let t=n.moveToLineBoundary(e,!1).head;return e.head>t?t:Math.max(0,e.head-1)}),O5e=n=>x5(n,e=>{let t=n.moveToLineBoundary(e,!0).head;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),B5e=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:ms.of(["",""])},range:wn.cursor(i.from)}));return e(n.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},I5e=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(i=>{if(!i.empty||i.from==0||i.from==n.doc.length)return{range:i};let r=i.from,o=n.doc.lineAt(r),s=r==o.from?r-1:CA(o.text,r-o.from,!1)+o.from,a=r==o.to?r+1:CA(o.text,r-o.from,!0)+o.from;return{changes:{from:s,to:a,insert:n.doc.slice(r,a).append(n.doc.slice(s,r))},range:wn.cursor(a)}});return t.changes.empty?!1:(e(n.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function y6(n){let e=[],t=-1;for(let i of n.selection.ranges){let r=n.doc.lineAt(i.from),o=n.doc.lineAt(i.to);if(!i.empty&&i.to==o.from&&(o=n.doc.lineAt(i.to-1)),t>=r.number){let s=e[e.length-1];s.to=o.to,s.ranges.push(i)}else e.push({from:r.from,to:o.to,ranges:[i]});t=o.number+1}return e}function Yie(n,e,t){if(n.readOnly)return!1;let i=[],r=[];for(let o of y6(n)){if(t?o.to==n.doc.length:o.from==0)continue;let s=n.doc.lineAt(t?o.to+1:o.from-1),a=s.length+1;if(t){i.push({from:o.to,to:s.to},{from:o.from,insert:s.text+n.lineBreak});for(let c of o.ranges)r.push(wn.range(Math.min(n.doc.length,c.anchor+a),Math.min(n.doc.length,c.head+a)))}else{i.push({from:s.from,to:o.from},{from:o.to,insert:n.lineBreak+s.text});for(let c of o.ranges)r.push(wn.range(c.anchor-a,c.head-a))}}return i.length?(e(n.update({changes:i,scrollIntoView:!0,selection:wn.create(r,n.selection.mainIndex),userEvent:"move.line"})),!0):!1}const k5e=({state:n,dispatch:e})=>Yie(n,e,!1),T5e=({state:n,dispatch:e})=>Yie(n,e,!0);function $ie(n,e,t){if(n.readOnly)return!1;let i=[];for(let r of y6(n))t?i.push({from:r.from,insert:n.doc.slice(r.from,r.to)+n.lineBreak}):i.push({from:r.to,insert:n.lineBreak+n.doc.slice(r.from,r.to)});return e(n.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const R5e=({state:n,dispatch:e})=>$ie(n,e,!1),D5e=({state:n,dispatch:e})=>$ie(n,e,!0),P5e=n=>{if(n.state.readOnly)return!1;let{state:e}=n,t=e.changes(y6(e).map(({from:r,to:o})=>(r>0?r--:o<e.doc.length&&o++,{from:r,to:o}))),i=Gx(e.selection,r=>{let o;if(n.lineWrapping){let s=n.lineBlockAt(r.head),a=n.coordsAtPos(r.head,r.assoc||1);a&&(o=s.bottom+n.documentTop-a.bottom+n.defaultLineHeight/2)}return n.moveVertically(r,!0,o)}).map(t);return n.dispatch({changes:t,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0};function U5e(n,e){if(/\(\)|\[\]|\{\}/.test(n.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=$A(n).resolveInner(e),i=t.childBefore(e),r=t.childAfter(e),o;return i&&r&&i.to<=e&&r.from>=e&&(o=i.type.prop(Bo.closedBy))&&o.indexOf(r.name)>-1&&n.doc.lineAt(i.to).from==n.doc.lineAt(r.from).from&&!/\S/.test(n.sliceDoc(i.to,r.from))?{from:i.to,to:r.from}:null}const wG=Vie(!1),K5e=Vie(!0);function Vie(n){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let i=e.changeByRange(r=>{let{from:o,to:s}=r,a=e.doc.lineAt(o),c=!n&&o==s&&U5e(e,o);n&&(o=s=(s<=a.to?a:e.doc.lineAt(s)).to);let h=new d6(e,{simulateBreak:o,simulateDoubleBreak:!!c}),m=nK(h,o);for(m==null&&(m=Nx(/^\s*/.exec(e.doc.lineAt(o).text)[0],e.tabSize));s<a.to&&/\s/.test(a.text[s-a.from]);)s++;c?{from:o,to:s}=c:o>a.from&&o<a.from+100&&!/\S/.test(a.text.slice(0,o))&&(o=a.from);let y=["",C4(e,m)];return c&&y.push(C4(e,h.lineIndent(a.from,-1))),{changes:{from:o,to:s,insert:ms.of(y)},range:wn.cursor(o+1+y[1].length)}});return t(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function sK(n,e){let t=-1;return n.changeByRange(i=>{let r=[];for(let s=i.from;s<=i.to;){let a=n.doc.lineAt(s);a.number>t&&(i.empty||i.to>a.from)&&(e(a,r,i),t=a.number),s=a.to+1}let o=n.changes(r);return{changes:r,range:wn.range(o.mapPos(i.anchor,1),o.mapPos(i.head,1))}})}const L5e=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=Object.create(null),i=new d6(n,{overrideIndentation:o=>{let s=t[o];return s??-1}}),r=sK(n,(o,s,a)=>{let c=nK(i,o.from);if(c==null)return;/\S/.test(o.text)||(c=0);let h=/^\s*/.exec(o.text)[0],m=C4(n,c);(h!=m||a.from<o.from+h.length)&&(t[o.from]=c,s.push({from:o.from,to:o.from+h.length,insert:m}))});return r.changes.empty||e(n.update(r,{userEvent:"indent"})),!0},F5e=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(sK(n,(t,i)=>{i.push({from:t.from,insert:n.facet(tK)})}),{userEvent:"input.indent"})),!0),z5e=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(sK(n,(t,i)=>{let r=/^\s*/.exec(t.text)[0];if(!r)return;let o=Nx(r,n.tabSize),s=0,a=C4(n,Math.max(0,o-BS(n)));for(;s<r.length&&s<a.length&&r.charCodeAt(s)==a.charCodeAt(s);)s++;i.push({from:t.from+s,to:t.from+r.length,insert:a.slice(s)})}),{userEvent:"delete.dedent"})),!0),j5e=n=>(n.setTabFocusMode(),!0),N5e=[{key:"Ctrl-b",run:Eie,shift:Uie,preventDefault:!0},{key:"Ctrl-f",run:Oie,shift:Kie},{key:"Ctrl-p",run:kie,shift:zie},{key:"Ctrl-n",run:Tie,shift:jie},{key:"Ctrl-a",run:a5e,shift:v5e},{key:"Ctrl-e",run:l5e,shift:b5e},{key:"Ctrl-d",run:Wie},{key:"Ctrl-h",run:sD},{key:"Ctrl-k",run:S5e},{key:"Ctrl-Alt-h",run:qie},{key:"Ctrl-o",run:B5e},{key:"Ctrl-t",run:I5e},{key:"Ctrl-v",run:oD}],G5e=[{key:"ArrowLeft",run:Eie,shift:Uie,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:X4e,shift:A5e,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:o5e,shift:g5e,preventDefault:!0},{key:"ArrowRight",run:Oie,shift:Kie,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:J4e,shift:h5e,preventDefault:!0},{mac:"Cmd-ArrowRight",run:s5e,shift:y5e,preventDefault:!0},{key:"ArrowUp",run:kie,shift:zie,preventDefault:!0},{mac:"Cmd-ArrowUp",run:CG,shift:xG},{mac:"Ctrl-ArrowUp",run:yG,shift:vG},{key:"ArrowDown",run:Tie,shift:jie,preventDefault:!0},{mac:"Cmd-ArrowDown",run:_G,shift:MG},{mac:"Ctrl-ArrowDown",run:oD,shift:bG},{key:"PageUp",run:yG,shift:vG},{key:"PageDown",run:oD,shift:bG},{key:"Home",run:r5e,shift:m5e,preventDefault:!0},{key:"Mod-Home",run:CG,shift:xG},{key:"End",run:i5e,shift:p5e,preventDefault:!0},{key:"Mod-End",run:_G,shift:MG},{key:"Enter",run:wG,shift:wG},{key:"Mod-a",run:C5e},{key:"Backspace",run:sD,shift:sD},{key:"Delete",run:Wie},{key:"Mod-Backspace",mac:"Alt-Backspace",run:qie},{key:"Mod-Delete",mac:"Alt-Delete",run:w5e},{mac:"Mod-Backspace",run:E5e},{mac:"Mod-Delete",run:O5e}].concat(N5e.map(n=>({mac:n.key,run:n.run,shift:n.shift}))),W5e=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:t5e,shift:d5e},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:n5e,shift:f5e},{key:"Alt-ArrowUp",run:k5e},{key:"Shift-Alt-ArrowUp",run:R5e},{key:"Alt-ArrowDown",run:T5e},{key:"Shift-Alt-ArrowDown",run:D5e},{key:"Escape",run:M5e},{key:"Mod-Enter",run:K5e},{key:"Alt-l",mac:"Ctrl-l",run:_5e},{key:"Mod-i",run:x5e,preventDefault:!0},{key:"Mod-[",run:z5e},{key:"Mod-]",run:F5e},{key:"Mod-Alt-\\",run:L5e},{key:"Shift-Mod-k",run:P5e},{key:"Shift-Mod-\\",run:c5e},{key:"Mod-/",run:R4e},{key:"Alt-A",run:P4e},{key:"Ctrl-m",mac:"Shift-Alt-m",run:j5e}].concat(G5e),SG=typeof String.prototype.normalize=="function"?n=>n.normalize("NFKD"):n=>n;class Mx{constructor(e,t,i=0,r=e.length,o,s){this.test=s,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(i,r),this.bufferStart=i,this.normalize=o?a=>o(SG(a)):SG,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return bd(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=UU(e),i=this.bufferStart+this.bufferPos;this.bufferPos+=Dg(e);let r=this.normalize(t);if(r.length)for(let o=0,s=i;;o++){let a=r.charCodeAt(o),c=this.match(a,s,this.bufferPos+this.bufferStart);if(o==r.length-1){if(c)return this.value=c,this;break}s==i&&o<t.length&&t.charCodeAt(o)==a&&s++}}}match(e,t,i){let r=null;for(let o=0;o<this.matches.length;o+=2){let s=this.matches[o],a=!1;this.query.charCodeAt(s)==e&&(s==this.query.length-1?r={from:this.matches[o+1],to:i}:(this.matches[o]++,a=!0)),a||(this.matches.splice(o,2),o-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?r={from:t,to:i}:this.matches.push(1,t)),r&&this.test&&!this.test(r.from,r.to,this.buffer,this.bufferStart)&&(r=null),r}}typeof Symbol<"u"&&(Mx.prototype[Symbol.iterator]=function(){return this});const Hie={from:-1,to:-1,match:/.*/.exec("")},aK="gm"+(/x/.unicode==null?"":"u");class Zie{constructor(e,t,i,r=0,o=e.length){if(this.text=e,this.to=o,this.curLine="",this.done=!1,this.value=Hie,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new Xie(e,t,i,r,o);this.re=new RegExp(t,aK+(i?.ignoreCase?"i":"")),this.test=i?.test,this.iter=e.iter();let s=e.lineAt(r);this.curLineStart=s.from,this.matchPos=RS(e,r),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let i=this.curLineStart+t.index,r=i+t[0].length;if(this.matchPos=RS(this.text,r+(i==r?1:0)),i==this.curLineStart+this.curLine.length&&this.nextLine(),(i<r||i>this.value.to)&&(!this.test||this.test(i,r,t)))return this.value={from:i,to:r,match:t},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const qB=new WeakMap;class V_{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,i){let r=qB.get(e);if(!r||r.from>=i||r.to<=t){let a=new V_(t,e.sliceString(t,i));return qB.set(e,a),a}if(r.from==t&&r.to==i)return r;let{text:o,from:s}=r;return s>t&&(o=e.sliceString(t,s)+o,s=t),r.to<i&&(o+=e.sliceString(r.to,i)),qB.set(e,new V_(s,o)),new V_(t,o.slice(t-s,i-s))}}class Xie{constructor(e,t,i,r,o){this.text=e,this.to=o,this.done=!1,this.value=Hie,this.matchPos=RS(e,r),this.re=new RegExp(t,aK+(i?.ignoreCase?"i":"")),this.test=i?.test,this.flat=V_.get(e,r,this.chunkEnd(r+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let i=this.flat.from+t.index,r=i+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(i,r,t)))return this.value={from:i,to:r,match:t},this.matchPos=RS(this.text,r+(i==r?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=V_.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(Zie.prototype[Symbol.iterator]=Xie.prototype[Symbol.iterator]=function(){return this});function Q5e(n){try{return new RegExp(n,aK),!0}catch{return!1}}function RS(n,e){if(e>=n.length)return e;let t=n.lineAt(e),i;for(;e<t.to&&(i=t.text.charCodeAt(e-t.from))>=56320&&i<57344;)e++;return e}function aD(n){let e=String(n.state.doc.lineAt(n.state.selection.main.head).number),t=Ba("input",{class:"cm-textfield",name:"line",value:e}),i=Ba("form",{class:"cm-gotoLine",onkeydown:o=>{o.keyCode==27?(o.preventDefault(),n.dispatch({effects:_3.of(!1)}),n.focus()):o.keyCode==13&&(o.preventDefault(),r())},onsubmit:o=>{o.preventDefault(),r()}},Ba("label",n.state.phrase("Go to line"),": ",t)," ",Ba("button",{class:"cm-button",type:"submit"},n.state.phrase("go")),Ba("button",{name:"close",onclick:()=>{n.dispatch({effects:_3.of(!1)}),n.focus()},"aria-label":n.state.phrase("close"),type:"button"},[""]));function r(){let o=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(t.value);if(!o)return;let{state:s}=n,a=s.doc.lineAt(s.selection.main.head),[,c,h,m,y]=o,M=m?+m.slice(1):0,x=h?+h:a.number;if(h&&y){let F=x/100;c&&(F=F*(c=="-"?-1:1)+a.number/s.doc.lines),x=Math.round(s.doc.lines*F)}else h&&c&&(x=x*(c=="-"?-1:1)+a.number);let T=s.doc.line(Math.max(1,Math.min(s.doc.lines,x))),P=wn.cursor(T.from+Math.max(0,Math.min(M,T.length)));n.dispatch({effects:[_3.of(!1),Si.scrollIntoView(P.from,{y:"center"})],selection:P}),n.focus()}return{dom:i}}const _3=ro.define(),EG=Oc.define({create(){return!0},update(n,e){for(let t of e.effects)t.is(_3)&&(n=t.value);return n},provide:n=>v4.from(n,e=>e?aD:null)}),q5e=n=>{let e=y4(n,aD);if(!e){let t=[_3.of(!0)];n.state.field(EG,!1)==null&&t.push(ro.appendConfig.of([EG,Y5e])),n.dispatch({effects:t}),e=y4(n,aD)}return e&&e.dom.querySelector("input").select(),!0},Y5e=Si.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),$5e={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},V5e=Bi.define({combine(n){return Dm(n,$5e,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})}});function H5e(n){return[tMe,eMe]}const Z5e=Or.mark({class:"cm-selectionMatch"}),X5e=Or.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function OG(n,e,t,i){return(t==0||n(e.sliceDoc(t-1,t))!=ml.Word)&&(i==e.doc.length||n(e.sliceDoc(i,i+1))!=ml.Word)}function J5e(n,e,t,i){return n(e.sliceDoc(t,t+1))==ml.Word&&n(e.sliceDoc(i-1,i))==ml.Word}const eMe=xu.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.selectionSet||n.docChanged||n.viewportChanged)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=n.state.facet(V5e),{state:t}=n,i=t.selection;if(i.ranges.length>1)return Or.none;let r=i.main,o,s=null;if(r.empty){if(!e.highlightWordAroundCursor)return Or.none;let c=t.wordAt(r.head);if(!c)return Or.none;s=t.charCategorizer(r.head),o=t.sliceDoc(c.from,c.to)}else{let c=r.to-r.from;if(c<e.minSelectionLength||c>200)return Or.none;if(e.wholeWords){if(o=t.sliceDoc(r.from,r.to),s=t.charCategorizer(r.head),!(OG(s,t,r.from,r.to)&&J5e(s,t,r.from,r.to)))return Or.none}else if(o=t.sliceDoc(r.from,r.to),!o)return Or.none}let a=[];for(let c of n.visibleRanges){let h=new Mx(t.doc,o,c.from,c.to);for(;!h.next().done;){let{from:m,to:y}=h.value;if((!s||OG(s,t,m,y))&&(r.empty&&m<=r.from&&y>=r.to?a.push(X5e.range(m,y)):(m>=r.to||y<=r.from)&&a.push(Z5e.range(m,y)),a.length>e.maxMatches))return Or.none}}return Or.set(a)}},{decorations:n=>n.decorations}),tMe=Si.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),nMe=({state:n,dispatch:e})=>{let{selection:t}=n,i=wn.create(t.ranges.map(r=>n.wordAt(r.head)||wn.cursor(r.head)),t.mainIndex);return i.eq(t)?!1:(e(n.update({selection:i})),!0)};function iMe(n,e){let{main:t,ranges:i}=n.selection,r=n.wordAt(t.head),o=r&&r.from==t.from&&r.to==t.to;for(let s=!1,a=new Mx(n.doc,e,i[i.length-1].to);;)if(a.next(),a.done){if(s)return null;a=new Mx(n.doc,e,0,Math.max(0,i[i.length-1].from-1)),s=!0}else{if(s&&i.some(c=>c.from==a.value.from))continue;if(o){let c=n.wordAt(a.value.from);if(!c||c.from!=a.value.from||c.to!=a.value.to)continue}return a.value}}const rMe=({state:n,dispatch:e})=>{let{ranges:t}=n.selection;if(t.some(o=>o.from===o.to))return nMe({state:n,dispatch:e});let i=n.sliceDoc(t[0].from,t[0].to);if(n.selection.ranges.some(o=>n.sliceDoc(o.from,o.to)!=i))return!1;let r=iMe(n,i);return r?(e(n.update({selection:n.selection.addRange(wn.range(r.from,r.to),!1),effects:Si.scrollIntoView(r.to)})),!0):!1},Wx=Bi.define({combine(n){return Dm(n,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new mMe(e),scrollToMatch:e=>Si.scrollIntoView(e)})}});class Jie{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||Q5e(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(t,i)=>i=="n"?`
`:i=="r"?"\r":i=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new lMe(this):new sMe(this)}getCursor(e,t=0,i){let r=e.doc?e:ps.create({doc:e});return i==null&&(i=r.doc.length),this.regexp?M_(this,r,t,i):x_(this,r,t,i)}}class ere{constructor(e){this.spec=e}}function x_(n,e,t,i){return new Mx(e.doc,n.unquoted,t,i,n.caseSensitive?void 0:r=>r.toLowerCase(),n.wholeWord?oMe(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function oMe(n,e){return(t,i,r,o)=>((o>t||o+r.length<i)&&(o=Math.max(0,t-2),r=n.sliceString(o,Math.min(n.length,i+2))),(e(DS(r,t-o))!=ml.Word||e(PS(r,t-o))!=ml.Word)&&(e(PS(r,i-o))!=ml.Word||e(DS(r,i-o))!=ml.Word))}class sMe extends ere{constructor(e){super(e)}nextMatch(e,t,i){let r=x_(this.spec,e,i,e.doc.length).nextOverlapping();if(r.done){let o=Math.min(e.doc.length,t+this.spec.unquoted.length);r=x_(this.spec,e,0,o).nextOverlapping()}return r.done||r.value.from==t&&r.value.to==i?null:r.value}prevMatchInRange(e,t,i){for(let r=i;;){let o=Math.max(t,r-1e4-this.spec.unquoted.length),s=x_(this.spec,e,o,r),a=null;for(;!s.nextOverlapping().done;)a=s.value;if(a)return a;if(o==t)return null;r-=1e4}}prevMatch(e,t,i){let r=this.prevMatchInRange(e,0,t);return r||(r=this.prevMatchInRange(e,Math.max(0,i-this.spec.unquoted.length),e.doc.length)),r&&(r.from!=t||r.to!=i)?r:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,t){let i=x_(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=t)return null;r.push(i.value)}return r}highlight(e,t,i,r){let o=x_(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,e.doc.length));for(;!o.next().done;)r(o.value.from,o.value.to)}}function M_(n,e,t,i){return new Zie(e.doc,n.search,{ignoreCase:!n.caseSensitive,test:n.wholeWord?aMe(e.charCategorizer(e.selection.main.head)):void 0},t,i)}function DS(n,e){return n.slice(CA(n,e,!1),e)}function PS(n,e){return n.slice(e,CA(n,e))}function aMe(n){return(e,t,i)=>!i[0].length||(n(DS(i.input,i.index))!=ml.Word||n(PS(i.input,i.index))!=ml.Word)&&(n(PS(i.input,i.index+i[0].length))!=ml.Word||n(DS(i.input,i.index+i[0].length))!=ml.Word)}class lMe extends ere{nextMatch(e,t,i){let r=M_(this.spec,e,i,e.doc.length).next();return r.done&&(r=M_(this.spec,e,0,t).next()),r.done?null:r.value}prevMatchInRange(e,t,i){for(let r=1;;r++){let o=Math.max(t,i-r*1e4),s=M_(this.spec,e,o,i),a=null;for(;!s.next().done;)a=s.value;if(a&&(o==t||a.from>o+10))return a;if(o==t)return null}}prevMatch(e,t,i){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(t,i)=>{if(i=="&")return e.match[0];if(i=="$")return"$";for(let r=i.length;r>0;r--){let o=+i.slice(0,r);if(o>0&&o<e.match.length)return e.match[o]+i.slice(r)}return t})}matchAll(e,t){let i=M_(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=t)return null;r.push(i.value)}return r}highlight(e,t,i,r){let o=M_(this.spec,e,Math.max(0,t-250),Math.min(i+250,e.doc.length));for(;!o.next().done;)r(o.value.from,o.value.to)}}const _4=ro.define(),lK=ro.define(),Xy=Oc.define({create(n){return new YB(lD(n).create(),null)},update(n,e){for(let t of e.effects)t.is(_4)?n=new YB(t.value.create(),n.panel):t.is(lK)&&(n=new YB(n.query,t.value?uK:null));return n},provide:n=>v4.from(n,e=>e.panel)});class YB{constructor(e,t){this.query=e,this.panel=t}}const uMe=Or.mark({class:"cm-searchMatch"}),cMe=Or.mark({class:"cm-searchMatch cm-searchMatch-selected"}),AMe=xu.fromClass(class{constructor(n){this.view=n,this.decorations=this.highlight(n.state.field(Xy))}update(n){let e=n.state.field(Xy);(e!=n.startState.field(Xy)||n.docChanged||n.selectionSet||n.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:n,panel:e}){if(!e||!n.spec.valid)return Or.none;let{view:t}=this,i=new f1;for(let r=0,o=t.visibleRanges,s=o.length;r<s;r++){let{from:a,to:c}=o[r];for(;r<s-1&&c>o[r+1].from-500;)c=o[++r].to;n.highlight(t.state,a,c,(h,m)=>{let y=t.state.selection.ranges.some(M=>M.from==h&&M.to==m);i.add(h,m,y?cMe:uMe)})}return i.finish()}},{decorations:n=>n.decorations});function M5(n){return e=>{let t=e.state.field(Xy,!1);return t&&t.query.spec.valid?n(e,t):ire(e)}}const US=M5((n,{query:e})=>{let{to:t}=n.state.selection.main,i=e.nextMatch(n.state,t,t);if(!i)return!1;let r=wn.single(i.from,i.to),o=n.state.facet(Wx);return n.dispatch({selection:r,effects:[cK(n,i),o.scrollToMatch(r.main,n)],userEvent:"select.search"}),nre(n),!0}),KS=M5((n,{query:e})=>{let{state:t}=n,{from:i}=t.selection.main,r=e.prevMatch(t,i,i);if(!r)return!1;let o=wn.single(r.from,r.to),s=n.state.facet(Wx);return n.dispatch({selection:o,effects:[cK(n,r),s.scrollToMatch(o.main,n)],userEvent:"select.search"}),nre(n),!0}),hMe=M5((n,{query:e})=>{let t=e.matchAll(n.state,1e3);return!t||!t.length?!1:(n.dispatch({selection:wn.create(t.map(i=>wn.range(i.from,i.to))),userEvent:"select.search.matches"}),!0)}),dMe=({state:n,dispatch:e})=>{let t=n.selection;if(t.ranges.length>1||t.main.empty)return!1;let{from:i,to:r}=t.main,o=[],s=0;for(let a=new Mx(n.doc,n.sliceDoc(i,r));!a.next().done;){if(o.length>1e3)return!1;a.value.from==i&&(s=o.length),o.push(wn.range(a.value.from,a.value.to))}return e(n.update({selection:wn.create(o,s),userEvent:"select.search.matches"})),!0},BG=M5((n,{query:e})=>{let{state:t}=n,{from:i,to:r}=t.selection.main;if(t.readOnly)return!1;let o=e.nextMatch(t,i,i);if(!o)return!1;let s=o,a=[],c,h,m=[];s.from==i&&s.to==r&&(h=t.toText(e.getReplacement(s)),a.push({from:s.from,to:s.to,insert:h}),s=e.nextMatch(t,s.from,s.to),m.push(Si.announce.of(t.phrase("replaced match on line $",t.doc.lineAt(i).number)+".")));let y=n.state.changes(a);return s&&(c=wn.single(s.from,s.to).map(y),m.push(cK(n,s)),m.push(t.facet(Wx).scrollToMatch(c.main,n))),n.dispatch({changes:y,selection:c,effects:m,userEvent:"input.replace"}),!0}),fMe=M5((n,{query:e})=>{if(n.state.readOnly)return!1;let t=e.matchAll(n.state,1e9).map(r=>{let{from:o,to:s}=r;return{from:o,to:s,insert:e.getReplacement(r)}});if(!t.length)return!1;let i=n.state.phrase("replaced $ matches",t.length)+".";return n.dispatch({changes:t,effects:Si.announce.of(i),userEvent:"input.replace.all"}),!0});function uK(n){return n.state.facet(Wx).createPanel(n)}function lD(n,e){var t,i,r,o,s;let a=n.selection.main,c=a.empty||a.to>a.from+100?"":n.sliceDoc(a.from,a.to);if(e&&!c)return e;let h=n.facet(Wx);return new Jie({search:((t=e?.literal)!==null&&t!==void 0?t:h.literal)?c:c.replace(/\n/g,"\\n"),caseSensitive:(i=e?.caseSensitive)!==null&&i!==void 0?i:h.caseSensitive,literal:(r=e?.literal)!==null&&r!==void 0?r:h.literal,regexp:(o=e?.regexp)!==null&&o!==void 0?o:h.regexp,wholeWord:(s=e?.wholeWord)!==null&&s!==void 0?s:h.wholeWord})}function tre(n){let e=y4(n,uK);return e&&e.dom.querySelector("[main-field]")}function nre(n){let e=tre(n);e&&e==n.root.activeElement&&e.select()}const ire=n=>{let e=n.state.field(Xy,!1);if(e&&e.panel){let t=tre(n);if(t&&t!=n.root.activeElement){let i=lD(n.state,e.query.spec);i.valid&&n.dispatch({effects:_4.of(i)}),t.focus(),t.select()}}else n.dispatch({effects:[lK.of(!0),e?_4.of(lD(n.state,e.query.spec)):ro.appendConfig.of(yMe)]});return!0},rre=n=>{let e=n.state.field(Xy,!1);if(!e||!e.panel)return!1;let t=y4(n,uK);return t&&t.dom.contains(n.root.activeElement)&&n.focus(),n.dispatch({effects:lK.of(!1)}),!0},pMe=[{key:"Mod-f",run:ire,scope:"editor search-panel"},{key:"F3",run:US,shift:KS,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:US,shift:KS,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:rre,scope:"editor search-panel"},{key:"Mod-Shift-l",run:dMe},{key:"Mod-Alt-g",run:q5e},{key:"Mod-d",run:rMe,preventDefault:!0}];class mMe{constructor(e){this.view=e;let t=this.query=e.state.field(Xy).query.spec;this.commit=this.commit.bind(this),this.searchField=Ba("input",{value:t.search,placeholder:cf(e,"Find"),"aria-label":cf(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=Ba("input",{value:t.replace,placeholder:cf(e,"Replace"),"aria-label":cf(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=Ba("input",{type:"checkbox",name:"case",form:"",checked:t.caseSensitive,onchange:this.commit}),this.reField=Ba("input",{type:"checkbox",name:"re",form:"",checked:t.regexp,onchange:this.commit}),this.wordField=Ba("input",{type:"checkbox",name:"word",form:"",checked:t.wholeWord,onchange:this.commit});function i(r,o,s){return Ba("button",{class:"cm-button",name:r,onclick:o,type:"button"},s)}this.dom=Ba("div",{onkeydown:r=>this.keydown(r),class:"cm-search"},[this.searchField,i("next",()=>US(e),[cf(e,"next")]),i("prev",()=>KS(e),[cf(e,"previous")]),i("select",()=>hMe(e),[cf(e,"all")]),Ba("label",null,[this.caseField,cf(e,"match case")]),Ba("label",null,[this.reField,cf(e,"regexp")]),Ba("label",null,[this.wordField,cf(e,"by word")]),...e.state.readOnly?[]:[Ba("br"),this.replaceField,i("replace",()=>BG(e),[cf(e,"replace")]),i("replaceAll",()=>fMe(e),[cf(e,"replace all")])],Ba("button",{name:"close",onclick:()=>rre(e),"aria-label":cf(e,"close"),type:"button"},[""])])}commit(){let e=new Jie({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:_4.of(e)}))}keydown(e){S2e(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?KS:US)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),BG(this.view))}update(e){for(let t of e.transactions)for(let i of t.effects)i.is(_4)&&!i.value.eq(this.query)&&this.setQuery(i.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Wx).top}}function cf(n,e){return n.state.phrase(e)}const IM=30,kM=/[\s\.,:;?!]/;function cK(n,{from:e,to:t}){let i=n.state.doc.lineAt(e),r=n.state.doc.lineAt(t).to,o=Math.max(i.from,e-IM),s=Math.min(r,t+IM),a=n.state.sliceDoc(o,s);if(o!=i.from){for(let c=0;c<IM;c++)if(!kM.test(a[c+1])&&kM.test(a[c])){a=a.slice(c);break}}if(s!=r){for(let c=a.length-1;c>a.length-IM;c--)if(!kM.test(a[c-1])&&kM.test(a[c])){a=a.slice(0,c);break}}return Si.announce.of(`${n.state.phrase("current match")}. ${a} ${n.state.phrase("on line")} ${i.number}.`)}const gMe=Si.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),yMe=[Xy,nC.low(AMe),gMe];class ore{constructor(e,t,i,r){this.state=e,this.pos=t,this.explicit=i,this.view=r,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let t=$A(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),i=Math.max(t.from,this.pos-250),r=t.text.slice(i-t.from,this.pos-t.from),o=r.search(sre(e,!1));return o<0?null:{from:i+o,to:this.pos,text:r.slice(o)}}get aborted(){return this.abortListeners==null}addEventListener(e,t,i){e=="abort"&&this.abortListeners&&(this.abortListeners.push(t),i&&i.onDocChange&&(this.abortOnDocChange=!0))}}function IG(n){let e=Object.keys(n).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function vMe(n){let e=Object.create(null),t=Object.create(null);for(let{label:r}of n){e[r[0]]=!0;for(let o=1;o<r.length;o++)t[r[o]]=!0}let i=IG(e)+IG(t)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function bMe(n){let e=n.map(r=>typeof r=="string"?{label:r}:r),[t,i]=e.every(r=>/^\w+$/.test(r.label))?[/\w*$/,/\w+$/]:vMe(e);return r=>{let o=r.matchBefore(i);return o||r.explicit?{from:o?o.from:r.pos,options:e,validFor:t}:null}}class kG{constructor(e,t,i,r){this.completion=e,this.source=t,this.match=i,this.score=r}}function Tb(n){return n.selection.main.from}function sre(n,e){var t;let{source:i}=n,r=e&&i[0]!="^",o=i[i.length-1]!="$";return!r&&!o?n:new RegExp(`${r?"^":""}(?:${i})${o?"$":""}`,(t=n.flags)!==null&&t!==void 0?t:n.ignoreCase?"i":"")}const are=v1.define();function CMe(n,e,t,i){let{main:r}=n.selection,o=t-r.from,s=i-r.from;return{...n.changeByRange(a=>{if(a!=r&&t!=i&&n.sliceDoc(a.from+o,a.from+s)!=n.sliceDoc(t,i))return{range:a};let c=n.toText(e);return{changes:{from:a.from+o,to:i==r.from?a.to:a.from+s,insert:c},range:wn.cursor(a.from+o+c.length)}}),scrollIntoView:!0,userEvent:"input.complete"}}const TG=new WeakMap;function _Me(n){if(!Array.isArray(n))return n;let e=TG.get(n);return e||TG.set(n,e=bMe(n)),e}const LS=ro.define(),x4=ro.define();class xMe{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let t=0;t<e.length;){let i=bd(e,t),r=Dg(i);this.chars.push(i);let o=e.slice(t,t+r),s=o.toUpperCase();this.folded.push(bd(s==o?o.toLowerCase():s,0)),t+=r}this.astral=e.length!=this.chars.length}ret(e,t){return this.score=e,this.matched=t,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:t,folded:i,any:r,precise:o,byWord:s}=this;if(t.length==1){let q=bd(e,0),V=Dg(q),H=V==e.length?0:-100;if(q!=t[0])if(q==i[0])H+=-200;else return null;return this.ret(H,[0,V])}let a=e.indexOf(this.pattern);if(a==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let c=t.length,h=0;if(a<0){for(let q=0,V=Math.min(e.length,200);q<V&&h<c;){let H=bd(e,q);(H==t[h]||H==i[h])&&(r[h++]=q),q+=Dg(H)}if(h<c)return null}let m=0,y=0,M=!1,x=0,T=-1,P=-1,F=/[a-z]/.test(e),j=!0;for(let q=0,V=Math.min(e.length,200),H=0;q<V&&y<c;){let Q=bd(e,q);a<0&&(m<c&&Q==t[m]&&(o[m++]=q),x<c&&(Q==t[x]||Q==i[x]?(x==0&&(T=q),P=q+1,x++):x=0));let Y,z=Q<255?Q>=48&&Q<=57||Q>=97&&Q<=122?2:Q>=65&&Q<=90?1:0:(Y=UU(Q))!=Y.toLowerCase()?1:Y!=Y.toUpperCase()?2:0;(!q||z==1&&F||H==0&&z!=0)&&(t[y]==Q||i[y]==Q&&(M=!0)?s[y++]=q:s.length&&(j=!1)),H=z,q+=Dg(Q)}return y==c&&s[0]==0&&j?this.result(-100+(M?-200:0),s,e):x==c&&T==0?this.ret(-200-e.length+(P==e.length?0:-100),[0,P]):a>-1?this.ret(-700-e.length,[a,a+this.pattern.length]):x==c?this.ret(-900-e.length,[T,P]):y==c?this.result(-100+(M?-200:0)+-700+(j?0:-1100),s,e):t.length==2?null:this.result((r[0]?-700:0)+-200+-1100,r,e)}result(e,t,i){let r=[],o=0;for(let s of t){let a=s+(this.astral?Dg(bd(i,s)):1);o&&r[o-1]==s?r[o-1]=a:(r[o++]=s,r[o++]=a)}return this.ret(e-i.length,r)}}class MMe{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let t=e.slice(0,this.pattern.length),i=t==this.pattern?0:t.toLowerCase()==this.folded?-200:null;return i==null?null:(this.matched=[0,t.length],this.score=i+(e.length==this.pattern.length?0:-100),this)}}const rA=Bi.define({combine(n){return Dm(n,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:wMe,filterStrict:!1,compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,tooltipClass:(e,t)=>i=>RG(e(i),t(i)),optionClass:(e,t)=>i=>RG(e(i),t(i)),addToOptions:(e,t)=>e.concat(t),filterStrict:(e,t)=>e||t})}});function RG(n,e){return n?e?n+" "+e:n:e}function wMe(n,e,t,i,r,o){let s=n.textDirection==ol.RTL,a=s,c=!1,h="top",m,y,M=e.left-r.left,x=r.right-e.right,T=i.right-i.left,P=i.bottom-i.top;if(a&&M<Math.min(T,x)?a=!1:!a&&x<Math.min(T,M)&&(a=!0),T<=(a?M:x))m=Math.max(r.top,Math.min(t.top,r.bottom-P))-e.top,y=Math.min(400,a?M:x);else{c=!0,y=Math.min(400,(s?e.right:r.right-e.left)-30);let q=r.bottom-e.bottom;q>=P||q>e.top?m=t.bottom-e.top:(h="bottom",m=e.bottom-t.top)}let F=(e.bottom-e.top)/o.offsetHeight,j=(e.right-e.left)/o.offsetWidth;return{style:`${h}: ${m/F}px; max-width: ${y/j}px`,class:"cm-completionInfo-"+(c?s?"left-narrow":"right-narrow":a?"left":"right")}}function SMe(n){let e=n.addToOptions.slice();return n.icons&&e.push({render(t){let i=document.createElement("div");return i.classList.add("cm-completionIcon"),t.type&&i.classList.add(...t.type.split(/\s+/g).map(r=>"cm-completionIcon-"+r)),i.setAttribute("aria-hidden","true"),i},position:20}),e.push({render(t,i,r,o){let s=document.createElement("span");s.className="cm-completionLabel";let a=t.displayLabel||t.label,c=0;for(let h=0;h<o.length;){let m=o[h++],y=o[h++];m>c&&s.appendChild(document.createTextNode(a.slice(c,m)));let M=s.appendChild(document.createElement("span"));M.appendChild(document.createTextNode(a.slice(m,y))),M.className="cm-completionMatchedText",c=y}return c<a.length&&s.appendChild(document.createTextNode(a.slice(c))),s},position:50},{render(t){if(!t.detail)return null;let i=document.createElement("span");return i.className="cm-completionDetail",i.textContent=t.detail,i},position:80}),e.sort((t,i)=>t.position-i.position).map(t=>t.render)}function $B(n,e,t){if(n<=t)return{from:0,to:n};if(e<0&&(e=0),e<=n>>1){let r=Math.floor(e/t);return{from:r*t,to:(r+1)*t}}let i=Math.floor((n-e)/t);return{from:n-(i+1)*t,to:n-i*t}}class EMe{constructor(e,t,i){this.view=e,this.stateField=t,this.applyCompletion=i,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:c=>this.placeInfo(c),key:this},this.space=null,this.currentClass="";let r=e.state.field(t),{options:o,selected:s}=r.open,a=e.state.facet(rA);this.optionContent=SMe(a),this.optionClass=a.optionClass,this.tooltipClass=a.tooltipClass,this.range=$B(o.length,s,a.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",c=>{let{options:h}=e.state.field(t).open;for(let m=c.target,y;m&&m!=this.dom;m=m.parentNode)if(m.nodeName=="LI"&&(y=/-(\d+)$/.exec(m.id))&&+y[1]<h.length){this.applyCompletion(e,h[+y[1]]),c.preventDefault();return}}),this.dom.addEventListener("focusout",c=>{let h=e.state.field(this.stateField,!1);h&&h.tooltip&&e.state.facet(rA).closeOnBlur&&c.relatedTarget!=e.contentDOM&&e.dispatch({effects:x4.of(null)})}),this.showOptions(o,r.id)}mount(){this.updateSel()}showOptions(e,t){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,t,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var t;let i=e.state.field(this.stateField),r=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),i!=r){let{options:o,selected:s,disabled:a}=i.open;(!r.open||r.open.options!=o)&&(this.range=$B(o.length,s,e.state.facet(rA).maxRenderedOptions),this.showOptions(o,i.id)),this.updateSel(),a!=((t=r.open)===null||t===void 0?void 0:t.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!a)}}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let i of this.currentClass.split(" "))i&&this.dom.classList.remove(i);for(let i of t.split(" "))i&&this.dom.classList.add(i);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=$B(t.options.length,t.selected,this.view.state.facet(rA).maxRenderedOptions),this.showOptions(t.options,e.id)),this.updateSelectedOption(t.selected)){this.destroyInfo();let{completion:i}=t.options[t.selected],{info:r}=i;if(!r)return;let o=typeof r=="string"?document.createTextNode(r):r(i);if(!o)return;"then"in o?o.then(s=>{s&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(s,i)}).catch(s=>Ih(this.view.state,s,"completion info")):this.addInfoPane(o,i)}}addInfoPane(e,t){this.destroyInfo();let i=this.info=document.createElement("div");if(i.className="cm-tooltip cm-completionInfo",e.nodeType!=null)i.appendChild(e),this.infoDestroy=null;else{let{dom:r,destroy:o}=e;i.appendChild(r),this.infoDestroy=o||null}this.dom.appendChild(i),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let t=null;for(let i=this.list.firstChild,r=this.range.from;i;i=i.nextSibling,r++)i.nodeName!="LI"||!i.id?r--:r==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),t=i):i.hasAttribute("aria-selected")&&i.removeAttribute("aria-selected");return t&&BMe(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),r=e.getBoundingClientRect(),o=this.space;if(!o){let s=this.dom.ownerDocument.documentElement;o={left:0,top:0,right:s.clientWidth,bottom:s.clientHeight}}return r.top>Math.min(o.bottom,t.bottom)-10||r.bottom<Math.max(o.top,t.top)+10?null:this.view.state.facet(rA).positionInfo(this.view,t,r,i,o,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,t,i){const r=document.createElement("ul");r.id=t,r.setAttribute("role","listbox"),r.setAttribute("aria-expanded","true"),r.setAttribute("aria-label",this.view.state.phrase("Completions")),r.addEventListener("mousedown",s=>{s.target==r&&s.preventDefault()});let o=null;for(let s=i.from;s<i.to;s++){let{completion:a,match:c}=e[s],{section:h}=a;if(h){let M=typeof h=="string"?h:h.name;if(M!=o&&(s>i.from||i.from==0))if(o=M,typeof h!="string"&&h.header)r.appendChild(h.header(h));else{let x=r.appendChild(document.createElement("completion-section"));x.textContent=M}}const m=r.appendChild(document.createElement("li"));m.id=t+"-"+s,m.setAttribute("role","option");let y=this.optionClass(a);y&&(m.className=y);for(let M of this.optionContent){let x=M(a,this.view.state,this.view,c);x&&m.appendChild(x)}}return i.from&&r.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&r.classList.add("cm-completionListIncompleteBottom"),r}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function OMe(n,e){return t=>new EMe(t,n,e)}function BMe(n,e){let t=n.getBoundingClientRect(),i=e.getBoundingClientRect(),r=t.height/n.offsetHeight;i.top<t.top?n.scrollTop-=(t.top-i.top)/r:i.bottom>t.bottom&&(n.scrollTop+=(i.bottom-t.bottom)/r)}function DG(n){return(n.boost||0)*100+(n.apply?10:0)+(n.info?5:0)+(n.type?1:0)}function IMe(n,e){let t=[],i=null,r=h=>{t.push(h);let{section:m}=h.completion;if(m){i||(i=[]);let y=typeof m=="string"?m:m.name;i.some(M=>M.name==y)||i.push(typeof m=="string"?{name:y}:m)}},o=e.facet(rA);for(let h of n)if(h.hasResult()){let m=h.result.getMatch;if(h.result.filter===!1)for(let y of h.result.options)r(new kG(y,h.source,m?m(y):[],1e9-t.length));else{let y=e.sliceDoc(h.from,h.to),M,x=o.filterStrict?new MMe(y):new xMe(y);for(let T of h.result.options)if(M=x.match(T.label)){let P=T.displayLabel?m?m(T,M.matched):[]:M.matched;r(new kG(T,h.source,P,M.score+(T.boost||0)))}}}if(i){let h=Object.create(null),m=0,y=(M,x)=>{var T,P;return((T=M.rank)!==null&&T!==void 0?T:1e9)-((P=x.rank)!==null&&P!==void 0?P:1e9)||(M.name<x.name?-1:1)};for(let M of i.sort(y))m-=1e5,h[M.name]=m;for(let M of t){let{section:x}=M.completion;x&&(M.score+=h[typeof x=="string"?x:x.name])}}let s=[],a=null,c=o.compareCompletions;for(let h of t.sort((m,y)=>y.score-m.score||c(m.completion,y.completion))){let m=h.completion;!a||a.label!=m.label||a.detail!=m.detail||a.type!=null&&m.type!=null&&a.type!=m.type||a.apply!=m.apply||a.boost!=m.boost?s.push(h):DG(h.completion)>DG(a)&&(s[s.length-1]=h),a=h.completion}return s}class T_{constructor(e,t,i,r,o,s){this.options=e,this.attrs=t,this.tooltip=i,this.timestamp=r,this.selected=o,this.disabled=s}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new T_(this.options,PG(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,i,r,o,s){if(r&&!s&&e.some(h=>h.isPending))return r.setDisabled();let a=IMe(e,t);if(!a.length)return r&&e.some(h=>h.isPending)?r.setDisabled():null;let c=t.facet(rA).selectOnOpen?0:-1;if(r&&r.selected!=c&&r.selected!=-1){let h=r.options[r.selected].completion;for(let m=0;m<a.length;m++)if(a[m].completion==h){c=m;break}}return new T_(a,PG(i,c),{pos:e.reduce((h,m)=>m.hasResult()?Math.min(h,m.from):h,1e8),create:UMe,above:o.aboveCursor},r?r.timestamp:Date.now(),c,!1)}map(e){return new T_(this.options,this.attrs,{...this.tooltip,pos:e.mapPos(this.tooltip.pos)},this.timestamp,this.selected,this.disabled)}setDisabled(){return new T_(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class FS{constructor(e,t,i){this.active=e,this.id=t,this.open=i}static start(){return new FS(DMe,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:t}=e,i=t.facet(rA),o=(i.override||t.languageDataAt("autocomplete",Tb(t)).map(_Me)).map(c=>(this.active.find(m=>m.source==c)||new gp(c,this.active.some(m=>m.state!=0)?1:0)).update(e,i));o.length==this.active.length&&o.every((c,h)=>c==this.active[h])&&(o=this.active);let s=this.open,a=e.effects.some(c=>c.is(AK));s&&e.docChanged&&(s=s.map(e.changes)),e.selection||o.some(c=>c.hasResult()&&e.changes.touchesRange(c.from,c.to))||!kMe(o,this.active)||a?s=T_.build(o,t,this.id,s,i,a):s&&s.disabled&&!o.some(c=>c.isPending)&&(s=null),!s&&o.every(c=>!c.isPending)&&o.some(c=>c.hasResult())&&(o=o.map(c=>c.hasResult()?new gp(c.source,0):c));for(let c of e.effects)c.is(ure)&&(s=s&&s.setSelected(c.value,this.id));return o==this.active&&s==this.open?this:new FS(o,this.id,s)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?TMe:RMe}}function kMe(n,e){if(n==e)return!0;for(let t=0,i=0;;){for(;t<n.length&&!n[t].hasResult();)t++;for(;i<e.length&&!e[i].hasResult();)i++;let r=t==n.length,o=i==e.length;if(r||o)return r==o;if(n[t++].result!=e[i++].result)return!1}}const TMe={"aria-autocomplete":"list"},RMe={};function PG(n,e){let t={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":n};return e>-1&&(t["aria-activedescendant"]=n+"-"+e),t}const DMe=[];function lre(n,e){if(n.isUserEvent("input.complete")){let i=n.annotation(are);if(i&&e.activateOnCompletion(i))return 12}let t=n.isUserEvent("input.type");return t&&e.activateOnTyping?5:t?1:n.isUserEvent("delete.backward")?2:n.selection?8:n.docChanged?16:0}class gp{constructor(e,t,i=!1){this.source=e,this.state=t,this.explicit=i}hasResult(){return!1}get isPending(){return this.state==1}update(e,t){let i=lre(e,t),r=this;(i&8||i&16&&this.touches(e))&&(r=new gp(r.source,0)),i&4&&r.state==0&&(r=new gp(this.source,1)),r=r.updateFor(e,i);for(let o of e.effects)if(o.is(LS))r=new gp(r.source,1,o.value);else if(o.is(x4))r=new gp(r.source,0);else if(o.is(AK))for(let s of o.value)s.source==r.source&&(r=s);return r}updateFor(e,t){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(Tb(e.state))}}class H_ extends gp{constructor(e,t,i,r,o,s){super(e,3,t),this.limit=i,this.result=r,this.from=o,this.to=s}hasResult(){return!0}updateFor(e,t){var i;if(!(t&3))return this.map(e.changes);let r=this.result;r.map&&!e.changes.empty&&(r=r.map(r,e.changes));let o=e.changes.mapPos(this.from),s=e.changes.mapPos(this.to,1),a=Tb(e.state);if(a>s||!r||t&2&&(Tb(e.startState)==this.from||a<this.limit))return new gp(this.source,t&4?1:0);let c=e.changes.mapPos(this.limit);return PMe(r.validFor,e.state,o,s)?new H_(this.source,this.explicit,c,r,o,s):r.update&&(r=r.update(r,o,s,new ore(e.state,a,!1)))?new H_(this.source,this.explicit,c,r,r.from,(i=r.to)!==null&&i!==void 0?i:Tb(e.state)):new gp(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new H_(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new gp(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function PMe(n,e,t,i){if(!n)return!1;let r=e.sliceDoc(t,i);return typeof n=="function"?n(r,t,i,e):sre(n,!0).test(r)}const AK=ro.define({map(n,e){return n.map(t=>t.map(e))}}),ure=ro.define(),_d=Oc.define({create(){return FS.start()},update(n,e){return n.update(e)},provide:n=>[A6.from(n,e=>e.tooltip),Si.contentAttributes.from(n,e=>e.attrs)]});function hK(n,e){const t=e.completion.apply||e.completion.label;let i=n.state.field(_d).active.find(r=>r.source==e.source);return i instanceof H_?(typeof t=="string"?n.dispatch({...CMe(n.state,t,i.from,i.to),annotations:are.of(e.completion)}):t(n,e.completion,i.from,i.to),!0):!1}const UMe=OMe(_d,hK);function TM(n,e="option"){return t=>{let i=t.state.field(_d,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<t.state.facet(rA).interactionDelay)return!1;let r=1,o;e=="page"&&(o=Qne(t,i.open.tooltip))&&(r=Math.max(2,Math.floor(o.dom.offsetHeight/o.dom.querySelector("li").offsetHeight)-1));let{length:s}=i.open.options,a=i.open.selected>-1?i.open.selected+r*(n?1:-1):n?0:s-1;return a<0?a=e=="page"?0:s-1:a>=s&&(a=e=="page"?s-1:0),t.dispatch({effects:ure.of(a)}),!0}}const KMe=n=>{let e=n.state.field(_d,!1);return n.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<n.state.facet(rA).interactionDelay?!1:hK(n,e.open.options[e.open.selected])},VB=n=>n.state.field(_d,!1)?(n.dispatch({effects:LS.of(!0)}),!0):!1,LMe=n=>{let e=n.state.field(_d,!1);return!e||!e.active.some(t=>t.state!=0)?!1:(n.dispatch({effects:x4.of(null)}),!0)};class FMe{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const zMe=50,jMe=1e3,NMe=xu.fromClass(class{constructor(n){this.view=n,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of n.state.field(_d).active)e.isPending&&this.startQuery(e)}update(n){let e=n.state.field(_d),t=n.state.facet(rA);if(!n.selectionSet&&!n.docChanged&&n.startState.field(_d)==e)return;let i=n.transactions.some(o=>{let s=lre(o,t);return s&8||(o.selection||o.docChanged)&&!(s&3)});for(let o=0;o<this.running.length;o++){let s=this.running[o];if(i||s.context.abortOnDocChange&&n.docChanged||s.updates.length+n.transactions.length>zMe&&Date.now()-s.time>jMe){for(let a of s.context.abortListeners)try{a()}catch(c){Ih(this.view.state,c)}s.context.abortListeners=null,this.running.splice(o--,1)}else s.updates.push(...n.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),n.transactions.some(o=>o.effects.some(s=>s.is(LS)))&&(this.pendingStart=!0);let r=this.pendingStart?50:t.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(o=>o.isPending&&!this.running.some(s=>s.active.source==o.source))?setTimeout(()=>this.startUpdate(),r):-1,this.composing!=0)for(let o of n.transactions)o.isUserEvent("input.type")?this.composing=2:this.composing==2&&o.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:n}=this.view,e=n.field(_d);for(let t of e.active)t.isPending&&!this.running.some(i=>i.active.source==t.source)&&this.startQuery(t);this.running.length&&e.open&&e.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(rA).updateSyncTime))}startQuery(n){let{state:e}=this.view,t=Tb(e),i=new ore(e,t,n.explicit,this.view),r=new FMe(n,i);this.running.push(r),Promise.resolve(n.source(i)).then(o=>{r.context.aborted||(r.done=o||null,this.scheduleAccept())},o=>{this.view.dispatch({effects:x4.of(null)}),Ih(this.view.state,o)})}scheduleAccept(){this.running.every(n=>n.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(rA).updateSyncTime))}accept(){var n;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],t=this.view.state.facet(rA),i=this.view.state.field(_d);for(let r=0;r<this.running.length;r++){let o=this.running[r];if(o.done===void 0)continue;if(this.running.splice(r--,1),o.done){let a=Tb(o.updates.length?o.updates[0].startState:this.view.state),c=Math.min(a,o.done.from+(o.active.explicit?0:1)),h=new H_(o.active.source,o.active.explicit,c,o.done,o.done.from,(n=o.done.to)!==null&&n!==void 0?n:a);for(let m of o.updates)h=h.update(m,t);if(h.hasResult()){e.push(h);continue}}let s=i.active.find(a=>a.source==o.active.source);if(s&&s.isPending)if(o.done==null){let a=new gp(o.active.source,0);for(let c of o.updates)a=a.update(c,t);a.isPending||e.push(a)}else this.startQuery(s)}(e.length||i.open&&i.open.disabled)&&this.view.dispatch({effects:AK.of(e)})}},{eventHandlers:{blur(n){let e=this.view.state.field(_d,!1);if(e&&e.tooltip&&this.view.state.facet(rA).closeOnBlur){let t=e.open&&Qne(this.view,e.open.tooltip);(!t||!t.dom.contains(n.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:x4.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:LS.of(!1)}),20),this.composing=0}}}),GMe=typeof navigator=="object"&&/Win/.test(navigator.platform),WMe=nC.highest(Si.domEventHandlers({keydown(n,e){let t=e.state.field(_d,!1);if(!t||!t.open||t.open.disabled||t.open.selected<0||n.key.length>1||n.ctrlKey&&!(GMe&&n.altKey)||n.metaKey)return!1;let i=t.open.options[t.open.selected],r=t.active.find(s=>s.source==i.source),o=i.completion.commitCharacters||r.result.commitCharacters;return o&&o.indexOf(n.key)>-1&&hK(e,i),!1}})),QMe=Si.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),M4={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},vb=ro.define({map(n,e){let t=e.mapPos(n,-1,Oh.TrackAfter);return t??void 0}}),dK=new class extends Gb{};dK.startSide=1;dK.endSide=-1;const cre=Oc.define({create(){return Ho.empty},update(n,e){if(n=n.map(e.changes),e.selection){let t=e.state.doc.lineAt(e.selection.main.head);n=n.update({filter:i=>i>=t.from&&i<=t.to})}for(let t of e.effects)t.is(vb)&&(n=n.update({add:[dK.range(t.value,t.value+1)]}));return n}});function qMe(){return[$Me,cre]}const HB="()[]{}<>";function Are(n){for(let e=0;e<HB.length;e+=2)if(HB.charCodeAt(e)==n)return HB.charAt(e+1);return UU(n<128?n:n+1)}function hre(n,e){return n.languageDataAt("closeBrackets",e)[0]||M4}const YMe=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),$Me=Si.inputHandler.of((n,e,t,i)=>{if((YMe?n.composing:n.compositionStarted)||n.state.readOnly)return!1;let r=n.state.selection.main;if(i.length>2||i.length==2&&Dg(bd(i,0))==1||e!=r.from||t!=r.to)return!1;let o=ZMe(n.state,i);return o?(n.dispatch(o),!0):!1}),VMe=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let i=hre(n,n.selection.main.head).brackets||M4.brackets,r=null,o=n.changeByRange(s=>{if(s.empty){let a=XMe(n.doc,s.head);for(let c of i)if(c==a&&v6(n.doc,s.head)==Are(bd(c,0)))return{changes:{from:s.head-c.length,to:s.head+c.length},range:wn.cursor(s.head-c.length)}}return{range:r=s}});return r||e(n.update(o,{scrollIntoView:!0,userEvent:"delete.backward"})),!r},HMe=[{key:"Backspace",run:VMe}];function ZMe(n,e){let t=hre(n,n.selection.main.head),i=t.brackets||M4.brackets;for(let r of i){let o=Are(bd(r,0));if(e==r)return o==r?twe(n,r,i.indexOf(r+r+r)>-1,t):JMe(n,r,o,t.before||M4.before);if(e==o&&dre(n,n.selection.main.from))return ewe(n,r,o)}return null}function dre(n,e){let t=!1;return n.field(cre).between(0,n.doc.length,i=>{i==e&&(t=!0)}),t}function v6(n,e){let t=n.sliceString(e,e+2);return t.slice(0,Dg(bd(t,0)))}function XMe(n,e){let t=n.sliceString(e-2,e);return Dg(bd(t,0))==t.length?t:t.slice(1)}function JMe(n,e,t,i){let r=null,o=n.changeByRange(s=>{if(!s.empty)return{changes:[{insert:e,from:s.from},{insert:t,from:s.to}],effects:vb.of(s.to+e.length),range:wn.range(s.anchor+e.length,s.head+e.length)};let a=v6(n.doc,s.head);return!a||/\s/.test(a)||i.indexOf(a)>-1?{changes:{insert:e+t,from:s.head},effects:vb.of(s.head+e.length),range:wn.cursor(s.head+e.length)}:{range:r=s}});return r?null:n.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function ewe(n,e,t){let i=null,r=n.changeByRange(o=>o.empty&&v6(n.doc,o.head)==t?{changes:{from:o.head,to:o.head+t.length,insert:t},range:wn.cursor(o.head+t.length)}:i={range:o});return i?null:n.update(r,{scrollIntoView:!0,userEvent:"input.type"})}function twe(n,e,t,i){let r=i.stringPrefixes||M4.stringPrefixes,o=null,s=n.changeByRange(a=>{if(!a.empty)return{changes:[{insert:e,from:a.from},{insert:e,from:a.to}],effects:vb.of(a.to+e.length),range:wn.range(a.anchor+e.length,a.head+e.length)};let c=a.head,h=v6(n.doc,c),m;if(h==e){if(UG(n,c))return{changes:{insert:e+e,from:c},effects:vb.of(c+e.length),range:wn.cursor(c+e.length)};if(dre(n,c)){let M=t&&n.sliceDoc(c,c+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:c,to:c+M.length,insert:M},range:wn.cursor(c+M.length)}}}else{if(t&&n.sliceDoc(c-2*e.length,c)==e+e&&(m=KG(n,c-2*e.length,r))>-1&&UG(n,m))return{changes:{insert:e+e+e+e,from:c},effects:vb.of(c+e.length),range:wn.cursor(c+e.length)};if(n.charCategorizer(c)(h)!=ml.Word&&KG(n,c,r)>-1&&!nwe(n,c,e,r))return{changes:{insert:e+e,from:c},effects:vb.of(c+e.length),range:wn.cursor(c+e.length)}}return{range:o=a}});return o?null:n.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function UG(n,e){let t=$A(n).resolveInner(e+1);return t.parent&&t.from==e}function nwe(n,e,t,i){let r=$A(n).resolveInner(e,-1),o=i.reduce((s,a)=>Math.max(s,a.length),0);for(let s=0;s<5;s++){let a=n.sliceDoc(r.from,Math.min(r.to,r.from+t.length+o)),c=a.indexOf(t);if(!c||c>-1&&i.indexOf(a.slice(0,c))>-1){let m=r.firstChild;for(;m&&m.from==r.from&&m.to-m.from>t.length+c;){if(n.sliceDoc(m.to-t.length,m.to)==t)return!1;m=m.firstChild}return!0}let h=r.to==e&&r.parent;if(!h)break;r=h}return!1}function KG(n,e,t){let i=n.charCategorizer(e);if(i(n.sliceDoc(e-1,e))!=ml.Word)return e;for(let r of t){let o=e-r.length;if(n.sliceDoc(o,e)==r&&i(n.sliceDoc(o-1,o))!=ml.Word)return o}return-1}function iwe(n={}){return[WMe,_d,rA.of(n),NMe,rwe,QMe]}const fre=[{key:"Ctrl-Space",run:VB},{mac:"Alt-`",run:VB},{mac:"Alt-i",run:VB},{key:"Escape",run:LMe},{key:"ArrowDown",run:TM(!0)},{key:"ArrowUp",run:TM(!1)},{key:"PageDown",run:TM(!0,"page")},{key:"PageUp",run:TM(!1,"page")},{key:"Enter",run:KMe}],rwe=nC.highest(VU.computeN([rA],n=>n.facet(rA).defaultKeymap?[fre]:[]));class LG{constructor(e,t,i){this.from=e,this.to=t,this.diagnostic=i}}class cb{constructor(e,t,i){this.diagnostics=e,this.panel=t,this.selected=i}static init(e,t,i){let r=i.facet(Wg).markerFilter;r&&(e=r(e,i));let o=e.slice().sort((m,y)=>m.from-y.from||m.to-y.to),s=new f1,a=[],c=0;for(let m=0;;){let y=m==o.length?null:o[m];if(!y&&!a.length)break;let M,x;for(a.length?(M=c,x=a.reduce((P,F)=>Math.min(P,F.to),y&&y.from>M?y.from:1e8)):(M=y.from,x=y.to,a.push(y),m++);m<o.length;){let P=o[m];if(P.from==M&&(P.to>P.from||P.to==M))a.push(P),m++,x=Math.min(P.to,x);else{x=Math.min(P.from,x);break}}let T=Cre(a);if(a.some(P=>P.from==P.to||P.from==P.to-1&&i.doc.lineAt(P.from).to==P.from))s.add(M,M,Or.widget({widget:new fwe(T),diagnostics:a.slice()}));else{let P=a.reduce((F,j)=>j.markClass?F+" "+j.markClass:F,"");s.add(M,x,Or.mark({class:"cm-lintRange cm-lintRange-"+T+P,diagnostics:a.slice(),inclusiveEnd:a.some(F=>F.to>x)}))}c=x;for(let P=0;P<a.length;P++)a[P].to<=c&&a.splice(P--,1)}let h=s.finish();return new cb(h,t,wx(h))}}function wx(n,e=null,t=0){let i=null;return n.between(t,1e9,(r,o,{spec:s})=>{if(!(e&&s.diagnostics.indexOf(e)<0))if(!i)i=new LG(r,o,e||s.diagnostics[0]);else{if(s.diagnostics.indexOf(i.diagnostic)<0)return!1;i=new LG(i.from,o,i.diagnostic)}}),i}function pre(n,e){let t=e.pos,i=e.end||t,r=n.state.facet(Wg).hideOn(n,t,i);if(r!=null)return r;let o=n.startState.doc.lineAt(e.pos);return!!(n.effects.some(s=>s.is(b6))||n.changes.touchesRange(o.from,Math.max(o.to,i)))}function mre(n,e){return n.field(xf,!1)?e:e.concat(ro.appendConfig.of(Mre))}function owe(n,e){return{effects:mre(n,[b6.of(e)])}}const b6=ro.define(),fK=ro.define(),gre=ro.define(),xf=Oc.define({create(){return new cb(Or.none,null,null)},update(n,e){if(e.docChanged&&n.diagnostics.size){let t=n.diagnostics.map(e.changes),i=null,r=n.panel;if(n.selected){let o=e.changes.mapPos(n.selected.from,1);i=wx(t,n.selected.diagnostic,o)||wx(t,null,o)}!t.size&&r&&e.state.facet(Wg).autoPanel&&(r=null),n=new cb(t,r,i)}for(let t of e.effects)if(t.is(b6)){let i=e.state.facet(Wg).autoPanel?t.value.length?w4.open:null:n.panel;n=cb.init(t.value,i,e.state)}else t.is(fK)?n=new cb(n.diagnostics,t.value?w4.open:null,n.selected):t.is(gre)&&(n=new cb(n.diagnostics,n.panel,t.value));return n},provide:n=>[v4.from(n,e=>e.panel),Si.decorations.from(n,e=>e.diagnostics)]}),swe=Or.mark({class:"cm-lintRange cm-lintRange-active"});function awe(n,e,t){let{diagnostics:i}=n.state.field(xf),r,o=-1,s=-1;i.between(e-(t<0?1:0),e+(t>0?1:0),(c,h,{spec:m})=>{if(e>=c&&e<=h&&(c==h||(e>c||t>0)&&(e<h||t<0)))return r=m.diagnostics,o=c,s=h,!1});let a=n.state.facet(Wg).tooltipFilter;return r&&a&&(r=a(r,n.state)),r?{pos:o,end:s,above:n.state.doc.lineAt(o).to<s,create(){return{dom:yre(n,r)}}}:null}function yre(n,e){return Ba("ul",{class:"cm-tooltip-lint"},e.map(t=>bre(n,t,!1)))}const lwe=n=>{let e=n.state.field(xf,!1);(!e||!e.panel)&&n.dispatch({effects:mre(n.state,[fK.of(!0)])});let t=y4(n,w4.open);return t&&t.dom.querySelector(".cm-panel-lint ul").focus(),!0},FG=n=>{let e=n.state.field(xf,!1);return!e||!e.panel?!1:(n.dispatch({effects:fK.of(!1)}),!0)},uwe=n=>{let e=n.state.field(xf,!1);if(!e)return!1;let t=n.state.selection.main,i=e.diagnostics.iter(t.to+1);return!i.value&&(i=e.diagnostics.iter(0),!i.value||i.from==t.from&&i.to==t.to)?!1:(n.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)},cwe=[{key:"Mod-Shift-m",run:lwe,preventDefault:!0},{key:"F8",run:uwe}],Awe=xu.fromClass(class{constructor(n){this.view=n,this.timeout=-1,this.set=!0;let{delay:e}=n.state.facet(Wg);this.lintTime=Date.now()+e,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,e)}run(){clearTimeout(this.timeout);let n=Date.now();if(n<this.lintTime-10)this.timeout=setTimeout(this.run,this.lintTime-n);else{this.set=!1;let{state:e}=this.view,{sources:t}=e.facet(Wg);t.length&&hwe(t.map(i=>Promise.resolve(i(this.view))),i=>{this.view.state.doc==e.doc&&this.view.dispatch(owe(this.view.state,i.reduce((r,o)=>r.concat(o))))},i=>{Ih(this.view.state,i)})}}update(n){let e=n.state.facet(Wg);(n.docChanged||e!=n.startState.facet(Wg)||e.needsRefresh&&e.needsRefresh(n))&&(this.lintTime=Date.now()+e.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,e.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}});function hwe(n,e,t){let i=[],r=-1;for(let o of n)o.then(s=>{i.push(s),clearTimeout(r),i.length==n.length?e(i):r=setTimeout(()=>e(i),200)},t)}const Wg=Bi.define({combine(n){return{sources:n.map(e=>e.source).filter(e=>e!=null),...Dm(n.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{delay:Math.max,markerFilter:zG,tooltipFilter:zG,needsRefresh:(e,t)=>e?t?i=>e(i)||t(i):e:t,hideOn:(e,t)=>e?t?(i,r,o)=>e(i,r,o)||t(i,r,o):e:t,autoPanel:(e,t)=>e||t})}}});function zG(n,e){return n?e?(t,i)=>e(n(t,i),i):n:e}function dwe(n,e={}){return[Wg.of({source:n,config:e}),Awe,Mre]}function vre(n){let e=[];if(n)e:for(let{name:t}of n){for(let i=0;i<t.length;i++){let r=t[i];if(/[a-zA-Z]/.test(r)&&!e.some(o=>o.toLowerCase()==r.toLowerCase())){e.push(r);continue e}}e.push("")}return e}function bre(n,e,t){var i;let r=t?vre(e.actions):[];return Ba("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},Ba("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(n):e.message),(i=e.actions)===null||i===void 0?void 0:i.map((o,s)=>{let a=!1,c=x=>{if(x.preventDefault(),a)return;a=!0;let T=wx(n.state.field(xf).diagnostics,e);T&&o.apply(n,T.from,T.to)},{name:h}=o,m=r[s]?h.indexOf(r[s]):-1,y=m<0?h:[h.slice(0,m),Ba("u",h.slice(m,m+1)),h.slice(m+1)],M=o.markClass?" "+o.markClass:"";return Ba("button",{type:"button",class:"cm-diagnosticAction"+M,onclick:c,onmousedown:c,"aria-label":` Action: ${h}${m<0?"":` (access key "${r[s]})"`}.`},y)}),e.source&&Ba("div",{class:"cm-diagnosticSource"},e.source))}class fwe extends cv{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return Ba("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class jG{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=bre(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class w4{constructor(e){this.view=e,this.items=[];let t=r=>{if(r.keyCode==27)FG(this.view),this.view.focus();else if(r.keyCode==38||r.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(r.keyCode==40||r.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(r.keyCode==36)this.moveSelection(0);else if(r.keyCode==35)this.moveSelection(this.items.length-1);else if(r.keyCode==13)this.view.focus();else if(r.keyCode>=65&&r.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:o}=this.items[this.selectedIndex],s=vre(o.actions);for(let a=0;a<s.length;a++)if(s[a].toUpperCase().charCodeAt(0)==r.keyCode){let c=wx(this.view.state.field(xf).diagnostics,o);c&&o.actions[a].apply(e,c.from,c.to)}}else return;r.preventDefault()},i=r=>{for(let o=0;o<this.items.length;o++)this.items[o].dom.contains(r.target)&&this.moveSelection(o)};this.list=Ba("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t,onclick:i}),this.dom=Ba("div",{class:"cm-panel-lint"},this.list,Ba("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>FG(this.view)},"")),this.update()}get selectedIndex(){let e=this.view.state.field(xf).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(xf),i=0,r=!1,o=null,s=new Set;for(e.between(0,this.view.state.doc.length,(a,c,{spec:h})=>{for(let m of h.diagnostics){if(s.has(m))continue;s.add(m);let y=-1,M;for(let x=i;x<this.items.length;x++)if(this.items[x].diagnostic==m){y=x;break}y<0?(M=new jG(this.view,m),this.items.splice(i,0,M),r=!0):(M=this.items[y],y>i&&(this.items.splice(i,y-i),r=!0)),t&&M.diagnostic==t.diagnostic?M.dom.hasAttribute("aria-selected")||(M.dom.setAttribute("aria-selected","true"),o=M):M.dom.hasAttribute("aria-selected")&&M.dom.removeAttribute("aria-selected"),i++}});i<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)r=!0,this.items.pop();this.items.length==0&&(this.items.push(new jG(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),r=!0),o?(this.list.setAttribute("aria-activedescendant",o.id),this.view.requestMeasure({key:this,read:()=>({sel:o.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:a,panel:c})=>{let h=c.height/this.list.offsetHeight;a.top<c.top?this.list.scrollTop-=(c.top-a.top)/h:a.bottom>c.bottom&&(this.list.scrollTop+=(a.bottom-c.bottom)/h)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),r&&this.sync()}sync(){let e=this.list.firstChild;function t(){let i=e;e=i.nextSibling,i.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)t();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=this.view.state.field(xf),i=wx(t.diagnostics,this.items[e].diagnostic);i&&this.view.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:gre.of(i)})}static open(e){return new w4(e)}}function bw(n,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(n)}</svg>')`}function RM(n){return bw(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${n}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const pwe=Si.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:RM("#d11")},".cm-lintRange-warning":{backgroundImage:RM("orange")},".cm-lintRange-info":{backgroundImage:RM("#999")},".cm-lintRange-hint":{backgroundImage:RM("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function mwe(n){return n=="error"?4:n=="warning"?3:n=="info"?2:1}function Cre(n){let e="hint",t=1;for(let i of n){let r=mwe(i.severity);r>t&&(t=r,e=i.severity)}return e}class _re extends i0{constructor(e){super(),this.diagnostics=e,this.severity=Cre(e)}toDOM(e){let t=document.createElement("div");t.className="cm-lint-marker cm-lint-marker-"+this.severity;let i=this.diagnostics,r=e.state.facet(C6).tooltipFilter;return r&&(i=r(i,e.state)),i.length&&(t.onmouseover=()=>ywe(e,t,i)),t}}function gwe(n,e){let t=i=>{let r=e.getBoundingClientRect();if(!(i.clientX>r.left-10&&i.clientX<r.right+10&&i.clientY>r.top-10&&i.clientY<r.bottom+10)){for(let o=i.target;o;o=o.parentNode)if(o.nodeType==1&&o.classList.contains("cm-tooltip-lint"))return;window.removeEventListener("mousemove",t),n.state.field(xre)&&n.dispatch({effects:pK.of(null)})}};window.addEventListener("mousemove",t)}function ywe(n,e,t){function i(){let s=n.elementAtHeight(e.getBoundingClientRect().top+5-n.documentTop);n.coordsAtPos(s.from)&&n.dispatch({effects:pK.of({pos:s.from,above:!1,clip:!1,create(){return{dom:yre(n,t),getCoords:()=>e.getBoundingClientRect()}}})}),e.onmouseout=e.onmousemove=null,gwe(n,e)}let{hoverTime:r}=n.state.facet(C6),o=setTimeout(i,r);e.onmouseout=()=>{clearTimeout(o),e.onmouseout=e.onmousemove=null},e.onmousemove=()=>{clearTimeout(o),o=setTimeout(i,r)}}function vwe(n,e){let t=Object.create(null);for(let r of e){let o=n.lineAt(r.from);(t[o.from]||(t[o.from]=[])).push(r)}let i=[];for(let r in t)i.push(new _re(t[r]).range(+r));return Ho.of(i,!0)}const bwe=Yne({class:"cm-gutter-lint",markers:n=>n.state.field(uD),widgetMarker:(n,e,t)=>{let i=[];return n.state.field(uD).between(t.from,t.to,(r,o,s)=>{r>t.from&&r<t.to&&i.push(...s.diagnostics)}),i.length?new _re(i):null}}),uD=Oc.define({create(){return Ho.empty},update(n,e){n=n.map(e.changes);let t=e.state.facet(C6).markerFilter;for(let i of e.effects)if(i.is(b6)){let r=i.value;t&&(r=t(r||[],e.state)),n=vwe(e.state.doc,r.slice(0))}return n}}),pK=ro.define(),xre=Oc.define({create(){return null},update(n,e){return n&&e.docChanged&&(n=pre(e,n)?null:{...n,pos:e.changes.mapPos(n.pos)}),e.effects.reduce((t,i)=>i.is(pK)?i.value:t,n)},provide:n=>A6.from(n)}),Cwe=Si.baseTheme({".cm-gutter-lint":{width:"1.4em","& .cm-gutterElement":{padding:".2em"}},".cm-lint-marker":{width:"1em",height:"1em"},".cm-lint-marker-info":{content:bw('<path fill="#aaf" stroke="#77e" stroke-width="6" stroke-linejoin="round" d="M5 5L35 5L35 35L5 35Z"/>')},".cm-lint-marker-warning":{content:bw('<path fill="#fe8" stroke="#fd7" stroke-width="6" stroke-linejoin="round" d="M20 6L37 35L3 35Z"/>')},".cm-lint-marker-error":{content:bw('<circle cx="20" cy="20" r="15" fill="#f87" stroke="#f43" stroke-width="6"/>')}}),Mre=[xf,Si.decorations.compute([xf],n=>{let{selected:e,panel:t}=n.field(xf);return!e||!t||e.from==e.to?Or.none:Or.set([swe.range(e.from,e.to)])}),h3e(awe,{hideOn:pre}),pwe],C6=Bi.define({combine(n){return Dm(n,{hoverTime:300,markerFilter:null,tooltipFilter:null})}});function _we(n={}){return[C6.of(n),uD,bwe,Cwe,xre]}const xwe=[_3e(),w3e(),G2e(),N4e(),p4e(),T2e(),K2e(),ps.allowMultipleSelections.of(!0),t4e(),mie(v4e,{fallback:!0}),S4e(),qMe(),iwe(),t3e(),r3e(),V2e(),H5e(),VU.of([...HMe,...W5e,...pMe,...Z4e,...A4e,...fre,...cwe])];var NG={};class zS{constructor(e,t,i,r,o,s,a,c,h,m=0,y){this.p=e,this.stack=t,this.state=i,this.reducePos=r,this.pos=o,this.score=s,this.buffer=a,this.bufferBase=c,this.curContext=h,this.lookAhead=m,this.parent=y}toString(){return`[${this.stack.filter((e,t)=>t%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,i=0){let r=e.parser.context;return new zS(e,[],t,i,i,0,[],0,r?new GG(r,r.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var t;let i=e>>19,r=e&65535,{parser:o}=this.p,s=this.reducePos<this.pos-25;s&&this.setLookAhead(this.pos);let a=o.dynamicPrecedence(r);if(a&&(this.score+=a),i==0){this.pushState(o.getGoto(this.state,r,!0),this.reducePos),r<o.minRepeatTerm&&this.storeNode(r,this.reducePos,this.reducePos,s?8:4,!0),this.reduceContext(r,this.reducePos);return}let c=this.stack.length-(i-1)*3-(e&262144?6:0),h=c?this.stack[c-2]:this.p.ranges[0].from,m=this.reducePos-h;m>=2e3&&!(!((t=this.p.parser.nodeSet.types[r])===null||t===void 0)&&t.isAnonymous)&&(h==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=m):this.p.lastBigReductionSize<m&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=h,this.p.lastBigReductionSize=m));let y=c?this.stack[c-1]:0,M=this.bufferBase+this.buffer.length-y;if(r<o.minRepeatTerm||e&131072){let x=o.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(r,h,x,M+4,!0)}if(e&262144)this.state=this.stack[c];else{let x=this.stack[c-3];this.state=o.getGoto(x,r,!0)}for(;this.stack.length>c;)this.stack.pop();this.reduceContext(r,h)}storeNode(e,t,i,r=4,o=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let s=this,a=this.buffer.length;if(a==0&&s.parent&&(a=s.bufferBase-s.parent.bufferBase,s=s.parent),a>0&&s.buffer[a-4]==0&&s.buffer[a-1]>-1){if(t==i)return;if(s.buffer[a-2]>=t){s.buffer[a-2]=i;return}}}if(!o||this.pos==i)this.buffer.push(e,t,i,r);else{let s=this.buffer.length;if(s>0&&this.buffer[s-4]!=0){let a=!1;for(let c=s;c>0&&this.buffer[c-2]>i;c-=4)if(this.buffer[c-1]>=0){a=!0;break}if(a)for(;s>0&&this.buffer[s-2]>i;)this.buffer[s]=this.buffer[s-4],this.buffer[s+1]=this.buffer[s-3],this.buffer[s+2]=this.buffer[s-2],this.buffer[s+3]=this.buffer[s-1],s-=4,r>4&&(r-=4)}this.buffer[s]=e,this.buffer[s+1]=t,this.buffer[s+2]=i,this.buffer[s+3]=r}}shift(e,t,i,r){if(e&131072)this.pushState(e&65535,this.pos);else if((e&262144)==0){let o=e,{parser:s}=this.p;(r>this.pos||t<=s.maxNode)&&(this.pos=r,s.stateFlag(o,1)||(this.reducePos=r)),this.pushState(o,i),this.shiftContext(t,i),t<=s.maxNode&&this.buffer.push(t,i,r,4)}else this.pos=r,this.shiftContext(t,i),t<=this.p.parser.maxNode&&this.buffer.push(t,i,r,4)}apply(e,t,i,r){e&65536?this.reduce(e):this.shift(e,t,i,r)}useNode(e,t){let i=this.p.reused.length-1;(i<0||this.p.reused[i]!=e)&&(this.p.reused.push(e),i++);let r=this.pos;this.reducePos=this.pos=r+e.length,this.pushState(t,r),this.buffer.push(i,r,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let i=e.buffer.slice(t),r=e.bufferBase+t;for(;e&&r==e.bufferBase;)e=e.parent;return new zS(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,i,r,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let i=e<=this.p.parser.maxNode;i&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,i?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new Mwe(this);;){let i=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(i==0)return!1;if((i&65536)==0)return!0;t.reduce(i)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>8||this.stack.length>=120){let r=[];for(let o=0,s;o<t.length;o+=2)(s=t[o+1])!=this.state&&this.p.parser.hasAction(s,e)&&r.push(t[o],s);if(this.stack.length<120)for(let o=0;r.length<8&&o<t.length;o+=2){let s=t[o+1];r.some((a,c)=>c&1&&a==s)||r.push(t[o],s)}t=r}let i=[];for(let r=0;r<t.length&&i.length<4;r+=2){let o=t[r+1];if(o==this.state)continue;let s=this.split();s.pushState(o,this.pos),s.storeNode(0,s.pos,s.pos,4,!0),s.shiftContext(t[r],this.pos),s.reducePos=this.pos,s.score-=200,i.push(s)}return i}forceReduce(){let{parser:e}=this.p,t=e.stateSlot(this.state,5);if((t&65536)==0)return!1;if(!e.validAction(this.state,t)){let i=t>>19,r=t&65535,o=this.stack.length-i*3;if(o<0||e.getGoto(this.stack[o],r,!1)<0){let s=this.findForcedReduction();if(s==null)return!1;t=s}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(t),!0}findForcedReduction(){let{parser:e}=this.p,t=[],i=(r,o)=>{if(!t.includes(r))return t.push(r),e.allActions(r,s=>{if(!(s&393216))if(s&65536){let a=(s>>19)-o;if(a>1){let c=s&65535,h=this.stack.length-a*3;if(h>=0&&e.getGoto(this.stack[h],c,!1)>=0)return a<<19|65536|c}}else{let a=i(s,o+1);if(a!=null)return a}})};return i(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new GG(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class GG{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}class Mwe{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=e&65535,i=e>>19;i==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(i-1)*3;let r=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=r}}class jS{constructor(e,t,i){this.stack=e,this.pos=t,this.index=i,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new jS(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new jS(this.stack,this.pos,this.index)}}function DM(n,e=Uint16Array){if(typeof n!="string")return n;let t=null;for(let i=0,r=0;i<n.length;){let o=0;for(;;){let s=n.charCodeAt(i++),a=!1;if(s==126){o=65535;break}s>=92&&s--,s>=34&&s--;let c=s-32;if(c>=46&&(c-=46,a=!0),o+=c,a)break;o*=46}t?t[r++]=o:t=new e(o)}return t}class Cw{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const WG=new Cw;class wwe{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=WG,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let i=this.range,r=this.rangeIndex,o=this.pos+e;for(;o<i.from;){if(!r)return null;let s=this.ranges[--r];o-=i.from-s.to,i=s}for(;t<0?o>i.to:o>=i.to;){if(r==this.ranges.length-1)return null;let s=this.ranges[++r];o+=s.from-i.to,i=s}return o}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let t of this.ranges)if(t.to>e)return Math.max(e,t.from);return this.end}peek(e){let t=this.chunkOff+e,i,r;if(t>=0&&t<this.chunk.length)i=this.pos+e,r=this.chunk.charCodeAt(t);else{let o=this.resolveOffset(e,1);if(o==null)return-1;if(i=o,i>=this.chunk2Pos&&i<this.chunk2Pos+this.chunk2.length)r=this.chunk2.charCodeAt(i-this.chunk2Pos);else{let s=this.rangeIndex,a=this.range;for(;a.to<=i;)a=this.ranges[++s];this.chunk2=this.input.chunk(this.chunk2Pos=i),i+this.chunk2.length>a.to&&(this.chunk2=this.chunk2.slice(0,a.to-i)),r=this.chunk2.charCodeAt(0)}}return i>=this.token.lookAhead&&(this.token.lookAhead=i+1),r}acceptToken(e,t=0){let i=t?this.resolveOffset(t,-1):this.pos;if(i==null||i<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=i}acceptTokenTo(e,t){this.token.value=e,this.token.end=t}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=WG,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let i="";for(let r of this.ranges){if(r.from>=t)break;r.to>e&&(i+=this.input.read(Math.max(r.from,e),Math.min(r.to,t)))}return i}}class Z_{constructor(e,t){this.data=e,this.id=t}token(e,t){let{parser:i}=t.p;Swe(this.data,e,t,this.id,i.data,i.tokenPrecTable)}}Z_.prototype.contextual=Z_.prototype.fallback=Z_.prototype.extend=!1;Z_.prototype.fallback=Z_.prototype.extend=!1;function Swe(n,e,t,i,r,o){let s=0,a=1<<i,{dialect:c}=t.p.parser;e:for(;(a&n[s])!=0;){let h=n[s+1];for(let x=s+3;x<h;x+=2)if((n[x+1]&a)>0){let T=n[x];if(c.allows(T)&&(e.token.value==-1||e.token.value==T||Ewe(T,e.token.value,r,o))){e.acceptToken(T);break}}let m=e.next,y=0,M=n[s+2];if(e.next<0&&M>y&&n[h+M*3-3]==65535){s=n[h+M*3-1];continue e}for(;y<M;){let x=y+M>>1,T=h+x+(x<<1),P=n[T],F=n[T+1]||65536;if(m<P)M=x;else if(m>=F)y=x+1;else{s=n[T+2],e.advance();continue e}}break}}function QG(n,e,t){for(let i=e,r;(r=n[i])!=65535;i++)if(r==t)return i-e;return-1}function Ewe(n,e,t,i){let r=QG(t,i,e);return r<0||QG(t,i,n)<r}const Af=typeof process<"u"&&NG&&/\bparse\b/.test(NG.LOG);let ZB=null;function qG(n,e,t){let i=n.cursor(nA.IncludeAnonymous);for(i.moveTo(e);;)if(!(t<0?i.childBefore(e):i.childAfter(e)))for(;;){if((t<0?i.to<e:i.from>e)&&!i.type.isError)return t<0?Math.max(0,Math.min(i.to-1,e-25)):Math.min(n.length,Math.max(i.from+1,e+25));if(t<0?i.prevSibling():i.nextSibling())break;if(!i.parent())return t<0?0:n.length}}class Owe{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?qG(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?qG(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let i=this.trees[t],r=this.index[t];if(r==i.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let o=i.children[r],s=this.start[t]+i.positions[r];if(s>e)return this.nextStart=s,null;if(o instanceof ec){if(s==e){if(s<this.safeFrom)return null;let a=s+o.length;if(a<=this.safeTo){let c=o.prop(Bo.lookAhead);if(!c||a+c<this.fragment.to)return o}}this.index[t]++,s+o.length>=Math.max(this.safeFrom,e)&&(this.trees.push(o),this.start.push(s),this.index.push(0))}else this.index[t]++,this.nextStart=s+o.length}}}class Bwe{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(i=>new Cw)}getActions(e){let t=0,i=null,{parser:r}=e.p,{tokenizers:o}=r,s=r.stateSlot(e.state,3),a=e.curContext?e.curContext.hash:0,c=0;for(let h=0;h<o.length;h++){if((1<<h&s)==0)continue;let m=o[h],y=this.tokens[h];if(!(i&&!m.fallback)&&((m.contextual||y.start!=e.pos||y.mask!=s||y.context!=a)&&(this.updateCachedToken(y,m,e),y.mask=s,y.context=a),y.lookAhead>y.end+25&&(c=Math.max(y.lookAhead,c)),y.value!=0)){let M=t;if(y.extended>-1&&(t=this.addActions(e,y.extended,y.end,t)),t=this.addActions(e,y.value,y.end,t),!m.extend&&(i=y,t>M))break}}for(;this.actions.length>t;)this.actions.pop();return c&&e.setLookAhead(c),!i&&e.pos==this.stream.end&&(i=new Cw,i.value=e.p.parser.eofTerm,i.start=i.end=e.pos,t=this.addActions(e,i.value,i.end,t)),this.mainToken=i,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new Cw,{pos:i,p:r}=e;return t.start=i,t.end=Math.min(i+1,r.stream.end),t.value=i==r.stream.end?r.parser.eofTerm:0,t}updateCachedToken(e,t,i){let r=this.stream.clipPos(i.pos);if(t.token(this.stream.reset(r,e),i),e.value>-1){let{parser:o}=i.p;for(let s=0;s<o.specialized.length;s++)if(o.specialized[s]==e.value){let a=o.specializers[s](this.stream.read(e.start,e.end),i);if(a>=0&&i.p.parser.dialect.allows(a>>1)){(a&1)==0?e.value=a>>1:e.extended=a>>1;break}}}else e.value=0,e.end=this.stream.clipPos(r+1)}putAction(e,t,i,r){for(let o=0;o<r;o+=3)if(this.actions[o]==e)return r;return this.actions[r++]=e,this.actions[r++]=t,this.actions[r++]=i,r}addActions(e,t,i,r){let{state:o}=e,{parser:s}=e.p,{data:a}=s;for(let c=0;c<2;c++)for(let h=s.stateSlot(o,c?2:1);;h+=3){if(a[h]==65535)if(a[h+1]==1)h=J0(a,h+2);else{r==0&&a[h+1]==2&&(r=this.putAction(J0(a,h+2),t,i,r));break}a[h]==t&&(r=this.putAction(J0(a,h+1),t,i,r))}return r}}class Iwe{constructor(e,t,i,r){this.parser=e,this.input=t,this.ranges=r,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new wwe(t,r),this.tokens=new Bwe(e,this.stream),this.topTerm=e.top[1];let{from:o}=r[0];this.stacks=[zS.start(this,e.top[0],o)],this.fragments=i.length&&this.stream.end-o>e.bufferLength*4?new Owe(i,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,t=this.minStackPos,i=this.stacks=[],r,o;if(this.bigReductionCount>300&&e.length==1){let[s]=e;for(;s.forceReduce()&&s.stack.length&&s.stack[s.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let s=0;s<e.length;s++){let a=e[s];for(;;){if(this.tokens.mainToken=null,a.pos>t)i.push(a);else{if(this.advanceStack(a,i,e))continue;{r||(r=[],o=[]),r.push(a);let c=this.tokens.getMainToken(a);o.push(c.value,c.end)}}break}}if(!i.length){let s=r&&Twe(r);if(s)return Af&&console.log("Finish with "+this.stackID(s)),this.stackToTree(s);if(this.parser.strict)throw Af&&r&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+t);this.recovering||(this.recovering=5)}if(this.recovering&&r){let s=this.stoppedAt!=null&&r[0].pos>this.stoppedAt?r[0]:this.runRecovery(r,o,i);if(s)return Af&&console.log("Force-finish "+this.stackID(s)),this.stackToTree(s.forceAll())}if(this.recovering){let s=this.recovering==1?1:this.recovering*3;if(i.length>s)for(i.sort((a,c)=>c.score-a.score);i.length>s;)i.pop();i.some(a=>a.reducePos>t)&&this.recovering--}else if(i.length>1){e:for(let s=0;s<i.length-1;s++){let a=i[s];for(let c=s+1;c<i.length;c++){let h=i[c];if(a.sameState(h)||a.buffer.length>500&&h.buffer.length>500)if((a.score-h.score||a.buffer.length-h.buffer.length)>0)i.splice(c--,1);else{i.splice(s--,1);continue e}}}i.length>12&&i.splice(12,i.length-12)}this.minStackPos=i[0].pos;for(let s=1;s<i.length;s++)i[s].pos<this.minStackPos&&(this.minStackPos=i[s].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,i){let r=e.pos,{parser:o}=this,s=Af?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&r>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let h=e.curContext&&e.curContext.tracker.strict,m=h?e.curContext.hash:0;for(let y=this.fragments.nodeAt(r);y;){let M=this.parser.nodeSet.types[y.type.id]==y.type?o.getGoto(e.state,y.type.id):-1;if(M>-1&&y.length&&(!h||(y.prop(Bo.contextHash)||0)==m))return e.useNode(y,M),Af&&console.log(s+this.stackID(e)+` (via reuse of ${o.getName(y.type.id)})`),!0;if(!(y instanceof ec)||y.children.length==0||y.positions[0]>0)break;let x=y.children[0];if(x instanceof ec&&y.positions[0]==0)y=x;else break}}let a=o.stateSlot(e.state,4);if(a>0)return e.reduce(a),Af&&console.log(s+this.stackID(e)+` (via always-reduce ${o.getName(a&65535)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let c=this.tokens.getActions(e);for(let h=0;h<c.length;){let m=c[h++],y=c[h++],M=c[h++],x=h==c.length||!i,T=x?e:e.split(),P=this.tokens.mainToken;if(T.apply(m,y,P?P.start:T.pos,M),Af&&console.log(s+this.stackID(T)+` (via ${(m&65536)==0?"shift":`reduce of ${o.getName(m&65535)}`} for ${o.getName(y)} @ ${r}${T==e?"":", split"})`),x)return!0;T.pos>r?t.push(T):i.push(T)}return!1}advanceFully(e,t){let i=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>i)return YG(e,t),!0}}runRecovery(e,t,i){let r=null,o=!1;for(let s=0;s<e.length;s++){let a=e[s],c=t[s<<1],h=t[(s<<1)+1],m=Af?this.stackID(a)+" -> ":"";if(a.deadEnd&&(o||(o=!0,a.restart(),Af&&console.log(m+this.stackID(a)+" (restarted)"),this.advanceFully(a,i))))continue;let y=a.split(),M=m;for(let x=0;y.forceReduce()&&x<10&&(Af&&console.log(M+this.stackID(y)+" (via force-reduce)"),!this.advanceFully(y,i));x++)Af&&(M=this.stackID(y)+" -> ");for(let x of a.recoverByInsert(c))Af&&console.log(m+this.stackID(x)+" (via recover-insert)"),this.advanceFully(x,i);this.stream.end>a.pos?(h==a.pos&&(h++,c=0),a.recoverByDelete(c,h),Af&&console.log(m+this.stackID(a)+` (via recover-delete ${this.parser.getName(c)})`),YG(a,i)):(!r||r.score<a.score)&&(r=a)}return r}stackToTree(e){return e.close(),ec.build({buffer:jS.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(ZB||(ZB=new WeakMap)).get(e);return t||ZB.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function YG(n,e){for(let t=0;t<e.length;t++){let i=e[t];if(i.pos==n.pos&&i.sameState(n)){e[t].score<n.score&&(e[t]=n);return}}e.push(n)}class kwe{constructor(e,t,i){this.source=e,this.flags=t,this.disabled=i}allows(e){return!this.disabled||this.disabled[e]==0}}class NS extends eie{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let a=0;a<e.repeatNodeCount;a++)t.push("");let i=Object.keys(e.topRules).map(a=>e.topRules[a][1]),r=[];for(let a=0;a<t.length;a++)r.push([]);function o(a,c,h){r[a].push([c,c.deserialize(String(h))])}if(e.nodeProps)for(let a of e.nodeProps){let c=a[0];typeof c=="string"&&(c=Bo[c]);for(let h=1;h<a.length;){let m=a[h++];if(m>=0)o(m,c,a[h++]);else{let y=a[h+-m];for(let M=-m;M>0;M--)o(a[h++],c,y);h++}}}this.nodeSet=new ZU(t.map((a,c)=>Od.define({name:c>=this.minRepeatTerm?void 0:a,id:c,props:r[c],top:i.indexOf(c)>-1,error:c==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(c)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=Hne;let s=DM(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let a=0;a<this.specializerSpecs.length;a++)this.specialized[a]=this.specializerSpecs[a].term;this.specializers=this.specializerSpecs.map($G),this.states=DM(e.states,Uint32Array),this.data=DM(e.stateData),this.goto=DM(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(a=>typeof a=="number"?new Z_(s,a):a),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,i){let r=new Iwe(this,e,t,i);for(let o of this.wrappers)r=o(r,e,t,i);return r}getGoto(e,t,i=!1){let r=this.goto;if(t>=r[0])return-1;for(let o=r[t+1];;){let s=r[o++],a=s&1,c=r[o++];if(a&&i)return c;for(let h=o+(s>>1);o<h;o++)if(r[o]==e)return c;if(a)return-1}}hasAction(e,t){let i=this.data;for(let r=0;r<2;r++)for(let o=this.stateSlot(e,r?2:1),s;;o+=3){if((s=i[o])==65535)if(i[o+1]==1)s=i[o=J0(i,o+2)];else{if(i[o+1]==2)return J0(i,o+2);break}if(s==t||s==0)return J0(i,o+1)}return 0}stateSlot(e,t){return this.states[e*6+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){return!!this.allActions(e,i=>i==t?!0:null)}allActions(e,t){let i=this.stateSlot(e,4),r=i?t(i):void 0;for(let o=this.stateSlot(e,1);r==null;o+=3){if(this.data[o]==65535)if(this.data[o+1]==1)o=J0(this.data,o+2);else break;r=t(J0(this.data,o+1))}return r}nextStates(e){let t=[];for(let i=this.stateSlot(e,1);;i+=3){if(this.data[i]==65535)if(this.data[i+1]==1)i=J0(this.data,i+2);else break;if((this.data[i+2]&1)==0){let r=this.data[i+1];t.some((o,s)=>s&1&&o==r)||t.push(this.data[i],r)}}return t}configure(e){let t=Object.assign(Object.create(NS.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let i=this.topRules[e.top];if(!i)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=i}return e.tokenizers&&(t.tokenizers=this.tokenizers.map(i=>{let r=e.tokenizers.find(o=>o.from==i);return r?r.to:i})),e.specializers&&(t.specializers=this.specializers.slice(),t.specializerSpecs=this.specializerSpecs.map((i,r)=>{let o=e.specializers.find(a=>a.from==i.external);if(!o)return i;let s=Object.assign(Object.assign({},i),{external:o.to});return t.specializers[r]=$G(s),s})),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),e.bufferLength!=null&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return t==null?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),i=t.map(()=>!1);if(e)for(let o of e.split(" ")){let s=t.indexOf(o);s>=0&&(i[s]=!0)}let r=null;for(let o=0;o<t.length;o++)if(!i[o])for(let s=this.dialects[t[o]],a;(a=this.data[s++])!=65535;)(r||(r=new Uint8Array(this.maxTerm+1)))[a]=1;return new kwe(e,i,r)}static deserialize(e){return new NS(e)}}function J0(n,e){return n[e]|n[e+1]<<16}function Twe(n){let e=null;for(let t of n){let i=t.p.stoppedAt;(t.pos==t.p.stream.end||i!=null&&t.pos>i)&&t.p.parser.stateFlag(t.state,2)&&(!e||e.score<t.score)&&(e=t)}return e}function $G(n){if(n.external){let e=n.extend?1:0;return(t,i)=>n.external(t,i)<<1|e}return n.get}const Rwe=tie({String:un.string,Number:un.number,"True False":un.bool,PropertyName:un.propertyName,Null:un.null,", :":un.separator,"[ ]":un.squareBracket,"{ }":un.brace}),Dwe=NS.deserialize({version:14,states:"$bOVQPOOOOQO'#Cb'#CbOnQPO'#CeOvQPO'#ClOOQO'#Cr'#CrQOQPOOOOQO'#Cg'#CgO}QPO'#CfO!SQPO'#CtOOQO,59P,59PO![QPO,59PO!aQPO'#CuOOQO,59W,59WO!iQPO,59WOVQPO,59QOqQPO'#CmO!nQPO,59`OOQO1G.k1G.kOVQPO'#CnO!vQPO,59aOOQO1G.r1G.rOOQO1G.l1G.lOOQO,59X,59XOOQO-E6k-E6kOOQO,59Y,59YOOQO-E6l-E6l",stateData:"#O~OeOS~OQSORSOSSOTSOWQO_ROgPO~OVXOgUO~O^[O~PVO[^O~O]_OVhX~OVaO~O]bO^iX~O^dO~O]_OVha~O]bO^ia~O",goto:"!kjPPPPPPkPPkqwPPPPk{!RPPP!XP!e!hXSOR^bQWQRf_TVQ_Q`WRg`QcZRicQTOQZRQe^RhbRYQR]R",nodeNames:" JsonText True False Null Number String } { Object Property PropertyName : , ] [ Array",maxTerm:25,nodeProps:[["isolate",-2,6,11,""],["openedBy",7,"{",14,"["],["closedBy",8,"}",15,"]"]],propSources:[Rwe],skippedNodes:[0],repeatNodeCount:2,tokenData:"(|~RaXY!WYZ!W]^!Wpq!Wrs!]|}$u}!O$z!Q!R%T!R![&c![!]&t!}#O&y#P#Q'O#Y#Z'T#b#c'r#h#i(Z#o#p(r#q#r(w~!]Oe~~!`Wpq!]qr!]rs!xs#O!]#O#P!}#P;'S!];'S;=`$o<%lO!]~!}Og~~#QXrs!]!P!Q!]#O#P!]#U#V!]#Y#Z!]#b#c!]#f#g!]#h#i!]#i#j#m~#pR!Q![#y!c!i#y#T#Z#y~#|R!Q![$V!c!i$V#T#Z$V~$YR!Q![$c!c!i$c#T#Z$c~$fR!Q![!]!c!i!]#T#Z!]~$rP;=`<%l!]~$zO]~~$}Q!Q!R%T!R![&c~%YRT~!O!P%c!g!h%w#X#Y%w~%fP!Q![%i~%nRT~!Q![%i!g!h%w#X#Y%w~%zR{|&T}!O&T!Q![&Z~&WP!Q![&Z~&`PT~!Q![&Z~&hST~!O!P%c!Q![&c!g!h%w#X#Y%w~&yO[~~'OO_~~'TO^~~'WP#T#U'Z~'^P#`#a'a~'dP#g#h'g~'jP#X#Y'm~'rOR~~'uP#i#j'x~'{P#`#a(O~(RP#`#a(U~(ZOS~~(^P#f#g(a~(dP#i#j(g~(jP#X#Y(m~(rOQ~~(wOW~~(|OV~",tokenizers:[0],topRules:{JsonText:[0,1]},tokenPrec:0}),Pwe=()=>n=>{try{JSON.parse(n.state.doc.toString())}catch(e){if(!(e instanceof SyntaxError))throw e;const t=Uwe(e,n.state.doc);return[{from:t,message:e.message,severity:"error",to:t}]}return[]};function Uwe(n,e){let t;return(t=n.message.match(/at position (\d+)/))?Math.min(+t[1],e.length):(t=n.message.match(/at line (\d+) column (\d+)/))?Math.min(e.line(+t[1]).from+ +t[2]-1,e.length):0}const Kwe=ES.define({name:"json",parser:Dwe.configure({props:[oie.add({Object:hG({except:/^\s*\}/}),Array:hG({except:/^\s*\]/})}),aie.add({"Object Array":i4e})]}),languageData:{closeBrackets:{brackets:["[","{",'"']},indentOnInput:/^\s*[\}\]]$/}});function Lwe(){return new Q3e(Kwe)}const Fwe="#e5c07b",VG="#e06c75",zwe="#56b6c2",jwe="#ffffff",_w="#abb2bf",cD="#7d8799",Nwe="#61afef",Gwe="#98c379",HG="#d19a66",Wwe="#c678dd",Qwe="#21252b",ZG="#2c313a",XG="#282c34",XB="#353a42",qwe="#3E4451",JG="#528bff",Ywe=Si.theme({"&":{color:_w,backgroundColor:XG},".cm-content":{caretColor:JG},".cm-cursor, .cm-dropCursor":{borderLeftColor:JG},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:qwe},".cm-panels":{backgroundColor:Qwe,color:_w},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:XG,color:cD,border:"none"},".cm-activeLineGutter":{backgroundColor:ZG},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:XB},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:XB,borderBottomColor:XB},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:ZG,color:_w}}},{dark:!0}),$we=_5.define([{tag:un.keyword,color:Wwe},{tag:[un.name,un.deleted,un.character,un.propertyName,un.macroName],color:VG},{tag:[un.function(un.variableName),un.labelName],color:Nwe},{tag:[un.color,un.constant(un.name),un.standard(un.name)],color:HG},{tag:[un.definition(un.name),un.separator],color:_w},{tag:[un.typeName,un.className,un.number,un.changed,un.annotation,un.modifier,un.self,un.namespace],color:Fwe},{tag:[un.operator,un.operatorKeyword,un.url,un.escape,un.regexp,un.link,un.special(un.string)],color:zwe},{tag:[un.meta,un.comment],color:cD},{tag:un.strong,fontWeight:"bold"},{tag:un.emphasis,fontStyle:"italic"},{tag:un.strikethrough,textDecoration:"line-through"},{tag:un.link,color:cD,textDecoration:"underline"},{tag:un.heading,fontWeight:"bold",color:VG},{tag:[un.atom,un.bool,un.special(un.variableName)],color:HG},{tag:[un.processingInstruction,un.string,un.inserted],color:Gwe},{tag:un.invalid,color:jwe}]),Vwe=[Ywe,mie($we)];var xw={exports:{}},Hwe=xw.exports,eW;function Zwe(){return eW||(eW=1,(function(n,e){(function(t,i){n.exports=i()})(Hwe,(function(){var t=typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{};function i(Te,Se){return Se={exports:{}},Te(Se,Se.exports),Se.exports}var r=i(function(Te){function Se(){var We=0,at=1,it=2,ft=3,Dt=4,Ot=5,Jt=6,Dn=7,Pn=8,oi=9,In=10,Tn=11,dn=12,$n=13,Un=14,It=15,_e=16,oe=17,ee=0,ne=1,ue=2,be=3,Le=4;function Ve(v,yt){return 55296<=v.charCodeAt(yt)&&v.charCodeAt(yt)<=56319&&56320<=v.charCodeAt(yt+1)&&v.charCodeAt(yt+1)<=57343}function rt(v,yt){yt===void 0&&(yt=0);var Mt=v.charCodeAt(yt);if(55296<=Mt&&Mt<=56319&&yt<v.length-1){var Pt=Mt,en=v.charCodeAt(yt+1);return 56320<=en&&en<=57343?(Pt-55296)*1024+(en-56320)+65536:Pt}if(56320<=Mt&&Mt<=57343&&yt>=1){var Pt=v.charCodeAt(yt-1),en=Mt;return 55296<=Pt&&Pt<=56319?(Pt-55296)*1024+(en-56320)+65536:en}return Mt}function ye(v,yt,Mt){var Pt=[v].concat(yt).concat([Mt]),en=Pt[Pt.length-2],mt=Mt,Qn=Pt.lastIndexOf(Un);if(Qn>1&&Pt.slice(1,Qn).every(function(Fn){return Fn==ft})&&[ft,$n,oe].indexOf(v)==-1)return ue;var Xn=Pt.lastIndexOf(Dt);if(Xn>0&&Pt.slice(1,Xn).every(function(Fn){return Fn==Dt})&&[dn,Dt].indexOf(en)==-1)return Pt.filter(function(Fn){return Fn==Dt}).length%2==1?be:Le;if(en==We&&mt==at)return ee;if(en==it||en==We||en==at)return mt==Un&&yt.every(function(Fn){return Fn==ft})?ue:ne;if(mt==it||mt==We||mt==at)return ne;if(en==Jt&&(mt==Jt||mt==Dn||mt==oi||mt==In))return ee;if((en==oi||en==Dn)&&(mt==Dn||mt==Pn))return ee;if((en==In||en==Pn)&&mt==Pn)return ee;if(mt==ft||mt==It)return ee;if(mt==Ot)return ee;if(en==dn)return ee;var Cn=Pt.indexOf(ft)!=-1?Pt.lastIndexOf(ft)-1:Pt.length-2;return[$n,oe].indexOf(Pt[Cn])!=-1&&Pt.slice(Cn+1,-1).every(function(Fn){return Fn==ft})&&mt==Un||en==It&&[_e,oe].indexOf(mt)!=-1?ee:yt.indexOf(Dt)!=-1?ue:en==Dt&&mt==Dt?ee:ne}this.nextBreak=function(v,yt){if(yt===void 0&&(yt=0),yt<0)return 0;if(yt>=v.length-1)return v.length;for(var Mt=Be(rt(v,yt)),Pt=[],en=yt+1;en<v.length;en++)if(!Ve(v,en-1)){var mt=Be(rt(v,en));if(ye(Mt,Pt,mt))return en;Pt.push(mt)}return v.length},this.splitGraphemes=function(v){for(var yt=[],Mt=0,Pt;(Pt=this.nextBreak(v,Mt))<v.length;)yt.push(v.slice(Mt,Pt)),Mt=Pt;return Mt<v.length&&yt.push(v.slice(Mt)),yt},this.iterateGraphemes=function(v){var yt=0,Mt={next:(function(){var Pt,en;return(en=this.nextBreak(v,yt))<v.length?(Pt=v.slice(yt,en),yt=en,{value:Pt,done:!1}):yt<v.length?(Pt=v.slice(yt),yt=v.length,{value:Pt,done:!1}):{value:void 0,done:!0}}).bind(this)};return typeof Symbol<"u"&&Symbol.iterator&&(Mt[Symbol.iterator]=function(){return Mt}),Mt},this.countGraphemes=function(v){for(var yt=0,Mt=0,Pt;(Pt=this.nextBreak(v,Mt))<v.length;)Mt=Pt,yt++;return Mt<v.length&&yt++,yt};function Be(v){return 1536<=v&&v<=1541||v==1757||v==1807||v==2274||v==3406||v==69821||70082<=v&&v<=70083||v==72250||72326<=v&&v<=72329||v==73030?dn:v==13?We:v==10?at:0<=v&&v<=9||11<=v&&v<=12||14<=v&&v<=31||127<=v&&v<=159||v==173||v==1564||v==6158||v==8203||8206<=v&&v<=8207||v==8232||v==8233||8234<=v&&v<=8238||8288<=v&&v<=8292||v==8293||8294<=v&&v<=8303||55296<=v&&v<=57343||v==65279||65520<=v&&v<=65528||65529<=v&&v<=65531||113824<=v&&v<=113827||119155<=v&&v<=119162||v==917504||v==917505||917506<=v&&v<=917535||917632<=v&&v<=917759||918e3<=v&&v<=921599?it:768<=v&&v<=879||1155<=v&&v<=1159||1160<=v&&v<=1161||1425<=v&&v<=1469||v==1471||1473<=v&&v<=1474||1476<=v&&v<=1477||v==1479||1552<=v&&v<=1562||1611<=v&&v<=1631||v==1648||1750<=v&&v<=1756||1759<=v&&v<=1764||1767<=v&&v<=1768||1770<=v&&v<=1773||v==1809||1840<=v&&v<=1866||1958<=v&&v<=1968||2027<=v&&v<=2035||2070<=v&&v<=2073||2075<=v&&v<=2083||2085<=v&&v<=2087||2089<=v&&v<=2093||2137<=v&&v<=2139||2260<=v&&v<=2273||2275<=v&&v<=2306||v==2362||v==2364||2369<=v&&v<=2376||v==2381||2385<=v&&v<=2391||2402<=v&&v<=2403||v==2433||v==2492||v==2494||2497<=v&&v<=2500||v==2509||v==2519||2530<=v&&v<=2531||2561<=v&&v<=2562||v==2620||2625<=v&&v<=2626||2631<=v&&v<=2632||2635<=v&&v<=2637||v==2641||2672<=v&&v<=2673||v==2677||2689<=v&&v<=2690||v==2748||2753<=v&&v<=2757||2759<=v&&v<=2760||v==2765||2786<=v&&v<=2787||2810<=v&&v<=2815||v==2817||v==2876||v==2878||v==2879||2881<=v&&v<=2884||v==2893||v==2902||v==2903||2914<=v&&v<=2915||v==2946||v==3006||v==3008||v==3021||v==3031||v==3072||3134<=v&&v<=3136||3142<=v&&v<=3144||3146<=v&&v<=3149||3157<=v&&v<=3158||3170<=v&&v<=3171||v==3201||v==3260||v==3263||v==3266||v==3270||3276<=v&&v<=3277||3285<=v&&v<=3286||3298<=v&&v<=3299||3328<=v&&v<=3329||3387<=v&&v<=3388||v==3390||3393<=v&&v<=3396||v==3405||v==3415||3426<=v&&v<=3427||v==3530||v==3535||3538<=v&&v<=3540||v==3542||v==3551||v==3633||3636<=v&&v<=3642||3655<=v&&v<=3662||v==3761||3764<=v&&v<=3769||3771<=v&&v<=3772||3784<=v&&v<=3789||3864<=v&&v<=3865||v==3893||v==3895||v==3897||3953<=v&&v<=3966||3968<=v&&v<=3972||3974<=v&&v<=3975||3981<=v&&v<=3991||3993<=v&&v<=4028||v==4038||4141<=v&&v<=4144||4146<=v&&v<=4151||4153<=v&&v<=4154||4157<=v&&v<=4158||4184<=v&&v<=4185||4190<=v&&v<=4192||4209<=v&&v<=4212||v==4226||4229<=v&&v<=4230||v==4237||v==4253||4957<=v&&v<=4959||5906<=v&&v<=5908||5938<=v&&v<=5940||5970<=v&&v<=5971||6002<=v&&v<=6003||6068<=v&&v<=6069||6071<=v&&v<=6077||v==6086||6089<=v&&v<=6099||v==6109||6155<=v&&v<=6157||6277<=v&&v<=6278||v==6313||6432<=v&&v<=6434||6439<=v&&v<=6440||v==6450||6457<=v&&v<=6459||6679<=v&&v<=6680||v==6683||v==6742||6744<=v&&v<=6750||v==6752||v==6754||6757<=v&&v<=6764||6771<=v&&v<=6780||v==6783||6832<=v&&v<=6845||v==6846||6912<=v&&v<=6915||v==6964||6966<=v&&v<=6970||v==6972||v==6978||7019<=v&&v<=7027||7040<=v&&v<=7041||7074<=v&&v<=7077||7080<=v&&v<=7081||7083<=v&&v<=7085||v==7142||7144<=v&&v<=7145||v==7149||7151<=v&&v<=7153||7212<=v&&v<=7219||7222<=v&&v<=7223||7376<=v&&v<=7378||7380<=v&&v<=7392||7394<=v&&v<=7400||v==7405||v==7412||7416<=v&&v<=7417||7616<=v&&v<=7673||7675<=v&&v<=7679||v==8204||8400<=v&&v<=8412||8413<=v&&v<=8416||v==8417||8418<=v&&v<=8420||8421<=v&&v<=8432||11503<=v&&v<=11505||v==11647||11744<=v&&v<=11775||12330<=v&&v<=12333||12334<=v&&v<=12335||12441<=v&&v<=12442||v==42607||42608<=v&&v<=42610||42612<=v&&v<=42621||42654<=v&&v<=42655||42736<=v&&v<=42737||v==43010||v==43014||v==43019||43045<=v&&v<=43046||43204<=v&&v<=43205||43232<=v&&v<=43249||43302<=v&&v<=43309||43335<=v&&v<=43345||43392<=v&&v<=43394||v==43443||43446<=v&&v<=43449||v==43452||v==43493||43561<=v&&v<=43566||43569<=v&&v<=43570||43573<=v&&v<=43574||v==43587||v==43596||v==43644||v==43696||43698<=v&&v<=43700||43703<=v&&v<=43704||43710<=v&&v<=43711||v==43713||43756<=v&&v<=43757||v==43766||v==44005||v==44008||v==44013||v==64286||65024<=v&&v<=65039||65056<=v&&v<=65071||65438<=v&&v<=65439||v==66045||v==66272||66422<=v&&v<=66426||68097<=v&&v<=68099||68101<=v&&v<=68102||68108<=v&&v<=68111||68152<=v&&v<=68154||v==68159||68325<=v&&v<=68326||v==69633||69688<=v&&v<=69702||69759<=v&&v<=69761||69811<=v&&v<=69814||69817<=v&&v<=69818||69888<=v&&v<=69890||69927<=v&&v<=69931||69933<=v&&v<=69940||v==70003||70016<=v&&v<=70017||70070<=v&&v<=70078||70090<=v&&v<=70092||70191<=v&&v<=70193||v==70196||70198<=v&&v<=70199||v==70206||v==70367||70371<=v&&v<=70378||70400<=v&&v<=70401||v==70460||v==70462||v==70464||v==70487||70502<=v&&v<=70508||70512<=v&&v<=70516||70712<=v&&v<=70719||70722<=v&&v<=70724||v==70726||v==70832||70835<=v&&v<=70840||v==70842||v==70845||70847<=v&&v<=70848||70850<=v&&v<=70851||v==71087||71090<=v&&v<=71093||71100<=v&&v<=71101||71103<=v&&v<=71104||71132<=v&&v<=71133||71219<=v&&v<=71226||v==71229||71231<=v&&v<=71232||v==71339||v==71341||71344<=v&&v<=71349||v==71351||71453<=v&&v<=71455||71458<=v&&v<=71461||71463<=v&&v<=71467||72193<=v&&v<=72198||72201<=v&&v<=72202||72243<=v&&v<=72248||72251<=v&&v<=72254||v==72263||72273<=v&&v<=72278||72281<=v&&v<=72283||72330<=v&&v<=72342||72344<=v&&v<=72345||72752<=v&&v<=72758||72760<=v&&v<=72765||v==72767||72850<=v&&v<=72871||72874<=v&&v<=72880||72882<=v&&v<=72883||72885<=v&&v<=72886||73009<=v&&v<=73014||v==73018||73020<=v&&v<=73021||73023<=v&&v<=73029||v==73031||92912<=v&&v<=92916||92976<=v&&v<=92982||94095<=v&&v<=94098||113821<=v&&v<=113822||v==119141||119143<=v&&v<=119145||119150<=v&&v<=119154||119163<=v&&v<=119170||119173<=v&&v<=119179||119210<=v&&v<=119213||119362<=v&&v<=119364||121344<=v&&v<=121398||121403<=v&&v<=121452||v==121461||v==121476||121499<=v&&v<=121503||121505<=v&&v<=121519||122880<=v&&v<=122886||122888<=v&&v<=122904||122907<=v&&v<=122913||122915<=v&&v<=122916||122918<=v&&v<=122922||125136<=v&&v<=125142||125252<=v&&v<=125258||917536<=v&&v<=917631||917760<=v&&v<=917999?ft:127462<=v&&v<=127487?Dt:v==2307||v==2363||2366<=v&&v<=2368||2377<=v&&v<=2380||2382<=v&&v<=2383||2434<=v&&v<=2435||2495<=v&&v<=2496||2503<=v&&v<=2504||2507<=v&&v<=2508||v==2563||2622<=v&&v<=2624||v==2691||2750<=v&&v<=2752||v==2761||2763<=v&&v<=2764||2818<=v&&v<=2819||v==2880||2887<=v&&v<=2888||2891<=v&&v<=2892||v==3007||3009<=v&&v<=3010||3014<=v&&v<=3016||3018<=v&&v<=3020||3073<=v&&v<=3075||3137<=v&&v<=3140||3202<=v&&v<=3203||v==3262||3264<=v&&v<=3265||3267<=v&&v<=3268||3271<=v&&v<=3272||3274<=v&&v<=3275||3330<=v&&v<=3331||3391<=v&&v<=3392||3398<=v&&v<=3400||3402<=v&&v<=3404||3458<=v&&v<=3459||3536<=v&&v<=3537||3544<=v&&v<=3550||3570<=v&&v<=3571||v==3635||v==3763||3902<=v&&v<=3903||v==3967||v==4145||4155<=v&&v<=4156||4182<=v&&v<=4183||v==4228||v==6070||6078<=v&&v<=6085||6087<=v&&v<=6088||6435<=v&&v<=6438||6441<=v&&v<=6443||6448<=v&&v<=6449||6451<=v&&v<=6456||6681<=v&&v<=6682||v==6741||v==6743||6765<=v&&v<=6770||v==6916||v==6965||v==6971||6973<=v&&v<=6977||6979<=v&&v<=6980||v==7042||v==7073||7078<=v&&v<=7079||v==7082||v==7143||7146<=v&&v<=7148||v==7150||7154<=v&&v<=7155||7204<=v&&v<=7211||7220<=v&&v<=7221||v==7393||7410<=v&&v<=7411||v==7415||43043<=v&&v<=43044||v==43047||43136<=v&&v<=43137||43188<=v&&v<=43203||43346<=v&&v<=43347||v==43395||43444<=v&&v<=43445||43450<=v&&v<=43451||43453<=v&&v<=43456||43567<=v&&v<=43568||43571<=v&&v<=43572||v==43597||v==43755||43758<=v&&v<=43759||v==43765||44003<=v&&v<=44004||44006<=v&&v<=44007||44009<=v&&v<=44010||v==44012||v==69632||v==69634||v==69762||69808<=v&&v<=69810||69815<=v&&v<=69816||v==69932||v==70018||70067<=v&&v<=70069||70079<=v&&v<=70080||70188<=v&&v<=70190||70194<=v&&v<=70195||v==70197||70368<=v&&v<=70370||70402<=v&&v<=70403||v==70463||70465<=v&&v<=70468||70471<=v&&v<=70472||70475<=v&&v<=70477||70498<=v&&v<=70499||70709<=v&&v<=70711||70720<=v&&v<=70721||v==70725||70833<=v&&v<=70834||v==70841||70843<=v&&v<=70844||v==70846||v==70849||71088<=v&&v<=71089||71096<=v&&v<=71099||v==71102||71216<=v&&v<=71218||71227<=v&&v<=71228||v==71230||v==71340||71342<=v&&v<=71343||v==71350||71456<=v&&v<=71457||v==71462||72199<=v&&v<=72200||v==72249||72279<=v&&v<=72280||v==72343||v==72751||v==72766||v==72873||v==72881||v==72884||94033<=v&&v<=94078||v==119142||v==119149?Ot:4352<=v&&v<=4447||43360<=v&&v<=43388?Jt:4448<=v&&v<=4519||55216<=v&&v<=55238?Dn:4520<=v&&v<=4607||55243<=v&&v<=55291?Pn:v==44032||v==44060||v==44088||v==44116||v==44144||v==44172||v==44200||v==44228||v==44256||v==44284||v==44312||v==44340||v==44368||v==44396||v==44424||v==44452||v==44480||v==44508||v==44536||v==44564||v==44592||v==44620||v==44648||v==44676||v==44704||v==44732||v==44760||v==44788||v==44816||v==44844||v==44872||v==44900||v==44928||v==44956||v==44984||v==45012||v==45040||v==45068||v==45096||v==45124||v==45152||v==45180||v==45208||v==45236||v==45264||v==45292||v==45320||v==45348||v==45376||v==45404||v==45432||v==45460||v==45488||v==45516||v==45544||v==45572||v==45600||v==45628||v==45656||v==45684||v==45712||v==45740||v==45768||v==45796||v==45824||v==45852||v==45880||v==45908||v==45936||v==45964||v==45992||v==46020||v==46048||v==46076||v==46104||v==46132||v==46160||v==46188||v==46216||v==46244||v==46272||v==46300||v==46328||v==46356||v==46384||v==46412||v==46440||v==46468||v==46496||v==46524||v==46552||v==46580||v==46608||v==46636||v==46664||v==46692||v==46720||v==46748||v==46776||v==46804||v==46832||v==46860||v==46888||v==46916||v==46944||v==46972||v==47e3||v==47028||v==47056||v==47084||v==47112||v==47140||v==47168||v==47196||v==47224||v==47252||v==47280||v==47308||v==47336||v==47364||v==47392||v==47420||v==47448||v==47476||v==47504||v==47532||v==47560||v==47588||v==47616||v==47644||v==47672||v==47700||v==47728||v==47756||v==47784||v==47812||v==47840||v==47868||v==47896||v==47924||v==47952||v==47980||v==48008||v==48036||v==48064||v==48092||v==48120||v==48148||v==48176||v==48204||v==48232||v==48260||v==48288||v==48316||v==48344||v==48372||v==48400||v==48428||v==48456||v==48484||v==48512||v==48540||v==48568||v==48596||v==48624||v==48652||v==48680||v==48708||v==48736||v==48764||v==48792||v==48820||v==48848||v==48876||v==48904||v==48932||v==48960||v==48988||v==49016||v==49044||v==49072||v==49100||v==49128||v==49156||v==49184||v==49212||v==49240||v==49268||v==49296||v==49324||v==49352||v==49380||v==49408||v==49436||v==49464||v==49492||v==49520||v==49548||v==49576||v==49604||v==49632||v==49660||v==49688||v==49716||v==49744||v==49772||v==49800||v==49828||v==49856||v==49884||v==49912||v==49940||v==49968||v==49996||v==50024||v==50052||v==50080||v==50108||v==50136||v==50164||v==50192||v==50220||v==50248||v==50276||v==50304||v==50332||v==50360||v==50388||v==50416||v==50444||v==50472||v==50500||v==50528||v==50556||v==50584||v==50612||v==50640||v==50668||v==50696||v==50724||v==50752||v==50780||v==50808||v==50836||v==50864||v==50892||v==50920||v==50948||v==50976||v==51004||v==51032||v==51060||v==51088||v==51116||v==51144||v==51172||v==51200||v==51228||v==51256||v==51284||v==51312||v==51340||v==51368||v==51396||v==51424||v==51452||v==51480||v==51508||v==51536||v==51564||v==51592||v==51620||v==51648||v==51676||v==51704||v==51732||v==51760||v==51788||v==51816||v==51844||v==51872||v==51900||v==51928||v==51956||v==51984||v==52012||v==52040||v==52068||v==52096||v==52124||v==52152||v==52180||v==52208||v==52236||v==52264||v==52292||v==52320||v==52348||v==52376||v==52404||v==52432||v==52460||v==52488||v==52516||v==52544||v==52572||v==52600||v==52628||v==52656||v==52684||v==52712||v==52740||v==52768||v==52796||v==52824||v==52852||v==52880||v==52908||v==52936||v==52964||v==52992||v==53020||v==53048||v==53076||v==53104||v==53132||v==53160||v==53188||v==53216||v==53244||v==53272||v==53300||v==53328||v==53356||v==53384||v==53412||v==53440||v==53468||v==53496||v==53524||v==53552||v==53580||v==53608||v==53636||v==53664||v==53692||v==53720||v==53748||v==53776||v==53804||v==53832||v==53860||v==53888||v==53916||v==53944||v==53972||v==54e3||v==54028||v==54056||v==54084||v==54112||v==54140||v==54168||v==54196||v==54224||v==54252||v==54280||v==54308||v==54336||v==54364||v==54392||v==54420||v==54448||v==54476||v==54504||v==54532||v==54560||v==54588||v==54616||v==54644||v==54672||v==54700||v==54728||v==54756||v==54784||v==54812||v==54840||v==54868||v==54896||v==54924||v==54952||v==54980||v==55008||v==55036||v==55064||v==55092||v==55120||v==55148||v==55176?oi:44033<=v&&v<=44059||44061<=v&&v<=44087||44089<=v&&v<=44115||44117<=v&&v<=44143||44145<=v&&v<=44171||44173<=v&&v<=44199||44201<=v&&v<=44227||44229<=v&&v<=44255||44257<=v&&v<=44283||44285<=v&&v<=44311||44313<=v&&v<=44339||44341<=v&&v<=44367||44369<=v&&v<=44395||44397<=v&&v<=44423||44425<=v&&v<=44451||44453<=v&&v<=44479||44481<=v&&v<=44507||44509<=v&&v<=44535||44537<=v&&v<=44563||44565<=v&&v<=44591||44593<=v&&v<=44619||44621<=v&&v<=44647||44649<=v&&v<=44675||44677<=v&&v<=44703||44705<=v&&v<=44731||44733<=v&&v<=44759||44761<=v&&v<=44787||44789<=v&&v<=44815||44817<=v&&v<=44843||44845<=v&&v<=44871||44873<=v&&v<=44899||44901<=v&&v<=44927||44929<=v&&v<=44955||44957<=v&&v<=44983||44985<=v&&v<=45011||45013<=v&&v<=45039||45041<=v&&v<=45067||45069<=v&&v<=45095||45097<=v&&v<=45123||45125<=v&&v<=45151||45153<=v&&v<=45179||45181<=v&&v<=45207||45209<=v&&v<=45235||45237<=v&&v<=45263||45265<=v&&v<=45291||45293<=v&&v<=45319||45321<=v&&v<=45347||45349<=v&&v<=45375||45377<=v&&v<=45403||45405<=v&&v<=45431||45433<=v&&v<=45459||45461<=v&&v<=45487||45489<=v&&v<=45515||45517<=v&&v<=45543||45545<=v&&v<=45571||45573<=v&&v<=45599||45601<=v&&v<=45627||45629<=v&&v<=45655||45657<=v&&v<=45683||45685<=v&&v<=45711||45713<=v&&v<=45739||45741<=v&&v<=45767||45769<=v&&v<=45795||45797<=v&&v<=45823||45825<=v&&v<=45851||45853<=v&&v<=45879||45881<=v&&v<=45907||45909<=v&&v<=45935||45937<=v&&v<=45963||45965<=v&&v<=45991||45993<=v&&v<=46019||46021<=v&&v<=46047||46049<=v&&v<=46075||46077<=v&&v<=46103||46105<=v&&v<=46131||46133<=v&&v<=46159||46161<=v&&v<=46187||46189<=v&&v<=46215||46217<=v&&v<=46243||46245<=v&&v<=46271||46273<=v&&v<=46299||46301<=v&&v<=46327||46329<=v&&v<=46355||46357<=v&&v<=46383||46385<=v&&v<=46411||46413<=v&&v<=46439||46441<=v&&v<=46467||46469<=v&&v<=46495||46497<=v&&v<=46523||46525<=v&&v<=46551||46553<=v&&v<=46579||46581<=v&&v<=46607||46609<=v&&v<=46635||46637<=v&&v<=46663||46665<=v&&v<=46691||46693<=v&&v<=46719||46721<=v&&v<=46747||46749<=v&&v<=46775||46777<=v&&v<=46803||46805<=v&&v<=46831||46833<=v&&v<=46859||46861<=v&&v<=46887||46889<=v&&v<=46915||46917<=v&&v<=46943||46945<=v&&v<=46971||46973<=v&&v<=46999||47001<=v&&v<=47027||47029<=v&&v<=47055||47057<=v&&v<=47083||47085<=v&&v<=47111||47113<=v&&v<=47139||47141<=v&&v<=47167||47169<=v&&v<=47195||47197<=v&&v<=47223||47225<=v&&v<=47251||47253<=v&&v<=47279||47281<=v&&v<=47307||47309<=v&&v<=47335||47337<=v&&v<=47363||47365<=v&&v<=47391||47393<=v&&v<=47419||47421<=v&&v<=47447||47449<=v&&v<=47475||47477<=v&&v<=47503||47505<=v&&v<=47531||47533<=v&&v<=47559||47561<=v&&v<=47587||47589<=v&&v<=47615||47617<=v&&v<=47643||47645<=v&&v<=47671||47673<=v&&v<=47699||47701<=v&&v<=47727||47729<=v&&v<=47755||47757<=v&&v<=47783||47785<=v&&v<=47811||47813<=v&&v<=47839||47841<=v&&v<=47867||47869<=v&&v<=47895||47897<=v&&v<=47923||47925<=v&&v<=47951||47953<=v&&v<=47979||47981<=v&&v<=48007||48009<=v&&v<=48035||48037<=v&&v<=48063||48065<=v&&v<=48091||48093<=v&&v<=48119||48121<=v&&v<=48147||48149<=v&&v<=48175||48177<=v&&v<=48203||48205<=v&&v<=48231||48233<=v&&v<=48259||48261<=v&&v<=48287||48289<=v&&v<=48315||48317<=v&&v<=48343||48345<=v&&v<=48371||48373<=v&&v<=48399||48401<=v&&v<=48427||48429<=v&&v<=48455||48457<=v&&v<=48483||48485<=v&&v<=48511||48513<=v&&v<=48539||48541<=v&&v<=48567||48569<=v&&v<=48595||48597<=v&&v<=48623||48625<=v&&v<=48651||48653<=v&&v<=48679||48681<=v&&v<=48707||48709<=v&&v<=48735||48737<=v&&v<=48763||48765<=v&&v<=48791||48793<=v&&v<=48819||48821<=v&&v<=48847||48849<=v&&v<=48875||48877<=v&&v<=48903||48905<=v&&v<=48931||48933<=v&&v<=48959||48961<=v&&v<=48987||48989<=v&&v<=49015||49017<=v&&v<=49043||49045<=v&&v<=49071||49073<=v&&v<=49099||49101<=v&&v<=49127||49129<=v&&v<=49155||49157<=v&&v<=49183||49185<=v&&v<=49211||49213<=v&&v<=49239||49241<=v&&v<=49267||49269<=v&&v<=49295||49297<=v&&v<=49323||49325<=v&&v<=49351||49353<=v&&v<=49379||49381<=v&&v<=49407||49409<=v&&v<=49435||49437<=v&&v<=49463||49465<=v&&v<=49491||49493<=v&&v<=49519||49521<=v&&v<=49547||49549<=v&&v<=49575||49577<=v&&v<=49603||49605<=v&&v<=49631||49633<=v&&v<=49659||49661<=v&&v<=49687||49689<=v&&v<=49715||49717<=v&&v<=49743||49745<=v&&v<=49771||49773<=v&&v<=49799||49801<=v&&v<=49827||49829<=v&&v<=49855||49857<=v&&v<=49883||49885<=v&&v<=49911||49913<=v&&v<=49939||49941<=v&&v<=49967||49969<=v&&v<=49995||49997<=v&&v<=50023||50025<=v&&v<=50051||50053<=v&&v<=50079||50081<=v&&v<=50107||50109<=v&&v<=50135||50137<=v&&v<=50163||50165<=v&&v<=50191||50193<=v&&v<=50219||50221<=v&&v<=50247||50249<=v&&v<=50275||50277<=v&&v<=50303||50305<=v&&v<=50331||50333<=v&&v<=50359||50361<=v&&v<=50387||50389<=v&&v<=50415||50417<=v&&v<=50443||50445<=v&&v<=50471||50473<=v&&v<=50499||50501<=v&&v<=50527||50529<=v&&v<=50555||50557<=v&&v<=50583||50585<=v&&v<=50611||50613<=v&&v<=50639||50641<=v&&v<=50667||50669<=v&&v<=50695||50697<=v&&v<=50723||50725<=v&&v<=50751||50753<=v&&v<=50779||50781<=v&&v<=50807||50809<=v&&v<=50835||50837<=v&&v<=50863||50865<=v&&v<=50891||50893<=v&&v<=50919||50921<=v&&v<=50947||50949<=v&&v<=50975||50977<=v&&v<=51003||51005<=v&&v<=51031||51033<=v&&v<=51059||51061<=v&&v<=51087||51089<=v&&v<=51115||51117<=v&&v<=51143||51145<=v&&v<=51171||51173<=v&&v<=51199||51201<=v&&v<=51227||51229<=v&&v<=51255||51257<=v&&v<=51283||51285<=v&&v<=51311||51313<=v&&v<=51339||51341<=v&&v<=51367||51369<=v&&v<=51395||51397<=v&&v<=51423||51425<=v&&v<=51451||51453<=v&&v<=51479||51481<=v&&v<=51507||51509<=v&&v<=51535||51537<=v&&v<=51563||51565<=v&&v<=51591||51593<=v&&v<=51619||51621<=v&&v<=51647||51649<=v&&v<=51675||51677<=v&&v<=51703||51705<=v&&v<=51731||51733<=v&&v<=51759||51761<=v&&v<=51787||51789<=v&&v<=51815||51817<=v&&v<=51843||51845<=v&&v<=51871||51873<=v&&v<=51899||51901<=v&&v<=51927||51929<=v&&v<=51955||51957<=v&&v<=51983||51985<=v&&v<=52011||52013<=v&&v<=52039||52041<=v&&v<=52067||52069<=v&&v<=52095||52097<=v&&v<=52123||52125<=v&&v<=52151||52153<=v&&v<=52179||52181<=v&&v<=52207||52209<=v&&v<=52235||52237<=v&&v<=52263||52265<=v&&v<=52291||52293<=v&&v<=52319||52321<=v&&v<=52347||52349<=v&&v<=52375||52377<=v&&v<=52403||52405<=v&&v<=52431||52433<=v&&v<=52459||52461<=v&&v<=52487||52489<=v&&v<=52515||52517<=v&&v<=52543||52545<=v&&v<=52571||52573<=v&&v<=52599||52601<=v&&v<=52627||52629<=v&&v<=52655||52657<=v&&v<=52683||52685<=v&&v<=52711||52713<=v&&v<=52739||52741<=v&&v<=52767||52769<=v&&v<=52795||52797<=v&&v<=52823||52825<=v&&v<=52851||52853<=v&&v<=52879||52881<=v&&v<=52907||52909<=v&&v<=52935||52937<=v&&v<=52963||52965<=v&&v<=52991||52993<=v&&v<=53019||53021<=v&&v<=53047||53049<=v&&v<=53075||53077<=v&&v<=53103||53105<=v&&v<=53131||53133<=v&&v<=53159||53161<=v&&v<=53187||53189<=v&&v<=53215||53217<=v&&v<=53243||53245<=v&&v<=53271||53273<=v&&v<=53299||53301<=v&&v<=53327||53329<=v&&v<=53355||53357<=v&&v<=53383||53385<=v&&v<=53411||53413<=v&&v<=53439||53441<=v&&v<=53467||53469<=v&&v<=53495||53497<=v&&v<=53523||53525<=v&&v<=53551||53553<=v&&v<=53579||53581<=v&&v<=53607||53609<=v&&v<=53635||53637<=v&&v<=53663||53665<=v&&v<=53691||53693<=v&&v<=53719||53721<=v&&v<=53747||53749<=v&&v<=53775||53777<=v&&v<=53803||53805<=v&&v<=53831||53833<=v&&v<=53859||53861<=v&&v<=53887||53889<=v&&v<=53915||53917<=v&&v<=53943||53945<=v&&v<=53971||53973<=v&&v<=53999||54001<=v&&v<=54027||54029<=v&&v<=54055||54057<=v&&v<=54083||54085<=v&&v<=54111||54113<=v&&v<=54139||54141<=v&&v<=54167||54169<=v&&v<=54195||54197<=v&&v<=54223||54225<=v&&v<=54251||54253<=v&&v<=54279||54281<=v&&v<=54307||54309<=v&&v<=54335||54337<=v&&v<=54363||54365<=v&&v<=54391||54393<=v&&v<=54419||54421<=v&&v<=54447||54449<=v&&v<=54475||54477<=v&&v<=54503||54505<=v&&v<=54531||54533<=v&&v<=54559||54561<=v&&v<=54587||54589<=v&&v<=54615||54617<=v&&v<=54643||54645<=v&&v<=54671||54673<=v&&v<=54699||54701<=v&&v<=54727||54729<=v&&v<=54755||54757<=v&&v<=54783||54785<=v&&v<=54811||54813<=v&&v<=54839||54841<=v&&v<=54867||54869<=v&&v<=54895||54897<=v&&v<=54923||54925<=v&&v<=54951||54953<=v&&v<=54979||54981<=v&&v<=55007||55009<=v&&v<=55035||55037<=v&&v<=55063||55065<=v&&v<=55091||55093<=v&&v<=55119||55121<=v&&v<=55147||55149<=v&&v<=55175||55177<=v&&v<=55203?In:v==9757||v==9977||9994<=v&&v<=9997||v==127877||127938<=v&&v<=127940||v==127943||127946<=v&&v<=127948||128066<=v&&v<=128067||128070<=v&&v<=128080||v==128110||128112<=v&&v<=128120||v==128124||128129<=v&&v<=128131||128133<=v&&v<=128135||v==128170||128372<=v&&v<=128373||v==128378||v==128400||128405<=v&&v<=128406||128581<=v&&v<=128583||128587<=v&&v<=128591||v==128675||128692<=v&&v<=128694||v==128704||v==128716||129304<=v&&v<=129308||129310<=v&&v<=129311||v==129318||129328<=v&&v<=129337||129341<=v&&v<=129342||129489<=v&&v<=129501?$n:127995<=v&&v<=127999?Un:v==8205?It:v==9792||v==9794||9877<=v&&v<=9878||v==9992||v==10084||v==127752||v==127806||v==127859||v==127891||v==127908||v==127912||v==127979||v==127981||v==128139||128187<=v&&v<=128188||v==128295||v==128300||v==128488||v==128640||v==128658?_e:128102<=v&&v<=128105?oe:Tn}return this}Te.exports&&(Te.exports=Se)}),o=new r,s=function(Se,We,at){for(var it=o.iterateGraphemes(Se.substring(We)),ft="",Dt=0;Dt<at-We;Dt++){var Ot=it.next();if(ft+=Ot.value,Ot.done)break}return ft},a=(function(Te,Se,We,at,it,ft,Dt){return{start:{line:Te,column:Se,offset:We},end:{line:at,column:it,offset:ft},source:Dt||null}}),c=i(function(Te,Se){(function(We,at){Te.exports=at()})(t,function(){var We="",at,it=ft;function ft(In,Tn){if(typeof In!="string")throw new TypeError("expected a string");if(Tn===1)return In;if(Tn===2)return In+In;var dn=In.length*Tn;if(at!==In||typeof at>"u")at=In,We="";else if(We.length>=dn)return We.substr(0,dn);for(;dn>We.length&&Tn>1;)Tn&1&&(We+=In),Tn>>=1,In+=In;return We+=In,We=We.substr(0,dn),We}var Dt=function(Tn,dn,$n){if(Tn==null||dn==null)return Tn;var Un=String(Tn),It=typeof dn=="number"?dn:parseInt(dn,10);if(isNaN(It)||!isFinite(It))return Un;var _e=Un.length;if(_e>=It)return Un;var oe=String($n);oe===""&&(oe=" ");for(var ee=It-_e;oe.length<ee;)oe+=oe;var ne=oe.length>ee?oe.substr(0,ee):oe;return ne+Un},Ot=Object.assign||function(In){for(var Tn=1;Tn<arguments.length;Tn++){var dn=arguments[Tn];for(var $n in dn)Object.prototype.hasOwnProperty.call(dn,$n)&&(In[$n]=dn[$n])}return In};function Jt(In,Tn,dn,$n){var Un=String(Tn),It=Dt(Un,dn," "),_e=it(" ",$n.tabSize);return It+" | "+In.replace(/\t/g,_e)}function Dn(In,Tn,dn,$n,Un){return In.slice(Tn,dn).map(function(It,_e){return Jt(It,Tn+_e+1,$n,Un)}).join(`
`)}var Pn={extraLines:2,tabSize:4},oi=function(Tn,dn,$n,Un){Un=Ot({},Pn,Un);var It=Tn.split(/\r\n?|\n|\f/),_e=Math.max(1,dn-Un.extraLines)-1,oe=Math.min(dn+Un.extraLines,It.length),ee=String(oe).length,ne=Dn(It,_e,dn,ee,Un),ue=Jt(It[dn-1].substring(0,$n-1),dn,ee,Un),be=it(" ",ue.length)+"^",Le=Dn(It,dn,oe,ee,Un);return[ne,be,Le].filter(Boolean).join(`
`)};return oi})}),h=new Error().stack,m=(function(Te){var Se=Object.create(SyntaxError.prototype);return Object.assign(Se,Te,{name:"SyntaxError"}),Object.defineProperty(Se,"stack",{get:function(){return h?h.replace(/^(.+\n){1,3}/,String(Se)+`
`):""}}),Se}),y=(function(Te,Se,We,at,it){throw m({message:at?Te+`
`+c(Se,at,it):Te,rawMessage:Te,source:We,line:at,column:it})}),M={unexpectedEnd:function(){return"Unexpected end of input"},unexpectedToken:function(Se){for(var We=arguments.length,at=Array(We>1?We-1:0),it=1;it<We;it++)at[it-1]=arguments[it];return"Unexpected token <"+Se+"> at "+at.filter(Boolean).join(":")}},x={unexpectedSymbol:function(Se){for(var We=arguments.length,at=Array(We>1?We-1:0),it=1;it<We;it++)at[it-1]=arguments[it];return"Unexpected symbol <"+Se+"> at "+at.filter(Boolean).join(":")}},T={LEFT_BRACE:0,RIGHT_BRACE:1,LEFT_BRACKET:2,RIGHT_BRACKET:3,COLON:4,COMMA:5,STRING:6,NUMBER:7,TRUE:8,FALSE:9,NULL:10},P={"{":T.LEFT_BRACE,"}":T.RIGHT_BRACE,"[":T.LEFT_BRACKET,"]":T.RIGHT_BRACKET,":":T.COLON,",":T.COMMA},F={true:T.TRUE,false:T.FALSE,null:T.NULL},j={_START_:0,START_QUOTE_OR_CHAR:1,ESCAPE:2},q={'"':0,"\\":1,"/":2,b:3,f:4,n:5,r:6,t:7,u:8},V={_START_:0,MINUS:1,ZERO:2,DIGIT:3,POINT:4,DIGIT_FRACTION:5,EXP:6,EXP_DIGIT_OR_SIGN:7};function H(Te){return Te>="1"&&Te<="9"}function Q(Te){return Te>="0"&&Te<="9"}function Y(Te){return Q(Te)||Te>="a"&&Te<="f"||Te>="A"&&Te<="F"}function z(Te){return Te==="e"||Te==="E"}function se(Te,Se,We,at){var it=Te.charAt(Se);if(it==="\r")Se++,We++,at=1,Te.charAt(Se)===`
`&&Se++;else if(it===`
`)Se++,We++,at=1;else if(it==="	"||it===" ")Se++,at++;else return null;return{index:Se,line:We,column:at}}function le(Te,Se,We,at){var it=Te.charAt(Se);return it in P?{type:P[it],line:We,column:at+1,index:Se+1,value:null}:null}function pe(Te,Se,We,at){for(var it in F)if(F.hasOwnProperty(it)&&Te.substr(Se,it.length)===it)return{type:F[it],line:We,column:at+it.length,index:Se+it.length,value:it};return null}function de(Te,Se,We,at){for(var it=Se,ft=j._START_;Se<Te.length;){var Dt=Te.charAt(Se);switch(ft){case j._START_:{if(Dt==='"')Se++,ft=j.START_QUOTE_OR_CHAR;else return null;break}case j.START_QUOTE_OR_CHAR:{if(Dt==="\\")Se++,ft=j.ESCAPE;else{if(Dt==='"')return Se++,{type:T.STRING,line:We,column:at+Se-it,index:Se,value:Te.slice(it,Se)};Se++}break}case j.ESCAPE:{if(Dt in q){if(Se++,Dt==="u")for(var Ot=0;Ot<4;Ot++){var Jt=Te.charAt(Se);if(Jt&&Y(Jt))Se++;else return null}ft=j.START_QUOTE_OR_CHAR}else return null;break}}}}function ve(Te,Se,We,at){var it=Se,ft=Se,Dt=V._START_;e:for(;Se<Te.length;){var Ot=Te.charAt(Se);switch(Dt){case V._START_:{if(Ot==="-")Dt=V.MINUS;else if(Ot==="0")ft=Se+1,Dt=V.ZERO;else if(H(Ot))ft=Se+1,Dt=V.DIGIT;else return null;break}case V.MINUS:{if(Ot==="0")ft=Se+1,Dt=V.ZERO;else if(H(Ot))ft=Se+1,Dt=V.DIGIT;else return null;break}case V.ZERO:{if(Ot===".")Dt=V.POINT;else if(z(Ot))Dt=V.EXP;else break e;break}case V.DIGIT:{if(Q(Ot))ft=Se+1;else if(Ot===".")Dt=V.POINT;else if(z(Ot))Dt=V.EXP;else break e;break}case V.POINT:{if(Q(Ot))ft=Se+1,Dt=V.DIGIT_FRACTION;else break e;break}case V.DIGIT_FRACTION:{if(Q(Ot))ft=Se+1;else if(z(Ot))Dt=V.EXP;else break e;break}case V.EXP:{if(Ot==="+"||Ot==="-")Dt=V.EXP_DIGIT_OR_SIGN;else if(Q(Ot))ft=Se+1,Dt=V.EXP_DIGIT_OR_SIGN;else break e;break}case V.EXP_DIGIT_OR_SIGN:{if(Q(Ot))ft=Se+1;else break e;break}}Se++}return ft>0?{type:T.NUMBER,line:We,column:at+ft-it,index:ft,value:Te.slice(it,ft)}:null}var Ee=function(Se,We){for(var at=1,it=1,ft=0,Dt=[];ft<Se.length;){var Ot=[Se,ft,at,it],Jt=se.apply(void 0,Ot);if(Jt){ft=Jt.index,at=Jt.line,it=Jt.column;continue}var Dn=le.apply(void 0,Ot)||pe.apply(void 0,Ot)||de.apply(void 0,Ot)||ve.apply(void 0,Ot);if(Dn){var Pn={type:Dn.type,value:Dn.value,loc:a(at,it,ft,Dn.line,Dn.column,Dn.index,We.source)};Dt.push(Pn),ft=Dn.index,at=Dn.line,it=Dn.column}else y(x.unexpectedSymbol(s(Se,ft,ft+1),We.source,at,it),Se,We.source,at,it)}return Dt},Re={_START_:0,OPEN_OBJECT:1,PROPERTY:2,COMMA:3},je={_START_:0,KEY:1,COLON:2},Ie={_START_:0,OPEN_ARRAY:1,VALUE:2,COMMA:3},qe={loc:!0,source:null};function tt(Te,Se,We){var at=Se.length>0?Se[Se.length-1].loc.end:{line:1,column:1};y(M.unexpectedEnd(),Te,We.source,at.line,at.column)}function At(Te){for(var Se=0,We=0;We<4;We++)Se=Se*16+parseInt(Te[We],16);return String.fromCharCode(Se)}var ke={b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},we=['"',"\\","/"];function ze(Te){for(var Se="",We=0;We<Te.length;We++){var at=Te.charAt(We);if(at==="\\"){We++;var it=Te.charAt(We);if(it==="u")Se+=At(Te.substr(We+1,4)),We+=4;else if(we.indexOf(it)!==-1)Se+=it;else if(it in ke)Se+=ke[it];else break}else Se+=at}return Se}function Me(Te,Se,We,at){for(var it=void 0,ft={type:"Object",children:[]},Dt=Re._START_;We<Se.length;){var Ot=Se[We];switch(Dt){case Re._START_:{if(Ot.type===T.LEFT_BRACE)it=Ot,Dt=Re.OPEN_OBJECT,We++;else return null;break}case Re.OPEN_OBJECT:{if(Ot.type===T.RIGHT_BRACE)return at.loc&&(ft.loc=a(it.loc.start.line,it.loc.start.column,it.loc.start.offset,Ot.loc.end.line,Ot.loc.end.column,Ot.loc.end.offset,at.source)),{value:ft,index:We+1};var Jt=lt(Te,Se,We,at);ft.children.push(Jt.value),Dt=Re.PROPERTY,We=Jt.index;break}case Re.PROPERTY:{if(Ot.type===T.RIGHT_BRACE)return at.loc&&(ft.loc=a(it.loc.start.line,it.loc.start.column,it.loc.start.offset,Ot.loc.end.line,Ot.loc.end.column,Ot.loc.end.offset,at.source)),{value:ft,index:We+1};Ot.type===T.COMMA?(Dt=Re.COMMA,We++):y(M.unexpectedToken(s(Te,Ot.loc.start.offset,Ot.loc.end.offset),at.source,Ot.loc.start.line,Ot.loc.start.column),Te,at.source,Ot.loc.start.line,Ot.loc.start.column);break}case Re.COMMA:{var Dn=lt(Te,Se,We,at);Dn?(We=Dn.index,ft.children.push(Dn.value),Dt=Re.PROPERTY):y(M.unexpectedToken(s(Te,Ot.loc.start.offset,Ot.loc.end.offset),at.source,Ot.loc.start.line,Ot.loc.start.column),Te,at.source,Ot.loc.start.line,Ot.loc.start.column);break}}}tt(Te,Se,at)}function lt(Te,Se,We,at){for(var it=void 0,ft={type:"Property",key:null,value:null},Dt=je._START_;We<Se.length;){var Ot=Se[We];switch(Dt){case je._START_:{if(Ot.type===T.STRING){var Jt={type:"Identifier",value:ze(Te.slice(Ot.loc.start.offset+1,Ot.loc.end.offset-1)),raw:Ot.value};at.loc&&(Jt.loc=Ot.loc),it=Ot,ft.key=Jt,Dt=je.KEY,We++}else return null;break}case je.KEY:{Ot.type===T.COLON?(Dt=je.COLON,We++):y(M.unexpectedToken(s(Te,Ot.loc.start.offset,Ot.loc.end.offset),at.source,Ot.loc.start.line,Ot.loc.start.column),Te,at.source,Ot.loc.start.line,Ot.loc.start.column);break}case je.COLON:{var Dn=Bt(Te,Se,We,at);return ft.value=Dn.value,at.loc&&(ft.loc=a(it.loc.start.line,it.loc.start.column,it.loc.start.offset,Dn.value.loc.end.line,Dn.value.loc.end.column,Dn.value.loc.end.offset,at.source)),{value:ft,index:Dn.index}}}}}function nt(Te,Se,We,at){for(var it=void 0,ft={type:"Array",children:[]},Dt=Ie._START_,Ot=void 0;We<Se.length;)switch(Ot=Se[We],Dt){case Ie._START_:{if(Ot.type===T.LEFT_BRACKET)it=Ot,Dt=Ie.OPEN_ARRAY,We++;else return null;break}case Ie.OPEN_ARRAY:{if(Ot.type===T.RIGHT_BRACKET)return at.loc&&(ft.loc=a(it.loc.start.line,it.loc.start.column,it.loc.start.offset,Ot.loc.end.line,Ot.loc.end.column,Ot.loc.end.offset,at.source)),{value:ft,index:We+1};var Jt=Bt(Te,Se,We,at);We=Jt.index,ft.children.push(Jt.value),Dt=Ie.VALUE;break}case Ie.VALUE:{if(Ot.type===T.RIGHT_BRACKET)return at.loc&&(ft.loc=a(it.loc.start.line,it.loc.start.column,it.loc.start.offset,Ot.loc.end.line,Ot.loc.end.column,Ot.loc.end.offset,at.source)),{value:ft,index:We+1};Ot.type===T.COMMA?(Dt=Ie.COMMA,We++):y(M.unexpectedToken(s(Te,Ot.loc.start.offset,Ot.loc.end.offset),at.source,Ot.loc.start.line,Ot.loc.start.column),Te,at.source,Ot.loc.start.line,Ot.loc.start.column);break}case Ie.COMMA:{var Dn=Bt(Te,Se,We,at);We=Dn.index,ft.children.push(Dn.value),Dt=Ie.VALUE;break}}tt(Te,Se,at)}function bt(Te,Se,We,at){var it=Se[We],ft=null;switch(it.type){case T.STRING:{ft=ze(Te.slice(it.loc.start.offset+1,it.loc.end.offset-1));break}case T.NUMBER:{ft=Number(it.value);break}case T.TRUE:{ft=!0;break}case T.FALSE:{ft=!1;break}case T.NULL:{ft=null;break}default:return null}var Dt={type:"Literal",value:ft,raw:it.value};return at.loc&&(Dt.loc=it.loc),{value:Dt,index:We+1}}function Bt(Te,Se,We,at){var it=Se[We],ft=bt.apply(void 0,arguments)||Me.apply(void 0,arguments)||nt.apply(void 0,arguments);if(ft)return ft;y(M.unexpectedToken(s(Te,it.loc.start.offset,it.loc.end.offset),at.source,it.loc.start.line,it.loc.start.column),Te,at.source,it.loc.start.line,it.loc.start.column)}var Ke=(function(Te,Se){Se=Object.assign({},qe,Se);var We=Ee(Te,Se);We.length===0&&tt(Te,We,Se);var at=Bt(Te,We,0,Se);if(at.index===We.length)return at.value;var it=We[at.index];y(M.unexpectedToken(s(Te,it.loc.start.offset,it.loc.end.offset),Se.source,it.loc.start.line,it.loc.start.column),Te,Se.source,it.loc.start.line,it.loc.start.column)});return Ke}))})(xw)),xw.exports}var Xwe=Zwe();const mK=eu(Xwe);function Ea(){var n="/home/runner/work/maputnik/maputnik/src/libs/json-path-to-position.ts",e="68bf9a3bcb07bd54be36702e0c3494ce552968d6",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/json-path-to-position.ts",statementMap:{0:{start:{line:2,column:2},end:{line:4,column:3}},1:{start:{line:3,column:4},end:{line:3,column:18}},2:{start:{line:5,column:2},end:{line:7,column:3}},3:{start:{line:6,column:4},end:{line:6,column:16}},4:{start:{line:8,column:2},end:{line:10,column:3}},5:{start:{line:9,column:4},end:{line:9,column:18}},6:{start:{line:11,column:14},end:{line:11,column:21}},7:{start:{line:12,column:2},end:{line:14,column:3}},8:{start:{line:13,column:4},end:{line:13,column:70}},9:{start:{line:15,column:18},end:{line:17,column:4}},10:{start:{line:16,column:4},end:{line:16,column:100}},11:{start:{line:18,column:2},end:{line:18,column:59}}},fnMap:{0:{name:"jsonPathToPosition",decl:{start:{line:1,column:16},end:{line:1,column:34}},loc:{start:{line:1,column:47},end:{line:19,column:1}},line:1},1:{name:"(anonymous_1)",decl:{start:{line:15,column:37},end:{line:15,column:38}},loc:{start:{line:15,column:52},end:{line:17,column:3}},line:15}},branchMap:{0:{loc:{start:{line:2,column:2},end:{line:4,column:3}},type:"if",locations:[{start:{line:2,column:2},end:{line:4,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:2},1:{loc:{start:{line:5,column:2},end:{line:7,column:3}},type:"if",locations:[{start:{line:5,column:2},end:{line:7,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:5},2:{loc:{start:{line:8,column:2},end:{line:10,column:3}},type:"if",locations:[{start:{line:8,column:2},end:{line:10,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:8},3:{loc:{start:{line:12,column:2},end:{line:14,column:3}},type:"if",locations:[{start:{line:12,column:2},end:{line:14,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:12},4:{loc:{start:{line:16,column:11},end:{line:16,column:99}},type:"binary-expr",locations:[{start:{line:16,column:11},end:{line:16,column:29}},{start:{line:16,column:33},end:{line:16,column:68}},{start:{line:16,column:72},end:{line:16,column:99}}],line:16}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},f:{0:0,1:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/json-path-to-position.ts"],names:[],mappings:"AAEO,gBAAS,mBAAmB,MAAgB,MAA6C;AAC9F,MAAI,CAAC,MAAM;AACT,WAAO;AAAA,EACT;AACA,MAAI,KAAK,SAAS,GAAG;AACnB,WAAO;AAAA,EACT;AACA,MAAI,EAAE,cAAc,OAAO;AACzB,WAAO;AAAA,EACT;AACA,QAAM,MAAM,KAAK,CAAC;AAClB,MAAI,IAAI,MAAM,UAAU,GAAG;AACzB,WAAO,mBAAmB,KAAK,MAAM,CAAC,GAAG,KAAK,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC;AAAA,EAClE;AACA,QAAM,UAAU,KAAK,SAAS,KAAK,CAAC,cAAc;AAChD,WACE,SAAS,aACT,UAAU,IAAI,SAAS,gBACvB,UAAU,IAAI,UAAU;AAAA,EAE5B,CAAC;AACD,SAAO,mBAAmB,KAAK,MAAM,CAAC,GAAG,SAAS,KAAK;AACzD;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"68bf9a3bcb07bd54be36702e0c3494ce552968d6"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Ea=function(){return s},s}Ea();function AD(n,e){if(Ea().f[0]++,Ea().s[0]++,e)Ea().b[0][1]++;else{Ea().b[0][0]++,Ea().s[1]++;return}if(Ea().s[2]++,n.length<1)return Ea().b[1][0]++,Ea().s[3]++,e;if(Ea().b[1][1]++,Ea().s[4]++,"children"in e)Ea().b[2][1]++;else{Ea().b[2][0]++,Ea().s[5]++;return}const t=(Ea().s[6]++,n[0]);if(Ea().s[7]++,t.match(/^[0-9]+$/))return Ea().b[3][0]++,Ea().s[8]++,AD(n.slice(1),e.children[+n[0]]);Ea().b[3][1]++;const i=(Ea().s[9]++,e.children.find(r=>(Ea().f[1]++,Ea().s[10]++,Ea().b[4][0]++,"key"in r&&(Ea().b[4][1]++,r.key.type==="Identifier")&&(Ea().b[4][2]++,r.key.value===t))));return Ea().s[11]++,AD(n.slice(1),i?.value)}function Rn(){var n="/home/runner/work/maputnik/maputnik/src/libs/codemirror-editor-factory.ts",e="fed5a4f9200b6a5cf90f61b2c7f89f45308868c6",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/codemirror-editor-factory.ts",statementMap:{0:{start:{line:11,column:22},end:{line:11,column:24}},1:{start:{line:12,column:2},end:{line:37,column:3}},2:{start:{line:13,column:29},end:{line:13,column:34}},3:{start:{line:14,column:4},end:{line:36,column:5}},4:{start:{line:15,column:6},end:{line:20,column:9}},5:{start:{line:22,column:19},end:{line:22,column:81}},6:{start:{line:23,column:19},end:{line:23,column:48}},7:{start:{line:24,column:6},end:{line:27,column:7}},8:{start:{line:25,column:8},end:{line:25,column:67}},9:{start:{line:26,column:8},end:{line:26,column:17}},10:{start:{line:28,column:6},end:{line:35,column:7}},11:{start:{line:29,column:8},end:{line:34,column:11}},12:{start:{line:38,column:2},end:{line:38,column:21}},13:{start:{line:41,column:2},end:{line:70,column:4}},14:{start:{line:42,column:17},end:{line:42,column:42}},15:{start:{line:43,column:4},end:{line:68,column:5}},16:{start:{line:44,column:25},end:{line:44,column:41}},17:{start:{line:45,column:18},end:{line:45,column:33}},18:{start:{line:46,column:31},end:{line:56,column:8}},19:{start:{line:57,column:27},end:{line:65,column:8}},20:{start:{line:58,column:8},end:{line:58,column:74}},21:{start:{line:60,column:32},end:{line:60,column:83}},22:{start:{line:61,column:8},end:{line:64,column:10}},23:{start:{line:66,column:6},end:{line:66,column:67}},24:{start:{line:69,column:4},end:{line:69,column:14}},25:{start:{line:73,column:2},end:{line:89,column:4}},26:{start:{line:74,column:17},end:{line:74,column:42}},27:{start:{line:75,column:4},end:{line:87,column:5}},28:{start:{line:76,column:25},end:{line:76,column:41}},29:{start:{line:77,column:18},end:{line:77,column:33}},30:{start:{line:78,column:31},end:{line:78,column:59}},31:{start:{line:79,column:27},end:{line:84,column:8}},32:{start:{line:80,column:8},end:{line:83,column:10}},33:{start:{line:85,column:6},end:{line:85,column:67}},34:{start:{line:88,column:4},end:{line:88,column:14}},35:{start:{line:92,column:2},end:{line:102,column:4}},36:{start:{line:93,column:17},end:{line:93,column:42}},37:{start:{line:94,column:23},end:{line:94,column:39}},38:{start:{line:95,column:16},end:{line:95,column:31}},39:{start:{line:96,column:16},end:{line:96,column:61}},40:{start:{line:97,column:4},end:{line:99,column:5}},41:{start:{line:98,column:6},end:{line:98,column:16}},42:{start:{line:100,column:19},end:{line:100,column:28}},43:{start:{line:101,column:4},end:{line:101,column:59}},44:{start:{line:105,column:23},end:{line:105,column:31}},45:{start:{line:105,column:29},end:{line:105,column:31}},46:{start:{line:106,column:2},end:{line:119,column:3}},47:{start:{line:108,column:6},end:{line:108,column:51}},48:{start:{line:109,column:6},end:{line:109,column:12}},49:{start:{line:111,column:6},end:{line:111,column:51}},50:{start:{line:112,column:6},end:{line:112,column:12}},51:{start:{line:114,column:6},end:{line:114,column:66}},52:{start:{line:115,column:6},end:{line:115,column:12}},53:{start:{line:117,column:6},end:{line:117,column:32}},54:{start:{line:117,column:29},end:{line:117,column:31}},55:{start:{line:118,column:6},end:{line:118,column:12}},56:{start:{line:120,column:2},end:{line:156,column:5}},57:{start:{line:133,column:8},end:{line:137,column:9}},58:{start:{line:134,column:22},end:{line:134,column:38}},59:{start:{line:135,column:24},end:{line:135,column:38}},60:{start:{line:136,column:10},end:{line:136,column:32}},61:{start:{line:138,column:8},end:{line:144,column:9}},62:{start:{line:139,column:10},end:{line:143,column:11}},63:{start:{line:140,column:12},end:{line:140,column:28}},64:{start:{line:142,column:12},end:{line:142,column:27}},65:{start:{line:148,column:27},end:{line:148,column:50}},66:{start:{line:149,column:8},end:{line:151,column:9}},67:{start:{line:150,column:10},end:{line:150,column:28}},68:{start:{line:152,column:8},end:{line:152,column:36}}},fnMap:{0:{name:"getDiagnosticsFromExpressionErrors",decl:{start:{line:10,column:9},end:{line:10,column:43}},loc:{start:{line:10,column:57},end:{line:39,column:1}},line:10},1:{name:"createMaplibreLayerLinter",decl:{start:{line:40,column:9},end:{line:40,column:34}},loc:{start:{line:40,column:37},end:{line:71,column:1}},line:40},2:{name:"(anonymous_2)",decl:{start:{line:41,column:9},end:{line:41,column:10}},loc:{start:{line:41,column:19},end:{line:70,column:3}},line:41},3:{name:"(anonymous_3)",decl:{start:{line:57,column:51},end:{line:57,column:52}},loc:{start:{line:57,column:60},end:{line:59,column:7}},line:57},4:{name:"(anonymous_4)",decl:{start:{line:59,column:13},end:{line:59,column:14}},loc:{start:{line:59,column:22},end:{line:65,column:7}},line:59},5:{name:"createMaplibreStyleLinter",decl:{start:{line:72,column:9},end:{line:72,column:34}},loc:{start:{line:72,column:37},end:{line:90,column:1}},line:72},6:{name:"(anonymous_6)",decl:{start:{line:73,column:9},end:{line:73,column:10}},loc:{start:{line:73,column:19},end:{line:89,column:3}},line:73},7:{name:"(anonymous_7)",decl:{start:{line:79,column:48},end:{line:79,column:49}},loc:{start:{line:79,column:57},end:{line:84,column:7}},line:79},8:{name:"createMaplibreExpressionLinter",decl:{start:{line:91,column:9},end:{line:91,column:39}},loc:{start:{line:91,column:46},end:{line:103,column:1}},line:91},9:{name:"(anonymous_9)",decl:{start:{line:92,column:9},end:{line:92,column:10}},loc:{start:{line:92,column:19},end:{line:102,column:3}},line:92},10:{name:"createEditor",decl:{start:{line:104,column:16},end:{line:104,column:28}},loc:{start:{line:104,column:36},end:{line:157,column:1}},line:104},11:{name:"(anonymous_11)",decl:{start:{line:105,column:23},end:{line:105,column:24}},loc:{start:{line:105,column:29},end:{line:105,column:31}},line:105},12:{name:"(anonymous_12)",decl:{start:{line:117,column:23},end:{line:117,column:24}},loc:{start:{line:117,column:29},end:{line:117,column:31}},line:117},13:{name:"(anonymous_13)",decl:{start:{line:132,column:35},end:{line:132,column:36}},loc:{start:{line:132,column:47},end:{line:145,column:7}},line:132},14:{name:"(anonymous_14)",decl:{start:{line:147,column:13},end:{line:147,column:14}},loc:{start:{line:147,column:23},end:{line:153,column:7}},line:147}},branchMap:{0:{loc:{start:{line:14,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:14,column:4},end:{line:36,column:5}},{start:{line:21,column:11},end:{line:36,column:5}}],line:14},1:{loc:{start:{line:17,column:12},end:{line:17,column:44}},type:"cond-expr",locations:[{start:{line:17,column:22},end:{line:17,column:40}},{start:{line:17,column:43},end:{line:17,column:44}}],line:17},2:{loc:{start:{line:24,column:6},end:{line:27,column:7}},type:"if",locations:[{start:{line:24,column:6},end:{line:27,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:24},3:{loc:{start:{line:28,column:6},end:{line:35,column:7}},type:"if",locations:[{start:{line:28,column:6},end:{line:35,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:28},4:{loc:{start:{line:97,column:4},end:{line:99,column:5}},type:"if",locations:[{start:{line:97,column:4},end:{line:99,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:97},5:{loc:{start:{line:106,column:2},end:{line:119,column:3}},type:"switch",locations:[{start:{line:107,column:4},end:{line:109,column:12}},{start:{line:110,column:4},end:{line:112,column:12}},{start:{line:113,column:4},end:{line:115,column:12}},{start:{line:116,column:4},end:{line:118,column:12}}],line:106},6:{loc:{start:{line:133,column:8},end:{line:137,column:9}},type:"if",locations:[{start:{line:133,column:8},end:{line:137,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:133},7:{loc:{start:{line:138,column:8},end:{line:144,column:9}},type:"if",locations:[{start:{line:138,column:8},end:{line:144,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:138},8:{loc:{start:{line:139,column:10},end:{line:143,column:11}},type:"if",locations:[{start:{line:139,column:10},end:{line:143,column:11}},{start:{line:141,column:17},end:{line:143,column:11}}],line:139},9:{loc:{start:{line:149,column:8},end:{line:151,column:9}},type:"if",locations:[{start:{line:149,column:8},end:{line:151,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:149}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0,0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/codemirror-editor-factory.ts"],names:[],mappings:"AAAA,SAAS,kBAAkB;AAC3B,SAAS,kBAAkB;AAC3B,SAAS,aAAa,mBAAmB;AACzC,SAAS,MAAM,uBAAuB;AACtC,SAAS,QAAQ,kBAAmC;AACpD,SAAS,eAAe;AACxB,SAAS,YAA6C,wBAAwB;AAC9E,OAAO,eAAsD;AAC7D,SAAS,0BAA0B;AASnC,SAAS,mCAAmC,QAAuB,KAA+B;AAChG,QAAM,cAA4B,CAAC;AACnC,aAAW,SAAS,QAAQ;AAC1B,UAAM,EAAC,KAAK,QAAO,IAAI;AACvB,QAAI,CAAC,KAAK;AACR,kBAAY,KAAK;AAAA,QACf,MAAM;AAAA,QACN,IAAI,IAAI,MAAM,IAAI,IAAI,IAAI,SAAS;AAAA,QACnC,UAAU;AAAA,QACV;AAAA,MACF,CAAC;AAAA,IACH,OAAO;AACL,YAAM,OAAO,IAAI,QAAQ,YAAY,EAAE,EAAE,MAAM,WAAW,EAAE,OAAO,OAAO;AAC1E,YAAM,OAAO,mBAAmB,MAAM,GAAG;AACzC,UAAI,CAAC,MAAM;AACT,gBAAQ,KAAK,uCAAuC,KAAK;AACzD;AAAA,MACF;AACA,UAAI,KAAK,KAAK;AACZ,oBAAY,KAAK;AAAA,UACf,MAAM,KAAK,IAAI,MAAM;AAAA,UACrB,IAAI,KAAK,IAAI,IAAI;AAAA,UACjB,UAAU;AAAA,UACV;AAAA,QACF,CAAC;AAAA,MACH;AAAA,IACF;AAAA,EACF;AACA,SAAO;AACT;AAEA,SAAS,4BAA4B;AACnC,SAAO,CAAC,SAAqB;AAC3B,UAAM,OAAO,KAAK,MAAM,IAAI,SAAS;AAErC,QAAI;AAEF,YAAM,aAAa,KAAK,MAAM,IAAI;AAClC,YAAM,MAAM,UAAU,IAAI;AAG1B,YAAM,mBAAmB,iBAAiB;AAAA,QACxC,WAAW;AAAA,QACX,QAAQ;AAAA,QACR,YAAY,CAAC;AAAA,QACb,WAAW,CAAC;AAAA,QACZ,UAAU;AAAA,QACV,UAAU;AAAA,QACV,UAAU;AAAA,UACR;AAAA,QACF;AAAA,MACF,CAAC;AAED,YAAM,eAAe,iBAClB,OAAO,SAAO;AAEb,eAAO,CAAC,IAAI,QAAQ,MAAM,sCAAsC;AAAA,MAClE,CAAC,EACA,IAAI,SAAO;AAEV,cAAM,kBAAkB,IAAI,QAAQ,QAAQ,iBAAiB,EAAE,EAAE,MAAM,GAAG;AAC1E,eAAO;AAAA,UACL,KAAK,gBAAgB,CAAC;AAAA,UACtB,SAAS,gBAAgB,CAAC;AAAA,QAC5B;AAAA,MACF,CAAC;AACH,aAAO,mCAAmC,cAAc,GAAG;AAAA,IAC7D,QAAQ;AAAA,IAER;AACA,WAAO,CAAC;AAAA,EACV;AACF;AAEA,SAAS,4BAA4B;AACnC,SAAO,CAAC,SAAqB;AAC3B,UAAM,OAAO,KAAK,MAAM,IAAI,SAAS;AAErC,QAAI;AAEF,YAAM,aAAa,KAAK,MAAM,IAAI;AAClC,YAAM,MAAM,UAAU,IAAI;AAG1B,YAAM,mBAAmB,iBAAiB,UAAU;AACpD,YAAM,eAAe,iBAAiB,IAAI,SAAO;AAC/C,eAAO;AAAA,UACL,KAAK,IAAI,QAAQ,MAAM,GAAG,EAAE,CAAC;AAAA,UAC7B,SAAS,IAAI;AAAA,QACf;AAAA,MACF,CAAC;AACD,aAAO,mCAAmC,cAAc,GAAG;AAAA,IAC7D,QAAQ;AAAA,IAER;AACA,WAAO,CAAC;AAAA,EACV;AACF;AAEA,SAAS,+BAA+B,MAAmC;AACzE,SAAO,CAAC,SAAqB;AAC3B,UAAM,OAAO,KAAK,MAAM,IAAI,SAAS;AACrC,UAAM,aAAa,KAAK,MAAM,IAAI;AAClC,UAAM,MAAM,UAAU,IAAI;AAC1B,UAAM,MAAM,WAAW,iBAAiB,YAAY,IAAI;AACxD,QAAI,KAAK,WAAW,SAAS;AAC3B,aAAO,CAAC;AAAA,IACV;AACA,UAAM,SAAS,IAAI;AACnB,WAAO,mCAAmC,QAAQ,GAAG;AAAA,EACvD;AACF;AAEO,gBAAS,aAAa,OAQd;AACb,MAAI,iBAAqD,MAAM,CAAC;AAChE,UAAQ,MAAM,UAAU;AAAA,IACtB,KAAK;AACH,uBAAiB,0BAA0B;AAC3C;AAAA,IACF,KAAK;AACH,uBAAiB,0BAA0B;AAC3C;AAAA,IACF,KAAK;AACH,uBAAiB,+BAA+B,MAAM,IAAI;AAC1D;AAAA,IACF,KAAK;AACH,uBAAiB,MAAM,CAAC;AACxB;AAAA,EACJ;AAEA,SAAO,IAAI,WAAW;AAAA,IACpB,KAAK,MAAM;AAAA,IACX,YAAY;AAAA,MACV;AAAA,MACA,KAAK;AAAA,MACL;AAAA,MACA,IAAI,YAAY,EAAE,GAAG,YAAY,QAAQ,GAAG,CAAC,CAAC;AAAA,MAC9C,WAAW,MAAM;AAAA,QACf,KAAK;AAAA,UACH,UAAU;AAAA,QACZ;AAAA,MACF,CAAC;AAAA,MACD,WAAW,eAAe,GAAG,CAAC,WAAW;AACvC,YAAI,OAAO,YAAY;AACrB,gBAAM,MAAM,OAAO,MAAM;AACzB,gBAAM,QAAQ,IAAI,SAAS;AAC3B,gBAAM,SAAS,KAAK;AAAA,QACtB;AACA,YAAI,OAAO,cAAc;AACvB,cAAI,OAAO,KAAK,UAAU;AACxB,kBAAM,QAAQ;AAAA,UAChB,OAAO;AACL,kBAAM,OAAO;AAAA,UACf;AAAA,QACF;AAAA,MACF,CAAC;AAAA,MACD,WAAW;AAAA,MACX,OAAO,CAAC,SAAqB;AAC3B,cAAM,aAAa,gBAAgB,EAAE,IAAI;AACzC,YAAI,WAAW,SAAS,GAAG;AACzB,iBAAO;AAAA,QACT;AACA,eAAO,eAAe,IAAI;AAAA,MAC5B,CAAC;AAAA,IACH;AAAA,IACA,QAAQ,MAAM;AAAA,EAChB,CAAC;AACH;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"fed5a4f9200b6a5cf90f61b2c7f89f45308868c6"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Rn=function(){return s},s}Rn();function gK(n,e){Rn().f[0]++;const t=(Rn().s[0]++,[]);Rn().s[1]++;for(const i of n){const{key:r,message:o}=(Rn().s[2]++,i);if(Rn().s[3]++,!r)Rn().b[0][0]++,Rn().s[4]++,t.push({from:0,to:e.loc?(Rn().b[1][0]++,e.loc.end.offset):(Rn().b[1][1]++,0),severity:"error",message:o});else{Rn().b[0][1]++;const s=(Rn().s[5]++,r.replace(/^\[|\]$/g,"").split(/\.|[[\]]+/).filter(Boolean)),a=(Rn().s[6]++,AD(s,e));if(Rn().s[7]++,a)Rn().b[2][1]++;else{Rn().b[2][0]++,Rn().s[8]++,console.warn("Something went wrong parsing error:",i),Rn().s[9]++;continue}Rn().s[10]++,a.loc?(Rn().b[3][0]++,Rn().s[11]++,t.push({from:a.loc.start.offset,to:a.loc.end.offset,severity:"error",message:o})):Rn().b[3][1]++}}return Rn().s[12]++,t}function Jwe(){return Rn().f[1]++,Rn().s[13]++,n=>{Rn().f[2]++;const e=(Rn().s[14]++,n.state.doc.toString());Rn().s[15]++;try{const t=(Rn().s[16]++,JSON.parse(e)),i=(Rn().s[17]++,mK(e)),r=(Rn().s[18]++,Bd({version:8,name:"Empty Style",metadata:{},sources:{},sprite:"",glyphs:"https://example.com/glyphs/{fontstack}/{range}.pbf",layers:[t]})),o=(Rn().s[19]++,r.filter(s=>(Rn().f[3]++,Rn().s[20]++,!s.message.match(/^layers\[0\]: source ".*" not found$/))).map(s=>{Rn().f[4]++;const a=(Rn().s[21]++,s.message.replace(/^layers\[0\]./,"").split(":"));return Rn().s[22]++,{key:a[0],message:a[1]}}));return Rn().s[23]++,gK(o,i)}catch{}return Rn().s[24]++,[]}}function eSe(){return Rn().f[5]++,Rn().s[25]++,n=>{Rn().f[6]++;const e=(Rn().s[26]++,n.state.doc.toString());Rn().s[27]++;try{const t=(Rn().s[28]++,JSON.parse(e)),i=(Rn().s[29]++,mK(e)),r=(Rn().s[30]++,Bd(t)),o=(Rn().s[31]++,r.map(s=>(Rn().f[7]++,Rn().s[32]++,{key:s.message.split(":")[0],message:s.message})));return Rn().s[33]++,gK(o,i)}catch{}return Rn().s[34]++,[]}}function tSe(n){return Rn().f[8]++,Rn().s[35]++,e=>{Rn().f[9]++;const t=(Rn().s[36]++,e.state.doc.toString()),i=(Rn().s[37]++,JSON.parse(t)),r=(Rn().s[38]++,mK(t)),o=(Rn().s[39]++,ade.createExpression(i,n));if(Rn().s[40]++,o?.result!=="error")return Rn().b[4][0]++,Rn().s[41]++,[];Rn().b[4][1]++;const s=(Rn().s[42]++,o.value);return Rn().s[43]++,gK(s,r)}}function nSe(n){Rn().f[10]++,Rn().s[44]++;let e=()=>(Rn().f[11]++,Rn().s[45]++,[]);switch(Rn().s[46]++,n.lintType){case"style":Rn().b[5][0]++,Rn().s[47]++,e=eSe(),Rn().s[48]++;break;case"layer":Rn().b[5][1]++,Rn().s[49]++,e=Jwe(),Rn().s[50]++;break;case"expression":Rn().b[5][2]++,Rn().s[51]++,e=tSe(n.spec),Rn().s[52]++;break;case"json":Rn().b[5][3]++,Rn().s[53]++,e=()=>(Rn().f[12]++,Rn().s[54]++,[]),Rn().s[55]++;break}return Rn().s[56]++,new Si({doc:n.value,extensions:[xwe,Lwe(),Vwe,new m5().of(ps.tabSize.of(2)),Si.theme({"&":{fontSize:"9pt"}}),Si.updateListener.of(t=>{if(Rn().f[13]++,Rn().s[57]++,t.docChanged){Rn().b[6][0]++;const i=(Rn().s[58]++,t.state.doc),r=(Rn().s[59]++,i.toString());Rn().s[60]++,n.onChange(r)}else Rn().b[6][1]++;Rn().s[61]++,t.focusChanged?(Rn().b[7][0]++,Rn().s[62]++,t.view.hasFocus?(Rn().b[8][0]++,Rn().s[63]++,n.onFocus()):(Rn().b[8][1]++,Rn().s[64]++,n.onBlur())):Rn().b[7][1]++}),_we(),dwe(t=>{Rn().f[14]++;const i=(Rn().s[65]++,Pwe()(t));return Rn().s[66]++,i.length>0?(Rn().b[9][0]++,Rn().s[67]++,i):(Rn().b[9][1]++,Rn().s[68]++,e(t))})],parent:n.parent})}function ui(){var n="/home/runner/work/maputnik/maputnik/src/components/InputJson.tsx",e="b0265b7f9053a68791144187ad962abceb0b9d46",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputJson.tsx",statementMap:{0:{start:{line:8,column:24},end:{line:13,column:3}},1:{start:{line:15,column:8},end:{line:15,column:12}},2:{start:{line:16,column:22},end:{line:16,column:27}},3:{start:{line:18,column:4},end:{line:18,column:17}},4:{start:{line:19,column:4},end:{line:22,column:6}},5:{start:{line:25,column:4},end:{line:25,column:63}},6:{start:{line:28,column:4},end:{line:36,column:7}},7:{start:{line:32,column:27},end:{line:32,column:47}},8:{start:{line:33,column:21},end:{line:33,column:35}},9:{start:{line:34,column:20},end:{line:34,column:33}},10:{start:{line:38,column:12},end:{line:43,column:3}},11:{start:{line:39,column:4},end:{line:39,column:49}},12:{start:{line:39,column:28},end:{line:39,column:49}},13:{start:{line:40,column:4},end:{line:42,column:7}},14:{start:{line:44,column:11},end:{line:49,column:3}},15:{start:{line:45,column:4},end:{line:45,column:47}},16:{start:{line:45,column:27},end:{line:45,column:47}},17:{start:{line:46,column:4},end:{line:48,column:7}},18:{start:{line:51,column:4},end:{line:60,column:5}},19:{start:{line:52,column:6},end:{line:52,column:36}},20:{start:{line:53,column:6},end:{line:59,column:9}},21:{start:{line:62,column:13},end:{line:86,column:3}},22:{start:{line:63,column:4},end:{line:69,column:5}},23:{start:{line:64,column:6},end:{line:64,column:37}},24:{start:{line:65,column:6},end:{line:67,column:9}},25:{start:{line:68,column:6},end:{line:68,column:13}},26:{start:{line:70,column:20},end:{line:70,column:51}},27:{start:{line:71,column:4},end:{line:82,column:5}},28:{start:{line:73,column:6},end:{line:78,column:7}},29:{start:{line:74,column:8},end:{line:74,column:42}},30:{start:{line:76,column:8},end:{line:76,column:19}},31:{start:{line:77,column:8},end:{line:77,column:27}},32:{start:{line:79,column:6},end:{line:81,column:7}},33:{start:{line:80,column:8},end:{line:80,column:66}},34:{start:{line:80,column:33},end:{line:80,column:66}},35:{start:{line:83,column:4},end:{line:85,column:7}},36:{start:{line:88,column:18},end:{line:88,column:20}},37:{start:{line:89,column:4},end:{line:91,column:5}},38:{start:{line:90,column:6},end:{line:90,column:45}},39:{start:{line:92,column:4},end:{line:101,column:9}},40:{start:{line:97,column:10},end:{line:97,column:24}},41:{start:{line:104,column:18},end:{line:104,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:13},end:{line:9,column:14}},loc:{start:{line:9,column:19},end:{line:10,column:5}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:11,column:12},end:{line:11,column:13}},loc:{start:{line:11,column:18},end:{line:12,column:5}},line:11},2:{name:"(anonymous_2)",decl:{start:{line:17,column:2},end:{line:17,column:3}},loc:{start:{line:17,column:21},end:{line:23,column:3}},line:17},3:{name:"(anonymous_3)",decl:{start:{line:24,column:2},end:{line:24,column:3}},loc:{start:{line:24,column:22},end:{line:26,column:3}},line:24},4:{name:"(anonymous_4)",decl:{start:{line:27,column:2},end:{line:27,column:3}},loc:{start:{line:27,column:22},end:{line:37,column:3}},line:27},5:{name:"(anonymous_5)",decl:{start:{line:32,column:16},end:{line:32,column:17}},loc:{start:{line:32,column:27},end:{line:32,column:47}},line:32},6:{name:"(anonymous_6)",decl:{start:{line:33,column:15},end:{line:33,column:16}},loc:{start:{line:33,column:21},end:{line:33,column:35}},line:33},7:{name:"(anonymous_7)",decl:{start:{line:34,column:14},end:{line:34,column:15}},loc:{start:{line:34,column:20},end:{line:34,column:33}},line:34},8:{name:"(anonymous_8)",decl:{start:{line:38,column:12},end:{line:38,column:13}},loc:{start:{line:38,column:18},end:{line:43,column:3}},line:38},9:{name:"(anonymous_9)",decl:{start:{line:44,column:11},end:{line:44,column:12}},loc:{start:{line:44,column:17},end:{line:49,column:3}},line:44},10:{name:"(anonymous_10)",decl:{start:{line:50,column:2},end:{line:50,column:3}},loc:{start:{line:50,column:32},end:{line:61,column:3}},line:50},11:{name:"(anonymous_11)",decl:{start:{line:62,column:13},end:{line:62,column:14}},loc:{start:{line:62,column:21},end:{line:86,column:3}},line:62},12:{name:"(anonymous_12)",decl:{start:{line:87,column:2},end:{line:87,column:3}},loc:{start:{line:87,column:11},end:{line:102,column:3}},line:87},13:{name:"(anonymous_13)",decl:{start:{line:96,column:13},end:{line:96,column:14}},loc:{start:{line:96,column:21},end:{line:98,column:9}},line:96}},branchMap:{0:{loc:{start:{line:31,column:16},end:{line:31,column:46}},type:"binary-expr",locations:[{start:{line:31,column:16},end:{line:31,column:35}},{start:{line:31,column:39},end:{line:31,column:46}}],line:31},1:{loc:{start:{line:39,column:4},end:{line:39,column:49}},type:"if",locations:[{start:{line:39,column:4},end:{line:39,column:49}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:39},2:{loc:{start:{line:45,column:4},end:{line:45,column:47}},type:"if",locations:[{start:{line:45,column:4},end:{line:45,column:47}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:45},3:{loc:{start:{line:51,column:4},end:{line:60,column:5}},type:"if",locations:[{start:{line:51,column:4},end:{line:60,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:51},4:{loc:{start:{line:51,column:8},end:{line:51,column:69}},type:"binary-expr",locations:[{start:{line:51,column:8},end:{line:51,column:29}},{start:{line:51,column:33},end:{line:51,column:69}}],line:51},5:{loc:{start:{line:63,column:4},end:{line:69,column:5}},type:"if",locations:[{start:{line:63,column:4},end:{line:69,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:63},6:{loc:{start:{line:71,column:4},end:{line:82,column:5}},type:"if",locations:[{start:{line:71,column:4},end:{line:82,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:71},7:{loc:{start:{line:79,column:6},end:{line:81,column:7}},type:"if",locations:[{start:{line:79,column:6},end:{line:81,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:79},8:{loc:{start:{line:80,column:8},end:{line:80,column:66}},type:"if",locations:[{start:{line:80,column:8},end:{line:80,column:66}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:80},9:{loc:{start:{line:89,column:4},end:{line:91,column:5}},type:"if",locations:[{start:{line:89,column:4},end:{line:91,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:89}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputJson.tsx"],names:[],mappings:"AA2HM;AA3HN,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,SAA+B,uBAAuB;AAGtD,OAAO,qBAAqB;AAE5B,SAAQ,oBAAmB;AAoB3B,MAAM,0BAA0B,MAAM,UAAkD;AAAA,EACtF,OAAO,eAAe;AAAA,IACpB,SAAS,MAAM;AAAA,IAAC;AAAA,IAChB,QAAQ,MAAM;AAAA,IAAC;AAAA,EACjB;AAAA,EACA;AAAA,EACA,MAA6B;AAAA,EAC7B,oBAA6B;AAAA,EAE7B,YAAY,OAA+B;AACzC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,WAAW;AAAA,MACX,WAAW,KAAK,cAAc,KAAK,MAAM,KAAK;AAAA,IAChD;AAAA,EACF;AAAA,EAEA,cAAc,MAAW;AACvB,WAAO,gBAAgB,MAAM,EAAC,QAAQ,GAAG,WAAW,GAAE,CAAC;AAAA,EACzD;AAAA,EAEA,oBAAqB;AACnB,SAAK,QAAQ,aAAa;AAAA,MACxB,QAAQ,KAAK;AAAA,MACb,OAAO,KAAK,cAAc,KAAK,MAAM,KAAK;AAAA,MAC1C,UAAU,KAAK,MAAM,YAAY;AAAA,MACjC,UAAU,CAAC,UAAiB,KAAK,SAAS,KAAK;AAAA,MAC/C,SAAS,MAAM,KAAK,QAAQ;AAAA,MAC5B,QAAQ,MAAM,KAAK,OAAO;AAAA,MAC1B,MAAM,KAAK,MAAM;AAAA,IACnB,CAAC;AAAA,EACH;AAAA,EAEA,UAAU,MAAM;AACd,QAAI,KAAK,MAAM,QAAS,MAAK,MAAM,QAAQ;AAC3C,SAAK,SAAS;AAAA,MACZ,WAAW;AAAA,IACb,CAAC;AAAA,EACH;AAAA,EAEA,SAAS,MAAM;AACb,QAAI,KAAK,MAAM,OAAQ,MAAK,MAAM,OAAO;AACzC,SAAK,SAAS;AAAA,MACZ,WAAW;AAAA,IACb,CAAC;AAAA,EACH;AAAA,EAEA,mBAAmB,WAA2B;AAC5C,QAAI,CAAC,KAAK,MAAM,aAAa,UAAU,UAAU,KAAK,MAAM,OAAO;AACjE,WAAK,oBAAoB;AACzB,WAAK,MAAO,SAAS;AAAA,QACnB,SAAS;AAAA,UACP,MAAM;AAAA,UACN,IAAI,KAAK,MAAO,MAAM,IAAI;AAAA,UAC1B,QAAQ,KAAK,cAAc,KAAK,MAAM,KAAK;AAAA,QAC7C;AAAA,MACF,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,WAAW,CAAC,OAAgB;AAC1B,QAAI,KAAK,mBAAmB;AAC1B,WAAK,oBAAoB;AACzB,WAAK,SAAS;AAAA,QACZ,WAAW,KAAK,MAAO,MAAM,IAAI,SAAS;AAAA,MAC5C,CAAC;AACD;AAAA,IACF;AACA,UAAM,UAAU,KAAK,MAAO,MAAM,IAAI,SAAS;AAE/C,QAAI,KAAK,MAAM,cAAc,SAAS;AACpC,UAAI,aAAa;AACjB,UAAI;AACF,sBAAc,KAAK,MAAM,OAAO;AAAA,MAClC,SAAQ,MAAM;AACZ,cAAM;AACN,gBAAQ,KAAK,IAAI;AAAA,MACnB;AAEA,UAAI,CAAC,KAAK;AACR,YAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,WAAW;AAAA,MAC1D;AAAA,IACF;AAEA,SAAK,SAAS;AAAA,MACZ,WAAW;AAAA,IACb,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,QAAQ,CAAC;AACf,QAAI,KAAK,MAAM,WAAW;AACxB,YAAM,YAAY,KAAK,MAAM;AAAA,IAC/B;AAEA,WAAO,oBAAC,SAAI,WAAU,eAAc,eAAY,eAAc,eAAY,QAAO,OAAO,EAAC,QAAQ,OAAM,GACrG;AAAA,MAAC;AAAA;AAAA,QACC,WAAW,WAAW,wBAAwB,KAAK,MAAM,SAAS;AAAA,QAClE,KAAK,CAAC,OAAO;AAAC,eAAK,MAAM;AAAA,QAAG;AAAA,QAC5B;AAAA;AAAA,IACF,GACF;AAAA,EACF;AACF;AAEA,MAAM,YAAY,gBAAgB,EAAE,iBAAiB;AACrD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"b0265b7f9053a68791144187ad962abceb0b9d46"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return ui=function(){return s},s}ui();class iSe extends En.Component{static defaultProps=(ui().s[0]++,{onFocus:()=>{ui().f[0]++},onBlur:()=>{ui().f[1]++}});_view;_el=(ui().s[1]++,null);_cancelNextChange=(ui().s[2]++,!1);constructor(e){ui().f[2]++,ui().s[3]++,super(e),ui().s[4]++,this.state={isEditing:!1,prevValue:this.getPrettyJson(this.props.value)}}getPrettyJson(e){return ui().f[3]++,ui().s[5]++,E_e(e,{indent:2,maxLength:40})}componentDidMount(){ui().f[4]++,ui().s[6]++,this._view=nSe({parent:this._el,value:this.getPrettyJson(this.props.value),lintType:(ui().b[0][0]++,this.props.lintType||(ui().b[0][1]++,"layer")),onChange:e=>(ui().f[5]++,ui().s[7]++,this.onChange(e)),onFocus:()=>(ui().f[6]++,ui().s[8]++,this.onFocus()),onBlur:()=>(ui().f[7]++,ui().s[9]++,this.onBlur()),spec:this.props.spec})}onFocus=(ui().s[10]++,()=>{ui().f[8]++,ui().s[11]++,this.props.onFocus?(ui().b[1][0]++,ui().s[12]++,this.props.onFocus()):ui().b[1][1]++,ui().s[13]++,this.setState({isEditing:!0})});onBlur=(ui().s[14]++,()=>{ui().f[9]++,ui().s[15]++,this.props.onBlur?(ui().b[2][0]++,ui().s[16]++,this.props.onBlur()):ui().b[2][1]++,ui().s[17]++,this.setState({isEditing:!1})});componentDidUpdate(e){ui().f[10]++,ui().s[18]++,ui().b[4][0]++,!this.state.isEditing&&(ui().b[4][1]++,e.value!==this.props.value)?(ui().b[3][0]++,ui().s[19]++,this._cancelNextChange=!0,ui().s[20]++,this._view.dispatch({changes:{from:0,to:this._view.state.doc.length,insert:this.getPrettyJson(this.props.value)}})):ui().b[3][1]++}onChange=(ui().s[21]++,e=>{if(ui().f[11]++,ui().s[22]++,this._cancelNextChange){ui().b[5][0]++,ui().s[23]++,this._cancelNextChange=!1,ui().s[24]++,this.setState({prevValue:this._view.state.doc.toString()}),ui().s[25]++;return}else ui().b[5][1]++;const t=(ui().s[26]++,this._view.state.doc.toString());if(ui().s[27]++,this.state.prevValue!==t){ui().b[6][0]++;let i,r;ui().s[28]++;try{ui().s[29]++,i=JSON.parse(t)}catch(o){ui().s[30]++,r=o,ui().s[31]++,console.warn(o)}ui().s[32]++,r?ui().b[7][1]++:(ui().b[7][0]++,ui().s[33]++,this.props.onChange?(ui().b[8][0]++,ui().s[34]++,this.props.onChange(i)):ui().b[8][1]++)}else ui().b[6][1]++;ui().s[35]++,this.setState({prevValue:t})});render(){ui().f[12]++;const e=(ui().s[36]++,{});return ui().s[37]++,this.props.maxHeight?(ui().b[9][0]++,ui().s[38]++,e.maxHeight=this.props.maxHeight):ui().b[9][1]++,ui().s[39]++,ie.jsx("div",{className:"json-editor","data-wd-key":"json-editor","aria-hidden":"true",style:{cursor:"text"},children:ie.jsx("div",{className:u0("codemirror-container",this.props.className),ref:t=>{ui().f[13]++,ui().s[40]++,this._el=t},style:e})})}}const wre=(ui().s[41]++,No()(iSe));function Sx(){var n="/home/runner/work/maputnik/maputnik/src/components/CodeEditor.tsx",e="f03c466cea7ee39fb10a8d84cec1e620e7e892a5",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/CodeEditor.tsx",statementMap:{0:{start:{line:4,column:27},end:{line:18,column:1}},1:{start:{line:5,column:2},end:{line:17,column:7}},2:{start:{line:19,column:19},end:{line:19,column:56}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:27},end:{line:4,column:28}},loc:{start:{line:4,column:38},end:{line:18,column:1}},line:4}},branchMap:{},s:{0:0,1:0,2:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/CodeEditor.tsx"],names:[],mappings:"AAcS,mBACL,KADK;AAdT,OAAO,eAAe;AAEtB,SAAS,uBAA6C;AAUtD,MAAM,qBAAgD,CAAC,UAAU;AAE/D,SAAO,iCACL;AAAA,wBAAC,YAAO,WAAU,mBAAkB,SAAS,MAAM,SAAS,cAAY,MAAM,EAAE,OAAO,GAAG,OAAO,EAAE,UAAU,UAAU,KAAK,KAAK,QAAQ,EAAE,GAAI,gBAAM,EAAE,2BAA2B,GAAE;AAAA,IACpL;AAAA,MAAC;AAAA;AAAA,QACC,UAAS;AAAA,QACT,OAAO,MAAM;AAAA,QACb,UAAU,MAAM;AAAA,QAChB,WAAW;AAAA;AAAA,IACb;AAAA,IAAE;AAAA,KACJ;AACF;AAEA,MAAM,aAAa,gBAAgB,EAAE,kBAAkB;AAEvD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f03c466cea7ee39fb10a8d84cec1e620e7e892a5"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Sx=function(){return s},s}Sx();Sx().s[0]++;const rSe=n=>(Sx().f[0]++,Sx().s[1]++,ie.jsxs(ie.Fragment,{children:[ie.jsx("button",{className:"maputnik-button",onClick:n.onClose,"aria-label":n.t("Close"),style:{position:"sticky",top:"0",zIndex:1},children:n.t("Click to close the editor")}),ie.jsx(wre,{lintType:"style",value:n.value,onChange:n.onChange,className:"maputnik-code-editor"}),";"]})),oSe=(Sx().s[2]++,No()(rSe));var X2=jD();function sSe(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return St.useMemo(()=>i=>{e.forEach(r=>r(i))},e)}const _6=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Qx(n){const e=Object.prototype.toString.call(n);return e==="[object Window]"||e==="[object global]"}function yK(n){return"nodeType"in n}function Id(n){var e,t;return n?Qx(n)?n:yK(n)&&(e=(t=n.ownerDocument)==null?void 0:t.defaultView)!=null?e:window:window}function vK(n){const{Document:e}=Id(n);return n instanceof e}function w5(n){return Qx(n)?!1:n instanceof Id(n).HTMLElement}function Sre(n){return n instanceof Id(n).SVGElement}function qx(n){return n?Qx(n)?n.document:yK(n)?vK(n)?n:w5(n)||Sre(n)?n.ownerDocument:document:document:document}const r0=_6?St.useLayoutEffect:St.useEffect;function bK(n){const e=St.useRef(n);return r0(()=>{e.current=n}),St.useCallback(function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return e.current==null?void 0:e.current(...i)},[])}function aSe(){const n=St.useRef(null),e=St.useCallback((i,r)=>{n.current=setInterval(i,r)},[]),t=St.useCallback(()=>{n.current!==null&&(clearInterval(n.current),n.current=null)},[]);return[e,t]}function S4(n,e){e===void 0&&(e=[n]);const t=St.useRef(n);return r0(()=>{t.current!==n&&(t.current=n)},e),t}function S5(n,e){const t=St.useRef();return St.useMemo(()=>{const i=n(t.current);return t.current=i,i},[...e])}function GS(n){const e=bK(n),t=St.useRef(null),i=St.useCallback(r=>{r!==t.current&&e?.(r,t.current),t.current=r},[]);return[t,i]}function hD(n){const e=St.useRef();return St.useEffect(()=>{e.current=n},[n]),e.current}let JB={};function E5(n,e){return St.useMemo(()=>{if(e)return e;const t=JB[n]==null?0:JB[n]+1;return JB[n]=t,n+"-"+t},[n,e])}function Ere(n){return function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];return i.reduce((o,s)=>{const a=Object.entries(s);for(const[c,h]of a){const m=o[c];m!=null&&(o[c]=m+n*h)}return o},{...e})}}const X_=Ere(1),WS=Ere(-1);function lSe(n){return"clientX"in n&&"clientY"in n}function CK(n){if(!n)return!1;const{KeyboardEvent:e}=Id(n.target);return e&&n instanceof e}function uSe(n){if(!n)return!1;const{TouchEvent:e}=Id(n.target);return e&&n instanceof e}function dD(n){if(uSe(n)){if(n.touches&&n.touches.length){const{clientX:e,clientY:t}=n.touches[0];return{x:e,y:t}}else if(n.changedTouches&&n.changedTouches.length){const{clientX:e,clientY:t}=n.changedTouches[0];return{x:e,y:t}}}return lSe(n)?{x:n.clientX,y:n.clientY}:null}const E4=Object.freeze({Translate:{toString(n){if(!n)return;const{x:e,y:t}=n;return"translate3d("+(e?Math.round(e):0)+"px, "+(t?Math.round(t):0)+"px, 0)"}},Scale:{toString(n){if(!n)return;const{scaleX:e,scaleY:t}=n;return"scaleX("+e+") scaleY("+t+")"}},Transform:{toString(n){if(n)return[E4.Translate.toString(n),E4.Scale.toString(n)].join(" ")}},Transition:{toString(n){let{property:e,duration:t,easing:i}=n;return e+" "+t+"ms "+i}}}),tW="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function cSe(n){return n.matches(tW)?n:n.querySelector(tW)}const ASe={display:"none"};function hSe(n){let{id:e,value:t}=n;return En.createElement("div",{id:e,style:ASe},t)}function dSe(n){let{id:e,announcement:t,ariaLiveType:i="assertive"}=n;const r={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return En.createElement("div",{id:e,style:r,role:"status","aria-live":i,"aria-atomic":!0},t)}function fSe(){const[n,e]=St.useState("");return{announce:St.useCallback(i=>{i!=null&&e(i)},[]),announcement:n}}const Ore=St.createContext(null);function pSe(n){const e=St.useContext(Ore);St.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(n)},[n,e])}function mSe(){const[n]=St.useState(()=>new Set),e=St.useCallback(i=>(n.add(i),()=>n.delete(i)),[n]);return[St.useCallback(i=>{let{type:r,event:o}=i;n.forEach(s=>{var a;return(a=s[r])==null?void 0:a.call(s,o)})},[n]),e]}const gSe={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},ySe={onDragStart(n){let{active:e}=n;return"Picked up draggable item "+e.id+"."},onDragOver(n){let{active:e,over:t}=n;return t?"Draggable item "+e.id+" was moved over droppable area "+t.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(n){let{active:e,over:t}=n;return t?"Draggable item "+e.id+" was dropped over droppable area "+t.id:"Draggable item "+e.id+" was dropped."},onDragCancel(n){let{active:e}=n;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function vSe(n){let{announcements:e=ySe,container:t,hiddenTextDescribedById:i,screenReaderInstructions:r=gSe}=n;const{announce:o,announcement:s}=fSe(),a=E5("DndLiveRegion"),[c,h]=St.useState(!1);if(St.useEffect(()=>{h(!0)},[]),pSe(St.useMemo(()=>({onDragStart(y){let{active:M}=y;o(e.onDragStart({active:M}))},onDragMove(y){let{active:M,over:x}=y;e.onDragMove&&o(e.onDragMove({active:M,over:x}))},onDragOver(y){let{active:M,over:x}=y;o(e.onDragOver({active:M,over:x}))},onDragEnd(y){let{active:M,over:x}=y;o(e.onDragEnd({active:M,over:x}))},onDragCancel(y){let{active:M,over:x}=y;o(e.onDragCancel({active:M,over:x}))}}),[o,e])),!c)return null;const m=En.createElement(En.Fragment,null,En.createElement(hSe,{id:i,value:r.draggable}),En.createElement(dSe,{id:a,announcement:s}));return t?X2.createPortal(m,t):m}var wc;(function(n){n.DragStart="dragStart",n.DragMove="dragMove",n.DragEnd="dragEnd",n.DragCancel="dragCancel",n.DragOver="dragOver",n.RegisterDroppable="registerDroppable",n.SetDroppableDisabled="setDroppableDisabled",n.UnregisterDroppable="unregisterDroppable"})(wc||(wc={}));function QS(){}function bSe(n,e){return St.useMemo(()=>({sensor:n,options:e??{}}),[n,e])}function CSe(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return St.useMemo(()=>[...e].filter(i=>i!=null),[...e])}const Om=Object.freeze({x:0,y:0});function _Se(n,e){return Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2))}function xSe(n,e){let{data:{value:t}}=n,{data:{value:i}}=e;return t-i}function MSe(n,e){let{data:{value:t}}=n,{data:{value:i}}=e;return i-t}function wSe(n,e){if(!n||n.length===0)return null;const[t]=n;return t[e]}function nW(n,e,t){return e===void 0&&(e=n.left),t===void 0&&(t=n.top),{x:e+n.width*.5,y:t+n.height*.5}}const SSe=n=>{let{collisionRect:e,droppableRects:t,droppableContainers:i}=n;const r=nW(e,e.left,e.top),o=[];for(const s of i){const{id:a}=s,c=t.get(a);if(c){const h=_Se(nW(c),r);o.push({id:a,data:{droppableContainer:s,value:h}})}}return o.sort(xSe)};function ESe(n,e){const t=Math.max(e.top,n.top),i=Math.max(e.left,n.left),r=Math.min(e.left+e.width,n.left+n.width),o=Math.min(e.top+e.height,n.top+n.height),s=r-i,a=o-t;if(i<r&&t<o){const c=e.width*e.height,h=n.width*n.height,m=s*a,y=m/(c+h-m);return Number(y.toFixed(4))}return 0}const OSe=n=>{let{collisionRect:e,droppableRects:t,droppableContainers:i}=n;const r=[];for(const o of i){const{id:s}=o,a=t.get(s);if(a){const c=ESe(a,e);c>0&&r.push({id:s,data:{droppableContainer:o,value:c}})}}return r.sort(MSe)};function BSe(n,e,t){return{...n,scaleX:e&&t?e.width/t.width:1,scaleY:e&&t?e.height/t.height:1}}function Bre(n,e){return n&&e?{x:n.left-e.left,y:n.top-e.top}:Om}function ISe(n){return function(t){for(var i=arguments.length,r=new Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];return r.reduce((s,a)=>({...s,top:s.top+n*a.y,bottom:s.bottom+n*a.y,left:s.left+n*a.x,right:s.right+n*a.x}),{...t})}}const kSe=ISe(1);function TSe(n){if(n.startsWith("matrix3d(")){const e=n.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(n.startsWith("matrix(")){const e=n.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function RSe(n,e,t){const i=TSe(e);if(!i)return n;const{scaleX:r,scaleY:o,x:s,y:a}=i,c=n.left-s-(1-r)*parseFloat(t),h=n.top-a-(1-o)*parseFloat(t.slice(t.indexOf(" ")+1)),m=r?n.width/r:n.width,y=o?n.height/o:n.height;return{width:m,height:y,top:h,right:c+m,bottom:h+y,left:c}}const DSe={ignoreTransform:!1};function Yx(n,e){e===void 0&&(e=DSe);let t=n.getBoundingClientRect();if(e.ignoreTransform){const{transform:h,transformOrigin:m}=Id(n).getComputedStyle(n);h&&(t=RSe(t,h,m))}const{top:i,left:r,width:o,height:s,bottom:a,right:c}=t;return{top:i,left:r,width:o,height:s,bottom:a,right:c}}function iW(n){return Yx(n,{ignoreTransform:!0})}function PSe(n){const e=n.innerWidth,t=n.innerHeight;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}function USe(n,e){return e===void 0&&(e=Id(n).getComputedStyle(n)),e.position==="fixed"}function KSe(n,e){e===void 0&&(e=Id(n).getComputedStyle(n));const t=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(r=>{const o=e[r];return typeof o=="string"?t.test(o):!1})}function _K(n,e){const t=[];function i(r){if(e!=null&&t.length>=e||!r)return t;if(vK(r)&&r.scrollingElement!=null&&!t.includes(r.scrollingElement))return t.push(r.scrollingElement),t;if(!w5(r)||Sre(r)||t.includes(r))return t;const o=Id(n).getComputedStyle(r);return r!==n&&KSe(r,o)&&t.push(r),USe(r,o)?t:i(r.parentNode)}return n?i(n):t}function Ire(n){const[e]=_K(n,1);return e??null}function e8(n){return!_6||!n?null:Qx(n)?n:yK(n)?vK(n)||n===qx(n).scrollingElement?window:w5(n)?n:null:null}function kre(n){return Qx(n)?n.scrollX:n.scrollLeft}function Tre(n){return Qx(n)?n.scrollY:n.scrollTop}function fD(n){return{x:kre(n),y:Tre(n)}}var eA;(function(n){n[n.Forward=1]="Forward",n[n.Backward=-1]="Backward"})(eA||(eA={}));function Rre(n){return!_6||!n?!1:n===document.scrollingElement}function Dre(n){const e={x:0,y:0},t=Rre(n)?{height:window.innerHeight,width:window.innerWidth}:{height:n.clientHeight,width:n.clientWidth},i={x:n.scrollWidth-t.width,y:n.scrollHeight-t.height},r=n.scrollTop<=e.y,o=n.scrollLeft<=e.x,s=n.scrollTop>=i.y,a=n.scrollLeft>=i.x;return{isTop:r,isLeft:o,isBottom:s,isRight:a,maxScroll:i,minScroll:e}}const LSe={x:.2,y:.2};function FSe(n,e,t,i,r){let{top:o,left:s,right:a,bottom:c}=t;i===void 0&&(i=10),r===void 0&&(r=LSe);const{isTop:h,isBottom:m,isLeft:y,isRight:M}=Dre(n),x={x:0,y:0},T={x:0,y:0},P={height:e.height*r.y,width:e.width*r.x};return!h&&o<=e.top+P.height?(x.y=eA.Backward,T.y=i*Math.abs((e.top+P.height-o)/P.height)):!m&&c>=e.bottom-P.height&&(x.y=eA.Forward,T.y=i*Math.abs((e.bottom-P.height-c)/P.height)),!M&&a>=e.right-P.width?(x.x=eA.Forward,T.x=i*Math.abs((e.right-P.width-a)/P.width)):!y&&s<=e.left+P.width&&(x.x=eA.Backward,T.x=i*Math.abs((e.left+P.width-s)/P.width)),{direction:x,speed:T}}function zSe(n){if(n===document.scrollingElement){const{innerWidth:o,innerHeight:s}=window;return{top:0,left:0,right:o,bottom:s,width:o,height:s}}const{top:e,left:t,right:i,bottom:r}=n.getBoundingClientRect();return{top:e,left:t,right:i,bottom:r,width:n.clientWidth,height:n.clientHeight}}function Pre(n){return n.reduce((e,t)=>X_(e,fD(t)),Om)}function jSe(n){return n.reduce((e,t)=>e+kre(t),0)}function NSe(n){return n.reduce((e,t)=>e+Tre(t),0)}function GSe(n,e){if(e===void 0&&(e=Yx),!n)return;const{top:t,left:i,bottom:r,right:o}=e(n);Ire(n)&&(r<=0||o<=0||t>=window.innerHeight||i>=window.innerWidth)&&n.scrollIntoView({block:"center",inline:"center"})}const WSe=[["x",["left","right"],jSe],["y",["top","bottom"],NSe]];class xK{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const i=_K(t),r=Pre(i);this.rect={...e},this.width=e.width,this.height=e.height;for(const[o,s,a]of WSe)for(const c of s)Object.defineProperty(this,c,{get:()=>{const h=a(i),m=r[o]-h;return this.rect[c]+m},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class x3{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(t=>{var i;return(i=this.target)==null?void 0:i.removeEventListener(...t)})},this.target=e}add(e,t,i){var r;(r=this.target)==null||r.addEventListener(e,t,i),this.listeners.push([e,t,i])}}function QSe(n){const{EventTarget:e}=Id(n);return n instanceof e?n:qx(n)}function t8(n,e){const t=Math.abs(n.x),i=Math.abs(n.y);return typeof e=="number"?Math.sqrt(t**2+i**2)>e:"x"in e&&"y"in e?t>e.x&&i>e.y:"x"in e?t>e.x:"y"in e?i>e.y:!1}var up;(function(n){n.Click="click",n.DragStart="dragstart",n.Keydown="keydown",n.ContextMenu="contextmenu",n.Resize="resize",n.SelectionChange="selectionchange",n.VisibilityChange="visibilitychange"})(up||(up={}));function rW(n){n.preventDefault()}function qSe(n){n.stopPropagation()}var Ks;(function(n){n.Space="Space",n.Down="ArrowDown",n.Right="ArrowRight",n.Left="ArrowLeft",n.Up="ArrowUp",n.Esc="Escape",n.Enter="Enter",n.Tab="Tab"})(Ks||(Ks={}));const Ure={start:[Ks.Space,Ks.Enter],cancel:[Ks.Esc],end:[Ks.Space,Ks.Enter,Ks.Tab]},YSe=(n,e)=>{let{currentCoordinates:t}=e;switch(n.code){case Ks.Right:return{...t,x:t.x+25};case Ks.Left:return{...t,x:t.x-25};case Ks.Down:return{...t,y:t.y+25};case Ks.Up:return{...t,y:t.y-25}}};class Kre{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new x3(qx(t)),this.windowListeners=new x3(Id(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(up.Resize,this.handleCancel),this.windowListeners.add(up.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(up.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:t}=this.props,i=e.node.current;i&&GSe(i),t(Om)}handleKeyDown(e){if(CK(e)){const{active:t,context:i,options:r}=this.props,{keyboardCodes:o=Ure,coordinateGetter:s=YSe,scrollBehavior:a="smooth"}=r,{code:c}=e;if(o.end.includes(c)){this.handleEnd(e);return}if(o.cancel.includes(c)){this.handleCancel(e);return}const{collisionRect:h}=i.current,m=h?{x:h.left,y:h.top}:Om;this.referenceCoordinates||(this.referenceCoordinates=m);const y=s(e,{active:t,context:i.current,currentCoordinates:m});if(y){const M=WS(y,m),x={x:0,y:0},{scrollableAncestors:T}=i.current;for(const P of T){const F=e.code,{isTop:j,isRight:q,isLeft:V,isBottom:H,maxScroll:Q,minScroll:Y}=Dre(P),z=zSe(P),se={x:Math.min(F===Ks.Right?z.right-z.width/2:z.right,Math.max(F===Ks.Right?z.left:z.left+z.width/2,y.x)),y:Math.min(F===Ks.Down?z.bottom-z.height/2:z.bottom,Math.max(F===Ks.Down?z.top:z.top+z.height/2,y.y))},le=F===Ks.Right&&!q||F===Ks.Left&&!V,pe=F===Ks.Down&&!H||F===Ks.Up&&!j;if(le&&se.x!==y.x){const de=P.scrollLeft+M.x,ve=F===Ks.Right&&de<=Q.x||F===Ks.Left&&de>=Y.x;if(ve&&!M.y){P.scrollTo({left:de,behavior:a});return}ve?x.x=P.scrollLeft-de:x.x=F===Ks.Right?P.scrollLeft-Q.x:P.scrollLeft-Y.x,x.x&&P.scrollBy({left:-x.x,behavior:a});break}else if(pe&&se.y!==y.y){const de=P.scrollTop+M.y,ve=F===Ks.Down&&de<=Q.y||F===Ks.Up&&de>=Y.y;if(ve&&!M.x){P.scrollTo({top:de,behavior:a});return}ve?x.y=P.scrollTop-de:x.y=F===Ks.Down?P.scrollTop-Q.y:P.scrollTop-Y.y,x.y&&P.scrollBy({top:-x.y,behavior:a});break}}this.handleMove(e,X_(WS(y,this.referenceCoordinates),x))}}}handleMove(e,t){const{onMove:i}=this.props;e.preventDefault(),i(t)}handleEnd(e){const{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){const{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Kre.activators=[{eventName:"onKeyDown",handler:(n,e,t)=>{let{keyboardCodes:i=Ure,onActivation:r}=e,{active:o}=t;const{code:s}=n.nativeEvent;if(i.start.includes(s)){const a=o.activatorNode.current;return a&&n.target!==a?!1:(n.preventDefault(),r?.({event:n.nativeEvent}),!0)}return!1}}];function oW(n){return!!(n&&"distance"in n)}function sW(n){return!!(n&&"delay"in n)}class MK{constructor(e,t,i){var r;i===void 0&&(i=QSe(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:o}=e,{target:s}=o;this.props=e,this.events=t,this.document=qx(s),this.documentListeners=new x3(this.document),this.listeners=new x3(i),this.windowListeners=new x3(Id(s)),this.initialCoordinates=(r=dD(o))!=null?r:Om,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:i}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(up.Resize,this.handleCancel),this.windowListeners.add(up.DragStart,rW),this.windowListeners.add(up.VisibilityChange,this.handleCancel),this.windowListeners.add(up.ContextMenu,rW),this.documentListeners.add(up.Keydown,this.handleKeydown),t){if(i!=null&&i({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(sW(t)){this.timeoutId=setTimeout(this.handleStart,t.delay),this.handlePending(t);return}if(oW(t)){this.handlePending(t);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){const{active:i,onPending:r}=this.props;r(i,e,this.initialCoordinates,t)}handleStart(){const{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(up.Click,qSe,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(up.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;const{activated:i,initialCoordinates:r,props:o}=this,{onMove:s,options:{activationConstraint:a}}=o;if(!r)return;const c=(t=dD(e))!=null?t:Om,h=WS(r,c);if(!i&&a){if(oW(a)){if(a.tolerance!=null&&t8(h,a.tolerance))return this.handleCancel();if(t8(h,a.distance))return this.handleStart()}if(sW(a)&&t8(h,a.tolerance))return this.handleCancel();this.handlePending(a,h);return}e.cancelable&&e.preventDefault(),s(c)}handleEnd(){const{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){const{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===Ks.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const $Se={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class wK extends MK{constructor(e){const{event:t}=e,i=qx(t.target);super(e,$Se,i)}}wK.activators=[{eventName:"onPointerDown",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:i}=e;return!t.isPrimary||t.button!==0?!1:(i?.({event:t}),!0)}}];const VSe={move:{name:"mousemove"},end:{name:"mouseup"}};var pD;(function(n){n[n.RightClick=2]="RightClick"})(pD||(pD={}));class HSe extends MK{constructor(e){super(e,VSe,qx(e.event.target))}}HSe.activators=[{eventName:"onMouseDown",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:i}=e;return t.button===pD.RightClick?!1:(i?.({event:t}),!0)}}];const n8={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class ZSe extends MK{constructor(e){super(e,n8)}static setup(){return window.addEventListener(n8.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(n8.move.name,e)};function e(){}}}ZSe.activators=[{eventName:"onTouchStart",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:i}=e;const{touches:r}=t;return r.length>1?!1:(i?.({event:t}),!0)}}];var M3;(function(n){n[n.Pointer=0]="Pointer",n[n.DraggableRect=1]="DraggableRect"})(M3||(M3={}));var qS;(function(n){n[n.TreeOrder=0]="TreeOrder",n[n.ReversedTreeOrder=1]="ReversedTreeOrder"})(qS||(qS={}));function XSe(n){let{acceleration:e,activator:t=M3.Pointer,canScroll:i,draggingRect:r,enabled:o,interval:s=5,order:a=qS.TreeOrder,pointerCoordinates:c,scrollableAncestors:h,scrollableAncestorRects:m,delta:y,threshold:M}=n;const x=eEe({delta:y,disabled:!o}),[T,P]=aSe(),F=St.useRef({x:0,y:0}),j=St.useRef({x:0,y:0}),q=St.useMemo(()=>{switch(t){case M3.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case M3.DraggableRect:return r}},[t,r,c]),V=St.useRef(null),H=St.useCallback(()=>{const Y=V.current;if(!Y)return;const z=F.current.x*j.current.x,se=F.current.y*j.current.y;Y.scrollBy(z,se)},[]),Q=St.useMemo(()=>a===qS.TreeOrder?[...h].reverse():h,[a,h]);St.useEffect(()=>{if(!o||!h.length||!q){P();return}for(const Y of Q){if(i?.(Y)===!1)continue;const z=h.indexOf(Y),se=m[z];if(!se)continue;const{direction:le,speed:pe}=FSe(Y,se,q,e,M);for(const de of["x","y"])x[de][le[de]]||(pe[de]=0,le[de]=0);if(pe.x>0||pe.y>0){P(),V.current=Y,T(H,s),F.current=pe,j.current=le;return}}F.current={x:0,y:0},j.current={x:0,y:0},P()},[e,H,i,P,o,s,JSON.stringify(q),JSON.stringify(x),T,h,Q,m,JSON.stringify(M)])}const JSe={x:{[eA.Backward]:!1,[eA.Forward]:!1},y:{[eA.Backward]:!1,[eA.Forward]:!1}};function eEe(n){let{delta:e,disabled:t}=n;const i=hD(e);return S5(r=>{if(t||!i||!r)return JSe;const o={x:Math.sign(e.x-i.x),y:Math.sign(e.y-i.y)};return{x:{[eA.Backward]:r.x[eA.Backward]||o.x===-1,[eA.Forward]:r.x[eA.Forward]||o.x===1},y:{[eA.Backward]:r.y[eA.Backward]||o.y===-1,[eA.Forward]:r.y[eA.Forward]||o.y===1}}},[t,e,i])}function tEe(n,e){const t=e!=null?n.get(e):void 0,i=t?t.node.current:null;return S5(r=>{var o;return e==null?null:(o=i??r)!=null?o:null},[i,e])}function nEe(n,e){return St.useMemo(()=>n.reduce((t,i)=>{const{sensor:r}=i,o=r.activators.map(s=>({eventName:s.eventName,handler:e(s.handler,i)}));return[...t,...o]},[]),[n,e])}var O4;(function(n){n[n.Always=0]="Always",n[n.BeforeDragging=1]="BeforeDragging",n[n.WhileDragging=2]="WhileDragging"})(O4||(O4={}));var mD;(function(n){n.Optimized="optimized"})(mD||(mD={}));const aW=new Map;function iEe(n,e){let{dragging:t,dependencies:i,config:r}=e;const[o,s]=St.useState(null),{frequency:a,measure:c,strategy:h}=r,m=St.useRef(n),y=F(),M=S4(y),x=St.useCallback(function(j){j===void 0&&(j=[]),!M.current&&s(q=>q===null?j:q.concat(j.filter(V=>!q.includes(V))))},[M]),T=St.useRef(null),P=S5(j=>{if(y&&!t)return aW;if(!j||j===aW||m.current!==n||o!=null){const q=new Map;for(let V of n){if(!V)continue;if(o&&o.length>0&&!o.includes(V.id)&&V.rect.current){q.set(V.id,V.rect.current);continue}const H=V.node.current,Q=H?new xK(c(H),H):null;V.rect.current=Q,Q&&q.set(V.id,Q)}return q}return j},[n,o,t,y,c]);return St.useEffect(()=>{m.current=n},[n]),St.useEffect(()=>{y||x()},[t,y]),St.useEffect(()=>{o&&o.length>0&&s(null)},[JSON.stringify(o)]),St.useEffect(()=>{y||typeof a!="number"||T.current!==null||(T.current=setTimeout(()=>{x(),T.current=null},a))},[a,y,x,...i]),{droppableRects:P,measureDroppableContainers:x,measuringScheduled:o!=null};function F(){switch(h){case O4.Always:return!1;case O4.BeforeDragging:return t;default:return!t}}}function Lre(n,e){return S5(t=>n?t||(typeof e=="function"?e(n):n):null,[e,n])}function rEe(n,e){return Lre(n,e)}function oEe(n){let{callback:e,disabled:t}=n;const i=bK(e),r=St.useMemo(()=>{if(t||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:o}=window;return new o(i)},[i,t]);return St.useEffect(()=>()=>r?.disconnect(),[r]),r}function x6(n){let{callback:e,disabled:t}=n;const i=bK(e),r=St.useMemo(()=>{if(t||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:o}=window;return new o(i)},[t]);return St.useEffect(()=>()=>r?.disconnect(),[r]),r}function sEe(n){return new xK(Yx(n),n)}function lW(n,e,t){e===void 0&&(e=sEe);const[i,r]=St.useState(null);function o(){r(c=>{if(!n)return null;if(n.isConnected===!1){var h;return(h=c??t)!=null?h:null}const m=e(n);return JSON.stringify(c)===JSON.stringify(m)?c:m})}const s=oEe({callback(c){if(n)for(const h of c){const{type:m,target:y}=h;if(m==="childList"&&y instanceof HTMLElement&&y.contains(n)){o();break}}}}),a=x6({callback:o});return r0(()=>{o(),n?(a?.observe(n),s?.observe(document.body,{childList:!0,subtree:!0})):(a?.disconnect(),s?.disconnect())},[n]),i}function aEe(n){const e=Lre(n);return Bre(n,e)}const uW=[];function lEe(n){const e=St.useRef(n),t=S5(i=>n?i&&i!==uW&&n&&e.current&&n.parentNode===e.current.parentNode?i:_K(n):uW,[n]);return St.useEffect(()=>{e.current=n},[n]),t}function uEe(n){const[e,t]=St.useState(null),i=St.useRef(n),r=St.useCallback(o=>{const s=e8(o.target);s&&t(a=>a?(a.set(s,fD(s)),new Map(a)):null)},[]);return St.useEffect(()=>{const o=i.current;if(n!==o){s(o);const a=n.map(c=>{const h=e8(c);return h?(h.addEventListener("scroll",r,{passive:!0}),[h,fD(h)]):null}).filter(c=>c!=null);t(a.length?new Map(a):null),i.current=n}return()=>{s(n),s(o)};function s(a){a.forEach(c=>{const h=e8(c);h?.removeEventListener("scroll",r)})}},[r,n]),St.useMemo(()=>n.length?e?Array.from(e.values()).reduce((o,s)=>X_(o,s),Om):Pre(n):Om,[n,e])}function cW(n,e){e===void 0&&(e=[]);const t=St.useRef(null);return St.useEffect(()=>{t.current=null},e),St.useEffect(()=>{const i=n!==Om;i&&!t.current&&(t.current=n),!i&&t.current&&(t.current=null)},[n]),t.current?WS(n,t.current):Om}function cEe(n){St.useEffect(()=>{if(!_6)return;const e=n.map(t=>{let{sensor:i}=t;return i.setup==null?void 0:i.setup()});return()=>{for(const t of e)t?.()}},n.map(e=>{let{sensor:t}=e;return t}))}function AEe(n,e){return St.useMemo(()=>n.reduce((t,i)=>{let{eventName:r,handler:o}=i;return t[r]=s=>{o(s,e)},t},{}),[n,e])}function Fre(n){return St.useMemo(()=>n?PSe(n):null,[n])}const AW=[];function hEe(n,e){e===void 0&&(e=Yx);const[t]=n,i=Fre(t?Id(t):null),[r,o]=St.useState(AW);function s(){o(()=>n.length?n.map(c=>Rre(c)?i:new xK(e(c),c)):AW)}const a=x6({callback:s});return r0(()=>{a?.disconnect(),s(),n.forEach(c=>a?.observe(c))},[n]),r}function dEe(n){if(!n)return null;if(n.children.length>1)return n;const e=n.children[0];return w5(e)?e:n}function fEe(n){let{measure:e}=n;const[t,i]=St.useState(null),r=St.useCallback(h=>{for(const{target:m}of h)if(w5(m)){i(y=>{const M=e(m);return y?{...y,width:M.width,height:M.height}:M});break}},[e]),o=x6({callback:r}),s=St.useCallback(h=>{const m=dEe(h);o?.disconnect(),m&&o?.observe(m),i(m?e(m):null)},[e,o]),[a,c]=GS(s);return St.useMemo(()=>({nodeRef:a,rect:t,setRef:c}),[t,a,c])}const pEe=[{sensor:wK,options:{}},{sensor:Kre,options:{}}],mEe={current:{}},Mw={draggable:{measure:iW},droppable:{measure:iW,strategy:O4.WhileDragging,frequency:mD.Optimized},dragOverlay:{measure:Yx}};class w3 extends Map{get(e){var t;return e!=null&&(t=super.get(e))!=null?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,i;return(t=(i=this.get(e))==null?void 0:i.node.current)!=null?t:void 0}}const gEe={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new w3,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:QS},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Mw,measureDroppableContainers:QS,windowRect:null,measuringScheduled:!1},yEe={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:QS,draggableNodes:new Map,over:null,measureDroppableContainers:QS},M6=St.createContext(yEe),zre=St.createContext(gEe);function vEe(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new w3}}}function bEe(n,e){switch(e.type){case wc.DragStart:return{...n,draggable:{...n.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case wc.DragMove:return n.draggable.active==null?n:{...n,draggable:{...n.draggable,translate:{x:e.coordinates.x-n.draggable.initialCoordinates.x,y:e.coordinates.y-n.draggable.initialCoordinates.y}}};case wc.DragEnd:case wc.DragCancel:return{...n,draggable:{...n.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case wc.RegisterDroppable:{const{element:t}=e,{id:i}=t,r=new w3(n.droppable.containers);return r.set(i,t),{...n,droppable:{...n.droppable,containers:r}}}case wc.SetDroppableDisabled:{const{id:t,key:i,disabled:r}=e,o=n.droppable.containers.get(t);if(!o||i!==o.key)return n;const s=new w3(n.droppable.containers);return s.set(t,{...o,disabled:r}),{...n,droppable:{...n.droppable,containers:s}}}case wc.UnregisterDroppable:{const{id:t,key:i}=e,r=n.droppable.containers.get(t);if(!r||i!==r.key)return n;const o=new w3(n.droppable.containers);return o.delete(t),{...n,droppable:{...n.droppable,containers:o}}}default:return n}}function CEe(n){let{disabled:e}=n;const{active:t,activatorEvent:i,draggableNodes:r}=St.useContext(M6),o=hD(i),s=hD(t?.id);return St.useEffect(()=>{if(!e&&!i&&o&&s!=null){if(!CK(o)||document.activeElement===o.target)return;const a=r.get(s);if(!a)return;const{activatorNode:c,node:h}=a;if(!c.current&&!h.current)return;requestAnimationFrame(()=>{for(const m of[c.current,h.current]){if(!m)continue;const y=cSe(m);if(y){y.focus();break}}})}},[i,e,r,s,o]),null}function _Ee(n,e){let{transform:t,...i}=e;return n!=null&&n.length?n.reduce((r,o)=>o({transform:r,...i}),t):t}function xEe(n){return St.useMemo(()=>({draggable:{...Mw.draggable,...n?.draggable},droppable:{...Mw.droppable,...n?.droppable},dragOverlay:{...Mw.dragOverlay,...n?.dragOverlay}}),[n?.draggable,n?.droppable,n?.dragOverlay])}function MEe(n){let{activeNode:e,measure:t,initialRect:i,config:r=!0}=n;const o=St.useRef(!1),{x:s,y:a}=typeof r=="boolean"?{x:r,y:r}:r;r0(()=>{if(!s&&!a||!e){o.current=!1;return}if(o.current||!i)return;const h=e?.node.current;if(!h||h.isConnected===!1)return;const m=t(h),y=Bre(m,i);if(s||(y.x=0),a||(y.y=0),o.current=!0,Math.abs(y.x)>0||Math.abs(y.y)>0){const M=Ire(h);M&&M.scrollBy({top:y.y,left:y.x})}},[e,s,a,i,t])}const jre=St.createContext({...Om,scaleX:1,scaleY:1});var Iy;(function(n){n[n.Uninitialized=0]="Uninitialized",n[n.Initializing=1]="Initializing",n[n.Initialized=2]="Initialized"})(Iy||(Iy={}));const wEe=St.memo(function(e){var t,i,r,o;let{id:s,accessibility:a,autoScroll:c=!0,children:h,sensors:m=pEe,collisionDetection:y=OSe,measuring:M,modifiers:x,...T}=e;const P=St.useReducer(bEe,void 0,vEe),[F,j]=P,[q,V]=mSe(),[H,Q]=St.useState(Iy.Uninitialized),Y=H===Iy.Initialized,{draggable:{active:z,nodes:se,translate:le},droppable:{containers:pe}}=F,de=z!=null?se.get(z):null,ve=St.useRef({initial:null,translated:null}),Ee=St.useMemo(()=>{var en;return z!=null?{id:z,data:(en=de?.data)!=null?en:mEe,rect:ve}:null},[z,de]),Re=St.useRef(null),[je,Ie]=St.useState(null),[qe,tt]=St.useState(null),At=S4(T,Object.values(T)),ke=E5("DndDescribedBy",s),we=St.useMemo(()=>pe.getEnabled(),[pe]),ze=xEe(M),{droppableRects:Me,measureDroppableContainers:lt,measuringScheduled:nt}=iEe(we,{dragging:Y,dependencies:[le.x,le.y],config:ze.droppable}),bt=tEe(se,z),Bt=St.useMemo(()=>qe?dD(qe):null,[qe]),Ke=Pt(),Te=rEe(bt,ze.draggable.measure);MEe({activeNode:z!=null?se.get(z):null,config:Ke.layoutShiftCompensation,initialRect:Te,measure:ze.draggable.measure});const Se=lW(bt,ze.draggable.measure,Te),We=lW(bt?bt.parentElement:null),at=St.useRef({activatorEvent:null,active:null,activeNode:bt,collisionRect:null,collisions:null,droppableRects:Me,draggableNodes:se,draggingNode:null,draggingNodeRect:null,droppableContainers:pe,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),it=pe.getNodeFor((t=at.current.over)==null?void 0:t.id),ft=fEe({measure:ze.dragOverlay.measure}),Dt=(i=ft.nodeRef.current)!=null?i:bt,Ot=Y?(r=ft.rect)!=null?r:Se:null,Jt=!!(ft.nodeRef.current&&ft.rect),Dn=aEe(Jt?null:Se),Pn=Fre(Dt?Id(Dt):null),oi=lEe(Y?it??bt:null),In=hEe(oi),Tn=_Ee(x,{transform:{x:le.x-Dn.x,y:le.y-Dn.y,scaleX:1,scaleY:1},activatorEvent:qe,active:Ee,activeNodeRect:Se,containerNodeRect:We,draggingNodeRect:Ot,over:at.current.over,overlayNodeRect:ft.rect,scrollableAncestors:oi,scrollableAncestorRects:In,windowRect:Pn}),dn=Bt?X_(Bt,le):null,$n=uEe(oi),Un=cW($n),It=cW($n,[Se]),_e=X_(Tn,Un),oe=Ot?kSe(Ot,Tn):null,ee=Ee&&oe?y({active:Ee,collisionRect:oe,droppableRects:Me,droppableContainers:we,pointerCoordinates:dn}):null,ne=wSe(ee,"id"),[ue,be]=St.useState(null),Le=Jt?Tn:X_(Tn,It),Ve=BSe(Le,(o=ue?.rect)!=null?o:null,Se),rt=St.useRef(null),ye=St.useCallback((en,mt)=>{let{sensor:Qn,options:Xn}=mt;if(Re.current==null)return;const Cn=se.get(Re.current);if(!Cn)return;const Fn=en.nativeEvent,pi=new Qn({active:Re.current,activeNode:Cn,event:Fn,options:Xn,context:at,onAbort(Ii){if(!se.get(Ii))return;const{onDragAbort:ii}=At.current,Fi={id:Ii};ii?.(Fi),q({type:"onDragAbort",event:Fi})},onPending(Ii,Ar,ii,Fi){if(!se.get(Ii))return;const{onDragPending:on}=At.current,nr={id:Ii,constraint:Ar,initialCoordinates:ii,offset:Fi};on?.(nr),q({type:"onDragPending",event:nr})},onStart(Ii){const Ar=Re.current;if(Ar==null)return;const ii=se.get(Ar);if(!ii)return;const{onDragStart:Fi}=At.current,Ri={activatorEvent:Fn,active:{id:Ar,data:ii.data,rect:ve}};X2.unstable_batchedUpdates(()=>{Fi?.(Ri),Q(Iy.Initializing),j({type:wc.DragStart,initialCoordinates:Ii,active:Ar}),q({type:"onDragStart",event:Ri}),Ie(rt.current),tt(Fn)})},onMove(Ii){j({type:wc.DragMove,coordinates:Ii})},onEnd:Hi(wc.DragEnd),onCancel:Hi(wc.DragCancel)});rt.current=pi;function Hi(Ii){return async function(){const{active:ii,collisions:Fi,over:Ri,scrollAdjustedTranslate:on}=at.current;let nr=null;if(ii&&on){const{cancelDrop:Go}=At.current;nr={activatorEvent:Fn,active:ii,collisions:Fi,delta:on,over:Ri},Ii===wc.DragEnd&&typeof Go=="function"&&await Promise.resolve(Go(nr))&&(Ii=wc.DragCancel)}Re.current=null,X2.unstable_batchedUpdates(()=>{j({type:Ii}),Q(Iy.Uninitialized),be(null),Ie(null),tt(null),rt.current=null;const Go=Ii===wc.DragEnd?"onDragEnd":"onDragCancel";if(nr){const Co=At.current[Go];Co?.(nr),q({type:Go,event:nr})}})}}},[se]),Be=St.useCallback((en,mt)=>(Qn,Xn)=>{const Cn=Qn.nativeEvent,Fn=se.get(Xn);if(Re.current!==null||!Fn||Cn.dndKit||Cn.defaultPrevented)return;const pi={active:Fn};en(Qn,mt.options,pi)===!0&&(Cn.dndKit={capturedBy:mt.sensor},Re.current=Xn,ye(Qn,mt))},[se,ye]),v=nEe(m,Be);cEe(m),r0(()=>{Se&&H===Iy.Initializing&&Q(Iy.Initialized)},[Se,H]),St.useEffect(()=>{const{onDragMove:en}=At.current,{active:mt,activatorEvent:Qn,collisions:Xn,over:Cn}=at.current;if(!mt||!Qn)return;const Fn={active:mt,activatorEvent:Qn,collisions:Xn,delta:{x:_e.x,y:_e.y},over:Cn};X2.unstable_batchedUpdates(()=>{en?.(Fn),q({type:"onDragMove",event:Fn})})},[_e.x,_e.y]),St.useEffect(()=>{const{active:en,activatorEvent:mt,collisions:Qn,droppableContainers:Xn,scrollAdjustedTranslate:Cn}=at.current;if(!en||Re.current==null||!mt||!Cn)return;const{onDragOver:Fn}=At.current,pi=Xn.get(ne),Hi=pi&&pi.rect.current?{id:pi.id,rect:pi.rect.current,data:pi.data,disabled:pi.disabled}:null,Ii={active:en,activatorEvent:mt,collisions:Qn,delta:{x:Cn.x,y:Cn.y},over:Hi};X2.unstable_batchedUpdates(()=>{be(Hi),Fn?.(Ii),q({type:"onDragOver",event:Ii})})},[ne]),r0(()=>{at.current={activatorEvent:qe,active:Ee,activeNode:bt,collisionRect:oe,collisions:ee,droppableRects:Me,draggableNodes:se,draggingNode:Dt,draggingNodeRect:Ot,droppableContainers:pe,over:ue,scrollableAncestors:oi,scrollAdjustedTranslate:_e},ve.current={initial:Ot,translated:oe}},[Ee,bt,ee,oe,se,Dt,Ot,Me,pe,ue,oi,_e]),XSe({...Ke,delta:le,draggingRect:oe,pointerCoordinates:dn,scrollableAncestors:oi,scrollableAncestorRects:In});const yt=St.useMemo(()=>({active:Ee,activeNode:bt,activeNodeRect:Se,activatorEvent:qe,collisions:ee,containerNodeRect:We,dragOverlay:ft,draggableNodes:se,droppableContainers:pe,droppableRects:Me,over:ue,measureDroppableContainers:lt,scrollableAncestors:oi,scrollableAncestorRects:In,measuringConfiguration:ze,measuringScheduled:nt,windowRect:Pn}),[Ee,bt,Se,qe,ee,We,ft,se,pe,Me,ue,lt,oi,In,ze,nt,Pn]),Mt=St.useMemo(()=>({activatorEvent:qe,activators:v,active:Ee,activeNodeRect:Se,ariaDescribedById:{draggable:ke},dispatch:j,draggableNodes:se,over:ue,measureDroppableContainers:lt}),[qe,v,Ee,Se,j,ke,se,ue,lt]);return En.createElement(Ore.Provider,{value:V},En.createElement(M6.Provider,{value:Mt},En.createElement(zre.Provider,{value:yt},En.createElement(jre.Provider,{value:Ve},h)),En.createElement(CEe,{disabled:a?.restoreFocus===!1})),En.createElement(vSe,{...a,hiddenTextDescribedById:ke}));function Pt(){const en=je?.autoScrollEnabled===!1,mt=typeof c=="object"?c.enabled===!1:c===!1,Qn=Y&&!en&&!mt;return typeof c=="object"?{...c,enabled:Qn}:{enabled:Qn}}}),SEe=St.createContext(null),hW="button",EEe="Draggable";function OEe(n){let{id:e,data:t,disabled:i=!1,attributes:r}=n;const o=E5(EEe),{activators:s,activatorEvent:a,active:c,activeNodeRect:h,ariaDescribedById:m,draggableNodes:y,over:M}=St.useContext(M6),{role:x=hW,roleDescription:T="draggable",tabIndex:P=0}=r??{},F=c?.id===e,j=St.useContext(F?jre:SEe),[q,V]=GS(),[H,Q]=GS(),Y=AEe(s,e),z=S4(t);r0(()=>(y.set(e,{id:e,key:o,node:q,activatorNode:H,data:z}),()=>{const le=y.get(e);le&&le.key===o&&y.delete(e)}),[y,e]);const se=St.useMemo(()=>({role:x,tabIndex:P,"aria-disabled":i,"aria-pressed":F&&x===hW?!0:void 0,"aria-roledescription":T,"aria-describedby":m.draggable}),[i,x,P,F,T,m.draggable]);return{active:c,activatorEvent:a,activeNodeRect:h,attributes:se,isDragging:F,listeners:i?void 0:Y,node:q,over:M,setNodeRef:V,setActivatorNodeRef:Q,transform:j}}function BEe(){return St.useContext(zre)}const IEe="Droppable",kEe={timeout:25};function TEe(n){let{data:e,disabled:t=!1,id:i,resizeObserverConfig:r}=n;const o=E5(IEe),{active:s,dispatch:a,over:c,measureDroppableContainers:h}=St.useContext(M6),m=St.useRef({disabled:t}),y=St.useRef(!1),M=St.useRef(null),x=St.useRef(null),{disabled:T,updateMeasurementsFor:P,timeout:F}={...kEe,...r},j=S4(P??i),q=St.useCallback(()=>{if(!y.current){y.current=!0;return}x.current!=null&&clearTimeout(x.current),x.current=setTimeout(()=>{h(Array.isArray(j.current)?j.current:[j.current]),x.current=null},F)},[F]),V=x6({callback:q,disabled:T||!s}),H=St.useCallback((se,le)=>{V&&(le&&(V.unobserve(le),y.current=!1),se&&V.observe(se))},[V]),[Q,Y]=GS(H),z=S4(e);return St.useEffect(()=>{!V||!Q.current||(V.disconnect(),y.current=!1,V.observe(Q.current))},[Q,V]),St.useEffect(()=>(a({type:wc.RegisterDroppable,element:{id:i,key:o,disabled:t,node:Q,rect:M,data:z}}),()=>a({type:wc.UnregisterDroppable,key:o,id:i})),[i]),St.useEffect(()=>{t!==m.current.disabled&&(a({type:wc.SetDroppableDisabled,id:i,key:o,disabled:t}),m.current.disabled=t)},[i,o,t,a]),{active:s,rect:M,isOver:c?.id===i,node:Q,over:c,setNodeRef:Y}}function Nre(n,e,t){const i=n.slice();return i.splice(t<0?i.length+t:t,0,i.splice(e,1)[0]),i}function REe(n,e){return n.reduce((t,i,r)=>{const o=e.get(i);return o&&(t[r]=o),t},Array(n.length))}function PM(n){return n!==null&&n>=0}function DEe(n,e){if(n===e)return!0;if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function PEe(n){return typeof n=="boolean"?{draggable:n,droppable:n}:n}const Gre=n=>{let{rects:e,activeIndex:t,overIndex:i,index:r}=n;const o=Nre(e,i,t),s=e[r],a=o[r];return!a||!s?null:{x:a.left-s.left,y:a.top-s.top,scaleX:a.width/s.width,scaleY:a.height/s.height}},UM={scaleX:1,scaleY:1},UEe=n=>{var e;let{activeIndex:t,activeNodeRect:i,index:r,rects:o,overIndex:s}=n;const a=(e=o[t])!=null?e:i;if(!a)return null;if(r===t){const h=o[s];return h?{x:0,y:t<s?h.top+h.height-(a.top+a.height):h.top-a.top,...UM}:null}const c=KEe(o,r,t);return r>t&&r<=s?{x:0,y:-a.height-c,...UM}:r<t&&r>=s?{x:0,y:a.height+c,...UM}:{x:0,y:0,...UM}};function KEe(n,e,t){const i=n[e],r=n[e-1],o=n[e+1];return i?t<e?r?i.top-(r.top+r.height):o?o.top-(i.top+i.height):0:o?o.top-(i.top+i.height):r?i.top-(r.top+r.height):0:0}const Wre="Sortable",Qre=En.createContext({activeIndex:-1,containerId:Wre,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Gre,disabled:{draggable:!1,droppable:!1}});function LEe(n){let{children:e,id:t,items:i,strategy:r=Gre,disabled:o=!1}=n;const{active:s,dragOverlay:a,droppableRects:c,over:h,measureDroppableContainers:m}=BEe(),y=E5(Wre,t),M=a.rect!==null,x=St.useMemo(()=>i.map(Y=>typeof Y=="object"&&"id"in Y?Y.id:Y),[i]),T=s!=null,P=s?x.indexOf(s.id):-1,F=h?x.indexOf(h.id):-1,j=St.useRef(x),q=!DEe(x,j.current),V=F!==-1&&P===-1||q,H=PEe(o);r0(()=>{q&&T&&m(x)},[q,x,T,m]),St.useEffect(()=>{j.current=x},[x]);const Q=St.useMemo(()=>({activeIndex:P,containerId:y,disabled:H,disableTransforms:V,items:x,overIndex:F,useDragOverlay:M,sortedRects:REe(x,c),strategy:r}),[P,y,H.draggable,H.droppable,V,x,F,c,M,r]);return En.createElement(Qre.Provider,{value:Q},e)}const FEe=n=>{let{id:e,items:t,activeIndex:i,overIndex:r}=n;return Nre(t,i,r).indexOf(e)},zEe=n=>{let{containerId:e,isSorting:t,wasDragging:i,index:r,items:o,newIndex:s,previousItems:a,previousContainerId:c,transition:h}=n;return!h||!i||a!==o&&r===s?!1:t?!0:s!==r&&e===c},jEe={duration:200,easing:"ease"},qre="transform",NEe=E4.Transition.toString({property:qre,duration:0,easing:"linear"}),GEe={roleDescription:"sortable"};function WEe(n){let{disabled:e,index:t,node:i,rect:r}=n;const[o,s]=St.useState(null),a=St.useRef(t);return r0(()=>{if(!e&&t!==a.current&&i.current){const c=r.current;if(c){const h=Yx(i.current,{ignoreTransform:!0}),m={x:c.left-h.left,y:c.top-h.top,scaleX:c.width/h.width,scaleY:c.height/h.height};(m.x||m.y)&&s(m)}}t!==a.current&&(a.current=t)},[e,t,i,r]),St.useEffect(()=>{o&&s(null)},[o]),o}function QEe(n){let{animateLayoutChanges:e=zEe,attributes:t,disabled:i,data:r,getNewIndex:o=FEe,id:s,strategy:a,resizeObserverConfig:c,transition:h=jEe}=n;const{items:m,containerId:y,activeIndex:M,disabled:x,disableTransforms:T,sortedRects:P,overIndex:F,useDragOverlay:j,strategy:q}=St.useContext(Qre),V=qEe(i,x),H=m.indexOf(s),Q=St.useMemo(()=>({sortable:{containerId:y,index:H,items:m},...r}),[y,r,H,m]),Y=St.useMemo(()=>m.slice(m.indexOf(s)),[m,s]),{rect:z,node:se,isOver:le,setNodeRef:pe}=TEe({id:s,data:Q,disabled:V.droppable,resizeObserverConfig:{updateMeasurementsFor:Y,...c}}),{active:de,activatorEvent:ve,activeNodeRect:Ee,attributes:Re,setNodeRef:je,listeners:Ie,isDragging:qe,over:tt,setActivatorNodeRef:At,transform:ke}=OEe({id:s,data:Q,attributes:{...GEe,...t},disabled:V.draggable}),we=sSe(pe,je),ze=!!de,Me=ze&&!T&&PM(M)&&PM(F),lt=!j&&qe,nt=lt&&Me?ke:null,Bt=Me?nt??(a??q)({rects:P,activeNodeRect:Ee,activeIndex:M,overIndex:F,index:H}):null,Ke=PM(M)&&PM(F)?o({id:s,items:m,activeIndex:M,overIndex:F}):H,Te=de?.id,Se=St.useRef({activeId:Te,items:m,newIndex:Ke,containerId:y}),We=m!==Se.current.items,at=e({active:de,containerId:y,isDragging:qe,isSorting:ze,id:s,index:H,items:m,newIndex:Se.current.newIndex,previousItems:Se.current.items,previousContainerId:Se.current.containerId,transition:h,wasDragging:Se.current.activeId!=null}),it=WEe({disabled:!at,index:H,node:se,rect:z});return St.useEffect(()=>{ze&&Se.current.newIndex!==Ke&&(Se.current.newIndex=Ke),y!==Se.current.containerId&&(Se.current.containerId=y),m!==Se.current.items&&(Se.current.items=m)},[ze,Ke,y,m]),St.useEffect(()=>{if(Te===Se.current.activeId)return;if(Te!=null&&Se.current.activeId==null){Se.current.activeId=Te;return}const Dt=setTimeout(()=>{Se.current.activeId=Te},50);return()=>clearTimeout(Dt)},[Te]),{active:de,activeIndex:M,attributes:Re,data:Q,rect:z,index:H,newIndex:Ke,items:m,isOver:le,isSorting:ze,isDragging:qe,listeners:Ie,node:se,overIndex:F,over:tt,setNodeRef:we,setActivatorNodeRef:At,setDroppableNodeRef:pe,setDraggableNodeRef:je,transform:it??Bt,transition:ft()};function ft(){if(it||We&&Se.current.newIndex===H)return NEe;if(!(lt&&!CK(ve)||!h)&&(ze||at))return E4.Transition.toString({...h,property:qre})}}function qEe(n,e){var t,i;return typeof n=="boolean"?{draggable:n,droppable:!1}:{draggable:(t=n?.draggable)!=null?t:e.draggable,droppable:(i=n?.droppable)!=null?i:e.droppable}}Ks.Down,Ks.Right,Ks.Up,Ks.Left;function Ab(){var n="/home/runner/work/maputnik/maputnik/src/components/Collapser.tsx",e="e73e8fb606fcd7318a8222b2e50c576ed3ad8702",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/Collapser.tsx",statementMap:{0:{start:{line:6,column:22},end:{line:10,column:5}},1:{start:{line:11,column:4},end:{line:11,column:154}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:12,column:3}},line:5}},branchMap:{0:{loc:{start:{line:11,column:11},end:{line:11,column:153}},type:"cond-expr",locations:[{start:{line:11,column:52},end:{line:11,column:92}},{start:{line:11,column:111},end:{line:11,column:153}}],line:11}},s:{0:0,1:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Collapser.tsx"],names:[],mappings:"AAeoC;AAfpC,OAAO,WAAW;AAClB,SAAQ,iBAAiB,qBAAoB;AAO7C,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,SAAS;AACP,UAAM,YAAY;AAAA,MAChB,OAAO;AAAA,MACP,QAAQ;AAAA,MACR,GAAG,KAAK,MAAM;AAAA,IAChB;AACA,WAAO,KAAK,MAAM,cAAc,oBAAC,iBAAc,OAAO,WAAU,IAAK,oBAAC,mBAAgB,OAAO,WAAW;AAAA,EAC1G;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e73e8fb606fcd7318a8222b2e50c576ed3ad8702"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Ab=function(){return s},s}Ab();class YEe extends En.Component{render(){Ab().f[0]++;const e=(Ab().s[0]++,{width:20,height:20,...this.props.style});return Ab().s[1]++,this.props.isCollapsed?(Ab().b[0][0]++,ie.jsx(YX,{style:e})):(Ab().b[0][1]++,ie.jsx(qX,{style:e}))}}function R_(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerListGroup.tsx",e="b04bfec534013c327fd210571832bbd2813a944a",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/LayerListGroup.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:32,column:9}},1:{start:{line:11,column:25},end:{line:11,column:72}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:33,column:3}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:11,column:17},end:{line:11,column:18}},loc:{start:{line:11,column:25},end:{line:11,column:72}},line:11}},branchMap:{},s:{0:0,1:0},f:{0:0,1:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerListGroup.tsx"],names:[],mappings:"AAcM,SAIE,KAJF;AAdN,OAAO,WAAW;AAClB,OAAO,eAAe;AAUtB,qBAAqB,uBAAuB,MAAM,UAA+B;AAAA,EAC/E,SAAS;AACP,WAAO,oBAAC,QAAG,WAAU,6BACnB;AAAA,MAAC;AAAA;AAAA,QAAI,WAAU;AAAA,QACb,eAAa,sBAAoB,KAAK,MAAM,aAAa;AAAA,QACzD,SAAS,QAAM,KAAK,MAAM,eAAe,CAAC,KAAK,MAAM,QAAQ;AAAA,QAE7D;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,iBAAe,KAAK,MAAM,eAAe;AAAA,cACzC,iBAAe,KAAK,MAAM;AAAA,cAEzB,eAAK,MAAM;AAAA;AAAA,UACd;AAAA,UACA,oBAAC,UAAK,WAAU,kBAAiB;AAAA,UACjC;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,QAAQ,IAAI,OAAO,GAAG;AAAA,cAC/B,aAAa,KAAK,MAAM;AAAA;AAAA,UAC1B;AAAA;AAAA;AAAA,IACF,GACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"b04bfec534013c327fd210571832bbd2813a944a"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return R_=function(){return s},s}R_();class $Ee extends En.Component{render(){return R_().f[0]++,R_().s[0]++,ie.jsx("li",{className:"maputnik-layer-list-group",children:ie.jsxs("div",{className:"maputnik-layer-list-group-header","data-wd-key":"layer-list-group:"+this.props["data-wd-key"],onClick:e=>(R_().f[1]++,R_().s[1]++,this.props.onActiveToggle(!this.props.isActive)),children:[ie.jsx("button",{className:"maputnik-layer-list-group-title","aria-controls":this.props["aria-controls"],"aria-expanded":this.props.isActive,children:this.props.title}),ie.jsx("span",{className:"maputnik-space"}),ie.jsx(YEe,{style:{height:14,width:14},isCollapsed:this.props.isActive})]})})}}function Wi(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerListItem.tsx",e="65a9cb0d1a08cfab21a14c1632991e31e3063aa8",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/LayerListItem.tsx",statementMap:{0:{start:{line:9,column:23},end:{line:22,column:1}},1:{start:{line:10,column:44},end:{line:10,column:49}},2:{start:{line:11,column:2},end:{line:21,column:7}},3:{start:{line:25,column:4},end:{line:34,column:5}},4:{start:{line:27,column:8},end:{line:27,column:54}},5:{start:{line:29,column:8},end:{line:29,column:53}},6:{start:{line:31,column:8},end:{line:31,column:56}},7:{start:{line:33,column:8},end:{line:33,column:49}},8:{start:{line:37,column:51},end:{line:37,column:61}},9:{start:{line:38,column:25},end:{line:38,column:27}},10:{start:{line:39,column:4},end:{line:44,column:5}},11:{start:{line:40,column:6},end:{line:40,column:76}},12:{start:{line:41,column:6},end:{line:43,column:7}},13:{start:{line:42,column:8},end:{line:42,column:103}},14:{start:{line:45,column:4},end:{line:56,column:6}},15:{start:{line:59,column:22},end:{line:145,column:2}},16:{start:{line:69,column:6},end:{line:69,column:11}},17:{start:{line:77,column:6},end:{line:77,column:40}},18:{start:{line:78,column:16},end:{line:82,column:3}},19:{start:{line:83,column:27},end:{line:83,column:69}},20:{start:{line:84,column:20},end:{line:84,column:23}},21:{start:{line:85,column:2},end:{line:144,column:7}},22:{start:{line:89,column:8},end:{line:89,column:25}},23:{start:{line:90,column:8},end:{line:92,column:9}},24:{start:{line:91,column:10},end:{line:91,column:35}},25:{start:{line:96,column:23},end:{line:96,column:60}},26:{start:{line:120,column:29},end:{line:120,column:61}},27:{start:{line:129,column:29},end:{line:129,column:58}},28:{start:{line:139,column:29},end:{line:139,column:70}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:23},end:{line:9,column:24}},loc:{start:{line:9,column:34},end:{line:22,column:1}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:24,column:2},end:{line:24,column:3}},loc:{start:{line:24,column:15},end:{line:35,column:3}},line:24},2:{name:"(anonymous_2)",decl:{start:{line:36,column:2},end:{line:36,column:3}},loc:{start:{line:36,column:11},end:{line:57,column:3}},line:36},3:{name:"(anonymous_3)",decl:{start:{line:59,column:39},end:{line:59,column:40}},loc:{start:{line:59,column:55},end:{line:145,column:1}},line:59},4:{name:"(anonymous_4)",decl:{start:{line:63,column:18},end:{line:63,column:19}},loc:{start:{line:63,column:24},end:{line:64,column:5}},line:63},5:{name:"(anonymous_5)",decl:{start:{line:65,column:21},end:{line:65,column:22}},loc:{start:{line:65,column:27},end:{line:66,column:5}},line:65},6:{name:"(anonymous_6)",decl:{start:{line:67,column:30},end:{line:67,column:31}},loc:{start:{line:67,column:36},end:{line:68,column:5}},line:67},7:{name:"(anonymous_7)",decl:{start:{line:88,column:11},end:{line:88,column:12}},loc:{start:{line:88,column:21},end:{line:93,column:7}},line:88},8:{name:"(anonymous_8)",decl:{start:{line:96,column:15},end:{line:96,column:16}},loc:{start:{line:96,column:23},end:{line:96,column:60}},line:96},9:{name:"(anonymous_9)",decl:{start:{line:120,column:21},end:{line:120,column:22}},loc:{start:{line:120,column:29},end:{line:120,column:61}},line:120},10:{name:"(anonymous_10)",decl:{start:{line:129,column:21},end:{line:129,column:22}},loc:{start:{line:129,column:29},end:{line:129,column:58}},line:129},11:{name:"(anonymous_11)",decl:{start:{line:139,column:21},end:{line:139,column:22}},loc:{start:{line:139,column:29},end:{line:139,column:70}},line:139}},branchMap:{0:{loc:{start:{line:25,column:4},end:{line:34,column:5}},type:"switch",locations:[{start:{line:26,column:6},end:{line:27,column:54}},{start:{line:28,column:6},end:{line:29,column:53}},{start:{line:30,column:6},end:{line:31,column:56}},{start:{line:32,column:6},end:{line:33,column:49}}],line:25},1:{loc:{start:{line:39,column:4},end:{line:44,column:5}},type:"if",locations:[{start:{line:39,column:4},end:{line:44,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:39},2:{loc:{start:{line:41,column:6},end:{line:43,column:7}},type:"if",locations:[{start:{line:41,column:6},end:{line:43,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:41},3:{loc:{start:{line:61,column:4},end:{line:61,column:22}},type:"default-arg",locations:[{start:{line:61,column:17},end:{line:61,column:22}}],line:61},4:{loc:{start:{line:62,column:4},end:{line:62,column:26}},type:"default-arg",locations:[{start:{line:62,column:17},end:{line:62,column:26}}],line:62},5:{loc:{start:{line:63,column:4},end:{line:64,column:5}},type:"default-arg",locations:[{start:{line:63,column:18},end:{line:64,column:5}}],line:63},6:{loc:{start:{line:65,column:4},end:{line:66,column:5}},type:"default-arg",locations:[{start:{line:65,column:21},end:{line:66,column:5}}],line:65},7:{loc:{start:{line:67,column:4},end:{line:68,column:5}},type:"default-arg",locations:[{start:{line:67,column:30},end:{line:68,column:5}}],line:67},8:{loc:{start:{line:81,column:13},end:{line:81,column:33}},type:"cond-expr",locations:[{start:{line:81,column:26},end:{line:81,column:29}},{start:{line:81,column:32},end:{line:81,column:33}}],line:81},9:{loc:{start:{line:83,column:27},end:{line:83,column:69}},type:"cond-expr",locations:[{start:{line:83,column:54},end:{line:83,column:60}},{start:{line:83,column:63},end:{line:83,column:69}}],line:83},10:{loc:{start:{line:90,column:8},end:{line:92,column:9}},type:"if",locations:[{start:{line:90,column:8},end:{line:92,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:90}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},b:{0:[0,0,0,0],1:[0,0],2:[0,0],3:[0],4:[0],5:[0],6:[0],7:[0],8:[0,0],9:[0,0],10:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerListItem.tsx"],names:[],mappings:"AAmBS,SACL,KADK;AAnBT,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,SAAQ,eAAe,cAAc,iBAAiB,gBAAe;AACrE,SAAS,mBAAmB;AAC5B,SAAQ,mBAAkB;AAC1B,SAAQ,WAAU;AAElB,OAAO,eAAe;AAUtB,MAAM,iBAAgD,CAAC,UAAU;AAC/D,QAAM,EAAC,gBAAgB,cAAa,IAAI;AACxC,SAAO,qBAAC,SAAI,WAAU,mCAAmC,GAAG,gBAAiB,GAAG,eAC9E;AAAA;AAAA,MAAC;AAAA;AAAA,QACC,WAAU;AAAA,QACV,MAAM,MAAM;AAAA,QACZ,OAAO,EAAE,OAAO,OAAO,QAAQ,OAAO,eAAe,SAAS;AAAA;AAAA,IAChE;AAAA,IACA,oBAAC,YAAO,WAAU,+BACf,gBAAM,SACT;AAAA,KACF;AACF;AAUA,MAAM,mBAAmB,MAAM,UAA2B;AAAA,EACxD,aAAa;AACX,YAAO,KAAK,MAAM,QAAQ;AAAA,MACxB,KAAK;AAAa,eAAO,oBAAC,iBAAc;AAAA,MACxC,KAAK;AAAQ,eAAO,oBAAC,gBAAa;AAAA,MAClC,KAAK;AAAQ,eAAO,oBAAC,mBAAgB;AAAA,MACrC,KAAK;AAAU,eAAO,oBAAC,YAAS;AAAA,IAClC;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,gBAAgB,mBAAkB,IAAI,KAAK;AAElD,QAAI,iBAAiB;AACrB,QAAI,gBAAgB;AAClB,uBAAiB,oCAAoC,cAAc;AAEnE,UAAI,oBAAoB;AACtB,0BAAkB,qCAAqC,cAAc,KAAK,kBAAkB;AAAA,MAC9F;AAAA,IACF;AAEA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,UAAU;AAAA,QACV,OAAO,KAAK,MAAM;AAAA,QAClB,WAAW,mCAAmC,cAAc;AAAA,QAC5D,eAAa,KAAK,MAAM;AAAA,QACxB,SAAS,KAAK,MAAM;AAAA,QACpB,eAAY;AAAA,QAEX,eAAK,WAAW;AAAA;AAAA,IACnB;AAAA,EACF;AACF;AAgBA,MAAM,gBAAgB,MAAM,WAA8C,CAAC,OAAO,QAAQ;AACxF,QAAM;AAAA,IACJ,aAAa;AAAA,IACb,aAAa;AAAA,IACb,cAAc,MAAM;AAAA,IAAC;AAAA,IACrB,iBAAiB,MAAM;AAAA,IAAC;AAAA,IACxB,0BAA0B,MAAM;AAAA,IAAC;AAAA,EACnC,IAAI;AAEJ,QAAM;AAAA,IACJ;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACF,IAAI,YAAY,EAAC,IAAI,MAAM,QAAO,CAAC;AAEnC,QAAM,QAAQ;AAAA,IACZ,WAAW,IAAI,UAAU,SAAS,SAAS;AAAA,IAC3C;AAAA,IACA,SAAS,aAAa,MAAM;AAAA,EAC9B;AAEA,QAAM,mBAAmB,eAAe,YAAY,SAAS;AAG7D,QAAM,YAAY;AAElB,SAAO,oBAAC,YAAY,UAAZ,EAAqB,OAAO,EAAC,MAAM,OAAM,GAC/C;AAAA,IAAC;AAAA;AAAA,MACC,KAAK,CAAC,SAAS;AACb,mBAAW,IAAI;AACf,YAAI,WAAW;AACb,oBAAU,UAAU;AAAA,QACtB;AAAA,MACF;AAAA,MACA;AAAA,MACA,IAAI,MAAM;AAAA,MACV,SAAS,QAAM,MAAM,cAAc,MAAM,UAAU;AAAA,MACnD,eAAa,qBAAqB,MAAM;AAAA,MACxC,WAAW,WAAW;AAAA,QACpB,4BAA4B;AAAA,QAC5B,qCAAqC;AAAA,QACrC,CAAC,MAAM,SAAU,GAAG;AAAA,MACtB,CAAC;AAAA,MACD;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,SAAS,MAAM;AAAA,YACf,WAAW,MAAM;AAAA,YACjB,gBAAgB;AAAA,YAChB,eAAe;AAAA;AAAA,QACjB;AAAA,QACA,oBAAC,UAAK,OAAO,EAAC,UAAU,EAAC,GAAG;AAAA,QAC5B;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,qBAAqB,MAAM,UAAQ;AAAA,YAC1C,QAAQ;AAAA,YACR,gBAAe;AAAA,YACf,SAAS,QAAM,eAAgB,MAAM,UAAU;AAAA;AAAA,QACjD;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,qBAAqB,MAAM,UAAQ;AAAA,YAC1C,QAAQ;AAAA,YACR,gBAAe;AAAA,YACf,SAAS,QAAM,YAAa,MAAM,UAAU;AAAA;AAAA,QAC9C;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,qBAAmB,MAAM,UAAQ;AAAA,YACxC,QAAQ;AAAA,YACR,gBAAe;AAAA,YACf,oBAAoB;AAAA,YACpB,SAAS,QAAM,wBAAyB,MAAM,UAAU;AAAA;AAAA,QAC1D;AAAA;AAAA;AAAA,EACF,GACF;AACF,CAAC;AAED,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"65a9cb0d1a08cfab21a14c1632991e31e3063aa8"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Wi=function(){return s},s}Wi();Wi().s[0]++;const VEe=n=>{Wi().f[0]++;const{dragAttributes:e,dragListeners:t}=(Wi().s[1]++,n);return Wi().s[2]++,ie.jsxs("div",{className:"maputnik-layer-list-item-handle",...e,...t,children:[ie.jsx($X,{className:"layer-handle__icon",type:n.layerType,style:{width:"1em",height:"1em",verticalAlign:"middle"}}),ie.jsx("button",{className:"maputnik-layer-list-item-id",children:n.layerId})]})};class i8 extends En.Component{renderIcon(){switch(Wi().f[1]++,Wi().s[3]++,this.props.action){case"duplicate":return Wi().b[0][0]++,Wi().s[4]++,ie.jsx(Ufe,{});case"show":return Wi().b[0][1]++,Wi().s[5]++,ie.jsx(Pfe,{});case"hide":return Wi().b[0][2]++,Wi().s[6]++,ie.jsx(Dfe,{});case"delete":return Wi().b[0][3]++,Wi().s[7]++,ie.jsx(Hb,{})}}render(){Wi().f[2]++;const{classBlockName:e,classBlockModifier:t}=(Wi().s[8]++,this.props);let i=(Wi().s[9]++,"");return Wi().s[10]++,e?(Wi().b[1][0]++,Wi().s[11]++,i=`maputnik-layer-list-icon-action__${e}`,Wi().s[12]++,t?(Wi().b[2][0]++,Wi().s[13]++,i+=` maputnik-layer-list-icon-action__${e}--${t}`):Wi().b[2][1]++):Wi().b[1][1]++,Wi().s[14]++,ie.jsx("button",{tabIndex:-1,title:this.props.action,className:`maputnik-layer-list-icon-action ${i}`,"data-wd-key":this.props.wdKey,onClick:this.props.onClick,"aria-hidden":"true",children:this.renderIcon()})}}const HEe=(Wi().s[15]++,En.forwardRef((n,e)=>{Wi().f[3]++;const{isSelected:t=(Wi().b[3][0]++,!1),visibility:i=(Wi().b[4][0]++,"visible"),onLayerCopy:r=(Wi().b[5][0]++,()=>{Wi().f[4]++}),onLayerDestroy:o=(Wi().b[6][0]++,()=>{Wi().f[5]++}),onLayerVisibilityToggle:s=(Wi().b[7][0]++,()=>{Wi().f[6]++})}=(Wi().s[16]++,n),{attributes:a,listeners:c,setNodeRef:h,transform:m,transition:y,isDragging:M}=(Wi().s[17]++,QEe({id:n.layerId})),x=(Wi().s[18]++,{transform:E4.Transform.toString(m),transition:y,opacity:M?(Wi().b[8][0]++,.5):(Wi().b[8][1]++,1)}),T=(Wi().s[19]++,i==="visible"?(Wi().b[9][0]++,"show"):(Wi().b[9][1]++,"hide")),P=(Wi().s[20]++,e);return Wi().s[21]++,ie.jsx(ox.Provider,{value:{size:"14px"},children:ie.jsxs("li",{ref:F=>{Wi().f[7]++,Wi().s[22]++,h(F),Wi().s[23]++,P?(Wi().b[10][0]++,Wi().s[24]++,P.current=F):Wi().b[10][1]++},style:x,id:n.id,onClick:F=>(Wi().f[8]++,Wi().s[25]++,n.onLayerSelect(n.layerIndex)),"data-wd-key":"layer-list-item:"+n.layerId,className:u0({"maputnik-layer-list-item":!0,"maputnik-layer-list-item-selected":t,[n.className]:!0}),children:[ie.jsx(VEe,{layerId:n.layerId,layerType:n.layerType,dragAttributes:a,dragListeners:c}),ie.jsx("span",{style:{flexGrow:1}}),ie.jsx(i8,{wdKey:"layer-list-item:"+n.layerId+":delete",action:"delete",classBlockName:"delete",onClick:F=>(Wi().f[9]++,Wi().s[26]++,o(n.layerIndex))}),ie.jsx(i8,{wdKey:"layer-list-item:"+n.layerId+":copy",action:"duplicate",classBlockName:"duplicate",onClick:F=>(Wi().f[10]++,Wi().s[27]++,r(n.layerIndex))}),ie.jsx(i8,{wdKey:"layer-list-item:"+n.layerId+":toggle-visibility",action:T,classBlockName:"visibility",classBlockModifier:T,onClick:F=>(Wi().f[11]++,Wi().s[28]++,s(n.layerIndex))})]})})}));function YS(){var n="/home/runner/work/maputnik/maputnik/src/components/InputButton.tsx",e="522bfc6b8aacbfd03b55d947af2897dc69beb570",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputButton.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:20,column:6}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:21,column:3}},line:5}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputButton.tsx"],names:[],mappings:"AAkBW;AAlBX,OAAO,WAAW;AAClB,OAAO,gBAAgB;AAevB,qBAAqB,oBAAoB,MAAM,UAA4B;AAAA,EACzE,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,IAAI,KAAK,MAAM;AAAA,QACf,OAAO,KAAK,MAAM;AAAA,QAClB,MAAM,KAAK,MAAM;AAAA,QACjB,SAAS,KAAK,MAAM;AAAA,QACpB,UAAU,KAAK,MAAM;AAAA,QACrB,cAAY,KAAK,MAAM,YAAY;AAAA,QACnC,WAAW,WAAW,mBAAmB,KAAK,MAAM,SAAS;AAAA,QAC7D,eAAa,KAAK,MAAM,aAAa;AAAA,QACrC,OAAO,KAAK,MAAM;AAAA,QAEjB,eAAK,MAAM;AAAA;AAAA,IACd;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"522bfc6b8aacbfd03b55d947af2897dc69beb570"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return YS=function(){return s},s}YS();class Zs extends En.Component{render(){return YS().f[0]++,YS().s[0]++,ie.jsx("button",{id:this.props.id,title:this.props.title,type:this.props.type,onClick:this.props.onClick,disabled:this.props.disabled,"aria-label":this.props["aria-label"],className:u0("maputnik-button",this.props.className),"data-wd-key":this.props["data-wd-key"],style:this.props.style,children:this.props.children})}}var r8={exports:{}},o8,dW;function ZEe(){if(dW)return o8;dW=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return o8=n,o8}var s8,fW;function XEe(){if(fW)return s8;fW=1;var n=ZEe();function e(){}function t(){}return t.resetWarningCache=e,s8=function(){function i(s,a,c,h,m,y){if(y!==n){var M=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw M.name="Invariant Violation",M}}i.isRequired=i;function r(){return i}var o={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:r,element:i,elementType:i,instanceOf:r,node:i,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:t,resetWarningCache:e};return o.PropTypes=o,o},s8}var pW;function b1(){return pW||(pW=1,r8.exports=XEe()()),r8.exports}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var Yre=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],$S=Yre.join(","),$re=typeof Element>"u",$b=$re?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,VS=!$re&&Element.prototype.getRootNode?function(n){var e;return n==null||(e=n.getRootNode)===null||e===void 0?void 0:e.call(n)}:function(n){return n?.ownerDocument},HS=function n(e,t){var i;t===void 0&&(t=!0);var r=e==null||(i=e.getAttribute)===null||i===void 0?void 0:i.call(e,"inert"),o=r===""||r==="true",s=o||t&&e&&n(e.parentNode);return s},JEe=function(e){var t,i=e==null||(t=e.getAttribute)===null||t===void 0?void 0:t.call(e,"contenteditable");return i===""||i==="true"},Vre=function(e,t,i){if(HS(e))return[];var r=Array.prototype.slice.apply(e.querySelectorAll($S));return t&&$b.call(e,$S)&&r.unshift(e),r=r.filter(i),r},Hre=function n(e,t,i){for(var r=[],o=Array.from(e);o.length;){var s=o.shift();if(!HS(s,!1))if(s.tagName==="SLOT"){var a=s.assignedElements(),c=a.length?a:s.children,h=n(c,!0,i);i.flatten?r.push.apply(r,h):r.push({scopeParent:s,candidates:h})}else{var m=$b.call(s,$S);m&&i.filter(s)&&(t||!e.includes(s))&&r.push(s);var y=s.shadowRoot||typeof i.getShadowRoot=="function"&&i.getShadowRoot(s),M=!HS(y,!1)&&(!i.shadowRootFilter||i.shadowRootFilter(s));if(y&&M){var x=n(y===!0?s.children:y.children,!0,i);i.flatten?r.push.apply(r,x):r.push({scopeParent:s,candidates:x})}else o.unshift.apply(o,s.children)}}return r},Zre=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},Ty=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||JEe(e))&&!Zre(e)?0:e.tabIndex},e6e=function(e,t){var i=Ty(e);return i<0&&t&&!Zre(e)?0:i},t6e=function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex},Xre=function(e){return e.tagName==="INPUT"},n6e=function(e){return Xre(e)&&e.type==="hidden"},i6e=function(e){var t=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(i){return i.tagName==="SUMMARY"});return t},r6e=function(e,t){for(var i=0;i<e.length;i++)if(e[i].checked&&e[i].form===t)return e[i]},o6e=function(e){if(!e.name)return!0;var t=e.form||VS(e),i=function(a){return t.querySelectorAll('input[type="radio"][name="'+a+'"]')},r;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")r=i(window.CSS.escape(e.name));else try{r=i(e.name)}catch(s){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",s.message),!1}var o=r6e(r,e.form);return!o||o===e},s6e=function(e){return Xre(e)&&e.type==="radio"},a6e=function(e){return s6e(e)&&!o6e(e)},l6e=function(e){var t,i=e&&VS(e),r=(t=i)===null||t===void 0?void 0:t.host,o=!1;if(i&&i!==e){var s,a,c;for(o=!!((s=r)!==null&&s!==void 0&&(a=s.ownerDocument)!==null&&a!==void 0&&a.contains(r)||e!=null&&(c=e.ownerDocument)!==null&&c!==void 0&&c.contains(e));!o&&r;){var h,m,y;i=VS(r),r=(h=i)===null||h===void 0?void 0:h.host,o=!!((m=r)!==null&&m!==void 0&&(y=m.ownerDocument)!==null&&y!==void 0&&y.contains(r))}}return o},mW=function(e){var t=e.getBoundingClientRect(),i=t.width,r=t.height;return i===0&&r===0},u6e=function(e,t){var i=t.displayCheck,r=t.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var o=$b.call(e,"details>summary:first-of-type"),s=o?e.parentElement:e;if($b.call(s,"details:not([open]) *"))return!0;if(!i||i==="full"||i==="legacy-full"){if(typeof r=="function"){for(var a=e;e;){var c=e.parentElement,h=VS(e);if(c&&!c.shadowRoot&&r(c)===!0)return mW(e);e.assignedSlot?e=e.assignedSlot:!c&&h!==e.ownerDocument?e=h.host:e=c}e=a}if(l6e(e))return!e.getClientRects().length;if(i!=="legacy-full")return!0}else if(i==="non-zero-area")return mW(e);return!1},c6e=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var t=e.parentElement;t;){if(t.tagName==="FIELDSET"&&t.disabled){for(var i=0;i<t.children.length;i++){var r=t.children.item(i);if(r.tagName==="LEGEND")return $b.call(t,"fieldset[disabled] *")?!0:!r.contains(e)}return!0}t=t.parentElement}return!1},ZS=function(e,t){return!(t.disabled||HS(t)||n6e(t)||u6e(t,e)||i6e(t)||c6e(t))},gD=function(e,t){return!(a6e(t)||Ty(t)<0||!ZS(e,t))},A6e=function(e){var t=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(t)||t>=0)},h6e=function n(e){var t=[],i=[];return e.forEach(function(r,o){var s=!!r.scopeParent,a=s?r.scopeParent:r,c=e6e(a,s),h=s?n(r.candidates):a;c===0?s?t.push.apply(t,h):t.push(a):i.push({documentOrder:o,tabIndex:c,item:r,isScope:s,content:h})}),i.sort(t6e).reduce(function(r,o){return o.isScope?r.push.apply(r,o.content):r.push(o.content),r},[]).concat(t)},Jre=function(e,t){t=t||{};var i;return t.getShadowRoot?i=Hre([e],t.includeContainer,{filter:gD.bind(null,t),flatten:!1,getShadowRoot:t.getShadowRoot,shadowRootFilter:A6e}):i=Vre(e,t.includeContainer,gD.bind(null,t)),h6e(i)},eoe=function(e,t){t=t||{};var i;return t.getShadowRoot?i=Hre([e],t.includeContainer,{filter:ZS.bind(null,t),flatten:!0,getShadowRoot:t.getShadowRoot}):i=Vre(e,t.includeContainer,ZS.bind(null,t)),i},sb=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return $b.call(e,$S)===!1?!1:gD(t,e)},d6e=Yre.concat("iframe").join(","),ww=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return $b.call(e,d6e)===!1?!1:ZS(t,e)};const f6e=Object.freeze(Object.defineProperty({__proto__:null,focusable:eoe,getTabIndex:Ty,isFocusable:ww,isTabbable:sb,tabbable:Jre},Symbol.toStringTag,{value:"Module"}));/*!
* focus-trap 7.6.5
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function yD(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=Array(e);t<e;t++)i[t]=n[t];return i}function p6e(n){if(Array.isArray(n))return yD(n)}function m6e(n,e,t){return(e=C6e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function g6e(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function y6e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gW(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function yW(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?gW(Object(t),!0).forEach(function(i){m6e(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):gW(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function v6e(n){return p6e(n)||g6e(n)||_6e(n)||y6e()}function b6e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function C6e(n){var e=b6e(n,"string");return typeof e=="symbol"?e:e+""}function _6e(n,e){if(n){if(typeof n=="string")return yD(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?yD(n,e):void 0}}var vW={activateTrap:function(e,t){if(e.length>0){var i=e[e.length-1];i!==t&&i._setPausedState(!0)}var r=e.indexOf(t);r===-1||e.splice(r,1),e.push(t)},deactivateTrap:function(e,t){var i=e.indexOf(t);i!==-1&&e.splice(i,1),e.length>0&&!e[e.length-1]._isManuallyPaused()&&e[e.length-1]._setPausedState(!1)}},x6e=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},M6e=function(e){return e?.key==="Escape"||e?.key==="Esc"||e?.keyCode===27},S3=function(e){return e?.key==="Tab"||e?.keyCode===9},w6e=function(e){return S3(e)&&!e.shiftKey},S6e=function(e){return S3(e)&&e.shiftKey},bW=function(e){return setTimeout(e,0)},w2=function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];return typeof e=="function"?e.apply(void 0,i):e},KM=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},E6e=[],O6e=function(e,t){var i=t?.document||document,r=t?.trapStack||E6e,o=yW({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:w6e,isKeyBackward:S6e},t),s={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,manuallyPaused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},a,c=function(Ee,Re,je){return Ee&&Ee[Re]!==void 0?Ee[Re]:o[je||Re]},h=function(Ee,Re){var je=typeof Re?.composedPath=="function"?Re.composedPath():void 0;return s.containerGroups.findIndex(function(Ie){var qe=Ie.container,tt=Ie.tabbableNodes;return qe.contains(Ee)||je?.includes(qe)||tt.find(function(At){return At===Ee})})},m=function(Ee){var Re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},je=Re.hasFallback,Ie=je===void 0?!1:je,qe=Re.params,tt=qe===void 0?[]:qe,At=o[Ee];if(typeof At=="function"&&(At=At.apply(void 0,v6e(tt))),At===!0&&(At=void 0),!At){if(At===void 0||At===!1)return At;throw new Error("`".concat(Ee,"` was specified but was not a node, or did not return a node"))}var ke=At;if(typeof At=="string"){try{ke=i.querySelector(At)}catch(we){throw new Error("`".concat(Ee,'` appears to be an invalid selector; error="').concat(we.message,'"'))}if(!ke&&!Ie)throw new Error("`".concat(Ee,"` as selector refers to no known node"))}return ke},y=function(){var Ee=m("initialFocus",{hasFallback:!0});if(Ee===!1)return!1;if(Ee===void 0||Ee&&!ww(Ee,o.tabbableOptions))if(h(i.activeElement)>=0)Ee=i.activeElement;else{var Re=s.tabbableGroups[0],je=Re&&Re.firstTabbableNode;Ee=je||m("fallbackFocus")}else Ee===null&&(Ee=m("fallbackFocus"));if(!Ee)throw new Error("Your focus-trap needs to have at least one focusable element");return Ee},M=function(){if(s.containerGroups=s.containers.map(function(Ee){var Re=Jre(Ee,o.tabbableOptions),je=eoe(Ee,o.tabbableOptions),Ie=Re.length>0?Re[0]:void 0,qe=Re.length>0?Re[Re.length-1]:void 0,tt=je.find(function(we){return sb(we)}),At=je.slice().reverse().find(function(we){return sb(we)}),ke=!!Re.find(function(we){return Ty(we)>0});return{container:Ee,tabbableNodes:Re,focusableNodes:je,posTabIndexesFound:ke,firstTabbableNode:Ie,lastTabbableNode:qe,firstDomTabbableNode:tt,lastDomTabbableNode:At,nextTabbableNode:function(ze){var Me=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,lt=Re.indexOf(ze);return lt<0?Me?je.slice(je.indexOf(ze)+1).find(function(nt){return sb(nt)}):je.slice(0,je.indexOf(ze)).reverse().find(function(nt){return sb(nt)}):Re[lt+(Me?1:-1)]}}}),s.tabbableGroups=s.containerGroups.filter(function(Ee){return Ee.tabbableNodes.length>0}),s.tabbableGroups.length<=0&&!m("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(s.containerGroups.find(function(Ee){return Ee.posTabIndexesFound})&&s.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},x=function(Ee){var Re=Ee.activeElement;if(Re)return Re.shadowRoot&&Re.shadowRoot.activeElement!==null?x(Re.shadowRoot):Re},T=function(Ee){if(Ee!==!1&&Ee!==x(document)){if(!Ee||!Ee.focus){T(y());return}Ee.focus({preventScroll:!!o.preventScroll}),s.mostRecentlyFocusedNode=Ee,x6e(Ee)&&Ee.select()}},P=function(Ee){var Re=m("setReturnFocus",{params:[Ee]});return Re||(Re===!1?!1:Ee)},F=function(Ee){var Re=Ee.target,je=Ee.event,Ie=Ee.isBackward,qe=Ie===void 0?!1:Ie;Re=Re||KM(je),M();var tt=null;if(s.tabbableGroups.length>0){var At=h(Re,je),ke=At>=0?s.containerGroups[At]:void 0;if(At<0)qe?tt=s.tabbableGroups[s.tabbableGroups.length-1].lastTabbableNode:tt=s.tabbableGroups[0].firstTabbableNode;else if(qe){var we=s.tabbableGroups.findIndex(function(Bt){var Ke=Bt.firstTabbableNode;return Re===Ke});if(we<0&&(ke.container===Re||ww(Re,o.tabbableOptions)&&!sb(Re,o.tabbableOptions)&&!ke.nextTabbableNode(Re,!1))&&(we=At),we>=0){var ze=we===0?s.tabbableGroups.length-1:we-1,Me=s.tabbableGroups[ze];tt=Ty(Re)>=0?Me.lastTabbableNode:Me.lastDomTabbableNode}else S3(je)||(tt=ke.nextTabbableNode(Re,!1))}else{var lt=s.tabbableGroups.findIndex(function(Bt){var Ke=Bt.lastTabbableNode;return Re===Ke});if(lt<0&&(ke.container===Re||ww(Re,o.tabbableOptions)&&!sb(Re,o.tabbableOptions)&&!ke.nextTabbableNode(Re))&&(lt=At),lt>=0){var nt=lt===s.tabbableGroups.length-1?0:lt+1,bt=s.tabbableGroups[nt];tt=Ty(Re)>=0?bt.firstTabbableNode:bt.firstDomTabbableNode}else S3(je)||(tt=ke.nextTabbableNode(Re))}}else tt=m("fallbackFocus");return tt},j=function(Ee){var Re=KM(Ee);if(!(h(Re,Ee)>=0)){if(w2(o.clickOutsideDeactivates,Ee)){a.deactivate({returnFocus:o.returnFocusOnDeactivate});return}w2(o.allowOutsideClick,Ee)||Ee.preventDefault()}},q=function(Ee){var Re=KM(Ee),je=h(Re,Ee)>=0;if(je||Re instanceof Document)je&&(s.mostRecentlyFocusedNode=Re);else{Ee.stopImmediatePropagation();var Ie,qe=!0;if(s.mostRecentlyFocusedNode)if(Ty(s.mostRecentlyFocusedNode)>0){var tt=h(s.mostRecentlyFocusedNode),At=s.containerGroups[tt].tabbableNodes;if(At.length>0){var ke=At.findIndex(function(we){return we===s.mostRecentlyFocusedNode});ke>=0&&(o.isKeyForward(s.recentNavEvent)?ke+1<At.length&&(Ie=At[ke+1],qe=!1):ke-1>=0&&(Ie=At[ke-1],qe=!1))}}else s.containerGroups.some(function(we){return we.tabbableNodes.some(function(ze){return Ty(ze)>0})})||(qe=!1);else qe=!1;qe&&(Ie=F({target:s.mostRecentlyFocusedNode,isBackward:o.isKeyBackward(s.recentNavEvent)})),T(Ie||s.mostRecentlyFocusedNode||y())}s.recentNavEvent=void 0},V=function(Ee){var Re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;s.recentNavEvent=Ee;var je=F({event:Ee,isBackward:Re});je&&(S3(Ee)&&Ee.preventDefault(),T(je))},H=function(Ee){(o.isKeyForward(Ee)||o.isKeyBackward(Ee))&&V(Ee,o.isKeyBackward(Ee))},Q=function(Ee){M6e(Ee)&&w2(o.escapeDeactivates,Ee)!==!1&&(Ee.preventDefault(),a.deactivate())},Y=function(Ee){var Re=KM(Ee);h(Re,Ee)>=0||w2(o.clickOutsideDeactivates,Ee)||w2(o.allowOutsideClick,Ee)||(Ee.preventDefault(),Ee.stopImmediatePropagation())},z=function(){if(s.active)return vW.activateTrap(r,a),s.delayInitialFocusTimer=o.delayInitialFocus?bW(function(){T(y())}):T(y()),i.addEventListener("focusin",q,!0),i.addEventListener("mousedown",j,{capture:!0,passive:!1}),i.addEventListener("touchstart",j,{capture:!0,passive:!1}),i.addEventListener("click",Y,{capture:!0,passive:!1}),i.addEventListener("keydown",H,{capture:!0,passive:!1}),i.addEventListener("keydown",Q),a},se=function(){if(s.active)return i.removeEventListener("focusin",q,!0),i.removeEventListener("mousedown",j,!0),i.removeEventListener("touchstart",j,!0),i.removeEventListener("click",Y,!0),i.removeEventListener("keydown",H,!0),i.removeEventListener("keydown",Q),a},le=function(Ee){var Re=Ee.some(function(je){var Ie=Array.from(je.removedNodes);return Ie.some(function(qe){return qe===s.mostRecentlyFocusedNode})});Re&&T(y())},pe=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(le):void 0,de=function(){pe&&(pe.disconnect(),s.active&&!s.paused&&s.containers.map(function(Ee){pe.observe(Ee,{subtree:!0,childList:!0})}))};return a={get active(){return s.active},get paused(){return s.paused},activate:function(Ee){if(s.active)return this;var Re=c(Ee,"onActivate"),je=c(Ee,"onPostActivate"),Ie=c(Ee,"checkCanFocusTrap");Ie||M(),s.active=!0,s.paused=!1,s.nodeFocusedBeforeActivation=x(i),Re?.();var qe=function(){Ie&&M(),z(),de(),je?.()};return Ie?(Ie(s.containers.concat()).then(qe,qe),this):(qe(),this)},deactivate:function(Ee){if(!s.active)return this;var Re=yW({onDeactivate:o.onDeactivate,onPostDeactivate:o.onPostDeactivate,checkCanReturnFocus:o.checkCanReturnFocus},Ee);clearTimeout(s.delayInitialFocusTimer),s.delayInitialFocusTimer=void 0,se(),s.active=!1,s.paused=!1,de(),vW.deactivateTrap(r,a);var je=c(Re,"onDeactivate"),Ie=c(Re,"onPostDeactivate"),qe=c(Re,"checkCanReturnFocus"),tt=c(Re,"returnFocus","returnFocusOnDeactivate");je?.();var At=function(){bW(function(){tt&&T(P(s.nodeFocusedBeforeActivation)),Ie?.()})};return tt&&qe?(qe(P(s.nodeFocusedBeforeActivation)).then(At,At),this):(At(),this)},pause:function(Ee){return s.active?(s.manuallyPaused=!0,this._setPausedState(!0,Ee)):this},unpause:function(Ee){return s.active?(s.manuallyPaused=!1,r[r.length-1]!==this?this:this._setPausedState(!1,Ee)):this},updateContainerElements:function(Ee){var Re=[].concat(Ee).filter(Boolean);return s.containers=Re.map(function(je){return typeof je=="string"?i.querySelector(je):je}),s.active&&M(),de(),this}},Object.defineProperties(a,{_isManuallyPaused:{value:function(){return s.manuallyPaused}},_setPausedState:{value:function(Ee,Re){if(s.paused===Ee)return this;if(s.paused=Ee,Ee){var je=c(Re,"onPause"),Ie=c(Re,"onPostPause");je?.(),se(),de(),Ie?.()}else{var qe=c(Re,"onUnpause"),tt=c(Re,"onPostUnpause");qe?.(),M(),z(),de(),tt?.()}return this}}}),a.updateContainerElements(e),a};const B6e=Object.freeze(Object.defineProperty({__proto__:null,createFocusTrap:O6e},Symbol.toStringTag,{value:"Module"})),I6e=zD(B6e),k6e=zD(f6e);var a8,CW;function T6e(){if(CW)return a8;CW=1;function n(Y){"@babel/helpers - typeof";return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(z){return typeof z}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z},n(Y)}function e(Y,z){if(!(Y instanceof z))throw new TypeError("Cannot call a class as a function")}function t(Y,z){for(var se=0;se<z.length;se++){var le=z[se];le.enumerable=le.enumerable||!1,le.configurable=!0,"value"in le&&(le.writable=!0),Object.defineProperty(Y,M(le.key),le)}}function i(Y,z,se){return z&&t(Y.prototype,z),Object.defineProperty(Y,"prototype",{writable:!1}),Y}function r(Y,z,se){return z=c(z),o(Y,a()?Reflect.construct(z,se||[],c(Y).constructor):z.apply(Y,se))}function o(Y,z){if(z&&(n(z)=="object"||typeof z=="function"))return z;if(z!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return s(Y)}function s(Y){if(Y===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Y}function a(){try{var Y=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(a=function(){return!!Y})()}function c(Y){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(z){return z.__proto__||Object.getPrototypeOf(z)},c(Y)}function h(Y,z){if(typeof z!="function"&&z!==null)throw new TypeError("Super expression must either be null or a function");Y.prototype=Object.create(z&&z.prototype,{constructor:{value:Y,writable:!0,configurable:!0}}),Object.defineProperty(Y,"prototype",{writable:!1}),z&&m(Y,z)}function m(Y,z){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(se,le){return se.__proto__=le,se},m(Y,z)}function y(Y,z,se){return(z=M(z))in Y?Object.defineProperty(Y,z,{value:se,enumerable:!0,configurable:!0,writable:!0}):Y[z]=se,Y}function M(Y){var z=x(Y,"string");return n(z)=="symbol"?z:z+""}function x(Y,z){if(n(Y)!="object"||!Y)return Y;var se=Y[Symbol.toPrimitive];if(se!==void 0){var le=se.call(Y,z);if(n(le)!="object")return le;throw new TypeError("@@toPrimitive must return a primitive value.")}return(z==="string"?String:Number)(Y)}var T=Qa(),P=b1(),F=I6e,j=F.createFocusTrap,q=k6e,V=q.isFocusable,H=(function(Y){function z(se){var le;e(this,z),le=r(this,z,[se]),y(le,"getNodeForOption",function(ve){var Ee,Re=(Ee=this.internalOptions[ve])!==null&&Ee!==void 0?Ee:this.originalOptions[ve];if(typeof Re=="function"){for(var je=arguments.length,Ie=new Array(je>1?je-1:0),qe=1;qe<je;qe++)Ie[qe-1]=arguments[qe];Re=Re.apply(void 0,Ie)}if(Re===!0&&(Re=void 0),!Re){if(Re===void 0||Re===!1)return Re;throw new Error("`".concat(ve,"` was specified but was not a node, or did not return a node"))}var tt=Re;if(typeof Re=="string"){var At;if(tt=(At=this.getDocument())===null||At===void 0?void 0:At.querySelector(Re),!tt)throw new Error("`".concat(ve,"` as selector refers to no known node"))}return tt}),le.handleDeactivate=le.handleDeactivate.bind(le),le.handlePostDeactivate=le.handlePostDeactivate.bind(le),le.handleClickOutsideDeactivates=le.handleClickOutsideDeactivates.bind(le),le.internalOptions={returnFocusOnDeactivate:!1,checkCanReturnFocus:null,onDeactivate:le.handleDeactivate,onPostDeactivate:le.handlePostDeactivate,clickOutsideDeactivates:le.handleClickOutsideDeactivates},le.originalOptions={returnFocusOnDeactivate:!0,onDeactivate:null,onPostDeactivate:null,checkCanReturnFocus:null,clickOutsideDeactivates:!1};var pe=se.focusTrapOptions;for(var de in pe)if(Object.prototype.hasOwnProperty.call(pe,de)){if(de==="returnFocusOnDeactivate"||de==="onDeactivate"||de==="onPostDeactivate"||de==="checkCanReturnFocus"||de==="clickOutsideDeactivates"){le.originalOptions[de]=pe[de];continue}le.internalOptions[de]=pe[de]}return le.outsideClick=null,le.focusTrapElements=se.containerElements||[],le.updatePreviousElement(),le}return h(z,Y),i(z,[{key:"getDocument",value:function(){return this.props.focusTrapOptions.document||(typeof document<"u"?document:void 0)}},{key:"getReturnFocusNode",value:function(){var le=this.getNodeForOption("setReturnFocus",this.previouslyFocusedElement);return le||(le===!1?!1:this.previouslyFocusedElement)}},{key:"updatePreviousElement",value:function(){var le=this.getDocument();le&&(this.previouslyFocusedElement=le.activeElement)}},{key:"deactivateTrap",value:function(){!this.focusTrap||!this.focusTrap.active||this.focusTrap.deactivate({returnFocus:!1,checkCanReturnFocus:null,onDeactivate:this.originalOptions.onDeactivate})}},{key:"handleClickOutsideDeactivates",value:function(le){var pe=typeof this.originalOptions.clickOutsideDeactivates=="function"?this.originalOptions.clickOutsideDeactivates.call(null,le):this.originalOptions.clickOutsideDeactivates;return pe&&(this.outsideClick={target:le.target,allowDeactivation:pe}),pe}},{key:"handleDeactivate",value:function(){this.originalOptions.onDeactivate&&this.originalOptions.onDeactivate.call(null),this.deactivateTrap()}},{key:"handlePostDeactivate",value:function(){var le=this,pe=function(){var ve=le.getReturnFocusNode(),Ee=!!(le.originalOptions.returnFocusOnDeactivate&&ve!==null&&ve!==void 0&&ve.focus&&(!le.outsideClick||le.outsideClick.allowDeactivation&&!V(le.outsideClick.target,le.internalOptions.tabbableOptions))),Re=le.internalOptions.preventScroll,je=Re===void 0?!1:Re;Ee&&ve.focus({preventScroll:je}),le.originalOptions.onPostDeactivate&&le.originalOptions.onPostDeactivate.call(null),le.outsideClick=null};this.originalOptions.checkCanReturnFocus?this.originalOptions.checkCanReturnFocus.call(null,this.getReturnFocusNode()).then(pe,pe):pe()}},{key:"setupFocusTrap",value:function(){if(this.focusTrap)this.props.active&&!this.focusTrap.active&&(this.focusTrap.activate(),this.props.paused&&this.focusTrap.pause());else{var le=this.focusTrapElements.some(Boolean);le&&(this.focusTrap=this.props._createFocusTrap(this.focusTrapElements,this.internalOptions),this.props.active&&this.focusTrap.activate(),this.props.paused&&this.focusTrap.pause())}}},{key:"componentDidMount",value:function(){this.props.active&&this.setupFocusTrap()}},{key:"componentDidUpdate",value:function(le){if(this.focusTrap){le.containerElements!==this.props.containerElements&&this.focusTrap.updateContainerElements(this.props.containerElements);var pe=!le.active&&this.props.active,de=le.active&&!this.props.active,ve=!le.paused&&this.props.paused,Ee=le.paused&&!this.props.paused;if(pe&&(this.updatePreviousElement(),this.focusTrap.activate()),de){this.deactivateTrap();return}ve&&this.focusTrap.pause(),Ee&&this.focusTrap.unpause()}else le.containerElements!==this.props.containerElements&&(this.focusTrapElements=this.props.containerElements),this.props.active&&(this.updatePreviousElement(),this.setupFocusTrap())}},{key:"componentWillUnmount",value:function(){this.deactivateTrap()}},{key:"render",value:function(){var le=this,pe=this.props.children?T.Children.only(this.props.children):void 0;if(pe){if(pe.type&&pe.type===T.Fragment)throw new Error("A focus-trap cannot use a Fragment as its child container. Try replacing it with a <div> element.");var de=function(Re){var je=le.props.containerElements;pe&&(typeof pe.ref=="function"?pe.ref(Re):pe.ref&&(pe.ref.current=Re)),le.focusTrapElements=je||[Re]},ve=T.cloneElement(pe,{ref:de});return ve}return null}}])})(T.Component),Q=typeof Element>"u"?Function:Element;return H.propTypes={active:P.bool,paused:P.bool,focusTrapOptions:P.shape({document:P.object,onActivate:P.func,onPostActivate:P.func,checkCanFocusTrap:P.func,onPause:P.func,onPostPause:P.func,onUnpause:P.func,onPostUnpause:P.func,onDeactivate:P.func,onPostDeactivate:P.func,checkCanReturnFocus:P.func,initialFocus:P.oneOfType([P.instanceOf(Q),P.string,P.bool,P.func]),fallbackFocus:P.oneOfType([P.instanceOf(Q),P.string,P.func]),escapeDeactivates:P.oneOfType([P.bool,P.func]),clickOutsideDeactivates:P.oneOfType([P.bool,P.func]),returnFocusOnDeactivate:P.bool,setReturnFocus:P.oneOfType([P.instanceOf(Q),P.string,P.bool,P.func]),allowOutsideClick:P.oneOfType([P.bool,P.func]),preventScroll:P.bool,tabbableOptions:P.shape({displayCheck:P.oneOf(["full","legacy-full","non-zero-area","none"]),getShadowRoot:P.oneOfType([P.bool,P.func])}),trapStack:P.array,isKeyForward:P.func,isKeyBackward:P.func}),containerElements:P.arrayOf(P.instanceOf(Q)),children:P.oneOfType([P.element,P.instanceOf(Q)])},H.defaultProps={active:!0,paused:!1,focusTrapOptions:{},_createFocusTrap:j},a8=H,a8}var l8={exports:{}},_W;function R6e(){return _W||(_W=1,(function(n){(function(e){var t=!1,i,r;function o(){if(typeof i<"u")return i;var y=document.documentElement,M=document.createElement("div");return M.setAttribute("style","width:99px;height:99px;position:absolute;top:-9999px;overflow:scroll;"),y.appendChild(M),i=M.offsetWidth-M.clientWidth,y.removeChild(M),i}function s(){return document.documentElement.scrollHeight>window.innerHeight}function a(y){if(!(typeof document>"u"||t)){var M=document.documentElement;r=window.pageYOffset,s()?M.style.width="calc(100% - "+o()+"px)":M.style.width="100%",M.style.position="fixed",M.style.top=-r+"px",M.style.overflow="hidden",t=!0}}function c(){if(!(typeof document>"u"||!t)){var y=document.documentElement;y.style.width="",y.style.position="",y.style.top="",y.style.overflow="",window.scroll(0,r),t=!1}}function h(){if(t){c();return}a()}var m={on:a,off:c,toggle:h};n.exports=m})()})(l8)),l8.exports}var u8,xW;function D6e(){if(xW)return u8;xW=1;function n(V){"@babel/helpers - typeof";return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(H){return typeof H}:function(H){return H&&typeof Symbol=="function"&&H.constructor===Symbol&&H!==Symbol.prototype?"symbol":typeof H},n(V)}function e(V,H){if(!(V instanceof H))throw new TypeError("Cannot call a class as a function")}function t(V,H){for(var Q=0;Q<H.length;Q++){var Y=H[Q];Y.enumerable=Y.enumerable||!1,Y.configurable=!0,"value"in Y&&(Y.writable=!0),Object.defineProperty(V,Y.key,Y)}}function i(V,H,Q){return H&&t(V.prototype,H),Object.defineProperty(V,"prototype",{writable:!1}),V}function r(V,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");V.prototype=Object.create(H&&H.prototype,{constructor:{value:V,writable:!0,configurable:!0}}),Object.defineProperty(V,"prototype",{writable:!1}),H&&o(V,H)}function o(V,H){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Y,z){return Y.__proto__=z,Y},o(V,H)}function s(V){var H=h();return function(){var Y=m(V),z;if(H){var se=m(this).constructor;z=Reflect.construct(Y,arguments,se)}else z=Y.apply(this,arguments);return a(this,z)}}function a(V,H){if(H&&(n(H)==="object"||typeof H=="function"))return H;if(H!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return c(V)}function c(V){if(V===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return V}function h(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function m(V){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(Q){return Q.__proto__||Object.getPrototypeOf(Q)},m(V)}function y(V,H,Q){return H in V?Object.defineProperty(V,H,{value:Q,enumerable:!0,configurable:!0,writable:!0}):V[H]=Q,V}var M=Qa(),x=jD(),T=T6e(),P=R6e(),F=(function(V){r(Q,V);var H=s(Q);function Q(Y){var z;if(e(this,Q),z=H.call(this,Y),y(c(z),"getApplicationNode",function(){return z.props.getApplicationNode?z.props.getApplicationNode():z.props.applicationNode}),y(c(z),"checkUnderlayClick",function(se){z.dialogNode&&z.dialogNode.contains(se.target)||se.pageX>se.target.ownerDocument.documentElement.offsetWidth||se.pageY>se.target.ownerDocument.documentElement.offsetHeight||z.exit(se)}),y(c(z),"checkDocumentKeyDown",function(se){z.props.escapeExits&&(se.key==="Escape"||se.key==="Esc"||se.keyCode===27)&&z.exit(se)}),y(c(z),"exit",function(se){z.props.onExit&&z.props.onExit(se)}),!Y.titleText&&!Y.titleId)throw new Error("react-aria-modal instances should have a `titleText` or `titleId`");return z}return i(Q,[{key:"componentDidMount",value:function(){this.props.onEnter&&this.props.onEnter();var z=this.getApplicationNode();setTimeout(function(){z&&z.setAttribute("aria-hidden","true")},0),this.props.escapeExits&&this.addKeyDownListener(),this.props.scrollDisabled&&P.on()}},{key:"componentDidUpdate",value:function(z){z.scrollDisabled&&!this.props.scrollDisabled?P.off():!z.scrollDisabled&&this.props.scrollDisabled&&P.on(),this.props.escapeExits&&!z.escapeExits?this.addKeyDownListener():!this.props.escapeExits&&z.escapeExits&&this.removeKeyDownListener()}},{key:"componentWillUnmount",value:function(){this.props.scrollDisabled&&P.off();var z=this.getApplicationNode();z&&z.setAttribute("aria-hidden","false"),this.removeKeyDownListener()}},{key:"addKeyDownListener",value:function(){var z=this;setTimeout(function(){document.addEventListener("keydown",z.checkDocumentKeyDown)})}},{key:"removeKeyDownListener",value:function(){var z=this;setTimeout(function(){document.removeEventListener("keydown",z.checkDocumentKeyDown)})}},{key:"render",value:function(){var z=this.props,se={};if(z.includeDefaultStyles&&(se={position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:1050,overflowX:"hidden",overflowY:"auto",WebkitOverflowScrolling:"touch",textAlign:"center"},z.underlayColor&&(se.background=z.underlayColor),z.underlayClickExits&&(se.cursor="pointer")),z.underlayStyle)for(var le in z.underlayStyle)z.underlayStyle.hasOwnProperty(le)&&(se[le]=z.underlayStyle[le]);var pe={className:z.underlayClass,style:se};z.underlayClickExits&&(pe.onMouseDown=this.checkUnderlayClick);for(var de in this.props.underlayProps)pe[de]=this.props.underlayProps[de];var ve={};z.includeDefaultStyles&&(ve={display:"inline-block",height:"100%",verticalAlign:"middle"});var Ee={key:"a",style:ve},Re={};if(z.includeDefaultStyles&&(Re={display:"inline-block",textAlign:"left",top:0,maxWidth:"100%",cursor:"auto",outline:z.focusDialog?0:null},z.verticallyCenter&&(Re.verticalAlign="middle",Re.top=0)),z.dialogStyle)for(var je in z.dialogStyle)z.dialogStyle.hasOwnProperty(je)&&(Re[je]=z.dialogStyle[je]);var Ie={key:"b",ref:(function(ke){this.dialogNode=ke}).bind(this),role:z.alert?"alertdialog":"dialog",id:z.dialogId,className:z.dialogClass,style:Re};z.titleId?Ie["aria-labelledby"]=z.titleId:z.titleText&&(Ie["aria-label"]=z.titleText),z.focusDialog&&(Ie.tabIndex="-1");for(var qe in z)/^(data-|aria-)/.test(qe)&&(Ie[qe]=z[qe]);var tt=[M.createElement("div",Ie,z.children)];z.verticallyCenter&&tt.unshift(M.createElement("div",Ee));var At=z.focusTrapOptions||{};return(z.focusDialog||z.initialFocus)&&(At.initialFocus=z.focusDialog?"#".concat(this.props.dialogId):z.initialFocus),At.escapeDeactivates=z.escapeExits,M.createElement(T,{focusTrapOptions:At,paused:z.focusTrapPaused},M.createElement("div",pe,tt))}}]),Q})(M.Component);y(F,"defaultProps",{underlayProps:{},dialogId:"react-aria-modal-dialog",underlayClickExits:!0,escapeExits:!0,underlayColor:"rgba(0,0,0,0.5)",includeDefaultStyles:!0,focusTrapPaused:!1,scrollDisabled:!0});function j(V,H){if(!window.document)return function(){return null};H=H||{};var Q=(function(Y){r(se,Y);var z=s(se);function se(){var le;e(this,se);for(var pe=arguments.length,de=new Array(pe),ve=0;ve<pe;ve++)de[ve]=arguments[ve];return le=z.call.apply(z,[this].concat(de)),y(c(le),"container",null),le}return i(se,[{key:"componentDidMount",value:function(){H.renderTo?this.container=typeof H.renderTo=="string"?document.querySelector(H.renderTo):H.renderTo:(this.container=document.createElement("div"),document.body.appendChild(this.container)),this.forceUpdate()}},{key:"componentWillUnmount",value:function(){H.renderTo||this.container.parentNode.removeChild(this.container)}},{key:"render",value:function(){return this.container===null||!this.props.mounted?null:x.createPortal(M.createElement(V,this.props,this.props.children),this.container)}}]),se})(M.Component);return y(Q,"defaultProps",{mounted:!0}),Q}var q=j(F);return q.renderTo=function(V){return j(F,{renderTo:V})},u8=q,u8}var P6e=D6e();const U6e=eu(P6e);function qu(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/Modal.tsx",e="b56a3b702e6eec99855202d1cfe05d2ba4d6a2ce",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/Modal.tsx",statementMap:{0:{start:{line:8,column:24},end:{line:10,column:3}},1:{start:{line:12,column:12},end:{line:19,column:3}},2:{start:{line:13,column:4},end:{line:15,column:5}},3:{start:{line:14,column:6},end:{line:14,column:36}},4:{start:{line:16,column:4},end:{line:18,column:10}},5:{start:{line:17,column:6},end:{line:17,column:32}},6:{start:{line:21,column:14},end:{line:21,column:26}},7:{start:{line:22,column:4},end:{line:60,column:5}},8:{start:{line:23,column:6},end:{line:57,column:8}},9:{start:{line:59,column:6},end:{line:59,column:19}},10:{start:{line:63,column:14},end:{line:63,column:46}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:12,column:12},end:{line:12,column:13}},loc:{start:{line:12,column:18},end:{line:19,column:3}},line:12},1:{name:"(anonymous_1)",decl:{start:{line:16,column:15},end:{line:16,column:16}},loc:{start:{line:16,column:21},end:{line:18,column:5}},line:16},2:{name:"(anonymous_2)",decl:{start:{line:20,column:2},end:{line:20,column:3}},loc:{start:{line:20,column:11},end:{line:61,column:3}},line:20}},branchMap:{0:{loc:{start:{line:13,column:4},end:{line:15,column:5}},type:"if",locations:[{start:{line:13,column:4},end:{line:15,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:13},1:{loc:{start:{line:22,column:4},end:{line:60,column:5}},type:"if",locations:[{start:{line:22,column:4},end:{line:60,column:5}},{start:{line:58,column:11},end:{line:60,column:5}}],line:22}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},f:{0:0,1:0,2:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/Modal.tsx"],names:[],mappings:"AA8CU,SACE,KADF;AA9CV,OAAO,WAAuC;AAC9C,SAAQ,eAAc;AACtB,OAAO,eAAe;AACtB,OAAO,gBAAgB;AACvB,SAA+B,uBAAuB;AAYtD,MAAM,sBAAsB,MAAM,UAA8B;AAAA,EAC9D,OAAO,eAAe;AAAA,IACpB,oBAAoB;AAAA,EACtB;AAAA;AAAA,EAGA,UAAU,MAAM;AACd,QAAI,SAAS,eAAe;AAC1B,MAAC,SAAS,cAA8B,KAAK;AAAA,IAC/C;AAEA,eAAW,MAAM;AACf,WAAK,MAAM,aAAa;AAAA,IAC1B,GAAG,CAAC;AAAA,EACN;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,QAAG,KAAK,MAAM,QAAQ;AACpB,aAAO;AAAA,QAAC;AAAA;AAAA,UACN,WAAW,KAAK,MAAM;AAAA,UACtB,oBAAoB,KAAK,MAAM;AAAA,UAC/B,eAAa,KAAK,MAAM,aAAa;AAAA,UACrC,kBAAkB;AAAA,UAClB,QAAQ,KAAK;AAAA,UACb,aAAY;AAAA,UAEZ;AAAA,YAAC;AAAA;AAAA,cAAI,WAAW,WAAW,kBAAkB,KAAK,MAAM,SAAS;AAAA,cAC/D,eAAa,KAAK,MAAM,aAAa;AAAA,cAErC;AAAA,qCAAC,YAAO,WAAU,yBAChB;AAAA,sCAAC,QAAG,WAAU,+BAA+B,eAAK,MAAM,OAAM;AAAA,kBAC9D,oBAAC,UAAK,WAAU,kBAAiB;AAAA,kBACjC;AAAA,oBAAC;AAAA;AAAA,sBAAO,WAAU;AAAA,sBAChB,OAAO,EAAE,aAAa;AAAA,sBACtB,SAAS,KAAK;AAAA,sBACd,eAAa,KAAK,MAAM,aAAa,IAAE;AAAA,sBAEvC,8BAAC,WAAQ;AAAA;AAAA,kBACX;AAAA,mBACF;AAAA,gBACA,oBAAC,SAAI,WAAU,2BACb,8BAAC,SAAI,WAAU,0BAA0B,eAAK,MAAM,UAAS,GAC/D;AAAA;AAAA;AAAA,UACF;AAAA;AAAA,MACF;AAAA,IACF,OACK;AACH,aAAO;AAAA,IACT;AAAA,EACF;AACF;AAEA,MAAM,QAAQ,gBAAgB,EAAE,aAAa;AAC7C,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"b56a3b702e6eec99855202d1cfe05d2ba4d6a2ce"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return qu=function(){return s},s}qu();class K6e extends En.Component{static defaultProps=(qu().s[0]++,{underlayClickExits:!0});onClose=(qu().s[1]++,()=>{qu().f[0]++,qu().s[2]++,document.activeElement?(qu().b[0][0]++,qu().s[3]++,document.activeElement.blur()):qu().b[0][1]++,qu().s[4]++,setTimeout(()=>{qu().f[1]++,qu().s[5]++,this.props.onOpenToggle()},0)});render(){qu().f[2]++;const e=(qu().s[6]++,this.props.t);return qu().s[7]++,this.props.isOpen?(qu().b[1][0]++,qu().s[8]++,ie.jsx(U6e,{titleText:this.props.title,underlayClickExits:this.props.underlayClickExits,"data-wd-key":this.props["data-wd-key"],verticallyCenter:!0,onExit:this.onClose,dialogClass:"maputnik-modal-container",children:ie.jsxs("div",{className:u0("maputnik-modal",this.props.className),"data-wd-key":this.props["data-wd-key"],children:[ie.jsxs("header",{className:"maputnik-modal-header",children:[ie.jsx("h1",{className:"maputnik-modal-header-title",children:this.props.title}),ie.jsx("span",{className:"maputnik-space"}),ie.jsx("button",{className:"maputnik-modal-header-toggle",title:e("Close modal"),onClick:this.onClose,"data-wd-key":this.props["data-wd-key"]+".close-modal",children:ie.jsx(Qfe,{})})]}),ie.jsx("div",{className:"maputnik-modal-scroller",children:ie.jsx("div",{className:"maputnik-modal-content",children:this.props.children})})]})})):(qu().b[1][1]++,qu().s[9]++,!1)}}const C1=(qu().s[10]++,No()(K6e));function fs(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldDocLabel.tsx",e="227136badbf4464e3a73e0852e3bc3d4b9112a08",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldDocLabel.tsx",statementMap:{0:{start:{line:4,column:22},end:{line:33,column:1}},1:{start:{line:5,column:26},end:{line:5,column:47}},2:{start:{line:6,column:22},end:{line:11,column:3}},3:{start:{line:7,column:4},end:{line:7,column:19}},4:{start:{line:8,column:4},end:{line:10,column:5}},5:{start:{line:9,column:6},end:{line:9,column:31}},6:{start:{line:12,column:31},end:{line:12,column:36}},7:{start:{line:13,column:18},end:{line:13,column:33}},8:{start:{line:14,column:2},end:{line:31,column:3}},9:{start:{line:15,column:4},end:{line:28,column:12}},10:{start:{line:23,column:25},end:{line:23,column:43}},11:{start:{line:29,column:9},end:{line:31,column:3}},12:{start:{line:30,column:4},end:{line:30,column:172}},13:{start:{line:32,column:2},end:{line:32,column:40}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:22},end:{line:4,column:23}},loc:{start:{line:4,column:33},end:{line:33,column:1}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:6,column:22},end:{line:6,column:23}},loc:{start:{line:6,column:33},end:{line:11,column:3}},line:6},2:{name:"(anonymous_2)",decl:{start:{line:23,column:19},end:{line:23,column:20}},loc:{start:{line:23,column:25},end:{line:23,column:43}},line:23}},branchMap:{0:{loc:{start:{line:8,column:4},end:{line:10,column:5}},type:"if",locations:[{start:{line:8,column:4},end:{line:10,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:8},1:{loc:{start:{line:13,column:18},end:{line:13,column:33}},type:"binary-expr",locations:[{start:{line:13,column:18},end:{line:13,column:27}},{start:{line:13,column:31},end:{line:13,column:33}}],line:13},2:{loc:{start:{line:14,column:2},end:{line:31,column:3}},type:"if",locations:[{start:{line:14,column:2},end:{line:31,column:3}},{start:{line:29,column:9},end:{line:31,column:3}}],line:14},3:{loc:{start:{line:21,column:24},end:{line:21,column:93}},type:"cond-expr",locations:[{start:{line:21,column:31},end:{line:21,column:61}},{start:{line:21,column:64},end:{line:21,column:93}}],line:21},4:{loc:{start:{line:22,column:65},end:{line:22,column:89}},type:"cond-expr",locations:[{start:{line:22,column:72},end:{line:22,column:78}},{start:{line:22,column:81},end:{line:22,column:89}}],line:22},5:{loc:{start:{line:25,column:20},end:{line:25,column:107}},type:"cond-expr",locations:[{start:{line:25,column:43},end:{line:25,column:66}},{start:{line:25,column:85},end:{line:25,column:107}}],line:25},6:{loc:{start:{line:29,column:9},end:{line:31,column:3}},type:"if",locations:[{start:{line:29,column:9},end:{line:31,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:29}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0},f:{0:0,1:0,2:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldDocLabel.tsx"],names:[],mappings:"AA4BQ,SASY,KATZ;AA5BR,OAAO,WAAyB;AAChC,SAAQ,eAAe,sBAAqB;AAW5C,MAAM,gBAA8C,CAAC,UAAU;AAC7D,QAAM,CAAC,MAAM,OAAO,IAAI,MAAM,SAAS,KAAK;AAE5C,QAAM,cAAc,CAAC,UAAmB;AACtC,YAAQ,KAAK;AACb,QAAI,MAAM,aAAa;AACrB,YAAM,YAAY,KAAK;AAAA,IACzB;AAAA,EACF;AAEA,QAAM,EAAE,OAAO,UAAU,IAAI;AAC7B,QAAM,EAAE,IAAI,IAAI,aAAa,CAAC;AAE9B,MAAI,KAAK;AACP,WACE,oBAAC,WAAM,WAAU,wBACf,+BAAC,SAAI,WAAU,uBACZ;AAAA;AAAA,MACA;AAAA,MACD;AAAA,QAAC;AAAA;AAAA,UACC,cAAY,OAAO,iCAAiC;AAAA,UACpD,WAAW,4CAA4C,OAAO,SAAS,QAAQ;AAAA,UAC/E,SAAS,MAAM,YAAY,CAAC,IAAI;AAAA,UAChC,eAAa,sBAAsB;AAAA,UAElC,iBAAO,oBAAC,kBAAe,IAAK,oBAAC,iBAAc;AAAA;AAAA,MAC9C;AAAA,OACF,GACF;AAAA,EAEJ,WAAW,OAAO;AAChB,WACE,oBAAC,WAAM,WAAU,wBACf,8BAAC,SAAI,WAAU,uBAAuB,iBAAM,GAC9C;AAAA,EAEJ;AACA,SAAO,oBAAC,SAAI;AACd;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"227136badbf4464e3a73e0852e3bc3d4b9112a08"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return fs=function(){return s},s}fs();fs().s[0]++;const SK=n=>{fs().f[0]++;const[e,t]=(fs().s[1]++,En.useState(!1));fs().s[2]++;const i=a=>{fs().f[1]++,fs().s[3]++,t(a),fs().s[4]++,n.onToggleDoc?(fs().b[0][0]++,fs().s[5]++,n.onToggleDoc(a)):fs().b[0][1]++},{label:r,fieldSpec:o}=(fs().s[6]++,n),{doc:s}=(fs().s[7]++,fs().b[1][0]++,o||(fs().b[1][1]++,{}));return fs().s[8]++,s?(fs().b[2][0]++,fs().s[9]++,ie.jsx("label",{className:"maputnik-doc-wrapper",children:ie.jsxs("div",{className:"maputnik-doc-target",children:[r,"",ie.jsx("button",{"aria-label":e?(fs().b[3][0]++,"close property documentation"):(fs().b[3][1]++,"open property documentation"),className:`maputnik-doc-button maputnik-doc-button--${e?(fs().b[4][0]++,"open"):(fs().b[4][1]++,"closed")}`,onClick:()=>(fs().f[2]++,fs().s[10]++,i(!e)),"data-wd-key":"field-doc-button-"+r,children:e?(fs().b[5][0]++,ie.jsx(Bfe,{})):(fs().b[5][1]++,ie.jsx(Ife,{}))})]})})):(fs().b[2][1]++,fs().s[11]++,r?(fs().b[6][0]++,fs().s[12]++,ie.jsx("label",{className:"maputnik-doc-wrapper",children:ie.jsx("div",{className:"maputnik-doc-target",children:r})})):(fs().b[6][1]++,fs().s[13]++,ie.jsx("div",{})))};function L6e(n,e){const t={};return(n[n.length-1]===""?[...n,""]:n).join((t.padRight?" ":"")+","+(t.padLeft===!1?"":" ")).trim()}const F6e=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,z6e=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,j6e={};function MW(n,e){return(j6e.jsx?z6e:F6e).test(n)}const N6e=/[ \t\n\f\r]/g;function G6e(n){return typeof n=="object"?n.type==="text"?wW(n.value):!1:wW(n)}function wW(n){return n.replace(N6e,"")===""}class O5{constructor(e,t,i){this.normal=t,this.property=e,i&&(this.space=i)}}O5.prototype.normal={};O5.prototype.property={};O5.prototype.space=void 0;function toe(n,e){const t={},i={};for(const r of n)Object.assign(t,r.property),Object.assign(i,r.normal);return new O5(t,i,e)}function vD(n){return n.toLowerCase()}class kd{constructor(e,t){this.attribute=t,this.property=e}}kd.prototype.attribute="";kd.prototype.booleanish=!1;kd.prototype.boolean=!1;kd.prototype.commaOrSpaceSeparated=!1;kd.prototype.commaSeparated=!1;kd.prototype.defined=!1;kd.prototype.mustUseProperty=!1;kd.prototype.number=!1;kd.prototype.overloadedBoolean=!1;kd.prototype.property="";kd.prototype.spaceSeparated=!1;kd.prototype.space=void 0;let W6e=0;const ho=iC(),Yu=iC(),bD=iC(),Zn=iC(),Ga=iC(),J_=iC(),hf=iC();function iC(){return 2**++W6e}const CD=Object.freeze(Object.defineProperty({__proto__:null,boolean:ho,booleanish:Yu,commaOrSpaceSeparated:hf,commaSeparated:J_,number:Zn,overloadedBoolean:bD,spaceSeparated:Ga},Symbol.toStringTag,{value:"Module"})),c8=Object.keys(CD);class EK extends kd{constructor(e,t,i,r){let o=-1;if(super(e,t),SW(this,"space",r),typeof i=="number")for(;++o<c8.length;){const s=c8[o];SW(this,c8[o],(i&CD[s])===CD[s])}}}EK.prototype.defined=!0;function SW(n,e,t){t&&(n[e]=t)}function $x(n){const e={},t={};for(const[i,r]of Object.entries(n.properties)){const o=new EK(i,n.transform(n.attributes||{},i),r,n.space);n.mustUseProperty&&n.mustUseProperty.includes(i)&&(o.mustUseProperty=!0),e[i]=o,t[vD(i)]=i,t[vD(o.attribute)]=i}return new O5(e,t,n.space)}const noe=$x({properties:{ariaActiveDescendant:null,ariaAtomic:Yu,ariaAutoComplete:null,ariaBusy:Yu,ariaChecked:Yu,ariaColCount:Zn,ariaColIndex:Zn,ariaColSpan:Zn,ariaControls:Ga,ariaCurrent:null,ariaDescribedBy:Ga,ariaDetails:null,ariaDisabled:Yu,ariaDropEffect:Ga,ariaErrorMessage:null,ariaExpanded:Yu,ariaFlowTo:Ga,ariaGrabbed:Yu,ariaHasPopup:null,ariaHidden:Yu,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Ga,ariaLevel:Zn,ariaLive:null,ariaModal:Yu,ariaMultiLine:Yu,ariaMultiSelectable:Yu,ariaOrientation:null,ariaOwns:Ga,ariaPlaceholder:null,ariaPosInSet:Zn,ariaPressed:Yu,ariaReadOnly:Yu,ariaRelevant:null,ariaRequired:Yu,ariaRoleDescription:Ga,ariaRowCount:Zn,ariaRowIndex:Zn,ariaRowSpan:Zn,ariaSelected:Yu,ariaSetSize:Zn,ariaSort:null,ariaValueMax:Zn,ariaValueMin:Zn,ariaValueNow:Zn,ariaValueText:null,role:null},transform(n,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function ioe(n,e){return e in n?n[e]:e}function roe(n,e){return ioe(n,e.toLowerCase())}const Q6e=$x({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:J_,acceptCharset:Ga,accessKey:Ga,action:null,allow:null,allowFullScreen:ho,allowPaymentRequest:ho,allowUserMedia:ho,alt:null,as:null,async:ho,autoCapitalize:null,autoComplete:Ga,autoFocus:ho,autoPlay:ho,blocking:Ga,capture:null,charSet:null,checked:ho,cite:null,className:Ga,cols:Zn,colSpan:null,content:null,contentEditable:Yu,controls:ho,controlsList:Ga,coords:Zn|J_,crossOrigin:null,data:null,dateTime:null,decoding:null,default:ho,defer:ho,dir:null,dirName:null,disabled:ho,download:bD,draggable:Yu,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:ho,formTarget:null,headers:Ga,height:Zn,hidden:bD,high:Zn,href:null,hrefLang:null,htmlFor:Ga,httpEquiv:Ga,id:null,imageSizes:null,imageSrcSet:null,inert:ho,inputMode:null,integrity:null,is:null,isMap:ho,itemId:null,itemProp:Ga,itemRef:Ga,itemScope:ho,itemType:Ga,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:ho,low:Zn,manifest:null,max:null,maxLength:Zn,media:null,method:null,min:null,minLength:Zn,multiple:ho,muted:ho,name:null,nonce:null,noModule:ho,noValidate:ho,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:ho,optimum:Zn,pattern:null,ping:Ga,placeholder:null,playsInline:ho,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:ho,referrerPolicy:null,rel:Ga,required:ho,reversed:ho,rows:Zn,rowSpan:Zn,sandbox:Ga,scope:null,scoped:ho,seamless:ho,selected:ho,shadowRootClonable:ho,shadowRootDelegatesFocus:ho,shadowRootMode:null,shape:null,size:Zn,sizes:null,slot:null,span:Zn,spellCheck:Yu,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Zn,step:null,style:null,tabIndex:Zn,target:null,title:null,translate:null,type:null,typeMustMatch:ho,useMap:null,value:Yu,width:Zn,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Ga,axis:null,background:null,bgColor:null,border:Zn,borderColor:null,bottomMargin:Zn,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:ho,declare:ho,event:null,face:null,frame:null,frameBorder:null,hSpace:Zn,leftMargin:Zn,link:null,longDesc:null,lowSrc:null,marginHeight:Zn,marginWidth:Zn,noResize:ho,noHref:ho,noShade:ho,noWrap:ho,object:null,profile:null,prompt:null,rev:null,rightMargin:Zn,rules:null,scheme:null,scrolling:Yu,standby:null,summary:null,text:null,topMargin:Zn,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Zn,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:ho,disableRemotePlayback:ho,prefix:null,property:null,results:Zn,security:null,unselectable:null},space:"html",transform:roe}),q6e=$x({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:hf,accentHeight:Zn,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Zn,amplitude:Zn,arabicForm:null,ascent:Zn,attributeName:null,attributeType:null,azimuth:Zn,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Zn,by:null,calcMode:null,capHeight:Zn,className:Ga,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Zn,diffuseConstant:Zn,direction:null,display:null,dur:null,divisor:Zn,dominantBaseline:null,download:ho,dx:null,dy:null,edgeMode:null,editable:null,elevation:Zn,enableBackground:null,end:null,event:null,exponent:Zn,externalResourcesRequired:null,fill:null,fillOpacity:Zn,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:J_,g2:J_,glyphName:J_,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Zn,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Zn,horizOriginX:Zn,horizOriginY:Zn,id:null,ideographic:Zn,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Zn,k:Zn,k1:Zn,k2:Zn,k3:Zn,k4:Zn,kernelMatrix:hf,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Zn,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Zn,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Zn,overlineThickness:Zn,paintOrder:null,panose1:null,path:null,pathLength:Zn,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Ga,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Zn,pointsAtY:Zn,pointsAtZ:Zn,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:hf,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:hf,rev:hf,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:hf,requiredFeatures:hf,requiredFonts:hf,requiredFormats:hf,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Zn,specularExponent:Zn,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Zn,strikethroughThickness:Zn,string:null,stroke:null,strokeDashArray:hf,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Zn,strokeOpacity:Zn,strokeWidth:null,style:null,surfaceScale:Zn,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:hf,tabIndex:Zn,tableValues:null,target:null,targetX:Zn,targetY:Zn,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:hf,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Zn,underlineThickness:Zn,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Zn,values:null,vAlphabetic:Zn,vMathematical:Zn,vectorEffect:null,vHanging:Zn,vIdeographic:Zn,version:null,vertAdvY:Zn,vertOriginX:Zn,vertOriginY:Zn,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Zn,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:ioe}),ooe=$x({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(n,e){return"xlink:"+e.slice(5).toLowerCase()}}),soe=$x({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:roe}),aoe=$x({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(n,e){return"xml:"+e.slice(3).toLowerCase()}}),Y6e={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},$6e=/[A-Z]/g,EW=/-[a-z]/g,V6e=/^data[-\w.:]+$/i;function H6e(n,e){const t=vD(e);let i=e,r=kd;if(t in n.normal)return n.property[n.normal[t]];if(t.length>4&&t.slice(0,4)==="data"&&V6e.test(e)){if(e.charAt(4)==="-"){const o=e.slice(5).replace(EW,X6e);i="data"+o.charAt(0).toUpperCase()+o.slice(1)}else{const o=e.slice(4);if(!EW.test(o)){let s=o.replace($6e,Z6e);s.charAt(0)!=="-"&&(s="-"+s),e="data"+s}}r=EK}return new r(i,e)}function Z6e(n){return"-"+n.toLowerCase()}function X6e(n){return n.charAt(1).toUpperCase()}const J6e=toe([noe,Q6e,ooe,soe,aoe],"html"),OK=toe([noe,q6e,ooe,soe,aoe],"svg");function eOe(n){return n.join(" ").trim()}var qC={},A8,OW;function tOe(){if(OW)return A8;OW=1;var n=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,t=/^\s*/,i=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,r=/^:\s*/,o=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,s=/^[;\s]*/,a=/^\s+|\s+$/g,c=`
`,h="/",m="*",y="",M="comment",x="declaration";A8=function(P,F){if(typeof P!="string")throw new TypeError("First argument must be a string");if(!P)return[];F=F||{};var j=1,q=1;function V(Ee){var Re=Ee.match(e);Re&&(j+=Re.length);var je=Ee.lastIndexOf(c);q=~je?Ee.length-je:q+Ee.length}function H(){var Ee={line:j,column:q};return function(Re){return Re.position=new Q(Ee),se(),Re}}function Q(Ee){this.start=Ee,this.end={line:j,column:q},this.source=F.source}Q.prototype.content=P;function Y(Ee){var Re=new Error(F.source+":"+j+":"+q+": "+Ee);if(Re.reason=Ee,Re.filename=F.source,Re.line=j,Re.column=q,Re.source=P,!F.silent)throw Re}function z(Ee){var Re=Ee.exec(P);if(Re){var je=Re[0];return V(je),P=P.slice(je.length),Re}}function se(){z(t)}function le(Ee){var Re;for(Ee=Ee||[];Re=pe();)Re!==!1&&Ee.push(Re);return Ee}function pe(){var Ee=H();if(!(h!=P.charAt(0)||m!=P.charAt(1))){for(var Re=2;y!=P.charAt(Re)&&(m!=P.charAt(Re)||h!=P.charAt(Re+1));)++Re;if(Re+=2,y===P.charAt(Re-1))return Y("End of comment missing");var je=P.slice(2,Re-2);return q+=2,V(je),P=P.slice(Re),q+=2,Ee({type:M,comment:je})}}function de(){var Ee=H(),Re=z(i);if(Re){if(pe(),!z(r))return Y("property missing ':'");var je=z(o),Ie=Ee({type:x,property:T(Re[0].replace(n,y)),value:je?T(je[0].replace(n,y)):y});return z(s),Ie}}function ve(){var Ee=[];le(Ee);for(var Re;Re=de();)Re!==!1&&(Ee.push(Re),le(Ee));return Ee}return se(),ve()};function T(P){return P?P.replace(a,y):y}return A8}var BW;function nOe(){if(BW)return qC;BW=1;var n=qC&&qC.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(qC,"__esModule",{value:!0}),qC.default=t;var e=n(tOe());function t(i,r){var o=null;if(!i||typeof i!="string")return o;var s=(0,e.default)(i),a=typeof r=="function";return s.forEach(function(c){if(c.type==="declaration"){var h=c.property,m=c.value;a?r(h,m,c):m&&(o=o||{},o[h]=m)}}),o}return qC}var S2={},IW;function iOe(){if(IW)return S2;IW=1,Object.defineProperty(S2,"__esModule",{value:!0}),S2.camelCase=void 0;var n=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,t=/^[^-]+$/,i=/^-(webkit|moz|ms|o|khtml)-/,r=/^-(ms)-/,o=function(h){return!h||t.test(h)||n.test(h)},s=function(h,m){return m.toUpperCase()},a=function(h,m){return"".concat(m,"-")},c=function(h,m){return m===void 0&&(m={}),o(h)?h:(h=h.toLowerCase(),m.reactCompat?h=h.replace(r,a):h=h.replace(i,a),h.replace(e,s))};return S2.camelCase=c,S2}var E2,kW;function rOe(){if(kW)return E2;kW=1;var n=E2&&E2.__importDefault||function(r){return r&&r.__esModule?r:{default:r}},e=n(nOe()),t=iOe();function i(r,o){var s={};return!r||typeof r!="string"||(0,e.default)(r,function(a,c){a&&c&&(s[(0,t.camelCase)(a,o)]=c)}),s}return i.default=i,E2=i,E2}var oOe=rOe();const sOe=eu(oOe),loe=uoe("end"),BK=uoe("start");function uoe(n){return e;function e(t){const i=t&&t.position&&t.position[n]||{};if(typeof i.line=="number"&&i.line>0&&typeof i.column=="number"&&i.column>0)return{line:i.line,column:i.column,offset:typeof i.offset=="number"&&i.offset>-1?i.offset:void 0}}}function aOe(n){const e=BK(n),t=loe(n);if(e&&t)return{start:e,end:t}}function E3(n){return!n||typeof n!="object"?"":"position"in n||"type"in n?TW(n.position):"start"in n||"end"in n?TW(n):"line"in n||"column"in n?_D(n):""}function _D(n){return RW(n&&n.line)+":"+RW(n&&n.column)}function TW(n){return _D(n&&n.start)+"-"+_D(n&&n.end)}function RW(n){return n&&typeof n=="number"?n:1}class HA extends Error{constructor(e,t,i){super(),typeof t=="string"&&(i=t,t=void 0);let r="",o={},s=!1;if(t&&("line"in t&&"column"in t?o={place:t}:"start"in t&&"end"in t?o={place:t}:"type"in t?o={ancestors:[t],place:t.position}:o={...t}),typeof e=="string"?r=e:!o.cause&&e&&(s=!0,r=e.message,o.cause=e),!o.ruleId&&!o.source&&typeof i=="string"){const c=i.indexOf(":");c===-1?o.ruleId=i:(o.source=i.slice(0,c),o.ruleId=i.slice(c+1))}if(!o.place&&o.ancestors&&o.ancestors){const c=o.ancestors[o.ancestors.length-1];c&&(o.place=c.position)}const a=o.place&&"start"in o.place?o.place.start:o.place;this.ancestors=o.ancestors||void 0,this.cause=o.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file="",this.message=r,this.line=a?a.line:void 0,this.name=E3(o.place)||"1:1",this.place=o.place||void 0,this.reason=this.message,this.ruleId=o.ruleId||void 0,this.source=o.source||void 0,this.stack=s&&o.cause&&typeof o.cause.stack=="string"?o.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}HA.prototype.file="";HA.prototype.name="";HA.prototype.reason="";HA.prototype.message="";HA.prototype.stack="";HA.prototype.column=void 0;HA.prototype.line=void 0;HA.prototype.ancestors=void 0;HA.prototype.cause=void 0;HA.prototype.fatal=void 0;HA.prototype.place=void 0;HA.prototype.ruleId=void 0;HA.prototype.source=void 0;const IK={}.hasOwnProperty,lOe=new Map,uOe=/[A-Z]/g,cOe=new Set(["table","tbody","thead","tfoot","tr"]),AOe=new Set(["td","th"]),coe="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function hOe(n,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const t=e.filePath||void 0;let i;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");i=bOe(t,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");i=vOe(t,e.jsx,e.jsxs)}const r={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:i,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:t,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?OK:J6e,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},o=Aoe(r,n,void 0);return o&&typeof o!="string"?o:r.create(n,r.Fragment,{children:o||void 0},void 0)}function Aoe(n,e,t){if(e.type==="element")return dOe(n,e,t);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return fOe(n,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return mOe(n,e,t);if(e.type==="mdxjsEsm")return pOe(n,e);if(e.type==="root")return gOe(n,e,t);if(e.type==="text")return yOe(n,e)}function dOe(n,e,t){const i=n.schema;let r=i;e.tagName.toLowerCase()==="svg"&&i.space==="html"&&(r=OK,n.schema=r),n.ancestors.push(e);const o=doe(n,e.tagName,!1),s=COe(n,e);let a=TK(n,e);return cOe.has(e.tagName)&&(a=a.filter(function(c){return typeof c=="string"?!G6e(c):!0})),hoe(n,s,o,e),kK(s,a),n.ancestors.pop(),n.schema=i,n.create(e,o,s,t)}function fOe(n,e){if(e.data&&e.data.estree&&n.evaluater){const i=e.data.estree.body[0];return i.type,n.evaluater.evaluateExpression(i.expression)}B4(n,e.position)}function pOe(n,e){if(e.data&&e.data.estree&&n.evaluater)return n.evaluater.evaluateProgram(e.data.estree);B4(n,e.position)}function mOe(n,e,t){const i=n.schema;let r=i;e.name==="svg"&&i.space==="html"&&(r=OK,n.schema=r),n.ancestors.push(e);const o=e.name===null?n.Fragment:doe(n,e.name,!0),s=_Oe(n,e),a=TK(n,e);return hoe(n,s,o,e),kK(s,a),n.ancestors.pop(),n.schema=i,n.create(e,o,s,t)}function gOe(n,e,t){const i={};return kK(i,TK(n,e)),n.create(e,n.Fragment,i,t)}function yOe(n,e){return e.value}function hoe(n,e,t,i){typeof t!="string"&&t!==n.Fragment&&n.passNode&&(e.node=i)}function kK(n,e){if(e.length>0){const t=e.length>1?e:e[0];t&&(n.children=t)}}function vOe(n,e,t){return i;function i(r,o,s,a){const h=Array.isArray(s.children)?t:e;return a?h(o,s,a):h(o,s)}}function bOe(n,e){return t;function t(i,r,o,s){const a=Array.isArray(o.children),c=BK(i);return e(r,o,s,a,{columnNumber:c?c.column-1:void 0,fileName:n,lineNumber:c?c.line:void 0},void 0)}}function COe(n,e){const t={};let i,r;for(r in e.properties)if(r!=="children"&&IK.call(e.properties,r)){const o=xOe(n,r,e.properties[r]);if(o){const[s,a]=o;n.tableCellAlignToStyle&&s==="align"&&typeof a=="string"&&AOe.has(e.tagName)?i=a:t[s]=a}}if(i){const o=t.style||(t.style={});o[n.stylePropertyNameCase==="css"?"text-align":"textAlign"]=i}return t}function _Oe(n,e){const t={};for(const i of e.attributes)if(i.type==="mdxJsxExpressionAttribute")if(i.data&&i.data.estree&&n.evaluater){const o=i.data.estree.body[0];o.type;const s=o.expression;s.type;const a=s.properties[0];a.type,Object.assign(t,n.evaluater.evaluateExpression(a.argument))}else B4(n,e.position);else{const r=i.name;let o;if(i.value&&typeof i.value=="object")if(i.value.data&&i.value.data.estree&&n.evaluater){const a=i.value.data.estree.body[0];a.type,o=n.evaluater.evaluateExpression(a.expression)}else B4(n,e.position);else o=i.value===null?!0:i.value;t[r]=o}return t}function TK(n,e){const t=[];let i=-1;const r=n.passKeys?new Map:lOe;for(;++i<e.children.length;){const o=e.children[i];let s;if(n.passKeys){const c=o.type==="element"?o.tagName:o.type==="mdxJsxFlowElement"||o.type==="mdxJsxTextElement"?o.name:void 0;if(c){const h=r.get(c)||0;s=c+"-"+h,r.set(c,h+1)}}const a=Aoe(n,o,s);a!==void 0&&t.push(a)}return t}function xOe(n,e,t){const i=H6e(n.schema,e);if(!(t==null||typeof t=="number"&&Number.isNaN(t))){if(Array.isArray(t)&&(t=i.commaSeparated?L6e(t):eOe(t)),i.property==="style"){let r=typeof t=="object"?t:MOe(n,String(t));return n.stylePropertyNameCase==="css"&&(r=wOe(r)),["style",r]}return[n.elementAttributeNameCase==="react"&&i.space?Y6e[i.property]||i.property:i.attribute,t]}}function MOe(n,e){try{return sOe(e,{reactCompat:!0})}catch(t){if(n.ignoreInvalidStyle)return{};const i=t,r=new HA("Cannot parse `style` attribute",{ancestors:n.ancestors,cause:i,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw r.file=n.filePath||void 0,r.url=coe+"#cannot-parse-style-attribute",r}}function doe(n,e,t){let i;if(!t)i={type:"Literal",value:e};else if(e.includes(".")){const r=e.split(".");let o=-1,s;for(;++o<r.length;){const a=MW(r[o])?{type:"Identifier",name:r[o]}:{type:"Literal",value:r[o]};s=s?{type:"MemberExpression",object:s,property:a,computed:!!(o&&a.type==="Literal"),optional:!1}:a}i=s}else i=MW(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(i.type==="Literal"){const r=i.value;return IK.call(n.components,r)?n.components[r]:r}if(n.evaluater)return n.evaluater.evaluateExpression(i);B4(n)}function B4(n,e){const t=new HA("Cannot handle MDX estrees without `createEvaluater`",{ancestors:n.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw t.file=n.filePath||void 0,t.url=coe+"#cannot-handle-mdx-estrees-without-createevaluater",t}function wOe(n){const e={};let t;for(t in n)IK.call(n,t)&&(e[SOe(t)]=n[t]);return e}function SOe(n){let e=n.replace(uOe,EOe);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function EOe(n){return"-"+n.toLowerCase()}const h8={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},OOe={};function BOe(n,e){const t=OOe,i=typeof t.includeImageAlt=="boolean"?t.includeImageAlt:!0,r=typeof t.includeHtml=="boolean"?t.includeHtml:!0;return foe(n,i,r)}function foe(n,e,t){if(IOe(n)){if("value"in n)return n.type==="html"&&!t?"":n.value;if(e&&"alt"in n&&n.alt)return n.alt;if("children"in n)return DW(n.children,e,t)}return Array.isArray(n)?DW(n,e,t):""}function DW(n,e,t){const i=[];let r=-1;for(;++r<n.length;)i[r]=foe(n[r],e,t);return i.join("")}function IOe(n){return!!(n&&typeof n=="object")}const PW=document.createElement("i");function RK(n){const e="&"+n+";";PW.innerHTML=e;const t=PW.textContent;return t.charCodeAt(t.length-1)===59&&n!=="semi"||t===e?!1:t}function o0(n,e,t,i){const r=n.length;let o=0,s;if(e<0?e=-e>r?0:r+e:e=e>r?r:e,t=t>0?t:0,i.length<1e4)s=Array.from(i),s.unshift(e,t),n.splice(...s);else for(t&&n.splice(e,t);o<i.length;)s=i.slice(o,o+1e4),s.unshift(e,0),n.splice(...s),o+=1e4,e+=1e4}function Ap(n,e){return n.length>0?(o0(n,n.length,0,e),n):e}const UW={}.hasOwnProperty;function kOe(n){const e={};let t=-1;for(;++t<n.length;)TOe(e,n[t]);return e}function TOe(n,e){let t;for(t in e){const r=(UW.call(n,t)?n[t]:void 0)||(n[t]={}),o=e[t];let s;if(o)for(s in o){UW.call(r,s)||(r[s]=[]);const a=o[s];ROe(r[s],Array.isArray(a)?a:a?[a]:[])}}}function ROe(n,e){let t=-1;const i=[];for(;++t<e.length;)(e[t].add==="after"?n:i).push(e[t]);o0(n,0,0,i)}function poe(n,e){const t=Number.parseInt(n,e);return t<9||t===11||t>13&&t<32||t>126&&t<160||t>55295&&t<57344||t>64975&&t<65008||(t&65535)===65535||(t&65535)===65534||t>1114111?"":String.fromCodePoint(t)}function ex(n){return n.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Ug=hv(/[A-Za-z]/),Mf=hv(/[\dA-Za-z]/),DOe=hv(/[#-'*+\--9=?A-Z^-~]/);function xD(n){return n!==null&&(n<32||n===127)}const MD=hv(/\d/),POe=hv(/[\dA-Fa-f]/),UOe=hv(/[!-/:-@[-`{-~]/);function Ur(n){return n!==null&&n<-2}function Sd(n){return n!==null&&(n<0||n===32)}function Fs(n){return n===-2||n===-1||n===32}const KOe=hv(new RegExp("\\p{P}|\\p{S}","u")),LOe=hv(/\s/);function hv(n){return e;function e(t){return t!==null&&t>-1&&n.test(String.fromCharCode(t))}}function Vx(n){const e=[];let t=-1,i=0,r=0;for(;++t<n.length;){const o=n.charCodeAt(t);let s="";if(o===37&&Mf(n.charCodeAt(t+1))&&Mf(n.charCodeAt(t+2)))r=2;else if(o<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(o))||(s=String.fromCharCode(o));else if(o>55295&&o<57344){const a=n.charCodeAt(t+1);o<56320&&a>56319&&a<57344?(s=String.fromCharCode(o,a),r=1):s=""}else s=String.fromCharCode(o);s&&(e.push(n.slice(i,t),encodeURIComponent(s)),i=t+r+1,s=""),r&&(t+=r,r=0)}return e.join("")+n.slice(i)}function Wa(n,e,t,i){const r=i?i-1:Number.POSITIVE_INFINITY;let o=0;return s;function s(c){return Fs(c)?(n.enter(t),a(c)):e(c)}function a(c){return Fs(c)&&o++<r?(n.consume(c),a):(n.exit(t),e(c))}}const FOe={tokenize:zOe};function zOe(n){const e=n.attempt(this.parser.constructs.contentInitial,i,r);let t;return e;function i(a){if(a===null){n.consume(a);return}return n.enter("lineEnding"),n.consume(a),n.exit("lineEnding"),Wa(n,e,"linePrefix")}function r(a){return n.enter("paragraph"),o(a)}function o(a){const c=n.enter("chunkText",{contentType:"text",previous:t});return t&&(t.next=c),t=c,s(a)}function s(a){if(a===null){n.exit("chunkText"),n.exit("paragraph"),n.consume(a);return}return Ur(a)?(n.consume(a),n.exit("chunkText"),o):(n.consume(a),s)}}const jOe={tokenize:NOe},KW={tokenize:GOe};function NOe(n){const e=this,t=[];let i=0,r,o,s;return a;function a(V){if(i<t.length){const H=t[i];return e.containerState=H[1],n.attempt(H[0].continuation,c,h)(V)}return h(V)}function c(V){if(i++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,r&&q();const H=e.events.length;let Q=H,Y;for(;Q--;)if(e.events[Q][0]==="exit"&&e.events[Q][1].type==="chunkFlow"){Y=e.events[Q][1].end;break}j(i);let z=H;for(;z<e.events.length;)e.events[z][1].end={...Y},z++;return o0(e.events,Q+1,0,e.events.slice(H)),e.events.length=z,h(V)}return a(V)}function h(V){if(i===t.length){if(!r)return M(V);if(r.currentConstruct&&r.currentConstruct.concrete)return T(V);e.interrupt=!!(r.currentConstruct&&!r._gfmTableDynamicInterruptHack)}return e.containerState={},n.check(KW,m,y)(V)}function m(V){return r&&q(),j(i),M(V)}function y(V){return e.parser.lazy[e.now().line]=i!==t.length,s=e.now().offset,T(V)}function M(V){return e.containerState={},n.attempt(KW,x,T)(V)}function x(V){return i++,t.push([e.currentConstruct,e.containerState]),M(V)}function T(V){if(V===null){r&&q(),j(0),n.consume(V);return}return r=r||e.parser.flow(e.now()),n.enter("chunkFlow",{_tokenizer:r,contentType:"flow",previous:o}),P(V)}function P(V){if(V===null){F(n.exit("chunkFlow"),!0),j(0),n.consume(V);return}return Ur(V)?(n.consume(V),F(n.exit("chunkFlow")),i=0,e.interrupt=void 0,a):(n.consume(V),P)}function F(V,H){const Q=e.sliceStream(V);if(H&&Q.push(null),V.previous=o,o&&(o.next=V),o=V,r.defineSkip(V.start),r.write(Q),e.parser.lazy[V.start.line]){let Y=r.events.length;for(;Y--;)if(r.events[Y][1].start.offset<s&&(!r.events[Y][1].end||r.events[Y][1].end.offset>s))return;const z=e.events.length;let se=z,le,pe;for(;se--;)if(e.events[se][0]==="exit"&&e.events[se][1].type==="chunkFlow"){if(le){pe=e.events[se][1].end;break}le=!0}for(j(i),Y=z;Y<e.events.length;)e.events[Y][1].end={...pe},Y++;o0(e.events,se+1,0,e.events.slice(z)),e.events.length=Y}}function j(V){let H=t.length;for(;H-- >V;){const Q=t[H];e.containerState=Q[1],Q[0].exit.call(e,n)}t.length=V}function q(){r.write([null]),o=void 0,r=void 0,e.containerState._closeFlow=void 0}}function GOe(n,e,t){return Wa(n,n.attempt(this.parser.constructs.document,e,t),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function LW(n){if(n===null||Sd(n)||LOe(n))return 1;if(KOe(n))return 2}function DK(n,e,t){const i=[];let r=-1;for(;++r<n.length;){const o=n[r].resolveAll;o&&!i.includes(o)&&(e=o(e,t),i.push(o))}return e}const wD={name:"attention",resolveAll:WOe,tokenize:QOe};function WOe(n,e){let t=-1,i,r,o,s,a,c,h,m;for(;++t<n.length;)if(n[t][0]==="enter"&&n[t][1].type==="attentionSequence"&&n[t][1]._close){for(i=t;i--;)if(n[i][0]==="exit"&&n[i][1].type==="attentionSequence"&&n[i][1]._open&&e.sliceSerialize(n[i][1]).charCodeAt(0)===e.sliceSerialize(n[t][1]).charCodeAt(0)){if((n[i][1]._close||n[t][1]._open)&&(n[t][1].end.offset-n[t][1].start.offset)%3&&!((n[i][1].end.offset-n[i][1].start.offset+n[t][1].end.offset-n[t][1].start.offset)%3))continue;c=n[i][1].end.offset-n[i][1].start.offset>1&&n[t][1].end.offset-n[t][1].start.offset>1?2:1;const y={...n[i][1].end},M={...n[t][1].start};FW(y,-c),FW(M,c),s={type:c>1?"strongSequence":"emphasisSequence",start:y,end:{...n[i][1].end}},a={type:c>1?"strongSequence":"emphasisSequence",start:{...n[t][1].start},end:M},o={type:c>1?"strongText":"emphasisText",start:{...n[i][1].end},end:{...n[t][1].start}},r={type:c>1?"strong":"emphasis",start:{...s.start},end:{...a.end}},n[i][1].end={...s.start},n[t][1].start={...a.end},h=[],n[i][1].end.offset-n[i][1].start.offset&&(h=Ap(h,[["enter",n[i][1],e],["exit",n[i][1],e]])),h=Ap(h,[["enter",r,e],["enter",s,e],["exit",s,e],["enter",o,e]]),h=Ap(h,DK(e.parser.constructs.insideSpan.null,n.slice(i+1,t),e)),h=Ap(h,[["exit",o,e],["enter",a,e],["exit",a,e],["exit",r,e]]),n[t][1].end.offset-n[t][1].start.offset?(m=2,h=Ap(h,[["enter",n[t][1],e],["exit",n[t][1],e]])):m=0,o0(n,i-1,t-i+3,h),t=i+h.length-m-2;break}}for(t=-1;++t<n.length;)n[t][1].type==="attentionSequence"&&(n[t][1].type="data");return n}function QOe(n,e){const t=this.parser.constructs.attentionMarkers.null,i=this.previous,r=LW(i);let o;return s;function s(c){return o=c,n.enter("attentionSequence"),a(c)}function a(c){if(c===o)return n.consume(c),a;const h=n.exit("attentionSequence"),m=LW(c),y=!m||m===2&&r||t.includes(c),M=!r||r===2&&m||t.includes(i);return h._open=!!(o===42?y:y&&(r||!M)),h._close=!!(o===42?M:M&&(m||!y)),e(c)}}function FW(n,e){n.column+=e,n.offset+=e,n._bufferIndex+=e}const qOe={name:"autolink",tokenize:YOe};function YOe(n,e,t){let i=0;return r;function r(x){return n.enter("autolink"),n.enter("autolinkMarker"),n.consume(x),n.exit("autolinkMarker"),n.enter("autolinkProtocol"),o}function o(x){return Ug(x)?(n.consume(x),s):x===64?t(x):h(x)}function s(x){return x===43||x===45||x===46||Mf(x)?(i=1,a(x)):h(x)}function a(x){return x===58?(n.consume(x),i=0,c):(x===43||x===45||x===46||Mf(x))&&i++<32?(n.consume(x),a):(i=0,h(x))}function c(x){return x===62?(n.exit("autolinkProtocol"),n.enter("autolinkMarker"),n.consume(x),n.exit("autolinkMarker"),n.exit("autolink"),e):x===null||x===32||x===60||xD(x)?t(x):(n.consume(x),c)}function h(x){return x===64?(n.consume(x),m):DOe(x)?(n.consume(x),h):t(x)}function m(x){return Mf(x)?y(x):t(x)}function y(x){return x===46?(n.consume(x),i=0,m):x===62?(n.exit("autolinkProtocol").type="autolinkEmail",n.enter("autolinkMarker"),n.consume(x),n.exit("autolinkMarker"),n.exit("autolink"),e):M(x)}function M(x){if((x===45||Mf(x))&&i++<63){const T=x===45?M:y;return n.consume(x),T}return t(x)}}const w6={partial:!0,tokenize:$Oe};function $Oe(n,e,t){return i;function i(o){return Fs(o)?Wa(n,r,"linePrefix")(o):r(o)}function r(o){return o===null||Ur(o)?e(o):t(o)}}const moe={continuation:{tokenize:HOe},exit:ZOe,name:"blockQuote",tokenize:VOe};function VOe(n,e,t){const i=this;return r;function r(s){if(s===62){const a=i.containerState;return a.open||(n.enter("blockQuote",{_container:!0}),a.open=!0),n.enter("blockQuotePrefix"),n.enter("blockQuoteMarker"),n.consume(s),n.exit("blockQuoteMarker"),o}return t(s)}function o(s){return Fs(s)?(n.enter("blockQuotePrefixWhitespace"),n.consume(s),n.exit("blockQuotePrefixWhitespace"),n.exit("blockQuotePrefix"),e):(n.exit("blockQuotePrefix"),e(s))}}function HOe(n,e,t){const i=this;return r;function r(s){return Fs(s)?Wa(n,o,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(s):o(s)}function o(s){return n.attempt(moe,e,t)(s)}}function ZOe(n){n.exit("blockQuote")}const goe={name:"characterEscape",tokenize:XOe};function XOe(n,e,t){return i;function i(o){return n.enter("characterEscape"),n.enter("escapeMarker"),n.consume(o),n.exit("escapeMarker"),r}function r(o){return UOe(o)?(n.enter("characterEscapeValue"),n.consume(o),n.exit("characterEscapeValue"),n.exit("characterEscape"),e):t(o)}}const yoe={name:"characterReference",tokenize:JOe};function JOe(n,e,t){const i=this;let r=0,o,s;return a;function a(y){return n.enter("characterReference"),n.enter("characterReferenceMarker"),n.consume(y),n.exit("characterReferenceMarker"),c}function c(y){return y===35?(n.enter("characterReferenceMarkerNumeric"),n.consume(y),n.exit("characterReferenceMarkerNumeric"),h):(n.enter("characterReferenceValue"),o=31,s=Mf,m(y))}function h(y){return y===88||y===120?(n.enter("characterReferenceMarkerHexadecimal"),n.consume(y),n.exit("characterReferenceMarkerHexadecimal"),n.enter("characterReferenceValue"),o=6,s=POe,m):(n.enter("characterReferenceValue"),o=7,s=MD,m(y))}function m(y){if(y===59&&r){const M=n.exit("characterReferenceValue");return s===Mf&&!RK(i.sliceSerialize(M))?t(y):(n.enter("characterReferenceMarker"),n.consume(y),n.exit("characterReferenceMarker"),n.exit("characterReference"),e)}return s(y)&&r++<o?(n.consume(y),m):t(y)}}const zW={partial:!0,tokenize:tBe},jW={concrete:!0,name:"codeFenced",tokenize:eBe};function eBe(n,e,t){const i=this,r={partial:!0,tokenize:Q};let o=0,s=0,a;return c;function c(Y){return h(Y)}function h(Y){const z=i.events[i.events.length-1];return o=z&&z[1].type==="linePrefix"?z[2].sliceSerialize(z[1],!0).length:0,a=Y,n.enter("codeFenced"),n.enter("codeFencedFence"),n.enter("codeFencedFenceSequence"),m(Y)}function m(Y){return Y===a?(s++,n.consume(Y),m):s<3?t(Y):(n.exit("codeFencedFenceSequence"),Fs(Y)?Wa(n,y,"whitespace")(Y):y(Y))}function y(Y){return Y===null||Ur(Y)?(n.exit("codeFencedFence"),i.interrupt?e(Y):n.check(zW,P,H)(Y)):(n.enter("codeFencedFenceInfo"),n.enter("chunkString",{contentType:"string"}),M(Y))}function M(Y){return Y===null||Ur(Y)?(n.exit("chunkString"),n.exit("codeFencedFenceInfo"),y(Y)):Fs(Y)?(n.exit("chunkString"),n.exit("codeFencedFenceInfo"),Wa(n,x,"whitespace")(Y)):Y===96&&Y===a?t(Y):(n.consume(Y),M)}function x(Y){return Y===null||Ur(Y)?y(Y):(n.enter("codeFencedFenceMeta"),n.enter("chunkString",{contentType:"string"}),T(Y))}function T(Y){return Y===null||Ur(Y)?(n.exit("chunkString"),n.exit("codeFencedFenceMeta"),y(Y)):Y===96&&Y===a?t(Y):(n.consume(Y),T)}function P(Y){return n.attempt(r,H,F)(Y)}function F(Y){return n.enter("lineEnding"),n.consume(Y),n.exit("lineEnding"),j}function j(Y){return o>0&&Fs(Y)?Wa(n,q,"linePrefix",o+1)(Y):q(Y)}function q(Y){return Y===null||Ur(Y)?n.check(zW,P,H)(Y):(n.enter("codeFlowValue"),V(Y))}function V(Y){return Y===null||Ur(Y)?(n.exit("codeFlowValue"),q(Y)):(n.consume(Y),V)}function H(Y){return n.exit("codeFenced"),e(Y)}function Q(Y,z,se){let le=0;return pe;function pe(je){return Y.enter("lineEnding"),Y.consume(je),Y.exit("lineEnding"),de}function de(je){return Y.enter("codeFencedFence"),Fs(je)?Wa(Y,ve,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(je):ve(je)}function ve(je){return je===a?(Y.enter("codeFencedFenceSequence"),Ee(je)):se(je)}function Ee(je){return je===a?(le++,Y.consume(je),Ee):le>=s?(Y.exit("codeFencedFenceSequence"),Fs(je)?Wa(Y,Re,"whitespace")(je):Re(je)):se(je)}function Re(je){return je===null||Ur(je)?(Y.exit("codeFencedFence"),z(je)):se(je)}}}function tBe(n,e,t){const i=this;return r;function r(s){return s===null?t(s):(n.enter("lineEnding"),n.consume(s),n.exit("lineEnding"),o)}function o(s){return i.parser.lazy[i.now().line]?t(s):e(s)}}const d8={name:"codeIndented",tokenize:iBe},nBe={partial:!0,tokenize:rBe};function iBe(n,e,t){const i=this;return r;function r(h){return n.enter("codeIndented"),Wa(n,o,"linePrefix",5)(h)}function o(h){const m=i.events[i.events.length-1];return m&&m[1].type==="linePrefix"&&m[2].sliceSerialize(m[1],!0).length>=4?s(h):t(h)}function s(h){return h===null?c(h):Ur(h)?n.attempt(nBe,s,c)(h):(n.enter("codeFlowValue"),a(h))}function a(h){return h===null||Ur(h)?(n.exit("codeFlowValue"),s(h)):(n.consume(h),a)}function c(h){return n.exit("codeIndented"),e(h)}}function rBe(n,e,t){const i=this;return r;function r(s){return i.parser.lazy[i.now().line]?t(s):Ur(s)?(n.enter("lineEnding"),n.consume(s),n.exit("lineEnding"),r):Wa(n,o,"linePrefix",5)(s)}function o(s){const a=i.events[i.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(s):Ur(s)?r(s):t(s)}}const oBe={name:"codeText",previous:aBe,resolve:sBe,tokenize:lBe};function sBe(n){let e=n.length-4,t=3,i,r;if((n[t][1].type==="lineEnding"||n[t][1].type==="space")&&(n[e][1].type==="lineEnding"||n[e][1].type==="space")){for(i=t;++i<e;)if(n[i][1].type==="codeTextData"){n[t][1].type="codeTextPadding",n[e][1].type="codeTextPadding",t+=2,e-=2;break}}for(i=t-1,e++;++i<=e;)r===void 0?i!==e&&n[i][1].type!=="lineEnding"&&(r=i):(i===e||n[i][1].type==="lineEnding")&&(n[r][1].type="codeTextData",i!==r+2&&(n[r][1].end=n[i-1][1].end,n.splice(r+2,i-r-2),e-=i-r-2,i=r+2),r=void 0);return n}function aBe(n){return n!==96||this.events[this.events.length-1][1].type==="characterEscape"}function lBe(n,e,t){let i=0,r,o;return s;function s(y){return n.enter("codeText"),n.enter("codeTextSequence"),a(y)}function a(y){return y===96?(n.consume(y),i++,a):(n.exit("codeTextSequence"),c(y))}function c(y){return y===null?t(y):y===32?(n.enter("space"),n.consume(y),n.exit("space"),c):y===96?(o=n.enter("codeTextSequence"),r=0,m(y)):Ur(y)?(n.enter("lineEnding"),n.consume(y),n.exit("lineEnding"),c):(n.enter("codeTextData"),h(y))}function h(y){return y===null||y===32||y===96||Ur(y)?(n.exit("codeTextData"),c(y)):(n.consume(y),h)}function m(y){return y===96?(n.consume(y),r++,m):r===i?(n.exit("codeTextSequence"),n.exit("codeText"),e(y)):(o.type="codeTextData",h(y))}}class uBe{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,t){const i=t??Number.POSITIVE_INFINITY;return i<this.left.length?this.left.slice(e,i):e>this.left.length?this.right.slice(this.right.length-i+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-i+this.left.length).reverse())}splice(e,t,i){const r=t||0;this.setCursor(Math.trunc(e));const o=this.right.splice(this.right.length-r,Number.POSITIVE_INFINITY);return i&&O2(this.left,i),o.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),O2(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),O2(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const t=this.left.splice(e,Number.POSITIVE_INFINITY);O2(this.right,t.reverse())}else{const t=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);O2(this.left,t.reverse())}}}function O2(n,e){let t=0;if(e.length<1e4)n.push(...e);else for(;t<e.length;)n.push(...e.slice(t,t+1e4)),t+=1e4}function voe(n){const e={};let t=-1,i,r,o,s,a,c,h;const m=new uBe(n);for(;++t<m.length;){for(;t in e;)t=e[t];if(i=m.get(t),t&&i[1].type==="chunkFlow"&&m.get(t-1)[1].type==="listItemPrefix"&&(c=i[1]._tokenizer.events,o=0,o<c.length&&c[o][1].type==="lineEndingBlank"&&(o+=2),o<c.length&&c[o][1].type==="content"))for(;++o<c.length&&c[o][1].type!=="content";)c[o][1].type==="chunkText"&&(c[o][1]._isInFirstContentOfListItem=!0,o++);if(i[0]==="enter")i[1].contentType&&(Object.assign(e,cBe(m,t)),t=e[t],h=!0);else if(i[1]._container){for(o=t,r=void 0;o--;)if(s=m.get(o),s[1].type==="lineEnding"||s[1].type==="lineEndingBlank")s[0]==="enter"&&(r&&(m.get(r)[1].type="lineEndingBlank"),s[1].type="lineEnding",r=o);else if(!(s[1].type==="linePrefix"||s[1].type==="listItemIndent"))break;r&&(i[1].end={...m.get(r)[1].start},a=m.slice(r,t),a.unshift(i),m.splice(r,t-r+1,a))}}return o0(n,0,Number.POSITIVE_INFINITY,m.slice(0)),!h}function cBe(n,e){const t=n.get(e)[1],i=n.get(e)[2];let r=e-1;const o=[];let s=t._tokenizer;s||(s=i.parser[t.contentType](t.start),t._contentTypeTextTrailing&&(s._contentTypeTextTrailing=!0));const a=s.events,c=[],h={};let m,y,M=-1,x=t,T=0,P=0;const F=[P];for(;x;){for(;n.get(++r)[1]!==x;);o.push(r),x._tokenizer||(m=i.sliceStream(x),x.next||m.push(null),y&&s.defineSkip(x.start),x._isInFirstContentOfListItem&&(s._gfmTasklistFirstContentOfListItem=!0),s.write(m),x._isInFirstContentOfListItem&&(s._gfmTasklistFirstContentOfListItem=void 0)),y=x,x=x.next}for(x=t;++M<a.length;)a[M][0]==="exit"&&a[M-1][0]==="enter"&&a[M][1].type===a[M-1][1].type&&a[M][1].start.line!==a[M][1].end.line&&(P=M+1,F.push(P),x._tokenizer=void 0,x.previous=void 0,x=x.next);for(s.events=[],x?(x._tokenizer=void 0,x.previous=void 0):F.pop(),M=F.length;M--;){const j=a.slice(F[M],F[M+1]),q=o.pop();c.push([q,q+j.length-1]),n.splice(q,2,j)}for(c.reverse(),M=-1;++M<c.length;)h[T+c[M][0]]=T+c[M][1],T+=c[M][1]-c[M][0]-1;return h}const ABe={resolve:dBe,tokenize:fBe},hBe={partial:!0,tokenize:pBe};function dBe(n){return voe(n),n}function fBe(n,e){let t;return i;function i(a){return n.enter("content"),t=n.enter("chunkContent",{contentType:"content"}),r(a)}function r(a){return a===null?o(a):Ur(a)?n.check(hBe,s,o)(a):(n.consume(a),r)}function o(a){return n.exit("chunkContent"),n.exit("content"),e(a)}function s(a){return n.consume(a),n.exit("chunkContent"),t.next=n.enter("chunkContent",{contentType:"content",previous:t}),t=t.next,r}}function pBe(n,e,t){const i=this;return r;function r(s){return n.exit("chunkContent"),n.enter("lineEnding"),n.consume(s),n.exit("lineEnding"),Wa(n,o,"linePrefix")}function o(s){if(s===null||Ur(s))return t(s);const a=i.events[i.events.length-1];return!i.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(s):n.interrupt(i.parser.constructs.flow,t,e)(s)}}function boe(n,e,t,i,r,o,s,a,c){const h=c||Number.POSITIVE_INFINITY;let m=0;return y;function y(j){return j===60?(n.enter(i),n.enter(r),n.enter(o),n.consume(j),n.exit(o),M):j===null||j===32||j===41||xD(j)?t(j):(n.enter(i),n.enter(s),n.enter(a),n.enter("chunkString",{contentType:"string"}),P(j))}function M(j){return j===62?(n.enter(o),n.consume(j),n.exit(o),n.exit(r),n.exit(i),e):(n.enter(a),n.enter("chunkString",{contentType:"string"}),x(j))}function x(j){return j===62?(n.exit("chunkString"),n.exit(a),M(j)):j===null||j===60||Ur(j)?t(j):(n.consume(j),j===92?T:x)}function T(j){return j===60||j===62||j===92?(n.consume(j),x):x(j)}function P(j){return!m&&(j===null||j===41||Sd(j))?(n.exit("chunkString"),n.exit(a),n.exit(s),n.exit(i),e(j)):m<h&&j===40?(n.consume(j),m++,P):j===41?(n.consume(j),m--,P):j===null||j===32||j===40||xD(j)?t(j):(n.consume(j),j===92?F:P)}function F(j){return j===40||j===41||j===92?(n.consume(j),P):P(j)}}function Coe(n,e,t,i,r,o){const s=this;let a=0,c;return h;function h(x){return n.enter(i),n.enter(r),n.consume(x),n.exit(r),n.enter(o),m}function m(x){return a>999||x===null||x===91||x===93&&!c||x===94&&!a&&"_hiddenFootnoteSupport"in s.parser.constructs?t(x):x===93?(n.exit(o),n.enter(r),n.consume(x),n.exit(r),n.exit(i),e):Ur(x)?(n.enter("lineEnding"),n.consume(x),n.exit("lineEnding"),m):(n.enter("chunkString",{contentType:"string"}),y(x))}function y(x){return x===null||x===91||x===93||Ur(x)||a++>999?(n.exit("chunkString"),m(x)):(n.consume(x),c||(c=!Fs(x)),x===92?M:y)}function M(x){return x===91||x===92||x===93?(n.consume(x),a++,y):y(x)}}function _oe(n,e,t,i,r,o){let s;return a;function a(M){return M===34||M===39||M===40?(n.enter(i),n.enter(r),n.consume(M),n.exit(r),s=M===40?41:M,c):t(M)}function c(M){return M===s?(n.enter(r),n.consume(M),n.exit(r),n.exit(i),e):(n.enter(o),h(M))}function h(M){return M===s?(n.exit(o),c(s)):M===null?t(M):Ur(M)?(n.enter("lineEnding"),n.consume(M),n.exit("lineEnding"),Wa(n,h,"linePrefix")):(n.enter("chunkString",{contentType:"string"}),m(M))}function m(M){return M===s||M===null||Ur(M)?(n.exit("chunkString"),h(M)):(n.consume(M),M===92?y:m)}function y(M){return M===s||M===92?(n.consume(M),m):m(M)}}function O3(n,e){let t;return i;function i(r){return Ur(r)?(n.enter("lineEnding"),n.consume(r),n.exit("lineEnding"),t=!0,i):Fs(r)?Wa(n,i,t?"linePrefix":"lineSuffix")(r):e(r)}}const mBe={name:"definition",tokenize:yBe},gBe={partial:!0,tokenize:vBe};function yBe(n,e,t){const i=this;let r;return o;function o(x){return n.enter("definition"),s(x)}function s(x){return Coe.call(i,n,a,t,"definitionLabel","definitionLabelMarker","definitionLabelString")(x)}function a(x){return r=ex(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)),x===58?(n.enter("definitionMarker"),n.consume(x),n.exit("definitionMarker"),c):t(x)}function c(x){return Sd(x)?O3(n,h)(x):h(x)}function h(x){return boe(n,m,t,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(x)}function m(x){return n.attempt(gBe,y,y)(x)}function y(x){return Fs(x)?Wa(n,M,"whitespace")(x):M(x)}function M(x){return x===null||Ur(x)?(n.exit("definition"),i.parser.defined.push(r),e(x)):t(x)}}function vBe(n,e,t){return i;function i(a){return Sd(a)?O3(n,r)(a):t(a)}function r(a){return _oe(n,o,t,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function o(a){return Fs(a)?Wa(n,s,"whitespace")(a):s(a)}function s(a){return a===null||Ur(a)?e(a):t(a)}}const bBe={name:"hardBreakEscape",tokenize:CBe};function CBe(n,e,t){return i;function i(o){return n.enter("hardBreakEscape"),n.consume(o),r}function r(o){return Ur(o)?(n.exit("hardBreakEscape"),e(o)):t(o)}}const _Be={name:"headingAtx",resolve:xBe,tokenize:MBe};function xBe(n,e){let t=n.length-2,i=3,r,o;return n[i][1].type==="whitespace"&&(i+=2),t-2>i&&n[t][1].type==="whitespace"&&(t-=2),n[t][1].type==="atxHeadingSequence"&&(i===t-1||t-4>i&&n[t-2][1].type==="whitespace")&&(t-=i+1===t?2:4),t>i&&(r={type:"atxHeadingText",start:n[i][1].start,end:n[t][1].end},o={type:"chunkText",start:n[i][1].start,end:n[t][1].end,contentType:"text"},o0(n,i,t-i+1,[["enter",r,e],["enter",o,e],["exit",o,e],["exit",r,e]])),n}function MBe(n,e,t){let i=0;return r;function r(m){return n.enter("atxHeading"),o(m)}function o(m){return n.enter("atxHeadingSequence"),s(m)}function s(m){return m===35&&i++<6?(n.consume(m),s):m===null||Sd(m)?(n.exit("atxHeadingSequence"),a(m)):t(m)}function a(m){return m===35?(n.enter("atxHeadingSequence"),c(m)):m===null||Ur(m)?(n.exit("atxHeading"),e(m)):Fs(m)?Wa(n,a,"whitespace")(m):(n.enter("atxHeadingText"),h(m))}function c(m){return m===35?(n.consume(m),c):(n.exit("atxHeadingSequence"),a(m))}function h(m){return m===null||m===35||Sd(m)?(n.exit("atxHeadingText"),a(m)):(n.consume(m),h)}}const wBe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],NW=["pre","script","style","textarea"],SBe={concrete:!0,name:"htmlFlow",resolveTo:BBe,tokenize:IBe},EBe={partial:!0,tokenize:TBe},OBe={partial:!0,tokenize:kBe};function BBe(n){let e=n.length;for(;e--&&!(n[e][0]==="enter"&&n[e][1].type==="htmlFlow"););return e>1&&n[e-2][1].type==="linePrefix"&&(n[e][1].start=n[e-2][1].start,n[e+1][1].start=n[e-2][1].start,n.splice(e-2,2)),n}function IBe(n,e,t){const i=this;let r,o,s,a,c;return h;function h(Me){return m(Me)}function m(Me){return n.enter("htmlFlow"),n.enter("htmlFlowData"),n.consume(Me),y}function y(Me){return Me===33?(n.consume(Me),M):Me===47?(n.consume(Me),o=!0,P):Me===63?(n.consume(Me),r=3,i.interrupt?e:ke):Ug(Me)?(n.consume(Me),s=String.fromCharCode(Me),F):t(Me)}function M(Me){return Me===45?(n.consume(Me),r=2,x):Me===91?(n.consume(Me),r=5,a=0,T):Ug(Me)?(n.consume(Me),r=4,i.interrupt?e:ke):t(Me)}function x(Me){return Me===45?(n.consume(Me),i.interrupt?e:ke):t(Me)}function T(Me){const lt="CDATA[";return Me===lt.charCodeAt(a++)?(n.consume(Me),a===lt.length?i.interrupt?e:ve:T):t(Me)}function P(Me){return Ug(Me)?(n.consume(Me),s=String.fromCharCode(Me),F):t(Me)}function F(Me){if(Me===null||Me===47||Me===62||Sd(Me)){const lt=Me===47,nt=s.toLowerCase();return!lt&&!o&&NW.includes(nt)?(r=1,i.interrupt?e(Me):ve(Me)):wBe.includes(s.toLowerCase())?(r=6,lt?(n.consume(Me),j):i.interrupt?e(Me):ve(Me)):(r=7,i.interrupt&&!i.parser.lazy[i.now().line]?t(Me):o?q(Me):V(Me))}return Me===45||Mf(Me)?(n.consume(Me),s+=String.fromCharCode(Me),F):t(Me)}function j(Me){return Me===62?(n.consume(Me),i.interrupt?e:ve):t(Me)}function q(Me){return Fs(Me)?(n.consume(Me),q):pe(Me)}function V(Me){return Me===47?(n.consume(Me),pe):Me===58||Me===95||Ug(Me)?(n.consume(Me),H):Fs(Me)?(n.consume(Me),V):pe(Me)}function H(Me){return Me===45||Me===46||Me===58||Me===95||Mf(Me)?(n.consume(Me),H):Q(Me)}function Q(Me){return Me===61?(n.consume(Me),Y):Fs(Me)?(n.consume(Me),Q):V(Me)}function Y(Me){return Me===null||Me===60||Me===61||Me===62||Me===96?t(Me):Me===34||Me===39?(n.consume(Me),c=Me,z):Fs(Me)?(n.consume(Me),Y):se(Me)}function z(Me){return Me===c?(n.consume(Me),c=null,le):Me===null||Ur(Me)?t(Me):(n.consume(Me),z)}function se(Me){return Me===null||Me===34||Me===39||Me===47||Me===60||Me===61||Me===62||Me===96||Sd(Me)?Q(Me):(n.consume(Me),se)}function le(Me){return Me===47||Me===62||Fs(Me)?V(Me):t(Me)}function pe(Me){return Me===62?(n.consume(Me),de):t(Me)}function de(Me){return Me===null||Ur(Me)?ve(Me):Fs(Me)?(n.consume(Me),de):t(Me)}function ve(Me){return Me===45&&r===2?(n.consume(Me),Ie):Me===60&&r===1?(n.consume(Me),qe):Me===62&&r===4?(n.consume(Me),we):Me===63&&r===3?(n.consume(Me),ke):Me===93&&r===5?(n.consume(Me),At):Ur(Me)&&(r===6||r===7)?(n.exit("htmlFlowData"),n.check(EBe,ze,Ee)(Me)):Me===null||Ur(Me)?(n.exit("htmlFlowData"),Ee(Me)):(n.consume(Me),ve)}function Ee(Me){return n.check(OBe,Re,ze)(Me)}function Re(Me){return n.enter("lineEnding"),n.consume(Me),n.exit("lineEnding"),je}function je(Me){return Me===null||Ur(Me)?Ee(Me):(n.enter("htmlFlowData"),ve(Me))}function Ie(Me){return Me===45?(n.consume(Me),ke):ve(Me)}function qe(Me){return Me===47?(n.consume(Me),s="",tt):ve(Me)}function tt(Me){if(Me===62){const lt=s.toLowerCase();return NW.includes(lt)?(n.consume(Me),we):ve(Me)}return Ug(Me)&&s.length<8?(n.consume(Me),s+=String.fromCharCode(Me),tt):ve(Me)}function At(Me){return Me===93?(n.consume(Me),ke):ve(Me)}function ke(Me){return Me===62?(n.consume(Me),we):Me===45&&r===2?(n.consume(Me),ke):ve(Me)}function we(Me){return Me===null||Ur(Me)?(n.exit("htmlFlowData"),ze(Me)):(n.consume(Me),we)}function ze(Me){return n.exit("htmlFlow"),e(Me)}}function kBe(n,e,t){const i=this;return r;function r(s){return Ur(s)?(n.enter("lineEnding"),n.consume(s),n.exit("lineEnding"),o):t(s)}function o(s){return i.parser.lazy[i.now().line]?t(s):e(s)}}function TBe(n,e,t){return i;function i(r){return n.enter("lineEnding"),n.consume(r),n.exit("lineEnding"),n.attempt(w6,e,t)}}const RBe={name:"htmlText",tokenize:DBe};function DBe(n,e,t){const i=this;let r,o,s;return a;function a(ke){return n.enter("htmlText"),n.enter("htmlTextData"),n.consume(ke),c}function c(ke){return ke===33?(n.consume(ke),h):ke===47?(n.consume(ke),Q):ke===63?(n.consume(ke),V):Ug(ke)?(n.consume(ke),se):t(ke)}function h(ke){return ke===45?(n.consume(ke),m):ke===91?(n.consume(ke),o=0,T):Ug(ke)?(n.consume(ke),q):t(ke)}function m(ke){return ke===45?(n.consume(ke),x):t(ke)}function y(ke){return ke===null?t(ke):ke===45?(n.consume(ke),M):Ur(ke)?(s=y,qe(ke)):(n.consume(ke),y)}function M(ke){return ke===45?(n.consume(ke),x):y(ke)}function x(ke){return ke===62?Ie(ke):ke===45?M(ke):y(ke)}function T(ke){const we="CDATA[";return ke===we.charCodeAt(o++)?(n.consume(ke),o===we.length?P:T):t(ke)}function P(ke){return ke===null?t(ke):ke===93?(n.consume(ke),F):Ur(ke)?(s=P,qe(ke)):(n.consume(ke),P)}function F(ke){return ke===93?(n.consume(ke),j):P(ke)}function j(ke){return ke===62?Ie(ke):ke===93?(n.consume(ke),j):P(ke)}function q(ke){return ke===null||ke===62?Ie(ke):Ur(ke)?(s=q,qe(ke)):(n.consume(ke),q)}function V(ke){return ke===null?t(ke):ke===63?(n.consume(ke),H):Ur(ke)?(s=V,qe(ke)):(n.consume(ke),V)}function H(ke){return ke===62?Ie(ke):V(ke)}function Q(ke){return Ug(ke)?(n.consume(ke),Y):t(ke)}function Y(ke){return ke===45||Mf(ke)?(n.consume(ke),Y):z(ke)}function z(ke){return Ur(ke)?(s=z,qe(ke)):Fs(ke)?(n.consume(ke),z):Ie(ke)}function se(ke){return ke===45||Mf(ke)?(n.consume(ke),se):ke===47||ke===62||Sd(ke)?le(ke):t(ke)}function le(ke){return ke===47?(n.consume(ke),Ie):ke===58||ke===95||Ug(ke)?(n.consume(ke),pe):Ur(ke)?(s=le,qe(ke)):Fs(ke)?(n.consume(ke),le):Ie(ke)}function pe(ke){return ke===45||ke===46||ke===58||ke===95||Mf(ke)?(n.consume(ke),pe):de(ke)}function de(ke){return ke===61?(n.consume(ke),ve):Ur(ke)?(s=de,qe(ke)):Fs(ke)?(n.consume(ke),de):le(ke)}function ve(ke){return ke===null||ke===60||ke===61||ke===62||ke===96?t(ke):ke===34||ke===39?(n.consume(ke),r=ke,Ee):Ur(ke)?(s=ve,qe(ke)):Fs(ke)?(n.consume(ke),ve):(n.consume(ke),Re)}function Ee(ke){return ke===r?(n.consume(ke),r=void 0,je):ke===null?t(ke):Ur(ke)?(s=Ee,qe(ke)):(n.consume(ke),Ee)}function Re(ke){return ke===null||ke===34||ke===39||ke===60||ke===61||ke===96?t(ke):ke===47||ke===62||Sd(ke)?le(ke):(n.consume(ke),Re)}function je(ke){return ke===47||ke===62||Sd(ke)?le(ke):t(ke)}function Ie(ke){return ke===62?(n.consume(ke),n.exit("htmlTextData"),n.exit("htmlText"),e):t(ke)}function qe(ke){return n.exit("htmlTextData"),n.enter("lineEnding"),n.consume(ke),n.exit("lineEnding"),tt}function tt(ke){return Fs(ke)?Wa(n,At,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(ke):At(ke)}function At(ke){return n.enter("htmlTextData"),s(ke)}}const PK={name:"labelEnd",resolveAll:LBe,resolveTo:FBe,tokenize:zBe},PBe={tokenize:jBe},UBe={tokenize:NBe},KBe={tokenize:GBe};function LBe(n){let e=-1;const t=[];for(;++e<n.length;){const i=n[e][1];if(t.push(n[e]),i.type==="labelImage"||i.type==="labelLink"||i.type==="labelEnd"){const r=i.type==="labelImage"?4:2;i.type="data",e+=r}}return n.length!==t.length&&o0(n,0,n.length,t),n}function FBe(n,e){let t=n.length,i=0,r,o,s,a;for(;t--;)if(r=n[t][1],o){if(r.type==="link"||r.type==="labelLink"&&r._inactive)break;n[t][0]==="enter"&&r.type==="labelLink"&&(r._inactive=!0)}else if(s){if(n[t][0]==="enter"&&(r.type==="labelImage"||r.type==="labelLink")&&!r._balanced&&(o=t,r.type!=="labelLink")){i=2;break}}else r.type==="labelEnd"&&(s=t);const c={type:n[o][1].type==="labelLink"?"link":"image",start:{...n[o][1].start},end:{...n[n.length-1][1].end}},h={type:"label",start:{...n[o][1].start},end:{...n[s][1].end}},m={type:"labelText",start:{...n[o+i+2][1].end},end:{...n[s-2][1].start}};return a=[["enter",c,e],["enter",h,e]],a=Ap(a,n.slice(o+1,o+i+3)),a=Ap(a,[["enter",m,e]]),a=Ap(a,DK(e.parser.constructs.insideSpan.null,n.slice(o+i+4,s-3),e)),a=Ap(a,[["exit",m,e],n[s-2],n[s-1],["exit",h,e]]),a=Ap(a,n.slice(s+1)),a=Ap(a,[["exit",c,e]]),o0(n,o,n.length,a),n}function zBe(n,e,t){const i=this;let r=i.events.length,o,s;for(;r--;)if((i.events[r][1].type==="labelImage"||i.events[r][1].type==="labelLink")&&!i.events[r][1]._balanced){o=i.events[r][1];break}return a;function a(M){return o?o._inactive?y(M):(s=i.parser.defined.includes(ex(i.sliceSerialize({start:o.end,end:i.now()}))),n.enter("labelEnd"),n.enter("labelMarker"),n.consume(M),n.exit("labelMarker"),n.exit("labelEnd"),c):t(M)}function c(M){return M===40?n.attempt(PBe,m,s?m:y)(M):M===91?n.attempt(UBe,m,s?h:y)(M):s?m(M):y(M)}function h(M){return n.attempt(KBe,m,y)(M)}function m(M){return e(M)}function y(M){return o._balanced=!0,t(M)}}function jBe(n,e,t){return i;function i(y){return n.enter("resource"),n.enter("resourceMarker"),n.consume(y),n.exit("resourceMarker"),r}function r(y){return Sd(y)?O3(n,o)(y):o(y)}function o(y){return y===41?m(y):boe(n,s,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(y)}function s(y){return Sd(y)?O3(n,c)(y):m(y)}function a(y){return t(y)}function c(y){return y===34||y===39||y===40?_oe(n,h,t,"resourceTitle","resourceTitleMarker","resourceTitleString")(y):m(y)}function h(y){return Sd(y)?O3(n,m)(y):m(y)}function m(y){return y===41?(n.enter("resourceMarker"),n.consume(y),n.exit("resourceMarker"),n.exit("resource"),e):t(y)}}function NBe(n,e,t){const i=this;return r;function r(a){return Coe.call(i,n,o,s,"reference","referenceMarker","referenceString")(a)}function o(a){return i.parser.defined.includes(ex(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)))?e(a):t(a)}function s(a){return t(a)}}function GBe(n,e,t){return i;function i(o){return n.enter("reference"),n.enter("referenceMarker"),n.consume(o),n.exit("referenceMarker"),r}function r(o){return o===93?(n.enter("referenceMarker"),n.consume(o),n.exit("referenceMarker"),n.exit("reference"),e):t(o)}}const WBe={name:"labelStartImage",resolveAll:PK.resolveAll,tokenize:QBe};function QBe(n,e,t){const i=this;return r;function r(a){return n.enter("labelImage"),n.enter("labelImageMarker"),n.consume(a),n.exit("labelImageMarker"),o}function o(a){return a===91?(n.enter("labelMarker"),n.consume(a),n.exit("labelMarker"),n.exit("labelImage"),s):t(a)}function s(a){return a===94&&"_hiddenFootnoteSupport"in i.parser.constructs?t(a):e(a)}}const qBe={name:"labelStartLink",resolveAll:PK.resolveAll,tokenize:YBe};function YBe(n,e,t){const i=this;return r;function r(s){return n.enter("labelLink"),n.enter("labelMarker"),n.consume(s),n.exit("labelMarker"),n.exit("labelLink"),o}function o(s){return s===94&&"_hiddenFootnoteSupport"in i.parser.constructs?t(s):e(s)}}const f8={name:"lineEnding",tokenize:$Be};function $Be(n,e){return t;function t(i){return n.enter("lineEnding"),n.consume(i),n.exit("lineEnding"),Wa(n,e,"linePrefix")}}const Sw={name:"thematicBreak",tokenize:VBe};function VBe(n,e,t){let i=0,r;return o;function o(h){return n.enter("thematicBreak"),s(h)}function s(h){return r=h,a(h)}function a(h){return h===r?(n.enter("thematicBreakSequence"),c(h)):i>=3&&(h===null||Ur(h))?(n.exit("thematicBreak"),e(h)):t(h)}function c(h){return h===r?(n.consume(h),i++,c):(n.exit("thematicBreakSequence"),Fs(h)?Wa(n,a,"whitespace")(h):a(h))}}const fd={continuation:{tokenize:JBe},exit:t8e,name:"list",tokenize:XBe},HBe={partial:!0,tokenize:n8e},ZBe={partial:!0,tokenize:e8e};function XBe(n,e,t){const i=this,r=i.events[i.events.length-1];let o=r&&r[1].type==="linePrefix"?r[2].sliceSerialize(r[1],!0).length:0,s=0;return a;function a(x){const T=i.containerState.type||(x===42||x===43||x===45?"listUnordered":"listOrdered");if(T==="listUnordered"?!i.containerState.marker||x===i.containerState.marker:MD(x)){if(i.containerState.type||(i.containerState.type=T,n.enter(T,{_container:!0})),T==="listUnordered")return n.enter("listItemPrefix"),x===42||x===45?n.check(Sw,t,h)(x):h(x);if(!i.interrupt||x===49)return n.enter("listItemPrefix"),n.enter("listItemValue"),c(x)}return t(x)}function c(x){return MD(x)&&++s<10?(n.consume(x),c):(!i.interrupt||s<2)&&(i.containerState.marker?x===i.containerState.marker:x===41||x===46)?(n.exit("listItemValue"),h(x)):t(x)}function h(x){return n.enter("listItemMarker"),n.consume(x),n.exit("listItemMarker"),i.containerState.marker=i.containerState.marker||x,n.check(w6,i.interrupt?t:m,n.attempt(HBe,M,y))}function m(x){return i.containerState.initialBlankLine=!0,o++,M(x)}function y(x){return Fs(x)?(n.enter("listItemPrefixWhitespace"),n.consume(x),n.exit("listItemPrefixWhitespace"),M):t(x)}function M(x){return i.containerState.size=o+i.sliceSerialize(n.exit("listItemPrefix"),!0).length,e(x)}}function JBe(n,e,t){const i=this;return i.containerState._closeFlow=void 0,n.check(w6,r,o);function r(a){return i.containerState.furtherBlankLines=i.containerState.furtherBlankLines||i.containerState.initialBlankLine,Wa(n,e,"listItemIndent",i.containerState.size+1)(a)}function o(a){return i.containerState.furtherBlankLines||!Fs(a)?(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,s(a)):(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,n.attempt(ZBe,e,s)(a))}function s(a){return i.containerState._closeFlow=!0,i.interrupt=void 0,Wa(n,n.attempt(fd,e,t),"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function e8e(n,e,t){const i=this;return Wa(n,r,"listItemIndent",i.containerState.size+1);function r(o){const s=i.events[i.events.length-1];return s&&s[1].type==="listItemIndent"&&s[2].sliceSerialize(s[1],!0).length===i.containerState.size?e(o):t(o)}}function t8e(n){n.exit(this.containerState.type)}function n8e(n,e,t){const i=this;return Wa(n,r,"listItemPrefixWhitespace",i.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function r(o){const s=i.events[i.events.length-1];return!Fs(o)&&s&&s[1].type==="listItemPrefixWhitespace"?e(o):t(o)}}const GW={name:"setextUnderline",resolveTo:i8e,tokenize:r8e};function i8e(n,e){let t=n.length,i,r,o;for(;t--;)if(n[t][0]==="enter"){if(n[t][1].type==="content"){i=t;break}n[t][1].type==="paragraph"&&(r=t)}else n[t][1].type==="content"&&n.splice(t,1),!o&&n[t][1].type==="definition"&&(o=t);const s={type:"setextHeading",start:{...n[i][1].start},end:{...n[n.length-1][1].end}};return n[r][1].type="setextHeadingText",o?(n.splice(r,0,["enter",s,e]),n.splice(o+1,0,["exit",n[i][1],e]),n[i][1].end={...n[o][1].end}):n[i][1]=s,n.push(["exit",s,e]),n}function r8e(n,e,t){const i=this;let r;return o;function o(h){let m=i.events.length,y;for(;m--;)if(i.events[m][1].type!=="lineEnding"&&i.events[m][1].type!=="linePrefix"&&i.events[m][1].type!=="content"){y=i.events[m][1].type==="paragraph";break}return!i.parser.lazy[i.now().line]&&(i.interrupt||y)?(n.enter("setextHeadingLine"),r=h,s(h)):t(h)}function s(h){return n.enter("setextHeadingLineSequence"),a(h)}function a(h){return h===r?(n.consume(h),a):(n.exit("setextHeadingLineSequence"),Fs(h)?Wa(n,c,"lineSuffix")(h):c(h))}function c(h){return h===null||Ur(h)?(n.exit("setextHeadingLine"),e(h)):t(h)}}const o8e={tokenize:s8e};function s8e(n){const e=this,t=n.attempt(w6,i,n.attempt(this.parser.constructs.flowInitial,r,Wa(n,n.attempt(this.parser.constructs.flow,r,n.attempt(ABe,r)),"linePrefix")));return t;function i(o){if(o===null){n.consume(o);return}return n.enter("lineEndingBlank"),n.consume(o),n.exit("lineEndingBlank"),e.currentConstruct=void 0,t}function r(o){if(o===null){n.consume(o);return}return n.enter("lineEnding"),n.consume(o),n.exit("lineEnding"),e.currentConstruct=void 0,t}}const a8e={resolveAll:Moe()},l8e=xoe("string"),u8e=xoe("text");function xoe(n){return{resolveAll:Moe(n==="text"?c8e:void 0),tokenize:e};function e(t){const i=this,r=this.parser.constructs[n],o=t.attempt(r,s,a);return s;function s(m){return h(m)?o(m):a(m)}function a(m){if(m===null){t.consume(m);return}return t.enter("data"),t.consume(m),c}function c(m){return h(m)?(t.exit("data"),o(m)):(t.consume(m),c)}function h(m){if(m===null)return!0;const y=r[m];let M=-1;if(y)for(;++M<y.length;){const x=y[M];if(!x.previous||x.previous.call(i,i.previous))return!0}return!1}}}function Moe(n){return e;function e(t,i){let r=-1,o;for(;++r<=t.length;)o===void 0?t[r]&&t[r][1].type==="data"&&(o=r,r++):(!t[r]||t[r][1].type!=="data")&&(r!==o+2&&(t[o][1].end=t[r-1][1].end,t.splice(o+2,r-o-2),r=o+2),o=void 0);return n?n(t,i):t}}function c8e(n,e){let t=0;for(;++t<=n.length;)if((t===n.length||n[t][1].type==="lineEnding")&&n[t-1][1].type==="data"){const i=n[t-1][1],r=e.sliceStream(i);let o=r.length,s=-1,a=0,c;for(;o--;){const h=r[o];if(typeof h=="string"){for(s=h.length;h.charCodeAt(s-1)===32;)a++,s--;if(s)break;s=-1}else if(h===-2)c=!0,a++;else if(h!==-1){o++;break}}if(e._contentTypeTextTrailing&&t===n.length&&(a=0),a){const h={type:t===n.length||c||a<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:o?s:i.start._bufferIndex+s,_index:i.start._index+o,line:i.end.line,column:i.end.column-a,offset:i.end.offset-a},end:{...i.end}};i.end={...h.start},i.start.offset===i.end.offset?Object.assign(i,h):(n.splice(t,0,["enter",h,e],["exit",h,e]),t+=2)}t++}return n}const A8e={42:fd,43:fd,45:fd,48:fd,49:fd,50:fd,51:fd,52:fd,53:fd,54:fd,55:fd,56:fd,57:fd,62:moe},h8e={91:mBe},d8e={[-2]:d8,[-1]:d8,32:d8},f8e={35:_Be,42:Sw,45:[GW,Sw],60:SBe,61:GW,95:Sw,96:jW,126:jW},p8e={38:yoe,92:goe},m8e={[-5]:f8,[-4]:f8,[-3]:f8,33:WBe,38:yoe,42:wD,60:[qOe,RBe],91:qBe,92:[bBe,goe],93:PK,95:wD,96:oBe},g8e={null:[wD,a8e]},y8e={null:[42,95]},v8e={null:[]},b8e=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:y8e,contentInitial:h8e,disable:v8e,document:A8e,flow:f8e,flowInitial:d8e,insideSpan:g8e,string:p8e,text:m8e},Symbol.toStringTag,{value:"Module"}));function C8e(n,e,t){let i={_bufferIndex:-1,_index:0,line:t&&t.line||1,column:t&&t.column||1,offset:t&&t.offset||0};const r={},o=[];let s=[],a=[];const c={attempt:z(Q),check:z(Y),consume:q,enter:V,exit:H,interrupt:z(Y,{interrupt:!0})},h={code:null,containerState:{},defineSkip:P,events:[],now:T,parser:n,previous:null,sliceSerialize:M,sliceStream:x,write:y};let m=e.tokenize.call(h,c);return e.resolveAll&&o.push(e),h;function y(de){return s=Ap(s,de),F(),s[s.length-1]!==null?[]:(se(e,0),h.events=DK(o,h.events,h),h.events)}function M(de,ve){return x8e(x(de),ve)}function x(de){return _8e(s,de)}function T(){const{_bufferIndex:de,_index:ve,line:Ee,column:Re,offset:je}=i;return{_bufferIndex:de,_index:ve,line:Ee,column:Re,offset:je}}function P(de){r[de.line]=de.column,pe()}function F(){let de;for(;i._index<s.length;){const ve=s[i._index];if(typeof ve=="string")for(de=i._index,i._bufferIndex<0&&(i._bufferIndex=0);i._index===de&&i._bufferIndex<ve.length;)j(ve.charCodeAt(i._bufferIndex));else j(ve)}}function j(de){m=m(de)}function q(de){Ur(de)?(i.line++,i.column=1,i.offset+=de===-3?2:1,pe()):de!==-1&&(i.column++,i.offset++),i._bufferIndex<0?i._index++:(i._bufferIndex++,i._bufferIndex===s[i._index].length&&(i._bufferIndex=-1,i._index++)),h.previous=de}function V(de,ve){const Ee=ve||{};return Ee.type=de,Ee.start=T(),h.events.push(["enter",Ee,h]),a.push(Ee),Ee}function H(de){const ve=a.pop();return ve.end=T(),h.events.push(["exit",ve,h]),ve}function Q(de,ve){se(de,ve.from)}function Y(de,ve){ve.restore()}function z(de,ve){return Ee;function Ee(Re,je,Ie){let qe,tt,At,ke;return Array.isArray(Re)?ze(Re):"tokenize"in Re?ze([Re]):we(Re);function we(bt){return Bt;function Bt(Ke){const Te=Ke!==null&&bt[Ke],Se=Ke!==null&&bt.null,We=[...Array.isArray(Te)?Te:Te?[Te]:[],...Array.isArray(Se)?Se:Se?[Se]:[]];return ze(We)(Ke)}}function ze(bt){return qe=bt,tt=0,bt.length===0?Ie:Me(bt[tt])}function Me(bt){return Bt;function Bt(Ke){return ke=le(),At=bt,bt.partial||(h.currentConstruct=bt),bt.name&&h.parser.constructs.disable.null.includes(bt.name)?nt():bt.tokenize.call(ve?Object.assign(Object.create(h),ve):h,c,lt,nt)(Ke)}}function lt(bt){return de(At,ke),je}function nt(bt){return ke.restore(),++tt<qe.length?Me(qe[tt]):Ie}}}function se(de,ve){de.resolveAll&&!o.includes(de)&&o.push(de),de.resolve&&o0(h.events,ve,h.events.length-ve,de.resolve(h.events.slice(ve),h)),de.resolveTo&&(h.events=de.resolveTo(h.events,h))}function le(){const de=T(),ve=h.previous,Ee=h.currentConstruct,Re=h.events.length,je=Array.from(a);return{from:Re,restore:Ie};function Ie(){i=de,h.previous=ve,h.currentConstruct=Ee,h.events.length=Re,a=je,pe()}}function pe(){i.line in r&&i.column<2&&(i.column=r[i.line],i.offset+=r[i.line]-1)}}function _8e(n,e){const t=e.start._index,i=e.start._bufferIndex,r=e.end._index,o=e.end._bufferIndex;let s;if(t===r)s=[n[t].slice(i,o)];else{if(s=n.slice(t,r),i>-1){const a=s[0];typeof a=="string"?s[0]=a.slice(i):s.shift()}o>0&&s.push(n[r].slice(0,o))}return s}function x8e(n,e){let t=-1;const i=[];let r;for(;++t<n.length;){const o=n[t];let s;if(typeof o=="string")s=o;else switch(o){case-5:{s="\r";break}case-4:{s=`
`;break}case-3:{s=`\r
`;break}case-2:{s=e?" ":"	";break}case-1:{if(!e&&r)continue;s=" ";break}default:s=String.fromCharCode(o)}r=o===-2,i.push(s)}return i.join("")}function M8e(n){const i={constructs:kOe([b8e,...(n||{}).extensions||[]]),content:r(FOe),defined:[],document:r(jOe),flow:r(o8e),lazy:{},string:r(l8e),text:r(u8e)};return i;function r(o){return s;function s(a){return C8e(i,o,a)}}}function w8e(n){for(;!voe(n););return n}const WW=/[\0\t\n\r]/g;function S8e(){let n=1,e="",t=!0,i;return r;function r(o,s,a){const c=[];let h,m,y,M,x;for(o=e+(typeof o=="string"?o.toString():new TextDecoder(s||void 0).decode(o)),y=0,e="",t&&(o.charCodeAt(0)===65279&&y++,t=void 0);y<o.length;){if(WW.lastIndex=y,h=WW.exec(o),M=h&&h.index!==void 0?h.index:o.length,x=o.charCodeAt(M),!h){e=o.slice(y);break}if(x===10&&y===M&&i)c.push(-3),i=void 0;else switch(i&&(c.push(-5),i=void 0),y<M&&(c.push(o.slice(y,M)),n+=M-y),x){case 0:{c.push(65533),n++;break}case 9:{for(m=Math.ceil(n/4)*4,c.push(-2);n++<m;)c.push(-1);break}case 10:{c.push(-4),n=1;break}default:i=!0,n=1}y=M+1}return a&&(i&&c.push(-5),e&&c.push(e),c.push(null)),c}}const E8e=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function O8e(n){return n.replace(E8e,B8e)}function B8e(n,e,t){if(e)return e;if(t.charCodeAt(0)===35){const r=t.charCodeAt(1),o=r===120||r===88;return poe(t.slice(o?2:1),o?16:10)}return RK(t)||n}const woe={}.hasOwnProperty;function I8e(n,e,t){return typeof e!="string"&&(t=e,e=void 0),k8e(t)(w8e(M8e(t).document().write(S8e()(n,e,!0))))}function k8e(n){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:o(Pn),autolinkProtocol:le,autolinkEmail:le,atxHeading:o(Dt),blockQuote:o(Se),characterEscape:le,characterReference:le,codeFenced:o(We),codeFencedFenceInfo:s,codeFencedFenceMeta:s,codeIndented:o(We,s),codeText:o(at,s),codeTextData:le,data:le,codeFlowValue:le,definition:o(it),definitionDestinationString:s,definitionLabelString:s,definitionTitleString:s,emphasis:o(ft),hardBreakEscape:o(Ot),hardBreakTrailing:o(Ot),htmlFlow:o(Jt,s),htmlFlowData:le,htmlText:o(Jt,s),htmlTextData:le,image:o(Dn),label:s,link:o(Pn),listItem:o(In),listItemValue:M,listOrdered:o(oi,y),listUnordered:o(oi),paragraph:o(Tn),reference:Me,referenceString:s,resourceDestinationString:s,resourceTitleString:s,setextHeading:o(Dt),strong:o(dn),thematicBreak:o(Un)},exit:{atxHeading:c(),atxHeadingSequence:Q,autolink:c(),autolinkEmail:Te,autolinkProtocol:Ke,blockQuote:c(),characterEscapeValue:pe,characterReferenceMarkerHexadecimal:nt,characterReferenceMarkerNumeric:nt,characterReferenceValue:bt,characterReference:Bt,codeFenced:c(F),codeFencedFence:P,codeFencedFenceInfo:x,codeFencedFenceMeta:T,codeFlowValue:pe,codeIndented:c(j),codeText:c(je),codeTextData:pe,data:pe,definition:c(),definitionDestinationString:H,definitionLabelString:q,definitionTitleString:V,emphasis:c(),hardBreakEscape:c(ve),hardBreakTrailing:c(ve),htmlFlow:c(Ee),htmlFlowData:pe,htmlText:c(Re),htmlTextData:pe,image:c(qe),label:At,labelText:tt,lineEnding:de,link:c(Ie),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:lt,resourceDestinationString:ke,resourceTitleString:we,resource:ze,setextHeading:c(se),setextHeadingLineSequence:z,setextHeadingText:Y,strong:c(),thematicBreak:c()}};Soe(e,(n||{}).mdastExtensions||[]);const t={};return i;function i(It){let _e={type:"root",children:[]};const oe={stack:[_e],tokenStack:[],config:e,enter:a,exit:h,buffer:s,resume:m,data:t},ee=[];let ne=-1;for(;++ne<It.length;)if(It[ne][1].type==="listOrdered"||It[ne][1].type==="listUnordered")if(It[ne][0]==="enter")ee.push(ne);else{const ue=ee.pop();ne=r(It,ue,ne)}for(ne=-1;++ne<It.length;){const ue=e[It[ne][0]];woe.call(ue,It[ne][1].type)&&ue[It[ne][1].type].call(Object.assign({sliceSerialize:It[ne][2].sliceSerialize},oe),It[ne][1])}if(oe.tokenStack.length>0){const ue=oe.tokenStack[oe.tokenStack.length-1];(ue[1]||QW).call(oe,void 0,ue[0])}for(_e.position={start:xy(It.length>0?It[0][1].start:{line:1,column:1,offset:0}),end:xy(It.length>0?It[It.length-2][1].end:{line:1,column:1,offset:0})},ne=-1;++ne<e.transforms.length;)_e=e.transforms[ne](_e)||_e;return _e}function r(It,_e,oe){let ee=_e-1,ne=-1,ue=!1,be,Le,Ve,rt;for(;++ee<=oe;){const ye=It[ee];switch(ye[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{ye[0]==="enter"?ne++:ne--,rt=void 0;break}case"lineEndingBlank":{ye[0]==="enter"&&(be&&!rt&&!ne&&!Ve&&(Ve=ee),rt=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:rt=void 0}if(!ne&&ye[0]==="enter"&&ye[1].type==="listItemPrefix"||ne===-1&&ye[0]==="exit"&&(ye[1].type==="listUnordered"||ye[1].type==="listOrdered")){if(be){let Be=ee;for(Le=void 0;Be--;){const v=It[Be];if(v[1].type==="lineEnding"||v[1].type==="lineEndingBlank"){if(v[0]==="exit")continue;Le&&(It[Le][1].type="lineEndingBlank",ue=!0),v[1].type="lineEnding",Le=Be}else if(!(v[1].type==="linePrefix"||v[1].type==="blockQuotePrefix"||v[1].type==="blockQuotePrefixWhitespace"||v[1].type==="blockQuoteMarker"||v[1].type==="listItemIndent"))break}Ve&&(!Le||Ve<Le)&&(be._spread=!0),be.end=Object.assign({},Le?It[Le][1].start:ye[1].end),It.splice(Le||ee,0,["exit",be,ye[2]]),ee++,oe++}if(ye[1].type==="listItemPrefix"){const Be={type:"listItem",_spread:!1,start:Object.assign({},ye[1].start),end:void 0};be=Be,It.splice(ee,0,["enter",Be,ye[2]]),ee++,oe++,Ve=void 0,rt=!0}}}return It[_e][1]._spread=ue,oe}function o(It,_e){return oe;function oe(ee){a.call(this,It(ee),ee),_e&&_e.call(this,ee)}}function s(){this.stack.push({type:"fragment",children:[]})}function a(It,_e,oe){this.stack[this.stack.length-1].children.push(It),this.stack.push(It),this.tokenStack.push([_e,oe||void 0]),It.position={start:xy(_e.start),end:void 0}}function c(It){return _e;function _e(oe){It&&It.call(this,oe),h.call(this,oe)}}function h(It,_e){const oe=this.stack.pop(),ee=this.tokenStack.pop();if(ee)ee[0].type!==It.type&&(_e?_e.call(this,It,ee[0]):(ee[1]||QW).call(this,It,ee[0]));else throw new Error("Cannot close `"+It.type+"` ("+E3({start:It.start,end:It.end})+"): its not open");oe.position.end=xy(It.end)}function m(){return BOe(this.stack.pop())}function y(){this.data.expectingFirstListItemValue=!0}function M(It){if(this.data.expectingFirstListItemValue){const _e=this.stack[this.stack.length-2];_e.start=Number.parseInt(this.sliceSerialize(It),10),this.data.expectingFirstListItemValue=void 0}}function x(){const It=this.resume(),_e=this.stack[this.stack.length-1];_e.lang=It}function T(){const It=this.resume(),_e=this.stack[this.stack.length-1];_e.meta=It}function P(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function F(){const It=this.resume(),_e=this.stack[this.stack.length-1];_e.value=It.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function j(){const It=this.resume(),_e=this.stack[this.stack.length-1];_e.value=It.replace(/(\r?\n|\r)$/g,"")}function q(It){const _e=this.resume(),oe=this.stack[this.stack.length-1];oe.label=_e,oe.identifier=ex(this.sliceSerialize(It)).toLowerCase()}function V(){const It=this.resume(),_e=this.stack[this.stack.length-1];_e.title=It}function H(){const It=this.resume(),_e=this.stack[this.stack.length-1];_e.url=It}function Q(It){const _e=this.stack[this.stack.length-1];if(!_e.depth){const oe=this.sliceSerialize(It).length;_e.depth=oe}}function Y(){this.data.setextHeadingSlurpLineEnding=!0}function z(It){const _e=this.stack[this.stack.length-1];_e.depth=this.sliceSerialize(It).codePointAt(0)===61?1:2}function se(){this.data.setextHeadingSlurpLineEnding=void 0}function le(It){const oe=this.stack[this.stack.length-1].children;let ee=oe[oe.length-1];(!ee||ee.type!=="text")&&(ee=$n(),ee.position={start:xy(It.start),end:void 0},oe.push(ee)),this.stack.push(ee)}function pe(It){const _e=this.stack.pop();_e.value+=this.sliceSerialize(It),_e.position.end=xy(It.end)}function de(It){const _e=this.stack[this.stack.length-1];if(this.data.atHardBreak){const oe=_e.children[_e.children.length-1];oe.position.end=xy(It.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(_e.type)&&(le.call(this,It),pe.call(this,It))}function ve(){this.data.atHardBreak=!0}function Ee(){const It=this.resume(),_e=this.stack[this.stack.length-1];_e.value=It}function Re(){const It=this.resume(),_e=this.stack[this.stack.length-1];_e.value=It}function je(){const It=this.resume(),_e=this.stack[this.stack.length-1];_e.value=It}function Ie(){const It=this.stack[this.stack.length-1];if(this.data.inReference){const _e=this.data.referenceType||"shortcut";It.type+="Reference",It.referenceType=_e,delete It.url,delete It.title}else delete It.identifier,delete It.label;this.data.referenceType=void 0}function qe(){const It=this.stack[this.stack.length-1];if(this.data.inReference){const _e=this.data.referenceType||"shortcut";It.type+="Reference",It.referenceType=_e,delete It.url,delete It.title}else delete It.identifier,delete It.label;this.data.referenceType=void 0}function tt(It){const _e=this.sliceSerialize(It),oe=this.stack[this.stack.length-2];oe.label=O8e(_e),oe.identifier=ex(_e).toLowerCase()}function At(){const It=this.stack[this.stack.length-1],_e=this.resume(),oe=this.stack[this.stack.length-1];if(this.data.inReference=!0,oe.type==="link"){const ee=It.children;oe.children=ee}else oe.alt=_e}function ke(){const It=this.resume(),_e=this.stack[this.stack.length-1];_e.url=It}function we(){const It=this.resume(),_e=this.stack[this.stack.length-1];_e.title=It}function ze(){this.data.inReference=void 0}function Me(){this.data.referenceType="collapsed"}function lt(It){const _e=this.resume(),oe=this.stack[this.stack.length-1];oe.label=_e,oe.identifier=ex(this.sliceSerialize(It)).toLowerCase(),this.data.referenceType="full"}function nt(It){this.data.characterReferenceType=It.type}function bt(It){const _e=this.sliceSerialize(It),oe=this.data.characterReferenceType;let ee;oe?(ee=poe(_e,oe==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):ee=RK(_e);const ne=this.stack[this.stack.length-1];ne.value+=ee}function Bt(It){const _e=this.stack.pop();_e.position.end=xy(It.end)}function Ke(It){pe.call(this,It);const _e=this.stack[this.stack.length-1];_e.url=this.sliceSerialize(It)}function Te(It){pe.call(this,It);const _e=this.stack[this.stack.length-1];_e.url="mailto:"+this.sliceSerialize(It)}function Se(){return{type:"blockquote",children:[]}}function We(){return{type:"code",lang:null,meta:null,value:""}}function at(){return{type:"inlineCode",value:""}}function it(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function ft(){return{type:"emphasis",children:[]}}function Dt(){return{type:"heading",depth:0,children:[]}}function Ot(){return{type:"break"}}function Jt(){return{type:"html",value:""}}function Dn(){return{type:"image",title:null,url:"",alt:null}}function Pn(){return{type:"link",title:null,url:"",children:[]}}function oi(It){return{type:"list",ordered:It.type==="listOrdered",start:null,spread:It._spread,children:[]}}function In(It){return{type:"listItem",spread:It._spread,checked:null,children:[]}}function Tn(){return{type:"paragraph",children:[]}}function dn(){return{type:"strong",children:[]}}function $n(){return{type:"text",value:""}}function Un(){return{type:"thematicBreak"}}}function xy(n){return{line:n.line,column:n.column,offset:n.offset}}function Soe(n,e){let t=-1;for(;++t<e.length;){const i=e[t];Array.isArray(i)?Soe(n,i):T8e(n,i)}}function T8e(n,e){let t;for(t in e)if(woe.call(e,t))switch(t){case"canContainEols":{const i=e[t];i&&n[t].push(...i);break}case"transforms":{const i=e[t];i&&n[t].push(...i);break}case"enter":case"exit":{const i=e[t];i&&Object.assign(n[t],i);break}}}function QW(n,e){throw n?new Error("Cannot close `"+n.type+"` ("+E3({start:n.start,end:n.end})+"): a different token (`"+e.type+"`, "+E3({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+E3({start:e.start,end:e.end})+") is still open")}function R8e(n){const e=this;e.parser=t;function t(i){return I8e(i,{...e.data("settings"),...n,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function D8e(n,e){const t={type:"element",tagName:"blockquote",properties:{},children:n.wrap(n.all(e),!0)};return n.patch(e,t),n.applyData(e,t)}function P8e(n,e){const t={type:"element",tagName:"br",properties:{},children:[]};return n.patch(e,t),[n.applyData(e,t),{type:"text",value:`
`}]}function U8e(n,e){const t=e.value?e.value+`
`:"",i={};e.lang&&(i.className=["language-"+e.lang]);let r={type:"element",tagName:"code",properties:i,children:[{type:"text",value:t}]};return e.meta&&(r.data={meta:e.meta}),n.patch(e,r),r=n.applyData(e,r),r={type:"element",tagName:"pre",properties:{},children:[r]},n.patch(e,r),r}function K8e(n,e){const t={type:"element",tagName:"del",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function L8e(n,e){const t={type:"element",tagName:"em",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function F8e(n,e){const t=typeof n.options.clobberPrefix=="string"?n.options.clobberPrefix:"user-content-",i=String(e.identifier).toUpperCase(),r=Vx(i.toLowerCase()),o=n.footnoteOrder.indexOf(i);let s,a=n.footnoteCounts.get(i);a===void 0?(a=0,n.footnoteOrder.push(i),s=n.footnoteOrder.length):s=o+1,a+=1,n.footnoteCounts.set(i,a);const c={type:"element",tagName:"a",properties:{href:"#"+t+"fn-"+r,id:t+"fnref-"+r+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(s)}]};n.patch(e,c);const h={type:"element",tagName:"sup",properties:{},children:[c]};return n.patch(e,h),n.applyData(e,h)}function z8e(n,e){const t={type:"element",tagName:"h"+e.depth,properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function j8e(n,e){if(n.options.allowDangerousHtml){const t={type:"raw",value:e.value};return n.patch(e,t),n.applyData(e,t)}}function Eoe(n,e){const t=e.referenceType;let i="]";if(t==="collapsed"?i+="[]":t==="full"&&(i+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+i}];const r=n.all(e),o=r[0];o&&o.type==="text"?o.value="["+o.value:r.unshift({type:"text",value:"["});const s=r[r.length-1];return s&&s.type==="text"?s.value+=i:r.push({type:"text",value:i}),r}function N8e(n,e){const t=String(e.identifier).toUpperCase(),i=n.definitionById.get(t);if(!i)return Eoe(n,e);const r={src:Vx(i.url||""),alt:e.alt};i.title!==null&&i.title!==void 0&&(r.title=i.title);const o={type:"element",tagName:"img",properties:r,children:[]};return n.patch(e,o),n.applyData(e,o)}function G8e(n,e){const t={src:Vx(e.url)};e.alt!==null&&e.alt!==void 0&&(t.alt=e.alt),e.title!==null&&e.title!==void 0&&(t.title=e.title);const i={type:"element",tagName:"img",properties:t,children:[]};return n.patch(e,i),n.applyData(e,i)}function W8e(n,e){const t={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};n.patch(e,t);const i={type:"element",tagName:"code",properties:{},children:[t]};return n.patch(e,i),n.applyData(e,i)}function Q8e(n,e){const t=String(e.identifier).toUpperCase(),i=n.definitionById.get(t);if(!i)return Eoe(n,e);const r={href:Vx(i.url||"")};i.title!==null&&i.title!==void 0&&(r.title=i.title);const o={type:"element",tagName:"a",properties:r,children:n.all(e)};return n.patch(e,o),n.applyData(e,o)}function q8e(n,e){const t={href:Vx(e.url)};e.title!==null&&e.title!==void 0&&(t.title=e.title);const i={type:"element",tagName:"a",properties:t,children:n.all(e)};return n.patch(e,i),n.applyData(e,i)}function Y8e(n,e,t){const i=n.all(e),r=t?$8e(t):Ooe(e),o={},s=[];if(typeof e.checked=="boolean"){const m=i[0];let y;m&&m.type==="element"&&m.tagName==="p"?y=m:(y={type:"element",tagName:"p",properties:{},children:[]},i.unshift(y)),y.children.length>0&&y.children.unshift({type:"text",value:" "}),y.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),o.className=["task-list-item"]}let a=-1;for(;++a<i.length;){const m=i[a];(r||a!==0||m.type!=="element"||m.tagName!=="p")&&s.push({type:"text",value:`
`}),m.type==="element"&&m.tagName==="p"&&!r?s.push(...m.children):s.push(m)}const c=i[i.length-1];c&&(r||c.type!=="element"||c.tagName!=="p")&&s.push({type:"text",value:`
`});const h={type:"element",tagName:"li",properties:o,children:s};return n.patch(e,h),n.applyData(e,h)}function $8e(n){let e=!1;if(n.type==="list"){e=n.spread||!1;const t=n.children;let i=-1;for(;!e&&++i<t.length;)e=Ooe(t[i])}return e}function Ooe(n){const e=n.spread;return e??n.children.length>1}function V8e(n,e){const t={},i=n.all(e);let r=-1;for(typeof e.start=="number"&&e.start!==1&&(t.start=e.start);++r<i.length;){const s=i[r];if(s.type==="element"&&s.tagName==="li"&&s.properties&&Array.isArray(s.properties.className)&&s.properties.className.includes("task-list-item")){t.className=["contains-task-list"];break}}const o={type:"element",tagName:e.ordered?"ol":"ul",properties:t,children:n.wrap(i,!0)};return n.patch(e,o),n.applyData(e,o)}function H8e(n,e){const t={type:"element",tagName:"p",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function Z8e(n,e){const t={type:"root",children:n.wrap(n.all(e))};return n.patch(e,t),n.applyData(e,t)}function X8e(n,e){const t={type:"element",tagName:"strong",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function J8e(n,e){const t=n.all(e),i=t.shift(),r=[];if(i){const s={type:"element",tagName:"thead",properties:{},children:n.wrap([i],!0)};n.patch(e.children[0],s),r.push(s)}if(t.length>0){const s={type:"element",tagName:"tbody",properties:{},children:n.wrap(t,!0)},a=BK(e.children[1]),c=loe(e.children[e.children.length-1]);a&&c&&(s.position={start:a,end:c}),r.push(s)}const o={type:"element",tagName:"table",properties:{},children:n.wrap(r,!0)};return n.patch(e,o),n.applyData(e,o)}function e7e(n,e,t){const i=t?t.children:void 0,o=(i?i.indexOf(e):1)===0?"th":"td",s=t&&t.type==="table"?t.align:void 0,a=s?s.length:e.children.length;let c=-1;const h=[];for(;++c<a;){const y=e.children[c],M={},x=s?s[c]:void 0;x&&(M.align=x);let T={type:"element",tagName:o,properties:M,children:[]};y&&(T.children=n.all(y),n.patch(y,T),T=n.applyData(y,T)),h.push(T)}const m={type:"element",tagName:"tr",properties:{},children:n.wrap(h,!0)};return n.patch(e,m),n.applyData(e,m)}function t7e(n,e){const t={type:"element",tagName:"td",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}const qW=9,YW=32;function n7e(n){const e=String(n),t=/\r?\n|\r/g;let i=t.exec(e),r=0;const o=[];for(;i;)o.push($W(e.slice(r,i.index),r>0,!0),i[0]),r=i.index+i[0].length,i=t.exec(e);return o.push($W(e.slice(r),r>0,!1)),o.join("")}function $W(n,e,t){let i=0,r=n.length;if(e){let o=n.codePointAt(i);for(;o===qW||o===YW;)i++,o=n.codePointAt(i)}if(t){let o=n.codePointAt(r-1);for(;o===qW||o===YW;)r--,o=n.codePointAt(r-1)}return r>i?n.slice(i,r):""}function i7e(n,e){const t={type:"text",value:n7e(String(e.value))};return n.patch(e,t),n.applyData(e,t)}function r7e(n,e){const t={type:"element",tagName:"hr",properties:{},children:[]};return n.patch(e,t),n.applyData(e,t)}const o7e={blockquote:D8e,break:P8e,code:U8e,delete:K8e,emphasis:L8e,footnoteReference:F8e,heading:z8e,html:j8e,imageReference:N8e,image:G8e,inlineCode:W8e,linkReference:Q8e,link:q8e,listItem:Y8e,list:V8e,paragraph:H8e,root:Z8e,strong:X8e,table:J8e,tableCell:t7e,tableRow:e7e,text:i7e,thematicBreak:r7e,toml:LM,yaml:LM,definition:LM,footnoteDefinition:LM};function LM(){}const Boe=-1,S6=0,B3=1,XS=2,UK=3,KK=4,LK=5,FK=6,Ioe=7,koe=8,VW=typeof self=="object"?self:globalThis,s7e=(n,e)=>{const t=(r,o)=>(n.set(o,r),r),i=r=>{if(n.has(r))return n.get(r);const[o,s]=e[r];switch(o){case S6:case Boe:return t(s,r);case B3:{const a=t([],r);for(const c of s)a.push(i(c));return a}case XS:{const a=t({},r);for(const[c,h]of s)a[i(c)]=i(h);return a}case UK:return t(new Date(s),r);case KK:{const{source:a,flags:c}=s;return t(new RegExp(a,c),r)}case LK:{const a=t(new Map,r);for(const[c,h]of s)a.set(i(c),i(h));return a}case FK:{const a=t(new Set,r);for(const c of s)a.add(i(c));return a}case Ioe:{const{name:a,message:c}=s;return t(new VW[a](c),r)}case koe:return t(BigInt(s),r);case"BigInt":return t(Object(BigInt(s)),r);case"ArrayBuffer":return t(new Uint8Array(s).buffer,s);case"DataView":{const{buffer:a}=new Uint8Array(s);return t(new DataView(a),s)}}return t(new VW[o](s),r)};return i},HW=n=>s7e(new Map,n)(0),YC="",{toString:a7e}={},{keys:l7e}=Object,B2=n=>{const e=typeof n;if(e!=="object"||!n)return[S6,e];const t=a7e.call(n).slice(8,-1);switch(t){case"Array":return[B3,YC];case"Object":return[XS,YC];case"Date":return[UK,YC];case"RegExp":return[KK,YC];case"Map":return[LK,YC];case"Set":return[FK,YC];case"DataView":return[B3,t]}return t.includes("Array")?[B3,t]:t.includes("Error")?[Ioe,t]:[XS,t]},FM=([n,e])=>n===S6&&(e==="function"||e==="symbol"),u7e=(n,e,t,i)=>{const r=(s,a)=>{const c=i.push(s)-1;return t.set(a,c),c},o=s=>{if(t.has(s))return t.get(s);let[a,c]=B2(s);switch(a){case S6:{let m=s;switch(c){case"bigint":a=koe,m=s.toString();break;case"function":case"symbol":if(n)throw new TypeError("unable to serialize "+c);m=null;break;case"undefined":return r([Boe],s)}return r([a,m],s)}case B3:{if(c){let M=s;return c==="DataView"?M=new Uint8Array(s.buffer):c==="ArrayBuffer"&&(M=new Uint8Array(s)),r([c,[...M]],s)}const m=[],y=r([a,m],s);for(const M of s)m.push(o(M));return y}case XS:{if(c)switch(c){case"BigInt":return r([c,s.toString()],s);case"Boolean":case"Number":case"String":return r([c,s.valueOf()],s)}if(e&&"toJSON"in s)return o(s.toJSON());const m=[],y=r([a,m],s);for(const M of l7e(s))(n||!FM(B2(s[M])))&&m.push([o(M),o(s[M])]);return y}case UK:return r([a,s.toISOString()],s);case KK:{const{source:m,flags:y}=s;return r([a,{source:m,flags:y}],s)}case LK:{const m=[],y=r([a,m],s);for(const[M,x]of s)(n||!(FM(B2(M))||FM(B2(x))))&&m.push([o(M),o(x)]);return y}case FK:{const m=[],y=r([a,m],s);for(const M of s)(n||!FM(B2(M)))&&m.push(o(M));return y}}const{message:h}=s;return r([a,{name:c,message:h}],s)};return o},ZW=(n,{json:e,lossy:t}={})=>{const i=[];return u7e(!(e||t),!!e,new Map,i)(n),i},JS=typeof structuredClone=="function"?(n,e)=>e&&("json"in e||"lossy"in e)?HW(ZW(n,e)):structuredClone(n):(n,e)=>HW(ZW(n,e));function c7e(n,e){const t=[{type:"text",value:""}];return e>1&&t.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),t}function A7e(n,e){return"Back to reference "+(n+1)+(e>1?"-"+e:"")}function h7e(n){const e=typeof n.options.clobberPrefix=="string"?n.options.clobberPrefix:"user-content-",t=n.options.footnoteBackContent||c7e,i=n.options.footnoteBackLabel||A7e,r=n.options.footnoteLabel||"Footnotes",o=n.options.footnoteLabelTagName||"h2",s=n.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let c=-1;for(;++c<n.footnoteOrder.length;){const h=n.footnoteById.get(n.footnoteOrder[c]);if(!h)continue;const m=n.all(h),y=String(h.identifier).toUpperCase(),M=Vx(y.toLowerCase());let x=0;const T=[],P=n.footnoteCounts.get(y);for(;P!==void 0&&++x<=P;){T.length>0&&T.push({type:"text",value:" "});let q=typeof t=="string"?t:t(c,x);typeof q=="string"&&(q={type:"text",value:q}),T.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+M+(x>1?"-"+x:""),dataFootnoteBackref:"",ariaLabel:typeof i=="string"?i:i(c,x),className:["data-footnote-backref"]},children:Array.isArray(q)?q:[q]})}const F=m[m.length-1];if(F&&F.type==="element"&&F.tagName==="p"){const q=F.children[F.children.length-1];q&&q.type==="text"?q.value+=" ":F.children.push({type:"text",value:" "}),F.children.push(...T)}else m.push(...T);const j={type:"element",tagName:"li",properties:{id:e+"fn-"+M},children:n.wrap(m,!0)};n.patch(h,j),a.push(j)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:o,properties:{...JS(s),id:"footnote-label"},children:[{type:"text",value:r}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:n.wrap(a,!0)},{type:"text",value:`
`}]}}const Toe=(function(n){if(n==null)return m7e;if(typeof n=="function")return E6(n);if(typeof n=="object")return Array.isArray(n)?d7e(n):f7e(n);if(typeof n=="string")return p7e(n);throw new Error("Expected function, string, or object as test")});function d7e(n){const e=[];let t=-1;for(;++t<n.length;)e[t]=Toe(n[t]);return E6(i);function i(...r){let o=-1;for(;++o<e.length;)if(e[o].apply(this,r))return!0;return!1}}function f7e(n){const e=n;return E6(t);function t(i){const r=i;let o;for(o in n)if(r[o]!==e[o])return!1;return!0}}function p7e(n){return E6(e);function e(t){return t&&t.type===n}}function E6(n){return e;function e(t,i,r){return!!(g7e(t)&&n.call(this,t,typeof i=="number"?i:void 0,r||void 0))}}function m7e(){return!0}function g7e(n){return n!==null&&typeof n=="object"&&"type"in n}const Roe=[],y7e=!0,XW=!1,v7e="skip";function b7e(n,e,t,i){let r;typeof e=="function"&&typeof t!="function"?(i=t,t=e):r=e;const o=Toe(r),s=i?-1:1;a(n,void 0,[])();function a(c,h,m){const y=c&&typeof c=="object"?c:{};if(typeof y.type=="string"){const x=typeof y.tagName=="string"?y.tagName:typeof y.name=="string"?y.name:void 0;Object.defineProperty(M,"name",{value:"node ("+(c.type+(x?"<"+x+">":""))+")"})}return M;function M(){let x=Roe,T,P,F;if((!e||o(c,h,m[m.length-1]||void 0))&&(x=C7e(t(c,m)),x[0]===XW))return x;if("children"in c&&c.children){const j=c;if(j.children&&x[0]!==v7e)for(P=(i?j.children.length:-1)+s,F=m.concat(j);P>-1&&P<j.children.length;){const q=j.children[P];if(T=a(q,P,F)(),T[0]===XW)return T;P=typeof T[1]=="number"?T[1]:P+s}}return x}}}function C7e(n){return Array.isArray(n)?n:typeof n=="number"?[y7e,n]:n==null?Roe:[n]}function Doe(n,e,t,i){let r,o,s;typeof e=="function"&&typeof t!="function"?(o=void 0,s=e,r=t):(o=e,s=t,r=i),b7e(n,o,a,r);function a(c,h){const m=h[h.length-1],y=m?m.children.indexOf(c):void 0;return s(c,y,m)}}const SD={}.hasOwnProperty,_7e={};function x7e(n,e){const t=e||_7e,i=new Map,r=new Map,o=new Map,s={...o7e,...t.handlers},a={all:h,applyData:w7e,definitionById:i,footnoteById:r,footnoteCounts:o,footnoteOrder:[],handlers:s,one:c,options:t,patch:M7e,wrap:E7e};return Doe(n,function(m){if(m.type==="definition"||m.type==="footnoteDefinition"){const y=m.type==="definition"?i:r,M=String(m.identifier).toUpperCase();y.has(M)||y.set(M,m)}}),a;function c(m,y){const M=m.type,x=a.handlers[M];if(SD.call(a.handlers,M)&&x)return x(a,m,y);if(a.options.passThrough&&a.options.passThrough.includes(M)){if("children"in m){const{children:P,...F}=m,j=JS(F);return j.children=a.all(m),j}return JS(m)}return(a.options.unknownHandler||S7e)(a,m,y)}function h(m){const y=[];if("children"in m){const M=m.children;let x=-1;for(;++x<M.length;){const T=a.one(M[x],m);if(T){if(x&&M[x-1].type==="break"&&(!Array.isArray(T)&&T.type==="text"&&(T.value=JW(T.value)),!Array.isArray(T)&&T.type==="element")){const P=T.children[0];P&&P.type==="text"&&(P.value=JW(P.value))}Array.isArray(T)?y.push(...T):y.push(T)}}}return y}}function M7e(n,e){n.position&&(e.position=aOe(n))}function w7e(n,e){let t=e;if(n&&n.data){const i=n.data.hName,r=n.data.hChildren,o=n.data.hProperties;if(typeof i=="string")if(t.type==="element")t.tagName=i;else{const s="children"in t?t.children:[t];t={type:"element",tagName:i,properties:{},children:s}}t.type==="element"&&o&&Object.assign(t.properties,JS(o)),"children"in t&&t.children&&r!==null&&r!==void 0&&(t.children=r)}return t}function S7e(n,e){const t=e.data||{},i="value"in e&&!(SD.call(t,"hProperties")||SD.call(t,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:n.all(e)};return n.patch(e,i),n.applyData(e,i)}function E7e(n,e){const t=[];let i=-1;for(e&&t.push({type:"text",value:`
`});++i<n.length;)i&&t.push({type:"text",value:`
`}),t.push(n[i]);return e&&n.length>0&&t.push({type:"text",value:`
`}),t}function JW(n){let e=0,t=n.charCodeAt(e);for(;t===9||t===32;)e++,t=n.charCodeAt(e);return n.slice(e)}function eQ(n,e){const t=x7e(n,e),i=t.one(n,void 0),r=h7e(t),o=Array.isArray(i)?{type:"root",children:i}:i||{type:"root",children:[]};return r&&o.children.push({type:"text",value:`
`},r),o}function O7e(n,e){return n&&"run"in n?async function(t,i){const r=eQ(t,{file:i,...e});await n.run(r,i)}:function(t,i){return eQ(t,{file:i,...n||e})}}function tQ(n){if(n)throw n}var p8,nQ;function B7e(){if(nQ)return p8;nQ=1;var n=Object.prototype.hasOwnProperty,e=Object.prototype.toString,t=Object.defineProperty,i=Object.getOwnPropertyDescriptor,r=function(h){return typeof Array.isArray=="function"?Array.isArray(h):e.call(h)==="[object Array]"},o=function(h){if(!h||e.call(h)!=="[object Object]")return!1;var m=n.call(h,"constructor"),y=h.constructor&&h.constructor.prototype&&n.call(h.constructor.prototype,"isPrototypeOf");if(h.constructor&&!m&&!y)return!1;var M;for(M in h);return typeof M>"u"||n.call(h,M)},s=function(h,m){t&&m.name==="__proto__"?t(h,m.name,{enumerable:!0,configurable:!0,value:m.newValue,writable:!0}):h[m.name]=m.newValue},a=function(h,m){if(m==="__proto__")if(n.call(h,m)){if(i)return i(h,m).value}else return;return h[m]};return p8=function c(){var h,m,y,M,x,T,P=arguments[0],F=1,j=arguments.length,q=!1;for(typeof P=="boolean"&&(q=P,P=arguments[1]||{},F=2),(P==null||typeof P!="object"&&typeof P!="function")&&(P={});F<j;++F)if(h=arguments[F],h!=null)for(m in h)y=a(P,m),M=a(h,m),P!==M&&(q&&M&&(o(M)||(x=r(M)))?(x?(x=!1,T=y&&r(y)?y:[]):T=y&&o(y)?y:{},s(P,{name:m,newValue:c(q,T,M)})):typeof M<"u"&&s(P,{name:m,newValue:M}));return P},p8}var I7e=B7e();const m8=eu(I7e);function ED(n){if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)}function k7e(){const n=[],e={run:t,use:i};return e;function t(...r){let o=-1;const s=r.pop();if(typeof s!="function")throw new TypeError("Expected function as last argument, not "+s);a(null,...r);function a(c,...h){const m=n[++o];let y=-1;if(c){s(c);return}for(;++y<r.length;)(h[y]===null||h[y]===void 0)&&(h[y]=r[y]);r=h,m?T7e(m,a)(...h):s(null,...h)}}function i(r){if(typeof r!="function")throw new TypeError("Expected `middelware` to be a function, not "+r);return n.push(r),e}}function T7e(n,e){let t;return i;function i(...s){const a=n.length>s.length;let c;a&&s.push(r);try{c=n.apply(this,s)}catch(h){const m=h;if(a&&t)throw m;return r(m)}a||(c&&c.then&&typeof c.then=="function"?c.then(o,r):c instanceof Error?r(c):o(c))}function r(s,...a){t||(t=!0,e(s,...a))}function o(s){r(null,s)}}const Sg={basename:R7e,dirname:D7e,extname:P7e,join:U7e,sep:"/"};function R7e(n,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');B5(n);let t=0,i=-1,r=n.length,o;if(e===void 0||e.length===0||e.length>n.length){for(;r--;)if(n.codePointAt(r)===47){if(o){t=r+1;break}}else i<0&&(o=!0,i=r+1);return i<0?"":n.slice(t,i)}if(e===n)return"";let s=-1,a=e.length-1;for(;r--;)if(n.codePointAt(r)===47){if(o){t=r+1;break}}else s<0&&(o=!0,s=r+1),a>-1&&(n.codePointAt(r)===e.codePointAt(a--)?a<0&&(i=r):(a=-1,i=s));return t===i?i=s:i<0&&(i=n.length),n.slice(t,i)}function D7e(n){if(B5(n),n.length===0)return".";let e=-1,t=n.length,i;for(;--t;)if(n.codePointAt(t)===47){if(i){e=t;break}}else i||(i=!0);return e<0?n.codePointAt(0)===47?"/":".":e===1&&n.codePointAt(0)===47?"//":n.slice(0,e)}function P7e(n){B5(n);let e=n.length,t=-1,i=0,r=-1,o=0,s;for(;e--;){const a=n.codePointAt(e);if(a===47){if(s){i=e+1;break}continue}t<0&&(s=!0,t=e+1),a===46?r<0?r=e:o!==1&&(o=1):r>-1&&(o=-1)}return r<0||t<0||o===0||o===1&&r===t-1&&r===i+1?"":n.slice(r,t)}function U7e(...n){let e=-1,t;for(;++e<n.length;)B5(n[e]),n[e]&&(t=t===void 0?n[e]:t+"/"+n[e]);return t===void 0?".":K7e(t)}function K7e(n){B5(n);const e=n.codePointAt(0)===47;let t=L7e(n,!e);return t.length===0&&!e&&(t="."),t.length>0&&n.codePointAt(n.length-1)===47&&(t+="/"),e?"/"+t:t}function L7e(n,e){let t="",i=0,r=-1,o=0,s=-1,a,c;for(;++s<=n.length;){if(s<n.length)a=n.codePointAt(s);else{if(a===47)break;a=47}if(a===47){if(!(r===s-1||o===1))if(r!==s-1&&o===2){if(t.length<2||i!==2||t.codePointAt(t.length-1)!==46||t.codePointAt(t.length-2)!==46){if(t.length>2){if(c=t.lastIndexOf("/"),c!==t.length-1){c<0?(t="",i=0):(t=t.slice(0,c),i=t.length-1-t.lastIndexOf("/")),r=s,o=0;continue}}else if(t.length>0){t="",i=0,r=s,o=0;continue}}e&&(t=t.length>0?t+"/..":"..",i=2)}else t.length>0?t+="/"+n.slice(r+1,s):t=n.slice(r+1,s),i=s-r-1;r=s,o=0}else a===46&&o>-1?o++:o=-1}return t}function B5(n){if(typeof n!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(n))}const F7e={cwd:z7e};function z7e(){return"/"}function OD(n){return!!(n!==null&&typeof n=="object"&&"href"in n&&n.href&&"protocol"in n&&n.protocol&&n.auth===void 0)}function j7e(n){if(typeof n=="string")n=new URL(n);else if(!OD(n)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+n+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(n.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return N7e(n)}function N7e(n){if(n.hostname!==""){const i=new TypeError('File URL host must be "localhost" or empty on darwin');throw i.code="ERR_INVALID_FILE_URL_HOST",i}const e=n.pathname;let t=-1;for(;++t<e.length;)if(e.codePointAt(t)===37&&e.codePointAt(t+1)===50){const i=e.codePointAt(t+2);if(i===70||i===102){const r=new TypeError("File URL path must not include encoded / characters");throw r.code="ERR_INVALID_FILE_URL_PATH",r}}return decodeURIComponent(e)}const g8=["history","path","basename","stem","extname","dirname"];class Poe{constructor(e){let t;e?OD(e)?t={path:e}:typeof e=="string"||G7e(e)?t={value:e}:t=e:t={},this.cwd="cwd"in t?"":F7e.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let i=-1;for(;++i<g8.length;){const o=g8[i];o in t&&t[o]!==void 0&&t[o]!==null&&(this[o]=o==="history"?[...t[o]]:t[o])}let r;for(r in t)g8.includes(r)||(this[r]=t[r])}get basename(){return typeof this.path=="string"?Sg.basename(this.path):void 0}set basename(e){v8(e,"basename"),y8(e,"basename"),this.path=Sg.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?Sg.dirname(this.path):void 0}set dirname(e){iQ(this.basename,"dirname"),this.path=Sg.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?Sg.extname(this.path):void 0}set extname(e){if(y8(e,"extname"),iQ(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Sg.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){OD(e)&&(e=j7e(e)),v8(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?Sg.basename(this.path,this.extname):void 0}set stem(e){v8(e,"stem"),y8(e,"stem"),this.path=Sg.join(this.dirname||"",e+(this.extname||""))}fail(e,t,i){const r=this.message(e,t,i);throw r.fatal=!0,r}info(e,t,i){const r=this.message(e,t,i);return r.fatal=void 0,r}message(e,t,i){const r=new HA(e,t,i);return this.path&&(r.name=this.path+":"+r.name,r.file=this.path),r.fatal=!1,this.messages.push(r),r}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function y8(n,e){if(n&&n.includes(Sg.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+Sg.sep+"`")}function v8(n,e){if(!n)throw new Error("`"+e+"` cannot be empty")}function iQ(n,e){if(!n)throw new Error("Setting `"+e+"` requires `path` to be set too")}function G7e(n){return!!(n&&typeof n=="object"&&"byteLength"in n&&"byteOffset"in n)}const W7e=(function(n){const i=this.constructor.prototype,r=i[n],o=function(){return r.apply(o,arguments)};return Object.setPrototypeOf(o,i),o}),Q7e={}.hasOwnProperty;class zK extends W7e{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=k7e()}copy(){const e=new zK;let t=-1;for(;++t<this.attachers.length;){const i=this.attachers[t];e.use(...i)}return e.data(m8(!0,{},this.namespace)),e}data(e,t){return typeof e=="string"?arguments.length===2?(_8("data",this.frozen),this.namespace[e]=t,this):Q7e.call(this.namespace,e)&&this.namespace[e]||void 0:e?(_8("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[t,...i]=this.attachers[this.freezeIndex];if(i[0]===!1)continue;i[0]===!0&&(i[0]=void 0);const r=t.call(e,...i);typeof r=="function"&&this.transformers.use(r)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const t=zM(e),i=this.parser||this.Parser;return b8("parse",i),i(String(t),t)}process(e,t){const i=this;return this.freeze(),b8("process",this.parser||this.Parser),C8("process",this.compiler||this.Compiler),t?r(void 0,t):new Promise(r);function r(o,s){const a=zM(e),c=i.parse(a);i.run(c,a,function(m,y,M){if(m||!y||!M)return h(m);const x=y,T=i.stringify(x,M);$7e(T)?M.value=T:M.result=T,h(m,M)});function h(m,y){m||!y?s(m):o?o(y):t(void 0,y)}}}processSync(e){let t=!1,i;return this.freeze(),b8("processSync",this.parser||this.Parser),C8("processSync",this.compiler||this.Compiler),this.process(e,r),oQ("processSync","process",t),i;function r(o,s){t=!0,tQ(o),i=s}}run(e,t,i){rQ(e),this.freeze();const r=this.transformers;return!i&&typeof t=="function"&&(i=t,t=void 0),i?o(void 0,i):new Promise(o);function o(s,a){const c=zM(t);r.run(e,c,h);function h(m,y,M){const x=y||e;m?a(m):s?s(x):i(void 0,x,M)}}}runSync(e,t){let i=!1,r;return this.run(e,t,o),oQ("runSync","run",i),r;function o(s,a){tQ(s),r=a,i=!0}}stringify(e,t){this.freeze();const i=zM(t),r=this.compiler||this.Compiler;return C8("stringify",r),rQ(e),r(e,i)}use(e,...t){const i=this.attachers,r=this.namespace;if(_8("use",this.frozen),e!=null)if(typeof e=="function")c(e,t);else if(typeof e=="object")Array.isArray(e)?a(e):s(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function o(h){if(typeof h=="function")c(h,[]);else if(typeof h=="object")if(Array.isArray(h)){const[m,...y]=h;c(m,y)}else s(h);else throw new TypeError("Expected usable value, not `"+h+"`")}function s(h){if(!("plugins"in h)&&!("settings"in h))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(h.plugins),h.settings&&(r.settings=m8(!0,r.settings,h.settings))}function a(h){let m=-1;if(h!=null)if(Array.isArray(h))for(;++m<h.length;){const y=h[m];o(y)}else throw new TypeError("Expected a list of plugins, not `"+h+"`")}function c(h,m){let y=-1,M=-1;for(;++y<i.length;)if(i[y][0]===h){M=y;break}if(M===-1)i.push([h,...m]);else if(m.length>0){let[x,...T]=m;const P=i[M][1];ED(P)&&ED(x)&&(x=m8(!0,P,x)),i[M]=[h,x,...T]}}}}const q7e=new zK().freeze();function b8(n,e){if(typeof e!="function")throw new TypeError("Cannot `"+n+"` without `parser`")}function C8(n,e){if(typeof e!="function")throw new TypeError("Cannot `"+n+"` without `compiler`")}function _8(n,e){if(e)throw new Error("Cannot call `"+n+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function rQ(n){if(!ED(n)||typeof n.type!="string")throw new TypeError("Expected node, got `"+n+"`")}function oQ(n,e,t){if(!t)throw new Error("`"+n+"` finished async. Use `"+e+"` instead")}function zM(n){return Y7e(n)?n:new Poe(n)}function Y7e(n){return!!(n&&typeof n=="object"&&"message"in n&&"messages"in n)}function $7e(n){return typeof n=="string"||V7e(n)}function V7e(n){return!!(n&&typeof n=="object"&&"byteLength"in n&&"byteOffset"in n)}const H7e="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",sQ=[],aQ={allowDangerousHtml:!0},Z7e=/^(https?|ircs?|mailto|xmpp)$/i,X7e=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function J7e(n){const e=eIe(n),t=tIe(n);return nIe(e.runSync(e.parse(t),t),n)}function eIe(n){const e=n.rehypePlugins||sQ,t=n.remarkPlugins||sQ,i=n.remarkRehypeOptions?{...n.remarkRehypeOptions,...aQ}:aQ;return q7e().use(R8e).use(t).use(O7e,i).use(e)}function tIe(n){const e=n.children||"",t=new Poe;return typeof e=="string"&&(t.value=e),t}function nIe(n,e){const t=e.allowedElements,i=e.allowElement,r=e.components,o=e.disallowedElements,s=e.skipHtml,a=e.unwrapDisallowed,c=e.urlTransform||iIe;for(const m of X7e)Object.hasOwn(e,m.from)&&(""+m.from+(m.to?"use `"+m.to+"` instead":"remove it")+H7e+m.id,void 0);return Doe(n,h),hOe(n,{Fragment:ie.Fragment,components:r,ignoreInvalidStyle:!0,jsx:ie.jsx,jsxs:ie.jsxs,passKeys:!0,passNode:!0});function h(m,y,M){if(m.type==="raw"&&M&&typeof y=="number")return s?M.children.splice(y,1):M.children[y]={type:"text",value:m.value},y;if(m.type==="element"){let x;for(x in h8)if(Object.hasOwn(h8,x)&&Object.hasOwn(m.properties,x)){const T=m.properties[x],P=h8[x];(P===null||P.includes(m.tagName))&&(m.properties[x]=c(String(T||""),x,m))}}if(m.type==="element"){let x=t?!t.includes(m.tagName):o?o.includes(m.tagName):!1;if(!x&&i&&typeof y=="number"&&(x=!i(m,y,M)),x&&M&&typeof y=="number")return a&&m.children?M.children.splice(y,1,...m.children):M.children.splice(y,1),y}}}function iIe(n){const e=n.indexOf(":"),t=n.indexOf("?"),i=n.indexOf("#"),r=n.indexOf("/");return e===-1||r!==-1&&e>r||t!==-1&&e>t||i!==-1&&e>i||Z7e.test(n.slice(0,e))?n:""}function to(){var n="/home/runner/work/maputnik/maputnik/src/components/Doc.tsx",e="a7edc49bc306eb20f0cc16abd4c84f78b7cc6807",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/Doc.tsx",statementMap:{0:{start:{line:4,column:16},end:{line:8,column:1}},1:{start:{line:11,column:26},end:{line:11,column:36}},2:{start:{line:12,column:52},end:{line:12,column:61}},3:{start:{line:13,column:23},end:{line:13,column:47}},4:{start:{line:14,column:25},end:{line:16,column:26}},5:{start:{line:17,column:28},end:{line:23,column:5}},6:{start:{line:18,column:27},end:{line:18,column:46}},7:{start:{line:19,column:6},end:{line:21,column:7}},8:{start:{line:20,column:8},end:{line:20,column:148}},9:{start:{line:22,column:6},end:{line:22,column:19}},10:{start:{line:24,column:4},end:{line:57,column:9}},11:{start:{line:27,column:76},end:{line:27,column:132}},12:{start:{line:30,column:10},end:{line:33,column:20}},13:{start:{line:40,column:12},end:{line:40,column:75}},14:{start:{line:44,column:10},end:{line:53,column:20}},15:{start:{line:47,column:14},end:{line:51,column:15}},16:{start:{line:48,column:16},end:{line:48,column:98}},17:{start:{line:50,column:16},end:{line:50,column:72}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:58,column:3}},line:10},1:{name:"(anonymous_1)",decl:{start:{line:17,column:28},end:{line:17,column:29}},loc:{start:{line:17,column:39},end:{line:23,column:5}},line:17},2:{name:"(anonymous_2)",decl:{start:{line:27,column:13},end:{line:27,column:14}},loc:{start:{line:27,column:76},end:{line:27,column:132}},line:27},3:{name:"(anonymous_3)",decl:{start:{line:29,column:119},end:{line:29,column:120}},loc:{start:{line:29,column:137},end:{line:34,column:9}},line:29},4:{name:"(anonymous_4)",decl:{start:{line:39,column:37},end:{line:39,column:38}},loc:{start:{line:39,column:49},end:{line:41,column:11}},line:39},5:{name:"(anonymous_5)",decl:{start:{line:43,column:80},end:{line:43,column:81}},loc:{start:{line:43,column:103},end:{line:54,column:9}},line:43},6:{name:"(anonymous_6)",decl:{start:{line:46,column:37},end:{line:46,column:38}},loc:{start:{line:46,column:44},end:{line:52,column:13}},line:46}},branchMap:{0:{loc:{start:{line:14,column:25},end:{line:16,column:26}},type:"binary-expr",locations:[{start:{line:14,column:25},end:{line:14,column:33}},{start:{line:16,column:4},end:{line:16,column:26}}],line:14},1:{loc:{start:{line:19,column:6},end:{line:21,column:7}},type:"if",locations:[{start:{line:19,column:6},end:{line:21,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:19},2:{loc:{start:{line:25,column:6},end:{line:35,column:10}},type:"binary-expr",locations:[{start:{line:25,column:6},end:{line:25,column:9}},{start:{line:25,column:29},end:{line:35,column:10}}],line:25},3:{loc:{start:{line:29,column:8},end:{line:34,column:13}},type:"binary-expr",locations:[{start:{line:29,column:8},end:{line:29,column:20}},{start:{line:29,column:40},end:{line:34,column:13}}],line:29},4:{loc:{start:{line:36,column:6},end:{line:55,column:13}},type:"binary-expr",locations:[{start:{line:36,column:6},end:{line:36,column:16}},{start:{line:36,column:36},end:{line:55,column:13}}],line:36},5:{loc:{start:{line:47,column:14},end:{line:51,column:15}},type:"if",locations:[{start:{line:47,column:14},end:{line:51,column:15}},{start:{line:49,column:21},end:{line:51,column:15}}],line:47},6:{loc:{start:{line:56,column:6},end:{line:56,column:215}},type:"binary-expr",locations:[{start:{line:56,column:6},end:{line:56,column:12}},{start:{line:56,column:16},end:{line:56,column:30}},{start:{line:56,column:50},end:{line:56,column:215}}],line:56}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Doc.tsx"],names:[],mappings:"AA0Ce,SAMT,UANS,KAkBK,YAlBL;AA1Cf,OAAO,WAAW;AAClB,OAAO,cAAc;AAErB,MAAM,UAAU;AAAA,EACd,IAAI;AAAA,EACJ,SAAS;AAAA,EACT,KAAK;AACP;AAkBA,qBAAqB,YAAY,MAAM,UAAoB;AAAA,EACzD,SAAU;AACR,UAAM,EAAC,UAAS,IAAI,KAAK;AAEzB,UAAM,EAAC,KAAK,QAAQ,QAAQ,eAAc,IAAI;AAC9C,UAAM,aAAa,UAAU,aAAa;AAE1C,UAAM,eACJ,CAAC,CAAC;AAAA;AAAA,IAGF,CAAC,MAAM,QAAQ,MAAM;AAGvB,UAAM,kBAAkB,CAAC,UAAkB;AACzC,YAAM,eAAe,MAAM,YAAY;AACvC,UAAI,aAAa,WAAW,UAAU,GAAG;AACvC,eAAO,oBAAC,OAAE,MAAM,cAAc,QAAO,UAAS,KAAI,cAAc,gBAAM,aAAa,MAAM,GAAG,EAAE,IAAI,GAAE;AAAA,MACtG;AACA,aAAO;AAAA,IACT;AAEA,WACE,iCACG;AAAA,aACC,qBAAC,SAAI,WAAU,WACb;AAAA,4BAAC,SAAI,WAAU,gBAAe,eAAY,kBACxC,8BAAC,YAAS,YAAY;AAAA,UACpB,GAAG,CAAC,EAAC,MAAM,OAAO,MAAM,UAAU,GAAG,MAAK,MAAM,oBAAC,OAAE,MAAY,QAAO,UAAU,GAAG,OAAQ,UAAS;AAAA,QACtG,GAAI,eAAI,GACV;AAAA,QACC,gBACC,oBAAC,QAAG,WAAU,mBACX,iBAAO,QAAQ,MAAM,EAAE,IAAI,CAAC,CAAC,KAAK,KAAK,MAAM;AAC5C,iBACE,qBAAC,QACC;AAAA,gCAAC,UAAM,eAAK,UAAU,GAAG,GAAE;AAAA,YAC3B,oBAAC,SAAK,gBAAM,KAAI;AAAA,eAFT,GAGT;AAAA,QAEJ,CAAC,GACH;AAAA,SAEJ;AAAA,MAED,cACC,oBAAC,SAAI,WAAU,wBACb,+BAAC,WAAM,WAAU,+BACf;AAAA,4BAAC,WACC,+BAAC,QACC;AAAA,8BAAC,QAAG;AAAA,UACH,OAAO,OAAO,OAAO,EAAE,IAAI,YAAU;AACpC,mBAAO,oBAAC,QAAiB,oBAAT,MAAgB;AAAA,UAClC,CAAC;AAAA,WACH,GACF;AAAA,QACA,oBAAC,WACE,iBAAO,QAAQ,UAAU,EAAE,IAAI,CAAC,CAAC,KAAK,UAAU,MAAM;AACrD,iBACE,qBAAC,QACC;AAAA,gCAAC,QAAI,eAAI;AAAA,YACR,OAAO,KAAK,OAAO,EAAE,IAAI,CAAC,MAAM;AAC/B,kBAAI,OAAO,UAAU,eAAe,KAAK,YAAY,CAAC,GAAG;AACvD,uBAAO,oBAAC,QAAY,0BAAgB,WAAW,CAAyB,CAAC,KAAzD,CAA2D;AAAA,cAC7E,OACK;AACH,uBAAO,oBAAC,QAAW,kBAAH,CAAK;AAAA,cACvB;AAAA,YACF,CAAC;AAAA,eATM,GAUT;AAAA,QAEJ,CAAC,GACH;AAAA,SACF,GACF;AAAA,MAED,UAAU,kBACT,oBAAC,SAAI,WAAU,uBACb,8BAAC,OAAE,MAAM,QAAS,QAAO,UAAS,KAAI,cAAc,0BAAe,GACrE;AAAA,OAEJ;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a7edc49bc306eb20f0cc16abd4c84f78b7cc6807"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return to=function(){return s},s}to();const lQ=(to().s[0]++,{js:"JS",android:"Android",ios:"iOS"});class O6 extends En.Component{render(){to().f[0]++;const{fieldSpec:e}=(to().s[1]++,this.props),{doc:t,values:i,docUrl:r,docUrlLinkText:o}=(to().s[2]++,e),s=(to().s[3]++,e["sdk-support"]),a=(to().s[4]++,to().b[0][0]++,!!i&&(to().b[0][1]++,!Array.isArray(i)));to().s[5]++;const c=h=>{to().f[1]++;const m=(to().s[6]++,h.toLowerCase());return to().s[7]++,m.startsWith("https://")?(to().b[1][0]++,to().s[8]++,ie.jsx("a",{href:m,target:"_blank",rel:"noreferrer",children:"#"+m.split("/").pop()})):(to().b[1][1]++,to().s[9]++,h)};return to().s[10]++,ie.jsxs(ie.Fragment,{children:[(to().b[2][0]++,t&&(to().b[2][1]++,ie.jsxs("div",{className:"SpecDoc",children:[ie.jsx("div",{className:"SpecDoc__doc","data-wd-key":"spec-field-doc",children:ie.jsx(J7e,{components:{a:({node:h,href:m,children:y,...M})=>(to().f[2]++,to().s[11]++,ie.jsx("a",{href:m,target:"_blank",...M,children:y}))},children:t})}),(to().b[3][0]++,a&&(to().b[3][1]++,ie.jsx("ul",{className:"SpecDoc__values",children:Object.entries(i).map(([h,m])=>(to().f[3]++,to().s[12]++,ie.jsxs("li",{children:[ie.jsx("code",{children:JSON.stringify(h)}),ie.jsx("div",{children:m.doc})]},h)))})))]}))),(to().b[4][0]++,s&&(to().b[4][1]++,ie.jsx("div",{className:"SpecDoc__sdk-support",children:ie.jsxs("table",{className:"SpecDoc__sdk-support__table",children:[ie.jsx("thead",{children:ie.jsxs("tr",{children:[ie.jsx("th",{}),Object.values(lQ).map(h=>(to().f[4]++,to().s[13]++,ie.jsx("th",{children:h},h)))]})}),ie.jsx("tbody",{children:Object.entries(s).map(([h,m])=>(to().f[5]++,to().s[14]++,ie.jsxs("tr",{children:[ie.jsx("td",{children:h}),Object.keys(lQ).map(y=>(to().f[6]++,to().s[15]++,Object.prototype.hasOwnProperty.call(m,y)?(to().b[5][0]++,to().s[16]++,ie.jsx("td",{children:c(m[y])},y)):(to().b[5][1]++,to().s[17]++,ie.jsx("td",{children:"no"},y))))]},h)))})]})}))),(to().b[6][0]++,r&&(to().b[6][1]++,o)&&(to().b[6][2]++,ie.jsx("div",{className:"SpecDoc__learn-more",children:ie.jsx("a",{href:r,target:"_blank",rel:"noreferrer",children:o})})))]})}}function Hr(){var n="/home/runner/work/maputnik/maputnik/src/components/Block.tsx",e="a026f5c10cd11169be04acaaf924d5e996792a37",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/Block.tsx",statementMap:{0:{start:{line:7,column:13},end:{line:7,column:17}},1:{start:{line:9,column:4},end:{line:9,column:17}},2:{start:{line:10,column:4},end:{line:12,column:6}},3:{start:{line:15,column:18},end:{line:15,column:32}},4:{start:{line:16,column:4},end:{line:18,column:5}},5:{start:{line:17,column:6},end:{line:17,column:64}},6:{start:{line:20,column:16},end:{line:24,column:3}},7:{start:{line:21,column:4},end:{line:23,column:7}},8:{start:{line:31,column:17},end:{line:40,column:3}},9:{start:{line:32,column:15},end:{line:32,column:39}},10:{start:{line:33,column:21},end:{line:33,column:48}},11:{start:{line:34,column:4},end:{line:36,column:5}},12:{start:{line:35,column:6},end:{line:35,column:30}},13:{start:{line:37,column:4},end:{line:39,column:5}},14:{start:{line:38,column:6},end:{line:38,column:29}},15:{start:{line:42,column:4},end:{line:78,column:6}},16:{start:{line:66,column:12},end:{line:66,column:31}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:21},end:{line:13,column:3}},line:8},1:{name:"(anonymous_1)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:14},end:{line:19,column:3}},line:14},2:{name:"(anonymous_2)",decl:{start:{line:20,column:16},end:{line:20,column:17}},loc:{start:{line:20,column:25},end:{line:24,column:3}},line:20},3:{name:"(anonymous_3)",decl:{start:{line:31,column:17},end:{line:31,column:18}},loc:{start:{line:31,column:28},end:{line:40,column:3}},line:31},4:{name:"(anonymous_4)",decl:{start:{line:41,column:2},end:{line:41,column:3}},loc:{start:{line:41,column:11},end:{line:79,column:3}},line:41},5:{name:"(anonymous_5)",decl:{start:{line:65,column:87},end:{line:65,column:88}},loc:{start:{line:65,column:95},end:{line:67,column:11}},line:65}},branchMap:{0:{loc:{start:{line:16,column:4},end:{line:18,column:5}},type:"if",locations:[{start:{line:16,column:4},end:{line:18,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:16},1:{loc:{start:{line:17,column:33},end:{line:17,column:62}},type:"cond-expr",locations:[{start:{line:17,column:48},end:{line:17,column:54}},{start:{line:17,column:57},end:{line:17,column:62}}],line:17},2:{loc:{start:{line:34,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:34,column:4},end:{line:36,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:34},3:{loc:{start:{line:34,column:8},end:{line:34,column:66}},type:"binary-expr",locations:[{start:{line:34,column:8},end:{line:34,column:53}},{start:{line:34,column:57},end:{line:34,column:66}}],line:34},4:{loc:{start:{line:37,column:4},end:{line:39,column:5}},type:"if",locations:[{start:{line:37,column:4},end:{line:39,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},5:{loc:{start:{line:55,column:10},end:{line:62,column:14}},type:"binary-expr",locations:[{start:{line:55,column:10},end:{line:55,column:30}},{start:{line:55,column:50},end:{line:62,column:14}}],line:55},6:{loc:{start:{line:63,column:10},end:{line:63,column:134}},type:"binary-expr",locations:[{start:{line:63,column:10},end:{line:63,column:31}},{start:{line:63,column:51},end:{line:63,column:134}}],line:63},7:{loc:{start:{line:68,column:10},end:{line:75,column:11}},type:"binary-expr",locations:[{start:{line:68,column:10},end:{line:68,column:30}},{start:{line:68,column:50},end:{line:75,column:11}}],line:68},8:{loc:{start:{line:72,column:32},end:{line:72,column:64}},type:"cond-expr",locations:[{start:{line:72,column:53},end:{line:72,column:55}},{start:{line:72,column:58},end:{line:72,column:64}}],line:72}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Block.tsx"],names:[],mappings:"AA+DW,SAYD,KAZC;AA/DX,OAAO,WAA8E;AACrF,OAAO,gBAAgB;AACvB,OAAO,mBAAmB;AAC1B,OAAO,SAAS;AAkBhB,qBAAqB,cAAc,MAAM,UAAkC;AAAA,EACzE,WAAkC;AAAA,EAElC,YAAa,OAAmB;AAC9B,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,SAAS;AAAA,IACX;AAAA,EACF;AAAA,EAEA,SAAS,GAAwE;AAC/E,UAAM,QAAQ,EAAE,OAAO;AACvB,QAAI,KAAK,MAAM,UAAU;AACvB,aAAO,KAAK,MAAM,SAAS,UAAU,KAAK,SAAY,KAAK;AAAA,IAC7D;AAAA,EACF;AAAA,EAEA,cAAc,CAAC,QAAiB;AAC9B,SAAK,SAAS;AAAA,MACZ,SAAS;AAAA,IACX,CAAC;AAAA,EACH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQA,eAAe,CAAC,UAAoC;AAClD,UAAM,KAAK,MAAM,YAAY;AAC7B,UAAM,WAAW,KAAK,UAAU,SAAS,EAAE;AAE3C,QAAI,MAAM,YAAY,OAAO,aAAa,WAAW,CAAC,UAAU;AAC9D,YAAM,gBAAgB;AAAA,IACxB;AACA,QAAI,MAAM,YAAY,OAAO,aAAa,KAAK;AAC7C,YAAM,eAAe;AAAA,IACvB;AAAA,EACF;AAAA,EAEA,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QAAM,OAAO,KAAK,MAAM;AAAA,QAC9B,eAAa,KAAK,MAAM,aAAa;AAAA,QACrC,WAAW,WAAW;AAAA,UACpB,wBAAwB;AAAA,UACxB,8BAA8B,KAAK,MAAM;AAAA,UACzC,yBAAyB,KAAK,MAAM;AAAA,UACpC,+BAA+B,KAAK,MAAM;AAAA,QAC5C,CAAC;AAAA,QACD,SAAS,KAAK;AAAA,QAEb;AAAA,eAAK,MAAM,aACV,oBAAC,SAAI,WAAU,8BACb;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,KAAK,MAAM;AAAA,cAClB,aAAa,KAAK;AAAA,cAClB,WAAW,KAAK,MAAM;AAAA;AAAA,UACxB,GACF;AAAA,UAED,CAAC,KAAK,MAAM,aACX,oBAAC,SAAI,WAAU,8BACZ,eAAK,MAAM,OACd;AAAA,UAEF,oBAAC,SAAI,WAAU,+BACZ,eAAK,MAAM,QACd;AAAA,UACA,oBAAC,SAAI,WAAU,gCAA+B,KAAK,QAAM;AAAC,iBAAK,WAAW;AAAA,UAAG,GAC1E,eAAK,MAAM,UACd;AAAA,UACC,KAAK,MAAM,aACV;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,OAAO,EAAC,SAAS,KAAK,MAAM,UAAU,KAAK,OAAM;AAAA,cAEjD,8BAAC,OAAI,WAAW,KAAK,MAAM,WAAW;AAAA;AAAA,UACxC;AAAA;AAAA;AAAA,IAEJ;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a026f5c10cd11169be04acaaf924d5e996792a37"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Hr=function(){return s},s}Hr();class Ls extends En.Component{_blockEl=(Hr().s[0]++,null);constructor(e){Hr().f[0]++,Hr().s[1]++,super(e),Hr().s[2]++,this.state={showDoc:!1}}onChange(e){Hr().f[1]++;const t=(Hr().s[3]++,e.target.value);if(Hr().s[4]++,this.props.onChange)return Hr().b[0][0]++,Hr().s[5]++,this.props.onChange(t===""?(Hr().b[1][0]++,void 0):(Hr().b[1][1]++,t));Hr().b[0][1]++}onToggleDoc=(Hr().s[6]++,e=>{Hr().f[2]++,Hr().s[7]++,this.setState({showDoc:e})});onLabelClick=(Hr().s[8]++,e=>{Hr().f[3]++;const t=(Hr().s[9]++,e.nativeEvent.target),i=(Hr().s[10]++,this._blockEl?.contains(t));Hr().s[11]++,Hr().b[3][0]++,e.nativeEvent.target.nodeName!=="INPUT"&&(Hr().b[3][1]++,!i)?(Hr().b[2][0]++,Hr().s[12]++,e.stopPropagation()):Hr().b[2][1]++,Hr().s[13]++,e.nativeEvent.target.nodeName!=="A"?(Hr().b[4][0]++,Hr().s[14]++,e.preventDefault()):Hr().b[4][1]++});render(){return Hr().f[4]++,Hr().s[15]++,ie.jsxs("label",{style:this.props.style,"data-wd-key":this.props["data-wd-key"],className:u0({"maputnik-input-block":!0,"maputnik-input-block--wide":this.props.wideMode,"maputnik-action-block":this.props.action,"maputnik-input-block--error":this.props.error}),onClick:this.onLabelClick,children:[(Hr().b[5][0]++,this.props.fieldSpec&&(Hr().b[5][1]++,ie.jsx("div",{className:"maputnik-input-block-label",children:ie.jsx(SK,{label:this.props.label,onToggleDoc:this.onToggleDoc,fieldSpec:this.props.fieldSpec})}))),(Hr().b[6][0]++,!this.props.fieldSpec&&(Hr().b[6][1]++,ie.jsx("div",{className:"maputnik-input-block-label",children:this.props.label}))),ie.jsx("div",{className:"maputnik-input-block-action",children:this.props.action}),ie.jsx("div",{className:"maputnik-input-block-content",ref:e=>{Hr().f[5]++,Hr().s[16]++,this._blockEl=e},children:this.props.children}),(Hr().b[7][0]++,this.props.fieldSpec&&(Hr().b[7][1]++,ie.jsx("div",{className:"maputnik-doc-inline",style:{display:this.state.showDoc?(Hr().b[8][0]++,""):(Hr().b[8][1]++,"none")},children:ie.jsx(O6,{fieldSpec:this.props.fieldSpec})})))]})}}function gA(){var n="/home/runner/work/maputnik/maputnik/src/components/InputSelect.tsx",e="1b99a181d4a9dd7b629113889cbb71c3a4bb4d42",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputSelect.tsx",statementMap:{0:{start:{line:5,column:18},end:{line:5,column:36}},1:{start:{line:6,column:4},end:{line:8,column:5}},2:{start:{line:7,column:6},end:{line:7,column:43}},3:{start:{line:7,column:35},end:{line:7,column:41}},4:{start:{line:9,column:4},end:{line:21,column:6}},5:{start:{line:17,column:25},end:{line:17,column:60}},6:{start:{line:19,column:64},end:{line:19,column:115}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:2},end:{line:4,column:3}},loc:{start:{line:4,column:11},end:{line:22,column:3}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:7,column:28},end:{line:7,column:29}},loc:{start:{line:7,column:35},end:{line:7,column:41}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:17,column:18},end:{line:17,column:19}},loc:{start:{line:17,column:25},end:{line:17,column:60}},line:17},3:{name:"(anonymous_3)",decl:{start:{line:19,column:30},end:{line:19,column:31}},loc:{start:{line:19,column:64},end:{line:19,column:115}},line:19}},branchMap:{0:{loc:{start:{line:6,column:4},end:{line:8,column:5}},type:"if",locations:[{start:{line:6,column:4},end:{line:8,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:6},1:{loc:{start:{line:6,column:8},end:{line:6,column:56}},type:"binary-expr",locations:[{start:{line:6,column:8},end:{line:6,column:26}},{start:{line:6,column:30},end:{line:6,column:56}}],line:6}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0,1:0,2:0,3:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputSelect.tsx"],names:[],mappings:"AA4BsC;AA5BtC,OAAO,WAAW;AAYlB,qBAAqB,oBAAoB,MAAM,UAA4B;AAAA,EACzE,SAAS;AACP,QAAI,UAAU,KAAK,MAAM;AACzB,QAAG,QAAQ,SAAS,KAAK,CAAC,MAAM,QAAQ,QAAQ,CAAC,CAAC,GAAG;AACnD,gBAAU,QAAQ,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;AAAA,IACrC;AAEA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,eAAa,KAAK,MAAM,aAAa;AAAA,QACrC,OAAO,KAAK,MAAM;AAAA,QAClB,OAAO,KAAK,MAAM;AAAA,QAClB,OAAO,KAAK,MAAM;AAAA,QAClB,UAAU,OAAK,KAAK,MAAM,SAAS,EAAE,OAAO,KAAK;AAAA,QACjD,cAAY,KAAK,MAAM,YAAY;AAAA,QAEjC,kBAAQ,IAAI,CAAC,CAAC,KAAK,KAAK,MAAM,oBAAC,YAAiB,OAAO,KAAM,mBAAlB,GAAwB,CAAS;AAAA;AAAA,IAChF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"1b99a181d4a9dd7b629113889cbb71c3a4bb4d42"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return gA=function(){return s},s}gA();class rC extends En.Component{render(){gA().f[0]++;let e=(gA().s[0]++,this.props.options);return gA().s[1]++,gA().b[1][0]++,e.length>0&&(gA().b[1][1]++,!Array.isArray(e[0]))?(gA().b[0][0]++,gA().s[2]++,e=e.map(t=>(gA().f[1]++,gA().s[3]++,[t,t]))):gA().b[0][1]++,gA().s[4]++,ie.jsx("select",{className:"maputnik-select","data-wd-key":this.props["data-wd-key"],style:this.props.style,title:this.props.title,value:this.props.value,onChange:t=>(gA().f[2]++,gA().s[5]++,this.props.onChange(t.target.value)),"aria-label":this.props["aria-label"],children:e.map(([t,i])=>(gA().f[3]++,gA().s[6]++,ie.jsx("option",{value:t,children:i},t)))})}}function ur(){var n="/home/runner/work/maputnik/maputnik/src/components/InputString.tsx",e="ffe977722e3215b5f6718c464b93680839810a41",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputString.tsx",statementMap:{0:{start:{line:3,column:24},end:{line:6,column:3}},1:{start:{line:8,column:4},end:{line:8,column:17}},2:{start:{line:9,column:4},end:{line:12,column:6}},3:{start:{line:15,column:4},end:{line:19,column:5}},4:{start:{line:16,column:6},end:{line:18,column:8}},5:{start:{line:20,column:4},end:{line:20,column:14}},6:{start:{line:25,column:4},end:{line:36,column:5}},7:{start:{line:26,column:6},end:{line:26,column:23}},8:{start:{line:27,column:6},end:{line:30,column:8}},9:{start:{line:32,column:6},end:{line:32,column:20}},10:{start:{line:33,column:6},end:{line:35,column:8}},11:{start:{line:37,column:4},end:{line:39,column:5}},12:{start:{line:38,column:6},end:{line:38,column:48}},13:{start:{line:40,column:4},end:{line:70,column:7}},14:{start:{line:51,column:8},end:{line:56,column:11}},15:{start:{line:55,column:10},end:{line:55,column:71}},16:{start:{line:55,column:34},end:{line:55,column:71}},17:{start:{line:59,column:8},end:{line:62,column:9}},18:{start:{line:60,column:10},end:{line:60,column:44}},19:{start:{line:61,column:10},end:{line:61,column:73}},20:{start:{line:61,column:35},end:{line:61,column:73}},21:{start:{line:65,column:8},end:{line:67,column:9}},22:{start:{line:66,column:10},end:{line:66,column:48}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:13},end:{line:4,column:14}},loc:{start:{line:4,column:19},end:{line:5,column:5}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:21},end:{line:13,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:48},end:{line:21,column:3}},line:14},3:{name:"(anonymous_3)",decl:{start:{line:22,column:2},end:{line:22,column:3}},loc:{start:{line:22,column:11},end:{line:71,column:3}},line:22},4:{name:"(anonymous_4)",decl:{start:{line:50,column:16},end:{line:50,column:17}},loc:{start:{line:50,column:23},end:{line:57,column:7}},line:50},5:{name:"(anonymous_5)",decl:{start:{line:54,column:11},end:{line:54,column:12}},loc:{start:{line:54,column:17},end:{line:56,column:9}},line:54},6:{name:"(anonymous_6)",decl:{start:{line:58,column:14},end:{line:58,column:15}},loc:{start:{line:58,column:20},end:{line:63,column:7}},line:58},7:{name:"(anonymous_7)",decl:{start:{line:64,column:17},end:{line:64,column:18}},loc:{start:{line:64,column:24},end:{line:68,column:7}},line:64}},branchMap:{0:{loc:{start:{line:11,column:13},end:{line:11,column:30}},type:"binary-expr",locations:[{start:{line:11,column:13},end:{line:11,column:24}},{start:{line:11,column:28},end:{line:11,column:30}}],line:11},1:{loc:{start:{line:15,column:4},end:{line:19,column:5}},type:"if",locations:[{start:{line:15,column:4},end:{line:19,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:15},2:{loc:{start:{line:25,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:25,column:4},end:{line:36,column:5}},{start:{line:31,column:11},end:{line:36,column:5}}],line:25},3:{loc:{start:{line:37,column:4},end:{line:39,column:5}},type:"if",locations:[{start:{line:37,column:4},end:{line:39,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},4:{loc:{start:{line:43,column:18},end:{line:43,column:125}},type:"cond-expr",locations:[{start:{line:43,column:83},end:{line:43,column:104}},{start:{line:43,column:107},end:{line:43,column:125}}],line:43},5:{loc:{start:{line:47,column:13},end:{line:47,column:64}},type:"cond-expr",locations:[{start:{line:47,column:43},end:{line:47,column:45}},{start:{line:47,column:48},end:{line:47,column:64}}],line:47},6:{loc:{start:{line:55,column:10},end:{line:55,column:71}},type:"if",locations:[{start:{line:55,column:10},end:{line:55,column:71}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:55},7:{loc:{start:{line:59,column:8},end:{line:62,column:9}},type:"if",locations:[{start:{line:59,column:8},end:{line:62,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:59},8:{loc:{start:{line:61,column:10},end:{line:61,column:73}},type:"if",locations:[{start:{line:61,column:10},end:{line:61,column:73}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:61},9:{loc:{start:{line:65,column:8},end:{line:67,column:9}},type:"if",locations:[{start:{line:65,column:8},end:{line:67,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:65},10:{loc:{start:{line:65,column:12},end:{line:65,column:51}},type:"binary-expr",locations:[{start:{line:65,column:12},end:{line:65,column:28}},{start:{line:65,column:32},end:{line:65,column:51}}],line:65}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputString.tsx"],names:[],mappings:"AAAA,OAAO,WAAW;AAsBlB,qBAAqB,oBAAoB,MAAM,UAA8C;AAAA,EAC3F,OAAO,eAAe;AAAA,IACpB,SAAS,MAAM;AAAA,IAAC;AAAA,EAClB;AAAA,EAEA,YAAY,OAAyB;AACnC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,SAAS;AAAA,MACT,OAAO,MAAM,SAAS;AAAA,IACxB;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAAmC,OAAyB;AAC1F,QAAI,CAAC,MAAM,SAAS;AAClB,aAAO;AAAA,QACL,OAAO,MAAM;AAAA,MACf;AAAA,IACF;AACA,WAAO,CAAC;AAAA,EACV;AAAA,EAEA,SAAS;AACP,QAAI;AACJ,QAAI;AAEJ,QAAG,KAAK,MAAM,OAAO;AACnB,YAAM;AACN,gBAAU;AAAA,QACR;AAAA,QACA;AAAA,MACF;AAAA,IACF,OACK;AACH,YAAM;AACN,gBAAU;AAAA,QACR;AAAA,MACF;AAAA,IACF;AAEA,QAAG,KAAK,MAAM,UAAU;AACtB,cAAQ,KAAK,2BAA2B;AAAA,IAC1C;AAEA,WAAO,MAAM,cAAc,KAAK;AAAA,MAC9B,cAAc,KAAK,MAAM,YAAY;AAAA,MACrC,eAAe,KAAK,MAAM,aAAa;AAAA,MACvC,YAAY,OAAO,UAAU,eAAe,KAAK,KAAK,OAAO,YAAY,IAAI,KAAK,MAAM,aAAa,EAAE,QAAQ;AAAA,MAC/G,UAAU,KAAK,MAAM;AAAA,MACrB,WAAW,QAAQ,KAAK,GAAG;AAAA,MAC3B,OAAO,KAAK,MAAM;AAAA,MAClB,OAAO,KAAK,MAAM,UAAU,SAAY,KAAK,KAAK,MAAM;AAAA,MACxD,aAAa,KAAK,MAAM;AAAA,MACxB,OAAO,KAAK,MAAM;AAAA,MAClB,UAAU,CAAC,MAA2E;AACpF,aAAK,SAAS;AAAA,UACZ,SAAS;AAAA,UACT,OAAO,EAAE,OAAO;AAAA,QAClB,GAAG,MAAM;AACP,cAAI,KAAK,MAAM,QAAS,MAAK,MAAM,QAAQ,KAAK,MAAM,KAAK;AAAA,QAC7D,CAAC;AAAA,MACH;AAAA,MACA,QAAQ,MAAM;AACZ,YAAG,KAAK,MAAM,UAAQ,KAAK,MAAM,OAAO;AACtC,eAAK,SAAS,EAAC,SAAS,MAAK,CAAC;AAC9B,cAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,KAAK,MAAM,KAAK;AAAA,QAC/D;AAAA,MACF;AAAA,MACA,WAAW,CAAC,MAAM;AAChB,YAAI,EAAE,YAAY,MAAM,KAAK,MAAM,UAAU;AAC3C,eAAK,MAAM,SAAS,KAAK,MAAM,KAAK;AAAA,QACtC;AAAA,MACF;AAAA,MACA,UAAU,KAAK,MAAM;AAAA,IACvB,CAAC;AAAA,EACH;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ffe977722e3215b5f6718c464b93680839810a41"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return ur=function(){return s},s}ur();class Bm extends En.Component{static defaultProps=(ur().s[0]++,{onInput:()=>{ur().f[0]++}});constructor(e){ur().f[1]++,ur().s[1]++,super(e),ur().s[2]++,this.state={editing:!1,value:(ur().b[0][0]++,e.value||(ur().b[0][1]++,""))}}static getDerivedStateFromProps(e,t){if(ur().f[2]++,ur().s[3]++,t.editing)ur().b[1][1]++;else return ur().b[1][0]++,ur().s[4]++,{value:e.value};return ur().s[5]++,{}}render(){ur().f[3]++;let e,t;return ur().s[6]++,this.props.multi?(ur().b[2][0]++,ur().s[7]++,e="textarea",ur().s[8]++,t=["maputnik-string","maputnik-string--multi"]):(ur().b[2][1]++,ur().s[9]++,e="input",ur().s[10]++,t=["maputnik-string"]),ur().s[11]++,this.props.disabled?(ur().b[3][0]++,ur().s[12]++,t.push("maputnik-string--disabled")):ur().b[3][1]++,ur().s[13]++,En.createElement(e,{"aria-label":this.props["aria-label"],"data-wd-key":this.props["data-wd-key"],spellCheck:Object.prototype.hasOwnProperty.call(this.props,"spellCheck")?(ur().b[4][0]++,this.props.spellCheck):(ur().b[4][1]++,e!=="input"),disabled:this.props.disabled,className:t.join(" "),style:this.props.style,value:this.state.value===void 0?(ur().b[5][0]++,""):(ur().b[5][1]++,this.state.value),placeholder:this.props.default,title:this.props.title,onChange:i=>{ur().f[4]++,ur().s[14]++,this.setState({editing:!0,value:i.target.value},()=>{ur().f[5]++,ur().s[15]++,this.props.onInput?(ur().b[6][0]++,ur().s[16]++,this.props.onInput(this.state.value)):ur().b[6][1]++})},onBlur:()=>{ur().f[6]++,ur().s[17]++,this.state.value!==this.props.value?(ur().b[7][0]++,ur().s[18]++,this.setState({editing:!1}),ur().s[19]++,this.props.onChange?(ur().b[8][0]++,ur().s[20]++,this.props.onChange(this.state.value)):ur().b[8][1]++):ur().b[7][1]++},onKeyDown:i=>{ur().f[7]++,ur().s[21]++,ur().b[10][0]++,i.keyCode===13&&(ur().b[10][1]++,this.props.onChange)?(ur().b[9][0]++,ur().s[22]++,this.props.onChange(this.state.value)):ur().b[9][1]++},required:this.props.required})}}function GA(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldType.tsx",e="599a12b14a1057b6bb554b629d0d81238d4af16c",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldType.tsx",statementMap:{0:{start:{line:8,column:26},end:{line:38,column:1}},1:{start:{line:16,column:22},end:{line:16,column:110}},2:{start:{line:16,column:73},end:{line:16,column:109}},3:{start:{line:17,column:2},end:{line:37,column:4}},4:{start:{line:39,column:18},end:{line:39,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:26},end:{line:8,column:27}},loc:{start:{line:15,column:6},end:{line:38,column:1}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:16,column:66},end:{line:16,column:67}},loc:{start:{line:16,column:73},end:{line:16,column:109}},line:16}},branchMap:{0:{loc:{start:{line:14,column:2},end:{line:14,column:18}},type:"default-arg",locations:[{start:{line:14,column:13},end:{line:14,column:18}}],line:14},1:{loc:{start:{line:16,column:34},end:{line:16,column:60}},type:"binary-expr",locations:[{start:{line:16,column:34},end:{line:16,column:54}},{start:{line:16,column:58},end:{line:16,column:60}}],line:16},2:{loc:{start:{line:25,column:8},end:{line:25,column:79}},type:"binary-expr",locations:[{start:{line:25,column:8},end:{line:25,column:16}},{start:{line:25,column:36},end:{line:25,column:79}}],line:25},3:{loc:{start:{line:26,column:8},end:{line:34,column:9}},type:"binary-expr",locations:[{start:{line:26,column:8},end:{line:26,column:17}},{start:{line:26,column:37},end:{line:34,column:9}}],line:26}},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0,1:0},b:{0:[0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldType.tsx"],names:[],mappings:"AA0BI,SAKI,KALJ;AAzBJ,SAAQ,UAAS;AACjB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,SAA+B,uBAAuB;AACtD,SAAS,iBAAiB;AAU1B,MAAM,oBAAsD,CAAC;AAAA,EAC3D;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA,WAAW;AACb,MAAM;AACJ,QAAM,cAAkC,OAAO,KAAK,GAAG,MAAM,KAAK,UAAU,CAAC,CAAC,EAAE,IAAI,OAAK,CAAC,GAAG,UAAU,EAAE,QAAQ,MAAM,GAAG,CAAC,CAAC,CAAC;AAC7H,SACE;AAAA,IAAC;AAAA;AAAA,MAAM,OAAO,EAAE,MAAM;AAAA,MAAG,WAAW,GAAG,MAAM;AAAA,MAC3C,eAAa;AAAA,MACb;AAAA,MAEC;AAAA,oBACC,oBAAC,eAAY,OAAc,UAAU,MAAM;AAAA,QAE5C,CAAC,YACA;AAAA,UAAC;AAAA;AAAA,YACC,SAAS;AAAA,YACT;AAAA,YACA;AAAA,YACA,eAAa,QAAQ;AAAA;AAAA,QACvB;AAAA;AAAA;AAAA,EAEJ;AAEJ;AAEA,MAAM,YAAY,gBAAgB,EAAE,iBAAiB;AACrD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"599a12b14a1057b6bb554b629d0d81238d4af16c"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return GA=function(){return s},s}GA();GA().s[0]++;const rIe=({t:n,value:e,wdKey:t,onChange:i,error:r,disabled:o=(GA().b[0][0]++,!1)})=>{GA().f[0]++;const s=(GA().s[1]++,Object.keys((GA().b[1][0]++,hp.layer.type.values||(GA().b[1][1]++,{}))).map(a=>(GA().f[1]++,GA().s[2]++,[a,Q4.startCase(a.replace(/-/g," "))])));return GA().s[3]++,ie.jsxs(Ls,{label:n("Type"),fieldSpec:hp.layer.type,"data-wd-key":t,error:r,children:[(GA().b[2][0]++,o&&(GA().b[2][1]++,ie.jsx(Bm,{value:e,disabled:!0}))),(GA().b[3][0]++,!o&&(GA().b[3][1]++,ie.jsx(rC,{options:s,onChange:i,value:e,"data-wd-key":t+".select"})))]})},Uoe=(GA().s[4]++,No()(rIe));function I4(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldId.tsx",e="faa51332e301a2db02ecf3d9679788ae744c6d26",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldId.tsx",statementMap:{0:{start:{line:5,column:16},end:{line:23,column:1}},1:{start:{line:6,column:2},end:{line:22,column:4}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:16},end:{line:5,column:17}},loc:{start:{line:5,column:27},end:{line:23,column:1}},line:5}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldId.tsx"],names:[],mappings:"AAkBM;AAjBN,OAAO,YAAY;AACnB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AASxB,MAAM,UAAkC,CAAC,UAAU;AACjD,SACE;AAAA,IAAC;AAAA;AAAA,MAAM,OAAM;AAAA,MAAK,WAAW,OAAO,MAAM;AAAA,MACxC,eAAa,MAAM;AAAA,MACnB,OAAO,MAAM;AAAA,MAEb;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,MAAM;AAAA,UACb,SAAS,MAAM;AAAA,UACf,eAAa,MAAM,QAAQ;AAAA;AAAA,MAC7B;AAAA;AAAA,EACF;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"faa51332e301a2db02ecf3d9679788ae744c6d26"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return I4=function(){return s},s}I4();I4().s[0]++;const Koe=n=>(I4().f[0]++,I4().s[1]++,ie.jsx(Ls,{label:"ID",fieldSpec:Zr.layer.id,"data-wd-key":n.wdKey,error:n.error,children:ie.jsx(Bm,{value:n.value,onInput:n.onChange,"data-wd-key":n.wdKey+".input"})}));function jM(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}function Sl(){return Sl=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Sl.apply(null,arguments)}var oIe=b1();const pr=eu(oIe);var x8={exports:{}},$s={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uQ;function sIe(){if(uQ)return $s;uQ=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),s=Symbol.for("react.context"),a=Symbol.for("react.server_context"),c=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),m=Symbol.for("react.suspense_list"),y=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),x=Symbol.for("react.offscreen"),T;T=Symbol.for("react.module.reference");function P(F){if(typeof F=="object"&&F!==null){var j=F.$$typeof;switch(j){case n:switch(F=F.type,F){case t:case r:case i:case h:case m:return F;default:switch(F=F&&F.$$typeof,F){case a:case s:case c:case M:case y:case o:return F;default:return j}}case e:return j}}}return $s.ContextConsumer=s,$s.ContextProvider=o,$s.Element=n,$s.ForwardRef=c,$s.Fragment=t,$s.Lazy=M,$s.Memo=y,$s.Portal=e,$s.Profiler=r,$s.StrictMode=i,$s.Suspense=h,$s.SuspenseList=m,$s.isAsyncMode=function(){return!1},$s.isConcurrentMode=function(){return!1},$s.isContextConsumer=function(F){return P(F)===s},$s.isContextProvider=function(F){return P(F)===o},$s.isElement=function(F){return typeof F=="object"&&F!==null&&F.$$typeof===n},$s.isForwardRef=function(F){return P(F)===c},$s.isFragment=function(F){return P(F)===t},$s.isLazy=function(F){return P(F)===M},$s.isMemo=function(F){return P(F)===y},$s.isPortal=function(F){return P(F)===e},$s.isProfiler=function(F){return P(F)===r},$s.isStrictMode=function(F){return P(F)===i},$s.isSuspense=function(F){return P(F)===h},$s.isSuspenseList=function(F){return P(F)===m},$s.isValidElementType=function(F){return typeof F=="string"||typeof F=="function"||F===t||F===r||F===i||F===h||F===m||F===x||typeof F=="object"&&F!==null&&(F.$$typeof===M||F.$$typeof===y||F.$$typeof===o||F.$$typeof===s||F.$$typeof===c||F.$$typeof===T||F.getModuleId!==void 0)},$s.typeOf=P,$s}var cQ;function aIe(){return cQ||(cQ=1,x8.exports=sIe()),x8.exports}aIe();const AQ=n=>typeof n=="object"&&n!=null&&n.nodeType===1,hQ=(n,e)=>(!e||n!=="hidden")&&n!=="visible"&&n!=="clip",NM=(n,e)=>{if(n.clientHeight<n.scrollHeight||n.clientWidth<n.scrollWidth){const t=getComputedStyle(n,null);return hQ(t.overflowY,e)||hQ(t.overflowX,e)||(i=>{const r=(o=>{if(!o.ownerDocument||!o.ownerDocument.defaultView)return null;try{return o.ownerDocument.defaultView.frameElement}catch{return null}})(i);return!!r&&(r.clientHeight<i.scrollHeight||r.clientWidth<i.scrollWidth)})(n)}return!1},GM=(n,e,t,i,r,o,s,a)=>o<n&&s>e||o>n&&s<e?0:o<=n&&a<=t||s>=e&&a>=t?o-n-i:s>e&&a<t||o<n&&a>t?s-e+r:0,lIe=n=>{const e=n.parentElement;return e??(n.getRootNode().host||null)},uIe=(n,e)=>{var t,i,r,o;if(typeof document>"u")return[];const{inline:s,boundary:a,skipOverflowHiddenElements:c}=e,h=typeof a=="function"?a:Ee=>Ee!==a;if(!AQ(n))throw new TypeError("Invalid target");const m=document.scrollingElement||document.documentElement,y=[];let M=n;for(;AQ(M)&&h(M);){if(M=lIe(M),M===m){y.push(M);break}M!=null&&M===document.body&&NM(M)&&!NM(document.documentElement)||M!=null&&NM(M,c)&&y.push(M)}const x=(i=(t=window.visualViewport)==null?void 0:t.width)!=null?i:innerWidth,T=(o=(r=window.visualViewport)==null?void 0:r.height)!=null?o:innerHeight,{scrollX:P,scrollY:F}=window,{height:j,width:q,top:V,right:H,bottom:Q,left:Y}=n.getBoundingClientRect(),{top:z,right:se,left:le}=(Ee=>{const Re=window.getComputedStyle(Ee);return{top:parseFloat(Re.scrollMarginTop)||0,right:parseFloat(Re.scrollMarginRight)||0,bottom:parseFloat(Re.scrollMarginBottom)||0,left:parseFloat(Re.scrollMarginLeft)||0}})(n);let pe=V-z,de=s==="center"?Y+q/2-le+se:s==="end"?H+se:Y-le;const ve=[];for(let Ee=0;Ee<y.length;Ee++){const Re=y[Ee],{height:je,width:Ie,top:qe,right:tt,bottom:At,left:ke}=Re.getBoundingClientRect();if(V>=0&&Y>=0&&Q<=T&&H<=x&&(Re===m&&!NM(Re)||V>=qe&&Q<=At&&Y>=ke&&H<=tt))return ve;const we=getComputedStyle(Re),ze=parseInt(we.borderLeftWidth,10),Me=parseInt(we.borderTopWidth,10),lt=parseInt(we.borderRightWidth,10),nt=parseInt(we.borderBottomWidth,10);let bt=0,Bt=0;const Ke="offsetWidth"in Re?Re.offsetWidth-Re.clientWidth-ze-lt:0,Te="offsetHeight"in Re?Re.offsetHeight-Re.clientHeight-Me-nt:0,Se="offsetWidth"in Re?Re.offsetWidth===0?0:Ie/Re.offsetWidth:0,We="offsetHeight"in Re?Re.offsetHeight===0?0:je/Re.offsetHeight:0;if(m===Re)bt=GM(F,F+T,T,Me,nt,F+pe,F+pe+j,j),Bt=s==="start"?de:s==="center"?de-x/2:s==="end"?de-x:GM(P,P+x,x,ze,lt,P+de,P+de+q,q),bt=Math.max(0,bt+F),Bt=Math.max(0,Bt+P);else{bt=GM(qe,At,je,Me,nt+Te,pe,pe+j,j),Bt=s==="start"?de-ke-ze:s==="center"?de-(ke+Ie/2)+Ke/2:s==="end"?de-tt+lt+Ke:GM(ke,tt,Ie,ze,lt+Ke,de,de+q,q);const{scrollLeft:at,scrollTop:it}=Re;bt=We===0?0:Math.max(0,Math.min(it+bt/We,Re.scrollHeight-je/We+Te)),Bt=Se===0?0:Math.max(0,Math.min(at+Bt/Se,Re.scrollWidth-Ie/Se+Ke)),pe+=it-bt,de+=at-Bt}ve.push({el:Re,top:bt,left:Bt})}return ve};var Ex=function(){return Ex=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++){t=arguments[i];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Ex.apply(this,arguments)};var cIe=0;function Loe(){}function AIe(n,e){if(n){var t=uIe(n,{boundary:e});t.forEach(function(i){var r=i.el,o=i.top,s=i.left;r.scrollTop=o,r.scrollLeft=s})}}function dQ(n,e,t){var i=n===e||e instanceof t.Node&&n.contains&&n.contains(e);return i}function Foe(n,e){var t;function i(){t&&clearTimeout(t)}function r(){for(var o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];i(),t=setTimeout(function(){t=null,n.apply(void 0,s)},e)}return r.cancel=i,r}function Y0(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return function(i){for(var r=arguments.length,o=new Array(r>1?r-1:0),s=1;s<r;s++)o[s-1]=arguments[s];return e.some(function(a){return a&&a.apply(void 0,[i].concat(o)),i.preventDownshiftDefault||i.hasOwnProperty("nativeEvent")&&i.nativeEvent.preventDownshiftDefault})}}function WM(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return function(i){e.forEach(function(r){typeof r=="function"?r(i):r&&(r.current=i)})}}function hIe(){return String(cIe++)}function BD(n,e){return!n||!e?n:Object.keys(n).reduce(function(t,i){return t[i]=zoe(e,i)?e[i]:n[i],t},{})}function zoe(n,e){return n[e]!==void 0}function dIe(n){var e=n.key,t=n.keyCode;return t>=37&&t<=40&&e.indexOf("Arrow")!==0?"Arrow"+e:e}function QM(n,e,t,i,r){var o=t.length;if(o===0)return-1;var s=o-1;(typeof n!="number"||n<0||n>s)&&(n=e>0?-1:s+1);var a=n+e;a<0?a=s:a>s&&(a=0);var c=eE(a,e<0,t,i,r);return c===-1?n>=o?-1:n:c}function eE(n,e,t,i,r){r===void 0&&(r=!1);var o=t.length;if(e){for(var s=n;s>=0;s--)if(!i(t[s],s))return s}else for(var a=n;a<o;a++)if(!i(t[a],a))return a;return r?eE(e?o-1:0,e,t,i):-1}function fQ(n,e,t,i){return i===void 0&&(i=!0),t&&e.some(function(r){return r&&(dQ(r,n,t)||i&&dQ(r,t.document.activeElement,t))})}var fIe=Foe(function(n){joe(n).textContent=""},500);function joe(n){var e=n.getElementById("a11y-status-message");return e||(e=n.createElement("div"),e.setAttribute("id","a11y-status-message"),e.setAttribute("role","status"),e.setAttribute("aria-live","polite"),e.setAttribute("aria-relevant","additions text"),Object.assign(e.style,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px"}),n.body.appendChild(e),e)}function pIe(n,e){if(!(!n||!e)){var t=joe(e);t.textContent=n,fIe(e)}}function mIe(n){var e=n?.getElementById("a11y-status-message");e&&e.remove()}var Noe={highlightedIndex:-1,isOpen:!1,selectedItem:null,inputValue:""};function gIe(n,e,t){var i=n.props,r=n.type,o={};Object.keys(e).forEach(function(s){yIe(s,n,e,t),t[s]!==e[s]&&(o[s]=t[s])}),i.onStateChange&&Object.keys(o).length&&i.onStateChange(Sl({type:r},o))}function yIe(n,e,t,i){var r=e.props,o=e.type,s="on"+jK(n)+"Change";r[s]&&i[n]!==void 0&&i[n]!==t[n]&&r[s](Sl({type:o},i))}function vIe(n,e){return e.changes}var pQ=Foe(function(n,e){pIe(n,e)},200),bIe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?St.useLayoutEffect:St.useEffect,CIe="useId"in En?function(e){var t=e.id,i=e.labelId,r=e.menuId,o=e.getItemId,s=e.toggleButtonId,a=e.inputId,c="downshift-"+En.useId();t||(t=c);var h=St.useRef({labelId:i||t+"-label",menuId:r||t+"-menu",getItemId:o||function(m){return t+"-item-"+m},toggleButtonId:s||t+"-toggle-button",inputId:a||t+"-input"});return h.current}:function(e){var t=e.id,i=t===void 0?"downshift-"+hIe():t,r=e.labelId,o=e.menuId,s=e.getItemId,a=e.toggleButtonId,c=e.inputId,h=St.useRef({labelId:r||i+"-label",menuId:o||i+"-menu",getItemId:s||function(m){return i+"-item-"+m},toggleButtonId:a||i+"-toggle-button",inputId:c||i+"-input"});return h.current};function _Ie(n,e,t,i){var r,o;if(n===void 0){if(e===void 0)throw new Error(i);r=t[e],o=e}else o=e===void 0?t.indexOf(n):e,r=n;return[r,o]}function jK(n){return""+n.slice(0,1).toUpperCase()+n.slice(1)}function Goe(n){var e=St.useRef(n);return e.current=n,e}function xIe(n,e,t,i){var r=St.useRef(),o=St.useRef(),s=St.useCallback(function(x,T){o.current=T,x=BD(x,T.props);var P=n(x,T),F=T.props.stateReducer(x,Sl({},T,{changes:P}));return F},[n]),a=St.useReducer(s,e,t),c=a[0],h=a[1],m=Goe(e),y=St.useCallback(function(x){return h(Sl({props:m.current},x))},[m]),M=o.current;return St.useEffect(function(){var x=BD(r.current,M?.props),T=M&&r.current&&!i(x,c);T&&gIe(M,x,c),r.current=c},[c,M,i]),[c,y]}var I3={itemToString:function(e){return e?String(e):""},itemToKey:function(e){return e},stateReducer:vIe,scrollIntoView:AIe,environment:typeof window>"u"?void 0:window};function Jy(n,e,t){t===void 0&&(t=Noe);var i=n["default"+jK(e)];return i!==void 0?i:t[e]}function k3(n,e,t){t===void 0&&(t=Noe);var i=n[e];if(i!==void 0)return i;var r=n["initial"+jK(e)];return r!==void 0?r:Jy(n,e,t)}function MIe(n){var e=k3(n,"selectedItem"),t=k3(n,"isOpen"),i=IIe(n),r=k3(n,"inputValue");return{highlightedIndex:i<0&&e&&t?n.items.findIndex(function(o){return n.itemToKey(o)===n.itemToKey(e)}):i,isOpen:t,selectedItem:e,inputValue:r}}function T3(n,e,t){var i=n.items,r=n.initialHighlightedIndex,o=n.defaultHighlightedIndex,s=n.isItemDisabled,a=n.itemToKey,c=e.selectedItem,h=e.highlightedIndex;return i.length===0?-1:r!==void 0&&h===r&&!s(i[r],r)?r:o!==void 0&&!s(i[o],o)?o:c?i.findIndex(function(m){return a(c)===a(m)}):t<0&&!s(i[i.length-1],i.length-1)?i.length-1:t>0&&!s(i[0],0)?0:-1}function wIe(n,e,t){var i=St.useRef({isMouseDown:!1,isTouchMove:!1,isTouchEnd:!1});return St.useEffect(function(){if(!n)return Loe;var r=t.map(function(m){return m.current});function o(){i.current.isTouchEnd=!1,i.current.isMouseDown=!0}function s(m){i.current.isMouseDown=!1,fQ(m.target,r,n)||e()}function a(){i.current.isTouchEnd=!1,i.current.isTouchMove=!1}function c(){i.current.isTouchMove=!0}function h(m){i.current.isTouchEnd=!0,!i.current.isTouchMove&&!fQ(m.target,r,n,!1)&&e()}return n.addEventListener("mousedown",o),n.addEventListener("mouseup",s),n.addEventListener("touchstart",a),n.addEventListener("touchmove",c),n.addEventListener("touchend",h),function(){n.removeEventListener("mousedown",o),n.removeEventListener("mouseup",s),n.removeEventListener("touchstart",a),n.removeEventListener("touchmove",c),n.removeEventListener("touchend",h)}},[t,n,e]),i.current}var SIe=function(){return Loe};function EIe(n,e,t,i){i===void 0&&(i={});var r=i.document,o=NK();St.useEffect(function(){if(!(!n||o||!r)){var s=n(e);pQ(s,r)}},t),St.useEffect(function(){return function(){pQ.cancel(),mIe(r)}},[r])}function OIe(n){var e=n.highlightedIndex,t=n.isOpen,i=n.itemRefs,r=n.getItemNodeFromIndex,o=n.menuElement,s=n.scrollIntoView,a=St.useRef(!0);return bIe(function(){e<0||!t||!Object.keys(i.current).length||(a.current===!1?a.current=!0:s(r(e),o))},[e]),a}function mQ(n,e,t){var i;t===void 0&&(t=!0);var r=((i=n.items)==null?void 0:i.length)&&e>=0;return Sl({isOpen:!1,highlightedIndex:-1},r&&Sl({selectedItem:n.items[e],isOpen:Jy(n,"isOpen"),highlightedIndex:Jy(n,"highlightedIndex")},t&&{inputValue:n.itemToString(n.items[e])}))}function BIe(n,e){return n.isOpen===e.isOpen&&n.inputValue===e.inputValue&&n.highlightedIndex===e.highlightedIndex&&n.selectedItem===e.selectedItem}function NK(){var n=En.useRef(!0);return En.useEffect(function(){return n.current=!1,function(){n.current=!0}},[]),n.current}function ID(n){var e=Jy(n,"highlightedIndex");return e>-1&&n.isItemDisabled(n.items[e],e)?-1:e}function IIe(n){var e=k3(n,"highlightedIndex");return e>-1&&n.isItemDisabled(n.items[e],e)?-1:e}var Ew={environment:pr.shape({addEventListener:pr.func.isRequired,removeEventListener:pr.func.isRequired,document:pr.shape({createElement:pr.func.isRequired,getElementById:pr.func.isRequired,activeElement:pr.any.isRequired,body:pr.any.isRequired}).isRequired,Node:pr.func.isRequired}),itemToString:pr.func,itemToKey:pr.func,stateReducer:pr.func},Woe=Sl({},Ew,{getA11yStatusMessage:pr.func,highlightedIndex:pr.number,defaultHighlightedIndex:pr.number,initialHighlightedIndex:pr.number,isOpen:pr.bool,defaultIsOpen:pr.bool,initialIsOpen:pr.bool,selectedItem:pr.any,initialSelectedItem:pr.any,defaultSelectedItem:pr.any,id:pr.string,labelId:pr.string,menuId:pr.string,getItemId:pr.func,toggleButtonId:pr.string,onSelectedItemChange:pr.func,onHighlightedIndexChange:pr.func,onStateChange:pr.func,onIsOpenChange:pr.func,scrollIntoView:pr.func});function kIe(n,e,t){var i=e.type,r=e.props,o;switch(i){case t.ItemMouseMove:o={highlightedIndex:e.disabled?-1:e.index};break;case t.MenuMouseLeave:o={highlightedIndex:-1};break;case t.ToggleButtonClick:case t.FunctionToggleMenu:o={isOpen:!n.isOpen,highlightedIndex:n.isOpen?-1:T3(r,n,0)};break;case t.FunctionOpenMenu:o={isOpen:!0,highlightedIndex:T3(r,n,0)};break;case t.FunctionCloseMenu:o={isOpen:!1};break;case t.FunctionSetHighlightedIndex:o={highlightedIndex:r.isItemDisabled(r.items[e.highlightedIndex],e.highlightedIndex)?-1:e.highlightedIndex};break;case t.FunctionSetInputValue:o={inputValue:e.inputValue};break;case t.FunctionReset:o={highlightedIndex:ID(r),isOpen:Jy(r,"isOpen"),selectedItem:Jy(r,"selectedItem"),inputValue:Jy(r,"inputValue")};break;default:throw new Error("Reducer called without proper action type.")}return Sl({},n,o)}Ex(Ex({},Woe),{items:pr.array.isRequired,isItemDisabled:pr.func});Ex(Ex({},I3),{isItemDisabled:function(){return!1}});var GK=0,WK=1,QK=2,qK=3,YK=4,$K=5,VK=6,HK=7,ZK=8,tE=9,XK=10,Qoe=11,qoe=12,JK=13,Yoe=14,$oe=15,Voe=16,Hoe=17,Zoe=18,eL=19,Xoe=20,Joe=21,tL=22,ese=Object.freeze({__proto__:null,ControlledPropUpdatedSelectedItem:tL,FunctionCloseMenu:Hoe,FunctionOpenMenu:Voe,FunctionReset:Joe,FunctionSelectItem:eL,FunctionSetHighlightedIndex:Zoe,FunctionSetInputValue:Xoe,FunctionToggleMenu:$oe,InputBlur:tE,InputChange:ZK,InputClick:XK,InputKeyDownArrowDown:GK,InputKeyDownArrowUp:WK,InputKeyDownEnd:YK,InputKeyDownEnter:HK,InputKeyDownEscape:QK,InputKeyDownHome:qK,InputKeyDownPageDown:VK,InputKeyDownPageUp:$K,ItemClick:JK,ItemMouseMove:qoe,MenuMouseLeave:Qoe,ToggleButtonClick:Yoe});function TIe(n){var e=MIe(n),t=e.selectedItem,i=e.inputValue;return i===""&&t&&n.defaultInputValue===void 0&&n.initialInputValue===void 0&&n.inputValue===void 0&&(i=n.itemToString(t)),Sl({},e,{inputValue:i})}Sl({},Woe,{items:pr.array.isRequired,isItemDisabled:pr.func,inputValue:pr.string,defaultInputValue:pr.string,initialInputValue:pr.string,inputId:pr.string,onInputValueChange:pr.func});function RIe(n,e,t,i){var r=St.useRef(),o=xIe(n,e,t,i),s=o[0],a=o[1],c=NK();return St.useEffect(function(){if(zoe(e,"selectedItem")){if(!c){var h=e.itemToKey(e.selectedItem)!==e.itemToKey(r.current);h&&a({type:tL,inputValue:e.itemToString(e.selectedItem)})}r.current=s.selectedItem===r.current?e.selectedItem:s.selectedItem}},[s.selectedItem,e.selectedItem]),[BD(s,e),a]}var DIe=Sl({},I3,{isItemDisabled:function(){return!1}});function PIe(n,e){var t,i=e.type,r=e.props,o=e.altKey,s;switch(i){case JK:s={isOpen:Jy(r,"isOpen"),highlightedIndex:ID(r),selectedItem:r.items[e.index],inputValue:r.itemToString(r.items[e.index])};break;case GK:n.isOpen?s={highlightedIndex:QM(n.highlightedIndex,1,r.items,r.isItemDisabled,!0)}:s={highlightedIndex:o&&n.selectedItem==null?-1:T3(r,n,1),isOpen:r.items.length>=0};break;case WK:n.isOpen?o?s=mQ(r,n.highlightedIndex):s={highlightedIndex:QM(n.highlightedIndex,-1,r.items,r.isItemDisabled,!0)}:s={highlightedIndex:T3(r,n,-1),isOpen:r.items.length>=0};break;case HK:s=mQ(r,n.highlightedIndex);break;case QK:s=Sl({isOpen:!1,highlightedIndex:-1},!n.isOpen&&{selectedItem:null,inputValue:""});break;case $K:s={highlightedIndex:QM(n.highlightedIndex,-10,r.items,r.isItemDisabled,!0)};break;case VK:s={highlightedIndex:QM(n.highlightedIndex,10,r.items,r.isItemDisabled,!0)};break;case qK:s={highlightedIndex:eE(0,!1,r.items,r.isItemDisabled)};break;case YK:s={highlightedIndex:eE(r.items.length-1,!0,r.items,r.isItemDisabled)};break;case tE:s=Sl({isOpen:!1,highlightedIndex:-1},n.highlightedIndex>=0&&((t=r.items)==null?void 0:t.length)&&e.selectItem&&{selectedItem:r.items[n.highlightedIndex],inputValue:r.itemToString(r.items[n.highlightedIndex])});break;case ZK:s={isOpen:!0,highlightedIndex:ID(r),inputValue:e.inputValue};break;case XK:s={isOpen:!n.isOpen,highlightedIndex:n.isOpen?-1:T3(r,n,0)};break;case eL:s={selectedItem:e.selectedItem,inputValue:r.itemToString(e.selectedItem)};break;case tL:s={inputValue:e.inputValue};break;default:return kIe(n,e,ese)}return Sl({},n,s)}var UIe=["onMouseLeave","refKey","ref"],KIe=["item","index","refKey","ref","onMouseMove","onMouseDown","onClick","onPress","disabled"],LIe=["onClick","onPress","refKey","ref"],FIe=["onKeyDown","onChange","onInput","onBlur","onChangeText","onClick","refKey","ref"];kD.stateChangeTypes=ese;function kD(n){n===void 0&&(n={});var e=Sl({},DIe,n),t=e.items,i=e.scrollIntoView,r=e.environment,o=e.getA11yStatusMessage,s=RIe(PIe,e,TIe,BIe),a=s[0],c=s[1],h=a.isOpen,m=a.highlightedIndex,y=a.selectedItem,M=a.inputValue,x=St.useRef(null),T=St.useRef({}),P=St.useRef(null),F=St.useRef(null),j=NK(),q=CIe(e),V=St.useRef(),H=Goe({state:a,props:e}),Q=St.useCallback(function(ze){return T.current[q.getItemId(ze)]},[q]);EIe(o,a,[h,m,y,M],r);var Y=OIe({menuElement:x.current,highlightedIndex:m,isOpen:h,itemRefs:T,scrollIntoView:i,getItemNodeFromIndex:Q});St.useEffect(function(){var ze=k3(e,"isOpen");ze&&P.current&&P.current.focus()},[]),St.useEffect(function(){j||(V.current=t.length)});var z=wIe(r,St.useCallback(function(){H.current.state.isOpen&&c({type:tE,selectItem:!1})},[c,H]),St.useMemo(function(){return[x,F,P]},[x.current,F.current,P.current])),se=SIe();St.useEffect(function(){h||(T.current={})},[h]),St.useEffect(function(){var ze;!h||!(r!=null&&r.document)||!(P!=null&&(ze=P.current)!=null&&ze.focus)||r.document.activeElement!==P.current&&P.current.focus()},[h,r]);var le=St.useMemo(function(){return{ArrowDown:function(Me){Me.preventDefault(),c({type:GK,altKey:Me.altKey})},ArrowUp:function(Me){Me.preventDefault(),c({type:WK,altKey:Me.altKey})},Home:function(Me){H.current.state.isOpen&&(Me.preventDefault(),c({type:qK}))},End:function(Me){H.current.state.isOpen&&(Me.preventDefault(),c({type:YK}))},Escape:function(Me){var lt=H.current.state;(lt.isOpen||lt.inputValue||lt.selectedItem||lt.highlightedIndex>-1)&&(Me.preventDefault(),c({type:QK}))},Enter:function(Me){var lt=H.current.state;!lt.isOpen||Me.which===229||(Me.preventDefault(),c({type:HK}))},PageUp:function(Me){H.current.state.isOpen&&(Me.preventDefault(),c({type:$K}))},PageDown:function(Me){H.current.state.isOpen&&(Me.preventDefault(),c({type:VK}))}}},[c,H]),pe=St.useCallback(function(ze){return Sl({id:q.labelId,htmlFor:q.inputId},ze)},[q]),de=St.useCallback(function(ze,Me){var lt,nt=ze===void 0?{}:ze,bt=nt.onMouseLeave,Bt=nt.refKey,Ke=Bt===void 0?"ref":Bt,Te=nt.ref,Se=jM(nt,UIe),We=Me===void 0?{}:Me;return We.suppressRefError,Sl((lt={},lt[Ke]=WM(Te,function(at){x.current=at}),lt.id=q.menuId,lt.role="listbox",lt["aria-labelledby"]=Se&&Se["aria-label"]?void 0:""+q.labelId,lt.onMouseLeave=Y0(bt,function(){c({type:Qoe})}),lt),Se)},[c,se,q]),ve=St.useCallback(function(ze){var Me,lt,nt=ze===void 0?{}:ze,bt=nt.item,Bt=nt.index,Ke=nt.refKey,Te=Ke===void 0?"ref":Ke,Se=nt.ref,We=nt.onMouseMove,at=nt.onMouseDown,it=nt.onClick;nt.onPress;var ft=nt.disabled,Dt=jM(nt,KIe);ft!==void 0&&console.warn('Passing "disabled" as an argument to getItemProps is not supported anymore. Please use the isItemDisabled prop from useCombobox.');var Ot=H.current,Jt=Ot.props,Dn=Ot.state,Pn=_Ie(bt,Bt,Jt.items,"Pass either item or index to getItemProps!"),oi=Pn[0],In=Pn[1],Tn=Jt.isItemDisabled(oi,In),dn="onClick",$n=it,Un=function(){z.isTouchEnd||In===Dn.highlightedIndex||(Y.current=!1,c({type:qoe,index:In,disabled:Tn}))},It=function(){c({type:JK,index:In})},_e=function(ee){return ee.preventDefault()};return Sl((Me={},Me[Te]=WM(Se,function(oe){oe&&(T.current[q.getItemId(In)]=oe)}),Me["aria-disabled"]=Tn,Me["aria-selected"]=In===Dn.highlightedIndex,Me.id=q.getItemId(In),Me.role="option",Me),!Tn&&(lt={},lt[dn]=Y0($n,It),lt),{onMouseMove:Y0(We,Un),onMouseDown:Y0(at,_e)},Dt)},[c,q,H,z,Y]),Ee=St.useCallback(function(ze){var Me,lt=ze===void 0?{}:ze,nt=lt.onClick;lt.onPress;var bt=lt.refKey,Bt=bt===void 0?"ref":bt,Ke=lt.ref,Te=jM(lt,LIe),Se=H.current.state,We=function(){c({type:Yoe})};return Sl((Me={},Me[Bt]=WM(Ke,function(at){F.current=at}),Me["aria-controls"]=q.menuId,Me["aria-expanded"]=Se.isOpen,Me.id=q.toggleButtonId,Me.tabIndex=-1,Me),!Te.disabled&&Sl({},{onClick:Y0(nt,We)}),Te)},[c,H,q]),Re=St.useCallback(function(ze,Me){var lt,nt=ze===void 0?{}:ze,bt=nt.onKeyDown,Bt=nt.onChange,Ke=nt.onInput,Te=nt.onBlur;nt.onChangeText;var Se=nt.onClick,We=nt.refKey,at=We===void 0?"ref":We,it=nt.ref,ft=jM(nt,FIe),Dt=Me===void 0?{}:Me;Dt.suppressRefError;var Ot=H.current.state,Jt=function(Un){var It=dIe(Un);It&&le[It]&&le[It](Un)},Dn=function(Un){c({type:ZK,inputValue:Un.target.value})},Pn=function(Un){if(r!=null&&r.document&&Ot.isOpen&&!z.isMouseDown){var It=Un.relatedTarget===null&&r.document.activeElement!==r.document.body;c({type:tE,selectItem:!It})}},oi=function(){c({type:XK})},In="onChange",Tn={};if(!ft.disabled){var dn;Tn=(dn={},dn[In]=Y0(Bt,Ke,Dn),dn.onKeyDown=Y0(bt,Jt),dn.onBlur=Y0(Te,Pn),dn.onClick=Y0(Se,oi),dn)}return Sl((lt={},lt[at]=WM(it,function($n){P.current=$n}),lt["aria-activedescendant"]=Ot.isOpen&&Ot.highlightedIndex>-1?q.getItemId(Ot.highlightedIndex):"",lt["aria-autocomplete"]="list",lt["aria-controls"]=q.menuId,lt["aria-expanded"]=Ot.isOpen,lt["aria-labelledby"]=ft&&ft["aria-label"]?void 0:q.labelId,lt.autoComplete="off",lt.id=q.inputId,lt.role="combobox",lt.value=Ot.inputValue,lt),Tn,ft)},[c,q,r,le,H,z,se]),je=St.useCallback(function(){c({type:$oe})},[c]),Ie=St.useCallback(function(){c({type:Hoe})},[c]),qe=St.useCallback(function(){c({type:Voe})},[c]),tt=St.useCallback(function(ze){c({type:Zoe,highlightedIndex:ze})},[c]),At=St.useCallback(function(ze){c({type:eL,selectedItem:ze})},[c]),ke=St.useCallback(function(ze){c({type:Xoe,inputValue:ze})},[c]),we=St.useCallback(function(){c({type:Joe})},[c]);return{getItemProps:ve,getLabelProps:pe,getMenuProps:de,getInputProps:Re,getToggleButtonProps:Ee,toggleMenu:je,openMenu:qe,closeMenu:Ie,setHighlightedIndex:tt,setInputValue:ke,selectItem:At,reset:we,highlightedIndex:m,isOpen:h,selectedItem:y,inputValue:M}}Ew.stateReducer,Ew.itemToKey,Ew.environment,pr.array,pr.array,pr.array,pr.func,pr.number,pr.number,pr.number,pr.func,pr.func,pr.string,pr.string;I3.itemToKey,I3.stateReducer,I3.environment;function di(){var n="/home/runner/work/maputnik/maputnik/src/components/InputAutocomplete.tsx",e="73020a5a2032027cc342d42db613082f6da43a81",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputAutocomplete.tsx",statementMap:{0:{start:{line:5,column:19},end:{line:5,column:22}},1:{start:{line:13,column:28},end:{line:13,column:55}},2:{start:{line:14,column:18},end:{line:14,column:36}},3:{start:{line:15,column:36},end:{line:15,column:62}},4:{start:{line:16,column:24},end:{line:19,column:22}},5:{start:{line:17,column:15},end:{line:17,column:34}},6:{start:{line:18,column:4},end:{line:18,column:72}},7:{start:{line:18,column:36},end:{line:18,column:70}},8:{start:{line:20,column:24},end:{line:25,column:8}},9:{start:{line:21,column:4},end:{line:24,column:5}},10:{start:{line:22,column:20},end:{line:22,column:84}},11:{start:{line:23,column:6},end:{line:23,column:48}},12:{start:{line:33,column:6},end:{line:55,column:4}},13:{start:{line:36,column:28},end:{line:36,column:47}},14:{start:{line:38,column:6},end:{line:40,column:7}},15:{start:{line:39,column:8},end:{line:39,column:51}},16:{start:{line:41,column:6},end:{line:41,column:28}},17:{start:{line:44,column:16},end:{line:44,column:51}},18:{start:{line:45,column:6},end:{line:45,column:18}},19:{start:{line:46,column:6},end:{line:46,column:56}},20:{start:{line:49,column:6},end:{line:53,column:7}},21:{start:{line:50,column:8},end:{line:50,column:20}},22:{start:{line:51,column:8},end:{line:51,column:40}},23:{start:{line:52,column:8},end:{line:52,column:19}},24:{start:{line:56,column:2},end:{line:60,column:30}},25:{start:{line:57,column:4},end:{line:59,column:5}},26:{start:{line:58,column:6},end:{line:58,column:22}},27:{start:{line:61,column:2},end:{line:64,column:22}},28:{start:{line:62,column:4},end:{line:62,column:53}},29:{start:{line:63,column:4},end:{line:63,column:69}},30:{start:{line:63,column:17},end:{line:63,column:68}},31:{start:{line:65,column:2},end:{line:67,column:14}},32:{start:{line:66,column:4},end:{line:66,column:26}},33:{start:{line:68,column:2},end:{line:103,column:7}},34:{start:{line:76,column:25},end:{line:76,column:35}},35:{start:{line:87,column:79},end:{line:100,column:9}}},fnMap:{0:{name:"InputAutocomplete",decl:{start:{line:6,column:24},end:{line:6,column:41}},loc:{start:{line:12,column:3},end:{line:104,column:1}},line:12},1:{name:"(anonymous_1)",decl:{start:{line:9,column:13},end:{line:9,column:14}},loc:{start:{line:9,column:19},end:{line:10,column:3}},line:9},2:{name:"(anonymous_2)",decl:{start:{line:16,column:38},end:{line:16,column:39}},loc:{start:{line:16,column:44},end:{line:19,column:3}},line:16},3:{name:"(anonymous_3)",decl:{start:{line:18,column:26},end:{line:18,column:27}},loc:{start:{line:18,column:36},end:{line:18,column:70}},line:18},4:{name:"(anonymous_4)",decl:{start:{line:20,column:42},end:{line:20,column:43}},loc:{start:{line:20,column:48},end:{line:25,column:3}},line:20},5:{name:"(anonymous_5)",decl:{start:{line:36,column:18},end:{line:36,column:19}},loc:{start:{line:36,column:28},end:{line:36,column:47}},line:36},6:{name:"(anonymous_6)",decl:{start:{line:37,column:18},end:{line:37,column:19}},loc:{start:{line:37,column:38},end:{line:42,column:5}},line:37},7:{name:"(anonymous_7)",decl:{start:{line:43,column:26},end:{line:43,column:27}},loc:{start:{line:43,column:48},end:{line:47,column:5}},line:43},8:{name:"(anonymous_8)",decl:{start:{line:48,column:24},end:{line:48,column:25}},loc:{start:{line:48,column:47},end:{line:54,column:5}},line:48},9:{name:"(anonymous_9)",decl:{start:{line:56,column:18},end:{line:56,column:19}},loc:{start:{line:56,column:24},end:{line:60,column:3}},line:56},10:{name:"(anonymous_10)",decl:{start:{line:61,column:18},end:{line:61,column:19}},loc:{start:{line:61,column:24},end:{line:64,column:3}},line:61},11:{name:"(anonymous_11)",decl:{start:{line:63,column:11},end:{line:63,column:12}},loc:{start:{line:63,column:17},end:{line:63,column:68}},line:63},12:{name:"(anonymous_12)",decl:{start:{line:65,column:18},end:{line:65,column:19}},loc:{start:{line:65,column:24},end:{line:67,column:3}},line:65},13:{name:"(anonymous_13)",decl:{start:{line:76,column:19},end:{line:76,column:20}},loc:{start:{line:76,column:25},end:{line:76,column:35}},line:76},14:{name:"(anonymous_14)",decl:{start:{line:87,column:46},end:{line:87,column:47}},loc:{start:{line:87,column:79},end:{line:100,column:9}},line:87}},branchMap:{0:{loc:{start:{line:8,column:2},end:{line:8,column:14}},type:"default-arg",locations:[{start:{line:8,column:12},end:{line:8,column:14}}],line:8},1:{loc:{start:{line:9,column:2},end:{line:10,column:3}},type:"default-arg",locations:[{start:{line:9,column:13},end:{line:10,column:3}}],line:9},2:{loc:{start:{line:13,column:43},end:{line:13,column:54}},type:"binary-expr",locations:[{start:{line:13,column:43},end:{line:13,column:48}},{start:{line:13,column:52},end:{line:13,column:54}}],line:13},3:{loc:{start:{line:21,column:4},end:{line:24,column:5}},type:"if",locations:[{start:{line:21,column:4},end:{line:24,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:21},4:{loc:{start:{line:36,column:28},end:{line:36,column:47}},type:"cond-expr",locations:[{start:{line:36,column:35},end:{line:36,column:42}},{start:{line:36,column:45},end:{line:36,column:47}}],line:36},5:{loc:{start:{line:38,column:6},end:{line:40,column:7}},type:"if",locations:[{start:{line:38,column:6},end:{line:40,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:38},6:{loc:{start:{line:44,column:16},end:{line:44,column:51}},type:"cond-expr",locations:[{start:{line:44,column:31},end:{line:44,column:46}},{start:{line:44,column:49},end:{line:44,column:51}}],line:44},7:{loc:{start:{line:46,column:15},end:{line:46,column:54}},type:"cond-expr",locations:[{start:{line:46,column:30},end:{line:46,column:45}},{start:{line:46,column:48},end:{line:46,column:54}}],line:46},8:{loc:{start:{line:49,column:6},end:{line:53,column:7}},type:"if",locations:[{start:{line:49,column:6},end:{line:53,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:49},9:{loc:{start:{line:51,column:17},end:{line:51,column:38}},type:"cond-expr",locations:[{start:{line:51,column:28},end:{line:51,column:34}},{start:{line:51,column:37},end:{line:51,column:38}}],line:51},10:{loc:{start:{line:57,column:4},end:{line:59,column:5}},type:"if",locations:[{start:{line:57,column:4},end:{line:59,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:57},11:{loc:{start:{line:66,column:13},end:{line:66,column:24}},type:"binary-expr",locations:[{start:{line:66,column:13},end:{line:66,column:18}},{start:{line:66,column:22},end:{line:66,column:24}}],line:66},12:{loc:{start:{line:87,column:18},end:{line:100,column:10}},type:"binary-expr",locations:[{start:{line:87,column:18},end:{line:87,column:24}},{start:{line:87,column:28},end:{line:100,column:10}}],line:87}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0},b:{0:[0],1:[0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputAutocomplete.tsx"],names:[],mappings:"AAkFI,SACE,KADF;AAlFJ,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,SAAQ,mBAAkB;AAE1B,MAAM,aAAa;AASnB,wBAAwB,kBAAkB;AAAA,EACxC;AAAA,EACA,UAAU,CAAC;AAAA,EACX,WAAW,MAAM;AAAA,EAAC;AAAA,EAClB,cAAc;AAChB,GAA2B;AACzB,QAAM,CAAC,OAAO,QAAQ,IAAI,MAAM,SAAS,SAAS,EAAE;AACpD,QAAM,UAAU,MAAM,OAAuB,IAAI;AACjD,QAAM,CAAC,WAAW,YAAY,IAAI,MAAM,SAAS,UAAU;AAE3D,QAAM,gBAAgB,MAAM,QAAQ,MAAM;AACxC,UAAM,KAAK,MAAM,YAAY;AAC7B,WAAO,QAAQ,OAAO,CAAC,SAAS,KAAK,CAAC,EAAE,YAAY,EAAE,SAAS,EAAE,CAAC;AAAA,EACpE,GAAG,CAAC,SAAS,KAAK,CAAC;AAEnB,QAAM,gBAAgB,MAAM,YAAY,MAAM;AAC5C,QAAI,QAAQ,SAAS;AACnB,YAAM,QAAQ,OAAO,cAAc,QAAQ,QAAQ,sBAAsB,EAAE;AAC3E,mBAAa,KAAK,IAAI,OAAO,UAAU,CAAC;AAAA,IAC1C;AAAA,EACF,GAAG,CAAC,CAAC;AAEL,QAAM;AAAA,IACJ;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACF,IAAI,YAAY;AAAA,IACd,OAAO;AAAA,IACP,YAAY;AAAA,IACZ,cAAc,CAAC,SAAU,OAAO,KAAK,CAAC,IAAI;AAAA,IAC1C,cAAc,CAAC,QAAQ,WAAW;AAChC,UAAI,OAAO,SAAS,YAAY,iBAAiB,YAAY;AAC3D,eAAO,EAAC,GAAG,OAAO,SAAS,QAAQ,KAAI;AAAA,MACzC;AACA,aAAO,OAAO;AAAA,IAChB;AAAA,IACA,sBAAsB,CAAC,EAAC,aAAY,MAAM;AACxC,YAAM,IAAI,eAAe,aAAa,CAAC,IAAI;AAC3C,eAAS,CAAC;AACV,eAAS,eAAe,aAAa,CAAC,IAAI,MAAS;AAAA,IACrD;AAAA,IACA,oBAAoB,CAAC,EAAC,YAAY,EAAC,MAAM;AACvC,UAAI,OAAO,MAAM,UAAU;AACzB,iBAAS,CAAC;AACV,iBAAS,MAAM,KAAK,SAAY,CAAC;AACjC,iBAAS;AAAA,MACX;AAAA,IACF;AAAA,EACF,CAAC;AAED,QAAM,UAAU,MAAM;AACpB,QAAI,QAAQ;AACV,oBAAc;AAAA,IAChB;AAAA,EACF,GAAG,CAAC,QAAQ,aAAa,CAAC;AAE1B,QAAM,UAAU,MAAM;AACpB,WAAO,iBAAiB,UAAU,aAAa;AAC/C,WAAO,MAAM,OAAO,oBAAoB,UAAU,aAAa;AAAA,EACjE,GAAG,CAAC,aAAa,CAAC;AAElB,QAAM,UAAU,MAAM;AACpB,aAAS,SAAS,EAAE;AAAA,EACtB,GAAG,CAAC,KAAK,CAAC;AAEV,SACE,qBAAC,SAAI,WAAU,yBACb;AAAA;AAAA,MAAC;AAAA;AAAA,QACE,GAAG,cAAc;AAAA,UAChB,cAAc;AAAA,UACd,WAAW;AAAA,UACX,YAAY;AAAA,UACZ,SAAS,MAAM,SAAS;AAAA,QAC1B,CAAC;AAAA;AAAA,IACH;AAAA,IACA;AAAA,MAAC;AAAA;AAAA,QACE,GAAG,aAAa,CAAC,GAAG,EAAC,kBAAkB,KAAI,CAAC;AAAA,QAC7C,KAAK;AAAA,QACL,OAAO,EAAC,UAAU,SAAS,UAAU,QAAQ,WAAW,QAAQ,IAAG;AAAA,QACnE,WAAU;AAAA,QAET,oBACC,cAAc,IAAI,CAAC,MAAM,UACvB;AAAA,UAAC;AAAA;AAAA,YAEE,GAAG,aAAa;AAAA,cACf;AAAA,cACA;AAAA,cACA,WAAW,WAAW,mCAAmC;AAAA,gBACvD,4CAA4C,qBAAqB;AAAA,cACnE,CAAC;AAAA,YACH,CAAC;AAAA,YAEA,eAAK,CAAC;AAAA;AAAA,UATF,KAAK,CAAC;AAAA,QAUb,CACD;AAAA;AAAA,IACL;AAAA,KACF;AAEJ;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"73020a5a2032027cc342d42db613082f6da43a81"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return di=function(){return s},s}di();const gQ=(di().s[0]++,140);function I5({value:n,options:e=(di().b[0][0]++,[]),onChange:t=(di().b[1][0]++,()=>{di().f[1]++}),"aria-label":i}){di().f[0]++;const[r,o]=(di().s[1]++,En.useState((di().b[2][0]++,n||(di().b[2][1]++,"")))),s=(di().s[2]++,En.useRef(null)),[a,c]=(di().s[3]++,En.useState(gQ)),h=(di().s[4]++,En.useMemo(()=>{di().f[2]++;const j=(di().s[5]++,r.toLowerCase());return di().s[6]++,e.filter(q=>(di().f[3]++,di().s[7]++,q[0].toLowerCase().includes(j)))},[e,r])),m=(di().s[8]++,En.useCallback(()=>{if(di().f[4]++,di().s[9]++,s.current){di().b[3][0]++;const j=(di().s[10]++,window.innerHeight-s.current.getBoundingClientRect().top);di().s[11]++,c(Math.min(j,gQ))}else di().b[3][1]++},[])),{isOpen:y,getMenuProps:M,getInputProps:x,getItemProps:T,highlightedIndex:P,openMenu:F}=(di().s[12]++,kD({items:h,inputValue:r,itemToString:j=>(di().f[5]++,di().s[13]++,j?(di().b[4][0]++,j[0]):(di().b[4][1]++,"")),stateReducer:(j,q)=>(di().f[6]++,di().s[14]++,q.type===kD.stateChangeTypes.InputClick?(di().b[5][0]++,di().s[15]++,{...q.changes,isOpen:!0}):(di().b[5][1]++,di().s[16]++,q.changes)),onSelectedItemChange:({selectedItem:j})=>{di().f[7]++;const q=(di().s[17]++,j?(di().b[6][0]++,j[0]):(di().b[6][1]++,""));di().s[18]++,o(q),di().s[19]++,t(j?(di().b[7][0]++,j[0]):(di().b[7][1]++,void 0))},onInputValueChange:({inputValue:j})=>{di().f[8]++,di().s[20]++,typeof j=="string"?(di().b[8][0]++,di().s[21]++,o(j),di().s[22]++,t(j===""?(di().b[9][0]++,void 0):(di().b[9][1]++,j)),di().s[23]++,F()):di().b[8][1]++}}));return di().s[24]++,En.useEffect(()=>{di().f[9]++,di().s[25]++,y?(di().b[10][0]++,di().s[26]++,m()):di().b[10][1]++},[y,m]),di().s[27]++,En.useEffect(()=>(di().f[10]++,di().s[28]++,window.addEventListener("resize",m),di().s[29]++,()=>(di().f[11]++,di().s[30]++,window.removeEventListener("resize",m))),[m]),di().s[31]++,En.useEffect(()=>{di().f[12]++,di().s[32]++,o((di().b[11][0]++,n||(di().b[11][1]++,"")))},[n]),di().s[33]++,ie.jsxs("div",{className:"maputnik-autocomplete",children:[ie.jsx("input",{...x({"aria-label":i,className:"maputnik-string",spellCheck:!1,onFocus:()=>(di().f[13]++,di().s[34]++,F())})}),ie.jsx("div",{...M({},{suppressRefError:!0}),ref:s,style:{position:"fixed",overflow:"auto",maxHeight:a,zIndex:998},className:"maputnik-autocomplete-menu",children:(di().b[12][0]++,y&&(di().b[12][1]++,h.map((j,q)=>(di().f[14]++,di().s[35]++,ie.jsx("div",{...T({item:j,index:q,className:u0("maputnik-autocomplete-menu-item",{"maputnik-autocomplete-menu-item-selected":P===q})}),children:j[1]},j[0])))))})]})}function Am(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldSource.tsx",e="787db584cc9becf4089365283e16f9ba747f4840",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldSource.tsx",statementMap:{0:{start:{line:6,column:28},end:{line:32,column:1}},1:{start:{line:15,column:2},end:{line:31,column:4}},2:{start:{line:27,column:43},end:{line:27,column:53}},3:{start:{line:33,column:20},end:{line:33,column:58}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:28},end:{line:6,column:29}},loc:{start:{line:14,column:6},end:{line:32,column:1}},line:14},1:{name:"(anonymous_1)",decl:{start:{line:7,column:13},end:{line:7,column:14}},loc:{start:{line:7,column:19},end:{line:8,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:27,column:34},end:{line:27,column:35}},loc:{start:{line:27,column:43},end:{line:27,column:53}},line:27}},branchMap:{0:{loc:{start:{line:7,column:2},end:{line:8,column:3}},type:"default-arg",locations:[{start:{line:7,column:13},end:{line:8,column:3}}],line:7},1:{loc:{start:{line:9,column:2},end:{line:9,column:16}},type:"default-arg",locations:[{start:{line:9,column:14},end:{line:9,column:16}}],line:9}},s:{0:0,1:0,2:0,3:0},f:{0:0,1:0,2:0},b:{0:[0],1:[0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldSource.tsx"],names:[],mappings:"AA8BM;AA5BN,OAAO,YAAY;AACnB,OAAO,WAAW;AAClB,OAAO,uBAAuB;AAC9B,SAA+B,uBAAuB;AAUtD,MAAM,sBAA0D,CAAC;AAAA,EAC/D,WAAW,MAAM;AAAA,EAAC;AAAA,EAClB,YAAY,CAAC;AAAA,EACb;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACF,MAAM;AACJ,SACE;AAAA,IAAC;AAAA;AAAA,MACC,OAAO,EAAE,QAAQ;AAAA,MACjB,WAAW,OAAO,MAAM;AAAA,MACxB;AAAA,MACA,eAAa;AAAA,MAEb;AAAA,QAAC;AAAA;AAAA,UACC;AAAA,UACA;AAAA,UACA,SAAS,WAAW,IAAI,CAAC,QAAQ,CAAC,KAAK,GAAG,CAAC;AAAA;AAAA,MAC7C;AAAA;AAAA,EACF;AAEJ;AAGA,MAAM,cAAc,gBAAgB,EAAE,mBAAmB;AACzD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"787db584cc9becf4089365283e16f9ba747f4840"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Am=function(){return s},s}Am();Am().s[0]++;const zIe=({onChange:n=(Am().b[0][0]++,()=>{Am().f[1]++}),sourceIds:e=(Am().b[1][0]++,[]),wdKey:t,value:i,error:r,t:o})=>(Am().f[0]++,Am().s[1]++,ie.jsx(Ls,{label:o("Source"),fieldSpec:Zr.layer.source,error:r,"data-wd-key":t,children:ie.jsx(I5,{value:i,onChange:n,options:e?.map(s=>(Am().f[2]++,Am().s[2]++,[s,s]))})})),tse=(Am().s[3]++,No()(zIe));function hm(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldSourceLayer.tsx",e="61cb059654b456e27f782356448ebd0362f3cb6a",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldSourceLayer.tsx",statementMap:{0:{start:{line:6,column:33},end:{line:31,column:1}},1:{start:{line:14,column:2},end:{line:30,column:4}},2:{start:{line:26,column:46},end:{line:26,column:52}},3:{start:{line:32,column:25},end:{line:32,column:68}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:33},end:{line:6,column:34}},loc:{start:{line:13,column:6},end:{line:31,column:1}},line:13},1:{name:"(anonymous_1)",decl:{start:{line:7,column:13},end:{line:7,column:14}},loc:{start:{line:7,column:19},end:{line:8,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:26,column:39},end:{line:26,column:40}},loc:{start:{line:26,column:46},end:{line:26,column:52}},line:26}},branchMap:{0:{loc:{start:{line:7,column:2},end:{line:8,column:3}},type:"default-arg",locations:[{start:{line:7,column:13},end:{line:8,column:3}}],line:7},1:{loc:{start:{line:9,column:2},end:{line:9,column:21}},type:"default-arg",locations:[{start:{line:9,column:19},end:{line:9,column:21}}],line:9}},s:{0:0,1:0,2:0,3:0},f:{0:0,1:0,2:0},b:{0:[0],1:[0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldSourceLayer.tsx"],names:[],mappings:"AA4BM;AA1BN,SAAQ,cAAa;AACrB,OAAO,WAAW;AAClB,OAAO,uBAAuB;AAC9B,SAA+B,uBAAuB;AAStD,MAAM,2BAAoE,CAAC;AAAA,EACzE,WAAW,MAAM;AAAA,EAAC;AAAA,EAClB,iBAAiB,CAAC;AAAA,EAClB;AAAA,EACA;AAAA,EACA;AACF,MAAM;AACJ,SACE;AAAA,IAAC;AAAA;AAAA,MACC,OAAO,EAAE,cAAc;AAAA,MACvB,WAAW,OAAO,MAAM,cAAc;AAAA,MACtC,eAAY;AAAA,MACZ;AAAA,MAEA;AAAA,QAAC;AAAA;AAAA,UACC;AAAA,UACA;AAAA,UACA,SAAS,gBAAgB,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;AAAA;AAAA,MAC5C;AAAA;AAAA,EACF;AAEJ;AAEA,MAAM,mBAAmB,gBAAgB,EAAE,wBAAwB;AACnE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"61cb059654b456e27f782356448ebd0362f3cb6a"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return hm=function(){return s},s}hm();hm().s[0]++;const jIe=({onChange:n=(hm().b[0][0]++,()=>{hm().f[1]++}),sourceLayerIds:e=(hm().b[1][0]++,[]),value:t,error:i,t:r})=>(hm().f[0]++,hm().s[1]++,ie.jsx(Ls,{label:r("Source Layer"),fieldSpec:is.layer["source-layer"],"data-wd-key":"layer-source-layer",error:i,children:ie.jsx(I5,{value:t,onChange:n,options:e?.map(o=>(hm().f[2]++,hm().s[2]++,[o,o]))})})),nse=(hm().s[3]++,No()(jIe));function nL(){var n="/home/runner/work/maputnik/maputnik/src/libs/non-source-layers.ts",e="674dcf7f1706a4f312a810bdf5e5997ddaf065e0",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/non-source-layers.ts",statementMap:{0:{start:{line:1,column:33},end:{line:1,column:97}}},fnMap:{},branchMap:{},s:{0:0},f:{},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/non-source-layers.ts"],names:[],mappings:"AAAO,aAAM,oBAAoB,CAAC,cAAc,UAAU,aAAa,WAAW,cAAc;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"674dcf7f1706a4f312a810bdf5e5997ddaf065e0"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return nL=function(){return s},s}nL();const TD=(nL().s[0]++,["background","raster","hillshade","heatmap","color-relief"]);function yn(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalAdd.tsx",e="90da8e5ee6bdbe488a5f45bfae015ac94b0d70a9",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalAdd.tsx",statementMap:{0:{start:{line:12,column:13},end:{line:33,column:3}},1:{start:{line:13,column:4},end:{line:16,column:5}},2:{start:{line:13,column:38},end:{line:13,column:60}},3:{start:{line:14,column:6},end:{line:14,column:72}},4:{start:{line:15,column:6},end:{line:15,column:13}},5:{start:{line:17,column:26},end:{line:17,column:52}},6:{start:{line:18,column:18},end:{line:21,column:5}},7:{start:{line:22,column:4},end:{line:27,column:5}},8:{start:{line:23,column:6},end:{line:23,column:39}},9:{start:{line:24,column:6},end:{line:26,column:7}},10:{start:{line:25,column:8},end:{line:25,column:59}},11:{start:{line:28,column:4},end:{line:28,column:30}},12:{start:{line:29,column:4},end:{line:32,column:7}},13:{start:{line:30,column:6},end:{line:30,column:47}},14:{start:{line:31,column:6},end:{line:31,column:32}},15:{start:{line:35,column:4},end:{line:35,column:17}},16:{start:{line:36,column:18},end:{line:40,column:5}},17:{start:{line:41,column:4},end:{line:47,column:5}},18:{start:{line:42,column:6},end:{line:42,column:56}},19:{start:{line:43,column:27},end:{line:43,column:72}},20:{start:{line:44,column:6},end:{line:46,column:7}},21:{start:{line:45,column:8},end:{line:45,column:48}},22:{start:{line:48,column:4},end:{line:48,column:23}},23:{start:{line:51,column:20},end:{line:51,column:34}},24:{start:{line:52,column:20},end:{line:52,column:35}},25:{start:{line:53,column:32},end:{line:53,column:56}},26:{start:{line:54,column:32},end:{line:54,column:56}},27:{start:{line:55,column:4},end:{line:62,column:5}},28:{start:{line:59,column:6},end:{line:61,column:9}},29:{start:{line:65,column:22},end:{line:65,column:54}},30:{start:{line:66,column:4},end:{line:66,column:34}},31:{start:{line:69,column:4},end:{line:86,column:5}},32:{start:{line:71,column:8},end:{line:71,column:18}},33:{start:{line:74,column:8},end:{line:74,column:113}},34:{start:{line:74,column:69},end:{line:74,column:92}},35:{start:{line:74,column:110},end:{line:74,column:111}},36:{start:{line:76,column:8},end:{line:76,column:109}},37:{start:{line:76,column:69},end:{line:76,column:88}},38:{start:{line:76,column:106},end:{line:76,column:107}},39:{start:{line:83,column:8},end:{line:83,column:133}},40:{start:{line:83,column:69},end:{line:83,column:112}},41:{start:{line:83,column:130},end:{line:83,column:131}},42:{start:{line:85,column:8},end:{line:85,column:18}},43:{start:{line:89,column:14},end:{line:89,column:26}},44:{start:{line:90,column:20},end:{line:90,column:52}},45:{start:{line:91,column:19},end:{line:91,column:61}},46:{start:{line:93,column:4},end:{line:106,column:5}},47:{start:{line:94,column:6},end:{line:105,column:11}},48:{start:{line:100,column:27},end:{line:100,column:57}},49:{start:{line:107,column:4},end:{line:165,column:6}},50:{start:{line:124,column:18},end:{line:124,column:56}},51:{start:{line:133,column:33},end:{line:133,column:59}},52:{start:{line:142,column:33},end:{line:142,column:61}},53:{start:{line:150,column:33},end:{line:150,column:69}},54:{start:{line:168,column:17},end:{line:168,column:52}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:12,column:13},end:{line:12,column:14}},loc:{start:{line:12,column:19},end:{line:33,column:3}},line:12},1:{name:"(anonymous_1)",decl:{start:{line:13,column:31},end:{line:13,column:32}},loc:{start:{line:13,column:38},end:{line:13,column:60}},line:13},2:{name:"(anonymous_2)",decl:{start:{line:29,column:35},end:{line:29,column:36}},loc:{start:{line:29,column:41},end:{line:32,column:5}},line:29},3:{name:"(anonymous_3)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:21},end:{line:49,column:3}},line:34},4:{name:"(anonymous_4)",decl:{start:{line:50,column:2},end:{line:50,column:3}},loc:{start:{line:50,column:44},end:{line:63,column:3}},line:50},5:{name:"(anonymous_5)",decl:{start:{line:64,column:2},end:{line:64,column:3}},loc:{start:{line:64,column:29},end:{line:67,column:3}},line:64},6:{name:"(anonymous_6)",decl:{start:{line:68,column:2},end:{line:68,column:3}},loc:{start:{line:68,column:19},end:{line:87,column:3}},line:68},7:{name:"(anonymous_7)",decl:{start:{line:74,column:57},end:{line:74,column:58}},loc:{start:{line:74,column:69},end:{line:74,column:92}},line:74},8:{name:"(anonymous_8)",decl:{start:{line:74,column:98},end:{line:74,column:99}},loc:{start:{line:74,column:110},end:{line:74,column:111}},line:74},9:{name:"(anonymous_9)",decl:{start:{line:76,column:57},end:{line:76,column:58}},loc:{start:{line:76,column:69},end:{line:76,column:88}},line:76},10:{name:"(anonymous_10)",decl:{start:{line:76,column:94},end:{line:76,column:95}},loc:{start:{line:76,column:106},end:{line:76,column:107}},line:76},11:{name:"(anonymous_11)",decl:{start:{line:83,column:57},end:{line:83,column:58}},loc:{start:{line:83,column:69},end:{line:83,column:112}},line:83},12:{name:"(anonymous_12)",decl:{start:{line:83,column:118},end:{line:83,column:119}},loc:{start:{line:83,column:130},end:{line:83,column:131}},line:83},13:{name:"(anonymous_13)",decl:{start:{line:88,column:2},end:{line:88,column:3}},loc:{start:{line:88,column:11},end:{line:166,column:3}},line:88},14:{name:"(anonymous_14)",decl:{start:{line:100,column:21},end:{line:100,column:22}},loc:{start:{line:100,column:27},end:{line:100,column:57}},line:100},15:{name:"(anonymous_15)",decl:{start:{line:123,column:26},end:{line:123,column:27}},loc:{start:{line:123,column:33},end:{line:125,column:17}},line:123},16:{name:"(anonymous_16)",decl:{start:{line:133,column:26},end:{line:133,column:27}},loc:{start:{line:133,column:33},end:{line:133,column:59}},line:133},17:{name:"(anonymous_17)",decl:{start:{line:142,column:26},end:{line:142,column:27}},loc:{start:{line:142,column:33},end:{line:142,column:61}},line:142},18:{name:"(anonymous_18)",decl:{start:{line:150,column:26},end:{line:150,column:27}},loc:{start:{line:150,column:33},end:{line:150,column:69}},line:150}},branchMap:{0:{loc:{start:{line:13,column:4},end:{line:16,column:5}},type:"if",locations:[{start:{line:13,column:4},end:{line:16,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:13},1:{loc:{start:{line:22,column:4},end:{line:27,column:5}},type:"if",locations:[{start:{line:22,column:4},end:{line:27,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:22},2:{loc:{start:{line:24,column:6},end:{line:26,column:7}},type:"if",locations:[{start:{line:24,column:6},end:{line:26,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:24},3:{loc:{start:{line:24,column:10},end:{line:24,column:84}},type:"binary-expr",locations:[{start:{line:24,column:10},end:{line:24,column:54}},{start:{line:24,column:58},end:{line:24,column:84}}],line:24},4:{loc:{start:{line:41,column:4},end:{line:47,column:5}},type:"if",locations:[{start:{line:41,column:4},end:{line:47,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:41},5:{loc:{start:{line:43,column:27},end:{line:43,column:72}},type:"binary-expr",locations:[{start:{line:43,column:27},end:{line:43,column:66}},{start:{line:43,column:70},end:{line:43,column:72}}],line:43},6:{loc:{start:{line:44,column:6},end:{line:46,column:7}},type:"if",locations:[{start:{line:44,column:6},end:{line:46,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:44},7:{loc:{start:{line:55,column:4},end:{line:62,column:5}},type:"if",locations:[{start:{line:55,column:4},end:{line:62,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:55},8:{loc:{start:{line:57,column:6},end:{line:57,column:160}},type:"binary-expr",locations:[{start:{line:57,column:6},end:{line:57,column:25}},{start:{line:57,column:29},end:{line:57,column:52}},{start:{line:57,column:56},end:{line:57,column:106}},{start:{line:57,column:110},end:{line:57,column:160}}],line:57},9:{loc:{start:{line:65,column:22},end:{line:65,column:54}},type:"binary-expr",locations:[{start:{line:65,column:22},end:{line:65,column:48}},{start:{line:65,column:52},end:{line:65,column:54}}],line:65},10:{loc:{start:{line:66,column:11},end:{line:66,column:33}},type:"binary-expr",locations:[{start:{line:66,column:11},end:{line:66,column:27}},{start:{line:66,column:31},end:{line:66,column:33}}],line:66},11:{loc:{start:{line:69,column:4},end:{line:86,column:5}},type:"switch",locations:[{start:{line:70,column:6},end:{line:71,column:18}},{start:{line:72,column:6},end:{line:72,column:23}},{start:{line:73,column:6},end:{line:74,column:113}},{start:{line:75,column:6},end:{line:76,column:109}},{start:{line:77,column:6},end:{line:77,column:21}},{start:{line:78,column:6},end:{line:78,column:20}},{start:{line:79,column:6},end:{line:79,column:18}},{start:{line:80,column:6},end:{line:80,column:28}},{start:{line:81,column:6},end:{line:81,column:18}},{start:{line:82,column:6},end:{line:83,column:133}},{start:{line:84,column:6},end:{line:85,column:18}}],line:69},12:{loc:{start:{line:83,column:69},end:{line:83,column:112}},type:"binary-expr",locations:[{start:{line:83,column:69},end:{line:83,column:88}},{start:{line:83,column:92},end:{line:83,column:112}}],line:83},13:{loc:{start:{line:93,column:4},end:{line:106,column:5}},type:"if",locations:[{start:{line:93,column:4},end:{line:106,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:93},14:{loc:{start:{line:136,column:12},end:{line:144,column:13}},type:"binary-expr",locations:[{start:{line:136,column:12},end:{line:136,column:44}},{start:{line:136,column:64},end:{line:144,column:13}}],line:136},15:{loc:{start:{line:145,column:12},end:{line:152,column:13}},type:"binary-expr",locations:[{start:{line:145,column:12},end:{line:145,column:56}},{start:{line:145,column:76},end:{line:152,column:13}}],line:145}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0,0,0],9:[0,0],10:[0,0],11:[0,0,0,0,0,0,0,0,0,0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalAdd.tsx"],names:[],mappings:"AAqIQ,SAEE,KAFF;AArIR,OAAO,WAAW;AAClB,SAA+B,uBAAuB;AAGtD,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,OAAO,eAAe;AACtB,OAAO,aAAa;AACpB,OAAO,iBAAiB;AACxB,OAAO,sBAAsB;AAC7B,SAAS,yBAAyB;AAmBlC,MAAM,yBAAyB,MAAM,UAAgD;AAAA,EACnF,WAAW,MAAM;AACf,QAAI,KAAK,MAAM,OAAO,KAAK,OAAK,EAAE,OAAO,KAAK,MAAM,EAAE,GAAG;AACvD,WAAK,SAAS,EAAE,OAAO,KAAK,MAAM,EAAE,yBAAyB,EAAE,CAAC;AAChE;AAAA,IACF;AAEA,UAAM,gBAAgB,KAAK,MAAM,OAAO,MAAM,CAAC;AAC/C,UAAM,QAAuB;AAAA,MAC3B,IAAI,KAAK,MAAM;AAAA,MACf,MAAM,KAAK,MAAM;AAAA,IACnB;AAEA,QAAG,KAAK,MAAM,SAAS,cAAc;AACnC,YAAM,SAAS,KAAK,MAAM;AAC1B,UAAG,CAAC,kBAAkB,SAAS,KAAK,MAAM,IAAI,KAAK,KAAK,MAAM,cAAc,GAAG;AAC7E,cAAM,cAAc,IAAI,KAAK,MAAM,cAAc;AAAA,MACnD;AAAA,IACF;AAEA,kBAAc,KAAK,KAA2B;AAC9C,SAAK,SAAS,EAAE,OAAO,KAAK,GAAG,MAAM;AACnC,WAAK,MAAM,eAAe,aAAa;AACvC,WAAK,MAAM,aAAa;AAAA,IAC1B,CAAC;AAAA,EACH;AAAA,EAEA,YAAY,OAA8B;AACxC,UAAM,KAAK;AACX,UAAM,QAAuB;AAAA,MAC3B,MAAM;AAAA,MACN,IAAI;AAAA,MACJ,OAAO;AAAA,IACT;AAEA,QAAG,OAAO,KAAK,MAAM,OAAO,EAAE,SAAS,GAAG;AACxC,YAAM,SAAS,OAAO,KAAK,KAAK,MAAM,OAAO,EAAE,CAAC;AAChD,YAAM,eAAe,KAAK,MAAM,QAAQ,MAAM,MAAM,EAAE,UAAU,CAAC;AACjE,UAAI,aAAa,SAAS,GAAG;AAC3B,cAAM,cAAc,IAAI,aAAa,CAAC;AAAA,MACxC;AAAA,IACF;AACA,SAAK,QAAQ;AAAA,EACf;AAAA,EAEA,mBAAmB,YAAmC,WAA0B;AAE9E,UAAM,UAAU,UAAU;AAC1B,UAAM,UAAU,KAAK,MAAM;AAE3B,UAAM,sBAAsB,KAAK,WAAW,OAAO;AACnD,UAAM,sBAAsB,KAAK,WAAW,OAAO;AAEnD;AAAA;AAAA,MAEE,YAAY,WACT,UAAU,WAAW,MAErB,oBAAoB,QAAQ,UAAU,MAAO,IAAI,MAEjD,oBAAoB,QAAQ,KAAK,MAAM,MAAO,IAAI;AAAA,MACrD;AAEA,WAAK,SAAS;AAAA,QACZ,QAAQ;AAAA,MACV,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,mBAAmB,QAAgB;AACjC,UAAM,YAAY,KAAK,MAAM,QAAQ,MAAM,KAAK,CAAC;AACjD,WAAO,UAAU,UAAU,CAAC;AAAA,EAC9B;AAAA,EAEA,WAAW,MAAkC;AAE3C,YAAO,MAAM;AAAA,MACX,KAAK;AACH,eAAO,CAAC;AAAA,MACV,KAAK;AAAA,MACL,KAAK;AACH,eAAO,OAAO,QAAQ,KAAK,MAAM,OAAO,EAAE,OAAO,CAAC,CAAC,GAAG,CAAC,MAAM,EAAE,SAAS,YAAY,EAAE,IAAI,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC;AAAA,MACzG,KAAK;AACH,eAAO,OAAO,QAAQ,KAAK,MAAM,OAAO,EAAE,OAAO,CAAC,CAAC,GAAG,CAAC,MAAM,EAAE,SAAS,QAAQ,EAAE,IAAI,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC;AAAA,MACrG,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AACH,eAAO,OAAO,QAAQ,KAAK,MAAM,OAAO,EAAE,OAAO,CAAC,CAAC,GAAG,CAAC,MAAM,EAAE,SAAS,YAAY,EAAE,SAAS,SAAS,EAAE,IAAI,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC;AAAA,MAC7H;AACE,eAAO,CAAC;AAAA,IACZ;AAAA,EACF;AAAA,EAGA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,UAAU,KAAK,WAAW,KAAK,MAAM,IAAI;AAC/C,UAAM,SAAS,KAAK,mBAAmB,KAAK,MAAM,MAAO;AACzD,QAAI;AACJ,QAAI,KAAK,MAAM,OAAO;AACpB,qBACE,qBAAC,SAAI,WAAU,wBACZ;AAAA,aAAK,MAAM;AAAA,QACZ;AAAA,UAAC;AAAA;AAAA,YACC,MAAK;AAAA,YACL,SAAS,MAAM,KAAK,SAAS,EAAE,OAAO,KAAK,CAAC;AAAA,YAC5C,WAAU;AAAA,YACX;AAAA;AAAA,QAED;AAAA,SACF;AAAA,IAEJ;AAEA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,WAAW;AAAA,QACpB,eAAY;AAAA,QACZ,WAAU;AAAA,QAET;AAAA;AAAA,UACD,qBAAC,SAAI,WAAU,sBACb;AAAA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,KAAK,MAAM;AAAA,gBAClB,OAAM;AAAA,gBACN,UAAU,CAAC,MAAc;AACvB,uBAAK,SAAS,EAAE,IAAI,GAAG,OAAO,KAAK,CAAC;AAAA,gBACtC;AAAA;AAAA,YACF;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,KAAK,MAAM;AAAA,gBAClB,OAAM;AAAA,gBACN,UAAU,CAAC,MAAkC,KAAK,SAAS,EAAE,MAAM,EAAE,CAAC;AAAA;AAAA,YACxE;AAAA,YACC,KAAK,MAAM,SAAS,gBACvB;AAAA,cAAC;AAAA;AAAA,gBACC,WAAW;AAAA,gBACX,OAAM;AAAA,gBACN,OAAO,KAAK,MAAM;AAAA,gBAClB,UAAU,CAAC,MAAc,KAAK,SAAS,EAAE,QAAQ,EAAE,CAAC;AAAA;AAAA,YACtD;AAAA,YAEG,CAAC,kBAAkB,SAAS,KAAK,MAAM,IAAI,KAC9C;AAAA,cAAC;AAAA;AAAA,gBACC,gBAAgB;AAAA,gBAChB,OAAO,KAAK,MAAM,cAAc;AAAA,gBAChC,UAAU,CAAC,MAAc,KAAK,SAAS,EAAE,gBAAgB,EAAE,CAAC;AAAA;AAAA,YAC9D;AAAA,YAEE;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,SAAS,KAAK;AAAA,gBACd,eAAY;AAAA,gBAEX,YAAE,WAAW;AAAA;AAAA,YAChB;AAAA,aACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,WAAW,gBAAgB,EAAE,gBAAgB;AACnD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"90da8e5ee6bdbe488a5f45bfae015ac94b0d70a9"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return yn=function(){return s},s}yn();class NIe extends En.Component{addLayer=(yn().s[0]++,()=>{if(yn().f[0]++,yn().s[1]++,this.props.layers.some(i=>(yn().f[1]++,yn().s[2]++,i.id===this.state.id))){yn().b[0][0]++,yn().s[3]++,this.setState({error:this.props.t("Layer ID already exists")}),yn().s[4]++;return}else yn().b[0][1]++;const e=(yn().s[5]++,this.props.layers.slice(0)),t=(yn().s[6]++,{id:this.state.id,type:this.state.type});yn().s[7]++,this.state.type!=="background"?(yn().b[1][0]++,yn().s[8]++,t.source=this.state.source,yn().s[9]++,yn().b[3][0]++,!TD.includes(this.state.type)&&(yn().b[3][1]++,this.state["source-layer"])?(yn().b[2][0]++,yn().s[10]++,t["source-layer"]=this.state["source-layer"]):yn().b[2][1]++):yn().b[1][1]++,yn().s[11]++,e.push(t),yn().s[12]++,this.setState({error:null},()=>{yn().f[2]++,yn().s[13]++,this.props.onLayersChange(e),yn().s[14]++,this.props.onOpenToggle()})});constructor(e){yn().f[3]++,yn().s[15]++,super(e);const t=(yn().s[16]++,{type:"fill",id:"",error:null});if(yn().s[17]++,Object.keys(e.sources).length>0){yn().b[4][0]++,yn().s[18]++,t.source=Object.keys(this.props.sources)[0];const i=(yn().s[19]++,yn().b[5][0]++,this.props.sources[t.source].layers||(yn().b[5][1]++,[]));yn().s[20]++,i.length>0?(yn().b[6][0]++,yn().s[21]++,t["source-layer"]=i[0]):yn().b[6][1]++}else yn().b[4][1]++;yn().s[22]++,this.state=t}componentDidUpdate(e,t){yn().f[4]++;const i=(yn().s[23]++,t.type),r=(yn().s[24]++,this.state.type),o=(yn().s[25]++,this.getSources(i)),s=(yn().s[26]++,this.getSources(r));yn().s[27]++,yn().b[8][0]++,i!==r&&(yn().b[8][1]++,t.source!=="")&&(yn().b[8][2]++,o.indexOf(t.source)>-1)&&(yn().b[8][3]++,s.indexOf(this.state.source)<0)?(yn().b[7][0]++,yn().s[28]++,this.setState({source:""})):yn().b[7][1]++}getLayersForSource(e){yn().f[5]++;const t=(yn().s[29]++,yn().b[9][0]++,this.props.sources[e]||(yn().b[9][1]++,{}));return yn().s[30]++,yn().b[10][0]++,t.layers||(yn().b[10][1]++,[])}getSources(e){switch(yn().f[6]++,yn().s[31]++,e){case"background":return yn().b[11][0]++,yn().s[32]++,[];case"hillshade":yn().b[11][1]++;case"color-relief":return yn().b[11][2]++,yn().s[33]++,Object.entries(this.props.sources).filter(([t,i])=>(yn().f[7]++,yn().s[34]++,i.type==="raster-dem")).map(([t,i])=>(yn().f[8]++,yn().s[35]++,t));case"raster":return yn().b[11][3]++,yn().s[36]++,Object.entries(this.props.sources).filter(([t,i])=>(yn().f[9]++,yn().s[37]++,i.type==="raster")).map(([t,i])=>(yn().f[10]++,yn().s[38]++,t));case"heatmap":yn().b[11][4]++;case"circle":yn().b[11][5]++;case"fill":yn().b[11][6]++;case"fill-extrusion":yn().b[11][7]++;case"line":yn().b[11][8]++;case"symbol":return yn().b[11][9]++,yn().s[39]++,Object.entries(this.props.sources).filter(([t,i])=>(yn().f[11]++,yn().s[40]++,yn().b[12][0]++,i.type==="vector"||(yn().b[12][1]++,i.type==="geojson"))).map(([t,i])=>(yn().f[12]++,yn().s[41]++,t));default:return yn().b[11][10]++,yn().s[42]++,[]}}render(){yn().f[13]++;const e=(yn().s[43]++,this.props.t),t=(yn().s[44]++,this.getSources(this.state.type)),i=(yn().s[45]++,this.getLayersForSource(this.state.source));let r;return yn().s[46]++,this.state.error?(yn().b[13][0]++,yn().s[47]++,r=ie.jsxs("div",{className:"maputnik-modal-error",children:[this.state.error,ie.jsx("a",{href:"#",onClick:()=>(yn().f[14]++,yn().s[48]++,this.setState({error:null})),className:"maputnik-modal-error-close",children:""})]})):yn().b[13][1]++,yn().s[49]++,ie.jsxs(C1,{isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Add Layer"),"data-wd-key":"modal:add-layer",className:"maputnik-add-modal",children:[r,ie.jsxs("div",{className:"maputnik-add-layer",children:[ie.jsx(Koe,{value:this.state.id,wdKey:"add-layer.layer-id",onChange:o=>{yn().f[15]++,yn().s[50]++,this.setState({id:o,error:null})}}),ie.jsx(Uoe,{value:this.state.type,wdKey:"add-layer.layer-type",onChange:o=>(yn().f[16]++,yn().s[51]++,this.setState({type:o}))}),(yn().b[14][0]++,this.state.type!=="background"&&(yn().b[14][1]++,ie.jsx(tse,{sourceIds:t,wdKey:"add-layer.layer-source-block",value:this.state.source,onChange:o=>(yn().f[17]++,yn().s[52]++,this.setState({source:o}))}))),(yn().b[15][0]++,!TD.includes(this.state.type)&&(yn().b[15][1]++,ie.jsx(nse,{sourceLayerIds:i,value:this.state["source-layer"],onChange:o=>(yn().f[18]++,yn().s[53]++,this.setState({"source-layer":o}))}))),ie.jsx(Zs,{className:"maputnik-add-layer-button",onClick:this.addLayer,"data-wd-key":"add-layer",children:e("Add Layer")})]})]})}}const GIe=(yn().s[54]++,No()(NIe));function bb(){var n="/home/runner/work/maputnik/maputnik/src/libs/document-uid.ts",e="a991ed6da2a27b46f1adbb88a645aa2ee0df375e",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/document-uid.ts",statementMap:{0:{start:{line:1,column:10},end:{line:1,column:11}},1:{start:{line:3,column:2},end:{line:3,column:8}},2:{start:{line:4,column:2},end:{line:4,column:22}}},fnMap:{0:{name:"generateUniqueId",decl:{start:{line:2,column:24},end:{line:2,column:40}},loc:{start:{line:2,column:54},end:{line:5,column:1}},line:2}},branchMap:{0:{loc:{start:{line:2,column:41},end:{line:2,column:52}},type:"default-arg",locations:[{start:{line:2,column:50},end:{line:2,column:52}}],line:2}},s:{0:0,1:0,2:0},f:{0:0},b:{0:[0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/document-uid.ts"],names:[],mappings:"AAGA,IAAI,MAAM;AAEV,wBAAwB,iBAAiB,SAAO,IAAI;AAClD;AACA,SAAO,SAAO;AAChB;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a991ed6da2a27b46f1adbb88a645aa2ee0df375e"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return bb=function(){return s},s}bb();let yQ=(bb().s[0]++,0);function Ox(n=(bb().b[0][0]++,"")){return bb().f[0]++,bb().s[1]++,yQ++,bb().s[2]++,n+yQ}function dr(){var n="/home/runner/work/maputnik/maputnik/src/libs/layer.ts",e="6a81b3c8ffc06f88598225aa1f9b90e3bb6da08e",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/layer.ts",statementMap:{0:{start:{line:3,column:28},end:{line:3,column:46}},1:{start:{line:4,column:2},end:{line:8,column:5}},2:{start:{line:5,column:4},end:{line:7,column:5}},3:{start:{line:6,column:6},end:{line:6,column:45}},4:{start:{line:9,column:29},end:{line:9,column:48}},5:{start:{line:10,column:2},end:{line:14,column:5}},6:{start:{line:11,column:4},end:{line:13,column:5}},7:{start:{line:12,column:6},end:{line:12,column:46}},8:{start:{line:15,column:2},end:{line:20,column:4}},9:{start:{line:23,column:2},end:{line:59,column:3}},10:{start:{line:24,column:4},end:{line:43,column:5}},11:{start:{line:25,column:23},end:{line:31,column:7}},12:{start:{line:32,column:6},end:{line:32,column:39}},13:{start:{line:33,column:6},end:{line:35,column:7}},14:{start:{line:34,column:8},end:{line:34,column:31}},15:{start:{line:36,column:6},end:{line:36,column:22}},16:{start:{line:38,column:23},end:{line:40,column:7}},17:{start:{line:41,column:6},end:{line:41,column:32}},18:{start:{line:42,column:6},end:{line:42,column:22}},19:{start:{line:45,column:4},end:{line:58,column:5}},20:{start:{line:46,column:6},end:{line:52,column:8}},21:{start:{line:54,column:6},end:{line:57,column:8}},22:{start:{line:62,column:2},end:{line:62,column:64}},23:{start:{line:65,column:29},end:{line:65,column:56}},24:{start:{line:66,column:19},end:{line:66,column:22}},25:{start:{line:67,column:2},end:{line:74,column:3}},26:{start:{line:67,column:15},end:{line:67,column:18}},27:{start:{line:68,column:32},end:{line:68,column:61}},28:{start:{line:69,column:4},end:{line:73,column:5}},29:{start:{line:70,column:6},end:{line:70,column:25}},30:{start:{line:72,column:6},end:{line:72,column:24}},31:{start:{line:75,column:2},end:{line:75,column:20}}},fnMap:{0:{name:"changeType",decl:{start:{line:2,column:16},end:{line:2,column:26}},loc:{start:{line:2,column:43},end:{line:21,column:1}},line:2},1:{name:"(anonymous_1)",decl:{start:{line:4,column:41},end:{line:4,column:42}},loc:{start:{line:4,column:59},end:{line:8,column:3}},line:4},2:{name:"(anonymous_2)",decl:{start:{line:10,column:42},end:{line:10,column:43}},loc:{start:{line:10,column:60},end:{line:14,column:3}},line:10},3:{name:"changeProperty",decl:{start:{line:22,column:16},end:{line:22,column:30}},loc:{start:{line:22,column:65},end:{line:60,column:1}},line:22},4:{name:"layerPrefix",decl:{start:{line:61,column:16},end:{line:61,column:27}},loc:{start:{line:61,column:34},end:{line:63,column:1}},line:61},5:{name:"findClosestCommonPrefix",decl:{start:{line:64,column:16},end:{line:64,column:39}},loc:{start:{line:64,column:53},end:{line:76,column:1}},line:64}},branchMap:{0:{loc:{start:{line:5,column:4},end:{line:7,column:5}},type:"if",locations:[{start:{line:5,column:4},end:{line:7,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:5},1:{loc:{start:{line:11,column:4},end:{line:13,column:5}},type:"if",locations:[{start:{line:11,column:4},end:{line:13,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:11},2:{loc:{start:{line:23,column:2},end:{line:59,column:3}},type:"if",locations:[{start:{line:23,column:2},end:{line:59,column:3}},{start:{line:44,column:9},end:{line:59,column:3}}],line:23},3:{loc:{start:{line:24,column:4},end:{line:43,column:5}},type:"if",locations:[{start:{line:24,column:4},end:{line:43,column:5}},{start:{line:37,column:11},end:{line:43,column:5}}],line:24},4:{loc:{start:{line:33,column:6},end:{line:35,column:7}},type:"if",locations:[{start:{line:33,column:6},end:{line:35,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:33},5:{loc:{start:{line:45,column:4},end:{line:58,column:5}},type:"if",locations:[{start:{line:45,column:4},end:{line:58,column:5}},{start:{line:53,column:11},end:{line:58,column:5}}],line:45},6:{loc:{start:{line:69,column:4},end:{line:73,column:5}},type:"if",locations:[{start:{line:69,column:4},end:{line:73,column:5}},{start:{line:71,column:11},end:{line:73,column:5}}],line:69}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/layer.ts"],names:[],mappings:"AAAA,SAAQ,cAAa;AAId,gBAAS,WAAW,OAA2B,SAAqC;AACzF,QAAM,oBAAiD,EAAE,GAAG,MAAM,MAAM;AACxE,SAAO,KAAK,iBAAiB,EAAE,QAAQ,kBAAgB;AACrD,QAAG,EAAE,gBAAgB,OAAO,WAAW,OAAO,IAAI;AAChD,aAAO,kBAAkB,YAAiD;AAAA,IAC5E;AAAA,EACF,CAAC;AAED,QAAM,qBAAmD,EAAE,GAAG,MAAM,OAAO;AAC3E,SAAO,KAAK,kBAAkB,EAAE,QAAQ,kBAAgB;AACtD,QAAG,EAAE,gBAAgB,OAAO,YAAY,OAAO,IAAI;AACjD,aAAO,mBAAmB,YAAkD;AAAA,IAC9E;AAAA,EACF,CAAC;AAED,SAAO;AAAA,IACL,GAAG;AAAA,IACH,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,MAAM;AAAA,EACR;AACF;AAKO,gBAAS,eAAe,OAA2B,OAAwC,UAAkB,UAAe;AAEjI,MAAG,aAAa,QAAW;AACzB,QAAG,OAAO;AACR,YAAM,WAAgB;AAAA,QACpB,GAAG;AAAA;AAAA,QAEH,CAAC,KAAK,GAAG;AAAA,UACP,GAAG,MAAM,KAAK;AAAA,QAChB;AAAA,MACF;AACA,aAAO,SAAS,KAAK,EAAE,QAAQ;AAG/B,UAAG,OAAO,KAAK,SAAS,KAAK,CAAC,EAAE,SAAS,GAAG;AAC1C,eAAO,SAAS,KAAK;AAAA,MACvB;AACA,aAAO;AAAA,IACT,OAAO;AACL,YAAM,WAAgB;AAAA,QACpB,GAAG;AAAA,MACL;AACA,aAAO,SAAS,QAAQ;AACxB,aAAO;AAAA,IACT;AAAA,EACF,OACK;AACH,QAAG,OAAO;AACR,aAAO;AAAA,QACL,GAAG;AAAA,QACH,CAAC,KAAK,GAAG;AAAA,UACP,GAAG,MAAM,KAAK;AAAA,UACd,CAAC,QAAQ,GAAG;AAAA,QACd;AAAA,MACF;AAAA,IACF,OAAO;AACL,aAAO;AAAA,QACL,GAAG;AAAA,QACH,CAAC,QAAQ,GAAG;AAAA,MACd;AAAA,IACF;AAAA,EACF;AACF;AAEO,gBAAS,YAAY,MAAc;AACxC,SAAO,KAAK,QAAQ,KAAK,GAAG,EAAE,QAAQ,KAAK,GAAG,EAAE,MAAM,GAAG,EAAE,CAAC;AAC9D;AAEO,gBAAS,wBAAwB,QAA8B,KAAa;AACjF,QAAM,qBAAqB,YAAY,OAAO,GAAG,EAAE,EAAE;AACrD,MAAI,aAAa;AACjB,WAAS,IAAI,KAAK,IAAI,GAAG,KAAK;AAC5B,UAAM,sBAAsB,YAAY,OAAO,IAAE,CAAC,EAAE,EAAE;AACtD,QAAG,wBAAwB,oBAAoB;AAC7C,mBAAa,IAAI;AAAA,IACnB,OAAO;AACL,aAAO;AAAA,IACT;AAAA,EACF;AACA,SAAO;AACT;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"6a81b3c8ffc06f88598225aa1f9b90e3bb6da08e"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return dr=function(){return s},s}dr();function WIe(n,e){dr().f[0]++;const t=(dr().s[0]++,{...n.paint});dr().s[1]++,Object.keys(t).forEach(r=>{dr().f[1]++,dr().s[2]++,r in is["paint_"+e]?dr().b[0][1]++:(dr().b[0][0]++,dr().s[3]++,delete t[r])});const i=(dr().s[4]++,{...n.layout});return dr().s[5]++,Object.keys(i).forEach(r=>{dr().f[2]++,dr().s[6]++,r in is["layout_"+e]?dr().b[1][1]++:(dr().b[1][0]++,dr().s[7]++,delete i[r])}),dr().s[8]++,{...n,paint:t,layout:i,type:e}}function QIe(n,e,t,i){if(dr().f[3]++,dr().s[9]++,i===void 0)if(dr().b[2][0]++,dr().s[10]++,e){dr().b[3][0]++;const r=(dr().s[11]++,{...n,[e]:{...n[e]}});return dr().s[12]++,delete r[e][t],dr().s[13]++,Object.keys(r[e]).length<1?(dr().b[4][0]++,dr().s[14]++,delete r[e]):dr().b[4][1]++,dr().s[15]++,r}else{dr().b[3][1]++;const r=(dr().s[16]++,{...n});return dr().s[17]++,delete r[t],dr().s[18]++,r}else return dr().b[2][1]++,dr().s[19]++,e?(dr().b[5][0]++,dr().s[20]++,{...n,[e]:{...n[e],[t]:i}}):(dr().b[5][1]++,dr().s[21]++,{...n,[t]:i})}function D_(n){return dr().f[4]++,dr().s[22]++,n.replace(" ","-").replace("_","-").split("-")[0]}function qIe(n,e){dr().f[5]++;const t=(dr().s[23]++,D_(n[e].id));let i=(dr().s[24]++,e);dr().s[25]++;for(let r=(dr().s[26]++,e);r>0;r--){const o=(dr().s[27]++,D_(n[r-1].id));if(dr().s[28]++,o===t)dr().b[6][0]++,dr().s[29]++,i=r-1;else return dr().b[6][1]++,dr().s[30]++,i}return dr().s[31]++,i}function Ft(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerList.tsx",e="f68294db07afb93676beed55b7a9de47e3a7c779",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/LayerList.tsx",statementMap:{0:{start:{line:23,column:24},end:{line:26,column:3}},1:{start:{line:30,column:4},end:{line:30,column:17}},2:{start:{line:31,column:4},end:{line:31,column:45}},3:{start:{line:32,column:4},end:{line:32,column:48}},4:{start:{line:33,column:4},end:{line:42,column:6}},5:{start:{line:45,column:4},end:{line:54,column:7}},6:{start:{line:56,column:17},end:{line:73,column:3}},7:{start:{line:57,column:14},end:{line:57,column:15}},8:{start:{line:58,column:22},end:{line:58,column:24}},9:{start:{line:59,column:4},end:{line:68,column:7}},10:{start:{line:60,column:26},end:{line:60,column:51}},11:{start:{line:61,column:24},end:{line:61,column:52}},12:{start:{line:62,column:6},end:{line:64,column:7}},13:{start:{line:63,column:8},end:{line:63,column:63}},14:{start:{line:65,column:6},end:{line:67,column:9}},15:{start:{line:66,column:8},end:{line:66,column:17}},16:{start:{line:69,column:4},end:{line:72,column:7}},17:{start:{line:75,column:19},end:{line:75,column:21}},18:{start:{line:76,column:41},end:{line:76,column:50}},19:{start:{line:77,column:4},end:{line:94,column:5}},20:{start:{line:77,column:17},end:{line:77,column:18}},21:{start:{line:78,column:24},end:{line:78,column:44}},22:{start:{line:79,column:28},end:{line:79,column:52}},23:{start:{line:80,column:6},end:{line:83,column:8}},24:{start:{line:84,column:20},end:{line:87,column:7}},25:{start:{line:88,column:6},end:{line:93,column:7}},26:{start:{line:89,column:26},end:{line:89,column:51}},27:{start:{line:90,column:8},end:{line:90,column:30}},28:{start:{line:92,column:8},end:{line:92,column:29}},29:{start:{line:95,column:4},end:{line:95,column:18}},30:{start:{line:98,column:22},end:{line:98,column:50}},31:{start:{line:99,column:22},end:{line:99,column:55}},32:{start:{line:100,column:4},end:{line:104,column:5}},33:{start:{line:101,column:6},end:{line:101,column:68}},34:{start:{line:103,column:6},end:{line:103,column:35}},35:{start:{line:105,column:4},end:{line:107,column:7}},36:{start:{line:110,column:22},end:{line:110,column:78}},37:{start:{line:111,column:4},end:{line:111,column:51}},38:{start:{line:114,column:4},end:{line:116,column:5}},39:{start:{line:115,column:6},end:{line:115,column:18}},40:{start:{line:118,column:18},end:{line:120,column:7}},41:{start:{line:121,column:6},end:{line:125,column:7}},42:{start:{line:122,column:8},end:{line:124,column:10}},43:{start:{line:126,column:6},end:{line:126,column:17}},44:{start:{line:128,column:24},end:{line:131,column:5}},45:{start:{line:133,column:18},end:{line:135,column:7}},46:{start:{line:136,column:6},end:{line:136,column:27}},47:{start:{line:137,column:6},end:{line:137,column:17}},48:{start:{line:139,column:23},end:{line:142,column:5}},49:{start:{line:143,column:25},end:{line:143,column:53}},50:{start:{line:144,column:4},end:{line:144,column:24}},51:{start:{line:147,column:4},end:{line:163,column:5}},52:{start:{line:148,column:31},end:{line:148,column:59}},53:{start:{line:149,column:6},end:{line:162,column:7}},54:{start:{line:150,column:23},end:{line:150,column:44}},55:{start:{line:151,column:24},end:{line:154,column:9}},56:{start:{line:155,column:25},end:{line:160,column:19}},57:{start:{line:156,column:10},end:{line:156,column:37}},58:{start:{line:157,column:10},end:{line:159,column:11}},59:{start:{line:158,column:12},end:{line:158,column:36}},60:{start:{line:161,column:8},end:{line:161,column:33}},61:{start:{line:166,column:22},end:{line:166,column:24}},62:{start:{line:167,column:14},end:{line:167,column:15}},63:{start:{line:168,column:26},end:{line:168,column:46}},64:{start:{line:169,column:4},end:{line:219,column:7}},65:{start:{line:170,column:26},end:{line:170,column:51}},66:{start:{line:171,column:6},end:{line:184,column:7}},67:{start:{line:172,column:36},end:{line:182,column:9}},68:{start:{line:176,column:47},end:{line:176,column:52}},69:{start:{line:183,column:8},end:{line:183,column:28}},70:{start:{line:185,column:6},end:{line:218,column:9}},71:{start:{line:186,column:25},end:{line:186,column:72}},72:{start:{line:187,column:27},end:{line:189,column:10}},73:{start:{line:188,column:10},end:{line:188,column:97}},74:{start:{line:190,column:32},end:{line:190,column:34}},75:{start:{line:191,column:8},end:{line:193,column:9}},76:{start:{line:192,column:10},end:{line:192,column:53}},77:{start:{line:194,column:41},end:{line:215,column:9}},78:{start:{line:216,column:8},end:{line:216,column:33}},79:{start:{line:217,column:8},end:{line:217,column:17}},80:{start:{line:220,column:14},end:{line:220,column:26}},81:{start:{line:221,column:4},end:{line:274,column:6}},82:{start:{line:277,column:27},end:{line:277,column:72}},83:{start:{line:278,column:18},end:{line:291,column:1}},84:{start:{line:279,column:18},end:{line:279,column:97}},85:{start:{line:280,column:24},end:{line:288,column:3}},86:{start:{line:281,column:29},end:{line:281,column:34}},87:{start:{line:282,column:4},end:{line:282,column:22}},88:{start:{line:282,column:15},end:{line:282,column:22}},89:{start:{line:283,column:21},end:{line:283,column:78}},90:{start:{line:283,column:55},end:{line:283,column:77}},91:{start:{line:284,column:21},end:{line:284,column:76}},92:{start:{line:284,column:55},end:{line:284,column:75}},93:{start:{line:285,column:4},end:{line:287,column:5}},94:{start:{line:286,column:6},end:{line:286,column:48}},95:{start:{line:289,column:19},end:{line:289,column:56}},96:{start:{line:289,column:47},end:{line:289,column:55}},97:{start:{line:290,column:2},end:{line:290,column:288}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:24,column:19},end:{line:24,column:20}},loc:{start:{line:24,column:25},end:{line:25,column:5}},line:24},1:{name:"(anonymous_1)",decl:{start:{line:29,column:2},end:{line:29,column:3}},loc:{start:{line:29,column:21},end:{line:43,column:3}},line:29},2:{name:"(anonymous_2)",decl:{start:{line:44,column:2},end:{line:44,column:3}},loc:{start:{line:44,column:25},end:{line:55,column:3}},line:44},3:{name:"(anonymous_3)",decl:{start:{line:56,column:17},end:{line:56,column:18}},loc:{start:{line:56,column:23},end:{line:73,column:3}},line:56},4:{name:"(anonymous_4)",decl:{start:{line:59,column:33},end:{line:59,column:34}},loc:{start:{line:59,column:45},end:{line:68,column:5}},line:59},5:{name:"(anonymous_5)",decl:{start:{line:65,column:21},end:{line:65,column:22}},loc:{start:{line:65,column:33},end:{line:67,column:7}},line:65},6:{name:"(anonymous_6)",decl:{start:{line:74,column:2},end:{line:74,column:3}},loc:{start:{line:74,column:18},end:{line:96,column:3}},line:74},7:{name:"(anonymous_7)",decl:{start:{line:97,column:2},end:{line:97,column:3}},loc:{start:{line:97,column:37},end:{line:108,column:3}},line:97},8:{name:"(anonymous_8)",decl:{start:{line:109,column:2},end:{line:109,column:3}},loc:{start:{line:109,column:32},end:{line:112,column:3}},line:109},9:{name:"(anonymous_9)",decl:{start:{line:113,column:2},end:{line:113,column:3}},loc:{start:{line:113,column:46},end:{line:145,column:3}},line:113},10:{name:"getRequiredProps",decl:{start:{line:117,column:13},end:{line:117,column:29}},loc:{start:{line:117,column:37},end:{line:127,column:5}},line:117},11:{name:"withoutLayers",decl:{start:{line:132,column:13},end:{line:132,column:26}},loc:{start:{line:132,column:34},end:{line:138,column:5}},line:132},12:{name:"(anonymous_12)",decl:{start:{line:146,column:2},end:{line:146,column:3}},loc:{start:{line:146,column:32},end:{line:164,column:3}},line:146},13:{name:"(anonymous_13)",decl:{start:{line:155,column:50},end:{line:155,column:51}},loc:{start:{line:155,column:63},end:{line:160,column:9}},line:155},14:{name:"(anonymous_14)",decl:{start:{line:165,column:2},end:{line:165,column:3}},loc:{start:{line:165,column:11},end:{line:275,column:3}},line:165},15:{name:"(anonymous_15)",decl:{start:{line:169,column:26},end:{line:169,column:27}},loc:{start:{line:169,column:38},end:{line:219,column:5}},line:169},16:{name:"(anonymous_16)",decl:{start:{line:176,column:40},end:{line:176,column:41}},loc:{start:{line:176,column:47},end:{line:176,column:52}},line:176},17:{name:"(anonymous_17)",decl:{start:{line:185,column:21},end:{line:185,column:22}},loc:{start:{line:185,column:44},end:{line:218,column:7}},line:185},18:{name:"(anonymous_18)",decl:{start:{line:187,column:50},end:{line:187,column:51}},loc:{start:{line:187,column:61},end:{line:189,column:9}},line:187},19:{name:"(anonymous_19)",decl:{start:{line:278,column:18},end:{line:278,column:19}},loc:{start:{line:278,column:29},end:{line:291,column:1}},line:278},20:{name:"(anonymous_20)",decl:{start:{line:280,column:24},end:{line:280,column:25}},loc:{start:{line:280,column:35},end:{line:288,column:3}},line:280},21:{name:"(anonymous_21)",decl:{start:{line:283,column:44},end:{line:283,column:45}},loc:{start:{line:283,column:55},end:{line:283,column:77}},line:283},22:{name:"(anonymous_22)",decl:{start:{line:284,column:44},end:{line:284,column:45}},loc:{start:{line:284,column:55},end:{line:284,column:75}},line:284},23:{name:"(anonymous_23)",decl:{start:{line:289,column:36},end:{line:289,column:37}},loc:{start:{line:289,column:47},end:{line:289,column:55}},line:289}},branchMap:{0:{loc:{start:{line:62,column:6},end:{line:64,column:7}},type:"if",locations:[{start:{line:62,column:6},end:{line:64,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:62},1:{loc:{start:{line:82,column:8},end:{line:82,column:79}},type:"cond-expr",locations:[{start:{line:82,column:41},end:{line:82,column:75}},{start:{line:82,column:78},end:{line:82,column:79}}],line:82},2:{loc:{start:{line:88,column:6},end:{line:93,column:7}},type:"if",locations:[{start:{line:88,column:6},end:{line:93,column:7}},{start:{line:91,column:13},end:{line:93,column:7}}],line:88},3:{loc:{start:{line:88,column:10},end:{line:88,column:81}},type:"binary-expr",locations:[{start:{line:88,column:10},end:{line:88,column:23}},{start:{line:88,column:27},end:{line:88,column:81}}],line:88},4:{loc:{start:{line:100,column:4},end:{line:104,column:5}},type:"if",locations:[{start:{line:100,column:4},end:{line:104,column:5}},{start:{line:102,column:11},end:{line:104,column:5}}],line:100},5:{loc:{start:{line:111,column:11},end:{line:111,column:50}},type:"cond-expr",locations:[{start:{line:111,column:34},end:{line:111,column:38}},{start:{line:111,column:41},end:{line:111,column:50}}],line:111},6:{loc:{start:{line:114,column:4},end:{line:116,column:5}},type:"if",locations:[{start:{line:114,column:4},end:{line:116,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:114},7:{loc:{start:{line:121,column:6},end:{line:125,column:7}},type:"if",locations:[{start:{line:121,column:6},end:{line:125,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:121},8:{loc:{start:{line:143,column:27},end:{line:143,column:52}},type:"binary-expr",locations:[{start:{line:143,column:27},end:{line:143,column:38}},{start:{line:143,column:42},end:{line:143,column:52}}],line:143},9:{loc:{start:{line:147,column:4},end:{line:163,column:5}},type:"if",locations:[{start:{line:147,column:4},end:{line:163,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:147},10:{loc:{start:{line:149,column:6},end:{line:162,column:7}},type:"if",locations:[{start:{line:149,column:6},end:{line:162,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:149},11:{loc:{start:{line:149,column:10},end:{line:149,column:51}},type:"binary-expr",locations:[{start:{line:149,column:10},end:{line:149,column:26}},{start:{line:149,column:30},end:{line:149,column:51}}],line:149},12:{loc:{start:{line:157,column:10},end:{line:159,column:11}},type:"if",locations:[{start:{line:157,column:10},end:{line:159,column:11}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:157},13:{loc:{start:{line:157,column:14},end:{line:157,column:68}},type:"binary-expr",locations:[{start:{line:157,column:14},end:{line:157,column:32}},{start:{line:157,column:36},end:{line:157,column:68}}],line:157},14:{loc:{start:{line:171,column:6},end:{line:184,column:7}},type:"if",locations:[{start:{line:171,column:6},end:{line:184,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:171},15:{loc:{start:{line:178,column:22},end:{line:178,column:98}},type:"binary-expr",locations:[{start:{line:178,column:22},end:{line:178,column:57}},{start:{line:178,column:61},end:{line:178,column:98}}],line:178},16:{loc:{start:{line:188,column:17},end:{line:188,column:96}},type:"binary-expr",locations:[{start:{line:188,column:17},end:{line:188,column:29}},{start:{line:188,column:33},end:{line:188,column:62}},{start:{line:188,column:66},end:{line:188,column:96}}],line:188},17:{loc:{start:{line:191,column:8},end:{line:193,column:9}},type:"if",locations:[{start:{line:191,column:8},end:{line:193,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:191},18:{loc:{start:{line:198,column:52},end:{line:198,column:153}},type:"binary-expr",locations:[{start:{line:198,column:52},end:{line:198,column:69}},{start:{line:198,column:73},end:{line:198,column:112}},{start:{line:198,column:116},end:{line:198,column:153}}],line:198},19:{loc:{start:{line:199,column:53},end:{line:199,column:105}},type:"binary-expr",locations:[{start:{line:199,column:53},end:{line:199,column:84}},{start:{line:199,column:88},end:{line:199,column:105}}],line:199},20:{loc:{start:{line:206,column:25},end:{line:206,column:43}},type:"binary-expr",locations:[{start:{line:206,column:25},end:{line:206,column:37}},{start:{line:206,column:41},end:{line:206,column:43}}],line:206},21:{loc:{start:{line:251,column:26},end:{line:251,column:96}},type:"cond-expr",locations:[{start:{line:251,column:69},end:{line:251,column:82}},{start:{line:251,column:85},end:{line:251,column:96}}],line:251},22:{loc:{start:{line:282,column:4},end:{line:282,column:22}},type:"if",locations:[{start:{line:282,column:4},end:{line:282,column:22}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:282},23:{loc:{start:{line:285,column:4},end:{line:287,column:5}},type:"if",locations:[{start:{line:285,column:4},end:{line:287,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:285},24:{loc:{start:{line:285,column:8},end:{line:285,column:67}},type:"binary-expr",locations:[{start:{line:285,column:8},end:{line:285,column:23}},{start:{line:285,column:27},end:{line:285,column:42}},{start:{line:285,column:46},end:{line:285,column:67}}],line:285}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0,87:0,88:0,89:0,90:0,91:0,92:0,93:0,94:0,95:0,96:0,97:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0,0],17:[0,0],18:[0,0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerList.tsx"],names:[],mappings:"AA+NoB,cAoEd,YApEc;AA/NpB,OAAO,WAAuB;AAC9B,OAAO,gBAAgB;AACvB,OAAO,YAAY;AACnB;AAAA,EACE;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,OAEK;AACP;AAAA,EACE;AAAA,EACA;AAAA,OACK;AAEP,OAAO,oBAAoB;AAC3B,OAAO,mBAAmB;AAC1B,OAAO,cAAc;AAGrB,OAAO,sBAAsB;AAC7B,SAAS,yBAAyB,mBAAmB;AACrD,SAA+B,uBAAuB;AAwBtD,MAAM,mCAAmC,MAAM,UAAoE;AAAA,EACjH,OAAO,eAAe;AAAA,IACpB,eAAe,MAAM;AAAA,IAAC;AAAA,EACxB;AAAA,EACA;AAAA,EACA;AAAA,EAEA,YAAY,OAAwC;AAClD,UAAM,KAAK;AACX,SAAK,kBAAkB,MAAM,UAAU;AACvC,SAAK,qBAAqB,MAAM,UAAU;AAC1C,SAAK,QAAQ;AAAA,MACX,iBAAiB,CAAC;AAAA,MAClB,sBAAsB;AAAA,MACtB,MAAM;AAAA,QACJ,KAAK,CAAC,iBAAiB;AAAA,MACzB;AAAA,MACA,QAAQ;AAAA,QACN,KAAK;AAAA,MACP;AAAA,IACF;AAAA,EACF;AAAA,EAEA,YAAY,WAAmB;AAC7B,SAAK,SAAS;AAAA,MACZ,MAAM;AAAA,QACJ,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,SAAS,GAAG,CAAC,iBAAiB;AAAA,MACjC;AAAA,MACA,QAAQ;AAAA,QACN,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,SAAS,GAAG,CAAC,KAAK,MAAM,OAAO,SAAS;AAAA,MAC3C;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,eAAe,MAAM;AACnB,QAAI,MAAM;AAEV,UAAM,YAAqC,CAAC;AAE5C,SAAK,cAAc,EAAE,QAAQ,YAAU;AACrC,YAAM,cAAc,YAAY,OAAO,CAAC,EAAE,EAAE;AAC5C,YAAM,YAAY,CAAC,aAAa,GAAG,EAAE,KAAK,GAAG;AAG7C,UAAI,OAAO,SAAS,GAAG;AACrB,kBAAU,SAAS,IAAI,KAAK,MAAM;AAAA,MACpC;AAEA,aAAO,QAAQ,CAAC,WAAW;AACzB,eAAO;AAAA,MACT,CAAC;AAAA,IACH,CAAC;AAED,SAAK,SAAS;AAAA,MACZ,iBAAiB;AAAA,MACjB,sBAAsB,CAAC,KAAK,MAAM;AAAA,IACpC,CAAC;AAAA,EACH;AAAA,EAEA,gBAA0D;AACxD,UAAM,SAAS,CAAC;AAChB,UAAM,eAAe,oBAAI,IAAI;AAE7B,aAAS,IAAI,GAAG,IAAI,KAAK,MAAM,OAAO,QAAQ,KAAK;AACjD,YAAM,YAAY,KAAK,MAAM,OAAO,CAAC;AACrC,YAAM,gBAAgB,KAAK,MAAM,OAAO,IAAE,CAAC;AAC3C,mBAAa;AAAA,QAAI,UAAU;AAAA,QACzB,aAAa,IAAI,UAAU,EAAE,IAAI,aAAa,IAAI,UAAU,EAAE,IAAI,IAAI;AAAA,MACxE;AACA,YAAM,QAAQ;AAAA,QACZ,GAAG;AAAA,QACH,KAAK,eAAe,UAAU,EAAE,IAAI,aAAa,IAAI,UAAU,EAAE,CAAC;AAAA,MACpE;AACA,UAAG,iBAAiB,YAAY,cAAc,EAAE,KAAK,YAAY,MAAM,EAAE,GAAG;AAC1E,cAAM,YAAY,OAAO,OAAO,SAAS,CAAC;AAC1C,kBAAU,KAAK,KAAK;AAAA,MACtB,OAAO;AACL,eAAO,KAAK,CAAC,KAAK,CAAC;AAAA,MACrB;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAAA,EAEA,iBAAiB,aAAqB,KAAa;AACjD,UAAM,YAAY,CAAC,aAAa,GAAG,EAAE,KAAK,GAAG;AAC7C,UAAM,YAAY,EAAE,GAAG,KAAK,MAAM,gBAAgB;AAClD,QAAG,aAAa,KAAK,MAAM,iBAAiB;AAC1C,gBAAU,SAAS,IAAI,CAAC,KAAK,MAAM,gBAAgB,SAAS;AAAA,IAC9D,OAAO;AACL,gBAAU,SAAS,IAAI;AAAA,IACzB;AACA,SAAK,SAAS;AAAA,MACZ,iBAAiB;AAAA,IACnB,CAAC;AAAA,EACH;AAAA,EAEA,YAAY,aAAqB,KAAa;AAC5C,UAAM,YAAY,KAAK,MAAM,gBAAgB,CAAC,aAAa,GAAG,EAAE,KAAK,GAAG,CAAC;AACzE,WAAO,cAAc,SAAY,OAAO;AAAA,EAC1C;AAAA,EAEA,sBAAuB,WAAoC,WAAoC;AAE7F,QAAI,KAAK,UAAU,WAAW;AAC5B,aAAO;AAAA,IACT;AAIA,aAAS,iBAAiB,OAA2B;AACnD,YAAM,MAAiD;AAAA,QACrD,IAAI,MAAM;AAAA,MACZ;AAEA,UAAI,MAAM,QAAQ;AAChB,YAAI,SAAS;AAAA,UACX,YAAY,MAAM,OAAO;AAAA,QAC3B;AAAA,MACF;AACA,aAAO;AAAA,IACT;AACA,UAAM,cAAc,OAAO;AAAA,MACzB,UAAU,OAAO,IAAI,gBAAgB;AAAA,MACrC,KAAK,MAAM,OAAO,IAAI,gBAAgB;AAAA,IACxC;AAEA,aAAS,cAAc,OAAgC;AACrD,YAAM,MAAM;AAAA,QACV,GAAG;AAAA,MACL;AACA,aAAO,IAAI,QAAQ;AACnB,aAAO;AAAA,IACT;AAIA,UAAM,aAAa,OAAO;AAAA,MACxB,cAAc,KAAK,KAAK;AAAA,MACxB,cAAc,SAAS;AAAA,IACzB;AAEA,UAAM,eAAe,EAAE,eAAe;AACtC,WAAO;AAAA,EACT;AAAA,EAEA,mBAAoB,WAAoC;AACtD,QAAI,UAAU,uBAAuB,KAAK,MAAM,oBAAoB;AAClE,YAAM,mBAAmB,KAAK,gBAAgB;AAC9C,UAAI,oBAAoB,iBAAiB,MAAM;AAC7C,cAAM,SAAS,iBAAiB;AAChC,cAAM,UAAU;AAAA,UACd,MAAM,KAAK,mBAAmB;AAAA,UAC9B,WAAW;AAAA,QACb;AACA,cAAM,WAAW,IAAI,qBAAqB,aAAW;AACnD,mBAAS,UAAU,MAAM;AACzB,cAAI,QAAQ,SAAS,KAAK,QAAQ,CAAC,EAAE,oBAAoB,GAAG;AAC1D,mBAAO,eAAe;AAAA,UACxB;AAAA,QACF,GAAG,OAAO;AAEV,iBAAS,QAAQ,MAAM;AAAA,MACzB;AAAA,IACF;AAAA,EACF;AAAA,EAEA,SAAS;AAEP,UAAM,YAA2B,CAAC;AAClC,QAAI,MAAM;AACV,UAAM,gBAAgB,KAAK,cAAc;AACzC,kBAAc,QAAQ,YAAU;AAC9B,YAAM,cAAc,YAAY,OAAO,CAAC,EAAE,EAAE;AAC5C,UAAG,OAAO,SAAS,GAAG;AACpB,cAAM,MAAM;AAAA,UAAC;AAAA;AAAA,YACX,eAAa,CAAC,aAAa,GAAG,EAAE,KAAK,GAAG;AAAA,YACxC,iBAAe,OAAO,IAAI,OAAK,EAAE,GAAG,EAAE,KAAK,GAAG;AAAA,YAE9C,OAAO;AAAA,YACP,UAAU,CAAC,KAAK,YAAY,aAAa,GAAG,KAAK,QAAQ,KAAK,MAAM;AAAA,YACpE,gBAAgB,KAAK,iBAAiB,KAAK,MAAM,aAAa,GAAG;AAAA;AAAA,UAH5D,SAAS,WAAW,IAAI,GAAG;AAAA,QAIlC;AACA,kBAAU,KAAK,GAAG;AAAA,MACpB;AAEA,aAAO,QAAQ,CAAC,OAAO,eAAe;AACpC,cAAM,WAAW,wBAAwB,KAAK,MAAM,QAAQ,GAAG;AAE/D,cAAM,aAAa,KAAK,MAAM,OAAO,KAAK,WAAS;AACjD,iBACE,MAAM,UACN,MAAM,OAAO,SAAS,WACtB,MAAM,OAAO,KAAK,SAAS;AAAA,QAE/B,CAAC;AAED,cAAM,kBAAgD,CAAC;AACvD,YAAI,QAAQ,KAAK,MAAM,oBAAoB;AACzC,0BAAgB,MAAM,KAAK;AAAA,QAC7B;AAEA,cAAM,WAAW;AAAA,UAAC;AAAA;AAAA,YAChB,WAAW,WAAW;AAAA,cACpB,sCAAsC,OAAO,SAAS,KAAK,KAAK,YAAY,aAAa,QAAQ,KAAK,QAAQ,KAAK,MAAM;AAAA,cACzH,uCAAuC,cAAc,OAAO,SAAS,KAAK,OAAO,SAAS;AAAA,cAC1F,mCAAmC,CAAC,CAAC;AAAA,YACvC,CAAC;AAAA,YAED,IAAI,MAAM;AAAA,YACV,SAAS,MAAM;AAAA,YACf,YAAY;AAAA,YACZ,WAAW,MAAM;AAAA,YACjB,aAAa,MAAM,UAAU,CAAC,GAAG;AAAA,YACjC,YAAY,QAAQ,KAAK,MAAM;AAAA,YAC/B,eAAe,KAAK,MAAM;AAAA,YAC1B,gBAAgB,KAAK,MAAM,gBAAgB,KAAK,IAAI;AAAA,YACpD,aAAa,KAAK,MAAM,YAAY,KAAK,IAAI;AAAA,YAC7C,yBAAyB,KAAK,MAAM,wBAAwB,KAAK,IAAI;AAAA,YACpE,GAAG;AAAA;AAAA,UAXC,MAAM;AAAA,QAYb;AACA,kBAAU,KAAK,QAAQ;AACvB,eAAO;AAAA,MACT,CAAC;AAAA,IACH,CAAC;AAED,UAAM,IAAI,KAAK,MAAM;AAErB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,eAAY;AAAA,QACZ,MAAK;AAAA,QACL,cAAY,EAAE,aAAa;AAAA,QAC3B,KAAK,KAAK;AAAA,QAEV;AAAA;AAAA,YAAC;AAAA;AAAA,cAEC,QAAQ,KAAK,MAAM;AAAA,cACnB,SAAS,KAAK,MAAM;AAAA,cACpB,QAAQ,KAAK,MAAM,OAAO;AAAA,cAC1B,cAAc,KAAK,YAAY,KAAK,MAAM,KAAK;AAAA,cAC/C,gBAAgB,KAAK,MAAM;AAAA;AAAA,YALtB,KAAK,MAAM,KAAK;AAAA,UAMvB;AAAA,UACA,qBAAC,YAAO,WAAU,8BAChB;AAAA,gCAAC,UAAK,WAAU,oCAAoC,YAAE,QAAQ,GAAE;AAAA,YAChE,oBAAC,UAAK,WAAU,kBAAiB;AAAA,YACjC,oBAAC,SAAI,WAAU,6BACb,8BAAC,SAAI,WAAU,wBACb;AAAA,cAAC;AAAA;AAAA,gBACC,IAAG;AAAA,gBACH,eAAY;AAAA,gBACZ,SAAS,KAAK;AAAA,gBACd,WAAU;AAAA,gBACT,eAAK,MAAM,yBAAyB,OACnC,EAAE,UAAU,IAEZ,EAAE,QAAQ;AAAA;AAAA,YAEd,GACF,GACF;AAAA,YACA,oBAAC,SAAI,WAAU,6BACb,8BAAC,SAAI,WAAU,wBACb;AAAA,cAAC;AAAA;AAAA,gBACC,SAAS,KAAK,YAAY,KAAK,MAAM,KAAK;AAAA,gBAC1C,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACT,YAAE,WAAW;AAAA;AAAA,YAChB,GACF,GACF;AAAA,aACF;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,MAAK;AAAA,cACL,cAAY,EAAE,aAAa;AAAA,cAE3B,8BAAC,QAAG,WAAU,iCACX,qBACH;AAAA;AAAA,UACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,qBAAqB,gBAAgB,EAAE,0BAA0B;AAMvE,MAAM,YAAsC,CAAC,UAAU;AACrD,QAAM,UAAU,WAAW,UAAU,eAAe,EAAE,sBAAsB,EAAE,UAAU,EAAE,EAAE,CAAC,CAAC;AAE9F,QAAM,gBAAgB,CAAC,UAAwB;AAC7C,UAAM,EAAC,QAAQ,KAAI,IAAI;AACvB,QAAI,CAAC,KAAM;AAEX,UAAM,WAAW,MAAM,OAAO,UAAU,WAAS,MAAM,OAAO,OAAO,EAAE;AACvE,UAAM,WAAW,MAAM,OAAO,UAAU,WAAS,MAAM,OAAO,KAAK,EAAE;AAErE,QAAI,aAAa,MAAM,aAAa,MAAM,aAAa,UAAU;AAC/D,YAAM,YAAY,EAAC,UAAU,SAAQ,CAAC;AAAA,IACxC;AAAA,EACF;AAEA,QAAM,WAAW,MAAM,OAAO,IAAI,WAAS,MAAM,EAAE;AAEnD,SACE,oBAAC,cAAW,SAAkB,oBAAoB,eAAe,WAAW,eAC1E,8BAAC,mBAAgB,OAAO,UAAU,UAAU,6BAC1C,8BAAC,sBAAoB,GAAG,OAAO,GACjC,GACF;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f68294db07afb93676beed55b7a9de47e3a7c779"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Ft=function(){return s},s}Ft();class YIe extends En.Component{static defaultProps=(Ft().s[0]++,{onLayerSelect:()=>{Ft().f[0]++}});selectedItemRef;scrollContainerRef;constructor(e){Ft().f[1]++,Ft().s[1]++,super(e),Ft().s[2]++,this.selectedItemRef=En.createRef(),Ft().s[3]++,this.scrollContainerRef=En.createRef(),Ft().s[4]++,this.state={collapsedGroups:{},areAllGroupsExpanded:!1,keys:{add:+Ox()},isOpen:{add:!1}}}toggleModal(e){Ft().f[2]++,Ft().s[5]++,this.setState({keys:{...this.state.keys,[e]:+Ox()},isOpen:{...this.state.isOpen,[e]:!this.state.isOpen[e]}})}toggleLayers=(Ft().s[6]++,()=>{Ft().f[3]++;let e=(Ft().s[7]++,0);const t=(Ft().s[8]++,{});Ft().s[9]++,this.groupedLayers().forEach(i=>{Ft().f[4]++;const r=(Ft().s[10]++,D_(i[0].id)),o=(Ft().s[11]++,[r,e].join("-"));Ft().s[12]++,i.length>1?(Ft().b[0][0]++,Ft().s[13]++,t[o]=this.state.areAllGroupsExpanded):Ft().b[0][1]++,Ft().s[14]++,i.forEach(s=>{Ft().f[5]++,Ft().s[15]++,e+=1})}),Ft().s[16]++,this.setState({collapsedGroups:t,areAllGroupsExpanded:!this.state.areAllGroupsExpanded})});groupedLayers(){Ft().f[6]++;const e=(Ft().s[17]++,[]),t=(Ft().s[18]++,new Map);Ft().s[19]++;for(let i=(Ft().s[20]++,0);i<this.props.layers.length;i++){const r=(Ft().s[21]++,this.props.layers[i]),o=(Ft().s[22]++,this.props.layers[i-1]);Ft().s[23]++,t.set(r.id,t.has(r.id)?(Ft().b[1][0]++,t.get(r.id)+1):(Ft().b[1][1]++,0));const s=(Ft().s[24]++,{...r,key:`layers-list-${r.id}-${t.get(r.id)}`});if(Ft().s[25]++,Ft().b[3][0]++,o&&(Ft().b[3][1]++,D_(o.id)==D_(s.id))){Ft().b[2][0]++;const a=(Ft().s[26]++,e[e.length-1]);Ft().s[27]++,a.push(s)}else Ft().b[2][1]++,Ft().s[28]++,e.push([s])}return Ft().s[29]++,e}toggleLayerGroup(e,t){Ft().f[7]++;const i=(Ft().s[30]++,[e,t].join("-")),r=(Ft().s[31]++,{...this.state.collapsedGroups});Ft().s[32]++,i in this.state.collapsedGroups?(Ft().b[4][0]++,Ft().s[33]++,r[i]=!this.state.collapsedGroups[i]):(Ft().b[4][1]++,Ft().s[34]++,r[i]=!1),Ft().s[35]++,this.setState({collapsedGroups:r})}isCollapsed(e,t){Ft().f[8]++;const i=(Ft().s[36]++,this.state.collapsedGroups[[e,t].join("-")]);return Ft().s[37]++,i===void 0?(Ft().b[5][0]++,!0):(Ft().b[5][1]++,i)}shouldComponentUpdate(e,t){if(Ft().f[9]++,Ft().s[38]++,this.state!==t)return Ft().b[6][0]++,Ft().s[39]++,!0;Ft().b[6][1]++;function i(c){Ft().f[10]++;const h=(Ft().s[40]++,{id:c.id});return Ft().s[41]++,c.layout?(Ft().b[7][0]++,Ft().s[42]++,h.layout={visibility:c.layout.visibility}):Ft().b[7][1]++,Ft().s[43]++,h}const r=(Ft().s[44]++,n9.isEqual(e.layers.map(i),this.props.layers.map(i)));function o(c){Ft().f[11]++;const h=(Ft().s[45]++,{...c});return Ft().s[46]++,delete h.layers,Ft().s[47]++,h}const s=(Ft().s[48]++,n9.isEqual(o(this.props),o(e))),a=(Ft().s[49]++,Ft().b[8][0]++,!(r&&(Ft().b[8][1]++,s)));return Ft().s[50]++,a}componentDidUpdate(e){if(Ft().f[12]++,Ft().s[51]++,e.selectedLayerIndex!==this.props.selectedLayerIndex){Ft().b[9][0]++;const t=(Ft().s[52]++,this.selectedItemRef.current);if(Ft().s[53]++,Ft().b[11][0]++,t&&(Ft().b[11][1]++,t.node)){Ft().b[10][0]++;const i=(Ft().s[54]++,t.node),r=(Ft().s[55]++,{root:this.scrollContainerRef.current,threshold:1}),o=(Ft().s[56]++,new IntersectionObserver(s=>{Ft().f[13]++,Ft().s[57]++,o.unobserve(i),Ft().s[58]++,Ft().b[13][0]++,s.length>0&&(Ft().b[13][1]++,s[0].intersectionRatio<1)?(Ft().b[12][0]++,Ft().s[59]++,i.scrollIntoView()):Ft().b[12][1]++},r));Ft().s[60]++,o.observe(i)}else Ft().b[10][1]++}else Ft().b[9][1]++}render(){Ft().f[14]++;const e=(Ft().s[61]++,[]);let t=(Ft().s[62]++,0);const i=(Ft().s[63]++,this.groupedLayers());Ft().s[64]++,i.forEach(o=>{Ft().f[15]++;const s=(Ft().s[65]++,D_(o[0].id));if(Ft().s[66]++,o.length>1){Ft().b[14][0]++;const a=(Ft().s[67]++,ie.jsx($Ee,{"data-wd-key":[s,t].join("-"),"aria-controls":o.map(c=>(Ft().f[16]++,Ft().s[68]++,c.key)).join(" "),title:s,isActive:(Ft().b[15][0]++,!this.isCollapsed(s,t)||(Ft().b[15][1]++,t===this.props.selectedLayerIndex)),onActiveToggle:this.toggleLayerGroup.bind(this,s,t)},`group-${s}-${t}`));Ft().s[69]++,e.push(a)}else Ft().b[14][1]++;Ft().s[70]++,o.forEach((a,c)=>{Ft().f[17]++;const h=(Ft().s[71]++,qIe(this.props.layers,t)),m=(Ft().s[72]++,this.props.errors.find(x=>(Ft().f[18]++,Ft().s[73]++,Ft().b[16][0]++,x.parsed&&(Ft().b[16][1]++,x.parsed.type==="layer")&&(Ft().b[16][2]++,x.parsed.data.index==t)))),y=(Ft().s[74]++,{});Ft().s[75]++,t===this.props.selectedLayerIndex?(Ft().b[17][0]++,Ft().s[76]++,y.ref=this.selectedItemRef):Ft().b[17][1]++;const M=(Ft().s[77]++,ie.jsx(HEe,{className:u0({"maputnik-layer-list-item-collapsed":(Ft().b[18][0]++,o.length>1&&(Ft().b[18][1]++,this.isCollapsed(s,h))&&(Ft().b[18][2]++,t!==this.props.selectedLayerIndex)),"maputnik-layer-list-item-group-last":(Ft().b[19][0]++,c==o.length-1&&(Ft().b[19][1]++,o.length>1)),"maputnik-layer-list-item--error":!!m}),id:a.key,layerId:a.id,layerIndex:t,layerType:a.type,visibility:(Ft().b[20][0]++,a.layout||(Ft().b[20][1]++,{})).visibility,isSelected:t===this.props.selectedLayerIndex,onLayerSelect:this.props.onLayerSelect,onLayerDestroy:this.props.onLayerDestroy?.bind(this),onLayerCopy:this.props.onLayerCopy.bind(this),onLayerVisibilityToggle:this.props.onLayerVisibilityToggle.bind(this),...y},a.key));Ft().s[78]++,e.push(M),Ft().s[79]++,t+=1})});const r=(Ft().s[80]++,this.props.t);return Ft().s[81]++,ie.jsxs("section",{className:"maputnik-layer-list","data-wd-key":"layer-list",role:"complementary","aria-label":r("Layers list"),ref:this.scrollContainerRef,children:[ie.jsx(GIe,{layers:this.props.layers,sources:this.props.sources,isOpen:this.state.isOpen.add,onOpenToggle:this.toggleModal.bind(this,"add"),onLayersChange:this.props.onLayersChange},this.state.keys.add),ie.jsxs("header",{className:"maputnik-layer-list-header",children:[ie.jsx("span",{className:"maputnik-layer-list-header-title",children:r("Layers")}),ie.jsx("span",{className:"maputnik-space"}),ie.jsx("div",{className:"maputnik-default-property",children:ie.jsx("div",{className:"maputnik-multibutton",children:ie.jsx("button",{id:"skip-target-layer-list","data-wd-key":"skip-target-layer-list",onClick:this.toggleLayers,className:"maputnik-button",children:this.state.areAllGroupsExpanded===!0?(Ft().b[21][0]++,r("Collapse")):(Ft().b[21][1]++,r("Expand"))})})}),ie.jsx("div",{className:"maputnik-default-property",children:ie.jsx("div",{className:"maputnik-multibutton",children:ie.jsx("button",{onClick:this.toggleModal.bind(this,"add"),"data-wd-key":"layer-list:add-layer",className:"maputnik-button maputnik-button-selected",children:r("Add Layer")})})})]}),ie.jsx("div",{role:"navigation","aria-label":r("Layers list"),children:ie.jsx("ul",{className:"maputnik-layer-list-container",children:e})})]})}}const $Ie=(Ft().s[82]++,No()(YIe));Ft().s[83]++;const VIe=n=>{Ft().f[19]++;const e=(Ft().s[84]++,CSe(bSe(wK,{activationConstraint:{distance:5}})));Ft().s[85]++;const t=r=>{Ft().f[20]++;const{active:o,over:s}=(Ft().s[86]++,r);if(Ft().s[87]++,s)Ft().b[22][1]++;else{Ft().b[22][0]++,Ft().s[88]++;return}const a=(Ft().s[89]++,n.layers.findIndex(h=>(Ft().f[21]++,Ft().s[90]++,h.id===o.id))),c=(Ft().s[91]++,n.layers.findIndex(h=>(Ft().f[22]++,Ft().s[92]++,h.id===s.id)));Ft().s[93]++,Ft().b[24][0]++,a!==-1&&(Ft().b[24][1]++,c!==-1)&&(Ft().b[24][2]++,a!==c)?(Ft().b[23][0]++,Ft().s[94]++,n.onMoveLayer({oldIndex:a,newIndex:c})):Ft().b[23][1]++},i=(Ft().s[95]++,n.layers.map(r=>(Ft().f[23]++,Ft().s[96]++,r.id)));return Ft().s[97]++,ie.jsx(wEe,{sensors:e,collisionDetection:SSe,onDragEnd:t,children:ie.jsx(LEe,{items:i,strategy:UEe,children:ie.jsx($Ie,{...n})})})};var M8,vQ;function ise(){if(vQ)return M8;vQ=1;var n={},e="a menu outside a mounted Wrapper with an id, or a menu that does not exist";function t(s,a){n[s]=a}function i(s){delete n[s]}function r(s,a){var c=n[s];if(!c)throw new Error("Cannot open "+e);c.openMenu(a)}function o(s,a){var c=n[s];if(!c)throw new Error("Cannot close "+e);c.closeMenu(a)}return M8={registerManager:t,unregisterManager:i,openMenu:r,closeMenu:o},M8}var w8,bQ;function HIe(){if(bQ)return w8;bQ=1;function n(r){r=r||{};var o=r.keybindings||{};this._settings={keybindings:{next:o.next||{keyCode:40},prev:o.prev||{keyCode:38},first:o.first,last:o.last},wrap:r.wrap,stringSearch:r.stringSearch,stringSearchDelay:800},this._keybindingsLookup=[];var s,a;for(s in this._settings.keybindings)a=this._settings.keybindings[s],a&&[].concat(a).forEach((function(c){c.metaKey=c.metaKey||!1,c.ctrlKey=c.ctrlKey||!1,c.altKey=c.altKey||!1,c.shiftKey=c.shiftKey||!1,this._keybindingsLookup.push({action:s,eventMatcher:c})}).bind(this));this._searchString="",this._members=[],r.members&&this.setMembers(r.members),this._boundHandleKeydownEvent=this._handleKeydownEvent.bind(this)}n.prototype.activate=function(){return document.addEventListener("keydown",this._boundHandleKeydownEvent,!0),this},n.prototype.deactivate=function(){return document.removeEventListener("keydown",this._boundHandleKeydownEvent,!0),this._clearSearchStringRefreshTimer(),this},n.prototype._handleKeydownEvent=function(r){var o=this._getActiveElementIndex();if(o!==-1){var s=!1;this._keybindingsLookup.forEach((function(a){if(e(a.eventMatcher,r))switch(s=!0,r.preventDefault(),a.action){case"next":this.moveFocusForward();break;case"prev":this.moveFocusBack();break;case"first":this.moveFocusToFirst();break;case"last":this.moveFocusToLast();break;default:return}}).bind(this)),s||this._handleUnboundKey(r)}},n.prototype.moveFocusForward=function(){var r=this._getActiveElementIndex(),o;return r<this._members.length-1?o=r+1:this._settings.wrap?o=0:o=r,this.focusNodeAtIndex(o),o},n.prototype.moveFocusBack=function(){var r=this._getActiveElementIndex(),o;return r>0?o=r-1:this._settings.wrap?o=this._members.length-1:o=r,this.focusNodeAtIndex(o),o},n.prototype.moveFocusToFirst=function(){this.focusNodeAtIndex(0)},n.prototype.moveFocusToLast=function(){this.focusNodeAtIndex(this._members.length-1)},n.prototype._handleUnboundKey=function(r){if(this._settings.stringSearch){if(this._searchString!==""&&(r.key===" "||r.keyCode===32))return r.preventDefault(),-1;if(!t(r.keyCode)||r.ctrlKey||r.metaKey||r.altKey)return-1;r.preventDefault(),this._addToSearchString(String.fromCharCode(r.keyCode)),this._runStringSearch()}},n.prototype._clearSearchString=function(){this._searchString=""},n.prototype._addToSearchString=function(r){this._searchString+=r.toLowerCase()},n.prototype._startSearchStringRefreshTimer=function(){var r=this;this._clearSearchStringRefreshTimer(),this._stringSearchTimer=setTimeout(function(){r._clearSearchString()},this._settings.stringSearchDelay)},n.prototype._clearSearchStringRefreshTimer=function(){clearTimeout(this._stringSearchTimer)},n.prototype._runStringSearch=function(){this._startSearchStringRefreshTimer(),this.moveFocusByString(this._searchString)},n.prototype.moveFocusByString=function(r){for(var o,s=0,a=this._members.length;s<a;s++)if(o=this._members[s],!!o.text&&o.text.indexOf(r)===0)return i(o.node)},n.prototype._findIndexOfNode=function(r){for(var o=0,s=this._members.length;o<s;o++)if(this._members[o].node===r)return o;return-1},n.prototype._getActiveElementIndex=function(){return this._findIndexOfNode(document.activeElement)},n.prototype.focusNodeAtIndex=function(r){var o=this._members[r];return o&&i(o.node),this},n.prototype.addMember=function(r,o){var s=r.node||r,a=r.text||s.getAttribute("data-focus-group-text")||s.textContent||"";this._checkNode(s);var c=a.replace(/[\W_]/g,"").toLowerCase(),h={node:s,text:c};return o!=null?this._members.splice(o,0,h):this._members.push(h),this},n.prototype.removeMember=function(r){var o=typeof r=="number"?r:this._findIndexOfNode(r);if(o!==-1)return this._members.splice(o,1),this},n.prototype.clearMembers=function(){return this._members=[],this},n.prototype.setMembers=function(r){this.clearMembers();for(var o=0,s=r.length;o<s;o++)this.addMember(r[o]);return this},n.prototype.getMembers=function(){return this._members},n.prototype._checkNode=function(r){if(!r.nodeType||r.nodeType!==window.Node.ELEMENT_NODE)throw new Error("focus-group: only DOM nodes allowed");return r};function e(r,o){for(var s in r)if(o[s]!==void 0&&r[s]!==o[s])return!1;return!0}function t(r){return r>=65&&r<=90}function i(r){!r||!r.focus||(r.focus(),r.tagName.toLowerCase()==="input"&&r.select())}return w8=function(o){return new n(o)},w8}var S8,CQ;function ZIe(){if(CQ)return S8;CQ=1;var n=HIe(),e=ise(),t={wrap:!0,stringSearch:!0},i={init:function(c){this.updateOptions(c),this.handleBlur=r.bind(this),this.handleSelection=o.bind(this),this.handleMenuKey=s.bind(this),this.focusGroup=n(t),this.button=null,this.menu=null,this.isOpen=!1},updateOptions:function(c){var h=this.options;this.options=c||this.options||{},typeof this.options.closeOnSelection>"u"&&(this.options.closeOnSelection=!0),typeof this.options.closeOnBlur>"u"&&(this.options.closeOnBlur=!0),this.options.id&&e.registerManager(this.options.id,this),h&&h.id&&h.id!==this.options.id&&e.unregisterManager(this.options.id,this)},focusItem:function(c){this.focusGroup.focusNodeAtIndex(c)},addItem:function(c){this.focusGroup.addMember(c)},clearItems:function(){this.focusGroup.clearMembers()},handleButtonNonArrowKey:function(c){this.focusGroup._handleUnboundKey(c)},destroy:function(){this.button=null,this.menu=null,this.focusGroup.deactivate(),clearTimeout(this.blurTimer),clearTimeout(this.moveFocusTimer)},update:function(){this.menu.setState({isOpen:this.isOpen}),this.button.setState({menuOpen:this.isOpen}),this.options.onMenuToggle&&this.options.onMenuToggle({isOpen:this.isOpen})},openMenu:function(c){if(!this.isOpen&&(c=c||{},c.focusMenu===void 0&&(c.focusMenu=!0),this.isOpen=!0,this.update(),this.focusGroup.activate(),c.focusMenu)){var h=this;this.moveFocusTimer=setTimeout(function(){h.focusItem(0)},0)}},closeMenu:function(c){this.isOpen&&(c=c||{},this.isOpen=!1,this.update(),c.focusButton&&this.button.ref.current.focus())},toggleMenu:function(c,h){c=c||{},h=h||{},this.isOpen?this.closeMenu(c):this.openMenu(h)}};function r(){var a=this;a.blurTimer=setTimeout(function(){if(a.button){var c=a.button.ref.current;if(c){var h=c.ownerDocument.activeElement;if(!(c&&h===c)){var m=a.menu.ref.current;if(m===h){a.focusItem(0);return}m&&m.contains(h)||a.isOpen&&a.closeMenu({focusButton:!1})}}}},0)}function o(a,c){this.options.closeOnSelection&&this.closeMenu({focusButton:!0}),this.options.onSelection&&this.options.onSelection(a,c)}function s(a){if(this.isOpen)switch(a.key){case"Escape":a.preventDefault(),this.closeMenu({focusButton:!0});break;case"Home":a.preventDefault(),this.focusGroup.moveFocusToFirst();break;case"End":a.preventDefault(),this.focusGroup.moveFocusToLast();break}}return S8=function(a){var c=Object.create(i);return c.init(a),c},S8}var E8,_Q;function B6(){if(_Q)return E8;_Q=1;var n=Qa(),e=n.createContext();return E8=e,E8}var O8,xQ;function I6(){if(xQ)return O8;xQ=1;var n=b1();return O8={refType:n.oneOfType([n.func,n.shape({current:n.elementType})])},O8}var B8,MQ;function k6(){return MQ||(MQ=1,B8=function(n,e,t){t=t||{};for(var i in e)e.hasOwnProperty(i)&&(t[i]||(n[i]=e[i]))}),B8}var I8,wQ;function XIe(){if(wQ)return I8;wQ=1;function n(x,T){if(!(x instanceof T))throw new TypeError("Cannot call a class as a function")}function e(x,T){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T&&(typeof T=="object"||typeof T=="function")?T:x}function t(x,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof T);x.prototype=Object.create(T&&T.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),T&&(Object.setPrototypeOf?Object.setPrototypeOf(x,T):x.__proto__=T)}var i=Qa(),r=b1(),o=ZIe(),s=B6(),a=I6(),c=a.refType,h=k6(),m={children:r.node.isRequired,forwardedRef:c,onMenuToggle:r.func,onSelection:r.func,closeOnSelection:r.bool,closeOnBlur:r.bool,tag:r.string},y=function(T){return{onMenuToggle:T.onMenuToggle,onSelection:T.onSelection,closeOnSelection:T.closeOnSelection,closeOnBlur:T.closeOnBlur,id:T.id}},M=(function(x){t(T,x);function T(P){n(this,T);var F=e(this,x.call(this,P));return F.manager=o(y(P)),F}return T.prototype.componentDidUpdate=function(){this.manager.updateOptions(y(this.props))},T.prototype.render=function(){var F={};return h(F,this.props,m),i.createElement(s.Provider,{value:this.manager},i.createElement(this.props.tag,F,this.props.children))},T})(i.Component);return M.propTypes=m,M.defaultProps={tag:"div"},I8=i.forwardRef(function(x,T){var P={forwardedRef:T};return h(P,x,{children:m.children,forwardedRef:m.forwardedRef}),h(P,{forwardedRef:T}),i.createElement(M,P,x.children)}),I8}var k8,SQ;function JIe(){if(SQ)return k8;SQ=1;function n(M,x){if(!(M instanceof x))throw new TypeError("Cannot call a class as a function")}function e(M,x){if(!M)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:M}function t(M,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);M.prototype=Object.create(x&&x.prototype,{constructor:{value:M,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(M,x):M.__proto__=x)}var i=Qa(),r=b1(),o=B6(),s=I6(),a=s.refType,c=k6(),h={ambManager:r.object.isRequired,children:r.node.isRequired,disabled:r.bool,forwardedRef:a,tag:r.string},m=function(){return["button","fieldset","input","optgroup","option","select","textarea"]},y=(function(M){t(x,M);function x(){var T,P,F;n(this,x);for(var j=arguments.length,q=Array(j),V=0;V<j;V++)q[V]=arguments[V];return F=(T=(P=e(this,M.call.apply(M,[this].concat(q))),P),P.ref=i.createRef(),P.handleKeyDown=function(H){if(!P.props.disabled){var Q=P.props.ambManager;switch(H.key){case"ArrowDown":H.preventDefault(),Q.isOpen?Q.focusItem(0):Q.openMenu();break;case"Enter":case" ":H.preventDefault(),Q.toggleMenu();break;case"Escape":Q.handleMenuKey(H);break;default:Q.handleButtonNonArrowKey(H)}}},P.handleClick=function(){P.props.disabled||P.props.ambManager.toggleMenu({},{focusMenu:!1})},P.setRef=function(H){P.ref.current=H,typeof P.props.forwardedRef=="function"?P.props.forwardedRef(H):P.props.forwardedRef&&(P.props.forwardedRef.current=H)},T),e(P,F)}return x.prototype.componentDidMount=function(){this.props.ambManager.button=this},x.prototype.componentWillUnmount=function(){this.props.ambManager.destroy()},x.prototype.render=function(){var P=this.props,F=this.props.ambManager,j={role:"button",tabIndex:P.disabled?"":"0","aria-haspopup":!0,"aria-expanded":F.isOpen,"aria-disabled":P.disabled,onKeyDown:this.handleKeyDown,onClick:this.handleClick},q={};return c(q,h),m().indexOf(P.tag)>=0&&delete q.disabled,F.options.closeOnBlur&&(j.onBlur=F.handleBlur),c(j,P,q),c(j,{ref:this.setRef}),i.createElement(P.tag,j,P.children)},x})(i.Component);return y.propTypes=h,y.defaultProps={tag:"span"},k8=i.forwardRef(function(M,x){return i.createElement(o.Consumer,null,function(T){var P={ambManager:T,forwardedRef:x};return c(P,M,{ambManager:h.ambManager,children:h.children,forwardedRef:h.forwardedRef}),i.createElement(y,P,M.children)})}),k8}var T8,EQ;function eke(){return EQ||(EQ=1,T8=function(e,t,i){var r=0,o=0,s=!1,a=!1,c=!1;e.addEventListener("click",h,i),e.addEventListener("touchstart",m,i);function h(F){c||t(F)}function m(F){c=!0,!s&&(s=!0,e.addEventListener("touchmove",y,i),e.addEventListener("touchend",M,i),e.addEventListener("touchcancel",x,i),a=!1,r=F.touches[0].clientX,o=F.touches[0].clientY)}function y(F){a||Math.abs(F.touches[0].clientX-r)<=10&&Math.abs(F.touches[0].clientY-o)<=10||(a=!0)}function M(F){s=!1,T(),a||t(F)}function x(){s=!1,a=!1,r=0,o=0}function T(){e.removeEventListener("touchmove",y,i),e.removeEventListener("touchend",M,i),e.removeEventListener("touchcancel",x,i)}function P(){e.removeEventListener("click",h,i),e.removeEventListener("touchstart",m,i),T()}return{remove:P}}),T8}var R8,OQ;function tke(){if(OQ)return R8;OQ=1;function n(M,x){if(!(M instanceof x))throw new TypeError("Cannot call a class as a function")}function e(M,x){if(!M)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:M}function t(M,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);M.prototype=Object.create(x&&x.prototype,{constructor:{value:M,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(M,x):M.__proto__=x)}var i=Qa(),r=b1(),o=eke(),s=B6(),a=I6(),c=a.refType,h=k6(),m={ambManager:r.object.isRequired,children:r.oneOfType([r.func,r.node]).isRequired,forwardedRef:c,tag:r.string},y=(function(M){t(x,M);function x(){var T,P,F;n(this,x);for(var j=arguments.length,q=Array(j),V=0;V<j;V++)q[V]=arguments[V];return F=(T=(P=e(this,M.call.apply(M,[this].concat(q))),P),P.ref=i.createRef(),P.addTapListener=function(){var H=P.ref.current;if(H){var Q=H.ownerDocument;Q&&(P.tapListener=o(Q.documentElement,P.handleTap))}},P.handleTap=function(H){P.ref.current.contains(H.target)||P.props.ambManager.button.ref.current.contains(H.target)||P.props.ambManager.closeMenu()},P.setRef=function(H){P.ref.current=H,typeof P.props.forwardedRef=="function"?P.props.forwardedRef(H):P.props.forwardedRef&&(P.props.forwardedRef.current=H)},T),e(P,F)}return x.prototype.componentDidMount=function(){this.props.ambManager.menu=this},x.prototype.componentDidUpdate=function(){var P=this.props.ambManager;P.options.closeOnBlur&&(P.isOpen&&!this.tapListener?this.addTapListener():!P.isOpen&&this.tapListener&&(this.tapListener.remove(),delete this.tapListener),P.isOpen||P.clearItems())},x.prototype.componentWillUnmount=function(){this.tapListener&&this.tapListener.remove(),this.props.ambManager.destroy()},x.prototype.render=function(){var P=this.props,F=this.props.ambManager,j=(function(){return typeof P.children=="function"?P.children({isOpen:F.isOpen}):F.isOpen?P.children:!1})();if(!j)return!1;var q={onKeyDown:F.handleMenuKey,role:"menu",tabIndex:-1};return F.options.closeOnBlur&&(q.onBlur=F.handleBlur),h(q,P,m),h(q,{ref:this.setRef}),i.createElement(P.tag,q,j)},x})(i.Component);return y.propTypes=m,y.defaultProps={tag:"div"},R8=i.forwardRef(function(M,x){return i.createElement(s.Consumer,null,function(T){var P={ambManager:T,forwardedRef:x};return h(P,M,{ambManager:m.ambManager,children:m.children,forwardedRef:m.forwardedRef}),i.createElement(y,P,M.children)})}),R8}var D8,BQ;function nke(){if(BQ)return D8;BQ=1;function n(y,M){if(!(y instanceof M))throw new TypeError("Cannot call a class as a function")}function e(y,M){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return M&&(typeof M=="object"||typeof M=="function")?M:y}function t(y,M){if(typeof M!="function"&&M!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof M);y.prototype=Object.create(M&&M.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),M&&(Object.setPrototypeOf?Object.setPrototypeOf(y,M):y.__proto__=M)}var i=Qa(),r=b1(),o=B6(),s=I6(),a=s.refType,c=k6(),h={ambManager:r.object.isRequired,children:r.node.isRequired,forwardedRef:a,tag:r.string,text:r.string,value:r.any},m=(function(y){t(M,y);function M(){var x,T,P;n(this,M);for(var F=arguments.length,j=Array(F),q=0;q<F;q++)j[q]=arguments[q];return P=(x=(T=e(this,y.call.apply(y,[this].concat(j))),T),T.ref=i.createRef(),T.handleKeyDown=function(V){V.key!=="Enter"&&V.key!==" "||T.props.tag==="a"&&T.props.href||(V.preventDefault(),T.selectItem(V))},T.selectItem=function(V){var H=typeof T.props.value<"u"?T.props.value:T.props.children;T.props.ambManager.handleSelection(H,V)},T.setRef=function(V){T.ref.current=V,typeof T.props.forwardedRef=="function"?T.props.forwardedRef(V):T.props.forwardedRef&&(T.props.forwardedRef.current=V)},x),e(T,P)}return M.prototype.componentDidMount=function(){this.props.ambManager.addItem({node:this.ref.current,text:this.props.text})},M.prototype.render=function(){var T={onClick:this.selectItem,onKeyDown:this.handleKeyDown,role:"menuitem",tabIndex:"-1",ref:this.setRef};return c(T,this.props,h),i.createElement(this.props.tag,T,this.props.children)},M})(i.Component);return m.propTypes=h,m.defaultProps={tag:"div"},D8=i.forwardRef(function(y,M){return i.createElement(o.Consumer,null,function(x){var T={ambManager:x,forwardedRef:M};return c(T,y,{ambManager:h.ambManager,children:h.children,forwardedRef:h.forwardedRef}),i.createElement(m,T,y.children)})}),D8}var P8,IQ;function ike(){if(IQ)return P8;IQ=1;var n=ise();return P8={Wrapper:XIe(),Button:JIe(),Menu:tke(),MenuItem:nke(),openMenu:n.openMenu,closeMenu:n.closeMenu},P8}var qM=ike();function kQ(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function RD(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?kQ(Object(t),!0).forEach(function(i){nl(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):kQ(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function T6(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function TQ(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function R6(n,e,t){return e&&TQ(n.prototype,e),t&&TQ(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function nl(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function s0(){return s0=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},s0.apply(this,arguments)}function iL(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&DD(n,e)}function nE(n){return nE=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},nE(n)}function DD(n,e){return DD=Object.setPrototypeOf||function(i,r){return i.__proto__=r,i},DD(n,e)}function rke(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function oke(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,o;for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function D6(n,e){if(n==null)return{};var t=oke(n,e),i,r;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(r=0;r<o.length;r++)i=o[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}function dm(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function ske(n,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dm(n)}function rL(n){var e=rke();return function(){var i=nE(n),r;if(e){var o=nE(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return ske(this,r)}}function ake(n,e){return cke(n)||hke(n,e)||rse(n,e)||fke()}function lke(n){return uke(n)||Ake(n)||rse(n)||dke()}function uke(n){if(Array.isArray(n))return PD(n)}function cke(n){if(Array.isArray(n))return n}function Ake(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function hke(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var i=[],r=!0,o=!1,s,a;try{for(t=t.call(n);!(r=(s=t.next()).done)&&(i.push(s.value),!(e&&i.length===e));r=!0);}catch(c){o=!0,a=c}finally{try{!r&&t.return!=null&&t.return()}finally{if(o)throw a}}return i}}function rse(n,e){if(n){if(typeof n=="string")return PD(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return PD(n,e)}}function PD(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function dke(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fke(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var pke=R6(function n(e){var t=this,i=e.expanded,r=i===void 0?[]:i,o=e.allowMultipleExpanded,s=o===void 0?!1:o,a=e.allowZeroExpanded,c=a===void 0?!1:a;T6(this,n),nl(this,"expanded",void 0),nl(this,"allowMultipleExpanded",void 0),nl(this,"allowZeroExpanded",void 0),nl(this,"toggleExpanded",function(h){if(t.isItemDisabled(h))return t;var m=t.isItemExpanded(h);return m?t.augment({expanded:t.expanded.filter(function(y){return y!==h})}):t.augment({expanded:t.allowMultipleExpanded?[].concat(lke(t.expanded),[h]):[h]})}),nl(this,"isItemDisabled",function(h){var m=t.isItemExpanded(h),y=t.expanded.length===1;return!!(m&&!t.allowZeroExpanded&&y)}),nl(this,"isItemExpanded",function(h){return t.expanded.indexOf(h)!==-1}),nl(this,"getPanelAttributes",function(h,m){var y=m??t.isItemExpanded(h);return{role:t.allowMultipleExpanded?void 0:"region","aria-hidden":t.allowMultipleExpanded?!y:void 0,"aria-labelledby":t.getButtonId(h),id:t.getPanelId(h),hidden:y?void 0:!0}}),nl(this,"getHeadingAttributes",function(){return{role:"heading"}}),nl(this,"getButtonAttributes",function(h,m){var y=m??t.isItemExpanded(h),M=t.isItemDisabled(h);return{id:t.getButtonId(h),"aria-disabled":M,"aria-expanded":y,"aria-controls":t.getPanelId(h),role:"button",tabIndex:0}}),nl(this,"getPanelId",function(h){return"accordion__panel-".concat(h)}),nl(this,"getButtonId",function(h){return"accordion__heading-".concat(h)}),nl(this,"augment",function(h){return new n(RD({expanded:t.expanded,allowMultipleExpanded:t.allowMultipleExpanded,allowZeroExpanded:t.allowZeroExpanded},h))}),this.expanded=r,this.allowMultipleExpanded=s,this.allowZeroExpanded=c}),ose=St.createContext(null),sse=(function(n){iL(t,n);var e=rL(t);function t(){var i;T6(this,t);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return i=e.call.apply(e,[this].concat(o)),nl(dm(i),"state",new pke({expanded:i.props.preExpanded,allowMultipleExpanded:i.props.allowMultipleExpanded,allowZeroExpanded:i.props.allowZeroExpanded})),nl(dm(i),"toggleExpanded",function(a){i.setState(function(c){return c.toggleExpanded(a)},function(){i.props.onChange&&i.props.onChange(i.state.expanded)})}),nl(dm(i),"isItemDisabled",function(a){return i.state.isItemDisabled(a)}),nl(dm(i),"isItemExpanded",function(a){return i.state.isItemExpanded(a)}),nl(dm(i),"getPanelAttributes",function(a,c){return i.state.getPanelAttributes(a,c)}),nl(dm(i),"getHeadingAttributes",function(){return i.state.getHeadingAttributes()}),nl(dm(i),"getButtonAttributes",function(a,c){return i.state.getButtonAttributes(a,c)}),i}return R6(t,[{key:"render",value:function(){var r=this.state,o=r.allowZeroExpanded,s=r.allowMultipleExpanded;return St.createElement(ose.Provider,{value:{allowMultipleExpanded:s,allowZeroExpanded:o,toggleExpanded:this.toggleExpanded,isItemDisabled:this.isItemDisabled,isItemExpanded:this.isItemExpanded,getPanelAttributes:this.getPanelAttributes,getHeadingAttributes:this.getHeadingAttributes,getButtonAttributes:this.getButtonAttributes}},this.props.children||null)}}]),t})(St.PureComponent);nl(sse,"defaultProps",{allowMultipleExpanded:!1,allowZeroExpanded:!1});var ase=(function(n){iL(t,n);var e=rL(t);function t(){var i;T6(this,t);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return i=e.call.apply(e,[this].concat(o)),nl(dm(i),"renderChildren",function(a){return a?i.props.children(a):null}),i}return R6(t,[{key:"render",value:function(){return St.createElement(ose.Consumer,null,this.renderChildren)}}]),t})(St.PureComponent),mke=["className","allowMultipleExpanded","allowZeroExpanded","onChange","preExpanded"],gke=function(e){var t=e.className,i=t===void 0?"accordion":t,r=e.allowMultipleExpanded,o=e.allowZeroExpanded,s=e.onChange,a=e.preExpanded,c=D6(e,mke);return St.createElement(sse,{preExpanded:a,allowMultipleExpanded:r,allowZeroExpanded:o,onChange:s},St.createElement("div",s0({"data-accordion-component":"Accordion",className:i},c)))},UD;(function(n){n.Accordion="Accordion",n.AccordionItem="AccordionItem",n.AccordionItemButton="AccordionItemButton",n.AccordionItemHeading="AccordionItemHeading",n.AccordionItemPanel="AccordionItemPanel"})(UD||(UD={}));var lse=UD,U8=0;function yke(){var n=U8;return U8=U8+1,"raa-".concat(n)}var vke=St.useId||yke,bke=/[\u0009\u000a\u000c\u000d\u0020]/g;function k4(n){return n===""||bke.test(n)?(console.error('uuid must be a valid HTML5 id but was given "'.concat(n,'", ASCII whitespaces are forbidden')),!1):!0}var use=St.createContext(null),Cke=function(e){var t=e.children,i=e.uuid,r=e.accordionContext,o=e.dangerouslySetExpanded,s=function(){r.toggleExpanded(i)},a=function(h){var m=o??h.isItemExpanded(i),y=h.isItemDisabled(i),M=h.getPanelAttributes(i,o),x=h.getHeadingAttributes(i),T=h.getButtonAttributes(i,o);return St.createElement(use.Provider,{value:{uuid:i,expanded:m,disabled:y,toggleExpanded:s,panelAttributes:M,headingAttributes:x,buttonAttributes:T}},t)};return St.createElement(ase,null,a)},_ke=function(e){return St.createElement(ase,null,function(t){return St.createElement(Cke,s0({},e,{accordionContext:t}))})},P6=function(e){var t=e.children,i=function(o){return o?t(o):null};return St.createElement(use.Consumer,null,i)},xke=["uuid","dangerouslySetExpanded","className","activeClassName"],cse=function(e){var t=e.uuid,i=e.dangerouslySetExpanded,r=e.className,o=r===void 0?"accordion__item":r,s=e.activeClassName,a=D6(e,xke),c=St.useState(vke()),h=ake(c,1),m=h[0],y=t??m,M=function(T){var P=T.expanded,F=P&&s?s:o;return St.createElement("div",s0({"data-accordion-component":"AccordionItem",className:F},a))};return k4(y.toString()),a.id&&k4(a.id),St.createElement(_ke,{uuid:y,dangerouslySetExpanded:i},St.createElement(P6,null,M))};cse.displayName=lse.AccordionItem;function Ase(n){return n&&(n.matches('[data-accordion-component="Accordion"]')?n:Ase(n.parentElement))}function U6(n){var e=Ase(n);return e&&Array.from(e.querySelectorAll('[data-accordion-component="AccordionItemButton"]'))}function Mke(n){var e=U6(n)||[],t=e[0];t&&t.focus()}function wke(n){var e=U6(n)||[],t=e[e.length-1];t&&t.focus()}function Ske(n){var e=U6(n)||[],t=e.indexOf(n);if(t!==-1){var i=e[t+1];i&&i.focus()}}function Eke(n){var e=U6(n)||[],t=e.indexOf(n);if(t!==-1){var i=e[t-1];i&&i.focus()}}var $0={END:"End",ENTER:"Enter",HOME:"Home",SPACE:" ",SPACE_DEPRECATED:"Spacebar",UP:"ArrowUp",DOWN:"ArrowDown",LEFT:"ArrowLeft",RIGHT:"ArrowRight"},Oke=["toggleExpanded","className"],Bke=function(e){var t=e.toggleExpanded,i=e.className,r=i===void 0?"accordion__button":i,o=D6(e,Oke),s=function(c){var h=c.key;if((h===$0.ENTER||h===$0.SPACE||h===$0.SPACE_DEPRECATED)&&(c.preventDefault(),t()),c.target instanceof HTMLElement)switch(h){case $0.HOME:{c.preventDefault(),Mke(c.target);break}case $0.END:{c.preventDefault(),wke(c.target);break}case $0.LEFT:case $0.UP:{c.preventDefault(),Eke(c.target);break}case $0.RIGHT:case $0.DOWN:{c.preventDefault(),Ske(c.target);break}}};return o.id&&k4(o.id),St.createElement("div",s0({className:r},o,{role:"button",tabIndex:0,onClick:t,onKeyDown:s,"data-accordion-component":"AccordionItemButton"}))},Ike=function(e){return St.createElement(P6,null,function(t){var i=t.toggleExpanded,r=t.buttonAttributes;return St.createElement(Bke,s0({toggleExpanded:i},e,r))})},kke={className:"accordion__heading","aria-level":3},Tke=`AccordionItemButton may contain only one child element, which must be an instance of AccordionItemButton.

From the WAI-ARIA spec (https://www.w3.org/TR/wai-aria-practices-1.1/#accordion):

The button element is the only element inside the heading element. That is, if there are other visually persistent elements, they are not included inside the heading element.

`,hse=(function(n){iL(t,n);var e=rL(t);function t(){var i;T6(this,t);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return i=e.call.apply(e,[this].concat(o)),nl(dm(i),"ref",void 0),nl(dm(i),"setRef",function(a){i.ref=a}),i}return R6(t,[{key:"componentDidUpdate",value:function(){t.VALIDATE(this.ref)}},{key:"componentDidMount",value:function(){t.VALIDATE(this.ref)}},{key:"render",value:function(){return St.createElement("div",s0({"data-accordion-component":"AccordionItemHeading"},this.props,{ref:this.setRef}))}}],[{key:"VALIDATE",value:function(r){if(r===void 0)throw new Error("ref is undefined");if(!(r.childElementCount===1&&r.firstElementChild&&r.firstElementChild.getAttribute("data-accordion-component")==="AccordionItemButton"))throw new Error(Tke)}}]),t})(St.PureComponent);nl(hse,"defaultProps",kke);var dse=function(e){return St.createElement(P6,null,function(t){var i=t.headingAttributes;return e.id&&k4(e.id),St.createElement(hse,s0({},e,i))})};dse.displayName=lse.AccordionItemHeading;var Rke=["className","region","id"],Dke=function(e){var t=e.className,i=t===void 0?"accordion__panel":t,r=e.region,o=e.id,s=D6(e,Rke),a=function(h){var m=h.panelAttributes;o&&k4(o);var y=RD(RD({},m),{},{"aria-labelledby":r?m["aria-labelledby"]:void 0});return St.createElement("div",s0({"data-accordion-component":"AccordionItemPanel",className:i},s,y,{role:r?"region":void 0}))};return St.createElement(P6,null,a)};function T4(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldJson.tsx",e="ee4be309accf3b6f15b0a988cbdadd67c7132608",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldJson.tsx",statementMap:{0:{start:{line:3,column:18},end:{line:5,column:1}},1:{start:{line:4,column:2},end:{line:4,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:3,column:18},end:{line:3,column:19}},loc:{start:{line:3,column:29},end:{line:5,column:1}},line:3}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldJson.tsx"],names:[],mappings:"AAOS;AAPT,OAAO,eAAsC;AAM7C,MAAM,YAAsC,CAAC,UAAU;AACrD,SAAO,oBAAC,aAAW,GAAG,OAAO;AAC/B;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ee4be309accf3b6f15b0a988cbdadd67c7132608"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return T4=function(){return s},s}T4();T4().s[0]++;const oL=n=>(T4().f[0]++,T4().s[1]++,ie.jsx(wre,{...n}));function R4(n){return Io({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 19a2 2 0 0 0 2 2c2 0 2 -4 3 -9s1 -9 3 -9a2 2 0 0 1 2 2"},child:[]},{tag:"path",attr:{d:"M5 12h6"},child:[]},{tag:"path",attr:{d:"M15 12l6 6"},child:[]},{tag:"path",attr:{d:"M15 18l6 -6"},child:[]}]})(n)}function K6(n){return Io({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M28,64A12,12,0,0,1,40,52H216a12,12,0,0,1,0,24H40A12,12,0,0,1,28,64Zm12,76H216a12,12,0,0,0,0-24H40a12,12,0,0,0,0,24Zm104,40H40a12,12,0,0,0,0,24H144a12,12,0,0,0,0-24Zm88,0H220V168a12,12,0,0,0-24,0v12H184a12,12,0,0,0,0,24h12v12a12,12,0,0,0,24,0V204h12a12,12,0,0,0,0-24Z"},child:[]}]})(n)}function Rb(){var n="/home/runner/work/maputnik/maputnik/src/libs/filterops.ts",e="99dad9631fbee5fc23be2dafaf7c7eea92c38eac",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/filterops.ts",statementMap:{0:{start:{line:2,column:34},end:{line:2,column:56}},1:{start:{line:3,column:28},end:{line:3,column:41}},2:{start:{line:4,column:30},end:{line:4,column:123}},3:{start:{line:4,column:88},end:{line:4,column:122}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:80},end:{line:4,column:81}},loc:{start:{line:4,column:88},end:{line:4,column:122}},line:4}},branchMap:{},s:{0:0,1:0,2:0,3:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/filterops.ts"],names:[],mappings:"AAAA,OAAO,YAAY;AAEZ,aAAM,qBAAqB,CAAC,OAAO,OAAO,MAAM;AAChD,aAAM,eAAe,CAAC,MAAM,KAAK;AACjC,aAAM,iBAAiB,OAC3B,KAAK,OAAO,gBAAgB,MAAM,EAClC,OAAO,QAAM,mBAAmB,QAAQ,EAAE,IAAI,CAAC;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"99dad9631fbee5fc23be2dafaf7c7eea92c38eac"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Rb=function(){return s},s}Rb();const sL=(Rb().s[0]++,["all","any","none"]);Rb().s[1]++;const Pke=(Rb().s[2]++,Object.keys(Zr.filter_operator.values).filter(n=>(Rb().f[0]++,Rb().s[3]++,sL.indexOf(n)<0)));function $i(){var n="/home/runner/work/maputnik/maputnik/src/components/SingleFilterEditor.tsx",e="d18e3b448d830733ac17bcacd45f7c08e364baa2",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/SingleFilterEditor.tsx",statementMap:{0:{start:{line:8,column:2},end:{line:8,column:25}},1:{start:{line:8,column:16},end:{line:8,column:25}},2:{start:{line:9,column:2},end:{line:9,column:25}},3:{start:{line:9,column:16},end:{line:9,column:25}},4:{start:{line:10,column:2},end:{line:10,column:23}},5:{start:{line:13,column:19},end:{line:13,column:40}},6:{start:{line:14,column:2},end:{line:16,column:3}},7:{start:{line:15,column:4},end:{line:15,column:13}},8:{start:{line:17,column:2},end:{line:23,column:3}},9:{start:{line:18,column:4},end:{line:18,column:16}},10:{start:{line:19,column:9},end:{line:23,column:3}},11:{start:{line:20,column:4},end:{line:20,column:17}},12:{start:{line:22,column:4},end:{line:22,column:13}},13:{start:{line:26,column:2},end:{line:26,column:21}},14:{start:{line:27,column:2},end:{line:27,column:22}},15:{start:{line:28,column:2},end:{line:28,column:11}},16:{start:{line:31,column:24},end:{line:33,column:3}},17:{start:{line:35,column:20},end:{line:35,column:76}},18:{start:{line:36,column:4},end:{line:40,column:5}},19:{start:{line:37,column:6},end:{line:37,column:43}},20:{start:{line:38,column:11},end:{line:40,column:5}},21:{start:{line:39,column:6},end:{line:39,column:47}},22:{start:{line:41,column:4},end:{line:41,column:35}},23:{start:{line:44,column:14},end:{line:44,column:31}},24:{start:{line:45,column:21},end:{line:45,column:25}},25:{start:{line:46,column:25},end:{line:46,column:29}},26:{start:{line:47,column:23},end:{line:47,column:33}},27:{start:{line:48,column:4},end:{line:75,column:9}},28:{start:{line:54,column:72},end:{line:54,column:92}},29:{start:{line:55,column:41},end:{line:55,column:104}},30:{start:{line:63,column:37},end:{line:63,column:100}},31:{start:{line:72,column:27},end:{line:72,column:89}}},fnMap:{0:{name:"tryParseInt",decl:{start:{line:7,column:9},end:{line:7,column:20}},loc:{start:{line:7,column:24},end:{line:11,column:1}},line:7},1:{name:"tryParseBool",decl:{start:{line:12,column:9},end:{line:12,column:21}},loc:{start:{line:12,column:25},end:{line:24,column:1}},line:12},2:{name:"parseFilter",decl:{start:{line:25,column:9},end:{line:25,column:20}},loc:{start:{line:25,column:24},end:{line:29,column:1}},line:25},3:{name:"(anonymous_3)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:58},end:{line:42,column:3}},line:34},4:{name:"(anonymous_4)",decl:{start:{line:43,column:2},end:{line:43,column:3}},loc:{start:{line:43,column:11},end:{line:76,column:3}},line:43},5:{name:"(anonymous_5)",decl:{start:{line:54,column:58},end:{line:54,column:59}},loc:{start:{line:54,column:72},end:{line:54,column:92}},line:54},6:{name:"(anonymous_6)",decl:{start:{line:55,column:20},end:{line:55,column:21}},loc:{start:{line:55,column:41},end:{line:55,column:104}},line:55},7:{name:"(anonymous_7)",decl:{start:{line:63,column:20},end:{line:63,column:21}},loc:{start:{line:63,column:37},end:{line:63,column:100}},line:63},8:{name:"(anonymous_8)",decl:{start:{line:72,column:20},end:{line:72,column:21}},loc:{start:{line:72,column:27},end:{line:72,column:89}},line:72}},branchMap:{0:{loc:{start:{line:8,column:2},end:{line:8,column:25}},type:"if",locations:[{start:{line:8,column:2},end:{line:8,column:25}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:8},1:{loc:{start:{line:9,column:2},end:{line:9,column:25}},type:"if",locations:[{start:{line:9,column:2},end:{line:9,column:25}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:9},2:{loc:{start:{line:14,column:2},end:{line:16,column:3}},type:"if",locations:[{start:{line:14,column:2},end:{line:16,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:14},3:{loc:{start:{line:17,column:2},end:{line:23,column:3}},type:"if",locations:[{start:{line:17,column:2},end:{line:23,column:3}},{start:{line:19,column:9},end:{line:23,column:3}}],line:17},4:{loc:{start:{line:19,column:9},end:{line:23,column:3}},type:"if",locations:[{start:{line:19,column:9},end:{line:23,column:3}},{start:{line:21,column:9},end:{line:23,column:3}}],line:19},5:{loc:{start:{line:36,column:4},end:{line:40,column:5}},type:"if",locations:[{start:{line:36,column:4},end:{line:40,column:5}},{start:{line:38,column:11},end:{line:40,column:5}}],line:36},6:{loc:{start:{line:36,column:8},end:{line:36,column:49}},type:"binary-expr",locations:[{start:{line:36,column:8},end:{line:36,column:26}},{start:{line:36,column:30},end:{line:36,column:49}}],line:36},7:{loc:{start:{line:38,column:11},end:{line:40,column:5}},type:"if",locations:[{start:{line:38,column:11},end:{line:40,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:38},8:{loc:{start:{line:67,column:6},end:{line:74,column:10}},type:"binary-expr",locations:[{start:{line:67,column:6},end:{line:67,column:27}},{start:{line:67,column:47},end:{line:74,column:10}}],line:67}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/SingleFilterEditor.tsx"],names:[],mappings:"AA+DW,SAEH,KAFG;AA/DX,OAAO,WAAW;AAElB,SAAQ,sBAAqB;AAC7B,OAAO,iBAAiB;AACxB,OAAO,uBAAuB;AAC9B,OAAO,iBAAiB;AAExB,SAAS,YAAY,GAAoB;AACvC,MAAI,MAAM,GAAI,QAAO;AACrB,MAAI,MAAM,CAAW,EAAG,QAAO;AAC/B,SAAO,WAAW,CAAW;AAC/B;AAEA,SAAS,aAAa,GAAqB;AACzC,QAAM,WAAY,OAAO,MAAO;AAChC,MAAG,CAAC,UAAU;AACZ,WAAO;AAAA,EACT;AAEA,MAAG,EAAE,MAAM,cAAc,GAAG;AAC1B,WAAO;AAAA,EACT,WACQ,EAAE,MAAM,eAAe,GAAG;AAChC,WAAO;AAAA,EACT,OACK;AACH,WAAO;AAAA,EACT;AACF;AAEA,SAAS,YAAY,GAA8B;AACjD,MAAI,YAAY,CAAQ;AACxB,MAAI,aAAa,CAAQ;AACzB,SAAO;AACT;AAQA,qBAAqB,2BAA2B,MAAM,UAAmC;AAAA,EACvF,OAAO,eAAe;AAAA,IACpB,YAAY,CAAC;AAAA,EACf;AAAA,EAEA,oBAAoB,UAAkB,cAAsB,YAAsB;AAChF,QAAI,YAAY,CAAC,UAAU,cAAc,GAAG,WAAW,IAAI,WAAW,CAAC;AACvE,QAAG,aAAa,SAAS,aAAa,QAAQ;AAC5C,kBAAY,CAAC,UAAU,YAAY;AAAA,IACrC,WAAU,WAAW,WAAW,GAAG;AACjC,kBAAY,CAAC,UAAU,cAAc,EAAE;AAAA,IACzC;AACA,SAAK,MAAM,SAAS,SAAS;AAAA,EAC/B;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,WAAW,EAAE,CAAC;AACpB,UAAM,eAAe,EAAE,CAAC;AACxB,UAAM,aAAa,EAAE,MAAM,CAAC;AAE5B,WAAO,qBAAC,SAAI,WAAU,iCACpB;AAAA,0BAAC,SAAI,WAAU,mCACb;AAAA,QAAC;AAAA;AAAA,UACC,cAAW;AAAA,UACX,OAAO;AAAA,UACP,SAAS,OAAO,KAAK,KAAK,MAAM,UAAW,EAAE,IAAI,cAAY,CAAC,UAAU,QAAQ,CAAC;AAAA,UACjF,UAAU,CAAC,oBAA4B,KAAK,oBAAoB,UAAU,iBAAiB,UAAU;AAAA;AAAA,MACvG,GACF;AAAA,MACA,oBAAC,SAAI,WAAU,mCACb;AAAA,QAAC;AAAA;AAAA,UACC,cAAW;AAAA,UACX,OAAO;AAAA,UACP,UAAU,CAAC,gBAAwB,KAAK,oBAAoB,aAAa,cAAc,UAAU;AAAA,UACjG,SAAS;AAAA;AAAA,MACX,GACF;AAAA,MACC,WAAW,SAAS,KACrB,oBAAC,SAAI,WAAU,+BACb;AAAA,QAAC;AAAA;AAAA,UACC,cAAW;AAAA,UACX,OAAO,WAAW,KAAK,GAAG;AAAA,UAC1B,UAAU,CAAC,MAAc,KAAK,oBAAoB,UAAU,cAAc,EAAE,MAAM,GAAG,CAAC;AAAA;AAAA,MACxF,GACF;AAAA,OAEF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d18e3b448d830733ac17bcacd45f7c08e364baa2"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return $i=function(){return s},s}$i();function Uke(n){return $i().f[0]++,$i().s[0]++,n===""?($i().b[0][0]++,$i().s[1]++,n):($i().b[0][1]++,$i().s[2]++,isNaN(n)?($i().b[1][0]++,$i().s[3]++,n):($i().b[1][1]++,$i().s[4]++,parseFloat(n)))}function Kke(n){$i().f[1]++;const e=($i().s[5]++,typeof n=="string");if($i().s[6]++,e)$i().b[2][1]++;else return $i().b[2][0]++,$i().s[7]++,n;return $i().s[8]++,n.match(/^\s*true\s*$/)?($i().b[3][0]++,$i().s[9]++,!0):($i().b[3][1]++,$i().s[10]++,n.match(/^\s*false\s*$/)?($i().b[4][0]++,$i().s[11]++,!1):($i().b[4][1]++,$i().s[12]++,n))}function Lke(n){return $i().f[2]++,$i().s[13]++,n=Uke(n),$i().s[14]++,n=Kke(n),$i().s[15]++,n}class Fke extends En.Component{static defaultProps=($i().s[16]++,{properties:{}});onFilterPartChanged(e,t,i){$i().f[3]++;let r=($i().s[17]++,[e,t,...i.map(Lke)]);$i().s[18]++,$i().b[6][0]++,e==="has"||($i().b[6][1]++,e==="!has")?($i().b[5][0]++,$i().s[19]++,r=[e,t]):($i().b[5][1]++,$i().s[20]++,i.length===0?($i().b[7][0]++,$i().s[21]++,r=[e,t,""]):$i().b[7][1]++),$i().s[22]++,this.props.onChange(r)}render(){$i().f[4]++;const e=($i().s[23]++,this.props.filter),t=($i().s[24]++,e[0]),i=($i().s[25]++,e[1]),r=($i().s[26]++,e.slice(2));return $i().s[27]++,ie.jsxs("div",{className:"maputnik-filter-editor-single",children:[ie.jsx("div",{className:"maputnik-filter-editor-property",children:ie.jsx(I5,{"aria-label":"key",value:i,options:Object.keys(this.props.properties).map(o=>($i().f[5]++,$i().s[28]++,[o,o])),onChange:o=>($i().f[6]++,$i().s[29]++,this.onFilterPartChanged(t,o,r))})}),ie.jsx("div",{className:"maputnik-filter-editor-operator",children:ie.jsx(rC,{"aria-label":"function",value:t,onChange:o=>($i().f[7]++,$i().s[30]++,this.onFilterPartChanged(o,i,r)),options:Pke})}),($i().b[8][0]++,r.length>0&&($i().b[8][1]++,ie.jsx("div",{className:"maputnik-filter-editor-args",children:ie.jsx(Bm,{"aria-label":"value",value:r.join(","),onChange:o=>($i().f[8]++,$i().s[31]++,this.onFilterPartChanged(t,i,o.split(",")))})})))]})}}function tx(){var n="/home/runner/work/maputnik/maputnik/src/components/FilterEditorBlock.tsx",e="1beba484bbe354357d7ce4f43a423306cbd22032",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FilterEditorBlock.tsx",statementMap:{0:{start:{line:8,column:14},end:{line:8,column:26}},1:{start:{line:9,column:4},end:{line:20,column:9}},2:{start:{line:23,column:26},end:{line:23,column:70}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:11},end:{line:21,column:3}},line:7}},branchMap:{},s:{0:0,1:0,2:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FilterEditorBlock.tsx"],names:[],mappings:"AAYW,SACL,KADK;AAZX,OAAO,WAAuC;AAC9C,OAAO,iBAAiB;AACxB,SAAQ,gBAAe;AACvB,SAA+B,uBAAuB;AAMtD,MAAM,kCAAkC,MAAM,UAA0C;AAAA,EACtF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SAAI,WAAU,gCACpB;AAAA,0BAAC,SAAI,WAAU,wCACZ,eAAK,MAAM,UACd;AAAA,MACA,oBAAC,SAAI,WAAU,uCACb;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,SAAS,KAAK,MAAM;AAAA,UACpB,OAAO,EAAE,qBAAqB;AAAA,UAE9B,8BAAC,YAAS;AAAA;AAAA,MACZ,GACF;AAAA,OACF;AAAA,EACF;AACF;AAEA,MAAM,oBAAoB,gBAAgB,EAAE,yBAAyB;AACrE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"1beba484bbe354357d7ce4f43a423306cbd22032"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return tx=function(){return s},s}tx();class zke extends En.Component{render(){tx().f[0]++;const e=(tx().s[0]++,this.props.t);return tx().s[1]++,ie.jsxs("div",{className:"maputnik-filter-editor-block",children:[ie.jsx("div",{className:"maputnik-filter-editor-block-content",children:this.props.children}),ie.jsx("div",{className:"maputnik-filter-editor-block-action",children:ie.jsx(Zs,{className:"maputnik-icon-button",onClick:this.props.onDelete,title:e("Delete filter block"),children:ie.jsx(Hb,{})})})]})}}const jke=(tx().s[2]++,No()(zke));var K8,RQ;function Nke(){if(RQ)return K8;RQ=1;var n="[object Symbol]",e="\\ud800-\\udfff",t="\\u0300-\\u036f\\ufe20-\\ufe23",i="\\u20d0-\\u20f0",r="\\ufe0e\\ufe0f",o="["+e+"]",s="["+t+i+"]",a="\\ud83c[\\udffb-\\udfff]",c="(?:"+s+"|"+a+")",h="[^"+e+"]",m="(?:\\ud83c[\\udde6-\\uddff]){2}",y="[\\ud800-\\udbff][\\udc00-\\udfff]",M="\\u200d",x=c+"?",T="["+r+"]?",P="(?:"+M+"(?:"+[h,m,y].join("|")+")"+T+x+")*",F=T+x+P,j="(?:"+[h+s+"?",s,m,y,o].join("|")+")",q=RegExp(a+"(?="+a+")|"+j+F,"g"),V=RegExp("["+M+e+t+i+r+"]"),H=typeof window=="object"&&window&&window.Object===Object&&window,Q=typeof self=="object"&&self&&self.Object===Object&&self,Y=H||Q||Function("return this")();function z(nt){return nt.split("")}function se(nt){return V.test(nt)}function le(nt){return se(nt)?pe(nt):z(nt)}function pe(nt){return nt.match(q)||[]}var de=Object.prototype,ve=de.toString,Ee=Y.Symbol,Re=Ee?Ee.prototype:void 0,je=Re?Re.toString:void 0;function Ie(nt,bt,Bt){var Ke=-1,Te=nt.length;bt<0&&(bt=-bt>Te?0:Te+bt),Bt=Bt>Te?Te:Bt,Bt<0&&(Bt+=Te),Te=bt>Bt?0:Bt-bt>>>0,bt>>>=0;for(var Se=Array(Te);++Ke<Te;)Se[Ke]=nt[Ke+bt];return Se}function qe(nt){if(typeof nt=="string")return nt;if(we(nt))return je?je.call(nt):"";var bt=nt+"";return bt=="0"&&1/nt==-1/0?"-0":bt}function tt(nt,bt,Bt){var Ke=nt.length;return Bt=Bt===void 0?Ke:Bt,!bt&&Bt>=Ke?nt:Ie(nt,bt,Bt)}function At(nt){return function(bt){bt=ze(bt);var Bt=se(bt)?le(bt):void 0,Ke=Bt?Bt[0]:bt.charAt(0),Te=Bt?tt(Bt,1).join(""):bt.slice(1);return Ke[nt]()+Te}}function ke(nt){return!!nt&&typeof nt=="object"}function we(nt){return typeof nt=="symbol"||ke(nt)&&ve.call(nt)==n}function ze(nt){return nt==null?"":qe(nt)}function Me(nt){return lt(ze(nt).toLowerCase())}var lt=At("toUpperCase");return K8=Me,K8}var Gke=Nke();const aL=eu(Gke);function Eg(){var n="/home/runner/work/maputnik/maputnik/src/libs/label-from-field-name.ts",e="8b86d889d32efa9a6cc667b2fa3579002dfb58fc",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/label-from-field-name.ts",statementMap:{0:{start:{line:4,column:16},end:{line:4,column:36}},1:{start:{line:5,column:2},end:{line:9,column:3}},2:{start:{line:6,column:4},end:{line:6,column:52}},3:{start:{line:8,column:4},end:{line:8,column:22}},4:{start:{line:10,column:2},end:{line:10,column:27}}},fnMap:{0:{name:"labelFromFieldName",decl:{start:{line:2,column:24},end:{line:2,column:42}},loc:{start:{line:2,column:54},end:{line:11,column:1}},line:2}},branchMap:{0:{loc:{start:{line:5,column:2},end:{line:9,column:3}},type:"if",locations:[{start:{line:5,column:2},end:{line:9,column:3}},{start:{line:7,column:9},end:{line:9,column:3}}],line:5}},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/label-from-field-name.ts"],names:[],mappings:"AAAA,OAAO,gBAAgB;AAEvB,wBAAwB,mBAAmB,WAAmB;AAC5D,MAAI;AACJ,QAAM,QAAQ,UAAU,MAAM,GAAG;AACjC,MAAI,MAAM,SAAS,GAAG;AACpB,YAAQ,UAAU,MAAM,GAAG,EAAE,MAAM,CAAC,EAAE,KAAK,GAAG;AAAA,EAChD,OACK;AACH,YAAQ;AAAA,EACV;AACA,SAAO,WAAW,KAAK;AACzB;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8b86d889d32efa9a6cc667b2fa3579002dfb58fc"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Eg=function(){return s},s}Eg();function L6(n){Eg().f[0]++;let e;const t=(Eg().s[0]++,n.split("-"));return Eg().s[1]++,t.length>1?(Eg().b[0][0]++,Eg().s[2]++,e=n.split("-").slice(1).join(" ")):(Eg().b[0][1]++,Eg().s[3]++,e=n),Eg().s[4]++,aL(e)}function Na(){var n="/home/runner/work/maputnik/maputnik/src/components/_ExpressionProperty.tsx",e="f3c39f8fe544a6a2222a261b9e084b8f7a77d2fb",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/_ExpressionProperty.tsx",statementMap:{0:{start:{line:10,column:24},end:{line:16,column:3}},1:{start:{line:18,column:4},end:{line:18,column:17}},2:{start:{line:19,column:4},end:{line:21,column:6}},3:{start:{line:24,column:34},end:{line:24,column:44}},4:{start:{line:25,column:25},end:{line:25,column:52}},5:{start:{line:26,column:42},end:{line:48,column:8}},6:{start:{line:49,column:16},end:{line:49,column:22}},7:{start:{line:50,column:4},end:{line:53,column:5}},8:{start:{line:51,column:23},end:{line:51,column:118}},9:{start:{line:52,column:6},end:{line:52,column:42}},10:{start:{line:54,column:4},end:{line:76,column:6}},11:{start:{line:79,column:27},end:{line:79,column:72}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:12,column:13},end:{line:12,column:14}},loc:{start:{line:12,column:19},end:{line:13,column:5}},line:12},1:{name:"(anonymous_1)",decl:{start:{line:14,column:12},end:{line:14,column:13}},loc:{start:{line:14,column:18},end:{line:15,column:5}},line:14},2:{name:"(anonymous_2)",decl:{start:{line:17,column:2},end:{line:17,column:3}},loc:{start:{line:17,column:21},end:{line:22,column:3}},line:17},3:{name:"(anonymous_3)",decl:{start:{line:23,column:2},end:{line:23,column:3}},loc:{start:{line:23,column:11},end:{line:77,column:3}},line:23}},branchMap:{0:{loc:{start:{line:25,column:25},end:{line:25,column:52}},type:"cond-expr",locations:[{start:{line:25,column:35},end:{line:25,column:45}},{start:{line:25,column:48},end:{line:25,column:52}}],line:25},1:{loc:{start:{line:27,column:6},end:{line:37,column:7}},type:"binary-expr",locations:[{start:{line:27,column:6},end:{line:27,column:23}},{start:{line:27,column:43},end:{line:37,column:7}}],line:27},2:{loc:{start:{line:50,column:4},end:{line:53,column:5}},type:"if",locations:[{start:{line:50,column:4},end:{line:53,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:50},3:{loc:{start:{line:51,column:23},end:{line:51,column:118}},type:"cond-expr",locations:[{start:{line:51,column:46},end:{line:51,column:95}},{start:{line:51,column:98},end:{line:51,column:118}}],line:51}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},f:{0:0,1:0,2:0,3:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_ExpressionProperty.tsx"],names:[],mappings:"AA6CM,mBASM,KATN;AA7CN,OAAO,WAAW;AAClB,SAAQ,UAAU,cAAa;AAC/B,SAA+B,uBAAuB;AAEtD,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,wBAAwB;AAC/B,OAAO,eAAe;AAmBtB,MAAM,mCAAmC,MAAM,UAA2C;AAAA,EACxF,OAAO,eAAe;AAAA,IACpB,QAAQ,CAAC;AAAA,IACT,SAAS,MAAM;AAAA,IAAC;AAAA,IAChB,QAAQ,MAAM;AAAA,IAAC;AAAA,EACjB;AAAA,EAEA,YAAY,OAAwC;AAClD,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,WAAW;AAAA,IACb;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,GAAG,OAAO,QAAO,IAAI,KAAK;AACjC,UAAM,eAAe,UAAU,CAAC,QAAQ,IAAI;AAE5C,UAAM,gBACJ,iCACG;AAAA,WAAK,MAAM,UACV;AAAA,QAAC;AAAA;AAAA,UAEC,SAAS,KAAK,MAAM;AAAA,UACpB,UAAU;AAAA,UACV,WAAU;AAAA,UACV,OAAO,EAAE,wBAAwB;AAAA,UAEjC,8BAAC,UAAO;AAAA;AAAA,QANJ;AAAA,MAON;AAAA,MAEF;AAAA,QAAC;AAAA;AAAA,UAEC,SAAS,KAAK,MAAM;AAAA,UACpB,WAAU;AAAA,UACV,OAAO,EAAE,mBAAmB;AAAA,UAE5B,8BAAC,YAAS;AAAA;AAAA,QALN;AAAA,MAMN;AAAA,OACF;AAEF,QAAI,QAAQ;AACZ,QAAI,KAAK,MAAM,QAAQ;AACrB,YAAM,WAAW,KAAK,MAAM,YAAY,KAAK,MAAM,YAAY,MAAM,KAAK,MAAM,YAAY,KAAK,MAAM;AACvG,cAAQ,KAAK,MAAM,OAAO,QAAQ;AAAA,IACpC;AACA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAW,KAAK,MAAM;AAAA,QACtB,OAAO,EAAE,mBAAmB,KAAK,MAAM,SAAS,CAAC;AAAA,QACjD,QAAQ;AAAA,QACR,UAAU;AAAA,QACV;AAAA,QAEA;AAAA,UAAC;AAAA;AAAA,YACC,UAAS;AAAA,YACT,MAAM,KAAK,MAAM;AAAA,YACjB,WAAU;AAAA,YACV,SAAS,KAAK,MAAM;AAAA,YACpB,QAAQ,KAAK,MAAM;AAAA,YACnB;AAAA,YACA,WAAW;AAAA,YACX,UAAU,KAAK,MAAM;AAAA;AAAA,QACvB;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,qBAAqB,gBAAgB,EAAE,0BAA0B;AACvE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f3c39f8fe544a6a2222a261b9e084b8f7a77d2fb"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Na=function(){return s},s}Na();class Wke extends En.Component{static defaultProps=(Na().s[0]++,{errors:{},onFocus:()=>{Na().f[0]++},onBlur:()=>{Na().f[1]++}});constructor(e){Na().f[2]++,Na().s[1]++,super(e),Na().s[2]++,this.state={jsonError:!1}}render(){Na().f[3]++;const{t:e,value:t,canUndo:i}=(Na().s[3]++,this.props),r=(Na().s[4]++,i?(Na().b[0][0]++,!i()):(Na().b[0][1]++,!0)),o=(Na().s[5]++,ie.jsxs(ie.Fragment,{children:[(Na().b[1][0]++,this.props.onUndo&&(Na().b[1][1]++,ie.jsx(Zs,{onClick:this.props.onUndo,disabled:r,className:"maputnik-delete-stop",title:e("Revert from expression"),children:ie.jsx(Kfe,{})},"undo_action"))),ie.jsx(Zs,{onClick:this.props.onDelete,className:"maputnik-delete-stop",title:e("Delete expression"),children:ie.jsx(Hb,{})},"delete_action")]}));let s=(Na().s[6]++,void 0);if(Na().s[7]++,this.props.errors){Na().b[2][0]++;const a=(Na().s[8]++,this.props.fieldType?(Na().b[3][0]++,this.props.fieldType+"."+this.props.fieldName):(Na().b[3][1]++,this.props.fieldName));Na().s[9]++,s=this.props.errors[a]}else Na().b[2][1]++;return Na().s[10]++,ie.jsx(Ls,{fieldSpec:this.props.fieldSpec,label:e(L6(this.props.fieldName)),action:o,wideMode:!0,error:s,children:ie.jsx(oL,{lintType:"expression",spec:this.props.fieldSpec,className:"maputnik-expression-editor",onFocus:this.props.onFocus,onBlur:this.props.onBlur,value:t,maxHeight:200,onChange:this.props.onChange})})}}const fse=(Na().s[11]++,No()(Wke));function An(){var n="/home/runner/work/maputnik/maputnik/src/components/FilterEditor.tsx",e="e47fcaaf47a881c798f8d8c8b2982ffb5ed75681",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FilterEditor.tsx",statementMap:{0:{start:{line:18,column:17},end:{line:18,column:40}},1:{start:{line:19,column:2},end:{line:21,column:3}},2:{start:{line:20,column:4},end:{line:20,column:18}},3:{start:{line:22,column:20},end:{line:22,column:29}},4:{start:{line:23,column:16},end:{line:23,column:31}},5:{start:{line:24,column:2},end:{line:27,column:3}},6:{start:{line:25,column:4},end:{line:25,column:24}},7:{start:{line:26,column:4},end:{line:26,column:32}},8:{start:{line:28,column:2},end:{line:28,column:35}},9:{start:{line:31,column:2},end:{line:31,column:65}},10:{start:{line:34,column:2},end:{line:55,column:4}},11:{start:{line:57,column:19},end:{line:61,column:1}},12:{start:{line:63,column:2},end:{line:65,column:3}},13:{start:{line:64,column:4},end:{line:64,column:16}},14:{start:{line:66,column:21},end:{line:66,column:42}},15:{start:{line:67,column:2},end:{line:67,column:38}},16:{start:{line:70,column:2},end:{line:70,column:52}},17:{start:{line:73,column:2},end:{line:75,column:3}},18:{start:{line:74,column:4},end:{line:74,column:97}},19:{start:{line:74,column:38},end:{line:74,column:59}},20:{start:{line:74,column:75},end:{line:74,column:84}},21:{start:{line:76,column:2},end:{line:76,column:15}},22:{start:{line:79,column:24},end:{line:81,column:3}},23:{start:{line:83,column:4},end:{line:83,column:17}},24:{start:{line:84,column:4},end:{line:87,column:6}},25:{start:{line:91,column:22},end:{line:91,column:58}},26:{start:{line:92,column:4},end:{line:92,column:35}},27:{start:{line:93,column:4},end:{line:93,column:35}},28:{start:{line:96,column:22},end:{line:96,column:58}},29:{start:{line:97,column:4},end:{line:97,column:39}},30:{start:{line:98,column:4},end:{line:98,column:35}},31:{start:{line:100,column:18},end:{line:104,column:3}},32:{start:{line:101,column:26},end:{line:101,column:62}},33:{start:{line:102,column:4},end:{line:102,column:43}},34:{start:{line:103,column:4},end:{line:103,column:39}},35:{start:{line:105,column:16},end:{line:109,column:3}},36:{start:{line:106,column:4},end:{line:108,column:7}},37:{start:{line:110,column:15},end:{line:114,column:3}},38:{start:{line:111,column:4},end:{line:113,column:7}},39:{start:{line:115,column:19},end:{line:121,column:3}},40:{start:{line:116,column:19},end:{line:116,column:46}},41:{start:{line:117,column:4},end:{line:117,column:47}},42:{start:{line:118,column:4},end:{line:120,column:7}},43:{start:{line:123,column:32},end:{line:123,column:75}},44:{start:{line:124,column:4},end:{line:137,column:5}},45:{start:{line:125,column:6},end:{line:128,column:8}},46:{start:{line:129,column:11},end:{line:137,column:5}},47:{start:{line:130,column:6},end:{line:132,column:8}},48:{start:{line:134,column:6},end:{line:136,column:8}},49:{start:{line:140,column:26},end:{line:140,column:36}},50:{start:{line:141,column:36},end:{line:141,column:46}},51:{start:{line:142,column:22},end:{line:144,column:5}},52:{start:{line:145,column:26},end:{line:145,column:33}},53:{start:{line:146,column:36},end:{line:146,column:112}},54:{start:{line:147,column:4},end:{line:270,column:5}},55:{start:{line:148,column:6},end:{line:161,column:11}},56:{start:{line:162,column:11},end:{line:270,column:5}},57:{start:{line:163,column:21},end:{line:163,column:48}},58:{start:{line:164,column:26},end:{line:164,column:35}},59:{start:{line:165,column:22},end:{line:165,column:37}},60:{start:{line:166,column:38},end:{line:174,column:10}},61:{start:{line:175,column:27},end:{line:188,column:8}},62:{start:{line:176,column:22},end:{line:176,column:50}},63:{start:{line:177,column:8},end:{line:187,column:29}},64:{start:{line:189,column:6},end:{line:240,column:11}},65:{start:{line:200,column:33},end:{line:200,column:63}},66:{start:{line:242,column:25},end:{line:242,column:35}},67:{start:{line:243,column:6},end:{line:269,column:11}},68:{start:{line:248,column:14},end:{line:248,column:59}},69:{start:{line:249,column:14},end:{line:249,column:49}},70:{start:{line:273,column:21},end:{line:273,column:60}}},fnMap:{0:{name:"combiningFilter",decl:{start:{line:17,column:9},end:{line:17,column:24}},loc:{start:{line:17,column:32},end:{line:29,column:1}},line:17},1:{name:"migrateFilter",decl:{start:{line:30,column:9},end:{line:30,column:22}},loc:{start:{line:30,column:31},end:{line:32,column:1}},line:30},2:{name:"createStyleFromFilter",decl:{start:{line:33,column:9},end:{line:33,column:30}},loc:{start:{line:33,column:39},end:{line:56,column:1}},line:33},3:{name:"checkIfSimpleFilter",decl:{start:{line:62,column:9},end:{line:62,column:28}},loc:{start:{line:62,column:37},end:{line:68,column:1}},line:62},4:{name:"hasCombiningFilter",decl:{start:{line:69,column:9},end:{line:69,column:27}},loc:{start:{line:69,column:36},end:{line:71,column:1}},line:69},5:{name:"hasNestedCombiningFilter",decl:{start:{line:72,column:9},end:{line:72,column:33}},loc:{start:{line:72,column:42},end:{line:77,column:1}},line:72},6:{name:"(anonymous_6)",decl:{start:{line:74,column:31},end:{line:74,column:32}},loc:{start:{line:74,column:38},end:{line:74,column:59}},line:74},7:{name:"(anonymous_7)",decl:{start:{line:74,column:68},end:{line:74,column:69}},loc:{start:{line:74,column:75},end:{line:74,column:84}},line:74},8:{name:"(anonymous_8)",decl:{start:{line:82,column:2},end:{line:82,column:3}},loc:{start:{line:82,column:21},end:{line:88,column:3}},line:82},9:{name:"(anonymous_9)",decl:{start:{line:90,column:2},end:{line:90,column:3}},loc:{start:{line:90,column:42},end:{line:94,column:3}},line:90},10:{name:"(anonymous_10)",decl:{start:{line:95,column:2},end:{line:95,column:3}},loc:{start:{line:95,column:30},end:{line:99,column:3}},line:95},11:{name:"(anonymous_11)",decl:{start:{line:100,column:18},end:{line:100,column:19}},loc:{start:{line:100,column:24},end:{line:104,column:3}},line:100},12:{name:"(anonymous_12)",decl:{start:{line:105,column:16},end:{line:105,column:17}},loc:{start:{line:105,column:25},end:{line:109,column:3}},line:105},13:{name:"(anonymous_13)",decl:{start:{line:110,column:15},end:{line:110,column:16}},loc:{start:{line:110,column:21},end:{line:114,column:3}},line:110},14:{name:"(anonymous_14)",decl:{start:{line:115,column:19},end:{line:115,column:20}},loc:{start:{line:115,column:25},end:{line:121,column:3}},line:115},15:{name:"(anonymous_15)",decl:{start:{line:122,column:2},end:{line:122,column:3}},loc:{start:{line:122,column:48},end:{line:138,column:3}},line:122},16:{name:"(anonymous_16)",decl:{start:{line:139,column:2},end:{line:139,column:3}},loc:{start:{line:139,column:11},end:{line:271,column:3}},line:139},17:{name:"(anonymous_17)",decl:{start:{line:175,column:39},end:{line:175,column:40}},loc:{start:{line:175,column:51},end:{line:188,column:7}},line:175},18:{name:"(anonymous_18)",decl:{start:{line:200,column:26},end:{line:200,column:27}},loc:{start:{line:200,column:33},end:{line:200,column:63}},line:200},19:{name:"(anonymous_19)",decl:{start:{line:247,column:22},end:{line:247,column:23}},loc:{start:{line:247,column:28},end:{line:250,column:13}},line:247}},branchMap:{0:{loc:{start:{line:18,column:17},end:{line:18,column:40}},type:"binary-expr",locations:[{start:{line:18,column:17},end:{line:18,column:29}},{start:{line:18,column:33},end:{line:18,column:40}}],line:18},1:{loc:{start:{line:19,column:2},end:{line:21,column:3}},type:"if",locations:[{start:{line:19,column:2},end:{line:21,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:19},2:{loc:{start:{line:24,column:2},end:{line:27,column:3}},type:"if",locations:[{start:{line:24,column:2},end:{line:27,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:24},3:{loc:{start:{line:63,column:2},end:{line:65,column:3}},type:"if",locations:[{start:{line:63,column:2},end:{line:65,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:63},4:{loc:{start:{line:63,column:6},end:{line:63,column:59}},type:"binary-expr",locations:[{start:{line:63,column:6},end:{line:63,column:25}},{start:{line:63,column:29},end:{line:63,column:59}}],line:63},5:{loc:{start:{line:73,column:2},end:{line:75,column:3}},type:"if",locations:[{start:{line:73,column:2},end:{line:75,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:73},6:{loc:{start:{line:124,column:4},end:{line:137,column:5}},type:"if",locations:[{start:{line:124,column:4},end:{line:137,column:5}},{start:{line:129,column:11},end:{line:137,column:5}}],line:124},7:{loc:{start:{line:124,column:8},end:{line:124,column:66}},type:"binary-expr",locations:[{start:{line:124,column:8},end:{line:124,column:28}},{start:{line:124,column:32},end:{line:124,column:66}}],line:124},8:{loc:{start:{line:129,column:11},end:{line:137,column:5}},type:"if",locations:[{start:{line:129,column:11},end:{line:137,column:5}},{start:{line:133,column:11},end:{line:137,column:5}}],line:129},9:{loc:{start:{line:129,column:15},end:{line:129,column:73}},type:"binary-expr",locations:[{start:{line:129,column:15},end:{line:129,column:34}},{start:{line:129,column:38},end:{line:129,column:73}}],line:129},10:{loc:{start:{line:146,column:36},end:{line:146,column:112}},type:"binary-expr",locations:[{start:{line:146,column:36},end:{line:146,column:55}},{start:{line:146,column:59},end:{line:146,column:112}}],line:146},11:{loc:{start:{line:147,column:4},end:{line:270,column:5}},type:"if",locations:[{start:{line:147,column:4},end:{line:270,column:5}},{start:{line:162,column:11},end:{line:270,column:5}}],line:147},12:{loc:{start:{line:162,column:11},end:{line:270,column:5}},type:"if",locations:[{start:{line:162,column:11},end:{line:270,column:5}},{start:{line:241,column:11},end:{line:270,column:5}}],line:162},13:{loc:{start:{line:186,column:10},end:{line:186,column:119}},type:"binary-expr",locations:[{start:{line:186,column:10},end:{line:186,column:15}},{start:{line:186,column:35},end:{line:186,column:119}}],line:186},14:{loc:{start:{line:235,column:30},end:{line:235,column:62}},type:"cond-expr",locations:[{start:{line:235,column:51},end:{line:235,column:53}},{start:{line:235,column:56},end:{line:235,column:62}}],line:235},15:{loc:{start:{line:257,column:8},end:{line:268,column:12}},type:"binary-expr",locations:[{start:{line:257,column:8},end:{line:257,column:38}},{start:{line:257,column:58},end:{line:268,column:12}}],line:257}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FilterEditor.tsx"],names:[],mappings:"AAkMQ,SAkDA,UAlDA,KAGA,YAHA;AAlMR,OAAO,WAAW;AAClB,SAAS,sBAAsB;AAC/B,SAAS,sBAAsB;AAC/B,SAAQ,eAAc;AAEtB,SAAQ,SAAS,qBAAoB;AACrC,OAAO,YAAY;AAEnB,SAAQ,0BAAyB;AACjC,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,OAAO,wBAAwB;AAC/B,OAAO,uBAAuB;AAC9B,OAAO,iBAAiB;AACxB,OAAO,SAAS;AAChB,OAAO,wBAAwB;AAC/B,SAA+B,uBAAuB;AAItD,SAAS,gBAAgB,OAAuF;AAC9G,QAAM,SAAS,MAAM,UAAU,CAAC,KAAK;AAErC,MAAI,CAAC,MAAM,QAAQ,MAAM,GAAG;AAC1B,WAAO;AAAA,EACT;AAEA,MAAI,cAAc,OAAO,CAAC;AAC1B,MAAI,UAAU,OAAO,MAAM,CAAC;AAE5B,MAAG,mBAAmB,QAAQ,WAAW,IAAI,GAAG;AAC9C,kBAAc;AACd,cAAU,CAAC,OAAO,MAAM,CAAC,CAAC;AAAA,EAC5B;AAEA,SAAO,CAAC,aAAa,GAAG,OAAO;AACjC;AAEA,SAAS,cAAc,QAA6D;AAElF,SAAQ,QAAQ,sBAAsB,MAAM,CAAQ,EAAE,OAAO,CAAC,EAAU;AAC1E;AAEA,SAAS,sBAAsB,QAAuF;AACpH,SAAO;AAAA,IACL,MAAM;AAAA,IACN,WAAW;AAAA,IACX,QAAQ;AAAA,IACR,YAAY,EAAC,qBAAqB,SAAQ;AAAA,IAC1C,WAAW;AAAA,MACT,OAAO;AAAA,QACL,QAAQ;AAAA,QACR,QAAQ;AAAA,MACV;AAAA,IACF;AAAA,IACA,UAAU;AAAA,IACV,UAAU;AAAA,IACV,UAAU;AAAA,MACR;AAAA,QACE,IAAI;AAAA,QACJ,MAAM;AAAA,QACN,QAAQ;AAAA,QACR;AAAA,MACF;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,aAAa;AAAA,EACjB;AAAA,EACA;AAAA,EACA;AACF;AAGA,SAAS,oBAAqB,QAA6D;AACzF,MAAI,OAAO,WAAW,KAAK,WAAW,SAAS,OAAO,CAAC,CAAC,GAAG;AACzD,WAAO;AAAA,EACT;AACA,QAAM,aAAa,cAAc,MAAM;AACvC,SAAO,CAAC,QAAQ,YAAY,MAAM;AACpC;AAEA,SAAS,mBAAmB,QAA6D;AACvF,SAAO,mBAAmB,QAAQ,OAAO,CAAC,CAAC,KAAK;AAClD;AAEA,SAAS,yBAAyB,QAA6D;AAC7F,MAAG,mBAAmB,MAAM,GAAG;AAC7B,WAAO,OAAO,MAAM,CAAC,EAAE,IAAI,OAAK,mBAAmB,CAAQ,CAAC,EAAE,OAAO,OAAK,KAAK,IAAI,EAAE,SAAS;AAAA,EAChG;AACA,SAAO;AACT;AAgBA,MAAM,6BAA6B,MAAM,UAAwD;AAAA,EAC/F,OAAO,eAAe;AAAA,IACpB,QAAQ,CAAC,KAAK;AAAA,EAChB;AAAA,EAEA,YAAa,OAAkC;AAC7C,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,SAAS;AAAA,MACT,qBAAqB,oBAAoB,gBAAgB,KAAK,CAAC;AAAA,IACjE;AAAA,EACF;AAAA;AAAA,EAGA,oBAAoB,WAAmB,SAAgB;AACrD,UAAM,YAAY,gBAAgB,KAAK,KAAK,EAAE,MAAM,CAAC;AACrD,cAAU,SAAS,IAAI;AACvB,SAAK,MAAM,SAAS,SAAS;AAAA,EAC/B;AAAA,EAEA,iBAAiB,WAAmB;AAClC,UAAM,YAAY,gBAAgB,KAAK,KAAK,EAAE,MAAM,CAAC;AACrD,cAAU,OAAO,YAAY,GAAG,CAAC;AACjC,SAAK,MAAM,SAAS,SAAS;AAAA,EAC/B;AAAA,EAEA,gBAAgB,MAAM;AACpB,UAAM,gBAAgB,gBAAgB,KAAK,KAAK,EAAE,MAAM,CAAC;AACzD,IAAC,cAAwB,KAAK,CAAC,MAAM,QAAQ,EAAE,CAAC;AAChD,SAAK,MAAM,SAAS,aAAa;AAAA,EACnC;AAAA,EAEA,cAAc,CAAC,QAAiB;AAC9B,SAAK,SAAS;AAAA,MACZ,SAAS;AAAA,IACX,CAAC;AAAA,EACH;AAAA,EAEA,aAAa,MAAM;AACjB,SAAK,SAAS;AAAA,MACZ,qBAAqB;AAAA,IACvB,CAAC;AAAA,EACH;AAAA,EAEA,iBAAiB,MAAM;AACrB,UAAM,SAAS,gBAAgB,KAAK,KAAK;AACzC,SAAK,MAAM,SAAS,cAAc,MAAM,CAAC;AACzC,SAAK,SAAS;AAAA,MACZ,qBAAqB;AAAA,IACvB,CAAC;AAAA,EACH;AAAA,EAEA,OAAO,yBAAyB,OAA4C,OAA0B;AACpG,UAAM,sBAAsB,oBAAoB,gBAAgB,KAAK,CAAC;AAGtE,QAAI,CAAC,uBAAuB,MAAM,wBAAwB,MAAM;AAC9D,aAAO;AAAA,QACL,qBAAqB;AAAA,QACrB,qBAAqB;AAAA,MACvB;AAAA,IACF,WACS,uBAAuB,MAAM,wBAAwB,OAAO;AACnE,aAAO;AAAA,QACL,qBAAqB;AAAA,MACvB;AAAA,IACF,OACK;AACH,aAAO;AAAA,QACL,qBAAqB;AAAA,MACvB;AAAA,IACF;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,QAAQ,EAAC,IAAI,KAAK;AACzB,UAAM,EAAC,oBAAmB,IAAI,KAAK;AACnC,UAAM,YAAU;AAAA,MACd,KAAK,OAAO,MAAM,OAAO,MAAM;AAAA,IACjC;AACA,UAAM,gBAAgB,CAAC,KAAK;AAE5B,UAAM,0BAA0B,uBAAuB,yBAAyB,gBAAgB,KAAK,KAAK,CAAC;AAE3G,QAAI,yBAAyB;AAC3B,aAAO,qBAAC,SAAI,WAAU,sCACpB;AAAA,4BAAC,OACE,YAAE,mCAAmC,GACxC;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YACC,SAAS,KAAK;AAAA,YACd,OAAO,EAAE,uBAAuB;AAAA,YAEhC;AAAA,kCAAC,kBAAe;AAAA,cACf,EAAE,uBAAuB;AAAA;AAAA;AAAA,QAC5B;AAAA,SACF;AAAA,IACF,WACS,qBAAqB;AAC5B,YAAM,SAAS,gBAAgB,KAAK,KAAK;AACzC,YAAM,cAAc,OAAO,CAAC;AAC5B,YAAM,UAAU,OAAO,MAAM,CAAC;AAE9B,YAAM,UACJ,oBAAC,SACC;AAAA,QAAC;AAAA;AAAA,UACC,SAAS,KAAK;AAAA,UACd,OAAO,EAAE,uBAAuB;AAAA,UAChC,WAAU;AAAA,UAEV,8BAAC,kBAAe;AAAA;AAAA,MAClB,GACF;AAGF,YAAM,eAAe,QAAQ,IAAI,CAAC,GAAG,QAAQ;AAC3C,cAAM,QAAQ,OAAQ,UAAU,MAAI,CAAC,GAAG;AAExC,eACE,qBAAC,SACC;AAAA,8BAAC,qBAA4B,UAAU,KAAK,iBAAiB,KAAK,MAAM,GAAG,GACzE;AAAA,YAAC;AAAA;AAAA,cACC,YAAY,KAAK,MAAM;AAAA,cACvB,QAAQ;AAAA,cACR,UAAU,KAAK,oBAAoB,KAAK,MAAM,MAAM,CAAC;AAAA;AAAA,UACvD,KALsB,GAMxB;AAAA,UACC,SACC,oBAAC,SAAgB,WAAU,yBAAyB,gBAAM,WAAjD,OAAyD;AAAA,aAT5D,SAAS,GAAG,EAWtB;AAAA,MAEJ,CAAC;AAGD,aACE,iCACE;AAAA;AAAA,UAAC;AAAA;AAAA,YAEC;AAAA,YACA,OAAO,EAAE,QAAQ;AAAA,YACjB,QAAQ;AAAA,YAER;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO;AAAA,gBACP,UAAU,CAAC,MAAqB,KAAK,oBAAoB,GAAG,CAAC;AAAA,gBAC7D,SAAS;AAAA,kBACP,CAAC,OAAO,EAAE,sBAAsB,CAAC;AAAA,kBACjC,CAAC,QAAQ,EAAE,mBAAmB,CAAC;AAAA,kBAC/B,CAAC,OAAO,EAAE,oBAAoB,CAAC;AAAA,gBACjC;AAAA;AAAA,YACF;AAAA;AAAA,UAbI;AAAA,QAcN;AAAA,QACC;AAAA,QACD;AAAA,UAAC;AAAA;AAAA,YAEC,WAAU;AAAA,YAEV;AAAA,cAAC;AAAA;AAAA,gBACC,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACV,SAAS,KAAK;AAAA,gBAEd;AAAA,sCAAC,kBAAe,OAAO,EAAE,eAAe,cAAc,GAAG;AAAA,kBACxD,EAAE,YAAY;AAAA;AAAA;AAAA,YACjB;AAAA;AAAA,UAVI;AAAA,QAWN;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YAEC,WAAU;AAAA,YACV,OAAO,EAAC,SAAS,KAAK,MAAM,UAAU,KAAK,OAAM;AAAA,YAEjD,8BAAC,OAAI,WAAsB;AAAA;AAAA,UAJvB;AAAA,QAKN;AAAA,SACF;AAAA,IAEJ,OACK;AACH,YAAM,EAAC,OAAM,IAAI,KAAK;AAEtB,aACE,iCACE;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,UAAU,MAAM;AACd,mBAAK,SAAS,EAAC,qBAAqB,KAAI,CAAC;AACzC,mBAAK,MAAM,SAAS,aAAa;AAAA,YACnC;AAAA,YACA,WAAU;AAAA,YACV,OAAO;AAAA,YACP;AAAA,YACA,UAAU,KAAK,MAAM;AAAA;AAAA,QACvB;AAAA,QACC,KAAK,MAAM,uBACV,qBAAC,SAAI,WAAU,yBACZ;AAAA,YAAE,qCAAqC;AAAA,UACvC;AAAA,UACD;AAAA,YAAC;AAAA;AAAA,cACC,SAAS,KAAK;AAAA,cACd,WAAU;AAAA,cAET,YAAE,0BAA0B;AAAA;AAAA,UAC/B;AAAA,WACF;AAAA,SAEJ;AAAA,IAEJ;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e47fcaaf47a881c798f8d8c8b2982ffb5ed75681"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return An=function(){return s},s}An();function My(n){An().f[0]++;const e=(An().s[0]++,An().b[0][0]++,n.filter||(An().b[0][1]++,["all"]));if(An().s[1]++,Array.isArray(e))An().b[1][1]++;else return An().b[1][0]++,An().s[2]++,e;let t=(An().s[3]++,e[0]),i=(An().s[4]++,e.slice(1));return An().s[5]++,sL.indexOf(t)<0?(An().b[2][0]++,An().s[6]++,t="all",An().s[7]++,i=[e.slice(0)]):An().b[2][1]++,An().s[8]++,[t,...i]}function Qke(n){return An().f[1]++,An().s[9]++,sde(qke(n)).layers[0].filter}function qke(n){return An().f[2]++,An().s[10]++,{id:"tmp",version:8,name:"Empty Style",metadata:{"maputnik:renderer":"mlgljs"},sources:{tmp:{type:"geojson",data:""}},sprite:"",glyphs:"https://orangemug.github.io/font-glyphs/glyphs/{fontstack}/{range}.pbf",layers:[{id:"tmp",type:"fill",source:"tmp",filter:n}]}}const Yke=(An().s[11]++,["all","any","none"]);function DQ(n){if(An().f[3]++,An().s[12]++,An().b[4][0]++,n.length===1&&(An().b[4][1]++,Yke.includes(n[0])))return An().b[3][0]++,An().s[13]++,!0;An().b[3][1]++;const e=(An().s[14]++,u3(n));return An().s[15]++,!Q4.isEqual(e,n)}function PQ(n){return An().f[4]++,An().s[16]++,sL.indexOf(n[0])>=0}function $ke(n){return An().f[5]++,An().s[17]++,PQ(n)?(An().b[5][0]++,An().s[18]++,n.slice(1).map(e=>(An().f[6]++,An().s[19]++,PQ(e))).filter(e=>(An().f[7]++,An().s[20]++,e==!0)).length>0):(An().b[5][1]++,An().s[21]++,!1)}class Vke extends En.Component{static defaultProps=(An().s[22]++,{filter:["all"]});constructor(e){An().f[8]++,An().s[23]++,super(e),An().s[24]++,this.state={showDoc:!1,displaySimpleFilter:DQ(My(e))}}onFilterPartChanged(e,t){An().f[9]++;const i=(An().s[25]++,My(this.props).slice(0));An().s[26]++,i[e]=t,An().s[27]++,this.props.onChange(i)}deleteFilterItem(e){An().f[10]++;const t=(An().s[28]++,My(this.props).slice(0));An().s[29]++,t.splice(e+1,1),An().s[30]++,this.props.onChange(t)}addFilterItem=(An().s[31]++,()=>{An().f[11]++;const e=(An().s[32]++,My(this.props).slice(0));An().s[33]++,e.push(["==","name",""]),An().s[34]++,this.props.onChange(e)});onToggleDoc=(An().s[35]++,e=>{An().f[12]++,An().s[36]++,this.setState({showDoc:e})});makeFilter=(An().s[37]++,()=>{An().f[13]++,An().s[38]++,this.setState({displaySimpleFilter:!0})});makeExpression=(An().s[39]++,()=>{An().f[14]++;const e=(An().s[40]++,My(this.props));An().s[41]++,this.props.onChange(Qke(e)),An().s[42]++,this.setState({displaySimpleFilter:!1})});static getDerivedStateFromProps(e,t){An().f[15]++;const i=(An().s[43]++,DQ(My(e)));return An().s[44]++,An().b[7][0]++,!i&&(An().b[7][1]++,t.displaySimpleFilter===!0)?(An().b[6][0]++,An().s[45]++,{displaySimpleFilter:!1,valueIsSimpleFilter:!1}):(An().b[6][1]++,An().s[46]++,An().b[9][0]++,i&&(An().b[9][1]++,t.displaySimpleFilter===!1)?(An().b[8][0]++,An().s[47]++,{valueIsSimpleFilter:!0}):(An().b[8][1]++,An().s[48]++,{valueIsSimpleFilter:!1}))}render(){An().f[16]++;const{errors:e,t}=(An().s[49]++,this.props),{displaySimpleFilter:i}=(An().s[50]++,this.state),r=(An().s[51]++,{doc:Zr.layer.filter.doc+" Combine multiple filters together by using a compound filter."}),o=(An().s[52]++,["all"]),s=(An().s[53]++,An().b[10][0]++,i&&(An().b[10][1]++,$ke(My(this.props))));if(An().s[54]++,s)return An().b[11][0]++,An().s[55]++,ie.jsxs("div",{className:"maputnik-filter-editor-unsupported",children:[ie.jsx("p",{children:t("Nested filters are not supported.")}),ie.jsxs(Zs,{onClick:this.makeExpression,title:t("Convert to expression"),children:[ie.jsx(R4,{}),t("Upgrade to expression")]})]});if(An().b[11][1]++,An().s[56]++,i){An().b[12][0]++;const a=(An().s[57]++,My(this.props)),c=(An().s[58]++,a[0]),h=(An().s[59]++,a.slice(1)),m=(An().s[60]++,ie.jsx("div",{children:ie.jsx(Zs,{onClick:this.makeExpression,title:t("Convert to expression"),className:"maputnik-make-zoom-function",children:ie.jsx(R4,{})})})),y=(An().s[61]++,h.map((M,x)=>{An().f[17]++;const T=(An().s[62]++,e[`filter[${x+1}]`]);return An().s[63]++,ie.jsxs("div",{children:[ie.jsx(jke,{onDelete:this.deleteFilterItem.bind(this,x),children:ie.jsx(Fke,{properties:this.props.properties,filter:M,onChange:this.onFilterPartChanged.bind(this,x+1)})},x),(An().b[13][0]++,T&&(An().b[13][1]++,ie.jsx("div",{className:"maputnik-inline-error",children:T.message},"error")))]},`block-${x}`)}));return An().s[64]++,ie.jsxs(ie.Fragment,{children:[ie.jsx(Ls,{fieldSpec:r,label:t("Filter"),action:m,children:ie.jsx(rC,{value:c,onChange:M=>(An().f[18]++,An().s[65]++,this.onFilterPartChanged(0,M)),options:[["all",t("every filter matches")],["none",t("no filter matches")],["any",t("any filter matches")]]})},"top"),y,ie.jsx("div",{className:"maputnik-filter-editor-add-wrapper",children:ie.jsxs(Zs,{"data-wd-key":"layer-filter-button",className:"maputnik-add-filter",onClick:this.addFilterItem,children:[ie.jsx(K6,{style:{verticalAlign:"text-bottom"}}),t("Add filter")]})},"buttons"),ie.jsx("div",{className:"maputnik-doc-inline",style:{display:this.state.showDoc?(An().b[14][0]++,""):(An().b[14][1]++,"none")},children:ie.jsx(O6,{fieldSpec:r})},"doc")]})}else{An().b[12][1]++;const{filter:a}=(An().s[66]++,this.props);return An().s[67]++,ie.jsxs(ie.Fragment,{children:[ie.jsx(fse,{onDelete:()=>{An().f[19]++,An().s[68]++,this.setState({displaySimpleFilter:!0}),An().s[69]++,this.props.onChange(o)},fieldName:"filter",value:a,errors:e,onChange:this.props.onChange}),(An().b[15][0]++,this.state.valueIsSimpleFilter&&(An().b[15][1]++,ie.jsxs("div",{className:"maputnik-expr-infobox",children:[t("You've entered an old style filter.")," ",ie.jsx("button",{onClick:this.makeFilter,className:"maputnik-expr-infobox__button",children:t("Switch to filter editor.")})]})))]})}}}const Hke=(An().s[70]++,No()(Vke));var $C={},dd={},VC={},L8,UQ;function pse(){if(UQ)return L8;UQ=1;var n=typeof window=="object"&&window&&window.Object===Object&&window;return L8=n,L8}var F8,KQ;function Um(){if(KQ)return F8;KQ=1;var n=pse(),e=typeof self=="object"&&self&&self.Object===Object&&self,t=n||e||Function("return this")();return F8=t,F8}var z8,LQ;function k5(){if(LQ)return z8;LQ=1;var n=Um(),e=n.Symbol;return z8=e,z8}var j8,FQ;function Zke(){if(FQ)return j8;FQ=1;var n=k5(),e=Object.prototype,t=e.hasOwnProperty,i=e.toString,r=n?n.toStringTag:void 0;function o(s){var a=t.call(s,r),c=s[r];try{s[r]=void 0;var h=!0}catch{}var m=i.call(s);return h&&(a?s[r]=c:delete s[r]),m}return j8=o,j8}var N8,zQ;function Xke(){if(zQ)return N8;zQ=1;var n=Object.prototype,e=n.toString;function t(i){return e.call(i)}return N8=t,N8}var G8,jQ;function oC(){if(jQ)return G8;jQ=1;var n=k5(),e=Zke(),t=Xke(),i="[object Null]",r="[object Undefined]",o=n?n.toStringTag:void 0;function s(a){return a==null?a===void 0?r:i:o&&o in Object(a)?e(a):t(a)}return G8=s,G8}var W8,NQ;function Of(){if(NQ)return W8;NQ=1;var n=Array.isArray;return W8=n,W8}var Q8,GQ;function A0(){if(GQ)return Q8;GQ=1;function n(e){return e!=null&&typeof e=="object"}return Q8=n,Q8}var q8,WQ;function Jke(){if(WQ)return q8;WQ=1;var n=oC(),e=Of(),t=A0(),i="[object String]";function r(o){return typeof o=="string"||!e(o)&&t(o)&&n(o)==i}return q8=r,q8}var Y8,QQ;function eTe(){if(QQ)return Y8;QQ=1;function n(e){return function(t,i,r){for(var o=-1,s=Object(t),a=r(t),c=a.length;c--;){var h=a[e?c:++o];if(i(s[h],h,s)===!1)break}return t}}return Y8=n,Y8}var $8,qQ;function mse(){if(qQ)return $8;qQ=1;var n=eTe(),e=n();return $8=e,$8}var V8,YQ;function tTe(){if(YQ)return V8;YQ=1;function n(e,t){for(var i=-1,r=Array(e);++i<e;)r[i]=t(i);return r}return V8=n,V8}var H8,$Q;function nTe(){if($Q)return H8;$Q=1;var n=oC(),e=A0(),t="[object Arguments]";function i(r){return e(r)&&n(r)==t}return H8=i,H8}var Z8,VQ;function lL(){if(VQ)return Z8;VQ=1;var n=nTe(),e=A0(),t=Object.prototype,i=t.hasOwnProperty,r=t.propertyIsEnumerable,o=n((function(){return arguments})())?n:function(s){return e(s)&&i.call(s,"callee")&&!r.call(s,"callee")};return Z8=o,Z8}var J2={exports:{}},X8,HQ;function iTe(){if(HQ)return X8;HQ=1;function n(){return!1}return X8=n,X8}J2.exports;var ZQ;function F6(){return ZQ||(ZQ=1,(function(n,e){var t=Um(),i=iTe(),r=e&&!e.nodeType&&e,o=r&&!0&&n&&!n.nodeType&&n,s=o&&o.exports===r,a=s?t.Buffer:void 0,c=a?a.isBuffer:void 0,h=c||i;n.exports=h})(J2,J2.exports)),J2.exports}var J8,XQ;function uL(){if(XQ)return J8;XQ=1;var n=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function t(i,r){var o=typeof i;return r=r??n,!!r&&(o=="number"||o!="symbol"&&e.test(i))&&i>-1&&i%1==0&&i<r}return J8=t,J8}var e7,JQ;function cL(){if(JQ)return e7;JQ=1;var n=9007199254740991;function e(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=n}return e7=e,e7}var t7,eq;function rTe(){if(eq)return t7;eq=1;var n=oC(),e=cL(),t=A0(),i="[object Arguments]",r="[object Array]",o="[object Boolean]",s="[object Date]",a="[object Error]",c="[object Function]",h="[object Map]",m="[object Number]",y="[object Object]",M="[object RegExp]",x="[object Set]",T="[object String]",P="[object WeakMap]",F="[object ArrayBuffer]",j="[object DataView]",q="[object Float32Array]",V="[object Float64Array]",H="[object Int8Array]",Q="[object Int16Array]",Y="[object Int32Array]",z="[object Uint8Array]",se="[object Uint8ClampedArray]",le="[object Uint16Array]",pe="[object Uint32Array]",de={};de[q]=de[V]=de[H]=de[Q]=de[Y]=de[z]=de[se]=de[le]=de[pe]=!0,de[i]=de[r]=de[F]=de[o]=de[j]=de[s]=de[a]=de[c]=de[h]=de[m]=de[y]=de[M]=de[x]=de[T]=de[P]=!1;function ve(Ee){return t(Ee)&&e(Ee.length)&&!!de[n(Ee)]}return t7=ve,t7}var n7,tq;function AL(){if(tq)return n7;tq=1;function n(e){return function(t){return e(t)}}return n7=n,n7}var e3={exports:{}};e3.exports;var nq;function hL(){return nq||(nq=1,(function(n,e){var t=pse(),i=e&&!e.nodeType&&e,r=i&&!0&&n&&!n.nodeType&&n,o=r&&r.exports===i,s=o&&t.process,a=(function(){try{var c=r&&r.require&&r.require("util").types;return c||s&&s.binding&&s.binding("util")}catch{}})();n.exports=a})(e3,e3.exports)),e3.exports}var i7,iq;function dL(){if(iq)return i7;iq=1;var n=rTe(),e=AL(),t=hL(),i=t&&t.isTypedArray,r=i?e(i):n;return i7=r,i7}var r7,rq;function gse(){if(rq)return r7;rq=1;var n=tTe(),e=lL(),t=Of(),i=F6(),r=uL(),o=dL(),s=Object.prototype,a=s.hasOwnProperty;function c(h,m){var y=t(h),M=!y&&e(h),x=!y&&!M&&i(h),T=!y&&!M&&!x&&o(h),P=y||M||x||T,F=P?n(h.length,String):[],j=F.length;for(var q in h)(m||a.call(h,q))&&!(P&&(q=="length"||x&&(q=="offset"||q=="parent")||T&&(q=="buffer"||q=="byteLength"||q=="byteOffset")||r(q,j)))&&F.push(q);return F}return r7=c,r7}var o7,oq;function fL(){if(oq)return o7;oq=1;var n=Object.prototype;function e(t){var i=t&&t.constructor,r=typeof i=="function"&&i.prototype||n;return t===r}return o7=e,o7}var s7,sq;function yse(){if(sq)return s7;sq=1;function n(e,t){return function(i){return e(t(i))}}return s7=n,s7}var a7,aq;function oTe(){if(aq)return a7;aq=1;var n=yse(),e=n(Object.keys,Object);return a7=e,a7}var l7,lq;function sTe(){if(lq)return l7;lq=1;var n=fL(),e=oTe(),t=Object.prototype,i=t.hasOwnProperty;function r(o){if(!n(o))return e(o);var s=[];for(var a in Object(o))i.call(o,a)&&a!="constructor"&&s.push(a);return s}return l7=r,l7}var u7,uq;function wp(){if(uq)return u7;uq=1;function n(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}return u7=n,u7}var c7,cq;function pL(){if(cq)return c7;cq=1;var n=oC(),e=wp(),t="[object AsyncFunction]",i="[object Function]",r="[object GeneratorFunction]",o="[object Proxy]";function s(a){if(!e(a))return!1;var c=n(a);return c==i||c==r||c==t||c==o}return c7=s,c7}var A7,Aq;function Hx(){if(Aq)return A7;Aq=1;var n=pL(),e=cL();function t(i){return i!=null&&e(i.length)&&!n(i)}return A7=t,A7}var h7,hq;function T5(){if(hq)return h7;hq=1;var n=gse(),e=sTe(),t=Hx();function i(r){return t(r)?n(r):e(r)}return h7=i,h7}var d7,dq;function vse(){if(dq)return d7;dq=1;var n=mse(),e=T5();function t(i,r){return i&&n(i,r,e)}return d7=t,d7}var f7,fq;function z6(){if(fq)return f7;fq=1;function n(e){return e}return f7=n,f7}var p7,pq;function bse(){if(pq)return p7;pq=1;var n=z6();function e(t){return typeof t=="function"?t:n}return p7=e,p7}var m7,mq;function mL(){if(mq)return m7;mq=1;var n=vse(),e=bse();function t(i,r){return i&&n(i,e(r))}return m7=t,m7}var g7,gq;function gL(){if(gq)return g7;gq=1;var n=yse(),e=n(Object.getPrototypeOf,Object);return g7=e,g7}var y7,yq;function Cse(){if(yq)return y7;yq=1;var n=oC(),e=gL(),t=A0(),i="[object Object]",r=Function.prototype,o=Object.prototype,s=r.toString,a=o.hasOwnProperty,c=s.call(Object);function h(m){if(!t(m)||n(m)!=i)return!1;var y=e(m);if(y===null)return!0;var M=a.call(y,"constructor")&&y.constructor;return typeof M=="function"&&M instanceof M&&s.call(M)==c}return y7=h,y7}var v7,vq;function _se(){if(vq)return v7;vq=1;function n(e,t){for(var i=-1,r=e==null?0:e.length,o=Array(r);++i<r;)o[i]=t(e[i],i,e);return o}return v7=n,v7}var b7,bq;function aTe(){if(bq)return b7;bq=1;function n(){this.__data__=[],this.size=0}return b7=n,b7}var C7,Cq;function R5(){if(Cq)return C7;Cq=1;function n(e,t){return e===t||e!==e&&t!==t}return C7=n,C7}var _7,_q;function j6(){if(_q)return _7;_q=1;var n=R5();function e(t,i){for(var r=t.length;r--;)if(n(t[r][0],i))return r;return-1}return _7=e,_7}var x7,xq;function lTe(){if(xq)return x7;xq=1;var n=j6(),e=Array.prototype,t=e.splice;function i(r){var o=this.__data__,s=n(o,r);if(s<0)return!1;var a=o.length-1;return s==a?o.pop():t.call(o,s,1),--this.size,!0}return x7=i,x7}var M7,Mq;function uTe(){if(Mq)return M7;Mq=1;var n=j6();function e(t){var i=this.__data__,r=n(i,t);return r<0?void 0:i[r][1]}return M7=e,M7}var w7,wq;function cTe(){if(wq)return w7;wq=1;var n=j6();function e(t){return n(this.__data__,t)>-1}return w7=e,w7}var S7,Sq;function ATe(){if(Sq)return S7;Sq=1;var n=j6();function e(t,i){var r=this.__data__,o=n(r,t);return o<0?(++this.size,r.push([t,i])):r[o][1]=i,this}return S7=e,S7}var E7,Eq;function N6(){if(Eq)return E7;Eq=1;var n=aTe(),e=lTe(),t=uTe(),i=cTe(),r=ATe();function o(s){var a=-1,c=s==null?0:s.length;for(this.clear();++a<c;){var h=s[a];this.set(h[0],h[1])}}return o.prototype.clear=n,o.prototype.delete=e,o.prototype.get=t,o.prototype.has=i,o.prototype.set=r,E7=o,E7}var O7,Oq;function hTe(){if(Oq)return O7;Oq=1;var n=N6();function e(){this.__data__=new n,this.size=0}return O7=e,O7}var B7,Bq;function dTe(){if(Bq)return B7;Bq=1;function n(e){var t=this.__data__,i=t.delete(e);return this.size=t.size,i}return B7=n,B7}var I7,Iq;function fTe(){if(Iq)return I7;Iq=1;function n(e){return this.__data__.get(e)}return I7=n,I7}var k7,kq;function pTe(){if(kq)return k7;kq=1;function n(e){return this.__data__.has(e)}return k7=n,k7}var T7,Tq;function mTe(){if(Tq)return T7;Tq=1;var n=Um(),e=n["__core-js_shared__"];return T7=e,T7}var R7,Rq;function gTe(){if(Rq)return R7;Rq=1;var n=mTe(),e=(function(){var i=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""})();function t(i){return!!e&&e in i}return R7=t,R7}var D7,Dq;function xse(){if(Dq)return D7;Dq=1;var n=Function.prototype,e=n.toString;function t(i){if(i!=null){try{return e.call(i)}catch{}try{return i+""}catch{}}return""}return D7=t,D7}var P7,Pq;function yTe(){if(Pq)return P7;Pq=1;var n=pL(),e=gTe(),t=wp(),i=xse(),r=/[\\^$.*+?()[\]{}|]/g,o=/^\[object .+?Constructor\]$/,s=Function.prototype,a=Object.prototype,c=s.toString,h=a.hasOwnProperty,m=RegExp("^"+c.call(h).replace(r,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function y(M){if(!t(M)||e(M))return!1;var x=n(M)?m:o;return x.test(i(M))}return P7=y,P7}var U7,Uq;function vTe(){if(Uq)return U7;Uq=1;function n(e,t){return e?.[t]}return U7=n,U7}var K7,Kq;function sC(){if(Kq)return K7;Kq=1;var n=yTe(),e=vTe();function t(i,r){var o=e(i,r);return n(o)?o:void 0}return K7=t,K7}var L7,Lq;function yL(){if(Lq)return L7;Lq=1;var n=sC(),e=Um(),t=n(e,"Map");return L7=t,L7}var F7,Fq;function G6(){if(Fq)return F7;Fq=1;var n=sC(),e=n(Object,"create");return F7=e,F7}var z7,zq;function bTe(){if(zq)return z7;zq=1;var n=G6();function e(){this.__data__=n?n(null):{},this.size=0}return z7=e,z7}var j7,jq;function CTe(){if(jq)return j7;jq=1;function n(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}return j7=n,j7}var N7,Nq;function _Te(){if(Nq)return N7;Nq=1;var n=G6(),e="__lodash_hash_undefined__",t=Object.prototype,i=t.hasOwnProperty;function r(o){var s=this.__data__;if(n){var a=s[o];return a===e?void 0:a}return i.call(s,o)?s[o]:void 0}return N7=r,N7}var G7,Gq;function xTe(){if(Gq)return G7;Gq=1;var n=G6(),e=Object.prototype,t=e.hasOwnProperty;function i(r){var o=this.__data__;return n?o[r]!==void 0:t.call(o,r)}return G7=i,G7}var W7,Wq;function MTe(){if(Wq)return W7;Wq=1;var n=G6(),e="__lodash_hash_undefined__";function t(i,r){var o=this.__data__;return this.size+=this.has(i)?0:1,o[i]=n&&r===void 0?e:r,this}return W7=t,W7}var Q7,Qq;function wTe(){if(Qq)return Q7;Qq=1;var n=bTe(),e=CTe(),t=_Te(),i=xTe(),r=MTe();function o(s){var a=-1,c=s==null?0:s.length;for(this.clear();++a<c;){var h=s[a];this.set(h[0],h[1])}}return o.prototype.clear=n,o.prototype.delete=e,o.prototype.get=t,o.prototype.has=i,o.prototype.set=r,Q7=o,Q7}var q7,qq;function STe(){if(qq)return q7;qq=1;var n=wTe(),e=N6(),t=yL();function i(){this.size=0,this.__data__={hash:new n,map:new(t||e),string:new n}}return q7=i,q7}var Y7,Yq;function ETe(){if(Yq)return Y7;Yq=1;function n(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}return Y7=n,Y7}var $7,$q;function W6(){if($q)return $7;$q=1;var n=ETe();function e(t,i){var r=t.__data__;return n(i)?r[typeof i=="string"?"string":"hash"]:r.map}return $7=e,$7}var V7,Vq;function OTe(){if(Vq)return V7;Vq=1;var n=W6();function e(t){var i=n(this,t).delete(t);return this.size-=i?1:0,i}return V7=e,V7}var H7,Hq;function BTe(){if(Hq)return H7;Hq=1;var n=W6();function e(t){return n(this,t).get(t)}return H7=e,H7}var Z7,Zq;function ITe(){if(Zq)return Z7;Zq=1;var n=W6();function e(t){return n(this,t).has(t)}return Z7=e,Z7}var X7,Xq;function kTe(){if(Xq)return X7;Xq=1;var n=W6();function e(t,i){var r=n(this,t),o=r.size;return r.set(t,i),this.size+=r.size==o?0:1,this}return X7=e,X7}var J7,Jq;function vL(){if(Jq)return J7;Jq=1;var n=STe(),e=OTe(),t=BTe(),i=ITe(),r=kTe();function o(s){var a=-1,c=s==null?0:s.length;for(this.clear();++a<c;){var h=s[a];this.set(h[0],h[1])}}return o.prototype.clear=n,o.prototype.delete=e,o.prototype.get=t,o.prototype.has=i,o.prototype.set=r,J7=o,J7}var eI,eY;function TTe(){if(eY)return eI;eY=1;var n=N6(),e=yL(),t=vL(),i=200;function r(o,s){var a=this.__data__;if(a instanceof n){var c=a.__data__;if(!e||c.length<i-1)return c.push([o,s]),this.size=++a.size,this;a=this.__data__=new t(c)}return a.set(o,s),this.size=a.size,this}return eI=r,eI}var tI,tY;function Q6(){if(tY)return tI;tY=1;var n=N6(),e=hTe(),t=dTe(),i=fTe(),r=pTe(),o=TTe();function s(a){var c=this.__data__=new n(a);this.size=c.size}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=i,s.prototype.has=r,s.prototype.set=o,tI=s,tI}var nI,nY;function RTe(){if(nY)return nI;nY=1;var n="__lodash_hash_undefined__";function e(t){return this.__data__.set(t,n),this}return nI=e,nI}var iI,iY;function DTe(){if(iY)return iI;iY=1;function n(e){return this.__data__.has(e)}return iI=n,iI}var rI,rY;function PTe(){if(rY)return rI;rY=1;var n=vL(),e=RTe(),t=DTe();function i(r){var o=-1,s=r==null?0:r.length;for(this.__data__=new n;++o<s;)this.add(r[o])}return i.prototype.add=i.prototype.push=e,i.prototype.has=t,rI=i,rI}var oI,oY;function UTe(){if(oY)return oI;oY=1;function n(e,t){for(var i=-1,r=e==null?0:e.length;++i<r;)if(t(e[i],i,e))return!0;return!1}return oI=n,oI}var sI,sY;function KTe(){if(sY)return sI;sY=1;function n(e,t){return e.has(t)}return sI=n,sI}var aI,aY;function Mse(){if(aY)return aI;aY=1;var n=PTe(),e=UTe(),t=KTe(),i=1,r=2;function o(s,a,c,h,m,y){var M=c&i,x=s.length,T=a.length;if(x!=T&&!(M&&T>x))return!1;var P=y.get(s),F=y.get(a);if(P&&F)return P==a&&F==s;var j=-1,q=!0,V=c&r?new n:void 0;for(y.set(s,a),y.set(a,s);++j<x;){var H=s[j],Q=a[j];if(h)var Y=M?h(Q,H,j,a,s,y):h(H,Q,j,s,a,y);if(Y!==void 0){if(Y)continue;q=!1;break}if(V){if(!e(a,function(z,se){if(!t(V,se)&&(H===z||m(H,z,c,h,y)))return V.push(se)})){q=!1;break}}else if(!(H===Q||m(H,Q,c,h,y))){q=!1;break}}return y.delete(s),y.delete(a),q}return aI=o,aI}var lI,lY;function wse(){if(lY)return lI;lY=1;var n=Um(),e=n.Uint8Array;return lI=e,lI}var uI,uY;function LTe(){if(uY)return uI;uY=1;function n(e){var t=-1,i=Array(e.size);return e.forEach(function(r,o){i[++t]=[o,r]}),i}return uI=n,uI}var cI,cY;function FTe(){if(cY)return cI;cY=1;function n(e){var t=-1,i=Array(e.size);return e.forEach(function(r){i[++t]=r}),i}return cI=n,cI}var AI,AY;function zTe(){if(AY)return AI;AY=1;var n=k5(),e=wse(),t=R5(),i=Mse(),r=LTe(),o=FTe(),s=1,a=2,c="[object Boolean]",h="[object Date]",m="[object Error]",y="[object Map]",M="[object Number]",x="[object RegExp]",T="[object Set]",P="[object String]",F="[object Symbol]",j="[object ArrayBuffer]",q="[object DataView]",V=n?n.prototype:void 0,H=V?V.valueOf:void 0;function Q(Y,z,se,le,pe,de,ve){switch(se){case q:if(Y.byteLength!=z.byteLength||Y.byteOffset!=z.byteOffset)return!1;Y=Y.buffer,z=z.buffer;case j:return!(Y.byteLength!=z.byteLength||!de(new e(Y),new e(z)));case c:case h:case M:return t(+Y,+z);case m:return Y.name==z.name&&Y.message==z.message;case x:case P:return Y==z+"";case y:var Ee=r;case T:var Re=le&s;if(Ee||(Ee=o),Y.size!=z.size&&!Re)return!1;var je=ve.get(Y);if(je)return je==z;le|=a,ve.set(Y,z);var Ie=i(Ee(Y),Ee(z),le,pe,de,ve);return ve.delete(Y),Ie;case F:if(H)return H.call(Y)==H.call(z)}return!1}return AI=Q,AI}var hI,hY;function Sse(){if(hY)return hI;hY=1;function n(e,t){for(var i=-1,r=t.length,o=e.length;++i<r;)e[o+i]=t[i];return e}return hI=n,hI}var dI,dY;function Ese(){if(dY)return dI;dY=1;var n=Sse(),e=Of();function t(i,r,o){var s=r(i);return e(i)?s:n(s,o(i))}return dI=t,dI}var fI,fY;function jTe(){if(fY)return fI;fY=1;function n(e,t){for(var i=-1,r=e==null?0:e.length,o=0,s=[];++i<r;){var a=e[i];t(a,i,e)&&(s[o++]=a)}return s}return fI=n,fI}var pI,pY;function Ose(){if(pY)return pI;pY=1;function n(){return[]}return pI=n,pI}var mI,mY;function bL(){if(mY)return mI;mY=1;var n=jTe(),e=Ose(),t=Object.prototype,i=t.propertyIsEnumerable,r=Object.getOwnPropertySymbols,o=r?function(s){return s==null?[]:(s=Object(s),n(r(s),function(a){return i.call(s,a)}))}:e;return mI=o,mI}var gI,gY;function Bse(){if(gY)return gI;gY=1;var n=Ese(),e=bL(),t=T5();function i(r){return n(r,t,e)}return gI=i,gI}var yI,yY;function NTe(){if(yY)return yI;yY=1;var n=Bse(),e=1,t=Object.prototype,i=t.hasOwnProperty;function r(o,s,a,c,h,m){var y=a&e,M=n(o),x=M.length,T=n(s),P=T.length;if(x!=P&&!y)return!1;for(var F=x;F--;){var j=M[F];if(!(y?j in s:i.call(s,j)))return!1}var q=m.get(o),V=m.get(s);if(q&&V)return q==s&&V==o;var H=!0;m.set(o,s),m.set(s,o);for(var Q=y;++F<x;){j=M[F];var Y=o[j],z=s[j];if(c)var se=y?c(z,Y,j,s,o,m):c(Y,z,j,o,s,m);if(!(se===void 0?Y===z||h(Y,z,a,c,m):se)){H=!1;break}Q||(Q=j=="constructor")}if(H&&!Q){var le=o.constructor,pe=s.constructor;le!=pe&&"constructor"in o&&"constructor"in s&&!(typeof le=="function"&&le instanceof le&&typeof pe=="function"&&pe instanceof pe)&&(H=!1)}return m.delete(o),m.delete(s),H}return yI=r,yI}var vI,vY;function GTe(){if(vY)return vI;vY=1;var n=sC(),e=Um(),t=n(e,"DataView");return vI=t,vI}var bI,bY;function WTe(){if(bY)return bI;bY=1;var n=sC(),e=Um(),t=n(e,"Promise");return bI=t,bI}var CI,CY;function QTe(){if(CY)return CI;CY=1;var n=sC(),e=Um(),t=n(e,"Set");return CI=t,CI}var _I,_Y;function qTe(){if(_Y)return _I;_Y=1;var n=sC(),e=Um(),t=n(e,"WeakMap");return _I=t,_I}var xI,xY;function q6(){if(xY)return xI;xY=1;var n=GTe(),e=yL(),t=WTe(),i=QTe(),r=qTe(),o=oC(),s=xse(),a="[object Map]",c="[object Object]",h="[object Promise]",m="[object Set]",y="[object WeakMap]",M="[object DataView]",x=s(n),T=s(e),P=s(t),F=s(i),j=s(r),q=o;return(n&&q(new n(new ArrayBuffer(1)))!=M||e&&q(new e)!=a||t&&q(t.resolve())!=h||i&&q(new i)!=m||r&&q(new r)!=y)&&(q=function(V){var H=o(V),Q=H==c?V.constructor:void 0,Y=Q?s(Q):"";if(Y)switch(Y){case x:return M;case T:return a;case P:return h;case F:return m;case j:return y}return H}),xI=q,xI}var MI,MY;function YTe(){if(MY)return MI;MY=1;var n=Q6(),e=Mse(),t=zTe(),i=NTe(),r=q6(),o=Of(),s=F6(),a=dL(),c=1,h="[object Arguments]",m="[object Array]",y="[object Object]",M=Object.prototype,x=M.hasOwnProperty;function T(P,F,j,q,V,H){var Q=o(P),Y=o(F),z=Q?m:r(P),se=Y?m:r(F);z=z==h?y:z,se=se==h?y:se;var le=z==y,pe=se==y,de=z==se;if(de&&s(P)){if(!s(F))return!1;Q=!0,le=!1}if(de&&!le)return H||(H=new n),Q||a(P)?e(P,F,j,q,V,H):t(P,F,z,j,q,V,H);if(!(j&c)){var ve=le&&x.call(P,"__wrapped__"),Ee=pe&&x.call(F,"__wrapped__");if(ve||Ee){var Re=ve?P.value():P,je=Ee?F.value():F;return H||(H=new n),V(Re,je,j,q,H)}}return de?(H||(H=new n),i(P,F,j,q,V,H)):!1}return MI=T,MI}var wI,wY;function Ise(){if(wY)return wI;wY=1;var n=YTe(),e=A0();function t(i,r,o,s,a){return i===r?!0:i==null||r==null||!e(i)&&!e(r)?i!==i&&r!==r:n(i,r,o,s,t,a)}return wI=t,wI}var SI,SY;function $Te(){if(SY)return SI;SY=1;var n=Q6(),e=Ise(),t=1,i=2;function r(o,s,a,c){var h=a.length,m=h,y=!c;if(o==null)return!m;for(o=Object(o);h--;){var M=a[h];if(y&&M[2]?M[1]!==o[M[0]]:!(M[0]in o))return!1}for(;++h<m;){M=a[h];var x=M[0],T=o[x],P=M[1];if(y&&M[2]){if(T===void 0&&!(x in o))return!1}else{var F=new n;if(c)var j=c(T,P,x,o,s,F);if(!(j===void 0?e(P,T,t|i,c,F):j))return!1}}return!0}return SI=r,SI}var EI,EY;function kse(){if(EY)return EI;EY=1;var n=wp();function e(t){return t===t&&!n(t)}return EI=e,EI}var OI,OY;function VTe(){if(OY)return OI;OY=1;var n=kse(),e=T5();function t(i){for(var r=e(i),o=r.length;o--;){var s=r[o],a=i[s];r[o]=[s,a,n(a)]}return r}return OI=t,OI}var BI,BY;function Tse(){if(BY)return BI;BY=1;function n(e,t){return function(i){return i==null?!1:i[e]===t&&(t!==void 0||e in Object(i))}}return BI=n,BI}var II,IY;function HTe(){if(IY)return II;IY=1;var n=$Te(),e=VTe(),t=Tse();function i(r){var o=e(r);return o.length==1&&o[0][2]?t(o[0][0],o[0][1]):function(s){return s===r||n(s,r,o)}}return II=i,II}var kI,kY;function Y6(){if(kY)return kI;kY=1;var n=oC(),e=A0(),t="[object Symbol]";function i(r){return typeof r=="symbol"||e(r)&&n(r)==t}return kI=i,kI}var TI,TY;function CL(){if(TY)return TI;TY=1;var n=Of(),e=Y6(),t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;function r(o,s){if(n(o))return!1;var a=typeof o;return a=="number"||a=="symbol"||a=="boolean"||o==null||e(o)?!0:i.test(o)||!t.test(o)||s!=null&&o in Object(s)}return TI=r,TI}var RI,RY;function ZTe(){if(RY)return RI;RY=1;var n=vL(),e="Expected a function";function t(i,r){if(typeof i!="function"||r!=null&&typeof r!="function")throw new TypeError(e);var o=function(){var s=arguments,a=r?r.apply(this,s):s[0],c=o.cache;if(c.has(a))return c.get(a);var h=i.apply(this,s);return o.cache=c.set(a,h)||c,h};return o.cache=new(t.Cache||n),o}return t.Cache=n,RI=t,RI}var DI,DY;function XTe(){if(DY)return DI;DY=1;var n=ZTe(),e=500;function t(i){var r=n(i,function(s){return o.size===e&&o.clear(),s}),o=r.cache;return r}return DI=t,DI}var PI,PY;function JTe(){if(PY)return PI;PY=1;var n=XTe(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,t=/\\(\\)?/g,i=n(function(r){var o=[];return r.charCodeAt(0)===46&&o.push(""),r.replace(e,function(s,a,c,h){o.push(c?h.replace(t,"$1"):a||s)}),o});return PI=i,PI}var UI,UY;function e9e(){if(UY)return UI;UY=1;var n=k5(),e=_se(),t=Of(),i=Y6(),r=n?n.prototype:void 0,o=r?r.toString:void 0;function s(a){if(typeof a=="string")return a;if(t(a))return e(a,s)+"";if(i(a))return o?o.call(a):"";var c=a+"";return c=="0"&&1/a==-1/0?"-0":c}return UI=s,UI}var KI,KY;function t9e(){if(KY)return KI;KY=1;var n=e9e();function e(t){return t==null?"":n(t)}return KI=e,KI}var LI,LY;function Rse(){if(LY)return LI;LY=1;var n=Of(),e=CL(),t=JTe(),i=t9e();function r(o,s){return n(o)?o:e(o,s)?[o]:t(i(o))}return LI=r,LI}var FI,FY;function $6(){if(FY)return FI;FY=1;var n=Y6();function e(t){if(typeof t=="string"||n(t))return t;var i=t+"";return i=="0"&&1/t==-1/0?"-0":i}return FI=e,FI}var zI,zY;function Dse(){if(zY)return zI;zY=1;var n=Rse(),e=$6();function t(i,r){r=n(r,i);for(var o=0,s=r.length;i!=null&&o<s;)i=i[e(r[o++])];return o&&o==s?i:void 0}return zI=t,zI}var jI,jY;function n9e(){if(jY)return jI;jY=1;var n=Dse();function e(t,i,r){var o=t==null?void 0:n(t,i);return o===void 0?r:o}return jI=e,jI}var NI,NY;function i9e(){if(NY)return NI;NY=1;function n(e,t){return e!=null&&t in Object(e)}return NI=n,NI}var GI,GY;function r9e(){if(GY)return GI;GY=1;var n=Rse(),e=lL(),t=Of(),i=uL(),r=cL(),o=$6();function s(a,c,h){c=n(c,a);for(var m=-1,y=c.length,M=!1;++m<y;){var x=o(c[m]);if(!(M=a!=null&&h(a,x)))break;a=a[x]}return M||++m!=y?M:(y=a==null?0:a.length,!!y&&r(y)&&i(x,y)&&(t(a)||e(a)))}return GI=s,GI}var WI,WY;function o9e(){if(WY)return WI;WY=1;var n=i9e(),e=r9e();function t(i,r){return i!=null&&e(i,r,n)}return WI=t,WI}var QI,QY;function s9e(){if(QY)return QI;QY=1;var n=Ise(),e=n9e(),t=o9e(),i=CL(),r=kse(),o=Tse(),s=$6(),a=1,c=2;function h(m,y){return i(m)&&r(y)?o(s(m),y):function(M){var x=e(M,m);return x===void 0&&x===y?t(M,m):n(y,x,a|c)}}return QI=h,QI}var qI,qY;function a9e(){if(qY)return qI;qY=1;function n(e){return function(t){return t?.[e]}}return qI=n,qI}var YI,YY;function l9e(){if(YY)return YI;YY=1;var n=Dse();function e(t){return function(i){return n(i,t)}}return YI=e,YI}var $I,$Y;function u9e(){if($Y)return $I;$Y=1;var n=a9e(),e=l9e(),t=CL(),i=$6();function r(o){return t(o)?n(i(o)):e(o)}return $I=r,$I}var VI,VY;function c9e(){if(VY)return VI;VY=1;var n=HTe(),e=s9e(),t=z6(),i=Of(),r=u9e();function o(s){return typeof s=="function"?s:s==null?t:typeof s=="object"?i(s)?e(s[0],s[1]):n(s):r(s)}return VI=o,VI}var HI,HY;function A9e(){if(HY)return HI;HY=1;var n=Hx();function e(t,i){return function(r,o){if(r==null)return r;if(!n(r))return t(r,o);for(var s=r.length,a=i?s:-1,c=Object(r);(i?a--:++a<s)&&o(c[a],a,c)!==!1;);return r}}return HI=e,HI}var ZI,ZY;function Pse(){if(ZY)return ZI;ZY=1;var n=vse(),e=A9e(),t=e(n);return ZI=t,ZI}var XI,XY;function h9e(){if(XY)return XI;XY=1;var n=Pse(),e=Hx();function t(i,r){var o=-1,s=e(i)?Array(i.length):[];return n(i,function(a,c,h){s[++o]=r(a,c,h)}),s}return XI=t,XI}var JI,JY;function d9e(){if(JY)return JI;JY=1;var n=_se(),e=c9e(),t=h9e(),i=Of();function r(o,s){var a=i(o)?n:t;return a(o,e(s,3))}return JI=r,JI}var e$;function f9e(){if(e$)return VC;e$=1,Object.defineProperty(VC,"__esModule",{value:!0}),VC.flattenNames=void 0;var n=Jke(),e=c(n),t=mL(),i=c(t),r=Cse(),o=c(r),s=d9e(),a=c(s);function c(m){return m&&m.__esModule?m:{default:m}}var h=VC.flattenNames=function m(){var y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],M=[];return(0,a.default)(y,function(x){Array.isArray(x)?m(x).map(function(T){return M.push(T)}):(0,o.default)(x)?(0,i.default)(x,function(T,P){T===!0&&M.push(P),M.push(P+"-"+T)}):(0,e.default)(x)&&M.push(x)}),M};return VC.default=h,VC}var HC={},ek,t$;function Use(){if(t$)return ek;t$=1;function n(e,t){for(var i=-1,r=e==null?0:e.length;++i<r&&t(e[i],i,e)!==!1;);return e}return ek=n,ek}var tk,n$;function Kse(){if(n$)return tk;n$=1;var n=sC(),e=(function(){try{var t=n(Object,"defineProperty");return t({},"",{}),t}catch{}})();return tk=e,tk}var nk,i$;function _L(){if(i$)return nk;i$=1;var n=Kse();function e(t,i,r){i=="__proto__"&&n?n(t,i,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[i]=r}return nk=e,nk}var ik,r$;function Lse(){if(r$)return ik;r$=1;var n=_L(),e=R5(),t=Object.prototype,i=t.hasOwnProperty;function r(o,s,a){var c=o[s];(!(i.call(o,s)&&e(c,a))||a===void 0&&!(s in o))&&n(o,s,a)}return ik=r,ik}var rk,o$;function D5(){if(o$)return rk;o$=1;var n=Lse(),e=_L();function t(i,r,o,s){var a=!o;o||(o={});for(var c=-1,h=r.length;++c<h;){var m=r[c],y=s?s(o[m],i[m],m,o,i):void 0;y===void 0&&(y=i[m]),a?e(o,m,y):n(o,m,y)}return o}return rk=t,rk}var ok,s$;function p9e(){if(s$)return ok;s$=1;var n=D5(),e=T5();function t(i,r){return i&&n(r,e(r),i)}return ok=t,ok}var sk,a$;function m9e(){if(a$)return sk;a$=1;function n(e){var t=[];if(e!=null)for(var i in Object(e))t.push(i);return t}return sk=n,sk}var ak,l$;function g9e(){if(l$)return ak;l$=1;var n=wp(),e=fL(),t=m9e(),i=Object.prototype,r=i.hasOwnProperty;function o(s){if(!n(s))return t(s);var a=e(s),c=[];for(var h in s)h=="constructor"&&(a||!r.call(s,h))||c.push(h);return c}return ak=o,ak}var lk,u$;function P5(){if(u$)return lk;u$=1;var n=gse(),e=g9e(),t=Hx();function i(r){return t(r)?n(r,!0):e(r)}return lk=i,lk}var uk,c$;function y9e(){if(c$)return uk;c$=1;var n=D5(),e=P5();function t(i,r){return i&&n(r,e(r),i)}return uk=t,uk}var t3={exports:{}};t3.exports;var A$;function Fse(){return A$||(A$=1,(function(n,e){var t=Um(),i=e&&!e.nodeType&&e,r=i&&!0&&n&&!n.nodeType&&n,o=r&&r.exports===i,s=o?t.Buffer:void 0,a=s?s.allocUnsafe:void 0;function c(h,m){if(m)return h.slice();var y=h.length,M=a?a(y):new h.constructor(y);return h.copy(M),M}n.exports=c})(t3,t3.exports)),t3.exports}var ck,h$;function zse(){if(h$)return ck;h$=1;function n(e,t){var i=-1,r=e.length;for(t||(t=Array(r));++i<r;)t[i]=e[i];return t}return ck=n,ck}var Ak,d$;function v9e(){if(d$)return Ak;d$=1;var n=D5(),e=bL();function t(i,r){return n(i,e(i),r)}return Ak=t,Ak}var hk,f$;function jse(){if(f$)return hk;f$=1;var n=Sse(),e=gL(),t=bL(),i=Ose(),r=Object.getOwnPropertySymbols,o=r?function(s){for(var a=[];s;)n(a,t(s)),s=e(s);return a}:i;return hk=o,hk}var dk,p$;function b9e(){if(p$)return dk;p$=1;var n=D5(),e=jse();function t(i,r){return n(i,e(i),r)}return dk=t,dk}var fk,m$;function C9e(){if(m$)return fk;m$=1;var n=Ese(),e=jse(),t=P5();function i(r){return n(r,t,e)}return fk=i,fk}var pk,g$;function _9e(){if(g$)return pk;g$=1;var n=Object.prototype,e=n.hasOwnProperty;function t(i){var r=i.length,o=new i.constructor(r);return r&&typeof i[0]=="string"&&e.call(i,"index")&&(o.index=i.index,o.input=i.input),o}return pk=t,pk}var mk,y$;function xL(){if(y$)return mk;y$=1;var n=wse();function e(t){var i=new t.constructor(t.byteLength);return new n(i).set(new n(t)),i}return mk=e,mk}var gk,v$;function x9e(){if(v$)return gk;v$=1;var n=xL();function e(t,i){var r=i?n(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}return gk=e,gk}var yk,b$;function M9e(){if(b$)return yk;b$=1;var n=/\w*$/;function e(t){var i=new t.constructor(t.source,n.exec(t));return i.lastIndex=t.lastIndex,i}return yk=e,yk}var vk,C$;function w9e(){if(C$)return vk;C$=1;var n=k5(),e=n?n.prototype:void 0,t=e?e.valueOf:void 0;function i(r){return t?Object(t.call(r)):{}}return vk=i,vk}var bk,_$;function Nse(){if(_$)return bk;_$=1;var n=xL();function e(t,i){var r=i?n(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}return bk=e,bk}var Ck,x$;function S9e(){if(x$)return Ck;x$=1;var n=xL(),e=x9e(),t=M9e(),i=w9e(),r=Nse(),o="[object Boolean]",s="[object Date]",a="[object Map]",c="[object Number]",h="[object RegExp]",m="[object Set]",y="[object String]",M="[object Symbol]",x="[object ArrayBuffer]",T="[object DataView]",P="[object Float32Array]",F="[object Float64Array]",j="[object Int8Array]",q="[object Int16Array]",V="[object Int32Array]",H="[object Uint8Array]",Q="[object Uint8ClampedArray]",Y="[object Uint16Array]",z="[object Uint32Array]";function se(le,pe,de){var ve=le.constructor;switch(pe){case x:return n(le);case o:case s:return new ve(+le);case T:return e(le,de);case P:case F:case j:case q:case V:case H:case Q:case Y:case z:return r(le,de);case a:return new ve;case c:case y:return new ve(le);case h:return t(le);case m:return new ve;case M:return i(le)}}return Ck=se,Ck}var _k,M$;function E9e(){if(M$)return _k;M$=1;var n=wp(),e=Object.create,t=(function(){function i(){}return function(r){if(!n(r))return{};if(e)return e(r);i.prototype=r;var o=new i;return i.prototype=void 0,o}})();return _k=t,_k}var xk,w$;function Gse(){if(w$)return xk;w$=1;var n=E9e(),e=gL(),t=fL();function i(r){return typeof r.constructor=="function"&&!t(r)?n(e(r)):{}}return xk=i,xk}var Mk,S$;function O9e(){if(S$)return Mk;S$=1;var n=q6(),e=A0(),t="[object Map]";function i(r){return e(r)&&n(r)==t}return Mk=i,Mk}var wk,E$;function B9e(){if(E$)return wk;E$=1;var n=O9e(),e=AL(),t=hL(),i=t&&t.isMap,r=i?e(i):n;return wk=r,wk}var Sk,O$;function I9e(){if(O$)return Sk;O$=1;var n=q6(),e=A0(),t="[object Set]";function i(r){return e(r)&&n(r)==t}return Sk=i,Sk}var Ek,B$;function k9e(){if(B$)return Ek;B$=1;var n=I9e(),e=AL(),t=hL(),i=t&&t.isSet,r=i?e(i):n;return Ek=r,Ek}var Ok,I$;function T9e(){if(I$)return Ok;I$=1;var n=Q6(),e=Use(),t=Lse(),i=p9e(),r=y9e(),o=Fse(),s=zse(),a=v9e(),c=b9e(),h=Bse(),m=C9e(),y=q6(),M=_9e(),x=S9e(),T=Gse(),P=Of(),F=F6(),j=B9e(),q=wp(),V=k9e(),H=T5(),Q=P5(),Y=1,z=2,se=4,le="[object Arguments]",pe="[object Array]",de="[object Boolean]",ve="[object Date]",Ee="[object Error]",Re="[object Function]",je="[object GeneratorFunction]",Ie="[object Map]",qe="[object Number]",tt="[object Object]",At="[object RegExp]",ke="[object Set]",we="[object String]",ze="[object Symbol]",Me="[object WeakMap]",lt="[object ArrayBuffer]",nt="[object DataView]",bt="[object Float32Array]",Bt="[object Float64Array]",Ke="[object Int8Array]",Te="[object Int16Array]",Se="[object Int32Array]",We="[object Uint8Array]",at="[object Uint8ClampedArray]",it="[object Uint16Array]",ft="[object Uint32Array]",Dt={};Dt[le]=Dt[pe]=Dt[lt]=Dt[nt]=Dt[de]=Dt[ve]=Dt[bt]=Dt[Bt]=Dt[Ke]=Dt[Te]=Dt[Se]=Dt[Ie]=Dt[qe]=Dt[tt]=Dt[At]=Dt[ke]=Dt[we]=Dt[ze]=Dt[We]=Dt[at]=Dt[it]=Dt[ft]=!0,Dt[Ee]=Dt[Re]=Dt[Me]=!1;function Ot(Jt,Dn,Pn,oi,In,Tn){var dn,$n=Dn&Y,Un=Dn&z,It=Dn&se;if(Pn&&(dn=In?Pn(Jt,oi,In,Tn):Pn(Jt)),dn!==void 0)return dn;if(!q(Jt))return Jt;var _e=P(Jt);if(_e){if(dn=M(Jt),!$n)return s(Jt,dn)}else{var oe=y(Jt),ee=oe==Re||oe==je;if(F(Jt))return o(Jt,$n);if(oe==tt||oe==le||ee&&!In){if(dn=Un||ee?{}:T(Jt),!$n)return Un?c(Jt,r(dn,Jt)):a(Jt,i(dn,Jt))}else{if(!Dt[oe])return In?Jt:{};dn=x(Jt,oe,$n)}}Tn||(Tn=new n);var ne=Tn.get(Jt);if(ne)return ne;Tn.set(Jt,dn),V(Jt)?Jt.forEach(function(Le){dn.add(Ot(Le,Dn,Pn,Le,Jt,Tn))}):j(Jt)&&Jt.forEach(function(Le,Ve){dn.set(Ve,Ot(Le,Dn,Pn,Ve,Jt,Tn))});var ue=It?Un?m:h:Un?Q:H,be=_e?void 0:ue(Jt);return e(be||Jt,function(Le,Ve){be&&(Ve=Le,Le=Jt[Ve]),t(dn,Ve,Ot(Le,Dn,Pn,Ve,Jt,Tn))}),dn}return Ok=Ot,Ok}var Bk,k$;function R9e(){if(k$)return Bk;k$=1;var n=T9e(),e=1,t=4;function i(r){return n(r,e|t)}return Bk=i,Bk}var T$;function D9e(){if(T$)return HC;T$=1,Object.defineProperty(HC,"__esModule",{value:!0}),HC.mergeClasses=void 0;var n=mL(),e=o(n),t=R9e(),i=o(t),r=Object.assign||function(a){for(var c=1;c<arguments.length;c++){var h=arguments[c];for(var m in h)Object.prototype.hasOwnProperty.call(h,m)&&(a[m]=h[m])}return a};function o(a){return a&&a.__esModule?a:{default:a}}var s=HC.mergeClasses=function(c){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],m=c.default&&(0,i.default)(c.default)||{};return h.map(function(y){var M=c[y];return M&&(0,e.default)(M,function(x,T){m[T]||(m[T]={}),m[T]=r({},m[T],M[T])}),y}),m};return HC.default=s,HC}var ZC={},R$;function P9e(){if(R$)return ZC;R$=1,Object.defineProperty(ZC,"__esModule",{value:!0}),ZC.autoprefix=void 0;var n=mL(),e=i(n),t=Object.assign||function(s){for(var a=1;a<arguments.length;a++){var c=arguments[a];for(var h in c)Object.prototype.hasOwnProperty.call(c,h)&&(s[h]=c[h])}return s};function i(s){return s&&s.__esModule?s:{default:s}}var r={borderRadius:function(a){return{msBorderRadius:a,MozBorderRadius:a,OBorderRadius:a,WebkitBorderRadius:a,borderRadius:a}},boxShadow:function(a){return{msBoxShadow:a,MozBoxShadow:a,OBoxShadow:a,WebkitBoxShadow:a,boxShadow:a}},userSelect:function(a){return{WebkitTouchCallout:a,KhtmlUserSelect:a,MozUserSelect:a,msUserSelect:a,WebkitUserSelect:a,userSelect:a}},flex:function(a){return{WebkitBoxFlex:a,MozBoxFlex:a,WebkitFlex:a,msFlex:a,flex:a}},flexBasis:function(a){return{WebkitFlexBasis:a,flexBasis:a}},justifyContent:function(a){return{WebkitJustifyContent:a,justifyContent:a}},transition:function(a){return{msTransition:a,MozTransition:a,OTransition:a,WebkitTransition:a,transition:a}},transform:function(a){return{msTransform:a,MozTransform:a,OTransform:a,WebkitTransform:a,transform:a}},absolute:function(a){var c=a&&a.split(" ");return{position:"absolute",top:c&&c[0],right:c&&c[1],bottom:c&&c[2],left:c&&c[3]}},extend:function(a,c){var h=c[a];return h||{extend:a}}},o=ZC.autoprefix=function(a){var c={};return(0,e.default)(a,function(h,m){var y={};(0,e.default)(h,function(M,x){var T=r[x];T?y=t({},y,T(M)):y[x]=M}),c[m]=y}),c};return ZC.default=o,ZC}var XC={},D$;function U9e(){if(D$)return XC;D$=1,Object.defineProperty(XC,"__esModule",{value:!0}),XC.hover=void 0;var n=Object.assign||function(c){for(var h=1;h<arguments.length;h++){var m=arguments[h];for(var y in m)Object.prototype.hasOwnProperty.call(m,y)&&(c[y]=m[y])}return c},e=Qa(),t=i(e);function i(c){return c&&c.__esModule?c:{default:c}}function r(c,h){if(!(c instanceof h))throw new TypeError("Cannot call a class as a function")}function o(c,h){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:c}function s(c,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);c.prototype=Object.create(h&&h.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(c,h):c.__proto__=h)}var a=XC.hover=function(h){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return(function(y){s(M,y);function M(){var x,T,P,F;r(this,M);for(var j=arguments.length,q=Array(j),V=0;V<j;V++)q[V]=arguments[V];return F=(T=(P=o(this,(x=M.__proto__||Object.getPrototypeOf(M)).call.apply(x,[this].concat(q))),P),P.state={hover:!1},P.handleMouseOver=function(){return P.setState({hover:!0})},P.handleMouseOut=function(){return P.setState({hover:!1})},P.render=function(){return t.default.createElement(m,{onMouseOver:P.handleMouseOver,onMouseOut:P.handleMouseOut},t.default.createElement(h,n({},P.props,P.state)))},T),o(P,F)}return M})(t.default.Component)};return XC.default=a,XC}var JC={},P$;function K9e(){if(P$)return JC;P$=1,Object.defineProperty(JC,"__esModule",{value:!0}),JC.active=void 0;var n=Object.assign||function(c){for(var h=1;h<arguments.length;h++){var m=arguments[h];for(var y in m)Object.prototype.hasOwnProperty.call(m,y)&&(c[y]=m[y])}return c},e=Qa(),t=i(e);function i(c){return c&&c.__esModule?c:{default:c}}function r(c,h){if(!(c instanceof h))throw new TypeError("Cannot call a class as a function")}function o(c,h){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:c}function s(c,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);c.prototype=Object.create(h&&h.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(c,h):c.__proto__=h)}var a=JC.active=function(h){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return(function(y){s(M,y);function M(){var x,T,P,F;r(this,M);for(var j=arguments.length,q=Array(j),V=0;V<j;V++)q[V]=arguments[V];return F=(T=(P=o(this,(x=M.__proto__||Object.getPrototypeOf(M)).call.apply(x,[this].concat(q))),P),P.state={active:!1},P.handleMouseDown=function(){return P.setState({active:!0})},P.handleMouseUp=function(){return P.setState({active:!1})},P.render=function(){return t.default.createElement(m,{onMouseDown:P.handleMouseDown,onMouseUp:P.handleMouseUp},t.default.createElement(h,n({},P.props,P.state)))},T),o(P,F)}return M})(t.default.Component)};return JC.default=a,JC}var YM={},U$;function L9e(){if(U$)return YM;U$=1,Object.defineProperty(YM,"__esModule",{value:!0});var n=function(t,i){var r={},o=function(a){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;r[a]=c};return t===0&&o("first-child"),t===i-1&&o("last-child"),(t===0||t%2===0)&&o("even"),Math.abs(t%2)===1&&o("odd"),o("nth-child",t),r};return YM.default=n,YM}var K$;function Km(){if(K$)return dd;K$=1,Object.defineProperty(dd,"__esModule",{value:!0}),dd.ReactCSS=dd.loop=dd.handleActive=dd.handleHover=dd.hover=void 0;var n=f9e(),e=M(n),t=D9e(),i=M(t),r=P9e(),o=M(r),s=U9e(),a=M(s),c=K9e(),h=M(c),m=L9e(),y=M(m);function M(T){return T&&T.__esModule?T:{default:T}}dd.hover=a.default,dd.handleHover=a.default,dd.handleActive=h.default,dd.loop=y.default;var x=dd.ReactCSS=function(P){for(var F=arguments.length,j=Array(F>1?F-1:0),q=1;q<F;q++)j[q-1]=arguments[q];var V=(0,e.default)(j),H=(0,i.default)(P,V);return(0,o.default)(H)};return dd.default=x,dd}var Ik,L$;function Wse(){if(L$)return Ik;L$=1;var n=_L(),e=R5();function t(i,r,o){(o!==void 0&&!e(i[r],o)||o===void 0&&!(r in i))&&n(i,r,o)}return Ik=t,Ik}var kk,F$;function F9e(){if(F$)return kk;F$=1;var n=Hx(),e=A0();function t(i){return e(i)&&n(i)}return kk=t,kk}var Tk,z$;function Qse(){if(z$)return Tk;z$=1;function n(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}return Tk=n,Tk}var Rk,j$;function z9e(){if(j$)return Rk;j$=1;var n=D5(),e=P5();function t(i){return n(i,e(i))}return Rk=t,Rk}var Dk,N$;function j9e(){if(N$)return Dk;N$=1;var n=Wse(),e=Fse(),t=Nse(),i=zse(),r=Gse(),o=lL(),s=Of(),a=F9e(),c=F6(),h=pL(),m=wp(),y=Cse(),M=dL(),x=Qse(),T=z9e();function P(F,j,q,V,H,Q,Y){var z=x(F,q),se=x(j,q),le=Y.get(se);if(le){n(F,q,le);return}var pe=Q?Q(z,se,q+"",F,j,Y):void 0,de=pe===void 0;if(de){var ve=s(se),Ee=!ve&&c(se),Re=!ve&&!Ee&&M(se);pe=se,ve||Ee||Re?s(z)?pe=z:a(z)?pe=i(z):Ee?(de=!1,pe=e(se,!0)):Re?(de=!1,pe=t(se,!0)):pe=[]:y(se)||o(se)?(pe=z,o(z)?pe=T(z):(!m(z)||h(z))&&(pe=r(se))):de=!1}de&&(Y.set(se,pe),H(pe,se,V,Q,Y),Y.delete(se)),n(F,q,pe)}return Dk=P,Dk}var Pk,G$;function N9e(){if(G$)return Pk;G$=1;var n=Q6(),e=Wse(),t=mse(),i=j9e(),r=wp(),o=P5(),s=Qse();function a(c,h,m,y,M){c!==h&&t(h,function(x,T){if(M||(M=new n),r(x))i(c,h,T,m,a,y,M);else{var P=y?y(s(c,T),x,T+"",c,h,M):void 0;P===void 0&&(P=x),e(c,T,P)}},o)}return Pk=a,Pk}var Uk,W$;function G9e(){if(W$)return Uk;W$=1;function n(e,t,i){switch(i.length){case 0:return e.call(t);case 1:return e.call(t,i[0]);case 2:return e.call(t,i[0],i[1]);case 3:return e.call(t,i[0],i[1],i[2])}return e.apply(t,i)}return Uk=n,Uk}var Kk,Q$;function W9e(){if(Q$)return Kk;Q$=1;var n=G9e(),e=Math.max;function t(i,r,o){return r=e(r===void 0?i.length-1:r,0),function(){for(var s=arguments,a=-1,c=e(s.length-r,0),h=Array(c);++a<c;)h[a]=s[r+a];a=-1;for(var m=Array(r+1);++a<r;)m[a]=s[a];return m[r]=o(h),n(i,this,m)}}return Kk=t,Kk}var Lk,q$;function Q9e(){if(q$)return Lk;q$=1;function n(e){return function(){return e}}return Lk=n,Lk}var Fk,Y$;function q9e(){if(Y$)return Fk;Y$=1;var n=Q9e(),e=Kse(),t=z6(),i=e?function(r,o){return e(r,"toString",{configurable:!0,enumerable:!1,value:n(o),writable:!0})}:t;return Fk=i,Fk}var zk,$$;function Y9e(){if($$)return zk;$$=1;var n=800,e=16,t=Date.now;function i(r){var o=0,s=0;return function(){var a=t(),c=e-(a-s);if(s=a,c>0){if(++o>=n)return arguments[0]}else o=0;return r.apply(void 0,arguments)}}return zk=i,zk}var jk,V$;function $9e(){if(V$)return jk;V$=1;var n=q9e(),e=Y9e(),t=e(n);return jk=t,jk}var Nk,H$;function V9e(){if(H$)return Nk;H$=1;var n=z6(),e=W9e(),t=$9e();function i(r,o){return t(e(r,o,n),r+"")}return Nk=i,Nk}var Gk,Z$;function H9e(){if(Z$)return Gk;Z$=1;var n=R5(),e=Hx(),t=uL(),i=wp();function r(o,s,a){if(!i(a))return!1;var c=typeof s;return(c=="number"?e(a)&&t(s,a.length):c=="string"&&s in a)?n(a[s],o):!1}return Gk=r,Gk}var Wk,X$;function Z9e(){if(X$)return Wk;X$=1;var n=V9e(),e=H9e();function t(i){return n(function(r,o){var s=-1,a=o.length,c=a>1?o[a-1]:void 0,h=a>2?o[2]:void 0;for(c=i.length>3&&typeof c=="function"?(a--,c):void 0,h&&e(o[0],o[1],h)&&(c=a<3?void 0:c,a=1),r=Object(r);++s<a;){var m=o[s];m&&i(r,m,s,c)}return r})}return Wk=t,Wk}var Qk,J$;function qse(){if(J$)return Qk;J$=1;var n=N9e(),e=Z9e(),t=e(function(i,r,o){n(i,r,o)});return Qk=t,Qk}var qk={},e_={},$M={},eV;function X9e(){return eV||(eV=1,Object.defineProperty($M,"__esModule",{value:!0}),$M.calculateChange=function(e,t,i,r,o){var s=o.clientWidth,a=o.clientHeight,c=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,h=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,m=c-(o.getBoundingClientRect().left+window.pageXOffset),y=h-(o.getBoundingClientRect().top+window.pageYOffset);if(i==="vertical"){var M=void 0;if(y<0?M=0:y>a?M=1:M=Math.round(y*100/a)/100,t.a!==M)return{h:t.h,s:t.s,l:t.l,a:M,source:"rgb"}}else{var x=void 0;if(m<0?x=0:m>s?x=1:x=Math.round(m*100/s)/100,r!==x)return{h:t.h,s:t.s,l:t.l,a:x,source:"rgb"}}return null}),$M}var t_={},I2={},tV;function J9e(){if(tV)return I2;tV=1,Object.defineProperty(I2,"__esModule",{value:!0});var n={},e=I2.render=function(i,r,o,s){if(typeof document>"u"&&!s)return null;var a=s?new s:document.createElement("canvas");a.width=o*2,a.height=o*2;var c=a.getContext("2d");return c?(c.fillStyle=i,c.fillRect(0,0,a.width,a.height),c.fillStyle=r,c.fillRect(0,0,o,o),c.translate(o,o),c.fillRect(0,0,o,o),a.toDataURL()):null};return I2.get=function(i,r,o,s){var a=i+"-"+r+"-"+o+(s?"-server":"");if(n[a])return n[a];var c=e(i,r,o,s);return n[a]=c,c},I2}var nV;function ML(){if(nV)return t_;nV=1,Object.defineProperty(t_,"__esModule",{value:!0}),t_.Checkboard=void 0;var n=Object.assign||function(m){for(var y=1;y<arguments.length;y++){var M=arguments[y];for(var x in M)Object.prototype.hasOwnProperty.call(M,x)&&(m[x]=M[x])}return m},e=Qa(),t=c(e),i=Km(),r=c(i),o=J9e(),s=a(o);function a(m){if(m&&m.__esModule)return m;var y={};if(m!=null)for(var M in m)Object.prototype.hasOwnProperty.call(m,M)&&(y[M]=m[M]);return y.default=m,y}function c(m){return m&&m.__esModule?m:{default:m}}var h=t_.Checkboard=function(y){var M=y.white,x=y.grey,T=y.size,P=y.renderers,F=y.borderRadius,j=y.boxShadow,q=y.children,V=(0,r.default)({default:{grid:{borderRadius:F,boxShadow:j,absolute:"0px 0px 0px 0px",background:"url("+s.get(M,x,T,P.canvas)+") center left"}}});return(0,e.isValidElement)(q)?t.default.cloneElement(q,n({},q.props,{style:n({},q.props.style,V.grid)})):t.default.createElement("div",{style:V.grid})};return h.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}},t_.default=h,t_}var iV;function eRe(){if(iV)return e_;iV=1,Object.defineProperty(e_,"__esModule",{value:!0}),e_.Alpha=void 0;var n=Object.assign||function(F){for(var j=1;j<arguments.length;j++){var q=arguments[j];for(var V in q)Object.prototype.hasOwnProperty.call(q,V)&&(F[V]=q[V])}return F},e=(function(){function F(j,q){for(var V=0;V<q.length;V++){var H=q[V];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(j,H.key,H)}}return function(j,q,V){return q&&F(j.prototype,q),V&&F(j,V),j}})(),t=Qa(),i=y(t),r=Km(),o=y(r),s=X9e(),a=m(s),c=ML(),h=y(c);function m(F){if(F&&F.__esModule)return F;var j={};if(F!=null)for(var q in F)Object.prototype.hasOwnProperty.call(F,q)&&(j[q]=F[q]);return j.default=F,j}function y(F){return F&&F.__esModule?F:{default:F}}function M(F,j){if(!(F instanceof j))throw new TypeError("Cannot call a class as a function")}function x(F,j){if(!F)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j&&(typeof j=="object"||typeof j=="function")?j:F}function T(F,j){if(typeof j!="function"&&j!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof j);F.prototype=Object.create(j&&j.prototype,{constructor:{value:F,enumerable:!1,writable:!0,configurable:!0}}),j&&(Object.setPrototypeOf?Object.setPrototypeOf(F,j):F.__proto__=j)}var P=e_.Alpha=(function(F){T(j,F);function j(){var q,V,H,Q;M(this,j);for(var Y=arguments.length,z=Array(Y),se=0;se<Y;se++)z[se]=arguments[se];return Q=(V=(H=x(this,(q=j.__proto__||Object.getPrototypeOf(j)).call.apply(q,[this].concat(z))),H),H.handleChange=function(le){var pe=a.calculateChange(le,H.props.hsl,H.props.direction,H.props.a,H.container);pe&&typeof H.props.onChange=="function"&&H.props.onChange(pe,le)},H.handleMouseDown=function(le){H.handleChange(le),window.addEventListener("mousemove",H.handleChange),window.addEventListener("mouseup",H.handleMouseUp)},H.handleMouseUp=function(){H.unbindEventListeners()},H.unbindEventListeners=function(){window.removeEventListener("mousemove",H.handleChange),window.removeEventListener("mouseup",H.handleMouseUp)},V),x(H,Q)}return e(j,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var V=this,H=this.props.rgb,Q=(0,o.default)({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+H.r+","+H.g+","+H.b+`, 0) 0%,
           rgba(`+H.r+","+H.g+","+H.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:H.a*100+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+H.r+","+H.g+","+H.b+`, 0) 0%,
           rgba(`+H.r+","+H.g+","+H.b+", 1) 100%)"},pointer:{left:0,top:H.a*100+"%"}},overwrite:n({},this.props.style)},{vertical:this.props.direction==="vertical",overwrite:!0});return i.default.createElement("div",{style:Q.alpha},i.default.createElement("div",{style:Q.checkboard},i.default.createElement(h.default,{renderers:this.props.renderers})),i.default.createElement("div",{style:Q.gradient}),i.default.createElement("div",{style:Q.container,ref:function(z){return V.container=z},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},i.default.createElement("div",{style:Q.pointer},this.props.pointer?i.default.createElement(this.props.pointer,this.props):i.default.createElement("div",{style:Q.slider}))))}}]),j})(t.PureComponent||t.Component);return e_.default=P,e_}var n_={},rV;function tRe(){if(rV)return n_;rV=1,Object.defineProperty(n_,"__esModule",{value:!0}),n_.EditableInput=void 0;var n=(function(){function q(V,H){for(var Q=0;Q<H.length;Q++){var Y=H[Q];Y.enumerable=Y.enumerable||!1,Y.configurable=!0,"value"in Y&&(Y.writable=!0),Object.defineProperty(V,Y.key,Y)}}return function(V,H,Q){return H&&q(V.prototype,H),Q&&q(V,Q),V}})(),e=Qa(),t=o(e),i=Km(),r=o(i);function o(q){return q&&q.__esModule?q:{default:q}}function s(q,V,H){return V in q?Object.defineProperty(q,V,{value:H,enumerable:!0,configurable:!0,writable:!0}):q[V]=H,q}function a(q,V){if(!(q instanceof V))throw new TypeError("Cannot call a class as a function")}function c(q,V){if(!q)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return V&&(typeof V=="object"||typeof V=="function")?V:q}function h(q,V){if(typeof V!="function"&&V!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof V);q.prototype=Object.create(V&&V.prototype,{constructor:{value:q,enumerable:!1,writable:!0,configurable:!0}}),V&&(Object.setPrototypeOf?Object.setPrototypeOf(q,V):q.__proto__=V)}var m=1,y=38,M=40,x=[y,M],T=function(V){return x.indexOf(V)>-1},P=function(V){return Number(String(V).replace(/%/g,""))},F=1,j=n_.EditableInput=(function(q){h(V,q);function V(H){a(this,V);var Q=c(this,(V.__proto__||Object.getPrototypeOf(V)).call(this));return Q.handleBlur=function(){Q.state.blurValue&&Q.setState({value:Q.state.blurValue,blurValue:null})},Q.handleChange=function(Y){Q.setUpdatedValue(Y.target.value,Y)},Q.handleKeyDown=function(Y){var z=P(Y.target.value);if(!isNaN(z)&&T(Y.keyCode)){var se=Q.getArrowOffset(),le=Y.keyCode===y?z+se:z-se;Q.setUpdatedValue(le,Y)}},Q.handleDrag=function(Y){if(Q.props.dragLabel){var z=Math.round(Q.props.value+Y.movementX);z>=0&&z<=Q.props.dragMax&&Q.props.onChange&&Q.props.onChange(Q.getValueObjectWithLabel(z),Y)}},Q.handleMouseDown=function(Y){Q.props.dragLabel&&(Y.preventDefault(),Q.handleDrag(Y),window.addEventListener("mousemove",Q.handleDrag),window.addEventListener("mouseup",Q.handleMouseUp))},Q.handleMouseUp=function(){Q.unbindEventListeners()},Q.unbindEventListeners=function(){window.removeEventListener("mousemove",Q.handleDrag),window.removeEventListener("mouseup",Q.handleMouseUp)},Q.state={value:String(H.value).toUpperCase(),blurValue:String(H.value).toUpperCase()},Q.inputId="rc-editable-input-"+F++,Q}return n(V,[{key:"componentDidUpdate",value:function(Q,Y){this.props.value!==this.state.value&&(Q.value!==this.props.value||Y.value!==this.state.value)&&(this.input===document.activeElement?this.setState({blurValue:String(this.props.value).toUpperCase()}):this.setState({value:String(this.props.value).toUpperCase(),blurValue:!this.state.blurValue&&String(this.props.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"getValueObjectWithLabel",value:function(Q){return s({},this.props.label,Q)}},{key:"getArrowOffset",value:function(){return this.props.arrowOffset||m}},{key:"setUpdatedValue",value:function(Q,Y){var z=this.props.label?this.getValueObjectWithLabel(Q):Q;this.props.onChange&&this.props.onChange(z,Y),this.setState({value:Q})}},{key:"render",value:function(){var Q=this,Y=(0,r.default)({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return t.default.createElement("div",{style:Y.wrap},t.default.createElement("input",{id:this.inputId,style:Y.input,ref:function(se){return Q.input=se},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?t.default.createElement("label",{htmlFor:this.inputId,style:Y.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),V})(e.PureComponent||e.Component);return n_.default=j,n_}var i_={},VM={},oV;function nRe(){return oV||(oV=1,Object.defineProperty(VM,"__esModule",{value:!0}),VM.calculateChange=function(e,t,i,r){var o=r.clientWidth,s=r.clientHeight,a=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,c=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,h=a-(r.getBoundingClientRect().left+window.pageXOffset),m=c-(r.getBoundingClientRect().top+window.pageYOffset);if(t==="vertical"){var y=void 0;if(m<0)y=359;else if(m>s)y=0;else{var M=-(m*100/s)+100;y=360*M/100}if(i.h!==y)return{h:y,s:i.s,l:i.l,a:i.a,source:"hsl"}}else{var x=void 0;if(h<0)x=0;else if(h>o)x=359;else{var T=h*100/o;x=360*T/100}if(i.h!==x)return{h:x,s:i.s,l:i.l,a:i.a,source:"hsl"}}return null}),VM}var sV;function iRe(){if(sV)return i_;sV=1,Object.defineProperty(i_,"__esModule",{value:!0}),i_.Hue=void 0;var n=(function(){function x(T,P){for(var F=0;F<P.length;F++){var j=P[F];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(T,j.key,j)}}return function(T,P,F){return P&&x(T.prototype,P),F&&x(T,F),T}})(),e=Qa(),t=c(e),i=Km(),r=c(i),o=nRe(),s=a(o);function a(x){if(x&&x.__esModule)return x;var T={};if(x!=null)for(var P in x)Object.prototype.hasOwnProperty.call(x,P)&&(T[P]=x[P]);return T.default=x,T}function c(x){return x&&x.__esModule?x:{default:x}}function h(x,T){if(!(x instanceof T))throw new TypeError("Cannot call a class as a function")}function m(x,T){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T&&(typeof T=="object"||typeof T=="function")?T:x}function y(x,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof T);x.prototype=Object.create(T&&T.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),T&&(Object.setPrototypeOf?Object.setPrototypeOf(x,T):x.__proto__=T)}var M=i_.Hue=(function(x){y(T,x);function T(){var P,F,j,q;h(this,T);for(var V=arguments.length,H=Array(V),Q=0;Q<V;Q++)H[Q]=arguments[Q];return q=(F=(j=m(this,(P=T.__proto__||Object.getPrototypeOf(T)).call.apply(P,[this].concat(H))),j),j.handleChange=function(Y){var z=s.calculateChange(Y,j.props.direction,j.props.hsl,j.container);z&&typeof j.props.onChange=="function"&&j.props.onChange(z,Y)},j.handleMouseDown=function(Y){j.handleChange(Y),window.addEventListener("mousemove",j.handleChange),window.addEventListener("mouseup",j.handleMouseUp)},j.handleMouseUp=function(){j.unbindEventListeners()},F),m(j,q)}return n(T,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var F=this,j=this.props.direction,q=j===void 0?"horizontal":j,V=(0,r.default)({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:this.props.hsl.h*100/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-(this.props.hsl.h*100/360)+100+"%"}}},{vertical:q==="vertical"});return t.default.createElement("div",{style:V.hue},t.default.createElement("div",{className:"hue-"+q,style:V.container,ref:function(Q){return F.container=Q},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},t.default.createElement("style",null,`
            .hue-horizontal {
              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0
                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to right, #f00 0%, #ff0
                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }

            .hue-vertical {
              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,
                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,
                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }
          `),t.default.createElement("div",{style:V.pointer},this.props.pointer?t.default.createElement(this.props.pointer,this.props):t.default.createElement("div",{style:V.slider}))))}}]),T})(e.PureComponent||e.Component);return i_.default=M,i_}var r_={},aV;function rRe(){if(aV)return r_;aV=1,Object.defineProperty(r_,"__esModule",{value:!0}),r_.Raised=void 0;var n=Qa(),e=c(n),t=b1(),i=c(t),r=Km(),o=c(r),s=qse(),a=c(s);function c(m){return m&&m.__esModule?m:{default:m}}var h=r_.Raised=function(y){var M=y.zDepth,x=y.radius,T=y.background,P=y.children,F=y.styles,j=F===void 0?{}:F,q=(0,o.default)((0,a.default)({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+M+"px "+M*4+"px rgba(0,0,0,.24)",borderRadius:x,background:T}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},j),{"zDepth-1":M===1});return e.default.createElement("div",{style:q.wrap},e.default.createElement("div",{style:q.bg}),e.default.createElement("div",{style:q.content},P))};return h.propTypes={background:i.default.string,zDepth:i.default.oneOf([0,1,2,3,4,5]),radius:i.default.number,styles:i.default.object},h.defaultProps={background:"#fff",zDepth:1,radius:2,styles:{}},r_.default=h,r_}var o_={},Yk,lV;function oRe(){if(lV)return Yk;lV=1;var n=Um(),e=function(){return n.Date.now()};return Yk=e,Yk}var $k,uV;function sRe(){if(uV)return $k;uV=1;var n=/\s/;function e(t){for(var i=t.length;i--&&n.test(t.charAt(i)););return i}return $k=e,$k}var Vk,cV;function aRe(){if(cV)return Vk;cV=1;var n=sRe(),e=/^\s+/;function t(i){return i&&i.slice(0,n(i)+1).replace(e,"")}return Vk=t,Vk}var Hk,AV;function lRe(){if(AV)return Hk;AV=1;var n=aRe(),e=wp(),t=Y6(),i=NaN,r=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,s=/^0o[0-7]+$/i,a=parseInt;function c(h){if(typeof h=="number")return h;if(t(h))return i;if(e(h)){var m=typeof h.valueOf=="function"?h.valueOf():h;h=e(m)?m+"":m}if(typeof h!="string")return h===0?h:+h;h=n(h);var y=o.test(h);return y||s.test(h)?a(h.slice(2),y?2:8):r.test(h)?i:+h}return Hk=c,Hk}var Zk,hV;function Yse(){if(hV)return Zk;hV=1;var n=wp(),e=oRe(),t=lRe(),i="Expected a function",r=Math.max,o=Math.min;function s(a,c,h){var m,y,M,x,T,P,F=0,j=!1,q=!1,V=!0;if(typeof a!="function")throw new TypeError(i);c=t(c)||0,n(h)&&(j=!!h.leading,q="maxWait"in h,M=q?r(t(h.maxWait)||0,c):M,V="trailing"in h?!!h.trailing:V);function H(Ee){var Re=m,je=y;return m=y=void 0,F=Ee,x=a.apply(je,Re),x}function Q(Ee){return F=Ee,T=setTimeout(se,c),j?H(Ee):x}function Y(Ee){var Re=Ee-P,je=Ee-F,Ie=c-Re;return q?o(Ie,M-je):Ie}function z(Ee){var Re=Ee-P,je=Ee-F;return P===void 0||Re>=c||Re<0||q&&je>=M}function se(){var Ee=e();if(z(Ee))return le(Ee);T=setTimeout(se,Y(Ee))}function le(Ee){return T=void 0,V&&m?H(Ee):(m=y=void 0,x)}function pe(){T!==void 0&&clearTimeout(T),F=0,m=P=y=T=void 0}function de(){return T===void 0?x:le(e())}function ve(){var Ee=e(),Re=z(Ee);if(m=arguments,y=this,P=Ee,Re){if(T===void 0)return Q(P);if(q)return clearTimeout(T),T=setTimeout(se,c),H(P)}return T===void 0&&(T=setTimeout(se,c)),x}return ve.cancel=pe,ve.flush=de,ve}return Zk=s,Zk}var Xk,dV;function uRe(){if(dV)return Xk;dV=1;var n=Yse(),e=wp(),t="Expected a function";function i(r,o,s){var a=!0,c=!0;if(typeof r!="function")throw new TypeError(t);return e(s)&&(a="leading"in s?!!s.leading:a,c="trailing"in s?!!s.trailing:c),n(r,o,{leading:a,maxWait:o,trailing:c})}return Xk=i,Xk}var HM={},fV;function cRe(){return fV||(fV=1,Object.defineProperty(HM,"__esModule",{value:!0}),HM.calculateChange=function(e,t,i){var r=i.getBoundingClientRect(),o=r.width,s=r.height,a=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,c=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,h=a-(i.getBoundingClientRect().left+window.pageXOffset),m=c-(i.getBoundingClientRect().top+window.pageYOffset);h<0?h=0:h>o&&(h=o),m<0?m=0:m>s&&(m=s);var y=h/o,M=1-m/s;return{h:t.h,s:y,v:M,a:t.a,source:"hsv"}}),HM}var pV;function ARe(){if(pV)return o_;pV=1,Object.defineProperty(o_,"__esModule",{value:!0}),o_.Saturation=void 0;var n=(function(){function P(F,j){for(var q=0;q<j.length;q++){var V=j[q];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(F,V.key,V)}}return function(F,j,q){return j&&P(F.prototype,j),q&&P(F,q),F}})(),e=Qa(),t=m(e),i=Km(),r=m(i),o=uRe(),s=m(o),a=cRe(),c=h(a);function h(P){if(P&&P.__esModule)return P;var F={};if(P!=null)for(var j in P)Object.prototype.hasOwnProperty.call(P,j)&&(F[j]=P[j]);return F.default=P,F}function m(P){return P&&P.__esModule?P:{default:P}}function y(P,F){if(!(P instanceof F))throw new TypeError("Cannot call a class as a function")}function M(P,F){if(!P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return F&&(typeof F=="object"||typeof F=="function")?F:P}function x(P,F){if(typeof F!="function"&&F!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof F);P.prototype=Object.create(F&&F.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),F&&(Object.setPrototypeOf?Object.setPrototypeOf(P,F):P.__proto__=F)}var T=o_.Saturation=(function(P){x(F,P);function F(j){y(this,F);var q=M(this,(F.__proto__||Object.getPrototypeOf(F)).call(this,j));return q.handleChange=function(V){typeof q.props.onChange=="function"&&q.throttle(q.props.onChange,c.calculateChange(V,q.props.hsl,q.container),V)},q.handleMouseDown=function(V){q.handleChange(V);var H=q.getContainerRenderWindow();H.addEventListener("mousemove",q.handleChange),H.addEventListener("mouseup",q.handleMouseUp)},q.handleMouseUp=function(){q.unbindEventListeners()},q.throttle=(0,s.default)(function(V,H,Q){V(H,Q)},50),q}return n(F,[{key:"componentWillUnmount",value:function(){this.throttle.cancel(),this.unbindEventListeners()}},{key:"getContainerRenderWindow",value:function(){for(var q=this.container,V=window;!V.document.contains(q)&&V.parent!==V;)V=V.parent;return V}},{key:"unbindEventListeners",value:function(){var q=this.getContainerRenderWindow();q.removeEventListener("mousemove",this.handleChange),q.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var q=this,V=this.props.style||{},H=V.color,Q=V.white,Y=V.black,z=V.pointer,se=V.circle,le=(0,r.default)({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-(this.props.hsv.v*100)+100+"%",left:this.props.hsv.s*100+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:`0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),
            0 0 1px 2px rgba(0,0,0,.4)`,borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:H,white:Q,black:Y,pointer:z,circle:se}},{custom:!!this.props.style});return t.default.createElement("div",{style:le.color,ref:function(de){return q.container=de},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},t.default.createElement("style",null,`
          .saturation-white {
            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));
            background: linear-gradient(to right, #fff, rgba(255,255,255,0));
          }
          .saturation-black {
            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));
            background: linear-gradient(to top, #000, rgba(0,0,0,0));
          }
        `),t.default.createElement("div",{style:le.white,className:"saturation-white"},t.default.createElement("div",{style:le.black,className:"saturation-black"}),t.default.createElement("div",{style:le.pointer},this.props.pointer?t.default.createElement(this.props.pointer,this.props):t.default.createElement("div",{style:le.circle}))))}}]),F})(e.PureComponent||e.Component);return o_.default=T,o_}var s_={},wh={},Jk,mV;function hRe(){if(mV)return Jk;mV=1;var n=Use(),e=Pse(),t=bse(),i=Of();function r(o,s){var a=i(o)?n:e;return a(o,t(s))}return Jk=r,Jk}var eT,gV;function dRe(){return gV||(gV=1,eT=hRe()),eT}var Ow={exports:{}},fRe=Ow.exports,yV;function pRe(){return yV||(yV=1,(function(n,e){(function(t,i){n.exports=i()})(fRe,(function(){function t(Ke){"@babel/helpers - typeof";return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Te){return typeof Te}:function(Te){return Te&&typeof Symbol=="function"&&Te.constructor===Symbol&&Te!==Symbol.prototype?"symbol":typeof Te},t(Ke)}var i=/^\s+/,r=/\s+$/;function o(Ke,Te){if(Ke=Ke||"",Te=Te||{},Ke instanceof o)return Ke;if(!(this instanceof o))return new o(Ke,Te);var Se=s(Ke);this._originalInput=Ke,this._r=Se.r,this._g=Se.g,this._b=Se.b,this._a=Se.a,this._roundA=Math.round(100*this._a)/100,this._format=Te.format||Se.format,this._gradientType=Te.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=Se.ok}o.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var Te=this.toRgb();return(Te.r*299+Te.g*587+Te.b*114)/1e3},getLuminance:function(){var Te=this.toRgb(),Se,We,at,it,ft,Dt;return Se=Te.r/255,We=Te.g/255,at=Te.b/255,Se<=.03928?it=Se/12.92:it=Math.pow((Se+.055)/1.055,2.4),We<=.03928?ft=We/12.92:ft=Math.pow((We+.055)/1.055,2.4),at<=.03928?Dt=at/12.92:Dt=Math.pow((at+.055)/1.055,2.4),.2126*it+.7152*ft+.0722*Dt},setAlpha:function(Te){return this._a=Re(Te),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var Te=m(this._r,this._g,this._b);return{h:Te.h*360,s:Te.s,v:Te.v,a:this._a}},toHsvString:function(){var Te=m(this._r,this._g,this._b),Se=Math.round(Te.h*360),We=Math.round(Te.s*100),at=Math.round(Te.v*100);return this._a==1?"hsv("+Se+", "+We+"%, "+at+"%)":"hsva("+Se+", "+We+"%, "+at+"%, "+this._roundA+")"},toHsl:function(){var Te=c(this._r,this._g,this._b);return{h:Te.h*360,s:Te.s,l:Te.l,a:this._a}},toHslString:function(){var Te=c(this._r,this._g,this._b),Se=Math.round(Te.h*360),We=Math.round(Te.s*100),at=Math.round(Te.l*100);return this._a==1?"hsl("+Se+", "+We+"%, "+at+"%)":"hsla("+Se+", "+We+"%, "+at+"%, "+this._roundA+")"},toHex:function(Te){return M(this._r,this._g,this._b,Te)},toHexString:function(Te){return"#"+this.toHex(Te)},toHex8:function(Te){return x(this._r,this._g,this._b,this._a,Te)},toHex8String:function(Te){return"#"+this.toHex8(Te)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(je(this._r,255)*100)+"%",g:Math.round(je(this._g,255)*100)+"%",b:Math.round(je(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(je(this._r,255)*100)+"%, "+Math.round(je(this._g,255)*100)+"%, "+Math.round(je(this._b,255)*100)+"%)":"rgba("+Math.round(je(this._r,255)*100)+"%, "+Math.round(je(this._g,255)*100)+"%, "+Math.round(je(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:ve[M(this._r,this._g,this._b,!0)]||!1},toFilter:function(Te){var Se="#"+T(this._r,this._g,this._b,this._a),We=Se,at=this._gradientType?"GradientType = 1, ":"";if(Te){var it=o(Te);We="#"+T(it._r,it._g,it._b,it._a)}return"progid:DXImageTransform.Microsoft.gradient("+at+"startColorstr="+Se+",endColorstr="+We+")"},toString:function(Te){var Se=!!Te;Te=Te||this._format;var We=!1,at=this._a<1&&this._a>=0,it=!Se&&at&&(Te==="hex"||Te==="hex6"||Te==="hex3"||Te==="hex4"||Te==="hex8"||Te==="name");return it?Te==="name"&&this._a===0?this.toName():this.toRgbString():(Te==="rgb"&&(We=this.toRgbString()),Te==="prgb"&&(We=this.toPercentageRgbString()),(Te==="hex"||Te==="hex6")&&(We=this.toHexString()),Te==="hex3"&&(We=this.toHexString(!0)),Te==="hex4"&&(We=this.toHex8String(!0)),Te==="hex8"&&(We=this.toHex8String()),Te==="name"&&(We=this.toName()),Te==="hsl"&&(We=this.toHslString()),Te==="hsv"&&(We=this.toHsvString()),We||this.toHexString())},clone:function(){return o(this.toString())},_applyModification:function(Te,Se){var We=Te.apply(null,[this].concat([].slice.call(Se)));return this._r=We._r,this._g=We._g,this._b=We._b,this.setAlpha(We._a),this},lighten:function(){return this._applyModification(q,arguments)},brighten:function(){return this._applyModification(V,arguments)},darken:function(){return this._applyModification(H,arguments)},desaturate:function(){return this._applyModification(P,arguments)},saturate:function(){return this._applyModification(F,arguments)},greyscale:function(){return this._applyModification(j,arguments)},spin:function(){return this._applyModification(Q,arguments)},_applyCombination:function(Te,Se){return Te.apply(null,[this].concat([].slice.call(Se)))},analogous:function(){return this._applyCombination(le,arguments)},complement:function(){return this._applyCombination(Y,arguments)},monochromatic:function(){return this._applyCombination(pe,arguments)},splitcomplement:function(){return this._applyCombination(se,arguments)},triad:function(){return this._applyCombination(z,[3])},tetrad:function(){return this._applyCombination(z,[4])}},o.fromRatio=function(Ke,Te){if(t(Ke)=="object"){var Se={};for(var We in Ke)Ke.hasOwnProperty(We)&&(We==="a"?Se[We]=Ke[We]:Se[We]=we(Ke[We]));Ke=Se}return o(Ke,Te)};function s(Ke){var Te={r:0,g:0,b:0},Se=1,We=null,at=null,it=null,ft=!1,Dt=!1;return typeof Ke=="string"&&(Ke=bt(Ke)),t(Ke)=="object"&&(nt(Ke.r)&&nt(Ke.g)&&nt(Ke.b)?(Te=a(Ke.r,Ke.g,Ke.b),ft=!0,Dt=String(Ke.r).substr(-1)==="%"?"prgb":"rgb"):nt(Ke.h)&&nt(Ke.s)&&nt(Ke.v)?(We=we(Ke.s),at=we(Ke.v),Te=y(Ke.h,We,at),ft=!0,Dt="hsv"):nt(Ke.h)&&nt(Ke.s)&&nt(Ke.l)&&(We=we(Ke.s),it=we(Ke.l),Te=h(Ke.h,We,it),ft=!0,Dt="hsl"),Ke.hasOwnProperty("a")&&(Se=Ke.a)),Se=Re(Se),{ok:ft,format:Ke.format||Dt,r:Math.min(255,Math.max(Te.r,0)),g:Math.min(255,Math.max(Te.g,0)),b:Math.min(255,Math.max(Te.b,0)),a:Se}}function a(Ke,Te,Se){return{r:je(Ke,255)*255,g:je(Te,255)*255,b:je(Se,255)*255}}function c(Ke,Te,Se){Ke=je(Ke,255),Te=je(Te,255),Se=je(Se,255);var We=Math.max(Ke,Te,Se),at=Math.min(Ke,Te,Se),it,ft,Dt=(We+at)/2;if(We==at)it=ft=0;else{var Ot=We-at;switch(ft=Dt>.5?Ot/(2-We-at):Ot/(We+at),We){case Ke:it=(Te-Se)/Ot+(Te<Se?6:0);break;case Te:it=(Se-Ke)/Ot+2;break;case Se:it=(Ke-Te)/Ot+4;break}it/=6}return{h:it,s:ft,l:Dt}}function h(Ke,Te,Se){var We,at,it;Ke=je(Ke,360),Te=je(Te,100),Se=je(Se,100);function ft(Jt,Dn,Pn){return Pn<0&&(Pn+=1),Pn>1&&(Pn-=1),Pn<1/6?Jt+(Dn-Jt)*6*Pn:Pn<1/2?Dn:Pn<2/3?Jt+(Dn-Jt)*(2/3-Pn)*6:Jt}if(Te===0)We=at=it=Se;else{var Dt=Se<.5?Se*(1+Te):Se+Te-Se*Te,Ot=2*Se-Dt;We=ft(Ot,Dt,Ke+1/3),at=ft(Ot,Dt,Ke),it=ft(Ot,Dt,Ke-1/3)}return{r:We*255,g:at*255,b:it*255}}function m(Ke,Te,Se){Ke=je(Ke,255),Te=je(Te,255),Se=je(Se,255);var We=Math.max(Ke,Te,Se),at=Math.min(Ke,Te,Se),it,ft,Dt=We,Ot=We-at;if(ft=We===0?0:Ot/We,We==at)it=0;else{switch(We){case Ke:it=(Te-Se)/Ot+(Te<Se?6:0);break;case Te:it=(Se-Ke)/Ot+2;break;case Se:it=(Ke-Te)/Ot+4;break}it/=6}return{h:it,s:ft,v:Dt}}function y(Ke,Te,Se){Ke=je(Ke,360)*6,Te=je(Te,100),Se=je(Se,100);var We=Math.floor(Ke),at=Ke-We,it=Se*(1-Te),ft=Se*(1-at*Te),Dt=Se*(1-(1-at)*Te),Ot=We%6,Jt=[Se,ft,it,it,Dt,Se][Ot],Dn=[Dt,Se,Se,ft,it,it][Ot],Pn=[it,it,Dt,Se,Se,ft][Ot];return{r:Jt*255,g:Dn*255,b:Pn*255}}function M(Ke,Te,Se,We){var at=[ke(Math.round(Ke).toString(16)),ke(Math.round(Te).toString(16)),ke(Math.round(Se).toString(16))];return We&&at[0].charAt(0)==at[0].charAt(1)&&at[1].charAt(0)==at[1].charAt(1)&&at[2].charAt(0)==at[2].charAt(1)?at[0].charAt(0)+at[1].charAt(0)+at[2].charAt(0):at.join("")}function x(Ke,Te,Se,We,at){var it=[ke(Math.round(Ke).toString(16)),ke(Math.round(Te).toString(16)),ke(Math.round(Se).toString(16)),ke(ze(We))];return at&&it[0].charAt(0)==it[0].charAt(1)&&it[1].charAt(0)==it[1].charAt(1)&&it[2].charAt(0)==it[2].charAt(1)&&it[3].charAt(0)==it[3].charAt(1)?it[0].charAt(0)+it[1].charAt(0)+it[2].charAt(0)+it[3].charAt(0):it.join("")}function T(Ke,Te,Se,We){var at=[ke(ze(We)),ke(Math.round(Ke).toString(16)),ke(Math.round(Te).toString(16)),ke(Math.round(Se).toString(16))];return at.join("")}o.equals=function(Ke,Te){return!Ke||!Te?!1:o(Ke).toRgbString()==o(Te).toRgbString()},o.random=function(){return o.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function P(Ke,Te){Te=Te===0?0:Te||10;var Se=o(Ke).toHsl();return Se.s-=Te/100,Se.s=Ie(Se.s),o(Se)}function F(Ke,Te){Te=Te===0?0:Te||10;var Se=o(Ke).toHsl();return Se.s+=Te/100,Se.s=Ie(Se.s),o(Se)}function j(Ke){return o(Ke).desaturate(100)}function q(Ke,Te){Te=Te===0?0:Te||10;var Se=o(Ke).toHsl();return Se.l+=Te/100,Se.l=Ie(Se.l),o(Se)}function V(Ke,Te){Te=Te===0?0:Te||10;var Se=o(Ke).toRgb();return Se.r=Math.max(0,Math.min(255,Se.r-Math.round(255*-(Te/100)))),Se.g=Math.max(0,Math.min(255,Se.g-Math.round(255*-(Te/100)))),Se.b=Math.max(0,Math.min(255,Se.b-Math.round(255*-(Te/100)))),o(Se)}function H(Ke,Te){Te=Te===0?0:Te||10;var Se=o(Ke).toHsl();return Se.l-=Te/100,Se.l=Ie(Se.l),o(Se)}function Q(Ke,Te){var Se=o(Ke).toHsl(),We=(Se.h+Te)%360;return Se.h=We<0?360+We:We,o(Se)}function Y(Ke){var Te=o(Ke).toHsl();return Te.h=(Te.h+180)%360,o(Te)}function z(Ke,Te){if(isNaN(Te)||Te<=0)throw new Error("Argument to polyad must be a positive number");for(var Se=o(Ke).toHsl(),We=[o(Ke)],at=360/Te,it=1;it<Te;it++)We.push(o({h:(Se.h+it*at)%360,s:Se.s,l:Se.l}));return We}function se(Ke){var Te=o(Ke).toHsl(),Se=Te.h;return[o(Ke),o({h:(Se+72)%360,s:Te.s,l:Te.l}),o({h:(Se+216)%360,s:Te.s,l:Te.l})]}function le(Ke,Te,Se){Te=Te||6,Se=Se||30;var We=o(Ke).toHsl(),at=360/Se,it=[o(Ke)];for(We.h=(We.h-(at*Te>>1)+720)%360;--Te;)We.h=(We.h+at)%360,it.push(o(We));return it}function pe(Ke,Te){Te=Te||6;for(var Se=o(Ke).toHsv(),We=Se.h,at=Se.s,it=Se.v,ft=[],Dt=1/Te;Te--;)ft.push(o({h:We,s:at,v:it})),it=(it+Dt)%1;return ft}o.mix=function(Ke,Te,Se){Se=Se===0?0:Se||50;var We=o(Ke).toRgb(),at=o(Te).toRgb(),it=Se/100,ft={r:(at.r-We.r)*it+We.r,g:(at.g-We.g)*it+We.g,b:(at.b-We.b)*it+We.b,a:(at.a-We.a)*it+We.a};return o(ft)},o.readability=function(Ke,Te){var Se=o(Ke),We=o(Te);return(Math.max(Se.getLuminance(),We.getLuminance())+.05)/(Math.min(Se.getLuminance(),We.getLuminance())+.05)},o.isReadable=function(Ke,Te,Se){var We=o.readability(Ke,Te),at,it;switch(it=!1,at=Bt(Se),at.level+at.size){case"AAsmall":case"AAAlarge":it=We>=4.5;break;case"AAlarge":it=We>=3;break;case"AAAsmall":it=We>=7;break}return it},o.mostReadable=function(Ke,Te,Se){var We=null,at=0,it,ft,Dt,Ot;Se=Se||{},ft=Se.includeFallbackColors,Dt=Se.level,Ot=Se.size;for(var Jt=0;Jt<Te.length;Jt++)it=o.readability(Ke,Te[Jt]),it>at&&(at=it,We=o(Te[Jt]));return o.isReadable(Ke,We,{level:Dt,size:Ot})||!ft?We:(Se.includeFallbackColors=!1,o.mostReadable(Ke,["#fff","#000"],Se))};var de=o.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},ve=o.hexNames=Ee(de);function Ee(Ke){var Te={};for(var Se in Ke)Ke.hasOwnProperty(Se)&&(Te[Ke[Se]]=Se);return Te}function Re(Ke){return Ke=parseFloat(Ke),(isNaN(Ke)||Ke<0||Ke>1)&&(Ke=1),Ke}function je(Ke,Te){tt(Ke)&&(Ke="100%");var Se=At(Ke);return Ke=Math.min(Te,Math.max(0,parseFloat(Ke))),Se&&(Ke=parseInt(Ke*Te,10)/100),Math.abs(Ke-Te)<1e-6?1:Ke%Te/parseFloat(Te)}function Ie(Ke){return Math.min(1,Math.max(0,Ke))}function qe(Ke){return parseInt(Ke,16)}function tt(Ke){return typeof Ke=="string"&&Ke.indexOf(".")!=-1&&parseFloat(Ke)===1}function At(Ke){return typeof Ke=="string"&&Ke.indexOf("%")!=-1}function ke(Ke){return Ke.length==1?"0"+Ke:""+Ke}function we(Ke){return Ke<=1&&(Ke=Ke*100+"%"),Ke}function ze(Ke){return Math.round(parseFloat(Ke)*255).toString(16)}function Me(Ke){return qe(Ke)/255}var lt=(function(){var Ke="[-\\+]?\\d+%?",Te="[-\\+]?\\d*\\.\\d+%?",Se="(?:"+Te+")|(?:"+Ke+")",We="[\\s|\\(]+("+Se+")[,|\\s]+("+Se+")[,|\\s]+("+Se+")\\s*\\)?",at="[\\s|\\(]+("+Se+")[,|\\s]+("+Se+")[,|\\s]+("+Se+")[,|\\s]+("+Se+")\\s*\\)?";return{CSS_UNIT:new RegExp(Se),rgb:new RegExp("rgb"+We),rgba:new RegExp("rgba"+at),hsl:new RegExp("hsl"+We),hsla:new RegExp("hsla"+at),hsv:new RegExp("hsv"+We),hsva:new RegExp("hsva"+at),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}})();function nt(Ke){return!!lt.CSS_UNIT.exec(Ke)}function bt(Ke){Ke=Ke.replace(i,"").replace(r,"").toLowerCase();var Te=!1;if(de[Ke])Ke=de[Ke],Te=!0;else if(Ke=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var Se;return(Se=lt.rgb.exec(Ke))?{r:Se[1],g:Se[2],b:Se[3]}:(Se=lt.rgba.exec(Ke))?{r:Se[1],g:Se[2],b:Se[3],a:Se[4]}:(Se=lt.hsl.exec(Ke))?{h:Se[1],s:Se[2],l:Se[3]}:(Se=lt.hsla.exec(Ke))?{h:Se[1],s:Se[2],l:Se[3],a:Se[4]}:(Se=lt.hsv.exec(Ke))?{h:Se[1],s:Se[2],v:Se[3]}:(Se=lt.hsva.exec(Ke))?{h:Se[1],s:Se[2],v:Se[3],a:Se[4]}:(Se=lt.hex8.exec(Ke))?{r:qe(Se[1]),g:qe(Se[2]),b:qe(Se[3]),a:Me(Se[4]),format:Te?"name":"hex8"}:(Se=lt.hex6.exec(Ke))?{r:qe(Se[1]),g:qe(Se[2]),b:qe(Se[3]),format:Te?"name":"hex"}:(Se=lt.hex4.exec(Ke))?{r:qe(Se[1]+""+Se[1]),g:qe(Se[2]+""+Se[2]),b:qe(Se[3]+""+Se[3]),a:Me(Se[4]+""+Se[4]),format:Te?"name":"hex8"}:(Se=lt.hex3.exec(Ke))?{r:qe(Se[1]+""+Se[1]),g:qe(Se[2]+""+Se[2]),b:qe(Se[3]+""+Se[3]),format:Te?"name":"hex"}:!1}function Bt(Ke){var Te,Se;return Ke=Ke||{level:"AA",size:"small"},Te=(Ke.level||"AA").toUpperCase(),Se=(Ke.size||"small").toLowerCase(),Te!=="AA"&&Te!=="AAA"&&(Te="AA"),Se!=="small"&&Se!=="large"&&(Se="small"),{level:Te,size:Se}}return o}))})(Ow)),Ow.exports}var vV;function $se(){if(vV)return wh;vV=1,Object.defineProperty(wh,"__esModule",{value:!0}),wh.isvalidColorString=wh.red=wh.getContrastingColor=wh.isValidHex=wh.toState=wh.simpleCheckForValidColor=void 0;var n=dRe(),e=r(n),t=pRe(),i=r(t);function r(s){return s&&s.__esModule?s:{default:s}}wh.simpleCheckForValidColor=function(a){var c=["r","g","b","a","h","s","l","v"],h=0,m=0;return(0,e.default)(c,function(y){if(a[y]&&(h+=1,isNaN(a[y])||(m+=1),y==="s"||y==="l")){var M=/^\d+%$/;M.test(a[y])&&(m+=1)}}),h===m?a:!1};var o=wh.toState=function(a,c){var h=a.hex?(0,i.default)(a.hex):(0,i.default)(a),m=h.toHsl(),y=h.toHsv(),M=h.toRgb(),x=h.toHex();m.s===0&&(m.h=c||0,y.h=c||0);var T=x==="000000"&&M.a===0;return{hsl:m,hex:T?"transparent":"#"+x,rgb:M,hsv:y,oldHue:a.h||c||m.h,source:a.source}};return wh.isValidHex=function(a){if(a==="transparent")return!0;var c=String(a).charAt(0)==="#"?1:0;return a.length!==4+c&&a.length<7+c&&(0,i.default)(a).isValid()},wh.getContrastingColor=function(a){if(!a)return"#fff";var c=o(a);if(c.hex==="transparent")return"rgba(0,0,0,0.4)";var h=(c.rgb.r*299+c.rgb.g*587+c.rgb.b*114)/1e3;return h>=128?"#000":"#fff"},wh.red={hsl:{a:1,h:0,l:.5,s:1},hex:"#ff0000",rgb:{r:255,g:0,b:0,a:1},hsv:{h:0,s:1,v:1,a:1}},wh.isvalidColorString=function(a,c){var h=a.replace("","");return(0,i.default)(c+" ("+h+")")._ok},wh}var bV;function mRe(){if(bV)return s_;bV=1,Object.defineProperty(s_,"__esModule",{value:!0}),s_.ColorWrap=void 0;var n=Object.assign||function(T){for(var P=1;P<arguments.length;P++){var F=arguments[P];for(var j in F)Object.prototype.hasOwnProperty.call(F,j)&&(T[j]=F[j])}return T},e=(function(){function T(P,F){for(var j=0;j<F.length;j++){var q=F[j];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(P,q.key,q)}}return function(P,F,j){return F&&T(P.prototype,F),j&&T(P,j),P}})(),t=Qa(),i=h(t),r=Yse(),o=h(r),s=$se(),a=c(s);function c(T){if(T&&T.__esModule)return T;var P={};if(T!=null)for(var F in T)Object.prototype.hasOwnProperty.call(T,F)&&(P[F]=T[F]);return P.default=T,P}function h(T){return T&&T.__esModule?T:{default:T}}function m(T,P){if(!(T instanceof P))throw new TypeError("Cannot call a class as a function")}function y(T,P){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P&&(typeof P=="object"||typeof P=="function")?P:T}function M(T,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof P);T.prototype=Object.create(P&&P.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),P&&(Object.setPrototypeOf?Object.setPrototypeOf(T,P):T.__proto__=P)}var x=s_.ColorWrap=function(P){var F=(function(j){M(q,j);function q(V){m(this,q);var H=y(this,(q.__proto__||Object.getPrototypeOf(q)).call(this));return H.handleChange=function(Q,Y){var z=a.simpleCheckForValidColor(Q);if(z){var se=a.toState(Q,Q.h||H.state.oldHue);H.setState(se),H.props.onChangeComplete&&H.debounce(H.props.onChangeComplete,se,Y),H.props.onChange&&H.props.onChange(se,Y)}},H.handleSwatchHover=function(Q,Y){var z=a.simpleCheckForValidColor(Q);if(z){var se=a.toState(Q,Q.h||H.state.oldHue);H.props.onSwatchHover&&H.props.onSwatchHover(se,Y)}},H.state=n({},a.toState(V.color,0)),H.debounce=(0,o.default)(function(Q,Y,z){Q(Y,z)},100),H}return e(q,[{key:"render",value:function(){var H={};return this.props.onSwatchHover&&(H.onSwatchHover=this.handleSwatchHover),i.default.createElement(P,n({},this.props,this.state,{onChange:this.handleChange},H))}}],[{key:"getDerivedStateFromProps",value:function(H,Q){return n({},a.toState(H.color,Q.oldHue))}}]),q})(t.PureComponent||t.Component);return F.propTypes=n({},P.propTypes),F.defaultProps=n({},P.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),F};return s_.default=x,s_}var a_={},k2={},CV;function gRe(){if(CV)return k2;CV=1,Object.defineProperty(k2,"__esModule",{value:!0}),k2.handleFocus=void 0;var n=Object.assign||function(c){for(var h=1;h<arguments.length;h++){var m=arguments[h];for(var y in m)Object.prototype.hasOwnProperty.call(m,y)&&(c[y]=m[y])}return c},e=(function(){function c(h,m){for(var y=0;y<m.length;y++){var M=m[y];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(h,M.key,M)}}return function(h,m,y){return m&&c(h.prototype,m),y&&c(h,y),h}})(),t=Qa(),i=r(t);function r(c){return c&&c.__esModule?c:{default:c}}function o(c,h){if(!(c instanceof h))throw new TypeError("Cannot call a class as a function")}function s(c,h){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:c}function a(c,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);c.prototype=Object.create(h&&h.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(c,h):c.__proto__=h)}return k2.handleFocus=function(h){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return(function(y){a(M,y);function M(){var x,T,P,F;o(this,M);for(var j=arguments.length,q=Array(j),V=0;V<j;V++)q[V]=arguments[V];return F=(T=(P=s(this,(x=M.__proto__||Object.getPrototypeOf(M)).call.apply(x,[this].concat(q))),P),P.state={focus:!1},P.handleFocus=function(){return P.setState({focus:!0})},P.handleBlur=function(){return P.setState({focus:!1})},T),s(P,F)}return e(M,[{key:"render",value:function(){return i.default.createElement(m,{onFocus:this.handleFocus,onBlur:this.handleBlur},i.default.createElement(h,n({},this.props,this.state)))}}]),M})(i.default.Component)},k2}var _V;function yRe(){if(_V)return a_;_V=1,Object.defineProperty(a_,"__esModule",{value:!0}),a_.Swatch=void 0;var n=Object.assign||function(y){for(var M=1;M<arguments.length;M++){var x=arguments[M];for(var T in x)Object.prototype.hasOwnProperty.call(x,T)&&(y[T]=x[T])}return y},e=Qa(),t=c(e),i=Km(),r=c(i),o=gRe(),s=ML(),a=c(s);function c(y){return y&&y.__esModule?y:{default:y}}var h=13,m=a_.Swatch=function(M){var x=M.color,T=M.style,P=M.onClick,F=P===void 0?function(){}:P,j=M.onHover,q=M.title,V=q===void 0?x:q,H=M.children,Q=M.focus,Y=M.focusStyle,z=Y===void 0?{}:Y,se=x==="transparent",le=(0,r.default)({default:{swatch:n({background:x,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},T,Q?z:{})}}),pe=function(je){return F(x,je)},de=function(je){return je.keyCode===h&&F(x,je)},ve=function(je){return j(x,je)},Ee={};return j&&(Ee.onMouseOver=ve),t.default.createElement("div",n({style:le.swatch,onClick:pe,title:V,tabIndex:0,onKeyDown:de},Ee),H,se&&t.default.createElement(a.default,{borderRadius:le.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))};return a_.default=(0,o.handleFocus)(m),a_}var xV;function Vse(){return xV||(xV=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0});var e=eRe();Object.defineProperty(n,"Alpha",{enumerable:!0,get:function(){return h(e).default}});var t=ML();Object.defineProperty(n,"Checkboard",{enumerable:!0,get:function(){return h(t).default}});var i=tRe();Object.defineProperty(n,"EditableInput",{enumerable:!0,get:function(){return h(i).default}});var r=iRe();Object.defineProperty(n,"Hue",{enumerable:!0,get:function(){return h(r).default}});var o=rRe();Object.defineProperty(n,"Raised",{enumerable:!0,get:function(){return h(o).default}});var s=ARe();Object.defineProperty(n,"Saturation",{enumerable:!0,get:function(){return h(s).default}});var a=mRe();Object.defineProperty(n,"ColorWrap",{enumerable:!0,get:function(){return h(a).default}});var c=yRe();Object.defineProperty(n,"Swatch",{enumerable:!0,get:function(){return h(c).default}});function h(m){return m&&m.__esModule?m:{default:m}}})(qk)),qk}var l_={},tT,MV;function vRe(){if(MV)return tT;MV=1;function n(e){return e===void 0}return tT=n,tT}var ZM={},wV;function bRe(){if(wV)return ZM;wV=1,Object.defineProperty(ZM,"__esModule",{value:!0});var n=Object.assign||function(s){for(var a=1;a<arguments.length;a++){var c=arguments[a];for(var h in c)Object.prototype.hasOwnProperty.call(c,h)&&(s[h]=c[h])}return s},e=Qa(),t=i(e);function i(s){return s&&s.__esModule?s:{default:s}}function r(s,a){var c={};for(var h in s)a.indexOf(h)>=0||Object.prototype.hasOwnProperty.call(s,h)&&(c[h]=s[h]);return c}var o=24;return ZM.default=function(s){var a=s.fill,c=a===void 0?"currentColor":a,h=s.width,m=h===void 0?o:h,y=s.height,M=y===void 0?o:y,x=s.style,T=x===void 0?{}:x,P=r(s,["fill","width","height","style"]);return t.default.createElement("svg",n({viewBox:"0 0 "+o+" "+o,style:n({fill:c,width:m,height:M},T)},P),t.default.createElement("path",{d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}))},ZM}var SV;function CRe(){if(SV)return l_;SV=1,Object.defineProperty(l_,"__esModule",{value:!0}),l_.ChromeFields=void 0;var n=(function(){function q(V,H){for(var Q=0;Q<H.length;Q++){var Y=H[Q];Y.enumerable=Y.enumerable||!1,Y.configurable=!0,"value"in Y&&(Y.writable=!0),Object.defineProperty(V,Y.key,Y)}}return function(V,H,Q){return H&&q(V.prototype,H),Q&&q(V,Q),V}})(),e=Qa(),t=x(e),i=Km(),r=x(i),o=$se(),s=M(o),a=vRe(),c=x(a),h=Vse(),m=bRe(),y=x(m);function M(q){if(q&&q.__esModule)return q;var V={};if(q!=null)for(var H in q)Object.prototype.hasOwnProperty.call(q,H)&&(V[H]=q[H]);return V.default=q,V}function x(q){return q&&q.__esModule?q:{default:q}}function T(q,V){if(!(q instanceof V))throw new TypeError("Cannot call a class as a function")}function P(q,V){if(!q)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return V&&(typeof V=="object"||typeof V=="function")?V:q}function F(q,V){if(typeof V!="function"&&V!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof V);q.prototype=Object.create(V&&V.prototype,{constructor:{value:q,enumerable:!1,writable:!0,configurable:!0}}),V&&(Object.setPrototypeOf?Object.setPrototypeOf(q,V):q.__proto__=V)}var j=l_.ChromeFields=(function(q){F(V,q);function V(H){T(this,V);var Q=P(this,(V.__proto__||Object.getPrototypeOf(V)).call(this));return Q.toggleViews=function(){Q.state.view==="hex"?Q.setState({view:"rgb"}):Q.state.view==="rgb"?Q.setState({view:"hsl"}):Q.state.view==="hsl"&&(Q.props.hsl.a===1?Q.setState({view:"hex"}):Q.setState({view:"rgb"}))},Q.handleChange=function(Y,z){Y.hex?s.isValidHex(Y.hex)&&Q.props.onChange({hex:Y.hex,source:"hex"},z):Y.r||Y.g||Y.b?Q.props.onChange({r:Y.r||Q.props.rgb.r,g:Y.g||Q.props.rgb.g,b:Y.b||Q.props.rgb.b,source:"rgb"},z):Y.a?(Y.a<0?Y.a=0:Y.a>1&&(Y.a=1),Q.props.onChange({h:Q.props.hsl.h,s:Q.props.hsl.s,l:Q.props.hsl.l,a:Math.round(Y.a*100)/100,source:"rgb"},z)):(Y.h||Y.s||Y.l)&&(typeof Y.s=="string"&&Y.s.includes("%")&&(Y.s=Y.s.replace("%","")),typeof Y.l=="string"&&Y.l.includes("%")&&(Y.l=Y.l.replace("%","")),Y.s==1?Y.s=.01:Y.l==1&&(Y.l=.01),Q.props.onChange({h:Y.h||Q.props.hsl.h,s:Number((0,c.default)(Y.s)?Q.props.hsl.s:Y.s),l:Number((0,c.default)(Y.l)?Q.props.hsl.l:Y.l),source:"hsl"},z))},Q.showHighlight=function(Y){Y.currentTarget.style.background="#eee"},Q.hideHighlight=function(Y){Y.currentTarget.style.background="transparent"},H.hsl.a!==1&&H.view==="hex"?Q.state={view:"rgb"}:Q.state={view:H.view},Q}return n(V,[{key:"render",value:function(){var Q=this,Y=(0,r.default)({default:{wrap:{paddingTop:"16px",display:"flex"},fields:{flex:"1",display:"flex",marginLeft:"-6px"},field:{paddingLeft:"6px",width:"100%"},alpha:{paddingLeft:"6px",width:"100%"},toggle:{width:"32px",textAlign:"right",position:"relative"},icon:{marginRight:"-4px",marginTop:"12px",cursor:"pointer",position:"relative"},iconHighlight:{position:"absolute",width:"24px",height:"28px",background:"#eee",borderRadius:"4px",top:"10px",left:"12px",display:"none"},input:{fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px",textAlign:"center"},label:{textTransform:"uppercase",fontSize:"11px",lineHeight:"11px",color:"#969696",textAlign:"center",display:"block",marginTop:"12px"},svg:{fill:"#333",width:"24px",height:"24px",border:"1px transparent solid",borderRadius:"5px"}},disableAlpha:{alpha:{display:"none"}}},this.props,this.state),z=void 0;return this.state.view==="hex"?z=t.default.createElement("div",{style:Y.fields,className:"flexbox-fix"},t.default.createElement("div",{style:Y.field},t.default.createElement(h.EditableInput,{style:{input:Y.input,label:Y.label},label:"hex",value:this.props.hex,onChange:this.handleChange}))):this.state.view==="rgb"?z=t.default.createElement("div",{style:Y.fields,className:"flexbox-fix"},t.default.createElement("div",{style:Y.field},t.default.createElement(h.EditableInput,{style:{input:Y.input,label:Y.label},label:"r",value:this.props.rgb.r,onChange:this.handleChange})),t.default.createElement("div",{style:Y.field},t.default.createElement(h.EditableInput,{style:{input:Y.input,label:Y.label},label:"g",value:this.props.rgb.g,onChange:this.handleChange})),t.default.createElement("div",{style:Y.field},t.default.createElement(h.EditableInput,{style:{input:Y.input,label:Y.label},label:"b",value:this.props.rgb.b,onChange:this.handleChange})),t.default.createElement("div",{style:Y.alpha},t.default.createElement(h.EditableInput,{style:{input:Y.input,label:Y.label},label:"a",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):this.state.view==="hsl"&&(z=t.default.createElement("div",{style:Y.fields,className:"flexbox-fix"},t.default.createElement("div",{style:Y.field},t.default.createElement(h.EditableInput,{style:{input:Y.input,label:Y.label},label:"h",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),t.default.createElement("div",{style:Y.field},t.default.createElement(h.EditableInput,{style:{input:Y.input,label:Y.label},label:"s",value:Math.round(this.props.hsl.s*100)+"%",onChange:this.handleChange})),t.default.createElement("div",{style:Y.field},t.default.createElement(h.EditableInput,{style:{input:Y.input,label:Y.label},label:"l",value:Math.round(this.props.hsl.l*100)+"%",onChange:this.handleChange})),t.default.createElement("div",{style:Y.alpha},t.default.createElement(h.EditableInput,{style:{input:Y.input,label:Y.label},label:"a",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),t.default.createElement("div",{style:Y.wrap,className:"flexbox-fix"},z,t.default.createElement("div",{style:Y.toggle},t.default.createElement("div",{style:Y.icon,onClick:this.toggleViews,ref:function(le){return Q.icon=le}},t.default.createElement(y.default,{style:Y.svg,onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight}))))}}],[{key:"getDerivedStateFromProps",value:function(Q,Y){return Q.hsl.a!==1&&Y.view==="hex"?{view:"rgb"}:null}}]),V})(t.default.Component);return j.defaultProps={view:"hex"},l_.default=j,l_}var u_={},EV;function _Re(){if(EV)return u_;EV=1,Object.defineProperty(u_,"__esModule",{value:!0}),u_.ChromePointer=void 0;var n=Qa(),e=r(n),t=Km(),i=r(t);function r(s){return s&&s.__esModule?s:{default:s}}var o=u_.ChromePointer=function(){var a=(0,i.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return e.default.createElement("div",{style:a.picker})};return u_.default=o,u_}var c_={},OV;function xRe(){if(OV)return c_;OV=1,Object.defineProperty(c_,"__esModule",{value:!0}),c_.ChromePointerCircle=void 0;var n=Qa(),e=r(n),t=Km(),i=r(t);function r(s){return s&&s.__esModule?s:{default:s}}var o=c_.ChromePointerCircle=function(){var a=(0,i.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}});return e.default.createElement("div",{style:a.picker})};return c_.default=o,c_}var BV;function MRe(){if(BV)return $C;BV=1,Object.defineProperty($C,"__esModule",{value:!0}),$C.Chrome=void 0;var n=Qa(),e=P(n),t=b1(),i=P(t),r=Km(),o=P(r),s=qse(),a=P(s),c=Vse(),h=CRe(),m=P(h),y=_Re(),M=P(y),x=xRe(),T=P(x);function P(j){return j&&j.__esModule?j:{default:j}}var F=$C.Chrome=function(q){var V=q.width,H=q.onChange,Q=q.disableAlpha,Y=q.rgb,z=q.hsl,se=q.hsv,le=q.hex,pe=q.renderers,de=q.styles,ve=de===void 0?{}:de,Ee=q.className,Re=Ee===void 0?"":Ee,je=q.defaultView,Ie=(0,o.default)((0,a.default)({default:{picker:{width:V,background:"#fff",borderRadius:"2px",boxShadow:"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",boxSizing:"initial",fontFamily:"Menlo"},saturation:{width:"100%",paddingBottom:"55%",position:"relative",borderRadius:"2px 2px 0 0",overflow:"hidden"},Saturation:{radius:"2px 2px 0 0"},body:{padding:"16px 16px 12px"},controls:{display:"flex"},color:{width:"32px"},swatch:{marginTop:"6px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{absolute:"0px 0px 0px 0px",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+Y.r+", "+Y.g+", "+Y.b+", "+Y.a+")",zIndex:"2"},toggles:{flex:"1"},hue:{height:"10px",position:"relative",marginBottom:"8px"},Hue:{radius:"2px"},alpha:{height:"10px",position:"relative"},Alpha:{radius:"2px"}},disableAlpha:{color:{width:"22px"},alpha:{display:"none"},hue:{marginBottom:"0px"},swatch:{width:"10px",height:"10px",marginTop:"0px"}}},ve),{disableAlpha:Q});return e.default.createElement("div",{style:Ie.picker,className:"chrome-picker "+Re},e.default.createElement("div",{style:Ie.saturation},e.default.createElement(c.Saturation,{style:Ie.Saturation,hsl:z,hsv:se,pointer:T.default,onChange:H})),e.default.createElement("div",{style:Ie.body},e.default.createElement("div",{style:Ie.controls,className:"flexbox-fix"},e.default.createElement("div",{style:Ie.color},e.default.createElement("div",{style:Ie.swatch},e.default.createElement("div",{style:Ie.active}),e.default.createElement(c.Checkboard,{renderers:pe}))),e.default.createElement("div",{style:Ie.toggles},e.default.createElement("div",{style:Ie.hue},e.default.createElement(c.Hue,{style:Ie.Hue,hsl:z,pointer:M.default,onChange:H})),e.default.createElement("div",{style:Ie.alpha},e.default.createElement(c.Alpha,{style:Ie.Alpha,rgb:Y,hsl:z,pointer:M.default,renderers:pe,onChange:H})))),e.default.createElement(m.default,{rgb:Y,hsl:z,hex:le,view:je,onChange:H,disableAlpha:Q})))};return F.propTypes={width:i.default.oneOfType([i.default.string,i.default.number]),disableAlpha:i.default.bool,styles:i.default.object,defaultView:i.default.oneOf(["hex","rgb","hsl"])},F.defaultProps={width:225,disableAlpha:!1,styles:{}},$C.default=(0,c.ColorWrap)(F),$C}var wRe=MRe();const SRe=eu(wRe);function wr(){var n="/home/runner/work/maputnik/maputnik/src/components/InputColor.tsx",e="04cff10f573f4461c1718b34a830d9c914f6fa95",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputColor.tsx",statementMap:{0:{start:{line:7,column:14},end:{line:7,column:23}},1:{start:{line:8,column:2},end:{line:8,column:56}},2:{start:{line:11,column:10},end:{line:13,column:3}},3:{start:{line:14,column:15},end:{line:14,column:19}},4:{start:{line:16,column:4},end:{line:16,column:17}},5:{start:{line:17,column:4},end:{line:17,column:75}},6:{start:{line:20,column:4},end:{line:20,column:27}},7:{start:{line:25,column:21},end:{line:39,column:3}},8:{start:{line:26,column:17},end:{line:26,column:32}},9:{start:{line:27,column:4},end:{line:38,column:5}},10:{start:{line:28,column:18},end:{line:28,column:46}},11:{start:{line:29,column:6},end:{line:32,column:8}},12:{start:{line:34,column:6},end:{line:37,column:8}},13:{start:{line:40,column:17},end:{line:42,column:3}},14:{start:{line:41,column:4},end:{line:41,column:62}},15:{start:{line:44,column:4},end:{line:49,column:5}},16:{start:{line:45,column:6},end:{line:45,column:43}},17:{start:{line:47,column:6},end:{line:47,column:49}},18:{start:{line:48,column:6},end:{line:48,column:39}},19:{start:{line:52,column:4},end:{line:52,column:47}},20:{start:{line:55,column:19},end:{line:55,column:42}},21:{start:{line:56,column:25},end:{line:56,column:44}},22:{start:{line:57,column:31},end:{line:63,column:5}},23:{start:{line:64,column:35},end:{line:99,column:5}},24:{start:{line:79,column:31},end:{line:79,column:67}},25:{start:{line:100,column:24},end:{line:102,column:5}},26:{start:{line:103,column:4},end:{line:124,column:9}},27:{start:{line:114,column:12},end:{line:114,column:36}},28:{start:{line:121,column:27},end:{line:121,column:56}}},fnMap:{0:{name:"formatColor",decl:{start:{line:6,column:9},end:{line:6,column:20}},loc:{start:{line:6,column:28},end:{line:9,column:1}},line:6},1:{name:"(anonymous_1)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:21},end:{line:18,column:3}},line:15},2:{name:"(anonymous_2)",decl:{start:{line:19,column:2},end:{line:19,column:3}},loc:{start:{line:19,column:21},end:{line:21,column:3}},line:19},3:{name:"(anonymous_3)",decl:{start:{line:25,column:21},end:{line:25,column:22}},loc:{start:{line:25,column:27},end:{line:39,column:3}},line:25},4:{name:"(anonymous_4)",decl:{start:{line:40,column:17},end:{line:40,column:18}},loc:{start:{line:40,column:23},end:{line:42,column:3}},line:40},5:{name:"(anonymous_5)",decl:{start:{line:43,column:2},end:{line:43,column:3}},loc:{start:{line:43,column:14},end:{line:50,column:3}},line:43},6:{name:"(anonymous_6)",decl:{start:{line:51,column:2},end:{line:51,column:3}},loc:{start:{line:51,column:14},end:{line:53,column:3}},line:51},7:{name:"(anonymous_7)",decl:{start:{line:54,column:2},end:{line:54,column:3}},loc:{start:{line:54,column:11},end:{line:125,column:3}},line:54},8:{name:"(anonymous_8)",decl:{start:{line:79,column:24},end:{line:79,column:25}},loc:{start:{line:79,column:31},end:{line:79,column:67}},line:79},9:{name:"(anonymous_9)",decl:{start:{line:113,column:15},end:{line:113,column:16}},loc:{start:{line:113,column:26},end:{line:115,column:11}},line:113},10:{name:"(anonymous_10)",decl:{start:{line:121,column:20},end:{line:121,column:21}},loc:{start:{line:121,column:27},end:{line:121,column:56}},line:121}},branchMap:{0:{loc:{start:{line:27,column:4},end:{line:38,column:5}},type:"if",locations:[{start:{line:27,column:4},end:{line:38,column:5}},{start:{line:33,column:11},end:{line:38,column:5}}],line:27},1:{loc:{start:{line:52,column:24},end:{line:52,column:45}},type:"cond-expr",locations:[{start:{line:52,column:35},end:{line:52,column:41}},{start:{line:52,column:44},end:{line:52,column:45}}],line:52},2:{loc:{start:{line:104,column:6},end:{line:104,column:39}},type:"binary-expr",locations:[{start:{line:104,column:6},end:{line:104,column:29}},{start:{line:104,column:33},end:{line:104,column:39}}],line:104},3:{loc:{start:{line:120,column:17},end:{line:120,column:57}},type:"cond-expr",locations:[{start:{line:120,column:36},end:{line:120,column:52}},{start:{line:120,column:55},end:{line:120,column:57}}],line:120}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputColor.tsx"],names:[],mappings:"AAsFmB,SAQb,KARa;AAtFnB,OAAO,WAAW;AAClB,OAAO,WAAW;AAClB,OAAO,kBAAkB;AAEzB,OAAO,YAAY;AAEnB,SAAS,YAAY,OAA4B;AAC/C,QAAM,MAAM,MAAM;AAClB,SAAO,QAAQ,IAAI,CAAC,KAAK,IAAI,CAAC,KAAK,IAAI,CAAC,KAAK,IAAI,CAAC;AACpD;AAaA,qBAAqB,mBAAmB,MAAM,UAA2B;AAAA,EACvE,QAAQ;AAAA,IACN,cAAc;AAAA,EAChB;AAAA,EACA,aAAsC;AAAA,EAEtC,YAAa,OAAwB;AACnC,UAAM,KAAK;AACX,SAAK,kBAAkB,OAAO,SAAS,KAAK,iBAAiB,MAAK,EAAE;AAAA,EACtE;AAAA,EAEA,gBAAgB,GAAW;AACzB,SAAK,MAAM,SAAS,CAAC;AAAA,EACvB;AAAA;AAAA;AAAA;AAAA,EAKA,mBAAmB,MAAM;AACvB,UAAM,OAAO,KAAK;AAClB,QAAG,MAAM;AACP,YAAM,MAAM,KAAK,sBAAsB;AACvC,aAAO;AAAA,QACL,KAAK,IAAI;AAAA,QACT,MAAM,IAAI,OAAO;AAAA,MACnB;AAAA,IACF,OAAO;AACL,aAAO;AAAA,QACL,KAAK;AAAA,QACL,MAAM;AAAA,MACR;AAAA,IACF;AAAA,EACF;AAAA,EAEA,eAAe,MAAM;AACnB,SAAK,SAAS,EAAE,cAAc,CAAC,KAAK,MAAM,aAAa,CAAC;AAAA,EAC1D;AAAA,EAEA,IAAI,QAAQ;AAEV,QAAI;AACF,aAAO,MAAM,KAAK,MAAM,KAAK,EAAE,IAAI;AAAA,IACrC,SACM,KAAK;AACT,cAAQ,KAAK,yBAAyB,GAAG;AACzC,aAAO,MAAM,kBAAkB;AAAA,IACjC;AAAA,EACF;AAAA,EAEA,SAAU,GAAW;AACnB,SAAK,MAAM,SAAS,MAAM,KAAK,SAAY,CAAC;AAAA,EAC9C;AAAA,EAEA,SAAS;AACP,UAAM,SAAS,KAAK,iBAAiB;AACrC,UAAM,eAAe,KAAK,MAAM,OAAO;AACvC,UAAM,qBAAqB;AAAA,MACzB,GAAG,aAAa;AAAA,MAChB,GAAG,aAAa;AAAA,MAChB,GAAG,aAAa;AAAA;AAAA,MAEhB,GAAG,aAAa;AAAA,IAClB;AAEA,UAAM,SAAS;AAAA,MAAC;AAAA;AAAA,QACd,WAAU;AAAA,QACV,OAAO;AAAA,UACL,UAAU;AAAA,UACV,QAAQ;AAAA,UACR,MAAM,OAAO;AAAA,UACb,KAAK,OAAO;AAAA,QACd;AAAA,QACA;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO;AAAA,cACP,UAAU,OAAK,KAAK,gBAAgB,YAAY,CAAC,CAAC;AAAA;AAAA,UACpD;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK;AAAA,cACd,OAAO;AAAA,gBACL,QAAQ;AAAA,gBACR,UAAU;AAAA,gBACV,KAAK;AAAA,gBACL,OAAO;AAAA,gBACP,QAAQ;AAAA,gBACR,MAAM;AAAA,cACR;AAAA;AAAA,UACF;AAAA;AAAA;AAAA,IACF;AAEA,UAAM,cAAc;AAAA,MAClB,iBAAiB,KAAK,MAAM;AAAA,IAC9B;AAEA,WAAO,qBAAC,SAAI,WAAU,0BACnB;AAAA,WAAK,MAAM,gBAAgB;AAAA,MAC5B,oBAAC,SAAI,WAAU,yBAAwB,OAAO,aAAa;AAAA,MAC3D;AAAA,QAAC;AAAA;AAAA,UACC,cAAY,KAAK,MAAM,YAAY;AAAA,UACnC,YAAW;AAAA,UACX,cAAa;AAAA,UACb,WAAU;AAAA,UACV,KAAK,CAAC,UAAU;AAAC,iBAAK,aAAa;AAAA,UAAM;AAAA,UACzC,SAAS,KAAK;AAAA,UACd,OAAO,KAAK,MAAM;AAAA,UAClB,MAAM,KAAK,MAAM;AAAA,UACjB,aAAa,KAAK,MAAM;AAAA,UACxB,OAAO,KAAK,MAAM,QAAQ,KAAK,MAAM,QAAQ;AAAA,UAC7C,UAAU,CAAC,MAAM,KAAK,SAAS,EAAE,OAAO,KAAK;AAAA;AAAA,MAC/C;AAAA,OACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"04cff10f573f4461c1718b34a830d9c914f6fa95"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return wr=function(){return s},s}wr();function ERe(n){wr().f[0]++;const e=(wr().s[0]++,n.rgb);return wr().s[1]++,`rgba(${e.r}, ${e.g}, ${e.b}, ${e.a})`}class wL extends En.Component{state=(wr().s[2]++,{pickerOpened:!1});colorInput=(wr().s[3]++,null);constructor(e){wr().f[1]++,wr().s[4]++,super(e),wr().s[5]++,this.onChangeNoCheck=n9.throttle(this.onChangeNoCheck,1e3/30)}onChangeNoCheck(e){wr().f[2]++,wr().s[6]++,this.props.onChange(e)}calcPickerOffset=(wr().s[7]++,()=>{wr().f[3]++;const e=(wr().s[8]++,this.colorInput);if(wr().s[9]++,e){wr().b[0][0]++;const t=(wr().s[10]++,e.getBoundingClientRect());return wr().s[11]++,{top:t.top,left:t.left+196}}else return wr().b[0][1]++,wr().s[12]++,{top:160,left:555}});togglePicker=(wr().s[13]++,()=>{wr().f[4]++,wr().s[14]++,this.setState({pickerOpened:!this.state.pickerOpened})});get color(){wr().f[5]++,wr().s[15]++;try{return wr().s[16]++,Vu(this.props.value).rgb()}catch(e){return wr().s[17]++,console.warn("Error parsing color: ",e),wr().s[18]++,Vu("rgb(255,255,255)")}}onChange(e){wr().f[6]++,wr().s[19]++,this.props.onChange(e===""?(wr().b[1][0]++,void 0):(wr().b[1][1]++,e))}render(){wr().f[7]++;const e=(wr().s[20]++,this.calcPickerOffset()),t=(wr().s[21]++,this.color.object()),i=(wr().s[22]++,{r:t.r,g:t.g,b:t.b,a:t.alpha}),r=(wr().s[23]++,ie.jsxs("div",{className:"maputnik-color-picker-offset",style:{position:"fixed",zIndex:1,left:e.left,top:e.top},children:[ie.jsx(SRe,{color:i,onChange:s=>(wr().f[8]++,wr().s[24]++,this.onChangeNoCheck(ERe(s)))}),ie.jsx("div",{className:"maputnik-color-picker-offset",onClick:this.togglePicker,style:{zIndex:-1,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}})]})),o=(wr().s[25]++,{backgroundColor:this.props.value});return wr().s[26]++,ie.jsxs("div",{className:"maputnik-color-wrapper",children:[(wr().b[2][0]++,this.state.pickerOpened&&(wr().b[2][1]++,r)),ie.jsx("div",{className:"maputnik-color-swatch",style:o}),ie.jsx("input",{"aria-label":this.props["aria-label"],spellCheck:"false",autoComplete:"off",className:"maputnik-color",ref:s=>{wr().f[9]++,wr().s[27]++,this.colorInput=s},onClick:this.togglePicker,style:this.props.style,name:this.props.name,placeholder:this.props.default,value:this.props.value?(wr().b[3][0]++,this.props.value):(wr().b[3][1]++,""),onChange:s=>(wr().f[10]++,wr().s[28]++,this.onChange(s.target.value))})]})}}function Ht(){var n="/home/runner/work/maputnik/maputnik/src/components/InputNumber.tsx",e="4f1ef08718bb93faa62aae09b5e3576a9aa3bb04",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputNumber.tsx",statementMap:{0:{start:{line:5,column:24},end:{line:7,column:3}},1:{start:{line:8,column:19},end:{line:8,column:24}},2:{start:{line:10,column:4},end:{line:10,column:17}},3:{start:{line:11,column:4},end:{line:16,column:6}},4:{start:{line:19,column:4},end:{line:24,column:5}},5:{start:{line:20,column:6},end:{line:23,column:8}},6:{start:{line:25,column:4},end:{line:25,column:16}},7:{start:{line:28,column:18},end:{line:28,column:77}},8:{start:{line:29,column:23},end:{line:29,column:49}},9:{start:{line:30,column:4},end:{line:39,column:5}},10:{start:{line:31,column:6},end:{line:31,column:58}},11:{start:{line:31,column:31},end:{line:31,column:58}},12:{start:{line:32,column:6},end:{line:34,column:9}},13:{start:{line:35,column:11},end:{line:39,column:5}},14:{start:{line:36,column:6},end:{line:38,column:9}},15:{start:{line:40,column:4},end:{line:42,column:7}},16:{start:{line:45,column:4},end:{line:47,column:5}},17:{start:{line:46,column:6},end:{line:46,column:18}},18:{start:{line:48,column:18},end:{line:48,column:20}},19:{start:{line:49,column:4},end:{line:51,column:5}},20:{start:{line:50,column:6},end:{line:50,column:19}},21:{start:{line:52,column:4},end:{line:54,column:5}},22:{start:{line:53,column:6},end:{line:53,column:19}},23:{start:{line:55,column:4},end:{line:57,column:5}},24:{start:{line:56,column:6},end:{line:56,column:19}},25:{start:{line:58,column:4},end:{line:58,column:16}},26:{start:{line:60,column:15},end:{line:74,column:3}},27:{start:{line:61,column:4},end:{line:61,column:38}},28:{start:{line:62,column:4},end:{line:64,column:5}},29:{start:{line:63,column:6},end:{line:63,column:13}},30:{start:{line:65,column:4},end:{line:73,column:5}},31:{start:{line:66,column:6},end:{line:72,column:7}},32:{start:{line:67,column:8},end:{line:67,column:43}},33:{start:{line:68,column:8},end:{line:68,column:56}},34:{start:{line:70,column:8},end:{line:70,column:33}},35:{start:{line:71,column:8},end:{line:71,column:46}},36:{start:{line:75,column:18},end:{line:100,column:3}},37:{start:{line:76,column:16},end:{line:76,column:42}},38:{start:{line:77,column:17},end:{line:77,column:37}},39:{start:{line:78,column:21},end:{line:78,column:26}},40:{start:{line:79,column:4},end:{line:95,column:5}},41:{start:{line:80,column:19},end:{line:80,column:31}},42:{start:{line:81,column:6},end:{line:94,column:7}},43:{start:{line:82,column:8},end:{line:86,column:9}},44:{start:{line:83,column:10},end:{line:83,column:42}},45:{start:{line:85,column:10},end:{line:85,column:42}},46:{start:{line:87,column:8},end:{line:87,column:27}},47:{start:{line:89,column:8},end:{line:93,column:9}},48:{start:{line:90,column:10},end:{line:90,column:31}},49:{start:{line:92,column:10},end:{line:92,column:40}},50:{start:{line:96,column:4},end:{line:96,column:32}},51:{start:{line:97,column:4},end:{line:97,column:70}},52:{start:{line:98,column:4},end:{line:98,column:41}},53:{start:{line:99,column:4},end:{line:99,column:56}},54:{start:{line:99,column:29},end:{line:99,column:56}},55:{start:{line:102,column:4},end:{line:185,column:5}},56:{start:{line:103,column:20},end:{line:103,column:81}},57:{start:{line:104,column:27},end:{line:104,column:82}},58:{start:{line:106,column:6},end:{line:110,column:7}},59:{start:{line:107,column:8},end:{line:107,column:38}},60:{start:{line:109,column:8},end:{line:109,column:27}},61:{start:{line:111,column:6},end:{line:165,column:11}},62:{start:{line:124,column:14},end:{line:124,column:41}},63:{start:{line:127,column:14},end:{line:127,column:67}},64:{start:{line:130,column:14},end:{line:130,column:69}},65:{start:{line:133,column:14},end:{line:137,column:17}},66:{start:{line:152,column:14},end:{line:152,column:47}},67:{start:{line:155,column:14},end:{line:155,column:47}},68:{start:{line:158,column:14},end:{line:158,column:48}},69:{start:{line:159,column:14},end:{line:159,column:32}},70:{start:{line:167,column:20},end:{line:167,column:81}},71:{start:{line:168,column:6},end:{line:184,column:8}},72:{start:{line:176,column:27},end:{line:176,column:59}},73:{start:{line:178,column:12},end:{line:178,column:45}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:2},end:{line:9,column:3}},loc:{start:{line:9,column:21},end:{line:17,column:3}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:48},end:{line:26,column:3}},line:18},2:{name:"(anonymous_2)",decl:{start:{line:27,column:2},end:{line:27,column:3}},loc:{start:{line:27,column:24},end:{line:43,column:3}},line:27},3:{name:"(anonymous_3)",decl:{start:{line:44,column:2},end:{line:44,column:3}},loc:{start:{line:44,column:13},end:{line:59,column:3}},line:44},4:{name:"(anonymous_4)",decl:{start:{line:60,column:15},end:{line:60,column:16}},loc:{start:{line:60,column:21},end:{line:74,column:3}},line:60},5:{name:"(anonymous_5)",decl:{start:{line:75,column:18},end:{line:75,column:19}},loc:{start:{line:75,column:25},end:{line:100,column:3}},line:75},6:{name:"(anonymous_6)",decl:{start:{line:101,column:2},end:{line:101,column:3}},loc:{start:{line:101,column:11},end:{line:186,column:3}},line:101},7:{name:"(anonymous_7)",decl:{start:{line:123,column:23},end:{line:123,column:24}},loc:{start:{line:123,column:29},end:{line:125,column:13}},line:123},8:{name:"(anonymous_8)",decl:{start:{line:126,column:27},end:{line:126,column:28}},loc:{start:{line:126,column:33},end:{line:128,column:13}},line:126},9:{name:"(anonymous_9)",decl:{start:{line:129,column:25},end:{line:129,column:26}},loc:{start:{line:129,column:31},end:{line:131,column:13}},line:129},10:{name:"(anonymous_10)",decl:{start:{line:132,column:20},end:{line:132,column:21}},loc:{start:{line:132,column:26},end:{line:138,column:13}},line:132},11:{name:"(anonymous_11)",decl:{start:{line:151,column:21},end:{line:151,column:22}},loc:{start:{line:151,column:29},end:{line:153,column:13}},line:151},12:{name:"(anonymous_12)",decl:{start:{line:154,column:22},end:{line:154,column:23}},loc:{start:{line:154,column:29},end:{line:156,column:13}},line:154},13:{name:"(anonymous_13)",decl:{start:{line:157,column:20},end:{line:157,column:21}},loc:{start:{line:157,column:28},end:{line:160,column:13}},line:157},14:{name:"(anonymous_14)",decl:{start:{line:176,column:20},end:{line:176,column:21}},loc:{start:{line:176,column:27},end:{line:176,column:59}},line:176},15:{name:"(anonymous_15)",decl:{start:{line:177,column:19},end:{line:177,column:20}},loc:{start:{line:177,column:25},end:{line:179,column:11}},line:177}},branchMap:{0:{loc:{start:{line:19,column:4},end:{line:24,column:5}},type:"if",locations:[{start:{line:19,column:4},end:{line:24,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:19},1:{loc:{start:{line:19,column:8},end:{line:19,column:53}},type:"binary-expr",locations:[{start:{line:19,column:8},end:{line:19,column:22}},{start:{line:19,column:26},end:{line:19,column:53}}],line:19},2:{loc:{start:{line:28,column:18},end:{line:28,column:77}},type:"cond-expr",locations:[{start:{line:28,column:59},end:{line:28,column:65}},{start:{line:28,column:68},end:{line:28,column:77}}],line:28},3:{loc:{start:{line:28,column:18},end:{line:28,column:56}},type:"binary-expr",locations:[{start:{line:28,column:18},end:{line:28,column:33}},{start:{line:28,column:37},end:{line:28,column:56}}],line:28},4:{loc:{start:{line:30,column:4},end:{line:39,column:5}},type:"if",locations:[{start:{line:30,column:4},end:{line:39,column:5}},{start:{line:35,column:11},end:{line:39,column:5}}],line:30},5:{loc:{start:{line:30,column:8},end:{line:30,column:41}},type:"binary-expr",locations:[{start:{line:30,column:8},end:{line:30,column:27}},{start:{line:30,column:31},end:{line:30,column:41}}],line:30},6:{loc:{start:{line:31,column:6},end:{line:31,column:58}},type:"if",locations:[{start:{line:31,column:6},end:{line:31,column:58}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:31},7:{loc:{start:{line:35,column:11},end:{line:39,column:5}},type:"if",locations:[{start:{line:35,column:11},end:{line:39,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:35},8:{loc:{start:{line:35,column:15},end:{line:35,column:49}},type:"binary-expr",locations:[{start:{line:35,column:15},end:{line:35,column:35}},{start:{line:35,column:39},end:{line:35,column:49}}],line:35},9:{loc:{start:{line:41,column:18},end:{line:41,column:53}},type:"cond-expr",locations:[{start:{line:41,column:36},end:{line:41,column:42}},{start:{line:41,column:45},end:{line:41,column:53}}],line:41},10:{loc:{start:{line:45,column:4},end:{line:47,column:5}},type:"if",locations:[{start:{line:45,column:4},end:{line:47,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:45},11:{loc:{start:{line:49,column:4},end:{line:51,column:5}},type:"if",locations:[{start:{line:49,column:4},end:{line:51,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:49},12:{loc:{start:{line:52,column:4},end:{line:54,column:5}},type:"if",locations:[{start:{line:52,column:4},end:{line:54,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:52},13:{loc:{start:{line:52,column:8},end:{line:52,column:56}},type:"binary-expr",locations:[{start:{line:52,column:8},end:{line:52,column:30}},{start:{line:52,column:34},end:{line:52,column:56}}],line:52},14:{loc:{start:{line:55,column:4},end:{line:57,column:5}},type:"if",locations:[{start:{line:55,column:4},end:{line:57,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:55},15:{loc:{start:{line:55,column:8},end:{line:55,column:56}},type:"binary-expr",locations:[{start:{line:55,column:8},end:{line:55,column:30}},{start:{line:55,column:34},end:{line:55,column:56}}],line:55},16:{loc:{start:{line:62,column:4},end:{line:64,column:5}},type:"if",locations:[{start:{line:62,column:4},end:{line:64,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:62},17:{loc:{start:{line:65,column:4},end:{line:73,column:5}},type:"if",locations:[{start:{line:65,column:4},end:{line:73,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:65},18:{loc:{start:{line:66,column:6},end:{line:72,column:7}},type:"if",locations:[{start:{line:66,column:6},end:{line:72,column:7}},{start:{line:69,column:13},end:{line:72,column:7}}],line:66},19:{loc:{start:{line:79,column:4},end:{line:95,column:5}},type:"if",locations:[{start:{line:79,column:4},end:{line:95,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:79},20:{loc:{start:{line:81,column:6},end:{line:94,column:7}},type:"if",locations:[{start:{line:81,column:6},end:{line:94,column:7}},{start:{line:88,column:13},end:{line:94,column:7}}],line:81},21:{loc:{start:{line:82,column:8},end:{line:86,column:9}},type:"if",locations:[{start:{line:82,column:8},end:{line:86,column:9}},{start:{line:84,column:15},end:{line:86,column:9}}],line:82},22:{loc:{start:{line:89,column:8},end:{line:93,column:9}},type:"if",locations:[{start:{line:89,column:8},end:{line:93,column:9}},{start:{line:91,column:15},end:{line:93,column:9}}],line:89},23:{loc:{start:{line:99,column:4},end:{line:99,column:56}},type:"if",locations:[{start:{line:99,column:4},end:{line:99,column:56}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:99},24:{loc:{start:{line:102,column:4},end:{line:185,column:5}},type:"if",locations:[{start:{line:102,column:4},end:{line:185,column:5}},{start:{line:166,column:11},end:{line:185,column:5}}],line:102},25:{loc:{start:{line:102,column:8},end:{line:102,column:205}},type:"binary-expr",locations:[{start:{line:102,column:8},end:{line:102,column:63}},{start:{line:102,column:67},end:{line:102,column:122}},{start:{line:102,column:126},end:{line:102,column:151}},{start:{line:102,column:155},end:{line:102,column:180}},{start:{line:102,column:184},end:{line:102,column:205}}],line:102},26:{loc:{start:{line:103,column:20},end:{line:103,column:81}},type:"cond-expr",locations:[{start:{line:103,column:41},end:{line:103,column:62}},{start:{line:103,column:65},end:{line:103,column:81}}],line:103},27:{loc:{start:{line:104,column:27},end:{line:104,column:82}},type:"cond-expr",locations:[{start:{line:104,column:59},end:{line:104,column:61}},{start:{line:104,column:64},end:{line:104,column:82}}],line:104},28:{loc:{start:{line:106,column:6},end:{line:110,column:7}},type:"if",locations:[{start:{line:106,column:6},end:{line:110,column:7}},{start:{line:108,column:13},end:{line:110,column:7}}],line:106},29:{loc:{start:{line:121,column:19},end:{line:121,column:58}},type:"cond-expr",locations:[{start:{line:121,column:38},end:{line:121,column:50}},{start:{line:121,column:53},end:{line:121,column:58}}],line:121},30:{loc:{start:{line:150,column:19},end:{line:150,column:58}},type:"cond-expr",locations:[{start:{line:150,column:43},end:{line:150,column:45}},{start:{line:150,column:48},end:{line:150,column:58}}],line:150},31:{loc:{start:{line:167,column:20},end:{line:167,column:81}},type:"cond-expr",locations:[{start:{line:167,column:41},end:{line:167,column:62}},{start:{line:167,column:65},end:{line:167,column:81}}],line:167},32:{loc:{start:{line:175,column:17},end:{line:175,column:46}},type:"cond-expr",locations:[{start:{line:175,column:36},end:{line:175,column:38}},{start:{line:175,column:41},end:{line:175,column:46}}],line:175}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0,0,0,0],26:[0,0],27:[0,0],28:[0,0],29:[0,0],30:[0,0],31:[0,0],32:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputNumber.tsx"],names:[],mappings:"AA8Ka,SACL,KADK;AA9Kb,OAAO,WAAwC;AAC/C,OAAO,sBAAsB;AA0B7B,qBAAqB,oBAAoB,MAAM,UAA8C;AAAA,EAC3F,OAAO,eAAe;AAAA,IACpB,WAAW;AAAA,EACb;AAAA,EACA,iBAA0B;AAAA,EAE1B,YAAY,OAAyB;AACnC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,MAAM,CAAC,iBAAiB;AAAA,MACxB,SAAS;AAAA,MACT,OAAO,MAAM;AAAA,MACb,YAAY,MAAM;AAAA,IACpB;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAAmC,OAAyB;AAC1F,QAAI,CAAC,MAAM,WAAW,MAAM,UAAU,MAAM,OAAO;AACjD,aAAO;AAAA,QACL,OAAO,MAAM;AAAA,QACb,YAAY,MAAM;AAAA,MACpB;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAAA,EAEA,YAAY,UAAuC;AACjD,UAAM,QAAS,aAAa,MAAM,aAAa,SAC7C,SAAY,CAAC;AAEf,UAAM,aAAa,KAAK,MAAM,UAAU;AACxC,QAAG,KAAK,QAAQ,KAAK,KAAK,YAAY;AACpC,UAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,KAAK;AAClD,WAAK,SAAS;AAAA,QACZ;AAAA,MACF,CAAC;AAAA,IACH,WACS,CAAC,KAAK,QAAQ,KAAK,KAAK,YAAY;AAC3C,WAAK,SAAS;AAAA,QACZ,OAAO;AAAA,MACT,CAAC;AAAA,IACH;AAEA,SAAK,SAAS;AAAA,MACZ,YAAY,aAAa,KAAK,SAAY;AAAA,IAC5C,CAAC;AAAA,EACH;AAAA,EAEA,QAAQ,GAAgC;AACtC,QAAI,MAAM,QAAW;AACnB,aAAO;AAAA,IACT;AAEA,UAAM,QAAQ,CAAC;AACf,QAAG,MAAM,KAAK,GAAG;AACf,aAAO;AAAA,IACT;AAEA,QAAG,CAAC,MAAM,KAAK,MAAM,GAAI,KAAK,QAAQ,KAAK,MAAM,KAAM;AACrD,aAAO;AAAA,IACT;AAEA,QAAG,CAAC,MAAM,KAAK,MAAM,GAAI,KAAK,QAAQ,KAAK,MAAM,KAAM;AACrD,aAAO;AAAA,IACT;AAEA,WAAO;AAAA,EACT;AAAA,EAEA,aAAa,MAAM;AACjB,SAAK,SAAS,EAAC,SAAS,MAAK,CAAC;AAE9B,QAAG,CAAC,KAAK,MAAM,OAAO;AACpB;AAAA,IACF;AAGA,QAAI,CAAC,KAAK,QAAQ,KAAK,MAAM,KAAK,GAAG;AACnC,UAAG,KAAK,QAAQ,KAAK,MAAM,KAAK,GAAG;AACjC,aAAK,YAAY,KAAK,MAAM,KAAK;AACjC,aAAK,SAAS,EAAC,YAAY,KAAK,MAAM,MAAK,CAAC;AAAA,MAC9C,OAAO;AACL,aAAK,YAAY,MAAS;AAC1B,aAAK,SAAS,EAAC,YAAY,OAAS,CAAC;AAAA,MACvC;AAAA,IACF;AAAA,EACF;AAAA,EAEA,gBAAgB,CAAC,MAAqE;AACpF,QAAI,QAAQ,WAAW,EAAE,OAAO,KAAK;AACrC,UAAM,OAAO,KAAK,MAAM;AACxB,QAAI,aAAa;AAEjB,QAAG,MAAM;AAEP,YAAM,OAAO,QAAQ;AAGrB,UAAI,KAAK,gBAAgB;AAKvB,YAAI,QAAQ,CAAC,KAAK,MAAM,YAAa;AACnC,kBAAQ,KAAK,MAAM,QAAS;AAAA,QAC9B,OACK;AACH,kBAAQ,KAAK,MAAM,QAAS;AAAA,QAC9B;AACA,qBAAa;AAAA,MACf,OACK;AACH,YAAI,OAAO,OAAK,GAAG;AACjB,kBAAQ,QAAQ;AAAA,QAClB,OACK;AACH,kBAAQ,SAAS,OAAO;AAAA,QAC1B;AAAA,MACF;AAAA,IACF;AAEA,SAAK,iBAAiB;AAGtB,YAAQ,KAAK,IAAI,KAAK,MAAM,KAAM,KAAK,IAAI,KAAK,MAAM,KAAM,KAAK,CAAC;AAElE,SAAK,SAAS,EAAC,OAAO,WAAU,CAAC;AACjC,QAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,KAAK;AAAA,EACpD;AAAA,EAEA,SAAS;AACP,QACE,OAAO,UAAU,eAAe,KAAK,KAAK,OAAO,KAAK,KACtD,OAAO,UAAU,eAAe,KAAK,KAAK,OAAO,KAAK,KACtD,KAAK,MAAM,QAAQ,UAAa,KAAK,MAAM,QAAQ,UACnD,KAAK,MAAM,YACX;AACA,YAAM,QAAQ,KAAK,MAAM,UAAU,KAAK,MAAM,aAAa,KAAK,MAAM;AACtE,YAAM,eAAe,KAAK,MAAM,YAAY,SAAY,KAAK,KAAK,MAAM;AACxE,UAAI;AACJ,UAAI,KAAK,MAAM,cAAc;AAC3B,qBAAa,KAAK,MAAM;AAAA,MAC1B,OACK;AACH,qBAAa;AAAA,MACf;AAEA,aAAO,qBAAC,SAAI,WAAU,6BACpB;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,WAAU;AAAA,YAEV,MAAK;AAAA,YACL,KAAK,KAAK,MAAM;AAAA,YAChB,KAAK,KAAK,MAAM;AAAA,YAChB,MAAK;AAAA,YACL,YAAW;AAAA,YACX,OAAO,UAAU,SAAY,eAAe;AAAA,YAC5C,UAAU,KAAK;AAAA,YACf,WAAW,MAAM;AACf,mBAAK,iBAAiB;AAAA,YACxB;AAAA,YACA,eAAe,MAAM;AACnB,mBAAK,SAAS,EAAC,SAAS,MAAM,cAAc,KAAI,CAAC;AAAA,YACnD;AAAA,YACA,aAAa,MAAM;AAEjB,mBAAK,SAAS,EAAC,SAAS,OAAO,cAAc,MAAK,CAAC;AAAA,YACrD;AAAA,YACA,QAAQ,MAAM;AACZ,mBAAK,SAAS;AAAA,gBACZ,SAAS;AAAA,gBACT,cAAc;AAAA,gBACd,YAAY,KAAK,MAAM;AAAA,cACzB,CAAC;AAAA,YACH;AAAA,YACA,eAAa,KAAK,MAAM,aAAa,IAAI;AAAA;AAAA,UAzBrC;AAAA,QA0BN;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YAEC,MAAK;AAAA,YACL,YAAW;AAAA,YACX,WAAU;AAAA,YACV,aAAa,KAAK,MAAM,SAAS,SAAS;AAAA,YAC1C,OAAO,eAAe,SAAY,KAAK;AAAA,YACvC,SAAS,QAAM;AACb,mBAAK,SAAS,EAAC,SAAS,KAAI,CAAC;AAAA,YAC/B;AAAA,YACA,UAAU,OAAK;AACb,mBAAK,YAAY,EAAE,OAAO,KAAK;AAAA,YACjC;AAAA,YACA,QAAQ,QAAM;AACZ,mBAAK,SAAS,EAAC,SAAS,MAAK,CAAC;AAC9B,mBAAK,WAAW;AAAA,YAClB;AAAA,YACA,eAAa,KAAK,MAAM,aAAa,IAAI;AAAA;AAAA,UAhBrC;AAAA,QAkBN;AAAA,SACF;AAAA,IACF,OACK;AACH,YAAM,QAAQ,KAAK,MAAM,UAAU,KAAK,MAAM,aAAa,KAAK,MAAM;AAEtE,aAAO;AAAA,QAAC;AAAA;AAAA,UACN,cAAY,KAAK,MAAM,YAAY;AAAA,UACnC,YAAW;AAAA,UACX,WAAU;AAAA,UACV,aAAa,KAAK,MAAM,SAAS,SAAS;AAAA,UAC1C,OAAO,UAAU,SAAY,KAAK;AAAA,UAClC,UAAU,OAAK,KAAK,YAAY,EAAE,OAAO,KAAK;AAAA,UAC9C,SAAS,MAAM;AACb,iBAAK,SAAS,EAAC,SAAS,KAAI,CAAC;AAAA,UAC/B;AAAA,UACA,QAAQ,KAAK;AAAA,UACb,UAAU,KAAK,MAAM;AAAA,UACrB,eAAa,KAAK,MAAM,aAAa;AAAA;AAAA,MACvC;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"4f1ef08718bb93faa62aae09b5e3576a9aa3bb04"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Ht=function(){return s},s}Ht();class m1 extends En.Component{static defaultProps=(Ht().s[0]++,{rangeStep:1});_keyboardEvent=(Ht().s[1]++,!1);constructor(e){Ht().f[0]++,Ht().s[2]++,super(e),Ht().s[3]++,this.state={uuid:+Ox(),editing:!1,value:e.value,dirtyValue:e.value}}static getDerivedStateFromProps(e,t){return Ht().f[1]++,Ht().s[4]++,Ht().b[1][0]++,!t.editing&&(Ht().b[1][1]++,e.value!==t.value)?(Ht().b[0][0]++,Ht().s[5]++,{value:e.value,dirtyValue:e.value}):(Ht().b[0][1]++,Ht().s[6]++,null)}changeValue(e){Ht().f[2]++;const t=(Ht().s[7]++,Ht().b[3][0]++,e===""||(Ht().b[3][1]++,e===void 0)?(Ht().b[2][0]++,void 0):(Ht().b[2][1]++,+e)),i=(Ht().s[8]++,this.props.value!==t);Ht().s[9]++,Ht().b[5][0]++,this.isValid(t)&&(Ht().b[5][1]++,i)?(Ht().b[4][0]++,Ht().s[10]++,this.props.onChange?(Ht().b[6][0]++,Ht().s[11]++,this.props.onChange(t)):Ht().b[6][1]++,Ht().s[12]++,this.setState({value:t})):(Ht().b[4][1]++,Ht().s[13]++,Ht().b[8][0]++,!this.isValid(t)&&(Ht().b[8][1]++,i)?(Ht().b[7][0]++,Ht().s[14]++,this.setState({value:void 0})):Ht().b[7][1]++),Ht().s[15]++,this.setState({dirtyValue:e===""?(Ht().b[9][0]++,void 0):(Ht().b[9][1]++,e)})}isValid(e){if(Ht().f[3]++,Ht().s[16]++,e===void 0)return Ht().b[10][0]++,Ht().s[17]++,!0;Ht().b[10][1]++;const t=(Ht().s[18]++,+e);return Ht().s[19]++,isNaN(t)?(Ht().b[11][0]++,Ht().s[20]++,!1):(Ht().b[11][1]++,Ht().s[21]++,Ht().b[13][0]++,!isNaN(this.props.min)&&(Ht().b[13][1]++,t<this.props.min)?(Ht().b[12][0]++,Ht().s[22]++,!1):(Ht().b[12][1]++,Ht().s[23]++,Ht().b[15][0]++,!isNaN(this.props.max)&&(Ht().b[15][1]++,t>this.props.max)?(Ht().b[14][0]++,Ht().s[24]++,!1):(Ht().b[14][1]++,Ht().s[25]++,!0)))}resetValue=(Ht().s[26]++,()=>{if(Ht().f[4]++,Ht().s[27]++,this.setState({editing:!1}),Ht().s[28]++,this.state.value)Ht().b[16][1]++;else{Ht().b[16][0]++,Ht().s[29]++;return}Ht().s[30]++,this.isValid(this.state.value)?Ht().b[17][1]++:(Ht().b[17][0]++,Ht().s[31]++,this.isValid(this.props.value)?(Ht().b[18][0]++,Ht().s[32]++,this.changeValue(this.props.value),Ht().s[33]++,this.setState({dirtyValue:this.props.value})):(Ht().b[18][1]++,Ht().s[34]++,this.changeValue(void 0),Ht().s[35]++,this.setState({dirtyValue:void 0})))});onChangeRange=(Ht().s[36]++,e=>{Ht().f[5]++;let t=(Ht().s[37]++,parseFloat(e.target.value));const i=(Ht().s[38]++,this.props.rangeStep);let r=(Ht().s[39]++,t);if(Ht().s[40]++,i){Ht().b[19][0]++;const o=(Ht().s[41]++,t%i);Ht().s[42]++,this._keyboardEvent?(Ht().b[20][0]++,Ht().s[43]++,t<+this.state.dirtyValue?(Ht().b[21][0]++,Ht().s[44]++,t=this.state.value-i):(Ht().b[21][1]++,Ht().s[45]++,t=this.state.value+i),Ht().s[46]++,r=t):(Ht().b[20][1]++,Ht().s[47]++,o<i/2?(Ht().b[22][0]++,Ht().s[48]++,t=t-o):(Ht().b[22][1]++,Ht().s[49]++,t=t+(i-o)))}else Ht().b[19][1]++;Ht().s[50]++,this._keyboardEvent=!1,Ht().s[51]++,t=Math.max(this.props.min,Math.min(this.props.max,t)),Ht().s[52]++,this.setState({value:t,dirtyValue:r}),Ht().s[53]++,this.props.onChange?(Ht().b[23][0]++,Ht().s[54]++,this.props.onChange(t)):Ht().b[23][1]++});render(){if(Ht().f[6]++,Ht().s[55]++,Ht().b[25][0]++,Object.prototype.hasOwnProperty.call(this.props,"min")&&(Ht().b[25][1]++,Object.prototype.hasOwnProperty.call(this.props,"max"))&&(Ht().b[25][2]++,this.props.min!==void 0)&&(Ht().b[25][3]++,this.props.max!==void 0)&&(Ht().b[25][4]++,this.props.allowRange)){Ht().b[24][0]++;const e=(Ht().s[56]++,this.state.editing?(Ht().b[26][0]++,this.state.dirtyValue):(Ht().b[26][1]++,this.state.value)),t=(Ht().s[57]++,this.props.default===void 0?(Ht().b[27][0]++,""):(Ht().b[27][1]++,this.props.default));let i;return Ht().s[58]++,this.state.editingRange?(Ht().b[28][0]++,Ht().s[59]++,i=this.state.value):(Ht().b[28][1]++,Ht().s[60]++,i=e),Ht().s[61]++,ie.jsxs("div",{className:"maputnik-number-container",children:[ie.jsx("input",{className:"maputnik-number-range",type:"range",max:this.props.max,min:this.props.min,step:"any",spellCheck:"false",value:e===void 0?(Ht().b[29][0]++,t):(Ht().b[29][1]++,e),onChange:this.onChangeRange,onKeyDown:()=>{Ht().f[7]++,Ht().s[62]++,this._keyboardEvent=!0},onPointerDown:()=>{Ht().f[8]++,Ht().s[63]++,this.setState({editing:!0,editingRange:!0})},onPointerUp:()=>{Ht().f[9]++,Ht().s[64]++,this.setState({editing:!1,editingRange:!1})},onBlur:()=>{Ht().f[10]++,Ht().s[65]++,this.setState({editing:!1,editingRange:!1,dirtyValue:this.state.value})},"data-wd-key":this.props["data-wd-key"]+"-range"},"range"),ie.jsx("input",{type:"text",spellCheck:"false",className:"maputnik-number",placeholder:this.props.default?.toString(),value:i===void 0?(Ht().b[30][0]++,""):(Ht().b[30][1]++,i),onFocus:r=>{Ht().f[11]++,Ht().s[66]++,this.setState({editing:!0})},onChange:r=>{Ht().f[12]++,Ht().s[67]++,this.changeValue(r.target.value)},onBlur:r=>{Ht().f[13]++,Ht().s[68]++,this.setState({editing:!1}),Ht().s[69]++,this.resetValue()},"data-wd-key":this.props["data-wd-key"]+"-text"},"text")]})}else{Ht().b[24][1]++;const e=(Ht().s[70]++,this.state.editing?(Ht().b[31][0]++,this.state.dirtyValue):(Ht().b[31][1]++,this.state.value));return Ht().s[71]++,ie.jsx("input",{"aria-label":this.props["aria-label"],spellCheck:"false",className:"maputnik-number",placeholder:this.props.default?.toString(),value:e===void 0?(Ht().b[32][0]++,""):(Ht().b[32][1]++,e),onChange:t=>(Ht().f[14]++,Ht().s[72]++,this.changeValue(t.target.value)),onFocus:()=>{Ht().f[15]++,Ht().s[73]++,this.setState({editing:!0})},onBlur:this.resetValue,required:this.props.required,"data-wd-key":this.props["data-wd-key"]})}}}function Og(){var n="/home/runner/work/maputnik/maputnik/src/components/InputCheckbox.tsx",e="e85f7924976070cbab7795bce9cf0e191e4a6b5e",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputCheckbox.tsx",statementMap:{0:{start:{line:4,column:24},end:{line:6,column:3}},1:{start:{line:7,column:13},end:{line:9,column:3}},2:{start:{line:8,column:4},end:{line:8,column:43}},3:{start:{line:11,column:4},end:{line:26,column:9}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:13},end:{line:7,column:14}},loc:{start:{line:7,column:19},end:{line:9,column:3}},line:7},1:{name:"(anonymous_1)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:27,column:3}},line:10}},branchMap:{0:{loc:{start:{line:24,column:17},end:{line:24,column:53}},type:"cond-expr",locations:[{start:{line:24,column:36},end:{line:24,column:44}},{start:{line:24,column:47},end:{line:24,column:53}}],line:24}},s:{0:0,1:0,2:0,3:0},f:{0:0,1:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputCheckbox.tsx"],names:[],mappings:"AAkBW,SACL,KADK;AAlBX,OAAO,WAAW;AAQlB,qBAAqB,sBAAsB,MAAM,UAA8B;AAAA,EAC7E,OAAO,eAAe;AAAA,IACpB,OAAO;AAAA,EACT;AAAA,EAEA,WAAW,MAAM;AACf,SAAK,MAAM,SAAS,CAAC,KAAK,MAAM,KAAK;AAAA,EACvC;AAAA,EAEA,SAAS;AACP,WAAO,qBAAC,SAAI,WAAU,6BACpB;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,MAAK;AAAA,UACL,OAAO,KAAK,MAAM;AAAA,UAClB,UAAU,KAAK;AAAA,UACf,SAAS,KAAK;AAAA,UACd,SAAS,KAAK,MAAM;AAAA;AAAA,MACtB;AAAA,MACA,oBAAC,SAAI,WAAU,yBACb,8BAAC,SAAI,OAAO;AAAA,QACV,SAAS,KAAK,MAAM,QAAQ,WAAW;AAAA,MACzC,GAAG,WAAU,0BAAyB,SAAQ,aAC5C,8BAAC,UAAK,GAAE,2CAA0C,GACpD,GACF;AAAA,OACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e85f7924976070cbab7795bce9cf0e191e4a6b5e"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Og=function(){return s},s}Og();class Hse extends En.Component{static defaultProps=(Og().s[0]++,{value:!1});onChange=(Og().s[1]++,()=>{Og().f[0]++,Og().s[2]++,this.props.onChange(!this.props.value)});render(){return Og().f[1]++,Og().s[3]++,ie.jsxs("div",{className:"maputnik-checkbox-wrapper",children:[ie.jsx("input",{className:"maputnik-checkbox",type:"checkbox",style:this.props.style,onChange:this.onChange,onClick:this.onChange,checked:this.props.value}),ie.jsx("div",{className:"maputnik-checkbox-box",children:ie.jsx("svg",{style:{display:this.props.value?(Og().b[0][0]++,"inline"):(Og().b[0][1]++,"none")},className:"maputnik-checkbox-icon",viewBox:"0 0 32 32",children:ie.jsx("path",{d:"M1 14 L5 10 L13 18 L27 4 L31 8 L13 26 z"})})})]})}}function yi(){var n="/home/runner/work/maputnik/maputnik/src/components/InputArray.tsx",e="9ed81d69001830f70ea45ac1502cde5125167d89",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputArray.tsx",statementMap:{0:{start:{line:6,column:24},end:{line:9,column:3}},1:{start:{line:11,column:4},end:{line:11,column:17}},2:{start:{line:12,column:4},end:{line:16,column:6}},3:{start:{line:19,column:18},end:{line:19,column:20}},4:{start:{line:20,column:30},end:{line:20,column:62}},5:{start:{line:21,column:4},end:{line:28,column:7}},6:{start:{line:22,column:6},end:{line:27,column:7}},7:{start:{line:23,column:8},end:{line:23,column:34}},8:{start:{line:25,column:8},end:{line:25,column:34}},9:{start:{line:26,column:8},end:{line:26,column:46}},10:{start:{line:29,column:4},end:{line:32,column:6}},11:{start:{line:35,column:4},end:{line:38,column:7}},12:{start:{line:36,column:18},end:{line:36,column:26}},13:{start:{line:37,column:6},end:{line:37,column:45}},14:{start:{line:41,column:18},end:{line:41,column:43}},15:{start:{line:42,column:4},end:{line:42,column:26}},16:{start:{line:43,column:4},end:{line:51,column:7}},17:{start:{line:46,column:6},end:{line:50,column:7}},18:{start:{line:47,column:8},end:{line:47,column:35}},19:{start:{line:48,column:13},end:{line:50,column:7}},20:{start:{line:49,column:8},end:{line:49,column:36}},21:{start:{line:54,column:22},end:{line:54,column:32}},22:{start:{line:55,column:27},end:{line:57,column:6}},23:{start:{line:56,column:6},end:{line:56,column:42}},24:{start:{line:58,column:19},end:{line:84,column:6}},25:{start:{line:59,column:6},end:{line:83,column:7}},26:{start:{line:60,column:8},end:{line:70,column:10}},27:{start:{line:66,column:29},end:{line:66,column:51}},28:{start:{line:72,column:8},end:{line:82,column:10}},29:{start:{line:85,column:4},end:{line:85,column:89}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:21},end:{line:17,column:3}},line:10},1:{name:"(anonymous_1)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:48},end:{line:33,column:3}},line:18},2:{name:"(anonymous_2)",decl:{start:{line:21,column:39},end:{line:21,column:40}},loc:{start:{line:21,column:49},end:{line:28,column:5}},line:21},3:{name:"(anonymous_3)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:20},end:{line:39,column:3}},line:34},4:{name:"(anonymous_4)",decl:{start:{line:35,column:53},end:{line:35,column:54}},loc:{start:{line:35,column:63},end:{line:38,column:5}},line:35},5:{name:"(anonymous_5)",decl:{start:{line:40,column:2},end:{line:40,column:3}},loc:{start:{line:40,column:29},end:{line:52,column:3}},line:40},6:{name:"(anonymous_6)",decl:{start:{line:45,column:7},end:{line:45,column:8}},loc:{start:{line:45,column:13},end:{line:51,column:5}},line:45},7:{name:"(anonymous_7)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:11},end:{line:86,column:3}},line:53},8:{name:"(anonymous_8)",decl:{start:{line:55,column:60},end:{line:55,column:61}},loc:{start:{line:55,column:69},end:{line:57,column:5}},line:55},9:{name:"(anonymous_9)",decl:{start:{line:58,column:59},end:{line:58,column:60}},loc:{start:{line:58,column:69},end:{line:84,column:5}},line:58},10:{name:"(anonymous_10)",decl:{start:{line:66,column:22},end:{line:66,column:23}},loc:{start:{line:66,column:29},end:{line:66,column:51}},line:66}},branchMap:{0:{loc:{start:{line:22,column:6},end:{line:27,column:7}},type:"if",locations:[{start:{line:22,column:6},end:{line:27,column:7}},{start:{line:24,column:13},end:{line:27,column:7}}],line:22},1:{loc:{start:{line:37,column:15},end:{line:37,column:43}},type:"binary-expr",locations:[{start:{line:37,column:15},end:{line:37,column:29}},{start:{line:37,column:33},end:{line:37,column:43}}],line:37},2:{loc:{start:{line:46,column:6},end:{line:50,column:7}},type:"if",locations:[{start:{line:46,column:6},end:{line:50,column:7}},{start:{line:48,column:13},end:{line:50,column:7}}],line:46},3:{loc:{start:{line:46,column:10},end:{line:46,column:55}},type:"binary-expr",locations:[{start:{line:46,column:10},end:{line:46,column:32}},{start:{line:46,column:36},end:{line:46,column:55}}],line:46},4:{loc:{start:{line:48,column:13},end:{line:50,column:7}},type:"if",locations:[{start:{line:48,column:13},end:{line:50,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:48},5:{loc:{start:{line:55,column:27},end:{line:57,column:6}},type:"binary-expr",locations:[{start:{line:55,column:27},end:{line:55,column:43}},{start:{line:55,column:47},end:{line:57,column:6}}],line:55},6:{loc:{start:{line:56,column:13},end:{line:56,column:41}},type:"binary-expr",locations:[{start:{line:56,column:13},end:{line:56,column:23}},{start:{line:56,column:27},end:{line:56,column:41}}],line:56},7:{loc:{start:{line:59,column:6},end:{line:83,column:7}},type:"if",locations:[{start:{line:59,column:6},end:{line:83,column:7}},{start:{line:71,column:13},end:{line:83,column:7}}],line:59},8:{loc:{start:{line:63,column:21},end:{line:63,column:91}},type:"cond-expr",locations:[{start:{line:63,column:61},end:{line:63,column:67}},{start:{line:63,column:70},end:{line:63,column:91}}],line:63},9:{loc:{start:{line:63,column:21},end:{line:63,column:58}},type:"binary-expr",locations:[{start:{line:63,column:21},end:{line:63,column:35}},{start:{line:63,column:39},end:{line:63,column:58}}],line:63},10:{loc:{start:{line:65,column:22},end:{line:65,column:51}},type:"cond-expr",locations:[{start:{line:65,column:39},end:{line:65,column:43}},{start:{line:65,column:46},end:{line:65,column:51}}],line:65},11:{loc:{start:{line:67,column:26},end:{line:67,column:70}},type:"binary-expr",locations:[{start:{line:67,column:26},end:{line:67,column:50}},{start:{line:67,column:54},end:{line:67,column:70}}],line:67},12:{loc:{start:{line:75,column:21},end:{line:75,column:91}},type:"cond-expr",locations:[{start:{line:75,column:61},end:{line:75,column:67}},{start:{line:75,column:70},end:{line:75,column:91}}],line:75},13:{loc:{start:{line:75,column:21},end:{line:75,column:58}},type:"binary-expr",locations:[{start:{line:75,column:21},end:{line:75,column:35}},{start:{line:75,column:39},end:{line:75,column:58}}],line:75},14:{loc:{start:{line:77,column:22},end:{line:77,column:51}},type:"cond-expr",locations:[{start:{line:77,column:39},end:{line:77,column:43}},{start:{line:77,column:46},end:{line:77,column:51}}],line:77},15:{loc:{start:{line:79,column:26},end:{line:79,column:70}},type:"binary-expr",locations:[{start:{line:79,column:26},end:{line:79,column:50}},{start:{line:79,column:54},end:{line:79,column:70}}],line:79}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputArray.tsx"],names:[],mappings:"AA0Fe;AA1Ff,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AAiBxB,qBAAqB,mBAAmB,MAAM,UAA4C;AAAA,EACxF,OAAO,eAAe;AAAA,IACpB,OAAO,CAAC;AAAA,IACR,SAAS,CAAC;AAAA,EACZ;AAAA,EAEA,YAAa,OAAwB;AACnC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,OAAO,KAAK,MAAM,MAAM,MAAM,CAAC;AAAA;AAAA,MAE/B,mBAAmB,KAAK,MAAM,MAAM,MAAM,CAAC;AAAA,IAC7C;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAAkC,OAAwB;AACxF,UAAM,QAAe,CAAC;AACtB,UAAM,oBAAoB,MAAM,kBAAkB,MAAM,CAAC;AAEzD,UAAM,MAAM,MAAM,EAAE,KAAK,IAAI,EAAE,IAAI,CAAC,GAAG,MAAM;AAC3C,UAAI,MAAM,MAAM,CAAC,MAAM,MAAM,kBAAkB,CAAC,GAAG;AACjD,cAAM,CAAC,IAAI,MAAM,MAAM,CAAC;AAAA,MAC1B,OACK;AACH,cAAM,CAAC,IAAI,MAAM,MAAM,CAAC;AACxB,0BAAkB,CAAC,IAAI,MAAM,MAAM,CAAC;AAAA,MACtC;AAAA,IACF,CAAC;AAED,WAAO;AAAA,MACL;AAAA,MACA;AAAA,IACF;AAAA,EACF;AAAA,EAEA,WAAW,OAAkB;AAC3B,WAAO,MAAM,KAAK,MAAM,MAAM,EAAE,KAAK,IAAI,EAAE,MAAM,CAAC,GAAG,MAAM;AACzD,YAAM,MAAM,MAAM,CAAC;AACnB,aAAO,EAAE,QAAQ,UAAa,QAAQ;AAAA,IACxC,CAAC;AAAA,EACH;AAAA,EAEA,YAAY,KAAa,UAAuC;AAC9D,UAAM,QAAQ,KAAK,MAAM,MAAM,MAAM,CAAC;AACtC,UAAM,GAAG,IAAI;AAEb,SAAK,SAAS;AAAA,MACZ;AAAA,IACF,GAAG,MAAM;AACP,UAAI,KAAK,WAAW,KAAK,KAAK,KAAK,MAAM,UAAU;AACjD,aAAK,MAAM,SAAS,KAAK;AAAA,MAC3B,WACS,KAAK,MAAM,UAAS;AAE3B,aAAK,MAAM,SAAS,MAAS;AAAA,MAC/B;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,MAAK,IAAI,KAAK;AAErB,UAAM,iBACJ,MAAM,SAAS,KACf,CAAC,MAAM,MAAM,SAAO;AAClB,aAAQ,QAAQ,MAAM,QAAQ;AAAA,IAChC,CAAC;AAGH,UAAM,SAAS,MAAM,KAAK,MAAM,MAAM,EAAE,KAAK,IAAI,EAAE,IAAI,CAAC,GAAG,MAAM;AAC/D,UAAG,KAAK,MAAM,SAAS,UAAU;AAC/B,eAAO;AAAA,UAAC;AAAA;AAAA,YAEN,SAAS,kBAAkB,CAAC,KAAK,MAAM,UAAU,SAAY,KAAK,MAAM,QAAQ,CAAC;AAAA,YACjF,OAAO,MAAM,CAAC;AAAA,YACd,UAAU,iBAAiB,OAAO;AAAA,YAClC,UAAU,CAAC,MAAM,KAAK,YAAY,GAAG,CAAC;AAAA,YACtC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,UAL9C;AAAA,QAMP;AAAA,MACF,OAAO;AACL,eAAO;AAAA,UAAC;AAAA;AAAA,YAEN,SAAS,kBAAkB,CAAC,KAAK,MAAM,UAAU,SAAY,KAAK,MAAM,QAAQ,CAAC;AAAA,YACjF,OAAO,MAAM,CAAC;AAAA,YACd,UAAU,iBAAiB,OAAO;AAAA,YAClC,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,UAL9C;AAAA,QAMP;AAAA,MACF;AAAA,IACF,CAAC;AAED,WACE,oBAAC,SAAI,WAAU,kBACZ,kBACH;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"9ed81d69001830f70ea45ac1502cde5125167d89"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return yi=function(){return s},s}yi();class KD extends En.Component{static defaultProps=(yi().s[0]++,{value:[],default:[]});constructor(e){yi().f[0]++,yi().s[1]++,super(e),yi().s[2]++,this.state={value:this.props.value.slice(0),initialPropsValue:this.props.value.slice(0)}}static getDerivedStateFromProps(e,t){yi().f[1]++;const i=(yi().s[3]++,[]),r=(yi().s[4]++,t.initialPropsValue.slice(0));return yi().s[5]++,Array(e.length).fill(null).map((o,s)=>{yi().f[2]++,yi().s[6]++,e.value[s]===t.initialPropsValue[s]?(yi().b[0][0]++,yi().s[7]++,i[s]=t.value[s]):(yi().b[0][1]++,yi().s[8]++,i[s]=t.value[s],yi().s[9]++,r[s]=t.value[s])}),yi().s[10]++,{value:i,initialPropsValue:r}}isComplete(e){return yi().f[3]++,yi().s[11]++,Array(this.props.length).fill(null).every((t,i)=>{yi().f[4]++;const r=(yi().s[12]++,e[i]);return yi().s[13]++,yi().b[1][0]++,!(r===void 0||(yi().b[1][1]++,r===""))})}changeValue(e,t){yi().f[5]++;const i=(yi().s[14]++,this.state.value.slice(0));yi().s[15]++,i[e]=t,yi().s[16]++,this.setState({value:i},()=>{yi().f[6]++,yi().s[17]++,yi().b[3][0]++,this.isComplete(i)&&(yi().b[3][1]++,this.props.onChange)?(yi().b[2][0]++,yi().s[18]++,this.props.onChange(i)):(yi().b[2][1]++,yi().s[19]++,this.props.onChange?(yi().b[4][0]++,yi().s[20]++,this.props.onChange(void 0)):yi().b[4][1]++)})}render(){yi().f[7]++;const{value:e}=(yi().s[21]++,this.state),t=(yi().s[22]++,yi().b[5][0]++,e.length>0&&(yi().b[5][1]++,!e.every(r=>(yi().f[8]++,yi().s[23]++,yi().b[6][0]++,r===""||(yi().b[6][1]++,r===void 0))))),i=(yi().s[24]++,Array(this.props.length).fill(null).map((r,o)=>(yi().f[9]++,yi().s[25]++,this.props.type==="number"?(yi().b[7][0]++,yi().s[26]++,ie.jsx(m1,{default:(yi().b[9][0]++,t||(yi().b[9][1]++,!this.props.default)?(yi().b[8][0]++,void 0):(yi().b[8][1]++,this.props.default[o])),value:e[o],required:t?(yi().b[10][0]++,!0):(yi().b[10][1]++,!1),onChange:s=>(yi().f[10]++,yi().s[27]++,this.changeValue(o,s)),"aria-label":(yi().b[11][0]++,this.props["aria-label"]||(yi().b[11][1]++,this.props.label))},o)):(yi().b[7][1]++,yi().s[28]++,ie.jsx(Bm,{default:(yi().b[13][0]++,t||(yi().b[13][1]++,!this.props.default)?(yi().b[12][0]++,void 0):(yi().b[12][1]++,this.props.default[o])),value:e[o],required:t?(yi().b[14][0]++,!0):(yi().b[14][1]++,!1),onChange:this.changeValue.bind(this,o),"aria-label":(yi().b[15][0]++,this.props["aria-label"]||(yi().b[15][1]++,this.props.label))},o)))));return yi().s[29]++,ie.jsx("div",{className:"maputnik-array",children:i})}}function vu(){var n="/home/runner/work/maputnik/maputnik/src/components/InputMultiInput.tsx",e="bdd7d8430a2c43402b1b125b74a343e39aea6a6c",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputMultiInput.tsx",statementMap:{0:{start:{line:6,column:18},end:{line:6,column:36}},1:{start:{line:7,column:4},end:{line:9,column:5}},2:{start:{line:8,column:6},end:{line:8,column:43}},3:{start:{line:8,column:35},end:{line:8,column:41}},4:{start:{line:10,column:26},end:{line:10,column:59}},5:{start:{line:11,column:19},end:{line:32,column:6}},6:{start:{line:12,column:6},end:{line:31,column:8}},7:{start:{line:22,column:34},end:{line:22,column:58}},8:{start:{line:33,column:4},end:{line:33,column:140}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:34,column:3}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:8,column:28},end:{line:8,column:29}},loc:{start:{line:8,column:35},end:{line:8,column:41}},line:8},2:{name:"(anonymous_2)",decl:{start:{line:11,column:31},end:{line:11,column:32}},loc:{start:{line:11,column:49},end:{line:32,column:5}},line:11},3:{name:"(anonymous_3)",decl:{start:{line:22,column:26},end:{line:22,column:27}},loc:{start:{line:22,column:34},end:{line:22,column:58}},line:22}},branchMap:{0:{loc:{start:{line:7,column:4},end:{line:9,column:5}},type:"if",locations:[{start:{line:7,column:4},end:{line:9,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:7},1:{loc:{start:{line:7,column:8},end:{line:7,column:56}},type:"binary-expr",locations:[{start:{line:7,column:8},end:{line:7,column:26}},{start:{line:7,column:30},end:{line:7,column:56}}],line:7},2:{loc:{start:{line:10,column:26},end:{line:10,column:59}},type:"binary-expr",locations:[{start:{line:10,column:26},end:{line:10,column:42}},{start:{line:10,column:46},end:{line:10,column:59}}],line:10}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},f:{0:0,1:0,2:0,3:0},b:{0:[0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputMultiInput.tsx"],names:[],mappings:"AAoBa,SAIL,KAJK;AApBb,OAAO,WAAW;AAClB,OAAO,gBAAgB;AAUvB,qBAAqB,wBAAwB,MAAM,UAAgC;AAAA,EACjF,SAAS;AACP,QAAI,UAAU,KAAK,MAAM;AACzB,QAAG,QAAQ,SAAS,KAAK,CAAC,MAAM,QAAQ,QAAQ,CAAC,CAAC,GAAG;AACnD,gBAAU,QAAQ,IAAI,OAAK,CAAC,GAAG,CAAC,CAAC;AAAA,IACnC;AAEA,UAAM,gBAAgB,KAAK,MAAM,SAAS,QAAQ,CAAC,EAAE,CAAC;AACtD,UAAM,SAAS,QAAQ,IAAI,CAAC,CAAC,KAAK,KAAK,MAAK;AAC1C,aAAO;AAAA,QAAC;AAAA;AAAA,UAEN,WAAW,WAAW,mBAAmB,4BAA4B,EAAC,4BAA4B,QAAQ,cAAa,CAAC;AAAA,UAExH;AAAA;AAAA,cAAC;AAAA;AAAA,gBAAM,MAAK;AAAA,gBACV,MAAM,KAAK,MAAM;AAAA,gBACjB,UAAU,QAAM,KAAK,MAAM,SAAS,GAAG;AAAA,gBACvC,OAAO;AAAA,gBACP,SAAS,QAAQ;AAAA;AAAA,YACnB;AAAA,YACC;AAAA;AAAA;AAAA,QATI;AAAA,MAUP;AAAA,IACF,CAAC;AAED,WAAO,oBAAC,cAAS,WAAU,wBAAuB,cAAY,KAAK,MAAM,YAAY,GAClF,kBACH;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"bdd7d8430a2c43402b1b125b74a343e39aea6a6c"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return vu=function(){return s},s}vu();class ORe extends En.Component{render(){vu().f[0]++;let e=(vu().s[0]++,this.props.options);vu().s[1]++,vu().b[1][0]++,e.length>0&&(vu().b[1][1]++,!Array.isArray(e[0]))?(vu().b[0][0]++,vu().s[2]++,e=e.map(r=>(vu().f[1]++,vu().s[3]++,[r,r]))):vu().b[0][1]++;const t=(vu().s[4]++,vu().b[2][0]++,this.props.value||(vu().b[2][1]++,e[0][0])),i=(vu().s[5]++,e.map(([r,o])=>(vu().f[2]++,vu().s[6]++,ie.jsxs("label",{className:u0("maputnik-button","maputnik-radio-as-button",{"maputnik-button-selected":r===t}),children:[ie.jsx("input",{type:"radio",name:this.props.name,onChange:s=>(vu().f[3]++,vu().s[7]++,this.props.onChange(r)),value:r,checked:r===t}),o]},r))));return vu().s[8]++,ie.jsx("fieldset",{className:"maputnik-multibutton","aria-label":this.props["aria-label"],children:i})}}function tl(){var n="/home/runner/work/maputnik/maputnik/src/components/InputEnum.tsx",e="d905b5da4422f2b84d44f87b04fda3de421542f5",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputEnum.tsx",statementMap:{0:{start:{line:6,column:12},end:{line:6,column:13}},1:{start:{line:7,column:2},end:{line:9,column:5}},2:{start:{line:8,column:4},end:{line:8,column:24}},3:{start:{line:10,column:2},end:{line:10,column:13}},4:{start:{line:14,column:54},end:{line:14,column:64}},5:{start:{line:15,column:4},end:{line:36,column:5}},6:{start:{line:16,column:6},end:{line:25,column:8}},7:{start:{line:27,column:6},end:{line:35,column:8}}},fnMap:{0:{name:"optionsLabelLength",decl:{start:{line:5,column:9},end:{line:5,column:27}},loc:{start:{line:5,column:37},end:{line:11,column:1}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:7,column:18},end:{line:7,column:19}},loc:{start:{line:7,column:34},end:{line:9,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:13,column:2},end:{line:13,column:3}},loc:{start:{line:13,column:11},end:{line:37,column:3}},line:13}},branchMap:{0:{loc:{start:{line:15,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:15,column:4},end:{line:36,column:5}},{start:{line:26,column:11},end:{line:36,column:5}}],line:15},1:{loc:{start:{line:15,column:8},end:{line:15,column:64}},type:"binary-expr",locations:[{start:{line:15,column:8},end:{line:15,column:27}},{start:{line:15,column:31},end:{line:15,column:64}}],line:15},2:{loc:{start:{line:21,column:17},end:{line:21,column:44}},type:"binary-expr",locations:[{start:{line:21,column:17},end:{line:21,column:22}},{start:{line:21,column:26},end:{line:21,column:44}}],line:21},3:{loc:{start:{line:23,column:24},end:{line:23,column:57}},type:"binary-expr",locations:[{start:{line:23,column:24},end:{line:23,column:48}},{start:{line:23,column:52},end:{line:23,column:57}}],line:23},4:{loc:{start:{line:31,column:17},end:{line:31,column:44}},type:"binary-expr",locations:[{start:{line:31,column:17},end:{line:31,column:22}},{start:{line:31,column:26},end:{line:31,column:44}}],line:31},5:{loc:{start:{line:33,column:24},end:{line:33,column:57}},type:"binary-expr",locations:[{start:{line:33,column:24},end:{line:33,column:48}},{start:{line:33,column:52},end:{line:33,column:57}}],line:33}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},f:{0:0,1:0,2:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputEnum.tsx"],names:[],mappings:"AAgCa;AAhCb,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,qBAAqB;AAG5B,SAAS,mBAAmB,SAAgB;AAC1C,MAAI,MAAM;AACV,UAAQ,QAAQ,CAAC,CAAC,GAAG,KAAK,MAAM;AAC9B,WAAO,MAAM;AAAA,EACf,CAAC;AACD,SAAO;AACT;AAgBA,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,SAAS;AACP,UAAM,EAAC,SAAS,OAAO,UAAU,MAAM,MAAK,IAAI,KAAK;AAErD,QAAG,QAAQ,UAAU,KAAK,mBAAmB,OAAO,KAAK,IAAI;AAC3D,aAAO;AAAA,QAAC;AAAA;AAAA,UACN;AAAA,UACA;AAAA,UACA,OAAQ,SAAS,KAAK,MAAM;AAAA,UAC5B;AAAA,UACA,cAAY,KAAK,MAAM,YAAY,KAAK;AAAA;AAAA,MAC1C;AAAA,IACF,OAAO;AACL,aAAO;AAAA,QAAC;AAAA;AAAA,UACN;AAAA,UACA,OAAQ,SAAS,KAAK,MAAM;AAAA,UAC5B;AAAA,UACA,cAAY,KAAK,MAAM,YAAY,KAAK;AAAA;AAAA,MAC1C;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d905b5da4422f2b84d44f87b04fda3de421542f5"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return tl=function(){return s},s}tl();function BRe(n){tl().f[0]++;let e=(tl().s[0]++,0);return tl().s[1]++,n.forEach(([t,i])=>{tl().f[1]++,tl().s[2]++,e+=i.length}),tl().s[3]++,e}class SL extends En.Component{render(){tl().f[2]++;const{options:e,value:t,onChange:i,name:r,label:o}=(tl().s[4]++,this.props);return tl().s[5]++,tl().b[1][0]++,e.length<=3&&(tl().b[1][1]++,BRe(e)<=20)?(tl().b[0][0]++,tl().s[6]++,ie.jsx(ORe,{name:r,options:e,value:(tl().b[2][0]++,t||(tl().b[2][1]++,this.props.default)),onChange:i,"aria-label":(tl().b[3][0]++,this.props["aria-label"]||(tl().b[3][1]++,o))})):(tl().b[0][1]++,tl().s[7]++,ie.jsx(rC,{options:e,value:(tl().b[4][0]++,t||(tl().b[4][1]++,this.props.default)),onChange:i,"aria-label":(tl().b[5][0]++,this.props["aria-label"]||(tl().b[5][1]++,o))}))}}function nx(){var n="/home/runner/work/maputnik/maputnik/src/components/SmallError.tsx",e="f693e5bbe9d7e0de15b6fd90f13b77a5ebfddf0e",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/SmallError.tsx",statementMap:{0:{start:{line:7,column:14},end:{line:7,column:26}},1:{start:{line:8,column:4},end:{line:12,column:9}},2:{start:{line:15,column:19},end:{line:15,column:56}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:13,column:3}},line:6}},branchMap:{},s:{0:0,1:0,2:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/SmallError.tsx"],names:[],mappings:"AAaM;AAbN,OAAO,WAAW;AAClB,SAA+B,uBAAuB;AACtD,OAAO;AAOP,MAAM,2BAA2B,MAAM,UAAmC;AAAA,EACxE,SAAU;AACR,UAAM,IAAI,KAAK,MAAM;AACrB,WACE,qBAAC,SAAI,WAAU,cACZ;AAAA,QAAE,QAAQ;AAAA,MAAE;AAAA,MAAE,KAAK,MAAM;AAAA,OAC5B;AAAA,EAEJ;AACF;AAEA,MAAM,aAAa,gBAAgB,EAAE,kBAAkB;AACvD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f693e5bbe9d7e0de15b6fd90f13b77a5ebfddf0e"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return nx=function(){return s},s}nx();class IRe extends En.Component{render(){nx().f[0]++;const e=(nx().s[0]++,this.props.t);return nx().s[1]++,ie.jsxs("div",{className:"SmallError",children:[e("Error:")," ",this.props.children]})}}const nT=(nx().s[2]++,No()(IRe));function Sr(){var n="/home/runner/work/maputnik/maputnik/src/components/InputUrl.tsx",e="447f54dcea7174dfde20df5fd4ad658ec6e8baa0",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputUrl.tsx",statementMap:{0:{start:{line:7,column:2},end:{line:9,column:3}},1:{start:{line:8,column:4},end:{line:8,column:11}},2:{start:{line:11,column:22},end:{line:18,column:3}},3:{start:{line:12,column:4},end:{line:17,column:5}},4:{start:{line:13,column:21},end:{line:13,column:34}},5:{start:{line:14,column:6},end:{line:14,column:29}},6:{start:{line:16,column:6},end:{line:16,column:20}},7:{start:{line:19,column:19},end:{line:19,column:35}},8:{start:{line:20,column:16},end:{line:20,column:53}},9:{start:{line:21,column:2},end:{line:41,column:3}},10:{start:{line:22,column:4},end:{line:34,column:5}},11:{start:{line:23,column:6},end:{line:26,column:14}},12:{start:{line:28,column:6},end:{line:33,column:14}},13:{start:{line:35,column:9},end:{line:41,column:3}},14:{start:{line:36,column:4},end:{line:40,column:12}},15:{start:{line:42,column:2},end:{line:42,column:15}},16:{start:{line:45,column:24},end:{line:48,column:3}},17:{start:{line:50,column:4},end:{line:50,column:17}},18:{start:{line:51,column:4},end:{line:53,column:6}},19:{start:{line:55,column:12},end:{line:60,column:3}},20:{start:{line:56,column:4},end:{line:58,column:7}},21:{start:{line:59,column:4},end:{line:59,column:52}},22:{start:{line:59,column:28},end:{line:59,column:52}},23:{start:{line:61,column:13},end:{line:66,column:3}},24:{start:{line:62,column:4},end:{line:64,column:7}},25:{start:{line:65,column:4},end:{line:65,column:29}},26:{start:{line:68,column:4},end:{line:79,column:9}},27:{start:{line:82,column:17},end:{line:82,column:52}}},fnMap:{0:{name:"validate",decl:{start:{line:6,column:9},end:{line:6,column:17}},loc:{start:{line:6,column:26},end:{line:43,column:1}},line:6},1:{name:"(anonymous_1)",decl:{start:{line:11,column:22},end:{line:11,column:23}},loc:{start:{line:11,column:32},end:{line:18,column:3}},line:11},2:{name:"(anonymous_2)",decl:{start:{line:46,column:13},end:{line:46,column:14}},loc:{start:{line:46,column:19},end:{line:47,column:5}},line:46},3:{name:"(anonymous_3)",decl:{start:{line:49,column:2},end:{line:49,column:3}},loc:{start:{line:49,column:21},end:{line:54,column:3}},line:49},4:{name:"(anonymous_4)",decl:{start:{line:55,column:12},end:{line:55,column:13}},loc:{start:{line:55,column:21},end:{line:60,column:3}},line:55},5:{name:"(anonymous_5)",decl:{start:{line:61,column:13},end:{line:61,column:14}},loc:{start:{line:61,column:22},end:{line:66,column:3}},line:61},6:{name:"(anonymous_6)",decl:{start:{line:67,column:2},end:{line:67,column:3}},loc:{start:{line:67,column:11},end:{line:80,column:3}},line:67}},branchMap:{0:{loc:{start:{line:7,column:2},end:{line:9,column:3}},type:"if",locations:[{start:{line:7,column:2},end:{line:9,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:7},1:{loc:{start:{line:21,column:2},end:{line:41,column:3}},type:"if",locations:[{start:{line:21,column:2},end:{line:41,column:3}},{start:{line:35,column:9},end:{line:41,column:3}}],line:21},2:{loc:{start:{line:22,column:4},end:{line:34,column:5}},type:"if",locations:[{start:{line:22,column:4},end:{line:34,column:5}},{start:{line:27,column:11},end:{line:34,column:5}}],line:22},3:{loc:{start:{line:35,column:9},end:{line:41,column:3}},type:"if",locations:[{start:{line:35,column:9},end:{line:41,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:35},4:{loc:{start:{line:35,column:13},end:{line:35,column:86}},type:"binary-expr",locations:[{start:{line:35,column:13},end:{line:35,column:21}},{start:{line:35,column:25},end:{line:35,column:45}},{start:{line:35,column:49},end:{line:35,column:86}}],line:35},5:{loc:{start:{line:59,column:4},end:{line:59,column:52}},type:"if",locations:[{start:{line:59,column:4},end:{line:59,column:52}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:59}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0],5:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputUrl.tsx"],names:["url"],mappings:"AA4BU,SAAoC,KAApC;AA5BV,OAAO,WAAyB;AAChC,OAAO,iBAAiB;AACxB,OAAO,gBAAgB;AACvB,SAAS,OAA6B,uBAAuB;AAG7D,SAAS,SAAS,KAAa,GAAuC;AACpE,MAAI,QAAQ,IAAI;AACd;AAAA,EACF;AAEA,MAAI;AACJ,QAAM,cAAc,CAACA,SAAgB;AACnC,QAAI;AACF,YAAM,SAAS,IAAI,IAAIA,IAAG;AAC1B,aAAO,OAAO;AAAA,IAChB,SACO,MAAM;AACX,aAAO;AAAA,IACT;AAAA,EACF;AACA,QAAM,WAAW,YAAY,GAAG;AAChC,QAAM,QAAQ,OAAO,SAAS,aAAa;AAE3C,MAAI,CAAC,UAAU;AACb,QAAI,OAAO;AACT,cACE,oBAAC,cACC,+BAAC,SAAM,GAAM;AAAA;AAAA,QAAuB,oBAAC,UAAK,sBAAQ;AAAA,SAAO,GAC3D;AAAA,IAEJ,OAAO;AACL,cACE,oBAAC,cACC,+BAAC,SAAM,GAAM;AAAA;AAAA,QAAuB,oBAAC,UAAK,qBAAO;AAAA,QAAO;AAAA,QAAI,oBAAC,UAAK,sBAAQ;AAAA,SAAO,GACnF;AAAA,IAEJ;AAAA,EACF,WAEE,YACA,aAAa,WACb,OAAO,SAAS,aAAa,UAC7B;AACA,YACE,oBAAC,cACC,+BAAC,SAAM,GAAM;AAAA;AAAA,MACwE,oBAAC,UAAK,sBAAQ;AAAA,MAAO;AAAA,OAC1G,GACF;AAAA,EAEJ;AAEA,SAAO;AACT;AAsBA,MAAM,yBAAyB,MAAM,UAAgD;AAAA,EACnF,OAAO,eAAe;AAAA,IACpB,SAAS,MAAM;AAAA,IAAC;AAAA,EAClB;AAAA,EAEA,YAAa,OAA8B;AACzC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,OAAO,SAAS,MAAM,OAAO,MAAM,CAAC;AAAA,IACtC;AAAA,EACF;AAAA,EAEA,UAAU,CAAC,QAAgB;AACzB,SAAK,SAAS;AAAA,MACZ,OAAO,SAAS,KAAK,KAAK,MAAM,CAAC;AAAA,IACnC,CAAC;AACD,QAAI,KAAK,MAAM,QAAS,MAAK,MAAM,QAAQ,GAAG;AAAA,EAChD;AAAA,EAEA,WAAW,CAAC,QAAgB;AAC1B,SAAK,SAAS;AAAA,MACZ,OAAO,SAAS,KAAK,KAAK,MAAM,CAAC;AAAA,IACnC,CAAC;AACD,SAAK,MAAM,SAAS,GAAG;AAAA,EACzB;AAAA,EAEA,SAAU;AACR,WACE,qBAAC,SACC;AAAA;AAAA,QAAC;AAAA;AAAA,UACE,GAAG,KAAK;AAAA,UACT,SAAS,KAAK;AAAA,UACd,UAAU,KAAK;AAAA,UACf,cAAY,KAAK,MAAM,YAAY;AAAA;AAAA,MACrC;AAAA,MACC,KAAK,MAAM;AAAA,OACd;AAAA,EAEJ;AACF;AAEA,MAAM,WAAW,gBAAgB,EAAE,gBAAgB;AACnD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"447f54dcea7174dfde20df5fd4ad658ec6e8baa0"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Sr=function(){return s},s}Sr();function iT(n,e){if(Sr().f[0]++,Sr().s[0]++,n===""){Sr().b[0][0]++,Sr().s[1]++;return}else Sr().b[0][1]++;let t;Sr().s[2]++;const i=s=>{Sr().f[1]++,Sr().s[3]++;try{const a=(Sr().s[4]++,new URL(s));return Sr().s[5]++,a.protocol}catch{Sr().s[6]++;return}},r=(Sr().s[7]++,i(n)),o=(Sr().s[8]++,window.location.protocol==="https:");return Sr().s[9]++,r?(Sr().b[1][1]++,Sr().s[13]++,Sr().b[4][0]++,r&&(Sr().b[4][1]++,r==="http:")&&(Sr().b[4][2]++,window.location.protocol==="https:")?(Sr().b[3][0]++,Sr().s[14]++,t=ie.jsx(nT,{children:ie.jsxs(Cb,{t:e,children:["CORS policy won't allow fetching resources served over http from https, use a ",ie.jsx("code",{children:"https://"})," domain"]})})):Sr().b[3][1]++):(Sr().b[1][0]++,Sr().s[10]++,o?(Sr().b[2][0]++,Sr().s[11]++,t=ie.jsx(nT,{children:ie.jsxs(Cb,{t:e,children:["Must provide protocol: ",ie.jsx("code",{children:"https://"})]})})):(Sr().b[2][1]++,Sr().s[12]++,t=ie.jsx(nT,{children:ie.jsxs(Cb,{t:e,children:["Must provide protocol: ",ie.jsx("code",{children:"http://"})," or ",ie.jsx("code",{children:"https://"})]})}))),Sr().s[15]++,t}class kRe extends En.Component{static defaultProps=(Sr().s[16]++,{onInput:()=>{Sr().f[2]++}});constructor(e){Sr().f[3]++,Sr().s[17]++,super(e),Sr().s[18]++,this.state={error:iT(e.value,e.t)}}onInput=(Sr().s[19]++,e=>{Sr().f[4]++,Sr().s[20]++,this.setState({error:iT(e,this.props.t)}),Sr().s[21]++,this.props.onInput?(Sr().b[5][0]++,Sr().s[22]++,this.props.onInput(e)):Sr().b[5][1]++});onChange=(Sr().s[23]++,e=>{Sr().f[5]++,Sr().s[24]++,this.setState({error:iT(e,this.props.t)}),Sr().s[25]++,this.props.onChange(e)});render(){return Sr().f[6]++,Sr().s[26]++,ie.jsxs("div",{children:[ie.jsx(Bm,{...this.props,onInput:this.onInput,onChange:this.onChange,"aria-label":this.props["aria-label"]}),this.state.error]})}}const EL=(Sr().s[27]++,No()(kRe));function Hn(){var n="/home/runner/work/maputnik/maputnik/src/components/InputDynamicArray.tsx",e="705ac9c8c3dcb0aff320a53fac9b80bc280b1cbf",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputDynamicArray.tsx",statementMap:{0:{start:{line:15,column:19},end:{line:15,column:39}},1:{start:{line:16,column:4},end:{line:16,column:27}},2:{start:{line:17,column:4},end:{line:17,column:57}},3:{start:{line:17,column:29},end:{line:17,column:57}},4:{start:{line:20,column:4},end:{line:20,column:56}},5:{start:{line:22,column:13},end:{line:38,column:3}},6:{start:{line:23,column:19},end:{line:23,column:39}},7:{start:{line:24,column:4},end:{line:36,column:5}},8:{start:{line:25,column:6},end:{line:25,column:21}},9:{start:{line:26,column:11},end:{line:36,column:5}},10:{start:{line:27,column:6},end:{line:27,column:22}},11:{start:{line:28,column:11},end:{line:36,column:5}},12:{start:{line:29,column:28},end:{line:29,column:38}},13:{start:{line:30,column:27},end:{line:30,column:59}},14:{start:{line:31,column:6},end:{line:31,column:32}},15:{start:{line:32,column:11},end:{line:36,column:5}},16:{start:{line:33,column:6},end:{line:33,column:29}},17:{start:{line:35,column:6},end:{line:35,column:22}},18:{start:{line:37,column:4},end:{line:37,column:57}},19:{start:{line:37,column:29},end:{line:37,column:57}},20:{start:{line:40,column:19},end:{line:40,column:39}},21:{start:{line:41,column:4},end:{line:41,column:31}},22:{start:{line:42,column:4},end:{line:42,column:86}},23:{start:{line:42,column:29},end:{line:42,column:86}},24:{start:{line:45,column:14},end:{line:45,column:26}},25:{start:{line:46,column:22},end:{line:46,column:77}},26:{start:{line:47,column:19},end:{line:116,column:6}},27:{start:{line:48,column:45},end:{line:54,column:7}},28:{start:{line:56,column:6},end:{line:103,column:7}},29:{start:{line:57,column:8},end:{line:64,column:10}},30:{start:{line:65,column:13},end:{line:103,column:7}},31:{start:{line:66,column:8},end:{line:73,column:10}},32:{start:{line:74,column:13},end:{line:103,column:7}},33:{start:{line:75,column:24},end:{line:75,column:99}},34:{start:{line:75,column:78},end:{line:75,column:98}},35:{start:{line:76,column:8},end:{line:84,column:10}},36:{start:{line:85,column:13},end:{line:103,column:7}},37:{start:{line:86,column:8},end:{line:93,column:10}},38:{start:{line:95,column:8},end:{line:102,column:10}},39:{start:{line:104,column:6},end:{line:115,column:8}},40:{start:{line:117,column:4},end:{line:127,column:9}},41:{start:{line:130,column:26},end:{line:130,column:70}},42:{start:{line:134,column:14},end:{line:134,column:26}},43:{start:{line:135,column:4},end:{line:148,column:6}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:29},end:{line:18,column:3}},line:14},1:{name:"(anonymous_1)",decl:{start:{line:19,column:2},end:{line:19,column:3}},loc:{start:{line:19,column:15},end:{line:21,column:3}},line:19},2:{name:"(anonymous_2)",decl:{start:{line:22,column:13},end:{line:22,column:14}},loc:{start:{line:22,column:19},end:{line:38,column:3}},line:22},3:{name:"(anonymous_3)",decl:{start:{line:39,column:2},end:{line:39,column:3}},loc:{start:{line:39,column:24},end:{line:43,column:3}},line:39},4:{name:"(anonymous_4)",decl:{start:{line:44,column:2},end:{line:44,column:3}},loc:{start:{line:44,column:11},end:{line:128,column:3}},line:44},5:{name:"(anonymous_5)",decl:{start:{line:47,column:35},end:{line:47,column:36}},loc:{start:{line:47,column:45},end:{line:116,column:5}},line:47},6:{name:"(anonymous_6)",decl:{start:{line:75,column:70},end:{line:75,column:71}},loc:{start:{line:75,column:78},end:{line:75,column:98}},line:75},7:{name:"(anonymous_7)",decl:{start:{line:133,column:2},end:{line:133,column:3}},loc:{start:{line:133,column:11},end:{line:149,column:3}},line:133}},branchMap:{0:{loc:{start:{line:17,column:4},end:{line:17,column:57}},type:"if",locations:[{start:{line:17,column:4},end:{line:17,column:57}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:17},1:{loc:{start:{line:20,column:11},end:{line:20,column:55}},type:"binary-expr",locations:[{start:{line:20,column:11},end:{line:20,column:27}},{start:{line:20,column:31},end:{line:20,column:49}},{start:{line:20,column:53},end:{line:20,column:55}}],line:20},2:{loc:{start:{line:24,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:24,column:4},end:{line:36,column:5}},{start:{line:26,column:11},end:{line:36,column:5}}],line:24},3:{loc:{start:{line:26,column:11},end:{line:36,column:5}},type:"if",locations:[{start:{line:26,column:11},end:{line:36,column:5}},{start:{line:28,column:11},end:{line:36,column:5}}],line:26},4:{loc:{start:{line:28,column:11},end:{line:36,column:5}},type:"if",locations:[{start:{line:28,column:11},end:{line:36,column:5}},{start:{line:32,column:11},end:{line:36,column:5}}],line:28},5:{loc:{start:{line:32,column:11},end:{line:36,column:5}},type:"if",locations:[{start:{line:32,column:11},end:{line:36,column:5}},{start:{line:34,column:11},end:{line:36,column:5}}],line:32},6:{loc:{start:{line:37,column:4},end:{line:37,column:57}},type:"if",locations:[{start:{line:37,column:4},end:{line:37,column:57}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},7:{loc:{start:{line:42,column:4},end:{line:42,column:86}},type:"if",locations:[{start:{line:42,column:4},end:{line:42,column:86}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:42},8:{loc:{start:{line:42,column:49},end:{line:42,column:84}},type:"cond-expr",locations:[{start:{line:42,column:69},end:{line:42,column:75}},{start:{line:42,column:78},end:{line:42,column:84}}],line:42},9:{loc:{start:{line:56,column:6},end:{line:103,column:7}},type:"if",locations:[{start:{line:56,column:6},end:{line:103,column:7}},{start:{line:65,column:13},end:{line:103,column:7}}],line:56},10:{loc:{start:{line:62,column:26},end:{line:62,column:70}},type:"binary-expr",locations:[{start:{line:62,column:26},end:{line:62,column:50}},{start:{line:62,column:54},end:{line:62,column:70}}],line:62},11:{loc:{start:{line:65,column:13},end:{line:103,column:7}},type:"if",locations:[{start:{line:65,column:13},end:{line:103,column:7}},{start:{line:74,column:13},end:{line:103,column:7}}],line:65},12:{loc:{start:{line:71,column:26},end:{line:71,column:70}},type:"binary-expr",locations:[{start:{line:71,column:26},end:{line:71,column:50}},{start:{line:71,column:54},end:{line:71,column:70}}],line:71},13:{loc:{start:{line:74,column:13},end:{line:103,column:7}},type:"if",locations:[{start:{line:74,column:13},end:{line:103,column:7}},{start:{line:85,column:13},end:{line:103,column:7}}],line:74},14:{loc:{start:{line:82,column:26},end:{line:82,column:70}},type:"binary-expr",locations:[{start:{line:82,column:26},end:{line:82,column:50}},{start:{line:82,column:54},end:{line:82,column:70}}],line:82},15:{loc:{start:{line:85,column:13},end:{line:103,column:7}},type:"if",locations:[{start:{line:85,column:13},end:{line:103,column:7}},{start:{line:94,column:13},end:{line:103,column:7}}],line:85},16:{loc:{start:{line:91,column:26},end:{line:91,column:70}},type:"binary-expr",locations:[{start:{line:91,column:26},end:{line:91,column:50}},{start:{line:91,column:54},end:{line:91,column:70}}],line:91},17:{loc:{start:{line:100,column:26},end:{line:100,column:70}},type:"binary-expr",locations:[{start:{line:100,column:26},end:{line:100,column:50}},{start:{line:100,column:54},end:{line:100,column:70}}],line:100}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputDynamicArray.tsx"],names:["v"],mappings:"AAwE4B,cA2Cf,YA3Ce;AAxE5B,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,SAAQ,gBAAe;AACvB,SAA+B,uBAAuB;AAEtD,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,mBAAmB;AAC1B,OAAO,eAAe;AACtB,OAAO,cAAc;AACrB,OAAO,gBAAgB;AAkBvB,MAAM,kCAAkC,MAAM,UAA0C;AAAA,EACtF,YAAY,KAAa,UAAuC;AAC9D,UAAM,SAAS,KAAK,OAAO,MAAM,CAAC;AAClC,WAAO,GAAG,IAAI;AACd,QAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,MAAM;AAAA,EACrD;AAAA,EAEA,IAAI,SAAS;AACX,WAAO,KAAK,MAAM,SAAS,KAAK,MAAM,WAAW,CAAC;AAAA,EACpD;AAAA,EAEA,WAAW,MAAM;AACf,UAAM,SAAS,KAAK,OAAO,MAAM,CAAC;AAClC,QAAI,KAAK,MAAM,SAAS,UAAU;AAChC,aAAO,KAAK,CAAC;AAAA,IACf,WACS,KAAK,MAAM,SAAS,OAAO;AAClC,aAAO,KAAK,EAAE;AAAA,IAChB,WACS,KAAK,MAAM,SAAS,QAAQ;AACnC,YAAM,EAAC,UAAS,IAAI,KAAK;AACzB,YAAM,eAAe,OAAO,KAAK,UAAW,MAAM,EAAE,CAAC;AACrD,aAAO,KAAK,YAAY;AAAA,IAC1B,WAAW,KAAK,MAAM,SAAS,SAAS;AACtC,aAAO,KAAK,SAAS;AAAA,IACvB,OAAO;AACL,aAAO,KAAK,EAAE;AAAA,IAChB;AAEA,QAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,MAAM;AAAA,EACrD;AAAA,EAEA,YAAY,UAAkB;AAC5B,UAAM,SAAS,KAAK,OAAO,MAAM,CAAC;AAClC,WAAO,OAAO,UAAU,CAAC;AAEzB,QAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,OAAO,SAAS,IAAI,SAAS,MAAS;AAAA,EACrF;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,YAAY,EAAE,GAAG,MAAM,KAAK,MAAM,MAAM,QAAQ,KAAK,MAAM,OAAO;AACxE,UAAM,SAAS,KAAK,OAAO,IAAI,CAAC,GAAG,MAAM;AACvC,YAAM,iBAAgB;AAAA,QAAC;AAAA;AAAA,UACrB,SAAS,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,UACrC,GAAG;AAAA;AAAA,MACN;AACA,UAAI;AACJ,UAAG,KAAK,MAAM,SAAS,OAAO;AAC5B,gBAAQ;AAAA,UAAC;AAAA;AAAA,YACP,OAAO;AAAA,YACP,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,QACrD;AAAA,MACF,WACS,KAAK,MAAM,SAAS,UAAU;AACrC,gBAAQ;AAAA,UAAC;AAAA;AAAA,YACP,OAAO;AAAA,YACP,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,QACrD;AAAA,MACF,WACS,KAAK,MAAM,SAAS,QAAQ;AACnC,cAAM,UAAU,OAAO,KAAK,KAAK,MAAM,WAAW,MAAM,EAAE,IAAI,CAAAA,OAAK,CAACA,IAAG,WAAWA,EAAC,CAAC,CAAC;AACrF,gBAAQ;AAAA,UAAC;AAAA;AAAA,YACP;AAAA,YACA,OAAO;AAAA,YACP,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,QACrD;AAAA,MACF,WACS,KAAK,MAAM,SAAS,SAAS;AACpC,gBAAQ;AAAA,UAAC;AAAA;AAAA,YACP,OAAO;AAAA,YACP,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,QACrD;AAAA,MACF,OACK;AACH,gBAAQ;AAAA,UAAC;AAAA;AAAA,YACP,OAAO;AAAA,YACP,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,QACrD;AAAA,MACF;AAEA,aAAO;AAAA,QAAC;AAAA;AAAA,UACN,OAAO,KAAK,MAAM;AAAA,UAElB,WAAU;AAAA,UAEV;AAAA,gCAAC,SAAI,WAAU,+BACZ,0BACH;AAAA,YACA,oBAAC,SAAI,WAAU,gCACZ,iBACH;AAAA;AAAA;AAAA,QARK;AAAA,MASP;AAAA,IACF,CAAC;AAED,WACE,qBAAC,SAAI,WAAU,kBACZ;AAAA;AAAA,MACD;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,SAAS,KAAK;AAAA,UAEb,YAAE,WAAW;AAAA;AAAA,MAChB;AAAA,OACF;AAAA,EAEJ;AACF;AAEA,MAAM,oBAAoB,gBAAgB,EAAE,yBAAyB;AACrE,eAAe;AAMf,MAAM,+BAA+B,MAAM,UAAuC;AAAA,EAChF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,SAAS,KAAK,MAAM;AAAA,QACpB,OAAO,EAAE,mBAAmB;AAAA,QAE5B;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,oBAAC,YAAS;AAAA;AAAA,QACnB;AAAA;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"705ac9c8c3dcb0aff320a53fac9b80bc280b1cbf"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Hn=function(){return s},s}Hn();class TRe extends En.Component{changeValue(e,t){Hn().f[0]++;const i=(Hn().s[0]++,this.values.slice(0));Hn().s[1]++,i[e]=t,Hn().s[2]++,this.props.onChange?(Hn().b[0][0]++,Hn().s[3]++,this.props.onChange(i)):Hn().b[0][1]++}get values(){return Hn().f[1]++,Hn().s[4]++,Hn().b[1][0]++,this.props.value||(Hn().b[1][1]++,this.props.default)||(Hn().b[1][2]++,[])}addValue=(Hn().s[5]++,()=>{Hn().f[2]++;const e=(Hn().s[6]++,this.values.slice(0));if(Hn().s[7]++,this.props.type==="number")Hn().b[2][0]++,Hn().s[8]++,e.push(0);else if(Hn().b[2][1]++,Hn().s[9]++,this.props.type==="url")Hn().b[3][0]++,Hn().s[10]++,e.push("");else if(Hn().b[3][1]++,Hn().s[11]++,this.props.type==="enum"){Hn().b[4][0]++;const{fieldSpec:t}=(Hn().s[12]++,this.props),i=(Hn().s[13]++,Object.keys(t.values)[0]);Hn().s[14]++,e.push(i)}else Hn().b[4][1]++,Hn().s[15]++,this.props.type==="color"?(Hn().b[5][0]++,Hn().s[16]++,e.push("#000000")):(Hn().b[5][1]++,Hn().s[17]++,e.push(""));Hn().s[18]++,this.props.onChange?(Hn().b[6][0]++,Hn().s[19]++,this.props.onChange(e)):Hn().b[6][1]++});deleteValue(e){Hn().f[3]++;const t=(Hn().s[20]++,this.values.slice(0));Hn().s[21]++,t.splice(e,1),Hn().s[22]++,this.props.onChange?(Hn().b[7][0]++,Hn().s[23]++,this.props.onChange(t.length>0?(Hn().b[8][0]++,t):(Hn().b[8][1]++,void 0))):Hn().b[7][1]++}render(){Hn().f[4]++;const e=(Hn().s[24]++,this.props.t),t=(Hn().s[25]++,{t:e,i18n:this.props.i18n,tReady:this.props.tReady}),i=(Hn().s[26]++,this.values.map((r,o)=>{Hn().f[5]++;const s=(Hn().s[27]++,ie.jsx(RRe,{onClick:this.deleteValue.bind(this,o),...t}));let a;if(Hn().s[28]++,this.props.type==="url")Hn().b[9][0]++,Hn().s[29]++,a=ie.jsx(EL,{value:r,onChange:this.changeValue.bind(this,o),"aria-label":(Hn().b[10][0]++,this.props["aria-label"]||(Hn().b[10][1]++,this.props.label))});else if(Hn().b[9][1]++,Hn().s[30]++,this.props.type==="number")Hn().b[11][0]++,Hn().s[31]++,a=ie.jsx(m1,{value:r,onChange:this.changeValue.bind(this,o),"aria-label":(Hn().b[12][0]++,this.props["aria-label"]||(Hn().b[12][1]++,this.props.label))});else if(Hn().b[11][1]++,Hn().s[32]++,this.props.type==="enum"){Hn().b[13][0]++;const c=(Hn().s[33]++,Object.keys(this.props.fieldSpec?.values).map(h=>(Hn().f[6]++,Hn().s[34]++,[h,aL(h)])));Hn().s[35]++,a=ie.jsx(SL,{options:c,value:r,onChange:this.changeValue.bind(this,o),"aria-label":(Hn().b[14][0]++,this.props["aria-label"]||(Hn().b[14][1]++,this.props.label))})}else Hn().b[13][1]++,Hn().s[36]++,this.props.type==="color"?(Hn().b[15][0]++,Hn().s[37]++,a=ie.jsx(wL,{value:r,onChange:this.changeValue.bind(this,o),"aria-label":(Hn().b[16][0]++,this.props["aria-label"]||(Hn().b[16][1]++,this.props.label))})):(Hn().b[15][1]++,Hn().s[38]++,a=ie.jsx(Bm,{value:r,onChange:this.changeValue.bind(this,o),"aria-label":(Hn().b[17][0]++,this.props["aria-label"]||(Hn().b[17][1]++,this.props.label))}));return Hn().s[39]++,ie.jsxs("div",{style:this.props.style,className:"maputnik-array-block",children:[ie.jsx("div",{className:"maputnik-array-block-action",children:s}),ie.jsx("div",{className:"maputnik-array-block-content",children:a})]},o)}));return Hn().s[40]++,ie.jsxs("div",{className:"maputnik-array",children:[i,ie.jsx(Zs,{className:"maputnik-array-add-value",onClick:this.addValue,children:e("Add value")})]})}}const Bw=(Hn().s[41]++,No()(TRe));class RRe extends En.Component{render(){Hn().f[7]++;const e=(Hn().s[42]++,this.props.t);return Hn().s[43]++,ie.jsx(Zs,{className:"maputnik-delete-stop",onClick:this.props.onClick,title:e("Remove array item"),children:ie.jsx(SK,{label:ie.jsx(Hb,{})})})}}function Ps(){var n="/home/runner/work/maputnik/maputnik/src/components/InputFont.tsx",e="cd16dc68fc42c219caf080518fd74984d4f8d81e",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputFont.tsx",statementMap:{0:{start:{line:5,column:24},end:{line:7,column:3}},1:{start:{line:9,column:16},end:{line:9,column:60}},2:{start:{line:10,column:4},end:{line:14,column:5}},3:{start:{line:11,column:6},end:{line:11,column:28}},4:{start:{line:13,column:6},end:{line:13,column:17}},5:{start:{line:17,column:26},end:{line:17,column:46}},6:{start:{line:18,column:4},end:{line:18,column:34}},7:{start:{line:19,column:27},end:{line:19,column:92}},8:{start:{line:19,column:55},end:{line:19,column:67}},9:{start:{line:19,column:83},end:{line:19,column:91}},10:{start:{line:20,column:4},end:{line:20,column:40}},11:{start:{line:23,column:19},end:{line:39,column:6}},12:{start:{line:24,column:6},end:{line:38,column:8}},13:{start:{line:32,column:52},end:{line:32,column:58}},14:{start:{line:40,column:4},end:{line:40,column:87}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:15},end:{line:15,column:3}},line:8},1:{name:"(anonymous_1)",decl:{start:{line:16,column:2},end:{line:16,column:3}},loc:{start:{line:16,column:28},end:{line:21,column:3}},line:16},2:{name:"(anonymous_2)",decl:{start:{line:19,column:48},end:{line:19,column:49}},loc:{start:{line:19,column:55},end:{line:19,column:67}},line:19},3:{name:"(anonymous_3)",decl:{start:{line:19,column:76},end:{line:19,column:77}},loc:{start:{line:19,column:83},end:{line:19,column:91}},line:19},4:{name:"(anonymous_4)",decl:{start:{line:22,column:2},end:{line:22,column:3}},loc:{start:{line:22,column:11},end:{line:41,column:3}},line:22},5:{name:"(anonymous_5)",decl:{start:{line:23,column:35},end:{line:23,column:36}},loc:{start:{line:23,column:49},end:{line:39,column:5}},line:23},6:{name:"(anonymous_6)",decl:{start:{line:32,column:45},end:{line:32,column:46}},loc:{start:{line:32,column:52},end:{line:32,column:58}},line:32}},branchMap:{0:{loc:{start:{line:9,column:16},end:{line:9,column:60}},type:"binary-expr",locations:[{start:{line:9,column:16},end:{line:9,column:32}},{start:{line:9,column:36},end:{line:9,column:54}},{start:{line:9,column:58},end:{line:9,column:60}}],line:9},1:{loc:{start:{line:10,column:4},end:{line:14,column:5}},type:"if",locations:[{start:{line:10,column:4},end:{line:14,column:5}},{start:{line:12,column:11},end:{line:14,column:5}}],line:10},2:{loc:{start:{line:30,column:28},end:{line:30,column:71}},type:"binary-expr",locations:[{start:{line:30,column:28},end:{line:30,column:52}},{start:{line:30,column:56},end:{line:30,column:71}}],line:30}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},b:{0:[0,0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputFont.tsx"],names:[],mappings:"AA6CQ;AA7CR,OAAO,WAAW;AAClB,OAAO,uBAAuB;AAY9B,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,OAAO,eAAe;AAAA,IACpB,OAAO,CAAC;AAAA,EACV;AAAA,EAEA,IAAI,SAAS;AACX,UAAM,MAAM,KAAK,MAAM,SAAS,KAAK,MAAM,WAAW,CAAC;AAGvD,QAAI,IAAI,IAAI,SAAO,CAAC,MAAM,IAAG;AAC3B,aAAO,IAAI,OAAO,EAAE;AAAA,IACtB,OACK;AACH,aAAO;AAAA,IACT;AAAA,EACF;AAAA,EAEA,WAAW,KAAa,UAAkB;AACxC,UAAM,gBAAgB,KAAK,OAAO,MAAM,CAAC;AACzC,kBAAc,GAAG,IAAI;AACrB,UAAM,iBAAiB,cACpB,OAAO,OAAK,MAAM,MAAS,EAC3B,OAAO,OAAK,MAAM,EAAE;AAEvB,SAAK,MAAM,SAAS,cAAc;AAAA,EACpC;AAAA,EAEA,SAAS;AACP,UAAM,SAAS,KAAK,OAAO,IAAI,CAAC,OAAO,MAAM;AAC3C,aAAO;AAAA,QAAC;AAAA;AAAA,UAGN;AAAA,YAAC;AAAA;AAAA,cACC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA,cACnD;AAAA,cACA,SAAS,KAAK,MAAM,OAAO,IAAI,OAAK,CAAC,GAAG,CAAC,CAAC;AAAA,cAC1C,UAAU,KAAK,WAAW,KAAK,MAAM,CAAC;AAAA;AAAA,UACxC;AAAA;AAAA,QAPK;AAAA,MAQP;AAAA,IACF,CAAC;AAED,WACE,oBAAC,QAAG,WAAU,iBACX,kBACH;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"cd16dc68fc42c219caf080518fd74984d4f8d81e"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Ps=function(){return s},s}Ps();class DRe extends En.Component{static defaultProps=(Ps().s[0]++,{fonts:[]});get values(){Ps().f[0]++;const e=(Ps().s[1]++,Ps().b[0][0]++,this.props.value||(Ps().b[0][1]++,this.props.default)||(Ps().b[0][2]++,[]));return Ps().s[2]++,e[e.length-1]!==""?(Ps().b[1][0]++,Ps().s[3]++,e.concat("")):(Ps().b[1][1]++,Ps().s[4]++,e)}changeFont(e,t){Ps().f[1]++;const i=(Ps().s[5]++,this.values.slice(0));Ps().s[6]++,i[e]=t;const r=(Ps().s[7]++,i.filter(o=>(Ps().f[2]++,Ps().s[8]++,o!==void 0)).filter(o=>(Ps().f[3]++,Ps().s[9]++,o!=="")));Ps().s[10]++,this.props.onChange(r)}render(){Ps().f[4]++;const e=(Ps().s[11]++,this.values.map((t,i)=>(Ps().f[5]++,Ps().s[12]++,ie.jsx("li",{children:ie.jsx(I5,{"aria-label":(Ps().b[2][0]++,this.props["aria-label"]||(Ps().b[2][1]++,this.props.name)),value:t,options:this.props.fonts?.map(r=>(Ps().f[6]++,Ps().s[13]++,[r,r])),onChange:this.changeFont.bind(this,i)})},i))));return Ps().s[14]++,ie.jsx("ul",{className:"maputnik-font",children:e})}}function qi(){var n="/home/runner/work/maputnik/maputnik/src/components/InputSpec.tsx",e="123acbe81166b3a98d021f01f94ef258a8456edf",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputSpec.tsx",statementMap:{0:{start:{line:13,column:23},end:{line:13,column:117}},1:{start:{line:16,column:24},end:{line:27,column:5}},2:{start:{line:25,column:30},end:{line:25,column:81}},3:{start:{line:28,column:4},end:{line:145,column:5}},4:{start:{line:30,column:8},end:{line:37,column:10}},5:{start:{line:39,column:24},end:{line:39,column:101}},6:{start:{line:39,column:82},end:{line:39,column:100}},7:{start:{line:40,column:8},end:{line:46,column:10}},8:{start:{line:51,column:8},end:{line:67,column:9}},9:{start:{line:52,column:26},end:{line:52,column:59}},10:{start:{line:53,column:10},end:{line:59,column:12}},11:{start:{line:57,column:42},end:{line:57,column:48}},12:{start:{line:61,column:10},end:{line:66,column:12}},13:{start:{line:69,column:8},end:{line:74,column:10}},14:{start:{line:76,column:8},end:{line:81,column:10}},15:{start:{line:83,column:8},end:{line:111,column:9}},16:{start:{line:84,column:10},end:{line:90,column:12}},17:{start:{line:92,column:10},end:{line:110,column:11}},18:{start:{line:93,column:12},end:{line:100,column:14}},19:{start:{line:102,column:12},end:{line:109,column:14}},20:{start:{line:113,column:8},end:{line:121,column:10}},21:{start:{line:123,column:8},end:{line:131,column:10}},22:{start:{line:133,column:8},end:{line:141,column:10}},23:{start:{line:143,column:8},end:{line:143,column:110}},24:{start:{line:144,column:8},end:{line:144,column:20}},25:{start:{line:148,column:4},end:{line:148,column:124}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:15},end:{line:146,column:3}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:25,column:16},end:{line:25,column:17}},loc:{start:{line:25,column:30},end:{line:25,column:81}},line:25},2:{name:"(anonymous_2)",decl:{start:{line:39,column:75},end:{line:39,column:76}},loc:{start:{line:39,column:82},end:{line:39,column:100}},line:39},3:{name:"(anonymous_3)",decl:{start:{line:57,column:35},end:{line:57,column:36}},loc:{start:{line:57,column:42},end:{line:57,column:48}},line:57},4:{name:"(anonymous_4)",decl:{start:{line:147,column:2},end:{line:147,column:3}},loc:{start:{line:147,column:11},end:{line:149,column:3}},line:147}},branchMap:{0:{loc:{start:{line:28,column:4},end:{line:145,column:5}},type:"switch",locations:[{start:{line:29,column:6},end:{line:37,column:10}},{start:{line:38,column:6},end:{line:47,column:7}},{start:{line:48,column:6},end:{line:48,column:27}},{start:{line:49,column:6},end:{line:49,column:23}},{start:{line:50,column:6},end:{line:67,column:9}},{start:{line:68,column:6},end:{line:74,column:10}},{start:{line:75,column:6},end:{line:81,column:10}},{start:{line:82,column:6},end:{line:111,column:9}},{start:{line:112,column:6},end:{line:121,column:10}},{start:{line:122,column:6},end:{line:131,column:10}},{start:{line:132,column:6},end:{line:141,column:10}},{start:{line:142,column:6},end:{line:144,column:20}}],line:28},1:{loc:{start:{line:39,column:36},end:{line:39,column:69}},type:"binary-expr",locations:[{start:{line:39,column:36},end:{line:39,column:63}},{start:{line:39,column:67},end:{line:39,column:69}}],line:39},2:{loc:{start:{line:51,column:8},end:{line:67,column:9}},type:"if",locations:[{start:{line:51,column:8},end:{line:67,column:9}},{start:{line:60,column:15},end:{line:67,column:9}}],line:51},3:{loc:{start:{line:52,column:26},end:{line:52,column:59}},type:"binary-expr",locations:[{start:{line:52,column:26},end:{line:52,column:53}},{start:{line:52,column:57},end:{line:52,column:59}}],line:52},4:{loc:{start:{line:83,column:8},end:{line:111,column:9}},type:"if",locations:[{start:{line:83,column:8},end:{line:111,column:9}},{start:{line:91,column:15},end:{line:111,column:9}}],line:83},5:{loc:{start:{line:92,column:10},end:{line:110,column:11}},type:"if",locations:[{start:{line:92,column:10},end:{line:110,column:11}},{start:{line:101,column:17},end:{line:110,column:11}}],line:92},6:{loc:{start:{line:119,column:19},end:{line:119,column:90}},type:"cond-expr",locations:[{start:{line:119,column:53},end:{line:119,column:69}},{start:{line:119,column:72},end:{line:119,column:90}}],line:119},7:{loc:{start:{line:129,column:19},end:{line:129,column:90}},type:"cond-expr",locations:[{start:{line:129,column:53},end:{line:129,column:69}},{start:{line:129,column:72},end:{line:129,column:90}}],line:129},8:{loc:{start:{line:138,column:19},end:{line:138,column:90}},type:"cond-expr",locations:[{start:{line:138,column:53},end:{line:138,column:69}},{start:{line:138,column:72},end:{line:138,column:90}}],line:138}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0,0,0,0,0,0,0,0,0,0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputSpec.tsx"],names:[],mappings:"AAyDQ;AAzDR,OAAO,WAAkC;AAEzC,OAAO,gBAA0C;AACjD,OAAO,iBAA4C;AACnD,OAAO,mBAAgD;AACvD,OAAO,iBAA4C;AACnD,OAAO,gBAA0C;AACjD,OAAO,uBAAwD;AAC/D,OAAO,eAAwC;AAC/C,OAAO,uBAAwD;AAC/D,OAAO,eAAwC;AAC/C,OAAO,gBAAgB;AAEvB,MAAM,iBAAiB,CAAC,sBAAsB,gBAAgB,gBAAgB,0BAA0B,YAAY;AA2BpH,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EAErE,aAAa;AACX,UAAM,cAAc;AAAA,MAClB,WAAW,KAAK,MAAM;AAAA,MACtB,OAAO,KAAK,MAAM;AAAA,MAClB,QAAQ,KAAK,MAAM;AAAA,MACnB,OAAO,KAAK,MAAM;AAAA,MAClB,OAAO,KAAK,MAAM;AAAA,MAClB,SAAS,KAAK,MAAM,WAAW;AAAA,MAC/B,MAAM,KAAK,MAAM;AAAA,MACjB,eAAe,sBAAsB,KAAK,MAAM;AAAA,MAChD,UAAU,CAAC,aAAmE,KAAK,MAAM,SAAU,KAAK,MAAM,WAAW,QAAQ;AAAA,MACjI,cAAc,KAAK,MAAM,YAAY;AAAA,IACvC;AACA,YAAO,KAAK,MAAM,WAAW,MAAM;AAAA,MACjC,KAAK;AAAU,eACb;AAAA,UAAC;AAAA;AAAA,YACE,GAAG;AAAA,YACJ,KAAK,KAAK,MAAM,UAAU;AAAA,YAC1B,KAAK,KAAK,MAAM,UAAU;AAAA;AAAA,QAC5B;AAAA,MAEF,KAAK,QAAQ;AACX,cAAM,UAAU,OAAO,KAAK,KAAK,MAAM,UAAU,UAAU,CAAC,CAAC,EAAE,IAAI,OAAK,CAAC,GAAG,WAAW,CAAC,CAAC,CAAC;AAE1F,eAAO;AAAA,UAAC;AAAA;AAAA,YACL,GAAG;AAAA,YACJ;AAAA;AAAA,QACF;AAAA,MACF;AAAA,MACA,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AACH,YAAI,eAAe,QAAQ,KAAK,MAAM,SAAU,KAAK,GAAG;AACtD,gBAAM,UAAU,KAAK,MAAM,UAAU,UAAU,CAAC;AAChD,iBAAO;AAAA,YAAC;AAAA;AAAA,cACL,GAAG;AAAA,cACJ,SAAS,QAAQ,IAAI,OAAK,CAAC,GAAG,CAAC,CAAC;AAAA;AAAA,UAClC;AAAA,QACF,OAAO;AACL,iBAAO;AAAA,YAAC;AAAA;AAAA,cACL,GAAG;AAAA;AAAA,UACN;AAAA,QACF;AAAA,MACF,KAAK;AAAS,eACZ;AAAA,UAAC;AAAA;AAAA,YACE,GAAG;AAAA;AAAA,QACN;AAAA,MAEF,KAAK;AAAW,eACd;AAAA,UAAC;AAAA;AAAA,YACE,GAAG;AAAA;AAAA,QACN;AAAA,MAEF,KAAK;AACH,YAAG,KAAK,MAAM,cAAc,aAAa;AACvC,iBAAO;AAAA,YAAC;AAAA;AAAA,cACL,GAAG;AAAA,cACJ,OAAO,KAAK,MAAM,UAAU;AAAA;AAAA,UAC9B;AAAA,QACF,OAAO;AACL,cAAI,KAAK,MAAM,UAAU,QAAQ;AAC/B,mBAAO;AAAA,cAAC;AAAA;AAAA,gBACL,GAAG;AAAA,gBACJ,MAAM,KAAK,MAAM,UAAU;AAAA,gBAC3B,QAAQ,KAAK,MAAM,UAAU;AAAA;AAAA,YAC/B;AAAA,UACF,OAAO;AACL,mBAAO;AAAA,cAAC;AAAA;AAAA,gBACL,GAAG;AAAA,gBACJ,WAAW,KAAK,MAAM;AAAA,gBACtB,MAAM,KAAK,MAAM,UAAU;AAAA;AAAA,YAC7B;AAAA,UACF;AAAA,QACF;AAAA,MACF,KAAK;AAAe,eAClB;AAAA,UAAC;AAAA;AAAA,YACE,GAAG;AAAA,YACJ,WAAW,KAAK,MAAM;AAAA,YACtB,MAAK;AAAA,YACL,OAAQ,MAAM,QAAQ,KAAK,MAAM,KAAK,IAAI,KAAK,MAAM,QAAQ,CAAC,KAAK,MAAM,KAAK;AAAA;AAAA,QAChF;AAAA,MAEF,KAAK;AAAc,eACjB;AAAA,UAAC;AAAA;AAAA,YACE,GAAG;AAAA,YACJ,WAAW,KAAK,MAAM;AAAA,YACtB,MAAK;AAAA,YACL,OAAQ,MAAM,QAAQ,KAAK,MAAM,KAAK,IAAI,KAAK,MAAM,QAAQ,CAAC,KAAK,MAAM,KAAK;AAAA;AAAA,QAChF;AAAA,MAEF,KAAK;AAAW,eACd;AAAA,UAAC;AAAA;AAAA,YACE,GAAG;AAAA,YACJ,MAAK;AAAA,YACL,OAAQ,MAAM,QAAQ,KAAK,MAAM,KAAK,IAAI,KAAK,MAAM,QAAQ,CAAC,KAAK,MAAM,KAAK;AAAA,YAC9E,QAAQ;AAAA;AAAA,QACV;AAAA,MAEF;AACE,gBAAQ,KAAK,6BAA6B,KAAK,MAAM,SAAS,UAAU,KAAK,MAAM,WAAW,IAAI,EAAE;AACpG,eAAO;AAAA,IACX;AAAA,EACF;AAAA,EAEA,SAAS;AACP,WACE,oBAAC,SAAI,eAAa,gBAAc,KAAK,MAAM,WACxC,eAAK,WAAW,GACnB;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"123acbe81166b3a98d021f01f94ef258a8456edf"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return qi=function(){return s},s}qi();const PRe=(qi().s[0]++,["background-pattern","fill-pattern","line-pattern","fill-extrusion-pattern","icon-image"]);class ix extends En.Component{childNodes(){qi().f[0]++;const e=(qi().s[1]++,{fieldSpec:this.props.fieldSpec,label:this.props.label,action:this.props.action,style:this.props.style,value:this.props.value,default:this.props.fieldSpec?.default,name:this.props.fieldName,"data-wd-key":"spec-field-input:"+this.props.fieldName,onChange:t=>(qi().f[1]++,qi().s[2]++,this.props.onChange(this.props.fieldName,t)),"aria-label":this.props["aria-label"]});switch(qi().s[3]++,this.props.fieldSpec?.type){case"number":return qi().b[0][0]++,qi().s[4]++,ie.jsx(m1,{...e,min:this.props.fieldSpec.minimum,max:this.props.fieldSpec.maximum});case"enum":qi().b[0][1]++;{const t=(qi().s[5]++,Object.keys((qi().b[1][0]++,this.props.fieldSpec.values||(qi().b[1][1]++,[]))).map(i=>(qi().f[2]++,qi().s[6]++,[i,aL(i)])));return qi().s[7]++,ie.jsx(SL,{...e,options:t})}case"resolvedImage":qi().b[0][2]++;case"formatted":qi().b[0][3]++;case"string":if(qi().b[0][4]++,qi().s[8]++,PRe.indexOf(this.props.fieldName)>=0){qi().b[2][0]++;const t=(qi().s[9]++,qi().b[3][0]++,this.props.fieldSpec.values||(qi().b[3][1]++,[]));return qi().s[10]++,ie.jsx(I5,{...e,options:t.map(i=>(qi().f[3]++,qi().s[11]++,[i,i]))})}else return qi().b[2][1]++,qi().s[12]++,ie.jsx(Bm,{...e});case"color":return qi().b[0][5]++,qi().s[13]++,ie.jsx(wL,{...e});case"boolean":return qi().b[0][6]++,qi().s[14]++,ie.jsx(Hse,{...e});case"array":return qi().b[0][7]++,qi().s[15]++,this.props.fieldName==="text-font"?(qi().b[4][0]++,qi().s[16]++,ie.jsx(DRe,{...e,fonts:this.props.fieldSpec.values})):(qi().b[4][1]++,qi().s[17]++,this.props.fieldSpec.length?(qi().b[5][0]++,qi().s[18]++,ie.jsx(KD,{...e,type:this.props.fieldSpec.value,length:this.props.fieldSpec.length})):(qi().b[5][1]++,qi().s[19]++,ie.jsx(Bw,{...e,fieldSpec:this.props.fieldSpec,type:this.props.fieldSpec.value})));case"numberArray":return qi().b[0][8]++,qi().s[20]++,ie.jsx(Bw,{...e,fieldSpec:this.props.fieldSpec,type:"number",value:Array.isArray(this.props.value)?(qi().b[6][0]++,this.props.value):(qi().b[6][1]++,[this.props.value])});case"colorArray":return qi().b[0][9]++,qi().s[21]++,ie.jsx(Bw,{...e,fieldSpec:this.props.fieldSpec,type:"color",value:Array.isArray(this.props.value)?(qi().b[7][0]++,this.props.value):(qi().b[7][1]++,[this.props.value])});case"padding":return qi().b[0][10]++,qi().s[22]++,ie.jsx(KD,{...e,type:"number",value:Array.isArray(this.props.value)?(qi().b[8][0]++,this.props.value):(qi().b[8][1]++,[this.props.value]),length:4});default:return qi().b[0][11]++,qi().s[23]++,console.warn(`No proper field input for ${this.props.fieldName} type: ${this.props.fieldSpec?.type}`),qi().s[24]++,null}}render(){return qi().f[4]++,qi().s[25]++,ie.jsx("div",{"data-wd-key":"spec-field:"+this.props.fieldName,children:this.childNodes()})}}function Xc(){var n="/home/runner/work/maputnik/maputnik/src/components/Fieldset.tsx",e="92ea2bb9889070368abe40f809481200c126aae8",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/Fieldset.tsx",statementMap:{0:{start:{line:7,column:17},end:{line:30,column:1}},1:{start:{line:8,column:32},end:{line:8,column:53}},2:{start:{line:9,column:18},end:{line:9,column:67}},3:{start:{line:10,column:22},end:{line:12,column:3}},4:{start:{line:11,column:4},end:{line:11,column:20}},5:{start:{line:13,column:2},end:{line:29,column:7}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:17},end:{line:7,column:18}},loc:{start:{line:7,column:28},end:{line:30,column:1}},line:7},1:{name:"(anonymous_1)",decl:{start:{line:10,column:22},end:{line:10,column:23}},loc:{start:{line:10,column:31},end:{line:12,column:3}},line:10}},branchMap:{0:{loc:{start:{line:14,column:4},end:{line:21,column:8}},type:"binary-expr",locations:[{start:{line:14,column:4},end:{line:14,column:19}},{start:{line:14,column:39},end:{line:21,column:8}}],line:14},1:{loc:{start:{line:22,column:4},end:{line:25,column:32}},type:"binary-expr",locations:[{start:{line:22,column:4},end:{line:22,column:20}},{start:{line:22,column:40},end:{line:25,column:32}}],line:22},2:{loc:{start:{line:28,column:4},end:{line:28,column:198}},type:"binary-expr",locations:[{start:{line:28,column:4},end:{line:28,column:19}},{start:{line:28,column:39},end:{line:28,column:198}}],line:28},3:{loc:{start:{line:28,column:104},end:{line:28,column:125}},type:"cond-expr",locations:[{start:{line:28,column:114},end:{line:28,column:116}},{start:{line:28,column:119},end:{line:28,column:125}}],line:28}},s:{0:0,1:0,2:0,3:0,4:0,5:0},f:{0:0,1:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Fieldset.tsx"],names:[],mappings:"AAuBI,SAGM,KAHN;AAvBJ,OAAO,WAA0D;AACjE,OAAO,gBAAgB;AACvB,OAAO,mBAAmB;AAC1B,OAAO,SAAS;AAChB,OAAO,sBAAsB;AAU7B,MAAM,WAAoC,CAAC,UAAU;AACnD,QAAM,CAAC,SAAS,UAAU,IAAI,MAAM,SAAS,KAAK;AAClD,QAAM,UAAU,MAAM,OAAO,iBAAiB,iBAAiB,CAAC;AAEhE,QAAM,cAAc,CAAC,QAAiB;AACpC,eAAW,GAAG;AAAA,EAChB;AAEA,SACE,qBAAC,SAAI,WAAU,wBAAuB,MAAK,SAAQ,mBAAiB,QAAQ,SACzE;AAAA,UAAM,aACL,oBAAC,SAAI,WAAU,8BACb;AAAA,MAAC;AAAA;AAAA,QACC,OAAO,MAAM;AAAA,QACb;AAAA,QACA,WAAW,MAAM;AAAA;AAAA,IACnB,GACF;AAAA,IAED,CAAC,MAAM,aACN,oBAAC,SAAI,WAAW,WAAW;AAAA,MACzB,8BAA8B;AAAA,MAC9B,+BAA+B,MAAM;AAAA,IACvC,CAAC,GACE,gBAAM,OACT;AAAA,IAEF,oBAAC,SAAI,WAAU,+BAA+B,gBAAM,QAAO;AAAA,IAC3D,oBAAC,SAAI,WAAU,gCAAgC,gBAAM,UAAS;AAAA,IAC7D,MAAM,aACL,oBAAC,SAAI,WAAU,uBAAsB,OAAO,EAAE,SAAS,UAAU,KAAK,OAAO,GAC3E,8BAAC,OAAI,WAAW,MAAM,WAAW,GACnC;AAAA,KAEJ;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"92ea2bb9889070368abe40f809481200c126aae8"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Xc=function(){return s},s}Xc();Xc().s[0]++;const Ry=n=>{Xc().f[0]++;const[e,t]=(Xc().s[1]++,En.useState(!1)),i=(Xc().s[2]++,En.useRef(Ox("fieldset_label_")));Xc().s[3]++;const r=o=>{Xc().f[1]++,Xc().s[4]++,t(o)};return Xc().s[5]++,ie.jsxs("div",{className:"maputnik-input-block",role:"group","aria-labelledby":i.current,children:[(Xc().b[0][0]++,n.fieldSpec&&(Xc().b[0][1]++,ie.jsx("div",{className:"maputnik-input-block-label",children:ie.jsx(SK,{label:n.label,onToggleDoc:r,fieldSpec:n.fieldSpec})}))),(Xc().b[1][0]++,!n.fieldSpec&&(Xc().b[1][1]++,ie.jsx("div",{className:u0({"maputnik-input-block-label":!0,"maputnik-input-block--error":n.error}),children:n.label}))),ie.jsx("div",{className:"maputnik-input-block-action",children:n.action}),ie.jsx("div",{className:"maputnik-input-block-content",children:n.children}),(Xc().b[2][0]++,n.fieldSpec&&(Xc().b[2][1]++,ie.jsx("div",{className:"maputnik-doc-inline",style:{display:e?(Xc().b[3][0]++,""):(Xc().b[3][1]++,"none")},children:ie.jsx(O6,{fieldSpec:n.fieldSpec})})))]})};function Uo(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldSpec.tsx",e="93d4690989e2b2b09b13eab9ee3382c32a103823",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldSpec.tsx",statementMap:{0:{start:{line:6,column:2},end:{line:34,column:3}},1:{start:{line:8,column:6},end:{line:8,column:19}},2:{start:{line:10,column:6},end:{line:10,column:74}},3:{start:{line:12,column:6},end:{line:12,column:19}},4:{start:{line:14,column:6},end:{line:14,column:22}},5:{start:{line:16,column:6},end:{line:16,column:19}},6:{start:{line:18,column:6},end:{line:18,column:19}},7:{start:{line:20,column:6},end:{line:20,column:19}},8:{start:{line:22,column:6},end:{line:22,column:19}},9:{start:{line:24,column:6},end:{line:24,column:19}},10:{start:{line:26,column:6},end:{line:26,column:22}},11:{start:{line:28,column:6},end:{line:28,column:22}},12:{start:{line:30,column:6},end:{line:30,column:22}},13:{start:{line:32,column:6},end:{line:32,column:58}},14:{start:{line:33,column:6},end:{line:33,column:19}},15:{start:{line:36,column:18},end:{line:39,column:1}},16:{start:{line:37,column:20},end:{line:37,column:55}},17:{start:{line:38,column:2},end:{line:38,column:190}}},fnMap:{0:{name:"getElementFromType",decl:{start:{line:5,column:9},end:{line:5,column:27}},loc:{start:{line:5,column:39},end:{line:35,column:1}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:36,column:18},end:{line:36,column:19}},loc:{start:{line:36,column:29},end:{line:39,column:1}},line:36}},branchMap:{0:{loc:{start:{line:6,column:2},end:{line:34,column:3}},type:"switch",locations:[{start:{line:7,column:4},end:{line:8,column:19}},{start:{line:9,column:4},end:{line:10,column:74}},{start:{line:11,column:4},end:{line:12,column:19}},{start:{line:13,column:4},end:{line:14,column:22}},{start:{line:15,column:4},end:{line:16,column:19}},{start:{line:17,column:4},end:{line:18,column:19}},{start:{line:19,column:4},end:{line:20,column:19}},{start:{line:21,column:4},end:{line:22,column:19}},{start:{line:23,column:4},end:{line:24,column:19}},{start:{line:25,column:4},end:{line:26,column:22}},{start:{line:27,column:4},end:{line:28,column:22}},{start:{line:29,column:4},end:{line:30,column:22}},{start:{line:31,column:4},end:{line:33,column:19}}],line:6},1:{loc:{start:{line:10,column:13},end:{line:10,column:73}},type:"cond-expr",locations:[{start:{line:10,column:57},end:{line:10,column:65}},{start:{line:10,column:68},end:{line:10,column:73}}],line:10}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0},f:{0:0,1:0},b:{0:[0,0,0,0,0,0,0,0,0,0,0,0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldSpec.tsx"],names:[],mappings:"AA2CM;AA3CN,OAAO,WAAgC;AACvC,OAAO,eAA4D;AACnE,OAAO,cAAsC;AAE7C,SAAS,mBAAmB,WAAyF;AACnH,UAAO,UAAU,MAAM;AAAA,IACrB,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAQ,OAAO,KAAK,UAAU,MAAO,EAAE,UAAU,IAAI,WAAW;AAAA,IAClE,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAO;AAAA,IACT;AACE,cAAQ,KAAK,uBAAuB,UAAU,IAAI;AAClD,aAAO;AAAA,EACX;AACF;AAIA,MAAM,YAAsC,CAAC,UAAU;AACrD,QAAM,YAAY,mBAAmB,MAAM,SAAU;AAErD,SACE,oBAAC,aAAU,OAAO,MAAM,OAAO,QAAQ,MAAM,QAAQ,WAAW,MAAM,WAAW,OAAO,MAAM,OAC5F,8BAAC,aAAW,GAAG,OAAO,GACxB;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"93d4690989e2b2b09b13eab9ee3382c32a103823"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Uo=function(){return s},s}Uo();function URe(n){switch(Uo().f[0]++,Uo().s[0]++,n.type){case"color":return Uo().b[0][0]++,Uo().s[1]++,Ls;case"enum":return Uo().b[0][1]++,Uo().s[2]++,Object.keys(n.values).length<=3?(Uo().b[1][0]++,Ry):(Uo().b[1][1]++,Ls);case"boolean":return Uo().b[0][2]++,Uo().s[3]++,Ls;case"array":return Uo().b[0][3]++,Uo().s[4]++,Ry;case"resolvedImage":return Uo().b[0][4]++,Uo().s[5]++,Ls;case"number":return Uo().b[0][5]++,Uo().s[6]++,Ls;case"string":return Uo().b[0][6]++,Uo().s[7]++,Ls;case"formatted":return Uo().b[0][7]++,Uo().s[8]++,Ls;case"padding":return Uo().b[0][8]++,Uo().s[9]++,Ls;case"numberArray":return Uo().b[0][9]++,Uo().s[10]++,Ry;case"colorArray":return Uo().b[0][10]++,Uo().s[11]++,Ry;case"variableAnchorOffsetCollection":return Uo().b[0][11]++,Uo().s[12]++,Ry;default:return Uo().b[0][12]++,Uo().s[13]++,console.warn("No such type for: "+n.type),Uo().s[14]++,Ls}}Uo().s[15]++;const KRe=n=>{Uo().f[1]++;const e=(Uo().s[16]++,URe(n.fieldSpec));return Uo().s[17]++,ie.jsx(e,{label:n.label,action:n.action,fieldSpec:n.fieldSpec,error:n.error,children:ie.jsx(ix,{...n})})};function bu(){var n="/home/runner/work/maputnik/maputnik/src/components/_FunctionButtons.tsx",e="8e77c8fbe0fbc5796ba925837fc7526418b4854b",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/_FunctionButtons.tsx",statementMap:{0:{start:{line:9,column:14},end:{line:9,column:26}},1:{start:{line:10,column:4},end:{line:60,column:5}},2:{start:{line:11,column:52},end:{line:19,column:7}},3:{start:{line:20,column:50},end:{line:28,column:7}},4:{start:{line:30,column:6},end:{line:40,column:7}},5:{start:{line:31,column:8},end:{line:39,column:10}},6:{start:{line:41,column:6},end:{line:45,column:11}},7:{start:{line:46,column:11},end:{line:60,column:5}},8:{start:{line:47,column:51},end:{line:56,column:7}},9:{start:{line:57,column:6},end:{line:57,column:76}},10:{start:{line:59,column:6},end:{line:59,column:44}},11:{start:{line:63,column:29},end:{line:63,column:76}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:11},end:{line:61,column:3}},line:8}},branchMap:{0:{loc:{start:{line:10,column:4},end:{line:60,column:5}},type:"if",locations:[{start:{line:10,column:4},end:{line:60,column:5}},{start:{line:46,column:11},end:{line:60,column:5}}],line:10},1:{loc:{start:{line:30,column:6},end:{line:40,column:7}},type:"if",locations:[{start:{line:30,column:6},end:{line:40,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:30},2:{loc:{start:{line:46,column:11},end:{line:60,column:5}},type:"if",locations:[{start:{line:46,column:11},end:{line:60,column:5}},{start:{line:58,column:11},end:{line:60,column:5}}],line:46}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},f:{0:0},b:{0:[0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_FunctionButtons.tsx"],names:[],mappings:"AA0BU,cAsBG,YAtBH;AA1BV,OAAO,WAAW;AAElB,OAAO,iBAAiB;AACxB,SAAQ,aAAa,qBAAoB;AACzC,SAAS,sBAAsB;AAC/B,SAA+B,uBAAuB;AAUtD,MAAM,qCAAqC,MAAM,UAA6C;AAAA,EAC5F,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AAErB,QAAI,KAAK,MAAM,UAAU,YAAY,WAAW,SAAS,MAAM,GAAG;AAChE,YAAM,wBACJ;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,SAAS,KAAK,MAAM;AAAA,UACpB,OAAO,EAAE,uBAAuB;AAAA,UAEhC,8BAAC,kBAAe;AAAA;AAAA,MAClB;AAGF,YAAM,sBAAsB;AAAA,QAAC;AAAA;AAAA,UAC3B,WAAU;AAAA,UACV,SAAS,KAAK,MAAM;AAAA,UACpB,OAAO,EAAE,uCAAuC;AAAA,UAEhD,8BAAC,eAAY;AAAA;AAAA,MACf;AAEA,UAAI;AACJ,UAAI,KAAK,MAAM,UAAU,eAAe,MAAM,eAAe;AAC3D,8BAAsB;AAAA,UAAC;AAAA;AAAA,YACrB,WAAU;AAAA,YACV,SAAS,KAAK,MAAM;AAAA,YACpB,OAAO,EAAE,mCAAmC;AAAA,YAE5C,8BAAC,iBAAc;AAAA;AAAA,QACjB;AAAA,MACF;AACA,aAAO,qBAAC,SACL;AAAA;AAAA,QACA;AAAA,QACA;AAAA,SACH;AAAA,IACF,WAAW,KAAK,MAAM,UAAU,YAAY,WAAW,SAAS,WAAW,GAAG;AAC5E,YAAM,uBAAuB;AAAA,QAAC;AAAA;AAAA,UAC5B,WAAU;AAAA,UACV,SAAS,KAAK,MAAM;AAAA,UACpB,OAAO,EAAE,4CAA4C;AAAA,UACrD,eAAY;AAAA,UAEZ,8BAAC,eAAY;AAAA;AAAA,MACf;AACA,aAAO,oBAAC,SAAK,gCAAqB;AAAA,IACpC,OAAO;AACL,aAAO,oBAAC,SAAI;AAAA,IACd;AAAA,EACF;AACF;AAEA,MAAM,uBAAuB,gBAAgB,EAAE,4BAA4B;AAC3E,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8e77c8fbe0fbc5796ba925837fc7526418b4854b"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return bu=function(){return s},s}bu();class LRe extends En.Component{render(){bu().f[0]++;const e=(bu().s[0]++,this.props.t);if(bu().s[1]++,this.props.fieldSpec.expression?.parameters.includes("zoom")){bu().b[0][0]++;const t=(bu().s[2]++,ie.jsx(Zs,{className:"maputnik-make-zoom-function",onClick:this.props.onExpressionClick,title:e("Convert to expression"),children:ie.jsx(R4,{})})),i=(bu().s[3]++,ie.jsx(Zs,{className:"maputnik-make-zoom-function",onClick:this.props.onZoomClick,title:e("Convert property into a zoom function"),children:ie.jsx(ez,{})}));let r;return bu().s[4]++,this.props.fieldSpec["property-type"]==="data-driven"?(bu().b[1][0]++,bu().s[5]++,r=ie.jsx(Zs,{className:"maputnik-make-data-function",onClick:this.props.onDataClick,title:e("Convert property to data function"),children:ie.jsx(Ffe,{})})):bu().b[1][1]++,bu().s[6]++,ie.jsxs("div",{children:[t,r,i]})}else if(bu().b[0][1]++,bu().s[7]++,this.props.fieldSpec.expression?.parameters.includes("elevation")){bu().b[2][0]++;const t=(bu().s[8]++,ie.jsx(Zs,{className:"maputnik-make-elevation-function",onClick:this.props.onElevationClick,title:e("Convert property into a elevation function"),"data-wd-key":"make-elevation-function",children:ie.jsx(ez,{})}));return bu().s[9]++,ie.jsx("div",{children:t})}else return bu().b[2][1]++,bu().s[10]++,ie.jsx("div",{})}}const FRe=(bu().s[11]++,No()(LRe));function Bg(){var n="/home/runner/work/maputnik/maputnik/src/components/_SpecProperty.tsx",e="3e6c7200aa37e60f3f49ecaa91bce3a63befeb7e",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/_SpecProperty.tsx",statementMap:{0:{start:{line:7,column:24},end:{line:9,column:3}},1:{start:{line:11,column:45},end:{line:11,column:55}},2:{start:{line:12,column:40},end:{line:21,column:5}},3:{start:{line:22,column:18},end:{line:22,column:53}},4:{start:{line:23,column:4},end:{line:32,column:6}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:33,column:3}},line:10}},branchMap:{0:{loc:{start:{line:29,column:34},end:{line:29,column:60}},type:"binary-expr",locations:[{start:{line:29,column:34},end:{line:29,column:54}},{start:{line:29,column:58},end:{line:29,column:60}}],line:29}},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_SpecProperty.tsx"],names:[],mappings:"AA6BwB;AA7BxB,OAAO,WAAW;AAElB,OAAO,eAAsC;AAC7C,OAAO,qBAAqB;AAE5B,OAAO,wBAAwB;AAgB/B,qBAAqB,qBAAqB,MAAM,UAA6B;AAAA,EAC3E,OAAO,eAAe;AAAA,IACpB,QAAQ,CAAC;AAAA,EACX;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,QAAQ,WAAW,UAAS,IAAI,KAAK;AAE5C,UAAM,cAAc;AAAA,MAAC;AAAA;AAAA,QACnB,WAAW,KAAK,MAAM;AAAA,QACtB,aAAa,KAAK,MAAM;AAAA,QACxB,aAAa,KAAK,MAAM;AAAA,QACxB,mBAAmB,KAAK,MAAM;AAAA,QAC9B,kBAAkB,KAAK,MAAM;AAAA;AAAA,IAC/B;AAEA,UAAM,QAAQ,OAAQ,YAAU,MAAI,SAAgB;AAEpD,WAAO;AAAA,MAAC;AAAA;AAAA,QACL,GAAG,KAAK;AAAA,QACT;AAAA,QACA,WAAW,KAAK,MAAM;AAAA,QACtB,OAAO,mBAAmB,KAAK,MAAM,aAAa,EAAE;AAAA,QACpD,QAAQ;AAAA;AAAA,IACV;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"3e6c7200aa37e60f3f49ecaa91bce3a63befeb7e"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Bg=function(){return s},s}Bg();class zRe extends En.Component{static defaultProps=(Bg().s[0]++,{errors:{}});render(){Bg().f[0]++;const{errors:e,fieldName:t,fieldType:i}=(Bg().s[1]++,this.props),r=(Bg().s[2]++,ie.jsx(FRe,{fieldSpec:this.props.fieldSpec,onZoomClick:this.props.onZoomClick,onDataClick:this.props.onDataClick,onExpressionClick:this.props.onExpressionClick,onElevationClick:this.props.onElevationClick})),o=(Bg().s[3]++,e[i+"."+t]);return Bg().s[4]++,ie.jsx(KRe,{...this.props,error:o,fieldSpec:this.props.fieldSpec,label:L6((Bg().b[0][0]++,this.props.fieldName||(Bg().b[0][1]++,""))),action:r})}}function pd(){var n="/home/runner/work/maputnik/maputnik/src/libs/sort-numerically.ts",e="e8906f642b33ab7d7a780fc0db870f7e4872d29c",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/sort-numerically.ts",statementMap:{0:{start:{line:2,column:12},end:{line:2,column:17}},1:{start:{line:3,column:12},end:{line:3,column:17}},2:{start:{line:4,column:2},end:{line:10,column:3}},3:{start:{line:5,column:4},end:{line:5,column:14}},4:{start:{line:6,column:9},end:{line:10,column:3}},5:{start:{line:7,column:4},end:{line:7,column:13}},6:{start:{line:9,column:4},end:{line:9,column:13}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:1,column:15},end:{line:1,column:16}},loc:{start:{line:1,column:36},end:{line:11,column:1}},line:1}},branchMap:{0:{loc:{start:{line:4,column:2},end:{line:10,column:3}},type:"if",locations:[{start:{line:4,column:2},end:{line:10,column:3}},{start:{line:6,column:9},end:{line:10,column:3}}],line:4},1:{loc:{start:{line:6,column:9},end:{line:10,column:3}},type:"if",locations:[{start:{line:6,column:9},end:{line:10,column:3}},{start:{line:8,column:9},end:{line:10,column:3}}],line:6}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/sort-numerically.ts"],names:[],mappings:"AAAA,wBAAwB,MAAuB,MAAsB;AACnE,QAAM,IAAI,CAAC;AACX,QAAM,IAAI,CAAC;AAEX,MAAG,IAAI,GAAG;AACR,WAAO;AAAA,EACT,WACQ,IAAI,GAAG;AACb,WAAO;AAAA,EACT,OACK;AACH,WAAO;AAAA,EACT;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e8906f642b33ab7d7a780fc0db870f7e4872d29c"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return pd=function(){return s},s}pd();function Zse(n,e){pd().f[0]++;const t=(pd().s[0]++,+n),i=(pd().s[1]++,+e);return pd().s[2]++,t<i?(pd().b[0][0]++,pd().s[3]++,-1):(pd().b[0][1]++,pd().s[4]++,t>i?(pd().b[1][0]++,pd().s[5]++,1):(pd().b[1][1]++,pd().s[6]++,0))}function cm(){var n="/home/runner/work/maputnik/maputnik/src/libs/spec-helper.ts",e="2f98128f0f990b67a049c58486c1fab4310fbcfa",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/spec-helper.ts",statementMap:{0:{start:{line:2,column:2},end:{line:4,column:3}},1:{start:{line:3,column:4},end:{line:3,column:24}},2:{start:{line:5,column:19},end:{line:11,column:3}},3:{start:{line:12,column:2},end:{line:12,column:35}}},fnMap:{0:{name:"findDefaultFromSpec",decl:{start:{line:1,column:16},end:{line:1,column:35}},loc:{start:{line:1,column:42},end:{line:13,column:1}},line:1}},branchMap:{0:{loc:{start:{line:2,column:2},end:{line:4,column:3}},type:"if",locations:[{start:{line:2,column:2},end:{line:4,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:2},1:{loc:{start:{line:12,column:9},end:{line:12,column:34}},type:"binary-expr",locations:[{start:{line:12,column:9},end:{line:12,column:28}},{start:{line:12,column:32},end:{line:12,column:34}}],line:12}},s:{0:0,1:0,2:0,3:0},f:{0:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/spec-helper.ts"],names:[],mappings:"AAGO,gBAAS,oBAAoB,MAAyE;AAC3G,MAAI,OAAO,UAAU,eAAe,KAAK,MAAM,SAAS,GAAG;AACzD,WAAO,KAAK;AAAA,EACd;AAEA,QAAM,WAAW;AAAA,IACf,SAAS;AAAA,IACT,UAAU;AAAA,IACV,WAAW;AAAA,IACX,UAAU;AAAA,IACV,SAAS,CAAC;AAAA,EACZ;AAEA,SAAO,SAAS,KAAK,IAAI,KAAK;AAChC;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2f98128f0f990b67a049c58486c1fab4310fbcfa"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return cm=function(){return s},s}cm();function op(n){if(cm().f[0]++,cm().s[0]++,Object.prototype.hasOwnProperty.call(n,"default"))return cm().b[0][0]++,cm().s[1]++,n.default;cm().b[0][1]++;const e=(cm().s[2]++,{color:"#000000",string:"",boolean:!1,number:0,array:[]});return cm().s[3]++,cm().b[1][0]++,e[n.type]||(cm().b[1][1]++,"")}function rx(){var n="/home/runner/work/maputnik/maputnik/src/components/_DeleteStopButton.tsx",e="03de18cded5f486201afd886787bbdda710eafe3",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/_DeleteStopButton.tsx",statementMap:{0:{start:{line:8,column:14},end:{line:8,column:26}},1:{start:{line:9,column:4},end:{line:17,column:6}},2:{start:{line:20,column:25},end:{line:20,column:68}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:11},end:{line:18,column:3}},line:7}},branchMap:{},s:{0:0,1:0,2:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_DeleteStopButton.tsx"],names:[],mappings:"AAoBM;AApBN,OAAO,WAAW;AAElB,OAAO,iBAAiB;AACxB,SAAQ,gBAAe;AACvB,SAA+B,uBAAuB;AAQtD,MAAM,iCAAiC,MAAM,UAAyC;AAAA,EACpF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,SAAS,KAAK,MAAM;AAAA,QACpB,OAAO,EAAE,6BAA6B;AAAA,QAEtC,8BAAC,YAAS;AAAA;AAAA,IACZ;AAAA,EACF;AACF;AAEA,MAAM,mBAAmB,gBAAgB,EAAE,wBAAwB;AACnE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"03de18cded5f486201afd886787bbdda710eafe3"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return rx=function(){return s},s}rx();class jRe extends En.Component{render(){rx().f[0]++;const e=(rx().s[0]++,this.props.t);return rx().s[1]++,ie.jsx(Zs,{className:"maputnik-delete-stop",onClick:this.props.onClick,title:e("Remove zoom level from stop"),children:ie.jsx(Hb,{})})}}const Xse=(rx().s[2]++,No()(jRe));function Vt(){var n="/home/runner/work/maputnik/maputnik/src/components/_DataProperty.tsx",e="a1f2034e8330e69a4f4de946d81cea8ff55472f7",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/_DataProperty.tsx",statementMap:{0:{start:{line:20,column:2},end:{line:29,column:3}},1:{start:{line:21,column:4},end:{line:28,column:7}},2:{start:{line:22,column:6},end:{line:27,column:7}},3:{start:{line:23,column:8},end:{line:25,column:9}},4:{start:{line:24,column:10},end:{line:24,column:33}},5:{start:{line:26,column:8},end:{line:26,column:39}},6:{start:{line:30,column:2},end:{line:30,column:17}},7:{start:{line:33,column:10},end:{line:35,column:3}},8:{start:{line:37,column:20},end:{line:37,column:55}},9:{start:{line:38,column:4},end:{line:42,column:5}},10:{start:{line:39,column:6},end:{line:41,column:9}},11:{start:{line:45,column:20},end:{line:45,column:45}},12:{start:{line:46,column:4},end:{line:50,column:5}},13:{start:{line:47,column:6},end:{line:49,column:8}},14:{start:{line:51,column:4},end:{line:51,column:16}},15:{start:{line:54,column:4},end:{line:56,column:5}},16:{start:{line:55,column:6},end:{line:55,column:27}},17:{start:{line:57,column:4},end:{line:59,column:5}},18:{start:{line:58,column:6},end:{line:58,column:24}},19:{start:{line:60,column:4},end:{line:60,column:25}},20:{start:{line:63,column:4},end:{line:67,column:5}},21:{start:{line:64,column:6},end:{line:64,column:83}},22:{start:{line:66,column:6},end:{line:66,column:53}},23:{start:{line:71,column:26},end:{line:76,column:70}},24:{start:{line:72,column:6},end:{line:75,column:8}},25:{start:{line:76,column:22},end:{line:76,column:69}},26:{start:{line:77,column:20},end:{line:77,column:22}},27:{start:{line:78,column:4},end:{line:80,column:7}},28:{start:{line:79,column:6},end:{line:79,column:30}},29:{start:{line:81,column:4},end:{line:83,column:7}},30:{start:{line:84,column:4},end:{line:84,column:50}},31:{start:{line:84,column:39},end:{line:84,column:48}},32:{start:{line:86,column:13},end:{line:106,column:3}},33:{start:{line:87,column:4},end:{line:104,column:5}},34:{start:{line:88,column:6},end:{line:91,column:8}},35:{start:{line:93,column:24},end:{line:93,column:61}},36:{start:{line:94,column:6},end:{line:103,column:8}},37:{start:{line:105,column:4},end:{line:105,column:42}},38:{start:{line:108,column:18},end:{line:108,column:56}},39:{start:{line:109,column:4},end:{line:115,column:6}},40:{start:{line:116,column:25},end:{line:116,column:53}},41:{start:{line:117,column:25},end:{line:120,column:5}},42:{start:{line:121,column:4},end:{line:121,column:54}},43:{start:{line:124,column:25},end:{line:127,column:5}},44:{start:{line:128,column:4},end:{line:130,column:5}},45:{start:{line:129,column:6},end:{line:129,column:34}},46:{start:{line:131,column:4},end:{line:131,column:60}},47:{start:{line:134,column:4},end:{line:141,column:5}},48:{start:{line:135,column:6},end:{line:135,column:42}},49:{start:{line:137,column:6},end:{line:140,column:9}},50:{start:{line:144,column:4},end:{line:148,column:5}},51:{start:{line:145,column:6},end:{line:145,column:43}},52:{start:{line:147,column:6},end:{line:147,column:40}},53:{start:{line:149,column:4},end:{line:149,column:58}},54:{start:{line:152,column:14},end:{line:152,column:26}},55:{start:{line:153,column:4},end:{line:155,column:5}},56:{start:{line:154,column:6},end:{line:154,column:78}},57:{start:{line:157,column:4},end:{line:205,column:5}},58:{start:{line:158,column:6},end:{line:204,column:9}},59:{start:{line:159,column:26},end:{line:159,column:77}},60:{start:{line:160,column:20},end:{line:160,column:40}},61:{start:{line:161,column:26},end:{line:161,column:79}},62:{start:{line:162,column:22},end:{line:162,column:29}},63:{start:{line:163,column:46},end:{line:163,column:122}},64:{start:{line:164,column:26},end:{line:169,column:9}},65:{start:{line:168,column:33},end:{line:168,column:97}},66:{start:{line:171,column:8},end:{line:175,column:9}},67:{start:{line:172,column:10},end:{line:172,column:73}},68:{start:{line:174,column:10},end:{line:174,column:73}},69:{start:{line:176,column:24},end:{line:176,column:28}},70:{start:{line:177,column:8},end:{line:188,column:9}},71:{start:{line:178,column:10},end:{line:187,column:15}},72:{start:{line:183,column:37},end:{line:183,column:101}},73:{start:{line:189,column:8},end:{line:203,column:18}},74:{start:{line:199,column:41},end:{line:199,column:110}},75:{start:{line:206,column:4},end:{line:306,column:12}},76:{start:{line:217,column:39},end:{line:217,column:67}},77:{start:{line:235,column:43},end:{line:235,column:68}},78:{start:{line:250,column:39},end:{line:250,column:83}},79:{start:{line:266,column:42},end:{line:266,column:85}},80:{start:{line:309,column:21},end:{line:309,column:60}}},fnMap:{0:{name:"setStopRefs",decl:{start:{line:18,column:9},end:{line:18,column:20}},loc:{start:{line:18,column:35},end:{line:31,column:1}},line:18},1:{name:"(anonymous_1)",decl:{start:{line:21,column:30},end:{line:21,column:31}},loc:{start:{line:21,column:45},end:{line:28,column:5}},line:21},2:{name:"(anonymous_2)",decl:{start:{line:36,column:2},end:{line:36,column:3}},loc:{start:{line:36,column:22},end:{line:43,column:3}},line:36},3:{name:"(anonymous_3)",decl:{start:{line:44,column:2},end:{line:44,column:3}},loc:{start:{line:44,column:48},end:{line:52,column:3}},line:44},4:{name:"(anonymous_4)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:34},end:{line:61,column:3}},line:53},5:{name:"(anonymous_5)",decl:{start:{line:62,column:2},end:{line:62,column:3}},loc:{start:{line:62,column:34},end:{line:68,column:3}},line:62},6:{name:"(anonymous_6)",decl:{start:{line:70,column:2},end:{line:70,column:3}},loc:{start:{line:70,column:26},end:{line:85,column:3}},line:70},7:{name:"(anonymous_7)",decl:{start:{line:71,column:36},end:{line:71,column:37}},loc:{start:{line:71,column:51},end:{line:76,column:5}},line:71},8:{name:"(anonymous_8)",decl:{start:{line:76,column:12},end:{line:76,column:13}},loc:{start:{line:76,column:22},end:{line:76,column:69}},line:76},9:{name:"(anonymous_9)",decl:{start:{line:78,column:26},end:{line:78,column:27}},loc:{start:{line:78,column:41},end:{line:80,column:5}},line:78},10:{name:"(anonymous_10)",decl:{start:{line:84,column:29},end:{line:84,column:30}},loc:{start:{line:84,column:39},end:{line:84,column:48}},line:84},11:{name:"(anonymous_11)",decl:{start:{line:86,column:13},end:{line:86,column:14}},loc:{start:{line:86,column:35},end:{line:106,column:3}},line:86},12:{name:"(anonymous_12)",decl:{start:{line:107,column:2},end:{line:107,column:3}},loc:{start:{line:107,column:41},end:{line:122,column:3}},line:107},13:{name:"(anonymous_13)",decl:{start:{line:123,column:2},end:{line:123,column:3}},loc:{start:{line:123,column:23},end:{line:132,column:3}},line:123},14:{name:"(anonymous_14)",decl:{start:{line:133,column:2},end:{line:133,column:3}},loc:{start:{line:133,column:26},end:{line:142,column:3}},line:133},15:{name:"(anonymous_15)",decl:{start:{line:143,column:2},end:{line:143,column:3}},loc:{start:{line:143,column:40},end:{line:150,column:3}},line:143},16:{name:"(anonymous_16)",decl:{start:{line:151,column:2},end:{line:151,column:3}},loc:{start:{line:151,column:11},end:{line:307,column:3}},line:151},17:{name:"(anonymous_17)",decl:{start:{line:158,column:46},end:{line:158,column:47}},loc:{start:{line:158,column:61},end:{line:204,column:7}},line:158},18:{name:"(anonymous_18)",decl:{start:{line:168,column:20},end:{line:168,column:21}},loc:{start:{line:168,column:33},end:{line:168,column:97}},line:168},19:{name:"(anonymous_19)",decl:{start:{line:183,column:24},end:{line:183,column:25}},loc:{start:{line:183,column:37},end:{line:183,column:101}},line:183},20:{name:"(anonymous_20)",decl:{start:{line:199,column:24},end:{line:199,column:25}},loc:{start:{line:199,column:41},end:{line:199,column:110}},line:199},21:{name:"(anonymous_21)",decl:{start:{line:217,column:26},end:{line:217,column:27}},loc:{start:{line:217,column:39},end:{line:217,column:67}},line:217},22:{name:"(anonymous_22)",decl:{start:{line:235,column:26},end:{line:235,column:27}},loc:{start:{line:235,column:43},end:{line:235,column:68}},line:235},23:{name:"(anonymous_23)",decl:{start:{line:250,column:26},end:{line:250,column:27}},loc:{start:{line:250,column:39},end:{line:250,column:83}},line:250},24:{name:"(anonymous_24)",decl:{start:{line:266,column:26},end:{line:266,column:27}},loc:{start:{line:266,column:42},end:{line:266,column:85}},line:266}},branchMap:{0:{loc:{start:{line:20,column:2},end:{line:29,column:3}},type:"if",locations:[{start:{line:20,column:2},end:{line:29,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:20},1:{loc:{start:{line:20,column:6},end:{line:20,column:38}},type:"binary-expr",locations:[{start:{line:20,column:6},end:{line:20,column:17}},{start:{line:20,column:21},end:{line:20,column:38}}],line:20},2:{loc:{start:{line:22,column:6},end:{line:27,column:7}},type:"if",locations:[{start:{line:22,column:6},end:{line:27,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:22},3:{loc:{start:{line:23,column:8},end:{line:25,column:9}},type:"if",locations:[{start:{line:23,column:8},end:{line:25,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:23},4:{loc:{start:{line:38,column:4},end:{line:42,column:5}},type:"if",locations:[{start:{line:38,column:4},end:{line:42,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:38},5:{loc:{start:{line:46,column:4},end:{line:50,column:5}},type:"if",locations:[{start:{line:46,column:4},end:{line:50,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:46},6:{loc:{start:{line:54,column:4},end:{line:56,column:5}},type:"if",locations:[{start:{line:54,column:4},end:{line:56,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:54},7:{loc:{start:{line:57,column:4},end:{line:59,column:5}},type:"if",locations:[{start:{line:57,column:4},end:{line:59,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:57},8:{loc:{start:{line:63,column:4},end:{line:67,column:5}},type:"if",locations:[{start:{line:63,column:4},end:{line:67,column:5}},{start:{line:65,column:11},end:{line:67,column:5}}],line:63},9:{loc:{start:{line:87,column:4},end:{line:104,column:5}},type:"if",locations:[{start:{line:87,column:4},end:{line:104,column:5}},{start:{line:92,column:11},end:{line:104,column:5}}],line:87},10:{loc:{start:{line:93,column:24},end:{line:93,column:61}},type:"cond-expr",locations:[{start:{line:93,column:55},end:{line:93,column:57}},{start:{line:93,column:60},end:{line:93,column:61}}],line:93},11:{loc:{start:{line:108,column:18},end:{line:108,column:56}},type:"binary-expr",locations:[{start:{line:108,column:18},end:{line:108,column:50}},{start:{line:108,column:54},end:{line:108,column:56}}],line:108},12:{loc:{start:{line:112,column:14},end:{line:112,column:58}},type:"cond-expr",locations:[{start:{line:112,column:41},end:{line:112,column:42}},{start:{line:112,column:45},end:{line:112,column:58}}],line:112},13:{loc:{start:{line:128,column:4},end:{line:130,column:5}},type:"if",locations:[{start:{line:128,column:4},end:{line:130,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:128},14:{loc:{start:{line:134,column:4},end:{line:141,column:5}},type:"if",locations:[{start:{line:134,column:4},end:{line:141,column:5}},{start:{line:136,column:11},end:{line:141,column:5}}],line:134},15:{loc:{start:{line:134,column:8},end:{line:134,column:70}},type:"binary-expr",locations:[{start:{line:134,column:8},end:{line:134,column:33}},{start:{line:134,column:37},end:{line:134,column:70}}],line:134},16:{loc:{start:{line:144,column:4},end:{line:148,column:5}},type:"if",locations:[{start:{line:144,column:4},end:{line:148,column:5}},{start:{line:146,column:11},end:{line:148,column:5}}],line:144},17:{loc:{start:{line:153,column:4},end:{line:155,column:5}},type:"if",locations:[{start:{line:153,column:4},end:{line:155,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:153},18:{loc:{start:{line:157,column:4},end:{line:205,column:5}},type:"if",locations:[{start:{line:157,column:4},end:{line:205,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:157},19:{loc:{start:{line:159,column:26},end:{line:159,column:77}},type:"cond-expr",locations:[{start:{line:159,column:56},end:{line:159,column:68}},{start:{line:159,column:71},end:{line:159,column:77}}],line:159},20:{loc:{start:{line:161,column:26},end:{line:161,column:79}},type:"cond-expr",locations:[{start:{line:161,column:56},end:{line:161,column:69}},{start:{line:161,column:72},end:{line:161,column:79}}],line:161},21:{loc:{start:{line:171,column:8},end:{line:175,column:9}},type:"if",locations:[{start:{line:171,column:8},end:{line:175,column:9}},{start:{line:173,column:15},end:{line:175,column:9}}],line:171},22:{loc:{start:{line:177,column:8},end:{line:188,column:9}},type:"if",locations:[{start:{line:177,column:8},end:{line:188,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:177},23:{loc:{start:{line:225,column:8},end:{line:240,column:9}},type:"binary-expr",locations:[{start:{line:225,column:8},end:{line:225,column:45}},{start:{line:225,column:65},end:{line:240,column:9}}],line:225},24:{loc:{start:{line:256,column:8},end:{line:271,column:9}},type:"binary-expr",locations:[{start:{line:256,column:8},end:{line:256,column:18}},{start:{line:256,column:38},end:{line:271,column:9}}],line:256},25:{loc:{start:{line:272,column:8},end:{line:280,column:15}},type:"binary-expr",locations:[{start:{line:272,column:8},end:{line:272,column:18}},{start:{line:272,column:38},end:{line:280,column:15}}],line:272},26:{loc:{start:{line:282,column:10},end:{line:292,column:11}},type:"binary-expr",locations:[{start:{line:282,column:10},end:{line:282,column:20}},{start:{line:282,column:40},end:{line:292,column:11}}],line:282}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0],26:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_DataProperty.tsx"],names:[],mappings:"AAuO8B,cA8Bf,YA9Be;AAvO9B,OAAO,WAAW;AAClB,SAAQ,sBAAqB;AAC7B,SAAQ,sBAAqB;AAC7B,OAAO,YAAY;AAEnB,OAAO,iBAAiB;AACxB,OAAO,eAAe;AACtB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,OAAO,YAAY;AACnB,OAAO,qBAAqB;AAC5B,SAAQ,2BAA0B;AAClC,SAA+B,uBAAuB;AAEtD,OAAO,wBAAwB;AAC/B,OAAO,sBAAsB;AAK7B,SAAS,YAAY,OAAkC,OAA0B;AAE/E,MAAI;AAEJ,MAAG,MAAM,SAAS,MAAM,MAAM,OAAO;AACnC,UAAM,MAAM,MAAM,QAAQ,CAAC,MAAM,QAAQ;AACvC,UAAG,CAAC,OAAO,UAAU,eAAe,KAAK,MAAM,MAAM,GAAG,GAAG;AACzD,YAAG,CAAC,SAAS;AACX,oBAAU,EAAC,GAAG,MAAK;AAAA,QACrB;AACA,gBAAQ,GAAG,IAAI,OAAO,OAAO;AAAA,MAC/B;AAAA,IACF,CAAC;AAAA,EACH;AAEA,SAAO;AACT;AAgCA,MAAM,6BAA6B,MAAM,UAAwD;AAAA,EAC/F,QAAQ;AAAA,IACN,MAAM,CAAC;AAAA,EACT;AAAA,EAEA,oBAAoB;AAClB,UAAM,UAAU,YAAY,KAAK,OAAO,KAAK,KAAK;AAElD,QAAG,SAAS;AACV,WAAK,SAAS;AAAA,QACZ,MAAM;AAAA,MACR,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAA4C,OAA0B;AACpG,UAAM,UAAU,YAAY,OAAO,KAAK;AACxC,QAAG,SAAS;AACV,aAAO;AAAA,QACL,MAAM;AAAA,MACR;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAAA,EAEA,qBAAqB,WAAgB;AACnC,QAAI,UAAU,WAAW,cAAc;AACrC,aAAO;AAAA,IACT;AACA,QAAI,UAAU,SAAS,UAAU;AAC/B,aAAO;AAAA,IACT;AACA,WAAO;AAAA,EACT;AAAA,EAEA,qBAAqB,WAAgB;AACnC,QAAI,UAAU,WAAW,cAAc;AACrC,aAAO,CAAC,eAAe,eAAe,YAAY,eAAe,UAAU;AAAA,IAC7E,OACK;AACH,aAAO,CAAC,eAAe,YAAY,UAAU;AAAA,IAC/C;AAAA,EACF;AAAA;AAAA,EAGA,iBAAiB,OAAe;AAC9B,UAAM,gBAAgB,MACnB,IAAI,CAAC,MAAM,QAAQ;AAClB,aAAO;AAAA,QACL,KAAK,KAAK,MAAM,KAAK,GAAG;AAAA,QACxB,MAAM;AAAA,MACR;AAAA,IACF,CAAC,EAEA,KAAK,CAAC,GAAG,MAAM,gBAAgB,EAAE,KAAK,CAAC,EAAE,MAAM,EAAE,KAAK,CAAC,EAAE,IAAI,CAAC;AAGjE,UAAM,UAAU,CAAC;AACjB,kBACG,QAAQ,CAAC,MAAM,QAAO;AACrB,cAAQ,GAAG,IAAI,KAAK;AAAA,IACtB,CAAC;AAEH,SAAK,SAAS;AAAA,MACZ,MAAM;AAAA,IACR,CAAC;AAED,WAAO,cAAc,IAAI,CAAC,SAAS,KAAK,IAAI;AAAA,EAC9C;AAAA,EAEA,WAAW,CAAC,WAAmB,UAAe;AAC5C,QAAI,MAAM,SAAS,YAAY;AAC7B,cAAQ;AAAA,QACN,MAAM,MAAM;AAAA,QACZ,UAAU,MAAM;AAAA,MAClB;AAAA,IACF,OACK;AACH,YAAM,YAAY,MAAM,SAAS,gBAAgB,KAAK;AACtD,cAAQ;AAAA,QACN,UAAU;AAAA,QACV,MAAM,MAAM;AAAA;AAAA,QAEZ,OAAO;AAAA,UACL,CAAC,EAAC,MAAM,GAAG,OAAO,UAAS,GAAG,oBAAoB,KAAK,MAAM,SAAgB,CAAC;AAAA,UAC9E,CAAC,EAAC,MAAM,IAAI,OAAO,UAAS,GAAG,oBAAoB,KAAK,MAAM,SAAgB,CAAC;AAAA,QACjF;AAAA,QACA,GAAG;AAAA,MACL;AAAA,IACF;AACA,SAAK,MAAM,SAAU,WAAW,KAAK;AAAA,EACvC;AAAA,EAEA,WAAW,WAAmB,UAAuD,OAAe;AAClG,UAAM,QAAQ,KAAK,MAAM,OAAO,MAAM,MAAM,CAAC,KAAK,CAAC;AAEnD,UAAM,SAAS,IAAI;AAAA,MACjB;AAAA,QACE,OAAO,SAAS;AAAA,QAChB,MAAO,SAAS,SAAS,SAAa,IAAI,SAAS;AAAA,MACrD;AAAA,MACA;AAAA,IACF;AAEA,UAAM,eAAe,KAAK,iBAAiB,KAAK;AAEhD,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,OAAO;AAAA,IACT;AACA,SAAK,SAAS,KAAK,MAAM,WAAW,YAAY;AAAA,EAClD;AAAA,EAEA,WAAW,UAA8B;AACvC,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,MAAM;AAAA,IACR;AAEA,QAAI,aAAa,SAAS,QAAW;AACnC,aAAO,aAAa,MAAM;AAAA,IAC5B;AACA,SAAK,MAAM,SAAU,KAAK,MAAM,WAAW,YAAY;AAAA,EACzD;AAAA,EAEA,eAAe,SAAiB;AAC9B,QAAI,YAAY,iBAAiB,KAAK,MAAM,wBAAwB;AAClE,WAAK,MAAM,uBAAuB;AAAA,IACpC,OACK;AACH,WAAK,SAAS,KAAK,MAAM,WAAW;AAAA,QAClC,GAAG,KAAK,MAAM;AAAA,QACd,MAAM;AAAA,MACR,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,mBAAmB,UAAkC,SAAc;AACjE,QAAI,SAAS;AACX,WAAK,MAAM,MAAO,QAAQ,IAAI;AAAA,IAChC,OACK;AACH,aAAO,KAAK,MAAM,MAAO,QAAQ;AAAA,IACnC;AACA,SAAK,SAAS,KAAK,MAAM,WAAW,KAAK,MAAM,KAAK;AAAA,EACtD;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AAErB,QAAI,OAAO,KAAK,MAAM,OAAO,SAAS,aAAa;AACjD,WAAK,MAAM,MAAO,OAAO,KAAK,qBAAqB,KAAK,MAAM,SAAS;AAAA,IACzE;AAEA,QAAI;AACJ,QAAI,KAAK,MAAM,OAAO,OAAO;AAC3B,mBAAa,KAAK,MAAM,MAAM,MAAM,IAAI,CAAC,MAAM,QAAQ;AACrD,cAAM,YAAY,OAAO,KAAK,CAAC,MAAM,WAAW,KAAK,CAAC,EAAE,OAAO;AAC/D,cAAM,MAAO,KAAK,MAAM,KAAK,GAAG;AAChC,cAAM,YAAY,OAAO,KAAK,CAAC,MAAM,WAAW,KAAK,CAAC,EAAE,QAAQ,KAAK,CAAC;AACtE,cAAM,QAAQ,KAAK,CAAC;AACpB,cAAM,gBAAgB,oBAAC,oBAAiB,SAAS,KAAK,MAAM,cAAc,KAAK,MAAM,GAAG,GAAG;AAE3F,cAAM,YAAY;AAAA,UAChB,cAAc,EAAE,aAAa;AAAA,UAC7B,OAAO,EAAE,YAAY;AAAA,UACrB,OAAO;AAAA,UACP,UAAU,CAAC,YAAyC,KAAK,WAAW,KAAK,EAAE,MAAM,WAAW,OAAO,QAAkB,GAAG,KAAK;AAAA,QAC/H;AAEA,YAAI;AACJ,YAAG,KAAK,MAAM,OAAO,SAAS,eAAe;AAC3C,sBAAY,oBAAC,eAAa,GAAG,WAAW;AAAA,QAC1C,OACK;AACH,sBAAY,oBAAC,eAAa,GAAG,WAAW;AAAA,QAC1C;AAEA,YAAI,YAAY;AAChB,YAAG,cAAc,QAAW;AAC1B,sBAAY,oBAAC,SACX;AAAA,YAAC;AAAA;AAAA,cACC,cAAW;AAAA,cACX,OAAO;AAAA,cACP,UAAU,aAAW,KAAK,WAAW,KAAK,EAAC,MAAM,SAAS,OAAO,UAAS,GAAG,KAAK;AAAA,cAClF,KAAK;AAAA,cACL,KAAK;AAAA;AAAA,UACP,GACF;AAAA,QACF;AAEA,eAAO,qBAAC,QACN;AAAA,8BAAC,QACE,qBACH;AAAA,UACA,oBAAC,QACE,qBACH;AAAA,UACA,oBAAC,QACC;AAAA,YAAC;AAAA;AAAA,cACC,cAAY,EAAE,cAAc;AAAA,cAC5B,WAAW,KAAK,MAAM;AAAA,cACtB,WAAW,KAAK,MAAM;AAAA,cACtB;AAAA,cACA,UAAU,CAAC,GAAG,aAAa,KAAK,WAAW,KAAK,EAAC,MAAM,WAAW,OAAO,UAAS,GAAG,QAAkB;AAAA;AAAA,UACzG,GACF;AAAA,UACA,oBAAC,QACE,yBACH;AAAA,aAlBc,GAmBhB;AAAA,MACF,CAAC;AAAA,IACH;AAEA,WAAO,oBAAC,SAAI,WAAU,4BACpB,+BAAC,cAAS,WAAU,+BAClB;AAAA,0BAAC,YAAQ,6BAAmB,KAAK,MAAM,SAAS,GAAE;AAAA,MAClD,qBAAC,SAAI,WAAU,gCACb;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,UAAU;AAAA,YAGnB,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,KAAK,MAAM,MAAO;AAAA,gBACzB,UAAU,CAAC,YAAoB,KAAK,eAAe,OAAO;AAAA,gBAC1D,OAAO,EAAE,yDAAyD;AAAA,gBAClE,SAAS,KAAK,qBAAqB,KAAK,MAAM,SAAS;AAAA;AAAA,YACzD,GACF;AAAA;AAAA,UATI;AAAA,QAUN;AAAA,QACC,KAAK,MAAM,OAAO,SAAS,cAC1B;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,MAAM;AAAA,YAGf,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,WAAW;AAAA,gBACX,WAAW,OAAO,SAAS;AAAA,gBAC3B,OAAO,KAAK,MAAM,OAAO;AAAA,gBACzB,UAAU,CAAC,GAAG,aAAa,KAAK,WAAW,QAAkB;AAAA;AAAA,YAC/D,GACF;AAAA;AAAA,UATI;AAAA,QAUN;AAAA,QAEF;AAAA,UAAC;AAAA;AAAA,YACC,OAAO;AAAA,YAGP,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,KAAK,MAAM,OAAO;AAAA,gBACzB,OAAO,EAAE,8CAA8C;AAAA,gBACvD,UAAU,aAAW,KAAK,mBAAmB,YAAY,OAAO;AAAA;AAAA,YAClE,GACF;AAAA;AAAA,UARI;AAAA,QASN;AAAA,QACC,cACC;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,SAAS;AAAA,YAGlB;AAAA,cAAC;AAAA;AAAA,gBACC,WAAW,KAAK,MAAM;AAAA,gBACtB,WAAW,KAAK,MAAM;AAAA,gBACtB,OAAO,KAAK,MAAM,OAAO;AAAA,gBACzB,UAAU,CAAC,GAAG,YAAY,KAAK,mBAAmB,WAAW,OAAO;AAAA;AAAA,YACtE;AAAA;AAAA,UAPI;AAAA,QAQN;AAAA,QAED,cACC,oBAAC,SAAI,WAAU,0BACb,+BAAC,WAAM,WAAU,gCACf;AAAA,8BAAC,aAAS,YAAE,OAAO,GAAE;AAAA,UACrB,oBAAC,WACC,+BAAC,QACC;AAAA,gCAAC,QAAI,YAAE,MAAM,GAAE;AAAA,YACf,oBAAC,QAAI,YAAE,aAAa,GAAE;AAAA,YACtB,oBAAC,QAAG,SAAS,GAAI,YAAE,cAAc,GAAE;AAAA,aACrC,GACF;AAAA,UACA,oBAAC,WACE,sBACH;AAAA,WACF,GACF;AAAA,QAEF,qBAAC,SAAI,WAAU,oBACZ;AAAA,wBACC;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK,MAAM,WAAW,KAAK,IAAI;AAAA,cAExC;AAAA,oCAAC,kBAAe,OAAO,EAAE,eAAe,cAAc,GAAG;AAAA,gBACxD,EAAE,UAAU;AAAA;AAAA;AAAA,UACf;AAAA,UAEF;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK,MAAM,mBAAmB,KAAK,IAAI;AAAA,cAEhD;AAAA,oCAAC,kBAAe,OAAO,EAAE,eAAe,cAAc,GAAG;AAAA,gBACxD,EAAE,uBAAuB;AAAA;AAAA;AAAA,UAC5B;AAAA,WACF;AAAA,SACF;AAAA,OACF,GACF;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a1f2034e8330e69a4f4de946d81cea8ff55472f7"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Vt=function(){return s},s}Vt();function IV(n,e){Vt().f[0]++;let t;return Vt().s[0]++,Vt().b[1][0]++,n.value&&(Vt().b[1][1]++,n.value.stops)?(Vt().b[0][0]++,Vt().s[1]++,n.value.stops.forEach((i,r)=>{Vt().f[1]++,Vt().s[2]++,Object.prototype.hasOwnProperty.call(e.refs,r)?Vt().b[2][1]++:(Vt().b[2][0]++,Vt().s[3]++,t?Vt().b[3][1]++:(Vt().b[3][0]++,Vt().s[4]++,t={...e}),Vt().s[5]++,t[r]=Ox("stop-"))})):Vt().b[0][1]++,Vt().s[6]++,t}class NRe extends En.Component{state=(Vt().s[7]++,{refs:{}});componentDidMount(){Vt().f[2]++;const e=(Vt().s[8]++,IV(this.props,this.state));Vt().s[9]++,e?(Vt().b[4][0]++,Vt().s[10]++,this.setState({refs:e})):Vt().b[4][1]++}static getDerivedStateFromProps(e,t){Vt().f[3]++;const i=(Vt().s[11]++,IV(e,t));return Vt().s[12]++,i?(Vt().b[5][0]++,Vt().s[13]++,{refs:i}):(Vt().b[5][1]++,Vt().s[14]++,null)}getFieldFunctionType(e){return Vt().f[4]++,Vt().s[15]++,e.expression.interpolated?(Vt().b[6][0]++,Vt().s[16]++,"exponential"):(Vt().b[6][1]++,Vt().s[17]++,e.type==="number"?(Vt().b[7][0]++,Vt().s[18]++,"interval"):(Vt().b[7][1]++,Vt().s[19]++,"categorical"))}getDataFunctionTypes(e){return Vt().f[5]++,Vt().s[20]++,e.expression.interpolated?(Vt().b[8][0]++,Vt().s[21]++,["interpolate","categorical","interval","exponential","identity"]):(Vt().b[8][1]++,Vt().s[22]++,["categorical","interval","identity"])}orderStopsByZoom(e){Vt().f[6]++;const t=(Vt().s[23]++,e.map((r,o)=>(Vt().f[7]++,Vt().s[24]++,{ref:this.state.refs[o],data:r})).sort((r,o)=>(Vt().f[8]++,Vt().s[25]++,Zse(r.data[0].zoom,o.data[0].zoom)))),i=(Vt().s[26]++,{});return Vt().s[27]++,t.forEach((r,o)=>{Vt().f[9]++,Vt().s[28]++,i[o]=r.ref}),Vt().s[29]++,this.setState({refs:i}),Vt().s[30]++,t.map(r=>(Vt().f[10]++,Vt().s[31]++,r.data))}onChange=(Vt().s[32]++,(e,t)=>{if(Vt().f[11]++,Vt().s[33]++,t.type==="identity")Vt().b[9][0]++,Vt().s[34]++,t={type:t.type,property:t.property};else{Vt().b[9][1]++;const i=(Vt().s[35]++,t.type==="categorical"?(Vt().b[10][0]++,""):(Vt().b[10][1]++,0));Vt().s[36]++,t={property:"",type:t.type,stops:[[{zoom:6,value:i},op(this.props.fieldSpec)],[{zoom:10,value:i},op(this.props.fieldSpec)]],...t}}Vt().s[37]++,this.props.onChange(e,t)});changeStop(e,t,i){Vt().f[12]++;const r=(Vt().s[38]++,Vt().b[11][0]++,this.props.value?.stops.slice(0)||(Vt().b[11][1]++,[]));Vt().s[39]++,r[e]=[{value:t.value,zoom:t.zoom===void 0?(Vt().b[12][0]++,0):(Vt().b[12][1]++,t.zoom)},i];const o=(Vt().s[40]++,this.orderStopsByZoom(r)),s=(Vt().s[41]++,{...this.props.value,stops:o});Vt().s[42]++,this.onChange(this.props.fieldName,s)}changeBase(e){Vt().f[13]++;const t=(Vt().s[43]++,{...this.props.value,base:e});Vt().s[44]++,t.base===void 0?(Vt().b[13][0]++,Vt().s[45]++,delete t.base):Vt().b[13][1]++,Vt().s[46]++,this.props.onChange(this.props.fieldName,t)}changeDataType(e){Vt().f[14]++,Vt().s[47]++,Vt().b[15][0]++,e==="interpolate"&&(Vt().b[15][1]++,this.props.onChangeToZoomFunction)?(Vt().b[14][0]++,Vt().s[48]++,this.props.onChangeToZoomFunction()):(Vt().b[14][1]++,Vt().s[49]++,this.onChange(this.props.fieldName,{...this.props.value,type:e}))}changeDataProperty(e,t){Vt().f[15]++,Vt().s[50]++,t?(Vt().b[16][0]++,Vt().s[51]++,this.props.value[e]=t):(Vt().b[16][1]++,Vt().s[52]++,delete this.props.value[e]),Vt().s[53]++,this.onChange(this.props.fieldName,this.props.value)}render(){Vt().f[16]++;const e=(Vt().s[54]++,this.props.t);Vt().s[55]++,typeof this.props.value?.type>"u"?(Vt().b[17][0]++,Vt().s[56]++,this.props.value.type=this.getFieldFunctionType(this.props.fieldSpec)):Vt().b[17][1]++;let t;return Vt().s[57]++,this.props.value?.stops?(Vt().b[18][0]++,Vt().s[58]++,t=this.props.value.stops.map((i,r)=>{Vt().f[17]++;const o=(Vt().s[59]++,typeof i[0]=="object"?(Vt().b[19][0]++,i[0].zoom):(Vt().b[19][1]++,void 0)),s=(Vt().s[60]++,this.state.refs[r]),a=(Vt().s[61]++,typeof i[0]=="object"?(Vt().b[20][0]++,i[0].value):(Vt().b[20][1]++,i[0])),c=(Vt().s[62]++,i[1]),h=(Vt().s[63]++,ie.jsx(Xse,{onClick:this.props.onDeleteStop?.bind(this,r)})),m=(Vt().s[64]++,{"aria-label":e("Input value"),label:e("Data value"),value:a,onChange:x=>(Vt().f[18]++,Vt().s[65]++,this.changeStop(r,{zoom:o,value:x},c))});let y;Vt().s[66]++,this.props.value?.type==="categorical"?(Vt().b[21][0]++,Vt().s[67]++,y=ie.jsx(Bm,{...m})):(Vt().b[21][1]++,Vt().s[68]++,y=ie.jsx(m1,{...m}));let M=(Vt().s[69]++,null);return Vt().s[70]++,o!==void 0?(Vt().b[22][0]++,Vt().s[71]++,M=ie.jsx("div",{children:ie.jsx(m1,{"aria-label":"Zoom",value:o,onChange:x=>(Vt().f[19]++,Vt().s[72]++,this.changeStop(r,{zoom:x,value:a},c)),min:0,max:22})})):Vt().b[22][1]++,Vt().s[73]++,ie.jsxs("tr",{children:[ie.jsx("td",{children:M}),ie.jsx("td",{children:y}),ie.jsx("td",{children:ie.jsx(ix,{"aria-label":e("Output value"),fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:c,onChange:(x,T)=>(Vt().f[20]++,Vt().s[74]++,this.changeStop(r,{zoom:o,value:a},T))})}),ie.jsx("td",{children:h})]},s)})):Vt().b[18][1]++,Vt().s[75]++,ie.jsx("div",{className:"maputnik-data-spec-block",children:ie.jsxs("fieldset",{className:"maputnik-data-spec-property",children:[ie.jsx("legend",{children:L6(this.props.fieldName)}),ie.jsxs("div",{className:"maputnik-data-fieldset-inner",children:[ie.jsx(Ls,{label:e("Function"),children:ie.jsx("div",{className:"maputnik-data-spec-property-input",children:ie.jsx(rC,{value:this.props.value.type,onChange:i=>(Vt().f[21]++,Vt().s[76]++,this.changeDataType(i)),title:e("Select a type of data scale (default is 'categorical')."),options:this.getDataFunctionTypes(this.props.fieldSpec)})})},"function"),(Vt().b[23][0]++,this.props.value?.type!=="identity"&&(Vt().b[23][1]++,ie.jsx(Ls,{label:e("Base"),children:ie.jsx("div",{className:"maputnik-data-spec-property-input",children:ie.jsx(ix,{fieldName:"base",fieldSpec:Zr.function.base,value:this.props.value?.base,onChange:(i,r)=>(Vt().f[22]++,Vt().s[77]++,this.changeBase(r))})})},"base"))),ie.jsx(Ls,{label:"Property",children:ie.jsx("div",{className:"maputnik-data-spec-property-input",children:ie.jsx(Bm,{value:this.props.value?.property,title:e("Input a data property to base styles off of."),onChange:i=>(Vt().f[23]++,Vt().s[78]++,this.changeDataProperty("property",i))})})},"property"),(Vt().b[24][0]++,t&&(Vt().b[24][1]++,ie.jsx(Ls,{label:e("Default"),children:ie.jsx(ix,{fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:this.props.value?.default,onChange:(i,r)=>(Vt().f[24]++,Vt().s[79]++,this.changeDataProperty("default",r))})},"default"))),(Vt().b[25][0]++,t&&(Vt().b[25][1]++,ie.jsx("div",{className:"maputnik-function-stop",children:ie.jsxs("table",{className:"maputnik-function-stop-table",children:[ie.jsx("caption",{children:e("Stops")}),ie.jsx("thead",{children:ie.jsxs("tr",{children:[ie.jsx("th",{children:e("Zoom")}),ie.jsx("th",{children:e("Input value")}),ie.jsx("th",{rowSpan:2,children:e("Output value")})]})}),ie.jsx("tbody",{children:t})]})}))),ie.jsxs("div",{className:"maputnik-toolbox",children:[(Vt().b[26][0]++,t&&(Vt().b[26][1]++,ie.jsxs(Zs,{className:"maputnik-add-stop",onClick:this.props.onAddStop?.bind(this),children:[ie.jsx(K6,{style:{verticalAlign:"text-bottom"}}),e("Add stop")]}))),ie.jsxs(Zs,{className:"maputnik-add-stop",onClick:this.props.onExpressionClick?.bind(this),children:[ie.jsx(R4,{style:{verticalAlign:"text-bottom"}}),e("Convert to expression")]})]})]})]})})}}const GRe=(Vt().s[80]++,No()(NRe));function qn(){var n="/home/runner/work/maputnik/maputnik/src/components/_ZoomProperty.tsx",e="374899057a1493811ae396622fb1b276448ec163",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/_ZoomProperty.tsx",statementMap:{0:{start:{line:17,column:16},end:{line:17,column:18}},1:{start:{line:18,column:2},end:{line:29,column:3}},2:{start:{line:19,column:4},end:{line:28,column:7}},3:{start:{line:20,column:6},end:{line:27,column:7}},4:{start:{line:21,column:8},end:{line:23,column:9}},5:{start:{line:22,column:10},end:{line:22,column:33}},6:{start:{line:24,column:8},end:{line:24,column:39}},7:{start:{line:26,column:8},end:{line:26,column:39}},8:{start:{line:30,column:2},end:{line:30,column:17}},9:{start:{line:33,column:24},end:{line:35,column:3}},10:{start:{line:36,column:10},end:{line:38,column:3}},11:{start:{line:40,column:20},end:{line:40,column:55}},12:{start:{line:41,column:4},end:{line:45,column:5}},13:{start:{line:42,column:6},end:{line:44,column:9}},14:{start:{line:48,column:20},end:{line:48,column:45}},15:{start:{line:49,column:4},end:{line:53,column:5}},16:{start:{line:50,column:6},end:{line:52,column:8}},17:{start:{line:54,column:4},end:{line:54,column:16}},18:{start:{line:58,column:26},end:{line:63,column:60}},19:{start:{line:59,column:6},end:{line:62,column:8}},20:{start:{line:63,column:22},end:{line:63,column:59}},21:{start:{line:64,column:20},end:{line:64,column:22}},22:{start:{line:65,column:4},end:{line:67,column:7}},23:{start:{line:66,column:6},end:{line:66,column:30}},24:{start:{line:68,column:4},end:{line:70,column:7}},25:{start:{line:71,column:4},end:{line:71,column:50}},26:{start:{line:71,column:39},end:{line:71,column:48}},27:{start:{line:74,column:18},end:{line:74,column:49}},28:{start:{line:75,column:4},end:{line:75,column:41}},29:{start:{line:76,column:25},end:{line:76,column:53}},30:{start:{line:77,column:25},end:{line:80,column:5}},31:{start:{line:81,column:4},end:{line:81,column:60}},32:{start:{line:84,column:25},end:{line:87,column:5}},33:{start:{line:88,column:4},end:{line:90,column:5}},34:{start:{line:89,column:6},end:{line:89,column:34}},35:{start:{line:91,column:4},end:{line:91,column:60}},36:{start:{line:93,column:19},end:{line:97,column:3}},37:{start:{line:94,column:4},end:{line:96,column:5}},38:{start:{line:95,column:6},end:{line:95,column:46}},39:{start:{line:99,column:14},end:{line:99,column:26}},40:{start:{line:100,column:23},end:{line:133,column:6}},41:{start:{line:101,column:24},end:{line:101,column:31}},42:{start:{line:102,column:20},end:{line:102,column:27}},43:{start:{line:103,column:44},end:{line:103,column:120}},44:{start:{line:104,column:6},end:{line:132,column:8}},45:{start:{line:113,column:43},end:{line:113,column:87}},46:{start:{line:125,column:43},end:{line:125,column:88}},47:{start:{line:134,column:4},end:{line:200,column:12}},48:{start:{line:145,column:39},end:{line:145,column:67}},49:{start:{line:162,column:43},end:{line:162,column:68}},50:{start:{line:203,column:4},end:{line:207,column:5}},51:{start:{line:204,column:6},end:{line:204,column:83}},52:{start:{line:206,column:6},end:{line:206,column:29}},53:{start:{line:210,column:21},end:{line:210,column:60}}},fnMap:{0:{name:"setStopRefs",decl:{start:{line:16,column:9},end:{line:16,column:20}},loc:{start:{line:16,column:35},end:{line:31,column:1}},line:16},1:{name:"(anonymous_1)",decl:{start:{line:19,column:30},end:{line:19,column:31}},loc:{start:{line:19,column:45},end:{line:28,column:5}},line:19},2:{name:"(anonymous_2)",decl:{start:{line:39,column:2},end:{line:39,column:3}},loc:{start:{line:39,column:22},end:{line:46,column:3}},line:39},3:{name:"(anonymous_3)",decl:{start:{line:47,column:2},end:{line:47,column:3}},loc:{start:{line:47,column:48},end:{line:55,column:3}},line:47},4:{name:"(anonymous_4)",decl:{start:{line:57,column:2},end:{line:57,column:3}},loc:{start:{line:57,column:26},end:{line:72,column:3}},line:57},5:{name:"(anonymous_5)",decl:{start:{line:58,column:36},end:{line:58,column:37}},loc:{start:{line:58,column:51},end:{line:63,column:5}},line:58},6:{name:"(anonymous_6)",decl:{start:{line:63,column:12},end:{line:63,column:13}},loc:{start:{line:63,column:22},end:{line:63,column:59}},line:63},7:{name:"(anonymous_7)",decl:{start:{line:65,column:26},end:{line:65,column:27}},loc:{start:{line:65,column:41},end:{line:67,column:5}},line:65},8:{name:"(anonymous_8)",decl:{start:{line:71,column:29},end:{line:71,column:30}},loc:{start:{line:71,column:39},end:{line:71,column:48}},line:71},9:{name:"(anonymous_9)",decl:{start:{line:73,column:2},end:{line:73,column:3}},loc:{start:{line:73,column:45},end:{line:82,column:3}},line:73},10:{name:"(anonymous_10)",decl:{start:{line:83,column:2},end:{line:83,column:3}},loc:{start:{line:83,column:23},end:{line:92,column:3}},line:83},11:{name:"(anonymous_11)",decl:{start:{line:93,column:19},end:{line:93,column:20}},loc:{start:{line:93,column:29},end:{line:97,column:3}},line:93},12:{name:"(anonymous_12)",decl:{start:{line:98,column:2},end:{line:98,column:3}},loc:{start:{line:98,column:11},end:{line:201,column:3}},line:98},13:{name:"(anonymous_13)",decl:{start:{line:100,column:51},end:{line:100,column:52}},loc:{start:{line:100,column:66},end:{line:133,column:5}},line:100},14:{name:"(anonymous_14)",decl:{start:{line:113,column:26},end:{line:113,column:27}},loc:{start:{line:113,column:43},end:{line:113,column:87}},line:113},15:{name:"(anonymous_15)",decl:{start:{line:125,column:26},end:{line:125,column:27}},loc:{start:{line:125,column:43},end:{line:125,column:88}},line:125},16:{name:"(anonymous_16)",decl:{start:{line:145,column:26},end:{line:145,column:27}},loc:{start:{line:145,column:39},end:{line:145,column:67}},line:145},17:{name:"(anonymous_17)",decl:{start:{line:162,column:26},end:{line:162,column:27}},loc:{start:{line:162,column:43},end:{line:162,column:68}},line:162},18:{name:"(anonymous_18)",decl:{start:{line:202,column:2},end:{line:202,column:3}},loc:{start:{line:202,column:34},end:{line:208,column:3}},line:202}},branchMap:{0:{loc:{start:{line:18,column:2},end:{line:29,column:3}},type:"if",locations:[{start:{line:18,column:2},end:{line:29,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:18},1:{loc:{start:{line:18,column:6},end:{line:18,column:38}},type:"binary-expr",locations:[{start:{line:18,column:6},end:{line:18,column:17}},{start:{line:18,column:21},end:{line:18,column:38}}],line:18},2:{loc:{start:{line:20,column:6},end:{line:27,column:7}},type:"if",locations:[{start:{line:20,column:6},end:{line:27,column:7}},{start:{line:25,column:13},end:{line:27,column:7}}],line:20},3:{loc:{start:{line:21,column:8},end:{line:23,column:9}},type:"if",locations:[{start:{line:21,column:8},end:{line:23,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:21},4:{loc:{start:{line:41,column:4},end:{line:45,column:5}},type:"if",locations:[{start:{line:41,column:4},end:{line:45,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:41},5:{loc:{start:{line:49,column:4},end:{line:53,column:5}},type:"if",locations:[{start:{line:49,column:4},end:{line:53,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:49},6:{loc:{start:{line:88,column:4},end:{line:90,column:5}},type:"if",locations:[{start:{line:88,column:4},end:{line:90,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:88},7:{loc:{start:{line:94,column:4},end:{line:96,column:5}},type:"if",locations:[{start:{line:94,column:4},end:{line:96,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:94},8:{loc:{start:{line:94,column:8},end:{line:94,column:67}},type:"binary-expr",locations:[{start:{line:94,column:8},end:{line:94,column:30}},{start:{line:94,column:34},end:{line:94,column:67}}],line:94},9:{loc:{start:{line:203,column:4},end:{line:207,column:5}},type:"if",locations:[{start:{line:203,column:4},end:{line:207,column:5}},{start:{line:205,column:11},end:{line:207,column:5}}],line:203}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_ZoomProperty.tsx"],names:[],mappings:"AAiK4B,cACf,YADe;AAjK5B,OAAO,WAAW;AAClB,SAAS,sBAAsB;AAC/B,SAAS,sBAAsB;AAC/B,OAAO,YAAY;AACnB,SAA+B,uBAAuB;AAEtD,OAAO,iBAAiB;AACxB,OAAO,eAAe;AACtB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAElB,OAAO,sBAAsB;AAC7B,OAAO,wBAAwB;AAE/B,OAAO,YAAY;AACnB,OAAO,qBAAqB;AAS5B,SAAS,YAAY,OAAkC,OAA0B;AAE/E,MAAI,UAAmC,CAAC;AAExC,MAAG,MAAM,SAAU,MAAM,MAAwB,OAAO;AACtD,IAAC,MAAM,MAAwB,MAAM,QAAQ,CAAC,MAAM,QAAgB;AAClE,UAAG,OAAO,UAAU,eAAe,KAAK,CAAC,MAAM,MAAM,GAAG,GAAG;AACzD,YAAG,CAAC,SAAS;AACX,oBAAU,EAAC,GAAG,MAAK;AAAA,QACrB;AACA,gBAAQ,GAAG,IAAI,OAAO,OAAO;AAAA,MAC/B,OAAO;AACL,gBAAQ,GAAG,IAAI,MAAM,KAAK,GAAG;AAAA,MAC/B;AAAA,IACF,CAAC;AAAA,EACH;AACA,SAAO;AACT;AA4BA,MAAM,6BAA6B,MAAM,UAAwD;AAAA,EAC/F,OAAO,eAAe;AAAA,IACpB,QAAQ,CAAC;AAAA,EACX;AAAA,EAEA,QAAQ;AAAA,IACN,MAAM,CAAC;AAAA,EACT;AAAA,EAEA,oBAAoB;AAClB,UAAM,UAAU,YAAY,KAAK,OAAO,KAAK,KAAK;AAElD,QAAG,SAAS;AACV,WAAK,SAAS;AAAA,QACZ,MAAM;AAAA,MACR,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAA4C,OAA0B;AACpG,UAAM,UAAU,YAAY,OAAO,KAAK;AACxC,QAAG,SAAS;AACV,aAAO;AAAA,QACL,MAAM;AAAA,MACR;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAAA;AAAA,EAGA,iBAAiB,OAA+B;AAC9C,UAAM,gBAAgB,MACnB,IAAI,CAAC,MAAM,QAAQ;AAClB,aAAO;AAAA,QACL,KAAK,KAAK,MAAM,KAAK,GAAG;AAAA,QACxB,MAAM;AAAA,MACR;AAAA,IACF,CAAC,EAEA,KAAK,CAAC,GAAG,MAAM,gBAAgB,EAAE,KAAK,CAAC,GAAI,EAAE,KAAK,CAAC,CAAE,CAAC;AAGzD,UAAM,UAAkC,CAAC;AACzC,kBACG,QAAQ,CAAC,MAAM,QAAO;AACrB,cAAQ,GAAG,IAAI,KAAK;AAAA,IACtB,CAAC;AAEH,SAAK,SAAS;AAAA,MACZ,MAAM;AAAA,IACR,CAAC;AAED,WAAO,cAAc,IAAI,CAAC,SAAS,KAAK,IAAI;AAAA,EAC9C;AAAA,EAEA,eAAe,WAAmB,UAA8B,OAAe;AAC7E,UAAM,QAAS,KAAK,MAAM,MAAwB,MAAM,MAAM,CAAC;AAC/D,UAAM,SAAS,IAAI,CAAC,UAAU,KAAK;AAEnC,UAAM,eAAe,KAAK,iBAAiB,KAAK;AAEhD,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,OAAO;AAAA,IACT;AACA,SAAK,MAAM,SAAU,KAAK,MAAM,WAAW,YAAY;AAAA,EACzD;AAAA,EAEA,WAAW,UAA8B;AACvC,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,MAAM;AAAA,IACR;AAEA,QAAI,aAAa,SAAS,QAAW;AACnC,aAAO,aAAa,MAAM;AAAA,IAC5B;AACA,SAAK,MAAM,SAAU,KAAK,MAAM,WAAW,YAAY;AAAA,EACzD;AAAA,EAEA,iBAAiB,CAAC,SAAiB;AACjC,QAAI,SAAS,iBAAiB,KAAK,MAAM,wBAAwB;AAC/D,WAAK,MAAM,uBAAuB,IAAI;AAAA,IACxC;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,aAAa,KAAK,MAAM,OAAO,MAAM,IAAI,CAAC,MAAM,QAAQ;AAC5D,YAAM,YAAY,KAAK,CAAC;AACxB,YAAM,QAAQ,KAAK,CAAC;AACpB,YAAM,gBAAgB,oBAAC,oBAAiB,SAAS,KAAK,MAAM,cAAc,KAAK,MAAM,GAAG,GAAG;AAC3F,aAAO;AAAA,QAAC;AAAA;AAAA,UAGN;AAAA,gCAAC,QACC;AAAA,cAAC;AAAA;AAAA,gBACC,cAAY,EAAE,MAAM;AAAA,gBACpB,OAAO;AAAA,gBACP,UAAU,iBAAe,KAAK,eAAe,KAAK,aAAa,KAAK;AAAA,gBACpE,KAAK;AAAA,gBACL,KAAK;AAAA;AAAA,YACP,GACF;AAAA,YACA,oBAAC,QACC;AAAA,cAAC;AAAA;AAAA,gBACC,cAAY,EAAE,cAAc;AAAA,gBAC5B,WAAW,KAAK,MAAM;AAAA,gBACtB,WAAW,KAAK,MAAM;AAAA,gBACtB;AAAA,gBACA,UAAU,CAAC,GAAG,aAAa,KAAK,eAAe,KAAK,WAAW,QAAkB;AAAA;AAAA,YACnF,GACF;AAAA,YACA,oBAAC,QACE,yBACH;AAAA;AAAA;AAAA,QAtBK,GAAG,KAAK,CAAC,CAAC,IAAI,KAAK,CAAC,CAAC;AAAA,MAuB5B;AAAA,IACF,CAAC;AAGD,WAAO,oBAAC,SAAI,WAAU,4BACpB,+BAAC,cAAS,WAAU,+BAClB;AAAA,0BAAC,YAAQ,6BAAmB,KAAK,MAAM,SAAS,GAAE;AAAA,MAClD,qBAAC,SAAI,WAAU,gCACb;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,UAAU;AAAA,YAEnB,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO;AAAA,gBACP,UAAU,CAAC,YAAoB,KAAK,eAAe,OAAO;AAAA,gBAC1D,OAAO,EAAE,yDAAyD;AAAA,gBAClE,SAAS,KAAK,qBAAqB,KAAK,MAAM,SAAU;AAAA;AAAA,YAC1D,GACF;AAAA;AAAA,QACF;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,MAAM;AAAA,YAEf,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,WAAW;AAAA,gBACX,WAAW,OAAO,SAAS;AAAA,gBAC3B,OAAO,KAAK,MAAM,OAAO;AAAA,gBACzB,UAAU,CAAC,GAAG,aAAa,KAAK,WAAW,QAA8B;AAAA;AAAA,YAC3E,GACF;AAAA;AAAA,QACF;AAAA,QACA,oBAAC,SAAI,WAAU,0BACb,+BAAC,WAAM,WAAU,mEACf;AAAA,8BAAC,aAAS,YAAE,OAAO,GAAE;AAAA,UACrB,oBAAC,WACC,+BAAC,QACC;AAAA,gCAAC,QAAI,YAAE,MAAM,GAAE;AAAA,YACf,oBAAC,QAAG,SAAS,GAAI,YAAE,cAAc,GAAE;AAAA,aACrC,GACF;AAAA,UACA,oBAAC,WACE,sBACH;AAAA,WACF,GACF;AAAA,QACA,qBAAC,SAAI,WAAU,oBACb;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK,MAAM,WAAW,KAAK,IAAI;AAAA,cAExC;AAAA,oCAAC,kBAAe,OAAO,EAAE,eAAe,cAAc,GAAG;AAAA,gBACxD,EAAE,UAAU;AAAA;AAAA;AAAA,UACf;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK,MAAM,mBAAmB,KAAK,IAAI;AAAA,cAEhD;AAAA,oCAAC,kBAAe,OAAO,EAAE,eAAe,cAAc,GAAG;AAAA,gBACxD,EAAE,uBAAuB;AAAA;AAAA;AAAA,UAC5B;AAAA,WACF;AAAA,SACF;AAAA,OACF,GACF;AAAA,EACF;AAAA,EAEA,qBAAqB,WAGlB;AACD,QAAI,UAAU,eAAe,MAAM,eAAe;AAChD,aAAO,CAAC,eAAe,eAAe,YAAY,eAAe,UAAU;AAAA,IAC7E,OACK;AACH,aAAO,CAAC,aAAa;AAAA,IACvB;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"374899057a1493811ae396622fb1b276448ec163"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return qn=function(){return s},s}qn();function kV(n,e){qn().f[0]++;let t=(qn().s[0]++,{});return qn().s[1]++,qn().b[1][0]++,n.value&&(qn().b[1][1]++,n.value.stops)?(qn().b[0][0]++,qn().s[2]++,n.value.stops.forEach((i,r)=>{qn().f[1]++,qn().s[3]++,Object.prototype.hasOwnProperty.call(!e.refs,r)?(qn().b[2][0]++,qn().s[4]++,t?qn().b[3][1]++:(qn().b[3][0]++,qn().s[5]++,t={...e}),qn().s[6]++,t[r]=Ox("stop-")):(qn().b[2][1]++,qn().s[7]++,t[r]=e.refs[r])})):qn().b[0][1]++,qn().s[8]++,t}class WRe extends En.Component{static defaultProps=(qn().s[9]++,{errors:{}});state=(qn().s[10]++,{refs:{}});componentDidMount(){qn().f[2]++;const e=(qn().s[11]++,kV(this.props,this.state));qn().s[12]++,e?(qn().b[4][0]++,qn().s[13]++,this.setState({refs:e})):qn().b[4][1]++}static getDerivedStateFromProps(e,t){qn().f[3]++;const i=(qn().s[14]++,kV(e,t));return qn().s[15]++,i?(qn().b[5][0]++,qn().s[16]++,{refs:i}):(qn().b[5][1]++,qn().s[17]++,null)}orderStopsByZoom(e){qn().f[4]++;const t=(qn().s[18]++,e.map((r,o)=>(qn().f[5]++,qn().s[19]++,{ref:this.state.refs[o],data:r})).sort((r,o)=>(qn().f[6]++,qn().s[20]++,Zse(r.data[0],o.data[0])))),i=(qn().s[21]++,{});return qn().s[22]++,t.forEach((r,o)=>{qn().f[7]++,qn().s[23]++,i[o]=r.ref}),qn().s[24]++,this.setState({refs:i}),qn().s[25]++,t.map(r=>(qn().f[8]++,qn().s[26]++,r.data))}changeZoomStop(e,t,i){qn().f[9]++;const r=(qn().s[27]++,this.props.value.stops.slice(0));qn().s[28]++,r[e]=[t,i];const o=(qn().s[29]++,this.orderStopsByZoom(r)),s=(qn().s[30]++,{...this.props.value,stops:o});qn().s[31]++,this.props.onChange(this.props.fieldName,s)}changeBase(e){qn().f[10]++;const t=(qn().s[32]++,{...this.props.value,base:e});qn().s[33]++,t.base===void 0?(qn().b[6][0]++,qn().s[34]++,delete t.base):qn().b[6][1]++,qn().s[35]++,this.props.onChange(this.props.fieldName,t)}changeDataType=(qn().s[36]++,e=>{qn().f[11]++,qn().s[37]++,qn().b[8][0]++,e!=="interpolate"&&(qn().b[8][1]++,this.props.onChangeToDataFunction)?(qn().b[7][0]++,qn().s[38]++,this.props.onChangeToDataFunction(e)):qn().b[7][1]++});render(){qn().f[12]++;const e=(qn().s[39]++,this.props.t),t=(qn().s[40]++,this.props.value?.stops.map((i,r)=>{qn().f[13]++;const o=(qn().s[41]++,i[0]),s=(qn().s[42]++,i[1]),a=(qn().s[43]++,ie.jsx(Xse,{onClick:this.props.onDeleteStop?.bind(this,r)}));return qn().s[44]++,ie.jsxs("tr",{children:[ie.jsx("td",{children:ie.jsx(m1,{"aria-label":e("Zoom"),value:o,onChange:c=>(qn().f[14]++,qn().s[45]++,this.changeZoomStop(r,c,s)),min:0,max:22})}),ie.jsx("td",{children:ie.jsx(ix,{"aria-label":e("Output value"),fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:s,onChange:(c,h)=>(qn().f[15]++,qn().s[46]++,this.changeZoomStop(r,o,h))})}),ie.jsx("td",{children:a})]},`${i[0]}-${i[1]}`)}));return qn().s[47]++,ie.jsx("div",{className:"maputnik-data-spec-block",children:ie.jsxs("fieldset",{className:"maputnik-data-spec-property",children:[ie.jsx("legend",{children:L6(this.props.fieldName)}),ie.jsxs("div",{className:"maputnik-data-fieldset-inner",children:[ie.jsx(Ls,{label:e("Function"),children:ie.jsx("div",{className:"maputnik-data-spec-property-input",children:ie.jsx(rC,{value:"interpolate",onChange:i=>(qn().f[16]++,qn().s[48]++,this.changeDataType(i)),title:e("Select a type of data scale (default is 'categorical')."),options:this.getDataFunctionTypes(this.props.fieldSpec)})})}),ie.jsx(Ls,{label:e("Base"),children:ie.jsx("div",{className:"maputnik-data-spec-property-input",children:ie.jsx(ix,{fieldName:"base",fieldSpec:Zr.function.base,value:this.props.value?.base,onChange:(i,r)=>(qn().f[17]++,qn().s[49]++,this.changeBase(r))})})}),ie.jsx("div",{className:"maputnik-function-stop",children:ie.jsxs("table",{className:"maputnik-function-stop-table maputnik-function-stop-table--zoom",children:[ie.jsx("caption",{children:e("Stops")}),ie.jsx("thead",{children:ie.jsxs("tr",{children:[ie.jsx("th",{children:e("Zoom")}),ie.jsx("th",{rowSpan:2,children:e("Output value")})]})}),ie.jsx("tbody",{children:t})]})}),ie.jsxs("div",{className:"maputnik-toolbox",children:[ie.jsxs(Zs,{className:"maputnik-add-stop",onClick:this.props.onAddStop?.bind(this),children:[ie.jsx(K6,{style:{verticalAlign:"text-bottom"}}),e("Add stop")]}),ie.jsxs(Zs,{className:"maputnik-add-stop",onClick:this.props.onExpressionClick?.bind(this),children:[ie.jsx(R4,{style:{verticalAlign:"text-bottom"}}),e("Convert to expression")]})]})]})]})})}getDataFunctionTypes(e){return qn().f[18]++,qn().s[50]++,e["property-type"]==="data-driven"?(qn().b[9][0]++,qn().s[51]++,["interpolate","categorical","interval","exponential","identity"]):(qn().b[9][1]++,qn().s[52]++,["interpolate"])}}const QRe=(qn().s[53]++,No()(WRe));function pt(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldFunction.tsx",e="cec93a709e0799aecc929100cb853febe363652d",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldFunction.tsx",statementMap:{0:{start:{line:10,column:2},end:{line:10,column:78}},1:{start:{line:13,column:2},end:{line:13,column:74}},2:{start:{line:16,column:2},end:{line:18,column:5}},3:{start:{line:17,column:4},end:{line:17,column:52}},4:{start:{line:21,column:2},end:{line:21,column:123}},5:{start:{line:24,column:2},end:{line:26,column:5}},6:{start:{line:25,column:4},end:{line:25,column:83}},7:{start:{line:29,column:2},end:{line:29,column:64}},8:{start:{line:32,column:16},end:{line:32,column:47}},9:{start:{line:33,column:2},end:{line:33,column:38}},10:{start:{line:36,column:2},end:{line:38,column:3}},11:{start:{line:37,column:4},end:{line:37,column:37}},12:{start:{line:39,column:2},end:{line:39,column:15}},13:{start:{line:42,column:2},end:{line:62,column:3}},14:{start:{line:43,column:4},end:{line:43,column:19}},15:{start:{line:44,column:9},end:{line:62,column:3}},16:{start:{line:45,column:4},end:{line:45,column:19}},17:{start:{line:46,column:9},end:{line:62,column:3}},18:{start:{line:47,column:4},end:{line:47,column:19}},19:{start:{line:48,column:9},end:{line:62,column:3}},20:{start:{line:49,column:4},end:{line:49,column:19}},21:{start:{line:50,column:9},end:{line:62,column:3}},22:{start:{line:51,column:4},end:{line:51,column:19}},23:{start:{line:52,column:9},end:{line:62,column:3}},24:{start:{line:53,column:4},end:{line:53,column:19}},25:{start:{line:54,column:9},end:{line:62,column:3}},26:{start:{line:55,column:4},end:{line:55,column:19}},27:{start:{line:56,column:9},end:{line:62,column:3}},28:{start:{line:57,column:4},end:{line:57,column:27}},29:{start:{line:58,column:9},end:{line:62,column:3}},30:{start:{line:59,column:4},end:{line:59,column:27}},31:{start:{line:61,column:4},end:{line:61,column:24}},32:{start:{line:64,column:22},end:{line:302,column:1}},33:{start:{line:65,column:34},end:{line:67,column:3}},34:{start:{line:68,column:36},end:{line:68,column:57}},35:{start:{line:69,column:2},end:{line:73,column:48}},36:{start:{line:70,column:4},end:{line:72,column:5}},37:{start:{line:71,column:6},end:{line:71,column:61}},38:{start:{line:74,column:31},end:{line:82,column:3}},39:{start:{line:75,column:4},end:{line:77,column:5}},40:{start:{line:76,column:6},end:{line:76,column:27}},41:{start:{line:78,column:4},end:{line:80,column:5}},42:{start:{line:79,column:6},end:{line:79,column:24}},43:{start:{line:81,column:4},end:{line:81,column:25}},44:{start:{line:83,column:18},end:{line:99,column:3}},45:{start:{line:84,column:18},end:{line:84,column:44}},46:{start:{line:85,column:21},end:{line:85,column:44}},47:{start:{line:86,column:4},end:{line:93,column:5}},48:{start:{line:87,column:6},end:{line:90,column:9}},49:{start:{line:92,column:6},end:{line:92,column:49}},50:{start:{line:94,column:25},end:{line:97,column:5}},51:{start:{line:98,column:4},end:{line:98,column:50}},52:{start:{line:100,column:27},end:{line:104,column:3}},53:{start:{line:101,column:37},end:{line:101,column:42}},54:{start:{line:102,column:4},end:{line:102,column:49}},55:{start:{line:103,column:4},end:{line:103,column:25}},56:{start:{line:105,column:21},end:{line:116,column:3}},57:{start:{line:106,column:18},end:{line:106,column:44}},58:{start:{line:107,column:4},end:{line:107,column:29}},59:{start:{line:108,column:23},end:{line:111,column:5}},60:{start:{line:112,column:4},end:{line:114,column:5}},61:{start:{line:113,column:6},end:{line:113,column:33}},62:{start:{line:115,column:4},end:{line:115,column:50}},63:{start:{line:117,column:27},end:{line:146,column:3}},64:{start:{line:118,column:22},end:{line:118,column:27}},65:{start:{line:120,column:4},end:{line:144,column:5}},66:{start:{line:121,column:6},end:{line:136,column:7}},67:{start:{line:122,column:8},end:{line:127,column:10}},68:{start:{line:125,column:12},end:{line:125,column:83}},69:{start:{line:129,column:8},end:{line:135,column:10}},70:{start:{line:138,column:6},end:{line:143,column:8}},71:{start:{line:145,column:4},end:{line:145,column:46}},72:{start:{line:147,column:25},end:{line:159,column:3}},73:{start:{line:148,column:33},end:{line:148,column:38}},74:{start:{line:149,column:4},end:{line:158,column:5}},75:{start:{line:150,column:6},end:{line:153,column:9}},76:{start:{line:154,column:6},end:{line:154,column:27}},77:{start:{line:155,column:11},end:{line:158,column:5}},78:{start:{line:156,column:6},end:{line:156,column:42}},79:{start:{line:157,column:6},end:{line:157,column:27}},80:{start:{line:160,column:18},end:{line:163,column:3}},81:{start:{line:161,column:33},end:{line:161,column:38}},82:{start:{line:162,column:4},end:{line:162,column:140}},83:{start:{line:164,column:25},end:{line:175,column:3}},84:{start:{line:165,column:33},end:{line:165,column:38}},85:{start:{line:167,column:4},end:{line:173,column:5}},86:{start:{line:168,column:6},end:{line:168,column:67}},87:{start:{line:169,column:11},end:{line:173,column:5}},88:{start:{line:170,column:6},end:{line:170,column:43}},89:{start:{line:172,column:6},end:{line:172,column:65}},90:{start:{line:174,column:4},end:{line:174,column:48}},91:{start:{line:176,column:27},end:{line:214,column:3}},92:{start:{line:177,column:25},end:{line:177,column:62}},93:{start:{line:178,column:22},end:{line:178,column:61}},94:{start:{line:179,column:22},end:{line:179,column:27}},95:{start:{line:181,column:4},end:{line:212,column:5}},96:{start:{line:182,column:6},end:{line:201,column:7}},97:{start:{line:183,column:8},end:{line:190,column:10}},98:{start:{line:188,column:12},end:{line:188,column:106}},99:{start:{line:192,column:8},end:{line:200,column:10}},100:{start:{line:203,column:6},end:{line:211,column:8}},101:{start:{line:213,column:4},end:{line:213,column:46}},102:{start:{line:215,column:32},end:{line:226,column:3}},103:{start:{line:216,column:23},end:{line:224,column:5}},104:{start:{line:225,column:4},end:{line:225,column:48}},105:{start:{line:227,column:24},end:{line:229,column:3}},106:{start:{line:228,column:4},end:{line:228,column:23}},107:{start:{line:230,column:26},end:{line:232,column:3}},108:{start:{line:231,column:4},end:{line:231,column:24}},109:{start:{line:233,column:20},end:{line:233,column:120}},110:{start:{line:235,column:2},end:{line:300,column:3}},111:{start:{line:236,column:4},end:{line:251,column:6}},112:{start:{line:252,column:9},end:{line:300,column:3}},113:{start:{line:253,column:4},end:{line:267,column:6}},114:{start:{line:268,column:9},end:{line:300,column:3}},115:{start:{line:269,column:4},end:{line:283,column:6}},116:{start:{line:285,column:4},end:{line:299,column:6}},117:{start:{line:301,column:2},end:{line:301,column:141}}},fnMap:{0:{name:"isLiteralExpression",decl:{start:{line:9,column:9},end:{line:9,column:28}},loc:{start:{line:9,column:36},end:{line:11,column:1}},line:9},1:{name:"isGetExpression",decl:{start:{line:12,column:9},end:{line:12,column:24}},loc:{start:{line:12,column:32},end:{line:14,column:1}},line:12},2:{name:"isZoomField",decl:{start:{line:15,column:9},end:{line:15,column:20}},loc:{start:{line:15,column:28},end:{line:19,column:1}},line:15},3:{name:"(anonymous_3)",decl:{start:{line:16,column:168},end:{line:16,column:169}},loc:{start:{line:16,column:178},end:{line:18,column:3}},line:16},4:{name:"isIdentityProperty",decl:{start:{line:20,column:9},end:{line:20,column:27}},loc:{start:{line:20,column:35},end:{line:22,column:1}},line:20},5:{name:"isDataStopProperty",decl:{start:{line:23,column:9},end:{line:23,column:27}},loc:{start:{line:23,column:35},end:{line:27,column:1}},line:23},6:{name:"(anonymous_6)",decl:{start:{line:24,column:168},end:{line:24,column:169}},loc:{start:{line:24,column:178},end:{line:26,column:3}},line:24},7:{name:"isDataField",decl:{start:{line:28,column:9},end:{line:28,column:20}},loc:{start:{line:28,column:28},end:{line:30,column:1}},line:28},8:{name:"isPrimative",decl:{start:{line:31,column:9},end:{line:31,column:20}},loc:{start:{line:31,column:28},end:{line:34,column:1}},line:31},9:{name:"isArrayOfPrimatives",decl:{start:{line:35,column:9},end:{line:35,column:28}},loc:{start:{line:35,column:37},end:{line:40,column:1}},line:35},10:{name:"getDataType",decl:{start:{line:41,column:9},end:{line:41,column:20}},loc:{start:{line:41,column:44},end:{line:63,column:1}},line:41},11:{name:"(anonymous_11)",decl:{start:{line:64,column:22},end:{line:64,column:23}},loc:{start:{line:64,column:33},end:{line:302,column:1}},line:64},12:{name:"(anonymous_12)",decl:{start:{line:69,column:18},end:{line:69,column:19}},loc:{start:{line:69,column:24},end:{line:73,column:3}},line:69},13:{name:"(anonymous_13)",decl:{start:{line:74,column:31},end:{line:74,column:32}},loc:{start:{line:74,column:46},end:{line:82,column:3}},line:74},14:{name:"(anonymous_14)",decl:{start:{line:83,column:18},end:{line:83,column:19}},loc:{start:{line:83,column:24},end:{line:99,column:3}},line:83},15:{name:"(anonymous_15)",decl:{start:{line:100,column:27},end:{line:100,column:28}},loc:{start:{line:100,column:33},end:{line:104,column:3}},line:100},16:{name:"(anonymous_16)",decl:{start:{line:105,column:21},end:{line:105,column:22}},loc:{start:{line:105,column:34},end:{line:116,column:3}},line:105},17:{name:"(anonymous_17)",decl:{start:{line:117,column:27},end:{line:117,column:28}},loc:{start:{line:117,column:33},end:{line:146,column:3}},line:117},18:{name:"(anonymous_18)",decl:{start:{line:124,column:33},end:{line:124,column:34}},loc:{start:{line:124,column:43},end:{line:126,column:11}},line:124},19:{name:"(anonymous_19)",decl:{start:{line:147,column:25},end:{line:147,column:26}},loc:{start:{line:147,column:31},end:{line:159,column:3}},line:147},20:{name:"(anonymous_20)",decl:{start:{line:160,column:18},end:{line:160,column:19}},loc:{start:{line:160,column:24},end:{line:163,column:3}},line:160},21:{name:"(anonymous_21)",decl:{start:{line:164,column:25},end:{line:164,column:26}},loc:{start:{line:164,column:31},end:{line:175,column:3}},line:164},22:{name:"(anonymous_22)",decl:{start:{line:176,column:27},end:{line:176,column:28}},loc:{start:{line:176,column:33},end:{line:214,column:3}},line:176},23:{name:"(anonymous_23)",decl:{start:{line:187,column:33},end:{line:187,column:34}},loc:{start:{line:187,column:43},end:{line:189,column:11}},line:187},24:{name:"(anonymous_24)",decl:{start:{line:215,column:32},end:{line:215,column:33}},loc:{start:{line:215,column:38},end:{line:226,column:3}},line:215},25:{name:"(anonymous_25)",decl:{start:{line:227,column:24},end:{line:227,column:25}},loc:{start:{line:227,column:30},end:{line:229,column:3}},line:227},26:{name:"(anonymous_26)",decl:{start:{line:230,column:26},end:{line:230,column:27}},loc:{start:{line:230,column:32},end:{line:232,column:3}},line:230}},branchMap:{0:{loc:{start:{line:10,column:9},end:{line:10,column:77}},type:"binary-expr",locations:[{start:{line:10,column:9},end:{line:10,column:29}},{start:{line:10,column:33},end:{line:10,column:51}},{start:{line:10,column:55},end:{line:10,column:77}}],line:10},1:{loc:{start:{line:13,column:9},end:{line:13,column:73}},type:"binary-expr",locations:[{start:{line:13,column:9},end:{line:13,column:29}},{start:{line:13,column:33},end:{line:13,column:51}},{start:{line:13,column:55},end:{line:13,column:73}}],line:13},2:{loc:{start:{line:16,column:9},end:{line:18,column:4}},type:"binary-expr",locations:[{start:{line:16,column:9},end:{line:16,column:34}},{start:{line:16,column:38},end:{line:16,column:49}},{start:{line:16,column:53},end:{line:16,column:90}},{start:{line:16,column:94},end:{line:16,column:120}},{start:{line:16,column:124},end:{line:16,column:146}},{start:{line:16,column:150},end:{line:18,column:4}}],line:16},3:{loc:{start:{line:17,column:11},end:{line:17,column:51}},type:"binary-expr",locations:[{start:{line:17,column:11},end:{line:17,column:30}},{start:{line:17,column:34},end:{line:17,column:51}}],line:17},4:{loc:{start:{line:21,column:9},end:{line:21,column:122}},type:"binary-expr",locations:[{start:{line:21,column:9},end:{line:21,column:34}},{start:{line:21,column:38},end:{line:21,column:63}},{start:{line:21,column:67},end:{line:21,column:122}}],line:21},5:{loc:{start:{line:24,column:9},end:{line:26,column:4}},type:"binary-expr",locations:[{start:{line:24,column:9},end:{line:24,column:34}},{start:{line:24,column:38},end:{line:24,column:49}},{start:{line:24,column:53},end:{line:24,column:90}},{start:{line:24,column:94},end:{line:24,column:116}},{start:{line:24,column:120},end:{line:24,column:146}},{start:{line:24,column:150},end:{line:26,column:4}}],line:24},6:{loc:{start:{line:25,column:11},end:{line:25,column:82}},type:"binary-expr",locations:[{start:{line:25,column:11},end:{line:25,column:30}},{start:{line:25,column:34},end:{line:25,column:51}},{start:{line:25,column:55},end:{line:25,column:82}}],line:25},7:{loc:{start:{line:29,column:9},end:{line:29,column:63}},type:"binary-expr",locations:[{start:{line:29,column:9},end:{line:29,column:34}},{start:{line:29,column:38},end:{line:29,column:63}}],line:29},8:{loc:{start:{line:36,column:2},end:{line:38,column:3}},type:"if",locations:[{start:{line:36,column:2},end:{line:38,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:36},9:{loc:{start:{line:41,column:28},end:{line:41,column:42}},type:"default-arg",locations:[{start:{line:41,column:40},end:{line:41,column:42}}],line:41},10:{loc:{start:{line:42,column:2},end:{line:62,column:3}},type:"if",locations:[{start:{line:42,column:2},end:{line:62,column:3}},{start:{line:44,column:9},end:{line:62,column:3}}],line:42},11:{loc:{start:{line:44,column:9},end:{line:62,column:3}},type:"if",locations:[{start:{line:44,column:9},end:{line:62,column:3}},{start:{line:46,column:9},end:{line:62,column:3}}],line:44},12:{loc:{start:{line:46,column:9},end:{line:62,column:3}},type:"if",locations:[{start:{line:46,column:9},end:{line:62,column:3}},{start:{line:48,column:9},end:{line:62,column:3}}],line:46},13:{loc:{start:{line:46,column:13},end:{line:46,column:69}},type:"binary-expr",locations:[{start:{line:46,column:13},end:{line:46,column:39}},{start:{line:46,column:43},end:{line:46,column:69}}],line:46},14:{loc:{start:{line:48,column:9},end:{line:62,column:3}},type:"if",locations:[{start:{line:48,column:9},end:{line:62,column:3}},{start:{line:50,column:9},end:{line:62,column:3}}],line:48},15:{loc:{start:{line:48,column:13},end:{line:48,column:75}},type:"binary-expr",locations:[{start:{line:48,column:13},end:{line:48,column:45}},{start:{line:48,column:49},end:{line:48,column:75}}],line:48},16:{loc:{start:{line:50,column:9},end:{line:62,column:3}},type:"if",locations:[{start:{line:50,column:9},end:{line:62,column:3}},{start:{line:52,column:9},end:{line:62,column:3}}],line:50},17:{loc:{start:{line:52,column:9},end:{line:62,column:3}},type:"if",locations:[{start:{line:52,column:9},end:{line:62,column:3}},{start:{line:54,column:9},end:{line:62,column:3}}],line:52},18:{loc:{start:{line:54,column:9},end:{line:62,column:3}},type:"if",locations:[{start:{line:54,column:9},end:{line:62,column:3}},{start:{line:56,column:9},end:{line:62,column:3}}],line:54},19:{loc:{start:{line:56,column:9},end:{line:62,column:3}},type:"if",locations:[{start:{line:56,column:9},end:{line:62,column:3}},{start:{line:58,column:9},end:{line:62,column:3}}],line:56},20:{loc:{start:{line:58,column:9},end:{line:62,column:3}},type:"if",locations:[{start:{line:58,column:9},end:{line:62,column:3}},{start:{line:60,column:9},end:{line:62,column:3}}],line:58},21:{loc:{start:{line:70,column:4},end:{line:72,column:5}},type:"if",locations:[{start:{line:70,column:4},end:{line:72,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:70},22:{loc:{start:{line:75,column:4},end:{line:77,column:5}},type:"if",locations:[{start:{line:75,column:4},end:{line:77,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:75},23:{loc:{start:{line:78,column:4},end:{line:80,column:5}},type:"if",locations:[{start:{line:78,column:4},end:{line:80,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:78},24:{loc:{start:{line:86,column:4},end:{line:93,column:5}},type:"if",locations:[{start:{line:86,column:4},end:{line:93,column:5}},{start:{line:91,column:11},end:{line:93,column:5}}],line:86},25:{loc:{start:{line:112,column:4},end:{line:114,column:5}},type:"if",locations:[{start:{line:112,column:4},end:{line:114,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:112},26:{loc:{start:{line:120,column:4},end:{line:144,column:5}},type:"if",locations:[{start:{line:120,column:4},end:{line:144,column:5}},{start:{line:137,column:11},end:{line:144,column:5}}],line:120},27:{loc:{start:{line:121,column:6},end:{line:136,column:7}},type:"if",locations:[{start:{line:121,column:6},end:{line:136,column:7}},{start:{line:128,column:13},end:{line:136,column:7}}],line:121},28:{loc:{start:{line:125,column:34},end:{line:125,column:81}},type:"binary-expr",locations:[{start:{line:125,column:34},end:{line:125,column:41}},{start:{line:125,column:45},end:{line:125,column:81}}],line:125},29:{loc:{start:{line:140,column:14},end:{line:140,column:59}},type:"binary-expr",locations:[{start:{line:140,column:14},end:{line:140,column:19}},{start:{line:140,column:23},end:{line:140,column:59}}],line:140},30:{loc:{start:{line:141,column:15},end:{line:141,column:60}},type:"binary-expr",locations:[{start:{line:141,column:15},end:{line:141,column:20}},{start:{line:141,column:24},end:{line:141,column:60}}],line:141},31:{loc:{start:{line:149,column:4},end:{line:158,column:5}},type:"if",locations:[{start:{line:149,column:4},end:{line:158,column:5}},{start:{line:155,column:11},end:{line:158,column:5}}],line:149},32:{loc:{start:{line:155,column:11},end:{line:158,column:5}},type:"if",locations:[{start:{line:155,column:11},end:{line:158,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:155},33:{loc:{start:{line:162,column:11},end:{line:162,column:139}},type:"binary-expr",locations:[{start:{line:162,column:11},end:{line:162,column:33}},{start:{line:162,column:37},end:{line:162,column:63}},{start:{line:162,column:67},end:{line:162,column:85}},{start:{line:162,column:89},end:{line:162,column:109}},{start:{line:162,column:113},end:{line:162,column:139}}],line:162},34:{loc:{start:{line:167,column:4},end:{line:173,column:5}},type:"if",locations:[{start:{line:167,column:4},end:{line:173,column:5}},{start:{line:169,column:11},end:{line:173,column:5}}],line:167},35:{loc:{start:{line:167,column:8},end:{line:167,column:53}},type:"binary-expr",locations:[{start:{line:167,column:8},end:{line:167,column:33}},{start:{line:167,column:37},end:{line:167,column:53}}],line:167},36:{loc:{start:{line:169,column:11},end:{line:173,column:5}},type:"if",locations:[{start:{line:169,column:11},end:{line:173,column:5}},{start:{line:171,column:11},end:{line:173,column:5}}],line:169},37:{loc:{start:{line:172,column:31},end:{line:172,column:63}},type:"binary-expr",locations:[{start:{line:172,column:31},end:{line:172,column:36}},{start:{line:172,column:40},end:{line:172,column:63}}],line:172},38:{loc:{start:{line:178,column:22},end:{line:178,column:61}},type:"cond-expr",locations:[{start:{line:178,column:55},end:{line:178,column:57}},{start:{line:178,column:60},end:{line:178,column:61}}],line:178},39:{loc:{start:{line:181,column:4},end:{line:212,column:5}},type:"if",locations:[{start:{line:181,column:4},end:{line:212,column:5}},{start:{line:202,column:11},end:{line:212,column:5}}],line:181},40:{loc:{start:{line:182,column:6},end:{line:201,column:7}},type:"if",locations:[{start:{line:182,column:6},end:{line:201,column:7}},{start:{line:191,column:13},end:{line:201,column:7}}],line:182},41:{loc:{start:{line:188,column:57},end:{line:188,column:104}},type:"binary-expr",locations:[{start:{line:188,column:57},end:{line:188,column:64}},{start:{line:188,column:68},end:{line:188,column:104}}],line:188},42:{loc:{start:{line:208,column:42},end:{line:208,column:93}},type:"binary-expr",locations:[{start:{line:208,column:42},end:{line:208,column:53}},{start:{line:208,column:57},end:{line:208,column:93}}],line:208},43:{loc:{start:{line:209,column:43},end:{line:209,column:94}},type:"binary-expr",locations:[{start:{line:209,column:43},end:{line:209,column:54}},{start:{line:209,column:58},end:{line:209,column:94}}],line:209},44:{loc:{start:{line:233,column:20},end:{line:233,column:120}},type:"cond-expr",locations:[{start:{line:233,column:62},end:{line:233,column:89}},{start:{line:233,column:92},end:{line:233,column:120}}],line:233},45:{loc:{start:{line:235,column:2},end:{line:300,column:3}},type:"if",locations:[{start:{line:235,column:2},end:{line:300,column:3}},{start:{line:252,column:9},end:{line:300,column:3}}],line:235},46:{loc:{start:{line:252,column:9},end:{line:300,column:3}},type:"if",locations:[{start:{line:252,column:9},end:{line:300,column:3}},{start:{line:268,column:9},end:{line:300,column:3}}],line:252},47:{loc:{start:{line:268,column:9},end:{line:300,column:3}},type:"if",locations:[{start:{line:268,column:9},end:{line:300,column:3}},{start:{line:284,column:9},end:{line:300,column:3}}],line:268}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0,87:0,88:0,89:0,90:0,91:0,92:0,93:0,94:0,95:0,96:0,97:0,98:0,99:0,100:0,101:0,102:0,103:0,104:0,105:0,106:0,107:0,108:0,109:0,110:0,111:0,112:0,113:0,114:0,115:0,116:0,117:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0},b:{0:[0,0,0],1:[0,0,0],2:[0,0,0,0,0,0],3:[0,0],4:[0,0,0],5:[0,0,0,0,0,0],6:[0,0,0],7:[0,0],8:[0,0],9:[0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0],26:[0,0],27:[0,0],28:[0,0],29:[0,0],30:[0,0],31:[0,0],32:[0,0],33:[0,0,0,0,0],34:[0,0],35:[0,0],36:[0,0],37:[0,0],38:[0,0],39:[0,0],40:[0,0],41:[0,0],42:[0,0],43:[0,0],44:[0,0],45:[0,0],46:[0,0],47:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldFunction.tsx"],names:[],mappings:"AAiVM;AAjVN,OAAO,WAAW;AAElB,OAAO,kBAAkB;AACzB,OAAO,kBAAiC;AACxC,OAAO,kBAAkB;AACzB,OAAO,wBAAwB;AAC/B,SAAQ,YAAY,qBAAoB;AACxC,SAAQ,2BAA0B;AAIlC,SAAS,oBAAoB,OAAY;AACvC,SAAQ,MAAM,QAAQ,KAAK,KAAK,MAAM,WAAW,KAAK,MAAM,CAAC,MAAM;AACrE;AAEA,SAAS,gBAAgB,OAAY;AACnC,SACE,MAAM,QAAQ,KAAK,KACnB,MAAM,WAAW,KACjB,MAAM,CAAC,MAAM;AAEjB;AAEA,SAAS,YAAY,OAAY;AAC/B,SACE,OAAO,UAAW,YAClB,MAAM,SACN,OAAO,MAAM,aAAc,eAC3B,MAAM,QAAQ,MAAM,KAAK,KACzB,MAAM,MAAM,SAAS,KACrB,MAAM,MAAM,MAAM,CAAC,SAAe;AAChC,WACE,MAAM,QAAQ,IAAI,KAClB,KAAK,WAAW;AAAA,EAEpB,CAAC;AAEL;AAEA,SAAS,mBAAmB,OAAY;AACtC,SACE,OAAO,UAAW,YAClB,MAAM,SAAS,cACf,OAAO,UAAU,eAAe,KAAK,OAAO,UAAU;AAE1D;AAEA,SAAS,mBAAmB,OAAY;AACtC,SACE,OAAO,UAAW,YAClB,MAAM,SACN,OAAO,MAAM,aAAc,eAC3B,MAAM,MAAM,SAAS,KACrB,MAAM,QAAQ,MAAM,KAAK,KACzB,MAAM,MAAM,MAAM,CAAC,SAAe;AAChC,WACE,MAAM,QAAQ,IAAI,KAClB,KAAK,WAAW,KAChB,OAAO,KAAK,CAAC,MAAO;AAAA,EAExB,CAAC;AAEL;AAEA,SAAS,YAAY,OAAY;AAC/B,SACE,mBAAmB,KAAK,KACxB,mBAAmB,KAAK;AAE5B;AAEA,SAAS,YAAY,OAAgD;AACnE,QAAM,QAAQ,CAAC,UAAU,WAAW,QAAQ;AAC5C,SAAO,MAAM,SAAS,OAAO,KAAM;AACrC;AAEA,SAAS,oBAAoB,QAAyD;AACpF,MAAI,MAAM,QAAQ,MAAM,GAAG;AACzB,WAAO,OAAO,MAAM,WAAW;AAAA,EACjC;AACA,SAAO;AACT;AAEA,SAAS,YAAY,OAAY,YAAU,CAAC,GAAU;AACpD,MAAI,UAAU,QAAW;AACvB,WAAO;AAAA,EACT,WACS,YAAY,KAAK,GAAG;AAC3B,WAAO;AAAA,EACT,WACS,UAAU,SAAS,WAAW,oBAAoB,KAAK,GAAG;AACjE,WAAO;AAAA,EACT,WACS,UAAU,SAAS,iBAAiB,oBAAoB,KAAK,GAAG;AACvE,WAAO;AAAA,EACT,WACS,UAAU,SAAS,cAAc;AACxC,WAAO;AAAA,EACT,WACS,UAAU,SAAS,WAAW;AACrC,WAAO;AAAA,EACT,WACS,UAAU,SAAS,kCAAkC;AAC5D,WAAO;AAAA,EACT,WACS,YAAY,KAAK,GAAG;AAC3B,WAAO;AAAA,EACT,WACS,YAAY,KAAK,GAAG;AAC3B,WAAO;AAAA,EACT,OACK;AACH,WAAO;AAAA,EACT;AACF;AAgBA,MAAM,gBAA8C,CAAC,UAAU;AAC7D,QAAM,CAAC,UAAU,WAAW,IAAI,MAAM;AAAA,IACpC,YAAY,MAAM,OAAO,MAAM,SAAS;AAAA,EAC1C;AACA,QAAM,CAAC,WAAW,YAAY,IAAI,MAAM,SAAS,KAAK;AAEtD,QAAM,UAAU,MAAM;AACpB,QAAI,CAAC,WAAW;AACd,kBAAY,YAAY,MAAM,OAAO,MAAM,SAAS,CAAC;AAAA,IACvD;AAAA,EACF,GAAG,CAAC,MAAM,OAAO,MAAM,WAAW,SAAS,CAAC;AAE5C,QAAM,uBAAuB,CAAC,cAAmB;AAC/C,QAAI,UAAU,WAAW,cAAc;AACrC,aAAO;AAAA,IACT;AACA,QAAI,UAAU,SAAS,UAAU;AAC/B,aAAO;AAAA,IACT;AACA,WAAO;AAAA,EACT;AAEA,QAAM,UAAU,MAAM;AACpB,UAAM,QAAQ,MAAM,MAAM,MAAM,MAAM,CAAC;AACvC,UAAM,WAAW,MAAM,MAAM,SAAS,CAAC;AACvC,QAAI,OAAO,SAAS,CAAC,MAAM,UAAU;AACnC,YAAM,KAAK;AAAA,QACT,EAAE,MAAM,SAAS,CAAC,EAAE,OAAO,GAAG,OAAO,SAAS,CAAC,EAAE,MAAM;AAAA,QACvD,SAAS,CAAC;AAAA,MACZ,CAAC;AAAA,IACH,OAAO;AACL,YAAM,KAAK,CAAC,SAAS,CAAC,IAAI,GAAG,SAAS,CAAC,CAAC,CAAC;AAAA,IAC3C;AAEA,UAAM,eAAe;AAAA,MACnB,GAAG,MAAM;AAAA,MACT;AAAA,IACF;AAEA,UAAM,SAAS,MAAM,WAAW,YAAY;AAAA,EAC9C;AAEA,QAAM,mBAAmB,MAAM;AAC7B,UAAM,EAAE,WAAW,UAAU,IAAI;AACjC,UAAM,SAAS,WAAW,UAAU,OAAO;AAC3C,gBAAY,OAAO;AAAA,EACrB;AAEA,QAAM,aAAa,CAAC,YAAoB;AACtC,UAAM,QAAQ,MAAM,MAAM,MAAM,MAAM,CAAC;AACvC,UAAM,OAAO,SAAS,CAAC;AAEvB,QAAI,eAAoB;AAAA,MACtB,GAAG,MAAM;AAAA,MACT;AAAA,IACF;AAEA,QAAI,MAAM,WAAW,GAAG;AACtB,qBAAe,MAAM,CAAC,EAAE,CAAC;AAAA,IAC3B;AAEA,UAAM,SAAS,MAAM,WAAW,YAAY;AAAA,EAC9C;AAEA,QAAM,mBAAmB,MAAM;AAC7B,UAAM,EAAE,MAAM,IAAI;AAElB,QAAI;AACJ,QAAI,OAAO,UAAU,UAAU;AAC7B,UAAI,MAAM,OAAO;AACf,mBAAW;AAAA,UACT,MAAM,MAAM;AAAA,UACZ,OAAO,MAAM,MAAM,IAAI,CAAC,SAAe;AACrC,mBAAO,CAAC,KAAK,CAAC,EAAE,MAAM,KAAK,CAAC,KAAK,oBAAoB,MAAM,SAAS,CAAC;AAAA,UACvE,CAAC;AAAA,QACH;AAAA,MACF,OAAO;AACL,mBAAW;AAAA,UACT,MAAM,MAAM;AAAA,UACZ,OAAO;AAAA,YACL,CAAC,GAAG,oBAAoB,MAAM,SAAS,CAAC;AAAA,YACxC,CAAC,IAAI,oBAAoB,MAAM,SAAS,CAAC;AAAA,UAC3C;AAAA,QACF;AAAA,MACF;AAAA,IACF,OAAO;AACL,iBAAW;AAAA,QACT,OAAO;AAAA,UACL,CAAC,GAAG,SAAS,oBAAoB,MAAM,SAAS,CAAC;AAAA,UACjD,CAAC,IAAI,SAAS,oBAAoB,MAAM,SAAS,CAAC;AAAA,QACpD;AAAA,MACF;AAAA,IACF;AAEA,UAAM,SAAS,MAAM,WAAW,QAAQ;AAAA,EAC1C;AAEA,QAAM,iBAAiB,MAAM;AAC3B,UAAM,EAAE,OAAO,UAAU,IAAI;AAE7B,QAAI,gBAAgB,KAAK,GAAG;AAC1B,YAAM,SAAS,WAAW;AAAA,QACxB,MAAM;AAAA,QACN,UAAU,MAAM,CAAC;AAAA,MACnB,CAAC;AACD,kBAAY,OAAO;AAAA,IACrB,WAAW,oBAAoB,KAAK,GAAG;AACrC,YAAM,SAAS,WAAW,MAAM,CAAC,CAAC;AAClC,kBAAY,OAAO;AAAA,IACrB;AAAA,EACF;AAEA,QAAM,UAAU,MAAM;AACpB,UAAM,EAAE,OAAO,UAAU,IAAI;AAC7B,WACE,gBAAgB,KAAK,KACrB,oBAAoB,KAAK,KACzB,YAAY,KAAK,KAChB,MAAM,QAAQ,KAAK,KAAK,UAAU,SAAS;AAAA,EAEhD;AAEA,QAAM,iBAAiB,MAAM;AAC3B,UAAM,EAAE,OAAO,UAAU,IAAI;AAC7B,QAAI;AAEJ,QAAI,OAAO,UAAU,YAAY,WAAW,OAAO;AACjD,mBAAa,cAAc,gBAAgB,OAAO,SAAS;AAAA,IAC7D,WAAW,mBAAmB,KAAK,GAAG;AACpC,mBAAa,CAAC,OAAO,MAAM,QAAQ;AAAA,IACrC,OAAO;AACL,mBAAa,CAAC,WAAW,SAAS,MAAM,UAAU,OAAO;AAAA,IAC3D;AACA,UAAM,SAAS,MAAM,WAAW,UAAU;AAAA,EAC5C;AAEA,QAAM,mBAAmB,MAAM;AAC7B,UAAM,eAAe,qBAAqB,MAAM,SAAS;AACzD,UAAM,YAAY,iBAAiB,gBAAgB,KAAK;AACxD,UAAM,EAAE,MAAM,IAAI;AAClB,QAAI;AAEJ,QAAI,OAAO,UAAU,UAAU;AAC7B,UAAI,MAAM,OAAO;AACf,mBAAW;AAAA,UACT,UAAU;AAAA,UACV,MAAM;AAAA,UACN,MAAM,MAAM;AAAA,UACZ,OAAO,MAAM,MAAM,IAAI,CAAC,SAAe;AACrC,mBAAO,CAAC,EAAE,MAAM,KAAK,CAAC,GAAG,OAAO,UAAU,GAAG,KAAK,CAAC,KAAK,oBAAoB,MAAM,SAAS,CAAC;AAAA,UAC9F,CAAC;AAAA,QACH;AAAA,MACF,OAAO;AACL,mBAAW;AAAA,UACT,UAAU;AAAA,UACV,MAAM;AAAA,UACN,MAAM,MAAM;AAAA,UACZ,OAAO;AAAA,YACL,CAAC,EAAE,MAAM,GAAG,OAAO,UAAU,GAAG,oBAAoB,MAAM,SAAS,CAAC;AAAA,YACpE,CAAC,EAAE,MAAM,IAAI,OAAO,UAAU,GAAG,oBAAoB,MAAM,SAAS,CAAC;AAAA,UACvE;AAAA,QACF;AAAA,MACF;AAAA,IACF,OAAO;AACL,iBAAW;AAAA,QACT,UAAU;AAAA,QACV,MAAM;AAAA,QACN,MAAM,MAAM;AAAA,QACZ,OAAO;AAAA,UACL,CAAC,EAAE,MAAM,GAAG,OAAO,UAAU,GAAG,MAAM,SAAS,oBAAoB,MAAM,SAAS,CAAC;AAAA,UACnF,CAAC,EAAE,MAAM,IAAI,OAAO,UAAU,GAAG,MAAM,SAAS,oBAAoB,MAAM,SAAS,CAAC;AAAA,QACtF;AAAA,MACF;AAAA,IACF;AAEA,UAAM,SAAS,MAAM,WAAW,QAAQ;AAAA,EAC1C;AAEA,QAAM,wBAAwB,MAAM;AAClC,UAAM,aAAa;AAAA,MACjB;AAAA,MACA,CAAC,QAAQ;AAAA,MACT,CAAC,WAAW;AAAA,MACZ;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACF;AAEA,UAAM,SAAS,MAAM,WAAW,UAAU;AAAA,EAC5C;AAEA,QAAM,gBAAgB,MAAM;AAC1B,iBAAa,IAAI;AAAA,EACnB;AAEA,QAAM,kBAAkB,MAAM;AAC5B,iBAAa,KAAK;AAAA,EACpB;AAEA,QAAM,YACJ,MAAM,UAAU,YAAY,MAAM,QAAQ,8BAA8B;AAE1E,MAAI;AAEJ,MAAI,aAAa,cAAc;AAC7B,gBACE;AAAA,MAAC;AAAA;AAAA,QACC,QAAQ,MAAM;AAAA,QACd,UAAU,MAAM,SAAS,KAAK,MAAM,MAAM,SAAS;AAAA,QACnD;AAAA,QACA,QAAQ;AAAA,QACR,UAAU;AAAA,QACV,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,OAAO,MAAM;AAAA,QACb,SAAS;AAAA,QACT,QAAQ;AAAA;AAAA,IACV;AAAA,EAEJ,WAAW,aAAa,iBAAiB;AACvC,gBACE;AAAA,MAAC;AAAA;AAAA,QACC,QAAQ,MAAM;AAAA,QACd,UAAU,MAAM,SAAS,KAAK,IAAI;AAAA,QAClC,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,OAAO,MAAM;AAAA,QACb,cAAc;AAAA,QACd,WAAW;AAAA,QACX,wBAAwB;AAAA,QACxB,mBAAmB;AAAA;AAAA,IACrB;AAAA,EAEJ,WAAW,aAAa,iBAAiB;AACvC,gBACE;AAAA,MAAC;AAAA;AAAA,QACC,QAAQ,MAAM;AAAA,QACd,UAAU,MAAM,SAAS,KAAK,IAAI;AAAA,QAClC,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,OAAO,MAAM;AAAA,QACb,cAAc;AAAA,QACd,WAAW;AAAA,QACX,wBAAwB;AAAA,QACxB,mBAAmB;AAAA;AAAA,IACrB;AAAA,EAEJ,OAAO;AACL,gBACE;AAAA,MAAC;AAAA;AAAA,QACC,QAAQ,MAAM;AAAA,QACd,UAAU,MAAM,SAAS,KAAK,IAAI;AAAA,QAClC,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,OAAO,MAAM;AAAA,QACb,aAAa;AAAA,QACb,aAAa;AAAA,QACb,mBAAmB;AAAA,QACnB,kBAAkB;AAAA;AAAA,IACpB;AAAA,EAEJ;AAEA,SACE,oBAAC,SAAI,WAAW,WAAW,eAAa,0BAA0B,MAAM,WACrE,qBACH;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"cec93a709e0799aecc929100cb853febe363652d"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return pt=function(){return s},s}pt();function TV(n){return pt().f[0]++,pt().s[0]++,pt().b[0][0]++,Array.isArray(n)&&(pt().b[0][1]++,n.length===2)&&(pt().b[0][2]++,n[0]==="literal")}function RV(n){return pt().f[1]++,pt().s[1]++,pt().b[1][0]++,Array.isArray(n)&&(pt().b[1][1]++,n.length===2)&&(pt().b[1][2]++,n[0]==="get")}function qRe(n){return pt().f[2]++,pt().s[2]++,pt().b[2][0]++,typeof n=="object"&&(pt().b[2][1]++,n.stops)&&(pt().b[2][2]++,typeof n.property>"u")&&(pt().b[2][3]++,Array.isArray(n.stops))&&(pt().b[2][4]++,n.stops.length>1)&&(pt().b[2][5]++,n.stops.every(e=>(pt().f[3]++,pt().s[3]++,pt().b[3][0]++,Array.isArray(e)&&(pt().b[3][1]++,e.length===2))))}function Jse(n){return pt().f[4]++,pt().s[4]++,pt().b[4][0]++,typeof n=="object"&&(pt().b[4][1]++,n.type==="identity")&&(pt().b[4][2]++,Object.prototype.hasOwnProperty.call(n,"property"))}function YRe(n){return pt().f[5]++,pt().s[5]++,pt().b[5][0]++,typeof n=="object"&&(pt().b[5][1]++,n.stops)&&(pt().b[5][2]++,typeof n.property<"u")&&(pt().b[5][3]++,n.stops.length>1)&&(pt().b[5][4]++,Array.isArray(n.stops))&&(pt().b[5][5]++,n.stops.every(e=>(pt().f[6]++,pt().s[6]++,pt().b[6][0]++,Array.isArray(e)&&(pt().b[6][1]++,e.length===2)&&(pt().b[6][2]++,typeof e[0]=="object"))))}function $Re(n){return pt().f[7]++,pt().s[7]++,pt().b[7][0]++,Jse(n)||(pt().b[7][1]++,YRe(n))}function OL(n){pt().f[8]++;const e=(pt().s[8]++,["string","boolean","number"]);return pt().s[9]++,e.includes(typeof n)}function DV(n){return pt().f[9]++,pt().s[10]++,Array.isArray(n)?(pt().b[8][0]++,pt().s[11]++,n.every(OL)):(pt().b[8][1]++,pt().s[12]++,!1)}function PV(n,e=(pt().b[9][0]++,{})){return pt().f[10]++,pt().s[13]++,n===void 0?(pt().b[10][0]++,pt().s[14]++,"value"):(pt().b[10][1]++,pt().s[15]++,OL(n)?(pt().b[11][0]++,pt().s[16]++,"value"):(pt().b[11][1]++,pt().s[17]++,pt().b[13][0]++,e.type==="array"&&(pt().b[13][1]++,DV(n))?(pt().b[12][0]++,pt().s[18]++,"value"):(pt().b[12][1]++,pt().s[19]++,pt().b[15][0]++,e.type==="numberArray"&&(pt().b[15][1]++,DV(n))?(pt().b[14][0]++,pt().s[20]++,"value"):(pt().b[14][1]++,pt().s[21]++,e.type==="colorArray"?(pt().b[16][0]++,pt().s[22]++,"value"):(pt().b[16][1]++,pt().s[23]++,e.type==="padding"?(pt().b[17][0]++,pt().s[24]++,"value"):(pt().b[17][1]++,pt().s[25]++,e.type==="variableAnchorOffsetCollection"?(pt().b[18][0]++,pt().s[26]++,"value"):(pt().b[18][1]++,pt().s[27]++,qRe(n)?(pt().b[19][0]++,pt().s[28]++,"zoom_function"):(pt().b[19][1]++,pt().s[29]++,$Re(n)?(pt().b[20][0]++,pt().s[30]++,"data_function"):(pt().b[20][1]++,pt().s[31]++,"expression")))))))))}pt().s[32]++;const VRe=n=>{pt().f[11]++;const[e,t]=(pt().s[33]++,En.useState(PV(n.value,n.fieldSpec))),[i,r]=(pt().s[34]++,En.useState(!1));pt().s[35]++,En.useEffect(()=>{pt().f[12]++,pt().s[36]++,i?pt().b[21][1]++:(pt().b[21][0]++,pt().s[37]++,t(PV(n.value,n.fieldSpec)))},[n.value,n.fieldSpec,i]),pt().s[38]++;const o=V=>(pt().f[13]++,pt().s[39]++,V.expression.interpolated?(pt().b[22][0]++,pt().s[40]++,"exponential"):(pt().b[22][1]++,pt().s[41]++,V.type==="number"?(pt().b[23][0]++,pt().s[42]++,"interval"):(pt().b[23][1]++,pt().s[43]++,"categorical")));pt().s[44]++;const s=()=>{pt().f[14]++;const V=(pt().s[45]++,n.value.stops.slice(0)),H=(pt().s[46]++,V[V.length-1]);pt().s[47]++,typeof H[0]=="object"?(pt().b[24][0]++,pt().s[48]++,V.push([{zoom:H[0].zoom+1,value:H[0].value},H[1]])):(pt().b[24][1]++,pt().s[49]++,V.push([H[0]+1,H[1]]));const Q=(pt().s[50]++,{...n.value,stops:V});pt().s[51]++,n.onChange(n.fieldName,Q)};pt().s[52]++;const a=()=>{pt().f[15]++;const{fieldSpec:V,fieldName:H}=(pt().s[53]++,n);pt().s[54]++,n.onChange(H,V.default),pt().s[55]++,t("value")};pt().s[56]++;const c=V=>{pt().f[16]++;const H=(pt().s[57]++,n.value.stops.slice(0));pt().s[58]++,H.splice(V,1);let Q=(pt().s[59]++,{...n.value,stops:H});pt().s[60]++,H.length===1?(pt().b[25][0]++,pt().s[61]++,Q=H[0][1]):pt().b[25][1]++,pt().s[62]++,n.onChange(n.fieldName,Q)};pt().s[63]++;const h=()=>{pt().f[17]++;const{value:V}=(pt().s[64]++,n);let H;pt().s[65]++,typeof V=="object"?(pt().b[26][0]++,pt().s[66]++,V.stops?(pt().b[27][0]++,pt().s[67]++,H={base:V.base,stops:V.stops.map(Q=>(pt().f[18]++,pt().s[68]++,[Q[0].zoom,(pt().b[28][0]++,Q[1]||(pt().b[28][1]++,op(n.fieldSpec)))]))}):(pt().b[27][1]++,pt().s[69]++,H={base:V.base,stops:[[6,op(n.fieldSpec)],[10,op(n.fieldSpec)]]})):(pt().b[26][1]++,pt().s[70]++,H={stops:[[6,(pt().b[29][0]++,V||(pt().b[29][1]++,op(n.fieldSpec)))],[10,(pt().b[30][0]++,V||(pt().b[30][1]++,op(n.fieldSpec)))]]}),pt().s[71]++,n.onChange(n.fieldName,H)};pt().s[72]++;const m=()=>{pt().f[19]++;const{value:V,fieldName:H}=(pt().s[73]++,n);pt().s[74]++,RV(V)?(pt().b[31][0]++,pt().s[75]++,n.onChange(H,{type:"identity",property:V[1]}),pt().s[76]++,t("value")):(pt().b[31][1]++,pt().s[77]++,TV(V)?(pt().b[32][0]++,pt().s[78]++,n.onChange(H,V[1]),pt().s[79]++,t("value")):pt().b[32][1]++)};pt().s[80]++;const y=()=>{pt().f[20]++;const{value:V,fieldSpec:H}=(pt().s[81]++,n);return pt().s[82]++,pt().b[33][0]++,RV(V)||(pt().b[33][1]++,TV(V))||(pt().b[33][2]++,OL(V))||(pt().b[33][3]++,Array.isArray(V)&&(pt().b[33][4]++,H.type==="array"))};pt().s[83]++;const M=()=>{pt().f[21]++;const{value:V,fieldSpec:H}=(pt().s[84]++,n);let Q;pt().s[85]++,pt().b[35][0]++,typeof V=="object"&&(pt().b[35][1]++,"stops"in V)?(pt().b[34][0]++,pt().s[86]++,Q=lde.convertFunction(V,H)):(pt().b[34][1]++,pt().s[87]++,Jse(V)?(pt().b[36][0]++,pt().s[88]++,Q=["get",V.property]):(pt().b[36][1]++,pt().s[89]++,Q=["literal",(pt().b[37][0]++,V||(pt().b[37][1]++,n.fieldSpec.default))])),pt().s[90]++,n.onChange(n.fieldName,Q)};pt().s[91]++;const x=()=>{pt().f[22]++;const V=(pt().s[92]++,o(n.fieldSpec)),H=(pt().s[93]++,V==="categorical"?(pt().b[38][0]++,""):(pt().b[38][1]++,0)),{value:Q}=(pt().s[94]++,n);let Y;pt().s[95]++,typeof Q=="object"?(pt().b[39][0]++,pt().s[96]++,Q.stops?(pt().b[40][0]++,pt().s[97]++,Y={property:"",type:V,base:Q.base,stops:Q.stops.map(z=>(pt().f[23]++,pt().s[98]++,[{zoom:z[0],value:H},(pt().b[41][0]++,z[1]||(pt().b[41][1]++,op(n.fieldSpec)))]))}):(pt().b[40][1]++,pt().s[99]++,Y={property:"",type:V,base:Q.base,stops:[[{zoom:6,value:H},op(n.fieldSpec)],[{zoom:10,value:H},op(n.fieldSpec)]]})):(pt().b[39][1]++,pt().s[100]++,Y={property:"",type:V,base:Q.base,stops:[[{zoom:6,value:H},(pt().b[42][0]++,n.value||(pt().b[42][1]++,op(n.fieldSpec)))],[{zoom:10,value:H},(pt().b[43][0]++,n.value||(pt().b[43][1]++,op(n.fieldSpec)))]]}),pt().s[101]++,n.onChange(n.fieldName,Y)};pt().s[102]++;const T=()=>{pt().f[24]++;const V=(pt().s[103]++,["interpolate",["linear"],["elevation"],0,"black",2e3,"white"]);pt().s[104]++,n.onChange(n.fieldName,V)};pt().s[105]++;const P=()=>{pt().f[25]++,pt().s[106]++,r(!0)};pt().s[107]++;const F=()=>{pt().f[26]++,pt().s[108]++,r(!1)},j=(pt().s[109]++,n.fieldSpec.default===n.value?(pt().b[44][0]++,"maputnik-default-property"):(pt().b[44][1]++,"maputnik-modified-property"));let q;return pt().s[110]++,e==="expression"?(pt().b[45][0]++,pt().s[111]++,q=ie.jsx(fse,{errors:n.errors,onChange:n.onChange.bind(null,n.fieldName),canUndo:y,onUndo:m,onDelete:a,fieldType:n.fieldType,fieldName:n.fieldName,fieldSpec:n.fieldSpec,value:n.value,onFocus:P,onBlur:F})):(pt().b[45][1]++,pt().s[112]++,e==="zoom_function"?(pt().b[46][0]++,pt().s[113]++,q=ie.jsx(QRe,{errors:n.errors,onChange:n.onChange.bind(null),fieldType:n.fieldType,fieldName:n.fieldName,fieldSpec:n.fieldSpec,value:n.value,onDeleteStop:c,onAddStop:s,onChangeToDataFunction:x,onExpressionClick:M})):(pt().b[46][1]++,pt().s[114]++,e==="data_function"?(pt().b[47][0]++,pt().s[115]++,q=ie.jsx(GRe,{errors:n.errors,onChange:n.onChange.bind(null),fieldType:n.fieldType,fieldName:n.fieldName,fieldSpec:n.fieldSpec,value:n.value,onDeleteStop:c,onAddStop:s,onChangeToZoomFunction:h,onExpressionClick:M})):(pt().b[47][1]++,pt().s[116]++,q=ie.jsx(zRe,{errors:n.errors,onChange:n.onChange.bind(null),fieldType:n.fieldType,fieldName:n.fieldName,fieldSpec:n.fieldSpec,value:n.value,onZoomClick:h,onDataClick:x,onExpressionClick:M,onElevationClick:T})))),pt().s[117]++,ie.jsx("div",{className:j,"data-wd-key":"spec-field-container:"+n.fieldName,children:q})};function Fr(){var n="/home/runner/work/maputnik/maputnik/src/components/PropertyGroup.tsx",e="2b5da791871b9b38760c659b15188ae0aee85eaa",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/PropertyGroup.tsx",statementMap:{0:{start:{line:4,column:23},end:{line:4,column:117}},1:{start:{line:6,column:20},end:{line:6,column:60}},2:{start:{line:7,column:16},end:{line:7,column:49}},3:{start:{line:8,column:20},end:{line:8,column:36}},4:{start:{line:9,column:2},end:{line:14,column:3}},5:{start:{line:10,column:4},end:{line:13,column:6}},6:{start:{line:15,column:2},end:{line:20,column:3}},7:{start:{line:16,column:4},end:{line:19,column:6}},8:{start:{line:21,column:2},end:{line:21,column:19}},9:{start:{line:24,column:16},end:{line:24,column:48}},10:{start:{line:25,column:2},end:{line:25,column:49}},11:{start:{line:28,column:21},end:{line:31,column:3}},12:{start:{line:29,column:18},end:{line:29,column:80}},13:{start:{line:30,column:4},end:{line:30,column:51}},14:{start:{line:33,column:23},end:{line:33,column:33}},15:{start:{line:34,column:19},end:{line:52,column:6}},16:{start:{line:35,column:24},end:{line:35,column:87}},17:{start:{line:36,column:20},end:{line:36,column:48}},18:{start:{line:37,column:21},end:{line:37,column:50}},19:{start:{line:38,column:25},end:{line:38,column:82}},20:{start:{line:39,column:24},end:{line:39,column:63}},21:{start:{line:40,column:6},end:{line:51,column:8}},22:{start:{line:53,column:4},end:{line:53,column:98}}},fnMap:{0:{name:"getFieldSpec",decl:{start:{line:5,column:9},end:{line:5,column:21}},loc:{start:{line:5,column:50},end:{line:22,column:1}},line:5},1:{name:"getGroupName",decl:{start:{line:23,column:9},end:{line:23,column:21}},loc:{start:{line:23,column:50},end:{line:26,column:1}},line:23},2:{name:"(anonymous_2)",decl:{start:{line:28,column:21},end:{line:28,column:22}},loc:{start:{line:28,column:45},end:{line:31,column:3}},line:28},3:{name:"(anonymous_3)",decl:{start:{line:32,column:2},end:{line:32,column:3}},loc:{start:{line:32,column:11},end:{line:54,column:3}},line:32},4:{name:"(anonymous_4)",decl:{start:{line:34,column:46},end:{line:34,column:47}},loc:{start:{line:34,column:61},end:{line:52,column:5}},line:34}},branchMap:{0:{loc:{start:{line:9,column:2},end:{line:14,column:3}},type:"if",locations:[{start:{line:9,column:2},end:{line:14,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:9},1:{loc:{start:{line:15,column:2},end:{line:20,column:3}},type:"if",locations:[{start:{line:15,column:2},end:{line:20,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:15},2:{loc:{start:{line:24,column:16},end:{line:24,column:48}},type:"binary-expr",locations:[{start:{line:24,column:16},end:{line:24,column:42}},{start:{line:24,column:46},end:{line:24,column:48}}],line:24},3:{loc:{start:{line:25,column:9},end:{line:25,column:48}},type:"cond-expr",locations:[{start:{line:25,column:30},end:{line:25,column:37}},{start:{line:25,column:40},end:{line:25,column:48}}],line:25},4:{loc:{start:{line:36,column:20},end:{line:36,column:48}},type:"binary-expr",locations:[{start:{line:36,column:20},end:{line:36,column:42}},{start:{line:36,column:46},end:{line:36,column:48}}],line:36},5:{loc:{start:{line:37,column:21},end:{line:37,column:50}},type:"binary-expr",locations:[{start:{line:37,column:21},end:{line:37,column:44}},{start:{line:37,column:48},end:{line:37,column:50}}],line:37},6:{loc:{start:{line:38,column:25},end:{line:38,column:82}},type:"cond-expr",locations:[{start:{line:38,column:46},end:{line:38,column:62}},{start:{line:38,column:65},end:{line:38,column:82}}],line:38},7:{loc:{start:{line:39,column:24},end:{line:39,column:63}},type:"cond-expr",locations:[{start:{line:39,column:45},end:{line:39,column:52}},{start:{line:39,column:55},end:{line:39,column:63}}],line:39}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/PropertyGroup.tsx"],names:[],mappings:"AA4Da;AA5Db,OAAO,WAAW;AAElB,OAAO,mBAAmB;AAI1B,MAAM,iBAAiB,CAAC,sBAAsB,gBAAgB,gBAAgB,0BAA0B,YAAY;AAIpH,SAAS,aAAa,MAAW,WAAuC,WAAmB;AACzF,QAAM,YAAY,aAAa,MAAM,WAAW,SAAS;AACzD,QAAM,QAAQ,KAAK,YAAY,MAAM,SAAS;AAC9C,QAAM,YAAY,MAAM,SAAS;AACjC,MAAG,eAAe,QAAQ,SAAS,KAAK,GAAG;AACzC,WAAO;AAAA,MACL,GAAG;AAAA,MACH,QAAQ,KAAK,MAAM,OAAO;AAAA,IAC5B;AAAA,EACF;AACA,MAAG,cAAc,aAAa;AAC5B,WAAO;AAAA,MACL,GAAG;AAAA,MACH,QAAQ,KAAK,MAAM,OAAO;AAAA,IAC5B;AAAA,EACF;AACA,SAAO;AACT;AAEA,SAAS,aAAa,MAAW,WAAuC,WAAuC;AAC7G,QAAM,QAAQ,KAAK,WAAW,SAAS,KAAK,CAAC;AAC7C,SAAQ,aAAa,QAAS,UAAU;AAC1C;AAUA,qBAAqB,sBAAsB,MAAM,UAA8B;AAAA,EAC7E,mBAAmB,CAAC,UAAkB,aAAkB;AACtD,UAAM,QAAQ,aAAa,KAAK,MAAM,MAAM,KAAK,MAAM,MAAM,MAAM,QAAQ;AAC3E,SAAK,MAAM,SAAS,OAAO,UAAU,QAAQ;AAAA,EAC/C;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,OAAM,IAAI,KAAK;AACtB,UAAM,SAAS,KAAK,MAAM,YAAY,IAAI,eAAa;AACrD,YAAM,YAAY,aAAa,KAAK,MAAM,MAAM,KAAK,MAAM,MAAM,MAAM,SAAS;AAEhF,YAAM,QAAQ,KAAK,MAAM,MAAM,SAAS,CAAC;AACzC,YAAM,SAAS,KAAK,MAAM,MAAM,UAAU,CAAC;AAC3C,YAAM,aAAa,aAAa,QAC5B,MAAM,SAA+B,IACrC,OAAO,SAAgC;AAC3C,YAAM,YAAY,aAAa,QAAQ,UAAU;AAEjD,aAAO;AAAA,QAAC;AAAA;AAAA,UACN;AAAA,UACA,UAAU,KAAK;AAAA,UAEf;AAAA,UACA,OAAO;AAAA,UACP;AAAA,UACA;AAAA;AAAA,QAJK;AAAA,MAKP;AAAA,IACF,CAAC;AAED,WAAO,oBAAC,SAAI,WAAU,2BACnB,kBACH;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2b5da791871b9b38760c659b15188ae0aee85eaa"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Fr=function(){return s},s}Fr();const HRe=(Fr().s[0]++,["background-pattern","fill-pattern","line-pattern","fill-extrusion-pattern","icon-image"]);function ZRe(n,e,t){Fr().f[0]++;const i=(Fr().s[1]++,eae(n,e,t)),r=(Fr().s[2]++,n[i+"_"+e]),o=(Fr().s[3]++,r[t]);return Fr().s[4]++,HRe.indexOf(t)>=0?(Fr().b[0][0]++,Fr().s[5]++,{...o,values:n.$root.sprite.values}):(Fr().b[0][1]++,Fr().s[6]++,t==="text-font"?(Fr().b[1][0]++,Fr().s[7]++,{...o,values:n.$root.glyphs.values}):(Fr().b[1][1]++,Fr().s[8]++,o))}function eae(n,e,t){Fr().f[1]++;const i=(Fr().s[9]++,Fr().b[2][0]++,n["paint_"+e]||(Fr().b[2][1]++,{}));return Fr().s[10]++,t in i?(Fr().b[3][0]++,"paint"):(Fr().b[3][1]++,"layout")}class XRe extends En.Component{onPropertyChange=(Fr().s[11]++,(e,t)=>{Fr().f[2]++;const i=(Fr().s[12]++,eae(this.props.spec,this.props.layer.type,e));Fr().s[13]++,this.props.onChange(i,e,t)});render(){Fr().f[3]++;const{errors:e}=(Fr().s[14]++,this.props),t=(Fr().s[15]++,this.props.groupFields.map(i=>{Fr().f[4]++;const r=(Fr().s[16]++,ZRe(this.props.spec,this.props.layer.type,i)),o=(Fr().s[17]++,Fr().b[4][0]++,this.props.layer.paint||(Fr().b[4][1]++,{})),s=(Fr().s[18]++,Fr().b[5][0]++,this.props.layer.layout||(Fr().b[5][1]++,{})),a=(Fr().s[19]++,i in o?(Fr().b[6][0]++,o[i]):(Fr().b[6][1]++,s[i])),c=(Fr().s[20]++,i in o?(Fr().b[7][0]++,"paint"):(Fr().b[7][1]++,"layout"));return Fr().s[21]++,ie.jsx(VRe,{errors:e,onChange:this.onPropertyChange,fieldName:i,value:a,fieldType:c,fieldSpec:r},i)}));return Fr().s[22]++,ie.jsx("div",{className:"maputnik-property-group",children:t})}}function P_(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerEditorGroup.tsx",e="6c9e07ebeb2e5c7112c0b70e483a0c61cf0ea981",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/LayerEditorGroup.tsx",statementMap:{0:{start:{line:12,column:4},end:{line:27,column:9}},1:{start:{line:18,column:27},end:{line:18,column:74}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:11,column:2},end:{line:11,column:3}},loc:{start:{line:11,column:11},end:{line:28,column:3}},line:11},1:{name:"(anonymous_1)",decl:{start:{line:18,column:19},end:{line:18,column:20}},loc:{start:{line:18,column:27},end:{line:18,column:74}},line:18}},branchMap:{},s:{0:0,1:0},f:{0:0,1:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerEditorGroup.tsx"],names:[],mappings:"AA2BQ,SACE,KADF;AA3BR,OAAO,WAAW;AAClB,SAAQ,iBAAiB,qBAAoB;AAC7C;AAAA,EACE;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,OACK;AAaP,qBAAqB,yBAAyB,MAAM,UAAiC;AAAA,EACnF,SAAS;AACP,WAAO,qBAAC,iBAAc,MAAM,KAAK,MAAM,IACrC;AAAA;AAAA,QAAC;AAAA;AAAA,UAAqB,WAAU;AAAA,UAC9B,eAAa,wBAAsB,KAAK,MAAM,aAAa;AAAA,UAC3D,SAAS,QAAM,KAAK,MAAM,eAAe,CAAC,KAAK,MAAM,QAAQ;AAAA,UAE7D,+BAAC,uBAAoB,WAAU,uCAC7B;AAAA,gCAAC,UAAK,OAAO,EAAC,UAAU,GAAG,cAAc,SAAQ,GAAI,eAAK,MAAM,OAAM;AAAA,YACtE,oBAAC,iBAAc,MAAM,OAAO,WAAU,2FAA0F;AAAA,YAChI,oBAAC,mBAAgB,MAAM,OAAO,WAAU,6FAA4F;AAAA,aACtI;AAAA;AAAA,MACF;AAAA,MACA,oBAAC,sBACE,eAAK,MAAM,UACd;AAAA,OACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"6c9e07ebeb2e5c7112c0b70e483a0c61cf0ea981"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return P_=function(){return s},s}P_();class JRe extends En.Component{render(){return P_().f[0]++,P_().s[0]++,ie.jsxs(cse,{uuid:this.props.id,children:[ie.jsx(dse,{className:"maputnik-layer-editor-group","data-wd-key":"layer-editor-group:"+this.props["data-wd-key"],onClick:e=>(P_().f[1]++,P_().s[1]++,this.props.onActiveToggle(!this.props.isActive)),children:ie.jsxs(Ike,{className:"maputnik-layer-editor-group__button",children:[ie.jsx("span",{style:{flexGrow:1,alignContent:"center"},children:this.props.title}),ie.jsx(YX,{size:"2em",className:"maputnik-layer-editor-group__button__icon maputnik-layer-editor-group__button__icon--up"}),ie.jsx(qX,{size:"2em",className:"maputnik-layer-editor-group__button__icon maputnik-layer-editor-group__button__icon--down"})]})}),ie.jsx(Dke,{children:this.props.children})]})}}function Db(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldMinZoom.tsx",e="331998a9ac6b18663bcbca1301c32952f465e1af",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldMinZoom.tsx",statementMap:{0:{start:{line:6,column:29},end:{line:29,column:1}},1:{start:{line:7,column:12},end:{line:7,column:19}},2:{start:{line:8,column:2},end:{line:28,column:4}},3:{start:{line:30,column:21},end:{line:30,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:29},end:{line:6,column:30}},loc:{start:{line:6,column:40},end:{line:29,column:1}},line:6}},branchMap:{},s:{0:0,1:0,2:0,3:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldMinZoom.tsx"],names:[],mappings:"AAoBM;AAlBN,OAAO,YAAY;AACnB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,SAA+B,uBAAuB;AAQtD,MAAM,uBAA4D,CAAC,UAAU;AAC3E,QAAM,IAAI,MAAM;AAChB,SACE;AAAA,IAAC;AAAA;AAAA,MAAM,OAAO,EAAE,UAAU;AAAA,MAAG,WAAW,OAAO,MAAM;AAAA,MACnD,OAAO,MAAM;AAAA,MACb,eAAY;AAAA,MAEZ;AAAA,QAAC;AAAA;AAAA,UACC,YAAY;AAAA,UACZ,OAAO,MAAM;AAAA,UACb,UAAU,MAAM;AAAA,UAChB,KAAK,OAAO,MAAM,QAAQ;AAAA,UAC1B,KAAK,OAAO,MAAM,QAAQ;AAAA,UAC1B,SAAS,OAAO,MAAM,QAAQ;AAAA,UAC9B,eAAY;AAAA;AAAA,MACd;AAAA;AAAA,EACF;AAEJ;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"331998a9ac6b18663bcbca1301c32952f465e1af"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Db=function(){return s},s}Db();Db().s[0]++;const eDe=n=>{Db().f[0]++;const e=(Db().s[1]++,n.t);return Db().s[2]++,ie.jsx(Ls,{label:e("Min Zoom"),fieldSpec:Zr.layer.minzoom,error:n.error,"data-wd-key":"min-zoom",children:ie.jsx(m1,{allowRange:!0,value:n.value,onChange:n.onChange,min:Zr.layer.minzoom.minimum,max:Zr.layer.minzoom.maximum,default:Zr.layer.minzoom.minimum,"data-wd-key":"min-zoom.input"})})},tDe=(Db().s[3]++,No()(eDe));function Pb(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldMaxZoom.tsx",e="030101242d82e9c9c34c00cb0f1ee3a368ba29e3",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldMaxZoom.tsx",statementMap:{0:{start:{line:6,column:29},end:{line:29,column:1}},1:{start:{line:7,column:12},end:{line:7,column:19}},2:{start:{line:8,column:2},end:{line:28,column:4}},3:{start:{line:30,column:21},end:{line:30,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:29},end:{line:6,column:30}},loc:{start:{line:6,column:40},end:{line:29,column:1}},line:6}},branchMap:{},s:{0:0,1:0,2:0,3:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldMaxZoom.tsx"],names:[],mappings:"AAoBM;AAlBN,OAAO,YAAY;AACnB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,SAA+B,uBAAuB;AAQtD,MAAM,uBAA4D,CAAC,UAAU;AAC3E,QAAM,IAAI,MAAM;AAChB,SACE;AAAA,IAAC;AAAA;AAAA,MAAM,OAAO,EAAE,UAAU;AAAA,MAAG,WAAW,OAAO,MAAM;AAAA,MACnD,OAAO,MAAM;AAAA,MACb,eAAY;AAAA,MAEZ;AAAA,QAAC;AAAA;AAAA,UACC,YAAY;AAAA,UACZ,OAAO,MAAM;AAAA,UACb,UAAU,MAAM;AAAA,UAChB,KAAK,OAAO,MAAM,QAAQ;AAAA,UAC1B,KAAK,OAAO,MAAM,QAAQ;AAAA,UAC1B,SAAS,OAAO,MAAM,QAAQ;AAAA,UAC9B,eAAY;AAAA;AAAA,MACd;AAAA;AAAA,EACF;AAEJ;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"030101242d82e9c9c34c00cb0f1ee3a368ba29e3"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Pb=function(){return s},s}Pb();Pb().s[0]++;const nDe=n=>{Pb().f[0]++;const e=(Pb().s[1]++,n.t);return Pb().s[2]++,ie.jsx(Ls,{label:e("Max Zoom"),fieldSpec:Zr.layer.maxzoom,error:n.error,"data-wd-key":"max-zoom",children:ie.jsx(m1,{allowRange:!0,value:n.value,onChange:n.onChange,min:Zr.layer.maxzoom.minimum,max:Zr.layer.maxzoom.maximum,default:Zr.layer.maxzoom.maximum,"data-wd-key":"max-zoom.input"})})},iDe=(Pb().s[3]++,No()(nDe));function Qy(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldComment.tsx",e="bbd273b6557a5df907fed987aa83b7e8030607a2",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldComment.tsx",statementMap:{0:{start:{line:5,column:29},end:{line:31,column:1}},1:{start:{line:6,column:12},end:{line:6,column:19}},2:{start:{line:7,column:20},end:{line:11,column:3}},3:{start:{line:12,column:2},end:{line:30,column:4}},4:{start:{line:32,column:21},end:{line:32,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:29},end:{line:5,column:30}},loc:{start:{line:5,column:40},end:{line:31,column:1}},line:5}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldComment.tsx"],names:[],mappings:"AA2BM;AAzBN,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,SAA+B,uBAAuB;AAQtD,MAAM,uBAA4D,CAAC,UAAU;AAC3E,QAAM,IAAI,MAAM;AAChB,QAAM,YAAY;AAAA,IAChB,KAAK;AAAA,MACH;AAAA,IACF;AAAA,EACF;AAEA,SACE;AAAA,IAAC;AAAA;AAAA,MACC,OAAO,EAAE,UAAU;AAAA,MACnB;AAAA,MACA,eAAY;AAAA,MACZ,OAAO,MAAM;AAAA,MAEb;AAAA,QAAC;AAAA;AAAA,UACC,OAAO;AAAA,UACP,OAAO,MAAM;AAAA,UACb,UAAU,MAAM;AAAA,UAChB,SAAS,EAAE,YAAY;AAAA,UACvB,eAAY;AAAA;AAAA,MACd;AAAA;AAAA,EACF;AAEJ;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"bbd273b6557a5df907fed987aa83b7e8030607a2"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Qy=function(){return s},s}Qy();Qy().s[0]++;const rDe=n=>{Qy().f[0]++;const e=(Qy().s[1]++,n.t),t=(Qy().s[2]++,{doc:e("Comments for the current layer. This is non-standard and not in the spec.")});return Qy().s[3]++,ie.jsx(Ls,{label:e("Comments"),fieldSpec:t,"data-wd-key":"layer-comment",error:n.error,children:ie.jsx(Bm,{multi:!0,value:n.value,onChange:n.onChange,default:e("Comment..."),"data-wd-key":"layer-comment.input"})})},oDe=(Qy().s[4]++,No()(rDe));function U_(){var n="/home/runner/work/maputnik/maputnik/src/libs/format.ts",e="c45fbfac66e994b59070a295e5a7f219cd5d66ac",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/format.ts",statementMap:{0:{start:{line:2,column:2},end:{line:2,column:50}}},fnMap:{0:{name:"formatLayerId",decl:{start:{line:1,column:16},end:{line:1,column:29}},loc:{start:{line:1,column:34},end:{line:3,column:1}},line:1}},branchMap:{0:{loc:{start:{line:2,column:9},end:{line:2,column:49}},type:"cond-expr",locations:[{start:{line:2,column:21},end:{line:2,column:37}},{start:{line:2,column:40},end:{line:2,column:49}}],line:2}},s:{0:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/format.ts"],names:[],mappings:"AAAO,gBAAS,cAAe,IAAwB;AACrD,SAAO,OAAO,KAAK,mBAAmB,IAAI,EAAE;AAC9C;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"c45fbfac66e994b59070a295e5a7f219cd5d66ac"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return U_=function(){return s},s}U_();function tae(n){return U_().f[0]++,U_().s[0]++,n===""?(U_().b[0][0]++,"[empty_string]"):(U_().b[0][1]++,`'${n}'`)}function Yt(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerEditor.tsx",e="73c13e8dcd00ff99dc188c9ddae5c660be7ade84",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/LayerEditor.tsx",statementMap:{0:{start:{line:24,column:17},end:{line:24,column:19}},1:{start:{line:25,column:2},end:{line:30,column:5}},2:{start:{line:29,column:59},end:{line:29,column:82}},3:{start:{line:31,column:2},end:{line:36,column:5}},4:{start:{line:35,column:59},end:{line:35,column:80}},5:{start:{line:37,column:2},end:{line:42,column:5}},6:{start:{line:41,column:59},end:{line:41,column:80}},7:{start:{line:43,column:2},end:{line:48,column:5}},8:{start:{line:47,column:58},end:{line:47,column:79}},9:{start:{line:49,column:2},end:{line:54,column:5}},10:{start:{line:53,column:58},end:{line:53,column:79}},11:{start:{line:55,column:2},end:{line:55,column:16}},12:{start:{line:58,column:2},end:{line:60,column:3}},13:{start:{line:59,column:4},end:{line:59,column:14}},14:{start:{line:61,column:2},end:{line:63,column:3}},15:{start:{line:62,column:4},end:{line:62,column:37}},16:{start:{line:64,column:17},end:{line:64,column:19}},17:{start:{line:65,column:2},end:{line:72,column:3}},18:{start:{line:66,column:4},end:{line:71,column:7}},19:{start:{line:73,column:2},end:{line:80,column:3}},20:{start:{line:74,column:4},end:{line:79,column:7}},21:{start:{line:81,column:2},end:{line:81,column:16}},22:{start:{line:84,column:21},end:{line:88,column:3}},23:{start:{line:89,column:22},end:{line:93,column:3}},24:{start:{line:94,column:22},end:{line:98,column:3}},25:{start:{line:99,column:2},end:{line:99,column:96}},26:{start:{line:102,column:24},end:{line:109,column:3}},27:{start:{line:111,column:4},end:{line:111,column:17}},28:{start:{line:112,column:25},end:{line:112,column:27}},29:{start:{line:113,column:4},end:{line:115,column:5}},30:{start:{line:114,column:6},end:{line:114,column:39}},31:{start:{line:116,column:4},end:{line:116,column:34}},32:{start:{line:119,column:29},end:{line:119,column:54}},33:{start:{line:120,column:4},end:{line:124,column:5}},34:{start:{line:121,column:6},end:{line:123,column:7}},35:{start:{line:122,column:8},end:{line:122,column:45}},36:{start:{line:125,column:4},end:{line:127,column:6}},37:{start:{line:130,column:4},end:{line:133,column:6}},38:{start:{line:136,column:32},end:{line:139,column:5}},39:{start:{line:140,column:4},end:{line:142,column:7}},40:{start:{line:145,column:18},end:{line:145,column:20}},41:{start:{line:146,column:4},end:{line:148,column:5}},42:{start:{line:147,column:6},end:{line:147,column:62}},43:{start:{line:149,column:35},end:{line:149,column:45}},44:{start:{line:150,column:22},end:{line:150,column:24}},45:{start:{line:151,column:4},end:{line:157,column:7}},46:{start:{line:152,column:6},end:{line:156,column:7}},47:{start:{line:153,column:8},end:{line:155,column:10}},48:{start:{line:159,column:18},end:{line:159,column:34}},49:{start:{line:160,column:4},end:{line:162,column:5}},50:{start:{line:161,column:6},end:{line:161,column:63}},51:{start:{line:163,column:4},end:{line:267,column:5}},52:{start:{line:165,column:8},end:{line:229,column:13}},53:{start:{line:172,column:35},end:{line:172,column:112}},54:{start:{line:181,column:37},end:{line:184,column:15}},55:{start:{line:193,column:31},end:{line:193,column:69}},56:{start:{line:202,column:31},end:{line:202,column:75}},57:{start:{line:210,column:31},end:{line:210,column:70}},58:{start:{line:218,column:31},end:{line:218,column:70}},59:{start:{line:226,column:31},end:{line:226,column:104}},60:{start:{line:231,column:8},end:{line:239,column:16}},61:{start:{line:237,column:29},end:{line:237,column:67}},62:{start:{line:241,column:8},end:{line:250,column:10}},63:{start:{line:252,column:8},end:{line:264,column:10}},64:{start:{line:258,column:14},end:{line:261,column:16}},65:{start:{line:266,column:8},end:{line:266,column:49}},66:{start:{line:270,column:4},end:{line:273,column:7}},67:{start:{line:276,column:14},end:{line:276,column:26}},68:{start:{line:277,column:21},end:{line:277,column:23}},69:{start:{line:278,column:22},end:{line:278,column:43}},70:{start:{line:279,column:19},end:{line:296,column:6}},71:{start:{line:280,column:6},end:{line:280,column:70}},72:{start:{line:282,column:22},end:{line:282,column:30}},73:{start:{line:283,column:6},end:{line:283,column:29}},74:{start:{line:284,column:6},end:{line:295,column:8}},75:{start:{line:297,column:19},end:{line:297,column:48}},76:{start:{line:298,column:18},end:{line:326,column:5}},77:{start:{line:301,column:23},end:{line:301,column:71}},78:{start:{line:306,column:23},end:{line:306,column:68}},79:{start:{line:311,column:23},end:{line:311,column:80}},80:{start:{line:317,column:23},end:{line:317,column:41}},81:{start:{line:323,column:23},end:{line:323,column:40}},82:{start:{line:328,column:6},end:{line:328,column:30}},83:{start:{line:329,column:6},end:{line:329,column:26}},84:{start:{line:331,column:4},end:{line:377,column:9}},85:{start:{line:359,column:33},end:{line:359,column:42}},86:{start:{line:360,column:20},end:{line:360,column:201}},87:{start:{line:380,column:20},end:{line:380,column:58}}},fnMap:{0:{name:"getLayoutForSymbolType",decl:{start:{line:23,column:9},end:{line:23,column:31}},loc:{start:{line:23,column:35},end:{line:56,column:1}},line:23},1:{name:"(anonymous_1)",decl:{start:{line:29,column:52},end:{line:29,column:53}},loc:{start:{line:29,column:59},end:{line:29,column:82}},line:29},2:{name:"(anonymous_2)",decl:{start:{line:35,column:52},end:{line:35,column:53}},loc:{start:{line:35,column:59},end:{line:35,column:80}},line:35},3:{name:"(anonymous_3)",decl:{start:{line:41,column:52},end:{line:41,column:53}},loc:{start:{line:41,column:59},end:{line:41,column:80}},line:41},4:{name:"(anonymous_4)",decl:{start:{line:47,column:51},end:{line:47,column:52}},loc:{start:{line:47,column:58},end:{line:47,column:79}},line:47},5:{name:"(anonymous_5)",decl:{start:{line:53,column:51},end:{line:53,column:52}},loc:{start:{line:53,column:58},end:{line:53,column:79}},line:53},6:{name:"getLayoutForType",decl:{start:{line:57,column:9},end:{line:57,column:25}},loc:{start:{line:57,column:35},end:{line:82,column:1}},line:57},7:{name:"layoutGroups",decl:{start:{line:83,column:9},end:{line:83,column:21}},loc:{start:{line:83,column:36},end:{line:100,column:1}},line:83},8:{name:"(anonymous_8)",decl:{start:{line:103,column:20},end:{line:103,column:21}},loc:{start:{line:103,column:26},end:{line:104,column:5}},line:103},9:{name:"(anonymous_9)",decl:{start:{line:105,column:21},end:{line:105,column:22}},loc:{start:{line:105,column:27},end:{line:106,column:5}},line:105},10:{name:"(anonymous_10)",decl:{start:{line:107,column:22},end:{line:107,column:23}},loc:{start:{line:107,column:28},end:{line:108,column:5}},line:107},11:{name:"(anonymous_11)",decl:{start:{line:110,column:2},end:{line:110,column:3}},loc:{start:{line:110,column:21},end:{line:117,column:3}},line:110},12:{name:"(anonymous_12)",decl:{start:{line:118,column:2},end:{line:118,column:3}},loc:{start:{line:118,column:48},end:{line:128,column:3}},line:118},13:{name:"(anonymous_13)",decl:{start:{line:129,column:2},end:{line:129,column:3}},loc:{start:{line:129,column:44},end:{line:134,column:3}},line:129},14:{name:"(anonymous_14)",decl:{start:{line:135,column:2},end:{line:135,column:3}},loc:{start:{line:135,column:36},end:{line:143,column:3}},line:135},15:{name:"(anonymous_15)",decl:{start:{line:144,column:2},end:{line:144,column:3}},loc:{start:{line:144,column:32},end:{line:268,column:3}},line:144},16:{name:"(anonymous_16)",decl:{start:{line:151,column:19},end:{line:151,column:20}},loc:{start:{line:151,column:30},end:{line:157,column:5}},line:151},17:{name:"(anonymous_17)",decl:{start:{line:172,column:24},end:{line:172,column:25}},loc:{start:{line:172,column:35},end:{line:172,column:112}},line:172},18:{name:"(anonymous_18)",decl:{start:{line:181,column:24},end:{line:181,column:25}},loc:{start:{line:181,column:37},end:{line:184,column:15}},line:181},19:{name:"(anonymous_19)",decl:{start:{line:193,column:24},end:{line:193,column:25}},loc:{start:{line:193,column:31},end:{line:193,column:69}},line:193},20:{name:"(anonymous_20)",decl:{start:{line:202,column:24},end:{line:202,column:25}},loc:{start:{line:202,column:31},end:{line:202,column:75}},line:202},21:{name:"(anonymous_21)",decl:{start:{line:210,column:24},end:{line:210,column:25}},loc:{start:{line:210,column:31},end:{line:210,column:70}},line:210},22:{name:"(anonymous_22)",decl:{start:{line:218,column:24},end:{line:218,column:25}},loc:{start:{line:218,column:31},end:{line:218,column:70}},line:218},23:{name:"(anonymous_23)",decl:{start:{line:226,column:24},end:{line:226,column:25}},loc:{start:{line:226,column:31},end:{line:226,column:104}},line:226},24:{name:"(anonymous_24)",decl:{start:{line:237,column:22},end:{line:237,column:23}},loc:{start:{line:237,column:29},end:{line:237,column:67}},line:237},25:{name:"(anonymous_25)",decl:{start:{line:257,column:22},end:{line:257,column:23}},loc:{start:{line:257,column:34},end:{line:262,column:13}},line:257},26:{name:"(anonymous_26)",decl:{start:{line:269,column:2},end:{line:269,column:3}},loc:{start:{line:269,column:20},end:{line:274,column:3}},line:269},27:{name:"(anonymous_27)",decl:{start:{line:275,column:2},end:{line:275,column:3}},loc:{start:{line:275,column:11},end:{line:378,column:3}},line:275},28:{name:"(anonymous_28)",decl:{start:{line:279,column:53},end:{line:279,column:54}},loc:{start:{line:279,column:64},end:{line:281,column:5}},line:279},29:{name:"(anonymous_29)",decl:{start:{line:281,column:11},end:{line:281,column:12}},loc:{start:{line:281,column:22},end:{line:296,column:5}},line:281},30:{name:"(anonymous_30)",decl:{start:{line:301,column:17},end:{line:301,column:18}},loc:{start:{line:301,column:23},end:{line:301,column:71}},line:301},31:{name:"(anonymous_31)",decl:{start:{line:306,column:17},end:{line:306,column:18}},loc:{start:{line:306,column:23},end:{line:306,column:68}},line:306},32:{name:"(anonymous_32)",decl:{start:{line:311,column:17},end:{line:311,column:18}},loc:{start:{line:311,column:23},end:{line:311,column:80}},line:311},33:{name:"(anonymous_33)",decl:{start:{line:317,column:17},end:{line:317,column:18}},loc:{start:{line:317,column:23},end:{line:317,column:41}},line:317},34:{name:"(anonymous_34)",decl:{start:{line:323,column:17},end:{line:323,column:18}},loc:{start:{line:323,column:23},end:{line:323,column:40}},line:323},35:{name:"handleSelection",decl:{start:{line:327,column:13},end:{line:327,column:28}},loc:{start:{line:327,column:40},end:{line:330,column:5}},line:327},36:{name:"(anonymous_36)",decl:{start:{line:358,column:147},end:{line:358,column:148}},loc:{start:{line:358,column:155},end:{line:361,column:19}},line:358}},branchMap:{0:{loc:{start:{line:58,column:2},end:{line:60,column:3}},type:"if",locations:[{start:{line:58,column:2},end:{line:60,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:58},1:{loc:{start:{line:61,column:2},end:{line:63,column:3}},type:"if",locations:[{start:{line:61,column:2},end:{line:63,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:61},2:{loc:{start:{line:65,column:2},end:{line:72,column:3}},type:"if",locations:[{start:{line:65,column:2},end:{line:72,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:65},3:{loc:{start:{line:73,column:2},end:{line:80,column:3}},type:"if",locations:[{start:{line:73,column:2},end:{line:80,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:73},4:{loc:{start:{line:121,column:6},end:{line:123,column:7}},type:"if",locations:[{start:{line:121,column:6},end:{line:123,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:121},5:{loc:{start:{line:146,column:4},end:{line:148,column:5}},type:"if",locations:[{start:{line:146,column:4},end:{line:148,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:146},6:{loc:{start:{line:152,column:6},end:{line:156,column:7}},type:"if",locations:[{start:{line:152,column:6},end:{line:156,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:152},7:{loc:{start:{line:152,column:10},end:{line:152,column:96}},type:"binary-expr",locations:[{start:{line:152,column:10},end:{line:152,column:22}},{start:{line:152,column:26},end:{line:152,column:55}},{start:{line:152,column:59},end:{line:152,column:96}}],line:152},8:{loc:{start:{line:160,column:4},end:{line:162,column:5}},type:"if",locations:[{start:{line:160,column:4},end:{line:162,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:160},9:{loc:{start:{line:163,column:4},end:{line:267,column:5}},type:"switch",locations:[{start:{line:164,column:6},end:{line:229,column:13}},{start:{line:230,column:6},end:{line:239,column:16}},{start:{line:240,column:6},end:{line:250,column:10}},{start:{line:251,column:6},end:{line:264,column:10}},{start:{line:265,column:6},end:{line:266,column:49}}],line:163},10:{loc:{start:{line:187,column:10},end:{line:195,column:11}},type:"binary-expr",locations:[{start:{line:187,column:10},end:{line:187,column:48}},{start:{line:187,column:68},end:{line:195,column:11}}],line:187},11:{loc:{start:{line:196,column:10},end:{line:204,column:11}},type:"binary-expr",locations:[{start:{line:196,column:10},end:{line:196,column:60}},{start:{line:196,column:80},end:{line:204,column:11}}],line:196},12:{loc:{start:{line:226,column:83},end:{line:226,column:103}},type:"cond-expr",locations:[{start:{line:226,column:93},end:{line:226,column:99}},{start:{line:226,column:102},end:{line:226,column:103}}],line:226},13:{loc:{start:{line:280,column:15},end:{line:280,column:68}},type:"binary-expr",locations:[{start:{line:280,column:15},end:{line:280,column:41}},{start:{line:280,column:45},end:{line:280,column:68}}],line:280},14:{loc:{start:{line:297,column:19},end:{line:297,column:48}},type:"binary-expr",locations:[{start:{line:297,column:19},end:{line:297,column:42}},{start:{line:297,column:46},end:{line:297,column:48}}],line:297},15:{loc:{start:{line:310,column:14},end:{line:310,column:66}},type:"cond-expr",locations:[{start:{line:310,column:45},end:{line:310,column:54}},{start:{line:310,column:57},end:{line:310,column:66}}],line:310}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0,87:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0,0],8:[0,0],9:[0,0,0,0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerEditor.tsx"],names:["layer"],mappings:"AAuN2B,SA4EL,UA3Ed,KADmB;AAvN3B,OAAO,WAAuB;AAC9B,SAAS,SAAS,QAAQ,MAAM,gBAAgB;AAChD,SAAQ,iBAAgB;AACxB,SAAQ,kBAAiB;AACzB,SAAS,mBAAmB;AAE5B,SAAQ,UAAS;AAEjB,OAAO,eAAe;AACtB,OAAO,kBAAkB;AACzB,OAAO,mBAAmB;AAC1B,OAAO,sBAAsB;AAC7B,OAAO,eAAe;AACtB,OAAO,aAAa;AACpB,OAAO,kBAAkB;AACzB,OAAO,kBAAkB;AACzB,OAAO,kBAAkB;AACzB,OAAO,iBAAiB;AACxB,OAAO,sBAAsB;AAC7B,SAAS,YAAY,sBAAsB;AAC3C,SAAQ,qBAAoB;AAC5B,SAA+B,uBAAuB;AAEtD,SAAS,yBAAyB;AAUlC,SAAS,uBAAuB,GAAqC;AACnE,QAAM,SAAgC,CAAC;AACvC,SAAO,KAAK;AAAA,IACV,OAAO,EAAE,2BAA2B;AAAA,IACpC,IAAI;AAAA,IACJ,MAAM;AAAA,IACN,QAAQ,OAAO,KAAK,GAAG,eAAe,CAAC,EAAE,OAAO,OAAK,EAAE,WAAW,SAAS,CAAC;AAAA,EAC9E,CAAC;AACD,SAAO,KAAK;AAAA,IACV,OAAO,EAAE,wBAAwB;AAAA,IACjC,IAAI;AAAA,IACJ,MAAM;AAAA,IACN,QAAQ,OAAO,KAAK,GAAG,eAAe,CAAC,EAAE,OAAO,OAAK,EAAE,WAAW,OAAO,CAAC;AAAA,EAC5E,CAAC;AACD,SAAO,KAAK;AAAA,IACV,OAAO,EAAE,wBAAwB;AAAA,IACjC,IAAI;AAAA,IACJ,MAAM;AAAA,IACN,QAAQ,OAAO,KAAK,GAAG,eAAe,CAAC,EAAE,OAAO,OAAK,EAAE,WAAW,OAAO,CAAC;AAAA,EAC5E,CAAC;AACD,SAAO,KAAK;AAAA,IACV,OAAO,EAAE,uBAAuB;AAAA,IAChC,IAAI;AAAA,IACJ,MAAM;AAAA,IACN,QAAQ,OAAO,KAAK,GAAG,cAAc,CAAC,EAAE,OAAO,OAAK,EAAE,WAAW,OAAO,CAAC;AAAA,EAC3E,CAAC;AACD,SAAO,KAAK;AAAA,IACV,OAAO,EAAE,uBAAuB;AAAA,IAChC,IAAI;AAAA,IACJ,MAAM;AAAA,IACN,QAAQ,OAAO,KAAK,GAAG,cAAc,CAAC,EAAE,OAAO,OAAK,EAAE,WAAW,OAAO,CAAC;AAAA,EAC3E,CAAC;AACD,SAAO;AACT;AAEA,SAAS,iBAAiB,MAAkC,GAAqC;AAC/F,MAAI,OAAO,KAAK,GAAG,MAAM,KAAK,MAAM,EAAE,QAAQ,IAAI,IAAI,GAAG;AACvD,WAAO,CAAC;AAAA,EACV;AACA,MAAI,SAAS,UAAU;AACrB,WAAO,uBAAuB,CAAC;AAAA,EACjC;AACA,QAAM,SAAgC,CAAC;AACvC,MAAI,OAAO,KAAK,GAAG,WAAW,IAAI,CAAC,EAAE,SAAS,GAAG;AAC/C,WAAO,KAAK;AAAA,MACV,OAAO,EAAE,kBAAkB;AAAA,MAC3B,IAAI;AAAA,MACJ,MAAM;AAAA,MACN,QAAQ,OAAO,KAAK,GAAG,WAAW,IAAI,CAAC;AAAA,IACzC,CAAC;AAAA,EACH;AACA,MAAI,OAAO,KAAK,GAAG,YAAY,IAAI,CAAC,EAAE,SAAS,GAAG;AAChD,WAAO,KAAK;AAAA,MACV,OAAO,EAAE,mBAAmB;AAAA,MAC5B,IAAI;AAAA,MACJ,MAAM;AAAA,MACN,QAAQ,OAAO,KAAK,GAAG,YAAY,IAAI,CAAC;AAAA,IAC1C,CAAC;AAAA,EACH;AACA,SAAO;AACT;AAEA,SAAS,aAAa,WAAuC,GAA8E;AACzI,QAAM,aAAa;AAAA,IACjB,IAAI;AAAA,IACJ,OAAO,EAAE,OAAO;AAAA,IAChB,MAAM;AAAA,EACR;AACA,QAAM,cAAc;AAAA,IAClB,IAAI;AAAA,IACJ,OAAO,EAAE,QAAQ;AAAA,IACjB,MAAM;AAAA,EACR;AACA,QAAM,cAAc;AAAA,IAClB,IAAI;AAAA,IACJ,OAAO,EAAE,aAAa;AAAA,IACtB,MAAM;AAAA,EACR;AACA,SAAO,CAAC,YAAY,WAAW,EAC5B,OAAO,iBAAiB,WAAW,CAAC,CAAC,EACrC,OAAO,CAAC,WAAW,CAAC;AACzB;AAwBA,MAAM,4BAA4B,MAAM,UAAsD;AAAA,EAC5F,OAAO,eAAe;AAAA,IACpB,gBAAgB,MAAM;AAAA,IAAC;AAAA,IACvB,iBAAiB,MAAM;AAAA,IAAC;AAAA,IACxB,kBAAkB,MAAM;AAAA,IAAC;AAAA,EAC3B;AAAA,EAEA,YAAY,OAAiC;AAC3C,UAAM,KAAK;AAEX,UAAM,eAAyC,CAAC;AAChD,eAAW,SAAS,aAAa,KAAK,MAAM,MAAM,MAAM,MAAM,CAAC,GAAG;AAChE,mBAAa,MAAM,KAAK,IAAI;AAAA,IAC9B;AAEA,SAAK,QAAQ,EAAE,aAAa;AAAA,EAC9B;AAAA,EAEA,OAAO,yBAAyB,OAA2C,OAAyB;AAClG,UAAM,mBAAmB,EAAE,GAAG,MAAM,aAAa;AAEjD,eAAW,SAAS,iBAAiB,MAAM,MAAM,MAAM,MAAM,CAAC,GAAG;AAC/D,UAAG,EAAE,MAAM,SAAS,mBAAmB;AACrC,yBAAiB,MAAM,KAAK,IAAI;AAAA,MAClC;AAAA,IACF;AAEA,WAAO;AAAA,MACL,cAAc;AAAA,IAChB;AAAA,EACF;AAAA,EAGA,eAAe,OAAwC,UAAkB,UAAe;AACtF,SAAK,MAAM;AAAA,MACT,KAAK,MAAM;AAAA,MACX,eAAe,KAAK,MAAM,OAAO,OAAO,UAAU,QAAQ;AAAA,IAC5D;AAAA,EACF;AAAA,EAEA,cAAc,YAAoB,QAAiB;AACjD,UAAM,sBAAsB;AAAA,MAC1B,GAAG,KAAK,MAAM;AAAA,MACd,CAAC,UAAU,GAAG;AAAA,IAChB;AACA,SAAK,SAAS;AAAA,MACZ,cAAc;AAAA,IAChB,CAAC;AAAA,EACH;AAAA,EAEA,gBAAgB,MAAc,QAAgC;AAC5D,QAAI,UAAU;AACd,QAAG,KAAK,MAAM,MAAM,UAAU;AAC5B,gBAAW,KAAK,MAAM,MAAM,SAAiB,kBAAkB;AAAA,IACjE;AACA,UAAM,EAAC,QAAQ,WAAU,IAAI,KAAK;AAElC,UAAM,YAA+B,CAAC;AACtC,WAAQ,QAAQ,WAAS;AACvB,UACE,MAAM,UACN,MAAM,OAAO,SAAS,WACtB,MAAM,OAAO,KAAK,SAAS,YAC3B;AACA,kBAAU,MAAM,OAAO,KAAK,GAAG,IAAI;AAAA,UACjC,SAAS,MAAM,OAAO,KAAK;AAAA,QAC7B;AAAA,MACF;AAAA,IACF,CAAC;AAED,QAAI;AACJ,UAAM,QAAQ,KAAK,MAAM;AACzB,QAAG,OAAO,UAAU,eAAe,KAAK,KAAK,MAAM,SAAS,MAAM,MAAM,GAAG;AACzE,uBAAiB,KAAK,MAAM,QAAQ,MAAM,MAAM,EAAE;AAAA,IACpD;AAEA,YAAO,MAAM;AAAA,MACX,KAAK;AAAS,eAAO,qBAAC,SACpB;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,OAAM;AAAA,cACN,OAAO,UAAU;AAAA,cACjB,UAAU,WAAS,KAAK,MAAM,gBAAgB,KAAK,MAAM,YAAY,KAAK,MAAM,MAAM,IAAI,KAAK;AAAA;AAAA,UACjG;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,UAAU;AAAA,cACV,OAAO,UAAU;AAAA,cACjB,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,UAAU,aAAW,KAAK,MAAM;AAAA,gBAC9B,KAAK,MAAM;AAAA,gBACX,WAAW,KAAK,MAAM,OAAO,OAAO;AAAA,cACtC;AAAA;AAAA,UACF;AAAA,UACC,KAAK,MAAM,MAAM,SAAS,gBAAgB;AAAA,YAAC;AAAA;AAAA,cAC1C,OAAO,UAAU;AAAA,cACjB,WAAW,OAAO,KAAK,KAAK,MAAM,OAAQ;AAAA,cAC1C,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,UAAU,OAAK,KAAK,eAAe,MAAM,UAAU,CAAC;AAAA;AAAA,UACtD;AAAA,UAEC,CAAC,kBAAkB,SAAS,KAAK,MAAM,MAAM,IAAI,KAClD;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,UAAU,cAAc;AAAA,cAC/B;AAAA,cACA,OAAQ,KAAK,MAAM,MAAc,cAAc;AAAA,cAC/C,UAAU,OAAK,KAAK,eAAe,MAAM,gBAAgB,CAAC;AAAA;AAAA,UAC5D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,UAAU;AAAA,cACjB,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,UAAU,OAAK,KAAK,eAAe,MAAM,WAAW,CAAC;AAAA;AAAA,UACvD;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,UAAU;AAAA,cACjB,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,UAAU,OAAK,KAAK,eAAe,MAAM,WAAW,CAAC;AAAA;AAAA,UACvD;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,UAAU;AAAA,cACjB,OAAO;AAAA,cACP,UAAU,OAAK,KAAK,eAAe,YAAY,oBAAoB,KAAK,KAAM,SAAY,CAAC;AAAA;AAAA,UAC7F;AAAA,WACF;AAAA,MACA,KAAK;AAAU,eAAO,oBAAC,SACrB,8BAAC,SAAI,WAAU,kCACb;AAAA,UAAC;AAAA;AAAA,YACC,QAAQ;AAAA,YACR,QAAS,KAAK,MAAM,MAAc;AAAA,YAClC,YAAY,KAAK,MAAM,aAAc,KAAK,MAAM,MAAc,cAAc,CAAC;AAAA,YAC7E,UAAU,OAAK,KAAK,eAAe,MAAM,UAAU,CAAC;AAAA;AAAA,QACtD,GACF,GACF;AAAA,MACA,KAAK;AACH,eAAO;AAAA,UAAC;AAAA;AAAA,YACN,QAAQ;AAAA,YACR,OAAO,KAAK,MAAM;AAAA,YAClB,aAAa;AAAA,YACb,MAAM,KAAK,MAAM;AAAA,YACjB,UAAU,KAAK,eAAe,KAAK,IAAI;AAAA;AAAA,QACzC;AAAA,MACF,KAAK;AACH,eAAO;AAAA,UAAC;AAAA;AAAA,YACN,UAAS;AAAA,YACT,OAAO,KAAK,MAAM;AAAA,YAClB,UAAU,CAACA,WAA8B;AACvC,mBAAK,MAAM;AAAA,gBACT,KAAK,MAAM;AAAA,gBACXA;AAAA,cACF;AAAA,YACF;AAAA;AAAA,QACF;AAAA,MACF;AAAS,eAAO,gCAAE;AAAA,IACpB;AAAA,EACF;AAAA,EAEA,UAAU,QAAgB;AACxB,SAAK,MAAM,YAAY;AAAA,MACrB,UAAU,KAAK,MAAM;AAAA,MACrB,UAAU,KAAK,MAAM,aAAW;AAAA,IAClC,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AAErB,UAAM,WAAqB,CAAC;AAC5B,UAAM,YAAY,KAAK,MAAM,MAAM;AACnC,UAAM,SAAS,aAAa,WAAW,CAAC,EAAE,OAAO,WAAS;AACxD,aAAO,EAAE,cAAc,gBAAgB,MAAM,SAAS;AAAA,IACxD,CAAC,EAAE,IAAI,WAAS;AACd,YAAM,UAAU,MAAM;AACtB,eAAS,KAAK,OAAO;AACrB,aAAO;AAAA,QAAC;AAAA;AAAA,UACN,eAAa,MAAM;AAAA,UACnB,IAAI;AAAA,UAEJ,OAAO,MAAM;AAAA,UACb,UAAU,KAAK,MAAM,aAAa,MAAM,KAAK;AAAA,UAC7C,gBAAgB,KAAK,cAAc,KAAK,MAAM,MAAM,KAAK;AAAA,UAExD,eAAK,gBAAgB,MAAM,MAAM,MAAM,MAAM;AAAA;AAAA,QALzC;AAAA,MAMP;AAAA,IACF,CAAC;AAED,UAAM,SAAS,KAAK,MAAM,MAAM,UAAU,CAAC;AAE3C,UAAM,QAKD;AAAA,MACH,QAAQ;AAAA,QACN,MAAM,EAAE,QAAQ;AAAA,QAChB,SAAS,MAAM,KAAK,MAAM,eAAe,KAAK,MAAM,UAAU;AAAA,QAC9D,OAAO;AAAA,MACT;AAAA,MACA,WAAW;AAAA,QACT,MAAM,EAAE,WAAW;AAAA,QACnB,SAAS,MAAM,KAAK,MAAM,YAAY,KAAK,MAAM,UAAU;AAAA,QAC3D,OAAO;AAAA,MACT;AAAA,MACA,MAAM;AAAA,QACJ,MAAO,OAAO,eAAe,SAAU,EAAE,MAAM,IAAI,EAAE,MAAM;AAAA,QAC3D,SAAS,MAAM,KAAK,MAAM,wBAAwB,KAAK,MAAM,UAAU;AAAA,QACvE,OAAO;AAAA,MACT;AAAA,MACA,aAAa;AAAA,QACX,MAAM,EAAE,eAAe;AAAA,QACvB,UAAU,KAAK,MAAM;AAAA,QACrB,SAAS,MAAM,KAAK,UAAU,EAAE;AAAA,QAChC,OAAO;AAAA,MACT;AAAA,MACA,eAAe;AAAA,QACb,MAAM,EAAE,iBAAiB;AAAA,QACzB,UAAU,KAAK,MAAM;AAAA,QACrB,SAAS,MAAM,KAAK,UAAU,CAAE;AAAA,QAChC,OAAO;AAAA,MACT;AAAA,IACF;AAEA,aAAS,gBAAgB,IAAY,OAA6B;AAChE,YAAM,gBAAgB;AACtB,YAAM,EAAE,EAAE,QAAQ;AAAA,IACpB;AAEA,WAAO,oBAAC,YAAY,UAAZ,EAAqB,OAAO,EAAC,MAAM,QAAQ,OAAO,UAAS,GACjE;AAAA,MAAC;AAAA;AAAA,QAAQ,WAAU;AAAA,QACjB,MAAK;AAAA,QACL,cAAY,EAAE,cAAc;AAAA,QAC5B,eAAY;AAAA,QAEZ;AAAA,8BAAC,YACC,+BAAC,SAAI,WAAU,gBACb;AAAA,gCAAC,QAAG,WAAU,uBACX,YAAE,sBAAsB,EAAE,SAAS,cAAc,KAAK,MAAM,MAAM,EAAE,EAAE,CAAC,GAC1E;AAAA,YACA,oBAAC,SAAI,WAAU,sBACb;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,aAAa;AAAA,gBACb,kBAAkB;AAAA,gBAElB;AAAA;AAAA,oBAAC;AAAA;AAAA,sBACC,IAAG;AAAA,sBACH,eAAY;AAAA,sBACZ,WAAU;AAAA,sBACV,OAAO;AAAA,sBACP,8BAAC,cAAW,WAAU,0BAAyB;AAAA;AAAA,kBACjD;AAAA,kBACA,oBAAC,QACC,8BAAC,QAAG,WAAU,mBACX,iBAAO,KAAK,KAAK,EAAE,IAAI,CAAC,OAAO;AAC9B,0BAAM,OAAO,MAAM,EAAE;AACrB,2BAAO,oBAAC,QACN,8BAAC,YAAS,OAAO,IAAI,WAAU,yBAAwB,eAAa,KAAK,OACtE,eAAK,MACR,KAHc,EAIhB;AAAA,kBACF,CAAC,GACH,GACF;AAAA;AAAA;AAAA,YACF,GACF;AAAA,aACF,GAEF;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,uBAAuB;AAAA,cACvB,mBAAmB;AAAA,cACnB,aAAa;AAAA,cAEZ;AAAA;AAAA,UACH;AAAA;AAAA;AAAA,IACF,GACF;AAAA,EACF;AACF;AAEA,MAAM,cAAc,gBAAgB,EAAE,mBAAmB;AACzD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"73c13e8dcd00ff99dc188c9ddae5c660be7ade84"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Yt=function(){return s},s}Yt();function sDe(n){Yt().f[0]++;const e=(Yt().s[0]++,[]);return Yt().s[1]++,e.push({title:n("General layout properties"),id:"General_layout_properties",type:"properties",fields:Object.keys(hp.layout_symbol).filter(t=>(Yt().f[1]++,Yt().s[2]++,t.startsWith("symbol-")))}),Yt().s[3]++,e.push({title:n("Text layout properties"),id:"Text_layout_properties",type:"properties",fields:Object.keys(hp.layout_symbol).filter(t=>(Yt().f[2]++,Yt().s[4]++,t.startsWith("text-")))}),Yt().s[5]++,e.push({title:n("Icon layout properties"),id:"Icon_layout_properties",type:"properties",fields:Object.keys(hp.layout_symbol).filter(t=>(Yt().f[3]++,Yt().s[6]++,t.startsWith("icon-")))}),Yt().s[7]++,e.push({title:n("Text paint properties"),id:"Text_paint_properties",type:"properties",fields:Object.keys(hp.paint_symbol).filter(t=>(Yt().f[4]++,Yt().s[8]++,t.startsWith("text-")))}),Yt().s[9]++,e.push({title:n("Icon paint properties"),id:"Icon_paint_properties",type:"properties",fields:Object.keys(hp.paint_symbol).filter(t=>(Yt().f[5]++,Yt().s[10]++,t.startsWith("icon-")))}),Yt().s[11]++,e}function nae(n,e){if(Yt().f[6]++,Yt().s[12]++,Object.keys(hp.layer.type.values).indexOf(n)<0)return Yt().b[0][0]++,Yt().s[13]++,[];if(Yt().b[0][1]++,Yt().s[14]++,n==="symbol")return Yt().b[1][0]++,Yt().s[15]++,sDe(e);Yt().b[1][1]++;const t=(Yt().s[16]++,[]);return Yt().s[17]++,Object.keys(hp["paint_"+n]).length>0?(Yt().b[2][0]++,Yt().s[18]++,t.push({title:e("Paint properties"),id:"Paint_properties",type:"properties",fields:Object.keys(hp["paint_"+n])})):Yt().b[2][1]++,Yt().s[19]++,Object.keys(hp["layout_"+n]).length>0?(Yt().b[3][0]++,Yt().s[20]++,t.push({title:e("Layout properties"),id:"Layout_properties",type:"properties",fields:Object.keys(hp["layout_"+n])})):Yt().b[3][1]++,Yt().s[21]++,t}function UV(n,e){Yt().f[7]++;const t=(Yt().s[22]++,{id:"layer",title:e("Layer"),type:"layer"}),i=(Yt().s[23]++,{id:"filter",title:e("Filter"),type:"filter"}),r=(Yt().s[24]++,{id:"jsoneditor",title:e("JSON Editor"),type:"jsoneditor"});return Yt().s[25]++,[t,i].concat(nae(n,e)).concat([r])}class aDe extends En.Component{static defaultProps=(Yt().s[26]++,{onLayerChanged:()=>{Yt().f[8]++},onLayerIdChange:()=>{Yt().f[9]++},onLayerDestroyed:()=>{Yt().f[10]++}});constructor(e){Yt().f[11]++,Yt().s[27]++,super(e);const t=(Yt().s[28]++,{});Yt().s[29]++;for(const i of UV(this.props.layer.type,e.t))Yt().s[30]++,t[i.title]=!0;Yt().s[31]++,this.state={editorGroups:t}}static getDerivedStateFromProps(e,t){Yt().f[12]++;const i=(Yt().s[32]++,{...t.editorGroups});Yt().s[33]++;for(const r of nae(e.layer.type,e.t))Yt().s[34]++,r.title in i?Yt().b[4][1]++:(Yt().b[4][0]++,Yt().s[35]++,i[r.title]=!0);return Yt().s[36]++,{editorGroups:i}}changeProperty(e,t,i){Yt().f[13]++,Yt().s[37]++,this.props.onLayerChanged(this.props.layerIndex,QIe(this.props.layer,e,t,i))}onGroupToggle(e,t){Yt().f[14]++;const i=(Yt().s[38]++,{...this.state.editorGroups,[e]:t});Yt().s[39]++,this.setState({editorGroups:i})}renderGroupType(e,t){Yt().f[15]++;let i=(Yt().s[40]++,"");Yt().s[41]++,this.props.layer.metadata?(Yt().b[5][0]++,Yt().s[42]++,i=this.props.layer.metadata["maputnik:comment"]):Yt().b[5][1]++;const{errors:r,layerIndex:o}=(Yt().s[43]++,this.props),s=(Yt().s[44]++,{});Yt().s[45]++,r.forEach(h=>{Yt().f[16]++,Yt().s[46]++,Yt().b[7][0]++,h.parsed&&(Yt().b[7][1]++,h.parsed.type==="layer")&&(Yt().b[7][2]++,h.parsed.data.index==o)?(Yt().b[6][0]++,Yt().s[47]++,s[h.parsed.data.key]={message:h.parsed.data.message}):Yt().b[6][1]++});let a;const c=(Yt().s[48]++,this.props.layer);switch(Yt().s[49]++,Object.prototype.hasOwnProperty.call(this.props.sources,c.source)?(Yt().b[8][0]++,Yt().s[50]++,a=this.props.sources[c.source].layers):Yt().b[8][1]++,Yt().s[51]++,e){case"layer":return Yt().b[9][0]++,Yt().s[52]++,ie.jsxs("div",{children:[ie.jsx(Koe,{value:this.props.layer.id,wdKey:"layer-editor.layer-id",error:s.id,onChange:h=>(Yt().f[17]++,Yt().s[53]++,this.props.onLayerIdChange(this.props.layerIndex,this.props.layer.id,h))}),ie.jsx(Uoe,{disabled:!0,error:s.type,value:this.props.layer.type,onChange:h=>(Yt().f[18]++,Yt().s[54]++,this.props.onLayerChanged(this.props.layerIndex,WIe(this.props.layer,h)))}),(Yt().b[10][0]++,this.props.layer.type!=="background"&&(Yt().b[10][1]++,ie.jsx(tse,{error:s.source,sourceIds:Object.keys(this.props.sources),value:this.props.layer.source,onChange:h=>(Yt().f[19]++,Yt().s[55]++,this.changeProperty(null,"source",h))}))),(Yt().b[11][0]++,!TD.includes(this.props.layer.type)&&(Yt().b[11][1]++,ie.jsx(nse,{error:s["source-layer"],sourceLayerIds:a,value:this.props.layer["source-layer"],onChange:h=>(Yt().f[20]++,Yt().s[56]++,this.changeProperty(null,"source-layer",h))}))),ie.jsx(tDe,{error:s.minzoom,value:this.props.layer.minzoom,onChange:h=>(Yt().f[21]++,Yt().s[57]++,this.changeProperty(null,"minzoom",h))}),ie.jsx(iDe,{error:s.maxzoom,value:this.props.layer.maxzoom,onChange:h=>(Yt().f[22]++,Yt().s[58]++,this.changeProperty(null,"maxzoom",h))}),ie.jsx(oDe,{error:s.comment,value:i,onChange:h=>(Yt().f[23]++,Yt().s[59]++,this.changeProperty("metadata","maputnik:comment",h==""?(Yt().b[12][0]++,void 0):(Yt().b[12][1]++,h)))})]});case"filter":return Yt().b[9][1]++,Yt().s[60]++,ie.jsx("div",{children:ie.jsx("div",{className:"maputnik-filter-editor-wrapper",children:ie.jsx(Hke,{errors:s,filter:this.props.layer.filter,properties:this.props.vectorLayers[this.props.layer["source-layer"]],onChange:h=>(Yt().f[24]++,Yt().s[61]++,this.changeProperty(null,"filter",h))})})});case"properties":return Yt().b[9][2]++,Yt().s[62]++,ie.jsx(XRe,{errors:s,layer:this.props.layer,groupFields:t,spec:this.props.spec,onChange:this.changeProperty.bind(this)});case"jsoneditor":return Yt().b[9][3]++,Yt().s[63]++,ie.jsx(oL,{lintType:"layer",value:this.props.layer,onChange:h=>{Yt().f[25]++,Yt().s[64]++,this.props.onLayerChanged(this.props.layerIndex,h)}});default:return Yt().b[9][4]++,Yt().s[65]++,ie.jsx(ie.Fragment,{})}}moveLayer(e){Yt().f[26]++,Yt().s[66]++,this.props.onMoveLayer({oldIndex:this.props.layerIndex,newIndex:this.props.layerIndex+e})}render(){Yt().f[27]++;const e=(Yt().s[67]++,this.props.t),t=(Yt().s[68]++,[]),i=(Yt().s[69]++,this.props.layer.type),r=(Yt().s[70]++,UV(i,e).filter(c=>(Yt().f[28]++,Yt().s[71]++,Yt().b[13][0]++,!(i==="background"&&(Yt().b[13][1]++,c.type==="source")))).map(c=>{Yt().f[29]++;const h=(Yt().s[72]++,c.id);return Yt().s[73]++,t.push(h),Yt().s[74]++,ie.jsx(JRe,{"data-wd-key":c.title,id:h,title:c.title,isActive:this.state.editorGroups[c.title],onActiveToggle:this.onGroupToggle.bind(this,c.title),children:this.renderGroupType(c.type,c.fields)},h)})),o=(Yt().s[75]++,Yt().b[14][0]++,this.props.layer.layout||(Yt().b[14][1]++,{})),s=(Yt().s[76]++,{delete:{text:e("Delete"),handler:()=>(Yt().f[30]++,Yt().s[77]++,this.props.onLayerDestroy(this.props.layerIndex)),wdKey:"menu-delete-layer"},duplicate:{text:e("Duplicate"),handler:()=>(Yt().f[31]++,Yt().s[78]++,this.props.onLayerCopy(this.props.layerIndex)),wdKey:"menu-duplicate-layer"},hide:{text:o.visibility==="none"?(Yt().b[15][0]++,e("Show")):(Yt().b[15][1]++,e("Hide")),handler:()=>(Yt().f[32]++,Yt().s[79]++,this.props.onLayerVisibilityToggle(this.props.layerIndex)),wdKey:"menu-hide-layer"},moveLayerUp:{text:e("Move layer up"),disabled:this.props.isFirstLayer,handler:()=>(Yt().f[33]++,Yt().s[80]++,this.moveLayer(-1)),wdKey:"menu-move-layer-up"},moveLayerDown:{text:e("Move layer down"),disabled:this.props.isLastLayer,handler:()=>(Yt().f[34]++,Yt().s[81]++,this.moveLayer(1)),wdKey:"menu-move-layer-down"}});function a(c,h){Yt().f[35]++,Yt().s[82]++,h.stopPropagation(),Yt().s[83]++,s[c].handler()}return Yt().s[84]++,ie.jsx(ox.Provider,{value:{size:"14px",color:"#8e8e8e"},children:ie.jsxs("section",{className:"maputnik-layer-editor",role:"main","aria-label":e("Layer editor"),"data-wd-key":"layer-editor",children:[ie.jsx("header",{children:ie.jsxs("div",{className:"layer-header",children:[ie.jsx("h2",{className:"layer-header__title",children:e("Layer: {{layerId}}",{layerId:tae(this.props.layer.id)})}),ie.jsx("div",{className:"layer-header__info",children:ie.jsxs(qM.Wrapper,{className:"more-menu",onSelection:a,closeOnSelection:!1,children:[ie.jsx(qM.Button,{id:"skip-target-layer-editor","data-wd-key":"skip-target-layer-editor",className:"more-menu__button",title:"Layer options",children:ie.jsx(qfe,{className:"more-menu__button__svg"})}),ie.jsx(qM.Menu,{children:ie.jsx("ul",{className:"more-menu__menu",children:Object.keys(s).map(c=>{Yt().f[36]++;const h=(Yt().s[85]++,s[c]);return Yt().s[86]++,ie.jsx("li",{children:ie.jsx(qM.MenuItem,{value:c,className:"more-menu__menu__item","data-wd-key":h.wdKey,children:h.text})},c)})})})]})})]})}),ie.jsx(gke,{allowMultipleExpanded:!0,allowZeroExpanded:!0,preExpanded:t,children:r})]})})}}const lDe=(Yt().s[87]++,No()(aDe));var KV=function(n,e,t){if(t||arguments.length===2)for(var i=0,r=e.length,o;i<r;i++)(o||!(i in e))&&(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return n.concat(o||Array.prototype.slice.call(e))},uDe=(function(){function n(e,t,i){this.name=e,this.version=t,this.os=i,this.type="browser"}return n})(),cDe=(function(){function n(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return n})(),ADe=(function(){function n(e,t,i,r){this.name=e,this.version=t,this.os=i,this.bot=r,this.type="bot-device"}return n})(),hDe=(function(){function n(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return n})(),dDe=(function(){function n(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return n})(),fDe=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,pDe=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,LV=3,mDe=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",fDe]],FV=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function gDe(n){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new dDe:typeof navigator<"u"?vDe(navigator.userAgent):CDe()}function yDe(n){return n!==""&&mDe.reduce(function(e,t){var i=t[0],r=t[1];if(e)return e;var o=r.exec(n);return!!o&&[i,o]},!1)}function vDe(n){var e=yDe(n);if(!e)return null;var t=e[0],i=e[1];if(t==="searchbot")return new hDe;var r=i[1]&&i[1].split(".").join("_").split("_").slice(0,3);r?r.length<LV&&(r=KV(KV([],r,!0),_De(LV-r.length),!0)):r=[];var o=r.join("."),s=bDe(n),a=pDe.exec(n);return a&&a[1]?new ADe(t,o,s,a[1]):new uDe(t,o,s)}function bDe(n){for(var e=0,t=FV.length;e<t;e++){var i=FV[e],r=i[0],o=i[1],s=o.exec(n);if(s)return r}return null}function CDe(){var n=typeof process<"u"&&process.version;return n?new cDe(process.version.slice(1)):null}function _De(n){for(var e=[],t=0;t<n;t++)e.push("0");return e}const xDe="maputnik",MDe="3.0.0",zV={name:xDe,version:MDe},wDe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='1200'%20height='1200'%20viewBox='0%200%20100%20100'%3e%3cg%20class='map'%20stroke='%23000'%3e%3cuse%20xlink:href='%23ref-1--map__main'%20fill='%234eba6f'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--map__line1'%20fill='none'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--map__line2'%20fill='none'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--map__line3'%20fill='none'%3e%3c/use%3e%3c/g%3e%3cg%20class='palette'%3e%3cuse%20xlink:href='%23ref-1--palette__main'%20fill='%23fff'%20stroke='%23000'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__inner'%20fill='none'%20stroke='%23000'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle5'%20fill='%23f7c44c'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle4'%20fill='%234eba6f'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle3'%20fill='%23f7c44c'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle2'%20fill='%234eba6f'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle1'%20fill='%23f7c44c'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle0'%20fill='%234eba6f'%3e%3c/use%3e%3c/g%3e%3cg%20class='brush'%20stroke='%23000'%3e%3cuse%20xlink:href='%23ref-1--brush__bottom'%20fill='%23f7c44c'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--brush__top'%20fill='%23fff'%3e%3c/use%3e%3c/g%3e%3cdefs%3e%3cpath%20id='ref-1--map__main'%20stroke-width='2.366'%20stroke-linejoin='round'%20d='M18.84%207.717l15.44%207.542%2015.75-7.762%2015.7%207.857L81.005%207.67%2096.31%2054.052%2073.598%2062.12%2050.93%2053.872l-25.1%208.066-22.668-8.066z'%3e%3c/path%3e%3cpath%20id='ref-1--map__line1'%20d='M65.556%2015.07l7.647%2046.838'%20stroke-width='1.104'%3e%3c/path%3e%3cpath%20id='ref-1--map__line2'%20d='M50.261%207.422l.717%2046.6'%20stroke-width='1.104'%3e%3c/path%3e%3cpath%20id='ref-1--map__line3'%20d='M34.011%2015.07l-8.603%2046.6'%20stroke-width='1.104'%3e%3c/path%3e%3cpath%20id='ref-1--palette__main'%20stroke-width='2.3'%20d='M47.352%2030.887c7.993.226%2016.934%209.725%2017.954%2015.25%201.02%205.527-.743%2011.125-4.298%2013.875-3.554%202.75-8.6%202.905-8.723%208.302-.097%204.237%208.457%208.5%208.088%2015.653-.406%207.857-15.508%2013.15-30.943%206.102-8.556-3.906-14.249-13.653-13.385-26.238C16.833%2052.334%2022.32%2043.658%2027.382%2039c5.977-5.503%2011.977-8.337%2019.97-8.112z'%3e%3c/path%3e%3ccircle%20id='ref-1--palette__inner'%20stroke-width='2.3'%20cx='41.873'%20cy='61.901'%20r='6.389'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle5'%20cy='44.56'%20cx='54.347'%20r='4.336'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle4'%20cx='40.443'%20cy='41.555'%20r='4.336'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle3'%20r='4.336'%20cy='51.102'%20cx='29.651'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle2'%20cx='25.293'%20cy='65.836'%20r='4.336'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle1'%20r='4.336'%20cy='79.326'%20cx='32.764'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle0'%20cx='46.669'%20cy='80.571'%20r='4.336'%3e%3c/circle%3e%3cpath%20id='ref-1--brush__bottom'%20d='M76.333%2089.333c-1.645-9.794-4.375-35.26-4.32-37.887.056-2.627%202.52-4.34%205.36-4.317%202.842.022%205.098%201.87%205.314%204.27.107%201.2-1.576%2028.06-2.318%2037.844-.332%204.374-3.31%204.413-4.036.09z'%20stroke-width='2.3'%20stroke-linejoin='round'%3e%3c/path%3e%3cpath%20id='ref-1--brush__top'%20stroke-linejoin='round'%20stroke-width='2.3'%20d='M77.184%2026.428s-5.621%207.02-5.621%2011.978c0%204.957%202.206%206.878%205.81%206.878%203.606%200%205.148-1.708%205.29-6.736.142-5.028-5.479-12.12-5.479-12.12z'%3e%3c/path%3e%3c/defs%3e%3c/svg%3e";function Ki(){var n="/home/runner/work/maputnik/maputnik/src/components/AppToolbar.tsx",e="d581519332bdff74d3cb5001df8051c24d7c7191",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/AppToolbar.tsx",statementMap:{0:{start:{line:20,column:16},end:{line:20,column:24}},1:{start:{line:21,column:41},end:{line:21,column:89}},2:{start:{line:24,column:4},end:{line:24,column:107}},3:{start:{line:29,column:4},end:{line:39,column:6}},4:{start:{line:44,column:4},end:{line:51,column:6}},5:{start:{line:56,column:4},end:{line:64,column:6}},6:{start:{line:68,column:10},end:{line:76,column:3}},7:{start:{line:78,column:4},end:{line:78,column:34}},8:{start:{line:81,column:4},end:{line:81,column:40}},9:{start:{line:83,column:11},end:{line:90,column:3}},10:{start:{line:84,column:4},end:{line:89,column:5}},11:{start:{line:85,column:6},end:{line:85,column:59}},12:{start:{line:87,column:17},end:{line:87,column:65}},13:{start:{line:88,column:6},end:{line:88,column:17}},14:{start:{line:92,column:14},end:{line:92,column:26}},15:{start:{line:93,column:18},end:{line:129,column:5}},16:{start:{line:130,column:24},end:{line:132,column:6}},17:{start:{line:131,column:6},end:{line:131,column:45}},18:{start:{line:133,column:4},end:{line:259,column:12}},19:{start:{line:144,column:33},end:{line:144,column:58}},20:{start:{line:153,column:33},end:{line:153,column:60}},21:{start:{line:162,column:33},end:{line:162,column:51}},22:{start:{line:189,column:80},end:{line:189,column:112}},23:{start:{line:193,column:82},end:{line:193,column:116}},24:{start:{line:197,column:87},end:{line:197,column:125}},25:{start:{line:201,column:83},end:{line:201,column:118}},26:{start:{line:205,column:84},end:{line:205,column:120}},27:{start:{line:209,column:88},end:{line:209,column:127}},28:{start:{line:222,column:33},end:{line:222,column:69}},29:{start:{line:225,column:38},end:{line:225,column:59}},30:{start:{line:226,column:20},end:{line:226,column:157}},31:{start:{line:228,column:115},end:{line:228,column:148}},32:{start:{line:229,column:20},end:{line:229,column:133}},33:{start:{line:245,column:33},end:{line:245,column:74}},34:{start:{line:248,column:18},end:{line:248,column:94}},35:{start:{line:262,column:19},end:{line:262,column:56}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:23,column:2},end:{line:23,column:3}},loc:{start:{line:23,column:11},end:{line:25,column:3}},line:23},1:{name:"(anonymous_1)",decl:{start:{line:28,column:2},end:{line:28,column:3}},loc:{start:{line:28,column:11},end:{line:40,column:3}},line:28},2:{name:"(anonymous_2)",decl:{start:{line:43,column:2},end:{line:43,column:3}},loc:{start:{line:43,column:11},end:{line:52,column:3}},line:43},3:{name:"(anonymous_3)",decl:{start:{line:55,column:2},end:{line:55,column:3}},loc:{start:{line:55,column:11},end:{line:65,column:3}},line:55},4:{name:"(anonymous_4)",decl:{start:{line:77,column:2},end:{line:77,column:3}},loc:{start:{line:77,column:23},end:{line:79,column:3}},line:77},5:{name:"(anonymous_5)",decl:{start:{line:80,column:2},end:{line:80,column:3}},loc:{start:{line:80,column:28},end:{line:82,column:3}},line:80},6:{name:"(anonymous_6)",decl:{start:{line:83,column:11},end:{line:83,column:12}},loc:{start:{line:83,column:23},end:{line:90,column:3}},line:83},7:{name:"(anonymous_7)",decl:{start:{line:91,column:2},end:{line:91,column:3}},loc:{start:{line:91,column:11},end:{line:260,column:3}},line:91},8:{name:"(anonymous_8)",decl:{start:{line:130,column:35},end:{line:130,column:36}},loc:{start:{line:130,column:45},end:{line:132,column:5}},line:130},9:{name:"(anonymous_9)",decl:{start:{line:144,column:25},end:{line:144,column:26}},loc:{start:{line:144,column:33},end:{line:144,column:58}},line:144},10:{name:"(anonymous_10)",decl:{start:{line:153,column:25},end:{line:153,column:26}},loc:{start:{line:153,column:33},end:{line:153,column:60}},line:153},11:{name:"(anonymous_11)",decl:{start:{line:162,column:25},end:{line:162,column:26}},loc:{start:{line:162,column:33},end:{line:162,column:51}},line:162},12:{name:"(anonymous_12)",decl:{start:{line:189,column:74},end:{line:189,column:75}},loc:{start:{line:189,column:80},end:{line:189,column:112}},line:189},13:{name:"(anonymous_13)",decl:{start:{line:193,column:76},end:{line:193,column:77}},loc:{start:{line:193,column:82},end:{line:193,column:116}},line:193},14:{name:"(anonymous_14)",decl:{start:{line:197,column:81},end:{line:197,column:82}},loc:{start:{line:197,column:87},end:{line:197,column:125}},line:197},15:{name:"(anonymous_15)",decl:{start:{line:201,column:77},end:{line:201,column:78}},loc:{start:{line:201,column:83},end:{line:201,column:118}},line:201},16:{name:"(anonymous_16)",decl:{start:{line:205,column:78},end:{line:205,column:79}},loc:{start:{line:205,column:84},end:{line:205,column:120}},line:205},17:{name:"(anonymous_17)",decl:{start:{line:209,column:82},end:{line:209,column:83}},loc:{start:{line:209,column:88},end:{line:209,column:127}},line:209},18:{name:"(anonymous_18)",decl:{start:{line:222,column:26},end:{line:222,column:27}},loc:{start:{line:222,column:33},end:{line:222,column:69}},line:222},19:{name:"(anonymous_19)",decl:{start:{line:225,column:31},end:{line:225,column:32}},loc:{start:{line:225,column:38},end:{line:225,column:59}},line:225},20:{name:"(anonymous_20)",decl:{start:{line:225,column:65},end:{line:225,column:66}},loc:{start:{line:225,column:75},end:{line:227,column:19}},line:225},21:{name:"(anonymous_21)",decl:{start:{line:228,column:108},end:{line:228,column:109}},loc:{start:{line:228,column:115},end:{line:228,column:148}},line:228},22:{name:"(anonymous_22)",decl:{start:{line:228,column:154},end:{line:228,column:155}},loc:{start:{line:228,column:164},end:{line:230,column:19}},line:228},23:{name:"(anonymous_23)",decl:{start:{line:245,column:26},end:{line:245,column:27}},loc:{start:{line:245,column:33},end:{line:245,column:74}},line:245},24:{name:"(anonymous_24)",decl:{start:{line:247,column:65},end:{line:247,column:66}},loc:{start:{line:247,column:83},end:{line:249,column:17}},line:247}},branchMap:{0:{loc:{start:{line:84,column:4},end:{line:89,column:5}},type:"if",locations:[{start:{line:84,column:4},end:{line:89,column:5}},{start:{line:86,column:11},end:{line:89,column:5}}],line:84}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/AppToolbar.tsx"],names:[],mappings:"AAmCW,SAAA,KAwLG,YAxLH;AAnCX,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,SAAQ,cAAa;AAErB;AAAA,EACE;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,OACK;AACP,OAAO,aAAa;AAEpB,OAAO,kBAAkB;AACzB,SAAS,uBAA6C;AACtD,SAAS,0BAA0B;AAInC,MAAM,UAAU,OAAO;AACvB,MAAM,mCAAmC,CAAC,UAAU,SAAS,EAAE,QAAQ,QAAS,IAAI,IAAI;AASxF,MAAM,iBAAiB,MAAM,UAAyB;AAAA,EACpD,SAAS;AACP,+BAAQ,QAAA,EAAK,WAAU,sBAAsB,UAAA,KAAK,MAAM,SAAA,CAAS;AAAA,EACnE;AACF;AAQA,MAAM,oBAAoB,MAAM,UAA4B;AAAA,EAC1D,SAAS;AACP,WAAO;AAAA,MAAC;AAAA,MAAA;AAAA,QACN,WAAW,WAAW,yBAAyB,KAAK,MAAM,SAAS;AAAA,QACnE,MAAM,KAAK,MAAM;AAAA,QACjB,KAAI;AAAA,QACJ,QAAO;AAAA,QACP,eAAY;AAAA,QAEX,eAAK,MAAM;AAAA,MAAA;AAAA,IACd;AAAA,EACF;AACF;AAOA,MAAM,sBAAsB,MAAM,UAA8B;AAAA,EAC9D,SAAS;AACP,WAAO;AAAA,MAAC;AAAA,MAAA;AAAA,QACN,WAAU;AAAA,QACV,eAAa,KAAK,MAAM;AAAA,QAEvB,eAAK,MAAM;AAAA,MAAA;AAAA,IACd;AAAA,EACF;AACF;AAQA,MAAM,sBAAsB,MAAM,UAA8B;AAAA,EAC9D,SAAS;AACP,WAAO;AAAA,MAAC;AAAA,MAAA;AAAA,QACN,WAAU;AAAA,QACV,eAAa,KAAK,MAAM;AAAA,QACxB,SAAS,KAAK,MAAM;AAAA,QAEnB,eAAK,MAAM;AAAA,MAAA;AAAA,IACd;AAAA,EACF;AACF;AAmBA,MAAM,2BAA2B,MAAM,UAAmC;AAAA,EACxE,QAAQ;AAAA,IACN,QAAQ;AAAA,MACN,UAAU;AAAA,MACV,SAAS;AAAA,MACT,MAAM;AAAA,MACN,KAAK;AAAA,MACL,QAAQ;AAAA,IACV;AAAA,EACF;AAAA,EAEA,gBAAgB,KAAe;AAC7B,SAAK,MAAM,cAAc,GAAG;AAAA,EAC9B;AAAA,EAEA,qBAAqB,KAAa;AAChC,SAAK,MAAM,KAAK,eAAe,GAAG;AAAA,EACpC;AAAA,EAEA,SAAS,CAAC,WAAmB;AAC3B,QAAI,WAAW,OAAO;AACnB,eAAS,cAAc,oBAAoB,EAAwB,MAAM;AAAA,IAC5E,OACK;AACH,YAAM,KAAK,SAAS,cAAc,kBAAgB,MAAM;AACxD,SAAG,MAAM;AAAA,IACX;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,QAAQ;AAAA,MACZ;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,KAAK;AAAA,MAChB;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,SAAS;AAAA,QAClB,UAAU,KAAK,MAAM,aAAa;AAAA,MACpC;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,qBAAqB;AAAA,QAC9B,UAAU,CAAC;AAAA,MACb;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,mBAAmB;AAAA,QAC5B,UAAU,CAAC;AAAA,MACb;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,mBAAmB;AAAA,QAC5B,UAAU,CAAC;AAAA,MACb;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,sBAAsB;AAAA,QAC/B,UAAU,CAAC;AAAA,MACb;AAAA,IACF;AAEA,UAAM,cAAc,MAAM,KAAK,CAAC,SAAS;AACvC,aAAO,KAAK,OAAO,KAAK,MAAM;AAAA,IAChC,CAAC;AAED,+BAAQ,OAAA,EAAI,WAAU,oBACpB,UAAA,qBAAC,OAAA,EAAI,WAAU,2BACb,UAAA;AAAA,MAAA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,WAAU;AAAA,UAGV,UAAA;AAAA,YAAA;AAAA,cAAC;AAAA,cAAA;AAAA,gBACC,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACV,SAAS,CAAA,OAAM,KAAK,OAAO,YAAY;AAAA,gBAEtC,YAAE,aAAa;AAAA,cAAA;AAAA,YAClB;AAAA,YACA;AAAA,cAAC;AAAA,cAAA;AAAA,gBACC,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACV,SAAS,CAAA,OAAM,KAAK,OAAO,cAAc;AAAA,gBAExC,YAAE,cAAc;AAAA,cAAA;AAAA,YACnB;AAAA,YACA;AAAA,cAAC;AAAA,cAAA;AAAA,gBACC,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACV,SAAS,CAAA,OAAM,KAAK,OAAO,KAAK;AAAA,gBAE/B,YAAE,UAAU;AAAA,cAAA;AAAA,YACf;AAAA,YACA;AAAA,cAAC;AAAA,cAAA;AAAA,gBACC,WAAU;AAAA,gBACV,QAAO;AAAA,gBACP,KAAI;AAAA,gBACJ,MAAK;AAAA,gBAEL,UAAA;AAAA,kBAAA,oBAAC,SAAI,KAAK,cAAc,KAAK,EAAE,oBAAoB,EAAA,CAAG;AAAA,uCACrD,MAAA,EACC,UAAA;AAAA,oBAAA,oBAAC,QAAA,EAAK,WAAU,yBAAyB,UAAA,QAAQ,KAAA,CAAK;AAAA,oBACtD,qBAAC,QAAA,EAAK,WAAU,4BAA2B,UAAA;AAAA,sBAAA;AAAA,sBAAE,QAAQ;AAAA,oBAAA,EAAA,CAAQ;AAAA,kBAAA,EAAA,CAC/D;AAAA,gBAAA;AAAA,cAAA;AAAA,YACF;AAAA,UAAA;AAAA,QAAA;AAAA,MACF;AAAA,2BACC,OAAA,EAAI,WAAU,6BAA4B,MAAK,cAAa,cAAW,WACtE,UAAA;AAAA,QAAA,qBAAC,eAAA,EAAc,OAAM,YAAW,SAAS,MAAM,KAAK,MAAM,cAAc,MAAM,GAC5E,UAAA;AAAA,UAAA,oBAAC,iBAAA,CAAA,CAAgB;AAAA,UACjB,oBAAC,UAAA,EAAU,UAAA,EAAE,MAAM,EAAA,CAAE;AAAA,QAAA,EAAA,CACvB;AAAA,QACA,qBAAC,eAAA,EAAc,OAAM,cAAa,SAAS,MAAM,KAAK,MAAM,cAAc,QAAQ,GAChF,UAAA;AAAA,UAAA,oBAAC,QAAA,CAAA,CAAO;AAAA,UACR,oBAAC,UAAA,EAAU,UAAA,EAAE,MAAM,EAAA,CAAE;AAAA,QAAA,EAAA,CACvB;AAAA,QACA,qBAAC,eAAA,EAAc,OAAM,mBAAkB,SAAS,MAAM,KAAK,MAAM,cAAc,YAAY,GACzF,UAAA;AAAA,UAAA,oBAAC,QAAA,CAAA,CAAO;AAAA,UACR,oBAAC,UAAA,EAAU,UAAA,EAAE,aAAa,EAAA,CAAE;AAAA,QAAA,EAAA,CAC9B;AAAA,QACA,qBAAC,eAAA,EAAc,OAAM,eAAc,SAAS,MAAM,KAAK,MAAM,cAAc,SAAS,GAClF,UAAA;AAAA,UAAA,oBAAC,UAAA,CAAA,CAAS;AAAA,UACV,oBAAC,UAAA,EAAU,UAAA,EAAE,cAAc,EAAA,CAAE;AAAA,QAAA,EAAA,CAC/B;AAAA,QACA,qBAAC,eAAA,EAAc,OAAM,gBAAe,SAAS,MAAM,KAAK,MAAM,cAAc,UAAU,GACpF,UAAA;AAAA,UAAA,oBAAC,YAAA,CAAA,CAAW;AAAA,UACZ,oBAAC,UAAA,EAAU,UAAA,EAAE,gBAAgB,EAAA,CAAE;AAAA,QAAA,EAAA,CACjC;AAAA,QACA,qBAAC,eAAA,EAAc,OAAM,oBAAmB,SAAS,MAAM,KAAK,MAAM,cAAc,aAAa,GAC3F,UAAA;AAAA,UAAA,oBAAC,UAAA,CAAA,CAAS;AAAA,UACV,oBAAC,UAAA,EAAU,UAAA,EAAE,cAAc,EAAA,CAAE;AAAA,QAAA,EAAA,CAC/B;AAAA,QAEA,qBAAC,eAAA,EAAc,OAAM,eACnB,UAAA;AAAA,UAAA,oBAAC,cAAA,CAAA,CAAa;AAAA,+BACb,UAAA,EAAU,UAAA;AAAA,YAAA,EAAE,MAAM;AAAA,YACjB;AAAA,cAAC;AAAA,cAAA;AAAA,gBACC,WAAU;AAAA,gBACV,eAAY;AAAA,gBACZ,UAAU,CAAC,MAAM,KAAK,gBAAgB,EAAE,OAAO,KAAiB;AAAA,gBAChE,OAAO,aAAa;AAAA,gBAEnB,UAAA;AAAA,kBAAA,MAAM,OAAO,OAAK,EAAE,UAAU,SAAS,EAAE,IAAI,CAAC,SAAS;AACtD,2BACE,oBAAC,UAAA,EAAqB,OAAO,KAAK,IAAI,UAAU,KAAK,UAAU,eAAa,KAAK,IAC9E,UAAA,KAAK,MAAA,GADK,KAAK,EAElB;AAAA,kBAEJ,CAAC;AAAA,kBACD,oBAAC,YAAA,EAAS,OAAO,EAAE,qBAAqB,GACrC,UAAA,MAAM,OAAO,CAAA,MAAK,EAAE,UAAU,qBAAqB,EAAE,IAAI,CAAC,SAAS;AAClE,2BACE,oBAAC,UAAA,EAAqB,OAAO,KAAK,IAAI,UAAU,KAAK,UAClD,UAAA,KAAK,MAAA,GADK,KAAK,EAElB;AAAA,kBAEJ,CAAC,EAAA,CACH;AAAA,gBAAA;AAAA,cAAA;AAAA,YACF;AAAA,UAAA,EAAA,CACF;AAAA,QAAA,EAAA,CACF;AAAA,QAEA,qBAAC,eAAA,EAAc,OAAM,gBACnB,UAAA;AAAA,UAAA,oBAAC,YAAA,CAAA,CAAW;AAAA,+BACX,UAAA,EAAS,UAAA;AAAA,YAAA;AAAA,YACR;AAAA,cAAC;AAAA,cAAA;AAAA,gBACC,WAAU;AAAA,gBACV,eAAY;AAAA,gBACZ,UAAU,CAAC,MAAM,KAAK,qBAAqB,EAAE,OAAO,KAAK;AAAA,gBACzD,OAAO,KAAK,MAAM,KAAK;AAAA,gBAEtB,UAAA,OAAO,QAAQ,kBAAkB,EAAE,IAAI,CAAC,CAAC,MAAM,IAAI,MAAM;AACxD,yBACE,oBAAC,UAAA,EAAkB,OAAO,MACvB,kBADU,IAEb;AAAA,gBAEJ,CAAC;AAAA,cAAA;AAAA,YACH;AAAA,UAAA,EAAA,CACF;AAAA,QAAA,EAAA,CACF;AAAA,QAEA,qBAAC,aAAA,EAAY,MAAM,6CACjB,UAAA;AAAA,UAAA,oBAAC,eAAA,CAAA,CAAc;AAAA,UACf,oBAAC,UAAA,EAAU,UAAA,EAAE,MAAM,EAAA,CAAE;AAAA,QAAA,EAAA,CACvB;AAAA,MAAA,EAAA,CACF;AAAA,IAAA,EAAA,CACF,EAAA,CACF;AAAA,EACF;AACF;AAEA,MAAM,aAAa,gBAAgB,EAAE,kBAAkB;AACvD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d581519332bdff74d3cb5001df8051c24d7c7191"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Ki=function(){return s},s}Ki();const SDe=(Ki().s[0]++,gDe()),XM=(Ki().s[1]++,["chrome","firefox"].indexOf(SDe.name)>-1);class V0 extends En.Component{render(){return Ki().f[0]++,Ki().s[2]++,ie.jsx("span",{className:"maputnik-icon-text",children:this.props.children})}}class EDe extends En.Component{render(){return Ki().f[1]++,Ki().s[3]++,ie.jsx("a",{className:u0("maputnik-toolbar-link",this.props.className),href:this.props.href,rel:"noopener noreferrer",target:"_blank","data-wd-key":"toolbar:link",children:this.props.children})}}class jV extends En.Component{render(){return Ki().f[2]++,Ki().s[4]++,ie.jsx("div",{className:"maputnik-toolbar-select","data-wd-key":this.props.wdKey,children:this.props.children})}}class A_ extends En.Component{render(){return Ki().f[3]++,Ki().s[5]++,ie.jsx("button",{className:"maputnik-toolbar-action","data-wd-key":this.props.wdKey,onClick:this.props.onClick,children:this.props.children})}}class ODe extends En.Component{state=(Ki().s[6]++,{isOpen:{settings:!1,sources:!1,open:!1,add:!1,export:!1}});handleSelection(e){Ki().f[4]++,Ki().s[7]++,this.props.onSetMapState(e)}handleLanguageChange(e){Ki().f[5]++,Ki().s[8]++,this.props.i18n.changeLanguage(e)}onSkip=(Ki().s[9]++,e=>{if(Ki().f[6]++,Ki().s[10]++,e==="map")Ki().b[0][0]++,Ki().s[11]++,document.querySelector(".maplibregl-canvas").focus();else{Ki().b[0][1]++;const t=(Ki().s[12]++,document.querySelector("#skip-target-"+e));Ki().s[13]++,t.focus()}});render(){Ki().f[7]++;const e=(Ki().s[14]++,this.props.t),t=(Ki().s[15]++,[{id:"map",group:"general",title:e("Map")},{id:"inspect",group:"general",title:e("Inspect"),disabled:this.props.renderer==="ol"},{id:"filter-deuteranopia",group:"color-accessibility",title:e("Deuteranopia filter"),disabled:!XM},{id:"filter-protanopia",group:"color-accessibility",title:e("Protanopia filter"),disabled:!XM},{id:"filter-tritanopia",group:"color-accessibility",title:e("Tritanopia filter"),disabled:!XM},{id:"filter-achromatopsia",group:"color-accessibility",title:e("Achromatopsia filter"),disabled:!XM}]),i=(Ki().s[16]++,t.find(r=>(Ki().f[8]++,Ki().s[17]++,r.id===this.props.mapState)));return Ki().s[18]++,ie.jsx("nav",{className:"maputnik-toolbar",children:ie.jsxs("div",{className:"maputnik-toolbar__inner",children:[ie.jsxs("div",{className:"maputnik-toolbar-logo-container",children:[ie.jsx("button",{"data-wd-key":"root:skip:layer-list",className:"maputnik-toolbar-skip",onClick:r=>(Ki().f[9]++,Ki().s[19]++,this.onSkip("layer-list")),children:e("Layers list")}),ie.jsx("button",{"data-wd-key":"root:skip:layer-editor",className:"maputnik-toolbar-skip",onClick:r=>(Ki().f[10]++,Ki().s[20]++,this.onSkip("layer-editor")),children:e("Layer editor")}),ie.jsx("button",{"data-wd-key":"root:skip:map-view",className:"maputnik-toolbar-skip",onClick:r=>(Ki().f[11]++,Ki().s[21]++,this.onSkip("map")),children:e("Map view")}),ie.jsxs("a",{className:"maputnik-toolbar-logo",target:"blank",rel:"noreferrer noopener",href:"https://github.com/maplibre/maputnik",children:[ie.jsx("img",{src:wDe,alt:e("Maputnik on GitHub")}),ie.jsxs("h1",{children:[ie.jsx("span",{className:"maputnik-toolbar-name",children:zV.name}),ie.jsxs("span",{className:"maputnik-toolbar-version",children:["v",zV.version]})]})]})]}),ie.jsxs("div",{className:"maputnik-toolbar__actions",role:"navigation","aria-label":"Toolbar",children:[ie.jsxs(A_,{wdKey:"nav:open",onClick:()=>(Ki().f[12]++,Ki().s[22]++,this.props.onToggleModal("open")),children:[ie.jsx(Tfe,{}),ie.jsx(V0,{children:e("Open")})]}),ie.jsxs(A_,{wdKey:"nav:export",onClick:()=>(Ki().f[13]++,Ki().s[23]++,this.props.onToggleModal("export")),children:[ie.jsx(w9,{}),ie.jsx(V0,{children:e("Save")})]}),ie.jsxs(A_,{wdKey:"nav:code-editor",onClick:()=>(Ki().f[14]++,Ki().s[24]++,this.props.onToggleModal("codeEditor")),children:[ie.jsx(Sfe,{}),ie.jsx(V0,{children:e("Code Editor")})]}),ie.jsxs(A_,{wdKey:"nav:sources",onClick:()=>(Ki().f[15]++,Ki().s[25]++,this.props.onToggleModal("sources")),children:[ie.jsx(Nfe,{}),ie.jsx(V0,{children:e("Data Sources")})]}),ie.jsxs(A_,{wdKey:"nav:settings",onClick:()=>(Ki().f[16]++,Ki().s[26]++,this.props.onToggleModal("settings")),children:[ie.jsx(Rfe,{}),ie.jsx(V0,{children:e("Style Settings")})]}),ie.jsxs(A_,{wdKey:"nav:global-state",onClick:()=>(Ki().f[17]++,Ki().s[27]++,this.props.onToggleModal("globalState")),children:[ie.jsx($fe,{}),ie.jsx(V0,{children:e("Global State")})]}),ie.jsxs(jV,{wdKey:"nav:inspect",children:[ie.jsx(Efe,{}),ie.jsxs(V0,{children:[e("View"),ie.jsxs("select",{className:"maputnik-select","data-wd-key":"maputnik-select",onChange:r=>(Ki().f[18]++,Ki().s[28]++,this.handleSelection(r.target.value)),value:i?.id,children:[t.filter(r=>(Ki().f[19]++,Ki().s[29]++,r.group==="general")).map(r=>(Ki().f[20]++,Ki().s[30]++,ie.jsx("option",{value:r.id,disabled:r.disabled,"data-wd-key":r.id,children:r.title},r.id))),ie.jsx("optgroup",{label:e("Color accessibility"),children:t.filter(r=>(Ki().f[21]++,Ki().s[31]++,r.group==="color-accessibility")).map(r=>(Ki().f[22]++,Ki().s[32]++,ie.jsx("option",{value:r.id,disabled:r.disabled,children:r.title},r.id)))})]})]})]}),ie.jsxs(jV,{wdKey:"nav:language",children:[ie.jsx(kfe,{}),ie.jsxs(V0,{children:["Language",ie.jsx("select",{className:"maputnik-select","data-wd-key":"maputnik-lang-select",onChange:r=>(Ki().f[23]++,Ki().s[33]++,this.handleLanguageChange(r.target.value)),value:this.props.i18n.language,children:Object.entries(dZ).map(([r,o])=>(Ki().f[24]++,Ki().s[34]++,ie.jsx("option",{value:r,children:o},r)))})]})]}),ie.jsxs(EDe,{href:"https://github.com/maplibre/maputnik/wiki",children:[ie.jsx(Ofe,{}),ie.jsx(V0,{children:e("Help")})]})]})]})})}}const BDe=(Ki().s[35]++,No()(ODe));function iE(){var n="/home/runner/work/maputnik/maputnik/src/components/ScrollContainer.tsx",e="d17a642b15310eb6111b086bd920c67ec86a8271",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/ScrollContainer.tsx",statementMap:{0:{start:{line:5,column:4},end:{line:5,column:113}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:2},end:{line:4,column:3}},loc:{start:{line:4,column:11},end:{line:6,column:3}},line:4}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ScrollContainer.tsx"],names:[],mappings:"AAQW;AARX,OAAO,WAAW;AAMlB,qBAAqB,wBAAwB,MAAM,UAAgC;AAAA,EACjF,SAAS;AACP,WAAO,oBAAC,SAAI,WAAU,6BACnB,eAAK,MAAM,UACd;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d17a642b15310eb6111b086bd920c67ec86a8271"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return iE=function(){return s},s}iE();class NV extends En.Component{render(){return iE().f[0]++,iE().s[0]++,ie.jsx("div",{className:"maputnik-scroll-container",children:this.props.children})}}function ap(){var n="/home/runner/work/maputnik/maputnik/src/components/AppLayout.tsx",e="d10f2b4393c64530a7dc27936dc2b0d9d69d1ee7",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/AppLayout.tsx",statementMap:{0:{start:{line:8,column:4},end:{line:8,column:46}},1:{start:{line:9,column:4},end:{line:21,column:12}},2:{start:{line:24,column:18},end:{line:24,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:11},end:{line:22,column:3}},line:7}},branchMap:{0:{loc:{start:{line:12,column:8},end:{line:12,column:190}},type:"binary-expr",locations:[{start:{line:12,column:8},end:{line:12,column:29}},{start:{line:12,column:49},end:{line:12,column:190}}],line:12},1:{loc:{start:{line:13,column:8},end:{line:16,column:12}},type:"binary-expr",locations:[{start:{line:13,column:8},end:{line:13,column:30}},{start:{line:13,column:50},end:{line:16,column:12}}],line:13},2:{loc:{start:{line:19,column:6},end:{line:19,column:123}},type:"binary-expr",locations:[{start:{line:19,column:6},end:{line:19,column:23}},{start:{line:19,column:43},end:{line:19,column:123}}],line:19}},s:{0:0,1:0,2:0},f:{0:0},b:{0:[0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/AppLayout.tsx"],names:[],mappings:"AAyBY,SAKyB,UALzB,KAKyB,YALzB;AAzBZ,OAAO,WAAW;AAClB,OAAO,qBAAqB;AAC5B,SAA+B,uBAAuB;AACtD,SAAS,mBAAmB;AAY5B,MAAM,0BAA0B,MAAM,UAAkC;AAAA,EAEtE,SAAS;AACP,aAAS,KAAK,MAAM,KAAK,MAAM,KAAK,IAAI;AAExC,WAAO,oBAAC,YAAY,UAAZ,EAAqB,OAAO,EAAC,MAAM,OAAM,GAC/C,+BAAC,SAAI,WAAU,mBACZ;AAAA,WAAK,MAAM;AAAA,MACZ,qBAAC,SAAI,WAAU,wBACZ;AAAA,aAAK,MAAM,cAAc,oBAAC,SAAI,WAAU,+BACvC,8BAAC,mBACE,eAAK,MAAM,YACd,GACF;AAAA,QAEC,CAAC,KAAK,MAAM,cAAc,iCACzB;AAAA,8BAAC,SAAI,WAAU,wBACZ,eAAK,MAAM,WACd;AAAA,UACA,oBAAC,SAAI,WAAU,0BACb,8BAAC,mBACE,eAAK,MAAM,aACd,GACF;AAAA,WACF;AAAA,QACC,KAAK,MAAM;AAAA,SACd;AAAA,MACC,KAAK,MAAM,UAAU,oBAAC,SAAI,WAAU,0BAClC,eAAK,MAAM,QACd;AAAA,MAEC,KAAK,MAAM;AAAA,OACd,GACF;AAAA,EACF;AACF;AAEA,MAAM,YAAY,gBAAgB,EAAE,iBAAiB;AACrD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d10f2b4393c64530a7dc27936dc2b0d9d69d1ee7"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return ap=function(){return s},s}ap();class IDe extends En.Component{render(){return ap().f[0]++,ap().s[0]++,document.body.dir=this.props.i18n.dir(),ap().s[1]++,ie.jsx(ox.Provider,{value:{size:"14px"},children:ie.jsxs("div",{className:"maputnik-layout",children:[this.props.toolbar,ie.jsxs("div",{className:"maputnik-layout-main",children:[(ap().b[0][0]++,this.props.codeEditor&&(ap().b[0][1]++,ie.jsx("div",{className:"maputnik-layout-code-editor",children:ie.jsx(NV,{children:this.props.codeEditor})}))),(ap().b[1][0]++,!this.props.codeEditor&&(ap().b[1][1]++,ie.jsxs(ie.Fragment,{children:[ie.jsx("div",{className:"maputnik-layout-list",children:this.props.layerList}),ie.jsx("div",{className:"maputnik-layout-drawer",children:ie.jsx(NV,{children:this.props.layerEditor})})]}))),this.props.map]}),(ap().b[2][0]++,this.props.bottom&&(ap().b[2][1]++,ie.jsx("div",{className:"maputnik-layout-bottom",children:this.props.bottom}))),this.props.modals]})})}}const kDe=(ap().s[2]++,No()(IDe));function Oa(){var n="/home/runner/work/maputnik/maputnik/src/components/AppMessagePanel.tsx",e="35d9aec71cb86113da5d8ac4f197fbf609a8818e",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/AppMessagePanel.tsx",statementMap:{0:{start:{line:6,column:24},end:{line:9,column:3}},1:{start:{line:11,column:38},end:{line:11,column:48}},2:{start:{line:12,column:19},end:{line:40,column:6}},3:{start:{line:14,column:6},end:{line:38,column:7}},4:{start:{line:15,column:27},end:{line:15,column:32}},5:{start:{line:16,column:24},end:{line:16,column:73}},6:{start:{line:17,column:8},end:{line:35,column:13}},7:{start:{line:30,column:31},end:{line:30,column:74}},8:{start:{line:37,column:8},end:{line:37,column:32}},9:{start:{line:39,column:6},end:{line:39,column:120}},10:{start:{line:41,column:18},end:{line:43,column:6}},11:{start:{line:42,column:6},end:{line:42,column:68}},12:{start:{line:44,column:4},end:{line:47,column:9}},13:{start:{line:50,column:24},end:{line:50,column:66}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:19},end:{line:7,column:20}},loc:{start:{line:7,column:25},end:{line:8,column:5}},line:7},1:{name:"(anonymous_1)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:48,column:3}},line:10},2:{name:"(anonymous_2)",decl:{start:{line:12,column:42},end:{line:12,column:43}},loc:{start:{line:12,column:58},end:{line:40,column:5}},line:12},3:{name:"(anonymous_3)",decl:{start:{line:30,column:25},end:{line:30,column:26}},loc:{start:{line:30,column:31},end:{line:30,column:74}},line:30},4:{name:"(anonymous_4)",decl:{start:{line:41,column:40},end:{line:41,column:41}},loc:{start:{line:41,column:50},end:{line:43,column:5}},line:41}},branchMap:{0:{loc:{start:{line:14,column:6},end:{line:38,column:7}},type:"if",locations:[{start:{line:14,column:6},end:{line:38,column:7}},{start:{line:36,column:13},end:{line:38,column:7}}],line:14},1:{loc:{start:{line:14,column:10},end:{line:14,column:55}},type:"binary-expr",locations:[{start:{line:14,column:10},end:{line:14,column:22}},{start:{line:14,column:26},end:{line:14,column:55}}],line:14},2:{loc:{start:{line:24,column:10},end:{line:34,column:14}},type:"binary-expr",locations:[{start:{line:24,column:10},end:{line:24,column:50}},{start:{line:24,column:70},end:{line:34,column:14}}],line:24}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/AppMessagePanel.tsx"],names:[],mappings:"AA6BY,SAIE,UAHM,KADR;AA7BZ,OAAO,WAAW;AAClB,SAAQ,qBAAoB;AAE5B,SAAS,OAA6B,uBAAuB;AAY7D,MAAM,gCAAgC,MAAM,UAAwC;AAAA,EAClF,OAAO,eAAe;AAAA,IACpB,eAAe,MAAM;AAAA,IAAC;AAAA,EACxB;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,GAAG,mBAAkB,IAAI,KAAK;AACrC,UAAM,SAAS,KAAK,MAAM,QAAQ,IAAI,CAAC,OAAO,QAAQ;AACpD,UAAI;AACJ,UAAI,MAAM,UAAU,MAAM,OAAO,SAAS,SAAS;AACjD,cAAM,EAAC,OAAM,IAAI;AACjB,cAAM,UAAU,KAAK,MAAM,UAAU,OAAO,OAAO,KAAK,KAAK,EAAE;AAC/D,kBACE,iCACE;AAAA,+BAAC,SAAM,GAAM;AAAA;AAAA,YACL,oBAAC,UAAM,wBAAc,OAAO,GAAE;AAAA,YAAO;AAAA,YAAG,OAAO,KAAK;AAAA,aAC5D;AAAA,UACC,uBAAuB,OAAO,KAAK,SAClC,iCAAE;AAAA;AAAA,YAEA;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,SAAS,MAAM,KAAK,MAAM,cAAe,OAAO,KAAK,KAAK;AAAA,gBAEzD,YAAE,iBAAiB;AAAA;AAAA,YACtB;AAAA,aACF;AAAA,WAEJ;AAAA,MAEJ,OACK;AACH,kBAAU,MAAM;AAAA,MAClB;AACA,aAAO,oBAAC,OAAqB,WAAU,gCACpC,qBADY,WAAS,GAExB;AAAA,IACF,CAAC;AAED,UAAM,QAAQ,KAAK,MAAM,OAAO,IAAI,CAAC,GAAG,MAAM;AAC5C,aAAO,oBAAC,OAAmB,eAAZ,UAAQ,CAAM;AAAA,IAC/B,CAAC;AAED,WAAO,qBAAC,SAAI,WAAU,0BACnB;AAAA;AAAA,MACA;AAAA,OACH;AAAA,EACF;AACF;AAEA,MAAM,kBAAkB,gBAAgB,EAAE,uBAAuB;AACjE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"35d9aec71cb86113da5d8ac4f197fbf609a8818e"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Oa=function(){return s},s}Oa();class TDe extends En.Component{static defaultProps=(Oa().s[0]++,{onLayerSelect:()=>{Oa().f[0]++}});render(){Oa().f[1]++;const{t:e,selectedLayerIndex:t}=(Oa().s[1]++,this.props),i=(Oa().s[2]++,this.props.errors?.map((o,s)=>{Oa().f[2]++;let a;if(Oa().s[3]++,Oa().b[1][0]++,o.parsed&&(Oa().b[1][1]++,o.parsed.type==="layer")){Oa().b[0][0]++;const{parsed:c}=(Oa().s[4]++,o),h=(Oa().s[5]++,this.props.mapStyle?.layers[c.data.index].id);Oa().s[6]++,a=ie.jsxs(ie.Fragment,{children:[ie.jsxs(Cb,{t:e,children:["Layer ",ie.jsx("span",{children:tae(h)}),": ",c.data.message]}),(Oa().b[2][0]++,t!==c.data.index&&(Oa().b[2][1]++,ie.jsxs(ie.Fragment,{children:["",ie.jsx("button",{className:"maputnik-message-panel__switch-button",onClick:()=>(Oa().f[3]++,Oa().s[7]++,this.props.onLayerSelect(c.data.index)),children:e("switch to layer")})]})))]})}else Oa().b[0][1]++,Oa().s[8]++,a=o.message;return Oa().s[9]++,ie.jsx("p",{className:"maputnik-message-panel-error",children:a},"error-"+s)})),r=(Oa().s[10]++,this.props.infos?.map((o,s)=>(Oa().f[4]++,Oa().s[11]++,ie.jsx("p",{children:o},"info-"+s))));return Oa().s[12]++,ie.jsxs("div",{className:"maputnik-message-panel",children:[i,r]})}}const RDe=(Oa().s[13]++,No()(TDe));function D4(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldArray.tsx",e="6904abccc922d01222214bca1ee3bdee75077020",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldArray.tsx",statementMap:{0:{start:{line:4,column:19},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:148}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:19},end:{line:4,column:20}},loc:{start:{line:4,column:30},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldArray.tsx"],names:[],mappings:"AAaM;AAbN,OAAO,gBAA0C;AACjD,OAAO,cAAc;AASrB,MAAM,aAAwC,CAAC,UAAU;AACvD,SACE,oBAAC,YAAS,OAAO,MAAM,OAAO,WAAW,MAAM,WAC7C,8BAAC,cAAY,GAAG,OAAO,GACzB;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"6904abccc922d01222214bca1ee3bdee75077020"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return D4=function(){return s},s}D4();D4().s[0]++;const rE=n=>(D4().f[0]++,D4().s[1]++,ie.jsx(Ry,{label:n.label,fieldSpec:n.fieldSpec,children:ie.jsx(KD,{...n})}));function P4(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldNumber.tsx",e="4d2523cd21b202fb5e80e08624becdbab30e967f",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldNumber.tsx",statementMap:{0:{start:{line:4,column:20},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:146}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:20},end:{line:4,column:21}},loc:{start:{line:4,column:31},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldNumber.tsx"],names:[],mappings:"AAeM;AAfN,OAAO,iBAA0C;AACjD,OAAO,WAAW;AAWlB,MAAM,cAA0C,CAAC,UAAU;AACzD,SACE,oBAAC,SAAM,OAAO,MAAM,OAAO,WAAW,MAAM,WAC1C,8BAAC,eAAa,GAAG,OAAO,GAC1B;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"4d2523cd21b202fb5e80e08624becdbab30e967f"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return P4=function(){return s},s}P4();P4().s[0]++;const fm=n=>(P4().f[0]++,P4().s[1]++,ie.jsx(Ls,{label:n.label,fieldSpec:n.fieldSpec,children:ie.jsx(m1,{...n})}));function U4(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldString.tsx",e="5d41bf44c48c380a773c8c6219651c4348518afa",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldString.tsx",statementMap:{0:{start:{line:4,column:20},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:146}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:20},end:{line:4,column:21}},loc:{start:{line:4,column:31},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldString.tsx"],names:[],mappings:"AAcM;AAdN,OAAO,WAAW;AAClB,OAAO,iBAA0C;AAUjD,MAAM,cAA0C,CAAC,UAAU;AACzD,SACE,oBAAC,SAAM,OAAO,MAAM,OAAO,WAAW,MAAM,WAC1C,8BAAC,eAAa,GAAG,OAAO,GAC1B;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"5d41bf44c48c380a773c8c6219651c4348518afa"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return U4=function(){return s},s}U4();U4().s[0]++;const md=n=>(U4().f[0]++,U4().s[1]++,ie.jsx(Ls,{label:n.label,fieldSpec:n.fieldSpec,children:ie.jsx(Bm,{...n})}));function K4(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldUrl.tsx",e="6e4f23f735ab05a9622545421c68df85e4603d43",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldUrl.tsx",statementMap:{0:{start:{line:4,column:17},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:143}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:17},end:{line:4,column:18}},loc:{start:{line:4,column:28},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldUrl.tsx"],names:[],mappings:"AAeM;AAfN,OAAO,cAAqD;AAC5D,OAAO,WAAW;AAWlB,MAAM,WAAoC,CAAC,UAAU;AACnD,SACE,oBAAC,SAAM,OAAO,MAAM,OAAO,WAAW,MAAM,WAC1C,8BAAC,YAAU,GAAG,OAAO,GACvB;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"6e4f23f735ab05a9622545421c68df85e4603d43"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return K4=function(){return s},s}K4();K4().s[0]++;const Bx=n=>(K4().f[0]++,K4().s[1]++,ie.jsx(Ls,{label:n.label,fieldSpec:n.fieldSpec,children:ie.jsx(EL,{...n})}));function L4(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldSelect.tsx",e="245ef066962174fcd1012332d28af93e7b97872c",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldSelect.tsx",statementMap:{0:{start:{line:4,column:20},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:146}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:20},end:{line:4,column:21}},loc:{start:{line:4,column:31},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldSelect.tsx"],names:[],mappings:"AAeM;AAfN,OAAO,WAAW;AAClB,OAAO,iBAA0C;AAWjD,MAAM,cAA0C,CAAC,UAAU;AACzD,SACE,oBAAC,SAAM,OAAO,MAAM,OAAO,WAAW,MAAM,WAC1C,8BAAC,eAAa,GAAG,OAAO,GAC1B;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"245ef066962174fcd1012332d28af93e7b97872c"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return L4=function(){return s},s}L4();L4().s[0]++;const F4=n=>(L4().f[0]++,L4().s[1]++,ie.jsx(Ls,{label:n.label,fieldSpec:n.fieldSpec,children:ie.jsx(rC,{...n})}));function z4(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldEnum.tsx",e="c3637509a0af6618b52e814bed4254c2e3fa3b7a",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldEnum.tsx",statementMap:{0:{start:{line:4,column:18},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:147}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:18},end:{line:4,column:19}},loc:{start:{line:4,column:29},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldEnum.tsx"],names:[],mappings:"AAeM;AAfN,OAAO,eAAsC;AAC7C,OAAO,cAAc;AAWrB,MAAM,YAAsC,CAAC,UAAU;AACrD,SACE,oBAAC,YAAS,OAAO,MAAM,OAAO,WAAW,MAAM,WAC7C,8BAAC,aAAW,GAAG,OAAO,GACxB;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"c3637509a0af6618b52e814bed4254c2e3fa3b7a"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return z4=function(){return s},s}z4();z4().s[0]++;const DDe=n=>(z4().f[0]++,z4().s[1]++,ie.jsx(Ry,{label:n.label,fieldSpec:n.fieldSpec,children:ie.jsx(SL,{...n})}));function j4(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldColor.tsx",e="81b03af9ad032d255df7823d843b73e8fa5e3f61",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldColor.tsx",statementMap:{0:{start:{line:4,column:19},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:145}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:19},end:{line:4,column:20}},loc:{start:{line:4,column:30},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldColor.tsx"],names:[],mappings:"AAeM;AAfN,OAAO,WAAW;AAClB,OAAO,gBAAwC;AAW/C,MAAM,aAAwC,CAAC,UAAU;AACvD,SACE,oBAAC,SAAM,OAAO,MAAM,OAAO,WAAW,MAAM,WAC1C,8BAAC,cAAY,GAAG,OAAO,GACzB;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"81b03af9ad032d255df7823d843b73e8fa5e3f61"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return j4=function(){return s},s}j4();j4().s[0]++;const PDe=n=>(j4().f[0]++,j4().s[1]++,ie.jsx(Ls,{label:n.label,fieldSpec:n.fieldSpec,children:ie.jsx(wL,{...n})}));function N4(){var n="/home/runner/work/maputnik/maputnik/src/libs/field-spec-additional.ts",e="3fd72cd1ec4be346f0d6d854a97e371e1b9c2997",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/field-spec-additional.ts",statementMap:{0:{start:{line:1,column:13},end:{line:32,column:2}},1:{start:{line:1,column:21},end:{line:32,column:1}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:1,column:13},end:{line:1,column:14}},loc:{start:{line:1,column:21},end:{line:32,column:1}},line:1}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/field-spec-additional.ts"],names:[],mappings:"AAEA,MAAM,OAAO,CAAC,OAAkB;AAAA,EAC9B,UAAU;AAAA,IACR,uBAAuB;AAAA,MACrB,OAAO,EAAE,uBAAuB;AAAA,MAChC,KAAK,EAAE,yCAAyC;AAAA,MAChD,QAAQ;AAAA,MACR,gBAAgB,EAAE,YAAY;AAAA,IAChC;AAAA,IACA,4BAA4B;AAAA,MAC1B,OAAO,EAAE,4BAA4B;AAAA,MACrC,KAAK,EAAE,iDAAiD;AAAA,MACxD,QAAQ;AAAA,MACR,gBAAgB,EAAE,YAAY;AAAA,IAChC;AAAA,IACA,qBAAqB;AAAA,MACnB,OAAO,EAAE,qBAAqB;AAAA,MAC9B,KAAK,EAAE,0BAA0B;AAAA,MACjC,QAAQ;AAAA,MACR,gBAAgB,EAAE,YAAY;AAAA,IAChC;AAAA,IACA,yBAAyB;AAAA,MACvB,OAAO,EAAE,yBAAyB;AAAA,MAClC,KAAK,EAAE,8CAA8C;AAAA,MACrD,QAAQ;AAAA,MACR,gBAAgB,EAAE,YAAY;AAAA,IAChC;AAAA,IACA,gBAAgB;AAAA,MACd,OAAO,EAAE,gBAAgB;AAAA,MACzB,KAAK,EAAE,sDAAsD;AAAA,IAC/D;AAAA,EACF;AACF;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"3fd72cd1ec4be346f0d6d854a97e371e1b9c2997"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return N4=function(){return s},s}N4();N4().s[0]++;const iae=n=>(N4().f[0]++,N4().s[1]++,{maputnik:{maptiler_access_token:{label:n("MapTiler Access Token"),doc:n("Public access token for MapTiler Cloud."),docUrl:"https://docs.maptiler.com/cloud/api/authentication-key/",docUrlLinkText:n("Learn More")},thunderforest_access_token:{label:n("Thunderforest Access Token"),doc:n("Public access token for Thunderforest services."),docUrl:"https://www.thunderforest.com/docs/apikeys/",docUrlLinkText:n("Learn More")},stadia_access_token:{label:n("Stadia Maps API Key"),doc:n("API key for Stadia Maps."),docUrl:"https://docs.stadiamaps.com/authentication/",docUrlLinkText:n("Learn More")},locationiq_access_token:{label:n("LocationIQ Access Token"),doc:n("Public access token for LocationIQ services."),docUrl:"https://docs.locationiq.com/docs/maps",docUrlLinkText:n("Learn More")},style_renderer:{label:n("Style Renderer"),doc:n("Choose the default Maputnik renderer for this style.")}}});function Sn(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalSettings.tsx",e="99e5ed3645da84d03156e916f41e6bd97a8da4f4",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalSettings.tsx",statementMap:{0:{start:{line:16,column:23},end:{line:18,column:5}},1:{start:{line:19,column:4},end:{line:23,column:5}},2:{start:{line:20,column:6},end:{line:20,column:34}},3:{start:{line:22,column:6},end:{line:22,column:35}},4:{start:{line:24,column:4},end:{line:27,column:7}},5:{start:{line:30,column:18},end:{line:32,column:5}},6:{start:{line:33,column:4},end:{line:37,column:5}},7:{start:{line:34,column:6},end:{line:34,column:29}},8:{start:{line:36,column:6},end:{line:36,column:30}},9:{start:{line:38,column:4},end:{line:41,column:7}},10:{start:{line:44,column:20},end:{line:46,column:5}},11:{start:{line:47,column:4},end:{line:51,column:5}},12:{start:{line:48,column:6},end:{line:48,column:31}},13:{start:{line:50,column:6},end:{line:50,column:32}},14:{start:{line:52,column:4},end:{line:55,column:7}},15:{start:{line:58,column:23},end:{line:60,column:5}},16:{start:{line:61,column:4},end:{line:65,column:5}},17:{start:{line:62,column:6},end:{line:62,column:29}},18:{start:{line:64,column:6},end:{line:64,column:30}},19:{start:{line:66,column:4},end:{line:69,column:7}},20:{start:{line:72,column:25},end:{line:74,column:5}},21:{start:{line:75,column:4},end:{line:79,column:5}},22:{start:{line:76,column:6},end:{line:76,column:36}},23:{start:{line:78,column:6},end:{line:78,column:37}},24:{start:{line:80,column:4},end:{line:80,column:44}},25:{start:{line:83,column:21},end:{line:83,column:55}},26:{start:{line:84,column:54},end:{line:84,column:64}},27:{start:{line:85,column:16},end:{line:85,column:38}},28:{start:{line:86,column:18},end:{line:86,column:49}},29:{start:{line:87,column:23},end:{line:87,column:59}},30:{start:{line:88,column:20},end:{line:88,column:53}},31:{start:{line:89,column:23},end:{line:89,column:59}},32:{start:{line:90,column:4},end:{line:335,column:6}},33:{start:{line:105,column:35},end:{line:105,column:74}},34:{start:{line:115,column:35},end:{line:115,column:75}},35:{start:{line:125,column:35},end:{line:125,column:76}},36:{start:{line:135,column:35},end:{line:135,column:76}},37:{start:{line:145,column:35},end:{line:145,column:104}},38:{start:{line:155,column:35},end:{line:155,column:105}},39:{start:{line:165,column:35},end:{line:165,column:98}},40:{start:{line:175,column:35},end:{line:175,column:102}},41:{start:{line:187,column:35},end:{line:187,column:76}},42:{start:{line:197,column:35},end:{line:197,column:74}},43:{start:{line:207,column:35},end:{line:207,column:77}},44:{start:{line:217,column:35},end:{line:217,column:75}},45:{start:{line:229,column:35},end:{line:229,column:76}},46:{start:{line:239,column:35},end:{line:239,column:75}},47:{start:{line:249,column:35},end:{line:249,column:79}},48:{start:{line:261,column:35},end:{line:261,column:78}},49:{start:{line:271,column:35},end:{line:271,column:78}},50:{start:{line:281,column:35},end:{line:281,column:84}},51:{start:{line:291,column:35},end:{line:291,column:80}},52:{start:{line:301,column:35},end:{line:301,column:83}},53:{start:{line:316,column:35},end:{line:316,column:67}},54:{start:{line:330,column:35},end:{line:330,column:87}},55:{start:{line:338,column:22},end:{line:338,column:62}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:44},end:{line:28,column:3}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:29,column:2},end:{line:29,column:3}},loc:{start:{line:29,column:39},end:{line:42,column:3}},line:29},2:{name:"(anonymous_2)",decl:{start:{line:43,column:2},end:{line:43,column:3}},loc:{start:{line:43,column:41},end:{line:56,column:3}},line:43},3:{name:"(anonymous_3)",decl:{start:{line:57,column:2},end:{line:57,column:3}},loc:{start:{line:57,column:30},end:{line:70,column:3}},line:57},4:{name:"(anonymous_4)",decl:{start:{line:71,column:2},end:{line:71,column:3}},loc:{start:{line:71,column:39},end:{line:81,column:3}},line:71},5:{name:"(anonymous_5)",decl:{start:{line:82,column:2},end:{line:82,column:3}},loc:{start:{line:82,column:11},end:{line:336,column:3}},line:82},6:{name:"(anonymous_6)",decl:{start:{line:105,column:24},end:{line:105,column:25}},loc:{start:{line:105,column:35},end:{line:105,column:74}},line:105},7:{name:"(anonymous_7)",decl:{start:{line:115,column:24},end:{line:115,column:25}},loc:{start:{line:115,column:35},end:{line:115,column:75}},line:115},8:{name:"(anonymous_8)",decl:{start:{line:125,column:24},end:{line:125,column:25}},loc:{start:{line:125,column:35},end:{line:125,column:76}},line:125},9:{name:"(anonymous_9)",decl:{start:{line:135,column:24},end:{line:135,column:25}},loc:{start:{line:135,column:35},end:{line:135,column:76}},line:135},10:{name:"(anonymous_10)",decl:{start:{line:145,column:24},end:{line:145,column:25}},loc:{start:{line:145,column:35},end:{line:145,column:104}},line:145},11:{name:"(anonymous_11)",decl:{start:{line:155,column:24},end:{line:155,column:25}},loc:{start:{line:155,column:35},end:{line:155,column:105}},line:155},12:{name:"(anonymous_12)",decl:{start:{line:165,column:24},end:{line:165,column:25}},loc:{start:{line:165,column:35},end:{line:165,column:98}},line:165},13:{name:"(anonymous_13)",decl:{start:{line:175,column:24},end:{line:175,column:25}},loc:{start:{line:175,column:35},end:{line:175,column:102}},line:175},14:{name:"(anonymous_14)",decl:{start:{line:187,column:24},end:{line:187,column:25}},loc:{start:{line:187,column:35},end:{line:187,column:76}},line:187},15:{name:"(anonymous_15)",decl:{start:{line:197,column:24},end:{line:197,column:25}},loc:{start:{line:197,column:35},end:{line:197,column:74}},line:197},16:{name:"(anonymous_16)",decl:{start:{line:207,column:24},end:{line:207,column:25}},loc:{start:{line:207,column:35},end:{line:207,column:77}},line:207},17:{name:"(anonymous_17)",decl:{start:{line:217,column:24},end:{line:217,column:25}},loc:{start:{line:217,column:35},end:{line:217,column:75}},line:217},18:{name:"(anonymous_18)",decl:{start:{line:229,column:24},end:{line:229,column:25}},loc:{start:{line:229,column:35},end:{line:229,column:76}},line:229},19:{name:"(anonymous_19)",decl:{start:{line:239,column:24},end:{line:239,column:25}},loc:{start:{line:239,column:35},end:{line:239,column:75}},line:239},20:{name:"(anonymous_20)",decl:{start:{line:249,column:24},end:{line:249,column:25}},loc:{start:{line:249,column:35},end:{line:249,column:79}},line:249},21:{name:"(anonymous_21)",decl:{start:{line:261,column:24},end:{line:261,column:25}},loc:{start:{line:261,column:35},end:{line:261,column:78}},line:261},22:{name:"(anonymous_22)",decl:{start:{line:271,column:24},end:{line:271,column:25}},loc:{start:{line:271,column:35},end:{line:271,column:78}},line:271},23:{name:"(anonymous_23)",decl:{start:{line:281,column:24},end:{line:281,column:25}},loc:{start:{line:281,column:35},end:{line:281,column:84}},line:281},24:{name:"(anonymous_24)",decl:{start:{line:291,column:24},end:{line:291,column:25}},loc:{start:{line:291,column:35},end:{line:291,column:80}},line:291},25:{name:"(anonymous_25)",decl:{start:{line:301,column:24},end:{line:301,column:25}},loc:{start:{line:301,column:35},end:{line:301,column:83}},line:301},26:{name:"(anonymous_26)",decl:{start:{line:316,column:24},end:{line:316,column:25}},loc:{start:{line:316,column:35},end:{line:316,column:67}},line:316},27:{name:"(anonymous_27)",decl:{start:{line:330,column:24},end:{line:330,column:25}},loc:{start:{line:330,column:35},end:{line:330,column:87}},line:330}},branchMap:{0:{loc:{start:{line:19,column:4},end:{line:23,column:5}},type:"if",locations:[{start:{line:19,column:4},end:{line:23,column:5}},{start:{line:21,column:11},end:{line:23,column:5}}],line:19},1:{loc:{start:{line:33,column:4},end:{line:37,column:5}},type:"if",locations:[{start:{line:33,column:4},end:{line:37,column:5}},{start:{line:35,column:11},end:{line:37,column:5}}],line:33},2:{loc:{start:{line:47,column:4},end:{line:51,column:5}},type:"if",locations:[{start:{line:47,column:4},end:{line:51,column:5}},{start:{line:49,column:11},end:{line:51,column:5}}],line:47},3:{loc:{start:{line:61,column:4},end:{line:65,column:5}},type:"if",locations:[{start:{line:61,column:4},end:{line:65,column:5}},{start:{line:63,column:11},end:{line:65,column:5}}],line:61},4:{loc:{start:{line:75,column:4},end:{line:79,column:5}},type:"if",locations:[{start:{line:75,column:4},end:{line:79,column:5}},{start:{line:77,column:11},end:{line:79,column:5}}],line:75},5:{loc:{start:{line:83,column:21},end:{line:83,column:55}},type:"binary-expr",locations:[{start:{line:83,column:21},end:{line:83,column:49}},{start:{line:83,column:53},end:{line:83,column:55}}],line:83},6:{loc:{start:{line:86,column:18},end:{line:86,column:49}},type:"binary-expr",locations:[{start:{line:86,column:18},end:{line:86,column:43}},{start:{line:86,column:47},end:{line:86,column:49}}],line:86},7:{loc:{start:{line:87,column:23},end:{line:87,column:59}},type:"binary-expr",locations:[{start:{line:87,column:23},end:{line:87,column:53}},{start:{line:87,column:57},end:{line:87,column:59}}],line:87},8:{loc:{start:{line:88,column:20},end:{line:88,column:53}},type:"binary-expr",locations:[{start:{line:88,column:20},end:{line:88,column:47}},{start:{line:88,column:51},end:{line:88,column:53}}],line:88},9:{loc:{start:{line:89,column:23},end:{line:89,column:59}},type:"binary-expr",locations:[{start:{line:89,column:23},end:{line:89,column:53}},{start:{line:89,column:57},end:{line:89,column:59}}],line:89},10:{loc:{start:{line:185,column:21},end:{line:185,column:42}},type:"binary-expr",locations:[{start:{line:185,column:21},end:{line:185,column:36}},{start:{line:185,column:40},end:{line:185,column:42}}],line:185},11:{loc:{start:{line:315,column:21},end:{line:315,column:55}},type:"binary-expr",locations:[{start:{line:315,column:21},end:{line:315,column:49}},{start:{line:315,column:53},end:{line:315,column:55}}],line:315},12:{loc:{start:{line:329,column:21},end:{line:329,column:62}},type:"binary-expr",locations:[{start:{line:329,column:21},end:{line:329,column:50}},{start:{line:329,column:54},end:{line:329,column:62}}],line:329}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalSettings.tsx"],names:[],mappings:"AAmIM,SACE,KADF;AAnIN,OAAO,WAAW;AAClB,OAAO,YAAY;AAEnB,SAA+B,uBAAuB;AAEtD,OAAO,gBAAgB;AACvB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,cAAc;AACrB,OAAO,iBAAiB;AACxB,OAAO,eAAe;AACtB,OAAO,gBAAgB;AACvB,OAAO,WAAW;AAClB,OAAO,yBAAyB;AAWhC,MAAM,8BAA8B,MAAM,UAAsC;AAAA,EAC9E,yBAAyB,UAAyC,OAA2B;AAC3F,UAAM,aAAa;AAAA,MACjB,GAAG,KAAK,MAAM,SAAS;AAAA,IACzB;AAEA,QAAI,UAAU,QAAW;AACvB,aAAO,WAAW,QAAQ;AAAA,IAC5B,OACK;AACH,iBAAW,QAAQ,IAAI;AAAA,IACzB;AAEA,SAAK,MAAM,eAAe;AAAA,MACxB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,oBAAoB,UAAoC,OAAY;AAClE,UAAM,QAAQ;AAAA,MACZ,GAAG,KAAK,MAAM,SAAS;AAAA,IACzB;AAEA,QAAI,UAAU,QAAW;AACvB,aAAO,MAAM,QAAQ;AAAA,IACvB,OACK;AAEH,YAAM,QAAQ,IAAI;AAAA,IACpB;AAEA,SAAK,MAAM,eAAe;AAAA,MACxB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,sBAAsB,UAAsC,OAAY;AACtE,UAAM,UAAU;AAAA,MACd,GAAG,KAAK,MAAM,SAAS;AAAA,IACzB;AAEA,QAAI,UAAU,QAAW;AACvB,aAAO,QAAQ,QAAQ;AAAA,IACzB,OACK;AAEH,cAAQ,QAAQ,IAAI;AAAA,IACtB;AAEA,SAAK,MAAM,eAAe;AAAA,MACxB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,qBAAqB,OAAY;AAC/B,UAAM,aAAa;AAAA,MACjB,GAAG,KAAK,MAAM,SAAS;AAAA,IACzB;AAEA,QAAI,UAAU,QAAW;AACvB,aAAO,WAAW;AAAA,IACpB,OACK;AACH,iBAAW,OAAO;AAAA,IACpB;AAEA,SAAK,MAAM,eAAe;AAAA,MACxB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,oBAAoB,UAA8C,OAAY;AAC5E,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,IAChB;AAEA,QAAI,UAAU,QAAW;AAEvB,aAAO,aAAa,QAAQ;AAAA,IAC9B,OACK;AAEH,mBAAa,QAAQ,IAAI;AAAA,IAC3B;AACA,SAAK,MAAM,eAAe,YAAY;AAAA,EACxC;AAAA,EAEA,SAAS;AACP,UAAM,WAAW,KAAK,MAAM,SAAS,YAAY,CAAC;AAClD,UAAM,EAAC,GAAG,0BAA0B,SAAQ,IAAI,KAAK;AACrD,UAAM,MAAM,oBAAoB,CAAC;AAEjC,UAAM,QAAQ,KAAK,MAAM,SAAS,SAAS,CAAC;AAC5C,UAAM,aAAa,KAAK,MAAM,SAAS,cAAc,CAAC;AACtD,UAAM,UAAU,KAAK,MAAM,SAAS,WAAW,CAAC;AAChD,UAAM,aAAa,KAAK,MAAM,SAAS,cAAc,CAAC;AAEtD,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,gBAAgB;AAAA,QAEzB,+BAAC,SAAI,WAAU,kBACb;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,MAAM;AAAA,cACf,WAAW,OAAO,MAAM;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,KAAK,MAAM,SAAS;AAAA,cAC3B,UAAU,CAAC,UAAU,KAAK,oBAAoB,QAAQ,KAAK;AAAA;AAAA,UAC7D;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,OAAO;AAAA,cAChB,WAAW,EAAC,KAAK,EAAE,6DAA6D,EAAC;AAAA,cACjF,eAAY;AAAA,cACZ,OAAQ,KAAK,MAAM,SAAiB;AAAA,cACpC,UAAU,CAAC,UAAU,KAAK,oBAAoB,SAAS,KAAK;AAAA;AAAA,UAC9D;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,EAAE,YAAY;AAAA,cACrB,eAAY;AAAA,cACZ,OAAO,KAAK,MAAM,SAAS;AAAA,cAC3B,UAAU,CAAC,UAAU,KAAK,oBAAoB,UAAU,KAAK;AAAA;AAAA,UAC/D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,YAAY;AAAA,cACrB,WAAW,OAAO,MAAM;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,KAAK,MAAM,SAAS;AAAA,cAC3B,UAAU,CAAC,UAAU,KAAK,oBAAoB,UAAU,KAAK;AAAA;AAAA,UAC/D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,sBAAsB;AAAA,cAC1C,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,SAAS,oCAAoC;AAAA,cACpD,UAAU,CAAC,UAAU,yBAAyB,sCAAsC,KAAK;AAAA;AAAA,UAC3F;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,2BAA2B;AAAA,cAC/C,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,SAAS,qCAAqC;AAAA,cACrD,UAAU,CAAC,UAAU,yBAAyB,uCAAuC,KAAK;AAAA;AAAA,UAC5F;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,oBAAoB;AAAA,cACxC,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,SAAS,8BAA8B;AAAA,cAC9C,UAAU,CAAC,UAAU,yBAAyB,gCAAgC,KAAK;AAAA;AAAA,UACrF;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,wBAAwB;AAAA,cAC5C,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,SAAS,kCAAkC;AAAA,cAClD,UAAU,CAAC,UAAU,yBAAyB,oCAAoC,KAAK;AAAA;AAAA,UACzF;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,QAAQ;AAAA,cACjB,WAAW,OAAO,MAAM;AAAA,cACxB,QAAQ;AAAA,cACR,MAAK;AAAA,cACL,OAAO,SAAS,UAAU,CAAC;AAAA,cAC3B,SAAS,CAAC,GAAG,CAAC;AAAA,cACd,UAAU,CAAC,UAAU,KAAK,oBAAoB,UAAU,KAAK;AAAA;AAAA,UAC/D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,MAAM;AAAA,cACf,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,SAAS;AAAA,cAChB,SAAS;AAAA,cACT,UAAU,CAAC,UAAU,KAAK,oBAAoB,QAAQ,KAAK;AAAA;AAAA,UAC7D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,SAAS;AAAA,cAClB,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,SAAS;AAAA,cAChB,SAAS,OAAO,MAAM,QAAQ;AAAA,cAC9B,UAAU,CAAC,UAAU,KAAK,oBAAoB,WAAW,KAAK;AAAA;AAAA,UAChE;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,OAAO;AAAA,cAChB,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,SAAS;AAAA,cAChB,SAAS,OAAO,MAAM,MAAM;AAAA,cAC5B,UAAU,CAAC,UAAU,KAAK,oBAAoB,SAAS,KAAK;AAAA;AAAA,UAC9D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,cAAc;AAAA,cACvB,WAAW,OAAO,MAAM;AAAA,cACxB,MAAK;AAAA,cACL,OAAO,MAAM;AAAA,cACb,SAAS,OAAO,KAAK,OAAO,MAAM,OAAO,MAAM;AAAA,cAC/C,SAAS,OAAO,MAAM,OAAO;AAAA,cAC7B,UAAU,CAAC,UAAU,KAAK,oBAAoB,UAAU,KAAK;AAAA;AAAA,UAC/D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,aAAa;AAAA,cACtB,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,MAAM;AAAA,cACb,SAAS,OAAO,MAAM,MAAM;AAAA,cAC5B,UAAU,CAAC,UAAU,KAAK,oBAAoB,SAAS,KAAK;AAAA;AAAA,UAC9D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,iBAAiB;AAAA,cAC1B,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,MAAM;AAAA,cACb,SAAS,OAAO,MAAM,UAAU;AAAA,cAChC,UAAU,CAAC,UAAU,KAAK,oBAAoB,aAAa,KAAK;AAAA;AAAA,UAClE;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,gBAAgB;AAAA,cACzB,WAAW,OAAO,MAAM;AAAA,cACxB,MAAK;AAAA,cACL,QAAQ,OAAO,MAAM,SAAS;AAAA,cAC9B,OAAO,MAAM;AAAA,cACb,SAAS,OAAO,MAAM,SAAS;AAAA,cAC/B,UAAU,CAAC,UAAU,KAAK,oBAAoB,YAAY,KAAK;AAAA;AAAA,UACjE;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,gBAAgB;AAAA,cACzB,WAAW,OAAO,QAAQ;AAAA,cAC1B,eAAY;AAAA,cACZ,OAAO,QAAQ;AAAA,cACf,UAAU,CAAC,UAAU,KAAK,sBAAsB,UAAU,KAAK;AAAA;AAAA,UACjE;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,sBAAsB;AAAA,cAC/B,WAAW,OAAO,QAAQ;AAAA,cAC1B,OAAO,QAAQ;AAAA,cACf,SAAS,OAAO,QAAQ,aAAa;AAAA,cACrC,UAAU,CAAC,UAAU,KAAK,sBAAsB,gBAAgB,KAAK;AAAA;AAAA,UACvE;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,kBAAkB;AAAA,cAC3B,WAAW,OAAO,WAAW;AAAA,cAC7B,OAAO,WAAW;AAAA,cAClB,SAAS,OAAO,WAAW,MAAM;AAAA,cACjC,UAAU,CAAC,UAAU,KAAK,yBAAyB,SAAS,KAAK;AAAA;AAAA,UACnE;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,qBAAqB;AAAA,cAC9B,WAAW,OAAO,WAAW;AAAA,cAC7B,OAAO,WAAW;AAAA,cAClB,SAAS,OAAO,WAAW,SAAS;AAAA,cACpC,UAAU,CAAC,UAAU,KAAK,yBAAyB,YAAY,KAAK;AAAA;AAAA,UACtE;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,YAAY;AAAA,cACrB,eAAY;AAAA,cACZ,SAAS;AAAA,gBACP,CAAC,IAAI,WAAW;AAAA,gBAChB,CAAC,YAAY,UAAU;AAAA,gBACvB,CAAC,SAAS,OAAO;AAAA,gBACjB,CAAC,wBAAwB,sBAAsB;AAAA,cACjD;AAAA,cACA,OAAO,YAAY,MAAM,SAAS,KAAK;AAAA,cACvC,UAAU,CAAC,UAAU,KAAK,qBAAqB,KAAK;AAAA;AAAA,UACtD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,eAAe;AAAA,cACnC,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,SAAS;AAAA,gBACP,CAAC,UAAU,eAAe;AAAA,gBAC1B,CAAC,MAAM,EAAE,4BAA4B,CAAC;AAAA,cACxC;AAAA,cACA,OAAO,SAAS,mBAAmB,KAAK;AAAA,cACxC,UAAU,CAAC,UAAU,yBAAyB,qBAAqB,KAAK;AAAA;AAAA,UAC1E;AAAA,WACF;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,gBAAgB,gBAAgB,EAAE,qBAAqB;AAC7D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"99e5ed3645da84d03156e916f41e6bd97a8da4f4"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Sn=function(){return s},s}Sn();class UDe extends En.Component{changeTransitionProperty(e,t){Sn().f[0]++;const i=(Sn().s[0]++,{...this.props.mapStyle.transition});Sn().s[1]++,t===void 0?(Sn().b[0][0]++,Sn().s[2]++,delete i[e]):(Sn().b[0][1]++,Sn().s[3]++,i[e]=t),Sn().s[4]++,this.props.onStyleChanged({...this.props.mapStyle,transition:i})}changeLightProperty(e,t){Sn().f[1]++;const i=(Sn().s[5]++,{...this.props.mapStyle.light});Sn().s[6]++,t===void 0?(Sn().b[1][0]++,Sn().s[7]++,delete i[e]):(Sn().b[1][1]++,Sn().s[8]++,i[e]=t),Sn().s[9]++,this.props.onStyleChanged({...this.props.mapStyle,light:i})}changeTerrainProperty(e,t){Sn().f[2]++;const i=(Sn().s[10]++,{...this.props.mapStyle.terrain});Sn().s[11]++,t===void 0?(Sn().b[2][0]++,Sn().s[12]++,delete i[e]):(Sn().b[2][1]++,Sn().s[13]++,i[e]=t),Sn().s[14]++,this.props.onStyleChanged({...this.props.mapStyle,terrain:i})}changeProjectionType(e){Sn().f[3]++;const t=(Sn().s[15]++,{...this.props.mapStyle.projection});Sn().s[16]++,e===void 0?(Sn().b[3][0]++,Sn().s[17]++,delete t.type):(Sn().b[3][1]++,Sn().s[18]++,t.type=e),Sn().s[19]++,this.props.onStyleChanged({...this.props.mapStyle,projection:t})}changeStyleProperty(e,t){Sn().f[4]++;const i=(Sn().s[20]++,{...this.props.mapStyle});Sn().s[21]++,t===void 0?(Sn().b[4][0]++,Sn().s[22]++,delete i[e]):(Sn().b[4][1]++,Sn().s[23]++,i[e]=t),Sn().s[24]++,this.props.onStyleChanged(i)}render(){Sn().f[5]++;const e=(Sn().s[25]++,Sn().b[5][0]++,this.props.mapStyle.metadata||(Sn().b[5][1]++,{})),{t,onChangeMetadataProperty:i,mapStyle:r}=(Sn().s[26]++,this.props),o=(Sn().s[27]++,iae(t)),s=(Sn().s[28]++,Sn().b[6][0]++,this.props.mapStyle.light||(Sn().b[6][1]++,{})),a=(Sn().s[29]++,Sn().b[7][0]++,this.props.mapStyle.transition||(Sn().b[7][1]++,{})),c=(Sn().s[30]++,Sn().b[8][0]++,this.props.mapStyle.terrain||(Sn().b[8][1]++,{})),h=(Sn().s[31]++,Sn().b[9][0]++,this.props.mapStyle.projection||(Sn().b[9][1]++,{}));return Sn().s[32]++,ie.jsx(C1,{"data-wd-key":"modal:settings",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:t("Style Settings"),children:ie.jsxs("div",{className:"modal:settings",children:[ie.jsx(md,{label:t("Name"),fieldSpec:Zr.$root.name,"data-wd-key":"modal:settings.name",value:this.props.mapStyle.name,onChange:m=>(Sn().f[6]++,Sn().s[33]++,this.changeStyleProperty("name",m))}),ie.jsx(md,{label:t("Owner"),fieldSpec:{doc:t("Owner ID of the style. Used by Mapbox or future style APIs.")},"data-wd-key":"modal:settings.owner",value:this.props.mapStyle.owner,onChange:m=>(Sn().f[7]++,Sn().s[34]++,this.changeStyleProperty("owner",m))}),ie.jsx(Bx,{fieldSpec:Zr.$root.sprite,label:t("Sprite URL"),"data-wd-key":"modal:settings.sprite",value:this.props.mapStyle.sprite,onChange:m=>(Sn().f[8]++,Sn().s[35]++,this.changeStyleProperty("sprite",m))}),ie.jsx(Bx,{label:t("Glyphs URL"),fieldSpec:Zr.$root.glyphs,"data-wd-key":"modal:settings.glyphs",value:this.props.mapStyle.glyphs,onChange:m=>(Sn().f[9]++,Sn().s[36]++,this.changeStyleProperty("glyphs",m))}),ie.jsx(md,{label:o.maputnik.maptiler_access_token.label,fieldSpec:o.maputnik.maptiler_access_token,"data-wd-key":"modal:settings.maputnik:openmaptiles_access_token",value:e["maputnik:openmaptiles_access_token"],onChange:m=>(Sn().f[10]++,Sn().s[37]++,i("maputnik:openmaptiles_access_token",m))}),ie.jsx(md,{label:o.maputnik.thunderforest_access_token.label,fieldSpec:o.maputnik.thunderforest_access_token,"data-wd-key":"modal:settings.maputnik:thunderforest_access_token",value:e["maputnik:thunderforest_access_token"],onChange:m=>(Sn().f[11]++,Sn().s[38]++,i("maputnik:thunderforest_access_token",m))}),ie.jsx(md,{label:o.maputnik.stadia_access_token.label,fieldSpec:o.maputnik.stadia_access_token,"data-wd-key":"modal:settings.maputnik:stadia_access_token",value:e["maputnik:stadia_access_token"],onChange:m=>(Sn().f[12]++,Sn().s[39]++,i("maputnik:stadia_access_token",m))}),ie.jsx(md,{label:o.maputnik.locationiq_access_token.label,fieldSpec:o.maputnik.locationiq_access_token,"data-wd-key":"modal:settings.maputnik:locationiq_access_token",value:e["maputnik:locationiq_access_token"],onChange:m=>(Sn().f[13]++,Sn().s[40]++,i("maputnik:locationiq_access_token",m))}),ie.jsx(rE,{label:t("Center"),fieldSpec:Zr.$root.center,length:2,type:"number",value:(Sn().b[10][0]++,r.center||(Sn().b[10][1]++,[])),default:[0,0],onChange:m=>(Sn().f[14]++,Sn().s[41]++,this.changeStyleProperty("center",m))}),ie.jsx(fm,{label:t("Zoom"),fieldSpec:Zr.$root.zoom,value:r.zoom,default:0,onChange:m=>(Sn().f[15]++,Sn().s[42]++,this.changeStyleProperty("zoom",m))}),ie.jsx(fm,{label:t("Bearing"),fieldSpec:Zr.$root.bearing,value:r.bearing,default:Zr.$root.bearing.default,onChange:m=>(Sn().f[16]++,Sn().s[43]++,this.changeStyleProperty("bearing",m))}),ie.jsx(fm,{label:t("Pitch"),fieldSpec:Zr.$root.pitch,value:r.pitch,default:Zr.$root.pitch.default,onChange:m=>(Sn().f[17]++,Sn().s[44]++,this.changeStyleProperty("pitch",m))}),ie.jsx(DDe,{label:t("Light anchor"),fieldSpec:Zr.light.anchor,name:"light-anchor",value:s.anchor,options:Object.keys(Zr.light.anchor.values),default:Zr.light.anchor.default,onChange:m=>(Sn().f[18]++,Sn().s[45]++,this.changeLightProperty("anchor",m))}),ie.jsx(PDe,{label:t("Light color"),fieldSpec:Zr.light.color,value:s.color,default:Zr.light.color.default,onChange:m=>(Sn().f[19]++,Sn().s[46]++,this.changeLightProperty("color",m))}),ie.jsx(fm,{label:t("Light intensity"),fieldSpec:Zr.light.intensity,value:s.intensity,default:Zr.light.intensity.default,onChange:m=>(Sn().f[20]++,Sn().s[47]++,this.changeLightProperty("intensity",m))}),ie.jsx(rE,{label:t("Light position"),fieldSpec:Zr.light.position,type:"number",length:Zr.light.position.length,value:s.position,default:Zr.light.position.default,onChange:m=>(Sn().f[21]++,Sn().s[48]++,this.changeLightProperty("position",m))}),ie.jsx(md,{label:t("Terrain source"),fieldSpec:Zr.terrain.source,"data-wd-key":"modal:settings.maputnik:terrain_source",value:c.source,onChange:m=>(Sn().f[22]++,Sn().s[49]++,this.changeTerrainProperty("source",m))}),ie.jsx(fm,{label:t("Terrain exaggeration"),fieldSpec:Zr.terrain.exaggeration,value:c.exaggeration,default:Zr.terrain.exaggeration.default,onChange:m=>(Sn().f[23]++,Sn().s[50]++,this.changeTerrainProperty("exaggeration",m))}),ie.jsx(fm,{label:t("Transition delay"),fieldSpec:Zr.transition.delay,value:a.delay,default:Zr.transition.delay.default,onChange:m=>(Sn().f[24]++,Sn().s[51]++,this.changeTransitionProperty("delay",m))}),ie.jsx(fm,{label:t("Transition duration"),fieldSpec:Zr.transition.duration,value:a.duration,default:Zr.transition.duration.default,onChange:m=>(Sn().f[25]++,Sn().s[52]++,this.changeTransitionProperty("duration",m))}),ie.jsx(F4,{label:t("Projection"),"data-wd-key":"modal:settings.projection",options:[["","Undefined"],["mercator","Mercator"],["globe","Globe"],["vertical-perspective","Vertical Perspective"]],value:(Sn().b[11][0]++,h?.type?.toString()||(Sn().b[11][1]++,"")),onChange:m=>(Sn().f[26]++,Sn().s[53]++,this.changeProjectionType(m))}),ie.jsx(F4,{label:o.maputnik.style_renderer.label,fieldSpec:o.maputnik.style_renderer,"data-wd-key":"modal:settings.maputnik:renderer",options:[["mlgljs","MapLibreGL JS"],["ol",t("Open Layers (experimental)")]],value:(Sn().b[12][0]++,e["maputnik:renderer"]||(Sn().b[12][1]++,"mlgljs")),onChange:m=>(Sn().f[27]++,Sn().s[54]++,i("maputnik:renderer",m))})]})})}}const KDe=(Sn().s[55]++,No()(UDe));var Iw={exports:{}},LDe=Iw.exports,GV;function FDe(){return GV||(GV=1,(function(n,e){(function(t,i,r){n.exports=r(),n.exports.default=r()})("slugify",LDe,function(){var t=JSON.parse(`{"$":"dollar","%":"percent","&":"and","<":"less",">":"greater","|":"or","":"cent","":"pound","":"currency","":"yen","":"(c)","":"a","":"(r)","":"o","":"A","":"A","":"A","":"A","":"A","":"A","":"AE","":"C","":"E","":"E","":"E","":"E","":"I","":"I","":"I","":"I","":"D","":"N","":"O","":"O","":"O","":"O","":"O","":"O","":"U","":"U","":"U","":"U","":"Y","":"TH","":"ss","":"a","":"a","":"a","":"a","":"a","":"a","":"ae","":"c","":"e","":"e","":"e","":"e","":"i","":"i","":"i","":"i","":"d","":"n","":"o","":"o","":"o","":"o","":"o","":"o","":"u","":"u","":"u","":"u","":"y","":"th","":"y","":"A","":"a","":"A","":"a","":"A","":"a","":"C","":"c","":"C","":"c","":"D","":"d","":"DJ","":"dj","":"E","":"e","":"E","":"e","":"e","":"e","":"E","":"e","":"G","":"g","":"G","":"g","":"I","":"i","":"i","":"i","":"I","":"i","":"I","":"i","":"k","":"k","":"L","":"l","":"L","":"l","":"L","":"l","":"N","":"n","":"N","":"n","":"N","":"n","":"O","":"o","":"O","":"o","":"OE","":"oe","":"R","":"r","":"R","":"r","":"S","":"s","":"S","":"s","":"S","":"s","":"T","":"t","":"T","":"t","":"U","":"u","":"u","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"z","":"Z","":"z","":"Z","":"z","":"E","":"f","":"O","":"o","":"U","":"u","":"LJ","":"lj","":"NJ","":"nj","":"S","":"s","":"T","":"t","":"e","":"o","":"A","":"E","":"H","":"I","":"O","":"Y","":"W","":"i","":"A","":"B","":"G","":"D","":"E","":"Z","":"H","":"8","":"I","":"K","":"L","":"M","":"N","":"3","":"O","":"P","":"R","":"S","":"T","":"Y","":"F","":"X","":"PS","":"W","":"I","":"Y","":"a","":"e","":"h","":"i","":"y","":"a","":"b","":"g","":"d","":"e","":"z","":"h","":"8","":"i","":"k","":"l","":"m","":"n","":"3","":"o","":"p","":"r","":"s","":"s","":"t","":"y","":"f","":"x","":"ps","":"w","":"i","":"y","":"o","":"y","":"w","":"Yo","":"DJ","":"Ye","":"I","":"Yi","":"J","":"LJ","":"NJ","":"C","":"DZ","":"A","":"B","":"V","":"G","":"D","":"E","":"Zh","":"Z","":"I","":"J","":"K","":"L","":"M","":"N","":"O","":"P","":"R","":"S","":"T","":"U","":"F","":"H","":"C","":"Ch","":"Sh","":"Sh","":"U","":"Y","":"","":"E","":"Yu","":"Ya","":"a","":"b","":"v","":"g","":"d","":"e","":"zh","":"z","":"i","":"j","":"k","":"l","":"m","":"n","":"o","":"p","":"r","":"s","":"t","":"u","":"f","":"h","":"c","":"ch","":"sh","":"sh","":"u","":"y","":"","":"e","":"yu","":"ya","":"yo","":"dj","":"ye","":"i","":"yi","":"j","":"lj","":"nj","":"c","":"u","":"dz","":"G","":"g","":"GH","":"gh","":"KH","":"kh","":"NG","":"ng","":"UE","":"ue","":"U","":"u","":"H","":"h","":"AE","":"ae","":"OE","":"oe","":"A","":"B","":"G","":"D","":"E","":"Z","":"E'","":"Y'","":"T'","":"JH","":"I","":"L","":"X","":"C'","":"K","":"H","":"D'","":"GH","":"TW","":"M","":"Y","":"N","":"SH","":"CH","":"P","":"J","":"R'","":"S","":"V","":"T","":"R","":"C","":"P'","":"Q'","":"O''","":"F","":"EV","":"a","":"aa","":"a","":"u","":"i","":"e","":"a","":"b","":"h","":"t","":"th","":"j","":"h","":"kh","":"d","":"th","":"r","":"z","":"s","":"sh","":"s","":"dh","":"t","":"z","":"a","":"gh","":"f","":"q","":"k","":"l","":"m","":"n","":"h","":"w","":"a","":"y","":"an","":"on","":"en","":"a","":"u","":"e","":"","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"p","":"ch","":"zh","":"k","":"g","":"y","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"baht","":"a","":"b","":"g","":"d","":"e","":"v","":"z","":"t","":"i","":"k","":"l","":"m","":"n","":"o","":"p","":"zh","":"r","":"s","":"t","":"u","":"f","":"k","":"gh","":"q","":"sh","":"ch","":"ts","":"dz","":"ts","":"ch","":"kh","":"j","":"h","":"S","":"s","":"W","":"w","":"W","":"w","":"W","":"w","":"SS","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"I","":"i","":"I","":"i","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"Y","":"y","":"Y","":"y","":"Y","":"y","":"Y","":"y","":"-","":"'","":"'","":"\\"","":"\\"","":"\\"","":"+","":"*","":"...","":"ecu","":"cruzeiro","":"french franc","":"lira","":"mill","":"naira","":"peseta","":"rupee","":"won","":"new shequel","":"dong","":"euro","":"kip","":"tugrik","":"drachma","":"penny","":"peso","":"guarani","":"austral","":"hryvnia","":"cedi","":"kazakhstani tenge","":"indian rupee","":"turkish lira","":"russian ruble","":"bitcoin","":"sm","":"tm","":"d","":"delta","":"sum","":"infinity","":"love","":"yuan","":"yen","":"rial","":"laa","":"laa","":"lai","":"la"}`),i=JSON.parse('{"bg":{"":"Y","":"Ts","":"Sht","":"A","":"Y","":"y","":"ts","":"sht","":"a","":"y"},"de":{"":"AE","":"ae","":"OE","":"oe","":"UE","":"ue","":"ss","%":"prozent","&":"und","|":"oder","":"summe","":"unendlich","":"liebe"},"es":{"%":"por ciento","&":"y","<":"menor que",">":"mayor que","|":"o","":"centavos","":"libras","":"moneda","":"francos","":"suma","":"infinito","":"amor"},"fr":{"%":"pourcent","&":"et","<":"plus petit",">":"plus grand","|":"ou","":"centime","":"livre","":"devise","":"franc","":"somme","":"infini","":"amour"},"pt":{"%":"porcento","&":"e","<":"menor",">":"maior","|":"ou","":"centavo","":"soma","":"libra","":"infinito","":"amor"},"uk":{"":"Y","":"y","":"Y","":"y","":"Ts","":"ts","":"Kh","":"kh","":"Shch","":"shch","":"H","":"h"},"vi":{"":"D","":"d"},"da":{"":"OE","":"oe","":"AA","":"aa","%":"procent","&":"og","|":"eller","$":"dollar","<":"mindre end",">":"strre end"},"nb":{"&":"og","":"AA","":"AE","":"OE","":"aa","":"ae","":"oe"},"it":{"&":"e"},"nl":{"&":"en"},"sv":{"&":"och","":"AA","":"AE","":"OE","":"aa","":"ae","":"oe"}}');function r(o,s){if(typeof o!="string")throw new Error("slugify: string argument expected");s=typeof s=="string"?{replacement:s}:s||{};var a=i[s.locale]||{},c=s.replacement===void 0?"-":s.replacement,h=s.trim===void 0?!0:s.trim,m=o.normalize().split("").reduce(function(y,M){var x=a[M];return x===void 0&&(x=t[M]),x===void 0&&(x=M),x===c&&(x=" "),y+x.replace(s.remove||/[^\w\s$*_+~.()'"!\-:@]+/g,"")},"");return s.strict&&(m=m.replace(/[^A-Za-z0-9\s]/g,"")),h&&(m=m.trim()),m=m.replace(/\s+/g,c),s.lower&&(m=m.toLowerCase()),m}return r.extend=function(o){Object.assign(t,o)},r})})(Iw)),Iw.exports}var zDe=FDe();const jDe=eu(zDe);var kw={exports:{}},NDe=kw.exports,WV;function GDe(){return WV||(WV=1,(function(n,e){(function(t,i){i()})(NDe,function(){function t(h,m){return typeof m>"u"?m={autoBom:!1}:typeof m!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),m={autoBom:!m}),m.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(h.type)?new Blob(["\uFEFF",h],{type:h.type}):h}function i(h,m,y){var M=new XMLHttpRequest;M.open("GET",h),M.responseType="blob",M.onload=function(){c(M.response,m,y)},M.onerror=function(){console.error("could not download file")},M.send()}function r(h){var m=new XMLHttpRequest;m.open("HEAD",h,!1);try{m.send()}catch{}return 200<=m.status&&299>=m.status}function o(h){try{h.dispatchEvent(new MouseEvent("click"))}catch{var m=document.createEvent("MouseEvents");m.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),h.dispatchEvent(m)}}var s=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof window=="object"&&window.global===window?window:void 0,a=s.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),c=s.saveAs||(typeof window!="object"||window!==s?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(h,m,y){var M=s.URL||s.webkitURL,x=document.createElement("a");m=m||h.name||"download",x.download=m,x.rel="noopener",typeof h=="string"?(x.href=h,x.origin===location.origin?o(x):r(x.href)?i(h,m,y):o(x,x.target="_blank")):(x.href=M.createObjectURL(h),setTimeout(function(){M.revokeObjectURL(x.href)},4e4),setTimeout(function(){o(x)},0))}:"msSaveOrOpenBlob"in navigator?function(h,m,y){if(m=m||h.name||"download",typeof h!="string")navigator.msSaveOrOpenBlob(t(h,y),m);else if(r(h))i(h,m,y);else{var M=document.createElement("a");M.href=h,M.target="_blank",setTimeout(function(){o(M)})}}:function(h,m,y,M){if(M=M||open("","_blank"),M&&(M.document.title=M.document.body.innerText="downloading..."),typeof h=="string")return i(h,m,y);var x=h.type==="application/octet-stream",T=/constructor/i.test(s.HTMLElement)||s.safari,P=/CriOS\/[\d]+/.test(navigator.userAgent);if((P||x&&T||a)&&typeof FileReader<"u"){var F=new FileReader;F.onloadend=function(){var V=F.result;V=P?V:V.replace(/^data:[^;]*;/,"data:attachment/file;"),M?M.location.href=V:location=V,M=null},F.readAsDataURL(h)}else{var j=s.URL||s.webkitURL,q=j.createObjectURL(h);M?M.location=q:location.href=q,M=null,setTimeout(function(){j.revokeObjectURL(q)},4e4)}});s.saveAs=c.saveAs=c,n.exports=c})})(kw)),kw.exports}var QV=GDe();const WDe="5.9.0",QDe="get_your_own_OpIi9ZULNHzrESv6T2vL",qDe="b71f7f0ba4064f5eb9e903859a9cf5c6",YDe="pk.put_your_api_key_here7bb23dffeb4",rae={openmaptiles:QDe,thunderforest:qDe,locationiq:YDe};function Mn(){var n="/home/runner/work/maputnik/maputnik/src/libs/style.ts",e="16e079a55cdd4175ffeada8708d6c49d219f1229",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/style.ts",statementMap:{0:{start:{line:3,column:19},end:{line:7,column:2}},1:{start:{line:9,column:2},end:{line:9,column:52}},2:{start:{line:12,column:2},end:{line:14,column:3}},3:{start:{line:13,column:4},end:{line:13,column:28}},4:{start:{line:15,column:2},end:{line:15,column:15}},5:{start:{line:18,column:24},end:{line:22,column:4}},6:{start:{line:19,column:25},end:{line:19,column:37}},7:{start:{line:20,column:4},end:{line:20,column:36}},8:{start:{line:21,column:4},end:{line:21,column:24}},9:{start:{line:23,column:2},end:{line:26,column:4}},10:{start:{line:29,column:2},end:{line:32,column:4}},11:{start:{line:35,column:2},end:{line:35,column:69}},12:{start:{line:38,column:2},end:{line:42,column:3}},13:{start:{line:38,column:15},end:{line:38,column:16}},14:{start:{line:39,column:4},end:{line:41,column:5}},15:{start:{line:40,column:6},end:{line:40,column:15}},16:{start:{line:43,column:2},end:{line:43,column:14}},17:{start:{line:46,column:19},end:{line:46,column:42}},18:{start:{line:47,column:20},end:{line:47,column:67}},19:{start:{line:48,column:2},end:{line:50,column:3}},20:{start:{line:49,column:4},end:{line:49,column:37}},21:{start:{line:51,column:2},end:{line:51,column:21}},22:{start:{line:54,column:17},end:{line:54,column:45}},23:{start:{line:55,column:2},end:{line:55,column:31}},24:{start:{line:55,column:15},end:{line:55,column:31}},25:{start:{line:56,column:2},end:{line:56,column:57}},26:{start:{line:56,column:41},end:{line:56,column:57}},27:{start:{line:57,column:23},end:{line:57,column:33}},28:{start:{line:58,column:2},end:{line:64,column:3}},29:{start:{line:59,column:4},end:{line:59,column:37}},30:{start:{line:60,column:9},end:{line:64,column:3}},31:{start:{line:61,column:4},end:{line:61,column:30}},32:{start:{line:62,column:9},end:{line:64,column:3}},33:{start:{line:63,column:4},end:{line:63,column:34}},34:{start:{line:65,column:22},end:{line:65,column:68}},35:{start:{line:66,column:2},end:{line:68,column:3}},36:{start:{line:67,column:4},end:{line:67,column:20}},37:{start:{line:70,column:2},end:{line:74,column:3}},38:{start:{line:71,column:4},end:{line:71,column:55}},39:{start:{line:73,column:4},end:{line:73,column:57}},40:{start:{line:75,column:25},end:{line:81,column:3}},41:{start:{line:82,column:23},end:{line:85,column:3}},42:{start:{line:86,column:2},end:{line:86,column:22}},43:{start:{line:89,column:21},end:{line:89,column:29}},44:{start:{line:90,column:2},end:{line:92,column:5}},45:{start:{line:91,column:4},end:{line:91,column:76}},46:{start:{line:93,column:2},end:{line:101,column:3}},47:{start:{line:94,column:27},end:{line:94,column:73}},48:{start:{line:95,column:4},end:{line:100,column:5}},49:{start:{line:96,column:6},end:{line:99,column:8}},50:{start:{line:102,column:2},end:{line:102,column:22}},51:{start:{line:105,column:26},end:{line:107,column:3}},52:{start:{line:108,column:2},end:{line:108,column:63}},53:{start:{line:109,column:2},end:{line:109,column:64}},54:{start:{line:110,column:2},end:{line:110,column:57}},55:{start:{line:111,column:2},end:{line:111,column:61}},56:{start:{line:112,column:2},end:{line:115,column:4}}},fnMap:{0:{name:"generateId",decl:{start:{line:8,column:9},end:{line:8,column:19}},loc:{start:{line:8,column:22},end:{line:10,column:1}},line:8},1:{name:"ensureHasId",decl:{start:{line:11,column:9},end:{line:11,column:20}},loc:{start:{line:11,column:28},end:{line:16,column:1}},line:11},2:{name:"ensureHasNoInteractive",decl:{start:{line:17,column:9},end:{line:17,column:31}},loc:{start:{line:17,column:39},end:{line:27,column:1}},line:17},3:{name:"(anonymous_3)",decl:{start:{line:18,column:41},end:{line:18,column:42}},loc:{start:{line:18,column:52},end:{line:22,column:3}},line:18},4:{name:"ensureHasNoRefs",decl:{start:{line:28,column:9},end:{line:28,column:24}},loc:{start:{line:28,column:32},end:{line:33,column:1}},line:28},5:{name:"ensureStyleValidity",decl:{start:{line:34,column:9},end:{line:34,column:28}},loc:{start:{line:34,column:36},end:{line:36,column:1}},line:34},6:{name:"indexOfLayer",decl:{start:{line:37,column:9},end:{line:37,column:21}},loc:{start:{line:37,column:39},end:{line:44,column:1}},line:37},7:{name:"getAccessToken",decl:{start:{line:45,column:9},end:{line:45,column:23}},loc:{start:{line:45,column:52},end:{line:52,column:1}},line:45},8:{name:"replaceSourceAccessToken",decl:{start:{line:53,column:9},end:{line:53,column:33}},loc:{start:{line:53,column:67},end:{line:87,column:1}},line:53},9:{name:"replaceAccessTokens",decl:{start:{line:88,column:9},end:{line:88,column:28}},loc:{start:{line:88,column:50},end:{line:103,column:1}},line:88},10:{name:"(anonymous_10)",decl:{start:{line:90,column:40},end:{line:90,column:41}},loc:{start:{line:90,column:56},end:{line:92,column:3}},line:90},11:{name:"stripAccessTokens",decl:{start:{line:104,column:9},end:{line:104,column:26}},loc:{start:{line:104,column:37},end:{line:116,column:1}},line:104}},branchMap:{0:{loc:{start:{line:12,column:2},end:{line:14,column:3}},type:"if",locations:[{start:{line:12,column:2},end:{line:14,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:12},1:{loc:{start:{line:12,column:6},end:{line:12,column:35}},type:"binary-expr",locations:[{start:{line:12,column:6},end:{line:12,column:22}},{start:{line:12,column:26},end:{line:12,column:35}}],line:12},2:{loc:{start:{line:39,column:4},end:{line:41,column:5}},type:"if",locations:[{start:{line:39,column:4},end:{line:41,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:39},3:{loc:{start:{line:46,column:19},end:{line:46,column:42}},type:"binary-expr",locations:[{start:{line:46,column:19},end:{line:46,column:36}},{start:{line:46,column:40},end:{line:46,column:42}}],line:46},4:{loc:{start:{line:48,column:2},end:{line:50,column:3}},type:"if",locations:[{start:{line:48,column:2},end:{line:50,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:48},5:{loc:{start:{line:48,column:6},end:{line:48,column:40}},type:"binary-expr",locations:[{start:{line:48,column:6},end:{line:48,column:24}},{start:{line:48,column:28},end:{line:48,column:40}}],line:48},6:{loc:{start:{line:53,column:56},end:{line:53,column:65}},type:"default-arg",locations:[{start:{line:53,column:63},end:{line:53,column:65}}],line:53},7:{loc:{start:{line:55,column:2},end:{line:55,column:31}},type:"if",locations:[{start:{line:55,column:2},end:{line:55,column:31}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:55},8:{loc:{start:{line:56,column:2},end:{line:56,column:57}},type:"if",locations:[{start:{line:56,column:2},end:{line:56,column:57}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:56},9:{loc:{start:{line:56,column:6},end:{line:56,column:39}},type:"binary-expr",locations:[{start:{line:56,column:6},end:{line:56,column:24}},{start:{line:56,column:28},end:{line:56,column:39}}],line:56},10:{loc:{start:{line:58,column:2},end:{line:64,column:3}},type:"if",locations:[{start:{line:58,column:2},end:{line:64,column:3}},{start:{line:60,column:9},end:{line:64,column:3}}],line:58},11:{loc:{start:{line:58,column:6},end:{line:58,column:89}},type:"binary-expr",locations:[{start:{line:58,column:6},end:{line:58,column:46}},{start:{line:58,column:50},end:{line:58,column:89}}],line:58},12:{loc:{start:{line:60,column:9},end:{line:64,column:3}},type:"if",locations:[{start:{line:60,column:9},end:{line:64,column:3}},{start:{line:62,column:9},end:{line:64,column:3}}],line:60},13:{loc:{start:{line:60,column:13},end:{line:60,column:70}},type:"binary-expr",locations:[{start:{line:60,column:13},end:{line:60,column:28}},{start:{line:60,column:32},end:{line:60,column:70}}],line:60},14:{loc:{start:{line:62,column:9},end:{line:64,column:3}},type:"if",locations:[{start:{line:62,column:9},end:{line:64,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:62},15:{loc:{start:{line:62,column:13},end:{line:62,column:70}},type:"binary-expr",locations:[{start:{line:62,column:13},end:{line:62,column:28}},{start:{line:62,column:32},end:{line:62,column:70}}],line:62},16:{loc:{start:{line:66,column:2},end:{line:68,column:3}},type:"if",locations:[{start:{line:66,column:2},end:{line:68,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:66},17:{loc:{start:{line:70,column:2},end:{line:74,column:3}},type:"if",locations:[{start:{line:70,column:2},end:{line:74,column:3}},{start:{line:72,column:9},end:{line:74,column:3}}],line:70},18:{loc:{start:{line:88,column:39},end:{line:88,column:48}},type:"default-arg",locations:[{start:{line:88,column:46},end:{line:88,column:48}}],line:88},19:{loc:{start:{line:93,column:2},end:{line:101,column:3}},type:"if",locations:[{start:{line:93,column:2},end:{line:101,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:93},20:{loc:{start:{line:93,column:6},end:{line:93,column:114}},type:"binary-expr",locations:[{start:{line:93,column:6},end:{line:93,column:21}},{start:{line:93,column:26},end:{line:93,column:69}},{start:{line:93,column:73},end:{line:93,column:113}}],line:93},21:{loc:{start:{line:95,column:4},end:{line:100,column:5}},type:"if",locations:[{start:{line:95,column:4},end:{line:100,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:95}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0],18:[0],19:[0,0],20:[0,0,0],21:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/style.ts"],names:[],mappings:"AAAA,SAAQ,mBAAkB;AAE1B,OAAO,YAAY;AAInB,MAAM,aAAa,oBAAoB;AAAA,EACrC,SAAS;AAAA,EACT,SAAS,CAAC;AAAA,EACV,QAAQ,CAAC;AACX,CAAC;AAED,SAAS,aAAa;AACpB,SAAO,KAAK,OAAO,EAAE,SAAS,EAAE,EAAE,UAAU,GAAG,CAAC;AAClD;AAEA,SAAS,YAAY,OAAuE;AAC1F,MAAG,EAAE,QAAQ,UAAU,CAAC,MAAM,IAAI;AAChC,UAAM,KAAK,WAAW;AAAA,EACxB;AACA,SAAO;AACT;AAEA,SAAS,uBAAuB,OAAiC;AAC/D,QAAM,gBAAgB,MAAM,OAAO,IAAI,WAAS;AAC9C,UAAM,eAA2D,EAAE,GAAG,MAAM;AAC5E,WAAO,aAAa;AACpB,WAAO;AAAA,EACT,CAAC;AAED,SAAO;AAAA,IACL,GAAG;AAAA,IACH,QAAQ;AAAA,EACV;AACF;AAEA,SAAS,gBAAgB,OAAiC;AACxD,SAAO;AAAA,IACL,GAAG;AAAA,IACH,QAAQ,YAAY,MAAM,MAAM;AAAA,EAClC;AACF;AAEA,SAAS,oBAAoB,OAAqD;AAChF,SAAO,uBAAuB,gBAAgB,YAAY,KAAK,CAAC,CAAC;AACnE;AAEA,SAAS,aAAa,QAA8B,SAAiB;AACnE,WAAS,IAAI,GAAG,IAAI,OAAO,QAAQ,KAAK;AACtC,QAAG,OAAO,CAAC,EAAE,OAAO,SAAS;AAC3B,aAAO;AAAA,IACT;AAAA,EACF;AACA,SAAO;AACT;AAEA,SAAS,eAAe,YAAoB,UAA8B,MAAiC;AACzG,QAAM,WAAW,SAAS,YAAY,CAAC;AACvC,MAAI,cAAc,SAAS,YAAY,UAAU,eAAe;AAEhE,MAAG,KAAK,iBAAiB,CAAC,aAAa;AACrC,kBAAc,OAAO,UAAiC;AAAA,EACxD;AAEA,SAAO;AACT;AAEA,SAAS,yBAAyB,UAA8B,YAAoB,OAAK,CAAC,GAAG;AAC3F,QAAM,SAAS,SAAS,QAAQ,UAAU;AAC1C,MAAG,CAAC,OAAQ,QAAO;AACnB,MAAG,EAAE,SAAS,WAAW,CAAC,OAAO,IAAK,QAAO;AAE7C,MAAI,iBAAiB;AACrB,MAAG,eAAe,6BAA6B,eAAe,0BAA0B;AACtF,qBAAiB;AAAA,EACnB,WACU,SAAS,UAAW,OAAO,KAAK,MAAM,mBAAmB,GAAG;AAGpE,qBAAiB;AAAA,EACnB,WACU,SAAS,UAAW,OAAO,KAAK,MAAM,mBAAmB,GAAG;AACpE,qBAAiB;AAAA,EACnB;AAEA,QAAM,cAAc,eAAe,gBAAgB,UAAU,IAAI;AAEjE,MAAG,CAAC,aAAa;AAEf,WAAO;AAAA,EACT;AAEA,MAAI;AACJ,MAAI,kBAAkB,UAAU;AAI9B,gBAAY,GAAG,OAAO,GAAG,YAAY,WAAW;AAAA,EAClD,OAAO;AACL,gBAAY,OAAO,IAAI,QAAQ,SAAS,WAAW;AAAA,EACrD;AAEA,QAAM,iBAAiB;AAAA,IACrB,GAAG,SAAS;AAAA,IACZ,CAAC,UAAU,GAAG;AAAA,MACZ,GAAG;AAAA,MACH,KAAK;AAAA,IACP;AAAA,EACF;AACA,QAAM,eAAe;AAAA,IACnB,GAAG;AAAA,IACH,SAAS;AAAA,EACX;AACA,SAAO;AACT;AAEA,SAAS,oBAAoB,UAA8B,OAAK,CAAC,GAAG;AAClE,MAAI,eAAe;AAEnB,SAAO,KAAK,SAAS,OAAO,EAAE,QAAQ,CAAC,eAAe;AACpD,mBAAe,yBAAyB,cAAc,YAAY,IAAI;AAAA,EACxE,CAAC;AAED,MAAI,SAAS,WAAW,SAAS,OAAO,MAAM,oBAAoB,KAAK,SAAS,OAAO,MAAM,iBAAiB,IAAI;AAChH,UAAM,iBAAiB,eAAe,gBAAgB,UAAU,IAAI;AACpE,QAAI,gBAAgB;AAClB,qBAAe;AAAA,QACb,GAAG;AAAA,QACH,QAAQ,SAAS,OAAO,QAAQ,SAAS,cAAc;AAAA,MACzD;AAAA,IACF;AAAA,EACF;AAEA,SAAO;AACT;AAEA,SAAS,kBAAkB,UAA8B;AACvD,QAAM,kBAAkB;AAAA,IACtB,GAAG,SAAS;AAAA,EACd;AACA,SAAO,gBAAgB,oCAAoC;AAC3D,SAAO,gBAAgB,qCAAqC;AAC5D,SAAO,gBAAgB,8BAA8B;AACrD,SAAO,gBAAgB,kCAAkC;AACzD,SAAO;AAAA,IACL,GAAG;AAAA,IACH,UAAU;AAAA,EACZ;AACF;AAEA,eAAe;AAAA,EACb;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"16e079a55cdd4175ffeada8708d6c49d219f1229"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Mn=function(){return s},s}Mn();const $De=(Mn().s[0]++,sae({version:8,sources:{},layers:[]}));function oae(){return Mn().f[0]++,Mn().s[1]++,Math.random().toString(36).substring(2,9)}function VDe(n){return Mn().f[1]++,Mn().s[2]++,Mn().b[1][0]++,!("id"in n)||(Mn().b[1][1]++,!n.id)?(Mn().b[0][0]++,Mn().s[3]++,n.id=oae()):Mn().b[0][1]++,Mn().s[4]++,n}function HDe(n){Mn().f[2]++;const e=(Mn().s[5]++,n.layers.map(t=>{Mn().f[3]++;const i=(Mn().s[6]++,{...t});return Mn().s[7]++,delete i.interactive,Mn().s[8]++,i}));return Mn().s[9]++,{...n,layers:e}}function ZDe(n){return Mn().f[4]++,Mn().s[10]++,{...n,layers:qce(n.layers)}}function sae(n){return Mn().f[5]++,Mn().s[11]++,HDe(ZDe(VDe(n)))}function XDe(n,e){Mn().f[6]++,Mn().s[12]++;for(let t=(Mn().s[13]++,0);t<n.length;t++){if(Mn().s[14]++,n[t].id===e)return Mn().b[2][0]++,Mn().s[15]++,t;Mn().b[2][1]++}return Mn().s[16]++,null}function BL(n,e,t){Mn().f[7]++;const i=(Mn().s[17]++,Mn().b[3][0]++,e.metadata||(Mn().b[3][1]++,{}));let r=(Mn().s[18]++,i[`maputnik:${n}_access_token`]);return Mn().s[19]++,Mn().b[5][0]++,t.allowFallback&&(Mn().b[5][1]++,!r)?(Mn().b[4][0]++,Mn().s[20]++,r=rae[n]):Mn().b[4][1]++,Mn().s[21]++,r}function JDe(n,e,t=(Mn().b[6][0]++,{})){Mn().f[8]++;const i=(Mn().s[22]++,n.sources[e]);if(Mn().s[23]++,i)Mn().b[7][1]++;else return Mn().b[7][0]++,Mn().s[24]++,n;if(Mn().s[25]++,Mn().b[9][0]++,!("url"in i)||(Mn().b[9][1]++,!i.url))return Mn().b[8][0]++,Mn().s[26]++,n;Mn().b[8][1]++;let r=(Mn().s[27]++,e);Mn().s[28]++,Mn().b[11][0]++,e==="thunderforest_transport"||(Mn().b[11][1]++,e==="thunderforest_outdoors")?(Mn().b[10][0]++,Mn().s[29]++,r="thunderforest"):(Mn().b[10][1]++,Mn().s[30]++,Mn().b[13][0]++,"url"in i&&(Mn().b[13][1]++,i.url?.match(/\.stadiamaps\.com/))?(Mn().b[12][0]++,Mn().s[31]++,r="stadia"):(Mn().b[12][1]++,Mn().s[32]++,Mn().b[15][0]++,"url"in i&&(Mn().b[15][1]++,i.url?.match(/\.locationiq\.com/))?(Mn().b[14][0]++,Mn().s[33]++,r="locationiq"):Mn().b[14][1]++));const o=(Mn().s[34]++,BL(r,n,t));if(Mn().s[35]++,o)Mn().b[16][1]++;else return Mn().b[16][0]++,Mn().s[36]++,n;let s;Mn().s[37]++,r=="stadia"?(Mn().b[17][0]++,Mn().s[38]++,s=`${i.url}?api_key=${o}`):(Mn().b[17][1]++,Mn().s[39]++,s=i.url.replace("{key}",o));const a=(Mn().s[40]++,{...n.sources,[e]:{...i,url:s}}),c=(Mn().s[41]++,{...n,sources:a});return Mn().s[42]++,c}function ePe(n,e=(Mn().b[18][0]++,{})){Mn().f[9]++;let t=(Mn().s[43]++,n);if(Mn().s[44]++,Object.keys(n.sources).forEach(i=>{Mn().f[10]++,Mn().s[45]++,t=JDe(t,i,e)}),Mn().s[46]++,Mn().b[20][0]++,n.glyphs&&(Mn().b[20][1]++,n.glyphs.match(/\.tilehosting\.com/)||(Mn().b[20][2]++,n.glyphs.match(/\.maptiler\.com/)))){Mn().b[19][0]++;const i=(Mn().s[47]++,BL("openmaptiles",n,e));Mn().s[48]++,i?(Mn().b[21][0]++,Mn().s[49]++,t={...t,glyphs:n.glyphs.replace("{key}",i)}):Mn().b[21][1]++}else Mn().b[19][1]++;return Mn().s[50]++,t}function tPe(n){Mn().f[11]++;const e=(Mn().s[51]++,{...n.metadata});return Mn().s[52]++,delete e["maputnik:openmaptiles_access_token"],Mn().s[53]++,delete e["maputnik:thunderforest_access_token"],Mn().s[54]++,delete e["maputnik:stadia_access_token"],Mn().s[55]++,delete e["maputnik:locationiq_access_token"],Mn().s[56]++,{...n,metadata:e}}const Ed={ensureStyleValidity:sae,emptyStyle:$De,indexOfLayer:XDe,generateId:oae,getAccessToken:BL,replaceAccessTokens:ePe,stripAccessTokens:tPe};function li(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalExport.tsx",e="0479ae849bf143a83f826f9fdcad7b323ec1b109",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalExport.tsx",statementMap:{0:{start:{line:14,column:28},end:{line:14,column:35}},1:{start:{line:15,column:36},end:{line:15,column:83}},2:{start:{line:18,column:4},end:{line:22,column:6}},3:{start:{line:25,column:4},end:{line:33,column:5}},4:{start:{line:26,column:6},end:{line:30,column:9}},5:{start:{line:32,column:6},end:{line:32,column:36}},6:{start:{line:36,column:23},end:{line:36,column:44}},7:{start:{line:37,column:22},end:{line:37,column:69}},8:{start:{line:38,column:17},end:{line:62,column:1}},9:{start:{line:63,column:17},end:{line:63,column:70}},10:{start:{line:64,column:23},end:{line:64,column:40}},11:{start:{line:65,column:4},end:{line:65,column:39}},12:{start:{line:68,column:23},end:{line:68,column:44}},13:{start:{line:69,column:4},end:{line:74,column:5}},14:{start:{line:70,column:19},end:{line:70,column:85}},15:{start:{line:71,column:25},end:{line:71,column:42}},16:{start:{line:72,column:6},end:{line:72,column:41}},17:{start:{line:73,column:6},end:{line:73,column:13}},18:{start:{line:75,column:21},end:{line:75,column:42}},19:{start:{line:76,column:4},end:{line:80,column:5}},20:{start:{line:77,column:6},end:{line:77,column:49}},21:{start:{line:78,column:6},end:{line:78,column:45}},22:{start:{line:79,column:6},end:{line:79,column:37}},23:{start:{line:79,column:30},end:{line:79,column:37}},24:{start:{line:81,column:21},end:{line:81,column:54}},25:{start:{line:82,column:4},end:{line:82,column:37}},26:{start:{line:83,column:4},end:{line:83,column:27}},27:{start:{line:84,column:4},end:{line:84,column:30}},28:{start:{line:87,column:23},end:{line:87,column:44}},29:{start:{line:88,column:23},end:{line:88,column:52}},30:{start:{line:89,column:4},end:{line:89,column:43}},31:{start:{line:90,column:4},end:{line:90,column:35}},32:{start:{line:90,column:28},end:{line:90,column:35}},33:{start:{line:91,column:21},end:{line:91,column:54}},34:{start:{line:92,column:4},end:{line:92,column:37}},35:{start:{line:93,column:4},end:{line:93,column:27}},36:{start:{line:94,column:4},end:{line:94,column:30}},37:{start:{line:97,column:23},end:{line:105,column:5}},38:{start:{line:106,column:23},end:{line:106,column:66}},39:{start:{line:107,column:4},end:{line:107,column:43}},40:{start:{line:108,column:4},end:{line:108,column:22}},41:{start:{line:111,column:25},end:{line:117,column:5}},42:{start:{line:118,column:4},end:{line:118,column:44}},43:{start:{line:121,column:14},end:{line:121,column:26}},44:{start:{line:122,column:16},end:{line:122,column:38}},45:{start:{line:123,column:4},end:{line:188,column:6}},46:{start:{line:191,column:20},end:{line:191,column:58}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:17,column:2},end:{line:17,column:3}},loc:{start:{line:17,column:19},end:{line:23,column:3}},line:17},1:{name:"(anonymous_1)",decl:{start:{line:24,column:2},end:{line:24,column:3}},loc:{start:{line:24,column:15},end:{line:34,column:3}},line:24},2:{name:"(anonymous_2)",decl:{start:{line:35,column:2},end:{line:35,column:3}},loc:{start:{line:35,column:15},end:{line:66,column:3}},line:35},3:{name:"(anonymous_3)",decl:{start:{line:67,column:2},end:{line:67,column:3}},loc:{start:{line:67,column:20},end:{line:85,column:3}},line:67},4:{name:"(anonymous_4)",decl:{start:{line:86,column:2},end:{line:86,column:3}},loc:{start:{line:86,column:22},end:{line:95,column:3}},line:86},5:{name:"(anonymous_5)",decl:{start:{line:96,column:2},end:{line:96,column:3}},loc:{start:{line:96,column:27},end:{line:109,column:3}},line:96},6:{name:"(anonymous_6)",decl:{start:{line:110,column:2},end:{line:110,column:3}},loc:{start:{line:110,column:42},end:{line:119,column:3}},line:110},7:{name:"(anonymous_7)",decl:{start:{line:120,column:2},end:{line:120,column:3}},loc:{start:{line:120,column:11},end:{line:189,column:3}},line:120}},branchMap:{0:{loc:{start:{line:25,column:4},end:{line:33,column:5}},type:"if",locations:[{start:{line:25,column:4},end:{line:33,column:5}},{start:{line:31,column:11},end:{line:33,column:5}}],line:25},1:{loc:{start:{line:37,column:22},end:{line:37,column:69}},type:"binary-expr",locations:[{start:{line:37,column:22},end:{line:37,column:46}},{start:{line:37,column:50},end:{line:37,column:69}}],line:37},2:{loc:{start:{line:69,column:4},end:{line:74,column:5}},type:"if",locations:[{start:{line:69,column:4},end:{line:74,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:69},3:{loc:{start:{line:76,column:4},end:{line:80,column:5}},type:"if",locations:[{start:{line:76,column:4},end:{line:80,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:76},4:{loc:{start:{line:79,column:6},end:{line:79,column:37}},type:"if",locations:[{start:{line:79,column:6},end:{line:79,column:37}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:79},5:{loc:{start:{line:90,column:4},end:{line:90,column:35}},type:"if",locations:[{start:{line:90,column:4},end:{line:90,column:35}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:90},6:{loc:{start:{line:140,column:24},end:{line:140,column:58}},type:"binary-expr",locations:[{start:{line:140,column:24},end:{line:140,column:52}},{start:{line:140,column:56},end:{line:140,column:58}}],line:140},7:{loc:{start:{line:149,column:24},end:{line:149,column:58}},type:"binary-expr",locations:[{start:{line:149,column:24},end:{line:149,column:52}},{start:{line:149,column:56},end:{line:149,column:58}}],line:149},8:{loc:{start:{line:158,column:24},end:{line:158,column:58}},type:"binary-expr",locations:[{start:{line:158,column:24},end:{line:158,column:52}},{start:{line:158,column:56},end:{line:158,column:58}}],line:158},9:{loc:{start:{line:167,column:24},end:{line:167,column:58}},type:"binary-expr",locations:[{start:{line:167,column:24},end:{line:167,column:52}},{start:{line:167,column:56},end:{line:167,column:58}}],line:167},10:{loc:{start:{line:177,column:12},end:{line:180,column:16}},type:"binary-expr",locations:[{start:{line:177,column:12},end:{line:177,column:39}},{start:{line:177,column:59},end:{line:180,column:16}}],line:177}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalExport.tsx"],names:[],mappings:"AAoKQ,cAKA,YALA;AApKR,OAAO,WAAW;AAClB,OAAO,aAAa;AACpB,SAAQ,cAAa;AACrB,SAAQ,eAAc;AACtB,SAAQ,cAAa;AACrB,SAAQ,OAAO,cAAa;AAC5B,SAA8B,uBAAsB;AAEpD,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,OAAO,WAAW;AAClB,OAAO,yBAAyB;AAIhC,MAAM,sBAAsB;AAC5B,MAAM,8BAA8B,OAAO,OAAO,uBAAuB;AAazE,MAAM,4BAA4B,MAAM,UAAoC;AAAA,EAE1E,iBAAiB;AACf,WAAO;AAAA,MACL,MAAM;AAAA,QACJ,MAAM,oBAAoB,KAAK,MAAM,QAAQ;AAAA,MAC/C;AAAA,IACF;AAAA,EACF;AAAA,EAEA,aAAa;AACX,QAAI,KAAK,MAAM,SAAS,MAAM;AAC5B,aAAO,QAAQ,KAAK,MAAM,SAAS,MAAM;AAAA,QACvC,aAAa;AAAA,QACb,QAAQ;AAAA,QACR,OAAO;AAAA,MACT,CAAC;AAAA,IACH,OAAO;AACL,aAAO,KAAK,MAAM,SAAS;AAAA,IAC7B;AAAA,EACF;AAAA,EAEA,aAAa;AACX,UAAM,aAAa,KAAK,eAAe;AACvC,UAAM,YAAY,KAAK,MAAM,SAAS,QAAQ,KAAK,MAAM,EAAE,KAAK;AAChE,UAAM,OAAO;AAAA;AAAA;AAAA;AAAA,WAIN,SAAS;AAAA;AAAA,+CAE2B,mBAAmB;AAAA,8CACpB,mBAAmB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAW/C,UAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQxB,UAAM,OAAO,IAAI,KAAK,CAAC,IAAI,GAAG,EAAC,MAAM,0BAAyB,CAAC;AAC/D,UAAM,aAAa,KAAK,WAAW;AACnC,WAAO,MAAM,aAAa,OAAO;AAAA,EACnC;AAAA,EAEA,MAAM,YAAY;AAChB,UAAM,aAAa,KAAK,eAAe;AAIvC,QAAI,CAAC,6BAA6B;AAChC,YAAM,OAAO,IAAI,KAAK,CAAC,UAAU,GAAG,EAAC,MAAM,iCAAgC,CAAC;AAC5E,YAAM,aAAa,KAAK,WAAW;AACnC,aAAO,MAAM,aAAa,OAAO;AACjC;AAAA,IACF;AAEA,QAAI,aAAa,KAAK,MAAM;AAC5B,QAAI,cAAc,MAAM;AACtB,mBAAa,MAAM,KAAK,iBAAiB;AACzC,WAAK,MAAM,gBAAgB,UAAU;AACrC,UAAI,cAAc,KAAM;AAAA,IAC1B;AAEA,UAAM,WAAW,MAAM,WAAW,eAAe;AACjD,UAAM,SAAS,MAAM,UAAU;AAC/B,UAAM,SAAS,MAAM;AACrB,SAAK,MAAM,aAAa;AAAA,EAC1B;AAAA,EAEA,MAAM,cAAc;AAClB,UAAM,aAAa,KAAK,eAAe;AAEvC,UAAM,aAAa,MAAM,KAAK,iBAAiB;AAC/C,SAAK,MAAM,gBAAgB,UAAU;AACrC,QAAI,cAAc,KAAM;AAExB,UAAM,WAAW,MAAM,WAAW,eAAe;AACjD,UAAM,SAAS,MAAM,UAAU;AAC/B,UAAM,SAAS,MAAM;AACrB,SAAK,MAAM,aAAa;AAAA,EAC1B;AAAA,EAEA,MAAM,mBAAyD;AAC7D,UAAM,aAAoC;AAAA,MACxC,OAAO;AAAA,QACL;AAAA,UACE,aAAa;AAAA,UACb,QAAQ,EAAC,oBAAoB,CAAC,OAAO,EAAC;AAAA,QACxC;AAAA,MACF;AAAA,MACA,eAAe,KAAK,WAAW;AAAA,IACjC;AAEA,UAAM,aAAa,MAAM,OAAO,mBAAmB,UAAU;AAC7D,SAAK,MAAM,gBAAgB,UAAU;AACrC,WAAO;AAAA,EACT;AAAA,EAEA,uBAAuB,UAAkB,OAAY;AACnD,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,UAAU;AAAA,QACR,GAAG,KAAK,MAAM,SAAS;AAAA,QACvB,CAAC,QAAQ,GAAG;AAAA,MACd;AAAA,IACF;AACA,SAAK,MAAM,eAAe,YAAY;AAAA,EACxC;AAAA,EAGA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,MAAM,oBAAoB,CAAC;AACjC,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,YAAY;AAAA,QACrB,WAAU;AAAA,QAGV,+BAAC,aAAQ,WAAU,0BACjB;AAAA,8BAAC,QAAI,YAAE,YAAY,GAAE;AAAA,UACrB,oBAAC,OACE,YAAE,uCAAuC,GAC5C;AAAA,UAEA,qBAAC,SACC;AAAA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,IAAI,SAAS,sBAAsB;AAAA,gBAC1C,WAAW,IAAI,SAAS;AAAA,gBACxB,QAAQ,KAAK,MAAM,SAAS,YAAY,CAAC,GAAU,oCAAoC;AAAA,gBACvF,UAAU,KAAK,uBAAuB,KAAK,MAAM,oCAAoC;AAAA;AAAA,YACvF;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,IAAI,SAAS,2BAA2B;AAAA,gBAC/C,WAAW,IAAI,SAAS;AAAA,gBACxB,QAAQ,KAAK,MAAM,SAAS,YAAY,CAAC,GAAU,qCAAqC;AAAA,gBACxF,UAAU,KAAK,uBAAuB,KAAK,MAAM,qCAAqC;AAAA;AAAA,YACxF;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,IAAI,SAAS,oBAAoB;AAAA,gBACxC,WAAW,IAAI,SAAS;AAAA,gBACxB,QAAQ,KAAK,MAAM,SAAS,YAAY,CAAC,GAAU,8BAA8B;AAAA,gBACjF,UAAU,KAAK,uBAAuB,KAAK,MAAM,8BAA8B;AAAA;AAAA,YACjF;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,IAAI,SAAS,wBAAwB;AAAA,gBAC5C,WAAW,IAAI,SAAS;AAAA,gBACxB,QAAQ,KAAK,MAAM,SAAS,YAAY,CAAC,GAAU,kCAAkC;AAAA,gBACrF,UAAU,KAAK,uBAAuB,KAAK,MAAM,kCAAkC;AAAA;AAAA,YACrF;AAAA,aACF;AAAA,UAEA,qBAAC,SAAI,WAAU,iCACb;AAAA,iCAAC,eAAY,SAAS,KAAK,UAAU,KAAK,IAAI,GAC5C;AAAA,kCAAC,UAAM;AAAA,cACN,EAAE,MAAM;AAAA,eACX;AAAA,YACC,+BACC,qBAAC,eAAY,SAAS,KAAK,YAAY,KAAK,IAAI,GAC9C;AAAA,kCAAC,UAAM;AAAA,cACN,EAAE,SAAS;AAAA,eACd;AAAA,YAGF,qBAAC,eAAY,SAAS,KAAK,WAAW,KAAK,IAAI,GAC7C;AAAA,kCAAC,SAAK;AAAA,cACL,EAAE,aAAa;AAAA,eAClB;AAAA,aACF;AAAA,WACF;AAAA;AAAA,IAEF;AAAA,EACF;AACF;AAEA,MAAM,cAAc,gBAAgB,EAAE,mBAAmB;AACzD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"0479ae849bf143a83f826f9fdcad7b323ec1b109"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return li=function(){return s},s}li();const qV=(li().s[0]++,WDe),YV=(li().s[1]++,typeof window.showSaveFilePicker=="function");class nPe extends En.Component{tokenizedStyle(){return li().f[0]++,li().s[2]++,ede(Ed.stripAccessTokens(Ed.replaceAccessTokens(this.props.mapStyle)))}exportName(){return li().f[1]++,li().s[3]++,this.props.mapStyle.name?(li().b[0][0]++,li().s[4]++,jDe(this.props.mapStyle.name,{replacement:"_",remove:/[*\-+~.()'"!:]/g,lower:!0})):(li().b[0][1]++,li().s[5]++,this.props.mapStyle.id)}createHtml(){li().f[2]++;const e=(li().s[6]++,this.tokenizedStyle()),t=(li().s[7]++,li().b[1][0]++,this.props.mapStyle.name||(li().b[1][1]++,this.props.t("Map"))),i=(li().s[8]++,`<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>${t}</title>
  <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />
  <script src="https://unpkg.com/maplibre-gl@${qV}/dist/maplibre-gl.js"><\/script>
  <link href="https://unpkg.com/maplibre-gl@${qV}/dist/maplibre-gl.css" rel="stylesheet" />
  <style>
    body { margin: 0; padding: 0; }
    #map { position: absolute; top: 0; bottom: 0; width: 100%; }
  </style>
</head>
<body>
  <div id="map"></div>
  <script>
      const map = new maplibregl.Map({
         container: 'map',
         style: ${e},
      });
      map.addControl(new maplibregl.NavigationControl());
  <\/script>
</body>
</html>
`),r=(li().s[9]++,new Blob([i],{type:"text/html;charset=utf-8"})),o=(li().s[10]++,this.exportName());li().s[11]++,QV.saveAs(r,o+".html")}async saveStyle(){li().f[3]++;const e=(li().s[12]++,this.tokenizedStyle());if(li().s[13]++,YV)li().b[2][1]++;else{li().b[2][0]++;const r=(li().s[14]++,new Blob([e],{type:"application/json;charset=utf-8"})),o=(li().s[15]++,this.exportName());li().s[16]++,QV.saveAs(r,o+".json"),li().s[17]++;return}let t=(li().s[18]++,this.props.fileHandle);if(li().s[19]++,t==null)if(li().b[3][0]++,li().s[20]++,t=await this.createFileHandle(),li().s[21]++,this.props.onSetFileHandle(t),li().s[22]++,t==null){li().b[4][0]++,li().s[23]++;return}else li().b[4][1]++;else li().b[3][1]++;const i=(li().s[24]++,await t.createWritable());li().s[25]++,await i.write(e),li().s[26]++,await i.close(),li().s[27]++,this.props.onOpenToggle()}async saveStyleAs(){li().f[4]++;const e=(li().s[28]++,this.tokenizedStyle()),t=(li().s[29]++,await this.createFileHandle());if(li().s[30]++,this.props.onSetFileHandle(t),li().s[31]++,t==null){li().b[5][0]++,li().s[32]++;return}else li().b[5][1]++;const i=(li().s[33]++,await t.createWritable());li().s[34]++,await i.write(e),li().s[35]++,await i.close(),li().s[36]++,this.props.onOpenToggle()}async createFileHandle(){li().f[5]++;const e=(li().s[37]++,{types:[{description:"json",accept:{"application/json":[".json"]}}],suggestedName:this.exportName()}),t=(li().s[38]++,await window.showSaveFilePicker(e));return li().s[39]++,this.props.onSetFileHandle(t),li().s[40]++,t}changeMetadataProperty(e,t){li().f[6]++;const i=(li().s[41]++,{...this.props.mapStyle,metadata:{...this.props.mapStyle.metadata,[e]:t}});li().s[42]++,this.props.onStyleChanged(i)}render(){li().f[7]++;const e=(li().s[43]++,this.props.t),t=(li().s[44]++,iae(e));return li().s[45]++,ie.jsx(C1,{"data-wd-key":"modal:export",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Save Style"),className:"maputnik-export-modal",children:ie.jsxs("section",{className:"maputnik-modal-section",children:[ie.jsx("h1",{children:e("Save Style")}),ie.jsx("p",{children:e("Save the JSON style to your computer.")}),ie.jsxs("div",{children:[ie.jsx(md,{label:t.maputnik.maptiler_access_token.label,fieldSpec:t.maputnik.maptiler_access_token,value:(li().b[6][0]++,this.props.mapStyle.metadata||(li().b[6][1]++,{}))["maputnik:openmaptiles_access_token"],onChange:this.changeMetadataProperty.bind(this,"maputnik:openmaptiles_access_token")}),ie.jsx(md,{label:t.maputnik.thunderforest_access_token.label,fieldSpec:t.maputnik.thunderforest_access_token,value:(li().b[7][0]++,this.props.mapStyle.metadata||(li().b[7][1]++,{}))["maputnik:thunderforest_access_token"],onChange:this.changeMetadataProperty.bind(this,"maputnik:thunderforest_access_token")}),ie.jsx(md,{label:t.maputnik.stadia_access_token.label,fieldSpec:t.maputnik.stadia_access_token,value:(li().b[8][0]++,this.props.mapStyle.metadata||(li().b[8][1]++,{}))["maputnik:stadia_access_token"],onChange:this.changeMetadataProperty.bind(this,"maputnik:stadia_access_token")}),ie.jsx(md,{label:t.maputnik.locationiq_access_token.label,fieldSpec:t.maputnik.locationiq_access_token,value:(li().b[9][0]++,this.props.mapStyle.metadata||(li().b[9][1]++,{}))["maputnik:locationiq_access_token"],onChange:this.changeMetadataProperty.bind(this,"maputnik:locationiq_access_token")})]}),ie.jsxs("div",{className:"maputnik-modal-export-buttons",children:[ie.jsxs(Zs,{onClick:this.saveStyle.bind(this),children:[ie.jsx(w9,{}),e("Save")]}),(li().b[10][0]++,YV&&(li().b[10][1]++,ie.jsxs(Zs,{onClick:this.saveStyleAs.bind(this),children:[ie.jsx(w9,{}),e("Save as")]}))),ie.jsxs(Zs,{onClick:this.createHtml.bind(this),children:[ie.jsx(Wfe,{}),e("Create HTML")]})]})]})})}}const iPe=(li().s[46]++,No()(nPe));function G4(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldDynamicArray.tsx",e="d4204cb1114c57682afd09034f9cc8268e27db52",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldDynamicArray.tsx",statementMap:{0:{start:{line:4,column:26},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:127}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:26},end:{line:4,column:27}},loc:{start:{line:4,column:37},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldDynamicArray.tsx"],names:[],mappings:"AAUM;AAVN,OAAO,uBAAsD;AAC7D,OAAO,cAAc;AAMrB,MAAM,oBAAsD,CAAC,UAAU;AACrE,SACE,oBAAC,YAAS,OAAO,MAAM,OACrB,8BAAC,qBAAmB,GAAG,OAAO,GAChC;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d4204cb1114c57682afd09034f9cc8268e27db52"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return G4=function(){return s},s}G4();G4().s[0]++;const aae=n=>(G4().f[0]++,G4().s[1]++,ie.jsx(Ry,{label:n.label,children:ie.jsx(Bw,{...n})}));function W4(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldCheckbox.tsx",e="10be4a5b6db1d1fa2555f9b6247244050c0b65b8",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldCheckbox.tsx",statementMap:{0:{start:{line:4,column:22},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:120}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:22},end:{line:4,column:23}},loc:{start:{line:4,column:33},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldCheckbox.tsx"],names:[],mappings:"AAYM;AAZN,OAAO,WAAW;AAClB,OAAO,mBAA8C;AAQrD,MAAM,gBAA8C,CAAC,UAAU;AAC7D,SACE,oBAAC,SAAM,OAAO,MAAM,OAClB,8BAAC,iBAAe,GAAG,OAAO,GAC5B;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"10be4a5b6db1d1fa2555f9b6247244050c0b65b8"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return W4=function(){return s},s}W4();W4().s[0]++;const rPe=n=>(W4().f[0]++,W4().s[1]++,ie.jsx(Ls,{label:n.label,children:ie.jsx(Hse,{...n})}));function vn(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalSourcesTypeEditor.tsx",e="1c36418517e1f333c2ed550c90b5a98669bcf70c",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalSourcesTypeEditor.tsx",statementMap:{0:{start:{line:15,column:14},end:{line:15,column:26}},1:{start:{line:16,column:4},end:{line:30,column:9}},2:{start:{line:23,column:29},end:{line:26,column:12}},3:{start:{line:35,column:4},end:{line:38,column:7}},4:{start:{line:41,column:18},end:{line:41,column:47}},5:{start:{line:42,column:4},end:{line:51,column:6}},6:{start:{line:54,column:14},end:{line:54,column:26}},7:{start:{line:55,column:4},end:{line:99,column:9}},8:{start:{line:66,column:32},end:{line:69,column:12}},9:{start:{line:80,column:33},end:{line:83,column:12}},10:{start:{line:92,column:33},end:{line:95,column:12}},11:{start:{line:102,column:27},end:{line:107,column:1}},12:{start:{line:102,column:34},end:{line:107,column:1}},13:{start:{line:110,column:14},end:{line:110,column:26}},14:{start:{line:111,column:24},end:{line:118,column:5}},15:{start:{line:112,column:26},end:{line:112,column:64}},16:{start:{line:113,column:6},end:{line:113,column:29}},17:{start:{line:114,column:6},end:{line:117,column:9}},18:{start:{line:119,column:4},end:{line:146,column:9}},19:{start:{line:126,column:29},end:{line:129,column:12}},20:{start:{line:133,column:8},end:{line:144,column:10}},21:{start:{line:141,column:31},end:{line:141,column:52}},22:{start:{line:151,column:14},end:{line:151,column:26}},23:{start:{line:152,column:24},end:{line:159,column:5}},24:{start:{line:153,column:26},end:{line:153,column:64}},25:{start:{line:154,column:6},end:{line:154,column:29}},26:{start:{line:155,column:6},end:{line:158,column:9}},27:{start:{line:160,column:23},end:{line:165,column:5}},28:{start:{line:161,column:6},end:{line:164,column:9}},29:{start:{line:166,column:4},end:{line:192,column:9}},30:{start:{line:179,column:8},end:{line:190,column:10}},31:{start:{line:187,column:31},end:{line:187,column:52}},32:{start:{line:197,column:14},end:{line:197,column:26}},33:{start:{line:198,column:4},end:{line:209,column:6}},34:{start:{line:204,column:28},end:{line:207,column:10}},35:{start:{line:214,column:14},end:{line:214,column:26}},36:{start:{line:215,column:4},end:{line:243,column:9}},37:{start:{line:223,column:12},end:{line:226,column:15}},38:{start:{line:236,column:12},end:{line:239,column:15}},39:{start:{line:248,column:14},end:{line:248,column:26}},40:{start:{line:249,column:4},end:{line:264,column:9}},41:{start:{line:257,column:29},end:{line:260,column:12}},42:{start:{line:269,column:14},end:{line:269,column:26}},43:{start:{line:270,column:24},end:{line:276,column:5}},44:{start:{line:277,column:4},end:{line:341,column:5}},45:{start:{line:279,column:8},end:{line:279,column:79}},46:{start:{line:281,column:8},end:{line:281,column:85}},47:{start:{line:283,column:8},end:{line:283,column:77}},48:{start:{line:285,column:8},end:{line:285,column:76}},49:{start:{line:287,column:8},end:{line:287,column:77}},50:{start:{line:289,column:8},end:{line:301,column:13}},51:{start:{line:294,column:36},end:{line:297,column:14}},52:{start:{line:303,column:8},end:{line:303,column:77}},53:{start:{line:305,column:8},end:{line:332,column:13}},54:{start:{line:311,column:38},end:{line:314,column:16}},55:{start:{line:325,column:38},end:{line:328,column:16}},56:{start:{line:334,column:8},end:{line:334,column:76}},57:{start:{line:336,column:8},end:{line:336,column:74}},58:{start:{line:338,column:8},end:{line:338,column:74}},59:{start:{line:340,column:8},end:{line:340,column:20}},60:{start:{line:344,column:31},end:{line:344,column:80}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:11},end:{line:31,column:3}},line:14},1:{name:"(anonymous_1)",decl:{start:{line:23,column:20},end:{line:23,column:21}},loc:{start:{line:23,column:29},end:{line:26,column:12}},line:23},2:{name:"(anonymous_2)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:24},end:{line:39,column:3}},line:34},3:{name:"(anonymous_3)",decl:{start:{line:40,column:2},end:{line:40,column:3}},loc:{start:{line:40,column:19},end:{line:52,column:3}},line:40},4:{name:"(anonymous_4)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:11},end:{line:100,column:3}},line:53},5:{name:"(anonymous_5)",decl:{start:{line:66,column:20},end:{line:66,column:21}},loc:{start:{line:66,column:32},end:{line:69,column:12}},line:66},6:{name:"(anonymous_6)",decl:{start:{line:80,column:20},end:{line:80,column:21}},loc:{start:{line:80,column:33},end:{line:83,column:12}},line:80},7:{name:"(anonymous_7)",decl:{start:{line:92,column:20},end:{line:92,column:21}},loc:{start:{line:92,column:33},end:{line:95,column:12}},line:92},8:{name:"(anonymous_8)",decl:{start:{line:102,column:27},end:{line:102,column:28}},loc:{start:{line:102,column:34},end:{line:107,column:1}},line:102},9:{name:"(anonymous_9)",decl:{start:{line:109,column:2},end:{line:109,column:3}},loc:{start:{line:109,column:11},end:{line:147,column:3}},line:109},10:{name:"(anonymous_10)",decl:{start:{line:111,column:24},end:{line:111,column:25}},loc:{start:{line:111,column:38},end:{line:118,column:5}},line:111},11:{name:"(anonymous_11)",decl:{start:{line:126,column:20},end:{line:126,column:21}},loc:{start:{line:126,column:29},end:{line:129,column:12}},line:126},12:{name:"(anonymous_12)",decl:{start:{line:132,column:32},end:{line:132,column:33}},loc:{start:{line:132,column:57},end:{line:145,column:7}},line:132},13:{name:"(anonymous_13)",decl:{start:{line:141,column:22},end:{line:141,column:23}},loc:{start:{line:141,column:31},end:{line:141,column:52}},line:141},14:{name:"(anonymous_14)",decl:{start:{line:150,column:2},end:{line:150,column:3}},loc:{start:{line:150,column:11},end:{line:193,column:3}},line:150},15:{name:"(anonymous_15)",decl:{start:{line:152,column:24},end:{line:152,column:25}},loc:{start:{line:152,column:38},end:{line:159,column:5}},line:152},16:{name:"(anonymous_16)",decl:{start:{line:160,column:23},end:{line:160,column:24}},loc:{start:{line:160,column:33},end:{line:165,column:5}},line:160},17:{name:"(anonymous_17)",decl:{start:{line:178,column:32},end:{line:178,column:33}},loc:{start:{line:178,column:57},end:{line:191,column:7}},line:178},18:{name:"(anonymous_18)",decl:{start:{line:187,column:22},end:{line:187,column:23}},loc:{start:{line:187,column:31},end:{line:187,column:52}},line:187},19:{name:"(anonymous_19)",decl:{start:{line:196,column:2},end:{line:196,column:3}},loc:{start:{line:196,column:11},end:{line:210,column:3}},line:196},20:{name:"(anonymous_20)",decl:{start:{line:204,column:18},end:{line:204,column:19}},loc:{start:{line:204,column:28},end:{line:207,column:10}},line:204},21:{name:"(anonymous_21)",decl:{start:{line:213,column:2},end:{line:213,column:3}},loc:{start:{line:213,column:11},end:{line:244,column:3}},line:213},22:{name:"(anonymous_22)",decl:{start:{line:222,column:20},end:{line:222,column:21}},loc:{start:{line:222,column:30},end:{line:227,column:11}},line:222},23:{name:"(anonymous_23)",decl:{start:{line:235,column:20},end:{line:235,column:21}},loc:{start:{line:235,column:33},end:{line:240,column:11}},line:235},24:{name:"(anonymous_24)",decl:{start:{line:247,column:2},end:{line:247,column:3}},loc:{start:{line:247,column:11},end:{line:265,column:3}},line:247},25:{name:"(anonymous_25)",decl:{start:{line:257,column:20},end:{line:257,column:21}},loc:{start:{line:257,column:29},end:{line:260,column:12}},line:257},26:{name:"(anonymous_26)",decl:{start:{line:268,column:2},end:{line:268,column:3}},loc:{start:{line:268,column:11},end:{line:342,column:3}},line:268},27:{name:"(anonymous_27)",decl:{start:{line:294,column:22},end:{line:294,column:23}},loc:{start:{line:294,column:36},end:{line:297,column:14}},line:294},28:{name:"(anonymous_28)",decl:{start:{line:311,column:24},end:{line:311,column:25}},loc:{start:{line:311,column:38},end:{line:314,column:16}},line:311},29:{name:"(anonymous_29)",decl:{start:{line:325,column:24},end:{line:325,column:25}},loc:{start:{line:325,column:38},end:{line:328,column:16}},line:325}},branchMap:{0:{loc:{start:{line:41,column:18},end:{line:41,column:47}},type:"binary-expr",locations:[{start:{line:41,column:18},end:{line:41,column:41}},{start:{line:41,column:45},end:{line:41,column:47}}],line:41},1:{loc:{start:{line:79,column:17},end:{line:79,column:47}},type:"binary-expr",locations:[{start:{line:79,column:17},end:{line:79,column:42}},{start:{line:79,column:46},end:{line:79,column:47}}],line:79},2:{loc:{start:{line:91,column:17},end:{line:91,column:48}},type:"binary-expr",locations:[{start:{line:91,column:17},end:{line:91,column:42}},{start:{line:91,column:46},end:{line:91,column:48}}],line:91},3:{loc:{start:{line:259,column:17},end:{line:259,column:72}},type:"cond-expr",locations:[{start:{line:259,column:48},end:{line:259,column:51}},{start:{line:259,column:54},end:{line:259,column:72}}],line:259},4:{loc:{start:{line:277,column:4},end:{line:341,column:5}},type:"switch",locations:[{start:{line:278,column:6},end:{line:279,column:79}},{start:{line:280,column:6},end:{line:281,column:85}},{start:{line:282,column:6},end:{line:283,column:77}},{start:{line:284,column:6},end:{line:285,column:76}},{start:{line:286,column:6},end:{line:287,column:77}},{start:{line:288,column:6},end:{line:301,column:13}},{start:{line:302,column:6},end:{line:303,column:77}},{start:{line:304,column:6},end:{line:332,column:13}},{start:{line:333,column:6},end:{line:334,column:76}},{start:{line:335,column:6},end:{line:336,column:74}},{start:{line:337,column:6},end:{line:338,column:74}},{start:{line:339,column:6},end:{line:340,column:20}}],line:277},5:{loc:{start:{line:298,column:19},end:{line:298,column:86}},type:"binary-expr",locations:[{start:{line:298,column:19},end:{line:298,column:45}},{start:{line:298,column:49},end:{line:298,column:86}}],line:298},6:{loc:{start:{line:315,column:21},end:{line:315,column:92}},type:"binary-expr",locations:[{start:{line:315,column:21},end:{line:315,column:47}},{start:{line:315,column:51},end:{line:315,column:92}}],line:315},7:{loc:{start:{line:329,column:21},end:{line:329,column:92}},type:"binary-expr",locations:[{start:{line:329,column:21},end:{line:329,column:47}},{start:{line:329,column:51},end:{line:329,column:92}}],line:329}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0,0,0,0,0,0,0,0,0,0],5:[0,0],6:[0,0],7:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalSourcesTypeEditor.tsx"],names:[],mappings:"AA6BW,SACL,KADK;AA7BX,OAAO,WAAW;AAClB,SAAQ,cAAa;AACrB,SAA+B,uBAAuB;AAGtD,OAAO,WAAW;AAClB,OAAO,cAAc;AACrB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,uBAAuB;AAC9B,OAAO,gBAAgB;AACvB,OAAO,eAAe;AACtB,OAAO,mBAAmB;AAc1B,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SACN;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,cAAc;AAAA,UACvB,WAAW,OAAO,cAAc;AAAA,UAChC,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,UAAU,SAAO,KAAK,MAAM,SAAS;AAAA,YACnC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA;AAAA,MACH;AAAA,MACC,KAAK,MAAM;AAAA,OACd;AAAA,EACF;AACF;AAaA,MAAM,4BAA4B,MAAM,UAAoC;AAAA,EAC1E,eAAe,OAAiB;AAC9B,SAAK,MAAM,SAAS;AAAA,MAClB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,iBAAiB;AACf,UAAM,QAAQ,KAAK,MAAM,OAAO,SAAS,CAAC;AAC1C,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,OAAO,KAAK,MAAM,EAAE,UAAU;AAAA,QAC9B,WAAW,OAAO,cAAc;AAAA,QAChC,MAAK;AAAA,QACL,OAAO;AAAA,QACP,UAAU,KAAK,eAAe,KAAK,IAAI;AAAA;AAAA,IACzC;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SACL;AAAA,WAAK,eAAe;AAAA,MACrB;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,aAAa;AAAA,UACtB,WAAW,OAAO,cAAc;AAAA,UAChC,SAAS;AAAA,YACP,CAAC,OAAO,mCAAmC;AAAA,YAC3C,CAAC,OAAO,yBAAyB;AAAA,UACnC;AAAA,UACA,UAAU,YAAU,KAAK,MAAM,SAAS;AAAA,YACtC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA,UACD,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,eAAY;AAAA;AAAA,MACd;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,UAAU;AAAA,UACnB,WAAW,OAAO,cAAc;AAAA,UAChC,OAAO,KAAK,MAAM,OAAO,WAAW;AAAA,UACpC,UAAU,aAAW,KAAK,MAAM,SAAS;AAAA,YACvC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA;AAAA,MACH;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,UAAU;AAAA,UACnB,WAAW,OAAO,cAAc;AAAA,UAChC,OAAO,KAAK,MAAM,OAAO,WAAW;AAAA,UACpC,UAAU,aAAW,KAAK,MAAM,SAAS;AAAA,YACvC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA;AAAA,MACH;AAAA,MACC,KAAK,MAAM;AAAA,OACd;AAAA,EAEF;AACF;AAEA,MAAM,qBAAyE,CAAC,MAAO;AAAA,EACrF,EAAE,OAAO,EAAE,gBAAgB,GAAG,KAAK,WAAW;AAAA,EAC9C,EAAE,OAAO,EAAE,iBAAiB,GAAG,KAAK,YAAY;AAAA,EAChD,EAAE,OAAO,EAAE,oBAAoB,GAAG,KAAK,eAAe;AAAA,EACtD,EAAE,OAAO,EAAE,mBAAmB,GAAG,KAAK,cAAc;AACtD;AAUA,MAAM,0BAA0B,MAAM,UAAkC;AAAA,EACtE,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,cAAc,CAAC,KAAa,QAA0B;AAC1D,YAAM,cAAc,KAAK,MAAM,OAAO,YAAY,MAAM,CAAC;AACzD,kBAAY,GAAG,IAAI;AAEnB,WAAK,MAAM,SAAS;AAAA,QAClB,GAAG,KAAK,MAAM;AAAA,QACd;AAAA,MACF,CAAC;AAAA,IACH;AAEA,WAAO,qBAAC,SACN;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,WAAW;AAAA,UACpB,WAAW,OAAO,aAAa;AAAA,UAC/B,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,UAAU,SAAO,KAAK,MAAM,SAAS;AAAA,YACnC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA;AAAA,MACH;AAAA,MACC,mBAAmB,CAAC,EAAE,IAAI,CAAC,EAAC,OAAO,IAAG,GAAG,QAAQ;AAChD,eACE;AAAA,UAAC;AAAA;AAAA,YACC;AAAA,YAEA,QAAQ;AAAA,YACR,MAAK;AAAA,YACL,OAAO,KAAK,MAAM,OAAO,YAAY,GAAG;AAAA,YACxC,SAAS,CAAC,GAAG,CAAC;AAAA,YACd,UAAU,CAAC,QAA0B,YAAY,KAAK,GAAG;AAAA;AAAA,UALpD;AAAA,QAMP;AAAA,MAEJ,CAAC;AAAA,OACH;AAAA,EACF;AACF;AAUA,MAAM,0BAA0B,MAAM,UAAkC;AAAA,EACtE,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,cAAc,CAAC,KAAa,QAA0B;AAC1D,YAAM,cAAc,KAAK,MAAM,OAAO,YAAY,MAAM,CAAC;AACzD,kBAAY,GAAG,IAAI;AAEnB,WAAK,MAAM,SAAS;AAAA,QAClB,GAAG,KAAK,MAAM;AAAA,QACd;AAAA,MACF,CAAC;AAAA,IACH;AAEA,UAAM,aAAa,CAAC,SAAmB;AACrC,WAAK,MAAM,SAAS;AAAA,QAClB,GAAG,KAAK,MAAM;AAAA,QACd;AAAA,MACF,CAAC;AAAA,IACH;AAEA,WAAO,qBAAC,SACN;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,WAAW;AAAA,UACpB,WAAW,OAAO,aAAa;AAAA,UAC/B,MAAK;AAAA,UACL,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,SAAS,CAAC;AAAA,UACV,UAAU;AAAA;AAAA,MACZ;AAAA,MACC,mBAAmB,CAAC,EAAE,IAAI,CAAC,EAAC,OAAO,IAAG,GAAG,QAAQ;AAChD,eACE;AAAA,UAAC;AAAA;AAAA,YACC;AAAA,YAEA,QAAQ;AAAA,YACR,MAAK;AAAA,YACL,OAAO,KAAK,MAAM,OAAO,YAAY,GAAG;AAAA,YACxC,SAAS,CAAC,GAAG,CAAC;AAAA,YACd,UAAU,CAAC,QAA0B,YAAY,KAAK,GAAG;AAAA;AAAA,UALpD;AAAA,QAMP;AAAA,MAEJ,CAAC;AAAA,OACH;AAAA,EACF;AACF;AASA,MAAM,+BAA+B,MAAM,UAAuC;AAAA,EAChF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,OAAO,EAAE,aAAa;AAAA,QACtB,WAAW,OAAO,eAAe;AAAA,QACjC,OAAO,KAAK,MAAM,OAAO;AAAA,QACzB,UAAU,UAAQ,KAAK,MAAM,SAAS;AAAA,UACpC,GAAG,KAAK,MAAM;AAAA,UACd;AAAA,QACF,CAAC;AAAA;AAAA,IACH;AAAA,EACF;AACF;AAUA,MAAM,qCAAqC,MAAM,UAA6C;AAAA,EAC5F,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SACN;AAAA,0BAAC,SAAM,OAAO,EAAE,SAAS,GAAG,WAAW,OAAO,eAAe,MAC3D;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,WAAW;AAAA,UACX,UAAS;AAAA,UACT,UAAU,UAAQ;AAChB,iBAAK,MAAM,SAAS;AAAA,cAClB,GAAG,KAAK,MAAM;AAAA,cACd;AAAA,YACF,CAAC;AAAA,UACH;AAAA;AAAA,MACF,GACF;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,SAAS;AAAA,UAClB,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,UAAU,aAAW;AACnB,iBAAK,MAAM,SAAS;AAAA,cAClB,GAAG,KAAK,MAAM;AAAA,cACd;AAAA,YACF,CAAC;AAAA,UACH;AAAA;AAAA,MACF;AAAA,OACF;AAAA,EACF;AACF;AAUA,MAAM,4BAA4B,MAAM,UAAoC;AAAA,EAC1E,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SACN;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,aAAa;AAAA,UACtB,WAAW,OAAO,cAAc;AAAA,UAChC,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,eAAY;AAAA,UACZ,UAAU,CAAC,QAAgB,KAAK,MAAM,SAAS;AAAA,YAC7C,GAAG,KAAK,MAAM;AAAA,YACd,KAAK,IAAI,WAAW,YAAY,IAAI,MAAM,aAAa,GAAG;AAAA,UAC5D,CAAC;AAAA;AAAA,MACH;AAAA,MACC,KAAK,MAAM;AAAA,OACd;AAAA,EACF;AACF;AAQA,MAAM,uCAAuC,MAAM,UAA+C;AAAA,EAChG,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,cAAc;AAAA,MAClB,QAAQ,KAAK,MAAM;AAAA,MACnB,UAAU,KAAK,MAAM;AAAA,MACrB,GAAG,KAAK,MAAM;AAAA,MACd,MAAM,KAAK,MAAM;AAAA,MACjB,QAAQ,KAAK,MAAM;AAAA,IACrB;AACA,YAAO,KAAK,MAAM,MAAM;AAAA,MACtB,KAAK;AAAe,eAAO,oBAAC,0BAAwB,GAAG,aAAa;AAAA,MACpE,KAAK;AAAgB,eAAO,oBAAC,gCAA8B,GAAG,aAAa;AAAA,MAC3E,KAAK;AAAmB,eAAO,oBAAC,wBAAsB,GAAG,aAAa;AAAA,MACtE,KAAK;AAAe,eAAO,oBAAC,uBAAqB,GAAG,aAAa;AAAA,MACjE,KAAK;AAAmB,eAAO,oBAAC,wBAAsB,GAAG,aAAa;AAAA,MACtE,KAAK;AAAe,eAAO,oBAAC,uBAAqB,GAAG,aAClD;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,WAAW;AAAA,YACpB,WAAW,OAAO,cAAc;AAAA,YAChC,UAAU,cAAY,KAAK,MAAM,SAAS;AAAA,cACxC,GAAG,KAAK,MAAM;AAAA,cACd;AAAA,YACF,CAAC;AAAA,YACD,OAAO,KAAK,MAAM,OAAO,YAAY,OAAO,cAAc,SAAS;AAAA,YACnE,eAAY;AAAA;AAAA,QACd,GACF;AAAA,MACA,KAAK;AAAuB,eAAO,oBAAC,wBAAsB,GAAG,aAAa;AAAA,MAC1E,KAAK;AAAsB,eAAO,qBAAC,uBAAqB,GAAG,aACzD;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,WAAW;AAAA,cACpB,WAAW,OAAO,kBAAkB;AAAA,cACpC,UAAU,cAAY,KAAK,MAAM,SAAS;AAAA,gBACxC,GAAG,KAAK,MAAM;AAAA,gBACd;AAAA,cACF,CAAC;AAAA,cACD,OAAO,KAAK,MAAM,OAAO,YAAY,OAAO,kBAAkB,SAAS;AAAA,cACvE,eAAY;AAAA;AAAA,UACd;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,UAAU;AAAA,cACnB,WAAW,OAAO,kBAAkB;AAAA,cACpC,SAAS,OAAO,KAAK,OAAO,kBAAkB,SAAS,MAAM;AAAA,cAC7D,UAAU,cAAY,KAAK,MAAM,SAAS;AAAA,gBACxC,GAAG,KAAK,MAAM;AAAA,gBACd;AAAA,cACF,CAAC;AAAA,cACD,OAAO,KAAK,MAAM,OAAO,YAAY,OAAO,kBAAkB,SAAS;AAAA;AAAA,UACzE;AAAA,WACF;AAAA,MACA,KAAK;AAAkB,eAAO,oBAAC,uBAAqB,GAAG,aAAa;AAAA,MACpE,KAAK;AAAS,eAAO,oBAAC,qBAAmB,GAAG,aAAa;AAAA,MACzD,KAAK;AAAS,eAAO,oBAAC,qBAAmB,GAAG,aAAa;AAAA,MACzD;AAAS,eAAO;AAAA,IAClB;AAAA,EACF;AACF;AAEA,MAAM,yBAAyB,gBAAgB,EAAE,8BAA8B;AAC/E,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"1c36418517e1f333c2ed550c90b5a98669bcf70c"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return vn=function(){return s},s}vn();class rT extends En.Component{render(){vn().f[0]++;const e=(vn().s[0]++,this.props.t);return vn().s[1]++,ie.jsxs("div",{children:[ie.jsx(Bx,{label:e("TileJSON URL"),fieldSpec:is.source_vector.url,value:this.props.source.url,onChange:t=>(vn().f[1]++,vn().s[2]++,this.props.onChange({...this.props.source,url:t}))}),this.props.children]})}}class oT extends En.Component{changeTileUrls(e){vn().f[2]++,vn().s[3]++,this.props.onChange({...this.props.source,tiles:e})}renderTileUrls(){vn().f[3]++;const e=(vn().s[4]++,vn().b[0][0]++,this.props.source.tiles||(vn().b[0][1]++,[]));return vn().s[5]++,ie.jsx(aae,{label:this.props.t("Tile URL"),fieldSpec:is.source_vector.tiles,type:"url",value:e,onChange:this.changeTileUrls.bind(this)})}render(){vn().f[4]++;const e=(vn().s[6]++,this.props.t);return vn().s[7]++,ie.jsxs("div",{children:[this.renderTileUrls(),ie.jsx(F4,{label:e("Scheme Type"),fieldSpec:is.source_vector.scheme,options:[["xyz","xyz (Slippy map tilenames scheme)"],["tms","tms (OSGeo spec scheme)"]],onChange:t=>(vn().f[5]++,vn().s[8]++,this.props.onChange({...this.props.source,scheme:t})),value:this.props.source.scheme,"data-wd-key":"modal:sources.add.scheme_type"}),ie.jsx(fm,{label:e("Min Zoom"),fieldSpec:is.source_vector.minzoom,value:(vn().b[1][0]++,this.props.source.minzoom||(vn().b[1][1]++,0)),onChange:t=>(vn().f[6]++,vn().s[9]++,this.props.onChange({...this.props.source,minzoom:t}))}),ie.jsx(fm,{label:e("Max Zoom"),fieldSpec:is.source_vector.maxzoom,value:(vn().b[2][0]++,this.props.source.maxzoom||(vn().b[2][1]++,22)),onChange:t=>(vn().f[7]++,vn().s[10]++,this.props.onChange({...this.props.source,maxzoom:t}))}),this.props.children]})}}vn().s[11]++;const lae=n=>(vn().f[8]++,vn().s[12]++,[{label:n("Coord top left"),key:"top left"},{label:n("Coord top right"),key:"top right"},{label:n("Coord bottom right"),key:"bottom right"},{label:n("Coord bottom left"),key:"bottom left"}]);class oPe extends En.Component{render(){vn().f[9]++;const e=(vn().s[13]++,this.props.t);vn().s[14]++;const t=(i,r)=>{vn().f[10]++;const o=(vn().s[15]++,this.props.source.coordinates.slice(0));vn().s[16]++,o[i]=r,vn().s[17]++,this.props.onChange({...this.props.source,coordinates:o})};return vn().s[18]++,ie.jsxs("div",{children:[ie.jsx(Bx,{label:e("Image URL"),fieldSpec:is.source_image.url,value:this.props.source.url,onChange:i=>(vn().f[11]++,vn().s[19]++,this.props.onChange({...this.props.source,url:i}))}),lae(e).map(({label:i,key:r},o)=>(vn().f[12]++,vn().s[20]++,ie.jsx(rE,{label:i,length:2,type:"number",value:this.props.source.coordinates[o],default:[0,0],onChange:s=>(vn().f[13]++,vn().s[21]++,t(o,s))},r)))]})}}class sPe extends En.Component{render(){vn().f[14]++;const e=(vn().s[22]++,this.props.t);vn().s[23]++;const t=(r,o)=>{vn().f[15]++;const s=(vn().s[24]++,this.props.source.coordinates.slice(0));vn().s[25]++,s[r]=o,vn().s[26]++,this.props.onChange({...this.props.source,coordinates:s})};vn().s[27]++;const i=r=>{vn().f[16]++,vn().s[28]++,this.props.onChange({...this.props.source,urls:r})};return vn().s[29]++,ie.jsxs("div",{children:[ie.jsx(aae,{label:e("Video URL"),fieldSpec:is.source_video.urls,type:"string",value:this.props.source.urls,default:[],onChange:i}),lae(e).map(({label:r,key:o},s)=>(vn().f[17]++,vn().s[30]++,ie.jsx(rE,{label:r,length:2,type:"number",value:this.props.source.coordinates[s],default:[0,0],onChange:a=>(vn().f[18]++,vn().s[31]++,t(s,a))},o)))]})}}class aPe extends En.Component{render(){vn().f[19]++;const e=(vn().s[32]++,this.props.t);return vn().s[33]++,ie.jsx(Bx,{label:e("GeoJSON URL"),fieldSpec:is.source_geojson.data,value:this.props.source.data,onChange:t=>(vn().f[20]++,vn().s[34]++,this.props.onChange({...this.props.source,data:t}))})}}class lPe extends En.Component{render(){vn().f[21]++;const e=(vn().s[35]++,this.props.t);return vn().s[36]++,ie.jsxs("div",{children:[ie.jsx(Ls,{label:e("GeoJSON"),fieldSpec:is.source_geojson.data,children:ie.jsx(oL,{value:this.props.source.data,maxHeight:200,lintType:"json",onChange:t=>{vn().f[22]++,vn().s[37]++,this.props.onChange({...this.props.source,data:t})}})}),ie.jsx(rPe,{label:e("Cluster"),value:this.props.source.cluster,onChange:t=>{vn().f[23]++,vn().s[38]++,this.props.onChange({...this.props.source,cluster:t})}})]})}}class uPe extends En.Component{render(){vn().f[24]++;const e=(vn().s[39]++,this.props.t);return vn().s[40]++,ie.jsxs("div",{children:[ie.jsx(Bx,{label:e("PMTiles URL"),fieldSpec:is.source_vector.url,value:this.props.source.url,"data-wd-key":"modal:sources.add.source_url",onChange:t=>(vn().f[25]++,vn().s[41]++,this.props.onChange({...this.props.source,url:t.startsWith("pmtiles://")?(vn().b[3][0]++,t):(vn().b[3][1]++,`pmtiles://${t}`)}))}),this.props.children]})}}class cPe extends En.Component{render(){vn().f[26]++;const e=(vn().s[42]++,this.props.t),t=(vn().s[43]++,{source:this.props.source,onChange:this.props.onChange,t:this.props.t,i18n:this.props.i18n,tReady:this.props.tReady});switch(vn().s[44]++,this.props.mode){case"geojson_url":return vn().b[4][0]++,vn().s[45]++,ie.jsx(aPe,{...t});case"geojson_json":return vn().b[4][1]++,vn().s[46]++,ie.jsx(lPe,{...t});case"tilejson_vector":return vn().b[4][2]++,vn().s[47]++,ie.jsx(rT,{...t});case"tile_vector":return vn().b[4][3]++,vn().s[48]++,ie.jsx(oT,{...t});case"tilejson_raster":return vn().b[4][4]++,vn().s[49]++,ie.jsx(rT,{...t});case"tile_raster":return vn().b[4][5]++,vn().s[50]++,ie.jsx(oT,{...t,children:ie.jsx(fm,{label:e("Tile Size"),fieldSpec:is.source_raster.tileSize,onChange:i=>(vn().f[27]++,vn().s[51]++,this.props.onChange({...this.props.source,tileSize:i})),value:(vn().b[5][0]++,this.props.source.tileSize||(vn().b[5][1]++,is.source_raster.tileSize.default)),"data-wd-key":"modal:sources.add.tile_size"})});case"tilejson_raster-dem":return vn().b[4][6]++,vn().s[52]++,ie.jsx(rT,{...t});case"tilexyz_raster-dem":return vn().b[4][7]++,vn().s[53]++,ie.jsxs(oT,{...t,children:[ie.jsx(fm,{label:e("Tile Size"),fieldSpec:is.source_raster_dem.tileSize,onChange:i=>(vn().f[28]++,vn().s[54]++,this.props.onChange({...this.props.source,tileSize:i})),value:(vn().b[6][0]++,this.props.source.tileSize||(vn().b[6][1]++,is.source_raster_dem.tileSize.default)),"data-wd-key":"modal:sources.add.tile_size"}),ie.jsx(F4,{label:e("Encoding"),fieldSpec:is.source_raster_dem.encoding,options:Object.keys(is.source_raster_dem.encoding.values),onChange:i=>(vn().f[29]++,vn().s[55]++,this.props.onChange({...this.props.source,encoding:i})),value:(vn().b[7][0]++,this.props.source.encoding||(vn().b[7][1]++,is.source_raster_dem.encoding.default))})]});case"pmtiles_vector":return vn().b[4][8]++,vn().s[56]++,ie.jsx(uPe,{...t});case"image":return vn().b[4][9]++,vn().s[57]++,ie.jsx(oPe,{...t});case"video":return vn().b[4][10]++,vn().s[58]++,ie.jsx(sPe,{...t});default:return vn().b[4][11]++,vn().s[59]++,null}}}const uae=(vn().s[60]++,No()(cPe));function xm(){var n="/home/runner/work/maputnik/maputnik/src/libs/source.ts",e="871503159abbdc3b3ae7b24cdaefb6478172c58b",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/source.ts",statementMap:{0:{start:{line:2,column:27},end:{line:2,column:50}},1:{start:{line:3,column:2},end:{line:3,column:36}},2:{start:{line:4,column:2},end:{line:7,column:4}},3:{start:{line:10,column:2},end:{line:10,column:50}},4:{start:{line:13,column:25},end:{line:16,column:3}},5:{start:{line:17,column:2},end:{line:20,column:4}}},fnMap:{0:{name:"deleteSource",decl:{start:{line:1,column:16},end:{line:1,column:28}},loc:{start:{line:1,column:49},end:{line:8,column:1}},line:1},1:{name:"addSource",decl:{start:{line:9,column:16},end:{line:9,column:25}},loc:{start:{line:9,column:54},end:{line:11,column:1}},line:9},2:{name:"changeSource",decl:{start:{line:12,column:16},end:{line:12,column:28}},loc:{start:{line:12,column:57},end:{line:21,column:1}},line:12}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0},f:{0:0,1:0,2:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/source.ts"],names:[],mappings:"AAGO,gBAAS,aAAa,UAAoC,UAAkB;AACjF,QAAM,mBAAmB,EAAE,GAAG,SAAS,QAAO;AAC9C,SAAO,iBAAiB,QAAQ;AAChC,SAAO;AAAA,IACL,GAAG;AAAA,IACH,SAAS;AAAA,EACX;AACF;AAGO,gBAAS,UAAU,UAAoC,UAAkB,QAA6B;AAC3G,SAAO,aAAa,UAAU,UAAU,MAAM;AAChD;AAEO,gBAAS,aAAa,UAAoC,UAAkB,QAA6B;AAC9G,QAAM,iBAAiB;AAAA,IACrB,GAAG,SAAS;AAAA,IACZ,CAAC,QAAQ,GAAG;AAAA,EACd;AACA,SAAO;AAAA,IACL,GAAG;AAAA,IACH,SAAS;AAAA,EACX;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"871503159abbdc3b3ae7b24cdaefb6478172c58b"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return xm=function(){return s},s}xm();function APe(n,e){xm().f[0]++;const t=(xm().s[0]++,{...n.sources});return xm().s[1]++,delete t[e],xm().s[2]++,{...n,sources:t}}function $V(n,e,t){return xm().f[1]++,xm().s[3]++,cae(n,e,t)}function cae(n,e,t){xm().f[2]++;const i=(xm().s[4]++,{...n.sources,[e]:t});return xm().s[5]++,{...n,sources:i}}const hPe={type:"vector",url:"https://api.maptiler.com/tiles/v3-openmaptiles/tiles.json?key={key}",title:"OpenMapTiles v3"},dPe={type:"vector",url:"https://tile.thunderforest.com/thunderforest.transport-v2.json?apikey={key}",title:"Thunderforest Transport v2"},fPe={type:"vector",url:"https://tile.thunderforest.com/thunderforest.outdoors-v2.json?apikey={key}",title:"Thunderforest Outdoors v2"},pPe={type:"vector",url:"https://s3-eu-west-1.amazonaws.com/tiles.os.uk/v2/data/vector/open-zoomstack/config.json",title:"OS Open Zoomstack v2"},mPe={type:"vector",url:"https://tiles.locationiq.com/v3/pbf/tiles.json?key={key}",title:"LocationIQ"},VV={openmaptiles:hPe,thunderforest_transport:dPe,thunderforest_outdoors:fPe,open_zoomstack:pPe,locationiq:mPe};function Qt(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalSources.tsx",e="30dc2f79b5d8eab063b35a7a783386d299d39465",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalSources.tsx",statementMap:{0:{start:{line:16,column:4},end:{line:33,column:9}},1:{start:{line:20,column:23},end:{line:20,column:57}},2:{start:{line:37,column:2},end:{line:40,column:3}},3:{start:{line:38,column:4},end:{line:38,column:43}},4:{start:{line:38,column:22},end:{line:38,column:43}},5:{start:{line:39,column:4},end:{line:39,column:29}},6:{start:{line:41,column:2},end:{line:44,column:3}},7:{start:{line:42,column:4},end:{line:42,column:50}},8:{start:{line:42,column:22},end:{line:42,column:50}},9:{start:{line:43,column:4},end:{line:43,column:33}},10:{start:{line:45,column:2},end:{line:49,column:3}},11:{start:{line:46,column:4},end:{line:46,column:43}},12:{start:{line:46,column:22},end:{line:46,column:43}},13:{start:{line:47,column:4},end:{line:47,column:83}},14:{start:{line:47,column:59},end:{line:47,column:83}},15:{start:{line:48,column:4},end:{line:48,column:29}},16:{start:{line:50,column:2},end:{line:56,column:3}},17:{start:{line:51,column:4},end:{line:55,column:5}},18:{start:{line:52,column:6},end:{line:52,column:27}},19:{start:{line:54,column:6},end:{line:54,column:28}},20:{start:{line:57,column:2},end:{line:59,column:3}},21:{start:{line:58,column:4},end:{line:58,column:19}},22:{start:{line:60,column:2},end:{line:62,column:3}},23:{start:{line:61,column:4},end:{line:61,column:19}},24:{start:{line:63,column:2},end:{line:63,column:14}},25:{start:{line:67,column:14},end:{line:67,column:26}},26:{start:{line:68,column:4},end:{line:94,column:9}},27:{start:{line:80,column:27},end:{line:80,column:67}},28:{start:{line:99,column:4},end:{line:99,column:17}},29:{start:{line:100,column:4},end:{line:104,column:6}},30:{start:{line:107,column:19},end:{line:107,column:50}},31:{start:{line:108,column:25},end:{line:108,column:40}},32:{start:{line:109,column:4},end:{line:192,column:5}},33:{start:{line:111,column:8},end:{line:114,column:10}},34:{start:{line:116,column:8},end:{line:119,column:10}},35:{start:{line:121,column:8},end:{line:125,column:10}},36:{start:{line:127,column:8},end:{line:130,column:10}},37:{start:{line:132,column:8},end:{line:138,column:10}},38:{start:{line:140,column:8},end:{line:143,column:10}},39:{start:{line:145,column:8},end:{line:152,column:10}},40:{start:{line:154,column:8},end:{line:157,column:10}},41:{start:{line:159,column:8},end:{line:165,column:10}},42:{start:{line:167,column:8},end:{line:176,column:10}},43:{start:{line:178,column:8},end:{line:189,column:10}},44:{start:{line:191,column:8},end:{line:191,column:18}},45:{start:{line:194,column:10},end:{line:197,column:3}},46:{start:{line:195,column:33},end:{line:195,column:43}},47:{start:{line:196,column:4},end:{line:196,column:39}},48:{start:{line:198,column:19},end:{line:200,column:3}},49:{start:{line:199,column:4},end:{line:199,column:30}},50:{start:{line:202,column:14},end:{line:202,column:26}},51:{start:{line:203,column:32},end:{line:205,column:5}},52:{start:{line:206,column:4},end:{line:257,column:9}},53:{start:{line:213,column:27},end:{line:213,column:57}},54:{start:{line:235,column:30},end:{line:235,column:87}},55:{start:{line:262,column:27},end:{line:262,column:40}},56:{start:{line:263,column:4},end:{line:263,column:35}},57:{start:{line:264,column:4},end:{line:264,column:26}},58:{start:{line:267,column:28},end:{line:267,column:38}},59:{start:{line:268,column:22},end:{line:268,column:77}},60:{start:{line:269,column:26},end:{line:282,column:6}},61:{start:{line:270,column:21},end:{line:270,column:47}},62:{start:{line:271,column:6},end:{line:281,column:8}},63:{start:{line:276,column:29},end:{line:276,column:93}},64:{start:{line:277,column:26},end:{line:277,column:85}},65:{start:{line:283,column:27},end:{line:295,column:6}},66:{start:{line:283,column:75},end:{line:283,column:106}},67:{start:{line:284,column:21},end:{line:284,column:44}},68:{start:{line:285,column:6},end:{line:294,column:8}},69:{start:{line:291,column:26},end:{line:291,column:107}},70:{start:{line:296,column:4},end:{line:326,column:6}},71:{start:{line:319,column:45},end:{line:319,column:109}},72:{start:{line:329,column:21},end:{line:329,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:11},end:{line:34,column:3}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:20,column:17},end:{line:20,column:18}},loc:{start:{line:20,column:23},end:{line:20,column:57}},line:20},2:{name:"editorMode",decl:{start:{line:36,column:9},end:{line:36,column:19}},loc:{start:{line:36,column:28},end:{line:64,column:1}},line:36},3:{name:"(anonymous_3)",decl:{start:{line:66,column:2},end:{line:66,column:3}},loc:{start:{line:66,column:11},end:{line:95,column:3}},line:66},4:{name:"(anonymous_4)",decl:{start:{line:80,column:21},end:{line:80,column:22}},loc:{start:{line:80,column:27},end:{line:80,column:67}},line:80},5:{name:"(anonymous_5)",decl:{start:{line:98,column:2},end:{line:98,column:3}},loc:{start:{line:98,column:21},end:{line:105,column:3}},line:98},6:{name:"(anonymous_6)",decl:{start:{line:106,column:2},end:{line:106,column:3}},loc:{start:{line:106,column:22},end:{line:193,column:3}},line:106},7:{name:"(anonymous_7)",decl:{start:{line:194,column:10},end:{line:194,column:11}},loc:{start:{line:194,column:16},end:{line:197,column:3}},line:194},8:{name:"(anonymous_8)",decl:{start:{line:198,column:19},end:{line:198,column:20}},loc:{start:{line:198,column:31},end:{line:200,column:3}},line:198},9:{name:"(anonymous_9)",decl:{start:{line:201,column:2},end:{line:201,column:3}},loc:{start:{line:201,column:11},end:{line:258,column:3}},line:201},10:{name:"(anonymous_10)",decl:{start:{line:213,column:20},end:{line:213,column:21}},loc:{start:{line:213,column:27},end:{line:213,column:57}},line:213},11:{name:"(anonymous_11)",decl:{start:{line:235,column:20},end:{line:235,column:21}},loc:{start:{line:235,column:30},end:{line:235,column:87}},line:235},12:{name:"(anonymous_12)",decl:{start:{line:261,column:2},end:{line:261,column:3}},loc:{start:{line:261,column:21},end:{line:265,column:3}},line:261},13:{name:"(anonymous_13)",decl:{start:{line:266,column:2},end:{line:266,column:3}},loc:{start:{line:266,column:11},end:{line:327,column:3}},line:266},14:{name:"(anonymous_14)",decl:{start:{line:269,column:60},end:{line:269,column:61}},loc:{start:{line:269,column:74},end:{line:282,column:5}},line:269},15:{name:"(anonymous_15)",decl:{start:{line:276,column:20},end:{line:276,column:21}},loc:{start:{line:276,column:29},end:{line:276,column:93}},line:276},16:{name:"(anonymous_16)",decl:{start:{line:277,column:20},end:{line:277,column:21}},loc:{start:{line:277,column:26},end:{line:277,column:85}},line:277},17:{name:"(anonymous_17)",decl:{start:{line:283,column:61},end:{line:283,column:62}},loc:{start:{line:283,column:75},end:{line:283,column:106}},line:283},18:{name:"(anonymous_18)",decl:{start:{line:283,column:112},end:{line:283,column:113}},loc:{start:{line:283,column:126},end:{line:295,column:5}},line:283},19:{name:"(anonymous_19)",decl:{start:{line:291,column:20},end:{line:291,column:21}},loc:{start:{line:291,column:26},end:{line:291,column:107}},line:291},20:{name:"(anonymous_20)",decl:{start:{line:319,column:23},end:{line:319,column:24}},loc:{start:{line:319,column:45},end:{line:319,column:109}},line:319}},branchMap:{0:{loc:{start:{line:37,column:2},end:{line:40,column:3}},type:"if",locations:[{start:{line:37,column:2},end:{line:40,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},1:{loc:{start:{line:38,column:4},end:{line:38,column:43}},type:"if",locations:[{start:{line:38,column:4},end:{line:38,column:43}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:38},2:{loc:{start:{line:41,column:2},end:{line:44,column:3}},type:"if",locations:[{start:{line:41,column:2},end:{line:44,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:41},3:{loc:{start:{line:42,column:4},end:{line:42,column:50}},type:"if",locations:[{start:{line:42,column:4},end:{line:42,column:50}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:42},4:{loc:{start:{line:45,column:2},end:{line:49,column:3}},type:"if",locations:[{start:{line:45,column:2},end:{line:49,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:45},5:{loc:{start:{line:46,column:4},end:{line:46,column:43}},type:"if",locations:[{start:{line:46,column:4},end:{line:46,column:43}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:46},6:{loc:{start:{line:47,column:4},end:{line:47,column:83}},type:"if",locations:[{start:{line:47,column:4},end:{line:47,column:83}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:47},7:{loc:{start:{line:47,column:8},end:{line:47,column:57}},type:"binary-expr",locations:[{start:{line:47,column:8},end:{line:47,column:18}},{start:{line:47,column:22},end:{line:47,column:57}}],line:47},8:{loc:{start:{line:50,column:2},end:{line:56,column:3}},type:"if",locations:[{start:{line:50,column:2},end:{line:56,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:50},9:{loc:{start:{line:51,column:4},end:{line:55,column:5}},type:"if",locations:[{start:{line:51,column:4},end:{line:55,column:5}},{start:{line:53,column:11},end:{line:55,column:5}}],line:51},10:{loc:{start:{line:57,column:2},end:{line:59,column:3}},type:"if",locations:[{start:{line:57,column:2},end:{line:59,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:57},11:{loc:{start:{line:60,column:2},end:{line:62,column:3}},type:"if",locations:[{start:{line:60,column:2},end:{line:62,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:60},12:{loc:{start:{line:107,column:19},end:{line:107,column:50}},type:"binary-expr",locations:[{start:{line:107,column:19},end:{line:107,column:44}},{start:{line:107,column:48},end:{line:107,column:50}}],line:107},13:{loc:{start:{line:107,column:20},end:{line:107,column:36}},type:"binary-expr",locations:[{start:{line:107,column:20},end:{line:107,column:30}},{start:{line:107,column:34},end:{line:107,column:36}}],line:107},14:{loc:{start:{line:109,column:4},end:{line:192,column:5}},type:"switch",locations:[{start:{line:110,column:6},end:{line:114,column:10}},{start:{line:115,column:6},end:{line:119,column:10}},{start:{line:120,column:6},end:{line:125,column:10}},{start:{line:126,column:6},end:{line:130,column:10}},{start:{line:131,column:6},end:{line:138,column:10}},{start:{line:139,column:6},end:{line:143,column:10}},{start:{line:144,column:6},end:{line:152,column:10}},{start:{line:153,column:6},end:{line:157,column:10}},{start:{line:158,column:6},end:{line:165,column:10}},{start:{line:166,column:6},end:{line:176,column:10}},{start:{line:177,column:6},end:{line:189,column:10}},{start:{line:190,column:6},end:{line:191,column:18}}],line:109},15:{loc:{start:{line:123,column:19},end:{line:123,column:42}},type:"binary-expr",locations:[{start:{line:123,column:19},end:{line:123,column:33}},{start:{line:123,column:37},end:{line:123,column:42}}],line:123},16:{loc:{start:{line:129,column:15},end:{line:129,column:72}},type:"binary-expr",locations:[{start:{line:129,column:15},end:{line:129,column:25}},{start:{line:129,column:29},end:{line:129,column:72}}],line:129},17:{loc:{start:{line:134,column:17},end:{line:134,column:80}},type:"binary-expr",locations:[{start:{line:134,column:17},end:{line:134,column:29}},{start:{line:134,column:33},end:{line:134,column:80}}],line:134},18:{loc:{start:{line:135,column:19},end:{line:135,column:38}},type:"binary-expr",locations:[{start:{line:135,column:19},end:{line:135,column:33}},{start:{line:135,column:37},end:{line:135,column:38}}],line:135},19:{loc:{start:{line:136,column:19},end:{line:136,column:39}},type:"binary-expr",locations:[{start:{line:136,column:19},end:{line:136,column:33}},{start:{line:136,column:37},end:{line:136,column:39}}],line:136},20:{loc:{start:{line:137,column:18},end:{line:137,column:40}},type:"binary-expr",locations:[{start:{line:137,column:18},end:{line:137,column:31}},{start:{line:137,column:35},end:{line:137,column:40}}],line:137},21:{loc:{start:{line:142,column:15},end:{line:142,column:72}},type:"binary-expr",locations:[{start:{line:142,column:15},end:{line:142,column:25}},{start:{line:142,column:29},end:{line:142,column:72}}],line:142},22:{loc:{start:{line:147,column:17},end:{line:147,column:80}},type:"binary-expr",locations:[{start:{line:147,column:17},end:{line:147,column:29}},{start:{line:147,column:33},end:{line:147,column:80}}],line:147},23:{loc:{start:{line:148,column:19},end:{line:148,column:38}},type:"binary-expr",locations:[{start:{line:148,column:19},end:{line:148,column:33}},{start:{line:148,column:37},end:{line:148,column:38}}],line:148},24:{loc:{start:{line:149,column:19},end:{line:149,column:39}},type:"binary-expr",locations:[{start:{line:149,column:19},end:{line:149,column:33}},{start:{line:149,column:37},end:{line:149,column:39}}],line:149},25:{loc:{start:{line:150,column:18},end:{line:150,column:40}},type:"binary-expr",locations:[{start:{line:150,column:18},end:{line:150,column:31}},{start:{line:150,column:35},end:{line:150,column:40}}],line:150},26:{loc:{start:{line:151,column:20},end:{line:151,column:42}},type:"binary-expr",locations:[{start:{line:151,column:20},end:{line:151,column:35}},{start:{line:151,column:39},end:{line:151,column:42}}],line:151},27:{loc:{start:{line:156,column:15},end:{line:156,column:72}},type:"binary-expr",locations:[{start:{line:156,column:15},end:{line:156,column:25}},{start:{line:156,column:29},end:{line:156,column:72}}],line:156},28:{loc:{start:{line:161,column:17},end:{line:161,column:80}},type:"binary-expr",locations:[{start:{line:161,column:17},end:{line:161,column:29}},{start:{line:161,column:33},end:{line:161,column:80}}],line:161},29:{loc:{start:{line:162,column:19},end:{line:162,column:38}},type:"binary-expr",locations:[{start:{line:162,column:19},end:{line:162,column:33}},{start:{line:162,column:37},end:{line:162,column:38}}],line:162},30:{loc:{start:{line:163,column:19},end:{line:163,column:39}},type:"binary-expr",locations:[{start:{line:163,column:19},end:{line:163,column:33}},{start:{line:163,column:37},end:{line:163,column:39}}],line:163},31:{loc:{start:{line:164,column:20},end:{line:164,column:42}},type:"binary-expr",locations:[{start:{line:164,column:20},end:{line:164,column:35}},{start:{line:164,column:39},end:{line:164,column:42}}],line:164}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0,0,0,0,0,0,0,0,0,0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0],26:[0,0],27:[0,0],28:[0,0],29:[0,0],30:[0,0],31:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalSources.tsx"],names:[],mappings:"AAiCU,cACA,YADA;AAjCV,OAAO,WAAW;AAClB,SAAQ,oBAAoB,gBAAe;AAC3C,OAAO,YAAY;AAEnB,SAA+B,uBAAuB;AAEtD,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,4BAAiD;AAExD,OAAO,WAAW;AAClB,SAAS,cAAc,WAAW,oBAAoB;AACtD,OAAO,mBAAmB;AAW1B,MAAM,qBAAqB,MAAM,UAA6B;AAAA,EAC5D,SAAS;AACP,WAAO,oBAAC,SAAI,WAAU,0BACpB;AAAA,MAAC;AAAA;AAAA,QACC,WAAU;AAAA,QACV,SAAS,MAAM,KAAK,MAAM,SAAS,KAAK,MAAM,EAAE;AAAA,QAEhD;AAAA,+BAAC,SAAI,WAAU,+BACb;AAAA,gCAAC,OAAE,WAAU,+BAA+B,eAAK,MAAM,OAAM;AAAA,YAC7D,qBAAC,OAAE,WAAU,6BAA4B;AAAA;AAAA,cAAE,KAAK,MAAM;AAAA,eAAG;AAAA,aAC3D;AAAA,UACA,oBAAC,UAAK,WAAU,kBAAiB;AAAA,UACjC,oBAAC,sBAAmB;AAAA;AAAA;AAAA,IACtB,GACF;AAAA,EACF;AACF;AAEA,SAAS,WAAW,QAA6B;AAC/C,MAAG,OAAO,SAAS,UAAU;AAC3B,QAAG,OAAO,MAAO,QAAO;AACxB,WAAO;AAAA,EACT;AACA,MAAG,OAAO,SAAS,cAAc;AAC/B,QAAG,OAAO,MAAO,QAAO;AACxB,WAAO;AAAA,EACT;AACA,MAAG,OAAO,SAAS,UAAU;AAC3B,QAAG,OAAO,MAAO,QAAO;AACxB,QAAG,OAAO,OAAO,OAAO,IAAI,WAAW,YAAY,EAAG,QAAO;AAC7D,WAAO;AAAA,EACT;AACA,MAAG,OAAO,SAAS,WAAW;AAC5B,QAAI,OAAO,OAAO,SAAU,UAAU;AACpC,aAAO;AAAA,IACT,OACK;AACH,aAAO;AAAA,IACT;AAAA,EACF;AACA,MAAG,OAAO,SAAS,SAAS;AAC1B,WAAO;AAAA,EACT;AACA,MAAG,OAAO,SAAS,SAAS;AAC1B,WAAO;AAAA,EACT;AACA,SAAO;AACT;AASA,MAAM,qCAAqC,MAAM,UAA6C;AAAA,EAC5F,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SAAI,WAAU,sCACpB;AAAA,2BAAC,SAAI,WAAU,6CACb;AAAA,6BAAC,UAAK,WAAU,gDAA+C;AAAA;AAAA,UAAE,KAAK,MAAM;AAAA,WAAS;AAAA,QACrF,oBAAC,UAAK,WAAU,kBAAiB;AAAA,QACjC;AAAA,UAAC;AAAA;AAAA,YACC,cAAY,EAAE,gCAAgC,EAAC,UAAU,KAAK,MAAM,SAAQ,CAAC;AAAA,YAC7E,WAAU;AAAA,YACV,SAAS,MAAK,KAAK,MAAM,SAAS,KAAK,MAAM,QAAQ;AAAA,YACrD,OAAO,EAAC,iBAAiB,cAAa;AAAA,YAEtC,8BAAC,YAAS;AAAA;AAAA,QACZ;AAAA,SACF;AAAA,MACA,oBAAC,SAAI,WAAU,8CACb;AAAA,QAAC;AAAA;AAAA,UACC,UAAU,KAAK,MAAM;AAAA,UACrB,MAAM,WAAW,KAAK,MAAM,MAAM;AAAA,UAClC,QAAQ,KAAK,MAAM;AAAA;AAAA,MACrB,GACF;AAAA,OACF;AAAA,EACF;AACF;AAYA,MAAM,kBAAkB,MAAM,UAA0C;AAAA,EACtE,YAAY,OAAuB;AACjC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,MAAM;AAAA,MACN,UAAU,MAAM,WAAW;AAAA,MAC3B,QAAQ,KAAK,cAAc,iBAAiB;AAAA,IAC9C;AAAA,EACF;AAAA,EAEA,cAAc,MAAuC;AACnD,UAAM,UAAU,KAAK,SAAS,CAAC,GAAG,UAAU,CAAC;AAC7C,UAAM,EAAC,SAAQ,IAAI,OAAO;AAE1B,YAAO,MAAM;AAAA,MACX,KAAK;AAAkB,eAAO;AAAA,UAC5B,MAAM;AAAA,UACN,KAAK,GAAG,QAAQ;AAAA,QAClB;AAAA,MACA,KAAK;AAAe,eAAO;AAAA,UACzB,MAAM;AAAA,UACN,MAAM,GAAG,QAAQ;AAAA,QACnB;AAAA,MACA,KAAK;AAAgB,eAAO;AAAA,UAC1B,MAAM;AAAA,UACN,SAAU,OAAsC,WAAW;AAAA,UAC3D,MAAM;AAAA,QACR;AAAA,MACA,KAAK;AAAmB,eAAO;AAAA,UAC7B,MAAM;AAAA,UACN,KAAM,OAAqC,OAAO,GAAG,QAAQ;AAAA,QAC/D;AAAA,MACA,KAAK;AAAe,eAAO;AAAA,UACzB,MAAM;AAAA,UACN,OAAQ,OAAqC,SAAS,CAAC,GAAG,QAAQ,kCAAkC;AAAA,UACpG,SAAU,OAAqC,WAAW;AAAA,UAC1D,SAAU,OAAqC,WAAW;AAAA,UAC1D,QAAS,OAAqC,UAAU;AAAA,QAC1D;AAAA,MACA,KAAK;AAAmB,eAAO;AAAA,UAC7B,MAAM;AAAA,UACN,KAAM,OAAqC,OAAO,GAAG,QAAQ;AAAA,QAC/D;AAAA,MACA,KAAK;AAAe,eAAO;AAAA,UACzB,MAAM;AAAA,UACN,OAAQ,OAAqC,SAAS,CAAC,GAAG,QAAQ,kCAAkC;AAAA,UACpG,SAAU,OAAqC,WAAW;AAAA,UAC1D,SAAU,OAAqC,WAAW;AAAA,UAC1D,QAAS,OAAqC,UAAU;AAAA,UACxD,UAAW,OAAqC,YAAY;AAAA,QAC9D;AAAA,MACA,KAAK;AAAuB,eAAO;AAAA,UACjC,MAAM;AAAA,UACN,KAAM,OAAwC,OAAO,GAAG,QAAQ;AAAA,QAClE;AAAA,MACA,KAAK;AAAsB,eAAO;AAAA,UAChC,MAAM;AAAA,UACN,OAAQ,OAAwC,SAAS,CAAC,GAAG,QAAQ,kCAAkC;AAAA,UACvG,SAAU,OAAwC,WAAW;AAAA,UAC7D,SAAU,OAAwC,WAAW;AAAA,UAC7D,UAAW,OAAwC,YAAY;AAAA,QACjE;AAAA,MACA,KAAK;AAAS,eAAO;AAAA,UACnB,MAAM;AAAA,UACN,KAAK,GAAG,QAAQ;AAAA,UAChB,aAAa;AAAA,YACX,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,UACN;AAAA,QACF;AAAA,MACA,KAAK;AAAS,eAAO;AAAA,UACnB,MAAM;AAAA,UACN,MAAM;AAAA,YACJ,GAAG,QAAQ;AAAA,UACb;AAAA,UACA,aAAa;AAAA,YACX,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,UACN;AAAA,QACF;AAAA,MACA;AAAS,eAAO,CAAC;AAAA,IACnB;AAAA,EACF;AAAA,EAEA,QAAQ,MAAM;AACZ,UAAM,EAAC,QAAQ,SAAQ,IAAI,KAAK;AAChC,SAAK,MAAM,MAAM,UAAU,MAAM;AAAA,EACnC;AAAA,EAEA,iBAAiB,CAAC,WAAgC;AAChD,SAAK,SAAS,EAAC,OAAM,CAAC;AAAA,EACxB;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AAQrB,UAAM,sBAAsB;AAAA,MAC1B,KAAK,OAAO,cAAc,KAAK;AAAA,IACjC;AAEA,WAAO,qBAAC,SAAI,WAAU,uBACpB;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,WAAW;AAAA,UACpB,WAAW,EAAC,KAAK,EAAE,wFAAwF,EAAC;AAAA,UAC5G,OAAO,KAAK,MAAM;AAAA,UAClB,UAAU,CAAC,MAAc,KAAK,SAAS,EAAE,UAAU,EAAC,CAAC;AAAA,UACrD,eAAY;AAAA;AAAA,MACd;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,aAAa;AAAA,UACtB,WAAW;AAAA,UACX,SAAS;AAAA,YACP,CAAC,gBAAgB,EAAE,gBAAgB,CAAC;AAAA,YACpC,CAAC,eAAe,EAAE,eAAe,CAAC;AAAA,YAClC,CAAC,mBAAmB,EAAE,uBAAuB,CAAC;AAAA,YAC9C,CAAC,eAAe,EAAE,oBAAoB,CAAC;AAAA,YACvC,CAAC,mBAAmB,EAAE,uBAAuB,CAAC;AAAA,YAC9C,CAAC,eAAe,EAAE,oBAAoB,CAAC;AAAA,YACvC,CAAC,uBAAuB,EAAE,2BAA2B,CAAC;AAAA,YACtD,CAAC,sBAAsB,EAAE,uBAAuB,CAAC;AAAA,YACjD,CAAC,kBAAkB,EAAE,kBAAkB,CAAC;AAAA,YACxC,CAAC,SAAS,EAAE,OAAO,CAAC;AAAA,YACpB,CAAC,SAAS,EAAE,OAAO,CAAC;AAAA,UACtB;AAAA,UACA,UAAU,UAAQ,KAAK,SAAS,EAAC,MAA0B,QAAQ,KAAK,cAAc,IAAkB,EAAC,CAAC;AAAA,UAC1G,OAAO,KAAK,MAAM;AAAA,UAClB,eAAY;AAAA;AAAA,MACd;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,UAAU,KAAK;AAAA,UACf,MAAM,KAAK,MAAM;AAAA,UACjB,QAAQ,KAAK,MAAM;AAAA;AAAA,MACrB;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,SAAS,KAAK;AAAA,UACd,eAAY;AAAA,UAEX,YAAE,YAAY;AAAA;AAAA,MACjB;AAAA,OACF;AAAA,EACF;AACF;AASA,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,WAAW,QAAqE;AAC9E,UAAM,iBAAiB,EAAC,GAAG,OAAM;AACjC,WAAO,eAAe,OAAO;AAC7B,WAAO;AAAA,EACT;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,GAAG,SAAQ,IAAI,KAAK;AAC3B,UAAM,YAAY,EAAC,GAAG,MAAM,KAAK,MAAM,MAAM,QAAQ,KAAK,MAAM,OAAM;AACtE,UAAM,gBAAgB,OAAO,KAAK,SAAS,OAAO,EAAE,IAAI,cAAY;AAClE,YAAM,SAAS,SAAS,QAAQ,QAAQ;AACxC,aAAO;AAAA,QAAC;AAAA;AAAA,UAEN;AAAA,UACA;AAAA,UACA,UAAU,CAAC,QAA6B,KAAK,MAAM,eAAe,aAAa,UAAU,UAAU,GAAG,CAAC;AAAA,UACvG,UAAU,MAAM,KAAK,MAAM,eAAe,aAAa,UAAU,QAAQ,CAAC;AAAA,UACzE,GAAG;AAAA;AAAA,QALC;AAAA,MAMP;AAAA,IACF,CAAC;AAED,UAAM,iBAAiB,OAAO,KAAK,aAAa,EAAE,OAAO,CAAC,aAAqB,EAAE,YAAY,SAAS,QAAQ,EAAE,IAAI,CAAC,aAAqB;AACxI,YAAM,SAAS,cAAc,QAAsC;AACnE,aAAO;AAAA,QAAC;AAAA;AAAA,UAEN,IAAI;AAAA,UACJ,MAAM,OAAO;AAAA,UACb,OAAO,OAAO;AAAA,UACd,UAAU,MAAM,KAAK,MAAM,eAAe,UAAU,UAAU,UAAU,KAAK,WAAW,MAAM,CAAC,CAAC;AAAA;AAAA,QAJ3F;AAAA,MAKP;AAAA,IACF,CAAC;AAED,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,SAAS;AAAA,QAElB;AAAA,+BAAC,aAAQ,WAAU,0BACjB;AAAA,gCAAC,QAAI,YAAE,gBAAgB,GAAE;AAAA,YACxB;AAAA,aACH;AAAA,UAEA,qBAAC,aAAQ,WAAU,0BACjB;AAAA,gCAAC,QAAI,YAAE,sBAAsB,GAAE;AAAA,YAC/B,oBAAC,OACE,YAAE,0DAA0D,GAC/D;AAAA,YACA,oBAAC,SAAI,WAAU,2BAA0B,OAAO,EAAC,UAAU,IAAG,GAC3D,0BACH;AAAA,aACF;AAAA,UAEA,qBAAC,aAAQ,WAAU,0BACjB;AAAA,gCAAC,QAAI,YAAE,gBAAgB,GAAE;AAAA,YACzB,oBAAC,OAAG,YAAE,8FAA8F,GAAE;AAAA,YACtG;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,CAAC,UAAkB,WAAgC,KAAK,MAAM,eAAe,UAAU,UAAU,UAAU,MAAM,CAAC;AAAA,gBACxH,GAAG;AAAA;AAAA,YACN;AAAA,aACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"30dc2f79b5d8eab063b35a7a783386d299d39465"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Qt=function(){return s},s}Qt();class gPe extends En.Component{render(){return Qt().f[0]++,Qt().s[0]++,ie.jsx("div",{className:"maputnik-public-source",children:ie.jsxs(Zs,{className:"maputnik-public-source-select",onClick:()=>(Qt().f[1]++,Qt().s[1]++,this.props.onSelect(this.props.id)),children:[ie.jsxs("div",{className:"maputnik-public-source-info",children:[ie.jsx("p",{className:"maputnik-public-source-name",children:this.props.title}),ie.jsxs("p",{className:"maputnik-public-source-id",children:["#",this.props.id]})]}),ie.jsx("span",{className:"maputnik-space"}),ie.jsx(QX,{})]})})}}function yPe(n){return Qt().f[2]++,Qt().s[2]++,n.type==="raster"?(Qt().b[0][0]++,Qt().s[3]++,n.tiles?(Qt().b[1][0]++,Qt().s[4]++,"tile_raster"):(Qt().b[1][1]++,Qt().s[5]++,"tilejson_raster")):(Qt().b[0][1]++,Qt().s[6]++,n.type==="raster-dem"?(Qt().b[2][0]++,Qt().s[7]++,n.tiles?(Qt().b[3][0]++,Qt().s[8]++,"tilexyz_raster-dem"):(Qt().b[3][1]++,Qt().s[9]++,"tilejson_raster-dem")):(Qt().b[2][1]++,Qt().s[10]++,n.type==="vector"?(Qt().b[4][0]++,Qt().s[11]++,n.tiles?(Qt().b[5][0]++,Qt().s[12]++,"tile_vector"):(Qt().b[5][1]++,Qt().s[13]++,Qt().b[7][0]++,n.url&&(Qt().b[7][1]++,n.url.startsWith("pmtiles://"))?(Qt().b[6][0]++,Qt().s[14]++,"pmtiles_vector"):(Qt().b[6][1]++,Qt().s[15]++,"tilejson_vector"))):(Qt().b[4][1]++,Qt().s[16]++,n.type==="geojson"?(Qt().b[8][0]++,Qt().s[17]++,typeof n.data=="string"?(Qt().b[9][0]++,Qt().s[18]++,"geojson_url"):(Qt().b[9][1]++,Qt().s[19]++,"geojson_json")):(Qt().b[8][1]++,Qt().s[20]++,n.type==="image"?(Qt().b[10][0]++,Qt().s[21]++,"image"):(Qt().b[10][1]++,Qt().s[22]++,n.type==="video"?(Qt().b[11][0]++,Qt().s[23]++,"video"):(Qt().b[11][1]++,Qt().s[24]++,null))))))}class vPe extends En.Component{render(){Qt().f[3]++;const e=(Qt().s[25]++,this.props.t);return Qt().s[26]++,ie.jsxs("div",{className:"maputnik-active-source-type-editor",children:[ie.jsxs("div",{className:"maputnik-active-source-type-editor-header",children:[ie.jsxs("span",{className:"maputnik-active-source-type-editor-header-id",children:["#",this.props.sourceId]}),ie.jsx("span",{className:"maputnik-space"}),ie.jsx(Zs,{"aria-label":e("Remove '{{sourceId}}' source",{sourceId:this.props.sourceId}),className:"maputnik-active-source-type-editor-header-delete",onClick:()=>(Qt().f[4]++,Qt().s[27]++,this.props.onDelete(this.props.sourceId)),style:{backgroundColor:"transparent"},children:ie.jsx(Hb,{})})]}),ie.jsx("div",{className:"maputnik-active-source-type-editor-content",children:ie.jsx(uae,{onChange:this.props.onChange,mode:yPe(this.props.source),source:this.props.source})})]})}}class bPe extends En.Component{constructor(e){Qt().f[5]++,Qt().s[28]++,super(e),Qt().s[29]++,this.state={mode:"tilejson_vector",sourceId:Ed.generateId(),source:this.defaultSource("tilejson_vector")}}defaultSource(e){Qt().f[6]++;const t=(Qt().s[30]++,Qt().b[12][0]++,(Qt().b[13][0]++,this.state||(Qt().b[13][1]++,{})).source||(Qt().b[12][1]++,{})),{protocol:i}=(Qt().s[31]++,window.location);switch(Qt().s[32]++,e){case"pmtiles_vector":return Qt().b[14][0]++,Qt().s[33]++,{type:"vector",url:`${i}//localhost:3000/file.pmtiles`};case"geojson_url":return Qt().b[14][1]++,Qt().s[34]++,{type:"geojson",data:`${i}//localhost:3000/geojson.json`};case"geojson_json":return Qt().b[14][2]++,Qt().s[35]++,{type:"geojson",cluster:(Qt().b[15][0]++,t.cluster||(Qt().b[15][1]++,!1)),data:""};case"tilejson_vector":return Qt().b[14][3]++,Qt().s[36]++,{type:"vector",url:(Qt().b[16][0]++,t.url||(Qt().b[16][1]++,`${i}//localhost:3000/tilejson.json`))};case"tile_vector":return Qt().b[14][4]++,Qt().s[37]++,{type:"vector",tiles:(Qt().b[17][0]++,t.tiles||(Qt().b[17][1]++,[`${i}//localhost:3000/{x}/{y}/{z}.pbf`])),minzoom:(Qt().b[18][0]++,t.minzoom||(Qt().b[18][1]++,0)),maxzoom:(Qt().b[19][0]++,t.maxzoom||(Qt().b[19][1]++,14)),scheme:(Qt().b[20][0]++,t.scheme||(Qt().b[20][1]++,"xyz"))};case"tilejson_raster":return Qt().b[14][5]++,Qt().s[38]++,{type:"raster",url:(Qt().b[21][0]++,t.url||(Qt().b[21][1]++,`${i}//localhost:3000/tilejson.json`))};case"tile_raster":return Qt().b[14][6]++,Qt().s[39]++,{type:"raster",tiles:(Qt().b[22][0]++,t.tiles||(Qt().b[22][1]++,[`${i}//localhost:3000/{x}/{y}/{z}.png`])),minzoom:(Qt().b[23][0]++,t.minzoom||(Qt().b[23][1]++,0)),maxzoom:(Qt().b[24][0]++,t.maxzoom||(Qt().b[24][1]++,14)),scheme:(Qt().b[25][0]++,t.scheme||(Qt().b[25][1]++,"xyz")),tileSize:(Qt().b[26][0]++,t.tileSize||(Qt().b[26][1]++,512))};case"tilejson_raster-dem":return Qt().b[14][7]++,Qt().s[40]++,{type:"raster-dem",url:(Qt().b[27][0]++,t.url||(Qt().b[27][1]++,`${i}//localhost:3000/tilejson.json`))};case"tilexyz_raster-dem":return Qt().b[14][8]++,Qt().s[41]++,{type:"raster-dem",tiles:(Qt().b[28][0]++,t.tiles||(Qt().b[28][1]++,[`${i}//localhost:3000/{x}/{y}/{z}.png`])),minzoom:(Qt().b[29][0]++,t.minzoom||(Qt().b[29][1]++,0)),maxzoom:(Qt().b[30][0]++,t.maxzoom||(Qt().b[30][1]++,14)),tileSize:(Qt().b[31][0]++,t.tileSize||(Qt().b[31][1]++,512))};case"image":return Qt().b[14][9]++,Qt().s[42]++,{type:"image",url:`${i}//localhost:3000/image.png`,coordinates:[[0,0],[0,0],[0,0],[0,0]]};case"video":return Qt().b[14][10]++,Qt().s[43]++,{type:"video",urls:[`${i}//localhost:3000/movie.mp4`],coordinates:[[0,0],[0,0],[0,0],[0,0]]};default:return Qt().b[14][11]++,Qt().s[44]++,{}}}onAdd=(Qt().s[45]++,()=>{Qt().f[7]++;const{source:e,sourceId:t}=(Qt().s[46]++,this.state);Qt().s[47]++,this.props.onAdd(t,e)});onChangeSource=(Qt().s[48]++,e=>{Qt().f[8]++,Qt().s[49]++,this.setState({source:e})});render(){Qt().f[9]++;const e=(Qt().s[50]++,this.props.t),t=(Qt().s[51]++,{doc:Zr.source_vector.type.doc});return Qt().s[52]++,ie.jsxs("div",{className:"maputnik-add-source",children:[ie.jsx(md,{label:e("Source ID"),fieldSpec:{doc:e("Unique ID that identifies the source and is used in the layer to reference the source.")},value:this.state.sourceId,onChange:i=>(Qt().f[10]++,Qt().s[53]++,this.setState({sourceId:i})),"data-wd-key":"modal:sources.add.source_id"}),ie.jsx(F4,{label:e("Source Type"),fieldSpec:t,options:[["geojson_json",e("GeoJSON (JSON)")],["geojson_url",e("GeoJSON (URL)")],["tilejson_vector",e("Vector (TileJSON URL)")],["tile_vector",e("Vector (Tile URLs)")],["tilejson_raster",e("Raster (TileJSON URL)")],["tile_raster",e("Raster (Tile URLs)")],["tilejson_raster-dem",e("Raster DEM (TileJSON URL)")],["tilexyz_raster-dem",e("Raster DEM (XYZ URLs)")],["pmtiles_vector",e("Vector (PMTiles)")],["image",e("Image")],["video",e("Video")]],onChange:i=>(Qt().f[11]++,Qt().s[54]++,this.setState({mode:i,source:this.defaultSource(i)})),value:this.state.mode,"data-wd-key":"modal:sources.add.source_type"}),ie.jsx(uae,{onChange:this.onChangeSource,mode:this.state.mode,source:this.state.source}),ie.jsx(Zs,{className:"maputnik-add-source-button",onClick:this.onAdd,"data-wd-key":"modal:sources.add.add_source",children:e("Add Source")})]})}}class CPe extends En.Component{stripTitle(e){Qt().f[12]++;const t=(Qt().s[55]++,{...e});return Qt().s[56]++,delete t.title,Qt().s[57]++,t}render(){Qt().f[13]++;const{t:e,mapStyle:t}=(Qt().s[58]++,this.props),i=(Qt().s[59]++,{t:e,i18n:this.props.i18n,tReady:this.props.tReady}),r=(Qt().s[60]++,Object.keys(t.sources).map(s=>{Qt().f[14]++;const a=(Qt().s[61]++,t.sources[s]);return Qt().s[62]++,ie.jsx(vPe,{sourceId:s,source:a,onChange:c=>(Qt().f[15]++,Qt().s[63]++,this.props.onStyleChanged(cae(t,s,c))),onDelete:()=>(Qt().f[16]++,Qt().s[64]++,this.props.onStyleChanged(APe(t,s))),...i},s)})),o=(Qt().s[65]++,Object.keys(VV).filter(s=>(Qt().f[17]++,Qt().s[66]++,!(s in t.sources))).map(s=>{Qt().f[18]++;const a=(Qt().s[67]++,VV[s]);return Qt().s[68]++,ie.jsx(gPe,{id:s,type:a.type,title:a.title,onSelect:()=>(Qt().f[19]++,Qt().s[69]++,this.props.onStyleChanged($V(t,s,this.stripTitle(a))))},s)}));return Qt().s[70]++,ie.jsxs(C1,{"data-wd-key":"modal:sources",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Sources"),children:[ie.jsxs("section",{className:"maputnik-modal-section",children:[ie.jsx("h1",{children:e("Active Sources")}),r]}),ie.jsxs("section",{className:"maputnik-modal-section",children:[ie.jsx("h1",{children:e("Choose Public Source")}),ie.jsx("p",{children:e("Add one of the publicly available sources to your style.")}),ie.jsx("div",{className:"maputnik-public-sources",style:{maxWidth:500},children:o})]}),ie.jsxs("section",{className:"maputnik-modal-section",children:[ie.jsx("h1",{children:e("Add New Source")}),ie.jsx("p",{children:e("Add a new source to your style. You can only choose the source type and id at creation time!")}),ie.jsx(bPe,{onAdd:(s,a)=>(Qt().f[20]++,Qt().s[71]++,this.props.onStyleChanged($V(t,s,a))),...i})]})]})}}const _Pe=(Qt().s[72]++,No()(CPe));function Ig(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalLoading.tsx",e="14882741b03cd24dba8e21fe7c0f0c38039a7560",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalLoading.tsx",statementMap:{0:{start:{line:8,column:14},end:{line:8,column:26}},1:{start:{line:9,column:4},end:{line:22,column:6}},2:{start:{line:16,column:28},end:{line:16,column:49}},3:{start:{line:19,column:137},end:{line:19,column:159}},4:{start:{line:25,column:21},end:{line:25,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:11},end:{line:23,column:3}},line:7},1:{name:"(anonymous_1)",decl:{start:{line:16,column:22},end:{line:16,column:23}},loc:{start:{line:16,column:28},end:{line:16,column:49}},line:16},2:{name:"(anonymous_2)",decl:{start:{line:19,column:130},end:{line:19,column:131}},loc:{start:{line:19,column:137},end:{line:19,column:159}},line:19}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0,1:0,2:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalLoading.tsx"],names:[],mappings:"AAkBW,SAOL,KAPK;AAlBX,OAAO,WAAW;AAClB,SAA+B,uBAAuB;AAEtD,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAWlB,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,oBAAoB;AAAA,QACpB,OAAO,KAAK,MAAM;AAAA,QAClB,cAAc,MAAM,KAAK,MAAM,SAAS;AAAA,QAExC;AAAA,8BAAC,OACE,eAAK,MAAM,SACd;AAAA,UACA,oBAAC,OAAE,WAAU,4BACX,8BAAC,eAAY,SAAS,CAAC,MAAM,KAAK,MAAM,SAAS,CAAC,GAC/C,YAAE,QAAQ,GACb,GACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"14882741b03cd24dba8e21fe7c0f0c38039a7560"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Ig=function(){return s},s}Ig();class xPe extends En.Component{render(){Ig().f[0]++;const e=(Ig().s[0]++,this.props.t);return Ig().s[1]++,ie.jsxs(C1,{"data-wd-key":"modal:loading",isOpen:this.props.isOpen,underlayClickExits:!1,title:this.props.title,onOpenToggle:()=>(Ig().f[1]++,Ig().s[2]++,this.props.onCancel()),children:[ie.jsx("p",{children:this.props.message}),ie.jsx("p",{className:"maputnik-dialog__buttons",children:ie.jsx(Zs,{onClick:t=>(Ig().f[2]++,Ig().s[3]++,this.props.onCancel(t)),children:e("Cancel")})})]})}}const MPe=(Ig().s[4]++,No()(xPe)),Aae=[{id:"0-empty-style",title:"Empty Style",url:"https://cdn.jsdelivr.net/gh/maputnik/editor@9cf74ca405d2be0608b57db8109cf3a6af5b9f49/src/config/empty-style.json",thumbnail:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAECAQAAAAHDYbIAAAAEUlEQVR42mP8/58BDhiJ4wAA974H/U5Xe1oAAAAASUVORK5CYII="},{id:"americana",title:"Americana",url:"https://americanamap.org/style.json",thumbnail:"https://github.com/maplibre/maputnik/assets/649392/23fa75ad-63e6-43f5-8837-03cdb0428bac"},{id:"aws-hybrid",title:"AWS Hybrid",url:"https://maps.geo.eu-west-1.amazonaws.com/v2/styles/Hybrid/descriptor?key=v1.public.eyJqdGkiOiJiOTNkYjBlZi04OWUzLTQxMGUtODFhMC0zYjZjZjVmZWZmMDgifYtukap0NBaJpcrS6Vit9j03GJgK9Bn-RSu5UCe3jkdSql2kKp3IEgLPtyLssbmKUdVO11sXddjK3ZOZy8V6QG0olv0K_1tOxyMIe4DAO3IV6H4VzHWiaXlbSakGiEgFLuHBdcfLDeMotye7N6rSRxuZb0CN9ytH9VjLly6-NEBRZezO_qPQyvdTFdeZsARIpL0f9YVpxPxPVvUcAWYCk5LpaPseRCDPrY5SlCdA1ZKqUA4F9RzxSTxB73Fel_SoNDkCNaux1VposBu791-uUpDzUpr7leKckrPXrpZ2hwnFbafVxFV9vq4fLTpB5KoBksuLfGNIwAx1RLLxWuMhE4c.ZGQzZDY2OGQtMWQxMy00ZTEwLWIyZGUtOGVjYzUzMjU3OGE4&color-scheme=Light",thumbnail:"https://maputnik.s3.eu-west-1.amazonaws.com/thumbnails/aws-hybrid.jpg"},{id:"aws-standard",title:"AWS Standard",url:"https://maps.geo.eu-west-1.amazonaws.com/v2/styles/Standard/descriptor?key=v1.public.eyJqdGkiOiJiOTNkYjBlZi04OWUzLTQxMGUtODFhMC0zYjZjZjVmZWZmMDgifYtukap0NBaJpcrS6Vit9j03GJgK9Bn-RSu5UCe3jkdSql2kKp3IEgLPtyLssbmKUdVO11sXddjK3ZOZy8V6QG0olv0K_1tOxyMIe4DAO3IV6H4VzHWiaXlbSakGiEgFLuHBdcfLDeMotye7N6rSRxuZb0CN9ytH9VjLly6-NEBRZezO_qPQyvdTFdeZsARIpL0f9YVpxPxPVvUcAWYCk5LpaPseRCDPrY5SlCdA1ZKqUA4F9RzxSTxB73Fel_SoNDkCNaux1VposBu791-uUpDzUpr7leKckrPXrpZ2hwnFbafVxFV9vq4fLTpB5KoBksuLfGNIwAx1RLLxWuMhE4c.ZGQzZDY2OGQtMWQxMy00ZTEwLWIyZGUtOGVjYzUzMjU3OGE4&color-scheme=Light",thumbnail:"https://maputnik.s3.eu-west-1.amazonaws.com/thumbnails/aws-standard.jpg"},{id:"dark-matter",title:"Dark Matter",url:"https://cdn.jsdelivr.net/gh/openmaptiles/dark-matter-gl-style@v1.9/style.json",thumbnail:"https://maputnik.github.io/thumbnails/dark-matter.png"},{id:"locationiq-streets",title:"LocationIQ Streets",url:"https://tiles.locationiq.com/v3/streets/vector.json?key={key}",thumbnail:"https://static-assets.locationiq.com/maputnik/locationiq-streets.png"},{id:"maptiler-basic-gl-style",title:"MapTiler Basic",url:"https://cdn.jsdelivr.net/gh/openmaptiles/klokantech-basic-gl-style@v1.10/style.json",thumbnail:"https://maputnik.github.io/thumbnails/klokantech-basic.png"},{id:"maptiler-toner-gl-style",title:"Toner",url:"https://cdn.jsdelivr.net/gh/openmaptiles/toner-gl-style@v1.0/style.json",thumbnail:"https://maputnik.github.io/thumbnails/toner.png"},{id:"osm-bright",title:"OSM Bright",url:"https://cdn.jsdelivr.net/gh/openmaptiles/osm-bright-gl-style@v1.11/style.json",thumbnail:"https://maputnik.github.io/thumbnails/osm-bright.png"},{id:"osm-liberty",title:"OSM Liberty",url:"https://maputnik.github.io/osm-liberty/style.json",thumbnail:"https://maputnik.github.io/thumbnails/osm-liberty.png"},{id:"osm-openmaptiles",title:"OSM OpenMapTiles",url:"https://api.maptiler.com/maps/openstreetmap/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL",thumbnail:"https://openmaptiles.org/img/styles/openmaptiles.png"},{id:"positron",title:"Positron",url:"https://cdn.jsdelivr.net/gh/openmaptiles/positron-gl-style@v1.9/style.json",thumbnail:"https://maputnik.github.io/thumbnails/positron.png"},{id:"protomaps-light",title:"Protomaps Light",url:"https://api.protomaps.com/styles/v4/light/en.json?key=d828297496b11844",thumbnail:"https://github.com/user-attachments/assets/911f9765-4a7d-4736-9ec0-f2d4c90ae587"},{id:"stadia-outdoors",title:"Stadia Outdoors",url:"https://tiles.stadiamaps.com/styles/outdoors.json",thumbnail:"https://tiles.stadiamaps.com/static/outdoors.png?size=480x320&center=47.350259,8.49035&zoom=16"},{id:"versatiles-colorful",title:"Versatiles Colorful",url:"https://tiles.versatiles.org/assets/styles/colorful/style.json",thumbnail:"https://github.com/maplibre/maputnik/assets/649392/6cd69818-c541-46e4-a920-65fb4f654931"}];function bn(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalOpen.tsx",e="f3a6249e96d42fc8e59bc18fb123f3ec8de2b220",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalOpen.tsx",statementMap:{0:{start:{line:14,column:4},end:{line:37,column:9}},1:{start:{line:19,column:23},end:{line:19,column:58}},2:{start:{line:42,column:4},end:{line:42,column:17}},3:{start:{line:43,column:4},end:{line:45,column:6}},4:{start:{line:48,column:4},end:{line:50,column:7}},5:{start:{line:53,column:4},end:{line:53,column:31}},6:{start:{line:53,column:11},end:{line:53,column:31}},7:{start:{line:54,column:4},end:{line:60,column:5}},8:{start:{line:55,column:6},end:{line:55,column:39}},9:{start:{line:56,column:6},end:{line:59,column:9}},10:{start:{line:62,column:18},end:{line:99,column:3}},11:{start:{line:63,column:4},end:{line:63,column:22}},12:{start:{line:64,column:19},end:{line:64,column:24}},13:{start:{line:65,column:4},end:{line:90,column:7}},14:{start:{line:69,column:6},end:{line:69,column:29}},15:{start:{line:71,column:6},end:{line:73,column:7}},16:{start:{line:72,column:8},end:{line:72,column:15}},17:{start:{line:74,column:6},end:{line:77,column:9}},18:{start:{line:78,column:23},end:{line:78,column:54}},19:{start:{line:79,column:6},end:{line:79,column:48}},20:{start:{line:80,column:6},end:{line:80,column:39}},21:{start:{line:81,column:6},end:{line:81,column:26}},22:{start:{line:83,column:6},end:{line:87,column:9}},23:{start:{line:88,column:6},end:{line:88,column:25}},24:{start:{line:89,column:6},end:{line:89,column:61}},25:{start:{line:91,column:4},end:{line:98,column:7}},26:{start:{line:94,column:10},end:{line:94,column:26}},27:{start:{line:100,column:16},end:{line:103,column:3}},28:{start:{line:101,column:4},end:{line:101,column:23}},29:{start:{line:102,column:4},end:{line:102,column:44}},30:{start:{line:104,column:15},end:{line:131,column:3}},31:{start:{line:105,column:4},end:{line:105,column:22}},32:{start:{line:106,column:23},end:{line:114,column:5}},33:{start:{line:115,column:25},end:{line:115,column:68}},34:{start:{line:116,column:17},end:{line:116,column:43}},35:{start:{line:117,column:20},end:{line:117,column:37}},36:{start:{line:119,column:4},end:{line:126,column:5}},37:{start:{line:120,column:6},end:{line:120,column:37}},38:{start:{line:122,column:6},end:{line:124,column:9}},39:{start:{line:125,column:6},end:{line:125,column:13}},40:{start:{line:127,column:4},end:{line:127,column:51}},41:{start:{line:128,column:4},end:{line:128,column:49}},42:{start:{line:129,column:4},end:{line:129,column:24}},43:{start:{line:130,column:4},end:{line:130,column:16}},44:{start:{line:134,column:18},end:{line:156,column:3}},45:{start:{line:135,column:4},end:{line:135,column:23}},46:{start:{line:135,column:16},end:{line:135,column:23}},47:{start:{line:136,column:4},end:{line:136,column:35}},48:{start:{line:136,column:28},end:{line:136,column:35}},49:{start:{line:137,column:17},end:{line:137,column:25}},50:{start:{line:138,column:19},end:{line:138,column:35}},51:{start:{line:139,column:4},end:{line:139,column:22}},52:{start:{line:140,column:4},end:{line:140,column:37}},53:{start:{line:141,column:4},end:{line:154,column:6}},54:{start:{line:143,column:6},end:{line:150,column:7}},55:{start:{line:144,column:8},end:{line:144,column:48}},56:{start:{line:146,column:8},end:{line:148,column:11}},57:{start:{line:149,column:8},end:{line:149,column:15}},58:{start:{line:151,column:6},end:{line:151,column:53}},59:{start:{line:152,column:6},end:{line:152,column:39}},60:{start:{line:153,column:6},end:{line:153,column:26}},61:{start:{line:155,column:4},end:{line:155,column:50}},62:{start:{line:155,column:28},end:{line:155,column:49}},63:{start:{line:158,column:4},end:{line:160,column:7}},64:{start:{line:161,column:4},end:{line:161,column:22}},65:{start:{line:162,column:4},end:{line:162,column:30}},66:{start:{line:164,column:16},end:{line:168,column:3}},67:{start:{line:165,column:4},end:{line:167,column:7}},68:{start:{line:170,column:14},end:{line:170,column:26}},69:{start:{line:171,column:25},end:{line:182,column:6}},70:{start:{line:172,column:6},end:{line:181,column:8}},71:{start:{line:184,column:4},end:{line:189,column:5}},72:{start:{line:185,column:6},end:{line:188,column:11}},73:{start:{line:187,column:61},end:{line:187,column:78}},74:{start:{line:190,column:4},end:{line:272,column:9}},75:{start:{line:196,column:30},end:{line:196,column:49}},76:{start:{line:221,column:146},end:{line:221,column:180}},77:{start:{line:268,column:27},end:{line:268,column:56}},78:{start:{line:275,column:18},end:{line:275,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:13,column:2},end:{line:13,column:3}},loc:{start:{line:13,column:11},end:{line:38,column:3}},line:13},1:{name:"(anonymous_1)",decl:{start:{line:19,column:17},end:{line:19,column:18}},loc:{start:{line:19,column:23},end:{line:19,column:58}},line:19},2:{name:"(anonymous_2)",decl:{start:{line:41,column:2},end:{line:41,column:3}},loc:{start:{line:41,column:21},end:{line:46,column:3}},line:41},3:{name:"(anonymous_3)",decl:{start:{line:47,column:2},end:{line:47,column:3}},loc:{start:{line:47,column:15},end:{line:51,column:3}},line:47},4:{name:"(anonymous_4)",decl:{start:{line:52,column:2},end:{line:52,column:3}},loc:{start:{line:52,column:27},end:{line:61,column:3}},line:52},5:{name:"(anonymous_5)",decl:{start:{line:62,column:18},end:{line:62,column:19}},loc:{start:{line:62,column:32},end:{line:99,column:3}},line:62},6:{name:"(anonymous_6)",decl:{start:{line:68,column:12},end:{line:68,column:13}},loc:{start:{line:68,column:31},end:{line:70,column:5}},line:68},7:{name:"(anonymous_7)",decl:{start:{line:70,column:12},end:{line:70,column:13}},loc:{start:{line:70,column:22},end:{line:82,column:5}},line:70},8:{name:"(anonymous_8)",decl:{start:{line:82,column:13},end:{line:82,column:14}},loc:{start:{line:82,column:22},end:{line:90,column:5}},line:82},9:{name:"(anonymous_9)",decl:{start:{line:93,column:15},end:{line:93,column:16}},loc:{start:{line:93,column:26},end:{line:95,column:9}},line:93},10:{name:"(anonymous_10)",decl:{start:{line:100,column:16},end:{line:100,column:17}},loc:{start:{line:100,column:23},end:{line:103,column:3}},line:100},11:{name:"(anonymous_11)",decl:{start:{line:104,column:15},end:{line:104,column:16}},loc:{start:{line:104,column:27},end:{line:131,column:3}},line:104},12:{name:"(anonymous_12)",decl:{start:{line:134,column:18},end:{line:134,column:19}},loc:{start:{line:134,column:29},end:{line:156,column:3}},line:134},13:{name:"(anonymous_13)",decl:{start:{line:141,column:20},end:{line:141,column:21}},loc:{start:{line:141,column:27},end:{line:154,column:5}},line:141},14:{name:"(anonymous_14)",decl:{start:{line:155,column:21},end:{line:155,column:22}},loc:{start:{line:155,column:28},end:{line:155,column:49}},line:155},15:{name:"(anonymous_15)",decl:{start:{line:157,column:2},end:{line:157,column:3}},loc:{start:{line:157,column:17},end:{line:163,column:3}},line:157},16:{name:"(anonymous_16)",decl:{start:{line:164,column:16},end:{line:164,column:17}},loc:{start:{line:164,column:25},end:{line:168,column:3}},line:164},17:{name:"(anonymous_17)",decl:{start:{line:169,column:2},end:{line:169,column:3}},loc:{start:{line:169,column:11},end:{line:273,column:3}},line:169},18:{name:"(anonymous_18)",decl:{start:{line:171,column:42},end:{line:171,column:43}},loc:{start:{line:171,column:54},end:{line:182,column:5}},line:171},19:{name:"(anonymous_19)",decl:{start:{line:187,column:55},end:{line:187,column:56}},loc:{start:{line:187,column:61},end:{line:187,column:78}},line:187},20:{name:"(anonymous_20)",decl:{start:{line:196,column:24},end:{line:196,column:25}},loc:{start:{line:196,column:30},end:{line:196,column:49}},line:196},21:{name:"(anonymous_21)",decl:{start:{line:221,column:139},end:{line:221,column:140}},loc:{start:{line:221,column:146},end:{line:221,column:180}},line:221},22:{name:"(anonymous_22)",decl:{start:{line:268,column:20},end:{line:268,column:21}},loc:{start:{line:268,column:27},end:{line:268,column:56}},line:268}},branchMap:{0:{loc:{start:{line:53,column:4},end:{line:53,column:31}},type:"if",locations:[{start:{line:53,column:4},end:{line:53,column:31}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:53},1:{loc:{start:{line:54,column:4},end:{line:60,column:5}},type:"if",locations:[{start:{line:54,column:4},end:{line:60,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:54},2:{loc:{start:{line:71,column:6},end:{line:73,column:7}},type:"if",locations:[{start:{line:71,column:6},end:{line:73,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:71},3:{loc:{start:{line:135,column:4},end:{line:135,column:23}},type:"if",locations:[{start:{line:135,column:4},end:{line:135,column:23}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:135},4:{loc:{start:{line:136,column:4},end:{line:136,column:35}},type:"if",locations:[{start:{line:136,column:4},end:{line:136,column:35}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:136},5:{loc:{start:{line:184,column:4},end:{line:189,column:5}},type:"if",locations:[{start:{line:184,column:4},end:{line:189,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:184},6:{loc:{start:{line:203,column:53},end:{line:222,column:18}},type:"cond-expr",locations:[{start:{line:203,column:119},end:{line:215,column:15}},{start:{line:215,column:34},end:{line:222,column:18}}],line:203}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalOpen.tsx"],names:["style"],mappings:"AA4BQ,SACE,KADF;AA5BR,OAAO,WAA+B;AACtC,SAAQ,oBAAmB;AAC3B,SAAQ,0BAAyB;AACjC,SAAS,OAA6B,uBAAuB;AAE7D,OAAO,kBAAkB;AACzB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,cAAc;AAErB,OAAO,WAAW;AAClB,OAAO,kBAAkB;AASzB,MAAM,oBAAoB,MAAM,UAA4B;AAAA,EAC1D,SAAS;AACP,WAAO,oBAAC,SAAI,WAAU,yBACpB;AAAA,MAAC;AAAA;AAAA,QACC,WAAU;AAAA,QACV,cAAY,KAAK,MAAM;AAAA,QACvB,SAAS,MAAM,KAAK,MAAM,SAAS,KAAK,MAAM,GAAG;AAAA,QAEjD;AAAA,+BAAC,SAAI,WAAU,gCACb;AAAA,gCAAC,SAAK,eAAK,MAAM,OAAM;AAAA,YACvB,oBAAC,UAAK,WAAU,kBAAiB;AAAA,YACjC,oBAAC,sBAAmB;AAAA,aACtB;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,OAAO;AAAA,gBACL,iBAAiB,OAAO,KAAK,MAAM,YAAY;AAAA,cACjD;AAAA;AAAA,UACD;AAAA;AAAA;AAAA,IACH,GACF;AAAA,EACF;AACF;AAgBA,MAAM,0BAA0B,MAAM,UAAkD;AAAA,EACtF,YAAY,OAA+B;AACzC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,UAAU;AAAA,IACZ;AAAA,EACF;AAAA,EAEA,aAAa;AACX,SAAK,SAAS;AAAA,MACZ,OAAO;AAAA,IACT,CAAC;AAAA,EACH;AAAA,EAEA,sBAAsB,GAAU;AAE9B,QAAG,EAAG,GAAE,gBAAgB;AAExB,QAAG,KAAK,MAAM,eAAe;AAC3B,WAAK,MAAM,cAAc,MAAM;AAC/B,WAAK,SAAS;AAAA,QACZ,eAAe;AAAA,QACf,kBAAkB;AAAA,MACpB,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,gBAAgB,CAAC,aAAqB;AACpC,SAAK,WAAW;AAEhB,QAAI,WAAoB;AAExB,UAAM,UAAU;AAAA,MACd,MAAM;AAAA,MACN,aAAa;AAAA,IACf,CAAC,EACE,KAAK,SAAS,UAAU;AACvB,aAAO,SAAS,KAAK;AAAA,IACvB,CAAC,EACA,KAAK,CAAC,SAAS;AACd,UAAG,UAAU;AACX;AAAA,MACF;AAEA,WAAK,SAAS;AAAA,QACZ,eAAe;AAAA,QACf,kBAAkB;AAAA,MACpB,CAAC;AAED,YAAM,WAAW,MAAM,oBAAoB,IAAI;AAC/C,cAAQ,IAAI,iBAAiB,SAAS,EAAE;AACxC,WAAK,MAAM,YAAY,QAAQ;AAC/B,WAAK,aAAa;AAAA,IACpB,CAAC,EACA,MAAM,CAAC,QAAQ;AACd,WAAK,SAAS;AAAA,QACZ,OAAO,oBAAoB,QAAQ;AAAA,QACnC,eAAe;AAAA,QACf,kBAAkB;AAAA,MACpB,CAAC;AACD,cAAQ,MAAM,GAAG;AACjB,cAAQ,KAAK,gCAAgC,QAAQ;AAAA,IACvD,CAAC;AAEH,SAAK,SAAS;AAAA,MACZ,eAAe;AAAA,QACb,OAAO,WAAW;AAChB,qBAAW;AAAA,QACb;AAAA,MACF;AAAA,MACA,kBAAkB;AAAA,IACpB,CAAC;AAAA,EACH;AAAA,EAEA,cAAc,CAAC,MAAkC;AAC/C,MAAE,eAAe;AACjB,SAAK,cAAc,KAAK,MAAM,QAAQ;AAAA,EACxC;AAAA,EAEA,aAAa,YAAY;AACvB,SAAK,WAAW;AAEhB,UAAM,aAAoC;AAAA,MACxC,OAAO;AAAA,QACL;AAAA,UACE,aAAa;AAAA,UACb,QAAQ,EAAE,oBAAoB,CAAC,OAAO,EAAE;AAAA,QAC1C;AAAA,MACF;AAAA,MACA,UAAU;AAAA,IACZ;AAEA,UAAM,CAAC,UAAU,IAAI,MAAM,OAAO,mBAAmB,UAAU;AAC/D,UAAM,OAAO,MAAM,WAAW,QAAQ;AACtC,UAAM,UAAU,MAAM,KAAK,KAAK;AAEhC,QAAI;AACJ,QAAI;AACF,iBAAW,KAAK,MAAM,OAAO;AAAA,IAC/B,SAAS,KAAK;AACZ,WAAK,SAAS;AAAA,QACZ,OAAQ,IAAc,SAAS;AAAA,MACjC,CAAC;AACD;AAAA,IACF;AACA,eAAW,MAAM,oBAAoB,QAAQ;AAE7C,SAAK,MAAM,YAAY,UAAU,UAAU;AAC3C,SAAK,aAAa;AAClB,WAAO;AAAA,EACT;AAAA;AAAA;AAAA,EAIA,gBAAgB,CAAC,UAA2B;AAC1C,QAAI,CAAC,MAAO;AACZ,QAAI,MAAM,WAAW,EAAG;AACxB,UAAM,OAAO,MAAM,CAAC;AACpB,UAAM,SAAS,IAAI,WAAW;AAC9B,SAAK,WAAW;AAEhB,WAAO,WAAW,MAAM,OAAO;AAC/B,WAAO,SAAS,OAAK;AACnB,UAAI;AACJ,UAAI;AACF,mBAAW,KAAK,MAAM,EAAE,QAAQ,MAAgB;AAAA,MAClD,SACM,KAAK;AACT,aAAK,SAAS;AAAA,UACZ,OAAQ,IAAc,SAAS;AAAA,QACjC,CAAC;AACD;AAAA,MACF;AACA,iBAAW,MAAM,oBAAoB,QAAQ;AAC7C,WAAK,MAAM,YAAY,QAAQ;AAC/B,WAAK,aAAa;AAAA,IACpB;AACA,WAAO,UAAU,OAAK,QAAQ,IAAI,EAAE,MAAM;AAAA,EAC5C;AAAA,EAEA,eAAe;AACb,SAAK,SAAS;AAAA,MACZ,UAAU;AAAA,IACZ,CAAC;AACD,SAAK,WAAW;AAChB,SAAK,MAAM,aAAa;AAAA,EAC1B;AAAA,EAEA,cAAc,CAAC,QAAgB;AAC7B,SAAK,SAAS;AAAA,MACZ,UAAU;AAAA,IACZ,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,eAAe,aAAa,IAAI,CAAAA,WAAS;AAC7C,aAAO;AAAA,QAAC;AAAA;AAAA,UAEN,KAAKA,OAAM;AAAA,UACX,OAAOA,OAAM;AAAA,UACb,cAAcA,OAAM;AAAA,UACpB,UAAU,KAAK;AAAA;AAAA,QAJVA,OAAM;AAAA,MAKb;AAAA,IACF,CAAC;AAED,QAAI;AACJ,QAAG,KAAK,MAAM,OAAO;AACnB,qBACE,qBAAC,SAAI,WAAU,wBACZ;AAAA,aAAK,MAAM;AAAA,QACZ,oBAAC,OAAE,MAAK,KAAI,SAAS,MAAM,KAAK,WAAW,GAAG,WAAU,8BAA6B,eAAC;AAAA,SACxF;AAAA,IAEJ;AAEA,WACE,qBAAC,SACC;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,eAAY;AAAA,UACZ,QAAQ,KAAK,MAAM;AAAA,UACnB,cAAc,MAAM,KAAK,aAAa;AAAA,UACtC,OAAO,EAAE,YAAY;AAAA,UAEpB;AAAA;AAAA,YACD,qBAAC,aAAQ,WAAU,0BACjB;AAAA,kCAAC,QAAI,YAAE,kBAAkB,GAAE;AAAA,cAC3B,oBAAC,OAAG,YAAE,6CAA6C,GAAE;AAAA,cACrD,oBAAC,SACE,iBAAO,OAAO,uBAAuB,aACpC;AAAA,gBAAC;AAAA;AAAA,kBACC,eAAY;AAAA,kBACZ,WAAU;AAAA,kBACV,SAAS,KAAK;AAAA,kBAAY;AAAA,wCAAC,gBAAY;AAAA,oBAAE;AAAA,oBAAE,EAAE,YAAY;AAAA;AAAA;AAAA,cAC3D,IAEA,qBAAC,WACC;AAAA,qCAAC,OAAE,WAAU,0CAAyC,cAAY,EAAE,YAAY,GAAG;AAAA,sCAAC,gBAAa;AAAA,kBAAE;AAAA,kBAAE,EAAE,YAAY;AAAA,mBAAE;AAAA,gBACrH,oBAAC,WAAM,eAAY,yBAAwB,MAAK,QAAO,OAAO,EAAE,SAAS,OAAO,GAAG,UAAU,CAAC,MAAM,KAAK,cAAc,EAAE,OAAO,KAAK,GAAG;AAAA,iBAC1I,GAEJ;AAAA,eACF;AAAA,YAEA,oBAAC,aAAQ,WAAU,0BACjB,+BAAC,UAAK,UAAU,KAAK,aACnB;AAAA,kCAAC,QAAI,YAAE,eAAe,GAAE;AAAA,cACxB,oBAAC,OACC,+BAAC,SAAM,GAAM;AAAA;AAAA,gBACkC,oBAAC,OAAE,MAAK,2BAA0B,QAAO,UAAS,KAAI,uBAAsB,0BAAY;AAAA,gBAAI;AAAA,iBAC3I,GACF;AAAA,cACA;AAAA,gBAAC;AAAA;AAAA,kBACC,cAAY,EAAE,WAAW;AAAA,kBACzB,eAAY;AAAA,kBACZ,MAAK;AAAA,kBACL,WAAU;AAAA,kBACV,SAAS,EAAE,cAAc;AAAA,kBACzB,OAAO,KAAK,MAAM;AAAA,kBAClB,SAAS,KAAK;AAAA,kBACd,UAAU,KAAK;AAAA;AAAA,cACjB;AAAA,cACA,oBAAC,SACC;AAAA,gBAAC;AAAA;AAAA,kBACC,eAAY;AAAA,kBACZ,MAAK;AAAA,kBACL,WAAU;AAAA,kBACV,UAAU,KAAK,MAAM,SAAS,SAAS;AAAA,kBACxC;AAAA;AAAA,cAAa,GAChB;AAAA,eACF,GACF;AAAA,YAEA,qBAAC,aAAQ,WAAU,yDACjB;AAAA,kCAAC,QAAI,YAAE,gBAAgB,GAAE;AAAA,cACzB,oBAAC,OACE,YAAE,0DAA0D,GAC/D;AAAA,cACA,oBAAC,SAAI,WAAU,oCACZ,wBACH;AAAA,eACF;AAAA;AAAA;AAAA,MACF;AAAA,MAEA;AAAA,QAAC;AAAA;AAAA,UACC,QAAQ,CAAC,CAAC,KAAK,MAAM;AAAA,UACrB,OAAO,EAAE,eAAe;AAAA,UACxB,UAAU,CAAC,MAAa,KAAK,sBAAsB,CAAC;AAAA,UACpD,SAAS,EAAE,2BAA2B,EAAE,YAAY,KAAK,MAAM,iBAAiB,CAAC;AAAA;AAAA,MACnF;AAAA,OACF;AAAA,EAEJ;AACF;AAEA,MAAM,YAAY,gBAAgB,EAAE,iBAAiB;AACrD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f3a6249e96d42fc8e59bc18fb123f3ec8de2b220"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return bn=function(){return s},s}bn();class wPe extends En.Component{render(){return bn().f[0]++,bn().s[0]++,ie.jsx("div",{className:"maputnik-public-style",children:ie.jsxs(Zs,{className:"maputnik-public-style-button","aria-label":this.props.title,onClick:()=>(bn().f[1]++,bn().s[1]++,this.props.onSelect(this.props.url)),children:[ie.jsxs("div",{className:"maputnik-public-style-header",children:[ie.jsx("div",{children:this.props.title}),ie.jsx("span",{className:"maputnik-space"}),ie.jsx(QX,{})]}),ie.jsx("div",{className:"maputnik-public-style-thumbnail",style:{backgroundImage:`url(${this.props.thumbnailUrl})`}})]})})}}class SPe extends En.Component{constructor(e){bn().f[2]++,bn().s[2]++,super(e),bn().s[3]++,this.state={styleUrl:""}}clearError(){bn().f[3]++,bn().s[4]++,this.setState({error:null})}onCancelActiveRequest(e){bn().f[4]++,bn().s[5]++,e?(bn().b[0][0]++,bn().s[6]++,e.stopPropagation()):bn().b[0][1]++,bn().s[7]++,this.state.activeRequest?(bn().b[1][0]++,bn().s[8]++,this.state.activeRequest.abort(),bn().s[9]++,this.setState({activeRequest:null,activeRequestUrl:null})):bn().b[1][1]++}onStyleSelect=(bn().s[10]++,e=>{bn().f[5]++,bn().s[11]++,this.clearError();let t=(bn().s[12]++,!1);bn().s[13]++,fetch(e,{mode:"cors",credentials:"same-origin"}).then(function(i){return bn().f[6]++,bn().s[14]++,i.json()}).then(i=>{if(bn().f[7]++,bn().s[15]++,t){bn().b[2][0]++,bn().s[16]++;return}else bn().b[2][1]++;bn().s[17]++,this.setState({activeRequest:null,activeRequestUrl:null});const r=(bn().s[18]++,Ed.ensureStyleValidity(i));bn().s[19]++,console.log("Loaded style ",r.id),bn().s[20]++,this.props.onStyleOpen(r),bn().s[21]++,this.onOpenToggle()}).catch(i=>{bn().f[8]++,bn().s[22]++,this.setState({error:`Failed to load: '${e}'`,activeRequest:null,activeRequestUrl:null}),bn().s[23]++,console.error(i),bn().s[24]++,console.warn("Could not open the style URL",e)}),bn().s[25]++,this.setState({activeRequest:{abort:function(){bn().f[9]++,bn().s[26]++,t=!0}},activeRequestUrl:e})});onSubmitUrl=(bn().s[27]++,e=>{bn().f[10]++,bn().s[28]++,e.preventDefault(),bn().s[29]++,this.onStyleSelect(this.state.styleUrl)});onOpenFile=(bn().s[30]++,async()=>{bn().f[11]++,bn().s[31]++,this.clearError();const e=(bn().s[32]++,{types:[{description:"json",accept:{"application/json":[".json"]}}],multiple:!1}),[t]=(bn().s[33]++,await window.showOpenFilePicker(e)),i=(bn().s[34]++,await t.getFile()),r=(bn().s[35]++,await i.text());let o;bn().s[36]++;try{bn().s[37]++,o=JSON.parse(r)}catch(s){bn().s[38]++,this.setState({error:s.toString()}),bn().s[39]++;return}return bn().s[40]++,o=Ed.ensureStyleValidity(o),bn().s[41]++,this.props.onStyleOpen(o,t),bn().s[42]++,this.onOpenToggle(),bn().s[43]++,i});onFileChanged=(bn().s[44]++,e=>{if(bn().f[12]++,bn().s[45]++,e)bn().b[3][1]++;else{bn().b[3][0]++,bn().s[46]++;return}if(bn().s[47]++,e.length===0){bn().b[4][0]++,bn().s[48]++;return}else bn().b[4][1]++;const t=(bn().s[49]++,e[0]),i=(bn().s[50]++,new FileReader);bn().s[51]++,this.clearError(),bn().s[52]++,i.readAsText(t,"UTF-8"),bn().s[53]++,i.onload=r=>{bn().f[13]++;let o;bn().s[54]++;try{bn().s[55]++,o=JSON.parse(r.target?.result)}catch(s){bn().s[56]++,this.setState({error:s.toString()}),bn().s[57]++;return}bn().s[58]++,o=Ed.ensureStyleValidity(o),bn().s[59]++,this.props.onStyleOpen(o),bn().s[60]++,this.onOpenToggle()},bn().s[61]++,i.onerror=r=>(bn().f[14]++,bn().s[62]++,console.log(r.target))});onOpenToggle(){bn().f[15]++,bn().s[63]++,this.setState({styleUrl:""}),bn().s[64]++,this.clearError(),bn().s[65]++,this.props.onOpenToggle()}onChangeUrl=(bn().s[66]++,e=>{bn().f[16]++,bn().s[67]++,this.setState({styleUrl:e})});render(){bn().f[17]++;const e=(bn().s[68]++,this.props.t),t=(bn().s[69]++,Aae.map(r=>(bn().f[18]++,bn().s[70]++,ie.jsx(wPe,{url:r.url,title:r.title,thumbnailUrl:r.thumbnail,onSelect:this.onStyleSelect},r.id))));let i;return bn().s[71]++,this.state.error?(bn().b[5][0]++,bn().s[72]++,i=ie.jsxs("div",{className:"maputnik-modal-error",children:[this.state.error,ie.jsx("a",{href:"#",onClick:()=>(bn().f[19]++,bn().s[73]++,this.clearError()),className:"maputnik-modal-error-close",children:""})]})):bn().b[5][1]++,bn().s[74]++,ie.jsxs("div",{children:[ie.jsxs(C1,{"data-wd-key":"modal:open",isOpen:this.props.isOpen,onOpenToggle:()=>(bn().f[20]++,bn().s[75]++,this.onOpenToggle()),title:e("Open Style"),children:[i,ie.jsxs("section",{className:"maputnik-modal-section",children:[ie.jsx("h1",{children:e("Open local Style")}),ie.jsx("p",{children:e("Open a local JSON style from your computer.")}),ie.jsx("div",{children:typeof window.showOpenFilePicker=="function"?(bn().b[6][0]++,ie.jsxs(Zs,{"data-wd-key":"modal:open.file.button",className:"maputnik-big-button",onClick:this.onOpenFile,children:[ie.jsx(tz,{})," ",e("Open Style")]})):(bn().b[6][1]++,ie.jsxs("label",{children:[ie.jsxs("a",{className:"maputnik-button maputnik-upload-button","aria-label":e("Open Style"),children:[ie.jsx(tz,{})," ",e("Open Style")]}),ie.jsx("input",{"data-wd-key":"modal:open.file.input",type:"file",style:{display:"none"},onChange:r=>(bn().f[21]++,bn().s[76]++,this.onFileChanged(r.target.files))})]}))})]}),ie.jsx("section",{className:"maputnik-modal-section",children:ie.jsxs("form",{onSubmit:this.onSubmitUrl,children:[ie.jsx("h1",{children:e("Load from URL")}),ie.jsx("p",{children:ie.jsxs(Cb,{t:e,children:["Load from a URL. Note that the URL must have ",ie.jsx("a",{href:"https://enable-cors.org",target:"_blank",rel:"noopener noreferrer",children:"CORS enabled"}),"."]})}),ie.jsx(EL,{"aria-label":e("Style URL"),"data-wd-key":"modal:open.url.input",type:"text",className:"maputnik-input",default:e("Enter URL..."),value:this.state.styleUrl,onInput:this.onChangeUrl,onChange:this.onChangeUrl}),ie.jsx("div",{children:ie.jsx(Zs,{"data-wd-key":"modal:open.url.button",type:"submit",className:"maputnik-big-button",disabled:this.state.styleUrl.length<1,children:"Load from URL"})})]})}),ie.jsxs("section",{className:"maputnik-modal-section maputnik-modal-section--shrink",children:[ie.jsx("h1",{children:e("Gallery Styles")}),ie.jsx("p",{children:e("Open one of the publicly available styles to start from.")}),ie.jsx("div",{className:"maputnik-style-gallery-container",children:t})]})]}),ie.jsx(MPe,{isOpen:!!this.state.activeRequest,title:e("Loading style"),onCancel:r=>(bn().f[22]++,bn().s[77]++,this.onCancelActiveRequest(r)),message:e("Loading: {{requestUrl}}",{requestUrl:this.state.activeRequestUrl})})]})}}const EPe=(bn().s[78]++,No()(SPe));function lp(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalShortcuts.tsx",e="56c3984d0ef3534e088a574117d91f5af2db0afb",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalShortcuts.tsx",statementMap:{0:{start:{line:7,column:14},end:{line:7,column:26}},1:{start:{line:8,column:17},end:{line:41,column:5}},2:{start:{line:42,column:25},end:{line:115,column:5}},3:{start:{line:116,column:4},end:{line:145,column:6}},4:{start:{line:130,column:12},end:{line:133,column:22}},5:{start:{line:137,column:12},end:{line:141,column:22}},6:{start:{line:148,column:23},end:{line:148,column:64}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:146,column:3}},line:6},1:{name:"(anonymous_1)",decl:{start:{line:129,column:57},end:{line:129,column:58}},loc:{start:{line:129,column:72},end:{line:134,column:11}},line:129},2:{name:"(anonymous_2)",decl:{start:{line:136,column:65},end:{line:136,column:66}},loc:{start:{line:136,column:80},end:{line:142,column:11}},line:136}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0,1:0,2:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalShortcuts.tsx"],names:[],mappings:"AAiBa,SAwCA,UAxCA,KAwCA,YAxCA;AAjBb,OAAO,WAAW;AAClB,SAAS,OAA6B,uBAAuB;AAE7D,OAAO,WAAW;AASlB,MAAM,+BAA+B,MAAM,UAAuC;AAAA,EAChF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,OAAO;AAAA,MACX;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,gBAAgB;AAAA,MAC1B;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,YAAY;AAAA,MACtB;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,cAAc;AAAA,MACxB;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,oBAAoB;AAAA,MAC9B;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,sBAAsB;AAAA,MAChC;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,gBAAgB;AAAA,MAC1B;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,WAAW;AAAA,MACrB;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,aAAa;AAAA,MACvB;AAAA,IACF;AAGA,UAAM,eAAe;AAAA,MACnB;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,+BAAgC;AAAA,MAC1C;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,eAAC;AAAA,WAAM;AAAA,QACtC,MAAM,EAAE,+BAAgC;AAAA,MAC1C;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,+BAAgC;AAAA,MAC1C;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,eAAC;AAAA,WAAM;AAAA,QACtC,MAAM,EAAE,+BAAgC;AAAA,MAC1C;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,gBAAE;AAAA,QACZ,MAAM,EAAE,uBAAwB;AAAA,MAClC;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,kBAAI;AAAA,QACd,MAAM,EAAE,yBAA0B;AAAA,MACpC;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,kBAAI;AAAA,QACd,MAAM,EAAE,yBAA0B;AAAA,MACpC;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,mBAAK;AAAA,QACf,MAAM,EAAE,0BAA2B;AAAA,MACrC;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,mBAAK;AAAA,WAAM;AAAA,QAC1C,MAAM,EAAE,sCAAuC;AAAA,MACjD;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,kBAAI;AAAA,WAAM;AAAA,QACzC,MAAM,EAAE,sCAAsC;AAAA,MAChD;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,gBAAE;AAAA,WAAM;AAAA,QACvC,MAAM,EAAE,mCAAmC;AAAA,MAC7C;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,kBAAI;AAAA,WAAM;AAAA,QACzC,MAAM,EAAE,mCAAmC;AAAA,MAC7C;AAAA,IACF;AAGA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,WAAW;AAAA,QAEpB,+BAAC,aAAQ,WAAU,mDACjB;AAAA,8BAAC,OACC,+BAAC,SAAM,GAAM;AAAA;AAAA,YACL,oBAAC,UAAK,iBAAG;AAAA,YAAO;AAAA,aACxB,GACF;AAAA,UACA,oBAAC,QACE,eAAK,IAAI,CAAC,MAAM,QAAQ;AACvB,mBAAO,qBAAC,SAAc,WAAU,sCAC9B;AAAA,kCAAC,QAAmB,eAAK,OAAhB,OAAK,GAAe;AAAA,cAC7B,oBAAC,QAAmB,eAAK,QAAhB,OAAK,GAAgB;AAAA,iBAFf,GAGjB;AAAA,UACF,CAAC,GACH;AAAA,UACA,oBAAC,OAAG,YAAE,8DAA8D,GAAE;AAAA,UACtE,oBAAC,QACE,uBAAa,IAAI,CAAC,MAAM,QAAQ;AAC/B,mBAAO,qBAAC,QACN;AAAA,kCAAC,UAAM,eAAK,KAAI;AAAA,cAAO;AAAA,cAAE,KAAK;AAAA,iBADhB,GAEhB;AAAA,UACF,CAAC,GACH;AAAA,WACF;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,iBAAiB,gBAAgB,EAAE,sBAAsB;AAC/D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"56c3984d0ef3534e088a574117d91f5af2db0afb"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return lp=function(){return s},s}lp();class OPe extends En.Component{render(){lp().f[0]++;const e=(lp().s[0]++,this.props.t),t=(lp().s[1]++,[{key:ie.jsx("kbd",{children:"?"}),text:e("Shortcuts menu")},{key:ie.jsx("kbd",{children:"o"}),text:e("Open modal")},{key:ie.jsx("kbd",{children:"e"}),text:e("Export modal")},{key:ie.jsx("kbd",{children:"d"}),text:e("Data Sources modal")},{key:ie.jsx("kbd",{children:"s"}),text:e("Style Settings modal")},{key:ie.jsx("kbd",{children:"i"}),text:e("Toggle inspect")},{key:ie.jsx("kbd",{children:"m"}),text:e("Focus map")},{key:ie.jsx("kbd",{children:"!"}),text:e("Debug modal")}]),i=(lp().s[2]++,[{key:ie.jsx("kbd",{children:"+"}),text:e("Increase the zoom level by 1.")},{key:ie.jsxs(ie.Fragment,{children:[ie.jsx("kbd",{children:"Shift"})," + ",ie.jsx("kbd",{children:"+"})]}),text:e("Increase the zoom level by 2.")},{key:ie.jsx("kbd",{children:"-"}),text:e("Decrease the zoom level by 1.")},{key:ie.jsxs(ie.Fragment,{children:[ie.jsx("kbd",{children:"Shift"})," + ",ie.jsx("kbd",{children:"-"})]}),text:e("Decrease the zoom level by 2.")},{key:ie.jsx("kbd",{children:"Up"}),text:e("Pan up by 100 pixels.")},{key:ie.jsx("kbd",{children:"Down"}),text:e("Pan down by 100 pixels.")},{key:ie.jsx("kbd",{children:"Left"}),text:e("Pan left by 100 pixels.")},{key:ie.jsx("kbd",{children:"Right"}),text:e("Pan right by 100 pixels.")},{key:ie.jsxs(ie.Fragment,{children:[ie.jsx("kbd",{children:"Shift"})," + ",ie.jsx("kbd",{children:"Right"})]}),text:e("Increase the rotation by 15 degrees.")},{key:ie.jsxs(ie.Fragment,{children:[ie.jsx("kbd",{children:"Shift"})," + ",ie.jsx("kbd",{children:"Left"})]}),text:e("Decrease the rotation by 15 degrees.")},{key:ie.jsxs(ie.Fragment,{children:[ie.jsx("kbd",{children:"Shift"})," + ",ie.jsx("kbd",{children:"Up"})]}),text:e("Increase the pitch by 10 degrees.")},{key:ie.jsxs(ie.Fragment,{children:[ie.jsx("kbd",{children:"Shift"})," + ",ie.jsx("kbd",{children:"Down"})]}),text:e("Decrease the pitch by 10 degrees.")}]);return lp().s[3]++,ie.jsx(C1,{"data-wd-key":"modal:shortcuts",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Shortcuts"),children:ie.jsxs("section",{className:"maputnik-modal-section maputnik-modal-shortcuts",children:[ie.jsx("p",{children:ie.jsxs(Cb,{t:e,children:["Press ",ie.jsx("code",{children:"ESC"})," to lose focus of any active elements, then press one of:"]})}),ie.jsx("dl",{children:t.map((r,o)=>(lp().f[1]++,lp().s[4]++,ie.jsxs("div",{className:"maputnik-modal-shortcuts__shortcut",children:[ie.jsx("dt",{children:r.key},"dt"+o),ie.jsx("dd",{children:r.text},"dd"+o)]},o)))}),ie.jsx("p",{children:e("If the Map is in focused you can use the following shortcuts")}),ie.jsx("ul",{children:i.map((r,o)=>(lp().f[2]++,lp().s[5]++,ie.jsxs("li",{children:[ie.jsx("span",{children:r.key})," ",r.text]},o)))})]})})}}const BPe=(lp().s[6]++,No()(OPe));function Cu(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalDebug.tsx",e="c09f0bfde95742e69af0d091b2de9baefbfef43a",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalDebug.tsx",statementMap:{0:{start:{line:7,column:27},end:{line:7,column:37}},1:{start:{line:8,column:20},end:{line:8,column:48}},2:{start:{line:9,column:19},end:{line:9,column:49}},3:{start:{line:10,column:19},end:{line:10,column:49}},4:{start:{line:11,column:4},end:{line:53,column:6}},5:{start:{line:22,column:14},end:{line:26,column:27}},6:{start:{line:23,column:96},end:{line:23,column:153}},7:{start:{line:29,column:14},end:{line:33,column:27}},8:{start:{line:30,column:96},end:{line:30,column:153}},9:{start:{line:56,column:19},end:{line:56,column:56}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:54,column:3}},line:6},1:{name:"(anonymous_1)",decl:{start:{line:21,column:140},end:{line:21,column:141}},loc:{start:{line:21,column:156},end:{line:27,column:13}},line:21},2:{name:"(anonymous_2)",decl:{start:{line:23,column:89},end:{line:23,column:90}},loc:{start:{line:23,column:96},end:{line:23,column:153}},line:23},3:{name:"(anonymous_3)",decl:{start:{line:28,column:136},end:{line:28,column:137}},loc:{start:{line:28,column:152},end:{line:34,column:13}},line:28},4:{name:"(anonymous_4)",decl:{start:{line:30,column:89},end:{line:30,column:90}},loc:{start:{line:30,column:96},end:{line:30,column:153}},line:30}},branchMap:{0:{loc:{start:{line:21,column:12},end:{line:27,column:17}},type:"binary-expr",locations:[{start:{line:21,column:12},end:{line:21,column:44}},{start:{line:21,column:64},end:{line:27,column:17}}],line:21},1:{loc:{start:{line:28,column:12},end:{line:34,column:17}},type:"binary-expr",locations:[{start:{line:28,column:12},end:{line:28,column:40}},{start:{line:28,column:60},end:{line:34,column:17}}],line:28}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalDebug.tsx"],names:[],mappings:"AAuCQ,cAKQ,YALR;AAvCR,OAAO,WAAW;AAClB,SAAS,OAA6B,uBAAuB;AAE7D,OAAO,WAAW;AAqBlB,MAAM,2BAA2B,MAAM,UAAmC;AAAA,EACxE,SAAS;AACP,UAAM,EAAC,GAAG,QAAO,IAAI,KAAK;AAE1B,UAAM,UAAU,KAAK,MAAM,QAAQ,IAAI,IAAE;AACzC,UAAM,SAAS,CAAE,QAAQ,OAAO,IAAK,QAAQ,CAAC;AAC9C,UAAM,SAAS,CAAE,QAAQ,OAAO,IAAK,QAAQ,CAAC;AAE9C,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,OAAO;AAAA,QAEhB;AAAA,+BAAC,aAAQ,WAAU,mDACjB;AAAA,gCAAC,QAAI,YAAE,SAAS,GAAE;AAAA,YACjB,KAAK,MAAM,aAAa,YACvB,oBAAC,QACE,iBAAO,QAAQ,KAAK,MAAM,sBAAuB,EAAE,IAAI,CAAC,CAAC,KAAK,GAAG,MAAM;AACtE,qBAAO,oBAAC,QACN,+BAAC,WACC;AAAA,oCAAC,WAAM,MAAK,YAAW,SAAS,KAAK,UAAU,CAAC,MAAM,KAAK,MAAM,wBAAwB,KAAK,EAAE,OAAO,OAAO,GAAG;AAAA,gBAAE;AAAA,gBAAE;AAAA,iBACvH,KAHc,GAIhB;AAAA,YACF,CAAC,GACH;AAAA,YAED,KAAK,MAAM,aAAa,QACvB,oBAAC,QACE,iBAAO,QAAQ,KAAK,MAAM,sBAAuB,EAAE,IAAI,CAAC,CAAC,KAAK,GAAG,MAAM;AACtE,qBAAO,oBAAC,QACN,+BAAC,WACC;AAAA,oCAAC,WAAM,MAAK,YAAW,SAAS,KAAK,UAAU,CAAC,MAAM,KAAK,MAAM,wBAAwB,KAAK,EAAE,OAAO,OAAO,GAAG;AAAA,gBAAE;AAAA,gBAAE;AAAA,iBACvH,KAHc,GAIhB;AAAA,YACF,CAAC,GACH;AAAA,aAEJ;AAAA,UACA,qBAAC,aAAQ,WAAU,0BACjB;AAAA,gCAAC,QAAI,YAAE,OAAO,GAAE;AAAA,YAChB,oBAAC,OACC,+BAAC,SAAM,GACL;AAAA;AAAA,gBAAC;AAAA;AAAA,kBACC,QAAO;AAAA,kBACP,KAAI;AAAA,kBACJ,MAAM,sCAAsC,OAAO,IAAI,MAAM,IAAI,MAAM;AAAA,kBACxE;AAAA;AAAA,cAED;AAAA,cAAI;AAAA,eACN,GACF;AAAA,aACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,aAAa,gBAAgB,EAAE,kBAAkB;AACvD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"c09f0bfde95742e69af0d091b2de9baefbfef43a"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Cu=function(){return s},s}Cu();class IPe extends En.Component{render(){Cu().f[0]++;const{t:e,mapView:t}=(Cu().s[0]++,this.props),i=(Cu().s[1]++,Math.round(t.zoom)+1),r=(Cu().s[2]++,+t.center.lng.toFixed(5)),o=(Cu().s[3]++,+t.center.lat.toFixed(5));return Cu().s[4]++,ie.jsxs(C1,{"data-wd-key":"modal:debug",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Debug"),children:[ie.jsxs("section",{className:"maputnik-modal-section maputnik-modal-shortcuts",children:[ie.jsx("h1",{children:e("Options")}),(Cu().b[0][0]++,this.props.renderer==="mlgljs"&&(Cu().b[0][1]++,ie.jsx("ul",{children:Object.entries(this.props.maplibreGlDebugOptions).map(([s,a])=>(Cu().f[1]++,Cu().s[5]++,ie.jsx("li",{children:ie.jsxs("label",{children:[ie.jsx("input",{type:"checkbox",checked:a,onChange:c=>(Cu().f[2]++,Cu().s[6]++,this.props.onChangeMaplibreGlDebug(s,c.target.checked))})," ",s]})},s)))}))),(Cu().b[1][0]++,this.props.renderer==="ol"&&(Cu().b[1][1]++,ie.jsx("ul",{children:Object.entries(this.props.openlayersDebugOptions).map(([s,a])=>(Cu().f[3]++,Cu().s[7]++,ie.jsx("li",{children:ie.jsxs("label",{children:[ie.jsx("input",{type:"checkbox",checked:a,onChange:c=>(Cu().f[4]++,Cu().s[8]++,this.props.onChangeOpenlayersDebug(s,c.target.checked))})," ",s]})},s)))})))]}),ie.jsxs("section",{className:"maputnik-modal-section",children:[ie.jsx("h1",{children:e("Links")}),ie.jsx("p",{children:ie.jsxs(Cb,{t:e,children:[ie.jsx("a",{target:"_blank",rel:"noopener noreferrer",href:`https://www.openstreetmap.org/#map=${i}/${o}/${r}`,children:"Open in OSM"}),". Opens the current view on openstreetmap.org"]})})]})]})}}const kPe=(Cu().s[9]++,No()(IPe));function vi(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalGlobalState.tsx",e="681e0b3080d4effb89e735abebd0878f77572d27",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalGlobalState.tsx",statementMap:{0:{start:{line:10,column:33},end:{line:116,column:1}},1:{start:{line:11,column:34},end:{line:18,column:3}},2:{start:{line:12,column:18},end:{line:12,column:32}},3:{start:{line:13,column:24},end:{line:13,column:41}},4:{start:{line:14,column:4},end:{line:17,column:8}},5:{start:{line:14,column:62},end:{line:17,column:5}},6:{start:{line:19,column:34},end:{line:31,column:3}},7:{start:{line:20,column:18},end:{line:20,column:39}},8:{start:{line:21,column:24},end:{line:21,column:26}},9:{start:{line:22,column:4},end:{line:28,column:5}},10:{start:{line:23,column:6},end:{line:27,column:7}},11:{start:{line:24,column:8},end:{line:26,column:10}},12:{start:{line:29,column:4},end:{line:29,column:77}},13:{start:{line:30,column:4},end:{line:30,column:32}},14:{start:{line:32,column:24},end:{line:40,column:3}},15:{start:{line:33,column:23},end:{line:33,column:48}},16:{start:{line:34,column:16},end:{line:34,column:17}},17:{start:{line:35,column:4},end:{line:37,column:5}},18:{start:{line:35,column:34},end:{line:35,column:57}},19:{start:{line:36,column:6},end:{line:36,column:14}},20:{start:{line:38,column:4},end:{line:38,column:60}},21:{start:{line:39,column:4},end:{line:39,column:40}},22:{start:{line:41,column:27},end:{line:45,column:3}},23:{start:{line:42,column:23},end:{line:42,column:48}},24:{start:{line:43,column:4},end:{line:43,column:32}},25:{start:{line:44,column:4},end:{line:44,column:40}},26:{start:{line:46,column:30},end:{line:50,column:3}},27:{start:{line:47,column:23},end:{line:47,column:48}},28:{start:{line:48,column:4},end:{line:48,column:41}},29:{start:{line:49,column:4},end:{line:49,column:40}},30:{start:{line:51,column:32},end:{line:55,column:3}},31:{start:{line:52,column:23},end:{line:52,column:48}},32:{start:{line:53,column:4},end:{line:53,column:45}},33:{start:{line:54,column:4},end:{line:54,column:40}},34:{start:{line:56,column:20},end:{line:56,column:45}},35:{start:{line:57,column:25},end:{line:85,column:14}},36:{start:{line:57,column:76},end:{line:85,column:13}},37:{start:{line:63,column:29},end:{line:63,column:68}},38:{start:{line:72,column:29},end:{line:72,column:70}},39:{start:{line:79,column:23},end:{line:79,column:46}},40:{start:{line:86,column:2},end:{line:115,column:4}},41:{start:{line:117,column:25},end:{line:117,column:68}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:10,column:33},end:{line:10,column:34}},loc:{start:{line:10,column:44},end:{line:116,column:1}},line:10},1:{name:"(anonymous_1)",decl:{start:{line:11,column:34},end:{line:11,column:35}},loc:{start:{line:11,column:40},end:{line:18,column:3}},line:11},2:{name:"(anonymous_2)",decl:{start:{line:14,column:43},end:{line:14,column:44}},loc:{start:{line:14,column:62},end:{line:17,column:5}},line:14},3:{name:"(anonymous_3)",decl:{start:{line:19,column:34},end:{line:19,column:35}},loc:{start:{line:19,column:50},end:{line:31,column:3}},line:19},4:{name:"(anonymous_4)",decl:{start:{line:32,column:24},end:{line:32,column:25}},loc:{start:{line:32,column:30},end:{line:40,column:3}},line:32},5:{name:"(anonymous_5)",decl:{start:{line:35,column:27},end:{line:35,column:28}},loc:{start:{line:35,column:34},end:{line:35,column:57}},line:35},6:{name:"(anonymous_6)",decl:{start:{line:41,column:27},end:{line:41,column:28}},loc:{start:{line:41,column:38},end:{line:45,column:3}},line:41},7:{name:"(anonymous_7)",decl:{start:{line:46,column:30},end:{line:46,column:31}},loc:{start:{line:46,column:49},end:{line:50,column:3}},line:46},8:{name:"(anonymous_8)",decl:{start:{line:51,column:32},end:{line:51,column:33}},loc:{start:{line:51,column:53},end:{line:55,column:3}},line:51},9:{name:"(anonymous_9)",decl:{start:{line:57,column:39},end:{line:57,column:40}},loc:{start:{line:57,column:76},end:{line:85,column:13}},line:57},10:{name:"(anonymous_10)",decl:{start:{line:63,column:18},end:{line:63,column:19}},loc:{start:{line:63,column:29},end:{line:63,column:68}},line:63},11:{name:"(anonymous_11)",decl:{start:{line:72,column:18},end:{line:72,column:19}},loc:{start:{line:72,column:29},end:{line:72,column:70}},line:72},12:{name:"(anonymous_12)",decl:{start:{line:79,column:17},end:{line:79,column:18}},loc:{start:{line:79,column:23},end:{line:79,column:46}},line:79}},branchMap:{0:{loc:{start:{line:13,column:24},end:{line:13,column:41}},type:"binary-expr",locations:[{start:{line:13,column:24},end:{line:13,column:35}},{start:{line:13,column:39},end:{line:13,column:41}}],line:13},1:{loc:{start:{line:23,column:6},end:{line:27,column:7}},type:"if",locations:[{start:{line:23,column:6},end:{line:27,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:23},2:{loc:{start:{line:29,column:18},end:{line:29,column:76}},type:"cond-expr",locations:[{start:{line:29,column:56},end:{line:29,column:67}},{start:{line:29,column:70},end:{line:29,column:76}}],line:29},3:{loc:{start:{line:48,column:28},end:{line:48,column:40}},type:"binary-expr",locations:[{start:{line:48,column:28},end:{line:48,column:34}},{start:{line:48,column:38},end:{line:48,column:40}}],line:48},4:{loc:{start:{line:53,column:30},end:{line:53,column:44}},type:"binary-expr",locations:[{start:{line:53,column:30},end:{line:53,column:38}},{start:{line:53,column:42},end:{line:53,column:44}}],line:53},5:{loc:{start:{line:63,column:56},end:{line:63,column:67}},type:"binary-expr",locations:[{start:{line:63,column:56},end:{line:63,column:61}},{start:{line:63,column:65},end:{line:63,column:67}}],line:63},6:{loc:{start:{line:72,column:58},end:{line:72,column:69}},type:"binary-expr",locations:[{start:{line:72,column:58},end:{line:72,column:63}},{start:{line:72,column:67},end:{line:72,column:69}}],line:72},7:{loc:{start:{line:94,column:8},end:{line:97,column:12}},type:"binary-expr",locations:[{start:{line:94,column:8},end:{line:94,column:30}},{start:{line:94,column:50},end:{line:97,column:12}}],line:94},8:{loc:{start:{line:98,column:8},end:{line:101,column:12}},type:"binary-expr",locations:[{start:{line:98,column:8},end:{line:98,column:28}},{start:{line:98,column:48},end:{line:101,column:12}}],line:98}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalGlobalState.tsx"],names:["variables"],mappings:"AAsFI,SAEI,KAFJ,YAAA;AArFJ,SAAS,uBAA6C;AACtD,SAAS,gBAAgB;AACzB,OAAO,YAAY;AAEnB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,SAAS,sBAAsB;AAG/B,OAAO,SAAS;AAchB,MAAM,2BAAoE,CAAC,UAAU;AACnF,QAAM,0BAA0B,MAA6B;AAC3D,UAAM,QAAQ,MAAM;AACpB,UAAM,cAAc,MAAM,SAAS,CAAC;AAEpC,WAAO,OAAO,QAAQ,WAAW,EAAE,IAAI,CAAC,CAAC,KAAK,KAAK,OAAO;AAAA,MACxD;AAAA,MACA,OAAO,MAAM;AAAA,IACf,EAAE;AAAA,EACJ;AAEA,QAAM,0BAA0B,CAACA,eAAqC;AACpE,UAAM,QAAQ,EAAE,GAAG,MAAM,SAAS;AAGlC,UAAM,cAAmD,CAAC;AAC1D,eAAW,YAAYA,YAAW;AAChC,UAAI,SAAS,IAAI,KAAK,MAAM,IAAI;AAC9B,oBAAY,SAAS,GAAG,IAAI;AAAA,UAC1B,SAAS,SAAS;AAAA,QACpB;AAAA,MACF;AAAA,IACF;AAEA,UAAM,QAAQ,OAAO,KAAK,WAAW,EAAE,SAAS,IAAI,cAAc;AAElE,UAAM,eAAe,KAAK;AAAA,EAC5B;AAEA,QAAM,gBAAgB,MAAM;AAC1B,UAAMA,aAAY,wBAAwB;AAC1C,QAAI,QAAQ;AACZ,WAAOA,WAAU,KAAK,CAAA,MAAK,EAAE,QAAQ,MAAM,KAAK,EAAE,GAAG;AACnD;AAAA,IACF;AACAA,eAAU,KAAK,EAAE,KAAK,MAAM,KAAK,IAAI,OAAO,QAAQ,CAAC;AACrD,4BAAwBA,UAAS;AAAA,EACnC;AAEA,QAAM,mBAAmB,CAAC,UAAkB;AAC1C,UAAMA,aAAY,wBAAwB;AAC1CA,eAAU,OAAO,OAAO,CAAC;AACzB,4BAAwBA,UAAS;AAAA,EACnC;AAEA,QAAM,sBAAsB,CAAC,OAAe,WAAmB;AAC7D,UAAMA,aAAY,wBAAwB;AAC1CA,eAAU,KAAK,EAAE,MAAM,UAAU;AACjC,4BAAwBA,UAAS;AAAA,EACnC;AAEA,QAAM,wBAAwB,CAAC,OAAe,aAAqB;AACjE,UAAMA,aAAY,wBAAwB;AAE1CA,eAAU,KAAK,EAAE,QAAQ,YAAY;AACrC,4BAAwBA,UAAS;AAAA,EACnC;AAEA,QAAM,YAAY,wBAAwB;AAE1C,QAAM,iBAAiB,UAAU,IAAI,CAAC,UAAU,+BAC7C,MAAA,EACC,UAAA;AAAA,IAAA,oBAAC,MAAA,EACC,UAAA;AAAA,MAAC;AAAA,MAAA;AAAA,QACC,OAAO,MAAM,EAAE,KAAK;AAAA,QACpB,OAAO,SAAS;AAAA,QAChB,UAAU,CAAC,UAAU,oBAAoB,OAAO,SAAS,EAAE;AAAA,QAC3D,eAAa,+BAA+B;AAAA,MAAA;AAAA,IAC9C,EAAA,CACF;AAAA,wBACC,MAAA,EACC,UAAA;AAAA,MAAC;AAAA,MAAA;AAAA,QACC,OAAO,MAAM,EAAE,OAAO;AAAA,QACtB,OAAO,SAAS;AAAA,QAChB,UAAU,CAAC,UAAU,sBAAsB,OAAO,SAAS,EAAE;AAAA,QAC7D,eAAa,iCAAiC;AAAA,MAAA;AAAA,IAChD,EAAA,CACF;AAAA,wBACC,MAAA,EAAG,OAAO,EAAE,eAAe,SAAQ,GAClC,UAAA;AAAA,MAAC;AAAA,MAAA;AAAA,QACC,SAAS,MAAM,iBAAiB,KAAK;AAAA,QACrC,OAAO,MAAM,EAAE,iBAAiB;AAAA,QAChC,eAAY;AAAA,QAEZ,8BAAC,UAAA,CAAA,CAAS;AAAA,MAAA;AAAA,IACZ,EAAA,CACF;AAAA,EAAA,EAAA,GAzBO,KA0BT,CACD;AAED,SACE;AAAA,IAAC;AAAA,IAAA;AAAA,MACC,eAAY;AAAA,MACZ,QAAQ,MAAM;AAAA,MACd,cAAc,MAAM;AAAA,MACpB,OAAO,MAAM,EAAE,wBAAwB;AAAA,MAGtC,UAAA;AAAA,QAAA,UAAU,WAAW,KAChB,qBAAC,OAAA,EACC,UAAA;AAAA,UAAA,oBAAC,KAAA,EAAG,UAAA,MAAM,EAAE,2FAA2F,EAAA,CAAE;AAAA,UACzG,oBAAC,OAAA,EAAc,WAAU,uBACvB,UAAA,oBAAC,KAAA,EAAI,WAAW,OAAO,MAAM,MAAA,CAAO,EAAA,GAD7B,KAET;AAAA,QAAA,EAAA,CACF;AAAA,QAEL,UAAU,SAAS,KACpB,qBAAC,SAAA,EACC,UAAA;AAAA,UAAA,oBAAC,SAAA,CAAA,CACD;AAAA,UACA,oBAAC,WACE,UAAA,eAAA,CACH;AAAA,QAAA,EAAA,CACF;AAAA,4BAEC,OAAA,EACC,UAAA;AAAA,UAAC;AAAA,UAAA;AAAA,YACC,SAAS;AAAA,YACT,eAAY;AAAA,YAEZ,UAAA;AAAA,cAAA,oBAAC,gBAAA,CAAA,CAAe;AAAA,cACf,MAAM,EAAE,cAAc;AAAA,YAAA;AAAA,UAAA;AAAA,QACzB,EAAA,CACF;AAAA,MAAA;AAAA,IAAA;AAAA,EACF;AAEJ;AAEA,MAAM,mBAAmB,gBAAgB,EAAE,wBAAwB;AACnE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"681e0b3080d4effb89e735abebd0878f77572d27"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return vi=function(){return s},s}vi();vi().s[0]++;const TPe=n=>{vi().f[0]++,vi().s[1]++;const e=()=>{vi().f[1]++;const h=(vi().s[2]++,n.mapStyle),m=(vi().s[3]++,vi().b[0][0]++,h.state||(vi().b[0][1]++,{}));return vi().s[4]++,Object.entries(m).map(([y,M])=>(vi().f[2]++,vi().s[5]++,{key:y,value:M.default}))};vi().s[6]++;const t=h=>{vi().f[3]++;const m=(vi().s[7]++,{...n.mapStyle}),y=(vi().s[8]++,{});vi().s[9]++;for(const M of h)vi().s[10]++,M.key.trim()!==""?(vi().b[1][0]++,vi().s[11]++,y[M.key]={default:M.value}):vi().b[1][1]++;vi().s[12]++,m.state=Object.keys(y).length>0?(vi().b[2][0]++,y):(vi().b[2][1]++,void 0),vi().s[13]++,n.onStyleChanged(m)};vi().s[14]++;const i=()=>{vi().f[4]++;const h=(vi().s[15]++,e());let m=(vi().s[16]++,1);for(vi().s[17]++;h.find(y=>(vi().f[5]++,vi().s[18]++,y.key===`key${m}`));)vi().s[19]++,m++;vi().s[20]++,h.push({key:`key${m}`,value:"value"}),vi().s[21]++,t(h)};vi().s[22]++;const r=h=>{vi().f[6]++;const m=(vi().s[23]++,e());vi().s[24]++,m.splice(h,1),vi().s[25]++,t(m)};vi().s[26]++;const o=(h,m)=>{vi().f[7]++;const y=(vi().s[27]++,e());vi().s[28]++,y[h].key=(vi().b[3][0]++,m||(vi().b[3][1]++,"")),vi().s[29]++,t(y)};vi().s[30]++;const s=(h,m)=>{vi().f[8]++;const y=(vi().s[31]++,e());vi().s[32]++,y[h].value=(vi().b[4][0]++,m||(vi().b[4][1]++,"")),vi().s[33]++,t(y)},a=(vi().s[34]++,e()),c=(vi().s[35]++,a.map((h,m)=>(vi().f[9]++,vi().s[36]++,ie.jsxs("tr",{children:[ie.jsx("td",{children:ie.jsx(md,{label:n.t("Key"),value:h.key,onChange:y=>(vi().f[10]++,vi().s[37]++,o(m,(vi().b[5][0]++,y||(vi().b[5][1]++,"")))),"data-wd-key":"global-state-variable-key:"+m})}),ie.jsx("td",{children:ie.jsx(md,{label:n.t("Value"),value:h.value,onChange:y=>(vi().f[11]++,vi().s[38]++,s(m,(vi().b[6][0]++,y||(vi().b[6][1]++,"")))),"data-wd-key":"global-state-variable-value:"+m})}),ie.jsx("td",{style:{verticalAlign:"middle"},children:ie.jsx(Zs,{onClick:()=>(vi().f[12]++,vi().s[39]++,r(m)),title:n.t("Remove variable"),"data-wd-key":"global-state-remove-variable",children:ie.jsx(Hb,{})})})]},m))));return vi().s[40]++,ie.jsxs(C1,{"data-wd-key":"modal:global-state",isOpen:n.isOpen,onOpenToggle:n.onOpenToggle,title:n.t("Global State Variables"),children:[(vi().b[7][0]++,a.length===0&&(vi().b[7][1]++,ie.jsxs("div",{children:[ie.jsx("p",{children:n.t("No global state variables defined. Add variables to create reusable values in your style.")}),ie.jsx("div",{className:"maputnik-doc-inline",children:ie.jsx(O6,{fieldSpec:Zr.$root.state})},"doc")]}))),(vi().b[8][0]++,a.length>0&&(vi().b[8][1]++,ie.jsxs("table",{children:[ie.jsx("thead",{}),ie.jsx("tbody",{children:c})]}))),ie.jsx("div",{children:ie.jsxs(Zs,{onClick:i,"data-wd-key":"global-state-add-variable",children:[ie.jsx(K6,{}),n.t("Add Variable")]})})]})},RPe=(vi().s[41]++,No()(TPe));var ib={},n3={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */var DPe=n3.exports,HV;function PPe(){return HV||(HV=1,(function(n,e){(function(t){var i=e&&!e.nodeType&&e,r=n&&!n.nodeType&&n,o=typeof window=="object"&&window;(o.global===o||o.window===o||o.self===o)&&(t=o);var s,a=2147483647,c=36,h=1,m=26,y=38,M=700,x=72,T=128,P="-",F=/^xn--/,j=/[^\x20-\x7E]/,q=/[\x2E\u3002\uFF0E\uFF61]/g,V={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},H=c-h,Q=Math.floor,Y=String.fromCharCode,z;function se(ke){throw new RangeError(V[ke])}function le(ke,we){for(var ze=ke.length,Me=[];ze--;)Me[ze]=we(ke[ze]);return Me}function pe(ke,we){var ze=ke.split("@"),Me="";ze.length>1&&(Me=ze[0]+"@",ke=ze[1]),ke=ke.replace(q,".");var lt=ke.split("."),nt=le(lt,we).join(".");return Me+nt}function de(ke){for(var we=[],ze=0,Me=ke.length,lt,nt;ze<Me;)lt=ke.charCodeAt(ze++),lt>=55296&&lt<=56319&&ze<Me?(nt=ke.charCodeAt(ze++),(nt&64512)==56320?we.push(((lt&1023)<<10)+(nt&1023)+65536):(we.push(lt),ze--)):we.push(lt);return we}function ve(ke){return le(ke,function(we){var ze="";return we>65535&&(we-=65536,ze+=Y(we>>>10&1023|55296),we=56320|we&1023),ze+=Y(we),ze}).join("")}function Ee(ke){return ke-48<10?ke-22:ke-65<26?ke-65:ke-97<26?ke-97:c}function Re(ke,we){return ke+22+75*(ke<26)-((we!=0)<<5)}function je(ke,we,ze){var Me=0;for(ke=ze?Q(ke/M):ke>>1,ke+=Q(ke/we);ke>H*m>>1;Me+=c)ke=Q(ke/H);return Q(Me+(H+1)*ke/(ke+y))}function Ie(ke){var we=[],ze=ke.length,Me,lt=0,nt=T,bt=x,Bt,Ke,Te,Se,We,at,it,ft,Dt;for(Bt=ke.lastIndexOf(P),Bt<0&&(Bt=0),Ke=0;Ke<Bt;++Ke)ke.charCodeAt(Ke)>=128&&se("not-basic"),we.push(ke.charCodeAt(Ke));for(Te=Bt>0?Bt+1:0;Te<ze;){for(Se=lt,We=1,at=c;Te>=ze&&se("invalid-input"),it=Ee(ke.charCodeAt(Te++)),(it>=c||it>Q((a-lt)/We))&&se("overflow"),lt+=it*We,ft=at<=bt?h:at>=bt+m?m:at-bt,!(it<ft);at+=c)Dt=c-ft,We>Q(a/Dt)&&se("overflow"),We*=Dt;Me=we.length+1,bt=je(lt-Se,Me,Se==0),Q(lt/Me)>a-nt&&se("overflow"),nt+=Q(lt/Me),lt%=Me,we.splice(lt++,0,nt)}return ve(we)}function qe(ke){var we,ze,Me,lt,nt,bt,Bt,Ke,Te,Se,We,at=[],it,ft,Dt,Ot;for(ke=de(ke),it=ke.length,we=T,ze=0,nt=x,bt=0;bt<it;++bt)We=ke[bt],We<128&&at.push(Y(We));for(Me=lt=at.length,lt&&at.push(P);Me<it;){for(Bt=a,bt=0;bt<it;++bt)We=ke[bt],We>=we&&We<Bt&&(Bt=We);for(ft=Me+1,Bt-we>Q((a-ze)/ft)&&se("overflow"),ze+=(Bt-we)*ft,we=Bt,bt=0;bt<it;++bt)if(We=ke[bt],We<we&&++ze>a&&se("overflow"),We==we){for(Ke=ze,Te=c;Se=Te<=nt?h:Te>=nt+m?m:Te-nt,!(Ke<Se);Te+=c)Ot=Ke-Se,Dt=c-Se,at.push(Y(Re(Se+Ot%Dt,0))),Ke=Q(Ot/Dt);at.push(Y(Re(Ke,0))),nt=je(ze,ft,Me==lt),ze=0,++Me}++ze,++we}return at.join("")}function tt(ke){return pe(ke,function(we){return F.test(we)?Ie(we.slice(4).toLowerCase()):we})}function At(ke){return pe(ke,function(we){return j.test(we)?"xn--"+qe(we):we})}if(s={version:"1.4.1",ucs2:{decode:de,encode:ve},decode:Ie,encode:qe,toASCII:At,toUnicode:tt},i&&r)if(n.exports==i)r.exports=s;else for(z in s)s.hasOwnProperty(z)&&(i[z]=s[z]);else t.punycode=s})(DPe)})(n3,n3.exports)),n3.exports}var sT,ZV;function Zx(){return ZV||(ZV=1,sT=TypeError),sT}const UPe={},KPe=Object.freeze(Object.defineProperty({__proto__:null,default:UPe},Symbol.toStringTag,{value:"Module"})),LPe=zD(KPe);var aT,XV;function V6(){if(XV)return aT;XV=1;var n=typeof Map=="function"&&Map.prototype,e=Object.getOwnPropertyDescriptor&&n?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,t=n&&e&&typeof e.get=="function"?e.get:null,i=n&&Map.prototype.forEach,r=typeof Set=="function"&&Set.prototype,o=Object.getOwnPropertyDescriptor&&r?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,s=r&&o&&typeof o.get=="function"?o.get:null,a=r&&Set.prototype.forEach,c=typeof WeakMap=="function"&&WeakMap.prototype,h=c?WeakMap.prototype.has:null,m=typeof WeakSet=="function"&&WeakSet.prototype,y=m?WeakSet.prototype.has:null,M=typeof WeakRef=="function"&&WeakRef.prototype,x=M?WeakRef.prototype.deref:null,T=Boolean.prototype.valueOf,P=Object.prototype.toString,F=Function.prototype.toString,j=String.prototype.match,q=String.prototype.slice,V=String.prototype.replace,H=String.prototype.toUpperCase,Q=String.prototype.toLowerCase,Y=RegExp.prototype.test,z=Array.prototype.concat,se=Array.prototype.join,le=Array.prototype.slice,pe=Math.floor,de=typeof BigInt=="function"?BigInt.prototype.valueOf:null,ve=Object.getOwnPropertySymbols,Ee=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Re=typeof Symbol=="function"&&typeof Symbol.iterator=="object",je=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Re||!0)?Symbol.toStringTag:null,Ie=Object.prototype.propertyIsEnumerable,qe=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(ye){return ye.__proto__}:null);function tt(ye,Be){if(ye===1/0||ye===-1/0||ye!==ye||ye&&ye>-1e3&&ye<1e3||Y.call(/e/,Be))return Be;var v=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof ye=="number"){var yt=ye<0?-pe(-ye):pe(ye);if(yt!==ye){var Mt=String(yt),Pt=q.call(Be,Mt.length+1);return V.call(Mt,v,"$&_")+"."+V.call(V.call(Pt,/([0-9]{3})/g,"$&_"),/_$/,"")}}return V.call(Be,v,"$&_")}var At=LPe,ke=At.custom,we=ft(ke)?ke:null,ze={__proto__:null,double:'"',single:"'"},Me={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};aT=function ye(Be,v,yt,Mt){var Pt=v||{};if(Jt(Pt,"quoteStyle")&&!Jt(ze,Pt.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Jt(Pt,"maxStringLength")&&(typeof Pt.maxStringLength=="number"?Pt.maxStringLength<0&&Pt.maxStringLength!==1/0:Pt.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var en=Jt(Pt,"customInspect")?Pt.customInspect:!0;if(typeof en!="boolean"&&en!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Jt(Pt,"indent")&&Pt.indent!==null&&Pt.indent!=="	"&&!(parseInt(Pt.indent,10)===Pt.indent&&Pt.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Jt(Pt,"numericSeparator")&&typeof Pt.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var mt=Pt.numericSeparator;if(typeof Be>"u")return"undefined";if(Be===null)return"null";if(typeof Be=="boolean")return Be?"true":"false";if(typeof Be=="string")return _e(Be,Pt);if(typeof Be=="number"){if(Be===0)return 1/0/Be>0?"0":"-0";var Qn=String(Be);return mt?tt(Be,Qn):Qn}if(typeof Be=="bigint"){var Xn=String(Be)+"n";return mt?tt(Be,Xn):Xn}var Cn=typeof Pt.depth>"u"?5:Pt.depth;if(typeof yt>"u"&&(yt=0),yt>=Cn&&Cn>0&&typeof Be=="object")return Bt(Be)?"[Array]":"[Object]";var Fn=Le(Pt,yt);if(typeof Mt>"u")Mt=[];else if(oi(Mt,Be)>=0)return"[Circular]";function pi(zs,Pi,kl){if(Pi&&(Mt=le.call(Mt),Mt.push(Pi)),kl){var eo={depth:Pt.depth};return Jt(Pt,"quoteStyle")&&(eo.quoteStyle=Pt.quoteStyle),ye(zs,eo,yt+1,Mt)}return ye(zs,Pt,yt+1,Mt)}if(typeof Be=="function"&&!Te(Be)){var Hi=Pn(Be),Ii=rt(Be,pi);return"[Function"+(Hi?": "+Hi:" (anonymous)")+"]"+(Ii.length>0?" { "+se.call(Ii,", ")+" }":"")}if(ft(Be)){var Ar=Re?V.call(String(Be),/^(Symbol\(.*\))_[^)]*$/,"$1"):Ee.call(Be);return typeof Be=="object"&&!Re?ee(Ar):Ar}if(It(Be)){for(var ii="<"+Q.call(String(Be.nodeName)),Fi=Be.attributes||[],Ri=0;Ri<Fi.length;Ri++)ii+=" "+Fi[Ri].name+"="+lt(nt(Fi[Ri].value),"double",Pt);return ii+=">",Be.childNodes&&Be.childNodes.length&&(ii+="..."),ii+="</"+Q.call(String(Be.nodeName))+">",ii}if(Bt(Be)){if(Be.length===0)return"[]";var on=rt(Be,pi);return Fn&&!be(on)?"["+Ve(on,Fn)+"]":"[ "+se.call(on,", ")+" ]"}if(Se(Be)){var nr=rt(Be,pi);return!("cause"in Error.prototype)&&"cause"in Be&&!Ie.call(Be,"cause")?"{ ["+String(Be)+"] "+se.call(z.call("[cause]: "+pi(Be.cause),nr),", ")+" }":nr.length===0?"["+String(Be)+"]":"{ ["+String(Be)+"] "+se.call(nr,", ")+" }"}if(typeof Be=="object"&&en){if(we&&typeof Be[we]=="function"&&At)return At(Be,{depth:Cn-yt});if(en!=="symbol"&&typeof Be.inspect=="function")return Be.inspect()}if(In(Be)){var Go=[];return i&&i.call(Be,function(zs,Pi){Go.push(pi(Pi,Be,!0)+" => "+pi(zs,Be))}),ue("Map",t.call(Be),Go,Fn)}if($n(Be)){var Co=[];return a&&a.call(Be,function(zs){Co.push(pi(zs,Be))}),ue("Set",s.call(Be),Co,Fn)}if(Tn(Be))return ne("WeakMap");if(Un(Be))return ne("WeakSet");if(dn(Be))return ne("WeakRef");if(at(Be))return ee(pi(Number(Be)));if(Dt(Be))return ee(pi(de.call(Be)));if(it(Be))return ee(T.call(Be));if(We(Be))return ee(pi(String(Be)));if(typeof window<"u"&&Be===window)return"{ [object Window] }";if(typeof globalThis<"u"&&Be===globalThis||typeof window<"u"&&Be===window)return"{ [object globalThis] }";if(!Ke(Be)&&!Te(Be)){var gr=rt(Be,pi),gn=qe?qe(Be)===Object.prototype:Be instanceof Object||Be.constructor===Object,Ni=Be instanceof Object?"":"null prototype",ni=!gn&&je&&Object(Be)===Be&&je in Be?q.call(Dn(Be),8,-1):Ni?"Object":"",ga=gn||typeof Be.constructor!="function"?"":Be.constructor.name?Be.constructor.name+" ":"",Ra=ga+(ni||Ni?"["+se.call(z.call([],ni||[],Ni||[]),": ")+"] ":"");return gr.length===0?Ra+"{}":Fn?Ra+"{"+Ve(gr,Fn)+"}":Ra+"{ "+se.call(gr,", ")+" }"}return String(Be)};function lt(ye,Be,v){var yt=v.quoteStyle||Be,Mt=ze[yt];return Mt+ye+Mt}function nt(ye){return V.call(String(ye),/"/g,"&quot;")}function bt(ye){return!je||!(typeof ye=="object"&&(je in ye||typeof ye[je]<"u"))}function Bt(ye){return Dn(ye)==="[object Array]"&&bt(ye)}function Ke(ye){return Dn(ye)==="[object Date]"&&bt(ye)}function Te(ye){return Dn(ye)==="[object RegExp]"&&bt(ye)}function Se(ye){return Dn(ye)==="[object Error]"&&bt(ye)}function We(ye){return Dn(ye)==="[object String]"&&bt(ye)}function at(ye){return Dn(ye)==="[object Number]"&&bt(ye)}function it(ye){return Dn(ye)==="[object Boolean]"&&bt(ye)}function ft(ye){if(Re)return ye&&typeof ye=="object"&&ye instanceof Symbol;if(typeof ye=="symbol")return!0;if(!ye||typeof ye!="object"||!Ee)return!1;try{return Ee.call(ye),!0}catch{}return!1}function Dt(ye){if(!ye||typeof ye!="object"||!de)return!1;try{return de.call(ye),!0}catch{}return!1}var Ot=Object.prototype.hasOwnProperty||function(ye){return ye in this};function Jt(ye,Be){return Ot.call(ye,Be)}function Dn(ye){return P.call(ye)}function Pn(ye){if(ye.name)return ye.name;var Be=j.call(F.call(ye),/^function\s*([\w$]+)/);return Be?Be[1]:null}function oi(ye,Be){if(ye.indexOf)return ye.indexOf(Be);for(var v=0,yt=ye.length;v<yt;v++)if(ye[v]===Be)return v;return-1}function In(ye){if(!t||!ye||typeof ye!="object")return!1;try{t.call(ye);try{s.call(ye)}catch{return!0}return ye instanceof Map}catch{}return!1}function Tn(ye){if(!h||!ye||typeof ye!="object")return!1;try{h.call(ye,h);try{y.call(ye,y)}catch{return!0}return ye instanceof WeakMap}catch{}return!1}function dn(ye){if(!x||!ye||typeof ye!="object")return!1;try{return x.call(ye),!0}catch{}return!1}function $n(ye){if(!s||!ye||typeof ye!="object")return!1;try{s.call(ye);try{t.call(ye)}catch{return!0}return ye instanceof Set}catch{}return!1}function Un(ye){if(!y||!ye||typeof ye!="object")return!1;try{y.call(ye,y);try{h.call(ye,h)}catch{return!0}return ye instanceof WeakSet}catch{}return!1}function It(ye){return!ye||typeof ye!="object"?!1:typeof HTMLElement<"u"&&ye instanceof HTMLElement?!0:typeof ye.nodeName=="string"&&typeof ye.getAttribute=="function"}function _e(ye,Be){if(ye.length>Be.maxStringLength){var v=ye.length-Be.maxStringLength,yt="... "+v+" more character"+(v>1?"s":"");return _e(q.call(ye,0,Be.maxStringLength),Be)+yt}var Mt=Me[Be.quoteStyle||"single"];Mt.lastIndex=0;var Pt=V.call(V.call(ye,Mt,"\\$1"),/[\x00-\x1f]/g,oe);return lt(Pt,"single",Be)}function oe(ye){var Be=ye.charCodeAt(0),v={8:"b",9:"t",10:"n",12:"f",13:"r"}[Be];return v?"\\"+v:"\\x"+(Be<16?"0":"")+H.call(Be.toString(16))}function ee(ye){return"Object("+ye+")"}function ne(ye){return ye+" { ? }"}function ue(ye,Be,v,yt){var Mt=yt?Ve(v,yt):se.call(v,", ");return ye+" ("+Be+") {"+Mt+"}"}function be(ye){for(var Be=0;Be<ye.length;Be++)if(oi(ye[Be],`
`)>=0)return!1;return!0}function Le(ye,Be){var v;if(ye.indent==="	")v="	";else if(typeof ye.indent=="number"&&ye.indent>0)v=se.call(Array(ye.indent+1)," ");else return null;return{base:v,prev:se.call(Array(Be+1),v)}}function Ve(ye,Be){if(ye.length===0)return"";var v=`
`+Be.prev+Be.base;return v+se.call(ye,","+v)+`
`+Be.prev}function rt(ye,Be){var v=Bt(ye),yt=[];if(v){yt.length=ye.length;for(var Mt=0;Mt<ye.length;Mt++)yt[Mt]=Jt(ye,Mt)?Be(ye[Mt],ye):""}var Pt=typeof ve=="function"?ve(ye):[],en;if(Re){en={};for(var mt=0;mt<Pt.length;mt++)en["$"+Pt[mt]]=Pt[mt]}for(var Qn in ye)Jt(ye,Qn)&&(v&&String(Number(Qn))===Qn&&Qn<ye.length||Re&&en["$"+Qn]instanceof Symbol||(Y.call(/[^\w$]/,Qn)?yt.push(Be(Qn,ye)+": "+Be(ye[Qn],ye)):yt.push(Qn+": "+Be(ye[Qn],ye))));if(typeof ve=="function")for(var Xn=0;Xn<Pt.length;Xn++)Ie.call(ye,Pt[Xn])&&yt.push("["+Be(Pt[Xn])+"]: "+Be(ye[Pt[Xn]],ye));return yt}return aT}var lT,JV;function FPe(){if(JV)return lT;JV=1;var n=V6(),e=Zx(),t=function(a,c,h){for(var m=a,y;(y=m.next)!=null;m=y)if(y.key===c)return m.next=y.next,h||(y.next=a.next,a.next=y),y},i=function(a,c){if(a){var h=t(a,c);return h&&h.value}},r=function(a,c,h){var m=t(a,c);m?m.value=h:a.next={key:c,next:a.next,value:h}},o=function(a,c){return a?!!t(a,c):!1},s=function(a,c){if(a)return t(a,c,!0)};return lT=function(){var c,h={assert:function(m){if(!h.has(m))throw new e("Side channel does not contain "+n(m))},delete:function(m){var y=c&&c.next,M=s(c,m);return M&&y&&y===M&&(c=void 0),!!M},get:function(m){return i(c,m)},has:function(m){return o(c,m)},set:function(m,y){c||(c={next:void 0}),r(c,m,y)}};return h},lT}var uT,eH;function hae(){return eH||(eH=1,uT=Object),uT}var cT,tH;function zPe(){return tH||(tH=1,cT=Error),cT}var AT,nH;function jPe(){return nH||(nH=1,AT=EvalError),AT}var hT,iH;function NPe(){return iH||(iH=1,hT=RangeError),hT}var dT,rH;function GPe(){return rH||(rH=1,dT=ReferenceError),dT}var fT,oH;function WPe(){return oH||(oH=1,fT=SyntaxError),fT}var pT,sH;function QPe(){return sH||(sH=1,pT=URIError),pT}var mT,aH;function qPe(){return aH||(aH=1,mT=Math.abs),mT}var gT,lH;function YPe(){return lH||(lH=1,gT=Math.floor),gT}var yT,uH;function $Pe(){return uH||(uH=1,yT=Math.max),yT}var vT,cH;function VPe(){return cH||(cH=1,vT=Math.min),vT}var bT,AH;function HPe(){return AH||(AH=1,bT=Math.pow),bT}var CT,hH;function ZPe(){return hH||(hH=1,CT=Math.round),CT}var _T,dH;function XPe(){return dH||(dH=1,_T=Number.isNaN||function(e){return e!==e}),_T}var xT,fH;function JPe(){if(fH)return xT;fH=1;var n=XPe();return xT=function(t){return n(t)||t===0?t:t<0?-1:1},xT}var MT,pH;function eUe(){return pH||(pH=1,MT=Object.getOwnPropertyDescriptor),MT}var wT,mH;function dae(){if(mH)return wT;mH=1;var n=eUe();if(n)try{n([],"length")}catch{n=null}return wT=n,wT}var ST,gH;function tUe(){if(gH)return ST;gH=1;var n=Object.defineProperty||!1;if(n)try{n({},"a",{value:1})}catch{n=!1}return ST=n,ST}var ET,yH;function nUe(){return yH||(yH=1,ET=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),i=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(i)!=="[object Symbol]")return!1;var r=42;e[t]=r;for(var o in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var s=Object.getOwnPropertySymbols(e);if(s.length!==1||s[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(e,t);if(a.value!==r||a.enumerable!==!0)return!1}return!0}),ET}var OT,vH;function iUe(){if(vH)return OT;vH=1;var n=typeof Symbol<"u"&&Symbol,e=nUe();return OT=function(){return typeof n!="function"||typeof Symbol!="function"||typeof n("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},OT}var BT,bH;function fae(){return bH||(bH=1,BT=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),BT}var IT,CH;function pae(){if(CH)return IT;CH=1;var n=hae();return IT=n.getPrototypeOf||null,IT}var kT,_H;function rUe(){if(_H)return kT;_H=1;var n="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,t=Math.max,i="[object Function]",r=function(c,h){for(var m=[],y=0;y<c.length;y+=1)m[y]=c[y];for(var M=0;M<h.length;M+=1)m[M+c.length]=h[M];return m},o=function(c,h){for(var m=[],y=h,M=0;y<c.length;y+=1,M+=1)m[M]=c[y];return m},s=function(a,c){for(var h="",m=0;m<a.length;m+=1)h+=a[m],m+1<a.length&&(h+=c);return h};return kT=function(c){var h=this;if(typeof h!="function"||e.apply(h)!==i)throw new TypeError(n+h);for(var m=o(arguments,1),y,M=function(){if(this instanceof y){var j=h.apply(this,r(m,arguments));return Object(j)===j?j:this}return h.apply(c,r(m,arguments))},x=t(0,h.length-m.length),T=[],P=0;P<x;P++)T[P]="$"+P;if(y=Function("binder","return function ("+s(T,",")+"){ return binder.apply(this,arguments); }")(M),h.prototype){var F=function(){};F.prototype=h.prototype,y.prototype=new F,F.prototype=null}return y},kT}var TT,xH;function H6(){if(xH)return TT;xH=1;var n=rUe();return TT=Function.prototype.bind||n,TT}var RT,MH;function IL(){return MH||(MH=1,RT=Function.prototype.call),RT}var DT,wH;function mae(){return wH||(wH=1,DT=Function.prototype.apply),DT}var PT,SH;function oUe(){return SH||(SH=1,PT=typeof Reflect<"u"&&Reflect&&Reflect.apply),PT}var UT,EH;function sUe(){if(EH)return UT;EH=1;var n=H6(),e=mae(),t=IL(),i=oUe();return UT=i||n.call(t,e),UT}var KT,OH;function gae(){if(OH)return KT;OH=1;var n=H6(),e=Zx(),t=IL(),i=sUe();return KT=function(o){if(o.length<1||typeof o[0]!="function")throw new e("a function is required");return i(n,t,o)},KT}var LT,BH;function aUe(){if(BH)return LT;BH=1;var n=gae(),e=dae(),t;try{t=[].__proto__===Array.prototype}catch(s){if(!s||typeof s!="object"||!("code"in s)||s.code!=="ERR_PROTO_ACCESS")throw s}var i=!!t&&e&&e(Object.prototype,"__proto__"),r=Object,o=r.getPrototypeOf;return LT=i&&typeof i.get=="function"?n([i.get]):typeof o=="function"?function(a){return o(a==null?a:r(a))}:!1,LT}var FT,IH;function lUe(){if(IH)return FT;IH=1;var n=fae(),e=pae(),t=aUe();return FT=n?function(r){return n(r)}:e?function(r){if(!r||typeof r!="object"&&typeof r!="function")throw new TypeError("getProto: not an object");return e(r)}:t?function(r){return t(r)}:null,FT}var zT,kH;function uUe(){if(kH)return zT;kH=1;var n=Function.prototype.call,e=Object.prototype.hasOwnProperty,t=H6();return zT=t.call(n,e),zT}var jT,TH;function kL(){if(TH)return jT;TH=1;var n,e=hae(),t=zPe(),i=jPe(),r=NPe(),o=GPe(),s=WPe(),a=Zx(),c=QPe(),h=qPe(),m=YPe(),y=$Pe(),M=VPe(),x=HPe(),T=ZPe(),P=JPe(),F=Function,j=function(Te){try{return F('"use strict"; return ('+Te+").constructor;")()}catch{}},q=dae(),V=tUe(),H=function(){throw new a},Q=q?(function(){try{return arguments.callee,H}catch{try{return q(arguments,"callee").get}catch{return H}}})():H,Y=iUe()(),z=lUe(),se=pae(),le=fae(),pe=mae(),de=IL(),ve={},Ee=typeof Uint8Array>"u"||!z?n:z(Uint8Array),Re={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?n:ArrayBuffer,"%ArrayIteratorPrototype%":Y&&z?z([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":ve,"%AsyncGenerator%":ve,"%AsyncGeneratorFunction%":ve,"%AsyncIteratorPrototype%":ve,"%Atomics%":typeof Atomics>"u"?n:Atomics,"%BigInt%":typeof BigInt>"u"?n:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?n:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?n:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":t,"%eval%":eval,"%EvalError%":i,"%Float16Array%":typeof Float16Array>"u"?n:Float16Array,"%Float32Array%":typeof Float32Array>"u"?n:Float32Array,"%Float64Array%":typeof Float64Array>"u"?n:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?n:FinalizationRegistry,"%Function%":F,"%GeneratorFunction%":ve,"%Int8Array%":typeof Int8Array>"u"?n:Int8Array,"%Int16Array%":typeof Int16Array>"u"?n:Int16Array,"%Int32Array%":typeof Int32Array>"u"?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Y&&z?z(z([][Symbol.iterator]())):n,"%JSON%":typeof JSON=="object"?JSON:n,"%Map%":typeof Map>"u"?n:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Y||!z?n:z(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":e,"%Object.getOwnPropertyDescriptor%":q,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?n:Promise,"%Proxy%":typeof Proxy>"u"?n:Proxy,"%RangeError%":r,"%ReferenceError%":o,"%Reflect%":typeof Reflect>"u"?n:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?n:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Y||!z?n:z(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Y&&z?z(""[Symbol.iterator]()):n,"%Symbol%":Y?Symbol:n,"%SyntaxError%":s,"%ThrowTypeError%":Q,"%TypedArray%":Ee,"%TypeError%":a,"%Uint8Array%":typeof Uint8Array>"u"?n:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?n:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?n:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?n:Uint32Array,"%URIError%":c,"%WeakMap%":typeof WeakMap>"u"?n:WeakMap,"%WeakRef%":typeof WeakRef>"u"?n:WeakRef,"%WeakSet%":typeof WeakSet>"u"?n:WeakSet,"%Function.prototype.call%":de,"%Function.prototype.apply%":pe,"%Object.defineProperty%":V,"%Object.getPrototypeOf%":se,"%Math.abs%":h,"%Math.floor%":m,"%Math.max%":y,"%Math.min%":M,"%Math.pow%":x,"%Math.round%":T,"%Math.sign%":P,"%Reflect.getPrototypeOf%":le};if(z)try{null.error}catch(Te){var je=z(z(Te));Re["%Error.prototype%"]=je}var Ie=function Te(Se){var We;if(Se==="%AsyncFunction%")We=j("async function () {}");else if(Se==="%GeneratorFunction%")We=j("function* () {}");else if(Se==="%AsyncGeneratorFunction%")We=j("async function* () {}");else if(Se==="%AsyncGenerator%"){var at=Te("%AsyncGeneratorFunction%");at&&(We=at.prototype)}else if(Se==="%AsyncIteratorPrototype%"){var it=Te("%AsyncGenerator%");it&&z&&(We=z(it.prototype))}return Re[Se]=We,We},qe={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},tt=H6(),At=uUe(),ke=tt.call(de,Array.prototype.concat),we=tt.call(pe,Array.prototype.splice),ze=tt.call(de,String.prototype.replace),Me=tt.call(de,String.prototype.slice),lt=tt.call(de,RegExp.prototype.exec),nt=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,bt=/\\(\\)?/g,Bt=function(Se){var We=Me(Se,0,1),at=Me(Se,-1);if(We==="%"&&at!=="%")throw new s("invalid intrinsic syntax, expected closing `%`");if(at==="%"&&We!=="%")throw new s("invalid intrinsic syntax, expected opening `%`");var it=[];return ze(Se,nt,function(ft,Dt,Ot,Jt){it[it.length]=Ot?ze(Jt,bt,"$1"):Dt||ft}),it},Ke=function(Se,We){var at=Se,it;if(At(qe,at)&&(it=qe[at],at="%"+it[0]+"%"),At(Re,at)){var ft=Re[at];if(ft===ve&&(ft=Ie(at)),typeof ft>"u"&&!We)throw new a("intrinsic "+Se+" exists, but is not available. Please file an issue!");return{alias:it,name:at,value:ft}}throw new s("intrinsic "+Se+" does not exist!")};return jT=function(Se,We){if(typeof Se!="string"||Se.length===0)throw new a("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof We!="boolean")throw new a('"allowMissing" argument must be a boolean');if(lt(/^%?[^%]*%?$/,Se)===null)throw new s("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var at=Bt(Se),it=at.length>0?at[0]:"",ft=Ke("%"+it+"%",We),Dt=ft.name,Ot=ft.value,Jt=!1,Dn=ft.alias;Dn&&(it=Dn[0],we(at,ke([0,1],Dn)));for(var Pn=1,oi=!0;Pn<at.length;Pn+=1){var In=at[Pn],Tn=Me(In,0,1),dn=Me(In,-1);if((Tn==='"'||Tn==="'"||Tn==="`"||dn==='"'||dn==="'"||dn==="`")&&Tn!==dn)throw new s("property names with quotes must have matching quotes");if((In==="constructor"||!oi)&&(Jt=!0),it+="."+In,Dt="%"+it+"%",At(Re,Dt))Ot=Re[Dt];else if(Ot!=null){if(!(In in Ot)){if(!We)throw new a("base intrinsic for "+Se+" exists, but the property is not available.");return}if(q&&Pn+1>=at.length){var $n=q(Ot,In);oi=!!$n,oi&&"get"in $n&&!("originalValue"in $n.get)?Ot=$n.get:Ot=Ot[In]}else oi=At(Ot,In),Ot=Ot[In];oi&&!Jt&&(Re[Dt]=Ot)}}return Ot},jT}var NT,RH;function yae(){if(RH)return NT;RH=1;var n=kL(),e=gae(),t=e([n("%String.prototype.indexOf%")]);return NT=function(r,o){var s=n(r,!!o);return typeof s=="function"&&t(r,".prototype.")>-1?e([s]):s},NT}var GT,DH;function vae(){if(DH)return GT;DH=1;var n=kL(),e=yae(),t=V6(),i=Zx(),r=n("%Map%",!0),o=e("Map.prototype.get",!0),s=e("Map.prototype.set",!0),a=e("Map.prototype.has",!0),c=e("Map.prototype.delete",!0),h=e("Map.prototype.size",!0);return GT=!!r&&function(){var y,M={assert:function(x){if(!M.has(x))throw new i("Side channel does not contain "+t(x))},delete:function(x){if(y){var T=c(y,x);return h(y)===0&&(y=void 0),T}return!1},get:function(x){if(y)return o(y,x)},has:function(x){return y?a(y,x):!1},set:function(x,T){y||(y=new r),s(y,x,T)}};return M},GT}var WT,PH;function cUe(){if(PH)return WT;PH=1;var n=kL(),e=yae(),t=V6(),i=vae(),r=Zx(),o=n("%WeakMap%",!0),s=e("WeakMap.prototype.get",!0),a=e("WeakMap.prototype.set",!0),c=e("WeakMap.prototype.has",!0),h=e("WeakMap.prototype.delete",!0);return WT=o?function(){var y,M,x={assert:function(T){if(!x.has(T))throw new r("Side channel does not contain "+t(T))},delete:function(T){if(o&&T&&(typeof T=="object"||typeof T=="function")){if(y)return h(y,T)}else if(i&&M)return M.delete(T);return!1},get:function(T){return o&&T&&(typeof T=="object"||typeof T=="function")&&y?s(y,T):M&&M.get(T)},has:function(T){return o&&T&&(typeof T=="object"||typeof T=="function")&&y?c(y,T):!!M&&M.has(T)},set:function(T,P){o&&T&&(typeof T=="object"||typeof T=="function")?(y||(y=new o),a(y,T,P)):i&&(M||(M=i()),M.set(T,P))}};return x}:i,WT}var QT,UH;function AUe(){if(UH)return QT;UH=1;var n=Zx(),e=V6(),t=FPe(),i=vae(),r=cUe(),o=r||i||t;return QT=function(){var a,c={assert:function(h){if(!c.has(h))throw new n("Side channel does not contain "+e(h))},delete:function(h){return!!a&&a.delete(h)},get:function(h){return a&&a.get(h)},has:function(h){return!!a&&a.has(h)},set:function(h,m){a||(a=o()),a.set(h,m)}};return c},QT}var qT,KH;function TL(){if(KH)return qT;KH=1;var n=String.prototype.replace,e=/%20/g,t={RFC1738:"RFC1738",RFC3986:"RFC3986"};return qT={default:t.RFC3986,formatters:{RFC1738:function(i){return n.call(i,e,"+")},RFC3986:function(i){return String(i)}},RFC1738:t.RFC1738,RFC3986:t.RFC3986},qT}var YT,LH;function bae(){if(LH)return YT;LH=1;var n=TL(),e=Object.prototype.hasOwnProperty,t=Array.isArray,i=(function(){for(var F=[],j=0;j<256;++j)F.push("%"+((j<16?"0":"")+j.toString(16)).toUpperCase());return F})(),r=function(j){for(;j.length>1;){var q=j.pop(),V=q.obj[q.prop];if(t(V)){for(var H=[],Q=0;Q<V.length;++Q)typeof V[Q]<"u"&&H.push(V[Q]);q.obj[q.prop]=H}}},o=function(j,q){for(var V=q&&q.plainObjects?{__proto__:null}:{},H=0;H<j.length;++H)typeof j[H]<"u"&&(V[H]=j[H]);return V},s=function F(j,q,V){if(!q)return j;if(typeof q!="object"&&typeof q!="function"){if(t(j))j.push(q);else if(j&&typeof j=="object")(V&&(V.plainObjects||V.allowPrototypes)||!e.call(Object.prototype,q))&&(j[q]=!0);else return[j,q];return j}if(!j||typeof j!="object")return[j].concat(q);var H=j;return t(j)&&!t(q)&&(H=o(j,V)),t(j)&&t(q)?(q.forEach(function(Q,Y){if(e.call(j,Y)){var z=j[Y];z&&typeof z=="object"&&Q&&typeof Q=="object"?j[Y]=F(z,Q,V):j.push(Q)}else j[Y]=Q}),j):Object.keys(q).reduce(function(Q,Y){var z=q[Y];return e.call(Q,Y)?Q[Y]=F(Q[Y],z,V):Q[Y]=z,Q},H)},a=function(j,q){return Object.keys(q).reduce(function(V,H){return V[H]=q[H],V},j)},c=function(F,j,q){var V=F.replace(/\+/g," ");if(q==="iso-8859-1")return V.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(V)}catch{return V}},h=1024,m=function(j,q,V,H,Q){if(j.length===0)return j;var Y=j;if(typeof j=="symbol"?Y=Symbol.prototype.toString.call(j):typeof j!="string"&&(Y=String(j)),V==="iso-8859-1")return escape(Y).replace(/%u[0-9a-f]{4}/gi,function(Ee){return"%26%23"+parseInt(Ee.slice(2),16)+"%3B"});for(var z="",se=0;se<Y.length;se+=h){for(var le=Y.length>=h?Y.slice(se,se+h):Y,pe=[],de=0;de<le.length;++de){var ve=le.charCodeAt(de);if(ve===45||ve===46||ve===95||ve===126||ve>=48&&ve<=57||ve>=65&&ve<=90||ve>=97&&ve<=122||Q===n.RFC1738&&(ve===40||ve===41)){pe[pe.length]=le.charAt(de);continue}if(ve<128){pe[pe.length]=i[ve];continue}if(ve<2048){pe[pe.length]=i[192|ve>>6]+i[128|ve&63];continue}if(ve<55296||ve>=57344){pe[pe.length]=i[224|ve>>12]+i[128|ve>>6&63]+i[128|ve&63];continue}de+=1,ve=65536+((ve&1023)<<10|le.charCodeAt(de)&1023),pe[pe.length]=i[240|ve>>18]+i[128|ve>>12&63]+i[128|ve>>6&63]+i[128|ve&63]}z+=pe.join("")}return z},y=function(j){for(var q=[{obj:{o:j},prop:"o"}],V=[],H=0;H<q.length;++H)for(var Q=q[H],Y=Q.obj[Q.prop],z=Object.keys(Y),se=0;se<z.length;++se){var le=z[se],pe=Y[le];typeof pe=="object"&&pe!==null&&V.indexOf(pe)===-1&&(q.push({obj:Y,prop:le}),V.push(pe))}return r(q),j},M=function(j){return Object.prototype.toString.call(j)==="[object RegExp]"},x=function(j){return!j||typeof j!="object"?!1:!!(j.constructor&&j.constructor.isBuffer&&j.constructor.isBuffer(j))},T=function(j,q){return[].concat(j,q)},P=function(j,q){if(t(j)){for(var V=[],H=0;H<j.length;H+=1)V.push(q(j[H]));return V}return q(j)};return YT={arrayToObject:o,assign:a,combine:T,compact:y,decode:c,encode:m,isBuffer:x,isRegExp:M,maybeMap:P,merge:s},YT}var $T,FH;function hUe(){if(FH)return $T;FH=1;var n=AUe(),e=bae(),t=TL(),i=Object.prototype.hasOwnProperty,r={brackets:function(F){return F+"[]"},comma:"comma",indices:function(F,j){return F+"["+j+"]"},repeat:function(F){return F}},o=Array.isArray,s=Array.prototype.push,a=function(P,F){s.apply(P,o(F)?F:[F])},c=Date.prototype.toISOString,h=t.default,m={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:e.encode,encodeValuesOnly:!1,filter:void 0,format:h,formatter:t.formatters[h],indices:!1,serializeDate:function(F){return c.call(F)},skipNulls:!1,strictNullHandling:!1},y=function(F){return typeof F=="string"||typeof F=="number"||typeof F=="boolean"||typeof F=="symbol"||typeof F=="bigint"},M={},x=function P(F,j,q,V,H,Q,Y,z,se,le,pe,de,ve,Ee,Re,je,Ie,qe){for(var tt=F,At=qe,ke=0,we=!1;(At=At.get(M))!==void 0&&!we;){var ze=At.get(F);if(ke+=1,typeof ze<"u"){if(ze===ke)throw new RangeError("Cyclic object value");we=!0}typeof At.get(M)>"u"&&(ke=0)}if(typeof le=="function"?tt=le(j,tt):tt instanceof Date?tt=ve(tt):q==="comma"&&o(tt)&&(tt=e.maybeMap(tt,function(Dt){return Dt instanceof Date?ve(Dt):Dt})),tt===null){if(Q)return se&&!je?se(j,m.encoder,Ie,"key",Ee):j;tt=""}if(y(tt)||e.isBuffer(tt)){if(se){var Me=je?j:se(j,m.encoder,Ie,"key",Ee);return[Re(Me)+"="+Re(se(tt,m.encoder,Ie,"value",Ee))]}return[Re(j)+"="+Re(String(tt))]}var lt=[];if(typeof tt>"u")return lt;var nt;if(q==="comma"&&o(tt))je&&se&&(tt=e.maybeMap(tt,se)),nt=[{value:tt.length>0?tt.join(",")||null:void 0}];else if(o(le))nt=le;else{var bt=Object.keys(tt);nt=pe?bt.sort(pe):bt}var Bt=z?String(j).replace(/\./g,"%2E"):String(j),Ke=V&&o(tt)&&tt.length===1?Bt+"[]":Bt;if(H&&o(tt)&&tt.length===0)return Ke+"[]";for(var Te=0;Te<nt.length;++Te){var Se=nt[Te],We=typeof Se=="object"&&Se&&typeof Se.value<"u"?Se.value:tt[Se];if(!(Y&&We===null)){var at=de&&z?String(Se).replace(/\./g,"%2E"):String(Se),it=o(tt)?typeof q=="function"?q(Ke,at):Ke:Ke+(de?"."+at:"["+at+"]");qe.set(F,ke);var ft=n();ft.set(M,qe),a(lt,P(We,it,q,V,H,Q,Y,z,q==="comma"&&je&&o(tt)?null:se,le,pe,de,ve,Ee,Re,je,Ie,ft))}}return lt},T=function(F){if(!F)return m;if(typeof F.allowEmptyArrays<"u"&&typeof F.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof F.encodeDotInKeys<"u"&&typeof F.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(F.encoder!==null&&typeof F.encoder<"u"&&typeof F.encoder!="function")throw new TypeError("Encoder has to be a function.");var j=F.charset||m.charset;if(typeof F.charset<"u"&&F.charset!=="utf-8"&&F.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var q=t.default;if(typeof F.format<"u"){if(!i.call(t.formatters,F.format))throw new TypeError("Unknown format option provided.");q=F.format}var V=t.formatters[q],H=m.filter;(typeof F.filter=="function"||o(F.filter))&&(H=F.filter);var Q;if(F.arrayFormat in r?Q=F.arrayFormat:"indices"in F?Q=F.indices?"indices":"repeat":Q=m.arrayFormat,"commaRoundTrip"in F&&typeof F.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var Y=typeof F.allowDots>"u"?F.encodeDotInKeys===!0?!0:m.allowDots:!!F.allowDots;return{addQueryPrefix:typeof F.addQueryPrefix=="boolean"?F.addQueryPrefix:m.addQueryPrefix,allowDots:Y,allowEmptyArrays:typeof F.allowEmptyArrays=="boolean"?!!F.allowEmptyArrays:m.allowEmptyArrays,arrayFormat:Q,charset:j,charsetSentinel:typeof F.charsetSentinel=="boolean"?F.charsetSentinel:m.charsetSentinel,commaRoundTrip:!!F.commaRoundTrip,delimiter:typeof F.delimiter>"u"?m.delimiter:F.delimiter,encode:typeof F.encode=="boolean"?F.encode:m.encode,encodeDotInKeys:typeof F.encodeDotInKeys=="boolean"?F.encodeDotInKeys:m.encodeDotInKeys,encoder:typeof F.encoder=="function"?F.encoder:m.encoder,encodeValuesOnly:typeof F.encodeValuesOnly=="boolean"?F.encodeValuesOnly:m.encodeValuesOnly,filter:H,format:q,formatter:V,serializeDate:typeof F.serializeDate=="function"?F.serializeDate:m.serializeDate,skipNulls:typeof F.skipNulls=="boolean"?F.skipNulls:m.skipNulls,sort:typeof F.sort=="function"?F.sort:null,strictNullHandling:typeof F.strictNullHandling=="boolean"?F.strictNullHandling:m.strictNullHandling}};return $T=function(P,F){var j=P,q=T(F),V,H;typeof q.filter=="function"?(H=q.filter,j=H("",j)):o(q.filter)&&(H=q.filter,V=H);var Q=[];if(typeof j!="object"||j===null)return"";var Y=r[q.arrayFormat],z=Y==="comma"&&q.commaRoundTrip;V||(V=Object.keys(j)),q.sort&&V.sort(q.sort);for(var se=n(),le=0;le<V.length;++le){var pe=V[le],de=j[pe];q.skipNulls&&de===null||a(Q,x(de,pe,Y,z,q.allowEmptyArrays,q.strictNullHandling,q.skipNulls,q.encodeDotInKeys,q.encode?q.encoder:null,q.filter,q.sort,q.allowDots,q.serializeDate,q.format,q.formatter,q.encodeValuesOnly,q.charset,se))}var ve=Q.join(q.delimiter),Ee=q.addQueryPrefix===!0?"?":"";return q.charsetSentinel&&(q.charset==="iso-8859-1"?Ee+="utf8=%26%2310003%3B&":Ee+="utf8=%E2%9C%93&"),ve.length>0?Ee+ve:""},$T}var VT,zH;function dUe(){if(zH)return VT;zH=1;var n=bae(),e=Object.prototype.hasOwnProperty,t=Array.isArray,i={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:n.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1,throwOnLimitExceeded:!1},r=function(M){return M.replace(/&#(\d+);/g,function(x,T){return String.fromCharCode(parseInt(T,10))})},o=function(M,x,T){if(M&&typeof M=="string"&&x.comma&&M.indexOf(",")>-1)return M.split(",");if(x.throwOnLimitExceeded&&T>=x.arrayLimit)throw new RangeError("Array limit exceeded. Only "+x.arrayLimit+" element"+(x.arrayLimit===1?"":"s")+" allowed in an array.");return M},s="utf8=%26%2310003%3B",a="utf8=%E2%9C%93",c=function(x,T){var P={__proto__:null},F=T.ignoreQueryPrefix?x.replace(/^\?/,""):x;F=F.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var j=T.parameterLimit===1/0?void 0:T.parameterLimit,q=F.split(T.delimiter,T.throwOnLimitExceeded?j+1:j);if(T.throwOnLimitExceeded&&q.length>j)throw new RangeError("Parameter limit exceeded. Only "+j+" parameter"+(j===1?"":"s")+" allowed.");var V=-1,H,Q=T.charset;if(T.charsetSentinel)for(H=0;H<q.length;++H)q[H].indexOf("utf8=")===0&&(q[H]===a?Q="utf-8":q[H]===s&&(Q="iso-8859-1"),V=H,H=q.length);for(H=0;H<q.length;++H)if(H!==V){var Y=q[H],z=Y.indexOf("]="),se=z===-1?Y.indexOf("="):z+1,le,pe;se===-1?(le=T.decoder(Y,i.decoder,Q,"key"),pe=T.strictNullHandling?null:""):(le=T.decoder(Y.slice(0,se),i.decoder,Q,"key"),pe=n.maybeMap(o(Y.slice(se+1),T,t(P[le])?P[le].length:0),function(ve){return T.decoder(ve,i.decoder,Q,"value")})),pe&&T.interpretNumericEntities&&Q==="iso-8859-1"&&(pe=r(String(pe))),Y.indexOf("[]=")>-1&&(pe=t(pe)?[pe]:pe);var de=e.call(P,le);de&&T.duplicates==="combine"?P[le]=n.combine(P[le],pe):(!de||T.duplicates==="last")&&(P[le]=pe)}return P},h=function(M,x,T,P){var F=0;if(M.length>0&&M[M.length-1]==="[]"){var j=M.slice(0,-1).join("");F=Array.isArray(x)&&x[j]?x[j].length:0}for(var q=P?x:o(x,T,F),V=M.length-1;V>=0;--V){var H,Q=M[V];if(Q==="[]"&&T.parseArrays)H=T.allowEmptyArrays&&(q===""||T.strictNullHandling&&q===null)?[]:n.combine([],q);else{H=T.plainObjects?{__proto__:null}:{};var Y=Q.charAt(0)==="["&&Q.charAt(Q.length-1)==="]"?Q.slice(1,-1):Q,z=T.decodeDotInKeys?Y.replace(/%2E/g,"."):Y,se=parseInt(z,10);!T.parseArrays&&z===""?H={0:q}:!isNaN(se)&&Q!==z&&String(se)===z&&se>=0&&T.parseArrays&&se<=T.arrayLimit?(H=[],H[se]=q):z!=="__proto__"&&(H[z]=q)}q=H}return q},m=function(x,T,P,F){if(x){var j=P.allowDots?x.replace(/\.([^.[]+)/g,"[$1]"):x,q=/(\[[^[\]]*])/,V=/(\[[^[\]]*])/g,H=P.depth>0&&q.exec(j),Q=H?j.slice(0,H.index):j,Y=[];if(Q){if(!P.plainObjects&&e.call(Object.prototype,Q)&&!P.allowPrototypes)return;Y.push(Q)}for(var z=0;P.depth>0&&(H=V.exec(j))!==null&&z<P.depth;){if(z+=1,!P.plainObjects&&e.call(Object.prototype,H[1].slice(1,-1))&&!P.allowPrototypes)return;Y.push(H[1])}if(H){if(P.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+P.depth+" and strictDepth is true");Y.push("["+j.slice(H.index)+"]")}return h(Y,T,P,F)}},y=function(x){if(!x)return i;if(typeof x.allowEmptyArrays<"u"&&typeof x.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof x.decodeDotInKeys<"u"&&typeof x.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(x.decoder!==null&&typeof x.decoder<"u"&&typeof x.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof x.charset<"u"&&x.charset!=="utf-8"&&x.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if(typeof x.throwOnLimitExceeded<"u"&&typeof x.throwOnLimitExceeded!="boolean")throw new TypeError("`throwOnLimitExceeded` option must be a boolean");var T=typeof x.charset>"u"?i.charset:x.charset,P=typeof x.duplicates>"u"?i.duplicates:x.duplicates;if(P!=="combine"&&P!=="first"&&P!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var F=typeof x.allowDots>"u"?x.decodeDotInKeys===!0?!0:i.allowDots:!!x.allowDots;return{allowDots:F,allowEmptyArrays:typeof x.allowEmptyArrays=="boolean"?!!x.allowEmptyArrays:i.allowEmptyArrays,allowPrototypes:typeof x.allowPrototypes=="boolean"?x.allowPrototypes:i.allowPrototypes,allowSparse:typeof x.allowSparse=="boolean"?x.allowSparse:i.allowSparse,arrayLimit:typeof x.arrayLimit=="number"?x.arrayLimit:i.arrayLimit,charset:T,charsetSentinel:typeof x.charsetSentinel=="boolean"?x.charsetSentinel:i.charsetSentinel,comma:typeof x.comma=="boolean"?x.comma:i.comma,decodeDotInKeys:typeof x.decodeDotInKeys=="boolean"?x.decodeDotInKeys:i.decodeDotInKeys,decoder:typeof x.decoder=="function"?x.decoder:i.decoder,delimiter:typeof x.delimiter=="string"||n.isRegExp(x.delimiter)?x.delimiter:i.delimiter,depth:typeof x.depth=="number"||x.depth===!1?+x.depth:i.depth,duplicates:P,ignoreQueryPrefix:x.ignoreQueryPrefix===!0,interpretNumericEntities:typeof x.interpretNumericEntities=="boolean"?x.interpretNumericEntities:i.interpretNumericEntities,parameterLimit:typeof x.parameterLimit=="number"?x.parameterLimit:i.parameterLimit,parseArrays:x.parseArrays!==!1,plainObjects:typeof x.plainObjects=="boolean"?x.plainObjects:i.plainObjects,strictDepth:typeof x.strictDepth=="boolean"?!!x.strictDepth:i.strictDepth,strictNullHandling:typeof x.strictNullHandling=="boolean"?x.strictNullHandling:i.strictNullHandling,throwOnLimitExceeded:typeof x.throwOnLimitExceeded=="boolean"?x.throwOnLimitExceeded:!1}};return VT=function(M,x){var T=y(x);if(M===""||M===null||typeof M>"u")return T.plainObjects?{__proto__:null}:{};for(var P=typeof M=="string"?c(M,T):M,F=T.plainObjects?{__proto__:null}:{},j=Object.keys(P),q=0;q<j.length;++q){var V=j[q],H=m(V,P[V],T,typeof M=="string");F=n.merge(F,H,T)}return T.allowSparse===!0?F:n.compact(F)},VT}var HT,jH;function fUe(){if(jH)return HT;jH=1;var n=hUe(),e=dUe(),t=TL();return HT={formats:t,parse:e,stringify:n},HT}var NH;function pUe(){if(NH)return ib;NH=1;var n=PPe();function e(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var t=/^([a-z0-9.+-]+:)/i,i=/:[0-9]*$/,r=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,o=["<",">",'"',"`"," ","\r",`
`,"	"],s=["{","}","|","\\","^","`"].concat(o),a=["'"].concat(s),c=["%","/","?",";","#"].concat(a),h=["/","?","#"],m=255,y=/^[+a-z0-9A-Z_-]{0,63}$/,M=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,x={javascript:!0,"javascript:":!0},T={javascript:!0,"javascript:":!0},P={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},F=fUe();function j(Q,Y,z){if(Q&&typeof Q=="object"&&Q instanceof e)return Q;var se=new e;return se.parse(Q,Y,z),se}e.prototype.parse=function(Q,Y,z){if(typeof Q!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof Q);var se=Q.indexOf("?"),le=se!==-1&&se<Q.indexOf("#")?"?":"#",pe=Q.split(le),de=/\\/g;pe[0]=pe[0].replace(de,"/"),Q=pe.join(le);var ve=Q;if(ve=ve.trim(),!z&&Q.split("#").length===1){var Ee=r.exec(ve);if(Ee)return this.path=ve,this.href=ve,this.pathname=Ee[1],Ee[2]?(this.search=Ee[2],Y?this.query=F.parse(this.search.substr(1)):this.query=this.search.substr(1)):Y&&(this.search="",this.query={}),this}var Re=t.exec(ve);if(Re){Re=Re[0];var je=Re.toLowerCase();this.protocol=je,ve=ve.substr(Re.length)}if(z||Re||ve.match(/^\/\/[^@/]+@[^@/]+/)){var Ie=ve.substr(0,2)==="//";Ie&&!(Re&&T[Re])&&(ve=ve.substr(2),this.slashes=!0)}if(!T[Re]&&(Ie||Re&&!P[Re])){for(var qe=-1,tt=0;tt<h.length;tt++){var At=ve.indexOf(h[tt]);At!==-1&&(qe===-1||At<qe)&&(qe=At)}var ke,we;qe===-1?we=ve.lastIndexOf("@"):we=ve.lastIndexOf("@",qe),we!==-1&&(ke=ve.slice(0,we),ve=ve.slice(we+1),this.auth=decodeURIComponent(ke)),qe=-1;for(var tt=0;tt<c.length;tt++){var At=ve.indexOf(c[tt]);At!==-1&&(qe===-1||At<qe)&&(qe=At)}qe===-1&&(qe=ve.length),this.host=ve.slice(0,qe),ve=ve.slice(qe),this.parseHost(),this.hostname=this.hostname||"";var ze=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!ze)for(var Me=this.hostname.split(/\./),tt=0,lt=Me.length;tt<lt;tt++){var nt=Me[tt];if(nt&&!nt.match(y)){for(var bt="",Bt=0,Ke=nt.length;Bt<Ke;Bt++)nt.charCodeAt(Bt)>127?bt+="x":bt+=nt[Bt];if(!bt.match(y)){var Te=Me.slice(0,tt),Se=Me.slice(tt+1),We=nt.match(M);We&&(Te.push(We[1]),Se.unshift(We[2])),Se.length&&(ve="/"+Se.join(".")+ve),this.hostname=Te.join(".");break}}}this.hostname.length>m?this.hostname="":this.hostname=this.hostname.toLowerCase(),ze||(this.hostname=n.toASCII(this.hostname));var at=this.port?":"+this.port:"",it=this.hostname||"";this.host=it+at,this.href+=this.host,ze&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),ve[0]!=="/"&&(ve="/"+ve))}if(!x[je])for(var tt=0,lt=a.length;tt<lt;tt++){var ft=a[tt];if(ve.indexOf(ft)!==-1){var Dt=encodeURIComponent(ft);Dt===ft&&(Dt=escape(ft)),ve=ve.split(ft).join(Dt)}}var Ot=ve.indexOf("#");Ot!==-1&&(this.hash=ve.substr(Ot),ve=ve.slice(0,Ot));var Jt=ve.indexOf("?");if(Jt!==-1?(this.search=ve.substr(Jt),this.query=ve.substr(Jt+1),Y&&(this.query=F.parse(this.query)),ve=ve.slice(0,Jt)):Y&&(this.search="",this.query={}),ve&&(this.pathname=ve),P[je]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var at=this.pathname||"",Dn=this.search||"";this.path=at+Dn}return this.href=this.format(),this};function q(Q){return typeof Q=="string"&&(Q=j(Q)),Q instanceof e?Q.format():e.prototype.format.call(Q)}e.prototype.format=function(){var Q=this.auth||"";Q&&(Q=encodeURIComponent(Q),Q=Q.replace(/%3A/i,":"),Q+="@");var Y=this.protocol||"",z=this.pathname||"",se=this.hash||"",le=!1,pe="";this.host?le=Q+this.host:this.hostname&&(le=Q+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(le+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(pe=F.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var de=this.search||pe&&"?"+pe||"";return Y&&Y.substr(-1)!==":"&&(Y+=":"),this.slashes||(!Y||P[Y])&&le!==!1?(le="//"+(le||""),z&&z.charAt(0)!=="/"&&(z="/"+z)):le||(le=""),se&&se.charAt(0)!=="#"&&(se="#"+se),de&&de.charAt(0)!=="?"&&(de="?"+de),z=z.replace(/[?#]/g,function(ve){return encodeURIComponent(ve)}),de=de.replace("#","%23"),Y+le+z+de+se};function V(Q,Y){return j(Q,!1,!0).resolve(Y)}e.prototype.resolve=function(Q){return this.resolveObject(j(Q,!1,!0)).format()};function H(Q,Y){return Q?j(Q,!1,!0).resolveObject(Y):Y}return e.prototype.resolveObject=function(Q){if(typeof Q=="string"){var Y=new e;Y.parse(Q,!1,!0),Q=Y}for(var z=new e,se=Object.keys(this),le=0;le<se.length;le++){var pe=se[le];z[pe]=this[pe]}if(z.hash=Q.hash,Q.href==="")return z.href=z.format(),z;if(Q.slashes&&!Q.protocol){for(var de=Object.keys(Q),ve=0;ve<de.length;ve++){var Ee=de[ve];Ee!=="protocol"&&(z[Ee]=Q[Ee])}return P[z.protocol]&&z.hostname&&!z.pathname&&(z.pathname="/",z.path=z.pathname),z.href=z.format(),z}if(Q.protocol&&Q.protocol!==z.protocol){if(!P[Q.protocol]){for(var Re=Object.keys(Q),je=0;je<Re.length;je++){var Ie=Re[je];z[Ie]=Q[Ie]}return z.href=z.format(),z}if(z.protocol=Q.protocol,!Q.host&&!T[Q.protocol]){for(var lt=(Q.pathname||"").split("/");lt.length&&!(Q.host=lt.shift()););Q.host||(Q.host=""),Q.hostname||(Q.hostname=""),lt[0]!==""&&lt.unshift(""),lt.length<2&&lt.unshift(""),z.pathname=lt.join("/")}else z.pathname=Q.pathname;if(z.search=Q.search,z.query=Q.query,z.host=Q.host||"",z.auth=Q.auth,z.hostname=Q.hostname||Q.host,z.port=Q.port,z.pathname||z.search){var qe=z.pathname||"",tt=z.search||"";z.path=qe+tt}return z.slashes=z.slashes||Q.slashes,z.href=z.format(),z}var At=z.pathname&&z.pathname.charAt(0)==="/",ke=Q.host||Q.pathname&&Q.pathname.charAt(0)==="/",we=ke||At||z.host&&Q.pathname,ze=we,Me=z.pathname&&z.pathname.split("/")||[],lt=Q.pathname&&Q.pathname.split("/")||[],nt=z.protocol&&!P[z.protocol];if(nt&&(z.hostname="",z.port=null,z.host&&(Me[0]===""?Me[0]=z.host:Me.unshift(z.host)),z.host="",Q.protocol&&(Q.hostname=null,Q.port=null,Q.host&&(lt[0]===""?lt[0]=Q.host:lt.unshift(Q.host)),Q.host=null),we=we&&(lt[0]===""||Me[0]==="")),ke)z.host=Q.host||Q.host===""?Q.host:z.host,z.hostname=Q.hostname||Q.hostname===""?Q.hostname:z.hostname,z.search=Q.search,z.query=Q.query,Me=lt;else if(lt.length)Me||(Me=[]),Me.pop(),Me=Me.concat(lt),z.search=Q.search,z.query=Q.query;else if(Q.search!=null){if(nt){z.host=Me.shift(),z.hostname=z.host;var bt=z.host&&z.host.indexOf("@")>0?z.host.split("@"):!1;bt&&(z.auth=bt.shift(),z.hostname=bt.shift(),z.host=z.hostname)}return z.search=Q.search,z.query=Q.query,(z.pathname!==null||z.search!==null)&&(z.path=(z.pathname?z.pathname:"")+(z.search?z.search:"")),z.href=z.format(),z}if(!Me.length)return z.pathname=null,z.search?z.path="/"+z.search:z.path=null,z.href=z.format(),z;for(var Bt=Me.slice(-1)[0],Ke=(z.host||Q.host||Me.length>1)&&(Bt==="."||Bt==="..")||Bt==="",Te=0,Se=Me.length;Se>=0;Se--)Bt=Me[Se],Bt==="."?Me.splice(Se,1):Bt===".."?(Me.splice(Se,1),Te++):Te&&(Me.splice(Se,1),Te--);if(!we&&!ze)for(;Te--;Te)Me.unshift("..");we&&Me[0]!==""&&(!Me[0]||Me[0].charAt(0)!=="/")&&Me.unshift(""),Ke&&Me.join("/").substr(-1)!=="/"&&Me.push("");var We=Me[0]===""||Me[0]&&Me[0].charAt(0)==="/";if(nt){z.hostname=We?"":Me.length?Me.shift():"",z.host=z.hostname;var bt=z.host&&z.host.indexOf("@")>0?z.host.split("@"):!1;bt&&(z.auth=bt.shift(),z.hostname=bt.shift(),z.host=z.hostname)}return we=we||z.host&&Me.length,we&&!We&&Me.unshift(""),Me.length>0?z.pathname=Me.join("/"):(z.pathname=null,z.path=null),(z.pathname!==null||z.search!==null)&&(z.path=(z.pathname?z.pathname:"")+(z.search?z.search:"")),z.auth=Q.auth||z.auth,z.slashes=z.slashes||Q.slashes,z.href=z.format(),z},e.prototype.parseHost=function(){var Q=this.host,Y=i.exec(Q);Y&&(Y=Y[0],Y!==":"&&(this.port=Y.substr(1)),Q=Q.substr(0,Q.length-Y.length)),Q&&(this.hostname=Q)},ib.parse=j,ib.resolve=V,ib.resolveObject=H,ib.format=q,ib.Url=e,ib}var mUe=pUe();const GH=eu(mUe);function Oo(){var n="/home/runner/work/maputnik/maputnik/src/libs/metadata.ts",e="370277aff056c0894d7ae34686219318414cc635",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/metadata.ts",statementMap:{0:{start:{line:3,column:2},end:{line:16,column:5}},1:{start:{line:7,column:4},end:{line:9,column:5}},2:{start:{line:8,column:6},end:{line:8,column:60}},3:{start:{line:10,column:4},end:{line:10,column:27}},4:{start:{line:12,column:4},end:{line:12,column:13}},5:{start:{line:14,column:4},end:{line:14,column:95}},6:{start:{line:15,column:4},end:{line:15,column:21}},7:{start:{line:19,column:2},end:{line:19,column:34}},8:{start:{line:19,column:20},end:{line:19,column:34}},9:{start:{line:20,column:17},end:{line:20,column:42}},10:{start:{line:21,column:23},end:{line:21,column:57}},11:{start:{line:22,column:2},end:{line:26,column:3}},12:{start:{line:23,column:4},end:{line:23,column:41}},13:{start:{line:25,column:4},end:{line:25,column:69}},14:{start:{line:27,column:14},end:{line:27,column:35}},15:{start:{line:28,column:2},end:{line:28,column:24}},16:{start:{line:31,column:2},end:{line:31,column:30}},17:{start:{line:31,column:16},end:{line:31,column:30}},18:{start:{line:32,column:14},end:{line:32,column:31}},19:{start:{line:33,column:2},end:{line:33,column:57}},20:{start:{line:33,column:32},end:{line:33,column:55}}},fnMap:{0:{name:"loadJSON",decl:{start:{line:2,column:9},end:{line:2,column:17}},loc:{start:{line:2,column:41},end:{line:17,column:1}},line:2},1:{name:"(anonymous_1)",decl:{start:{line:6,column:10},end:{line:6,column:11}},loc:{start:{line:6,column:24},end:{line:11,column:3}},line:6},2:{name:"(anonymous_2)",decl:{start:{line:11,column:10},end:{line:11,column:11}},loc:{start:{line:11,column:20},end:{line:13,column:3}},line:11},3:{name:"(anonymous_3)",decl:{start:{line:13,column:11},end:{line:13,column:12}},loc:{start:{line:13,column:17},end:{line:16,column:3}},line:13},4:{name:"downloadGlyphsMetadata",decl:{start:{line:18,column:16},end:{line:18,column:38}},loc:{start:{line:18,column:56},end:{line:29,column:1}},line:18},5:{name:"downloadSpriteMetadata",decl:{start:{line:30,column:16},end:{line:30,column:38}},loc:{start:{line:30,column:52},end:{line:34,column:1}},line:30},6:{name:"(anonymous_6)",decl:{start:{line:33,column:20},end:{line:33,column:21}},loc:{start:{line:33,column:32},end:{line:33,column:55}},line:33}},branchMap:{0:{loc:{start:{line:7,column:4},end:{line:9,column:5}},type:"if",locations:[{start:{line:7,column:4},end:{line:9,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:7},1:{loc:{start:{line:19,column:2},end:{line:19,column:34}},type:"if",locations:[{start:{line:19,column:2},end:{line:19,column:34}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:19},2:{loc:{start:{line:22,column:2},end:{line:26,column:3}},type:"if",locations:[{start:{line:22,column:2},end:{line:26,column:3}},{start:{line:24,column:9},end:{line:26,column:3}}],line:22},3:{loc:{start:{line:31,column:2},end:{line:31,column:30}},type:"if",locations:[{start:{line:31,column:2},end:{line:31,column:30}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:31}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/metadata.ts"],names:[],mappings:"AAAA,OAAO,YAAY;AAEnB,SAAS,SAAS,KAAa,cAAmB,IAA8B;AAC9E,QAAM,KAAK;AAAA,IACT,MAAM;AAAA,IACN,aAAa;AAAA,EACf,CAAC,EACE,KAAK,CAAC,aAAa;AAClB,QAAI,CAAC,SAAS,IAAI;AAChB,YAAM,IAAI,MAAM,iCAAiC,GAAG;AAAA,IACtD;AACA,WAAO,SAAS,KAAK;AAAA,EACvB,CAAC,EACA,KAAK,CAAC,SAAS;AACd,OAAG,IAAI;AAAA,EACT,CAAC,EACA,MAAM,MAAM;AACX,YAAQ,KAAK,+BAA+B,MAAM,2BAA2B,YAAY;AACzF,OAAG,YAAY;AAAA,EACjB,CAAC;AACL;AAEO,gBAAS,uBAAuB,aAAqB,IAA8B;AACxF,MAAG,CAAC,YAAa,QAAO,GAAG,CAAC,CAAC;AAI7B,QAAM,SAAS,OAAO,MAAM,WAAW;AACvC,QAAM,eAAe;AACrB,MAAG,OAAO,aAAa,cAAc;AACnC,WAAO,WAAW;AAAA,EACpB,OAAO;AACL,WAAO,WAAW,OAAO,SAAU,QAAQ,cAAc,OAAO;AAAA,EAClE;AACA,QAAM,MAAM,OAAO,OAAO,MAAM;AAEhC,WAAS,KAAK,CAAC,GAAG,EAAE;AACtB;AAEO,gBAAS,uBAAuB,SAAiB,IAA8B;AACpF,MAAG,CAAC,QAAS,QAAO,GAAG,CAAC,CAAC;AACzB,QAAM,MAAM,UAAU;AACtB,WAAS,KAAK,CAAC,GAAG,YAAU,GAAG,OAAO,KAAK,MAAM,CAAC,CAAC;AACrD;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"370277aff056c0894d7ae34686219318414cc635"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Oo=function(){return s},s}Oo();function Cae(n,e,t){Oo().f[0]++,Oo().s[0]++,fetch(n,{mode:"cors",credentials:"same-origin"}).then(i=>{if(Oo().f[1]++,Oo().s[1]++,i.ok)Oo().b[0][1]++;else throw Oo().b[0][0]++,Oo().s[2]++,new Error("Failed to load metadata for "+n);return Oo().s[3]++,i.json()}).then(i=>{Oo().f[2]++,Oo().s[4]++,t(i)}).catch(()=>{Oo().f[3]++,Oo().s[5]++,console.warn("Can not load metadata for "+n+", using default value "+e),Oo().s[6]++,t(e)})}function gUe(n,e){if(Oo().f[4]++,Oo().s[7]++,n)Oo().b[1][1]++;else return Oo().b[1][0]++,Oo().s[8]++,e([]);const t=(Oo().s[9]++,GH.parse(n)),i=(Oo().s[10]++,"/%7Bfontstack%7D/%7Brange%7D.pbf");Oo().s[11]++,t.pathname===i?(Oo().b[2][0]++,Oo().s[12]++,t.pathname="/fontstacks.json"):(Oo().b[2][1]++,Oo().s[13]++,t.pathname=t.pathname.replace(i,".json"));const r=(Oo().s[14]++,GH.format(t));Oo().s[15]++,Cae(r,[],e)}function yUe(n,e){if(Oo().f[5]++,Oo().s[16]++,n)Oo().b[3][1]++;else return Oo().b[3][0]++,Oo().s[17]++,e([]);const t=(Oo().s[18]++,n+".json");Oo().s[19]++,Cae(t,{},i=>(Oo().f[6]++,Oo().s[20]++,e(Object.keys(i))))}function Bh(){var n="/home/runner/work/maputnik/maputnik/src/libs/diffmessage.ts",e="f92fa2abb31199d99fd3ae02d967dc6702faf862",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/diffmessage.ts",statementMap:{0:{start:{line:3,column:18},end:{line:3,column:47}},1:{start:{line:4,column:2},end:{line:4,column:70}},2:{start:{line:4,column:30},end:{line:4,column:68}},3:{start:{line:7,column:2},end:{line:7,column:71}},4:{start:{line:7,column:58},end:{line:7,column:69}},5:{start:{line:10,column:2},end:{line:10,column:71}},6:{start:{line:10,column:58},end:{line:10,column:69}}},fnMap:{0:{name:"diffMessages",decl:{start:{line:2,column:9},end:{line:2,column:21}},loc:{start:{line:2,column:47},end:{line:5,column:1}},line:2},1:{name:"(anonymous_1)",decl:{start:{line:4,column:21},end:{line:4,column:22}},loc:{start:{line:4,column:30},end:{line:4,column:68}},line:4},2:{name:"undoMessages",decl:{start:{line:6,column:16},end:{line:6,column:28}},loc:{start:{line:6,column:54},end:{line:8,column:1}},line:6},3:{name:"(anonymous_3)",decl:{start:{line:7,column:51},end:{line:7,column:52}},loc:{start:{line:7,column:58},end:{line:7,column:69}},line:7},4:{name:"redoMessages",decl:{start:{line:9,column:16},end:{line:9,column:28}},loc:{start:{line:9,column:54},end:{line:11,column:1}},line:9},5:{name:"(anonymous_5)",decl:{start:{line:10,column:51},end:{line:10,column:52}},loc:{start:{line:10,column:58},end:{line:10,column:69}},line:10}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/diffmessage.ts"],names:[],mappings:"AAAA,SAAQ,YAAW;AAGnB,SAAS,aAAa,aAAiC,YAAgC;AACrF,QAAM,UAAU,KAAK,aAAa,UAAU;AAC5C,SAAO,QAAQ,IAAI,SAAO,IAAI,UAAU,MAAM,IAAI,KAAK,KAAK,GAAG,CAAC;AAClE;AAEO,gBAAS,aAAa,aAAiC,YAAgC;AAC5F,SAAO,aAAa,aAAa,UAAU,EAAE,IAAI,OAAK,UAAU,CAAC;AACnE;AACO,gBAAS,aAAa,aAAiC,YAAgC;AAC5F,SAAO,aAAa,aAAa,UAAU,EAAE,IAAI,OAAK,UAAU,CAAC;AACnE;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f92fa2abb31199d99fd3ae02d967dc6702faf862"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Bh=function(){return s},s}Bh();function _ae(n,e){Bh().f[0]++;const t=(Bh().s[0]++,Zce(n,e));return Bh().s[1]++,t.map(i=>(Bh().f[1]++,Bh().s[2]++,i.command+" "+i.args.join(" ")))}function vUe(n,e){return Bh().f[2]++,Bh().s[3]++,_ae(n,e).map(t=>(Bh().f[3]++,Bh().s[4]++,"Undo "+t))}function bUe(n,e){return Bh().f[4]++,Bh().s[5]++,_ae(n,e).map(t=>(Bh().f[5]++,Bh().s[6]++,"Redo "+t))}function xc(){var n="/home/runner/work/maputnik/maputnik/src/libs/urlopen.ts",e="d72dae9738057e855ea98626011f8090b99877cc",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/urlopen.ts",statementMap:{0:{start:{line:3,column:21},end:{line:3,column:50}},1:{start:{line:4,column:19},end:{line:4,column:55}},2:{start:{line:5,column:2},end:{line:8,column:3}},3:{start:{line:6,column:4},end:{line:6,column:44}},4:{start:{line:7,column:4},end:{line:7,column:75}},5:{start:{line:9,column:2},end:{line:9,column:18}},6:{start:{line:12,column:2},end:{line:12,column:41}},7:{start:{line:13,column:2},end:{line:23,column:3}},8:{start:{line:14,column:21},end:{line:17,column:6}},9:{start:{line:18,column:17},end:{line:18,column:38}},10:{start:{line:19,column:4},end:{line:19,column:43}},11:{start:{line:21,column:4},end:{line:21,column:63}},12:{start:{line:22,column:4},end:{line:22,column:28}}},fnMap:{0:{name:"getStyleUrlFromAddressbarAndRemoveItIfNeeded",decl:{start:{line:2,column:16},end:{line:2,column:60}},loc:{start:{line:2,column:63},end:{line:10,column:1}},line:2},1:{name:"loadStyleUrl",decl:{start:{line:11,column:22},end:{line:11,column:34}},loc:{start:{line:11,column:45},end:{line:24,column:1}},line:11}},branchMap:{0:{loc:{start:{line:5,column:2},end:{line:8,column:3}},type:"if",locations:[{start:{line:5,column:2},end:{line:8,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:5}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0},f:{0:0,1:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/urlopen.ts"],names:[],mappings:"AAAA,OAAO,WAAW;AAGX,gBAAS,+CAA8D;AAC5E,QAAM,aAAa,IAAI,IAAI,OAAO,SAAS,IAAI;AAC/C,QAAM,WAAW,WAAW,aAAa,IAAI,OAAO;AACpD,MAAI,UAAU;AACZ,eAAW,aAAa,OAAO,OAAO;AACtC,WAAO,QAAQ,aAAa,CAAC,GAAG,SAAS,OAAO,WAAW,SAAS,CAAC;AAAA,EACvE;AACA,SAAO;AACT;AAEA,sBAAsB,aAAa,UAAqD;AACtF,UAAQ,IAAI,iBAAiB,QAAQ;AACrC,MAAI;AACF,UAAM,WAAW,MAAM,MAAM,UAAU;AAAA,MACrC,MAAM;AAAA,MACN,aAAa;AAAA,IACf,CAAC;AACD,UAAM,OAAO,MAAM,SAAS,KAAK;AACjC,WAAO,MAAM,oBAAoB,IAAI;AAAA,EACvC,QAAQ;AACN,YAAQ,KAAK,oCAAoC,QAAQ;AACzD,WAAO,MAAM;AAAA,EACf;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d72dae9738057e855ea98626011f8090b99877cc"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return xc=function(){return s},s}xc();function CUe(){xc().f[0]++;const n=(xc().s[0]++,new URL(window.location.href)),e=(xc().s[1]++,n.searchParams.get("style"));return xc().s[2]++,e?(xc().b[0][0]++,xc().s[3]++,n.searchParams.delete("style"),xc().s[4]++,window.history.replaceState({},document.title,n.toString())):xc().b[0][1]++,xc().s[5]++,e}async function xae(n){xc().f[1]++,xc().s[6]++,console.log("Loading style",n),xc().s[7]++;try{const e=(xc().s[8]++,await fetch(n,{mode:"cors",credentials:"same-origin"})),t=(xc().s[9]++,await e.json());return xc().s[10]++,Ed.ensureStyleValidity(t)}catch{return xc().s[11]++,console.warn("Could not fetch default style: "+n),xc().s[12]++,Ed.emptyStyle}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var LD=function(n,e){return LD=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var r in i)i.hasOwnProperty(r)&&(t[r]=i[r])},LD(n,e)};function Mae(n,e){LD(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function _Ue(n){var e=typeof Symbol=="function"&&n[Symbol.iterator],t=0;return e?e.call(n):{next:function(){return n&&t>=n.length&&(n=void 0),{value:n&&n[t++],done:!n}}}}function xUe(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var i=t.call(n),r,o=[],s;try{for(;(e===void 0||e-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(a){s={error:a}}finally{try{r&&!r.done&&(t=i.return)&&t.call(i)}finally{if(s)throw s.error}}return o}function MUe(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(xUe(arguments[e]));return n}var wae=(function(){function n(e,t){this.target=t,this.type=e}return n})(),wUe=(function(n){Mae(e,n);function e(t,i){var r=n.call(this,"error",i)||this;return r.message=t.message,r.error=t,r}return e})(wae),SUe=(function(n){Mae(e,n);function e(t,i,r){t===void 0&&(t=1e3),i===void 0&&(i="");var o=n.call(this,"close",r)||this;return o.wasClean=!0,o.code=t,o.reason=i,o}return e})(wae);/*!
 * Reconnecting WebSocket
 * by Pedro Ladaria <pedro.ladaria@gmail.com>
 * https://github.com/pladaria/reconnecting-websocket
 * License MIT
 */var EUe=function(){if(typeof WebSocket<"u")return WebSocket},OUe=function(n){return typeof n<"u"&&!!n&&n.CLOSING===2},rb={maxReconnectionDelay:1e4,minReconnectionDelay:1e3+Math.random()*4e3,minUptime:5e3,reconnectionDelayGrowFactor:1.3,connectionTimeout:4e3,maxRetries:1/0,maxEnqueuedMessages:1/0};(function(){function n(e,t,i){var r=this;i===void 0&&(i={}),this._listeners={error:[],message:[],open:[],close:[]},this._retryCount=-1,this._shouldReconnect=!0,this._connectLock=!1,this._binaryType="blob",this._closeCalled=!1,this._messageQueue=[],this.onclose=null,this.onerror=null,this.onmessage=null,this.onopen=null,this._handleOpen=function(o){r._debug("open event");var s=r._options.minUptime,a=s===void 0?rb.minUptime:s;clearTimeout(r._connectTimeout),r._uptimeTimeout=setTimeout(function(){return r._acceptOpen()},a),r._ws.binaryType=r._binaryType,r._messageQueue.forEach(function(c){return r._ws.send(c)}),r._messageQueue=[],r.onopen&&r.onopen(o),r._listeners.open.forEach(function(c){return r._callEventListener(o,c)})},this._handleMessage=function(o){r._debug("message event"),r.onmessage&&r.onmessage(o),r._listeners.message.forEach(function(s){return r._callEventListener(o,s)})},this._handleError=function(o){r._debug("error event",o.message),r._disconnect(void 0,o.message==="TIMEOUT"?"timeout":void 0),r.onerror&&r.onerror(o),r._debug("exec error listeners"),r._listeners.error.forEach(function(s){return r._callEventListener(o,s)}),r._connect()},this._handleClose=function(o){r._debug("close event"),r._clearTimeouts(),r._shouldReconnect&&r._connect(),r.onclose&&r.onclose(o),r._listeners.close.forEach(function(s){return r._callEventListener(o,s)})},this._url=e,this._protocols=t,this._options=i,this._options.startClosed&&(this._shouldReconnect=!1),this._connect()}return Object.defineProperty(n,"CONNECTING",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(n,"OPEN",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(n,"CLOSING",{get:function(){return 2},enumerable:!0,configurable:!0}),Object.defineProperty(n,"CLOSED",{get:function(){return 3},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"CONNECTING",{get:function(){return n.CONNECTING},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"OPEN",{get:function(){return n.OPEN},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"CLOSING",{get:function(){return n.CLOSING},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"CLOSED",{get:function(){return n.CLOSED},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"binaryType",{get:function(){return this._ws?this._ws.binaryType:this._binaryType},set:function(e){this._binaryType=e,this._ws&&(this._ws.binaryType=e)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"retryCount",{get:function(){return Math.max(this._retryCount,0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"bufferedAmount",{get:function(){var e=this._messageQueue.reduce(function(t,i){return typeof i=="string"?t+=i.length:i instanceof Blob?t+=i.size:t+=i.byteLength,t},0);return e+(this._ws?this._ws.bufferedAmount:0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"extensions",{get:function(){return this._ws?this._ws.extensions:""},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"protocol",{get:function(){return this._ws?this._ws.protocol:""},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"readyState",{get:function(){return this._ws?this._ws.readyState:this._options.startClosed?n.CLOSED:n.CONNECTING},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"url",{get:function(){return this._ws?this._ws.url:""},enumerable:!0,configurable:!0}),n.prototype.close=function(e,t){if(e===void 0&&(e=1e3),this._closeCalled=!0,this._shouldReconnect=!1,this._clearTimeouts(),!this._ws){this._debug("close enqueued: no ws instance");return}if(this._ws.readyState===this.CLOSED){this._debug("close: already closed");return}this._ws.close(e,t)},n.prototype.reconnect=function(e,t){this._shouldReconnect=!0,this._closeCalled=!1,this._retryCount=-1,!this._ws||this._ws.readyState===this.CLOSED?this._connect():(this._disconnect(e,t),this._connect())},n.prototype.send=function(e){if(this._ws&&this._ws.readyState===this.OPEN)this._debug("send",e),this._ws.send(e);else{var t=this._options.maxEnqueuedMessages,i=t===void 0?rb.maxEnqueuedMessages:t;this._messageQueue.length<i&&(this._debug("enqueue",e),this._messageQueue.push(e))}},n.prototype.addEventListener=function(e,t){this._listeners[e]&&this._listeners[e].push(t)},n.prototype.dispatchEvent=function(e){var t,i,r=this._listeners[e.type];if(r)try{for(var o=_Ue(r),s=o.next();!s.done;s=o.next()){var a=s.value;this._callEventListener(e,a)}}catch(c){t={error:c}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(t)throw t.error}}return!0},n.prototype.removeEventListener=function(e,t){this._listeners[e]&&(this._listeners[e]=this._listeners[e].filter(function(i){return i!==t}))},n.prototype._debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._options.debug&&console.log.apply(console,MUe(["RWS>"],e))},n.prototype._getNextDelay=function(){var e=this._options,t=e.reconnectionDelayGrowFactor,i=t===void 0?rb.reconnectionDelayGrowFactor:t,r=e.minReconnectionDelay,o=r===void 0?rb.minReconnectionDelay:r,s=e.maxReconnectionDelay,a=s===void 0?rb.maxReconnectionDelay:s,c=0;return this._retryCount>0&&(c=o*Math.pow(i,this._retryCount-1),c>a&&(c=a)),this._debug("next delay",c),c},n.prototype._wait=function(){var e=this;return new Promise(function(t){setTimeout(t,e._getNextDelay())})},n.prototype._getNextUrl=function(e){if(typeof e=="string")return Promise.resolve(e);if(typeof e=="function"){var t=e();if(typeof t=="string")return Promise.resolve(t);if(t.then)return t}throw Error("Invalid URL")},n.prototype._connect=function(){var e=this;if(!(this._connectLock||!this._shouldReconnect)){this._connectLock=!0;var t=this._options,i=t.maxRetries,r=i===void 0?rb.maxRetries:i,o=t.connectionTimeout,s=o===void 0?rb.connectionTimeout:o,a=t.WebSocket,c=a===void 0?EUe():a;if(this._retryCount>=r){this._debug("max retries reached",this._retryCount,">=",r);return}if(this._retryCount++,this._debug("connect",this._retryCount),this._removeListeners(),!OUe(c))throw Error("No valid WebSocket class provided");this._wait().then(function(){return e._getNextUrl(e._url)}).then(function(h){e._closeCalled||(e._debug("connect",{url:h,protocols:e._protocols}),e._ws=e._protocols?new c(h,e._protocols):new c(h),e._ws.binaryType=e._binaryType,e._connectLock=!1,e._addListeners(),e._connectTimeout=setTimeout(function(){return e._handleTimeout()},s))})}},n.prototype._handleTimeout=function(){this._debug("timeout event"),this._handleError(new wUe(Error("TIMEOUT"),this))},n.prototype._disconnect=function(e,t){if(e===void 0&&(e=1e3),this._clearTimeouts(),!!this._ws){this._removeListeners();try{this._ws.close(e,t),this._handleClose(new SUe(e,t,this))}catch{}}},n.prototype._acceptOpen=function(){this._debug("accept open"),this._retryCount=0},n.prototype._callEventListener=function(e,t){"handleEvent"in t?t.handleEvent(e):t(e)},n.prototype._removeListeners=function(){this._ws&&(this._debug("removeListeners"),this._ws.removeEventListener("open",this._handleOpen),this._ws.removeEventListener("close",this._handleClose),this._ws.removeEventListener("message",this._handleMessage),this._ws.removeEventListener("error",this._handleError))},n.prototype._addListeners=function(){this._ws&&(this._debug("addListeners"),this._ws.addEventListener("open",this._handleOpen),this._ws.addEventListener("close",this._handleClose),this._ws.addEventListener("message",this._handleMessage),this._ws.addEventListener("error",this._handleError))},n.prototype._clearTimeouts=function(){clearTimeout(this._connectTimeout),clearTimeout(this._uptimeTimeout)},n})();function Sae(){var n="/home/runner/work/maputnik/maputnik/src/libs/store/apistore.ts",e="511b7cd31edca7d05c4852901896ddb82085d1f5",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/store/apistore.ts",statementMap:{0:{start:{line:7,column:18},end:{line:7,column:24}},1:{start:{line:10,column:4},end:{line:11,column:7}},2:{start:{line:12,column:17},end:{line:12,column:37}},3:{start:{line:13,column:17},end:{line:13,column:28}},4:{start:{line:14,column:4},end:{line:14,column:45}},5:{start:{line:15,column:4},end:{line:15,column:50}},6:{start:{line:16,column:4},end:{line:16,column:37}},7:{start:{line:19,column:4},end:{line:27,column:5}},8:{start:{line:20,column:23},end:{line:20,column:79}},9:{start:{line:21,column:19},end:{line:21,column:40}},10:{start:{line:22,column:23},end:{line:22,column:27}},11:{start:{line:23,column:6},end:{line:23,column:39}},12:{start:{line:24,column:6},end:{line:24,column:32}},13:{start:{line:26,column:6},end:{line:26,column:54}},14:{start:{line:30,column:23},end:{line:30,column:67}},15:{start:{line:31,column:4},end:{line:42,column:6}},16:{start:{line:32,column:6},end:{line:32,column:26}},17:{start:{line:32,column:19},end:{line:32,column:26}},18:{start:{line:33,column:6},end:{line:33,column:52}},19:{start:{line:34,column:24},end:{line:34,column:40}},20:{start:{line:35,column:6},end:{line:39,column:7}},21:{start:{line:36,column:8},end:{line:36,column:41}},22:{start:{line:38,column:8},end:{line:38,column:27}},23:{start:{line:40,column:27},end:{line:40,column:65}},24:{start:{line:41,column:6},end:{line:41,column:44}},25:{start:{line:45,column:4},end:{line:53,column:5}},26:{start:{line:46,column:23},end:{line:48,column:8}},27:{start:{line:49,column:19},end:{line:49,column:40}},28:{start:{line:50,column:6},end:{line:50,column:45}},29:{start:{line:52,column:6},end:{line:52,column:92}},30:{start:{line:57,column:22},end:{line:61,column:5}},31:{start:{line:62,column:15},end:{line:62,column:26}},32:{start:{line:63,column:4},end:{line:72,column:7}},33:{start:{line:71,column:6},end:{line:71,column:38}},34:{start:{line:71,column:17},end:{line:71,column:38}},35:{start:{line:73,column:4},end:{line:73,column:20}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:2},end:{line:9,column:3}},loc:{start:{line:9,column:20},end:{line:17,column:3}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:10,column:58},end:{line:10,column:59}},loc:{start:{line:10,column:64},end:{line:11,column:5}},line:10},2:{name:"(anonymous_2)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:15},end:{line:28,column:3}},line:18},3:{name:"(anonymous_3)",decl:{start:{line:29,column:2},end:{line:29,column:3}},loc:{start:{line:29,column:23},end:{line:43,column:3}},line:29},4:{name:"(anonymous_4)",decl:{start:{line:31,column:27},end:{line:31,column:28}},loc:{start:{line:31,column:34},end:{line:42,column:5}},line:31},5:{name:"(anonymous_5)",decl:{start:{line:44,column:2},end:{line:44,column:3}},loc:{start:{line:44,column:25},end:{line:54,column:3}},line:44},6:{name:"(anonymous_6)",decl:{start:{line:56,column:2},end:{line:56,column:3}},loc:{start:{line:56,column:17},end:{line:74,column:3}},line:56},7:{name:"(anonymous_7)",decl:{start:{line:70,column:13},end:{line:70,column:14}},loc:{start:{line:70,column:29},end:{line:72,column:5}},line:70}},branchMap:{0:{loc:{start:{line:10,column:30},end:{line:11,column:6}},type:"binary-expr",locations:[{start:{line:10,column:30},end:{line:10,column:53}},{start:{line:10,column:58},end:{line:11,column:5}}],line:10},1:{loc:{start:{line:32,column:6},end:{line:32,column:26}},type:"if",locations:[{start:{line:32,column:6},end:{line:32,column:26}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:32},2:{loc:{start:{line:45,column:4},end:{line:53,column:5}},type:"if",locations:[{start:{line:45,column:4},end:{line:53,column:5}},{start:{line:51,column:11},end:{line:53,column:5}}],line:45},3:{loc:{start:{line:71,column:6},end:{line:71,column:38}},type:"if",locations:[{start:{line:71,column:6},end:{line:71,column:38}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:71}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/store/apistore.ts"],names:[],mappings:"AAAA,OAAO,WAAW;AAClB,SAAQ,cAAa;AACrB,OAAO,2BAA2B;AAO3B,aAAM,cAAqC;AAAA,EAEhD;AAAA,EACA;AAAA,EACA,gBAAoC;AAAA,EACpC;AAAA,EAEA,YAAY,MAA4B;AACtC,SAAK,qBAAqB,KAAK,uBAAuB,MAAM;AAAA,IAAC;AAC7D,UAAM,OAAO,OAAO,SAAS;AAC7B,UAAM,OAAO;AACb,SAAK,WAAW,UAAU,IAAI,IAAI,IAAI;AACtC,SAAK,eAAe,QAAQ,IAAI,IAAI,IAAI;AACxC,SAAK,OAAO,KAAK,KAAK,KAAK,IAAI;AAAA,EACjC;AAAA,EAEA,MAAM,OAAsB;AAC1B,QAAI;AACF,YAAM,WAAW,MAAM,MAAM,KAAK,WAAW,WAAW,EAAC,MAAM,OAAM,CAAC;AACtE,YAAM,OAAO,MAAM,SAAS,KAAK;AACjC,YAAM,WAAW;AACjB,WAAK,gBAAgB,SAAS,CAAC;AAC/B,WAAK,mBAAmB;AAAA,IAC1B,QAAQ;AACN,YAAM,IAAI,MAAM,8BAA8B;AAAA,IAChD;AAAA,EACF;AAAA,EAEA,qBAAqB;AACnB,UAAM,aAAa,IAAI,sBAAsB,KAAK,YAAY;AAC9D,eAAW,YAAY,OAAK;AAC1B,UAAG,CAAC,EAAE,KAAM;AACZ,cAAQ,IAAI,gCAAgC;AAC5C,UAAI,cAAc,MAAM;AACxB,UAAI;AACF,sBAAc,KAAK,MAAM,EAAE,IAAI;AAAA,MACjC,SAAQ,KAAK;AACX,gBAAQ,MAAM,GAAG;AAAA,MACnB;AACA,YAAM,eAAe,MAAM,oBAAoB,WAAW;AAC1D,WAAK,mBAAmB,YAAY;AAAA,IACtC;AAAA,EACF;AAAA,EAEA,MAAM,iBAAoD;AACxD,QAAG,KAAK,eAAe;AACrB,YAAM,WAAW,MAAM,MAAM,KAAK,WAAW,aAAa,KAAK,eAAe;AAAA,QAC5E,MAAM;AAAA,MACR,CAAC;AACD,YAAM,OAAO,MAAM,SAAS,KAAK;AACjC,aAAO,MAAM,oBAAoB,IAAI;AAAA,IACvC,OAAO;AACL,YAAM,IAAI,MAAM,oEAAoE;AAAA,IACtF;AAAA,EACF;AAAA;AAAA,EAGA,KAAK,UAAoC;AACvC,UAAM,YAAY;AAAA,MAChB,MAAM;AAAA,QACJ,MAAM,oBAAoB,QAAQ;AAAA,MACpC;AAAA,IACF;AAEA,UAAM,KAAK,SAAS;AACpB,UAAM,KAAK,WAAW,aAAa,IAAI;AAAA,MACrC,QAAQ;AAAA,MACR,MAAM;AAAA,MACN,SAAS;AAAA,QACP,gBAAgB;AAAA,MAClB;AAAA,MACA,MAAM;AAAA,IACR,CAAC,EACE,MAAM,SAAS,OAAO;AACrB,UAAG,MAAO,SAAQ,MAAM,KAAK;AAAA,IAC/B,CAAC;AACH,WAAO;AAAA,EACT;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"511b7cd31edca7d05c4852901896ddb82085d1f5"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Sae=function(){return s},s}Sae();function fi(){var n="/home/runner/work/maputnik/maputnik/src/libs/store/stylestore.ts",e="1506dd6f3469e4801b7fd940c02682bf4ad7b098",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/store/stylestore.ts",statementMap:{0:{start:{line:4,column:22},end:{line:4,column:32}},1:{start:{line:5,column:20},end:{line:5,column:27}},2:{start:{line:6,column:20},end:{line:9,column:1}},3:{start:{line:10,column:24},end:{line:10,column:44}},4:{start:{line:12,column:2},end:{line:12,column:39}},5:{start:{line:15,column:17},end:{line:15,column:19}},6:{start:{line:16,column:2},end:{line:21,column:3}},7:{start:{line:16,column:15},end:{line:16,column:16}},8:{start:{line:17,column:16},end:{line:17,column:42}},9:{start:{line:18,column:4},end:{line:20,column:5}},10:{start:{line:19,column:6},end:{line:19,column:32}},11:{start:{line:22,column:2},end:{line:22,column:16}},12:{start:{line:25,column:16},end:{line:25,column:30}},13:{start:{line:26,column:2},end:{line:26,column:86}},14:{start:{line:29,column:2},end:{line:31,column:3}},15:{start:{line:30,column:4},end:{line:30,column:41}},16:{start:{line:32,column:16},end:{line:32,column:30}},17:{start:{line:33,column:18},end:{line:33,column:26}},18:{start:{line:34,column:2},end:{line:34,column:17}},19:{start:{line:37,column:2},end:{line:37,column:57}},20:{start:{line:47,column:4},end:{line:47,column:40}},21:{start:{line:51,column:4},end:{line:56,column:5}},22:{start:{line:51,column:17},end:{line:51,column:18}},23:{start:{line:52,column:18},end:{line:52,column:44}},24:{start:{line:53,column:6},end:{line:55,column:7}},25:{start:{line:54,column:8},end:{line:54,column:44}},26:{start:{line:60,column:4},end:{line:62,column:5}},27:{start:{line:61,column:6},end:{line:61,column:32}},28:{start:{line:63,column:20},end:{line:63,column:67}},29:{start:{line:64,column:22},end:{line:64,column:68}},30:{start:{line:65,column:4},end:{line:67,column:5}},31:{start:{line:66,column:6},end:{line:66,column:35}},32:{start:{line:68,column:4},end:{line:68,column:30}},33:{start:{line:72,column:4},end:{line:72,column:51}},34:{start:{line:73,column:16},end:{line:73,column:37}},35:{start:{line:74,column:19},end:{line:77,column:5}},36:{start:{line:75,column:6},end:{line:75,column:65}},37:{start:{line:76,column:6},end:{line:76,column:67}},38:{start:{line:78,column:4},end:{line:89,column:5}},39:{start:{line:79,column:6},end:{line:79,column:15}},40:{start:{line:81,column:6},end:{line:88,column:7}},41:{start:{line:84,column:8},end:{line:84,column:21}},42:{start:{line:85,column:8},end:{line:85,column:17}},43:{start:{line:87,column:8},end:{line:87,column:16}},44:{start:{line:90,column:4},end:{line:90,column:20}}},fnMap:{0:{name:"loadDefaultStyle",decl:{start:{line:11,column:16},end:{line:11,column:32}},loc:{start:{line:11,column:35},end:{line:13,column:1}},line:11},1:{name:"loadStoredStyles",decl:{start:{line:14,column:9},end:{line:14,column:25}},loc:{start:{line:14,column:28},end:{line:23,column:1}},line:14},2:{name:"isStyleKey",decl:{start:{line:24,column:9},end:{line:24,column:19}},loc:{start:{line:24,column:25},end:{line:27,column:1}},line:24},3:{name:"fromKey",decl:{start:{line:28,column:9},end:{line:28,column:16}},loc:{start:{line:28,column:22},end:{line:35,column:1}},line:28},4:{name:"styleKey",decl:{start:{line:36,column:9},end:{line:36,column:17}},loc:{start:{line:36,column:27},end:{line:38,column:1}},line:36},5:{name:"(anonymous_5)",decl:{start:{line:46,column:2},end:{line:46,column:3}},loc:{start:{line:46,column:16},end:{line:48,column:3}},line:46},6:{name:"(anonymous_6)",decl:{start:{line:50,column:2},end:{line:50,column:3}},loc:{start:{line:50,column:10},end:{line:57,column:3}},line:50},7:{name:"(anonymous_7)",decl:{start:{line:59,column:2},end:{line:59,column:3}},loc:{start:{line:59,column:25},end:{line:69,column:3}},line:59},8:{name:"(anonymous_8)",decl:{start:{line:71,column:2},end:{line:71,column:3}},loc:{start:{line:71,column:17},end:{line:91,column:3}},line:71},9:{name:"(anonymous_9)",decl:{start:{line:74,column:19},end:{line:74,column:20}},loc:{start:{line:74,column:25},end:{line:77,column:5}},line:74}},branchMap:{0:{loc:{start:{line:18,column:4},end:{line:20,column:5}},type:"if",locations:[{start:{line:18,column:4},end:{line:20,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:18},1:{loc:{start:{line:26,column:9},end:{line:26,column:85}},type:"binary-expr",locations:[{start:{line:26,column:9},end:{line:26,column:27}},{start:{line:26,column:31},end:{line:26,column:57}},{start:{line:26,column:61},end:{line:26,column:85}}],line:26},2:{loc:{start:{line:29,column:2},end:{line:31,column:3}},type:"if",locations:[{start:{line:29,column:2},end:{line:31,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:29},3:{loc:{start:{line:53,column:6},end:{line:55,column:7}},type:"if",locations:[{start:{line:53,column:6},end:{line:55,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:53},4:{loc:{start:{line:60,column:4},end:{line:62,column:5}},type:"if",locations:[{start:{line:60,column:4},end:{line:62,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:60},5:{loc:{start:{line:65,column:4},end:{line:67,column:5}},type:"if",locations:[{start:{line:65,column:4},end:{line:67,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:65},6:{loc:{start:{line:81,column:6},end:{line:88,column:7}},type:"if",locations:[{start:{line:81,column:6},end:{line:88,column:7}},{start:{line:86,column:13},end:{line:88,column:7}}],line:81},7:{loc:{start:{line:81,column:10},end:{line:83,column:81}},type:"binary-expr",locations:[{start:{line:81,column:10},end:{line:81,column:35}},{start:{line:81,column:40},end:{line:81,column:53}},{start:{line:82,column:6},end:{line:82,column:21}},{start:{line:83,column:6},end:{line:83,column:37}},{start:{line:83,column:41},end:{line:83,column:80}}],line:81}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0},b:{0:[0,0],1:[0,0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0,0,0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/store/stylestore.ts"],names:[],mappings:"AAAA,OAAO,WAAW;AAClB,SAAQ,oBAAmB;AAC3B,OAAO,mBAAmB;AAG1B,MAAM,gBAAgB;AACtB,MAAM,cAAc;AACpB,MAAM,cAAc;AAAA,EAClB,QAAQ,CAAC,eAAe,cAAc,EAAE,KAAK,GAAG;AAAA,EAChD,aAAa,CAAC,eAAe,cAAc,EAAE,KAAK,GAAG;AACvD;AAEA,MAAM,kBAAkB,cAAc,CAAC,EAAE;AAGlC,gBAAS,mBAAsD;AACpE,SAAO,aAAa,eAAe;AACrC;AAGA,SAAS,mBAAmB;AAC1B,QAAM,SAAS,CAAC;AAChB,WAAS,IAAI,GAAG,IAAI,OAAO,aAAa,QAAQ,KAAK;AACnD,UAAM,MAAM,OAAO,aAAa,IAAI,CAAC;AACrC,QAAG,WAAW,GAAI,GAAG;AACnB,aAAO,KAAK,QAAQ,GAAI,CAAC;AAAA,IAC3B;AAAA,EACF;AACA,SAAO;AACT;AAEA,SAAS,WAAW,KAAa;AAC/B,QAAM,QAAQ,IAAI,MAAM,GAAG;AAC3B,SAAO,MAAM,WAAW,KAAK,MAAM,CAAC,MAAM,iBAAiB,MAAM,CAAC,MAAM;AAC1E;AAGA,SAAS,QAAQ,KAAa;AAC5B,MAAG,CAAC,WAAW,GAAG,GAAG;AACnB,UAAM;AAAA,EACR;AAEA,QAAM,QAAQ,IAAI,MAAM,GAAG;AAC3B,QAAM,UAAU,MAAM,CAAC;AACvB,SAAO;AACT;AAGA,SAAS,SAAS,SAAiB;AACjC,SAAO,CAAC,eAAe,aAAa,OAAO,EAAE,KAAK,GAAG;AACvD;AAGO,aAAM,WAAkC;AAAA;AAAA;AAAA;AAAA,EAI7C;AAAA;AAAA;AAAA,EAIA,cAAc;AACZ,SAAK,YAAY,iBAAiB;AAAA,EACpC;AAAA;AAAA,EAGA,QAAQ;AACN,aAAS,IAAI,GAAG,IAAI,OAAO,aAAa,QAAQ,KAAK;AACnD,YAAM,MAAM,OAAO,aAAa,IAAI,CAAC;AACrC,UAAG,IAAI,WAAW,aAAa,GAAG;AAChC,eAAO,aAAa,WAAW,GAAG;AAAA,MACpC;AAAA,IACF;AAAA,EACF;AAAA;AAAA,EAGA,MAAM,iBAAoD;AACxD,QAAG,KAAK,UAAU,WAAW,GAAG;AAC9B,aAAO,iBAAiB;AAAA,IAC1B;AACA,UAAM,UAAU,OAAO,aAAa,QAAQ,YAAY,MAAM;AAC9D,UAAM,YAAY,OAAO,aAAa,QAAQ,SAAS,OAAO,CAAC;AAE/D,QAAI,WAAW;AACb,aAAO,KAAK,MAAM,SAAS;AAAA,IAC7B;AACA,WAAO,iBAAiB;AAAA,EAC1B;AAAA;AAAA,EAGA,KAAK,UAAoC;AACvC,eAAW,MAAM,oBAAoB,QAAQ;AAC7C,UAAM,MAAM,SAAS,SAAS,EAAE;AAEhC,UAAM,SAAS,MAAM;AACnB,aAAO,aAAa,QAAQ,KAAK,KAAK,UAAU,QAAQ,CAAC;AACzD,aAAO,aAAa,QAAQ,YAAY,QAAQ,SAAS,EAAE;AAAA,IAC7D;AAEA,QAAI;AACF,aAAO;AAAA,IACT,SAAS,GAAG;AAEV,UAAI,aAAa,iBACf,EAAE,SAAS;AAAA,MACX,EAAE,SAAS;AAAA,MACX,EAAE,SAAS,wBACX,EAAE,SAAS,+BACV;AACD,aAAK,MAAM;AACX,eAAO;AAAA,MACT,OAAO;AACL,cAAM;AAAA,MACR;AAAA,IACF;AACA,WAAO;AAAA,EACT;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"1506dd6f3469e4801b7fd940c02682bf4ad7b098"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return fi=function(){return s},s}fi();const Z6=(fi().s[0]++,"maputnik"),Eae=(fi().s[1]++,"style"),WH=(fi().s[2]++,{latest:[Z6,"latest_style"].join(":")}),BUe=(fi().s[3]++,Aae[0].url);function QH(){return fi().f[0]++,fi().s[4]++,xae(BUe)}function IUe(){fi().f[1]++;const n=(fi().s[5]++,[]);fi().s[6]++;for(let e=(fi().s[7]++,0);e<window.localStorage.length;e++){const t=(fi().s[8]++,window.localStorage.key(e));fi().s[9]++,Oae(t)?(fi().b[0][0]++,fi().s[10]++,n.push(kUe(t))):fi().b[0][1]++}return fi().s[11]++,n}function Oae(n){fi().f[2]++;const e=(fi().s[12]++,n.split(":"));return fi().s[13]++,fi().b[1][0]++,e.length===3&&(fi().b[1][1]++,e[0]===Z6)&&(fi().b[1][2]++,e[1]===Eae)}function kUe(n){if(fi().f[3]++,fi().s[14]++,Oae(n))fi().b[2][1]++;else throw fi().b[2][0]++,fi().s[15]++,"Key is not a valid style key";const e=(fi().s[16]++,n.split(":")),t=(fi().s[17]++,e[2]);return fi().s[18]++,t}function qH(n){return fi().f[4]++,fi().s[19]++,[Z6,Eae,n].join(":")}class TUe{mapStyles;constructor(){fi().f[5]++,fi().s[20]++,this.mapStyles=IUe()}purge(){fi().f[6]++,fi().s[21]++;for(let e=(fi().s[22]++,0);e<window.localStorage.length;e++){const t=(fi().s[23]++,window.localStorage.key(e));fi().s[24]++,t.startsWith(Z6)?(fi().b[3][0]++,fi().s[25]++,window.localStorage.removeItem(t)):fi().b[3][1]++}}async getLatestStyle(){if(fi().f[7]++,fi().s[26]++,this.mapStyles.length===0)return fi().b[4][0]++,fi().s[27]++,QH();fi().b[4][1]++;const e=(fi().s[28]++,window.localStorage.getItem(WH.latest)),t=(fi().s[29]++,window.localStorage.getItem(qH(e)));return fi().s[30]++,t?(fi().b[5][0]++,fi().s[31]++,JSON.parse(t)):(fi().b[5][1]++,fi().s[32]++,QH())}save(e){fi().f[8]++,fi().s[33]++,e=Ed.ensureStyleValidity(e);const t=(fi().s[34]++,qH(e.id));fi().s[35]++;const i=()=>{fi().f[9]++,fi().s[36]++,window.localStorage.setItem(t,JSON.stringify(e)),fi().s[37]++,window.localStorage.setItem(WH.latest,e.id)};fi().s[38]++;try{fi().s[39]++,i()}catch(r){if(fi().s[40]++,fi().b[7][0]++,r instanceof DOMException&&(fi().b[7][1]++,r.code===22||(fi().b[7][2]++,r.code===1014)||(fi().b[7][3]++,r.name==="QuotaExceededError")||(fi().b[7][4]++,r.name==="NS_ERROR_DOM_QUOTA_REACHED")))fi().b[6][0]++,fi().s[41]++,this.purge(),fi().s[42]++,i();else throw fi().b[6][1]++,fi().s[43]++,r}return fi().s[44]++,e}}function Sh(){var n="/home/runner/work/maputnik/maputnik/src/libs/store/style-store-factory.ts",e="2de8d55bfe17551e08818e39ce7b23b7139f970e",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/store/style-store-factory.ts",statementMap:{0:{start:{line:5,column:19},end:{line:5,column:65}},1:{start:{line:6,column:22},end:{line:6,column:118}},2:{start:{line:8,column:2},end:{line:20,column:3}},3:{start:{line:9,column:26},end:{line:11,column:6}},4:{start:{line:10,column:40},end:{line:10,column:81}},5:{start:{line:12,column:4},end:{line:17,column:5}},6:{start:{line:13,column:6},end:{line:13,column:33}},7:{start:{line:14,column:6},end:{line:14,column:33}},8:{start:{line:16,column:6},end:{line:16,column:36}},9:{start:{line:19,column:4},end:{line:19,column:34}},10:{start:{line:21,column:22},end:{line:21,column:100}},11:{start:{line:22,column:2},end:{line:22,column:66}},12:{start:{line:23,column:2},end:{line:23,column:20}}},fnMap:{0:{name:"createStyleStore",decl:{start:{line:4,column:22},end:{line:4,column:38}},loc:{start:{line:4,column:55},end:{line:24,column:1}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:10,column:26},end:{line:10,column:27}},loc:{start:{line:10,column:40},end:{line:10,column:81}},line:10}},branchMap:{0:{loc:{start:{line:6,column:22},end:{line:6,column:118}},type:"binary-expr",locations:[{start:{line:6,column:22},end:{line:6,column:30}},{start:{line:6,column:34},end:{line:6,column:118}}],line:6},1:{loc:{start:{line:8,column:2},end:{line:20,column:3}},type:"if",locations:[{start:{line:8,column:2},end:{line:20,column:3}},{start:{line:18,column:9},end:{line:20,column:3}}],line:8},2:{loc:{start:{line:21,column:22},end:{line:21,column:100}},type:"cond-expr",locations:[{start:{line:21,column:36},end:{line:21,column:64}},{start:{line:21,column:67},end:{line:21,column:100}}],line:21}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0},f:{0:0,1:0},b:{0:[0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/store/style-store-factory.ts"],names:[],mappings:"AAEA,SAAS,8CAA8C,oBAAoB;AAC3E,SAAS,qBAAqB;AAC9B,SAAS,kBAAkB;AAE3B,sBAAsB,iBAAiB,gBAA8D;AACnG,QAAM,WAAW,6CAA6C;AAC9D,QAAM,cAAc,YAAY,OAAO,QAAQ,0BAA0B,WAAW,+BAA+B;AACnH,MAAI;AACJ,MAAI,OAAoD;AACtD,UAAM,gBAAgB,IAAI,cAAc;AAAA,MACtC,oBAAoB,CAAA,aAAY,eAAe,UAAU,EAAC,MAAM,MAAK,CAAC;AAAA,IACxE,CAAC;AACD,QAAI;AACF,YAAM,cAAc,KAAK;AACzB,mBAAa;AAAA,IACf,QAAQ;AACN,mBAAa,IAAI,WAAW;AAAA,IAC9B;AAAA,EACF,OAAO;AACL,iBAAa,IAAI,WAAW;AAAA,EAC9B;AACA,QAAM,cAAc,cAAc,MAAM,aAAa,QAAQ,IAAI,MAAM,WAAW,eAAe;AACjG,iBAAe,aAAa,EAAC,aAAa,MAAM,MAAM,MAAK,CAAC;AAC5D,SAAO;AACT;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2de8d55bfe17551e08818e39ce7b23b7139f970e"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Sh=function(){return s},s}Sh();async function RUe(n){Sh().f[0]++;const e=(Sh().s[0]++,CUe()),t=(Sh().s[1]++,Sh().b[0][0]++,e&&(Sh().b[0][1]++,window.confirm("Load style from URL: "+e+" and discard current changes?")));let i;Sh().s[2]++,Sh().b[1][1]++,Sh().s[9]++,i=new TUe;const r=(Sh().s[10]++,t?(Sh().b[2][0]++,await xae(e)):(Sh().b[2][1]++,await i.getLatestStyle()));return Sh().s[11]++,n(r,{initialLoad:!0,save:!1}),Sh().s[12]++,i}function ja(){var n="/home/runner/work/maputnik/maputnik/src/libs/revisions.ts",e="2443d70bd38cc3b176918d5f84a8a7d35a1ef2fe",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/revisions.ts",statementMap:{0:{start:{line:5,column:4},end:{line:5,column:38}},1:{start:{line:6,column:4},end:{line:6,column:50}},2:{start:{line:9,column:4},end:{line:9,column:53}},3:{start:{line:12,column:4},end:{line:12,column:43}},4:{start:{line:15,column:4},end:{line:15,column:66}},5:{start:{line:16,column:4},end:{line:16,column:34}},6:{start:{line:17,column:4},end:{line:17,column:22}},7:{start:{line:20,column:4},end:{line:22,column:5}},8:{start:{line:21,column:6},end:{line:21,column:24}},9:{start:{line:23,column:4},end:{line:23,column:24}},10:{start:{line:26,column:4},end:{line:28,column:5}},11:{start:{line:27,column:6},end:{line:27,column:24}},12:{start:{line:29,column:4},end:{line:29,column:24}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:2},end:{line:4,column:3}},loc:{start:{line:4,column:37},end:{line:7,column:3}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:15},end:{line:10,column:3}},line:8},2:{name:"(anonymous_2)",decl:{start:{line:11,column:2},end:{line:11,column:3}},loc:{start:{line:11,column:16},end:{line:13,column:3}},line:11},3:{name:"(anonymous_3)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:24},end:{line:18,column:3}},line:14},4:{name:"(anonymous_4)",decl:{start:{line:19,column:2},end:{line:19,column:3}},loc:{start:{line:19,column:9},end:{line:24,column:3}},line:19},5:{name:"(anonymous_5)",decl:{start:{line:25,column:2},end:{line:25,column:3}},loc:{start:{line:25,column:9},end:{line:30,column:3}},line:25}},branchMap:{0:{loc:{start:{line:4,column:14},end:{line:4,column:35}},type:"default-arg",locations:[{start:{line:4,column:33},end:{line:4,column:35}}],line:4},1:{loc:{start:{line:20,column:4},end:{line:22,column:5}},type:"if",locations:[{start:{line:20,column:4},end:{line:22,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:20},2:{loc:{start:{line:26,column:4},end:{line:28,column:5}},type:"if",locations:[{start:{line:26,column:4},end:{line:28,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:26}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{0:[0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/revisions.ts"],names:[],mappings:"AAEO,aAAM,cAAc;AAAA,EACzB;AAAA,EACA;AAAA,EAGA,YAAY,mBAAiB,CAAC,GAAG;AAC/B,SAAK,YAAY;AACjB,SAAK,aAAa,iBAAiB,SAAS;AAAA,EAC9C;AAAA,EAEA,IAAI,SAAS;AACX,WAAO,KAAK,UAAU,KAAK,UAAU,SAAS,CAAC;AAAA,EACjD;AAAA,EAEA,IAAI,UAAU;AACZ,WAAO,KAAK,UAAU,KAAK,UAAU;AAAA,EACvC;AAAA,EAEA,YAAY,UAAoC;AAG9C,SAAK,YAAY,KAAK,UAAU,MAAM,GAAG,KAAK,aAAa,CAAC;AAE5D,SAAK,UAAU,KAAK,QAAQ;AAC5B,SAAK;AAAA,EAEP;AAAA,EAEA,OAAO;AACL,QAAG,KAAK,aAAa,GAAG;AACtB,WAAK;AAAA,IACP;AACA,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,OAAO;AACL,QAAG,KAAK,aAAa,KAAK,UAAU,SAAS,GAAG;AAC9C,WAAK;AAAA,IACP;AACA,WAAO,KAAK;AAAA,EACd;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2443d70bd38cc3b176918d5f84a8a7d35a1ef2fe"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return ja=function(){return s},s}ja();class DUe{revisions;currentIdx;constructor(e=(ja().b[0][0]++,[])){ja().f[0]++,ja().s[0]++,this.revisions=e,ja().s[1]++,this.currentIdx=e.length-1}get latest(){return ja().f[1]++,ja().s[2]++,this.revisions[this.revisions.length-1]}get current(){return ja().f[2]++,ja().s[3]++,this.revisions[this.currentIdx]}addRevision(e){ja().f[3]++,ja().s[4]++,this.revisions=this.revisions.slice(0,this.currentIdx+1),ja().s[5]++,this.revisions.push(e),ja().s[6]++,this.currentIdx++}undo(){return ja().f[4]++,ja().s[7]++,this.currentIdx>0?(ja().b[1][0]++,ja().s[8]++,this.currentIdx--):ja().b[1][1]++,ja().s[9]++,this.current}redo(){return ja().f[5]++,ja().s[10]++,this.currentIdx<this.revisions.length-1?(ja().b[2][0]++,ja().s[11]++,this.currentIdx++):ja().b[2][1]++,ja().s[12]++,this.current}}var ZT,YH;function PUe(){if(YH)return ZT;YH=1;var n="Expected a function",e=NaN,t="[object Symbol]",i=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,s=/^0o[0-7]+$/i,a=parseInt,c=typeof window=="object"&&window&&window.Object===Object&&window,h=typeof self=="object"&&self&&self.Object===Object&&self,m=c||h||Function("return this")(),y=Object.prototype,M=y.toString,x=Math.max,T=Math.min,P=function(){return m.Date.now()};function F(Y,z,se){var le,pe,de,ve,Ee,Re,je=0,Ie=!1,qe=!1,tt=!0;if(typeof Y!="function")throw new TypeError(n);z=Q(z)||0,q(se)&&(Ie=!!se.leading,qe="maxWait"in se,de=qe?x(Q(se.maxWait)||0,z):de,tt="trailing"in se?!!se.trailing:tt);function At(Ke){var Te=le,Se=pe;return le=pe=void 0,je=Ke,ve=Y.apply(Se,Te),ve}function ke(Ke){return je=Ke,Ee=setTimeout(Me,z),Ie?At(Ke):ve}function we(Ke){var Te=Ke-Re,Se=Ke-je,We=z-Te;return qe?T(We,de-Se):We}function ze(Ke){var Te=Ke-Re,Se=Ke-je;return Re===void 0||Te>=z||Te<0||qe&&Se>=de}function Me(){var Ke=P();if(ze(Ke))return lt(Ke);Ee=setTimeout(Me,we(Ke))}function lt(Ke){return Ee=void 0,tt&&le?At(Ke):(le=pe=void 0,ve)}function nt(){Ee!==void 0&&clearTimeout(Ee),je=0,le=Re=pe=Ee=void 0}function bt(){return Ee===void 0?ve:lt(P())}function Bt(){var Ke=P(),Te=ze(Ke);if(le=arguments,pe=this,Re=Ke,Te){if(Ee===void 0)return ke(Re);if(qe)return Ee=setTimeout(Me,z),At(Re)}return Ee===void 0&&(Ee=setTimeout(Me,z)),ve}return Bt.cancel=nt,Bt.flush=bt,Bt}function j(Y,z,se){var le=!0,pe=!0;if(typeof Y!="function")throw new TypeError(n);return q(se)&&(le="leading"in se?!!se.leading:le,pe="trailing"in se?!!se.trailing:pe),F(Y,z,{leading:le,maxWait:z,trailing:pe})}function q(Y){var z=typeof Y;return!!Y&&(z=="object"||z=="function")}function V(Y){return!!Y&&typeof Y=="object"}function H(Y){return typeof Y=="symbol"||V(Y)&&M.call(Y)==t}function Q(Y){if(typeof Y=="number")return Y;if(H(Y))return e;if(q(Y)){var z=typeof Y.valueOf=="function"?Y.valueOf():Y;Y=q(z)?z+"":z}if(typeof Y!="string")return Y===0?Y:+Y;Y=Y.replace(i,"");var se=o.test(Y);return se||s.test(Y)?a(Y.slice(2),se?2:8):r.test(Y)?e:+Y}return ZT=j,ZT}var UUe=PUe();const KUe=eu(UUe);var i3={exports:{}};i3.exports;var $H;function LUe(){return $H||($H=1,(function(n,e){var t=200,i="__lodash_hash_undefined__",r=1,o=2,s=9007199254740991,a="[object Arguments]",c="[object Array]",h="[object AsyncFunction]",m="[object Boolean]",y="[object Date]",M="[object Error]",x="[object Function]",T="[object GeneratorFunction]",P="[object Map]",F="[object Number]",j="[object Null]",q="[object Object]",V="[object Promise]",H="[object Proxy]",Q="[object RegExp]",Y="[object Set]",z="[object String]",se="[object Symbol]",le="[object Undefined]",pe="[object WeakMap]",de="[object ArrayBuffer]",ve="[object DataView]",Ee="[object Float32Array]",Re="[object Float64Array]",je="[object Int8Array]",Ie="[object Int16Array]",qe="[object Int32Array]",tt="[object Uint8Array]",At="[object Uint8ClampedArray]",ke="[object Uint16Array]",we="[object Uint32Array]",ze=/[\\^$.*+?()[\]{}|]/g,Me=/^\[object .+?Constructor\]$/,lt=/^(?:0|[1-9]\d*)$/,nt={};nt[Ee]=nt[Re]=nt[je]=nt[Ie]=nt[qe]=nt[tt]=nt[At]=nt[ke]=nt[we]=!0,nt[a]=nt[c]=nt[de]=nt[m]=nt[ve]=nt[y]=nt[M]=nt[x]=nt[P]=nt[F]=nt[q]=nt[Q]=nt[Y]=nt[z]=nt[pe]=!1;var bt=typeof window=="object"&&window&&window.Object===Object&&window,Bt=typeof self=="object"&&self&&self.Object===Object&&self,Ke=bt||Bt||Function("return this")(),Te=e&&!e.nodeType&&e,Se=Te&&!0&&n&&!n.nodeType&&n,We=Se&&Se.exports===Te,at=We&&bt.process,it=(function(){try{return at&&at.binding&&at.binding("util")}catch{}})(),ft=it&&it.isTypedArray;function Dt(X,Ce){for(var Qe=-1,Et=X==null?0:X.length,jn=0,On=[];++Qe<Et;){var _i=X[Qe];Ce(_i,Qe,X)&&(On[jn++]=_i)}return On}function Ot(X,Ce){for(var Qe=-1,Et=Ce.length,jn=X.length;++Qe<Et;)X[jn+Qe]=Ce[Qe];return X}function Jt(X,Ce){for(var Qe=-1,Et=X==null?0:X.length;++Qe<Et;)if(Ce(X[Qe],Qe,X))return!0;return!1}function Dn(X,Ce){for(var Qe=-1,Et=Array(X);++Qe<X;)Et[Qe]=Ce(Qe);return Et}function Pn(X){return function(Ce){return X(Ce)}}function oi(X,Ce){return X.has(Ce)}function In(X,Ce){return X?.[Ce]}function Tn(X){var Ce=-1,Qe=Array(X.size);return X.forEach(function(Et,jn){Qe[++Ce]=[jn,Et]}),Qe}function dn(X,Ce){return function(Qe){return X(Ce(Qe))}}function $n(X){var Ce=-1,Qe=Array(X.size);return X.forEach(function(Et){Qe[++Ce]=Et}),Qe}var Un=Array.prototype,It=Function.prototype,_e=Object.prototype,oe=Ke["__core-js_shared__"],ee=It.toString,ne=_e.hasOwnProperty,ue=(function(){var X=/[^.]+$/.exec(oe&&oe.keys&&oe.keys.IE_PROTO||"");return X?"Symbol(src)_1."+X:""})(),be=_e.toString,Le=RegExp("^"+ee.call(ne).replace(ze,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ve=We?Ke.Buffer:void 0,rt=Ke.Symbol,ye=Ke.Uint8Array,Be=_e.propertyIsEnumerable,v=Un.splice,yt=rt?rt.toStringTag:void 0,Mt=Object.getOwnPropertySymbols,Pt=Ve?Ve.isBuffer:void 0,en=dn(Object.keys,Object),mt=wo(Ke,"DataView"),Qn=wo(Ke,"Map"),Xn=wo(Ke,"Promise"),Cn=wo(Ke,"Set"),Fn=wo(Ke,"WeakMap"),pi=wo(Object,"create"),Hi=ko(mt),Ii=ko(Qn),Ar=ko(Xn),ii=ko(Cn),Fi=ko(Fn),Ri=rt?rt.prototype:void 0,on=Ri?Ri.valueOf:void 0;function nr(X){var Ce=-1,Qe=X==null?0:X.length;for(this.clear();++Ce<Qe;){var Et=X[Ce];this.set(Et[0],Et[1])}}function Go(){this.__data__=pi?pi(null):{},this.size=0}function Co(X){var Ce=this.has(X)&&delete this.__data__[X];return this.size-=Ce?1:0,Ce}function gr(X){var Ce=this.__data__;if(pi){var Qe=Ce[X];return Qe===i?void 0:Qe}return ne.call(Ce,X)?Ce[X]:void 0}function gn(X){var Ce=this.__data__;return pi?Ce[X]!==void 0:ne.call(Ce,X)}function Ni(X,Ce){var Qe=this.__data__;return this.size+=this.has(X)?0:1,Qe[X]=pi&&Ce===void 0?i:Ce,this}nr.prototype.clear=Go,nr.prototype.delete=Co,nr.prototype.get=gr,nr.prototype.has=gn,nr.prototype.set=Ni;function ni(X){var Ce=-1,Qe=X==null?0:X.length;for(this.clear();++Ce<Qe;){var Et=X[Ce];this.set(Et[0],Et[1])}}function ga(){this.__data__=[],this.size=0}function Ra(X){var Ce=this.__data__,Qe=Lo(Ce,X);if(Qe<0)return!1;var Et=Ce.length-1;return Qe==Et?Ce.pop():v.call(Ce,Qe,1),--this.size,!0}function zs(X){var Ce=this.__data__,Qe=Lo(Ce,X);return Qe<0?void 0:Ce[Qe][1]}function Pi(X){return Lo(this.__data__,X)>-1}function kl(X,Ce){var Qe=this.__data__,Et=Lo(Qe,X);return Et<0?(++this.size,Qe.push([X,Ce])):Qe[Et][1]=Ce,this}ni.prototype.clear=ga,ni.prototype.delete=Ra,ni.prototype.get=zs,ni.prototype.has=Pi,ni.prototype.set=kl;function eo(X){var Ce=-1,Qe=X==null?0:X.length;for(this.clear();++Ce<Qe;){var Et=X[Ce];this.set(Et[0],Et[1])}}function ya(){this.size=0,this.__data__={hash:new nr,map:new(Qn||ni),string:new nr}}function tu(X){var Ce=Es(this,X).delete(X);return this.size-=Ce?1:0,Ce}function Xs(X){return Es(this,X).get(X)}function Ko(X){return Es(this,X).has(X)}function Zo(X,Ce){var Qe=Es(this,X),Et=Qe.size;return Qe.set(X,Ce),this.size+=Qe.size==Et?0:1,this}eo.prototype.clear=ya,eo.prototype.delete=tu,eo.prototype.get=Xs,eo.prototype.has=Ko,eo.prototype.set=Zo;function gs(X){var Ce=-1,Qe=X==null?0:X.length;for(this.__data__=new eo;++Ce<Qe;)this.add(X[Ce])}function jr(X){return this.__data__.set(X,i),this}function Da(X){return this.__data__.has(X)}gs.prototype.add=gs.prototype.push=jr,gs.prototype.has=Da;function os(X){var Ce=this.__data__=new ni(X);this.size=Ce.size}function Bc(){this.__data__=new ni,this.size=0}function Mu(X){var Ce=this.__data__,Qe=Ce.delete(X);return this.size=Ce.size,Qe}function nu(X){return this.__data__.get(X)}function oA(X){return this.__data__.has(X)}function tc(X,Ce){var Qe=this.__data__;if(Qe instanceof ni){var Et=Qe.__data__;if(!Qn||Et.length<t-1)return Et.push([X,Ce]),this.size=++Qe.size,this;Qe=this.__data__=new eo(Et)}return Qe.set(X,Ce),this.size=Qe.size,this}os.prototype.clear=Bc,os.prototype.delete=Mu,os.prototype.get=nu,os.prototype.has=oA,os.prototype.set=tc;function gl(X,Ce){var Qe=fo(X),Et=!Qe&&ss(X),jn=!Qe&&!Et&&Fo(X),On=!Qe&&!Et&&!jn&&Ka(X),_i=Qe||Et||jn||On,zi=_i?Dn(X.length,String):[],ki=zi.length;for(var Ei in X)ne.call(X,Ei)&&!(_i&&(Ei=="length"||jn&&(Ei=="offset"||Ei=="parent")||On&&(Ei=="buffer"||Ei=="byteLength"||Ei=="byteOffset")||au(Ei,ki)))&&zi.push(Ei);return zi}function Lo(X,Ce){for(var Qe=X.length;Qe--;)if(Rl(X[Qe][0],Ce))return Qe;return-1}function nc(X,Ce,Qe){var Et=Ce(X);return fo(X)?Et:Ot(Et,Qe(X))}function iu(X){return X==null?X===void 0?le:j:yt&&yt in Object(X)?Tl(X):Pa(X)}function Ic(X){return oo(X)&&iu(X)==a}function ic(X,Ce,Qe,Et,jn){return X===Ce?!0:X==null||Ce==null||!oo(X)&&!oo(Ce)?X!==X&&Ce!==Ce:kc(X,Ce,Qe,Et,ic,jn)}function kc(X,Ce,Qe,Et,jn,On){var _i=fo(X),zi=fo(Ce),ki=_i?c:Ui(X),Ei=zi?c:Ui(Ce);ki=ki==a?q:ki,Ei=Ei==a?q:Ei;var Cr=ki==q,so=Ei==q,yr=ki==Ei;if(yr&&Fo(X)){if(!Fo(Ce))return!1;_i=!0,Cr=!1}if(yr&&!Cr)return On||(On=new os),_i||Ka(X)?wu(X,Ce,Qe,Et,jn,On):ru(X,Ce,ki,Qe,Et,jn,On);if(!(Qe&r)){var Ji=Cr&&ne.call(X,"__wrapped__"),rr=so&&ne.call(Ce,"__wrapped__");if(Ji||rr){var ys=Ji?X.value():X,Xo=rr?Ce.value():Ce;return On||(On=new os),jn(ys,Xo,Qe,Et,On)}}return yr?(On||(On=new os),ou(X,Ce,Qe,Et,jn,On)):!1}function ZA(X){if(!ea(X)||Su(X))return!1;var Ce=Ua(X)?Le:Me;return Ce.test(ko(X))}function Ss(X){return oo(X)&&So(X.length)&&!!nt[iu(X)]}function Tc(X){if(!ir(X))return en(X);var Ce=[];for(var Qe in Object(X))ne.call(X,Qe)&&Qe!="constructor"&&Ce.push(Qe);return Ce}function wu(X,Ce,Qe,Et,jn,On){var _i=Qe&r,zi=X.length,ki=Ce.length;if(zi!=ki&&!(_i&&ki>zi))return!1;var Ei=On.get(X);if(Ei&&On.get(Ce))return Ei==Ce;var Cr=-1,so=!0,yr=Qe&o?new gs:void 0;for(On.set(X,Ce),On.set(Ce,X);++Cr<zi;){var Ji=X[Cr],rr=Ce[Cr];if(Et)var ys=_i?Et(rr,Ji,Cr,Ce,X,On):Et(Ji,rr,Cr,X,Ce,On);if(ys!==void 0){if(ys)continue;so=!1;break}if(yr){if(!Jt(Ce,function(Xo,Os){if(!oi(yr,Os)&&(Ji===Xo||jn(Ji,Xo,Qe,Et,On)))return yr.push(Os)})){so=!1;break}}else if(!(Ji===rr||jn(Ji,rr,Qe,Et,On))){so=!1;break}}return On.delete(X),On.delete(Ce),so}function ru(X,Ce,Qe,Et,jn,On,_i){switch(Qe){case ve:if(X.byteLength!=Ce.byteLength||X.byteOffset!=Ce.byteOffset)return!1;X=X.buffer,Ce=Ce.buffer;case de:return!(X.byteLength!=Ce.byteLength||!On(new ye(X),new ye(Ce)));case m:case y:case F:return Rl(+X,+Ce);case M:return X.name==Ce.name&&X.message==Ce.message;case Q:case z:return X==Ce+"";case P:var zi=Tn;case Y:var ki=Et&r;if(zi||(zi=$n),X.size!=Ce.size&&!ki)return!1;var Ei=_i.get(X);if(Ei)return Ei==Ce;Et|=o,_i.set(X,Ce);var Cr=wu(zi(X),zi(Ce),Et,jn,On,_i);return _i.delete(X),Cr;case se:if(on)return on.call(X)==on.call(Ce)}return!1}function ou(X,Ce,Qe,Et,jn,On){var _i=Qe&r,zi=su(X),ki=zi.length,Ei=su(Ce),Cr=Ei.length;if(ki!=Cr&&!_i)return!1;for(var so=ki;so--;){var yr=zi[so];if(!(_i?yr in Ce:ne.call(Ce,yr)))return!1}var Ji=On.get(X);if(Ji&&On.get(Ce))return Ji==Ce;var rr=!0;On.set(X,Ce),On.set(Ce,X);for(var ys=_i;++so<ki;){yr=zi[so];var Xo=X[yr],Os=Ce[yr];if(Et)var Bs=_i?Et(Os,Xo,yr,Ce,X,On):Et(Xo,Os,yr,X,Ce,On);if(!(Bs===void 0?Xo===Os||jn(Xo,Os,Qe,Et,On):Bs)){rr=!1;break}ys||(ys=yr=="constructor")}if(rr&&!ys){var lu=X.constructor,vs=Ce.constructor;lu!=vs&&"constructor"in X&&"constructor"in Ce&&!(typeof lu=="function"&&lu instanceof lu&&typeof vs=="function"&&vs instanceof vs)&&(rr=!1)}return On.delete(X),On.delete(Ce),rr}function su(X){return nc(X,Nr,Js)}function Es(X,Ce){var Qe=X.__data__;return aa(Ce)?Qe[typeof Ce=="string"?"string":"hash"]:Qe.map}function wo(X,Ce){var Qe=In(X,Ce);return ZA(Qe)?Qe:void 0}function Tl(X){var Ce=ne.call(X,yt),Qe=X[yt];try{X[yt]=void 0;var Et=!0}catch{}var jn=be.call(X);return Et&&(Ce?X[yt]=Qe:delete X[yt]),jn}var Js=Mt?function(X){return X==null?[]:(X=Object(X),Dt(Mt(X),function(Ce){return Be.call(X,Ce)}))}:Gi,Ui=iu;(mt&&Ui(new mt(new ArrayBuffer(1)))!=ve||Qn&&Ui(new Qn)!=P||Xn&&Ui(Xn.resolve())!=V||Cn&&Ui(new Cn)!=Y||Fn&&Ui(new Fn)!=pe)&&(Ui=function(X){var Ce=iu(X),Qe=Ce==q?X.constructor:void 0,Et=Qe?ko(Qe):"";if(Et)switch(Et){case Hi:return ve;case Ii:return P;case Ar:return V;case ii:return Y;case Fi:return pe}return Ce});function au(X,Ce){return Ce=Ce??s,!!Ce&&(typeof X=="number"||lt.test(X))&&X>-1&&X%1==0&&X<Ce}function aa(X){var Ce=typeof X;return Ce=="string"||Ce=="number"||Ce=="symbol"||Ce=="boolean"?X!=="__proto__":X===null}function Su(X){return!!ue&&ue in X}function ir(X){var Ce=X&&X.constructor,Qe=typeof Ce=="function"&&Ce.prototype||_e;return X===Qe}function Pa(X){return be.call(X)}function ko(X){if(X!=null){try{return ee.call(X)}catch{}try{return X+""}catch{}}return""}function Rl(X,Ce){return X===Ce||X!==X&&Ce!==Ce}var ss=Ic((function(){return arguments})())?Ic:function(X){return oo(X)&&ne.call(X,"callee")&&!Be.call(X,"callee")},fo=Array.isArray;function as(X){return X!=null&&So(X.length)&&!Ua(X)}var Fo=Pt||Ai;function _o(X,Ce){return ic(X,Ce)}function Ua(X){if(!ea(X))return!1;var Ce=iu(X);return Ce==x||Ce==T||Ce==h||Ce==H}function So(X){return typeof X=="number"&&X>-1&&X%1==0&&X<=s}function ea(X){var Ce=typeof X;return X!=null&&(Ce=="object"||Ce=="function")}function oo(X){return X!=null&&typeof X=="object"}var Ka=ft?Pn(ft):Ss;function Nr(X){return as(X)?gl(X):Tc(X)}function Gi(){return[]}function Ai(){return!1}n.exports=_o})(i3,i3.exports)),i3.exports}var FUe=LUe();const FD=eu(FUe);function cr(){var n="/home/runner/work/maputnik/maputnik/src/libs/layerwatcher.ts",e="77d2098743f5a64765174c6e14fc4dc25f900f6c",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/layerwatcher.ts",statementMap:{0:{start:{line:10,column:4},end:{line:11,column:7}},1:{start:{line:12,column:4},end:{line:13,column:7}},2:{start:{line:14,column:4},end:{line:14,column:23}},3:{start:{line:15,column:4},end:{line:15,column:28}},4:{start:{line:16,column:4},end:{line:16,column:90}},5:{start:{line:19,column:28},end:{line:19,column:48}},6:{start:{line:20,column:4},end:{line:22,column:7}},7:{start:{line:21,column:6},end:{line:21,column:88}},8:{start:{line:23,column:4},end:{line:25,column:5}},9:{start:{line:24,column:6},end:{line:24,column:42}},10:{start:{line:26,column:4},end:{line:26,column:48}},11:{start:{line:29,column:33},end:{line:29,column:58}},12:{start:{line:30,column:4},end:{line:43,column:7}},13:{start:{line:31,column:6},end:{line:42,column:9}},14:{start:{line:32,column:32},end:{line:32,column:71}},15:{start:{line:33,column:23},end:{line:33,column:53}},16:{start:{line:34,column:8},end:{line:40,column:11}},17:{start:{line:35,column:10},end:{line:39,column:13}},18:{start:{line:36,column:40},end:{line:36,column:75}},19:{start:{line:37,column:12},end:{line:37,column:71}},20:{start:{line:38,column:12},end:{line:38,column:64}},21:{start:{line:41,column:8},end:{line:41,column:60}},22:{start:{line:44,column:4},end:{line:46,column:5}},23:{start:{line:45,column:6},end:{line:45,column:52}},24:{start:{line:50,column:4},end:{line:50,column:25}},25:{start:{line:53,column:4},end:{line:53,column:30}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:2},end:{line:9,column:3}},loc:{start:{line:9,column:25},end:{line:17,column:3}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:10,column:52},end:{line:10,column:53}},loc:{start:{line:10,column:58},end:{line:11,column:5}},line:10},2:{name:"(anonymous_2)",decl:{start:{line:12,column:62},end:{line:12,column:63}},loc:{start:{line:12,column:68},end:{line:13,column:5}},line:12},3:{name:"(anonymous_3)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:18},end:{line:27,column:3}},line:18},4:{name:"(anonymous_4)",decl:{start:{line:20,column:48},end:{line:20,column:49}},loc:{start:{line:20,column:62},end:{line:22,column:5}},line:20},5:{name:"(anonymous_5)",decl:{start:{line:28,column:2},end:{line:28,column:3}},loc:{start:{line:28,column:32},end:{line:47,column:3}},line:28},6:{name:"(anonymous_6)",decl:{start:{line:30,column:39},end:{line:30,column:40}},loc:{start:{line:30,column:53},end:{line:43,column:5}},line:30},7:{name:"(anonymous_7)",decl:{start:{line:31,column:46},end:{line:31,column:47}},loc:{start:{line:31,column:65},end:{line:42,column:7}},line:31},8:{name:"(anonymous_8)",decl:{start:{line:34,column:58},end:{line:34,column:59}},loc:{start:{line:34,column:71},end:{line:40,column:9}},line:34},9:{name:"(anonymous_9)",decl:{start:{line:35,column:50},end:{line:35,column:51}},loc:{start:{line:35,column:68},end:{line:39,column:11}},line:35},10:{name:"(anonymous_10)",decl:{start:{line:49,column:2},end:{line:49,column:3}},loc:{start:{line:49,column:16},end:{line:51,column:3}},line:49},11:{name:"(anonymous_11)",decl:{start:{line:52,column:2},end:{line:52,column:3}},loc:{start:{line:52,column:21},end:{line:54,column:3}},line:52}},branchMap:{0:{loc:{start:{line:9,column:14},end:{line:9,column:23}},type:"default-arg",locations:[{start:{line:9,column:21},end:{line:9,column:23}}],line:9},1:{loc:{start:{line:10,column:27},end:{line:11,column:6}},type:"binary-expr",locations:[{start:{line:10,column:27},end:{line:10,column:47}},{start:{line:10,column:52},end:{line:11,column:5}}],line:10},2:{loc:{start:{line:12,column:32},end:{line:13,column:6}},type:"binary-expr",locations:[{start:{line:12,column:32},end:{line:12,column:57}},{start:{line:12,column:62},end:{line:13,column:5}}],line:12},3:{loc:{start:{line:23,column:4},end:{line:25,column:5}},type:"if",locations:[{start:{line:23,column:4},end:{line:25,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:23},4:{loc:{start:{line:31,column:7},end:{line:31,column:36}},type:"binary-expr",locations:[{start:{line:31,column:7},end:{line:31,column:30}},{start:{line:31,column:34},end:{line:31,column:36}}],line:31},5:{loc:{start:{line:32,column:32},end:{line:32,column:71}},type:"binary-expr",locations:[{start:{line:32,column:32},end:{line:32,column:65}},{start:{line:32,column:69},end:{line:32,column:71}}],line:32},6:{loc:{start:{line:36,column:40},end:{line:36,column:75}},type:"binary-expr",locations:[{start:{line:36,column:40},end:{line:36,column:69}},{start:{line:36,column:73},end:{line:36,column:75}}],line:36},7:{loc:{start:{line:44,column:4},end:{line:46,column:5}},type:"if",locations:[{start:{line:44,column:4},end:{line:46,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:44}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},b:{0:[0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/layerwatcher.ts"],names:[],mappings:"AAAA,OAAO,cAAc;AACrB,OAAO,aAAa;AAUpB,qBAAqB,aAAa;AAAA,EAChC;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EAEA,YAAY,OAA4B,CAAC,GAAG;AAC1C,SAAK,kBAAkB,KAAK,oBAAoB,MAAM;AAAA,IAAC;AACvD,SAAK,uBAAuB,KAAK,yBAAyB,MAAM;AAAA,IAAC;AAEjE,SAAK,WAAW,CAAC;AACjB,SAAK,gBAAgB,CAAC;AAKtB,SAAK,oCAAoC,SAAS,KAAK,0BAA0B,GAAI;AAAA,EACvF;AAAA,EAEA,WAAW,KAAU;AACnB,UAAM,kBAAkB,EAAE,GAAG,KAAK,SAAS;AAE3C,WAAO,KAAK,IAAI,MAAM,YAAY,EAAE,QAAQ,cAAY;AAGtD,WAAK,SAAS,QAAQ,IAAI,IAAI,MAAM,aAAa,QAAQ,EAAE,QAAQ;AAAA,IACrE,CAAC;AAED,QAAG,CAAC,QAAQ,iBAAiB,KAAK,QAAQ,GAAG;AAC3C,WAAK,gBAAgB,KAAK,QAAQ;AAAA,IACpC;AAEA,SAAK,kCAAkC,GAAG;AAAA,EAC5C;AAAA,EAEA,yBAAyB,KAAU;AACjC,UAAM,uBAAuB,EAAE,GAAG,KAAK,cAAc;AAErD,WAAO,KAAK,KAAK,QAAQ,EAAE,QAAQ,cAAY;AAC7C,OAAC,KAAK,SAAS,QAAQ,KAAK,CAAC,GAAG,QAAQ,mBAAiB;AACvD,cAAM,kBAAkB,KAAK,cAAc,aAAa,KAAK,CAAC;AAC9D,cAAM,SAAS,EAAE,aAAa,cAAc;AAC5C,YAAI,oBAAoB,UAAU,MAAa,EAAE,QAAQ,aAAW;AAClE,iBAAO,KAAK,QAAQ,UAAU,EAAE,QAAQ,kBAAgB;AACtD,kBAAM,sBAAsB,gBAAgB,YAAY,KAAK,CAAC;AAC9D,gCAAoB,QAAQ,WAAW,YAAY,CAAC,IAAI,CAAC;AACzD,4BAAgB,YAAY,IAAI;AAAA,UAClC,CAAC;AAAA,QACH,CAAC;AAED,aAAK,cAAc,aAAa,IAAI;AAAA,MACtC,CAAC;AAAA,IACH,CAAC;AAED,QAAG,CAAC,QAAQ,sBAAsB,KAAK,aAAa,GAAG;AACrD,WAAK,qBAAqB,KAAK,aAAa;AAAA,IAC9C;AAAA,EAEF;AAAA;AAAA,EAGA,IAAI,UAAU;AACZ,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,IAAI,eAAe;AACjB,WAAO,KAAK;AAAA,EACd;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"77d2098743f5a64765174c6e14fc4dc25f900f6c"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return cr=function(){return s},s}cr();class zUe{onSourcesChange;onVectorLayersChange;throttledAnalyzeVectorLayerFields;_sources;_vectorLayers;constructor(e=(cr().b[0][0]++,{})){cr().f[0]++,cr().s[0]++,this.onSourcesChange=(cr().b[1][0]++,e.onSourcesChange||(cr().b[1][1]++,()=>{cr().f[1]++})),cr().s[1]++,this.onVectorLayersChange=(cr().b[2][0]++,e.onVectorLayersChange||(cr().b[2][1]++,()=>{cr().f[2]++})),cr().s[2]++,this._sources={},cr().s[3]++,this._vectorLayers={},cr().s[4]++,this.throttledAnalyzeVectorLayerFields=KUe(this.analyzeVectorLayerFields,5e3)}analyzeMap(e){cr().f[3]++;const t=(cr().s[5]++,{...this._sources});cr().s[6]++,Object.keys(e.style.sourceCaches).forEach(i=>{cr().f[4]++,cr().s[7]++,this._sources[i]=e.style.sourceCaches[i]._source.vectorLayerIds}),cr().s[8]++,FD(t,this._sources)?cr().b[3][1]++:(cr().b[3][0]++,cr().s[9]++,this.onSourcesChange(this._sources)),cr().s[10]++,this.throttledAnalyzeVectorLayerFields(e)}analyzeVectorLayerFields(e){cr().f[5]++;const t=(cr().s[11]++,{...this._vectorLayers});cr().s[12]++,Object.keys(this._sources).forEach(i=>{cr().f[6]++,cr().s[13]++,(cr().b[4][0]++,this._sources[i]||(cr().b[4][1]++,[])).forEach(r=>{cr().f[7]++;const o=(cr().s[14]++,cr().b[5][0]++,this._vectorLayers[r]||(cr().b[5][1]++,{})),s=(cr().s[15]++,{sourceLayer:r});cr().s[16]++,e.querySourceFeatures(i,s).forEach(a=>{cr().f[8]++,cr().s[17]++,Object.keys(a.properties).forEach(c=>{cr().f[9]++;const h=(cr().s[18]++,cr().b[6][0]++,o[c]||(cr().b[6][1]++,{}));cr().s[19]++,h[a.properties[c]]={},cr().s[20]++,o[c]=h})}),cr().s[21]++,this._vectorLayers[r]=o})}),cr().s[22]++,FD(t,this._vectorLayers)?cr().b[7][1]++:(cr().b[7][0]++,cr().s[23]++,this.onVectorLayersChange(this._vectorLayers))}get sources(){return cr().f[10]++,cr().s[24]++,this._sources}get vectorLayers(){return cr().f[11]++,cr().s[25]++,this._vectorLayers}}function fe(){var n="/home/runner/work/maputnik/maputnik/src/components/App.tsx",e="3ada5d61e06df3b0198ab7e31ce0b9225ca7364f",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/App.tsx",statementMap:{0:{start:{line:36,column:0},end:{line:36,column:30}},1:{start:{line:38,column:29},end:{line:38,column:60}},2:{start:{line:39,column:26},end:{line:39,column:54}},3:{start:{line:40,column:31},end:{line:40,column:64}},4:{start:{line:41,column:28},end:{line:41,column:58}},5:{start:{line:42,column:2},end:{line:59,column:3}},6:{start:{line:43,column:24},end:{line:43,column:95}},7:{start:{line:44,column:4},end:{line:46,column:5}},8:{start:{line:45,column:6},end:{line:45,column:47}},9:{start:{line:47,column:9},end:{line:59,column:3}},10:{start:{line:48,column:24},end:{line:48,column:96}},11:{start:{line:49,column:4},end:{line:51,column:5}},12:{start:{line:50,column:6},end:{line:50,column:47}},13:{start:{line:52,column:9},end:{line:59,column:3}},14:{start:{line:53,column:24},end:{line:53,column:93}},15:{start:{line:54,column:4},end:{line:56,column:5}},16:{start:{line:55,column:6},end:{line:55,column:47}},17:{start:{line:58,column:4},end:{line:58,column:15}},18:{start:{line:62,column:2},end:{line:71,column:4}},19:{start:{line:75,column:15},end:{line:75,column:19}},20:{start:{line:78,column:4},end:{line:78,column:17}},21:{start:{line:79,column:4},end:{line:79,column:45}},22:{start:{line:80,column:4},end:{line:80,column:38}},23:{start:{line:81,column:4},end:{line:116,column:6}},24:{start:{line:117,column:4},end:{line:119,column:7}},25:{start:{line:118,column:35},end:{line:118,column:69}},26:{start:{line:121,column:31},end:{line:194,column:3}},27:{start:{line:122,column:22},end:{line:179,column:5}},28:{start:{line:126,column:10},end:{line:126,column:40}},29:{start:{line:132,column:10},end:{line:132,column:35}},30:{start:{line:138,column:10},end:{line:138,column:37}},31:{start:{line:144,column:10},end:{line:144,column:38}},32:{start:{line:150,column:10},end:{line:150,column:39}},33:{start:{line:156,column:10},end:{line:156,column:42}},34:{start:{line:162,column:10},end:{line:164,column:12}},35:{start:{line:170,column:10},end:{line:170,column:63}},36:{start:{line:176,column:10},end:{line:176,column:36}},37:{start:{line:180,column:4},end:{line:193,column:7}},38:{start:{line:181,column:6},end:{line:192,column:7}},39:{start:{line:182,column:8},end:{line:182,column:24}},40:{start:{line:183,column:8},end:{line:183,column:30}},41:{start:{line:184,column:13},end:{line:192,column:7}},42:{start:{line:185,column:25},end:{line:187,column:10}},43:{start:{line:186,column:10},end:{line:186,column:41}},44:{start:{line:188,column:8},end:{line:191,column:9}},45:{start:{line:189,column:10},end:{line:189,column:44}},46:{start:{line:190,column:10},end:{line:190,column:29}},47:{start:{line:195,column:19},end:{line:213,column:3}},48:{start:{line:196,column:4},end:{line:212,column:5}},49:{start:{line:197,column:6},end:{line:203,column:7}},50:{start:{line:198,column:8},end:{line:198,column:27}},51:{start:{line:199,column:8},end:{line:199,column:22}},52:{start:{line:200,column:13},end:{line:203,column:7}},53:{start:{line:201,column:8},end:{line:201,column:27}},54:{start:{line:202,column:8},end:{line:202,column:22}},55:{start:{line:205,column:6},end:{line:211,column:7}},56:{start:{line:206,column:8},end:{line:206,column:27}},57:{start:{line:207,column:8},end:{line:207,column:22}},58:{start:{line:208,column:13},end:{line:211,column:7}},59:{start:{line:209,column:8},end:{line:209,column:27}},60:{start:{line:210,column:8},end:{line:210,column:22}},61:{start:{line:215,column:4},end:{line:215,column:102}},62:{start:{line:215,column:65},end:{line:215,column:100}},63:{start:{line:216,column:4},end:{line:216,column:60}},64:{start:{line:219,column:4},end:{line:219,column:63}},65:{start:{line:222,column:4},end:{line:222,column:41}},66:{start:{line:225,column:21},end:{line:225,column:55}},67:{start:{line:226,column:24},end:{line:226,column:93}},68:{start:{line:227,column:21},end:{line:227,column:110}},69:{start:{line:228,column:4},end:{line:230,column:7}},70:{start:{line:229,column:6},end:{line:229,column:80}},71:{start:{line:233,column:4},end:{line:235,column:7}},72:{start:{line:234,column:6},end:{line:234,column:80}},73:{start:{line:237,column:29},end:{line:251,column:3}},74:{start:{line:238,column:4},end:{line:242,column:5}},75:{start:{line:239,column:6},end:{line:241,column:9}},76:{start:{line:243,column:25},end:{line:249,column:5}},77:{start:{line:250,column:4},end:{line:250,column:38}},78:{start:{line:252,column:19},end:{line:375,column:3}},79:{start:{line:253,column:4},end:{line:258,column:6}},80:{start:{line:259,column:4},end:{line:261,column:5}},81:{start:{line:260,column:6},end:{line:260,column:71}},82:{start:{line:262,column:4},end:{line:264,column:5}},83:{start:{line:263,column:6},end:{line:263,column:71}},84:{start:{line:265,column:4},end:{line:269,column:5}},85:{start:{line:266,column:6},end:{line:268,column:7}},86:{start:{line:267,column:8},end:{line:267,column:63}},87:{start:{line:270,column:4},end:{line:272,column:5}},88:{start:{line:271,column:6},end:{line:271,column:44}},89:{start:{line:273,column:19},end:{line:273,column:51}},90:{start:{line:274,column:24},end:{line:274,column:26}},91:{start:{line:275,column:4},end:{line:286,column:5}},92:{start:{line:276,column:26},end:{line:276,column:42}},93:{start:{line:277,column:6},end:{line:285,column:9}},94:{start:{line:278,column:8},end:{line:283,column:9}},95:{start:{line:279,column:24},end:{line:281,column:11}},96:{start:{line:282,column:10},end:{line:282,column:34}},97:{start:{line:284,column:8},end:{line:284,column:40}},98:{start:{line:287,column:25},end:{line:338,column:6}},99:{start:{line:288,column:23},end:{line:288,column:109}},100:{start:{line:289,column:6},end:{line:302,column:7}},101:{start:{line:290,column:35},end:{line:290,column:43}},102:{start:{line:291,column:8},end:{line:301,column:10}},103:{start:{line:303,column:33},end:{line:303,column:100}},104:{start:{line:304,column:6},end:{line:317,column:7}},105:{start:{line:305,column:35},end:{line:305,column:53}},106:{start:{line:306,column:8},end:{line:316,column:10}},107:{start:{line:318,column:25},end:{line:318,column:88}},108:{start:{line:319,column:6},end:{line:337,column:7}},109:{start:{line:320,column:52},end:{line:320,column:62}},110:{start:{line:321,column:20},end:{line:321,column:78}},111:{start:{line:322,column:8},end:{line:332,column:10}},112:{start:{line:334,column:8},end:{line:336,column:10}},113:{start:{line:339,column:24},end:{line:339,column:30}},114:{start:{line:340,column:4},end:{line:354,column:5}},115:{start:{line:341,column:6},end:{line:341,column:42}},116:{start:{line:342,column:6},end:{line:353,column:7}},117:{start:{line:343,column:28},end:{line:343,column:33}},118:{start:{line:344,column:8},end:{line:352,column:9}},119:{start:{line:345,column:10},end:{line:351,column:11}},120:{start:{line:346,column:28},end:{line:346,column:49}},121:{start:{line:347,column:30},end:{line:347,column:69}},122:{start:{line:348,column:12},end:{line:348,column:44}},123:{start:{line:350,column:12},end:{line:350,column:46}},124:{start:{line:355,column:4},end:{line:357,column:5}},125:{start:{line:356,column:6},end:{line:356,column:40}},126:{start:{line:358,column:4},end:{line:360,column:5}},127:{start:{line:359,column:6},end:{line:359,column:40}},128:{start:{line:361,column:4},end:{line:363,column:5}},129:{start:{line:362,column:6},end:{line:362,column:47}},130:{start:{line:364,column:4},end:{line:366,column:5}},131:{start:{line:365,column:6},end:{line:365,column:31}},132:{start:{line:367,column:4},end:{line:374,column:7}},133:{start:{line:372,column:6},end:{line:372,column:26}},134:{start:{line:373,column:6},end:{line:373,column:27}},135:{start:{line:376,column:11},end:{line:383,column:3}},136:{start:{line:377,column:24},end:{line:377,column:49}},137:{start:{line:378,column:21},end:{line:378,column:67}},138:{start:{line:379,column:4},end:{line:379,column:61}},139:{start:{line:380,column:4},end:{line:382,column:7}},140:{start:{line:384,column:11},end:{line:391,column:3}},141:{start:{line:385,column:24},end:{line:385,column:49}},142:{start:{line:386,column:21},end:{line:386,column:67}},143:{start:{line:387,column:4},end:{line:387,column:61}},144:{start:{line:388,column:4},end:{line:390,column:7}},145:{start:{line:392,column:16},end:{line:406,column:3}},146:{start:{line:393,column:33},end:{line:393,column:37}},147:{start:{line:394,column:17},end:{line:394,column:43}},148:{start:{line:395,column:4},end:{line:395,column:53}},149:{start:{line:396,column:4},end:{line:396,column:53}},150:{start:{line:397,column:4},end:{line:397,column:38}},151:{start:{line:397,column:31},end:{line:397,column:38}},152:{start:{line:398,column:4},end:{line:402,column:5}},153:{start:{line:399,column:6},end:{line:401,column:9}},154:{start:{line:403,column:4},end:{line:403,column:29}},155:{start:{line:404,column:4},end:{line:404,column:49}},156:{start:{line:405,column:4},end:{line:405,column:32}},157:{start:{line:407,column:19},end:{line:413,column:3}},158:{start:{line:408,column:25},end:{line:411,column:5}},159:{start:{line:412,column:4},end:{line:412,column:38}},160:{start:{line:414,column:19},end:{line:419,column:3}},161:{start:{line:415,column:19},end:{line:415,column:45}},162:{start:{line:416,column:28},end:{line:416,column:43}},163:{start:{line:417,column:4},end:{line:417,column:37}},164:{start:{line:418,column:4},end:{line:418,column:41}},165:{start:{line:420,column:16},end:{line:427,column:3}},166:{start:{line:421,column:19},end:{line:421,column:45}},167:{start:{line:422,column:26},end:{line:422,column:41}},168:{start:{line:423,column:24},end:{line:423,column:55}},169:{start:{line:424,column:4},end:{line:424,column:46}},170:{start:{line:425,column:4},end:{line:425,column:48}},171:{start:{line:426,column:4},end:{line:426,column:39}},172:{start:{line:428,column:28},end:{line:437,column:3}},173:{start:{line:429,column:19},end:{line:429,column:45}},174:{start:{line:430,column:26},end:{line:430,column:41}},175:{start:{line:431,column:18},end:{line:431,column:45}},176:{start:{line:432,column:26},end:{line:432,column:70}},177:{start:{line:433,column:4},end:{line:433,column:88}},178:{start:{line:434,column:4},end:{line:434,column:33}},179:{start:{line:435,column:4},end:{line:435,column:33}},180:{start:{line:436,column:4},end:{line:436,column:39}},181:{start:{line:438,column:20},end:{line:445,column:3}},182:{start:{line:439,column:26},end:{line:439,column:61}},183:{start:{line:440,column:4},end:{line:443,column:6}},184:{start:{line:444,column:4},end:{line:444,column:39}},185:{start:{line:446,column:19},end:{line:450,column:3}},186:{start:{line:447,column:26},end:{line:447,column:61}},187:{start:{line:448,column:4},end:{line:448,column:33}},188:{start:{line:449,column:4},end:{line:449,column:39}},189:{start:{line:451,column:16},end:{line:455,column:3}},190:{start:{line:452,column:4},end:{line:454,column:27}},191:{start:{line:456,column:21},end:{line:470,column:3}},192:{start:{line:457,column:21},end:{line:457,column:44}},193:{start:{line:458,column:4},end:{line:469,column:5}},194:{start:{line:459,column:27},end:{line:465,column:7}},195:{start:{line:466,column:6},end:{line:466,column:26}},196:{start:{line:468,column:6},end:{line:468,column:22}},197:{start:{line:471,column:14},end:{line:475,column:3}},198:{start:{line:472,column:4},end:{line:472,column:34}},199:{start:{line:473,column:4},end:{line:473,column:47}},200:{start:{line:474,column:4},end:{line:474,column:34}},201:{start:{line:477,column:23},end:{line:477,column:25}},202:{start:{line:478,column:4},end:{line:517,column:5}},203:{start:{line:479,column:21},end:{line:479,column:53}},204:{start:{line:480,column:6},end:{line:516,column:7}},205:{start:{line:481,column:8},end:{line:481,column:93}},206:{start:{line:482,column:8},end:{line:484,column:9}},207:{start:{line:483,column:10},end:{line:483,column:38}},208:{start:{line:486,column:8},end:{line:489,column:10}},209:{start:{line:490,column:18},end:{line:490,column:28}},210:{start:{line:491,column:8},end:{line:495,column:9}},211:{start:{line:492,column:10},end:{line:492,column:62}},212:{start:{line:494,column:10},end:{line:494,column:63}},213:{start:{line:496,column:32},end:{line:503,column:9}},214:{start:{line:497,column:10},end:{line:499,column:11}},215:{start:{line:498,column:12},end:{line:498,column:19}},216:{start:{line:500,column:10},end:{line:502,column:11}},217:{start:{line:501,column:12},end:{line:501,column:50}},218:{start:{line:504,column:8},end:{line:515,column:9}},219:{start:{line:505,column:10},end:{line:512,column:11}},220:{start:{line:506,column:25},end:{line:506,column:77}},221:{start:{line:507,column:12},end:{line:507,column:34}},222:{start:{line:509,column:29},end:{line:509,column:63}},223:{start:{line:510,column:25},end:{line:510,column:46}},224:{start:{line:511,column:12},end:{line:511,column:34}},225:{start:{line:514,column:10},end:{line:514,column:78}},226:{start:{line:518,column:4},end:{line:523,column:5}},227:{start:{line:519,column:6},end:{line:519,column:51}},228:{start:{line:520,column:6},end:{line:522,column:9}},229:{start:{line:526,column:21},end:{line:526,column:55}},230:{start:{line:527,column:4},end:{line:527,column:53}},231:{start:{line:529,column:16},end:{line:533,column:3}},232:{start:{line:530,column:4},end:{line:532,column:7}},233:{start:{line:535,column:40},end:{line:535,column:50}},234:{start:{line:536,column:21},end:{line:547,column:5}},235:{start:{line:539,column:8},end:{line:541,column:11}},236:{start:{line:544,column:8},end:{line:544,column:44}},237:{start:{line:545,column:8},end:{line:545,column:28}},238:{start:{line:548,column:21},end:{line:548,column:40}},239:{start:{line:550,column:4},end:{line:572,column:5}},240:{start:{line:551,column:6},end:{line:559,column:8}},241:{start:{line:557,column:38},end:{line:557,column:66}},242:{start:{line:561,column:6},end:{line:571,column:8}},243:{start:{line:574,column:4},end:{line:576,column:5}},244:{start:{line:575,column:6},end:{line:575,column:63}},245:{start:{line:577,column:25},end:{line:577,column:27}},246:{start:{line:578,column:4},end:{line:580,column:5}},247:{start:{line:579,column:6},end:{line:579,column:52}},248:{start:{line:581,column:4},end:{line:581,column:160}},249:{start:{line:583,column:18},end:{line:601,column:3}},250:{start:{line:584,column:43},end:{line:584,column:53}},251:{start:{line:585,column:35},end:{line:585,column:45}},252:{start:{line:586,column:16},end:{line:586,column:38}},253:{start:{line:587,column:20},end:{line:587,column:50}},254:{start:{line:588,column:4},end:{line:588,column:70}},255:{start:{line:589,column:23},end:{line:589,column:122}},256:{start:{line:589,column:66},end:{line:589,column:91}},257:{start:{line:589,column:109},end:{line:589,column:121}},258:{start:{line:590,column:4},end:{line:594,column:5}},259:{start:{line:591,column:6},end:{line:591,column:58}},260:{start:{line:593,column:6},end:{line:593,column:39}},261:{start:{line:595,column:4},end:{line:599,column:5}},262:{start:{line:596,column:6},end:{line:596,column:38}},263:{start:{line:597,column:11},end:{line:599,column:5}},264:{start:{line:598,column:6},end:{line:598,column:46}},265:{start:{line:600,column:4},end:{line:600,column:71}},266:{start:{line:602,column:27},end:{line:647,column:3}},267:{start:{line:603,column:16},end:{line:603,column:38}},268:{start:{line:604,column:23},end:{line:604,column:52}},269:{start:{line:605,column:4},end:{line:617,column:5}},270:{start:{line:606,column:21},end:{line:606,column:42}},271:{start:{line:607,column:23},end:{line:607,column:25}},272:{start:{line:608,column:6},end:{line:610,column:9}},273:{start:{line:609,column:8},end:{line:609,column:35}},274:{start:{line:611,column:6},end:{line:616,column:9}},275:{start:{line:618,column:17},end:{line:618,column:45}},276:{start:{line:619,column:4},end:{line:621,column:5}},277:{start:{line:620,column:6},end:{line:620,column:29}},278:{start:{line:622,column:17},end:{line:622,column:46}},279:{start:{line:623,column:4},end:{line:646,column:5}},280:{start:{line:624,column:6},end:{line:645,column:7}},281:{start:{line:625,column:22},end:{line:625,column:37}},282:{start:{line:626,column:46},end:{line:629,column:9}},283:{start:{line:630,column:20},end:{line:630,column:24}},284:{start:{line:631,column:8},end:{line:636,column:9}},285:{start:{line:632,column:33},end:{line:632,column:63}},286:{start:{line:633,column:10},end:{line:635,column:11}},287:{start:{line:634,column:12},end:{line:634,column:26}},288:{start:{line:637,column:8},end:{line:642,column:9}},289:{start:{line:638,column:10},end:{line:641,column:13}},290:{start:{line:644,column:8},end:{line:644,column:26}},291:{start:{line:648,column:18},end:{line:653,column:3}},292:{start:{line:649,column:4},end:{line:652,column:27}},293:{start:{line:655,column:4},end:{line:660,column:27}},294:{start:{line:663,column:4},end:{line:663,column:60}},295:{start:{line:665,column:20},end:{line:667,column:3}},296:{start:{line:666,column:4},end:{line:666,column:34}},297:{start:{line:668,column:28},end:{line:675,column:3}},298:{start:{line:669,column:4},end:{line:674,column:7}},299:{start:{line:676,column:28},end:{line:683,column:3}},300:{start:{line:677,column:4},end:{line:682,column:7}},301:{start:{line:685,column:19},end:{line:685,column:51}},302:{start:{line:686,column:26},end:{line:686,column:92}},303:{start:{line:687,column:36},end:{line:700,column:5}},304:{start:{line:698,column:34},end:{line:698,column:57}},305:{start:{line:701,column:23},end:{line:708,column:14}},306:{start:{line:705,column:30},end:{line:705,column:57}},307:{start:{line:706,column:23},end:{line:706,column:57}},308:{start:{line:709,column:38},end:{line:723,column:5}},309:{start:{line:724,column:24},end:{line:743,column:14}},310:{start:{line:744,column:24},end:{line:754,column:14}},311:{start:{line:755,column:35},end:{line:824,column:8}},312:{start:{line:765,column:30},end:{line:765,column:55}},313:{start:{line:773,column:30},end:{line:773,column:59}},314:{start:{line:783,column:30},end:{line:783,column:58}},315:{start:{line:792,column:30},end:{line:792,column:56}},316:{start:{line:802,column:30},end:{line:802,column:54}},317:{start:{line:812,column:30},end:{line:812,column:57}},318:{start:{line:821,column:30},end:{line:821,column:61}},319:{start:{line:825,column:4},end:{line:836,column:6}}},fnMap:{0:{name:"setFetchAccessToken",decl:{start:{line:37,column:9},end:{line:37,column:28}},loc:{start:{line:37,column:44},end:{line:60,column:1}},line:37},1:{name:"updateRootSpec",decl:{start:{line:61,column:9},end:{line:61,column:23}},loc:{start:{line:61,column:52},end:{line:72,column:1}},line:61},2:{name:"(anonymous_2)",decl:{start:{line:77,column:2},end:{line:77,column:3}},loc:{start:{line:77,column:21},end:{line:120,column:3}},line:77},3:{name:"(anonymous_3)",decl:{start:{line:118,column:28},end:{line:118,column:29}},loc:{start:{line:118,column:35},end:{line:118,column:69}},line:118},4:{name:"(anonymous_4)",decl:{start:{line:121,column:31},end:{line:121,column:32}},loc:{start:{line:121,column:37},end:{line:194,column:3}},line:121},5:{name:"(anonymous_5)",decl:{start:{line:125,column:17},end:{line:125,column:18}},loc:{start:{line:125,column:23},end:{line:127,column:9}},line:125},6:{name:"(anonymous_6)",decl:{start:{line:131,column:17},end:{line:131,column:18}},loc:{start:{line:131,column:23},end:{line:133,column:9}},line:131},7:{name:"(anonymous_7)",decl:{start:{line:137,column:17},end:{line:137,column:18}},loc:{start:{line:137,column:23},end:{line:139,column:9}},line:137},8:{name:"(anonymous_8)",decl:{start:{line:143,column:17},end:{line:143,column:18}},loc:{start:{line:143,column:23},end:{line:145,column:9}},line:143},9:{name:"(anonymous_9)",decl:{start:{line:149,column:17},end:{line:149,column:18}},loc:{start:{line:149,column:23},end:{line:151,column:9}},line:149},10:{name:"(anonymous_10)",decl:{start:{line:155,column:17},end:{line:155,column:18}},loc:{start:{line:155,column:23},end:{line:157,column:9}},line:155},11:{name:"(anonymous_11)",decl:{start:{line:161,column:17},end:{line:161,column:18}},loc:{start:{line:161,column:23},end:{line:165,column:9}},line:161},12:{name:"(anonymous_12)",decl:{start:{line:169,column:17},end:{line:169,column:18}},loc:{start:{line:169,column:23},end:{line:171,column:9}},line:169},13:{name:"(anonymous_13)",decl:{start:{line:175,column:17},end:{line:175,column:18}},loc:{start:{line:175,column:23},end:{line:177,column:9}},line:175},14:{name:"(anonymous_14)",decl:{start:{line:180,column:44},end:{line:180,column:45}},loc:{start:{line:180,column:51},end:{line:193,column:5}},line:180},15:{name:"(anonymous_15)",decl:{start:{line:185,column:40},end:{line:185,column:41}},loc:{start:{line:185,column:55},end:{line:187,column:9}},line:185},16:{name:"(anonymous_16)",decl:{start:{line:195,column:19},end:{line:195,column:20}},loc:{start:{line:195,column:26},end:{line:213,column:3}},line:195},17:{name:"(anonymous_17)",decl:{start:{line:214,column:2},end:{line:214,column:3}},loc:{start:{line:214,column:28},end:{line:217,column:3}},line:214},18:{name:"(anonymous_18)",decl:{start:{line:215,column:45},end:{line:215,column:46}},loc:{start:{line:215,column:65},end:{line:215,column:100}},line:215},19:{name:"(anonymous_19)",decl:{start:{line:218,column:2},end:{line:218,column:3}},loc:{start:{line:218,column:25},end:{line:220,column:3}},line:218},20:{name:"(anonymous_20)",decl:{start:{line:221,column:2},end:{line:221,column:3}},loc:{start:{line:221,column:27},end:{line:223,column:3}},line:221},21:{name:"(anonymous_21)",decl:{start:{line:224,column:2},end:{line:224,column:3}},loc:{start:{line:224,column:27},end:{line:231,column:3}},line:224},22:{name:"(anonymous_22)",decl:{start:{line:228,column:37},end:{line:228,column:38}},loc:{start:{line:228,column:48},end:{line:230,column:5}},line:228},23:{name:"(anonymous_23)",decl:{start:{line:232,column:2},end:{line:232,column:3}},loc:{start:{line:232,column:23},end:{line:236,column:3}},line:232},24:{name:"(anonymous_24)",decl:{start:{line:233,column:36},end:{line:233,column:37}},loc:{start:{line:233,column:47},end:{line:235,column:5}},line:233},25:{name:"(anonymous_25)",decl:{start:{line:237,column:29},end:{line:237,column:30}},loc:{start:{line:237,column:50},end:{line:251,column:3}},line:237},26:{name:"(anonymous_26)",decl:{start:{line:252,column:19},end:{line:252,column:20}},loc:{start:{line:252,column:44},end:{line:375,column:3}},line:252},27:{name:"(anonymous_27)",decl:{start:{line:277,column:30},end:{line:277,column:31}},loc:{start:{line:277,column:48},end:{line:285,column:7}},line:277},28:{name:"(anonymous_28)",decl:{start:{line:287,column:56},end:{line:287,column:57}},loc:{start:{line:287,column:67},end:{line:338,column:5}},line:287},29:{name:"(anonymous_29)",decl:{start:{line:371,column:7},end:{line:371,column:8}},loc:{start:{line:371,column:13},end:{line:374,column:5}},line:371},30:{name:"(anonymous_30)",decl:{start:{line:376,column:11},end:{line:376,column:12}},loc:{start:{line:376,column:17},end:{line:383,column:3}},line:376},31:{name:"(anonymous_31)",decl:{start:{line:384,column:11},end:{line:384,column:12}},loc:{start:{line:384,column:17},end:{line:391,column:3}},line:384},32:{name:"(anonymous_32)",decl:{start:{line:392,column:16},end:{line:392,column:17}},loc:{start:{line:392,column:26},end:{line:406,column:3}},line:392},33:{name:"(anonymous_33)",decl:{start:{line:407,column:19},end:{line:407,column:20}},loc:{start:{line:407,column:38},end:{line:413,column:3}},line:407},34:{name:"(anonymous_34)",decl:{start:{line:414,column:19},end:{line:414,column:20}},loc:{start:{line:414,column:30},end:{line:419,column:3}},line:414},35:{name:"(anonymous_35)",decl:{start:{line:420,column:16},end:{line:420,column:17}},loc:{start:{line:420,column:27},end:{line:427,column:3}},line:420},36:{name:"(anonymous_36)",decl:{start:{line:428,column:28},end:{line:428,column:29}},loc:{start:{line:428,column:39},end:{line:437,column:3}},line:428},37:{name:"(anonymous_37)",decl:{start:{line:438,column:20},end:{line:438,column:21}},loc:{start:{line:438,column:46},end:{line:445,column:3}},line:438},38:{name:"(anonymous_38)",decl:{start:{line:446,column:19},end:{line:446,column:20}},loc:{start:{line:446,column:37},end:{line:450,column:3}},line:446},39:{name:"(anonymous_39)",decl:{start:{line:451,column:16},end:{line:451,column:17}},loc:{start:{line:451,column:30},end:{line:455,column:3}},line:451},40:{name:"(anonymous_40)",decl:{start:{line:456,column:21},end:{line:456,column:22}},loc:{start:{line:456,column:35},end:{line:470,column:3}},line:456},41:{name:"(anonymous_41)",decl:{start:{line:471,column:14},end:{line:471,column:15}},loc:{start:{line:471,column:40},end:{line:475,column:3}},line:471},42:{name:"(anonymous_42)",decl:{start:{line:476,column:2},end:{line:476,column:3}},loc:{start:{line:476,column:23},end:{line:524,column:3}},line:476},43:{name:"(anonymous_43)",decl:{start:{line:496,column:32},end:{line:496,column:33}},loc:{start:{line:496,column:42},end:{line:503,column:9}},line:496},44:{name:"(anonymous_44)",decl:{start:{line:525,column:2},end:{line:525,column:3}},loc:{start:{line:525,column:17},end:{line:528,column:3}},line:525},45:{name:"(anonymous_45)",decl:{start:{line:529,column:16},end:{line:529,column:17}},loc:{start:{line:529,column:29},end:{line:533,column:3}},line:529},46:{name:"(anonymous_46)",decl:{start:{line:534,column:2},end:{line:534,column:3}},loc:{start:{line:534,column:16},end:{line:582,column:3}},line:534},47:{name:"(anonymous_47)",decl:{start:{line:538,column:27},end:{line:538,column:28}},loc:{start:{line:538,column:42},end:{line:542,column:7}},line:538},48:{name:"(anonymous_48)",decl:{start:{line:543,column:20},end:{line:543,column:21}},loc:{start:{line:543,column:27},end:{line:546,column:7}},line:543},49:{name:"(anonymous_49)",decl:{start:{line:557,column:25},end:{line:557,column:26}},loc:{start:{line:557,column:38},end:{line:557,column:66}},line:557},50:{name:"(anonymous_50)",decl:{start:{line:583,column:18},end:{line:583,column:19}},loc:{start:{line:583,column:24},end:{line:601,column:3}},line:583},51:{name:"(anonymous_51)",decl:{start:{line:589,column:50},end:{line:589,column:51}},loc:{start:{line:589,column:66},end:{line:589,column:91}},line:589},52:{name:"(anonymous_52)",decl:{start:{line:589,column:100},end:{line:589,column:101}},loc:{start:{line:589,column:109},end:{line:589,column:121}},line:589},53:{name:"(anonymous_53)",decl:{start:{line:602,column:27},end:{line:602,column:28}},loc:{start:{line:602,column:41},end:{line:647,column:3}},line:602},54:{name:"(anonymous_54)",decl:{start:{line:608,column:21},end:{line:608,column:22}},loc:{start:{line:608,column:36},end:{line:610,column:7}},line:608},55:{name:"(anonymous_55)",decl:{start:{line:648,column:18},end:{line:648,column:19}},loc:{start:{line:648,column:29},end:{line:653,column:3}},line:648},56:{name:"(anonymous_56)",decl:{start:{line:654,column:2},end:{line:654,column:3}},loc:{start:{line:654,column:29},end:{line:661,column:3}},line:654},57:{name:"(anonymous_57)",decl:{start:{line:662,column:2},end:{line:662,column:3}},loc:{start:{line:662,column:25},end:{line:664,column:3}},line:662},58:{name:"(anonymous_58)",decl:{start:{line:665,column:20},end:{line:665,column:21}},loc:{start:{line:665,column:36},end:{line:667,column:3}},line:665},59:{name:"(anonymous_59)",decl:{start:{line:668,column:28},end:{line:668,column:29}},loc:{start:{line:668,column:44},end:{line:675,column:3}},line:668},60:{name:"(anonymous_60)",decl:{start:{line:676,column:28},end:{line:676,column:29}},loc:{start:{line:676,column:44},end:{line:683,column:3}},line:676},61:{name:"(anonymous_61)",decl:{start:{line:684,column:2},end:{line:684,column:3}},loc:{start:{line:684,column:11},end:{line:837,column:3}},line:684},62:{name:"(anonymous_62)",decl:{start:{line:698,column:23},end:{line:698,column:24}},loc:{start:{line:698,column:34},end:{line:698,column:57}},line:698},63:{name:"(anonymous_63)",decl:{start:{line:705,column:18},end:{line:705,column:19}},loc:{start:{line:705,column:30},end:{line:705,column:57}},line:705},64:{name:"(anonymous_64)",decl:{start:{line:706,column:17},end:{line:706,column:18}},loc:{start:{line:706,column:23},end:{line:706,column:57}},line:706},65:{name:"(anonymous_65)",decl:{start:{line:765,column:24},end:{line:765,column:25}},loc:{start:{line:765,column:30},end:{line:765,column:55}},line:765},66:{name:"(anonymous_66)",decl:{start:{line:773,column:24},end:{line:773,column:25}},loc:{start:{line:773,column:30},end:{line:773,column:59}},line:773},67:{name:"(anonymous_67)",decl:{start:{line:783,column:24},end:{line:783,column:25}},loc:{start:{line:783,column:30},end:{line:783,column:58}},line:783},68:{name:"(anonymous_68)",decl:{start:{line:792,column:24},end:{line:792,column:25}},loc:{start:{line:792,column:30},end:{line:792,column:56}},line:792},69:{name:"(anonymous_69)",decl:{start:{line:802,column:24},end:{line:802,column:25}},loc:{start:{line:802,column:30},end:{line:802,column:54}},line:802},70:{name:"(anonymous_70)",decl:{start:{line:812,column:24},end:{line:812,column:25}},loc:{start:{line:812,column:30},end:{line:812,column:57}},line:812},71:{name:"(anonymous_71)",decl:{start:{line:821,column:24},end:{line:821,column:25}},loc:{start:{line:821,column:30},end:{line:821,column:61}},line:821}},branchMap:{0:{loc:{start:{line:42,column:2},end:{line:59,column:3}},type:"if",locations:[{start:{line:42,column:2},end:{line:59,column:3}},{start:{line:47,column:9},end:{line:59,column:3}}],line:42},1:{loc:{start:{line:42,column:6},end:{line:42,column:43}},type:"binary-expr",locations:[{start:{line:42,column:6},end:{line:42,column:24}},{start:{line:42,column:28},end:{line:42,column:43}}],line:42},2:{loc:{start:{line:44,column:4},end:{line:46,column:5}},type:"if",locations:[{start:{line:44,column:4},end:{line:46,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:44},3:{loc:{start:{line:47,column:9},end:{line:59,column:3}},type:"if",locations:[{start:{line:47,column:9},end:{line:59,column:3}},{start:{line:52,column:9},end:{line:59,column:3}}],line:47},4:{loc:{start:{line:49,column:4},end:{line:51,column:5}},type:"if",locations:[{start:{line:49,column:4},end:{line:51,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:49},5:{loc:{start:{line:52,column:9},end:{line:59,column:3}},type:"if",locations:[{start:{line:52,column:9},end:{line:59,column:3}},{start:{line:57,column:9},end:{line:59,column:3}}],line:52},6:{loc:{start:{line:54,column:4},end:{line:56,column:5}},type:"if",locations:[{start:{line:54,column:4},end:{line:56,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:54},7:{loc:{start:{line:163,column:12},end:{line:163,column:61}},type:"cond-expr",locations:[{start:{line:163,column:44},end:{line:163,column:53}},{start:{line:163,column:56},end:{line:163,column:61}}],line:163},8:{loc:{start:{line:181,column:6},end:{line:192,column:7}},type:"if",locations:[{start:{line:181,column:6},end:{line:192,column:7}},{start:{line:184,column:13},end:{line:192,column:7}}],line:181},9:{loc:{start:{line:184,column:13},end:{line:192,column:7}},type:"if",locations:[{start:{line:184,column:13},end:{line:192,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:184},10:{loc:{start:{line:184,column:17},end:{line:184,column:88}},type:"binary-expr",locations:[{start:{line:184,column:17},end:{line:184,column:44}},{start:{line:184,column:48},end:{line:184,column:88}}],line:184},11:{loc:{start:{line:188,column:8},end:{line:191,column:9}},type:"if",locations:[{start:{line:188,column:8},end:{line:191,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:188},12:{loc:{start:{line:196,column:4},end:{line:212,column:5}},type:"if",locations:[{start:{line:196,column:4},end:{line:212,column:5}},{start:{line:204,column:11},end:{line:212,column:5}}],line:196},13:{loc:{start:{line:197,column:6},end:{line:203,column:7}},type:"if",locations:[{start:{line:197,column:6},end:{line:203,column:7}},{start:{line:200,column:13},end:{line:203,column:7}}],line:197},14:{loc:{start:{line:197,column:10},end:{line:197,column:53}},type:"binary-expr",locations:[{start:{line:197,column:10},end:{line:197,column:19}},{start:{line:197,column:23},end:{line:197,column:33}},{start:{line:197,column:37},end:{line:197,column:53}}],line:197},15:{loc:{start:{line:200,column:13},end:{line:203,column:7}},type:"if",locations:[{start:{line:200,column:13},end:{line:203,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:200},16:{loc:{start:{line:200,column:17},end:{line:200,column:46}},type:"binary-expr",locations:[{start:{line:200,column:17},end:{line:200,column:26}},{start:{line:200,column:30},end:{line:200,column:46}}],line:200},17:{loc:{start:{line:205,column:6},end:{line:211,column:7}},type:"if",locations:[{start:{line:205,column:6},end:{line:211,column:7}},{start:{line:208,column:13},end:{line:211,column:7}}],line:205},18:{loc:{start:{line:205,column:10},end:{line:205,column:39}},type:"binary-expr",locations:[{start:{line:205,column:10},end:{line:205,column:19}},{start:{line:205,column:23},end:{line:205,column:39}}],line:205},19:{loc:{start:{line:208,column:13},end:{line:211,column:7}},type:"if",locations:[{start:{line:208,column:13},end:{line:211,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:208},20:{loc:{start:{line:208,column:17},end:{line:208,column:46}},type:"binary-expr",locations:[{start:{line:208,column:17},end:{line:208,column:26}},{start:{line:208,column:30},end:{line:208,column:46}}],line:208},21:{loc:{start:{line:225,column:21},end:{line:225,column:55}},type:"binary-expr",locations:[{start:{line:225,column:21},end:{line:225,column:49}},{start:{line:225,column:53},end:{line:225,column:55}}],line:225},22:{loc:{start:{line:226,column:24},end:{line:226,column:93}},type:"binary-expr",locations:[{start:{line:226,column:24},end:{line:226,column:70}},{start:{line:226,column:74},end:{line:226,column:93}}],line:226},23:{loc:{start:{line:227,column:21},end:{line:227,column:110}},type:"cond-expr",locations:[{start:{line:227,column:55},end:{line:227,column:96}},{start:{line:227,column:99},end:{line:227,column:110}}],line:227},24:{loc:{start:{line:238,column:4},end:{line:242,column:5}},type:"if",locations:[{start:{line:238,column:4},end:{line:242,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:238},25:{loc:{start:{line:238,column:8},end:{line:238,column:123}},type:"binary-expr",locations:[{start:{line:238,column:8},end:{line:238,column:40}},{start:{line:238,column:44},end:{line:238,column:123}}],line:238},26:{loc:{start:{line:252,column:30},end:{line:252,column:39}},type:"default-arg",locations:[{start:{line:252,column:37},end:{line:252,column:39}}],line:252},27:{loc:{start:{line:259,column:4},end:{line:261,column:5}},type:"if",locations:[{start:{line:259,column:4},end:{line:261,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:259},28:{loc:{start:{line:259,column:8},end:{line:259,column:62}},type:"binary-expr",locations:[{start:{line:259,column:8},end:{line:259,column:23}},{start:{line:259,column:27},end:{line:259,column:62}}],line:259},29:{loc:{start:{line:262,column:4},end:{line:264,column:5}},type:"if",locations:[{start:{line:262,column:4},end:{line:264,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:262},30:{loc:{start:{line:262,column:8},end:{line:262,column:62}},type:"binary-expr",locations:[{start:{line:262,column:8},end:{line:262,column:23}},{start:{line:262,column:27},end:{line:262,column:62}}],line:262},31:{loc:{start:{line:266,column:6},end:{line:268,column:7}},type:"if",locations:[{start:{line:266,column:6},end:{line:268,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:266},32:{loc:{start:{line:266,column:10},end:{line:266,column:69}},type:"binary-expr",locations:[{start:{line:266,column:10},end:{line:266,column:16}},{start:{line:266,column:20},end:{line:266,column:35}},{start:{line:266,column:39},end:{line:266,column:69}}],line:266},33:{loc:{start:{line:270,column:4},end:{line:272,column:5}},type:"if",locations:[{start:{line:270,column:4},end:{line:272,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:270},34:{loc:{start:{line:273,column:19},end:{line:273,column:51}},type:"binary-expr",locations:[{start:{line:273,column:19},end:{line:273,column:45}},{start:{line:273,column:49},end:{line:273,column:51}}],line:273},35:{loc:{start:{line:275,column:4},end:{line:286,column:5}},type:"if",locations:[{start:{line:275,column:4},end:{line:286,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:275},36:{loc:{start:{line:275,column:8},end:{line:275,column:35}},type:"binary-expr",locations:[{start:{line:275,column:8},end:{line:275,column:16}},{start:{line:275,column:20},end:{line:275,column:35}}],line:275},37:{loc:{start:{line:278,column:8},end:{line:283,column:9}},type:"if",locations:[{start:{line:278,column:8},end:{line:283,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:278},38:{loc:{start:{line:278,column:12},end:{line:278,column:56}},type:"binary-expr",locations:[{start:{line:278,column:12},end:{line:278,column:27}},{start:{line:278,column:31},end:{line:278,column:56}}],line:278},39:{loc:{start:{line:289,column:6},end:{line:302,column:7}},type:"if",locations:[{start:{line:289,column:6},end:{line:302,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:289},40:{loc:{start:{line:304,column:6},end:{line:317,column:7}},type:"if",locations:[{start:{line:304,column:6},end:{line:317,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:304},41:{loc:{start:{line:319,column:6},end:{line:337,column:7}},type:"if",locations:[{start:{line:319,column:6},end:{line:337,column:7}},{start:{line:333,column:13},end:{line:337,column:7}}],line:319},42:{loc:{start:{line:321,column:20},end:{line:321,column:78}},type:"cond-expr",locations:[{start:{line:321,column:40},end:{line:321,column:67}},{start:{line:321,column:70},end:{line:321,column:78}}],line:321},43:{loc:{start:{line:321,column:20},end:{line:321,column:37}},type:"binary-expr",locations:[{start:{line:321,column:20},end:{line:321,column:25}},{start:{line:321,column:29},end:{line:321,column:37}}],line:321},44:{loc:{start:{line:340,column:4},end:{line:354,column:5}},type:"if",locations:[{start:{line:340,column:4},end:{line:354,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:340},45:{loc:{start:{line:344,column:8},end:{line:352,column:9}},type:"if",locations:[{start:{line:344,column:8},end:{line:352,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:344},46:{loc:{start:{line:355,column:4},end:{line:357,column:5}},type:"if",locations:[{start:{line:355,column:4},end:{line:357,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:355},47:{loc:{start:{line:358,column:4},end:{line:360,column:5}},type:"if",locations:[{start:{line:358,column:4},end:{line:360,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:358},48:{loc:{start:{line:361,column:4},end:{line:363,column:5}},type:"if",locations:[{start:{line:361,column:4},end:{line:363,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:361},49:{loc:{start:{line:364,column:4},end:{line:366,column:5}},type:"if",locations:[{start:{line:364,column:4},end:{line:366,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:364},50:{loc:{start:{line:397,column:4},end:{line:397,column:38}},type:"if",locations:[{start:{line:397,column:4},end:{line:397,column:38}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:397},51:{loc:{start:{line:398,column:4},end:{line:402,column:5}},type:"if",locations:[{start:{line:398,column:4},end:{line:402,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:398},52:{loc:{start:{line:432,column:26},end:{line:432,column:70}},type:"cond-expr",locations:[{start:{line:432,column:46},end:{line:432,column:65}},{start:{line:432,column:68},end:{line:432,column:70}}],line:432},53:{loc:{start:{line:433,column:31},end:{line:433,column:87}},type:"cond-expr",locations:[{start:{line:433,column:69},end:{line:433,column:78}},{start:{line:433,column:81},end:{line:433,column:87}}],line:433},54:{loc:{start:{line:457,column:21},end:{line:457,column:44}},type:"binary-expr",locations:[{start:{line:457,column:21},end:{line:457,column:38}},{start:{line:457,column:42},end:{line:457,column:44}}],line:457},55:{loc:{start:{line:458,column:4},end:{line:469,column:5}},type:"if",locations:[{start:{line:458,column:4},end:{line:469,column:5}},{start:{line:467,column:11},end:{line:469,column:5}}],line:458},56:{loc:{start:{line:480,column:6},end:{line:516,column:7}},type:"if",locations:[{start:{line:480,column:6},end:{line:516,column:7}},{start:{line:485,column:13},end:{line:516,column:7}}],line:480},57:{loc:{start:{line:480,column:10},end:{line:480,column:56}},type:"binary-expr",locations:[{start:{line:480,column:10},end:{line:480,column:34}},{start:{line:480,column:38},end:{line:480,column:56}}],line:480},58:{loc:{start:{line:481,column:26},end:{line:481,column:92}},type:"binary-expr",locations:[{start:{line:481,column:26},end:{line:481,column:49}},{start:{line:481,column:53},end:{line:481,column:92}}],line:481},59:{loc:{start:{line:482,column:8},end:{line:484,column:9}},type:"if",locations:[{start:{line:482,column:8},end:{line:484,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:482},60:{loc:{start:{line:497,column:10},end:{line:499,column:11}},type:"if",locations:[{start:{line:497,column:10},end:{line:499,column:11}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:497},61:{loc:{start:{line:505,column:10},end:{line:512,column:11}},type:"if",locations:[{start:{line:505,column:10},end:{line:512,column:11}},{start:{line:508,column:17},end:{line:512,column:11}}],line:505},62:{loc:{start:{line:518,column:4},end:{line:523,column:5}},type:"if",locations:[{start:{line:518,column:4},end:{line:523,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:518},63:{loc:{start:{line:526,column:21},end:{line:526,column:55}},type:"binary-expr",locations:[{start:{line:526,column:21},end:{line:526,column:49}},{start:{line:526,column:53},end:{line:526,column:55}}],line:526},64:{loc:{start:{line:527,column:11},end:{line:527,column:52}},type:"binary-expr",locations:[{start:{line:527,column:11},end:{line:527,column:40}},{start:{line:527,column:44},end:{line:527,column:52}}],line:527},65:{loc:{start:{line:537,column:16},end:{line:537,column:41}},type:"binary-expr",locations:[{start:{line:537,column:16},end:{line:537,column:29}},{start:{line:537,column:33},end:{line:537,column:41}}],line:537},66:{loc:{start:{line:550,column:4},end:{line:572,column:5}},type:"if",locations:[{start:{line:550,column:4},end:{line:572,column:5}},{start:{line:560,column:11},end:{line:572,column:5}}],line:550},67:{loc:{start:{line:574,column:4},end:{line:576,column:5}},type:"if",locations:[{start:{line:574,column:4},end:{line:576,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:574},68:{loc:{start:{line:578,column:4},end:{line:580,column:5}},type:"if",locations:[{start:{line:578,column:4},end:{line:580,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:578},69:{loc:{start:{line:589,column:66},end:{line:589,column:91}},type:"cond-expr",locations:[{start:{line:589,column:81},end:{line:589,column:84}},{start:{line:589,column:87},end:{line:589,column:91}}],line:589},70:{loc:{start:{line:590,column:4},end:{line:594,column:5}},type:"if",locations:[{start:{line:590,column:4},end:{line:594,column:5}},{start:{line:592,column:11},end:{line:594,column:5}}],line:590},71:{loc:{start:{line:595,column:4},end:{line:599,column:5}},type:"if",locations:[{start:{line:595,column:4},end:{line:599,column:5}},{start:{line:597,column:11},end:{line:599,column:5}}],line:595},72:{loc:{start:{line:597,column:11},end:{line:599,column:5}},type:"if",locations:[{start:{line:597,column:11},end:{line:599,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:597},73:{loc:{start:{line:605,column:4},end:{line:617,column:5}},type:"if",locations:[{start:{line:605,column:4},end:{line:617,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:605},74:{loc:{start:{line:605,column:8},end:{line:605,column:39}},type:"binary-expr",locations:[{start:{line:605,column:8},end:{line:605,column:18}},{start:{line:605,column:22},end:{line:605,column:39}}],line:605},75:{loc:{start:{line:619,column:4},end:{line:621,column:5}},type:"if",locations:[{start:{line:619,column:4},end:{line:621,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:619},76:{loc:{start:{line:619,column:8},end:{line:619,column:27}},type:"binary-expr",locations:[{start:{line:619,column:8},end:{line:619,column:12}},{start:{line:619,column:16},end:{line:619,column:27}}],line:619},77:{loc:{start:{line:623,column:4},end:{line:646,column:5}},type:"if",locations:[{start:{line:623,column:4},end:{line:646,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:623},78:{loc:{start:{line:631,column:8},end:{line:636,column:9}},type:"if",locations:[{start:{line:631,column:8},end:{line:636,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:631},79:{loc:{start:{line:633,column:10},end:{line:635,column:11}},type:"if",locations:[{start:{line:633,column:10},end:{line:635,column:11}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:633},80:{loc:{start:{line:637,column:8},end:{line:642,column:9}},type:"if",locations:[{start:{line:637,column:8},end:{line:642,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:637},81:{loc:{start:{line:685,column:19},end:{line:685,column:51}},type:"binary-expr",locations:[{start:{line:685,column:19},end:{line:685,column:45}},{start:{line:685,column:49},end:{line:685,column:51}}],line:685},82:{loc:{start:{line:686,column:26},end:{line:686,column:92}},type:"cond-expr",locations:[{start:{line:686,column:46},end:{line:686,column:83}},{start:{line:686,column:86},end:{line:686,column:92}}],line:686},83:{loc:{start:{line:701,column:23},end:{line:708,column:14}},type:"cond-expr",locations:[{start:{line:701,column:70},end:{line:708,column:5}},{start:{line:708,column:8},end:{line:708,column:14}}],line:701},84:{loc:{start:{line:724,column:24},end:{line:743,column:14}},type:"cond-expr",locations:[{start:{line:724,column:56},end:{line:743,column:5}},{start:{line:743,column:8},end:{line:743,column:14}}],line:724},85:{loc:{start:{line:744,column:24},end:{line:754,column:14}},type:"cond-expr",locations:[{start:{line:744,column:97},end:{line:754,column:5}},{start:{line:754,column:8},end:{line:754,column:14}}],line:744}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0,87:0,88:0,89:0,90:0,91:0,92:0,93:0,94:0,95:0,96:0,97:0,98:0,99:0,100:0,101:0,102:0,103:0,104:0,105:0,106:0,107:0,108:0,109:0,110:0,111:0,112:0,113:0,114:0,115:0,116:0,117:0,118:0,119:0,120:0,121:0,122:0,123:0,124:0,125:0,126:0,127:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:0,136:0,137:0,138:0,139:0,140:0,141:0,142:0,143:0,144:0,145:0,146:0,147:0,148:0,149:0,150:0,151:0,152:0,153:0,154:0,155:0,156:0,157:0,158:0,159:0,160:0,161:0,162:0,163:0,164:0,165:0,166:0,167:0,168:0,169:0,170:0,171:0,172:0,173:0,174:0,175:0,176:0,177:0,178:0,179:0,180:0,181:0,182:0,183:0,184:0,185:0,186:0,187:0,188:0,189:0,190:0,191:0,192:0,193:0,194:0,195:0,196:0,197:0,198:0,199:0,200:0,201:0,202:0,203:0,204:0,205:0,206:0,207:0,208:0,209:0,210:0,211:0,212:0,213:0,214:0,215:0,216:0,217:0,218:0,219:0,220:0,221:0,222:0,223:0,224:0,225:0,226:0,227:0,228:0,229:0,230:0,231:0,232:0,233:0,234:0,235:0,236:0,237:0,238:0,239:0,240:0,241:0,242:0,243:0,244:0,245:0,246:0,247:0,248:0,249:0,250:0,251:0,252:0,253:0,254:0,255:0,256:0,257:0,258:0,259:0,260:0,261:0,262:0,263:0,264:0,265:0,266:0,267:0,268:0,269:0,270:0,271:0,272:0,273:0,274:0,275:0,276:0,277:0,278:0,279:0,280:0,281:0,282:0,283:0,284:0,285:0,286:0,287:0,288:0,289:0,290:0,291:0,292:0,293:0,294:0,295:0,296:0,297:0,298:0,299:0,300:0,301:0,302:0,303:0,304:0,305:0,306:0,307:0,308:0,309:0,310:0,311:0,312:0,313:0,314:0,315:0,316:0,317:0,318:0,319:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0],26:[0],27:[0,0],28:[0,0],29:[0,0],30:[0,0],31:[0,0],32:[0,0,0],33:[0,0],34:[0,0],35:[0,0],36:[0,0],37:[0,0],38:[0,0],39:[0,0],40:[0,0],41:[0,0],42:[0,0],43:[0,0],44:[0,0],45:[0,0],46:[0,0],47:[0,0],48:[0,0],49:[0,0],50:[0,0],51:[0,0],52:[0,0],53:[0,0],54:[0,0],55:[0,0],56:[0,0],57:[0,0],58:[0,0],59:[0,0],60:[0,0],61:[0,0],62:[0,0],63:[0,0],64:[0,0],65:[0,0],66:[0,0],67:[0,0],68:[0,0],69:[0,0],70:[0,0],71:[0,0],72:[0,0],73:[0,0],74:[0,0],75:[0,0],76:[0,0],77:[0,0],78:[0,0],79:[0,0],80:[0,0],81:[0,0],82:[0,0],83:[0,0],84:[0,0],85:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/App.tsx"],names:["shortcut","mapStyle","style"],mappings:"AAurBmB,SAAA,KAwNA,YAxNA;AAvrBnB,OAAO,WAAW;AAClB,OAAO,eAAe;AACtB,OAAO,WAAW;AAClB,OAAO,YAAY;AACnB,OAAO,SAAS;AAChB,SAAQ,aAAY;AACpB,SAAQ,wBAAuB;AAC/B,OAAO,UAAU;AACjB,SAAS,eAAe;AAExB,SAAQ,wBAAuB;AAC/B,OAAO,YAAY;AAEnB,OAAO,mBAAmB;AAC1B,OAAO,mBAAmB;AAC1B,OAAO,gBAAgB;AACvB,OAAO,eAAe;AACtB,OAAO,iBAAiB;AACxB,OAAO,gBAAmC;AAC1C,OAAO,eAAe;AACtB,OAAO,kBAAkB;AAEzB,OAAO,mBAAmB;AAC1B,OAAO,iBAAiB;AACxB,OAAO,kBAAkB;AACzB,OAAO,eAAe;AACtB,OAAO,oBAAoB;AAC3B,OAAO,gBAAgB;AACvB,OAAO,sBAAsB;AAE7B,SAAQ,wBAAwB,8BAA6B;AAC7D,OAAO,WAAW;AAClB,SAAS,cAAc,oBAAoB;AAC3C,SAAS,wBAA0C;AACnD,SAAS,qBAAqB;AAC9B,OAAO,kBAAkB;AACzB,OAAO,YAAY;AACnB,OAAO,aAAa;AAKpB,OAAO,SAAS,OAAO;AAEvB,SAAS,oBAAoB,KAAa,UAA8B;AACtE,QAAM,qBAAqB,IAAI,MAAM,oBAAoB;AACzD,QAAM,kBAAkB,IAAI,MAAM,iBAAiB;AACnD,QAAM,uBAAuB,IAAI,MAAM,sBAAsB;AAC7D,QAAM,oBAAoB,IAAI,MAAM,mBAAmB;AACvD,MAAI,sBAAsB,iBAAiB;AACzC,UAAM,cAAc,MAAM,eAAe,gBAAgB,UAAU,EAAC,eAAe,KAAI,CAAC;AACxF,QAAI,aAAa;AACf,aAAO,IAAI,QAAQ,SAAS,WAAW;AAAA,IACzC;AAAA,EACF,WACS,sBAAsB;AAC7B,UAAM,cAAc,MAAM,eAAe,iBAAiB,UAAU,EAAC,eAAe,KAAI,CAAC;AACzF,QAAI,aAAa;AACf,aAAO,IAAI,QAAQ,SAAS,WAAW;AAAA,IACzC;AAAA,EACF,WACS,mBAAmB;AAC1B,UAAM,cAAc,MAAM,eAAe,cAAc,UAAU,EAAC,eAAe,KAAI,CAAC;AACtF,QAAI,aAAa;AACf,aAAO,IAAI,QAAQ,SAAS,WAAW;AAAA,IACzC;AAAA,EACF,OACK;AACH,WAAO;AAAA,EACT;AACF;AAEA,SAAS,eAAe,MAAW,WAAmB,WAAgB;AACpE,SAAO;AAAA,IACL,GAAG;AAAA,IACH,OAAO;AAAA,MACL,GAAG,KAAK;AAAA,MACR,CAAC,SAAS,GAAG;AAAA,QACX,GAAG,KAAK,MAAM,SAAS;AAAA,QACvB,QAAQ;AAAA,MACV;AAAA,IACF;AAAA,EACF;AACF;AAyCA,qBAAqB,YAAY,MAAM,UAAyB;AAAA,EAC9D;AAAA,EACA,aAAiC;AAAA,EACjC;AAAA,EAEA,YAAY,OAAY;AACtB,UAAM,KAAK;AAEX,SAAK,gBAAgB,IAAI,cAAc;AACvC,SAAK,2BAA2B;AAEhC,SAAK,QAAQ;AAAA,MACX,QAAQ,CAAC;AAAA,MACT,OAAO,CAAC;AAAA,MACR,UAAU,MAAM;AAAA,MAChB,oBAAoB;AAAA,MACpB,SAAS,CAAC;AAAA,MACV,cAAc,CAAC;AAAA,MACf,UAAU;AAAA,MACV,MAAM;AAAA,MACN,SAAS;AAAA,QACP,MAAM;AAAA,QACN,QAAQ;AAAA,UACN,KAAK;AAAA,UACL,KAAK;AAAA,QACP;AAAA,MACF;AAAA,MACA,QAAQ;AAAA,QACN,UAAU;AAAA,QACV,SAAS;AAAA,QACT,MAAM;AAAA,QACN,WAAW;AAAA,QACX,QAAQ;AAAA,QACR,OAAO;AAAA,QACP,aAAa;AAAA,QACb,YAAY;AAAA,MACd;AAAA,MACA,wBAAwB;AAAA,QACtB,oBAAoB;AAAA,QACpB,oBAAoB;AAAA,QACpB,uBAAuB;AAAA,MACzB;AAAA,MACA,wBAAwB;AAAA,QACtB,cAAc;AAAA,MAChB;AAAA,MACA,YAAY;AAAA,IACd;AAEA,SAAK,eAAe,IAAI,aAAa;AAAA,MACnC,sBAAsB,CAAA,MAAK,KAAK,SAAS,EAAE,cAAc,EAAE,CAAC;AAAA,IAC9D,CAAC;AAAA,EACH;AAAA,EAEA,6BAA6B,MAAM;AACjC,UAAM,YAAY;AAAA,MAChB;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,WAAW;AAAA,QAC9B;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,MAAM;AAAA,QACzB;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,QAAQ;AAAA,QAC3B;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,SAAS;AAAA,QAC5B;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,UAAU;AAAA,QAC7B;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,aAAa;AAAA,QAChC;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK;AAAA,YACH,KAAK,MAAM,aAAa,QAAQ,YAAY;AAAA,UAC9C;AAAA,QACF;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACZ,mBAAS,cAAc,oBAAoB,EAAwB,MAAM;AAAA,QAC5E;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,OAAO;AAAA,QAC1B;AAAA,MACF;AAAA,IACF;AAEA,aAAS,KAAK,iBAAiB,SAAS,CAAC,MAAM;AAC7C,UAAG,EAAE,QAAQ,UAAU;AACpB,UAAE,OAAuB,KAAK;AAC/B,iBAAS,KAAK,MAAM;AAAA,MACtB,WACQ,KAAK,MAAM,OAAO,aAAa,SAAS,kBAAkB,SAAS,MAAM;AAC/E,cAAM,WAAW,UAAU,KAAK,CAACA,cAAa;AAC5C,iBAAQA,UAAS,QAAQ,EAAE;AAAA,QAC7B,CAAC;AAED,YAAG,UAAU;AACX,eAAK,SAAS,aAAa,KAAK;AAChC,mBAAS,QAAQ;AAAA,QACnB;AAAA,MACF;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,iBAAiB,CAAC,MAAqB;AACrC,QAAG,UAAU,SAAS,YAAY,EAAE,QAAQ,KAAK,KAAK,GAAG;AACvD,UAAG,EAAE,WAAW,EAAE,YAAY,EAAE,YAAY,IAAI;AAC9C,UAAE,eAAe;AACjB,aAAK,OAAO;AAAA,MACd,WACQ,EAAE,WAAW,EAAE,YAAY,IAAI;AACrC,UAAE,eAAe;AACjB,aAAK,OAAO;AAAA,MACd;AAAA,IACF,OACK;AACH,UAAG,EAAE,WAAW,EAAE,YAAY,IAAI;AAChC,UAAE,eAAe;AACjB,aAAK,OAAO;AAAA,MACd,WACQ,EAAE,WAAW,EAAE,YAAY,IAAI;AACrC,UAAE,eAAe;AACjB,aAAK,OAAO;AAAA,MACd;AAAA,IACF;AAAA,EACF;AAAA,EAEA,MAAM,oBAAoB;AACxB,SAAK,aAAa,MAAM,iBAAiB,CAAC,UAAU,SAAS,KAAK,eAAe,UAAU,IAAI,CAAC;AAChG,WAAO,iBAAiB,WAAW,KAAK,cAAc;AAAA,EACxD;AAAA,EAEA,uBAAuB;AACrB,WAAO,oBAAoB,WAAW,KAAK,cAAc;AAAA,EAC3D;AAAA,EAEA,UAAU,eAAyC;AACjD,SAAK,YAAY,KAAK,aAAa;AAAA,EACrC;AAAA,EAEA,YAAY,aAAqB;AAC/B,UAAM,WAAoC,KAAK,MAAM,SAAS,YAAY,CAAC;AAC3E,UAAM,cAAc,SAAS,oCAAoC,KAAK,OAAO;AAE7E,UAAM,WAAY,OAAO,gBAAgB,WAAW,YAAY,QAAQ,SAAS,WAAW,IAAG;AAC/F,2BAAuB,UAAU,CAAA,UAAS;AACxC,WAAK,SAAS,EAAE,MAAM,eAAe,KAAK,MAAM,MAAM,UAAU,KAAK,EAAC,CAAC;AAAA,IACzE,CAAC;AAAA,EACH;AAAA,EAEA,YAAY,SAAiB;AAC3B,2BAAuB,SAAS,CAAA,UAAS;AACvC,WAAK,SAAS,EAAE,MAAM,eAAe,KAAK,MAAM,MAAM,UAAU,KAAK,EAAC,CAAC;AAAA,IACzE,CAAC;AAAA,EACH;AAAA,EAEA,2BAA2B,CAAC,UAAkB,UAAe;AAE3D,QACE,aAAa,uBACb,UAAU,IAAI,KAAK,MAAM,UAAU,CAAC,YAAY,mBAAmB,GAAG,QAAQ,GAC9E;AACA,WAAK,SAAS;AAAA,QACZ,UAAU;AAAA,MACZ,CAAC;AAAA,IACH;AAEA,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,UAAU;AAAA,QACR,GAAI,KAAK,MAAM,SAAiB;AAAA,QAChC,CAAC,QAAQ,GAAG;AAAA,MACd;AAAA,IACF;AAEA,SAAK,eAAe,YAAY;AAAA,EAClC;AAAA,EAEA,iBAAiB,CAAC,UAAoC,OAAyB,CAAC,MAAY;AAC1F,WAAO;AAAA,MACL,MAAM;AAAA,MACN,aAAa;AAAA,MACb,aAAa;AAAA,MACb,GAAG;AAAA,IACL;AAKA,QAAI,SAAS,UAAU,OAAO,SAAS,WAAW,UAAU;AAC1D,eAAS,SAAS,oBAAoB,SAAS,QAAQ,QAAQ;AAAA,IACjE;AAEA,QAAI,SAAS,UAAU,OAAO,SAAS,WAAW,UAAU;AAC1D,eAAS,SAAS,oBAAoB,SAAS,QAAQ,QAAQ;AAAA,IACjE;AAEA,eAAW,CAAC,WAAW,MAAM,KAAK,OAAO,QAAQ,SAAS,OAAO,GAAG;AAClE,UAAI,UAAU,SAAS,UAAU,OAAO,OAAO,QAAQ,UAAU;AAC/D,eAAO,MAAM,oBAAoB,OAAO,KAAK,QAAQ;AAAA,MACvD;AAAA,IACF;AAGA,QAAI,KAAK,aAAa;AACpB,WAAK,uBAAuB,QAAQ;AAAA,IACtC;AAEA,UAAM,SAA4B,iBAAiB,QAAQ,KAAK,CAAC;AAGjE,UAAM,cAA2C,CAAC;AAClD,QAAI,YAAY,SAAS,QAAQ;AAC/B,YAAM,cAAc,IAAI,OAAO,IAAI;AACnC,eAAS,OAAO,QAAQ,CAAC,OAAO,UAAU;AACxC,YAAI,MAAM,OAAO,MAAM,YAAY,IAAI,MAAM,EAAE,GAAG;AAChD,gBAAM,QAAQ,IAAI;AAAA,YAChB,UAAU,KAAK;AAAA,UACjB;AACA,sBAAY,KAAK,KAAK;AAAA,QACxB;AACA,oBAAY,IAAI,MAAM,IAAI,IAAI;AAAA,MAChC,CAAC;AAAA,IACH;AAEA,UAAM,eAA8B,YAAY,OAAO,MAAM,EAAE,IAAI,CAAA,UAAS;AAE1E,YAAM,WAAW,MAAM,QAAQ,MAAM,iEAAiE;AACtG,UAAI,UAAU;AACZ,cAAM,CAAC,EAAE,OAAO,OAAO,IAAI;AAC3B,eAAO;AAAA,UACL,SAAS,MAAM;AAAA,UACf,QAAQ;AAAA,YACN,MAAM;AAAA,YACN,MAAM;AAAA,cACJ,OAAO,SAAS,OAAO,EAAE;AAAA,cACzB,KAAK;AAAA,cACL;AAAA,YACF;AAAA,UACF;AAAA,QACF;AAAA,MACF;AAGA,YAAM,qBAAqB,MAAM,QAAQ,MAAM,8CAA8C;AAC7F,UAAI,oBAAoB;AACtB,cAAM,CAAC,EAAE,OAAO,OAAO,IAAI;AAC3B,eAAO;AAAA,UACL,SAAS,MAAM;AAAA,UACf,QAAQ;AAAA,YACN,MAAM;AAAA,YACN,MAAM;AAAA,cACJ,OAAO,SAAS,OAAO,EAAE;AAAA,cACzB,KAAK;AAAA,cACL;AAAA,YACF;AAAA,UACF;AAAA,QACF;AAAA,MACF;AAEA,YAAM,aAAa,MAAM,QAAQ,MAAM,0CAA0C;AACjF,UAAI,YAAY;AACd,cAAM,CAAC,EAAE,OAAO,OAAO,UAAU,OAAO,IAAI;AAC5C,cAAM,MAAO,SAAS,WAAY,CAAC,OAAO,QAAQ,EAAE,KAAK,GAAG,IAAI;AAChE,eAAO;AAAA,UACL,SAAS,MAAM;AAAA,UACf,QAAQ;AAAA,YACN,MAAM;AAAA,YACN,MAAM;AAAA,cACJ,OAAO,SAAS,OAAO,EAAE;AAAA,cACzB;AAAA,cACA;AAAA,YACF;AAAA,UACF;AAAA,QACF;AAAA,MACF,OACK;AACH,eAAO;AAAA,UACL,SAAS,MAAM;AAAA,QACjB;AAAA,MACF;AAAA,IACF,CAAC;AAED,QAAI,gBAAgD;AACpD,QAAI,OAAO,SAAS,GAAG;AACrB,sBAAgB,UAAU,QAAQ;AAElC,iBAAW,SAAS,QAAQ;AAC1B,cAAM,EAAC,QAAO,IAAI;AAClB,YAAI,SAAS;AACX,cAAI;AACF,kBAAM,UAAU,QAAQ,MAAM,GAAG,EAAE,CAAC;AAEpC,kBAAM,YAAY,QAAQ,MAAM,qBAAqB,EAAG,CAAC;AACzD,kBAAM,eAAe,SAAS;AAAA,UAChC,SACO,KAAK;AACV,oBAAQ,KAAK,UAAU,MAAM,GAAG;AAAA,UAClC;AAAA,QACF;AAAA,MACF;AAAA,IACF;AAEA,QAAG,SAAS,WAAW,KAAK,MAAM,SAAS,QAAQ;AACjD,WAAK,YAAY,SAAS,MAAgB;AAAA,IAC5C;AACA,QAAG,SAAS,WAAW,KAAK,MAAM,SAAS,QAAQ;AACjD,WAAK,YAAY,SAAS,MAAgB;AAAA,IAC5C;AAEA,QAAI,KAAK,aAAa;AACpB,WAAK,cAAc,YAAY,QAAQ;AAAA,IACzC;AACA,QAAI,KAAK,MAAM;AACb,WAAK,UAAU,QAAQ;AAAA,IACzB;AAEA,SAAK,SAAS;AAAA,MACZ,UAAU;AAAA,MACV;AAAA,MACA,QAAQ;AAAA,IACV,GAAG,MAAM;AACP,WAAK,aAAa;AAClB,WAAK,cAAc;AAAA,IACrB,CAAC;AAAA,EAEH;AAAA,EAEA,SAAS,MAAM;AACb,UAAM,cAAc,KAAK,cAAc,KAAK;AAE5C,UAAM,WAAW,aAAa,KAAK,MAAM,UAAU,WAAW;AAC9D,SAAK,eAAe,aAAa,EAAC,aAAa,MAAK,CAAC;AACrD,SAAK,SAAS;AAAA,MACZ,OAAO;AAAA,IACT,CAAC;AAAA,EACH;AAAA,EAEA,SAAS,MAAM;AACb,UAAM,cAAc,KAAK,cAAc,KAAK;AAC5C,UAAM,WAAW,aAAa,KAAK,MAAM,UAAU,WAAW;AAC9D,SAAK,eAAe,aAAa,EAAC,aAAa,MAAK,CAAC;AACrD,SAAK,SAAS;AAAA,MACZ,OAAO;AAAA,IACT,CAAC;AAAA,EACH;AAAA,EAEA,cAAc,CAAC,SAA+C;AAC5D,QAAI,EAAE,UAAU,SAAS,IAAI;AAC7B,QAAI,SAAS,KAAK,MAAM,SAAS;AACjC,eAAW,MAAM,UAAU,GAAG,OAAO,SAAO,CAAC;AAC7C,eAAW,MAAM,UAAU,GAAG,OAAO,SAAO,CAAC;AAC7C,QAAG,aAAa,SAAU;AAE1B,QAAI,aAAa,KAAK,MAAM,oBAAoB;AAC9C,WAAK,SAAS;AAAA,QACZ,oBAAoB;AAAA,MACtB,CAAC;AAAA,IACH;AAEA,aAAS,OAAO,MAAM,CAAC;AACvB,qBAAiB,QAAQ,UAAU,QAAQ;AAC3C,SAAK,eAAe,MAAM;AAAA,EAC5B;AAAA,EAEA,iBAAiB,CAAC,kBAAwC;AACxD,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,QAAQ;AAAA,IACV;AACA,SAAK,eAAe,YAAY;AAAA,EAClC;AAAA,EAEA,iBAAiB,CAAC,UAAkB;AAClC,UAAM,SAAS,KAAK,MAAM,SAAS;AACnC,UAAM,kBAAkB,OAAO,MAAM,CAAC;AACtC,oBAAgB,OAAO,OAAO,CAAC;AAC/B,SAAK,eAAe,eAAe;AAAA,EACrC;AAAA,EAEA,cAAc,CAAC,UAAkB;AAC/B,UAAM,SAAS,KAAK,MAAM,SAAS;AACnC,UAAM,gBAAgB,OAAO,MAAM,CAAC;AAEpC,UAAM,cAAc,UAAU,cAAc,KAAK,CAAC;AAClD,gBAAY,KAAK,YAAY,KAAK;AAClC,kBAAc,OAAO,OAAO,GAAG,WAAW;AAC1C,SAAK,eAAe,aAAa;AAAA,EACnC;AAAA,EAEA,0BAA0B,CAAC,UAAkB;AAC3C,UAAM,SAAS,KAAK,MAAM,SAAS;AACnC,UAAM,gBAAgB,OAAO,MAAM,CAAC;AAEpC,UAAM,QAAQ,EAAE,GAAG,cAAc,KAAK,EAAE;AACxC,UAAM,gBAAgB,YAAY,QAAQ,EAAC,GAAG,MAAM,OAAM,IAAI,CAAC;AAC/D,kBAAc,aAAa,cAAc,eAAe,SAAS,YAAY;AAE7E,UAAM,SAAS;AACf,kBAAc,KAAK,IAAI;AACvB,SAAK,eAAe,aAAa;AAAA,EACnC;AAAA,EAGA,kBAAkB,CAAC,OAAe,QAAgB,UAAkB;AAClE,UAAM,gBAAgB,KAAK,MAAM,SAAS,OAAO,MAAM,CAAC;AACxD,kBAAc,KAAK,IAAI;AAAA,MACrB,GAAG,cAAc,KAAK;AAAA,MACtB,IAAI;AAAA,IACN;AAEA,SAAK,eAAe,aAAa;AAAA,EACnC;AAAA,EAEA,iBAAiB,CAAC,OAAe,UAA8B;AAC7D,UAAM,gBAAgB,KAAK,MAAM,SAAS,OAAO,MAAM,CAAC;AACxD,kBAAc,KAAK,IAAI;AAEvB,SAAK,eAAe,aAAa;AAAA,EACnC;AAAA,EAEA,cAAc,CAAC,aAAuB;AACpC,SAAK,SAAS;AAAA,MACZ,UAAU;AAAA,IACZ,GAAG,KAAK,aAAa;AAAA,EACvB;AAAA,EAEA,mBAAmB,CAAC,aAAuC;AACzD,UAAM,WAAoC,SAAS,YAAY,CAAC;AAChE,QAAG,SAAS,mBAAmB,MAAM,QAAW;AAC9C,YAAM,eAAe;AAAA,QACnB,GAAG;AAAA,QACH,UAAU;AAAA,UACR,GAAG,SAAS;AAAA,UACZ,qBAAqB;AAAA,QACvB;AAAA,MACF;AACA,aAAO;AAAA,IACT,OAAO;AACL,aAAO;AAAA,IACT;AAAA,EACF;AAAA,EAEA,YAAY,CAAC,UAAoC,eAA4C;AAC3F,SAAK,SAAS,EAAC,WAAsB,CAAC;AACtC,eAAW,KAAK,iBAAiB,QAAQ;AACzC,SAAK,eAAe,QAAQ;AAAA,EAC9B;AAAA,EAEA,MAAM,eAAe;AACnB,UAAM,aAAwE,CAAC;AAC/E,eAAU,OAAO,OAAO,KAAK,KAAK,MAAM,SAAS,OAAO,GAAG;AACzD,YAAM,SAAS,KAAK,MAAM,SAAS,QAAQ,GAAG;AAC9C,UAAG,OAAO,SAAS,YAAY,EAAE,SAAS,SAAS;AACjD,mBAAW,GAAG,IAAI,KAAK,MAAM,QAAQ,GAAG,KAAK,EAAC,GAAG,KAAK,MAAM,SAAS,QAAQ,GAAG,EAAC;AACjF,YAAI,WAAW,GAAG,EAAE,WAAW,QAAW;AACxC,qBAAW,GAAG,EAAE,SAAS,CAAC;AAAA,QAC5B;AAAA,MACF,OAAO;AACL,mBAAW,GAAG,IAAI;AAAA,UAChB,MAAM,OAAO;AAAA,UACb,QAAQ,CAAC;AAAA,QACX;AAEA,YAAI,MAAM,OAAO;AAEjB,YAAI;AACF,gBAAM,oBAAoB,KAAM,KAAK,MAAM,QAAQ;AAAA,QACrD,SAAQ,KAAK;AACX,kBAAQ,KAAK,mCAAmC,GAAG;AAAA,QACrD;AAEA,cAAM,kBAAkB,CAAC,SAAa;AACpC,cAAG,CAAC,OAAO,UAAU,eAAe,KAAK,MAAM,eAAe,GAAG;AAC/D;AAAA,UACF;AAEA,qBAAU,SAAS,KAAK,eAAe;AACrC,uBAAW,GAAG,EAAE,OAAO,KAAK,MAAM,EAAE;AAAA,UACtC;AAAA,QACF;AAEA,YAAI;AACF,cAAI,IAAK,WAAW,YAAY,GAAG;AACjC,kBAAM,OAAO,MAAO,IAAI,QAAQ,IAAK,UAAU,EAAE,CAAC,EAAG,YAAY,EAAE;AACnE,4BAAgB,IAAI;AAAA,UACtB,OAAO;AACL,kBAAM,WAAW,MAAM,MAAM,KAAM,EAAE,MAAM,OAAO,CAAC;AACnD,kBAAM,OAAO,MAAM,SAAS,KAAK;AACjC,4BAAgB,IAAI;AAAA,UACtB;AAAA,QACF,SAAQ,KAAK;AACX,kBAAQ,MAAM,sCAAsC,GAAG,MAAM,GAAG,EAAE;AAAA,QACpE;AAAA,MACF;AAAA,IACF;AAEA,QAAG,CAAC,QAAQ,KAAK,MAAM,SAAS,UAAU,GAAG;AAC3C,cAAQ,MAAM,mBAAmB,UAAU;AAC3C,WAAK,SAAS;AAAA,QACZ,SAAS;AAAA,MACX,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,eAAgB;AACd,UAAM,WAAmC,KAAK,MAAM,SAAS,YAAY,CAAC;AAC1E,WAAO,SAAS,mBAAmB,KAAK;AAAA,EAC1C;AAAA,EAEA,cAAc,CAAC,YAMT;AACJ,SAAK,SAAS;AAAA,MACZ;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,cAAc;AACZ,UAAM,EAAC,UAAU,cAAa,IAAI,KAAK;AAEvC,UAAM,WAAW;AAAA,MACf,UAAW,iBAAiB;AAAA,MAC5B,qBAAqB,CAACC,cAAiC;AACrD,eAAO,MAAM,oBAAoBA,WAAU;AAAA,UACzC,eAAe;AAAA,QACjB,CAAC;AAAA,MACH;AAAA,MACA,cAAc,CAAC,MAAkB;AAC/B,aAAK,aAAa,WAAW,EAAE,GAAG;AAClC,aAAK,aAAa;AAAA,MACpB;AAAA,IACF;AAEA,UAAM,WAAW,KAAK,aAAa;AAEnC,QAAI;AAGJ,QAAG,aAAa,MAAM;AACpB,mBAAa;AAAA,QAAC;AAAA,QAAA;AAAA,UACX,GAAG;AAAA,UACJ,UAAU,KAAK;AAAA,UACf,cAAc,KAAK,MAAM,uBAAuB;AAAA,UAChD,eAAe,CAAC,YAAY,KAAK,cAAc,CAAC,OAAO;AAAA,QAAA;AAAA,MACzD;AAAA,IACF,OAAO;AAEL,mBAAa;AAAA,QAAC;AAAA,QAAA;AAAA,UAAe,GAAG;AAAA,UAC9B,UAAU,KAAK;AAAA,UACf,SAAS,KAAK,MAAM;AAAA,UACpB,oBAAoB,KAAK,MAAM,aAAa;AAAA,UAC5C,kBAAkB,KAAK,MAAM,SAAS,OAAO,KAAK,MAAM,kBAAkB;AAAA,UAC1E,eAAe,KAAK;AAAA,QAAA;AAAA,MAAe;AAAA,IACvC;AAEA,QAAI;AACJ,QAAG,KAAK,MAAM,SAAS,MAAM,UAAU,GAAG;AACxC,mBAAa,KAAK,MAAM,SAAS,QAAQ,YAAY,EAAE;AAAA,IACzD;AACA,UAAM,eAAkC,CAAC;AACzC,QAAI,YAAY;AACd,mBAAa,SAAS,SAAS,UAAU;AAAA,IAC3C;AAEA,WAAO,oBAAC,SAAI,OAAO,cAAc,WAAU,2BAA0B,eAAY,sBAC9E,UAAA,WAAA,CACH;AAAA,EACF;AAAA,EAEA,gBAAgB,MAAM;AACpB,UAAM,EAAC,UAAU,UAAU,OAAM,IAAI,KAAK;AAC1C,UAAM,EAAC,mBAAkB,IAAI,KAAK;AAClC,UAAM,MAAM,IAAI,IAAI,SAAS,IAAI;AACjC,UAAM,UAAU,KAAK,KAAK,UAAU,QAAQ,CAAC;AAC7C,QAAI,aAAa,IAAI,SAAS,GAAG,OAAO,IAAI,kBAAkB,EAAE;AAEhE,UAAM,aAAa,OAAO,QAAQ,MAAM,EACrC,IAAI,CAAC,CAAC,KAAK,GAAG,MAAO,QAAQ,OAAO,MAAM,IAAK,EAC/C,OAAO,CAAA,QAAO,QAAQ,IAAI;AAE7B,QAAI,WAAW,SAAS,GAAG;AACzB,UAAI,aAAa,IAAI,SAAS,WAAW,KAAK,GAAG,CAAC;AAAA,IACpD,OACK;AACH,UAAI,aAAa,OAAO,OAAO;AAAA,IACjC;AAEA,QAAI,aAAa,OAAO;AACtB,UAAI,aAAa,OAAO,MAAM;AAAA,IAChC,WACS,aAAa,WAAW;AAC/B,UAAI,aAAa,IAAI,QAAQ,SAAS;AAAA,IACxC;AAEA,YAAQ,aAAa,EAAC,mBAAkB,GAAG,YAAY,IAAI,IAAI;AAAA,EACjE;AAAA,EAEA,yBAAyB,CAAC,aAAiC;AACzD,UAAM,MAAM,IAAI,IAAI,SAAS,IAAI;AACjC,UAAM,aAAa,IAAI,aAAa,IAAI,OAAO;AAE/C,QAAI,cAAc,eAAe,IAAI;AACnC,YAAM,SAAS,WAAW,MAAM,GAAG;AACnC,YAAM,WAAqC,CAAC;AAC5C,aAAO,QAAQ,CAAA,cAAa;AAC1B,iBAAS,SAAS,IAAI;AAAA,MACxB,CAAC;AAED,WAAK,SAAS;AAAA,QACZ,QAAQ;AAAA,UACN,GAAG,KAAK,MAAM;AAAA,UACd,GAAG;AAAA,QACL;AAAA,MACF,CAAC;AAAA,IACH;AAEA,UAAM,OAAO,IAAI,aAAa,IAAI,MAAM;AACxC,QAAI,QAAQ,SAAS,IAAI;AACvB,WAAK,YAAY,IAAgB;AAAA,IACnC;AAEA,UAAM,OAAO,IAAI,aAAa,IAAI,OAAO;AACzC,QAAI,MAAM;AACR,UAAI;AACF,cAAM,QAAQ,KAAK,MAAM,GAAG;AAC5B,cAAM,CAAC,SAAS,kBAAkB,IAAI;AAAA,UACpC,MAAM,CAAC;AAAA,UACP,SAAS,MAAM,CAAC,GAAG,EAAE;AAAA,QACvB;AAEA,YAAI,QAAQ;AACZ,YAAI,YAAY,KAAK;AACnB,gBAAM,iBAAiB,KAAK,KAAK,UAAU,QAAQ,CAAC;AACpD,cAAI,mBAAmB,SAAS,SAAS,EAAE,GAAG;AAC5C,oBAAQ;AAAA,UACV;AAAA,QACF;AACA,YAAI,OAAO;AACT,eAAK,SAAS;AAAA,YACZ;AAAA,YACA,yBAAyB,SAAS,OAAO,kBAAkB,EAAE;AAAA,UAC/D,CAAC;AAAA,QACH;AAAA,MACF,SACO,KAAK;AACV,gBAAQ,KAAK,GAAG;AAAA,MAClB;AAAA,IACF;AAAA,EACF;AAAA,EAEA,gBAAgB,CAAC,UAAkB;AACjC,SAAK,SAAS;AAAA,MACZ,oBAAoB;AAAA,MACpB,yBAAyB,KAAK,MAAM,SAAS,OAAO,KAAK,EAAE;AAAA,IAC7D,GAAG,KAAK,aAAa;AAAA,EACvB;AAAA,EAEA,SAAS,WAAqC,OAAgB;AAC5D,SAAK,SAAS;AAAA,MACZ,QAAQ;AAAA,QACN,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,SAAS,GAAG;AAAA,MACf;AAAA,IACF,GAAG,KAAK,aAAa;AAAA,EACvB;AAAA,EAEA,YAAY,WAAqC;AAC/C,SAAK,SAAS,WAAW,CAAC,KAAK,MAAM,OAAO,SAAS,CAAC;AAAA,EACxD;AAAA,EAEA,kBAAkB,CAAC,eAA4C;AAC7D,SAAK,SAAS,EAAE,WAAW,CAAC;AAAA,EAC9B;AAAA,EAEA,0BAA0B,CAAC,KAA+C,UAAmB;AAC3F,SAAK,SAAS;AAAA,MACZ,wBAAwB;AAAA,QACtB,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,GAAG,GAAG;AAAA,MACT;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,0BAA0B,CAAC,KAA+C,UAAe;AACvF,SAAK,SAAS;AAAA,MACZ,wBAAwB;AAAA,QACtB,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,GAAG,GAAG;AAAA,MACT;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,SAAS,KAAK,MAAM,SAAS,UAAU,CAAC;AAC9C,UAAM,gBAAgB,OAAO,SAAS,IAAI,OAAO,KAAK,MAAM,kBAAkB,IAAI;AAElF,UAAM,UAAU;AAAA,MAAC;AAAA,MAAA;AAAA,QACf,UAAU,KAAK,aAAa;AAAA,QAC5B,UAAU,KAAK,MAAM;AAAA,QACrB,UAAU,KAAK,MAAM;AAAA,QACrB,oBAAoB,KAAK,MAAM,aAAa;AAAA,QAC5C,SAAS,KAAK,MAAM;AAAA,QACpB,gBAAgB,KAAK;AAAA,QACrB,aAAa,KAAK;AAAA,QAClB,eAAe,KAAK;AAAA,QACpB,eAAe,CAAC,UAAoC,KAAK,YAAY,KAAK;AAAA,MAAA;AAAA,IAC5E;AAEA,UAAM,aAAa,KAAK,MAAM,OAAO,aAAa;AAAA,MAAC;AAAA,MAAA;AAAA,QACjD,OAAO,KAAK,MAAM;AAAA,QAClB,UAAU,CAACC,WAAU,KAAK,eAAeA,MAAK;AAAA,QAC9C,SAAS,MAAM,KAAK,SAAS,cAAc,KAAK;AAAA,MAAA;AAAA,IAClD,IAAK;AAEL,UAAM,YAAY;AAAA,MAAC;AAAA,MAAA;AAAA,QACjB,aAAa,KAAK;AAAA,QAClB,gBAAgB,KAAK;AAAA,QACrB,aAAa,KAAK;AAAA,QAClB,yBAAyB,KAAK;AAAA,QAC9B,gBAAgB,KAAK;AAAA,QACrB,eAAe,KAAK;AAAA,QACpB,oBAAoB,KAAK,MAAM;AAAA,QAC/B;AAAA,QACA,SAAS,KAAK,MAAM;AAAA,QACpB,QAAQ,KAAK,MAAM;AAAA,MAAA;AAAA,IACrB;AAEA,UAAM,cAAc,gBAAgB;AAAA,MAAC;AAAA,MAAA;AAAA,QAEnC,OAAO;AAAA,QACP,YAAY,KAAK,MAAM;AAAA,QACvB,cAAc,KAAK,MAAM,qBAAqB;AAAA,QAC9C,aAAa,KAAK,MAAM,uBAAuB,KAAK,MAAM,SAAS,OAAO,SAAO;AAAA,QACjF,SAAS,KAAK,MAAM;AAAA,QACpB,cAAc,KAAK,MAAM;AAAA,QACzB,MAAM,KAAK,MAAM;AAAA,QACjB,aAAa,KAAK;AAAA,QAClB,gBAAgB,KAAK;AAAA,QACrB,gBAAgB,KAAK;AAAA,QACrB,aAAa,KAAK;AAAA,QAClB,yBAAyB,KAAK;AAAA,QAC9B,iBAAiB,KAAK;AAAA,QACtB,QAAQ,KAAK,MAAM;AAAA,MAAA;AAAA,MAdd,KAAK,MAAM;AAAA,IAelB,IAAK;AAEL,UAAM,cAAe,KAAK,MAAM,OAAO,SAAS,KAAK,MAAM,MAAM,SAAU,IAAI;AAAA,MAAC;AAAA,MAAA;AAAA,QAC9E,cAAc;AAAA,QACd,oBAAoB,KAAK,MAAM;AAAA,QAC/B,eAAe,KAAK;AAAA,QACpB,UAAU,KAAK,MAAM;AAAA,QACrB,QAAQ,KAAK,MAAM;AAAA,QACnB,OAAO,KAAK,MAAM;AAAA,MAAA;AAAA,IACpB,IAAK;AAGL,UAAM,8BAAU,OAAA,EACd,UAAA;AAAA,MAAA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,UAAU,KAAK,aAAa;AAAA,UAC5B,wBAAwB,KAAK,MAAM;AAAA,UACnC,wBAAwB,KAAK,MAAM;AAAA,UACnC,yBAAyB,KAAK;AAAA,UAC9B,yBAAyB,KAAK;AAAA,UAC9B,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,MAAM,KAAK,YAAY,OAAO;AAAA,UAC5C,SAAS,KAAK,MAAM;AAAA,QAAA;AAAA,MACtB;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,MAAM,KAAK,YAAY,WAAW;AAAA,QAAA;AAAA,MAClD;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,UAAU,KAAK,MAAM;AAAA,UACrB,gBAAgB,KAAK;AAAA,UACrB,0BAA0B,KAAK;AAAA,UAC/B,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,MAAM,KAAK,YAAY,UAAU;AAAA,QAAA;AAAA,MACjD;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,UAAU,KAAK,MAAM;AAAA,UACrB,gBAAgB,KAAK;AAAA,UACrB,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,MAAM,KAAK,YAAY,QAAQ;AAAA,UAC7C,YAAY,KAAK,MAAM;AAAA,UACvB,iBAAiB,KAAK;AAAA,QAAA;AAAA,MACxB;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,aAAa,KAAK;AAAA,UAClB,cAAc,MAAM,KAAK,YAAY,MAAM;AAAA,UAC3C,YAAY,KAAK,MAAM;AAAA,QAAA;AAAA,MACzB;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,UAAU,KAAK,MAAM;AAAA,UACrB,gBAAgB,KAAK;AAAA,UACrB,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,MAAM,KAAK,YAAY,SAAS;AAAA,QAAA;AAAA,MAChD;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,UAAU,KAAK,MAAM;AAAA,UACrB,gBAAgB,KAAK;AAAA,UACrB,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,MAAM,KAAK,YAAY,aAAa;AAAA,QAAA;AAAA,MACpD;AAAA,IAAA,EAAA,CACF;AAEA,WAAO;AAAA,MAAC;AAAA,MAAA;AAAA,QACN;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA,KAAK,KAAK,YAAY;AAAA,QACtB,QAAQ;AAAA,QACR;AAAA,MAAA;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"3ada5d61e06df3b0198ab7e31ce0b9225ca7364f"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return fe=function(){return s},s}fe();fe().s[0]++;window.Buffer=gue.Buffer;function JM(n,e){fe().f[0]++;const t=(fe().s[1]++,n.match(/\.tilehosting\.com/)),i=(fe().s[2]++,n.match(/\.maptiler\.com/)),r=(fe().s[3]++,n.match(/\.thunderforest\.com/)),o=(fe().s[4]++,n.match(/\.locationiq\.com/));if(fe().s[5]++,fe().b[1][0]++,t||(fe().b[1][1]++,i)){fe().b[0][0]++;const s=(fe().s[6]++,Ed.getAccessToken("openmaptiles",e,{allowFallback:!0}));if(fe().s[7]++,s)return fe().b[2][0]++,fe().s[8]++,n.replace("{key}",s);fe().b[2][1]++}else if(fe().b[0][1]++,fe().s[9]++,r){fe().b[3][0]++;const s=(fe().s[10]++,Ed.getAccessToken("thunderforest",e,{allowFallback:!0}));if(fe().s[11]++,s)return fe().b[4][0]++,fe().s[12]++,n.replace("{key}",s);fe().b[4][1]++}else if(fe().b[3][1]++,fe().s[13]++,o){fe().b[5][0]++;const s=(fe().s[14]++,Ed.getAccessToken("locationiq",e,{allowFallback:!0}));if(fe().s[15]++,s)return fe().b[6][0]++,fe().s[16]++,n.replace("{key}",s);fe().b[6][1]++}else return fe().b[5][1]++,fe().s[17]++,n}function VH(n,e,t){return fe().f[1]++,fe().s[18]++,{...n,$root:{...n.$root,[e]:{...n.$root[e],values:t}}}}class jUe extends En.Component{revisionStore;styleStore=(fe().s[19]++,null);layerWatcher;constructor(e){fe().f[2]++,fe().s[20]++,super(e),fe().s[21]++,this.revisionStore=new DUe,fe().s[22]++,this.configureKeyboardShortcuts(),fe().s[23]++,this.state={errors:[],infos:[],mapStyle:Ed.emptyStyle,selectedLayerIndex:0,sources:{},vectorLayers:{},mapState:"map",spec:Zr,mapView:{zoom:0,center:{lng:0,lat:0}},isOpen:{settings:!1,sources:!1,open:!1,shortcuts:!1,export:!1,debug:!1,globalState:!1,codeEditor:!1},maplibreGlDebugOptions:{showTileBoundaries:!1,showCollisionBoxes:!1,showOverdrawInspector:!1},openlayersDebugOptions:{debugToolbox:!1},fileHandle:null},fe().s[24]++,this.layerWatcher=new zUe({onVectorLayersChange:t=>(fe().f[3]++,fe().s[25]++,this.setState({vectorLayers:t}))})}configureKeyboardShortcuts=(fe().s[26]++,()=>{fe().f[4]++;const e=(fe().s[27]++,[{key:"?",handler:()=>{fe().f[5]++,fe().s[28]++,this.toggleModal("shortcuts")}},{key:"o",handler:()=>{fe().f[6]++,fe().s[29]++,this.toggleModal("open")}},{key:"e",handler:()=>{fe().f[7]++,fe().s[30]++,this.toggleModal("export")}},{key:"d",handler:()=>{fe().f[8]++,fe().s[31]++,this.toggleModal("sources")}},{key:"s",handler:()=>{fe().f[9]++,fe().s[32]++,this.toggleModal("settings")}},{key:"g",handler:()=>{fe().f[10]++,fe().s[33]++,this.toggleModal("globalState")}},{key:"i",handler:()=>{fe().f[11]++,fe().s[34]++,this.setMapState(this.state.mapState==="map"?(fe().b[7][0]++,"inspect"):(fe().b[7][1]++,"map"))}},{key:"m",handler:()=>{fe().f[12]++,fe().s[35]++,document.querySelector(".maplibregl-canvas").focus()}},{key:"!",handler:()=>{fe().f[13]++,fe().s[36]++,this.toggleModal("debug")}}]);fe().s[37]++,document.body.addEventListener("keyup",t=>{if(fe().f[14]++,fe().s[38]++,t.key==="Escape")fe().b[8][0]++,fe().s[39]++,t.target.blur(),fe().s[40]++,document.body.focus();else if(fe().b[8][1]++,fe().s[41]++,fe().b[10][0]++,this.state.isOpen.shortcuts||(fe().b[10][1]++,document.activeElement===document.body)){fe().b[9][0]++;const i=(fe().s[42]++,e.find(r=>(fe().f[15]++,fe().s[43]++,r.key===t.key)));fe().s[44]++,i?(fe().b[11][0]++,fe().s[45]++,this.setModal("shortcuts",!1),fe().s[46]++,i.handler()):fe().b[11][1]++}else fe().b[9][1]++})});handleKeyPress=(fe().s[47]++,e=>{fe().f[16]++,fe().s[48]++,navigator.platform.toUpperCase().indexOf("MAC")>=0?(fe().b[12][0]++,fe().s[49]++,fe().b[14][0]++,e.metaKey&&(fe().b[14][1]++,e.shiftKey)&&(fe().b[14][2]++,e.keyCode===90)?(fe().b[13][0]++,fe().s[50]++,e.preventDefault(),fe().s[51]++,this.onRedo()):(fe().b[13][1]++,fe().s[52]++,fe().b[16][0]++,e.metaKey&&(fe().b[16][1]++,e.keyCode===90)?(fe().b[15][0]++,fe().s[53]++,e.preventDefault(),fe().s[54]++,this.onUndo()):fe().b[15][1]++)):(fe().b[12][1]++,fe().s[55]++,fe().b[18][0]++,e.ctrlKey&&(fe().b[18][1]++,e.keyCode===90)?(fe().b[17][0]++,fe().s[56]++,e.preventDefault(),fe().s[57]++,this.onUndo()):(fe().b[17][1]++,fe().s[58]++,fe().b[20][0]++,e.ctrlKey&&(fe().b[20][1]++,e.keyCode===89)?(fe().b[19][0]++,fe().s[59]++,e.preventDefault(),fe().s[60]++,this.onRedo()):fe().b[19][1]++))});async componentDidMount(){fe().f[17]++,fe().s[61]++,this.styleStore=await RUe((e,t)=>(fe().f[18]++,fe().s[62]++,this.onStyleChanged(e,t))),fe().s[63]++,window.addEventListener("keydown",this.handleKeyPress)}componentWillUnmount(){fe().f[19]++,fe().s[64]++,window.removeEventListener("keydown",this.handleKeyPress)}saveStyle(e){fe().f[20]++,fe().s[65]++,this.styleStore?.save(e)}updateFonts(e){fe().f[21]++;const t=(fe().s[66]++,fe().b[21][0]++,this.state.mapStyle.metadata||(fe().b[21][1]++,{})),i=(fe().s[67]++,fe().b[22][0]++,t["maputnik:openmaptiles_access_token"]||(fe().b[22][1]++,rae.openmaptiles)),r=(fe().s[68]++,typeof e=="string"?(fe().b[23][0]++,e.replace("{key}",i)):(fe().b[23][1]++,e));fe().s[69]++,gUe(r,o=>{fe().f[22]++,fe().s[70]++,this.setState({spec:VH(this.state.spec,"glyphs",o)})})}updateIcons(e){fe().f[23]++,fe().s[71]++,yUe(e,t=>{fe().f[24]++,fe().s[72]++,this.setState({spec:VH(this.state.spec,"sprite",t)})})}onChangeMetadataProperty=(fe().s[73]++,(e,t)=>{fe().f[25]++,fe().s[74]++,fe().b[25][0]++,e==="maputnik:renderer"&&(fe().b[25][1]++,t!==bue(this.state.mapStyle,["metadata","maputnik:renderer"],"mlgljs"))?(fe().b[24][0]++,fe().s[75]++,this.setState({mapState:"map"})):fe().b[24][1]++;const i=(fe().s[76]++,{...this.state.mapStyle,metadata:{...this.state.mapStyle.metadata,[e]:t}});fe().s[77]++,this.onStyleChanged(i)});onStyleChanged=(fe().s[78]++,(e,t=(fe().b[26][0]++,{}))=>{fe().f[26]++,fe().s[79]++,t={save:!0,addRevision:!0,initialLoad:!1,...t},fe().s[80]++,fe().b[28][0]++,e.glyphs&&(fe().b[28][1]++,typeof e.glyphs=="string")?(fe().b[27][0]++,fe().s[81]++,e.glyphs=JM(e.glyphs,e)):fe().b[27][1]++,fe().s[82]++,fe().b[30][0]++,e.sprite&&(fe().b[30][1]++,typeof e.sprite=="string")?(fe().b[29][0]++,fe().s[83]++,e.sprite=JM(e.sprite,e)):fe().b[29][1]++,fe().s[84]++;for(const[a,c]of Object.entries(e.sources))fe().s[85]++,fe().b[32][0]++,c&&(fe().b[32][1]++,"url"in c)&&(fe().b[32][2]++,typeof c.url=="string")?(fe().b[31][0]++,fe().s[86]++,c.url=JM(c.url,e)):fe().b[31][1]++;fe().s[87]++,t.initialLoad?(fe().b[33][0]++,fe().s[88]++,this.getInitialStateFromUrl(e)):fe().b[33][1]++;const i=(fe().s[89]++,fe().b[34][0]++,Bd(e)||(fe().b[34][1]++,[])),r=(fe().s[90]++,[]);if(fe().s[91]++,fe().b[36][0]++,e&&(fe().b[36][1]++,e.layers)){fe().b[35][0]++;const a=(fe().s[92]++,new window.Map);fe().s[93]++,e.layers.forEach((c,h)=>{if(fe().f[27]++,fe().s[94]++,fe().b[38][0]++,c.id===""&&(fe().b[38][1]++,a.has(c.id))){fe().b[37][0]++;const m=(fe().s[95]++,new Error(`layers[${h}]: duplicate layer id [empty_string], previously used`));fe().s[96]++,r.push(m)}else fe().b[37][1]++;fe().s[97]++,a.set(c.id,!0)})}else fe().b[35][1]++;const o=(fe().s[98]++,r.concat(i).map(a=>{fe().f[28]++;const c=(fe().s[99]++,a.message.match(/layers\[(\d+)\]: (duplicate layer id "?(.*)"?, previously used)/));if(fe().s[100]++,c){fe().b[39][0]++;const[,y,M]=(fe().s[101]++,c);return fe().s[102]++,{message:a.message,parsed:{type:"layer",data:{index:parseInt(y,10),key:"id",message:M}}}}else fe().b[39][1]++;const h=(fe().s[103]++,a.message.match(/layers\[(\d+)\]: (source "(?:.*)" not found)/));if(fe().s[104]++,h){fe().b[40][0]++;const[,y,M]=(fe().s[105]++,h);return fe().s[106]++,{message:a.message,parsed:{type:"layer",data:{index:parseInt(y,10),key:"source",message:M}}}}else fe().b[40][1]++;const m=(fe().s[107]++,a.message.match(/layers\[(\d+)\]\.(?:(\S+)\.)?(\S+): (.*)/));if(fe().s[108]++,m){fe().b[41][0]++;const[,y,M,x,T]=(fe().s[109]++,m),P=(fe().s[110]++,fe().b[43][0]++,M&&(fe().b[43][1]++,x)?(fe().b[42][0]++,[M,x].join(".")):(fe().b[42][1]++,x));return fe().s[111]++,{message:a.message,parsed:{type:"layer",data:{index:parseInt(y,10),key:P,message:T}}}}else return fe().b[41][1]++,fe().s[112]++,{message:a.message}}));let s=(fe().s[113]++,void 0);if(fe().s[114]++,i.length>0){fe().b[44][0]++,fe().s[115]++,s=fF(e),fe().s[116]++;for(const a of i){const{message:c}=(fe().s[117]++,a);if(fe().s[118]++,c){fe().b[45][0]++,fe().s[119]++;try{const h=(fe().s[120]++,c.split(":")[0]),m=(fe().s[121]++,h.match(/^\S+?\[\d+\]\.[^[]+/)[0]);fe().s[122]++,Q4.unset(s,m)}catch(h){fe().s[123]++,console.warn(c+" "+h)}}else fe().b[45][1]++}}else fe().b[44][1]++;fe().s[124]++,e.glyphs!==this.state.mapStyle.glyphs?(fe().b[46][0]++,fe().s[125]++,this.updateFonts(e.glyphs)):fe().b[46][1]++,fe().s[126]++,e.sprite!==this.state.mapStyle.sprite?(fe().b[47][0]++,fe().s[127]++,this.updateIcons(e.sprite)):fe().b[47][1]++,fe().s[128]++,t.addRevision?(fe().b[48][0]++,fe().s[129]++,this.revisionStore.addRevision(e)):fe().b[48][1]++,fe().s[130]++,t.save?(fe().b[49][0]++,fe().s[131]++,this.saveStyle(e)):fe().b[49][1]++,fe().s[132]++,this.setState({mapStyle:e,dirtyMapStyle:s,errors:o},()=>{fe().f[29]++,fe().s[133]++,this.fetchSources(),fe().s[134]++,this.setStateInUrl()})});onUndo=(fe().s[135]++,()=>{fe().f[30]++;const e=(fe().s[136]++,this.revisionStore.undo()),t=(fe().s[137]++,vUe(this.state.mapStyle,e));fe().s[138]++,this.onStyleChanged(e,{addRevision:!1}),fe().s[139]++,this.setState({infos:t})});onRedo=(fe().s[140]++,()=>{fe().f[31]++;const e=(fe().s[141]++,this.revisionStore.redo()),t=(fe().s[142]++,bUe(this.state.mapStyle,e));fe().s[143]++,this.onStyleChanged(e,{addRevision:!1}),fe().s[144]++,this.setState({infos:t})});onMoveLayer=(fe().s[145]++,e=>{fe().f[32]++;let{oldIndex:t,newIndex:i}=(fe().s[146]++,e),r=(fe().s[147]++,this.state.mapStyle.layers);if(fe().s[148]++,t=mF(t,0,r.length-1),fe().s[149]++,i=mF(i,0,r.length-1),fe().s[150]++,t===i){fe().b[50][0]++,fe().s[151]++;return}else fe().b[50][1]++;fe().s[152]++,t===this.state.selectedLayerIndex?(fe().b[51][0]++,fe().s[153]++,this.setState({selectedLayerIndex:i})):fe().b[51][1]++,fe().s[154]++,r=r.slice(0),fe().s[155]++,xue(r,t,i),fe().s[156]++,this.onLayersChange(r)});onLayersChange=(fe().s[157]++,e=>{fe().f[33]++;const t=(fe().s[158]++,{...this.state.mapStyle,layers:e});fe().s[159]++,this.onStyleChanged(t)});onLayerDestroy=(fe().s[160]++,e=>{fe().f[34]++;const t=(fe().s[161]++,this.state.mapStyle.layers),i=(fe().s[162]++,t.slice(0));fe().s[163]++,i.splice(e,1),fe().s[164]++,this.onLayersChange(i)});onLayerCopy=(fe().s[165]++,e=>{fe().f[35]++;const t=(fe().s[166]++,this.state.mapStyle.layers),i=(fe().s[167]++,t.slice(0)),r=(fe().s[168]++,fF(i[e]));fe().s[169]++,r.id=r.id+"-copy",fe().s[170]++,i.splice(e,0,r),fe().s[171]++,this.onLayersChange(i)});onLayerVisibilityToggle=(fe().s[172]++,e=>{fe().f[36]++;const t=(fe().s[173]++,this.state.mapStyle.layers),i=(fe().s[174]++,t.slice(0)),r=(fe().s[175]++,{...i[e]}),o=(fe().s[176]++,"layout"in r?(fe().b[52][0]++,{...r.layout}):(fe().b[52][1]++,{}));fe().s[177]++,o.visibility=o.visibility==="none"?(fe().b[53][0]++,"visible"):(fe().b[53][1]++,"none"),fe().s[178]++,r.layout=o,fe().s[179]++,i[e]=r,fe().s[180]++,this.onLayersChange(i)});onLayerIdChange=(fe().s[181]++,(e,t,i)=>{fe().f[37]++;const r=(fe().s[182]++,this.state.mapStyle.layers.slice(0));fe().s[183]++,r[e]={...r[e],id:i},fe().s[184]++,this.onLayersChange(r)});onLayerChanged=(fe().s[185]++,(e,t)=>{fe().f[38]++;const i=(fe().s[186]++,this.state.mapStyle.layers.slice(0));fe().s[187]++,i[e]=t,fe().s[188]++,this.onLayersChange(i)});setMapState=(fe().s[189]++,e=>{fe().f[39]++,fe().s[190]++,this.setState({mapState:e},this.setStateInUrl)});setDefaultValues=(fe().s[191]++,e=>{fe().f[40]++;const t=(fe().s[192]++,fe().b[54][0]++,e.metadata||(fe().b[54][1]++,{}));if(fe().s[193]++,t["maputnik:renderer"]===void 0){fe().b[55][0]++;const i=(fe().s[194]++,{...e,metadata:{...e.metadata,"maputnik:renderer":"mlgljs"}});return fe().s[195]++,i}else return fe().b[55][1]++,fe().s[196]++,e});openStyle=(fe().s[197]++,(e,t)=>{fe().f[41]++,fe().s[198]++,this.setState({fileHandle:t}),fe().s[199]++,e=this.setDefaultValues(e),fe().s[200]++,this.onStyleChanged(e)});async fetchSources(){fe().f[42]++;const e=(fe().s[201]++,{});fe().s[202]++;for(const t of Object.keys(this.state.mapStyle.sources)){const i=(fe().s[203]++,this.state.mapStyle.sources[t]);if(fe().s[204]++,fe().b[57][0]++,i.type!=="vector"||(fe().b[57][1]++,!("url"in i)))fe().b[56][0]++,fe().s[205]++,e[t]=(fe().b[58][0]++,this.state.sources[t]||(fe().b[58][1]++,{...this.state.mapStyle.sources[t]})),fe().s[206]++,e[t].layers===void 0?(fe().b[59][0]++,fe().s[207]++,e[t].layers=[]):fe().b[59][1]++;else{fe().b[56][1]++,fe().s[208]++,e[t]={type:i.type,layers:[]};let r=(fe().s[209]++,i.url);fe().s[210]++;try{fe().s[211]++,r=JM(r,this.state.mapStyle)}catch(s){fe().s[212]++,console.warn("Failed to setFetchAccessToken: ",s)}fe().s[213]++;const o=s=>{if(fe().f[43]++,fe().s[214]++,Object.prototype.hasOwnProperty.call(s,"vector_layers"))fe().b[60][1]++;else{fe().b[60][0]++,fe().s[215]++;return}fe().s[216]++;for(const a of s.vector_layers)fe().s[217]++,e[t].layers.push(a.id)};fe().s[218]++;try{if(fe().s[219]++,r.startsWith("pmtiles://")){fe().b[61][0]++;const s=(fe().s[220]++,await new o9(r.substring(10)).getTileJson(""));fe().s[221]++,o(s)}else{fe().b[61][1]++;const s=(fe().s[222]++,await fetch(r,{mode:"cors"})),a=(fe().s[223]++,await s.json());fe().s[224]++,o(a)}}catch(s){fe().s[225]++,console.error(`Failed to process source for url: '${r}', ${s}`)}}}fe().s[226]++,FD(this.state.sources,e)?fe().b[62][1]++:(fe().b[62][0]++,fe().s[227]++,console.debug("Setting sources",e),fe().s[228]++,this.setState({sources:e}))}_getRenderer(){fe().f[44]++;const e=(fe().s[229]++,fe().b[63][0]++,this.state.mapStyle.metadata||(fe().b[63][1]++,{}));return fe().s[230]++,fe().b[64][0]++,e["maputnik:renderer"]||(fe().b[64][1]++,"mlgljs")}onMapChange=(fe().s[231]++,e=>{fe().f[45]++,fe().s[232]++,this.setState({mapView:e})});mapRenderer(){fe().f[46]++;const{mapStyle:e,dirtyMapStyle:t}=(fe().s[233]++,this.state),i=(fe().s[234]++,{mapStyle:(fe().b[65][0]++,t||(fe().b[65][1]++,e)),replaceAccessTokens:c=>(fe().f[47]++,fe().s[235]++,Ed.replaceAccessTokens(c,{allowFallback:!0})),onDataChange:c=>{fe().f[48]++,fe().s[236]++,this.layerWatcher.analyzeMap(c.map),fe().s[237]++,this.fetchSources()}}),r=(fe().s[238]++,this._getRenderer());let o;fe().s[239]++,r==="ol"?(fe().b[66][0]++,fe().s[240]++,o=ie.jsx(x_e,{...i,onChange:this.onMapChange,debugToolbox:this.state.openlayersDebugOptions.debugToolbox,onLayerSelect:c=>(fe().f[49]++,fe().s[241]++,this.onLayerSelect(+c))})):(fe().b[66][1]++,fe().s[242]++,o=ie.jsx(jpe,{...i,onChange:this.onMapChange,options:this.state.maplibreGlDebugOptions,inspectModeEnabled:this.state.mapState==="inspect",highlightedLayer:this.state.mapStyle.layers[this.state.selectedLayerIndex],onLayerSelect:this.onLayerSelect}));let s;fe().s[243]++,this.state.mapState.match(/^filter-/)?(fe().b[67][0]++,fe().s[244]++,s=this.state.mapState.replace(/^filter-/,"")):fe().b[67][1]++;const a=(fe().s[245]++,{});return fe().s[246]++,s?(fe().b[68][0]++,fe().s[247]++,a.filter=`url('#${s}')`):fe().b[68][1]++,fe().s[248]++,ie.jsx("div",{style:a,className:"maputnik-map__container","data-wd-key":"maplibre:container",children:o})}setStateInUrl=(fe().s[249]++,()=>{fe().f[50]++;const{mapState:e,mapStyle:t,isOpen:i}=(fe().s[250]++,this.state),{selectedLayerIndex:r}=(fe().s[251]++,this.state),o=(fe().s[252]++,new URL(location.href)),s=(fe().s[253]++,xF(JSON.stringify(t)));fe().s[254]++,o.searchParams.set("layer",`${s}~${r}`);const a=(fe().s[255]++,Object.entries(i).map(([c,h])=>(fe().f[51]++,fe().s[256]++,h===!0?(fe().b[69][0]++,c):(fe().b[69][1]++,null))).filter(c=>(fe().f[52]++,fe().s[257]++,c!==null)));fe().s[258]++,a.length>0?(fe().b[70][0]++,fe().s[259]++,o.searchParams.set("modal",a.join(","))):(fe().b[70][1]++,fe().s[260]++,o.searchParams.delete("modal")),fe().s[261]++,e==="map"?(fe().b[71][0]++,fe().s[262]++,o.searchParams.delete("view")):(fe().b[71][1]++,fe().s[263]++,e==="inspect"?(fe().b[72][0]++,fe().s[264]++,o.searchParams.set("view","inspect")):fe().b[72][1]++),fe().s[265]++,history.replaceState({selectedLayerIndex:r},"Maputnik",o.href)});getInitialStateFromUrl=(fe().s[266]++,e=>{fe().f[53]++;const t=(fe().s[267]++,new URL(location.href)),i=(fe().s[268]++,t.searchParams.get("modal"));if(fe().s[269]++,fe().b[74][0]++,i&&(fe().b[74][1]++,i!=="")){fe().b[73][0]++;const s=(fe().s[270]++,i.split(",")),a=(fe().s[271]++,{});fe().s[272]++,s.forEach(c=>{fe().f[54]++,fe().s[273]++,a[c]=!0}),fe().s[274]++,this.setState({isOpen:{...this.state.isOpen,...a}})}else fe().b[73][1]++;const r=(fe().s[275]++,t.searchParams.get("view"));fe().s[276]++,fe().b[76][0]++,r&&(fe().b[76][1]++,r!=="")?(fe().b[75][0]++,fe().s[277]++,this.setMapState(r)):fe().b[75][1]++;const o=(fe().s[278]++,t.searchParams.get("layer"));if(fe().s[279]++,o){fe().b[77][0]++,fe().s[280]++;try{const s=(fe().s[281]++,o.split("~")),[a,c]=(fe().s[282]++,[s[0],parseInt(s[1],10)]);let h=(fe().s[283]++,!0);if(fe().s[284]++,a!=="-"){fe().b[78][0]++;const m=(fe().s[285]++,xF(JSON.stringify(e)));fe().s[286]++,m!==parseInt(a,10)?(fe().b[79][0]++,fe().s[287]++,h=!1):fe().b[79][1]++}else fe().b[78][1]++;fe().s[288]++,h?(fe().b[80][0]++,fe().s[289]++,this.setState({selectedLayerIndex:c,selectedLayerOriginalId:e.layers[c].id})):fe().b[80][1]++}catch(s){fe().s[290]++,console.warn(s)}}else fe().b[77][1]++});onLayerSelect=(fe().s[291]++,e=>{fe().f[55]++,fe().s[292]++,this.setState({selectedLayerIndex:e,selectedLayerOriginalId:this.state.mapStyle.layers[e].id},this.setStateInUrl)});setModal(e,t){fe().f[56]++,fe().s[293]++,this.setState({isOpen:{...this.state.isOpen,[e]:t}},this.setStateInUrl)}toggleModal(e){fe().f[57]++,fe().s[294]++,this.setModal(e,!this.state.isOpen[e])}onSetFileHandle=(fe().s[295]++,e=>{fe().f[58]++,fe().s[296]++,this.setState({fileHandle:e})});onChangeOpenlayersDebug=(fe().s[297]++,(e,t)=>{fe().f[59]++,fe().s[298]++,this.setState({openlayersDebugOptions:{...this.state.openlayersDebugOptions,[e]:t}})});onChangeMaplibreGlDebug=(fe().s[299]++,(e,t)=>{fe().f[60]++,fe().s[300]++,this.setState({maplibreGlDebugOptions:{...this.state.maplibreGlDebugOptions,[e]:t}})});render(){fe().f[61]++;const e=(fe().s[301]++,fe().b[81][0]++,this.state.mapStyle.layers||(fe().b[81][1]++,[])),t=(fe().s[302]++,e.length>0?(fe().b[82][0]++,e[this.state.selectedLayerIndex]):(fe().b[82][1]++,void 0)),i=(fe().s[303]++,ie.jsx(BDe,{renderer:this._getRenderer(),mapState:this.state.mapState,mapStyle:this.state.mapStyle,inspectModeEnabled:this.state.mapState==="inspect",sources:this.state.sources,onStyleChanged:this.onStyleChanged,onStyleOpen:this.onStyleChanged,onSetMapState:this.setMapState,onToggleModal:h=>(fe().f[62]++,fe().s[304]++,this.toggleModal(h))})),r=(fe().s[305]++,this.state.isOpen.codeEditor?(fe().b[83][0]++,ie.jsx(oSe,{value:this.state.mapStyle,onChange:h=>(fe().f[63]++,fe().s[306]++,this.onStyleChanged(h)),onClose:()=>(fe().f[64]++,fe().s[307]++,this.setModal("codeEditor",!1))})):(fe().b[83][1]++,void 0)),o=(fe().s[308]++,ie.jsx(VIe,{onMoveLayer:this.onMoveLayer,onLayerDestroy:this.onLayerDestroy,onLayerCopy:this.onLayerCopy,onLayerVisibilityToggle:this.onLayerVisibilityToggle,onLayersChange:this.onLayersChange,onLayerSelect:this.onLayerSelect,selectedLayerIndex:this.state.selectedLayerIndex,layers:e,sources:this.state.sources,errors:this.state.errors})),s=(fe().s[309]++,t?(fe().b[84][0]++,ie.jsx(lDe,{layer:t,layerIndex:this.state.selectedLayerIndex,isFirstLayer:this.state.selectedLayerIndex<1,isLastLayer:this.state.selectedLayerIndex===this.state.mapStyle.layers.length-1,sources:this.state.sources,vectorLayers:this.state.vectorLayers,spec:this.state.spec,onMoveLayer:this.onMoveLayer,onLayerChanged:this.onLayerChanged,onLayerDestroy:this.onLayerDestroy,onLayerCopy:this.onLayerCopy,onLayerVisibilityToggle:this.onLayerVisibilityToggle,onLayerIdChange:this.onLayerIdChange,errors:this.state.errors},this.state.selectedLayerOriginalId)):(fe().b[84][1]++,void 0)),a=(fe().s[310]++,this.state.errors.length+this.state.infos.length>0?(fe().b[85][0]++,ie.jsx(RDe,{currentLayer:t,selectedLayerIndex:this.state.selectedLayerIndex,onLayerSelect:this.onLayerSelect,mapStyle:this.state.mapStyle,errors:this.state.errors,infos:this.state.infos})):(fe().b[85][1]++,void 0)),c=(fe().s[311]++,ie.jsxs("div",{children:[ie.jsx(kPe,{renderer:this._getRenderer(),maplibreGlDebugOptions:this.state.maplibreGlDebugOptions,openlayersDebugOptions:this.state.openlayersDebugOptions,onChangeMaplibreGlDebug:this.onChangeMaplibreGlDebug,onChangeOpenlayersDebug:this.onChangeOpenlayersDebug,isOpen:this.state.isOpen.debug,onOpenToggle:()=>(fe().f[65]++,fe().s[312]++,this.toggleModal("debug")),mapView:this.state.mapView}),ie.jsx(BPe,{isOpen:this.state.isOpen.shortcuts,onOpenToggle:()=>(fe().f[66]++,fe().s[313]++,this.toggleModal("shortcuts"))}),ie.jsx(KDe,{mapStyle:this.state.mapStyle,onStyleChanged:this.onStyleChanged,onChangeMetadataProperty:this.onChangeMetadataProperty,isOpen:this.state.isOpen.settings,onOpenToggle:()=>(fe().f[67]++,fe().s[314]++,this.toggleModal("settings"))}),ie.jsx(iPe,{mapStyle:this.state.mapStyle,onStyleChanged:this.onStyleChanged,isOpen:this.state.isOpen.export,onOpenToggle:()=>(fe().f[68]++,fe().s[315]++,this.toggleModal("export")),fileHandle:this.state.fileHandle,onSetFileHandle:this.onSetFileHandle}),ie.jsx(EPe,{isOpen:this.state.isOpen.open,onStyleOpen:this.openStyle,onOpenToggle:()=>(fe().f[69]++,fe().s[316]++,this.toggleModal("open")),fileHandle:this.state.fileHandle}),ie.jsx(_Pe,{mapStyle:this.state.mapStyle,onStyleChanged:this.onStyleChanged,isOpen:this.state.isOpen.sources,onOpenToggle:()=>(fe().f[70]++,fe().s[317]++,this.toggleModal("sources"))}),ie.jsx(RPe,{mapStyle:this.state.mapStyle,onStyleChanged:this.onStyleChanged,isOpen:this.state.isOpen.globalState,onOpenToggle:()=>(fe().f[71]++,fe().s[318]++,this.toggleModal("globalState"))})]}));return fe().s[319]++,ie.jsx(kDe,{toolbar:i,layerList:o,layerEditor:s,codeEditor:r,map:this.mapRenderer(),bottom:a,modals:c})}}const NUe=XH.createRoot(document.querySelector("#app"));NUe.render(ie.jsx(ox.Provider,{value:{className:"react-icons"},children:ie.jsx(jUe,{})}));document.querySelector(".loading").style.display="none";
//# sourceMappingURL=index-Dwi5NagZ.js.map
