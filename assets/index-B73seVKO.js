var xQ=Object.defineProperty;var wQ=(n,e,t)=>e in n?xQ(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Pn=(n,e,t)=>wQ(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function el(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function UB(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var Y3={exports:{}},vv={},$3={exports:{}},ys={},CI;function MQ(){if(CI)return ys;CI=1;/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),a=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),E=Symbol.iterator;function S(Fe){return Fe===null||typeof Fe!="object"?null:(Fe=E&&Fe[E]||Fe["@@iterator"],typeof Fe=="function"?Fe:null)}var I={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},P=Object.assign,z={};function j(Fe,He,bt){this.props=Fe,this.context=He,this.refs=z,this.updater=bt||I}j.prototype.isReactComponent={},j.prototype.setState=function(Fe,He){if(typeof Fe!="object"&&typeof Fe!="function"&&Fe!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Fe,He,"setState")},j.prototype.forceUpdate=function(Fe){this.updater.enqueueForceUpdate(this,Fe,"forceUpdate")};function q(){}q.prototype=j.prototype;function Y(Fe,He,bt){this.props=Fe,this.context=He,this.refs=z,this.updater=bt||I}var ie=Y.prototype=new q;ie.constructor=Y,P(ie,j.prototype),ie.isPureReactComponent=!0;var te=Array.isArray,V=Object.prototype.hasOwnProperty,ne={current:null},G={key:!0,ref:!0,__self:!0,__source:!0};function oe(Fe,He,bt){var Yt,gt={},Lt=null,Kt=null;if(He!=null)for(Yt in He.ref!==void 0&&(Kt=He.ref),He.key!==void 0&&(Lt=""+He.key),He)V.call(He,Yt)&&!G.hasOwnProperty(Yt)&&(gt[Yt]=He[Yt]);var Ue=arguments.length-2;if(Ue===1)gt.children=bt;else if(1<Ue){for(var Pe=Array(Ue),Be=0;Be<Ue;Be++)Pe[Be]=arguments[Be+2];gt.children=Pe}if(Fe&&Fe.defaultProps)for(Yt in Ue=Fe.defaultProps,Ue)gt[Yt]===void 0&&(gt[Yt]=Ue[Yt]);return{$$typeof:n,type:Fe,key:Lt,ref:Kt,props:gt,_owner:ne.current}}function he(Fe,He){return{$$typeof:n,type:Fe.type,key:He,ref:Fe.ref,props:Fe.props,_owner:Fe._owner}}function pe(Fe){return typeof Fe=="object"&&Fe!==null&&Fe.$$typeof===n}function Ee(Fe){var He={"=":"=0",":":"=2"};return"$"+Fe.replace(/[=:]/g,function(bt){return He[bt]})}var me=/\/+/g;function Se(Fe,He){return typeof Fe=="object"&&Fe!==null&&Fe.key!=null?Ee(""+Fe.key):He.toString(36)}function De(Fe,He,bt,Yt,gt){var Lt=typeof Fe;(Lt==="undefined"||Lt==="boolean")&&(Fe=null);var Kt=!1;if(Fe===null)Kt=!0;else switch(Lt){case"string":case"number":Kt=!0;break;case"object":switch(Fe.$$typeof){case n:case e:Kt=!0}}if(Kt)return Kt=Fe,gt=gt(Kt),Fe=Yt===""?"."+Se(Kt,0):Yt,te(gt)?(bt="",Fe!=null&&(bt=Fe.replace(me,"$&/")+"/"),De(gt,He,bt,"",function(Be){return Be})):gt!=null&&(pe(gt)&&(gt=he(gt,bt+(!gt.key||Kt&&Kt.key===gt.key?"":(""+gt.key).replace(me,"$&/")+"/")+Fe)),He.push(gt)),1;if(Kt=0,Yt=Yt===""?".":Yt+":",te(Fe))for(var Ue=0;Ue<Fe.length;Ue++){Lt=Fe[Ue];var Pe=Yt+Se(Lt,Ue);Kt+=De(Lt,He,bt,Pe,gt)}else if(Pe=S(Fe),typeof Pe=="function")for(Fe=Pe.call(Fe),Ue=0;!(Lt=Fe.next()).done;)Lt=Lt.value,Pe=Yt+Se(Lt,Ue++),Kt+=De(Lt,He,bt,Pe,gt);else if(Lt==="object")throw He=String(Fe),Error("Objects are not valid as a React child (found: "+(He==="[object Object]"?"object with keys {"+Object.keys(Fe).join(", ")+"}":He)+"). If you meant to render a collection of children, use an array instead.");return Kt}function be(Fe,He,bt){if(Fe==null)return Fe;var Yt=[],gt=0;return De(Fe,Yt,"","",function(Lt){return He.call(bt,Lt,gt++)}),Yt}function at(Fe){if(Fe._status===-1){var He=Fe._result;He=He(),He.then(function(bt){(Fe._status===0||Fe._status===-1)&&(Fe._status=1,Fe._result=bt)},function(bt){(Fe._status===0||Fe._status===-1)&&(Fe._status=2,Fe._result=bt)}),Fe._status===-1&&(Fe._status=0,Fe._result=He)}if(Fe._status===1)return Fe._result.default;throw Fe._result}var Ze={current:null},Je={transition:null},We={ReactCurrentDispatcher:Ze,ReactCurrentBatchConfig:Je,ReactCurrentOwner:ne};function Me(){throw Error("act(...) is not supported in production builds of React.")}return ys.Children={map:be,forEach:function(Fe,He,bt){be(Fe,function(){He.apply(this,arguments)},bt)},count:function(Fe){var He=0;return be(Fe,function(){He++}),He},toArray:function(Fe){return be(Fe,function(He){return He})||[]},only:function(Fe){if(!pe(Fe))throw Error("React.Children.only expected to receive a single React element child.");return Fe}},ys.Component=j,ys.Fragment=t,ys.Profiler=i,ys.PureComponent=Y,ys.StrictMode=r,ys.Suspense=d,ys.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=We,ys.act=Me,ys.cloneElement=function(Fe,He,bt){if(Fe==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+Fe+".");var Yt=P({},Fe.props),gt=Fe.key,Lt=Fe.ref,Kt=Fe._owner;if(He!=null){if(He.ref!==void 0&&(Lt=He.ref,Kt=ne.current),He.key!==void 0&&(gt=""+He.key),Fe.type&&Fe.type.defaultProps)var Ue=Fe.type.defaultProps;for(Pe in He)V.call(He,Pe)&&!G.hasOwnProperty(Pe)&&(Yt[Pe]=He[Pe]===void 0&&Ue!==void 0?Ue[Pe]:He[Pe])}var Pe=arguments.length-2;if(Pe===1)Yt.children=bt;else if(1<Pe){Ue=Array(Pe);for(var Be=0;Be<Pe;Be++)Ue[Be]=arguments[Be+2];Yt.children=Ue}return{$$typeof:n,type:Fe.type,key:gt,ref:Lt,props:Yt,_owner:Kt}},ys.createContext=function(Fe){return Fe={$$typeof:a,_currentValue:Fe,_currentValue2:Fe,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},Fe.Provider={$$typeof:s,_context:Fe},Fe.Consumer=Fe},ys.createElement=oe,ys.createFactory=function(Fe){var He=oe.bind(null,Fe);return He.type=Fe,He},ys.createRef=function(){return{current:null}},ys.forwardRef=function(Fe){return{$$typeof:o,render:Fe}},ys.isValidElement=pe,ys.lazy=function(Fe){return{$$typeof:b,_payload:{_status:-1,_result:Fe},_init:at}},ys.memo=function(Fe,He){return{$$typeof:g,type:Fe,compare:He===void 0?null:He}},ys.startTransition=function(Fe){var He=Je.transition;Je.transition={};try{Fe()}finally{Je.transition=He}},ys.unstable_act=Me,ys.useCallback=function(Fe,He){return Ze.current.useCallback(Fe,He)},ys.useContext=function(Fe){return Ze.current.useContext(Fe)},ys.useDebugValue=function(){},ys.useDeferredValue=function(Fe){return Ze.current.useDeferredValue(Fe)},ys.useEffect=function(Fe,He){return Ze.current.useEffect(Fe,He)},ys.useId=function(){return Ze.current.useId()},ys.useImperativeHandle=function(Fe,He,bt){return Ze.current.useImperativeHandle(Fe,He,bt)},ys.useInsertionEffect=function(Fe,He){return Ze.current.useInsertionEffect(Fe,He)},ys.useLayoutEffect=function(Fe,He){return Ze.current.useLayoutEffect(Fe,He)},ys.useMemo=function(Fe,He){return Ze.current.useMemo(Fe,He)},ys.useReducer=function(Fe,He,bt){return Ze.current.useReducer(Fe,He,bt)},ys.useRef=function(Fe){return Ze.current.useRef(Fe)},ys.useState=function(Fe){return Ze.current.useState(Fe)},ys.useSyncExternalStore=function(Fe,He,bt){return Ze.current.useSyncExternalStore(Fe,He,bt)},ys.useTransition=function(){return Ze.current.useTransition()},ys.version="18.3.1",ys}var _I;function za(){return _I||(_I=1,$3.exports=MQ()),$3.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bI;function SQ(){if(bI)return vv;bI=1;var n=za(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function a(o,d,g){var b,E={},S=null,I=null;g!==void 0&&(S=""+g),d.key!==void 0&&(S=""+d.key),d.ref!==void 0&&(I=d.ref);for(b in d)r.call(d,b)&&!s.hasOwnProperty(b)&&(E[b]=d[b]);if(o&&o.defaultProps)for(b in d=o.defaultProps,d)E[b]===void 0&&(E[b]=d[b]);return{$$typeof:e,type:o,key:S,ref:I,props:E,_owner:i.current}}return vv.Fragment=t,vv.jsx=a,vv.jsxs=a,vv}var xI;function EQ(){return xI||(xI=1,Y3.exports=SQ()),Y3.exports}var ue=EQ(),li=za();const nr=el(li);var rL={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},m6=nr.createContext&&nr.createContext(rL),BQ=["attr","size","title"];function OQ(n,e){if(n==null)return{};var t=IQ(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function IQ(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function r2(){return r2=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},r2.apply(this,arguments)}function wI(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function i2(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?wI(Object(t),!0).forEach(function(r){kQ(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):wI(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function kQ(n,e,t){return e=TQ(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function TQ(n){var e=PQ(n,"string");return typeof e=="symbol"?e:e+""}function PQ(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function iL(n){return n&&n.map((e,t)=>nr.createElement(e.tag,i2({key:t},e.attr),iL(e.child)))}function Vl(n){return e=>nr.createElement(KQ,r2({attr:i2({},n.attr)},e),iL(n.child))}function KQ(n){var e=t=>{var{attr:r,size:i,title:s}=n,a=OQ(n,BQ),o=i||t.size||"1em",d;return t.className&&(d=t.className),n.className&&(d=(d?d+" ":"")+n.className),nr.createElement("svg",r2({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,a,{className:d,style:i2(i2({color:n.color||t.color},t.style),n.style),height:o,width:o,xmlns:"http://www.w3.org/2000/svg"}),s&&nr.createElement("title",null,s),n.children)};return m6!==void 0?nr.createElement(m6.Consumer,null,t=>e(t)):e(rL)}var H_={},V3={exports:{}},ah={},H3={exports:{}},Z3={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MI;function DQ(){return MI||(MI=1,function(n){function e(Je,We){var Me=Je.length;Je.push(We);e:for(;0<Me;){var Fe=Me-1>>>1,He=Je[Fe];if(0<i(He,We))Je[Fe]=We,Je[Me]=He,Me=Fe;else break e}}function t(Je){return Je.length===0?null:Je[0]}function r(Je){if(Je.length===0)return null;var We=Je[0],Me=Je.pop();if(Me!==We){Je[0]=Me;e:for(var Fe=0,He=Je.length,bt=He>>>1;Fe<bt;){var Yt=2*(Fe+1)-1,gt=Je[Yt],Lt=Yt+1,Kt=Je[Lt];if(0>i(gt,Me))Lt<He&&0>i(Kt,gt)?(Je[Fe]=Kt,Je[Lt]=Me,Fe=Lt):(Je[Fe]=gt,Je[Yt]=Me,Fe=Yt);else if(Lt<He&&0>i(Kt,Me))Je[Fe]=Kt,Je[Lt]=Me,Fe=Lt;else break e}}return We}function i(Je,We){var Me=Je.sortIndex-We.sortIndex;return Me!==0?Me:Je.id-We.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();n.unstable_now=function(){return a.now()-o}}var d=[],g=[],b=1,E=null,S=3,I=!1,P=!1,z=!1,j=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,Y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ie(Je){for(var We=t(g);We!==null;){if(We.callback===null)r(g);else if(We.startTime<=Je)r(g),We.sortIndex=We.expirationTime,e(d,We);else break;We=t(g)}}function te(Je){if(z=!1,ie(Je),!P)if(t(d)!==null)P=!0,at(V);else{var We=t(g);We!==null&&Ze(te,We.startTime-Je)}}function V(Je,We){P=!1,z&&(z=!1,q(oe),oe=-1),I=!0;var Me=S;try{for(ie(We),E=t(d);E!==null&&(!(E.expirationTime>We)||Je&&!Ee());){var Fe=E.callback;if(typeof Fe=="function"){E.callback=null,S=E.priorityLevel;var He=Fe(E.expirationTime<=We);We=n.unstable_now(),typeof He=="function"?E.callback=He:E===t(d)&&r(d),ie(We)}else r(d);E=t(d)}if(E!==null)var bt=!0;else{var Yt=t(g);Yt!==null&&Ze(te,Yt.startTime-We),bt=!1}return bt}finally{E=null,S=Me,I=!1}}var ne=!1,G=null,oe=-1,he=5,pe=-1;function Ee(){return!(n.unstable_now()-pe<he)}function me(){if(G!==null){var Je=n.unstable_now();pe=Je;var We=!0;try{We=G(!0,Je)}finally{We?Se():(ne=!1,G=null)}}else ne=!1}var Se;if(typeof Y=="function")Se=function(){Y(me)};else if(typeof MessageChannel<"u"){var De=new MessageChannel,be=De.port2;De.port1.onmessage=me,Se=function(){be.postMessage(null)}}else Se=function(){j(me,0)};function at(Je){G=Je,ne||(ne=!0,Se())}function Ze(Je,We){oe=j(function(){Je(n.unstable_now())},We)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Je){Je.callback=null},n.unstable_continueExecution=function(){P||I||(P=!0,at(V))},n.unstable_forceFrameRate=function(Je){0>Je||125<Je?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):he=0<Je?Math.floor(1e3/Je):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_getFirstCallbackNode=function(){return t(d)},n.unstable_next=function(Je){switch(S){case 1:case 2:case 3:var We=3;break;default:We=S}var Me=S;S=We;try{return Je()}finally{S=Me}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(Je,We){switch(Je){case 1:case 2:case 3:case 4:case 5:break;default:Je=3}var Me=S;S=Je;try{return We()}finally{S=Me}},n.unstable_scheduleCallback=function(Je,We,Me){var Fe=n.unstable_now();switch(typeof Me=="object"&&Me!==null?(Me=Me.delay,Me=typeof Me=="number"&&0<Me?Fe+Me:Fe):Me=Fe,Je){case 1:var He=-1;break;case 2:He=250;break;case 5:He=1073741823;break;case 4:He=1e4;break;default:He=5e3}return He=Me+He,Je={id:b++,callback:We,priorityLevel:Je,startTime:Me,expirationTime:He,sortIndex:-1},Me>Fe?(Je.sortIndex=Me,e(g,Je),t(d)===null&&Je===t(g)&&(z?(q(oe),oe=-1):z=!0,Ze(te,Me-Fe))):(Je.sortIndex=He,e(d,Je),P||I||(P=!0,at(V))),Je},n.unstable_shouldYield=Ee,n.unstable_wrapCallback=function(Je){var We=S;return function(){var Me=S;S=We;try{return Je.apply(this,arguments)}finally{S=Me}}}}(Z3)),Z3}var SI;function RQ(){return SI||(SI=1,H3.exports=DQ()),H3.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EI;function FQ(){if(EI)return ah;EI=1;var n=za(),e=RQ();function t(m){for(var C="https://reactjs.org/docs/error-decoder.html?invariant="+m,F=1;F<arguments.length;F++)C+="&args[]="+encodeURIComponent(arguments[F]);return"Minified React error #"+m+"; visit "+C+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(m,C){a(m,C),a(m+"Capture",C)}function a(m,C){for(i[m]=C,m=0;m<C.length;m++)r.add(C[m])}var o=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,g=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,b={},E={};function S(m){return d.call(E,m)?!0:d.call(b,m)?!1:g.test(m)?E[m]=!0:(b[m]=!0,!1)}function I(m,C,F,Q){if(F!==null&&F.type===0)return!1;switch(typeof C){case"function":case"symbol":return!0;case"boolean":return Q?!1:F!==null?!F.acceptsBooleans:(m=m.toLowerCase().slice(0,5),m!=="data-"&&m!=="aria-");default:return!1}}function P(m,C,F,Q){if(C===null||typeof C>"u"||I(m,C,F,Q))return!0;if(Q)return!1;if(F!==null)switch(F.type){case 3:return!C;case 4:return C===!1;case 5:return isNaN(C);case 6:return isNaN(C)||1>C}return!1}function z(m,C,F,Q,le,ge,tt){this.acceptsBooleans=C===2||C===3||C===4,this.attributeName=Q,this.attributeNamespace=le,this.mustUseProperty=F,this.propertyName=m,this.type=C,this.sanitizeURL=ge,this.removeEmptyString=tt}var j={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(m){j[m]=new z(m,0,!1,m,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(m){var C=m[0];j[C]=new z(C,1,!1,m[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(m){j[m]=new z(m,2,!1,m.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(m){j[m]=new z(m,2,!1,m,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(m){j[m]=new z(m,3,!1,m.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(m){j[m]=new z(m,3,!0,m,null,!1,!1)}),["capture","download"].forEach(function(m){j[m]=new z(m,4,!1,m,null,!1,!1)}),["cols","rows","size","span"].forEach(function(m){j[m]=new z(m,6,!1,m,null,!1,!1)}),["rowSpan","start"].forEach(function(m){j[m]=new z(m,5,!1,m.toLowerCase(),null,!1,!1)});var q=/[\-:]([a-z])/g;function Y(m){return m[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(m){var C=m.replace(q,Y);j[C]=new z(C,1,!1,m,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(m){var C=m.replace(q,Y);j[C]=new z(C,1,!1,m,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(m){var C=m.replace(q,Y);j[C]=new z(C,1,!1,m,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(m){j[m]=new z(m,1,!1,m.toLowerCase(),null,!1,!1)}),j.xlinkHref=new z("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(m){j[m]=new z(m,1,!1,m.toLowerCase(),null,!0,!0)});function ie(m,C,F,Q){var le=j.hasOwnProperty(C)?j[C]:null;(le!==null?le.type!==0:Q||!(2<C.length)||C[0]!=="o"&&C[0]!=="O"||C[1]!=="n"&&C[1]!=="N")&&(P(C,F,le,Q)&&(F=null),Q||le===null?S(C)&&(F===null?m.removeAttribute(C):m.setAttribute(C,""+F)):le.mustUseProperty?m[le.propertyName]=F===null?le.type===3?!1:"":F:(C=le.attributeName,Q=le.attributeNamespace,F===null?m.removeAttribute(C):(le=le.type,F=le===3||le===4&&F===!0?"":""+F,Q?m.setAttributeNS(Q,C,F):m.setAttribute(C,F))))}var te=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,V=Symbol.for("react.element"),ne=Symbol.for("react.portal"),G=Symbol.for("react.fragment"),oe=Symbol.for("react.strict_mode"),he=Symbol.for("react.profiler"),pe=Symbol.for("react.provider"),Ee=Symbol.for("react.context"),me=Symbol.for("react.forward_ref"),Se=Symbol.for("react.suspense"),De=Symbol.for("react.suspense_list"),be=Symbol.for("react.memo"),at=Symbol.for("react.lazy"),Ze=Symbol.for("react.offscreen"),Je=Symbol.iterator;function We(m){return m===null||typeof m!="object"?null:(m=Je&&m[Je]||m["@@iterator"],typeof m=="function"?m:null)}var Me=Object.assign,Fe;function He(m){if(Fe===void 0)try{throw Error()}catch(F){var C=F.stack.trim().match(/\n( *(at )?)/);Fe=C&&C[1]||""}return`
`+Fe+m}var bt=!1;function Yt(m,C){if(!m||bt)return"";bt=!0;var F=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(C)if(C=function(){throw Error()},Object.defineProperty(C.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(C,[])}catch(xn){var Q=xn}Reflect.construct(m,[],C)}else{try{C.call()}catch(xn){Q=xn}m.call(C.prototype)}else{try{throw Error()}catch(xn){Q=xn}m()}}catch(xn){if(xn&&Q&&typeof xn.stack=="string"){for(var le=xn.stack.split(`
`),ge=Q.stack.split(`
`),tt=le.length-1,It=ge.length-1;1<=tt&&0<=It&&le[tt]!==ge[It];)It--;for(;1<=tt&&0<=It;tt--,It--)if(le[tt]!==ge[It]){if(tt!==1||It!==1)do if(tt--,It--,0>It||le[tt]!==ge[It]){var Wt=`
`+le[tt].replace(" at new "," at ");return m.displayName&&Wt.includes("<anonymous>")&&(Wt=Wt.replace("<anonymous>",m.displayName)),Wt}while(1<=tt&&0<=It);break}}}finally{bt=!1,Error.prepareStackTrace=F}return(m=m?m.displayName||m.name:"")?He(m):""}function gt(m){switch(m.tag){case 5:return He(m.type);case 16:return He("Lazy");case 13:return He("Suspense");case 19:return He("SuspenseList");case 0:case 2:case 15:return m=Yt(m.type,!1),m;case 11:return m=Yt(m.type.render,!1),m;case 1:return m=Yt(m.type,!0),m;default:return""}}function Lt(m){if(m==null)return null;if(typeof m=="function")return m.displayName||m.name||null;if(typeof m=="string")return m;switch(m){case G:return"Fragment";case ne:return"Portal";case he:return"Profiler";case oe:return"StrictMode";case Se:return"Suspense";case De:return"SuspenseList"}if(typeof m=="object")switch(m.$$typeof){case Ee:return(m.displayName||"Context")+".Consumer";case pe:return(m._context.displayName||"Context")+".Provider";case me:var C=m.render;return m=m.displayName,m||(m=C.displayName||C.name||"",m=m!==""?"ForwardRef("+m+")":"ForwardRef"),m;case be:return C=m.displayName||null,C!==null?C:Lt(m.type)||"Memo";case at:C=m._payload,m=m._init;try{return Lt(m(C))}catch{}}return null}function Kt(m){var C=m.type;switch(m.tag){case 24:return"Cache";case 9:return(C.displayName||"Context")+".Consumer";case 10:return(C._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return m=C.render,m=m.displayName||m.name||"",C.displayName||(m!==""?"ForwardRef("+m+")":"ForwardRef");case 7:return"Fragment";case 5:return C;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Lt(C);case 8:return C===oe?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof C=="function")return C.displayName||C.name||null;if(typeof C=="string")return C}return null}function Ue(m){switch(typeof m){case"boolean":case"number":case"string":case"undefined":return m;case"object":return m;default:return""}}function Pe(m){var C=m.type;return(m=m.nodeName)&&m.toLowerCase()==="input"&&(C==="checkbox"||C==="radio")}function Be(m){var C=Pe(m)?"checked":"value",F=Object.getOwnPropertyDescriptor(m.constructor.prototype,C),Q=""+m[C];if(!m.hasOwnProperty(C)&&typeof F<"u"&&typeof F.get=="function"&&typeof F.set=="function"){var le=F.get,ge=F.set;return Object.defineProperty(m,C,{configurable:!0,get:function(){return le.call(this)},set:function(tt){Q=""+tt,ge.call(this,tt)}}),Object.defineProperty(m,C,{enumerable:F.enumerable}),{getValue:function(){return Q},setValue:function(tt){Q=""+tt},stopTracking:function(){m._valueTracker=null,delete m[C]}}}}function it(m){m._valueTracker||(m._valueTracker=Be(m))}function _t(m){if(!m)return!1;var C=m._valueTracker;if(!C)return!0;var F=C.getValue(),Q="";return m&&(Q=Pe(m)?m.checked?"true":"false":m.value),m=Q,m!==F?(C.setValue(m),!0):!1}function ft(m){if(m=m||(typeof document<"u"?document:void 0),typeof m>"u")return null;try{return m.activeElement||m.body}catch{return m.body}}function Ut(m,C){var F=C.checked;return Me({},C,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:F??m._wrapperState.initialChecked})}function rn(m,C){var F=C.defaultValue==null?"":C.defaultValue,Q=C.checked!=null?C.checked:C.defaultChecked;F=Ue(C.value!=null?C.value:F),m._wrapperState={initialChecked:Q,initialValue:F,controlled:C.type==="checkbox"||C.type==="radio"?C.checked!=null:C.value!=null}}function Dt(m,C){C=C.checked,C!=null&&ie(m,"checked",C,!1)}function _n(m,C){Dt(m,C);var F=Ue(C.value),Q=C.type;if(F!=null)Q==="number"?(F===0&&m.value===""||m.value!=F)&&(m.value=""+F):m.value!==""+F&&(m.value=""+F);else if(Q==="submit"||Q==="reset"){m.removeAttribute("value");return}C.hasOwnProperty("value")?tn(m,C.type,F):C.hasOwnProperty("defaultValue")&&tn(m,C.type,Ue(C.defaultValue)),C.checked==null&&C.defaultChecked!=null&&(m.defaultChecked=!!C.defaultChecked)}function qn(m,C,F){if(C.hasOwnProperty("value")||C.hasOwnProperty("defaultValue")){var Q=C.type;if(!(Q!=="submit"&&Q!=="reset"||C.value!==void 0&&C.value!==null))return;C=""+m._wrapperState.initialValue,F||C===m.value||(m.value=C),m.defaultValue=C}F=m.name,F!==""&&(m.name=""),m.defaultChecked=!!m._wrapperState.initialChecked,F!==""&&(m.name=F)}function tn(m,C,F){(C!=="number"||ft(m.ownerDocument)!==m)&&(F==null?m.defaultValue=""+m._wrapperState.initialValue:m.defaultValue!==""+F&&(m.defaultValue=""+F))}var rr=Array.isArray;function Dn(m,C,F,Q){if(m=m.options,C){C={};for(var le=0;le<F.length;le++)C["$"+F[le]]=!0;for(F=0;F<m.length;F++)le=C.hasOwnProperty("$"+m[F].value),m[F].selected!==le&&(m[F].selected=le),le&&Q&&(m[F].defaultSelected=!0)}else{for(F=""+Ue(F),C=null,le=0;le<m.length;le++){if(m[le].value===F){m[le].selected=!0,Q&&(m[le].defaultSelected=!0);return}C!==null||m[le].disabled||(C=m[le])}C!==null&&(C.selected=!0)}}function pn(m,C){if(C.dangerouslySetInnerHTML!=null)throw Error(t(91));return Me({},C,{value:void 0,defaultValue:void 0,children:""+m._wrapperState.initialValue})}function Zn(m,C){var F=C.value;if(F==null){if(F=C.children,C=C.defaultValue,F!=null){if(C!=null)throw Error(t(92));if(rr(F)){if(1<F.length)throw Error(t(93));F=F[0]}C=F}C==null&&(C=""),F=C}m._wrapperState={initialValue:Ue(F)}}function dr(m,C){var F=Ue(C.value),Q=Ue(C.defaultValue);F!=null&&(F=""+F,F!==m.value&&(m.value=F),C.defaultValue==null&&m.defaultValue!==F&&(m.defaultValue=F)),Q!=null&&(m.defaultValue=""+Q)}function vr(m){var C=m.textContent;C===m._wrapperState.initialValue&&C!==""&&C!==null&&(m.value=C)}function Jn(m){switch(m){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Qe(m,C){return m==null||m==="http://www.w3.org/1999/xhtml"?Jn(C):m==="http://www.w3.org/2000/svg"&&C==="foreignObject"?"http://www.w3.org/1999/xhtml":m}var ce,fe=function(m){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(C,F,Q,le){MSApp.execUnsafeLocalFunction(function(){return m(C,F,Q,le)})}:m}(function(m,C){if(m.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in m)m.innerHTML=C;else{for(ce=ce||document.createElement("div"),ce.innerHTML="<svg>"+C.valueOf().toString()+"</svg>",C=ce.firstChild;m.firstChild;)m.removeChild(m.firstChild);for(;C.firstChild;)m.appendChild(C.firstChild)}});function nt(m,C){if(C){var F=m.firstChild;if(F&&F===m.lastChild&&F.nodeType===3){F.nodeValue=C;return}}m.textContent=C}var St={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ht=["Webkit","ms","Moz","O"];Object.keys(St).forEach(function(m){Ht.forEach(function(C){C=C+m.charAt(0).toUpperCase()+m.substring(1),St[C]=St[m]})});function sn(m,C,F){return C==null||typeof C=="boolean"||C===""?"":F||typeof C!="number"||C===0||St.hasOwnProperty(m)&&St[m]?(""+C).trim():C+"px"}function tr(m,C){m=m.style;for(var F in C)if(C.hasOwnProperty(F)){var Q=F.indexOf("--")===0,le=sn(F,C[F],Q);F==="float"&&(F="cssFloat"),Q?m.setProperty(F,le):m[F]=le}}var Oe=Me({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function se(m,C){if(C){if(Oe[m]&&(C.children!=null||C.dangerouslySetInnerHTML!=null))throw Error(t(137,m));if(C.dangerouslySetInnerHTML!=null){if(C.children!=null)throw Error(t(60));if(typeof C.dangerouslySetInnerHTML!="object"||!("__html"in C.dangerouslySetInnerHTML))throw Error(t(61))}if(C.style!=null&&typeof C.style!="object")throw Error(t(62))}}function ve(m,C){if(m.indexOf("-")===-1)return typeof C.is=="string";switch(m){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var p=null;function Ne(m){return m=m.target||m.srcElement||window,m.correspondingUseElement&&(m=m.correspondingUseElement),m.nodeType===3?m.parentNode:m}var Ye=null,rt=null,ct=null;function dt(m){if(m=pi(m)){if(typeof Ye!="function")throw Error(t(280));var C=m.stateNode;C&&(C=is(C),Ye(m.stateNode,m.type,C))}}function qt(m){rt?ct?ct.push(m):ct=[m]:rt=m}function Gt(){if(rt){var m=rt,C=ct;if(ct=rt=null,dt(m),C)for(m=0;m<C.length;m++)dt(C[m])}}function jt(m,C){return m(C)}function xt(){}var Tn=!1;function On(m,C,F){if(Tn)return m(C,F);Tn=!0;try{return jt(m,C,F)}finally{Tn=!1,(rt!==null||ct!==null)&&(xt(),Gt())}}function gr(m,C){var F=m.stateNode;if(F===null)return null;var Q=is(F);if(Q===null)return null;F=Q[C];e:switch(C){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(Q=!Q.disabled)||(m=m.type,Q=!(m==="button"||m==="input"||m==="select"||m==="textarea")),m=!Q;break e;default:m=!1}if(m)return null;if(F&&typeof F!="function")throw Error(t(231,C,typeof F));return F}var Er=!1;if(o)try{var on={};Object.defineProperty(on,"passive",{get:function(){Er=!0}}),window.addEventListener("test",on,on),window.removeEventListener("test",on,on)}catch{Er=!1}function Rn(m,C,F,Q,le,ge,tt,It,Wt){var xn=Array.prototype.slice.call(arguments,3);try{C.apply(F,xn)}catch(Ar){this.onError(Ar)}}var er=!1,Xr=null,Ur=!1,Dr=null,ur={onError:function(m){er=!0,Xr=m}};function mo(m,C,F,Q,le,ge,tt,It,Wt){er=!1,Xr=null,Rn.apply(ur,arguments)}function Ma(m,C,F,Q,le,ge,tt,It,Wt){if(mo.apply(this,arguments),er){if(er){var xn=Xr;er=!1,Xr=null}else throw Error(t(198));Ur||(Ur=!0,Dr=xn)}}function qi(m){var C=m,F=m;if(m.alternate)for(;C.return;)C=C.return;else{m=C;do C=m,C.flags&4098&&(F=C.return),m=C.return;while(m)}return C.tag===3?F:null}function vi(m){if(m.tag===13){var C=m.memoizedState;if(C===null&&(m=m.alternate,m!==null&&(C=m.memoizedState)),C!==null)return C.dehydrated}return null}function io(m){if(qi(m)!==m)throw Error(t(188))}function Do(m){var C=m.alternate;if(!C){if(C=qi(m),C===null)throw Error(t(188));return C!==m?null:m}for(var F=m,Q=C;;){var le=F.return;if(le===null)break;var ge=le.alternate;if(ge===null){if(Q=le.return,Q!==null){F=Q;continue}break}if(le.child===ge.child){for(ge=le.child;ge;){if(ge===F)return io(le),m;if(ge===Q)return io(le),C;ge=ge.sibling}throw Error(t(188))}if(F.return!==Q.return)F=le,Q=ge;else{for(var tt=!1,It=le.child;It;){if(It===F){tt=!0,F=le,Q=ge;break}if(It===Q){tt=!0,Q=le,F=ge;break}It=It.sibling}if(!tt){for(It=ge.child;It;){if(It===F){tt=!0,F=ge,Q=le;break}if(It===Q){tt=!0,Q=ge,F=le;break}It=It.sibling}if(!tt)throw Error(t(189))}}if(F.alternate!==Q)throw Error(t(190))}if(F.tag!==3)throw Error(t(188));return F.stateNode.current===F?m:C}function Ti(m){return m=Do(m),m!==null?ja(m):null}function ja(m){if(m.tag===5||m.tag===6)return m;for(m=m.child;m!==null;){var C=ja(m);if(C!==null)return C;m=m.sibling}return null}var Sa=e.unstable_scheduleCallback,ns=e.unstable_cancelCallback,sa=e.unstable_shouldYield,Al=e.unstable_requestPaint,uo=e.unstable_now,Fu=e.unstable_getCurrentPriorityLevel,Hl=e.unstable_ImmediatePriority,oo=e.unstable_UserBlockingPriority,Tr=e.unstable_NormalPriority,tl=e.unstable_LowPriority,Bs=e.unstable_IdlePriority,Js=null,qe=null;function wt(m){if(qe&&typeof qe.onCommitFiberRoot=="function")try{qe.onCommitFiberRoot(Js,m,void 0,(m.current.flags&128)===128)}catch{}}var vn=Math.clz32?Math.clz32:or,Yn=Math.log,hn=Math.LN2;function or(m){return m>>>=0,m===0?32:31-(Yn(m)/hn|0)|0}var Pi=64,go=4194304;function Cs(m){switch(m&-m){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return m&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return m}}function Rs(m,C){var F=m.pendingLanes;if(F===0)return 0;var Q=0,le=m.suspendedLanes,ge=m.pingedLanes,tt=F&268435455;if(tt!==0){var It=tt&~le;It!==0?Q=Cs(It):(ge&=tt,ge!==0&&(Q=Cs(ge)))}else tt=F&~le,tt!==0?Q=Cs(tt):ge!==0&&(Q=Cs(ge));if(Q===0)return 0;if(C!==0&&C!==Q&&!(C&le)&&(le=Q&-Q,ge=C&-C,le>=ge||le===16&&(ge&4194240)!==0))return C;if(Q&4&&(Q|=F&16),C=m.entangledLanes,C!==0)for(m=m.entanglements,C&=Q;0<C;)F=31-vn(C),le=1<<F,Q|=m[F],C&=~le;return Q}function SA(m,C){switch(m){case 1:case 2:case 4:return C+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return C+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ei(m,C){for(var F=m.suspendedLanes,Q=m.pingedLanes,le=m.expirationTimes,ge=m.pendingLanes;0<ge;){var tt=31-vn(ge),It=1<<tt,Wt=le[tt];Wt===-1?(!(It&F)||It&Q)&&(le[tt]=SA(It,C)):Wt<=C&&(m.expiredLanes|=It),ge&=~It}}function wi(m){return m=m.pendingLanes&-1073741825,m!==0?m:m&1073741824?1073741824:0}function nl(){var m=Pi;return Pi<<=1,!(Pi&4194240)&&(Pi=64),m}function ui(m){for(var C=[],F=0;31>F;F++)C.push(m);return C}function aa(m,C,F){m.pendingLanes|=C,C!==536870912&&(m.suspendedLanes=0,m.pingedLanes=0),m=m.eventTimes,C=31-vn(C),m[C]=F}function XA(m,C){var F=m.pendingLanes&~C;m.pendingLanes=C,m.suspendedLanes=0,m.pingedLanes=0,m.expiredLanes&=C,m.mutableReadLanes&=C,m.entangledLanes&=C,C=m.entanglements;var Q=m.eventTimes;for(m=m.expirationTimes;0<F;){var le=31-vn(F),ge=1<<le;C[le]=0,Q[le]=-1,m[le]=-1,F&=~ge}}function Ea(m,C){var F=m.entangledLanes|=C;for(m=m.entanglements;F;){var Q=31-vn(F),le=1<<Q;le&C|m[Q]&C&&(m[Q]|=C),F&=~le}}var Rr=0;function Yi(m){return m&=-m,1<m?4<m?m&268435455?16:536870912:4:1}var yo,gu,wo,Ws,Gs,Lu=!1,_l=[],Ao=null,Bo=null,Ho=null,Ba=new Map,Ms=new Map,Oa=[],ea="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function EA(m,C){switch(m){case"focusin":case"focusout":Ao=null;break;case"dragenter":case"dragleave":Bo=null;break;case"mouseover":case"mouseout":Ho=null;break;case"pointerover":case"pointerout":Ba.delete(C.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ms.delete(C.pointerId)}}function co(m,C,F,Q,le,ge){return m===null||m.nativeEvent!==ge?(m={blockedOn:C,domEventName:F,eventSystemFlags:Q,nativeEvent:ge,targetContainers:[le]},C!==null&&(C=pi(C),C!==null&&gu(C)),m):(m.eventSystemFlags|=Q,C=m.targetContainers,le!==null&&C.indexOf(le)===-1&&C.push(le),m)}function Zl(m,C,F,Q,le){switch(C){case"focusin":return Ao=co(Ao,m,C,F,Q,le),!0;case"dragenter":return Bo=co(Bo,m,C,F,Q,le),!0;case"mouseover":return Ho=co(Ho,m,C,F,Q,le),!0;case"pointerover":var ge=le.pointerId;return Ba.set(ge,co(Ba.get(ge)||null,m,C,F,Q,le)),!0;case"gotpointercapture":return ge=le.pointerId,Ms.set(ge,co(Ms.get(ge)||null,m,C,F,Q,le)),!0}return!1}function Ui(m){var C=Io(m.target);if(C!==null){var F=qi(C);if(F!==null){if(C=F.tag,C===13){if(C=vi(F),C!==null){m.blockedOn=C,Gs(m.priority,function(){wo(F)});return}}else if(C===3&&F.stateNode.current.memoizedState.isDehydrated){m.blockedOn=F.tag===3?F.stateNode.containerInfo:null;return}}}m.blockedOn=null}function Yr(m){if(m.blockedOn!==null)return!1;for(var C=m.targetContainers;0<C.length;){var F=ti(m.domEventName,m.eventSystemFlags,C[0],m.nativeEvent);if(F===null){F=m.nativeEvent;var Q=new F.constructor(F.type,F);p=Q,F.target.dispatchEvent(Q),p=null}else return C=pi(F),C!==null&&gu(C),m.blockedOn=F,!1;C.shift()}return!0}function Xl(m,C,F){Yr(m)&&F.delete(C)}function $i(){Lu=!1,Ao!==null&&Yr(Ao)&&(Ao=null),Bo!==null&&Yr(Bo)&&(Bo=null),Ho!==null&&Yr(Ho)&&(Ho=null),Ba.forEach(Xl),Ms.forEach(Xl)}function so(m,C){m.blockedOn===C&&(m.blockedOn=null,Lu||(Lu=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,$i)))}function Ki(m){function C(le){return so(le,m)}if(0<_l.length){so(_l[0],m);for(var F=1;F<_l.length;F++){var Q=_l[F];Q.blockedOn===m&&(Q.blockedOn=null)}}for(Ao!==null&&so(Ao,m),Bo!==null&&so(Bo,m),Ho!==null&&so(Ho,m),Ba.forEach(C),Ms.forEach(C),F=0;F<Oa.length;F++)Q=Oa[F],Q.blockedOn===m&&(Q.blockedOn=null);for(;0<Oa.length&&(F=Oa[0],F.blockedOn===null);)Ui(F),F.blockedOn===null&&Oa.shift()}var J=te.ReactCurrentBatchConfig,Ie=!0;function st(m,C,F,Q){var le=Rr,ge=J.transition;J.transition=null;try{Rr=1,Kr(m,C,F,Q)}finally{Rr=le,J.transition=ge}}function $t(m,C,F,Q){var le=Rr,ge=J.transition;J.transition=null;try{Rr=4,Kr(m,C,F,Q)}finally{Rr=le,J.transition=ge}}function Kr(m,C,F,Q){if(Ie){var le=ti(m,C,F,Q);if(le===null)_d(m,C,Q,$n,F),EA(m,Q);else if(Zl(le,m,C,F,Q))Q.stopPropagation();else if(EA(m,Q),C&4&&-1<ea.indexOf(m)){for(;le!==null;){var ge=pi(le);if(ge!==null&&yo(ge),ge=ti(m,C,F,Q),ge===null&&_d(m,C,Q,$n,F),ge===le)break;le=ge}le!==null&&Q.stopPropagation()}else _d(m,C,Q,null,F)}}var $n=null;function ti(m,C,F,Q){if($n=null,m=Ne(Q),m=Io(m),m!==null)if(C=qi(m),C===null)m=null;else if(F=C.tag,F===13){if(m=vi(C),m!==null)return m;m=null}else if(F===3){if(C.stateNode.current.memoizedState.isDehydrated)return C.tag===3?C.stateNode.containerInfo:null;m=null}else C!==m&&(m=null);return $n=m,null}function Ai(m){switch(m){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Fu()){case Hl:return 1;case oo:return 4;case Tr:case tl:return 16;case Bs:return 536870912;default:return 16}default:return 16}}var Br=null,xr=null,zi=null;function Zi(){if(zi)return zi;var m,C=xr,F=C.length,Q,le="value"in Br?Br.value:Br.textContent,ge=le.length;for(m=0;m<F&&C[m]===le[m];m++);var tt=F-m;for(Q=1;Q<=tt&&C[F-Q]===le[ge-Q];Q++);return zi=le.slice(m,1<Q?1-Q:void 0)}function Si(m){var C=m.keyCode;return"charCode"in m?(m=m.charCode,m===0&&C===13&&(m=13)):m=C,m===10&&(m=13),32<=m||m===13?m:0}function Wr(){return!0}function Mo(){return!1}function Di(m){function C(F,Q,le,ge,tt){this._reactName=F,this._targetInst=le,this.type=Q,this.nativeEvent=ge,this.target=tt,this.currentTarget=null;for(var It in m)m.hasOwnProperty(It)&&(F=m[It],this[It]=F?F(ge):ge[It]);return this.isDefaultPrevented=(ge.defaultPrevented!=null?ge.defaultPrevented:ge.returnValue===!1)?Wr:Mo,this.isPropagationStopped=Mo,this}return Me(C.prototype,{preventDefault:function(){this.defaultPrevented=!0;var F=this.nativeEvent;F&&(F.preventDefault?F.preventDefault():typeof F.returnValue!="unknown"&&(F.returnValue=!1),this.isDefaultPrevented=Wr)},stopPropagation:function(){var F=this.nativeEvent;F&&(F.stopPropagation?F.stopPropagation():typeof F.cancelBubble!="unknown"&&(F.cancelBubble=!0),this.isPropagationStopped=Wr)},persist:function(){},isPersistent:Wr}),C}var cs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(m){return m.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pa=Di(cs),Na=Me({},cs,{view:0,detail:0}),yu=Di(Na),Qs,Nd,ma,bl=Me({},Na,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:of,button:0,buttons:0,relatedTarget:function(m){return m.relatedTarget===void 0?m.fromElement===m.srcElement?m.toElement:m.fromElement:m.relatedTarget},movementX:function(m){return"movementX"in m?m.movementX:(m!==ma&&(ma&&m.type==="mousemove"?(Qs=m.screenX-ma.screenX,Nd=m.screenY-ma.screenY):Nd=Qs=0,ma=m),Qs)},movementY:function(m){return"movementY"in m?m.movementY:Nd}}),Wc=Di(bl),Uu=Me({},bl,{dataTransfer:0}),Wd=Di(Uu),vu=Me({},Na,{relatedTarget:0}),Fs=Di(vu),BA=Me({},cs,{animationName:0,elapsedTime:0,pseudoElement:0}),cd=Di(BA),Gd=Me({},cs,{clipboardData:function(m){return"clipboardData"in m?m.clipboardData:window.clipboardData}}),bc=Di(Gd),xc=Me({},cs,{data:0}),$f=Di(xc),dd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Bp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},JA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ta(m){var C=this.nativeEvent;return C.getModifierState?C.getModifierState(m):(m=JA[m])?!!C[m]:!1}function of(){return ta}var gh=Me({},Na,{key:function(m){if(m.key){var C=dd[m.key]||m.key;if(C!=="Unidentified")return C}return m.type==="keypress"?(m=Si(m),m===13?"Enter":String.fromCharCode(m)):m.type==="keydown"||m.type==="keyup"?Bp[m.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:of,charCode:function(m){return m.type==="keypress"?Si(m):0},keyCode:function(m){return m.type==="keydown"||m.type==="keyup"?m.keyCode:0},which:function(m){return m.type==="keypress"?Si(m):m.type==="keydown"||m.type==="keyup"?m.keyCode:0}}),hd=Di(gh),sf=Me({},bl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fd=Di(sf),af=Me({},Na,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:of}),ec=Di(af),yh=Me({},cs,{propertyName:0,elapsedTime:0,pseudoElement:0}),lf=Di(yh),vh=Me({},bl,{deltaX:function(m){return"deltaX"in m?m.deltaX:"wheelDeltaX"in m?-m.wheelDeltaX:0},deltaY:function(m){return"deltaY"in m?m.deltaY:"wheelDeltaY"in m?-m.wheelDeltaY:"wheelDelta"in m?-m.wheelDelta:0},deltaZ:0,deltaMode:0}),Ch=Di(vh),xl=[9,13,27,32],_h=o&&"CompositionEvent"in window,zu=null;o&&"documentMode"in document&&(zu=document.documentMode);var lA=o&&"TextEvent"in window&&!zu,Gc=o&&(!_h||zu&&8<zu&&11>=zu),bh=" ",xh=!1;function ju(m,C){switch(m){case"keyup":return xl.indexOf(C.keyCode)!==-1;case"keydown":return C.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function uA(m){return m=m.detail,typeof m=="object"&&"data"in m?m.data:null}var Ll=!1;function Qc(m,C){switch(m){case"compositionend":return uA(C);case"keypress":return C.which!==32?null:(xh=!0,bh);case"textInput":return m=C.data,m===bh&&xh?null:m;default:return null}}function uf(m,C){if(Ll)return m==="compositionend"||!_h&&ju(m,C)?(m=Zi(),zi=xr=Br=null,Ll=!1,m):null;switch(m){case"paste":return null;case"keypress":if(!(C.ctrlKey||C.altKey||C.metaKey)||C.ctrlKey&&C.altKey){if(C.char&&1<C.char.length)return C.char;if(C.which)return String.fromCharCode(C.which)}return null;case"compositionend":return Gc&&C.locale!=="ko"?null:C.data;default:return null}}var Af={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qd(m){var C=m&&m.nodeName&&m.nodeName.toLowerCase();return C==="input"?!!Af[m.type]:C==="textarea"}function pd(m,C,F,Q){qt(Q),C=Vc(C,"onChange"),0<C.length&&(F=new pa("onChange","change",null,F,Q),m.push({event:F,listeners:C}))}var la=null,rl=null;function Zo(m){Oh(m,0)}function wh(m){var C=ii(m);if(_t(C))return m}function hm(m,C){if(m==="change")return C}var md=!1;if(o){var Cu;if(o){var Mh="oninput"in document;if(!Mh){var cf=document.createElement("div");cf.setAttribute("oninput","return;"),Mh=typeof cf.oninput=="function"}Cu=Mh}else Cu=!1;md=Cu&&(!document.documentMode||9<document.documentMode)}function wc(){la&&(la.detachEvent("onpropertychange",qd),rl=la=null)}function qd(m){if(m.propertyName==="value"&&wh(rl)){var C=[];pd(C,rl,m,Ne(m)),On(Zo,C)}}function Sh(m,C,F){m==="focusin"?(wc(),la=C,rl=F,la.attachEvent("onpropertychange",qd)):m==="focusout"&&wc()}function Eh(m){if(m==="selectionchange"||m==="keyup"||m==="keydown")return wh(rl)}function Jl(m,C){if(m==="click")return wh(C)}function Jt(m,C){if(m==="input"||m==="change")return wh(C)}function En(m,C){return m===C&&(m!==0||1/m===1/C)||m!==m&&C!==C}var ln=typeof Object.is=="function"?Object.is:En;function Fr(m,C){if(ln(m,C))return!0;if(typeof m!="object"||m===null||typeof C!="object"||C===null)return!1;var F=Object.keys(m),Q=Object.keys(C);if(F.length!==Q.length)return!1;for(Q=0;Q<F.length;Q++){var le=F[Q];if(!d.call(C,le)||!ln(m[le],C[le]))return!1}return!0}function Ei(m){for(;m&&m.firstChild;)m=m.firstChild;return m}function ho(m,C){var F=Ei(m);m=0;for(var Q;F;){if(F.nodeType===3){if(Q=m+F.textContent.length,m<=C&&Q>=C)return{node:F,offset:C-m};m=Q}e:{for(;F;){if(F.nextSibling){F=F.nextSibling;break e}F=F.parentNode}F=void 0}F=Ei(F)}}function na(m,C){return m&&C?m===C?!0:m&&m.nodeType===3?!1:C&&C.nodeType===3?na(m,C.parentNode):"contains"in m?m.contains(C):m.compareDocumentPosition?!!(m.compareDocumentPosition(C)&16):!1:!1}function rs(){for(var m=window,C=ft();C instanceof m.HTMLIFrameElement;){try{var F=typeof C.contentWindow.location.href=="string"}catch{F=!1}if(F)m=C.contentWindow;else break;C=ft(m.document)}return C}function OA(m){var C=m&&m.nodeName&&m.nodeName.toLowerCase();return C&&(C==="input"&&(m.type==="text"||m.type==="search"||m.type==="tel"||m.type==="url"||m.type==="password")||C==="textarea"||m.contentEditable==="true")}function df(m){var C=rs(),F=m.focusedElem,Q=m.selectionRange;if(C!==F&&F&&F.ownerDocument&&na(F.ownerDocument.documentElement,F)){if(Q!==null&&OA(F)){if(C=Q.start,m=Q.end,m===void 0&&(m=C),"selectionStart"in F)F.selectionStart=C,F.selectionEnd=Math.min(m,F.value.length);else if(m=(C=F.ownerDocument||document)&&C.defaultView||window,m.getSelection){m=m.getSelection();var le=F.textContent.length,ge=Math.min(Q.start,le);Q=Q.end===void 0?ge:Math.min(Q.end,le),!m.extend&&ge>Q&&(le=Q,Q=ge,ge=le),le=ho(F,ge);var tt=ho(F,Q);le&&tt&&(m.rangeCount!==1||m.anchorNode!==le.node||m.anchorOffset!==le.offset||m.focusNode!==tt.node||m.focusOffset!==tt.offset)&&(C=C.createRange(),C.setStart(le.node,le.offset),m.removeAllRanges(),ge>Q?(m.addRange(C),m.extend(tt.node,tt.offset)):(C.setEnd(tt.node,tt.offset),m.addRange(C)))}}for(C=[],m=F;m=m.parentNode;)m.nodeType===1&&C.push({element:m,left:m.scrollLeft,top:m.scrollTop});for(typeof F.focus=="function"&&F.focus(),F=0;F<C.length;F++)m=C[F],m.element.scrollLeft=m.left,m.element.scrollTop=m.top}}var Nu=o&&"documentMode"in document&&11>=document.documentMode,_u=null,bu=null,Ul=null,Wu=!1;function ao(m,C,F){var Q=F.window===F?F.document:F.nodeType===9?F:F.ownerDocument;Wu||_u==null||_u!==ft(Q)||(Q=_u,"selectionStart"in Q&&OA(Q)?Q={start:Q.selectionStart,end:Q.selectionEnd}:(Q=(Q.ownerDocument&&Q.ownerDocument.defaultView||window).getSelection(),Q={anchorNode:Q.anchorNode,anchorOffset:Q.anchorOffset,focusNode:Q.focusNode,focusOffset:Q.focusOffset}),Ul&&Fr(Ul,Q)||(Ul=Q,Q=Vc(bu,"onSelect"),0<Q.length&&(C=new pa("onSelect","select",null,C,F),m.push({event:C,listeners:Q}),C.target=_u)))}function Oo(m,C){var F={};return F[m.toLowerCase()]=C.toLowerCase(),F["Webkit"+m]="webkit"+C,F["Moz"+m]="moz"+C,F}var gd={animationend:Oo("Animation","AnimationEnd"),animationiteration:Oo("Animation","AnimationIteration"),animationstart:Oo("Animation","AnimationStart"),transitionend:Oo("Transition","TransitionEnd")},yd={},eu={};o&&(eu=document.createElement("div").style,"AnimationEvent"in window||(delete gd.animationend.animation,delete gd.animationiteration.animation,delete gd.animationstart.animation),"TransitionEvent"in window||delete gd.transitionend.transition);function AA(m){if(yd[m])return yd[m];if(!gd[m])return m;var C=gd[m],F;for(F in C)if(C.hasOwnProperty(F)&&F in eu)return yd[m]=C[F];return m}var zl=AA("animationend"),tc=AA("animationiteration"),cA=AA("animationstart"),tu=AA("transitionend"),qc=new Map,vd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Wa(m,C){qc.set(m,C),s(C,[m])}for(var Yc=0;Yc<vd.length;Yc++){var Cd=vd[Yc],nc=Cd.toLowerCase(),Bh=Cd[0].toUpperCase()+Cd.slice(1);Wa(nc,"on"+Bh)}Wa(zl,"onAnimationEnd"),Wa(tc,"onAnimationIteration"),Wa(cA,"onAnimationStart"),Wa("dblclick","onDoubleClick"),Wa("focusin","onFocus"),Wa("focusout","onBlur"),Wa(tu,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$c=new Set("cancel close invalid load scroll toggle".split(" ").concat(Gu));function rc(m,C,F){var Q=m.type||"unknown-event";m.currentTarget=F,Ma(Q,C,void 0,m),m.currentTarget=null}function Oh(m,C){C=(C&4)!==0;for(var F=0;F<m.length;F++){var Q=m[F],le=Q.event;Q=Q.listeners;e:{var ge=void 0;if(C)for(var tt=Q.length-1;0<=tt;tt--){var It=Q[tt],Wt=It.instance,xn=It.currentTarget;if(It=It.listener,Wt!==ge&&le.isPropagationStopped())break e;rc(le,It,xn),ge=Wt}else for(tt=0;tt<Q.length;tt++){if(It=Q[tt],Wt=It.instance,xn=It.currentTarget,It=It.listener,Wt!==ge&&le.isPropagationStopped())break e;rc(le,It,xn),ge=Wt}}}if(Ur)throw m=Dr,Ur=!1,Dr=null,m}function ds(m,C){var F=C[Ih];F===void 0&&(F=C[Ih]=new Set);var Q=m+"__bubble";F.has(Q)||(Yd(C,m,2,!1),F.add(Q))}function Mc(m,C,F){var Q=0;C&&(Q|=4),Yd(F,m,Q,C)}var IA="_reactListening"+Math.random().toString(36).slice(2);function Qu(m){if(!m[IA]){m[IA]=!0,r.forEach(function(F){F!=="selectionchange"&&($c.has(F)||Mc(F,!1,m),Mc(F,!0,m))});var C=m.nodeType===9?m:m.ownerDocument;C===null||C[IA]||(C[IA]=!0,Mc("selectionchange",!1,C))}}function Yd(m,C,F,Q){switch(Ai(C)){case 1:var le=st;break;case 4:le=$t;break;default:le=Kr}F=le.bind(null,C,F,m),le=void 0,!Er||C!=="touchstart"&&C!=="touchmove"&&C!=="wheel"||(le=!0),Q?le!==void 0?m.addEventListener(C,F,{capture:!0,passive:le}):m.addEventListener(C,F,!0):le!==void 0?m.addEventListener(C,F,{passive:le}):m.addEventListener(C,F,!1)}function _d(m,C,F,Q,le){var ge=Q;if(!(C&1)&&!(C&2)&&Q!==null)e:for(;;){if(Q===null)return;var tt=Q.tag;if(tt===3||tt===4){var It=Q.stateNode.containerInfo;if(It===le||It.nodeType===8&&It.parentNode===le)break;if(tt===4)for(tt=Q.return;tt!==null;){var Wt=tt.tag;if((Wt===3||Wt===4)&&(Wt=tt.stateNode.containerInfo,Wt===le||Wt.nodeType===8&&Wt.parentNode===le))return;tt=tt.return}for(;It!==null;){if(tt=Io(It),tt===null)return;if(Wt=tt.tag,Wt===5||Wt===6){Q=ge=tt;continue e}It=It.parentNode}}Q=Q.return}On(function(){var xn=ge,Ar=Ne(F),Cr=[];e:{var ir=qc.get(m);if(ir!==void 0){var qr=pa,oi=m;switch(m){case"keypress":if(Si(F)===0)break e;case"keydown":case"keyup":qr=hd;break;case"focusin":oi="focus",qr=Fs;break;case"focusout":oi="blur",qr=Fs;break;case"beforeblur":case"afterblur":qr=Fs;break;case"click":if(F.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":qr=Wc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":qr=Wd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":qr=ec;break;case zl:case tc:case cA:qr=cd;break;case tu:qr=lf;break;case"scroll":qr=yu;break;case"wheel":qr=Ch;break;case"copy":case"cut":case"paste":qr=bc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":qr=fd}var ai=(C&4)!==0,yl=!ai&&m==="scroll",cn=ai?ir!==null?ir+"Capture":null:ir;ai=[];for(var Xt=xn,dn;Xt!==null;){dn=Xt;var _r=dn.stateNode;if(dn.tag===5&&_r!==null&&(dn=_r,cn!==null&&(_r=gr(Xt,cn),_r!=null&&ai.push(ic(Xt,_r,dn)))),yl)break;Xt=Xt.return}0<ai.length&&(ir=new qr(ir,oi,null,F,Ar),Cr.push({event:ir,listeners:ai}))}}if(!(C&7)){e:{if(ir=m==="mouseover"||m==="pointerover",qr=m==="mouseout"||m==="pointerout",ir&&F!==p&&(oi=F.relatedTarget||F.fromElement)&&(Io(oi)||oi[xu]))break e;if((qr||ir)&&(ir=Ar.window===Ar?Ar:(ir=Ar.ownerDocument)?ir.defaultView||ir.parentWindow:window,qr?(oi=F.relatedTarget||F.toElement,qr=xn,oi=oi?Io(oi):null,oi!==null&&(yl=qi(oi),oi!==yl||oi.tag!==5&&oi.tag!==6)&&(oi=null)):(qr=null,oi=xn),qr!==oi)){if(ai=Wc,_r="onMouseLeave",cn="onMouseEnter",Xt="mouse",(m==="pointerout"||m==="pointerover")&&(ai=fd,_r="onPointerLeave",cn="onPointerEnter",Xt="pointer"),yl=qr==null?ir:ii(qr),dn=oi==null?ir:ii(oi),ir=new ai(_r,Xt+"leave",qr,F,Ar),ir.target=yl,ir.relatedTarget=dn,_r=null,Io(Ar)===xn&&(ai=new ai(cn,Xt+"enter",oi,F,Ar),ai.target=dn,ai.relatedTarget=yl,_r=ai),yl=_r,qr&&oi)t:{for(ai=qr,cn=oi,Xt=0,dn=ai;dn;dn=kA(dn))Xt++;for(dn=0,_r=cn;_r;_r=kA(_r))dn++;for(;0<Xt-dn;)ai=kA(ai),Xt--;for(;0<dn-Xt;)cn=kA(cn),dn--;for(;Xt--;){if(ai===cn||cn!==null&&ai===cn.alternate)break t;ai=kA(ai),cn=kA(cn)}ai=null}else ai=null;qr!==null&&Bi(Cr,ir,qr,ai,!1),oi!==null&&yl!==null&&Bi(Cr,yl,oi,ai,!0)}}e:{if(ir=xn?ii(xn):window,qr=ir.nodeName&&ir.nodeName.toLowerCase(),qr==="select"||qr==="input"&&ir.type==="file")var si=hm;else if(Qd(ir))if(md)si=Jt;else{si=Eh;var Oi=Sh}else(qr=ir.nodeName)&&qr.toLowerCase()==="input"&&(ir.type==="checkbox"||ir.type==="radio")&&(si=Jl);if(si&&(si=si(m,xn))){pd(Cr,si,F,Ar);break e}Oi&&Oi(m,ir,xn),m==="focusout"&&(Oi=ir._wrapperState)&&Oi.controlled&&ir.type==="number"&&tn(ir,"number",ir.value)}switch(Oi=xn?ii(xn):window,m){case"focusin":(Qd(Oi)||Oi.contentEditable==="true")&&(_u=Oi,bu=xn,Ul=null);break;case"focusout":Ul=bu=_u=null;break;case"mousedown":Wu=!0;break;case"contextmenu":case"mouseup":case"dragend":Wu=!1,ao(Cr,F,Ar);break;case"selectionchange":if(Nu)break;case"keydown":case"keyup":ao(Cr,F,Ar)}var Ii;if(_h)e:{switch(m){case"compositionstart":var ji="onCompositionStart";break e;case"compositionend":ji="onCompositionEnd";break e;case"compositionupdate":ji="onCompositionUpdate";break e}ji=void 0}else Ll?ju(m,F)&&(ji="onCompositionEnd"):m==="keydown"&&F.keyCode===229&&(ji="onCompositionStart");ji&&(Gc&&F.locale!=="ko"&&(Ll||ji!=="onCompositionStart"?ji==="onCompositionEnd"&&Ll&&(Ii=Zi()):(Br=Ar,xr="value"in Br?Br.value:Br.textContent,Ll=!0)),Oi=Vc(xn,ji),0<Oi.length&&(ji=new $f(ji,m,null,F,Ar),Cr.push({event:ji,listeners:Oi}),Ii?ji.data=Ii:(Ii=uA(F),Ii!==null&&(ji.data=Ii)))),(Ii=lA?Qc(m,F):uf(m,F))&&(xn=Vc(xn,"onBeforeInput"),0<xn.length&&(Ar=new $f("onBeforeInput","beforeinput",null,F,Ar),Cr.push({event:Ar,listeners:xn}),Ar.data=Ii))}Oh(Cr,C)})}function ic(m,C,F){return{instance:m,listener:C,currentTarget:F}}function Vc(m,C){for(var F=C+"Capture",Q=[];m!==null;){var le=m,ge=le.stateNode;le.tag===5&&ge!==null&&(le=ge,ge=gr(m,F),ge!=null&&Q.unshift(ic(m,ge,le)),ge=gr(m,C),ge!=null&&Q.push(ic(m,ge,le))),m=m.return}return Q}function kA(m){if(m===null)return null;do m=m.return;while(m&&m.tag!==5);return m||null}function Bi(m,C,F,Q,le){for(var ge=C._reactName,tt=[];F!==null&&F!==Q;){var It=F,Wt=It.alternate,xn=It.stateNode;if(Wt!==null&&Wt===Q)break;It.tag===5&&xn!==null&&(It=xn,le?(Wt=gr(F,ge),Wt!=null&&tt.unshift(ic(F,Wt,It))):le||(Wt=gr(F,ge),Wt!=null&&tt.push(ic(F,Wt,It)))),F=F.return}tt.length!==0&&m.push({event:C,listeners:tt})}var Ls=/\r\n?/g,dA=/\u0000|\uFFFD/g;function bd(m){return(typeof m=="string"?m:""+m).replace(Ls,`
`).replace(dA,"")}function Hc(m,C,F){if(C=bd(C),bd(m)!==C&&F)throw Error(t(425))}function Sc(){}var TA=null,cl=null;function hA(m,C){return m==="textarea"||m==="noscript"||typeof C.children=="string"||typeof C.children=="number"||typeof C.dangerouslySetInnerHTML=="object"&&C.dangerouslySetInnerHTML!==null&&C.dangerouslySetInnerHTML.__html!=null}var dl=typeof setTimeout=="function"?setTimeout:void 0,oc=typeof clearTimeout=="function"?clearTimeout:void 0,qu=typeof Promise=="function"?Promise:void 0,xd=typeof queueMicrotask=="function"?queueMicrotask:typeof qu<"u"?function(m){return qu.resolve(null).then(m).catch(Zc)}:dl;function Zc(m){setTimeout(function(){throw m})}function PA(m,C){var F=C,Q=0;do{var le=F.nextSibling;if(m.removeChild(F),le&&le.nodeType===8)if(F=le.data,F==="/$"){if(Q===0){m.removeChild(le),Ki(C);return}Q--}else F!=="$"&&F!=="$?"&&F!=="$!"||Q++;F=le}while(F);Ki(C)}function sc(m){for(;m!=null;m=m.nextSibling){var C=m.nodeType;if(C===1||C===3)break;if(C===8){if(C=m.data,C==="$"||C==="$!"||C==="$?")break;if(C==="/$")return null}}return m}function Yu(m){m=m.previousSibling;for(var C=0;m;){if(m.nodeType===8){var F=m.data;if(F==="$"||F==="$!"||F==="$?"){if(C===0)return m;C--}else F==="/$"&&C++}m=m.previousSibling}return null}var $u=Math.random().toString(36).slice(2),KA="__reactFiber$"+$u,Ec="__reactProps$"+$u,xu="__reactContainer$"+$u,Ih="__reactEvents$"+$u,ot="__reactListeners$"+$u,DA="__reactHandles$"+$u;function Io(m){var C=m[KA];if(C)return C;for(var F=m.parentNode;F;){if(C=F[xu]||F[KA]){if(F=C.alternate,C.child!==null||F!==null&&F.child!==null)for(m=Yu(m);m!==null;){if(F=m[KA])return F;m=Yu(m)}return C}m=F,F=m.parentNode}return null}function pi(m){return m=m[KA]||m[xu],!m||m.tag!==5&&m.tag!==6&&m.tag!==13&&m.tag!==3?null:m}function ii(m){if(m.tag===5||m.tag===6)return m.stateNode;throw Error(t(33))}function is(m){return m[Ec]||null}var fA=[],$d=-1;function Ia(m){return{current:m}}function Us(m){0>$d||(m.current=fA[$d],fA[$d]=null,$d--)}function Ss(m,C){$d++,fA[$d]=m.current,m.current=C}var Bc={},ra=Ia(Bc),ua=Ia(!1),hr=Bc;function wd(m,C){var F=m.type.contextTypes;if(!F)return Bc;var Q=m.stateNode;if(Q&&Q.__reactInternalMemoizedUnmaskedChildContext===C)return Q.__reactInternalMemoizedMaskedChildContext;var le={},ge;for(ge in F)le[ge]=C[ge];return Q&&(m=m.stateNode,m.__reactInternalMemoizedUnmaskedChildContext=C,m.__reactInternalMemoizedMaskedChildContext=le),le}function ga(m){return m=m.childContextTypes,m!=null}function Md(){Us(ua),Us(ra)}function Sd(m,C,F){if(ra.current!==Bc)throw Error(t(168));Ss(ra,C),Ss(ua,F)}function ac(m,C,F){var Q=m.stateNode;if(C=C.childContextTypes,typeof Q.getChildContext!="function")return F;Q=Q.getChildContext();for(var le in Q)if(!(le in C))throw Error(t(108,Kt(m)||"Unknown",le));return Me({},F,Q)}function nu(m){return m=(m=m.stateNode)&&m.__reactInternalMemoizedMergedChildContext||Bc,hr=ra.current,Ss(ra,m),Ss(ua,ua.current),!0}function Xi(m,C,F){var Q=m.stateNode;if(!Q)throw Error(t(169));F?(m=ac(m,C,hr),Q.__reactInternalMemoizedMergedChildContext=m,Us(ua),Us(ra),Ss(ra,m)):Us(ua),Ss(ua,F)}var hl=null,kh=!1,Oc=!1;function RA(m){hl===null?hl=[m]:hl.push(m)}function Ic(m){kh=!0,RA(m)}function FA(){if(!Oc&&hl!==null){Oc=!0;var m=0,C=Rr;try{var F=hl;for(Rr=1;m<F.length;m++){var Q=F[m];do Q=Q(!0);while(Q!==null)}hl=null,kh=!1}catch(le){throw hl!==null&&(hl=hl.slice(m+1)),Sa(Hl,FA),le}finally{Rr=C,Oc=!1}}return null}var lc=[],_s=0,Ro=null,ru=0,Ga=[],Qa=0,jl=null,Fo=1,wu="";function uc(m,C){lc[_s++]=ru,lc[_s++]=Ro,Ro=m,ru=C}function Vd(m,C,F){Ga[Qa++]=Fo,Ga[Qa++]=wu,Ga[Qa++]=jl,jl=m;var Q=Fo;m=wu;var le=32-vn(Q)-1;Q&=~(1<<le),F+=1;var ge=32-vn(C)+le;if(30<ge){var tt=le-le%5;ge=(Q&(1<<tt)-1).toString(32),Q>>=tt,le-=tt,Fo=1<<32-vn(C)+le|F<<le|Q,wu=ge+m}else Fo=1<<ge|F<<le|Q,wu=m}function LA(m){m.return!==null&&(uc(m,1),Vd(m,1,0))}function Ac(m){for(;m===Ro;)Ro=lc[--_s],lc[_s]=null,ru=lc[--_s],lc[_s]=null;for(;m===jl;)jl=Ga[--Qa],Ga[Qa]=null,wu=Ga[--Qa],Ga[Qa]=null,Fo=Ga[--Qa],Ga[Qa]=null}var ka=null,bs=null,hs=!1,Pr=null;function Hr(m,C){var F=_A(5,null,null,0);F.elementType="DELETED",F.stateNode=C,F.return=m,C=m.deletions,C===null?(m.deletions=[F],m.flags|=16):C.push(F)}function UA(m,C){switch(m.tag){case 5:var F=m.type;return C=C.nodeType!==1||F.toLowerCase()!==C.nodeName.toLowerCase()?null:C,C!==null?(m.stateNode=C,ka=m,bs=sc(C.firstChild),!0):!1;case 6:return C=m.pendingProps===""||C.nodeType!==3?null:C,C!==null?(m.stateNode=C,ka=m,bs=null,!0):!1;case 13:return C=C.nodeType!==8?null:C,C!==null?(F=jl!==null?{id:Fo,overflow:wu}:null,m.memoizedState={dehydrated:C,treeContext:F,retryLane:1073741824},F=_A(18,null,null,0),F.stateNode=C,F.return=m,m.child=F,ka=m,bs=null,!0):!1;default:return!1}}function Mu(m){return(m.mode&1)!==0&&(m.flags&128)===0}function fl(m){if(hs){var C=bs;if(C){var F=C;if(!UA(m,C)){if(Mu(m))throw Error(t(418));C=sc(F.nextSibling);var Q=ka;C&&UA(m,C)?Hr(Q,F):(m.flags=m.flags&-4097|2,hs=!1,ka=m)}}else{if(Mu(m))throw Error(t(418));m.flags=m.flags&-4097|2,hs=!1,ka=m}}}function iu(m){for(m=m.return;m!==null&&m.tag!==5&&m.tag!==3&&m.tag!==13;)m=m.return;ka=m}function Ed(m){if(m!==ka)return!1;if(!hs)return iu(m),hs=!0,!1;var C;if((C=m.tag!==3)&&!(C=m.tag!==5)&&(C=m.type,C=C!=="head"&&C!=="body"&&!hA(m.type,m.memoizedProps)),C&&(C=bs)){if(Mu(m))throw pA(),Error(t(418));for(;C;)Hr(m,C),C=sc(C.nextSibling)}if(iu(m),m.tag===13){if(m=m.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(t(317));e:{for(m=m.nextSibling,C=0;m;){if(m.nodeType===8){var F=m.data;if(F==="/$"){if(C===0){bs=sc(m.nextSibling);break e}C--}else F!=="$"&&F!=="$!"&&F!=="$?"||C++}m=m.nextSibling}bs=null}}else bs=ka?sc(m.stateNode.nextSibling):null;return!0}function pA(){for(var m=bs;m;)m=sc(m.nextSibling)}function cc(){bs=ka=null,hs=!1}function wl(m){Pr===null?Pr=[m]:Pr.push(m)}var gs=te.ReactCurrentBatchConfig;function qs(m,C,F){if(m=F.ref,m!==null&&typeof m!="function"&&typeof m!="object"){if(F._owner){if(F=F._owner,F){if(F.tag!==1)throw Error(t(309));var Q=F.stateNode}if(!Q)throw Error(t(147,m));var le=Q,ge=""+m;return C!==null&&C.ref!==null&&typeof C.ref=="function"&&C.ref._stringRef===ge?C.ref:(C=function(tt){var It=le.refs;tt===null?delete It[ge]:It[ge]=tt},C._stringRef=ge,C)}if(typeof m!="string")throw Error(t(284));if(!F._owner)throw Error(t(290,m))}return m}function Xc(m,C){throw m=Object.prototype.toString.call(C),Error(t(31,m==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":m))}function Bd(m){var C=m._init;return C(m._payload)}function mA(m){function C(cn,Xt){if(m){var dn=cn.deletions;dn===null?(cn.deletions=[Xt],cn.flags|=16):dn.push(Xt)}}function F(cn,Xt){if(!m)return null;for(;Xt!==null;)C(cn,Xt),Xt=Xt.sibling;return null}function Q(cn,Xt){for(cn=new Map;Xt!==null;)Xt.key!==null?cn.set(Xt.key,Xt):cn.set(Xt.index,Xt),Xt=Xt.sibling;return cn}function le(cn,Xt){return cn=mc(cn,Xt),cn.index=0,cn.sibling=null,cn}function ge(cn,Xt,dn){return cn.index=dn,m?(dn=cn.alternate,dn!==null?(dn=dn.index,dn<Xt?(cn.flags|=2,Xt):dn):(cn.flags|=2,Xt)):(cn.flags|=1048576,Xt)}function tt(cn){return m&&cn.alternate===null&&(cn.flags|=2),cn}function It(cn,Xt,dn,_r){return Xt===null||Xt.tag!==6?(Xt=n0(dn,cn.mode,_r),Xt.return=cn,Xt):(Xt=le(Xt,dn),Xt.return=cn,Xt)}function Wt(cn,Xt,dn,_r){var si=dn.type;return si===G?Ar(cn,Xt,dn.props.children,_r,dn.key):Xt!==null&&(Xt.elementType===si||typeof si=="object"&&si!==null&&si.$$typeof===at&&Bd(si)===Xt.type)?(_r=le(Xt,dn.props),_r.ref=qs(cn,Xt,dn),_r.return=cn,_r):(_r=t0(dn.type,dn.key,dn.props,null,cn.mode,_r),_r.ref=qs(cn,Xt,dn),_r.return=cn,_r)}function xn(cn,Xt,dn,_r){return Xt===null||Xt.tag!==4||Xt.stateNode.containerInfo!==dn.containerInfo||Xt.stateNode.implementation!==dn.implementation?(Xt=ng(dn,cn.mode,_r),Xt.return=cn,Xt):(Xt=le(Xt,dn.children||[]),Xt.return=cn,Xt)}function Ar(cn,Xt,dn,_r,si){return Xt===null||Xt.tag!==7?(Xt=ip(dn,cn.mode,_r,si),Xt.return=cn,Xt):(Xt=le(Xt,dn),Xt.return=cn,Xt)}function Cr(cn,Xt,dn){if(typeof Xt=="string"&&Xt!==""||typeof Xt=="number")return Xt=n0(""+Xt,cn.mode,dn),Xt.return=cn,Xt;if(typeof Xt=="object"&&Xt!==null){switch(Xt.$$typeof){case V:return dn=t0(Xt.type,Xt.key,Xt.props,null,cn.mode,dn),dn.ref=qs(cn,null,Xt),dn.return=cn,dn;case ne:return Xt=ng(Xt,cn.mode,dn),Xt.return=cn,Xt;case at:var _r=Xt._init;return Cr(cn,_r(Xt._payload),dn)}if(rr(Xt)||We(Xt))return Xt=ip(Xt,cn.mode,dn,null),Xt.return=cn,Xt;Xc(cn,Xt)}return null}function ir(cn,Xt,dn,_r){var si=Xt!==null?Xt.key:null;if(typeof dn=="string"&&dn!==""||typeof dn=="number")return si!==null?null:It(cn,Xt,""+dn,_r);if(typeof dn=="object"&&dn!==null){switch(dn.$$typeof){case V:return dn.key===si?Wt(cn,Xt,dn,_r):null;case ne:return dn.key===si?xn(cn,Xt,dn,_r):null;case at:return si=dn._init,ir(cn,Xt,si(dn._payload),_r)}if(rr(dn)||We(dn))return si!==null?null:Ar(cn,Xt,dn,_r,null);Xc(cn,dn)}return null}function qr(cn,Xt,dn,_r,si){if(typeof _r=="string"&&_r!==""||typeof _r=="number")return cn=cn.get(dn)||null,It(Xt,cn,""+_r,si);if(typeof _r=="object"&&_r!==null){switch(_r.$$typeof){case V:return cn=cn.get(_r.key===null?dn:_r.key)||null,Wt(Xt,cn,_r,si);case ne:return cn=cn.get(_r.key===null?dn:_r.key)||null,xn(Xt,cn,_r,si);case at:var Oi=_r._init;return qr(cn,Xt,dn,Oi(_r._payload),si)}if(rr(_r)||We(_r))return cn=cn.get(dn)||null,Ar(Xt,cn,_r,si,null);Xc(Xt,_r)}return null}function oi(cn,Xt,dn,_r){for(var si=null,Oi=null,Ii=Xt,ji=Xt=0,kl=null;Ii!==null&&ji<dn.length;ji++){Ii.index>ji?(kl=Ii,Ii=null):kl=Ii.sibling;var xs=ir(cn,Ii,dn[ji],_r);if(xs===null){Ii===null&&(Ii=kl);break}m&&Ii&&xs.alternate===null&&C(cn,Ii),Xt=ge(xs,Xt,ji),Oi===null?si=xs:Oi.sibling=xs,Oi=xs,Ii=kl}if(ji===dn.length)return F(cn,Ii),hs&&uc(cn,ji),si;if(Ii===null){for(;ji<dn.length;ji++)Ii=Cr(cn,dn[ji],_r),Ii!==null&&(Xt=ge(Ii,Xt,ji),Oi===null?si=Ii:Oi.sibling=Ii,Oi=Ii);return hs&&uc(cn,ji),si}for(Ii=Q(cn,Ii);ji<dn.length;ji++)kl=qr(Ii,cn,ji,dn[ji],_r),kl!==null&&(m&&kl.alternate!==null&&Ii.delete(kl.key===null?ji:kl.key),Xt=ge(kl,Xt,ji),Oi===null?si=kl:Oi.sibling=kl,Oi=kl);return m&&Ii.forEach(function(nd){return C(cn,nd)}),hs&&uc(cn,ji),si}function ai(cn,Xt,dn,_r){var si=We(dn);if(typeof si!="function")throw Error(t(150));if(dn=si.call(dn),dn==null)throw Error(t(151));for(var Oi=si=null,Ii=Xt,ji=Xt=0,kl=null,xs=dn.next();Ii!==null&&!xs.done;ji++,xs=dn.next()){Ii.index>ji?(kl=Ii,Ii=null):kl=Ii.sibling;var nd=ir(cn,Ii,xs.value,_r);if(nd===null){Ii===null&&(Ii=kl);break}m&&Ii&&nd.alternate===null&&C(cn,Ii),Xt=ge(nd,Xt,ji),Oi===null?si=nd:Oi.sibling=nd,Oi=nd,Ii=kl}if(xs.done)return F(cn,Ii),hs&&uc(cn,ji),si;if(Ii===null){for(;!xs.done;ji++,xs=dn.next())xs=Cr(cn,xs.value,_r),xs!==null&&(Xt=ge(xs,Xt,ji),Oi===null?si=xs:Oi.sibling=xs,Oi=xs);return hs&&uc(cn,ji),si}for(Ii=Q(cn,Ii);!xs.done;ji++,xs=dn.next())xs=qr(Ii,cn,ji,xs.value,_r),xs!==null&&(m&&xs.alternate!==null&&Ii.delete(xs.key===null?ji:xs.key),Xt=ge(xs,Xt,ji),Oi===null?si=xs:Oi.sibling=xs,Oi=xs);return m&&Ii.forEach(function(l1){return C(cn,l1)}),hs&&uc(cn,ji),si}function yl(cn,Xt,dn,_r){if(typeof dn=="object"&&dn!==null&&dn.type===G&&dn.key===null&&(dn=dn.props.children),typeof dn=="object"&&dn!==null){switch(dn.$$typeof){case V:e:{for(var si=dn.key,Oi=Xt;Oi!==null;){if(Oi.key===si){if(si=dn.type,si===G){if(Oi.tag===7){F(cn,Oi.sibling),Xt=le(Oi,dn.props.children),Xt.return=cn,cn=Xt;break e}}else if(Oi.elementType===si||typeof si=="object"&&si!==null&&si.$$typeof===at&&Bd(si)===Oi.type){F(cn,Oi.sibling),Xt=le(Oi,dn.props),Xt.ref=qs(cn,Oi,dn),Xt.return=cn,cn=Xt;break e}F(cn,Oi);break}else C(cn,Oi);Oi=Oi.sibling}dn.type===G?(Xt=ip(dn.props.children,cn.mode,_r,dn.key),Xt.return=cn,cn=Xt):(_r=t0(dn.type,dn.key,dn.props,null,cn.mode,_r),_r.ref=qs(cn,Xt,dn),_r.return=cn,cn=_r)}return tt(cn);case ne:e:{for(Oi=dn.key;Xt!==null;){if(Xt.key===Oi)if(Xt.tag===4&&Xt.stateNode.containerInfo===dn.containerInfo&&Xt.stateNode.implementation===dn.implementation){F(cn,Xt.sibling),Xt=le(Xt,dn.children||[]),Xt.return=cn,cn=Xt;break e}else{F(cn,Xt);break}else C(cn,Xt);Xt=Xt.sibling}Xt=ng(dn,cn.mode,_r),Xt.return=cn,cn=Xt}return tt(cn);case at:return Oi=dn._init,yl(cn,Xt,Oi(dn._payload),_r)}if(rr(dn))return oi(cn,Xt,dn,_r);if(We(dn))return ai(cn,Xt,dn,_r);Xc(cn,dn)}return typeof dn=="string"&&dn!==""||typeof dn=="number"?(dn=""+dn,Xt!==null&&Xt.tag===6?(F(cn,Xt.sibling),Xt=le(Xt,dn),Xt.return=cn,cn=Xt):(F(cn,Xt),Xt=n0(dn,cn.mode,_r),Xt.return=cn,cn=Xt),tt(cn)):F(cn,Xt)}return yl}var zs=mA(!0),kc=mA(!1),Su=Ia(null),qa=null,Vu=null,Tc=null;function Eu(){Tc=Vu=qa=null}function ya(m){var C=Su.current;Us(Su),m._currentValue=C}function Ys(m,C,F){for(;m!==null;){var Q=m.alternate;if((m.childLanes&C)!==C?(m.childLanes|=C,Q!==null&&(Q.childLanes|=C)):Q!==null&&(Q.childLanes&C)!==C&&(Q.childLanes|=C),m===F)break;m=m.return}}function ou(m,C){qa=m,Tc=Vu=null,m=m.dependencies,m!==null&&m.firstContext!==null&&(m.lanes&C&&(Bl=!0),m.firstContext=null)}function su(m){var C=m._currentValue;if(Tc!==m)if(m={context:m,memoizedValue:C,next:null},Vu===null){if(qa===null)throw Error(t(308));Vu=m,qa.dependencies={lanes:0,firstContext:m}}else Vu=Vu.next=m;return C}var zA=null;function au(m){zA===null?zA=[m]:zA.push(m)}function Pc(m,C,F,Q){var le=C.interleaved;return le===null?(F.next=F,au(C)):(F.next=le.next,le.next=F),C.interleaved=F,gA(m,Q)}function gA(m,C){m.lanes|=C;var F=m.alternate;for(F!==null&&(F.lanes|=C),F=m,m=m.return;m!==null;)m.childLanes|=C,F=m.alternate,F!==null&&(F.childLanes|=C),F=m,m=m.return;return F.tag===3?F.stateNode:null}var Ml=!1;function Od(m){m.updateQueue={baseState:m.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function k(m,C){m=m.updateQueue,C.updateQueue===m&&(C.updateQueue={baseState:m.baseState,firstBaseUpdate:m.firstBaseUpdate,lastBaseUpdate:m.lastBaseUpdate,shared:m.shared,effects:m.effects})}function l(m,C){return{eventTime:m,lane:C,tag:0,payload:null,callback:null,next:null}}function c(m,C,F){var Q=m.updateQueue;if(Q===null)return null;if(Q=Q.shared,yi&2){var le=Q.pending;return le===null?C.next=C:(C.next=le.next,le.next=C),Q.pending=C,gA(m,F)}return le=Q.interleaved,le===null?(C.next=C,au(Q)):(C.next=le.next,le.next=C),Q.interleaved=C,gA(m,F)}function _(m,C,F){if(C=C.updateQueue,C!==null&&(C=C.shared,(F&4194240)!==0)){var Q=C.lanes;Q&=m.pendingLanes,F|=Q,C.lanes=F,Ea(m,F)}}function w(m,C){var F=m.updateQueue,Q=m.alternate;if(Q!==null&&(Q=Q.updateQueue,F===Q)){var le=null,ge=null;if(F=F.firstBaseUpdate,F!==null){do{var tt={eventTime:F.eventTime,lane:F.lane,tag:F.tag,payload:F.payload,callback:F.callback,next:null};ge===null?le=ge=tt:ge=ge.next=tt,F=F.next}while(F!==null);ge===null?le=ge=C:ge=ge.next=C}else le=ge=C;F={baseState:Q.baseState,firstBaseUpdate:le,lastBaseUpdate:ge,shared:Q.shared,effects:Q.effects},m.updateQueue=F;return}m=F.lastBaseUpdate,m===null?F.firstBaseUpdate=C:m.next=C,F.lastBaseUpdate=C}function K(m,C,F,Q){var le=m.updateQueue;Ml=!1;var ge=le.firstBaseUpdate,tt=le.lastBaseUpdate,It=le.shared.pending;if(It!==null){le.shared.pending=null;var Wt=It,xn=Wt.next;Wt.next=null,tt===null?ge=xn:tt.next=xn,tt=Wt;var Ar=m.alternate;Ar!==null&&(Ar=Ar.updateQueue,It=Ar.lastBaseUpdate,It!==tt&&(It===null?Ar.firstBaseUpdate=xn:It.next=xn,Ar.lastBaseUpdate=Wt))}if(ge!==null){var Cr=le.baseState;tt=0,Ar=xn=Wt=null,It=ge;do{var ir=It.lane,qr=It.eventTime;if((Q&ir)===ir){Ar!==null&&(Ar=Ar.next={eventTime:qr,lane:0,tag:It.tag,payload:It.payload,callback:It.callback,next:null});e:{var oi=m,ai=It;switch(ir=C,qr=F,ai.tag){case 1:if(oi=ai.payload,typeof oi=="function"){Cr=oi.call(qr,Cr,ir);break e}Cr=oi;break e;case 3:oi.flags=oi.flags&-65537|128;case 0:if(oi=ai.payload,ir=typeof oi=="function"?oi.call(qr,Cr,ir):oi,ir==null)break e;Cr=Me({},Cr,ir);break e;case 2:Ml=!0}}It.callback!==null&&It.lane!==0&&(m.flags|=64,ir=le.effects,ir===null?le.effects=[It]:ir.push(It))}else qr={eventTime:qr,lane:ir,tag:It.tag,payload:It.payload,callback:It.callback,next:null},Ar===null?(xn=Ar=qr,Wt=Cr):Ar=Ar.next=qr,tt|=ir;if(It=It.next,It===null){if(It=le.shared.pending,It===null)break;ir=It,It=ir.next,ir.next=null,le.lastBaseUpdate=ir,le.shared.pending=null}}while(!0);if(Ar===null&&(Wt=Cr),le.baseState=Wt,le.firstBaseUpdate=xn,le.lastBaseUpdate=Ar,C=le.shared.interleaved,C!==null){le=C;do tt|=le.lane,le=le.next;while(le!==C)}else ge===null&&(le.shared.lanes=0);Wl|=tt,m.lanes=tt,m.memoizedState=Cr}}function N(m,C,F){if(m=C.effects,C.effects=null,m!==null)for(C=0;C<m.length;C++){var Q=m[C],le=Q.callback;if(le!==null){if(Q.callback=null,Q=F,typeof le!="function")throw Error(t(191,le));le.call(Q)}}}var $={},ee=Ia($),ae=Ia($),xe=Ia($);function ke(m){if(m===$)throw Error(t(174));return m}function Ke(m,C){switch(Ss(xe,C),Ss(ae,m),Ss(ee,$),m=C.nodeType,m){case 9:case 11:C=(C=C.documentElement)?C.namespaceURI:Qe(null,"");break;default:m=m===8?C.parentNode:C,C=m.namespaceURI||null,m=m.tagName,C=Qe(C,m)}Us(ee),Ss(ee,C)}function $e(){Us(ee),Us(ae),Us(xe)}function Xe(m){ke(xe.current);var C=ke(ee.current),F=Qe(C,m.type);C!==F&&(Ss(ae,m),Ss(ee,F))}function pt(m){ae.current===m&&(Us(ee),Us(ae))}var ut=Ia(0);function mt(m){for(var C=m;C!==null;){if(C.tag===13){var F=C.memoizedState;if(F!==null&&(F=F.dehydrated,F===null||F.data==="$?"||F.data==="$!"))return C}else if(C.tag===19&&C.memoizedProps.revealOrder!==void 0){if(C.flags&128)return C}else if(C.child!==null){C.child.return=C,C=C.child;continue}if(C===m)break;for(;C.sibling===null;){if(C.return===null||C.return===m)return null;C=C.return}C.sibling.return=C.return,C=C.sibling}return null}var vt=[];function Bt(){for(var m=0;m<vt.length;m++)vt[m]._workInProgressVersionPrimary=null;vt.length=0}var kt=te.ReactCurrentDispatcher,Rt=te.ReactCurrentBatchConfig,zt=0,Tt=null,nn=null,Zt=null,Mn=!1,Bn=!1,yn=0,In=0;function Nn(){throw Error(t(321))}function Fn(m,C){if(C===null)return!1;for(var F=0;F<C.length&&F<m.length;F++)if(!ln(m[F],C[F]))return!1;return!0}function pr(m,C,F,Q,le,ge){if(zt=ge,Tt=C,C.memoizedState=null,C.updateQueue=null,C.lanes=0,kt.current=m===null||m.memoizedState===null?Vf:ed,m=F(Q,le),Bn){ge=0;do{if(Bn=!1,yn=0,25<=ge)throw Error(t(301));ge+=1,Zt=nn=null,C.updateQueue=null,kt.current=CA,m=F(Q,le)}while(Bn)}if(kt.current=Jc,C=nn!==null&&nn.next!==null,zt=0,Zt=nn=Tt=null,Mn=!1,C)throw Error(t(300));return m}function ki(){var m=yn!==0;return yn=0,m}function Wi(){var m={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Zt===null?Tt.memoizedState=Zt=m:Zt=Zt.next=m,Zt}function Lo(){if(nn===null){var m=Tt.alternate;m=m!==null?m.memoizedState:null}else m=nn.next;var C=Zt===null?Tt.memoizedState:Zt.next;if(C!==null)Zt=C,nn=m;else{if(m===null)throw Error(t(310));nn=m,m={memoizedState:nn.memoizedState,baseState:nn.baseState,baseQueue:nn.baseQueue,queue:nn.queue,next:null},Zt===null?Tt.memoizedState=Zt=m:Zt=Zt.next=m}return Zt}function Mi(m,C){return typeof C=="function"?C(m):C}function fs(m){var C=Lo(),F=C.queue;if(F===null)throw Error(t(311));F.lastRenderedReducer=m;var Q=nn,le=Q.baseQueue,ge=F.pending;if(ge!==null){if(le!==null){var tt=le.next;le.next=ge.next,ge.next=tt}Q.baseQueue=le=ge,F.pending=null}if(le!==null){ge=le.next,Q=Q.baseState;var It=tt=null,Wt=null,xn=ge;do{var Ar=xn.lane;if((zt&Ar)===Ar)Wt!==null&&(Wt=Wt.next={lane:0,action:xn.action,hasEagerState:xn.hasEagerState,eagerState:xn.eagerState,next:null}),Q=xn.hasEagerState?xn.eagerState:m(Q,xn.action);else{var Cr={lane:Ar,action:xn.action,hasEagerState:xn.hasEagerState,eagerState:xn.eagerState,next:null};Wt===null?(It=Wt=Cr,tt=Q):Wt=Wt.next=Cr,Tt.lanes|=Ar,Wl|=Ar}xn=xn.next}while(xn!==null&&xn!==ge);Wt===null?tt=Q:Wt.next=It,ln(Q,C.memoizedState)||(Bl=!0),C.memoizedState=Q,C.baseState=tt,C.baseQueue=Wt,F.lastRenderedState=Q}if(m=F.interleaved,m!==null){le=m;do ge=le.lane,Tt.lanes|=ge,Wl|=ge,le=le.next;while(le!==m)}else le===null&&(F.lanes=0);return[C.memoizedState,F.dispatch]}function ko(m){var C=Lo(),F=C.queue;if(F===null)throw Error(t(311));F.lastRenderedReducer=m;var Q=F.dispatch,le=F.pending,ge=C.memoizedState;if(le!==null){F.pending=null;var tt=le=le.next;do ge=m(ge,tt.action),tt=tt.next;while(tt!==le);ln(ge,C.memoizedState)||(Bl=!0),C.memoizedState=ge,C.baseQueue===null&&(C.baseState=ge),F.lastRenderedState=ge}return[ge,Q]}function To(){}function vo(m,C){var F=Tt,Q=Lo(),le=C(),ge=!ln(Q.memoizedState,le);if(ge&&(Q.memoizedState=le,Bl=!0),Q=Q.queue,Aa(Jo.bind(null,F,Q,m),[m]),Q.getSnapshot!==C||ge||Zt!==null&&Zt.memoizedState.tag&1){if(F.flags|=2048,Ta(9,Xo.bind(null,F,Q,le,C),void 0,null),ps===null)throw Error(t(349));zt&30||il(F,C,le)}return le}function il(m,C,F){m.flags|=16384,m={getSnapshot:C,value:F},C=Tt.updateQueue,C===null?(C={lastEffect:null,stores:null},Tt.updateQueue=C,C.stores=[m]):(F=C.stores,F===null?C.stores=[m]:F.push(m))}function Xo(m,C,F,Q){C.value=F,C.getSnapshot=Q,ol(C)&&yA(m)}function Jo(m,C,F){return F(function(){ol(C)&&yA(m)})}function ol(m){var C=m.getSnapshot;m=m.value;try{var F=C();return!ln(m,F)}catch{return!0}}function yA(m){var C=gA(m,1);C!==null&&td(C,m,1,-1)}function lu(m){var C=Wi();return typeof m=="function"&&(m=m()),C.memoizedState=C.baseState=m,m={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Mi,lastRenderedState:m},C.queue=m,m=m.dispatch=dc.bind(null,Tt,m),[C.memoizedState,m]}function Ta(m,C,F,Q){return m={tag:m,create:C,destroy:F,deps:Q,next:null},C=Tt.updateQueue,C===null?(C={lastEffect:null,stores:null},Tt.updateQueue=C,C.lastEffect=m.next=m):(F=C.lastEffect,F===null?C.lastEffect=m.next=m:(Q=F.next,F.next=m,m.next=Q,C.lastEffect=m)),m}function Sl(){return Lo().memoizedState}function jA(m,C,F,Q){var le=Wi();Tt.flags|=m,le.memoizedState=Ta(1|C,F,void 0,Q===void 0?null:Q)}function vA(m,C,F,Q){var le=Lo();Q=Q===void 0?null:Q;var ge=void 0;if(nn!==null){var tt=nn.memoizedState;if(ge=tt.destroy,Q!==null&&Fn(Q,tt.deps)){le.memoizedState=Ta(C,F,ge,Q);return}}Tt.flags|=m,le.memoizedState=Ta(1|C,F,ge,Q)}function NA(m,C){return jA(8390656,8,m,C)}function Aa(m,C){return vA(2048,8,m,C)}function El(m,C){return vA(4,2,m,C)}function Pa(m,C){return vA(4,4,m,C)}function uu(m,C){if(typeof C=="function")return m=m(),C(m),function(){C(null)};if(C!=null)return m=m(),C.current=m,function(){C.current=null}}function os(m,C,F){return F=F!=null?F.concat([m]):null,vA(4,4,uu.bind(null,C,m),F)}function ss(){}function Bu(m,C){var F=Lo();C=C===void 0?null:C;var Q=F.memoizedState;return Q!==null&&C!==null&&Fn(C,Q[1])?Q[0]:(F.memoizedState=[m,C],m)}function $s(m,C){var F=Lo();C=C===void 0?null:C;var Q=F.memoizedState;return Q!==null&&C!==null&&Fn(C,Q[1])?Q[0]:(m=m(),F.memoizedState=[m,C],m)}function Hd(m,C,F){return zt&21?(ln(F,C)||(F=nl(),Tt.lanes|=F,Wl|=F,m.baseState=!0),C):(m.baseState&&(m.baseState=!1,Bl=!0),m.memoizedState=F)}function hf(m,C){var F=Rr;Rr=F!==0&&4>F?F:4,m(!0);var Q=Rt.transition;Rt.transition={};try{m(!1),C()}finally{Rr=F,Rt.transition=Q}}function Zd(){return Lo().memoizedState}function Op(m,C,F){var Q=Fh(m);if(F={lane:Q,action:F,hasEagerState:!1,eagerState:null,next:null},hc(m))va(C,F);else if(F=Pc(m,C,F,Q),F!==null){var le=Ju();td(F,m,Q,le),Hu(F,C,Q)}}function dc(m,C,F){var Q=Fh(m),le={lane:Q,action:F,hasEagerState:!1,eagerState:null,next:null};if(hc(m))va(C,le);else{var ge=m.alternate;if(m.lanes===0&&(ge===null||ge.lanes===0)&&(ge=C.lastRenderedReducer,ge!==null))try{var tt=C.lastRenderedState,It=ge(tt,F);if(le.hasEagerState=!0,le.eagerState=It,ln(It,tt)){var Wt=C.interleaved;Wt===null?(le.next=le,au(C)):(le.next=Wt.next,Wt.next=le),C.interleaved=le;return}}catch{}finally{}F=Pc(m,C,le,Q),F!==null&&(le=Ju(),td(F,m,Q,le),Hu(F,C,Q))}}function hc(m){var C=m.alternate;return m===Tt||C!==null&&C===Tt}function va(m,C){Bn=Mn=!0;var F=m.pending;F===null?C.next=C:(C.next=F.next,F.next=C),m.pending=C}function Hu(m,C,F){if(F&4194240){var Q=C.lanes;Q&=m.pendingLanes,F|=Q,C.lanes=F,Ea(m,F)}}var Jc={readContext:su,useCallback:Nn,useContext:Nn,useEffect:Nn,useImperativeHandle:Nn,useInsertionEffect:Nn,useLayoutEffect:Nn,useMemo:Nn,useReducer:Nn,useRef:Nn,useState:Nn,useDebugValue:Nn,useDeferredValue:Nn,useTransition:Nn,useMutableSource:Nn,useSyncExternalStore:Nn,useId:Nn,unstable_isNewReconciler:!1},Vf={readContext:su,useCallback:function(m,C){return Wi().memoizedState=[m,C===void 0?null:C],m},useContext:su,useEffect:NA,useImperativeHandle:function(m,C,F){return F=F!=null?F.concat([m]):null,jA(4194308,4,uu.bind(null,C,m),F)},useLayoutEffect:function(m,C){return jA(4194308,4,m,C)},useInsertionEffect:function(m,C){return jA(4,2,m,C)},useMemo:function(m,C){var F=Wi();return C=C===void 0?null:C,m=m(),F.memoizedState=[m,C],m},useReducer:function(m,C,F){var Q=Wi();return C=F!==void 0?F(C):C,Q.memoizedState=Q.baseState=C,m={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:m,lastRenderedState:C},Q.queue=m,m=m.dispatch=Op.bind(null,Tt,m),[Q.memoizedState,m]},useRef:function(m){var C=Wi();return m={current:m},C.memoizedState=m},useState:lu,useDebugValue:ss,useDeferredValue:function(m){return Wi().memoizedState=m},useTransition:function(){var m=lu(!1),C=m[0];return m=hf.bind(null,m[1]),Wi().memoizedState=m,[C,m]},useMutableSource:function(){},useSyncExternalStore:function(m,C,F){var Q=Tt,le=Wi();if(hs){if(F===void 0)throw Error(t(407));F=F()}else{if(F=C(),ps===null)throw Error(t(349));zt&30||il(Q,C,F)}le.memoizedState=F;var ge={value:F,getSnapshot:C};return le.queue=ge,NA(Jo.bind(null,Q,ge,m),[m]),Q.flags|=2048,Ta(9,Xo.bind(null,Q,ge,F,C),void 0,null),F},useId:function(){var m=Wi(),C=ps.identifierPrefix;if(hs){var F=wu,Q=Fo;F=(Q&~(1<<32-vn(Q)-1)).toString(32)+F,C=":"+C+"R"+F,F=yn++,0<F&&(C+="H"+F.toString(32)),C+=":"}else F=In++,C=":"+C+"r"+F.toString(32)+":";return m.memoizedState=C},unstable_isNewReconciler:!1},ed={readContext:su,useCallback:Bu,useContext:su,useEffect:Aa,useImperativeHandle:os,useInsertionEffect:El,useLayoutEffect:Pa,useMemo:$s,useReducer:fs,useRef:Sl,useState:function(){return fs(Mi)},useDebugValue:ss,useDeferredValue:function(m){var C=Lo();return Hd(C,nn.memoizedState,m)},useTransition:function(){var m=fs(Mi)[0],C=Lo().memoizedState;return[m,C]},useMutableSource:To,useSyncExternalStore:vo,useId:Zd,unstable_isNewReconciler:!1},CA={readContext:su,useCallback:Bu,useContext:su,useEffect:Aa,useImperativeHandle:os,useInsertionEffect:El,useLayoutEffect:Pa,useMemo:$s,useReducer:ko,useRef:Sl,useState:function(){return ko(Mi)},useDebugValue:ss,useDeferredValue:function(m){var C=Lo();return nn===null?C.memoizedState=m:Hd(C,nn.memoizedState,m)},useTransition:function(){var m=ko(Mi)[0],C=Lo().memoizedState;return[m,C]},useMutableSource:To,useSyncExternalStore:vo,useId:Zd,unstable_isNewReconciler:!1};function pl(m,C){if(m&&m.defaultProps){C=Me({},C),m=m.defaultProps;for(var F in m)C[F]===void 0&&(C[F]=m[F]);return C}return C}function ff(m,C,F,Q){C=m.memoizedState,F=F(Q,C),F=F==null?C:Me({},C,F),m.memoizedState=F,m.lanes===0&&(m.updateQueue.baseState=F)}var Hf={isMounted:function(m){return(m=m._reactInternals)?qi(m)===m:!1},enqueueSetState:function(m,C,F){m=m._reactInternals;var Q=Ju(),le=Fh(m),ge=l(Q,le);ge.payload=C,F!=null&&(ge.callback=F),C=c(m,ge,le),C!==null&&(td(C,m,le,Q),_(C,m,le))},enqueueReplaceState:function(m,C,F){m=m._reactInternals;var Q=Ju(),le=Fh(m),ge=l(Q,le);ge.tag=1,ge.payload=C,F!=null&&(ge.callback=F),C=c(m,ge,le),C!==null&&(td(C,m,le,Q),_(C,m,le))},enqueueForceUpdate:function(m,C){m=m._reactInternals;var F=Ju(),Q=Fh(m),le=l(F,Q);le.tag=2,C!=null&&(le.callback=C),C=c(m,le,Q),C!==null&&(td(C,m,Q,F),_(C,m,Q))}};function Zf(m,C,F,Q,le,ge,tt){return m=m.stateNode,typeof m.shouldComponentUpdate=="function"?m.shouldComponentUpdate(Q,ge,tt):C.prototype&&C.prototype.isPureReactComponent?!Fr(F,Q)||!Fr(le,ge):!0}function Xd(m,C,F){var Q=!1,le=Bc,ge=C.contextType;return typeof ge=="object"&&ge!==null?ge=su(ge):(le=ga(C)?hr:ra.current,Q=C.contextTypes,ge=(Q=Q!=null)?wd(m,le):Bc),C=new C(F,ge),m.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,C.updater=Hf,m.stateNode=C,C._reactInternals=m,Q&&(m=m.stateNode,m.__reactInternalMemoizedUnmaskedChildContext=le,m.__reactInternalMemoizedMaskedChildContext=ge),C}function Th(m,C,F,Q){m=C.state,typeof C.componentWillReceiveProps=="function"&&C.componentWillReceiveProps(F,Q),typeof C.UNSAFE_componentWillReceiveProps=="function"&&C.UNSAFE_componentWillReceiveProps(F,Q),C.state!==m&&Hf.enqueueReplaceState(C,C.state,null)}function Jd(m,C,F,Q){var le=m.stateNode;le.props=F,le.state=m.memoizedState,le.refs={},Od(m);var ge=C.contextType;typeof ge=="object"&&ge!==null?le.context=su(ge):(ge=ga(C)?hr:ra.current,le.context=wd(m,ge)),le.state=m.memoizedState,ge=C.getDerivedStateFromProps,typeof ge=="function"&&(ff(m,C,ge,F),le.state=m.memoizedState),typeof C.getDerivedStateFromProps=="function"||typeof le.getSnapshotBeforeUpdate=="function"||typeof le.UNSAFE_componentWillMount!="function"&&typeof le.componentWillMount!="function"||(C=le.state,typeof le.componentWillMount=="function"&&le.componentWillMount(),typeof le.UNSAFE_componentWillMount=="function"&&le.UNSAFE_componentWillMount(),C!==le.state&&Hf.enqueueReplaceState(le,le.state,null),K(m,F,le,Q),le.state=m.memoizedState),typeof le.componentDidMount=="function"&&(m.flags|=4194308)}function eh(m,C){try{var F="",Q=C;do F+=gt(Q),Q=Q.return;while(Q);var le=F}catch(ge){le=`
Error generating stack: `+ge.message+`
`+ge.stack}return{value:m,source:C,stack:le,digest:null}}function th(m,C,F){return{value:m,source:null,stack:F??null,digest:C??null}}function Id(m,C){try{console.error(C.value)}catch(F){setTimeout(function(){throw F})}}var pf=typeof WeakMap=="function"?WeakMap:Map;function nh(m,C,F){F=l(-1,F),F.tag=3,F.payload={element:null};var Q=C.value;return F.callback=function(){$m||($m=!0,np=Q),Id(m,C)},F}function mf(m,C,F){F=l(-1,F),F.tag=3;var Q=m.type.getDerivedStateFromError;if(typeof Q=="function"){var le=C.value;F.payload=function(){return Q(le)},F.callback=function(){Id(m,C)}}var ge=m.stateNode;return ge!==null&&typeof ge.componentDidCatch=="function"&&(F.callback=function(){Id(m,C),typeof Q!="function"&&(Rh===null?Rh=new Set([this]):Rh.add(this));var tt=C.stack;this.componentDidCatch(C.value,{componentStack:tt!==null?tt:""})}),F}function Xf(m,C,F){var Q=m.pingCache;if(Q===null){Q=m.pingCache=new pf;var le=new Set;Q.set(C,le)}else le=Q.get(C),le===void 0&&(le=new Set,Q.set(C,le));le.has(F)||(le.add(F),m=sv.bind(null,m,C,F),C.then(m,m))}function fm(m){do{var C;if((C=m.tag===13)&&(C=m.memoizedState,C=C!==null?C.dehydrated!==null:!0),C)return m;m=m.return}while(m!==null);return null}function kd(m,C,F,Q,le){return m.mode&1?(m.flags|=65536,m.lanes=le,m):(m===C?m.flags|=65536:(m.flags|=128,F.flags|=131072,F.flags&=-52805,F.tag===1&&(F.alternate===null?F.tag=17:(C=l(-1,1),C.tag=2,c(F,C,1))),F.lanes|=1),m)}var gf=te.ReactCurrentOwner,Bl=!1;function Au(m,C,F,Q){C.child=m===null?kc(C,null,F,Q):zs(C,m.child,F,Q)}function Ip(m,C,F,Q,le){F=F.render;var ge=C.ref;return ou(C,le),Q=pr(m,C,F,Q,ge,le),F=ki(),m!==null&&!Bl?(C.updateQueue=m.updateQueue,C.flags&=-2053,m.lanes&=~le,Ou(m,C,le)):(hs&&F&&LA(C),C.flags|=1,Au(m,C,Q,le),C.child)}function kp(m,C,F,Q,le){if(m===null){var ge=F.type;return typeof ge=="function"&&!zh(ge)&&ge.defaultProps===void 0&&F.compare===null&&F.defaultProps===void 0?(C.tag=15,C.type=ge,Qo(m,C,ge,Q,le)):(m=t0(F.type,null,Q,C,C.mode,le),m.ref=C.ref,m.return=C,C.child=m)}if(ge=m.child,!(m.lanes&le)){var tt=ge.memoizedProps;if(F=F.compare,F=F!==null?F:Fr,F(tt,Q)&&m.ref===C.ref)return Ou(m,C,le)}return C.flags|=1,m=mc(ge,Q),m.ref=C.ref,m.return=C,C.child=m}function Qo(m,C,F,Q,le){if(m!==null){var ge=m.memoizedProps;if(Fr(ge,Q)&&m.ref===C.ref)if(Bl=!1,C.pendingProps=Q=ge,(m.lanes&le)!==0)m.flags&131072&&(Bl=!0);else return C.lanes=m.lanes,Ou(m,C,le)}return rh(m,C,F,Q,le)}function Ph(m,C,F){var Q=C.pendingProps,le=Q.children,ge=m!==null?m.memoizedState:null;if(Q.mode==="hidden")if(!(C.mode&1))C.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ss(Iu,Es),Es|=F;else{if(!(F&1073741824))return m=ge!==null?ge.baseLanes|F:F,C.lanes=C.childLanes=1073741824,C.memoizedState={baseLanes:m,cachePool:null,transitions:null},C.updateQueue=null,Ss(Iu,Es),Es|=m,null;C.memoizedState={baseLanes:0,cachePool:null,transitions:null},Q=ge!==null?ge.baseLanes:F,Ss(Iu,Es),Es|=Q}else ge!==null?(Q=ge.baseLanes|F,C.memoizedState=null):Q=F,Ss(Iu,Es),Es|=Q;return Au(m,C,le,F),C.child}function cu(m,C){var F=C.ref;(m===null&&F!==null||m!==null&&m.ref!==F)&&(C.flags|=512,C.flags|=2097152)}function rh(m,C,F,Q,le){var ge=ga(F)?hr:ra.current;return ge=wd(C,ge),ou(C,le),F=pr(m,C,F,Q,ge,le),Q=ki(),m!==null&&!Bl?(C.updateQueue=m.updateQueue,C.flags&=-2053,m.lanes&=~le,Ou(m,C,le)):(hs&&Q&&LA(C),C.flags|=1,Au(m,C,F,le),C.child)}function Zu(m,C,F,Q,le){if(ga(F)){var ge=!0;nu(C)}else ge=!1;if(ou(C,le),C.stateNode===null)Tp(m,C),Xd(C,F,Q),Jd(C,F,Q,le),Q=!0;else if(m===null){var tt=C.stateNode,It=C.memoizedProps;tt.props=It;var Wt=tt.context,xn=F.contextType;typeof xn=="object"&&xn!==null?xn=su(xn):(xn=ga(F)?hr:ra.current,xn=wd(C,xn));var Ar=F.getDerivedStateFromProps,Cr=typeof Ar=="function"||typeof tt.getSnapshotBeforeUpdate=="function";Cr||typeof tt.UNSAFE_componentWillReceiveProps!="function"&&typeof tt.componentWillReceiveProps!="function"||(It!==Q||Wt!==xn)&&Th(C,tt,Q,xn),Ml=!1;var ir=C.memoizedState;tt.state=ir,K(C,Q,tt,le),Wt=C.memoizedState,It!==Q||ir!==Wt||ua.current||Ml?(typeof Ar=="function"&&(ff(C,F,Ar,Q),Wt=C.memoizedState),(It=Ml||Zf(C,F,It,Q,ir,Wt,xn))?(Cr||typeof tt.UNSAFE_componentWillMount!="function"&&typeof tt.componentWillMount!="function"||(typeof tt.componentWillMount=="function"&&tt.componentWillMount(),typeof tt.UNSAFE_componentWillMount=="function"&&tt.UNSAFE_componentWillMount()),typeof tt.componentDidMount=="function"&&(C.flags|=4194308)):(typeof tt.componentDidMount=="function"&&(C.flags|=4194308),C.memoizedProps=Q,C.memoizedState=Wt),tt.props=Q,tt.state=Wt,tt.context=xn,Q=It):(typeof tt.componentDidMount=="function"&&(C.flags|=4194308),Q=!1)}else{tt=C.stateNode,k(m,C),It=C.memoizedProps,xn=C.type===C.elementType?It:pl(C.type,It),tt.props=xn,Cr=C.pendingProps,ir=tt.context,Wt=F.contextType,typeof Wt=="object"&&Wt!==null?Wt=su(Wt):(Wt=ga(F)?hr:ra.current,Wt=wd(C,Wt));var qr=F.getDerivedStateFromProps;(Ar=typeof qr=="function"||typeof tt.getSnapshotBeforeUpdate=="function")||typeof tt.UNSAFE_componentWillReceiveProps!="function"&&typeof tt.componentWillReceiveProps!="function"||(It!==Cr||ir!==Wt)&&Th(C,tt,Q,Wt),Ml=!1,ir=C.memoizedState,tt.state=ir,K(C,Q,tt,le);var oi=C.memoizedState;It!==Cr||ir!==oi||ua.current||Ml?(typeof qr=="function"&&(ff(C,F,qr,Q),oi=C.memoizedState),(xn=Ml||Zf(C,F,xn,Q,ir,oi,Wt)||!1)?(Ar||typeof tt.UNSAFE_componentWillUpdate!="function"&&typeof tt.componentWillUpdate!="function"||(typeof tt.componentWillUpdate=="function"&&tt.componentWillUpdate(Q,oi,Wt),typeof tt.UNSAFE_componentWillUpdate=="function"&&tt.UNSAFE_componentWillUpdate(Q,oi,Wt)),typeof tt.componentDidUpdate=="function"&&(C.flags|=4),typeof tt.getSnapshotBeforeUpdate=="function"&&(C.flags|=1024)):(typeof tt.componentDidUpdate!="function"||It===m.memoizedProps&&ir===m.memoizedState||(C.flags|=4),typeof tt.getSnapshotBeforeUpdate!="function"||It===m.memoizedProps&&ir===m.memoizedState||(C.flags|=1024),C.memoizedProps=Q,C.memoizedState=oi),tt.props=Q,tt.state=oi,tt.context=Wt,Q=xn):(typeof tt.componentDidUpdate!="function"||It===m.memoizedProps&&ir===m.memoizedState||(C.flags|=4),typeof tt.getSnapshotBeforeUpdate!="function"||It===m.memoizedProps&&ir===m.memoizedState||(C.flags|=1024),Q=!1)}return yf(m,C,F,Q,ge,le)}function yf(m,C,F,Q,le,ge){cu(m,C);var tt=(C.flags&128)!==0;if(!Q&&!tt)return le&&Xi(C,F,!1),Ou(m,C,ge);Q=C.stateNode,gf.current=C;var It=tt&&typeof F.getDerivedStateFromError!="function"?null:Q.render();return C.flags|=1,m!==null&&tt?(C.child=zs(C,m.child,null,ge),C.child=zs(C,null,It,ge)):Au(m,C,It,ge),C.memoizedState=Q.state,le&&Xi(C,F,!0),C.child}function Jf(m){var C=m.stateNode;C.pendingContext?Sd(m,C.pendingContext,C.pendingContext!==C.context):C.context&&Sd(m,C.context,!1),Ke(m,C.containerInfo)}function Kc(m,C,F,Q,le){return cc(),wl(le),C.flags|=256,Au(m,C,F,Q),C.child}var vf={dehydrated:null,treeContext:null,retryLane:0};function Cf(m){return{baseLanes:m,cachePool:null,transitions:null}}function _f(m,C,F){var Q=C.pendingProps,le=ut.current,ge=!1,tt=(C.flags&128)!==0,It;if((It=tt)||(It=m!==null&&m.memoizedState===null?!1:(le&2)!==0),It?(ge=!0,C.flags&=-129):(m===null||m.memoizedState!==null)&&(le|=1),Ss(ut,le&1),m===null)return fl(C),m=C.memoizedState,m!==null&&(m=m.dehydrated,m!==null)?(C.mode&1?m.data==="$!"?C.lanes=8:C.lanes=1073741824:C.lanes=1,null):(tt=Q.children,m=Q.fallback,ge?(Q=C.mode,ge=C.child,tt={mode:"hidden",children:tt},!(Q&1)&&ge!==null?(ge.childLanes=0,ge.pendingProps=tt):ge=vm(tt,Q,0,null),m=ip(m,Q,F,null),ge.return=C,m.return=C,ge.sibling=m,C.child=ge,C.child.memoizedState=Cf(F),C.memoizedState=vf,m):Td(C,tt));if(le=m.memoizedState,le!==null&&(It=le.dehydrated,It!==null))return bi(m,C,tt,Q,It,le,F);if(ge){ge=Q.fallback,tt=C.mode,le=m.child,It=le.sibling;var Wt={mode:"hidden",children:Q.children};return!(tt&1)&&C.child!==le?(Q=C.child,Q.childLanes=0,Q.pendingProps=Wt,C.deletions=null):(Q=mc(le,Wt),Q.subtreeFlags=le.subtreeFlags&14680064),It!==null?ge=mc(It,ge):(ge=ip(ge,tt,F,null),ge.flags|=2),ge.return=C,Q.return=C,Q.sibling=ge,C.child=Q,Q=ge,ge=C.child,tt=m.child.memoizedState,tt=tt===null?Cf(F):{baseLanes:tt.baseLanes|F,cachePool:null,transitions:tt.transitions},ge.memoizedState=tt,ge.childLanes=m.childLanes&~F,C.memoizedState=vf,Q}return ge=m.child,m=ge.sibling,Q=mc(ge,{mode:"visible",children:Q.children}),!(C.mode&1)&&(Q.lanes=F),Q.return=C,Q.sibling=null,m!==null&&(F=C.deletions,F===null?(C.deletions=[m],C.flags|=16):F.push(m)),C.child=Q,C.memoizedState=null,Q}function Td(m,C){return C=vm({mode:"visible",children:C},m.mode,0,null),C.return=m,m.child=C}function Dc(m,C,F,Q){return Q!==null&&wl(Q),zs(C,m.child,null,F),m=Td(C,C.pendingProps.children),m.flags|=2,C.memoizedState=null,m}function bi(m,C,F,Q,le,ge,tt){if(F)return C.flags&256?(C.flags&=-257,Q=th(Error(t(422))),Dc(m,C,tt,Q)):C.memoizedState!==null?(C.child=m.child,C.flags|=128,null):(ge=Q.fallback,le=C.mode,Q=vm({mode:"visible",children:Q.children},le,0,null),ge=ip(ge,le,tt,null),ge.flags|=2,Q.return=C,ge.return=C,Q.sibling=ge,C.child=Q,C.mode&1&&zs(C,m.child,null,tt),C.child.memoizedState=Cf(tt),C.memoizedState=vf,ge);if(!(C.mode&1))return Dc(m,C,tt,null);if(le.data==="$!"){if(Q=le.nextSibling&&le.nextSibling.dataset,Q)var It=Q.dgst;return Q=It,ge=Error(t(419)),Q=th(ge,Q,void 0),Dc(m,C,tt,Q)}if(It=(tt&m.childLanes)!==0,Bl||It){if(Q=ps,Q!==null){switch(tt&-tt){case 4:le=2;break;case 16:le=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:le=32;break;case 536870912:le=268435456;break;default:le=0}le=le&(Q.suspendedLanes|tt)?0:le,le!==0&&le!==ge.retryLane&&(ge.retryLane=le,gA(m,le),td(Q,m,le,-1))}return gm(),Q=th(Error(t(421))),Dc(m,C,tt,Q)}return le.data==="$?"?(C.flags|=128,C.child=m.child,C=QA.bind(null,m),le._reactRetry=C,null):(m=ge.treeContext,bs=sc(le.nextSibling),ka=C,hs=!0,Pr=null,m!==null&&(Ga[Qa++]=Fo,Ga[Qa++]=wu,Ga[Qa++]=jl,Fo=m.id,wu=m.overflow,jl=C),C=Td(C,Q.children),C.flags|=4096,C)}function fc(m,C,F){m.lanes|=C;var Q=m.alternate;Q!==null&&(Q.lanes|=C),Ys(m.return,C,F)}function Uo(m,C,F,Q,le){var ge=m.memoizedState;ge===null?m.memoizedState={isBackwards:C,rendering:null,renderingStartTime:0,last:Q,tail:F,tailMode:le}:(ge.isBackwards=C,ge.rendering=null,ge.renderingStartTime=0,ge.last=Q,ge.tail=F,ge.tailMode=le)}function Pd(m,C,F){var Q=C.pendingProps,le=Q.revealOrder,ge=Q.tail;if(Au(m,C,Q.children,F),Q=ut.current,Q&2)Q=Q&1|2,C.flags|=128;else{if(m!==null&&m.flags&128)e:for(m=C.child;m!==null;){if(m.tag===13)m.memoizedState!==null&&fc(m,F,C);else if(m.tag===19)fc(m,F,C);else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===C)break e;for(;m.sibling===null;){if(m.return===null||m.return===C)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}Q&=1}if(Ss(ut,Q),!(C.mode&1))C.memoizedState=null;else switch(le){case"forwards":for(F=C.child,le=null;F!==null;)m=F.alternate,m!==null&&mt(m)===null&&(le=F),F=F.sibling;F=le,F===null?(le=C.child,C.child=null):(le=F.sibling,F.sibling=null),Uo(C,!1,le,F,ge);break;case"backwards":for(F=null,le=C.child,C.child=null;le!==null;){if(m=le.alternate,m!==null&&mt(m)===null){C.child=le;break}m=le.sibling,le.sibling=F,F=le,le=m}Uo(C,!0,F,null,ge);break;case"together":Uo(C,!1,null,null,void 0);break;default:C.memoizedState=null}return C.child}function Tp(m,C){!(C.mode&1)&&m!==null&&(m.alternate=null,C.alternate=null,C.flags|=2)}function Ou(m,C,F){if(m!==null&&(C.dependencies=m.dependencies),Wl|=C.lanes,!(F&C.childLanes))return null;if(m!==null&&C.child!==m.child)throw Error(t(153));if(C.child!==null){for(m=C.child,F=mc(m,m.pendingProps),C.child=F,F.return=C;m.sibling!==null;)m=m.sibling,F=F.sibling=mc(m,m.pendingProps),F.return=C;F.sibling=null}return C.child}function Ym(m,C,F){switch(C.tag){case 3:Jf(C),cc();break;case 5:Xe(C);break;case 1:ga(C.type)&&nu(C);break;case 4:Ke(C,C.stateNode.containerInfo);break;case 10:var Q=C.type._context,le=C.memoizedProps.value;Ss(Su,Q._currentValue),Q._currentValue=le;break;case 13:if(Q=C.memoizedState,Q!==null)return Q.dehydrated!==null?(Ss(ut,ut.current&1),C.flags|=128,null):F&C.child.childLanes?_f(m,C,F):(Ss(ut,ut.current&1),m=Ou(m,C,F),m!==null?m.sibling:null);Ss(ut,ut.current&1);break;case 19:if(Q=(F&C.childLanes)!==0,m.flags&128){if(Q)return Pd(m,C,F);C.flags|=128}if(le=C.memoizedState,le!==null&&(le.rendering=null,le.tail=null,le.lastEffect=null),Ss(ut,ut.current),Q)break;return null;case 22:case 23:return C.lanes=0,Ph(m,C,F)}return Ou(m,C,F)}var ml,pm,Ka,ep;ml=function(m,C){for(var F=C.child;F!==null;){if(F.tag===5||F.tag===6)m.appendChild(F.stateNode);else if(F.tag!==4&&F.child!==null){F.child.return=F,F=F.child;continue}if(F===C)break;for(;F.sibling===null;){if(F.return===null||F.return===C)return;F=F.return}F.sibling.return=F.return,F=F.sibling}},pm=function(){},Ka=function(m,C,F,Q){var le=m.memoizedProps;if(le!==Q){m=C.stateNode,ke(ee.current);var ge=null;switch(F){case"input":le=Ut(m,le),Q=Ut(m,Q),ge=[];break;case"select":le=Me({},le,{value:void 0}),Q=Me({},Q,{value:void 0}),ge=[];break;case"textarea":le=pn(m,le),Q=pn(m,Q),ge=[];break;default:typeof le.onClick!="function"&&typeof Q.onClick=="function"&&(m.onclick=Sc)}se(F,Q);var tt;F=null;for(xn in le)if(!Q.hasOwnProperty(xn)&&le.hasOwnProperty(xn)&&le[xn]!=null)if(xn==="style"){var It=le[xn];for(tt in It)It.hasOwnProperty(tt)&&(F||(F={}),F[tt]="")}else xn!=="dangerouslySetInnerHTML"&&xn!=="children"&&xn!=="suppressContentEditableWarning"&&xn!=="suppressHydrationWarning"&&xn!=="autoFocus"&&(i.hasOwnProperty(xn)?ge||(ge=[]):(ge=ge||[]).push(xn,null));for(xn in Q){var Wt=Q[xn];if(It=le!=null?le[xn]:void 0,Q.hasOwnProperty(xn)&&Wt!==It&&(Wt!=null||It!=null))if(xn==="style")if(It){for(tt in It)!It.hasOwnProperty(tt)||Wt&&Wt.hasOwnProperty(tt)||(F||(F={}),F[tt]="");for(tt in Wt)Wt.hasOwnProperty(tt)&&It[tt]!==Wt[tt]&&(F||(F={}),F[tt]=Wt[tt])}else F||(ge||(ge=[]),ge.push(xn,F)),F=Wt;else xn==="dangerouslySetInnerHTML"?(Wt=Wt?Wt.__html:void 0,It=It?It.__html:void 0,Wt!=null&&It!==Wt&&(ge=ge||[]).push(xn,Wt)):xn==="children"?typeof Wt!="string"&&typeof Wt!="number"||(ge=ge||[]).push(xn,""+Wt):xn!=="suppressContentEditableWarning"&&xn!=="suppressHydrationWarning"&&(i.hasOwnProperty(xn)?(Wt!=null&&xn==="onScroll"&&ds("scroll",m),ge||It===Wt||(ge=[])):(ge=ge||[]).push(xn,Wt))}F&&(ge=ge||[]).push("style",F);var xn=ge;(C.updateQueue=xn)&&(C.flags|=4)}},ep=function(m,C,F,Q){F!==Q&&(C.flags|=4)};function tp(m,C){if(!hs)switch(m.tailMode){case"hidden":C=m.tail;for(var F=null;C!==null;)C.alternate!==null&&(F=C),C=C.sibling;F===null?m.tail=null:F.sibling=null;break;case"collapsed":F=m.tail;for(var Q=null;F!==null;)F.alternate!==null&&(Q=F),F=F.sibling;Q===null?C||m.tail===null?m.tail=null:m.tail.sibling=null:Q.sibling=null}}function Nl(m){var C=m.alternate!==null&&m.alternate.child===m.child,F=0,Q=0;if(C)for(var le=m.child;le!==null;)F|=le.lanes|le.childLanes,Q|=le.subtreeFlags&14680064,Q|=le.flags&14680064,le.return=m,le=le.sibling;else for(le=m.child;le!==null;)F|=le.lanes|le.childLanes,Q|=le.subtreeFlags,Q|=le.flags,le.return=m,le=le.sibling;return m.subtreeFlags|=Q,m.childLanes=F,C}function ih(m,C,F){var Q=C.pendingProps;switch(Ac(C),C.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nl(C),null;case 1:return ga(C.type)&&Md(),Nl(C),null;case 3:return Q=C.stateNode,$e(),Us(ua),Us(ra),Bt(),Q.pendingContext&&(Q.context=Q.pendingContext,Q.pendingContext=null),(m===null||m.child===null)&&(Ed(C)?C.flags|=4:m===null||m.memoizedState.isDehydrated&&!(C.flags&256)||(C.flags|=1024,Pr!==null&&(q0(Pr),Pr=null))),pm(m,C),Nl(C),null;case 5:pt(C);var le=ke(xe.current);if(F=C.type,m!==null&&C.stateNode!=null)Ka(m,C,F,Q,le),m.ref!==C.ref&&(C.flags|=512,C.flags|=2097152);else{if(!Q){if(C.stateNode===null)throw Error(t(166));return Nl(C),null}if(m=ke(ee.current),Ed(C)){Q=C.stateNode,F=C.type;var ge=C.memoizedProps;switch(Q[KA]=C,Q[Ec]=ge,m=(C.mode&1)!==0,F){case"dialog":ds("cancel",Q),ds("close",Q);break;case"iframe":case"object":case"embed":ds("load",Q);break;case"video":case"audio":for(le=0;le<Gu.length;le++)ds(Gu[le],Q);break;case"source":ds("error",Q);break;case"img":case"image":case"link":ds("error",Q),ds("load",Q);break;case"details":ds("toggle",Q);break;case"input":rn(Q,ge),ds("invalid",Q);break;case"select":Q._wrapperState={wasMultiple:!!ge.multiple},ds("invalid",Q);break;case"textarea":Zn(Q,ge),ds("invalid",Q)}se(F,ge),le=null;for(var tt in ge)if(ge.hasOwnProperty(tt)){var It=ge[tt];tt==="children"?typeof It=="string"?Q.textContent!==It&&(ge.suppressHydrationWarning!==!0&&Hc(Q.textContent,It,m),le=["children",It]):typeof It=="number"&&Q.textContent!==""+It&&(ge.suppressHydrationWarning!==!0&&Hc(Q.textContent,It,m),le=["children",""+It]):i.hasOwnProperty(tt)&&It!=null&&tt==="onScroll"&&ds("scroll",Q)}switch(F){case"input":it(Q),qn(Q,ge,!0);break;case"textarea":it(Q),vr(Q);break;case"select":case"option":break;default:typeof ge.onClick=="function"&&(Q.onclick=Sc)}Q=le,C.updateQueue=Q,Q!==null&&(C.flags|=4)}else{tt=le.nodeType===9?le:le.ownerDocument,m==="http://www.w3.org/1999/xhtml"&&(m=Jn(F)),m==="http://www.w3.org/1999/xhtml"?F==="script"?(m=tt.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild)):typeof Q.is=="string"?m=tt.createElement(F,{is:Q.is}):(m=tt.createElement(F),F==="select"&&(tt=m,Q.multiple?tt.multiple=!0:Q.size&&(tt.size=Q.size))):m=tt.createElementNS(m,F),m[KA]=C,m[Ec]=Q,ml(m,C,!1,!1),C.stateNode=m;e:{switch(tt=ve(F,Q),F){case"dialog":ds("cancel",m),ds("close",m),le=Q;break;case"iframe":case"object":case"embed":ds("load",m),le=Q;break;case"video":case"audio":for(le=0;le<Gu.length;le++)ds(Gu[le],m);le=Q;break;case"source":ds("error",m),le=Q;break;case"img":case"image":case"link":ds("error",m),ds("load",m),le=Q;break;case"details":ds("toggle",m),le=Q;break;case"input":rn(m,Q),le=Ut(m,Q),ds("invalid",m);break;case"option":le=Q;break;case"select":m._wrapperState={wasMultiple:!!Q.multiple},le=Me({},Q,{value:void 0}),ds("invalid",m);break;case"textarea":Zn(m,Q),le=pn(m,Q),ds("invalid",m);break;default:le=Q}se(F,le),It=le;for(ge in It)if(It.hasOwnProperty(ge)){var Wt=It[ge];ge==="style"?tr(m,Wt):ge==="dangerouslySetInnerHTML"?(Wt=Wt?Wt.__html:void 0,Wt!=null&&fe(m,Wt)):ge==="children"?typeof Wt=="string"?(F!=="textarea"||Wt!=="")&&nt(m,Wt):typeof Wt=="number"&&nt(m,""+Wt):ge!=="suppressContentEditableWarning"&&ge!=="suppressHydrationWarning"&&ge!=="autoFocus"&&(i.hasOwnProperty(ge)?Wt!=null&&ge==="onScroll"&&ds("scroll",m):Wt!=null&&ie(m,ge,Wt,tt))}switch(F){case"input":it(m),qn(m,Q,!1);break;case"textarea":it(m),vr(m);break;case"option":Q.value!=null&&m.setAttribute("value",""+Ue(Q.value));break;case"select":m.multiple=!!Q.multiple,ge=Q.value,ge!=null?Dn(m,!!Q.multiple,ge,!1):Q.defaultValue!=null&&Dn(m,!!Q.multiple,Q.defaultValue,!0);break;default:typeof le.onClick=="function"&&(m.onclick=Sc)}switch(F){case"button":case"input":case"select":case"textarea":Q=!!Q.autoFocus;break e;case"img":Q=!0;break e;default:Q=!1}}Q&&(C.flags|=4)}C.ref!==null&&(C.flags|=512,C.flags|=2097152)}return Nl(C),null;case 6:if(m&&C.stateNode!=null)ep(m,C,m.memoizedProps,Q);else{if(typeof Q!="string"&&C.stateNode===null)throw Error(t(166));if(F=ke(xe.current),ke(ee.current),Ed(C)){if(Q=C.stateNode,F=C.memoizedProps,Q[KA]=C,(ge=Q.nodeValue!==F)&&(m=ka,m!==null))switch(m.tag){case 3:Hc(Q.nodeValue,F,(m.mode&1)!==0);break;case 5:m.memoizedProps.suppressHydrationWarning!==!0&&Hc(Q.nodeValue,F,(m.mode&1)!==0)}ge&&(C.flags|=4)}else Q=(F.nodeType===9?F:F.ownerDocument).createTextNode(Q),Q[KA]=C,C.stateNode=Q}return Nl(C),null;case 13:if(Us(ut),Q=C.memoizedState,m===null||m.memoizedState!==null&&m.memoizedState.dehydrated!==null){if(hs&&bs!==null&&C.mode&1&&!(C.flags&128))pA(),cc(),C.flags|=98560,ge=!1;else if(ge=Ed(C),Q!==null&&Q.dehydrated!==null){if(m===null){if(!ge)throw Error(t(318));if(ge=C.memoizedState,ge=ge!==null?ge.dehydrated:null,!ge)throw Error(t(317));ge[KA]=C}else cc(),!(C.flags&128)&&(C.memoizedState=null),C.flags|=4;Nl(C),ge=!1}else Pr!==null&&(q0(Pr),Pr=null),ge=!0;if(!ge)return C.flags&65536?C:null}return C.flags&128?(C.lanes=F,C):(Q=Q!==null,Q!==(m!==null&&m.memoizedState!==null)&&Q&&(C.child.flags|=8192,C.mode&1&&(m===null||ut.current&1?Co===0&&(Co=3):gm())),C.updateQueue!==null&&(C.flags|=4),Nl(C),null);case 4:return $e(),pm(m,C),m===null&&Qu(C.stateNode.containerInfo),Nl(C),null;case 10:return ya(C.type._context),Nl(C),null;case 17:return ga(C.type)&&Md(),Nl(C),null;case 19:if(Us(ut),ge=C.memoizedState,ge===null)return Nl(C),null;if(Q=(C.flags&128)!==0,tt=ge.rendering,tt===null)if(Q)tp(ge,!1);else{if(Co!==0||m!==null&&m.flags&128)for(m=C.child;m!==null;){if(tt=mt(m),tt!==null){for(C.flags|=128,tp(ge,!1),Q=tt.updateQueue,Q!==null&&(C.updateQueue=Q,C.flags|=4),C.subtreeFlags=0,Q=F,F=C.child;F!==null;)ge=F,m=Q,ge.flags&=14680066,tt=ge.alternate,tt===null?(ge.childLanes=0,ge.lanes=m,ge.child=null,ge.subtreeFlags=0,ge.memoizedProps=null,ge.memoizedState=null,ge.updateQueue=null,ge.dependencies=null,ge.stateNode=null):(ge.childLanes=tt.childLanes,ge.lanes=tt.lanes,ge.child=tt.child,ge.subtreeFlags=0,ge.deletions=null,ge.memoizedProps=tt.memoizedProps,ge.memoizedState=tt.memoizedState,ge.updateQueue=tt.updateQueue,ge.type=tt.type,m=tt.dependencies,ge.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext}),F=F.sibling;return Ss(ut,ut.current&1|2),C.child}m=m.sibling}ge.tail!==null&&uo()>xf&&(C.flags|=128,Q=!0,tp(ge,!1),C.lanes=4194304)}else{if(!Q)if(m=mt(tt),m!==null){if(C.flags|=128,Q=!0,F=m.updateQueue,F!==null&&(C.updateQueue=F,C.flags|=4),tp(ge,!0),ge.tail===null&&ge.tailMode==="hidden"&&!tt.alternate&&!hs)return Nl(C),null}else 2*uo()-ge.renderingStartTime>xf&&F!==1073741824&&(C.flags|=128,Q=!0,tp(ge,!1),C.lanes=4194304);ge.isBackwards?(tt.sibling=C.child,C.child=tt):(F=ge.last,F!==null?F.sibling=tt:C.child=tt,ge.last=tt)}return ge.tail!==null?(C=ge.tail,ge.rendering=C,ge.tail=C.sibling,ge.renderingStartTime=uo(),C.sibling=null,F=ut.current,Ss(ut,Q?F&1|2:F&1),C):(Nl(C),null);case 22:case 23:return $0(),Q=C.memoizedState!==null,m!==null&&m.memoizedState!==null!==Q&&(C.flags|=8192),Q&&C.mode&1?Es&1073741824&&(Nl(C),C.subtreeFlags&6&&(C.flags|=8192)):Nl(C),null;case 24:return null;case 25:return null}throw Error(t(156,C.tag))}function A(m,C){switch(Ac(C),C.tag){case 1:return ga(C.type)&&Md(),m=C.flags,m&65536?(C.flags=m&-65537|128,C):null;case 3:return $e(),Us(ua),Us(ra),Bt(),m=C.flags,m&65536&&!(m&128)?(C.flags=m&-65537|128,C):null;case 5:return pt(C),null;case 13:if(Us(ut),m=C.memoizedState,m!==null&&m.dehydrated!==null){if(C.alternate===null)throw Error(t(340));cc()}return m=C.flags,m&65536?(C.flags=m&-65537|128,C):null;case 19:return Us(ut),null;case 4:return $e(),null;case 10:return ya(C.type._context),null;case 22:case 23:return $0(),null;case 24:return null;default:return null}}var y=!1,O=!1,B=typeof WeakSet=="function"?WeakSet:Set,R=null;function Z(m,C){var F=m.ref;if(F!==null)if(typeof F=="function")try{F(null)}catch(Q){sl(m,C,Q)}else F.current=null}function Ae(m,C,F){try{F()}catch(Q){sl(m,C,Q)}}var Ce=!1;function Te(m,C){if(TA=Ie,m=rs(),OA(m)){if("selectionStart"in m)var F={start:m.selectionStart,end:m.selectionEnd};else e:{F=(F=m.ownerDocument)&&F.defaultView||window;var Q=F.getSelection&&F.getSelection();if(Q&&Q.rangeCount!==0){F=Q.anchorNode;var le=Q.anchorOffset,ge=Q.focusNode;Q=Q.focusOffset;try{F.nodeType,ge.nodeType}catch{F=null;break e}var tt=0,It=-1,Wt=-1,xn=0,Ar=0,Cr=m,ir=null;t:for(;;){for(var qr;Cr!==F||le!==0&&Cr.nodeType!==3||(It=tt+le),Cr!==ge||Q!==0&&Cr.nodeType!==3||(Wt=tt+Q),Cr.nodeType===3&&(tt+=Cr.nodeValue.length),(qr=Cr.firstChild)!==null;)ir=Cr,Cr=qr;for(;;){if(Cr===m)break t;if(ir===F&&++xn===le&&(It=tt),ir===ge&&++Ar===Q&&(Wt=tt),(qr=Cr.nextSibling)!==null)break;Cr=ir,ir=Cr.parentNode}Cr=qr}F=It===-1||Wt===-1?null:{start:It,end:Wt}}else F=null}F=F||{start:0,end:0}}else F=null;for(cl={focusedElem:m,selectionRange:F},Ie=!1,R=C;R!==null;)if(C=R,m=C.child,(C.subtreeFlags&1028)!==0&&m!==null)m.return=C,R=m;else for(;R!==null;){C=R;try{var oi=C.alternate;if(C.flags&1024)switch(C.tag){case 0:case 11:case 15:break;case 1:if(oi!==null){var ai=oi.memoizedProps,yl=oi.memoizedState,cn=C.stateNode,Xt=cn.getSnapshotBeforeUpdate(C.elementType===C.type?ai:pl(C.type,ai),yl);cn.__reactInternalSnapshotBeforeUpdate=Xt}break;case 3:var dn=C.stateNode.containerInfo;dn.nodeType===1?dn.textContent="":dn.nodeType===9&&dn.documentElement&&dn.removeChild(dn.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(_r){sl(C,C.return,_r)}if(m=C.sibling,m!==null){m.return=C.return,R=m;break}R=C.return}return oi=Ce,Ce=!1,oi}function je(m,C,F){var Q=C.updateQueue;if(Q=Q!==null?Q.lastEffect:null,Q!==null){var le=Q=Q.next;do{if((le.tag&m)===m){var ge=le.destroy;le.destroy=void 0,ge!==void 0&&Ae(C,F,ge)}le=le.next}while(le!==Q)}}function yt(m,C){if(C=C.updateQueue,C=C!==null?C.lastEffect:null,C!==null){var F=C=C.next;do{if((F.tag&m)===m){var Q=F.create;F.destroy=Q()}F=F.next}while(F!==C)}}function Mt(m){var C=m.ref;if(C!==null){var F=m.stateNode;switch(m.tag){case 5:m=F;break;default:m=F}typeof C=="function"?C(m):C.current=m}}function en(m){var C=m.alternate;C!==null&&(m.alternate=null,en(C)),m.child=null,m.deletions=null,m.sibling=null,m.tag===5&&(C=m.stateNode,C!==null&&(delete C[KA],delete C[Ec],delete C[Ih],delete C[ot],delete C[DA])),m.stateNode=null,m.return=null,m.dependencies=null,m.memoizedProps=null,m.memoizedState=null,m.pendingProps=null,m.stateNode=null,m.updateQueue=null}function Qt(m){return m.tag===5||m.tag===3||m.tag===4}function wn(m){e:for(;;){for(;m.sibling===null;){if(m.return===null||Qt(m.return))return null;m=m.return}for(m.sibling.return=m.return,m=m.sibling;m.tag!==5&&m.tag!==6&&m.tag!==18;){if(m.flags&2||m.child===null||m.tag===4)continue e;m.child.return=m,m=m.child}if(!(m.flags&2))return m.stateNode}}function Ln(m,C,F){var Q=m.tag;if(Q===5||Q===6)m=m.stateNode,C?F.nodeType===8?F.parentNode.insertBefore(m,C):F.insertBefore(m,C):(F.nodeType===8?(C=F.parentNode,C.insertBefore(m,F)):(C=F,C.appendChild(m)),F=F._reactRootContainer,F!=null||C.onclick!==null||(C.onclick=Sc));else if(Q!==4&&(m=m.child,m!==null))for(Ln(m,C,F),m=m.sibling;m!==null;)Ln(m,C,F),m=m.sibling}function sr(m,C,F){var Q=m.tag;if(Q===5||Q===6)m=m.stateNode,C?F.insertBefore(m,C):F.appendChild(m);else if(Q!==4&&(m=m.child,m!==null))for(sr(m,C,F),m=m.sibling;m!==null;)sr(m,C,F),m=m.sibling}var Vn=null,wr=!1;function yr(m,C,F){for(F=F.child;F!==null;)Or(m,C,F),F=F.sibling}function Or(m,C,F){if(qe&&typeof qe.onCommitFiberUnmount=="function")try{qe.onCommitFiberUnmount(Js,F)}catch{}switch(F.tag){case 5:O||Z(F,C);case 6:var Q=Vn,le=wr;Vn=null,yr(m,C,F),Vn=Q,wr=le,Vn!==null&&(wr?(m=Vn,F=F.stateNode,m.nodeType===8?m.parentNode.removeChild(F):m.removeChild(F)):Vn.removeChild(F.stateNode));break;case 18:Vn!==null&&(wr?(m=Vn,F=F.stateNode,m.nodeType===8?PA(m.parentNode,F):m.nodeType===1&&PA(m,F),Ki(m)):PA(Vn,F.stateNode));break;case 4:Q=Vn,le=wr,Vn=F.stateNode.containerInfo,wr=!0,yr(m,C,F),Vn=Q,wr=le;break;case 0:case 11:case 14:case 15:if(!O&&(Q=F.updateQueue,Q!==null&&(Q=Q.lastEffect,Q!==null))){le=Q=Q.next;do{var ge=le,tt=ge.destroy;ge=ge.tag,tt!==void 0&&(ge&2||ge&4)&&Ae(F,C,tt),le=le.next}while(le!==Q)}yr(m,C,F);break;case 1:if(!O&&(Z(F,C),Q=F.stateNode,typeof Q.componentWillUnmount=="function"))try{Q.props=F.memoizedProps,Q.state=F.memoizedState,Q.componentWillUnmount()}catch(It){sl(F,C,It)}yr(m,C,F);break;case 21:yr(m,C,F);break;case 22:F.mode&1?(O=(Q=O)||F.memoizedState!==null,yr(m,C,F),O=Q):yr(m,C,F);break;default:yr(m,C,F)}}function ni(m){var C=m.updateQueue;if(C!==null){m.updateQueue=null;var F=m.stateNode;F===null&&(F=m.stateNode=new B),C.forEach(function(Q){var le=eg.bind(null,m,Q);F.has(Q)||(F.add(Q),Q.then(le,le))})}}function zr(m,C){var F=C.deletions;if(F!==null)for(var Q=0;Q<F.length;Q++){var le=F[Q];try{var ge=m,tt=C,It=tt;e:for(;It!==null;){switch(It.tag){case 5:Vn=It.stateNode,wr=!1;break e;case 3:Vn=It.stateNode.containerInfo,wr=!0;break e;case 4:Vn=It.stateNode.containerInfo,wr=!0;break e}It=It.return}if(Vn===null)throw Error(t(160));Or(ge,tt,le),Vn=null,wr=!1;var Wt=le.alternate;Wt!==null&&(Wt.return=null),le.return=null}catch(xn){sl(le,C,xn)}}if(C.subtreeFlags&12854)for(C=C.child;C!==null;)Hi(C,m),C=C.sibling}function Hi(m,C){var F=m.alternate,Q=m.flags;switch(m.tag){case 0:case 11:case 14:case 15:if(zr(C,m),zo(m),Q&4){try{je(3,m,m.return),yt(3,m)}catch(ai){sl(m,m.return,ai)}try{je(5,m,m.return)}catch(ai){sl(m,m.return,ai)}}break;case 1:zr(C,m),zo(m),Q&512&&F!==null&&Z(F,F.return);break;case 5:if(zr(C,m),zo(m),Q&512&&F!==null&&Z(F,F.return),m.flags&32){var le=m.stateNode;try{nt(le,"")}catch(ai){sl(m,m.return,ai)}}if(Q&4&&(le=m.stateNode,le!=null)){var ge=m.memoizedProps,tt=F!==null?F.memoizedProps:ge,It=m.type,Wt=m.updateQueue;if(m.updateQueue=null,Wt!==null)try{It==="input"&&ge.type==="radio"&&ge.name!=null&&Dt(le,ge),ve(It,tt);var xn=ve(It,ge);for(tt=0;tt<Wt.length;tt+=2){var Ar=Wt[tt],Cr=Wt[tt+1];Ar==="style"?tr(le,Cr):Ar==="dangerouslySetInnerHTML"?fe(le,Cr):Ar==="children"?nt(le,Cr):ie(le,Ar,Cr,xn)}switch(It){case"input":_n(le,ge);break;case"textarea":dr(le,ge);break;case"select":var ir=le._wrapperState.wasMultiple;le._wrapperState.wasMultiple=!!ge.multiple;var qr=ge.value;qr!=null?Dn(le,!!ge.multiple,qr,!1):ir!==!!ge.multiple&&(ge.defaultValue!=null?Dn(le,!!ge.multiple,ge.defaultValue,!0):Dn(le,!!ge.multiple,ge.multiple?[]:"",!1))}le[Ec]=ge}catch(ai){sl(m,m.return,ai)}}break;case 6:if(zr(C,m),zo(m),Q&4){if(m.stateNode===null)throw Error(t(162));le=m.stateNode,ge=m.memoizedProps;try{le.nodeValue=ge}catch(ai){sl(m,m.return,ai)}}break;case 3:if(zr(C,m),zo(m),Q&4&&F!==null&&F.memoizedState.isDehydrated)try{Ki(C.containerInfo)}catch(ai){sl(m,m.return,ai)}break;case 4:zr(C,m),zo(m);break;case 13:zr(C,m),zo(m),le=m.child,le.flags&8192&&(ge=le.memoizedState!==null,le.stateNode.isHidden=ge,!ge||le.alternate!==null&&le.alternate.memoizedState!==null||(bf=uo())),Q&4&&ni(m);break;case 22:if(Ar=F!==null&&F.memoizedState!==null,m.mode&1?(O=(xn=O)||Ar,zr(C,m),O=xn):zr(C,m),zo(m),Q&8192){if(xn=m.memoizedState!==null,(m.stateNode.isHidden=xn)&&!Ar&&m.mode&1)for(R=m,Ar=m.child;Ar!==null;){for(Cr=R=Ar;R!==null;){switch(ir=R,qr=ir.child,ir.tag){case 0:case 11:case 14:case 15:je(4,ir,ir.return);break;case 1:Z(ir,ir.return);var oi=ir.stateNode;if(typeof oi.componentWillUnmount=="function"){Q=ir,F=ir.return;try{C=Q,oi.props=C.memoizedProps,oi.state=C.memoizedState,oi.componentWillUnmount()}catch(ai){sl(Q,F,ai)}}break;case 5:Z(ir,ir.return);break;case 22:if(ir.memoizedState!==null){$a(Cr);continue}}qr!==null?(qr.return=ir,R=qr):$a(Cr)}Ar=Ar.sibling}e:for(Ar=null,Cr=m;;){if(Cr.tag===5){if(Ar===null){Ar=Cr;try{le=Cr.stateNode,xn?(ge=le.style,typeof ge.setProperty=="function"?ge.setProperty("display","none","important"):ge.display="none"):(It=Cr.stateNode,Wt=Cr.memoizedProps.style,tt=Wt!=null&&Wt.hasOwnProperty("display")?Wt.display:null,It.style.display=sn("display",tt))}catch(ai){sl(m,m.return,ai)}}}else if(Cr.tag===6){if(Ar===null)try{Cr.stateNode.nodeValue=xn?"":Cr.memoizedProps}catch(ai){sl(m,m.return,ai)}}else if((Cr.tag!==22&&Cr.tag!==23||Cr.memoizedState===null||Cr===m)&&Cr.child!==null){Cr.child.return=Cr,Cr=Cr.child;continue}if(Cr===m)break e;for(;Cr.sibling===null;){if(Cr.return===null||Cr.return===m)break e;Ar===Cr&&(Ar=null),Cr=Cr.return}Ar===Cr&&(Ar=null),Cr.sibling.return=Cr.return,Cr=Cr.sibling}}break;case 19:zr(C,m),zo(m),Q&4&&ni(m);break;case 21:break;default:zr(C,m),zo(m)}}function zo(m){var C=m.flags;if(C&2){try{e:{for(var F=m.return;F!==null;){if(Qt(F)){var Q=F;break e}F=F.return}throw Error(t(160))}switch(Q.tag){case 5:var le=Q.stateNode;Q.flags&32&&(nt(le,""),Q.flags&=-33);var ge=wn(m);sr(m,ge,le);break;case 3:case 4:var tt=Q.stateNode.containerInfo,It=wn(m);Ln(m,It,tt);break;default:throw Error(t(161))}}catch(Wt){sl(m,m.return,Wt)}m.flags&=-3}C&4096&&(m.flags&=-4097)}function Ya(m,C,F){R=m,ia(m)}function ia(m,C,F){for(var Q=(m.mode&1)!==0;R!==null;){var le=R,ge=le.child;if(le.tag===22&&Q){var tt=le.memoizedState!==null||y;if(!tt){var It=le.alternate,Wt=It!==null&&It.memoizedState!==null||O;It=y;var xn=O;if(y=tt,(O=Wt)&&!xn)for(R=le;R!==null;)tt=R,Wt=tt.child,tt.tag===22&&tt.memoizedState!==null?_a(le):Wt!==null?(Wt.return=tt,R=Wt):_a(le);for(;ge!==null;)R=ge,ia(ge),ge=ge.sibling;R=le,y=It,O=xn}Ca(m)}else le.subtreeFlags&8772&&ge!==null?(ge.return=le,R=ge):Ca(m)}}function Ca(m){for(;R!==null;){var C=R;if(C.flags&8772){var F=C.alternate;try{if(C.flags&8772)switch(C.tag){case 0:case 11:case 15:O||yt(5,C);break;case 1:var Q=C.stateNode;if(C.flags&4&&!O)if(F===null)Q.componentDidMount();else{var le=C.elementType===C.type?F.memoizedProps:pl(C.type,F.memoizedProps);Q.componentDidUpdate(le,F.memoizedState,Q.__reactInternalSnapshotBeforeUpdate)}var ge=C.updateQueue;ge!==null&&N(C,ge,Q);break;case 3:var tt=C.updateQueue;if(tt!==null){if(F=null,C.child!==null)switch(C.child.tag){case 5:F=C.child.stateNode;break;case 1:F=C.child.stateNode}N(C,tt,F)}break;case 5:var It=C.stateNode;if(F===null&&C.flags&4){F=It;var Wt=C.memoizedProps;switch(C.type){case"button":case"input":case"select":case"textarea":Wt.autoFocus&&F.focus();break;case"img":Wt.src&&(F.src=Wt.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(C.memoizedState===null){var xn=C.alternate;if(xn!==null){var Ar=xn.memoizedState;if(Ar!==null){var Cr=Ar.dehydrated;Cr!==null&&Ki(Cr)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}O||C.flags&512&&Mt(C)}catch(ir){sl(C,C.return,ir)}}if(C===m){R=null;break}if(F=C.sibling,F!==null){F.return=C.return,R=F;break}R=C.return}}function $a(m){for(;R!==null;){var C=R;if(C===m){R=null;break}var F=C.sibling;if(F!==null){F.return=C.return,R=F;break}R=C.return}}function _a(m){for(;R!==null;){var C=R;try{switch(C.tag){case 0:case 11:case 15:var F=C.return;try{yt(4,C)}catch(Wt){sl(C,F,Wt)}break;case 1:var Q=C.stateNode;if(typeof Q.componentDidMount=="function"){var le=C.return;try{Q.componentDidMount()}catch(Wt){sl(C,le,Wt)}}var ge=C.return;try{Mt(C)}catch(Wt){sl(C,ge,Wt)}break;case 5:var tt=C.return;try{Mt(C)}catch(Wt){sl(C,tt,Wt)}}}catch(Wt){sl(C,C.return,Wt)}if(C===m){R=null;break}var It=C.sibling;if(It!==null){It.return=C.return,R=It;break}R=C.return}}var du=Math.ceil,Da=te.ReactCurrentDispatcher,Ra=te.ReactCurrentOwner,as=te.ReactCurrentBatchConfig,yi=0,ps=null,js=null,ca=0,Es=0,Iu=Ia(0),Co=0,Kh=null,Wl=0,Xu=0,pc=0,gl=null,Ol=null,bf=0,xf=1/0,Dh=null,$m=!1,np=null,Rh=null,Vm=!1,wf=null,WA=0,mm=0,Q0=null,Hm=-1,Pp=0;function Ju(){return yi&6?uo():Hm!==-1?Hm:Hm=uo()}function Fh(m){return m.mode&1?yi&2&&ca!==0?ca&-ca:gs.transition!==null?(Pp===0&&(Pp=nl()),Pp):(m=Rr,m!==0||(m=window.event,m=m===void 0?16:Ai(m.type)),m):1}function td(m,C,F,Q){if(50<mm)throw mm=0,Q0=null,Error(t(185));aa(m,F,Q),(!(yi&2)||m!==ps)&&(m===ps&&(!(yi&2)&&(Xu|=F),Co===4&&Mf(m,ca)),GA(m,Q),F===1&&yi===0&&!(C.mode&1)&&(xf=uo()+500,kh&&FA()))}function GA(m,C){var F=m.callbackNode;ei(m,C);var Q=Rs(m,m===ps?ca:0);if(Q===0)F!==null&&ns(F),m.callbackNode=null,m.callbackPriority=0;else if(C=Q&-Q,m.callbackPriority!==C){if(F!=null&&ns(F),C===1)m.tag===0?Ic(n1.bind(null,m)):RA(n1.bind(null,m)),xd(function(){!(yi&6)&&FA()}),F=null;else{switch(Yi(Q)){case 1:F=Hl;break;case 4:F=oo;break;case 16:F=Tr;break;case 536870912:F=Bs;break;default:F=Tr}F=Uh(F,Zm.bind(null,m))}m.callbackPriority=C,m.callbackNode=F}}function Zm(m,C){if(Hm=-1,Pp=0,yi&6)throw Error(t(327));var F=m.callbackNode;if(Rp()&&m.callbackNode!==F)return null;var Q=Rs(m,m===ps?ca:0);if(Q===0)return null;if(Q&30||Q&m.expiredLanes||C)C=ym(m,Q);else{C=Q;var le=yi;yi|=2;var ge=V0();(ps!==m||ca!==C)&&(Dh=null,xf=uo()+500,rp(m,C));do try{H0();break}catch(It){Dp(m,It)}while(!0);Eu(),Da.current=ge,yi=le,js!==null?C=0:(ps=null,ca=0,C=Co)}if(C!==0){if(C===2&&(le=wi(m),le!==0&&(Q=le,C=Kp(m,le))),C===1)throw F=Kh,rp(m,0),Mf(m,Q),GA(m,uo()),F;if(C===6)Mf(m,Q);else{if(le=m.current.alternate,!(Q&30)&&!t1(le)&&(C=ym(m,Q),C===2&&(ge=wi(m),ge!==0&&(Q=ge,C=Kp(m,ge))),C===1))throw F=Kh,rp(m,0),Mf(m,Q),GA(m,uo()),F;switch(m.finishedWork=le,m.finishedLanes=Q,C){case 0:case 1:throw Error(t(345));case 2:Lh(m,Ol,Dh);break;case 3:if(Mf(m,Q),(Q&130023424)===Q&&(C=bf+500-uo(),10<C)){if(Rs(m,0)!==0)break;if(le=m.suspendedLanes,(le&Q)!==Q){Ju(),m.pingedLanes|=m.suspendedLanes&le;break}m.timeoutHandle=dl(Lh.bind(null,m,Ol,Dh),C);break}Lh(m,Ol,Dh);break;case 4:if(Mf(m,Q),(Q&4194240)===Q)break;for(C=m.eventTimes,le=-1;0<Q;){var tt=31-vn(Q);ge=1<<tt,tt=C[tt],tt>le&&(le=tt),Q&=~ge}if(Q=le,Q=uo()-Q,Q=(120>Q?120:480>Q?480:1080>Q?1080:1920>Q?1920:3e3>Q?3e3:4320>Q?4320:1960*du(Q/1960))-Q,10<Q){m.timeoutHandle=dl(Lh.bind(null,m,Ol,Dh),Q);break}Lh(m,Ol,Dh);break;case 5:Lh(m,Ol,Dh);break;default:throw Error(t(329))}}}return GA(m,uo()),m.callbackNode===F?Zm.bind(null,m):null}function Kp(m,C){var F=gl;return m.current.memoizedState.isDehydrated&&(rp(m,C).flags|=256),m=ym(m,C),m!==2&&(C=Ol,Ol=F,C!==null&&q0(C)),m}function q0(m){Ol===null?Ol=m:Ol.push.apply(Ol,m)}function t1(m){for(var C=m;;){if(C.flags&16384){var F=C.updateQueue;if(F!==null&&(F=F.stores,F!==null))for(var Q=0;Q<F.length;Q++){var le=F[Q],ge=le.getSnapshot;le=le.value;try{if(!ln(ge(),le))return!1}catch{return!1}}}if(F=C.child,C.subtreeFlags&16384&&F!==null)F.return=C,C=F;else{if(C===m)break;for(;C.sibling===null;){if(C.return===null||C.return===m)return!0;C=C.return}C.sibling.return=C.return,C=C.sibling}}return!0}function Mf(m,C){for(C&=~pc,C&=~Xu,m.suspendedLanes|=C,m.pingedLanes&=~C,m=m.expirationTimes;0<C;){var F=31-vn(C),Q=1<<F;m[F]=-1,C&=~Q}}function n1(m){if(yi&6)throw Error(t(327));Rp();var C=Rs(m,0);if(!(C&1))return GA(m,uo()),null;var F=ym(m,C);if(m.tag!==0&&F===2){var Q=wi(m);Q!==0&&(C=Q,F=Kp(m,Q))}if(F===1)throw F=Kh,rp(m,0),Mf(m,C),GA(m,uo()),F;if(F===6)throw Error(t(345));return m.finishedWork=m.current.alternate,m.finishedLanes=C,Lh(m,Ol,Dh),GA(m,uo()),null}function Y0(m,C){var F=yi;yi|=1;try{return m(C)}finally{yi=F,yi===0&&(xf=uo()+500,kh&&FA())}}function Sf(m){wf!==null&&wf.tag===0&&!(yi&6)&&Rp();var C=yi;yi|=1;var F=as.transition,Q=Rr;try{if(as.transition=null,Rr=1,m)return m()}finally{Rr=Q,as.transition=F,yi=C,!(yi&6)&&FA()}}function $0(){Es=Iu.current,Us(Iu)}function rp(m,C){m.finishedWork=null,m.finishedLanes=0;var F=m.timeoutHandle;if(F!==-1&&(m.timeoutHandle=-1,oc(F)),js!==null)for(F=js.return;F!==null;){var Q=F;switch(Ac(Q),Q.tag){case 1:Q=Q.type.childContextTypes,Q!=null&&Md();break;case 3:$e(),Us(ua),Us(ra),Bt();break;case 5:pt(Q);break;case 4:$e();break;case 13:Us(ut);break;case 19:Us(ut);break;case 10:ya(Q.type._context);break;case 22:case 23:$0()}F=F.return}if(ps=m,js=m=mc(m.current,null),ca=Es=C,Co=0,Kh=null,pc=Xu=Wl=0,Ol=gl=null,zA!==null){for(C=0;C<zA.length;C++)if(F=zA[C],Q=F.interleaved,Q!==null){F.interleaved=null;var le=Q.next,ge=F.pending;if(ge!==null){var tt=ge.next;ge.next=le,Q.next=tt}F.pending=Q}zA=null}return m}function Dp(m,C){do{var F=js;try{if(Eu(),kt.current=Jc,Mn){for(var Q=Tt.memoizedState;Q!==null;){var le=Q.queue;le!==null&&(le.pending=null),Q=Q.next}Mn=!1}if(zt=0,Zt=nn=Tt=null,Bn=!1,yn=0,Ra.current=null,F===null||F.return===null){Co=1,Kh=C,js=null;break}e:{var ge=m,tt=F.return,It=F,Wt=C;if(C=ca,It.flags|=32768,Wt!==null&&typeof Wt=="object"&&typeof Wt.then=="function"){var xn=Wt,Ar=It,Cr=Ar.tag;if(!(Ar.mode&1)&&(Cr===0||Cr===11||Cr===15)){var ir=Ar.alternate;ir?(Ar.updateQueue=ir.updateQueue,Ar.memoizedState=ir.memoizedState,Ar.lanes=ir.lanes):(Ar.updateQueue=null,Ar.memoizedState=null)}var qr=fm(tt);if(qr!==null){qr.flags&=-257,kd(qr,tt,It,ge,C),qr.mode&1&&Xf(ge,xn,C),C=qr,Wt=xn;var oi=C.updateQueue;if(oi===null){var ai=new Set;ai.add(Wt),C.updateQueue=ai}else oi.add(Wt);break e}else{if(!(C&1)){Xf(ge,xn,C),gm();break e}Wt=Error(t(426))}}else if(hs&&It.mode&1){var yl=fm(tt);if(yl!==null){!(yl.flags&65536)&&(yl.flags|=256),kd(yl,tt,It,ge,C),wl(eh(Wt,It));break e}}ge=Wt=eh(Wt,It),Co!==4&&(Co=2),gl===null?gl=[ge]:gl.push(ge),ge=tt;do{switch(ge.tag){case 3:ge.flags|=65536,C&=-C,ge.lanes|=C;var cn=nh(ge,Wt,C);w(ge,cn);break e;case 1:It=Wt;var Xt=ge.type,dn=ge.stateNode;if(!(ge.flags&128)&&(typeof Xt.getDerivedStateFromError=="function"||dn!==null&&typeof dn.componentDidCatch=="function"&&(Rh===null||!Rh.has(dn)))){ge.flags|=65536,C&=-C,ge.lanes|=C;var _r=mf(ge,It,C);w(ge,_r);break e}}ge=ge.return}while(ge!==null)}Z0(F)}catch(si){C=si,js===F&&F!==null&&(js=F=F.return);continue}break}while(!0)}function V0(){var m=Da.current;return Da.current=Jc,m===null?Jc:m}function gm(){(Co===0||Co===3||Co===2)&&(Co=4),ps===null||!(Wl&268435455)&&!(Xu&268435455)||Mf(ps,ca)}function ym(m,C){var F=yi;yi|=2;var Q=V0();(ps!==m||ca!==C)&&(Dh=null,rp(m,C));do try{Il();break}catch(le){Dp(m,le)}while(!0);if(Eu(),yi=F,Da.current=Q,js!==null)throw Error(t(261));return ps=null,ca=0,Co}function Il(){for(;js!==null;)r1(js)}function H0(){for(;js!==null&&!sa();)r1(js)}function r1(m){var C=tg(m.alternate,m,Es);m.memoizedProps=m.pendingProps,C===null?Z0(m):js=C,Ra.current=null}function Z0(m){var C=m;do{var F=C.alternate;if(m=C.return,C.flags&32768){if(F=A(F,C),F!==null){F.flags&=32767,js=F;return}if(m!==null)m.flags|=32768,m.subtreeFlags=0,m.deletions=null;else{Co=6,js=null;return}}else if(F=ih(F,C,Es),F!==null){js=F;return}if(C=C.sibling,C!==null){js=C;return}js=C=m}while(C!==null);Co===0&&(Co=5)}function Lh(m,C,F){var Q=Rr,le=as.transition;try{as.transition=null,Rr=1,X0(m,C,F,Q)}finally{as.transition=le,Rr=Q}return null}function X0(m,C,F,Q){do Rp();while(wf!==null);if(yi&6)throw Error(t(327));F=m.finishedWork;var le=m.finishedLanes;if(F===null)return null;if(m.finishedWork=null,m.finishedLanes=0,F===m.current)throw Error(t(177));m.callbackNode=null,m.callbackPriority=0;var ge=F.lanes|F.childLanes;if(XA(m,ge),m===ps&&(js=ps=null,ca=0),!(F.subtreeFlags&2064)&&!(F.flags&2064)||Vm||(Vm=!0,Uh(Tr,function(){return Rp(),null})),ge=(F.flags&15990)!==0,F.subtreeFlags&15990||ge){ge=as.transition,as.transition=null;var tt=Rr;Rr=1;var It=yi;yi|=4,Ra.current=null,Te(m,F),Hi(F,m),df(cl),Ie=!!TA,cl=TA=null,m.current=F,Ya(F),Al(),yi=It,Rr=tt,as.transition=ge}else m.current=F;if(Vm&&(Vm=!1,wf=m,WA=le),ge=m.pendingLanes,ge===0&&(Rh=null),wt(F.stateNode),GA(m,uo()),C!==null)for(Q=m.onRecoverableError,F=0;F<C.length;F++)le=C[F],Q(le.value,{componentStack:le.stack,digest:le.digest});if($m)throw $m=!1,m=np,np=null,m;return WA&1&&m.tag!==0&&Rp(),ge=m.pendingLanes,ge&1?m===Q0?mm++:(mm=0,Q0=m):mm=0,FA(),null}function Rp(){if(wf!==null){var m=Yi(WA),C=as.transition,F=Rr;try{if(as.transition=null,Rr=16>m?16:m,wf===null)var Q=!1;else{if(m=wf,wf=null,WA=0,yi&6)throw Error(t(331));var le=yi;for(yi|=4,R=m.current;R!==null;){var ge=R,tt=ge.child;if(R.flags&16){var It=ge.deletions;if(It!==null){for(var Wt=0;Wt<It.length;Wt++){var xn=It[Wt];for(R=xn;R!==null;){var Ar=R;switch(Ar.tag){case 0:case 11:case 15:je(8,Ar,ge)}var Cr=Ar.child;if(Cr!==null)Cr.return=Ar,R=Cr;else for(;R!==null;){Ar=R;var ir=Ar.sibling,qr=Ar.return;if(en(Ar),Ar===xn){R=null;break}if(ir!==null){ir.return=qr,R=ir;break}R=qr}}}var oi=ge.alternate;if(oi!==null){var ai=oi.child;if(ai!==null){oi.child=null;do{var yl=ai.sibling;ai.sibling=null,ai=yl}while(ai!==null)}}R=ge}}if(ge.subtreeFlags&2064&&tt!==null)tt.return=ge,R=tt;else e:for(;R!==null;){if(ge=R,ge.flags&2048)switch(ge.tag){case 0:case 11:case 15:je(9,ge,ge.return)}var cn=ge.sibling;if(cn!==null){cn.return=ge.return,R=cn;break e}R=ge.return}}var Xt=m.current;for(R=Xt;R!==null;){tt=R;var dn=tt.child;if(tt.subtreeFlags&2064&&dn!==null)dn.return=tt,R=dn;else e:for(tt=Xt;R!==null;){if(It=R,It.flags&2048)try{switch(It.tag){case 0:case 11:case 15:yt(9,It)}}catch(si){sl(It,It.return,si)}if(It===tt){R=null;break e}var _r=It.sibling;if(_r!==null){_r.return=It.return,R=_r;break e}R=It.return}}if(yi=le,FA(),qe&&typeof qe.onPostCommitFiberRoot=="function")try{qe.onPostCommitFiberRoot(Js,m)}catch{}Q=!0}return Q}finally{Rr=F,as.transition=C}}return!1}function Xm(m,C,F){C=eh(F,C),C=nh(m,C,1),m=c(m,C,1),C=Ju(),m!==null&&(aa(m,1,C),GA(m,C))}function sl(m,C,F){if(m.tag===3)Xm(m,m,F);else for(;C!==null;){if(C.tag===3){Xm(C,m,F);break}else if(C.tag===1){var Q=C.stateNode;if(typeof C.type.getDerivedStateFromError=="function"||typeof Q.componentDidCatch=="function"&&(Rh===null||!Rh.has(Q))){m=eh(F,m),m=mf(C,m,1),C=c(C,m,1),m=Ju(),C!==null&&(aa(C,1,m),GA(C,m));break}}C=C.return}}function sv(m,C,F){var Q=m.pingCache;Q!==null&&Q.delete(C),C=Ju(),m.pingedLanes|=m.suspendedLanes&F,ps===m&&(ca&F)===F&&(Co===4||Co===3&&(ca&130023424)===ca&&500>uo()-bf?rp(m,0):pc|=F),GA(m,C)}function J0(m,C){C===0&&(m.mode&1?(C=go,go<<=1,!(go&130023424)&&(go=4194304)):C=1);var F=Ju();m=gA(m,C),m!==null&&(aa(m,C,F),GA(m,F))}function QA(m){var C=m.memoizedState,F=0;C!==null&&(F=C.retryLane),J0(m,F)}function eg(m,C){var F=0;switch(m.tag){case 13:var Q=m.stateNode,le=m.memoizedState;le!==null&&(F=le.retryLane);break;case 19:Q=m.stateNode;break;default:throw Error(t(314))}Q!==null&&Q.delete(C),J0(m,F)}var tg;tg=function(m,C,F){if(m!==null)if(m.memoizedProps!==C.pendingProps||ua.current)Bl=!0;else{if(!(m.lanes&F)&&!(C.flags&128))return Bl=!1,Ym(m,C,F);Bl=!!(m.flags&131072)}else Bl=!1,hs&&C.flags&1048576&&Vd(C,ru,C.index);switch(C.lanes=0,C.tag){case 2:var Q=C.type;Tp(m,C),m=C.pendingProps;var le=wd(C,ra.current);ou(C,F),le=pr(null,C,Q,m,le,F);var ge=ki();return C.flags|=1,typeof le=="object"&&le!==null&&typeof le.render=="function"&&le.$$typeof===void 0?(C.tag=1,C.memoizedState=null,C.updateQueue=null,ga(Q)?(ge=!0,nu(C)):ge=!1,C.memoizedState=le.state!==null&&le.state!==void 0?le.state:null,Od(C),le.updater=Hf,C.stateNode=le,le._reactInternals=C,Jd(C,Q,m,F),C=yf(null,C,Q,!0,ge,F)):(C.tag=0,hs&&ge&&LA(C),Au(null,C,le,F),C=C.child),C;case 16:Q=C.elementType;e:{switch(Tp(m,C),m=C.pendingProps,le=Q._init,Q=le(Q._payload),C.type=Q,le=C.tag=e0(Q),m=pl(Q,m),le){case 0:C=rh(null,C,Q,m,F);break e;case 1:C=Zu(null,C,Q,m,F);break e;case 11:C=Ip(null,C,Q,m,F);break e;case 14:C=kp(null,C,Q,pl(Q.type,m),F);break e}throw Error(t(306,Q,""))}return C;case 0:return Q=C.type,le=C.pendingProps,le=C.elementType===Q?le:pl(Q,le),rh(m,C,Q,le,F);case 1:return Q=C.type,le=C.pendingProps,le=C.elementType===Q?le:pl(Q,le),Zu(m,C,Q,le,F);case 3:e:{if(Jf(C),m===null)throw Error(t(387));Q=C.pendingProps,ge=C.memoizedState,le=ge.element,k(m,C),K(C,Q,null,F);var tt=C.memoizedState;if(Q=tt.element,ge.isDehydrated)if(ge={element:Q,isDehydrated:!1,cache:tt.cache,pendingSuspenseBoundaries:tt.pendingSuspenseBoundaries,transitions:tt.transitions},C.updateQueue.baseState=ge,C.memoizedState=ge,C.flags&256){le=eh(Error(t(423)),C),C=Kc(m,C,Q,F,le);break e}else if(Q!==le){le=eh(Error(t(424)),C),C=Kc(m,C,Q,F,le);break e}else for(bs=sc(C.stateNode.containerInfo.firstChild),ka=C,hs=!0,Pr=null,F=kc(C,null,Q,F),C.child=F;F;)F.flags=F.flags&-3|4096,F=F.sibling;else{if(cc(),Q===le){C=Ou(m,C,F);break e}Au(m,C,Q,F)}C=C.child}return C;case 5:return Xe(C),m===null&&fl(C),Q=C.type,le=C.pendingProps,ge=m!==null?m.memoizedProps:null,tt=le.children,hA(Q,le)?tt=null:ge!==null&&hA(Q,ge)&&(C.flags|=32),cu(m,C),Au(m,C,tt,F),C.child;case 6:return m===null&&fl(C),null;case 13:return _f(m,C,F);case 4:return Ke(C,C.stateNode.containerInfo),Q=C.pendingProps,m===null?C.child=zs(C,null,Q,F):Au(m,C,Q,F),C.child;case 11:return Q=C.type,le=C.pendingProps,le=C.elementType===Q?le:pl(Q,le),Ip(m,C,Q,le,F);case 7:return Au(m,C,C.pendingProps,F),C.child;case 8:return Au(m,C,C.pendingProps.children,F),C.child;case 12:return Au(m,C,C.pendingProps.children,F),C.child;case 10:e:{if(Q=C.type._context,le=C.pendingProps,ge=C.memoizedProps,tt=le.value,Ss(Su,Q._currentValue),Q._currentValue=tt,ge!==null)if(ln(ge.value,tt)){if(ge.children===le.children&&!ua.current){C=Ou(m,C,F);break e}}else for(ge=C.child,ge!==null&&(ge.return=C);ge!==null;){var It=ge.dependencies;if(It!==null){tt=ge.child;for(var Wt=It.firstContext;Wt!==null;){if(Wt.context===Q){if(ge.tag===1){Wt=l(-1,F&-F),Wt.tag=2;var xn=ge.updateQueue;if(xn!==null){xn=xn.shared;var Ar=xn.pending;Ar===null?Wt.next=Wt:(Wt.next=Ar.next,Ar.next=Wt),xn.pending=Wt}}ge.lanes|=F,Wt=ge.alternate,Wt!==null&&(Wt.lanes|=F),Ys(ge.return,F,C),It.lanes|=F;break}Wt=Wt.next}}else if(ge.tag===10)tt=ge.type===C.type?null:ge.child;else if(ge.tag===18){if(tt=ge.return,tt===null)throw Error(t(341));tt.lanes|=F,It=tt.alternate,It!==null&&(It.lanes|=F),Ys(tt,F,C),tt=ge.sibling}else tt=ge.child;if(tt!==null)tt.return=ge;else for(tt=ge;tt!==null;){if(tt===C){tt=null;break}if(ge=tt.sibling,ge!==null){ge.return=tt.return,tt=ge;break}tt=tt.return}ge=tt}Au(m,C,le.children,F),C=C.child}return C;case 9:return le=C.type,Q=C.pendingProps.children,ou(C,F),le=su(le),Q=Q(le),C.flags|=1,Au(m,C,Q,F),C.child;case 14:return Q=C.type,le=pl(Q,C.pendingProps),le=pl(Q.type,le),kp(m,C,Q,le,F);case 15:return Qo(m,C,C.type,C.pendingProps,F);case 17:return Q=C.type,le=C.pendingProps,le=C.elementType===Q?le:pl(Q,le),Tp(m,C),C.tag=1,ga(Q)?(m=!0,nu(C)):m=!1,ou(C,F),Xd(C,Q,le),Jd(C,Q,le,F),yf(null,C,Q,!0,m,F);case 19:return Pd(m,C,F);case 22:return Ph(m,C,F)}throw Error(t(156,C.tag))};function Uh(m,C){return Sa(m,C)}function Jm(m,C,F,Q){this.tag=m,this.key=F,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=C,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=Q,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _A(m,C,F,Q){return new Jm(m,C,F,Q)}function zh(m){return m=m.prototype,!(!m||!m.isReactComponent)}function e0(m){if(typeof m=="function")return zh(m)?1:0;if(m!=null){if(m=m.$$typeof,m===me)return 11;if(m===be)return 14}return 2}function mc(m,C){var F=m.alternate;return F===null?(F=_A(m.tag,C,m.key,m.mode),F.elementType=m.elementType,F.type=m.type,F.stateNode=m.stateNode,F.alternate=m,m.alternate=F):(F.pendingProps=C,F.type=m.type,F.flags=0,F.subtreeFlags=0,F.deletions=null),F.flags=m.flags&14680064,F.childLanes=m.childLanes,F.lanes=m.lanes,F.child=m.child,F.memoizedProps=m.memoizedProps,F.memoizedState=m.memoizedState,F.updateQueue=m.updateQueue,C=m.dependencies,F.dependencies=C===null?null:{lanes:C.lanes,firstContext:C.firstContext},F.sibling=m.sibling,F.index=m.index,F.ref=m.ref,F}function t0(m,C,F,Q,le,ge){var tt=2;if(Q=m,typeof m=="function")zh(m)&&(tt=1);else if(typeof m=="string")tt=5;else e:switch(m){case G:return ip(F.children,le,ge,C);case oe:tt=8,le|=8;break;case he:return m=_A(12,F,C,le|2),m.elementType=he,m.lanes=ge,m;case Se:return m=_A(13,F,C,le),m.elementType=Se,m.lanes=ge,m;case De:return m=_A(19,F,C,le),m.elementType=De,m.lanes=ge,m;case Ze:return vm(F,le,ge,C);default:if(typeof m=="object"&&m!==null)switch(m.$$typeof){case pe:tt=10;break e;case Ee:tt=9;break e;case me:tt=11;break e;case be:tt=14;break e;case at:tt=16,Q=null;break e}throw Error(t(130,m==null?m:typeof m,""))}return C=_A(tt,F,C,le),C.elementType=m,C.type=Q,C.lanes=ge,C}function ip(m,C,F,Q){return m=_A(7,m,Q,C),m.lanes=F,m}function vm(m,C,F,Q){return m=_A(22,m,Q,C),m.elementType=Ze,m.lanes=F,m.stateNode={isHidden:!1},m}function n0(m,C,F){return m=_A(6,m,null,C),m.lanes=F,m}function ng(m,C,F){return C=_A(4,m.children!==null?m.children:[],m.key,C),C.lanes=F,C.stateNode={containerInfo:m.containerInfo,pendingChildren:null,implementation:m.implementation},C}function i1(m,C,F,Q,le){this.tag=C,this.containerInfo=m,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ui(0),this.expirationTimes=ui(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ui(0),this.identifierPrefix=Q,this.onRecoverableError=le,this.mutableSourceEagerHydrationData=null}function r0(m,C,F,Q,le,ge,tt,It,Wt){return m=new i1(m,C,F,It,Wt),C===1?(C=1,ge===!0&&(C|=8)):C=0,ge=_A(3,null,null,C),m.current=ge,ge.stateNode=m,ge.memoizedState={element:Q,isDehydrated:F,cache:null,transitions:null,pendingSuspenseBoundaries:null},Od(ge),m}function rg(m,C,F){var Q=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ne,key:Q==null?null:""+Q,children:m,containerInfo:C,implementation:F}}function i0(m){if(!m)return Bc;m=m._reactInternals;e:{if(qi(m)!==m||m.tag!==1)throw Error(t(170));var C=m;do{switch(C.tag){case 3:C=C.stateNode.context;break e;case 1:if(ga(C.type)){C=C.stateNode.__reactInternalMemoizedMergedChildContext;break e}}C=C.return}while(C!==null);throw Error(t(171))}if(m.tag===1){var F=m.type;if(ga(F))return ac(m,F,C)}return C}function o1(m,C,F,Q,le,ge,tt,It,Wt){return m=r0(F,Q,!0,m,le,ge,tt,It,Wt),m.context=i0(null),F=m.current,Q=Ju(),le=Fh(F),ge=l(Q,le),ge.callback=C??null,c(F,ge,le),m.current.lanes=le,aa(m,le,Q),GA(m,Q),m}function Cm(m,C,F,Q){var le=C.current,ge=Ju(),tt=Fh(le);return F=i0(F),C.context===null?C.context=F:C.pendingContext=F,C=l(ge,tt),C.payload={element:m},Q=Q===void 0?null:Q,Q!==null&&(C.callback=Q),m=c(le,C,tt),m!==null&&(td(m,le,tt,ge),_(m,le,tt)),tt}function o0(m){if(m=m.current,!m.child)return null;switch(m.child.tag){case 5:return m.child.stateNode;default:return m.child.stateNode}}function s1(m,C){if(m=m.memoizedState,m!==null&&m.dehydrated!==null){var F=m.retryLane;m.retryLane=F!==0&&F<C?F:C}}function ig(m,C){s1(m,C),(m=m.alternate)&&s1(m,C)}var a1=typeof reportError=="function"?reportError:function(m){console.error(m)};function og(m){this._internalRoot=m}Fp.prototype.render=og.prototype.render=function(m){var C=this._internalRoot;if(C===null)throw Error(t(409));Cm(m,C,null,null)},Fp.prototype.unmount=og.prototype.unmount=function(){var m=this._internalRoot;if(m!==null){this._internalRoot=null;var C=m.containerInfo;Sf(function(){Cm(null,m,null,null)}),C[xu]=null}};function Fp(m){this._internalRoot=m}Fp.prototype.unstable_scheduleHydration=function(m){if(m){var C=Ws();m={blockedOn:null,target:m,priority:C};for(var F=0;F<Oa.length&&C!==0&&C<Oa[F].priority;F++);Oa.splice(F,0,m),F===0&&Ui(m)}};function _m(m){return!(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)}function Ef(m){return!(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11&&(m.nodeType!==8||m.nodeValue!==" react-mount-point-unstable "))}function Kd(){}function Bf(m,C,F,Q,le){if(le){if(typeof Q=="function"){var ge=Q;Q=function(){var xn=o0(tt);ge.call(xn)}}var tt=o1(C,Q,m,0,null,!1,!1,"",Kd);return m._reactRootContainer=tt,m[xu]=tt.current,Qu(m.nodeType===8?m.parentNode:m),Sf(),tt}for(;le=m.lastChild;)m.removeChild(le);if(typeof Q=="function"){var It=Q;Q=function(){var xn=o0(Wt);It.call(xn)}}var Wt=r0(m,0,!1,null,null,!1,!1,"",Kd);return m._reactRootContainer=Wt,m[xu]=Wt.current,Qu(m.nodeType===8?m.parentNode:m),Sf(function(){Cm(C,Wt,F,Q)}),Wt}function bm(m,C,F,Q,le){var ge=F._reactRootContainer;if(ge){var tt=ge;if(typeof le=="function"){var It=le;le=function(){var Wt=o0(tt);It.call(Wt)}}Cm(C,tt,m,le)}else tt=Bf(F,C,m,le,Q);return o0(tt)}yo=function(m){switch(m.tag){case 3:var C=m.stateNode;if(C.current.memoizedState.isDehydrated){var F=Cs(C.pendingLanes);F!==0&&(Ea(C,F|1),GA(C,uo()),!(yi&6)&&(xf=uo()+500,FA()))}break;case 13:Sf(function(){var Q=gA(m,1);if(Q!==null){var le=Ju();td(Q,m,1,le)}}),ig(m,1)}},gu=function(m){if(m.tag===13){var C=gA(m,134217728);if(C!==null){var F=Ju();td(C,m,134217728,F)}ig(m,134217728)}},wo=function(m){if(m.tag===13){var C=Fh(m),F=gA(m,C);if(F!==null){var Q=Ju();td(F,m,C,Q)}ig(m,C)}},Ws=function(){return Rr},Gs=function(m,C){var F=Rr;try{return Rr=m,C()}finally{Rr=F}},Ye=function(m,C,F){switch(C){case"input":if(_n(m,F),C=F.name,F.type==="radio"&&C!=null){for(F=m;F.parentNode;)F=F.parentNode;for(F=F.querySelectorAll("input[name="+JSON.stringify(""+C)+'][type="radio"]'),C=0;C<F.length;C++){var Q=F[C];if(Q!==m&&Q.form===m.form){var le=is(Q);if(!le)throw Error(t(90));_t(Q),_n(Q,le)}}}break;case"textarea":dr(m,F);break;case"select":C=F.value,C!=null&&Dn(m,!!F.multiple,C,!1)}},jt=Y0,xt=Sf;var Lp={usingClientEntryPoint:!1,Events:[pi,ii,is,qt,Gt,Y0]},xm={findFiberByHostInstance:Io,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},av={bundleType:xm.bundleType,version:xm.version,rendererPackageName:xm.rendererPackageName,rendererConfig:xm.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:te.ReactCurrentDispatcher,findHostInstanceByFiber:function(m){return m=Ti(m),m===null?null:m.stateNode},findFiberByHostInstance:xm.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var op=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!op.isDisabled&&op.supportsFiber)try{Js=op.inject(av),qe=op}catch{}}return ah.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Lp,ah.createPortal=function(m,C){var F=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_m(C))throw Error(t(200));return rg(m,C,null,F)},ah.createRoot=function(m,C){if(!_m(m))throw Error(t(299));var F=!1,Q="",le=a1;return C!=null&&(C.unstable_strictMode===!0&&(F=!0),C.identifierPrefix!==void 0&&(Q=C.identifierPrefix),C.onRecoverableError!==void 0&&(le=C.onRecoverableError)),C=r0(m,1,!1,null,null,F,!1,Q,le),m[xu]=C.current,Qu(m.nodeType===8?m.parentNode:m),new og(C)},ah.findDOMNode=function(m){if(m==null)return null;if(m.nodeType===1)return m;var C=m._reactInternals;if(C===void 0)throw typeof m.render=="function"?Error(t(188)):(m=Object.keys(m).join(","),Error(t(268,m)));return m=Ti(C),m=m===null?null:m.stateNode,m},ah.flushSync=function(m){return Sf(m)},ah.hydrate=function(m,C,F){if(!Ef(C))throw Error(t(200));return bm(null,m,C,!0,F)},ah.hydrateRoot=function(m,C,F){if(!_m(m))throw Error(t(405));var Q=F!=null&&F.hydratedSources||null,le=!1,ge="",tt=a1;if(F!=null&&(F.unstable_strictMode===!0&&(le=!0),F.identifierPrefix!==void 0&&(ge=F.identifierPrefix),F.onRecoverableError!==void 0&&(tt=F.onRecoverableError)),C=o1(C,null,m,1,F??null,le,!1,ge,tt),m[xu]=C.current,Qu(m),Q)for(m=0;m<Q.length;m++)F=Q[m],le=F._getVersion,le=le(F._source),C.mutableSourceEagerHydrationData==null?C.mutableSourceEagerHydrationData=[F,le]:C.mutableSourceEagerHydrationData.push(F,le);return new Fp(C)},ah.render=function(m,C,F){if(!Ef(C))throw Error(t(200));return bm(null,m,C,!1,F)},ah.unmountComponentAtNode=function(m){if(!Ef(m))throw Error(t(40));return m._reactRootContainer?(Sf(function(){bm(null,null,m,!1,function(){m._reactRootContainer=null,m[xu]=null})}),!0):!1},ah.unstable_batchedUpdates=Y0,ah.unstable_renderSubtreeIntoContainer=function(m,C,F,Q){if(!Ef(F))throw Error(t(200));if(m==null||m._reactInternals===void 0)throw Error(t(38));return bm(m,C,F,!1,Q)},ah.version="18.3.1-next-f1338f8080-20240426",ah}var BI;function $C(){if(BI)return V3.exports;BI=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),V3.exports=FQ(),V3.exports}var OI;function LQ(){if(OI)return H_;OI=1;var n=$C();return H_.createRoot=n.createRoot,H_.hydrateRoot=n.hydrateRoot,H_}var UQ=LQ();const zQ="modulepreload",jQ=function(n){return"/maputnik/"+n},II={},m1=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(t.map(d=>{if(d=jQ(d),d in II)return;II[d]=!0;const g=d.endsWith(".css"),b=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${b}`))return;const E=document.createElement("link");if(E.rel=g?"stylesheet":zQ,g||(E.as="script"),E.crossOrigin="",E.href=d,o&&E.setAttribute("nonce",o),document.head.appendChild(E),g)return new Promise((S,I)=>{E.addEventListener("load",S),E.addEventListener("error",()=>I(new Error(`Unable to preload CSS for ${d}`)))})}))}function s(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return i.then(a=>{for(const o of a||[])o.status==="rejected"&&s(o.reason);return e().catch(s)})},NQ=(n,e,t)=>{const r=n[e];return r?typeof r=="function"?r():Promise.resolve(r):new Promise((i,s)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(s.bind(null,new Error("Unknown variable dynamic import: "+e+(e.split("/").length!==t?". Note that variables only represent file names one level deep.":""))))})},Ko=n=>typeof n=="string",Cv=()=>{let n,e;const t=new Promise((r,i)=>{n=r,e=i});return t.resolve=n,t.reject=e,t},kI=n=>n==null?"":""+n,WQ=(n,e,t)=>{n.forEach(r=>{e[r]&&(t[r]=e[r])})},GQ=/###/g,TI=n=>n&&n.indexOf("###")>-1?n.replace(GQ,"."):n,PI=n=>!n||Ko(n),tC=(n,e,t)=>{const r=Ko(e)?e.split("."):e;let i=0;for(;i<r.length-1;){if(PI(n))return{};const s=TI(r[i]);!n[s]&&t&&(n[s]=new t),Object.prototype.hasOwnProperty.call(n,s)?n=n[s]:n={},++i}return PI(n)?{}:{obj:n,k:TI(r[i])}},KI=(n,e,t)=>{const{obj:r,k:i}=tC(n,e,Object);if(r!==void 0||e.length===1){r[i]=t;return}let s=e[e.length-1],a=e.slice(0,e.length-1),o=tC(n,a,Object);for(;o.obj===void 0&&a.length;)s=`${a[a.length-1]}.${s}`,a=a.slice(0,a.length-1),o=tC(n,a,Object),o!=null&&o.obj&&typeof o.obj[`${o.k}.${s}`]<"u"&&(o.obj=void 0);o.obj[`${o.k}.${s}`]=t},QQ=(n,e,t,r)=>{const{obj:i,k:s}=tC(n,e,Object);i[s]=i[s]||[],i[s].push(t)},o2=(n,e)=>{const{obj:t,k:r}=tC(n,e);if(t&&Object.prototype.hasOwnProperty.call(t,r))return t[r]},qQ=(n,e,t)=>{const r=o2(n,t);return r!==void 0?r:o2(e,t)},oL=(n,e,t)=>{for(const r in e)r!=="__proto__"&&r!=="constructor"&&(r in n?Ko(n[r])||n[r]instanceof String||Ko(e[r])||e[r]instanceof String?t&&(n[r]=e[r]):oL(n[r],e[r],t):n[r]=e[r]);return n},g1=n=>n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var YQ={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const $Q=n=>Ko(n)?n.replace(/[&<>"'\/]/g,e=>YQ[e]):n;class VQ{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(t!==void 0)return t;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}const HQ=[" ",",","?","!",";"],ZQ=new VQ(20),XQ=(n,e,t)=>{e=e||"",t=t||"";const r=HQ.filter(a=>e.indexOf(a)<0&&t.indexOf(a)<0);if(r.length===0)return!0;const i=ZQ.getRegExp(`(${r.map(a=>a==="?"?"\\?":a).join("|")})`);let s=!i.test(n);if(!s){const a=n.indexOf(t);a>0&&!i.test(n.substring(0,a))&&(s=!0)}return s},g6=function(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!n)return;if(n[e])return Object.prototype.hasOwnProperty.call(n,e)?n[e]:void 0;const r=e.split(t);let i=n;for(let s=0;s<r.length;){if(!i||typeof i!="object")return;let a,o="";for(let d=s;d<r.length;++d)if(d!==s&&(o+=t),o+=r[d],a=i[o],a!==void 0){if(["string","number","boolean"].indexOf(typeof a)>-1&&d<r.length-1)continue;s+=d-s+1;break}i=a}return i},s2=n=>n==null?void 0:n.replace("_","-"),JQ={type:"logger",log(n){this.output("log",n)},warn(n){this.output("warn",n)},error(n){this.output("error",n)},output(n,e){var t,r;(r=(t=console==null?void 0:console[n])==null?void 0:t.apply)==null||r.call(t,console,e)}};class a2{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(e,t)}init(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||JQ,this.options=t,this.debug=t.debug}log(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.forward(t,"log","",!0)}warn(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.forward(t,"warn","",!0)}error(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.forward(t,"error","")}deprecate(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,r,i){return i&&!this.debug?null:(Ko(e[0])&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new a2(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new a2(this.logger,e)}}var Hp=new a2;class px{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const i=this.observers[r].get(t)||0;this.observers[r].set(t,i+1)}),this}off(e,t){if(this.observers[e]){if(!t){delete this.observers[e];return}this.observers[e].delete(t)}}emit(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];this.observers[e]&&Array.from(this.observers[e].entries()).forEach(a=>{let[o,d]=a;for(let g=0;g<d;g++)o(...r)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(a=>{let[o,d]=a;for(let g=0;g<d;g++)o.apply(o,[e,...r])})}}class DI extends px{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,r){var g,b;let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const s=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,a=i.ignoreJSONStructure!==void 0?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let o;e.indexOf(".")>-1?o=e.split("."):(o=[e,t],r&&(Array.isArray(r)?o.push(...r):Ko(r)&&s?o.push(...r.split(s)):o.push(r)));const d=o2(this.data,o);return!d&&!t&&!r&&e.indexOf(".")>-1&&(e=o[0],t=o[1],r=o.slice(2).join(".")),d||!a||!Ko(r)?d:g6((b=(g=this.data)==null?void 0:g[e])==null?void 0:b[t],r,s)}addResource(e,t,r,i){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const a=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator;let o=[e,t];r&&(o=o.concat(a?r.split(a):r)),e.indexOf(".")>-1&&(o=e.split("."),i=t,t=o[1]),this.addNamespaces(t),KI(this.data,o,i),s.silent||this.emit("added",e,t,r,i)}addResources(e,t,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const s in r)(Ko(r[s])||Array.isArray(r[s]))&&this.addResource(e,t,s,r[s],{silent:!0});i.silent||this.emit("added",e,t,r)}addResourceBundle(e,t,r,i,s){let a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},o=[e,t];e.indexOf(".")>-1&&(o=e.split("."),i=r,r=t,t=o[1]),this.addNamespaces(t);let d=o2(this.data,o)||{};a.skipCopy||(r=JSON.parse(JSON.stringify(r))),i?oL(d,r,s):d={...d,...r},KI(this.data,o,d),a.silent||this.emit("added",e,t,r)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return this.getResource(e,t)!==void 0}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(i=>t[i]&&Object.keys(t[i]).length>0)}toJSON(){return this.data}}var sL={processors:{},addPostProcessor(n){this.processors[n.name]=n},handle(n,e,t,r,i){return n.forEach(s=>{var a;e=((a=this.processors[s])==null?void 0:a.process(e,t,r,i))??e}),e}};const RI={},FI=n=>!Ko(n)&&typeof n!="boolean"&&typeof n!="number";class l2 extends px{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),WQ(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Hp.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(e==null)return!1;const r=this.resolve(e,t);return(r==null?void 0:r.res)!==void 0}extractFromKey(e,t){let r=t.nsSeparator!==void 0?t.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const i=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator;let s=t.ns||this.options.defaultNS||[];const a=r&&e.indexOf(r)>-1,o=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!XQ(e,r,i);if(a&&!o){const d=e.match(this.interpolator.nestingRegexp);if(d&&d.length>0)return{key:e,namespaces:Ko(s)?[s]:s};const g=e.split(r);(r!==i||r===i&&this.options.ns.indexOf(g[0])>-1)&&(s=g.shift()),e=g.join(i)}return{key:e,namespaces:Ko(s)?[s]:s}}translate(e,t,r){if(typeof t!="object"&&this.options.overloadTranslationOptionHandler&&(t=this.options.overloadTranslationOptionHandler(arguments)),typeof t=="object"&&(t={...t}),t||(t={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const i=t.returnDetails!==void 0?t.returnDetails:this.options.returnDetails,s=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator,{key:a,namespaces:o}=this.extractFromKey(e[e.length-1],t),d=o[o.length-1],g=t.lng||this.language,b=t.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if((g==null?void 0:g.toLowerCase())==="cimode"){if(b){const Ee=t.nsSeparator||this.options.nsSeparator;return i?{res:`${d}${Ee}${a}`,usedKey:a,exactUsedKey:a,usedLng:g,usedNS:d,usedParams:this.getUsedParamsDetails(t)}:`${d}${Ee}${a}`}return i?{res:a,usedKey:a,exactUsedKey:a,usedLng:g,usedNS:d,usedParams:this.getUsedParamsDetails(t)}:a}const E=this.resolve(e,t);let S=E==null?void 0:E.res;const I=(E==null?void 0:E.usedKey)||a,P=(E==null?void 0:E.exactUsedKey)||a,z=["[object Number]","[object Function]","[object RegExp]"],j=t.joinArrays!==void 0?t.joinArrays:this.options.joinArrays,q=!this.i18nFormat||this.i18nFormat.handleAsObject,Y=t.count!==void 0&&!Ko(t.count),ie=l2.hasDefaultValue(t),te=Y?this.pluralResolver.getSuffix(g,t.count,t):"",V=t.ordinal&&Y?this.pluralResolver.getSuffix(g,t.count,{ordinal:!1}):"",ne=Y&&!t.ordinal&&t.count===0,G=ne&&t[`defaultValue${this.options.pluralSeparator}zero`]||t[`defaultValue${te}`]||t[`defaultValue${V}`]||t.defaultValue;let oe=S;q&&!S&&ie&&(oe=G);const he=FI(oe),pe=Object.prototype.toString.apply(oe);if(q&&oe&&he&&z.indexOf(pe)<0&&!(Ko(j)&&Array.isArray(oe))){if(!t.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const Ee=this.options.returnedObjectHandler?this.options.returnedObjectHandler(I,oe,{...t,ns:o}):`key '${a} (${this.language})' returned an object instead of string.`;return i?(E.res=Ee,E.usedParams=this.getUsedParamsDetails(t),E):Ee}if(s){const Ee=Array.isArray(oe),me=Ee?[]:{},Se=Ee?P:I;for(const De in oe)if(Object.prototype.hasOwnProperty.call(oe,De)){const be=`${Se}${s}${De}`;ie&&!S?me[De]=this.translate(be,{...t,defaultValue:FI(G)?G[De]:void 0,joinArrays:!1,ns:o}):me[De]=this.translate(be,{...t,joinArrays:!1,ns:o}),me[De]===be&&(me[De]=oe[De])}S=me}}else if(q&&Ko(j)&&Array.isArray(S))S=S.join(j),S&&(S=this.extendTranslation(S,e,t,r));else{let Ee=!1,me=!1;!this.isValidLookup(S)&&ie&&(Ee=!0,S=G),this.isValidLookup(S)||(me=!0,S=a);const De=(t.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&me?void 0:S,be=ie&&G!==S&&this.options.updateMissing;if(me||Ee||be){if(this.logger.log(be?"updateKey":"missingKey",g,d,a,be?G:S),s){const We=this.resolve(a,{...t,keySeparator:!1});We&&We.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let at=[];const Ze=this.languageUtils.getFallbackCodes(this.options.fallbackLng,t.lng||this.language);if(this.options.saveMissingTo==="fallback"&&Ze&&Ze[0])for(let We=0;We<Ze.length;We++)at.push(Ze[We]);else this.options.saveMissingTo==="all"?at=this.languageUtils.toResolveHierarchy(t.lng||this.language):at.push(t.lng||this.language);const Je=(We,Me,Fe)=>{var bt;const He=ie&&Fe!==S?Fe:De;this.options.missingKeyHandler?this.options.missingKeyHandler(We,d,Me,He,be,t):(bt=this.backendConnector)!=null&&bt.saveMissing&&this.backendConnector.saveMissing(We,d,Me,He,be,t),this.emit("missingKey",We,d,Me,S)};this.options.saveMissing&&(this.options.saveMissingPlurals&&Y?at.forEach(We=>{const Me=this.pluralResolver.getSuffixes(We,t);ne&&t[`defaultValue${this.options.pluralSeparator}zero`]&&Me.indexOf(`${this.options.pluralSeparator}zero`)<0&&Me.push(`${this.options.pluralSeparator}zero`),Me.forEach(Fe=>{Je([We],a+Fe,t[`defaultValue${Fe}`]||G)})}):Je(at,a,G))}S=this.extendTranslation(S,e,t,E,r),me&&S===a&&this.options.appendNamespaceToMissingKey&&(S=`${d}:${a}`),(me||Ee)&&this.options.parseMissingKeyHandler&&(S=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${d}:${a}`:a,Ee?S:void 0))}return i?(E.res=S,E.usedParams=this.getUsedParamsDetails(t),E):S}extendTranslation(e,t,r,i,s){var g,b;var a=this;if((g=this.i18nFormat)!=null&&g.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const E=Ko(e)&&(((b=r==null?void 0:r.interpolation)==null?void 0:b.skipOnVariables)!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let S;if(E){const P=e.match(this.interpolator.nestingRegexp);S=P&&P.length}let I=r.replace&&!Ko(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(I={...this.options.interpolation.defaultVariables,...I}),e=this.interpolator.interpolate(e,I,r.lng||this.language||i.usedLng,r),E){const P=e.match(this.interpolator.nestingRegexp),z=P&&P.length;S<z&&(r.nest=!1)}!r.lng&&i&&i.res&&(r.lng=this.language||i.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,function(){for(var P=arguments.length,z=new Array(P),j=0;j<P;j++)z[j]=arguments[j];return(s==null?void 0:s[0])===z[0]&&!r.context?(a.logger.warn(`It seems you are nesting recursively key: ${z[0]} in key: ${t[0]}`),null):a.translate(...z,t)},r)),r.interpolation&&this.interpolator.reset()}const o=r.postProcess||this.options.postProcess,d=Ko(o)?[o]:o;return e!=null&&(d!=null&&d.length)&&r.applyPostProcessor!==!1&&(e=sL.handle(d,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r,i,s,a,o;return Ko(e)&&(e=[e]),e.forEach(d=>{if(this.isValidLookup(r))return;const g=this.extractFromKey(d,t),b=g.key;i=b;let E=g.namespaces;this.options.fallbackNS&&(E=E.concat(this.options.fallbackNS));const S=t.count!==void 0&&!Ko(t.count),I=S&&!t.ordinal&&t.count===0,P=t.context!==void 0&&(Ko(t.context)||typeof t.context=="number")&&t.context!=="",z=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);E.forEach(j=>{var q,Y;this.isValidLookup(r)||(o=j,!RI[`${z[0]}-${j}`]&&((q=this.utils)!=null&&q.hasLoadedNamespace)&&!((Y=this.utils)!=null&&Y.hasLoadedNamespace(o))&&(RI[`${z[0]}-${j}`]=!0,this.logger.warn(`key "${i}" for languages "${z.join(", ")}" won't get resolved as namespace "${o}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),z.forEach(ie=>{var ne;if(this.isValidLookup(r))return;a=ie;const te=[b];if((ne=this.i18nFormat)!=null&&ne.addLookupKeys)this.i18nFormat.addLookupKeys(te,b,ie,j,t);else{let G;S&&(G=this.pluralResolver.getSuffix(ie,t.count,t));const oe=`${this.options.pluralSeparator}zero`,he=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(S&&(te.push(b+G),t.ordinal&&G.indexOf(he)===0&&te.push(b+G.replace(he,this.options.pluralSeparator)),I&&te.push(b+oe)),P){const pe=`${b}${this.options.contextSeparator}${t.context}`;te.push(pe),S&&(te.push(pe+G),t.ordinal&&G.indexOf(he)===0&&te.push(pe+G.replace(he,this.options.pluralSeparator)),I&&te.push(pe+oe))}}let V;for(;V=te.pop();)this.isValidLookup(r)||(s=V,r=this.getResource(ie,j,V,t))}))})}),{res:r,usedKey:i,exactUsedKey:s,usedLng:a,usedNS:o}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,t,r){var s;let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return(s=this.i18nFormat)!=null&&s.getResource?this.i18nFormat.getResource(e,t,r,i):this.resourceStore.getResource(e,t,r,i)}getUsedParamsDetails(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&!Ko(e.replace);let i=r?e.replace:e;if(r&&typeof e.count<"u"&&(i.count=e.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!r){i={...i};for(const s of t)delete i[s]}return i}static hasDefaultValue(e){const t="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t===r.substring(0,t.length)&&e[r]!==void 0)return!0;return!1}}class LI{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Hp.create("languageUtils")}getScriptPartFromCode(e){if(e=s2(e),!e||e.indexOf("-")<0)return null;const t=e.split("-");return t.length===2||(t.pop(),t[t.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(t.join("-"))}getLanguagePartFromCode(e){if(e=s2(e),!e||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(Ko(e)&&e.indexOf("-")>-1){let t;try{t=Intl.getCanonicalLocales(e)[0]}catch{}return t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(r=>{if(t)return;const i=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(i))&&(t=i)}),!t&&this.options.supportedLngs&&e.forEach(r=>{if(t)return;const i=this.getLanguagePartFromCode(r);if(this.isSupportedCode(i))return t=i;t=this.options.supportedLngs.find(s=>{if(s===i)return s;if(!(s.indexOf("-")<0&&i.indexOf("-")<0)&&(s.indexOf("-")>0&&i.indexOf("-")<0&&s.substring(0,s.indexOf("-"))===i||s.indexOf(i)===0&&i.length>1))return s})}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if(typeof e=="function"&&(e=e(t)),Ko(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let r=e[t];return r||(r=e[this.getScriptPartFromCode(t)]),r||(r=e[this.formatLanguageCode(t)]),r||(r=e[this.getLanguagePartFromCode(t)]),r||(r=e.default),r||[]}toResolveHierarchy(e,t){const r=this.getFallbackCodes(t||this.options.fallbackLng||[],e),i=[],s=a=>{a&&(this.isSupportedCode(a)?i.push(a):this.logger.warn(`rejecting language code not found in supportedLngs: ${a}`))};return Ko(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&s(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&s(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&s(this.getLanguagePartFromCode(e))):Ko(e)&&s(this.formatLanguageCode(e)),r.forEach(a=>{i.indexOf(a)<0&&s(this.formatLanguageCode(a))}),i}}const UI={zero:0,one:1,two:2,few:3,many:4,other:5},zI={select:n=>n===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class eq{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=e,this.options=t,this.logger=Hp.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=s2(e==="dev"?"en":e),i=t.ordinal?"ordinal":"cardinal",s=JSON.stringify({cleanedCode:r,type:i});if(s in this.pluralRulesCache)return this.pluralRulesCache[s];let a;try{a=new Intl.PluralRules(r,{type:i})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),zI;if(!e.match(/-|_/))return zI;const d=this.languageUtils.getLanguagePartFromCode(e);a=this.getRule(d,t)}return this.pluralRulesCache[s]=a,a}needsPlural(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.getRule(e,t);return r||(r=this.getRule("dev",t)),(r==null?void 0:r.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(e,r).map(i=>`${t}${i}`)}getSuffixes(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.getRule(e,t);return r||(r=this.getRule("dev",t)),r?r.resolvedOptions().pluralCategories.sort((i,s)=>UI[i]-UI[s]).map(i=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${i}`):[]}getSuffix(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=this.getRule(e,r);return i?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${i.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",t,r))}}const jI=function(n,e,t){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,s=qQ(n,e,t);return!s&&i&&Ko(t)&&(s=g6(n,t,r),s===void 0&&(s=g6(e,t,r))),s},X3=n=>n.replace(/\$/g,"$$$$");class tq{constructor(){var t;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=Hp.create("interpolator"),this.options=e,this.format=((t=e==null?void 0:e.interpolation)==null?void 0:t.format)||(r=>r),this.init(e)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:r,useRawValueToEscape:i,prefix:s,prefixEscaped:a,suffix:o,suffixEscaped:d,formatSeparator:g,unescapeSuffix:b,unescapePrefix:E,nestingPrefix:S,nestingPrefixEscaped:I,nestingSuffix:P,nestingSuffixEscaped:z,nestingOptionsSeparator:j,maxReplaces:q,alwaysFormat:Y}=e.interpolation;this.escape=t!==void 0?t:$Q,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=i!==void 0?i:!1,this.prefix=s?g1(s):a||"{{",this.suffix=o?g1(o):d||"}}",this.formatSeparator=g||",",this.unescapePrefix=b?"":E||"-",this.unescapeSuffix=this.unescapePrefix?"":b||"",this.nestingPrefix=S?g1(S):I||g1("$t("),this.nestingSuffix=P?g1(P):z||g1(")"),this.nestingOptionsSeparator=j||",",this.maxReplaces=q||1e3,this.alwaysFormat=Y!==void 0?Y:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(t,r)=>(t==null?void 0:t.source)===r?(t.lastIndex=0,t):new RegExp(r,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,t,r,i){var I;let s,a,o;const d=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},g=P=>{if(P.indexOf(this.formatSeparator)<0){const Y=jI(t,d,P,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(Y,void 0,r,{...i,...t,interpolationkey:P}):Y}const z=P.split(this.formatSeparator),j=z.shift().trim(),q=z.join(this.formatSeparator).trim();return this.format(jI(t,d,j,this.options.keySeparator,this.options.ignoreJSONStructure),q,r,{...i,...t,interpolationkey:j})};this.resetRegExp();const b=(i==null?void 0:i.missingInterpolationHandler)||this.options.missingInterpolationHandler,E=((I=i==null?void 0:i.interpolation)==null?void 0:I.skipOnVariables)!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:P=>X3(P)},{regex:this.regexp,safeValue:P=>this.escapeValue?X3(this.escape(P)):X3(P)}].forEach(P=>{for(o=0;s=P.regex.exec(e);){const z=s[1].trim();if(a=g(z),a===void 0)if(typeof b=="function"){const q=b(e,s,i);a=Ko(q)?q:""}else if(i&&Object.prototype.hasOwnProperty.call(i,z))a="";else if(E){a=s[0];continue}else this.logger.warn(`missed to pass in variable ${z} for interpolating ${e}`),a="";else!Ko(a)&&!this.useRawValueToEscape&&(a=kI(a));const j=P.safeValue(a);if(e=e.replace(s[0],j),E?(P.regex.lastIndex+=a.length,P.regex.lastIndex-=s[0].length):P.regex.lastIndex=0,o++,o>=this.maxReplaces)break}}),e}nest(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i,s,a;const o=(d,g)=>{const b=this.nestingOptionsSeparator;if(d.indexOf(b)<0)return d;const E=d.split(new RegExp(`${b}[ ]*{`));let S=`{${E[1]}`;d=E[0],S=this.interpolate(S,a);const I=S.match(/'/g),P=S.match(/"/g);(((I==null?void 0:I.length)??0)%2===0&&!P||P.length%2!==0)&&(S=S.replace(/'/g,'"'));try{a=JSON.parse(S),g&&(a={...g,...a})}catch(z){return this.logger.warn(`failed parsing options string in nesting for key ${d}`,z),`${d}${b}${S}`}return a.defaultValue&&a.defaultValue.indexOf(this.prefix)>-1&&delete a.defaultValue,d};for(;i=this.nestingRegexp.exec(e);){let d=[];a={...r},a=a.replace&&!Ko(a.replace)?a.replace:a,a.applyPostProcessor=!1,delete a.defaultValue;let g=!1;if(i[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(i[1])){const b=i[1].split(this.formatSeparator).map(E=>E.trim());i[1]=b.shift(),d=b,g=!0}if(s=t(o.call(this,i[1].trim(),a),a),s&&i[0]===e&&!Ko(s))return s;Ko(s)||(s=kI(s)),s||(this.logger.warn(`missed to resolve ${i[1]} for nesting ${e}`),s=""),g&&(s=d.reduce((b,E)=>this.format(b,E,r.lng,{...r,interpolationkey:i[1].trim()}),s.trim())),e=e.replace(i[0],s),this.regexp.lastIndex=0}return e}}const nq=n=>{let e=n.toLowerCase().trim();const t={};if(n.indexOf("(")>-1){const r=n.split("(");e=r[0].toLowerCase().trim();const i=r[1].substring(0,r[1].length-1);e==="currency"&&i.indexOf(":")<0?t.currency||(t.currency=i.trim()):e==="relativetime"&&i.indexOf(":")<0?t.range||(t.range=i.trim()):i.split(";").forEach(a=>{if(a){const[o,...d]=a.split(":"),g=d.join(":").trim().replace(/^'+|'+$/g,""),b=o.trim();t[b]||(t[b]=g),g==="false"&&(t[b]=!1),g==="true"&&(t[b]=!0),isNaN(g)||(t[b]=parseInt(g,10))}})}return{formatName:e,formatOptions:t}},y1=n=>{const e={};return(t,r,i)=>{let s=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(s={...s,[i.interpolationkey]:void 0});const a=r+JSON.stringify(s);let o=e[a];return o||(o=n(s2(r),i),e[a]=o),o(t)}};class rq{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=Hp.create("formatter"),this.options=e,this.formats={number:y1((t,r)=>{const i=new Intl.NumberFormat(t,{...r});return s=>i.format(s)}),currency:y1((t,r)=>{const i=new Intl.NumberFormat(t,{...r,style:"currency"});return s=>i.format(s)}),datetime:y1((t,r)=>{const i=new Intl.DateTimeFormat(t,{...r});return s=>i.format(s)}),relativetime:y1((t,r)=>{const i=new Intl.RelativeTimeFormat(t,{...r});return s=>i.format(s,r.range||"day")}),list:y1((t,r)=>{const i=new Intl.ListFormat(t,{...r});return s=>i.format(s)})},this.init(e)}init(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=t.interpolation.formatSeparator||","}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=y1(t)}format(e,t,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const s=t.split(this.formatSeparator);if(s.length>1&&s[0].indexOf("(")>1&&s[0].indexOf(")")<0&&s.find(o=>o.indexOf(")")>-1)){const o=s.findIndex(d=>d.indexOf(")")>-1);s[0]=[s[0],...s.splice(1,o)].join(this.formatSeparator)}return s.reduce((o,d)=>{var E;const{formatName:g,formatOptions:b}=nq(d);if(this.formats[g]){let S=o;try{const I=((E=i==null?void 0:i.formatParams)==null?void 0:E[i.interpolationkey])||{},P=I.locale||I.lng||i.locale||i.lng||r;S=this.formats[g](o,P,{...b,...i,...I})}catch(I){this.logger.warn(I)}return S}else this.logger.warn(`there was no format function for ${g}`);return o},e)}}const iq=(n,e)=>{n.pending[e]!==void 0&&(delete n.pending[e],n.pendingCount--)};class oq extends px{constructor(e,t,r){var s,a;let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=e,this.store=t,this.services=r,this.languageUtils=r.languageUtils,this.options=i,this.logger=Hp.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],(a=(s=this.backend)==null?void 0:s.init)==null||a.call(s,r,i.backend,i)}queueLoad(e,t,r,i){const s={},a={},o={},d={};return e.forEach(g=>{let b=!0;t.forEach(E=>{const S=`${g}|${E}`;!r.reload&&this.store.hasResourceBundle(g,E)?this.state[S]=2:this.state[S]<0||(this.state[S]===1?a[S]===void 0&&(a[S]=!0):(this.state[S]=1,b=!1,a[S]===void 0&&(a[S]=!0),s[S]===void 0&&(s[S]=!0),d[E]===void 0&&(d[E]=!0)))}),b||(o[g]=!0)}),(Object.keys(s).length||Object.keys(a).length)&&this.queue.push({pending:a,pendingCount:Object.keys(a).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(s),pending:Object.keys(a),toLoadLanguages:Object.keys(o),toLoadNamespaces:Object.keys(d)}}loaded(e,t,r){const i=e.split("|"),s=i[0],a=i[1];t&&this.emit("failedLoading",s,a,t),!t&&r&&this.store.addResourceBundle(s,a,r,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&r&&(this.state[e]=0);const o={};this.queue.forEach(d=>{QQ(d.loaded,[s],a),iq(d,e),t&&d.errors.push(t),d.pendingCount===0&&!d.done&&(Object.keys(d.loaded).forEach(g=>{o[g]||(o[g]={});const b=d.loaded[g];b.length&&b.forEach(E=>{o[g][E]===void 0&&(o[g][E]=!0)})}),d.done=!0,d.errors.length?d.callback(d.errors):d.callback())}),this.emit("loaded",o),this.queue=this.queue.filter(d=>!d.done)}read(e,t,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,a=arguments.length>5?arguments[5]:void 0;if(!e.length)return a(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:t,fcName:r,tried:i,wait:s,callback:a});return}this.readingCalls++;const o=(g,b)=>{if(this.readingCalls--,this.waitingReads.length>0){const E=this.waitingReads.shift();this.read(E.lng,E.ns,E.fcName,E.tried,E.wait,E.callback)}if(g&&b&&i<this.maxRetries){setTimeout(()=>{this.read.call(this,e,t,r,i+1,s*2,a)},s);return}a(g,b)},d=this.backend[r].bind(this.backend);if(d.length===2){try{const g=d(e,t);g&&typeof g.then=="function"?g.then(b=>o(null,b)).catch(o):o(null,g)}catch(g){o(g)}return}return d(e,t,o)}prepareLoading(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();Ko(e)&&(e=this.languageUtils.toResolveHierarchy(e)),Ko(t)&&(t=[t]);const s=this.queueLoad(e,t,r,i);if(!s.toLoad.length)return s.pending.length||i(),null;s.toLoad.forEach(a=>{this.loadOne(a)})}load(e,t,r){this.prepareLoading(e,t,{},r)}reload(e,t,r){this.prepareLoading(e,t,{reload:!0},r)}loadOne(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=e.split("|"),i=r[0],s=r[1];this.read(i,s,"read",void 0,void 0,(a,o)=>{a&&this.logger.warn(`${t}loading namespace ${s} for language ${i} failed`,a),!a&&o&&this.logger.log(`${t}loaded namespace ${s} for language ${i}`,o),this.loaded(e,a,o)})}saveMissing(e,t,r,i,s){var d,g,b,E,S;let a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if((g=(d=this.services)==null?void 0:d.utils)!=null&&g.hasLoadedNamespace&&!((E=(b=this.services)==null?void 0:b.utils)!=null&&E.hasLoadedNamespace(t))){this.logger.warn(`did not save key "${r}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if((S=this.backend)!=null&&S.create){const I={...a,isUpdate:s},P=this.backend.create.bind(this.backend);if(P.length<6)try{let z;P.length===5?z=P(e,t,r,i,I):z=P(e,t,r,i),z&&typeof z.then=="function"?z.then(j=>o(null,j)).catch(o):o(null,z)}catch(z){o(z)}else P(e,t,r,i,o,I)}!e||!e[0]||this.store.addResource(e[0],t,r,i)}}}const NI=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:n=>{let e={};if(typeof n[1]=="object"&&(e=n[1]),Ko(n[1])&&(e.defaultValue=n[1]),Ko(n[2])&&(e.tDescription=n[2]),typeof n[2]=="object"||typeof n[3]=="object"){const t=n[3]||n[2];Object.keys(t).forEach(r=>{e[r]=t[r]})}return e},interpolation:{escapeValue:!0,format:n=>n,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),WI=n=>{var e,t;return Ko(n.ns)&&(n.ns=[n.ns]),Ko(n.fallbackLng)&&(n.fallbackLng=[n.fallbackLng]),Ko(n.fallbackNS)&&(n.fallbackNS=[n.fallbackNS]),((t=(e=n.supportedLngs)==null?void 0:e.indexOf)==null?void 0:t.call(e,"cimode"))<0&&(n.supportedLngs=n.supportedLngs.concat(["cimode"])),typeof n.initImmediate=="boolean"&&(n.initAsync=n.initImmediate),n},Z_=()=>{},sq=n=>{Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach(t=>{typeof n[t]=="function"&&(n[t]=n[t].bind(n))})};class pC extends px{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(super(),this.options=WI(e),this.services={},this.logger=Hp,this.modules={external:[]},sq(this),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(){var e=this;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof t=="function"&&(r=t,t={}),t.defaultNS==null&&t.ns&&(Ko(t.ns)?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const i=NI();this.options={...i,...this.options,...WI(t)},this.options.interpolation={...i.interpolation,...this.options.interpolation},t.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=t.keySeparator),t.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=t.nsSeparator);const s=b=>b?typeof b=="function"?new b:b:null;if(!this.options.isClone){this.modules.logger?Hp.init(s(this.modules.logger),this.options):Hp.init(null,this.options);let b;this.modules.formatter?b=this.modules.formatter:b=rq;const E=new LI(this.options);this.store=new DI(this.options.resources,this.options);const S=this.services;S.logger=Hp,S.resourceStore=this.store,S.languageUtils=E,S.pluralResolver=new eq(E,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),b&&(!this.options.interpolation.format||this.options.interpolation.format===i.interpolation.format)&&(S.formatter=s(b),S.formatter.init(S,this.options),this.options.interpolation.format=S.formatter.format.bind(S.formatter)),S.interpolator=new tq(this.options),S.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},S.backendConnector=new oq(s(this.modules.backend),S.resourceStore,S,this.options),S.backendConnector.on("*",function(I){for(var P=arguments.length,z=new Array(P>1?P-1:0),j=1;j<P;j++)z[j-1]=arguments[j];e.emit(I,...z)}),this.modules.languageDetector&&(S.languageDetector=s(this.modules.languageDetector),S.languageDetector.init&&S.languageDetector.init(S,this.options.detection,this.options)),this.modules.i18nFormat&&(S.i18nFormat=s(this.modules.i18nFormat),S.i18nFormat.init&&S.i18nFormat.init(this)),this.translator=new l2(this.services,this.options),this.translator.on("*",function(I){for(var P=arguments.length,z=new Array(P>1?P-1:0),j=1;j<P;j++)z[j-1]=arguments[j];e.emit(I,...z)}),this.modules.external.forEach(I=>{I.init&&I.init(this)})}if(this.format=this.options.interpolation.format,r||(r=Z_),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const b=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);b.length>0&&b[0]!=="dev"&&(this.options.lng=b[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(b=>{this[b]=function(){return e.store[b](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(b=>{this[b]=function(){return e.store[b](...arguments),e}});const d=Cv(),g=()=>{const b=(E,S)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),d.resolve(S),r(E,S)};if(this.languages&&!this.isInitialized)return b(null,this.t.bind(this));this.changeLanguage(this.options.lng,b)};return this.options.resources||!this.options.initAsync?g():setTimeout(g,0),d}loadResources(e){var s,a;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Z_;const i=Ko(e)?e:this.language;if(typeof e=="function"&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if((i==null?void 0:i.toLowerCase())==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const o=[],d=g=>{if(!g||g==="cimode")return;this.services.languageUtils.toResolveHierarchy(g).forEach(E=>{E!=="cimode"&&o.indexOf(E)<0&&o.push(E)})};i?d(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(b=>d(b)),(a=(s=this.options.preload)==null?void 0:s.forEach)==null||a.call(s,g=>d(g)),this.services.backendConnector.load(o,this.options.ns,g=>{!g&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(g)})}else r(null)}reloadResources(e,t,r){const i=Cv();return typeof e=="function"&&(r=e,e=void 0),typeof t=="function"&&(r=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),r||(r=Z_),this.services.backendConnector.reload(e,t,s=>{i.resolve(),r(s)}),i}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&sL.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1))for(let t=0;t<this.languages.length;t++){const r=this.languages[t];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}}changeLanguage(e,t){var r=this;this.isLanguageChangingTo=e;const i=Cv();this.emit("languageChanging",e);const s=d=>{this.language=d,this.languages=this.services.languageUtils.toResolveHierarchy(d),this.resolvedLanguage=void 0,this.setResolvedLanguage(d)},a=(d,g)=>{g?(s(g),this.translator.changeLanguage(g),this.isLanguageChangingTo=void 0,this.emit("languageChanged",g),this.logger.log("languageChanged",g)):this.isLanguageChangingTo=void 0,i.resolve(function(){return r.t(...arguments)}),t&&t(d,function(){return r.t(...arguments)})},o=d=>{var b,E;!e&&!d&&this.services.languageDetector&&(d=[]);const g=Ko(d)?d:this.services.languageUtils.getBestMatchFromCodes(d);g&&(this.language||s(g),this.translator.language||this.translator.changeLanguage(g),(E=(b=this.services.languageDetector)==null?void 0:b.cacheUserLanguage)==null||E.call(b,g)),this.loadResources(g,S=>{a(S,g)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?o(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(o):this.services.languageDetector.detect(o):o(e),i}getFixedT(e,t,r){var i=this;const s=function(a,o){let d;if(typeof o!="object"){for(var g=arguments.length,b=new Array(g>2?g-2:0),E=2;E<g;E++)b[E-2]=arguments[E];d=i.options.overloadTranslationOptionHandler([a,o].concat(b))}else d={...o};d.lng=d.lng||s.lng,d.lngs=d.lngs||s.lngs,d.ns=d.ns||s.ns,d.keyPrefix!==""&&(d.keyPrefix=d.keyPrefix||r||s.keyPrefix);const S=i.options.keySeparator||".";let I;return d.keyPrefix&&Array.isArray(a)?I=a.map(P=>`${d.keyPrefix}${S}${P}`):I=d.keyPrefix?`${d.keyPrefix}${S}${a}`:a,i.t(I,d)};return Ko(e)?s.lng=e:s.lngs=e,s.ns=t,s.keyPrefix=r,s}t(){var i;for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return(i=this.translator)==null?void 0:i.translate(...t)}exists(){var i;for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return(i=this.translator)==null?void 0:i.exists(...t)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=t.lng||this.resolvedLanguage||this.languages[0],i=this.options?this.options.fallbackLng:!1,s=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const a=(o,d)=>{const g=this.services.backendConnector.state[`${o}|${d}`];return g===-1||g===0||g===2};if(t.precheck){const o=t.precheck(this,a);if(o!==void 0)return o}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||a(r,e)&&(!i||a(s,e)))}loadNamespaces(e,t){const r=Cv();return this.options.ns?(Ko(e)&&(e=[e]),e.forEach(i=>{this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}),this.loadResources(i=>{r.resolve(),t&&t(i)}),r):(t&&t(),Promise.resolve())}loadLanguages(e,t){const r=Cv();Ko(e)&&(e=[e]);const i=this.options.preload||[],s=e.filter(a=>i.indexOf(a)<0&&this.services.languageUtils.isSupportedCode(a));return s.length?(this.options.preload=i.concat(s),this.loadResources(a=>{r.resolve(),t&&t(a)}),r):(t&&t(),Promise.resolve())}dir(e){var i,s;if(e||(e=this.resolvedLanguage||(((i=this.languages)==null?void 0:i.length)>0?this.languages[0]:this.language)),!e)return"rtl";const t=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=((s=this.services)==null?void 0:s.languageUtils)||new LI(NI());return t.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return new pC(e,t)}cloneInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Z_;const r=e.forkResourceStore;r&&delete e.forkResourceStore;const i={...this.options,...e,isClone:!0},s=new pC(i);if((e.debug!==void 0||e.prefix!==void 0)&&(s.logger=s.logger.clone(e)),["store","services","language"].forEach(o=>{s[o]=this[o]}),s.services={...this.services},s.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},r){const o=Object.keys(this.store.data).reduce((d,g)=>(d[g]={...this.store.data[g]},Object.keys(d[g]).reduce((b,E)=>(b[E]={...d[g][E]},b),{})),{});s.store=new DI(o,i),s.services.resourceStore=s.store}return s.translator=new l2(s.services,i),s.translator.on("*",function(o){for(var d=arguments.length,g=new Array(d>1?d-1:0),b=1;b<d;b++)g[b-1]=arguments[b];s.emit(o,...g)}),s.init(i,t),s.translator.options=i,s.translator.backendConnector.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Nc=pC.createInstance();Nc.createInstance=pC.createInstance;Nc.createInstance;Nc.dir;Nc.init;Nc.loadResources;Nc.reloadResources;Nc.use;Nc.changeLanguage;Nc.getFixedT;Nc.t;Nc.exists;Nc.setDefaultNamespace;Nc.hasLoadedNamespace;Nc.loadNamespaces;Nc.loadLanguages;const{slice:aq,forEach:lq}=[];function uq(n){return lq.call(aq.call(arguments,1),e=>{if(e)for(const t in e)n[t]===void 0&&(n[t]=e[t])}),n}const GI=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,Aq=function(n,e){const r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},i=encodeURIComponent(e);let s=`${n}=${i}`;if(r.maxAge>0){const a=r.maxAge-0;if(Number.isNaN(a))throw new Error("maxAge should be a Number");s+=`; Max-Age=${Math.floor(a)}`}if(r.domain){if(!GI.test(r.domain))throw new TypeError("option domain is invalid");s+=`; Domain=${r.domain}`}if(r.path){if(!GI.test(r.path))throw new TypeError("option path is invalid");s+=`; Path=${r.path}`}if(r.expires){if(typeof r.expires.toUTCString!="function")throw new TypeError("option expires is invalid");s+=`; Expires=${r.expires.toUTCString()}`}if(r.httpOnly&&(s+="; HttpOnly"),r.secure&&(s+="; Secure"),r.sameSite)switch(typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite){case!0:s+="; SameSite=Strict";break;case"lax":s+="; SameSite=Lax";break;case"strict":s+="; SameSite=Strict";break;case"none":s+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return s},QI={create(n,e,t,r){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};t&&(i.expires=new Date,i.expires.setTime(i.expires.getTime()+t*60*1e3)),r&&(i.domain=r),document.cookie=Aq(n,encodeURIComponent(e),i)},read(n){const e=`${n}=`,t=document.cookie.split(";");for(let r=0;r<t.length;r++){let i=t[r];for(;i.charAt(0)===" ";)i=i.substring(1,i.length);if(i.indexOf(e)===0)return i.substring(e.length,i.length)}return null},remove(n){this.create(n,"",-1)}};var cq={name:"cookie",lookup(n){let{lookupCookie:e}=n;if(e&&typeof document<"u")return QI.read(e)||void 0},cacheUserLanguage(n,e){let{lookupCookie:t,cookieMinutes:r,cookieDomain:i,cookieOptions:s}=e;t&&typeof document<"u"&&QI.create(t,n,r,i,s)}},dq={name:"querystring",lookup(n){var r;let{lookupQuerystring:e}=n,t;if(typeof window<"u"){let{search:i}=window.location;!window.location.search&&((r=window.location.hash)==null?void 0:r.indexOf("?"))>-1&&(i=window.location.hash.substring(window.location.hash.indexOf("?")));const a=i.substring(1).split("&");for(let o=0;o<a.length;o++){const d=a[o].indexOf("=");d>0&&a[o].substring(0,d)===e&&(t=a[o].substring(d+1))}}return t}};let _v=null;const qI=()=>{if(_v!==null)return _v;try{_v=window!=="undefined"&&window.localStorage!==null;const n="i18next.translate.boo";window.localStorage.setItem(n,"foo"),window.localStorage.removeItem(n)}catch{_v=!1}return _v};var hq={name:"localStorage",lookup(n){let{lookupLocalStorage:e}=n;if(e&&qI())return window.localStorage.getItem(e)||void 0},cacheUserLanguage(n,e){let{lookupLocalStorage:t}=e;t&&qI()&&window.localStorage.setItem(t,n)}};let bv=null;const YI=()=>{if(bv!==null)return bv;try{bv=window!=="undefined"&&window.sessionStorage!==null;const n="i18next.translate.boo";window.sessionStorage.setItem(n,"foo"),window.sessionStorage.removeItem(n)}catch{bv=!1}return bv};var fq={name:"sessionStorage",lookup(n){let{lookupSessionStorage:e}=n;if(e&&YI())return window.sessionStorage.getItem(e)||void 0},cacheUserLanguage(n,e){let{lookupSessionStorage:t}=e;t&&YI()&&window.sessionStorage.setItem(t,n)}},pq={name:"navigator",lookup(n){const e=[];if(typeof navigator<"u"){const{languages:t,userLanguage:r,language:i}=navigator;if(t)for(let s=0;s<t.length;s++)e.push(t[s]);r&&e.push(r),i&&e.push(i)}return e.length>0?e:void 0}},mq={name:"htmlTag",lookup(n){let{htmlTag:e}=n,t;const r=e||(typeof document<"u"?document.documentElement:null);return r&&typeof r.getAttribute=="function"&&(t=r.getAttribute("lang")),t}},gq={name:"path",lookup(n){var i;let{lookupFromPathIndex:e}=n;if(typeof window>"u")return;const t=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(t)?(i=t[typeof e=="number"?e:0])==null?void 0:i.replace("/",""):void 0}},yq={name:"subdomain",lookup(n){var i,s;let{lookupFromSubdomainIndex:e}=n;const t=typeof e=="number"?e+1:1,r=typeof window<"u"&&((s=(i=window.location)==null?void 0:i.hostname)==null?void 0:s.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i));if(r)return r[t]}};let aL=!1;try{document.cookie,aL=!0}catch{}const lL=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];aL||lL.splice(1,1);const vq=()=>({order:lL,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:n=>n});class uL{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(e,t)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=e,this.options=uq(t,this.options||{},vq()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=i=>i.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=r,this.addDetector(cq),this.addDetector(dq),this.addDetector(hq),this.addDetector(fq),this.addDetector(pq),this.addDetector(mq),this.addDetector(gq),this.addDetector(yq)}addDetector(e){return this.detectors[e.name]=e,this}detect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,t=[];return e.forEach(r=>{if(this.detectors[r]){let i=this.detectors[r].lookup(this.options);i&&typeof i=="string"&&(i=[i]),i&&(t=t.concat(i))}}),t=t.map(r=>this.options.convertDetectedLanguage(r)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?t:t.length>0?t[0]:null}cacheUserLanguage(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;t&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||t.forEach(r=>{this.detectors[r]&&this.detectors[r].cacheUserLanguage(e,this.options)}))}}uL.type="languageDetector";var Cq=function(e){return{type:"backend",init:function(r,i,s){},read:function(r,i,s){if(typeof e=="function"){if(e.length<3){try{var a=e(r,i);a&&typeof a.then=="function"?a.then(function(o){return s(null,o&&o.default||o)}).catch(s):s(null,a)}catch(o){s(o)}return}e(r,i,s);return}s(null,e[r]&&e[r][i])}}},J3,$I;function _q(){return $I||($I=1,J3={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),J3}var bq=_q();const xq=el(bq);var wq=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function VI(n){var e={type:"tag",name:"",voidElement:!1,attrs:{},children:[]},t=n.match(/<\/?([^\s]+?)[/\s>]/);if(t&&(e.name=t[1],(xq[t[1]]||n.charAt(n.length-2)==="/")&&(e.voidElement=!0),e.name.startsWith("!--"))){var r=n.indexOf("-->");return{type:"comment",comment:r!==-1?n.slice(4,r):""}}for(var i=new RegExp(wq),s=null;(s=i.exec(n))!==null;)if(s[0].trim())if(s[1]){var a=s[1].trim(),o=[a,""];a.indexOf("=")>-1&&(o=a.split("=")),e.attrs[o[0]]=o[1],i.lastIndex--}else s[2]&&(e.attrs[s[2]]=s[3].trim().substring(1,s[3].length-1));return e}var Mq=/<[a-zA-Z0-9\-\!\/](?:"[^"]*"|'[^']*'|[^'">])*>/g,Sq=/^\s*$/,Eq=Object.create(null);function AL(n,e){switch(e.type){case"text":return n+e.content;case"tag":return n+="<"+e.name+(e.attrs?function(t){var r=[];for(var i in t)r.push(i+'="'+t[i]+'"');return r.length?" "+r.join(" "):""}(e.attrs):"")+(e.voidElement?"/>":">"),e.voidElement?n:n+e.children.reduce(AL,"")+"</"+e.name+">";case"comment":return n+"<!--"+e.comment+"-->"}}var Bq={parse:function(n,e){e||(e={}),e.components||(e.components=Eq);var t,r=[],i=[],s=-1,a=!1;if(n.indexOf("<")!==0){var o=n.indexOf("<");r.push({type:"text",content:o===-1?n:n.substring(0,o)})}return n.replace(Mq,function(d,g){if(a){if(d!=="</"+t.name+">")return;a=!1}var b,E=d.charAt(1)!=="/",S=d.startsWith("<!--"),I=g+d.length,P=n.charAt(I);if(S){var z=VI(d);return s<0?(r.push(z),r):((b=i[s]).children.push(z),r)}if(E&&(s++,(t=VI(d)).type==="tag"&&e.components[t.name]&&(t.type="component",a=!0),t.voidElement||a||!P||P==="<"||t.children.push({type:"text",content:n.slice(I,n.indexOf("<",I))}),s===0&&r.push(t),(b=i[s-1])&&b.children.push(t),i[s]=t),(!E||t.voidElement)&&(s>-1&&(t.voidElement||t.name===d.slice(2,-1))&&(s--,t=s===-1?r:i[s]),!a&&P!=="<"&&P)){b=s===-1?r:i[s].children;var j=n.indexOf("<",I),q=n.slice(I,j===-1?void 0:j);Sq.test(q)&&(q=" "),(j>-1&&s+b.length>=0||q!==" ")&&b.push({type:"text",content:q})}}),r},stringify:function(n){return n.reduce(function(e,t){return e+AL("",t)},"")}};const jb=(n,e,t,r)=>{var s,a,o,d;const i=[t,{code:e,...r||{}}];if((a=(s=n==null?void 0:n.services)==null?void 0:s.logger)!=null&&a.forward)return n.services.logger.forward(i,"warn","react-i18next::",!0);tf(i[0])&&(i[0]=`react-i18next:: ${i[0]}`),(d=(o=n==null?void 0:n.services)==null?void 0:o.logger)!=null&&d.warn?n.services.logger.warn(...i):console!=null&&console.warn&&console.warn(...i)},HI={},mC=(n,e,t,r)=>{tf(t)&&HI[t]||(tf(t)&&(HI[t]=new Date),jb(n,e,t,r))},cL=(n,e)=>()=>{if(n.isInitialized)e();else{const t=()=>{setTimeout(()=>{n.off("initialized",t)},0),e()};n.on("initialized",t)}},y6=(n,e,t)=>{n.loadNamespaces(e,cL(n,t))},ZI=(n,e,t,r)=>{if(tf(t)&&(t=[t]),n.options.preload&&n.options.preload.indexOf(e)>-1)return y6(n,t,r);t.forEach(i=>{n.options.ns.indexOf(i)<0&&n.options.ns.push(i)}),n.loadLanguages(e,cL(n,r))},Oq=(n,e,t={})=>!e.languages||!e.languages.length?(mC(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(n,{lng:t.lng,precheck:(r,i)=>{var s;if(((s=t.bindI18n)==null?void 0:s.indexOf("languageChanging"))>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!i(r.isLanguageChangingTo,n))return!1}}),Iq=n=>n.displayName||n.name||(tf(n)&&n.length>0?n:"Unknown"),tf=n=>typeof n=="string",xg=n=>typeof n=="object"&&n!==null,kq=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,Tq={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},Pq=n=>Tq[n],Kq=n=>n.replace(kq,Pq);let v6={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:Kq};const Dq=(n={})=>{v6={...v6,...n}},dL=()=>v6;let hL;const Rq=n=>{hL=n},zB=()=>hL,e4=(n,e)=>{var r;if(!n)return!1;const t=((r=n.props)==null?void 0:r.children)??n.children;return e?t.length>0:!!t},t4=n=>{var t,r;if(!n)return[];const e=((t=n.props)==null?void 0:t.children)??n.children;return(r=n.props)!=null&&r.i18nIsDynamicList?ry(e):e},Fq=n=>Array.isArray(n)&&n.every(li.isValidElement),ry=n=>Array.isArray(n)?n:[n],Lq=(n,e)=>{const t={...e};return t.props=Object.assign(n.props,e.props),t},fL=(n,e,t,r)=>{if(!n)return"";let i="";const s=ry(n),a=e!=null&&e.transSupportBasicHtmlNodes?e.transKeepBasicHtmlNodesFor??[]:[];return s.forEach((o,d)=>{if(tf(o)){i+=`${o}`;return}if(li.isValidElement(o)){const{props:g,type:b}=o,E=Object.keys(g).length,S=a.indexOf(b)>-1,I=g.children;if(!I&&S&&!E){i+=`<${b}/>`;return}if(!I&&(!S||E)||g.i18nIsDynamicList){i+=`<${d}></${d}>`;return}if(S&&E===1&&tf(I)){i+=`<${b}>${I}</${b}>`;return}const P=fL(I,e,t,r);i+=`<${d}>${P}</${d}>`;return}if(o===null){jb(t,"TRANS_NULL_VALUE","Passed in a null value as child",{i18nKey:r});return}if(xg(o)){const{format:g,...b}=o,E=Object.keys(b);if(E.length===1){const S=g?`${E[0]}, ${g}`:E[0];i+=`{{${S}}}`;return}jb(t,"TRANS_INVALID_OBJ","Invalid child - Object should only have keys {{ value, format }} (format is optional).",{i18nKey:r,child:o});return}jb(t,"TRANS_INVALID_VAR","Passed in a variable like {number} - pass variables for interpolation as full objects like {{number}}.",{i18nKey:r,child:o})}),i},Uq=(n,e,t,r,i,s)=>{if(e==="")return[];const a=r.transKeepBasicHtmlNodesFor||[],o=e&&new RegExp(a.map(j=>`<${j}`).join("|")).test(e);if(!n&&!o&&!s)return[e];const d={},g=j=>{ry(j).forEach(Y=>{tf(Y)||(e4(Y)?g(t4(Y)):xg(Y)&&!li.isValidElement(Y)&&Object.assign(d,Y))})};g(n);const b=Bq.parse(`<0>${e}</0>`),E={...d,...i},S=(j,q,Y)=>{var V;const ie=t4(j),te=P(ie,q.children,Y);return Fq(ie)&&te.length===0||(V=j.props)!=null&&V.i18nIsDynamicList?ie:te},I=(j,q,Y,ie,te)=>{j.dummy?(j.children=q,Y.push(li.cloneElement(j,{key:ie},te?void 0:q))):Y.push(...li.Children.map([j],V=>{const ne={...V.props};return delete ne.i18nIsDynamicList,li.createElement(V.type,{...ne,key:ie,ref:V.ref},te?null:q)}))},P=(j,q,Y)=>{const ie=ry(j);return ry(q).reduce((V,ne,G)=>{var he,pe;const oe=((pe=(he=ne.children)==null?void 0:he[0])==null?void 0:pe.content)&&t.services.interpolator.interpolate(ne.children[0].content,E,t.language);if(ne.type==="tag"){let Ee=ie[parseInt(ne.name,10)];Y.length===1&&!Ee&&(Ee=Y[0][ne.name]),Ee||(Ee={});const me=Object.keys(ne.attrs).length!==0?Lq({props:ne.attrs},Ee):Ee,Se=li.isValidElement(me),De=Se&&e4(ne,!0)&&!ne.voidElement,be=o&&xg(me)&&me.dummy&&!Se,at=xg(n)&&Object.hasOwnProperty.call(n,ne.name);if(tf(me)){const Ze=t.services.interpolator.interpolate(me,E,t.language);V.push(Ze)}else if(e4(me)||De){const Ze=S(me,ne,Y);I(me,Ze,V,G)}else if(be){const Ze=P(ie,ne.children,Y);I(me,Ze,V,G)}else if(Number.isNaN(parseFloat(ne.name)))if(at){const Ze=S(me,ne,Y);I(me,Ze,V,G,ne.voidElement)}else if(r.transSupportBasicHtmlNodes&&a.indexOf(ne.name)>-1)if(ne.voidElement)V.push(li.createElement(ne.name,{key:`${ne.name}-${G}`}));else{const Ze=P(ie,ne.children,Y);V.push(li.createElement(ne.name,{key:`${ne.name}-${G}`},Ze))}else if(ne.voidElement)V.push(`<${ne.name} />`);else{const Ze=P(ie,ne.children,Y);V.push(`<${ne.name}>${Ze}</${ne.name}>`)}else if(xg(me)&&!Se){const Ze=ne.children[0]?oe:null;Ze&&V.push(Ze)}else I(me,oe,V,G,ne.children.length!==1||!oe)}else if(ne.type==="text"){const Ee=r.transWrapTextNodes,me=s?r.unescape(t.services.interpolator.interpolate(ne.content,E,t.language)):t.services.interpolator.interpolate(ne.content,E,t.language);Ee?V.push(li.createElement(Ee,{key:`${ne.name}-${G}`},me)):V.push(me)}return V},[])},z=P([{dummy:!0,children:n||[]}],b,ry(n||[]));return t4(z[0])},pL=(n,e,t)=>{const r=n.key||e,i=li.cloneElement(n,{key:r});if(!i.props||!i.props.children||t.indexOf(`${e}/>`)<0&&t.indexOf(`${e} />`)<0)return i;function s(){return li.createElement(li.Fragment,null,i)}return li.createElement(s)},zq=(n,e)=>n.map((t,r)=>pL(t,r,e)),jq=(n,e)=>{const t={};return Object.keys(n).forEach(r=>{Object.assign(t,{[r]:pL(n[r],r,e)})}),t},Nq=(n,e,t,r)=>n?Array.isArray(n)?zq(n,e):xg(n)?jq(n,e):(mC(t,"TRANS_INVALID_COMPONENTS",'<Trans /> "components" prop expects an object or array',{i18nKey:r}),null):null;function Wq({children:n,count:e,parent:t,i18nKey:r,context:i,tOptions:s={},values:a,defaults:o,components:d,ns:g,i18n:b,t:E,shouldUnescape:S,...I}){var me,Se,De,be,at,Ze;const P=b||zB();if(!P)return mC(P,"NO_I18NEXT_INSTANCE","Trans: You need to pass in an i18next instance using i18nextReactModule",{i18nKey:r}),n;const z=E||P.t.bind(P)||(Je=>Je),j={...dL(),...(me=P.options)==null?void 0:me.react};let q=g||z.ns||((Se=P.options)==null?void 0:Se.defaultNS);q=tf(q)?[q]:q||["translation"];const Y=fL(n,j,P,r),ie=o||Y||j.transEmptyNodeValue||r,{hashTransKey:te}=j,V=r||(te?te(Y||ie):Y||ie);(be=(De=P.options)==null?void 0:De.interpolation)!=null&&be.defaultVariables&&(a=a&&Object.keys(a).length>0?{...a,...P.options.interpolation.defaultVariables}:{...P.options.interpolation.defaultVariables});const ne=a||e!==void 0&&!((Ze=(at=P.options)==null?void 0:at.interpolation)!=null&&Ze.alwaysFormat)||!n?s.interpolation:{interpolation:{...s.interpolation,prefix:"#$?",suffix:"?$#"}},G={...s,context:i||s.context,count:e,...a,...ne,defaultValue:ie,ns:q},oe=V?z(V,G):ie,he=Nq(d,oe,P,r),pe=Uq(he||n,oe,P,j,G,S),Ee=t??j.defaultTransParent;return Ee?li.createElement(Ee,I,pe):pe}const Gq={type:"3rdParty",init(n){Dq(n.options.react),Rq(n)}},mL=li.createContext();class Qq{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(t=>{this.usedNamespaces[t]||(this.usedNamespaces[t]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}function T0({children:n,count:e,parent:t,i18nKey:r,context:i,tOptions:s={},values:a,defaults:o,components:d,ns:g,i18n:b,t:E,shouldUnescape:S,...I}){var Y;const{i18n:P,defaultNS:z}=li.useContext(mL)||{},j=b||P||zB(),q=E||(j==null?void 0:j.t.bind(j));return Wq({children:n,count:e,parent:t,i18nKey:r,context:i,tOptions:s,values:a,defaults:o,components:d,ns:g||(q==null?void 0:q.ns)||z||((Y=j==null?void 0:j.options)==null?void 0:Y.defaultNS),i18n:j,t:E,shouldUnescape:S,...I})}const qq=(n,e)=>{const t=li.useRef();return li.useEffect(()=>{t.current=n},[n,e]),t.current},gL=(n,e,t,r)=>n.getFixedT(e,t,r),Yq=(n,e,t,r)=>li.useCallback(gL(n,e,t,r),[n,e,t,r]),$q=(n,e={})=>{var te,V,ne,G;const{i18n:t}=e,{i18n:r,defaultNS:i}=li.useContext(mL)||{},s=t||r||zB();if(s&&!s.reportNamespaces&&(s.reportNamespaces=new Qq),!s){mC(s,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const oe=(pe,Ee)=>tf(Ee)?Ee:xg(Ee)&&tf(Ee.defaultValue)?Ee.defaultValue:Array.isArray(pe)?pe[pe.length-1]:pe,he=[oe,{},!1];return he.t=oe,he.i18n={},he.ready=!1,he}(te=s.options.react)!=null&&te.wait&&mC(s,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const a={...dL(),...s.options.react,...e},{useSuspense:o,keyPrefix:d}=a;let g=i||((V=s.options)==null?void 0:V.defaultNS);g=tf(g)?[g]:g||["translation"],(G=(ne=s.reportNamespaces).addUsedNamespaces)==null||G.call(ne,g);const b=(s.isInitialized||s.initializedStoreOnce)&&g.every(oe=>Oq(oe,s,a)),E=Yq(s,e.lng||null,a.nsMode==="fallback"?g:g[0],d),S=()=>E,I=()=>gL(s,e.lng||null,a.nsMode==="fallback"?g:g[0],d),[P,z]=li.useState(S);let j=g.join();e.lng&&(j=`${e.lng}${j}`);const q=qq(j),Y=li.useRef(!0);li.useEffect(()=>{const{bindI18n:oe,bindI18nStore:he}=a;Y.current=!0,!b&&!o&&(e.lng?ZI(s,e.lng,g,()=>{Y.current&&z(I)}):y6(s,g,()=>{Y.current&&z(I)})),b&&q&&q!==j&&Y.current&&z(I);const pe=()=>{Y.current&&z(I)};return oe&&(s==null||s.on(oe,pe)),he&&(s==null||s.store.on(he,pe)),()=>{Y.current=!1,s&&(oe==null||oe.split(" ").forEach(Ee=>s.off(Ee,pe))),he&&s&&he.split(" ").forEach(Ee=>s.store.off(Ee,pe))}},[s,j]),li.useEffect(()=>{Y.current&&b&&z(S)},[s,d,b]);const ie=[P,s,b];if(ie.t=P,ie.i18n=s,ie.ready=b,b||!b&&!o)return ie;throw new Promise(oe=>{e.lng?ZI(s,e.lng,g,()=>oe()):y6(s,g,()=>oe())})},Ns=(n,e={})=>function(r){function i({forwardedRef:a,...o}){const[d,g,b]=$q(n,{...o,keyPrefix:e.keyPrefix}),E={...o,t:d,i18n:g,tReady:b};return e.withRef&&a?E.ref=a:!e.withRef&&a&&(E.forwardedRef=a),li.createElement(r,E)}i.displayName=`withI18nextTranslation(${Iq(r)})`,i.WrappedComponent=r;const s=(a,o)=>li.createElement(i,Object.assign({},a,{forwardedRef:o}));return e.withRef?li.forwardRef(s):i};function Za(){var n="/home/runner/work/maputnik/maputnik/src/i18n.ts",e="f69d9d8f41edfbc571efe934ba014df41eed434c",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/i18n.ts",statementMap:{0:{start:{line:5,column:34},end:{line:13,column:1}},1:{start:{line:14,column:0},end:{line:40,column:3}},2:{start:{line:16,column:4},end:{line:18,column:5}},3:{start:{line:17,column:6},end:{line:17,column:16}},4:{start:{line:19,column:4},end:{line:19,column:593}},5:{start:{line:19,column:119},end:{line:19,column:158}},6:{start:{line:19,column:198},end:{line:19,column:237}},7:{start:{line:19,column:277},end:{line:19,column:316}},8:{start:{line:19,column:356},end:{line:19,column:395}},9:{start:{line:19,column:435},end:{line:19,column:474}},10:{start:{line:19,column:514},end:{line:19,column:553}},11:{start:{line:35,column:4},end:{line:37,column:5}},12:{start:{line:36,column:6},end:{line:36,column:13}},13:{start:{line:38,column:4},end:{line:38,column:77}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:15,column:21},end:{line:15,column:22}},loc:{start:{line:15,column:35},end:{line:20,column:3}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:19,column:113},end:{line:19,column:114}},loc:{start:{line:19,column:119},end:{line:19,column:158}},line:19},2:{name:"(anonymous_2)",decl:{start:{line:19,column:192},end:{line:19,column:193}},loc:{start:{line:19,column:198},end:{line:19,column:237}},line:19},3:{name:"(anonymous_3)",decl:{start:{line:19,column:271},end:{line:19,column:272}},loc:{start:{line:19,column:277},end:{line:19,column:316}},line:19},4:{name:"(anonymous_4)",decl:{start:{line:19,column:350},end:{line:19,column:351}},loc:{start:{line:19,column:356},end:{line:19,column:395}},line:19},5:{name:"(anonymous_5)",decl:{start:{line:19,column:429},end:{line:19,column:430}},loc:{start:{line:19,column:435},end:{line:19,column:474}},line:19},6:{name:"(anonymous_6)",decl:{start:{line:19,column:508},end:{line:19,column:509}},loc:{start:{line:19,column:514},end:{line:19,column:553}},line:19},7:{name:"(anonymous_7)",decl:{start:{line:34,column:21},end:{line:34,column:22}},loc:{start:{line:34,column:41},end:{line:39,column:3}},line:34}},branchMap:{0:{loc:{start:{line:16,column:4},end:{line:18,column:5}},type:"if",locations:[{start:{line:16,column:4},end:{line:18,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:16},1:{loc:{start:{line:35,column:4},end:{line:37,column:5}},type:"if",locations:[{start:{line:35,column:4},end:{line:37,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:35}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/i18n.ts"],names:[],mappings:"AAAA,MAAA,CAAA,oCAAA,CAAA,IAAA,CAAA,CAAA,CAAA,IAAA,CAAA,OAAA,CAAA,MAAA,CAAA,MAAA,CAAA,EAAA,CAAA,CAAA,MAAA,CAAO,IAAU,CAAA,IAAA,CAAA,CAAA,OAAA,CAAA;AACjB,MAAA,CAAO,QAAc,CAAA,IAAA,CAAA,CAAA,OAAA,CAAA,OAAA,CAAA,gBAAA,CAAA;AACrB,MAAA,CAAO,kBAAwB,CAAA,IAAA,CAAA,CAAA,OAAA,CAAA,SAAA,CAAA,EAAA,CAAA,OAAA,CAAA;AAC/B,MAAA,CAAA,CAAA,CAAS,gBAAwB,CAAA,CAAA,CAAA,IAAA,CAAA,CAAA,KAAA,CAAA,OAAA,CAAA;AAE1B,MAAA,CAAA,KAAA,CAAM,kBAAqB,CAAA,CAAA,CAAA;AAAA,CAAA,CAChC,CAAM,EAAA,CAAA,CAAA,CAAA,CAAA,OAAA,CAAA;AAAA,CAAA,CACN,CAAM,EAAA,CAAA,CAAA,CAAA,CAAA,OAAA,CAAA;AAAA,CAAA,CACN,CAAM,EAAA,CAAA,CAAA,CAAA,CAAA,IAAA,CAAA,GAAA,CAAA;AAAA,CAAA,CACN,CAAM,EAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;AAAA,CAAA,CACN,CAAM,EAAA,CAAA,CAAA,CAAA,CAAA,QAAA,CAAA;AAAA,CAAA,CACN,CAAM,EAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;AAAA,CAAA,CACN,CAAM,EAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;AACR,CAAA;AAEA,IACG,CAAA,GAAA,CAAI,QAAQ,CACZ,CAAA,GAAA;AAAA,CACC,CAAA,kBAAA,CAAmB,CAAC,IAAA,CAAA,CAAc,EAAe,CAAA,CAAA,CAAA,CAAA,CAAA;AAC/C,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,CAAI,SAAS,CAAM,EAAA,CAAA,CAAA,CAAA;AAEjB,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,MAAA,CAAO,CAAC,CAAA;AAAA,CACV,CAAA,CAAA,CAAA;AACA,CAAA,CAAA,CAAA,CAAA,MAAA,CAAO,oCAA8B,CAAA,CAAA,0fAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,OAAA,CAAA,CAAA,CAAA,IAAA,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,CAAA,IAAA,CAAA,CAAA,CAAA,CAAA,CAAA;AAAA,CAAA,CACvC,CAAC;AACH,CACC,CAAA,GAAA,CAAI,gBAAgB,CAAA,CACpB,IAAK,CAAA;AAAA,CACJ,CAAA,aAAA,CAAA,CAAe,MAAO,CAAA,IAAA,CAAK,kBAAkB,CAAA;AAAA,CAAA,CAC7C,YAAc,CAAA,CAAA,KAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,EAAA,CAAA,GAAA,CAAA,GAAA,CAAA,IAAA,CAAA,EAAA,CAAA,IAAA,CAAA,QAAA,CAAA;AAAA,CAAA,CACd,WAAa,CAAA,CAAA,KAAA;AAAA,CAAA,CACb,aAAe,CAAA,CAAA;AAAA,CAAA,CAAA,CAAA,CACb,WAAa,CAAA,CAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,KAAA,CAAA,OAAA,CAAA,OAAA,CAAA,GAAA,CAAA;AAAA,CACf,CAAA,CAAA;AAAA,CAAA,CACA,WAAa,CAAA,CAAA,IAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,IAAA,CAAA,KAAA,CAAA,EAAA,CAAA,EAAA,CAAA,GAAA,CAAA,GAAA,CAAA,iBAAA,CAAA,EAAA,CAAA;AAAA,CAAA,CACb,WAAa,CAAA,CAAA,KAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,GAAA,CAAA,GAAA,CAAA,QAAA,CAAA,EAAA,CAAA,KAAA,CAAA,EAAA,CAAA,EAAA,CAAA,GAAA,CAAA,GAAA,CAAA,GAAA,CAAA,OAAA,CAAA,QAAA,CAAA,EAAA,CAAA,GAAA,CAAA;AAAA,CAAA,CACb,iBAAmB,CAAA,CAAA,CAAC,IAAM,CAAA,CAAA,GAAA,CAAA,CAAK,GAAQ,CAAA,CAAA,CAAA,CAAA,CAAA;AACrC,CAAI,CAAA,CAAA,CAAA,EAAA,CAAA,CAAA,IAAA,CAAK,CAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAM,CAAM,EAAA,CAAA,CAAA,CAAA;AAAE,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,MAAA;AAAA,CAAQ,CAAA,CAAA,CAAA;AAChC,CAAQ,CAAA,CAAA,CAAA,OAAA,CAAA,IAAA,CAAK,4BAA4B,GAAG,CAAA,CAAA,CAAA,EAAA,CAAA,CAAA,CAAA,CAAS,KAAK,IAAK,CAAA,CAAA,CAAA,CAAA,CAAI,CAAC,CAAG,CAAA,CAAA,CAAA;AAAA,CACzE,CAAA;AACF,CAAC,CAAA;AAEH,MAAe,CAAA,OAAA,CAAA,IAAA;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f69d9d8f41edfbc571efe934ba014df41eed434c"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Za=function(){return a},a}Za();const yL=(Za().s[0]++,{de:"Deutsch",en:"English",fr:"Franais",he:"",it:"Italiano",ja:"",zh:""});Za().s[1]++;Nc.use(uL).use(Cq((n,e)=>(Za().f[0]++,Za().s[2]++,n==="en"?(Za().b[0][0]++,Za().s[3]++,{}):(Za().b[0][1]++,Za().s[4]++,NQ(Object.assign({"./locales/de/translation.json":()=>(Za().f[1]++,Za().s[5]++,m1(()=>import("./translation-BA-hEPLm.js"),[])),"./locales/fr/translation.json":()=>(Za().f[2]++,Za().s[6]++,m1(()=>import("./translation-J1EAmmGD.js"),[])),"./locales/he/translation.json":()=>(Za().f[3]++,Za().s[7]++,m1(()=>import("./translation-B80Cngny.js"),[])),"./locales/it/translation.json":()=>(Za().f[4]++,Za().s[8]++,m1(()=>import("./translation-Ckdsp6Ku.js"),[])),"./locales/ja/translation.json":()=>(Za().f[5]++,Za().s[9]++,m1(()=>import("./translation-C8OpQe1w.js"),[])),"./locales/zh/translation.json":()=>(Za().f[6]++,Za().s[10]++,m1(()=>import("./translation-zqWUd59b.js"),[]))}),`./locales/${n}/${e}.json`,4))))).use(Gq).init({supportedLngs:Object.keys(yL),keySeparator:!1,nsSeparator:!1,interpolation:{escapeValue:!1},saveMissing:!0,fallbackLng:!1,missingKeyHandler:(n,e,t)=>{if(Za().f[7]++,Za().s[11]++,n[0]==="en"){Za().b[1][0]++,Za().s[12]++;return}else Za().b[1][1]++;Za().s[13]++,console.warn(`Missing translation for "${t}" in "${n.join(", ")}"`)}});var X_={exports:{}},XI;function Vq(){return XI||(XI=1,function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var t=["constructor","render","componentWillMount","componentDidMount","componentWillReceiveProps","shouldComponentUpdate","componentWillUpdate","componentDidUpdate","componentWillUnmount"],r=[];function i(a){if(a===void 0){console.error("Autobind error: No context provided.");return}var o=Object.getPrototypeOf(a);arguments.length>1?r=Array.prototype.slice.call(arguments,1):r=Object.getOwnPropertyNames(o),r.forEach(function(d){var g=Object.getOwnPropertyDescriptor(o,d);if(g===void 0){console.warn('Autobind: "'+d+'" method not found in class.');return}t.indexOf(d)!==-1||typeof g.value!="function"||Object.defineProperty(o,d,s(o,d,g))})}function s(a,o,d){var g=d.value;return{configurable:!0,get:function(){if(this===a||this.hasOwnProperty(o))return g;var E=g.bind(this);return Object.defineProperty(this,o,{value:E,configurable:!0,writable:!0}),E}}}n.exports=e.default}(X_,X_.exports)),X_.exports}var n4,JI;function Hq(){return JI||(JI=1,n4=Vq()),n4}var Zq=Hq();const Xq=el(Zq);var Dv={exports:{}};Dv.exports;var e7;function Jq(){return e7||(e7=1,function(n,e){var t=200,r="__lodash_hash_undefined__",i=9007199254740991,s="[object Arguments]",a="[object Array]",o="[object Boolean]",d="[object Date]",g="[object Error]",b="[object Function]",E="[object GeneratorFunction]",S="[object Map]",I="[object Number]",P="[object Object]",z="[object Promise]",j="[object RegExp]",q="[object Set]",Y="[object String]",ie="[object Symbol]",te="[object WeakMap]",V="[object ArrayBuffer]",ne="[object DataView]",G="[object Float32Array]",oe="[object Float64Array]",he="[object Int8Array]",pe="[object Int16Array]",Ee="[object Int32Array]",me="[object Uint8Array]",Se="[object Uint8ClampedArray]",De="[object Uint16Array]",be="[object Uint32Array]",at=/[\\^$.*+?()[\]{}|]/g,Ze=/\w*$/,Je=/^\[object .+?Constructor\]$/,We=/^(?:0|[1-9]\d*)$/,Me={};Me[s]=Me[a]=Me[V]=Me[ne]=Me[o]=Me[d]=Me[G]=Me[oe]=Me[he]=Me[pe]=Me[Ee]=Me[S]=Me[I]=Me[P]=Me[j]=Me[q]=Me[Y]=Me[ie]=Me[me]=Me[Se]=Me[De]=Me[be]=!0,Me[g]=Me[b]=Me[te]=!1;var Fe=typeof window=="object"&&window&&window.Object===Object&&window,He=typeof self=="object"&&self&&self.Object===Object&&self,bt=Fe||He||Function("return this")(),Yt=e&&!e.nodeType&&e,gt=Yt&&!0&&n&&!n.nodeType&&n,Lt=gt&&gt.exports===Yt;function Kt(J,Ie){return J.set(Ie[0],Ie[1]),J}function Ue(J,Ie){return J.add(Ie),J}function Pe(J,Ie){for(var st=-1,$t=J?J.length:0;++st<$t&&Ie(J[st],st,J)!==!1;);return J}function Be(J,Ie){for(var st=-1,$t=Ie.length,Kr=J.length;++st<$t;)J[Kr+st]=Ie[st];return J}function it(J,Ie,st,$t){for(var Kr=-1,$n=J?J.length:0;++Kr<$n;)st=Ie(st,J[Kr],Kr,J);return st}function _t(J,Ie){for(var st=-1,$t=Array(J);++st<J;)$t[st]=Ie(st);return $t}function ft(J,Ie){return J==null?void 0:J[Ie]}function Ut(J){var Ie=!1;if(J!=null&&typeof J.toString!="function")try{Ie=!!(J+"")}catch{}return Ie}function rn(J){var Ie=-1,st=Array(J.size);return J.forEach(function($t,Kr){st[++Ie]=[Kr,$t]}),st}function Dt(J,Ie){return function(st){return J(Ie(st))}}function _n(J){var Ie=-1,st=Array(J.size);return J.forEach(function($t){st[++Ie]=$t}),st}var qn=Array.prototype,tn=Function.prototype,rr=Object.prototype,Dn=bt["__core-js_shared__"],pn=function(){var J=/[^.]+$/.exec(Dn&&Dn.keys&&Dn.keys.IE_PROTO||"");return J?"Symbol(src)_1."+J:""}(),Zn=tn.toString,dr=rr.hasOwnProperty,vr=rr.toString,Jn=RegExp("^"+Zn.call(dr).replace(at,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Qe=Lt?bt.Buffer:void 0,ce=bt.Symbol,fe=bt.Uint8Array,nt=Dt(Object.getPrototypeOf,Object),St=Object.create,Ht=rr.propertyIsEnumerable,sn=qn.splice,tr=Object.getOwnPropertySymbols,Oe=Qe?Qe.isBuffer:void 0,se=Dt(Object.keys,Object),ve=Rr(bt,"DataView"),p=Rr(bt,"Map"),Ne=Rr(bt,"Promise"),Ye=Rr(bt,"Set"),rt=Rr(bt,"WeakMap"),ct=Rr(Object,"create"),dt=Bo(ve),qt=Bo(p),Gt=Bo(Ne),jt=Bo(Ye),xt=Bo(rt),Tn=ce?ce.prototype:void 0,On=Tn?Tn.valueOf:void 0;function gr(J){var Ie=-1,st=J?J.length:0;for(this.clear();++Ie<st;){var $t=J[Ie];this.set($t[0],$t[1])}}function Er(){this.__data__=ct?ct(null):{}}function on(J){return this.has(J)&&delete this.__data__[J]}function Rn(J){var Ie=this.__data__;if(ct){var st=Ie[J];return st===r?void 0:st}return dr.call(Ie,J)?Ie[J]:void 0}function er(J){var Ie=this.__data__;return ct?Ie[J]!==void 0:dr.call(Ie,J)}function Xr(J,Ie){var st=this.__data__;return st[J]=ct&&Ie===void 0?r:Ie,this}gr.prototype.clear=Er,gr.prototype.delete=on,gr.prototype.get=Rn,gr.prototype.has=er,gr.prototype.set=Xr;function Ur(J){var Ie=-1,st=J?J.length:0;for(this.clear();++Ie<st;){var $t=J[Ie];this.set($t[0],$t[1])}}function Dr(){this.__data__=[]}function ur(J){var Ie=this.__data__,st=tl(Ie,J);if(st<0)return!1;var $t=Ie.length-1;return st==$t?Ie.pop():sn.call(Ie,st,1),!0}function mo(J){var Ie=this.__data__,st=tl(Ie,J);return st<0?void 0:Ie[st][1]}function Ma(J){return tl(this.__data__,J)>-1}function qi(J,Ie){var st=this.__data__,$t=tl(st,J);return $t<0?st.push([J,Ie]):st[$t][1]=Ie,this}Ur.prototype.clear=Dr,Ur.prototype.delete=ur,Ur.prototype.get=mo,Ur.prototype.has=Ma,Ur.prototype.set=qi;function vi(J){var Ie=-1,st=J?J.length:0;for(this.clear();++Ie<st;){var $t=J[Ie];this.set($t[0],$t[1])}}function io(){this.__data__={hash:new gr,map:new(p||Ur),string:new gr}}function Do(J){return Ea(this,J).delete(J)}function Ti(J){return Ea(this,J).get(J)}function ja(J){return Ea(this,J).has(J)}function Sa(J,Ie){return Ea(this,J).set(J,Ie),this}vi.prototype.clear=io,vi.prototype.delete=Do,vi.prototype.get=Ti,vi.prototype.has=ja,vi.prototype.set=Sa;function ns(J){this.__data__=new Ur(J)}function sa(){this.__data__=new Ur}function Al(J){return this.__data__.delete(J)}function uo(J){return this.__data__.get(J)}function Fu(J){return this.__data__.has(J)}function Hl(J,Ie){var st=this.__data__;if(st instanceof Ur){var $t=st.__data__;if(!p||$t.length<t-1)return $t.push([J,Ie]),this;st=this.__data__=new vi($t)}return st.set(J,Ie),this}ns.prototype.clear=sa,ns.prototype.delete=Al,ns.prototype.get=uo,ns.prototype.has=Fu,ns.prototype.set=Hl;function oo(J,Ie){var st=Oa(J)||Ms(J)?_t(J.length,String):[],$t=st.length,Kr=!!$t;for(var $n in J)dr.call(J,$n)&&!(Kr&&($n=="length"||Gs($n,$t)))&&st.push($n);return st}function Tr(J,Ie,st){var $t=J[Ie];(!(dr.call(J,Ie)&&Ba($t,st))||st===void 0&&!(Ie in J))&&(J[Ie]=st)}function tl(J,Ie){for(var st=J.length;st--;)if(Ba(J[st][0],Ie))return st;return-1}function Bs(J,Ie){return J&&ui(Ie,$i(Ie),J)}function Js(J,Ie,st,$t,Kr,$n,ti){var Ai;if($t&&(Ai=$n?$t(J,Kr,$n,ti):$t(J)),Ai!==void 0)return Ai;if(!Yr(J))return J;var Br=Oa(J);if(Br){if(Ai=gu(J),!Ie)return nl(J,Ai)}else{var xr=yo(J),zi=xr==b||xr==E;if(co(J))return or(J,Ie);if(xr==P||xr==s||zi&&!$n){if(Ut(J))return $n?J:{};if(Ai=wo(zi?{}:J),!Ie)return aa(J,Bs(Ai,J))}else{if(!Me[xr])return $n?J:{};Ai=Ws(J,xr,Js,Ie)}}ti||(ti=new ns);var Zi=ti.get(J);if(Zi)return Zi;if(ti.set(J,Ai),!Br)var Si=st?XA(J):$i(J);return Pe(Si||J,function(Wr,Mo){Si&&(Mo=Wr,Wr=J[Mo]),Tr(Ai,Mo,Js(Wr,Ie,st,$t,Mo,J,ti))}),Ai}function qe(J){return Yr(J)?St(J):{}}function wt(J,Ie,st){var $t=Ie(J);return Oa(J)?$t:Be($t,st(J))}function vn(J){return vr.call(J)}function Yn(J){if(!Yr(J)||_l(J))return!1;var Ie=Zl(J)||Ut(J)?Jn:Je;return Ie.test(Bo(J))}function hn(J){if(!Ao(J))return se(J);var Ie=[];for(var st in Object(J))dr.call(J,st)&&st!="constructor"&&Ie.push(st);return Ie}function or(J,Ie){if(Ie)return J.slice();var st=new J.constructor(J.length);return J.copy(st),st}function Pi(J){var Ie=new J.constructor(J.byteLength);return new fe(Ie).set(new fe(J)),Ie}function go(J,Ie){var st=Ie?Pi(J.buffer):J.buffer;return new J.constructor(st,J.byteOffset,J.byteLength)}function Cs(J,Ie,st){var $t=Ie?st(rn(J),!0):rn(J);return it($t,Kt,new J.constructor)}function Rs(J){var Ie=new J.constructor(J.source,Ze.exec(J));return Ie.lastIndex=J.lastIndex,Ie}function SA(J,Ie,st){var $t=Ie?st(_n(J),!0):_n(J);return it($t,Ue,new J.constructor)}function ei(J){return On?Object(On.call(J)):{}}function wi(J,Ie){var st=Ie?Pi(J.buffer):J.buffer;return new J.constructor(st,J.byteOffset,J.length)}function nl(J,Ie){var st=-1,$t=J.length;for(Ie||(Ie=Array($t));++st<$t;)Ie[st]=J[st];return Ie}function ui(J,Ie,st,$t){st||(st={});for(var Kr=-1,$n=Ie.length;++Kr<$n;){var ti=Ie[Kr],Ai=void 0;Tr(st,ti,Ai===void 0?J[ti]:Ai)}return st}function aa(J,Ie){return ui(J,Yi(J),Ie)}function XA(J){return wt(J,$i,Yi)}function Ea(J,Ie){var st=J.__data__;return Lu(Ie)?st[typeof Ie=="string"?"string":"hash"]:st.map}function Rr(J,Ie){var st=ft(J,Ie);return Yn(st)?st:void 0}var Yi=tr?Dt(tr,Object):so,yo=vn;(ve&&yo(new ve(new ArrayBuffer(1)))!=ne||p&&yo(new p)!=S||Ne&&yo(Ne.resolve())!=z||Ye&&yo(new Ye)!=q||rt&&yo(new rt)!=te)&&(yo=function(J){var Ie=vr.call(J),st=Ie==P?J.constructor:void 0,$t=st?Bo(st):void 0;if($t)switch($t){case dt:return ne;case qt:return S;case Gt:return z;case jt:return q;case xt:return te}return Ie});function gu(J){var Ie=J.length,st=J.constructor(Ie);return Ie&&typeof J[0]=="string"&&dr.call(J,"index")&&(st.index=J.index,st.input=J.input),st}function wo(J){return typeof J.constructor=="function"&&!Ao(J)?qe(nt(J)):{}}function Ws(J,Ie,st,$t){var Kr=J.constructor;switch(Ie){case V:return Pi(J);case o:case d:return new Kr(+J);case ne:return go(J,$t);case G:case oe:case he:case pe:case Ee:case me:case Se:case De:case be:return wi(J,$t);case S:return Cs(J,$t,st);case I:case Y:return new Kr(J);case j:return Rs(J);case q:return SA(J,$t,st);case ie:return ei(J)}}function Gs(J,Ie){return Ie=Ie??i,!!Ie&&(typeof J=="number"||We.test(J))&&J>-1&&J%1==0&&J<Ie}function Lu(J){var Ie=typeof J;return Ie=="string"||Ie=="number"||Ie=="symbol"||Ie=="boolean"?J!=="__proto__":J===null}function _l(J){return!!pn&&pn in J}function Ao(J){var Ie=J&&J.constructor,st=typeof Ie=="function"&&Ie.prototype||rr;return J===st}function Bo(J){if(J!=null){try{return Zn.call(J)}catch{}try{return J+""}catch{}}return""}function Ho(J){return Js(J,!0,!0)}function Ba(J,Ie){return J===Ie||J!==J&&Ie!==Ie}function Ms(J){return EA(J)&&dr.call(J,"callee")&&(!Ht.call(J,"callee")||vr.call(J)==s)}var Oa=Array.isArray;function ea(J){return J!=null&&Ui(J.length)&&!Zl(J)}function EA(J){return Xl(J)&&ea(J)}var co=Oe||Ki;function Zl(J){var Ie=Yr(J)?vr.call(J):"";return Ie==b||Ie==E}function Ui(J){return typeof J=="number"&&J>-1&&J%1==0&&J<=i}function Yr(J){var Ie=typeof J;return!!J&&(Ie=="object"||Ie=="function")}function Xl(J){return!!J&&typeof J=="object"}function $i(J){return ea(J)?oo(J):hn(J)}function so(){return[]}function Ki(){return!1}n.exports=Ho}(Dv,Dv.exports)),Dv.exports}var eY=Jq();const t7=el(eY);var r4,n7;function tY(){if(n7)return r4;n7=1;var n=NaN,e="[object Symbol]",t=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,s=/^0o[0-7]+$/i,a=parseInt,o=Object.prototype,d=o.toString;function g(z,j,q){return z===z&&(q!==void 0&&(z=z<=q?z:q),j!==void 0&&(z=z>=j?z:j)),z}function b(z){var j=typeof z;return!!z&&(j=="object"||j=="function")}function E(z){return!!z&&typeof z=="object"}function S(z){return typeof z=="symbol"||E(z)&&d.call(z)==e}function I(z){if(typeof z=="number")return z;if(S(z))return n;if(b(z)){var j=typeof z.valueOf=="function"?z.valueOf():z;z=b(j)?j+"":j}if(typeof z!="string")return z===0?z:+z;z=z.replace(t,"");var q=i.test(z);return q||s.test(z)?a(z.slice(2),q?2:8):r.test(z)?n:+z}function P(z,j,q){return q===void 0&&(q=j,j=void 0),q!==void 0&&(q=I(q),q=q===q?q:0),j!==void 0&&(j=I(j),j=j===j?j:0),g(I(z),j,q)}return r4=P,r4}var nY=tY();const r7=el(nY);var i4={},xv={},i7;function rY(){if(i7)return xv;i7=1,xv.byteLength=o,xv.toByteArray=g,xv.fromByteArray=S;for(var n=[],e=[],t=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,s=r.length;i<s;++i)n[i]=r[i],e[r.charCodeAt(i)]=i;e[45]=62,e[95]=63;function a(I){var P=I.length;if(P%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var z=I.indexOf("=");z===-1&&(z=P);var j=z===P?0:4-z%4;return[z,j]}function o(I){var P=a(I),z=P[0],j=P[1];return(z+j)*3/4-j}function d(I,P,z){return(P+z)*3/4-z}function g(I){var P,z=a(I),j=z[0],q=z[1],Y=new t(d(I,j,q)),ie=0,te=q>0?j-4:j,V;for(V=0;V<te;V+=4)P=e[I.charCodeAt(V)]<<18|e[I.charCodeAt(V+1)]<<12|e[I.charCodeAt(V+2)]<<6|e[I.charCodeAt(V+3)],Y[ie++]=P>>16&255,Y[ie++]=P>>8&255,Y[ie++]=P&255;return q===2&&(P=e[I.charCodeAt(V)]<<2|e[I.charCodeAt(V+1)]>>4,Y[ie++]=P&255),q===1&&(P=e[I.charCodeAt(V)]<<10|e[I.charCodeAt(V+1)]<<4|e[I.charCodeAt(V+2)]>>2,Y[ie++]=P>>8&255,Y[ie++]=P&255),Y}function b(I){return n[I>>18&63]+n[I>>12&63]+n[I>>6&63]+n[I&63]}function E(I,P,z){for(var j,q=[],Y=P;Y<z;Y+=3)j=(I[Y]<<16&16711680)+(I[Y+1]<<8&65280)+(I[Y+2]&255),q.push(b(j));return q.join("")}function S(I){for(var P,z=I.length,j=z%3,q=[],Y=16383,ie=0,te=z-j;ie<te;ie+=Y)q.push(E(I,ie,ie+Y>te?te:ie+Y));return j===1?(P=I[z-1],q.push(n[P>>2]+n[P<<4&63]+"==")):j===2&&(P=(I[z-2]<<8)+I[z-1],q.push(n[P>>10]+n[P>>4&63]+n[P<<2&63]+"=")),q.join("")}return xv}var J_={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var o7;function iY(){return o7||(o7=1,J_.read=function(n,e,t,r,i){var s,a,o=i*8-r-1,d=(1<<o)-1,g=d>>1,b=-7,E=t?i-1:0,S=t?-1:1,I=n[e+E];for(E+=S,s=I&(1<<-b)-1,I>>=-b,b+=o;b>0;s=s*256+n[e+E],E+=S,b-=8);for(a=s&(1<<-b)-1,s>>=-b,b+=r;b>0;a=a*256+n[e+E],E+=S,b-=8);if(s===0)s=1-g;else{if(s===d)return a?NaN:(I?-1:1)*(1/0);a=a+Math.pow(2,r),s=s-g}return(I?-1:1)*a*Math.pow(2,s-r)},J_.write=function(n,e,t,r,i,s){var a,o,d,g=s*8-i-1,b=(1<<g)-1,E=b>>1,S=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,I=r?0:s-1,P=r?1:-1,z=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,a=b):(a=Math.floor(Math.log(e)/Math.LN2),e*(d=Math.pow(2,-a))<1&&(a--,d*=2),a+E>=1?e+=S/d:e+=S*Math.pow(2,1-E),e*d>=2&&(a++,d/=2),a+E>=b?(o=0,a=b):a+E>=1?(o=(e*d-1)*Math.pow(2,i),a=a+E):(o=e*Math.pow(2,E-1)*Math.pow(2,i),a=0));i>=8;n[t+I]=o&255,I+=P,o/=256,i-=8);for(a=a<<i|o,g+=i;g>0;n[t+I]=a&255,I+=P,a/=256,g-=8);n[t+I-P]|=z*128}),J_}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var s7;function oY(){return s7||(s7=1,function(n){const e=rY(),t=iY(),r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=o,n.SlowBuffer=Y,n.INSPECT_MAX_BYTES=50;const i=2147483647;n.kMaxLength=i,o.TYPED_ARRAY_SUPPORT=s(),!o.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const Qe=new Uint8Array(1),ce={foo:function(){return 42}};return Object.setPrototypeOf(ce,Uint8Array.prototype),Object.setPrototypeOf(Qe,ce),Qe.foo()===42}catch{return!1}}Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}});function a(Qe){if(Qe>i)throw new RangeError('The value "'+Qe+'" is invalid for option "size"');const ce=new Uint8Array(Qe);return Object.setPrototypeOf(ce,o.prototype),ce}function o(Qe,ce,fe){if(typeof Qe=="number"){if(typeof ce=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return E(Qe)}return d(Qe,ce,fe)}o.poolSize=8192;function d(Qe,ce,fe){if(typeof Qe=="string")return S(Qe,ce);if(ArrayBuffer.isView(Qe))return P(Qe);if(Qe==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Qe);if(pn(Qe,ArrayBuffer)||Qe&&pn(Qe.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(pn(Qe,SharedArrayBuffer)||Qe&&pn(Qe.buffer,SharedArrayBuffer)))return z(Qe,ce,fe);if(typeof Qe=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const nt=Qe.valueOf&&Qe.valueOf();if(nt!=null&&nt!==Qe)return o.from(nt,ce,fe);const St=j(Qe);if(St)return St;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof Qe[Symbol.toPrimitive]=="function")return o.from(Qe[Symbol.toPrimitive]("string"),ce,fe);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Qe)}o.from=function(Qe,ce,fe){return d(Qe,ce,fe)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array);function g(Qe){if(typeof Qe!="number")throw new TypeError('"size" argument must be of type number');if(Qe<0)throw new RangeError('The value "'+Qe+'" is invalid for option "size"')}function b(Qe,ce,fe){return g(Qe),Qe<=0?a(Qe):ce!==void 0?typeof fe=="string"?a(Qe).fill(ce,fe):a(Qe).fill(ce):a(Qe)}o.alloc=function(Qe,ce,fe){return b(Qe,ce,fe)};function E(Qe){return g(Qe),a(Qe<0?0:q(Qe)|0)}o.allocUnsafe=function(Qe){return E(Qe)},o.allocUnsafeSlow=function(Qe){return E(Qe)};function S(Qe,ce){if((typeof ce!="string"||ce==="")&&(ce="utf8"),!o.isEncoding(ce))throw new TypeError("Unknown encoding: "+ce);const fe=ie(Qe,ce)|0;let nt=a(fe);const St=nt.write(Qe,ce);return St!==fe&&(nt=nt.slice(0,St)),nt}function I(Qe){const ce=Qe.length<0?0:q(Qe.length)|0,fe=a(ce);for(let nt=0;nt<ce;nt+=1)fe[nt]=Qe[nt]&255;return fe}function P(Qe){if(pn(Qe,Uint8Array)){const ce=new Uint8Array(Qe);return z(ce.buffer,ce.byteOffset,ce.byteLength)}return I(Qe)}function z(Qe,ce,fe){if(ce<0||Qe.byteLength<ce)throw new RangeError('"offset" is outside of buffer bounds');if(Qe.byteLength<ce+(fe||0))throw new RangeError('"length" is outside of buffer bounds');let nt;return ce===void 0&&fe===void 0?nt=new Uint8Array(Qe):fe===void 0?nt=new Uint8Array(Qe,ce):nt=new Uint8Array(Qe,ce,fe),Object.setPrototypeOf(nt,o.prototype),nt}function j(Qe){if(o.isBuffer(Qe)){const ce=q(Qe.length)|0,fe=a(ce);return fe.length===0||Qe.copy(fe,0,0,ce),fe}if(Qe.length!==void 0)return typeof Qe.length!="number"||Zn(Qe.length)?a(0):I(Qe);if(Qe.type==="Buffer"&&Array.isArray(Qe.data))return I(Qe.data)}function q(Qe){if(Qe>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return Qe|0}function Y(Qe){return+Qe!=Qe&&(Qe=0),o.alloc(+Qe)}o.isBuffer=function(ce){return ce!=null&&ce._isBuffer===!0&&ce!==o.prototype},o.compare=function(ce,fe){if(pn(ce,Uint8Array)&&(ce=o.from(ce,ce.offset,ce.byteLength)),pn(fe,Uint8Array)&&(fe=o.from(fe,fe.offset,fe.byteLength)),!o.isBuffer(ce)||!o.isBuffer(fe))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(ce===fe)return 0;let nt=ce.length,St=fe.length;for(let Ht=0,sn=Math.min(nt,St);Ht<sn;++Ht)if(ce[Ht]!==fe[Ht]){nt=ce[Ht],St=fe[Ht];break}return nt<St?-1:St<nt?1:0},o.isEncoding=function(ce){switch(String(ce).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(ce,fe){if(!Array.isArray(ce))throw new TypeError('"list" argument must be an Array of Buffers');if(ce.length===0)return o.alloc(0);let nt;if(fe===void 0)for(fe=0,nt=0;nt<ce.length;++nt)fe+=ce[nt].length;const St=o.allocUnsafe(fe);let Ht=0;for(nt=0;nt<ce.length;++nt){let sn=ce[nt];if(pn(sn,Uint8Array))Ht+sn.length>St.length?(o.isBuffer(sn)||(sn=o.from(sn)),sn.copy(St,Ht)):Uint8Array.prototype.set.call(St,sn,Ht);else if(o.isBuffer(sn))sn.copy(St,Ht);else throw new TypeError('"list" argument must be an Array of Buffers');Ht+=sn.length}return St};function ie(Qe,ce){if(o.isBuffer(Qe))return Qe.length;if(ArrayBuffer.isView(Qe)||pn(Qe,ArrayBuffer))return Qe.byteLength;if(typeof Qe!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof Qe);const fe=Qe.length,nt=arguments.length>2&&arguments[2]===!0;if(!nt&&fe===0)return 0;let St=!1;for(;;)switch(ce){case"ascii":case"latin1":case"binary":return fe;case"utf8":case"utf-8":return _n(Qe).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return fe*2;case"hex":return fe>>>1;case"base64":return rr(Qe).length;default:if(St)return nt?-1:_n(Qe).length;ce=(""+ce).toLowerCase(),St=!0}}o.byteLength=ie;function te(Qe,ce,fe){let nt=!1;if((ce===void 0||ce<0)&&(ce=0),ce>this.length||((fe===void 0||fe>this.length)&&(fe=this.length),fe<=0)||(fe>>>=0,ce>>>=0,fe<=ce))return"";for(Qe||(Qe="utf8");;)switch(Qe){case"hex":return We(this,ce,fe);case"utf8":case"utf-8":return De(this,ce,fe);case"ascii":return Ze(this,ce,fe);case"latin1":case"binary":return Je(this,ce,fe);case"base64":return Se(this,ce,fe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Me(this,ce,fe);default:if(nt)throw new TypeError("Unknown encoding: "+Qe);Qe=(Qe+"").toLowerCase(),nt=!0}}o.prototype._isBuffer=!0;function V(Qe,ce,fe){const nt=Qe[ce];Qe[ce]=Qe[fe],Qe[fe]=nt}o.prototype.swap16=function(){const ce=this.length;if(ce%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let fe=0;fe<ce;fe+=2)V(this,fe,fe+1);return this},o.prototype.swap32=function(){const ce=this.length;if(ce%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let fe=0;fe<ce;fe+=4)V(this,fe,fe+3),V(this,fe+1,fe+2);return this},o.prototype.swap64=function(){const ce=this.length;if(ce%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let fe=0;fe<ce;fe+=8)V(this,fe,fe+7),V(this,fe+1,fe+6),V(this,fe+2,fe+5),V(this,fe+3,fe+4);return this},o.prototype.toString=function(){const ce=this.length;return ce===0?"":arguments.length===0?De(this,0,ce):te.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(ce){if(!o.isBuffer(ce))throw new TypeError("Argument must be a Buffer");return this===ce?!0:o.compare(this,ce)===0},o.prototype.inspect=function(){let ce="";const fe=n.INSPECT_MAX_BYTES;return ce=this.toString("hex",0,fe).replace(/(.{2})/g,"$1 ").trim(),this.length>fe&&(ce+=" ... "),"<Buffer "+ce+">"},r&&(o.prototype[r]=o.prototype.inspect),o.prototype.compare=function(ce,fe,nt,St,Ht){if(pn(ce,Uint8Array)&&(ce=o.from(ce,ce.offset,ce.byteLength)),!o.isBuffer(ce))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof ce);if(fe===void 0&&(fe=0),nt===void 0&&(nt=ce?ce.length:0),St===void 0&&(St=0),Ht===void 0&&(Ht=this.length),fe<0||nt>ce.length||St<0||Ht>this.length)throw new RangeError("out of range index");if(St>=Ht&&fe>=nt)return 0;if(St>=Ht)return-1;if(fe>=nt)return 1;if(fe>>>=0,nt>>>=0,St>>>=0,Ht>>>=0,this===ce)return 0;let sn=Ht-St,tr=nt-fe;const Oe=Math.min(sn,tr),se=this.slice(St,Ht),ve=ce.slice(fe,nt);for(let p=0;p<Oe;++p)if(se[p]!==ve[p]){sn=se[p],tr=ve[p];break}return sn<tr?-1:tr<sn?1:0};function ne(Qe,ce,fe,nt,St){if(Qe.length===0)return-1;if(typeof fe=="string"?(nt=fe,fe=0):fe>2147483647?fe=2147483647:fe<-2147483648&&(fe=-2147483648),fe=+fe,Zn(fe)&&(fe=St?0:Qe.length-1),fe<0&&(fe=Qe.length+fe),fe>=Qe.length){if(St)return-1;fe=Qe.length-1}else if(fe<0)if(St)fe=0;else return-1;if(typeof ce=="string"&&(ce=o.from(ce,nt)),o.isBuffer(ce))return ce.length===0?-1:G(Qe,ce,fe,nt,St);if(typeof ce=="number")return ce=ce&255,typeof Uint8Array.prototype.indexOf=="function"?St?Uint8Array.prototype.indexOf.call(Qe,ce,fe):Uint8Array.prototype.lastIndexOf.call(Qe,ce,fe):G(Qe,[ce],fe,nt,St);throw new TypeError("val must be string, number or Buffer")}function G(Qe,ce,fe,nt,St){let Ht=1,sn=Qe.length,tr=ce.length;if(nt!==void 0&&(nt=String(nt).toLowerCase(),nt==="ucs2"||nt==="ucs-2"||nt==="utf16le"||nt==="utf-16le")){if(Qe.length<2||ce.length<2)return-1;Ht=2,sn/=2,tr/=2,fe/=2}function Oe(ve,p){return Ht===1?ve[p]:ve.readUInt16BE(p*Ht)}let se;if(St){let ve=-1;for(se=fe;se<sn;se++)if(Oe(Qe,se)===Oe(ce,ve===-1?0:se-ve)){if(ve===-1&&(ve=se),se-ve+1===tr)return ve*Ht}else ve!==-1&&(se-=se-ve),ve=-1}else for(fe+tr>sn&&(fe=sn-tr),se=fe;se>=0;se--){let ve=!0;for(let p=0;p<tr;p++)if(Oe(Qe,se+p)!==Oe(ce,p)){ve=!1;break}if(ve)return se}return-1}o.prototype.includes=function(ce,fe,nt){return this.indexOf(ce,fe,nt)!==-1},o.prototype.indexOf=function(ce,fe,nt){return ne(this,ce,fe,nt,!0)},o.prototype.lastIndexOf=function(ce,fe,nt){return ne(this,ce,fe,nt,!1)};function oe(Qe,ce,fe,nt){fe=Number(fe)||0;const St=Qe.length-fe;nt?(nt=Number(nt),nt>St&&(nt=St)):nt=St;const Ht=ce.length;nt>Ht/2&&(nt=Ht/2);let sn;for(sn=0;sn<nt;++sn){const tr=parseInt(ce.substr(sn*2,2),16);if(Zn(tr))return sn;Qe[fe+sn]=tr}return sn}function he(Qe,ce,fe,nt){return Dn(_n(ce,Qe.length-fe),Qe,fe,nt)}function pe(Qe,ce,fe,nt){return Dn(qn(ce),Qe,fe,nt)}function Ee(Qe,ce,fe,nt){return Dn(rr(ce),Qe,fe,nt)}function me(Qe,ce,fe,nt){return Dn(tn(ce,Qe.length-fe),Qe,fe,nt)}o.prototype.write=function(ce,fe,nt,St){if(fe===void 0)St="utf8",nt=this.length,fe=0;else if(nt===void 0&&typeof fe=="string")St=fe,nt=this.length,fe=0;else if(isFinite(fe))fe=fe>>>0,isFinite(nt)?(nt=nt>>>0,St===void 0&&(St="utf8")):(St=nt,nt=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Ht=this.length-fe;if((nt===void 0||nt>Ht)&&(nt=Ht),ce.length>0&&(nt<0||fe<0)||fe>this.length)throw new RangeError("Attempt to write outside buffer bounds");St||(St="utf8");let sn=!1;for(;;)switch(St){case"hex":return oe(this,ce,fe,nt);case"utf8":case"utf-8":return he(this,ce,fe,nt);case"ascii":case"latin1":case"binary":return pe(this,ce,fe,nt);case"base64":return Ee(this,ce,fe,nt);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return me(this,ce,fe,nt);default:if(sn)throw new TypeError("Unknown encoding: "+St);St=(""+St).toLowerCase(),sn=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Se(Qe,ce,fe){return ce===0&&fe===Qe.length?e.fromByteArray(Qe):e.fromByteArray(Qe.slice(ce,fe))}function De(Qe,ce,fe){fe=Math.min(Qe.length,fe);const nt=[];let St=ce;for(;St<fe;){const Ht=Qe[St];let sn=null,tr=Ht>239?4:Ht>223?3:Ht>191?2:1;if(St+tr<=fe){let Oe,se,ve,p;switch(tr){case 1:Ht<128&&(sn=Ht);break;case 2:Oe=Qe[St+1],(Oe&192)===128&&(p=(Ht&31)<<6|Oe&63,p>127&&(sn=p));break;case 3:Oe=Qe[St+1],se=Qe[St+2],(Oe&192)===128&&(se&192)===128&&(p=(Ht&15)<<12|(Oe&63)<<6|se&63,p>2047&&(p<55296||p>57343)&&(sn=p));break;case 4:Oe=Qe[St+1],se=Qe[St+2],ve=Qe[St+3],(Oe&192)===128&&(se&192)===128&&(ve&192)===128&&(p=(Ht&15)<<18|(Oe&63)<<12|(se&63)<<6|ve&63,p>65535&&p<1114112&&(sn=p))}}sn===null?(sn=65533,tr=1):sn>65535&&(sn-=65536,nt.push(sn>>>10&1023|55296),sn=56320|sn&1023),nt.push(sn),St+=tr}return at(nt)}const be=4096;function at(Qe){const ce=Qe.length;if(ce<=be)return String.fromCharCode.apply(String,Qe);let fe="",nt=0;for(;nt<ce;)fe+=String.fromCharCode.apply(String,Qe.slice(nt,nt+=be));return fe}function Ze(Qe,ce,fe){let nt="";fe=Math.min(Qe.length,fe);for(let St=ce;St<fe;++St)nt+=String.fromCharCode(Qe[St]&127);return nt}function Je(Qe,ce,fe){let nt="";fe=Math.min(Qe.length,fe);for(let St=ce;St<fe;++St)nt+=String.fromCharCode(Qe[St]);return nt}function We(Qe,ce,fe){const nt=Qe.length;(!ce||ce<0)&&(ce=0),(!fe||fe<0||fe>nt)&&(fe=nt);let St="";for(let Ht=ce;Ht<fe;++Ht)St+=dr[Qe[Ht]];return St}function Me(Qe,ce,fe){const nt=Qe.slice(ce,fe);let St="";for(let Ht=0;Ht<nt.length-1;Ht+=2)St+=String.fromCharCode(nt[Ht]+nt[Ht+1]*256);return St}o.prototype.slice=function(ce,fe){const nt=this.length;ce=~~ce,fe=fe===void 0?nt:~~fe,ce<0?(ce+=nt,ce<0&&(ce=0)):ce>nt&&(ce=nt),fe<0?(fe+=nt,fe<0&&(fe=0)):fe>nt&&(fe=nt),fe<ce&&(fe=ce);const St=this.subarray(ce,fe);return Object.setPrototypeOf(St,o.prototype),St};function Fe(Qe,ce,fe){if(Qe%1!==0||Qe<0)throw new RangeError("offset is not uint");if(Qe+ce>fe)throw new RangeError("Trying to access beyond buffer length")}o.prototype.readUintLE=o.prototype.readUIntLE=function(ce,fe,nt){ce=ce>>>0,fe=fe>>>0,nt||Fe(ce,fe,this.length);let St=this[ce],Ht=1,sn=0;for(;++sn<fe&&(Ht*=256);)St+=this[ce+sn]*Ht;return St},o.prototype.readUintBE=o.prototype.readUIntBE=function(ce,fe,nt){ce=ce>>>0,fe=fe>>>0,nt||Fe(ce,fe,this.length);let St=this[ce+--fe],Ht=1;for(;fe>0&&(Ht*=256);)St+=this[ce+--fe]*Ht;return St},o.prototype.readUint8=o.prototype.readUInt8=function(ce,fe){return ce=ce>>>0,fe||Fe(ce,1,this.length),this[ce]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(ce,fe){return ce=ce>>>0,fe||Fe(ce,2,this.length),this[ce]|this[ce+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(ce,fe){return ce=ce>>>0,fe||Fe(ce,2,this.length),this[ce]<<8|this[ce+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(ce,fe){return ce=ce>>>0,fe||Fe(ce,4,this.length),(this[ce]|this[ce+1]<<8|this[ce+2]<<16)+this[ce+3]*16777216},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(ce,fe){return ce=ce>>>0,fe||Fe(ce,4,this.length),this[ce]*16777216+(this[ce+1]<<16|this[ce+2]<<8|this[ce+3])},o.prototype.readBigUInt64LE=vr(function(ce){ce=ce>>>0,ft(ce,"offset");const fe=this[ce],nt=this[ce+7];(fe===void 0||nt===void 0)&&Ut(ce,this.length-8);const St=fe+this[++ce]*2**8+this[++ce]*2**16+this[++ce]*2**24,Ht=this[++ce]+this[++ce]*2**8+this[++ce]*2**16+nt*2**24;return BigInt(St)+(BigInt(Ht)<<BigInt(32))}),o.prototype.readBigUInt64BE=vr(function(ce){ce=ce>>>0,ft(ce,"offset");const fe=this[ce],nt=this[ce+7];(fe===void 0||nt===void 0)&&Ut(ce,this.length-8);const St=fe*2**24+this[++ce]*2**16+this[++ce]*2**8+this[++ce],Ht=this[++ce]*2**24+this[++ce]*2**16+this[++ce]*2**8+nt;return(BigInt(St)<<BigInt(32))+BigInt(Ht)}),o.prototype.readIntLE=function(ce,fe,nt){ce=ce>>>0,fe=fe>>>0,nt||Fe(ce,fe,this.length);let St=this[ce],Ht=1,sn=0;for(;++sn<fe&&(Ht*=256);)St+=this[ce+sn]*Ht;return Ht*=128,St>=Ht&&(St-=Math.pow(2,8*fe)),St},o.prototype.readIntBE=function(ce,fe,nt){ce=ce>>>0,fe=fe>>>0,nt||Fe(ce,fe,this.length);let St=fe,Ht=1,sn=this[ce+--St];for(;St>0&&(Ht*=256);)sn+=this[ce+--St]*Ht;return Ht*=128,sn>=Ht&&(sn-=Math.pow(2,8*fe)),sn},o.prototype.readInt8=function(ce,fe){return ce=ce>>>0,fe||Fe(ce,1,this.length),this[ce]&128?(255-this[ce]+1)*-1:this[ce]},o.prototype.readInt16LE=function(ce,fe){ce=ce>>>0,fe||Fe(ce,2,this.length);const nt=this[ce]|this[ce+1]<<8;return nt&32768?nt|4294901760:nt},o.prototype.readInt16BE=function(ce,fe){ce=ce>>>0,fe||Fe(ce,2,this.length);const nt=this[ce+1]|this[ce]<<8;return nt&32768?nt|4294901760:nt},o.prototype.readInt32LE=function(ce,fe){return ce=ce>>>0,fe||Fe(ce,4,this.length),this[ce]|this[ce+1]<<8|this[ce+2]<<16|this[ce+3]<<24},o.prototype.readInt32BE=function(ce,fe){return ce=ce>>>0,fe||Fe(ce,4,this.length),this[ce]<<24|this[ce+1]<<16|this[ce+2]<<8|this[ce+3]},o.prototype.readBigInt64LE=vr(function(ce){ce=ce>>>0,ft(ce,"offset");const fe=this[ce],nt=this[ce+7];(fe===void 0||nt===void 0)&&Ut(ce,this.length-8);const St=this[ce+4]+this[ce+5]*2**8+this[ce+6]*2**16+(nt<<24);return(BigInt(St)<<BigInt(32))+BigInt(fe+this[++ce]*2**8+this[++ce]*2**16+this[++ce]*2**24)}),o.prototype.readBigInt64BE=vr(function(ce){ce=ce>>>0,ft(ce,"offset");const fe=this[ce],nt=this[ce+7];(fe===void 0||nt===void 0)&&Ut(ce,this.length-8);const St=(fe<<24)+this[++ce]*2**16+this[++ce]*2**8+this[++ce];return(BigInt(St)<<BigInt(32))+BigInt(this[++ce]*2**24+this[++ce]*2**16+this[++ce]*2**8+nt)}),o.prototype.readFloatLE=function(ce,fe){return ce=ce>>>0,fe||Fe(ce,4,this.length),t.read(this,ce,!0,23,4)},o.prototype.readFloatBE=function(ce,fe){return ce=ce>>>0,fe||Fe(ce,4,this.length),t.read(this,ce,!1,23,4)},o.prototype.readDoubleLE=function(ce,fe){return ce=ce>>>0,fe||Fe(ce,8,this.length),t.read(this,ce,!0,52,8)},o.prototype.readDoubleBE=function(ce,fe){return ce=ce>>>0,fe||Fe(ce,8,this.length),t.read(this,ce,!1,52,8)};function He(Qe,ce,fe,nt,St,Ht){if(!o.isBuffer(Qe))throw new TypeError('"buffer" argument must be a Buffer instance');if(ce>St||ce<Ht)throw new RangeError('"value" argument is out of bounds');if(fe+nt>Qe.length)throw new RangeError("Index out of range")}o.prototype.writeUintLE=o.prototype.writeUIntLE=function(ce,fe,nt,St){if(ce=+ce,fe=fe>>>0,nt=nt>>>0,!St){const tr=Math.pow(2,8*nt)-1;He(this,ce,fe,nt,tr,0)}let Ht=1,sn=0;for(this[fe]=ce&255;++sn<nt&&(Ht*=256);)this[fe+sn]=ce/Ht&255;return fe+nt},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(ce,fe,nt,St){if(ce=+ce,fe=fe>>>0,nt=nt>>>0,!St){const tr=Math.pow(2,8*nt)-1;He(this,ce,fe,nt,tr,0)}let Ht=nt-1,sn=1;for(this[fe+Ht]=ce&255;--Ht>=0&&(sn*=256);)this[fe+Ht]=ce/sn&255;return fe+nt},o.prototype.writeUint8=o.prototype.writeUInt8=function(ce,fe,nt){return ce=+ce,fe=fe>>>0,nt||He(this,ce,fe,1,255,0),this[fe]=ce&255,fe+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(ce,fe,nt){return ce=+ce,fe=fe>>>0,nt||He(this,ce,fe,2,65535,0),this[fe]=ce&255,this[fe+1]=ce>>>8,fe+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(ce,fe,nt){return ce=+ce,fe=fe>>>0,nt||He(this,ce,fe,2,65535,0),this[fe]=ce>>>8,this[fe+1]=ce&255,fe+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(ce,fe,nt){return ce=+ce,fe=fe>>>0,nt||He(this,ce,fe,4,4294967295,0),this[fe+3]=ce>>>24,this[fe+2]=ce>>>16,this[fe+1]=ce>>>8,this[fe]=ce&255,fe+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(ce,fe,nt){return ce=+ce,fe=fe>>>0,nt||He(this,ce,fe,4,4294967295,0),this[fe]=ce>>>24,this[fe+1]=ce>>>16,this[fe+2]=ce>>>8,this[fe+3]=ce&255,fe+4};function bt(Qe,ce,fe,nt,St){_t(ce,nt,St,Qe,fe,7);let Ht=Number(ce&BigInt(4294967295));Qe[fe++]=Ht,Ht=Ht>>8,Qe[fe++]=Ht,Ht=Ht>>8,Qe[fe++]=Ht,Ht=Ht>>8,Qe[fe++]=Ht;let sn=Number(ce>>BigInt(32)&BigInt(4294967295));return Qe[fe++]=sn,sn=sn>>8,Qe[fe++]=sn,sn=sn>>8,Qe[fe++]=sn,sn=sn>>8,Qe[fe++]=sn,fe}function Yt(Qe,ce,fe,nt,St){_t(ce,nt,St,Qe,fe,7);let Ht=Number(ce&BigInt(4294967295));Qe[fe+7]=Ht,Ht=Ht>>8,Qe[fe+6]=Ht,Ht=Ht>>8,Qe[fe+5]=Ht,Ht=Ht>>8,Qe[fe+4]=Ht;let sn=Number(ce>>BigInt(32)&BigInt(4294967295));return Qe[fe+3]=sn,sn=sn>>8,Qe[fe+2]=sn,sn=sn>>8,Qe[fe+1]=sn,sn=sn>>8,Qe[fe]=sn,fe+8}o.prototype.writeBigUInt64LE=vr(function(ce,fe=0){return bt(this,ce,fe,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeBigUInt64BE=vr(function(ce,fe=0){return Yt(this,ce,fe,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeIntLE=function(ce,fe,nt,St){if(ce=+ce,fe=fe>>>0,!St){const Oe=Math.pow(2,8*nt-1);He(this,ce,fe,nt,Oe-1,-Oe)}let Ht=0,sn=1,tr=0;for(this[fe]=ce&255;++Ht<nt&&(sn*=256);)ce<0&&tr===0&&this[fe+Ht-1]!==0&&(tr=1),this[fe+Ht]=(ce/sn>>0)-tr&255;return fe+nt},o.prototype.writeIntBE=function(ce,fe,nt,St){if(ce=+ce,fe=fe>>>0,!St){const Oe=Math.pow(2,8*nt-1);He(this,ce,fe,nt,Oe-1,-Oe)}let Ht=nt-1,sn=1,tr=0;for(this[fe+Ht]=ce&255;--Ht>=0&&(sn*=256);)ce<0&&tr===0&&this[fe+Ht+1]!==0&&(tr=1),this[fe+Ht]=(ce/sn>>0)-tr&255;return fe+nt},o.prototype.writeInt8=function(ce,fe,nt){return ce=+ce,fe=fe>>>0,nt||He(this,ce,fe,1,127,-128),ce<0&&(ce=255+ce+1),this[fe]=ce&255,fe+1},o.prototype.writeInt16LE=function(ce,fe,nt){return ce=+ce,fe=fe>>>0,nt||He(this,ce,fe,2,32767,-32768),this[fe]=ce&255,this[fe+1]=ce>>>8,fe+2},o.prototype.writeInt16BE=function(ce,fe,nt){return ce=+ce,fe=fe>>>0,nt||He(this,ce,fe,2,32767,-32768),this[fe]=ce>>>8,this[fe+1]=ce&255,fe+2},o.prototype.writeInt32LE=function(ce,fe,nt){return ce=+ce,fe=fe>>>0,nt||He(this,ce,fe,4,2147483647,-2147483648),this[fe]=ce&255,this[fe+1]=ce>>>8,this[fe+2]=ce>>>16,this[fe+3]=ce>>>24,fe+4},o.prototype.writeInt32BE=function(ce,fe,nt){return ce=+ce,fe=fe>>>0,nt||He(this,ce,fe,4,2147483647,-2147483648),ce<0&&(ce=4294967295+ce+1),this[fe]=ce>>>24,this[fe+1]=ce>>>16,this[fe+2]=ce>>>8,this[fe+3]=ce&255,fe+4},o.prototype.writeBigInt64LE=vr(function(ce,fe=0){return bt(this,ce,fe,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),o.prototype.writeBigInt64BE=vr(function(ce,fe=0){return Yt(this,ce,fe,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function gt(Qe,ce,fe,nt,St,Ht){if(fe+nt>Qe.length)throw new RangeError("Index out of range");if(fe<0)throw new RangeError("Index out of range")}function Lt(Qe,ce,fe,nt,St){return ce=+ce,fe=fe>>>0,St||gt(Qe,ce,fe,4),t.write(Qe,ce,fe,nt,23,4),fe+4}o.prototype.writeFloatLE=function(ce,fe,nt){return Lt(this,ce,fe,!0,nt)},o.prototype.writeFloatBE=function(ce,fe,nt){return Lt(this,ce,fe,!1,nt)};function Kt(Qe,ce,fe,nt,St){return ce=+ce,fe=fe>>>0,St||gt(Qe,ce,fe,8),t.write(Qe,ce,fe,nt,52,8),fe+8}o.prototype.writeDoubleLE=function(ce,fe,nt){return Kt(this,ce,fe,!0,nt)},o.prototype.writeDoubleBE=function(ce,fe,nt){return Kt(this,ce,fe,!1,nt)},o.prototype.copy=function(ce,fe,nt,St){if(!o.isBuffer(ce))throw new TypeError("argument should be a Buffer");if(nt||(nt=0),!St&&St!==0&&(St=this.length),fe>=ce.length&&(fe=ce.length),fe||(fe=0),St>0&&St<nt&&(St=nt),St===nt||ce.length===0||this.length===0)return 0;if(fe<0)throw new RangeError("targetStart out of bounds");if(nt<0||nt>=this.length)throw new RangeError("Index out of range");if(St<0)throw new RangeError("sourceEnd out of bounds");St>this.length&&(St=this.length),ce.length-fe<St-nt&&(St=ce.length-fe+nt);const Ht=St-nt;return this===ce&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(fe,nt,St):Uint8Array.prototype.set.call(ce,this.subarray(nt,St),fe),Ht},o.prototype.fill=function(ce,fe,nt,St){if(typeof ce=="string"){if(typeof fe=="string"?(St=fe,fe=0,nt=this.length):typeof nt=="string"&&(St=nt,nt=this.length),St!==void 0&&typeof St!="string")throw new TypeError("encoding must be a string");if(typeof St=="string"&&!o.isEncoding(St))throw new TypeError("Unknown encoding: "+St);if(ce.length===1){const sn=ce.charCodeAt(0);(St==="utf8"&&sn<128||St==="latin1")&&(ce=sn)}}else typeof ce=="number"?ce=ce&255:typeof ce=="boolean"&&(ce=Number(ce));if(fe<0||this.length<fe||this.length<nt)throw new RangeError("Out of range index");if(nt<=fe)return this;fe=fe>>>0,nt=nt===void 0?this.length:nt>>>0,ce||(ce=0);let Ht;if(typeof ce=="number")for(Ht=fe;Ht<nt;++Ht)this[Ht]=ce;else{const sn=o.isBuffer(ce)?ce:o.from(ce,St),tr=sn.length;if(tr===0)throw new TypeError('The value "'+ce+'" is invalid for argument "value"');for(Ht=0;Ht<nt-fe;++Ht)this[Ht+fe]=sn[Ht%tr]}return this};const Ue={};function Pe(Qe,ce,fe){Ue[Qe]=class extends fe{constructor(){super(),Object.defineProperty(this,"message",{value:ce.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${Qe}]`,this.stack,delete this.name}get code(){return Qe}set code(St){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:St,writable:!0})}toString(){return`${this.name} [${Qe}]: ${this.message}`}}}Pe("ERR_BUFFER_OUT_OF_BOUNDS",function(Qe){return Qe?`${Qe} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Pe("ERR_INVALID_ARG_TYPE",function(Qe,ce){return`The "${Qe}" argument must be of type number. Received type ${typeof ce}`},TypeError),Pe("ERR_OUT_OF_RANGE",function(Qe,ce,fe){let nt=`The value of "${Qe}" is out of range.`,St=fe;return Number.isInteger(fe)&&Math.abs(fe)>2**32?St=Be(String(fe)):typeof fe=="bigint"&&(St=String(fe),(fe>BigInt(2)**BigInt(32)||fe<-(BigInt(2)**BigInt(32)))&&(St=Be(St)),St+="n"),nt+=` It must be ${ce}. Received ${St}`,nt},RangeError);function Be(Qe){let ce="",fe=Qe.length;const nt=Qe[0]==="-"?1:0;for(;fe>=nt+4;fe-=3)ce=`_${Qe.slice(fe-3,fe)}${ce}`;return`${Qe.slice(0,fe)}${ce}`}function it(Qe,ce,fe){ft(ce,"offset"),(Qe[ce]===void 0||Qe[ce+fe]===void 0)&&Ut(ce,Qe.length-(fe+1))}function _t(Qe,ce,fe,nt,St,Ht){if(Qe>fe||Qe<ce){const sn=typeof ce=="bigint"?"n":"";let tr;throw ce===0||ce===BigInt(0)?tr=`>= 0${sn} and < 2${sn} ** ${(Ht+1)*8}${sn}`:tr=`>= -(2${sn} ** ${(Ht+1)*8-1}${sn}) and < 2 ** ${(Ht+1)*8-1}${sn}`,new Ue.ERR_OUT_OF_RANGE("value",tr,Qe)}it(nt,St,Ht)}function ft(Qe,ce){if(typeof Qe!="number")throw new Ue.ERR_INVALID_ARG_TYPE(ce,"number",Qe)}function Ut(Qe,ce,fe){throw Math.floor(Qe)!==Qe?(ft(Qe,fe),new Ue.ERR_OUT_OF_RANGE("offset","an integer",Qe)):ce<0?new Ue.ERR_BUFFER_OUT_OF_BOUNDS:new Ue.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${ce}`,Qe)}const rn=/[^+/0-9A-Za-z-_]/g;function Dt(Qe){if(Qe=Qe.split("=")[0],Qe=Qe.trim().replace(rn,""),Qe.length<2)return"";for(;Qe.length%4!==0;)Qe=Qe+"=";return Qe}function _n(Qe,ce){ce=ce||1/0;let fe;const nt=Qe.length;let St=null;const Ht=[];for(let sn=0;sn<nt;++sn){if(fe=Qe.charCodeAt(sn),fe>55295&&fe<57344){if(!St){if(fe>56319){(ce-=3)>-1&&Ht.push(239,191,189);continue}else if(sn+1===nt){(ce-=3)>-1&&Ht.push(239,191,189);continue}St=fe;continue}if(fe<56320){(ce-=3)>-1&&Ht.push(239,191,189),St=fe;continue}fe=(St-55296<<10|fe-56320)+65536}else St&&(ce-=3)>-1&&Ht.push(239,191,189);if(St=null,fe<128){if((ce-=1)<0)break;Ht.push(fe)}else if(fe<2048){if((ce-=2)<0)break;Ht.push(fe>>6|192,fe&63|128)}else if(fe<65536){if((ce-=3)<0)break;Ht.push(fe>>12|224,fe>>6&63|128,fe&63|128)}else if(fe<1114112){if((ce-=4)<0)break;Ht.push(fe>>18|240,fe>>12&63|128,fe>>6&63|128,fe&63|128)}else throw new Error("Invalid code point")}return Ht}function qn(Qe){const ce=[];for(let fe=0;fe<Qe.length;++fe)ce.push(Qe.charCodeAt(fe)&255);return ce}function tn(Qe,ce){let fe,nt,St;const Ht=[];for(let sn=0;sn<Qe.length&&!((ce-=2)<0);++sn)fe=Qe.charCodeAt(sn),nt=fe>>8,St=fe%256,Ht.push(St),Ht.push(nt);return Ht}function rr(Qe){return e.toByteArray(Dt(Qe))}function Dn(Qe,ce,fe,nt){let St;for(St=0;St<nt&&!(St+fe>=ce.length||St>=Qe.length);++St)ce[St+fe]=Qe[St];return St}function pn(Qe,ce){return Qe instanceof ce||Qe!=null&&Qe.constructor!=null&&Qe.constructor.name!=null&&Qe.constructor.name===ce.name}function Zn(Qe){return Qe!==Qe}const dr=function(){const Qe="0123456789abcdef",ce=new Array(256);for(let fe=0;fe<16;++fe){const nt=fe*16;for(let St=0;St<16;++St)ce[nt+St]=Qe[fe]+Qe[St]}return ce}();function vr(Qe){return typeof BigInt>"u"?Jn:Qe}function Jn(){throw new Error("BigInt not supported")}}(i4)),i4}var sY=oY();const aY=el(sY);var o4,a7;function lY(){if(a7)return o4;a7=1;var n="Expected a function",e="__lodash_hash_undefined__",t="[object Function]",r="[object GeneratorFunction]",i="[object Symbol]",s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/,o=/^\./,d=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,g=/[\\^$.*+?()[\]{}|]/g,b=/\\(\\)?/g,E=/^\[object .+?Constructor\]$/,S=typeof window=="object"&&window&&window.Object===Object&&window,I=typeof self=="object"&&self&&self.Object===Object&&self,P=S||I||Function("return this")();function z(se,ve){return se==null?void 0:se[ve]}function j(se){var ve=!1;if(se!=null&&typeof se.toString!="function")try{ve=!!(se+"")}catch{}return ve}var q=Array.prototype,Y=Function.prototype,ie=Object.prototype,te=P["__core-js_shared__"],V=function(){var se=/[^.]+$/.exec(te&&te.keys&&te.keys.IE_PROTO||"");return se?"Symbol(src)_1."+se:""}(),ne=Y.toString,G=ie.hasOwnProperty,oe=ie.toString,he=RegExp("^"+ne.call(G).replace(g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),pe=P.Symbol,Ee=q.splice,me=rr(P,"Map"),Se=rr(Object,"create"),De=pe?pe.prototype:void 0,be=De?De.toString:void 0;function at(se){var ve=-1,p=se?se.length:0;for(this.clear();++ve<p;){var Ne=se[ve];this.set(Ne[0],Ne[1])}}function Ze(){this.__data__=Se?Se(null):{}}function Je(se){return this.has(se)&&delete this.__data__[se]}function We(se){var ve=this.__data__;if(Se){var p=ve[se];return p===e?void 0:p}return G.call(ve,se)?ve[se]:void 0}function Me(se){var ve=this.__data__;return Se?ve[se]!==void 0:G.call(ve,se)}function Fe(se,ve){var p=this.__data__;return p[se]=Se&&ve===void 0?e:ve,this}at.prototype.clear=Ze,at.prototype.delete=Je,at.prototype.get=We,at.prototype.has=Me,at.prototype.set=Fe;function He(se){var ve=-1,p=se?se.length:0;for(this.clear();++ve<p;){var Ne=se[ve];this.set(Ne[0],Ne[1])}}function bt(){this.__data__=[]}function Yt(se){var ve=this.__data__,p=Ut(ve,se);if(p<0)return!1;var Ne=ve.length-1;return p==Ne?ve.pop():Ee.call(ve,p,1),!0}function gt(se){var ve=this.__data__,p=Ut(ve,se);return p<0?void 0:ve[p][1]}function Lt(se){return Ut(this.__data__,se)>-1}function Kt(se,ve){var p=this.__data__,Ne=Ut(p,se);return Ne<0?p.push([se,ve]):p[Ne][1]=ve,this}He.prototype.clear=bt,He.prototype.delete=Yt,He.prototype.get=gt,He.prototype.has=Lt,He.prototype.set=Kt;function Ue(se){var ve=-1,p=se?se.length:0;for(this.clear();++ve<p;){var Ne=se[ve];this.set(Ne[0],Ne[1])}}function Pe(){this.__data__={hash:new at,map:new(me||He),string:new at}}function Be(se){return tn(this,se).delete(se)}function it(se){return tn(this,se).get(se)}function _t(se){return tn(this,se).has(se)}function ft(se,ve){return tn(this,se).set(se,ve),this}Ue.prototype.clear=Pe,Ue.prototype.delete=Be,Ue.prototype.get=it,Ue.prototype.has=_t,Ue.prototype.set=ft;function Ut(se,ve){for(var p=se.length;p--;)if(ce(se[p][0],ve))return p;return-1}function rn(se,ve){ve=Dn(ve,se)?[ve]:qn(ve);for(var p=0,Ne=ve.length;se!=null&&p<Ne;)se=se[vr(ve[p++])];return p&&p==Ne?se:void 0}function Dt(se){if(!St(se)||Zn(se))return!1;var ve=nt(se)||j(se)?he:E;return ve.test(Jn(se))}function _n(se){if(typeof se=="string")return se;if(sn(se))return be?be.call(se):"";var ve=se+"";return ve=="0"&&1/se==-1/0?"-0":ve}function qn(se){return fe(se)?se:dr(se)}function tn(se,ve){var p=se.__data__;return pn(ve)?p[typeof ve=="string"?"string":"hash"]:p.map}function rr(se,ve){var p=z(se,ve);return Dt(p)?p:void 0}function Dn(se,ve){if(fe(se))return!1;var p=typeof se;return p=="number"||p=="symbol"||p=="boolean"||se==null||sn(se)?!0:a.test(se)||!s.test(se)||ve!=null&&se in Object(ve)}function pn(se){var ve=typeof se;return ve=="string"||ve=="number"||ve=="symbol"||ve=="boolean"?se!=="__proto__":se===null}function Zn(se){return!!V&&V in se}var dr=Qe(function(se){se=tr(se);var ve=[];return o.test(se)&&ve.push(""),se.replace(d,function(p,Ne,Ye,rt){ve.push(Ye?rt.replace(b,"$1"):Ne||p)}),ve});function vr(se){if(typeof se=="string"||sn(se))return se;var ve=se+"";return ve=="0"&&1/se==-1/0?"-0":ve}function Jn(se){if(se!=null){try{return ne.call(se)}catch{}try{return se+""}catch{}}return""}function Qe(se,ve){if(typeof se!="function"||ve&&typeof ve!="function")throw new TypeError(n);var p=function(){var Ne=arguments,Ye=ve?ve.apply(this,Ne):Ne[0],rt=p.cache;if(rt.has(Ye))return rt.get(Ye);var ct=se.apply(this,Ne);return p.cache=rt.set(Ye,ct),ct};return p.cache=new(Qe.Cache||Ue),p}Qe.Cache=Ue;function ce(se,ve){return se===ve||se!==se&&ve!==ve}var fe=Array.isArray;function nt(se){var ve=St(se)?oe.call(se):"";return ve==t||ve==r}function St(se){var ve=typeof se;return!!se&&(ve=="object"||ve=="function")}function Ht(se){return!!se&&typeof se=="object"}function sn(se){return typeof se=="symbol"||Ht(se)&&oe.call(se)==i}function tr(se){return se==null?"":_n(se)}function Oe(se,ve,p){var Ne=se==null?void 0:rn(se,ve);return Ne===void 0?p:Ne}return o4=Oe,o4}var uY=lY();const AY=el(uY);var Rv={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var cY=Rv.exports,l7;function dY(){return l7||(l7=1,function(n,e){(function(){var t,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",a="Expected a function",o="Invalid `variable` option passed into `_.template`",d="__lodash_hash_undefined__",g=500,b="__lodash_placeholder__",E=1,S=2,I=4,P=1,z=2,j=1,q=2,Y=4,ie=8,te=16,V=32,ne=64,G=128,oe=256,he=512,pe=30,Ee="...",me=800,Se=16,De=1,be=2,at=3,Ze=1/0,Je=9007199254740991,We=17976931348623157e292,Me=NaN,Fe=4294967295,He=Fe-1,bt=Fe>>>1,Yt=[["ary",G],["bind",j],["bindKey",q],["curry",ie],["curryRight",te],["flip",he],["partial",V],["partialRight",ne],["rearg",oe]],gt="[object Arguments]",Lt="[object Array]",Kt="[object AsyncFunction]",Ue="[object Boolean]",Pe="[object Date]",Be="[object DOMException]",it="[object Error]",_t="[object Function]",ft="[object GeneratorFunction]",Ut="[object Map]",rn="[object Number]",Dt="[object Null]",_n="[object Object]",qn="[object Promise]",tn="[object Proxy]",rr="[object RegExp]",Dn="[object Set]",pn="[object String]",Zn="[object Symbol]",dr="[object Undefined]",vr="[object WeakMap]",Jn="[object WeakSet]",Qe="[object ArrayBuffer]",ce="[object DataView]",fe="[object Float32Array]",nt="[object Float64Array]",St="[object Int8Array]",Ht="[object Int16Array]",sn="[object Int32Array]",tr="[object Uint8Array]",Oe="[object Uint8ClampedArray]",se="[object Uint16Array]",ve="[object Uint32Array]",p=/\b__p \+= '';/g,Ne=/\b(__p \+=) '' \+/g,Ye=/(__e\(.*?\)|\b__t\)) \+\n'';/g,rt=/&(?:amp|lt|gt|quot|#39);/g,ct=/[&<>"']/g,dt=RegExp(rt.source),qt=RegExp(ct.source),Gt=/<%-([\s\S]+?)%>/g,jt=/<%([\s\S]+?)%>/g,xt=/<%=([\s\S]+?)%>/g,Tn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,On=/^\w*$/,gr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Er=/[\\^$.*+?()[\]{}|]/g,on=RegExp(Er.source),Rn=/^\s+/,er=/\s/,Xr=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ur=/\{\n\/\* \[wrapped with (.+)\] \*/,Dr=/,? & /,ur=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,mo=/[()=,{}\[\]\/\s]/,Ma=/\\(\\)?/g,qi=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,vi=/\w*$/,io=/^[-+]0x[0-9a-f]+$/i,Do=/^0b[01]+$/i,Ti=/^\[object .+?Constructor\]$/,ja=/^0o[0-7]+$/i,Sa=/^(?:0|[1-9]\d*)$/,ns=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,sa=/($^)/,Al=/['\n\r\u2028\u2029\\]/g,uo="\\ud800-\\udfff",Fu="\\u0300-\\u036f",Hl="\\ufe20-\\ufe2f",oo="\\u20d0-\\u20ff",Tr=Fu+Hl+oo,tl="\\u2700-\\u27bf",Bs="a-z\\xdf-\\xf6\\xf8-\\xff",Js="\\xac\\xb1\\xd7\\xf7",qe="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",wt="\\u2000-\\u206f",vn=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Yn="A-Z\\xc0-\\xd6\\xd8-\\xde",hn="\\ufe0e\\ufe0f",or=Js+qe+wt+vn,Pi="[']",go="["+uo+"]",Cs="["+or+"]",Rs="["+Tr+"]",SA="\\d+",ei="["+tl+"]",wi="["+Bs+"]",nl="[^"+uo+or+SA+tl+Bs+Yn+"]",ui="\\ud83c[\\udffb-\\udfff]",aa="(?:"+Rs+"|"+ui+")",XA="[^"+uo+"]",Ea="(?:\\ud83c[\\udde6-\\uddff]){2}",Rr="[\\ud800-\\udbff][\\udc00-\\udfff]",Yi="["+Yn+"]",yo="\\u200d",gu="(?:"+wi+"|"+nl+")",wo="(?:"+Yi+"|"+nl+")",Ws="(?:"+Pi+"(?:d|ll|m|re|s|t|ve))?",Gs="(?:"+Pi+"(?:D|LL|M|RE|S|T|VE))?",Lu=aa+"?",_l="["+hn+"]?",Ao="(?:"+yo+"(?:"+[XA,Ea,Rr].join("|")+")"+_l+Lu+")*",Bo="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ho="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Ba=_l+Lu+Ao,Ms="(?:"+[ei,Ea,Rr].join("|")+")"+Ba,Oa="(?:"+[XA+Rs+"?",Rs,Ea,Rr,go].join("|")+")",ea=RegExp(Pi,"g"),EA=RegExp(Rs,"g"),co=RegExp(ui+"(?="+ui+")|"+Oa+Ba,"g"),Zl=RegExp([Yi+"?"+wi+"+"+Ws+"(?="+[Cs,Yi,"$"].join("|")+")",wo+"+"+Gs+"(?="+[Cs,Yi+gu,"$"].join("|")+")",Yi+"?"+gu+"+"+Ws,Yi+"+"+Gs,Ho,Bo,SA,Ms].join("|"),"g"),Ui=RegExp("["+yo+uo+Tr+hn+"]"),Yr=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Xl=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],$i=-1,so={};so[fe]=so[nt]=so[St]=so[Ht]=so[sn]=so[tr]=so[Oe]=so[se]=so[ve]=!0,so[gt]=so[Lt]=so[Qe]=so[Ue]=so[ce]=so[Pe]=so[it]=so[_t]=so[Ut]=so[rn]=so[_n]=so[rr]=so[Dn]=so[pn]=so[vr]=!1;var Ki={};Ki[gt]=Ki[Lt]=Ki[Qe]=Ki[ce]=Ki[Ue]=Ki[Pe]=Ki[fe]=Ki[nt]=Ki[St]=Ki[Ht]=Ki[sn]=Ki[Ut]=Ki[rn]=Ki[_n]=Ki[rr]=Ki[Dn]=Ki[pn]=Ki[Zn]=Ki[tr]=Ki[Oe]=Ki[se]=Ki[ve]=!0,Ki[it]=Ki[_t]=Ki[vr]=!1;var J={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},Ie={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},st={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},$t={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Kr=parseFloat,$n=parseInt,ti=typeof window=="object"&&window&&window.Object===Object&&window,Ai=typeof self=="object"&&self&&self.Object===Object&&self,Br=ti||Ai||Function("return this")(),xr=e&&!e.nodeType&&e,zi=xr&&!0&&n&&!n.nodeType&&n,Zi=zi&&zi.exports===xr,Si=Zi&&ti.process,Wr=function(){try{var Jt=zi&&zi.require&&zi.require("util").types;return Jt||Si&&Si.binding&&Si.binding("util")}catch{}}(),Mo=Wr&&Wr.isArrayBuffer,Di=Wr&&Wr.isDate,cs=Wr&&Wr.isMap,pa=Wr&&Wr.isRegExp,Na=Wr&&Wr.isSet,yu=Wr&&Wr.isTypedArray;function Qs(Jt,En,ln){switch(ln.length){case 0:return Jt.call(En);case 1:return Jt.call(En,ln[0]);case 2:return Jt.call(En,ln[0],ln[1]);case 3:return Jt.call(En,ln[0],ln[1],ln[2])}return Jt.apply(En,ln)}function Nd(Jt,En,ln,Fr){for(var Ei=-1,ho=Jt==null?0:Jt.length;++Ei<ho;){var na=Jt[Ei];En(Fr,na,ln(na),Jt)}return Fr}function ma(Jt,En){for(var ln=-1,Fr=Jt==null?0:Jt.length;++ln<Fr&&En(Jt[ln],ln,Jt)!==!1;);return Jt}function bl(Jt,En){for(var ln=Jt==null?0:Jt.length;ln--&&En(Jt[ln],ln,Jt)!==!1;);return Jt}function Wc(Jt,En){for(var ln=-1,Fr=Jt==null?0:Jt.length;++ln<Fr;)if(!En(Jt[ln],ln,Jt))return!1;return!0}function Uu(Jt,En){for(var ln=-1,Fr=Jt==null?0:Jt.length,Ei=0,ho=[];++ln<Fr;){var na=Jt[ln];En(na,ln,Jt)&&(ho[Ei++]=na)}return ho}function Wd(Jt,En){var ln=Jt==null?0:Jt.length;return!!ln&&ta(Jt,En,0)>-1}function vu(Jt,En,ln){for(var Fr=-1,Ei=Jt==null?0:Jt.length;++Fr<Ei;)if(ln(En,Jt[Fr]))return!0;return!1}function Fs(Jt,En){for(var ln=-1,Fr=Jt==null?0:Jt.length,Ei=Array(Fr);++ln<Fr;)Ei[ln]=En(Jt[ln],ln,Jt);return Ei}function BA(Jt,En){for(var ln=-1,Fr=En.length,Ei=Jt.length;++ln<Fr;)Jt[Ei+ln]=En[ln];return Jt}function cd(Jt,En,ln,Fr){var Ei=-1,ho=Jt==null?0:Jt.length;for(Fr&&ho&&(ln=Jt[++Ei]);++Ei<ho;)ln=En(ln,Jt[Ei],Ei,Jt);return ln}function Gd(Jt,En,ln,Fr){var Ei=Jt==null?0:Jt.length;for(Fr&&Ei&&(ln=Jt[--Ei]);Ei--;)ln=En(ln,Jt[Ei],Ei,Jt);return ln}function bc(Jt,En){for(var ln=-1,Fr=Jt==null?0:Jt.length;++ln<Fr;)if(En(Jt[ln],ln,Jt))return!0;return!1}var xc=sf("length");function $f(Jt){return Jt.split("")}function dd(Jt){return Jt.match(ur)||[]}function Bp(Jt,En,ln){var Fr;return ln(Jt,function(Ei,ho,na){if(En(Ei,ho,na))return Fr=ho,!1}),Fr}function JA(Jt,En,ln,Fr){for(var Ei=Jt.length,ho=ln+(Fr?1:-1);Fr?ho--:++ho<Ei;)if(En(Jt[ho],ho,Jt))return ho;return-1}function ta(Jt,En,ln){return En===En?wh(Jt,En,ln):JA(Jt,gh,ln)}function of(Jt,En,ln,Fr){for(var Ei=ln-1,ho=Jt.length;++Ei<ho;)if(Fr(Jt[Ei],En))return Ei;return-1}function gh(Jt){return Jt!==Jt}function hd(Jt,En){var ln=Jt==null?0:Jt.length;return ln?yh(Jt,En)/ln:Me}function sf(Jt){return function(En){return En==null?t:En[Jt]}}function fd(Jt){return function(En){return Jt==null?t:Jt[En]}}function af(Jt,En,ln,Fr,Ei){return Ei(Jt,function(ho,na,rs){ln=Fr?(Fr=!1,ho):En(ln,ho,na,rs)}),ln}function ec(Jt,En){var ln=Jt.length;for(Jt.sort(En);ln--;)Jt[ln]=Jt[ln].value;return Jt}function yh(Jt,En){for(var ln,Fr=-1,Ei=Jt.length;++Fr<Ei;){var ho=En(Jt[Fr]);ho!==t&&(ln=ln===t?ho:ln+ho)}return ln}function lf(Jt,En){for(var ln=-1,Fr=Array(Jt);++ln<Jt;)Fr[ln]=En(ln);return Fr}function vh(Jt,En){return Fs(En,function(ln){return[ln,Jt[ln]]})}function Ch(Jt){return Jt&&Jt.slice(0,Mh(Jt)+1).replace(Rn,"")}function xl(Jt){return function(En){return Jt(En)}}function _h(Jt,En){return Fs(En,function(ln){return Jt[ln]})}function zu(Jt,En){return Jt.has(En)}function lA(Jt,En){for(var ln=-1,Fr=Jt.length;++ln<Fr&&ta(En,Jt[ln],0)>-1;);return ln}function Gc(Jt,En){for(var ln=Jt.length;ln--&&ta(En,Jt[ln],0)>-1;);return ln}function bh(Jt,En){for(var ln=Jt.length,Fr=0;ln--;)Jt[ln]===En&&++Fr;return Fr}var xh=fd(J),ju=fd(Ie);function uA(Jt){return"\\"+$t[Jt]}function Ll(Jt,En){return Jt==null?t:Jt[En]}function Qc(Jt){return Ui.test(Jt)}function uf(Jt){return Yr.test(Jt)}function Af(Jt){for(var En,ln=[];!(En=Jt.next()).done;)ln.push(En.value);return ln}function Qd(Jt){var En=-1,ln=Array(Jt.size);return Jt.forEach(function(Fr,Ei){ln[++En]=[Ei,Fr]}),ln}function pd(Jt,En){return function(ln){return Jt(En(ln))}}function la(Jt,En){for(var ln=-1,Fr=Jt.length,Ei=0,ho=[];++ln<Fr;){var na=Jt[ln];(na===En||na===b)&&(Jt[ln]=b,ho[Ei++]=ln)}return ho}function rl(Jt){var En=-1,ln=Array(Jt.size);return Jt.forEach(function(Fr){ln[++En]=Fr}),ln}function Zo(Jt){var En=-1,ln=Array(Jt.size);return Jt.forEach(function(Fr){ln[++En]=[Fr,Fr]}),ln}function wh(Jt,En,ln){for(var Fr=ln-1,Ei=Jt.length;++Fr<Ei;)if(Jt[Fr]===En)return Fr;return-1}function hm(Jt,En,ln){for(var Fr=ln+1;Fr--;)if(Jt[Fr]===En)return Fr;return Fr}function md(Jt){return Qc(Jt)?wc(Jt):xc(Jt)}function Cu(Jt){return Qc(Jt)?qd(Jt):$f(Jt)}function Mh(Jt){for(var En=Jt.length;En--&&er.test(Jt.charAt(En)););return En}var cf=fd(st);function wc(Jt){for(var En=co.lastIndex=0;co.test(Jt);)++En;return En}function qd(Jt){return Jt.match(co)||[]}function Sh(Jt){return Jt.match(Zl)||[]}var Eh=function Jt(En){En=En==null?Br:Jl.defaults(Br.Object(),En,Jl.pick(Br,Xl));var ln=En.Array,Fr=En.Date,Ei=En.Error,ho=En.Function,na=En.Math,rs=En.Object,OA=En.RegExp,df=En.String,Nu=En.TypeError,_u=ln.prototype,bu=ho.prototype,Ul=rs.prototype,Wu=En["__core-js_shared__"],ao=bu.toString,Oo=Ul.hasOwnProperty,gd=0,yd=function(){var x=/[^.]+$/.exec(Wu&&Wu.keys&&Wu.keys.IE_PROTO||"");return x?"Symbol(src)_1."+x:""}(),eu=Ul.toString,AA=ao.call(rs),zl=Br._,tc=OA("^"+ao.call(Oo).replace(Er,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),cA=Zi?En.Buffer:t,tu=En.Symbol,qc=En.Uint8Array,vd=cA?cA.allocUnsafe:t,Wa=pd(rs.getPrototypeOf,rs),Yc=rs.create,Cd=Ul.propertyIsEnumerable,nc=_u.splice,Bh=tu?tu.isConcatSpreadable:t,Gu=tu?tu.iterator:t,$c=tu?tu.toStringTag:t,rc=function(){try{var x=Pd(rs,"defineProperty");return x({},"",{}),x}catch{}}(),Oh=En.clearTimeout!==Br.clearTimeout&&En.clearTimeout,ds=Fr&&Fr.now!==Br.Date.now&&Fr.now,Mc=En.setTimeout!==Br.setTimeout&&En.setTimeout,IA=na.ceil,Qu=na.floor,Yd=rs.getOwnPropertySymbols,_d=cA?cA.isBuffer:t,ic=En.isFinite,Vc=_u.join,kA=pd(rs.keys,rs),Bi=na.max,Ls=na.min,dA=Fr.now,bd=En.parseInt,Hc=na.random,Sc=_u.reverse,TA=Pd(En,"DataView"),cl=Pd(En,"Map"),hA=Pd(En,"Promise"),dl=Pd(En,"Set"),oc=Pd(En,"WeakMap"),qu=Pd(rs,"create"),xd=oc&&new oc,Zc={},PA=$a(TA),sc=$a(cl),Yu=$a(hA),$u=$a(dl),KA=$a(oc),Ec=tu?tu.prototype:t,xu=Ec?Ec.valueOf:t,Ih=Ec?Ec.toString:t;function ot(x){if(Fa(x)&&!So(x)&&!(x instanceof ii)){if(x instanceof pi)return x;if(Oo.call(x,"__wrapped__"))return du(x)}return new pi(x)}var DA=function(){function x(){}return function(T){if(!Tl(T))return{};if(Yc)return Yc(T);x.prototype=T;var H=new x;return x.prototype=t,H}}();function Io(){}function pi(x,T){this.__wrapped__=x,this.__actions__=[],this.__chain__=!!T,this.__index__=0,this.__values__=t}ot.templateSettings={escape:Gt,evaluate:jt,interpolate:xt,variable:"",imports:{_:ot}},ot.prototype=Io.prototype,ot.prototype.constructor=ot,pi.prototype=DA(Io.prototype),pi.prototype.constructor=pi;function ii(x){this.__wrapped__=x,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Fe,this.__views__=[]}function is(){var x=new ii(this.__wrapped__);return x.__actions__=va(this.__actions__),x.__dir__=this.__dir__,x.__filtered__=this.__filtered__,x.__iteratees__=va(this.__iteratees__),x.__takeCount__=this.__takeCount__,x.__views__=va(this.__views__),x}function fA(){if(this.__filtered__){var x=new ii(this);x.__dir__=-1,x.__filtered__=!0}else x=this.clone(),x.__dir__*=-1;return x}function $d(){var x=this.__wrapped__.value(),T=this.__dir__,H=So(x),ye=T<0,Ve=H?x.length:0,ht=pm(0,Ve,this.__views__),Pt=ht.start,Vt=ht.end,an=Vt-Pt,Hn=ye?Vt:Pt-1,Xn=this.__iteratees__,mr=Xn.length,$r=0,xi=Ls(an,this.__takeCount__);if(!H||!ye&&Ve==an&&xi==an)return Ta(x,this.__actions__);var Ji=[];e:for(;an--&&$r<xi;){Hn+=T;for(var ls=-1,eo=x[Hn];++ls<mr;){var ws=Xn[ls],Os=ws.iteratee,qh=ws.type,Fd=Os(eo);if(qh==be)eo=Fd;else if(!Fd){if(qh==De)continue e;break e}}Ji[$r++]=eo}return Ji}ii.prototype=DA(Io.prototype),ii.prototype.constructor=ii;function Ia(x){var T=-1,H=x==null?0:x.length;for(this.clear();++T<H;){var ye=x[T];this.set(ye[0],ye[1])}}function Us(){this.__data__=qu?qu(null):{},this.size=0}function Ss(x){var T=this.has(x)&&delete this.__data__[x];return this.size-=T?1:0,T}function Bc(x){var T=this.__data__;if(qu){var H=T[x];return H===d?t:H}return Oo.call(T,x)?T[x]:t}function ra(x){var T=this.__data__;return qu?T[x]!==t:Oo.call(T,x)}function ua(x,T){var H=this.__data__;return this.size+=this.has(x)?0:1,H[x]=qu&&T===t?d:T,this}Ia.prototype.clear=Us,Ia.prototype.delete=Ss,Ia.prototype.get=Bc,Ia.prototype.has=ra,Ia.prototype.set=ua;function hr(x){var T=-1,H=x==null?0:x.length;for(this.clear();++T<H;){var ye=x[T];this.set(ye[0],ye[1])}}function wd(){this.__data__=[],this.size=0}function ga(x){var T=this.__data__,H=ka(T,x);if(H<0)return!1;var ye=T.length-1;return H==ye?T.pop():nc.call(T,H,1),--this.size,!0}function Md(x){var T=this.__data__,H=ka(T,x);return H<0?t:T[H][1]}function Sd(x){return ka(this.__data__,x)>-1}function ac(x,T){var H=this.__data__,ye=ka(H,x);return ye<0?(++this.size,H.push([x,T])):H[ye][1]=T,this}hr.prototype.clear=wd,hr.prototype.delete=ga,hr.prototype.get=Md,hr.prototype.has=Sd,hr.prototype.set=ac;function nu(x){var T=-1,H=x==null?0:x.length;for(this.clear();++T<H;){var ye=x[T];this.set(ye[0],ye[1])}}function Xi(){this.size=0,this.__data__={hash:new Ia,map:new(cl||hr),string:new Ia}}function hl(x){var T=fc(this,x).delete(x);return this.size-=T?1:0,T}function kh(x){return fc(this,x).get(x)}function Oc(x){return fc(this,x).has(x)}function RA(x,T){var H=fc(this,x),ye=H.size;return H.set(x,T),this.size+=H.size==ye?0:1,this}nu.prototype.clear=Xi,nu.prototype.delete=hl,nu.prototype.get=kh,nu.prototype.has=Oc,nu.prototype.set=RA;function Ic(x){var T=-1,H=x==null?0:x.length;for(this.__data__=new nu;++T<H;)this.add(x[T])}function FA(x){return this.__data__.set(x,d),this}function lc(x){return this.__data__.has(x)}Ic.prototype.add=Ic.prototype.push=FA,Ic.prototype.has=lc;function _s(x){var T=this.__data__=new hr(x);this.size=T.size}function Ro(){this.__data__=new hr,this.size=0}function ru(x){var T=this.__data__,H=T.delete(x);return this.size=T.size,H}function Ga(x){return this.__data__.get(x)}function Qa(x){return this.__data__.has(x)}function jl(x,T){var H=this.__data__;if(H instanceof hr){var ye=H.__data__;if(!cl||ye.length<i-1)return ye.push([x,T]),this.size=++H.size,this;H=this.__data__=new nu(ye)}return H.set(x,T),this.size=H.size,this}_s.prototype.clear=Ro,_s.prototype.delete=ru,_s.prototype.get=Ga,_s.prototype.has=Qa,_s.prototype.set=jl;function Fo(x,T){var H=So(x),ye=!H&&rd(x),Ve=!H&&!ye&&Up(x),ht=!H&&!ye&&!Ve&&Of(x),Pt=H||ye||Ve||ht,Vt=Pt?lf(x.length,df):[],an=Vt.length;for(var Hn in x)(T||Oo.call(x,Hn))&&!(Pt&&(Hn=="length"||Ve&&(Hn=="offset"||Hn=="parent")||ht&&(Hn=="buffer"||Hn=="byteLength"||Hn=="byteOffset")||O(Hn,an)))&&Vt.push(Hn);return Vt}function wu(x){var T=x.length;return T?x[Mn(0,T-1)]:t}function uc(x,T){return Ya(va(x),Mu(T,0,x.length))}function Vd(x){return Ya(va(x))}function LA(x,T,H){(H!==t&&!oh(x[T],H)||H===t&&!(T in x))&&Hr(x,T,H)}function Ac(x,T,H){var ye=x[T];(!(Oo.call(x,T)&&oh(ye,H))||H===t&&!(T in x))&&Hr(x,T,H)}function ka(x,T){for(var H=x.length;H--;)if(oh(x[H][0],T))return H;return-1}function bs(x,T,H,ye){return wl(x,function(Ve,ht,Pt){T(ye,Ve,H(Ve),Pt)}),ye}function hs(x,T){return x&&Hu(T,fn(T),x)}function Pr(x,T){return x&&Hu(T,jn(T),x)}function Hr(x,T,H){T=="__proto__"&&rc?rc(x,T,{configurable:!0,enumerable:!0,value:H,writable:!0}):x[T]=H}function UA(x,T){for(var H=-1,ye=T.length,Ve=ln(ye),ht=x==null;++H<ye;)Ve[H]=ht?t:Le(x,T[H]);return Ve}function Mu(x,T,H){return x===x&&(H!==t&&(x=x<=H?x:H),T!==t&&(x=x>=T?x:T)),x}function fl(x,T,H,ye,Ve,ht){var Pt,Vt=T&E,an=T&S,Hn=T&I;if(H&&(Pt=Ve?H(x,ye,Ve,ht):H(x)),Pt!==t)return Pt;if(!Tl(x))return x;var Xn=So(x);if(Xn){if(Pt=tp(x),!Vt)return va(x,Pt)}else{var mr=ml(x),$r=mr==_t||mr==ft;if(Up(x))return os(x,Vt);if(mr==_n||mr==gt||$r&&!Ve){if(Pt=an||$r?{}:Nl(x),!Vt)return an?Vf(x,Pr(Pt,x)):Jc(x,hs(Pt,x))}else{if(!Ki[mr])return Ve?x:{};Pt=ih(x,mr,Vt)}}ht||(ht=new _s);var xi=ht.get(x);if(xi)return xi;ht.set(x,Pt),d1(x)?x.forEach(function(eo){Pt.add(fl(eo,T,H,eo,x,ht))}):eA(x)&&x.forEach(function(eo,ws){Pt.set(ws,fl(eo,T,H,ws,x,ht))});var Ji=Hn?an?Cf:vf:an?jn:fn,ls=Xn?t:Ji(x);return ma(ls||x,function(eo,ws){ls&&(ws=eo,eo=x[ws]),Ac(Pt,ws,fl(eo,T,H,ws,x,ht))}),Pt}function iu(x){var T=fn(x);return function(H){return Ed(H,x,T)}}function Ed(x,T,H){var ye=H.length;if(x==null)return!ye;for(x=rs(x);ye--;){var Ve=H[ye],ht=T[Ve],Pt=x[Ve];if(Pt===t&&!(Ve in x)||!ht(Pt))return!1}return!0}function pA(x,T,H){if(typeof x!="function")throw new Nu(a);return ni(function(){x.apply(t,H)},T)}function cc(x,T,H,ye){var Ve=-1,ht=Wd,Pt=!0,Vt=x.length,an=[],Hn=T.length;if(!Vt)return an;H&&(T=Fs(T,xl(H))),ye?(ht=vu,Pt=!1):T.length>=i&&(ht=zu,Pt=!1,T=new Ic(T));e:for(;++Ve<Vt;){var Xn=x[Ve],mr=H==null?Xn:H(Xn);if(Xn=ye||Xn!==0?Xn:0,Pt&&mr===mr){for(var $r=Hn;$r--;)if(T[$r]===mr)continue e;an.push(Xn)}else ht(T,mr,ye)||an.push(Xn)}return an}var wl=pl(qa),gs=pl(Vu,!0);function qs(x,T){var H=!0;return wl(x,function(ye,Ve,ht){return H=!!T(ye,Ve,ht),H}),H}function Xc(x,T,H){for(var ye=-1,Ve=x.length;++ye<Ve;){var ht=x[ye],Pt=T(ht);if(Pt!=null&&(Vt===t?Pt===Pt&&!id(Pt):H(Pt,Vt)))var Vt=Pt,an=ht}return an}function Bd(x,T,H,ye){var Ve=x.length;for(H=Po(H),H<0&&(H=-H>Ve?0:Ve+H),ye=ye===t||ye>Ve?Ve:Po(ye),ye<0&&(ye+=Ve),ye=H>ye?0:z_(ye);H<ye;)x[H++]=T;return x}function mA(x,T){var H=[];return wl(x,function(ye,Ve,ht){T(ye,Ve,ht)&&H.push(ye)}),H}function zs(x,T,H,ye,Ve){var ht=-1,Pt=x.length;for(H||(H=y),Ve||(Ve=[]);++ht<Pt;){var Vt=x[ht];T>0&&H(Vt)?T>1?zs(Vt,T-1,H,ye,Ve):BA(Ve,Vt):ye||(Ve[Ve.length]=Vt)}return Ve}var kc=ff(),Su=ff(!0);function qa(x,T){return x&&kc(x,T,fn)}function Vu(x,T){return x&&Su(x,T,fn)}function Tc(x,T){return Uu(T,function(H){return sh(x[H])})}function Eu(x,T){T=Aa(T,x);for(var H=0,ye=T.length;x!=null&&H<ye;)x=x[Ca(T[H++])];return H&&H==ye?x:t}function ya(x,T,H){var ye=T(x);return So(x)?ye:BA(ye,H(x))}function Ys(x){return x==null?x===t?dr:Dt:$c&&$c in rs(x)?Tp(x):Ln(x)}function ou(x,T){return x>T}function su(x,T){return x!=null&&Oo.call(x,T)}function zA(x,T){return x!=null&&T in rs(x)}function au(x,T,H){return x>=Ls(T,H)&&x<Bi(T,H)}function Pc(x,T,H){for(var ye=H?vu:Wd,Ve=x[0].length,ht=x.length,Pt=ht,Vt=ln(ht),an=1/0,Hn=[];Pt--;){var Xn=x[Pt];Pt&&T&&(Xn=Fs(Xn,xl(T))),an=Ls(Xn.length,an),Vt[Pt]=!H&&(T||Ve>=120&&Xn.length>=120)?new Ic(Pt&&Xn):t}Xn=x[0];var mr=-1,$r=Vt[0];e:for(;++mr<Ve&&Hn.length<an;){var xi=Xn[mr],Ji=T?T(xi):xi;if(xi=H||xi!==0?xi:0,!($r?zu($r,Ji):ye(Hn,Ji,H))){for(Pt=ht;--Pt;){var ls=Vt[Pt];if(!(ls?zu(ls,Ji):ye(x[Pt],Ji,H)))continue e}$r&&$r.push(Ji),Hn.push(xi)}}return Hn}function gA(x,T,H,ye){return qa(x,function(Ve,ht,Pt){T(ye,H(Ve),ht,Pt)}),ye}function Ml(x,T,H){T=Aa(T,x),x=Vn(x,T);var ye=x==null?x:x[Ca(WA(T))];return ye==null?t:Qs(ye,x,H)}function Od(x){return Fa(x)&&Ys(x)==gt}function k(x){return Fa(x)&&Ys(x)==Qe}function l(x){return Fa(x)&&Ys(x)==Pe}function c(x,T,H,ye,Ve){return x===T?!0:x==null||T==null||!Fa(x)&&!Fa(T)?x!==x&&T!==T:_(x,T,H,ye,c,Ve)}function _(x,T,H,ye,Ve,ht){var Pt=So(x),Vt=So(T),an=Pt?Lt:ml(x),Hn=Vt?Lt:ml(T);an=an==gt?_n:an,Hn=Hn==gt?_n:Hn;var Xn=an==_n,mr=Hn==_n,$r=an==Hn;if($r&&Up(x)){if(!Up(T))return!1;Pt=!0,Xn=!1}if($r&&!Xn)return ht||(ht=new _s),Pt||Of(x)?Zu(x,T,H,ye,Ve,ht):yf(x,T,an,H,ye,Ve,ht);if(!(H&P)){var xi=Xn&&Oo.call(x,"__wrapped__"),Ji=mr&&Oo.call(T,"__wrapped__");if(xi||Ji){var ls=xi?x.value():x,eo=Ji?T.value():T;return ht||(ht=new _s),Ve(ls,eo,H,ye,ht)}}return $r?(ht||(ht=new _s),Jf(x,T,H,ye,Ve,ht)):!1}function w(x){return Fa(x)&&ml(x)==Ut}function K(x,T,H,ye){var Ve=H.length,ht=Ve,Pt=!ye;if(x==null)return!ht;for(x=rs(x);Ve--;){var Vt=H[Ve];if(Pt&&Vt[2]?Vt[1]!==x[Vt[0]]:!(Vt[0]in x))return!1}for(;++Ve<ht;){Vt=H[Ve];var an=Vt[0],Hn=x[an],Xn=Vt[1];if(Pt&&Vt[2]){if(Hn===t&&!(an in x))return!1}else{var mr=new _s;if(ye)var $r=ye(Hn,Xn,an,x,T,mr);if(!($r===t?c(Xn,Hn,P|z,ye,mr):$r))return!1}}return!0}function N(x){if(!Tl(x)||Ce(x))return!1;var T=sh(x)?tc:Ti;return T.test($a(x))}function $(x){return Fa(x)&&Ys(x)==rr}function ee(x){return Fa(x)&&ml(x)==Dn}function ae(x){return Fa(x)&&c1(x.length)&&!!so[Ys(x)]}function xe(x){return typeof x=="function"?x:x==null?Ha:typeof x=="object"?So(x)?ut(x[0],x[1]):pt(x):yI(x)}function ke(x){if(!je(x))return kA(x);var T=[];for(var H in rs(x))Oo.call(x,H)&&H!="constructor"&&T.push(H);return T}function Ke(x){if(!Tl(x))return wn(x);var T=je(x),H=[];for(var ye in x)ye=="constructor"&&(T||!Oo.call(x,ye))||H.push(ye);return H}function $e(x,T){return x<T}function Xe(x,T){var H=-1,ye=Rc(x)?ln(x.length):[];return wl(x,function(Ve,ht,Pt){ye[++H]=T(Ve,ht,Pt)}),ye}function pt(x){var T=Uo(x);return T.length==1&&T[0][2]?Mt(T[0][0],T[0][1]):function(H){return H===x||K(H,x,T)}}function ut(x,T){return R(x)&&yt(T)?Mt(Ca(x),T):function(H){var ye=Le(H,x);return ye===t&&ye===T?Ot(H,x):c(T,ye,P|z)}}function mt(x,T,H,ye,Ve){x!==T&&kc(T,function(ht,Pt){if(Ve||(Ve=new _s),Tl(ht))vt(x,T,Pt,H,mt,ye,Ve);else{var Vt=ye?ye(yr(x,Pt),ht,Pt+"",x,T,Ve):t;Vt===t&&(Vt=ht),LA(x,Pt,Vt)}},jn)}function vt(x,T,H,ye,Ve,ht,Pt){var Vt=yr(x,H),an=yr(T,H),Hn=Pt.get(an);if(Hn){LA(x,H,Hn);return}var Xn=ht?ht(Vt,an,H+"",x,T,Pt):t,mr=Xn===t;if(mr){var $r=So(an),xi=!$r&&Up(an),Ji=!$r&&!xi&&Of(an);Xn=an,$r||xi||Ji?So(Vt)?Xn=Vt:Gl(Vt)?Xn=va(Vt):xi?(mr=!1,Xn=os(an,!0)):Ji?(mr=!1,Xn=hf(an,!0)):Xn=[]:l0(an)||rd(an)?(Xn=Vt,rd(Vt)?Xn=u(Vt):(!Tl(Vt)||sh(Vt))&&(Xn=Nl(an))):mr=!1}mr&&(Pt.set(an,Xn),Ve(Xn,an,ye,ht,Pt),Pt.delete(an)),LA(x,H,Xn)}function Bt(x,T){var H=x.length;if(H)return T+=T<0?H:0,O(T,H)?x[T]:t}function kt(x,T,H){T.length?T=Fs(T,function(ht){return So(ht)?function(Pt){return Eu(Pt,ht.length===1?ht[0]:ht)}:ht}):T=[Ha];var ye=-1;T=Fs(T,xl(bi()));var Ve=Xe(x,function(ht,Pt,Vt){var an=Fs(T,function(Hn){return Hn(ht)});return{criteria:an,index:++ye,value:ht}});return ec(Ve,function(ht,Pt){return Op(ht,Pt,H)})}function Rt(x,T){return zt(x,T,function(H,ye){return Ot(x,ye)})}function zt(x,T,H){for(var ye=-1,Ve=T.length,ht={};++ye<Ve;){var Pt=T[ye],Vt=Eu(x,Pt);H(Vt,Pt)&&pr(ht,Aa(Pt,x),Vt)}return ht}function Tt(x){return function(T){return Eu(T,x)}}function nn(x,T,H,ye){var Ve=ye?of:ta,ht=-1,Pt=T.length,Vt=x;for(x===T&&(T=va(T)),H&&(Vt=Fs(x,xl(H)));++ht<Pt;)for(var an=0,Hn=T[ht],Xn=H?H(Hn):Hn;(an=Ve(Vt,Xn,an,ye))>-1;)Vt!==x&&nc.call(Vt,an,1),nc.call(x,an,1);return x}function Zt(x,T){for(var H=x?T.length:0,ye=H-1;H--;){var Ve=T[H];if(H==ye||Ve!==ht){var ht=Ve;O(Ve)?nc.call(x,Ve,1):ol(x,Ve)}}return x}function Mn(x,T){return x+Qu(Hc()*(T-x+1))}function Bn(x,T,H,ye){for(var Ve=-1,ht=Bi(IA((T-x)/(H||1)),0),Pt=ln(ht);ht--;)Pt[ye?ht:++Ve]=x,x+=H;return Pt}function yn(x,T){var H="";if(!x||T<1||T>Je)return H;do T%2&&(H+=x),T=Qu(T/2),T&&(x+=x);while(T);return H}function In(x,T){return zr(sr(x,T,Ha),x+"")}function Nn(x){return wu(vl(x))}function Fn(x,T){var H=vl(x);return Ya(H,Mu(T,0,H.length))}function pr(x,T,H,ye){if(!Tl(x))return x;T=Aa(T,x);for(var Ve=-1,ht=T.length,Pt=ht-1,Vt=x;Vt!=null&&++Ve<ht;){var an=Ca(T[Ve]),Hn=H;if(an==="__proto__"||an==="constructor"||an==="prototype")return x;if(Ve!=Pt){var Xn=Vt[an];Hn=ye?ye(Xn,an,Vt):t,Hn===t&&(Hn=Tl(Xn)?Xn:O(T[Ve+1])?[]:{})}Ac(Vt,an,Hn),Vt=Vt[an]}return x}var ki=xd?function(x,T){return xd.set(x,T),x}:Ha,Wi=rc?function(x,T){return rc(x,"toString",{configurable:!0,enumerable:!1,value:yv(T),writable:!0})}:Ha;function Lo(x){return Ya(vl(x))}function Mi(x,T,H){var ye=-1,Ve=x.length;T<0&&(T=-T>Ve?0:Ve+T),H=H>Ve?Ve:H,H<0&&(H+=Ve),Ve=T>H?0:H-T>>>0,T>>>=0;for(var ht=ln(Ve);++ye<Ve;)ht[ye]=x[ye+T];return ht}function fs(x,T){var H;return wl(x,function(ye,Ve,ht){return H=T(ye,Ve,ht),!H}),!!H}function ko(x,T,H){var ye=0,Ve=x==null?ye:x.length;if(typeof T=="number"&&T===T&&Ve<=bt){for(;ye<Ve;){var ht=ye+Ve>>>1,Pt=x[ht];Pt!==null&&!id(Pt)&&(H?Pt<=T:Pt<T)?ye=ht+1:Ve=ht}return Ve}return To(x,T,Ha,H)}function To(x,T,H,ye){var Ve=0,ht=x==null?0:x.length;if(ht===0)return 0;T=H(T);for(var Pt=T!==T,Vt=T===null,an=id(T),Hn=T===t;Ve<ht;){var Xn=Qu((Ve+ht)/2),mr=H(x[Xn]),$r=mr!==t,xi=mr===null,Ji=mr===mr,ls=id(mr);if(Pt)var eo=ye||Ji;else Hn?eo=Ji&&(ye||$r):Vt?eo=Ji&&$r&&(ye||!xi):an?eo=Ji&&$r&&!xi&&(ye||!ls):xi||ls?eo=!1:eo=ye?mr<=T:mr<T;eo?Ve=Xn+1:ht=Xn}return Ls(ht,He)}function vo(x,T){for(var H=-1,ye=x.length,Ve=0,ht=[];++H<ye;){var Pt=x[H],Vt=T?T(Pt):Pt;if(!H||!oh(Vt,an)){var an=Vt;ht[Ve++]=Pt===0?0:Pt}}return ht}function il(x){return typeof x=="number"?x:id(x)?Me:+x}function Xo(x){if(typeof x=="string")return x;if(So(x))return Fs(x,Xo)+"";if(id(x))return Ih?Ih.call(x):"";var T=x+"";return T=="0"&&1/x==-1/0?"-0":T}function Jo(x,T,H){var ye=-1,Ve=Wd,ht=x.length,Pt=!0,Vt=[],an=Vt;if(H)Pt=!1,Ve=vu;else if(ht>=i){var Hn=T?null:Ip(x);if(Hn)return rl(Hn);Pt=!1,Ve=zu,an=new Ic}else an=T?[]:Vt;e:for(;++ye<ht;){var Xn=x[ye],mr=T?T(Xn):Xn;if(Xn=H||Xn!==0?Xn:0,Pt&&mr===mr){for(var $r=an.length;$r--;)if(an[$r]===mr)continue e;T&&an.push(mr),Vt.push(Xn)}else Ve(an,mr,H)||(an!==Vt&&an.push(mr),Vt.push(Xn))}return Vt}function ol(x,T){return T=Aa(T,x),x=Vn(x,T),x==null||delete x[Ca(WA(T))]}function yA(x,T,H,ye){return pr(x,T,H(Eu(x,T)),ye)}function lu(x,T,H,ye){for(var Ve=x.length,ht=ye?Ve:-1;(ye?ht--:++ht<Ve)&&T(x[ht],ht,x););return H?Mi(x,ye?0:ht,ye?ht+1:Ve):Mi(x,ye?ht+1:0,ye?Ve:ht)}function Ta(x,T){var H=x;return H instanceof ii&&(H=H.value()),cd(T,function(ye,Ve){return Ve.func.apply(Ve.thisArg,BA([ye],Ve.args))},H)}function Sl(x,T,H){var ye=x.length;if(ye<2)return ye?Jo(x[0]):[];for(var Ve=-1,ht=ln(ye);++Ve<ye;)for(var Pt=x[Ve],Vt=-1;++Vt<ye;)Vt!=Ve&&(ht[Ve]=cc(ht[Ve]||Pt,x[Vt],T,H));return Jo(zs(ht,1),T,H)}function jA(x,T,H){for(var ye=-1,Ve=x.length,ht=T.length,Pt={};++ye<Ve;){var Vt=ye<ht?T[ye]:t;H(Pt,x[ye],Vt)}return Pt}function vA(x){return Gl(x)?x:[]}function NA(x){return typeof x=="function"?x:Ha}function Aa(x,T){return So(x)?x:R(x,T)?[x]:ia(v(x))}var El=In;function Pa(x,T,H){var ye=x.length;return H=H===t?ye:H,!T&&H>=ye?x:Mi(x,T,H)}var uu=Oh||function(x){return Br.clearTimeout(x)};function os(x,T){if(T)return x.slice();var H=x.length,ye=vd?vd(H):new x.constructor(H);return x.copy(ye),ye}function ss(x){var T=new x.constructor(x.byteLength);return new qc(T).set(new qc(x)),T}function Bu(x,T){var H=T?ss(x.buffer):x.buffer;return new x.constructor(H,x.byteOffset,x.byteLength)}function $s(x){var T=new x.constructor(x.source,vi.exec(x));return T.lastIndex=x.lastIndex,T}function Hd(x){return xu?rs(xu.call(x)):{}}function hf(x,T){var H=T?ss(x.buffer):x.buffer;return new x.constructor(H,x.byteOffset,x.length)}function Zd(x,T){if(x!==T){var H=x!==t,ye=x===null,Ve=x===x,ht=id(x),Pt=T!==t,Vt=T===null,an=T===T,Hn=id(T);if(!Vt&&!Hn&&!ht&&x>T||ht&&Pt&&an&&!Vt&&!Hn||ye&&Pt&&an||!H&&an||!Ve)return 1;if(!ye&&!ht&&!Hn&&x<T||Hn&&H&&Ve&&!ye&&!ht||Vt&&H&&Ve||!Pt&&Ve||!an)return-1}return 0}function Op(x,T,H){for(var ye=-1,Ve=x.criteria,ht=T.criteria,Pt=Ve.length,Vt=H.length;++ye<Pt;){var an=Zd(Ve[ye],ht[ye]);if(an){if(ye>=Vt)return an;var Hn=H[ye];return an*(Hn=="desc"?-1:1)}}return x.index-T.index}function dc(x,T,H,ye){for(var Ve=-1,ht=x.length,Pt=H.length,Vt=-1,an=T.length,Hn=Bi(ht-Pt,0),Xn=ln(an+Hn),mr=!ye;++Vt<an;)Xn[Vt]=T[Vt];for(;++Ve<Pt;)(mr||Ve<ht)&&(Xn[H[Ve]]=x[Ve]);for(;Hn--;)Xn[Vt++]=x[Ve++];return Xn}function hc(x,T,H,ye){for(var Ve=-1,ht=x.length,Pt=-1,Vt=H.length,an=-1,Hn=T.length,Xn=Bi(ht-Vt,0),mr=ln(Xn+Hn),$r=!ye;++Ve<Xn;)mr[Ve]=x[Ve];for(var xi=Ve;++an<Hn;)mr[xi+an]=T[an];for(;++Pt<Vt;)($r||Ve<ht)&&(mr[xi+H[Pt]]=x[Ve++]);return mr}function va(x,T){var H=-1,ye=x.length;for(T||(T=ln(ye));++H<ye;)T[H]=x[H];return T}function Hu(x,T,H,ye){var Ve=!H;H||(H={});for(var ht=-1,Pt=T.length;++ht<Pt;){var Vt=T[ht],an=ye?ye(H[Vt],x[Vt],Vt,H,x):t;an===t&&(an=x[Vt]),Ve?Hr(H,Vt,an):Ac(H,Vt,an)}return H}function Jc(x,T){return Hu(x,Ou(x),T)}function Vf(x,T){return Hu(x,Ym(x),T)}function ed(x,T){return function(H,ye){var Ve=So(H)?Nd:bs,ht=T?T():{};return Ve(H,x,bi(ye,2),ht)}}function CA(x){return In(function(T,H){var ye=-1,Ve=H.length,ht=Ve>1?H[Ve-1]:t,Pt=Ve>2?H[2]:t;for(ht=x.length>3&&typeof ht=="function"?(Ve--,ht):t,Pt&&B(H[0],H[1],Pt)&&(ht=Ve<3?t:ht,Ve=1),T=rs(T);++ye<Ve;){var Vt=H[ye];Vt&&x(T,Vt,ye,ht)}return T})}function pl(x,T){return function(H,ye){if(H==null)return H;if(!Rc(H))return x(H,ye);for(var Ve=H.length,ht=T?Ve:-1,Pt=rs(H);(T?ht--:++ht<Ve)&&ye(Pt[ht],ht,Pt)!==!1;);return H}}function ff(x){return function(T,H,ye){for(var Ve=-1,ht=rs(T),Pt=ye(T),Vt=Pt.length;Vt--;){var an=Pt[x?Vt:++Ve];if(H(ht[an],an,ht)===!1)break}return T}}function Hf(x,T,H){var ye=T&j,Ve=Th(x);function ht(){var Pt=this&&this!==Br&&this instanceof ht?Ve:x;return Pt.apply(ye?H:this,arguments)}return ht}function Zf(x){return function(T){T=v(T);var H=Qc(T)?Cu(T):t,ye=H?H[0]:T.charAt(0),Ve=H?Pa(H,1).join(""):T.slice(1);return ye[x]()+Ve}}function Xd(x){return function(T){return cd(Y_(mu(T).replace(ea,"")),x,"")}}function Th(x){return function(){var T=arguments;switch(T.length){case 0:return new x;case 1:return new x(T[0]);case 2:return new x(T[0],T[1]);case 3:return new x(T[0],T[1],T[2]);case 4:return new x(T[0],T[1],T[2],T[3]);case 5:return new x(T[0],T[1],T[2],T[3],T[4]);case 6:return new x(T[0],T[1],T[2],T[3],T[4],T[5]);case 7:return new x(T[0],T[1],T[2],T[3],T[4],T[5],T[6])}var H=DA(x.prototype),ye=x.apply(H,T);return Tl(ye)?ye:H}}function Jd(x,T,H){var ye=Th(x);function Ve(){for(var ht=arguments.length,Pt=ln(ht),Vt=ht,an=Dc(Ve);Vt--;)Pt[Vt]=arguments[Vt];var Hn=ht<3&&Pt[0]!==an&&Pt[ht-1]!==an?[]:la(Pt,an);if(ht-=Hn.length,ht<H)return Bl(x,T,Id,Ve.placeholder,t,Pt,Hn,t,t,H-ht);var Xn=this&&this!==Br&&this instanceof Ve?ye:x;return Qs(Xn,this,Pt)}return Ve}function eh(x){return function(T,H,ye){var Ve=rs(T);if(!Rc(T)){var ht=bi(H,3);T=fn(T),H=function(Vt){return ht(Ve[Vt],Vt,Ve)}}var Pt=x(T,H,ye);return Pt>-1?Ve[ht?T[Pt]:Pt]:t}}function th(x){return Kc(function(T){var H=T.length,ye=H,Ve=pi.prototype.thru;for(x&&T.reverse();ye--;){var ht=T[ye];if(typeof ht!="function")throw new Nu(a);if(Ve&&!Pt&&Td(ht)=="wrapper")var Pt=new pi([],!0)}for(ye=Pt?ye:H;++ye<H;){ht=T[ye];var Vt=Td(ht),an=Vt=="wrapper"?_f(ht):t;an&&Ae(an[0])&&an[1]==(G|ie|V|oe)&&!an[4].length&&an[9]==1?Pt=Pt[Td(an[0])].apply(Pt,an[3]):Pt=ht.length==1&&Ae(ht)?Pt[Vt]():Pt.thru(ht)}return function(){var Hn=arguments,Xn=Hn[0];if(Pt&&Hn.length==1&&So(Xn))return Pt.plant(Xn).value();for(var mr=0,$r=H?T[mr].apply(this,Hn):Xn;++mr<H;)$r=T[mr].call(this,$r);return $r}})}function Id(x,T,H,ye,Ve,ht,Pt,Vt,an,Hn){var Xn=T&G,mr=T&j,$r=T&q,xi=T&(ie|te),Ji=T&he,ls=$r?t:Th(x);function eo(){for(var ws=arguments.length,Os=ln(ws),qh=ws;qh--;)Os[qh]=arguments[qh];if(xi)var Fd=Dc(eo),Yh=bh(Os,Fd);if(ye&&(Os=dc(Os,ye,Ve,xi)),ht&&(Os=hc(Os,ht,Pt,xi)),ws-=Yh,xi&&ws<Hn){var rA=la(Os,Fd);return Bl(x,T,Id,eo.placeholder,H,Os,rA,Vt,an,Hn-ws)}var lp=mr?H:this,Sm=$r?lp[x]:x;return ws=Os.length,Vt?Os=wr(Os,Vt):Ji&&ws>1&&Os.reverse(),Xn&&an<ws&&(Os.length=an),this&&this!==Br&&this instanceof eo&&(Sm=ls||Th(Sm)),Sm.apply(lp,Os)}return eo}function pf(x,T){return function(H,ye){return gA(H,x,T(ye),{})}}function nh(x,T){return function(H,ye){var Ve;if(H===t&&ye===t)return T;if(H!==t&&(Ve=H),ye!==t){if(Ve===t)return ye;typeof H=="string"||typeof ye=="string"?(H=Xo(H),ye=Xo(ye)):(H=il(H),ye=il(ye)),Ve=x(H,ye)}return Ve}}function mf(x){return Kc(function(T){return T=Fs(T,xl(bi())),In(function(H){var ye=this;return x(T,function(Ve){return Qs(Ve,ye,H)})})})}function Xf(x,T){T=T===t?" ":Xo(T);var H=T.length;if(H<2)return H?yn(T,x):T;var ye=yn(T,IA(x/md(T)));return Qc(T)?Pa(Cu(ye),0,x).join(""):ye.slice(0,x)}function fm(x,T,H,ye){var Ve=T&j,ht=Th(x);function Pt(){for(var Vt=-1,an=arguments.length,Hn=-1,Xn=ye.length,mr=ln(Xn+an),$r=this&&this!==Br&&this instanceof Pt?ht:x;++Hn<Xn;)mr[Hn]=ye[Hn];for(;an--;)mr[Hn++]=arguments[++Vt];return Qs($r,Ve?H:this,mr)}return Pt}function kd(x){return function(T,H,ye){return ye&&typeof ye!="number"&&B(T,H,ye)&&(H=ye=t),T=jh(T),H===t?(H=T,T=0):H=jh(H),ye=ye===t?T<H?1:-1:jh(ye),Bn(T,H,ye,x)}}function gf(x){return function(T,H){return typeof T=="string"&&typeof H=="string"||(T=h(T),H=h(H)),x(T,H)}}function Bl(x,T,H,ye,Ve,ht,Pt,Vt,an,Hn){var Xn=T&ie,mr=Xn?Pt:t,$r=Xn?t:Pt,xi=Xn?ht:t,Ji=Xn?t:ht;T|=Xn?V:ne,T&=~(Xn?ne:V),T&Y||(T&=-4);var ls=[x,T,Ve,xi,mr,Ji,$r,Vt,an,Hn],eo=H.apply(t,ls);return Ae(x)&&Or(eo,ls),eo.placeholder=ye,Hi(eo,x,T)}function Au(x){var T=na[x];return function(H,ye){if(H=h(H),ye=ye==null?0:Ls(Po(ye),292),ye&&ic(H)){var Ve=(v(H)+"e").split("e"),ht=T(Ve[0]+"e"+(+Ve[1]+ye));return Ve=(v(ht)+"e").split("e"),+(Ve[0]+"e"+(+Ve[1]-ye))}return T(H)}}var Ip=dl&&1/rl(new dl([,-0]))[1]==Ze?function(x){return new dl(x)}:G3;function kp(x){return function(T){var H=ml(T);return H==Ut?Qd(T):H==Dn?Zo(T):vh(T,x(T))}}function Qo(x,T,H,ye,Ve,ht,Pt,Vt){var an=T&q;if(!an&&typeof x!="function")throw new Nu(a);var Hn=ye?ye.length:0;if(Hn||(T&=-97,ye=Ve=t),Pt=Pt===t?Pt:Bi(Po(Pt),0),Vt=Vt===t?Vt:Po(Vt),Hn-=Ve?Ve.length:0,T&ne){var Xn=ye,mr=Ve;ye=Ve=t}var $r=an?t:_f(x),xi=[x,T,H,ye,Ve,Xn,mr,ht,Pt,Vt];if($r&&Qt(xi,$r),x=xi[0],T=xi[1],H=xi[2],ye=xi[3],Ve=xi[4],Vt=xi[9]=xi[9]===t?an?0:x.length:Bi(xi[9]-Hn,0),!Vt&&T&(ie|te)&&(T&=-25),!T||T==j)var Ji=Hf(x,T,H);else T==ie||T==te?Ji=Jd(x,T,Vt):(T==V||T==(j|V))&&!Ve.length?Ji=fm(x,T,H,ye):Ji=Id.apply(t,xi);var ls=$r?ki:Or;return Hi(ls(Ji,xi),x,T)}function Ph(x,T,H,ye){return x===t||oh(x,Ul[H])&&!Oo.call(ye,H)?T:x}function cu(x,T,H,ye,Ve,ht){return Tl(x)&&Tl(T)&&(ht.set(T,x),mt(x,T,t,cu,ht),ht.delete(T)),x}function rh(x){return l0(x)?t:x}function Zu(x,T,H,ye,Ve,ht){var Pt=H&P,Vt=x.length,an=T.length;if(Vt!=an&&!(Pt&&an>Vt))return!1;var Hn=ht.get(x),Xn=ht.get(T);if(Hn&&Xn)return Hn==T&&Xn==x;var mr=-1,$r=!0,xi=H&z?new Ic:t;for(ht.set(x,T),ht.set(T,x);++mr<Vt;){var Ji=x[mr],ls=T[mr];if(ye)var eo=Pt?ye(ls,Ji,mr,T,x,ht):ye(Ji,ls,mr,x,T,ht);if(eo!==t){if(eo)continue;$r=!1;break}if(xi){if(!bc(T,function(ws,Os){if(!zu(xi,Os)&&(Ji===ws||Ve(Ji,ws,H,ye,ht)))return xi.push(Os)})){$r=!1;break}}else if(!(Ji===ls||Ve(Ji,ls,H,ye,ht))){$r=!1;break}}return ht.delete(x),ht.delete(T),$r}function yf(x,T,H,ye,Ve,ht,Pt){switch(H){case ce:if(x.byteLength!=T.byteLength||x.byteOffset!=T.byteOffset)return!1;x=x.buffer,T=T.buffer;case Qe:return!(x.byteLength!=T.byteLength||!ht(new qc(x),new qc(T)));case Ue:case Pe:case rn:return oh(+x,+T);case it:return x.name==T.name&&x.message==T.message;case rr:case pn:return x==T+"";case Ut:var Vt=Qd;case Dn:var an=ye&P;if(Vt||(Vt=rl),x.size!=T.size&&!an)return!1;var Hn=Pt.get(x);if(Hn)return Hn==T;ye|=z,Pt.set(x,T);var Xn=Zu(Vt(x),Vt(T),ye,Ve,ht,Pt);return Pt.delete(x),Xn;case Zn:if(xu)return xu.call(x)==xu.call(T)}return!1}function Jf(x,T,H,ye,Ve,ht){var Pt=H&P,Vt=vf(x),an=Vt.length,Hn=vf(T),Xn=Hn.length;if(an!=Xn&&!Pt)return!1;for(var mr=an;mr--;){var $r=Vt[mr];if(!(Pt?$r in T:Oo.call(T,$r)))return!1}var xi=ht.get(x),Ji=ht.get(T);if(xi&&Ji)return xi==T&&Ji==x;var ls=!0;ht.set(x,T),ht.set(T,x);for(var eo=Pt;++mr<an;){$r=Vt[mr];var ws=x[$r],Os=T[$r];if(ye)var qh=Pt?ye(Os,ws,$r,T,x,ht):ye(ws,Os,$r,x,T,ht);if(!(qh===t?ws===Os||Ve(ws,Os,H,ye,ht):qh)){ls=!1;break}eo||(eo=$r=="constructor")}if(ls&&!eo){var Fd=x.constructor,Yh=T.constructor;Fd!=Yh&&"constructor"in x&&"constructor"in T&&!(typeof Fd=="function"&&Fd instanceof Fd&&typeof Yh=="function"&&Yh instanceof Yh)&&(ls=!1)}return ht.delete(x),ht.delete(T),ls}function Kc(x){return zr(sr(x,t,pc),x+"")}function vf(x){return ya(x,fn,Ou)}function Cf(x){return ya(x,jn,Ym)}var _f=xd?function(x){return xd.get(x)}:G3;function Td(x){for(var T=x.name+"",H=Zc[T],ye=Oo.call(Zc,T)?H.length:0;ye--;){var Ve=H[ye],ht=Ve.func;if(ht==null||ht==x)return Ve.name}return T}function Dc(x){var T=Oo.call(ot,"placeholder")?ot:x;return T.placeholder}function bi(){var x=ot.iteratee||ap;return x=x===ap?xe:x,arguments.length?x(arguments[0],arguments[1]):x}function fc(x,T){var H=x.__data__;return Z(T)?H[typeof T=="string"?"string":"hash"]:H.map}function Uo(x){for(var T=fn(x),H=T.length;H--;){var ye=T[H],Ve=x[ye];T[H]=[ye,Ve,yt(Ve)]}return T}function Pd(x,T){var H=Ll(x,T);return N(H)?H:t}function Tp(x){var T=Oo.call(x,$c),H=x[$c];try{x[$c]=t;var ye=!0}catch{}var Ve=eu.call(x);return ye&&(T?x[$c]=H:delete x[$c]),Ve}var Ou=Yd?function(x){return x==null?[]:(x=rs(x),Uu(Yd(x),function(T){return Cd.call(x,T)}))}:Q3,Ym=Yd?function(x){for(var T=[];x;)BA(T,Ou(x)),x=Wa(x);return T}:Q3,ml=Ys;(TA&&ml(new TA(new ArrayBuffer(1)))!=ce||cl&&ml(new cl)!=Ut||hA&&ml(hA.resolve())!=qn||dl&&ml(new dl)!=Dn||oc&&ml(new oc)!=vr)&&(ml=function(x){var T=Ys(x),H=T==_n?x.constructor:t,ye=H?$a(H):"";if(ye)switch(ye){case PA:return ce;case sc:return Ut;case Yu:return qn;case $u:return Dn;case KA:return vr}return T});function pm(x,T,H){for(var ye=-1,Ve=H.length;++ye<Ve;){var ht=H[ye],Pt=ht.size;switch(ht.type){case"drop":x+=Pt;break;case"dropRight":T-=Pt;break;case"take":T=Ls(T,x+Pt);break;case"takeRight":x=Bi(x,T-Pt);break}}return{start:x,end:T}}function Ka(x){var T=x.match(Ur);return T?T[1].split(Dr):[]}function ep(x,T,H){T=Aa(T,x);for(var ye=-1,Ve=T.length,ht=!1;++ye<Ve;){var Pt=Ca(T[ye]);if(!(ht=x!=null&&H(x,Pt)))break;x=x[Pt]}return ht||++ye!=Ve?ht:(Ve=x==null?0:x.length,!!Ve&&c1(Ve)&&O(Pt,Ve)&&(So(x)||rd(x)))}function tp(x){var T=x.length,H=new x.constructor(T);return T&&typeof x[0]=="string"&&Oo.call(x,"index")&&(H.index=x.index,H.input=x.input),H}function Nl(x){return typeof x.constructor=="function"&&!je(x)?DA(Wa(x)):{}}function ih(x,T,H){var ye=x.constructor;switch(T){case Qe:return ss(x);case Ue:case Pe:return new ye(+x);case ce:return Bu(x,H);case fe:case nt:case St:case Ht:case sn:case tr:case Oe:case se:case ve:return hf(x,H);case Ut:return new ye;case rn:case pn:return new ye(x);case rr:return $s(x);case Dn:return new ye;case Zn:return Hd(x)}}function A(x,T){var H=T.length;if(!H)return x;var ye=H-1;return T[ye]=(H>1?"& ":"")+T[ye],T=T.join(H>2?", ":" "),x.replace(Xr,`{
/* [wrapped with `+T+`] */
`)}function y(x){return So(x)||rd(x)||!!(Bh&&x&&x[Bh])}function O(x,T){var H=typeof x;return T=T??Je,!!T&&(H=="number"||H!="symbol"&&Sa.test(x))&&x>-1&&x%1==0&&x<T}function B(x,T,H){if(!Tl(H))return!1;var ye=typeof T;return(ye=="number"?Rc(H)&&O(T,H.length):ye=="string"&&T in H)?oh(H[T],x):!1}function R(x,T){if(So(x))return!1;var H=typeof x;return H=="number"||H=="symbol"||H=="boolean"||x==null||id(x)?!0:On.test(x)||!Tn.test(x)||T!=null&&x in rs(T)}function Z(x){var T=typeof x;return T=="string"||T=="number"||T=="symbol"||T=="boolean"?x!=="__proto__":x===null}function Ae(x){var T=Td(x),H=ot[T];if(typeof H!="function"||!(T in ii.prototype))return!1;if(x===H)return!0;var ye=_f(H);return!!ye&&x===ye[0]}function Ce(x){return!!yd&&yd in x}var Te=Wu?sh:q3;function je(x){var T=x&&x.constructor,H=typeof T=="function"&&T.prototype||Ul;return x===H}function yt(x){return x===x&&!Tl(x)}function Mt(x,T){return function(H){return H==null?!1:H[x]===T&&(T!==t||x in rs(H))}}function en(x){var T=_r(x,function(ye){return H.size===g&&H.clear(),ye}),H=T.cache;return T}function Qt(x,T){var H=x[1],ye=T[1],Ve=H|ye,ht=Ve<(j|q|G),Pt=ye==G&&H==ie||ye==G&&H==oe&&x[7].length<=T[8]||ye==(G|oe)&&T[7].length<=T[8]&&H==ie;if(!(ht||Pt))return x;ye&j&&(x[2]=T[2],Ve|=H&j?0:Y);var Vt=T[3];if(Vt){var an=x[3];x[3]=an?dc(an,Vt,T[4]):Vt,x[4]=an?la(x[3],b):T[4]}return Vt=T[5],Vt&&(an=x[5],x[5]=an?hc(an,Vt,T[6]):Vt,x[6]=an?la(x[5],b):T[6]),Vt=T[7],Vt&&(x[7]=Vt),ye&G&&(x[8]=x[8]==null?T[8]:Ls(x[8],T[8])),x[9]==null&&(x[9]=T[9]),x[0]=T[0],x[1]=Ve,x}function wn(x){var T=[];if(x!=null)for(var H in rs(x))T.push(H);return T}function Ln(x){return eu.call(x)}function sr(x,T,H){return T=Bi(T===t?x.length-1:T,0),function(){for(var ye=arguments,Ve=-1,ht=Bi(ye.length-T,0),Pt=ln(ht);++Ve<ht;)Pt[Ve]=ye[T+Ve];Ve=-1;for(var Vt=ln(T+1);++Ve<T;)Vt[Ve]=ye[Ve];return Vt[T]=H(Pt),Qs(x,this,Vt)}}function Vn(x,T){return T.length<2?x:Eu(x,Mi(T,0,-1))}function wr(x,T){for(var H=x.length,ye=Ls(T.length,H),Ve=va(x);ye--;){var ht=T[ye];x[ye]=O(ht,H)?Ve[ht]:t}return x}function yr(x,T){if(!(T==="constructor"&&typeof x[T]=="function")&&T!="__proto__")return x[T]}var Or=zo(ki),ni=Mc||function(x,T){return Br.setTimeout(x,T)},zr=zo(Wi);function Hi(x,T,H){var ye=T+"";return zr(x,A(ye,_a(Ka(ye),H)))}function zo(x){var T=0,H=0;return function(){var ye=dA(),Ve=Se-(ye-H);if(H=ye,Ve>0){if(++T>=me)return arguments[0]}else T=0;return x.apply(t,arguments)}}function Ya(x,T){var H=-1,ye=x.length,Ve=ye-1;for(T=T===t?ye:T;++H<T;){var ht=Mn(H,Ve),Pt=x[ht];x[ht]=x[H],x[H]=Pt}return x.length=T,x}var ia=en(function(x){var T=[];return x.charCodeAt(0)===46&&T.push(""),x.replace(gr,function(H,ye,Ve,ht){T.push(Ve?ht.replace(Ma,"$1"):ye||H)}),T});function Ca(x){if(typeof x=="string"||id(x))return x;var T=x+"";return T=="0"&&1/x==-1/0?"-0":T}function $a(x){if(x!=null){try{return ao.call(x)}catch{}try{return x+""}catch{}}return""}function _a(x,T){return ma(Yt,function(H){var ye="_."+H[0];T&H[1]&&!Wd(x,ye)&&x.push(ye)}),x.sort()}function du(x){if(x instanceof ii)return x.clone();var T=new pi(x.__wrapped__,x.__chain__);return T.__actions__=va(x.__actions__),T.__index__=x.__index__,T.__values__=x.__values__,T}function Da(x,T,H){(H?B(x,T,H):T===t)?T=1:T=Bi(Po(T),0);var ye=x==null?0:x.length;if(!ye||T<1)return[];for(var Ve=0,ht=0,Pt=ln(IA(ye/T));Ve<ye;)Pt[ht++]=Mi(x,Ve,Ve+=T);return Pt}function Ra(x){for(var T=-1,H=x==null?0:x.length,ye=0,Ve=[];++T<H;){var ht=x[T];ht&&(Ve[ye++]=ht)}return Ve}function as(){var x=arguments.length;if(!x)return[];for(var T=ln(x-1),H=arguments[0],ye=x;ye--;)T[ye-1]=arguments[ye];return BA(So(H)?va(H):[H],zs(T,1))}var yi=In(function(x,T){return Gl(x)?cc(x,zs(T,1,Gl,!0)):[]}),ps=In(function(x,T){var H=WA(T);return Gl(H)&&(H=t),Gl(x)?cc(x,zs(T,1,Gl,!0),bi(H,2)):[]}),js=In(function(x,T){var H=WA(T);return Gl(H)&&(H=t),Gl(x)?cc(x,zs(T,1,Gl,!0),t,H):[]});function ca(x,T,H){var ye=x==null?0:x.length;return ye?(T=H||T===t?1:Po(T),Mi(x,T<0?0:T,ye)):[]}function Es(x,T,H){var ye=x==null?0:x.length;return ye?(T=H||T===t?1:Po(T),T=ye-T,Mi(x,0,T<0?0:T)):[]}function Iu(x,T){return x&&x.length?lu(x,bi(T,3),!0,!0):[]}function Co(x,T){return x&&x.length?lu(x,bi(T,3),!0):[]}function Kh(x,T,H,ye){var Ve=x==null?0:x.length;return Ve?(H&&typeof H!="number"&&B(x,T,H)&&(H=0,ye=Ve),Bd(x,T,H,ye)):[]}function Wl(x,T,H){var ye=x==null?0:x.length;if(!ye)return-1;var Ve=H==null?0:Po(H);return Ve<0&&(Ve=Bi(ye+Ve,0)),JA(x,bi(T,3),Ve)}function Xu(x,T,H){var ye=x==null?0:x.length;if(!ye)return-1;var Ve=ye-1;return H!==t&&(Ve=Po(H),Ve=H<0?Bi(ye+Ve,0):Ls(Ve,ye-1)),JA(x,bi(T,3),Ve,!0)}function pc(x){var T=x==null?0:x.length;return T?zs(x,1):[]}function gl(x){var T=x==null?0:x.length;return T?zs(x,Ze):[]}function Ol(x,T){var H=x==null?0:x.length;return H?(T=T===t?1:Po(T),zs(x,T)):[]}function bf(x){for(var T=-1,H=x==null?0:x.length,ye={};++T<H;){var Ve=x[T];ye[Ve[0]]=Ve[1]}return ye}function xf(x){return x&&x.length?x[0]:t}function Dh(x,T,H){var ye=x==null?0:x.length;if(!ye)return-1;var Ve=H==null?0:Po(H);return Ve<0&&(Ve=Bi(ye+Ve,0)),ta(x,T,Ve)}function $m(x){var T=x==null?0:x.length;return T?Mi(x,0,-1):[]}var np=In(function(x){var T=Fs(x,vA);return T.length&&T[0]===x[0]?Pc(T):[]}),Rh=In(function(x){var T=WA(x),H=Fs(x,vA);return T===WA(H)?T=t:H.pop(),H.length&&H[0]===x[0]?Pc(H,bi(T,2)):[]}),Vm=In(function(x){var T=WA(x),H=Fs(x,vA);return T=typeof T=="function"?T:t,T&&H.pop(),H.length&&H[0]===x[0]?Pc(H,t,T):[]});function wf(x,T){return x==null?"":Vc.call(x,T)}function WA(x){var T=x==null?0:x.length;return T?x[T-1]:t}function mm(x,T,H){var ye=x==null?0:x.length;if(!ye)return-1;var Ve=ye;return H!==t&&(Ve=Po(H),Ve=Ve<0?Bi(ye+Ve,0):Ls(Ve,ye-1)),T===T?hm(x,T,Ve):JA(x,gh,Ve,!0)}function Q0(x,T){return x&&x.length?Bt(x,Po(T)):t}var Hm=In(Pp);function Pp(x,T){return x&&x.length&&T&&T.length?nn(x,T):x}function Ju(x,T,H){return x&&x.length&&T&&T.length?nn(x,T,bi(H,2)):x}function Fh(x,T,H){return x&&x.length&&T&&T.length?nn(x,T,t,H):x}var td=Kc(function(x,T){var H=x==null?0:x.length,ye=UA(x,T);return Zt(x,Fs(T,function(Ve){return O(Ve,H)?+Ve:Ve}).sort(Zd)),ye});function GA(x,T){var H=[];if(!(x&&x.length))return H;var ye=-1,Ve=[],ht=x.length;for(T=bi(T,3);++ye<ht;){var Pt=x[ye];T(Pt,ye,x)&&(H.push(Pt),Ve.push(ye))}return Zt(x,Ve),H}function Zm(x){return x==null?x:Sc.call(x)}function Kp(x,T,H){var ye=x==null?0:x.length;return ye?(H&&typeof H!="number"&&B(x,T,H)?(T=0,H=ye):(T=T==null?0:Po(T),H=H===t?ye:Po(H)),Mi(x,T,H)):[]}function q0(x,T){return ko(x,T)}function t1(x,T,H){return To(x,T,bi(H,2))}function Mf(x,T){var H=x==null?0:x.length;if(H){var ye=ko(x,T);if(ye<H&&oh(x[ye],T))return ye}return-1}function n1(x,T){return ko(x,T,!0)}function Y0(x,T,H){return To(x,T,bi(H,2),!0)}function Sf(x,T){var H=x==null?0:x.length;if(H){var ye=ko(x,T,!0)-1;if(oh(x[ye],T))return ye}return-1}function $0(x){return x&&x.length?vo(x):[]}function rp(x,T){return x&&x.length?vo(x,bi(T,2)):[]}function Dp(x){var T=x==null?0:x.length;return T?Mi(x,1,T):[]}function V0(x,T,H){return x&&x.length?(T=H||T===t?1:Po(T),Mi(x,0,T<0?0:T)):[]}function gm(x,T,H){var ye=x==null?0:x.length;return ye?(T=H||T===t?1:Po(T),T=ye-T,Mi(x,T<0?0:T,ye)):[]}function ym(x,T){return x&&x.length?lu(x,bi(T,3),!1,!0):[]}function Il(x,T){return x&&x.length?lu(x,bi(T,3)):[]}var H0=In(function(x){return Jo(zs(x,1,Gl,!0))}),r1=In(function(x){var T=WA(x);return Gl(T)&&(T=t),Jo(zs(x,1,Gl,!0),bi(T,2))}),Z0=In(function(x){var T=WA(x);return T=typeof T=="function"?T:t,Jo(zs(x,1,Gl,!0),t,T)});function Lh(x){return x&&x.length?Jo(x):[]}function X0(x,T){return x&&x.length?Jo(x,bi(T,2)):[]}function Rp(x,T){return T=typeof T=="function"?T:t,x&&x.length?Jo(x,t,T):[]}function Xm(x){if(!(x&&x.length))return[];var T=0;return x=Uu(x,function(H){if(Gl(H))return T=Bi(H.length,T),!0}),lf(T,function(H){return Fs(x,sf(H))})}function sl(x,T){if(!(x&&x.length))return[];var H=Xm(x);return T==null?H:Fs(H,function(ye){return Qs(T,t,ye)})}var sv=In(function(x,T){return Gl(x)?cc(x,T):[]}),J0=In(function(x){return Sl(Uu(x,Gl))}),QA=In(function(x){var T=WA(x);return Gl(T)&&(T=t),Sl(Uu(x,Gl),bi(T,2))}),eg=In(function(x){var T=WA(x);return T=typeof T=="function"?T:t,Sl(Uu(x,Gl),t,T)}),tg=In(Xm);function Uh(x,T){return jA(x||[],T||[],Ac)}function Jm(x,T){return jA(x||[],T||[],pr)}var _A=In(function(x){var T=x.length,H=T>1?x[T-1]:t;return H=typeof H=="function"?(x.pop(),H):t,sl(x,H)});function zh(x){var T=ot(x);return T.__chain__=!0,T}function e0(x,T){return T(x),x}function mc(x,T){return T(x)}var t0=Kc(function(x){var T=x.length,H=T?x[0]:0,ye=this.__wrapped__,Ve=function(ht){return UA(ht,x)};return T>1||this.__actions__.length||!(ye instanceof ii)||!O(H)?this.thru(Ve):(ye=ye.slice(H,+H+(T?1:0)),ye.__actions__.push({func:mc,args:[Ve],thisArg:t}),new pi(ye,this.__chain__).thru(function(ht){return T&&!ht.length&&ht.push(t),ht}))});function ip(){return zh(this)}function vm(){return new pi(this.value(),this.__chain__)}function n0(){this.__values__===t&&(this.__values__=f1(this.value()));var x=this.__index__>=this.__values__.length,T=x?t:this.__values__[this.__index__++];return{done:x,value:T}}function ng(){return this}function i1(x){for(var T,H=this;H instanceof Io;){var ye=du(H);ye.__index__=0,ye.__values__=t,T?Ve.__wrapped__=ye:T=ye;var Ve=ye;H=H.__wrapped__}return Ve.__wrapped__=x,T}function r0(){var x=this.__wrapped__;if(x instanceof ii){var T=x;return this.__actions__.length&&(T=new ii(this)),T=T.reverse(),T.__actions__.push({func:mc,args:[Zm],thisArg:t}),new pi(T,this.__chain__)}return this.thru(Zm)}function rg(){return Ta(this.__wrapped__,this.__actions__)}var i0=ed(function(x,T,H){Oo.call(x,H)?++x[H]:Hr(x,H,1)});function o1(x,T,H){var ye=So(x)?Wc:qs;return H&&B(x,T,H)&&(T=t),ye(x,bi(T,3))}function Cm(x,T){var H=So(x)?Uu:mA;return H(x,bi(T,3))}var o0=eh(Wl),s1=eh(Xu);function ig(x,T){return zs(Lp(x,T),1)}function a1(x,T){return zs(Lp(x,T),Ze)}function og(x,T,H){return H=H===t?1:Po(H),zs(Lp(x,T),H)}function Fp(x,T){var H=So(x)?ma:wl;return H(x,bi(T,3))}function _m(x,T){var H=So(x)?bl:gs;return H(x,bi(T,3))}var Ef=ed(function(x,T,H){Oo.call(x,H)?x[H].push(T):Hr(x,H,[T])});function Kd(x,T,H,ye){x=Rc(x)?x:vl(x),H=H&&!ye?Po(H):0;var Ve=x.length;return H<0&&(H=Bi(Ve+H,0)),u0(x)?H<=Ve&&x.indexOf(T,H)>-1:!!Ve&&ta(x,T,H)>-1}var Bf=In(function(x,T,H){var ye=-1,Ve=typeof T=="function",ht=Rc(x)?ln(x.length):[];return wl(x,function(Pt){ht[++ye]=Ve?Qs(T,Pt,H):Ml(Pt,T,H)}),ht}),bm=ed(function(x,T,H){Hr(x,H,T)});function Lp(x,T){var H=So(x)?Fs:Xe;return H(x,bi(T,3))}function xm(x,T,H,ye){return x==null?[]:(So(T)||(T=T==null?[]:[T]),H=ye?t:H,So(H)||(H=H==null?[]:[H]),kt(x,T,H))}var av=ed(function(x,T,H){x[H?0:1].push(T)},function(){return[[],[]]});function op(x,T,H){var ye=So(x)?cd:af,Ve=arguments.length<3;return ye(x,bi(T,4),H,Ve,wl)}function m(x,T,H){var ye=So(x)?Gd:af,Ve=arguments.length<3;return ye(x,bi(T,4),H,Ve,gs)}function C(x,T){var H=So(x)?Uu:mA;return H(x,si(bi(T,3)))}function F(x){var T=So(x)?wu:Nn;return T(x)}function Q(x,T,H){(H?B(x,T,H):T===t)?T=1:T=Po(T);var ye=So(x)?uc:Fn;return ye(x,T)}function le(x){var T=So(x)?Vd:Lo;return T(x)}function ge(x){if(x==null)return 0;if(Rc(x))return u0(x)?md(x):x.length;var T=ml(x);return T==Ut||T==Dn?x.size:ke(x).length}function tt(x,T,H){var ye=So(x)?bc:fs;return H&&B(x,T,H)&&(T=t),ye(x,bi(T,3))}var It=In(function(x,T){if(x==null)return[];var H=T.length;return H>1&&B(x,T[0],T[1])?T=[]:H>2&&B(T[0],T[1],T[2])&&(T=[T[0]]),kt(x,zs(T,1),[])}),Wt=ds||function(){return Br.Date.now()};function xn(x,T){if(typeof T!="function")throw new Nu(a);return x=Po(x),function(){if(--x<1)return T.apply(this,arguments)}}function Ar(x,T,H){return T=H?t:T,T=x&&T==null?x.length:T,Qo(x,G,t,t,t,t,T)}function Cr(x,T){var H;if(typeof T!="function")throw new Nu(a);return x=Po(x),function(){return--x>0&&(H=T.apply(this,arguments)),x<=1&&(T=t),H}}var ir=In(function(x,T,H){var ye=j;if(H.length){var Ve=la(H,Dc(ir));ye|=V}return Qo(x,ye,T,H,Ve)}),qr=In(function(x,T,H){var ye=j|q;if(H.length){var Ve=la(H,Dc(qr));ye|=V}return Qo(T,ye,x,H,Ve)});function oi(x,T,H){T=H?t:T;var ye=Qo(x,ie,t,t,t,t,t,T);return ye.placeholder=oi.placeholder,ye}function ai(x,T,H){T=H?t:T;var ye=Qo(x,te,t,t,t,t,t,T);return ye.placeholder=ai.placeholder,ye}function yl(x,T,H){var ye,Ve,ht,Pt,Vt,an,Hn=0,Xn=!1,mr=!1,$r=!0;if(typeof x!="function")throw new Nu(a);T=h(T)||0,Tl(H)&&(Xn=!!H.leading,mr="maxWait"in H,ht=mr?Bi(h(H.maxWait)||0,T):ht,$r="trailing"in H?!!H.trailing:$r);function xi(rA){var lp=ye,Sm=Ve;return ye=Ve=t,Hn=rA,Pt=x.apply(Sm,lp),Pt}function Ji(rA){return Hn=rA,Vt=ni(ws,T),Xn?xi(rA):Pt}function ls(rA){var lp=rA-an,Sm=rA-Hn,vI=T-lp;return mr?Ls(vI,ht-Sm):vI}function eo(rA){var lp=rA-an,Sm=rA-Hn;return an===t||lp>=T||lp<0||mr&&Sm>=ht}function ws(){var rA=Wt();if(eo(rA))return Os(rA);Vt=ni(ws,ls(rA))}function Os(rA){return Vt=t,$r&&ye?xi(rA):(ye=Ve=t,Pt)}function qh(){Vt!==t&&uu(Vt),Hn=0,ye=an=Ve=Vt=t}function Fd(){return Vt===t?Pt:Os(Wt())}function Yh(){var rA=Wt(),lp=eo(rA);if(ye=arguments,Ve=this,an=rA,lp){if(Vt===t)return Ji(an);if(mr)return uu(Vt),Vt=ni(ws,T),xi(an)}return Vt===t&&(Vt=ni(ws,T)),Pt}return Yh.cancel=qh,Yh.flush=Fd,Yh}var cn=In(function(x,T){return pA(x,1,T)}),Xt=In(function(x,T,H){return pA(x,h(T)||0,H)});function dn(x){return Qo(x,he)}function _r(x,T){if(typeof x!="function"||T!=null&&typeof T!="function")throw new Nu(a);var H=function(){var ye=arguments,Ve=T?T.apply(this,ye):ye[0],ht=H.cache;if(ht.has(Ve))return ht.get(Ve);var Pt=x.apply(this,ye);return H.cache=ht.set(Ve,Pt)||ht,Pt};return H.cache=new(_r.Cache||nu),H}_r.Cache=nu;function si(x){if(typeof x!="function")throw new Nu(a);return function(){var T=arguments;switch(T.length){case 0:return!x.call(this);case 1:return!x.call(this,T[0]);case 2:return!x.call(this,T[0],T[1]);case 3:return!x.call(this,T[0],T[1],T[2])}return!x.apply(this,T)}}function Oi(x){return Cr(2,x)}var Ii=El(function(x,T){T=T.length==1&&So(T[0])?Fs(T[0],xl(bi())):Fs(zs(T,1),xl(bi()));var H=T.length;return In(function(ye){for(var Ve=-1,ht=Ls(ye.length,H);++Ve<ht;)ye[Ve]=T[Ve].call(this,ye[Ve]);return Qs(x,this,ye)})}),ji=In(function(x,T){var H=la(T,Dc(ji));return Qo(x,V,t,T,H)}),kl=In(function(x,T){var H=la(T,Dc(kl));return Qo(x,ne,t,T,H)}),xs=Kc(function(x,T){return Qo(x,oe,t,t,t,T)});function nd(x,T){if(typeof x!="function")throw new Nu(a);return T=T===t?T:Po(T),In(x,T)}function l1(x,T){if(typeof x!="function")throw new Nu(a);return T=T==null?0:Bi(Po(T),0),In(function(H){var ye=H[T],Ve=Pa(H,0,T);return ye&&BA(Ve,ye),Qs(x,this,Ve)})}function lv(x,T,H){var ye=!0,Ve=!0;if(typeof x!="function")throw new Nu(a);return Tl(H)&&(ye="leading"in H?!!H.leading:ye,Ve="trailing"in H?!!H.trailing:Ve),yl(x,T,{leading:ye,maxWait:T,trailing:Ve})}function w_(x){return Ar(x,1)}function Dd(x,T){return ji(NA(T),x)}function s0(){if(!arguments.length)return[];var x=arguments[0];return So(x)?x:[x]}function M_(x){return fl(x,I)}function S_(x,T){return T=typeof T=="function"?T:t,fl(x,I,T)}function E_(x){return fl(x,E|I)}function B_(x,T){return T=typeof T=="function"?T:t,fl(x,E|I,T)}function O_(x,T){return T==null||Ed(x,T,fn(T))}function oh(x,T){return x===T||x!==x&&T!==T}var T3=gf(ou),I_=gf(function(x,T){return x>=T}),rd=Od(function(){return arguments}())?Od:function(x){return Fa(x)&&Oo.call(x,"callee")&&!Cd.call(x,"callee")},So=ln.isArray,k_=Mo?xl(Mo):k;function Rc(x){return x!=null&&c1(x.length)&&!sh(x)}function Gl(x){return Fa(x)&&Rc(x)}function P3(x){return x===!0||x===!1||Fa(x)&&Ys(x)==Ue}var Up=_d||q3,T_=Di?xl(Di):l;function sg(x){return Fa(x)&&x.nodeType===1&&!l0(x)}function P_(x){if(x==null)return!0;if(Rc(x)&&(So(x)||typeof x=="string"||typeof x.splice=="function"||Up(x)||Of(x)||rd(x)))return!x.length;var T=ml(x);if(T==Ut||T==Dn)return!x.size;if(je(x))return!ke(x).length;for(var H in x)if(Oo.call(x,H))return!1;return!0}function u1(x,T){return c(x,T)}function K_(x,T,H){H=typeof H=="function"?H:t;var ye=H?H(x,T):t;return ye===t?c(x,T,t,H):!!ye}function a0(x){if(!Fa(x))return!1;var T=Ys(x);return T==it||T==Be||typeof x.message=="string"&&typeof x.name=="string"&&!l0(x)}function A1(x){return typeof x=="number"&&ic(x)}function sh(x){if(!Tl(x))return!1;var T=Ys(x);return T==_t||T==ft||T==Kt||T==tn}function D_(x){return typeof x=="number"&&x==Po(x)}function c1(x){return typeof x=="number"&&x>-1&&x%1==0&&x<=Je}function Tl(x){var T=typeof x;return x!=null&&(T=="object"||T=="function")}function Fa(x){return x!=null&&typeof x=="object"}var eA=cs?xl(cs):w;function zp(x,T){return x===T||K(x,T,Uo(T))}function uv(x,T,H){return H=typeof H=="function"?H:t,K(x,T,Uo(T),H)}function R_(x){return cv(x)&&x!=+x}function F_(x){if(Te(x))throw new Ei(s);return N(x)}function Av(x){return x===null}function K3(x){return x==null}function cv(x){return typeof x=="number"||Fa(x)&&Ys(x)==rn}function l0(x){if(!Fa(x)||Ys(x)!=_n)return!1;var T=Wa(x);if(T===null)return!0;var H=Oo.call(T,"constructor")&&T.constructor;return typeof H=="function"&&H instanceof H&&ao.call(H)==AA}var dv=pa?xl(pa):$;function L_(x){return D_(x)&&x>=-9007199254740991&&x<=Je}var d1=Na?xl(Na):ee;function u0(x){return typeof x=="string"||!So(x)&&Fa(x)&&Ys(x)==pn}function id(x){return typeof x=="symbol"||Fa(x)&&Ys(x)==Zn}var Of=yu?xl(yu):ae;function hv(x){return x===t}function U_(x){return Fa(x)&&ml(x)==vr}function fv(x){return Fa(x)&&Ys(x)==Jn}var h1=gf($e),ag=gf(function(x,T){return x<=T});function f1(x){if(!x)return[];if(Rc(x))return u0(x)?Cu(x):va(x);if(Gu&&x[Gu])return Af(x[Gu]());var T=ml(x),H=T==Ut?Qd:T==Dn?rl:vl;return H(x)}function jh(x){if(!x)return x===0?x:0;if(x=h(x),x===Ze||x===-1/0){var T=x<0?-1:1;return T*We}return x===x?x:0}function Po(x){var T=jh(x),H=T%1;return T===T?H?T-H:T:0}function z_(x){return x?Mu(Po(x),0,Fe):0}function h(x){if(typeof x=="number")return x;if(id(x))return Me;if(Tl(x)){var T=typeof x.valueOf=="function"?x.valueOf():x;x=Tl(T)?T+"":T}if(typeof x!="string")return x===0?x:+x;x=Ch(x);var H=Do.test(x);return H||ja.test(x)?$n(x.slice(2),H?2:8):io.test(x)?Me:+x}function u(x){return Hu(x,jn(x))}function f(x){return x?Mu(Po(x),-9007199254740991,Je):x===0?x:0}function v(x){return x==null?"":Xo(x)}var M=CA(function(x,T){if(je(T)||Rc(T)){Hu(T,fn(T),x);return}for(var H in T)Oo.call(T,H)&&Ac(x,H,T[H])}),D=CA(function(x,T){Hu(T,jn(T),x)}),U=CA(function(x,T,H,ye){Hu(T,jn(T),x,ye)}),W=CA(function(x,T,H,ye){Hu(T,fn(T),x,ye)}),X=Kc(UA);function re(x,T){var H=DA(x);return T==null?H:hs(H,T)}var de=In(function(x,T){x=rs(x);var H=-1,ye=T.length,Ve=ye>2?T[2]:t;for(Ve&&B(T[0],T[1],Ve)&&(ye=1);++H<ye;)for(var ht=T[H],Pt=jn(ht),Vt=-1,an=Pt.length;++Vt<an;){var Hn=Pt[Vt],Xn=x[Hn];(Xn===t||oh(Xn,Ul[Hn])&&!Oo.call(x,Hn))&&(x[Hn]=ht[Hn])}return x}),_e=In(function(x){return x.push(t,cu),Qs(jr,t,x)});function Re(x,T){return Bp(x,bi(T,3),qa)}function ze(x,T){return Bp(x,bi(T,3),Vu)}function Ge(x,T){return x==null?x:kc(x,bi(T,3),jn)}function et(x,T){return x==null?x:Su(x,bi(T,3),jn)}function At(x,T){return x&&qa(x,bi(T,3))}function Ct(x,T){return x&&Vu(x,bi(T,3))}function Nt(x){return x==null?[]:Tc(x,fn(x))}function Et(x){return x==null?[]:Tc(x,jn(x))}function Le(x,T,H){var ye=x==null?t:Eu(x,T);return ye===t?H:ye}function lt(x,T){return x!=null&&ep(x,T,su)}function Ot(x,T){return x!=null&&ep(x,T,zA)}var An=pf(function(x,T,H){T!=null&&typeof T.toString!="function"&&(T=eu.call(T)),x[T]=H},yv(Ha)),zn=pf(function(x,T,H){T!=null&&typeof T.toString!="function"&&(T=eu.call(T)),Oo.call(x,T)?x[T].push(H):x[T]=[H]},bi),Cn=In(Ml);function fn(x){return Rc(x)?Fo(x):ke(x)}function jn(x){return Rc(x)?Fo(x,!0):Ke(x)}function Wn(x,T){var H={};return T=bi(T,3),qa(x,function(ye,Ve,ht){Hr(H,T(ye,Ve,ht),ye)}),H}function cr(x,T){var H={};return T=bi(T,3),qa(x,function(ye,Ve,ht){Hr(H,Ve,T(ye,Ve,ht))}),H}var kn=CA(function(x,T,H){mt(x,T,H)}),jr=CA(function(x,T,H,ye){mt(x,T,H,ye)}),mi=Kc(function(x,T){var H={};if(x==null)return H;var ye=!1;T=Fs(T,function(ht){return ht=Aa(ht,x),ye||(ye=ht.length>1),ht}),Hu(x,Cf(x),H),ye&&(H=fl(H,E|S|I,rh));for(var Ve=T.length;Ve--;)ol(H,T[Ve]);return H});function ci(x,T){return jo(x,si(bi(T)))}var Zr=Kc(function(x,T){return x==null?{}:Rt(x,T)});function jo(x,T){if(x==null)return{};var H=Fs(Cf(x),function(ye){return[ye]});return T=bi(T),zt(x,H,function(ye,Ve){return T(ye,Ve[0])})}function al(x,T,H){T=Aa(T,x);var ye=-1,Ve=T.length;for(Ve||(Ve=1,x=t);++ye<Ve;){var ht=x==null?t:x[Ca(T[ye])];ht===t&&(ye=Ve,ht=H),x=sh(ht)?ht.call(x):ht}return x}function hu(x,T,H){return x==null?x:pr(x,T,H)}function bA(x,T,H,ye){return ye=typeof ye=="function"?ye:t,x==null?x:pr(x,T,H,ye)}var od=kp(fn),gc=kp(jn);function tA(x,T,H){var ye=So(x),Ve=ye||Up(x)||Of(x);if(T=bi(T,4),H==null){var ht=x&&x.constructor;Ve?H=ye?new ht:[]:Tl(x)?H=sh(ht)?DA(Wa(x)):{}:H={}}return(Ve?ma:qa)(x,function(Pt,Vt,an){return T(H,Pt,Vt,an)}),H}function Va(x,T){return x==null?!0:ol(x,T)}function ku(x,T,H){return x==null?x:yA(x,T,NA(H))}function nA(x,T,H,ye){return ye=typeof ye=="function"?ye:t,x==null?x:yA(x,T,NA(H),ye)}function vl(x){return x==null?[]:_h(x,fn(x))}function yc(x){return x==null?[]:_h(x,jn(x))}function Rd(x,T,H){return H===t&&(H=T,T=t),H!==t&&(H=h(H),H=H===H?H:0),T!==t&&(T=h(T),T=T===T?T:0),Mu(h(x),T,H)}function Tu(x,T,H){return T=jh(T),H===t?(H=T,T=0):H=jh(H),x=h(x),au(x,T,H)}function Fc(x,T,H){if(H&&typeof H!="boolean"&&B(x,T,H)&&(T=H=t),H===t&&(typeof T=="boolean"?(H=T,T=t):typeof x=="boolean"&&(H=x,x=t)),x===t&&T===t?(x=0,T=1):(x=jh(x),T===t?(T=x,x=0):T=jh(T)),x>T){var ye=x;x=T,T=ye}if(H||x%1||T%1){var Ve=Hc();return Ls(x+Ve*(T-x+Kr("1e-"+((Ve+"").length-1))),T)}return Mn(x,T)}var fu=Xd(function(x,T,H){return T=T.toLowerCase(),x+(H?pu(T):T)});function pu(x){return gv(v(x).toLowerCase())}function mu(x){return x=v(x),x&&x.replace(ns,xh).replace(EA,"")}function Ql(x,T,H){x=v(x),T=Xo(T);var ye=x.length;H=H===t?ye:Mu(Po(H),0,ye);var Ve=H;return H-=T.length,H>=0&&x.slice(H,Ve)==T}function ba(x){return x=v(x),x&&qt.test(x)?x.replace(ct,ju):x}function Nh(x){return x=v(x),x&&on.test(x)?x.replace(Er,"\\$&"):x}var A0=Xd(function(x,T,H){return x+(H?"-":"")+T.toLowerCase()}),Wh=Xd(function(x,T,H){return x+(H?" ":"")+T.toLowerCase()}),D3=Zf("toLowerCase");function c0(x,T,H){x=v(x),T=Po(T);var ye=T?md(x):0;if(!T||ye>=T)return x;var Ve=(T-ye)/2;return Xf(Qu(Ve),H)+x+Xf(IA(Ve),H)}function wm(x,T,H){x=v(x),T=Po(T);var ye=T?md(x):0;return T&&ye<T?x+Xf(T-ye,H):x}function d0(x,T,H){x=v(x),T=Po(T);var ye=T?md(x):0;return T&&ye<T?Xf(T-ye,H)+x:x}function h0(x,T,H){return H||T==null?T=0:T&&(T=+T),bd(v(x).replace(Rn,""),T||0)}function f0(x,T,H){return(H?B(x,T,H):T===t)?T=1:T=Po(T),yn(v(x),T)}function j_(){var x=arguments,T=v(x[0]);return x.length<3?T:T.replace(x[1],x[2])}var N_=Xd(function(x,T,H){return x+(H?"_":"")+T.toLowerCase()});function W_(x,T,H){return H&&typeof H!="number"&&B(x,T,H)&&(T=H=t),H=H===t?Fe:H>>>0,H?(x=v(x),x&&(typeof T=="string"||T!=null&&!dv(T))&&(T=Xo(T),!T&&Qc(x))?Pa(Cu(x),0,H):x.split(T,H)):[]}var G_=Xd(function(x,T,H){return x+(H?" ":"")+gv(T)});function pv(x,T,H){return x=v(x),H=H==null?0:Mu(Po(H),0,x.length),T=Xo(T),x.slice(H,H+T.length)==T}function mv(x,T,H){var ye=ot.templateSettings;H&&B(x,T,H)&&(T=t),x=v(x),T=U({},T,ye,Ph);var Ve=U({},T.imports,ye.imports,Ph),ht=fn(Ve),Pt=_h(Ve,ht),Vt,an,Hn=0,Xn=T.interpolate||sa,mr="__p += '",$r=OA((T.escape||sa).source+"|"+Xn.source+"|"+(Xn===xt?qi:sa).source+"|"+(T.evaluate||sa).source+"|$","g"),xi="//# sourceURL="+(Oo.call(T,"sourceURL")?(T.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++$i+"]")+`
`;x.replace($r,function(eo,ws,Os,qh,Fd,Yh){return Os||(Os=qh),mr+=x.slice(Hn,Yh).replace(Al,uA),ws&&(Vt=!0,mr+=`' +
__e(`+ws+`) +
'`),Fd&&(an=!0,mr+=`';
`+Fd+`;
__p += '`),Os&&(mr+=`' +
((__t = (`+Os+`)) == null ? '' : __t) +
'`),Hn=Yh+eo.length,eo}),mr+=`';
`;var Ji=Oo.call(T,"variable")&&T.variable;if(!Ji)mr=`with (obj) {
`+mr+`
}
`;else if(mo.test(Ji))throw new Ei(o);mr=(an?mr.replace(p,""):mr).replace(Ne,"$1").replace(Ye,"$1;"),mr="function("+(Ji||"obj")+`) {
`+(Ji?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Vt?", __e = _.escape":"")+(an?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+mr+`return __p
}`;var ls=$_(function(){return ho(ht,xi+"return "+mr).apply(t,Pt)});if(ls.source=mr,a0(ls))throw ls;return ls}function sp(x){return v(x).toLowerCase()}function Q_(x){return v(x).toUpperCase()}function q_(x,T,H){if(x=v(x),x&&(H||T===t))return Ch(x);if(!x||!(T=Xo(T)))return x;var ye=Cu(x),Ve=Cu(T),ht=lA(ye,Ve),Pt=Gc(ye,Ve)+1;return Pa(ye,ht,Pt).join("")}function R3(x,T,H){if(x=v(x),x&&(H||T===t))return x.slice(0,Mh(x)+1);if(!x||!(T=Xo(T)))return x;var ye=Cu(x),Ve=Gc(ye,Cu(T))+1;return Pa(ye,0,Ve).join("")}function F3(x,T,H){if(x=v(x),x&&(H||T===t))return x.replace(Rn,"");if(!x||!(T=Xo(T)))return x;var ye=Cu(x),Ve=lA(ye,Cu(T));return Pa(ye,Ve).join("")}function L3(x,T){var H=pe,ye=Ee;if(Tl(T)){var Ve="separator"in T?T.separator:Ve;H="length"in T?Po(T.length):H,ye="omission"in T?Xo(T.omission):ye}x=v(x);var ht=x.length;if(Qc(x)){var Pt=Cu(x);ht=Pt.length}if(H>=ht)return x;var Vt=H-md(ye);if(Vt<1)return ye;var an=Pt?Pa(Pt,0,Vt).join(""):x.slice(0,Vt);if(Ve===t)return an+ye;if(Pt&&(Vt+=an.length-Vt),dv(Ve)){if(x.slice(Vt).search(Ve)){var Hn,Xn=an;for(Ve.global||(Ve=OA(Ve.source,v(vi.exec(Ve))+"g")),Ve.lastIndex=0;Hn=Ve.exec(Xn);)var mr=Hn.index;an=an.slice(0,mr===t?Vt:mr)}}else if(x.indexOf(Xo(Ve),Vt)!=Vt){var $r=an.lastIndexOf(Ve);$r>-1&&(an=an.slice(0,$r))}return an+ye}function U3(x){return x=v(x),x&&dt.test(x)?x.replace(rt,cf):x}var z3=Xd(function(x,T,H){return x+(H?" ":"")+T.toUpperCase()}),gv=Zf("toUpperCase");function Y_(x,T,H){return x=v(x),T=H?t:T,T===t?uf(x)?Sh(x):dd(x):x.match(T)||[]}var $_=In(function(x,T){try{return Qs(x,t,T)}catch(H){return a0(H)?H:new Ei(H)}}),Gh=Kc(function(x,T){return ma(T,function(H){H=Ca(H),Hr(x,H,ir(x[H],x))}),x});function p1(x){var T=x==null?0:x.length,H=bi();return x=T?Fs(x,function(ye){if(typeof ye[1]!="function")throw new Nu(a);return[H(ye[0]),ye[1]]}):[],In(function(ye){for(var Ve=-1;++Ve<T;){var ht=x[Ve];if(Qs(ht[0],this,ye))return Qs(ht[1],this,ye)}})}function V_(x){return iu(fl(x,E))}function yv(x){return function(){return x}}function j3(x,T){return x==null||x!==x?T:x}var N3=th(),qA=th(!0);function Ha(x){return x}function ap(x){return xe(typeof x=="function"?x:fl(x,E))}function Qh(x){return pt(fl(x,E))}function Mm(x,T){return ut(x,fl(T,E))}var If=In(function(x,T){return function(H){return Ml(H,x,T)}}),YG=In(function(x,T){return function(H){return Ml(x,H,T)}});function W3(x,T,H){var ye=fn(T),Ve=Tc(T,ye);H==null&&!(Tl(T)&&(Ve.length||!ye.length))&&(H=T,T=x,x=this,Ve=Tc(T,fn(T)));var ht=!(Tl(H)&&"chain"in H)||!!H.chain,Pt=sh(x);return ma(Ve,function(Vt){var an=T[Vt];x[Vt]=an,Pt&&(x.prototype[Vt]=function(){var Hn=this.__chain__;if(ht||Hn){var Xn=x(this.__wrapped__),mr=Xn.__actions__=va(this.__actions__);return mr.push({func:an,args:arguments,thisArg:x}),Xn.__chain__=Hn,Xn}return an.apply(x,BA([this.value()],arguments))})}),x}function $G(){return Br._===this&&(Br._=zl),this}function G3(){}function VG(x){return x=Po(x),In(function(T){return Bt(T,x)})}var HG=mf(Fs),ZG=mf(Wc),XG=mf(bc);function yI(x){return R(x)?sf(Ca(x)):Tt(x)}function JG(x){return function(T){return x==null?t:Eu(x,T)}}var eQ=kd(),tQ=kd(!0);function Q3(){return[]}function q3(){return!1}function nQ(){return{}}function rQ(){return""}function iQ(){return!0}function oQ(x,T){if(x=Po(x),x<1||x>Je)return[];var H=Fe,ye=Ls(x,Fe);T=bi(T),x-=Fe;for(var Ve=lf(ye,T);++H<x;)T(H);return Ve}function sQ(x){return So(x)?Fs(x,Ca):id(x)?[x]:va(ia(v(x)))}function aQ(x){var T=++gd;return v(x)+T}var lQ=nh(function(x,T){return x+T},0),uQ=Au("ceil"),AQ=nh(function(x,T){return x/T},1),cQ=Au("floor");function dQ(x){return x&&x.length?Xc(x,Ha,ou):t}function hQ(x,T){return x&&x.length?Xc(x,bi(T,2),ou):t}function fQ(x){return hd(x,Ha)}function pQ(x,T){return hd(x,bi(T,2))}function mQ(x){return x&&x.length?Xc(x,Ha,$e):t}function gQ(x,T){return x&&x.length?Xc(x,bi(T,2),$e):t}var yQ=nh(function(x,T){return x*T},1),vQ=Au("round"),CQ=nh(function(x,T){return x-T},0);function _Q(x){return x&&x.length?yh(x,Ha):0}function bQ(x,T){return x&&x.length?yh(x,bi(T,2)):0}return ot.after=xn,ot.ary=Ar,ot.assign=M,ot.assignIn=D,ot.assignInWith=U,ot.assignWith=W,ot.at=X,ot.before=Cr,ot.bind=ir,ot.bindAll=Gh,ot.bindKey=qr,ot.castArray=s0,ot.chain=zh,ot.chunk=Da,ot.compact=Ra,ot.concat=as,ot.cond=p1,ot.conforms=V_,ot.constant=yv,ot.countBy=i0,ot.create=re,ot.curry=oi,ot.curryRight=ai,ot.debounce=yl,ot.defaults=de,ot.defaultsDeep=_e,ot.defer=cn,ot.delay=Xt,ot.difference=yi,ot.differenceBy=ps,ot.differenceWith=js,ot.drop=ca,ot.dropRight=Es,ot.dropRightWhile=Iu,ot.dropWhile=Co,ot.fill=Kh,ot.filter=Cm,ot.flatMap=ig,ot.flatMapDeep=a1,ot.flatMapDepth=og,ot.flatten=pc,ot.flattenDeep=gl,ot.flattenDepth=Ol,ot.flip=dn,ot.flow=N3,ot.flowRight=qA,ot.fromPairs=bf,ot.functions=Nt,ot.functionsIn=Et,ot.groupBy=Ef,ot.initial=$m,ot.intersection=np,ot.intersectionBy=Rh,ot.intersectionWith=Vm,ot.invert=An,ot.invertBy=zn,ot.invokeMap=Bf,ot.iteratee=ap,ot.keyBy=bm,ot.keys=fn,ot.keysIn=jn,ot.map=Lp,ot.mapKeys=Wn,ot.mapValues=cr,ot.matches=Qh,ot.matchesProperty=Mm,ot.memoize=_r,ot.merge=kn,ot.mergeWith=jr,ot.method=If,ot.methodOf=YG,ot.mixin=W3,ot.negate=si,ot.nthArg=VG,ot.omit=mi,ot.omitBy=ci,ot.once=Oi,ot.orderBy=xm,ot.over=HG,ot.overArgs=Ii,ot.overEvery=ZG,ot.overSome=XG,ot.partial=ji,ot.partialRight=kl,ot.partition=av,ot.pick=Zr,ot.pickBy=jo,ot.property=yI,ot.propertyOf=JG,ot.pull=Hm,ot.pullAll=Pp,ot.pullAllBy=Ju,ot.pullAllWith=Fh,ot.pullAt=td,ot.range=eQ,ot.rangeRight=tQ,ot.rearg=xs,ot.reject=C,ot.remove=GA,ot.rest=nd,ot.reverse=Zm,ot.sampleSize=Q,ot.set=hu,ot.setWith=bA,ot.shuffle=le,ot.slice=Kp,ot.sortBy=It,ot.sortedUniq=$0,ot.sortedUniqBy=rp,ot.split=W_,ot.spread=l1,ot.tail=Dp,ot.take=V0,ot.takeRight=gm,ot.takeRightWhile=ym,ot.takeWhile=Il,ot.tap=e0,ot.throttle=lv,ot.thru=mc,ot.toArray=f1,ot.toPairs=od,ot.toPairsIn=gc,ot.toPath=sQ,ot.toPlainObject=u,ot.transform=tA,ot.unary=w_,ot.union=H0,ot.unionBy=r1,ot.unionWith=Z0,ot.uniq=Lh,ot.uniqBy=X0,ot.uniqWith=Rp,ot.unset=Va,ot.unzip=Xm,ot.unzipWith=sl,ot.update=ku,ot.updateWith=nA,ot.values=vl,ot.valuesIn=yc,ot.without=sv,ot.words=Y_,ot.wrap=Dd,ot.xor=J0,ot.xorBy=QA,ot.xorWith=eg,ot.zip=tg,ot.zipObject=Uh,ot.zipObjectDeep=Jm,ot.zipWith=_A,ot.entries=od,ot.entriesIn=gc,ot.extend=D,ot.extendWith=U,W3(ot,ot),ot.add=lQ,ot.attempt=$_,ot.camelCase=fu,ot.capitalize=pu,ot.ceil=uQ,ot.clamp=Rd,ot.clone=M_,ot.cloneDeep=E_,ot.cloneDeepWith=B_,ot.cloneWith=S_,ot.conformsTo=O_,ot.deburr=mu,ot.defaultTo=j3,ot.divide=AQ,ot.endsWith=Ql,ot.eq=oh,ot.escape=ba,ot.escapeRegExp=Nh,ot.every=o1,ot.find=o0,ot.findIndex=Wl,ot.findKey=Re,ot.findLast=s1,ot.findLastIndex=Xu,ot.findLastKey=ze,ot.floor=cQ,ot.forEach=Fp,ot.forEachRight=_m,ot.forIn=Ge,ot.forInRight=et,ot.forOwn=At,ot.forOwnRight=Ct,ot.get=Le,ot.gt=T3,ot.gte=I_,ot.has=lt,ot.hasIn=Ot,ot.head=xf,ot.identity=Ha,ot.includes=Kd,ot.indexOf=Dh,ot.inRange=Tu,ot.invoke=Cn,ot.isArguments=rd,ot.isArray=So,ot.isArrayBuffer=k_,ot.isArrayLike=Rc,ot.isArrayLikeObject=Gl,ot.isBoolean=P3,ot.isBuffer=Up,ot.isDate=T_,ot.isElement=sg,ot.isEmpty=P_,ot.isEqual=u1,ot.isEqualWith=K_,ot.isError=a0,ot.isFinite=A1,ot.isFunction=sh,ot.isInteger=D_,ot.isLength=c1,ot.isMap=eA,ot.isMatch=zp,ot.isMatchWith=uv,ot.isNaN=R_,ot.isNative=F_,ot.isNil=K3,ot.isNull=Av,ot.isNumber=cv,ot.isObject=Tl,ot.isObjectLike=Fa,ot.isPlainObject=l0,ot.isRegExp=dv,ot.isSafeInteger=L_,ot.isSet=d1,ot.isString=u0,ot.isSymbol=id,ot.isTypedArray=Of,ot.isUndefined=hv,ot.isWeakMap=U_,ot.isWeakSet=fv,ot.join=wf,ot.kebabCase=A0,ot.last=WA,ot.lastIndexOf=mm,ot.lowerCase=Wh,ot.lowerFirst=D3,ot.lt=h1,ot.lte=ag,ot.max=dQ,ot.maxBy=hQ,ot.mean=fQ,ot.meanBy=pQ,ot.min=mQ,ot.minBy=gQ,ot.stubArray=Q3,ot.stubFalse=q3,ot.stubObject=nQ,ot.stubString=rQ,ot.stubTrue=iQ,ot.multiply=yQ,ot.nth=Q0,ot.noConflict=$G,ot.noop=G3,ot.now=Wt,ot.pad=c0,ot.padEnd=wm,ot.padStart=d0,ot.parseInt=h0,ot.random=Fc,ot.reduce=op,ot.reduceRight=m,ot.repeat=f0,ot.replace=j_,ot.result=al,ot.round=vQ,ot.runInContext=Jt,ot.sample=F,ot.size=ge,ot.snakeCase=N_,ot.some=tt,ot.sortedIndex=q0,ot.sortedIndexBy=t1,ot.sortedIndexOf=Mf,ot.sortedLastIndex=n1,ot.sortedLastIndexBy=Y0,ot.sortedLastIndexOf=Sf,ot.startCase=G_,ot.startsWith=pv,ot.subtract=CQ,ot.sum=_Q,ot.sumBy=bQ,ot.template=mv,ot.times=oQ,ot.toFinite=jh,ot.toInteger=Po,ot.toLength=z_,ot.toLower=sp,ot.toNumber=h,ot.toSafeInteger=f,ot.toString=v,ot.toUpper=Q_,ot.trim=q_,ot.trimEnd=R3,ot.trimStart=F3,ot.truncate=L3,ot.unescape=U3,ot.uniqueId=aQ,ot.upperCase=z3,ot.upperFirst=gv,ot.each=Fp,ot.eachRight=_m,ot.first=xf,W3(ot,function(){var x={};return qa(ot,function(T,H){Oo.call(ot.prototype,H)||(x[H]=T)}),x}(),{chain:!1}),ot.VERSION=r,ma(["bind","bindKey","curry","curryRight","partial","partialRight"],function(x){ot[x].placeholder=ot}),ma(["drop","take"],function(x,T){ii.prototype[x]=function(H){H=H===t?1:Bi(Po(H),0);var ye=this.__filtered__&&!T?new ii(this):this.clone();return ye.__filtered__?ye.__takeCount__=Ls(H,ye.__takeCount__):ye.__views__.push({size:Ls(H,Fe),type:x+(ye.__dir__<0?"Right":"")}),ye},ii.prototype[x+"Right"]=function(H){return this.reverse()[x](H).reverse()}}),ma(["filter","map","takeWhile"],function(x,T){var H=T+1,ye=H==De||H==at;ii.prototype[x]=function(Ve){var ht=this.clone();return ht.__iteratees__.push({iteratee:bi(Ve,3),type:H}),ht.__filtered__=ht.__filtered__||ye,ht}}),ma(["head","last"],function(x,T){var H="take"+(T?"Right":"");ii.prototype[x]=function(){return this[H](1).value()[0]}}),ma(["initial","tail"],function(x,T){var H="drop"+(T?"":"Right");ii.prototype[x]=function(){return this.__filtered__?new ii(this):this[H](1)}}),ii.prototype.compact=function(){return this.filter(Ha)},ii.prototype.find=function(x){return this.filter(x).head()},ii.prototype.findLast=function(x){return this.reverse().find(x)},ii.prototype.invokeMap=In(function(x,T){return typeof x=="function"?new ii(this):this.map(function(H){return Ml(H,x,T)})}),ii.prototype.reject=function(x){return this.filter(si(bi(x)))},ii.prototype.slice=function(x,T){x=Po(x);var H=this;return H.__filtered__&&(x>0||T<0)?new ii(H):(x<0?H=H.takeRight(-x):x&&(H=H.drop(x)),T!==t&&(T=Po(T),H=T<0?H.dropRight(-T):H.take(T-x)),H)},ii.prototype.takeRightWhile=function(x){return this.reverse().takeWhile(x).reverse()},ii.prototype.toArray=function(){return this.take(Fe)},qa(ii.prototype,function(x,T){var H=/^(?:filter|find|map|reject)|While$/.test(T),ye=/^(?:head|last)$/.test(T),Ve=ot[ye?"take"+(T=="last"?"Right":""):T],ht=ye||/^find/.test(T);Ve&&(ot.prototype[T]=function(){var Pt=this.__wrapped__,Vt=ye?[1]:arguments,an=Pt instanceof ii,Hn=Vt[0],Xn=an||So(Pt),mr=function(ws){var Os=Ve.apply(ot,BA([ws],Vt));return ye&&$r?Os[0]:Os};Xn&&H&&typeof Hn=="function"&&Hn.length!=1&&(an=Xn=!1);var $r=this.__chain__,xi=!!this.__actions__.length,Ji=ht&&!$r,ls=an&&!xi;if(!ht&&Xn){Pt=ls?Pt:new ii(this);var eo=x.apply(Pt,Vt);return eo.__actions__.push({func:mc,args:[mr],thisArg:t}),new pi(eo,$r)}return Ji&&ls?x.apply(this,Vt):(eo=this.thru(mr),Ji?ye?eo.value()[0]:eo.value():eo)})}),ma(["pop","push","shift","sort","splice","unshift"],function(x){var T=_u[x],H=/^(?:push|sort|unshift)$/.test(x)?"tap":"thru",ye=/^(?:pop|shift)$/.test(x);ot.prototype[x]=function(){var Ve=arguments;if(ye&&!this.__chain__){var ht=this.value();return T.apply(So(ht)?ht:[],Ve)}return this[H](function(Pt){return T.apply(So(Pt)?Pt:[],Ve)})}}),qa(ii.prototype,function(x,T){var H=ot[T];if(H){var ye=H.name+"";Oo.call(Zc,ye)||(Zc[ye]=[]),Zc[ye].push({name:T,func:H})}}),Zc[Id(t,q).name]=[{name:"wrapper",func:t}],ii.prototype.clone=is,ii.prototype.reverse=fA,ii.prototype.value=$d,ot.prototype.at=t0,ot.prototype.chain=ip,ot.prototype.commit=vm,ot.prototype.next=n0,ot.prototype.plant=i1,ot.prototype.reverse=r0,ot.prototype.toJSON=ot.prototype.valueOf=ot.prototype.value=rg,ot.prototype.first=ot.prototype.head,Gu&&(ot.prototype[Gu]=ng),ot},Jl=Eh();zi?((zi.exports=Jl)._=Jl,xr._=Jl):Br._=Jl}).call(cY)}(Rv,Rv.exports)),Rv.exports}var mx=dY();const C6=el(mx);function hY(n,e,t){const r=e<0?n.length+e:e;if(r>=0&&r<n.length){const i=t<0?n.length+t:t,[s]=n.splice(e,1);n.splice(i,0,s)}}var s4,u7;function fY(){if(u7)return s4;u7=1;function n(e){for(var t=5381,r=e.length;r;)t=t*33^e.charCodeAt(--r);return t>>>0}return s4=n,s4}var pY=fY();const A7=el(pY);var Zh=Uint8Array,iy=Uint16Array,mY=Int32Array,vL=new Zh([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),CL=new Zh([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),gY=new Zh([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),_L=function(n,e){for(var t=new iy(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var i=new mY(t[30]),r=1;r<30;++r)for(var s=t[r];s<t[r+1];++s)i[s]=s-t[r]<<5|r;return{b:t,r:i}},bL=_L(vL,2),xL=bL.b,yY=bL.r;xL[28]=258,yY[258]=28;var vY=_L(CL,0),CY=vY.b,_6=new iy(32768);for(var Rl=0;Rl<32768;++Rl){var p0=(Rl&43690)>>1|(Rl&21845)<<1;p0=(p0&52428)>>2|(p0&13107)<<2,p0=(p0&61680)>>4|(p0&3855)<<4,_6[Rl]=((p0&65280)>>8|(p0&255)<<8)>>1}var nC=function(n,e,t){for(var r=n.length,i=0,s=new iy(e);i<r;++i)n[i]&&++s[n[i]-1];var a=new iy(e);for(i=1;i<e;++i)a[i]=a[i-1]+s[i-1]<<1;var o;if(t){o=new iy(1<<e);var d=15-e;for(i=0;i<r;++i)if(n[i])for(var g=i<<4|n[i],b=e-n[i],E=a[n[i]-1]++<<b,S=E|(1<<b)-1;E<=S;++E)o[_6[E]>>d]=g}else for(o=new iy(r),i=0;i<r;++i)n[i]&&(o[i]=_6[a[n[i]-1]++]>>15-n[i]);return o},VC=new Zh(288);for(var Rl=0;Rl<144;++Rl)VC[Rl]=8;for(var Rl=144;Rl<256;++Rl)VC[Rl]=9;for(var Rl=256;Rl<280;++Rl)VC[Rl]=7;for(var Rl=280;Rl<288;++Rl)VC[Rl]=8;var wL=new Zh(32);for(var Rl=0;Rl<32;++Rl)wL[Rl]=5;var _Y=nC(VC,9,1),bY=nC(wL,5,1),a4=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},up=function(n,e,t){var r=e/8|0;return(n[r]|n[r+1]<<8)>>(e&7)&t},l4=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},xY=function(n){return(n+7)/8|0},wY=function(n,e,t){return(t==null||t>n.length)&&(t=n.length),new Zh(n.subarray(e,t))},MY=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],$h=function(n,e,t){var r=new Error(e||MY[n]);if(r.code=n,Error.captureStackTrace&&Error.captureStackTrace(r,$h),!t)throw r;return r},jB=function(n,e,t,r){var i=n.length,s=0;if(!i||e.f&&!e.l)return t||new Zh(0);var a=!t,o=a||e.i!=2,d=e.i;a&&(t=new Zh(i*3));var g=function(it){var _t=t.length;if(it>_t){var ft=new Zh(Math.max(_t*2,it));ft.set(t),t=ft}},b=e.f||0,E=e.p||0,S=e.b||0,I=e.l,P=e.d,z=e.m,j=e.n,q=i*8;do{if(!I){b=up(n,E,1);var Y=up(n,E+1,3);if(E+=3,Y)if(Y==1)I=_Y,P=bY,z=9,j=5;else if(Y==2){var ne=up(n,E,31)+257,G=up(n,E+10,15)+4,oe=ne+up(n,E+5,31)+1;E+=14;for(var he=new Zh(oe),pe=new Zh(19),Ee=0;Ee<G;++Ee)pe[gY[Ee]]=up(n,E+Ee*3,7);E+=G*3;for(var me=a4(pe),Se=(1<<me)-1,De=nC(pe,me,1),Ee=0;Ee<oe;){var be=De[up(n,E,Se)];E+=be&15;var ie=be>>4;if(ie<16)he[Ee++]=ie;else{var at=0,Ze=0;for(ie==16?(Ze=3+up(n,E,3),E+=2,at=he[Ee-1]):ie==17?(Ze=3+up(n,E,7),E+=3):ie==18&&(Ze=11+up(n,E,127),E+=7);Ze--;)he[Ee++]=at}}var Je=he.subarray(0,ne),We=he.subarray(ne);z=a4(Je),j=a4(We),I=nC(Je,z,1),P=nC(We,j,1)}else $h(1);else{var ie=xY(E)+4,te=n[ie-4]|n[ie-3]<<8,V=ie+te;if(V>i){d&&$h(0);break}o&&g(S+te),t.set(n.subarray(ie,V),S),e.b=S+=te,e.p=E=V*8,e.f=b;continue}if(E>q){d&&$h(0);break}}o&&g(S+131072);for(var Me=(1<<z)-1,Fe=(1<<j)-1,He=E;;He=E){var at=I[l4(n,E)&Me],bt=at>>4;if(E+=at&15,E>q){d&&$h(0);break}if(at||$h(2),bt<256)t[S++]=bt;else if(bt==256){He=E,I=null;break}else{var Yt=bt-254;if(bt>264){var Ee=bt-257,gt=vL[Ee];Yt=up(n,E,(1<<gt)-1)+xL[Ee],E+=gt}var Lt=P[l4(n,E)&Fe],Kt=Lt>>4;Lt||$h(3),E+=Lt&15;var We=CY[Kt];if(Kt>3){var gt=CL[Kt];We+=l4(n,E)&(1<<gt)-1,E+=gt}if(E>q){d&&$h(0);break}o&&g(S+131072);var Ue=S+Yt;if(S<We){var Pe=s-We,Be=Math.min(We,Ue);for(Pe+S<0&&$h(3);S<Be;++S)t[S]=r[Pe+S]}for(;S<Ue;++S)t[S]=t[S-We]}}e.l=I,e.p=He,e.b=S,e.f=b,I&&(b=1,e.m=z,e.d=P,e.n=j)}while(!b);return S!=t.length&&a?wY(t,0,S):t.subarray(0,S)},SY=new Zh(0),EY=function(n){(n[0]!=31||n[1]!=139||n[2]!=8)&&$h(6,"invalid gzip data");var e=n[3],t=10;e&4&&(t+=(n[10]|n[11]<<8)+2);for(var r=(e>>3&1)+(e>>4&1);r>0;r-=!n[t++]);return t+(e&2)},BY=function(n){var e=n.length;return(n[e-4]|n[e-3]<<8|n[e-2]<<16|n[e-1]<<24)>>>0},OY=function(n,e){return((n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31)&&$h(6,"invalid zlib data"),(n[1]>>5&1)==1&&$h(6,"invalid zlib data: "+(n[1]&32?"need":"unexpected")+" dictionary"),(n[1]>>3&4)+2};function IY(n,e){return jB(n,{i:2},e,e)}function kY(n,e){var t=EY(n);return t+8>n.length&&$h(6,"invalid gzip data"),jB(n.subarray(t,-8),{i:2},new Zh(BY(n)),e)}function TY(n,e){return jB(n.subarray(OY(n),-4),{i:2},e,e)}function PY(n,e){return n[0]==31&&n[1]==139&&n[2]==8?kY(n,e):(n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31?IY(n,e):TY(n,e)}var KY=typeof TextDecoder<"u"&&new TextDecoder,DY=0;try{KY.decode(SY,{stream:!0}),DY=1}catch{}var RY=Object.defineProperty,rC=Math.pow,Xa=(n,e)=>RY(n,"name",{value:e,configurable:!0}),Cc=(n,e,t)=>new Promise((r,i)=>{var s=d=>{try{o(t.next(d))}catch(g){i(g)}},a=d=>{try{o(t.throw(d))}catch(g){i(g)}},o=d=>d.done?r(d.value):Promise.resolve(d.value).then(s,a);o((t=t.apply(n,e)).next())});Xa((n,e)=>{let t=!1,r="",i=L.GridLayer.extend({createTile:Xa((s,a)=>{let o=document.createElement("img"),d=new AbortController,g=d.signal;return o.cancel=()=>{d.abort()},t||(n.getHeader().then(b=>{b.tileType===1?console.error("Error: archive contains MVT vector tiles, but leafletRasterLayer is for displaying raster tiles. See https://github.com/protomaps/PMTiles/tree/main/js for details."):b.tileType===2?r="image/png":b.tileType===3?r="image/jpeg":b.tileType===4?r="image/webp":b.tileType===5&&(r="image/avif")}),t=!0),n.getZxy(s.z,s.x,s.y,g).then(b=>{if(b){let E=new Blob([b.data],{type:r}),S=window.URL.createObjectURL(E);o.src=S,o.cancel=void 0,a(void 0,o)}}).catch(b=>{if(b.name!=="AbortError")throw b}),o},"createTile"),_removeTile:Xa(function(s){let a=this._tiles[s];a&&(a.el.cancel&&a.el.cancel(),a.el.width=0,a.el.height=0,a.el.deleted=!0,L.DomUtil.remove(a.el),delete this._tiles[s],this.fire("tileunload",{tile:a.el,coords:this._keyToTileCoords(s)}))},"_removeTile")});return new i(e)},"leafletRasterLayer");var FY=Xa(n=>(e,t)=>{if(t instanceof AbortController)return n(e,t);let r=new AbortController;return n(e,r).then(i=>t(void 0,i.data,i.cacheControl||"",i.expires||""),i=>t(i)).catch(i=>t(i)),{cancel:Xa(()=>r.abort(),"cancel")}},"v3compat"),ML=class{constructor(e){this.tilev4=Xa((t,r)=>Cc(this,null,function*(){if(t.type==="json"){let I=t.url.substr(10),P=this.tiles.get(I);if(P||(P=new x6(I),this.tiles.set(I,P)),this.metadata)return{data:yield P.getTileJson(t.url)};let z=yield P.getHeader();return(z.minLon>=z.maxLon||z.minLat>=z.maxLat)&&console.error(`Bounds of PMTiles archive ${z.minLon},${z.minLat},${z.maxLon},${z.maxLat} are not valid.`),{data:{tiles:[`${t.url}/{z}/{x}/{y}`],minzoom:z.minZoom,maxzoom:z.maxZoom,bounds:[z.minLon,z.minLat,z.maxLon,z.maxLat]}}}let i=new RegExp(/pmtiles:\/\/(.+)\/(\d+)\/(\d+)\/(\d+)/),s=t.url.match(i);if(!s)throw new Error("Invalid PMTiles protocol URL");let a=s[1],o=this.tiles.get(a);o||(o=new x6(a),this.tiles.set(a,o));let d=s[2],g=s[3],b=s[4],E=yield o.getHeader(),S=yield o==null?void 0:o.getZxy(+d,+g,+b,r.signal);if(S)return{data:new Uint8Array(S.data),cacheControl:S.cacheControl,expires:S.expires};if(E.tileType===1){if(this.errorOnMissingTile)throw new Error("Tile not found.");return{data:new Uint8Array}}return{data:null}}),"tilev4"),this.tile=FY(this.tilev4),this.tiles=new Map,this.metadata=(e==null?void 0:e.metadata)||!1,this.errorOnMissingTile=(e==null?void 0:e.errorOnMissingTile)||!1}add(e){this.tiles.set(e.source.getKey(),e)}get(e){return this.tiles.get(e)}};Xa(ML,"Protocol");var LY=ML;function SL(n,e){return(e>>>0)*4294967296+(n>>>0)}Xa(SL,"toNum");function EL(n,e){let t=e.buf,r=t[e.pos++],i=(r&112)>>4;if(r<128||(r=t[e.pos++],i|=(r&127)<<3,r<128)||(r=t[e.pos++],i|=(r&127)<<10,r<128)||(r=t[e.pos++],i|=(r&127)<<17,r<128)||(r=t[e.pos++],i|=(r&127)<<24,r<128)||(r=t[e.pos++],i|=(r&1)<<31,r<128))return SL(n,i);throw new Error("Expected varint not more than 10 bytes")}Xa(EL,"readVarintRemainder");function Y1(n){let e=n.buf,t=e[n.pos++],r=t&127;return t<128||(t=e[n.pos++],r|=(t&127)<<7,t<128)||(t=e[n.pos++],r|=(t&127)<<14,t<128)||(t=e[n.pos++],r|=(t&127)<<21,t<128)?r:(t=e[n.pos],r|=(t&15)<<28,EL(r,n))}Xa(Y1,"readVarint");function NB(n,e,t,r){if(r===0){t===1&&(e[0]=n-1-e[0],e[1]=n-1-e[1]);let i=e[0];e[0]=e[1],e[1]=i}}Xa(NB,"rotate");function BL(n,e){let t=rC(2,n),r=e,i=e,s=e,a=[0,0],o=1;for(;o<t;)r=1&s/2,i=1&(s^r),NB(o,a,r,i),a[0]+=o*r,a[1]+=o*i,s=s/4,o*=2;return[n,a[0],a[1]]}Xa(BL,"idOnLevel");var UY=[0,1,5,21,85,341,1365,5461,21845,87381,349525,1398101,5592405,22369621,89478485,357913941,1431655765,5726623061,22906492245,91625968981,366503875925,1466015503701,5864062014805,23456248059221,93824992236885,375299968947541,0x5555555555555];function OL(n,e,t){if(n>26)throw new Error("Tile zoom level exceeds max safe number limit (26)");if(e>rC(2,n)-1||t>rC(2,n)-1)throw new Error("tile x/y outside zoom level bounds");let r=UY[n],i=rC(2,n),s=0,a=0,o=0,d=[e,t],g=i/2;for(;g>0;)s=(d[0]&g)>0?1:0,a=(d[1]&g)>0?1:0,o+=g*g*(3*s^a),NB(g,d,s,a),g=g/2;return r+o}Xa(OL,"zxyToTileId");function zY(n){let e=0;for(let t=0;t<27;t++){let r=(1<<t)*(1<<t);if(e+r>n)return BL(t,n-e);e+=r}throw new Error("Tile zoom level exceeds max safe number limit (26)")}Xa(zY,"tileIdToZxy");var jY=(n=>(n[n.Unknown=0]="Unknown",n[n.None=1]="None",n[n.Gzip=2]="Gzip",n[n.Brotli=3]="Brotli",n[n.Zstd=4]="Zstd",n))(jY||{});function gx(n,e){return Cc(this,null,function*(){if(e===1||e===0)return n;if(e===2){if(typeof globalThis.DecompressionStream>"u")return PY(new Uint8Array(n));let t=new Response(n).body;if(!t)throw new Error("Failed to read response stream");let r=t.pipeThrough(new globalThis.DecompressionStream("gzip"));return new Response(r).arrayBuffer()}throw new Error("Compression method not supported")})}Xa(gx,"defaultDecompress");var NY=(n=>(n[n.Unknown=0]="Unknown",n[n.Mvt=1]="Mvt",n[n.Png=2]="Png",n[n.Jpeg=3]="Jpeg",n[n.Webp=4]="Webp",n[n.Avif=5]="Avif",n))(NY||{});function IL(n){return n===1?".mvt":n===2?".png":n===3?".jpg":n===4?".webp":n===5?".avif":""}Xa(IL,"tileTypeExt");var WY=127;function kL(n,e){let t=0,r=n.length-1;for(;t<=r;){let i=r+t>>1,s=e-n[i].tileId;if(s>0)t=i+1;else if(s<0)r=i-1;else return n[i]}return r>=0&&(n[r].runLength===0||e-n[r].tileId<n[r].runLength)?n[r]:null}Xa(kL,"findTile");var GY=class{constructor(e){this.file=e}getKey(){return this.file.name}getBytes(e,t){return Cc(this,null,function*(){return{data:yield this.file.slice(e,e+t).arrayBuffer()}})}};Xa(GY,"FileSource");var TL=class{constructor(e,t=new Headers){this.url=e,this.customHeaders=t,this.mustReload=!1;let r="";"navigator"in globalThis&&(r=globalThis.navigator.userAgent||"");let i=r.indexOf("Windows")>-1,s=/Chrome|Chromium|Edg|OPR|Brave/.test(r);this.chromeWindowsNoCache=!1,i&&s&&(this.chromeWindowsNoCache=!0)}getKey(){return this.url}setHeaders(e){this.customHeaders=e}getBytes(e,t,r,i){return Cc(this,null,function*(){let s,a;r?a=r:(s=new AbortController,a=s.signal);let o=new Headers(this.customHeaders);o.set("range",`bytes=${e}-${e+t-1}`);let d;this.mustReload?d="reload":this.chromeWindowsNoCache&&(d="no-store");let g=yield fetch(this.url,{signal:a,cache:d,headers:o});if(e===0&&g.status===416){let S=g.headers.get("Content-Range");if(!S||!S.startsWith("bytes */"))throw new Error("Missing content-length on 416 response");let I=+S.substr(8);g=yield fetch(this.url,{signal:a,cache:"reload",headers:{range:`bytes=0-${I-1}`}})}let b=g.headers.get("Etag");if(b!=null&&b.startsWith("W/")&&(b=null),g.status===416||i&&b&&b!==i)throw this.mustReload=!0,new b6(`Server returned non-matching ETag ${i} after one retry. Check browser extensions and servers for issues that may affect correct ETag headers.`);if(g.status>=300)throw new Error(`Bad response code: ${g.status}`);let E=g.headers.get("Content-Length");if(g.status===200&&(!E||+E>t))throw s&&s.abort(),new Error("Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.");return{data:yield g.arrayBuffer(),etag:b||void 0,cacheControl:g.headers.get("Cache-Control")||void 0,expires:g.headers.get("Expires")||void 0}})}};Xa(TL,"FetchSource");var QY=TL;function Tf(n,e){let t=n.getUint32(e+4,!0),r=n.getUint32(e+0,!0);return t*rC(2,32)+r}Xa(Tf,"getUint64");function PL(n,e){let t=new DataView(n),r=t.getUint8(7);if(r>3)throw new Error(`Archive is spec version ${r} but this library supports up to spec version 3`);return{specVersion:r,rootDirectoryOffset:Tf(t,8),rootDirectoryLength:Tf(t,16),jsonMetadataOffset:Tf(t,24),jsonMetadataLength:Tf(t,32),leafDirectoryOffset:Tf(t,40),leafDirectoryLength:Tf(t,48),tileDataOffset:Tf(t,56),tileDataLength:Tf(t,64),numAddressedTiles:Tf(t,72),numTileEntries:Tf(t,80),numTileContents:Tf(t,88),clustered:t.getUint8(96)===1,internalCompression:t.getUint8(97),tileCompression:t.getUint8(98),tileType:t.getUint8(99),minZoom:t.getUint8(100),maxZoom:t.getUint8(101),minLon:t.getInt32(102,!0)/1e7,minLat:t.getInt32(106,!0)/1e7,maxLon:t.getInt32(110,!0)/1e7,maxLat:t.getInt32(114,!0)/1e7,centerZoom:t.getUint8(118),centerLon:t.getInt32(119,!0)/1e7,centerLat:t.getInt32(123,!0)/1e7,etag:e}}Xa(PL,"bytesToHeader");function WB(n){let e={buf:new Uint8Array(n),pos:0},t=Y1(e),r=[],i=0;for(let s=0;s<t;s++){let a=Y1(e);r.push({tileId:i+a,offset:0,length:0,runLength:1}),i+=a}for(let s=0;s<t;s++)r[s].runLength=Y1(e);for(let s=0;s<t;s++)r[s].length=Y1(e);for(let s=0;s<t;s++){let a=Y1(e);a===0&&s>0?r[s].offset=r[s-1].offset+r[s-1].length:r[s].offset=a-1}return r}Xa(WB,"deserializeIndex");var KL=class extends Error{};Xa(KL,"EtagMismatch");var b6=KL;function GB(n,e){return Cc(this,null,function*(){let t=yield n.getBytes(0,16384);if(new DataView(t.data).getUint16(0,!0)!==19792)throw new Error("Wrong magic number for PMTiles archive");let r=t.data.slice(0,WY),i=PL(r,t.etag),s=t.data.slice(i.rootDirectoryOffset,i.rootDirectoryOffset+i.rootDirectoryLength),a=`${n.getKey()}|${i.etag||""}|${i.rootDirectoryOffset}|${i.rootDirectoryLength}`,o=WB(yield e(s,i.internalCompression));return[i,[a,o.length,o]]})}Xa(GB,"getHeaderAndRoot");function QB(n,e,t,r,i){return Cc(this,null,function*(){let s=yield n.getBytes(t,r,void 0,i.etag),a=yield e(s.data,i.internalCompression),o=WB(a);if(o.length===0)throw new Error("Empty directory is invalid");return o})}Xa(QB,"getDirectory");var qY=class{constructor(e=100,t=!0,r=gx){this.cache=new Map,this.maxCacheEntries=e,this.counter=1,this.decompress=r}getHeader(e){return Cc(this,null,function*(){let t=e.getKey(),r=this.cache.get(t);if(r)return r.lastUsed=this.counter++,r.data;let i=yield GB(e,this.decompress);return i[1]&&this.cache.set(i[1][0],{lastUsed:this.counter++,data:i[1][2]}),this.cache.set(t,{lastUsed:this.counter++,data:i[0]}),this.prune(),i[0]})}getDirectory(e,t,r,i){return Cc(this,null,function*(){let s=`${e.getKey()}|${i.etag||""}|${t}|${r}`,a=this.cache.get(s);if(a)return a.lastUsed=this.counter++,a.data;let o=yield QB(e,this.decompress,t,r,i);return this.cache.set(s,{lastUsed:this.counter++,data:o}),this.prune(),o})}prune(){if(this.cache.size>this.maxCacheEntries){let e=1/0,t;this.cache.forEach((r,i)=>{r.lastUsed<e&&(e=r.lastUsed,t=i)}),t&&this.cache.delete(t)}}invalidate(e){return Cc(this,null,function*(){this.cache.delete(e.getKey())})}};Xa(qY,"ResolvedValueCache");var DL=class{constructor(e=100,t=!0,r=gx){this.cache=new Map,this.invalidations=new Map,this.maxCacheEntries=e,this.counter=1,this.decompress=r}getHeader(e){return Cc(this,null,function*(){let t=e.getKey(),r=this.cache.get(t);if(r)return r.lastUsed=this.counter++,yield r.data;let i=new Promise((s,a)=>{GB(e,this.decompress).then(o=>{o[1]&&this.cache.set(o[1][0],{lastUsed:this.counter++,data:Promise.resolve(o[1][2])}),s(o[0]),this.prune()}).catch(o=>{a(o)})});return this.cache.set(t,{lastUsed:this.counter++,data:i}),i})}getDirectory(e,t,r,i){return Cc(this,null,function*(){let s=`${e.getKey()}|${i.etag||""}|${t}|${r}`,a=this.cache.get(s);if(a)return a.lastUsed=this.counter++,yield a.data;let o=new Promise((d,g)=>{QB(e,this.decompress,t,r,i).then(b=>{d(b),this.prune()}).catch(b=>{g(b)})});return this.cache.set(s,{lastUsed:this.counter++,data:o}),o})}prune(){if(this.cache.size>=this.maxCacheEntries){let e=1/0,t;this.cache.forEach((r,i)=>{r.lastUsed<e&&(e=r.lastUsed,t=i)}),t&&this.cache.delete(t)}}invalidate(e){return Cc(this,null,function*(){let t=e.getKey();if(this.invalidations.get(t))return yield this.invalidations.get(t);this.cache.delete(e.getKey());let r=new Promise((i,s)=>{this.getHeader(e).then(a=>{i(),this.invalidations.delete(t)}).catch(a=>{s(a)})});this.invalidations.set(t,r)})}};Xa(DL,"SharedPromiseCache");var YY=DL,RL=class{constructor(e,t,r){typeof e=="string"?this.source=new QY(e):this.source=e,r?this.decompress=r:this.decompress=gx,t?this.cache=t:this.cache=new YY}getHeader(){return Cc(this,null,function*(){return yield this.cache.getHeader(this.source)})}getZxyAttempt(e,t,r,i){return Cc(this,null,function*(){let s=OL(e,t,r),a=yield this.cache.getHeader(this.source);if(e<a.minZoom||e>a.maxZoom)return;let o=a.rootDirectoryOffset,d=a.rootDirectoryLength;for(let g=0;g<=3;g++){let b=yield this.cache.getDirectory(this.source,o,d,a),E=kL(b,s);if(E){if(E.runLength>0){let S=yield this.source.getBytes(a.tileDataOffset+E.offset,E.length,i,a.etag);return{data:yield this.decompress(S.data,a.tileCompression),cacheControl:S.cacheControl,expires:S.expires}}o=a.leafDirectoryOffset+E.offset,d=E.length}else return}throw new Error("Maximum directory depth exceeded")})}getZxy(e,t,r,i){return Cc(this,null,function*(){try{return yield this.getZxyAttempt(e,t,r,i)}catch(s){if(s instanceof b6)return this.cache.invalidate(this.source),yield this.getZxyAttempt(e,t,r,i);throw s}})}getMetadataAttempt(){return Cc(this,null,function*(){let e=yield this.cache.getHeader(this.source),t=yield this.source.getBytes(e.jsonMetadataOffset,e.jsonMetadataLength,void 0,e.etag),r=yield this.decompress(t.data,e.internalCompression),i=new TextDecoder("utf-8");return JSON.parse(i.decode(r))})}getMetadata(){return Cc(this,null,function*(){try{return yield this.getMetadataAttempt()}catch(e){if(e instanceof b6)return this.cache.invalidate(this.source),yield this.getMetadataAttempt();throw e}})}getTileJson(e){return Cc(this,null,function*(){let t=yield this.getHeader(),r=yield this.getMetadata(),i=IL(t.tileType);return{tilejson:"3.0.0",scheme:"xyz",tiles:[`${e}/{z}/{x}/{y}${i}`],vector_layers:r.vector_layers,attribution:r.attribution,description:r.description,name:r.name,version:r.version,bounds:[t.minLon,t.minLat,t.maxLon,t.maxLat],center:[t.centerLon,t.centerLat,t.centerZoom],minzoom:t.minZoom,maxzoom:t.maxZoom}})}};Xa(RL,"PMTiles");var x6=RL,$Y=8,VY={version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},HY={"*":{type:"source"}},ZY=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],XY={type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},JY={type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},e$={type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},t$={type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},n$={type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},r$={type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},i$={id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},o$=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],s$={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},a$={"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},l$={"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},u$={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},A$={"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},c$={"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},d$={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},h$={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},f$={type:"array",value:"*"},p$={type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},m$={type:"enum",values:{Point:{},LineString:{},Polygon:{}}},g$={type:"array",minimum:0,maximum:24,value:["number","color"],length:2},y$={type:"array",value:"*",minimum:1},v$={anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},C$={"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},_$={source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},b$={type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},x$=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],w$={"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},M$={"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},S$={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},E$={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},B$={"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},O$={"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},I$={"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},k$={"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},T$={duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},P$={"*":{type:"string"}},Ts={$version:$Y,$root:VY,sources:HY,source:ZY,source_vector:XY,source_raster:JY,source_raster_dem:e$,source_geojson:t$,source_video:n$,source_image:r$,layer:i$,layout:o$,layout_background:s$,layout_fill:a$,layout_circle:l$,layout_heatmap:u$,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:A$,layout_symbol:c$,layout_raster:d$,layout_hillshade:h$,filter:f$,filter_operator:p$,geometry_type:m$,function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:g$,expression:y$,light:v$,sky:C$,terrain:_$,projection:b$,paint:x$,paint_fill:w$,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:M$,paint_circle:S$,paint_heatmap:E$,paint_symbol:B$,paint_raster:O$,paint_hillshade:I$,paint_background:k$,transition:T$,"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:P$};const K$=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function D$(n,e){const t={};for(const r in n)r!=="ref"&&(t[r]=n[r]);return K$.forEach(r=>{r in e&&(t[r]=e[r])}),t}function R$(n){n=n.slice();const e=Object.create(null);for(let t=0;t<n.length;t++)e[n[t].id]=n[t];for(let t=0;t<n.length;t++)"ref"in n[t]&&(n[t]=D$(n[t],e[n[t].ref]));return n}function xa(n,e){if(Array.isArray(n)){if(!Array.isArray(e)||n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(!xa(n[t],e[t]))return!1;return!0}if(typeof n=="object"&&n!==null&&e!==null){if(typeof e!="object"||Object.keys(n).length!==Object.keys(e).length)return!1;for(const r in n)if(!xa(n[r],e[r]))return!1;return!0}return n===e}function Kf(n,e){n.push(e)}function FL(n,e,t){Kf(t,{command:"addSource",args:[n,e[n]]})}function LL(n,e,t){Kf(e,{command:"removeSource",args:[n]}),t[n]=!0}function F$(n,e,t,r){LL(n,t,r),FL(n,e,t)}function L$(n,e,t){let r;for(r in n[t])if(Object.prototype.hasOwnProperty.call(n[t],r)&&r!=="data"&&!xa(n[t][r],e[t][r]))return!1;for(r in e[t])if(Object.prototype.hasOwnProperty.call(e[t],r)&&r!=="data"&&!xa(n[t][r],e[t][r]))return!1;return!0}function U$(n,e,t,r){n=n||{},e=e||{};let i;for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(Object.prototype.hasOwnProperty.call(e,i)||LL(i,t,r));for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&(Object.prototype.hasOwnProperty.call(n,i)?xa(n[i],e[i])||(n[i].type==="geojson"&&e[i].type==="geojson"&&L$(n,e,i)?Kf(t,{command:"setGeoJSONSourceData",args:[i,e[i].data]}):F$(i,e,t,r)):FL(i,e,t))}function eb(n,e,t,r,i,s){n=n||{},e=e||{};for(const a in n)Object.prototype.hasOwnProperty.call(n,a)&&(xa(n[a],e[a])||t.push({command:s,args:[r,a,e[a],i]}));for(const a in e)!Object.prototype.hasOwnProperty.call(e,a)||Object.prototype.hasOwnProperty.call(n,a)||xa(n[a],e[a])||t.push({command:s,args:[r,a,e[a],i]})}function c7(n){return n.id}function d7(n,e){return n[e.id]=e,n}function z$(n,e,t){n=n||[],e=e||[];const r=n.map(c7),i=e.map(c7),s=n.reduce(d7,{}),a=e.reduce(d7,{}),o=r.slice(),d=Object.create(null);let g,b,E,S,I;for(let P=0,z=0;P<r.length;P++)g=r[P],Object.prototype.hasOwnProperty.call(a,g)?z++:(Kf(t,{command:"removeLayer",args:[g]}),o.splice(o.indexOf(g,z),1));for(let P=0,z=0;P<i.length;P++)g=i[i.length-1-P],o[o.length-1-P]!==g&&(Object.prototype.hasOwnProperty.call(s,g)?(Kf(t,{command:"removeLayer",args:[g]}),o.splice(o.lastIndexOf(g,o.length-z),1)):z++,S=o[o.length-P],Kf(t,{command:"addLayer",args:[a[g],S]}),o.splice(o.length-P,0,g),d[g]=!0);for(let P=0;P<i.length;P++)if(g=i[P],b=s[g],E=a[g],!(d[g]||xa(b,E))){if(!xa(b.source,E.source)||!xa(b["source-layer"],E["source-layer"])||!xa(b.type,E.type)){Kf(t,{command:"removeLayer",args:[g]}),S=o[o.lastIndexOf(g)+1],Kf(t,{command:"addLayer",args:[E,S]});continue}eb(b.layout,E.layout,t,g,null,"setLayoutProperty"),eb(b.paint,E.paint,t,g,null,"setPaintProperty"),xa(b.filter,E.filter)||Kf(t,{command:"setFilter",args:[g,E.filter]}),(!xa(b.minzoom,E.minzoom)||!xa(b.maxzoom,E.maxzoom))&&Kf(t,{command:"setLayerZoomRange",args:[g,E.minzoom,E.maxzoom]});for(I in b)Object.prototype.hasOwnProperty.call(b,I)&&(I==="layout"||I==="paint"||I==="filter"||I==="metadata"||I==="minzoom"||I==="maxzoom"||(I.indexOf("paint.")===0?eb(b[I],E[I],t,g,I.slice(6),"setPaintProperty"):xa(b[I],E[I])||Kf(t,{command:"setLayerProperty",args:[g,I,E[I]]})));for(I in E)!Object.prototype.hasOwnProperty.call(E,I)||Object.prototype.hasOwnProperty.call(b,I)||I==="layout"||I==="paint"||I==="filter"||I==="metadata"||I==="minzoom"||I==="maxzoom"||(I.indexOf("paint.")===0?eb(b[I],E[I],t,g,I.slice(6),"setPaintProperty"):xa(b[I],E[I])||Kf(t,{command:"setLayerProperty",args:[g,I,E[I]]}))}}function j$(n,e){if(!n)return[{command:"setStyle",args:[e]}];let t=[];try{if(!xa(n.version,e.version))return[{command:"setStyle",args:[e]}];xa(n.center,e.center)||t.push({command:"setCenter",args:[e.center]}),xa(n.centerAltitude,e.centerAltitude)||t.push({command:"setCenterAltitude",args:[e.centerAltitude]}),xa(n.zoom,e.zoom)||t.push({command:"setZoom",args:[e.zoom]}),xa(n.bearing,e.bearing)||t.push({command:"setBearing",args:[e.bearing]}),xa(n.pitch,e.pitch)||t.push({command:"setPitch",args:[e.pitch]}),xa(n.roll,e.roll)||t.push({command:"setRoll",args:[e.roll]}),xa(n.sprite,e.sprite)||t.push({command:"setSprite",args:[e.sprite]}),xa(n.glyphs,e.glyphs)||t.push({command:"setGlyphs",args:[e.glyphs]}),xa(n.transition,e.transition)||t.push({command:"setTransition",args:[e.transition]}),xa(n.light,e.light)||t.push({command:"setLight",args:[e.light]}),xa(n.terrain,e.terrain)||t.push({command:"setTerrain",args:[e.terrain]}),xa(n.sky,e.sky)||t.push({command:"setSky",args:[e.sky]}),xa(n.projection,e.projection)||t.push({command:"setProjection",args:[e.projection]});const r={},i=[];U$(n.sources,e.sources,i,r);const s=[];n.layers&&n.layers.forEach(a=>{"source"in a&&r[a.source]?t.push({command:"removeLayer",args:[a.id]}):s.push(a)}),t=t.concat(i),z$(s,e.layers,t)}catch(r){console.warn("Unable to compute style diff:",r),t=[{command:"setStyle",args:[e]}]}return t}class Sr{constructor(e,t,r,i){this.message=(e?`${e}: `:"")+r,i&&(this.identifier=i),t!=null&&t.__line__&&(this.line=t.__line__)}}function ky(n,...e){for(const t of e)for(const r in t)n[r]=t[r];return n}class $p extends Error{constructor(e,t){super(t),this.message=t,this.key=e}}let N$=class UL{constructor(e,t=[]){this.parent=e,this.bindings={};for(const[r,i]of t)this.bindings[r]=i}concat(e){return new UL(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return this.bindings[e]?!0:this.parent?this.parent.has(e):!1}};const yx={kind:"null"},kr={kind:"number"},us={kind:"string"},qo={kind:"boolean"},tm={kind:"color"},vx={kind:"projectionDefinition"},py={kind:"object"},$o={kind:"value"},W$={kind:"error"},Cx={kind:"collator"},_x={kind:"formatted"},bx={kind:"padding"},HC={kind:"resolvedImage"},xx={kind:"variableAnchorOffsetCollection"};function Xh(n,e){return{kind:"array",itemType:n,N:e}}function Yl(n){if(n.kind==="array"){const e=Yl(n.itemType);return typeof n.N=="number"?`array<${e}, ${n.N}>`:n.itemType.kind==="value"?"array":`array<${e}>`}else return n.kind}const G$=[yx,kr,us,qo,tm,vx,_x,py,Xh($o),bx,HC,xx];function gC(n,e){if(e.kind==="error")return null;if(n.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!gC(n.itemType,e.itemType))&&(typeof n.N!="number"||n.N===e.N))return null}else{if(n.kind===e.kind)return null;if(n.kind==="value"){for(const t of G$)if(!gC(t,e))return null}}return`Expected ${Yl(n)} but found ${Yl(e)} instead.`}function qB(n,e){return e.some(t=>t.kind===n.kind)}function kg(n,e){return e.some(t=>t==="null"?n===null:t==="array"?Array.isArray(n):t==="object"?n&&!Array.isArray(n)&&typeof n=="object":t===typeof n)}function v1(n,e){return n.kind==="array"&&e.kind==="array"?n.itemType.kind===e.itemType.kind&&typeof n.N=="number":n.kind===e.kind}const zL=.96422,jL=1,NL=.82521,WL=4/29,my=6/29,GL=3*my*my,Q$=my*my*my,q$=Math.PI/180,Y$=180/Math.PI;function QL(n){return n=n%360,n<0&&(n+=360),n}function qL([n,e,t,r]){n=u4(n),e=u4(e),t=u4(t);let i,s;const a=A4((.2225045*n+.7168786*e+.0606169*t)/jL);n===e&&e===t?i=s=a:(i=A4((.4360747*n+.3850649*e+.1430804*t)/zL),s=A4((.0139322*n+.0971045*e+.7141733*t)/NL));const o=116*a-16;return[o<0?0:o,500*(i-a),200*(a-s),r]}function u4(n){return n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function A4(n){return n>Q$?Math.pow(n,1/3):n/GL+WL}function YL([n,e,t,r]){let i=(n+16)/116,s=isNaN(e)?i:i+e/500,a=isNaN(t)?i:i-t/200;return i=jL*d4(i),s=zL*d4(s),a=NL*d4(a),[c4(3.1338561*s-1.6168667*i-.4906146*a),c4(-.9787684*s+1.9161415*i+.033454*a),c4(.0719453*s-.2289914*i+1.4052427*a),r]}function c4(n){return n=n<=.00304?12.92*n:1.055*Math.pow(n,1/2.4)-.055,n<0?0:n>1?1:n}function d4(n){return n>my?n*n*n:GL*(n-WL)}function $$(n){const[e,t,r,i]=qL(n),s=Math.sqrt(t*t+r*r);return[Math.round(s*1e4)?QL(Math.atan2(r,t)*Y$):NaN,s,e,i]}function V$([n,e,t,r]){return n=isNaN(n)?0:n*q$,YL([t,Math.cos(n)*e,Math.sin(n)*e,r])}function H$([n,e,t,r]){n=QL(n),e/=100,t/=100;function i(s){const a=(s+n/30)%12,o=e*Math.min(t,1-t);return t-o*Math.max(-1,Math.min(a-3,9-a,1))}return[i(0),i(8),i(4),r]}function Z$(n){if(n=n.toLowerCase().trim(),n==="transparent")return[0,0,0,0];const e=X$[n];if(e){const[i,s,a]=e;return[i/255,s/255,a/255,1]}if(n.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(n)){const s=n.length<6?1:2;let a=1;return[tb(n.slice(a,a+=s)),tb(n.slice(a,a+=s)),tb(n.slice(a,a+=s)),tb(n.slice(a,a+s)||"ff")]}if(n.startsWith("rgb")){const i=/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,s=n.match(i);if(s){const[a,o,d,g,b,E,S,I,P,z,j,q]=s,Y=[g||" ",S||" ",z].join("");if(Y==="  "||Y==="  /"||Y===",,"||Y===",,,"){const ie=[d,E,P].join(""),te=ie==="%%%"?100:ie===""?255:0;if(te){const V=[$1(+o/te,0,1),$1(+b/te,0,1),$1(+I/te,0,1),j?h7(+j,q):1];if(f7(V))return V}}return}}const t=/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,r=n.match(t);if(r){const[i,s,a,o,d,g,b,E,S]=r,I=[a||" ",d||" ",b].join("");if(I==="  "||I==="  /"||I===",,"||I===",,,"){const P=[+s,$1(+o,0,100),$1(+g,0,100),E?h7(+E,S):1];if(f7(P))return H$(P)}}}function tb(n){return parseInt(n.padEnd(2,n),16)/255}function h7(n,e){return $1(e?n/100:n,0,1)}function $1(n,e,t){return Math.min(Math.max(e,n),t)}function f7(n){return!n.some(Number.isNaN)}const X$={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function P0(n,e,t){return n+t*(e-n)}function yC(n,e,t){return n.map((r,i)=>P0(r,e[i],t))}function J$(n){return n==="rgb"||n==="hcl"||n==="lab"}let Fl=class V1{constructor(e,t,r,i=1,s=!0){this.r=e,this.g=t,this.b=r,this.a=i,s||(this.r*=i,this.g*=i,this.b*=i,i||this.overwriteGetter("rgb",[e,t,r,i]))}static parse(e){if(e instanceof V1)return e;if(typeof e!="string")return;const t=Z$(e);if(t)return new V1(...t,!1)}get rgb(){const{r:e,g:t,b:r,a:i}=this,s=i||1/0;return this.overwriteGetter("rgb",[e/s,t/s,r/s,i])}get hcl(){return this.overwriteGetter("hcl",$$(this.rgb))}get lab(){return this.overwriteGetter("lab",qL(this.rgb))}overwriteGetter(e,t){return Object.defineProperty(this,e,{value:t}),t}toString(){const[e,t,r,i]=this.rgb;return`rgba(${[e,t,r].map(s=>Math.round(s*255)).join(",")},${i})`}static interpolate(e,t,r,i="rgb"){switch(i){case"rgb":{const[s,a,o,d]=yC(e.rgb,t.rgb,r);return new V1(s,a,o,d,!1)}case"hcl":{const[s,a,o,d]=e.hcl,[g,b,E,S]=t.hcl;let I,P;if(!isNaN(s)&&!isNaN(g)){let ie=g-s;g>s&&ie>180?ie-=360:g<s&&s-g>180&&(ie+=360),I=s+r*ie}else isNaN(s)?isNaN(g)?I=NaN:(I=g,(o===1||o===0)&&(P=b)):(I=s,(E===1||E===0)&&(P=a));const[z,j,q,Y]=V$([I,P??P0(a,b,r),P0(o,E,r),P0(d,S,r)]);return new V1(z,j,q,Y,!1)}case"lab":{const[s,a,o,d]=YL(yC(e.lab,t.lab,r));return new V1(s,a,o,d,!1)}}}};Fl.black=new Fl(0,0,0,1);Fl.white=new Fl(1,1,1,1);Fl.transparent=new Fl(0,0,0,0);Fl.red=new Fl(1,0,0,1);let YB=class{constructor(e,t,r){e?this.sensitivity=t?"variant":"case":this.sensitivity=t?"accent":"base",this.locale=r,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,t){return this.collator.compare(e,t)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}};const eV=["bottom","center","top"];let w6=class{constructor(e,t,r,i,s,a){this.text=e,this.image=t,this.scale=r,this.fontStack=i,this.textColor=s,this.verticalAlign=a}},Gy=class Nb{constructor(e){this.sections=e}static fromString(e){return new Nb([new w6(e,null,null,null,null,null)])}isEmpty(){return this.sections.length===0?!0:!this.sections.some(e=>e.text.length!==0||e.image&&e.image.name.length!==0)}static factory(e){return e instanceof Nb?e:Nb.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map(e=>e.text).join("")}};class jd{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof jd)return e;if(typeof e=="number")return new jd([e,e,e,e]);if(Array.isArray(e)&&!(e.length<1||e.length>4)){for(const t of e)if(typeof t!="number")return;switch(e.length){case 1:e=[e[0],e[0],e[0],e[0]];break;case 2:e=[e[0],e[1],e[0],e[1]];break;case 3:e=[e[0],e[1],e[2],e[1]];break}return new jd(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,r){return new jd(yC(e.values,t.values,r))}}let aA=class{constructor(e){this.name="ExpressionEvaluationError",this.message=e}toJSON(){return this.message}};const tV=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class jf{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof jf)return e;if(!(!Array.isArray(e)||e.length<1||e.length%2!==0)){for(let t=0;t<e.length;t+=2){const r=e[t],i=e[t+1];if(typeof r!="string"||!tV.has(r)||!Array.isArray(i)||i.length!==2||typeof i[0]!="number"||typeof i[1]!="number")return}return new jf(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,r){const i=e.values,s=t.values;if(i.length!==s.length)throw new aA(`Cannot interpolate values of different length. from: ${e.toString()}, to: ${t.toString()}`);const a=[];for(let o=0;o<i.length;o+=2){if(i[o]!==s[o])throw new aA(`Cannot interpolate values containing mismatched anchors. from[${o}]: ${i[o]}, to[${o}]: ${s[o]}`);a.push(i[o]);const[d,g]=i[o+1],[b,E]=s[o+1];a.push([P0(d,b,r),P0(g,E,r)])}return new jf(a)}}let qg=class $L{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new $L({name:e,available:!1}):null}};class Rf{constructor(e,t,r){this.from=e,this.to=t,this.transition=r}static interpolate(e,t,r){return new Rf(e,t,r)}static parse(e){if(e instanceof Rf)return e;if(Array.isArray(e)&&e.length===3&&typeof e[0]=="string"&&typeof e[1]=="string"&&typeof e[2]=="number")return new Rf(e[0],e[1],e[2]);if(typeof e=="object"&&typeof e.from=="string"&&typeof e.to=="string"&&typeof e.transition=="number")return new Rf(e.from,e.to,e.transition);if(typeof e=="string")return new Rf(e,e,1)}}function VL(n,e,t,r){return typeof n=="number"&&n>=0&&n<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof t=="number"&&t>=0&&t<=255?typeof r>"u"||typeof r=="number"&&r>=0&&r<=1?null:`Invalid rgba value [${[n,e,t,r].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof r=="number"?[n,e,t,r]:[n,e,t]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function vC(n){if(n===null||typeof n=="string"||typeof n=="boolean"||typeof n=="number"||n instanceof Rf||n instanceof Fl||n instanceof YB||n instanceof Gy||n instanceof jd||n instanceof jf||n instanceof qg)return!0;if(Array.isArray(n)){for(const e of n)if(!vC(e))return!1;return!0}else if(typeof n=="object"){for(const e in n)if(!vC(n[e]))return!1;return!0}else return!1}function HA(n){if(n===null)return yx;if(typeof n=="string")return us;if(typeof n=="boolean")return qo;if(typeof n=="number")return kr;if(n instanceof Fl)return tm;if(n instanceof Rf)return vx;if(n instanceof YB)return Cx;if(n instanceof Gy)return _x;if(n instanceof jd)return bx;if(n instanceof jf)return xx;if(n instanceof qg)return HC;if(Array.isArray(n)){const e=n.length;let t;for(const r of n){const i=HA(r);if(!t)t=i;else{if(t===i)continue;t=$o;break}}return Xh(t||$o,e)}else return py}function iC(n){const e=typeof n;return n===null?"":e==="string"||e==="number"||e==="boolean"?String(n):n instanceof Fl||n instanceof Rf||n instanceof Gy||n instanceof jd||n instanceof jf||n instanceof qg?n.toString():JSON.stringify(n)}let u2=class HL{constructor(e,t){this.type=e,this.value=t}static parse(e,t){if(e.length!==2)return t.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!vC(e[1]))return t.error("invalid value");const r=e[1];let i=HA(r);const s=t.expectedType;return i.kind==="array"&&i.N===0&&s&&s.kind==="array"&&(typeof s.N!="number"||s.N===0)&&(i=s),new HL(i,r)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}};const nb={string:us,number:kr,boolean:qo,object:py};let Pm=class ZL{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let r=1,i;const s=e[0];if(s==="array"){let o;if(e.length>2){const g=e[1];if(typeof g!="string"||!(g in nb)||g==="object")return t.error('The item type argument of "array" must be one of string, number, boolean',1);o=nb[g],r++}else o=$o;let d;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);d=e[2],r++}i=Xh(o,d)}else{if(!nb[s])throw new Error(`Types doesn't contain name = ${s}`);i=nb[s]}const a=[];for(;r<e.length;r++){const o=t.parse(e[r],r,$o);if(!o)return null;a.push(o)}return new ZL(i,a)}evaluate(e){for(let t=0;t<this.args.length;t++){const r=this.args[t].evaluate(e);if(gC(this.type,HA(r))){if(t===this.args.length-1)throw new aA(`Expected value to be of type ${Yl(this.type)}, but found ${Yl(HA(r))} instead.`)}else return r}throw new Error}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}};const p7={"to-boolean":qo,"to-color":tm,"to-number":kr,"to-string":us};let oy=class XL{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const r=e[0];if(!p7[r])throw new Error(`Can't parse ${r} as it is not part of the known types`);if((r==="to-boolean"||r==="to-string")&&e.length!==2)return t.error("Expected one argument.");const i=p7[r],s=[];for(let a=1;a<e.length;a++){const o=t.parse(e[a],a,$o);if(!o)return null;s.push(o)}return new XL(i,s)}evaluate(e){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(e);case"color":{let t,r;for(const i of this.args){if(t=i.evaluate(e),r=null,t instanceof Fl)return t;if(typeof t=="string"){const s=e.parseColor(t);if(s)return s}else if(Array.isArray(t)&&(t.length<3||t.length>4?r=`Invalid rgba value ${JSON.stringify(t)}: expected an array containing either three or four numeric values.`:r=VL(t[0],t[1],t[2],t[3]),!r))return new Fl(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new aA(r||`Could not parse color from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"padding":{let t;for(const r of this.args){t=r.evaluate(e);const i=jd.parse(t);if(i)return i}throw new aA(`Could not parse padding from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"variableAnchorOffsetCollection":{let t;for(const r of this.args){t=r.evaluate(e);const i=jf.parse(t);if(i)return i}throw new aA(`Could not parse variableAnchorOffsetCollection from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"number":{let t=null;for(const r of this.args){if(t=r.evaluate(e),t===null)return 0;const i=Number(t);if(!isNaN(i))return i}throw new aA(`Could not convert ${JSON.stringify(t)} to number.`)}case"formatted":return Gy.fromString(iC(this.args[0].evaluate(e)));case"resolvedImage":return qg.fromString(iC(this.args[0].evaluate(e)));case"projectionDefinition":return this.args[0].evaluate(e);default:return iC(this.args[0].evaluate(e))}}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}};const nV=["Unknown","Point","LineString","Polygon"];let JL=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?nV[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(e){let t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=Fl.parse(e)),t}},eU=class tU{constructor(e,t,r=[],i,s=new N$,a=[]){this.registry=e,this.path=r,this.key=r.map(o=>`[${o}]`).join(""),this.scope=s,this.errors=a,this.expectedType=i,this._isConstant=t}parse(e,t,r,i,s={}){return t?this.concat(t,r,i)._parse(e,s):this._parse(e,s)}_parse(e,t){(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number")&&(e=["literal",e]);function r(i,s,a){return a==="assert"?new Pm(s,[i]):a==="coerce"?new oy(s,[i]):i}if(Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const i=e[0];if(typeof i!="string")return this.error(`Expression name must be a string, but found ${typeof i} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const s=this.registry[i];if(s){let a=s.parse(e,this);if(!a)return null;if(this.expectedType){const o=this.expectedType,d=a.type;if((o.kind==="string"||o.kind==="number"||o.kind==="boolean"||o.kind==="object"||o.kind==="array")&&d.kind==="value")a=r(a,o,t.typeAnnotation||"assert");else if(o.kind==="projectionDefinition"&&(d.kind==="string"||d.kind==="array"))a=r(a,o,t.typeAnnotation||"coerce");else if((o.kind==="color"||o.kind==="formatted"||o.kind==="resolvedImage")&&(d.kind==="value"||d.kind==="string"))a=r(a,o,t.typeAnnotation||"coerce");else if(o.kind==="padding"&&(d.kind==="value"||d.kind==="number"||d.kind==="array"))a=r(a,o,t.typeAnnotation||"coerce");else if(o.kind==="variableAnchorOffsetCollection"&&(d.kind==="value"||d.kind==="array"))a=r(a,o,t.typeAnnotation||"coerce");else if(this.checkSubtype(o,d))return null}if(!(a instanceof u2)&&a.type.kind!=="resolvedImage"&&this._isConstant(a)){const o=new JL;try{a=new u2(a.type,a.evaluate(o))}catch(d){return this.error(d.message),null}}return a}return this.error(`Unknown expression "${i}". If you wanted a literal array, use ["literal", [...]].`,0)}else return typeof e>"u"?this.error("'undefined' value invalid. Use null instead."):typeof e=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof e} instead.`)}concat(e,t,r){const i=typeof e=="number"?this.path.concat(e):this.path,s=r?this.scope.concat(r):this.scope;return new tU(this.registry,this._isConstant,i,t||null,s,this.errors)}error(e,...t){const r=`${this.key}${t.map(i=>`[${i}]`).join("")}`;this.errors.push(new $p(r,e))}checkSubtype(e,t){const r=gC(e,t);return r&&this.error(r),r}},nU=class rU{constructor(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const t of this.bindings)e(t[1]);e(this.result)}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const r=[];for(let s=1;s<e.length-1;s+=2){const a=e[s];if(typeof a!="string")return t.error(`Expected string, but found ${typeof a} instead.`,s);if(/[^a-zA-Z0-9_]/.test(a))return t.error("Variable names must contain only alphanumeric characters or '_'.",s);const o=t.parse(e[s+1],s+1);if(!o)return null;r.push([a,o])}const i=t.parse(e[e.length-1],e.length-1,t.expectedType,r);return i?new rU(r,i):null}outputDefined(){return this.result.outputDefined()}},iU=class oU{constructor(e,t){this.type=t.type,this.name=e,this.boundExpression=t}static parse(e,t){if(e.length!==2||typeof e[1]!="string")return t.error("'var' expression requires exactly one string literal argument.");const r=e[1];return t.scope.has(r)?new oU(r,t.scope.get(r)):t.error(`Unknown variable "${r}". Make sure "${r}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}},rV=class sU{constructor(e,t,r){this.type=e,this.index=t,this.input=r}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,kr),i=t.parse(e[2],2,Xh(t.expectedType||$o));if(!r||!i)return null;const s=i.type;return new sU(s.itemType,r,i)}evaluate(e){const t=this.index.evaluate(e),r=this.input.evaluate(e);if(t<0)throw new aA(`Array index out of bounds: ${t} < 0.`);if(t>=r.length)throw new aA(`Array index out of bounds: ${t} > ${r.length-1}.`);if(t!==Math.floor(t))throw new aA(`Array index must be an integer, but found ${t} instead.`);return r[t]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}},iV=class aU{constructor(e,t){this.type=qo,this.needle=e,this.haystack=t}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,$o),i=t.parse(e[2],2,$o);return!r||!i?null:qB(r.type,[qo,us,kr,yx,$o])?new aU(r,i):t.error(`Expected first argument to be of type boolean, string, number or null, but found ${Yl(r.type)} instead`)}evaluate(e){const t=this.needle.evaluate(e),r=this.haystack.evaluate(e);if(!r)return!1;if(!kg(t,["boolean","string","number","null"]))throw new aA(`Expected first argument to be of type boolean, string, number or null, but found ${Yl(HA(t))} instead.`);if(!kg(r,["string","array"]))throw new aA(`Expected second argument to be of type array or string, but found ${Yl(HA(r))} instead.`);return r.indexOf(t)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}},oV=class M6{constructor(e,t,r){this.type=kr,this.needle=e,this.haystack=t,this.fromIndex=r}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,$o),i=t.parse(e[2],2,$o);if(!r||!i)return null;if(!qB(r.type,[qo,us,kr,yx,$o]))return t.error(`Expected first argument to be of type boolean, string, number or null, but found ${Yl(r.type)} instead`);if(e.length===4){const s=t.parse(e[3],3,kr);return s?new M6(r,i,s):null}else return new M6(r,i)}evaluate(e){const t=this.needle.evaluate(e),r=this.haystack.evaluate(e);if(!kg(t,["boolean","string","number","null"]))throw new aA(`Expected first argument to be of type boolean, string, number or null, but found ${Yl(HA(t))} instead.`);let i;if(this.fromIndex&&(i=this.fromIndex.evaluate(e)),kg(r,["string"])){const s=r.indexOf(t,i);return s===-1?-1:[...r.slice(0,s)].length}else{if(kg(r,["array"]))return r.indexOf(t,i);throw new aA(`Expected second argument to be of type array or string, but found ${Yl(HA(r))} instead.`)}}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}},sV=class lU{constructor(e,t,r,i,s,a){this.inputType=e,this.type=t,this.input=r,this.cases=i,this.outputs=s,this.otherwise=a}static parse(e,t){if(e.length<5)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!==1)return t.error("Expected an even number of arguments.");let r,i;t.expectedType&&t.expectedType.kind!=="value"&&(i=t.expectedType);const s={},a=[];for(let g=2;g<e.length-1;g+=2){let b=e[g];const E=e[g+1];Array.isArray(b)||(b=[b]);const S=t.concat(g);if(b.length===0)return S.error("Expected at least one branch label.");for(const P of b){if(typeof P!="number"&&typeof P!="string")return S.error("Branch labels must be numbers or strings.");if(typeof P=="number"&&Math.abs(P)>Number.MAX_SAFE_INTEGER)return S.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof P=="number"&&Math.floor(P)!==P)return S.error("Numeric branch labels must be integer values.");if(!r)r=HA(P);else if(S.checkSubtype(r,HA(P)))return null;if(typeof s[String(P)]<"u")return S.error("Branch labels must be unique.");s[String(P)]=a.length}const I=t.parse(E,g,i);if(!I)return null;i=i||I.type,a.push(I)}const o=t.parse(e[1],1,$o);if(!o)return null;const d=t.parse(e[e.length-1],e.length-1,i);return!d||o.type.kind!=="value"&&t.concat(1).checkSubtype(r,o.type)?null:new lU(r,i,o,s,a,d)}evaluate(e){const t=this.input.evaluate(e);return(HA(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}},aV=class uU{constructor(e,t,r){this.type=e,this.branches=t,this.otherwise=r}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!==0)return t.error("Expected an odd number of arguments.");let r;t.expectedType&&t.expectedType.kind!=="value"&&(r=t.expectedType);const i=[];for(let a=1;a<e.length-1;a+=2){const o=t.parse(e[a],a,qo);if(!o)return null;const d=t.parse(e[a+1],a+1,r);if(!d)return null;i.push([o,d]),r=r||d.type}const s=t.parse(e[e.length-1],e.length-1,r);if(!s)return null;if(!r)throw new Error("Can't infer output type");return new uU(r,i,s)}evaluate(e){for(const[t,r]of this.branches)if(t.evaluate(e))return r.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[t,r]of this.branches)e(t),e(r);e(this.otherwise)}outputDefined(){return this.branches.every(([e,t])=>t.outputDefined())&&this.otherwise.outputDefined()}},lV=class S6{constructor(e,t,r,i){this.type=e,this.input=t,this.beginIndex=r,this.endIndex=i}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,$o),i=t.parse(e[2],2,kr);if(!r||!i)return null;if(!qB(r.type,[Xh($o),us,$o]))return t.error(`Expected first argument to be of type array or string, but found ${Yl(r.type)} instead`);if(e.length===4){const s=t.parse(e[3],3,kr);return s?new S6(r.type,r,i,s):null}else return new S6(r.type,r,i)}evaluate(e){const t=this.input.evaluate(e),r=this.beginIndex.evaluate(e);let i;if(this.endIndex&&(i=this.endIndex.evaluate(e)),kg(t,["string"]))return[...t].slice(r,i).join("");if(kg(t,["array"]))return t.slice(r,i);throw new aA(`Expected first argument to be of type array or string, but found ${Yl(HA(t))} instead.`)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}};function wx(n,e){const t=n.length-1;let r=0,i=t,s=0,a,o;for(;r<=i;)if(s=Math.floor((r+i)/2),a=n[s],o=n[s+1],a<=e){if(s===t||e<o)return s;r=s+1}else if(a>e)i=s-1;else throw new aA("Input is not a number.");return 0}let AU=class cU{constructor(e,t,r){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(const[i,s]of r)this.labels.push(i),this.outputs.push(s)}static parse(e,t){if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");const r=t.parse(e[1],1,kr);if(!r)return null;const i=[];let s=null;t.expectedType&&t.expectedType.kind!=="value"&&(s=t.expectedType);for(let a=1;a<e.length;a+=2){const o=a===1?-1/0:e[a],d=e[a+1],g=a,b=a+1;if(typeof o!="number")return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',g);if(i.length&&i[i.length-1][0]>=o)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',g);const E=t.parse(d,b,s);if(!E)return null;s=s||E.type,i.push([o,E])}return new cU(s,r,i)}evaluate(e){const t=this.labels,r=this.outputs;if(t.length===1)return r[0].evaluate(e);const i=this.input.evaluate(e);if(i<=t[0])return r[0].evaluate(e);const s=t.length;if(i>=t[s-1])return r[s-1].evaluate(e);const a=wx(t,i);return r[a].evaluate(e)}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}};function uV(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var h4,m7;function AV(){if(m7)return h4;m7=1,h4=n;function n(e,t,r,i){this.cx=3*e,this.bx=3*(r-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(i-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=t,this.p2x=r,this.p2y=i}return n.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,t){if(t===void 0&&(t=1e-6),e<0)return 0;if(e>1)return 1;for(var r=e,i=0;i<8;i++){var s=this.sampleCurveX(r)-e;if(Math.abs(s)<t)return r;var a=this.sampleCurveDerivativeX(r);if(Math.abs(a)<1e-6)break;r=r-s/a}var o=0,d=1;for(r=e,i=0;i<20&&(s=this.sampleCurveX(r),!(Math.abs(s-e)<t));i++)e>s?o=r:d=r,r=(d-o)*.5+o;return r},solve:function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}},h4}var cV=AV(),dV=uV(cV);let Rm=class E6{constructor(e,t,r,i,s){this.type=e,this.operator=t,this.interpolation=r,this.input=i,this.labels=[],this.outputs=[];for(const[a,o]of s)this.labels.push(a),this.outputs.push(o)}static interpolationFactor(e,t,r,i){let s=0;if(e.name==="exponential")s=f4(t,e.base,r,i);else if(e.name==="linear")s=f4(t,1,r,i);else if(e.name==="cubic-bezier"){const a=e.controlPoints;s=new dV(a[0],a[1],a[2],a[3]).solve(f4(t,1,r,i))}return s}static parse(e,t){let[r,i,s,...a]=e;if(!Array.isArray(i)||i.length===0)return t.error("Expected an interpolation type expression.",1);if(i[0]==="linear")i={name:"linear"};else if(i[0]==="exponential"){const g=i[1];if(typeof g!="number")return t.error("Exponential interpolation requires a numeric base.",1,1);i={name:"exponential",base:g}}else if(i[0]==="cubic-bezier"){const g=i.slice(1);if(g.length!==4||g.some(b=>typeof b!="number"||b<0||b>1))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);i={name:"cubic-bezier",controlPoints:g}}else return t.error(`Unknown interpolation type ${String(i[0])}`,1,0);if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");if(s=t.parse(s,2,kr),!s)return null;const o=[];let d=null;r==="interpolate-hcl"||r==="interpolate-lab"?d=tm:t.expectedType&&t.expectedType.kind!=="value"&&(d=t.expectedType);for(let g=0;g<a.length;g+=2){const b=a[g],E=a[g+1],S=g+3,I=g+4;if(typeof b!="number")return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',S);if(o.length&&o[o.length-1][0]>=b)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',S);const P=t.parse(E,I,d);if(!P)return null;d=d||P.type,o.push([b,P])}return!v1(d,kr)&&!v1(d,vx)&&!v1(d,tm)&&!v1(d,bx)&&!v1(d,xx)&&!v1(d,Xh(kr))?t.error(`Type ${Yl(d)} is not interpolatable.`):new E6(d,r,i,s,o)}evaluate(e){const t=this.labels,r=this.outputs;if(t.length===1)return r[0].evaluate(e);const i=this.input.evaluate(e);if(i<=t[0])return r[0].evaluate(e);const s=t.length;if(i>=t[s-1])return r[s-1].evaluate(e);const a=wx(t,i),o=t[a],d=t[a+1],g=E6.interpolationFactor(this.interpolation,i,o,d),b=r[a].evaluate(e),E=r[a+1].evaluate(e);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return P0(b,E,g);case"color":return Fl.interpolate(b,E,g);case"padding":return jd.interpolate(b,E,g);case"variableAnchorOffsetCollection":return jf.interpolate(b,E,g);case"array":return yC(b,E,g);case"projectionDefinition":return Rf.interpolate(b,E,g)}case"interpolate-hcl":return Fl.interpolate(b,E,g,"hcl");case"interpolate-lab":return Fl.interpolate(b,E,g,"lab")}}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}};function f4(n,e,t,r){const i=r-t,s=n-t;return i===0?0:e===1?s/i:(Math.pow(e,s)-1)/(Math.pow(e,i)-1)}const hV={color:Fl.interpolate,number:P0,padding:jd.interpolate,variableAnchorOffsetCollection:jf.interpolate,array:yC};let dU=class B6{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let r=null;const i=t.expectedType;i&&i.kind!=="value"&&(r=i);const s=[];for(const o of e.slice(1)){const d=t.parse(o,1+s.length,r,void 0,{typeAnnotation:"omit"});if(!d)return null;r=r||d.type,s.push(d)}if(!r)throw new Error("No output type");return i&&s.some(o=>gC(i,o.type))?new B6($o,s):new B6(r,s)}evaluate(e){let t=null,r=0,i;for(const s of this.args)if(r++,t=s.evaluate(e),t&&t instanceof qg&&!t.available&&(i||(i=t.name),t=null,r===this.args.length&&(t=i)),t!==null)break;return t}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}};function g7(n,e){return n==="=="||n==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function fV(n,e,t){return e===t}function pV(n,e,t){return e!==t}function mV(n,e,t){return e<t}function gV(n,e,t){return e>t}function yV(n,e,t){return e<=t}function vV(n,e,t){return e>=t}function hU(n,e,t,r){return r.compare(e,t)===0}function CV(n,e,t,r){return!hU(n,e,t,r)}function _V(n,e,t,r){return r.compare(e,t)<0}function bV(n,e,t,r){return r.compare(e,t)>0}function xV(n,e,t,r){return r.compare(e,t)<=0}function wV(n,e,t,r){return r.compare(e,t)>=0}function Qy(n,e,t){const r=n!=="=="&&n!=="!=";return class fU{constructor(s,a,o){this.type=qo,this.lhs=s,this.rhs=a,this.collator=o,this.hasUntypedArgument=s.type.kind==="value"||a.type.kind==="value"}static parse(s,a){if(s.length!==3&&s.length!==4)return a.error("Expected two or three arguments.");const o=s[0];let d=a.parse(s[1],1,$o);if(!d)return null;if(!g7(o,d.type))return a.concat(1).error(`"${o}" comparisons are not supported for type '${Yl(d.type)}'.`);let g=a.parse(s[2],2,$o);if(!g)return null;if(!g7(o,g.type))return a.concat(2).error(`"${o}" comparisons are not supported for type '${Yl(g.type)}'.`);if(d.type.kind!==g.type.kind&&d.type.kind!=="value"&&g.type.kind!=="value")return a.error(`Cannot compare types '${Yl(d.type)}' and '${Yl(g.type)}'.`);r&&(d.type.kind==="value"&&g.type.kind!=="value"?d=new Pm(g.type,[d]):d.type.kind!=="value"&&g.type.kind==="value"&&(g=new Pm(d.type,[g])));let b=null;if(s.length===4){if(d.type.kind!=="string"&&g.type.kind!=="string"&&d.type.kind!=="value"&&g.type.kind!=="value")return a.error("Cannot use collator to compare non-string types.");if(b=a.parse(s[3],3,Cx),!b)return null}return new fU(d,g,b)}evaluate(s){const a=this.lhs.evaluate(s),o=this.rhs.evaluate(s);if(r&&this.hasUntypedArgument){const d=HA(a),g=HA(o);if(d.kind!==g.kind||!(d.kind==="string"||d.kind==="number"))throw new aA(`Expected arguments for "${n}" to be (string, string) or (number, number), but found (${d.kind}, ${g.kind}) instead.`)}if(this.collator&&!r&&this.hasUntypedArgument){const d=HA(a),g=HA(o);if(d.kind!=="string"||g.kind!=="string")return e(s,a,o)}return this.collator?t(s,a,o,this.collator.evaluate(s)):e(s,a,o)}eachChild(s){s(this.lhs),s(this.rhs),this.collator&&s(this.collator)}outputDefined(){return!0}}}const MV=Qy("==",fV,hU),SV=Qy("!=",pV,CV),EV=Qy("<",mV,_V),BV=Qy(">",gV,bV),OV=Qy("<=",yV,xV),IV=Qy(">=",vV,wV);let pU=class mU{constructor(e,t,r){this.type=Cx,this.locale=r,this.caseSensitive=e,this.diacriticSensitive=t}static parse(e,t){if(e.length!==2)return t.error("Expected one argument.");const r=e[1];if(typeof r!="object"||Array.isArray(r))return t.error("Collator options argument must be an object.");const i=t.parse(r["case-sensitive"]===void 0?!1:r["case-sensitive"],1,qo);if(!i)return null;const s=t.parse(r["diacritic-sensitive"]===void 0?!1:r["diacritic-sensitive"],1,qo);if(!s)return null;let a=null;return r.locale&&(a=t.parse(r.locale,1,us),!a)?null:new mU(i,s,a)}evaluate(e){return new YB(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}},kV=class gU{constructor(e,t,r,i,s){this.type=us,this.number=e,this.locale=t,this.currency=r,this.minFractionDigits=i,this.maxFractionDigits=s}static parse(e,t){if(e.length!==3)return t.error("Expected two arguments.");const r=t.parse(e[1],1,kr);if(!r)return null;const i=e[2];if(typeof i!="object"||Array.isArray(i))return t.error("NumberFormat options argument must be an object.");let s=null;if(i.locale&&(s=t.parse(i.locale,1,us),!s))return null;let a=null;if(i.currency&&(a=t.parse(i.currency,1,us),!a))return null;let o=null;if(i["min-fraction-digits"]&&(o=t.parse(i["min-fraction-digits"],1,kr),!o))return null;let d=null;return i["max-fraction-digits"]&&(d=t.parse(i["max-fraction-digits"],1,kr),!d)?null:new gU(r,s,a,o,d)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}},TV=class yU{constructor(e){this.type=_x,this.sections=e}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const r=e[1];if(!Array.isArray(r)&&typeof r=="object")return t.error("First argument must be an image or text section.");const i=[];let s=!1;for(let a=1;a<=e.length-1;++a){const o=e[a];if(s&&typeof o=="object"&&!Array.isArray(o)){s=!1;let d=null;if(o["font-scale"]&&(d=t.parse(o["font-scale"],1,kr),!d))return null;let g=null;if(o["text-font"]&&(g=t.parse(o["text-font"],1,Xh(us)),!g))return null;let b=null;if(o["text-color"]&&(b=t.parse(o["text-color"],1,tm),!b))return null;let E=null;if(o["vertical-align"]){if(typeof o["vertical-align"]=="string"&&!eV.includes(o["vertical-align"]))return t.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${o["vertical-align"]}' instead.`);if(E=t.parse(o["vertical-align"],1,us),!E)return null}const S=i[i.length-1];S.scale=d,S.font=g,S.textColor=b,S.verticalAlign=E}else{const d=t.parse(e[a],1,$o);if(!d)return null;const g=d.type.kind;if(g!=="string"&&g!=="value"&&g!=="null"&&g!=="resolvedImage")return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");s=!0,i.push({content:d,scale:null,font:null,textColor:null,verticalAlign:null})}}return new yU(i)}evaluate(e){const t=r=>{const i=r.content.evaluate(e);return HA(i)===HC?new w6("",i,null,null,null,r.verticalAlign?r.verticalAlign.evaluate(e):null):new w6(iC(i),null,r.scale?r.scale.evaluate(e):null,r.font?r.font.evaluate(e).join(","):null,r.textColor?r.textColor.evaluate(e):null,r.verticalAlign?r.verticalAlign.evaluate(e):null)};return new Gy(this.sections.map(t))}eachChild(e){for(const t of this.sections)e(t.content),t.scale&&e(t.scale),t.font&&e(t.font),t.textColor&&e(t.textColor),t.verticalAlign&&e(t.verticalAlign)}outputDefined(){return!1}},PV=class vU{constructor(e){this.type=HC,this.input=e}static parse(e,t){if(e.length!==2)return t.error("Expected two arguments.");const r=t.parse(e[1],1,us);return r?new vU(r):t.error("No image name provided.")}evaluate(e){const t=this.input.evaluate(e),r=qg.fromString(t);return r&&e.availableImages&&(r.available=e.availableImages.indexOf(t)>-1),r}eachChild(e){e(this.input)}outputDefined(){return!1}},KV=class CU{constructor(e){this.type=kr,this.input=e}static parse(e,t){if(e.length!==2)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const r=t.parse(e[1],1);return r?r.type.kind!=="array"&&r.type.kind!=="string"&&r.type.kind!=="value"?t.error(`Expected argument of type string or array, but found ${Yl(r.type)} instead.`):new CU(r):null}evaluate(e){const t=this.input.evaluate(e);if(typeof t=="string")return[...t].length;if(Array.isArray(t))return t.length;throw new aA(`Expected value to be of type string or array, but found ${Yl(HA(t))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}};const nm=8192;function DV(n,e){const t=RV(n[0]),r=LV(n[1]),i=Math.pow(2,e.z);return[Math.round(t*i*nm),Math.round(r*i*nm)]}function $B(n,e){const t=Math.pow(2,e.z),r=(n[0]/nm+e.x)/t,i=(n[1]/nm+e.y)/t;return[FV(r),UV(i)]}function RV(n){return(180+n)/360}function FV(n){return n*360-180}function LV(n){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n*Math.PI/360)))/360}function UV(n){return 360/Math.PI*Math.atan(Math.exp((180-n*360)*Math.PI/180))-90}function ZC(n,e){n[0]=Math.min(n[0],e[0]),n[1]=Math.min(n[1],e[1]),n[2]=Math.max(n[2],e[0]),n[3]=Math.max(n[3],e[1])}function CC(n,e){return!(n[0]<=e[0]||n[2]>=e[2]||n[1]<=e[1]||n[3]>=e[3])}function zV(n,e,t){return e[1]>n[1]!=t[1]>n[1]&&n[0]<(t[0]-e[0])*(n[1]-e[1])/(t[1]-e[1])+e[0]}function jV(n,e,t){const r=n[0]-e[0],i=n[1]-e[1],s=n[0]-t[0],a=n[1]-t[1];return r*a-s*i===0&&r*s<=0&&i*a<=0}function Mx(n,e,t,r){const i=[e[0]-n[0],e[1]-n[1]],s=[r[0]-t[0],r[1]-t[1]];return QV(s,i)===0?!1:!!(y7(n,e,t,r)&&y7(t,r,n,e))}function NV(n,e,t){for(const r of t)for(let i=0;i<r.length-1;++i)if(Mx(n,e,r[i],r[i+1]))return!0;return!1}function qy(n,e,t=!1){let r=!1;for(const i of e)for(let s=0;s<i.length-1;s++){if(jV(n,i[s],i[s+1]))return t;zV(n,i[s],i[s+1])&&(r=!r)}return r}function WV(n,e){for(const t of e)if(qy(n,t))return!0;return!1}function _U(n,e){for(const t of n)if(!qy(t,e))return!1;for(let t=0;t<n.length-1;++t)if(NV(n[t],n[t+1],e))return!1;return!0}function GV(n,e){for(const t of e)if(_U(n,t))return!0;return!1}function QV(n,e){return n[0]*e[1]-n[1]*e[0]}function y7(n,e,t,r){const i=n[0]-t[0],s=n[1]-t[1],a=e[0]-t[0],o=e[1]-t[1],d=r[0]-t[0],g=r[1]-t[1],b=i*g-d*s,E=a*g-d*o;return b>0&&E<0||b<0&&E>0}function VB(n,e,t){const r=[];for(let i=0;i<n.length;i++){const s=[];for(let a=0;a<n[i].length;a++){const o=DV(n[i][a],t);ZC(e,o),s.push(o)}r.push(s)}return r}function bU(n,e,t){const r=[];for(let i=0;i<n.length;i++){const s=VB(n[i],e,t);r.push(s)}return r}function xU(n,e,t,r){if(n[0]<t[0]||n[0]>t[2]){const i=r*.5;let s=n[0]-t[0]>i?-r:t[0]-n[0]>i?r:0;s===0&&(s=n[0]-t[2]>i?-r:t[2]-n[0]>i?r:0),n[0]+=s}ZC(e,n)}function qV(n){n[0]=n[1]=1/0,n[2]=n[3]=-1/0}function v7(n,e,t,r){const i=Math.pow(2,r.z)*nm,s=[r.x*nm,r.y*nm],a=[];for(const o of n)for(const d of o){const g=[d.x+s[0],d.y+s[1]];xU(g,e,t,i),a.push(g)}return a}function C7(n,e,t,r){const i=Math.pow(2,r.z)*nm,s=[r.x*nm,r.y*nm],a=[];for(const o of n){const d=[];for(const g of o){const b=[g.x+s[0],g.y+s[1]];ZC(e,b),d.push(b)}a.push(d)}if(e[2]-e[0]<=i/2){qV(e);for(const o of a)for(const d of o)xU(d,e,t,i)}return a}function YV(n,e){const t=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=n.canonicalID();if(e.type==="Polygon"){const s=VB(e.coordinates,r,i),a=v7(n.geometry(),t,r,i);if(!CC(t,r))return!1;for(const o of a)if(!qy(o,s))return!1}if(e.type==="MultiPolygon"){const s=bU(e.coordinates,r,i),a=v7(n.geometry(),t,r,i);if(!CC(t,r))return!1;for(const o of a)if(!WV(o,s))return!1}return!0}function $V(n,e){const t=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=n.canonicalID();if(e.type==="Polygon"){const s=VB(e.coordinates,r,i),a=C7(n.geometry(),t,r,i);if(!CC(t,r))return!1;for(const o of a)if(!_U(o,s))return!1}if(e.type==="MultiPolygon"){const s=bU(e.coordinates,r,i),a=C7(n.geometry(),t,r,i);if(!CC(t,r))return!1;for(const o of a)if(!GV(o,s))return!1}return!0}let HB=class Wb{constructor(e,t){this.type=qo,this.geojson=e,this.geometries=t}static parse(e,t){if(e.length!==2)return t.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(vC(e[1])){const r=e[1];if(r.type==="FeatureCollection"){const i=[];for(const s of r.features){const{type:a,coordinates:o}=s.geometry;a==="Polygon"&&i.push(o),a==="MultiPolygon"&&i.push(...o)}if(i.length){const s={type:"MultiPolygon",coordinates:i};return new Wb(r,s)}}else if(r.type==="Feature"){const i=r.geometry.type;if(i==="Polygon"||i==="MultiPolygon")return new Wb(r,r.geometry)}else if(r.type==="Polygon"||r.type==="MultiPolygon")return new Wb(r,r)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return YV(e,this.geometries);if(e.geometryType()==="LineString")return $V(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}};class wU{constructor(e=[],t=(r,i)=>r<i?-1:r>i?1:0){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let r=(this.length>>1)-1;r>=0;r--)this._down(r)}push(e){this.data.push(e),this._up(this.length++)}pop(){if(this.length===0)return;const e=this.data[0],t=this.data.pop();return--this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:r}=this,i=t[e];for(;e>0;){const s=e-1>>1,a=t[s];if(r(i,a)>=0)break;t[e]=a,e=s}t[e]=i}_down(e){const{data:t,compare:r}=this,i=this.length>>1,s=t[e];for(;e<i;){let a=(e<<1)+1;const o=a+1;if(o<this.length&&r(t[o],t[a])<0&&(a=o),r(t[a],s)>=0)break;t[e]=t[a],e=a}t[e]=s}}function VV(n,e){if(n.length<=1)return[n];const r=[];let i,s;for(const a of n){const o=HV(a);o!==0&&(a.area=Math.abs(o),s===void 0&&(s=o<0),s===o<0?(i&&r.push(i),i=[a]):i.push(a))}return i&&r.push(i),r}function HV(n){let e=0;for(let t=0,r=n.length,i=r-1,s,a;t<r;i=t++)s=n[t],a=n[i],e+=(a.x-s.x)*(s.y+a.y);return e}const ZV=6378.137,_7=1/298.257223563,b7=_7*(2-_7),x7=Math.PI/180;class ZB{constructor(e){const t=x7*ZV*1e3,r=Math.cos(e*x7),i=1/(1-b7*(1-r*r)),s=Math.sqrt(i);this.kx=t*s*r,this.ky=t*s*i*(1-b7)}distance(e,t){const r=this.wrap(e[0]-t[0])*this.kx,i=(e[1]-t[1])*this.ky;return Math.sqrt(r*r+i*i)}pointOnLine(e,t){let r=1/0,i,s,a,o;for(let d=0;d<e.length-1;d++){let g=e[d][0],b=e[d][1],E=this.wrap(e[d+1][0]-g)*this.kx,S=(e[d+1][1]-b)*this.ky,I=0;(E!==0||S!==0)&&(I=(this.wrap(t[0]-g)*this.kx*E+(t[1]-b)*this.ky*S)/(E*E+S*S),I>1?(g=e[d+1][0],b=e[d+1][1]):I>0&&(g+=E/this.kx*I,b+=S/this.ky*I)),E=this.wrap(t[0]-g)*this.kx,S=(t[1]-b)*this.ky;const P=E*E+S*S;P<r&&(r=P,i=g,s=b,a=d,o=I)}return{point:[i,s],index:a,t:Math.max(0,Math.min(1,o))}}wrap(e){for(;e<-180;)e+=360;for(;e>180;)e-=360;return e}}const O6=100,I6=50;function MU(n,e){return e[0]-n[0]}function A2(n){return n[1]-n[0]+1}function jm(n,e){return n[1]>=n[0]&&n[1]<e}function k6(n,e){if(n[0]>n[1])return[null,null];const t=A2(n);if(e){if(t===2)return[n,null];const i=Math.floor(t/2);return[[n[0],n[0]+i],[n[0]+i,n[1]]]}if(t===1)return[n,null];const r=Math.floor(t/2)-1;return[[n[0],n[0]+r],[n[0]+r+1,n[1]]]}function T6(n,e){if(!jm(e,n.length))return[1/0,1/0,-1/0,-1/0];const t=[1/0,1/0,-1/0,-1/0];for(let r=e[0];r<=e[1];++r)ZC(t,n[r]);return t}function P6(n){const e=[1/0,1/0,-1/0,-1/0];for(const t of n)for(const r of t)ZC(e,r);return e}function w7(n){return n[0]!==-1/0&&n[1]!==-1/0&&n[2]!==1/0&&n[3]!==1/0}function XB(n,e,t){if(!w7(n)||!w7(e))return NaN;let r=0,i=0;return n[2]<e[0]&&(r=e[0]-n[2]),n[0]>e[2]&&(r=n[0]-e[2]),n[1]>e[3]&&(i=n[1]-e[3]),n[3]<e[1]&&(i=e[1]-n[3]),t.distance([0,0],[r,i])}function wg(n,e,t){const r=t.pointOnLine(e,n);return t.distance(n,r.point)}function JB(n,e,t,r,i){const s=Math.min(wg(n,[t,r],i),wg(e,[t,r],i)),a=Math.min(wg(t,[n,e],i),wg(r,[n,e],i));return Math.min(s,a)}function XV(n,e,t,r,i){if(!(jm(e,n.length)&&jm(r,t.length)))return 1/0;let a=1/0;for(let o=e[0];o<e[1];++o){const d=n[o],g=n[o+1];for(let b=r[0];b<r[1];++b){const E=t[b],S=t[b+1];if(Mx(d,g,E,S))return 0;a=Math.min(a,JB(d,g,E,S,i))}}return a}function JV(n,e,t,r,i){if(!(jm(e,n.length)&&jm(r,t.length)))return NaN;let a=1/0;for(let o=e[0];o<=e[1];++o)for(let d=r[0];d<=r[1];++d)if(a=Math.min(a,i.distance(n[o],t[d])),a===0)return a;return a}function eH(n,e,t){if(qy(n,e,!0))return 0;let r=1/0;for(const i of e){const s=i[0],a=i[i.length-1];if(s!==a&&(r=Math.min(r,wg(n,[a,s],t)),r===0))return r;const o=t.pointOnLine(i,n);if(r=Math.min(r,t.distance(n,o.point)),r===0)return r}return r}function tH(n,e,t,r){if(!jm(e,n.length))return NaN;for(let s=e[0];s<=e[1];++s)if(qy(n[s],t,!0))return 0;let i=1/0;for(let s=e[0];s<e[1];++s){const a=n[s],o=n[s+1];for(const d of t)for(let g=0,b=d.length,E=b-1;g<b;E=g++){const S=d[E],I=d[g];if(Mx(a,o,S,I))return 0;i=Math.min(i,JB(a,o,S,I,r))}}return i}function M7(n,e){for(const t of n)for(const r of t)if(qy(r,e,!0))return!0;return!1}function nH(n,e,t,r=1/0){const i=P6(n),s=P6(e);if(r!==1/0&&XB(i,s,t)>=r)return r;if(CC(i,s)){if(M7(n,e))return 0}else if(M7(e,n))return 0;let a=1/0;for(const o of n)for(let d=0,g=o.length,b=g-1;d<g;b=d++){const E=o[b],S=o[d];for(const I of e)for(let P=0,z=I.length,j=z-1;P<z;j=P++){const q=I[j],Y=I[P];if(Mx(E,S,q,Y))return 0;a=Math.min(a,JB(E,S,q,Y,t))}}return a}function S7(n,e,t,r,i,s){if(!s)return;const a=XB(T6(r,s),i,t);a<e&&n.push([a,s,[0,0]])}function rb(n,e,t,r,i,s,a){if(!s||!a)return;const o=XB(T6(r,s),T6(i,a),t);o<e&&n.push([o,s,a])}function c2(n,e,t,r,i=1/0){let s=Math.min(r.distance(n[0],t[0][0]),i);if(s===0)return s;const a=new wU([[0,[0,n.length-1],[0,0]]],MU),o=P6(t);for(;a.length>0;){const d=a.pop();if(d[0]>=s)continue;const g=d[1],b=e?I6:O6;if(A2(g)<=b){if(!jm(g,n.length))return NaN;if(e){const E=tH(n,g,t,r);if(isNaN(E)||E===0)return E;s=Math.min(s,E)}else for(let E=g[0];E<=g[1];++E){const S=eH(n[E],t,r);if(s=Math.min(s,S),s===0)return 0}}else{const E=k6(g,e);S7(a,s,r,n,o,E[0]),S7(a,s,r,n,o,E[1])}}return s}function d2(n,e,t,r,i,s=1/0){let a=Math.min(s,i.distance(n[0],t[0]));if(a===0)return a;const o=new wU([[0,[0,n.length-1],[0,t.length-1]]],MU);for(;o.length>0;){const d=o.pop();if(d[0]>=a)continue;const g=d[1],b=d[2],E=e?I6:O6,S=r?I6:O6;if(A2(g)<=E&&A2(b)<=S){if(!jm(g,n.length)&&jm(b,t.length))return NaN;let I;if(e&&r)I=XV(n,g,t,b,i),a=Math.min(a,I);else if(e&&!r){const P=n.slice(g[0],g[1]+1);for(let z=b[0];z<=b[1];++z)if(I=wg(t[z],P,i),a=Math.min(a,I),a===0)return a}else if(!e&&r){const P=t.slice(b[0],b[1]+1);for(let z=g[0];z<=g[1];++z)if(I=wg(n[z],P,i),a=Math.min(a,I),a===0)return a}else I=JV(n,g,t,b,i),a=Math.min(a,I)}else{const I=k6(g,e),P=k6(b,r);rb(o,a,i,n,t,I[0],P[0]),rb(o,a,i,n,t,I[0],P[1]),rb(o,a,i,n,t,I[1],P[0]),rb(o,a,i,n,t,I[1],P[1])}}return a}function rH(n,e){const t=n.geometry(),r=t.flat().map(a=>$B([a.x,a.y],n.canonical));if(t.length===0)return NaN;const i=new ZB(r[0][1]);let s=1/0;for(const a of e){switch(a.type){case"Point":s=Math.min(s,d2(r,!1,[a.coordinates],!1,i,s));break;case"LineString":s=Math.min(s,d2(r,!1,a.coordinates,!0,i,s));break;case"Polygon":s=Math.min(s,c2(r,!1,a.coordinates,i,s));break}if(s===0)return s}return s}function iH(n,e){const t=n.geometry(),r=t.flat().map(a=>$B([a.x,a.y],n.canonical));if(t.length===0)return NaN;const i=new ZB(r[0][1]);let s=1/0;for(const a of e){switch(a.type){case"Point":s=Math.min(s,d2(r,!0,[a.coordinates],!1,i,s));break;case"LineString":s=Math.min(s,d2(r,!0,a.coordinates,!0,i,s));break;case"Polygon":s=Math.min(s,c2(r,!0,a.coordinates,i,s));break}if(s===0)return s}return s}function oH(n,e){const t=n.geometry();if(t.length===0||t[0].length===0)return NaN;const r=VV(t).map(a=>a.map(o=>o.map(d=>$B([d.x,d.y],n.canonical)))),i=new ZB(r[0][0][0][1]);let s=1/0;for(const a of e)for(const o of r){switch(a.type){case"Point":s=Math.min(s,c2([a.coordinates],!1,o,i,s));break;case"LineString":s=Math.min(s,c2(a.coordinates,!0,o,i,s));break;case"Polygon":s=Math.min(s,nH(o,a.coordinates,i,s));break}if(s===0)return s}return s}function p4(n){return n.type==="MultiPolygon"?n.coordinates.map(e=>({type:"Polygon",coordinates:e})):n.type==="MultiLineString"?n.coordinates.map(e=>({type:"LineString",coordinates:e})):n.type==="MultiPoint"?n.coordinates.map(e=>({type:"Point",coordinates:e})):[n]}class Tg{constructor(e,t){this.type=kr,this.geojson=e,this.geometries=t}static parse(e,t){if(e.length!==2)return t.error(`'distance' expression requires exactly one argument, but found ${e.length-1} instead.`);if(vC(e[1])){const r=e[1];if(r.type==="FeatureCollection")return new Tg(r,r.features.map(i=>p4(i.geometry)).flat());if(r.type==="Feature")return new Tg(r,p4(r.geometry));if("type"in r&&"coordinates"in r)return new Tg(r,p4(r))}return t.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return rH(e,this.geometries);if(e.geometryType()==="LineString")return iH(e,this.geometries);if(e.geometryType()==="Polygon")return oH(e,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const e8={"==":MV,"!=":SV,">":BV,"<":EV,">=":IV,"<=":OV,array:Pm,at:rV,boolean:Pm,case:aV,coalesce:dU,collator:pU,format:TV,image:PV,in:iV,"index-of":oV,interpolate:Rm,"interpolate-hcl":Rm,"interpolate-lab":Rm,length:KV,let:nU,literal:u2,match:sV,number:Pm,"number-format":kV,object:Pm,slice:lV,step:AU,string:Pm,"to-boolean":oy,"to-color":oy,"to-number":oy,"to-string":oy,var:iU,within:HB,distance:Tg};let Yy=class Fv{constructor(e,t,r,i){this.name=e,this.type=t,this._evaluate=r,this.args=i}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}static parse(e,t){const r=e[0],i=Fv.definitions[r];if(!i)return t.error(`Unknown expression "${r}". If you wanted a literal array, use ["literal", [...]].`,0);const s=Array.isArray(i)?i[0]:i.type,a=Array.isArray(i)?[[i[1],i[2]]]:i.overloads,o=a.filter(([g])=>!Array.isArray(g)||g.length===e.length-1);let d=null;for(const[g,b]of o){d=new eU(t.registry,h2,t.path,null,t.scope);const E=[];let S=!1;for(let I=1;I<e.length;I++){const P=e[I],z=Array.isArray(g)?g[I-1]:g.type,j=d.parse(P,1+E.length,z);if(!j){S=!0;break}E.push(j)}if(!S){if(Array.isArray(g)&&g.length!==E.length){d.error(`Expected ${g.length} arguments, but found ${E.length} instead.`);continue}for(let I=0;I<E.length;I++){const P=Array.isArray(g)?g[I]:g.type,z=E[I];d.concat(I+1).checkSubtype(P,z.type)}if(d.errors.length===0)return new Fv(r,s,b,E)}}if(o.length===1)t.errors.push(...d.errors);else{const b=(o.length?o:a).map(([S])=>aH(S)).join(" | "),E=[];for(let S=1;S<e.length;S++){const I=t.parse(e[S],1+E.length);if(!I)return null;E.push(Yl(I.type))}t.error(`Expected arguments of type ${b}, but found (${E.join(", ")}) instead.`)}return null}static register(e,t){Fv.definitions=t;for(const r in t)e[r]=Fv}};function E7(n,[e,t,r,i]){e=e.evaluate(n),t=t.evaluate(n),r=r.evaluate(n);const s=i?i.evaluate(n):1,a=VL(e,t,r,s);if(a)throw new aA(a);return new Fl(e/255,t/255,r/255,s,!1)}function B7(n,e){return n in e}function m4(n,e){const t=e[n];return typeof t>"u"?null:t}function sH(n,e,t,r){for(;t<=r;){const i=t+r>>1;if(e[i]===n)return!0;e[i]>n?r=i-1:t=i+1}return!1}function lg(n){return{type:n}}Yy.register(e8,{error:[W$,[us],(n,[e])=>{throw new aA(e.evaluate(n))}],typeof:[us,[$o],(n,[e])=>Yl(HA(e.evaluate(n)))],"to-rgba":[Xh(kr,4),[tm],(n,[e])=>{const[t,r,i,s]=e.evaluate(n).rgb;return[t*255,r*255,i*255,s]}],rgb:[tm,[kr,kr,kr],E7],rgba:[tm,[kr,kr,kr,kr],E7],has:{type:qo,overloads:[[[us],(n,[e])=>B7(e.evaluate(n),n.properties())],[[us,py],(n,[e,t])=>B7(e.evaluate(n),t.evaluate(n))]]},get:{type:$o,overloads:[[[us],(n,[e])=>m4(e.evaluate(n),n.properties())],[[us,py],(n,[e,t])=>m4(e.evaluate(n),t.evaluate(n))]]},"feature-state":[$o,[us],(n,[e])=>m4(e.evaluate(n),n.featureState||{})],properties:[py,[],n=>n.properties()],"geometry-type":[us,[],n=>n.geometryType()],id:[$o,[],n=>n.id()],zoom:[kr,[],n=>n.globals.zoom],"heatmap-density":[kr,[],n=>n.globals.heatmapDensity||0],"line-progress":[kr,[],n=>n.globals.lineProgress||0],accumulated:[$o,[],n=>n.globals.accumulated===void 0?null:n.globals.accumulated],"+":[kr,lg(kr),(n,e)=>{let t=0;for(const r of e)t+=r.evaluate(n);return t}],"*":[kr,lg(kr),(n,e)=>{let t=1;for(const r of e)t*=r.evaluate(n);return t}],"-":{type:kr,overloads:[[[kr,kr],(n,[e,t])=>e.evaluate(n)-t.evaluate(n)],[[kr],(n,[e])=>-e.evaluate(n)]]},"/":[kr,[kr,kr],(n,[e,t])=>e.evaluate(n)/t.evaluate(n)],"%":[kr,[kr,kr],(n,[e,t])=>e.evaluate(n)%t.evaluate(n)],ln2:[kr,[],()=>Math.LN2],pi:[kr,[],()=>Math.PI],e:[kr,[],()=>Math.E],"^":[kr,[kr,kr],(n,[e,t])=>Math.pow(e.evaluate(n),t.evaluate(n))],sqrt:[kr,[kr],(n,[e])=>Math.sqrt(e.evaluate(n))],log10:[kr,[kr],(n,[e])=>Math.log(e.evaluate(n))/Math.LN10],ln:[kr,[kr],(n,[e])=>Math.log(e.evaluate(n))],log2:[kr,[kr],(n,[e])=>Math.log(e.evaluate(n))/Math.LN2],sin:[kr,[kr],(n,[e])=>Math.sin(e.evaluate(n))],cos:[kr,[kr],(n,[e])=>Math.cos(e.evaluate(n))],tan:[kr,[kr],(n,[e])=>Math.tan(e.evaluate(n))],asin:[kr,[kr],(n,[e])=>Math.asin(e.evaluate(n))],acos:[kr,[kr],(n,[e])=>Math.acos(e.evaluate(n))],atan:[kr,[kr],(n,[e])=>Math.atan(e.evaluate(n))],min:[kr,lg(kr),(n,e)=>Math.min(...e.map(t=>t.evaluate(n)))],max:[kr,lg(kr),(n,e)=>Math.max(...e.map(t=>t.evaluate(n)))],abs:[kr,[kr],(n,[e])=>Math.abs(e.evaluate(n))],round:[kr,[kr],(n,[e])=>{const t=e.evaluate(n);return t<0?-Math.round(-t):Math.round(t)}],floor:[kr,[kr],(n,[e])=>Math.floor(e.evaluate(n))],ceil:[kr,[kr],(n,[e])=>Math.ceil(e.evaluate(n))],"filter-==":[qo,[us,$o],(n,[e,t])=>n.properties()[e.value]===t.value],"filter-id-==":[qo,[$o],(n,[e])=>n.id()===e.value],"filter-type-==":[qo,[us],(n,[e])=>n.geometryType()===e.value],"filter-<":[qo,[us,$o],(n,[e,t])=>{const r=n.properties()[e.value],i=t.value;return typeof r==typeof i&&r<i}],"filter-id-<":[qo,[$o],(n,[e])=>{const t=n.id(),r=e.value;return typeof t==typeof r&&t<r}],"filter->":[qo,[us,$o],(n,[e,t])=>{const r=n.properties()[e.value],i=t.value;return typeof r==typeof i&&r>i}],"filter-id->":[qo,[$o],(n,[e])=>{const t=n.id(),r=e.value;return typeof t==typeof r&&t>r}],"filter-<=":[qo,[us,$o],(n,[e,t])=>{const r=n.properties()[e.value],i=t.value;return typeof r==typeof i&&r<=i}],"filter-id-<=":[qo,[$o],(n,[e])=>{const t=n.id(),r=e.value;return typeof t==typeof r&&t<=r}],"filter->=":[qo,[us,$o],(n,[e,t])=>{const r=n.properties()[e.value],i=t.value;return typeof r==typeof i&&r>=i}],"filter-id->=":[qo,[$o],(n,[e])=>{const t=n.id(),r=e.value;return typeof t==typeof r&&t>=r}],"filter-has":[qo,[$o],(n,[e])=>e.value in n.properties()],"filter-has-id":[qo,[],n=>n.id()!==null&&n.id()!==void 0],"filter-type-in":[qo,[Xh(us)],(n,[e])=>e.value.indexOf(n.geometryType())>=0],"filter-id-in":[qo,[Xh($o)],(n,[e])=>e.value.indexOf(n.id())>=0],"filter-in-small":[qo,[us,Xh($o)],(n,[e,t])=>t.value.indexOf(n.properties()[e.value])>=0],"filter-in-large":[qo,[us,Xh($o)],(n,[e,t])=>sH(n.properties()[e.value],t.value,0,t.value.length-1)],all:{type:qo,overloads:[[[qo,qo],(n,[e,t])=>e.evaluate(n)&&t.evaluate(n)],[lg(qo),(n,e)=>{for(const t of e)if(!t.evaluate(n))return!1;return!0}]]},any:{type:qo,overloads:[[[qo,qo],(n,[e,t])=>e.evaluate(n)||t.evaluate(n)],[lg(qo),(n,e)=>{for(const t of e)if(t.evaluate(n))return!0;return!1}]]},"!":[qo,[qo],(n,[e])=>!e.evaluate(n)],"is-supported-script":[qo,[us],(n,[e])=>{const t=n.globals&&n.globals.isSupportedScript;return t?t(e.evaluate(n)):!0}],upcase:[us,[us],(n,[e])=>e.evaluate(n).toUpperCase()],downcase:[us,[us],(n,[e])=>e.evaluate(n).toLowerCase()],concat:[us,lg($o),(n,e)=>e.map(t=>iC(t.evaluate(n))).join("")],"resolved-locale":[us,[Cx],(n,[e])=>e.evaluate(n).resolvedLocale()]});function aH(n){return Array.isArray(n)?`(${n.map(Yl).join(", ")})`:`(${Yl(n.type)}...)`}function h2(n){if(n instanceof iU)return h2(n.boundExpression);if(n instanceof Yy&&n.name==="error")return!1;if(n instanceof pU)return!1;if(n instanceof HB)return!1;if(n instanceof Tg)return!1;const e=n instanceof oy||n instanceof Pm;let t=!0;return n.eachChild(r=>{e?t=t&&h2(r):t=t&&r instanceof u2}),t?Sx(n)&&Ex(n,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"]):!1}function Sx(n){if(n instanceof Yy){if(n.name==="get"&&n.args.length===1)return!1;if(n.name==="feature-state")return!1;if(n.name==="has"&&n.args.length===1)return!1;if(n.name==="properties"||n.name==="geometry-type"||n.name==="id")return!1;if(/^filter-/.test(n.name))return!1}if(n instanceof HB||n instanceof Tg)return!1;let e=!0;return n.eachChild(t=>{e&&!Sx(t)&&(e=!1)}),e}function _C(n){if(n instanceof Yy&&n.name==="feature-state")return!1;let e=!0;return n.eachChild(t=>{e&&!_C(t)&&(e=!1)}),e}function Ex(n,e){if(n instanceof Yy&&e.indexOf(n.name)>=0)return!1;let t=!0;return n.eachChild(r=>{t&&!Ex(r,e)&&(t=!1)}),t}function K6(n){return{result:"success",value:n}}function H1(n){return{result:"error",value:n}}function f2(n){return n["property-type"]==="data-driven"||n["property-type"]==="cross-faded-data-driven"}function SU(n){return!!n.expression&&n.expression.parameters.indexOf("zoom")>-1}function t8(n){return!!n.expression&&n.expression.interpolated}function Ps(n){return n instanceof Number?"number":n instanceof String?"string":n instanceof Boolean?"boolean":Array.isArray(n)?"array":n===null?"null":typeof n}function XC(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)}function lH(n){return n}function n8(n,e){const t=e.type==="color",r=n.stops&&typeof n.stops[0][0]=="object",i=r||n.property!==void 0,s=r||!i,a=n.type||(t8(e)?"exponential":"interval");if(t||e.type==="padding"){const b=t?Fl.parse:jd.parse;n=ky({},n),n.stops&&(n.stops=n.stops.map(E=>[E[0],b(E[1])])),n.default?n.default=b(n.default):n.default=b(e.default)}if(n.colorSpace&&!J$(n.colorSpace))throw new Error(`Unknown color space: "${n.colorSpace}"`);let o,d,g;if(a==="exponential")o=O7;else if(a==="interval")o=AH;else if(a==="categorical"){o=uH,d=Object.create(null);for(const b of n.stops)d[b[0]]=b[1];g=typeof n.stops[0][0]}else if(a==="identity")o=cH;else throw new Error(`Unknown function type "${a}"`);if(r){const b={},E=[];for(let P=0;P<n.stops.length;P++){const z=n.stops[P],j=z[0].zoom;b[j]===void 0&&(b[j]={zoom:j,type:n.type,property:n.property,default:n.default,stops:[]},E.push(j)),b[j].stops.push([z[0].value,z[1]])}const S=[];for(const P of E)S.push([b[P].zoom,n8(b[P],e)]);const I={name:"linear"};return{kind:"composite",interpolationType:I,interpolationFactor:Rm.interpolationFactor.bind(void 0,I),zoomStops:S.map(P=>P[0]),evaluate({zoom:P},z){return O7({stops:S,base:n.base},e,P).evaluate(P,z)}}}else if(s){const b=a==="exponential"?{name:"exponential",base:n.base!==void 0?n.base:1}:null;return{kind:"camera",interpolationType:b,interpolationFactor:Rm.interpolationFactor.bind(void 0,b),zoomStops:n.stops.map(E=>E[0]),evaluate:({zoom:E})=>o(n,e,E,d,g)}}else return{kind:"source",evaluate(b,E){const S=E&&E.properties?E.properties[n.property]:void 0;return S===void 0?JC(n.default,e.default):o(n,e,S,d,g)}}}function JC(n,e,t){if(n!==void 0)return n;if(e!==void 0)return e;if(t!==void 0)return t}function uH(n,e,t,r,i){const s=typeof t===i?r[t]:void 0;return JC(s,n.default,e.default)}function AH(n,e,t){if(Ps(t)!=="number")return JC(n.default,e.default);const r=n.stops.length;if(r===1||t<=n.stops[0][0])return n.stops[0][1];if(t>=n.stops[r-1][0])return n.stops[r-1][1];const i=wx(n.stops.map(s=>s[0]),t);return n.stops[i][1]}function O7(n,e,t){const r=n.base!==void 0?n.base:1;if(Ps(t)!=="number")return JC(n.default,e.default);const i=n.stops.length;if(i===1||t<=n.stops[0][0])return n.stops[0][1];if(t>=n.stops[i-1][0])return n.stops[i-1][1];const s=wx(n.stops.map(b=>b[0]),t),a=dH(t,r,n.stops[s][0],n.stops[s+1][0]),o=n.stops[s][1],d=n.stops[s+1][1],g=hV[e.type]||lH;return typeof o.evaluate=="function"?{evaluate(...b){const E=o.evaluate.apply(void 0,b),S=d.evaluate.apply(void 0,b);if(!(E===void 0||S===void 0))return g(E,S,a,n.colorSpace)}}:g(o,d,a,n.colorSpace)}function cH(n,e,t){switch(e.type){case"color":t=Fl.parse(t);break;case"formatted":t=Gy.fromString(t.toString());break;case"resolvedImage":t=qg.fromString(t.toString());break;case"padding":t=jd.parse(t);break;default:Ps(t)!==e.type&&(e.type!=="enum"||!e.values[t])&&(t=void 0)}return JC(t,n.default,e.default)}function dH(n,e,t,r){const i=r-t,s=n-t;return i===0?0:e===1?s/i:(Math.pow(e,s)-1)/(Math.pow(e,i)-1)}let EU=class{constructor(e,t){this.expression=e,this._warningHistory={},this._evaluator=new JL,this._defaultValue=t?mH(t):null,this._enumValues=t&&t.type==="enum"?t.values:null}evaluateWithoutErrorHandling(e,t,r,i,s,a){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=r,this._evaluator.canonical=i,this._evaluator.availableImages=s||null,this._evaluator.formattedSection=a,this.expression.evaluate(this._evaluator)}evaluate(e,t,r,i,s,a){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=r||null,this._evaluator.canonical=i,this._evaluator.availableImages=s||null,this._evaluator.formattedSection=a||null;try{const o=this.expression.evaluate(this._evaluator);if(o==null||typeof o=="number"&&o!==o)return this._defaultValue;if(this._enumValues&&!(o in this._enumValues))throw new aA(`Expected value to be one of ${Object.keys(this._enumValues).map(d=>JSON.stringify(d)).join(", ")}, but found ${JSON.stringify(o)} instead.`);return o}catch(o){return this._warningHistory[o.message]||(this._warningHistory[o.message]=!0,typeof console<"u"&&console.warn(o.message)),this._defaultValue}}};function e_(n){return Array.isArray(n)&&n.length>0&&typeof n[0]=="string"&&n[0]in e8}function r8(n,e){const t=new eU(e8,h2,[],e?pH(e):void 0),r=t.parse(n,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return r?K6(new EU(r,e)):H1(t.errors)}let D6=class{constructor(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent=e!=="constant"&&!_C(t.expression)}evaluateWithoutErrorHandling(e,t,r,i,s,a){return this._styleExpression.evaluateWithoutErrorHandling(e,t,r,i,s,a)}evaluate(e,t,r,i,s,a){return this._styleExpression.evaluate(e,t,r,i,s,a)}},R6=class{constructor(e,t,r,i){this.kind=e,this.zoomStops=r,this._styleExpression=t,this.isStateDependent=e!=="camera"&&!_C(t.expression),this.interpolationType=i}evaluateWithoutErrorHandling(e,t,r,i,s,a){return this._styleExpression.evaluateWithoutErrorHandling(e,t,r,i,s,a)}evaluate(e,t,r,i,s,a){return this._styleExpression.evaluate(e,t,r,i,s,a)}interpolationFactor(e,t,r){return this.interpolationType?Rm.interpolationFactor(this.interpolationType,e,t,r):0}};function hH(n){return n._styleExpression!==void 0}function i8(n,e){const t=r8(n,e);if(t.result==="error")return t;const r=t.value.expression,i=Sx(r);if(!i&&!f2(e))return H1([new $p("","data expressions not supported")]);const s=Ex(r,["zoom"]);if(!s&&!SU(e))return H1([new $p("","zoom expressions not supported")]);const a=Gb(r);if(!a&&!s)return H1([new $p("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(a instanceof $p)return H1([a]);if(a instanceof Rm&&!t8(e))return H1([new $p("",'"interpolate" expressions cannot be used with this property')]);if(!a)return K6(i?new D6("constant",t.value):new D6("source",t.value));const o=a instanceof Rm?a.interpolation:void 0;return K6(i?new R6("camera",t.value,a.labels,o):new R6("composite",t.value,a.labels,o))}class Bx{constructor(e,t){this._parameters=e,this._specification=t,ky(this,n8(this._parameters,this._specification))}static deserialize(e){return new Bx(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function fH(n,e){if(XC(n))return new Bx(n,e);if(e_(n)){const t=i8(n,e);if(t.result==="error")throw new Error(t.value.map(r=>`${r.key}: ${r.message}`).join(", "));return t.value}else{let t=n;return e.type==="color"&&typeof n=="string"?t=Fl.parse(n):e.type==="padding"&&(typeof n=="number"||Array.isArray(n))?t=jd.parse(n):e.type==="variableAnchorOffsetCollection"&&Array.isArray(n)?t=jf.parse(n):e.type==="projectionDefinition"&&typeof n=="string"&&(t=Rf.parse(n)),{kind:"constant",evaluate:()=>t}}}function Gb(n){let e=null;if(n instanceof nU)e=Gb(n.result);else if(n instanceof dU){for(const t of n.args)if(e=Gb(t),e)break}else(n instanceof AU||n instanceof Rm)&&n.input instanceof Yy&&n.input.name==="zoom"&&(e=n);return e instanceof $p||n.eachChild(t=>{const r=Gb(t);r instanceof $p?e=r:!e&&r?e=new $p("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&r&&e!==r&&(e=new $p("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}function pH(n){const e={color:tm,string:us,number:kr,enum:us,boolean:qo,formatted:_x,padding:bx,projectionDefinition:vx,resolvedImage:HC,variableAnchorOffsetCollection:xx};return n.type==="array"?Xh(e[n.value]||$o,n.length):e[n.type]}function mH(n){return n.type==="color"&&XC(n.default)?new Fl(0,0,0,0):n.type==="color"?Fl.parse(n.default)||null:n.type==="padding"?jd.parse(n.default)||null:n.type==="variableAnchorOffsetCollection"?jf.parse(n.default)||null:n.type==="projectionDefinition"?Rf.parse(n.default)||null:n.default===void 0?null:n.default}function Ox(n){if(n===!0||n===!1)return!0;if(!Array.isArray(n)||n.length===0)return!1;switch(n[0]){case"has":return n.length>=2&&n[1]!=="$id"&&n[1]!=="$type";case"in":return n.length>=3&&(typeof n[1]!="string"||Array.isArray(n[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return n.length!==3||Array.isArray(n[1])||Array.isArray(n[2]);case"any":case"all":for(const e of n.slice(1))if(!Ox(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}function oC(n,e={}){if(Ox(n))return n;if(!n)return!0;const t=n,r=t[0];if(n.length<=1)return r!=="any";switch(r){case"==":case"!=":case"<":case">":case"<=":case">=":{const[,i,s]=n;return yH(i,s,r,e)}case"any":{const[,...i]=t;return["any",...i.map(a=>{const o={},d=oC(a,o),g=gH(o);return g===!0?d:["case",g,d,!1]})]}case"all":{const[,...i]=t,s=i.map(a=>oC(a,e));return s.length>1?["all",...s]:s[0]}case"none":{const[,...i]=t;return["!",oC(["any",...i],{})]}case"in":{const[,i,...s]=t;return I7(i,s)}case"!in":{const[,i,...s]=t;return I7(i,s,!0)}case"has":return k7(t[1]);case"!has":return["!",k7(t[1])];default:return!0}}function gH(n){const e=[];for(const t in n){const r=t==="$id"?["id"]:["get",t];e.push(["==",["typeof",r],n[t]])}return e.length===0?!0:e.length===1?e[0]:["all",...e]}function yH(n,e,t,r){let i;if(n==="$type")return[t,["geometry-type"],e];if(n==="$id"?i=["id"]:i=["get",n],r&&e!==null){const s=typeof e;r[n]=s}return t==="=="&&n!=="$id"&&e===null?["all",["has",n],["==",i,null]]:t==="!="&&n!=="$id"&&e===null?["any",["!",["has",n]],["!=",i,null]]:[t,i,e]}function I7(n,e,t=!1){if(e.length===0)return t;let r;n==="$type"?r=["geometry-type"]:n==="$id"?r=["id"]:r=["get",n];let i=!0;const s=typeof e[0];for(const a of e)if(typeof a!==s){i=!1;break}if(i&&(s==="string"||s==="number")){const a=e.sort().filter((o,d)=>d===0||e[d-1]!==o);return["match",r,a,!t,t]}return t?["all",...e.map(a=>["!=",r,a])]:["any",...e.map(a=>["==",r,a])]}function k7(n){return n==="$type"?!0:n==="$id"?["!=",["id"],null]:["has",n]}function bC(n){return typeof n=="object"?["literal",n]:n}function BU(n,e){let t=n.stops;if(!t)return vH(n,e);const r=t&&typeof t[0][0]=="object",i=r||n.property!==void 0,s=r||!i;return t=t.map(a=>!i&&e.tokens&&typeof a[1]=="string"?[a[0],OU(a[1])]:[a[0],bC(a[1])]),r?CH(n,e,t):s?bH(n,e,t):F6(n,e,t)}function vH(n,e){const t=["get",n.property];if(n.default===void 0)return e.type==="string"?["string",t]:t;if(e.type==="enum")return["match",t,Object.keys(e.values),t,n.default];{const r=[e.type==="color"?"to-color":e.type,t,bC(n.default)];return e.type==="array"&&r.splice(1,0,e.value,e.length||null),r}}function o8(n){switch(n.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function CH(n,e,t){const r={},i={},s=[];for(let o=0;o<t.length;o++){const d=t[o],g=d[0].zoom;r[g]===void 0&&(r[g]={zoom:g,type:n.type,property:n.property,default:n.default},i[g]=[],s.push(g)),i[g].push([d[0].value,d[1]])}if(a8({},e)==="exponential"){const o=[o8(n),["linear"],["zoom"]];for(const d of s){const g=F6(r[d],e,i[d]);gy(o,d,g,!1)}return o}else{const o=["step",["zoom"]];for(const d of s){const g=F6(r[d],e,i[d]);gy(o,d,g,!0)}return s8(o),o}}function _H(n,e){if(n!==void 0)return n;if(e!==void 0)return e}function T7(n,e){const t=bC(_H(n.default,e.default));return t===void 0&&e.type==="resolvedImage"?"":t}function F6(n,e,t){const r=a8(n,e),i=["get",n.property];if(r==="categorical"&&typeof t[0][0]=="boolean"){const s=["case"];for(const a of t)s.push(["==",i,a[0]],a[1]);return s.push(T7(n,e)),s}else if(r==="categorical"){const s=["match",i];for(const a of t)gy(s,a[0],a[1],!1);return s.push(T7(n,e)),s}else if(r==="interval"){const s=["step",["number",i]];for(const a of t)gy(s,a[0],a[1],!0);return s8(s),n.default===void 0?s:["case",["==",["typeof",i],"number"],s,bC(n.default)]}else if(r==="exponential"){const s=n.base!==void 0?n.base:1,a=[o8(n),s===1?["linear"]:["exponential",s],["number",i]];for(const o of t)gy(a,o[0],o[1],!1);return n.default===void 0?a:["case",["==",["typeof",i],"number"],a,bC(n.default)]}else throw new Error(`Unknown property function type ${r}`)}function bH(n,e,t,r=["zoom"]){const i=a8(n,e);let s,a=!1;if(i==="interval")s=["step",r],a=!0;else if(i==="exponential"){const o=n.base!==void 0?n.base:1;s=[o8(n),o===1?["linear"]:["exponential",o],r]}else throw new Error(`Unknown zoom function type "${i}"`);for(const o of t)gy(s,o[0],o[1],a);return s8(s),s}function s8(n){n[0]==="step"&&n.length===3&&(n.push(0),n.push(n[3]))}function gy(n,e,t,r){n.length>3&&e===n[n.length-2]||(r&&n.length===2||n.push(e),n.push(t))}function a8(n,e){return n.type?n.type:e.expression.interpolated?"exponential":"interval"}function OU(n){const e=["concat"],t=/{([^{}]+)}/g;let r=0;for(let i=t.exec(n);i!==null;i=t.exec(n)){const s=n.slice(r,t.lastIndex-i[0].length);r=t.lastIndex,s.length>0&&e.push(s),e.push(["get",i[1]])}if(e.length===1)return n;if(r<n.length)e.push(n.slice(r));else if(e.length===2)return["to-string",e[1]];return e}function xH(n){for(let e=0;e<Ts.layout.length;e++)for(const t in Ts[Ts.layout[e]])if(t===n)return Ts[Ts.layout[e]][t];for(let e=0;e<Ts.paint.length;e++)for(const t in Ts[Ts.paint[e]])if(t===n)return Ts[Ts.paint[e]][t];return null}function wH(n,e){for(const t in n.sources)e(n.sources[t])}function sC(n,e){for(const t of n.layers)e(t)}function l8(n,e,t){function r(i,s){const a=i[s];a&&Object.keys(a).forEach(o=>{t({path:[i.id,s,o],key:o,value:a[o],reference:xH(o),set(d){a[o]=d}})})}sC(n,i=>{e.paint&&r(i,"paint"),e.layout&&r(i,"layout")})}function IU(n){const e=n.key,t=n.value;return t?[new Sr(e,t,"constants have been deprecated as of v8")]:[]}function Ku(n){return n instanceof Number||n instanceof String||n instanceof Boolean?n.valueOf():n}function Lg(n){if(Array.isArray(n))return n.map(Lg);if(n instanceof Object&&!(n instanceof Number||n instanceof String||n instanceof Boolean)){const e={};for(const t in n)e[t]=Lg(n[t]);return e}return Ku(n)}function Lf(n){const e=n.key,t=n.value,r=n.valueSpec||{},i=n.objectElementValidators||{},s=n.style,a=n.styleSpec,o=n.validateSpec;let d=[];const g=Ps(t);if(g!=="object")return[new Sr(e,t,`object expected, ${g} found`)];for(const b in t){const E=b.split(".")[0],S=r[E]||r["*"];let I;if(i[E])I=i[E];else if(r[E])I=o;else if(i["*"])I=i["*"];else if(r["*"])I=o;else{d.push(new Sr(e,t[b],`unknown property "${b}"`));continue}d=d.concat(I({key:(e&&`${e}.`)+b,value:t[b],valueSpec:S,style:s,styleSpec:a,object:t,objectKey:b,validateSpec:o},t))}for(const b in r)i[b]||r[b].required&&r[b].default===void 0&&t[b]===void 0&&d.push(new Sr(e,t,`missing required property "${b}"`));return d}function u8(n){const e=n.value,t=n.valueSpec,r=n.validateSpec,i=n.style,s=n.styleSpec,a=n.key,o=n.arrayElementValidator||r;if(Ps(e)!=="array")return[new Sr(a,e,`array expected, ${Ps(e)} found`)];if(t.length&&e.length!==t.length)return[new Sr(a,e,`array length ${t.length} expected, length ${e.length} found`)];if(t["min-length"]&&e.length<t["min-length"])return[new Sr(a,e,`array length at least ${t["min-length"]} expected, length ${e.length} found`)];let d={type:t.value,values:t.values};s.$version<7&&(d.function=t.function),Ps(t.value)==="object"&&(d=t.value);let g=[];for(let b=0;b<e.length;b++)g=g.concat(o({array:e,arrayIndex:b,value:e[b],valueSpec:d,validateSpec:n.validateSpec,style:i,styleSpec:s,key:`${a}[${b}]`}));return g}function A8(n){const e=n.key,t=n.value,r=n.valueSpec;let i=Ps(t);return i==="number"&&t!==t&&(i="NaN"),i!=="number"?[new Sr(e,t,`number expected, ${i} found`)]:"minimum"in r&&t<r.minimum?[new Sr(e,t,`${t} is less than the minimum value ${r.minimum}`)]:"maximum"in r&&t>r.maximum?[new Sr(e,t,`${t} is greater than the maximum value ${r.maximum}`)]:[]}function kU(n){const e=n.valueSpec,t=Ku(n.value.type);let r,i={},s,a;const o=t!=="categorical"&&n.value.property===void 0,d=!o,g=Ps(n.value.stops)==="array"&&Ps(n.value.stops[0])==="array"&&Ps(n.value.stops[0][0])==="object",b=Lf({key:n.key,value:n.value,valueSpec:n.styleSpec.function,validateSpec:n.validateSpec,style:n.style,styleSpec:n.styleSpec,objectElementValidators:{stops:E,default:P}});return t==="identity"&&o&&b.push(new Sr(n.key,n.value,'missing required property "property"')),t!=="identity"&&!n.value.stops&&b.push(new Sr(n.key,n.value,'missing required property "stops"')),t==="exponential"&&n.valueSpec.expression&&!t8(n.valueSpec)&&b.push(new Sr(n.key,n.value,"exponential functions not supported")),n.styleSpec.$version>=8&&(d&&!f2(n.valueSpec)?b.push(new Sr(n.key,n.value,"property functions not supported")):o&&!SU(n.valueSpec)&&b.push(new Sr(n.key,n.value,"zoom functions not supported"))),(t==="categorical"||g)&&n.value.property===void 0&&b.push(new Sr(n.key,n.value,'"property" property is required')),b;function E(z){if(t==="identity")return[new Sr(z.key,z.value,'identity function may not have a "stops" property')];let j=[];const q=z.value;return j=j.concat(u8({key:z.key,value:q,valueSpec:z.valueSpec,validateSpec:z.validateSpec,style:z.style,styleSpec:z.styleSpec,arrayElementValidator:S})),Ps(q)==="array"&&q.length===0&&j.push(new Sr(z.key,q,"array must have at least one stop")),j}function S(z){let j=[];const q=z.value,Y=z.key;if(Ps(q)!=="array")return[new Sr(Y,q,`array expected, ${Ps(q)} found`)];if(q.length!==2)return[new Sr(Y,q,`array length 2 expected, length ${q.length} found`)];if(g){if(Ps(q[0])!=="object")return[new Sr(Y,q,`object expected, ${Ps(q[0])} found`)];if(q[0].zoom===void 0)return[new Sr(Y,q,"object stop key must have zoom")];if(q[0].value===void 0)return[new Sr(Y,q,"object stop key must have value")];if(a&&a>Ku(q[0].zoom))return[new Sr(Y,q[0].zoom,"stop zoom values must appear in ascending order")];Ku(q[0].zoom)!==a&&(a=Ku(q[0].zoom),s=void 0,i={}),j=j.concat(Lf({key:`${Y}[0]`,value:q[0],valueSpec:{zoom:{}},validateSpec:z.validateSpec,style:z.style,styleSpec:z.styleSpec,objectElementValidators:{zoom:A8,value:I}}))}else j=j.concat(I({key:`${Y}[0]`,value:q[0],valueSpec:{},validateSpec:z.validateSpec,style:z.style,styleSpec:z.styleSpec},q));return e_(Lg(q[1]))?j.concat([new Sr(`${Y}[1]`,q[1],"expressions are not allowed in function stops.")]):j.concat(z.validateSpec({key:`${Y}[1]`,value:q[1],valueSpec:e,validateSpec:z.validateSpec,style:z.style,styleSpec:z.styleSpec}))}function I(z,j){const q=Ps(z.value),Y=Ku(z.value),ie=z.value!==null?z.value:j;if(!r)r=q;else if(q!==r)return[new Sr(z.key,ie,`${q} stop domain type must match previous stop domain type ${r}`)];if(q!=="number"&&q!=="string"&&q!=="boolean")return[new Sr(z.key,ie,"stop domain value must be a number, string, or boolean")];if(q!=="number"&&t!=="categorical"){let te=`number expected, ${q} found`;return f2(e)&&t===void 0&&(te+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Sr(z.key,ie,te)]}return t==="categorical"&&q==="number"&&(!isFinite(Y)||Math.floor(Y)!==Y)?[new Sr(z.key,ie,`integer expected, found ${Y}`)]:t!=="categorical"&&q==="number"&&s!==void 0&&Y<s?[new Sr(z.key,ie,"stop domain values must appear in ascending order")]:(s=Y,t==="categorical"&&Y in i?[new Sr(z.key,ie,"stop domain values must be unique")]:(i[Y]=!0,[]))}function P(z){return z.validateSpec({key:z.key,value:z.value,valueSpec:e,validateSpec:z.validateSpec,style:z.style,styleSpec:z.styleSpec})}}function Ty(n){const e=(n.expressionContext==="property"?i8:r8)(Lg(n.value),n.valueSpec);if(e.result==="error")return e.value.map(r=>new Sr(`${n.key}${r.key}`,n.value,r.message));const t=e.value.expression||e.value._styleExpression.expression;if(n.expressionContext==="property"&&n.propertyKey==="text-font"&&!t.outputDefined())return[new Sr(n.key,n.value,`Invalid data expression for "${n.propertyKey}". Output values must be contained as literals within the expression.`)];if(n.expressionContext==="property"&&n.propertyType==="layout"&&!_C(t))return[new Sr(n.key,n.value,'"feature-state" data expressions are not supported with layout properties.')];if(n.expressionContext==="filter"&&!_C(t))return[new Sr(n.key,n.value,'"feature-state" data expressions are not supported with filters.')];if(n.expressionContext&&n.expressionContext.indexOf("cluster")===0){if(!Ex(t,["zoom","feature-state"]))return[new Sr(n.key,n.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(n.expressionContext==="cluster-initial"&&!Sx(t))return[new Sr(n.key,n.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function MH(n){const e=n.value,t=n.key,r=Ps(e);return r!=="boolean"?[new Sr(t,e,`boolean expected, ${r} found`)]:[]}function SH(n){const e=n.key,t=n.value,r=Ps(t);return r!=="string"?[new Sr(e,t,`color expected, ${r} found`)]:Fl.parse(String(t))?[]:[new Sr(e,t,`color expected, "${t}" found`)]}function xC(n){const e=n.key,t=n.value,r=n.valueSpec,i=[];return Array.isArray(r.values)?r.values.indexOf(Ku(t))===-1&&i.push(new Sr(e,t,`expected one of [${r.values.join(", ")}], ${JSON.stringify(t)} found`)):Object.keys(r.values).indexOf(Ku(t))===-1&&i.push(new Sr(e,t,`expected one of [${Object.keys(r.values).join(", ")}], ${JSON.stringify(t)} found`)),i}function c8(n){return Ox(Lg(n.value))?Ty(ky({},n,{expressionContext:"filter",valueSpec:{value:"boolean"}})):TU(n)}function TU(n){const e=n.value,t=n.key;if(Ps(e)!=="array")return[new Sr(t,e,`array expected, ${Ps(e)} found`)];const r=n.styleSpec;let i,s=[];if(e.length<1)return[new Sr(t,e,"filter array must have at least 1 element")];switch(s=s.concat(xC({key:`${t}[0]`,value:e[0],valueSpec:r.filter_operator,style:n.style,styleSpec:n.styleSpec})),Ku(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&Ku(e[1])==="$type"&&s.push(new Sr(t,e,`"$type" cannot be use with operator "${e[0]}"`));case"==":case"!=":e.length!==3&&s.push(new Sr(t,e,`filter array for operator "${e[0]}" must have 3 elements`));case"in":case"!in":e.length>=2&&(i=Ps(e[1]),i!=="string"&&s.push(new Sr(`${t}[1]`,e[1],`string expected, ${i} found`)));for(let a=2;a<e.length;a++)i=Ps(e[a]),Ku(e[1])==="$type"?s=s.concat(xC({key:`${t}[${a}]`,value:e[a],valueSpec:r.geometry_type,style:n.style,styleSpec:n.styleSpec})):i!=="string"&&i!=="number"&&i!=="boolean"&&s.push(new Sr(`${t}[${a}]`,e[a],`string, number, or boolean expected, ${i} found`));break;case"any":case"all":case"none":for(let a=1;a<e.length;a++)s=s.concat(TU({key:`${t}[${a}]`,value:e[a],style:n.style,styleSpec:n.styleSpec}));break;case"has":case"!has":i=Ps(e[1]),e.length!==2?s.push(new Sr(t,e,`filter array for "${e[0]}" operator must have 2 elements`)):i!=="string"&&s.push(new Sr(`${t}[1]`,e[1],`string expected, ${i} found`));break}return s}function PU(n,e){const t=n.key,r=n.validateSpec,i=n.style,s=n.styleSpec,a=n.value,o=n.objectKey,d=s[`${e}_${n.layerType}`];if(!d)return[];const g=o.match(/^(.*)-transition$/);if(e==="paint"&&g&&d[g[1]]&&d[g[1]].transition)return r({key:t,value:a,valueSpec:s.transition,style:i,styleSpec:s});const b=n.valueSpec||d[o];if(!b)return[new Sr(t,a,`unknown property "${o}"`)];let E;if(Ps(a)==="string"&&f2(b)&&!b.tokens&&(E=/^{([^}]+)}$/.exec(a)))return[new Sr(t,a,`"${o}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(E[1])} }\`.`)];const S=[];return n.layerType==="symbol"&&(o==="text-field"&&i&&!i.glyphs&&S.push(new Sr(t,a,'use of "text-field" requires a style "glyphs" property')),o==="text-font"&&XC(Lg(a))&&Ku(a.type)==="identity"&&S.push(new Sr(t,a,'"text-font" does not support identity functions'))),S.concat(r({key:n.key,value:a,valueSpec:b,style:i,styleSpec:s,expressionContext:"property",propertyType:e,propertyKey:o}))}function KU(n){return PU(n,"paint")}function DU(n){return PU(n,"layout")}function RU(n){let e=[];const t=n.value,r=n.key,i=n.style,s=n.styleSpec;!t.type&&!t.ref&&e.push(new Sr(r,t,'either "type" or "ref" is required'));let a=Ku(t.type);const o=Ku(t.ref);if(t.id){const d=Ku(t.id);for(let g=0;g<n.arrayIndex;g++){const b=i.layers[g];Ku(b.id)===d&&e.push(new Sr(r,t.id,`duplicate layer id "${t.id}", previously used at line ${b.id.__line__}`))}}if("ref"in t){["type","source","source-layer","filter","layout"].forEach(g=>{g in t&&e.push(new Sr(r,t[g],`"${g}" is prohibited for ref layers`))});let d;i.layers.forEach(g=>{Ku(g.id)===o&&(d=g)}),d?d.ref?e.push(new Sr(r,t.ref,"ref cannot reference another ref layer")):a=Ku(d.type):e.push(new Sr(r,t.ref,`ref layer "${o}" not found`))}else if(a!=="background")if(!t.source)e.push(new Sr(r,t,'missing required property "source"'));else{const d=i.sources&&i.sources[t.source],g=d&&Ku(d.type);d?g==="vector"&&a==="raster"?e.push(new Sr(r,t.source,`layer "${t.id}" requires a raster source`)):g!=="raster-dem"&&a==="hillshade"?e.push(new Sr(r,t.source,`layer "${t.id}" requires a raster-dem source`)):g==="raster"&&a!=="raster"?e.push(new Sr(r,t.source,`layer "${t.id}" requires a vector source`)):g==="vector"&&!t["source-layer"]?e.push(new Sr(r,t,`layer "${t.id}" must specify a "source-layer"`)):g==="raster-dem"&&a!=="hillshade"?e.push(new Sr(r,t.source,"raster-dem source can only be used with layer type 'hillshade'.")):a==="line"&&t.paint&&t.paint["line-gradient"]&&(g!=="geojson"||!d.lineMetrics)&&e.push(new Sr(r,t,`layer "${t.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):e.push(new Sr(r,t.source,`source "${t.source}" not found`))}return e=e.concat(Lf({key:r,value:t,valueSpec:s.layer,style:n.style,styleSpec:n.styleSpec,validateSpec:n.validateSpec,objectElementValidators:{"*"(){return[]},type(){return n.validateSpec({key:`${r}.type`,value:t.type,valueSpec:s.layer.type,style:n.style,styleSpec:n.styleSpec,validateSpec:n.validateSpec,object:t,objectKey:"type"})},filter:c8,layout(d){return Lf({layer:t,key:d.key,value:d.value,style:d.style,styleSpec:d.styleSpec,validateSpec:d.validateSpec,objectElementValidators:{"*"(g){return DU(ky({layerType:a},g))}}})},paint(d){return Lf({layer:t,key:d.key,value:d.value,style:d.style,styleSpec:d.styleSpec,validateSpec:d.validateSpec,objectElementValidators:{"*"(g){return KU(ky({layerType:a},g))}}})}}})),e}function Ug(n){const e=n.value,t=n.key,r=Ps(e);return r!=="string"?[new Sr(t,e,`string expected, ${r} found`)]:[]}function EH(n){var e;const t=(e=n.sourceName)!==null&&e!==void 0?e:"",r=n.value,i=n.styleSpec,s=i.source_raster_dem,a=n.style;let o=[];const d=Ps(r);if(r===void 0)return o;if(d!=="object")return o.push(new Sr("source_raster_dem",r,`object expected, ${d} found`)),o;const b=Ku(r.encoding)==="custom",E=["redFactor","greenFactor","blueFactor","baseShift"],S=n.value.encoding?`"${n.value.encoding}"`:"Default";for(const I in r)!b&&E.includes(I)?o.push(new Sr(I,r[I],`In "${t}": "${I}" is only valid when "encoding" is set to "custom". ${S} encoding found`)):s[I]?o=o.concat(n.validateSpec({key:I,value:r[I],valueSpec:s[I],validateSpec:n.validateSpec,style:a,styleSpec:i})):o.push(new Sr(I,r[I],`unknown property "${I}"`));return o}const P7={promoteId:BH};function FU(n){const e=n.value,t=n.key,r=n.styleSpec,i=n.style,s=n.validateSpec;if(!e.type)return[new Sr(t,e,'"type" is required')];const a=Ku(e.type);let o;switch(a){case"vector":case"raster":return o=Lf({key:t,value:e,valueSpec:r[`source_${a.replace("-","_")}`],style:n.style,styleSpec:r,objectElementValidators:P7,validateSpec:s}),o;case"raster-dem":return o=EH({sourceName:t,value:e,style:n.style,styleSpec:r,validateSpec:s}),o;case"geojson":if(o=Lf({key:t,value:e,valueSpec:r.source_geojson,style:i,styleSpec:r,validateSpec:s,objectElementValidators:P7}),e.cluster)for(const d in e.clusterProperties){const[g,b]=e.clusterProperties[d],E=typeof g=="string"?[g,["accumulated"],["get",d]]:g;o.push(...Ty({key:`${t}.${d}.map`,value:b,validateSpec:s,expressionContext:"cluster-map"})),o.push(...Ty({key:`${t}.${d}.reduce`,value:E,validateSpec:s,expressionContext:"cluster-reduce"}))}return o;case"video":return Lf({key:t,value:e,valueSpec:r.source_video,style:i,validateSpec:s,styleSpec:r});case"image":return Lf({key:t,value:e,valueSpec:r.source_image,style:i,validateSpec:s,styleSpec:r});case"canvas":return[new Sr(t,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return xC({key:`${t}.type`,value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:i,validateSpec:s,styleSpec:r})}}function BH({key:n,value:e}){if(Ps(e)==="string")return Ug({key:n,value:e});{const t=[];for(const r in e)t.push(...Ug({key:`${n}.${r}`,value:e[r]}));return t}}function LU(n){const e=n.value,t=n.styleSpec,r=t.light,i=n.style;let s=[];const a=Ps(e);if(e===void 0)return s;if(a!=="object")return s=s.concat([new Sr("light",e,`object expected, ${a} found`)]),s;for(const o in e){const d=o.match(/^(.*)-transition$/);d&&r[d[1]]&&r[d[1]].transition?s=s.concat(n.validateSpec({key:o,value:e[o],valueSpec:t.transition,validateSpec:n.validateSpec,style:i,styleSpec:t})):r[o]?s=s.concat(n.validateSpec({key:o,value:e[o],valueSpec:r[o],validateSpec:n.validateSpec,style:i,styleSpec:t})):s=s.concat([new Sr(o,e[o],`unknown property "${o}"`)])}return s}function UU(n){const e=n.value,t=n.styleSpec,r=t.sky,i=n.style,s=Ps(e);if(e===void 0)return[];if(s!=="object")return[new Sr("sky",e,`object expected, ${s} found`)];let a=[];for(const o in e)r[o]?a=a.concat(n.validateSpec({key:o,value:e[o],valueSpec:r[o],style:i,styleSpec:t})):a=a.concat([new Sr(o,e[o],`unknown property "${o}"`)]);return a}function zU(n){const e=n.value,t=n.styleSpec,r=t.terrain,i=n.style;let s=[];const a=Ps(e);if(e===void 0)return s;if(a!=="object")return s=s.concat([new Sr("terrain",e,`object expected, ${a} found`)]),s;for(const o in e)r[o]?s=s.concat(n.validateSpec({key:o,value:e[o],valueSpec:r[o],validateSpec:n.validateSpec,style:i,styleSpec:t})):s=s.concat([new Sr(o,e[o],`unknown property "${o}"`)]);return s}function OH(n){return Ug(n).length===0?[]:Ty(n)}function IH(n){return Ug(n).length===0?[]:Ty(n)}function kH(n){const e=n.key,t=n.value;if(Ps(t)==="array"){if(t.length<1||t.length>4)return[new Sr(e,t,`padding requires 1 to 4 values; ${t.length} values found`)];const i={type:"number"};let s=[];for(let a=0;a<t.length;a++)s=s.concat(n.validateSpec({key:`${e}[${a}]`,value:t[a],validateSpec:n.validateSpec,valueSpec:i}));return s}else return A8({key:e,value:t,valueSpec:{}})}function TH(n){const e=n.key,t=n.value,r=Ps(t),i=n.styleSpec;if(r!=="array"||t.length<1||t.length%2!==0)return[new Sr(e,t,"variableAnchorOffsetCollection requires a non-empty array of even length")];let s=[];for(let a=0;a<t.length;a+=2)s=s.concat(xC({key:`${e}[${a}]`,value:t[a],valueSpec:i.layout_symbol["text-anchor"]})),s=s.concat(u8({key:`${e}[${a+1}]`,value:t[a+1],valueSpec:{length:2,value:"number"},validateSpec:n.validateSpec,style:n.style,styleSpec:i}));return s}function jU(n){let e=[];const t=n.value,r=n.key;if(Array.isArray(t)){const i=[],s=[];for(const a in t){t[a].id&&i.includes(t[a].id)&&e.push(new Sr(r,t,`all the sprites' ids must be unique, but ${t[a].id} is duplicated`)),i.push(t[a].id),t[a].url&&s.includes(t[a].url)&&e.push(new Sr(r,t,`all the sprites' URLs must be unique, but ${t[a].url} is duplicated`)),s.push(t[a].url);const o={id:{type:"string",required:!0},url:{type:"string",required:!0}};e=e.concat(Lf({key:`${r}[${a}]`,value:t[a],valueSpec:o,validateSpec:n.validateSpec}))}return e}else return Ug({key:r,value:t})}function PH(n){const e=n.value,t=n.styleSpec,r=t.projection,i=n.style,s=Ps(e);if(e===void 0)return[];if(s!=="object")return[new Sr("projection",e,`object expected, ${s} found`)];let a=[];for(const o in e)r[o]?a=a.concat(n.validateSpec({key:o,value:e[o],valueSpec:r[o],style:i,styleSpec:t})):a=a.concat([new Sr(o,e[o],`unknown property "${o}"`)]);return a}function KH(n){const e=n.key;let t=n.value;t=t instanceof String?t.valueOf():t;const r=Ps(t);return r==="array"&&!RH(t)&&!DH(t)?[new Sr(e,t,`projection expected, invalid array ${JSON.stringify(t)} found`)]:["array","string"].includes(r)?[]:[new Sr(e,t,`projection expected, invalid type "${r}" found`)]}function DH(n){return!!["interpolate","step","literal"].includes(n[0])}function RH(n){return Array.isArray(n)&&n.length===3&&typeof n[0]=="string"&&typeof n[1]=="string"&&typeof n[2]=="number"}const K7={"*"(){return[]},array:u8,boolean:MH,number:A8,color:SH,constants:IU,enum:xC,filter:c8,function:kU,layer:RU,object:Lf,source:FU,light:LU,sky:UU,terrain:zU,projection:PH,projectionDefinition:KH,string:Ug,formatted:OH,resolvedImage:IH,padding:kH,variableAnchorOffsetCollection:TH,sprite:jU};function aC(n){const e=n.value,t=n.valueSpec,r=n.styleSpec;return n.validateSpec=aC,t.expression&&XC(Ku(e))?kU(n):t.expression&&e_(Lg(e))?Ty(n):t.type&&K7[t.type]?K7[t.type](n):Lf(ky({},n,{valueSpec:t.type?r[t.type]:t}))}function NU(n){const e=n.value,t=n.key,r=Ug(n);return r.length||(e.indexOf("{fontstack}")===-1&&r.push(new Sr(t,e,'"glyphs" url must include a "{fontstack}" token')),e.indexOf("{range}")===-1&&r.push(new Sr(t,e,'"glyphs" url must include a "{range}" token'))),r}function qf(n,e=Ts){let t=[];return t=t.concat(aC({key:"",value:n,valueSpec:e.$root,styleSpec:e,style:n,validateSpec:aC,objectElementValidators:{glyphs:NU,"*"(){return[]}}})),n.constants&&(t=t.concat(IU({key:"constants",value:n.constants,style:n,styleSpec:e,validateSpec:aC}))),WU(t)}qf.source=cm(Am(FU));qf.sprite=cm(Am(jU));qf.glyphs=cm(Am(NU));qf.light=cm(Am(LU));qf.sky=cm(Am(UU));qf.terrain=cm(Am(zU));qf.layer=cm(Am(RU));qf.filter=cm(Am(c8));qf.paintProperty=cm(Am(KU));qf.layoutProperty=cm(Am(DU));function Am(n){return function(e){return n({...e,validateSpec:aC})}}function WU(n){return[].concat(n).sort((e,t)=>e.line-t.line)}function cm(n){return function(...e){return WU(n.apply(this,e))}}const FH=/("(?:[^\\"]|\\.)*")|[:,]/g;function LH(n,e={}){const t=JSON.stringify([1],void 0,e.indent===void 0?2:e.indent).slice(2,-3),r=t===""?1/0:e.maxLength===void 0?80:e.maxLength;let{replacer:i}=e;return function s(a,o,d){a&&typeof a.toJSON=="function"&&(a=a.toJSON());const g=JSON.stringify(a,i);if(g===void 0)return g;const b=r-o.length-d;if(g.length<=b){const E=g.replace(FH,(S,I)=>I||`${S} `);if(E.length<=b)return E}if(i!=null&&(a=JSON.parse(g),i=void 0),typeof a=="object"&&a!==null){const E=o+t,S=[];let I=0,P,z;if(Array.isArray(a)){P="[",z="]";const{length:j}=a;for(;I<j;I++)S.push(s(a[I],E,I===j-1?0:1)||"null")}else{P="{",z="}";const j=Object.keys(a),{length:q}=j;for(;I<q;I++){const Y=j[I],ie=`${JSON.stringify(Y)}: `,te=s(a[Y],E,ie.length+(I===q-1?0:1));te!==void 0&&S.push(ie+te)}}if(S.length>0)return[P,t+S.join(`,
${E}`),z].join(`
${o}`)}return g}(n,"",0)}function D7(n,e){const t={};for(const r in e)n[r]!==void 0&&(t[r]=n[r]);for(const r in n)t[r]===void 0&&(t[r]=n[r]);return t}function GU(n,e=2){return n=D7(n,Ts.$root),n.layers&&(n.layers=n.layers.map(t=>D7(t,Ts.layer))),LH(n,{indent:e})}function g4(n,e){for(const t in n)t.indexOf("layout")===0&&e(n[t],t)}function R7(n,e){for(const t in n)t.indexOf("paint")===0&&e(n[t],t)}function L6(n,e){return typeof e=="string"&&e[0]==="@"?L6(n,n.constants[e]):e}function UH(n){return Array.isArray(n.stops)}function wv(n,e,t){n[t]=n[e],delete n[e]}function zH(n){n.version=8,wH(n,i=>{i.type==="video"&&i.url!==void 0&&wv(i,"url","urls"),i.type==="video"&&i.coordinates.forEach(s=>s.reverse())}),sC(n,i=>{g4(i,s=>{s["symbol-min-distance"]!==void 0&&wv(s,"symbol-min-distance","symbol-spacing")}),R7(i,s=>{s["background-image"]!==void 0&&wv(s,"background-image","background-pattern"),s["line-image"]!==void 0&&wv(s,"line-image","line-pattern"),s["fill-image"]!==void 0&&wv(s,"fill-image","fill-pattern")})}),l8(n,{paint:!0,layout:!0},i=>{const s=L6(n,i.value);UH(s)&&s.stops.forEach(a=>{a[1]=L6(n,a[1])}),i.set(s)}),delete n.constants,sC(n,i=>{g4(i,s=>{delete s["text-max-size"],delete s["icon-max-size"]}),R7(i,s=>{s["text-size"]&&(i.layout||(i.layout={}),i.layout["text-size"]=s["text-size"],delete s["text-size"]),s["icon-size"]&&(i.layout||(i.layout={}),i.layout["icon-size"]=s["icon-size"],delete s["icon-size"])})});function e(i){function s(a){return a.split(",").map(o=>o.trim())}if(Array.isArray(i))return i;if(typeof i=="string")return s(i);if(typeof i=="object")return i.stops.forEach(a=>{a[1]=s(a[1])}),i;throw new Error("unexpected font value")}sC(n,i=>{g4(i,s=>{s["text-font"]&&(s["text-font"]=e(s["text-font"]))})});let t=0;for(let i=n.layers.length-1;i>=0;i--)if(n.layers[i].type!=="symbol"){t=i+1;break}const r=n.layers.splice(t);return r.reverse(),n.layers=n.layers.concat(r),n}function jH(n){const e=[];return sC(n,t=>{t.filter&&(t.filter=oC(t.filter))}),l8(n,{paint:!0,layout:!0},({path:t,value:r,reference:i,set:s})=>{e_(r)||(typeof r=="object"&&!Array.isArray(r)?(s(BU(r,i)),e.push(t.join("."))):i.tokens&&typeof r=="string"&&s(OU(r)))}),n}function NH(n){return JSON.parse(WH(JSON.stringify(n)))}function WH(n){return n.replace(/"hsla?\((.+?)\)"/gi,(e,t)=>{const r=t.match(/^(.+?)\s*,\s*(.+?)\s*,\s*(.+?)(?:\s*,\s*(.+))?$/i);if(r){let[i,s,a,o]=r.slice(1);return[s,a]=[s,a].map(d=>d.endsWith("%")?d:`${parseFloat(d)*100}%`),`"hsl${typeof o=="string"?"a":""}(${[i,s,a,o].filter(Boolean).join(",")})"`}return e})}function GH(n){let e=!1;if(n.version===7&&(n=zH(n),e=!0),n.version===8&&(e=!!jH(n),e=!0),l8(n,{paint:!0,layout:!0},({value:t,reference:r,set:i})=>{r.type==="color"&&i(NH(t))}),!e)throw new Error(`Cannot migrate from ${n.version}`);return n}const QH={StyleExpression:EU,StylePropertyFunction:Bx,ZoomConstantExpression:D6,ZoomDependentExpression:R6,createExpression:r8,createPropertyExpression:i8,isExpression:e_,isExpressionFilter:Ox,isZoomExpression:hH,normalizePropertyExpression:fH},qH={convertFunction:BU,createFunction:n8,isFunction:XC};var Ix=$C();const YH=el(Ix);var Qb={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.1.0/LICENSE.txt
 */var $H=Qb.exports,F7;function VH(){return F7||(F7=1,function(n,e){(function(t,r){n.exports=r()})($H,function(){var t={},r={};function i(a,o,d){if(r[a]=d,a==="index"){var g="var sharedModule = {}; ("+r.shared+")(sharedModule); ("+r.worker+")(sharedModule);",b={};return r.shared(b),r.index(t,b),typeof window<"u"&&t.setWorkerUrl(window.URL.createObjectURL(new Blob([g],{type:"text/javascript"}))),t}}i("shared",["exports"],function(a){function o(h,u,f,v){return new(f||(f=Promise))(function(M,D){function U(re){try{X(v.next(re))}catch(de){D(de)}}function W(re){try{X(v.throw(re))}catch(de){D(de)}}function X(re){var de;re.done?M(re.value):(de=re.value,de instanceof f?de:new f(function(_e){_e(de)})).then(U,W)}X((v=v.apply(h,u||[])).next())})}function d(h){return h&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h}var g,b;function E(){if(b)return g;function h(u,f){this.x=u,this.y=f}return b=1,g=h,h.prototype={clone:function(){return new h(this.x,this.y)},add:function(u){return this.clone()._add(u)},sub:function(u){return this.clone()._sub(u)},multByPoint:function(u){return this.clone()._multByPoint(u)},divByPoint:function(u){return this.clone()._divByPoint(u)},mult:function(u){return this.clone()._mult(u)},div:function(u){return this.clone()._div(u)},rotate:function(u){return this.clone()._rotate(u)},rotateAround:function(u,f){return this.clone()._rotateAround(u,f)},matMult:function(u){return this.clone()._matMult(u)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(u){return this.x===u.x&&this.y===u.y},dist:function(u){return Math.sqrt(this.distSqr(u))},distSqr:function(u){var f=u.x-this.x,v=u.y-this.y;return f*f+v*v},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(u){return Math.atan2(this.y-u.y,this.x-u.x)},angleWith:function(u){return this.angleWithSep(u.x,u.y)},angleWithSep:function(u,f){return Math.atan2(this.x*f-this.y*u,this.x*u+this.y*f)},_matMult:function(u){var f=u[2]*this.x+u[3]*this.y;return this.x=u[0]*this.x+u[1]*this.y,this.y=f,this},_add:function(u){return this.x+=u.x,this.y+=u.y,this},_sub:function(u){return this.x-=u.x,this.y-=u.y,this},_mult:function(u){return this.x*=u,this.y*=u,this},_div:function(u){return this.x/=u,this.y/=u,this},_multByPoint:function(u){return this.x*=u.x,this.y*=u.y,this},_divByPoint:function(u){return this.x/=u.x,this.y/=u.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var u=this.y;return this.y=this.x,this.x=-u,this},_rotate:function(u){var f=Math.cos(u),v=Math.sin(u),M=v*this.x+f*this.y;return this.x=f*this.x-v*this.y,this.y=M,this},_rotateAround:function(u,f){var v=Math.cos(u),M=Math.sin(u),D=f.y+M*(this.x-f.x)+v*(this.y-f.y);return this.x=f.x+v*(this.x-f.x)-M*(this.y-f.y),this.y=D,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},h.convert=function(u){return u instanceof h?u:Array.isArray(u)?new h(u[0],u[1]):u},g}typeof SuppressedError=="function"&&SuppressedError;var S,I,P=d(E()),z=function(){if(I)return S;function h(u,f,v,M){this.cx=3*u,this.bx=3*(v-u)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*f,this.by=3*(M-f)-this.cy,this.ay=1-this.cy-this.by,this.p1x=u,this.p1y=f,this.p2x=v,this.p2y=M}return I=1,S=h,h.prototype={sampleCurveX:function(u){return((this.ax*u+this.bx)*u+this.cx)*u},sampleCurveY:function(u){return((this.ay*u+this.by)*u+this.cy)*u},sampleCurveDerivativeX:function(u){return(3*this.ax*u+2*this.bx)*u+this.cx},solveCurveX:function(u,f){if(f===void 0&&(f=1e-6),u<0)return 0;if(u>1)return 1;for(var v=u,M=0;M<8;M++){var D=this.sampleCurveX(v)-u;if(Math.abs(D)<f)return v;var U=this.sampleCurveDerivativeX(v);if(Math.abs(U)<1e-6)break;v-=D/U}var W=0,X=1;for(v=u,M=0;M<20&&(D=this.sampleCurveX(v),!(Math.abs(D-u)<f));M++)u>D?W=v:X=v,v=.5*(X-W)+W;return v},solve:function(u,f){return this.sampleCurveY(this.solveCurveX(u,f))}},S}(),j=d(z);let q,Y;function ie(){return q==null&&(q=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),q}function te(){if(Y==null&&(Y=!1,ie())){const u=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(u){for(let v=0;v<5*5;v++){const M=4*v;u.fillStyle=`rgb(${M},${M+1},${M+2})`,u.fillRect(v%5,Math.floor(v/5),1,1)}const f=u.getImageData(0,0,5,5).data;for(let v=0;v<5*5*4;v++)if(v%4!=3&&f[v]!==v){Y=!0;break}}}return Y||!1}var V,ne=1e-6,G=typeof Float32Array<"u"?Float32Array:Array;function oe(){var h=new G(9);return G!=Float32Array&&(h[1]=0,h[2]=0,h[3]=0,h[5]=0,h[6]=0,h[7]=0),h[0]=1,h[4]=1,h[8]=1,h}function he(h){return h[0]=1,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=1,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=1,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h}function pe(){var h=new G(3);return G!=Float32Array&&(h[0]=0,h[1]=0,h[2]=0),h}function Ee(h,u,f){var v=new G(3);return v[0]=h,v[1]=u,v[2]=f,v}function me(h,u,f){var v=u[0],M=u[1],D=u[2],U=u[3];return h[0]=f[0]*v+f[4]*M+f[8]*D+f[12]*U,h[1]=f[1]*v+f[5]*M+f[9]*D+f[13]*U,h[2]=f[2]*v+f[6]*M+f[10]*D+f[14]*U,h[3]=f[3]*v+f[7]*M+f[11]*D+f[15]*U,h}function Se(){var h=new G(4);return G!=Float32Array&&(h[0]=0,h[1]=0,h[2]=0),h[3]=1,h}function De(){var h=new G(2);return G!=Float32Array&&(h[0]=0,h[1]=0),h}function be(h,u){var f=new G(2);return f[0]=h,f[1]=u,f}Math.hypot||(Math.hypot=function(){for(var h=0,u=arguments.length;u--;)h+=arguments[u]*arguments[u];return Math.sqrt(h)}),pe(),V=new G(4),G!=Float32Array&&(V[0]=0,V[1]=0,V[2]=0,V[3]=0),pe(),Ee(1,0,0),Ee(0,1,0),Se(),Se(),oe(),De();const at=8192;function Ze(h,u,f){return u*(at/(h.tileSize*Math.pow(2,f-h.tileID.overscaledZ)))}function Je(h,u){return(h%u+u)%u}function We(h,u,f){return h*(1-f)+u*f}function Me(h){if(h<=0)return 0;if(h>=1)return 1;const u=h*h,f=u*h;return 4*(h<.5?f:3*(h-u)+f-.75)}function Fe(h,u,f,v){const M=new j(h,u,f,v);return D=>M.solve(D)}const He=Fe(.25,.1,.25,1);function bt(h,u,f){return Math.min(f,Math.max(u,h))}function Yt(h,u,f){const v=f-u,M=((h-u)%v+v)%v+u;return M===u?f:M}function gt(h,...u){for(const f of u)for(const v in f)h[v]=f[v];return h}let Lt=1;function Kt(h,u,f){const v={};for(const M in h)v[M]=u.call(this,h[M],M,h);return v}function Ue(h,u,f){const v={};for(const M in h)u.call(this,h[M],M,h)&&(v[M]=h[M]);return v}function Pe(h){return Array.isArray(h)?h.map(Pe):typeof h=="object"&&h?Kt(h,Pe):h}const Be={};function it(h){Be[h]||(typeof console<"u"&&console.warn(h),Be[h]=!0)}function _t(h,u,f){return(f.y-h.y)*(u.x-h.x)>(u.y-h.y)*(f.x-h.x)}function ft(h){return typeof WorkerGlobalScope<"u"&&h!==void 0&&h instanceof WorkerGlobalScope}let Ut=null;function rn(h){return typeof ImageBitmap<"u"&&h instanceof ImageBitmap}const Dt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function _n(h,u,f,v,M){return o(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const D=new VideoFrame(h,{timestamp:0});try{const U=D==null?void 0:D.format;if(!U||!U.startsWith("BGR")&&!U.startsWith("RGB"))throw new Error(`Unrecognized format ${U}`);const W=U.startsWith("BGR"),X=new Uint8ClampedArray(v*M*4);if(yield D.copyTo(X,function(re,de,_e,Re,ze){const Ge=4*Math.max(1,0),et=(Math.max(0,_e)-_e)*Re*4+Ge,At=4*Re,Ct=Math.max(0,de),Nt=Math.max(0,_e);return{rect:{x:Ct,y:Nt,width:Math.min(re.width,de+Re)-Ct,height:Math.min(re.height,_e+ze)-Nt},layout:[{offset:et,stride:At}]}}(h,u,f,v,M)),W)for(let re=0;re<X.length;re+=4){const de=X[re];X[re]=X[re+2],X[re+2]=de}return X}finally{D.close()}})}let qn,tn;function rr(h){return h/Math.PI*180}const Dn="AbortError";function pn(){return new Error(Dn)}const Zn={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function dr(h){return Zn.REGISTERED_PROTOCOLS[h.substring(0,h.indexOf("://"))]}const vr="global-dispatcher";class Jn extends Error{constructor(u,f,v,M){super(`AJAXError: ${f} (${u}): ${v}`),this.status=u,this.statusText=f,this.url=v,this.body=M}}const Qe=()=>ft(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,ce=function(h,u){if(/:\/\//.test(h.url)&&!/^https?:|^file:/.test(h.url)){const v=dr(h.url);if(v)return v(h,u);if(ft(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:h,targetMapId:vr},u)}if(!(/^file:/.test(f=h.url)||/^file:/.test(Qe())&&!/^\w+:/.test(f))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(v,M){return o(this,void 0,void 0,function*(){const D=new Request(v.url,{method:v.method||"GET",body:v.body,credentials:v.credentials,headers:v.headers,cache:v.cache,referrer:Qe(),signal:M.signal});let U,W;v.type!=="json"||D.headers.has("Accept")||D.headers.set("Accept","application/json");try{U=yield fetch(D)}catch(re){throw new Jn(0,re.message,v.url,new Blob)}if(!U.ok){const re=yield U.blob();throw new Jn(U.status,U.statusText,v.url,re)}W=v.type==="arrayBuffer"||v.type==="image"?U.arrayBuffer():v.type==="json"?U.json():U.text();const X=yield W;if(M.signal.aborted)throw pn();return{data:X,cacheControl:U.headers.get("Cache-Control"),expires:U.headers.get("Expires")}})}(h,u);if(ft(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:h,mustQueue:!0,targetMapId:vr},u)}var f;return function(v,M){return new Promise((D,U)=>{var W;const X=new XMLHttpRequest;X.open(v.method||"GET",v.url,!0),v.type!=="arrayBuffer"&&v.type!=="image"||(X.responseType="arraybuffer");for(const re in v.headers)X.setRequestHeader(re,v.headers[re]);v.type==="json"&&(X.responseType="text",!((W=v.headers)===null||W===void 0)&&W.Accept||X.setRequestHeader("Accept","application/json")),X.withCredentials=v.credentials==="include",X.onerror=()=>{U(new Error(X.statusText))},X.onload=()=>{if(!M.signal.aborted)if((X.status>=200&&X.status<300||X.status===0)&&X.response!==null){let re=X.response;if(v.type==="json")try{re=JSON.parse(X.response)}catch(de){return void U(de)}D({data:re,cacheControl:X.getResponseHeader("Cache-Control"),expires:X.getResponseHeader("Expires")})}else{const re=new Blob([X.response],{type:X.getResponseHeader("Content-Type")});U(new Jn(X.status,X.statusText,v.url,re))}},M.signal.addEventListener("abort",()=>{X.abort(),U(pn())}),X.send(v.body)})}(h,u)};function fe(h){if(!h||h.indexOf("://")<=0||h.indexOf("data:image/")===0||h.indexOf("blob:")===0)return!0;const u=new URL(h),f=window.location;return u.protocol===f.protocol&&u.host===f.host}function nt(h,u,f){f[h]&&f[h].indexOf(u)!==-1||(f[h]=f[h]||[],f[h].push(u))}function St(h,u,f){if(f&&f[h]){const v=f[h].indexOf(u);v!==-1&&f[h].splice(v,1)}}class Ht{constructor(u,f={}){gt(this,f),this.type=u}}class sn extends Ht{constructor(u,f={}){super("error",gt({error:u},f))}}class tr{on(u,f){return this._listeners=this._listeners||{},nt(u,f,this._listeners),{unsubscribe:()=>{this.off(u,f)}}}off(u,f){return St(u,f,this._listeners),St(u,f,this._oneTimeListeners),this}once(u,f){return f?(this._oneTimeListeners=this._oneTimeListeners||{},nt(u,f,this._oneTimeListeners),this):new Promise(v=>this.once(u,v))}fire(u,f){typeof u=="string"&&(u=new Ht(u,f||{}));const v=u.type;if(this.listens(v)){u.target=this;const M=this._listeners&&this._listeners[v]?this._listeners[v].slice():[];for(const W of M)W.call(this,u);const D=this._oneTimeListeners&&this._oneTimeListeners[v]?this._oneTimeListeners[v].slice():[];for(const W of D)St(v,W,this._oneTimeListeners),W.call(this,u);const U=this._eventedParent;U&&(gt(u,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),U.fire(u))}else u instanceof sn&&console.error(u.error);return this}listens(u){return this._listeners&&this._listeners[u]&&this._listeners[u].length>0||this._oneTimeListeners&&this._oneTimeListeners[u]&&this._oneTimeListeners[u].length>0||this._eventedParent&&this._eventedParent.listens(u)}setEventedParent(u,f){return this._eventedParent=u,this._eventedParentData=f,this}}var Oe={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const se=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function ve(h,u){const f={};for(const v in h)v!=="ref"&&(f[v]=h[v]);return se.forEach(v=>{v in u&&(f[v]=u[v])}),f}function p(h,u){if(Array.isArray(h)){if(!Array.isArray(u)||h.length!==u.length)return!1;for(let f=0;f<h.length;f++)if(!p(h[f],u[f]))return!1;return!0}if(typeof h=="object"&&h!==null&&u!==null){if(typeof u!="object"||Object.keys(h).length!==Object.keys(u).length)return!1;for(const f in h)if(!p(h[f],u[f]))return!1;return!0}return h===u}function Ne(h,u){h.push(u)}function Ye(h,u,f){Ne(f,{command:"addSource",args:[h,u[h]]})}function rt(h,u,f){Ne(u,{command:"removeSource",args:[h]}),f[h]=!0}function ct(h,u,f,v){rt(h,f,v),Ye(h,u,f)}function dt(h,u,f){let v;for(v in h[f])if(Object.prototype.hasOwnProperty.call(h[f],v)&&v!=="data"&&!p(h[f][v],u[f][v]))return!1;for(v in u[f])if(Object.prototype.hasOwnProperty.call(u[f],v)&&v!=="data"&&!p(h[f][v],u[f][v]))return!1;return!0}function qt(h,u,f,v,M,D){h=h||{},u=u||{};for(const U in h)Object.prototype.hasOwnProperty.call(h,U)&&(p(h[U],u[U])||f.push({command:D,args:[v,U,u[U],M]}));for(const U in u)Object.prototype.hasOwnProperty.call(u,U)&&!Object.prototype.hasOwnProperty.call(h,U)&&(p(h[U],u[U])||f.push({command:D,args:[v,U,u[U],M]}))}function Gt(h){return h.id}function jt(h,u){return h[u.id]=u,h}class xt{constructor(u,f,v,M){this.message=(u?`${u}: `:"")+v,M&&(this.identifier=M),f!=null&&f.__line__&&(this.line=f.__line__)}}function Tn(h,...u){for(const f of u)for(const v in f)h[v]=f[v];return h}class On extends Error{constructor(u,f){super(f),this.message=f,this.key=u}}class gr{constructor(u,f=[]){this.parent=u,this.bindings={};for(const[v,M]of f)this.bindings[v]=M}concat(u){return new gr(this,u)}get(u){if(this.bindings[u])return this.bindings[u];if(this.parent)return this.parent.get(u);throw new Error(`${u} not found in scope.`)}has(u){return!!this.bindings[u]||!!this.parent&&this.parent.has(u)}}const Er={kind:"null"},on={kind:"number"},Rn={kind:"string"},er={kind:"boolean"},Xr={kind:"color"},Ur={kind:"projectionDefinition"},Dr={kind:"object"},ur={kind:"value"},mo={kind:"collator"},Ma={kind:"formatted"},qi={kind:"padding"},vi={kind:"resolvedImage"},io={kind:"variableAnchorOffsetCollection"};function Do(h,u){return{kind:"array",itemType:h,N:u}}function Ti(h){if(h.kind==="array"){const u=Ti(h.itemType);return typeof h.N=="number"?`array<${u}, ${h.N}>`:h.itemType.kind==="value"?"array":`array<${u}>`}return h.kind}const ja=[Er,on,Rn,er,Xr,Ur,Ma,Dr,Do(ur),qi,vi,io];function Sa(h,u){if(u.kind==="error")return null;if(h.kind==="array"){if(u.kind==="array"&&(u.N===0&&u.itemType.kind==="value"||!Sa(h.itemType,u.itemType))&&(typeof h.N!="number"||h.N===u.N))return null}else{if(h.kind===u.kind)return null;if(h.kind==="value"){for(const f of ja)if(!Sa(f,u))return null}}return`Expected ${Ti(h)} but found ${Ti(u)} instead.`}function ns(h,u){return u.some(f=>f.kind===h.kind)}function sa(h,u){return u.some(f=>f==="null"?h===null:f==="array"?Array.isArray(h):f==="object"?h&&!Array.isArray(h)&&typeof h=="object":f===typeof h)}function Al(h,u){return h.kind==="array"&&u.kind==="array"?h.itemType.kind===u.itemType.kind&&typeof h.N=="number":h.kind===u.kind}const uo=.96422,Fu=.82521,Hl=4/29,oo=6/29,Tr=3*oo*oo,tl=oo*oo*oo,Bs=Math.PI/180,Js=180/Math.PI;function qe(h){return(h%=360)<0&&(h+=360),h}function wt([h,u,f,v]){let M,D;const U=Yn((.2225045*(h=vn(h))+.7168786*(u=vn(u))+.0606169*(f=vn(f)))/1);h===u&&u===f?M=D=U:(M=Yn((.4360747*h+.3850649*u+.1430804*f)/uo),D=Yn((.0139322*h+.0971045*u+.7141733*f)/Fu));const W=116*U-16;return[W<0?0:W,500*(M-U),200*(U-D),v]}function vn(h){return h<=.04045?h/12.92:Math.pow((h+.055)/1.055,2.4)}function Yn(h){return h>tl?Math.pow(h,1/3):h/Tr+Hl}function hn([h,u,f,v]){let M=(h+16)/116,D=isNaN(u)?M:M+u/500,U=isNaN(f)?M:M-f/200;return M=1*Pi(M),D=uo*Pi(D),U=Fu*Pi(U),[or(3.1338561*D-1.6168667*M-.4906146*U),or(-.9787684*D+1.9161415*M+.033454*U),or(.0719453*D-.2289914*M+1.4052427*U),v]}function or(h){return(h=h<=.00304?12.92*h:1.055*Math.pow(h,1/2.4)-.055)<0?0:h>1?1:h}function Pi(h){return h>oo?h*h*h:Tr*(h-Hl)}function go(h){return parseInt(h.padEnd(2,h),16)/255}function Cs(h,u){return Rs(u?h/100:h,0,1)}function Rs(h,u,f){return Math.min(Math.max(u,h),f)}function SA(h){return!h.some(Number.isNaN)}const ei={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function wi(h,u,f){return h+f*(u-h)}function nl(h,u,f){return h.map((v,M)=>wi(v,u[M],f))}class ui{constructor(u,f,v,M=1,D=!0){this.r=u,this.g=f,this.b=v,this.a=M,D||(this.r*=M,this.g*=M,this.b*=M,M||this.overwriteGetter("rgb",[u,f,v,M]))}static parse(u){if(u instanceof ui)return u;if(typeof u!="string")return;const f=function(v){if((v=v.toLowerCase().trim())==="transparent")return[0,0,0,0];const M=ei[v];if(M){const[U,W,X]=M;return[U/255,W/255,X/255,1]}if(v.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(v)){const U=v.length<6?1:2;let W=1;return[go(v.slice(W,W+=U)),go(v.slice(W,W+=U)),go(v.slice(W,W+=U)),go(v.slice(W,W+U)||"ff")]}if(v.startsWith("rgb")){const U=v.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(U){const[W,X,re,de,_e,Re,ze,Ge,et,At,Ct,Nt]=U,Et=[de||" ",ze||" ",At].join("");if(Et==="  "||Et==="  /"||Et===",,"||Et===",,,"){const Le=[re,Re,et].join(""),lt=Le==="%%%"?100:Le===""?255:0;if(lt){const Ot=[Rs(+X/lt,0,1),Rs(+_e/lt,0,1),Rs(+Ge/lt,0,1),Ct?Cs(+Ct,Nt):1];if(SA(Ot))return Ot}}return}}const D=v.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(D){const[U,W,X,re,de,_e,Re,ze,Ge]=D,et=[X||" ",de||" ",Re].join("");if(et==="  "||et==="  /"||et===",,"||et===",,,"){const At=[+W,Rs(+re,0,100),Rs(+_e,0,100),ze?Cs(+ze,Ge):1];if(SA(At))return function([Ct,Nt,Et,Le]){function lt(Ot){const An=(Ot+Ct/30)%12,zn=Nt*Math.min(Et,1-Et);return Et-zn*Math.max(-1,Math.min(An-3,9-An,1))}return Ct=qe(Ct),Nt/=100,Et/=100,[lt(0),lt(8),lt(4),Le]}(At)}}}(u);return f?new ui(...f,!1):void 0}get rgb(){const{r:u,g:f,b:v,a:M}=this,D=M||1/0;return this.overwriteGetter("rgb",[u/D,f/D,v/D,M])}get hcl(){return this.overwriteGetter("hcl",function(u){const[f,v,M,D]=wt(u),U=Math.sqrt(v*v+M*M);return[Math.round(1e4*U)?qe(Math.atan2(M,v)*Js):NaN,U,f,D]}(this.rgb))}get lab(){return this.overwriteGetter("lab",wt(this.rgb))}overwriteGetter(u,f){return Object.defineProperty(this,u,{value:f}),f}toString(){const[u,f,v,M]=this.rgb;return`rgba(${[u,f,v].map(D=>Math.round(255*D)).join(",")},${M})`}static interpolate(u,f,v,M="rgb"){switch(M){case"rgb":{const[D,U,W,X]=nl(u.rgb,f.rgb,v);return new ui(D,U,W,X,!1)}case"hcl":{const[D,U,W,X]=u.hcl,[re,de,_e,Re]=f.hcl;let ze,Ge;if(isNaN(D)||isNaN(re))isNaN(D)?isNaN(re)?ze=NaN:(ze=re,W!==1&&W!==0||(Ge=de)):(ze=D,_e!==1&&_e!==0||(Ge=U));else{let Et=re-D;re>D&&Et>180?Et-=360:re<D&&D-re>180&&(Et+=360),ze=D+v*Et}const[et,At,Ct,Nt]=function([Et,Le,lt,Ot]){return Et=isNaN(Et)?0:Et*Bs,hn([lt,Math.cos(Et)*Le,Math.sin(Et)*Le,Ot])}([ze,Ge??wi(U,de,v),wi(W,_e,v),wi(X,Re,v)]);return new ui(et,At,Ct,Nt,!1)}case"lab":{const[D,U,W,X]=hn(nl(u.lab,f.lab,v));return new ui(D,U,W,X,!1)}}}}ui.black=new ui(0,0,0,1),ui.white=new ui(1,1,1,1),ui.transparent=new ui(0,0,0,0),ui.red=new ui(1,0,0,1);class aa{constructor(u,f,v){this.sensitivity=u?f?"variant":"case":f?"accent":"base",this.locale=v,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(u,f){return this.collator.compare(u,f)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const XA=["bottom","center","top"];class Ea{constructor(u,f,v,M,D,U){this.text=u,this.image=f,this.scale=v,this.fontStack=M,this.textColor=D,this.verticalAlign=U}}class Rr{constructor(u){this.sections=u}static fromString(u){return new Rr([new Ea(u,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(u=>u.text.length!==0||u.image&&u.image.name.length!==0)}static factory(u){return u instanceof Rr?u:Rr.fromString(u)}toString(){return this.sections.length===0?"":this.sections.map(u=>u.text).join("")}}class Yi{constructor(u){this.values=u.slice()}static parse(u){if(u instanceof Yi)return u;if(typeof u=="number")return new Yi([u,u,u,u]);if(Array.isArray(u)&&!(u.length<1||u.length>4)){for(const f of u)if(typeof f!="number")return;switch(u.length){case 1:u=[u[0],u[0],u[0],u[0]];break;case 2:u=[u[0],u[1],u[0],u[1]];break;case 3:u=[u[0],u[1],u[2],u[1]]}return new Yi(u)}}toString(){return JSON.stringify(this.values)}static interpolate(u,f,v){return new Yi(nl(u.values,f.values,v))}}class yo{constructor(u){this.name="ExpressionEvaluationError",this.message=u}toJSON(){return this.message}}const gu=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class wo{constructor(u){this.values=u.slice()}static parse(u){if(u instanceof wo)return u;if(Array.isArray(u)&&!(u.length<1)&&u.length%2==0){for(let f=0;f<u.length;f+=2){const v=u[f],M=u[f+1];if(typeof v!="string"||!gu.has(v)||!Array.isArray(M)||M.length!==2||typeof M[0]!="number"||typeof M[1]!="number")return}return new wo(u)}}toString(){return JSON.stringify(this.values)}static interpolate(u,f,v){const M=u.values,D=f.values;if(M.length!==D.length)throw new yo(`Cannot interpolate values of different length. from: ${u.toString()}, to: ${f.toString()}`);const U=[];for(let W=0;W<M.length;W+=2){if(M[W]!==D[W])throw new yo(`Cannot interpolate values containing mismatched anchors. from[${W}]: ${M[W]}, to[${W}]: ${D[W]}`);U.push(M[W]);const[X,re]=M[W+1],[de,_e]=D[W+1];U.push([wi(X,de,v),wi(re,_e,v)])}return new wo(U)}}class Ws{constructor(u){this.name=u.name,this.available=u.available}toString(){return this.name}static fromString(u){return u?new Ws({name:u,available:!1}):null}}class Gs{constructor(u,f,v){this.from=u,this.to=f,this.transition=v}static interpolate(u,f,v){return new Gs(u,f,v)}static parse(u){return u instanceof Gs?u:Array.isArray(u)&&u.length===3&&typeof u[0]=="string"&&typeof u[1]=="string"&&typeof u[2]=="number"?new Gs(u[0],u[1],u[2]):typeof u=="object"&&typeof u.from=="string"&&typeof u.to=="string"&&typeof u.transition=="number"?new Gs(u.from,u.to,u.transition):typeof u=="string"?new Gs(u,u,1):void 0}}function Lu(h,u,f,v){return typeof h=="number"&&h>=0&&h<=255&&typeof u=="number"&&u>=0&&u<=255&&typeof f=="number"&&f>=0&&f<=255?v===void 0||typeof v=="number"&&v>=0&&v<=1?null:`Invalid rgba value [${[h,u,f,v].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof v=="number"?[h,u,f,v]:[h,u,f]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function _l(h){if(h===null||typeof h=="string"||typeof h=="boolean"||typeof h=="number"||h instanceof Gs||h instanceof ui||h instanceof aa||h instanceof Rr||h instanceof Yi||h instanceof wo||h instanceof Ws)return!0;if(Array.isArray(h)){for(const u of h)if(!_l(u))return!1;return!0}if(typeof h=="object"){for(const u in h)if(!_l(h[u]))return!1;return!0}return!1}function Ao(h){if(h===null)return Er;if(typeof h=="string")return Rn;if(typeof h=="boolean")return er;if(typeof h=="number")return on;if(h instanceof ui)return Xr;if(h instanceof Gs)return Ur;if(h instanceof aa)return mo;if(h instanceof Rr)return Ma;if(h instanceof Yi)return qi;if(h instanceof wo)return io;if(h instanceof Ws)return vi;if(Array.isArray(h)){const u=h.length;let f;for(const v of h){const M=Ao(v);if(f){if(f===M)continue;f=ur;break}f=M}return Do(f||ur,u)}return Dr}function Bo(h){const u=typeof h;return h===null?"":u==="string"||u==="number"||u==="boolean"?String(h):h instanceof ui||h instanceof Gs||h instanceof Rr||h instanceof Yi||h instanceof wo||h instanceof Ws?h.toString():JSON.stringify(h)}class Ho{constructor(u,f){this.type=u,this.value=f}static parse(u,f){if(u.length!==2)return f.error(`'literal' expression requires exactly one argument, but found ${u.length-1} instead.`);if(!_l(u[1]))return f.error("invalid value");const v=u[1];let M=Ao(v);const D=f.expectedType;return M.kind!=="array"||M.N!==0||!D||D.kind!=="array"||typeof D.N=="number"&&D.N!==0||(M=D),new Ho(M,v)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const Ba={string:Rn,number:on,boolean:er,object:Dr};class Ms{constructor(u,f){this.type=u,this.args=f}static parse(u,f){if(u.length<2)return f.error("Expected at least one argument.");let v,M=1;const D=u[0];if(D==="array"){let W,X;if(u.length>2){const re=u[1];if(typeof re!="string"||!(re in Ba)||re==="object")return f.error('The item type argument of "array" must be one of string, number, boolean',1);W=Ba[re],M++}else W=ur;if(u.length>3){if(u[2]!==null&&(typeof u[2]!="number"||u[2]<0||u[2]!==Math.floor(u[2])))return f.error('The length argument to "array" must be a positive integer literal',2);X=u[2],M++}v=Do(W,X)}else{if(!Ba[D])throw new Error(`Types doesn't contain name = ${D}`);v=Ba[D]}const U=[];for(;M<u.length;M++){const W=f.parse(u[M],M,ur);if(!W)return null;U.push(W)}return new Ms(v,U)}evaluate(u){for(let f=0;f<this.args.length;f++){const v=this.args[f].evaluate(u);if(!Sa(this.type,Ao(v)))return v;if(f===this.args.length-1)throw new yo(`Expected value to be of type ${Ti(this.type)}, but found ${Ti(Ao(v))} instead.`)}throw new Error}eachChild(u){this.args.forEach(u)}outputDefined(){return this.args.every(u=>u.outputDefined())}}const Oa={"to-boolean":er,"to-color":Xr,"to-number":on,"to-string":Rn};class ea{constructor(u,f){this.type=u,this.args=f}static parse(u,f){if(u.length<2)return f.error("Expected at least one argument.");const v=u[0];if(!Oa[v])throw new Error(`Can't parse ${v} as it is not part of the known types`);if((v==="to-boolean"||v==="to-string")&&u.length!==2)return f.error("Expected one argument.");const M=Oa[v],D=[];for(let U=1;U<u.length;U++){const W=f.parse(u[U],U,ur);if(!W)return null;D.push(W)}return new ea(M,D)}evaluate(u){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(u);case"color":{let f,v;for(const M of this.args){if(f=M.evaluate(u),v=null,f instanceof ui)return f;if(typeof f=="string"){const D=u.parseColor(f);if(D)return D}else if(Array.isArray(f)&&(v=f.length<3||f.length>4?`Invalid rgba value ${JSON.stringify(f)}: expected an array containing either three or four numeric values.`:Lu(f[0],f[1],f[2],f[3]),!v))return new ui(f[0]/255,f[1]/255,f[2]/255,f[3])}throw new yo(v||`Could not parse color from value '${typeof f=="string"?f:JSON.stringify(f)}'`)}case"padding":{let f;for(const v of this.args){f=v.evaluate(u);const M=Yi.parse(f);if(M)return M}throw new yo(`Could not parse padding from value '${typeof f=="string"?f:JSON.stringify(f)}'`)}case"variableAnchorOffsetCollection":{let f;for(const v of this.args){f=v.evaluate(u);const M=wo.parse(f);if(M)return M}throw new yo(`Could not parse variableAnchorOffsetCollection from value '${typeof f=="string"?f:JSON.stringify(f)}'`)}case"number":{let f=null;for(const v of this.args){if(f=v.evaluate(u),f===null)return 0;const M=Number(f);if(!isNaN(M))return M}throw new yo(`Could not convert ${JSON.stringify(f)} to number.`)}case"formatted":return Rr.fromString(Bo(this.args[0].evaluate(u)));case"resolvedImage":return Ws.fromString(Bo(this.args[0].evaluate(u)));case"projectionDefinition":return this.args[0].evaluate(u);default:return Bo(this.args[0].evaluate(u))}}eachChild(u){this.args.forEach(u)}outputDefined(){return this.args.every(u=>u.outputDefined())}}const EA=["Unknown","Point","LineString","Polygon"];class co{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?EA[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(u){let f=this._parseColorCache[u];return f||(f=this._parseColorCache[u]=ui.parse(u)),f}}class Zl{constructor(u,f,v=[],M,D=new gr,U=[]){this.registry=u,this.path=v,this.key=v.map(W=>`[${W}]`).join(""),this.scope=D,this.errors=U,this.expectedType=M,this._isConstant=f}parse(u,f,v,M,D={}){return f?this.concat(f,v,M)._parse(u,D):this._parse(u,D)}_parse(u,f){function v(M,D,U){return U==="assert"?new Ms(D,[M]):U==="coerce"?new ea(D,[M]):M}if(u!==null&&typeof u!="string"&&typeof u!="boolean"&&typeof u!="number"||(u=["literal",u]),Array.isArray(u)){if(u.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const M=u[0];if(typeof M!="string")return this.error(`Expression name must be a string, but found ${typeof M} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const D=this.registry[M];if(D){let U=D.parse(u,this);if(!U)return null;if(this.expectedType){const W=this.expectedType,X=U.type;if(W.kind!=="string"&&W.kind!=="number"&&W.kind!=="boolean"&&W.kind!=="object"&&W.kind!=="array"||X.kind!=="value")if(W.kind!=="projectionDefinition"||X.kind!=="string"&&X.kind!=="array")if(W.kind!=="color"&&W.kind!=="formatted"&&W.kind!=="resolvedImage"||X.kind!=="value"&&X.kind!=="string")if(W.kind!=="padding"||X.kind!=="value"&&X.kind!=="number"&&X.kind!=="array")if(W.kind!=="variableAnchorOffsetCollection"||X.kind!=="value"&&X.kind!=="array"){if(this.checkSubtype(W,X))return null}else U=v(U,W,f.typeAnnotation||"coerce");else U=v(U,W,f.typeAnnotation||"coerce");else U=v(U,W,f.typeAnnotation||"coerce");else U=v(U,W,f.typeAnnotation||"coerce");else U=v(U,W,f.typeAnnotation||"assert")}if(!(U instanceof Ho)&&U.type.kind!=="resolvedImage"&&this._isConstant(U)){const W=new co;try{U=new Ho(U.type,U.evaluate(W))}catch(X){return this.error(X.message),null}}return U}return this.error(`Unknown expression "${M}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(u===void 0?"'undefined' value invalid. Use null instead.":typeof u=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof u} instead.`)}concat(u,f,v){const M=typeof u=="number"?this.path.concat(u):this.path,D=v?this.scope.concat(v):this.scope;return new Zl(this.registry,this._isConstant,M,f||null,D,this.errors)}error(u,...f){const v=`${this.key}${f.map(M=>`[${M}]`).join("")}`;this.errors.push(new On(v,u))}checkSubtype(u,f){const v=Sa(u,f);return v&&this.error(v),v}}class Ui{constructor(u,f){this.type=f.type,this.bindings=[].concat(u),this.result=f}evaluate(u){return this.result.evaluate(u)}eachChild(u){for(const f of this.bindings)u(f[1]);u(this.result)}static parse(u,f){if(u.length<4)return f.error(`Expected at least 3 arguments, but found ${u.length-1} instead.`);const v=[];for(let D=1;D<u.length-1;D+=2){const U=u[D];if(typeof U!="string")return f.error(`Expected string, but found ${typeof U} instead.`,D);if(/[^a-zA-Z0-9_]/.test(U))return f.error("Variable names must contain only alphanumeric characters or '_'.",D);const W=f.parse(u[D+1],D+1);if(!W)return null;v.push([U,W])}const M=f.parse(u[u.length-1],u.length-1,f.expectedType,v);return M?new Ui(v,M):null}outputDefined(){return this.result.outputDefined()}}class Yr{constructor(u,f){this.type=f.type,this.name=u,this.boundExpression=f}static parse(u,f){if(u.length!==2||typeof u[1]!="string")return f.error("'var' expression requires exactly one string literal argument.");const v=u[1];return f.scope.has(v)?new Yr(v,f.scope.get(v)):f.error(`Unknown variable "${v}". Make sure "${v}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(u){return this.boundExpression.evaluate(u)}eachChild(){}outputDefined(){return!1}}class Xl{constructor(u,f,v){this.type=u,this.index=f,this.input=v}static parse(u,f){if(u.length!==3)return f.error(`Expected 2 arguments, but found ${u.length-1} instead.`);const v=f.parse(u[1],1,on),M=f.parse(u[2],2,Do(f.expectedType||ur));return v&&M?new Xl(M.type.itemType,v,M):null}evaluate(u){const f=this.index.evaluate(u),v=this.input.evaluate(u);if(f<0)throw new yo(`Array index out of bounds: ${f} < 0.`);if(f>=v.length)throw new yo(`Array index out of bounds: ${f} > ${v.length-1}.`);if(f!==Math.floor(f))throw new yo(`Array index must be an integer, but found ${f} instead.`);return v[f]}eachChild(u){u(this.index),u(this.input)}outputDefined(){return!1}}class $i{constructor(u,f){this.type=er,this.needle=u,this.haystack=f}static parse(u,f){if(u.length!==3)return f.error(`Expected 2 arguments, but found ${u.length-1} instead.`);const v=f.parse(u[1],1,ur),M=f.parse(u[2],2,ur);return v&&M?ns(v.type,[er,Rn,on,Er,ur])?new $i(v,M):f.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ti(v.type)} instead`):null}evaluate(u){const f=this.needle.evaluate(u),v=this.haystack.evaluate(u);if(!v)return!1;if(!sa(f,["boolean","string","number","null"]))throw new yo(`Expected first argument to be of type boolean, string, number or null, but found ${Ti(Ao(f))} instead.`);if(!sa(v,["string","array"]))throw new yo(`Expected second argument to be of type array or string, but found ${Ti(Ao(v))} instead.`);return v.indexOf(f)>=0}eachChild(u){u(this.needle),u(this.haystack)}outputDefined(){return!0}}class so{constructor(u,f,v){this.type=on,this.needle=u,this.haystack=f,this.fromIndex=v}static parse(u,f){if(u.length<=2||u.length>=5)return f.error(`Expected 3 or 4 arguments, but found ${u.length-1} instead.`);const v=f.parse(u[1],1,ur),M=f.parse(u[2],2,ur);if(!v||!M)return null;if(!ns(v.type,[er,Rn,on,Er,ur]))return f.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ti(v.type)} instead`);if(u.length===4){const D=f.parse(u[3],3,on);return D?new so(v,M,D):null}return new so(v,M)}evaluate(u){const f=this.needle.evaluate(u),v=this.haystack.evaluate(u);if(!sa(f,["boolean","string","number","null"]))throw new yo(`Expected first argument to be of type boolean, string, number or null, but found ${Ti(Ao(f))} instead.`);let M;if(this.fromIndex&&(M=this.fromIndex.evaluate(u)),sa(v,["string"])){const D=v.indexOf(f,M);return D===-1?-1:[...v.slice(0,D)].length}if(sa(v,["array"]))return v.indexOf(f,M);throw new yo(`Expected second argument to be of type array or string, but found ${Ti(Ao(v))} instead.`)}eachChild(u){u(this.needle),u(this.haystack),this.fromIndex&&u(this.fromIndex)}outputDefined(){return!1}}class Ki{constructor(u,f,v,M,D,U){this.inputType=u,this.type=f,this.input=v,this.cases=M,this.outputs=D,this.otherwise=U}static parse(u,f){if(u.length<5)return f.error(`Expected at least 4 arguments, but found only ${u.length-1}.`);if(u.length%2!=1)return f.error("Expected an even number of arguments.");let v,M;f.expectedType&&f.expectedType.kind!=="value"&&(M=f.expectedType);const D={},U=[];for(let re=2;re<u.length-1;re+=2){let de=u[re];const _e=u[re+1];Array.isArray(de)||(de=[de]);const Re=f.concat(re);if(de.length===0)return Re.error("Expected at least one branch label.");for(const Ge of de){if(typeof Ge!="number"&&typeof Ge!="string")return Re.error("Branch labels must be numbers or strings.");if(typeof Ge=="number"&&Math.abs(Ge)>Number.MAX_SAFE_INTEGER)return Re.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof Ge=="number"&&Math.floor(Ge)!==Ge)return Re.error("Numeric branch labels must be integer values.");if(v){if(Re.checkSubtype(v,Ao(Ge)))return null}else v=Ao(Ge);if(D[String(Ge)]!==void 0)return Re.error("Branch labels must be unique.");D[String(Ge)]=U.length}const ze=f.parse(_e,re,M);if(!ze)return null;M=M||ze.type,U.push(ze)}const W=f.parse(u[1],1,ur);if(!W)return null;const X=f.parse(u[u.length-1],u.length-1,M);return X?W.type.kind!=="value"&&f.concat(1).checkSubtype(v,W.type)?null:new Ki(v,M,W,D,U,X):null}evaluate(u){const f=this.input.evaluate(u);return(Ao(f)===this.inputType&&this.outputs[this.cases[f]]||this.otherwise).evaluate(u)}eachChild(u){u(this.input),this.outputs.forEach(u),u(this.otherwise)}outputDefined(){return this.outputs.every(u=>u.outputDefined())&&this.otherwise.outputDefined()}}class J{constructor(u,f,v){this.type=u,this.branches=f,this.otherwise=v}static parse(u,f){if(u.length<4)return f.error(`Expected at least 3 arguments, but found only ${u.length-1}.`);if(u.length%2!=0)return f.error("Expected an odd number of arguments.");let v;f.expectedType&&f.expectedType.kind!=="value"&&(v=f.expectedType);const M=[];for(let U=1;U<u.length-1;U+=2){const W=f.parse(u[U],U,er);if(!W)return null;const X=f.parse(u[U+1],U+1,v);if(!X)return null;M.push([W,X]),v=v||X.type}const D=f.parse(u[u.length-1],u.length-1,v);if(!D)return null;if(!v)throw new Error("Can't infer output type");return new J(v,M,D)}evaluate(u){for(const[f,v]of this.branches)if(f.evaluate(u))return v.evaluate(u);return this.otherwise.evaluate(u)}eachChild(u){for(const[f,v]of this.branches)u(f),u(v);u(this.otherwise)}outputDefined(){return this.branches.every(([u,f])=>f.outputDefined())&&this.otherwise.outputDefined()}}class Ie{constructor(u,f,v,M){this.type=u,this.input=f,this.beginIndex=v,this.endIndex=M}static parse(u,f){if(u.length<=2||u.length>=5)return f.error(`Expected 3 or 4 arguments, but found ${u.length-1} instead.`);const v=f.parse(u[1],1,ur),M=f.parse(u[2],2,on);if(!v||!M)return null;if(!ns(v.type,[Do(ur),Rn,ur]))return f.error(`Expected first argument to be of type array or string, but found ${Ti(v.type)} instead`);if(u.length===4){const D=f.parse(u[3],3,on);return D?new Ie(v.type,v,M,D):null}return new Ie(v.type,v,M)}evaluate(u){const f=this.input.evaluate(u),v=this.beginIndex.evaluate(u);let M;if(this.endIndex&&(M=this.endIndex.evaluate(u)),sa(f,["string"]))return[...f].slice(v,M).join("");if(sa(f,["array"]))return f.slice(v,M);throw new yo(`Expected first argument to be of type array or string, but found ${Ti(Ao(f))} instead.`)}eachChild(u){u(this.input),u(this.beginIndex),this.endIndex&&u(this.endIndex)}outputDefined(){return!1}}function st(h,u){const f=h.length-1;let v,M,D=0,U=f,W=0;for(;D<=U;)if(W=Math.floor((D+U)/2),v=h[W],M=h[W+1],v<=u){if(W===f||u<M)return W;D=W+1}else{if(!(v>u))throw new yo("Input is not a number.");U=W-1}return 0}class $t{constructor(u,f,v){this.type=u,this.input=f,this.labels=[],this.outputs=[];for(const[M,D]of v)this.labels.push(M),this.outputs.push(D)}static parse(u,f){if(u.length-1<4)return f.error(`Expected at least 4 arguments, but found only ${u.length-1}.`);if((u.length-1)%2!=0)return f.error("Expected an even number of arguments.");const v=f.parse(u[1],1,on);if(!v)return null;const M=[];let D=null;f.expectedType&&f.expectedType.kind!=="value"&&(D=f.expectedType);for(let U=1;U<u.length;U+=2){const W=U===1?-1/0:u[U],X=u[U+1],re=U,de=U+1;if(typeof W!="number")return f.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',re);if(M.length&&M[M.length-1][0]>=W)return f.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',re);const _e=f.parse(X,de,D);if(!_e)return null;D=D||_e.type,M.push([W,_e])}return new $t(D,v,M)}evaluate(u){const f=this.labels,v=this.outputs;if(f.length===1)return v[0].evaluate(u);const M=this.input.evaluate(u);if(M<=f[0])return v[0].evaluate(u);const D=f.length;return M>=f[D-1]?v[D-1].evaluate(u):v[st(f,M)].evaluate(u)}eachChild(u){u(this.input);for(const f of this.outputs)u(f)}outputDefined(){return this.outputs.every(u=>u.outputDefined())}}function Kr(h){return h&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h}var $n,ti,Ai=function(){if(ti)return $n;function h(u,f,v,M){this.cx=3*u,this.bx=3*(v-u)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*f,this.by=3*(M-f)-this.cy,this.ay=1-this.cy-this.by,this.p1x=u,this.p1y=f,this.p2x=v,this.p2y=M}return ti=1,$n=h,h.prototype={sampleCurveX:function(u){return((this.ax*u+this.bx)*u+this.cx)*u},sampleCurveY:function(u){return((this.ay*u+this.by)*u+this.cy)*u},sampleCurveDerivativeX:function(u){return(3*this.ax*u+2*this.bx)*u+this.cx},solveCurveX:function(u,f){if(f===void 0&&(f=1e-6),u<0)return 0;if(u>1)return 1;for(var v=u,M=0;M<8;M++){var D=this.sampleCurveX(v)-u;if(Math.abs(D)<f)return v;var U=this.sampleCurveDerivativeX(v);if(Math.abs(U)<1e-6)break;v-=D/U}var W=0,X=1;for(v=u,M=0;M<20&&(D=this.sampleCurveX(v),!(Math.abs(D-u)<f));M++)u>D?W=v:X=v,v=.5*(X-W)+W;return v},solve:function(u,f){return this.sampleCurveY(this.solveCurveX(u,f))}},$n}(),Br=Kr(Ai);class xr{constructor(u,f,v,M,D){this.type=u,this.operator=f,this.interpolation=v,this.input=M,this.labels=[],this.outputs=[];for(const[U,W]of D)this.labels.push(U),this.outputs.push(W)}static interpolationFactor(u,f,v,M){let D=0;if(u.name==="exponential")D=zi(f,u.base,v,M);else if(u.name==="linear")D=zi(f,1,v,M);else if(u.name==="cubic-bezier"){const U=u.controlPoints;D=new Br(U[0],U[1],U[2],U[3]).solve(zi(f,1,v,M))}return D}static parse(u,f){let[v,M,D,...U]=u;if(!Array.isArray(M)||M.length===0)return f.error("Expected an interpolation type expression.",1);if(M[0]==="linear")M={name:"linear"};else if(M[0]==="exponential"){const re=M[1];if(typeof re!="number")return f.error("Exponential interpolation requires a numeric base.",1,1);M={name:"exponential",base:re}}else{if(M[0]!=="cubic-bezier")return f.error(`Unknown interpolation type ${String(M[0])}`,1,0);{const re=M.slice(1);if(re.length!==4||re.some(de=>typeof de!="number"||de<0||de>1))return f.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);M={name:"cubic-bezier",controlPoints:re}}}if(u.length-1<4)return f.error(`Expected at least 4 arguments, but found only ${u.length-1}.`);if((u.length-1)%2!=0)return f.error("Expected an even number of arguments.");if(D=f.parse(D,2,on),!D)return null;const W=[];let X=null;v==="interpolate-hcl"||v==="interpolate-lab"?X=Xr:f.expectedType&&f.expectedType.kind!=="value"&&(X=f.expectedType);for(let re=0;re<U.length;re+=2){const de=U[re],_e=U[re+1],Re=re+3,ze=re+4;if(typeof de!="number")return f.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Re);if(W.length&&W[W.length-1][0]>=de)return f.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Re);const Ge=f.parse(_e,ze,X);if(!Ge)return null;X=X||Ge.type,W.push([de,Ge])}return Al(X,on)||Al(X,Ur)||Al(X,Xr)||Al(X,qi)||Al(X,io)||Al(X,Do(on))?new xr(X,v,M,D,W):f.error(`Type ${Ti(X)} is not interpolatable.`)}evaluate(u){const f=this.labels,v=this.outputs;if(f.length===1)return v[0].evaluate(u);const M=this.input.evaluate(u);if(M<=f[0])return v[0].evaluate(u);const D=f.length;if(M>=f[D-1])return v[D-1].evaluate(u);const U=st(f,M),W=xr.interpolationFactor(this.interpolation,M,f[U],f[U+1]),X=v[U].evaluate(u),re=v[U+1].evaluate(u);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return wi(X,re,W);case"color":return ui.interpolate(X,re,W);case"padding":return Yi.interpolate(X,re,W);case"variableAnchorOffsetCollection":return wo.interpolate(X,re,W);case"array":return nl(X,re,W);case"projectionDefinition":return Gs.interpolate(X,re,W)}case"interpolate-hcl":return ui.interpolate(X,re,W,"hcl");case"interpolate-lab":return ui.interpolate(X,re,W,"lab")}}eachChild(u){u(this.input);for(const f of this.outputs)u(f)}outputDefined(){return this.outputs.every(u=>u.outputDefined())}}function zi(h,u,f,v){const M=v-f,D=h-f;return M===0?0:u===1?D/M:(Math.pow(u,D)-1)/(Math.pow(u,M)-1)}const Zi={color:ui.interpolate,number:wi,padding:Yi.interpolate,variableAnchorOffsetCollection:wo.interpolate,array:nl};class Si{constructor(u,f){this.type=u,this.args=f}static parse(u,f){if(u.length<2)return f.error("Expected at least one argument.");let v=null;const M=f.expectedType;M&&M.kind!=="value"&&(v=M);const D=[];for(const W of u.slice(1)){const X=f.parse(W,1+D.length,v,void 0,{typeAnnotation:"omit"});if(!X)return null;v=v||X.type,D.push(X)}if(!v)throw new Error("No output type");const U=M&&D.some(W=>Sa(M,W.type));return new Si(U?ur:v,D)}evaluate(u){let f,v=null,M=0;for(const D of this.args)if(M++,v=D.evaluate(u),v&&v instanceof Ws&&!v.available&&(f||(f=v.name),v=null,M===this.args.length&&(v=f)),v!==null)break;return v}eachChild(u){this.args.forEach(u)}outputDefined(){return this.args.every(u=>u.outputDefined())}}function Wr(h,u){return h==="=="||h==="!="?u.kind==="boolean"||u.kind==="string"||u.kind==="number"||u.kind==="null"||u.kind==="value":u.kind==="string"||u.kind==="number"||u.kind==="value"}function Mo(h,u,f,v){return v.compare(u,f)===0}function Di(h,u,f){const v=h!=="=="&&h!=="!=";return class QU{constructor(D,U,W){this.type=er,this.lhs=D,this.rhs=U,this.collator=W,this.hasUntypedArgument=D.type.kind==="value"||U.type.kind==="value"}static parse(D,U){if(D.length!==3&&D.length!==4)return U.error("Expected two or three arguments.");const W=D[0];let X=U.parse(D[1],1,ur);if(!X)return null;if(!Wr(W,X.type))return U.concat(1).error(`"${W}" comparisons are not supported for type '${Ti(X.type)}'.`);let re=U.parse(D[2],2,ur);if(!re)return null;if(!Wr(W,re.type))return U.concat(2).error(`"${W}" comparisons are not supported for type '${Ti(re.type)}'.`);if(X.type.kind!==re.type.kind&&X.type.kind!=="value"&&re.type.kind!=="value")return U.error(`Cannot compare types '${Ti(X.type)}' and '${Ti(re.type)}'.`);v&&(X.type.kind==="value"&&re.type.kind!=="value"?X=new Ms(re.type,[X]):X.type.kind!=="value"&&re.type.kind==="value"&&(re=new Ms(X.type,[re])));let de=null;if(D.length===4){if(X.type.kind!=="string"&&re.type.kind!=="string"&&X.type.kind!=="value"&&re.type.kind!=="value")return U.error("Cannot use collator to compare non-string types.");if(de=U.parse(D[3],3,mo),!de)return null}return new QU(X,re,de)}evaluate(D){const U=this.lhs.evaluate(D),W=this.rhs.evaluate(D);if(v&&this.hasUntypedArgument){const X=Ao(U),re=Ao(W);if(X.kind!==re.kind||X.kind!=="string"&&X.kind!=="number")throw new yo(`Expected arguments for "${h}" to be (string, string) or (number, number), but found (${X.kind}, ${re.kind}) instead.`)}if(this.collator&&!v&&this.hasUntypedArgument){const X=Ao(U),re=Ao(W);if(X.kind!=="string"||re.kind!=="string")return u(D,U,W)}return this.collator?f(D,U,W,this.collator.evaluate(D)):u(D,U,W)}eachChild(D){D(this.lhs),D(this.rhs),this.collator&&D(this.collator)}outputDefined(){return!0}}}const cs=Di("==",function(h,u,f){return u===f},Mo),pa=Di("!=",function(h,u,f){return u!==f},function(h,u,f,v){return!Mo(0,u,f,v)}),Na=Di("<",function(h,u,f){return u<f},function(h,u,f,v){return v.compare(u,f)<0}),yu=Di(">",function(h,u,f){return u>f},function(h,u,f,v){return v.compare(u,f)>0}),Qs=Di("<=",function(h,u,f){return u<=f},function(h,u,f,v){return v.compare(u,f)<=0}),Nd=Di(">=",function(h,u,f){return u>=f},function(h,u,f,v){return v.compare(u,f)>=0});class ma{constructor(u,f,v){this.type=mo,this.locale=v,this.caseSensitive=u,this.diacriticSensitive=f}static parse(u,f){if(u.length!==2)return f.error("Expected one argument.");const v=u[1];if(typeof v!="object"||Array.isArray(v))return f.error("Collator options argument must be an object.");const M=f.parse(v["case-sensitive"]!==void 0&&v["case-sensitive"],1,er);if(!M)return null;const D=f.parse(v["diacritic-sensitive"]!==void 0&&v["diacritic-sensitive"],1,er);if(!D)return null;let U=null;return v.locale&&(U=f.parse(v.locale,1,Rn),!U)?null:new ma(M,D,U)}evaluate(u){return new aa(this.caseSensitive.evaluate(u),this.diacriticSensitive.evaluate(u),this.locale?this.locale.evaluate(u):null)}eachChild(u){u(this.caseSensitive),u(this.diacriticSensitive),this.locale&&u(this.locale)}outputDefined(){return!1}}class bl{constructor(u,f,v,M,D){this.type=Rn,this.number=u,this.locale=f,this.currency=v,this.minFractionDigits=M,this.maxFractionDigits=D}static parse(u,f){if(u.length!==3)return f.error("Expected two arguments.");const v=f.parse(u[1],1,on);if(!v)return null;const M=u[2];if(typeof M!="object"||Array.isArray(M))return f.error("NumberFormat options argument must be an object.");let D=null;if(M.locale&&(D=f.parse(M.locale,1,Rn),!D))return null;let U=null;if(M.currency&&(U=f.parse(M.currency,1,Rn),!U))return null;let W=null;if(M["min-fraction-digits"]&&(W=f.parse(M["min-fraction-digits"],1,on),!W))return null;let X=null;return M["max-fraction-digits"]&&(X=f.parse(M["max-fraction-digits"],1,on),!X)?null:new bl(v,D,U,W,X)}evaluate(u){return new Intl.NumberFormat(this.locale?this.locale.evaluate(u):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(u):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(u):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(u):void 0}).format(this.number.evaluate(u))}eachChild(u){u(this.number),this.locale&&u(this.locale),this.currency&&u(this.currency),this.minFractionDigits&&u(this.minFractionDigits),this.maxFractionDigits&&u(this.maxFractionDigits)}outputDefined(){return!1}}class Wc{constructor(u){this.type=Ma,this.sections=u}static parse(u,f){if(u.length<2)return f.error("Expected at least one argument.");const v=u[1];if(!Array.isArray(v)&&typeof v=="object")return f.error("First argument must be an image or text section.");const M=[];let D=!1;for(let U=1;U<=u.length-1;++U){const W=u[U];if(D&&typeof W=="object"&&!Array.isArray(W)){D=!1;let X=null;if(W["font-scale"]&&(X=f.parse(W["font-scale"],1,on),!X))return null;let re=null;if(W["text-font"]&&(re=f.parse(W["text-font"],1,Do(Rn)),!re))return null;let de=null;if(W["text-color"]&&(de=f.parse(W["text-color"],1,Xr),!de))return null;let _e=null;if(W["vertical-align"]){if(typeof W["vertical-align"]=="string"&&!XA.includes(W["vertical-align"]))return f.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${W["vertical-align"]}' instead.`);if(_e=f.parse(W["vertical-align"],1,Rn),!_e)return null}const Re=M[M.length-1];Re.scale=X,Re.font=re,Re.textColor=de,Re.verticalAlign=_e}else{const X=f.parse(u[U],1,ur);if(!X)return null;const re=X.type.kind;if(re!=="string"&&re!=="value"&&re!=="null"&&re!=="resolvedImage")return f.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");D=!0,M.push({content:X,scale:null,font:null,textColor:null,verticalAlign:null})}}return new Wc(M)}evaluate(u){return new Rr(this.sections.map(f=>{const v=f.content.evaluate(u);return Ao(v)===vi?new Ea("",v,null,null,null,f.verticalAlign?f.verticalAlign.evaluate(u):null):new Ea(Bo(v),null,f.scale?f.scale.evaluate(u):null,f.font?f.font.evaluate(u).join(","):null,f.textColor?f.textColor.evaluate(u):null,f.verticalAlign?f.verticalAlign.evaluate(u):null)}))}eachChild(u){for(const f of this.sections)u(f.content),f.scale&&u(f.scale),f.font&&u(f.font),f.textColor&&u(f.textColor),f.verticalAlign&&u(f.verticalAlign)}outputDefined(){return!1}}class Uu{constructor(u){this.type=vi,this.input=u}static parse(u,f){if(u.length!==2)return f.error("Expected two arguments.");const v=f.parse(u[1],1,Rn);return v?new Uu(v):f.error("No image name provided.")}evaluate(u){const f=this.input.evaluate(u),v=Ws.fromString(f);return v&&u.availableImages&&(v.available=u.availableImages.indexOf(f)>-1),v}eachChild(u){u(this.input)}outputDefined(){return!1}}class Wd{constructor(u){this.type=on,this.input=u}static parse(u,f){if(u.length!==2)return f.error(`Expected 1 argument, but found ${u.length-1} instead.`);const v=f.parse(u[1],1);return v?v.type.kind!=="array"&&v.type.kind!=="string"&&v.type.kind!=="value"?f.error(`Expected argument of type string or array, but found ${Ti(v.type)} instead.`):new Wd(v):null}evaluate(u){const f=this.input.evaluate(u);if(typeof f=="string")return[...f].length;if(Array.isArray(f))return f.length;throw new yo(`Expected value to be of type string or array, but found ${Ti(Ao(f))} instead.`)}eachChild(u){u(this.input)}outputDefined(){return!1}}const vu=8192;function Fs(h,u){const f=(180+h[0])/360,v=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+h[1]*Math.PI/360)))/360,M=Math.pow(2,u.z);return[Math.round(f*M*vu),Math.round(v*M*vu)]}function BA(h,u){const f=Math.pow(2,u.z);return[(M=(h[0]/vu+u.x)/f,360*M-180),(v=(h[1]/vu+u.y)/f,360/Math.PI*Math.atan(Math.exp((180-360*v)*Math.PI/180))-90)];var v,M}function cd(h,u){h[0]=Math.min(h[0],u[0]),h[1]=Math.min(h[1],u[1]),h[2]=Math.max(h[2],u[0]),h[3]=Math.max(h[3],u[1])}function Gd(h,u){return!(h[0]<=u[0]||h[2]>=u[2]||h[1]<=u[1]||h[3]>=u[3])}function bc(h,u,f){const v=h[0]-u[0],M=h[1]-u[1],D=h[0]-f[0],U=h[1]-f[1];return v*U-D*M==0&&v*D<=0&&M*U<=0}function xc(h,u,f,v){return(M=[v[0]-f[0],v[1]-f[1]])[0]*(D=[u[0]-h[0],u[1]-h[1]])[1]-M[1]*D[0]!=0&&!(!of(h,u,f,v)||!of(f,v,h,u));var M,D}function $f(h,u,f){for(const v of f)for(let M=0;M<v.length-1;++M)if(xc(h,u,v[M],v[M+1]))return!0;return!1}function dd(h,u,f=!1){let v=!1;for(const W of u)for(let X=0;X<W.length-1;X++){if(bc(h,W[X],W[X+1]))return f;(D=W[X])[1]>(M=h)[1]!=(U=W[X+1])[1]>M[1]&&M[0]<(U[0]-D[0])*(M[1]-D[1])/(U[1]-D[1])+D[0]&&(v=!v)}var M,D,U;return v}function Bp(h,u){for(const f of u)if(dd(h,f))return!0;return!1}function JA(h,u){for(const f of h)if(!dd(f,u))return!1;for(let f=0;f<h.length-1;++f)if($f(h[f],h[f+1],u))return!1;return!0}function ta(h,u){for(const f of u)if(JA(h,f))return!0;return!1}function of(h,u,f,v){const M=v[0]-f[0],D=v[1]-f[1],U=(h[0]-f[0])*D-M*(h[1]-f[1]),W=(u[0]-f[0])*D-M*(u[1]-f[1]);return U>0&&W<0||U<0&&W>0}function gh(h,u,f){const v=[];for(let M=0;M<h.length;M++){const D=[];for(let U=0;U<h[M].length;U++){const W=Fs(h[M][U],f);cd(u,W),D.push(W)}v.push(D)}return v}function hd(h,u,f){const v=[];for(let M=0;M<h.length;M++){const D=gh(h[M],u,f);v.push(D)}return v}function sf(h,u,f,v){if(h[0]<f[0]||h[0]>f[2]){const M=.5*v;let D=h[0]-f[0]>M?-v:f[0]-h[0]>M?v:0;D===0&&(D=h[0]-f[2]>M?-v:f[2]-h[0]>M?v:0),h[0]+=D}cd(u,h)}function fd(h,u,f,v){const M=Math.pow(2,v.z)*vu,D=[v.x*vu,v.y*vu],U=[];for(const W of h)for(const X of W){const re=[X.x+D[0],X.y+D[1]];sf(re,u,f,M),U.push(re)}return U}function af(h,u,f,v){const M=Math.pow(2,v.z)*vu,D=[v.x*vu,v.y*vu],U=[];for(const X of h){const re=[];for(const de of X){const _e=[de.x+D[0],de.y+D[1]];cd(u,_e),re.push(_e)}U.push(re)}if(u[2]-u[0]<=M/2){(W=u)[0]=W[1]=1/0,W[2]=W[3]=-1/0;for(const X of U)for(const re of X)sf(re,u,f,M)}var W;return U}class ec{constructor(u,f){this.type=er,this.geojson=u,this.geometries=f}static parse(u,f){if(u.length!==2)return f.error(`'within' expression requires exactly one argument, but found ${u.length-1} instead.`);if(_l(u[1])){const v=u[1];if(v.type==="FeatureCollection"){const M=[];for(const D of v.features){const{type:U,coordinates:W}=D.geometry;U==="Polygon"&&M.push(W),U==="MultiPolygon"&&M.push(...W)}if(M.length)return new ec(v,{type:"MultiPolygon",coordinates:M})}else if(v.type==="Feature"){const M=v.geometry.type;if(M==="Polygon"||M==="MultiPolygon")return new ec(v,v.geometry)}else if(v.type==="Polygon"||v.type==="MultiPolygon")return new ec(v,v)}return f.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(u){if(u.geometry()!=null&&u.canonicalID()!=null){if(u.geometryType()==="Point")return function(f,v){const M=[1/0,1/0,-1/0,-1/0],D=[1/0,1/0,-1/0,-1/0],U=f.canonicalID();if(v.type==="Polygon"){const W=gh(v.coordinates,D,U),X=fd(f.geometry(),M,D,U);if(!Gd(M,D))return!1;for(const re of X)if(!dd(re,W))return!1}if(v.type==="MultiPolygon"){const W=hd(v.coordinates,D,U),X=fd(f.geometry(),M,D,U);if(!Gd(M,D))return!1;for(const re of X)if(!Bp(re,W))return!1}return!0}(u,this.geometries);if(u.geometryType()==="LineString")return function(f,v){const M=[1/0,1/0,-1/0,-1/0],D=[1/0,1/0,-1/0,-1/0],U=f.canonicalID();if(v.type==="Polygon"){const W=gh(v.coordinates,D,U),X=af(f.geometry(),M,D,U);if(!Gd(M,D))return!1;for(const re of X)if(!JA(re,W))return!1}if(v.type==="MultiPolygon"){const W=hd(v.coordinates,D,U),X=af(f.geometry(),M,D,U);if(!Gd(M,D))return!1;for(const re of X)if(!ta(re,W))return!1}return!0}(u,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let yh=class{constructor(h=[],u=(f,v)=>f<v?-1:f>v?1:0){if(this.data=h,this.length=this.data.length,this.compare=u,this.length>0)for(let f=(this.length>>1)-1;f>=0;f--)this._down(f)}push(h){this.data.push(h),this._up(this.length++)}pop(){if(this.length===0)return;const h=this.data[0],u=this.data.pop();return--this.length>0&&(this.data[0]=u,this._down(0)),h}peek(){return this.data[0]}_up(h){const{data:u,compare:f}=this,v=u[h];for(;h>0;){const M=h-1>>1,D=u[M];if(f(v,D)>=0)break;u[h]=D,h=M}u[h]=v}_down(h){const{data:u,compare:f}=this,v=this.length>>1,M=u[h];for(;h<v;){let D=1+(h<<1);const U=D+1;if(U<this.length&&f(u[U],u[D])<0&&(D=U),f(u[D],M)>=0)break;u[h]=u[D],h=D}u[h]=M}};function lf(h,u,f=0,v=h.length-1,M=Ch){for(;v>f;){if(v-f>600){const X=v-f+1,re=u-f+1,de=Math.log(X),_e=.5*Math.exp(2*de/3),Re=.5*Math.sqrt(de*_e*(X-_e)/X)*(re-X/2<0?-1:1);lf(h,u,Math.max(f,Math.floor(u-re*_e/X+Re)),Math.min(v,Math.floor(u+(X-re)*_e/X+Re)),M)}const D=h[u];let U=f,W=v;for(vh(h,f,u),M(h[v],D)>0&&vh(h,f,v);U<W;){for(vh(h,U,W),U++,W--;M(h[U],D)<0;)U++;for(;M(h[W],D)>0;)W--}M(h[f],D)===0?vh(h,f,W):(W++,vh(h,W,v)),W<=u&&(f=W+1),u<=W&&(v=W-1)}}function vh(h,u,f){const v=h[u];h[u]=h[f],h[f]=v}function Ch(h,u){return h<u?-1:h>u?1:0}function xl(h,u){if(h.length<=1)return[h];const f=[];let v,M;for(const D of h){const U=zu(D);U!==0&&(D.area=Math.abs(U),M===void 0&&(M=U<0),M===U<0?(v&&f.push(v),v=[D]):v.push(D))}if(v&&f.push(v),u>1)for(let D=0;D<f.length;D++)f[D].length<=u||(lf(f[D],u,1,f[D].length-1,_h),f[D]=f[D].slice(0,u));return f}function _h(h,u){return u.area-h.area}function zu(h){let u=0;for(let f,v,M=0,D=h.length,U=D-1;M<D;U=M++)f=h[M],v=h[U],u+=(v.x-f.x)*(f.y+v.y);return u}const lA=1/298.257223563,Gc=lA*(2-lA),bh=Math.PI/180;class xh{constructor(u){const f=6378.137*bh*1e3,v=Math.cos(u*bh),M=1/(1-Gc*(1-v*v)),D=Math.sqrt(M);this.kx=f*D*v,this.ky=f*D*M*(1-Gc)}distance(u,f){const v=this.wrap(u[0]-f[0])*this.kx,M=(u[1]-f[1])*this.ky;return Math.sqrt(v*v+M*M)}pointOnLine(u,f){let v,M,D,U,W=1/0;for(let X=0;X<u.length-1;X++){let re=u[X][0],de=u[X][1],_e=this.wrap(u[X+1][0]-re)*this.kx,Re=(u[X+1][1]-de)*this.ky,ze=0;_e===0&&Re===0||(ze=(this.wrap(f[0]-re)*this.kx*_e+(f[1]-de)*this.ky*Re)/(_e*_e+Re*Re),ze>1?(re=u[X+1][0],de=u[X+1][1]):ze>0&&(re+=_e/this.kx*ze,de+=Re/this.ky*ze)),_e=this.wrap(f[0]-re)*this.kx,Re=(f[1]-de)*this.ky;const Ge=_e*_e+Re*Re;Ge<W&&(W=Ge,v=re,M=de,D=X,U=ze)}return{point:[v,M],index:D,t:Math.max(0,Math.min(1,U))}}wrap(u){for(;u<-180;)u+=360;for(;u>180;)u-=360;return u}}function ju(h,u){return u[0]-h[0]}function uA(h){return h[1]-h[0]+1}function Ll(h,u){return h[1]>=h[0]&&h[1]<u}function Qc(h,u){if(h[0]>h[1])return[null,null];const f=uA(h);if(u){if(f===2)return[h,null];const M=Math.floor(f/2);return[[h[0],h[0]+M],[h[0]+M,h[1]]]}if(f===1)return[h,null];const v=Math.floor(f/2)-1;return[[h[0],h[0]+v],[h[0]+v+1,h[1]]]}function uf(h,u){if(!Ll(u,h.length))return[1/0,1/0,-1/0,-1/0];const f=[1/0,1/0,-1/0,-1/0];for(let v=u[0];v<=u[1];++v)cd(f,h[v]);return f}function Af(h){const u=[1/0,1/0,-1/0,-1/0];for(const f of h)for(const v of f)cd(u,v);return u}function Qd(h){return h[0]!==-1/0&&h[1]!==-1/0&&h[2]!==1/0&&h[3]!==1/0}function pd(h,u,f){if(!Qd(h)||!Qd(u))return NaN;let v=0,M=0;return h[2]<u[0]&&(v=u[0]-h[2]),h[0]>u[2]&&(v=h[0]-u[2]),h[1]>u[3]&&(M=h[1]-u[3]),h[3]<u[1]&&(M=u[1]-h[3]),f.distance([0,0],[v,M])}function la(h,u,f){const v=f.pointOnLine(u,h);return f.distance(h,v.point)}function rl(h,u,f,v,M){const D=Math.min(la(h,[f,v],M),la(u,[f,v],M)),U=Math.min(la(f,[h,u],M),la(v,[h,u],M));return Math.min(D,U)}function Zo(h,u,f,v,M){if(!Ll(u,h.length)||!Ll(v,f.length))return 1/0;let D=1/0;for(let U=u[0];U<u[1];++U){const W=h[U],X=h[U+1];for(let re=v[0];re<v[1];++re){const de=f[re],_e=f[re+1];if(xc(W,X,de,_e))return 0;D=Math.min(D,rl(W,X,de,_e,M))}}return D}function wh(h,u,f,v,M){if(!Ll(u,h.length)||!Ll(v,f.length))return NaN;let D=1/0;for(let U=u[0];U<=u[1];++U)for(let W=v[0];W<=v[1];++W)if(D=Math.min(D,M.distance(h[U],f[W])),D===0)return D;return D}function hm(h,u,f){if(dd(h,u,!0))return 0;let v=1/0;for(const M of u){const D=M[0],U=M[M.length-1];if(D!==U&&(v=Math.min(v,la(h,[U,D],f)),v===0))return v;const W=f.pointOnLine(M,h);if(v=Math.min(v,f.distance(h,W.point)),v===0)return v}return v}function md(h,u,f,v){if(!Ll(u,h.length))return NaN;for(let D=u[0];D<=u[1];++D)if(dd(h[D],f,!0))return 0;let M=1/0;for(let D=u[0];D<u[1];++D){const U=h[D],W=h[D+1];for(const X of f)for(let re=0,de=X.length,_e=de-1;re<de;_e=re++){const Re=X[_e],ze=X[re];if(xc(U,W,Re,ze))return 0;M=Math.min(M,rl(U,W,Re,ze,v))}}return M}function Cu(h,u){for(const f of h)for(const v of f)if(dd(v,u,!0))return!0;return!1}function Mh(h,u,f,v=1/0){const M=Af(h),D=Af(u);if(v!==1/0&&pd(M,D,f)>=v)return v;if(Gd(M,D)){if(Cu(h,u))return 0}else if(Cu(u,h))return 0;let U=1/0;for(const W of h)for(let X=0,re=W.length,de=re-1;X<re;de=X++){const _e=W[de],Re=W[X];for(const ze of u)for(let Ge=0,et=ze.length,At=et-1;Ge<et;At=Ge++){const Ct=ze[At],Nt=ze[Ge];if(xc(_e,Re,Ct,Nt))return 0;U=Math.min(U,rl(_e,Re,Ct,Nt,f))}}return U}function cf(h,u,f,v,M,D){if(!D)return;const U=pd(uf(v,D),M,f);U<u&&h.push([U,D,[0,0]])}function wc(h,u,f,v,M,D,U){if(!D||!U)return;const W=pd(uf(v,D),uf(M,U),f);W<u&&h.push([W,D,U])}function qd(h,u,f,v,M=1/0){let D=Math.min(v.distance(h[0],f[0][0]),M);if(D===0)return D;const U=new yh([[0,[0,h.length-1],[0,0]]],ju),W=Af(f);for(;U.length>0;){const X=U.pop();if(X[0]>=D)continue;const re=X[1],de=u?50:100;if(uA(re)<=de){if(!Ll(re,h.length))return NaN;if(u){const _e=md(h,re,f,v);if(isNaN(_e)||_e===0)return _e;D=Math.min(D,_e)}else for(let _e=re[0];_e<=re[1];++_e){const Re=hm(h[_e],f,v);if(D=Math.min(D,Re),D===0)return 0}}else{const _e=Qc(re,u);cf(U,D,v,h,W,_e[0]),cf(U,D,v,h,W,_e[1])}}return D}function Sh(h,u,f,v,M,D=1/0){let U=Math.min(D,M.distance(h[0],f[0]));if(U===0)return U;const W=new yh([[0,[0,h.length-1],[0,f.length-1]]],ju);for(;W.length>0;){const X=W.pop();if(X[0]>=U)continue;const re=X[1],de=X[2],_e=u?50:100,Re=v?50:100;if(uA(re)<=_e&&uA(de)<=Re){if(!Ll(re,h.length)&&Ll(de,f.length))return NaN;let ze;if(u&&v)ze=Zo(h,re,f,de,M),U=Math.min(U,ze);else if(u&&!v){const Ge=h.slice(re[0],re[1]+1);for(let et=de[0];et<=de[1];++et)if(ze=la(f[et],Ge,M),U=Math.min(U,ze),U===0)return U}else if(!u&&v){const Ge=f.slice(de[0],de[1]+1);for(let et=re[0];et<=re[1];++et)if(ze=la(h[et],Ge,M),U=Math.min(U,ze),U===0)return U}else ze=wh(h,re,f,de,M),U=Math.min(U,ze)}else{const ze=Qc(re,u),Ge=Qc(de,v);wc(W,U,M,h,f,ze[0],Ge[0]),wc(W,U,M,h,f,ze[0],Ge[1]),wc(W,U,M,h,f,ze[1],Ge[0]),wc(W,U,M,h,f,ze[1],Ge[1])}}return U}function Eh(h){return h.type==="MultiPolygon"?h.coordinates.map(u=>({type:"Polygon",coordinates:u})):h.type==="MultiLineString"?h.coordinates.map(u=>({type:"LineString",coordinates:u})):h.type==="MultiPoint"?h.coordinates.map(u=>({type:"Point",coordinates:u})):[h]}class Jl{constructor(u,f){this.type=on,this.geojson=u,this.geometries=f}static parse(u,f){if(u.length!==2)return f.error(`'distance' expression requires exactly one argument, but found ${u.length-1} instead.`);if(_l(u[1])){const v=u[1];if(v.type==="FeatureCollection")return new Jl(v,v.features.map(M=>Eh(M.geometry)).flat());if(v.type==="Feature")return new Jl(v,Eh(v.geometry));if("type"in v&&"coordinates"in v)return new Jl(v,Eh(v))}return f.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(u){if(u.geometry()!=null&&u.canonicalID()!=null){if(u.geometryType()==="Point")return function(f,v){const M=f.geometry(),D=M.flat().map(X=>BA([X.x,X.y],f.canonical));if(M.length===0)return NaN;const U=new xh(D[0][1]);let W=1/0;for(const X of v){switch(X.type){case"Point":W=Math.min(W,Sh(D,!1,[X.coordinates],!1,U,W));break;case"LineString":W=Math.min(W,Sh(D,!1,X.coordinates,!0,U,W));break;case"Polygon":W=Math.min(W,qd(D,!1,X.coordinates,U,W))}if(W===0)return W}return W}(u,this.geometries);if(u.geometryType()==="LineString")return function(f,v){const M=f.geometry(),D=M.flat().map(X=>BA([X.x,X.y],f.canonical));if(M.length===0)return NaN;const U=new xh(D[0][1]);let W=1/0;for(const X of v){switch(X.type){case"Point":W=Math.min(W,Sh(D,!0,[X.coordinates],!1,U,W));break;case"LineString":W=Math.min(W,Sh(D,!0,X.coordinates,!0,U,W));break;case"Polygon":W=Math.min(W,qd(D,!0,X.coordinates,U,W))}if(W===0)return W}return W}(u,this.geometries);if(u.geometryType()==="Polygon")return function(f,v){const M=f.geometry();if(M.length===0||M[0].length===0)return NaN;const D=xl(M,0).map(X=>X.map(re=>re.map(de=>BA([de.x,de.y],f.canonical)))),U=new xh(D[0][0][0][1]);let W=1/0;for(const X of v)for(const re of D){switch(X.type){case"Point":W=Math.min(W,qd([X.coordinates],!1,re,U,W));break;case"LineString":W=Math.min(W,qd(X.coordinates,!0,re,U,W));break;case"Polygon":W=Math.min(W,Mh(re,X.coordinates,U,W))}if(W===0)return W}return W}(u,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const Jt={"==":cs,"!=":pa,">":yu,"<":Na,">=":Nd,"<=":Qs,array:Ms,at:Xl,boolean:Ms,case:J,coalesce:Si,collator:ma,format:Wc,image:Uu,in:$i,"index-of":so,interpolate:xr,"interpolate-hcl":xr,"interpolate-lab":xr,length:Wd,let:Ui,literal:Ho,match:Ki,number:Ms,"number-format":bl,object:Ms,slice:Ie,step:$t,string:Ms,"to-boolean":ea,"to-color":ea,"to-number":ea,"to-string":ea,var:Yr,within:ec,distance:Jl};class En{constructor(u,f,v,M){this.name=u,this.type=f,this._evaluate=v,this.args=M}evaluate(u){return this._evaluate(u,this.args)}eachChild(u){this.args.forEach(u)}outputDefined(){return!1}static parse(u,f){const v=u[0],M=En.definitions[v];if(!M)return f.error(`Unknown expression "${v}". If you wanted a literal array, use ["literal", [...]].`,0);const D=Array.isArray(M)?M[0]:M.type,U=Array.isArray(M)?[[M[1],M[2]]]:M.overloads,W=U.filter(([re])=>!Array.isArray(re)||re.length===u.length-1);let X=null;for(const[re,de]of W){X=new Zl(f.registry,na,f.path,null,f.scope);const _e=[];let Re=!1;for(let ze=1;ze<u.length;ze++){const Ge=u[ze],et=Array.isArray(re)?re[ze-1]:re.type,At=X.parse(Ge,1+_e.length,et);if(!At){Re=!0;break}_e.push(At)}if(!Re)if(Array.isArray(re)&&re.length!==_e.length)X.error(`Expected ${re.length} arguments, but found ${_e.length} instead.`);else{for(let ze=0;ze<_e.length;ze++){const Ge=Array.isArray(re)?re[ze]:re.type,et=_e[ze];X.concat(ze+1).checkSubtype(Ge,et.type)}if(X.errors.length===0)return new En(v,D,de,_e)}}if(W.length===1)f.errors.push(...X.errors);else{const re=(W.length?W:U).map(([_e])=>{return Re=_e,Array.isArray(Re)?`(${Re.map(Ti).join(", ")})`:`(${Ti(Re.type)}...)`;var Re}).join(" | "),de=[];for(let _e=1;_e<u.length;_e++){const Re=f.parse(u[_e],1+de.length);if(!Re)return null;de.push(Ti(Re.type))}f.error(`Expected arguments of type ${re}, but found (${de.join(", ")}) instead.`)}return null}static register(u,f){En.definitions=f;for(const v in f)u[v]=En}}function ln(h,[u,f,v,M]){u=u.evaluate(h),f=f.evaluate(h),v=v.evaluate(h);const D=M?M.evaluate(h):1,U=Lu(u,f,v,D);if(U)throw new yo(U);return new ui(u/255,f/255,v/255,D,!1)}function Fr(h,u){return h in u}function Ei(h,u){const f=u[h];return f===void 0?null:f}function ho(h){return{type:h}}function na(h){if(h instanceof Yr)return na(h.boundExpression);if(h instanceof En&&h.name==="error"||h instanceof ma||h instanceof ec||h instanceof Jl)return!1;const u=h instanceof ea||h instanceof Ms;let f=!0;return h.eachChild(v=>{f=u?f&&na(v):f&&v instanceof Ho}),!!f&&rs(h)&&df(h,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function rs(h){if(h instanceof En&&(h.name==="get"&&h.args.length===1||h.name==="feature-state"||h.name==="has"&&h.args.length===1||h.name==="properties"||h.name==="geometry-type"||h.name==="id"||/^filter-/.test(h.name))||h instanceof ec||h instanceof Jl)return!1;let u=!0;return h.eachChild(f=>{u&&!rs(f)&&(u=!1)}),u}function OA(h){if(h instanceof En&&h.name==="feature-state")return!1;let u=!0;return h.eachChild(f=>{u&&!OA(f)&&(u=!1)}),u}function df(h,u){if(h instanceof En&&u.indexOf(h.name)>=0)return!1;let f=!0;return h.eachChild(v=>{f&&!df(v,u)&&(f=!1)}),f}function Nu(h){return{result:"success",value:h}}function _u(h){return{result:"error",value:h}}function bu(h){return h["property-type"]==="data-driven"||h["property-type"]==="cross-faded-data-driven"}function Ul(h){return!!h.expression&&h.expression.parameters.indexOf("zoom")>-1}function Wu(h){return!!h.expression&&h.expression.interpolated}function ao(h){return h instanceof Number?"number":h instanceof String?"string":h instanceof Boolean?"boolean":Array.isArray(h)?"array":h===null?"null":typeof h}function Oo(h){return typeof h=="object"&&h!==null&&!Array.isArray(h)}function gd(h){return h}function yd(h,u){const f=u.type==="color",v=h.stops&&typeof h.stops[0][0]=="object",M=v||!(v||h.property!==void 0),D=h.type||(Wu(u)?"exponential":"interval");if(f||u.type==="padding"){const de=f?ui.parse:Yi.parse;(h=Tn({},h)).stops&&(h.stops=h.stops.map(_e=>[_e[0],de(_e[1])])),h.default=de(h.default?h.default:u.default)}if(h.colorSpace&&(U=h.colorSpace)!=="rgb"&&U!=="hcl"&&U!=="lab")throw new Error(`Unknown color space: "${h.colorSpace}"`);var U;let W,X,re;if(D==="exponential")W=tc;else if(D==="interval")W=zl;else if(D==="categorical"){W=AA,X=Object.create(null);for(const de of h.stops)X[de[0]]=de[1];re=typeof h.stops[0][0]}else{if(D!=="identity")throw new Error(`Unknown function type "${D}"`);W=cA}if(v){const de={},_e=[];for(let Ge=0;Ge<h.stops.length;Ge++){const et=h.stops[Ge],At=et[0].zoom;de[At]===void 0&&(de[At]={zoom:At,type:h.type,property:h.property,default:h.default,stops:[]},_e.push(At)),de[At].stops.push([et[0].value,et[1]])}const Re=[];for(const Ge of _e)Re.push([de[Ge].zoom,yd(de[Ge],u)]);const ze={name:"linear"};return{kind:"composite",interpolationType:ze,interpolationFactor:xr.interpolationFactor.bind(void 0,ze),zoomStops:Re.map(Ge=>Ge[0]),evaluate:({zoom:Ge},et)=>tc({stops:Re,base:h.base},u,Ge).evaluate(Ge,et)}}if(M){const de=D==="exponential"?{name:"exponential",base:h.base!==void 0?h.base:1}:null;return{kind:"camera",interpolationType:de,interpolationFactor:xr.interpolationFactor.bind(void 0,de),zoomStops:h.stops.map(_e=>_e[0]),evaluate:({zoom:_e})=>W(h,u,_e,X,re)}}return{kind:"source",evaluate(de,_e){const Re=_e&&_e.properties?_e.properties[h.property]:void 0;return Re===void 0?eu(h.default,u.default):W(h,u,Re,X,re)}}}function eu(h,u,f){return h!==void 0?h:u!==void 0?u:f!==void 0?f:void 0}function AA(h,u,f,v,M){return eu(typeof f===M?v[f]:void 0,h.default,u.default)}function zl(h,u,f){if(ao(f)!=="number")return eu(h.default,u.default);const v=h.stops.length;if(v===1||f<=h.stops[0][0])return h.stops[0][1];if(f>=h.stops[v-1][0])return h.stops[v-1][1];const M=st(h.stops.map(D=>D[0]),f);return h.stops[M][1]}function tc(h,u,f){const v=h.base!==void 0?h.base:1;if(ao(f)!=="number")return eu(h.default,u.default);const M=h.stops.length;if(M===1||f<=h.stops[0][0])return h.stops[0][1];if(f>=h.stops[M-1][0])return h.stops[M-1][1];const D=st(h.stops.map(de=>de[0]),f),U=function(de,_e,Re,ze){const Ge=ze-Re,et=de-Re;return Ge===0?0:_e===1?et/Ge:(Math.pow(_e,et)-1)/(Math.pow(_e,Ge)-1)}(f,v,h.stops[D][0],h.stops[D+1][0]),W=h.stops[D][1],X=h.stops[D+1][1],re=Zi[u.type]||gd;return typeof W.evaluate=="function"?{evaluate(...de){const _e=W.evaluate.apply(void 0,de),Re=X.evaluate.apply(void 0,de);if(_e!==void 0&&Re!==void 0)return re(_e,Re,U,h.colorSpace)}}:re(W,X,U,h.colorSpace)}function cA(h,u,f){switch(u.type){case"color":f=ui.parse(f);break;case"formatted":f=Rr.fromString(f.toString());break;case"resolvedImage":f=Ws.fromString(f.toString());break;case"padding":f=Yi.parse(f);break;default:ao(f)===u.type||u.type==="enum"&&u.values[f]||(f=void 0)}return eu(f,h.default,u.default)}En.register(Jt,{error:[{kind:"error"},[Rn],(h,[u])=>{throw new yo(u.evaluate(h))}],typeof:[Rn,[ur],(h,[u])=>Ti(Ao(u.evaluate(h)))],"to-rgba":[Do(on,4),[Xr],(h,[u])=>{const[f,v,M,D]=u.evaluate(h).rgb;return[255*f,255*v,255*M,D]}],rgb:[Xr,[on,on,on],ln],rgba:[Xr,[on,on,on,on],ln],has:{type:er,overloads:[[[Rn],(h,[u])=>Fr(u.evaluate(h),h.properties())],[[Rn,Dr],(h,[u,f])=>Fr(u.evaluate(h),f.evaluate(h))]]},get:{type:ur,overloads:[[[Rn],(h,[u])=>Ei(u.evaluate(h),h.properties())],[[Rn,Dr],(h,[u,f])=>Ei(u.evaluate(h),f.evaluate(h))]]},"feature-state":[ur,[Rn],(h,[u])=>Ei(u.evaluate(h),h.featureState||{})],properties:[Dr,[],h=>h.properties()],"geometry-type":[Rn,[],h=>h.geometryType()],id:[ur,[],h=>h.id()],zoom:[on,[],h=>h.globals.zoom],"heatmap-density":[on,[],h=>h.globals.heatmapDensity||0],"line-progress":[on,[],h=>h.globals.lineProgress||0],accumulated:[ur,[],h=>h.globals.accumulated===void 0?null:h.globals.accumulated],"+":[on,ho(on),(h,u)=>{let f=0;for(const v of u)f+=v.evaluate(h);return f}],"*":[on,ho(on),(h,u)=>{let f=1;for(const v of u)f*=v.evaluate(h);return f}],"-":{type:on,overloads:[[[on,on],(h,[u,f])=>u.evaluate(h)-f.evaluate(h)],[[on],(h,[u])=>-u.evaluate(h)]]},"/":[on,[on,on],(h,[u,f])=>u.evaluate(h)/f.evaluate(h)],"%":[on,[on,on],(h,[u,f])=>u.evaluate(h)%f.evaluate(h)],ln2:[on,[],()=>Math.LN2],pi:[on,[],()=>Math.PI],e:[on,[],()=>Math.E],"^":[on,[on,on],(h,[u,f])=>Math.pow(u.evaluate(h),f.evaluate(h))],sqrt:[on,[on],(h,[u])=>Math.sqrt(u.evaluate(h))],log10:[on,[on],(h,[u])=>Math.log(u.evaluate(h))/Math.LN10],ln:[on,[on],(h,[u])=>Math.log(u.evaluate(h))],log2:[on,[on],(h,[u])=>Math.log(u.evaluate(h))/Math.LN2],sin:[on,[on],(h,[u])=>Math.sin(u.evaluate(h))],cos:[on,[on],(h,[u])=>Math.cos(u.evaluate(h))],tan:[on,[on],(h,[u])=>Math.tan(u.evaluate(h))],asin:[on,[on],(h,[u])=>Math.asin(u.evaluate(h))],acos:[on,[on],(h,[u])=>Math.acos(u.evaluate(h))],atan:[on,[on],(h,[u])=>Math.atan(u.evaluate(h))],min:[on,ho(on),(h,u)=>Math.min(...u.map(f=>f.evaluate(h)))],max:[on,ho(on),(h,u)=>Math.max(...u.map(f=>f.evaluate(h)))],abs:[on,[on],(h,[u])=>Math.abs(u.evaluate(h))],round:[on,[on],(h,[u])=>{const f=u.evaluate(h);return f<0?-Math.round(-f):Math.round(f)}],floor:[on,[on],(h,[u])=>Math.floor(u.evaluate(h))],ceil:[on,[on],(h,[u])=>Math.ceil(u.evaluate(h))],"filter-==":[er,[Rn,ur],(h,[u,f])=>h.properties()[u.value]===f.value],"filter-id-==":[er,[ur],(h,[u])=>h.id()===u.value],"filter-type-==":[er,[Rn],(h,[u])=>h.geometryType()===u.value],"filter-<":[er,[Rn,ur],(h,[u,f])=>{const v=h.properties()[u.value],M=f.value;return typeof v==typeof M&&v<M}],"filter-id-<":[er,[ur],(h,[u])=>{const f=h.id(),v=u.value;return typeof f==typeof v&&f<v}],"filter->":[er,[Rn,ur],(h,[u,f])=>{const v=h.properties()[u.value],M=f.value;return typeof v==typeof M&&v>M}],"filter-id->":[er,[ur],(h,[u])=>{const f=h.id(),v=u.value;return typeof f==typeof v&&f>v}],"filter-<=":[er,[Rn,ur],(h,[u,f])=>{const v=h.properties()[u.value],M=f.value;return typeof v==typeof M&&v<=M}],"filter-id-<=":[er,[ur],(h,[u])=>{const f=h.id(),v=u.value;return typeof f==typeof v&&f<=v}],"filter->=":[er,[Rn,ur],(h,[u,f])=>{const v=h.properties()[u.value],M=f.value;return typeof v==typeof M&&v>=M}],"filter-id->=":[er,[ur],(h,[u])=>{const f=h.id(),v=u.value;return typeof f==typeof v&&f>=v}],"filter-has":[er,[ur],(h,[u])=>u.value in h.properties()],"filter-has-id":[er,[],h=>h.id()!==null&&h.id()!==void 0],"filter-type-in":[er,[Do(Rn)],(h,[u])=>u.value.indexOf(h.geometryType())>=0],"filter-id-in":[er,[Do(ur)],(h,[u])=>u.value.indexOf(h.id())>=0],"filter-in-small":[er,[Rn,Do(ur)],(h,[u,f])=>f.value.indexOf(h.properties()[u.value])>=0],"filter-in-large":[er,[Rn,Do(ur)],(h,[u,f])=>function(v,M,D,U){for(;D<=U;){const W=D+U>>1;if(M[W]===v)return!0;M[W]>v?U=W-1:D=W+1}return!1}(h.properties()[u.value],f.value,0,f.value.length-1)],all:{type:er,overloads:[[[er,er],(h,[u,f])=>u.evaluate(h)&&f.evaluate(h)],[ho(er),(h,u)=>{for(const f of u)if(!f.evaluate(h))return!1;return!0}]]},any:{type:er,overloads:[[[er,er],(h,[u,f])=>u.evaluate(h)||f.evaluate(h)],[ho(er),(h,u)=>{for(const f of u)if(f.evaluate(h))return!0;return!1}]]},"!":[er,[er],(h,[u])=>!u.evaluate(h)],"is-supported-script":[er,[Rn],(h,[u])=>{const f=h.globals&&h.globals.isSupportedScript;return!f||f(u.evaluate(h))}],upcase:[Rn,[Rn],(h,[u])=>u.evaluate(h).toUpperCase()],downcase:[Rn,[Rn],(h,[u])=>u.evaluate(h).toLowerCase()],concat:[Rn,ho(ur),(h,u)=>u.map(f=>Bo(f.evaluate(h))).join("")],"resolved-locale":[Rn,[mo],(h,[u])=>u.evaluate(h).resolvedLocale()]});class tu{constructor(u,f){var v;this.expression=u,this._warningHistory={},this._evaluator=new co,this._defaultValue=f?(v=f).type==="color"&&Oo(v.default)?new ui(0,0,0,0):v.type==="color"?ui.parse(v.default)||null:v.type==="padding"?Yi.parse(v.default)||null:v.type==="variableAnchorOffsetCollection"?wo.parse(v.default)||null:v.type==="projectionDefinition"?Gs.parse(v.default)||null:v.default===void 0?null:v.default:null,this._enumValues=f&&f.type==="enum"?f.values:null}evaluateWithoutErrorHandling(u,f,v,M,D,U){return this._evaluator.globals=u,this._evaluator.feature=f,this._evaluator.featureState=v,this._evaluator.canonical=M,this._evaluator.availableImages=D||null,this._evaluator.formattedSection=U,this.expression.evaluate(this._evaluator)}evaluate(u,f,v,M,D,U){this._evaluator.globals=u,this._evaluator.feature=f||null,this._evaluator.featureState=v||null,this._evaluator.canonical=M,this._evaluator.availableImages=D||null,this._evaluator.formattedSection=U||null;try{const W=this.expression.evaluate(this._evaluator);if(W==null||typeof W=="number"&&W!=W)return this._defaultValue;if(this._enumValues&&!(W in this._enumValues))throw new yo(`Expected value to be one of ${Object.keys(this._enumValues).map(X=>JSON.stringify(X)).join(", ")}, but found ${JSON.stringify(W)} instead.`);return W}catch(W){return this._warningHistory[W.message]||(this._warningHistory[W.message]=!0,typeof console<"u"&&console.warn(W.message)),this._defaultValue}}}function qc(h){return Array.isArray(h)&&h.length>0&&typeof h[0]=="string"&&h[0]in Jt}function vd(h,u){const f=new Zl(Jt,na,[],u?function(M){const D={color:Xr,string:Rn,number:on,enum:Rn,boolean:er,formatted:Ma,padding:qi,projectionDefinition:Ur,resolvedImage:vi,variableAnchorOffsetCollection:io};return M.type==="array"?Do(D[M.value]||ur,M.length):D[M.type]}(u):void 0),v=f.parse(h,void 0,void 0,void 0,u&&u.type==="string"?{typeAnnotation:"coerce"}:void 0);return v?Nu(new tu(v,u)):_u(f.errors)}class Wa{constructor(u,f){this.kind=u,this._styleExpression=f,this.isStateDependent=u!=="constant"&&!OA(f.expression)}evaluateWithoutErrorHandling(u,f,v,M,D,U){return this._styleExpression.evaluateWithoutErrorHandling(u,f,v,M,D,U)}evaluate(u,f,v,M,D,U){return this._styleExpression.evaluate(u,f,v,M,D,U)}}class Yc{constructor(u,f,v,M){this.kind=u,this.zoomStops=v,this._styleExpression=f,this.isStateDependent=u!=="camera"&&!OA(f.expression),this.interpolationType=M}evaluateWithoutErrorHandling(u,f,v,M,D,U){return this._styleExpression.evaluateWithoutErrorHandling(u,f,v,M,D,U)}evaluate(u,f,v,M,D,U){return this._styleExpression.evaluate(u,f,v,M,D,U)}interpolationFactor(u,f,v){return this.interpolationType?xr.interpolationFactor(this.interpolationType,u,f,v):0}}function Cd(h,u){const f=vd(h,u);if(f.result==="error")return f;const v=f.value.expression,M=rs(v);if(!M&&!bu(u))return _u([new On("","data expressions not supported")]);const D=df(v,["zoom"]);if(!D&&!Ul(u))return _u([new On("","zoom expressions not supported")]);const U=Bh(v);return U||D?U instanceof On?_u([U]):U instanceof xr&&!Wu(u)?_u([new On("",'"interpolate" expressions cannot be used with this property')]):Nu(U?new Yc(M?"camera":"composite",f.value,U.labels,U instanceof xr?U.interpolation:void 0):new Wa(M?"constant":"source",f.value)):_u([new On("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class nc{constructor(u,f){this._parameters=u,this._specification=f,Tn(this,yd(this._parameters,this._specification))}static deserialize(u){return new nc(u._parameters,u._specification)}static serialize(u){return{_parameters:u._parameters,_specification:u._specification}}}function Bh(h){let u=null;if(h instanceof Ui)u=Bh(h.result);else if(h instanceof Si){for(const f of h.args)if(u=Bh(f),u)break}else(h instanceof $t||h instanceof xr)&&h.input instanceof En&&h.input.name==="zoom"&&(u=h);return u instanceof On||h.eachChild(f=>{const v=Bh(f);v instanceof On?u=v:!u&&v?u=new On("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):u&&v&&u!==v&&(u=new On("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),u}function Gu(h){if(h===!0||h===!1)return!0;if(!Array.isArray(h)||h.length===0)return!1;switch(h[0]){case"has":return h.length>=2&&h[1]!=="$id"&&h[1]!=="$type";case"in":return h.length>=3&&(typeof h[1]!="string"||Array.isArray(h[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return h.length!==3||Array.isArray(h[1])||Array.isArray(h[2]);case"any":case"all":for(const u of h.slice(1))if(!Gu(u)&&typeof u!="boolean")return!1;return!0;default:return!0}}const $c={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function rc(h){if(h==null)return{filter:()=>!0,needGeometry:!1};Gu(h)||(h=Mc(h));const u=vd(h,$c);if(u.result==="error")throw new Error(u.value.map(f=>`${f.key}: ${f.message}`).join(", "));return{filter:(f,v,M)=>u.value.evaluate(f,v,{},M),needGeometry:ds(h)}}function Oh(h,u){return h<u?-1:h>u?1:0}function ds(h){if(!Array.isArray(h))return!1;if(h[0]==="within"||h[0]==="distance")return!0;for(let u=1;u<h.length;u++)if(ds(h[u]))return!0;return!1}function Mc(h){if(!h)return!0;const u=h[0];return h.length<=1?u!=="any":u==="=="?IA(h[1],h[2],"=="):u==="!="?_d(IA(h[1],h[2],"==")):u==="<"||u===">"||u==="<="||u===">="?IA(h[1],h[2],u):u==="any"?(f=h.slice(1),["any"].concat(f.map(Mc))):u==="all"?["all"].concat(h.slice(1).map(Mc)):u==="none"?["all"].concat(h.slice(1).map(Mc).map(_d)):u==="in"?Qu(h[1],h.slice(2)):u==="!in"?_d(Qu(h[1],h.slice(2))):u==="has"?Yd(h[1]):u!=="!has"||_d(Yd(h[1]));var f}function IA(h,u,f){switch(h){case"$type":return[`filter-type-${f}`,u];case"$id":return[`filter-id-${f}`,u];default:return[`filter-${f}`,h,u]}}function Qu(h,u){if(u.length===0)return!1;switch(h){case"$type":return["filter-type-in",["literal",u]];case"$id":return["filter-id-in",["literal",u]];default:return u.length>200&&!u.some(f=>typeof f!=typeof u[0])?["filter-in-large",h,["literal",u.sort(Oh)]]:["filter-in-small",h,["literal",u]]}}function Yd(h){switch(h){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",h]}}function _d(h){return["!",h]}function ic(h){const u=typeof h;if(u==="number"||u==="boolean"||u==="string"||h==null)return JSON.stringify(h);if(Array.isArray(h)){let M="[";for(const D of h)M+=`${ic(D)},`;return`${M}]`}const f=Object.keys(h).sort();let v="{";for(let M=0;M<f.length;M++)v+=`${JSON.stringify(f[M])}:${ic(h[f[M]])},`;return`${v}}`}function Vc(h){let u="";for(const f of se)u+=`/${ic(h[f])}`;return u}function kA(h){const u=h.value;return u?[new xt(h.key,u,"constants have been deprecated as of v8")]:[]}function Bi(h){return h instanceof Number||h instanceof String||h instanceof Boolean?h.valueOf():h}function Ls(h){if(Array.isArray(h))return h.map(Ls);if(h instanceof Object&&!(h instanceof Number||h instanceof String||h instanceof Boolean)){const u={};for(const f in h)u[f]=Ls(h[f]);return u}return Bi(h)}function dA(h){const u=h.key,f=h.value,v=h.valueSpec||{},M=h.objectElementValidators||{},D=h.style,U=h.styleSpec,W=h.validateSpec;let X=[];const re=ao(f);if(re!=="object")return[new xt(u,f,`object expected, ${re} found`)];for(const de in f){const _e=de.split(".")[0],Re=v[_e]||v["*"];let ze;if(M[_e])ze=M[_e];else if(v[_e])ze=W;else if(M["*"])ze=M["*"];else{if(!v["*"]){X.push(new xt(u,f[de],`unknown property "${de}"`));continue}ze=W}X=X.concat(ze({key:(u&&`${u}.`)+de,value:f[de],valueSpec:Re,style:D,styleSpec:U,object:f,objectKey:de,validateSpec:W},f))}for(const de in v)M[de]||v[de].required&&v[de].default===void 0&&f[de]===void 0&&X.push(new xt(u,f,`missing required property "${de}"`));return X}function bd(h){const u=h.value,f=h.valueSpec,v=h.style,M=h.styleSpec,D=h.key,U=h.arrayElementValidator||h.validateSpec;if(ao(u)!=="array")return[new xt(D,u,`array expected, ${ao(u)} found`)];if(f.length&&u.length!==f.length)return[new xt(D,u,`array length ${f.length} expected, length ${u.length} found`)];if(f["min-length"]&&u.length<f["min-length"])return[new xt(D,u,`array length at least ${f["min-length"]} expected, length ${u.length} found`)];let W={type:f.value,values:f.values};M.$version<7&&(W.function=f.function),ao(f.value)==="object"&&(W=f.value);let X=[];for(let re=0;re<u.length;re++)X=X.concat(U({array:u,arrayIndex:re,value:u[re],valueSpec:W,validateSpec:h.validateSpec,style:v,styleSpec:M,key:`${D}[${re}]`}));return X}function Hc(h){const u=h.key,f=h.value,v=h.valueSpec;let M=ao(f);return M==="number"&&f!=f&&(M="NaN"),M!=="number"?[new xt(u,f,`number expected, ${M} found`)]:"minimum"in v&&f<v.minimum?[new xt(u,f,`${f} is less than the minimum value ${v.minimum}`)]:"maximum"in v&&f>v.maximum?[new xt(u,f,`${f} is greater than the maximum value ${v.maximum}`)]:[]}function Sc(h){const u=h.valueSpec,f=Bi(h.value.type);let v,M,D,U={};const W=f!=="categorical"&&h.value.property===void 0,X=!W,re=ao(h.value.stops)==="array"&&ao(h.value.stops[0])==="array"&&ao(h.value.stops[0][0])==="object",de=dA({key:h.key,value:h.value,valueSpec:h.styleSpec.function,validateSpec:h.validateSpec,style:h.style,styleSpec:h.styleSpec,objectElementValidators:{stops:function(ze){if(f==="identity")return[new xt(ze.key,ze.value,'identity function may not have a "stops" property')];let Ge=[];const et=ze.value;return Ge=Ge.concat(bd({key:ze.key,value:et,valueSpec:ze.valueSpec,validateSpec:ze.validateSpec,style:ze.style,styleSpec:ze.styleSpec,arrayElementValidator:_e})),ao(et)==="array"&&et.length===0&&Ge.push(new xt(ze.key,et,"array must have at least one stop")),Ge},default:function(ze){return ze.validateSpec({key:ze.key,value:ze.value,valueSpec:u,validateSpec:ze.validateSpec,style:ze.style,styleSpec:ze.styleSpec})}}});return f==="identity"&&W&&de.push(new xt(h.key,h.value,'missing required property "property"')),f==="identity"||h.value.stops||de.push(new xt(h.key,h.value,'missing required property "stops"')),f==="exponential"&&h.valueSpec.expression&&!Wu(h.valueSpec)&&de.push(new xt(h.key,h.value,"exponential functions not supported")),h.styleSpec.$version>=8&&(X&&!bu(h.valueSpec)?de.push(new xt(h.key,h.value,"property functions not supported")):W&&!Ul(h.valueSpec)&&de.push(new xt(h.key,h.value,"zoom functions not supported"))),f!=="categorical"&&!re||h.value.property!==void 0||de.push(new xt(h.key,h.value,'"property" property is required')),de;function _e(ze){let Ge=[];const et=ze.value,At=ze.key;if(ao(et)!=="array")return[new xt(At,et,`array expected, ${ao(et)} found`)];if(et.length!==2)return[new xt(At,et,`array length 2 expected, length ${et.length} found`)];if(re){if(ao(et[0])!=="object")return[new xt(At,et,`object expected, ${ao(et[0])} found`)];if(et[0].zoom===void 0)return[new xt(At,et,"object stop key must have zoom")];if(et[0].value===void 0)return[new xt(At,et,"object stop key must have value")];if(D&&D>Bi(et[0].zoom))return[new xt(At,et[0].zoom,"stop zoom values must appear in ascending order")];Bi(et[0].zoom)!==D&&(D=Bi(et[0].zoom),M=void 0,U={}),Ge=Ge.concat(dA({key:`${At}[0]`,value:et[0],valueSpec:{zoom:{}},validateSpec:ze.validateSpec,style:ze.style,styleSpec:ze.styleSpec,objectElementValidators:{zoom:Hc,value:Re}}))}else Ge=Ge.concat(Re({key:`${At}[0]`,value:et[0],valueSpec:{},validateSpec:ze.validateSpec,style:ze.style,styleSpec:ze.styleSpec},et));return qc(Ls(et[1]))?Ge.concat([new xt(`${At}[1]`,et[1],"expressions are not allowed in function stops.")]):Ge.concat(ze.validateSpec({key:`${At}[1]`,value:et[1],valueSpec:u,validateSpec:ze.validateSpec,style:ze.style,styleSpec:ze.styleSpec}))}function Re(ze,Ge){const et=ao(ze.value),At=Bi(ze.value),Ct=ze.value!==null?ze.value:Ge;if(v){if(et!==v)return[new xt(ze.key,Ct,`${et} stop domain type must match previous stop domain type ${v}`)]}else v=et;if(et!=="number"&&et!=="string"&&et!=="boolean")return[new xt(ze.key,Ct,"stop domain value must be a number, string, or boolean")];if(et!=="number"&&f!=="categorical"){let Nt=`number expected, ${et} found`;return bu(u)&&f===void 0&&(Nt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new xt(ze.key,Ct,Nt)]}return f!=="categorical"||et!=="number"||isFinite(At)&&Math.floor(At)===At?f!=="categorical"&&et==="number"&&M!==void 0&&At<M?[new xt(ze.key,Ct,"stop domain values must appear in ascending order")]:(M=At,f==="categorical"&&At in U?[new xt(ze.key,Ct,"stop domain values must be unique")]:(U[At]=!0,[])):[new xt(ze.key,Ct,`integer expected, found ${At}`)]}}function TA(h){const u=(h.expressionContext==="property"?Cd:vd)(Ls(h.value),h.valueSpec);if(u.result==="error")return u.value.map(v=>new xt(`${h.key}${v.key}`,h.value,v.message));const f=u.value.expression||u.value._styleExpression.expression;if(h.expressionContext==="property"&&h.propertyKey==="text-font"&&!f.outputDefined())return[new xt(h.key,h.value,`Invalid data expression for "${h.propertyKey}". Output values must be contained as literals within the expression.`)];if(h.expressionContext==="property"&&h.propertyType==="layout"&&!OA(f))return[new xt(h.key,h.value,'"feature-state" data expressions are not supported with layout properties.')];if(h.expressionContext==="filter"&&!OA(f))return[new xt(h.key,h.value,'"feature-state" data expressions are not supported with filters.')];if(h.expressionContext&&h.expressionContext.indexOf("cluster")===0){if(!df(f,["zoom","feature-state"]))return[new xt(h.key,h.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(h.expressionContext==="cluster-initial"&&!rs(f))return[new xt(h.key,h.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function cl(h){const u=h.key,f=h.value,v=h.valueSpec,M=[];return Array.isArray(v.values)?v.values.indexOf(Bi(f))===-1&&M.push(new xt(u,f,`expected one of [${v.values.join(", ")}], ${JSON.stringify(f)} found`)):Object.keys(v.values).indexOf(Bi(f))===-1&&M.push(new xt(u,f,`expected one of [${Object.keys(v.values).join(", ")}], ${JSON.stringify(f)} found`)),M}function hA(h){return Gu(Ls(h.value))?TA(Tn({},h,{expressionContext:"filter",valueSpec:{value:"boolean"}})):dl(h)}function dl(h){const u=h.value,f=h.key;if(ao(u)!=="array")return[new xt(f,u,`array expected, ${ao(u)} found`)];const v=h.styleSpec;let M,D=[];if(u.length<1)return[new xt(f,u,"filter array must have at least 1 element")];switch(D=D.concat(cl({key:`${f}[0]`,value:u[0],valueSpec:v.filter_operator,style:h.style,styleSpec:h.styleSpec})),Bi(u[0])){case"<":case"<=":case">":case">=":u.length>=2&&Bi(u[1])==="$type"&&D.push(new xt(f,u,`"$type" cannot be use with operator "${u[0]}"`));case"==":case"!=":u.length!==3&&D.push(new xt(f,u,`filter array for operator "${u[0]}" must have 3 elements`));case"in":case"!in":u.length>=2&&(M=ao(u[1]),M!=="string"&&D.push(new xt(`${f}[1]`,u[1],`string expected, ${M} found`)));for(let U=2;U<u.length;U++)M=ao(u[U]),Bi(u[1])==="$type"?D=D.concat(cl({key:`${f}[${U}]`,value:u[U],valueSpec:v.geometry_type,style:h.style,styleSpec:h.styleSpec})):M!=="string"&&M!=="number"&&M!=="boolean"&&D.push(new xt(`${f}[${U}]`,u[U],`string, number, or boolean expected, ${M} found`));break;case"any":case"all":case"none":for(let U=1;U<u.length;U++)D=D.concat(dl({key:`${f}[${U}]`,value:u[U],style:h.style,styleSpec:h.styleSpec}));break;case"has":case"!has":M=ao(u[1]),u.length!==2?D.push(new xt(f,u,`filter array for "${u[0]}" operator must have 2 elements`)):M!=="string"&&D.push(new xt(`${f}[1]`,u[1],`string expected, ${M} found`))}return D}function oc(h,u){const f=h.key,v=h.validateSpec,M=h.style,D=h.styleSpec,U=h.value,W=h.objectKey,X=D[`${u}_${h.layerType}`];if(!X)return[];const re=W.match(/^(.*)-transition$/);if(u==="paint"&&re&&X[re[1]]&&X[re[1]].transition)return v({key:f,value:U,valueSpec:D.transition,style:M,styleSpec:D});const de=h.valueSpec||X[W];if(!de)return[new xt(f,U,`unknown property "${W}"`)];let _e;if(ao(U)==="string"&&bu(de)&&!de.tokens&&(_e=/^{([^}]+)}$/.exec(U)))return[new xt(f,U,`"${W}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(_e[1])} }\`.`)];const Re=[];return h.layerType==="symbol"&&(W==="text-field"&&M&&!M.glyphs&&Re.push(new xt(f,U,'use of "text-field" requires a style "glyphs" property')),W==="text-font"&&Oo(Ls(U))&&Bi(U.type)==="identity"&&Re.push(new xt(f,U,'"text-font" does not support identity functions'))),Re.concat(v({key:h.key,value:U,valueSpec:de,style:M,styleSpec:D,expressionContext:"property",propertyType:u,propertyKey:W}))}function qu(h){return oc(h,"paint")}function xd(h){return oc(h,"layout")}function Zc(h){let u=[];const f=h.value,v=h.key,M=h.style,D=h.styleSpec;f.type||f.ref||u.push(new xt(v,f,'either "type" or "ref" is required'));let U=Bi(f.type);const W=Bi(f.ref);if(f.id){const X=Bi(f.id);for(let re=0;re<h.arrayIndex;re++){const de=M.layers[re];Bi(de.id)===X&&u.push(new xt(v,f.id,`duplicate layer id "${f.id}", previously used at line ${de.id.__line__}`))}}if("ref"in f){let X;["type","source","source-layer","filter","layout"].forEach(re=>{re in f&&u.push(new xt(v,f[re],`"${re}" is prohibited for ref layers`))}),M.layers.forEach(re=>{Bi(re.id)===W&&(X=re)}),X?X.ref?u.push(new xt(v,f.ref,"ref cannot reference another ref layer")):U=Bi(X.type):u.push(new xt(v,f.ref,`ref layer "${W}" not found`))}else if(U!=="background")if(f.source){const X=M.sources&&M.sources[f.source],re=X&&Bi(X.type);X?re==="vector"&&U==="raster"?u.push(new xt(v,f.source,`layer "${f.id}" requires a raster source`)):re!=="raster-dem"&&U==="hillshade"?u.push(new xt(v,f.source,`layer "${f.id}" requires a raster-dem source`)):re==="raster"&&U!=="raster"?u.push(new xt(v,f.source,`layer "${f.id}" requires a vector source`)):re!=="vector"||f["source-layer"]?re==="raster-dem"&&U!=="hillshade"?u.push(new xt(v,f.source,"raster-dem source can only be used with layer type 'hillshade'.")):U!=="line"||!f.paint||!f.paint["line-gradient"]||re==="geojson"&&X.lineMetrics||u.push(new xt(v,f,`layer "${f.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):u.push(new xt(v,f,`layer "${f.id}" must specify a "source-layer"`)):u.push(new xt(v,f.source,`source "${f.source}" not found`))}else u.push(new xt(v,f,'missing required property "source"'));return u=u.concat(dA({key:v,value:f,valueSpec:D.layer,style:h.style,styleSpec:h.styleSpec,validateSpec:h.validateSpec,objectElementValidators:{"*":()=>[],type:()=>h.validateSpec({key:`${v}.type`,value:f.type,valueSpec:D.layer.type,style:h.style,styleSpec:h.styleSpec,validateSpec:h.validateSpec,object:f,objectKey:"type"}),filter:hA,layout:X=>dA({layer:f,key:X.key,value:X.value,style:X.style,styleSpec:X.styleSpec,validateSpec:X.validateSpec,objectElementValidators:{"*":re=>xd(Tn({layerType:U},re))}}),paint:X=>dA({layer:f,key:X.key,value:X.value,style:X.style,styleSpec:X.styleSpec,validateSpec:X.validateSpec,objectElementValidators:{"*":re=>qu(Tn({layerType:U},re))}})}})),u}function PA(h){const u=h.value,f=h.key,v=ao(u);return v!=="string"?[new xt(f,u,`string expected, ${v} found`)]:[]}const sc={promoteId:function({key:h,value:u}){if(ao(u)==="string")return PA({key:h,value:u});{const f=[];for(const v in u)f.push(...PA({key:`${h}.${v}`,value:u[v]}));return f}}};function Yu(h){const u=h.value,f=h.key,v=h.styleSpec,M=h.style,D=h.validateSpec;if(!u.type)return[new xt(f,u,'"type" is required')];const U=Bi(u.type);let W;switch(U){case"vector":case"raster":return W=dA({key:f,value:u,valueSpec:v[`source_${U.replace("-","_")}`],style:h.style,styleSpec:v,objectElementValidators:sc,validateSpec:D}),W;case"raster-dem":return W=function(X){var re;const de=(re=X.sourceName)!==null&&re!==void 0?re:"",_e=X.value,Re=X.styleSpec,ze=Re.source_raster_dem,Ge=X.style;let et=[];const At=ao(_e);if(_e===void 0)return et;if(At!=="object")return et.push(new xt("source_raster_dem",_e,`object expected, ${At} found`)),et;const Ct=Bi(_e.encoding)==="custom",Nt=["redFactor","greenFactor","blueFactor","baseShift"],Et=X.value.encoding?`"${X.value.encoding}"`:"Default";for(const Le in _e)!Ct&&Nt.includes(Le)?et.push(new xt(Le,_e[Le],`In "${de}": "${Le}" is only valid when "encoding" is set to "custom". ${Et} encoding found`)):ze[Le]?et=et.concat(X.validateSpec({key:Le,value:_e[Le],valueSpec:ze[Le],validateSpec:X.validateSpec,style:Ge,styleSpec:Re})):et.push(new xt(Le,_e[Le],`unknown property "${Le}"`));return et}({sourceName:f,value:u,style:h.style,styleSpec:v,validateSpec:D}),W;case"geojson":if(W=dA({key:f,value:u,valueSpec:v.source_geojson,style:M,styleSpec:v,validateSpec:D,objectElementValidators:sc}),u.cluster)for(const X in u.clusterProperties){const[re,de]=u.clusterProperties[X],_e=typeof re=="string"?[re,["accumulated"],["get",X]]:re;W.push(...TA({key:`${f}.${X}.map`,value:de,validateSpec:D,expressionContext:"cluster-map"})),W.push(...TA({key:`${f}.${X}.reduce`,value:_e,validateSpec:D,expressionContext:"cluster-reduce"}))}return W;case"video":return dA({key:f,value:u,valueSpec:v.source_video,style:M,validateSpec:D,styleSpec:v});case"image":return dA({key:f,value:u,valueSpec:v.source_image,style:M,validateSpec:D,styleSpec:v});case"canvas":return[new xt(f,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return cl({key:`${f}.type`,value:u.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:M,validateSpec:D,styleSpec:v})}}function $u(h){const u=h.value,f=h.styleSpec,v=f.light,M=h.style;let D=[];const U=ao(u);if(u===void 0)return D;if(U!=="object")return D=D.concat([new xt("light",u,`object expected, ${U} found`)]),D;for(const W in u){const X=W.match(/^(.*)-transition$/);D=D.concat(X&&v[X[1]]&&v[X[1]].transition?h.validateSpec({key:W,value:u[W],valueSpec:f.transition,validateSpec:h.validateSpec,style:M,styleSpec:f}):v[W]?h.validateSpec({key:W,value:u[W],valueSpec:v[W],validateSpec:h.validateSpec,style:M,styleSpec:f}):[new xt(W,u[W],`unknown property "${W}"`)])}return D}function KA(h){const u=h.value,f=h.styleSpec,v=f.sky,M=h.style,D=ao(u);if(u===void 0)return[];if(D!=="object")return[new xt("sky",u,`object expected, ${D} found`)];let U=[];for(const W in u)U=U.concat(v[W]?h.validateSpec({key:W,value:u[W],valueSpec:v[W],style:M,styleSpec:f}):[new xt(W,u[W],`unknown property "${W}"`)]);return U}function Ec(h){const u=h.value,f=h.styleSpec,v=f.terrain,M=h.style;let D=[];const U=ao(u);if(u===void 0)return D;if(U!=="object")return D=D.concat([new xt("terrain",u,`object expected, ${U} found`)]),D;for(const W in u)D=D.concat(v[W]?h.validateSpec({key:W,value:u[W],valueSpec:v[W],validateSpec:h.validateSpec,style:M,styleSpec:f}):[new xt(W,u[W],`unknown property "${W}"`)]);return D}function xu(h){let u=[];const f=h.value,v=h.key;if(Array.isArray(f)){const M=[],D=[];for(const U in f)f[U].id&&M.includes(f[U].id)&&u.push(new xt(v,f,`all the sprites' ids must be unique, but ${f[U].id} is duplicated`)),M.push(f[U].id),f[U].url&&D.includes(f[U].url)&&u.push(new xt(v,f,`all the sprites' URLs must be unique, but ${f[U].url} is duplicated`)),D.push(f[U].url),u=u.concat(dA({key:`${v}[${U}]`,value:f[U],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:h.validateSpec}));return u}return PA({key:v,value:f})}const Ih={"*":()=>[],array:bd,boolean:function(h){const u=h.value,f=h.key,v=ao(u);return v!=="boolean"?[new xt(f,u,`boolean expected, ${v} found`)]:[]},number:Hc,color:function(h){const u=h.key,f=h.value,v=ao(f);return v!=="string"?[new xt(u,f,`color expected, ${v} found`)]:ui.parse(String(f))?[]:[new xt(u,f,`color expected, "${f}" found`)]},constants:kA,enum:cl,filter:hA,function:Sc,layer:Zc,object:dA,source:Yu,light:$u,sky:KA,terrain:Ec,projection:function(h){const u=h.value,f=h.styleSpec,v=f.projection,M=h.style,D=ao(u);if(u===void 0)return[];if(D!=="object")return[new xt("projection",u,`object expected, ${D} found`)];let U=[];for(const W in u)U=U.concat(v[W]?h.validateSpec({key:W,value:u[W],valueSpec:v[W],style:M,styleSpec:f}):[new xt(W,u[W],`unknown property "${W}"`)]);return U},projectionDefinition:function(h){const u=h.key;let f=h.value;f=f instanceof String?f.valueOf():f;const v=ao(f);return v!=="array"||function(M){return Array.isArray(M)&&M.length===3&&typeof M[0]=="string"&&typeof M[1]=="string"&&typeof M[2]=="number"}(f)||function(M){return!!["interpolate","step","literal"].includes(M[0])}(f)?["array","string"].includes(v)?[]:[new xt(u,f,`projection expected, invalid type "${v}" found`)]:[new xt(u,f,`projection expected, invalid array ${JSON.stringify(f)} found`)]},string:PA,formatted:function(h){return PA(h).length===0?[]:TA(h)},resolvedImage:function(h){return PA(h).length===0?[]:TA(h)},padding:function(h){const u=h.key,f=h.value;if(ao(f)==="array"){if(f.length<1||f.length>4)return[new xt(u,f,`padding requires 1 to 4 values; ${f.length} values found`)];const v={type:"number"};let M=[];for(let D=0;D<f.length;D++)M=M.concat(h.validateSpec({key:`${u}[${D}]`,value:f[D],validateSpec:h.validateSpec,valueSpec:v}));return M}return Hc({key:u,value:f,valueSpec:{}})},variableAnchorOffsetCollection:function(h){const u=h.key,f=h.value,v=ao(f),M=h.styleSpec;if(v!=="array"||f.length<1||f.length%2!=0)return[new xt(u,f,"variableAnchorOffsetCollection requires a non-empty array of even length")];let D=[];for(let U=0;U<f.length;U+=2)D=D.concat(cl({key:`${u}[${U}]`,value:f[U],valueSpec:M.layout_symbol["text-anchor"]})),D=D.concat(bd({key:`${u}[${U+1}]`,value:f[U+1],valueSpec:{length:2,value:"number"},validateSpec:h.validateSpec,style:h.style,styleSpec:M}));return D},sprite:xu};function ot(h){const u=h.value,f=h.valueSpec,v=h.styleSpec;return h.validateSpec=ot,f.expression&&Oo(Bi(u))?Sc(h):f.expression&&qc(Ls(u))?TA(h):f.type&&Ih[f.type]?Ih[f.type](h):dA(Tn({},h,{valueSpec:f.type?v[f.type]:f}))}function DA(h){const u=h.value,f=h.key,v=PA(h);return v.length||(u.indexOf("{fontstack}")===-1&&v.push(new xt(f,u,'"glyphs" url must include a "{fontstack}" token')),u.indexOf("{range}")===-1&&v.push(new xt(f,u,'"glyphs" url must include a "{range}" token'))),v}function Io(h,u=Oe){let f=[];return f=f.concat(ot({key:"",value:h,valueSpec:u.$root,styleSpec:u,style:h,validateSpec:ot,objectElementValidators:{glyphs:DA,"*":()=>[]}})),h.constants&&(f=f.concat(kA({key:"constants",value:h.constants,style:h,styleSpec:u,validateSpec:ot}))),ii(f)}function pi(h){return function(u){return h({...u,validateSpec:ot})}}function ii(h){return[].concat(h).sort((u,f)=>u.line-f.line)}function is(h){return function(...u){return ii(h.apply(this,u))}}Io.source=is(pi(Yu)),Io.sprite=is(pi(xu)),Io.glyphs=is(pi(DA)),Io.light=is(pi($u)),Io.sky=is(pi(KA)),Io.terrain=is(pi(Ec)),Io.layer=is(pi(Zc)),Io.filter=is(pi(hA)),Io.paintProperty=is(pi(qu)),Io.layoutProperty=is(pi(xd));const fA=Io,$d=fA.light,Ia=fA.sky,Us=fA.paintProperty,Ss=fA.layoutProperty;function Bc(h,u){let f=!1;if(u&&u.length)for(const v of u)h.fire(new sn(new Error(v.message))),f=!0;return f}class ra{constructor(u,f,v){const M=this.cells=[];if(u instanceof ArrayBuffer){this.arrayBuffer=u;const U=new Int32Array(this.arrayBuffer);u=U[0],this.d=(f=U[1])+2*(v=U[2]);for(let X=0;X<this.d*this.d;X++){const re=U[3+X],de=U[3+X+1];M.push(re===de?null:U.subarray(re,de))}const W=U[3+M.length+1];this.keys=U.subarray(U[3+M.length],W),this.bboxes=U.subarray(W),this.insert=this._insertReadonly}else{this.d=f+2*v;for(let U=0;U<this.d*this.d;U++)M.push([]);this.keys=[],this.bboxes=[]}this.n=f,this.extent=u,this.padding=v,this.scale=f/u,this.uid=0;const D=v/f*u;this.min=-D,this.max=u+D}insert(u,f,v,M,D){this._forEachCell(f,v,M,D,this._insertCell,this.uid++,void 0,void 0),this.keys.push(u),this.bboxes.push(f),this.bboxes.push(v),this.bboxes.push(M),this.bboxes.push(D)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(u,f,v,M,D,U){this.cells[D].push(U)}query(u,f,v,M,D){const U=this.min,W=this.max;if(u<=U&&f<=U&&W<=v&&W<=M&&!D)return Array.prototype.slice.call(this.keys);{const X=[];return this._forEachCell(u,f,v,M,this._queryCell,X,{},D),X}}_queryCell(u,f,v,M,D,U,W,X){const re=this.cells[D];if(re!==null){const de=this.keys,_e=this.bboxes;for(let Re=0;Re<re.length;Re++){const ze=re[Re];if(W[ze]===void 0){const Ge=4*ze;(X?X(_e[Ge+0],_e[Ge+1],_e[Ge+2],_e[Ge+3]):u<=_e[Ge+2]&&f<=_e[Ge+3]&&v>=_e[Ge+0]&&M>=_e[Ge+1])?(W[ze]=!0,U.push(de[ze])):W[ze]=!1}}}}_forEachCell(u,f,v,M,D,U,W,X){const re=this._convertToCellCoord(u),de=this._convertToCellCoord(f),_e=this._convertToCellCoord(v),Re=this._convertToCellCoord(M);for(let ze=re;ze<=_e;ze++)for(let Ge=de;Ge<=Re;Ge++){const et=this.d*Ge+ze;if((!X||X(this._convertFromCellCoord(ze),this._convertFromCellCoord(Ge),this._convertFromCellCoord(ze+1),this._convertFromCellCoord(Ge+1)))&&D.call(this,u,f,v,M,et,U,W,X))return}}_convertFromCellCoord(u){return(u-this.padding)/this.scale}_convertToCellCoord(u){return Math.max(0,Math.min(this.d-1,Math.floor(u*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const u=this.cells,f=3+this.cells.length+1+1;let v=0;for(let U=0;U<this.cells.length;U++)v+=this.cells[U].length;const M=new Int32Array(f+v+this.keys.length+this.bboxes.length);M[0]=this.extent,M[1]=this.n,M[2]=this.padding;let D=f;for(let U=0;U<u.length;U++){const W=u[U];M[3+U]=D,M.set(W,D),D+=W.length}return M[3+u.length]=D,M.set(this.keys,D),D+=this.keys.length,M[3+u.length+1]=D,M.set(this.bboxes,D),D+=this.bboxes.length,M.buffer}static serialize(u,f){const v=u.toArrayBuffer();return f&&f.push(v),{buffer:v}}static deserialize(u){return new ra(u.buffer)}}const ua={};function hr(h,u,f={}){if(ua[h])throw new Error(`${h} is already registered.`);Object.defineProperty(u,"_classRegistryKey",{value:h,writeable:!1}),ua[h]={klass:u,omit:f.omit||[],shallow:f.shallow||[]}}hr("Object",Object),hr("TransferableGridIndex",ra),hr("Color",ui),hr("Error",Error),hr("AJAXError",Jn),hr("ResolvedImage",Ws),hr("StylePropertyFunction",nc),hr("StyleExpression",tu,{omit:["_evaluator"]}),hr("ZoomDependentExpression",Yc),hr("ZoomConstantExpression",Wa),hr("CompoundExpression",En,{omit:["_evaluate"]});for(const h in Jt)Jt[h]._classRegistryKey||hr(`Expression_${h}`,Jt[h]);function wd(h){return h&&typeof ArrayBuffer<"u"&&(h instanceof ArrayBuffer||h.constructor&&h.constructor.name==="ArrayBuffer")}function ga(h){return h.$name||h.constructor._classRegistryKey}function Md(h){return!function(u){if(u===null||typeof u!="object")return!1;const f=ga(u);return!(!f||f==="Object")}(h)&&(h==null||typeof h=="boolean"||typeof h=="number"||typeof h=="string"||h instanceof Boolean||h instanceof Number||h instanceof String||h instanceof Date||h instanceof RegExp||h instanceof Blob||h instanceof Error||wd(h)||rn(h)||ArrayBuffer.isView(h)||h instanceof ImageData)}function Sd(h,u){if(Md(h))return(wd(h)||rn(h))&&u&&u.push(h),ArrayBuffer.isView(h)&&u&&u.push(h.buffer),h instanceof ImageData&&u&&u.push(h.data.buffer),h;if(Array.isArray(h)){const D=[];for(const U of h)D.push(Sd(U,u));return D}if(typeof h!="object")throw new Error("can't serialize object of type "+typeof h);const f=ga(h);if(!f)throw new Error(`can't serialize object of unregistered class ${h.constructor.name}`);if(!ua[f])throw new Error(`${f} is not registered.`);const{klass:v}=ua[f],M=v.serialize?v.serialize(h,u):{};if(v.serialize){if(u&&M===u[u.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const D in h){if(!h.hasOwnProperty(D)||ua[f].omit.indexOf(D)>=0)continue;const U=h[D];M[D]=ua[f].shallow.indexOf(D)>=0?U:Sd(U,u)}h instanceof Error&&(M.message=h.message)}if(M.$name)throw new Error("$name property is reserved for worker serialization logic.");return f!=="Object"&&(M.$name=f),M}function ac(h){if(Md(h))return h;if(Array.isArray(h))return h.map(ac);if(typeof h!="object")throw new Error("can't deserialize object of type "+typeof h);const u=ga(h)||"Object";if(!ua[u])throw new Error(`can't deserialize unregistered class ${u}`);const{klass:f}=ua[u];if(!f)throw new Error(`can't deserialize unregistered class ${u}`);if(f.deserialize)return f.deserialize(h);const v=Object.create(f.prototype);for(const M of Object.keys(h)){if(M==="$name")continue;const D=h[M];v[M]=ua[u].shallow.indexOf(M)>=0?D:ac(D)}return v}class nu{constructor(){this.first=!0}update(u,f){const v=Math.floor(u);return this.first?(this.first=!1,this.lastIntegerZoom=v,this.lastIntegerZoomTime=0,this.lastZoom=u,this.lastFloorZoom=v,!0):(this.lastFloorZoom>v?(this.lastIntegerZoom=v+1,this.lastIntegerZoomTime=f):this.lastFloorZoom<v&&(this.lastIntegerZoom=v,this.lastIntegerZoomTime=f),u!==this.lastZoom&&(this.lastZoom=u,this.lastFloorZoom=v,!0))}}const Xi={"Latin-1 Supplement":h=>h>=128&&h<=255,"Hangul Jamo":h=>h>=4352&&h<=4607,Khmer:h=>h>=6016&&h<=6143,"General Punctuation":h=>h>=8192&&h<=8303,"Letterlike Symbols":h=>h>=8448&&h<=8527,"Number Forms":h=>h>=8528&&h<=8591,"Miscellaneous Technical":h=>h>=8960&&h<=9215,"Control Pictures":h=>h>=9216&&h<=9279,"Optical Character Recognition":h=>h>=9280&&h<=9311,"Enclosed Alphanumerics":h=>h>=9312&&h<=9471,"Geometric Shapes":h=>h>=9632&&h<=9727,"Miscellaneous Symbols":h=>h>=9728&&h<=9983,"Miscellaneous Symbols and Arrows":h=>h>=11008&&h<=11263,"Ideographic Description Characters":h=>h>=12272&&h<=12287,"CJK Symbols and Punctuation":h=>h>=12288&&h<=12351,Katakana:h=>h>=12448&&h<=12543,Kanbun:h=>h>=12688&&h<=12703,"CJK Strokes":h=>h>=12736&&h<=12783,"Enclosed CJK Letters and Months":h=>h>=12800&&h<=13055,"CJK Compatibility":h=>h>=13056&&h<=13311,"Yijing Hexagram Symbols":h=>h>=19904&&h<=19967,"Private Use Area":h=>h>=57344&&h<=63743,"Vertical Forms":h=>h>=65040&&h<=65055,"CJK Compatibility Forms":h=>h>=65072&&h<=65103,"Small Form Variants":h=>h>=65104&&h<=65135,"Halfwidth and Fullwidth Forms":h=>h>=65280&&h<=65519};function hl(h){for(const u of h)if(lc(u.charCodeAt(0)))return!0;return!1}function kh(h){for(const u of h)if(!Ic(u.charCodeAt(0)))return!1;return!0}function Oc(h){const u=h.map(f=>{try{return new RegExp(`\\p{sc=${f}}`,"u").source}catch{return null}}).filter(f=>f);return new RegExp(u.join("|"),"u")}const RA=Oc(["Arab","Dupl","Mong","Ougr","Syrc"]);function Ic(h){return!RA.test(String.fromCodePoint(h))}const FA=Oc(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function lc(h){return!(h!==746&&h!==747&&(h<4352||!(Xi["CJK Compatibility Forms"](h)&&!(h>=65097&&h<=65103)||Xi["CJK Compatibility"](h)||Xi["CJK Strokes"](h)||!(!Xi["CJK Symbols and Punctuation"](h)||h>=12296&&h<=12305||h>=12308&&h<=12319||h===12336)||Xi["Enclosed CJK Letters and Months"](h)||Xi["Ideographic Description Characters"](h)||Xi.Kanbun(h)||Xi.Katakana(h)&&h!==12540||!(!Xi["Halfwidth and Fullwidth Forms"](h)||h===65288||h===65289||h===65293||h>=65306&&h<=65310||h===65339||h===65341||h===65343||h>=65371&&h<=65503||h===65507||h>=65512&&h<=65519)||!(!Xi["Small Form Variants"](h)||h>=65112&&h<=65118||h>=65123&&h<=65126)||Xi["Vertical Forms"](h)||Xi["Yijing Hexagram Symbols"](h)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(h))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(h))||FA.test(String.fromCodePoint(h)))))}function _s(h){return!(lc(h)||function(u){return!!(Xi["Latin-1 Supplement"](u)&&(u===167||u===169||u===174||u===177||u===188||u===189||u===190||u===215||u===247)||Xi["General Punctuation"](u)&&(u===8214||u===8224||u===8225||u===8240||u===8241||u===8251||u===8252||u===8258||u===8263||u===8264||u===8265||u===8273)||Xi["Letterlike Symbols"](u)||Xi["Number Forms"](u)||Xi["Miscellaneous Technical"](u)&&(u>=8960&&u<=8967||u>=8972&&u<=8991||u>=8996&&u<=9e3||u===9003||u>=9085&&u<=9114||u>=9150&&u<=9165||u===9167||u>=9169&&u<=9179||u>=9186&&u<=9215)||Xi["Control Pictures"](u)&&u!==9251||Xi["Optical Character Recognition"](u)||Xi["Enclosed Alphanumerics"](u)||Xi["Geometric Shapes"](u)||Xi["Miscellaneous Symbols"](u)&&!(u>=9754&&u<=9759)||Xi["Miscellaneous Symbols and Arrows"](u)&&(u>=11026&&u<=11055||u>=11088&&u<=11097||u>=11192&&u<=11243)||Xi["CJK Symbols and Punctuation"](u)||Xi.Katakana(u)||Xi["Private Use Area"](u)||Xi["CJK Compatibility Forms"](u)||Xi["Small Form Variants"](u)||Xi["Halfwidth and Fullwidth Forms"](u)||u===8734||u===8756||u===8757||u>=9984&&u<=10087||u>=10102&&u<=10131||u===65532||u===65533)}(h))}const Ro=Oc(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function ru(h){return Ro.test(String.fromCodePoint(h))}function Ga(h,u){return!(!u&&ru(h)||h>=2304&&h<=3583||h>=3840&&h<=4255||Xi.Khmer(h))}function Qa(h){for(const u of h)if(ru(u.charCodeAt(0)))return!0;return!1}const jl=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(h){this.pluginStatus=h.pluginStatus,this.pluginURL=h.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(h){if(jl.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=h.applyArabicShaping,this.processBidirectionalText=h.processBidirectionalText,this.processStyledBidirectionalText=h.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(h,u){return o(this,void 0,void 0,function*(){if(this.isParsed())return this.getState();if(h.pluginStatus!=="loading")return this.setState(h),h;const f=h.pluginURL,v=new Promise(D=>{this.loadScriptResolve=D});u(f);const M=new Promise(D=>setTimeout(()=>D(),this.TIMEOUT));if(yield Promise.race([v,M]),this.isParsed()){const D={pluginStatus:"loaded",pluginURL:f};return this.setState(D),D}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${f}`)})}};class Fo{constructor(u,f){this.zoom=u,f?(this.now=f.now,this.fadeDuration=f.fadeDuration,this.zoomHistory=f.zoomHistory,this.transition=f.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new nu,this.transition={})}isSupportedScript(u){return function(f,v){for(const M of f)if(!Ga(M.charCodeAt(0),v))return!1;return!0}(u,jl.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const u=this.zoom,f=u-Math.floor(u),v=this.crossFadingFactor();return u>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:f+(1-f)*v}:{fromScale:.5,toScale:1,t:1-(1-v)*f}}}class wu{constructor(u,f){this.property=u,this.value=f,this.expression=function(v,M){if(Oo(v))return new nc(v,M);if(qc(v)){const D=Cd(v,M);if(D.result==="error")throw new Error(D.value.map(U=>`${U.key}: ${U.message}`).join(", "));return D.value}{let D=v;return M.type==="color"&&typeof v=="string"?D=ui.parse(v):M.type!=="padding"||typeof v!="number"&&!Array.isArray(v)?M.type==="variableAnchorOffsetCollection"&&Array.isArray(v)?D=wo.parse(v):M.type==="projectionDefinition"&&typeof v=="string"&&(D=Gs.parse(v)):D=Yi.parse(v),{kind:"constant",evaluate:()=>D}}}(f===void 0?u.specification.default:f,u.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(u,f,v){return this.property.possiblyEvaluate(this,u,f,v)}}class uc{constructor(u){this.property=u,this.value=new wu(u,void 0)}transitioned(u,f){return new LA(this.property,this.value,f,gt({},u.transition,this.transition),u.now)}untransitioned(){return new LA(this.property,this.value,null,{},0)}}class Vd{constructor(u){this._properties=u,this._values=Object.create(u.defaultTransitionablePropertyValues)}getValue(u){return Pe(this._values[u].value.value)}setValue(u,f){Object.prototype.hasOwnProperty.call(this._values,u)||(this._values[u]=new uc(this._values[u].property)),this._values[u].value=new wu(this._values[u].property,f===null?void 0:Pe(f))}getTransition(u){return Pe(this._values[u].transition)}setTransition(u,f){Object.prototype.hasOwnProperty.call(this._values,u)||(this._values[u]=new uc(this._values[u].property)),this._values[u].transition=Pe(f)||void 0}serialize(){const u={};for(const f of Object.keys(this._values)){const v=this.getValue(f);v!==void 0&&(u[f]=v);const M=this.getTransition(f);M!==void 0&&(u[`${f}-transition`]=M)}return u}transitioned(u,f){const v=new Ac(this._properties);for(const M of Object.keys(this._values))v._values[M]=this._values[M].transitioned(u,f._values[M]);return v}untransitioned(){const u=new Ac(this._properties);for(const f of Object.keys(this._values))u._values[f]=this._values[f].untransitioned();return u}}class LA{constructor(u,f,v,M,D){this.property=u,this.value=f,this.begin=D+M.delay||0,this.end=this.begin+M.duration||0,u.specification.transition&&(M.delay||M.duration)&&(this.prior=v)}possiblyEvaluate(u,f,v){const M=u.now||0,D=this.value.possiblyEvaluate(u,f,v),U=this.prior;if(U){if(M>this.end)return this.prior=null,D;if(this.value.isDataDriven())return this.prior=null,D;if(M<this.begin)return U.possiblyEvaluate(u,f,v);{const W=(M-this.begin)/(this.end-this.begin);return this.property.interpolate(U.possiblyEvaluate(u,f,v),D,Me(W))}}return D}}class Ac{constructor(u){this._properties=u,this._values=Object.create(u.defaultTransitioningPropertyValues)}possiblyEvaluate(u,f,v){const M=new hs(this._properties);for(const D of Object.keys(this._values))M._values[D]=this._values[D].possiblyEvaluate(u,f,v);return M}hasTransition(){for(const u of Object.keys(this._values))if(this._values[u].prior)return!0;return!1}}class ka{constructor(u){this._properties=u,this._values=Object.create(u.defaultPropertyValues)}hasValue(u){return this._values[u].value!==void 0}getValue(u){return Pe(this._values[u].value)}setValue(u,f){this._values[u]=new wu(this._values[u].property,f===null?void 0:Pe(f))}serialize(){const u={};for(const f of Object.keys(this._values)){const v=this.getValue(f);v!==void 0&&(u[f]=v)}return u}possiblyEvaluate(u,f,v){const M=new hs(this._properties);for(const D of Object.keys(this._values))M._values[D]=this._values[D].possiblyEvaluate(u,f,v);return M}}class bs{constructor(u,f,v){this.property=u,this.value=f,this.parameters=v}isConstant(){return this.value.kind==="constant"}constantOr(u){return this.value.kind==="constant"?this.value.value:u}evaluate(u,f,v,M){return this.property.evaluate(this.value,this.parameters,u,f,v,M)}}class hs{constructor(u){this._properties=u,this._values=Object.create(u.defaultPossiblyEvaluatedValues)}get(u){return this._values[u]}}class Pr{constructor(u){this.specification=u}possiblyEvaluate(u,f){if(u.isDataDriven())throw new Error("Value should not be data driven");return u.expression.evaluate(f)}interpolate(u,f,v){const M=Zi[this.specification.type];return M?M(u,f,v):u}}class Hr{constructor(u,f){this.specification=u,this.overrides=f}possiblyEvaluate(u,f,v,M){return new bs(this,u.expression.kind==="constant"||u.expression.kind==="camera"?{kind:"constant",value:u.expression.evaluate(f,null,{},v,M)}:u.expression,f)}interpolate(u,f,v){if(u.value.kind!=="constant"||f.value.kind!=="constant")return u;if(u.value.value===void 0||f.value.value===void 0)return new bs(this,{kind:"constant",value:void 0},u.parameters);const M=Zi[this.specification.type];if(M){const D=M(u.value.value,f.value.value,v);return new bs(this,{kind:"constant",value:D},u.parameters)}return u}evaluate(u,f,v,M,D,U){return u.kind==="constant"?u.value:u.evaluate(f,v,M,D,U)}}class UA extends Hr{possiblyEvaluate(u,f,v,M){if(u.value===void 0)return new bs(this,{kind:"constant",value:void 0},f);if(u.expression.kind==="constant"){const D=u.expression.evaluate(f,null,{},v,M),U=u.property.specification.type==="resolvedImage"&&typeof D!="string"?D.name:D,W=this._calculate(U,U,U,f);return new bs(this,{kind:"constant",value:W},f)}if(u.expression.kind==="camera"){const D=this._calculate(u.expression.evaluate({zoom:f.zoom-1}),u.expression.evaluate({zoom:f.zoom}),u.expression.evaluate({zoom:f.zoom+1}),f);return new bs(this,{kind:"constant",value:D},f)}return new bs(this,u.expression,f)}evaluate(u,f,v,M,D,U){if(u.kind==="source"){const W=u.evaluate(f,v,M,D,U);return this._calculate(W,W,W,f)}return u.kind==="composite"?this._calculate(u.evaluate({zoom:Math.floor(f.zoom)-1},v,M),u.evaluate({zoom:Math.floor(f.zoom)},v,M),u.evaluate({zoom:Math.floor(f.zoom)+1},v,M),f):u.value}_calculate(u,f,v,M){return M.zoom>M.zoomHistory.lastIntegerZoom?{from:u,to:f}:{from:v,to:f}}interpolate(u){return u}}class Mu{constructor(u){this.specification=u}possiblyEvaluate(u,f,v,M){if(u.value!==void 0){if(u.expression.kind==="constant"){const D=u.expression.evaluate(f,null,{},v,M);return this._calculate(D,D,D,f)}return this._calculate(u.expression.evaluate(new Fo(Math.floor(f.zoom-1),f)),u.expression.evaluate(new Fo(Math.floor(f.zoom),f)),u.expression.evaluate(new Fo(Math.floor(f.zoom+1),f)),f)}}_calculate(u,f,v,M){return M.zoom>M.zoomHistory.lastIntegerZoom?{from:u,to:f}:{from:v,to:f}}interpolate(u){return u}}class fl{constructor(u){this.specification=u}possiblyEvaluate(u,f,v,M){return!!u.expression.evaluate(f,null,{},v,M)}interpolate(){return!1}}class iu{constructor(u){this.properties=u,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const f in u){const v=u[f];v.specification.overridable&&this.overridableProperties.push(f);const M=this.defaultPropertyValues[f]=new wu(v,void 0),D=this.defaultTransitionablePropertyValues[f]=new uc(v);this.defaultTransitioningPropertyValues[f]=D.untransitioned(),this.defaultPossiblyEvaluatedValues[f]=M.possiblyEvaluate({})}}}hr("DataDrivenProperty",Hr),hr("DataConstantProperty",Pr),hr("CrossFadedDataDrivenProperty",UA),hr("CrossFadedProperty",Mu),hr("ColorRampProperty",fl);const Ed="-transition";class pA extends tr{constructor(u,f){if(super(),this.id=u.id,this.type=u.type,this._featureFilter={filter:()=>!0,needGeometry:!1},u.type!=="custom"&&(this.metadata=u.metadata,this.minzoom=u.minzoom,this.maxzoom=u.maxzoom,u.type!=="background"&&(this.source=u.source,this.sourceLayer=u["source-layer"],this.filter=u.filter),f.layout&&(this._unevaluatedLayout=new ka(f.layout)),f.paint)){this._transitionablePaint=new Vd(f.paint);for(const v in u.paint)this.setPaintProperty(v,u.paint[v],{validate:!1});for(const v in u.layout)this.setLayoutProperty(v,u.layout[v],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new hs(f.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(u){return u==="visibility"?this.visibility:this._unevaluatedLayout.getValue(u)}setLayoutProperty(u,f,v={}){f!=null&&this._validate(Ss,`layers.${this.id}.layout.${u}`,u,f,v)||(u!=="visibility"?this._unevaluatedLayout.setValue(u,f):this.visibility=f)}getPaintProperty(u){return u.endsWith(Ed)?this._transitionablePaint.getTransition(u.slice(0,-11)):this._transitionablePaint.getValue(u)}setPaintProperty(u,f,v={}){if(f!=null&&this._validate(Us,`layers.${this.id}.paint.${u}`,u,f,v))return!1;if(u.endsWith(Ed))return this._transitionablePaint.setTransition(u.slice(0,-11),f||void 0),!1;{const M=this._transitionablePaint._values[u],D=M.property.specification["property-type"]==="cross-faded-data-driven",U=M.value.isDataDriven(),W=M.value;this._transitionablePaint.setValue(u,f),this._handleSpecialPaintPropertyUpdate(u);const X=this._transitionablePaint._values[u].value;return X.isDataDriven()||U||D||this._handleOverridablePaintPropertyUpdate(u,W,X)}}_handleSpecialPaintPropertyUpdate(u){}_handleOverridablePaintPropertyUpdate(u,f,v){return!1}isHidden(u){return!!(this.minzoom&&u<this.minzoom)||!!(this.maxzoom&&u>=this.maxzoom)||this.visibility==="none"}updateTransitions(u){this._transitioningPaint=this._transitionablePaint.transitioned(u,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(u,f){u.getCrossfadeParameters&&(this._crossfadeParameters=u.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(u,void 0,f)),this.paint=this._transitioningPaint.possiblyEvaluate(u,void 0,f)}serialize(){const u={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(u.layout=u.layout||{},u.layout.visibility=this.visibility),Ue(u,(f,v)=>!(f===void 0||v==="layout"&&!Object.keys(f).length||v==="paint"&&!Object.keys(f).length))}_validate(u,f,v,M,D={}){return(!D||D.validate!==!1)&&Bc(this,u.call(fA,{key:f,layerType:this.type,objectKey:v,value:M,styleSpec:Oe,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const u in this.paint._values){const f=this.paint.get(u);if(f instanceof bs&&bu(f.property.specification)&&(f.value.kind==="source"||f.value.kind==="composite")&&f.value.isStateDependent)return!0}return!1}}const cc={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class wl{constructor(u,f){this._structArray=u,this._pos1=f*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class gs{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(u,f){return u._trim(),f&&(u.isTransferred=!0,f.push(u.arrayBuffer)),{length:u.length,arrayBuffer:u.arrayBuffer}}static deserialize(u){const f=Object.create(this.prototype);return f.arrayBuffer=u.arrayBuffer,f.length=u.length,f.capacity=u.arrayBuffer.byteLength/f.bytesPerElement,f._refreshViews(),f}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(u){this.reserve(u),this.length=u}reserve(u){if(u>this.capacity){this.capacity=Math.max(u,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const f=this.uint8;this._refreshViews(),f&&this.uint8.set(f)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function qs(h,u=1){let f=0,v=0;return{members:h.map(M=>{const D=cc[M.type].BYTES_PER_ELEMENT,U=f=Xc(f,Math.max(u,D)),W=M.components||1;return v=Math.max(v,D),f+=D*W,{name:M.name,type:M.type,components:W,offset:U}}),size:Xc(f,Math.max(v,u)),alignment:u}}function Xc(h,u){return Math.ceil(h/u)*u}class Bd extends gs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,f){const v=this.length;return this.resize(v+1),this.emplace(v,u,f)}emplace(u,f,v){const M=2*u;return this.int16[M+0]=f,this.int16[M+1]=v,u}}Bd.prototype.bytesPerElement=4,hr("StructArrayLayout2i4",Bd);class mA extends gs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,f,v){const M=this.length;return this.resize(M+1),this.emplace(M,u,f,v)}emplace(u,f,v,M){const D=3*u;return this.int16[D+0]=f,this.int16[D+1]=v,this.int16[D+2]=M,u}}mA.prototype.bytesPerElement=6,hr("StructArrayLayout3i6",mA);class zs extends gs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,f,v,M){const D=this.length;return this.resize(D+1),this.emplace(D,u,f,v,M)}emplace(u,f,v,M,D){const U=4*u;return this.int16[U+0]=f,this.int16[U+1]=v,this.int16[U+2]=M,this.int16[U+3]=D,u}}zs.prototype.bytesPerElement=8,hr("StructArrayLayout4i8",zs);class kc extends gs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,f,v,M,D,U){const W=this.length;return this.resize(W+1),this.emplace(W,u,f,v,M,D,U)}emplace(u,f,v,M,D,U,W){const X=6*u;return this.int16[X+0]=f,this.int16[X+1]=v,this.int16[X+2]=M,this.int16[X+3]=D,this.int16[X+4]=U,this.int16[X+5]=W,u}}kc.prototype.bytesPerElement=12,hr("StructArrayLayout2i4i12",kc);class Su extends gs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,f,v,M,D,U){const W=this.length;return this.resize(W+1),this.emplace(W,u,f,v,M,D,U)}emplace(u,f,v,M,D,U,W){const X=4*u,re=8*u;return this.int16[X+0]=f,this.int16[X+1]=v,this.uint8[re+4]=M,this.uint8[re+5]=D,this.uint8[re+6]=U,this.uint8[re+7]=W,u}}Su.prototype.bytesPerElement=8,hr("StructArrayLayout2i4ub8",Su);class qa extends gs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,f){const v=this.length;return this.resize(v+1),this.emplace(v,u,f)}emplace(u,f,v){const M=2*u;return this.float32[M+0]=f,this.float32[M+1]=v,u}}qa.prototype.bytesPerElement=8,hr("StructArrayLayout2f8",qa);class Vu extends gs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,f,v,M,D,U,W,X,re,de){const _e=this.length;return this.resize(_e+1),this.emplace(_e,u,f,v,M,D,U,W,X,re,de)}emplace(u,f,v,M,D,U,W,X,re,de,_e){const Re=10*u;return this.uint16[Re+0]=f,this.uint16[Re+1]=v,this.uint16[Re+2]=M,this.uint16[Re+3]=D,this.uint16[Re+4]=U,this.uint16[Re+5]=W,this.uint16[Re+6]=X,this.uint16[Re+7]=re,this.uint16[Re+8]=de,this.uint16[Re+9]=_e,u}}Vu.prototype.bytesPerElement=20,hr("StructArrayLayout10ui20",Vu);class Tc extends gs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,f,v,M,D,U,W,X,re,de,_e,Re){const ze=this.length;return this.resize(ze+1),this.emplace(ze,u,f,v,M,D,U,W,X,re,de,_e,Re)}emplace(u,f,v,M,D,U,W,X,re,de,_e,Re,ze){const Ge=12*u;return this.int16[Ge+0]=f,this.int16[Ge+1]=v,this.int16[Ge+2]=M,this.int16[Ge+3]=D,this.uint16[Ge+4]=U,this.uint16[Ge+5]=W,this.uint16[Ge+6]=X,this.uint16[Ge+7]=re,this.int16[Ge+8]=de,this.int16[Ge+9]=_e,this.int16[Ge+10]=Re,this.int16[Ge+11]=ze,u}}Tc.prototype.bytesPerElement=24,hr("StructArrayLayout4i4ui4i24",Tc);class Eu extends gs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,f,v){const M=this.length;return this.resize(M+1),this.emplace(M,u,f,v)}emplace(u,f,v,M){const D=3*u;return this.float32[D+0]=f,this.float32[D+1]=v,this.float32[D+2]=M,u}}Eu.prototype.bytesPerElement=12,hr("StructArrayLayout3f12",Eu);class ya extends gs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(u){const f=this.length;return this.resize(f+1),this.emplace(f,u)}emplace(u,f){return this.uint32[1*u+0]=f,u}}ya.prototype.bytesPerElement=4,hr("StructArrayLayout1ul4",ya);class Ys extends gs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,f,v,M,D,U,W,X,re){const de=this.length;return this.resize(de+1),this.emplace(de,u,f,v,M,D,U,W,X,re)}emplace(u,f,v,M,D,U,W,X,re,de){const _e=10*u,Re=5*u;return this.int16[_e+0]=f,this.int16[_e+1]=v,this.int16[_e+2]=M,this.int16[_e+3]=D,this.int16[_e+4]=U,this.int16[_e+5]=W,this.uint32[Re+3]=X,this.uint16[_e+8]=re,this.uint16[_e+9]=de,u}}Ys.prototype.bytesPerElement=20,hr("StructArrayLayout6i1ul2ui20",Ys);class ou extends gs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,f,v,M,D,U){const W=this.length;return this.resize(W+1),this.emplace(W,u,f,v,M,D,U)}emplace(u,f,v,M,D,U,W){const X=6*u;return this.int16[X+0]=f,this.int16[X+1]=v,this.int16[X+2]=M,this.int16[X+3]=D,this.int16[X+4]=U,this.int16[X+5]=W,u}}ou.prototype.bytesPerElement=12,hr("StructArrayLayout2i2i2i12",ou);class su extends gs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,f,v,M,D){const U=this.length;return this.resize(U+1),this.emplace(U,u,f,v,M,D)}emplace(u,f,v,M,D,U){const W=4*u,X=8*u;return this.float32[W+0]=f,this.float32[W+1]=v,this.float32[W+2]=M,this.int16[X+6]=D,this.int16[X+7]=U,u}}su.prototype.bytesPerElement=16,hr("StructArrayLayout2f1f2i16",su);class zA extends gs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,f,v,M,D,U){const W=this.length;return this.resize(W+1),this.emplace(W,u,f,v,M,D,U)}emplace(u,f,v,M,D,U,W){const X=16*u,re=4*u,de=8*u;return this.uint8[X+0]=f,this.uint8[X+1]=v,this.float32[re+1]=M,this.float32[re+2]=D,this.int16[de+6]=U,this.int16[de+7]=W,u}}zA.prototype.bytesPerElement=16,hr("StructArrayLayout2ub2f2i16",zA);class au extends gs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,f,v){const M=this.length;return this.resize(M+1),this.emplace(M,u,f,v)}emplace(u,f,v,M){const D=3*u;return this.uint16[D+0]=f,this.uint16[D+1]=v,this.uint16[D+2]=M,u}}au.prototype.bytesPerElement=6,hr("StructArrayLayout3ui6",au);class Pc extends gs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,f,v,M,D,U,W,X,re,de,_e,Re,ze,Ge,et,At,Ct){const Nt=this.length;return this.resize(Nt+1),this.emplace(Nt,u,f,v,M,D,U,W,X,re,de,_e,Re,ze,Ge,et,At,Ct)}emplace(u,f,v,M,D,U,W,X,re,de,_e,Re,ze,Ge,et,At,Ct,Nt){const Et=24*u,Le=12*u,lt=48*u;return this.int16[Et+0]=f,this.int16[Et+1]=v,this.uint16[Et+2]=M,this.uint16[Et+3]=D,this.uint32[Le+2]=U,this.uint32[Le+3]=W,this.uint32[Le+4]=X,this.uint16[Et+10]=re,this.uint16[Et+11]=de,this.uint16[Et+12]=_e,this.float32[Le+7]=Re,this.float32[Le+8]=ze,this.uint8[lt+36]=Ge,this.uint8[lt+37]=et,this.uint8[lt+38]=At,this.uint32[Le+10]=Ct,this.int16[Et+22]=Nt,u}}Pc.prototype.bytesPerElement=48,hr("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Pc);class gA extends gs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,f,v,M,D,U,W,X,re,de,_e,Re,ze,Ge,et,At,Ct,Nt,Et,Le,lt,Ot,An,zn,Cn,fn,jn,Wn){const cr=this.length;return this.resize(cr+1),this.emplace(cr,u,f,v,M,D,U,W,X,re,de,_e,Re,ze,Ge,et,At,Ct,Nt,Et,Le,lt,Ot,An,zn,Cn,fn,jn,Wn)}emplace(u,f,v,M,D,U,W,X,re,de,_e,Re,ze,Ge,et,At,Ct,Nt,Et,Le,lt,Ot,An,zn,Cn,fn,jn,Wn,cr){const kn=32*u,jr=16*u;return this.int16[kn+0]=f,this.int16[kn+1]=v,this.int16[kn+2]=M,this.int16[kn+3]=D,this.int16[kn+4]=U,this.int16[kn+5]=W,this.int16[kn+6]=X,this.int16[kn+7]=re,this.uint16[kn+8]=de,this.uint16[kn+9]=_e,this.uint16[kn+10]=Re,this.uint16[kn+11]=ze,this.uint16[kn+12]=Ge,this.uint16[kn+13]=et,this.uint16[kn+14]=At,this.uint16[kn+15]=Ct,this.uint16[kn+16]=Nt,this.uint16[kn+17]=Et,this.uint16[kn+18]=Le,this.uint16[kn+19]=lt,this.uint16[kn+20]=Ot,this.uint16[kn+21]=An,this.uint16[kn+22]=zn,this.uint32[jr+12]=Cn,this.float32[jr+13]=fn,this.float32[jr+14]=jn,this.uint16[kn+30]=Wn,this.uint16[kn+31]=cr,u}}gA.prototype.bytesPerElement=64,hr("StructArrayLayout8i15ui1ul2f2ui64",gA);class Ml extends gs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u){const f=this.length;return this.resize(f+1),this.emplace(f,u)}emplace(u,f){return this.float32[1*u+0]=f,u}}Ml.prototype.bytesPerElement=4,hr("StructArrayLayout1f4",Ml);class Od extends gs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,f,v){const M=this.length;return this.resize(M+1),this.emplace(M,u,f,v)}emplace(u,f,v,M){const D=3*u;return this.uint16[6*u+0]=f,this.float32[D+1]=v,this.float32[D+2]=M,u}}Od.prototype.bytesPerElement=12,hr("StructArrayLayout1ui2f12",Od);class k extends gs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,f,v){const M=this.length;return this.resize(M+1),this.emplace(M,u,f,v)}emplace(u,f,v,M){const D=4*u;return this.uint32[2*u+0]=f,this.uint16[D+2]=v,this.uint16[D+3]=M,u}}k.prototype.bytesPerElement=8,hr("StructArrayLayout1ul2ui8",k);class l extends gs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,f){const v=this.length;return this.resize(v+1),this.emplace(v,u,f)}emplace(u,f,v){const M=2*u;return this.uint16[M+0]=f,this.uint16[M+1]=v,u}}l.prototype.bytesPerElement=4,hr("StructArrayLayout2ui4",l);class c extends gs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u){const f=this.length;return this.resize(f+1),this.emplace(f,u)}emplace(u,f){return this.uint16[1*u+0]=f,u}}c.prototype.bytesPerElement=2,hr("StructArrayLayout1ui2",c);class _ extends gs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,f,v,M){const D=this.length;return this.resize(D+1),this.emplace(D,u,f,v,M)}emplace(u,f,v,M,D){const U=4*u;return this.float32[U+0]=f,this.float32[U+1]=v,this.float32[U+2]=M,this.float32[U+3]=D,u}}_.prototype.bytesPerElement=16,hr("StructArrayLayout4f16",_);class w extends wl{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new P(this.anchorPointX,this.anchorPointY)}}w.prototype.size=20;class K extends Ys{get(u){return new w(this,u)}}hr("CollisionBoxArray",K);class N extends wl{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(u){this._structArray.uint8[this._pos1+37]=u}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(u){this._structArray.uint8[this._pos1+38]=u}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(u){this._structArray.uint32[this._pos4+10]=u}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}N.prototype.size=48;class $ extends Pc{get(u){return new N(this,u)}}hr("PlacedSymbolArray",$);class ee extends wl{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(u){this._structArray.uint32[this._pos4+12]=u}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}ee.prototype.size=64;class ae extends gA{get(u){return new ee(this,u)}}hr("SymbolInstanceArray",ae);class xe extends Ml{getoffsetX(u){return this.float32[1*u+0]}}hr("GlyphOffsetArray",xe);class ke extends mA{getx(u){return this.int16[3*u+0]}gety(u){return this.int16[3*u+1]}gettileUnitDistanceFromAnchor(u){return this.int16[3*u+2]}}hr("SymbolLineVertexArray",ke);class Ke extends wl{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Ke.prototype.size=12;class $e extends Od{get(u){return new Ke(this,u)}}hr("TextAnchorOffsetArray",$e);class Xe extends wl{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Xe.prototype.size=8;class pt extends k{get(u){return new Xe(this,u)}}hr("FeatureIndexArray",pt);class ut extends Bd{}class mt extends Bd{}class vt extends Bd{}class Bt extends kc{}class kt extends Su{}class Rt extends qa{}class zt extends Vu{}class Tt extends Tc{}class nn extends Eu{}class Zt extends ya{}class Mn extends ou{}class Bn extends zA{}class yn extends au{}class In extends l{}const Nn=qs([{name:"a_pos",components:2,type:"Int16"}],4),{members:Fn}=Nn;class pr{constructor(u=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=u}prepareSegment(u,f,v,M){const D=this.segments[this.segments.length-1];return u>pr.MAX_VERTEX_ARRAY_LENGTH&&it(`Max vertices per segment is ${pr.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${u}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${pr.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!D||D.vertexLength+u>pr.MAX_VERTEX_ARRAY_LENGTH||D.sortKey!==M?this.createNewSegment(f,v,M):D}createNewSegment(u,f,v){const M={vertexOffset:u.length,primitiveOffset:f.length,vertexLength:0,primitiveLength:0,vaos:{}};return v!==void 0&&(M.sortKey=v),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(M),M}getOrCreateLatestSegment(u,f,v){return this.prepareSegment(0,u,f,v)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const u of this.segments)for(const f in u.vaos)u.vaos[f].destroy()}static simpleSegment(u,f,v,M){return new pr([{vertexOffset:u,primitiveOffset:f,vertexLength:v,primitiveLength:M,vaos:{},sortKey:0}])}}function ki(h,u){return 256*(h=bt(Math.floor(h),0,255))+bt(Math.floor(u),0,255)}pr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,hr("SegmentVector",pr);const Wi=qs([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Lo,Mi,fs,ko={exports:{}},To={exports:{}},vo={exports:{}},il=function(){if(fs)return ko.exports;fs=1;var h=(Lo||(Lo=1,To.exports=function(f,v){var M,D,U,W,X,re,de,_e;for(D=f.length-(M=3&f.length),U=v,X=3432918353,re=461845907,_e=0;_e<D;)de=255&f.charCodeAt(_e)|(255&f.charCodeAt(++_e))<<8|(255&f.charCodeAt(++_e))<<16|(255&f.charCodeAt(++_e))<<24,++_e,U=27492+(65535&(W=5*(65535&(U=(U^=de=(65535&(de=(de=(65535&de)*X+(((de>>>16)*X&65535)<<16)&4294967295)<<15|de>>>17))*re+(((de>>>16)*re&65535)<<16)&4294967295)<<13|U>>>19))+((5*(U>>>16)&65535)<<16)&4294967295))+((58964+(W>>>16)&65535)<<16);switch(de=0,M){case 3:de^=(255&f.charCodeAt(_e+2))<<16;case 2:de^=(255&f.charCodeAt(_e+1))<<8;case 1:U^=de=(65535&(de=(de=(65535&(de^=255&f.charCodeAt(_e)))*X+(((de>>>16)*X&65535)<<16)&4294967295)<<15|de>>>17))*re+(((de>>>16)*re&65535)<<16)&4294967295}return U^=f.length,U=2246822507*(65535&(U^=U>>>16))+((2246822507*(U>>>16)&65535)<<16)&4294967295,U=3266489909*(65535&(U^=U>>>13))+((3266489909*(U>>>16)&65535)<<16)&4294967295,(U^=U>>>16)>>>0}),To.exports),u=(Mi||(Mi=1,vo.exports=function(f,v){for(var M,D=f.length,U=v^D,W=0;D>=4;)M=1540483477*(65535&(M=255&f.charCodeAt(W)|(255&f.charCodeAt(++W))<<8|(255&f.charCodeAt(++W))<<16|(255&f.charCodeAt(++W))<<24))+((1540483477*(M>>>16)&65535)<<16),U=1540483477*(65535&U)+((1540483477*(U>>>16)&65535)<<16)^(M=1540483477*(65535&(M^=M>>>24))+((1540483477*(M>>>16)&65535)<<16)),D-=4,++W;switch(D){case 3:U^=(255&f.charCodeAt(W+2))<<16;case 2:U^=(255&f.charCodeAt(W+1))<<8;case 1:U=1540483477*(65535&(U^=255&f.charCodeAt(W)))+((1540483477*(U>>>16)&65535)<<16)}return U=1540483477*(65535&(U^=U>>>13))+((1540483477*(U>>>16)&65535)<<16),(U^=U>>>15)>>>0}),vo.exports);return ko.exports=h,ko.exports.murmur3=h,ko.exports.murmur2=u,ko.exports}(),Xo=d(il);class Jo{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(u,f,v,M){this.ids.push(ol(u)),this.positions.push(f,v,M)}getPositions(u){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const f=ol(u);let v=0,M=this.ids.length-1;for(;v<M;){const U=v+M>>1;this.ids[U]>=f?M=U:v=U+1}const D=[];for(;this.ids[v]===f;)D.push({index:this.positions[3*v],start:this.positions[3*v+1],end:this.positions[3*v+2]}),v++;return D}static serialize(u,f){const v=new Float64Array(u.ids),M=new Uint32Array(u.positions);return yA(v,M,0,v.length-1),f&&f.push(v.buffer,M.buffer),{ids:v,positions:M}}static deserialize(u){const f=new Jo;return f.ids=u.ids,f.positions=u.positions,f.indexed=!0,f}}function ol(h){const u=+h;return!isNaN(u)&&u<=Number.MAX_SAFE_INTEGER?u:Xo(String(h))}function yA(h,u,f,v){for(;f<v;){const M=h[f+v>>1];let D=f-1,U=v+1;for(;;){do D++;while(h[D]<M);do U--;while(h[U]>M);if(D>=U)break;lu(h,D,U),lu(u,3*D,3*U),lu(u,3*D+1,3*U+1),lu(u,3*D+2,3*U+2)}U-f<v-U?(yA(h,u,f,U),f=U+1):(yA(h,u,U+1,v),v=U)}}function lu(h,u,f){const v=h[u];h[u]=h[f],h[f]=v}hr("FeaturePositionMap",Jo);class Ta{constructor(u,f){this.gl=u.gl,this.location=f}}class Sl extends Ta{constructor(u,f){super(u,f),this.current=0}set(u){this.current!==u&&(this.current=u,this.gl.uniform1f(this.location,u))}}class jA extends Ta{constructor(u,f){super(u,f),this.current=[0,0,0,0]}set(u){u[0]===this.current[0]&&u[1]===this.current[1]&&u[2]===this.current[2]&&u[3]===this.current[3]||(this.current=u,this.gl.uniform4f(this.location,u[0],u[1],u[2],u[3]))}}class vA extends Ta{constructor(u,f){super(u,f),this.current=ui.transparent}set(u){u.r===this.current.r&&u.g===this.current.g&&u.b===this.current.b&&u.a===this.current.a||(this.current=u,this.gl.uniform4f(this.location,u.r,u.g,u.b,u.a))}}const NA=new Float32Array(16);function Aa(h){return[ki(255*h.r,255*h.g),ki(255*h.b,255*h.a)]}class El{constructor(u,f,v){this.value=u,this.uniformNames=f.map(M=>`u_${M}`),this.type=v}setUniform(u,f,v){u.set(v.constantOr(this.value))}getBinding(u,f,v){return this.type==="color"?new vA(u,f):new Sl(u,f)}}class Pa{constructor(u,f){this.uniformNames=f.map(v=>`u_${v}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(u,f){this.pixelRatioFrom=f.pixelRatio,this.pixelRatioTo=u.pixelRatio,this.patternFrom=f.tlbr,this.patternTo=u.tlbr}setUniform(u,f,v,M){const D=M==="u_pattern_to"?this.patternTo:M==="u_pattern_from"?this.patternFrom:M==="u_pixel_ratio_to"?this.pixelRatioTo:M==="u_pixel_ratio_from"?this.pixelRatioFrom:null;D&&u.set(D)}getBinding(u,f,v){return v.substr(0,9)==="u_pattern"?new jA(u,f):new Sl(u,f)}}class uu{constructor(u,f,v,M){this.expression=u,this.type=v,this.maxValue=0,this.paintVertexAttributes=f.map(D=>({name:`a_${D}`,type:"Float32",components:v==="color"?2:1,offset:0})),this.paintVertexArray=new M}populatePaintArray(u,f,v,M,D){const U=this.paintVertexArray.length,W=this.expression.evaluate(new Fo(0),f,{},M,[],D);this.paintVertexArray.resize(u),this._setPaintValue(U,u,W)}updatePaintArray(u,f,v,M){const D=this.expression.evaluate({zoom:0},v,M);this._setPaintValue(u,f,D)}_setPaintValue(u,f,v){if(this.type==="color"){const M=Aa(v);for(let D=u;D<f;D++)this.paintVertexArray.emplace(D,M[0],M[1])}else{for(let M=u;M<f;M++)this.paintVertexArray.emplace(M,v);this.maxValue=Math.max(this.maxValue,Math.abs(v))}}upload(u){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=u.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class os{constructor(u,f,v,M,D,U){this.expression=u,this.uniformNames=f.map(W=>`u_${W}_t`),this.type=v,this.useIntegerZoom=M,this.zoom=D,this.maxValue=0,this.paintVertexAttributes=f.map(W=>({name:`a_${W}`,type:"Float32",components:v==="color"?4:2,offset:0})),this.paintVertexArray=new U}populatePaintArray(u,f,v,M,D){const U=this.expression.evaluate(new Fo(this.zoom),f,{},M,[],D),W=this.expression.evaluate(new Fo(this.zoom+1),f,{},M,[],D),X=this.paintVertexArray.length;this.paintVertexArray.resize(u),this._setPaintValue(X,u,U,W)}updatePaintArray(u,f,v,M){const D=this.expression.evaluate({zoom:this.zoom},v,M),U=this.expression.evaluate({zoom:this.zoom+1},v,M);this._setPaintValue(u,f,D,U)}_setPaintValue(u,f,v,M){if(this.type==="color"){const D=Aa(v),U=Aa(M);for(let W=u;W<f;W++)this.paintVertexArray.emplace(W,D[0],D[1],U[0],U[1])}else{for(let D=u;D<f;D++)this.paintVertexArray.emplace(D,v,M);this.maxValue=Math.max(this.maxValue,Math.abs(v),Math.abs(M))}}upload(u){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=u.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(u,f){const v=this.useIntegerZoom?Math.floor(f.zoom):f.zoom,M=bt(this.expression.interpolationFactor(v,this.zoom,this.zoom+1),0,1);u.set(M)}getBinding(u,f,v){return new Sl(u,f)}}class ss{constructor(u,f,v,M,D,U){this.expression=u,this.type=f,this.useIntegerZoom=v,this.zoom=M,this.layerId=U,this.zoomInPaintVertexArray=new D,this.zoomOutPaintVertexArray=new D}populatePaintArray(u,f,v){const M=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(u),this.zoomOutPaintVertexArray.resize(u),this._setPaintValues(M,u,f.patterns&&f.patterns[this.layerId],v)}updatePaintArray(u,f,v,M,D){this._setPaintValues(u,f,v.patterns&&v.patterns[this.layerId],D)}_setPaintValues(u,f,v,M){if(!M||!v)return;const{min:D,mid:U,max:W}=v,X=M[D],re=M[U],de=M[W];if(X&&re&&de)for(let _e=u;_e<f;_e++)this.zoomInPaintVertexArray.emplace(_e,re.tl[0],re.tl[1],re.br[0],re.br[1],X.tl[0],X.tl[1],X.br[0],X.br[1],re.pixelRatio,X.pixelRatio),this.zoomOutPaintVertexArray.emplace(_e,re.tl[0],re.tl[1],re.br[0],re.br[1],de.tl[0],de.tl[1],de.br[0],de.br[1],re.pixelRatio,de.pixelRatio)}upload(u){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=u.createVertexBuffer(this.zoomInPaintVertexArray,Wi.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=u.createVertexBuffer(this.zoomOutPaintVertexArray,Wi.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Bu{constructor(u,f,v){this.binders={},this._buffers=[];const M=[];for(const D in u.paint._values){if(!v(D))continue;const U=u.paint.get(D);if(!(U instanceof bs&&bu(U.property.specification)))continue;const W=Hd(D,u.type),X=U.value,re=U.property.specification.type,de=U.property.useIntegerZoom,_e=U.property.specification["property-type"],Re=_e==="cross-faded"||_e==="cross-faded-data-driven";if(X.kind==="constant")this.binders[D]=Re?new Pa(X.value,W):new El(X.value,W,re),M.push(`/u_${D}`);else if(X.kind==="source"||Re){const ze=hf(D,re,"source");this.binders[D]=Re?new ss(X,re,de,f,ze,u.id):new uu(X,W,re,ze),M.push(`/a_${D}`)}else{const ze=hf(D,re,"composite");this.binders[D]=new os(X,W,re,de,f,ze),M.push(`/z_${D}`)}}this.cacheKey=M.sort().join("")}getMaxValue(u){const f=this.binders[u];return f instanceof uu||f instanceof os?f.maxValue:0}populatePaintArrays(u,f,v,M,D){for(const U in this.binders){const W=this.binders[U];(W instanceof uu||W instanceof os||W instanceof ss)&&W.populatePaintArray(u,f,v,M,D)}}setConstantPatternPositions(u,f){for(const v in this.binders){const M=this.binders[v];M instanceof Pa&&M.setConstantPatternPositions(u,f)}}updatePaintArrays(u,f,v,M,D){let U=!1;for(const W in u){const X=f.getPositions(W);for(const re of X){const de=v.feature(re.index);for(const _e in this.binders){const Re=this.binders[_e];if((Re instanceof uu||Re instanceof os||Re instanceof ss)&&Re.expression.isStateDependent===!0){const ze=M.paint.get(_e);Re.expression=ze.value,Re.updatePaintArray(re.start,re.end,de,u[W],D),U=!0}}}}return U}defines(){const u=[];for(const f in this.binders){const v=this.binders[f];(v instanceof El||v instanceof Pa)&&u.push(...v.uniformNames.map(M=>`#define HAS_UNIFORM_${M}`))}return u}getBinderAttributes(){const u=[];for(const f in this.binders){const v=this.binders[f];if(v instanceof uu||v instanceof os)for(let M=0;M<v.paintVertexAttributes.length;M++)u.push(v.paintVertexAttributes[M].name);else if(v instanceof ss)for(let M=0;M<Wi.members.length;M++)u.push(Wi.members[M].name)}return u}getBinderUniforms(){const u=[];for(const f in this.binders){const v=this.binders[f];if(v instanceof El||v instanceof Pa||v instanceof os)for(const M of v.uniformNames)u.push(M)}return u}getPaintVertexBuffers(){return this._buffers}getUniforms(u,f){const v=[];for(const M in this.binders){const D=this.binders[M];if(D instanceof El||D instanceof Pa||D instanceof os){for(const U of D.uniformNames)if(f[U]){const W=D.getBinding(u,f[U],U);v.push({name:U,property:M,binding:W})}}}return v}setUniforms(u,f,v,M){for(const{name:D,property:U,binding:W}of f)this.binders[U].setUniform(W,M,v.get(U),D)}updatePaintBuffers(u){this._buffers=[];for(const f in this.binders){const v=this.binders[f];if(u&&v instanceof ss){const M=u.fromScale===2?v.zoomInPaintVertexBuffer:v.zoomOutPaintVertexBuffer;M&&this._buffers.push(M)}else(v instanceof uu||v instanceof os)&&v.paintVertexBuffer&&this._buffers.push(v.paintVertexBuffer)}}upload(u){for(const f in this.binders){const v=this.binders[f];(v instanceof uu||v instanceof os||v instanceof ss)&&v.upload(u)}this.updatePaintBuffers()}destroy(){for(const u in this.binders){const f=this.binders[u];(f instanceof uu||f instanceof os||f instanceof ss)&&f.destroy()}}}class $s{constructor(u,f,v=()=>!0){this.programConfigurations={};for(const M of u)this.programConfigurations[M.id]=new Bu(M,f,v);this.needsUpload=!1,this._featureMap=new Jo,this._bufferOffset=0}populatePaintArrays(u,f,v,M,D,U){for(const W in this.programConfigurations)this.programConfigurations[W].populatePaintArrays(u,f,M,D,U);f.id!==void 0&&this._featureMap.add(f.id,v,this._bufferOffset,u),this._bufferOffset=u,this.needsUpload=!0}updatePaintArrays(u,f,v,M){for(const D of v)this.needsUpload=this.programConfigurations[D.id].updatePaintArrays(u,this._featureMap,f,D,M)||this.needsUpload}get(u){return this.programConfigurations[u]}upload(u){if(this.needsUpload){for(const f in this.programConfigurations)this.programConfigurations[f].upload(u);this.needsUpload=!1}}destroy(){for(const u in this.programConfigurations)this.programConfigurations[u].destroy()}}function Hd(h,u){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[h]||[h.replace(`${u}-`,"").replace(/-/g,"_")]}function hf(h,u,f){const v={color:{source:qa,composite:_},number:{source:Ml,composite:qa}},M=function(D){return{"line-pattern":{source:zt,composite:zt},"fill-pattern":{source:zt,composite:zt},"fill-extrusion-pattern":{source:zt,composite:zt}}[D]}(h);return M&&M[f]||v[u][f]}hr("ConstantBinder",El),hr("CrossFadedConstantBinder",Pa),hr("SourceExpressionBinder",uu),hr("CrossFadedCompositeBinder",ss),hr("CompositeExpressionBinder",os),hr("ProgramConfiguration",Bu,{omit:["_buffers"]}),hr("ProgramConfigurationSet",$s);const Zd=Math.pow(2,14)-1,Op=-Zd-1;function dc(h){const u=at/h.extent,f=h.loadGeometry();for(let v=0;v<f.length;v++){const M=f[v];for(let D=0;D<M.length;D++){const U=M[D],W=Math.round(U.x*u),X=Math.round(U.y*u);U.x=bt(W,Op,Zd),U.y=bt(X,Op,Zd),(W<U.x||W>U.x+1||X<U.y||X>U.y+1)&&it("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return f}function hc(h,u){return{type:h.type,id:h.id,properties:h.properties,geometry:u?dc(h):[]}}const va=-32768;function Hu(h,u,f,v,M){h.emplaceBack(va+8*u+v,va+8*f+M)}class Jc{constructor(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(f=>f.id),this.index=u.index,this.hasPattern=!1,this.layoutVertexArray=new mt,this.indexArray=new yn,this.segments=new pr,this.programConfigurations=new $s(u.layers,u.zoom),this.stateDependentLayerIds=this.layers.filter(f=>f.isStateDependent()).map(f=>f.id)}populate(u,f,v){const M=this.layers[0],D=[];let U=null,W=!1,X=M.type==="heatmap";if(M.type==="circle"){const de=M;U=de.layout.get("circle-sort-key"),W=!U.isConstant(),X=X||de.paint.get("circle-pitch-alignment")==="map"}const re=X?f.subdivisionGranularity.circle:1;for(const{feature:de,id:_e,index:Re,sourceLayerIndex:ze}of u){const Ge=this.layers[0]._featureFilter.needGeometry,et=hc(de,Ge);if(!this.layers[0]._featureFilter.filter(new Fo(this.zoom),et,v))continue;const At=W?U.evaluate(et,{},v):void 0,Ct={id:_e,properties:de.properties,type:de.type,sourceLayerIndex:ze,index:Re,geometry:Ge?et.geometry:dc(de),patterns:{},sortKey:At};D.push(Ct)}W&&D.sort((de,_e)=>de.sortKey-_e.sortKey);for(const de of D){const{geometry:_e,index:Re,sourceLayerIndex:ze}=de,Ge=u[Re].feature;this.addFeature(de,_e,Re,v,re),f.featureIndex.insert(Ge,_e,Re,ze,this.index)}}update(u,f,v){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,f,this.stateDependentLayers,v)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,Fn),this.indexBuffer=u.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(u,f,v,M,D=1){let U;switch(D){case 1:U=[0,7];break;case 3:U=[0,2,5,7];break;case 5:U=[0,1,3,4,6,7];break;case 7:U=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${D}; valid values are 1, 3, 5, 7.`)}const W=U.length;for(const X of f)for(const re of X){const de=re.x,_e=re.y;if(de<0||de>=at||_e<0||_e>=at)continue;const Re=this.segments.prepareSegment(W*W,this.layoutVertexArray,this.indexArray,u.sortKey),ze=Re.vertexLength;for(let Ge=0;Ge<W;Ge++)for(let et=0;et<W;et++)Hu(this.layoutVertexArray,de,_e,U[et],U[Ge]);for(let Ge=0;Ge<W-1;Ge++)for(let et=0;et<W-1;et++){const At=ze+Ge*W+et,Ct=ze+(Ge+1)*W+et;this.indexArray.emplaceBack(At,Ct+1,At+1),this.indexArray.emplaceBack(At,Ct,Ct+1)}Re.vertexLength+=W*W,Re.primitiveLength+=(W-1)*(W-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,v,{},M)}}function Vf(h,u){for(let f=0;f<h.length;f++)if(Jd(u,h[f]))return!0;for(let f=0;f<u.length;f++)if(Jd(h,u[f]))return!0;return!!ff(h,u)}function ed(h,u,f){return!!Jd(h,u)||!!Zf(u,h,f)}function CA(h,u){if(h.length===1)return Th(u,h[0]);for(let f=0;f<u.length;f++){const v=u[f];for(let M=0;M<v.length;M++)if(Jd(h,v[M]))return!0}for(let f=0;f<h.length;f++)if(Th(u,h[f]))return!0;for(let f=0;f<u.length;f++)if(ff(h,u[f]))return!0;return!1}function pl(h,u,f){if(h.length>1){if(ff(h,u))return!0;for(let v=0;v<u.length;v++)if(Zf(u[v],h,f))return!0}for(let v=0;v<h.length;v++)if(Zf(h[v],u,f))return!0;return!1}function ff(h,u){if(h.length===0||u.length===0)return!1;for(let f=0;f<h.length-1;f++){const v=h[f],M=h[f+1];for(let D=0;D<u.length-1;D++)if(Hf(v,M,u[D],u[D+1]))return!0}return!1}function Hf(h,u,f,v){return _t(h,f,v)!==_t(u,f,v)&&_t(h,u,f)!==_t(h,u,v)}function Zf(h,u,f){const v=f*f;if(u.length===1)return h.distSqr(u[0])<v;for(let M=1;M<u.length;M++)if(Xd(h,u[M-1],u[M])<v)return!0;return!1}function Xd(h,u,f){const v=u.distSqr(f);if(v===0)return h.distSqr(u);const M=((h.x-u.x)*(f.x-u.x)+(h.y-u.y)*(f.y-u.y))/v;return h.distSqr(M<0?u:M>1?f:f.sub(u)._mult(M)._add(u))}function Th(h,u){let f,v,M,D=!1;for(let U=0;U<h.length;U++){f=h[U];for(let W=0,X=f.length-1;W<f.length;X=W++)v=f[W],M=f[X],v.y>u.y!=M.y>u.y&&u.x<(M.x-v.x)*(u.y-v.y)/(M.y-v.y)+v.x&&(D=!D)}return D}function Jd(h,u){let f=!1;for(let v=0,M=h.length-1;v<h.length;M=v++){const D=h[v],U=h[M];D.y>u.y!=U.y>u.y&&u.x<(U.x-D.x)*(u.y-D.y)/(U.y-D.y)+D.x&&(f=!f)}return f}function eh(h,u,f){const v=f[0],M=f[2];if(h.x<v.x&&u.x<v.x||h.x>M.x&&u.x>M.x||h.y<v.y&&u.y<v.y||h.y>M.y&&u.y>M.y)return!1;const D=_t(h,u,f[0]);return D!==_t(h,u,f[1])||D!==_t(h,u,f[2])||D!==_t(h,u,f[3])}function th(h,u,f){const v=u.paint.get(h).value;return v.kind==="constant"?v.value:f.programConfigurations.get(u.id).getMaxValue(h)}function Id(h){return Math.sqrt(h[0]*h[0]+h[1]*h[1])}function pf(h,u,f,v,M){if(!u[0]&&!u[1])return h;const D=P.convert(u)._mult(M);f==="viewport"&&D._rotate(-v);const U=[];for(let W=0;W<h.length;W++)U.push(h[W].sub(D));return U}let nh,mf;hr("CircleBucket",Jc,{omit:["layers"]});var Xf={get paint(){return mf=mf||new iu({"circle-radius":new Hr(Oe.paint_circle["circle-radius"]),"circle-color":new Hr(Oe.paint_circle["circle-color"]),"circle-blur":new Hr(Oe.paint_circle["circle-blur"]),"circle-opacity":new Hr(Oe.paint_circle["circle-opacity"]),"circle-translate":new Pr(Oe.paint_circle["circle-translate"]),"circle-translate-anchor":new Pr(Oe.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Pr(Oe.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Pr(Oe.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Hr(Oe.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Hr(Oe.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Hr(Oe.paint_circle["circle-stroke-opacity"])})},get layout(){return nh=nh||new iu({"circle-sort-key":new Hr(Oe.layout_circle["circle-sort-key"])})}};class fm extends pA{constructor(u){super(u,Xf)}createBucket(u){return new Jc(u)}queryRadius(u){const f=u;return th("circle-radius",this,f)+th("circle-stroke-width",this,f)+Id(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:u,feature:f,featureState:v,geometry:M,transform:D,pixelsToTileUnits:U,pixelPosMatrix:W}){const X=pf(u,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-D.bearingInRadians,U),re=this.paint.get("circle-radius").evaluate(f,v)+this.paint.get("circle-stroke-width").evaluate(f,v),de=this.paint.get("circle-pitch-alignment")==="map",_e=de?X:function(ze,Ge){return ze.map(et=>kd(et,Ge))}(X,W),Re=de?re*U:re;for(const ze of M)for(const Ge of ze){const et=de?Ge:kd(Ge,W);let At=Re;const Ct=me([],[Ge.x,Ge.y,0,1],W);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?At*=Ct[3]/D.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(At*=D.cameraToCenterDistance/Ct[3]),ed(_e,et,At))return!0}return!1}}function kd(h,u){const f=me([],[h.x,h.y,0,1],u);return new P(f[0]/f[3],f[1]/f[3])}class gf extends Jc{}let Bl;hr("HeatmapBucket",gf,{omit:["layers"]});var Au={get paint(){return Bl=Bl||new iu({"heatmap-radius":new Hr(Oe.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Hr(Oe.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Pr(Oe.paint_heatmap["heatmap-intensity"]),"heatmap-color":new fl(Oe.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Pr(Oe.paint_heatmap["heatmap-opacity"])})}};function Ip(h,{width:u,height:f},v,M){if(M){if(M instanceof Uint8ClampedArray)M=new Uint8Array(M.buffer);else if(M.length!==u*f*v)throw new RangeError(`mismatched image size. expected: ${M.length} but got: ${u*f*v}`)}else M=new Uint8Array(u*f*v);return h.width=u,h.height=f,h.data=M,h}function kp(h,{width:u,height:f},v){if(u===h.width&&f===h.height)return;const M=Ip({},{width:u,height:f},v);Qo(h,M,{x:0,y:0},{x:0,y:0},{width:Math.min(h.width,u),height:Math.min(h.height,f)},v),h.width=u,h.height=f,h.data=M.data}function Qo(h,u,f,v,M,D){if(M.width===0||M.height===0)return u;if(M.width>h.width||M.height>h.height||f.x>h.width-M.width||f.y>h.height-M.height)throw new RangeError("out of range source coordinates for image copy");if(M.width>u.width||M.height>u.height||v.x>u.width-M.width||v.y>u.height-M.height)throw new RangeError("out of range destination coordinates for image copy");const U=h.data,W=u.data;if(U===W)throw new Error("srcData equals dstData, so image is already copied");for(let X=0;X<M.height;X++){const re=((f.y+X)*h.width+f.x)*D,de=((v.y+X)*u.width+v.x)*D;for(let _e=0;_e<M.width*D;_e++)W[de+_e]=U[re+_e]}return u}class Ph{constructor(u,f){Ip(this,u,1,f)}resize(u){kp(this,u,1)}clone(){return new Ph({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(u,f,v,M,D){Qo(u,f,v,M,D,1)}}class cu{constructor(u,f){Ip(this,u,4,f)}resize(u){kp(this,u,4)}replace(u,f){f?this.data.set(u):this.data=u instanceof Uint8ClampedArray?new Uint8Array(u.buffer):u}clone(){return new cu({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(u,f,v,M,D){Qo(u,f,v,M,D,4)}}function rh(h){const u={},f=h.resolution||256,v=h.clips?h.clips.length:1,M=h.image||new cu({width:f,height:v});if(Math.log(f)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${f}`);const D=(U,W,X)=>{u[h.evaluationKey]=X;const re=h.expression.evaluate(u);M.data[U+W+0]=Math.floor(255*re.r/re.a),M.data[U+W+1]=Math.floor(255*re.g/re.a),M.data[U+W+2]=Math.floor(255*re.b/re.a),M.data[U+W+3]=Math.floor(255*re.a)};if(h.clips)for(let U=0,W=0;U<v;++U,W+=4*f)for(let X=0,re=0;X<f;X++,re+=4){const de=X/(f-1),{start:_e,end:Re}=h.clips[U];D(W,re,_e*(1-de)+Re*de)}else for(let U=0,W=0;U<f;U++,W+=4)D(0,W,U/(f-1));return M}hr("AlphaImage",Ph),hr("RGBAImage",cu);const Zu="big-fb";class yf extends pA{createBucket(u){return new gf(u)}constructor(u){super(u,Au),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(u){u==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=rh({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(Zu)&&this.heatmapFbos.delete(Zu)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let Jf;var Kc={get paint(){return Jf=Jf||new iu({"hillshade-illumination-direction":new Pr(Oe.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Pr(Oe.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Pr(Oe.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Pr(Oe.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Pr(Oe.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Pr(Oe.paint_hillshade["hillshade-accent-color"])})}};class vf extends pA{constructor(u){super(u,Kc)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const Cf=qs([{name:"a_pos",components:2,type:"Int16"}],4),{members:_f}=Cf;function Td(h,u,f){const v=f.patternDependencies;let M=!1;for(const D of u){const U=D.paint.get(`${h}-pattern`);U.isConstant()||(M=!0);const W=U.constantOr(null);W&&(M=!0,v[W.to]=!0,v[W.from]=!0)}return M}function Dc(h,u,f,v,M){const D=M.patternDependencies;for(const U of u){const W=U.paint.get(`${h}-pattern`).value;if(W.kind!=="constant"){let X=W.evaluate({zoom:v-1},f,{},M.availableImages),re=W.evaluate({zoom:v},f,{},M.availableImages),de=W.evaluate({zoom:v+1},f,{},M.availableImages);X=X&&X.name?X.name:X,re=re&&re.name?re.name:re,de=de&&de.name?de.name:de,D[X]=!0,D[re]=!0,D[de]=!0,f.patterns[U.id]={min:X,mid:re,max:de}}}return f}function bi(h,u,f,v,M){let D;if(M===function(U,W,X,re){let de=0;for(let _e=W,Re=X-re;_e<X;_e+=re)de+=(U[Re]-U[_e])*(U[_e+1]+U[Re+1]),Re=_e;return de}(h,u,f,v)>0)for(let U=u;U<f;U+=v)D=Te(U/v|0,h[U],h[U+1],D);else for(let U=f-v;U>=u;U-=v)D=Te(U/v|0,h[U],h[U+1],D);return D&&O(D,D.next)&&(je(D),D=D.next),D}function fc(h,u){if(!h)return h;u||(u=h);let f,v=h;do if(f=!1,v.steiner||!O(v,v.next)&&y(v.prev,v,v.next)!==0)v=v.next;else{if(je(v),v=u=v.prev,v===v.next)break;f=!0}while(f||v!==u);return u}function Uo(h,u,f,v,M,D,U){if(!h)return;!U&&D&&function(X,re,de,_e){let Re=X;do Re.z===0&&(Re.z=ep(Re.x,Re.y,re,de,_e)),Re.prevZ=Re.prev,Re.nextZ=Re.next,Re=Re.next;while(Re!==X);Re.prevZ.nextZ=null,Re.prevZ=null,function(ze){let Ge,et=1;do{let At,Ct=ze;ze=null;let Nt=null;for(Ge=0;Ct;){Ge++;let Et=Ct,Le=0;for(let Ot=0;Ot<et&&(Le++,Et=Et.nextZ,Et);Ot++);let lt=et;for(;Le>0||lt>0&&Et;)Le!==0&&(lt===0||!Et||Ct.z<=Et.z)?(At=Ct,Ct=Ct.nextZ,Le--):(At=Et,Et=Et.nextZ,lt--),Nt?Nt.nextZ=At:ze=At,At.prevZ=Nt,Nt=At;Ct=Et}Nt.nextZ=null,et*=2}while(Ge>1)}(Re)}(h,v,M,D);let W=h;for(;h.prev!==h.next;){const X=h.prev,re=h.next;if(D?Tp(h,v,M,D):Pd(h))u.push(X.i,h.i,re.i),je(h),h=re.next,W=re.next;else if((h=re)===W){U?U===1?Uo(h=Ou(fc(h),u),u,f,v,M,D,2):U===2&&Ym(h,u,f,v,M,D):Uo(fc(h),u,f,v,M,D,1);break}}}function Pd(h){const u=h.prev,f=h,v=h.next;if(y(u,f,v)>=0)return!1;const M=u.x,D=f.x,U=v.x,W=u.y,X=f.y,re=v.y,de=Math.min(M,D,U),_e=Math.min(W,X,re),Re=Math.max(M,D,U),ze=Math.max(W,X,re);let Ge=v.next;for(;Ge!==u;){if(Ge.x>=de&&Ge.x<=Re&&Ge.y>=_e&&Ge.y<=ze&&ih(M,W,D,X,U,re,Ge.x,Ge.y)&&y(Ge.prev,Ge,Ge.next)>=0)return!1;Ge=Ge.next}return!0}function Tp(h,u,f,v){const M=h.prev,D=h,U=h.next;if(y(M,D,U)>=0)return!1;const W=M.x,X=D.x,re=U.x,de=M.y,_e=D.y,Re=U.y,ze=Math.min(W,X,re),Ge=Math.min(de,_e,Re),et=Math.max(W,X,re),At=Math.max(de,_e,Re),Ct=ep(ze,Ge,u,f,v),Nt=ep(et,At,u,f,v);let Et=h.prevZ,Le=h.nextZ;for(;Et&&Et.z>=Ct&&Le&&Le.z<=Nt;){if(Et.x>=ze&&Et.x<=et&&Et.y>=Ge&&Et.y<=At&&Et!==M&&Et!==U&&ih(W,de,X,_e,re,Re,Et.x,Et.y)&&y(Et.prev,Et,Et.next)>=0||(Et=Et.prevZ,Le.x>=ze&&Le.x<=et&&Le.y>=Ge&&Le.y<=At&&Le!==M&&Le!==U&&ih(W,de,X,_e,re,Re,Le.x,Le.y)&&y(Le.prev,Le,Le.next)>=0))return!1;Le=Le.nextZ}for(;Et&&Et.z>=Ct;){if(Et.x>=ze&&Et.x<=et&&Et.y>=Ge&&Et.y<=At&&Et!==M&&Et!==U&&ih(W,de,X,_e,re,Re,Et.x,Et.y)&&y(Et.prev,Et,Et.next)>=0)return!1;Et=Et.prevZ}for(;Le&&Le.z<=Nt;){if(Le.x>=ze&&Le.x<=et&&Le.y>=Ge&&Le.y<=At&&Le!==M&&Le!==U&&ih(W,de,X,_e,re,Re,Le.x,Le.y)&&y(Le.prev,Le,Le.next)>=0)return!1;Le=Le.nextZ}return!0}function Ou(h,u){let f=h;do{const v=f.prev,M=f.next.next;!O(v,M)&&B(v,f,f.next,M)&&Ae(v,M)&&Ae(M,v)&&(u.push(v.i,f.i,M.i),je(f),je(f.next),f=h=M),f=f.next}while(f!==h);return fc(f)}function Ym(h,u,f,v,M,D){let U=h;do{let W=U.next.next;for(;W!==U.prev;){if(U.i!==W.i&&A(U,W)){let X=Ce(U,W);return U=fc(U,U.next),X=fc(X,X.next),Uo(U,u,f,v,M,D,0),void Uo(X,u,f,v,M,D,0)}W=W.next}U=U.next}while(U!==h)}function ml(h,u){let f=h.x-u.x;return f===0&&(f=h.y-u.y,f===0)&&(f=(h.next.y-h.y)/(h.next.x-h.x)-(u.next.y-u.y)/(u.next.x-u.x)),f}function pm(h,u){const f=function(M,D){let U=D;const W=M.x,X=M.y;let re,de=-1/0;if(O(M,U))return U;do{if(O(M,U.next))return U.next;if(X<=U.y&&X>=U.next.y&&U.next.y!==U.y){const et=U.x+(X-U.y)*(U.next.x-U.x)/(U.next.y-U.y);if(et<=W&&et>de&&(de=et,re=U.x<U.next.x?U:U.next,et===W))return re}U=U.next}while(U!==D);if(!re)return null;const _e=re,Re=re.x,ze=re.y;let Ge=1/0;U=re;do{if(W>=U.x&&U.x>=Re&&W!==U.x&&Nl(X<ze?W:de,X,Re,ze,X<ze?de:W,X,U.x,U.y)){const et=Math.abs(X-U.y)/(W-U.x);Ae(U,M)&&(et<Ge||et===Ge&&(U.x>re.x||U.x===re.x&&Ka(re,U)))&&(re=U,Ge=et)}U=U.next}while(U!==_e);return re}(h,u);if(!f)return u;const v=Ce(f,h);return fc(v,v.next),fc(f,f.next)}function Ka(h,u){return y(h.prev,h,u.prev)<0&&y(u.next,h,h.next)<0}function ep(h,u,f,v,M){return(h=1431655765&((h=858993459&((h=252645135&((h=16711935&((h=(h-f)*M|0)|h<<8))|h<<4))|h<<2))|h<<1))|(u=1431655765&((u=858993459&((u=252645135&((u=16711935&((u=(u-v)*M|0)|u<<8))|u<<4))|u<<2))|u<<1))<<1}function tp(h){let u=h,f=h;do(u.x<f.x||u.x===f.x&&u.y<f.y)&&(f=u),u=u.next;while(u!==h);return f}function Nl(h,u,f,v,M,D,U,W){return(M-U)*(u-W)>=(h-U)*(D-W)&&(h-U)*(v-W)>=(f-U)*(u-W)&&(f-U)*(D-W)>=(M-U)*(v-W)}function ih(h,u,f,v,M,D,U,W){return!(h===U&&u===W)&&Nl(h,u,f,v,M,D,U,W)}function A(h,u){return h.next.i!==u.i&&h.prev.i!==u.i&&!function(f,v){let M=f;do{if(M.i!==f.i&&M.next.i!==f.i&&M.i!==v.i&&M.next.i!==v.i&&B(M,M.next,f,v))return!0;M=M.next}while(M!==f);return!1}(h,u)&&(Ae(h,u)&&Ae(u,h)&&function(f,v){let M=f,D=!1;const U=(f.x+v.x)/2,W=(f.y+v.y)/2;do M.y>W!=M.next.y>W&&M.next.y!==M.y&&U<(M.next.x-M.x)*(W-M.y)/(M.next.y-M.y)+M.x&&(D=!D),M=M.next;while(M!==f);return D}(h,u)&&(y(h.prev,h,u.prev)||y(h,u.prev,u))||O(h,u)&&y(h.prev,h,h.next)>0&&y(u.prev,u,u.next)>0)}function y(h,u,f){return(u.y-h.y)*(f.x-u.x)-(u.x-h.x)*(f.y-u.y)}function O(h,u){return h.x===u.x&&h.y===u.y}function B(h,u,f,v){const M=Z(y(h,u,f)),D=Z(y(h,u,v)),U=Z(y(f,v,h)),W=Z(y(f,v,u));return M!==D&&U!==W||!(M!==0||!R(h,f,u))||!(D!==0||!R(h,v,u))||!(U!==0||!R(f,h,v))||!(W!==0||!R(f,u,v))}function R(h,u,f){return u.x<=Math.max(h.x,f.x)&&u.x>=Math.min(h.x,f.x)&&u.y<=Math.max(h.y,f.y)&&u.y>=Math.min(h.y,f.y)}function Z(h){return h>0?1:h<0?-1:0}function Ae(h,u){return y(h.prev,h,h.next)<0?y(h,u,h.next)>=0&&y(h,h.prev,u)>=0:y(h,u,h.prev)<0||y(h,h.next,u)<0}function Ce(h,u){const f=yt(h.i,h.x,h.y),v=yt(u.i,u.x,u.y),M=h.next,D=u.prev;return h.next=u,u.prev=h,f.next=M,M.prev=f,v.next=f,f.prev=v,D.next=v,v.prev=D,v}function Te(h,u,f,v){const M=yt(h,u,f);return v?(M.next=v.next,M.prev=v,v.next.prev=M,v.next=M):(M.prev=M,M.next=M),M}function je(h){h.next.prev=h.prev,h.prev.next=h.next,h.prevZ&&(h.prevZ.nextZ=h.nextZ),h.nextZ&&(h.nextZ.prevZ=h.prevZ)}function yt(h,u,f){return{i:h,x:u,y:f,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class Mt{constructor(u,f){if(f>u)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=u,this._minGranularity=f}getGranularityForZoomLevel(u){return Math.max(Math.floor(this._baseZoomGranularity/(1<<u)),this._minGranularity,1)}}class en{constructor(u){this.fill=u.fill,this.line=u.line,this.tile=u.tile,this.stencil=u.stencil,this.circle=u.circle}}en.noSubdivision=new en({fill:new Mt(0,0),line:new Mt(0,0),tile:new Mt(0,0),stencil:new Mt(0,0),circle:1}),hr("SubdivisionGranularityExpression",Mt),hr("SubdivisionGranularitySetting",en);const Qt=-32768,wn=32767;class Ln{constructor(u,f){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=u,this._granularityCellSize=at/u,this._canonical=f}_getKey(u,f){return(u+=32768)<<16|(f+=32768)<<0}_vertexToIndex(u,f){if(u<-32768||f<-32768||u>32767||f>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const v=0|Math.round(u),M=0|Math.round(f),D=this._getKey(v,M);if(this._vertexDictionary.has(D))return this._vertexDictionary.get(D);const U=this._vertexBuffer.length/2;return this._vertexDictionary.set(D,U),this._vertexBuffer.push(v,M),U}_subdivideTrianglesScanline(u){if(this._granularity<2)return function(M,D){const U=[];for(let W=0;W<D.length;W+=3){const X=D[W],re=D[W+1],de=D[W+2],_e=M[2*X],Re=M[2*X+1];(M[2*re]-_e)*(M[2*de+1]-Re)-(M[2*re+1]-Re)*(M[2*de]-_e)>0?(U.push(X),U.push(de),U.push(re)):(U.push(X),U.push(re),U.push(de))}return U}(this._vertexBuffer,u);const f=[],v=u.length;for(let M=0;M<v;M+=3){const D=[u[M+0],u[M+1],u[M+2]],U=[this._vertexBuffer[2*u[M+0]+0],this._vertexBuffer[2*u[M+0]+1],this._vertexBuffer[2*u[M+1]+0],this._vertexBuffer[2*u[M+1]+1],this._vertexBuffer[2*u[M+2]+0],this._vertexBuffer[2*u[M+2]+1]];let W=1/0,X=1/0,re=-1/0,de=-1/0;for(let et=0;et<3;et++){const At=U[2*et],Ct=U[2*et+1];W=Math.min(W,At),re=Math.max(re,At),X=Math.min(X,Ct),de=Math.max(de,Ct)}if(W===re||X===de)continue;const _e=Math.floor(W/this._granularityCellSize),Re=Math.ceil(re/this._granularityCellSize),ze=Math.floor(X/this._granularityCellSize),Ge=Math.ceil(de/this._granularityCellSize);if(_e!==Re||ze!==Ge)for(let et=ze;et<Ge;et++){const At=this._scanlineGenerateVertexRingForCellRow(et,U,D);wr(this._vertexBuffer,At,f)}else f.push(...D)}return f}_scanlineGenerateVertexRingForCellRow(u,f,v){const M=u*this._granularityCellSize,D=M+this._granularityCellSize,U=[];for(let W=0;W<3;W++){const X=f[2*W],re=f[2*W+1],de=f[2*(W+1)%6],_e=f[(2*(W+1)+1)%6],Re=f[2*(W+2)%6],ze=f[(2*(W+2)+1)%6],Ge=de-X,et=_e-re,At=Ge===0,Ct=et===0,Nt=(M-re)/et,Et=(D-re)/et,Le=Math.min(Nt,Et),lt=Math.max(Nt,Et);if(!Ct&&(Le>=1||lt<=0)||Ct&&(re<M||re>D)){_e>=M&&_e<=D&&U.push(v[(W+1)%3]);continue}!Ct&&Le>0&&U.push(this._vertexToIndex(X+Ge*Le,re+et*Le));const Ot=X+Ge*Math.max(Le,0),An=X+Ge*Math.min(lt,1);At||this._generateIntraEdgeVertices(U,X,re,de,_e,Ot,An),!Ct&&lt<1&&U.push(this._vertexToIndex(X+Ge*lt,re+et*lt)),(Ct||_e>=M&&_e<=D)&&U.push(v[(W+1)%3]),!Ct&&(_e<=M||_e>=D)&&this._generateInterEdgeVertices(U,X,re,de,_e,Re,ze,An,M,D)}return U}_generateIntraEdgeVertices(u,f,v,M,D,U,W){const X=M-f,re=D-v,de=re===0,_e=de?Math.min(f,M):Math.min(U,W),Re=de?Math.max(f,M):Math.max(U,W),ze=Math.floor(_e/this._granularityCellSize)+1,Ge=Math.ceil(Re/this._granularityCellSize)-1;if(de?f<M:U<W)for(let et=ze;et<=Ge;et++){const At=et*this._granularityCellSize;u.push(this._vertexToIndex(At,v+re*(At-f)/X))}else for(let et=Ge;et>=ze;et--){const At=et*this._granularityCellSize;u.push(this._vertexToIndex(At,v+re*(At-f)/X))}}_generateInterEdgeVertices(u,f,v,M,D,U,W,X,re,de){const _e=D-v,Re=U-M,ze=W-D,Ge=(re-D)/ze,et=(de-D)/ze,At=Math.min(Ge,et),Ct=Math.max(Ge,et),Nt=M+Re*At;let Et=Math.floor(Math.min(Nt,X)/this._granularityCellSize)+1,Le=Math.ceil(Math.max(Nt,X)/this._granularityCellSize)-1,lt=X<Nt;const Ot=ze===0;if(Ot&&(W===re||W===de))return;if(Ot||At>=1||Ct<=0){const zn=v-W,Cn=U+(f-U)*Math.min((re-W)/zn,(de-W)/zn);Et=Math.floor(Math.min(Cn,X)/this._granularityCellSize)+1,Le=Math.ceil(Math.max(Cn,X)/this._granularityCellSize)-1,lt=X<Cn}const An=_e>0?de:re;if(lt)for(let zn=Et;zn<=Le;zn++)u.push(this._vertexToIndex(zn*this._granularityCellSize,An));else for(let zn=Le;zn>=Et;zn--)u.push(this._vertexToIndex(zn*this._granularityCellSize,An))}_generateOutline(u){const f=[];for(const v of u){const M=Vn(v,this._granularity,!0),D=this._pointArrayToIndices(M),U=[];for(let W=1;W<D.length;W++)U.push(D[W-1]),U.push(D[W]);f.push(U)}return f}_handlePoles(u){let f=!1,v=!1;this._canonical&&(this._canonical.y===0&&(f=!0),this._canonical.y===(1<<this._canonical.z)-1&&(v=!0)),(f||v)&&this._fillPoles(u,f,v)}_ensureNoPoleVertices(){const u=this._vertexBuffer;for(let f=0;f<u.length;f+=2){const v=u[f+1];v===Qt&&(u[f+1]=-32767),v===wn&&(u[f+1]=32766)}}_generatePoleQuad(u,f,v,M,D,U){M>D!=(U===Qt)?(u.push(f),u.push(v),u.push(this._vertexToIndex(M,U)),u.push(v),u.push(this._vertexToIndex(D,U)),u.push(this._vertexToIndex(M,U))):(u.push(v),u.push(f),u.push(this._vertexToIndex(M,U)),u.push(this._vertexToIndex(D,U)),u.push(v),u.push(this._vertexToIndex(M,U)))}_fillPoles(u,f,v){const M=this._vertexBuffer,D=at,U=u.length;for(let W=2;W<U;W+=3){const X=u[W-2],re=u[W-1],de=u[W],_e=M[2*X],Re=M[2*X+1],ze=M[2*re],Ge=M[2*re+1],et=M[2*de],At=M[2*de+1];f&&(Re===0&&Ge===0&&this._generatePoleQuad(u,X,re,_e,ze,Qt),Ge===0&&At===0&&this._generatePoleQuad(u,re,de,ze,et,Qt),At===0&&Re===0&&this._generatePoleQuad(u,de,X,et,_e,Qt)),v&&(Re===D&&Ge===D&&this._generatePoleQuad(u,X,re,_e,ze,wn),Ge===D&&At===D&&this._generatePoleQuad(u,re,de,ze,et,wn),At===D&&Re===D&&this._generatePoleQuad(u,de,X,et,_e,wn))}}_initializeVertices(u){for(let f=0;f<u.length;f+=2)this._vertexToIndex(u[f],u[f+1])}subdividePolygonInternal(u,f){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:v,holeIndices:M}=function(W){const X=[],re=[];for(const de of W)if(de.length!==0){de!==W[0]&&X.push(re.length/2);for(let _e=0;_e<de.length;_e++)re.push(de[_e].x),re.push(de[_e].y)}return{flattened:re,holeIndices:X}}(u);let D;this._initializeVertices(v);try{const W=function(re,de,_e=2){const Re=de&&de.length,ze=Re?de[0]*_e:re.length;let Ge=bi(re,0,ze,_e,!0);const et=[];if(!Ge||Ge.next===Ge.prev)return et;let At,Ct,Nt;if(Re&&(Ge=function(Et,Le,lt,Ot){const An=[];for(let zn=0,Cn=Le.length;zn<Cn;zn++){const fn=bi(Et,Le[zn]*Ot,zn<Cn-1?Le[zn+1]*Ot:Et.length,Ot,!1);fn===fn.next&&(fn.steiner=!0),An.push(tp(fn))}An.sort(ml);for(let zn=0;zn<An.length;zn++)lt=pm(An[zn],lt);return lt}(re,de,Ge,_e)),re.length>80*_e){At=1/0,Ct=1/0;let Et=-1/0,Le=-1/0;for(let lt=_e;lt<ze;lt+=_e){const Ot=re[lt],An=re[lt+1];Ot<At&&(At=Ot),An<Ct&&(Ct=An),Ot>Et&&(Et=Ot),An>Le&&(Le=An)}Nt=Math.max(Et-At,Le-Ct),Nt=Nt!==0?32767/Nt:0}return Uo(Ge,et,_e,At,Ct,Nt,0),et}(v,M),X=this._convertIndices(v,W);D=this._subdivideTrianglesScanline(X)}catch(W){console.error(W)}let U=[];return f&&(U=this._generateOutline(u)),this._ensureNoPoleVertices(),this._handlePoles(D),{verticesFlattened:this._vertexBuffer,indicesTriangles:D,indicesLineList:U}}_convertIndices(u,f){const v=[];for(let M=0;M<f.length;M++)v.push(this._vertexToIndex(u[2*f[M]],u[2*f[M]+1]));return v}_pointArrayToIndices(u){const f=[];for(let v=0;v<u.length;v++){const M=u[v];f.push(this._vertexToIndex(M.x,M.y))}return f}}function sr(h,u,f,v=!0){return new Ln(f,u).subdividePolygonInternal(h,v)}function Vn(h,u,f=!1){if(!h||h.length<1)return[];if(h.length<2)return[];const v=h[0],M=h[h.length-1],D=f&&(v.x!==M.x||v.y!==M.y);if(u<2)return D?[...h,h[0]]:[...h];const U=Math.floor(at/u),W=[];W.push(new P(h[0].x,h[0].y));const X=h.length,re=D?X:X-1;for(let de=0;de<re;de++){const _e=h[de],Re=de<X-1?h[de+1]:h[0],ze=_e.x,Ge=_e.y,et=Re.x,At=Re.y,Ct=ze!==et,Nt=Ge!==At;if(!Ct&&!Nt)continue;const Et=et-ze,Le=At-Ge,lt=Math.abs(Et),Ot=Math.abs(Le);let An=ze,zn=Ge;for(;;){const fn=Et>0?(Math.floor(An/U)+1)*U:(Math.ceil(An/U)-1)*U,jn=Le>0?(Math.floor(zn/U)+1)*U:(Math.ceil(zn/U)-1)*U,Wn=Math.abs(An-fn),cr=Math.abs(zn-jn),kn=Math.abs(An-et),jr=Math.abs(zn-At),mi=Ct?Wn/lt:Number.POSITIVE_INFINITY,ci=Nt?cr/Ot:Number.POSITIVE_INFINITY;if((kn<=Wn||!Ct)&&(jr<=cr||!Nt))break;if(mi<ci&&Ct||!Nt){An=fn,zn+=Le*mi;const Zr=new P(An,Math.round(zn));W[W.length-1].x===Zr.x&&W[W.length-1].y===Zr.y||W.push(Zr)}else{An+=Et*ci,zn=jn;const Zr=new P(Math.round(An),zn);W[W.length-1].x===Zr.x&&W[W.length-1].y===Zr.y||W.push(Zr)}}const Cn=new P(et,At);W[W.length-1].x===Cn.x&&W[W.length-1].y===Cn.y||W.push(Cn)}return W}function wr(h,u,f){if(u.length===0)throw new Error("Subdivision vertex ring is empty.");let v=0,M=h[2*u[0]];for(let X=1;X<u.length;X++){const re=h[2*u[X]];re<M&&(M=re,v=X)}const D=u.length;let U=v,W=(U+1)%D;for(;;){const X=U-1>=0?U-1:D-1,re=(W+1)%D,de=h[2*u[X]],_e=h[2*u[re]],Re=h[2*u[U]],ze=h[2*u[U]+1],Ge=h[2*u[W]+1];let et=!1;if(de<_e)et=!0;else if(de>_e)et=!1;else{const At=Ge-ze,Ct=-(h[2*u[W]]-Re),Nt=ze<Ge?1:-1;((de-Re)*At+(h[2*u[X]+1]-ze)*Ct)*Nt>((_e-Re)*At+(h[2*u[re]+1]-ze)*Ct)*Nt&&(et=!0)}if(et){const At=u[X],Ct=u[U],Nt=u[W];At!==Ct&&At!==Nt&&Ct!==Nt&&f.push(Nt,Ct,At),U--,U<0&&(U=D-1)}else{const At=u[re],Ct=u[U],Nt=u[W];At!==Ct&&At!==Nt&&Ct!==Nt&&f.push(Nt,Ct,At),W++,W>=D&&(W=0)}if(X===re)break}}function yr(h,u,f,v,M,D,U,W,X){const re=M.length/2,de=U&&W&&X;if(re<pr.MAX_VERTEX_ARRAY_LENGTH){const _e=u.prepareSegment(re,f,v),Re=_e.vertexLength;for(let et=0;et<D.length;et+=3)v.emplaceBack(Re+D[et],Re+D[et+1],Re+D[et+2]);let ze,Ge;_e.vertexLength+=re,_e.primitiveLength+=D.length/3,de&&(Ge=U.prepareSegment(re,f,W),ze=Ge.vertexLength,Ge.vertexLength+=re);for(let et=0;et<M.length;et+=2)h(M[et],M[et+1]);if(de)for(let et=0;et<X.length;et++){const At=X[et];for(let Ct=1;Ct<At.length;Ct+=2)W.emplaceBack(ze+At[Ct-1],ze+At[Ct]);Ge.primitiveLength+=At.length/2}}else(function(_e,Re,ze,Ge,et,At){const Ct=[];for(let Ot=0;Ot<Ge.length/2;Ot++)Ct.push(-1);const Nt={count:0};let Et=0,Le=_e.getOrCreateLatestSegment(Re,ze),lt=Le.vertexLength;for(let Ot=2;Ot<et.length;Ot+=3){const An=et[Ot-2],zn=et[Ot-1],Cn=et[Ot];let fn=Ct[An]<Et,jn=Ct[zn]<Et,Wn=Ct[Cn]<Et;Le.vertexLength+((fn?1:0)+(jn?1:0)+(Wn?1:0))>pr.MAX_VERTEX_ARRAY_LENGTH&&(Le=_e.createNewSegment(Re,ze),Et=Nt.count,fn=!0,jn=!0,Wn=!0,lt=0);const cr=Or(Ct,Ge,At,Nt,An,fn,Le),kn=Or(Ct,Ge,At,Nt,zn,jn,Le),jr=Or(Ct,Ge,At,Nt,Cn,Wn,Le);ze.emplaceBack(lt+cr-Et,lt+kn-Et,lt+jr-Et),Le.primitiveLength++}})(u,f,v,M,D,h),de&&function(_e,Re,ze,Ge,et,At){const Ct=[];for(let Ot=0;Ot<Ge.length/2;Ot++)Ct.push(-1);const Nt={count:0};let Et=0,Le=_e.getOrCreateLatestSegment(Re,ze),lt=Le.vertexLength;for(let Ot=0;Ot<et.length;Ot++){const An=et[Ot];for(let zn=1;zn<et[Ot].length;zn+=2){const Cn=An[zn-1],fn=An[zn];let jn=Ct[Cn]<Et,Wn=Ct[fn]<Et;Le.vertexLength+((jn?1:0)+(Wn?1:0))>pr.MAX_VERTEX_ARRAY_LENGTH&&(Le=_e.createNewSegment(Re,ze),Et=Nt.count,jn=!0,Wn=!0,lt=0);const cr=Or(Ct,Ge,At,Nt,Cn,jn,Le),kn=Or(Ct,Ge,At,Nt,fn,Wn,Le);ze.emplaceBack(lt+cr-Et,lt+kn-Et),Le.primitiveLength++}}}(U,f,W,M,X,h),u.forceNewSegmentOnNextPrepare(),U==null||U.forceNewSegmentOnNextPrepare()}function Or(h,u,f,v,M,D,U){if(D){const W=v.count;return f(u[2*M],u[2*M+1]),h[M]=v.count,v.count++,U.vertexLength++,W}return h[M]}class ni{constructor(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(f=>f.id),this.index=u.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new vt,this.indexArray=new yn,this.indexArray2=new In,this.programConfigurations=new $s(u.layers,u.zoom),this.segments=new pr,this.segments2=new pr,this.stateDependentLayerIds=this.layers.filter(f=>f.isStateDependent()).map(f=>f.id)}populate(u,f,v){this.hasPattern=Td("fill",this.layers,f);const M=this.layers[0].layout.get("fill-sort-key"),D=!M.isConstant(),U=[];for(const{feature:W,id:X,index:re,sourceLayerIndex:de}of u){const _e=this.layers[0]._featureFilter.needGeometry,Re=hc(W,_e);if(!this.layers[0]._featureFilter.filter(new Fo(this.zoom),Re,v))continue;const ze=D?M.evaluate(Re,{},v,f.availableImages):void 0,Ge={id:X,properties:W.properties,type:W.type,sourceLayerIndex:de,index:re,geometry:_e?Re.geometry:dc(W),patterns:{},sortKey:ze};U.push(Ge)}D&&U.sort((W,X)=>W.sortKey-X.sortKey);for(const W of U){const{geometry:X,index:re,sourceLayerIndex:de}=W;if(this.hasPattern){const _e=Dc("fill",this.layers,W,this.zoom,f);this.patternFeatures.push(_e)}else this.addFeature(W,X,re,v,{},f.subdivisionGranularity);f.featureIndex.insert(u[re].feature,X,re,de,this.index)}}update(u,f,v){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,f,this.stateDependentLayers,v)}addFeatures(u,f,v){for(const M of this.patternFeatures)this.addFeature(M,M.geometry,M.index,f,v,u.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,_f),this.indexBuffer=u.createIndexBuffer(this.indexArray),this.indexBuffer2=u.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(u,f,v,M,D,U){for(const W of xl(f,500)){const X=sr(W,M,U.fill.getGranularityForZoomLevel(M.z)),re=this.layoutVertexArray;yr((de,_e)=>{re.emplaceBack(de,_e)},this.segments,this.layoutVertexArray,this.indexArray,X.verticesFlattened,X.indicesTriangles,this.segments2,this.indexArray2,X.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,v,D,M)}}let zr,Hi;hr("FillBucket",ni,{omit:["layers","patternFeatures"]});var zo={get paint(){return Hi=Hi||new iu({"fill-antialias":new Pr(Oe.paint_fill["fill-antialias"]),"fill-opacity":new Hr(Oe.paint_fill["fill-opacity"]),"fill-color":new Hr(Oe.paint_fill["fill-color"]),"fill-outline-color":new Hr(Oe.paint_fill["fill-outline-color"]),"fill-translate":new Pr(Oe.paint_fill["fill-translate"]),"fill-translate-anchor":new Pr(Oe.paint_fill["fill-translate-anchor"]),"fill-pattern":new UA(Oe.paint_fill["fill-pattern"])})},get layout(){return zr=zr||new iu({"fill-sort-key":new Hr(Oe.layout_fill["fill-sort-key"])})}};class Ya extends pA{constructor(u){super(u,zo)}recalculate(u,f){super.recalculate(u,f);const v=this.paint._values["fill-outline-color"];v.value.kind==="constant"&&v.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(u){return new ni(u)}queryRadius(){return Id(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:u,geometry:f,transform:v,pixelsToTileUnits:M}){return CA(pf(u,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-v.bearingInRadians,M),f)}isTileClipped(){return!0}}const ia=qs([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Ca=qs([{name:"a_centroid",components:2,type:"Int16"}],4),{members:$a}=ia;var _a,du,Da,Ra,as,yi,ps,js={};function ca(){if(du)return _a;du=1;var h=E();function u(M,D,U,W,X){this.properties={},this.extent=U,this.type=0,this._pbf=M,this._geometry=-1,this._keys=W,this._values=X,M.readFields(f,this,D)}function f(M,D,U){M==1?D.id=U.readVarint():M==2?function(W,X){for(var re=W.readVarint()+W.pos;W.pos<re;){var de=X._keys[W.readVarint()],_e=X._values[W.readVarint()];X.properties[de]=_e}}(U,D):M==3?D.type=U.readVarint():M==4&&(D._geometry=U.pos)}function v(M){for(var D,U,W=0,X=0,re=M.length,de=re-1;X<re;de=X++)W+=((U=M[de]).x-(D=M[X]).x)*(D.y+U.y);return W}return _a=u,u.types=["Unknown","Point","LineString","Polygon"],u.prototype.loadGeometry=function(){var M=this._pbf;M.pos=this._geometry;for(var D,U=M.readVarint()+M.pos,W=1,X=0,re=0,de=0,_e=[];M.pos<U;){if(X<=0){var Re=M.readVarint();W=7&Re,X=Re>>3}if(X--,W===1||W===2)re+=M.readSVarint(),de+=M.readSVarint(),W===1&&(D&&_e.push(D),D=[]),D.push(new h(re,de));else{if(W!==7)throw new Error("unknown command "+W);D&&D.push(D[0].clone())}}return D&&_e.push(D),_e},u.prototype.bbox=function(){var M=this._pbf;M.pos=this._geometry;for(var D=M.readVarint()+M.pos,U=1,W=0,X=0,re=0,de=1/0,_e=-1/0,Re=1/0,ze=-1/0;M.pos<D;){if(W<=0){var Ge=M.readVarint();U=7&Ge,W=Ge>>3}if(W--,U===1||U===2)(X+=M.readSVarint())<de&&(de=X),X>_e&&(_e=X),(re+=M.readSVarint())<Re&&(Re=re),re>ze&&(ze=re);else if(U!==7)throw new Error("unknown command "+U)}return[de,Re,_e,ze]},u.prototype.toGeoJSON=function(M,D,U){var W,X,re=this.extent*Math.pow(2,U),de=this.extent*M,_e=this.extent*D,Re=this.loadGeometry(),ze=u.types[this.type];function Ge(Ct){for(var Nt=0;Nt<Ct.length;Nt++){var Et=Ct[Nt];Ct[Nt]=[360*(Et.x+de)/re-180,360/Math.PI*Math.atan(Math.exp((180-360*(Et.y+_e)/re)*Math.PI/180))-90]}}switch(this.type){case 1:var et=[];for(W=0;W<Re.length;W++)et[W]=Re[W][0];Ge(Re=et);break;case 2:for(W=0;W<Re.length;W++)Ge(Re[W]);break;case 3:for(Re=function(Ct){var Nt=Ct.length;if(Nt<=1)return[Ct];for(var Et,Le,lt=[],Ot=0;Ot<Nt;Ot++){var An=v(Ct[Ot]);An!==0&&(Le===void 0&&(Le=An<0),Le===An<0?(Et&&lt.push(Et),Et=[Ct[Ot]]):Et.push(Ct[Ot]))}return Et&&lt.push(Et),lt}(Re),W=0;W<Re.length;W++)for(X=0;X<Re[W].length;X++)Ge(Re[W][X])}Re.length===1?Re=Re[0]:ze="Multi"+ze;var At={type:"Feature",geometry:{type:ze,coordinates:Re},properties:this.properties};return"id"in this&&(At.id=this.id),At},_a}function Es(){if(Ra)return Da;Ra=1;var h=ca();function u(v,M){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=v,this._keys=[],this._values=[],this._features=[],v.readFields(f,this,M),this.length=this._features.length}function f(v,M,D){v===15?M.version=D.readVarint():v===1?M.name=D.readString():v===5?M.extent=D.readVarint():v===2?M._features.push(D.pos):v===3?M._keys.push(D.readString()):v===4&&M._values.push(function(U){for(var W=null,X=U.readVarint()+U.pos;U.pos<X;){var re=U.readVarint()>>3;W=re===1?U.readString():re===2?U.readFloat():re===3?U.readDouble():re===4?U.readVarint64():re===5?U.readVarint():re===6?U.readSVarint():re===7?U.readBoolean():null}return W}(D))}return Da=u,u.prototype.feature=function(v){if(v<0||v>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[v];var M=this._pbf.readVarint()+this._pbf.pos;return new h(this._pbf,M,this.extent,this._keys,this._values)},Da}function Iu(){return ps||(ps=1,js.VectorTile=function(){if(yi)return as;yi=1;var h=Es();function u(f,v,M){if(f===3){var D=new h(M,M.readVarint()+M.pos);D.length&&(v[D.name]=D)}}return as=function(f,v){this.layers=f.readFields(u,{},v)},as}(),js.VectorTileFeature=ca(),js.VectorTileLayer=Es()),js}var Co=d(Iu());const Kh=Co.VectorTileFeature.types,Wl=Math.pow(2,13);function Xu(h,u,f,v,M,D,U,W){h.emplaceBack(u,f,2*Math.floor(v*Wl)+U,M*Wl*2,D*Wl*2,Math.round(W))}class pc{constructor(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(f=>f.id),this.index=u.index,this.hasPattern=!1,this.layoutVertexArray=new Bt,this.centroidVertexArray=new ut,this.indexArray=new yn,this.programConfigurations=new $s(u.layers,u.zoom),this.segments=new pr,this.stateDependentLayerIds=this.layers.filter(f=>f.isStateDependent()).map(f=>f.id)}populate(u,f,v){this.features=[],this.hasPattern=Td("fill-extrusion",this.layers,f);for(const{feature:M,id:D,index:U,sourceLayerIndex:W}of u){const X=this.layers[0]._featureFilter.needGeometry,re=hc(M,X);if(!this.layers[0]._featureFilter.filter(new Fo(this.zoom),re,v))continue;const de={id:D,sourceLayerIndex:W,index:U,geometry:X?re.geometry:dc(M),properties:M.properties,type:M.type,patterns:{}};this.hasPattern?this.features.push(Dc("fill-extrusion",this.layers,de,this.zoom,f)):this.addFeature(de,de.geometry,U,v,{},f.subdivisionGranularity),f.featureIndex.insert(M,de.geometry,U,W,this.index,!0)}}addFeatures(u,f,v){for(const M of this.features){const{geometry:D}=M;this.addFeature(M,D,M.index,f,v,u.subdivisionGranularity)}}update(u,f,v){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,f,this.stateDependentLayers,v)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,$a),this.centroidVertexBuffer=u.createVertexBuffer(this.centroidVertexArray,Ca.members,!0),this.indexBuffer=u.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(u,f,v,M,D,U){for(const W of xl(f,500)){const X={x:0,y:0,sampleCount:0},re=this.layoutVertexArray.length;this.processPolygon(X,M,u,W,U);const de=this.layoutVertexArray.length-re,_e=Math.floor(X.x/X.sampleCount),Re=Math.floor(X.y/X.sampleCount);for(let ze=0;ze<de;ze++)this.centroidVertexArray.emplaceBack(_e,Re)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,v,D,M)}processPolygon(u,f,v,M,D){if(M.length<1||bf(M[0]))return;for(const _e of M)_e.length!==0&&gl(u,_e);const U={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},W=D.fill.getGranularityForZoomLevel(f.z),X=Kh[v.type]==="Polygon";for(const _e of M){if(_e.length===0||bf(_e))continue;const Re=Vn(_e,W,X);this._generateSideFaces(Re,U)}if(!X)return;const re=sr(M,f,W,!1),de=this.layoutVertexArray;yr((_e,Re)=>{Xu(de,_e,Re,0,0,1,1,0)},this.segments,this.layoutVertexArray,this.indexArray,re.verticesFlattened,re.indicesTriangles)}_generateSideFaces(u,f){let v=0;for(let M=1;M<u.length;M++){const D=u[M],U=u[M-1];if(Ol(D,U))continue;f.segment.vertexLength+4>pr.MAX_VERTEX_ARRAY_LENGTH&&(f.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const W=D.sub(U)._perp()._unit(),X=U.dist(D);v+X>32768&&(v=0),Xu(this.layoutVertexArray,D.x,D.y,W.x,W.y,0,0,v),Xu(this.layoutVertexArray,D.x,D.y,W.x,W.y,0,1,v),v+=X,Xu(this.layoutVertexArray,U.x,U.y,W.x,W.y,0,0,v),Xu(this.layoutVertexArray,U.x,U.y,W.x,W.y,0,1,v);const re=f.segment.vertexLength;this.indexArray.emplaceBack(re,re+2,re+1),this.indexArray.emplaceBack(re+1,re+2,re+3),f.segment.vertexLength+=4,f.segment.primitiveLength+=2}}}function gl(h,u){for(let f=0;f<u.length;f++){const v=u[f];f===u.length-1&&u[0].x===v.x&&u[0].y===v.y||(h.x+=v.x,h.y+=v.y,h.sampleCount++)}}function Ol(h,u){return h.x===u.x&&(h.x<0||h.x>at)||h.y===u.y&&(h.y<0||h.y>at)}function bf(h){return h.every(u=>u.x<0)||h.every(u=>u.x>at)||h.every(u=>u.y<0)||h.every(u=>u.y>at)}let xf;hr("FillExtrusionBucket",pc,{omit:["layers","features"]});var Dh={get paint(){return xf=xf||new iu({"fill-extrusion-opacity":new Pr(Oe["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Hr(Oe["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Pr(Oe["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Pr(Oe["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new UA(Oe["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Hr(Oe["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Hr(Oe["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Pr(Oe["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class $m extends pA{constructor(u){super(u,Dh)}createBucket(u){return new pc(u)}queryRadius(){return Id(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:u,feature:f,featureState:v,geometry:M,transform:D,pixelsToTileUnits:U,pixelPosMatrix:W}){const X=pf(u,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-D.bearingInRadians,U),re=this.paint.get("fill-extrusion-height").evaluate(f,v),de=this.paint.get("fill-extrusion-base").evaluate(f,v),_e=function(ze,Ge,et){const At=[];for(const Ct of ze){const Nt=[Ct.x,Ct.y,0,1];me(Nt,Nt,Ge),At.push(new P(Nt[0]/Nt[3],Nt[1]/Nt[3]))}return At}(X,W),Re=function(ze,Ge,et,At){const Ct=[],Nt=[],Et=At[8]*Ge,Le=At[9]*Ge,lt=At[10]*Ge,Ot=At[11]*Ge,An=At[8]*et,zn=At[9]*et,Cn=At[10]*et,fn=At[11]*et;for(const jn of ze){const Wn=[],cr=[];for(const kn of jn){const jr=kn.x,mi=kn.y,ci=At[0]*jr+At[4]*mi+At[12],Zr=At[1]*jr+At[5]*mi+At[13],jo=At[2]*jr+At[6]*mi+At[14],al=At[3]*jr+At[7]*mi+At[15],hu=jo+lt,bA=al+Ot,od=ci+An,gc=Zr+zn,tA=jo+Cn,Va=al+fn,ku=new P((ci+Et)/bA,(Zr+Le)/bA);ku.z=hu/bA,Wn.push(ku);const nA=new P(od/Va,gc/Va);nA.z=tA/Va,cr.push(nA)}Ct.push(Wn),Nt.push(cr)}return[Ct,Nt]}(M,de,re,W);return function(ze,Ge,et){let At=1/0;CA(et,Ge)&&(At=Rh(et,Ge[0]));for(let Ct=0;Ct<Ge.length;Ct++){const Nt=Ge[Ct],Et=ze[Ct];for(let Le=0;Le<Nt.length-1;Le++){const lt=Nt[Le],Ot=[lt,Nt[Le+1],Et[Le+1],Et[Le],lt];Vf(et,Ot)&&(At=Math.min(At,Rh(et,Ot)))}}return At!==1/0&&At}(Re[0],Re[1],_e)}}function np(h,u){return h.x*u.x+h.y*u.y}function Rh(h,u){if(h.length===1){let f=0;const v=u[f++];let M;for(;!M||v.equals(M);)if(M=u[f++],!M)return 1/0;for(;f<u.length;f++){const D=u[f],U=h[0],W=M.sub(v),X=D.sub(v),re=U.sub(v),de=np(W,W),_e=np(W,X),Re=np(X,X),ze=np(re,W),Ge=np(re,X),et=de*Re-_e*_e,At=(Re*ze-_e*Ge)/et,Ct=(de*Ge-_e*ze)/et,Nt=v.z*(1-At-Ct)+M.z*At+D.z*Ct;if(isFinite(Nt))return Nt}return 1/0}{let f=1/0;for(const v of u)f=Math.min(f,v.z);return f}}const Vm=qs([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:wf}=Vm,WA=qs([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:mm}=WA,Q0=Co.VectorTileFeature.types,Hm=Math.cos(Math.PI/180*37.5),Pp=Math.pow(2,14)/.5;class Ju{constructor(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(f=>f.id),this.index=u.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(f=>{this.gradients[f.id]={}}),this.layoutVertexArray=new kt,this.layoutVertexArray2=new Rt,this.indexArray=new yn,this.programConfigurations=new $s(u.layers,u.zoom),this.segments=new pr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(f=>f.isStateDependent()).map(f=>f.id)}populate(u,f,v){this.hasPattern=Td("line",this.layers,f);const M=this.layers[0].layout.get("line-sort-key"),D=!M.isConstant(),U=[];for(const{feature:W,id:X,index:re,sourceLayerIndex:de}of u){const _e=this.layers[0]._featureFilter.needGeometry,Re=hc(W,_e);if(!this.layers[0]._featureFilter.filter(new Fo(this.zoom),Re,v))continue;const ze=D?M.evaluate(Re,{},v):void 0,Ge={id:X,properties:W.properties,type:W.type,sourceLayerIndex:de,index:re,geometry:_e?Re.geometry:dc(W),patterns:{},sortKey:ze};U.push(Ge)}D&&U.sort((W,X)=>W.sortKey-X.sortKey);for(const W of U){const{geometry:X,index:re,sourceLayerIndex:de}=W;if(this.hasPattern){const _e=Dc("line",this.layers,W,this.zoom,f);this.patternFeatures.push(_e)}else this.addFeature(W,X,re,v,{},f.subdivisionGranularity);f.featureIndex.insert(u[re].feature,X,re,de,this.index)}}update(u,f,v){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,f,this.stateDependentLayers,v)}addFeatures(u,f,v){for(const M of this.patternFeatures)this.addFeature(M,M.geometry,M.index,f,v,u.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=u.createVertexBuffer(this.layoutVertexArray2,mm)),this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,wf),this.indexBuffer=u.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(u){if(u.properties&&Object.prototype.hasOwnProperty.call(u.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(u.properties,"mapbox_clip_end"))return{start:+u.properties.mapbox_clip_start,end:+u.properties.mapbox_clip_end}}addFeature(u,f,v,M,D,U){const W=this.layers[0].layout,X=W.get("line-join").evaluate(u,{}),re=W.get("line-cap"),de=W.get("line-miter-limit"),_e=W.get("line-round-limit");this.lineClips=this.lineFeatureClips(u);for(const Re of f)this.addLine(Re,u,X,re,de,_e,M,U);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,v,D,M)}addLine(u,f,v,M,D,U,W,X){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,u=Vn(u,W?X.line.getGranularityForZoomLevel(W.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Et=0;Et<u.length-1;Et++)this.totalDistance+=u[Et].dist(u[Et+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const re=Q0[f.type]==="Polygon";let de=u.length;for(;de>=2&&u[de-1].equals(u[de-2]);)de--;let _e=0;for(;_e<de-1&&u[_e].equals(u[_e+1]);)_e++;if(de<(re?3:2))return;v==="bevel"&&(D=1.05);const Re=this.overscaling<=16?15*at/(512*this.overscaling):0,ze=this.segments.prepareSegment(10*de,this.layoutVertexArray,this.indexArray);let Ge,et,At,Ct,Nt;this.e1=this.e2=-1,re&&(Ge=u[de-2],Nt=u[_e].sub(Ge)._unit()._perp());for(let Et=_e;Et<de;Et++){if(At=Et===de-1?re?u[_e+1]:void 0:u[Et+1],At&&u[Et].equals(At))continue;Nt&&(Ct=Nt),Ge&&(et=Ge),Ge=u[Et],Nt=At?At.sub(Ge)._unit()._perp():Ct,Ct=Ct||Nt;let Le=Ct.add(Nt);Le.x===0&&Le.y===0||Le._unit();const lt=Ct.x*Nt.x+Ct.y*Nt.y,Ot=Le.x*Nt.x+Le.y*Nt.y,An=Ot!==0?1/Ot:1/0,zn=2*Math.sqrt(2-2*Ot),Cn=Ot<Hm&&et&&At,fn=Ct.x*Nt.y-Ct.y*Nt.x>0;if(Cn&&Et>_e){const cr=Ge.dist(et);if(cr>2*Re){const kn=Ge.sub(Ge.sub(et)._mult(Re/cr)._round());this.updateDistance(et,kn),this.addCurrentVertex(kn,Ct,0,0,ze),et=kn}}const jn=et&&At;let Wn=jn?v:re?"butt":M;if(jn&&Wn==="round"&&(An<U?Wn="miter":An<=2&&(Wn="fakeround")),Wn==="miter"&&An>D&&(Wn="bevel"),Wn==="bevel"&&(An>2&&(Wn="flipbevel"),An<D&&(Wn="miter")),et&&this.updateDistance(et,Ge),Wn==="miter")Le._mult(An),this.addCurrentVertex(Ge,Le,0,0,ze);else if(Wn==="flipbevel"){if(An>100)Le=Nt.mult(-1);else{const cr=An*Ct.add(Nt).mag()/Ct.sub(Nt).mag();Le._perp()._mult(cr*(fn?-1:1))}this.addCurrentVertex(Ge,Le,0,0,ze),this.addCurrentVertex(Ge,Le.mult(-1),0,0,ze)}else if(Wn==="bevel"||Wn==="fakeround"){const cr=-Math.sqrt(An*An-1),kn=fn?cr:0,jr=fn?0:cr;if(et&&this.addCurrentVertex(Ge,Ct,kn,jr,ze),Wn==="fakeround"){const mi=Math.round(180*zn/Math.PI/20);for(let ci=1;ci<mi;ci++){let Zr=ci/mi;if(Zr!==.5){const al=Zr-.5;Zr+=Zr*al*(Zr-1)*((1.0904+lt*(lt*(3.55645-1.43519*lt)-3.2452))*al*al+(.848013+lt*(.215638*lt-1.06021)))}const jo=Nt.sub(Ct)._mult(Zr)._add(Ct)._unit()._mult(fn?-1:1);this.addHalfVertex(Ge,jo.x,jo.y,!1,fn,0,ze)}}At&&this.addCurrentVertex(Ge,Nt,-kn,-jr,ze)}else if(Wn==="butt")this.addCurrentVertex(Ge,Le,0,0,ze);else if(Wn==="square"){const cr=et?1:-1;this.addCurrentVertex(Ge,Le,cr,cr,ze)}else Wn==="round"&&(et&&(this.addCurrentVertex(Ge,Ct,0,0,ze),this.addCurrentVertex(Ge,Ct,1,1,ze,!0)),At&&(this.addCurrentVertex(Ge,Nt,-1,-1,ze,!0),this.addCurrentVertex(Ge,Nt,0,0,ze)));if(Cn&&Et<de-1){const cr=Ge.dist(At);if(cr>2*Re){const kn=Ge.add(At.sub(Ge)._mult(Re/cr)._round());this.updateDistance(Ge,kn),this.addCurrentVertex(kn,Nt,0,0,ze),Ge=kn}}}}addCurrentVertex(u,f,v,M,D,U=!1){const W=f.y*M-f.x,X=-f.y-f.x*M;this.addHalfVertex(u,f.x+f.y*v,f.y-f.x*v,U,!1,v,D),this.addHalfVertex(u,W,X,U,!0,-M,D),this.distance>Pp/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(u,f,v,M,D,U))}addHalfVertex({x:u,y:f},v,M,D,U,W,X){const re=.5*(this.lineClips?this.scaledDistance*(Pp-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((u<<1)+(D?1:0),(f<<1)+(U?1:0),Math.round(63*v)+128,Math.round(63*M)+128,1+(W===0?0:W<0?-1:1)|(63&re)<<2,re>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const de=X.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,de,this.e2),X.primitiveLength++),U?this.e2=de:this.e1=de}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(u,f){this.distance+=u.dist(f),this.updateScaledDistance()}}let Fh,td;hr("LineBucket",Ju,{omit:["layers","patternFeatures"]});var GA={get paint(){return td=td||new iu({"line-opacity":new Hr(Oe.paint_line["line-opacity"]),"line-color":new Hr(Oe.paint_line["line-color"]),"line-translate":new Pr(Oe.paint_line["line-translate"]),"line-translate-anchor":new Pr(Oe.paint_line["line-translate-anchor"]),"line-width":new Hr(Oe.paint_line["line-width"]),"line-gap-width":new Hr(Oe.paint_line["line-gap-width"]),"line-offset":new Hr(Oe.paint_line["line-offset"]),"line-blur":new Hr(Oe.paint_line["line-blur"]),"line-dasharray":new Mu(Oe.paint_line["line-dasharray"]),"line-pattern":new UA(Oe.paint_line["line-pattern"]),"line-gradient":new fl(Oe.paint_line["line-gradient"])})},get layout(){return Fh=Fh||new iu({"line-cap":new Pr(Oe.layout_line["line-cap"]),"line-join":new Hr(Oe.layout_line["line-join"]),"line-miter-limit":new Pr(Oe.layout_line["line-miter-limit"]),"line-round-limit":new Pr(Oe.layout_line["line-round-limit"]),"line-sort-key":new Hr(Oe.layout_line["line-sort-key"])})}};class Zm extends Hr{possiblyEvaluate(u,f){return f=new Fo(Math.floor(f.zoom),{now:f.now,fadeDuration:f.fadeDuration,zoomHistory:f.zoomHistory,transition:f.transition}),super.possiblyEvaluate(u,f)}evaluate(u,f,v,M){return f=gt({},f,{zoom:Math.floor(f.zoom)}),super.evaluate(u,f,v,M)}}let Kp;class q0 extends pA{constructor(u){super(u,GA),this.gradientVersion=0,Kp||(Kp=new Zm(GA.paint.properties["line-width"].specification),Kp.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(u){if(u==="line-gradient"){const f=this.gradientExpression();this.stepInterpolant=!!function(v){return v._styleExpression!==void 0}(f)&&f._styleExpression.expression instanceof $t,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(u,f){super.recalculate(u,f),this.paint._values["line-floorwidth"]=Kp.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,u)}createBucket(u){return new Ju(u)}queryRadius(u){const f=u,v=t1(th("line-width",this,f),th("line-gap-width",this,f)),M=th("line-offset",this,f);return v/2+Math.abs(M)+Id(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:u,feature:f,featureState:v,geometry:M,transform:D,pixelsToTileUnits:U}){const W=pf(u,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-D.bearingInRadians,U),X=U/2*t1(this.paint.get("line-width").evaluate(f,v),this.paint.get("line-gap-width").evaluate(f,v)),re=this.paint.get("line-offset").evaluate(f,v);return re&&(M=function(de,_e){const Re=[];for(let ze=0;ze<de.length;ze++){const Ge=de[ze],et=[];for(let At=0;At<Ge.length;At++){const Ct=Ge[At-1],Nt=Ge[At],Et=Ge[At+1],Le=At===0?new P(0,0):Nt.sub(Ct)._unit()._perp(),lt=At===Ge.length-1?new P(0,0):Et.sub(Nt)._unit()._perp(),Ot=Le._add(lt)._unit(),An=Ot.x*lt.x+Ot.y*lt.y;An!==0&&Ot._mult(1/An),et.push(Ot._mult(_e)._add(Nt))}Re.push(et)}return Re}(M,re*U)),function(de,_e,Re){for(let ze=0;ze<_e.length;ze++){const Ge=_e[ze];if(de.length>=3){for(let et=0;et<Ge.length;et++)if(Jd(de,Ge[et]))return!0}if(pl(de,Ge,Re))return!0}return!1}(W,M,X)}isTileClipped(){return!0}}function t1(h,u){return u>0?u+2*h:h}const Mf=qs([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),n1=qs([{name:"a_projected_pos",components:3,type:"Float32"}],4);qs([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Y0=qs([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);qs([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Sf=qs([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),$0=qs([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function rp(h,u,f){return h.sections.forEach(v=>{v.text=function(M,D,U){const W=D.layout.get("text-transform").evaluate(U,{});return W==="uppercase"?M=M.toLocaleUpperCase():W==="lowercase"&&(M=M.toLocaleLowerCase()),jl.applyArabicShaping&&(M=jl.applyArabicShaping(M)),M}(v.text,u,f)}),h}qs([{name:"triangle",components:3,type:"Uint16"}]),qs([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),qs([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),qs([{type:"Float32",name:"offsetX"}]),qs([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),qs([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Dp={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var V0,gm,ym,Il=24,H0={};function r1(){return V0||(V0=1,H0.read=function(h,u,f,v,M){var D,U,W=8*M-v-1,X=(1<<W)-1,re=X>>1,de=-7,_e=f?M-1:0,Re=f?-1:1,ze=h[u+_e];for(_e+=Re,D=ze&(1<<-de)-1,ze>>=-de,de+=W;de>0;D=256*D+h[u+_e],_e+=Re,de-=8);for(U=D&(1<<-de)-1,D>>=-de,de+=v;de>0;U=256*U+h[u+_e],_e+=Re,de-=8);if(D===0)D=1-re;else{if(D===X)return U?NaN:1/0*(ze?-1:1);U+=Math.pow(2,v),D-=re}return(ze?-1:1)*U*Math.pow(2,D-v)},H0.write=function(h,u,f,v,M,D){var U,W,X,re=8*D-M-1,de=(1<<re)-1,_e=de>>1,Re=M===23?Math.pow(2,-24)-Math.pow(2,-77):0,ze=v?0:D-1,Ge=v?1:-1,et=u<0||u===0&&1/u<0?1:0;for(u=Math.abs(u),isNaN(u)||u===1/0?(W=isNaN(u)?1:0,U=de):(U=Math.floor(Math.log(u)/Math.LN2),u*(X=Math.pow(2,-U))<1&&(U--,X*=2),(u+=U+_e>=1?Re/X:Re*Math.pow(2,1-_e))*X>=2&&(U++,X/=2),U+_e>=de?(W=0,U=de):U+_e>=1?(W=(u*X-1)*Math.pow(2,M),U+=_e):(W=u*Math.pow(2,_e-1)*Math.pow(2,M),U=0));M>=8;h[f+ze]=255&W,ze+=Ge,W/=256,M-=8);for(U=U<<M|W,re+=M;re>0;h[f+ze]=255&U,ze+=Ge,U/=256,re-=8);h[f+ze-Ge]|=128*et}),H0}function Z0(){if(ym)return gm;ym=1,gm=u;var h=r1();function u(Le){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(Le)?Le:new Uint8Array(Le||0),this.pos=0,this.type=0,this.length=this.buf.length}u.Varint=0,u.Fixed64=1,u.Bytes=2,u.Fixed32=5;var f=4294967296,v=1/f,M=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");function D(Le){return Le.type===u.Bytes?Le.readVarint()+Le.pos:Le.pos+1}function U(Le,lt,Ot){return Ot?4294967296*lt+(Le>>>0):4294967296*(lt>>>0)+(Le>>>0)}function W(Le,lt,Ot){var An=lt<=16383?1:lt<=2097151?2:lt<=268435455?3:Math.floor(Math.log(lt)/(7*Math.LN2));Ot.realloc(An);for(var zn=Ot.pos-1;zn>=Le;zn--)Ot.buf[zn+An]=Ot.buf[zn]}function X(Le,lt){for(var Ot=0;Ot<Le.length;Ot++)lt.writeVarint(Le[Ot])}function re(Le,lt){for(var Ot=0;Ot<Le.length;Ot++)lt.writeSVarint(Le[Ot])}function de(Le,lt){for(var Ot=0;Ot<Le.length;Ot++)lt.writeFloat(Le[Ot])}function _e(Le,lt){for(var Ot=0;Ot<Le.length;Ot++)lt.writeDouble(Le[Ot])}function Re(Le,lt){for(var Ot=0;Ot<Le.length;Ot++)lt.writeBoolean(Le[Ot])}function ze(Le,lt){for(var Ot=0;Ot<Le.length;Ot++)lt.writeFixed32(Le[Ot])}function Ge(Le,lt){for(var Ot=0;Ot<Le.length;Ot++)lt.writeSFixed32(Le[Ot])}function et(Le,lt){for(var Ot=0;Ot<Le.length;Ot++)lt.writeFixed64(Le[Ot])}function At(Le,lt){for(var Ot=0;Ot<Le.length;Ot++)lt.writeSFixed64(Le[Ot])}function Ct(Le,lt){return(Le[lt]|Le[lt+1]<<8|Le[lt+2]<<16)+16777216*Le[lt+3]}function Nt(Le,lt,Ot){Le[Ot]=lt,Le[Ot+1]=lt>>>8,Le[Ot+2]=lt>>>16,Le[Ot+3]=lt>>>24}function Et(Le,lt){return(Le[lt]|Le[lt+1]<<8|Le[lt+2]<<16)+(Le[lt+3]<<24)}return u.prototype={destroy:function(){this.buf=null},readFields:function(Le,lt,Ot){for(Ot=Ot||this.length;this.pos<Ot;){var An=this.readVarint(),zn=An>>3,Cn=this.pos;this.type=7&An,Le(zn,lt,this),this.pos===Cn&&this.skip(An)}return lt},readMessage:function(Le,lt){return this.readFields(Le,lt,this.readVarint()+this.pos)},readFixed32:function(){var Le=Ct(this.buf,this.pos);return this.pos+=4,Le},readSFixed32:function(){var Le=Et(this.buf,this.pos);return this.pos+=4,Le},readFixed64:function(){var Le=Ct(this.buf,this.pos)+Ct(this.buf,this.pos+4)*f;return this.pos+=8,Le},readSFixed64:function(){var Le=Ct(this.buf,this.pos)+Et(this.buf,this.pos+4)*f;return this.pos+=8,Le},readFloat:function(){var Le=h.read(this.buf,this.pos,!0,23,4);return this.pos+=4,Le},readDouble:function(){var Le=h.read(this.buf,this.pos,!0,52,8);return this.pos+=8,Le},readVarint:function(Le){var lt,Ot,An=this.buf;return lt=127&(Ot=An[this.pos++]),Ot<128?lt:(lt|=(127&(Ot=An[this.pos++]))<<7,Ot<128?lt:(lt|=(127&(Ot=An[this.pos++]))<<14,Ot<128?lt:(lt|=(127&(Ot=An[this.pos++]))<<21,Ot<128?lt:function(zn,Cn,fn){var jn,Wn,cr=fn.buf;if(jn=(112&(Wn=cr[fn.pos++]))>>4,Wn<128||(jn|=(127&(Wn=cr[fn.pos++]))<<3,Wn<128)||(jn|=(127&(Wn=cr[fn.pos++]))<<10,Wn<128)||(jn|=(127&(Wn=cr[fn.pos++]))<<17,Wn<128)||(jn|=(127&(Wn=cr[fn.pos++]))<<24,Wn<128)||(jn|=(1&(Wn=cr[fn.pos++]))<<31,Wn<128))return U(zn,jn,Cn);throw new Error("Expected varint not more than 10 bytes")}(lt|=(15&(Ot=An[this.pos]))<<28,Le,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var Le=this.readVarint();return Le%2==1?(Le+1)/-2:Le/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var Le=this.readVarint()+this.pos,lt=this.pos;return this.pos=Le,Le-lt>=12&&M?function(Ot,An,zn){return M.decode(Ot.subarray(An,zn))}(this.buf,lt,Le):function(Ot,An,zn){for(var Cn="",fn=An;fn<zn;){var jn,Wn,cr,kn=Ot[fn],jr=null,mi=kn>239?4:kn>223?3:kn>191?2:1;if(fn+mi>zn)break;mi===1?kn<128&&(jr=kn):mi===2?(192&(jn=Ot[fn+1]))==128&&(jr=(31&kn)<<6|63&jn)<=127&&(jr=null):mi===3?(Wn=Ot[fn+2],(192&(jn=Ot[fn+1]))==128&&(192&Wn)==128&&((jr=(15&kn)<<12|(63&jn)<<6|63&Wn)<=2047||jr>=55296&&jr<=57343)&&(jr=null)):mi===4&&(Wn=Ot[fn+2],cr=Ot[fn+3],(192&(jn=Ot[fn+1]))==128&&(192&Wn)==128&&(192&cr)==128&&((jr=(15&kn)<<18|(63&jn)<<12|(63&Wn)<<6|63&cr)<=65535||jr>=1114112)&&(jr=null)),jr===null?(jr=65533,mi=1):jr>65535&&(jr-=65536,Cn+=String.fromCharCode(jr>>>10&1023|55296),jr=56320|1023&jr),Cn+=String.fromCharCode(jr),fn+=mi}return Cn}(this.buf,lt,Le)},readBytes:function(){var Le=this.readVarint()+this.pos,lt=this.buf.subarray(this.pos,Le);return this.pos=Le,lt},readPackedVarint:function(Le,lt){if(this.type!==u.Bytes)return Le.push(this.readVarint(lt));var Ot=D(this);for(Le=Le||[];this.pos<Ot;)Le.push(this.readVarint(lt));return Le},readPackedSVarint:function(Le){if(this.type!==u.Bytes)return Le.push(this.readSVarint());var lt=D(this);for(Le=Le||[];this.pos<lt;)Le.push(this.readSVarint());return Le},readPackedBoolean:function(Le){if(this.type!==u.Bytes)return Le.push(this.readBoolean());var lt=D(this);for(Le=Le||[];this.pos<lt;)Le.push(this.readBoolean());return Le},readPackedFloat:function(Le){if(this.type!==u.Bytes)return Le.push(this.readFloat());var lt=D(this);for(Le=Le||[];this.pos<lt;)Le.push(this.readFloat());return Le},readPackedDouble:function(Le){if(this.type!==u.Bytes)return Le.push(this.readDouble());var lt=D(this);for(Le=Le||[];this.pos<lt;)Le.push(this.readDouble());return Le},readPackedFixed32:function(Le){if(this.type!==u.Bytes)return Le.push(this.readFixed32());var lt=D(this);for(Le=Le||[];this.pos<lt;)Le.push(this.readFixed32());return Le},readPackedSFixed32:function(Le){if(this.type!==u.Bytes)return Le.push(this.readSFixed32());var lt=D(this);for(Le=Le||[];this.pos<lt;)Le.push(this.readSFixed32());return Le},readPackedFixed64:function(Le){if(this.type!==u.Bytes)return Le.push(this.readFixed64());var lt=D(this);for(Le=Le||[];this.pos<lt;)Le.push(this.readFixed64());return Le},readPackedSFixed64:function(Le){if(this.type!==u.Bytes)return Le.push(this.readSFixed64());var lt=D(this);for(Le=Le||[];this.pos<lt;)Le.push(this.readSFixed64());return Le},skip:function(Le){var lt=7&Le;if(lt===u.Varint)for(;this.buf[this.pos++]>127;);else if(lt===u.Bytes)this.pos=this.readVarint()+this.pos;else if(lt===u.Fixed32)this.pos+=4;else{if(lt!==u.Fixed64)throw new Error("Unimplemented type: "+lt);this.pos+=8}},writeTag:function(Le,lt){this.writeVarint(Le<<3|lt)},realloc:function(Le){for(var lt=this.length||16;lt<this.pos+Le;)lt*=2;if(lt!==this.length){var Ot=new Uint8Array(lt);Ot.set(this.buf),this.buf=Ot,this.length=lt}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(Le){this.realloc(4),Nt(this.buf,Le,this.pos),this.pos+=4},writeSFixed32:function(Le){this.realloc(4),Nt(this.buf,Le,this.pos),this.pos+=4},writeFixed64:function(Le){this.realloc(8),Nt(this.buf,-1&Le,this.pos),Nt(this.buf,Math.floor(Le*v),this.pos+4),this.pos+=8},writeSFixed64:function(Le){this.realloc(8),Nt(this.buf,-1&Le,this.pos),Nt(this.buf,Math.floor(Le*v),this.pos+4),this.pos+=8},writeVarint:function(Le){(Le=+Le||0)>268435455||Le<0?function(lt,Ot){var An,zn;if(lt>=0?(An=lt%4294967296|0,zn=lt/4294967296|0):(zn=~(-lt/4294967296),4294967295^(An=~(-lt%4294967296))?An=An+1|0:(An=0,zn=zn+1|0)),lt>=18446744073709552e3||lt<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");Ot.realloc(10),function(Cn,fn,jn){jn.buf[jn.pos++]=127&Cn|128,Cn>>>=7,jn.buf[jn.pos++]=127&Cn|128,Cn>>>=7,jn.buf[jn.pos++]=127&Cn|128,Cn>>>=7,jn.buf[jn.pos++]=127&Cn|128,jn.buf[jn.pos]=127&(Cn>>>=7)}(An,0,Ot),function(Cn,fn){var jn=(7&Cn)<<4;fn.buf[fn.pos++]|=jn|((Cn>>>=3)?128:0),Cn&&(fn.buf[fn.pos++]=127&Cn|((Cn>>>=7)?128:0),Cn&&(fn.buf[fn.pos++]=127&Cn|((Cn>>>=7)?128:0),Cn&&(fn.buf[fn.pos++]=127&Cn|((Cn>>>=7)?128:0),Cn&&(fn.buf[fn.pos++]=127&Cn|((Cn>>>=7)?128:0),Cn&&(fn.buf[fn.pos++]=127&Cn)))))}(zn,Ot)}(Le,this):(this.realloc(4),this.buf[this.pos++]=127&Le|(Le>127?128:0),Le<=127||(this.buf[this.pos++]=127&(Le>>>=7)|(Le>127?128:0),Le<=127||(this.buf[this.pos++]=127&(Le>>>=7)|(Le>127?128:0),Le<=127||(this.buf[this.pos++]=Le>>>7&127))))},writeSVarint:function(Le){this.writeVarint(Le<0?2*-Le-1:2*Le)},writeBoolean:function(Le){this.writeVarint(!!Le)},writeString:function(Le){Le=String(Le),this.realloc(4*Le.length),this.pos++;var lt=this.pos;this.pos=function(An,zn,Cn){for(var fn,jn,Wn=0;Wn<zn.length;Wn++){if((fn=zn.charCodeAt(Wn))>55295&&fn<57344){if(!jn){fn>56319||Wn+1===zn.length?(An[Cn++]=239,An[Cn++]=191,An[Cn++]=189):jn=fn;continue}if(fn<56320){An[Cn++]=239,An[Cn++]=191,An[Cn++]=189,jn=fn;continue}fn=jn-55296<<10|fn-56320|65536,jn=null}else jn&&(An[Cn++]=239,An[Cn++]=191,An[Cn++]=189,jn=null);fn<128?An[Cn++]=fn:(fn<2048?An[Cn++]=fn>>6|192:(fn<65536?An[Cn++]=fn>>12|224:(An[Cn++]=fn>>18|240,An[Cn++]=fn>>12&63|128),An[Cn++]=fn>>6&63|128),An[Cn++]=63&fn|128)}return Cn}(this.buf,Le,this.pos);var Ot=this.pos-lt;Ot>=128&&W(lt,Ot,this),this.pos=lt-1,this.writeVarint(Ot),this.pos+=Ot},writeFloat:function(Le){this.realloc(4),h.write(this.buf,Le,this.pos,!0,23,4),this.pos+=4},writeDouble:function(Le){this.realloc(8),h.write(this.buf,Le,this.pos,!0,52,8),this.pos+=8},writeBytes:function(Le){var lt=Le.length;this.writeVarint(lt),this.realloc(lt);for(var Ot=0;Ot<lt;Ot++)this.buf[this.pos++]=Le[Ot]},writeRawMessage:function(Le,lt){this.pos++;var Ot=this.pos;Le(lt,this);var An=this.pos-Ot;An>=128&&W(Ot,An,this),this.pos=Ot-1,this.writeVarint(An),this.pos+=An},writeMessage:function(Le,lt,Ot){this.writeTag(Le,u.Bytes),this.writeRawMessage(lt,Ot)},writePackedVarint:function(Le,lt){lt.length&&this.writeMessage(Le,X,lt)},writePackedSVarint:function(Le,lt){lt.length&&this.writeMessage(Le,re,lt)},writePackedBoolean:function(Le,lt){lt.length&&this.writeMessage(Le,Re,lt)},writePackedFloat:function(Le,lt){lt.length&&this.writeMessage(Le,de,lt)},writePackedDouble:function(Le,lt){lt.length&&this.writeMessage(Le,_e,lt)},writePackedFixed32:function(Le,lt){lt.length&&this.writeMessage(Le,ze,lt)},writePackedSFixed32:function(Le,lt){lt.length&&this.writeMessage(Le,Ge,lt)},writePackedFixed64:function(Le,lt){lt.length&&this.writeMessage(Le,et,lt)},writePackedSFixed64:function(Le,lt){lt.length&&this.writeMessage(Le,At,lt)},writeBytesField:function(Le,lt){this.writeTag(Le,u.Bytes),this.writeBytes(lt)},writeFixed32Field:function(Le,lt){this.writeTag(Le,u.Fixed32),this.writeFixed32(lt)},writeSFixed32Field:function(Le,lt){this.writeTag(Le,u.Fixed32),this.writeSFixed32(lt)},writeFixed64Field:function(Le,lt){this.writeTag(Le,u.Fixed64),this.writeFixed64(lt)},writeSFixed64Field:function(Le,lt){this.writeTag(Le,u.Fixed64),this.writeSFixed64(lt)},writeVarintField:function(Le,lt){this.writeTag(Le,u.Varint),this.writeVarint(lt)},writeSVarintField:function(Le,lt){this.writeTag(Le,u.Varint),this.writeSVarint(lt)},writeStringField:function(Le,lt){this.writeTag(Le,u.Bytes),this.writeString(lt)},writeFloatField:function(Le,lt){this.writeTag(Le,u.Fixed32),this.writeFloat(lt)},writeDoubleField:function(Le,lt){this.writeTag(Le,u.Fixed64),this.writeDouble(lt)},writeBooleanField:function(Le,lt){this.writeVarintField(Le,!!lt)}},gm}var Lh=d(Z0());const X0=3;function Rp(h,u,f){h===1&&f.readMessage(Xm,u)}function Xm(h,u,f){if(h===3){const{id:v,bitmap:M,width:D,height:U,left:W,top:X,advance:re}=f.readMessage(sl,{});u.push({id:v,bitmap:new Ph({width:D+2*X0,height:U+2*X0},M),metrics:{width:D,height:U,left:W,top:X,advance:re}})}}function sl(h,u,f){h===1?u.id=f.readVarint():h===2?u.bitmap=f.readBytes():h===3?u.width=f.readVarint():h===4?u.height=f.readVarint():h===5?u.left=f.readSVarint():h===6?u.top=f.readSVarint():h===7&&(u.advance=f.readVarint())}const sv=X0;function J0(h){let u=0,f=0;for(const U of h)u+=U.w*U.h,f=Math.max(f,U.w);h.sort((U,W)=>W.h-U.h);const v=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(u/.95)),f),h:1/0}];let M=0,D=0;for(const U of h)for(let W=v.length-1;W>=0;W--){const X=v[W];if(!(U.w>X.w||U.h>X.h)){if(U.x=X.x,U.y=X.y,D=Math.max(D,U.y+U.h),M=Math.max(M,U.x+U.w),U.w===X.w&&U.h===X.h){const re=v.pop();W<v.length&&(v[W]=re)}else U.h===X.h?(X.x+=U.w,X.w-=U.w):U.w===X.w?(X.y+=U.h,X.h-=U.h):(v.push({x:X.x+U.w,y:X.y,w:X.w-U.w,h:U.h}),X.y+=U.h,X.h-=U.h);break}}return{w:M,h:D,fill:u/(M*D)||0}}const QA=1;class eg{constructor(u,{pixelRatio:f,version:v,stretchX:M,stretchY:D,content:U,textFitWidth:W,textFitHeight:X}){this.paddedRect=u,this.pixelRatio=f,this.stretchX=M,this.stretchY=D,this.content=U,this.version=v,this.textFitWidth=W,this.textFitHeight=X}get tl(){return[this.paddedRect.x+QA,this.paddedRect.y+QA]}get br(){return[this.paddedRect.x+this.paddedRect.w-QA,this.paddedRect.y+this.paddedRect.h-QA]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*QA)/this.pixelRatio,(this.paddedRect.h-2*QA)/this.pixelRatio]}}class tg{constructor(u,f){const v={},M={};this.haveRenderCallbacks=[];const D=[];this.addImages(u,v,D),this.addImages(f,M,D);const{w:U,h:W}=J0(D),X=new cu({width:U||1,height:W||1});for(const re in u){const de=u[re],_e=v[re].paddedRect;cu.copy(de.data,X,{x:0,y:0},{x:_e.x+QA,y:_e.y+QA},de.data)}for(const re in f){const de=f[re],_e=M[re].paddedRect,Re=_e.x+QA,ze=_e.y+QA,Ge=de.data.width,et=de.data.height;cu.copy(de.data,X,{x:0,y:0},{x:Re,y:ze},de.data),cu.copy(de.data,X,{x:0,y:et-1},{x:Re,y:ze-1},{width:Ge,height:1}),cu.copy(de.data,X,{x:0,y:0},{x:Re,y:ze+et},{width:Ge,height:1}),cu.copy(de.data,X,{x:Ge-1,y:0},{x:Re-1,y:ze},{width:1,height:et}),cu.copy(de.data,X,{x:0,y:0},{x:Re+Ge,y:ze},{width:1,height:et})}this.image=X,this.iconPositions=v,this.patternPositions=M}addImages(u,f,v){for(const M in u){const D=u[M],U={x:0,y:0,w:D.data.width+2*QA,h:D.data.height+2*QA};v.push(U),f[M]=new eg(U,D),D.hasRenderCallback&&this.haveRenderCallbacks.push(M)}}patchUpdatedImages(u,f){u.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const v in u.updatedImages)this.patchUpdatedImage(this.iconPositions[v],u.getImage(v),f),this.patchUpdatedImage(this.patternPositions[v],u.getImage(v),f)}patchUpdatedImage(u,f,v){if(!u||!f||u.version===f.version)return;u.version=f.version;const[M,D]=u.tl;v.update(f.data,void 0,{x:M,y:D})}}var Uh;hr("ImagePosition",eg),hr("ImageAtlas",tg),a.ai=void 0,(Uh=a.ai||(a.ai={}))[Uh.none=0]="none",Uh[Uh.horizontal=1]="horizontal",Uh[Uh.vertical=2]="vertical",Uh[Uh.horizontalOnly=3]="horizontalOnly";const Jm=-17;class _A{constructor(){this.scale=1,this.fontStack="",this.imageName=null,this.verticalAlign="bottom"}static forText(u,f,v){const M=new _A;return M.scale=u||1,M.fontStack=f,M.verticalAlign=v||"bottom",M}static forImage(u,f){const v=new _A;return v.imageName=u,v.verticalAlign=f||"bottom",v}}class zh{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(u,f){const v=new zh;for(let M=0;M<u.sections.length;M++){const D=u.sections[M];D.image?v.addImageSection(D):v.addTextSection(D,f)}return v}length(){return this.text.length}getSection(u){return this.sections[this.sectionIndex[u]]}getSectionIndex(u){return this.sectionIndex[u]}getCharCode(u){return this.text.charCodeAt(u)}verticalizePunctuation(){this.text=function(u){let f="";for(let v=0;v<u.length;v++){const M=u.charCodeAt(v+1)||null,D=u.charCodeAt(v-1)||null;f+=M&&_s(M)&&!Dp[u[v+1]]||D&&_s(D)&&!Dp[u[v-1]]||!Dp[u[v]]?u[v]:Dp[u[v]]}return f}(this.text)}trim(){let u=0;for(let v=0;v<this.text.length&&mc[this.text.charCodeAt(v)];v++)u++;let f=this.text.length;for(let v=this.text.length-1;v>=0&&v>=u&&mc[this.text.charCodeAt(v)];v--)f--;this.text=this.text.substring(u,f),this.sectionIndex=this.sectionIndex.slice(u,f)}substring(u,f){const v=new zh;return v.text=this.text.substring(u,f),v.sectionIndex=this.sectionIndex.slice(u,f),v.sections=this.sections,v}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((u,f)=>Math.max(u,this.sections[f].scale),0)}getMaxImageSize(u){let f=0,v=0;for(let M=0;M<this.length();M++){const D=this.getSection(M);if(D.imageName){const U=u[D.imageName];if(!U)continue;const W=U.displaySize;f=Math.max(f,W[0]),v=Math.max(v,W[1])}}return{maxImageWidth:f,maxImageHeight:v}}addTextSection(u,f){this.text+=u.text,this.sections.push(_A.forText(u.scale,u.fontStack||f,u.verticalAlign));const v=this.sections.length-1;for(let M=0;M<u.text.length;++M)this.sectionIndex.push(v)}addImageSection(u){const f=u.image?u.image.name:"";if(f.length===0)return void it("Can't add FormattedSection with an empty image.");const v=this.getNextImageSectionCharCode();v?(this.text+=String.fromCharCode(v),this.sections.push(_A.forImage(f,u.verticalAlign)),this.sectionIndex.push(this.sections.length-1)):it("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function e0(h,u,f,v,M,D,U,W,X,re,de,_e,Re,ze,Ge){const et=zh.fromFeature(h,M);let At;_e===a.ai.vertical&&et.verticalizePunctuation();const{processBidirectionalText:Ct,processStyledBidirectionalText:Nt}=jl;if(Ct&&et.sections.length===1){At=[];const lt=Ct(et.toString(),rg(et,re,D,u,v,ze));for(const Ot of lt){const An=new zh;An.text=Ot,An.sections=et.sections;for(let zn=0;zn<Ot.length;zn++)An.sectionIndex.push(0);At.push(An)}}else if(Nt){At=[];const lt=Nt(et.text,et.sectionIndex,rg(et,re,D,u,v,ze));for(const Ot of lt){const An=new zh;An.text=Ot[0],An.sectionIndex=Ot[1],An.sections=et.sections,At.push(An)}}else At=function(lt,Ot){const An=[],zn=lt.text;let Cn=0;for(const fn of Ot)An.push(lt.substring(Cn,fn)),Cn=fn;return Cn<zn.length&&An.push(lt.substring(Cn,zn.length)),An}(et,rg(et,re,D,u,v,ze));const Et=[],Le={positionedLines:Et,text:et.toString(),top:de[1],bottom:de[1],left:de[0],right:de[0],writingMode:_e,iconsInText:!1,verticalizable:!1};return function(lt,Ot,An,zn,Cn,fn,jn,Wn,cr,kn,jr,mi){let ci=0,Zr=0,jo=0,al=0;const hu=Wn==="right"?1:Wn==="left"?0:.5,bA=Il/mi;let od=0;for(const Va of Cn){Va.trim();const ku=Va.getMaxScale(),nA={positionedGlyphs:[],lineOffset:0};lt.positionedLines[od]=nA;const vl=nA.positionedGlyphs;let yc=0;if(!Va.length()){Zr+=fn,++od;continue}const Rd=o1(zn,Va,bA);for(let Fc=0;Fc<Va.length();Fc++){const fu=Va.getSection(Fc),pu=Va.getSectionIndex(Fc),mu=Va.getCharCode(Fc),Ql=o0(cr,jr,mu);let ba;if(fu.imageName){if(lt.iconsInText=!0,fu.scale=fu.scale*bA,ba=ig(fu,Ql,ku,Rd,zn),!ba)continue;yc=Math.max(yc,ba.imageOffset)}else if(ba=s1(fu,mu,Ql,Rd,Ot,An),!ba)continue;const{rect:Nh,metrics:A0,baselineOffset:Wh}=ba;vl.push({glyph:mu,imageName:fu.imageName,x:ci,y:Zr+Wh+Jm,vertical:Ql,scale:fu.scale,fontStack:fu.fontStack,sectionIndex:pu,metrics:A0,rect:Nh}),Ql?(lt.verticalizable=!0,ci+=(fu.imageName?A0.advance:Il)*fu.scale+kn):ci+=A0.advance*fu.scale+kn}vl.length!==0&&(jo=Math.max(ci-kn,jo),a1(vl,0,vl.length-1,hu)),ci=0,nA.lineOffset=Math.max(yc,(ku-1)*Il);const Tu=fn*ku+yc;Zr+=Tu,al=Math.max(Tu,al),++od}const{horizontalAlign:gc,verticalAlign:tA}=i0(jn);(function(Va,ku,nA,vl,yc,Rd,Tu,Fc,fu){const pu=(ku-nA)*yc;let mu=0;mu=Rd!==Tu?-Fc*vl-Jm:-vl*fu*Tu+.5*Tu;for(const Ql of Va)for(const ba of Ql.positionedGlyphs)ba.x+=pu,ba.y+=mu})(lt.positionedLines,hu,gc,tA,jo,al,fn,Zr,Cn.length),lt.top+=-tA*Zr,lt.bottom=lt.top+Zr,lt.left+=-gc*jo,lt.right=lt.left+jo}(Le,u,f,v,At,U,W,X,_e,re,Re,Ge),!function(lt){for(const Ot of lt)if(Ot.positionedGlyphs.length!==0)return!1;return!0}(Et)&&Le}const mc={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},t0={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},ip={40:!0};function vm(h,u,f,v,M,D){if(u.imageName){const U=v[u.imageName];return U?U.displaySize[0]*u.scale*Il/D+M:0}{const U=f[u.fontStack],W=U&&U[h];return W?W.metrics.advance*u.scale+M:0}}function n0(h,u,f,v){const M=Math.pow(h-u,2);return v?h<u?M/2:2*M:M+Math.abs(f)*f}function ng(h,u,f){let v=0;return h===10&&(v-=1e4),f&&(v+=150),h!==40&&h!==65288||(v+=50),u!==41&&u!==65289||(v+=50),v}function i1(h,u,f,v,M,D){let U=null,W=n0(u,f,M,D);for(const X of v){const re=n0(u-X.x,f,M,D)+X.badness;re<=W&&(U=X,W=re)}return{index:h,x:u,priorBreak:U,badness:W}}function r0(h){return h?r0(h.priorBreak).concat(h.index):[]}function rg(h,u,f,v,M,D){if(!h)return[];const U=[],W=function(_e,Re,ze,Ge,et,At){let Ct=0;for(let Nt=0;Nt<_e.length();Nt++){const Et=_e.getSection(Nt);Ct+=vm(_e.getCharCode(Nt),Et,Ge,et,Re,At)}return Ct/Math.max(1,Math.ceil(Ct/ze))}(h,u,f,v,M,D),X=h.text.indexOf("")>=0;let re=0;for(let _e=0;_e<h.length();_e++){const Re=h.getSection(_e),ze=h.getCharCode(_e);if(mc[ze]||(re+=vm(ze,Re,v,M,u,D)),_e<h.length()-1){const Ge=!((de=ze)<11904)&&(!!Xi["CJK Compatibility Forms"](de)||!!Xi["CJK Compatibility"](de)||!!Xi["CJK Strokes"](de)||!!Xi["CJK Symbols and Punctuation"](de)||!!Xi["Enclosed CJK Letters and Months"](de)||!!Xi["Halfwidth and Fullwidth Forms"](de)||!!Xi["Ideographic Description Characters"](de)||!!Xi["Vertical Forms"](de)||FA.test(String.fromCodePoint(de)));(t0[ze]||Ge||Re.imageName||_e!==h.length()-2&&ip[h.getCharCode(_e+1)])&&U.push(i1(_e+1,re,W,U,ng(ze,h.getCharCode(_e+1),Ge&&X),!1))}}var de;return r0(i1(h.length(),re,W,U,0,!0))}function i0(h){let u=.5,f=.5;switch(h){case"right":case"top-right":case"bottom-right":u=1;break;case"left":case"top-left":case"bottom-left":u=0}switch(h){case"bottom":case"bottom-right":case"bottom-left":f=1;break;case"top":case"top-right":case"top-left":f=0}return{horizontalAlign:u,verticalAlign:f}}function o1(h,u,f){const v=u.getMaxScale()*Il,{maxImageWidth:M,maxImageHeight:D}=u.getMaxImageSize(h),U=Math.max(v,D*f);return{verticalLineContentWidth:Math.max(v,M*f),horizontalLineContentHeight:U}}function Cm(h){switch(h){case"top":return 0;case"center":return .5;default:return 1}}function o0(h,u,f){return!(h===a.ai.horizontal||!u&&!lc(f)||u&&(mc[f]||(v=f,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(v)))));var v}function s1(h,u,f,v,M,D){const U=D[h.fontStack],W=function(re,de,_e,Re){if(re&&re.rect)return re;const ze=de[_e.fontStack],Ge=ze&&ze[Re];return Ge?{rect:null,metrics:Ge.metrics}:null}(U&&U[u],M,h,u);if(W===null)return null;let X;if(f)X=v.verticalLineContentWidth-h.scale*Il;else{const re=Cm(h.verticalAlign);X=(v.horizontalLineContentHeight-h.scale*Il)*re}return{rect:W.rect,metrics:W.metrics,baselineOffset:X}}function ig(h,u,f,v,M){const D=M[h.imageName];if(!D)return null;const U=D.paddedRect,W=D.displaySize,X={width:W[0],height:W[1],left:QA,top:-3,advance:u?W[1]:W[0]};let re;if(u)re=v.verticalLineContentWidth-W[1]*h.scale;else{const de=Cm(h.verticalAlign);re=(v.horizontalLineContentHeight-W[1]*h.scale)*de}return{rect:U,metrics:X,baselineOffset:re,imageOffset:(u?W[0]:W[1])*h.scale-Il*f}}function a1(h,u,f,v){if(v===0)return;const M=h[f],D=(h[f].x+M.metrics.advance*M.scale)*v;for(let U=u;U<=f;U++)h[U].x-=D}function og(h,u,f){const{horizontalAlign:v,verticalAlign:M}=i0(f),D=u[0]-h.displaySize[0]*v,U=u[1]-h.displaySize[1]*M;return{image:h,top:U,bottom:U+h.displaySize[1],left:D,right:D+h.displaySize[0]}}function Fp(h){var u,f;let v=h.left,M=h.top,D=h.right-v,U=h.bottom-M;const W=(u=h.image.textFitWidth)!==null&&u!==void 0?u:"stretchOrShrink",X=(f=h.image.textFitHeight)!==null&&f!==void 0?f:"stretchOrShrink",re=(h.image.content[2]-h.image.content[0])/(h.image.content[3]-h.image.content[1]);if(X==="proportional"){if(W==="stretchOnly"&&D/U<re||W==="proportional"){const de=Math.ceil(U*re);v*=de/D,D=de}}else if(W==="proportional"&&X==="stretchOnly"&&re!==0&&D/U>re){const de=Math.ceil(D/re);M*=de/U,U=de}return{x1:v,y1:M,x2:v+D,y2:M+U}}function _m(h,u,f,v,M,D){const U=h.image;let W;if(U.content){const At=U.content,Ct=U.pixelRatio||1;W=[At[0]/Ct,At[1]/Ct,U.displaySize[0]-At[2]/Ct,U.displaySize[1]-At[3]/Ct]}const X=u.left*D,re=u.right*D;let de,_e,Re,ze;f==="width"||f==="both"?(ze=M[0]+X-v[3],_e=M[0]+re+v[1]):(ze=M[0]+(X+re-U.displaySize[0])/2,_e=ze+U.displaySize[0]);const Ge=u.top*D,et=u.bottom*D;return f==="height"||f==="both"?(de=M[1]+Ge-v[0],Re=M[1]+et+v[2]):(de=M[1]+(Ge+et-U.displaySize[1])/2,Re=de+U.displaySize[1]),{image:U,top:de,right:_e,bottom:Re,left:ze,collisionPadding:W}}const Ef=255,Kd=128,Bf=Ef*Kd;function bm(h,u){const{expression:f}=u;if(f.kind==="constant")return{kind:"constant",layoutSize:f.evaluate(new Fo(h+1))};if(f.kind==="source")return{kind:"source"};{const{zoomStops:v,interpolationType:M}=f;let D=0;for(;D<v.length&&v[D]<=h;)D++;D=Math.max(0,D-1);let U=D;for(;U<v.length&&v[U]<h+1;)U++;U=Math.min(v.length-1,U);const W=v[D],X=v[U];return f.kind==="composite"?{kind:"composite",minZoom:W,maxZoom:X,interpolationType:M}:{kind:"camera",minZoom:W,maxZoom:X,minSize:f.evaluate(new Fo(W)),maxSize:f.evaluate(new Fo(X)),interpolationType:M}}}function Lp(h,u,f){let v="never";const M=h.get(u);return M?v=M:h.get(f)&&(v="always"),v}const xm=Co.VectorTileFeature.types,av=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function op(h,u,f,v,M,D,U,W,X,re,de,_e,Re){const ze=W?Math.min(Bf,Math.round(W[0])):0,Ge=W?Math.min(Bf,Math.round(W[1])):0;h.emplaceBack(u,f,Math.round(32*v),Math.round(32*M),D,U,(ze<<1)+(X?1:0),Ge,16*re,16*de,256*_e,256*Re)}function m(h,u,f){h.emplaceBack(u.x,u.y,f),h.emplaceBack(u.x,u.y,f),h.emplaceBack(u.x,u.y,f),h.emplaceBack(u.x,u.y,f)}function C(h){for(const u of h.sections)if(Qa(u.text))return!0;return!1}class F{constructor(u){this.layoutVertexArray=new Tt,this.indexArray=new yn,this.programConfigurations=u,this.segments=new pr,this.dynamicLayoutVertexArray=new nn,this.opacityVertexArray=new Zt,this.hasVisibleVertices=!1,this.placedSymbolArray=new $}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(u,f,v,M){this.isEmpty()||(v&&(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,Mf.members),this.indexBuffer=u.createIndexBuffer(this.indexArray,f),this.dynamicLayoutVertexBuffer=u.createVertexBuffer(this.dynamicLayoutVertexArray,n1.members,!0),this.opacityVertexBuffer=u.createVertexBuffer(this.opacityVertexArray,av,!0),this.opacityVertexBuffer.itemSize=1),(v||M)&&this.programConfigurations.upload(u))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}hr("SymbolBuffers",F);class Q{constructor(u,f,v){this.layoutVertexArray=new u,this.layoutAttributes=f,this.indexArray=new v,this.segments=new pr,this.collisionVertexArray=new Bn}upload(u){this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=u.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=u.createVertexBuffer(this.collisionVertexArray,Y0.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}hr("CollisionBuffers",Q);class le{constructor(u){this.collisionBoxArray=u.collisionBoxArray,this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(U=>U.id),this.index=u.index,this.pixelRatio=u.pixelRatio,this.sourceLayerIndex=u.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const f=this.layers[0]._unevaluatedLayout._values;this.textSizeData=bm(this.zoom,f["text-size"]),this.iconSizeData=bm(this.zoom,f["icon-size"]);const v=this.layers[0].layout,M=v.get("symbol-sort-key"),D=v.get("symbol-z-order");this.canOverlap=Lp(v,"text-overlap","text-allow-overlap")!=="never"||Lp(v,"icon-overlap","icon-allow-overlap")!=="never"||v.get("text-ignore-placement")||v.get("icon-ignore-placement"),this.sortFeaturesByKey=D!=="viewport-y"&&!M.isConstant(),this.sortFeaturesByY=(D==="viewport-y"||D==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,v.get("symbol-placement")==="point"&&(this.writingModes=v.get("text-writing-mode").map(U=>a.ai[U])),this.stateDependentLayerIds=this.layers.filter(U=>U.isStateDependent()).map(U=>U.id),this.sourceID=u.sourceID}createArrays(){this.text=new F(new $s(this.layers,this.zoom,u=>/^text/.test(u))),this.icon=new F(new $s(this.layers,this.zoom,u=>/^icon/.test(u))),this.glyphOffsetArray=new xe,this.lineVertexArray=new ke,this.symbolInstances=new ae,this.textAnchorOffsets=new $e}calculateGlyphDependencies(u,f,v,M,D){for(let U=0;U<u.length;U++)if(f[u.charCodeAt(U)]=!0,(v||M)&&D){const W=Dp[u.charAt(U)];W&&(f[W.charCodeAt(0)]=!0)}}populate(u,f,v){const M=this.layers[0],D=M.layout,U=D.get("text-font"),W=D.get("text-field"),X=D.get("icon-image"),re=(W.value.kind!=="constant"||W.value.value instanceof Rr&&!W.value.value.isEmpty()||W.value.value.toString().length>0)&&(U.value.kind!=="constant"||U.value.value.length>0),de=X.value.kind!=="constant"||!!X.value.value||Object.keys(X.parameters).length>0,_e=D.get("symbol-sort-key");if(this.features=[],!re&&!de)return;const Re=f.iconDependencies,ze=f.glyphDependencies,Ge=f.availableImages,et=new Fo(this.zoom);for(const{feature:At,id:Ct,index:Nt,sourceLayerIndex:Et}of u){const Le=M._featureFilter.needGeometry,lt=hc(At,Le);if(!M._featureFilter.filter(et,lt,v))continue;let Ot,An;if(Le||(lt.geometry=dc(At)),re){const Cn=M.getValueAndResolveTokens("text-field",lt,v,Ge),fn=Rr.factory(Cn),jn=this.hasRTLText=this.hasRTLText||C(fn);(!jn||jl.getRTLTextPluginStatus()==="unavailable"||jn&&jl.isParsed())&&(Ot=rp(fn,M,lt))}if(de){const Cn=M.getValueAndResolveTokens("icon-image",lt,v,Ge);An=Cn instanceof Ws?Cn:Ws.fromString(Cn)}if(!Ot&&!An)continue;const zn=this.sortFeaturesByKey?_e.evaluate(lt,{},v):void 0;if(this.features.push({id:Ct,text:Ot,icon:An,index:Nt,sourceLayerIndex:Et,geometry:lt.geometry,properties:At.properties,type:xm[At.type],sortKey:zn}),An&&(Re[An.name]=!0),Ot){const Cn=U.evaluate(lt,{},v).join(","),fn=D.get("text-rotation-alignment")!=="viewport"&&D.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(a.ai.vertical)>=0;for(const jn of Ot.sections)if(jn.image)Re[jn.image.name]=!0;else{const Wn=hl(Ot.toString()),cr=jn.fontStack||Cn,kn=ze[cr]=ze[cr]||{};this.calculateGlyphDependencies(jn.text,kn,fn,this.allowVerticalPlacement,Wn)}}}D.get("symbol-placement")==="line"&&(this.features=function(At){const Ct={},Nt={},Et=[];let Le=0;function lt(Cn){Et.push(At[Cn]),Le++}function Ot(Cn,fn,jn){const Wn=Nt[Cn];return delete Nt[Cn],Nt[fn]=Wn,Et[Wn].geometry[0].pop(),Et[Wn].geometry[0]=Et[Wn].geometry[0].concat(jn[0]),Wn}function An(Cn,fn,jn){const Wn=Ct[fn];return delete Ct[fn],Ct[Cn]=Wn,Et[Wn].geometry[0].shift(),Et[Wn].geometry[0]=jn[0].concat(Et[Wn].geometry[0]),Wn}function zn(Cn,fn,jn){const Wn=jn?fn[0][fn[0].length-1]:fn[0][0];return`${Cn}:${Wn.x}:${Wn.y}`}for(let Cn=0;Cn<At.length;Cn++){const fn=At[Cn],jn=fn.geometry,Wn=fn.text?fn.text.toString():null;if(!Wn){lt(Cn);continue}const cr=zn(Wn,jn),kn=zn(Wn,jn,!0);if(cr in Nt&&kn in Ct&&Nt[cr]!==Ct[kn]){const jr=An(cr,kn,jn),mi=Ot(cr,kn,Et[jr].geometry);delete Ct[cr],delete Nt[kn],Nt[zn(Wn,Et[mi].geometry,!0)]=mi,Et[jr].geometry=null}else cr in Nt?Ot(cr,kn,jn):kn in Ct?An(cr,kn,jn):(lt(Cn),Ct[cr]=Le-1,Nt[kn]=Le-1)}return Et.filter(Cn=>Cn.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((At,Ct)=>At.sortKey-Ct.sortKey)}update(u,f,v){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(u,f,this.layers,v),this.icon.programConfigurations.updatePaintArrays(u,f,this.layers,v))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(u){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(u),this.iconCollisionBox.upload(u)),this.text.upload(u,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(u,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(u,f){const v=this.lineVertexArray.length;if(u.segment!==void 0){let M=u.dist(f[u.segment+1]),D=u.dist(f[u.segment]);const U={};for(let W=u.segment+1;W<f.length;W++)U[W]={x:f[W].x,y:f[W].y,tileUnitDistanceFromAnchor:M},W<f.length-1&&(M+=f[W+1].dist(f[W]));for(let W=u.segment||0;W>=0;W--)U[W]={x:f[W].x,y:f[W].y,tileUnitDistanceFromAnchor:D},W>0&&(D+=f[W-1].dist(f[W]));for(let W=0;W<f.length;W++){const X=U[W];this.lineVertexArray.emplaceBack(X.x,X.y,X.tileUnitDistanceFromAnchor)}}return{lineStartIndex:v,lineLength:this.lineVertexArray.length-v}}addSymbols(u,f,v,M,D,U,W,X,re,de,_e,Re){const ze=u.indexArray,Ge=u.layoutVertexArray,et=u.segments.prepareSegment(4*f.length,Ge,ze,this.canOverlap?U.sortKey:void 0),At=this.glyphOffsetArray.length,Ct=et.vertexLength,Nt=this.allowVerticalPlacement&&W===a.ai.vertical?Math.PI/2:0,Et=U.text&&U.text.sections;for(let Le=0;Le<f.length;Le++){const{tl:lt,tr:Ot,bl:An,br:zn,tex:Cn,pixelOffsetTL:fn,pixelOffsetBR:jn,minFontScaleX:Wn,minFontScaleY:cr,glyphOffset:kn,isSDF:jr,sectionIndex:mi}=f[Le],ci=et.vertexLength,Zr=kn[1];op(Ge,X.x,X.y,lt.x,Zr+lt.y,Cn.x,Cn.y,v,jr,fn.x,fn.y,Wn,cr),op(Ge,X.x,X.y,Ot.x,Zr+Ot.y,Cn.x+Cn.w,Cn.y,v,jr,jn.x,fn.y,Wn,cr),op(Ge,X.x,X.y,An.x,Zr+An.y,Cn.x,Cn.y+Cn.h,v,jr,fn.x,jn.y,Wn,cr),op(Ge,X.x,X.y,zn.x,Zr+zn.y,Cn.x+Cn.w,Cn.y+Cn.h,v,jr,jn.x,jn.y,Wn,cr),m(u.dynamicLayoutVertexArray,X,Nt),ze.emplaceBack(ci,ci+2,ci+1),ze.emplaceBack(ci+1,ci+2,ci+3),et.vertexLength+=4,et.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(kn[0]),Le!==f.length-1&&mi===f[Le+1].sectionIndex||u.programConfigurations.populatePaintArrays(Ge.length,U,U.index,{},Re,Et&&Et[mi])}u.placedSymbolArray.emplaceBack(X.x,X.y,At,this.glyphOffsetArray.length-At,Ct,re,de,X.segment,v?v[0]:0,v?v[1]:0,M[0],M[1],W,0,!1,0,_e)}_addCollisionDebugVertex(u,f,v,M,D,U){return f.emplaceBack(0,0),u.emplaceBack(v.x,v.y,M,D,Math.round(U.x),Math.round(U.y))}addCollisionDebugVertices(u,f,v,M,D,U,W){const X=D.segments.prepareSegment(4,D.layoutVertexArray,D.indexArray),re=X.vertexLength,de=D.layoutVertexArray,_e=D.collisionVertexArray,Re=W.anchorX,ze=W.anchorY;this._addCollisionDebugVertex(de,_e,U,Re,ze,new P(u,f)),this._addCollisionDebugVertex(de,_e,U,Re,ze,new P(v,f)),this._addCollisionDebugVertex(de,_e,U,Re,ze,new P(v,M)),this._addCollisionDebugVertex(de,_e,U,Re,ze,new P(u,M)),X.vertexLength+=4;const Ge=D.indexArray;Ge.emplaceBack(re,re+1),Ge.emplaceBack(re+1,re+2),Ge.emplaceBack(re+2,re+3),Ge.emplaceBack(re+3,re),X.primitiveLength+=4}addDebugCollisionBoxes(u,f,v,M){for(let D=u;D<f;D++){const U=this.collisionBoxArray.get(D);this.addCollisionDebugVertices(U.x1,U.y1,U.x2,U.y2,M?this.textCollisionBox:this.iconCollisionBox,U.anchorPoint,v)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Q(Mn,Sf.members,In),this.iconCollisionBox=new Q(Mn,Sf.members,In);for(let u=0;u<this.symbolInstances.length;u++){const f=this.symbolInstances.get(u);this.addDebugCollisionBoxes(f.textBoxStartIndex,f.textBoxEndIndex,f,!0),this.addDebugCollisionBoxes(f.verticalTextBoxStartIndex,f.verticalTextBoxEndIndex,f,!0),this.addDebugCollisionBoxes(f.iconBoxStartIndex,f.iconBoxEndIndex,f,!1),this.addDebugCollisionBoxes(f.verticalIconBoxStartIndex,f.verticalIconBoxEndIndex,f,!1)}}_deserializeCollisionBoxesForSymbol(u,f,v,M,D,U,W,X,re){const de={};for(let _e=f;_e<v;_e++){const Re=u.get(_e);de.textBox={x1:Re.x1,y1:Re.y1,x2:Re.x2,y2:Re.y2,anchorPointX:Re.anchorPointX,anchorPointY:Re.anchorPointY},de.textFeatureIndex=Re.featureIndex;break}for(let _e=M;_e<D;_e++){const Re=u.get(_e);de.verticalTextBox={x1:Re.x1,y1:Re.y1,x2:Re.x2,y2:Re.y2,anchorPointX:Re.anchorPointX,anchorPointY:Re.anchorPointY},de.verticalTextFeatureIndex=Re.featureIndex;break}for(let _e=U;_e<W;_e++){const Re=u.get(_e);de.iconBox={x1:Re.x1,y1:Re.y1,x2:Re.x2,y2:Re.y2,anchorPointX:Re.anchorPointX,anchorPointY:Re.anchorPointY},de.iconFeatureIndex=Re.featureIndex;break}for(let _e=X;_e<re;_e++){const Re=u.get(_e);de.verticalIconBox={x1:Re.x1,y1:Re.y1,x2:Re.x2,y2:Re.y2,anchorPointX:Re.anchorPointX,anchorPointY:Re.anchorPointY},de.verticalIconFeatureIndex=Re.featureIndex;break}return de}deserializeCollisionBoxes(u){this.collisionArrays=[];for(let f=0;f<this.symbolInstances.length;f++){const v=this.symbolInstances.get(f);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(u,v.textBoxStartIndex,v.textBoxEndIndex,v.verticalTextBoxStartIndex,v.verticalTextBoxEndIndex,v.iconBoxStartIndex,v.iconBoxEndIndex,v.verticalIconBoxStartIndex,v.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(u,f){const v=u.placedSymbolArray.get(f),M=v.vertexStartIndex+4*v.numGlyphs;for(let D=v.vertexStartIndex;D<M;D+=4)u.indexArray.emplaceBack(D,D+2,D+1),u.indexArray.emplaceBack(D+1,D+2,D+3)}getSortedSymbolIndexes(u){if(this.sortedAngle===u&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const f=Math.sin(u),v=Math.cos(u),M=[],D=[],U=[];for(let W=0;W<this.symbolInstances.length;++W){U.push(W);const X=this.symbolInstances.get(W);M.push(0|Math.round(f*X.anchorX+v*X.anchorY)),D.push(X.featureIndex)}return U.sort((W,X)=>M[W]-M[X]||D[X]-D[W]),U}addToSortKeyRanges(u,f){const v=this.sortKeyRanges[this.sortKeyRanges.length-1];v&&v.sortKey===f?v.symbolInstanceEnd=u+1:this.sortKeyRanges.push({sortKey:f,symbolInstanceStart:u,symbolInstanceEnd:u+1})}sortFeatures(u){if(this.sortFeaturesByY&&this.sortedAngle!==u&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(u),this.sortedAngle=u,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const f of this.symbolInstanceIndexes){const v=this.symbolInstances.get(f);this.featureSortOrder.push(v.featureIndex),[v.rightJustifiedTextSymbolIndex,v.centerJustifiedTextSymbolIndex,v.leftJustifiedTextSymbolIndex].forEach((M,D,U)=>{M>=0&&U.indexOf(M)===D&&this.addIndicesForPlacedSymbol(this.text,M)}),v.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,v.verticalPlacedTextSymbolIndex),v.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,v.placedIconSymbolIndex),v.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,v.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let ge,tt;hr("SymbolBucket",le,{omit:["layers","collisionBoxArray","features","compareText"]}),le.MAX_GLYPHS=65535,le.addDynamicAttributes=m;var It={get paint(){return tt=tt||new iu({"icon-opacity":new Hr(Oe.paint_symbol["icon-opacity"]),"icon-color":new Hr(Oe.paint_symbol["icon-color"]),"icon-halo-color":new Hr(Oe.paint_symbol["icon-halo-color"]),"icon-halo-width":new Hr(Oe.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Hr(Oe.paint_symbol["icon-halo-blur"]),"icon-translate":new Pr(Oe.paint_symbol["icon-translate"]),"icon-translate-anchor":new Pr(Oe.paint_symbol["icon-translate-anchor"]),"text-opacity":new Hr(Oe.paint_symbol["text-opacity"]),"text-color":new Hr(Oe.paint_symbol["text-color"],{runtimeType:Xr,getOverride:h=>h.textColor,hasOverride:h=>!!h.textColor}),"text-halo-color":new Hr(Oe.paint_symbol["text-halo-color"]),"text-halo-width":new Hr(Oe.paint_symbol["text-halo-width"]),"text-halo-blur":new Hr(Oe.paint_symbol["text-halo-blur"]),"text-translate":new Pr(Oe.paint_symbol["text-translate"]),"text-translate-anchor":new Pr(Oe.paint_symbol["text-translate-anchor"])})},get layout(){return ge=ge||new iu({"symbol-placement":new Pr(Oe.layout_symbol["symbol-placement"]),"symbol-spacing":new Pr(Oe.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Pr(Oe.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Hr(Oe.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Pr(Oe.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Pr(Oe.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Pr(Oe.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Pr(Oe.layout_symbol["icon-ignore-placement"]),"icon-optional":new Pr(Oe.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Pr(Oe.layout_symbol["icon-rotation-alignment"]),"icon-size":new Hr(Oe.layout_symbol["icon-size"]),"icon-text-fit":new Pr(Oe.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Pr(Oe.layout_symbol["icon-text-fit-padding"]),"icon-image":new Hr(Oe.layout_symbol["icon-image"]),"icon-rotate":new Hr(Oe.layout_symbol["icon-rotate"]),"icon-padding":new Hr(Oe.layout_symbol["icon-padding"]),"icon-keep-upright":new Pr(Oe.layout_symbol["icon-keep-upright"]),"icon-offset":new Hr(Oe.layout_symbol["icon-offset"]),"icon-anchor":new Hr(Oe.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Pr(Oe.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Pr(Oe.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Pr(Oe.layout_symbol["text-rotation-alignment"]),"text-field":new Hr(Oe.layout_symbol["text-field"]),"text-font":new Hr(Oe.layout_symbol["text-font"]),"text-size":new Hr(Oe.layout_symbol["text-size"]),"text-max-width":new Hr(Oe.layout_symbol["text-max-width"]),"text-line-height":new Pr(Oe.layout_symbol["text-line-height"]),"text-letter-spacing":new Hr(Oe.layout_symbol["text-letter-spacing"]),"text-justify":new Hr(Oe.layout_symbol["text-justify"]),"text-radial-offset":new Hr(Oe.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Pr(Oe.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Hr(Oe.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Hr(Oe.layout_symbol["text-anchor"]),"text-max-angle":new Pr(Oe.layout_symbol["text-max-angle"]),"text-writing-mode":new Pr(Oe.layout_symbol["text-writing-mode"]),"text-rotate":new Hr(Oe.layout_symbol["text-rotate"]),"text-padding":new Pr(Oe.layout_symbol["text-padding"]),"text-keep-upright":new Pr(Oe.layout_symbol["text-keep-upright"]),"text-transform":new Hr(Oe.layout_symbol["text-transform"]),"text-offset":new Hr(Oe.layout_symbol["text-offset"]),"text-allow-overlap":new Pr(Oe.layout_symbol["text-allow-overlap"]),"text-overlap":new Pr(Oe.layout_symbol["text-overlap"]),"text-ignore-placement":new Pr(Oe.layout_symbol["text-ignore-placement"]),"text-optional":new Pr(Oe.layout_symbol["text-optional"])})}};class Wt{constructor(u){if(u.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=u.property.overrides?u.property.overrides.runtimeType:Er,this.defaultValue=u}evaluate(u){if(u.formattedSection){const f=this.defaultValue.property.overrides;if(f&&f.hasOverride(u.formattedSection))return f.getOverride(u.formattedSection)}return u.feature&&u.featureState?this.defaultValue.evaluate(u.feature,u.featureState):this.defaultValue.property.specification.default}eachChild(u){this.defaultValue.isConstant()||u(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}hr("FormatSectionOverride",Wt,{omit:["defaultValue"]});class xn extends pA{constructor(u){super(u,It)}recalculate(u,f){if(super.recalculate(u,f),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const v=this.layout.get("text-writing-mode");if(v){const M=[];for(const D of v)M.indexOf(D)<0&&M.push(D);this.layout._values["text-writing-mode"]=M}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(u,f,v,M){const D=this.layout.get(u).evaluate(f,{},v,M),U=this._unevaluatedLayout._values[u];return U.isDataDriven()||qc(U.value)||!D?D:function(W,X){return X.replace(/{([^{}]+)}/g,(re,de)=>W&&de in W?String(W[de]):"")}(f.properties,D)}createBucket(u){return new le(u)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const u of It.paint.overridableProperties){if(!xn.hasPaintOverride(this.layout,u))continue;const f=this.paint.get(u),v=new Wt(f),M=new tu(v,f.property.specification);let D=null;D=f.value.kind==="constant"||f.value.kind==="source"?new Wa("source",M):new Yc("composite",M,f.value.zoomStops),this.paint._values[u]=new bs(f.property,D,f.parameters)}}_handleOverridablePaintPropertyUpdate(u,f,v){return!(!this.layout||f.isDataDriven()||v.isDataDriven())&&xn.hasPaintOverride(this.layout,u)}static hasPaintOverride(u,f){const v=u.get("text-field"),M=It.paint.properties[f];let D=!1;const U=W=>{for(const X of W)if(M.overrides&&M.overrides.hasOverride(X))return void(D=!0)};if(v.value.kind==="constant"&&v.value.value instanceof Rr)U(v.value.value.sections);else if(v.value.kind==="source"){const W=re=>{D||(re instanceof Ho&&Ao(re.value)===Ma?U(re.value.sections):re instanceof Wc?U(re.sections):re.eachChild(W))},X=v.value;X._styleExpression&&W(X._styleExpression.expression)}return D}}let Ar;var Cr={get paint(){return Ar=Ar||new iu({"background-color":new Pr(Oe.paint_background["background-color"]),"background-pattern":new Mu(Oe.paint_background["background-pattern"]),"background-opacity":new Pr(Oe.paint_background["background-opacity"])})}};class ir extends pA{constructor(u){super(u,Cr)}}let qr;var oi={get paint(){return qr=qr||new iu({"raster-opacity":new Pr(Oe.paint_raster["raster-opacity"]),"raster-hue-rotate":new Pr(Oe.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Pr(Oe.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Pr(Oe.paint_raster["raster-brightness-max"]),"raster-saturation":new Pr(Oe.paint_raster["raster-saturation"]),"raster-contrast":new Pr(Oe.paint_raster["raster-contrast"]),"raster-resampling":new Pr(Oe.paint_raster["raster-resampling"]),"raster-fade-duration":new Pr(Oe.paint_raster["raster-fade-duration"])})}};class ai extends pA{constructor(u){super(u,oi)}}class yl extends pA{constructor(u){super(u,{}),this.onAdd=f=>{this.implementation.onAdd&&this.implementation.onAdd(f,f.painter.context.gl)},this.onRemove=f=>{this.implementation.onRemove&&this.implementation.onRemove(f,f.painter.context.gl)},this.implementation=u}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class cn{constructor(u){this._methodToThrottle=u,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const Xt=63710088e-1;class dn{constructor(u,f){if(isNaN(u)||isNaN(f))throw new Error(`Invalid LngLat object: (${u}, ${f})`);if(this.lng=+u,this.lat=+f,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new dn(Yt(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(u){const f=Math.PI/180,v=this.lat*f,M=u.lat*f,D=Math.sin(v)*Math.sin(M)+Math.cos(v)*Math.cos(M)*Math.cos((u.lng-this.lng)*f);return Xt*Math.acos(Math.min(D,1))}static convert(u){if(u instanceof dn)return u;if(Array.isArray(u)&&(u.length===2||u.length===3))return new dn(Number(u[0]),Number(u[1]));if(!Array.isArray(u)&&typeof u=="object"&&u!==null)return new dn(Number("lng"in u?u.lng:u.lon),Number(u.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const _r=2*Math.PI*Xt;function si(h){return _r*Math.cos(h*Math.PI/180)}function Oi(h){return(180+h)/360}function Ii(h){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+h*Math.PI/360)))/360}function ji(h,u){return h/si(u)}function kl(h){return 360/Math.PI*Math.atan(Math.exp((180-360*h)*Math.PI/180))-90}function xs(h,u){return h*si(kl(u))}class nd{constructor(u,f,v=0){this.x=+u,this.y=+f,this.z=+v}static fromLngLat(u,f=0){const v=dn.convert(u);return new nd(Oi(v.lng),Ii(v.lat),ji(f,v.lat))}toLngLat(){return new dn(360*this.x-180,kl(this.y))}toAltitude(){return xs(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/_r*(u=kl(this.y),1/Math.cos(u*Math.PI/180));var u}}function l1(h,u,f){var v=2*Math.PI*6378137/256/Math.pow(2,f);return[h*v-2*Math.PI*6378137/2,u*v-2*Math.PI*6378137/2]}class lv{constructor(u,f,v){if(!function(M,D,U){return!(M<0||M>25||U<0||U>=Math.pow(2,M)||D<0||D>=Math.pow(2,M))}(u,f,v))throw new Error(`x=${f}, y=${v}, z=${u} outside of bounds. 0<=x<${Math.pow(2,u)}, 0<=y<${Math.pow(2,u)} 0<=z<=25 `);this.z=u,this.x=f,this.y=v,this.key=s0(0,u,u,f,v)}equals(u){return this.z===u.z&&this.x===u.x&&this.y===u.y}url(u,f,v){const M=(U=this.y,W=this.z,X=l1(256*(D=this.x),256*(U=Math.pow(2,W)-U-1),W),re=l1(256*(D+1),256*(U+1),W),X[0]+","+X[1]+","+re[0]+","+re[1]);var D,U,W,X,re;const de=function(_e,Re,ze){let Ge,et="";for(let At=_e;At>0;At--)Ge=1<<At-1,et+=(Re&Ge?1:0)+(ze&Ge?2:0);return et}(this.z,this.x,this.y);return u[(this.x+this.y)%u.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(v==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,f>1?"@2x":"").replace(/{quadkey}/g,de).replace(/{bbox-epsg-3857}/g,M)}isChildOf(u){const f=this.z-u.z;return f>0&&u.x===this.x>>f&&u.y===this.y>>f}getTilePoint(u){const f=Math.pow(2,this.z);return new P((u.x*f-this.x)*at,(u.y*f-this.y)*at)}toString(){return`${this.z}/${this.x}/${this.y}`}}class w_{constructor(u,f){this.wrap=u,this.canonical=f,this.key=s0(u,f.z,f.z,f.x,f.y)}}class Dd{constructor(u,f,v,M,D){if(this.terrainRttPosMatrix32f=null,u<v)throw new Error(`overscaledZ should be >= z; overscaledZ = ${u}; z = ${v}`);this.overscaledZ=u,this.wrap=f,this.canonical=new lv(v,+M,+D),this.key=s0(f,u,v,M,D)}clone(){return new Dd(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(u){return this.overscaledZ===u.overscaledZ&&this.wrap===u.wrap&&this.canonical.equals(u.canonical)}scaledTo(u){if(u>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${u}; overscaledZ = ${this.overscaledZ}`);const f=this.canonical.z-u;return u>this.canonical.z?new Dd(u,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Dd(u,this.wrap,u,this.canonical.x>>f,this.canonical.y>>f)}calculateScaledKey(u,f){if(u>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${u}; overscaledZ = ${this.overscaledZ}`);const v=this.canonical.z-u;return u>this.canonical.z?s0(this.wrap*+f,u,this.canonical.z,this.canonical.x,this.canonical.y):s0(this.wrap*+f,u,u,this.canonical.x>>v,this.canonical.y>>v)}isChildOf(u){if(u.wrap!==this.wrap)return!1;const f=this.canonical.z-u.canonical.z;return u.overscaledZ===0||u.overscaledZ<this.overscaledZ&&u.canonical.x===this.canonical.x>>f&&u.canonical.y===this.canonical.y>>f}children(u){if(this.overscaledZ>=u)return[new Dd(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const f=this.canonical.z+1,v=2*this.canonical.x,M=2*this.canonical.y;return[new Dd(f,this.wrap,f,v,M),new Dd(f,this.wrap,f,v+1,M),new Dd(f,this.wrap,f,v,M+1),new Dd(f,this.wrap,f,v+1,M+1)]}isLessThan(u){return this.wrap<u.wrap||!(this.wrap>u.wrap)&&(this.overscaledZ<u.overscaledZ||!(this.overscaledZ>u.overscaledZ)&&(this.canonical.x<u.canonical.x||!(this.canonical.x>u.canonical.x)&&this.canonical.y<u.canonical.y))}wrapped(){return new Dd(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(u){return new Dd(this.overscaledZ,u,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new w_(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(u){return this.canonical.getTilePoint(new nd(u.x-this.wrap,u.y))}}function s0(h,u,f,v,M){(h*=2)<0&&(h=-1*h-1);const D=1<<f;return(D*D*h+D*M+v).toString(36)+f.toString(36)+u.toString(36)}hr("CanonicalTileID",lv),hr("OverscaledTileID",Dd,{omit:["terrainRttPosMatrix32f"]});class M_{constructor(u,f,v,M=1,D=1,U=1,W=0){if(this.uid=u,f.height!==f.width)throw new RangeError("DEM tiles must be square");if(v&&!["mapbox","terrarium","custom"].includes(v))return void it(`"${v}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=f.height;const X=this.dim=f.height-2;switch(this.data=new Uint32Array(f.data.buffer),v){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=M,this.greenFactor=D,this.blueFactor=U,this.baseShift=W;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let re=0;re<X;re++)this.data[this._idx(-1,re)]=this.data[this._idx(0,re)],this.data[this._idx(X,re)]=this.data[this._idx(X-1,re)],this.data[this._idx(re,-1)]=this.data[this._idx(re,0)],this.data[this._idx(re,X)]=this.data[this._idx(re,X-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(X,-1)]=this.data[this._idx(X-1,0)],this.data[this._idx(-1,X)]=this.data[this._idx(0,X-1)],this.data[this._idx(X,X)]=this.data[this._idx(X-1,X-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let re=0;re<X;re++)for(let de=0;de<X;de++){const _e=this.get(re,de);_e>this.max&&(this.max=_e),_e<this.min&&(this.min=_e)}}get(u,f){const v=new Uint8Array(this.data.buffer),M=4*this._idx(u,f);return this.unpack(v[M],v[M+1],v[M+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(u,f){if(u<-1||u>=this.dim+1||f<-1||f>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(f+1)*this.stride+(u+1)}unpack(u,f,v){return u*this.redFactor+f*this.greenFactor+v*this.blueFactor-this.baseShift}getPixels(){return new cu({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(u,f,v){if(this.dim!==u.dim)throw new Error("dem dimension mismatch");let M=f*this.dim,D=f*this.dim+this.dim,U=v*this.dim,W=v*this.dim+this.dim;switch(f){case-1:M=D-1;break;case 1:D=M+1}switch(v){case-1:U=W-1;break;case 1:W=U+1}const X=-f*this.dim,re=-v*this.dim;for(let de=U;de<W;de++)for(let _e=M;_e<D;_e++)this.data[this._idx(_e,de)]=u.data[this._idx(_e+X,de+re)]}}hr("DEMData",M_);class S_{constructor(u){this._stringToNumber={},this._numberToString=[];for(let f=0;f<u.length;f++){const v=u[f];this._stringToNumber[v]=f,this._numberToString[f]=v}}encode(u){return this._stringToNumber[u]}decode(u){if(u>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${u} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[u]}}class E_{constructor(u,f,v,M,D){this.type="Feature",this._vectorTileFeature=u,u._z=f,u._x=v,u._y=M,this.properties=u.properties,this.id=D}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(u){this._geometry=u}toJSON(){const u={geometry:this.geometry};for(const f in this)f!=="_geometry"&&f!=="_vectorTileFeature"&&(u[f]=this[f]);return u}}class B_{constructor(u,f){this.tileID=u,this.x=u.canonical.x,this.y=u.canonical.y,this.z=u.canonical.z,this.grid=new ra(at,16,0),this.grid3D=new ra(at,16,0),this.featureIndexArray=new pt,this.promoteId=f}insert(u,f,v,M,D,U){const W=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(v,M,D);const X=U?this.grid3D:this.grid;for(let re=0;re<f.length;re++){const de=f[re],_e=[1/0,1/0,-1/0,-1/0];for(let Re=0;Re<de.length;Re++){const ze=de[Re];_e[0]=Math.min(_e[0],ze.x),_e[1]=Math.min(_e[1],ze.y),_e[2]=Math.max(_e[2],ze.x),_e[3]=Math.max(_e[3],ze.y)}_e[0]<at&&_e[1]<at&&_e[2]>=0&&_e[3]>=0&&X.insert(W,_e[0],_e[1],_e[2],_e[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Co.VectorTile(new Lh(this.rawTileData)).layers,this.sourceLayerCoder=new S_(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(u,f,v,M){this.loadVTLayers();const D=u.params,U=at/u.tileSize/u.scale,W=rc(D.filter),X=u.queryGeometry,re=u.queryPadding*U,de=oh(X),_e=this.grid.query(de.minX-re,de.minY-re,de.maxX+re,de.maxY+re),Re=oh(u.cameraQueryGeometry),ze=this.grid3D.query(Re.minX-re,Re.minY-re,Re.maxX+re,Re.maxY+re,(At,Ct,Nt,Et)=>function(Le,lt,Ot,An,zn){for(const fn of Le)if(lt<=fn.x&&Ot<=fn.y&&An>=fn.x&&zn>=fn.y)return!0;const Cn=[new P(lt,Ot),new P(lt,zn),new P(An,zn),new P(An,Ot)];if(Le.length>2){for(const fn of Cn)if(Jd(Le,fn))return!0}for(let fn=0;fn<Le.length-1;fn++)if(eh(Le[fn],Le[fn+1],Cn))return!0;return!1}(u.cameraQueryGeometry,At-re,Ct-re,Nt+re,Et+re));for(const At of ze)_e.push(At);_e.sort(T3);const Ge={};let et;for(let At=0;At<_e.length;At++){const Ct=_e[At];if(Ct===et)continue;et=Ct;const Nt=this.featureIndexArray.get(Ct);let Et=null;this.loadMatchingFeature(Ge,Nt.bucketIndex,Nt.sourceLayerIndex,Nt.featureIndex,W,D.layers,D.availableImages,f,v,M,(Le,lt,Ot)=>(Et||(Et=dc(Le)),lt.queryIntersectsFeature({queryGeometry:X,feature:Le,featureState:Ot,geometry:Et,zoom:this.z,transform:u.transform,pixelsToTileUnits:U,pixelPosMatrix:u.pixelPosMatrix})))}return Ge}loadMatchingFeature(u,f,v,M,D,U,W,X,re,de,_e){const Re=this.bucketLayerIDs[f];if(U&&!Re.some(At=>U.has(At)))return;const ze=this.sourceLayerCoder.decode(v),Ge=this.vtLayers[ze].feature(M);if(D.needGeometry){const At=hc(Ge,!0);if(!D.filter(new Fo(this.tileID.overscaledZ),At,this.tileID.canonical))return}else if(!D.filter(new Fo(this.tileID.overscaledZ),Ge))return;const et=this.getId(Ge,ze);for(let At=0;At<Re.length;At++){const Ct=Re[At];if(U&&!U.has(Ct))continue;const Nt=X[Ct];if(!Nt)continue;let Et={};et&&de&&(Et=de.getState(Nt.sourceLayer||"_geojsonTileLayer",et));const Le=gt({},re[Ct]);Le.paint=O_(Le.paint,Nt.paint,Ge,Et,W),Le.layout=O_(Le.layout,Nt.layout,Ge,Et,W);const lt=!_e||_e(Ge,Nt,Et);if(!lt)continue;const Ot=new E_(Ge,this.z,this.x,this.y,et);Ot.layer=Le;let An=u[Ct];An===void 0&&(An=u[Ct]=[]),An.push({featureIndex:M,feature:Ot,intersectionZ:lt})}}lookupSymbolFeatures(u,f,v,M,D,U,W,X){const re={};this.loadVTLayers();const de=rc(D);for(const _e of u)this.loadMatchingFeature(re,v,M,_e,de,U,W,X,f);return re}hasLayer(u){for(const f of this.bucketLayerIDs)for(const v of f)if(u===v)return!0;return!1}getId(u,f){var v;let M=u.id;return this.promoteId&&(M=u.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[f]],typeof M=="boolean"&&(M=Number(M)),M===void 0&&(!((v=u.properties)===null||v===void 0)&&v.cluster)&&this.promoteId&&(M=Number(u.properties.cluster_id))),M}}function O_(h,u,f,v,M){return Kt(h,(D,U)=>{const W=u instanceof hs?u.get(U):null;return W&&W.evaluate?W.evaluate(f,v,M):W})}function oh(h){let u=1/0,f=1/0,v=-1/0,M=-1/0;for(const D of h)u=Math.min(u,D.x),f=Math.min(f,D.y),v=Math.max(v,D.x),M=Math.max(M,D.y);return{minX:u,minY:f,maxX:v,maxY:M}}function T3(h,u){return u-h}function I_(h,u,f,v,M){const D=[];for(let U=0;U<h.length;U++){const W=h[U];let X;for(let re=0;re<W.length-1;re++){let de=W[re],_e=W[re+1];de.x<u&&_e.x<u||(de.x<u?de=new P(u,de.y+(u-de.x)/(_e.x-de.x)*(_e.y-de.y))._round():_e.x<u&&(_e=new P(u,de.y+(u-de.x)/(_e.x-de.x)*(_e.y-de.y))._round()),de.y<f&&_e.y<f||(de.y<f?de=new P(de.x+(f-de.y)/(_e.y-de.y)*(_e.x-de.x),f)._round():_e.y<f&&(_e=new P(de.x+(f-de.y)/(_e.y-de.y)*(_e.x-de.x),f)._round()),de.x>=v&&_e.x>=v||(de.x>=v?de=new P(v,de.y+(v-de.x)/(_e.x-de.x)*(_e.y-de.y))._round():_e.x>=v&&(_e=new P(v,de.y+(v-de.x)/(_e.x-de.x)*(_e.y-de.y))._round()),de.y>=M&&_e.y>=M||(de.y>=M?de=new P(de.x+(M-de.y)/(_e.y-de.y)*(_e.x-de.x),M)._round():_e.y>=M&&(_e=new P(de.x+(M-de.y)/(_e.y-de.y)*(_e.x-de.x),M)._round()),X&&de.equals(X[X.length-1])||(X=[de],D.push(X)),X.push(_e)))))}}return D}hr("FeatureIndex",B_,{omit:["rawTileData","sourceLayerCoder"]});class rd extends P{constructor(u,f,v,M){super(u,f),this.angle=v,M!==void 0&&(this.segment=M)}clone(){return new rd(this.x,this.y,this.angle,this.segment)}}function So(h,u,f,v,M){if(u.segment===void 0||f===0)return!0;let D=u,U=u.segment+1,W=0;for(;W>-f/2;){if(U--,U<0)return!1;W-=h[U].dist(D),D=h[U]}W+=h[U].dist(h[U+1]),U++;const X=[];let re=0;for(;W<f/2;){const de=h[U],_e=h[U+1];if(!_e)return!1;let Re=h[U-1].angleTo(de)-de.angleTo(_e);for(Re=Math.abs((Re+3*Math.PI)%(2*Math.PI)-Math.PI),X.push({distance:W,angleDelta:Re}),re+=Re;W-X[0].distance>v;)re-=X.shift().angleDelta;if(re>M)return!1;U++,W+=de.dist(_e)}return!0}function k_(h){let u=0;for(let f=0;f<h.length-1;f++)u+=h[f].dist(h[f+1]);return u}function Rc(h,u,f){return h?.6*u*f:0}function Gl(h,u){return Math.max(h?h.right-h.left:0,u?u.right-u.left:0)}function P3(h,u,f,v,M,D){const U=Rc(f,M,D),W=Gl(f,v)*D;let X=0;const re=k_(h)/2;for(let de=0;de<h.length-1;de++){const _e=h[de],Re=h[de+1],ze=_e.dist(Re);if(X+ze>re){const Ge=(re-X)/ze,et=Zi.number(_e.x,Re.x,Ge),At=Zi.number(_e.y,Re.y,Ge),Ct=new rd(et,At,Re.angleTo(_e),de);return Ct._round(),!U||So(h,Ct,W,U,u)?Ct:void 0}X+=ze}}function Up(h,u,f,v,M,D,U,W,X){const re=Rc(v,D,U),de=Gl(v,M),_e=de*U,Re=h[0].x===0||h[0].x===X||h[0].y===0||h[0].y===X;return u-_e<u/4&&(u=_e+u/4),T_(h,Re?u/2*W%u:(de/2+2*D)*U*W%u,u,re,f,_e,Re,!1,X)}function T_(h,u,f,v,M,D,U,W,X){const re=D/2,de=k_(h);let _e=0,Re=u-f,ze=[];for(let Ge=0;Ge<h.length-1;Ge++){const et=h[Ge],At=h[Ge+1],Ct=et.dist(At),Nt=At.angleTo(et);for(;Re+f<_e+Ct;){Re+=f;const Et=(Re-_e)/Ct,Le=Zi.number(et.x,At.x,Et),lt=Zi.number(et.y,At.y,Et);if(Le>=0&&Le<X&&lt>=0&&lt<X&&Re-re>=0&&Re+re<=de){const Ot=new rd(Le,lt,Nt,Ge);Ot._round(),v&&!So(h,Ot,D,v,M)||ze.push(Ot)}}_e+=Ct}return W||ze.length||U||(ze=T_(h,_e/2,f,v,M,D,U,!0,X)),ze}hr("Anchor",rd);const sg=QA;function P_(h,u,f,v){const M=[],D=h.image,U=D.pixelRatio,W=D.paddedRect.w-2*sg,X=D.paddedRect.h-2*sg;let re={x1:h.left,y1:h.top,x2:h.right,y2:h.bottom};const de=D.stretchX||[[0,W]],_e=D.stretchY||[[0,X]],Re=(kn,jr)=>kn+jr[1]-jr[0],ze=de.reduce(Re,0),Ge=_e.reduce(Re,0),et=W-ze,At=X-Ge;let Ct=0,Nt=ze,Et=0,Le=Ge,lt=0,Ot=et,An=0,zn=At;if(D.content&&v){const kn=D.content,jr=kn[2]-kn[0],mi=kn[3]-kn[1];(D.textFitWidth||D.textFitHeight)&&(re=Fp(h)),Ct=u1(de,0,kn[0]),Et=u1(_e,0,kn[1]),Nt=u1(de,kn[0],kn[2]),Le=u1(_e,kn[1],kn[3]),lt=kn[0]-Ct,An=kn[1]-Et,Ot=jr-Nt,zn=mi-Le}const Cn=re.x1,fn=re.y1,jn=re.x2-Cn,Wn=re.y2-fn,cr=(kn,jr,mi,ci)=>{const Zr=a0(kn.stretch-Ct,Nt,jn,Cn),jo=A1(kn.fixed-lt,Ot,kn.stretch,ze),al=a0(jr.stretch-Et,Le,Wn,fn),hu=A1(jr.fixed-An,zn,jr.stretch,Ge),bA=a0(mi.stretch-Ct,Nt,jn,Cn),od=A1(mi.fixed-lt,Ot,mi.stretch,ze),gc=a0(ci.stretch-Et,Le,Wn,fn),tA=A1(ci.fixed-An,zn,ci.stretch,Ge),Va=new P(Zr,al),ku=new P(bA,al),nA=new P(bA,gc),vl=new P(Zr,gc),yc=new P(jo/U,hu/U),Rd=new P(od/U,tA/U),Tu=u*Math.PI/180;if(Tu){const pu=Math.sin(Tu),mu=Math.cos(Tu),Ql=[mu,-pu,pu,mu];Va._matMult(Ql),ku._matMult(Ql),vl._matMult(Ql),nA._matMult(Ql)}const Fc=kn.stretch+kn.fixed,fu=jr.stretch+jr.fixed;return{tl:Va,tr:ku,bl:vl,br:nA,tex:{x:D.paddedRect.x+sg+Fc,y:D.paddedRect.y+sg+fu,w:mi.stretch+mi.fixed-Fc,h:ci.stretch+ci.fixed-fu},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:yc,pixelOffsetBR:Rd,minFontScaleX:Ot/U/jn,minFontScaleY:zn/U/Wn,isSDF:f}};if(v&&(D.stretchX||D.stretchY)){const kn=K_(de,et,ze),jr=K_(_e,At,Ge);for(let mi=0;mi<kn.length-1;mi++){const ci=kn[mi],Zr=kn[mi+1];for(let jo=0;jo<jr.length-1;jo++)M.push(cr(ci,jr[jo],Zr,jr[jo+1]))}}else M.push(cr({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:W+1},{fixed:0,stretch:X+1}));return M}function u1(h,u,f){let v=0;for(const M of h)v+=Math.max(u,Math.min(f,M[1]))-Math.max(u,Math.min(f,M[0]));return v}function K_(h,u,f){const v=[{fixed:-1,stretch:0}];for(const[M,D]of h){const U=v[v.length-1];v.push({fixed:M-U.stretch,stretch:U.stretch}),v.push({fixed:M-U.stretch,stretch:U.stretch+(D-M)})}return v.push({fixed:u+sg,stretch:f}),v}function a0(h,u,f,v){return h/u*f+v}function A1(h,u,f,v){return h-u*f/v}class sh{constructor(u,f,v,M,D,U,W,X,re,de){var _e;if(this.boxStartIndex=u.length,re){let Re=U.top,ze=U.bottom;const Ge=U.collisionPadding;Ge&&(Re-=Ge[1],ze+=Ge[3]);let et=ze-Re;et>0&&(et=Math.max(10,et),this.circleDiameter=et)}else{const Re=!((_e=U.image)===null||_e===void 0)&&_e.content&&(U.image.textFitWidth||U.image.textFitHeight)?Fp(U):{x1:U.left,y1:U.top,x2:U.right,y2:U.bottom};Re.y1=Re.y1*W-X[0],Re.y2=Re.y2*W+X[2],Re.x1=Re.x1*W-X[3],Re.x2=Re.x2*W+X[1];const ze=U.collisionPadding;if(ze&&(Re.x1-=ze[0]*W,Re.y1-=ze[1]*W,Re.x2+=ze[2]*W,Re.y2+=ze[3]*W),de){const Ge=new P(Re.x1,Re.y1),et=new P(Re.x2,Re.y1),At=new P(Re.x1,Re.y2),Ct=new P(Re.x2,Re.y2),Nt=de*Math.PI/180;Ge._rotate(Nt),et._rotate(Nt),At._rotate(Nt),Ct._rotate(Nt),Re.x1=Math.min(Ge.x,et.x,At.x,Ct.x),Re.x2=Math.max(Ge.x,et.x,At.x,Ct.x),Re.y1=Math.min(Ge.y,et.y,At.y,Ct.y),Re.y2=Math.max(Ge.y,et.y,At.y,Ct.y)}u.emplaceBack(f.x,f.y,Re.x1,Re.y1,Re.x2,Re.y2,v,M,D)}this.boxEndIndex=u.length}}class D_{constructor(u=[],f=(v,M)=>v<M?-1:v>M?1:0){if(this.data=u,this.length=this.data.length,this.compare=f,this.length>0)for(let v=(this.length>>1)-1;v>=0;v--)this._down(v)}push(u){this.data.push(u),this._up(this.length++)}pop(){if(this.length===0)return;const u=this.data[0],f=this.data.pop();return--this.length>0&&(this.data[0]=f,this._down(0)),u}peek(){return this.data[0]}_up(u){const{data:f,compare:v}=this,M=f[u];for(;u>0;){const D=u-1>>1,U=f[D];if(v(M,U)>=0)break;f[u]=U,u=D}f[u]=M}_down(u){const{data:f,compare:v}=this,M=this.length>>1,D=f[u];for(;u<M;){let U=1+(u<<1);const W=U+1;if(W<this.length&&v(f[W],f[U])<0&&(U=W),v(f[U],D)>=0)break;f[u]=f[U],u=U}f[u]=D}}function c1(h,u=1,f=!1){let v=1/0,M=1/0,D=-1/0,U=-1/0;const W=h[0];for(let ze=0;ze<W.length;ze++){const Ge=W[ze];(!ze||Ge.x<v)&&(v=Ge.x),(!ze||Ge.y<M)&&(M=Ge.y),(!ze||Ge.x>D)&&(D=Ge.x),(!ze||Ge.y>U)&&(U=Ge.y)}const X=Math.min(D-v,U-M);let re=X/2;const de=new D_([],Tl);if(X===0)return new P(v,M);for(let ze=v;ze<D;ze+=X)for(let Ge=M;Ge<U;Ge+=X)de.push(new Fa(ze+re,Ge+re,re,h));let _e=function(ze){let Ge=0,et=0,At=0;const Ct=ze[0];for(let Nt=0,Et=Ct.length,Le=Et-1;Nt<Et;Le=Nt++){const lt=Ct[Nt],Ot=Ct[Le],An=lt.x*Ot.y-Ot.x*lt.y;et+=(lt.x+Ot.x)*An,At+=(lt.y+Ot.y)*An,Ge+=3*An}return new Fa(et/Ge,At/Ge,0,ze)}(h),Re=de.length;for(;de.length;){const ze=de.pop();(ze.d>_e.d||!_e.d)&&(_e=ze,f&&console.log("found best %d after %d probes",Math.round(1e4*ze.d)/1e4,Re)),ze.max-_e.d<=u||(re=ze.h/2,de.push(new Fa(ze.p.x-re,ze.p.y-re,re,h)),de.push(new Fa(ze.p.x+re,ze.p.y-re,re,h)),de.push(new Fa(ze.p.x-re,ze.p.y+re,re,h)),de.push(new Fa(ze.p.x+re,ze.p.y+re,re,h)),Re+=4)}return f&&(console.log(`num probes: ${Re}`),console.log(`best distance: ${_e.d}`)),_e.p}function Tl(h,u){return u.max-h.max}function Fa(h,u,f,v){this.p=new P(h,u),this.h=f,this.d=function(M,D){let U=!1,W=1/0;for(let X=0;X<D.length;X++){const re=D[X];for(let de=0,_e=re.length,Re=_e-1;de<_e;Re=de++){const ze=re[de],Ge=re[Re];ze.y>M.y!=Ge.y>M.y&&M.x<(Ge.x-ze.x)*(M.y-ze.y)/(Ge.y-ze.y)+ze.x&&(U=!U),W=Math.min(W,Xd(M,ze,Ge))}}return(U?1:-1)*Math.sqrt(W)}(this.p,v),this.max=this.d+this.h*Math.SQRT2}var eA;a.av=void 0,(eA=a.av||(a.av={}))[eA.center=1]="center",eA[eA.left=2]="left",eA[eA.right=3]="right",eA[eA.top=4]="top",eA[eA.bottom=5]="bottom",eA[eA["top-left"]=6]="top-left",eA[eA["top-right"]=7]="top-right",eA[eA["bottom-left"]=8]="bottom-left",eA[eA["bottom-right"]=9]="bottom-right";const zp=7,uv=Number.POSITIVE_INFINITY;function R_(h,u){return u[1]!==uv?function(f,v,M){let D=0,U=0;switch(v=Math.abs(v),M=Math.abs(M),f){case"top-right":case"top-left":case"top":U=M-zp;break;case"bottom-right":case"bottom-left":case"bottom":U=-M+zp}switch(f){case"top-right":case"bottom-right":case"right":D=-v;break;case"top-left":case"bottom-left":case"left":D=v}return[D,U]}(h,u[0],u[1]):function(f,v){let M=0,D=0;v<0&&(v=0);const U=v/Math.SQRT2;switch(f){case"top-right":case"top-left":D=U-zp;break;case"bottom-right":case"bottom-left":D=-U+zp;break;case"bottom":D=-v+zp;break;case"top":D=v-zp}switch(f){case"top-right":case"bottom-right":M=-U;break;case"top-left":case"bottom-left":M=U;break;case"left":M=v;break;case"right":M=-v}return[M,D]}(h,u[0])}function F_(h,u,f){var v;const M=h.layout,D=(v=M.get("text-variable-anchor-offset"))===null||v===void 0?void 0:v.evaluate(u,{},f);if(D){const W=D.values,X=[];for(let re=0;re<W.length;re+=2){const de=X[re]=W[re],_e=W[re+1].map(Re=>Re*Il);de.startsWith("top")?_e[1]-=zp:de.startsWith("bottom")&&(_e[1]+=zp),X[re+1]=_e}return new wo(X)}const U=M.get("text-variable-anchor");if(U){let W;W=h._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[M.get("text-radial-offset").evaluate(u,{},f)*Il,uv]:M.get("text-offset").evaluate(u,{},f).map(re=>re*Il);const X=[];for(const re of U)X.push(re,R_(re,W));return new wo(X)}return null}function Av(h){switch(h){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function K3(h,u,f,v,M,D,U,W,X,re,de,_e){let Re=D.textMaxSize.evaluate(u,{});Re===void 0&&(Re=U);const ze=h.layers[0].layout,Ge=ze.get("icon-offset").evaluate(u,{},de),et=l0(f.horizontal),At=U/24,Ct=h.tilePixelRatio*At,Nt=h.tilePixelRatio*Re/24,Et=h.tilePixelRatio*W,Le=h.tilePixelRatio*ze.get("symbol-spacing"),lt=ze.get("text-padding")*h.tilePixelRatio,Ot=function(mi,ci,Zr,jo=1){const al=mi.get("icon-padding").evaluate(ci,{},Zr),hu=al&&al.values;return[hu[0]*jo,hu[1]*jo,hu[2]*jo,hu[3]*jo]}(ze,u,de,h.tilePixelRatio),An=ze.get("text-max-angle")/180*Math.PI,zn=ze.get("text-rotation-alignment")!=="viewport"&&ze.get("symbol-placement")!=="point",Cn=ze.get("icon-rotation-alignment")==="map"&&ze.get("symbol-placement")!=="point",fn=ze.get("symbol-placement"),jn=Le/2,Wn=ze.get("icon-text-fit");let cr;v&&Wn!=="none"&&(h.allowVerticalPlacement&&f.vertical&&(cr=_m(v,f.vertical,Wn,ze.get("icon-text-fit-padding"),Ge,At)),et&&(v=_m(v,et,Wn,ze.get("icon-text-fit-padding"),Ge,At)));const kn=de?_e.line.getGranularityForZoomLevel(de.z):1,jr=(mi,ci)=>{ci.x<0||ci.x>=at||ci.y<0||ci.y>=at||function(Zr,jo,al,hu,bA,od,gc,tA,Va,ku,nA,vl,yc,Rd,Tu,Fc,fu,pu,mu,Ql,ba,Nh,A0,Wh,D3){const c0=Zr.addToLineVertexArray(jo,al);let wm,d0,h0,f0,j_=0,N_=0,W_=0,G_=0,pv=-1,mv=-1;const sp={};let Q_=Xo("");if(Zr.allowVerticalPlacement&&hu.vertical){const qA=tA.layout.get("text-rotate").evaluate(ba,{},Wh)+90;h0=new sh(Va,jo,ku,nA,vl,hu.vertical,yc,Rd,Tu,qA),gc&&(f0=new sh(Va,jo,ku,nA,vl,gc,fu,pu,Tu,qA))}if(bA){const qA=tA.layout.get("icon-rotate").evaluate(ba,{}),Ha=tA.layout.get("icon-text-fit")!=="none",ap=P_(bA,qA,A0,Ha),Qh=gc?P_(gc,qA,A0,Ha):void 0;d0=new sh(Va,jo,ku,nA,vl,bA,fu,pu,!1,qA),j_=4*ap.length;const Mm=Zr.iconSizeData;let If=null;Mm.kind==="source"?(If=[Kd*tA.layout.get("icon-size").evaluate(ba,{})],If[0]>Bf&&it(`${Zr.layerIds[0]}: Value for "icon-size" is >= ${Ef}. Reduce your "icon-size".`)):Mm.kind==="composite"&&(If=[Kd*Nh.compositeIconSizes[0].evaluate(ba,{},Wh),Kd*Nh.compositeIconSizes[1].evaluate(ba,{},Wh)],(If[0]>Bf||If[1]>Bf)&&it(`${Zr.layerIds[0]}: Value for "icon-size" is >= ${Ef}. Reduce your "icon-size".`)),Zr.addSymbols(Zr.icon,ap,If,Ql,mu,ba,a.ai.none,jo,c0.lineStartIndex,c0.lineLength,-1,Wh),pv=Zr.icon.placedSymbolArray.length-1,Qh&&(N_=4*Qh.length,Zr.addSymbols(Zr.icon,Qh,If,Ql,mu,ba,a.ai.vertical,jo,c0.lineStartIndex,c0.lineLength,-1,Wh),mv=Zr.icon.placedSymbolArray.length-1)}const q_=Object.keys(hu.horizontal);for(const qA of q_){const Ha=hu.horizontal[qA];if(!wm){Q_=Xo(Ha.text);const Qh=tA.layout.get("text-rotate").evaluate(ba,{},Wh);wm=new sh(Va,jo,ku,nA,vl,Ha,yc,Rd,Tu,Qh)}const ap=Ha.positionedLines.length===1;if(W_+=cv(Zr,jo,Ha,od,tA,Tu,ba,Fc,c0,hu.vertical?a.ai.horizontal:a.ai.horizontalOnly,ap?q_:[qA],sp,pv,Nh,Wh),ap)break}hu.vertical&&(G_+=cv(Zr,jo,hu.vertical,od,tA,Tu,ba,Fc,c0,a.ai.vertical,["vertical"],sp,mv,Nh,Wh));const R3=wm?wm.boxStartIndex:Zr.collisionBoxArray.length,F3=wm?wm.boxEndIndex:Zr.collisionBoxArray.length,L3=h0?h0.boxStartIndex:Zr.collisionBoxArray.length,U3=h0?h0.boxEndIndex:Zr.collisionBoxArray.length,z3=d0?d0.boxStartIndex:Zr.collisionBoxArray.length,gv=d0?d0.boxEndIndex:Zr.collisionBoxArray.length,Y_=f0?f0.boxStartIndex:Zr.collisionBoxArray.length,$_=f0?f0.boxEndIndex:Zr.collisionBoxArray.length;let Gh=-1;const p1=(qA,Ha)=>qA&&qA.circleDiameter?Math.max(qA.circleDiameter,Ha):Ha;Gh=p1(wm,Gh),Gh=p1(h0,Gh),Gh=p1(d0,Gh),Gh=p1(f0,Gh);const V_=Gh>-1?1:0;V_&&(Gh*=D3/Il),Zr.glyphOffsetArray.length>=le.MAX_GLYPHS&&it("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),ba.sortKey!==void 0&&Zr.addToSortKeyRanges(Zr.symbolInstances.length,ba.sortKey);const yv=F_(tA,ba,Wh),[j3,N3]=function(qA,Ha){const ap=qA.length,Qh=Ha==null?void 0:Ha.values;if((Qh==null?void 0:Qh.length)>0)for(let Mm=0;Mm<Qh.length;Mm+=2){const If=Qh[Mm+1];qA.emplaceBack(a.av[Qh[Mm]],If[0],If[1])}return[ap,qA.length]}(Zr.textAnchorOffsets,yv);Zr.symbolInstances.emplaceBack(jo.x,jo.y,sp.right>=0?sp.right:-1,sp.center>=0?sp.center:-1,sp.left>=0?sp.left:-1,sp.vertical||-1,pv,mv,Q_,R3,F3,L3,U3,z3,gv,Y_,$_,ku,W_,G_,j_,N_,V_,0,yc,Gh,j3,N3)}(h,ci,mi,f,v,M,cr,h.layers[0],h.collisionBoxArray,u.index,u.sourceLayerIndex,h.index,Ct,[lt,lt,lt,lt],zn,X,Et,Ot,Cn,Ge,u,D,re,de,U)};if(fn==="line")for(const mi of I_(u.geometry,0,0,at,at)){const ci=Vn(mi,kn),Zr=Up(ci,Le,An,f.vertical||et,v,24,Nt,h.overscaling,at);for(const jo of Zr)et&&dv(h,et.text,jn,jo)||jr(ci,jo)}else if(fn==="line-center"){for(const mi of u.geometry)if(mi.length>1){const ci=Vn(mi,kn),Zr=P3(ci,An,f.vertical||et,v,24,Nt);Zr&&jr(ci,Zr)}}else if(u.type==="Polygon")for(const mi of xl(u.geometry,0)){const ci=c1(mi,16);jr(Vn(mi[0],kn,!0),new rd(ci.x,ci.y,0))}else if(u.type==="LineString")for(const mi of u.geometry){const ci=Vn(mi,kn);jr(ci,new rd(ci[0].x,ci[0].y,0))}else if(u.type==="Point")for(const mi of u.geometry)for(const ci of mi)jr([ci],new rd(ci.x,ci.y,0))}function cv(h,u,f,v,M,D,U,W,X,re,de,_e,Re,ze,Ge){const et=function(Nt,Et,Le,lt,Ot,An,zn,Cn){const fn=lt.layout.get("text-rotate").evaluate(An,{})*Math.PI/180,jn=[];for(const Wn of Et.positionedLines)for(const cr of Wn.positionedGlyphs){if(!cr.rect)continue;const kn=cr.rect||{};let jr=sv+1,mi=!0,ci=1,Zr=0;const jo=(Ot||Cn)&&cr.vertical,al=cr.metrics.advance*cr.scale/2;if(Cn&&Et.verticalizable&&(Zr=Wn.lineOffset/2-(cr.imageName?-(Il-cr.metrics.width*cr.scale)/2:(cr.scale-1)*Il)),cr.imageName){const pu=zn[cr.imageName];mi=pu.sdf,ci=pu.pixelRatio,jr=QA/ci}const hu=Ot?[cr.x+al,cr.y]:[0,0];let bA=Ot?[0,0]:[cr.x+al+Le[0],cr.y+Le[1]-Zr],od=[0,0];jo&&(od=bA,bA=[0,0]);const gc=cr.metrics.isDoubleResolution?2:1,tA=(cr.metrics.left-jr)*cr.scale-al+bA[0],Va=(-cr.metrics.top-jr)*cr.scale+bA[1],ku=tA+kn.w/gc*cr.scale/ci,nA=Va+kn.h/gc*cr.scale/ci,vl=new P(tA,Va),yc=new P(ku,Va),Rd=new P(tA,nA),Tu=new P(ku,nA);if(jo){const pu=new P(-al,al-Jm),mu=-Math.PI/2,Ql=Il/2-al,ba=new P(5-Jm-Ql,-(cr.imageName?Ql:0)),Nh=new P(...od);vl._rotateAround(mu,pu)._add(ba)._add(Nh),yc._rotateAround(mu,pu)._add(ba)._add(Nh),Rd._rotateAround(mu,pu)._add(ba)._add(Nh),Tu._rotateAround(mu,pu)._add(ba)._add(Nh)}if(fn){const pu=Math.sin(fn),mu=Math.cos(fn),Ql=[mu,-pu,pu,mu];vl._matMult(Ql),yc._matMult(Ql),Rd._matMult(Ql),Tu._matMult(Ql)}const Fc=new P(0,0),fu=new P(0,0);jn.push({tl:vl,tr:yc,bl:Rd,br:Tu,tex:kn,writingMode:Et.writingMode,glyphOffset:hu,sectionIndex:cr.sectionIndex,isSDF:mi,pixelOffsetTL:Fc,pixelOffsetBR:fu,minFontScaleX:0,minFontScaleY:0})}return jn}(0,f,W,M,D,U,v,h.allowVerticalPlacement),At=h.textSizeData;let Ct=null;At.kind==="source"?(Ct=[Kd*M.layout.get("text-size").evaluate(U,{})],Ct[0]>Bf&&it(`${h.layerIds[0]}: Value for "text-size" is >= ${Ef}. Reduce your "text-size".`)):At.kind==="composite"&&(Ct=[Kd*ze.compositeTextSizes[0].evaluate(U,{},Ge),Kd*ze.compositeTextSizes[1].evaluate(U,{},Ge)],(Ct[0]>Bf||Ct[1]>Bf)&&it(`${h.layerIds[0]}: Value for "text-size" is >= ${Ef}. Reduce your "text-size".`)),h.addSymbols(h.text,et,Ct,W,D,U,re,u,X.lineStartIndex,X.lineLength,Re,Ge);for(const Nt of de)_e[Nt]=h.text.placedSymbolArray.length-1;return 4*et.length}function l0(h){for(const u in h)return h[u];return null}function dv(h,u,f,v){const M=h.compareText;if(u in M){const D=M[u];for(let U=D.length-1;U>=0;U--)if(v.dist(D[U])<f)return!0}else M[u]=[];return M[u].push(v),!1}const L_=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class d1{static from(u){if(!(u instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[f,v]=new Uint8Array(u,0,2);if(f!==219)throw new Error("Data does not appear to be in a KDBush format.");const M=v>>4;if(M!==1)throw new Error(`Got v${M} data when expected v1.`);const D=L_[15&v];if(!D)throw new Error("Unrecognized array type.");const[U]=new Uint16Array(u,2,1),[W]=new Uint32Array(u,4,1);return new d1(W,U,D,u)}constructor(u,f=64,v=Float64Array,M){if(isNaN(u)||u<0)throw new Error(`Unpexpected numItems value: ${u}.`);this.numItems=+u,this.nodeSize=Math.min(Math.max(+f,2),65535),this.ArrayType=v,this.IndexArrayType=u<65536?Uint16Array:Uint32Array;const D=L_.indexOf(this.ArrayType),U=2*u*this.ArrayType.BYTES_PER_ELEMENT,W=u*this.IndexArrayType.BYTES_PER_ELEMENT,X=(8-W%8)%8;if(D<0)throw new Error(`Unexpected typed array class: ${v}.`);M&&M instanceof ArrayBuffer?(this.data=M,this.ids=new this.IndexArrayType(this.data,8,u),this.coords=new this.ArrayType(this.data,8+W+X,2*u),this._pos=2*u,this._finished=!0):(this.data=new ArrayBuffer(8+U+W+X),this.ids=new this.IndexArrayType(this.data,8,u),this.coords=new this.ArrayType(this.data,8+W+X,2*u),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+D]),new Uint16Array(this.data,2,1)[0]=f,new Uint32Array(this.data,4,1)[0]=u)}add(u,f){const v=this._pos>>1;return this.ids[v]=v,this.coords[this._pos++]=u,this.coords[this._pos++]=f,v}finish(){const u=this._pos>>1;if(u!==this.numItems)throw new Error(`Added ${u} items when expected ${this.numItems}.`);return u0(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(u,f,v,M){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:D,coords:U,nodeSize:W}=this,X=[0,D.length-1,0],re=[];for(;X.length;){const de=X.pop()||0,_e=X.pop()||0,Re=X.pop()||0;if(_e-Re<=W){for(let At=Re;At<=_e;At++){const Ct=U[2*At],Nt=U[2*At+1];Ct>=u&&Ct<=v&&Nt>=f&&Nt<=M&&re.push(D[At])}continue}const ze=Re+_e>>1,Ge=U[2*ze],et=U[2*ze+1];Ge>=u&&Ge<=v&&et>=f&&et<=M&&re.push(D[ze]),(de===0?u<=Ge:f<=et)&&(X.push(Re),X.push(ze-1),X.push(1-de)),(de===0?v>=Ge:M>=et)&&(X.push(ze+1),X.push(_e),X.push(1-de))}return re}within(u,f,v){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:M,coords:D,nodeSize:U}=this,W=[0,M.length-1,0],X=[],re=v*v;for(;W.length;){const de=W.pop()||0,_e=W.pop()||0,Re=W.pop()||0;if(_e-Re<=U){for(let At=Re;At<=_e;At++)U_(D[2*At],D[2*At+1],u,f)<=re&&X.push(M[At]);continue}const ze=Re+_e>>1,Ge=D[2*ze],et=D[2*ze+1];U_(Ge,et,u,f)<=re&&X.push(M[ze]),(de===0?u-v<=Ge:f-v<=et)&&(W.push(Re),W.push(ze-1),W.push(1-de)),(de===0?u+v>=Ge:f+v>=et)&&(W.push(ze+1),W.push(_e),W.push(1-de))}return X}}function u0(h,u,f,v,M,D){if(M-v<=f)return;const U=v+M>>1;id(h,u,U,v,M,D),u0(h,u,f,v,U-1,1-D),u0(h,u,f,U+1,M,1-D)}function id(h,u,f,v,M,D){for(;M>v;){if(M-v>600){const re=M-v+1,de=f-v+1,_e=Math.log(re),Re=.5*Math.exp(2*_e/3),ze=.5*Math.sqrt(_e*Re*(re-Re)/re)*(de-re/2<0?-1:1);id(h,u,f,Math.max(v,Math.floor(f-de*Re/re+ze)),Math.min(M,Math.floor(f+(re-de)*Re/re+ze)),D)}const U=u[2*f+D];let W=v,X=M;for(Of(h,u,v,f),u[2*M+D]>U&&Of(h,u,v,M);W<X;){for(Of(h,u,W,X),W++,X--;u[2*W+D]<U;)W++;for(;u[2*X+D]>U;)X--}u[2*v+D]===U?Of(h,u,v,X):(X++,Of(h,u,X,M)),X<=f&&(v=X+1),f<=X&&(M=X-1)}}function Of(h,u,f,v){hv(h,f,v),hv(u,2*f,2*v),hv(u,2*f+1,2*v+1)}function hv(h,u,f){const v=h[u];h[u]=h[f],h[f]=v}function U_(h,u,f,v){const M=h-f,D=u-v;return M*M+D*D}var fv;a.ce=void 0,(fv=a.ce||(a.ce={})).create="create",fv.load="load",fv.fullLoad="fullLoad";let h1=null,ag=[];const f1=1e3/60,jh="loadTime",Po="fullLoadTime",z_={mark(h){performance.mark(h)},frame(h){const u=h;h1!=null&&ag.push(u-h1),h1=u},clearMetrics(){h1=null,ag=[],performance.clearMeasures(jh),performance.clearMeasures(Po);for(const h in a.ce)performance.clearMarks(a.ce[h])},getPerformanceMetrics(){performance.measure(jh,a.ce.create,a.ce.load),performance.measure(Po,a.ce.create,a.ce.fullLoad);const h=performance.getEntriesByName(jh)[0].duration,u=performance.getEntriesByName(Po)[0].duration,f=ag.length,v=1/(ag.reduce((D,U)=>D+U,0)/f/1e3),M=ag.filter(D=>D>f1).reduce((D,U)=>D+(U-f1)/f1,0);return{loadTime:h,fullLoadTime:u,fps:v,percentDroppedFrames:M/(f+M)*100,totalFrames:f}}};a.$=xt,a.A=G,a.B=Ia,a.C=function(h){if(Ut==null){const u=h.navigator?h.navigator.userAgent:null;Ut=!!h.safari||!(!u||!(/\b(iPad|iPhone|iPod)\b/.test(u)||u.match("Safari")&&!u.match("Chrome")))}return Ut},a.D=Pr,a.E=tr,a.F=class{constructor(h,u){this.target=h,this.mapId=u,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new cn(()=>this.process()),this.subscription=function(f,v,M,D){return f.addEventListener(v,M,!1),{unsubscribe:()=>{f.removeEventListener(v,M,!1)}}}(this.target,"message",f=>this.receive(f)),this.globalScope=ft(self)?h:window}registerMessageHandler(h,u){this.messageHandlers[h]=u}sendAsync(h,u){return new Promise((f,v)=>{const M=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[M]={resolve:f,reject:v},u&&u.signal.addEventListener("abort",()=>{delete this.resolveRejects[M];const W={id:M,type:"<cancel>",origin:location.origin,targetMapId:h.targetMapId,sourceMapId:this.mapId};this.target.postMessage(W)},{once:!0});const D=[],U=Object.assign(Object.assign({},h),{id:M,sourceMapId:this.mapId,origin:location.origin,data:Sd(h.data,D)});this.target.postMessage(U,{transfer:D})})}receive(h){const u=h.data,f=u.id;if(!(u.origin!=="file://"&&location.origin!=="file://"&&u.origin!=="resource://android"&&location.origin!=="resource://android"&&u.origin!==location.origin||u.targetMapId&&this.mapId!==u.targetMapId)){if(u.type==="<cancel>"){delete this.tasks[f];const v=this.abortControllers[f];return delete this.abortControllers[f],void(v&&v.abort())}if(ft(self)||u.mustQueue)return this.tasks[f]=u,this.taskQueue.push(f),void this.invoker.trigger();this.processTask(f,u)}}process(){if(this.taskQueue.length===0)return;const h=this.taskQueue.shift(),u=this.tasks[h];delete this.tasks[h],this.taskQueue.length>0&&this.invoker.trigger(),u&&this.processTask(h,u)}processTask(h,u){return o(this,void 0,void 0,function*(){if(u.type==="<response>"){const M=this.resolveRejects[h];return delete this.resolveRejects[h],M?void(u.error?M.reject(ac(u.error)):M.resolve(ac(u.data))):void 0}if(!this.messageHandlers[u.type])return void this.completeTask(h,new Error(`Could not find a registered handler for ${u.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const f=ac(u.data),v=new AbortController;this.abortControllers[h]=v;try{const M=yield this.messageHandlers[u.type](u.sourceMapId,f,v);this.completeTask(h,null,M)}catch(M){this.completeTask(h,M)}})}completeTask(h,u,f){const v=[];delete this.abortControllers[h];const M={id:h,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:u?Sd(u):null,data:Sd(f,v)};this.target.postMessage(M,{transfer:v})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},a.G=vr,a.H=function(){var h=new G(16);return G!=Float32Array&&(h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[11]=0,h[12]=0,h[13]=0,h[14]=0),h[0]=1,h[5]=1,h[10]=1,h[15]=1,h},a.I=eg,a.J=function(h,u,f){var v,M,D,U,W,X,re,de,_e,Re,ze,Ge,et=f[0],At=f[1],Ct=f[2];return u===h?(h[12]=u[0]*et+u[4]*At+u[8]*Ct+u[12],h[13]=u[1]*et+u[5]*At+u[9]*Ct+u[13],h[14]=u[2]*et+u[6]*At+u[10]*Ct+u[14],h[15]=u[3]*et+u[7]*At+u[11]*Ct+u[15]):(M=u[1],D=u[2],U=u[3],W=u[4],X=u[5],re=u[6],de=u[7],_e=u[8],Re=u[9],ze=u[10],Ge=u[11],h[0]=v=u[0],h[1]=M,h[2]=D,h[3]=U,h[4]=W,h[5]=X,h[6]=re,h[7]=de,h[8]=_e,h[9]=Re,h[10]=ze,h[11]=Ge,h[12]=v*et+W*At+_e*Ct+u[12],h[13]=M*et+X*At+Re*Ct+u[13],h[14]=D*et+re*At+ze*Ct+u[14],h[15]=U*et+de*At+Ge*Ct+u[15]),h},a.K=function(h,u,f){var v=f[0],M=f[1],D=f[2];return h[0]=u[0]*v,h[1]=u[1]*v,h[2]=u[2]*v,h[3]=u[3]*v,h[4]=u[4]*M,h[5]=u[5]*M,h[6]=u[6]*M,h[7]=u[7]*M,h[8]=u[8]*D,h[9]=u[9]*D,h[10]=u[10]*D,h[11]=u[11]*D,h[12]=u[12],h[13]=u[13],h[14]=u[14],h[15]=u[15],h},a.L=function(h,u,f){var v=u[0],M=u[1],D=u[2],U=u[3],W=u[4],X=u[5],re=u[6],de=u[7],_e=u[8],Re=u[9],ze=u[10],Ge=u[11],et=u[12],At=u[13],Ct=u[14],Nt=u[15],Et=f[0],Le=f[1],lt=f[2],Ot=f[3];return h[0]=Et*v+Le*W+lt*_e+Ot*et,h[1]=Et*M+Le*X+lt*Re+Ot*At,h[2]=Et*D+Le*re+lt*ze+Ot*Ct,h[3]=Et*U+Le*de+lt*Ge+Ot*Nt,h[4]=(Et=f[4])*v+(Le=f[5])*W+(lt=f[6])*_e+(Ot=f[7])*et,h[5]=Et*M+Le*X+lt*Re+Ot*At,h[6]=Et*D+Le*re+lt*ze+Ot*Ct,h[7]=Et*U+Le*de+lt*Ge+Ot*Nt,h[8]=(Et=f[8])*v+(Le=f[9])*W+(lt=f[10])*_e+(Ot=f[11])*et,h[9]=Et*M+Le*X+lt*Re+Ot*At,h[10]=Et*D+Le*re+lt*ze+Ot*Ct,h[11]=Et*U+Le*de+lt*Ge+Ot*Nt,h[12]=(Et=f[12])*v+(Le=f[13])*W+(lt=f[14])*_e+(Ot=f[15])*et,h[13]=Et*M+Le*X+lt*Re+Ot*At,h[14]=Et*D+Le*re+lt*ze+Ot*Ct,h[15]=Et*U+Le*de+lt*Ge+Ot*Nt,h},a.M=function(h,u){const f={};for(let v=0;v<u.length;v++){const M=u[v];M in h&&(f[M]=h[M])}return f},a.N=dn,a.O=Oi,a.P=P,a.Q=Ii,a.R=cu,a.S=Dd,a.T=Vd,a.U=ie,a.V=te,a.W=_n,a.X=at,a.Y=nd,a.Z=lv,a._=o,a.a=Zn,a.a$=function(){return new Float64Array(16)},a.a0=h=>{const u=window.document.createElement("video");return u.muted=!0,new Promise(f=>{u.onloadstart=()=>{f(u)};for(const v of h){const M=window.document.createElement("source");fe(v)||(u.crossOrigin="Anonymous"),M.src=v,u.appendChild(M)}})},a.a1=function(){return Lt++},a.a2=K,a.a3=le,a.a4=rc,a.a5=hc,a.a6=E_,a.a7=function(h){const u={};if(h.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(f,v,M,D)=>{const U=M||D;return u[v]=!U||U.toLowerCase(),""}),u["max-age"]){const f=parseInt(u["max-age"],10);isNaN(f)?delete u["max-age"]:u["max-age"]=f}return u},a.a8=function(h){return Math.log(h)/Math.LN2},a.a9=function(h){var u=h[0],f=h[1];return u*u+f*f},a.aA=qs,a.aB=en,a.aC=ut,a.aD=pr,a.aE=yn,a.aF=85.051129,a.aG=function(h){return Math.pow(2,h)},a.aH=ji,a.aI=Yt,a.aJ=rr,a.aK=xs,a.aL=function(h,u,f){return h[0]=u[0]*f,h[1]=u[1]*f,h[2]=u[2]*f,h},a.aM=function(h,u,f){return h[0]=u[0]+f[0],h[1]=u[1]+f[1],h[2]=u[2]+f[2],h},a.aN=function(h){var u=new G(3);return u[0]=h[0],u[1]=h[1],u[2]=h[2],u},a.aO=function(h,u,f){return h[0]=u[0]*f[0],h[1]=u[1]*f[1],h[2]=u[2]*f[2],h[3]=u[3]*f[3],h},a.aP=function(h,u,f){return h[0]=u[0]-f[0],h[1]=u[1]-f[1],h[2]=u[2]-f[2],h},a.aQ=function(h,u){var f=u[0],v=u[1],M=u[2],D=f*f+v*v+M*M;return D>0&&(D=1/Math.sqrt(D)),h[0]=u[0]*D,h[1]=u[1]*D,h[2]=u[2]*D,h},a.aR=function(h,u,f){var v=u[0],M=u[1],D=u[2],U=f[0],W=f[1],X=f[2];return h[0]=M*X-D*W,h[1]=D*U-v*X,h[2]=v*W-M*U,h},a.aS=function(h,u){return h[0]*u[0]+h[1]*u[1]+h[2]*u[2]},a.aT=w_,a.aU=s0,a.aV=function(h,u,f,v,M){var D,U=1/Math.tan(u/2);return h[0]=U/f,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=U,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[11]=-1,h[12]=0,h[13]=0,h[15]=0,M!=null&&M!==1/0?(h[10]=(M+v)*(D=1/(v-M)),h[14]=2*M*v*D):(h[10]=-1,h[14]=-2*v),h},a.aW=function(h){var u=new G(16);return u[0]=h[0],u[1]=h[1],u[2]=h[2],u[3]=h[3],u[4]=h[4],u[5]=h[5],u[6]=h[6],u[7]=h[7],u[8]=h[8],u[9]=h[9],u[10]=h[10],u[11]=h[11],u[12]=h[12],u[13]=h[13],u[14]=h[14],u[15]=h[15],u},a.aX=function(h,u,f){var v=Math.sin(f),M=Math.cos(f),D=u[0],U=u[1],W=u[2],X=u[3],re=u[4],de=u[5],_e=u[6],Re=u[7];return u!==h&&(h[8]=u[8],h[9]=u[9],h[10]=u[10],h[11]=u[11],h[12]=u[12],h[13]=u[13],h[14]=u[14],h[15]=u[15]),h[0]=D*M+re*v,h[1]=U*M+de*v,h[2]=W*M+_e*v,h[3]=X*M+Re*v,h[4]=re*M-D*v,h[5]=de*M-U*v,h[6]=_e*M-W*v,h[7]=Re*M-X*v,h},a.aY=function(h,u,f){var v=Math.sin(f),M=Math.cos(f),D=u[4],U=u[5],W=u[6],X=u[7],re=u[8],de=u[9],_e=u[10],Re=u[11];return u!==h&&(h[0]=u[0],h[1]=u[1],h[2]=u[2],h[3]=u[3],h[12]=u[12],h[13]=u[13],h[14]=u[14],h[15]=u[15]),h[4]=D*M+re*v,h[5]=U*M+de*v,h[6]=W*M+_e*v,h[7]=X*M+Re*v,h[8]=re*M-D*v,h[9]=de*M-U*v,h[10]=_e*M-W*v,h[11]=Re*M-X*v,h},a.aZ=function(){const h=new Float32Array(16);return he(h),h},a.a_=function(){const h=new Float64Array(16);return he(h),h},a.aa=function(h){return h*Math.PI/180},a.ab=bt,a.ac=function(h,u){const f=[];for(const v in h)v in u||f.push(v);return f},a.ad=De,a.ae=function(h){return Math.hypot(h[0],h[1])},a.af=function(h){return h[0]=0,h[1]=0,h},a.ag=function(h,u,f){return h[0]=u[0]*f,h[1]=u[1]*f,h},a.ah=function(h,u){let f=0,v=0;if(h.kind==="constant")v=h.layoutSize;else if(h.kind!=="source"){const{interpolationType:M,minZoom:D,maxZoom:U}=h,W=M?bt(xr.interpolationFactor(M,u,D,U),0,1):0;h.kind==="camera"?v=Zi.number(h.minSize,h.maxSize,W):f=W}return{uSizeT:f,uSize:v}},a.aj=function(h,{uSize:u,uSizeT:f},{lowerSize:v,upperSize:M}){return h.kind==="source"?v/Kd:h.kind==="composite"?Zi.number(v/Kd,M/Kd,f):u},a.ak=m,a.al=me,a.am=function(h,u,f,v){const M=u.y-h.y,D=u.x-h.x,U=v.y-f.y,W=v.x-f.x,X=U*D-W*M;if(X===0)return null;const re=(W*(h.y-f.y)-U*(h.x-f.x))/X;return new P(h.x+re*D,h.y+re*M)},a.an=function(h,u){var f=u[0],v=u[1],M=u[2],D=u[3],U=u[4],W=u[5],X=u[6],re=u[7],de=u[8],_e=u[9],Re=u[10],ze=u[11],Ge=u[12],et=u[13],At=u[14],Ct=u[15],Nt=f*W-v*U,Et=f*X-M*U,Le=f*re-D*U,lt=v*X-M*W,Ot=v*re-D*W,An=M*re-D*X,zn=de*et-_e*Ge,Cn=de*At-Re*Ge,fn=de*Ct-ze*Ge,jn=_e*At-Re*et,Wn=_e*Ct-ze*et,cr=Re*Ct-ze*At,kn=Nt*cr-Et*Wn+Le*jn+lt*fn-Ot*Cn+An*zn;return kn?(h[0]=(W*cr-X*Wn+re*jn)*(kn=1/kn),h[1]=(M*Wn-v*cr-D*jn)*kn,h[2]=(et*An-At*Ot+Ct*lt)*kn,h[3]=(Re*Ot-_e*An-ze*lt)*kn,h[4]=(X*fn-U*cr-re*Cn)*kn,h[5]=(f*cr-M*fn+D*Cn)*kn,h[6]=(At*Le-Ge*An-Ct*Et)*kn,h[7]=(de*An-Re*Le+ze*Et)*kn,h[8]=(U*Wn-W*fn+re*zn)*kn,h[9]=(v*fn-f*Wn-D*zn)*kn,h[10]=(Ge*Ot-et*Le+Ct*Nt)*kn,h[11]=(_e*Le-de*Ot-ze*Nt)*kn,h[12]=(W*Cn-U*jn-X*zn)*kn,h[13]=(f*jn-v*Cn+M*zn)*kn,h[14]=(et*Et-Ge*lt-At*Nt)*kn,h[15]=(de*lt-_e*Et+Re*Nt)*kn,h):null},a.ao=I_,a.ap=Vf,a.aq=he,a.ar=function(h){let u=1/0,f=1/0,v=-1/0,M=-1/0;for(const D of h)u=Math.min(u,D.x),f=Math.min(f,D.y),v=Math.max(v,D.x),M=Math.max(M,D.y);return[u,f,v,M]},a.as=Il,a.at=Ze,a.au=function(h,u,f,v,M=!1){if(!f[0]&&!f[1])return[0,0];const D=M?v==="map"?-h.bearingInRadians:0:v==="viewport"?h.bearingInRadians:0;if(D){const U=Math.sin(D),W=Math.cos(D);f=[f[0]*W-f[1]*U,f[0]*U+f[1]*W]}return[M?f[0]:Ze(u,f[0],h.zoom),M?f[1]:Ze(u,f[1],h.zoom)]},a.aw=Lp,a.ax=Av,a.ay=i0,a.az=d1,a.b=rn,a.b$=h=>h.type==="line",a.b0=function(h,u,f){const v=new Float64Array(4);return function(M,D,U,W){var X=.5*Math.PI/180;D*=X,U*=X,W*=X;var re=Math.sin(D),de=Math.cos(D),_e=Math.sin(U),Re=Math.cos(U),ze=Math.sin(W),Ge=Math.cos(W);M[0]=re*Re*Ge-de*_e*ze,M[1]=de*_e*Ge+re*Re*ze,M[2]=de*Re*ze-re*_e*Ge,M[3]=de*Re*Ge+re*_e*ze}(v,h,u-90,f),v},a.b1=function(h,u,f,v){var M,D,U,W,X,re=u[0],de=u[1],_e=u[2],Re=u[3],ze=f[0],Ge=f[1],et=f[2],At=f[3];return(D=re*ze+de*Ge+_e*et+Re*At)<0&&(D=-D,ze=-ze,Ge=-Ge,et=-et,At=-At),1-D>ne?(M=Math.acos(D),U=Math.sin(M),W=Math.sin((1-v)*M)/U,X=Math.sin(v*M)/U):(W=1-v,X=v),h[0]=W*re+X*ze,h[1]=W*de+X*Ge,h[2]=W*_e+X*et,h[3]=W*Re+X*At,h},a.b2=function(h){const u=new Float64Array(9);var f,v,M,D,U,W,X,re,de,_e,Re,ze,Ge,et,At,Ct,Nt,Et;_e=(M=(v=h)[0])*(X=M+M),Re=(D=v[1])*X,Ge=(U=v[2])*X,et=U*(re=D+D),Ct=(W=v[3])*X,Nt=W*re,Et=W*(de=U+U),(f=u)[0]=1-(ze=D*re)-(At=U*de),f[3]=Re-Et,f[6]=Ge+Nt,f[1]=Re+Et,f[4]=1-_e-At,f[7]=et-Ct,f[2]=Ge-Nt,f[5]=et+Ct,f[8]=1-_e-ze;const Le=rr(-Math.asin(bt(u[2],-1,1)));let lt,Ot;return Math.hypot(u[5],u[8])<.001?(lt=0,Ot=-rr(Math.atan2(u[3],u[4]))):(lt=rr(u[5]===0&&u[8]===0?0:Math.atan2(u[5],u[8])),Ot=rr(u[1]===0&&u[0]===0?0:Math.atan2(u[1],u[0]))),{roll:lt,pitch:Le+90,bearing:Ot}},a.b3=function(h,u){return h.roll==u.roll&&h.pitch==u.pitch&&h.bearing==u.bearing},a.b4=ui,a.b5=Sl,a.b6=Qt,a.b7=wn,a.b8=Mt,a.b9=We,a.bA=Kt,a.bB=Ue,a.bC=class extends Ta{constructor(h,u){super(h,u),this.current=0}set(h){this.current!==h&&(this.current=h,this.gl.uniform1i(this.location,h))}},a.bD=class extends Ta{constructor(h,u){super(h,u),this.current=NA}set(h){if(h[12]!==this.current[12]||h[0]!==this.current[0])return this.current=h,void this.gl.uniformMatrix4fv(this.location,!1,h);for(let u=1;u<16;u++)if(h[u]!==this.current[u]){this.current=h,this.gl.uniformMatrix4fv(this.location,!1,h);break}}},a.bE=jA,a.bF=vA,a.bG=class extends Ta{constructor(h,u){super(h,u),this.current=[0,0,0]}set(h){h[0]===this.current[0]&&h[1]===this.current[1]&&h[2]===this.current[2]||(this.current=h,this.gl.uniform3f(this.location,h[0],h[1],h[2]))}},a.bH=class extends Ta{constructor(h,u){super(h,u),this.current=[0,0]}set(h){h[0]===this.current[0]&&h[1]===this.current[1]||(this.current=h,this.gl.uniform2f(this.location,h[0],h[1]))}},a.bI=oe,a.bJ=function(h,u){var f=Math.sin(u),v=Math.cos(u);return h[0]=v,h[1]=f,h[2]=0,h[3]=-f,h[4]=v,h[5]=0,h[6]=0,h[7]=0,h[8]=1,h},a.bK=function(h,u,f){var v=u[0],M=u[1],D=u[2];return h[0]=v*f[0]+M*f[3]+D*f[6],h[1]=v*f[1]+M*f[4]+D*f[7],h[2]=v*f[2]+M*f[5]+D*f[8],h},a.bL=function(h,u,f,v,M,D,U){var W=1/(u-f),X=1/(v-M),re=1/(D-U);return h[0]=-2*W,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=-2*X,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=2*re,h[11]=0,h[12]=(u+f)*W,h[13]=(M+v)*X,h[14]=(U+D)*re,h[15]=1,h},a.bM=class extends su{},a.bN=$0,a.bO=class extends au{},a.bP=Zu,a.bQ=function(h){return h<=1?1:Math.pow(2,Math.ceil(Math.log(h)/Math.LN2))},a.bR=rh,a.bS=function(h,u,f){var v=u[0],M=u[1],D=u[2],U=f[3]*v+f[7]*M+f[11]*D+f[15];return h[0]=(f[0]*v+f[4]*M+f[8]*D+f[12])/(U=U||1),h[1]=(f[1]*v+f[5]*M+f[9]*D+f[13])/U,h[2]=(f[2]*v+f[6]*M+f[10]*D+f[14])/U,h},a.bT=class extends zs{},a.bU=class extends c{},a.bV=function(h,u){return h[0]===u[0]&&h[1]===u[1]&&h[2]===u[2]&&h[3]===u[3]&&h[4]===u[4]&&h[5]===u[5]&&h[6]===u[6]&&h[7]===u[7]&&h[8]===u[8]&&h[9]===u[9]&&h[10]===u[10]&&h[11]===u[11]&&h[12]===u[12]&&h[13]===u[13]&&h[14]===u[14]&&h[15]===u[15]},a.bW=function(h,u){var f=h[0],v=h[1],M=h[2],D=h[3],U=h[4],W=h[5],X=h[6],re=h[7],de=h[8],_e=h[9],Re=h[10],ze=h[11],Ge=h[12],et=h[13],At=h[14],Ct=h[15],Nt=u[0],Et=u[1],Le=u[2],lt=u[3],Ot=u[4],An=u[5],zn=u[6],Cn=u[7],fn=u[8],jn=u[9],Wn=u[10],cr=u[11],kn=u[12],jr=u[13],mi=u[14],ci=u[15];return Math.abs(f-Nt)<=ne*Math.max(1,Math.abs(f),Math.abs(Nt))&&Math.abs(v-Et)<=ne*Math.max(1,Math.abs(v),Math.abs(Et))&&Math.abs(M-Le)<=ne*Math.max(1,Math.abs(M),Math.abs(Le))&&Math.abs(D-lt)<=ne*Math.max(1,Math.abs(D),Math.abs(lt))&&Math.abs(U-Ot)<=ne*Math.max(1,Math.abs(U),Math.abs(Ot))&&Math.abs(W-An)<=ne*Math.max(1,Math.abs(W),Math.abs(An))&&Math.abs(X-zn)<=ne*Math.max(1,Math.abs(X),Math.abs(zn))&&Math.abs(re-Cn)<=ne*Math.max(1,Math.abs(re),Math.abs(Cn))&&Math.abs(de-fn)<=ne*Math.max(1,Math.abs(de),Math.abs(fn))&&Math.abs(_e-jn)<=ne*Math.max(1,Math.abs(_e),Math.abs(jn))&&Math.abs(Re-Wn)<=ne*Math.max(1,Math.abs(Re),Math.abs(Wn))&&Math.abs(ze-cr)<=ne*Math.max(1,Math.abs(ze),Math.abs(cr))&&Math.abs(Ge-kn)<=ne*Math.max(1,Math.abs(Ge),Math.abs(kn))&&Math.abs(et-jr)<=ne*Math.max(1,Math.abs(et),Math.abs(jr))&&Math.abs(At-mi)<=ne*Math.max(1,Math.abs(At),Math.abs(mi))&&Math.abs(Ct-ci)<=ne*Math.max(1,Math.abs(Ct),Math.abs(ci))},a.bX=function(h,u){return h[0]=u[0],h[1]=u[1],h[2]=u[2],h[3]=u[3],h[4]=u[4],h[5]=u[5],h[6]=u[6],h[7]=u[7],h[8]=u[8],h[9]=u[9],h[10]=u[10],h[11]=u[11],h[12]=u[12],h[13]=u[13],h[14]=u[14],h[15]=u[15],h},a.bY=h=>h.type==="symbol",a.bZ=h=>h.type==="circle",a.b_=h=>h.type==="heatmap",a.ba=Me,a.bb=Gs,a.bc=function(h,u,f,v,M){return We(v,M,bt((h-u)/(f-u),0,1))},a.bd=Je,a.be=function(){return new Float64Array(4)},a.bf=function(){return new Float64Array(3)},a.bg=function(h,u,f,v){var M=[],D=[];return M[0]=u[0]-f[0],M[1]=u[1]-f[1],M[2]=u[2]-f[2],D[0]=M[0]*Math.cos(v)-M[1]*Math.sin(v),D[1]=M[0]*Math.sin(v)+M[1]*Math.cos(v),D[2]=M[2],h[0]=D[0]+f[0],h[1]=D[1]+f[1],h[2]=D[2]+f[2],h},a.bh=function(h,u,f,v){var M=[],D=[];return M[0]=u[0]-f[0],M[1]=u[1]-f[1],M[2]=u[2]-f[2],D[0]=M[0],D[1]=M[1]*Math.cos(v)-M[2]*Math.sin(v),D[2]=M[1]*Math.sin(v)+M[2]*Math.cos(v),h[0]=D[0]+f[0],h[1]=D[1]+f[1],h[2]=D[2]+f[2],h},a.bi=function(h,u,f,v){var M=[],D=[];return M[0]=u[0]-f[0],M[1]=u[1]-f[1],M[2]=u[2]-f[2],D[0]=M[2]*Math.sin(v)+M[0]*Math.cos(v),D[1]=M[1],D[2]=M[2]*Math.cos(v)-M[0]*Math.sin(v),h[0]=D[0]+f[0],h[1]=D[1]+f[1],h[2]=D[2]+f[2],h},a.bj=function(h,u,f){var v=Math.sin(f),M=Math.cos(f),D=u[0],U=u[1],W=u[2],X=u[3],re=u[8],de=u[9],_e=u[10],Re=u[11];return u!==h&&(h[4]=u[4],h[5]=u[5],h[6]=u[6],h[7]=u[7],h[12]=u[12],h[13]=u[13],h[14]=u[14],h[15]=u[15]),h[0]=D*M-re*v,h[1]=U*M-de*v,h[2]=W*M-_e*v,h[3]=X*M-Re*v,h[8]=D*v+re*M,h[9]=U*v+de*M,h[10]=W*v+_e*M,h[11]=X*v+Re*M,h},a.bk=function(h,u){const f=Je(h,360),v=Je(u,360),M=v-f,D=v>f?M-360:M+360;return Math.abs(M)<Math.abs(D)?M:D},a.bl=function(h){return h[0]=0,h[1]=0,h[2]=0,h},a.bm=function(h,u,f,v){const M=Math.sqrt(h*h+u*u),D=Math.sqrt(f*f+v*v);h/=M,u/=M,f/=D,v/=D;const U=Math.acos(h*f+u*v);return-u*f+h*v>0?U:-U},a.bn=function(h,u){return h[0]*u[0]+h[1]*u[1]+h[2]*u[2]+h[3]},a.bo=Xt,a.bp=function(h,u){const f=Je(h,2*Math.PI),v=Je(u,2*Math.PI);return Math.min(Math.abs(f-v),Math.abs(f-v+2*Math.PI),Math.abs(f-v-2*Math.PI))},a.bq=function(h){return Math.hypot(h[0],h[1],h[2])},a.br=function(){const h={},u=Oe.$version;for(const f in Oe.$root){const v=Oe.$root[f];if(v.required){let M=null;M=f==="version"?u:v.type==="array"?[]:{},M!=null&&(h[f]=M)}}return h},a.bs=nu,a.bt=Qe,a.bu=function(h){h=h.slice();const u=Object.create(null);for(let f=0;f<h.length;f++)u[h[f].id]=h[f];for(let f=0;f<h.length;f++)"ref"in h[f]&&(h[f]=ve(h[f],u[h[f].ref]));return h},a.bv=function(h){if(h.type==="custom")return new yl(h);switch(h.type){case"background":return new ir(h);case"circle":return new fm(h);case"fill":return new Ya(h);case"fill-extrusion":return new $m(h);case"heatmap":return new yf(h);case"hillshade":return new vf(h);case"line":return new q0(h);case"raster":return new ai(h);case"symbol":return new xn(h)}},a.bw=Pe,a.bx=function(h,u){if(!h)return[{command:"setStyle",args:[u]}];let f=[];try{if(!p(h.version,u.version))return[{command:"setStyle",args:[u]}];p(h.center,u.center)||f.push({command:"setCenter",args:[u.center]}),p(h.centerAltitude,u.centerAltitude)||f.push({command:"setCenterAltitude",args:[u.centerAltitude]}),p(h.zoom,u.zoom)||f.push({command:"setZoom",args:[u.zoom]}),p(h.bearing,u.bearing)||f.push({command:"setBearing",args:[u.bearing]}),p(h.pitch,u.pitch)||f.push({command:"setPitch",args:[u.pitch]}),p(h.roll,u.roll)||f.push({command:"setRoll",args:[u.roll]}),p(h.sprite,u.sprite)||f.push({command:"setSprite",args:[u.sprite]}),p(h.glyphs,u.glyphs)||f.push({command:"setGlyphs",args:[u.glyphs]}),p(h.transition,u.transition)||f.push({command:"setTransition",args:[u.transition]}),p(h.light,u.light)||f.push({command:"setLight",args:[u.light]}),p(h.terrain,u.terrain)||f.push({command:"setTerrain",args:[u.terrain]}),p(h.sky,u.sky)||f.push({command:"setSky",args:[u.sky]}),p(h.projection,u.projection)||f.push({command:"setProjection",args:[u.projection]});const v={},M=[];(function(U,W,X,re){let de;for(de in W=W||{},U=U||{})Object.prototype.hasOwnProperty.call(U,de)&&(Object.prototype.hasOwnProperty.call(W,de)||rt(de,X,re));for(de in W)Object.prototype.hasOwnProperty.call(W,de)&&(Object.prototype.hasOwnProperty.call(U,de)?p(U[de],W[de])||(U[de].type==="geojson"&&W[de].type==="geojson"&&dt(U,W,de)?Ne(X,{command:"setGeoJSONSourceData",args:[de,W[de].data]}):ct(de,W,X,re)):Ye(de,W,X))})(h.sources,u.sources,M,v);const D=[];h.layers&&h.layers.forEach(U=>{"source"in U&&v[U.source]?f.push({command:"removeLayer",args:[U.id]}):D.push(U)}),f=f.concat(M),function(U,W,X){W=W||[];const re=(U=U||[]).map(Gt),de=W.map(Gt),_e=U.reduce(jt,{}),Re=W.reduce(jt,{}),ze=re.slice(),Ge=Object.create(null);let et,At,Ct,Nt,Et;for(let Le=0,lt=0;Le<re.length;Le++)et=re[Le],Object.prototype.hasOwnProperty.call(Re,et)?lt++:(Ne(X,{command:"removeLayer",args:[et]}),ze.splice(ze.indexOf(et,lt),1));for(let Le=0,lt=0;Le<de.length;Le++)et=de[de.length-1-Le],ze[ze.length-1-Le]!==et&&(Object.prototype.hasOwnProperty.call(_e,et)?(Ne(X,{command:"removeLayer",args:[et]}),ze.splice(ze.lastIndexOf(et,ze.length-lt),1)):lt++,Nt=ze[ze.length-Le],Ne(X,{command:"addLayer",args:[Re[et],Nt]}),ze.splice(ze.length-Le,0,et),Ge[et]=!0);for(let Le=0;Le<de.length;Le++)if(et=de[Le],At=_e[et],Ct=Re[et],!Ge[et]&&!p(At,Ct))if(p(At.source,Ct.source)&&p(At["source-layer"],Ct["source-layer"])&&p(At.type,Ct.type)){for(Et in qt(At.layout,Ct.layout,X,et,null,"setLayoutProperty"),qt(At.paint,Ct.paint,X,et,null,"setPaintProperty"),p(At.filter,Ct.filter)||Ne(X,{command:"setFilter",args:[et,Ct.filter]}),p(At.minzoom,Ct.minzoom)&&p(At.maxzoom,Ct.maxzoom)||Ne(X,{command:"setLayerZoomRange",args:[et,Ct.minzoom,Ct.maxzoom]}),At)Object.prototype.hasOwnProperty.call(At,Et)&&Et!=="layout"&&Et!=="paint"&&Et!=="filter"&&Et!=="metadata"&&Et!=="minzoom"&&Et!=="maxzoom"&&(Et.indexOf("paint.")===0?qt(At[Et],Ct[Et],X,et,Et.slice(6),"setPaintProperty"):p(At[Et],Ct[Et])||Ne(X,{command:"setLayerProperty",args:[et,Et,Ct[Et]]}));for(Et in Ct)Object.prototype.hasOwnProperty.call(Ct,Et)&&!Object.prototype.hasOwnProperty.call(At,Et)&&Et!=="layout"&&Et!=="paint"&&Et!=="filter"&&Et!=="metadata"&&Et!=="minzoom"&&Et!=="maxzoom"&&(Et.indexOf("paint.")===0?qt(At[Et],Ct[Et],X,et,Et.slice(6),"setPaintProperty"):p(At[Et],Ct[Et])||Ne(X,{command:"setLayerProperty",args:[et,Et,Ct[Et]]}))}else Ne(X,{command:"removeLayer",args:[et]}),Nt=ze[ze.lastIndexOf(et)+1],Ne(X,{command:"addLayer",args:[Ct,Nt]})}(D,u.layers,f)}catch(v){console.warn("Unable to compute style diff:",v),f=[{command:"setStyle",args:[u]}]}return f},a.by=function(h){const u=[],f=h.id;return f===void 0&&u.push({message:`layers.${f}: missing required property "id"`}),h.render===void 0&&u.push({message:`layers.${f}: missing required method "render"`}),h.renderingMode&&h.renderingMode!=="2d"&&h.renderingMode!=="3d"&&u.push({message:`layers.${f}: property "renderingMode" must be either "2d" or "3d"`}),u},a.bz=function h(u,f){if(Array.isArray(u)){if(!Array.isArray(f)||u.length!==f.length)return!1;for(let v=0;v<u.length;v++)if(!h(u[v],f[v]))return!1;return!0}if(typeof u=="object"&&u!==null&&f!==null){if(typeof f!="object"||Object.keys(u).length!==Object.keys(f).length)return!1;for(const v in u)if(!h(u[v],f[v]))return!1;return!0}return u===f},a.c=pn,a.c0=h=>h.type==="fill",a.c1=h=>h.type==="fill-extrusion",a.c2=h=>h.type==="hillshade",a.c3=h=>h.type==="raster",a.c4=h=>h.type==="background",a.c5=h=>h.type==="custom",a.c6=Fe,a.c7=function(h,u,f){const v=be(u.x-f.x,u.y-f.y),M=be(h.x-f.x,h.y-f.y);var D,U;return rr(Math.atan2(v[0]*M[1]-v[1]*M[0],(D=v)[0]*(U=M)[0]+D[1]*U[1]))},a.c8=He,a.c9=function(h,u,f){var v=u[0],M=u[1];return h[0]=f[0]*v+f[4]*M+f[12],h[1]=f[1]*v+f[5]*M+f[13],h},a.cA=Z0,a.cB=vd,a.cC=jl,a.ca=function(h,u){const{x:f,y:v}=nd.fromLngLat(u);return!(h<0||h>25||v<0||v>=1||f<0||f>=1)},a.cb=function(h,u){return h[0]=u[0],h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=u[1],h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=u[2],h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h},a.cc=class extends mA{},a.cd=z_,a.cf=function(h){return h.message===Dn},a.cg=Jn,a.ch=function(h,u){Zn.REGISTERED_PROTOCOLS[h]=u},a.ci=function(h){delete Zn.REGISTERED_PROTOCOLS[h]},a.cj=function(h,u){const f={};for(let M=0;M<h.length;M++){const D=u&&u[h[M].id]||Vc(h[M]);u&&(u[h[M].id]=D);let U=f[D];U||(U=f[D]=[]),U.push(h[M])}const v=[];for(const M in f)v.push(f[M]);return v},a.ck=hr,a.cl=S_,a.cm=B_,a.cn=tg,a.co=function(h){h.bucket.createArrays(),h.bucket.tilePixelRatio=at/(512*h.bucket.overscaling),h.bucket.compareText={},h.bucket.iconsNeedLinear=!1;const u=h.bucket.layers[0],f=u.layout,v=u._unevaluatedLayout._values,M={layoutIconSize:v["icon-size"].possiblyEvaluate(new Fo(h.bucket.zoom+1),h.canonical),layoutTextSize:v["text-size"].possiblyEvaluate(new Fo(h.bucket.zoom+1),h.canonical),textMaxSize:v["text-size"].possiblyEvaluate(new Fo(18))};if(h.bucket.textSizeData.kind==="composite"){const{minZoom:re,maxZoom:de}=h.bucket.textSizeData;M.compositeTextSizes=[v["text-size"].possiblyEvaluate(new Fo(re),h.canonical),v["text-size"].possiblyEvaluate(new Fo(de),h.canonical)]}if(h.bucket.iconSizeData.kind==="composite"){const{minZoom:re,maxZoom:de}=h.bucket.iconSizeData;M.compositeIconSizes=[v["icon-size"].possiblyEvaluate(new Fo(re),h.canonical),v["icon-size"].possiblyEvaluate(new Fo(de),h.canonical)]}const D=f.get("text-line-height")*Il,U=f.get("text-rotation-alignment")!=="viewport"&&f.get("symbol-placement")!=="point",W=f.get("text-keep-upright"),X=f.get("text-size");for(const re of h.bucket.features){const de=f.get("text-font").evaluate(re,{},h.canonical).join(","),_e=X.evaluate(re,{},h.canonical),Re=M.layoutTextSize.evaluate(re,{},h.canonical),ze=M.layoutIconSize.evaluate(re,{},h.canonical),Ge={horizontal:{},vertical:void 0},et=re.text;let At,Ct=[0,0];if(et){const Le=et.toString(),lt=f.get("text-letter-spacing").evaluate(re,{},h.canonical)*Il,Ot=kh(Le)?lt:0,An=f.get("text-anchor").evaluate(re,{},h.canonical),zn=F_(u,re,h.canonical);if(!zn){const Wn=f.get("text-radial-offset").evaluate(re,{},h.canonical);Ct=Wn?R_(An,[Wn*Il,uv]):f.get("text-offset").evaluate(re,{},h.canonical).map(cr=>cr*Il)}let Cn=U?"center":f.get("text-justify").evaluate(re,{},h.canonical);const fn=f.get("symbol-placement")==="point"?f.get("text-max-width").evaluate(re,{},h.canonical)*Il:1/0,jn=()=>{h.bucket.allowVerticalPlacement&&hl(Le)&&(Ge.vertical=e0(et,h.glyphMap,h.glyphPositions,h.imagePositions,de,fn,D,An,"left",Ot,Ct,a.ai.vertical,!0,Re,_e))};if(!U&&zn){const Wn=new Set;if(Cn==="auto")for(let kn=0;kn<zn.values.length;kn+=2)Wn.add(Av(zn.values[kn]));else Wn.add(Cn);let cr=!1;for(const kn of Wn)if(!Ge.horizontal[kn])if(cr)Ge.horizontal[kn]=Ge.horizontal[0];else{const jr=e0(et,h.glyphMap,h.glyphPositions,h.imagePositions,de,fn,D,"center",kn,Ot,Ct,a.ai.horizontal,!1,Re,_e);jr&&(Ge.horizontal[kn]=jr,cr=jr.positionedLines.length===1)}jn()}else{Cn==="auto"&&(Cn=Av(An));const Wn=e0(et,h.glyphMap,h.glyphPositions,h.imagePositions,de,fn,D,An,Cn,Ot,Ct,a.ai.horizontal,!1,Re,_e);Wn&&(Ge.horizontal[Cn]=Wn),jn(),hl(Le)&&U&&W&&(Ge.vertical=e0(et,h.glyphMap,h.glyphPositions,h.imagePositions,de,fn,D,An,Cn,Ot,Ct,a.ai.vertical,!1,Re,_e))}}let Nt=!1;if(re.icon&&re.icon.name){const Le=h.imageMap[re.icon.name];Le&&(At=og(h.imagePositions[re.icon.name],f.get("icon-offset").evaluate(re,{},h.canonical),f.get("icon-anchor").evaluate(re,{},h.canonical)),Nt=!!Le.sdf,h.bucket.sdfIcons===void 0?h.bucket.sdfIcons=Nt:h.bucket.sdfIcons!==Nt&&it("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Le.pixelRatio!==h.bucket.pixelRatio||f.get("icon-rotate").constantOr(1)!==0)&&(h.bucket.iconsNeedLinear=!0))}const Et=l0(Ge.horizontal)||Ge.vertical;h.bucket.iconsInText=!!Et&&Et.iconsInText,(Et||At)&&K3(h.bucket,re,Ge,At,h.imageMap,M,Re,ze,Ct,Nt,h.canonical,h.subdivisionGranularity)}h.showCollisionBoxes&&h.bucket.generateCollisionDebugBuffers()},a.cp=Ju,a.cq=ni,a.cr=pc,a.cs=Co,a.ct=Lh,a.cu=class{constructor(h){this._marks={start:[h.url,"start"].join("#"),end:[h.url,"end"].join("#"),measure:h.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let h=performance.getEntriesByName(this._marks.measure);return h.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),h=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),h}},a.cv=function(h,u,f,v,M){return o(this,void 0,void 0,function*(){if(te())try{return yield _n(h,u,f,v,M)}catch{}return function(D,U,W,X,re){const de=D.width,_e=D.height;qn&&tn||(qn=new OffscreenCanvas(de,_e),tn=qn.getContext("2d",{willReadFrequently:!0})),qn.width=de,qn.height=_e,tn.drawImage(D,0,0,de,_e);const Re=tn.getImageData(U,W,X,re);return tn.clearRect(0,0,de,_e),Re.data}(h,u,f,v,M)})},a.cw=M_,a.cx=d,a.cy=E,a.cz=Iu,a.d=h=>o(void 0,void 0,void 0,function*(){if(h.byteLength===0)return createImageBitmap(new ImageData(1,1));const u=new Blob([new Uint8Array(h)],{type:"image/png"});try{return createImageBitmap(u)}catch(f){throw new Error(`Could not load image because of ${f.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),a.e=gt,a.f=h=>new Promise((u,f)=>{const v=new Image;v.onload=()=>{u(v),URL.revokeObjectURL(v.src),v.onload=null,window.requestAnimationFrame(()=>{v.src=Dt})},v.onerror=()=>f(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const M=new Blob([new Uint8Array(h)],{type:"image/png"});v.src=h.byteLength?URL.createObjectURL(M):Dt}),a.g=dr,a.h=(h,u)=>ce(gt(h,{type:"json"}),u),a.i=ft,a.j=sn,a.k=Ht,a.l=(h,u)=>ce(gt(h,{type:"arrayBuffer"}),u),a.m=ce,a.n=function(h){return new Lh(h).readFields(Rp,[])},a.o=Ph,a.p=J0,a.q=iu,a.r=$d,a.s=fe,a.t=Bc,a.u=fA,a.v=Oe,a.w=it,a.x=function([h,u,f]){return u+=90,u*=Math.PI/180,f*=Math.PI/180,{x:h*Math.cos(u)*Math.sin(f),y:h*Math.sin(u)*Math.sin(f),z:h*Math.cos(f)}},a.y=Zi,a.z=Fo}),i("worker",["./shared"],function(a){class o{constructor(se){this.keyCache={},se&&this.replace(se)}replace(se){this._layerConfigs={},this._layers={},this.update(se,[])}update(se,ve){for(const Ne of se){this._layerConfigs[Ne.id]=Ne;const Ye=this._layers[Ne.id]=a.bv(Ne);Ye._featureFilter=a.a4(Ye.filter),this.keyCache[Ne.id]&&delete this.keyCache[Ne.id]}for(const Ne of ve)delete this.keyCache[Ne],delete this._layerConfigs[Ne],delete this._layers[Ne];this.familiesBySource={};const p=a.cj(Object.values(this._layerConfigs),this.keyCache);for(const Ne of p){const Ye=Ne.map(jt=>this._layers[jt.id]),rt=Ye[0];if(rt.visibility==="none")continue;const ct=rt.source||"";let dt=this.familiesBySource[ct];dt||(dt=this.familiesBySource[ct]={});const qt=rt.sourceLayer||"_geojsonTileLayer";let Gt=dt[qt];Gt||(Gt=dt[qt]=[]),Gt.push(Ye)}}}class d{constructor(se){const ve={},p=[];for(const ct in se){const dt=se[ct],qt=ve[ct]={};for(const Gt in dt){const jt=dt[+Gt];if(!jt||jt.bitmap.width===0||jt.bitmap.height===0)continue;const xt={x:0,y:0,w:jt.bitmap.width+2,h:jt.bitmap.height+2};p.push(xt),qt[Gt]={rect:xt,metrics:jt.metrics}}}const{w:Ne,h:Ye}=a.p(p),rt=new a.o({width:Ne||1,height:Ye||1});for(const ct in se){const dt=se[ct];for(const qt in dt){const Gt=dt[+qt];if(!Gt||Gt.bitmap.width===0||Gt.bitmap.height===0)continue;const jt=ve[ct][qt].rect;a.o.copy(Gt.bitmap,rt,{x:0,y:0},{x:jt.x+1,y:jt.y+1},Gt.bitmap)}}this.image=rt,this.positions=ve}}a.ck("GlyphAtlas",d);class g{constructor(se){this.tileID=new a.S(se.tileID.overscaledZ,se.tileID.wrap,se.tileID.canonical.z,se.tileID.canonical.x,se.tileID.canonical.y),this.uid=se.uid,this.zoom=se.zoom,this.pixelRatio=se.pixelRatio,this.tileSize=se.tileSize,this.source=se.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=se.showCollisionBoxes,this.collectResourceTiming=!!se.collectResourceTiming,this.returnDependencies=!!se.returnDependencies,this.promoteId=se.promoteId,this.inFlightDependencies=[]}parse(se,ve,p,Ne,Ye){return a._(this,void 0,void 0,function*(){this.status="parsing",this.data=se,this.collisionBoxArray=new a.a2;const rt=new a.cl(Object.keys(se.layers).sort()),ct=new a.cm(this.tileID,this.promoteId);ct.bucketLayerIDs=[];const dt={},qt={featureIndex:ct,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:p,subdivisionGranularity:Ye},Gt=ve.familiesBySource[this.source];for(const Dr in Gt){const ur=se.layers[Dr];if(!ur)continue;ur.version===1&&a.w(`Vector tile source "${this.source}" layer "${Dr}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const mo=rt.encode(Dr),Ma=[];for(let qi=0;qi<ur.length;qi++){const vi=ur.feature(qi),io=ct.getId(vi,Dr);Ma.push({feature:vi,id:io,index:qi,sourceLayerIndex:mo})}for(const qi of Gt[Dr]){const vi=qi[0];vi.source!==this.source&&a.w(`layer.source = ${vi.source} does not equal this.source = ${this.source}`),vi.minzoom&&this.zoom<Math.floor(vi.minzoom)||vi.maxzoom&&this.zoom>=vi.maxzoom||vi.visibility!=="none"&&(b(qi,this.zoom,p),(dt[vi.id]=vi.createBucket({index:ct.bucketLayerIDs.length,layers:qi,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:mo,sourceID:this.source})).populate(Ma,qt,this.tileID.canonical),ct.bucketLayerIDs.push(qi.map(io=>io.id)))}}const jt=a.bA(qt.glyphDependencies,Dr=>Object.keys(Dr).map(Number));this.inFlightDependencies.forEach(Dr=>Dr==null?void 0:Dr.abort()),this.inFlightDependencies=[];let xt=Promise.resolve({});if(Object.keys(jt).length){const Dr=new AbortController;this.inFlightDependencies.push(Dr),xt=Ne.sendAsync({type:"GG",data:{stacks:jt,source:this.source,tileID:this.tileID,type:"glyphs"}},Dr)}const Tn=Object.keys(qt.iconDependencies);let On=Promise.resolve({});if(Tn.length){const Dr=new AbortController;this.inFlightDependencies.push(Dr),On=Ne.sendAsync({type:"GI",data:{icons:Tn,source:this.source,tileID:this.tileID,type:"icons"}},Dr)}const gr=Object.keys(qt.patternDependencies);let Er=Promise.resolve({});if(gr.length){const Dr=new AbortController;this.inFlightDependencies.push(Dr),Er=Ne.sendAsync({type:"GI",data:{icons:gr,source:this.source,tileID:this.tileID,type:"patterns"}},Dr)}const[on,Rn,er]=yield Promise.all([xt,On,Er]),Xr=new d(on),Ur=new a.cn(Rn,er);for(const Dr in dt){const ur=dt[Dr];ur instanceof a.a3?(b(ur.layers,this.zoom,p),a.co({bucket:ur,glyphMap:on,glyphPositions:Xr.positions,imageMap:Rn,imagePositions:Ur.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:qt.subdivisionGranularity})):ur.hasPattern&&(ur instanceof a.cp||ur instanceof a.cq||ur instanceof a.cr)&&(b(ur.layers,this.zoom,p),ur.addFeatures(qt,this.tileID.canonical,Ur.patternPositions))}return this.status="done",{buckets:Object.values(dt).filter(Dr=>!Dr.isEmpty()),featureIndex:ct,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Xr.image,imageAtlas:Ur,glyphMap:this.returnDependencies?on:null,iconMap:this.returnDependencies?Rn:null,glyphPositions:this.returnDependencies?Xr.positions:null}})}}function b(Oe,se,ve){const p=new a.z(se);for(const Ne of Oe)Ne.recalculate(p,ve)}class E{constructor(se,ve,p){this.actor=se,this.layerIndex=ve,this.availableImages=p,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(se,ve){return a._(this,void 0,void 0,function*(){const p=yield a.l(se.request,ve);try{return{vectorTile:new a.cs.VectorTile(new a.ct(p.data)),rawData:p.data,cacheControl:p.cacheControl,expires:p.expires}}catch(Ne){const Ye=new Uint8Array(p.data);let rt=`Unable to parse the tile at ${se.request.url}, `;throw rt+=Ye[0]===31&&Ye[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Ne.message}`,new Error(rt)}})}loadTile(se){return a._(this,void 0,void 0,function*(){const ve=se.uid,p=!!(se&&se.request&&se.request.collectResourceTiming)&&new a.cu(se.request),Ne=new g(se);this.loading[ve]=Ne;const Ye=new AbortController;Ne.abort=Ye;try{const rt=yield this.loadVectorTile(se,Ye);if(delete this.loading[ve],!rt)return null;const ct=rt.rawData,dt={};rt.expires&&(dt.expires=rt.expires),rt.cacheControl&&(dt.cacheControl=rt.cacheControl);const qt={};if(p){const jt=p.finish();jt&&(qt.resourceTiming=JSON.parse(JSON.stringify(jt)))}Ne.vectorTile=rt.vectorTile;const Gt=Ne.parse(rt.vectorTile,this.layerIndex,this.availableImages,this.actor,se.subdivisionGranularity);this.loaded[ve]=Ne,this.fetching[ve]={rawTileData:ct,cacheControl:dt,resourceTiming:qt};try{const jt=yield Gt;return a.e({rawTileData:ct.slice(0)},jt,dt,qt)}finally{delete this.fetching[ve]}}catch(rt){throw delete this.loading[ve],Ne.status="done",this.loaded[ve]=Ne,rt}})}reloadTile(se){return a._(this,void 0,void 0,function*(){const ve=se.uid;if(!this.loaded||!this.loaded[ve])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const p=this.loaded[ve];if(p.showCollisionBoxes=se.showCollisionBoxes,p.status==="parsing"){const Ne=yield p.parse(p.vectorTile,this.layerIndex,this.availableImages,this.actor,se.subdivisionGranularity);let Ye;if(this.fetching[ve]){const{rawTileData:rt,cacheControl:ct,resourceTiming:dt}=this.fetching[ve];delete this.fetching[ve],Ye=a.e({rawTileData:rt.slice(0)},Ne,ct,dt)}else Ye=Ne;return Ye}if(p.status==="done"&&p.vectorTile)return p.parse(p.vectorTile,this.layerIndex,this.availableImages,this.actor,se.subdivisionGranularity)})}abortTile(se){return a._(this,void 0,void 0,function*(){const ve=this.loading,p=se.uid;ve&&ve[p]&&ve[p].abort&&(ve[p].abort.abort(),delete ve[p])})}removeTile(se){return a._(this,void 0,void 0,function*(){this.loaded&&this.loaded[se.uid]&&delete this.loaded[se.uid]})}}class S{constructor(){this.loaded={}}loadTile(se){return a._(this,void 0,void 0,function*(){const{uid:ve,encoding:p,rawImageData:Ne,redFactor:Ye,greenFactor:rt,blueFactor:ct,baseShift:dt}=se,qt=Ne.width+2,Gt=Ne.height+2,jt=a.b(Ne)?new a.R({width:qt,height:Gt},yield a.cv(Ne,-1,-1,qt,Gt)):Ne,xt=new a.cw(ve,jt,p,Ye,rt,ct,dt);return this.loaded=this.loaded||{},this.loaded[ve]=xt,xt})}removeTile(se){const ve=this.loaded,p=se.uid;ve&&ve[p]&&delete ve[p]}}var I,P,z=function(){if(P)return I;function Oe(ve,p){if(ve.length!==0){se(ve[0],p);for(var Ne=1;Ne<ve.length;Ne++)se(ve[Ne],!p)}}function se(ve,p){for(var Ne=0,Ye=0,rt=0,ct=ve.length,dt=ct-1;rt<ct;dt=rt++){var qt=(ve[rt][0]-ve[dt][0])*(ve[dt][1]+ve[rt][1]),Gt=Ne+qt;Ye+=Math.abs(Ne)>=Math.abs(qt)?Ne-Gt+qt:qt-Gt+Ne,Ne=Gt}Ne+Ye>=0!=!!p&&ve.reverse()}return P=1,I=function ve(p,Ne){var Ye,rt=p&&p.type;if(rt==="FeatureCollection")for(Ye=0;Ye<p.features.length;Ye++)ve(p.features[Ye],Ne);else if(rt==="GeometryCollection")for(Ye=0;Ye<p.geometries.length;Ye++)ve(p.geometries[Ye],Ne);else if(rt==="Feature")ve(p.geometry,Ne);else if(rt==="Polygon")Oe(p.coordinates,Ne);else if(rt==="MultiPolygon")for(Ye=0;Ye<p.coordinates.length;Ye++)Oe(p.coordinates[Ye],Ne);return p}}(),j=a.cx(z);const q=a.cs.VectorTileFeature.prototype.toGeoJSON;class Y{constructor(se){this._feature=se,this.extent=a.X,this.type=se.type,this.properties=se.tags,"id"in se&&!isNaN(se.id)&&(this.id=parseInt(se.id,10))}loadGeometry(){if(this._feature.type===1){const se=[];for(const ve of this._feature.geometry)se.push([new a.P(ve[0],ve[1])]);return se}{const se=[];for(const ve of this._feature.geometry){const p=[];for(const Ne of ve)p.push(new a.P(Ne[0],Ne[1]));se.push(p)}return se}}toGeoJSON(se,ve,p){return q.call(this,se,ve,p)}}class ie{constructor(se){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=a.X,this.length=se.length,this._features=se}feature(se){return new Y(this._features[se])}}var te,V,ne,G={exports:{}},oe=function(){if(ne)return G.exports;ne=1;var Oe=a.cA(),se=function(){if(V)return te;V=1;var Gt=a.cy(),jt=a.cz().VectorTileFeature;function xt(On,gr){this.options=gr||{},this.features=On,this.length=On.length}function Tn(On,gr){this.id=typeof On.id=="number"?On.id:void 0,this.type=On.type,this.rawGeometry=On.type===1?[On.geometry]:On.geometry,this.properties=On.tags,this.extent=gr||4096}return te=xt,xt.prototype.feature=function(On){return new Tn(this.features[On],this.options.extent)},Tn.prototype.loadGeometry=function(){var On=this.rawGeometry;this.geometry=[];for(var gr=0;gr<On.length;gr++){for(var Er=On[gr],on=[],Rn=0;Rn<Er.length;Rn++)on.push(new Gt(Er[Rn][0],Er[Rn][1]));this.geometry.push(on)}return this.geometry},Tn.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var On=this.geometry,gr=1/0,Er=-1/0,on=1/0,Rn=-1/0,er=0;er<On.length;er++)for(var Xr=On[er],Ur=0;Ur<Xr.length;Ur++){var Dr=Xr[Ur];gr=Math.min(gr,Dr.x),Er=Math.max(Er,Dr.x),on=Math.min(on,Dr.y),Rn=Math.max(Rn,Dr.y)}return[gr,on,Er,Rn]},Tn.prototype.toGeoJSON=jt.prototype.toGeoJSON,te}();function ve(Gt){var jt=new Oe;return function(xt,Tn){for(var On in xt.layers)Tn.writeMessage(3,p,xt.layers[On])}(Gt,jt),jt.finish()}function p(Gt,jt){var xt;jt.writeVarintField(15,Gt.version||1),jt.writeStringField(1,Gt.name||""),jt.writeVarintField(5,Gt.extent||4096);var Tn={keys:[],values:[],keycache:{},valuecache:{}};for(xt=0;xt<Gt.length;xt++)Tn.feature=Gt.feature(xt),jt.writeMessage(2,Ne,Tn);var On=Tn.keys;for(xt=0;xt<On.length;xt++)jt.writeStringField(3,On[xt]);var gr=Tn.values;for(xt=0;xt<gr.length;xt++)jt.writeMessage(4,qt,gr[xt])}function Ne(Gt,jt){var xt=Gt.feature;xt.id!==void 0&&jt.writeVarintField(1,xt.id),jt.writeMessage(2,Ye,Gt),jt.writeVarintField(3,xt.type),jt.writeMessage(4,dt,xt)}function Ye(Gt,jt){var xt=Gt.feature,Tn=Gt.keys,On=Gt.values,gr=Gt.keycache,Er=Gt.valuecache;for(var on in xt.properties){var Rn=xt.properties[on],er=gr[on];if(Rn!==null){er===void 0&&(Tn.push(on),gr[on]=er=Tn.length-1),jt.writeVarint(er);var Xr=typeof Rn;Xr!=="string"&&Xr!=="boolean"&&Xr!=="number"&&(Rn=JSON.stringify(Rn));var Ur=Xr+":"+Rn,Dr=Er[Ur];Dr===void 0&&(On.push(Rn),Er[Ur]=Dr=On.length-1),jt.writeVarint(Dr)}}}function rt(Gt,jt){return(jt<<3)+(7&Gt)}function ct(Gt){return Gt<<1^Gt>>31}function dt(Gt,jt){for(var xt=Gt.loadGeometry(),Tn=Gt.type,On=0,gr=0,Er=xt.length,on=0;on<Er;on++){var Rn=xt[on],er=1;Tn===1&&(er=Rn.length),jt.writeVarint(rt(1,er));for(var Xr=Tn===3?Rn.length-1:Rn.length,Ur=0;Ur<Xr;Ur++){Ur===1&&Tn!==1&&jt.writeVarint(rt(2,Xr-1));var Dr=Rn[Ur].x-On,ur=Rn[Ur].y-gr;jt.writeVarint(ct(Dr)),jt.writeVarint(ct(ur)),On+=Dr,gr+=ur}Tn===3&&jt.writeVarint(rt(7,1))}}function qt(Gt,jt){var xt=typeof Gt;xt==="string"?jt.writeStringField(1,Gt):xt==="boolean"?jt.writeBooleanField(7,Gt):xt==="number"&&(Gt%1!=0?jt.writeDoubleField(3,Gt):Gt<0?jt.writeSVarintField(6,Gt):jt.writeVarintField(5,Gt))}return G.exports=ve,G.exports.fromVectorTileJs=ve,G.exports.fromGeojsonVt=function(Gt,jt){jt=jt||{};var xt={};for(var Tn in Gt)xt[Tn]=new se(Gt[Tn].features,jt),xt[Tn].name=Tn,xt[Tn].version=jt.version,xt[Tn].extent=jt.extent;return ve({layers:xt})},G.exports.GeoJSONWrapper=se,G.exports}(),he=a.cx(oe);const pe={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Oe=>Oe},Ee=Math.fround||(me=new Float32Array(1),Oe=>(me[0]=+Oe,me[0]));var me;const Se=3,De=5,be=6;class at{constructor(se){this.options=Object.assign(Object.create(pe),se),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(se){const{log:ve,minZoom:p,maxZoom:Ne}=this.options;ve&&console.time("total time");const Ye=`prepare ${se.length} points`;ve&&console.time(Ye),this.points=se;const rt=[];for(let dt=0;dt<se.length;dt++){const qt=se[dt];if(!qt.geometry)continue;const[Gt,jt]=qt.geometry.coordinates,xt=Ee(We(Gt)),Tn=Ee(Me(jt));rt.push(xt,Tn,1/0,dt,-1,1),this.options.reduce&&rt.push(0)}let ct=this.trees[Ne+1]=this._createTree(rt);ve&&console.timeEnd(Ye);for(let dt=Ne;dt>=p;dt--){const qt=+Date.now();ct=this.trees[dt]=this._createTree(this._cluster(ct,dt)),ve&&console.log("z%d: %d clusters in %dms",dt,ct.numItems,+Date.now()-qt)}return ve&&console.timeEnd("total time"),this}getClusters(se,ve){let p=((se[0]+180)%360+360)%360-180;const Ne=Math.max(-90,Math.min(90,se[1]));let Ye=se[2]===180?180:((se[2]+180)%360+360)%360-180;const rt=Math.max(-90,Math.min(90,se[3]));if(se[2]-se[0]>=360)p=-180,Ye=180;else if(p>Ye){const jt=this.getClusters([p,Ne,180,rt],ve),xt=this.getClusters([-180,Ne,Ye,rt],ve);return jt.concat(xt)}const ct=this.trees[this._limitZoom(ve)],dt=ct.range(We(p),Me(rt),We(Ye),Me(Ne)),qt=ct.data,Gt=[];for(const jt of dt){const xt=this.stride*jt;Gt.push(qt[xt+De]>1?Ze(qt,xt,this.clusterProps):this.points[qt[xt+Se]])}return Gt}getChildren(se){const ve=this._getOriginId(se),p=this._getOriginZoom(se),Ne="No cluster with the specified id.",Ye=this.trees[p];if(!Ye)throw new Error(Ne);const rt=Ye.data;if(ve*this.stride>=rt.length)throw new Error(Ne);const ct=this.options.radius/(this.options.extent*Math.pow(2,p-1)),dt=Ye.within(rt[ve*this.stride],rt[ve*this.stride+1],ct),qt=[];for(const Gt of dt){const jt=Gt*this.stride;rt[jt+4]===se&&qt.push(rt[jt+De]>1?Ze(rt,jt,this.clusterProps):this.points[rt[jt+Se]])}if(qt.length===0)throw new Error(Ne);return qt}getLeaves(se,ve,p){const Ne=[];return this._appendLeaves(Ne,se,ve=ve||10,p=p||0,0),Ne}getTile(se,ve,p){const Ne=this.trees[this._limitZoom(se)],Ye=Math.pow(2,se),{extent:rt,radius:ct}=this.options,dt=ct/rt,qt=(p-dt)/Ye,Gt=(p+1+dt)/Ye,jt={features:[]};return this._addTileFeatures(Ne.range((ve-dt)/Ye,qt,(ve+1+dt)/Ye,Gt),Ne.data,ve,p,Ye,jt),ve===0&&this._addTileFeatures(Ne.range(1-dt/Ye,qt,1,Gt),Ne.data,Ye,p,Ye,jt),ve===Ye-1&&this._addTileFeatures(Ne.range(0,qt,dt/Ye,Gt),Ne.data,-1,p,Ye,jt),jt.features.length?jt:null}getClusterExpansionZoom(se){let ve=this._getOriginZoom(se)-1;for(;ve<=this.options.maxZoom;){const p=this.getChildren(se);if(ve++,p.length!==1)break;se=p[0].properties.cluster_id}return ve}_appendLeaves(se,ve,p,Ne,Ye){const rt=this.getChildren(ve);for(const ct of rt){const dt=ct.properties;if(dt&&dt.cluster?Ye+dt.point_count<=Ne?Ye+=dt.point_count:Ye=this._appendLeaves(se,dt.cluster_id,p,Ne,Ye):Ye<Ne?Ye++:se.push(ct),se.length===p)break}return Ye}_createTree(se){const ve=new a.az(se.length/this.stride|0,this.options.nodeSize,Float32Array);for(let p=0;p<se.length;p+=this.stride)ve.add(se[p],se[p+1]);return ve.finish(),ve.data=se,ve}_addTileFeatures(se,ve,p,Ne,Ye,rt){for(const ct of se){const dt=ct*this.stride,qt=ve[dt+De]>1;let Gt,jt,xt;if(qt)Gt=Je(ve,dt,this.clusterProps),jt=ve[dt],xt=ve[dt+1];else{const gr=this.points[ve[dt+Se]];Gt=gr.properties;const[Er,on]=gr.geometry.coordinates;jt=We(Er),xt=Me(on)}const Tn={type:1,geometry:[[Math.round(this.options.extent*(jt*Ye-p)),Math.round(this.options.extent*(xt*Ye-Ne))]],tags:Gt};let On;On=qt||this.options.generateId?ve[dt+Se]:this.points[ve[dt+Se]].id,On!==void 0&&(Tn.id=On),rt.features.push(Tn)}}_limitZoom(se){return Math.max(this.options.minZoom,Math.min(Math.floor(+se),this.options.maxZoom+1))}_cluster(se,ve){const{radius:p,extent:Ne,reduce:Ye,minPoints:rt}=this.options,ct=p/(Ne*Math.pow(2,ve)),dt=se.data,qt=[],Gt=this.stride;for(let jt=0;jt<dt.length;jt+=Gt){if(dt[jt+2]<=ve)continue;dt[jt+2]=ve;const xt=dt[jt],Tn=dt[jt+1],On=se.within(dt[jt],dt[jt+1],ct),gr=dt[jt+De];let Er=gr;for(const on of On){const Rn=on*Gt;dt[Rn+2]>ve&&(Er+=dt[Rn+De])}if(Er>gr&&Er>=rt){let on,Rn=xt*gr,er=Tn*gr,Xr=-1;const Ur=((jt/Gt|0)<<5)+(ve+1)+this.points.length;for(const Dr of On){const ur=Dr*Gt;if(dt[ur+2]<=ve)continue;dt[ur+2]=ve;const mo=dt[ur+De];Rn+=dt[ur]*mo,er+=dt[ur+1]*mo,dt[ur+4]=Ur,Ye&&(on||(on=this._map(dt,jt,!0),Xr=this.clusterProps.length,this.clusterProps.push(on)),Ye(on,this._map(dt,ur)))}dt[jt+4]=Ur,qt.push(Rn/Er,er/Er,1/0,Ur,-1,Er),Ye&&qt.push(Xr)}else{for(let on=0;on<Gt;on++)qt.push(dt[jt+on]);if(Er>1)for(const on of On){const Rn=on*Gt;if(!(dt[Rn+2]<=ve)){dt[Rn+2]=ve;for(let er=0;er<Gt;er++)qt.push(dt[Rn+er])}}}}return qt}_getOriginId(se){return se-this.points.length>>5}_getOriginZoom(se){return(se-this.points.length)%32}_map(se,ve,p){if(se[ve+De]>1){const rt=this.clusterProps[se[ve+be]];return p?Object.assign({},rt):rt}const Ne=this.points[se[ve+Se]].properties,Ye=this.options.map(Ne);return p&&Ye===Ne?Object.assign({},Ye):Ye}}function Ze(Oe,se,ve){return{type:"Feature",id:Oe[se+Se],properties:Je(Oe,se,ve),geometry:{type:"Point",coordinates:[(p=Oe[se],360*(p-.5)),Fe(Oe[se+1])]}};var p}function Je(Oe,se,ve){const p=Oe[se+De],Ne=p>=1e4?`${Math.round(p/1e3)}k`:p>=1e3?Math.round(p/100)/10+"k":p,Ye=Oe[se+be],rt=Ye===-1?{}:Object.assign({},ve[Ye]);return Object.assign(rt,{cluster:!0,cluster_id:Oe[se+Se],point_count:p,point_count_abbreviated:Ne})}function We(Oe){return Oe/360+.5}function Me(Oe){const se=Math.sin(Oe*Math.PI/180),ve=.5-.25*Math.log((1+se)/(1-se))/Math.PI;return ve<0?0:ve>1?1:ve}function Fe(Oe){const se=(180-360*Oe)*Math.PI/180;return 360*Math.atan(Math.exp(se))/Math.PI-90}function He(Oe,se,ve,p){let Ne=p;const Ye=se+(ve-se>>1);let rt,ct=ve-se;const dt=Oe[se],qt=Oe[se+1],Gt=Oe[ve],jt=Oe[ve+1];for(let xt=se+3;xt<ve;xt+=3){const Tn=bt(Oe[xt],Oe[xt+1],dt,qt,Gt,jt);if(Tn>Ne)rt=xt,Ne=Tn;else if(Tn===Ne){const On=Math.abs(xt-Ye);On<ct&&(rt=xt,ct=On)}}Ne>p&&(rt-se>3&&He(Oe,se,rt,p),Oe[rt+2]=Ne,ve-rt>3&&He(Oe,rt,ve,p))}function bt(Oe,se,ve,p,Ne,Ye){let rt=Ne-ve,ct=Ye-p;if(rt!==0||ct!==0){const dt=((Oe-ve)*rt+(se-p)*ct)/(rt*rt+ct*ct);dt>1?(ve=Ne,p=Ye):dt>0&&(ve+=rt*dt,p+=ct*dt)}return rt=Oe-ve,ct=se-p,rt*rt+ct*ct}function Yt(Oe,se,ve,p){const Ne={id:Oe??null,type:se,geometry:ve,tags:p,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(se==="Point"||se==="MultiPoint"||se==="LineString")gt(Ne,ve);else if(se==="Polygon")gt(Ne,ve[0]);else if(se==="MultiLineString")for(const Ye of ve)gt(Ne,Ye);else if(se==="MultiPolygon")for(const Ye of ve)gt(Ne,Ye[0]);return Ne}function gt(Oe,se){for(let ve=0;ve<se.length;ve+=3)Oe.minX=Math.min(Oe.minX,se[ve]),Oe.minY=Math.min(Oe.minY,se[ve+1]),Oe.maxX=Math.max(Oe.maxX,se[ve]),Oe.maxY=Math.max(Oe.maxY,se[ve+1])}function Lt(Oe,se,ve,p){if(!se.geometry)return;const Ne=se.geometry.coordinates;if(Ne&&Ne.length===0)return;const Ye=se.geometry.type,rt=Math.pow(ve.tolerance/((1<<ve.maxZoom)*ve.extent),2);let ct=[],dt=se.id;if(ve.promoteId?dt=se.properties[ve.promoteId]:ve.generateId&&(dt=p||0),Ye==="Point")Kt(Ne,ct);else if(Ye==="MultiPoint")for(const qt of Ne)Kt(qt,ct);else if(Ye==="LineString")Ue(Ne,ct,rt,!1);else if(Ye==="MultiLineString"){if(ve.lineMetrics){for(const qt of Ne)ct=[],Ue(qt,ct,rt,!1),Oe.push(Yt(dt,"LineString",ct,se.properties));return}Pe(Ne,ct,rt,!1)}else if(Ye==="Polygon")Pe(Ne,ct,rt,!0);else{if(Ye!=="MultiPolygon"){if(Ye==="GeometryCollection"){for(const qt of se.geometry.geometries)Lt(Oe,{id:dt,geometry:qt,properties:se.properties},ve,p);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const qt of Ne){const Gt=[];Pe(qt,Gt,rt,!0),ct.push(Gt)}}Oe.push(Yt(dt,Ye,ct,se.properties))}function Kt(Oe,se){se.push(Be(Oe[0]),it(Oe[1]),0)}function Ue(Oe,se,ve,p){let Ne,Ye,rt=0;for(let dt=0;dt<Oe.length;dt++){const qt=Be(Oe[dt][0]),Gt=it(Oe[dt][1]);se.push(qt,Gt,0),dt>0&&(rt+=p?(Ne*Gt-qt*Ye)/2:Math.sqrt(Math.pow(qt-Ne,2)+Math.pow(Gt-Ye,2))),Ne=qt,Ye=Gt}const ct=se.length-3;se[2]=1,He(se,0,ct,ve),se[ct+2]=1,se.size=Math.abs(rt),se.start=0,se.end=se.size}function Pe(Oe,se,ve,p){for(let Ne=0;Ne<Oe.length;Ne++){const Ye=[];Ue(Oe[Ne],Ye,ve,p),se.push(Ye)}}function Be(Oe){return Oe/360+.5}function it(Oe){const se=Math.sin(Oe*Math.PI/180),ve=.5-.25*Math.log((1+se)/(1-se))/Math.PI;return ve<0?0:ve>1?1:ve}function _t(Oe,se,ve,p,Ne,Ye,rt,ct){if(p/=se,Ye>=(ve/=se)&&rt<p)return Oe;if(rt<ve||Ye>=p)return null;const dt=[];for(const qt of Oe){const Gt=qt.geometry;let jt=qt.type;const xt=Ne===0?qt.minX:qt.minY,Tn=Ne===0?qt.maxX:qt.maxY;if(xt>=ve&&Tn<p){dt.push(qt);continue}if(Tn<ve||xt>=p)continue;let On=[];if(jt==="Point"||jt==="MultiPoint")ft(Gt,On,ve,p,Ne);else if(jt==="LineString")Ut(Gt,On,ve,p,Ne,!1,ct.lineMetrics);else if(jt==="MultiLineString")Dt(Gt,On,ve,p,Ne,!1);else if(jt==="Polygon")Dt(Gt,On,ve,p,Ne,!0);else if(jt==="MultiPolygon")for(const gr of Gt){const Er=[];Dt(gr,Er,ve,p,Ne,!0),Er.length&&On.push(Er)}if(On.length){if(ct.lineMetrics&&jt==="LineString"){for(const gr of On)dt.push(Yt(qt.id,jt,gr,qt.tags));continue}jt!=="LineString"&&jt!=="MultiLineString"||(On.length===1?(jt="LineString",On=On[0]):jt="MultiLineString"),jt!=="Point"&&jt!=="MultiPoint"||(jt=On.length===3?"Point":"MultiPoint"),dt.push(Yt(qt.id,jt,On,qt.tags))}}return dt.length?dt:null}function ft(Oe,se,ve,p,Ne){for(let Ye=0;Ye<Oe.length;Ye+=3){const rt=Oe[Ye+Ne];rt>=ve&&rt<=p&&_n(se,Oe[Ye],Oe[Ye+1],Oe[Ye+2])}}function Ut(Oe,se,ve,p,Ne,Ye,rt){let ct=rn(Oe);const dt=Ne===0?qn:tn;let qt,Gt,jt=Oe.start;for(let Er=0;Er<Oe.length-3;Er+=3){const on=Oe[Er],Rn=Oe[Er+1],er=Oe[Er+2],Xr=Oe[Er+3],Ur=Oe[Er+4],Dr=Ne===0?on:Rn,ur=Ne===0?Xr:Ur;let mo=!1;rt&&(qt=Math.sqrt(Math.pow(on-Xr,2)+Math.pow(Rn-Ur,2))),Dr<ve?ur>ve&&(Gt=dt(ct,on,Rn,Xr,Ur,ve),rt&&(ct.start=jt+qt*Gt)):Dr>p?ur<p&&(Gt=dt(ct,on,Rn,Xr,Ur,p),rt&&(ct.start=jt+qt*Gt)):_n(ct,on,Rn,er),ur<ve&&Dr>=ve&&(Gt=dt(ct,on,Rn,Xr,Ur,ve),mo=!0),ur>p&&Dr<=p&&(Gt=dt(ct,on,Rn,Xr,Ur,p),mo=!0),!Ye&&mo&&(rt&&(ct.end=jt+qt*Gt),se.push(ct),ct=rn(Oe)),rt&&(jt+=qt)}let xt=Oe.length-3;const Tn=Oe[xt],On=Oe[xt+1],gr=Ne===0?Tn:On;gr>=ve&&gr<=p&&_n(ct,Tn,On,Oe[xt+2]),xt=ct.length-3,Ye&&xt>=3&&(ct[xt]!==ct[0]||ct[xt+1]!==ct[1])&&_n(ct,ct[0],ct[1],ct[2]),ct.length&&se.push(ct)}function rn(Oe){const se=[];return se.size=Oe.size,se.start=Oe.start,se.end=Oe.end,se}function Dt(Oe,se,ve,p,Ne,Ye){for(const rt of Oe)Ut(rt,se,ve,p,Ne,Ye,!1)}function _n(Oe,se,ve,p){Oe.push(se,ve,p)}function qn(Oe,se,ve,p,Ne,Ye){const rt=(Ye-se)/(p-se);return _n(Oe,Ye,ve+(Ne-ve)*rt,1),rt}function tn(Oe,se,ve,p,Ne,Ye){const rt=(Ye-ve)/(Ne-ve);return _n(Oe,se+(p-se)*rt,Ye,1),rt}function rr(Oe,se){const ve=[];for(let p=0;p<Oe.length;p++){const Ne=Oe[p],Ye=Ne.type;let rt;if(Ye==="Point"||Ye==="MultiPoint"||Ye==="LineString")rt=Dn(Ne.geometry,se);else if(Ye==="MultiLineString"||Ye==="Polygon"){rt=[];for(const ct of Ne.geometry)rt.push(Dn(ct,se))}else if(Ye==="MultiPolygon"){rt=[];for(const ct of Ne.geometry){const dt=[];for(const qt of ct)dt.push(Dn(qt,se));rt.push(dt)}}ve.push(Yt(Ne.id,Ye,rt,Ne.tags))}return ve}function Dn(Oe,se){const ve=[];ve.size=Oe.size,Oe.start!==void 0&&(ve.start=Oe.start,ve.end=Oe.end);for(let p=0;p<Oe.length;p+=3)ve.push(Oe[p]+se,Oe[p+1],Oe[p+2]);return ve}function pn(Oe,se){if(Oe.transformed)return Oe;const ve=1<<Oe.z,p=Oe.x,Ne=Oe.y;for(const Ye of Oe.features){const rt=Ye.geometry,ct=Ye.type;if(Ye.geometry=[],ct===1)for(let dt=0;dt<rt.length;dt+=2)Ye.geometry.push(Zn(rt[dt],rt[dt+1],se,ve,p,Ne));else for(let dt=0;dt<rt.length;dt++){const qt=[];for(let Gt=0;Gt<rt[dt].length;Gt+=2)qt.push(Zn(rt[dt][Gt],rt[dt][Gt+1],se,ve,p,Ne));Ye.geometry.push(qt)}}return Oe.transformed=!0,Oe}function Zn(Oe,se,ve,p,Ne,Ye){return[Math.round(ve*(Oe*p-Ne)),Math.round(ve*(se*p-Ye))]}function dr(Oe,se,ve,p,Ne){const Ye=se===Ne.maxZoom?0:Ne.tolerance/((1<<se)*Ne.extent),rt={features:[],numPoints:0,numSimplified:0,numFeatures:Oe.length,source:null,x:ve,y:p,z:se,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const ct of Oe)vr(rt,ct,Ye,Ne);return rt}function vr(Oe,se,ve,p){const Ne=se.geometry,Ye=se.type,rt=[];if(Oe.minX=Math.min(Oe.minX,se.minX),Oe.minY=Math.min(Oe.minY,se.minY),Oe.maxX=Math.max(Oe.maxX,se.maxX),Oe.maxY=Math.max(Oe.maxY,se.maxY),Ye==="Point"||Ye==="MultiPoint")for(let ct=0;ct<Ne.length;ct+=3)rt.push(Ne[ct],Ne[ct+1]),Oe.numPoints++,Oe.numSimplified++;else if(Ye==="LineString")Jn(rt,Ne,Oe,ve,!1,!1);else if(Ye==="MultiLineString"||Ye==="Polygon")for(let ct=0;ct<Ne.length;ct++)Jn(rt,Ne[ct],Oe,ve,Ye==="Polygon",ct===0);else if(Ye==="MultiPolygon")for(let ct=0;ct<Ne.length;ct++){const dt=Ne[ct];for(let qt=0;qt<dt.length;qt++)Jn(rt,dt[qt],Oe,ve,!0,qt===0)}if(rt.length){let ct=se.tags||null;if(Ye==="LineString"&&p.lineMetrics){ct={};for(const qt in se.tags)ct[qt]=se.tags[qt];ct.mapbox_clip_start=Ne.start/Ne.size,ct.mapbox_clip_end=Ne.end/Ne.size}const dt={geometry:rt,type:Ye==="Polygon"||Ye==="MultiPolygon"?3:Ye==="LineString"||Ye==="MultiLineString"?2:1,tags:ct};se.id!==null&&(dt.id=se.id),Oe.features.push(dt)}}function Jn(Oe,se,ve,p,Ne,Ye){const rt=p*p;if(p>0&&se.size<(Ne?rt:p))return void(ve.numPoints+=se.length/3);const ct=[];for(let dt=0;dt<se.length;dt+=3)(p===0||se[dt+2]>rt)&&(ve.numSimplified++,ct.push(se[dt],se[dt+1])),ve.numPoints++;Ne&&function(dt,qt){let Gt=0;for(let jt=0,xt=dt.length,Tn=xt-2;jt<xt;Tn=jt,jt+=2)Gt+=(dt[jt]-dt[Tn])*(dt[jt+1]+dt[Tn+1]);if(Gt>0===qt)for(let jt=0,xt=dt.length;jt<xt/2;jt+=2){const Tn=dt[jt],On=dt[jt+1];dt[jt]=dt[xt-2-jt],dt[jt+1]=dt[xt-1-jt],dt[xt-2-jt]=Tn,dt[xt-1-jt]=On}}(ct,Ye),Oe.push(ct)}const Qe={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class ce{constructor(se,ve){const p=(ve=this.options=function(Ye,rt){for(const ct in rt)Ye[ct]=rt[ct];return Ye}(Object.create(Qe),ve)).debug;if(p&&console.time("preprocess data"),ve.maxZoom<0||ve.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ve.promoteId&&ve.generateId)throw new Error("promoteId and generateId cannot be used together.");let Ne=function(Ye,rt){const ct=[];if(Ye.type==="FeatureCollection")for(let dt=0;dt<Ye.features.length;dt++)Lt(ct,Ye.features[dt],rt,dt);else Lt(ct,Ye.type==="Feature"?Ye:{geometry:Ye},rt);return ct}(se,ve);this.tiles={},this.tileCoords=[],p&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ve.indexMaxZoom,ve.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Ne=function(Ye,rt){const ct=rt.buffer/rt.extent;let dt=Ye;const qt=_t(Ye,1,-1-ct,ct,0,-1,2,rt),Gt=_t(Ye,1,1-ct,2+ct,0,-1,2,rt);return(qt||Gt)&&(dt=_t(Ye,1,-ct,1+ct,0,-1,2,rt)||[],qt&&(dt=rr(qt,1).concat(dt)),Gt&&(dt=dt.concat(rr(Gt,-1)))),dt}(Ne,ve),Ne.length&&this.splitTile(Ne,0,0,0),p&&(Ne.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(se,ve,p,Ne,Ye,rt,ct){const dt=[se,ve,p,Ne],qt=this.options,Gt=qt.debug;for(;dt.length;){Ne=dt.pop(),p=dt.pop(),ve=dt.pop(),se=dt.pop();const jt=1<<ve,xt=fe(ve,p,Ne);let Tn=this.tiles[xt];if(!Tn&&(Gt>1&&console.time("creation"),Tn=this.tiles[xt]=dr(se,ve,p,Ne,qt),this.tileCoords.push({z:ve,x:p,y:Ne}),Gt)){Gt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ve,p,Ne,Tn.numFeatures,Tn.numPoints,Tn.numSimplified),console.timeEnd("creation"));const mo=`z${ve}`;this.stats[mo]=(this.stats[mo]||0)+1,this.total++}if(Tn.source=se,Ye==null){if(ve===qt.indexMaxZoom||Tn.numPoints<=qt.indexMaxPoints)continue}else{if(ve===qt.maxZoom||ve===Ye)continue;if(Ye!=null){const mo=Ye-ve;if(p!==rt>>mo||Ne!==ct>>mo)continue}}if(Tn.source=null,se.length===0)continue;Gt>1&&console.time("clipping");const On=.5*qt.buffer/qt.extent,gr=.5-On,Er=.5+On,on=1+On;let Rn=null,er=null,Xr=null,Ur=null,Dr=_t(se,jt,p-On,p+Er,0,Tn.minX,Tn.maxX,qt),ur=_t(se,jt,p+gr,p+on,0,Tn.minX,Tn.maxX,qt);se=null,Dr&&(Rn=_t(Dr,jt,Ne-On,Ne+Er,1,Tn.minY,Tn.maxY,qt),er=_t(Dr,jt,Ne+gr,Ne+on,1,Tn.minY,Tn.maxY,qt),Dr=null),ur&&(Xr=_t(ur,jt,Ne-On,Ne+Er,1,Tn.minY,Tn.maxY,qt),Ur=_t(ur,jt,Ne+gr,Ne+on,1,Tn.minY,Tn.maxY,qt),ur=null),Gt>1&&console.timeEnd("clipping"),dt.push(Rn||[],ve+1,2*p,2*Ne),dt.push(er||[],ve+1,2*p,2*Ne+1),dt.push(Xr||[],ve+1,2*p+1,2*Ne),dt.push(Ur||[],ve+1,2*p+1,2*Ne+1)}}getTile(se,ve,p){se=+se,ve=+ve,p=+p;const Ne=this.options,{extent:Ye,debug:rt}=Ne;if(se<0||se>24)return null;const ct=1<<se,dt=fe(se,ve=ve+ct&ct-1,p);if(this.tiles[dt])return pn(this.tiles[dt],Ye);rt>1&&console.log("drilling down to z%d-%d-%d",se,ve,p);let qt,Gt=se,jt=ve,xt=p;for(;!qt&&Gt>0;)Gt--,jt>>=1,xt>>=1,qt=this.tiles[fe(Gt,jt,xt)];return qt&&qt.source?(rt>1&&(console.log("found parent tile z%d-%d-%d",Gt,jt,xt),console.time("drilling down")),this.splitTile(qt.source,Gt,jt,xt,se,ve,p),rt>1&&console.timeEnd("drilling down"),this.tiles[dt]?pn(this.tiles[dt],Ye):null):null}}function fe(Oe,se,ve){return 32*((1<<Oe)*ve+se)+Oe}function nt(Oe,se){return se?Oe.properties[se]:Oe.id}function St(Oe,se){if(Oe==null)return!0;if(Oe.type==="Feature")return nt(Oe,se)!=null;if(Oe.type==="FeatureCollection"){const ve=new Set;for(const p of Oe.features){const Ne=nt(p,se);if(Ne==null||ve.has(Ne))return!1;ve.add(Ne)}return!0}return!1}function Ht(Oe,se){const ve=new Map;if(Oe!=null)if(Oe.type==="Feature")ve.set(nt(Oe,se),Oe);else for(const p of Oe.features)ve.set(nt(p,se),p);return ve}class sn extends E{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(se,ve){return a._(this,void 0,void 0,function*(){const p=se.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const Ne=this._geoJSONIndex.getTile(p.z,p.x,p.y);if(!Ne)return null;const Ye=new ie(Ne.features);let rt=he(Ye);return rt.byteOffset===0&&rt.byteLength===rt.buffer.byteLength||(rt=new Uint8Array(rt)),{vectorTile:Ye,rawData:rt.buffer}})}loadData(se){return a._(this,void 0,void 0,function*(){var ve;(ve=this._pendingRequest)===null||ve===void 0||ve.abort();const p=!!(se&&se.request&&se.request.collectResourceTiming)&&new a.cu(se.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(se,this._pendingRequest),this._geoJSONIndex=se.cluster?new at(function({superclusterOptions:rt,clusterProperties:ct}){if(!ct||!rt)return rt;const dt={},qt={},Gt={accumulated:null,zoom:0},jt={properties:null},xt=Object.keys(ct);for(const Tn of xt){const[On,gr]=ct[Tn],Er=a.cB(gr),on=a.cB(typeof On=="string"?[On,["accumulated"],["get",Tn]]:On);dt[Tn]=Er.value,qt[Tn]=on.value}return rt.map=Tn=>{jt.properties=Tn;const On={};for(const gr of xt)On[gr]=dt[gr].evaluate(Gt,jt);return On},rt.reduce=(Tn,On)=>{jt.properties=On;for(const gr of xt)Gt.accumulated=Tn[gr],Tn[gr]=qt[gr].evaluate(Gt,jt)},rt}(se)).load((yield this._pendingData).features):(Ne=yield this._pendingData,new ce(Ne,se.geojsonVtOptions)),this.loaded={};const Ye={};if(p){const rt=p.finish();rt&&(Ye.resourceTiming={},Ye.resourceTiming[se.source]=JSON.parse(JSON.stringify(rt)))}return Ye}catch(Ye){if(delete this._pendingRequest,a.cf(Ye))return{abandoned:!0};throw Ye}var Ne})}getData(){return a._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(se){const ve=this.loaded;return ve&&ve[se.uid]?super.reloadTile(se):this.loadTile(se)}loadAndProcessGeoJSON(se,ve){return a._(this,void 0,void 0,function*(){let p=yield this.loadGeoJSON(se,ve);if(delete this._pendingRequest,typeof p!="object")throw new Error(`Input data given to '${se.source}' is not a valid GeoJSON object.`);if(j(p,!0),se.filter){const Ne=a.cB(se.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Ne.result==="error")throw new Error(Ne.value.map(rt=>`${rt.key}: ${rt.message}`).join(", "));p={type:"FeatureCollection",features:p.features.filter(rt=>Ne.value.evaluate({zoom:0},rt))}}return p})}loadGeoJSON(se,ve){return a._(this,void 0,void 0,function*(){const{promoteId:p}=se;if(se.request){const Ne=yield a.h(se.request,ve);return this._dataUpdateable=St(Ne.data,p)?Ht(Ne.data,p):void 0,Ne.data}if(typeof se.data=="string")try{const Ne=JSON.parse(se.data);return this._dataUpdateable=St(Ne,p)?Ht(Ne,p):void 0,Ne}catch{throw new Error(`Input data given to '${se.source}' is not a valid GeoJSON object.`)}if(!se.dataDiff)throw new Error(`Input data given to '${se.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${se.source}`);return function(Ne,Ye,rt){var ct,dt,qt,Gt;if(Ye.removeAll&&Ne.clear(),Ye.remove)for(const jt of Ye.remove)Ne.delete(jt);if(Ye.add)for(const jt of Ye.add){const xt=nt(jt,rt);xt!=null&&Ne.set(xt,jt)}if(Ye.update)for(const jt of Ye.update){let xt=Ne.get(jt.id);if(xt==null)continue;const Tn=!jt.removeAllProperties&&(((ct=jt.removeProperties)===null||ct===void 0?void 0:ct.length)>0||((dt=jt.addOrUpdateProperties)===null||dt===void 0?void 0:dt.length)>0);if((jt.newGeometry||jt.removeAllProperties||Tn)&&(xt=Object.assign({},xt),Ne.set(jt.id,xt),Tn&&(xt.properties=Object.assign({},xt.properties))),jt.newGeometry&&(xt.geometry=jt.newGeometry),jt.removeAllProperties)xt.properties={};else if(((qt=jt.removeProperties)===null||qt===void 0?void 0:qt.length)>0)for(const On of jt.removeProperties)Object.prototype.hasOwnProperty.call(xt.properties,On)&&delete xt.properties[On];if(((Gt=jt.addOrUpdateProperties)===null||Gt===void 0?void 0:Gt.length)>0)for(const{key:On,value:gr}of jt.addOrUpdateProperties)xt.properties[On]=gr}}(this._dataUpdateable,se.dataDiff,p),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(se){return a._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(se){return this._geoJSONIndex.getClusterExpansionZoom(se.clusterId)}getClusterChildren(se){return this._geoJSONIndex.getChildren(se.clusterId)}getClusterLeaves(se){return this._geoJSONIndex.getLeaves(se.clusterId,se.limit,se.offset)}}class tr{constructor(se){this.self=se,this.actor=new a.F(se),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(ve,p)=>{if(this.externalWorkerSourceTypes[ve])throw new Error(`Worker source with name "${ve}" already registered.`);this.externalWorkerSourceTypes[ve]=p},this.self.addProtocol=a.ch,this.self.removeProtocol=a.ci,this.self.registerRTLTextPlugin=ve=>{a.cC.setMethods(ve)},this.actor.registerMessageHandler("LDT",(ve,p)=>this._getDEMWorkerSource(ve,p.source).loadTile(p)),this.actor.registerMessageHandler("RDT",(ve,p)=>a._(this,void 0,void 0,function*(){this._getDEMWorkerSource(ve,p.source).removeTile(p)})),this.actor.registerMessageHandler("GCEZ",(ve,p)=>a._(this,void 0,void 0,function*(){return this._getWorkerSource(ve,p.type,p.source).getClusterExpansionZoom(p)})),this.actor.registerMessageHandler("GCC",(ve,p)=>a._(this,void 0,void 0,function*(){return this._getWorkerSource(ve,p.type,p.source).getClusterChildren(p)})),this.actor.registerMessageHandler("GCL",(ve,p)=>a._(this,void 0,void 0,function*(){return this._getWorkerSource(ve,p.type,p.source).getClusterLeaves(p)})),this.actor.registerMessageHandler("LD",(ve,p)=>this._getWorkerSource(ve,p.type,p.source).loadData(p)),this.actor.registerMessageHandler("GD",(ve,p)=>this._getWorkerSource(ve,p.type,p.source).getData()),this.actor.registerMessageHandler("LT",(ve,p)=>this._getWorkerSource(ve,p.type,p.source).loadTile(p)),this.actor.registerMessageHandler("RT",(ve,p)=>this._getWorkerSource(ve,p.type,p.source).reloadTile(p)),this.actor.registerMessageHandler("AT",(ve,p)=>this._getWorkerSource(ve,p.type,p.source).abortTile(p)),this.actor.registerMessageHandler("RMT",(ve,p)=>this._getWorkerSource(ve,p.type,p.source).removeTile(p)),this.actor.registerMessageHandler("RS",(ve,p)=>a._(this,void 0,void 0,function*(){if(!this.workerSources[ve]||!this.workerSources[ve][p.type]||!this.workerSources[ve][p.type][p.source])return;const Ne=this.workerSources[ve][p.type][p.source];delete this.workerSources[ve][p.type][p.source],Ne.removeSource!==void 0&&Ne.removeSource(p)})),this.actor.registerMessageHandler("RM",ve=>a._(this,void 0,void 0,function*(){delete this.layerIndexes[ve],delete this.availableImages[ve],delete this.workerSources[ve],delete this.demWorkerSources[ve]})),this.actor.registerMessageHandler("SR",(ve,p)=>a._(this,void 0,void 0,function*(){this.referrer=p})),this.actor.registerMessageHandler("SRPS",(ve,p)=>this._syncRTLPluginState(ve,p)),this.actor.registerMessageHandler("IS",(ve,p)=>a._(this,void 0,void 0,function*(){this.self.importScripts(p)})),this.actor.registerMessageHandler("SI",(ve,p)=>this._setImages(ve,p)),this.actor.registerMessageHandler("UL",(ve,p)=>a._(this,void 0,void 0,function*(){this._getLayerIndex(ve).update(p.layers,p.removedIds)})),this.actor.registerMessageHandler("SL",(ve,p)=>a._(this,void 0,void 0,function*(){this._getLayerIndex(ve).replace(p)}))}_setImages(se,ve){return a._(this,void 0,void 0,function*(){this.availableImages[se]=ve;for(const p in this.workerSources[se]){const Ne=this.workerSources[se][p];for(const Ye in Ne)Ne[Ye].availableImages=ve}})}_syncRTLPluginState(se,ve){return a._(this,void 0,void 0,function*(){return yield a.cC.syncState(ve,this.self.importScripts)})}_getAvailableImages(se){let ve=this.availableImages[se];return ve||(ve=[]),ve}_getLayerIndex(se){let ve=this.layerIndexes[se];return ve||(ve=this.layerIndexes[se]=new o),ve}_getWorkerSource(se,ve,p){if(this.workerSources[se]||(this.workerSources[se]={}),this.workerSources[se][ve]||(this.workerSources[se][ve]={}),!this.workerSources[se][ve][p]){const Ne={sendAsync:(Ye,rt)=>(Ye.targetMapId=se,this.actor.sendAsync(Ye,rt))};switch(ve){case"vector":this.workerSources[se][ve][p]=new E(Ne,this._getLayerIndex(se),this._getAvailableImages(se));break;case"geojson":this.workerSources[se][ve][p]=new sn(Ne,this._getLayerIndex(se),this._getAvailableImages(se));break;default:this.workerSources[se][ve][p]=new this.externalWorkerSourceTypes[ve](Ne,this._getLayerIndex(se),this._getAvailableImages(se))}}return this.workerSources[se][ve][p]}_getDEMWorkerSource(se,ve){return this.demWorkerSources[se]||(this.demWorkerSources[se]={}),this.demWorkerSources[se][ve]||(this.demWorkerSources[se][ve]=new S),this.demWorkerSources[se][ve]}}return a.i(self)&&(self.worker=new tr(self)),tr}),i("index",["exports","./shared"],function(a,o){var d="5.1.0";function g(){var k=new o.A(4);return o.A!=Float32Array&&(k[1]=0,k[2]=0),k[0]=1,k[3]=1,k}let b,E;const S={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(k,l,c){const _=requestAnimationFrame(l);k.signal.addEventListener("abort",()=>{cancelAnimationFrame(_),c(o.c())})},frameAsync(k){return new Promise((l,c)=>{this.frame(k,l,c)})},getImageData(k,l=0){return this.getImageCanvasContext(k).getImageData(-l,-l,k.width+2*l,k.height+2*l)},getImageCanvasContext(k){const l=window.document.createElement("canvas"),c=l.getContext("2d",{willReadFrequently:!0});if(!c)throw new Error("failed to create canvas 2d context");return l.width=k.width,l.height=k.height,c.drawImage(k,0,0,k.width,k.height),c},resolveURL:k=>(b||(b=document.createElement("a")),b.href=k,b.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(E==null&&(E=matchMedia("(prefers-reduced-motion: reduce)")),E.matches)}};class I{static testProp(l){if(!I.docStyle)return l[0];for(let c=0;c<l.length;c++)if(l[c]in I.docStyle)return l[c];return l[0]}static create(l,c,_){const w=window.document.createElement(l);return c!==void 0&&(w.className=c),_&&_.appendChild(w),w}static createNS(l,c){return window.document.createElementNS(l,c)}static disableDrag(){I.docStyle&&I.selectProp&&(I.userSelect=I.docStyle[I.selectProp],I.docStyle[I.selectProp]="none")}static enableDrag(){I.docStyle&&I.selectProp&&(I.docStyle[I.selectProp]=I.userSelect)}static setTransform(l,c){l.style[I.transformProp]=c}static addEventListener(l,c,_,w={}){l.addEventListener(c,_,"passive"in w?w:w.capture)}static removeEventListener(l,c,_,w={}){l.removeEventListener(c,_,"passive"in w?w:w.capture)}static suppressClickInternal(l){l.preventDefault(),l.stopPropagation(),window.removeEventListener("click",I.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",I.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",I.suppressClickInternal,!0)},0)}static getScale(l){const c=l.getBoundingClientRect();return{x:c.width/l.offsetWidth||1,y:c.height/l.offsetHeight||1,boundingClientRect:c}}static getPoint(l,c,_){const w=c.boundingClientRect;return new o.P((_.clientX-w.left)/c.x-l.clientLeft,(_.clientY-w.top)/c.y-l.clientTop)}static mousePos(l,c){const _=I.getScale(l);return I.getPoint(l,_,c)}static touchPos(l,c){const _=[],w=I.getScale(l);for(let K=0;K<c.length;K++)_.push(I.getPoint(l,w,c[K]));return _}static mouseButton(l){return l.button}static remove(l){l.parentNode&&l.parentNode.removeChild(l)}static sanitize(l){const c=new DOMParser().parseFromString(l,"text/html").body||document.createElement("body"),_=c.querySelectorAll("script");for(const w of _)w.remove();return I.clean(c),c.innerHTML}static isPossiblyDangerous(l,c){const _=c.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(l)||!_.includes("javascript:")&&!_.includes("data:"))||!!l.startsWith("on")||void 0}static clean(l){const c=l.children;for(const _ of c)I.removeAttributes(_),I.clean(_)}static removeAttributes(l){for(const{name:c,value:_}of l.attributes)I.isPossiblyDangerous(c,_)&&l.removeAttribute(c)}}I.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,I.selectProp=I.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),I.transformProp=I.testProp(["transform","WebkitTransform"]);const P={supported:!1,testSupport:function(k){!q&&j&&(Y?ie(k):z=k)}};let z,j,q=!1,Y=!1;function ie(k){const l=k.createTexture();k.bindTexture(k.TEXTURE_2D,l);try{if(k.texImage2D(k.TEXTURE_2D,0,k.RGBA,k.RGBA,k.UNSIGNED_BYTE,j),k.isContextLost())return;P.supported=!0}catch{}k.deleteTexture(l),q=!0}var te;typeof document<"u"&&(j=document.createElement("img"),j.onload=()=>{z&&ie(z),z=null,Y=!0},j.onerror=()=>{q=!0,z=null},j.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(k){let l,c,_,w;k.resetRequestQueue=()=>{l=[],c=0,_=0,w={}},k.addThrottleControl=ee=>{const ae=_++;return w[ae]=ee,ae},k.removeThrottleControl=ee=>{delete w[ee],N()},k.getImage=(ee,ae,xe=!0)=>new Promise((ke,Ke)=>{P.supported&&(ee.headers||(ee.headers={}),ee.headers.accept="image/webp,*/*"),o.e(ee,{type:"image"}),l.push({abortController:ae,requestParameters:ee,supportImageRefresh:xe,state:"queued",onError:$e=>{Ke($e)},onSuccess:$e=>{ke($e)}}),N()});const K=ee=>o._(this,void 0,void 0,function*(){ee.state="running";const{requestParameters:ae,supportImageRefresh:xe,onError:ke,onSuccess:Ke,abortController:$e}=ee,Xe=xe===!1&&!o.i(self)&&!o.g(ae.url)&&(!ae.headers||Object.keys(ae.headers).reduce((mt,vt)=>mt&&vt==="accept",!0));c++;const pt=Xe?$(ae,$e):o.m(ae,$e);try{const mt=yield pt;delete ee.abortController,ee.state="completed",mt.data instanceof HTMLImageElement||o.b(mt.data)?Ke(mt):mt.data&&Ke({data:yield(ut=mt.data,typeof createImageBitmap=="function"?o.d(ut):o.f(ut)),cacheControl:mt.cacheControl,expires:mt.expires})}catch(mt){delete ee.abortController,ke(mt)}finally{c--,N()}var ut}),N=()=>{const ee=(()=>{for(const ae of Object.keys(w))if(w[ae]())return!0;return!1})()?o.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:o.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let ae=c;ae<ee&&l.length>0;ae++){const xe=l.shift();xe.abortController.signal.aborted?ae--:K(xe)}},$=(ee,ae)=>new Promise((xe,ke)=>{const Ke=new Image,$e=ee.url,Xe=ee.credentials;Xe&&Xe==="include"?Ke.crossOrigin="use-credentials":(Xe&&Xe==="same-origin"||!o.s($e))&&(Ke.crossOrigin="anonymous"),ae.signal.addEventListener("abort",()=>{Ke.src="",ke(o.c())}),Ke.fetchPriority="high",Ke.onload=()=>{Ke.onerror=Ke.onload=null,xe({data:Ke})},Ke.onerror=()=>{Ke.onerror=Ke.onload=null,ae.signal.aborted||ke(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},Ke.src=$e})}(te||(te={})),te.resetRequestQueue();class V{constructor(l){this._transformRequestFn=l}transformRequest(l,c){return this._transformRequestFn&&this._transformRequestFn(l,c)||{url:l}}setTransformRequest(l){this._transformRequestFn=l}}function ne(k){const l=[];if(typeof k=="string")l.push({id:"default",url:k});else if(k&&k.length>0){const c=[];for(const{id:_,url:w}of k){const K=`${_}${w}`;c.indexOf(K)===-1&&(c.push(K),l.push({id:_,url:w}))}}return l}function G(k,l,c){try{const _=new URL(k);return _.pathname+=`${l}${c}`,_.toString()}catch{throw new Error(`Invalid sprite URL "${k}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}class oe{constructor(l,c,_,w){this.context=l,this.format=_,this.texture=l.gl.createTexture(),this.update(c,w)}update(l,c,_){const{width:w,height:K}=l,N=!(this.size&&this.size[0]===w&&this.size[1]===K||_),{context:$}=this,{gl:ee}=$;if(this.useMipmap=!!(c&&c.useMipmap),ee.bindTexture(ee.TEXTURE_2D,this.texture),$.pixelStoreUnpackFlipY.set(!1),$.pixelStoreUnpack.set(1),$.pixelStoreUnpackPremultiplyAlpha.set(this.format===ee.RGBA&&(!c||c.premultiply!==!1)),N)this.size=[w,K],l instanceof HTMLImageElement||l instanceof HTMLCanvasElement||l instanceof HTMLVideoElement||l instanceof ImageData||o.b(l)?ee.texImage2D(ee.TEXTURE_2D,0,this.format,this.format,ee.UNSIGNED_BYTE,l):ee.texImage2D(ee.TEXTURE_2D,0,this.format,w,K,0,this.format,ee.UNSIGNED_BYTE,l.data);else{const{x:ae,y:xe}=_||{x:0,y:0};l instanceof HTMLImageElement||l instanceof HTMLCanvasElement||l instanceof HTMLVideoElement||l instanceof ImageData||o.b(l)?ee.texSubImage2D(ee.TEXTURE_2D,0,ae,xe,ee.RGBA,ee.UNSIGNED_BYTE,l):ee.texSubImage2D(ee.TEXTURE_2D,0,ae,xe,w,K,ee.RGBA,ee.UNSIGNED_BYTE,l.data)}this.useMipmap&&this.isSizePowerOfTwo()&&ee.generateMipmap(ee.TEXTURE_2D)}bind(l,c,_){const{context:w}=this,{gl:K}=w;K.bindTexture(K.TEXTURE_2D,this.texture),_!==K.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(_=K.LINEAR),l!==this.filter&&(K.texParameteri(K.TEXTURE_2D,K.TEXTURE_MAG_FILTER,l),K.texParameteri(K.TEXTURE_2D,K.TEXTURE_MIN_FILTER,_||l),this.filter=l),c!==this.wrap&&(K.texParameteri(K.TEXTURE_2D,K.TEXTURE_WRAP_S,c),K.texParameteri(K.TEXTURE_2D,K.TEXTURE_WRAP_T,c),this.wrap=c)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:l}=this.context;l.deleteTexture(this.texture),this.texture=null}}function he(k){const{userImage:l}=k;return!!(l&&l.render&&l.render())&&(k.data.replace(new Uint8Array(l.data.buffer)),!0)}class pe extends o.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new o.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(l){if(this.loaded!==l&&(this.loaded=l,l)){for(const{ids:c,promiseResolve:_}of this.requestors)_(this._getImagesForIds(c));this.requestors=[]}}getImage(l){const c=this.images[l];if(c&&!c.data&&c.spriteData){const _=c.spriteData;c.data=new o.R({width:_.width,height:_.height},_.context.getImageData(_.x,_.y,_.width,_.height).data),c.spriteData=null}return c}addImage(l,c){if(this.images[l])throw new Error(`Image id ${l} already exist, use updateImage instead`);this._validate(l,c)&&(this.images[l]=c)}_validate(l,c){let _=!0;const w=c.data||c.spriteData;return this._validateStretch(c.stretchX,w&&w.width)||(this.fire(new o.j(new Error(`Image "${l}" has invalid "stretchX" value`))),_=!1),this._validateStretch(c.stretchY,w&&w.height)||(this.fire(new o.j(new Error(`Image "${l}" has invalid "stretchY" value`))),_=!1),this._validateContent(c.content,c)||(this.fire(new o.j(new Error(`Image "${l}" has invalid "content" value`))),_=!1),_}_validateStretch(l,c){if(!l)return!0;let _=0;for(const w of l){if(w[0]<_||w[1]<w[0]||c<w[1])return!1;_=w[1]}return!0}_validateContent(l,c){if(!l)return!0;if(l.length!==4)return!1;const _=c.spriteData,w=_&&_.width||c.data.width,K=_&&_.height||c.data.height;return!(l[0]<0||w<l[0]||l[1]<0||K<l[1]||l[2]<0||w<l[2]||l[3]<0||K<l[3]||l[2]<l[0]||l[3]<l[1])}updateImage(l,c,_=!0){const w=this.getImage(l);if(_&&(w.data.width!==c.data.width||w.data.height!==c.data.height))throw new Error(`size mismatch between old image (${w.data.width}x${w.data.height}) and new image (${c.data.width}x${c.data.height}).`);c.version=w.version+1,this.images[l]=c,this.updatedImages[l]=!0}removeImage(l){const c=this.images[l];delete this.images[l],delete this.patterns[l],c.userImage&&c.userImage.onRemove&&c.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(l){return new Promise((c,_)=>{let w=!0;if(!this.isLoaded())for(const K of l)this.images[K]||(w=!1);this.isLoaded()||w?c(this._getImagesForIds(l)):this.requestors.push({ids:l,promiseResolve:c})})}_getImagesForIds(l){const c={};for(const _ of l){let w=this.getImage(_);w||(this.fire(new o.k("styleimagemissing",{id:_})),w=this.getImage(_)),w?c[_]={data:w.data.clone(),pixelRatio:w.pixelRatio,sdf:w.sdf,version:w.version,stretchX:w.stretchX,stretchY:w.stretchY,content:w.content,textFitWidth:w.textFitWidth,textFitHeight:w.textFitHeight,hasRenderCallback:!!(w.userImage&&w.userImage.render)}:o.w(`Image "${_}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return c}getPixelSize(){const{width:l,height:c}=this.atlasImage;return{width:l,height:c}}getPattern(l){const c=this.patterns[l],_=this.getImage(l);if(!_)return null;if(c&&c.position.version===_.version)return c.position;if(c)c.position.version=_.version;else{const w={w:_.data.width+2,h:_.data.height+2,x:0,y:0},K=new o.I(w,_);this.patterns[l]={bin:w,position:K}}return this._updatePatternAtlas(),this.patterns[l].position}bind(l){const c=l.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new oe(l,this.atlasImage,c.RGBA),this.atlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE)}_updatePatternAtlas(){const l=[];for(const K in this.patterns)l.push(this.patterns[K].bin);const{w:c,h:_}=o.p(l),w=this.atlasImage;w.resize({width:c||1,height:_||1});for(const K in this.patterns){const{bin:N}=this.patterns[K],$=N.x+1,ee=N.y+1,ae=this.getImage(K).data,xe=ae.width,ke=ae.height;o.R.copy(ae,w,{x:0,y:0},{x:$,y:ee},{width:xe,height:ke}),o.R.copy(ae,w,{x:0,y:ke-1},{x:$,y:ee-1},{width:xe,height:1}),o.R.copy(ae,w,{x:0,y:0},{x:$,y:ee+ke},{width:xe,height:1}),o.R.copy(ae,w,{x:xe-1,y:0},{x:$-1,y:ee},{width:1,height:ke}),o.R.copy(ae,w,{x:0,y:0},{x:$+xe,y:ee},{width:1,height:ke})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(l){for(const c of l){if(this.callbackDispatchedThisFrame[c])continue;this.callbackDispatchedThisFrame[c]=!0;const _=this.getImage(c);_||o.w(`Image with ID: "${c}" was not found`),he(_)&&this.updateImage(c,_)}}}const Ee=1e20;function me(k,l,c,_,w,K,N,$,ee){for(let ae=l;ae<l+_;ae++)Se(k,c*K+ae,K,w,N,$,ee);for(let ae=c;ae<c+w;ae++)Se(k,ae*K+l,1,_,N,$,ee)}function Se(k,l,c,_,w,K,N){K[0]=0,N[0]=-1e20,N[1]=Ee,w[0]=k[l];for(let $=1,ee=0,ae=0;$<_;$++){w[$]=k[l+$*c];const xe=$*$;do{const ke=K[ee];ae=(w[$]-w[ke]+xe-ke*ke)/($-ke)/2}while(ae<=N[ee]&&--ee>-1);ee++,K[ee]=$,N[ee]=ae,N[ee+1]=Ee}for(let $=0,ee=0;$<_;$++){for(;N[ee+1]<$;)ee++;const ae=K[ee],xe=$-ae;k[l+$*c]=w[ae]+xe*xe}}class De{constructor(l,c){this.requestManager=l,this.localIdeographFontFamily=c,this.entries={}}setURL(l){this.url=l}getGlyphs(l){return o._(this,void 0,void 0,function*(){const c=[];for(const K in l)for(const N of l[K])c.push(this._getAndCacheGlyphsPromise(K,N));const _=yield Promise.all(c),w={};for(const{stack:K,id:N,glyph:$}of _)w[K]||(w[K]={}),w[K][N]=$&&{id:$.id,bitmap:$.bitmap.clone(),metrics:$.metrics};return w})}_getAndCacheGlyphsPromise(l,c){return o._(this,void 0,void 0,function*(){let _=this.entries[l];_||(_=this.entries[l]={glyphs:{},requests:{},ranges:{}});let w=_.glyphs[c];if(w!==void 0)return{stack:l,id:c,glyph:w};if(w=this._tinySDF(_,l,c),w)return _.glyphs[c]=w,{stack:l,id:c,glyph:w};const K=Math.floor(c/256);if(256*K>65535)throw new Error("glyphs > 65535 not supported");if(_.ranges[K])return{stack:l,id:c,glyph:w};if(!this.url)throw new Error("glyphsUrl is not set");if(!_.requests[K]){const $=De.loadGlyphRange(l,K,this.url,this.requestManager);_.requests[K]=$}const N=yield _.requests[K];for(const $ in N)this._doesCharSupportLocalGlyph(+$)||(_.glyphs[+$]=N[+$]);return _.ranges[K]=!0,{stack:l,id:c,glyph:N[c]||null}})}_doesCharSupportLocalGlyph(l){return!!this.localIdeographFontFamily&&new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(l))}_tinySDF(l,c,_){const w=this.localIdeographFontFamily;if(!w||!this._doesCharSupportLocalGlyph(_))return;let K=l.tinySDF;if(!K){let $="400";/bold/i.test(c)?$="900":/medium/i.test(c)?$="500":/light/i.test(c)&&($="200"),K=l.tinySDF=new De.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:w,fontWeight:$})}const N=K.draw(String.fromCharCode(_));return{id:_,bitmap:new o.o({width:N.width||60,height:N.height||60},N.data),metrics:{width:N.glyphWidth/2||24,height:N.glyphHeight/2||24,left:N.glyphLeft/2+.5||0,top:N.glyphTop/2-27.5||-8,advance:N.glyphAdvance/2||24,isDoubleResolution:!0}}}}De.loadGlyphRange=function(k,l,c,_){return o._(this,void 0,void 0,function*(){const w=256*l,K=w+255,N=_.transformRequest(c.replace("{fontstack}",k).replace("{range}",`${w}-${K}`),"Glyphs"),$=yield o.l(N,new AbortController);if(!$||!$.data)throw new Error(`Could not load glyph range. range: ${l}, ${w}-${K}`);const ee={};for(const ae of o.n($.data))ee[ae.id]=ae;return ee})},De.TinySDF=class{constructor({fontSize:k=24,buffer:l=3,radius:c=8,cutoff:_=.25,fontFamily:w="sans-serif",fontWeight:K="normal",fontStyle:N="normal"}={}){this.buffer=l,this.cutoff=_,this.radius=c;const $=this.size=k+4*l,ee=this._createCanvas($),ae=this.ctx=ee.getContext("2d",{willReadFrequently:!0});ae.font=`${N} ${K} ${k}px ${w}`,ae.textBaseline="alphabetic",ae.textAlign="left",ae.fillStyle="black",this.gridOuter=new Float64Array($*$),this.gridInner=new Float64Array($*$),this.f=new Float64Array($),this.z=new Float64Array($+1),this.v=new Uint16Array($)}_createCanvas(k){const l=document.createElement("canvas");return l.width=l.height=k,l}draw(k){const{width:l,actualBoundingBoxAscent:c,actualBoundingBoxDescent:_,actualBoundingBoxLeft:w,actualBoundingBoxRight:K}=this.ctx.measureText(k),N=Math.ceil(c),$=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(K-w))),ee=Math.min(this.size-this.buffer,N+Math.ceil(_)),ae=$+2*this.buffer,xe=ee+2*this.buffer,ke=Math.max(ae*xe,0),Ke=new Uint8ClampedArray(ke),$e={data:Ke,width:ae,height:xe,glyphWidth:$,glyphHeight:ee,glyphTop:N,glyphLeft:0,glyphAdvance:l};if($===0||ee===0)return $e;const{ctx:Xe,buffer:pt,gridInner:ut,gridOuter:mt}=this;Xe.clearRect(pt,pt,$,ee),Xe.fillText(k,pt,pt+N);const vt=Xe.getImageData(pt,pt,$,ee);mt.fill(Ee,0,ke),ut.fill(0,0,ke);for(let Bt=0;Bt<ee;Bt++)for(let kt=0;kt<$;kt++){const Rt=vt.data[4*(Bt*$+kt)+3]/255;if(Rt===0)continue;const zt=(Bt+pt)*ae+kt+pt;if(Rt===1)mt[zt]=0,ut[zt]=Ee;else{const Tt=.5-Rt;mt[zt]=Tt>0?Tt*Tt:0,ut[zt]=Tt<0?Tt*Tt:0}}me(mt,0,0,ae,xe,ae,this.f,this.v,this.z),me(ut,pt,pt,$,ee,ae,this.f,this.v,this.z);for(let Bt=0;Bt<ke;Bt++){const kt=Math.sqrt(mt[Bt])-Math.sqrt(ut[Bt]);Ke[Bt]=Math.round(255-255*(kt/this.radius+this.cutoff))}return $e}};class be{constructor(){this.specification=o.v.light.position}possiblyEvaluate(l,c){return o.x(l.expression.evaluate(c))}interpolate(l,c,_){return{x:o.y.number(l.x,c.x,_),y:o.y.number(l.y,c.y,_),z:o.y.number(l.z,c.z,_)}}}let at;class Ze extends o.E{constructor(l){super(),at=at||new o.q({anchor:new o.D(o.v.light.anchor),position:new be,color:new o.D(o.v.light.color),intensity:new o.D(o.v.light.intensity)}),this._transitionable=new o.T(at),this.setLight(l),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(l,c={}){if(!this._validate(o.r,l,c))for(const _ in l){const w=l[_];_.endsWith("-transition")?this._transitionable.setTransition(_.slice(0,-11),w):this._transitionable.setValue(_,w)}}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}_validate(l,c,_){return(!_||_.validate!==!1)&&o.t(this,l.call(o.u,{value:c,style:{glyphs:!0,sprite:!0},styleSpec:o.v}))}}const Je=new o.q({"sky-color":new o.D(o.v.sky["sky-color"]),"horizon-color":new o.D(o.v.sky["horizon-color"]),"fog-color":new o.D(o.v.sky["fog-color"]),"fog-ground-blend":new o.D(o.v.sky["fog-ground-blend"]),"horizon-fog-blend":new o.D(o.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new o.D(o.v.sky["sky-horizon-blend"]),"atmosphere-blend":new o.D(o.v.sky["atmosphere-blend"])});class We extends o.E{constructor(l){super(),this._transitionable=new o.T(Je),this.setSky(l),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new o.z(0))}setSky(l,c={}){if(!this._validate(o.B,l,c)){l||(l={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const _ in l){const w=l[_];_.endsWith("-transition")?this._transitionable.setTransition(_.slice(0,-11),w):this._transitionable.setValue(_,w)}}}getSky(){return this._transitionable.serialize()}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}_validate(l,c,_={}){return(_==null?void 0:_.validate)!==!1&&o.t(this,l.call(o.u,o.e({value:c,style:{glyphs:!0,sprite:!0},styleSpec:o.v})))}calculateFogBlendOpacity(l){return l<60?0:l<70?(l-60)/10:1}}class Me{constructor(l,c){this.width=l,this.height=c,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(l,c){const _=l.join(",")+String(c);return this.dashEntry[_]||(this.dashEntry[_]=this.addDash(l,c)),this.dashEntry[_]}getDashRanges(l,c,_){const w=[];let K=l.length%2==1?-l[l.length-1]*_:0,N=l[0]*_,$=!0;w.push({left:K,right:N,isDash:$,zeroLength:l[0]===0});let ee=l[0];for(let ae=1;ae<l.length;ae++){$=!$;const xe=l[ae];K=ee*_,ee+=xe,N=ee*_,w.push({left:K,right:N,isDash:$,zeroLength:xe===0})}return w}addRoundDash(l,c,_){const w=c/2;for(let K=-_;K<=_;K++){const N=this.width*(this.nextRow+_+K);let $=0,ee=l[$];for(let ae=0;ae<this.width;ae++){ae/ee.right>1&&(ee=l[++$]);const xe=Math.abs(ae-ee.left),ke=Math.abs(ae-ee.right),Ke=Math.min(xe,ke);let $e;const Xe=K/_*(w+1);if(ee.isDash){const pt=w-Math.abs(Xe);$e=Math.sqrt(Ke*Ke+pt*pt)}else $e=w-Math.sqrt(Ke*Ke+Xe*Xe);this.data[N+ae]=Math.max(0,Math.min(255,$e+128))}}}addRegularDash(l){for(let $=l.length-1;$>=0;--$){const ee=l[$],ae=l[$+1];ee.zeroLength?l.splice($,1):ae&&ae.isDash===ee.isDash&&(ae.left=ee.left,l.splice($,1))}const c=l[0],_=l[l.length-1];c.isDash===_.isDash&&(c.left=_.left-this.width,_.right=c.right+this.width);const w=this.width*this.nextRow;let K=0,N=l[K];for(let $=0;$<this.width;$++){$/N.right>1&&(N=l[++K]);const ee=Math.abs($-N.left),ae=Math.abs($-N.right),xe=Math.min(ee,ae);this.data[w+$]=Math.max(0,Math.min(255,(N.isDash?xe:-xe)+128))}}addDash(l,c){const _=c?7:0,w=2*_+1;if(this.nextRow+w>this.height)return o.w("LineAtlas out of space"),null;let K=0;for(let $=0;$<l.length;$++)K+=l[$];if(K!==0){const $=this.width/K,ee=this.getDashRanges(l,this.width,$);c?this.addRoundDash(ee,$,_):this.addRegularDash(ee)}const N={y:(this.nextRow+_+.5)/this.height,height:2*_/this.height,width:K};return this.nextRow+=w,this.dirty=!0,N}bind(l){const c=l.gl;this.texture?(c.bindTexture(c.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,c.texSubImage2D(c.TEXTURE_2D,0,0,0,this.width,this.height,c.ALPHA,c.UNSIGNED_BYTE,this.data))):(this.texture=c.createTexture(),c.bindTexture(c.TEXTURE_2D,this.texture),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texImage2D(c.TEXTURE_2D,0,c.ALPHA,this.width,this.height,0,c.ALPHA,c.UNSIGNED_BYTE,this.data))}}const Fe="maplibre_preloaded_worker_pool";class He{constructor(){this.active={}}acquire(l){if(!this.workers)for(this.workers=[];this.workers.length<He.workerCount;)this.workers.push(new Worker(o.a.WORKER_URL));return this.active[l]=!0,this.workers.slice()}release(l){delete this.active[l],this.numActive()===0&&(this.workers.forEach(c=>{c.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Fe]}numActive(){return Object.keys(this.active).length}}const bt=Math.floor(S.hardwareConcurrency/2);let Yt,gt;function Lt(){return Yt||(Yt=new He),Yt}He.workerCount=o.C(globalThis)?Math.max(Math.min(bt,3),1):1;class Kt{constructor(l,c){this.workerPool=l,this.actors=[],this.currentActor=0,this.id=c;const _=this.workerPool.acquire(c);for(let w=0;w<_.length;w++){const K=new o.F(_[w],c);K.name=`Worker ${w}`,this.actors.push(K)}if(!this.actors.length)throw new Error("No actors found")}broadcast(l,c){const _=[];for(const w of this.actors)_.push(w.sendAsync({type:l,data:c}));return Promise.all(_)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(l=!0){this.actors.forEach(c=>{c.remove()}),this.actors=[],l&&this.workerPool.release(this.id)}registerMessageHandler(l,c){for(const _ of this.actors)_.registerMessageHandler(l,c)}}function Ue(){return gt||(gt=new Kt(Lt(),o.G),gt.registerMessageHandler("GR",(k,l,c)=>o.m(l,c))),gt}function Pe(k,l){const c=o.H();return o.J(c,c,[1,1,0]),o.K(c,c,[.5*k.width,.5*k.height,1]),k.calculatePosMatrix?o.L(c,c,k.calculatePosMatrix(l.toUnwrapped())):c}function Be(k,l,c,_,w,K){var N;const $=function(ke,Ke,$e){if(ke)for(const Xe of ke){const pt=Ke[Xe];if(pt&&pt.source===$e&&pt.type==="fill-extrusion")return!0}else for(const Xe in Ke){const pt=Ke[Xe];if(pt.source===$e&&pt.type==="fill-extrusion")return!0}return!1}((N=w==null?void 0:w.layers)!==null&&N!==void 0?N:null,l,k.id),ee=K.maxPitchScaleFactor(),ae=k.tilesIn(_,ee,$);ae.sort(it);const xe=[];for(const ke of ae)xe.push({wrappedTileID:ke.tileID.wrapped().key,queryResults:ke.tile.queryRenderedFeatures(l,c,k._state,ke.queryGeometry,ke.cameraQueryGeometry,ke.scale,w,K,ee,Pe(k.transform,ke.tileID))});return function(ke,Ke){for(const $e in ke)for(const Xe of ke[$e])_t(Xe,Ke);return ke}(function(ke){const Ke={},$e={};for(const Xe of ke){const pt=Xe.queryResults,ut=Xe.wrappedTileID,mt=$e[ut]=$e[ut]||{};for(const vt in pt){const Bt=pt[vt],kt=mt[vt]=mt[vt]||{},Rt=Ke[vt]=Ke[vt]||[];for(const zt of Bt)kt[zt.featureIndex]||(kt[zt.featureIndex]=!0,Rt.push(zt))}}return Ke}(xe),k)}function it(k,l){const c=k.tileID,_=l.tileID;return c.overscaledZ-_.overscaledZ||c.canonical.y-_.canonical.y||c.wrap-_.wrap||c.canonical.x-_.canonical.x}function _t(k,l){const c=k.feature,_=l.getFeatureState(c.layer["source-layer"],c.id);c.source=c.layer.source,c.layer["source-layer"]&&(c.sourceLayer=c.layer["source-layer"]),c.state=_}function ft(k,l,c){return o._(this,void 0,void 0,function*(){let _=k;if(k.url?_=(yield o.h(l.transformRequest(k.url,"Source"),c)).data:yield S.frameAsync(c),!_)return null;const w=o.M(o.e(_,k),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in _&&_.vector_layers&&(w.vectorLayerIds=_.vector_layers.map(K=>K.id)),w})}class Ut{constructor(l,c){l&&(c?this.setSouthWest(l).setNorthEast(c):Array.isArray(l)&&(l.length===4?this.setSouthWest([l[0],l[1]]).setNorthEast([l[2],l[3]]):this.setSouthWest(l[0]).setNorthEast(l[1])))}setNorthEast(l){return this._ne=l instanceof o.N?new o.N(l.lng,l.lat):o.N.convert(l),this}setSouthWest(l){return this._sw=l instanceof o.N?new o.N(l.lng,l.lat):o.N.convert(l),this}extend(l){const c=this._sw,_=this._ne;let w,K;if(l instanceof o.N)w=l,K=l;else{if(!(l instanceof Ut))return Array.isArray(l)?l.length===4||l.every(Array.isArray)?this.extend(Ut.convert(l)):this.extend(o.N.convert(l)):l&&("lng"in l||"lon"in l)&&"lat"in l?this.extend(o.N.convert(l)):this;if(w=l._sw,K=l._ne,!w||!K)return this}return c||_?(c.lng=Math.min(w.lng,c.lng),c.lat=Math.min(w.lat,c.lat),_.lng=Math.max(K.lng,_.lng),_.lat=Math.max(K.lat,_.lat)):(this._sw=new o.N(w.lng,w.lat),this._ne=new o.N(K.lng,K.lat)),this}getCenter(){return new o.N((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new o.N(this.getWest(),this.getNorth())}getSouthEast(){return new o.N(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(l){const{lng:c,lat:_}=o.N.convert(l);let w=this._sw.lng<=c&&c<=this._ne.lng;return this._sw.lng>this._ne.lng&&(w=this._sw.lng>=c&&c>=this._ne.lng),this._sw.lat<=_&&_<=this._ne.lat&&w}static convert(l){return l instanceof Ut?l:l&&new Ut(l)}static fromLngLat(l,c=0){const _=360*c/40075017,w=_/Math.cos(Math.PI/180*l.lat);return new Ut(new o.N(l.lng-w,l.lat-_),new o.N(l.lng+w,l.lat+_))}adjustAntiMeridian(){const l=new o.N(this._sw.lng,this._sw.lat),c=new o.N(this._ne.lng,this._ne.lat);return new Ut(l,l.lng>c.lng?new o.N(c.lng+360,c.lat):c)}}class rn{constructor(l,c,_){this.bounds=Ut.convert(this.validateBounds(l)),this.minzoom=c||0,this.maxzoom=_||24}validateBounds(l){return Array.isArray(l)&&l.length===4?[Math.max(-180,l[0]),Math.max(-90,l[1]),Math.min(180,l[2]),Math.min(90,l[3])]:[-180,-90,180,90]}contains(l){const c=Math.pow(2,l.z),_=Math.floor(o.O(this.bounds.getWest())*c),w=Math.floor(o.Q(this.bounds.getNorth())*c),K=Math.ceil(o.O(this.bounds.getEast())*c),N=Math.ceil(o.Q(this.bounds.getSouth())*c);return l.x>=_&&l.x<K&&l.y>=w&&l.y<N}}class Dt extends o.E{constructor(l,c,_,w){if(super(),this.id=l,this.dispatcher=_,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.e(this,o.M(c,["url","scheme","tileSize","promoteId"])),this._options=o.e({type:"vector"},c),this._collectResourceTiming=c.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(w)}load(){return o._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new o.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const l=yield ft(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),l&&(o.e(this,l),l.bounds&&(this.tileBounds=new rn(l.bounds,this.minzoom,this.maxzoom)),this.fire(new o.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.k("data",{dataType:"source",sourceDataType:"content"})))}catch(l){this._tileJSONRequest=null,this.fire(new o.j(l))}})}loaded(){return this._loaded}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}onAdd(l){this.map=l,this.load()}setSourceProperty(l){this._tileJSONRequest&&this._tileJSONRequest.abort(),l(),this.load()}setTiles(l){return this.setSourceProperty(()=>{this._options.tiles=l}),this}setUrl(l){return this.setSourceProperty(()=>{this.url=l,this._options.url=l}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return o.e({},this._options)}loadTile(l){return o._(this,void 0,void 0,function*(){const c=l.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),_={request:this.map._requestManager.transformRequest(c,"Tile"),uid:l.uid,tileID:l.tileID,zoom:l.tileID.overscaledZ,tileSize:this.tileSize*l.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};_.request.collectResourceTiming=this._collectResourceTiming;let w="RT";if(l.actor&&l.state!=="expired"){if(l.state==="loading")return new Promise((K,N)=>{l.reloadPromise={resolve:K,reject:N}})}else l.actor=this.dispatcher.getActor(),w="LT";l.abortController=new AbortController;try{const K=yield l.actor.sendAsync({type:w,data:_},l.abortController);if(delete l.abortController,l.aborted)return;this._afterTileLoadWorkerResponse(l,K)}catch(K){if(delete l.abortController,l.aborted)return;if(K&&K.status!==404)throw K;this._afterTileLoadWorkerResponse(l,null)}})}_afterTileLoadWorkerResponse(l,c){if(c&&c.resourceTiming&&(l.resourceTiming=c.resourceTiming),c&&this.map._refreshExpiredTiles&&l.setExpiryData(c),l.loadVectorData(c,this.map.painter),l.reloadPromise){const _=l.reloadPromise;l.reloadPromise=null,this.loadTile(l).then(_.resolve).catch(_.reject)}}abortTile(l){return o._(this,void 0,void 0,function*(){l.abortController&&(l.abortController.abort(),delete l.abortController),l.actor&&(yield l.actor.sendAsync({type:"AT",data:{uid:l.uid,type:this.type,source:this.id}}))})}unloadTile(l){return o._(this,void 0,void 0,function*(){l.unloadVectorData(),l.actor&&(yield l.actor.sendAsync({type:"RMT",data:{uid:l.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class _n extends o.E{constructor(l,c,_,w){super(),this.id=l,this.dispatcher=_,this.setEventedParent(w),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.e({type:"raster"},c),o.e(this,o.M(c,["url","scheme","tileSize"]))}load(){return o._(this,arguments,void 0,function*(l=!1){this._loaded=!1,this.fire(new o.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const c=yield ft(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,c&&(o.e(this,c),c.bounds&&(this.tileBounds=new rn(c.bounds,this.minzoom,this.maxzoom)),this.fire(new o.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.k("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:l})))}catch(c){this._tileJSONRequest=null,this.fire(new o.j(c))}})}loaded(){return this._loaded}onAdd(l){this.map=l,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(l){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),l(),this.load(!0)}setTiles(l){return this.setSourceProperty(()=>{this._options.tiles=l}),this}setUrl(l){return this.setSourceProperty(()=>{this.url=l,this._options.url=l}),this}serialize(){return o.e({},this._options)}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}loadTile(l){return o._(this,void 0,void 0,function*(){const c=l.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);l.abortController=new AbortController;try{const _=yield te.getImage(this.map._requestManager.transformRequest(c,"Tile"),l.abortController,this.map._refreshExpiredTiles);if(delete l.abortController,l.aborted)return void(l.state="unloaded");if(_&&_.data){this.map._refreshExpiredTiles&&_.cacheControl&&_.expires&&l.setExpiryData({cacheControl:_.cacheControl,expires:_.expires});const w=this.map.painter.context,K=w.gl,N=_.data;l.texture=this.map.painter.getTileTexture(N.width),l.texture?l.texture.update(N,{useMipmap:!0}):(l.texture=new oe(w,N,K.RGBA,{useMipmap:!0}),l.texture.bind(K.LINEAR,K.CLAMP_TO_EDGE,K.LINEAR_MIPMAP_NEAREST)),l.state="loaded"}}catch(_){if(delete l.abortController,l.aborted)l.state="unloaded";else if(_)throw l.state="errored",_}})}abortTile(l){return o._(this,void 0,void 0,function*(){l.abortController&&(l.abortController.abort(),delete l.abortController)})}unloadTile(l){return o._(this,void 0,void 0,function*(){l.texture&&this.map.painter.saveTileTexture(l.texture)})}hasTransition(){return!1}}class qn extends _n{constructor(l,c,_,w){super(l,c,_,w),this.type="raster-dem",this.maxzoom=22,this._options=o.e({type:"raster-dem"},c),this.encoding=c.encoding||"mapbox",this.redFactor=c.redFactor,this.greenFactor=c.greenFactor,this.blueFactor=c.blueFactor,this.baseShift=c.baseShift}loadTile(l){return o._(this,void 0,void 0,function*(){const c=l.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),_=this.map._requestManager.transformRequest(c,"Tile");l.neighboringTiles=this._getNeighboringTiles(l.tileID),l.abortController=new AbortController;try{const w=yield te.getImage(_,l.abortController,this.map._refreshExpiredTiles);if(delete l.abortController,l.aborted)return void(l.state="unloaded");if(w&&w.data){const K=w.data;this.map._refreshExpiredTiles&&w.cacheControl&&w.expires&&l.setExpiryData({cacheControl:w.cacheControl,expires:w.expires});const N=o.b(K)&&o.U()?K:yield this.readImageNow(K),$={type:this.type,uid:l.uid,source:this.id,rawImageData:N,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!l.actor||l.state==="expired"){l.actor=this.dispatcher.getActor();const ee=yield l.actor.sendAsync({type:"LDT",data:$});l.dem=ee,l.needsHillshadePrepare=!0,l.needsTerrainPrepare=!0,l.state="loaded"}}}catch(w){if(delete l.abortController,l.aborted)l.state="unloaded";else if(w)throw l.state="errored",w}})}readImageNow(l){return o._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&o.V()){const c=l.width+2,_=l.height+2;try{return new o.R({width:c,height:_},yield o.W(l,-1,-1,c,_))}catch{}}return S.getImageData(l,1)})}_getNeighboringTiles(l){const c=l.canonical,_=Math.pow(2,c.z),w=(c.x-1+_)%_,K=c.x===0?l.wrap-1:l.wrap,N=(c.x+1+_)%_,$=c.x+1===_?l.wrap+1:l.wrap,ee={};return ee[new o.S(l.overscaledZ,K,c.z,w,c.y).key]={backfilled:!1},ee[new o.S(l.overscaledZ,$,c.z,N,c.y).key]={backfilled:!1},c.y>0&&(ee[new o.S(l.overscaledZ,K,c.z,w,c.y-1).key]={backfilled:!1},ee[new o.S(l.overscaledZ,l.wrap,c.z,c.x,c.y-1).key]={backfilled:!1},ee[new o.S(l.overscaledZ,$,c.z,N,c.y-1).key]={backfilled:!1}),c.y+1<_&&(ee[new o.S(l.overscaledZ,K,c.z,w,c.y+1).key]={backfilled:!1},ee[new o.S(l.overscaledZ,l.wrap,c.z,c.x,c.y+1).key]={backfilled:!1},ee[new o.S(l.overscaledZ,$,c.z,N,c.y+1).key]={backfilled:!1}),ee}unloadTile(l){return o._(this,void 0,void 0,function*(){l.demTexture&&this.map.painter.saveTileTexture(l.demTexture),l.fbo&&(l.fbo.destroy(),delete l.fbo),l.dem&&delete l.dem,delete l.neighboringTiles,l.state="unloaded",l.actor&&(yield l.actor.sendAsync({type:"RDT",data:{type:this.type,uid:l.uid,source:this.id}}))})}}class tn extends o.E{constructor(l,c,_,w){super(),this.id=l,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=_.getActor(),this.setEventedParent(w),this._data=c.data,this._options=o.e({},c),this._collectResourceTiming=c.collectResourceTiming,c.maxzoom!==void 0&&(this.maxzoom=c.maxzoom),c.type&&(this.type=c.type),c.attribution&&(this.attribution=c.attribution),this.promoteId=c.promoteId,c.clusterMaxZoom!==void 0&&this.maxzoom<=c.clusterMaxZoom&&o.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${c.clusterMaxZoom}".`),this.workerOptions=o.e({source:this.id,cluster:c.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(c.buffer!==void 0?c.buffer:128),tolerance:this._pixelsToTileUnits(c.tolerance!==void 0?c.tolerance:.375),extent:o.X,maxZoom:this.maxzoom,lineMetrics:c.lineMetrics||!1,generateId:c.generateId||!1},superclusterOptions:{maxZoom:c.clusterMaxZoom!==void 0?c.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,c.clusterMinPoints||2),extent:o.X,radius:this._pixelsToTileUnits(c.clusterRadius||50),log:!1,generateId:c.generateId||!1},clusterProperties:c.clusterProperties,filter:c.filter},c.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_pixelsToTileUnits(l){return l*(o.X/this.tileSize)}load(){return o._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(l){this.map=l,this.load()}setData(l){return this._data=l,this._updateWorkerData(),this}updateData(l){return this._updateWorkerData(l),this}getData(){return o._(this,void 0,void 0,function*(){const l=o.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:l})})}setClusterOptions(l){return this.workerOptions.cluster=l.cluster,l&&(l.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(l.clusterRadius)),l.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=l.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(l){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:l,source:this.id}})}getClusterChildren(l){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:l,source:this.id}})}getClusterLeaves(l,c,_){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:l,limit:c,offset:_}})}_updateWorkerData(l){return o._(this,void 0,void 0,function*(){const c=o.e({type:this.type},this.workerOptions);l?c.dataDiff=l:typeof this._data=="string"?(c.request=this.map._requestManager.transformRequest(S.resolveURL(this._data),"Source"),c.request.collectResourceTiming=this._collectResourceTiming):c.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new o.k("dataloading",{dataType:"source"}));try{const _=yield this.actor.sendAsync({type:"LD",data:c});if(this._pendingLoads--,this._removed||_.abandoned)return void this.fire(new o.k("dataabort",{dataType:"source"}));let w=null;_.resourceTiming&&_.resourceTiming[this.id]&&(w=_.resourceTiming[this.id].slice(0));const K={dataType:"source"};this._collectResourceTiming&&w&&w.length>0&&o.e(K,{resourceTiming:w}),this.fire(new o.k("data",Object.assign(Object.assign({},K),{sourceDataType:"metadata"}))),this.fire(new o.k("data",Object.assign(Object.assign({},K),{sourceDataType:"content"})))}catch(_){if(this._pendingLoads--,this._removed)return void this.fire(new o.k("dataabort",{dataType:"source"}));this.fire(new o.j(_))}})}loaded(){return this._pendingLoads===0}loadTile(l){return o._(this,void 0,void 0,function*(){const c=l.actor?"RT":"LT";l.actor=this.actor;const _={type:this.type,uid:l.uid,tileID:l.tileID,zoom:l.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};l.abortController=new AbortController;const w=yield this.actor.sendAsync({type:c,data:_},l.abortController);delete l.abortController,l.unloadVectorData(),l.aborted||l.loadVectorData(w,this.map.painter,c==="RT")})}abortTile(l){return o._(this,void 0,void 0,function*(){l.abortController&&(l.abortController.abort(),delete l.abortController),l.aborted=!0})}unloadTile(l){return o._(this,void 0,void 0,function*(){l.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:l.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return o.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}class rr extends o.E{constructor(l,c,_,w){super(),this.flippedWindingOrder=!1,this.id=l,this.dispatcher=_,this.coordinates=c.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(w),this.options=c}load(l){return o._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new o.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const c=yield te.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,c&&c.data&&(this.image=c.data,l&&(this.coordinates=l),this._finishLoading())}catch(c){this._request=null,this._loaded=!0,this.fire(new o.j(c))}})}loaded(){return this._loaded}updateImage(l){return l.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=l.url,this.load(l.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new o.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(l){this.map=l,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(l){this.coordinates=l;const c=l.map(o.Y.fromLngLat);var _;return this.tileID=function(w){let K=1/0,N=1/0,$=-1/0,ee=-1/0;for(const Ke of w)K=Math.min(K,Ke.x),N=Math.min(N,Ke.y),$=Math.max($,Ke.x),ee=Math.max(ee,Ke.y);const ae=Math.max($-K,ee-N),xe=Math.max(0,Math.floor(-Math.log(ae)/Math.LN2)),ke=Math.pow(2,xe);return new o.Z(xe,Math.floor((K+$)/2*ke),Math.floor((N+ee)/2*ke))}(c),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=c.map(w=>this.tileID.getTilePoint(w)._round()),this.flippedWindingOrder=((_=this.tileCoords)[1].x-_[0].x)*(_[2].y-_[0].y)-(_[1].y-_[0].y)*(_[2].x-_[0].x)<0,this.fire(new o.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const l=this.map.painter.context,c=l.gl;this.texture||(this.texture=new oe(l,this.image,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));let _=!1;for(const w in this.tiles){const K=this.tiles[w];K.state!=="loaded"&&(K.state="loaded",K.texture=this.texture,_=!0)}_&&this.fire(new o.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(l){return o._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(l.tileID.canonical)?(this.tiles[String(l.tileID.wrap)]=l,l.buckets={}):l.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class Dn extends rr{constructor(l,c,_,w){super(l,c,_,w),this.roundZoom=!0,this.type="video",this.options=c}load(){return o._(this,void 0,void 0,function*(){this._loaded=!1;const l=this.options;this.urls=[];for(const c of l.urls)this.urls.push(this.map._requestManager.transformRequest(c,"Source").url);try{const c=yield o.a0(this.urls);if(this._loaded=!0,!c)return;this.video=c,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(c){this.fire(new o.j(c))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(l){if(this.video){const c=this.video.seekable;l<c.start(0)||l>c.end(0)?this.fire(new o.j(new o.$(`sources.${this.id}`,null,`Playback for this video can be set only between the ${c.start(0)} and ${c.end(0)}-second mark.`))):this.video.currentTime=l}}getVideo(){return this.video}onAdd(l){this.map||(this.map=l,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const l=this.map.painter.context,c=l.gl;this.texture?this.video.paused||(this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE),c.texSubImage2D(c.TEXTURE_2D,0,0,0,c.RGBA,c.UNSIGNED_BYTE,this.video)):(this.texture=new oe(l,this.video,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));let _=!1;for(const w in this.tiles){const K=this.tiles[w];K.state!=="loaded"&&(K.state="loaded",K.texture=this.texture,_=!0)}_&&this.fire(new o.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class pn extends rr{constructor(l,c,_,w){super(l,c,_,w),c.coordinates?Array.isArray(c.coordinates)&&c.coordinates.length===4&&!c.coordinates.some(K=>!Array.isArray(K)||K.length!==2||K.some(N=>typeof N!="number"))||this.fire(new o.j(new o.$(`sources.${l}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new o.j(new o.$(`sources.${l}`,null,'missing required property "coordinates"'))),c.animate&&typeof c.animate!="boolean"&&this.fire(new o.j(new o.$(`sources.${l}`,null,'optional "animate" property must be a boolean value'))),c.canvas?typeof c.canvas=="string"||c.canvas instanceof HTMLCanvasElement||this.fire(new o.j(new o.$(`sources.${l}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new o.j(new o.$(`sources.${l}`,null,'missing required property "canvas"'))),this.options=c,this.animate=c.animate===void 0||c.animate}load(){return o._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new o.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(l){this.map=l,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let l=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,l=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,l=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const c=this.map.painter.context,_=c.gl;this.texture?(l||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new oe(c,this.canvas,_.RGBA,{premultiply:!0});let w=!1;for(const K in this.tiles){const N=this.tiles[K];N.state!=="loaded"&&(N.state="loaded",N.texture=this.texture,w=!0)}w&&this.fire(new o.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const l of[this.canvas.width,this.canvas.height])if(isNaN(l)||l<=0)return!0;return!1}}const Zn={},dr=k=>{switch(k){case"geojson":return tn;case"image":return rr;case"raster":return _n;case"raster-dem":return qn;case"vector":return Dt;case"video":return Dn;case"canvas":return pn}return Zn[k]},vr="RTLPluginLoaded";class Jn extends o.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=Ue()}_syncState(l){return this.status=l,this.dispatcher.broadcast("SRPS",{pluginStatus:l,pluginURL:this.url}).catch(c=>{throw this.status="error",c})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(l){return o._(this,arguments,void 0,function*(c,_=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=S.resolveURL(c),!this.url)throw new Error(`requested url ${c} is invalid`);if(this.status==="unavailable"){if(!_)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return o._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new o.k(vr))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let Qe=null;function ce(){return Qe||(Qe=new Jn),Qe}class fe{constructor(l,c){this.timeAdded=0,this.fadeEndTime=0,this.tileID=l,this.uid=o.a1(),this.uses=0,this.tileSize=c,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(l){const c=l+this.timeAdded;c<this.fadeEndTime||(this.fadeEndTime=c)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(l){this.demTexture&&l.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(l,c,_){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",l){l.featureIndex&&(this.latestFeatureIndex=l.featureIndex,l.rawTileData?(this.latestRawTileData=l.rawTileData,this.latestFeatureIndex.rawTileData=l.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=l.collisionBoxArray,this.buckets=function(w,K){const N={};if(!K)return N;for(const $ of w){const ee=$.layerIds.map(ae=>K.getLayer(ae)).filter(Boolean);if(ee.length!==0){$.layers=ee,$.stateDependentLayerIds&&($.stateDependentLayers=$.stateDependentLayerIds.map(ae=>ee.filter(xe=>xe.id===ae)[0]));for(const ae of ee)N[ae.id]=$}}return N}(l.buckets,c==null?void 0:c.style),this.hasSymbolBuckets=!1;for(const w in this.buckets){const K=this.buckets[w];if(K instanceof o.a3){if(this.hasSymbolBuckets=!0,!_)break;K.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const w in this.buckets){const K=this.buckets[w];if(K instanceof o.a3&&K.hasRTLText){this.hasRTLText=!0,ce().lazyLoad();break}}this.queryPadding=0;for(const w in this.buckets){const K=this.buckets[w];this.queryPadding=Math.max(this.queryPadding,c.style.getLayer(w).queryRadius(K))}l.imageAtlas&&(this.imageAtlas=l.imageAtlas),l.glyphAtlasImage&&(this.glyphAtlasImage=l.glyphAtlasImage)}else this.collisionBoxArray=new o.a2}unloadVectorData(){for(const l in this.buckets)this.buckets[l].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(l){return this.buckets[l.id]}upload(l){for(const _ in this.buckets){const w=this.buckets[_];w.uploadPending()&&w.upload(l)}const c=l.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new oe(l,this.imageAtlas.image,c.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new oe(l,this.glyphAtlasImage,c.ALPHA),this.glyphAtlasImage=null)}prepare(l){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(l,this.imageAtlasTexture)}queryRenderedFeatures(l,c,_,w,K,N,$,ee,ae,xe){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:w,cameraQueryGeometry:K,scale:N,tileSize:this.tileSize,pixelPosMatrix:xe,transform:ee,params:$,queryPadding:this.queryPadding*ae},l,c,_):{}}querySourceFeatures(l,c){const _=this.latestFeatureIndex;if(!_||!_.rawTileData)return;const w=_.loadVTLayers(),K=c&&c.sourceLayer?c.sourceLayer:"",N=w._geojsonTileLayer||w[K];if(!N)return;const $=o.a4(c&&c.filter),{z:ee,x:ae,y:xe}=this.tileID.canonical,ke={z:ee,x:ae,y:xe};for(let Ke=0;Ke<N.length;Ke++){const $e=N.feature(Ke);if($.needGeometry){const ut=o.a5($e,!0);if(!$.filter(new o.z(this.tileID.overscaledZ),ut,this.tileID.canonical))continue}else if(!$.filter(new o.z(this.tileID.overscaledZ),$e))continue;const Xe=_.getId($e,K),pt=new o.a6($e,ee,ae,xe,Xe);pt.tile=ke,l.push(pt)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(l){const c=this.expirationTime;if(l.cacheControl){const _=o.a7(l.cacheControl);_["max-age"]&&(this.expirationTime=Date.now()+1e3*_["max-age"])}else l.expires&&(this.expirationTime=new Date(l.expires).getTime());if(this.expirationTime){const _=Date.now();let w=!1;if(this.expirationTime>_)w=!1;else if(c)if(this.expirationTime<c)w=!0;else{const K=this.expirationTime-c;K?this.expirationTime=_+Math.max(K,3e4):w=!0}else w=!0;w?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(l,c){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(l).length===0)return;const _=this.latestFeatureIndex.loadVTLayers();for(const w in this.buckets){if(!c.style.hasLayer(w))continue;const K=this.buckets[w],N=K.layers[0].sourceLayer||"_geojsonTileLayer",$=_[N],ee=l[N];if(!$||!ee||Object.keys(ee).length===0)continue;K.update(ee,$,this.imageAtlas&&this.imageAtlas.patternPositions||{});const ae=c&&c.style&&c.style.getLayer(w);ae&&(this.queryPadding=Math.max(this.queryPadding,ae.queryRadius(K)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<S.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(l){this.symbolFadeHoldUntil=S.now()+l}setDependencies(l,c){const _={};for(const w of c)_[w]=!0;this.dependencies[l]=_}hasDependency(l,c){for(const _ of l){const w=this.dependencies[_];if(w){for(const K of c)if(w[K])return!0}}return!1}}class nt{constructor(l,c){this.max=l,this.onRemove=c,this.reset()}reset(){for(const l in this.data)for(const c of this.data[l])c.timeout&&clearTimeout(c.timeout),this.onRemove(c.value);return this.data={},this.order=[],this}add(l,c,_){const w=l.wrapped().key;this.data[w]===void 0&&(this.data[w]=[]);const K={value:c,timeout:void 0};if(_!==void 0&&(K.timeout=setTimeout(()=>{this.remove(l,K)},_)),this.data[w].push(K),this.order.push(w),this.order.length>this.max){const N=this._getAndRemoveByKey(this.order[0]);N&&this.onRemove(N)}return this}has(l){return l.wrapped().key in this.data}getAndRemove(l){return this.has(l)?this._getAndRemoveByKey(l.wrapped().key):null}_getAndRemoveByKey(l){const c=this.data[l].shift();return c.timeout&&clearTimeout(c.timeout),this.data[l].length===0&&delete this.data[l],this.order.splice(this.order.indexOf(l),1),c.value}getByKey(l){const c=this.data[l];return c?c[0].value:null}get(l){return this.has(l)?this.data[l.wrapped().key][0].value:null}remove(l,c){if(!this.has(l))return this;const _=l.wrapped().key,w=c===void 0?0:this.data[_].indexOf(c),K=this.data[_][w];return this.data[_].splice(w,1),K.timeout&&clearTimeout(K.timeout),this.data[_].length===0&&delete this.data[_],this.onRemove(K.value),this.order.splice(this.order.indexOf(_),1),this}setMaxSize(l){for(this.max=l;this.order.length>this.max;){const c=this._getAndRemoveByKey(this.order[0]);c&&this.onRemove(c)}return this}filter(l){const c=[];for(const _ in this.data)for(const w of this.data[_])l(w.value)||c.push(w);for(const _ of c)this.remove(_.value.tileID,_)}}class St{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(l,c,_){const w=String(c);if(this.stateChanges[l]=this.stateChanges[l]||{},this.stateChanges[l][w]=this.stateChanges[l][w]||{},o.e(this.stateChanges[l][w],_),this.deletedStates[l]===null){this.deletedStates[l]={};for(const K in this.state[l])K!==w&&(this.deletedStates[l][K]=null)}else if(this.deletedStates[l]&&this.deletedStates[l][w]===null){this.deletedStates[l][w]={};for(const K in this.state[l][w])_[K]||(this.deletedStates[l][w][K]=null)}else for(const K in _)this.deletedStates[l]&&this.deletedStates[l][w]&&this.deletedStates[l][w][K]===null&&delete this.deletedStates[l][w][K]}removeFeatureState(l,c,_){if(this.deletedStates[l]===null)return;const w=String(c);if(this.deletedStates[l]=this.deletedStates[l]||{},_&&c!==void 0)this.deletedStates[l][w]!==null&&(this.deletedStates[l][w]=this.deletedStates[l][w]||{},this.deletedStates[l][w][_]=null);else if(c!==void 0)if(this.stateChanges[l]&&this.stateChanges[l][w])for(_ in this.deletedStates[l][w]={},this.stateChanges[l][w])this.deletedStates[l][w][_]=null;else this.deletedStates[l][w]=null;else this.deletedStates[l]=null}getState(l,c){const _=String(c),w=o.e({},(this.state[l]||{})[_],(this.stateChanges[l]||{})[_]);if(this.deletedStates[l]===null)return{};if(this.deletedStates[l]){const K=this.deletedStates[l][c];if(K===null)return{};for(const N in K)delete w[N]}return w}initializeTileState(l,c){l.setFeatureState(this.state,c)}coalesceChanges(l,c){const _={};for(const w in this.stateChanges){this.state[w]=this.state[w]||{};const K={};for(const N in this.stateChanges[w])this.state[w][N]||(this.state[w][N]={}),o.e(this.state[w][N],this.stateChanges[w][N]),K[N]=this.state[w][N];_[w]=K}for(const w in this.deletedStates){this.state[w]=this.state[w]||{};const K={};if(this.deletedStates[w]===null)for(const N in this.state[w])K[N]={},this.state[w][N]={};else for(const N in this.deletedStates[w]){if(this.deletedStates[w][N]===null)this.state[w][N]={};else for(const $ of Object.keys(this.deletedStates[w][N]))delete this.state[w][N][$];K[N]=this.state[w][N]}_[w]=_[w]||{},o.e(_[w],K)}if(this.stateChanges={},this.deletedStates={},Object.keys(_).length!==0)for(const w in l)l[w].setFeatureState(_,c)}}function Ht(k,l,c){const _=l.intersectsFrustum(k);if(!c)return _;const w=l.intersectsPlane(c);return _===0||w===0?0:_===2&&w===2?2:1}function sn(k,l,c,_,w){let K=k;const N=Math.atan(l/c),$=Math.hypot(l,c);return K=k+o.a8(_/$/Math.max(.5,Math.cos(o.aa(w/2)))),K+=1*o.a8(Math.cos(N))/2,K+=o.ab(k-K,-0,0),K}function tr(k,l){const c=(l.roundZoom?Math.round:Math.floor)(k.zoom+o.a8(k.tileSize/l.tileSize));return Math.max(0,c)}function Oe(k,l){const c=k.getCameraFrustum(),_=k.getClippingPlane(),w=k.screenPointToMercatorCoordinate(k.getCameraPoint()),K=o.Y.fromLngLat(k.center,k.elevation);w.z=K.z+Math.cos(k.pitchInRadians)*k.cameraToCenterDistance/k.worldSize;const N=k.getCoveringTilesDetailsProvider(),$=N.allowVariableZoom(k,l),ee=tr(k,l),ae=l.minzoom||0,xe=l.maxzoom!==void 0?l.maxzoom:k.maxZoom,ke=Math.min(Math.max(0,ee),xe),Ke=Math.pow(2,ke),$e=[Ke*w.x,Ke*w.y,0],Xe=[Ke*K.x,Ke*K.y,0],pt=Math.hypot(K.x-w.x,K.y-w.y),ut=Math.abs(K.z-w.z),mt=Math.hypot(pt,ut),vt=Rt=>({zoom:0,x:0,y:0,wrap:Rt,fullyVisible:!1}),Bt=[],kt=[];if(k.renderWorldCopies&&N.allowWorldCopies())for(let Rt=1;Rt<=3;Rt++)Bt.push(vt(-Rt)),Bt.push(vt(Rt));for(Bt.push(vt(0));Bt.length>0;){const Rt=Bt.pop(),zt=Rt.x,Tt=Rt.y;let nn=Rt.fullyVisible;const Zt={x:zt,y:Tt,z:Rt.zoom},Mn=N.getTileAABB(Zt,Rt.wrap,k.elevation,l);if(!nn){const Nn=Ht(c,Mn,_);if(Nn===0)continue;nn=Nn===2}const Bn=N.distanceToTile2d(w.x,w.y,Zt,Mn);let yn=ee;$&&(yn=(l.calculateTileZoom||sn)(k.zoom+o.a8(k.tileSize/l.tileSize),Bn,ut,mt,k.fov)),yn=(l.roundZoom?Math.round:Math.floor)(yn),yn=Math.max(0,yn);const In=Math.min(yn,xe);if(Rt.wrap=N.getWrap(K,Zt,Rt.wrap),Rt.zoom>=In){if(Rt.zoom<ae)continue;const Nn=ke-Rt.zoom,Fn=$e[0]-.5-(zt<<Nn),pr=$e[1]-.5-(Tt<<Nn),ki=l.reparseOverscaled?Math.max(Rt.zoom,yn):Rt.zoom;kt.push({tileID:new o.S(Rt.zoom===xe?ki:Rt.zoom,Rt.wrap,Rt.zoom,zt,Tt),distanceSq:o.a9([Xe[0]-.5-zt,Xe[1]-.5-Tt]),tileDistanceToCamera:Math.sqrt(Fn*Fn+pr*pr)})}else for(let Nn=0;Nn<4;Nn++)Bt.push({zoom:Rt.zoom+1,x:(zt<<1)+Nn%2,y:(Tt<<1)+(Nn>>1),wrap:Rt.wrap,fullyVisible:nn})}return kt.sort((Rt,zt)=>Rt.distanceSq-zt.distanceSq).map(Rt=>Rt.tileID)}class se extends o.E{constructor(l,c,_){super(),this.id=l,this.dispatcher=_,this.on("data",w=>this._dataHandler(w)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((w,K,N,$)=>{const ee=new(dr(K.type))(w,K,N,$);if(ee.id!==w)throw new Error(`Expected Source id to be ${w} instead of ${ee.id}`);return ee})(l,c,_,this),this._tiles={},this._cache=new nt(0,w=>this._unloadTile(w)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new St,this._didEmitContent=!1,this._updated=!1}onAdd(l){this.map=l,this._maxTileCacheSize=l?l._maxTileCacheSize:null,this._maxTileCacheZoomLevels=l?l._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(l)}onRemove(l){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(l)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const l in this._tiles){const c=this._tiles[l];if(c.state!=="loaded"&&c.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const l=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,l&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(l,c,_){return o._(this,void 0,void 0,function*(){try{yield this._source.loadTile(l),this._tileLoaded(l,c,_)}catch(w){l.state="errored",w.status!==404?this._source.fire(new o.j(w,{tile:l})):this.update(this.transform,this.terrain)}})}_unloadTile(l){this._source.unloadTile&&this._source.unloadTile(l)}_abortTile(l){this._source.abortTile&&this._source.abortTile(l),this._source.fire(new o.k("dataabort",{tile:l,coord:l.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(l){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const c in this._tiles){const _=this._tiles[c];_.upload(l),_.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(l=>l.tileID).sort(ve).map(l=>l.key)}getRenderableIds(l){const c=[];for(const _ in this._tiles)this._isIdRenderable(_,l)&&c.push(this._tiles[_]);return l?c.sort((_,w)=>{const K=_.tileID,N=w.tileID,$=new o.P(K.canonical.x,K.canonical.y)._rotate(-this.transform.bearingInRadians),ee=new o.P(N.canonical.x,N.canonical.y)._rotate(-this.transform.bearingInRadians);return K.overscaledZ-N.overscaledZ||ee.y-$.y||ee.x-$.x}).map(_=>_.tileID.key):c.map(_=>_.tileID).sort(ve).map(_=>_.key)}hasRenderableParent(l){const c=this.findLoadedParent(l,0);return!!c&&this._isIdRenderable(c.tileID.key)}_isIdRenderable(l,c){return this._tiles[l]&&this._tiles[l].hasData()&&!this._coveredTiles[l]&&(c||!this._tiles[l].holdingForFade())}reload(l){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const c in this._tiles)(l||this._tiles[c].state!=="errored")&&this._reloadTile(c,"reloading")}}_reloadTile(l,c){return o._(this,void 0,void 0,function*(){const _=this._tiles[l];_&&(_.state!=="loading"&&(_.state=c),yield this._loadTile(_,l,c))})}_tileLoaded(l,c,_){l.timeAdded=S.now(),_==="expired"&&(l.refreshedUponExpiration=!0),this._setTileReloadTimer(c,l),this.getSource().type==="raster-dem"&&l.dem&&this._backfillDEM(l),this._state.initializeTileState(l,this.map?this.map.painter:null),l.aborted||this._source.fire(new o.k("data",{dataType:"source",tile:l,coord:l.tileID}))}_backfillDEM(l){const c=this.getRenderableIds();for(let w=0;w<c.length;w++){const K=c[w];if(l.neighboringTiles&&l.neighboringTiles[K]){const N=this.getTileByID(K);_(l,N),_(N,l)}}function _(w,K){w.needsHillshadePrepare=!0,w.needsTerrainPrepare=!0;let N=K.tileID.canonical.x-w.tileID.canonical.x;const $=K.tileID.canonical.y-w.tileID.canonical.y,ee=Math.pow(2,w.tileID.canonical.z),ae=K.tileID.key;N===0&&$===0||Math.abs($)>1||(Math.abs(N)>1&&(Math.abs(N+ee)===1?N+=ee:Math.abs(N-ee)===1&&(N-=ee)),K.dem&&w.dem&&(w.dem.backfillBorder(K.dem,N,$),w.neighboringTiles&&w.neighboringTiles[ae]&&(w.neighboringTiles[ae].backfilled=!0)))}}getTile(l){return this.getTileByID(l.key)}getTileByID(l){return this._tiles[l]}_retainLoadedChildren(l,c,_,w){for(const K in this._tiles){let N=this._tiles[K];if(w[K]||!N.hasData()||N.tileID.overscaledZ<=c||N.tileID.overscaledZ>_)continue;let $=N.tileID;for(;N&&N.tileID.overscaledZ>c+1;){const ae=N.tileID.scaledTo(N.tileID.overscaledZ-1);N=this._tiles[ae.key],N&&N.hasData()&&($=ae)}let ee=$;for(;ee.overscaledZ>c;)if(ee=ee.scaledTo(ee.overscaledZ-1),l[ee.key]||l[ee.canonical.key]){w[$.key]=$;break}}}findLoadedParent(l,c){if(l.key in this._loadedParentTiles){const _=this._loadedParentTiles[l.key];return _&&_.tileID.overscaledZ>=c?_:null}for(let _=l.overscaledZ-1;_>=c;_--){const w=l.scaledTo(_),K=this._getLoadedTile(w);if(K)return K}}findLoadedSibling(l){return this._getLoadedTile(l)}_getLoadedTile(l){const c=this._tiles[l.key];return c&&c.hasData()?c:this._cache.getByKey(l.wrapped().key)}updateCacheSize(l){const c=Math.ceil(l.width/this._source.tileSize)+1,_=Math.ceil(l.height/this._source.tileSize)+1,w=Math.floor(c*_*(this._maxTileCacheZoomLevels===null?o.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),K=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,w):w;this._cache.setMaxSize(K)}handleWrapJump(l){const c=Math.round((l-(this._prevLng===void 0?l:this._prevLng))/360);if(this._prevLng=l,c){const _={};for(const w in this._tiles){const K=this._tiles[w];K.tileID=K.tileID.unwrapTo(K.tileID.wrap+c),_[K.tileID.key]=K}this._tiles=_;for(const w in this._timers)clearTimeout(this._timers[w]),delete this._timers[w];for(const w in this._tiles)this._setTileReloadTimer(w,this._tiles[w])}}_updateCoveredAndRetainedTiles(l,c,_,w,K,N){const $={},ee={},ae=Object.keys(l),xe=S.now();for(const ke of ae){const Ke=l[ke],$e=this._tiles[ke];if(!$e||$e.fadeEndTime!==0&&$e.fadeEndTime<=xe)continue;const Xe=this.findLoadedParent(Ke,c),pt=this.findLoadedSibling(Ke),ut=Xe||pt||null;ut&&(this._addTile(ut.tileID),$[ut.tileID.key]=ut.tileID),ee[ke]=Ke}this._retainLoadedChildren(ee,w,_,l);for(const ke in $)l[ke]||(this._coveredTiles[ke]=!0,l[ke]=$[ke]);if(N){const ke={},Ke={};for(const $e of K)this._tiles[$e.key].hasData()?ke[$e.key]=$e:Ke[$e.key]=$e;for(const $e in Ke){const Xe=Ke[$e].children(this._source.maxzoom);this._tiles[Xe[0].key]&&this._tiles[Xe[1].key]&&this._tiles[Xe[2].key]&&this._tiles[Xe[3].key]&&(ke[Xe[0].key]=l[Xe[0].key]=Xe[0],ke[Xe[1].key]=l[Xe[1].key]=Xe[1],ke[Xe[2].key]=l[Xe[2].key]=Xe[2],ke[Xe[3].key]=l[Xe[3].key]=Xe[3],delete Ke[$e])}for(const $e in Ke){const Xe=Ke[$e],pt=this.findLoadedParent(Xe,this._source.minzoom),ut=this.findLoadedSibling(Xe),mt=pt||ut||null;if(mt){ke[mt.tileID.key]=l[mt.tileID.key]=mt.tileID;for(const vt in ke)ke[vt].isChildOf(mt.tileID)&&delete ke[vt]}}for(const $e in this._tiles)ke[$e]||(this._coveredTiles[$e]=!0)}}update(l,c){if(!this._sourceLoaded||this._paused)return;let _;this.transform=l,this.terrain=c,this.updateCacheSize(l),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?_=l.getVisibleUnwrappedCoordinates(this._source.tileID).map(xe=>new o.S(xe.canonical.z,xe.wrap,xe.canonical.z,xe.canonical.x,xe.canonical.y)):(_=Oe(l,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:c,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(_=_.filter(xe=>this._source.hasTile(xe)))):_=[];const w=tr(l,this._source),K=Math.max(w-se.maxOverzooming,this._source.minzoom),N=Math.max(w+se.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const xe={};for(const ke of _)if(ke.canonical.z>this._source.minzoom){const Ke=ke.scaledTo(ke.canonical.z-1);xe[Ke.key]=Ke;const $e=ke.scaledTo(Math.max(this._source.minzoom,Math.min(ke.canonical.z,5)));xe[$e.key]=$e}_=_.concat(Object.values(xe))}const $=_.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,$&&this.fire(new o.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const ee=this._updateRetainedTiles(_,w);p(this._source.type)&&this._updateCoveredAndRetainedTiles(ee,K,N,w,_,c);for(const xe in ee)this._tiles[xe].clearFadeHold();const ae=o.ac(this._tiles,ee);for(const xe of ae){const ke=this._tiles[xe];ke.hasSymbolBuckets&&!ke.holdingForFade()?ke.setHoldDuration(this.map._fadeDuration):ke.hasSymbolBuckets&&!ke.symbolFadeFinished()||this._removeTile(xe)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const l in this._tiles)this._tiles[l].holdingForFade()&&this._removeTile(l)}_updateRetainedTiles(l,c){var _;const w={},K={},N=Math.max(c-se.maxOverzooming,this._source.minzoom),$=Math.max(c+se.maxUnderzooming,this._source.minzoom),ee={};for(const ae of l){const xe=this._addTile(ae);w[ae.key]=ae,xe.hasData()||c<this._source.maxzoom&&(ee[ae.key]=ae)}this._retainLoadedChildren(ee,c,$,w);for(const ae of l){let xe=this._tiles[ae.key];if(xe.hasData())continue;if(c+1>this._source.maxzoom){const Ke=ae.children(this._source.maxzoom)[0],$e=this.getTile(Ke);if($e&&$e.hasData()){w[Ke.key]=Ke;continue}}else{const Ke=ae.children(this._source.maxzoom);if(w[Ke[0].key]&&w[Ke[1].key]&&w[Ke[2].key]&&w[Ke[3].key])continue}let ke=xe.wasRequested();for(let Ke=ae.overscaledZ-1;Ke>=N;--Ke){const $e=ae.scaledTo(Ke);if(K[$e.key])break;if(K[$e.key]=!0,xe=this.getTile($e),!xe&&ke&&(xe=this._addTile($e)),xe){const Xe=xe.hasData();if((Xe||!(!((_=this.map)===null||_===void 0)&&_.cancelPendingTileRequestsWhileZooming)||ke)&&(w[$e.key]=$e),ke=xe.wasRequested(),Xe)break}}}return w}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const l in this._tiles){const c=[];let _,w=this._tiles[l].tileID;for(;w.overscaledZ>0;){if(w.key in this._loadedParentTiles){_=this._loadedParentTiles[w.key];break}c.push(w.key);const K=w.scaledTo(w.overscaledZ-1);if(_=this._getLoadedTile(K),_)break;w=K}for(const K of c)this._loadedParentTiles[K]=_}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const l in this._tiles){const c=this._tiles[l].tileID,_=this._getLoadedTile(c);this._loadedSiblingTiles[c.key]=_}}_addTile(l){let c=this._tiles[l.key];if(c)return c;c=this._cache.getAndRemove(l),c&&(this._setTileReloadTimer(l.key,c),c.tileID=l,this._state.initializeTileState(c,this.map?this.map.painter:null),this._cacheTimers[l.key]&&(clearTimeout(this._cacheTimers[l.key]),delete this._cacheTimers[l.key],this._setTileReloadTimer(l.key,c)));const _=c;return c||(c=new fe(l,this._source.tileSize*l.overscaleFactor()),this._loadTile(c,l.key,c.state)),c.uses++,this._tiles[l.key]=c,_||this._source.fire(new o.k("dataloading",{tile:c,coord:c.tileID,dataType:"source"})),c}_setTileReloadTimer(l,c){l in this._timers&&(clearTimeout(this._timers[l]),delete this._timers[l]);const _=c.getExpiryTimeout();_&&(this._timers[l]=setTimeout(()=>{this._reloadTile(l,"expired"),delete this._timers[l]},_))}_removeTile(l){const c=this._tiles[l];c&&(c.uses--,delete this._tiles[l],this._timers[l]&&(clearTimeout(this._timers[l]),delete this._timers[l]),c.uses>0||(c.hasData()&&c.state!=="reloading"?this._cache.add(c.tileID,c,c.getExpiryTimeout()):(c.aborted=!0,this._abortTile(c),this._unloadTile(c))))}_dataHandler(l){const c=l.sourceDataType;l.dataType==="source"&&c==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&l.dataType==="source"&&c==="content"&&(this.reload(l.sourceDataChanged),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const l in this._tiles)this._removeTile(l);this._cache.reset()}tilesIn(l,c,_){const w=[],K=this.transform;if(!K)return w;const N=_?K.getCameraQueryGeometry(l):l,$=l.map(Xe=>K.screenPointToMercatorCoordinate(Xe,this.terrain)),ee=N.map(Xe=>K.screenPointToMercatorCoordinate(Xe,this.terrain)),ae=this.getIds();let xe=1/0,ke=1/0,Ke=-1/0,$e=-1/0;for(const Xe of ee)xe=Math.min(xe,Xe.x),ke=Math.min(ke,Xe.y),Ke=Math.max(Ke,Xe.x),$e=Math.max($e,Xe.y);for(let Xe=0;Xe<ae.length;Xe++){const pt=this._tiles[ae[Xe]];if(pt.holdingForFade())continue;const ut=pt.tileID,mt=Math.pow(2,K.zoom-pt.tileID.overscaledZ),vt=c*pt.queryPadding*o.X/pt.tileSize/mt,Bt=[ut.getTilePoint(new o.Y(xe,ke)),ut.getTilePoint(new o.Y(Ke,$e))];if(Bt[0].x-vt<o.X&&Bt[0].y-vt<o.X&&Bt[1].x+vt>=0&&Bt[1].y+vt>=0){const kt=$.map(zt=>ut.getTilePoint(zt)),Rt=ee.map(zt=>ut.getTilePoint(zt));w.push({tile:pt,tileID:ut,queryGeometry:kt,cameraQueryGeometry:Rt,scale:mt})}}return w}getVisibleCoordinates(l){const c=this.getRenderableIds(l).map(_=>this._tiles[_].tileID);return this.transform&&this.transform.populateCache(c),c}hasTransition(){if(this._source.hasTransition())return!0;if(p(this._source.type)){const l=S.now();for(const c in this._tiles)if(this._tiles[c].fadeEndTime>=l)return!0}return!1}setFeatureState(l,c,_){this._state.updateState(l=l||"_geojsonTileLayer",c,_)}removeFeatureState(l,c,_){this._state.removeFeatureState(l=l||"_geojsonTileLayer",c,_)}getFeatureState(l,c){return this._state.getState(l=l||"_geojsonTileLayer",c)}setDependencies(l,c,_){const w=this._tiles[l];w&&w.setDependencies(c,_)}reloadTilesForDependencies(l,c){for(const _ in this._tiles)this._tiles[_].hasDependency(l,c)&&this._reloadTile(_,"reloading");this._cache.filter(_=>!_.hasDependency(l,c))}}function ve(k,l){const c=Math.abs(2*k.wrap)-+(k.wrap<0),_=Math.abs(2*l.wrap)-+(l.wrap<0);return k.overscaledZ-l.overscaledZ||_-c||l.canonical.y-k.canonical.y||l.canonical.x-k.canonical.x}function p(k){return k==="raster"||k==="image"||k==="video"}se.maxOverzooming=10,se.maxUnderzooming=3;class Ne{constructor(l,c){this.reset(l,c)}reset(l,c){this.points=l||[],this._distances=[0];for(let _=1;_<this.points.length;_++)this._distances[_]=this._distances[_-1]+this.points[_].dist(this.points[_-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(c||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(l){if(this.points.length===1)return this.points[0];l=o.ab(l,0,1);let c=1,_=this._distances[c];const w=l*this.paddedLength+this.padding;for(;_<w&&c<this._distances.length;)_=this._distances[++c];const K=c-1,N=this._distances[K],$=_-N,ee=$>0?(w-N)/$:0;return this.points[K].mult(1-ee).add(this.points[c].mult(ee))}}function Ye(k,l){let c=!0;return k==="always"||k!=="never"&&l!=="never"||(c=!1),c}class rt{constructor(l,c,_){const w=this.boxCells=[],K=this.circleCells=[];this.xCellCount=Math.ceil(l/_),this.yCellCount=Math.ceil(c/_);for(let N=0;N<this.xCellCount*this.yCellCount;N++)w.push([]),K.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=l,this.height=c,this.xScale=this.xCellCount/l,this.yScale=this.yCellCount/c,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(l,c,_,w,K){this._forEachCell(c,_,w,K,this._insertBoxCell,this.boxUid++),this.boxKeys.push(l),this.bboxes.push(c),this.bboxes.push(_),this.bboxes.push(w),this.bboxes.push(K)}insertCircle(l,c,_,w){this._forEachCell(c-w,_-w,c+w,_+w,this._insertCircleCell,this.circleUid++),this.circleKeys.push(l),this.circles.push(c),this.circles.push(_),this.circles.push(w)}_insertBoxCell(l,c,_,w,K,N){this.boxCells[K].push(N)}_insertCircleCell(l,c,_,w,K,N){this.circleCells[K].push(N)}_query(l,c,_,w,K,N,$){if(_<0||l>this.width||w<0||c>this.height)return[];const ee=[];if(l<=0&&c<=0&&this.width<=_&&this.height<=w){if(K)return[{key:null,x1:l,y1:c,x2:_,y2:w}];for(let ae=0;ae<this.boxKeys.length;ae++)ee.push({key:this.boxKeys[ae],x1:this.bboxes[4*ae],y1:this.bboxes[4*ae+1],x2:this.bboxes[4*ae+2],y2:this.bboxes[4*ae+3]});for(let ae=0;ae<this.circleKeys.length;ae++){const xe=this.circles[3*ae],ke=this.circles[3*ae+1],Ke=this.circles[3*ae+2];ee.push({key:this.circleKeys[ae],x1:xe-Ke,y1:ke-Ke,x2:xe+Ke,y2:ke+Ke})}}else this._forEachCell(l,c,_,w,this._queryCell,ee,{hitTest:K,overlapMode:N,seenUids:{box:{},circle:{}}},$);return ee}query(l,c,_,w){return this._query(l,c,_,w,!1,null)}hitTest(l,c,_,w,K,N){return this._query(l,c,_,w,!0,K,N).length>0}hitTestCircle(l,c,_,w,K){const N=l-_,$=l+_,ee=c-_,ae=c+_;if($<0||N>this.width||ae<0||ee>this.height)return!1;const xe=[];return this._forEachCell(N,ee,$,ae,this._queryCellCircle,xe,{hitTest:!0,overlapMode:w,circle:{x:l,y:c,radius:_},seenUids:{box:{},circle:{}}},K),xe.length>0}_queryCell(l,c,_,w,K,N,$,ee){const{seenUids:ae,hitTest:xe,overlapMode:ke}=$,Ke=this.boxCells[K];if(Ke!==null){const Xe=this.bboxes;for(const pt of Ke)if(!ae.box[pt]){ae.box[pt]=!0;const ut=4*pt,mt=this.boxKeys[pt];if(l<=Xe[ut+2]&&c<=Xe[ut+3]&&_>=Xe[ut+0]&&w>=Xe[ut+1]&&(!ee||ee(mt))&&(!xe||!Ye(ke,mt.overlapMode))&&(N.push({key:mt,x1:Xe[ut],y1:Xe[ut+1],x2:Xe[ut+2],y2:Xe[ut+3]}),xe))return!0}}const $e=this.circleCells[K];if($e!==null){const Xe=this.circles;for(const pt of $e)if(!ae.circle[pt]){ae.circle[pt]=!0;const ut=3*pt,mt=this.circleKeys[pt];if(this._circleAndRectCollide(Xe[ut],Xe[ut+1],Xe[ut+2],l,c,_,w)&&(!ee||ee(mt))&&(!xe||!Ye(ke,mt.overlapMode))){const vt=Xe[ut],Bt=Xe[ut+1],kt=Xe[ut+2];if(N.push({key:mt,x1:vt-kt,y1:Bt-kt,x2:vt+kt,y2:Bt+kt}),xe)return!0}}}return!1}_queryCellCircle(l,c,_,w,K,N,$,ee){const{circle:ae,seenUids:xe,overlapMode:ke}=$,Ke=this.boxCells[K];if(Ke!==null){const Xe=this.bboxes;for(const pt of Ke)if(!xe.box[pt]){xe.box[pt]=!0;const ut=4*pt,mt=this.boxKeys[pt];if(this._circleAndRectCollide(ae.x,ae.y,ae.radius,Xe[ut+0],Xe[ut+1],Xe[ut+2],Xe[ut+3])&&(!ee||ee(mt))&&!Ye(ke,mt.overlapMode))return N.push(!0),!0}}const $e=this.circleCells[K];if($e!==null){const Xe=this.circles;for(const pt of $e)if(!xe.circle[pt]){xe.circle[pt]=!0;const ut=3*pt,mt=this.circleKeys[pt];if(this._circlesCollide(Xe[ut],Xe[ut+1],Xe[ut+2],ae.x,ae.y,ae.radius)&&(!ee||ee(mt))&&!Ye(ke,mt.overlapMode))return N.push(!0),!0}}}_forEachCell(l,c,_,w,K,N,$,ee){const ae=this._convertToXCellCoord(l),xe=this._convertToYCellCoord(c),ke=this._convertToXCellCoord(_),Ke=this._convertToYCellCoord(w);for(let $e=ae;$e<=ke;$e++)for(let Xe=xe;Xe<=Ke;Xe++)if(K.call(this,l,c,_,w,this.xCellCount*Xe+$e,N,$,ee))return}_convertToXCellCoord(l){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(l*this.xScale)))}_convertToYCellCoord(l){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(l*this.yScale)))}_circlesCollide(l,c,_,w,K,N){const $=w-l,ee=K-c,ae=_+N;return ae*ae>$*$+ee*ee}_circleAndRectCollide(l,c,_,w,K,N,$){const ee=(N-w)/2,ae=Math.abs(l-(w+ee));if(ae>ee+_)return!1;const xe=($-K)/2,ke=Math.abs(c-(K+xe));if(ke>xe+_)return!1;if(ae<=ee||ke<=xe)return!0;const Ke=ae-ee,$e=ke-xe;return Ke*Ke+$e*$e<=_*_}}function ct(k,l,c){const _=o.H();if(!k){const{vecSouth:ke,vecEast:Ke}=qt(l),$e=g();$e[0]=Ke[0],$e[1]=Ke[1],$e[2]=ke[0],$e[3]=ke[1],w=$e,(xe=(N=(K=$e)[0])*(ae=K[3])-(ee=K[2])*($=K[1]))&&(w[0]=ae*(xe=1/xe),w[1]=-$*xe,w[2]=-ee*xe,w[3]=N*xe),_[0]=$e[0],_[1]=$e[1],_[4]=$e[2],_[5]=$e[3]}var w,K,N,$,ee,ae,xe;return o.K(_,_,[1/c,1/c,1]),_}function dt(k,l,c,_){if(k){const w=o.H();if(!l){const{vecSouth:K,vecEast:N}=qt(c);w[0]=N[0],w[1]=N[1],w[4]=K[0],w[5]=K[1]}return o.K(w,w,[_,_,1]),w}return c.pixelsToClipSpaceMatrix}function qt(k){const l=Math.cos(k.rollInRadians),c=Math.sin(k.rollInRadians),_=Math.cos(k.pitchInRadians),w=Math.cos(k.bearingInRadians),K=Math.sin(k.bearingInRadians),N=o.ad();N[0]=-w*_*c-K*l,N[1]=-K*_*c+w*l;const $=o.ae(N);$<1e-9?o.af(N):o.ag(N,N,1/$);const ee=o.ad();ee[0]=w*_*l-K*c,ee[1]=K*_*l+w*c;const ae=o.ae(ee);return ae<1e-9?o.af(ee):o.ag(ee,ee,1/ae),{vecEast:ee,vecSouth:N}}function Gt(k,l,c,_){let w;_?(w=[k,l,_(k,l),1],o.al(w,w,c)):(w=[k,l,0,1],vi(w,w,c));const K=w[3];return{point:new o.P(w[0]/K,w[1]/K),signedDistanceFromCamera:K,isOccluded:!1}}function jt(k,l){return .5+k/l*.5}function xt(k,l){return k.x>=-l[0]&&k.x<=l[0]&&k.y>=-l[1]&&k.y<=l[1]}function Tn(k,l,c,_,w,K,N,$,ee,ae,xe,ke,Ke){const $e=c?k.textSizeData:k.iconSizeData,Xe=o.ah($e,l.transform.zoom),pt=[256/l.width*2+1,256/l.height*2+1],ut=c?k.text.dynamicLayoutVertexArray:k.icon.dynamicLayoutVertexArray;ut.clear();const mt=k.lineVertexArray,vt=c?k.text.placedSymbolArray:k.icon.placedSymbolArray,Bt=l.transform.width/l.transform.height;let kt=!1;for(let Rt=0;Rt<vt.length;Rt++){const zt=vt.get(Rt);if(zt.hidden||zt.writingMode===o.ai.vertical&&!kt){qi(zt.numGlyphs,ut);continue}kt=!1;const Tt=new o.P(zt.anchorX,zt.anchorY),nn={getElevation:Ke,pitchedLabelPlaneMatrix:_,lineVertexArray:mt,pitchWithMap:K,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:l.transform,tileAnchorPoint:Tt,unwrappedTileID:ee,width:ae,height:xe,translation:ke},Zt=Ur(zt.anchorX,zt.anchorY,nn);if(!xt(Zt.point,pt)){qi(zt.numGlyphs,ut);continue}const Mn=jt(l.transform.cameraToCenterDistance,Zt.signedDistanceFromCamera),Bn=o.aj($e,Xe,zt),yn=K?Bn*l.transform.getPitchedTextCorrection(zt.anchorX,zt.anchorY,ee)/Mn:Bn*Mn,In=Er({projectionContext:nn,pitchedLabelPlaneMatrixInverse:w,symbol:zt,fontSize:yn,flip:!1,keepUpright:N,glyphOffsetArray:k.glyphOffsetArray,dynamicLayoutVertexArray:ut,aspectRatio:Bt,rotateToLine:$});kt=In.useVertical,(In.notEnoughRoom||kt||In.needsFlipping&&Er({projectionContext:nn,pitchedLabelPlaneMatrixInverse:w,symbol:zt,fontSize:yn,flip:!0,keepUpright:N,glyphOffsetArray:k.glyphOffsetArray,dynamicLayoutVertexArray:ut,aspectRatio:Bt,rotateToLine:$}).notEnoughRoom)&&qi(zt.numGlyphs,ut)}c?k.text.dynamicLayoutVertexBuffer.updateData(ut):k.icon.dynamicLayoutVertexBuffer.updateData(ut)}function On(k,l,c,_,w,K,N,$){const ee=K.glyphStartIndex+K.numGlyphs,ae=K.lineStartIndex,xe=K.lineStartIndex+K.lineLength,ke=l.getoffsetX(K.glyphStartIndex),Ke=l.getoffsetX(ee-1),$e=mo(k*ke,c,_,w,K.segment,ae,xe,$,N);if(!$e)return null;const Xe=mo(k*Ke,c,_,w,K.segment,ae,xe,$,N);return Xe?$.projectionCache.anyProjectionOccluded?null:{first:$e,last:Xe}:null}function gr(k,l,c,_){return k===o.ai.horizontal&&Math.abs(c.y-l.y)>Math.abs(c.x-l.x)*_?{useVertical:!0}:(k===o.ai.vertical?l.y<c.y:l.x>c.x)?{needsFlipping:!0}:null}function Er(k){const{projectionContext:l,pitchedLabelPlaneMatrixInverse:c,symbol:_,fontSize:w,flip:K,keepUpright:N,glyphOffsetArray:$,dynamicLayoutVertexArray:ee,aspectRatio:ae,rotateToLine:xe}=k,ke=w/24,Ke=_.lineOffsetX*ke,$e=_.lineOffsetY*ke;let Xe;if(_.numGlyphs>1){const pt=_.glyphStartIndex+_.numGlyphs,ut=_.lineStartIndex,mt=_.lineStartIndex+_.lineLength,vt=On(ke,$,Ke,$e,K,_,xe,l);if(!vt)return{notEnoughRoom:!0};const Bt=Xr(vt.first.point.x,vt.first.point.y,l,c),kt=Xr(vt.last.point.x,vt.last.point.y,l,c);if(N&&!K){const Rt=gr(_.writingMode,Bt,kt,ae);if(Rt)return Rt}Xe=[vt.first];for(let Rt=_.glyphStartIndex+1;Rt<pt-1;Rt++)Xe.push(mo(ke*$.getoffsetX(Rt),Ke,$e,K,_.segment,ut,mt,l,xe));Xe.push(vt.last)}else{if(N&&!K){const ut=er(l.tileAnchorPoint.x,l.tileAnchorPoint.y,l).point,mt=_.lineStartIndex+_.segment+1,vt=new o.P(l.lineVertexArray.getx(mt),l.lineVertexArray.gety(mt)),Bt=er(vt.x,vt.y,l),kt=Bt.signedDistanceFromCamera>0?Bt.point:on(l.tileAnchorPoint,vt,ut,1,l),Rt=Xr(ut.x,ut.y,l,c),zt=Xr(kt.x,kt.y,l,c),Tt=gr(_.writingMode,Rt,zt,ae);if(Tt)return Tt}const pt=mo(ke*$.getoffsetX(_.glyphStartIndex),Ke,$e,K,_.segment,_.lineStartIndex,_.lineStartIndex+_.lineLength,l,xe);if(!pt||l.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};Xe=[pt]}for(const pt of Xe)o.ak(ee,pt.point,pt.angle);return{}}function on(k,l,c,_,w){const K=k.add(k.sub(l)._unit()),N=er(K.x,K.y,w).point,$=c.sub(N);return c.add($._mult(_/$.mag()))}function Rn(k,l,c){const _=l.projectionCache;if(_.projections[k])return _.projections[k];const w=new o.P(l.lineVertexArray.getx(k),l.lineVertexArray.gety(k)),K=er(w.x,w.y,l);if(K.signedDistanceFromCamera>0)return _.projections[k]=K.point,_.anyProjectionOccluded=_.anyProjectionOccluded||K.isOccluded,K.point;const N=k-c.direction;return on(c.distanceFromAnchor===0?l.tileAnchorPoint:new o.P(l.lineVertexArray.getx(N),l.lineVertexArray.gety(N)),w,c.previousVertex,c.absOffsetX-c.distanceFromAnchor+1,l)}function er(k,l,c){const _=k+c.translation[0],w=l+c.translation[1];let K;return c.pitchWithMap?(K=Gt(_,w,c.pitchedLabelPlaneMatrix,c.getElevation),K.isOccluded=!1):(K=c.transform.projectTileCoordinates(_,w,c.unwrappedTileID,c.getElevation),K.point.x=(.5*K.point.x+.5)*c.width,K.point.y=(.5*-K.point.y+.5)*c.height),K}function Xr(k,l,c,_){if(c.pitchWithMap){const w=[k,l,0,1];return o.al(w,w,_),c.transform.projectTileCoordinates(w[0]/w[3],w[1]/w[3],c.unwrappedTileID,c.getElevation).point}return{x:k/c.width*2-1,y:l/c.height*2-1}}function Ur(k,l,c){return c.transform.projectTileCoordinates(k,l,c.unwrappedTileID,c.getElevation)}function Dr(k,l,c){return k._unit()._perp()._mult(l*c)}function ur(k,l,c,_,w,K,N,$,ee){if($.projectionCache.offsets[k])return $.projectionCache.offsets[k];const ae=c.add(l);if(k+ee.direction<_||k+ee.direction>=w)return $.projectionCache.offsets[k]=ae,ae;const xe=Rn(k+ee.direction,$,ee),ke=Dr(xe.sub(c),N,ee.direction),Ke=c.add(ke),$e=xe.add(ke);return $.projectionCache.offsets[k]=o.am(K,ae,Ke,$e)||ae,$.projectionCache.offsets[k]}function mo(k,l,c,_,w,K,N,$,ee){const ae=_?k-l:k+l;let xe=ae>0?1:-1,ke=0;_&&(xe*=-1,ke=Math.PI),xe<0&&(ke+=Math.PI);let Ke,$e=xe>0?K+w:K+w+1;$.projectionCache.cachedAnchorPoint?Ke=$.projectionCache.cachedAnchorPoint:(Ke=er($.tileAnchorPoint.x,$.tileAnchorPoint.y,$).point,$.projectionCache.cachedAnchorPoint=Ke);let Xe,pt,ut=Ke,mt=Ke,vt=0,Bt=0;const kt=Math.abs(ae),Rt=[];let zt;for(;vt+Bt<=kt;){if($e+=xe,$e<K||$e>=N)return null;vt+=Bt,mt=ut,pt=Xe;const Zt={absOffsetX:kt,direction:xe,distanceFromAnchor:vt,previousVertex:mt};if(ut=Rn($e,$,Zt),c===0)Rt.push(mt),zt=ut.sub(mt);else{let Mn;const Bn=ut.sub(mt);Mn=Bn.mag()===0?Dr(Rn($e+xe,$,Zt).sub(ut),c,xe):Dr(Bn,c,xe),pt||(pt=mt.add(Mn)),Xe=ur($e,Mn,ut,K,N,pt,c,$,Zt),Rt.push(pt),zt=Xe.sub(pt)}Bt=zt.mag()}const Tt=zt._mult((kt-vt)/Bt)._add(pt||mt),nn=ke+Math.atan2(ut.y-mt.y,ut.x-mt.x);return Rt.push(Tt),{point:Tt,angle:ee?nn:0,path:Rt}}const Ma=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function qi(k,l){for(let c=0;c<k;c++){const _=l.length;l.resize(_+4),l.float32.set(Ma,3*_)}}function vi(k,l,c){const _=l[0],w=l[1];return k[0]=c[0]*_+c[4]*w+c[12],k[1]=c[1]*_+c[5]*w+c[13],k[3]=c[3]*_+c[7]*w+c[15],k}const io=100;class Do{constructor(l,c=new rt(l.width+200,l.height+200,25),_=new rt(l.width+200,l.height+200,25)){this.transform=l,this.grid=c,this.ignoredGrid=_,this.pitchFactor=Math.cos(l.pitch*Math.PI/180)*l.cameraToCenterDistance,this.screenRightBoundary=l.width+io,this.screenBottomBoundary=l.height+io,this.gridRightBoundary=l.width+200,this.gridBottomBoundary=l.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(l,c,_,w,K,N,$,ee,ae,xe,ke,Ke){const $e=this.projectAndGetPerspectiveRatio(l.anchorPointX+ee[0],l.anchorPointY+ee[1],K,xe,Ke),Xe=_*$e.perspectiveRatio;let pt;if(N||$)pt=this._projectCollisionBox(l,Xe,w,K,N,$,ee,$e,xe,ke,Ke);else{const zt=$e.x+(ke?ke.x*Xe:0),Tt=$e.y+(ke?ke.y*Xe:0);pt={allPointsOccluded:!1,box:[zt+l.x1*Xe,Tt+l.y1*Xe,zt+l.x2*Xe,Tt+l.y2*Xe]}}const[ut,mt,vt,Bt]=pt.box,kt=N?pt.allPointsOccluded:$e.isOccluded;let Rt=kt;return Rt||(Rt=$e.perspectiveRatio<this.perspectiveRatioCutoff),Rt||(Rt=!this.isInsideGrid(ut,mt,vt,Bt)),Rt||c!=="always"&&this.grid.hitTest(ut,mt,vt,Bt,c,ae)?{box:[ut,mt,vt,Bt],placeable:!1,offscreen:!1,occluded:kt}:{box:[ut,mt,vt,Bt],placeable:!0,offscreen:this.isOffscreen(ut,mt,vt,Bt),occluded:kt}}placeCollisionCircles(l,c,_,w,K,N,$,ee,ae,xe,ke,Ke,$e,Xe){const pt=[],ut=new o.P(c.anchorX,c.anchorY),mt=this.getPerspectiveRatio(ut.x,ut.y,N,Xe),vt=(ae?K*this.transform.getPitchedTextCorrection(c.anchorX,c.anchorY,N)/mt:K*mt)/o.as,Bt={getElevation:Xe,pitchedLabelPlaneMatrix:$,lineVertexArray:_,pitchWithMap:ae,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:ut,unwrappedTileID:N,width:this.transform.width,height:this.transform.height,translation:$e},kt=On(vt,w,c.lineOffsetX*vt,c.lineOffsetY*vt,!1,c,!1,Bt);let Rt=!1,zt=!1,Tt=!0;if(kt){const nn=.5*ke*mt+Ke,Zt=new o.P(-100,-100),Mn=new o.P(this.screenRightBoundary,this.screenBottomBoundary),Bn=new Ne,yn=kt.first,In=kt.last;let Nn=[];for(let ki=yn.path.length-1;ki>=1;ki--)Nn.push(yn.path[ki]);for(let ki=1;ki<In.path.length;ki++)Nn.push(In.path[ki]);const Fn=2.5*nn;if(ae){const ki=this.projectPathToScreenSpace(Nn,Bt);Nn=ki.some(Wi=>Wi.signedDistanceFromCamera<=0)?[]:ki.map(Wi=>Wi.point)}let pr=[];if(Nn.length>0){const ki=Nn[0].clone(),Wi=Nn[0].clone();for(let Lo=1;Lo<Nn.length;Lo++)ki.x=Math.min(ki.x,Nn[Lo].x),ki.y=Math.min(ki.y,Nn[Lo].y),Wi.x=Math.max(Wi.x,Nn[Lo].x),Wi.y=Math.max(Wi.y,Nn[Lo].y);pr=ki.x>=Zt.x&&Wi.x<=Mn.x&&ki.y>=Zt.y&&Wi.y<=Mn.y?[Nn]:Wi.x<Zt.x||ki.x>Mn.x||Wi.y<Zt.y||ki.y>Mn.y?[]:o.ao([Nn],Zt.x,Zt.y,Mn.x,Mn.y)}for(const ki of pr){Bn.reset(ki,.25*nn);let Wi=0;Wi=Bn.length<=.5*nn?1:Math.ceil(Bn.paddedLength/Fn)+1;for(let Lo=0;Lo<Wi;Lo++){const Mi=Lo/Math.max(Wi-1,1),fs=Bn.lerp(Mi),ko=fs.x+io,To=fs.y+io;pt.push(ko,To,nn,0);const vo=ko-nn,il=To-nn,Xo=ko+nn,Jo=To+nn;if(Tt=Tt&&this.isOffscreen(vo,il,Xo,Jo),zt=zt||this.isInsideGrid(vo,il,Xo,Jo),l!=="always"&&this.grid.hitTestCircle(ko,To,nn,l,xe)&&(Rt=!0,!ee))return{circles:[],offscreen:!1,collisionDetected:Rt}}}}return{circles:!ee&&Rt||!zt||mt<this.perspectiveRatioCutoff?[]:pt,offscreen:Tt,collisionDetected:Rt}}projectPathToScreenSpace(l,c){const _=function(w,K){const N=o.H();return o.an(N,K.pitchedLabelPlaneMatrix),w.map($=>{const ee=Gt($.x,$.y,N,K.getElevation),ae=K.transform.projectTileCoordinates(ee.point.x,ee.point.y,K.unwrappedTileID,K.getElevation);return ae.point.x=(.5*ae.point.x+.5)*K.width,ae.point.y=(.5*-ae.point.y+.5)*K.height,ae})}(l,c);return function(w){let K=0,N=0,$=0,ee=0;for(let ae=0;ae<w.length;ae++)w[ae].isOccluded?($=ae+1,ee=0):(ee++,ee>N&&(N=ee,K=$));return w.slice(K,K+N)}(_)}queryRenderedSymbols(l){if(l.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const c=[];let _=1/0,w=1/0,K=-1/0,N=-1/0;for(const xe of l){const ke=new o.P(xe.x+io,xe.y+io);_=Math.min(_,ke.x),w=Math.min(w,ke.y),K=Math.max(K,ke.x),N=Math.max(N,ke.y),c.push(ke)}const $=this.grid.query(_,w,K,N).concat(this.ignoredGrid.query(_,w,K,N)),ee={},ae={};for(const xe of $){const ke=xe.key;if(ee[ke.bucketInstanceId]===void 0&&(ee[ke.bucketInstanceId]={}),ee[ke.bucketInstanceId][ke.featureIndex])continue;const Ke=[new o.P(xe.x1,xe.y1),new o.P(xe.x2,xe.y1),new o.P(xe.x2,xe.y2),new o.P(xe.x1,xe.y2)];o.ap(c,Ke)&&(ee[ke.bucketInstanceId][ke.featureIndex]=!0,ae[ke.bucketInstanceId]===void 0&&(ae[ke.bucketInstanceId]=[]),ae[ke.bucketInstanceId].push(ke.featureIndex))}return ae}insertCollisionBox(l,c,_,w,K,N){(_?this.ignoredGrid:this.grid).insert({bucketInstanceId:w,featureIndex:K,collisionGroupID:N,overlapMode:c},l[0],l[1],l[2],l[3])}insertCollisionCircles(l,c,_,w,K,N){const $=_?this.ignoredGrid:this.grid,ee={bucketInstanceId:w,featureIndex:K,collisionGroupID:N,overlapMode:c};for(let ae=0;ae<l.length;ae+=4)$.insertCircle(ee,l[ae],l[ae+1],l[ae+2])}projectAndGetPerspectiveRatio(l,c,_,w,K){if(K){let N;w?(N=[l,c,w(l,c),1],o.al(N,N,K)):(N=[l,c,0,1],vi(N,N,K));const $=N[3];return{x:(N[0]/$+1)/2*this.transform.width+io,y:(-N[1]/$+1)/2*this.transform.height+io,perspectiveRatio:.5+this.transform.cameraToCenterDistance/$*.5,isOccluded:!1,signedDistanceFromCamera:$}}{const N=this.transform.projectTileCoordinates(l,c,_,w);return{x:(N.point.x+1)/2*this.transform.width+io,y:(1-N.point.y)/2*this.transform.height+io,perspectiveRatio:.5+this.transform.cameraToCenterDistance/N.signedDistanceFromCamera*.5,isOccluded:N.isOccluded,signedDistanceFromCamera:N.signedDistanceFromCamera}}}getPerspectiveRatio(l,c,_,w){const K=this.transform.projectTileCoordinates(l,c,_,w);return .5+this.transform.cameraToCenterDistance/K.signedDistanceFromCamera*.5}isOffscreen(l,c,_,w){return _<io||l>=this.screenRightBoundary||w<io||c>this.screenBottomBoundary}isInsideGrid(l,c,_,w){return _>=0&&l<this.gridRightBoundary&&w>=0&&c<this.gridBottomBoundary}getViewportMatrix(){const l=o.aq([]);return o.J(l,l,[-100,-100,0]),l}_projectCollisionBox(l,c,_,w,K,N,$,ee,ae,xe,ke){let Ke=1,$e=0,Xe=0,pt=1;const ut=l.anchorPointX+$[0],mt=l.anchorPointY+$[1];if(N&&!K){const Nn=this.projectAndGetPerspectiveRatio(ut+1,mt,w,ae,ke),Fn=Nn.x-ee.x,pr=Math.atan((Nn.y-ee.y)/Fn)+(Fn<0?Math.PI:0),ki=Math.sin(pr),Wi=Math.cos(pr);Ke=Wi,$e=ki,Xe=-ki,pt=Wi}else if(!N&&K){const Nn=qt(this.transform);Ke=Nn.vecEast[0],$e=Nn.vecEast[1],Xe=Nn.vecSouth[0],pt=Nn.vecSouth[1]}let vt=ee.x,Bt=ee.y,kt=c;K&&(vt=ut,Bt=mt,kt=Math.pow(2,-(this.transform.zoom-_.overscaledZ)),kt*=this.transform.getPitchedTextCorrection(ut,mt,w),xe||(kt*=o.ab(.5+ee.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),xe&&(vt+=Ke*xe.x*kt+Xe*xe.y*kt,Bt+=$e*xe.x*kt+pt*xe.y*kt);const Rt=l.x1*kt,zt=l.x2*kt,Tt=(Rt+zt)/2,nn=l.y1*kt,Zt=l.y2*kt,Mn=(nn+Zt)/2,Bn=[{offsetX:Rt,offsetY:nn},{offsetX:Tt,offsetY:nn},{offsetX:zt,offsetY:nn},{offsetX:zt,offsetY:Mn},{offsetX:zt,offsetY:Zt},{offsetX:Tt,offsetY:Zt},{offsetX:Rt,offsetY:Zt},{offsetX:Rt,offsetY:Mn}];let yn=[];for(const{offsetX:Nn,offsetY:Fn}of Bn)yn.push(new o.P(vt+Ke*Nn+Xe*Fn,Bt+$e*Nn+pt*Fn));let In=!1;if(K){const Nn=yn.map(Fn=>this.projectAndGetPerspectiveRatio(Fn.x,Fn.y,w,ae,ke));In=Nn.some(Fn=>!Fn.isOccluded),yn=Nn.map(Fn=>new o.P(Fn.x,Fn.y))}else In=!0;return{box:o.ar(yn),allPointsOccluded:!In}}}class Ti{constructor(l,c,_,w){this.opacity=l?Math.max(0,Math.min(1,l.opacity+(l.placed?c:-c))):w&&_?1:0,this.placed=_}isHidden(){return this.opacity===0&&!this.placed}}class ja{constructor(l,c,_,w,K){this.text=new Ti(l?l.text:null,c,_,K),this.icon=new Ti(l?l.icon:null,c,w,K)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Sa{constructor(l,c,_){this.text=l,this.icon=c,this.skipFade=_}}class ns{constructor(l,c,_,w,K){this.bucketInstanceId=l,this.featureIndex=c,this.sourceLayerIndex=_,this.bucketIndex=w,this.tileID=K}}class sa{constructor(l){this.crossSourceCollisions=l,this.maxGroupID=0,this.collisionGroups={}}get(l){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[l]){const c=++this.maxGroupID;this.collisionGroups[l]={ID:c,predicate:_=>_.collisionGroupID===c}}return this.collisionGroups[l]}}function Al(k,l,c,_,w){const{horizontalAlign:K,verticalAlign:N}=o.ay(k);return new o.P(-(K-.5)*l+_[0]*w,-(N-.5)*c+_[1]*w)}class uo{constructor(l,c,_,w,K){this.transform=l.clone(),this.terrain=c,this.collisionIndex=new Do(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=_,this.retainedQueryData={},this.collisionGroups=new sa(w),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=K,K&&(K.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(l){const c=this.terrain;return c?(_,w)=>c.getElevation(l,_,w):null}getBucketParts(l,c,_,w){const K=_.getBucket(c),N=_.latestFeatureIndex;if(!K||!N||c.id!==K.layerIds[0])return;const $=_.collisionBoxArray,ee=K.layers[0].layout,ae=K.layers[0].paint,xe=Math.pow(2,this.transform.zoom-_.tileID.overscaledZ),ke=_.tileSize/o.X,Ke=_.tileID.toUnwrapped(),$e=ee.get("text-rotation-alignment")==="map",Xe=o.at(_,1,this.transform.zoom),pt=o.au(this.collisionIndex.transform,_,ae.get("text-translate"),ae.get("text-translate-anchor")),ut=o.au(this.collisionIndex.transform,_,ae.get("icon-translate"),ae.get("icon-translate-anchor")),mt=ct($e,this.transform,Xe);this.retainedQueryData[K.bucketInstanceId]=new ns(K.bucketInstanceId,N,K.sourceLayerIndex,K.index,_.tileID);const vt={bucket:K,layout:ee,translationText:pt,translationIcon:ut,unwrappedTileID:Ke,pitchedLabelPlaneMatrix:mt,scale:xe,textPixelRatio:ke,holdingForFade:_.holdingForFade(),collisionBoxArray:$,partiallyEvaluatedTextSize:o.ah(K.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(K.sourceID)};if(w)for(const Bt of K.sortKeyRanges){const{sortKey:kt,symbolInstanceStart:Rt,symbolInstanceEnd:zt}=Bt;l.push({sortKey:kt,symbolInstanceStart:Rt,symbolInstanceEnd:zt,parameters:vt})}else l.push({symbolInstanceStart:0,symbolInstanceEnd:K.symbolInstances.length,parameters:vt})}attemptAnchorPlacement(l,c,_,w,K,N,$,ee,ae,xe,ke,Ke,$e,Xe,pt,ut,mt,vt,Bt,kt){const Rt=o.av[l.textAnchor],zt=[l.textOffset0,l.textOffset1],Tt=Al(Rt,_,w,zt,K),nn=this.collisionIndex.placeCollisionBox(c,Ke,ee,ae,xe,$,N,ut,ke.predicate,Bt,Tt,kt);if((!vt||this.collisionIndex.placeCollisionBox(vt,Ke,ee,ae,xe,$,N,mt,ke.predicate,Bt,Tt,kt).placeable)&&nn.placeable){let Zt;if(this.prevPlacement&&this.prevPlacement.variableOffsets[$e.crossTileID]&&this.prevPlacement.placements[$e.crossTileID]&&this.prevPlacement.placements[$e.crossTileID].text&&(Zt=this.prevPlacement.variableOffsets[$e.crossTileID].anchor),$e.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[$e.crossTileID]={textOffset:zt,width:_,height:w,anchor:Rt,textBoxScale:K,prevAnchor:Zt},this.markUsedJustification(Xe,Rt,$e,pt),Xe.allowVerticalPlacement&&(this.markUsedOrientation(Xe,pt,$e),this.placedOrientations[$e.crossTileID]=pt),{shift:Tt,placedGlyphBoxes:nn}}}placeLayerBucketPart(l,c,_){const{bucket:w,layout:K,translationText:N,translationIcon:$,unwrappedTileID:ee,pitchedLabelPlaneMatrix:ae,textPixelRatio:xe,holdingForFade:ke,collisionBoxArray:Ke,partiallyEvaluatedTextSize:$e,collisionGroup:Xe}=l.parameters,pt=K.get("text-optional"),ut=K.get("icon-optional"),mt=o.aw(K,"text-overlap","text-allow-overlap"),vt=mt==="always",Bt=o.aw(K,"icon-overlap","icon-allow-overlap"),kt=Bt==="always",Rt=K.get("text-rotation-alignment")==="map",zt=K.get("text-pitch-alignment")==="map",Tt=K.get("icon-text-fit")!=="none",nn=K.get("symbol-z-order")==="viewport-y",Zt=vt&&(kt||!w.hasIconData()||ut),Mn=kt&&(vt||!w.hasTextData()||pt);!w.collisionArrays&&Ke&&w.deserializeCollisionBoxes(Ke);const Bn=this.retainedQueryData[w.bucketInstanceId].tileID,yn=this._getTerrainElevationFunc(Bn),In=this.transform.getFastPathSimpleProjectionMatrix(Bn),Nn=(Fn,pr,ki)=>{var Wi,Lo;if(c[Fn.crossTileID])return;if(ke)return void(this.placements[Fn.crossTileID]=new Sa(!1,!1,!1));let Mi=!1,fs=!1,ko=!0,To=null,vo={box:null,placeable:!1,offscreen:null,occluded:!1},il={box:null,placeable:!1,offscreen:null},Xo=null,Jo=null,ol=null,yA=0,lu=0,Ta=0;pr.textFeatureIndex?yA=pr.textFeatureIndex:Fn.useRuntimeCollisionCircles&&(yA=Fn.featureIndex),pr.verticalTextFeatureIndex&&(lu=pr.verticalTextFeatureIndex);const Sl=pr.textBox;if(Sl){const Aa=os=>{let ss=o.ai.horizontal;if(w.allowVerticalPlacement&&!os&&this.prevPlacement){const Bu=this.prevPlacement.placedOrientations[Fn.crossTileID];Bu&&(this.placedOrientations[Fn.crossTileID]=Bu,ss=Bu,this.markUsedOrientation(w,ss,Fn))}return ss},El=(os,ss)=>{if(w.allowVerticalPlacement&&Fn.numVerticalGlyphVertices>0&&pr.verticalTextBox){for(const Bu of w.writingModes)if(Bu===o.ai.vertical?(vo=ss(),il=vo):vo=os(),vo&&vo.placeable)break}else vo=os()},Pa=Fn.textAnchorOffsetStartIndex,uu=Fn.textAnchorOffsetEndIndex;if(uu===Pa){const os=(ss,Bu)=>{const $s=this.collisionIndex.placeCollisionBox(ss,mt,xe,Bn,ee,zt,Rt,N,Xe.predicate,yn,void 0,In);return $s&&$s.placeable&&(this.markUsedOrientation(w,Bu,Fn),this.placedOrientations[Fn.crossTileID]=Bu),$s};El(()=>os(Sl,o.ai.horizontal),()=>{const ss=pr.verticalTextBox;return w.allowVerticalPlacement&&Fn.numVerticalGlyphVertices>0&&ss?os(ss,o.ai.vertical):{box:null,offscreen:null}}),Aa(vo&&vo.placeable)}else{let os=o.av[(Lo=(Wi=this.prevPlacement)===null||Wi===void 0?void 0:Wi.variableOffsets[Fn.crossTileID])===null||Lo===void 0?void 0:Lo.anchor];const ss=($s,Hd,hf)=>{const Zd=$s.x2-$s.x1,Op=$s.y2-$s.y1,dc=Fn.textBoxScale,hc=Tt&&Bt==="never"?Hd:null;let va=null,Hu=mt==="never"?1:2,Jc="never";os&&Hu++;for(let Vf=0;Vf<Hu;Vf++){for(let ed=Pa;ed<uu;ed++){const CA=w.textAnchorOffsets.get(ed);if(os&&CA.textAnchor!==os)continue;const pl=this.attemptAnchorPlacement(CA,$s,Zd,Op,dc,Rt,zt,xe,Bn,ee,Xe,Jc,Fn,w,hf,N,$,hc,yn);if(pl&&(va=pl.placedGlyphBoxes,va&&va.placeable))return Mi=!0,To=pl.shift,va}os?os=null:Jc=mt}return _&&!va&&(va={box:this.collisionIndex.placeCollisionBox(Sl,"always",xe,Bn,ee,zt,Rt,N,Xe.predicate,yn,void 0,In).box,offscreen:!1,placeable:!1,occluded:!1}),va};El(()=>ss(Sl,pr.iconBox,o.ai.horizontal),()=>{const $s=pr.verticalTextBox;return w.allowVerticalPlacement&&(!vo||!vo.placeable)&&Fn.numVerticalGlyphVertices>0&&$s?ss($s,pr.verticalIconBox,o.ai.vertical):{box:null,occluded:!0,offscreen:null}}),vo&&(Mi=vo.placeable,ko=vo.offscreen);const Bu=Aa(vo&&vo.placeable);if(!Mi&&this.prevPlacement){const $s=this.prevPlacement.variableOffsets[Fn.crossTileID];$s&&(this.variableOffsets[Fn.crossTileID]=$s,this.markUsedJustification(w,$s.anchor,Fn,Bu))}}}if(Xo=vo,Mi=Xo&&Xo.placeable,ko=Xo&&Xo.offscreen,Fn.useRuntimeCollisionCircles){const Aa=w.text.placedSymbolArray.get(Fn.centerJustifiedTextSymbolIndex),El=o.aj(w.textSizeData,$e,Aa),Pa=K.get("text-padding");Jo=this.collisionIndex.placeCollisionCircles(mt,Aa,w.lineVertexArray,w.glyphOffsetArray,El,ee,ae,_,zt,Xe.predicate,Fn.collisionCircleDiameter,Pa,N,yn),Jo.circles.length&&Jo.collisionDetected&&!_&&o.w("Collisions detected, but collision boxes are not shown"),Mi=vt||Jo.circles.length>0&&!Jo.collisionDetected,ko=ko&&Jo.offscreen}if(pr.iconFeatureIndex&&(Ta=pr.iconFeatureIndex),pr.iconBox){const Aa=El=>this.collisionIndex.placeCollisionBox(El,Bt,xe,Bn,ee,zt,Rt,$,Xe.predicate,yn,Tt&&To?To:void 0,In);il&&il.placeable&&pr.verticalIconBox?(ol=Aa(pr.verticalIconBox),fs=ol.placeable):(ol=Aa(pr.iconBox),fs=ol.placeable),ko=ko&&ol.offscreen}const jA=pt||Fn.numHorizontalGlyphVertices===0&&Fn.numVerticalGlyphVertices===0,vA=ut||Fn.numIconVertices===0;jA||vA?vA?jA||(fs=fs&&Mi):Mi=fs&&Mi:fs=Mi=fs&&Mi;const NA=fs&&ol.placeable;if(Mi&&Xo.placeable&&this.collisionIndex.insertCollisionBox(Xo.box,mt,K.get("text-ignore-placement"),w.bucketInstanceId,il&&il.placeable&&lu?lu:yA,Xe.ID),NA&&this.collisionIndex.insertCollisionBox(ol.box,Bt,K.get("icon-ignore-placement"),w.bucketInstanceId,Ta,Xe.ID),Jo&&Mi&&this.collisionIndex.insertCollisionCircles(Jo.circles,mt,K.get("text-ignore-placement"),w.bucketInstanceId,yA,Xe.ID),_&&this.storeCollisionData(w.bucketInstanceId,ki,pr,Xo,ol,Jo),Fn.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(w.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Fn.crossTileID]=new Sa((Mi||Zt)&&!(Xo!=null&&Xo.occluded),(fs||Mn)&&!(ol!=null&&ol.occluded),ko||w.justReloaded),c[Fn.crossTileID]=!0};if(nn){if(l.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Fn=w.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let pr=Fn.length-1;pr>=0;--pr){const ki=Fn[pr];Nn(w.symbolInstances.get(ki),w.collisionArrays[ki],ki)}}else for(let Fn=l.symbolInstanceStart;Fn<l.symbolInstanceEnd;Fn++)Nn(w.symbolInstances.get(Fn),w.collisionArrays[Fn],Fn);w.justReloaded=!1}storeCollisionData(l,c,_,w,K,N){if(_.textBox||_.iconBox){let $,ee;this.collisionBoxArrays.has(l)?$=this.collisionBoxArrays.get(l):($=new Map,this.collisionBoxArrays.set(l,$)),$.has(c)?ee=$.get(c):(ee={text:null,icon:null},$.set(c,ee)),_.textBox&&(ee.text=w.box),_.iconBox&&(ee.icon=K.box)}if(N){let $=this.collisionCircleArrays[l];$===void 0&&($=this.collisionCircleArrays[l]=[]);for(let ee=0;ee<N.circles.length;ee+=4)$.push(N.circles[ee+0]-io),$.push(N.circles[ee+1]-io),$.push(N.circles[ee+2]),$.push(N.collisionDetected?1:0)}}markUsedJustification(l,c,_,w){let K;K=w===o.ai.vertical?_.verticalPlacedTextSymbolIndex:{left:_.leftJustifiedTextSymbolIndex,center:_.centerJustifiedTextSymbolIndex,right:_.rightJustifiedTextSymbolIndex}[o.ax(c)];const N=[_.leftJustifiedTextSymbolIndex,_.centerJustifiedTextSymbolIndex,_.rightJustifiedTextSymbolIndex,_.verticalPlacedTextSymbolIndex];for(const $ of N)$>=0&&(l.text.placedSymbolArray.get($).crossTileID=K>=0&&$!==K?0:_.crossTileID)}markUsedOrientation(l,c,_){const w=c===o.ai.horizontal||c===o.ai.horizontalOnly?c:0,K=c===o.ai.vertical?c:0,N=[_.leftJustifiedTextSymbolIndex,_.centerJustifiedTextSymbolIndex,_.rightJustifiedTextSymbolIndex];for(const $ of N)l.text.placedSymbolArray.get($).placedOrientation=w;_.verticalPlacedTextSymbolIndex&&(l.text.placedSymbolArray.get(_.verticalPlacedTextSymbolIndex).placedOrientation=K)}commit(l){this.commitTime=l,this.zoomAtLastRecencyCheck=this.transform.zoom;const c=this.prevPlacement;let _=!1;this.prevZoomAdjustment=c?c.zoomAdjustment(this.transform.zoom):0;const w=c?c.symbolFadeChange(l):1,K=c?c.opacities:{},N=c?c.variableOffsets:{},$=c?c.placedOrientations:{};for(const ee in this.placements){const ae=this.placements[ee],xe=K[ee];xe?(this.opacities[ee]=new ja(xe,w,ae.text,ae.icon),_=_||ae.text!==xe.text.placed||ae.icon!==xe.icon.placed):(this.opacities[ee]=new ja(null,w,ae.text,ae.icon,ae.skipFade),_=_||ae.text||ae.icon)}for(const ee in K){const ae=K[ee];if(!this.opacities[ee]){const xe=new ja(ae,w,!1,!1);xe.isHidden()||(this.opacities[ee]=xe,_=_||ae.text.placed||ae.icon.placed)}}for(const ee in N)this.variableOffsets[ee]||!this.opacities[ee]||this.opacities[ee].isHidden()||(this.variableOffsets[ee]=N[ee]);for(const ee in $)this.placedOrientations[ee]||!this.opacities[ee]||this.opacities[ee].isHidden()||(this.placedOrientations[ee]=$[ee]);if(c&&c.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");_?this.lastPlacementChangeTime=l:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=c?c.lastPlacementChangeTime:l)}updateLayerOpacities(l,c){const _={};for(const w of c){const K=w.getBucket(l);K&&w.latestFeatureIndex&&l.id===K.layerIds[0]&&this.updateBucketOpacities(K,w.tileID,_,w.collisionBoxArray)}}updateBucketOpacities(l,c,_,w){l.hasTextData()&&(l.text.opacityVertexArray.clear(),l.text.hasVisibleVertices=!1),l.hasIconData()&&(l.icon.opacityVertexArray.clear(),l.icon.hasVisibleVertices=!1),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexArray.clear(),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexArray.clear();const K=l.layers[0],N=K.layout,$=new ja(null,0,!1,!1,!0),ee=N.get("text-allow-overlap"),ae=N.get("icon-allow-overlap"),xe=K._unevaluatedLayout.hasValue("text-variable-anchor")||K._unevaluatedLayout.hasValue("text-variable-anchor-offset"),ke=N.get("text-rotation-alignment")==="map",Ke=N.get("text-pitch-alignment")==="map",$e=N.get("icon-text-fit")!=="none",Xe=new ja(null,0,ee&&(ae||!l.hasIconData()||N.get("icon-optional")),ae&&(ee||!l.hasTextData()||N.get("text-optional")),!0);!l.collisionArrays&&w&&(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData())&&l.deserializeCollisionBoxes(w);const pt=(mt,vt,Bt)=>{for(let kt=0;kt<vt/4;kt++)mt.opacityVertexArray.emplaceBack(Bt);mt.hasVisibleVertices=mt.hasVisibleVertices||Bt!==vn},ut=this.collisionBoxArrays.get(l.bucketInstanceId);for(let mt=0;mt<l.symbolInstances.length;mt++){const vt=l.symbolInstances.get(mt),{numHorizontalGlyphVertices:Bt,numVerticalGlyphVertices:kt,crossTileID:Rt}=vt;let zt=this.opacities[Rt];_[Rt]?zt=$:zt||(zt=Xe,this.opacities[Rt]=zt),_[Rt]=!0;const Tt=vt.numIconVertices>0,nn=this.placedOrientations[vt.crossTileID],Zt=nn===o.ai.vertical,Mn=nn===o.ai.horizontal||nn===o.ai.horizontalOnly;if(Bt>0||kt>0){const yn=wt(zt.text);pt(l.text,Bt,Zt?vn:yn),pt(l.text,kt,Mn?vn:yn);const In=zt.text.isHidden();[vt.rightJustifiedTextSymbolIndex,vt.centerJustifiedTextSymbolIndex,vt.leftJustifiedTextSymbolIndex].forEach(pr=>{pr>=0&&(l.text.placedSymbolArray.get(pr).hidden=In||Zt?1:0)}),vt.verticalPlacedTextSymbolIndex>=0&&(l.text.placedSymbolArray.get(vt.verticalPlacedTextSymbolIndex).hidden=In||Mn?1:0);const Nn=this.variableOffsets[vt.crossTileID];Nn&&this.markUsedJustification(l,Nn.anchor,vt,nn);const Fn=this.placedOrientations[vt.crossTileID];Fn&&(this.markUsedJustification(l,"left",vt,Fn),this.markUsedOrientation(l,Fn,vt))}if(Tt){const yn=wt(zt.icon),In=!($e&&vt.verticalPlacedIconSymbolIndex&&Zt);vt.placedIconSymbolIndex>=0&&(pt(l.icon,vt.numIconVertices,In?yn:vn),l.icon.placedSymbolArray.get(vt.placedIconSymbolIndex).hidden=zt.icon.isHidden()),vt.verticalPlacedIconSymbolIndex>=0&&(pt(l.icon,vt.numVerticalIconVertices,In?vn:yn),l.icon.placedSymbolArray.get(vt.verticalPlacedIconSymbolIndex).hidden=zt.icon.isHidden())}const Bn=ut&&ut.has(mt)?ut.get(mt):{text:null,icon:null};if(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData()){const yn=l.collisionArrays[mt];if(yn){let In=new o.P(0,0);if(yn.textBox||yn.verticalTextBox){let Nn=!0;if(xe){const Fn=this.variableOffsets[Rt];Fn?(In=Al(Fn.anchor,Fn.width,Fn.height,Fn.textOffset,Fn.textBoxScale),ke&&In._rotate(Ke?-this.transform.bearingInRadians:this.transform.bearingInRadians)):Nn=!1}if(yn.textBox||yn.verticalTextBox){let Fn;yn.textBox&&(Fn=Zt),yn.verticalTextBox&&(Fn=Mn),Fu(l.textCollisionBox.collisionVertexArray,zt.text.placed,!Nn||Fn,Bn.text,In.x,In.y)}}if(yn.iconBox||yn.verticalIconBox){const Nn=!!(!Mn&&yn.verticalIconBox);let Fn;yn.iconBox&&(Fn=Nn),yn.verticalIconBox&&(Fn=!Nn),Fu(l.iconCollisionBox.collisionVertexArray,zt.icon.placed,Fn,Bn.icon,$e?In.x:0,$e?In.y:0)}}}}if(l.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[l.bucketInstanceId]&&(this.retainedQueryData[l.bucketInstanceId].featureSortOrder=l.featureSortOrder),l.hasTextData()&&l.text.opacityVertexBuffer&&l.text.opacityVertexBuffer.updateData(l.text.opacityVertexArray),l.hasIconData()&&l.icon.opacityVertexBuffer&&l.icon.opacityVertexBuffer.updateData(l.icon.opacityVertexArray),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexBuffer&&l.iconCollisionBox.collisionVertexBuffer.updateData(l.iconCollisionBox.collisionVertexArray),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexBuffer&&l.textCollisionBox.collisionVertexBuffer.updateData(l.textCollisionBox.collisionVertexArray),l.text.opacityVertexArray.length!==l.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${l.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${l.text.layoutVertexArray.length}) / 4`);if(l.icon.opacityVertexArray.length!==l.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${l.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${l.icon.layoutVertexArray.length}) / 4`);l.bucketInstanceId in this.collisionCircleArrays&&(l.collisionCircleArray=this.collisionCircleArrays[l.bucketInstanceId],delete this.collisionCircleArrays[l.bucketInstanceId])}symbolFadeChange(l){return this.fadeDuration===0?1:(l-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(l){return Math.max(0,(this.transform.zoom-l)/1.5)}hasTransitions(l){return this.stale||l-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(l,c){const _=this.zoomAtLastRecencyCheck===c?1-this.zoomAdjustment(c):1;return this.zoomAtLastRecencyCheck=c,this.commitTime+this.fadeDuration*_>l}setStale(){this.stale=!0}}function Fu(k,l,c,_,w,K){_&&_.length!==0||(_=[0,0,0,0]);const N=_[0]-io,$=_[1]-io,ee=_[2]-io,ae=_[3]-io;k.emplaceBack(l?1:0,c?1:0,w||0,K||0,N,$),k.emplaceBack(l?1:0,c?1:0,w||0,K||0,ee,$),k.emplaceBack(l?1:0,c?1:0,w||0,K||0,ee,ae),k.emplaceBack(l?1:0,c?1:0,w||0,K||0,N,ae)}const Hl=Math.pow(2,25),oo=Math.pow(2,24),Tr=Math.pow(2,17),tl=Math.pow(2,16),Bs=Math.pow(2,9),Js=Math.pow(2,8),qe=Math.pow(2,1);function wt(k){if(k.opacity===0&&!k.placed)return 0;if(k.opacity===1&&k.placed)return 4294967295;const l=k.placed?1:0,c=Math.floor(127*k.opacity);return c*Hl+l*oo+c*Tr+l*tl+c*Bs+l*Js+c*qe+l}const vn=0;class Yn{constructor(l){this._sortAcrossTiles=l.layout.get("symbol-z-order")!=="viewport-y"&&!l.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(l,c,_,w,K){const N=this._bucketParts;for(;this._currentTileIndex<l.length;)if(c.getBucketParts(N,w,l[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,K())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,N.sort(($,ee)=>$.sortKey-ee.sortKey));this._currentPartIndex<N.length;)if(c.placeLayerBucketPart(N[this._currentPartIndex],this._seenCrossTileIDs,_),this._currentPartIndex++,K())return!0;return!1}}class hn{constructor(l,c,_,w,K,N,$,ee){this.placement=new uo(l,c,N,$,ee),this._currentPlacementIndex=_.length-1,this._forceFullPlacement=w,this._showCollisionBoxes=K,this._done=!1}isDone(){return this._done}continuePlacement(l,c,_){const w=S.now(),K=()=>!this._forceFullPlacement&&S.now()-w>2;for(;this._currentPlacementIndex>=0;){const N=c[l[this._currentPlacementIndex]],$=this.placement.collisionIndex.transform.zoom;if(N.type==="symbol"&&(!N.minzoom||N.minzoom<=$)&&(!N.maxzoom||N.maxzoom>$)){if(this._inProgressLayer||(this._inProgressLayer=new Yn(N)),this._inProgressLayer.continuePlacement(_[N.source],this.placement,this._showCollisionBoxes,N,K))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(l){return this.placement.commit(l),this.placement}}const or=512/o.X/2;class Pi{constructor(l,c,_){this.tileID=l,this.bucketInstanceId=_,this._symbolsByKey={};const w=new Map;for(let K=0;K<c.length;K++){const N=c.get(K),$=N.key,ee=w.get($);ee?ee.push(N):w.set($,[N])}for(const[K,N]of w){const $={positions:N.map(ee=>({x:Math.floor(ee.anchorX*or),y:Math.floor(ee.anchorY*or)})),crossTileIDs:N.map(ee=>ee.crossTileID)};if($.positions.length>128){const ee=new o.az($.positions.length,16,Uint16Array);for(const{x:ae,y:xe}of $.positions)ee.add(ae,xe);ee.finish(),delete $.positions,$.index=ee}this._symbolsByKey[K]=$}}getScaledCoordinates(l,c){const{x:_,y:w,z:K}=this.tileID.canonical,{x:N,y:$,z:ee}=c.canonical,ae=or/Math.pow(2,ee-K),xe=($*o.X+l.anchorY)*ae,ke=w*o.X*or;return{x:Math.floor((N*o.X+l.anchorX)*ae-_*o.X*or),y:Math.floor(xe-ke)}}findMatches(l,c,_){const w=this.tileID.canonical.z<c.canonical.z?1:Math.pow(2,this.tileID.canonical.z-c.canonical.z);for(let K=0;K<l.length;K++){const N=l.get(K);if(N.crossTileID)continue;const $=this._symbolsByKey[N.key];if(!$)continue;const ee=this.getScaledCoordinates(N,c);if($.index){const ae=$.index.range(ee.x-w,ee.y-w,ee.x+w,ee.y+w).sort();for(const xe of ae){const ke=$.crossTileIDs[xe];if(!_[ke]){_[ke]=!0,N.crossTileID=ke;break}}}else if($.positions)for(let ae=0;ae<$.positions.length;ae++){const xe=$.positions[ae],ke=$.crossTileIDs[ae];if(Math.abs(xe.x-ee.x)<=w&&Math.abs(xe.y-ee.y)<=w&&!_[ke]){_[ke]=!0,N.crossTileID=ke;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:l})=>l)}}class go{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Cs{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(l){const c=Math.round((l-this.lng)/360);if(c!==0)for(const _ in this.indexes){const w=this.indexes[_],K={};for(const N in w){const $=w[N];$.tileID=$.tileID.unwrapTo($.tileID.wrap+c),K[$.tileID.key]=$}this.indexes[_]=K}this.lng=l}addBucket(l,c,_){if(this.indexes[l.overscaledZ]&&this.indexes[l.overscaledZ][l.key]){if(this.indexes[l.overscaledZ][l.key].bucketInstanceId===c.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(l.overscaledZ,this.indexes[l.overscaledZ][l.key])}for(let K=0;K<c.symbolInstances.length;K++)c.symbolInstances.get(K).crossTileID=0;this.usedCrossTileIDs[l.overscaledZ]||(this.usedCrossTileIDs[l.overscaledZ]={});const w=this.usedCrossTileIDs[l.overscaledZ];for(const K in this.indexes){const N=this.indexes[K];if(Number(K)>l.overscaledZ)for(const $ in N){const ee=N[$];ee.tileID.isChildOf(l)&&ee.findMatches(c.symbolInstances,l,w)}else{const $=N[l.scaledTo(Number(K)).key];$&&$.findMatches(c.symbolInstances,l,w)}}for(let K=0;K<c.symbolInstances.length;K++){const N=c.symbolInstances.get(K);N.crossTileID||(N.crossTileID=_.generate(),w[N.crossTileID]=!0)}return this.indexes[l.overscaledZ]===void 0&&(this.indexes[l.overscaledZ]={}),this.indexes[l.overscaledZ][l.key]=new Pi(l,c.symbolInstances,c.bucketInstanceId),!0}removeBucketCrossTileIDs(l,c){for(const _ of c.getCrossTileIDsLists())for(const w of _)delete this.usedCrossTileIDs[l][w]}removeStaleBuckets(l){let c=!1;for(const _ in this.indexes){const w=this.indexes[_];for(const K in w)l[w[K].bucketInstanceId]||(this.removeBucketCrossTileIDs(_,w[K]),delete w[K],c=!0)}return c}}class Rs{constructor(){this.layerIndexes={},this.crossTileIDs=new go,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(l,c,_){let w=this.layerIndexes[l.id];w===void 0&&(w=this.layerIndexes[l.id]=new Cs);let K=!1;const N={};w.handleWrapJump(_);for(const $ of c){const ee=$.getBucket(l);ee&&l.id===ee.layerIds[0]&&(ee.bucketInstanceId||(ee.bucketInstanceId=++this.maxBucketInstanceId),w.addBucket($.tileID,ee,this.crossTileIDs)&&(K=!0),N[ee.bucketInstanceId]=!0)}return w.removeStaleBuckets(N)&&(K=!0),K}pruneUnusedLayers(l){const c={};l.forEach(_=>{c[_]=!0});for(const _ in this.layerIndexes)c[_]||delete this.layerIndexes[_]}}var SA="void main() {fragColor=vec4(1.0);}";const ei={prelude:wi(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:wi("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:wi("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:wi(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:wi(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:wi(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:wi(SA,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:wi(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:wi(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:wi("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:wi("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:wi("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:wi(SA,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:wi(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:wi(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:wi(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:wi(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:wi(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:wi(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:wi(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));fragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:wi(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:wi(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:wi(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:wi(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:wi(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:wi(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:wi(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:wi(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:wi(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:wi("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:wi("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:wi("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:wi("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:wi(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:wi("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function wi(k,l){const c=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,_=l.match(/in ([\w]+) ([\w]+)/g),w=k.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),K=l.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),N=K?K.concat(w):w,$={};return{fragmentSource:k=k.replace(c,(ee,ae,xe,ke,Ke)=>($[Ke]=!0,ae==="define"?`
#ifndef HAS_UNIFORM_u_${Ke}
in ${xe} ${ke} ${Ke};
#else
uniform ${xe} ${ke} u_${Ke};
#endif
`:`
#ifdef HAS_UNIFORM_u_${Ke}
    ${xe} ${ke} ${Ke} = u_${Ke};
#endif
`)),vertexSource:l=l.replace(c,(ee,ae,xe,ke,Ke)=>{const $e=ke==="float"?"vec2":"vec4",Xe=Ke.match(/color/)?"color":$e;return $[Ke]?ae==="define"?`
#ifndef HAS_UNIFORM_u_${Ke}
uniform lowp float u_${Ke}_t;
in ${xe} ${$e} a_${Ke};
out ${xe} ${ke} ${Ke};
#else
uniform ${xe} ${ke} u_${Ke};
#endif
`:Xe==="vec4"?`
#ifndef HAS_UNIFORM_u_${Ke}
    ${Ke} = a_${Ke};
#else
    ${xe} ${ke} ${Ke} = u_${Ke};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Ke}
    ${Ke} = unpack_mix_${Xe}(a_${Ke}, u_${Ke}_t);
#else
    ${xe} ${ke} ${Ke} = u_${Ke};
#endif
`:ae==="define"?`
#ifndef HAS_UNIFORM_u_${Ke}
uniform lowp float u_${Ke}_t;
in ${xe} ${$e} a_${Ke};
#else
uniform ${xe} ${ke} u_${Ke};
#endif
`:Xe==="vec4"?`
#ifndef HAS_UNIFORM_u_${Ke}
    ${xe} ${ke} ${Ke} = a_${Ke};
#else
    ${xe} ${ke} ${Ke} = u_${Ke};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Ke}
    ${xe} ${ke} ${Ke} = unpack_mix_${Xe}(a_${Ke}, u_${Ke}_t);
#else
    ${xe} ${ke} ${Ke} = u_${Ke};
#endif
`}),staticAttributes:_,staticUniforms:N}}class nl{constructor(l,c,_){this.vertexBuffer=l,this.indexBuffer=c,this.segments=_}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var ui=o.aA([{name:"a_pos",type:"Int16",components:2}]);const aa="#define PROJECTION_MERCATOR",XA="mercator";class Ea{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return XA}get shaderDefine(){return aa}get shaderPreludeCode(){return ei.projectionMercator}get vertexShaderPreludeCode(){return ei.projectionMercator.vertexSource}get subdivisionGranularity(){return o.aB.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(l){}getMeshFromTileID(l,c,_,w,K){if(this._cachedMesh)return this._cachedMesh;const N=new o.aC;N.emplaceBack(0,0),N.emplaceBack(o.X,0),N.emplaceBack(0,o.X),N.emplaceBack(o.X,o.X);const $=l.createVertexBuffer(N,ui.members),ee=o.aD.simpleSegment(0,0,4,2),ae=new o.aE;ae.emplaceBack(1,0,2),ae.emplaceBack(1,2,3);const xe=l.createIndexBuffer(ae);return this._cachedMesh=new nl($,xe,ee),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(l){}}function Rr(k,l){const c=o.ab(l.lat,-85.051129,o.aF);return new o.P(o.O(l.lng)*k,o.Q(c)*k)}function Yi(k,l){return new o.Y(l.x/k,l.y/k).toLngLat()}function yo(k){return k.cameraToCenterDistance*Math.min(.85*Math.tan(o.aa(90-k.pitch)),Math.tan(o.aa(89.25-k.pitch)))}function gu(k,l){const c=k.canonical,_=l/o.aG(c.z),w=c.x+Math.pow(2,c.z)*k.wrap,K=o.aq(new Float64Array(16));return o.J(K,K,[w*_,c.y*_,0]),o.K(K,K,[_/o.X,_/o.X,1]),K}function wo(k,l,c,_,w){const K=o.Y.fromLngLat(k,l),N=w*o.aH(1,k.lat),$=N*Math.cos(o.aa(c)),ee=Math.sqrt(N*N-$*$),ae=ee*Math.sin(o.aa(-_)),xe=ee*Math.cos(o.aa(-_));return new o.Y(K.x+ae,K.y+xe,K.z+$)}class Ws{constructor(l=0,c=0,_=0,w=0){if(isNaN(l)||l<0||isNaN(c)||c<0||isNaN(_)||_<0||isNaN(w)||w<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=l,this.bottom=c,this.left=_,this.right=w}interpolate(l,c,_){return c.top!=null&&l.top!=null&&(this.top=o.y.number(l.top,c.top,_)),c.bottom!=null&&l.bottom!=null&&(this.bottom=o.y.number(l.bottom,c.bottom,_)),c.left!=null&&l.left!=null&&(this.left=o.y.number(l.left,c.left,_)),c.right!=null&&l.right!=null&&(this.right=o.y.number(l.right,c.right,_)),this}getCenter(l,c){const _=o.ab((this.left+l-this.right)/2,0,l),w=o.ab((this.top+c-this.bottom)/2,0,c);return new o.P(_,w)}equals(l){return this.top===l.top&&this.bottom===l.bottom&&this.left===l.left&&this.right===l.right}clone(){return new Ws(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Gs(k,l){if(!k.renderWorldCopies||k.lngRange)return;const c=l.lng-k.center.lng;l.lng+=c>180?-360:c<-180?360:0}function Lu(k){return Math.max(0,Math.floor(k))}class _l{constructor(l,c,_,w,K,N){this._callbacks=l,this._tileSize=512,this._renderWorldCopies=N===void 0||!!N,this._minZoom=c||0,this._maxZoom=_||22,this._minPitch=w??0,this._maxPitch=K??60,this.setMaxBounds(),this._width=0,this._height=0,this._center=new o.N(0,0),this._elevation=0,this._zoom=0,this._tileZoom=Lu(this._zoom),this._scale=o.aG(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new Ws,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(l,c,_){this._latRange=l.latRange,this._lngRange=l.lngRange,this._width=l.width,this._height=l.height,this._center=l.center,this._elevation=l.elevation,this._minElevationForCurrentTile=l.minElevationForCurrentTile,this._zoom=l.zoom,this._tileZoom=Lu(this._zoom),this._scale=o.aG(this._zoom),this._bearingInRadians=l.bearingInRadians,this._fovInRadians=l.fovInRadians,this._pitchInRadians=l.pitchInRadians,this._rollInRadians=l.rollInRadians,this._unmodified=l.unmodified,this._edgeInsets=new Ws(l.padding.top,l.padding.bottom,l.padding.left,l.padding.right),this._minZoom=l.minZoom,this._maxZoom=l.maxZoom,this._minPitch=l.minPitch,this._maxPitch=l.maxPitch,this._renderWorldCopies=l.renderWorldCopies,this._cameraToCenterDistance=l.cameraToCenterDistance,this._nearZ=l.nearZ,this._farZ=l.farZ,this._autoCalculateNearFarZ=!_&&l.autoCalculateNearFarZ,c&&this._constrain(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(l){this._minElevationForCurrentTile=l}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(l){this._minZoom!==l&&(this._minZoom=l,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(l){this._maxZoom!==l&&(this._maxZoom=l,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(l){this._minPitch!==l&&(this._minPitch=l,this.setPitch(Math.max(this.pitch,l)))}get maxPitch(){return this._maxPitch}setMaxPitch(l){this._maxPitch!==l&&(this._maxPitch=l,this.setPitch(Math.min(this.pitch,l)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(l){l===void 0?l=!0:l===null&&(l=!1),this._renderWorldCopies=l}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new o.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(l){const c=o.aI(l,-180,180)*Math.PI/180;var _,w,K,N,$,ee,ae,xe,ke;this._bearingInRadians!==c&&(this._unmodified=!1,this._bearingInRadians=c,this._calcMatrices(),this._rotationMatrix=g(),_=this._rotationMatrix,K=-this._bearingInRadians,N=(w=this._rotationMatrix)[0],$=w[1],ee=w[2],ae=w[3],xe=Math.sin(K),ke=Math.cos(K),_[0]=N*ke+ee*xe,_[1]=$*ke+ae*xe,_[2]=N*-xe+ee*ke,_[3]=$*-xe+ae*ke)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(l){const c=o.ab(l,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==c&&(this._unmodified=!1,this._pitchInRadians=c,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(l){const c=l/180*Math.PI;this._rollInRadians!==c&&(this._unmodified=!1,this._rollInRadians=c,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return o.aJ(this._fovInRadians)}setFov(l){l=o.ab(l,.1,150),this.fov!==l&&(this._unmodified=!1,this._fovInRadians=o.aa(l),this._calcMatrices())}get zoom(){return this._zoom}setZoom(l){const c=this.getConstrained(this._center,l).zoom;this._zoom!==c&&(this._unmodified=!1,this._zoom=c,this._tileZoom=Math.max(0,Math.floor(c)),this._scale=o.aG(c),this._constrain(),this._calcMatrices())}get center(){return this._center}setCenter(l){l.lat===this._center.lat&&l.lng===this._center.lng||(this._unmodified=!1,this._center=l,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(l){l!==this._elevation&&(this._elevation=l,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(l){this._edgeInsets.equals(l)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,l,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(l,c){this._autoCalculateNearFarZ=!1,this._nearZ=l,this._farZ=c,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(l){return this._edgeInsets.equals(l)}interpolatePadding(l,c,_){this._unmodified=!1,this._edgeInsets.interpolate(l,c,_),this._constrain(),this._calcMatrices()}resize(l,c,_=!0){this._width=l,this._height=c,_&&this._constrain(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new Ut([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(l){l?(this._lngRange=[l.getWest(),l.getEast()],this._latRange=[l.getSouth(),l.getNorth()],this._constrain()):(this._lngRange=null,this._latRange=[-85.051129,o.aF])}getConstrained(l,c){return this._callbacks.getConstrained(l,c)}getCameraQueryGeometry(l,c){if(c.length===1)return[c[0],l];{let _=l.x,w=l.y,K=l.x,N=l.y;for(const $ of c)_=Math.min(_,$.x),w=Math.min(w,$.y),K=Math.max(K,$.x),N=Math.max(N,$.y);return[new o.P(_,w),new o.P(K,w),new o.P(K,N),new o.P(_,N),new o.P(_,w)]}}_constrain(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const l=this._unmodified,{center:c,zoom:_}=this.getConstrained(this.center,this.zoom);this.setCenter(c),this.setZoom(_),this._unmodified=l,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let l=o.aq(new Float64Array(16));o.K(l,l,[this._width/2,-this._height/2,1]),o.J(l,l,[1,-1,0]),this._clipSpaceToPixelsMatrix=l,l=o.aq(new Float64Array(16)),o.K(l,l,[1,-1,1]),o.J(l,l,[-1,-1,0]),o.K(l,l,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=l,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(l,c,_,w){const K=_!==void 0?_:this.bearing,N=w=w!==void 0?w:this.pitch,$=o.Y.fromLngLat(l,c),ee=-Math.cos(o.aa(N)),ae=Math.sin(o.aa(N)),xe=ae*Math.sin(o.aa(K)),ke=-ae*Math.cos(o.aa(K));let Ke=this.elevation;const $e=c-Ke;let Xe;ee*$e>=0||Math.abs(ee)<.1?(Xe=1e4,Ke=c+Xe*ee):Xe=-$e/ee;let pt,ut,mt=o.aK(1,$.y),vt=0;do{if(vt+=1,vt>10)break;ut=Xe/mt,pt=new o.Y($.x+xe*ut,$.y+ke*ut),mt=1/pt.meterInMercatorCoordinateUnits()}while(Math.abs(Xe-ut*mt)>1e-12);return{center:pt.toLngLat(),elevation:Ke,zoom:o.a8(this.height/2/Math.tan(this.fovInRadians/2)/ut/this.tileSize)}}recalculateZoomAndCenter(l){if(this.elevation-l==0)return;const c=o.aH(1,this.center.lat)*this.worldSize,_=this.cameraToCenterDistance/c,w=o.Y.fromLngLat(this.center,this.elevation),K=wo(this.center,this.elevation,this.pitch,this.bearing,_);this._elevation=l;const N=this.calculateCenterFromCameraLngLatAlt(K.toLngLat(),o.aK(K.z,w.y),this.bearing,this.pitch);this._elevation=N.elevation,this._center=N.center,this.setZoom(N.zoom)}getCameraPoint(){const l=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.P(l*Math.sin(this.rollInRadians),l*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const l=o.aH(1,this.center.lat)*this.worldSize;return wo(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/l).toLngLat()}getMercatorTileCoordinates(l){if(!l)return[0,0,1,1];const c=l.canonical.z>=0?1<<l.canonical.z:Math.pow(2,l.canonical.z);return[l.canonical.x/c,l.canonical.y/c,1/c/o.X,1/c/o.X]}}class Ao{constructor(l,c){this.min=l,this.max=c,this.center=o.aL([],o.aM([],this.min,this.max),.5)}quadrant(l){const c=[l%2==0,l<2],_=o.aN(this.min),w=o.aN(this.max);for(let K=0;K<c.length;K++)_[K]=c[K]?this.min[K]:this.center[K],w[K]=c[K]?this.center[K]:this.max[K];return w[2]=this.max[2],new Ao(_,w)}distanceX(l){return Math.max(Math.min(this.max[0],l[0]),this.min[0])-l[0]}distanceY(l){return Math.max(Math.min(this.max[1],l[1]),this.min[1])-l[1]}intersectsFrustum(l){let c=!0;for(let _=0;_<l.planes.length;_++){const w=this.intersectsPlane(l.planes[_]);if(w===0)return 0;w===1&&(c=!1)}return c?2:l.aabb.min[0]>this.max[0]||l.aabb.min[1]>this.max[1]||l.aabb.min[2]>this.max[2]||l.aabb.max[0]<this.min[0]||l.aabb.max[1]<this.min[1]||l.aabb.max[2]<this.min[2]?0:1}intersectsPlane(l){let c=l[3],_=l[3];for(let w=0;w<3;w++)l[w]>0?(c+=l[w]*this.min[w],_+=l[w]*this.max[w]):(_+=l[w]*this.min[w],c+=l[w]*this.max[w]);return c>=0?2:_<0?0:1}}class Bo{distanceToTile2d(l,c,_,w){const K=w.distanceX([l,c]),N=w.distanceY([l,c]);return Math.hypot(K,N)}getWrap(l,c,_){return _}getTileAABB(l,c,_,w){var K,N;let $=_,ee=_;if(w.terrain){const xe=new o.S(l.z,c,l.z,l.x,l.y),ke=w.terrain.getMinMaxElevation(xe);$=(K=ke.minElevation)!==null&&K!==void 0?K:_,ee=(N=ke.maxElevation)!==null&&N!==void 0?N:_}const ae=1<<l.z;return new Ao([c+l.x/ae,l.y/ae,$],[c+(l.x+1)/ae,(l.y+1)/ae,ee])}allowVariableZoom(l,c){const _=l.fov*(Math.abs(Math.cos(l.rollInRadians))*l.height+Math.abs(Math.sin(l.rollInRadians))*l.width)/l.height,w=o.ab(78.5-_/2,0,60);return!!c.terrain||l.pitch>w||l.padding.top>=.1}allowWorldCopies(){return!0}recalculateCache(){}}class Ho{constructor(l,c,_){this.points=l,this.planes=c,this.aabb=_}static fromInvProjectionMatrix(l,c=1,_=0){const w=Math.pow(2,_),K=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(ae=>{const xe=1/(ae=o.al([],ae,l))[3]/c*w;return o.aO(ae,ae,[xe,xe,1/ae[3],xe])}),N=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(ae=>{const xe=o.aP([],K[ae[0]],K[ae[1]]),ke=o.aP([],K[ae[2]],K[ae[1]]),Ke=o.aQ([],o.aR([],xe,ke)),$e=-o.aS(Ke,K[ae[1]]);return Ke.concat($e)}),$=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],ee=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const ae of K)for(let xe=0;xe<3;xe++)$[xe]=Math.min($[xe],ae[xe]),ee[xe]=Math.max(ee[xe],ae[xe]);return new Ho(K,N,new Ao($,ee))}}class Ba{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(l){this._helper.setMinZoom(l)}setMaxZoom(l){this._helper.setMaxZoom(l)}setMinPitch(l){this._helper.setMinPitch(l)}setMaxPitch(l){this._helper.setMaxPitch(l)}setRenderWorldCopies(l){this._helper.setRenderWorldCopies(l)}setBearing(l){this._helper.setBearing(l)}setPitch(l){this._helper.setPitch(l)}setRoll(l){this._helper.setRoll(l)}setFov(l){this._helper.setFov(l)}setZoom(l){this._helper.setZoom(l)}setCenter(l){this._helper.setCenter(l)}setElevation(l){this._helper.setElevation(l)}setMinElevationForCurrentTile(l){this._helper.setMinElevationForCurrentTile(l)}setPadding(l){this._helper.setPadding(l)}interpolatePadding(l,c,_){return this._helper.interpolatePadding(l,c,_)}isPaddingEqual(l){return this._helper.isPaddingEqual(l)}resize(l,c,_=!0){this._helper.resize(l,c,_)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(l){this._helper.setMaxBounds(l)}overrideNearFarZ(l,c){this._helper.overrideNearFarZ(l,c)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(l){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),l)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(l,c){}constructor(l,c,_,w,K){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this._helper=new _l({calcMatrices:()=>{this._calcMatrices()},getConstrained:(N,$)=>this.getConstrained(N,$)},l,c,_,w,K),this._coveringTilesDetailsProvider=new Bo}clone(){const l=new Ba;return l.apply(this),l}apply(l,c,_){this._helper.apply(l,c,_)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(l){const c=[new o.aT(0,l)];if(this._helper._renderWorldCopies){const _=this.screenPointToMercatorCoordinate(new o.P(0,0)),w=this.screenPointToMercatorCoordinate(new o.P(this._helper._width,0)),K=this.screenPointToMercatorCoordinate(new o.P(this._helper._width,this._helper._height)),N=this.screenPointToMercatorCoordinate(new o.P(0,this._helper._height)),$=Math.floor(Math.min(_.x,w.x,K.x,N.x)),ee=Math.floor(Math.max(_.x,w.x,K.x,N.x)),ae=1;for(let xe=$-ae;xe<=ee+ae;xe++)xe!==0&&c.push(new o.aT(xe,l))}return c}getCameraFrustum(){return Ho.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(l){const c=this.screenPointToLocation(this.centerPoint,l),_=l?l.getElevationForLngLatZoom(c,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(_)}setLocationAtPoint(l,c){const _=o.aH(this.elevation,this.center.lat),w=this.screenPointToMercatorCoordinateAtZ(c,_),K=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,_),N=o.Y.fromLngLat(l),$=new o.Y(N.x-(w.x-K.x),N.y-(w.y-K.y));this.setCenter($==null?void 0:$.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(l,c){return c?this.coordinatePoint(o.Y.fromLngLat(l),c.getElevationForLngLatZoom(l,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(o.Y.fromLngLat(l))}screenPointToLocation(l,c){var _;return(_=this.screenPointToMercatorCoordinate(l,c))===null||_===void 0?void 0:_.toLngLat()}screenPointToMercatorCoordinate(l,c){if(c){const _=c.pointCoordinate(l);if(_!=null)return _}return this.screenPointToMercatorCoordinateAtZ(l)}screenPointToMercatorCoordinateAtZ(l,c){const _=c||0,w=[l.x,l.y,0,1],K=[l.x,l.y,1,1];o.al(w,w,this._pixelMatrixInverse),o.al(K,K,this._pixelMatrixInverse);const N=w[3],$=K[3],ee=w[1]/N,ae=K[1]/$,xe=w[2]/N,ke=K[2]/$,Ke=xe===ke?0:(_-xe)/(ke-xe);return new o.Y(o.y.number(w[0]/N,K[0]/$,Ke)/this.worldSize,o.y.number(ee,ae,Ke)/this.worldSize,_)}coordinatePoint(l,c=0,_=this._pixelMatrix){const w=[l.x*this.worldSize,l.y*this.worldSize,c,1];return o.al(w,w,_),new o.P(w[0]/w[3],w[1]/w[3])}getBounds(){const l=Math.max(0,this._helper._height/2-yo(this));return new Ut().extend(this.screenPointToLocation(new o.P(0,l))).extend(this.screenPointToLocation(new o.P(this._helper._width,l))).extend(this.screenPointToLocation(new o.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new o.P(0,this._helper._height)))}isPointOnMapSurface(l,c){return c?c.pointCoordinate(l)!=null:l.y>this.height/2-yo(this)}calculatePosMatrix(l,c=!1,_){var w;const K=(w=l.key)!==null&&w!==void 0?w:o.aU(l.wrap,l.canonical.z,l.canonical.z,l.canonical.x,l.canonical.y),N=c?this._alignedPosMatrixCache:this._posMatrixCache;if(N.has(K)){const ae=N.get(K);return _?ae.f32:ae.f64}const $=gu(l,this.worldSize);o.L($,c?this._alignedProjMatrix:this._viewProjMatrix,$);const ee={f64:$,f32:new Float32Array($)};return N.set(K,ee),_?ee.f32:ee.f64}calculateFogMatrix(l){const c=l.key,_=this._fogMatrixCacheF32;if(_.has(c))return _.get(c);const w=gu(l,this.worldSize);return o.L(w,this._fogMatrix,w),_.set(c,new Float32Array(w)),_.get(c)}getConstrained(l,c){c=o.ab(+c,this.minZoom,this.maxZoom);const _={center:new o.N(l.lng,l.lat),zoom:c};let w=this._helper._lngRange;this._helper._renderWorldCopies||w!==null||(w=[-179.9999999999,180-1e-10]);const K=this.tileSize*o.aG(_.zoom);let N=0,$=K,ee=0,ae=K,xe=0,ke=0;const{x:Ke,y:$e}=this.size;if(this._helper._latRange){const Bt=this._helper._latRange;N=o.Q(Bt[1])*K,$=o.Q(Bt[0])*K,$-N<$e&&(xe=$e/($-N))}w&&(ee=o.aI(o.O(w[0])*K,0,K),ae=o.aI(o.O(w[1])*K,0,K),ae<ee&&(ae+=K),ae-ee<Ke&&(ke=Ke/(ae-ee)));const{x:Xe,y:pt}=Rr(K,l);let ut,mt;const vt=Math.max(ke||0,xe||0);if(vt){const Bt=new o.P(ke?(ae+ee)/2:Xe,xe?($+N)/2:pt);return _.center=Yi(K,Bt).wrap(),_.zoom+=o.a8(vt),_}if(this._helper._latRange){const Bt=$e/2;pt-Bt<N&&(mt=N+Bt),pt+Bt>$&&(mt=$-Bt)}if(w){const Bt=(ee+ae)/2;let kt=Xe;this._helper._renderWorldCopies&&(kt=o.aI(Xe,Bt-K/2,Bt+K/2));const Rt=Ke/2;kt-Rt<ee&&(ut=ee+Rt),kt+Rt>ae&&(ut=ae-Rt)}if(ut!==void 0||mt!==void 0){const Bt=new o.P(ut??Xe,mt??pt);_.center=Yi(K,Bt).wrap()}return _}calculateCenterFromCameraLngLatAlt(l,c,_,w){return this._helper.calculateCenterFromCameraLngLatAlt(l,c,_,w)}_calculateNearFarZIfNeeded(l,c,_){if(!this._helper.autoCalculateNearFarZ)return;const w=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),K=l-w*this._helper._pixelPerMeter/Math.cos(c),N=w<0?K:l,$=Math.PI/2+this.pitchInRadians,ee=o.aa(this.fov)*(Math.abs(Math.cos(o.aa(this.roll)))*this.height+Math.abs(Math.sin(o.aa(this.roll)))*this.width)/this.height*(.5+_.y/this.height),ae=Math.sin(ee)*N/Math.sin(o.ab(Math.PI-$-ee,.01,Math.PI-.01)),xe=yo(this),ke=Math.atan(xe/this._helper.cameraToCenterDistance),Ke=o.aa(.75),$e=ke>Ke?2*ke*(.5+_.y/(2*xe)):Ke,Xe=Math.sin($e)*N/Math.sin(o.ab(Math.PI-$-$e,.01,Math.PI-.01)),pt=Math.min(ae,Xe);this._helper._farZ=1.01*(Math.cos(Math.PI/2-c)*pt+N),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const l=this.centerOffset,c=Rr(this.worldSize,this.center),_=c.x,w=c.y;this._helper._pixelPerMeter=o.aH(1,this.center.lat)*this.worldSize;const K=o.aa(Math.min(this.pitch,89.25)),N=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(K));let $;this._calculateNearFarZIfNeeded(N,K,l),$=new Float64Array(16),o.aV($,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),o.an(this._invProjMatrix,$),$[8]=2*-l.x/this._helper._width,$[9]=2*l.y/this._helper._height,this._projectionMatrix=o.aW($),o.K($,$,[1,-1,1]),o.J($,$,[0,0,-this._helper.cameraToCenterDistance]),o.aX($,$,-this.rollInRadians),o.aY($,$,this.pitchInRadians),o.aX($,$,-this.bearingInRadians),o.J($,$,[-_,-w,0]),this._mercatorMatrix=o.K([],$,[this.worldSize,this.worldSize,this.worldSize]),o.K($,$,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=o.L(new Float64Array(16),this.clipSpaceToPixelsMatrix,$),o.J($,$,[0,0,-this.elevation]),this._viewProjMatrix=$,this._invViewProjMatrix=o.an([],$);const ee=[0,0,-1,1];o.al(ee,ee,this._invViewProjMatrix),this._cameraPosition=[ee[0]/ee[3],ee[1]/ee[3],ee[2]/ee[3]],this._fogMatrix=new Float64Array(16),o.aV(this._fogMatrix,this.fovInRadians,this.width/this.height,N,this._helper._farZ),this._fogMatrix[8]=2*-l.x/this.width,this._fogMatrix[9]=2*l.y/this.height,o.K(this._fogMatrix,this._fogMatrix,[1,-1,1]),o.J(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),o.aX(this._fogMatrix,this._fogMatrix,-this.rollInRadians),o.aY(this._fogMatrix,this._fogMatrix,this.pitchInRadians),o.aX(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),o.J(this._fogMatrix,this._fogMatrix,[-_,-w,0]),o.K(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),o.J(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=o.L(new Float64Array(16),this.clipSpaceToPixelsMatrix,$);const ae=this._helper._width%2/2,xe=this._helper._height%2/2,ke=Math.cos(this.bearingInRadians),Ke=Math.sin(-this.bearingInRadians),$e=_-Math.round(_)+ke*ae+Ke*xe,Xe=w-Math.round(w)+ke*xe+Ke*ae,pt=new Float64Array($);if(o.J(pt,pt,[$e>.5?$e-1:$e,Xe>.5?Xe-1:Xe,0]),this._alignedProjMatrix=pt,$=o.an(new Float64Array(16),this._pixelMatrix),!$)throw new Error("failed to invert matrix");this._pixelMatrixInverse=$,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const l=this.screenPointToMercatorCoordinate(new o.P(0,0)),c=[l.x*this.worldSize,l.y*this.worldSize,0,1];return o.al(c,c,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const l=o.aH(1,this.center.lat)*this.worldSize;return wo(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/l).toLngLat()}lngLatToCameraDepth(l,c){const _=o.Y.fromLngLat(l),w=[_.x*this.worldSize,_.y*this.worldSize,c,1];return o.al(w,w,this._viewProjMatrix),w[2]/w[3]}getProjectionData(l){const{overscaledTileID:c,aligned:_,applyTerrainMatrix:w}=l,K=this._helper.getMercatorTileCoordinates(c),N=c?this.calculatePosMatrix(c,_,!0):null;let $;return $=c&&c.terrainRttPosMatrix32f&&w?c.terrainRttPosMatrix32f:N||o.aZ(),{mainMatrix:$,tileMercatorCoords:K,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:$}}isLocationOccluded(l){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(l,c,_){return 1}transformLightDirection(l){return o.aN(l)}getRayDirectionFromPixel(l){throw new Error("Not implemented.")}projectTileCoordinates(l,c,_,w){const K=this.calculatePosMatrix(_);let N;w?(N=[l,c,w(l,c),1],o.al(N,N,K)):(N=[l,c,0,1],vi(N,N,K));const $=N[3];return{point:new o.P(N[0]/$,N[1]/$),signedDistanceFromCamera:$,isOccluded:!1}}populateCache(l){for(const c of l)this.calculatePosMatrix(c)}getMatrixForModel(l,c){const _=o.Y.fromLngLat(l,c),w=_.meterInMercatorCoordinateUnits(),K=o.a_();return o.J(K,K,[_.x,_.y,_.z]),o.aX(K,K,Math.PI),o.aY(K,K,Math.PI/2),o.K(K,K,[-w,w,w]),K}getProjectionDataForCustomLayer(l=!0){const c=new o.S(0,0,0,0,0),_=this.getProjectionData({overscaledTileID:c,applyGlobeMatrix:l}),w=gu(c,this.worldSize);o.L(w,this._viewProjMatrix,w),_.tileMercatorCoords=[0,0,1,1];const K=[o.X,o.X,this.worldSize/this._helper.pixelsPerMeter],N=o.a$();return o.K(N,w,K),_.fallbackMatrix=N,_.mainMatrix=N,_}getFastPathSimpleProjectionMatrix(l){return this.calculatePosMatrix(l)}}function Ms(){o.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function Oa(k){if(k.useSlerp)if(k.k<1){const l=o.b0(k.startEulerAngles.roll,k.startEulerAngles.pitch,k.startEulerAngles.bearing),c=o.b0(k.endEulerAngles.roll,k.endEulerAngles.pitch,k.endEulerAngles.bearing),_=new Float64Array(4);o.b1(_,l,c,k.k);const w=o.b2(_);k.tr.setRoll(w.roll),k.tr.setPitch(w.pitch),k.tr.setBearing(w.bearing)}else k.tr.setRoll(k.endEulerAngles.roll),k.tr.setPitch(k.endEulerAngles.pitch),k.tr.setBearing(k.endEulerAngles.bearing);else k.tr.setRoll(o.y.number(k.startEulerAngles.roll,k.endEulerAngles.roll,k.k)),k.tr.setPitch(o.y.number(k.startEulerAngles.pitch,k.endEulerAngles.pitch,k.k)),k.tr.setBearing(o.y.number(k.startEulerAngles.bearing,k.endEulerAngles.bearing,k.k))}function ea(k,l,c,_,w){const K=w.padding,N=Rr(w.worldSize,c.getNorthWest()),$=Rr(w.worldSize,c.getNorthEast()),ee=Rr(w.worldSize,c.getSouthEast()),ae=Rr(w.worldSize,c.getSouthWest()),xe=o.aa(-_),ke=N.rotate(xe),Ke=$.rotate(xe),$e=ee.rotate(xe),Xe=ae.rotate(xe),pt=new o.P(Math.max(ke.x,Ke.x,Xe.x,$e.x),Math.max(ke.y,Ke.y,Xe.y,$e.y)),ut=new o.P(Math.min(ke.x,Ke.x,Xe.x,$e.x),Math.min(ke.y,Ke.y,Xe.y,$e.y)),mt=pt.sub(ut),vt=(w.width-(K.left+K.right+l.left+l.right))/mt.x,Bt=(w.height-(K.top+K.bottom+l.top+l.bottom))/mt.y;if(Bt<0||vt<0)return void Ms();const kt=Math.min(o.a8(w.scale*Math.min(vt,Bt)),k.maxZoom),Rt=o.P.convert(k.offset),zt=new o.P((l.left-l.right)/2,(l.top-l.bottom)/2).rotate(o.aa(_)),Tt=Rt.add(zt).mult(w.scale/o.aG(kt));return{center:Yi(w.worldSize,N.add(ee).div(2).sub(Tt)),zoom:kt,bearing:_}}class EA{get useGlobeControls(){return!1}handlePanInertia(l,c){return{easingOffset:l,easingCenter:c.center}}handleMapControlsRollPitchBearingZoom(l,c){l.bearingDelta&&c.setBearing(c.bearing+l.bearingDelta),l.pitchDelta&&c.setPitch(c.pitch+l.pitchDelta),l.rollDelta&&c.setRoll(c.roll+l.rollDelta),l.zoomDelta&&c.setZoom(c.zoom+l.zoomDelta)}handleMapControlsPan(l,c,_){l.around.distSqr(c.centerPoint)<.01||c.setLocationAtPoint(_,l.around)}cameraForBoxAndBearing(l,c,_,w,K){return ea(l,c,_,w,K)}handleJumpToCenterZoom(l,c){l.zoom!==(c.zoom!==void 0?+c.zoom:l.zoom)&&l.setZoom(+c.zoom),c.center!==void 0&&l.setCenter(o.N.convert(c.center))}handleEaseTo(l,c){const _=l.zoom,w=l.padding,K={roll:l.roll,pitch:l.pitch,bearing:l.bearing},N={roll:c.roll===void 0?l.roll:c.roll,pitch:c.pitch===void 0?l.pitch:c.pitch,bearing:c.bearing===void 0?l.bearing:c.bearing},$=c.zoom!==void 0,ee=!l.isPaddingEqual(c.padding);let ae=!1;const xe=$?+c.zoom:l.zoom;let ke=l.centerPoint.add(c.offsetAsPoint);const Ke=l.screenPointToLocation(ke),{center:$e,zoom:Xe}=l.getConstrained(o.N.convert(c.center||Ke),xe??_);Gs(l,$e);const pt=Rr(l.worldSize,Ke),ut=Rr(l.worldSize,$e).sub(pt),mt=o.aG(Xe-_);return ae=Xe!==_,{easeFunc:vt=>{if(ae&&l.setZoom(o.y.number(_,Xe,vt)),o.b3(K,N)||Oa({startEulerAngles:K,endEulerAngles:N,tr:l,k:vt,useSlerp:K.roll!=N.roll}),ee&&(l.interpolatePadding(w,c.padding,vt),ke=l.centerPoint.add(c.offsetAsPoint)),c.around)l.setLocationAtPoint(c.around,c.aroundPoint);else{const Bt=o.aG(l.zoom-_),kt=Xe>_?Math.min(2,mt):Math.max(.5,mt),Rt=Math.pow(kt,1-vt),zt=Yi(l.worldSize,pt.add(ut.mult(vt*Rt)).mult(Bt));l.setLocationAtPoint(l.renderWorldCopies?zt.wrap():zt,ke)}},isZooming:ae,elevationCenter:$e}}handleFlyTo(l,c){const _=c.zoom!==void 0,w=l.zoom,K=l.getConstrained(o.N.convert(c.center||c.locationAtOffset),_?+c.zoom:w),N=K.center,$=K.zoom;Gs(l,N);const ee=Rr(l.worldSize,c.locationAtOffset),ae=Rr(l.worldSize,N).sub(ee),xe=ae.mag(),ke=o.aG($-w);let Ke;if(c.minZoom!==void 0){const $e=Math.min(+c.minZoom,w,$),Xe=l.getConstrained(N,$e).zoom;Ke=o.aG(Xe-w)}return{easeFunc:($e,Xe,pt,ut)=>{l.setZoom($e===1?$:w+o.a8(Xe));const mt=$e===1?N:Yi(l.worldSize,ee.add(ae.mult(pt)).mult(Xe));l.setLocationAtPoint(l.renderWorldCopies?mt.wrap():mt,ut)},scaleOfZoom:ke,targetCenter:N,scaleOfMinZoom:Ke,pixelPathLength:xe}}}class co{constructor(l,c,_){this.blendFunction=l,this.blendColor=c,this.mask=_}}co.Replace=[1,0],co.disabled=new co(co.Replace,o.b4.transparent,[!1,!1,!1,!1]),co.unblended=new co(co.Replace,o.b4.transparent,[!0,!0,!0,!0]),co.alphaBlended=new co([1,771],o.b4.transparent,[!0,!0,!0,!0]);const Zl=2305;class Ui{constructor(l,c,_){this.enable=l,this.mode=c,this.frontFace=_}}Ui.disabled=new Ui(!1,1029,Zl),Ui.backCCW=new Ui(!0,1029,Zl),Ui.frontCCW=new Ui(!0,1028,Zl);class Yr{constructor(l,c,_){this.func=l,this.mask=c,this.range=_}}Yr.ReadOnly=!1,Yr.ReadWrite=!0,Yr.disabled=new Yr(519,Yr.ReadOnly,[0,1]);const Xl=7680;class $i{constructor(l,c,_,w,K,N){this.test=l,this.ref=c,this.mask=_,this.fail=w,this.depthFail=K,this.pass=N}}$i.disabled=new $i({func:519,mask:0},0,0,Xl,Xl,Xl);const so=new WeakMap;function Ki(k){var l;if(so.has(k))return so.get(k);{const c=(l=k.getParameter(k.VERSION))===null||l===void 0?void 0:l.startsWith("WebGL 2.0");return so.set(k,c),c}}class J{get awaitingQuery(){return!!this._readbackQueue}constructor(l){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=l;const c=l.context,_=c.gl;this._texFormat=_.RGBA,this._texType=_.UNSIGNED_BYTE;const w=new o.aC;w.emplaceBack(-1,-1),w.emplaceBack(2,-1),w.emplaceBack(-1,2);const K=new o.aE;K.emplaceBack(0,1,2),this._fullscreenTriangle=new nl(c.createVertexBuffer(w,ui.members),c.createIndexBuffer(K),o.aD.simpleSegment(0,0,w.length,K.length)),this._resultBuffer=new Uint8Array(4),c.activeTexture.set(_.TEXTURE1);const N=_.createTexture();_.bindTexture(_.TEXTURE_2D,N),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,_.NEAREST),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,_.NEAREST),_.texImage2D(_.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=c.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(N),Ki(_)&&(this._pbo=_.createBuffer(),_.bindBuffer(_.PIXEL_PACK_BUFFER,this._pbo),_.bufferData(_.PIXEL_PACK_BUFFER,4,_.STREAM_READ),_.bindBuffer(_.PIXEL_PACK_BUFFER,null))}destroy(){const l=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),l.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(l,c){const _=this._updateCount;return this._readbackQueue?_>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():_>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(l,c),this._updateCount++,this._measuredError}_bindFramebuffer(){const l=this._cachedRenderContext.context,c=l.gl;l.activeTexture.set(c.TEXTURE1),c.bindTexture(c.TEXTURE_2D,this._fbo.colorAttachment.get()),l.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(l,c){const _=this._cachedRenderContext.context,w=_.gl;if(this._bindFramebuffer(),_.viewport.set([0,0,this._texWidth,this._texHeight]),_.clear({color:o.b4.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(_,w.TRIANGLES,Yr.disabled,$i.disabled,co.unblended,Ui.disabled,((K,N)=>({u_input:K,u_output_expected:N}))(l,c),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&Ki(w)){w.bindBuffer(w.PIXEL_PACK_BUFFER,this._pbo),w.readBuffer(w.COLOR_ATTACHMENT0),w.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),w.bindBuffer(w.PIXEL_PACK_BUFFER,null);const K=w.fenceSync(w.SYNC_GPU_COMMANDS_COMPLETE,0);w.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:K}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const l=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&Ki(l)){const c=l.clientWaitSync(this._readbackQueue.sync,0,0);if(c===l.WAIT_FAILED)return o.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(c===l.TIMEOUT_EXPIRED)return;l.bindBuffer(l.PIXEL_PACK_BUFFER,this._pbo),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),l.bindBuffer(l.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),l.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=J._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(l){let c=0;return c+=l[0]/256,c+=l[1]/65536,c+=l[2]/16777216,l[3]<127&&(c=-c),c/128}}const Ie=o.X/128;function st(k,l){const c=k.granularity!==void 0?Math.max(k.granularity,1):1,_=c+(k.generateBorders?2:0),w=c+(k.extendToNorthPole||k.generateBorders?1:0)+(k.extendToSouthPole||k.generateBorders?1:0),K=_+1,N=w+1,$=k.generateBorders?-1:0,ee=k.generateBorders||k.extendToNorthPole?-1:0,ae=c+(k.generateBorders?1:0),xe=c+(k.generateBorders||k.extendToSouthPole?1:0),ke=K*N,Ke=_*w*6,$e=K*N>65536;if($e&&l==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const Xe=$e||l==="32bit",pt=new Int16Array(2*ke);let ut=0;for(let Bt=ee;Bt<=xe;Bt++)for(let kt=$;kt<=ae;kt++){let Rt=kt/c*o.X;kt===-1&&(Rt=-64),kt===c+1&&(Rt=o.X+Ie);let zt=Bt/c*o.X;Bt===-1&&(zt=k.extendToNorthPole?o.b6:-64),Bt===c+1&&(zt=k.extendToSouthPole?o.b7:o.X+Ie),pt[ut++]=Rt,pt[ut++]=zt}const mt=Xe?new Uint32Array(Ke):new Uint16Array(Ke);let vt=0;for(let Bt=0;Bt<w;Bt++)for(let kt=0;kt<_;kt++){const Rt=kt+1+Bt*K,zt=kt+(Bt+1)*K,Tt=kt+1+(Bt+1)*K;mt[vt++]=kt+Bt*K,mt[vt++]=zt,mt[vt++]=Rt,mt[vt++]=Rt,mt[vt++]=zt,mt[vt++]=Tt}return{vertices:pt.buffer.slice(0),indices:mt.buffer.slice(0),uses32bitIndices:Xe}}const $t=new o.aB({fill:new o.b8(128,2),line:new o.b8(512,0),tile:new o.b8(128,32),stencil:new o.b8(128,1),circle:3});class Kr{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return ei.projectionGlobe}get vertexShaderPreludeCode(){return ei.projectionMercator.vertexSource}get subdivisionGranularity(){return $t}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(l){this._errorMeasurement||(this._errorMeasurement=new J(l));const c=o.Q(this._errorQueryLatitudeDegrees),_=2*Math.atan(Math.exp(Math.PI-c*Math.PI*2))-.5*Math.PI,w=this._errorMeasurement.updateErrorLoop(c,_),K=S.now();w!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=w,this._errorMeasurementLastChangeTime=K);const N=Math.min(Math.max((K-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=o.b9(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,o.ba(N))}_getMeshKey(l){return`${l.granularity.toString(36)}_${l.generateBorders?"b":""}${l.extendToNorthPole?"n":""}${l.extendToSouthPole?"s":""}`}getMeshFromTileID(l,c,_,w,K){const N=(K==="stencil"?$t.stencil:$t.tile).getGranularityForZoomLevel(c.z);return this._getMesh(l,{granularity:N,generateBorders:_,extendToNorthPole:c.y===0&&w,extendToSouthPole:c.y===(1<<c.z)-1&&w})}_getMesh(l,c){const _=this._getMeshKey(c);if(_ in this._tileMeshCache)return this._tileMeshCache[_];const w=function(K,N){const $=st(N,"16bit"),ee=o.aC.deserialize({arrayBuffer:$.vertices,length:$.vertices.byteLength/2/2}),ae=o.aE.deserialize({arrayBuffer:$.indices,length:$.indices.byteLength/2/3});return new nl(K.createVertexBuffer(ee,ui.members),K.createIndexBuffer(ae),o.aD.simpleSegment(0,0,ee.length,ae.length))}(l,c);return this._tileMeshCache[_]=w,w}recalculate(l){}hasTransition(){const l=S.now();let c=!1;return c=c||(l-this._errorMeasurementLastChangeTime)/1e3<.7,c=c||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,c}setErrorQueryLatitudeDegrees(l){this._errorQueryLatitudeDegrees=l}}const $n=new o.q({type:new o.D(o.v.projection.type)});class ti extends o.E{constructor(l){super(),this._transitionable=new o.T($n),this.setProjection(l),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new o.z(0)),this._mercatorProjection=new Ea,this._verticalPerspectiveProjection=new Kr}get transitionState(){const l=this.properties.get("type");if(typeof l=="string"&&l==="mercator")return 0;if(typeof l=="string"&&l==="vertical-perspective")return 1;if(l instanceof o.bb){if(l.from==="vertical-perspective"&&l.to==="mercator")return 1-l.transition;if(l.from==="mercator"&&l.to==="vertical-perspective")return l.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(l){this._mercatorProjection.updateGPUdependent(l),this._verticalPerspectiveProjection.updateGPUdependent(l)}getMeshFromTileID(l,c,_,w,K){return this.currentProjection.getMeshFromTileID(l,c,_,w,K)}setProjection(l){this._transitionable.setValue("type",(l==null?void 0:l.type)||"mercator")}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}setErrorQueryLatitudeDegrees(l){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(l),this._mercatorProjection.setErrorQueryLatitudeDegrees(l)}}function Ai(k){const l=zi(k.worldSize,k.center.lat);return 2*Math.PI*l}function Br(k,l,c,_,w){const K=1/(1<<w),N=l/o.X*K+_*K,$=o.bd((k/o.X*K+c*K)*Math.PI*2+Math.PI,2*Math.PI),ee=2*Math.atan(Math.exp(Math.PI-N*Math.PI*2))-.5*Math.PI,ae=Math.cos(ee),xe=new Float64Array(3);return xe[0]=Math.sin($)*ae,xe[1]=Math.sin(ee),xe[2]=Math.cos($)*ae,xe}function xr(k){return function(l,c){const _=Math.cos(c),w=new Float64Array(3);return w[0]=Math.sin(l)*_,w[1]=Math.sin(c),w[2]=Math.cos(l)*_,w}(k.lng*Math.PI/180,k.lat*Math.PI/180)}function zi(k,l){return k/(2*Math.PI)/Math.cos(l*Math.PI/180)}function Zi(k){const l=Math.asin(k[1])/Math.PI*180,c=Math.sqrt(k[0]*k[0]+k[2]*k[2]);if(c>1e-6){const _=k[0]/c,w=Math.acos(k[2]/c),K=(_>0?w:-w)/Math.PI*180;return new o.N(o.aI(K,-180,180),l)}return new o.N(0,l)}function Si(k){return Math.cos(k*Math.PI/180)}function Wr(k,l){const c=Si(k),_=Si(l);return o.a8(_/c)}function Mo(k,l){const c=k.rotate(l.bearingInRadians),_=l.zoom+Wr(l.center.lat,0),w=o.b9(1/Si(l.center.lat),1/Si(Math.min(Math.abs(l.center.lat),60)),o.bc(_,7,3,0,1)),K=360/Ai({worldSize:l.worldSize,center:{lat:l.center.lat}});return new o.N(l.center.lng-c.x*K*w,o.ab(l.center.lat+c.y*K,-85.051129,o.aF))}function Di(k){const l=.5*k,c=Math.sin(l),_=Math.cos(l);return Math.log(c+_)-Math.log(_-c)}function cs(k,l,c,_){const w=k.lat+c*_;if(Math.abs(c)>1){const K=(Math.sign(k.lat+c)!==Math.sign(k.lat)?-Math.abs(k.lat):Math.abs(k.lat))*Math.PI/180,N=Math.abs(k.lat+c)*Math.PI/180,$=Di(K+_*(N-K)),ee=Di(K),ae=Di(N);return new o.N(k.lng+l*(($-ee)/(ae-ee)),w)}return new o.N(k.lng+l*_,w)}class pa{constructor(l){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._aabbFactory=l}recalculateCache(){if(!this._hadAnyChanges)return;const l=this._cachePrevious;this._cachePrevious=this._cache,this._cache=l,this._cache.clear(),this._hadAnyChanges=!1}getTileAABB(l,c,_,w){const K=`${l.z}_${l.x}_${l.y}`,N=this._cache.get(K);if(N)return N;const $=this._cachePrevious.get(K);if($)return this._cache.set(K,$),$;const ee=this._aabbFactory(l,c,_,w);return this._cache.set(K,ee),this._hadAnyChanges=!0,ee}}function Na(k,l,c){const _=k-l;return _<0?-_:Math.max(0,_-c)}function yu(k,l,c,_,w){const K=k-c;let N;return N=K<0?Math.min(-K,1+K-w):K>1?Math.min(Math.max(K-w,0),1-K):0,Math.max(N,Na(l,_,w))}class Qs{constructor(){this._aabbCache=new pa(this._computeTileAABB)}recalculateCache(){this._aabbCache.recalculateCache()}distanceToTile2d(l,c,_,w){const K=1<<_.z,N=1/K,$=_.x/K,ee=_.y/K;let ae=2;return ae=Math.min(ae,yu(l,c,$,ee,N)),ae=Math.min(ae,yu(l,c,$+.5,-ee-N,N)),ae=Math.min(ae,yu(l,c,$+.5,2-ee-N,N)),ae}getWrap(l,c,_){const w=1<<c.z,K=1/w,N=c.x/w,$=Na(l.x,N,K),ee=Na(l.x,N-1,K),ae=Na(l.x,N+1,K),xe=Math.min($,ee,ae);return xe===ae?1:xe===ee?-1:0}allowVariableZoom(l,c){return tr(l,c)>4}allowWorldCopies(){return!1}getTileAABB(l,c,_,w){return this._aabbCache.getTileAABB(l,c,_,w)}_computeTileAABB(l,c,_,w){if(l.z<=0)return new Ao([-1,-1,-1],[1,1,1]);if(l.z===1)return new Ao([l.x===0?-1:0,l.y===0?0:-1,-1],[l.x===0?0:1,l.y===0?1:0,1]);{const K=[Br(0,0,l.x,l.y,l.z),Br(o.X,0,l.x,l.y,l.z),Br(o.X,o.X,l.x,l.y,l.z),Br(0,o.X,l.x,l.y,l.z)],N=[1,1,1],$=[-1,-1,-1];for(const ee of K)for(let ae=0;ae<3;ae++)N[ae]=Math.min(N[ae],ee[ae]),$[ae]=Math.max($[ae],ee[ae]);if(l.y===0||l.y===(1<<l.z)-1){const ee=[0,l.y===0?1:-1,0];for(let ae=0;ae<3;ae++)N[ae]=Math.min(N[ae],ee[ae]),$[ae]=Math.max($[ae],ee[ae])}return new Ao(N,$)}}}class Nd{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(l){this._helper.setMinZoom(l)}setMaxZoom(l){this._helper.setMaxZoom(l)}setMinPitch(l){this._helper.setMinPitch(l)}setMaxPitch(l){this._helper.setMaxPitch(l)}setRenderWorldCopies(l){this._helper.setRenderWorldCopies(l)}setBearing(l){this._helper.setBearing(l)}setPitch(l){this._helper.setPitch(l)}setRoll(l){this._helper.setRoll(l)}setFov(l){this._helper.setFov(l)}setZoom(l){this._helper.setZoom(l)}setCenter(l){this._helper.setCenter(l)}setElevation(l){this._helper.setElevation(l)}setMinElevationForCurrentTile(l){this._helper.setMinElevationForCurrentTile(l)}setPadding(l){this._helper.setPadding(l)}interpolatePadding(l,c,_){return this._helper.interpolatePadding(l,c,_)}isPaddingEqual(l){return this._helper.isPaddingEqual(l)}resize(l,c){this._helper.resize(l,c)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(l){this._helper.setMaxBounds(l)}overrideNearFarZ(l,c){this._helper.overrideNearFarZ(l,c)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(l){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),l)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(l){}constructor(){this._cachedClippingPlane=o.be(),this._projectionMatrix=o.a_(),this._globeViewProjMatrix32f=o.aZ(),this._globeViewProjMatrixNoCorrection=o.a_(),this._globeViewProjMatrixNoCorrectionInverted=o.a_(),this._globeProjMatrixInverted=o.a_(),this._cameraPosition=o.bf(),this._globeLatitudeErrorCorrectionRadians=0,this._helper=new _l({calcMatrices:()=>{this._calcMatrices()},getConstrained:(l,c)=>this.getConstrained(l,c)}),this._coveringTilesDetailsProvider=new Qs}clone(){const l=new Nd;return l.apply(this),l}apply(l,c){this._globeLatitudeErrorCorrectionRadians=c||0,this._helper.apply(l)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const l=o.bf();return l[0]=this._cameraPosition[0],l[1]=this._cameraPosition[1],l[2]=this._cameraPosition[2],l}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(l){const{overscaledTileID:c,applyGlobeMatrix:_}=l,w=this._helper.getMercatorTileCoordinates(c);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:w,clippingPlane:this._cachedClippingPlane,projectionTransition:_?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(l){const c=this.pitchInRadians,_=this.cameraToCenterDistance/l,w=Math.sin(c)*_,K=Math.cos(c)*_+1,N=1/Math.sqrt(w*w+K*K)*1;let $=-w,ee=K;const ae=Math.sqrt($*$+ee*ee);$/=ae,ee/=ae;const xe=[0,$,ee];return o.bg(xe,xe,[0,0,0],-this.bearingInRadians),o.bh(xe,xe,[0,0,0],-1*this.center.lat*Math.PI/180),o.bi(xe,xe,[0,0,0],this.center.lng*Math.PI/180),o.aL(xe,xe,.25),[...xe,.25*-N]}isLocationOccluded(l){return!this.isSurfacePointVisible(xr(l))}transformLightDirection(l){const c=this._helper._center.lng*Math.PI/180,_=this._helper._center.lat*Math.PI/180,w=Math.cos(_),K=[Math.sin(c)*w,Math.sin(_),Math.cos(c)*w],N=[K[2],0,-K[0]],$=[0,0,0];o.aR($,N,K),o.aQ(N,N),o.aQ($,$);const ee=[0,0,0];return o.aQ(ee,[N[0]*l[0]+$[0]*l[1]+K[0]*l[2],N[1]*l[0]+$[1]*l[1]+K[1]*l[2],N[2]*l[0]+$[2]*l[1]+K[2]*l[2]]),ee}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(l,c,_){const w=function($,ee,ae){const xe=1/(1<<ae.z);return new o.Y($/o.X*xe+ae.x*xe,ee/o.X*xe+ae.y*xe)}(l,c,_.canonical),K=(N=w.y,[o.bd(w.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-N*Math.PI*2))-.5*Math.PI]);var N;return this.getCircleRadiusCorrection()/Math.cos(K[1])}projectTileCoordinates(l,c,_,w){const K=_.canonical,N=Br(l,c,K.x,K.y,K.z),$=1+(w?w(l,c):0)/o.bo,ee=[N[0]*$,N[1]*$,N[2]*$,1];o.al(ee,ee,this._globeViewProjMatrixNoCorrection);const ae=this._cachedClippingPlane,xe=ae[0]*N[0]+ae[1]*N[1]+ae[2]*N[2]+ae[3]<0;return{point:new o.P(ee[0]/ee[3],ee[1]/ee[3]),signedDistanceFromCamera:ee[3],isOccluded:xe}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const l=zi(this.worldSize,this.center.lat),c=o.a$(),_=o.a$();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*l),o.aV(c,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const w=this.centerOffset;c[8]=2*-w.x/this._helper._width,c[9]=2*w.y/this._helper._height,this._projectionMatrix=o.aW(c),this._globeProjMatrixInverted=o.a$(),o.an(this._globeProjMatrixInverted,c),o.J(c,c,[0,0,-this.cameraToCenterDistance]),o.aX(c,c,this.rollInRadians),o.aY(c,c,-this.pitchInRadians),o.aX(c,c,this.bearingInRadians),o.J(c,c,[0,0,-l]);const K=o.bf();K[0]=l,K[1]=l,K[2]=l,o.aY(_,c,this.center.lat*Math.PI/180),o.bj(_,_,-this.center.lng*Math.PI/180),o.K(_,_,K),this._globeViewProjMatrixNoCorrection=_,o.aY(c,c,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),o.bj(c,c,-this.center.lng*Math.PI/180),o.K(c,c,K),this._globeViewProjMatrix32f=new Float32Array(c),this._globeViewProjMatrixNoCorrectionInverted=o.a$(),o.an(this._globeViewProjMatrixNoCorrectionInverted,_);const N=o.bf();this._cameraPosition=o.bf(),this._cameraPosition[2]=this.cameraToCenterDistance/l,o.bg(this._cameraPosition,this._cameraPosition,N,-this.rollInRadians),o.bh(this._cameraPosition,this._cameraPosition,N,this.pitchInRadians),o.bg(this._cameraPosition,this._cameraPosition,N,-this.bearingInRadians),o.aM(this._cameraPosition,this._cameraPosition,[0,0,1]),o.bh(this._cameraPosition,this._cameraPosition,N,-this.center.lat*Math.PI/180),o.bi(this._cameraPosition,this._cameraPosition,N,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(l);const $=o.aW(this._globeViewProjMatrixNoCorrectionInverted);o.K($,$,[1,1,-1]),this._cachedFrustum=Ho.fromInvProjectionMatrix($)}calculateFogMatrix(l){o.w("calculateFogMatrix is not supported on globe projection.");const c=o.a$();return o.aq(c),c}getVisibleUnwrappedCoordinates(l){return[new o.aT(0,l)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(l){l&&o.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(l,c){if(!this._globeViewProjMatrixNoCorrection)return 1;const _=xr(l);o.aL(_,_,1+c/o.bo);const w=o.be();return o.al(w,[_[0],_[1],_[2],1],this._globeViewProjMatrixNoCorrection),w[2]/w[3]}populateCache(l){}getBounds(){const l=.5*this.width,c=.5*this.height,_=[new o.P(0,0),new o.P(l,0),new o.P(this.width,0),new o.P(this.width,c),new o.P(this.width,this.height),new o.P(l,this.height),new o.P(0,this.height),new o.P(0,c)],w=[];for(const ke of _)w.push(this.unprojectScreenPoint(ke));let K=0,N=0,$=0,ee=0;const ae=this.center;for(const ke of w){const Ke=o.bk(ae.lng,ke.lng),$e=o.bk(ae.lat,ke.lat);Ke<N&&(N=Ke),Ke>K&&(K=Ke),$e<ee&&(ee=$e),$e>$&&($=$e)}const xe=[ae.lng+N,ae.lat+ee,ae.lng+K,ae.lat+$];return this.isSurfacePointOnScreen([0,1,0])&&(xe[3]=90,xe[0]=-180,xe[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(xe[1]=-90,xe[0]=-180,xe[2]=180),new Ut(xe)}getConstrained(l,c){const _=o.ab(l.lat,-85.051129,o.aF),w=o.ab(+c,this.minZoom+Wr(0,_),this.maxZoom);return{center:new o.N(l.lng,_),zoom:w}}calculateCenterFromCameraLngLatAlt(l,c,_,w){return this._helper.calculateCenterFromCameraLngLatAlt(l,c,_,w)}setLocationAtPoint(l,c){const _=xr(this.unprojectScreenPoint(c)),w=xr(l),K=o.bf();o.bl(K);const N=o.bf();o.bi(N,_,K,-this.center.lng*Math.PI/180),o.bh(N,N,K,this.center.lat*Math.PI/180);const $=w[0]*w[0]+w[2]*w[2],ee=N[0]*N[0];if($<ee)return;const ae=Math.sqrt($-ee),xe=-ae,ke=o.bm(w[0],w[2],N[0],ae),Ke=o.bm(w[0],w[2],N[0],xe),$e=o.bf();o.bi($e,w,K,-ke);const Xe=o.bm($e[1],$e[2],N[1],N[2]),pt=o.bf();o.bi(pt,w,K,-Ke);const ut=o.bm(pt[1],pt[2],N[1],N[2]),mt=.5*Math.PI,vt=Xe>=-mt&&Xe<=mt,Bt=ut>=-mt&&ut<=mt;let kt,Rt;if(vt&&Bt){const Zt=this.center.lng*Math.PI/180,Mn=this.center.lat*Math.PI/180;o.bp(ke,Zt)+o.bp(Xe,Mn)<o.bp(Ke,Zt)+o.bp(ut,Mn)?(kt=ke,Rt=Xe):(kt=Ke,Rt=ut)}else if(vt)kt=ke,Rt=Xe;else{if(!Bt)return;kt=Ke,Rt=ut}const zt=kt/Math.PI*180,Tt=Rt/Math.PI*180,nn=this.center.lat;this.setCenter(new o.N(zt,o.ab(Tt,-90,90))),this.setZoom(this.zoom+Wr(nn,this.center.lat))}locationToScreenPoint(l,c){const _=xr(l);if(c){const w=c.getElevationForLngLatZoom(l,this._helper._tileZoom);o.aL(_,_,1+w/o.bo)}return this._projectSurfacePointToScreen(_)}_projectSurfacePointToScreen(l){const c=o.be();return o.al(c,[...l,1],this._globeViewProjMatrixNoCorrection),c[0]/=c[3],c[1]/=c[3],new o.P((.5*c[0]+.5)*this.width,(.5*-c[1]+.5)*this.height)}screenPointToMercatorCoordinate(l,c){if(c){const _=c.pointCoordinate(l);if(_)return _}return o.Y.fromLngLat(this.unprojectScreenPoint(l))}screenPointToLocation(l,c){var _;return(_=this.screenPointToMercatorCoordinate(l,c))===null||_===void 0?void 0:_.toLngLat()}isPointOnMapSurface(l,c){const _=this._cameraPosition,w=this.getRayDirectionFromPixel(l);return!!this.rayPlanetIntersection(_,w)}getRayDirectionFromPixel(l){const c=o.be();c[0]=l.x/this.width*2-1,c[1]=-1*(l.y/this.height*2-1),c[2]=1,c[3]=1,o.al(c,c,this._globeViewProjMatrixNoCorrectionInverted),c[0]/=c[3],c[1]/=c[3],c[2]/=c[3];const _=o.bf();_[0]=c[0]-this._cameraPosition[0],_[1]=c[1]-this._cameraPosition[1],_[2]=c[2]-this._cameraPosition[2];const w=o.bf();return o.aQ(w,_),w}isSurfacePointVisible(l){const c=this._cachedClippingPlane;return c[0]*l[0]+c[1]*l[1]+c[2]*l[2]+c[3]>=0}isSurfacePointOnScreen(l){if(!this.isSurfacePointVisible(l))return!1;const c=o.be();return o.al(c,[...l,1],this._globeViewProjMatrixNoCorrection),c[0]/=c[3],c[1]/=c[3],c[2]/=c[3],c[0]>-1&&c[0]<1&&c[1]>-1&&c[1]<1&&c[2]>-1&&c[2]<1}rayPlanetIntersection(l,c){const _=o.aS(l,c),w=o.bf(),K=o.bf();o.aL(K,c,_),o.aP(w,l,K);const N=1-o.aS(w,w);if(N<0)return null;const $=o.aS(l,l)-1,ee=-_+(_<0?1:-1)*Math.sqrt(N),ae=$/ee,xe=ee;return{tMin:Math.min(ae,xe),tMax:Math.max(ae,xe)}}unprojectScreenPoint(l){const c=this._cameraPosition,_=this.getRayDirectionFromPixel(l),w=this.rayPlanetIntersection(c,_);if(w){const ae=o.bf();o.aM(ae,c,[_[0]*w.tMin,_[1]*w.tMin,_[2]*w.tMin]);const xe=o.bf();return o.aQ(xe,ae),Zi(xe)}const K=this._cachedClippingPlane[0]*_[0]+this._cachedClippingPlane[1]*_[1]+this._cachedClippingPlane[2]*_[2],N=-o.bn(this._cachedClippingPlane,c)/K,$=o.bf();if(N>0)o.aM($,c,[_[0]*N,_[1]*N,_[2]*N]);else{const ae=o.bf();o.aM(ae,c,[2*_[0],2*_[1],2*_[2]]);const xe=o.bn(this._cachedClippingPlane,ae);o.aP($,ae,[this._cachedClippingPlane[0]*xe,this._cachedClippingPlane[1]*xe,this._cachedClippingPlane[2]*xe])}const ee=o.bf();return o.aQ(ee,$),Zi(ee)}getMatrixForModel(l,c){const _=o.N.convert(l),w=1/o.bo,K=o.a_();return o.bj(K,K,_.lng/180*Math.PI),o.aY(K,K,-_.lat/180*Math.PI),o.J(K,K,[0,0,1+c/o.bo]),o.aY(K,K,.5*Math.PI),o.K(K,K,[w,w,w]),K}getProjectionDataForCustomLayer(l=!0){const c=this.getProjectionData({overscaledTileID:new o.S(0,0,0,0,0),applyGlobeMatrix:l});return c.tileMercatorCoords=[0,0,1,1],c}getFastPathSimpleProjectionMatrix(l){}}class ma{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(l){this._helper.setMinZoom(l)}setMaxZoom(l){this._helper.setMaxZoom(l)}setMinPitch(l){this._helper.setMinPitch(l)}setMaxPitch(l){this._helper.setMaxPitch(l)}setRenderWorldCopies(l){this._helper.setRenderWorldCopies(l)}setBearing(l){this._helper.setBearing(l)}setPitch(l){this._helper.setPitch(l)}setRoll(l){this._helper.setRoll(l)}setFov(l){this._helper.setFov(l)}setZoom(l){this._helper.setZoom(l)}setCenter(l){this._helper.setCenter(l)}setElevation(l){this._helper.setElevation(l)}setMinElevationForCurrentTile(l){this._helper.setMinElevationForCurrentTile(l)}setPadding(l){this._helper.setPadding(l)}interpolatePadding(l,c,_){return this._helper.interpolatePadding(l,c,_)}isPaddingEqual(l){return this._helper.isPaddingEqual(l)}resize(l,c,_=!0){this._helper.resize(l,c,_)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(l){this._helper.setMaxBounds(l)}overrideNearFarZ(l,c){this._helper.overrideNearFarZ(l,c)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(l){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),l)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(l,c){this._globeness=l,this._globeLatitudeErrorCorrectionRadians=c,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().recalculateCache(),this._mercatorTransform.getCoveringTilesDetailsProvider().recalculateCache()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this._helper=new _l({calcMatrices:()=>{this._calcMatrices()},getConstrained:(l,c)=>this.getConstrained(l,c)}),this._globeness=1,this._mercatorTransform=new Ba,this._verticalPerspectiveTransform=new Nd}clone(){const l=new ma;return l._globeness=this._globeness,l._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,l.apply(this),l}apply(l){this._helper.apply(l),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(l){const c=this._mercatorTransform.getProjectionData(l),_=this._verticalPerspectiveTransform.getProjectionData(l);return{mainMatrix:this.isGlobeRendering?_.mainMatrix:c.mainMatrix,clippingPlane:_.clippingPlane,tileMercatorCoords:_.tileMercatorCoords,projectionTransition:l.applyGlobeMatrix?this._globeness:0,fallbackMatrix:c.fallbackMatrix}}isLocationOccluded(l){return this.currentTransform.isLocationOccluded(l)}transformLightDirection(l){return this.currentTransform.transformLightDirection(l)}getPixelScale(){return o.b9(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return o.b9(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(l,c,_){const w=this._mercatorTransform.getPitchedTextCorrection(l,c,_),K=this._verticalPerspectiveTransform.getPitchedTextCorrection(l,c,_);return o.b9(w,K,this._globeness)}projectTileCoordinates(l,c,_,w){return this.currentTransform.projectTileCoordinates(l,c,_,w)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(l){return this.currentTransform.calculateFogMatrix(l)}getVisibleUnwrappedCoordinates(l){return this.currentTransform.getVisibleUnwrappedCoordinates(l)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(l){this._mercatorTransform.recalculateZoomAndCenter(l),this._verticalPerspectiveTransform.recalculateZoomAndCenter(l)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(l,c){return this.currentTransform.lngLatToCameraDepth(l,c)}populateCache(l){this._mercatorTransform.populateCache(l),this._verticalPerspectiveTransform.populateCache(l)}getBounds(){return this.currentTransform.getBounds()}getConstrained(l,c){return this.currentTransform.getConstrained(l,c)}calculateCenterFromCameraLngLatAlt(l,c,_,w){return this._helper.calculateCenterFromCameraLngLatAlt(l,c,_,w)}setLocationAtPoint(l,c){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(l,c),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(l,c),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(l,c){return this.currentTransform.locationToScreenPoint(l,c)}screenPointToMercatorCoordinate(l,c){return this.currentTransform.screenPointToMercatorCoordinate(l,c)}screenPointToLocation(l,c){return this.currentTransform.screenPointToLocation(l,c)}isPointOnMapSurface(l,c){return this.currentTransform.isPointOnMapSurface(l,c)}getRayDirectionFromPixel(l){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(l)}getMatrixForModel(l,c){return this.currentTransform.getMatrixForModel(l,c)}getProjectionDataForCustomLayer(l=!0){const c=this._mercatorTransform.getProjectionDataForCustomLayer(l);if(!this.isGlobeRendering)return c;const _=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(l);return _.fallbackMatrix=c.mainMatrix,_}getFastPathSimpleProjectionMatrix(l){return this.currentTransform.getFastPathSimpleProjectionMatrix(l)}}class bl{get useGlobeControls(){return!0}handlePanInertia(l,c){const _=Mo(l,c);return Math.abs(_.lng-c.center.lng)>180&&(_.lng=c.center.lng+179.5*Math.sign(_.lng-c.center.lng)),{easingCenter:_,easingOffset:new o.P(0,0)}}handleMapControlsRollPitchBearingZoom(l,c){const _=l.around,w=c.screenPointToLocation(_);l.bearingDelta&&c.setBearing(c.bearing+l.bearingDelta),l.pitchDelta&&c.setPitch(c.pitch+l.pitchDelta),l.rollDelta&&c.setRoll(c.roll+l.rollDelta);const K=c.zoom;l.zoomDelta&&c.setZoom(c.zoom+l.zoomDelta);const N=c.zoom-K;if(N===0)return;const $=o.bk(c.center.lng,w.lng),ee=$/(Math.abs($/180)+1),ae=o.bk(c.center.lat,w.lat),xe=c.getRayDirectionFromPixel(_),ke=c.cameraPosition,Ke=-1*o.aS(ke,xe),$e=o.bf();o.aM($e,ke,[xe[0]*Ke,xe[1]*Ke,xe[2]*Ke]);const Xe=o.bq($e)-1,pt=Math.exp(.5*-Math.max(Xe-.3,0)),ut=zi(c.worldSize,c.center.lat)/Math.min(c.width,c.height),mt=o.bc(ut,.9,.5,1,.25),vt=(1-o.aG(-N))*Math.min(pt,mt),Bt=c.center.lat,kt=c.zoom,Rt=new o.N(c.center.lng+ee*vt,o.ab(c.center.lat+ae*vt,-85.051129,o.aF));c.setLocationAtPoint(w,_);const zt=c.center,Tt=o.bc(Math.abs($),45,85,0,1),nn=o.bc(ut,.75,.35,0,1),Zt=Math.pow(Math.max(Tt,nn),.25),Mn=o.bk(zt.lng,Rt.lng),Bn=o.bk(zt.lat,Rt.lat);c.setCenter(new o.N(zt.lng+Mn*Zt,zt.lat+Bn*Zt).wrap()),c.setZoom(kt+Wr(Bt,c.center.lat))}handleMapControlsPan(l,c,_){if(!l.panDelta)return;const w=c.center.lat,K=c.zoom;c.setCenter(Mo(l.panDelta,c).wrap()),c.setZoom(K+Wr(w,c.center.lat))}cameraForBoxAndBearing(l,c,_,w,K){const N=ea(l,c,_,w,K),$=c.left/K.width*2-1,ee=(K.width-c.right)/K.width*2-1,ae=c.top/K.height*-2+1,xe=(K.height-c.bottom)/K.height*-2+1,ke=o.bk(_.getWest(),_.getEast())<0,Ke=ke?_.getEast():_.getWest(),$e=ke?_.getWest():_.getEast(),Xe=Math.max(_.getNorth(),_.getSouth()),pt=Math.min(_.getNorth(),_.getSouth()),ut=Ke+.5*o.bk(Ke,$e),mt=Xe+.5*o.bk(Xe,pt),vt=K.clone();vt.setCenter(N.center),vt.setBearing(N.bearing),vt.setPitch(0),vt.setRoll(0),vt.setZoom(N.zoom);const Bt=vt.modelViewProjectionMatrix,kt=[xr(_.getNorthWest()),xr(_.getNorthEast()),xr(_.getSouthWest()),xr(_.getSouthEast()),xr(new o.N($e,mt)),xr(new o.N(Ke,mt)),xr(new o.N(ut,Xe)),xr(new o.N(ut,pt))],Rt=xr(N.center);let zt=Number.POSITIVE_INFINITY;for(const Tt of kt)$<0&&(zt=bl.getLesserNonNegativeNonNull(zt,bl.solveVectorScale(Tt,Rt,Bt,"x",$))),ee>0&&(zt=bl.getLesserNonNegativeNonNull(zt,bl.solveVectorScale(Tt,Rt,Bt,"x",ee))),ae>0&&(zt=bl.getLesserNonNegativeNonNull(zt,bl.solveVectorScale(Tt,Rt,Bt,"y",ae))),xe<0&&(zt=bl.getLesserNonNegativeNonNull(zt,bl.solveVectorScale(Tt,Rt,Bt,"y",xe)));if(Number.isFinite(zt)&&zt!==0)return N.zoom=vt.zoom+o.a8(zt),N;Ms()}handleJumpToCenterZoom(l,c){const _=l.center.lat,w=l.getConstrained(c.center?o.N.convert(c.center):l.center,l.zoom).center;l.setCenter(w.wrap());const K=c.zoom!==void 0?+c.zoom:l.zoom+Wr(_,w.lat);l.zoom!==K&&l.setZoom(K)}handleEaseTo(l,c){const _=l.zoom,w=l.center,K=l.padding,N={roll:l.roll,pitch:l.pitch,bearing:l.bearing},$={roll:c.roll===void 0?l.roll:c.roll,pitch:c.pitch===void 0?l.pitch:c.pitch,bearing:c.bearing===void 0?l.bearing:c.bearing},ee=c.zoom!==void 0,ae=!l.isPaddingEqual(c.padding);let xe=!1;const ke=c.center?o.N.convert(c.center):w,Ke=l.getConstrained(ke,_).center;Gs(l,Ke);const $e=l.clone();$e.setCenter(Ke),$e.setZoom(ee?+c.zoom:_+Wr(w.lat,ke.lat)),$e.setBearing(c.bearing);const Xe=new o.P(o.ab(l.centerPoint.x+c.offsetAsPoint.x,0,l.width),o.ab(l.centerPoint.y+c.offsetAsPoint.y,0,l.height));$e.setLocationAtPoint(Ke,Xe);const pt=(c.offset&&c.offsetAsPoint.mag())>0?$e.center:Ke,ut=ee?+c.zoom:_+Wr(w.lat,pt.lat),mt=_+Wr(w.lat,0),vt=ut+Wr(pt.lat,0),Bt=o.bk(w.lng,pt.lng),kt=o.bk(w.lat,pt.lat),Rt=o.aG(vt-mt);return xe=ut!==_,{easeFunc:zt=>{if(o.b3(N,$)||Oa({startEulerAngles:N,endEulerAngles:$,tr:l,k:zt,useSlerp:N.roll!=$.roll}),ae&&l.interpolatePadding(K,c.padding,zt),c.around)o.w("Easing around a point is not supported under globe projection."),l.setLocationAtPoint(c.around,c.aroundPoint);else{const Tt=vt>mt?Math.min(2,Rt):Math.max(.5,Rt),nn=Math.pow(Tt,1-zt),Zt=cs(w,Bt,kt,zt*nn);l.setCenter(Zt.wrap())}if(xe){const Tt=o.y.number(mt,vt,zt)+Wr(0,l.center.lat);l.setZoom(Tt)}},isZooming:xe,elevationCenter:pt}}handleFlyTo(l,c){const _=c.zoom!==void 0,w=l.center,K=l.zoom,N=!l.isPaddingEqual(c.padding),$=l.getConstrained(o.N.convert(c.center||c.locationAtOffset),K).center,ee=_?+c.zoom:l.zoom+Wr(l.center.lat,$.lat),ae=l.clone();ae.setCenter($),N&&ae.setPadding(c.padding),ae.setZoom(ee),ae.setBearing(c.bearing);const xe=new o.P(o.ab(l.centerPoint.x+c.offsetAsPoint.x,0,l.width),o.ab(l.centerPoint.y+c.offsetAsPoint.y,0,l.height));ae.setLocationAtPoint($,xe);const ke=ae.center;Gs(l,ke);const Ke=function(Bt,kt,Rt){const zt=xr(kt),Tt=xr(Rt),nn=o.aS(zt,Tt),Zt=Math.acos(nn),Mn=Ai(Bt);return Zt/(2*Math.PI)*Mn}(l,w,ke),$e=K+Wr(w.lat,0),Xe=ee+Wr(ke.lat,0),pt=o.aG(Xe-$e);let ut;if(typeof c.minZoom=="number"){const Bt=+c.minZoom+Wr(ke.lat,0),kt=Math.min(Bt,$e,Xe)+Wr(0,ke.lat),Rt=l.getConstrained(ke,kt).zoom+Wr(ke.lat,0);ut=o.aG(Rt-$e)}const mt=o.bk(w.lng,ke.lng),vt=o.bk(w.lat,ke.lat);return{easeFunc:(Bt,kt,Rt,zt)=>{const Tt=cs(w,mt,vt,Rt),nn=Bt===1?ke:Tt;l.setCenter(nn.wrap());const Zt=$e+o.a8(kt);l.setZoom(Bt===1?ee:Zt+Wr(0,nn.lat))},scaleOfZoom:pt,targetCenter:ke,scaleOfMinZoom:ut,pixelPathLength:Ke}}static solveVectorScale(l,c,_,w,K){const N=w==="x"?[_[0],_[4],_[8],_[12]]:[_[1],_[5],_[9],_[13]],$=[_[3],_[7],_[11],_[15]],ee=l[0]*N[0]+l[1]*N[1]+l[2]*N[2],ae=l[0]*$[0]+l[1]*$[1]+l[2]*$[2],xe=c[0]*N[0]+c[1]*N[1]+c[2]*N[2],ke=c[0]*$[0]+c[1]*$[1]+c[2]*$[2];return xe+K*ae===ee+K*ke||$[3]*(ee-xe)+N[3]*(ke-ae)+ee*ke==xe*ae?null:(xe+N[3]-K*ke-K*$[3])/(xe-ee-K*ke+K*ae)}static getLesserNonNegativeNonNull(l,c){return c!==null&&c>=0&&c<l?c:l}}class Wc{constructor(l){this._globe=l,this._mercatorCameraHelper=new EA,this._verticalPerspectiveCameraHelper=new bl}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(l,c){return this.currentHelper.handlePanInertia(l,c)}handleMapControlsRollPitchBearingZoom(l,c){return this.currentHelper.handleMapControlsRollPitchBearingZoom(l,c)}handleMapControlsPan(l,c,_){this.currentHelper.handleMapControlsPan(l,c,_)}cameraForBoxAndBearing(l,c,_,w,K){return this.currentHelper.cameraForBoxAndBearing(l,c,_,w,K)}handleJumpToCenterZoom(l,c){this.currentHelper.handleJumpToCenterZoom(l,c)}handleEaseTo(l,c){return this.currentHelper.handleEaseTo(l,c)}handleFlyTo(l,c){return this.currentHelper.handleFlyTo(l,c)}}const Uu=(k,l)=>o.t(k,l&&l.filter(c=>c.identifier!=="source.canvas")),Wd=o.br();class vu extends o.E{constructor(l,c={}){super(),this._rtlPluginLoaded=()=>{for(const _ in this.sourceCaches){const w=this.sourceCaches[_].getSource().type;w!=="vector"&&w!=="geojson"||this.sourceCaches[_].reload()}},this.map=l,this.dispatcher=new Kt(Lt(),l._getMapId()),this.dispatcher.registerMessageHandler("GG",(_,w)=>this.getGlyphs(_,w)),this.dispatcher.registerMessageHandler("GI",(_,w)=>this.getImages(_,w)),this.imageManager=new pe,this.imageManager.setEventedParent(this),this.glyphManager=new De(l._requestManager,c.localIdeographFontFamily),this.lineAtlas=new Me(256,512),this.crossTileSymbolIndex=new Rs,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new o.bs,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",o.bt()),ce().on(vr,this._rtlPluginLoaded),this.on("data",_=>{if(_.dataType!=="source"||_.sourceDataType!=="metadata")return;const w=this.sourceCaches[_.sourceId];if(!w)return;const K=w.getSource();if(K&&K.vectorLayerIds)for(const N in this._layers){const $=this._layers[N];$.source===K.id&&this._validateLayer($)}})}loadURL(l,c={},_){this.fire(new o.k("dataloading",{dataType:"style"})),c.validate=typeof c.validate!="boolean"||c.validate;const w=this.map._requestManager.transformRequest(l,"Style");this._loadStyleRequest=new AbortController;const K=this._loadStyleRequest;o.h(w,this._loadStyleRequest).then(N=>{this._loadStyleRequest=null,this._load(N.data,c,_)}).catch(N=>{this._loadStyleRequest=null,N&&!K.signal.aborted&&this.fire(new o.j(N))})}loadJSON(l,c={},_){this.fire(new o.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,S.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,c.validate=c.validate!==!1,this._load(l,c,_)}).catch(()=>{})}loadEmpty(){this.fire(new o.k("dataloading",{dataType:"style"})),this._load(Wd,{validate:!1})}_load(l,c,_){var w,K;const N=c.transformStyle?c.transformStyle(_,l):l;if(!c.validate||!Uu(this,o.u(N))){this._loaded=!0,this.stylesheet=N;for(const $ in N.sources)this.addSource($,N.sources[$],{validate:!1});N.sprite?this._loadSprite(N.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(N.glyphs),this._createLayers(),this.light=new Ze(this.stylesheet.light),this._setProjectionInternal(((w=this.stylesheet.projection)===null||w===void 0?void 0:w.type)||"mercator"),this.sky=new We(this.stylesheet.sky),this.map.setTerrain((K=this.stylesheet.terrain)!==null&&K!==void 0?K:null),this.fire(new o.k("data",{dataType:"style"})),this.fire(new o.k("style.load"))}}_createLayers(){const l=o.bu(this.stylesheet.layers);this.dispatcher.broadcast("SL",l),this._order=l.map(c=>c.id),this._layers={},this._serializedLayers=null;for(const c of l){const _=o.bv(c);_.setEventedParent(this,{layer:{id:c.id}}),this._layers[c.id]=_}}_loadSprite(l,c=!1,_=void 0){let w;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(K,N,$,ee){return o._(this,void 0,void 0,function*(){const ae=ne(K),xe=$>1?"@2x":"",ke={},Ke={};for(const{id:$e,url:Xe}of ae){const pt=N.transformRequest(G(Xe,xe,".json"),"SpriteJSON");ke[$e]=o.h(pt,ee);const ut=N.transformRequest(G(Xe,xe,".png"),"SpriteImage");Ke[$e]=te.getImage(ut,ee)}return yield Promise.all([...Object.values(ke),...Object.values(Ke)]),function($e,Xe){return o._(this,void 0,void 0,function*(){const pt={};for(const ut in $e){pt[ut]={};const mt=S.getImageCanvasContext((yield Xe[ut]).data),vt=(yield $e[ut]).data;for(const Bt in vt){const{width:kt,height:Rt,x:zt,y:Tt,sdf:nn,pixelRatio:Zt,stretchX:Mn,stretchY:Bn,content:yn,textFitWidth:In,textFitHeight:Nn}=vt[Bt];pt[ut][Bt]={data:null,pixelRatio:Zt,sdf:nn,stretchX:Mn,stretchY:Bn,content:yn,textFitWidth:In,textFitHeight:Nn,spriteData:{width:kt,height:Rt,x:zt,y:Tt,context:mt}}}}return pt})}(ke,Ke)})}(l,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(K=>{if(this._spriteRequest=null,K)for(const N in K){this._spritesImagesIds[N]=[];const $=this._spritesImagesIds[N]?this._spritesImagesIds[N].filter(ee=>!(ee in K)):[];for(const ee of $)this.imageManager.removeImage(ee),this._changedImages[ee]=!0;for(const ee in K[N]){const ae=N==="default"?ee:`${N}:${ee}`;this._spritesImagesIds[N].push(ae),ae in this.imageManager.images?this.imageManager.updateImage(ae,K[N][ee],!1):this.imageManager.addImage(ae,K[N][ee]),c&&(this._changedImages[ae]=!0)}}}).catch(K=>{this._spriteRequest=null,w=K,this.fire(new o.j(w))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),c&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.k("data",{dataType:"style"})),_&&_(w)})}_unloadSprite(){for(const l of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(l),this._changedImages[l]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.k("data",{dataType:"style"}))}_validateLayer(l){const c=this.sourceCaches[l.source];if(!c)return;const _=l.sourceLayer;if(!_)return;const w=c.getSource();(w.type==="geojson"||w.vectorLayerIds&&w.vectorLayerIds.indexOf(_)===-1)&&this.fire(new o.j(new Error(`Source layer "${_}" does not exist on source "${w.id}" as specified by style layer "${l.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const l in this.sourceCaches)if(!this.sourceCaches[l].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(l,c=!1){const _=this._serializedAllLayers();if(!l||l.length===0)return Object.values(c?o.bw(_):_);const w=[];for(const K of l)if(_[K]){const N=c?o.bw(_[K]):_[K];w.push(N)}return w}_serializedAllLayers(){let l=this._serializedLayers;if(l)return l;l=this._serializedLayers={};const c=Object.keys(this._layers);for(const _ of c){const w=this._layers[_];w.type!=="custom"&&(l[_]=w.serialize())}return l}hasTransitions(){var l,c,_;if(!((l=this.light)===null||l===void 0)&&l.hasTransition()||!((c=this.sky)===null||c===void 0)&&c.hasTransition()||!((_=this.projection)===null||_===void 0)&&_.hasTransition())return!0;for(const w in this.sourceCaches)if(this.sourceCaches[w].hasTransition())return!0;for(const w in this._layers)if(this._layers[w].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(l){if(!this._loaded)return;const c=this._changed;if(c){const w=Object.keys(this._updatedLayers),K=Object.keys(this._removedLayers);(w.length||K.length)&&this._updateWorkerLayers(w,K);for(const N in this._updatedSources){const $=this._updatedSources[N];if($==="reload")this._reloadSource(N);else{if($!=="clear")throw new Error(`Invalid action ${$}`);this._clearSource(N)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const N in this._updatedPaintProps)this._layers[N].updateTransitions(l);this.light.updateTransitions(l),this.sky.updateTransitions(l),this._resetUpdates()}const _={};for(const w in this.sourceCaches){const K=this.sourceCaches[w];_[w]=K.used,K.used=!1}for(const w of this._order){const K=this._layers[w];K.recalculate(l,this._availableImages),!K.isHidden(l.zoom)&&K.source&&(this.sourceCaches[K.source].used=!0)}for(const w in _){const K=this.sourceCaches[w];!!_[w]!=!!K.used&&K.fire(new o.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:w}))}this.light.recalculate(l),this.sky.recalculate(l),this.projection.recalculate(l),this.z=l.zoom,c&&this.fire(new o.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const l=Object.keys(this._changedImages);if(l.length){for(const c in this.sourceCaches)this.sourceCaches[c].reloadTilesForDependencies(["icons","patterns"],l);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const l in this.sourceCaches)this.sourceCaches[l].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(l,c){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(l,!1),removedIds:c})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(l,c={}){var _;this._checkLoaded();const w=this.serialize();if(l=c.transformStyle?c.transformStyle(w,l):l,((_=c.validate)===null||_===void 0||_)&&Uu(this,o.u(l)))return!1;(l=o.bw(l)).layers=o.bu(l.layers);const K=o.bx(w,l),N=this._getOperationsToPerform(K);if(N.unimplemented.length>0)throw new Error(`Unimplemented: ${N.unimplemented.join(", ")}.`);if(N.operations.length===0)return!1;for(const $ of N.operations)$();return this.stylesheet=l,this._serializedLayers=null,!0}_getOperationsToPerform(l){const c=[],_=[];for(const w of l)switch(w.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":c.push(()=>this.addLayer.apply(this,w.args));break;case"removeLayer":c.push(()=>this.removeLayer.apply(this,w.args));break;case"setPaintProperty":c.push(()=>this.setPaintProperty.apply(this,w.args));break;case"setLayoutProperty":c.push(()=>this.setLayoutProperty.apply(this,w.args));break;case"setFilter":c.push(()=>this.setFilter.apply(this,w.args));break;case"addSource":c.push(()=>this.addSource.apply(this,w.args));break;case"removeSource":c.push(()=>this.removeSource.apply(this,w.args));break;case"setLayerZoomRange":c.push(()=>this.setLayerZoomRange.apply(this,w.args));break;case"setLight":c.push(()=>this.setLight.apply(this,w.args));break;case"setGeoJSONSourceData":c.push(()=>this.setGeoJSONSourceData.apply(this,w.args));break;case"setGlyphs":c.push(()=>this.setGlyphs.apply(this,w.args));break;case"setSprite":c.push(()=>this.setSprite.apply(this,w.args));break;case"setTerrain":c.push(()=>this.map.setTerrain.apply(this,w.args));break;case"setSky":c.push(()=>this.setSky.apply(this,w.args));break;case"setProjection":this.setProjection.apply(this,w.args);break;case"setTransition":c.push(()=>{});break;default:_.push(w.command)}return{operations:c,unimplemented:_}}addImage(l,c){if(this.getImage(l))return this.fire(new o.j(new Error(`An image named "${l}" already exists.`)));this.imageManager.addImage(l,c),this._afterImageUpdated(l)}updateImage(l,c){this.imageManager.updateImage(l,c)}getImage(l){return this.imageManager.getImage(l)}removeImage(l){if(!this.getImage(l))return this.fire(new o.j(new Error(`An image named "${l}" does not exist.`)));this.imageManager.removeImage(l),this._afterImageUpdated(l)}_afterImageUpdated(l){this._availableImages=this.imageManager.listImages(),this._changedImages[l]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(l,c,_={}){if(this._checkLoaded(),this.sourceCaches[l]!==void 0)throw new Error(`Source "${l}" already exists.`);if(!c.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(c).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(c.type)>=0&&this._validate(o.u.source,`sources.${l}`,c,null,_))return;this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);const w=this.sourceCaches[l]=new se(l,c,this.dispatcher);w.style=this,w.setEventedParent(this,()=>({isSourceLoaded:w.loaded(),source:w.serialize(),sourceId:l})),w.onAdd(this.map),this._changed=!0}removeSource(l){if(this._checkLoaded(),this.sourceCaches[l]===void 0)throw new Error("There is no source with this ID");for(const _ in this._layers)if(this._layers[_].source===l)return this.fire(new o.j(new Error(`Source "${l}" cannot be removed while layer "${_}" is using it.`)));const c=this.sourceCaches[l];delete this.sourceCaches[l],delete this._updatedSources[l],c.fire(new o.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:l})),c.setEventedParent(null),c.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(l,c){if(this._checkLoaded(),this.sourceCaches[l]===void 0)throw new Error(`There is no source with this ID=${l}`);const _=this.sourceCaches[l].getSource();if(_.type!=="geojson")throw new Error(`geojsonSource.type is ${_.type}, which is !== 'geojson`);_.setData(c),this._changed=!0}getSource(l){return this.sourceCaches[l]&&this.sourceCaches[l].getSource()}addLayer(l,c,_={}){this._checkLoaded();const w=l.id;if(this.getLayer(w))return void this.fire(new o.j(new Error(`Layer "${w}" already exists on this map.`)));let K;if(l.type==="custom"){if(Uu(this,o.by(l)))return;K=o.bv(l)}else{if("source"in l&&typeof l.source=="object"&&(this.addSource(w,l.source),l=o.bw(l),l=o.e(l,{source:w})),this._validate(o.u.layer,`layers.${w}`,l,{arrayIndex:-1},_))return;K=o.bv(l),this._validateLayer(K),K.setEventedParent(this,{layer:{id:w}})}const N=c?this._order.indexOf(c):this._order.length;if(c&&N===-1)this.fire(new o.j(new Error(`Cannot add layer "${w}" before non-existing layer "${c}".`)));else{if(this._order.splice(N,0,w),this._layerOrderChanged=!0,this._layers[w]=K,this._removedLayers[w]&&K.source&&K.type!=="custom"){const $=this._removedLayers[w];delete this._removedLayers[w],$.type!==K.type?this._updatedSources[K.source]="clear":(this._updatedSources[K.source]="reload",this.sourceCaches[K.source].pause())}this._updateLayer(K),K.onAdd&&K.onAdd(this.map)}}moveLayer(l,c){if(this._checkLoaded(),this._changed=!0,!this._layers[l])return void this.fire(new o.j(new Error(`The layer '${l}' does not exist in the map's style and cannot be moved.`)));if(l===c)return;const _=this._order.indexOf(l);this._order.splice(_,1);const w=c?this._order.indexOf(c):this._order.length;c&&w===-1?this.fire(new o.j(new Error(`Cannot move layer "${l}" before non-existing layer "${c}".`))):(this._order.splice(w,0,l),this._layerOrderChanged=!0)}removeLayer(l){this._checkLoaded();const c=this._layers[l];if(!c)return void this.fire(new o.j(new Error(`Cannot remove non-existing layer "${l}".`)));c.setEventedParent(null);const _=this._order.indexOf(l);this._order.splice(_,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[l]=c,delete this._layers[l],this._serializedLayers&&delete this._serializedLayers[l],delete this._updatedLayers[l],delete this._updatedPaintProps[l],c.onRemove&&c.onRemove(this.map)}getLayer(l){return this._layers[l]}getLayersOrder(){return[...this._order]}hasLayer(l){return l in this._layers}setLayerZoomRange(l,c,_){this._checkLoaded();const w=this.getLayer(l);w?w.minzoom===c&&w.maxzoom===_||(c!=null&&(w.minzoom=c),_!=null&&(w.maxzoom=_),this._updateLayer(w)):this.fire(new o.j(new Error(`Cannot set the zoom range of non-existing layer "${l}".`)))}setFilter(l,c,_={}){this._checkLoaded();const w=this.getLayer(l);if(w){if(!o.bz(w.filter,c))return c==null?(w.filter=void 0,void this._updateLayer(w)):void(this._validate(o.u.filter,`layers.${w.id}.filter`,c,null,_)||(w.filter=o.bw(c),this._updateLayer(w)))}else this.fire(new o.j(new Error(`Cannot filter non-existing layer "${l}".`)))}getFilter(l){return o.bw(this.getLayer(l).filter)}setLayoutProperty(l,c,_,w={}){this._checkLoaded();const K=this.getLayer(l);K?o.bz(K.getLayoutProperty(c),_)||(K.setLayoutProperty(c,_,w),this._updateLayer(K)):this.fire(new o.j(new Error(`Cannot style non-existing layer "${l}".`)))}getLayoutProperty(l,c){const _=this.getLayer(l);if(_)return _.getLayoutProperty(c);this.fire(new o.j(new Error(`Cannot get style of non-existing layer "${l}".`)))}setPaintProperty(l,c,_,w={}){this._checkLoaded();const K=this.getLayer(l);K?o.bz(K.getPaintProperty(c),_)||(K.setPaintProperty(c,_,w)&&this._updateLayer(K),this._changed=!0,this._updatedPaintProps[l]=!0,this._serializedLayers=null):this.fire(new o.j(new Error(`Cannot style non-existing layer "${l}".`)))}getPaintProperty(l,c){return this.getLayer(l).getPaintProperty(c)}setFeatureState(l,c){this._checkLoaded();const _=l.source,w=l.sourceLayer,K=this.sourceCaches[_];if(K===void 0)return void this.fire(new o.j(new Error(`The source '${_}' does not exist in the map's style.`)));const N=K.getSource().type;N==="geojson"&&w?this.fire(new o.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):N!=="vector"||w?(l.id===void 0&&this.fire(new o.j(new Error("The feature id parameter must be provided."))),K.setFeatureState(w,l.id,c)):this.fire(new o.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(l,c){this._checkLoaded();const _=l.source,w=this.sourceCaches[_];if(w===void 0)return void this.fire(new o.j(new Error(`The source '${_}' does not exist in the map's style.`)));const K=w.getSource().type,N=K==="vector"?l.sourceLayer:void 0;K!=="vector"||N?c&&typeof l.id!="string"&&typeof l.id!="number"?this.fire(new o.j(new Error("A feature id is required to remove its specific state property."))):w.removeFeatureState(N,l.id,c):this.fire(new o.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(l){this._checkLoaded();const c=l.source,_=l.sourceLayer,w=this.sourceCaches[c];if(w!==void 0)return w.getSource().type!=="vector"||_?(l.id===void 0&&this.fire(new o.j(new Error("The feature id parameter must be provided."))),w.getFeatureState(_,l.id)):void this.fire(new o.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new o.j(new Error(`The source '${c}' does not exist in the map's style.`)))}getTransition(){return o.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const l=o.bA(this.sourceCaches,K=>K.serialize()),c=this._serializeByIds(this._order,!0),_=this.map.getTerrain()||void 0,w=this.stylesheet;return o.bB({version:w.version,name:w.name,metadata:w.metadata,light:w.light,sky:w.sky,center:w.center,zoom:w.zoom,bearing:w.bearing,pitch:w.pitch,sprite:w.sprite,glyphs:w.glyphs,transition:w.transition,projection:w.projection,sources:l,layers:c,terrain:_},K=>K!==void 0)}_updateLayer(l){this._updatedLayers[l.id]=!0,l.source&&!this._updatedSources[l.source]&&this.sourceCaches[l.source].getSource().type!=="raster"&&(this._updatedSources[l.source]="reload",this.sourceCaches[l.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(l){const c=N=>this._layers[N].type==="fill-extrusion",_={},w=[];for(let N=this._order.length-1;N>=0;N--){const $=this._order[N];if(c($)){_[$]=N;for(const ee of l){const ae=ee[$];if(ae)for(const xe of ae)w.push(xe)}}}w.sort((N,$)=>$.intersectionZ-N.intersectionZ);const K=[];for(let N=this._order.length-1;N>=0;N--){const $=this._order[N];if(c($))for(let ee=w.length-1;ee>=0;ee--){const ae=w[ee].feature;if(_[ae.layer.id]<N)break;K.push(ae),w.pop()}else for(const ee of l){const ae=ee[$];if(ae)for(const xe of ae)K.push(xe.feature)}}return K}queryRenderedFeatures(l,c,_){c&&c.filter&&this._validate(o.u.filter,"queryRenderedFeatures.filter",c.filter,null,c);const w={};if(c&&c.layers){if(!(Array.isArray(c.layers)||c.layers instanceof Set))return this.fire(new o.j(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const ae of c.layers){const xe=this._layers[ae];if(!xe)return this.fire(new o.j(new Error(`The layer '${ae}' does not exist in the map's style and cannot be queried for features.`))),[];w[xe.source]=!0}}const K=[];c.availableImages=this._availableImages;const N=this._serializedAllLayers(),$=c.layers instanceof Set?c.layers:Array.isArray(c.layers)?new Set(c.layers):null,ee=Object.assign(Object.assign({},c),{layers:$});for(const ae in this.sourceCaches)c.layers&&!w[ae]||K.push(Be(this.sourceCaches[ae],this._layers,N,l,ee,_));return this.placement&&K.push(function(ae,xe,ke,Ke,$e,Xe,pt){const ut={},mt=Xe.queryRenderedSymbols(Ke),vt=[];for(const Bt of Object.keys(mt).map(Number))vt.push(pt[Bt]);vt.sort(it);for(const Bt of vt){const kt=Bt.featureIndex.lookupSymbolFeatures(mt[Bt.bucketInstanceId],xe,Bt.bucketIndex,Bt.sourceLayerIndex,$e.filter,$e.layers,$e.availableImages,ae);for(const Rt in kt){const zt=ut[Rt]=ut[Rt]||[],Tt=kt[Rt];Tt.sort((nn,Zt)=>{const Mn=Bt.featureSortOrder;if(Mn){const Bn=Mn.indexOf(nn.featureIndex);return Mn.indexOf(Zt.featureIndex)-Bn}return Zt.featureIndex-nn.featureIndex});for(const nn of Tt)zt.push(nn)}}return function(Bt,kt,Rt){for(const zt in Bt)for(const Tt of Bt[zt])_t(Tt,Rt[kt[zt].source]);return Bt}(ut,ae,ke)}(this._layers,N,this.sourceCaches,l,ee,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(K)}querySourceFeatures(l,c){c&&c.filter&&this._validate(o.u.filter,"querySourceFeatures.filter",c.filter,null,c);const _=this.sourceCaches[l];return _?function(w,K){const N=w.getRenderableIds().map(ae=>w.getTileByID(ae)),$=[],ee={};for(let ae=0;ae<N.length;ae++){const xe=N[ae],ke=xe.tileID.canonical.key;ee[ke]||(ee[ke]=!0,xe.querySourceFeatures($,K))}return $}(_,c):[]}getLight(){return this.light.getLight()}setLight(l,c={}){this._checkLoaded();const _=this.light.getLight();let w=!1;for(const N in l)if(!o.bz(l[N],_[N])){w=!0;break}if(!w)return;const K={now:S.now(),transition:o.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(l,c),this.light.updateTransitions(K)}getProjection(){var l;return(l=this.stylesheet)===null||l===void 0?void 0:l.projection}setProjection(l){if(this._checkLoaded(),this.projection){if(this.projection.name===l.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=l,this._setProjectionInternal(l.type)}getSky(){var l;return(l=this.stylesheet)===null||l===void 0?void 0:l.sky}setSky(l,c={}){this._checkLoaded();const _=this.getSky();let w=!1;if(!l&&!_)return;if(l&&!_)w=!0;else if(!l&&_)w=!0;else for(const N in l)if(!o.bz(l[N],_[N])){w=!0;break}if(!w)return;const K={now:S.now(),transition:o.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=l,this.sky.setSky(l,c),this.sky.updateTransitions(K)}_setProjectionInternal(l){const c=function(_){if(Array.isArray(_)){const w=new ti({type:_});return{projection:w,transform:new ma,cameraHelper:new Wc(w)}}switch(_){case"mercator":return{projection:new Ea,transform:new Ba,cameraHelper:new EA};case"globe":{const w=new ti({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:w,transform:new ma,cameraHelper:new Wc(w)}}case"vertical-perspective":return{projection:new Kr,transform:new Nd,cameraHelper:new bl};default:return o.w(`Unknown projection name: ${_}. Falling back to mercator projection.`),{projection:new Ea,transform:new Ba,cameraHelper:new EA}}}(l);this.projection=c.projection,this.map.migrateProjection(c.transform,c.cameraHelper);for(const _ in this.sourceCaches)this.sourceCaches[_].reload()}_validate(l,c,_,w,K={}){return(!K||K.validate!==!1)&&Uu(this,l.call(o.u,o.e({key:c,style:this.serialize(),value:_,styleSpec:o.v},w)))}_remove(l=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),ce().off(vr,this._rtlPluginLoaded);for(const c in this._layers)this._layers[c].setEventedParent(null);for(const c in this.sourceCaches){const _=this.sourceCaches[c];_.setEventedParent(null),_.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),l&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(l)}_clearSource(l){this.sourceCaches[l].clearTiles()}_reloadSource(l){this.sourceCaches[l].resume(),this.sourceCaches[l].reload()}_updateSources(l){for(const c in this.sourceCaches)this.sourceCaches[c].update(l,this.map.terrain)}_generateCollisionBoxes(){for(const l in this.sourceCaches)this._reloadSource(l)}_updatePlacement(l,c,_,w,K=!1){let N=!1,$=!1;const ee={};for(const ae of this._order){const xe=this._layers[ae];if(xe.type!=="symbol")continue;if(!ee[xe.source]){const Ke=this.sourceCaches[xe.source];ee[xe.source]=Ke.getRenderableIds(!0).map($e=>Ke.getTileByID($e)).sort(($e,Xe)=>Xe.tileID.overscaledZ-$e.tileID.overscaledZ||($e.tileID.isLessThan(Xe.tileID)?-1:1))}const ke=this.crossTileSymbolIndex.addLayer(xe,ee[xe.source],l.center.lng);N=N||ke}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((K=K||this._layerOrderChanged||_===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(S.now(),l.zoom))&&(this.pauseablePlacement=new hn(l,this.map.terrain,this._order,K,c,_,w,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,ee),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(S.now()),$=!0),N&&this.pauseablePlacement.placement.setStale()),$||N)for(const ae of this._order){const xe=this._layers[ae];xe.type==="symbol"&&this.placement.updateLayerOpacities(xe,ee[xe.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(S.now())}_releaseSymbolFadeTiles(){for(const l in this.sourceCaches)this.sourceCaches[l].releaseSymbolFadeTiles()}getImages(l,c){return o._(this,void 0,void 0,function*(){const _=yield this.imageManager.getImages(c.icons);this._updateTilesForChangedImages();const w=this.sourceCaches[c.source];return w&&w.setDependencies(c.tileID.key,c.type,c.icons),_})}getGlyphs(l,c){return o._(this,void 0,void 0,function*(){const _=yield this.glyphManager.getGlyphs(c.stacks),w=this.sourceCaches[c.source];return w&&w.setDependencies(c.tileID.key,c.type,[""]),_})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(l,c={}){this._checkLoaded(),l&&this._validate(o.u.glyphs,"glyphs",l,null,c)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=l,this.glyphManager.entries={},this.glyphManager.setURL(l))}addSprite(l,c,_={},w){this._checkLoaded();const K=[{id:l,url:c}],N=[...ne(this.stylesheet.sprite),...K];this._validate(o.u.sprite,"sprite",N,null,_)||(this.stylesheet.sprite=N,this._loadSprite(K,!0,w))}removeSprite(l){this._checkLoaded();const c=ne(this.stylesheet.sprite);if(c.find(_=>_.id===l)){if(this._spritesImagesIds[l])for(const _ of this._spritesImagesIds[l])this.imageManager.removeImage(_),this._changedImages[_]=!0;c.splice(c.findIndex(_=>_.id===l),1),this.stylesheet.sprite=c.length>0?c:void 0,delete this._spritesImagesIds[l],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.k("data",{dataType:"style"}))}else this.fire(new o.j(new Error(`Sprite "${l}" doesn't exists on this map.`)))}getSprite(){return ne(this.stylesheet.sprite)}setSprite(l,c={},_){this._checkLoaded(),l&&this._validate(o.u.sprite,"sprite",l,null,c)||(this.stylesheet.sprite=l,l?this._loadSprite(l,!0,_):(this._unloadSprite(),_&&_(null)))}}var Fs=o.aA([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class BA{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(l,c,_,w,K,N,$,ee,ae){this.context=l;let xe=this.boundPaintVertexBuffers.length!==w.length;for(let ke=0;!xe&&ke<w.length;ke++)this.boundPaintVertexBuffers[ke]!==w[ke]&&(xe=!0);!this.vao||this.boundProgram!==c||this.boundLayoutVertexBuffer!==_||xe||this.boundIndexBuffer!==K||this.boundVertexOffset!==N||this.boundDynamicVertexBuffer!==$||this.boundDynamicVertexBuffer2!==ee||this.boundDynamicVertexBuffer3!==ae?this.freshBind(c,_,w,K,N,$,ee,ae):(l.bindVertexArray.set(this.vao),$&&$.bind(),K&&K.dynamicDraw&&K.bind(),ee&&ee.bind(),ae&&ae.bind())}freshBind(l,c,_,w,K,N,$,ee){const ae=l.numAttributes,xe=this.context,ke=xe.gl;this.vao&&this.destroy(),this.vao=xe.createVertexArray(),xe.bindVertexArray.set(this.vao),this.boundProgram=l,this.boundLayoutVertexBuffer=c,this.boundPaintVertexBuffers=_,this.boundIndexBuffer=w,this.boundVertexOffset=K,this.boundDynamicVertexBuffer=N,this.boundDynamicVertexBuffer2=$,this.boundDynamicVertexBuffer3=ee,c.enableAttributes(ke,l);for(const Ke of _)Ke.enableAttributes(ke,l);N&&N.enableAttributes(ke,l),$&&$.enableAttributes(ke,l),ee&&ee.enableAttributes(ke,l),c.bind(),c.setVertexAttribPointers(ke,l,K);for(const Ke of _)Ke.bind(),Ke.setVertexAttribPointers(ke,l,K);N&&(N.bind(),N.setVertexAttribPointers(ke,l,K)),w&&w.bind(),$&&($.bind(),$.setVertexAttribPointers(ke,l,K)),ee&&(ee.bind(),ee.setVertexAttribPointers(ke,l,K)),xe.currentNumAttributes=ae}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const cd=(k,l,c,_,w)=>({u_texture:0,u_ele_delta:k,u_fog_matrix:l,u_fog_color:c?c.properties.get("fog-color"):o.b4.white,u_fog_ground_blend:c?c.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:w?0:c?c.calculateFogBlendOpacity(_):0,u_horizon_color:c?c.properties.get("horizon-color"):o.b4.white,u_horizon_fog_blend:c?c.properties.get("horizon-fog-blend"):1,u_is_globe_mode:w?1:0}),Gd={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function bc(k){const l=[];for(let c=0;c<k.length;c++){if(k[c]===null)continue;const _=k[c].split(" ");l.push(_.pop())}return l}class xc{constructor(l,c,_,w,K,N,$,ee){const ae=l.gl;this.program=ae.createProgram();const xe=bc(c.staticAttributes),ke=_?_.getBinderAttributes():[],Ke=xe.concat(ke),$e=ei.prelude.staticUniforms?bc(ei.prelude.staticUniforms):[],Xe=$.staticUniforms?bc($.staticUniforms):[],pt=c.staticUniforms?bc(c.staticUniforms):[],ut=_?_.getBinderUniforms():[],mt=$e.concat(Xe).concat(pt).concat(ut),vt=[];for(const Zt of mt)vt.indexOf(Zt)<0&&vt.push(Zt);const Bt=_?_.defines():[];Ki(ae)&&Bt.unshift("#version 300 es"),K&&Bt.push("#define OVERDRAW_INSPECTOR;"),N&&Bt.push("#define TERRAIN3D;"),ee&&Bt.push(ee);let kt=Bt.concat(ei.prelude.fragmentSource,$.fragmentSource,c.fragmentSource).join(`
`),Rt=Bt.concat(ei.prelude.vertexSource,$.vertexSource,c.vertexSource).join(`
`);Ki(ae)||(kt=function(Zt){return Zt.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")}(kt),Rt=function(Zt){return Zt.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")}(Rt));const zt=ae.createShader(ae.FRAGMENT_SHADER);if(ae.isContextLost())return void(this.failedToCreate=!0);if(ae.shaderSource(zt,kt),ae.compileShader(zt),!ae.getShaderParameter(zt,ae.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${ae.getShaderInfoLog(zt)}`);ae.attachShader(this.program,zt);const Tt=ae.createShader(ae.VERTEX_SHADER);if(ae.isContextLost())return void(this.failedToCreate=!0);if(ae.shaderSource(Tt,Rt),ae.compileShader(Tt),!ae.getShaderParameter(Tt,ae.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${ae.getShaderInfoLog(Tt)}`);ae.attachShader(this.program,Tt),this.attributes={};const nn={};this.numAttributes=Ke.length;for(let Zt=0;Zt<this.numAttributes;Zt++)Ke[Zt]&&(ae.bindAttribLocation(this.program,Zt,Ke[Zt]),this.attributes[Ke[Zt]]=Zt);if(ae.linkProgram(this.program),!ae.getProgramParameter(this.program,ae.LINK_STATUS))throw new Error(`Program failed to link: ${ae.getProgramInfoLog(this.program)}`);ae.deleteShader(Tt),ae.deleteShader(zt);for(let Zt=0;Zt<vt.length;Zt++){const Mn=vt[Zt];if(Mn&&!nn[Mn]){const Bn=ae.getUniformLocation(this.program,Mn);Bn&&(nn[Mn]=Bn)}}this.fixedUniforms=w(l,nn),this.terrainUniforms=((Zt,Mn)=>({u_depth:new o.bC(Zt,Mn.u_depth),u_terrain:new o.bC(Zt,Mn.u_terrain),u_terrain_dim:new o.b5(Zt,Mn.u_terrain_dim),u_terrain_matrix:new o.bD(Zt,Mn.u_terrain_matrix),u_terrain_unpack:new o.bE(Zt,Mn.u_terrain_unpack),u_terrain_exaggeration:new o.b5(Zt,Mn.u_terrain_exaggeration)}))(l,nn),this.projectionUniforms=((Zt,Mn)=>({u_projection_matrix:new o.bD(Zt,Mn.u_projection_matrix),u_projection_tile_mercator_coords:new o.bE(Zt,Mn.u_projection_tile_mercator_coords),u_projection_clipping_plane:new o.bE(Zt,Mn.u_projection_clipping_plane),u_projection_transition:new o.b5(Zt,Mn.u_projection_transition),u_projection_fallback_matrix:new o.bD(Zt,Mn.u_projection_fallback_matrix)}))(l,nn),this.binderUniforms=_?_.getUniforms(l,nn):[]}draw(l,c,_,w,K,N,$,ee,ae,xe,ke,Ke,$e,Xe,pt,ut,mt,vt,Bt){const kt=l.gl;if(this.failedToCreate)return;if(l.program.set(this.program),l.setDepthMode(_),l.setStencilMode(w),l.setColorMode(K),l.setCullFace(N),ee){l.activeTexture.set(kt.TEXTURE2),kt.bindTexture(kt.TEXTURE_2D,ee.depthTexture),l.activeTexture.set(kt.TEXTURE3),kt.bindTexture(kt.TEXTURE_2D,ee.texture);for(const zt in this.terrainUniforms)this.terrainUniforms[zt].set(ee[zt])}if(ae)for(const zt in ae)this.projectionUniforms[Gd[zt]].set(ae[zt]);if($)for(const zt in this.fixedUniforms)this.fixedUniforms[zt].set($[zt]);ut&&ut.setUniforms(l,this.binderUniforms,Xe,{zoom:pt});let Rt=0;switch(c){case kt.LINES:Rt=2;break;case kt.TRIANGLES:Rt=3;break;case kt.LINE_STRIP:Rt=1}for(const zt of $e.get()){const Tt=zt.vaos||(zt.vaos={});(Tt[xe]||(Tt[xe]=new BA)).bind(l,this,ke,ut?ut.getPaintVertexBuffers():[],Ke,zt.vertexOffset,mt,vt,Bt),kt.drawElements(c,zt.primitiveLength*Rt,kt.UNSIGNED_SHORT,zt.primitiveOffset*Rt*2)}}}function $f(k,l,c){const _=1/o.at(c,1,l.transform.tileZoom),w=Math.pow(2,c.tileID.overscaledZ),K=c.tileSize*Math.pow(2,l.transform.tileZoom)/w,N=K*(c.tileID.canonical.x+c.tileID.wrap*w),$=K*c.tileID.canonical.y;return{u_image:0,u_texsize:c.imageAtlasTexture.size,u_scale:[_,k.fromScale,k.toScale],u_fade:k.t,u_pixel_coord_upper:[N>>16,$>>16],u_pixel_coord_lower:[65535&N,65535&$]}}const dd=(k,l,c,_)=>{const w=k.style.light,K=w.properties.get("position"),N=[K.x,K.y,K.z],$=o.bI();w.properties.get("anchor")==="viewport"&&o.bJ($,k.transform.bearingInRadians),o.bK(N,N,$);const ee=k.transform.transformLightDirection(N),ae=w.properties.get("color");return{u_lightpos:N,u_lightpos_globe:ee,u_lightintensity:w.properties.get("intensity"),u_lightcolor:[ae.r,ae.g,ae.b],u_vertical_gradient:+l,u_opacity:c,u_fill_translate:_}},Bp=(k,l,c,_,w,K,N)=>o.e(dd(k,l,c,_),$f(K,k,N),{u_height_factor:-Math.pow(2,w.overscaledZ)/N.tileSize/8}),JA=(k,l,c,_)=>o.e($f(l,k,c),{u_fill_translate:_}),ta=(k,l)=>({u_world:k,u_fill_translate:l}),of=(k,l,c,_,w)=>o.e(JA(k,l,c,w),{u_world:_}),gh=(k,l,c,_,w)=>{const K=k.transform;let N,$,ee=0;if(c.paint.get("circle-pitch-alignment")==="map"){const ae=o.at(l,1,K.zoom);N=!0,$=[ae,ae],ee=ae/(o.X*Math.pow(2,l.tileID.overscaledZ))*2*Math.PI*w}else N=!1,$=K.pixelsToGLUnits;return{u_camera_to_center_distance:K.cameraToCenterDistance,u_scale_with_map:+(c.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+N,u_device_pixel_ratio:k.pixelRatio,u_extrude_scale:$,u_globe_extrude_scale:ee,u_translate:_}},hd=k=>({u_pixel_extrude_scale:[1/k.width,1/k.height]}),sf=k=>({u_viewport_size:[k.width,k.height]}),fd=(k,l=1)=>({u_color:k,u_overlay:0,u_overlay_scale:l}),af=(k,l,c,_)=>{const w=o.at(k,1,l)/(o.X*Math.pow(2,k.tileID.overscaledZ))*2*Math.PI*_;return{u_extrude_scale:o.at(k,1,l),u_intensity:c,u_globe_extrude_scale:w}},ec=(k,l,c,_)=>{const w=o.H();o.bL(w,0,k.width,k.height,0,0,1);const K=k.context.gl;return{u_matrix:w,u_world:[K.drawingBufferWidth,K.drawingBufferHeight],u_image:c,u_color_ramp:_,u_opacity:l.paint.get("heatmap-opacity")}},yh=(k,l,c)=>{const _=c.paint.get("hillshade-shadow-color"),w=c.paint.get("hillshade-highlight-color"),K=c.paint.get("hillshade-accent-color");let N=c.paint.get("hillshade-illumination-direction")*(Math.PI/180);return c.paint.get("hillshade-illumination-anchor")==="viewport"&&(N+=k.transform.bearingInRadians),{u_image:0,u_latrange:vh(0,l.tileID),u_light:[c.paint.get("hillshade-exaggeration"),N],u_shadow:_,u_highlight:w,u_accent:K}},lf=(k,l)=>{const c=l.stride,_=o.H();return o.bL(_,0,o.X,-8192,0,0,1),o.J(_,_,[0,-8192,0]),{u_matrix:_,u_image:1,u_dimension:[c,c],u_zoom:k.overscaledZ,u_unpack:l.getUnpackVector()}};function vh(k,l){const c=Math.pow(2,l.canonical.z),_=l.canonical.y;return[new o.Y(0,_/c).toLngLat().lat,new o.Y(0,(_+1)/c).toLngLat().lat]}const Ch=(k,l,c,_)=>{const w=k.transform;return{u_translation:Gc(k,l,c),u_ratio:_/o.at(l,1,w.zoom),u_device_pixel_ratio:k.pixelRatio,u_units_to_pixels:[1/w.pixelsToGLUnits[0],1/w.pixelsToGLUnits[1]]}},xl=(k,l,c,_,w)=>o.e(Ch(k,l,c,_),{u_image:0,u_image_height:w}),_h=(k,l,c,_,w)=>{const K=k.transform,N=lA(l,K);return{u_translation:Gc(k,l,c),u_texsize:l.imageAtlasTexture.size,u_ratio:_/o.at(l,1,K.zoom),u_device_pixel_ratio:k.pixelRatio,u_image:0,u_scale:[N,w.fromScale,w.toScale],u_fade:w.t,u_units_to_pixels:[1/K.pixelsToGLUnits[0],1/K.pixelsToGLUnits[1]]}},zu=(k,l,c,_,w,K)=>{const N=k.lineAtlas,$=lA(l,k.transform),ee=c.layout.get("line-cap")==="round",ae=N.getDash(w.from,ee),xe=N.getDash(w.to,ee),ke=ae.width*K.fromScale,Ke=xe.width*K.toScale;return o.e(Ch(k,l,c,_),{u_patternscale_a:[$/ke,-ae.height/2],u_patternscale_b:[$/Ke,-xe.height/2],u_sdfgamma:N.width/(256*Math.min(ke,Ke)*k.pixelRatio)/2,u_image:0,u_tex_y_a:ae.y,u_tex_y_b:xe.y,u_mix:K.t})};function lA(k,l){return 1/o.at(k,1,l.tileZoom)}function Gc(k,l,c){return o.au(k.transform,l,c.paint.get("line-translate"),c.paint.get("line-translate-anchor"))}const bh=(k,l,c,_,w)=>{return{u_tl_parent:k,u_scale_parent:l,u_buffer_scale:1,u_fade_t:c.mix,u_opacity:c.opacity*_.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:_.paint.get("raster-brightness-min"),u_brightness_high:_.paint.get("raster-brightness-max"),u_saturation_factor:(N=_.paint.get("raster-saturation"),N>0?1-1/(1.001-N):-N),u_contrast_factor:(K=_.paint.get("raster-contrast"),K>0?1/(1-K):1+K),u_spin_weights:xh(_.paint.get("raster-hue-rotate")),u_coords_top:[w[0].x,w[0].y,w[1].x,w[1].y],u_coords_bottom:[w[3].x,w[3].y,w[2].x,w[2].y]};var K,N};function xh(k){k*=Math.PI/180;const l=Math.sin(k),c=Math.cos(k);return[(2*c+1)/3,(-Math.sqrt(3)*l-c+1)/3,(Math.sqrt(3)*l-c+1)/3]}const ju=(k,l,c,_,w,K,N,$,ee,ae,xe,ke,Ke)=>{const $e=N.transform;return{u_is_size_zoom_constant:+(k==="constant"||k==="source"),u_is_size_feature_constant:+(k==="constant"||k==="camera"),u_size_t:l?l.uSizeT:0,u_size:l?l.uSize:0,u_camera_to_center_distance:$e.cameraToCenterDistance,u_pitch:$e.pitch/360*2*Math.PI,u_rotate_symbol:+c,u_aspect_ratio:$e.width/$e.height,u_fade_change:N.options.fadeDuration?N.symbolFadeChange:1,u_label_plane_matrix:$,u_coord_matrix:ee,u_is_text:+xe,u_pitch_with_map:+_,u_is_along_line:w,u_is_variable_anchor:K,u_texsize:ke,u_texture:0,u_translation:ae,u_pitched_scale:Ke}},uA=(k,l,c,_,w,K,N,$,ee,ae,xe,ke,Ke,$e)=>{const Xe=N.transform;return o.e(ju(k,l,c,_,w,K,N,$,ee,ae,xe,ke,$e),{u_gamma_scale:_?Math.cos(Xe.pitch*Math.PI/180)*Xe.cameraToCenterDistance:1,u_device_pixel_ratio:N.pixelRatio,u_is_halo:1})},Ll=(k,l,c,_,w,K,N,$,ee,ae,xe,ke,Ke)=>o.e(uA(k,l,c,_,w,K,N,$,ee,ae,!0,xe,0,Ke),{u_texsize_icon:ke,u_texture_icon:1}),Qc=(k,l)=>({u_opacity:k,u_color:l}),uf=(k,l,c,_,w)=>o.e(function(K,N,$,ee){const ae=$.imageManager.getPattern(K.from.toString()),xe=$.imageManager.getPattern(K.to.toString()),{width:ke,height:Ke}=$.imageManager.getPixelSize(),$e=Math.pow(2,ee.tileID.overscaledZ),Xe=ee.tileSize*Math.pow(2,$.transform.tileZoom)/$e,pt=Xe*(ee.tileID.canonical.x+ee.tileID.wrap*$e),ut=Xe*ee.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:ae.tl,u_pattern_br_a:ae.br,u_pattern_tl_b:xe.tl,u_pattern_br_b:xe.br,u_texsize:[ke,Ke],u_mix:N.t,u_pattern_size_a:ae.displaySize,u_pattern_size_b:xe.displaySize,u_scale_a:N.fromScale,u_scale_b:N.toScale,u_tile_units_to_pixels:1/o.at(ee,1,$.transform.tileZoom),u_pixel_coord_upper:[pt>>16,ut>>16],u_pixel_coord_lower:[65535&pt,65535&ut]}}(c,w,l,_),{u_opacity:k}),Af=(k,l)=>{},Qd={fillExtrusion:(k,l)=>({u_lightpos:new o.bG(k,l.u_lightpos),u_lightpos_globe:new o.bG(k,l.u_lightpos_globe),u_lightintensity:new o.b5(k,l.u_lightintensity),u_lightcolor:new o.bG(k,l.u_lightcolor),u_vertical_gradient:new o.b5(k,l.u_vertical_gradient),u_opacity:new o.b5(k,l.u_opacity),u_fill_translate:new o.bH(k,l.u_fill_translate)}),fillExtrusionPattern:(k,l)=>({u_lightpos:new o.bG(k,l.u_lightpos),u_lightpos_globe:new o.bG(k,l.u_lightpos_globe),u_lightintensity:new o.b5(k,l.u_lightintensity),u_lightcolor:new o.bG(k,l.u_lightcolor),u_vertical_gradient:new o.b5(k,l.u_vertical_gradient),u_height_factor:new o.b5(k,l.u_height_factor),u_opacity:new o.b5(k,l.u_opacity),u_fill_translate:new o.bH(k,l.u_fill_translate),u_image:new o.bC(k,l.u_image),u_texsize:new o.bH(k,l.u_texsize),u_pixel_coord_upper:new o.bH(k,l.u_pixel_coord_upper),u_pixel_coord_lower:new o.bH(k,l.u_pixel_coord_lower),u_scale:new o.bG(k,l.u_scale),u_fade:new o.b5(k,l.u_fade)}),fill:(k,l)=>({u_fill_translate:new o.bH(k,l.u_fill_translate)}),fillPattern:(k,l)=>({u_image:new o.bC(k,l.u_image),u_texsize:new o.bH(k,l.u_texsize),u_pixel_coord_upper:new o.bH(k,l.u_pixel_coord_upper),u_pixel_coord_lower:new o.bH(k,l.u_pixel_coord_lower),u_scale:new o.bG(k,l.u_scale),u_fade:new o.b5(k,l.u_fade),u_fill_translate:new o.bH(k,l.u_fill_translate)}),fillOutline:(k,l)=>({u_world:new o.bH(k,l.u_world),u_fill_translate:new o.bH(k,l.u_fill_translate)}),fillOutlinePattern:(k,l)=>({u_world:new o.bH(k,l.u_world),u_image:new o.bC(k,l.u_image),u_texsize:new o.bH(k,l.u_texsize),u_pixel_coord_upper:new o.bH(k,l.u_pixel_coord_upper),u_pixel_coord_lower:new o.bH(k,l.u_pixel_coord_lower),u_scale:new o.bG(k,l.u_scale),u_fade:new o.b5(k,l.u_fade),u_fill_translate:new o.bH(k,l.u_fill_translate)}),circle:(k,l)=>({u_camera_to_center_distance:new o.b5(k,l.u_camera_to_center_distance),u_scale_with_map:new o.bC(k,l.u_scale_with_map),u_pitch_with_map:new o.bC(k,l.u_pitch_with_map),u_extrude_scale:new o.bH(k,l.u_extrude_scale),u_device_pixel_ratio:new o.b5(k,l.u_device_pixel_ratio),u_globe_extrude_scale:new o.b5(k,l.u_globe_extrude_scale),u_translate:new o.bH(k,l.u_translate)}),collisionBox:(k,l)=>({u_pixel_extrude_scale:new o.bH(k,l.u_pixel_extrude_scale)}),collisionCircle:(k,l)=>({u_viewport_size:new o.bH(k,l.u_viewport_size)}),debug:(k,l)=>({u_color:new o.bF(k,l.u_color),u_overlay:new o.bC(k,l.u_overlay),u_overlay_scale:new o.b5(k,l.u_overlay_scale)}),depth:Af,clippingMask:Af,heatmap:(k,l)=>({u_extrude_scale:new o.b5(k,l.u_extrude_scale),u_intensity:new o.b5(k,l.u_intensity),u_globe_extrude_scale:new o.b5(k,l.u_globe_extrude_scale)}),heatmapTexture:(k,l)=>({u_matrix:new o.bD(k,l.u_matrix),u_world:new o.bH(k,l.u_world),u_image:new o.bC(k,l.u_image),u_color_ramp:new o.bC(k,l.u_color_ramp),u_opacity:new o.b5(k,l.u_opacity)}),hillshade:(k,l)=>({u_image:new o.bC(k,l.u_image),u_latrange:new o.bH(k,l.u_latrange),u_light:new o.bH(k,l.u_light),u_shadow:new o.bF(k,l.u_shadow),u_highlight:new o.bF(k,l.u_highlight),u_accent:new o.bF(k,l.u_accent)}),hillshadePrepare:(k,l)=>({u_matrix:new o.bD(k,l.u_matrix),u_image:new o.bC(k,l.u_image),u_dimension:new o.bH(k,l.u_dimension),u_zoom:new o.b5(k,l.u_zoom),u_unpack:new o.bE(k,l.u_unpack)}),line:(k,l)=>({u_translation:new o.bH(k,l.u_translation),u_ratio:new o.b5(k,l.u_ratio),u_device_pixel_ratio:new o.b5(k,l.u_device_pixel_ratio),u_units_to_pixels:new o.bH(k,l.u_units_to_pixels)}),lineGradient:(k,l)=>({u_translation:new o.bH(k,l.u_translation),u_ratio:new o.b5(k,l.u_ratio),u_device_pixel_ratio:new o.b5(k,l.u_device_pixel_ratio),u_units_to_pixels:new o.bH(k,l.u_units_to_pixels),u_image:new o.bC(k,l.u_image),u_image_height:new o.b5(k,l.u_image_height)}),linePattern:(k,l)=>({u_translation:new o.bH(k,l.u_translation),u_texsize:new o.bH(k,l.u_texsize),u_ratio:new o.b5(k,l.u_ratio),u_device_pixel_ratio:new o.b5(k,l.u_device_pixel_ratio),u_image:new o.bC(k,l.u_image),u_units_to_pixels:new o.bH(k,l.u_units_to_pixels),u_scale:new o.bG(k,l.u_scale),u_fade:new o.b5(k,l.u_fade)}),lineSDF:(k,l)=>({u_translation:new o.bH(k,l.u_translation),u_ratio:new o.b5(k,l.u_ratio),u_device_pixel_ratio:new o.b5(k,l.u_device_pixel_ratio),u_units_to_pixels:new o.bH(k,l.u_units_to_pixels),u_patternscale_a:new o.bH(k,l.u_patternscale_a),u_patternscale_b:new o.bH(k,l.u_patternscale_b),u_sdfgamma:new o.b5(k,l.u_sdfgamma),u_image:new o.bC(k,l.u_image),u_tex_y_a:new o.b5(k,l.u_tex_y_a),u_tex_y_b:new o.b5(k,l.u_tex_y_b),u_mix:new o.b5(k,l.u_mix)}),raster:(k,l)=>({u_tl_parent:new o.bH(k,l.u_tl_parent),u_scale_parent:new o.b5(k,l.u_scale_parent),u_buffer_scale:new o.b5(k,l.u_buffer_scale),u_fade_t:new o.b5(k,l.u_fade_t),u_opacity:new o.b5(k,l.u_opacity),u_image0:new o.bC(k,l.u_image0),u_image1:new o.bC(k,l.u_image1),u_brightness_low:new o.b5(k,l.u_brightness_low),u_brightness_high:new o.b5(k,l.u_brightness_high),u_saturation_factor:new o.b5(k,l.u_saturation_factor),u_contrast_factor:new o.b5(k,l.u_contrast_factor),u_spin_weights:new o.bG(k,l.u_spin_weights),u_coords_top:new o.bE(k,l.u_coords_top),u_coords_bottom:new o.bE(k,l.u_coords_bottom)}),symbolIcon:(k,l)=>({u_is_size_zoom_constant:new o.bC(k,l.u_is_size_zoom_constant),u_is_size_feature_constant:new o.bC(k,l.u_is_size_feature_constant),u_size_t:new o.b5(k,l.u_size_t),u_size:new o.b5(k,l.u_size),u_camera_to_center_distance:new o.b5(k,l.u_camera_to_center_distance),u_pitch:new o.b5(k,l.u_pitch),u_rotate_symbol:new o.bC(k,l.u_rotate_symbol),u_aspect_ratio:new o.b5(k,l.u_aspect_ratio),u_fade_change:new o.b5(k,l.u_fade_change),u_label_plane_matrix:new o.bD(k,l.u_label_plane_matrix),u_coord_matrix:new o.bD(k,l.u_coord_matrix),u_is_text:new o.bC(k,l.u_is_text),u_pitch_with_map:new o.bC(k,l.u_pitch_with_map),u_is_along_line:new o.bC(k,l.u_is_along_line),u_is_variable_anchor:new o.bC(k,l.u_is_variable_anchor),u_texsize:new o.bH(k,l.u_texsize),u_texture:new o.bC(k,l.u_texture),u_translation:new o.bH(k,l.u_translation),u_pitched_scale:new o.b5(k,l.u_pitched_scale)}),symbolSDF:(k,l)=>({u_is_size_zoom_constant:new o.bC(k,l.u_is_size_zoom_constant),u_is_size_feature_constant:new o.bC(k,l.u_is_size_feature_constant),u_size_t:new o.b5(k,l.u_size_t),u_size:new o.b5(k,l.u_size),u_camera_to_center_distance:new o.b5(k,l.u_camera_to_center_distance),u_pitch:new o.b5(k,l.u_pitch),u_rotate_symbol:new o.bC(k,l.u_rotate_symbol),u_aspect_ratio:new o.b5(k,l.u_aspect_ratio),u_fade_change:new o.b5(k,l.u_fade_change),u_label_plane_matrix:new o.bD(k,l.u_label_plane_matrix),u_coord_matrix:new o.bD(k,l.u_coord_matrix),u_is_text:new o.bC(k,l.u_is_text),u_pitch_with_map:new o.bC(k,l.u_pitch_with_map),u_is_along_line:new o.bC(k,l.u_is_along_line),u_is_variable_anchor:new o.bC(k,l.u_is_variable_anchor),u_texsize:new o.bH(k,l.u_texsize),u_texture:new o.bC(k,l.u_texture),u_gamma_scale:new o.b5(k,l.u_gamma_scale),u_device_pixel_ratio:new o.b5(k,l.u_device_pixel_ratio),u_is_halo:new o.bC(k,l.u_is_halo),u_translation:new o.bH(k,l.u_translation),u_pitched_scale:new o.b5(k,l.u_pitched_scale)}),symbolTextAndIcon:(k,l)=>({u_is_size_zoom_constant:new o.bC(k,l.u_is_size_zoom_constant),u_is_size_feature_constant:new o.bC(k,l.u_is_size_feature_constant),u_size_t:new o.b5(k,l.u_size_t),u_size:new o.b5(k,l.u_size),u_camera_to_center_distance:new o.b5(k,l.u_camera_to_center_distance),u_pitch:new o.b5(k,l.u_pitch),u_rotate_symbol:new o.bC(k,l.u_rotate_symbol),u_aspect_ratio:new o.b5(k,l.u_aspect_ratio),u_fade_change:new o.b5(k,l.u_fade_change),u_label_plane_matrix:new o.bD(k,l.u_label_plane_matrix),u_coord_matrix:new o.bD(k,l.u_coord_matrix),u_is_text:new o.bC(k,l.u_is_text),u_pitch_with_map:new o.bC(k,l.u_pitch_with_map),u_is_along_line:new o.bC(k,l.u_is_along_line),u_is_variable_anchor:new o.bC(k,l.u_is_variable_anchor),u_texsize:new o.bH(k,l.u_texsize),u_texsize_icon:new o.bH(k,l.u_texsize_icon),u_texture:new o.bC(k,l.u_texture),u_texture_icon:new o.bC(k,l.u_texture_icon),u_gamma_scale:new o.b5(k,l.u_gamma_scale),u_device_pixel_ratio:new o.b5(k,l.u_device_pixel_ratio),u_is_halo:new o.bC(k,l.u_is_halo),u_translation:new o.bH(k,l.u_translation),u_pitched_scale:new o.b5(k,l.u_pitched_scale)}),background:(k,l)=>({u_opacity:new o.b5(k,l.u_opacity),u_color:new o.bF(k,l.u_color)}),backgroundPattern:(k,l)=>({u_opacity:new o.b5(k,l.u_opacity),u_image:new o.bC(k,l.u_image),u_pattern_tl_a:new o.bH(k,l.u_pattern_tl_a),u_pattern_br_a:new o.bH(k,l.u_pattern_br_a),u_pattern_tl_b:new o.bH(k,l.u_pattern_tl_b),u_pattern_br_b:new o.bH(k,l.u_pattern_br_b),u_texsize:new o.bH(k,l.u_texsize),u_mix:new o.b5(k,l.u_mix),u_pattern_size_a:new o.bH(k,l.u_pattern_size_a),u_pattern_size_b:new o.bH(k,l.u_pattern_size_b),u_scale_a:new o.b5(k,l.u_scale_a),u_scale_b:new o.b5(k,l.u_scale_b),u_pixel_coord_upper:new o.bH(k,l.u_pixel_coord_upper),u_pixel_coord_lower:new o.bH(k,l.u_pixel_coord_lower),u_tile_units_to_pixels:new o.b5(k,l.u_tile_units_to_pixels)}),terrain:(k,l)=>({u_texture:new o.bC(k,l.u_texture),u_ele_delta:new o.b5(k,l.u_ele_delta),u_fog_matrix:new o.bD(k,l.u_fog_matrix),u_fog_color:new o.bF(k,l.u_fog_color),u_fog_ground_blend:new o.b5(k,l.u_fog_ground_blend),u_fog_ground_blend_opacity:new o.b5(k,l.u_fog_ground_blend_opacity),u_horizon_color:new o.bF(k,l.u_horizon_color),u_horizon_fog_blend:new o.b5(k,l.u_horizon_fog_blend),u_is_globe_mode:new o.b5(k,l.u_is_globe_mode)}),terrainDepth:(k,l)=>({u_ele_delta:new o.b5(k,l.u_ele_delta)}),terrainCoords:(k,l)=>({u_texture:new o.bC(k,l.u_texture),u_terrain_coords_id:new o.b5(k,l.u_terrain_coords_id),u_ele_delta:new o.b5(k,l.u_ele_delta)}),projectionErrorMeasurement:(k,l)=>({u_input:new o.b5(k,l.u_input),u_output_expected:new o.b5(k,l.u_output_expected)}),atmosphere:(k,l)=>({u_sun_pos:new o.bG(k,l.u_sun_pos),u_atmosphere_blend:new o.b5(k,l.u_atmosphere_blend),u_globe_position:new o.bG(k,l.u_globe_position),u_globe_radius:new o.b5(k,l.u_globe_radius),u_inv_proj_matrix:new o.bD(k,l.u_inv_proj_matrix)}),sky:(k,l)=>({u_sky_color:new o.bF(k,l.u_sky_color),u_horizon_color:new o.bF(k,l.u_horizon_color),u_horizon:new o.bH(k,l.u_horizon),u_horizon_normal:new o.bH(k,l.u_horizon_normal),u_sky_horizon_blend:new o.b5(k,l.u_sky_horizon_blend),u_sky_blend:new o.b5(k,l.u_sky_blend)})};class pd{constructor(l,c,_){this.context=l;const w=l.gl;this.buffer=w.createBuffer(),this.dynamicDraw=!!_,this.context.unbindVAO(),l.bindElementBuffer.set(this.buffer),w.bufferData(w.ELEMENT_ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?w.DYNAMIC_DRAW:w.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(l){const c=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),c.bufferSubData(c.ELEMENT_ARRAY_BUFFER,0,l.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const la={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class rl{constructor(l,c,_,w){this.length=c.length,this.attributes=_,this.itemSize=c.bytesPerElement,this.dynamicDraw=w,this.context=l;const K=l.gl;this.buffer=K.createBuffer(),l.bindVertexBuffer.set(this.buffer),K.bufferData(K.ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?K.DYNAMIC_DRAW:K.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(l){if(l.length!==this.length)throw new Error(`Length of new data is ${l.length}, which doesn't match current length of ${this.length}`);const c=this.context.gl;this.bind(),c.bufferSubData(c.ARRAY_BUFFER,0,l.arrayBuffer)}enableAttributes(l,c){for(let _=0;_<this.attributes.length;_++){const w=c.attributes[this.attributes[_].name];w!==void 0&&l.enableVertexAttribArray(w)}}setVertexAttribPointers(l,c,_){for(let w=0;w<this.attributes.length;w++){const K=this.attributes[w],N=c.attributes[K.name];N!==void 0&&l.vertexAttribPointer(N,K.components,l[la[K.type]],!1,this.itemSize,K.offset+this.itemSize*(_||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Zo{constructor(l){this.gl=l.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(l){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class wh extends Zo{getDefault(){return o.b4.transparent}set(l){const c=this.current;(l.r!==c.r||l.g!==c.g||l.b!==c.b||l.a!==c.a||this.dirty)&&(this.gl.clearColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class hm extends Zo{getDefault(){return 1}set(l){(l!==this.current||this.dirty)&&(this.gl.clearDepth(l),this.current=l,this.dirty=!1)}}class md extends Zo{getDefault(){return 0}set(l){(l!==this.current||this.dirty)&&(this.gl.clearStencil(l),this.current=l,this.dirty=!1)}}class Cu extends Zo{getDefault(){return[!0,!0,!0,!0]}set(l){const c=this.current;(l[0]!==c[0]||l[1]!==c[1]||l[2]!==c[2]||l[3]!==c[3]||this.dirty)&&(this.gl.colorMask(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class Mh extends Zo{getDefault(){return!0}set(l){(l!==this.current||this.dirty)&&(this.gl.depthMask(l),this.current=l,this.dirty=!1)}}class cf extends Zo{getDefault(){return 255}set(l){(l!==this.current||this.dirty)&&(this.gl.stencilMask(l),this.current=l,this.dirty=!1)}}class wc extends Zo{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(l){const c=this.current;(l.func!==c.func||l.ref!==c.ref||l.mask!==c.mask||this.dirty)&&(this.gl.stencilFunc(l.func,l.ref,l.mask),this.current=l,this.dirty=!1)}}class qd extends Zo{getDefault(){const l=this.gl;return[l.KEEP,l.KEEP,l.KEEP]}set(l){const c=this.current;(l[0]!==c[0]||l[1]!==c[1]||l[2]!==c[2]||this.dirty)&&(this.gl.stencilOp(l[0],l[1],l[2]),this.current=l,this.dirty=!1)}}class Sh extends Zo{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const c=this.gl;l?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST),this.current=l,this.dirty=!1}}class Eh extends Zo{getDefault(){return[0,1]}set(l){const c=this.current;(l[0]!==c[0]||l[1]!==c[1]||this.dirty)&&(this.gl.depthRange(l[0],l[1]),this.current=l,this.dirty=!1)}}class Jl extends Zo{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const c=this.gl;l?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST),this.current=l,this.dirty=!1}}class Jt extends Zo{getDefault(){return this.gl.LESS}set(l){(l!==this.current||this.dirty)&&(this.gl.depthFunc(l),this.current=l,this.dirty=!1)}}class En extends Zo{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const c=this.gl;l?c.enable(c.BLEND):c.disable(c.BLEND),this.current=l,this.dirty=!1}}class ln extends Zo{getDefault(){const l=this.gl;return[l.ONE,l.ZERO]}set(l){const c=this.current;(l[0]!==c[0]||l[1]!==c[1]||this.dirty)&&(this.gl.blendFunc(l[0],l[1]),this.current=l,this.dirty=!1)}}class Fr extends Zo{getDefault(){return o.b4.transparent}set(l){const c=this.current;(l.r!==c.r||l.g!==c.g||l.b!==c.b||l.a!==c.a||this.dirty)&&(this.gl.blendColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class Ei extends Zo{getDefault(){return this.gl.FUNC_ADD}set(l){(l!==this.current||this.dirty)&&(this.gl.blendEquation(l),this.current=l,this.dirty=!1)}}class ho extends Zo{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const c=this.gl;l?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE),this.current=l,this.dirty=!1}}class na extends Zo{getDefault(){return this.gl.BACK}set(l){(l!==this.current||this.dirty)&&(this.gl.cullFace(l),this.current=l,this.dirty=!1)}}class rs extends Zo{getDefault(){return this.gl.CCW}set(l){(l!==this.current||this.dirty)&&(this.gl.frontFace(l),this.current=l,this.dirty=!1)}}class OA extends Zo{getDefault(){return null}set(l){(l!==this.current||this.dirty)&&(this.gl.useProgram(l),this.current=l,this.dirty=!1)}}class df extends Zo{getDefault(){return this.gl.TEXTURE0}set(l){(l!==this.current||this.dirty)&&(this.gl.activeTexture(l),this.current=l,this.dirty=!1)}}class Nu extends Zo{getDefault(){const l=this.gl;return[0,0,l.drawingBufferWidth,l.drawingBufferHeight]}set(l){const c=this.current;(l[0]!==c[0]||l[1]!==c[1]||l[2]!==c[2]||l[3]!==c[3]||this.dirty)&&(this.gl.viewport(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class _u extends Zo{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,l),this.current=l,this.dirty=!1}}class bu extends Zo{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const c=this.gl;c.bindRenderbuffer(c.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class Ul extends Zo{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const c=this.gl;c.bindTexture(c.TEXTURE_2D,l),this.current=l,this.dirty=!1}}class Wu extends Zo{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const c=this.gl;c.bindBuffer(c.ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class ao extends Zo{getDefault(){return null}set(l){const c=this.gl;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class Oo extends Zo{getDefault(){return null}set(l){var c;if(l===this.current&&!this.dirty)return;const _=this.gl;Ki(_)?_.bindVertexArray(l):(c=_.getExtension("OES_vertex_array_object"))===null||c===void 0||c.bindVertexArrayOES(l),this.current=l,this.dirty=!1}}class gd extends Zo{getDefault(){return 4}set(l){if(l===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_ALIGNMENT,l),this.current=l,this.dirty=!1}}class yd extends Zo{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,l),this.current=l,this.dirty=!1}}class eu extends Zo{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,l),this.current=l,this.dirty=!1}}class AA extends Zo{constructor(l,c){super(l),this.context=l,this.parent=c}getDefault(){return null}}class zl extends AA{setDirty(){this.dirty=!0}set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,l,0),this.current=l,this.dirty=!1}}class tc extends AA{set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class cA extends AA{set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_STENCIL_ATTACHMENT,c.RENDERBUFFER,l),this.current=l,this.dirty=!1}}const tu="Framebuffer is not complete";class qc{constructor(l,c,_,w,K){this.context=l,this.width=c,this.height=_;const N=l.gl,$=this.framebuffer=N.createFramebuffer();if(this.colorAttachment=new zl(l,$),w)this.depthAttachment=K?new cA(l,$):new tc(l,$);else if(K)throw new Error("Stencil cannot be set without depth");if(N.checkFramebufferStatus(N.FRAMEBUFFER)!==N.FRAMEBUFFER_COMPLETE)throw new Error(tu)}destroy(){const l=this.context.gl,c=this.colorAttachment.get();if(c&&l.deleteTexture(c),this.depthAttachment){const _=this.depthAttachment.get();_&&l.deleteRenderbuffer(_)}l.deleteFramebuffer(this.framebuffer)}}class vd{constructor(l){var c,_;if(this.gl=l,this.clearColor=new wh(this),this.clearDepth=new hm(this),this.clearStencil=new md(this),this.colorMask=new Cu(this),this.depthMask=new Mh(this),this.stencilMask=new cf(this),this.stencilFunc=new wc(this),this.stencilOp=new qd(this),this.stencilTest=new Sh(this),this.depthRange=new Eh(this),this.depthTest=new Jl(this),this.depthFunc=new Jt(this),this.blend=new En(this),this.blendFunc=new ln(this),this.blendColor=new Fr(this),this.blendEquation=new Ei(this),this.cullFace=new ho(this),this.cullFaceSide=new na(this),this.frontFace=new rs(this),this.program=new OA(this),this.activeTexture=new df(this),this.viewport=new Nu(this),this.bindFramebuffer=new _u(this),this.bindRenderbuffer=new bu(this),this.bindTexture=new Ul(this),this.bindVertexBuffer=new Wu(this),this.bindElementBuffer=new ao(this),this.bindVertexArray=new Oo(this),this.pixelStoreUnpack=new gd(this),this.pixelStoreUnpackPremultiplyAlpha=new yd(this),this.pixelStoreUnpackFlipY=new eu(this),this.extTextureFilterAnisotropic=l.getExtension("EXT_texture_filter_anisotropic")||l.getExtension("MOZ_EXT_texture_filter_anisotropic")||l.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=l.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=l.getParameter(l.MAX_TEXTURE_SIZE),Ki(l)){this.HALF_FLOAT=l.HALF_FLOAT;const w=l.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(c=l.RGBA16F)!==null&&c!==void 0?c:w==null?void 0:w.RGBA16F_EXT,this.RGB16F=(_=l.RGB16F)!==null&&_!==void 0?_:w==null?void 0:w.RGB16F_EXT,l.getExtension("EXT_color_buffer_float")}else{l.getExtension("EXT_color_buffer_half_float"),l.getExtension("OES_texture_half_float_linear");const w=l.getExtension("OES_texture_half_float");this.HALF_FLOAT=w==null?void 0:w.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(l,c){return new pd(this,l,c)}createVertexBuffer(l,c,_){return new rl(this,l,c,_)}createRenderbuffer(l,c,_){const w=this.gl,K=w.createRenderbuffer();return this.bindRenderbuffer.set(K),w.renderbufferStorage(w.RENDERBUFFER,l,c,_),this.bindRenderbuffer.set(null),K}createFramebuffer(l,c,_,w){return new qc(this,l,c,_,w)}clear({color:l,depth:c,stencil:_}){const w=this.gl;let K=0;l&&(K|=w.COLOR_BUFFER_BIT,this.clearColor.set(l),this.colorMask.set([!0,!0,!0,!0])),c!==void 0&&(K|=w.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(c),this.depthMask.set(!0)),_!==void 0&&(K|=w.STENCIL_BUFFER_BIT,this.clearStencil.set(_),this.stencilMask.set(255)),w.clear(K)}setCullFace(l){l.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(l.mode),this.frontFace.set(l.frontFace))}setDepthMode(l){l.func!==this.gl.ALWAYS||l.mask?(this.depthTest.set(!0),this.depthFunc.set(l.func),this.depthMask.set(l.mask),this.depthRange.set(l.range)):this.depthTest.set(!1)}setStencilMode(l){l.test.func!==this.gl.ALWAYS||l.mask?(this.stencilTest.set(!0),this.stencilMask.set(l.mask),this.stencilOp.set([l.fail,l.depthFail,l.pass]),this.stencilFunc.set({func:l.test.func,ref:l.ref,mask:l.test.mask})):this.stencilTest.set(!1)}setColorMode(l){o.bz(l.blendFunction,co.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(l.blendFunction),this.blendColor.set(l.blendColor)),this.colorMask.set(l.mask)}createVertexArray(){var l;return Ki(this.gl)?this.gl.createVertexArray():(l=this.gl.getExtension("OES_vertex_array_object"))===null||l===void 0?void 0:l.createVertexArrayOES()}deleteVertexArray(l){var c;return Ki(this.gl)?this.gl.deleteVertexArray(l):(c=this.gl.getExtension("OES_vertex_array_object"))===null||c===void 0?void 0:c.deleteVertexArrayOES(l)}unbindVAO(){this.bindVertexArray.set(null)}}let Wa;function Yc(k,l,c,_,w){const K=k.context,N=k.transform,$=K.gl,ee=k.useProgram("collisionBox"),ae=[];let xe=0,ke=0;for(let mt=0;mt<_.length;mt++){const vt=_[mt],Bt=l.getTile(vt).getBucket(c);if(!Bt)continue;const kt=w?Bt.textCollisionBox:Bt.iconCollisionBox,Rt=Bt.collisionCircleArray;Rt.length>0&&(ae.push({circleArray:Rt,circleOffset:ke,coord:vt}),xe+=Rt.length/4,ke=xe),kt&&ee.draw(K,$.LINES,Yr.disabled,$i.disabled,k.colorModeForRenderPass(),Ui.disabled,hd(k.transform),k.style.map.terrain&&k.style.map.terrain.getTerrainData(vt),N.getProjectionData({overscaledTileID:vt,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),c.id,kt.layoutVertexBuffer,kt.indexBuffer,kt.segments,null,k.transform.zoom,null,null,kt.collisionVertexBuffer)}if(!w||!ae.length)return;const Ke=k.useProgram("collisionCircle"),$e=new o.bM;$e.resize(4*xe),$e._trim();let Xe=0;for(const mt of ae)for(let vt=0;vt<mt.circleArray.length/4;vt++){const Bt=4*vt,kt=mt.circleArray[Bt+0],Rt=mt.circleArray[Bt+1],zt=mt.circleArray[Bt+2],Tt=mt.circleArray[Bt+3];$e.emplace(Xe++,kt,Rt,zt,Tt,0),$e.emplace(Xe++,kt,Rt,zt,Tt,1),$e.emplace(Xe++,kt,Rt,zt,Tt,2),$e.emplace(Xe++,kt,Rt,zt,Tt,3)}(!Wa||Wa.length<2*xe)&&(Wa=function(mt){const vt=2*mt,Bt=new o.bO;Bt.resize(vt),Bt._trim();for(let kt=0;kt<vt;kt++){const Rt=6*kt;Bt.uint16[Rt+0]=4*kt+0,Bt.uint16[Rt+1]=4*kt+1,Bt.uint16[Rt+2]=4*kt+2,Bt.uint16[Rt+3]=4*kt+2,Bt.uint16[Rt+4]=4*kt+3,Bt.uint16[Rt+5]=4*kt+0}return Bt}(xe));const pt=K.createIndexBuffer(Wa,!0),ut=K.createVertexBuffer($e,o.bN.members,!0);for(const mt of ae){const vt=sf(k.transform);Ke.draw(K,$.TRIANGLES,Yr.disabled,$i.disabled,k.colorModeForRenderPass(),Ui.disabled,vt,k.style.map.terrain&&k.style.map.terrain.getTerrainData(mt.coord),null,c.id,ut,pt,o.aD.simpleSegment(0,2*mt.circleOffset,mt.circleArray.length,mt.circleArray.length/2),null,k.transform.zoom,null,null,null)}ut.destroy(),pt.destroy()}const Cd=o.aq(new Float32Array(16));function nc(k,l,c,_,w,K){const{horizontalAlign:N,verticalAlign:$}=o.ay(k);return new o.P((-(N-.5)*l/w+_[0])*K,(-($-.5)*c/w+_[1])*K)}function Bh(k,l,c,_,w,K){const N=l.tileAnchorPoint.add(new o.P(l.translation[0],l.translation[1]));if(l.pitchWithMap){let $=_.mult(K);c||($=$.rotate(-w));const ee=N.add($);return Gt(ee.x,ee.y,l.pitchedLabelPlaneMatrix,l.getElevation).point}if(c){const $=er(l.tileAnchorPoint.x+1,l.tileAnchorPoint.y,l).point.sub(k),ee=Math.atan($.y/$.x)+($.x<0?Math.PI:0);return k.add(_.rotate(ee))}return k.add(_)}function Gu(k,l,c,_,w,K,N,$,ee,ae,xe,ke){const Ke=k.text.placedSymbolArray,$e=k.text.dynamicLayoutVertexArray,Xe=k.icon.dynamicLayoutVertexArray,pt={};$e.clear();for(let ut=0;ut<Ke.length;ut++){const mt=Ke.get(ut),vt=mt.hidden||!mt.crossTileID||k.allowVerticalPlacement&&!mt.placedOrientation?null:_[mt.crossTileID];if(vt){const Bt=new o.P(mt.anchorX,mt.anchorY),kt={getElevation:ke,width:w.width,height:w.height,pitchedLabelPlaneMatrix:K,lineVertexArray:null,pitchWithMap:c,transform:w,projectionCache:null,tileAnchorPoint:Bt,translation:ae,unwrappedTileID:xe},Rt=c?Ur(Bt.x,Bt.y,kt):er(Bt.x,Bt.y,kt),zt=jt(w.cameraToCenterDistance,Rt.signedDistanceFromCamera);let Tt=o.aj(k.textSizeData,$,mt)*zt/o.as;c&&(Tt*=k.tilePixelRatio/N);const{width:nn,height:Zt,anchor:Mn,textOffset:Bn,textBoxScale:yn}=vt,In=nc(Mn,nn,Zt,Bn,yn,Tt),Nn=w.getPitchedTextCorrection(Bt.x+ae[0],Bt.y+ae[1],xe),Fn=Bh(Rt.point,kt,l,In,-w.bearingInRadians,Nn),pr=k.allowVerticalPlacement&&mt.placedOrientation===o.ai.vertical?Math.PI/2:0;for(let ki=0;ki<mt.numGlyphs;ki++)o.ak($e,Fn,pr);ee&&mt.associatedIconIndex>=0&&(pt[mt.associatedIconIndex]={shiftedAnchor:Fn,angle:pr})}else qi(mt.numGlyphs,$e)}if(ee){Xe.clear();const ut=k.icon.placedSymbolArray;for(let mt=0;mt<ut.length;mt++){const vt=ut.get(mt);if(vt.hidden)qi(vt.numGlyphs,Xe);else{const Bt=pt[mt];if(Bt)for(let kt=0;kt<vt.numGlyphs;kt++)o.ak(Xe,Bt.shiftedAnchor,Bt.angle);else qi(vt.numGlyphs,Xe)}}k.icon.dynamicLayoutVertexBuffer.updateData(Xe)}k.text.dynamicLayoutVertexBuffer.updateData($e)}function $c(k,l,c){return c.iconsInText&&l?"symbolTextAndIcon":k?"symbolSDF":"symbolIcon"}function rc(k,l,c,_,w,K,N,$,ee,ae,xe,ke,Ke){const $e=k.context,Xe=$e.gl,pt=k.transform,ut=$==="map",mt=ee==="map",vt=$!=="viewport"&&c.layout.get("symbol-placement")!=="point",Bt=ut&&!mt&&!vt,kt=!c.layout.get("symbol-sort-key").isConstant();let Rt=!1;const zt=k.getDepthModeForSublayer(0,Yr.ReadOnly),Tt=c._unevaluatedLayout.hasValue("text-variable-anchor")||c._unevaluatedLayout.hasValue("text-variable-anchor-offset"),nn=[],Zt=pt.getCircleRadiusCorrection();for(const Mn of _){const Bn=l.getTile(Mn),yn=Bn.getBucket(c);if(!yn)continue;const In=w?yn.text:yn.icon;if(!In||!In.segments.get().length||!In.hasVisibleVertices)continue;const Nn=In.programConfigurations.get(c.id),Fn=w||yn.sdfIcons,pr=w?yn.textSizeData:yn.iconSizeData,ki=mt||pt.pitch!==0,Wi=k.useProgram($c(Fn,w,yn),Nn),Lo=o.ah(pr,pt.zoom),Mi=k.style.map.terrain&&k.style.map.terrain.getTerrainData(Mn);let fs,ko,To,vo,il=[0,0],Xo=null;if(w)ko=Bn.glyphAtlasTexture,To=Xe.LINEAR,fs=Bn.glyphAtlasTexture.size,yn.iconsInText&&(il=Bn.imageAtlasTexture.size,Xo=Bn.imageAtlasTexture,vo=ki||k.options.rotating||k.options.zooming||pr.kind==="composite"||pr.kind==="camera"?Xe.LINEAR:Xe.NEAREST);else{const os=c.layout.get("icon-size").constantOr(0)!==1||yn.iconsNeedLinear;ko=Bn.imageAtlasTexture,To=Fn||k.options.rotating||k.options.zooming||os||ki?Xe.LINEAR:Xe.NEAREST,fs=Bn.imageAtlasTexture.size}const Jo=o.at(Bn,1,k.transform.zoom),ol=ct(ut,k.transform,Jo),yA=o.H();o.an(yA,ol);const lu=dt(mt,ut,k.transform,Jo),Ta=o.au(pt,Bn,K,N),Sl=pt.getProjectionData({overscaledTileID:Mn,applyGlobeMatrix:!Ke,applyTerrainMatrix:!0}),jA=Tt&&yn.hasTextData(),vA=c.layout.get("icon-text-fit")!=="none"&&jA&&yn.hasIconData();if(vt){const os=k.style.map.terrain?(Bu,$s)=>k.style.map.terrain.getElevation(Mn,Bu,$s):null,ss=c.layout.get("text-rotation-alignment")==="map";Tn(yn,k,w,ol,yA,mt,ae,ss,Mn.toUnwrapped(),pt.width,pt.height,Ta,os)}const NA=w&&Tt||vA,Aa=vt||NA?Cd:mt?ol:k.transform.clipSpaceToPixelsMatrix,El=Fn&&c.paint.get(w?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Pa;Pa=Fn?yn.iconsInText?Ll(pr.kind,Lo,Bt,mt,vt,NA,k,Aa,lu,Ta,fs,il,Zt):uA(pr.kind,Lo,Bt,mt,vt,NA,k,Aa,lu,Ta,w,fs,0,Zt):ju(pr.kind,Lo,Bt,mt,vt,NA,k,Aa,lu,Ta,w,fs,Zt);const uu={program:Wi,buffers:In,uniformValues:Pa,projectionData:Sl,atlasTexture:ko,atlasTextureIcon:Xo,atlasInterpolation:To,atlasInterpolationIcon:vo,isSDF:Fn,hasHalo:El};if(kt&&yn.canOverlap){Rt=!0;const os=In.segments.get();for(const ss of os)nn.push({segments:new o.aD([ss]),sortKey:ss.sortKey,state:uu,terrainData:Mi})}else nn.push({segments:In.segments,sortKey:0,state:uu,terrainData:Mi})}Rt&&nn.sort((Mn,Bn)=>Mn.sortKey-Bn.sortKey);for(const Mn of nn){const Bn=Mn.state;if($e.activeTexture.set(Xe.TEXTURE0),Bn.atlasTexture.bind(Bn.atlasInterpolation,Xe.CLAMP_TO_EDGE),Bn.atlasTextureIcon&&($e.activeTexture.set(Xe.TEXTURE1),Bn.atlasTextureIcon&&Bn.atlasTextureIcon.bind(Bn.atlasInterpolationIcon,Xe.CLAMP_TO_EDGE)),Bn.isSDF){const yn=Bn.uniformValues;Bn.hasHalo&&(yn.u_is_halo=1,Oh(Bn.buffers,Mn.segments,c,k,Bn.program,zt,xe,ke,yn,Bn.projectionData,Mn.terrainData)),yn.u_is_halo=0}Oh(Bn.buffers,Mn.segments,c,k,Bn.program,zt,xe,ke,Bn.uniformValues,Bn.projectionData,Mn.terrainData)}}function Oh(k,l,c,_,w,K,N,$,ee,ae,xe){const ke=_.context;w.draw(ke,ke.gl.TRIANGLES,K,N,$,Ui.backCCW,ee,xe,ae,c.id,k.layoutVertexBuffer,k.indexBuffer,l,c.paint,_.transform.zoom,k.programConfigurations.get(c.id),k.dynamicLayoutVertexBuffer,k.opacityVertexBuffer)}function ds(k,l,c,_,w){const K=k.context,N=K.gl,$=$i.disabled,ee=new co([N.ONE,N.ONE],o.b4.transparent,[!0,!0,!0,!0]),ae=l.getBucket(c);if(!ae)return;const xe=_.key;let ke=c.heatmapFbos.get(xe);ke||(ke=IA(K,l.tileSize,l.tileSize),c.heatmapFbos.set(xe,ke)),K.bindFramebuffer.set(ke.framebuffer),K.viewport.set([0,0,l.tileSize,l.tileSize]),K.clear({color:o.b4.transparent});const Ke=ae.programConfigurations.get(c.id),$e=k.useProgram("heatmap",Ke,!w),Xe=k.transform.getProjectionData({overscaledTileID:l.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),pt=k.style.map.terrain.getTerrainData(_);$e.draw(K,N.TRIANGLES,Yr.disabled,$,ee,Ui.disabled,af(l,k.transform.zoom,c.paint.get("heatmap-intensity"),1),pt,Xe,c.id,ae.layoutVertexBuffer,ae.indexBuffer,ae.segments,c.paint,k.transform.zoom,Ke)}function Mc(k,l,c,_,w){const K=k.context,N=K.gl,$=k.transform;K.setColorMode(k.colorModeForRenderPass());const ee=Qu(K,l),ae=c.key,xe=l.heatmapFbos.get(ae);if(!xe)return;K.activeTexture.set(N.TEXTURE0),N.bindTexture(N.TEXTURE_2D,xe.colorAttachment.get()),K.activeTexture.set(N.TEXTURE1),ee.bind(N.LINEAR,N.CLAMP_TO_EDGE);const ke=$.getProjectionData({overscaledTileID:c,applyTerrainMatrix:w,applyGlobeMatrix:!_});k.useProgram("heatmapTexture").draw(K,N.TRIANGLES,Yr.disabled,$i.disabled,k.colorModeForRenderPass(),Ui.disabled,ec(k,l,0,1),null,ke,l.id,k.rasterBoundsBuffer,k.quadTriangleIndexBuffer,k.rasterBoundsSegments,l.paint,$.zoom),xe.destroy(),l.heatmapFbos.delete(ae)}function IA(k,l,c){var _,w;const K=k.gl,N=K.createTexture();K.bindTexture(K.TEXTURE_2D,N),K.texParameteri(K.TEXTURE_2D,K.TEXTURE_WRAP_S,K.CLAMP_TO_EDGE),K.texParameteri(K.TEXTURE_2D,K.TEXTURE_WRAP_T,K.CLAMP_TO_EDGE),K.texParameteri(K.TEXTURE_2D,K.TEXTURE_MIN_FILTER,K.LINEAR),K.texParameteri(K.TEXTURE_2D,K.TEXTURE_MAG_FILTER,K.LINEAR);const $=(_=k.HALF_FLOAT)!==null&&_!==void 0?_:K.UNSIGNED_BYTE,ee=(w=k.RGBA16F)!==null&&w!==void 0?w:K.RGBA;K.texImage2D(K.TEXTURE_2D,0,ee,l,c,0,K.RGBA,$,null);const ae=k.createFramebuffer(l,c,!1,!1);return ae.colorAttachment.set(N),ae}function Qu(k,l){return l.colorRampTexture||(l.colorRampTexture=new oe(k,l.colorRamp,k.gl.RGBA)),l.colorRampTexture}function Yd(k,l,c,_,w){if(!c||!_||!_.imageAtlas)return;const K=_.imageAtlas.patternPositions;let N=K[c.to.toString()],$=K[c.from.toString()];if(!N&&$&&(N=$),!$&&N&&($=N),!N||!$){const ee=w.getPaintProperty(l);N=K[ee],$=K[ee]}N&&$&&k.setConstantPatternPositions(N,$)}function _d(k,l,c,_,w,K,N,$){const ee=k.context.gl,ae="fill-pattern",xe=c.paint.get(ae),ke=xe&&xe.constantOr(1),Ke=c.getCrossfadeParameters();let $e,Xe,pt,ut,mt;const vt=k.transform,Bt=c.paint.get("fill-translate"),kt=c.paint.get("fill-translate-anchor");N?(Xe=ke&&!c.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",$e=ee.LINES):(Xe=ke?"fillPattern":"fill",$e=ee.TRIANGLES);const Rt=xe.constantOr(null);for(const zt of _){const Tt=l.getTile(zt);if(ke&&!Tt.patternsLoaded())continue;const nn=Tt.getBucket(c);if(!nn)continue;const Zt=nn.programConfigurations.get(c.id),Mn=k.useProgram(Xe,Zt),Bn=k.style.map.terrain&&k.style.map.terrain.getTerrainData(zt);ke&&(k.context.activeTexture.set(ee.TEXTURE0),Tt.imageAtlasTexture.bind(ee.LINEAR,ee.CLAMP_TO_EDGE),Zt.updatePaintBuffers(Ke)),Yd(Zt,ae,Rt,Tt,c);const yn=vt.getProjectionData({overscaledTileID:zt,applyGlobeMatrix:!$,applyTerrainMatrix:!0}),In=o.au(vt,Tt,Bt,kt);if(N){ut=nn.indexBuffer2,mt=nn.segments2;const Fn=[ee.drawingBufferWidth,ee.drawingBufferHeight];pt=Xe==="fillOutlinePattern"&&ke?of(k,Ke,Tt,Fn,In):ta(Fn,In)}else ut=nn.indexBuffer,mt=nn.segments,pt=ke?JA(k,Ke,Tt,In):{u_fill_translate:In};let Nn;if(k.renderPass==="translucent"&&$){const[Fn]=k.getStencilConfigForOverlapAndUpdateStencilID(_);Nn=Fn[zt.overscaledZ]}else Nn=k.stencilModeForClipping(zt);Mn.draw(k.context,$e,w,Nn,K,Ui.backCCW,pt,Bn,yn,c.id,nn.layoutVertexBuffer,ut,mt,c.paint,k.transform.zoom,Zt)}}function ic(k,l,c,_,w,K,N,$){const ee=k.context,ae=ee.gl,xe="fill-extrusion-pattern",ke=c.paint.get(xe),Ke=ke.constantOr(1),$e=c.getCrossfadeParameters(),Xe=c.paint.get("fill-extrusion-opacity"),pt=ke.constantOr(null),ut=k.transform;for(const mt of _){const vt=l.getTile(mt),Bt=vt.getBucket(c);if(!Bt)continue;const kt=k.style.map.terrain&&k.style.map.terrain.getTerrainData(mt),Rt=Bt.programConfigurations.get(c.id),zt=k.useProgram(Ke?"fillExtrusionPattern":"fillExtrusion",Rt);Ke&&(k.context.activeTexture.set(ae.TEXTURE0),vt.imageAtlasTexture.bind(ae.LINEAR,ae.CLAMP_TO_EDGE),Rt.updatePaintBuffers($e));const Tt=ut.getProjectionData({overscaledTileID:mt,applyGlobeMatrix:!$,applyTerrainMatrix:!0});Yd(Rt,xe,pt,vt,c);const nn=o.au(ut,vt,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),Zt=c.paint.get("fill-extrusion-vertical-gradient"),Mn=Ke?Bp(k,Zt,Xe,nn,mt,$e,vt):dd(k,Zt,Xe,nn);zt.draw(ee,ee.gl.TRIANGLES,w,K,N,Ui.backCCW,Mn,kt,Tt,c.id,Bt.layoutVertexBuffer,Bt.indexBuffer,Bt.segments,c.paint,k.transform.zoom,Rt,k.style.map.terrain&&Bt.centroidVertexBuffer)}}function Vc(k,l,c,_,w,K,N,$,ee){var ae;const xe=k.style.projection,ke=k.context,Ke=k.transform,$e=ke.gl,Xe=k.useProgram("hillshade"),pt=!k.options.moving;for(const ut of _){const mt=l.getTile(ut),vt=mt.fbo;if(!vt)continue;const Bt=xe.getMeshFromTileID(ke,ut.canonical,$,!0,"raster"),kt=(ae=k.style.map.terrain)===null||ae===void 0?void 0:ae.getTerrainData(ut);ke.activeTexture.set($e.TEXTURE0),$e.bindTexture($e.TEXTURE_2D,vt.colorAttachment.get());const Rt=Ke.getProjectionData({overscaledTileID:ut,aligned:pt,applyGlobeMatrix:!ee,applyTerrainMatrix:!0});Xe.draw(ke,$e.TRIANGLES,K,w[ut.overscaledZ],N,Ui.backCCW,yh(k,mt,c),kt,Rt,c.id,Bt.vertexBuffer,Bt.indexBuffer,Bt.segments)}}const kA=[new o.P(0,0),new o.P(o.X,0),new o.P(o.X,o.X),new o.P(0,o.X)];function Bi(k,l,c,_,w,K,N,$,ee=!1,ae=!1){const xe=_[_.length-1].overscaledZ,ke=k.context,Ke=ke.gl,$e=k.useProgram("raster"),Xe=k.transform,pt=k.style.projection,ut=k.colorModeForRenderPass(),mt=!k.options.moving;for(const vt of _){const Bt=k.getDepthModeForSublayer(vt.overscaledZ-xe,c.paint.get("raster-opacity")===1?Yr.ReadWrite:Yr.ReadOnly,Ke.LESS),kt=l.getTile(vt);kt.registerFadeDuration(c.paint.get("raster-fade-duration"));const Rt=l.findLoadedParent(vt,0),zt=l.findLoadedSibling(vt),Tt=Ls(kt,Rt||zt||null,l,c,k.transform,k.style.map.terrain);let nn,Zt;const Mn=c.paint.get("raster-resampling")==="nearest"?Ke.NEAREST:Ke.LINEAR;ke.activeTexture.set(Ke.TEXTURE0),kt.texture.bind(Mn,Ke.CLAMP_TO_EDGE,Ke.LINEAR_MIPMAP_NEAREST),ke.activeTexture.set(Ke.TEXTURE1),Rt?(Rt.texture.bind(Mn,Ke.CLAMP_TO_EDGE,Ke.LINEAR_MIPMAP_NEAREST),nn=Math.pow(2,Rt.tileID.overscaledZ-kt.tileID.overscaledZ),Zt=[kt.tileID.canonical.x*nn%1,kt.tileID.canonical.y*nn%1]):kt.texture.bind(Mn,Ke.CLAMP_TO_EDGE,Ke.LINEAR_MIPMAP_NEAREST),kt.texture.useMipmap&&ke.extTextureFilterAnisotropic&&k.transform.pitch>20&&Ke.texParameterf(Ke.TEXTURE_2D,ke.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,ke.extTextureFilterAnisotropicMax);const Bn=k.style.map.terrain&&k.style.map.terrain.getTerrainData(vt),yn=Xe.getProjectionData({overscaledTileID:vt,aligned:mt,applyGlobeMatrix:!ae,applyTerrainMatrix:!0}),In=bh(Zt||[0,0],nn||1,Tt,c,$),Nn=pt.getMeshFromTileID(ke,vt.canonical,K,N,"raster");$e.draw(ke,Ke.TRIANGLES,Bt,w?w[vt.overscaledZ]:$i.disabled,ut,ee?Ui.frontCCW:Ui.backCCW,In,Bn,yn,c.id,Nn.vertexBuffer,Nn.indexBuffer,Nn.segments)}}function Ls(k,l,c,_,w,K){const N=_.paint.get("raster-fade-duration");if(!K&&N>0){const $=S.now(),ee=($-k.timeAdded)/N,ae=l?($-l.timeAdded)/N:-1,xe=c.getSource(),ke=tr(w,{tileSize:xe.tileSize,roundZoom:xe.roundZoom}),Ke=!l||Math.abs(l.tileID.overscaledZ-ke)>Math.abs(k.tileID.overscaledZ-ke),$e=Ke&&k.refreshedUponExpiration?1:o.ab(Ke?ee:1-ae,0,1);return k.refreshedUponExpiration&&ee>=1&&(k.refreshedUponExpiration=!1),l?{opacity:1,mix:1-$e}:{opacity:$e,mix:0}}return{opacity:1,mix:0}}const dA=new o.b4(1,0,0,1),bd=new o.b4(0,1,0,1),Hc=new o.b4(0,0,1,1),Sc=new o.b4(1,0,1,1),TA=new o.b4(0,1,1,1);function cl(k,l,c,_){dl(k,0,l+c/2,k.transform.width,c,_)}function hA(k,l,c,_){dl(k,l-c/2,0,c,k.transform.height,_)}function dl(k,l,c,_,w,K){const N=k.context,$=N.gl;$.enable($.SCISSOR_TEST),$.scissor(l*k.pixelRatio,c*k.pixelRatio,_*k.pixelRatio,w*k.pixelRatio),N.clear({color:K}),$.disable($.SCISSOR_TEST)}function oc(k,l,c){const _=k.context,w=_.gl,K=k.useProgram("debug"),N=Yr.disabled,$=$i.disabled,ee=k.colorModeForRenderPass(),ae="$debug",xe=k.style.map.terrain&&k.style.map.terrain.getTerrainData(c);_.activeTexture.set(w.TEXTURE0);const ke=l.getTileByID(c.key).latestRawTileData,Ke=Math.floor((ke&&ke.byteLength||0)/1024),$e=l.getTile(c).tileSize,Xe=512/Math.min($e,512)*(c.overscaledZ/k.transform.zoom)*.5;let pt=c.canonical.toString();c.overscaledZ!==c.canonical.z&&(pt+=` => ${c.overscaledZ}`),function(mt,vt){mt.initDebugOverlayCanvas();const Bt=mt.debugOverlayCanvas,kt=mt.context.gl,Rt=mt.debugOverlayCanvas.getContext("2d");Rt.clearRect(0,0,Bt.width,Bt.height),Rt.shadowColor="white",Rt.shadowBlur=2,Rt.lineWidth=1.5,Rt.strokeStyle="white",Rt.textBaseline="top",Rt.font="bold 36px Open Sans, sans-serif",Rt.fillText(vt,5,5),Rt.strokeText(vt,5,5),mt.debugOverlayTexture.update(Bt),mt.debugOverlayTexture.bind(kt.LINEAR,kt.CLAMP_TO_EDGE)}(k,`${pt} ${Ke}kB`);const ut=k.transform.getProjectionData({overscaledTileID:c,applyGlobeMatrix:!0,applyTerrainMatrix:!0});K.draw(_,w.TRIANGLES,N,$,co.alphaBlended,Ui.disabled,fd(o.b4.transparent,Xe),null,ut,ae,k.debugBuffer,k.quadTriangleIndexBuffer,k.debugSegments),K.draw(_,w.LINE_STRIP,N,$,ee,Ui.disabled,fd(o.b4.red),xe,ut,ae,k.debugBuffer,k.tileBorderIndexBuffer,k.debugSegments)}function qu(k,l,c,_){const{isRenderingGlobe:w}=_,K=k.context,N=K.gl,$=k.transform,ee=k.colorModeForRenderPass(),ae=k.getDepthModeFor3D(),xe=k.useProgram("terrain");K.bindFramebuffer.set(null),K.viewport.set([0,0,k.width,k.height]);for(const ke of c){const Ke=l.getTerrainMesh(ke.tileID),$e=k.renderToTexture.getTexture(ke),Xe=l.getTerrainData(ke.tileID);K.activeTexture.set(N.TEXTURE0),N.bindTexture(N.TEXTURE_2D,$e.texture);const pt=l.getMeshFrameDelta($.zoom),ut=$.calculateFogMatrix(ke.tileID.toUnwrapped()),mt=cd(pt,ut,k.style.sky,$.pitch,w),vt=$.getProjectionData({overscaledTileID:ke.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});xe.draw(K,N.TRIANGLES,ae,$i.disabled,ee,Ui.backCCW,mt,Xe,vt,"terrain",Ke.vertexBuffer,Ke.indexBuffer,Ke.segments)}}function xd(k,l){if(!l.mesh){const c=new o.aC;c.emplaceBack(-1,-1),c.emplaceBack(1,-1),c.emplaceBack(1,1),c.emplaceBack(-1,1);const _=new o.aE;_.emplaceBack(0,1,2),_.emplaceBack(0,2,3),l.mesh=new nl(k.createVertexBuffer(c,ui.members),k.createIndexBuffer(_),o.aD.simpleSegment(0,0,c.length,_.length))}return l.mesh}class Zc{constructor(l,c){this.context=new vd(l),this.transform=c,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:o.aq(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=se.maxUnderzooming+se.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Rs}resize(l,c,_){if(this.width=Math.floor(l*_),this.height=Math.floor(c*_),this.pixelRatio=_,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const w of this.style._order)this.style._layers[w].resize()}setup(){const l=this.context,c=new o.aC;c.emplaceBack(0,0),c.emplaceBack(o.X,0),c.emplaceBack(0,o.X),c.emplaceBack(o.X,o.X),this.tileExtentBuffer=l.createVertexBuffer(c,ui.members),this.tileExtentSegments=o.aD.simpleSegment(0,0,4,2);const _=new o.aC;_.emplaceBack(0,0),_.emplaceBack(o.X,0),_.emplaceBack(0,o.X),_.emplaceBack(o.X,o.X),this.debugBuffer=l.createVertexBuffer(_,ui.members),this.debugSegments=o.aD.simpleSegment(0,0,4,5);const w=new o.bT;w.emplaceBack(0,0,0,0),w.emplaceBack(o.X,0,o.X,0),w.emplaceBack(0,o.X,0,o.X),w.emplaceBack(o.X,o.X,o.X,o.X),this.rasterBoundsBuffer=l.createVertexBuffer(w,Fs.members),this.rasterBoundsSegments=o.aD.simpleSegment(0,0,4,2);const K=new o.aC;K.emplaceBack(0,0),K.emplaceBack(o.X,0),K.emplaceBack(0,o.X),K.emplaceBack(o.X,o.X),this.rasterBoundsBufferPosOnly=l.createVertexBuffer(K,ui.members),this.rasterBoundsSegmentsPosOnly=o.aD.simpleSegment(0,0,4,5);const N=new o.aC;N.emplaceBack(0,0),N.emplaceBack(1,0),N.emplaceBack(0,1),N.emplaceBack(1,1),this.viewportBuffer=l.createVertexBuffer(N,ui.members),this.viewportSegments=o.aD.simpleSegment(0,0,4,2);const $=new o.bU;$.emplaceBack(0),$.emplaceBack(1),$.emplaceBack(3),$.emplaceBack(2),$.emplaceBack(0),this.tileBorderIndexBuffer=l.createIndexBuffer($);const ee=new o.aE;ee.emplaceBack(1,0,2),ee.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=l.createIndexBuffer(ee);const ae=this.context.gl;this.stencilClearMode=new $i({func:ae.ALWAYS,mask:0},0,255,ae.ZERO,ae.ZERO,ae.ZERO),this.tileExtentMesh=new nl(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const l=this.context,c=l.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const _=o.H();o.bL(_,0,this.width,this.height,0,0,1),o.K(_,_,[c.drawingBufferWidth,c.drawingBufferHeight,0]);const w={mainMatrix:_,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:_};this.useProgram("clippingMask",null,!0).draw(l,c.TRIANGLES,Yr.disabled,this.stencilClearMode,co.disabled,Ui.disabled,null,null,w,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(l,c,_){if(this.currentStencilSource===l.source||!l.isTileClipped()||!c||!c.length)return;this.currentStencilSource=l.source,this.nextStencilID+c.length>256&&this.clearStencil();const w=this.context;w.setColorMode(co.disabled),w.setDepthMode(Yr.disabled);const K={};for(const N of c)K[N.key]=this.nextStencilID++;this._renderTileMasks(K,c,_,!0),this._renderTileMasks(K,c,_,!1),this._tileClippingMaskIDs=K}_renderTileMasks(l,c,_,w){const K=this.context,N=K.gl,$=this.style.projection,ee=this.transform,ae=this.useProgram("clippingMask");for(const xe of c){const ke=l[xe.key],Ke=this.style.map.terrain&&this.style.map.terrain.getTerrainData(xe),$e=$.getMeshFromTileID(this.context,xe.canonical,w,!0,"stencil"),Xe=ee.getProjectionData({overscaledTileID:xe,applyGlobeMatrix:!0,applyTerrainMatrix:!0});ae.draw(K,N.TRIANGLES,Yr.disabled,new $i({func:N.ALWAYS,mask:0},ke,255,N.KEEP,N.KEEP,N.REPLACE),co.disabled,_?Ui.disabled:Ui.backCCW,null,Ke,Xe,"$clipping",$e.vertexBuffer,$e.indexBuffer,$e.segments)}}_renderTilesDepthBuffer(){const l=this.context,c=l.gl,_=this.style.projection,w=this.transform,K=this.useProgram("depth"),N=this.getDepthModeFor3D(),$=Oe(w,{tileSize:w.tileSize});for(const ee of $){const ae=this.style.map.terrain&&this.style.map.terrain.getTerrainData(ee),xe=_.getMeshFromTileID(this.context,ee.canonical,!0,!0,"raster"),ke=w.getProjectionData({overscaledTileID:ee,applyGlobeMatrix:!0,applyTerrainMatrix:!0});K.draw(l,c.TRIANGLES,N,$i.disabled,co.disabled,Ui.backCCW,null,ae,ke,"$clipping",xe.vertexBuffer,xe.indexBuffer,xe.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const l=this.nextStencilID++,c=this.context.gl;return new $i({func:c.NOTEQUAL,mask:255},l,255,c.KEEP,c.KEEP,c.REPLACE)}stencilModeForClipping(l){const c=this.context.gl;return new $i({func:c.EQUAL,mask:255},this._tileClippingMaskIDs[l.key],0,c.KEEP,c.KEEP,c.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(l){const c=this.context.gl,_=l.sort((N,$)=>$.overscaledZ-N.overscaledZ),w=_[_.length-1].overscaledZ,K=_[0].overscaledZ-w+1;if(K>1){this.currentStencilSource=void 0,this.nextStencilID+K>256&&this.clearStencil();const N={};for(let $=0;$<K;$++)N[$+w]=new $i({func:c.GEQUAL,mask:255},$+this.nextStencilID,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID+=K,[N,_]}return[{[w]:$i.disabled},_]}stencilConfigForOverlapTwoPass(l){const c=this.context.gl,_=l.sort((N,$)=>$.overscaledZ-N.overscaledZ),w=_[_.length-1].overscaledZ,K=_[0].overscaledZ-w+1;if(this.clearStencil(),K>1){const N={},$={};for(let ee=0;ee<K;ee++)N[ee+w]=new $i({func:c.GREATER,mask:255},K+1+ee,255,c.KEEP,c.KEEP,c.REPLACE),$[ee+w]=new $i({func:c.GREATER,mask:255},1+ee,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID=2*K+1,[N,$,_]}return this.nextStencilID=3,[{[w]:new $i({func:c.GREATER,mask:255},2,255,c.KEEP,c.KEEP,c.REPLACE)},{[w]:new $i({func:c.GREATER,mask:255},1,255,c.KEEP,c.KEEP,c.REPLACE)},_]}colorModeForRenderPass(){const l=this.context.gl;return this._showOverdrawInspector?new co([l.CONSTANT_COLOR,l.ONE],new o.b4(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?co.unblended:co.alphaBlended}getDepthModeForSublayer(l,c,_){if(!this.opaquePassEnabledForLayer())return Yr.disabled;const w=1-((1+this.currentLayer)*this.numSublayers+l)*this.depthEpsilon;return new Yr(_||this.context.gl.LEQUAL,c,[w,w])}getDepthModeFor3D(){return new Yr(this.context.gl.LEQUAL,Yr.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(l,c){var _,w;this.style=l,this.options=c,this.lineAtlas=l.lineAtlas,this.imageManager=l.imageManager,this.glyphManager=l.glyphManager,this.symbolFadeChange=l.placement.symbolFadeChange(S.now()),this.imageManager.beginFrame();const K=this.style._order,N=this.style.sourceCaches,$={},ee={},ae={},xe={isRenderingToTexture:!1,isRenderingGlobe:((_=l.projection)===null||_===void 0?void 0:_.transitionState)>0};for(const Ke in N){const $e=N[Ke];$e.used&&$e.prepare(this.context),$[Ke]=$e.getVisibleCoordinates(!1),ee[Ke]=$[Ke].slice().reverse(),ae[Ke]=$e.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let Ke=0;Ke<K.length;Ke++)if(this.style._layers[K[Ke]].is3D()){this.opaquePassCutoff=Ke;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const Ke of K){const $e=this.style._layers[Ke];if(!$e.hasOffscreenPass()||$e.isHidden(this.transform.zoom))continue;const Xe=ee[$e.source];($e.type==="custom"||Xe.length)&&this.renderLayer(this,N[$e.source],$e,Xe,xe)}if((w=this.style.projection)===null||w===void 0||w.updateGPUdependent({context:this.context,useProgram:Ke=>this.useProgram(Ke)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:c.showOverdrawInspector?o.b4.black:o.b4.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(Ke,$e){const Xe=Ke.context,pt=Xe.gl,ut=((zt,Tt,nn)=>{const Zt=Math.cos(Tt.rollInRadians),Mn=Math.sin(Tt.rollInRadians),Bn=yo(Tt),yn=Tt.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:zt.properties.get("sky-color"),u_horizon_color:zt.properties.get("horizon-color"),u_horizon:[(Tt.width/2-Bn*Mn)*nn,(Tt.height/2+Bn*Zt)*nn],u_horizon_normal:[-Mn,Zt],u_sky_horizon_blend:zt.properties.get("sky-horizon-blend")*Tt.height/2*nn,u_sky_blend:yn}})($e,Ke.style.map.transform,Ke.pixelRatio),mt=new Yr(pt.LEQUAL,Yr.ReadWrite,[0,1]),vt=$i.disabled,Bt=Ke.colorModeForRenderPass(),kt=Ke.useProgram("sky"),Rt=xd(Xe,$e);kt.draw(Xe,pt.TRIANGLES,mt,vt,Bt,Ui.disabled,ut,null,void 0,"sky",Rt.vertexBuffer,Rt.indexBuffer,Rt.segments)}(this,this.style.sky),this._showOverdrawInspector=c.showOverdrawInspector,this.depthRangeFor3D=[0,1-(l._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=K.length-1;this.currentLayer>=0;this.currentLayer--){const Ke=this.style._layers[K[this.currentLayer]],$e=N[Ke.source],Xe=$[Ke.source];this._renderTileClippingMasks(Ke,Xe,!1),this.renderLayer(this,$e,Ke,Xe,xe)}this.renderPass="translucent";let ke=!1;for(this.currentLayer=0;this.currentLayer<K.length;this.currentLayer++){const Ke=this.style._layers[K[this.currentLayer]],$e=N[Ke.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(Ke,xe))continue;this.opaquePassEnabledForLayer()||ke||(ke=!0,xe.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const Xe=(Ke.type==="symbol"?ae:ee)[Ke.source];this._renderTileClippingMasks(Ke,$[Ke.source],!1),this.renderLayer(this,$e,Ke,Xe,xe)}if(xe.isRenderingGlobe&&function(Ke,$e,Xe){const pt=Ke.context,ut=pt.gl,mt=Ke.useProgram("atmosphere"),vt=new Yr(ut.LEQUAL,Yr.ReadOnly,[0,1]),Bt=Ke.transform,kt=function(yn,In){const Nn=yn.properties.get("position"),Fn=[-Nn.x,-Nn.y,-Nn.z],pr=o.aq(new Float64Array(16));return yn.properties.get("anchor")==="map"&&(o.aX(pr,pr,In.rollInRadians),o.aY(pr,pr,-In.pitchInRadians),o.aX(pr,pr,In.bearingInRadians),o.aY(pr,pr,In.center.lat*Math.PI/180),o.bj(pr,pr,-In.center.lng*Math.PI/180)),o.bS(Fn,Fn,pr),Fn}(Xe,Ke.transform),Rt=Bt.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),zt=$e.properties.get("atmosphere-blend")*Rt.projectionTransition;if(zt===0)return;const Tt=zi(Bt.worldSize,Bt.center.lat),nn=Bt.inverseProjectionMatrix,Zt=new Float64Array(4);Zt[3]=1,o.al(Zt,Zt,Bt.modelViewProjectionMatrix),Zt[0]/=Zt[3],Zt[1]/=Zt[3],Zt[2]/=Zt[3],Zt[3]=1,o.al(Zt,Zt,nn),Zt[0]/=Zt[3],Zt[1]/=Zt[3],Zt[2]/=Zt[3],Zt[3]=1;const Mn=((yn,In,Nn,Fn,pr)=>({u_sun_pos:yn,u_atmosphere_blend:In,u_globe_position:Nn,u_globe_radius:Fn,u_inv_proj_matrix:pr}))(kt,zt,[Zt[0],Zt[1],Zt[2]],Tt,nn),Bn=xd(pt,$e);mt.draw(pt,ut.TRIANGLES,vt,$i.disabled,co.alphaBlended,Ui.disabled,Mn,null,null,"atmosphere",Bn.vertexBuffer,Bn.indexBuffer,Bn.segments)}(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const Ke=function($e,Xe){let pt=null;const ut=Object.values($e._layers).flatMap(kt=>kt.source&&!kt.isHidden(Xe)?[$e.sourceCaches[kt.source]]:[]),mt=ut.filter(kt=>kt.getSource().type==="vector"),vt=ut.filter(kt=>kt.getSource().type!=="vector"),Bt=kt=>{(!pt||pt.getSource().maxzoom<kt.getSource().maxzoom)&&(pt=kt)};return mt.forEach(kt=>Bt(kt)),pt||vt.forEach(kt=>Bt(kt)),pt}(this.style,this.transform.zoom);Ke&&function($e,Xe,pt){for(let ut=0;ut<pt.length;ut++)oc($e,Xe,pt[ut])}(this,Ke,Ke.getVisibleCoordinates())}this.options.showPadding&&function(Ke){const $e=Ke.transform.padding;cl(Ke,Ke.transform.height-($e.top||0),3,dA),cl(Ke,$e.bottom||0,3,bd),hA(Ke,$e.left||0,3,Hc),hA(Ke,Ke.transform.width-($e.right||0),3,Sc);const Xe=Ke.transform.centerPoint;(function(pt,ut,mt,vt){dl(pt,ut-1,mt-10,2,20,vt),dl(pt,ut-10,mt-1,20,2,vt)})(Ke,Xe.x,Ke.transform.height-Xe.y,TA)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(l){if(!this.style||!this.style.map||!this.style.map.terrain)return;const c=this.terrainFacilitator.matrix,_=this.transform.modelViewProjectionMatrix;let w=this.terrainFacilitator.dirty;w||(w=l?!o.bV(c,_):!o.bW(c,_)),w||(w=this.style.map.terrain.sourceCache.anyTilesAfterTime(this.terrainFacilitator.renderTime)),w&&(o.bX(c,_),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(K,N){const $=K.context,ee=$.gl,ae=K.transform,xe=co.unblended,ke=new Yr(ee.LEQUAL,Yr.ReadWrite,[0,1]),Ke=N.sourceCache.getRenderableTiles(),$e=K.useProgram("terrainDepth");$.bindFramebuffer.set(N.getFramebuffer("depth").framebuffer),$.viewport.set([0,0,K.width/devicePixelRatio,K.height/devicePixelRatio]),$.clear({color:o.b4.transparent,depth:1});for(const Xe of Ke){const pt=N.getTerrainMesh(Xe.tileID),ut=N.getTerrainData(Xe.tileID),mt=ae.getProjectionData({overscaledTileID:Xe.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),vt={u_ele_delta:N.getMeshFrameDelta(ae.zoom)};$e.draw($,ee.TRIANGLES,ke,$i.disabled,xe,Ui.backCCW,vt,ut,mt,"terrain",pt.vertexBuffer,pt.indexBuffer,pt.segments)}$.bindFramebuffer.set(null),$.viewport.set([0,0,K.width,K.height])}(this,this.style.map.terrain),function(K,N){const $=K.context,ee=$.gl,ae=K.transform,xe=co.unblended,ke=new Yr(ee.LEQUAL,Yr.ReadWrite,[0,1]),Ke=N.getCoordsTexture(),$e=N.sourceCache.getRenderableTiles(),Xe=K.useProgram("terrainCoords");$.bindFramebuffer.set(N.getFramebuffer("coords").framebuffer),$.viewport.set([0,0,K.width/devicePixelRatio,K.height/devicePixelRatio]),$.clear({color:o.b4.transparent,depth:1}),N.coordsIndex=[];for(const pt of $e){const ut=N.getTerrainMesh(pt.tileID),mt=N.getTerrainData(pt.tileID);$.activeTexture.set(ee.TEXTURE0),ee.bindTexture(ee.TEXTURE_2D,Ke.texture);const vt={u_terrain_coords_id:(255-N.coordsIndex.length)/255,u_texture:0,u_ele_delta:N.getMeshFrameDelta(ae.zoom)},Bt=ae.getProjectionData({overscaledTileID:pt.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});Xe.draw($,ee.TRIANGLES,ke,$i.disabled,xe,Ui.backCCW,vt,mt,Bt,"terrain",ut.vertexBuffer,ut.indexBuffer,ut.segments),N.coordsIndex.push(pt.tileID.key)}$.bindFramebuffer.set(null),$.viewport.set([0,0,K.width,K.height])}(this,this.style.map.terrain))}renderLayer(l,c,_,w,K){_.isHidden(this.transform.zoom)||(_.type==="background"||_.type==="custom"||(w||[]).length)&&(this.id=_.id,o.bY(_)?function(N,$,ee,ae,xe,ke){if(N.renderPass!=="translucent")return;const{isRenderingToTexture:Ke}=ke,$e=$i.disabled,Xe=N.colorModeForRenderPass();(ee._unevaluatedLayout.hasValue("text-variable-anchor")||ee._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(pt,ut,mt,vt,Bt,kt,Rt,zt,Tt){const nn=ut.transform,Zt=ut.style.map.terrain,Mn=Bt==="map",Bn=kt==="map";for(const yn of pt){const In=vt.getTile(yn),Nn=In.getBucket(mt);if(!Nn||!Nn.text||!Nn.text.segments.get().length)continue;const Fn=o.ah(Nn.textSizeData,nn.zoom),pr=o.at(In,1,ut.transform.zoom),ki=ct(Mn,ut.transform,pr),Wi=mt.layout.get("icon-text-fit")!=="none"&&Nn.hasIconData();{const Lo=Math.pow(2,nn.zoom-In.tileID.overscaledZ),Mi=Zt?(fs,ko)=>Zt.getElevation(yn,fs,ko):null;Gu(Nn,Mn,Bn,Tt,nn,ki,Lo,Fn,Wi,o.au(nn,In,Rt,zt),yn.toUnwrapped(),Mi)}}}(ae,N,ee,$,ee.layout.get("text-rotation-alignment"),ee.layout.get("text-pitch-alignment"),ee.paint.get("text-translate"),ee.paint.get("text-translate-anchor"),xe),ee.paint.get("icon-opacity").constantOr(1)!==0&&rc(N,$,ee,ae,!1,ee.paint.get("icon-translate"),ee.paint.get("icon-translate-anchor"),ee.layout.get("icon-rotation-alignment"),ee.layout.get("icon-pitch-alignment"),ee.layout.get("icon-keep-upright"),$e,Xe,Ke),ee.paint.get("text-opacity").constantOr(1)!==0&&rc(N,$,ee,ae,!0,ee.paint.get("text-translate"),ee.paint.get("text-translate-anchor"),ee.layout.get("text-rotation-alignment"),ee.layout.get("text-pitch-alignment"),ee.layout.get("text-keep-upright"),$e,Xe,Ke),$.map.showCollisionBoxes&&(Yc(N,$,ee,ae,!0),Yc(N,$,ee,ae,!1))}(l,c,_,w,this.style.placement.variableOffsets,K):o.bZ(_)?function(N,$,ee,ae,xe){if(N.renderPass!=="translucent")return;const{isRenderingToTexture:ke}=xe,Ke=ee.paint.get("circle-opacity"),$e=ee.paint.get("circle-stroke-width"),Xe=ee.paint.get("circle-stroke-opacity"),pt=!ee.layout.get("circle-sort-key").isConstant();if(Ke.constantOr(1)===0&&($e.constantOr(1)===0||Xe.constantOr(1)===0))return;const ut=N.context,mt=ut.gl,vt=N.transform,Bt=N.getDepthModeForSublayer(0,Yr.ReadOnly),kt=$i.disabled,Rt=N.colorModeForRenderPass(),zt=[],Tt=vt.getCircleRadiusCorrection();for(let nn=0;nn<ae.length;nn++){const Zt=ae[nn],Mn=$.getTile(Zt),Bn=Mn.getBucket(ee);if(!Bn)continue;const yn=ee.paint.get("circle-translate"),In=ee.paint.get("circle-translate-anchor"),Nn=o.au(vt,Mn,yn,In),Fn=Bn.programConfigurations.get(ee.id),pr=N.useProgram("circle",Fn),ki=Bn.layoutVertexBuffer,Wi=Bn.indexBuffer,Lo=N.style.map.terrain&&N.style.map.terrain.getTerrainData(Zt),Mi={programConfiguration:Fn,program:pr,layoutVertexBuffer:ki,indexBuffer:Wi,uniformValues:gh(N,Mn,ee,Nn,Tt),terrainData:Lo,projectionData:vt.getProjectionData({overscaledTileID:Zt,applyGlobeMatrix:!ke,applyTerrainMatrix:!0})};if(pt){const fs=Bn.segments.get();for(const ko of fs)zt.push({segments:new o.aD([ko]),sortKey:ko.sortKey,state:Mi})}else zt.push({segments:Bn.segments,sortKey:0,state:Mi})}pt&&zt.sort((nn,Zt)=>nn.sortKey-Zt.sortKey);for(const nn of zt){const{programConfiguration:Zt,program:Mn,layoutVertexBuffer:Bn,indexBuffer:yn,uniformValues:In,terrainData:Nn,projectionData:Fn}=nn.state;Mn.draw(ut,mt.TRIANGLES,Bt,kt,Rt,Ui.backCCW,In,Nn,Fn,ee.id,Bn,yn,nn.segments,ee.paint,N.transform.zoom,Zt)}}(l,c,_,w,K):o.b_(_)?function(N,$,ee,ae,xe){if(ee.paint.get("heatmap-opacity")===0)return;const ke=N.context,{isRenderingToTexture:Ke,isRenderingGlobe:$e}=xe;if(N.style.map.terrain){for(const Xe of ae){const pt=$.getTile(Xe);$.hasRenderableParent(Xe)||(N.renderPass==="offscreen"?ds(N,pt,ee,Xe,$e):N.renderPass==="translucent"&&Mc(N,ee,Xe,Ke,$e))}ke.viewport.set([0,0,N.width,N.height])}else N.renderPass==="offscreen"?function(Xe,pt,ut,mt){const vt=Xe.context,Bt=vt.gl,kt=Xe.transform,Rt=$i.disabled,zt=new co([Bt.ONE,Bt.ONE],o.b4.transparent,[!0,!0,!0,!0]);(function(Tt,nn,Zt){const Mn=Tt.gl;Tt.activeTexture.set(Mn.TEXTURE1),Tt.viewport.set([0,0,nn.width/4,nn.height/4]);let Bn=Zt.heatmapFbos.get(o.bP);Bn?(Mn.bindTexture(Mn.TEXTURE_2D,Bn.colorAttachment.get()),Tt.bindFramebuffer.set(Bn.framebuffer)):(Bn=IA(Tt,nn.width/4,nn.height/4),Zt.heatmapFbos.set(o.bP,Bn))})(vt,Xe,ut),vt.clear({color:o.b4.transparent});for(let Tt=0;Tt<mt.length;Tt++){const nn=mt[Tt];if(pt.hasRenderableParent(nn))continue;const Zt=pt.getTile(nn),Mn=Zt.getBucket(ut);if(!Mn)continue;const Bn=Mn.programConfigurations.get(ut.id),yn=Xe.useProgram("heatmap",Bn),In=kt.getProjectionData({overscaledTileID:nn,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),Nn=kt.getCircleRadiusCorrection();yn.draw(vt,Bt.TRIANGLES,Yr.disabled,Rt,zt,Ui.backCCW,af(Zt,kt.zoom,ut.paint.get("heatmap-intensity"),Nn),null,In,ut.id,Mn.layoutVertexBuffer,Mn.indexBuffer,Mn.segments,ut.paint,kt.zoom,Bn)}vt.viewport.set([0,0,Xe.width,Xe.height])}(N,$,ee,ae):N.renderPass==="translucent"&&function(Xe,pt){const ut=Xe.context,mt=ut.gl;ut.setColorMode(Xe.colorModeForRenderPass());const vt=pt.heatmapFbos.get(o.bP);vt&&(ut.activeTexture.set(mt.TEXTURE0),mt.bindTexture(mt.TEXTURE_2D,vt.colorAttachment.get()),ut.activeTexture.set(mt.TEXTURE1),Qu(ut,pt).bind(mt.LINEAR,mt.CLAMP_TO_EDGE),Xe.useProgram("heatmapTexture").draw(ut,mt.TRIANGLES,Yr.disabled,$i.disabled,Xe.colorModeForRenderPass(),Ui.disabled,ec(Xe,pt,0,1),null,null,pt.id,Xe.viewportBuffer,Xe.quadTriangleIndexBuffer,Xe.viewportSegments,pt.paint,Xe.transform.zoom))}(N,ee)}(l,c,_,w,K):o.b$(_)?function(N,$,ee,ae,xe){if(N.renderPass!=="translucent")return;const{isRenderingToTexture:ke}=xe,Ke=ee.paint.get("line-opacity"),$e=ee.paint.get("line-width");if(Ke.constantOr(1)===0||$e.constantOr(1)===0)return;const Xe=N.getDepthModeForSublayer(0,Yr.ReadOnly),pt=N.colorModeForRenderPass(),ut=ee.paint.get("line-dasharray"),mt=ee.paint.get("line-pattern"),vt=mt.constantOr(1),Bt=ee.paint.get("line-gradient"),kt=ee.getCrossfadeParameters(),Rt=vt?"linePattern":ut?"lineSDF":Bt?"lineGradient":"line",zt=N.context,Tt=zt.gl,nn=N.transform;let Zt=!0;for(const Mn of ae){const Bn=$.getTile(Mn);if(vt&&!Bn.patternsLoaded())continue;const yn=Bn.getBucket(ee);if(!yn)continue;const In=yn.programConfigurations.get(ee.id),Nn=N.context.program.get(),Fn=N.useProgram(Rt,In),pr=Zt||Fn.program!==Nn,ki=N.style.map.terrain&&N.style.map.terrain.getTerrainData(Mn),Wi=mt.constantOr(null);if(Wi&&Bn.imageAtlas){const To=Bn.imageAtlas,vo=To.patternPositions[Wi.to.toString()],il=To.patternPositions[Wi.from.toString()];vo&&il&&In.setConstantPatternPositions(vo,il)}const Lo=nn.getProjectionData({overscaledTileID:Mn,applyGlobeMatrix:!ke,applyTerrainMatrix:!0}),Mi=nn.getPixelScale(),fs=vt?_h(N,Bn,ee,Mi,kt):ut?zu(N,Bn,ee,Mi,ut,kt):Bt?xl(N,Bn,ee,Mi,yn.lineClipsArray.length):Ch(N,Bn,ee,Mi);if(vt)zt.activeTexture.set(Tt.TEXTURE0),Bn.imageAtlasTexture.bind(Tt.LINEAR,Tt.CLAMP_TO_EDGE),In.updatePaintBuffers(kt);else if(ut&&(pr||N.lineAtlas.dirty))zt.activeTexture.set(Tt.TEXTURE0),N.lineAtlas.bind(zt);else if(Bt){const To=yn.gradients[ee.id];let vo=To.texture;if(ee.gradientVersion!==To.version){let il=256;if(ee.stepInterpolant){const Xo=$.getSource().maxzoom,Jo=Mn.canonical.z===Xo?Math.ceil(1<<N.transform.maxZoom-Mn.canonical.z):1;il=o.ab(o.bQ(yn.maxLineLength/o.X*1024*Jo),256,zt.maxTextureSize)}To.gradient=o.bR({expression:ee.gradientExpression(),evaluationKey:"lineProgress",resolution:il,image:To.gradient||void 0,clips:yn.lineClipsArray}),To.texture?To.texture.update(To.gradient):To.texture=new oe(zt,To.gradient,Tt.RGBA),To.version=ee.gradientVersion,vo=To.texture}zt.activeTexture.set(Tt.TEXTURE0),vo.bind(ee.stepInterpolant?Tt.NEAREST:Tt.LINEAR,Tt.CLAMP_TO_EDGE)}let ko;if(ke){const[To]=N.getStencilConfigForOverlapAndUpdateStencilID(ae);ko=To[Mn.overscaledZ]}else ko=N.stencilModeForClipping(Mn);Fn.draw(zt,Tt.TRIANGLES,Xe,ko,pt,Ui.disabled,fs,ki,Lo,ee.id,yn.layoutVertexBuffer,yn.indexBuffer,yn.segments,ee.paint,N.transform.zoom,In,yn.layoutVertexBuffer2),Zt=!1}}(l,c,_,w,K):o.c0(_)?function(N,$,ee,ae,xe){const ke=ee.paint.get("fill-color"),Ke=ee.paint.get("fill-opacity");if(Ke.constantOr(1)===0)return;const{isRenderingToTexture:$e}=xe,Xe=N.colorModeForRenderPass(),pt=ee.paint.get("fill-pattern"),ut=N.opaquePassEnabledForLayer()&&!pt.constantOr(1)&&ke.constantOr(o.b4.transparent).a===1&&Ke.constantOr(0)===1?"opaque":"translucent";if(N.renderPass===ut){const mt=N.getDepthModeForSublayer(1,N.renderPass==="opaque"?Yr.ReadWrite:Yr.ReadOnly);_d(N,$,ee,ae,mt,Xe,!1,$e)}if(N.renderPass==="translucent"&&ee.paint.get("fill-antialias")){const mt=N.getDepthModeForSublayer(ee.getPaintProperty("fill-outline-color")?2:0,Yr.ReadOnly);_d(N,$,ee,ae,mt,Xe,!0,$e)}}(l,c,_,w,K):o.c1(_)?function(N,$,ee,ae,xe){const ke=ee.paint.get("fill-extrusion-opacity");if(ke===0)return;const{isRenderingToTexture:Ke}=xe;if(N.renderPass==="translucent"){const $e=new Yr(N.context.gl.LEQUAL,Yr.ReadWrite,N.depthRangeFor3D);if(ke!==1||ee.paint.get("fill-extrusion-pattern").constantOr(1))ic(N,$,ee,ae,$e,$i.disabled,co.disabled,Ke),ic(N,$,ee,ae,$e,N.stencilModeFor3D(),N.colorModeForRenderPass(),Ke);else{const Xe=N.colorModeForRenderPass();ic(N,$,ee,ae,$e,$i.disabled,Xe,Ke)}}}(l,c,_,w,K):o.c2(_)?function(N,$,ee,ae,xe){if(N.renderPass!=="offscreen"&&N.renderPass!=="translucent")return;const{isRenderingToTexture:ke}=xe,Ke=N.context,$e=N.style.projection.useSubdivision,Xe=N.getDepthModeForSublayer(0,Yr.ReadOnly),pt=N.colorModeForRenderPass();if(N.renderPass==="offscreen")(function(ut,mt,vt,Bt,kt,Rt,zt){const Tt=ut.context,nn=Tt.gl;for(const Zt of vt){const Mn=mt.getTile(Zt),Bn=Mn.dem;if(!Bn||!Bn.data||!Mn.needsHillshadePrepare)continue;const yn=Bn.dim,In=Bn.stride,Nn=Bn.getPixels();if(Tt.activeTexture.set(nn.TEXTURE1),Tt.pixelStoreUnpackPremultiplyAlpha.set(!1),Mn.demTexture=Mn.demTexture||ut.getTileTexture(In),Mn.demTexture){const pr=Mn.demTexture;pr.update(Nn,{premultiply:!1}),pr.bind(nn.NEAREST,nn.CLAMP_TO_EDGE)}else Mn.demTexture=new oe(Tt,Nn,nn.RGBA,{premultiply:!1}),Mn.demTexture.bind(nn.NEAREST,nn.CLAMP_TO_EDGE);Tt.activeTexture.set(nn.TEXTURE0);let Fn=Mn.fbo;if(!Fn){const pr=new oe(Tt,{width:yn,height:yn,data:null},nn.RGBA);pr.bind(nn.LINEAR,nn.CLAMP_TO_EDGE),Fn=Mn.fbo=Tt.createFramebuffer(yn,yn,!0,!1),Fn.colorAttachment.set(pr.texture)}Tt.bindFramebuffer.set(Fn.framebuffer),Tt.viewport.set([0,0,yn,yn]),ut.useProgram("hillshadePrepare").draw(Tt,nn.TRIANGLES,kt,Rt,zt,Ui.disabled,lf(Mn.tileID,Bn),null,null,Bt.id,ut.rasterBoundsBuffer,ut.quadTriangleIndexBuffer,ut.rasterBoundsSegments),Mn.needsHillshadePrepare=!1}})(N,$,ae,ee,Xe,$i.disabled,pt),Ke.viewport.set([0,0,N.width,N.height]);else if(N.renderPass==="translucent")if($e){const[ut,mt,vt]=N.stencilConfigForOverlapTwoPass(ae);Vc(N,$,ee,vt,ut,Xe,pt,!1,ke),Vc(N,$,ee,vt,mt,Xe,pt,!0,ke)}else{const[ut,mt]=N.getStencilConfigForOverlapAndUpdateStencilID(ae);Vc(N,$,ee,mt,ut,Xe,pt,!1,ke)}}(l,c,_,w,K):o.c3(_)?function(N,$,ee,ae,xe){if(N.renderPass!=="translucent"||ee.paint.get("raster-opacity")===0||!ae.length)return;const{isRenderingToTexture:ke}=xe,Ke=$.getSource(),$e=N.style.projection.useSubdivision;if(Ke instanceof rr)Bi(N,$,ee,ae,null,!1,!1,Ke.tileCoords,Ke.flippedWindingOrder,ke);else if($e){const[Xe,pt,ut]=N.stencilConfigForOverlapTwoPass(ae);Bi(N,$,ee,ut,Xe,!1,!0,kA,!1,ke),Bi(N,$,ee,ut,pt,!0,!0,kA,!1,ke)}else{const[Xe,pt]=N.getStencilConfigForOverlapAndUpdateStencilID(ae);Bi(N,$,ee,pt,Xe,!1,!0,kA,!1,ke)}}(l,c,_,w,K):o.c4(_)?function(N,$,ee,ae,xe){const ke=ee.paint.get("background-color"),Ke=ee.paint.get("background-opacity");if(Ke===0)return;const{isRenderingToTexture:$e}=xe,Xe=N.context,pt=Xe.gl,ut=N.style.projection,mt=N.transform,vt=mt.tileSize,Bt=ee.paint.get("background-pattern");if(N.isPatternMissing(Bt))return;const kt=!Bt&&ke.a===1&&Ke===1&&N.opaquePassEnabledForLayer()?"opaque":"translucent";if(N.renderPass!==kt)return;const Rt=$i.disabled,zt=N.getDepthModeForSublayer(0,kt==="opaque"?Yr.ReadWrite:Yr.ReadOnly),Tt=N.colorModeForRenderPass(),nn=N.useProgram(Bt?"backgroundPattern":"background"),Zt=ae||Oe(mt,{tileSize:vt,terrain:N.style.map.terrain});Bt&&(Xe.activeTexture.set(pt.TEXTURE0),N.imageManager.bind(N.context));const Mn=ee.getCrossfadeParameters();for(const Bn of Zt){const yn=mt.getProjectionData({overscaledTileID:Bn,applyGlobeMatrix:!$e,applyTerrainMatrix:!0}),In=Bt?uf(Ke,N,Bt,{tileID:Bn,tileSize:vt},Mn):Qc(Ke,ke),Nn=N.style.map.terrain&&N.style.map.terrain.getTerrainData(Bn),Fn=ut.getMeshFromTileID(Xe,Bn.canonical,!1,!0,"raster");nn.draw(Xe,pt.TRIANGLES,zt,Rt,Tt,Ui.backCCW,In,Nn,yn,ee.id,Fn.vertexBuffer,Fn.indexBuffer,Fn.segments)}}(l,0,_,w,K):o.c5(_)&&function(N,$,ee,ae){const{isRenderingGlobe:xe}=ae,ke=N.context,Ke=ee.implementation,$e=N.style.projection,Xe=N.transform,pt=Xe.getProjectionDataForCustomLayer(xe),ut={farZ:Xe.farZ,nearZ:Xe.nearZ,fov:Xe.fov*Math.PI/180,modelViewProjectionMatrix:Xe.modelViewProjectionMatrix,projectionMatrix:Xe.projectionMatrix,shaderData:{variantName:$e.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${$e.shaderPreludeCode.vertexSource}`,define:$e.shaderDefine},defaultProjectionData:pt},mt=Ke.renderingMode?Ke.renderingMode:"2d";if(N.renderPass==="offscreen"){const vt=Ke.prerender;vt&&(N.setCustomLayerDefaults(),ke.setColorMode(N.colorModeForRenderPass()),vt.call(Ke,ke.gl,ut),ke.setDirty(),N.setBaseState())}else if(N.renderPass==="translucent"){N.setCustomLayerDefaults(),ke.setColorMode(N.colorModeForRenderPass()),ke.setStencilMode($i.disabled);const vt=mt==="3d"?N.getDepthModeFor3D():N.getDepthModeForSublayer(0,Yr.ReadOnly);ke.setDepthMode(vt),Ke.render(ke.gl,ut),ke.setDirty(),N.setBaseState(),ke.bindFramebuffer.set(null)}}(l,0,_,K))}saveTileTexture(l){const c=this._tileTextures[l.size[0]];c?c.push(l):this._tileTextures[l.size[0]]=[l]}getTileTexture(l){const c=this._tileTextures[l];return c&&c.length>0?c.pop():null}isPatternMissing(l){if(!l)return!1;if(!l.from||!l.to)return!0;const c=this.imageManager.getPattern(l.from.toString()),_=this.imageManager.getPattern(l.to.toString());return!c||!_}useProgram(l,c,_=!1){this.cache=this.cache||{};const w=!!this.style.map.terrain,K=this.style.projection,N=l+(c?c.cacheKey:"")+`/${_?XA:K.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(w?"/terrain":"");return this.cache[N]||(this.cache[N]=new xc(this.context,ei[l],c,Qd[l],this._showOverdrawInspector,w,_?ei.projectionMercator:K.shaderPreludeCode,_?aa:K.shaderDefine)),this.cache[N]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const l=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(l.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new oe(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:l,drawingBufferHeight:c}=this.context.gl;return this.width!==l||this.height!==c}}function PA(k,l){let c,_=!1,w=null,K=null;const N=()=>{w=null,_&&(k.apply(K,c),w=setTimeout(N,l),_=!1)};return(...$)=>(_=!0,K=this,c=$,w||N(),w)}class sc{constructor(l){this._getCurrentHash=()=>{const c=window.location.hash.replace("#","");if(this._hashName){let _;return c.split("&").map(w=>w.split("=")).forEach(w=>{w[0]===this._hashName&&(_=w)}),(_&&_[1]||"").split("/")}return c.split("/")},this._onHashChange=()=>{const c=this._getCurrentHash();if(!this._isValidHash(c))return!1;const _=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(c[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+c[2],+c[1]],zoom:+c[0],bearing:_,pitch:+(c[4]||0)}),!0},this._updateHashUnthrottled=()=>{const c=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,c)},this._removeHash=()=>{const c=this._getCurrentHash();if(c.length===0)return;const _=c.join("/");let w=_;w.split("&").length>0&&(w=w.split("&")[0]),this._hashName&&(w=`${this._hashName}=${_}`);let K=window.location.hash.replace(w,"");K.startsWith("#&")?K=K.slice(0,1)+K.slice(2):K==="#"&&(K="");let N=window.location.href.replace(/(#.+)?$/,K);N=N.replace("&&","&"),window.history.replaceState(window.history.state,null,N)},this._updateHash=PA(this._updateHashUnthrottled,300),this._hashName=l&&encodeURIComponent(l)}addTo(l){return this._map=l,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(l){const c=this._map.getCenter(),_=Math.round(100*this._map.getZoom())/100,w=Math.ceil((_*Math.LN2+Math.log(512/360/.5))/Math.LN10),K=Math.pow(10,w),N=Math.round(c.lng*K)/K,$=Math.round(c.lat*K)/K,ee=this._map.getBearing(),ae=this._map.getPitch();let xe="";if(xe+=l?`/${N}/${$}/${_}`:`${_}/${$}/${N}`,(ee||ae)&&(xe+="/"+Math.round(10*ee)/10),ae&&(xe+=`/${Math.round(ae)}`),this._hashName){const ke=this._hashName;let Ke=!1;const $e=window.location.hash.slice(1).split("&").map(Xe=>{const pt=Xe.split("=")[0];return pt===ke?(Ke=!0,`${pt}=${xe}`):Xe}).filter(Xe=>Xe);return Ke||$e.push(`${ke}=${xe}`),`#${$e.join("&")}`}return`#${xe}`}_isValidHash(l){if(l.length<3||l.some(isNaN))return!1;try{new o.N(+l[2],+l[1])}catch{return!1}const c=+l[0],_=+(l[3]||0),w=+(l[4]||0);return c>=this._map.getMinZoom()&&c<=this._map.getMaxZoom()&&_>=0&&_<=180&&w>=this._map.getMinPitch()&&w<=this._map.getMaxPitch()}}const Yu={linearity:.3,easing:o.c6(0,0,.3,1)},$u=o.e({deceleration:2500,maxSpeed:1400},Yu),KA=o.e({deceleration:20,maxSpeed:1400},Yu),Ec=o.e({deceleration:1e3,maxSpeed:360},Yu),xu=o.e({deceleration:1e3,maxSpeed:90},Yu),Ih=o.e({deceleration:1e3,maxSpeed:360},Yu);class ot{constructor(l){this._map=l,this.clear()}clear(){this._inertiaBuffer=[]}record(l){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:S.now(),settings:l})}_drainInertiaBuffer(){const l=this._inertiaBuffer,c=S.now();for(;l.length>0&&c-l[0].time>160;)l.shift()}_onMoveEnd(l){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const c={zoom:0,bearing:0,pitch:0,roll:0,pan:new o.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:K}of this._inertiaBuffer)c.zoom+=K.zoomDelta||0,c.bearing+=K.bearingDelta||0,c.pitch+=K.pitchDelta||0,c.roll+=K.rollDelta||0,K.panDelta&&c.pan._add(K.panDelta),K.around&&(c.around=K.around),K.pinchAround&&(c.pinchAround=K.pinchAround);const _=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,w={};if(c.pan.mag()){const K=Io(c.pan.mag(),_,o.e({},$u,l||{})),N=c.pan.mult(K.amount/c.pan.mag()),$=this._map.cameraHelper.handlePanInertia(N,this._map.transform);w.center=$.easingCenter,w.offset=$.easingOffset,DA(w,K)}if(c.zoom){const K=Io(c.zoom,_,KA);w.zoom=this._map.transform.zoom+K.amount,DA(w,K)}if(c.bearing){const K=Io(c.bearing,_,Ec);w.bearing=this._map.transform.bearing+o.ab(K.amount,-179,179),DA(w,K)}if(c.pitch){const K=Io(c.pitch,_,xu);w.pitch=this._map.transform.pitch+K.amount,DA(w,K)}if(c.roll){const K=Io(c.roll,_,Ih);w.roll=this._map.transform.roll+o.ab(K.amount,-179,179),DA(w,K)}if(w.zoom||w.bearing){const K=c.pinchAround===void 0?c.around:c.pinchAround;w.around=K?this._map.unproject(K):this._map.getCenter()}return this.clear(),o.e(w,{noMoveStart:!0})}}function DA(k,l){(!k.duration||k.duration<l.duration)&&(k.duration=l.duration,k.easing=l.easing)}function Io(k,l,c){const{maxSpeed:_,linearity:w,deceleration:K}=c,N=o.ab(k*w/(l/1e3),-_,_),$=Math.abs(N)/(K*w);return{easing:c.easing,duration:1e3*$,amount:N*($/2)}}class pi extends o.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,c,_,w={}){const K=I.mousePos(c.getCanvas(),_),N=c.unproject(K);super(l,o.e({point:K,lngLat:N,originalEvent:_},w)),this._defaultPrevented=!1,this.target=c}}class ii extends o.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,c,_){const w=l==="touchend"?_.changedTouches:_.touches,K=I.touchPos(c.getCanvasContainer(),w),N=K.map(ee=>c.unproject(ee)),$=K.reduce((ee,ae,xe,ke)=>ee.add(ae.div(ke.length)),new o.P(0,0));super(l,{points:K,point:$,lngLats:N,lngLat:c.unproject($),originalEvent:_}),this._defaultPrevented=!1}}class is extends o.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,c,_){super(l,{originalEvent:_}),this._defaultPrevented=!1}}class fA{constructor(l,c){this._map=l,this._clickTolerance=c.clickTolerance}reset(){delete this._mousedownPos}wheel(l){return this._firePreventable(new is(l.type,this._map,l))}mousedown(l,c){return this._mousedownPos=c,this._firePreventable(new pi(l.type,this._map,l))}mouseup(l){this._map.fire(new pi(l.type,this._map,l))}click(l,c){this._mousedownPos&&this._mousedownPos.dist(c)>=this._clickTolerance||this._map.fire(new pi(l.type,this._map,l))}dblclick(l){return this._firePreventable(new pi(l.type,this._map,l))}mouseover(l){this._map.fire(new pi(l.type,this._map,l))}mouseout(l){this._map.fire(new pi(l.type,this._map,l))}touchstart(l){return this._firePreventable(new ii(l.type,this._map,l))}touchmove(l){this._map.fire(new ii(l.type,this._map,l))}touchend(l){this._map.fire(new ii(l.type,this._map,l))}touchcancel(l){this._map.fire(new ii(l.type,this._map,l))}_firePreventable(l){if(this._map.fire(l),l.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class $d{constructor(l){this._map=l}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(l){this._map.fire(new pi(l.type,this._map,l))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new pi("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(l){this._delayContextMenu?this._contextMenuEvent=l:this._ignoreContextMenu||this._map.fire(new pi(l.type,this._map,l)),this._map.listens("contextmenu")&&l.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Ia{constructor(l){this._map=l}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(l){return this.transform.screenPointToLocation(o.P.convert(l),this._map.terrain)}}class Us{constructor(l,c){this._map=l,this._tr=new Ia(l),this._el=l.getCanvasContainer(),this._container=l.getContainer(),this._clickTolerance=c.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(l,c){this.isEnabled()&&l.shiftKey&&l.button===0&&(I.disableDrag(),this._startPos=this._lastPos=c,this._active=!0)}mousemoveWindow(l,c){if(!this._active)return;const _=c;if(this._lastPos.equals(_)||!this._box&&_.dist(this._startPos)<this._clickTolerance)return;const w=this._startPos;this._lastPos=_,this._box||(this._box=I.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",l));const K=Math.min(w.x,_.x),N=Math.max(w.x,_.x),$=Math.min(w.y,_.y),ee=Math.max(w.y,_.y);I.setTransform(this._box,`translate(${K}px,${$}px)`),this._box.style.width=N-K+"px",this._box.style.height=ee-$+"px"}mouseupWindow(l,c){if(!this._active||l.button!==0)return;const _=this._startPos,w=c;if(this.reset(),I.suppressClick(),_.x!==w.x||_.y!==w.y)return this._map.fire(new o.k("boxzoomend",{originalEvent:l})),{cameraAnimation:K=>K.fitScreenCoordinates(_,w,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",l)}keydown(l){this._active&&l.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",l))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(I.remove(this._box),this._box=null),I.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(l,c){return this._map.fire(new o.k(l,{originalEvent:c}))}}function Ss(k,l){if(k.length!==l.length)throw new Error(`The number of touches and points are not equal - touches ${k.length}, points ${l.length}`);const c={};for(let _=0;_<k.length;_++)c[k[_].identifier]=l[_];return c}class Bc{constructor(l){this.reset(),this.numTouches=l.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(l,c,_){(this.centroid||_.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=l.timeStamp),_.length===this.numTouches&&(this.centroid=function(w){const K=new o.P(0,0);for(const N of w)K._add(N);return K.div(w.length)}(c),this.touches=Ss(_,c)))}touchmove(l,c,_){if(this.aborted||!this.centroid)return;const w=Ss(_,c);for(const K in this.touches){const N=w[K];(!N||N.dist(this.touches[K])>30)&&(this.aborted=!0)}}touchend(l,c,_){if((!this.centroid||l.timeStamp-this.startTime>500)&&(this.aborted=!0),_.length===0){const w=!this.aborted&&this.centroid;if(this.reset(),w)return w}}}class ra{constructor(l){this.singleTap=new Bc(l),this.numTaps=l.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(l,c,_){this.singleTap.touchstart(l,c,_)}touchmove(l,c,_){this.singleTap.touchmove(l,c,_)}touchend(l,c,_){const w=this.singleTap.touchend(l,c,_);if(w){const K=l.timeStamp-this.lastTime<500,N=!this.lastTap||this.lastTap.dist(w)<30;if(K&&N||this.reset(),this.count++,this.lastTime=l.timeStamp,this.lastTap=w,this.count===this.numTaps)return this.reset(),w}}}class ua{constructor(l){this._tr=new Ia(l),this._zoomIn=new ra({numTouches:1,numTaps:2}),this._zoomOut=new ra({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(l,c,_){this._zoomIn.touchstart(l,c,_),this._zoomOut.touchstart(l,c,_)}touchmove(l,c,_){this._zoomIn.touchmove(l,c,_),this._zoomOut.touchmove(l,c,_)}touchend(l,c,_){const w=this._zoomIn.touchend(l,c,_),K=this._zoomOut.touchend(l,c,_),N=this._tr;return w?(this._active=!0,l.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:$=>$.easeTo({duration:300,zoom:N.zoom+1,around:N.unproject(w)},{originalEvent:l})}):K?(this._active=!0,l.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:$=>$.easeTo({duration:300,zoom:N.zoom-1,around:N.unproject(K)},{originalEvent:l})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class hr{constructor(l){this._enabled=!!l.enable,this._moveStateManager=l.moveStateManager,this._clickTolerance=l.clickTolerance||1,this._moveFunction=l.move,this._activateOnStart=!!l.activateOnStart,l.assignEvents(this),this.reset()}reset(l){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(l)}_move(...l){const c=this._moveFunction(...l);if(c.bearingDelta||c.pitchDelta||c.rollDelta||c.around||c.panDelta)return this._active=!0,c}dragStart(l,c){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(l)&&(this._moveStateManager.startMove(l),this._lastPoint=Array.isArray(c)?c[0]:c,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(l,c){if(!this.isEnabled())return;const _=this._lastPoint;if(!_)return;if(l.preventDefault(),!this._moveStateManager.isValidMoveEvent(l))return void this.reset(l);const w=Array.isArray(c)?c[0]:c;return!this._moved&&w.dist(_)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=w,this._move(_,w))}dragEnd(l){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(l)&&(this._moved&&I.suppressClick(),this.reset(l))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const wd={0:1,2:2};class ga{constructor(l){this._correctEvent=l.checkCorrectEvent}startMove(l){const c=I.mouseButton(l);this._eventButton=c}endMove(l){delete this._eventButton}isValidStartEvent(l){return this._correctEvent(l)}isValidMoveEvent(l){return!function(c,_){const w=wd[_];return c.buttons===void 0||(c.buttons&w)!==w}(l,this._eventButton)}isValidEndEvent(l){return I.mouseButton(l)===this._eventButton}}class Md{constructor(){this._firstTouch=void 0}_isOneFingerTouch(l){return l.targetTouches.length===1}_isSameTouchEvent(l){return l.targetTouches[0].identifier===this._firstTouch}startMove(l){this._firstTouch=l.targetTouches[0].identifier}endMove(l){delete this._firstTouch}isValidStartEvent(l){return this._isOneFingerTouch(l)}isValidMoveEvent(l){return this._isOneFingerTouch(l)&&this._isSameTouchEvent(l)}isValidEndEvent(l){return this._isOneFingerTouch(l)&&this._isSameTouchEvent(l)}}class Sd{constructor(l=new ga({checkCorrectEvent:()=>!0}),c=new Md){this.mouseMoveStateManager=l,this.oneFingerTouchMoveStateManager=c}_executeRelevantHandler(l,c,_){return l instanceof MouseEvent?c(l):typeof TouchEvent<"u"&&l instanceof TouchEvent?_(l):void 0}startMove(l){this._executeRelevantHandler(l,c=>this.mouseMoveStateManager.startMove(c),c=>this.oneFingerTouchMoveStateManager.startMove(c))}endMove(l){this._executeRelevantHandler(l,c=>this.mouseMoveStateManager.endMove(c),c=>this.oneFingerTouchMoveStateManager.endMove(c))}isValidStartEvent(l){return this._executeRelevantHandler(l,c=>this.mouseMoveStateManager.isValidStartEvent(c),c=>this.oneFingerTouchMoveStateManager.isValidStartEvent(c))}isValidMoveEvent(l){return this._executeRelevantHandler(l,c=>this.mouseMoveStateManager.isValidMoveEvent(c),c=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(c))}isValidEndEvent(l){return this._executeRelevantHandler(l,c=>this.mouseMoveStateManager.isValidEndEvent(c),c=>this.oneFingerTouchMoveStateManager.isValidEndEvent(c))}}const ac=k=>{k.mousedown=k.dragStart,k.mousemoveWindow=k.dragMove,k.mouseup=k.dragEnd,k.contextmenu=l=>{l.preventDefault()}};class nu{constructor(l,c){this._clickTolerance=l.clickTolerance||1,this._map=c,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new o.P(0,0)}_shouldBePrevented(l){return l<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(l,c,_){return this._calculateTransform(l,c,_)}touchmove(l,c,_){if(this._active){if(!this._shouldBePrevented(_.length))return l.preventDefault(),this._calculateTransform(l,c,_);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",l)}}touchend(l,c,_){this._calculateTransform(l,c,_),this._active&&this._shouldBePrevented(_.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(l,c,_){_.length>0&&(this._active=!0);const w=Ss(_,c),K=new o.P(0,0),N=new o.P(0,0);let $=0;for(const ae in w){const xe=w[ae],ke=this._touches[ae];ke&&(K._add(xe),N._add(xe.sub(ke)),$++,w[ae]=xe)}if(this._touches=w,this._shouldBePrevented($)||!N.mag())return;const ee=N.div($);return this._sum._add(ee),this._sum.mag()<this._clickTolerance?void 0:{around:K.div($),panDelta:ee}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Xi{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(l,c,_){this._firstTwoTouches||_.length<2||(this._firstTwoTouches=[_[0].identifier,_[1].identifier],this._start([c[0],c[1]]))}touchmove(l,c,_){if(!this._firstTwoTouches)return;l.preventDefault();const[w,K]=this._firstTwoTouches,N=hl(_,c,w),$=hl(_,c,K);if(!N||!$)return;const ee=this._aroundCenter?null:N.add($).div(2);return this._move([N,$],ee,l)}touchend(l,c,_){if(!this._firstTwoTouches)return;const[w,K]=this._firstTwoTouches,N=hl(_,c,w),$=hl(_,c,K);N&&$||(this._active&&I.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(l){this._enabled=!0,this._aroundCenter=!!l&&l.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function hl(k,l,c){for(let _=0;_<k.length;_++)if(k[_].identifier===c)return l[_]}function kh(k,l){return Math.log(k/l)/Math.LN2}class Oc extends Xi{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(l){this._startDistance=this._distance=l[0].dist(l[1])}_move(l,c){const _=this._distance;if(this._distance=l[0].dist(l[1]),this._active||!(Math.abs(kh(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:kh(this._distance,_),pinchAround:c}}}function RA(k,l){return 180*k.angleWith(l)/Math.PI}class Ic extends Xi{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(l){this._startVector=this._vector=l[0].sub(l[1]),this._minDiameter=l[0].dist(l[1])}_move(l,c,_){const w=this._vector;if(this._vector=l[0].sub(l[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:RA(this._vector,w),pinchAround:c}}_isBelowThreshold(l){this._minDiameter=Math.min(this._minDiameter,l.mag());const c=25/(Math.PI*this._minDiameter)*360,_=RA(l,this._startVector);return Math.abs(_)<c}}function FA(k){return Math.abs(k.y)>Math.abs(k.x)}class lc extends Xi{constructor(l){super(),this._currentTouchCount=0,this._map=l}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(l,c,_){super.touchstart(l,c,_),this._currentTouchCount=_.length}_start(l){this._lastPoints=l,FA(l[0].sub(l[1]))&&(this._valid=!1)}_move(l,c,_){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const w=l[0].sub(this._lastPoints[0]),K=l[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(w,K,_.timeStamp),this._valid?(this._lastPoints=l,this._active=!0,{pitchDelta:(w.y+K.y)/2*-.5}):void 0}gestureBeginsVertically(l,c,_){if(this._valid!==void 0)return this._valid;const w=l.mag()>=2,K=c.mag()>=2;if(!w&&!K)return;if(!w||!K)return this._firstMove===void 0&&(this._firstMove=_),_-this._firstMove<100&&void 0;const N=l.y>0==c.y>0;return FA(l)&&FA(c)&&N}}const _s={panStep:100,bearingStep:15,pitchStep:10};class Ro{constructor(l){this._tr=new Ia(l);const c=_s;this._panStep=c.panStep,this._bearingStep=c.bearingStep,this._pitchStep=c.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(l){if(l.altKey||l.ctrlKey||l.metaKey)return;let c=0,_=0,w=0,K=0,N=0;switch(l.keyCode){case 61:case 107:case 171:case 187:c=1;break;case 189:case 109:case 173:c=-1;break;case 37:l.shiftKey?_=-1:(l.preventDefault(),K=-1);break;case 39:l.shiftKey?_=1:(l.preventDefault(),K=1);break;case 38:l.shiftKey?w=1:(l.preventDefault(),N=-1);break;case 40:l.shiftKey?w=-1:(l.preventDefault(),N=1);break;default:return}return this._rotationDisabled&&(_=0,w=0),{cameraAnimation:$=>{const ee=this._tr;$.easeTo({duration:300,easeId:"keyboardHandler",easing:ru,zoom:c?Math.round(ee.zoom)+c*(l.shiftKey?2:1):ee.zoom,bearing:ee.bearing+_*this._bearingStep,pitch:ee.pitch+w*this._pitchStep,offset:[-K*this._panStep,-N*this._panStep],center:ee.center},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function ru(k){return k*(2-k)}const Ga=4.000244140625;class Qa{constructor(l,c){this._onTimeout=_=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(_)},this._map=l,this._tr=new Ia(l),this._triggerRenderFrame=c,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(l){this._defaultZoomRate=l}setWheelZoomRate(l){this._wheelZoomRate=l}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(l){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!l&&l.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(l){return!!this._map.cooperativeGestures.isEnabled()&&!(l.ctrlKey||this._map.cooperativeGestures.isBypassed(l))}wheel(l){if(!this.isEnabled())return;if(this._shouldBePrevented(l))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",l);let c=l.deltaMode===WheelEvent.DOM_DELTA_LINE?40*l.deltaY:l.deltaY;const _=S.now(),w=_-(this._lastWheelEventTime||0);this._lastWheelEventTime=_,c!==0&&c%Ga==0?this._type="wheel":c!==0&&Math.abs(c)<4?this._type="trackpad":w>400?(this._type=null,this._lastValue=c,this._timeout=setTimeout(this._onTimeout,40,l)):this._type||(this._type=Math.abs(w*c)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,c+=this._lastValue)),l.shiftKey&&c&&(c/=4),this._type&&(this._lastWheelEvent=l,this._delta-=c,this._active||this._start(l)),l.preventDefault()}_start(l){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const c=I.mousePos(this._map.getCanvas(),l),_=this._tr;this._aroundPoint=this._aroundCenter?_.transform.locationToScreenPoint(o.N.convert(_.center)):c,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const l=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const $=l.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=$),typeof this._targetZoom=="number"&&(this._targetZoom+=$)}if(this._delta!==0){const $=this._type==="wheel"&&Math.abs(this._delta)>Ga?this._wheelZoomRate:this._defaultZoomRate;let ee=2/(1+Math.exp(-Math.abs(this._delta*$)));this._delta<0&&ee!==0&&(ee=1/ee);const ae=typeof this._targetZoom!="number"?l.scale:o.aG(this._targetZoom);this._targetZoom=Math.min(l.maxZoom,Math.max(l.minZoom,o.a8(ae*ee))),this._type==="wheel"&&(this._startZoom=l.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const c=typeof this._targetZoom!="number"?l.zoom:this._targetZoom,_=this._startZoom,w=this._easing;let K,N=!1;if(this._type==="wheel"&&_&&w){const $=S.now()-this._lastWheelEventTime,ee=Math.min(($+5)/200,1),ae=w(ee);K=o.y.number(_,c,ae),ee<1?this._frameId||(this._frameId=!0):N=!0}else K=c,N=!0;return this._active=!0,N&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout},200)),this._lastExpectedZoom=K,{noInertia:!0,needsRenderFrame:!N,zoomDelta:K-l.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(l){let c=o.c8;if(this._prevEase){const _=this._prevEase,w=(S.now()-_.start)/_.duration,K=_.easing(w+.01)-_.easing(w),N=.27/Math.sqrt(K*K+1e-4)*.01,$=Math.sqrt(.0729-N*N);c=o.c6(N,$,.25,1)}return this._prevEase={start:S.now(),duration:l,easing:c},c}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class jl{constructor(l,c){this._clickZoom=l,this._tapZoom=c}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Fo{constructor(l){this._tr=new Ia(l),this.reset()}reset(){this._active=!1}dblclick(l,c){return l.preventDefault(),{cameraAnimation:_=>{_.easeTo({duration:300,zoom:this._tr.zoom+(l.shiftKey?-1:1),around:this._tr.unproject(c)},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class wu{constructor(){this._tap=new ra({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(l,c,_){if(!this._swipePoint)if(this._tapTime){const w=c[0],K=l.timeStamp-this._tapTime<500,N=this._tapPoint.dist(w)<30;K&&N?_.length>0&&(this._swipePoint=w,this._swipeTouch=_[0].identifier):this.reset()}else this._tap.touchstart(l,c,_)}touchmove(l,c,_){if(this._tapTime){if(this._swipePoint){if(_[0].identifier!==this._swipeTouch)return;const w=c[0],K=w.y-this._swipePoint.y;return this._swipePoint=w,l.preventDefault(),this._active=!0,{zoomDelta:K/128}}}else this._tap.touchmove(l,c,_)}touchend(l,c,_){if(this._tapTime)this._swipePoint&&_.length===0&&this.reset();else{const w=this._tap.touchend(l,c,_);w&&(this._tapTime=l.timeStamp,this._tapPoint=w)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class uc{constructor(l,c,_){this._el=l,this._mousePan=c,this._touchPan=_}enable(l){this._inertiaOptions=l||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Vd{constructor(l,c,_,w){this._pitchWithRotate=l.pitchWithRotate,this._rollEnabled=l.rollEnabled,this._mouseRotate=c,this._mousePitch=_,this._mouseRoll=w}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class LA{constructor(l,c,_,w){this._el=l,this._touchZoom=c,this._touchRotate=_,this._tapDragZoom=w,this._rotationDisabled=!1,this._enabled=!0}enable(l){this._touchZoom.enable(l),this._rotationDisabled||this._touchRotate.enable(l),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class Ac{constructor(l,c){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=l,this._options=c,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const l=this._map.getCanvasContainer();l.classList.add("maplibregl-cooperative-gestures"),this._container=I.create("div","maplibregl-cooperative-gesture-screen",l);let c=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(c=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const _=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),w=document.createElement("div");w.className="maplibregl-desktop-message",w.textContent=c,this._container.appendChild(w);const K=document.createElement("div");K.className="maplibregl-mobile-message",K.textContent=_,this._container.appendChild(K),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(I.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(l){return l[this._bypassKey]}notifyGestureBlocked(l,c){this._enabled&&(this._map.fire(new o.k("cooperativegestureprevented",{gestureType:l,originalEvent:c})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const ka=k=>k.zoom||k.drag||k.roll||k.pitch||k.rotate;class bs extends o.k{}function hs(k){return k.panDelta&&k.panDelta.mag()||k.zoomDelta||k.bearingDelta||k.pitchDelta||k.rollDelta}class Pr{constructor(l,c){this.handleWindowEvent=w=>{this.handleEvent(w,`${w.type}Window`)},this.handleEvent=(w,K)=>{if(w.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const N=w.type==="renderFrame"?void 0:w,$={needsRenderFrame:!1},ee={},ae={},xe=w.touches,ke=xe?this._getMapTouches(xe):void 0,Ke=ke?I.touchPos(this._map.getCanvas(),ke):I.mousePos(this._map.getCanvas(),w);for(const{handlerName:pt,handler:ut,allowed:mt}of this._handlers){if(!ut.isEnabled())continue;let vt;this._blockedByActive(ae,mt,pt)?ut.reset():ut[K||w.type]&&(vt=ut[K||w.type](w,Ke,ke),this.mergeHandlerResult($,ee,vt,pt,N),vt&&vt.needsRenderFrame&&this._triggerRenderFrame()),(vt||ut.isActive())&&(ae[pt]=ut)}const $e={};for(const pt in this._previousActiveHandlers)ae[pt]||($e[pt]=N);this._previousActiveHandlers=ae,(Object.keys($e).length||hs($))&&(this._changes.push([$,ee,$e]),this._triggerRenderFrame()),(Object.keys(ae).length||hs($))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Xe}=$;Xe&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Xe(this._map))},this._map=l,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new ot(l),this._bearingSnap=c.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(c);const _=this._el;this._listeners=[[_,"touchstart",{passive:!0}],[_,"touchmove",{passive:!1}],[_,"touchend",void 0],[_,"touchcancel",void 0],[_,"mousedown",void 0],[_,"mousemove",void 0],[_,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[_,"mouseover",void 0],[_,"mouseout",void 0],[_,"dblclick",void 0],[_,"click",void 0],[_,"keydown",{capture:!1}],[_,"keyup",void 0],[_,"wheel",{passive:!1}],[_,"contextmenu",void 0],[window,"blur",void 0]];for(const[w,K,N]of this._listeners)I.addEventListener(w,K,w===document?this.handleWindowEvent:this.handleEvent,N)}destroy(){for(const[l,c,_]of this._listeners)I.removeEventListener(l,c,l===document?this.handleWindowEvent:this.handleEvent,_)}_addDefaultHandlers(l){const c=this._map,_=c.getCanvasContainer();this._add("mapEvent",new fA(c,l));const w=c.boxZoom=new Us(c,l);this._add("boxZoom",w),l.interactive&&l.boxZoom&&w.enable();const K=c.cooperativeGestures=new Ac(c,l.cooperativeGestures);this._add("cooperativeGestures",K),l.cooperativeGestures&&K.enable();const N=new ua(c),$=new Fo(c);c.doubleClickZoom=new jl($,N),this._add("tapZoom",N),this._add("clickZoom",$),l.interactive&&l.doubleClickZoom&&c.doubleClickZoom.enable();const ee=new wu;this._add("tapDragZoom",ee);const ae=c.touchPitch=new lc(c);this._add("touchPitch",ae),l.interactive&&l.touchPitch&&c.touchPitch.enable(l.touchPitch);const xe=()=>c.project(c.getCenter()),ke=function({enable:kt,clickTolerance:Rt,aroundCenter:zt=!0,minPixelCenterThreshold:Tt=100,rotateDegreesPerPixelMoved:nn=.8},Zt){const Mn=new ga({checkCorrectEvent:Bn=>I.mouseButton(Bn)===0&&Bn.ctrlKey||I.mouseButton(Bn)===2&&!Bn.ctrlKey});return new hr({clickTolerance:Rt,move:(Bn,yn)=>{const In=Zt();if(zt&&Math.abs(In.y-Bn.y)>Tt)return{bearingDelta:o.c7(new o.P(Bn.x,yn.y),yn,In)};let Nn=(yn.x-Bn.x)*nn;return zt&&yn.y<In.y&&(Nn=-Nn),{bearingDelta:Nn}},moveStateManager:Mn,enable:kt,assignEvents:ac})}(l,xe),Ke=function({enable:kt,clickTolerance:Rt,pitchDegreesPerPixelMoved:zt=-.5}){const Tt=new ga({checkCorrectEvent:nn=>I.mouseButton(nn)===0&&nn.ctrlKey||I.mouseButton(nn)===2});return new hr({clickTolerance:Rt,move:(nn,Zt)=>({pitchDelta:(Zt.y-nn.y)*zt}),moveStateManager:Tt,enable:kt,assignEvents:ac})}(l),$e=function({enable:kt,clickTolerance:Rt,rollDegreesPerPixelMoved:zt=.3},Tt){const nn=new ga({checkCorrectEvent:Zt=>I.mouseButton(Zt)===2&&Zt.ctrlKey});return new hr({clickTolerance:Rt,move:(Zt,Mn)=>{const Bn=Tt();let yn=(Mn.x-Zt.x)*zt;return Mn.y<Bn.y&&(yn=-yn),{rollDelta:yn}},moveStateManager:nn,enable:kt,assignEvents:ac})}(l,xe);c.dragRotate=new Vd(l,ke,Ke,$e),this._add("mouseRotate",ke,["mousePitch"]),this._add("mousePitch",Ke,["mouseRotate","mouseRoll"]),this._add("mouseRoll",$e,["mousePitch"]),l.interactive&&l.dragRotate&&c.dragRotate.enable();const Xe=function({enable:kt,clickTolerance:Rt}){const zt=new ga({checkCorrectEvent:Tt=>I.mouseButton(Tt)===0&&!Tt.ctrlKey});return new hr({clickTolerance:Rt,move:(Tt,nn)=>({around:nn,panDelta:nn.sub(Tt)}),activateOnStart:!0,moveStateManager:zt,enable:kt,assignEvents:ac})}(l),pt=new nu(l,c);c.dragPan=new uc(_,Xe,pt),this._add("mousePan",Xe),this._add("touchPan",pt,["touchZoom","touchRotate"]),l.interactive&&l.dragPan&&c.dragPan.enable(l.dragPan);const ut=new Ic,mt=new Oc;c.touchZoomRotate=new LA(_,mt,ut,ee),this._add("touchRotate",ut,["touchPan","touchZoom"]),this._add("touchZoom",mt,["touchPan","touchRotate"]),l.interactive&&l.touchZoomRotate&&c.touchZoomRotate.enable(l.touchZoomRotate);const vt=c.scrollZoom=new Qa(c,()=>this._triggerRenderFrame());this._add("scrollZoom",vt,["mousePan"]),l.interactive&&l.scrollZoom&&c.scrollZoom.enable(l.scrollZoom);const Bt=c.keyboard=new Ro(c);this._add("keyboard",Bt),l.interactive&&l.keyboard&&c.keyboard.enable(),this._add("blockableMapEvent",new $d(c))}_add(l,c,_){this._handlers.push({handlerName:l,handler:c,allowed:_}),this._handlersById[l]=c}stop(l){if(!this._updatingCamera){for(const{handler:c}of this._handlers)c.reset();this._inertia.clear(),this._fireEvents({},{},l),this._changes=[]}}isActive(){for(const{handler:l}of this._handlers)if(l.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!ka(this._eventsInProgress)||this.isZooming()}_blockedByActive(l,c,_){for(const w in l)if(w!==_&&(!c||c.indexOf(w)<0))return!0;return!1}_getMapTouches(l){const c=[];for(const _ of l)this._el.contains(_.target)&&c.push(_);return c}mergeHandlerResult(l,c,_,w,K){if(!_)return;o.e(l,_);const N={handlerName:w,originalEvent:_.originalEvent||K};_.zoomDelta!==void 0&&(c.zoom=N),_.panDelta!==void 0&&(c.drag=N),_.rollDelta!==void 0&&(c.roll=N),_.pitchDelta!==void 0&&(c.pitch=N),_.bearingDelta!==void 0&&(c.rotate=N)}_applyChanges(){const l={},c={},_={};for(const[w,K,N]of this._changes)w.panDelta&&(l.panDelta=(l.panDelta||new o.P(0,0))._add(w.panDelta)),w.zoomDelta&&(l.zoomDelta=(l.zoomDelta||0)+w.zoomDelta),w.bearingDelta&&(l.bearingDelta=(l.bearingDelta||0)+w.bearingDelta),w.pitchDelta&&(l.pitchDelta=(l.pitchDelta||0)+w.pitchDelta),w.rollDelta&&(l.rollDelta=(l.rollDelta||0)+w.rollDelta),w.around!==void 0&&(l.around=w.around),w.pinchAround!==void 0&&(l.pinchAround=w.pinchAround),w.noInertia&&(l.noInertia=w.noInertia),o.e(c,K),o.e(_,N);this._updateMapTransform(l,c,_),this._changes=[]}_updateMapTransform(l,c,_){const w=this._map,K=w._getTransformForUpdate(),N=w.terrain;if(!(hs(l)||N&&this._terrainMovement))return this._fireEvents(c,_,!0);w._stop(!0);let{panDelta:$,zoomDelta:ee,bearingDelta:ae,pitchDelta:xe,rollDelta:ke,around:Ke,pinchAround:$e}=l;$e!==void 0&&(Ke=$e),Ke=Ke||w.transform.centerPoint,N&&!K.isPointOnMapSurface(Ke)&&(Ke=K.centerPoint);const Xe={panDelta:$,zoomDelta:ee,rollDelta:ke,pitchDelta:xe,bearingDelta:ae,around:Ke};this._map.cameraHelper.useGlobeControls&&!K.isPointOnMapSurface(Ke)&&(Ke=K.centerPoint);const pt=Ke.distSqr(K.centerPoint)<.01?K.center:K.screenPointToLocation($?Ke.sub($):Ke);N?(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(Xe,K),this._terrainMovement||!c.drag&&!c.zoom?c.drag&&this._terrainMovement?K.setCenter(K.screenPointToLocation(K.centerPoint.sub($))):this._map.cameraHelper.handleMapControlsPan(Xe,K,pt):(this._terrainMovement=!0,this._map._elevationFreeze=!0,this._map.cameraHelper.handleMapControlsPan(Xe,K,pt))):(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(Xe,K),this._map.cameraHelper.handleMapControlsPan(Xe,K,pt)),w._applyUpdatedTransform(K),this._map._update(),l.noInertia||this._inertia.record(l),this._fireEvents(c,_,!0)}_fireEvents(l,c,_){const w=ka(this._eventsInProgress),K=ka(l),N={};for(const ke in l){const{originalEvent:Ke}=l[ke];this._eventsInProgress[ke]||(N[`${ke}start`]=Ke),this._eventsInProgress[ke]=l[ke]}!w&&K&&this._fireEvent("movestart",K.originalEvent);for(const ke in N)this._fireEvent(ke,N[ke]);K&&this._fireEvent("move",K.originalEvent);for(const ke in l){const{originalEvent:Ke}=l[ke];this._fireEvent(ke,Ke)}const $={};let ee;for(const ke in this._eventsInProgress){const{handlerName:Ke,originalEvent:$e}=this._eventsInProgress[ke];this._handlersById[Ke].isActive()||(delete this._eventsInProgress[ke],ee=c[Ke]||$e,$[`${ke}end`]=ee)}for(const ke in $)this._fireEvent(ke,$[ke]);const ae=ka(this._eventsInProgress),xe=(w||K)&&!ae;if(xe&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const ke=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&ke.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(ke)}if(_&&xe){this._updatingCamera=!0;const ke=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Ke=$e=>$e!==0&&-this._bearingSnap<$e&&$e<this._bearingSnap;!ke||!ke.essential&&S.prefersReducedMotion?(this._map.fire(new o.k("moveend",{originalEvent:ee})),Ke(this._map.getBearing())&&this._map.resetNorth()):(Ke(ke.bearing||this._map.getBearing())&&(ke.bearing=0),ke.freezeElevation=!0,this._map.easeTo(ke,{originalEvent:ee})),this._updatingCamera=!1}}_fireEvent(l,c){this._map.fire(new o.k(l,c?{originalEvent:c}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(l=>{delete this._frameId,this.handleEvent(new bs("renderFrame",{timeStamp:l})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Hr extends o.E{constructor(l,c,_){super(),this._renderFrameCallback=()=>{const w=Math.min((S.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(w)),w<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=l,this._bearingSnap=_.bearingSnap,this.cameraHelper=c,this.on("moveend",()=>{delete this._requestedCameraState})}migrateProjection(l,c){l.apply(this.transform),this.transform=l,this.cameraHelper=c}getCenter(){return new o.N(this.transform.center.lng,this.transform.center.lat)}setCenter(l,c){return this.jumpTo({center:l},c)}getCenterElevation(){return this.transform.elevation}setCenterElevation(l,c){return this.jumpTo({elevation:l},c),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(l){this._centerClampedToGround=l}panBy(l,c,_){return l=o.P.convert(l).mult(-1),this.panTo(this.transform.center,o.e({offset:l},c),_)}panTo(l,c,_){return this.easeTo(o.e({center:l},c),_)}getZoom(){return this.transform.zoom}setZoom(l,c){return this.jumpTo({zoom:l},c),this}zoomTo(l,c,_){return this.easeTo(o.e({zoom:l},c),_)}zoomIn(l,c){return this.zoomTo(this.getZoom()+1,l,c),this}zoomOut(l,c){return this.zoomTo(this.getZoom()-1,l,c),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(l,c){return l!=this.transform.fov&&(this.transform.setFov(l),this.fire(new o.k("movestart",c)).fire(new o.k("move",c)).fire(new o.k("moveend",c))),this}getBearing(){return this.transform.bearing}setBearing(l,c){return this.jumpTo({bearing:l},c),this}getPadding(){return this.transform.padding}setPadding(l,c){return this.jumpTo({padding:l},c),this}rotateTo(l,c,_){return this.easeTo(o.e({bearing:l},c),_)}resetNorth(l,c){return this.rotateTo(0,o.e({duration:1e3},l),c),this}resetNorthPitch(l,c){return this.easeTo(o.e({bearing:0,pitch:0,roll:0,duration:1e3},l),c),this}snapToNorth(l,c){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(l,c):this}getPitch(){return this.transform.pitch}setPitch(l,c){return this.jumpTo({pitch:l},c),this}getRoll(){return this.transform.roll}setRoll(l,c){return this.jumpTo({roll:l},c),this}cameraForBounds(l,c){l=Ut.convert(l).adjustAntiMeridian();const _=c&&c.bearing||0;return this._cameraForBoxAndBearing(l.getNorthWest(),l.getSouthEast(),_,c)}_cameraForBoxAndBearing(l,c,_,w){const K={top:0,bottom:0,right:0,left:0};if(typeof(w=o.e({padding:K,offset:[0,0],maxZoom:this.transform.maxZoom},w)).padding=="number"){const ae=w.padding;w.padding={top:ae,bottom:ae,right:ae,left:ae}}const N=o.e(K,w.padding);w.padding=N;const $=this.transform,ee=new Ut(l,c);return this.cameraHelper.cameraForBoxAndBearing(w,N,ee,_,$)}fitBounds(l,c,_){return this._fitInternal(this.cameraForBounds(l,c),c,_)}fitScreenCoordinates(l,c,_,w,K){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(o.P.convert(l)),this.transform.screenPointToLocation(o.P.convert(c)),_,w),w,K)}_fitInternal(l,c,_){return l?(delete(c=o.e(l,c)).padding,c.linear?this.easeTo(c,_):this.flyTo(c,_)):this}jumpTo(l,c){this.stop();const _=this._getTransformForUpdate();let w=!1,K=!1,N=!1;const $=_.zoom;this.cameraHelper.handleJumpToCenterZoom(_,l);const ee=_.zoom!==$;return"elevation"in l&&_.elevation!==+l.elevation&&_.setElevation(+l.elevation),"bearing"in l&&_.bearing!==+l.bearing&&(w=!0,_.setBearing(+l.bearing)),"pitch"in l&&_.pitch!==+l.pitch&&(K=!0,_.setPitch(+l.pitch)),"roll"in l&&_.roll!==+l.roll&&(N=!0,_.setRoll(+l.roll)),l.padding==null||_.isPaddingEqual(l.padding)||_.setPadding(l.padding),this._applyUpdatedTransform(_),this.fire(new o.k("movestart",c)).fire(new o.k("move",c)),ee&&this.fire(new o.k("zoomstart",c)).fire(new o.k("zoom",c)).fire(new o.k("zoomend",c)),w&&this.fire(new o.k("rotatestart",c)).fire(new o.k("rotate",c)).fire(new o.k("rotateend",c)),K&&this.fire(new o.k("pitchstart",c)).fire(new o.k("pitch",c)).fire(new o.k("pitchend",c)),N&&this.fire(new o.k("rollstart",c)).fire(new o.k("roll",c)).fire(new o.k("rollend",c)),this.fire(new o.k("moveend",c))}calculateCameraOptionsFromTo(l,c,_,w=0){const K=o.Y.fromLngLat(l,c),N=o.Y.fromLngLat(_,w),$=N.x-K.x,ee=N.y-K.y,ae=N.z-K.z,xe=Math.hypot($,ee,ae);if(xe===0)throw new Error("Can't calculate camera options with same From and To");const ke=Math.hypot($,ee),Ke=o.a8(this.transform.cameraToCenterDistance/xe/this.transform.tileSize),$e=180*Math.atan2($,-ee)/Math.PI;let Xe=180*Math.acos(ke/xe)/Math.PI;return Xe=ae<0?90-Xe:90+Xe,{center:N.toLngLat(),elevation:w,zoom:Ke,pitch:Xe,bearing:$e}}calculateCameraOptionsFromCameraLngLatAltRotation(l,c,_,w,K){const N=this.transform.calculateCenterFromCameraLngLatAlt(l,c,_,w);return{center:N.center,elevation:N.elevation,zoom:N.zoom,bearing:_,pitch:w,roll:K}}easeTo(l,c){this._stop(!1,l.easeId),((l=o.e({offset:[0,0],duration:500,easing:o.c8},l)).animate===!1||!l.essential&&S.prefersReducedMotion)&&(l.duration=0);const _=this._getTransformForUpdate(),w=this.getBearing(),K=_.pitch,N=_.roll,$="bearing"in l?this._normalizeBearing(l.bearing,w):w,ee="pitch"in l?+l.pitch:K,ae="roll"in l?this._normalizeBearing(l.roll,N):N,xe="padding"in l?l.padding:_.padding,ke=o.P.convert(l.offset);let Ke,$e;l.around&&(Ke=o.N.convert(l.around),$e=_.locationToScreenPoint(Ke));const Xe={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},pt=this.cameraHelper.handleEaseTo(_,{bearing:$,pitch:ee,roll:ae,padding:xe,around:Ke,aroundPoint:$e,offsetAsPoint:ke,offset:l.offset,zoom:l.zoom,center:l.center});return this._rotating=this._rotating||w!==$,this._pitching=this._pitching||ee!==K,this._rolling=this._rolling||ae!==N,this._padding=!_.isPaddingEqual(xe),this._zooming=this._zooming||pt.isZooming,this._easeId=l.easeId,this._prepareEase(c,l.noMoveStart,Xe),this.terrain&&this._prepareElevation(pt.elevationCenter),this._ease(ut=>{pt.easeFunc(ut),this.terrain&&!l.freezeElevation&&this._updateElevation(ut),this._applyUpdatedTransform(_),this._fireMoveEvents(c)},ut=>{this.terrain&&l.freezeElevation&&this._finalizeElevation(),this._afterEase(c,ut)},l),this}_prepareEase(l,c,_={}){this._moving=!0,c||_.moving||this.fire(new o.k("movestart",l)),this._zooming&&!_.zooming&&this.fire(new o.k("zoomstart",l)),this._rotating&&!_.rotating&&this.fire(new o.k("rotatestart",l)),this._pitching&&!_.pitching&&this.fire(new o.k("pitchstart",l)),this._rolling&&!_.rolling&&this.fire(new o.k("rollstart",l))}_prepareElevation(l){this._elevationCenter=l,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(l,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(l){this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const c=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(l<1&&c!==this._elevationTarget){const _=this._elevationTarget-this._elevationStart;this._elevationStart+=l*(_-(c-(_*l+this._elevationStart))/(1-l)),this._elevationTarget=c}this.transform.setElevation(o.y.number(this._elevationStart,this._elevationTarget,l))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(l){if(!this.terrain&&l.elevation>=0&&l.pitch<=90)return{};const c=l.getCameraLngLat(),_=l.getCameraAltitude(),w=this.terrain?this.terrain.getElevationForLngLatZoom(c,l.zoom):0;if(_<w){const K=this.calculateCameraOptionsFromTo(c,w,l.center,l.elevation);return{pitch:K.pitch,zoom:K.zoom}}return{}}_applyUpdatedTransform(l){const c=[];if(c.push(w=>this._elevateCameraIfInsideTerrain(w)),this.transformCameraUpdate&&c.push(w=>this.transformCameraUpdate(w)),!c.length)return;const _=l.clone();for(const w of c){const K=_.clone(),{center:N,zoom:$,roll:ee,pitch:ae,bearing:xe,elevation:ke}=w(K);N&&K.setCenter(N),ke!==void 0&&K.setElevation(ke),$!==void 0&&K.setZoom($),ee!==void 0&&K.setRoll(ee),ae!==void 0&&K.setPitch(ae),xe!==void 0&&K.setBearing(xe),_.apply(K)}this.transform.apply(_)}_fireMoveEvents(l){this.fire(new o.k("move",l)),this._zooming&&this.fire(new o.k("zoom",l)),this._rotating&&this.fire(new o.k("rotate",l)),this._pitching&&this.fire(new o.k("pitch",l)),this._rolling&&this.fire(new o.k("roll",l))}_afterEase(l,c){if(this._easeId&&c&&this._easeId===c)return;delete this._easeId;const _=this._zooming,w=this._rotating,K=this._pitching,N=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,_&&this.fire(new o.k("zoomend",l)),w&&this.fire(new o.k("rotateend",l)),K&&this.fire(new o.k("pitchend",l)),N&&this.fire(new o.k("rollend",l)),this.fire(new o.k("moveend",l))}flyTo(l,c){if(!l.essential&&S.prefersReducedMotion){const yn=o.M(l,["center","zoom","bearing","pitch","roll","elevation"]);return this.jumpTo(yn,c)}this.stop(),l=o.e({offset:[0,0],speed:1.2,curve:1.42,easing:o.c8},l);const _=this._getTransformForUpdate(),w=_.bearing,K=_.pitch,N=_.roll,$=_.padding,ee="bearing"in l?this._normalizeBearing(l.bearing,w):w,ae="pitch"in l?+l.pitch:K,xe="roll"in l?this._normalizeBearing(l.roll,N):N,ke="padding"in l?l.padding:_.padding,Ke=o.P.convert(l.offset);let $e=_.centerPoint.add(Ke);const Xe=_.screenPointToLocation($e),pt=this.cameraHelper.handleFlyTo(_,{bearing:ee,pitch:ae,roll:xe,padding:ke,locationAtOffset:Xe,offsetAsPoint:Ke,center:l.center,minZoom:l.minZoom,zoom:l.zoom});let ut=l.curve;const mt=Math.max(_.width,_.height),vt=mt/pt.scaleOfZoom,Bt=pt.pixelPathLength;typeof pt.scaleOfMinZoom=="number"&&(ut=Math.sqrt(mt/pt.scaleOfMinZoom/Bt*2));const kt=ut*ut;function Rt(yn){const In=(vt*vt-mt*mt+(yn?-1:1)*kt*kt*Bt*Bt)/(2*(yn?vt:mt)*kt*Bt);return Math.log(Math.sqrt(In*In+1)-In)}function zt(yn){return(Math.exp(yn)-Math.exp(-yn))/2}function Tt(yn){return(Math.exp(yn)+Math.exp(-yn))/2}const nn=Rt(!1);let Zt=function(yn){return Tt(nn)/Tt(nn+ut*yn)},Mn=function(yn){return mt*((Tt(nn)*(zt(In=nn+ut*yn)/Tt(In))-zt(nn))/kt)/Bt;var In},Bn=(Rt(!0)-nn)/ut;if(Math.abs(Bt)<2e-6||!isFinite(Bn)){if(Math.abs(mt-vt)<1e-6)return this.easeTo(l,c);const yn=vt<mt?-1:1;Bn=Math.abs(Math.log(vt/mt))/ut,Mn=()=>0,Zt=In=>Math.exp(yn*ut*In)}return l.duration="duration"in l?+l.duration:1e3*Bn/("screenSpeed"in l?+l.screenSpeed/ut:+l.speed),l.maxDuration&&l.duration>l.maxDuration&&(l.duration=0),this._zooming=!0,this._rotating=w!==ee,this._pitching=ae!==K,this._rolling=xe!==N,this._padding=!_.isPaddingEqual(ke),this._prepareEase(c,!1),this.terrain&&this._prepareElevation(pt.targetCenter),this._ease(yn=>{const In=yn*Bn,Nn=1/Zt(In),Fn=Mn(In);this._rotating&&_.setBearing(o.y.number(w,ee,yn)),this._pitching&&_.setPitch(o.y.number(K,ae,yn)),this._rolling&&_.setRoll(o.y.number(N,xe,yn)),this._padding&&(_.interpolatePadding($,ke,yn),$e=_.centerPoint.add(Ke)),pt.easeFunc(yn,Nn,Fn,$e),this.terrain&&!l.freezeElevation&&this._updateElevation(yn),this._applyUpdatedTransform(_),this._fireMoveEvents(c)},()=>{this.terrain&&l.freezeElevation&&this._finalizeElevation(),this._afterEase(c)},l),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(l,c){var _;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const w=this._onEaseEnd;delete this._onEaseEnd,w.call(this,c)}return l||(_=this.handlers)===null||_===void 0||_.stop(!1),this}_ease(l,c,_){_.animate===!1||_.duration===0?(l(1),c()):(this._easeStart=S.now(),this._easeOptions=_,this._onEaseFrame=l,this._onEaseEnd=c,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(l,c){l=o.aI(l,-180,180);const _=Math.abs(l-c);return Math.abs(l-360-c)<_&&(l-=360),Math.abs(l+360-c)<_&&(l+=360),l}queryTerrainElevation(l){return this.terrain?this.terrain.getElevationForLngLatZoom(o.N.convert(l),this.transform.tileZoom):null}}const UA={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Mu{constructor(l=UA){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=c=>{!c||c.sourceDataType!=="metadata"&&c.sourceDataType!=="visibility"&&c.dataType!=="style"&&c.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=l}getDefaultPosition(){return"bottom-right"}onAdd(l){return this._map=l,this._compact=this.options.compact,this._container=I.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=I.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=I.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){I.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._sanitizedAttributionHTML=void 0}_setElementTitle(l,c){const _=this._map._getUIString(`AttributionControl.${c}`);l.title=_,l.setAttribute("aria-label",_)}_updateAttributions(){if(!this._map.style)return;let l=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?l=l.concat(this.options.customAttribution.map(w=>typeof w!="string"?"":w)):typeof this.options.customAttribution=="string"&&l.push(this.options.customAttribution)),this._map.style.stylesheet){const w=this._map.style.stylesheet;this.styleOwner=w.owner,this.styleId=w.id}const c=this._map.style.sourceCaches;for(const w in c){const K=c[w];if(K.used||K.usedForTerrain){const N=K.getSource();N.attribution&&l.indexOf(N.attribution)<0&&l.push(N.attribution)}}l=l.filter(w=>String(w).trim()),l.sort((w,K)=>w.length-K.length),l=l.filter((w,K)=>{for(let N=K+1;N<l.length;N++)if(l[N].indexOf(w)>=0)return!1;return!0});const _=l.join(" | ");_!==this._sanitizedAttributionHTML&&(this._sanitizedAttributionHTML=I.sanitize(_),l.length?(this._innerContainer.innerHTML=this._sanitizedAttributionHTML,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class fl{constructor(l={}){this._updateCompact=()=>{const c=this._container.children;if(c.length){const _=c[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&_.classList.add("maplibregl-compact"):_.classList.remove("maplibregl-compact")}},this.options=l}getDefaultPosition(){return"bottom-left"}onAdd(l){this._map=l,this._compact=this.options&&this.options.compact,this._container=I.create("div","maplibregl-ctrl");const c=I.create("a","maplibregl-ctrl-logo");return c.target="_blank",c.rel="noopener nofollow",c.href="https://maplibre.org/",c.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),c.setAttribute("rel","noopener nofollow"),this._container.appendChild(c),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){I.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class iu{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(l){const c=++this._id;return this._queue.push({callback:l,id:c,cancelled:!1}),c}remove(l){const c=this._currentlyRunning,_=c?this._queue.concat(c):this._queue;for(const w of _)if(w.id===l)return void(w.cancelled=!0)}run(l=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const c=this._currentlyRunning=this._queue;this._queue=[];for(const _ of c)if(!_.cancelled&&(_.callback(l),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var Ed=o.aA([{name:"a_pos3d",type:"Int16",components:3}]);class pA extends o.E{constructor(l){super(),this._lastTilesetChange=S.now(),this.sourceCache=l,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=l._source.tileSize*2**this.deltaZoom,l.usedForTerrain=!0,l.tileSize=this.tileSize}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(l,c){this.sourceCache.update(l,c),this._renderableTilesKeys=[];const _={};for(const w of Oe(l,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:c,calculateTileZoom:this.sourceCache._source.calculateTileZoom}))_[w.key]=!0,this._renderableTilesKeys.push(w.key),this._tiles[w.key]||(w.terrainRttPosMatrix32f=new Float64Array(16),o.bL(w.terrainRttPosMatrix32f,0,o.X,o.X,0,0,1),this._tiles[w.key]=new fe(w,this.tileSize),this._lastTilesetChange=S.now());for(const w in this._tiles)_[w]||delete this._tiles[w]}freeRtt(l){for(const c in this._tiles){const _=this._tiles[c];(!l||_.tileID.equals(l)||_.tileID.isChildOf(l)||l.isChildOf(_.tileID))&&(_.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(l=>this.getTileByID(l))}getTileByID(l){return this._tiles[l]}getTerrainCoords(l){const c={};for(const _ of this._renderableTilesKeys){const w=this._tiles[_].tileID,K=l.clone(),N=o.a$();if(w.canonical.equals(l.canonical))o.bL(N,0,o.X,o.X,0,0,1);else if(w.canonical.isChildOf(l.canonical)){const $=w.canonical.z-l.canonical.z,ee=w.canonical.x-(w.canonical.x>>$<<$),ae=w.canonical.y-(w.canonical.y>>$<<$),xe=o.X>>$;o.bL(N,0,xe,xe,0,0,1),o.J(N,N,[-ee*xe,-ae*xe,0])}else{if(!l.canonical.isChildOf(w.canonical))continue;{const $=l.canonical.z-w.canonical.z,ee=l.canonical.x-(l.canonical.x>>$<<$),ae=l.canonical.y-(l.canonical.y>>$<<$),xe=o.X>>$;o.bL(N,0,o.X,o.X,0,0,1),o.J(N,N,[ee*xe,ae*xe,0]),o.K(N,N,[1/2**$,1/2**$,0])}}K.terrainRttPosMatrix32f=new Float32Array(N),c[_]=K}return c}getSourceTile(l,c){const _=this.sourceCache._source;let w=l.overscaledZ-this.deltaZoom;if(w>_.maxzoom&&(w=_.maxzoom),w<_.minzoom)return null;this._sourceTileCache[l.key]||(this._sourceTileCache[l.key]=l.scaledTo(w).key);let K=this.sourceCache.getTileByID(this._sourceTileCache[l.key]);if((!K||!K.dem)&&c)for(;w>=_.minzoom&&(!K||!K.dem);)K=this.sourceCache.getTileByID(l.scaledTo(w--).key);return K}anyTilesAfterTime(l=Date.now()){return this._lastTilesetChange>=l}}class cc{constructor(l,c,_){this._meshCache={},this.painter=l,this.sourceCache=new pA(c),this.options=_,this.exaggeration=typeof _.exaggeration=="number"?_.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(l,c,_,w=o.X){var K;if(!(c>=0&&c<w&&_>=0&&_<w))return 0;const N=this.getTerrainData(l),$=(K=N.tile)===null||K===void 0?void 0:K.dem;if(!$)return 0;const ee=o.c9([],[c/w*o.X,_/w*o.X],N.u_terrain_matrix),ae=[ee[0]*$.dim,ee[1]*$.dim],xe=Math.floor(ae[0]),ke=Math.floor(ae[1]),Ke=ae[0]-xe,$e=ae[1]-ke;return $.get(xe,ke)*(1-Ke)*(1-$e)+$.get(xe+1,ke)*Ke*(1-$e)+$.get(xe,ke+1)*(1-Ke)*$e+$.get(xe+1,ke+1)*Ke*$e}getElevationForLngLatZoom(l,c){if(!o.ca(c,l.wrap()))return 0;const{tileID:_,mercatorX:w,mercatorY:K}=this._getOverscaledTileIDFromLngLatZoom(l,c);return this.getElevation(_,w%o.X,K%o.X,o.X)}getElevation(l,c,_,w=o.X){return this.getDEMElevation(l,c,_,w)*this.exaggeration}getTerrainData(l){if(!this._emptyDemTexture){const w=this.painter.context,K=new o.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new oe(w,K,w.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new oe(w,new o.R({width:1,height:1}),w.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(w.gl.NEAREST,w.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=o.aq([])}const c=this.sourceCache.getSourceTile(l,!0);if(c&&c.dem&&(!c.demTexture||c.needsTerrainPrepare)){const w=this.painter.context;c.demTexture=this.painter.getTileTexture(c.dem.stride),c.demTexture?c.demTexture.update(c.dem.getPixels(),{premultiply:!1}):c.demTexture=new oe(w,c.dem.getPixels(),w.gl.RGBA,{premultiply:!1}),c.demTexture.bind(w.gl.NEAREST,w.gl.CLAMP_TO_EDGE),c.needsTerrainPrepare=!1}const _=c&&c+c.tileID.key+l.key;if(_&&!this._demMatrixCache[_]){const w=this.sourceCache.sourceCache._source.maxzoom;let K=l.canonical.z-c.tileID.canonical.z;l.overscaledZ>l.canonical.z&&(l.canonical.z>=w?K=l.canonical.z-w:o.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const N=l.canonical.x-(l.canonical.x>>K<<K),$=l.canonical.y-(l.canonical.y>>K<<K),ee=o.cb(new Float64Array(16),[1/(o.X<<K),1/(o.X<<K),0]);o.J(ee,ee,[N*o.X,$*o.X,0]),this._demMatrixCache[l.key]={matrix:ee,coord:l}}return{u_depth:2,u_terrain:3,u_terrain_dim:c&&c.dem&&c.dem.dim||1,u_terrain_matrix:_?this._demMatrixCache[l.key].matrix:this._emptyDemMatrix,u_terrain_unpack:c&&c.dem&&c.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(c&&c.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:c}}getFramebuffer(l){const c=this.painter,_=c.width/devicePixelRatio,w=c.height/devicePixelRatio;return!this._fbo||this._fbo.width===_&&this._fbo.height===w||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new oe(c.context,{width:_,height:w,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new oe(c.context,{width:_,height:w,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=c.context.createFramebuffer(_,w,!0,!1),this._fbo.depthAttachment.set(c.context.createRenderbuffer(c.context.gl.DEPTH_COMPONENT16,_,w))),this._fbo.colorAttachment.set(l==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const l=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const c=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let K=0,N=0;K<this._coordsTextureSize;K++)for(let $=0;$<this._coordsTextureSize;$++,N+=4)c[N+0]=255&$,c[N+1]=255&K,c[N+2]=$>>8<<4|K>>8,c[N+3]=0;const _=new o.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(c.buffer)),w=new oe(l,_,l.gl.RGBA,{premultiply:!1});return w.bind(l.gl.NEAREST,l.gl.CLAMP_TO_EDGE),this._coordsTexture=w,w}pointCoordinate(l){this.painter.maybeDrawDepthAndCoords(!0);const c=new Uint8Array(4),_=this.painter.context,w=_.gl,K=Math.round(l.x*this.painter.pixelRatio/devicePixelRatio),N=Math.round(l.y*this.painter.pixelRatio/devicePixelRatio),$=Math.round(this.painter.height/devicePixelRatio);_.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),w.readPixels(K,$-N-1,1,1,w.RGBA,w.UNSIGNED_BYTE,c),_.bindFramebuffer.set(null);const ee=c[0]+(c[2]>>4<<8),ae=c[1]+((15&c[2])<<8),xe=this.coordsIndex[255-c[3]],ke=xe&&this.sourceCache.getTileByID(xe);if(!ke)return null;const Ke=this._coordsTextureSize,$e=(1<<ke.tileID.canonical.z)*Ke;return new o.Y((ke.tileID.canonical.x*Ke+ee)/$e+ke.tileID.wrap,(ke.tileID.canonical.y*Ke+ae)/$e,this.getElevation(ke.tileID,ee,ae,Ke))}depthAtPoint(l){const c=new Uint8Array(4),_=this.painter.context,w=_.gl;return _.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),w.readPixels(l.x,this.painter.height/devicePixelRatio-l.y-1,1,1,w.RGBA,w.UNSIGNED_BYTE,c),_.bindFramebuffer.set(null),(c[0]/16777216+c[1]/65536+c[2]/256+c[3])/256}getTerrainMesh(l){var c;const _=((c=this.painter.style.projection)===null||c===void 0?void 0:c.transitionState)>0,w=_&&l.canonical.y===0,K=_&&l.canonical.y===(1<<l.canonical.z)-1,N=`m_${w?"n":""}_${K?"s":""}`;if(this._meshCache[N])return this._meshCache[N];const $=this.painter.context,ee=new o.cc,ae=new o.aE,xe=this.meshSize,ke=o.X/xe,Ke=xe*xe;for(let Tt=0;Tt<=xe;Tt++)for(let nn=0;nn<=xe;nn++)ee.emplaceBack(nn*ke,Tt*ke,0);for(let Tt=0;Tt<Ke;Tt+=xe+1)for(let nn=0;nn<xe;nn++)ae.emplaceBack(nn+Tt,xe+nn+Tt+1,xe+nn+Tt+2),ae.emplaceBack(nn+Tt,xe+nn+Tt+2,nn+Tt+1);const $e=ee.length,Xe=$e+(xe+1),pt=(xe+1)*xe,ut=w?o.b6:0,mt=w?0:1,vt=K?o.b7:o.X,Bt=K?0:1;for(let Tt=0;Tt<=xe;Tt++)ee.emplaceBack(Tt*ke,ut,mt);for(let Tt=0;Tt<=xe;Tt++)ee.emplaceBack(Tt*ke,vt,Bt);for(let Tt=0;Tt<xe;Tt++)ae.emplaceBack(pt+Tt,Xe+Tt,Xe+Tt+1),ae.emplaceBack(pt+Tt,Xe+Tt+1,pt+Tt+1),ae.emplaceBack(0+Tt,$e+Tt+1,$e+Tt),ae.emplaceBack(0+Tt,0+Tt+1,$e+Tt+1);const kt=ee.length,Rt=kt+2*(xe+1);for(const Tt of[0,1])for(let nn=0;nn<=xe;nn++)for(const Zt of[0,1])ee.emplaceBack(Tt*o.X,nn*ke,Zt);for(let Tt=0;Tt<2*xe;Tt+=2)ae.emplaceBack(kt+Tt,kt+Tt+1,kt+Tt+3),ae.emplaceBack(kt+Tt,kt+Tt+3,kt+Tt+2),ae.emplaceBack(Rt+Tt,Rt+Tt+3,Rt+Tt+1),ae.emplaceBack(Rt+Tt,Rt+Tt+2,Rt+Tt+3);const zt=new nl($.createVertexBuffer(ee,Ed.members),$.createIndexBuffer(ae),o.aD.simpleSegment(0,0,ee.length,ae.length));return this._meshCache[N]=zt,zt}getMeshFrameDelta(l){return 2*Math.PI*o.bo/Math.pow(2,Math.max(l,0))/5}getMinTileElevationForLngLatZoom(l,c){var _;const{tileID:w}=this._getOverscaledTileIDFromLngLatZoom(l,c);return(_=this.getMinMaxElevation(w).minElevation)!==null&&_!==void 0?_:0}getMinMaxElevation(l){const c=this.getTerrainData(l).tile,_={minElevation:null,maxElevation:null};return c&&c.dem&&(_.minElevation=c.dem.min*this.exaggeration,_.maxElevation=c.dem.max*this.exaggeration),_}_getOverscaledTileIDFromLngLatZoom(l,c){const _=o.Y.fromLngLat(l.wrap()),w=(1<<c)*o.X,K=_.x*w,N=_.y*w,$=Math.floor(K/o.X),ee=Math.floor(N/o.X);return{tileID:new o.S(c,0,c,$,ee),mercatorX:K,mercatorY:N}}}class wl{constructor(l,c,_){this._context=l,this._size=c,this._tileSize=_,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const l of this._objects)l.texture.destroy(),l.fbo.destroy()}_createObject(l){const c=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),_=new oe(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return _.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),c.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),c.colorAttachment.set(_.texture),{id:l,fbo:c,texture:_,stamp:-1,inUse:!1}}getObjectForId(l){return this._objects[l]}useObject(l){l.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(c=>l.id!==c),this._recentlyUsed.push(l.id)}stampObject(l){l.stamp=++this._stamp}getOrCreateFreeObject(){for(const c of this._recentlyUsed)if(!this._objects[c].inUse)return this._objects[c];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const l=this._createObject(this._objects.length);return this._objects.push(l),l}freeObject(l){l.inUse=!1}freeAllObjects(){for(const l of this._objects)this.freeObject(l)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(l=>!l.inUse)===!1}}const gs={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class qs{constructor(l,c){this.painter=l,this.terrain=c,this.pool=new wl(l.context,30,c.sourceCache.tileSize*c.qualityFactor)}destruct(){this.pool.destruct()}getTexture(l){return this.pool.getObjectForId(l.rtt[this._stacks.length-1].id).texture}prepareForRender(l,c){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=l._order.filter(_=>!l._layers[_].isHidden(c)),this._coordsAscending={};for(const _ in l.sourceCaches){this._coordsAscending[_]={};const w=l.sourceCaches[_].getVisibleCoordinates();for(const K of w){const N=this.terrain.sourceCache.getTerrainCoords(K);for(const $ in N)this._coordsAscending[_][$]||(this._coordsAscending[_][$]=[]),this._coordsAscending[_][$].push(N[$])}}this._coordsAscendingStr={};for(const _ of l._order){const w=l._layers[_],K=w.source;if(gs[w.type]&&!this._coordsAscendingStr[K]){this._coordsAscendingStr[K]={};for(const N in this._coordsAscending[K])this._coordsAscendingStr[K][N]=this._coordsAscending[K][N].map($=>$.key).sort().join()}}for(const _ of this._renderableTiles)for(const w in this._coordsAscendingStr){const K=this._coordsAscendingStr[w][_.tileID.key];K&&K!==_.rttCoords[w]&&(_.rtt=[])}}renderLayer(l,c){if(l.isHidden(this.painter.transform.zoom))return!1;const _=Object.assign(Object.assign({},c),{isRenderingToTexture:!0}),w=l.type,K=this.painter,N=this._renderableLayerIds[this._renderableLayerIds.length-1]===l.id;if(gs[w]&&(this._prevType&&gs[this._prevType]||this._stacks.push([]),this._prevType=w,this._stacks[this._stacks.length-1].push(l.id),!N))return!0;if(gs[this._prevType]||gs[w]&&N){this._prevType=w;const $=this._stacks.length-1,ee=this._stacks[$]||[];for(const ae of this._renderableTiles){if(this.pool.isFull()&&(qu(this.painter,this.terrain,this._rttTiles,_),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(ae),ae.rtt[$]){const ke=this.pool.getObjectForId(ae.rtt[$].id);if(ke.stamp===ae.rtt[$].stamp){this.pool.useObject(ke);continue}}const xe=this.pool.getOrCreateFreeObject();this.pool.useObject(xe),this.pool.stampObject(xe),ae.rtt[$]={id:xe.id,stamp:xe.stamp},K.context.bindFramebuffer.set(xe.fbo.framebuffer),K.context.clear({color:o.b4.transparent,stencil:0}),K.currentStencilSource=void 0;for(let ke=0;ke<ee.length;ke++){const Ke=K.style._layers[ee[ke]],$e=Ke.source?this._coordsAscending[Ke.source][ae.tileID.key]:[ae.tileID];K.context.viewport.set([0,0,xe.fbo.width,xe.fbo.height]),K._renderTileClippingMasks(Ke,$e,!0),K.renderLayer(K,K.style.sourceCaches[Ke.source],Ke,$e,_),Ke.source&&(ae.rttCoords[Ke.source]=this._coordsAscendingStr[Ke.source][ae.tileID.key])}}return qu(this.painter,this.terrain,this._rttTiles,_),this._rttTiles=[],this.pool.freeAllObjects(),gs[w]}return!1}}const Xc={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},Bd=d,mA={hash:!1,interactive:!0,bearingSnap:7,attributionControl:UA,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:o.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0},zs={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class kc{constructor(l,c,_=!1){this.mousedown=K=>{this.startMove(K,I.mousePos(this.element,K)),I.addEventListener(window,"mousemove",this.mousemove),I.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=K=>{this.move(K,I.mousePos(this.element,K))},this.mouseup=K=>{this._rotatePitchHanlder.dragEnd(K),this.offTemp()},this.touchstart=K=>{K.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=I.touchPos(this.element,K.targetTouches)[0],this.startMove(K,this._startPos),I.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),I.addEventListener(window,"touchend",this.touchend))},this.touchmove=K=>{K.targetTouches.length!==1?this.reset():(this._lastPos=I.touchPos(this.element,K.targetTouches)[0],this.move(K,this._lastPos))},this.touchend=K=>{K.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHanlder.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=c;const w=new Sd;this._rotatePitchHanlder=new hr({clickTolerance:3,move:(K,N)=>{const $=c.getBoundingClientRect(),ee=new o.P(($.bottom-$.top)/2,($.right-$.left)/2);return{bearingDelta:o.c7(new o.P(K.x,N.y),N,ee),pitchDelta:_?-.5*(N.y-K.y):void 0}},moveStateManager:w,enable:!0,assignEvents:()=>{}}),this.map=l,I.addEventListener(c,"mousedown",this.mousedown),I.addEventListener(c,"touchstart",this.touchstart,{passive:!1}),I.addEventListener(c,"touchcancel",this.reset)}startMove(l,c){this._rotatePitchHanlder.dragStart(l,c),I.disableDrag()}move(l,c){const _=this.map,{bearingDelta:w,pitchDelta:K}=this._rotatePitchHanlder.dragMove(l,c)||{};w&&_.setBearing(_.getBearing()+w),K&&_.setPitch(_.getPitch()+K)}off(){const l=this.element;I.removeEventListener(l,"mousedown",this.mousedown),I.removeEventListener(l,"touchstart",this.touchstart,{passive:!1}),I.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),I.removeEventListener(window,"touchend",this.touchend),I.removeEventListener(l,"touchcancel",this.reset),this.offTemp()}offTemp(){I.enableDrag(),I.removeEventListener(window,"mousemove",this.mousemove),I.removeEventListener(window,"mouseup",this.mouseup),I.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),I.removeEventListener(window,"touchend",this.touchend)}}let Su;function qa(k,l,c){const _=new o.N(k.lng,k.lat);if(k=new o.N(k.lng,k.lat),l){const w=new o.N(k.lng-360,k.lat),K=new o.N(k.lng+360,k.lat),N=c.locationToScreenPoint(k).distSqr(l);c.locationToScreenPoint(w).distSqr(l)<N?k=w:c.locationToScreenPoint(K).distSqr(l)<N&&(k=K)}for(;Math.abs(k.lng-c.center.lng)>180;){const w=c.locationToScreenPoint(k);if(w.x>=0&&w.y>=0&&w.x<=c.width&&w.y<=c.height)break;k.lng>c.center.lng?k.lng-=360:k.lng+=360}return k.lng!==_.lng&&c.isPointOnMapSurface(c.locationToScreenPoint(k))?k:_}const Vu={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Tc(k,l,c){const _=k.classList;for(const w in Vu)_.remove(`maplibregl-${c}-anchor-${w}`);_.add(`maplibregl-${c}-anchor-${l}`)}class Eu extends o.E{constructor(l){if(super(),this._onKeyPress=c=>{const _=c.code,w=c.charCode||c.keyCode;_!=="Space"&&_!=="Enter"&&w!==32&&w!==13||this.togglePopup()},this._onMapClick=c=>{const _=c.originalEvent.target,w=this._element;this._popup&&(_===w||w.contains(_))&&this.togglePopup()},this._update=c=>{var _;if(!this._map)return;const w=this._map.loaded()&&!this._map.isMoving();((c==null?void 0:c.type)==="terrain"||(c==null?void 0:c.type)==="render"&&!w)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?qa(this._lngLat,this._flatPos,this._map.transform):(_=this._lngLat)===null||_===void 0?void 0:_.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let K="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?K=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(K=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let N="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?N="rotateX(0deg)":this._pitchAlignment==="map"&&(N=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||c&&c.type!=="moveend"||(this._pos=this._pos.round()),I.setTransform(this._element,`${Vu[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${N} ${K}`),S.frameAsync(new AbortController).then(()=>{this._updateOpacity(c&&c.type==="moveend")}).catch(()=>{})},this._onMove=c=>{if(!this._isDragging){const _=this._clickTolerance||this._map._clickTolerance;this._isDragging=c.point.dist(this._pointerdownPos)>=_}this._isDragging&&(this._pos=c.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new o.k("dragstart"))),this.fire(new o.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new o.k("dragend")),this._state="inactive"},this._addDragHandler=c=>{this._element.contains(c.originalEvent.target)&&(c.preventDefault(),this._positionDelta=c.point.sub(this._pos).add(this._offset),this._pointerdownPos=c.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=l&&l.anchor||"center",this._color=l&&l.color||"#3FB1CE",this._scale=l&&l.scale||1,this._draggable=l&&l.draggable||!1,this._clickTolerance=l&&l.clickTolerance||0,this._subpixelPositioning=l&&l.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=l&&l.rotation||0,this._rotationAlignment=l&&l.rotationAlignment||"auto",this._pitchAlignment=l&&l.pitchAlignment&&l.pitchAlignment!=="auto"?l.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(l==null?void 0:l.opacity,l==null?void 0:l.opacityWhenCovered),l&&l.element)this._element=l.element,this._offset=o.P.convert(l&&l.offset||[0,0]);else{this._defaultMarker=!0,this._element=I.create("div");const c=I.createNS("http://www.w3.org/2000/svg","svg"),_=41,w=27;c.setAttributeNS(null,"display","block"),c.setAttributeNS(null,"height",`${_}px`),c.setAttributeNS(null,"width",`${w}px`),c.setAttributeNS(null,"viewBox",`0 0 ${w} ${_}`);const K=I.createNS("http://www.w3.org/2000/svg","g");K.setAttributeNS(null,"stroke","none"),K.setAttributeNS(null,"stroke-width","1"),K.setAttributeNS(null,"fill","none"),K.setAttributeNS(null,"fill-rule","evenodd");const N=I.createNS("http://www.w3.org/2000/svg","g");N.setAttributeNS(null,"fill-rule","nonzero");const $=I.createNS("http://www.w3.org/2000/svg","g");$.setAttributeNS(null,"transform","translate(3.0, 29.0)"),$.setAttributeNS(null,"fill","#000000");const ee=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const mt of ee){const vt=I.createNS("http://www.w3.org/2000/svg","ellipse");vt.setAttributeNS(null,"opacity","0.04"),vt.setAttributeNS(null,"cx","10.5"),vt.setAttributeNS(null,"cy","5.80029008"),vt.setAttributeNS(null,"rx",mt.rx),vt.setAttributeNS(null,"ry",mt.ry),$.appendChild(vt)}const ae=I.createNS("http://www.w3.org/2000/svg","g");ae.setAttributeNS(null,"fill",this._color);const xe=I.createNS("http://www.w3.org/2000/svg","path");xe.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),ae.appendChild(xe);const ke=I.createNS("http://www.w3.org/2000/svg","g");ke.setAttributeNS(null,"opacity","0.25"),ke.setAttributeNS(null,"fill","#000000");const Ke=I.createNS("http://www.w3.org/2000/svg","path");Ke.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),ke.appendChild(Ke);const $e=I.createNS("http://www.w3.org/2000/svg","g");$e.setAttributeNS(null,"transform","translate(6.0, 7.0)"),$e.setAttributeNS(null,"fill","#FFFFFF");const Xe=I.createNS("http://www.w3.org/2000/svg","g");Xe.setAttributeNS(null,"transform","translate(8.0, 8.0)");const pt=I.createNS("http://www.w3.org/2000/svg","circle");pt.setAttributeNS(null,"fill","#000000"),pt.setAttributeNS(null,"opacity","0.25"),pt.setAttributeNS(null,"cx","5.5"),pt.setAttributeNS(null,"cy","5.5"),pt.setAttributeNS(null,"r","5.4999962");const ut=I.createNS("http://www.w3.org/2000/svg","circle");ut.setAttributeNS(null,"fill","#FFFFFF"),ut.setAttributeNS(null,"cx","5.5"),ut.setAttributeNS(null,"cy","5.5"),ut.setAttributeNS(null,"r","5.4999962"),Xe.appendChild(pt),Xe.appendChild(ut),N.appendChild($),N.appendChild(ae),N.appendChild(ke),N.appendChild($e),N.appendChild(Xe),c.appendChild(N),c.setAttributeNS(null,"height",_*this._scale+"px"),c.setAttributeNS(null,"width",w*this._scale+"px"),this._element.appendChild(c),this._offset=o.P.convert(l&&l.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",c=>{c.preventDefault()}),this._element.addEventListener("mousedown",c=>{c.preventDefault()}),Tc(this._element,this._anchor,"marker"),l&&l.className)for(const c of l.className.split(" "))this._element.classList.add(c);this._popup=null}addTo(l){return this.remove(),this._map=l,this._element.setAttribute("aria-label",l._getUIString("Marker.Title")),l.getCanvasContainer().appendChild(this._element),l.on("move",this._update),l.on("moveend",this._update),l.on("terrain",this._update),l.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),I.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(l){return this._lngLat=o.N.convert(l),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(l){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),l){if(!("offset"in l.options)){const w=Math.abs(13.5)/Math.SQRT2;l.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[w,-1*(38.1-13.5+w)],"bottom-right":[-w,-1*(38.1-13.5+w)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=l,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(l){return this._subpixelPositioning=l,this}getPopup(){return this._popup}togglePopup(){const l=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:l?(l.isOpen()?l.remove():(l.setLngLat(this._lngLat),l.addTo(this._map)),this):this}_updateOpacity(l=!1){var c,_;if(!(!((c=this._map)===null||c===void 0)&&c.terrain)){const ke=this._map.transform.isLocationOccluded(this._lngLat)?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==ke&&(this._element.style.opacity=ke))}if(l)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const w=this._map,K=w.terrain.depthAtPoint(this._pos),N=w.terrain.getElevationForLngLatZoom(this._lngLat,w.transform.tileZoom);if(w.transform.lngLatToCameraDepth(this._lngLat,N)-K<.006)return void(this._element.style.opacity=this._opacity);const $=-this._offset.y/w.transform.pixelsPerMeter,ee=Math.sin(w.getPitch()*Math.PI/180)*$,ae=w.terrain.depthAtPoint(new o.P(this._pos.x,this._pos.y-this._offset.y)),xe=w.transform.lngLatToCameraDepth(this._lngLat,N+ee)-ae>.006;!((_=this._popup)===null||_===void 0)&&_.isOpen()&&xe&&this._popup.remove(),this._element.style.opacity=xe?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(l){return this._offset=o.P.convert(l),this._update(),this}addClassName(l){this._element.classList.add(l)}removeClassName(l){this._element.classList.remove(l)}toggleClassName(l){return this._element.classList.toggle(l)}setDraggable(l){return this._draggable=!!l,this._map&&(l?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(l){return this._rotation=l||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(l){return this._rotationAlignment=l||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(l){return this._pitchAlignment=l&&l!=="auto"?l:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(l,c){return l===void 0&&c===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),l!==void 0&&(this._opacity=l),c!==void 0&&(this._opacityWhenCovered=c),this._map&&this._updateOpacity(!0),this}}const ya={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Ys=0,ou=!1;const su={maxWidth:100,unit:"metric"};function zA(k,l,c){const _=c&&c.maxWidth||100,w=k._container.clientHeight/2,K=k._container.clientWidth/2,N=k.unproject([K-_/2,w]),$=k.unproject([K+_/2,w]),ee=Math.round(k.project($).x-k.project(N).x),ae=Math.min(_,ee,k._container.clientWidth),xe=N.distanceTo($);if(c&&c.unit==="imperial"){const ke=3.2808*xe;ke>5280?au(l,ae,ke/5280,k._getUIString("ScaleControl.Miles")):au(l,ae,ke,k._getUIString("ScaleControl.Feet"))}else c&&c.unit==="nautical"?au(l,ae,xe/1852,k._getUIString("ScaleControl.NauticalMiles")):xe>=1e3?au(l,ae,xe/1e3,k._getUIString("ScaleControl.Kilometers")):au(l,ae,xe,k._getUIString("ScaleControl.Meters"))}function au(k,l,c,_){const w=function(K){const N=Math.pow(10,`${Math.floor(K)}`.length-1);let $=K/N;return $=$>=10?10:$>=5?5:$>=3?3:$>=2?2:$>=1?1:function(ee){const ae=Math.pow(10,Math.ceil(-Math.log(ee)/Math.LN10));return Math.round(ee*ae)/ae}($),N*$}(c);k.style.width=l*(w/c)+"px",k.innerHTML=`${w}&nbsp;${_}`}const Pc={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},gA=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Ml(k){if(k){if(typeof k=="number"){const l=Math.round(Math.abs(k)/Math.SQRT2);return{center:new o.P(0,0),top:new o.P(0,k),"top-left":new o.P(l,l),"top-right":new o.P(-l,l),bottom:new o.P(0,-k),"bottom-left":new o.P(l,-l),"bottom-right":new o.P(-l,-l),left:new o.P(k,0),right:new o.P(-k,0)}}if(k instanceof o.P||Array.isArray(k)){const l=o.P.convert(k);return{center:l,top:l,"top-left":l,"top-right":l,bottom:l,"bottom-left":l,"bottom-right":l,left:l,right:l}}return{center:o.P.convert(k.center||[0,0]),top:o.P.convert(k.top||[0,0]),"top-left":o.P.convert(k["top-left"]||[0,0]),"top-right":o.P.convert(k["top-right"]||[0,0]),bottom:o.P.convert(k.bottom||[0,0]),"bottom-left":o.P.convert(k["bottom-left"]||[0,0]),"bottom-right":o.P.convert(k["bottom-right"]||[0,0]),left:o.P.convert(k.left||[0,0]),right:o.P.convert(k.right||[0,0])}}return Ml(new o.P(0,0))}const Od=d;a.AJAXError=o.cg,a.Event=o.k,a.Evented=o.E,a.LngLat=o.N,a.MercatorCoordinate=o.Y,a.Point=o.P,a.addProtocol=o.ch,a.config=o.a,a.removeProtocol=o.ci,a.AttributionControl=Mu,a.BoxZoomHandler=Us,a.CanvasSource=pn,a.CooperativeGesturesHandler=Ac,a.DoubleClickZoomHandler=jl,a.DragPanHandler=uc,a.DragRotateHandler=Vd,a.EdgeInsets=Ws,a.FullscreenControl=class extends o.E{constructor(k={}){super(),this._onFullscreenChange=()=>{var l;let c=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((l=c==null?void 0:c.shadowRoot)===null||l===void 0)&&l.fullscreenElement;)c=c.shadowRoot.fullscreenElement;c===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,k&&k.container&&(k.container instanceof HTMLElement?this._container=k.container:o.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(k){return this._map=k,this._container||(this._container=this._map.getContainer()),this._controlContainer=I.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){I.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const k=this._fullscreenButton=I.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);I.create("span","maplibregl-ctrl-icon",k).setAttribute("aria-hidden","true"),k.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const k=this._getTitle();this._fullscreenButton.setAttribute("aria-label",k),this._fullscreenButton.title=k}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new o.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new o.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},a.GeoJSONSource=tn,a.GeolocateControl=class extends o.E{constructor(k){super(),this._onSuccess=l=>{if(this._map){if(this._isOutOfMapMaxBounds(l))return this._setErrorState(),this.fire(new o.k("outofmaxbounds",l)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=l,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(l),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(l),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new o.k("geolocate",l)),this._finish()}},this._updateCamera=l=>{const c=new o.N(l.coords.longitude,l.coords.latitude),_=l.coords.accuracy,w=this._map.getBearing(),K=o.e({bearing:w},this.options.fitBoundsOptions),N=Ut.fromLngLat(c,_);this._map.fitBounds(N,K,{geolocateSource:!0})},this._updateMarker=l=>{if(l){const c=new o.N(l.coords.longitude,l.coords.latitude);this._accuracyCircleMarker.setLngLat(c).addTo(this._map),this._userLocationDotMarker.setLngLat(c).addTo(this._map),this._accuracy=l.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=l=>{if(this._map){if(this.options.trackUserLocation)if(l.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(l.code===3&&ou)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new o.k("error",l)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",l=>l.preventDefault()),this._geolocateButton=I.create("button","maplibregl-ctrl-geolocate",this._container),I.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=l=>{if(this._map){if(l===!1){o.w("Geolocation support is not available so the GeolocateControl will be disabled.");const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}else{const c=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=I.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Eu({element:this._dotElement}),this._circleElement=I.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Eu({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",c=>{c.geolocateSource||this._watchState!=="ACTIVE_LOCK"||c.originalEvent&&c.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new o.k("trackuserlocationend")),this.fire(new o.k("userlocationlostfocus")))})}},this.options=o.e({},ya,k)}onAdd(k){return this._map=k,this._container=I.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return o._(this,arguments,void 0,function*(l=!1){if(Su!==void 0&&!l)return Su;if(window.navigator.permissions===void 0)return Su=!!window.navigator.geolocation,Su;try{Su=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{Su=!!window.navigator.geolocation}return Su})}().then(l=>this._finishSetupUI(l)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),I.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Ys=0,ou=!1}_isOutOfMapMaxBounds(k){const l=this._map.getMaxBounds(),c=k.coords;return l&&(c.longitude<l.getWest()||c.longitude>l.getEast()||c.latitude<l.getSouth()||c.latitude>l.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const k=this._map.getBounds(),l=k.getSouthEast(),c=k.getNorthEast(),_=l.distanceTo(c),w=Math.ceil(this._accuracy/(_/this._map._container.clientHeight)*2);this._circleElement.style.width=`${w}px`,this._circleElement.style.height=`${w}px`}trigger(){if(!this._setup)return o.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new o.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Ys--,ou=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new o.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.k("trackuserlocationstart")),this.fire(new o.k("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let k;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Ys++,Ys>1?(k={maximumAge:6e5,timeout:0},ou=!0):(k=this.options.positionOptions,ou=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,k)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},a.GlobeControl=class{constructor(){this._toggleProjection=()=>{var k;const l=(k=this._map.getProjection())===null||k===void 0?void 0:k.type;this._map.setProjection(l!=="mercator"&&l?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var k;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((k=this._map.getProjection())===null||k===void 0?void 0:k.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(k){return this._map=k,this._container=I.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=I.create("button","maplibregl-ctrl-globe",this._container),I.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){I.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},a.Hash=sc,a.ImageSource=rr,a.KeyboardHandler=Ro,a.LngLatBounds=Ut,a.LogoControl=fl,a.Map=class extends Hr{constructor(k){var l,c;o.cd.mark(o.ce.create);const _=Object.assign(Object.assign(Object.assign({},mA),k),{canvasContextAttributes:Object.assign(Object.assign({},mA.canvasContextAttributes),k.canvasContextAttributes)});if(_.minZoom!=null&&_.maxZoom!=null&&_.minZoom>_.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(_.minPitch!=null&&_.maxPitch!=null&&_.minPitch>_.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(_.minPitch!=null&&_.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(_.maxPitch!=null&&_.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const w=new Ba,K=new EA;if(_.minZoom!==void 0&&w.setMinZoom(_.minZoom),_.maxZoom!==void 0&&w.setMaxZoom(_.maxZoom),_.minPitch!==void 0&&w.setMinPitch(_.minPitch),_.maxPitch!==void 0&&w.setMaxPitch(_.maxPitch),_.renderWorldCopies!==void 0&&w.setRenderWorldCopies(_.renderWorldCopies),super(w,K,{bearingSnap:_.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new iu,this._controls=[],this._mapId=o.a1(),this._contextLost=$=>{$.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new o.k("webglcontextlost",{originalEvent:$}))},this._contextRestored=$=>{this._setupPainter(),this.resize(),this._update(),this.fire(new o.k("webglcontextrestored",{originalEvent:$}))},this._onMapScroll=$=>{if($.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=_.interactive,this._maxTileCacheSize=_.maxTileCacheSize,this._maxTileCacheZoomLevels=_.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},_.canvasContextAttributes),this._trackResize=_.trackResize===!0,this._bearingSnap=_.bearingSnap,this._centerClampedToGround=_.centerClampedToGround,this._refreshExpiredTiles=_.refreshExpiredTiles===!0,this._fadeDuration=_.fadeDuration,this._crossSourceCollisions=_.crossSourceCollisions===!0,this._collectResourceTiming=_.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Xc),_.locale),this._clickTolerance=_.clickTolerance,this._overridePixelRatio=_.pixelRatio,this._maxCanvasSize=_.maxCanvasSize,this.transformCameraUpdate=_.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=_.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=te.addThrottleControl(()=>this.isMoving()),this._requestManager=new V(_.transformRequest),typeof _.container=="string"){if(this._container=document.getElementById(_.container),!this._container)throw new Error(`Container '${_.container}' not found.`)}else{if(!(_.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=_.container}if(_.maxBounds&&this.setMaxBounds(_.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let $=!1;const ee=PA(ae=>{this._trackResize&&!this._removed&&(this.resize(ae),this.redraw())},50);this._resizeObserver=new ResizeObserver(ae=>{$?ee(ae):$=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Pr(this,_),this._hash=_.hash&&new sc(typeof _.hash=="string"&&_.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:_.center,elevation:_.elevation,zoom:_.zoom,bearing:_.bearing,pitch:_.pitch,roll:_.roll}),_.bounds&&(this.resize(),this.fitBounds(_.bounds,o.e({},_.fitBoundsOptions,{duration:0}))));const N=typeof _.style=="string"||((c=(l=_.style)===null||l===void 0?void 0:l.projection)===null||c===void 0?void 0:c.type)!=="globe";this.resize(null,N),this._localIdeographFontFamily=_.localIdeographFontFamily,this._validateStyle=_.validateStyle,_.style&&this.setStyle(_.style,{localIdeographFontFamily:_.localIdeographFontFamily}),_.attributionControl&&this.addControl(new Mu(typeof _.attributionControl=="boolean"?void 0:_.attributionControl)),_.maplibreLogo&&this.addControl(new fl,_.logoPosition),this.on("style.load",()=>{if(N||this._resizeTransform(),this.transform.unmodified){const $=o.M(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo($)}}),this.on("data",$=>{this._update($.dataType==="style"),this.fire(new o.k(`${$.dataType}data`,$))}),this.on("dataloading",$=>{this.fire(new o.k(`${$.dataType}dataloading`,$))}),this.on("dataabort",$=>{this.fire(new o.k("sourcedataabort",$))})}_getMapId(){return this._mapId}addControl(k,l){if(l===void 0&&(l=k.getDefaultPosition?k.getDefaultPosition():"top-right"),!k||!k.onAdd)return this.fire(new o.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const c=k.onAdd(this);this._controls.push(k);const _=this._controlPositions[l];return l.indexOf("bottom")!==-1?_.insertBefore(c,_.firstChild):_.appendChild(c),this}removeControl(k){if(!k||!k.onRemove)return this.fire(new o.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const l=this._controls.indexOf(k);return l>-1&&this._controls.splice(l,1),k.onRemove(this),this}hasControl(k){return this._controls.indexOf(k)>-1}calculateCameraOptionsFromTo(k,l,c,_){return _==null&&this.terrain&&(_=this.terrain.getElevationForLngLatZoom(c,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(k,l,c,_)}resize(k,l=!0){const[c,_]=this._containerDimensions(),w=this._getClampedPixelRatio(c,_);if(this._resizeCanvas(c,_,w),this.painter.resize(c,_,w),this.painter.overLimit()){const N=this.painter.context.gl;this._maxCanvasSize=[N.drawingBufferWidth,N.drawingBufferHeight];const $=this._getClampedPixelRatio(c,_);this._resizeCanvas(c,_,$),this.painter.resize(c,_,$)}this._resizeTransform(l);const K=!this._moving;return K&&(this.stop(),this.fire(new o.k("movestart",k)).fire(new o.k("move",k))),this.fire(new o.k("resize",k)),K&&this.fire(new o.k("moveend",k)),this}_resizeTransform(k=!0){var l;const[c,_]=this._containerDimensions();this.transform.resize(c,_,k),(l=this._requestedCameraState)===null||l===void 0||l.resize(c,_,k)}_getClampedPixelRatio(k,l){const{0:c,1:_}=this._maxCanvasSize,w=this.getPixelRatio(),K=k*w,N=l*w;return Math.min(K>c?c/K:1,N>_?_/N:1)*w}getPixelRatio(){var k;return(k=this._overridePixelRatio)!==null&&k!==void 0?k:devicePixelRatio}setPixelRatio(k){this._overridePixelRatio=k,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(k){return this.transform.setMaxBounds(Ut.convert(k)),this._update()}setMinZoom(k){if((k=k??-2)>=-2&&k<=this.transform.maxZoom)return this.transform.setMinZoom(k),this._update(),this.getZoom()<k&&this.setZoom(k),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(k){if((k=k??22)>=this.transform.minZoom)return this.transform.setMaxZoom(k),this._update(),this.getZoom()>k&&this.setZoom(k),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(k){if((k=k??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(k>=0&&k<=this.transform.maxPitch)return this.transform.setMinPitch(k),this._update(),this.getPitch()<k&&this.setPitch(k),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(k){if((k=k??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(k>=this.transform.minPitch)return this.transform.setMaxPitch(k),this._update(),this.getPitch()>k&&this.setPitch(k),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(k){return this.transform.setRenderWorldCopies(k),this._update()}project(k){return this.transform.locationToScreenPoint(o.N.convert(k),this.style&&this.terrain)}unproject(k){return this.transform.screenPointToLocation(o.P.convert(k),this.terrain)}isMoving(){var k;return this._moving||((k=this.handlers)===null||k===void 0?void 0:k.isMoving())}isZooming(){var k;return this._zooming||((k=this.handlers)===null||k===void 0?void 0:k.isZooming())}isRotating(){var k;return this._rotating||((k=this.handlers)===null||k===void 0?void 0:k.isRotating())}_createDelegatedListener(k,l,c){if(k==="mouseenter"||k==="mouseover"){let _=!1;return{layers:l,listener:c,delegates:{mousemove:K=>{const N=l.filter(ee=>this.getLayer(ee)),$=N.length!==0?this.queryRenderedFeatures(K.point,{layers:N}):[];$.length?_||(_=!0,c.call(this,new pi(k,this,K.originalEvent,{features:$}))):_=!1},mouseout:()=>{_=!1}}}}if(k==="mouseleave"||k==="mouseout"){let _=!1;return{layers:l,listener:c,delegates:{mousemove:N=>{const $=l.filter(ee=>this.getLayer(ee));($.length!==0?this.queryRenderedFeatures(N.point,{layers:$}):[]).length?_=!0:_&&(_=!1,c.call(this,new pi(k,this,N.originalEvent)))},mouseout:N=>{_&&(_=!1,c.call(this,new pi(k,this,N.originalEvent)))}}}}{const _=w=>{const K=l.filter($=>this.getLayer($)),N=K.length!==0?this.queryRenderedFeatures(w.point,{layers:K}):[];N.length&&(w.features=N,c.call(this,w),delete w.features)};return{layers:l,listener:c,delegates:{[k]:_}}}}_saveDelegatedListener(k,l){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[k]=this._delegatedListeners[k]||[],this._delegatedListeners[k].push(l)}_removeDelegatedListener(k,l,c){if(!this._delegatedListeners||!this._delegatedListeners[k])return;const _=this._delegatedListeners[k];for(let w=0;w<_.length;w++){const K=_[w];if(K.listener===c&&K.layers.length===l.length&&K.layers.every(N=>l.includes(N))){for(const N in K.delegates)this.off(N,K.delegates[N]);return void _.splice(w,1)}}}on(k,l,c){if(c===void 0)return super.on(k,l);const _=typeof l=="string"?[l]:l,w=this._createDelegatedListener(k,_,c);this._saveDelegatedListener(k,w);for(const K in w.delegates)this.on(K,w.delegates[K]);return{unsubscribe:()=>{this._removeDelegatedListener(k,_,c)}}}once(k,l,c){if(c===void 0)return super.once(k,l);const _=typeof l=="string"?[l]:l,w=this._createDelegatedListener(k,_,c);for(const K in w.delegates){const N=w.delegates[K];w.delegates[K]=(...$)=>{this._removeDelegatedListener(k,_,c),N(...$)}}this._saveDelegatedListener(k,w);for(const K in w.delegates)this.once(K,w.delegates[K]);return this}off(k,l,c){return c===void 0?super.off(k,l):(this._removeDelegatedListener(k,typeof l=="string"?[l]:l,c),this)}queryRenderedFeatures(k,l){if(!this.style)return[];let c;const _=k instanceof o.P||Array.isArray(k),w=_?k:[[0,0],[this.transform.width,this.transform.height]];if(l=l||(_?{}:k)||{},w instanceof o.P||typeof w[0]=="number")c=[o.P.convert(w)];else{const K=o.P.convert(w[0]),N=o.P.convert(w[1]);c=[K,new o.P(N.x,K.y),N,new o.P(K.x,N.y),K]}return this.style.queryRenderedFeatures(c,l,this.transform)}querySourceFeatures(k,l){return this.style.querySourceFeatures(k,l)}setStyle(k,l){return(l=o.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},l)).diff!==!1&&l.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&k?(this._diffStyle(k,l),this):(this._localIdeographFontFamily=l.localIdeographFontFamily,this._updateStyle(k,l))}setTransformRequest(k){return this._requestManager.setTransformRequest(k),this}_getUIString(k){const l=this._locale[k];if(l==null)throw new Error(`Missing UI string '${k}'`);return l}_updateStyle(k,l){var c,_;if(l.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(k,l));const w=this.style&&l.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!k)),k?(this.style=new vu(this,l||{}),this.style.setEventedParent(this,{style:this.style}),typeof k=="string"?this.style.loadURL(k,l,w):this.style.loadJSON(k,l,w),this):((_=(c=this.style)===null||c===void 0?void 0:c.projection)===null||_===void 0||_.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new vu(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(k,l){if(typeof k=="string"){const c=this._requestManager.transformRequest(k,"Style");o.h(c,new AbortController).then(_=>{this._updateDiff(_.data,l)}).catch(_=>{_&&this.fire(new o.j(_))})}else typeof k=="object"&&this._updateDiff(k,l)}_updateDiff(k,l){try{this.style.setState(k,l)&&this._update(!0)}catch(c){o.w(`Unable to perform style diff: ${c.message||c.error||c}.  Rebuilding the style from scratch.`),this._updateStyle(k,l)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():o.w("There is no style added to the map.")}addSource(k,l){return this._lazyInitEmptyStyle(),this.style.addSource(k,l),this._update(!0)}isSourceLoaded(k){const l=this.style&&this.style.sourceCaches[k];if(l!==void 0)return l.loaded();this.fire(new o.j(new Error(`There is no source with ID '${k}'`)))}setTerrain(k){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),k){const l=this.style.sourceCaches[k.source];if(!l)throw new Error(`cannot load terrain, because there exists no source with ID: ${k.source}`);this.terrain===null&&l.reload();for(const c in this.style._layers){const _=this.style._layers[c];_.type==="hillshade"&&_.source===k.source&&o.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new cc(this.painter,l,k),this.painter.renderToTexture=new qs(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=c=>{c.dataType==="style"?this.terrain.sourceCache.freeRtt():c.dataType==="source"&&c.tile&&(c.sourceId!==k.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),this.terrain.sourceCache.freeRtt(c.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new o.k("terrain",{terrain:k})),this}getTerrain(){var k,l;return(l=(k=this.terrain)===null||k===void 0?void 0:k.options)!==null&&l!==void 0?l:null}areTilesLoaded(){const k=this.style&&this.style.sourceCaches;for(const l in k){const c=k[l]._tiles;for(const _ in c){const w=c[_];if(w.state!=="loaded"&&w.state!=="errored")return!1}}return!0}removeSource(k){return this.style.removeSource(k),this._update(!0)}getSource(k){return this.style.getSource(k)}addImage(k,l,c={}){const{pixelRatio:_=1,sdf:w=!1,stretchX:K,stretchY:N,content:$,textFitWidth:ee,textFitHeight:ae}=c;if(this._lazyInitEmptyStyle(),!(l instanceof HTMLImageElement||o.b(l))){if(l.width===void 0||l.height===void 0)return this.fire(new o.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:xe,height:ke,data:Ke}=l,$e=l;return this.style.addImage(k,{data:new o.R({width:xe,height:ke},new Uint8Array(Ke)),pixelRatio:_,stretchX:K,stretchY:N,content:$,textFitWidth:ee,textFitHeight:ae,sdf:w,version:0,userImage:$e}),$e.onAdd&&$e.onAdd(this,k),this}}{const{width:xe,height:ke,data:Ke}=S.getImageData(l);this.style.addImage(k,{data:new o.R({width:xe,height:ke},Ke),pixelRatio:_,stretchX:K,stretchY:N,content:$,textFitWidth:ee,textFitHeight:ae,sdf:w,version:0})}}updateImage(k,l){const c=this.style.getImage(k);if(!c)return this.fire(new o.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const _=l instanceof HTMLImageElement||o.b(l)?S.getImageData(l):l,{width:w,height:K,data:N}=_;if(w===void 0||K===void 0)return this.fire(new o.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(w!==c.data.width||K!==c.data.height)return this.fire(new o.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const $=!(l instanceof HTMLImageElement||o.b(l));return c.data.replace(N,$),this.style.updateImage(k,c),this}getImage(k){return this.style.getImage(k)}hasImage(k){return k?!!this.style.getImage(k):(this.fire(new o.j(new Error("Missing required image id"))),!1)}removeImage(k){this.style.removeImage(k)}loadImage(k){return te.getImage(this._requestManager.transformRequest(k,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(k,l){return this._lazyInitEmptyStyle(),this.style.addLayer(k,l),this._update(!0)}moveLayer(k,l){return this.style.moveLayer(k,l),this._update(!0)}removeLayer(k){return this.style.removeLayer(k),this._update(!0)}getLayer(k){return this.style.getLayer(k)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(k,l,c){return this.style.setLayerZoomRange(k,l,c),this._update(!0)}setFilter(k,l,c={}){return this.style.setFilter(k,l,c),this._update(!0)}getFilter(k){return this.style.getFilter(k)}setPaintProperty(k,l,c,_={}){return this.style.setPaintProperty(k,l,c,_),this._update(!0)}getPaintProperty(k,l){return this.style.getPaintProperty(k,l)}setLayoutProperty(k,l,c,_={}){return this.style.setLayoutProperty(k,l,c,_),this._update(!0)}getLayoutProperty(k,l){return this.style.getLayoutProperty(k,l)}setGlyphs(k,l={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(k,l),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(k,l,c={}){return this._lazyInitEmptyStyle(),this.style.addSprite(k,l,c,_=>{_||this._update(!0)}),this}removeSprite(k){return this._lazyInitEmptyStyle(),this.style.removeSprite(k),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(k,l={}){return this._lazyInitEmptyStyle(),this.style.setSprite(k,l,c=>{c||this._update(!0)}),this}setLight(k,l={}){return this._lazyInitEmptyStyle(),this.style.setLight(k,l),this._update(!0)}getLight(){return this.style.getLight()}setSky(k,l={}){return this._lazyInitEmptyStyle(),this.style.setSky(k,l),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(k,l){return this.style.setFeatureState(k,l),this._update()}removeFeatureState(k,l){return this.style.removeFeatureState(k,l),this._update()}getFeatureState(k){return this.style.getFeatureState(k)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let k=0,l=0;return this._container&&(k=this._container.clientWidth||400,l=this._container.clientHeight||300),[k,l]}_setupContainer(){const k=this._container;k.classList.add("maplibregl-map");const l=this._canvasContainer=I.create("div","maplibregl-canvas-container",k);this._interactive&&l.classList.add("maplibregl-interactive"),this._canvas=I.create("canvas","maplibregl-canvas",l),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const c=this._containerDimensions(),_=this._getClampedPixelRatio(c[0],c[1]);this._resizeCanvas(c[0],c[1],_);const w=this._controlContainer=I.create("div","maplibregl-control-container",k),K=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(N=>{K[N]=I.create("div",`maplibregl-ctrl-${N} `,w)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(k,l,c){this._canvas.width=Math.floor(c*k),this._canvas.height=Math.floor(c*l),this._canvas.style.width=`${k}px`,this._canvas.style.height=`${l}px`}_setupPainter(){const k=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let l=null;this._canvas.addEventListener("webglcontextcreationerror",_=>{l={requestedAttributes:k},_&&(l.statusMessage=_.statusMessage,l.type=_.type)},{once:!0});let c=null;if(c=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,k):this._canvas.getContext("webgl2",k)||this._canvas.getContext("webgl",k),!c){const _="Failed to initialize WebGL";throw l?(l.message=_,new Error(JSON.stringify(l))):new Error(_)}this.painter=new Zc(c,this.transform),P.testSupport(c)}migrateProjection(k,l){super.migrateProjection(k,l),this.painter.transform=k,this.fire(new o.k("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(k){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||k,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(k){return this._update(),this._renderTaskQueue.add(k)}_cancelRenderFrame(k){this._renderTaskQueue.remove(k)}_render(k){var l,c,_,w,K;const N=this._idleTriggered?this._fadeDuration:0,$=((l=this.style.projection)===null||l===void 0?void 0:l.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(k),this._removed)return;let ee=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const ke=this.transform.zoom,Ke=S.now();this.style.zoomHistory.update(ke,Ke);const $e=new o.z(ke,{now:Ke,fadeDuration:N,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Xe=$e.crossFadingFactor();Xe===1&&Xe===this._crossFadingFactor||(ee=!0,this._crossFadingFactor=Xe),this.style.update($e)}const ae=((c=this.style.projection)===null||c===void 0?void 0:c.transitionState)>0!==$;(_=this.style.projection)===null||_===void 0||_.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((w=this.style.projection)===null||w===void 0?void 0:w.transitionState,(K=this.style.projection)===null||K===void 0?void 0:K.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||ae)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,N,this._crossSourceCollisions,ae),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:N,showPadding:this.showPadding}),this.fire(new o.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,o.cd.mark(o.ce.load),this.fire(new o.k("load"))),this.style&&(this.style.hasTransitions()||ee)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const xe=this._sourcesDirty||this._styleDirty||this._placementDirty;return xe||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new o.k("idle")),!this._loaded||this._fullyLoaded||xe||(this._fullyLoaded=!0,o.cd.mark(o.ce.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var k;this._hash&&this._hash.remove();for(const c of this._controls)c.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),te.removeThrottleControl(this._imageQueueHandle),(k=this._resizeObserver)===null||k===void 0||k.disconnect();const l=this.painter.context.gl.getExtension("WEBGL_lose_context");l!=null&&l.loseContext&&l.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),I.remove(this._canvasContainer),I.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),o.cd.clearMetrics(),this._removed=!0,this.fire(new o.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,S.frame(this._frameRequest,k=>{o.cd.frame(k),this._frameRequest=null;try{this._render(k)}catch(l){if(!o.cf(l)&&!function(c){return c.message===tu}(l))throw l}},()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(k){this._showTileBoundaries!==k&&(this._showTileBoundaries=k,this._update())}get showPadding(){return!!this._showPadding}set showPadding(k){this._showPadding!==k&&(this._showPadding=k,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(k){this._showCollisionBoxes!==k&&(this._showCollisionBoxes=k,k?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(k){this._showOverdrawInspector!==k&&(this._showOverdrawInspector=k,this._update())}get repaint(){return!!this._repaint}set repaint(k){this._repaint!==k&&(this._repaint=k,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(k){this._vertices=k,this._update()}get version(){return Bd}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(k){return this._lazyInitEmptyStyle(),this.style.setProjection(k),this._update(!0)}},a.MapMouseEvent=pi,a.MapTouchEvent=ii,a.MapWheelEvent=is,a.Marker=Eu,a.NavigationControl=class{constructor(k){this._updateZoomButtons=()=>{const l=this._map.getZoom(),c=l===this._map.getMaxZoom(),_=l===this._map.getMinZoom();this._zoomInButton.disabled=c,this._zoomOutButton.disabled=_,this._zoomInButton.setAttribute("aria-disabled",c.toString()),this._zoomOutButton.setAttribute("aria-disabled",_.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(l,c)=>{const _=this._map._getUIString(`NavigationControl.${c}`);l.title=_,l.setAttribute("aria-label",_)},this.options=o.e({},zs,k),this._container=I.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",l=>l.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",l=>this._map.zoomIn({},{originalEvent:l})),I.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",l=>this._map.zoomOut({},{originalEvent:l})),I.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",l=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:l}):this._map.resetNorth({},{originalEvent:l})}),this._compassIcon=I.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(k){return this._map=k,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new kc(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){I.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(k,l){const c=I.create("button",k,this._container);return c.type="button",c.addEventListener("click",l),c}},a.Popup=class extends o.E{constructor(k){super(),this.remove=()=>(this._content&&I.remove(this._content),this._container&&(I.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new o.k("close"))),this),this._onMouseUp=l=>{this._update(l.point)},this._onMouseMove=l=>{this._update(l.point)},this._onDrag=l=>{this._update(l.point)},this._update=l=>{var c;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=I.create("div","maplibregl-popup",this._map.getContainer()),this._tip=I.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const $ of this.options.className.split(" "))this._container.classList.add($);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?qa(this._lngLat,this._flatPos,this._map.transform):(c=this._lngLat)===null||c===void 0?void 0:c.wrap(),this._trackPointer&&!l)return;const _=this._flatPos=this._pos=this._trackPointer&&l?l:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&l?l:this._map.transform.locationToScreenPoint(this._lngLat));let w=this.options.anchor;const K=Ml(this.options.offset);if(!w){const $=this._container.offsetWidth,ee=this._container.offsetHeight;let ae;ae=_.y+K.bottom.y<ee?["top"]:_.y>this._map.transform.height-ee?["bottom"]:[],_.x<$/2?ae.push("left"):_.x>this._map.transform.width-$/2&&ae.push("right"),w=ae.length===0?"bottom":ae.join("-")}let N=_.add(K[w]);this.options.subpixelPositioning||(N=N.round()),I.setTransform(this._container,`${Vu[w]} translate(${N.x}px,${N.y}px)`),Tc(this._container,w,"popup")},this._onClose=()=>{this.remove()},this.options=o.e(Object.create(Pc),k)}addTo(k){return this._map&&this.remove(),this._map=k,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new o.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(k){return this._lngLat=o.N.convert(k),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(k){return this.setDOMContent(document.createTextNode(k))}setHTML(k){const l=document.createDocumentFragment(),c=document.createElement("body");let _;for(c.innerHTML=k;_=c.firstChild,_;)l.appendChild(_);return this.setDOMContent(l)}getMaxWidth(){var k;return(k=this._container)===null||k===void 0?void 0:k.style.maxWidth}setMaxWidth(k){return this.options.maxWidth=k,this._update(),this}setDOMContent(k){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=I.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(k),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(k){return this._container&&this._container.classList.add(k),this}removeClassName(k){return this._container&&this._container.classList.remove(k),this}setOffset(k){return this.options.offset=k,this._update(),this}toggleClassName(k){if(this._container)return this._container.classList.toggle(k)}setSubpixelPositioning(k){this.options.subpixelPositioning=k}_createCloseButton(){this.options.closeButton&&(this._closeButton=I.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const k=this._container.querySelector(gA);k&&k.focus()}},a.RasterDEMTileSource=qn,a.RasterTileSource=_n,a.ScaleControl=class{constructor(k){this._onMove=()=>{zA(this._map,this._container,this.options)},this.setUnit=l=>{this.options.unit=l,zA(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},su),k)}getDefaultPosition(){return"bottom-left"}onAdd(k){return this._map=k,this._container=I.create("div","maplibregl-ctrl maplibregl-ctrl-scale",k.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){I.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},a.ScrollZoomHandler=Qa,a.Style=vu,a.TerrainControl=class{constructor(k){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=k}onAdd(k){return this._map=k,this._container=I.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=I.create("button","maplibregl-ctrl-terrain",this._container),I.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){I.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},a.TwoFingersTouchPitchHandler=lc,a.TwoFingersTouchRotateHandler=Ic,a.TwoFingersTouchZoomHandler=Oc,a.TwoFingersTouchZoomRotateHandler=LA,a.VectorTileSource=Dt,a.VideoSource=Dn,a.addSourceType=(k,l)=>o._(void 0,void 0,void 0,function*(){if(dr(k))throw new Error(`A source type called "${k}" already exists.`);((c,_)=>{Zn[c]=_})(k,l)}),a.clearPrewarmedResources=function(){const k=Yt;k&&(k.isPreloaded()&&k.numActive()===1?(k.release(Fe),Yt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},a.createTileMesh=st,a.getMaxParallelImageRequests=function(){return o.a.MAX_PARALLEL_IMAGE_REQUESTS},a.getRTLTextPluginStatus=function(){return ce().getRTLTextPluginStatus()},a.getVersion=function(){return Od},a.getWorkerCount=function(){return He.workerCount},a.getWorkerUrl=function(){return o.a.WORKER_URL},a.importScriptInWorkers=function(k){return Ue().broadcast("IS",k)},a.prewarm=function(){Lt().acquire(Fe)},a.setMaxParallelImageRequests=function(k){o.a.MAX_PARALLEL_IMAGE_REQUESTS=k},a.setRTLTextPlugin=function(k,l){return ce().setRTLTextPlugin(k,l)},a.setWorkerCount=function(k){He.workerCount=k},a.setWorkerUrl=function(k){o.a.WORKER_URL=k}});var s=t;return s})}(Qb)),Qb.exports}var HH=VH();const Z1=el(HH);var ib=typeof globalThis<"u"?globalThis:typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{};function qU(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Lv={exports:{}};Lv.exports;var L7;function ZH(){return L7||(L7=1,function(n,e){var t=200,r="__lodash_hash_undefined__",i=1,s=2,a=9007199254740991,o="[object Arguments]",d="[object Array]",g="[object AsyncFunction]",b="[object Boolean]",E="[object Date]",S="[object Error]",I="[object Function]",P="[object GeneratorFunction]",z="[object Map]",j="[object Number]",q="[object Null]",Y="[object Object]",ie="[object Promise]",te="[object Proxy]",V="[object RegExp]",ne="[object Set]",G="[object String]",oe="[object Symbol]",he="[object Undefined]",pe="[object WeakMap]",Ee="[object ArrayBuffer]",me="[object DataView]",Se="[object Float32Array]",De="[object Float64Array]",be="[object Int8Array]",at="[object Int16Array]",Ze="[object Int32Array]",Je="[object Uint8Array]",We="[object Uint8ClampedArray]",Me="[object Uint16Array]",Fe="[object Uint32Array]",He=/[\\^$.*+?()[\]{}|]/g,bt=/^\[object .+?Constructor\]$/,Yt=/^(?:0|[1-9]\d*)$/,gt={};gt[Se]=gt[De]=gt[be]=gt[at]=gt[Ze]=gt[Je]=gt[We]=gt[Me]=gt[Fe]=!0,gt[o]=gt[d]=gt[Ee]=gt[b]=gt[me]=gt[E]=gt[S]=gt[I]=gt[z]=gt[j]=gt[Y]=gt[V]=gt[ne]=gt[G]=gt[pe]=!1;var Lt=typeof ib=="object"&&ib&&ib.Object===Object&&ib,Kt=typeof self=="object"&&self&&self.Object===Object&&self,Ue=Lt||Kt||Function("return this")(),Pe=e&&!e.nodeType&&e,Be=Pe&&!0&&n&&!n.nodeType&&n,it=Be&&Be.exports===Pe,_t=it&&Lt.process,ft=function(){try{return _t&&_t.binding&&_t.binding("util")}catch{}}(),Ut=ft&&ft.isTypedArray;function rn(J,Ie){for(var st=-1,$t=J==null?0:J.length,Kr=0,$n=[];++st<$t;){var ti=J[st];Ie(ti,st,J)&&($n[Kr++]=ti)}return $n}function Dt(J,Ie){for(var st=-1,$t=Ie.length,Kr=J.length;++st<$t;)J[Kr+st]=Ie[st];return J}function _n(J,Ie){for(var st=-1,$t=J==null?0:J.length;++st<$t;)if(Ie(J[st],st,J))return!0;return!1}function qn(J,Ie){for(var st=-1,$t=Array(J);++st<J;)$t[st]=Ie(st);return $t}function tn(J){return function(Ie){return J(Ie)}}function rr(J,Ie){return J.has(Ie)}function Dn(J,Ie){return J==null?void 0:J[Ie]}function pn(J){var Ie=-1,st=Array(J.size);return J.forEach(function($t,Kr){st[++Ie]=[Kr,$t]}),st}function Zn(J,Ie){return function(st){return J(Ie(st))}}function dr(J){var Ie=-1,st=Array(J.size);return J.forEach(function($t){st[++Ie]=$t}),st}var vr=Array.prototype,Jn=Function.prototype,Qe=Object.prototype,ce=Ue["__core-js_shared__"],fe=Jn.toString,nt=Qe.hasOwnProperty,St=function(){var J=/[^.]+$/.exec(ce&&ce.keys&&ce.keys.IE_PROTO||"");return J?"Symbol(src)_1."+J:""}(),Ht=Qe.toString,sn=RegExp("^"+fe.call(nt).replace(He,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),tr=it?Ue.Buffer:void 0,Oe=Ue.Symbol,se=Ue.Uint8Array,ve=Qe.propertyIsEnumerable,p=vr.splice,Ne=Oe?Oe.toStringTag:void 0,Ye=Object.getOwnPropertySymbols,rt=tr?tr.isBuffer:void 0,ct=Zn(Object.keys,Object),dt=Yi(Ue,"DataView"),qt=Yi(Ue,"Map"),Gt=Yi(Ue,"Promise"),jt=Yi(Ue,"Set"),xt=Yi(Ue,"WeakMap"),Tn=Yi(Object,"create"),On=Bo(dt),gr=Bo(qt),Er=Bo(Gt),on=Bo(jt),Rn=Bo(xt),er=Oe?Oe.prototype:void 0,Xr=er?er.valueOf:void 0;function Ur(J){var Ie=-1,st=J==null?0:J.length;for(this.clear();++Ie<st;){var $t=J[Ie];this.set($t[0],$t[1])}}function Dr(){this.__data__=Tn?Tn(null):{},this.size=0}function ur(J){var Ie=this.has(J)&&delete this.__data__[J];return this.size-=Ie?1:0,Ie}function mo(J){var Ie=this.__data__;if(Tn){var st=Ie[J];return st===r?void 0:st}return nt.call(Ie,J)?Ie[J]:void 0}function Ma(J){var Ie=this.__data__;return Tn?Ie[J]!==void 0:nt.call(Ie,J)}function qi(J,Ie){var st=this.__data__;return this.size+=this.has(J)?0:1,st[J]=Tn&&Ie===void 0?r:Ie,this}Ur.prototype.clear=Dr,Ur.prototype.delete=ur,Ur.prototype.get=mo,Ur.prototype.has=Ma,Ur.prototype.set=qi;function vi(J){var Ie=-1,st=J==null?0:J.length;for(this.clear();++Ie<st;){var $t=J[Ie];this.set($t[0],$t[1])}}function io(){this.__data__=[],this.size=0}function Do(J){var Ie=this.__data__,st=or(Ie,J);if(st<0)return!1;var $t=Ie.length-1;return st==$t?Ie.pop():p.call(Ie,st,1),--this.size,!0}function Ti(J){var Ie=this.__data__,st=or(Ie,J);return st<0?void 0:Ie[st][1]}function ja(J){return or(this.__data__,J)>-1}function Sa(J,Ie){var st=this.__data__,$t=or(st,J);return $t<0?(++this.size,st.push([J,Ie])):st[$t][1]=Ie,this}vi.prototype.clear=io,vi.prototype.delete=Do,vi.prototype.get=Ti,vi.prototype.has=ja,vi.prototype.set=Sa;function ns(J){var Ie=-1,st=J==null?0:J.length;for(this.clear();++Ie<st;){var $t=J[Ie];this.set($t[0],$t[1])}}function sa(){this.size=0,this.__data__={hash:new Ur,map:new(qt||vi),string:new Ur}}function Al(J){var Ie=Rr(this,J).delete(J);return this.size-=Ie?1:0,Ie}function uo(J){return Rr(this,J).get(J)}function Fu(J){return Rr(this,J).has(J)}function Hl(J,Ie){var st=Rr(this,J),$t=st.size;return st.set(J,Ie),this.size+=st.size==$t?0:1,this}ns.prototype.clear=sa,ns.prototype.delete=Al,ns.prototype.get=uo,ns.prototype.has=Fu,ns.prototype.set=Hl;function oo(J){var Ie=-1,st=J==null?0:J.length;for(this.__data__=new ns;++Ie<st;)this.add(J[Ie])}function Tr(J){return this.__data__.set(J,r),this}function tl(J){return this.__data__.has(J)}oo.prototype.add=oo.prototype.push=Tr,oo.prototype.has=tl;function Bs(J){var Ie=this.__data__=new vi(J);this.size=Ie.size}function Js(){this.__data__=new vi,this.size=0}function qe(J){var Ie=this.__data__,st=Ie.delete(J);return this.size=Ie.size,st}function wt(J){return this.__data__.get(J)}function vn(J){return this.__data__.has(J)}function Yn(J,Ie){var st=this.__data__;if(st instanceof vi){var $t=st.__data__;if(!qt||$t.length<t-1)return $t.push([J,Ie]),this.size=++st.size,this;st=this.__data__=new ns($t)}return st.set(J,Ie),this.size=st.size,this}Bs.prototype.clear=Js,Bs.prototype.delete=qe,Bs.prototype.get=wt,Bs.prototype.has=vn,Bs.prototype.set=Yn;function hn(J,Ie){var st=Ms(J),$t=!st&&Ba(J),Kr=!st&&!$t&&ea(J),$n=!st&&!$t&&!Kr&&Xl(J),ti=st||$t||Kr||$n,Ai=ti?qn(J.length,String):[],Br=Ai.length;for(var xr in J)nt.call(J,xr)&&!(ti&&(xr=="length"||Kr&&(xr=="offset"||xr=="parent")||$n&&(xr=="buffer"||xr=="byteLength"||xr=="byteOffset")||Ws(xr,Br)))&&Ai.push(xr);return Ai}function or(J,Ie){for(var st=J.length;st--;)if(Ho(J[st][0],Ie))return st;return-1}function Pi(J,Ie,st){var $t=Ie(J);return Ms(J)?$t:Dt($t,st(J))}function go(J){return J==null?J===void 0?he:q:Ne&&Ne in Object(J)?yo(J):Ao(J)}function Cs(J){return Yr(J)&&go(J)==o}function Rs(J,Ie,st,$t,Kr){return J===Ie?!0:J==null||Ie==null||!Yr(J)&&!Yr(Ie)?J!==J&&Ie!==Ie:SA(J,Ie,st,$t,Rs,Kr)}function SA(J,Ie,st,$t,Kr,$n){var ti=Ms(J),Ai=Ms(Ie),Br=ti?d:wo(J),xr=Ai?d:wo(Ie);Br=Br==o?Y:Br,xr=xr==o?Y:xr;var zi=Br==Y,Zi=xr==Y,Si=Br==xr;if(Si&&ea(J)){if(!ea(Ie))return!1;ti=!0,zi=!1}if(Si&&!zi)return $n||($n=new Bs),ti||Xl(J)?ui(J,Ie,st,$t,Kr,$n):aa(J,Ie,Br,st,$t,Kr,$n);if(!(st&i)){var Wr=zi&&nt.call(J,"__wrapped__"),Mo=Zi&&nt.call(Ie,"__wrapped__");if(Wr||Mo){var Di=Wr?J.value():J,cs=Mo?Ie.value():Ie;return $n||($n=new Bs),Kr(Di,cs,st,$t,$n)}}return Si?($n||($n=new Bs),XA(J,Ie,st,$t,Kr,$n)):!1}function ei(J){if(!Ui(J)||Lu(J))return!1;var Ie=co(J)?sn:bt;return Ie.test(Bo(J))}function wi(J){return Yr(J)&&Zl(J.length)&&!!gt[go(J)]}function nl(J){if(!_l(J))return ct(J);var Ie=[];for(var st in Object(J))nt.call(J,st)&&st!="constructor"&&Ie.push(st);return Ie}function ui(J,Ie,st,$t,Kr,$n){var ti=st&i,Ai=J.length,Br=Ie.length;if(Ai!=Br&&!(ti&&Br>Ai))return!1;var xr=$n.get(J);if(xr&&$n.get(Ie))return xr==Ie;var zi=-1,Zi=!0,Si=st&s?new oo:void 0;for($n.set(J,Ie),$n.set(Ie,J);++zi<Ai;){var Wr=J[zi],Mo=Ie[zi];if($t)var Di=ti?$t(Mo,Wr,zi,Ie,J,$n):$t(Wr,Mo,zi,J,Ie,$n);if(Di!==void 0){if(Di)continue;Zi=!1;break}if(Si){if(!_n(Ie,function(cs,pa){if(!rr(Si,pa)&&(Wr===cs||Kr(Wr,cs,st,$t,$n)))return Si.push(pa)})){Zi=!1;break}}else if(!(Wr===Mo||Kr(Wr,Mo,st,$t,$n))){Zi=!1;break}}return $n.delete(J),$n.delete(Ie),Zi}function aa(J,Ie,st,$t,Kr,$n,ti){switch(st){case me:if(J.byteLength!=Ie.byteLength||J.byteOffset!=Ie.byteOffset)return!1;J=J.buffer,Ie=Ie.buffer;case Ee:return!(J.byteLength!=Ie.byteLength||!$n(new se(J),new se(Ie)));case b:case E:case j:return Ho(+J,+Ie);case S:return J.name==Ie.name&&J.message==Ie.message;case V:case G:return J==Ie+"";case z:var Ai=pn;case ne:var Br=$t&i;if(Ai||(Ai=dr),J.size!=Ie.size&&!Br)return!1;var xr=ti.get(J);if(xr)return xr==Ie;$t|=s,ti.set(J,Ie);var zi=ui(Ai(J),Ai(Ie),$t,Kr,$n,ti);return ti.delete(J),zi;case oe:if(Xr)return Xr.call(J)==Xr.call(Ie)}return!1}function XA(J,Ie,st,$t,Kr,$n){var ti=st&i,Ai=Ea(J),Br=Ai.length,xr=Ea(Ie),zi=xr.length;if(Br!=zi&&!ti)return!1;for(var Zi=Br;Zi--;){var Si=Ai[Zi];if(!(ti?Si in Ie:nt.call(Ie,Si)))return!1}var Wr=$n.get(J);if(Wr&&$n.get(Ie))return Wr==Ie;var Mo=!0;$n.set(J,Ie),$n.set(Ie,J);for(var Di=ti;++Zi<Br;){Si=Ai[Zi];var cs=J[Si],pa=Ie[Si];if($t)var Na=ti?$t(pa,cs,Si,Ie,J,$n):$t(cs,pa,Si,J,Ie,$n);if(!(Na===void 0?cs===pa||Kr(cs,pa,st,$t,$n):Na)){Mo=!1;break}Di||(Di=Si=="constructor")}if(Mo&&!Di){var yu=J.constructor,Qs=Ie.constructor;yu!=Qs&&"constructor"in J&&"constructor"in Ie&&!(typeof yu=="function"&&yu instanceof yu&&typeof Qs=="function"&&Qs instanceof Qs)&&(Mo=!1)}return $n.delete(J),$n.delete(Ie),Mo}function Ea(J){return Pi(J,$i,gu)}function Rr(J,Ie){var st=J.__data__;return Gs(Ie)?st[typeof Ie=="string"?"string":"hash"]:st.map}function Yi(J,Ie){var st=Dn(J,Ie);return ei(st)?st:void 0}function yo(J){var Ie=nt.call(J,Ne),st=J[Ne];try{J[Ne]=void 0;var $t=!0}catch{}var Kr=Ht.call(J);return $t&&(Ie?J[Ne]=st:delete J[Ne]),Kr}var gu=Ye?function(J){return J==null?[]:(J=Object(J),rn(Ye(J),function(Ie){return ve.call(J,Ie)}))}:so,wo=go;(dt&&wo(new dt(new ArrayBuffer(1)))!=me||qt&&wo(new qt)!=z||Gt&&wo(Gt.resolve())!=ie||jt&&wo(new jt)!=ne||xt&&wo(new xt)!=pe)&&(wo=function(J){var Ie=go(J),st=Ie==Y?J.constructor:void 0,$t=st?Bo(st):"";if($t)switch($t){case On:return me;case gr:return z;case Er:return ie;case on:return ne;case Rn:return pe}return Ie});function Ws(J,Ie){return Ie=Ie??a,!!Ie&&(typeof J=="number"||Yt.test(J))&&J>-1&&J%1==0&&J<Ie}function Gs(J){var Ie=typeof J;return Ie=="string"||Ie=="number"||Ie=="symbol"||Ie=="boolean"?J!=="__proto__":J===null}function Lu(J){return!!St&&St in J}function _l(J){var Ie=J&&J.constructor,st=typeof Ie=="function"&&Ie.prototype||Qe;return J===st}function Ao(J){return Ht.call(J)}function Bo(J){if(J!=null){try{return fe.call(J)}catch{}try{return J+""}catch{}}return""}function Ho(J,Ie){return J===Ie||J!==J&&Ie!==Ie}var Ba=Cs(function(){return arguments}())?Cs:function(J){return Yr(J)&&nt.call(J,"callee")&&!ve.call(J,"callee")},Ms=Array.isArray;function Oa(J){return J!=null&&Zl(J.length)&&!co(J)}var ea=rt||Ki;function EA(J,Ie){return Rs(J,Ie)}function co(J){if(!Ui(J))return!1;var Ie=go(J);return Ie==I||Ie==P||Ie==g||Ie==te}function Zl(J){return typeof J=="number"&&J>-1&&J%1==0&&J<=a}function Ui(J){var Ie=typeof J;return J!=null&&(Ie=="object"||Ie=="function")}function Yr(J){return J!=null&&typeof J=="object"}var Xl=Ut?tn(Ut):wi;function $i(J){return Oa(J)?hn(J):nl(J)}function so(){return[]}function Ki(){return!1}n.exports=EA}(Lv,Lv.exports)),Lv.exports}var XH=ZH(),JH=qU(XH);function U6(n,e,t){const r={id:[e,t,"circle"].join("_"),source:e,type:"circle",paint:{"circle-color":n,"circle-radius":2},filter:["==","$type","Point"]};return t&&(r["source-layer"]=t),r}function z6(n,e,t,r){const i={id:[t,r,"polygon"].join("_"),source:t,type:"fill",paint:{"fill-color":n,"fill-antialias":!0,"fill-outline-color":n},filter:["==","$type","Polygon"]};return r&&(i["source-layer"]=r),i}function j6(n,e,t){const r={id:[e,t,"line"].join("_"),source:e,layout:{"line-join":"round","line-cap":"round"},type:"line",paint:{"line-color":n},filter:["==","$type","LineString"]};return t&&(r["source-layer"]=t),r}function eZ(n,e){const t=[],r=[],i=[];function s(a){return{circle:e(a,.8),line:e(a,.6),polygon:e(a,.3),polygonOutline:e(a,.6),default:e(a,1)}}return Object.keys(n).forEach(a=>{const o=n[a];if(!o||o.length===0){const d=s(a);r.push(U6(d.circle,a)),i.push(j6(d.line,a)),t.push(z6(d.polygon,d.polygonOutline,a))}else o.forEach(d=>{const g=s(d);r.push(U6(g.circle,a,d)),i.push(j6(g.line,a,d)),t.push(z6(g.polygon,g.polygonOutline,a,d))})}),t.concat(i).concat(r)}function tZ(n,e,t){t=Object.assign({backgroundColor:"#fff"},t);const r={id:"background",type:"background",paint:{"background-color":t.backgroundColor}},i={};return Object.keys(n.sources).forEach(s=>{const a=n.sources[s];(a.type==="vector"||a.type==="geojson")&&(i[s]=a)}),Object.assign(n,{layers:[r].concat(e),sources:i})}var U7={polygonLayer:z6,lineLayer:j6,circleLayer:U6,generateInspectStyle:tZ,generateColoredLayers:eZ};class nZ{constructor(e){e=Object.assign({show:!0,onToggle(){}},e),this._btn=this.createButton(),this._btn.onclick=e.onToggle,this.elem=this.createContainer(this._btn,e.show)}createButton(){const e=document.createElement("button");return e.className="maplibregl-ctrl-icon maplibregl-ctrl-inspect",e.type="button",e.title="Toggle Inspect",e.setAttribute("aria-label","Toggle Inspect"),e}createContainer(e,t){const r=document.createElement("div");return r.className="maplibregl-ctrl maplibregl-ctrl-group",r.appendChild(e),t||(r.style.display="none"),r}setInspectIcon(){this._btn.className="maplibregl-ctrl-icon maplibregl-ctrl-inspect"}setMapIcon(){this._btn.className="maplibregl-ctrl-icon maplibregl-ctrl-map"}}function rZ(n){return typeof n>"u"||n===null?n:n instanceof Date?n.toLocaleString():typeof n=="object"||typeof n=="number"||typeof n=="string"?n.toString():n}function y4(n,e){return`<div class="maplibregl-inspect_property"><div class="maplibregl-inspect_property-name">${n}</div><div class="maplibregl-inspect_property-value">${rZ(e)}</div></div>`}function iZ(n){return`<div class="maplibregl-inspect_layer">${n}</div>`}function oZ(n){const e=iZ(n.layer["source-layer"]||n.layer.source),t=y4("$id",n.id),r=y4("$type",n.geometry.type),i=Object.keys(n.properties).map(s=>y4(s,n.properties[s]));return[e,t,r].concat(i).join("")}function sZ(n){return n.map(e=>`<div class="maplibregl-inspect_feature">${oZ(e)}</div>`).join("")}function aZ(n){return`<div class="maplibregl-inspect_popup">${sZ(n)}</div>`}var Uv={exports:{}},lZ=Uv.exports,z7;function uZ(){return z7||(z7=1,function(n,e){(function(t,r){{var i=r();n.exports&&(e=n.exports=i),e.randomColor=i}})(lZ,function(){var t=null,r={};q();var i=[],s=function(G){if(G=G||{},G.seed!==void 0&&G.seed!==null&&G.seed===parseInt(G.seed,10))t=G.seed;else if(typeof G.seed=="string")t=V(G.seed);else{if(G.seed!==void 0&&G.seed!==null)throw new TypeError("The seed value must be an integer or string");t=null}var oe,he,pe;if(G.count!==null&&G.count!==void 0){for(var Ee=G.count,me=[],Se=0;Se<G.count;Se++)i.push(!1);for(G.count=null;Ee>me.length;){var De=s(G);t!==null&&(G.seed=t),me.push(De)}return G.count=Ee,me}return oe=a(G),he=o(oe,G),pe=d(oe,he,G),g([oe,he,pe],G)};function a(G){if(i.length>0){var oe=ne(G.hue),he=P(oe),pe=(oe[1]-oe[0])/i.length,Ee=parseInt((he-oe[0])/pe);i[Ee]===!0?Ee=(Ee+2)%i.length:i[Ee]=!0;var me=(oe[0]+Ee*pe)%359,Se=(oe[0]+(Ee+1)*pe)%359;return oe=[me,Se],he=P(oe),he<0&&(he=360+he),he}else{var oe=E(G.hue);return he=P(oe),he<0&&(he=360+he),he}}function o(G,oe){if(oe.hue==="monochrome")return 0;if(oe.luminosity==="random")return P([0,100]);var he=S(G),pe=he[0],Ee=he[1];switch(oe.luminosity){case"bright":pe=55;break;case"dark":pe=Ee-10;break;case"light":Ee=55;break}return P([pe,Ee])}function d(G,oe,he){var pe=b(G,oe),Ee=100;switch(he.luminosity){case"dark":Ee=pe+20;break;case"light":pe=(Ee+pe)/2;break;case"random":pe=0,Ee=100;break}return P([pe,Ee])}function g(G,oe){switch(oe.format){case"hsvArray":return G;case"hslArray":return te(G);case"hsl":var he=te(G);return"hsl("+he[0]+", "+he[1]+"%, "+he[2]+"%)";case"hsla":var pe=te(G),Se=oe.alpha||Math.random();return"hsla("+pe[0]+", "+pe[1]+"%, "+pe[2]+"%, "+Se+")";case"rgbArray":return Y(G);case"rgb":var Ee=Y(G);return"rgb("+Ee.join(", ")+")";case"rgba":var me=Y(G),Se=oe.alpha||Math.random();return"rgba("+me.join(", ")+", "+Se+")";default:return z(G)}}function b(G,oe){for(var he=I(G).lowerBounds,pe=0;pe<he.length-1;pe++){var Ee=he[pe][0],me=he[pe][1],Se=he[pe+1][0],De=he[pe+1][1];if(oe>=Ee&&oe<=Se){var be=(De-me)/(Se-Ee),at=me-be*Ee;return be*oe+at}}return 0}function E(G){if(typeof parseInt(G)=="number"){var oe=parseInt(G);if(oe<360&&oe>0)return[oe,oe]}if(typeof G=="string"){if(r[G]){var he=r[G];if(he.hueRange)return he.hueRange}else if(G.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var pe=ie(G)[0];return[pe,pe]}}return[0,360]}function S(G){return I(G).saturationRange}function I(G){G>=334&&G<=360&&(G-=360);for(var oe in r){var he=r[oe];if(he.hueRange&&G>=he.hueRange[0]&&G<=he.hueRange[1])return r[oe]}return"Color not found"}function P(G){if(t===null){var oe=.618033988749895,he=Math.random();return he+=oe,he%=1,Math.floor(G[0]+he*(G[1]+1-G[0]))}else{var pe=G[1]||1,Ee=G[0]||0;t=(t*9301+49297)%233280;var me=t/233280;return Math.floor(Ee+me*(pe-Ee))}}function z(G){var oe=Y(G);function he(Ee){var me=Ee.toString(16);return me.length==1?"0"+me:me}var pe="#"+he(oe[0])+he(oe[1])+he(oe[2]);return pe}function j(G,oe,he){var pe=he[0][0],Ee=he[he.length-1][0],me=he[he.length-1][1],Se=he[0][1];r[G]={hueRange:oe,lowerBounds:he,saturationRange:[pe,Ee],brightnessRange:[me,Se]}}function q(){j("monochrome",null,[[0,0],[100,0]]),j("red",[-26,18],[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]),j("orange",[18,46],[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]),j("yellow",[46,62],[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]),j("green",[62,178],[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]),j("blue",[178,257],[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]),j("purple",[257,282],[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]),j("pink",[282,334],[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]])}function Y(G){var oe=G[0];oe===0&&(oe=1),oe===360&&(oe=359),oe=oe/360;var he=G[1]/100,pe=G[2]/100,Ee=Math.floor(oe*6),me=oe*6-Ee,Se=pe*(1-he),De=pe*(1-me*he),be=pe*(1-(1-me)*he),at=256,Ze=256,Je=256;switch(Ee){case 0:at=pe,Ze=be,Je=Se;break;case 1:at=De,Ze=pe,Je=Se;break;case 2:at=Se,Ze=pe,Je=be;break;case 3:at=Se,Ze=De,Je=pe;break;case 4:at=be,Ze=Se,Je=pe;break;case 5:at=pe,Ze=Se,Je=De;break}var We=[Math.floor(at*255),Math.floor(Ze*255),Math.floor(Je*255)];return We}function ie(G){G=G.replace(/^#/,""),G=G.length===3?G.replace(/(.)/g,"$1$1"):G;var oe=parseInt(G.substr(0,2),16)/255,he=parseInt(G.substr(2,2),16)/255,pe=parseInt(G.substr(4,2),16)/255,Ee=Math.max(oe,he,pe),me=Ee-Math.min(oe,he,pe),Se=Ee?me/Ee:0;switch(Ee){case oe:return[60*((he-pe)/me%6)||0,Se,Ee];case he:return[60*((pe-oe)/me+2)||0,Se,Ee];case pe:return[60*((oe-he)/me+4)||0,Se,Ee]}}function te(G){var oe=G[0],he=G[1]/100,pe=G[2]/100,Ee=(2-he)*pe;return[oe,Math.round(he*pe/(Ee<1?Ee:2-Ee)*1e4)/100,Ee/2*100]}function V(G){for(var oe=0,he=0;he!==G.length&&!(oe>=Number.MAX_SAFE_INTEGER);he++)oe+=G.charCodeAt(he);return oe}function ne(G){if(isNaN(G)){if(typeof G=="string"){if(r[G]){var he=r[G];if(he.hueRange)return he.hueRange}else if(G.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var pe=ie(G)[0];return I(pe).hueRange}}}else{var oe=parseInt(G);if(oe<360&&oe>0)return I(G).hueRange}return[0,360]}return s})}(Uv,Uv.exports)),Uv.exports}var AZ=uZ(),cZ=qU(AZ);function dZ(n,e){let t="bright",r;return/water|ocean|lake|sea|river/.test(n)&&(r="blue"),/state|country|place/.test(n)&&(r="pink"),/road|highway|transport|streets/.test(n)&&(r="orange"),/contour|building|earth/.test(n)&&(r="monochrome"),/building/.test(n)&&(t="dark"),/earth/.test(n)&&(t="light"),/contour|landuse/.test(n)&&(r="yellow"),/wood|forest|park|landcover|land|natural/.test(n)&&(r="green"),`rgba(${cZ({luminosity:t,hue:r,seed:n,format:"rgbArray"}).join(", ")}, ${e||"1"})`}var hZ={brightColor:dZ};function fZ(n){return n.metadata&&n.metadata["maplibregl-inspect:inspect"]}function pZ(n){return Object.assign(n,{metadata:Object.assign({},n.metadata,{"maplibregl-inspect:inspect":!0})})}class d8{constructor(e){if(this._onSourceChange=r=>{if(r.sourceDataType==="visibility"||!r.isSourceLoaded)return;const i=Object.assign({},this.sources);this._setSourcesFromMap(),!JH(i,this.sources)&&Object.keys(this.sources).length>0&&setTimeout(()=>this.render(),1e3)},this._onStyleChange=()=>{const r=this._map.getStyle();fZ(r)||(this._originalStyle=r)},this._onRightClick=()=>{!this.options.showMapPopupOnHover&&!this.options.showInspectMapPopupOnHover&&!this.options.blockHoverPopupOnClick&&this._popup&&this._popup.remove()},this._onMousemove=r=>{if(this._showInspectMap){if(!this.options.showInspectMapPopup||r.type==="mousemove"&&!this.options.showInspectMapPopupOnHover)return;r.type==="click"&&this.options.showInspectMapPopupOnHover&&this.options.blockHoverPopupOnClick&&(this._popupBlocked=!this._popupBlocked)}else{if(!this.options.showMapPopup||r.type==="mousemove"&&!this.options.showMapPopupOnHover)return;r.type==="click"&&this.options.showMapPopupOnHover&&this.options.blockHoverPopupOnClick&&(this._popupBlocked=!this._popupBlocked)}if(!this._popupBlocked&&this._popup){let i;this.options.selectThreshold===0?i=r.point:i=[[r.point.x-this.options.selectThreshold,r.point.y+this.options.selectThreshold],[r.point.x+this.options.selectThreshold,r.point.y-this.options.selectThreshold]];const s=this._map.queryRenderedFeatures(i,this.options.queryParameters)||[];if(this._map.getCanvas().style.cursor=s.length?"pointer":"",!s.length)this._popup.remove();else{this._popup.setLngLat(r.lngLat);const a=this.options.renderPopup(s);typeof a=="string"?this._popup.setHTML(a):this._popup.setDOMContent(a),this._popup.addTo(this._map)}}},!(this instanceof d8))throw new Error("MaplibreInspect needs to be called with the new keyword");let t=null;window.maplibregl?t=new window.maplibregl.Popup({closeButton:!1,closeOnClick:!1}):e.popup||console.error("Maplibre GL JS can not be found. Make sure to include it or pass an initialized MaplibreGL Popup to MaplibreInspect if you are using moduleis."),this.options=Object.assign({showInspectMap:!1,showInspectButton:!0,showInspectMapPopup:!0,showMapPopup:!1,showMapPopupOnHover:!0,showInspectMapPopupOnHover:!0,blockHoverPopupOnClick:!1,backgroundColor:"#fff",assignLayerColor:hZ.brightColor,buildInspectStyle:U7.generateInspectStyle,renderPopup:aZ,popup:t,selectThreshold:5,useInspectStyle:!0,queryParameters:{},sources:{},toggleCallback(){},manageStyleOutside:!1},e),this.sources=this.options.sources,this.assignLayerColor=this.options.assignLayerColor,this._popup=this.options.popup,this._popupBlocked=!1,this._showInspectMap=this.options.showInspectMap,this._toggle=new nZ({show:this.options.showInspectButton,onToggle:()=>this.toggleInspector()})}toggleInspector(){this._showInspectMap=!this._showInspectMap,this._popupBlocked=!1,this.options.toggleCallback(this._showInspectMap),this.render()}_inspectStyle(){const e=U7.generateColoredLayers(this.sources,this.assignLayerColor);return this.options.buildInspectStyle(this._map.getStyle(),e,{backgroundColor:this.options.backgroundColor})}render(){this._showInspectMap?(this.options.useInspectStyle&&this._map.setStyle(pZ(this._inspectStyle())),this._toggle.setMapIcon()):this._originalStyle&&(this._popup&&this._popup.remove(),this.options.useInspectStyle&&this._map.setStyle(this._originalStyle),this._toggle.setInspectIcon())}_setSourcesFromMap(){const e=Object.keys(this._map.getStyle().sources);Object.keys(this._map.style.sourceCaches).forEach(t=>{const r=this._map.style.sourceCaches[t]||{_source:{}},i=r._source.vectorLayerIds;i?this.sources[t]=i:r._source.type==="geojson"&&(this.sources[t]=[])}),Object.keys(this.sources).forEach(t=>{e.indexOf(t)===-1&&delete this.sources[t]})}setOriginalStyle(e){this._originalStyle=e,this._setSourcesFromMap()}onAdd(e){return this._map=e,Object.keys(this.sources).length===0&&(e.on("tiledata",this._onSourceChange),e.on("sourcedata",this._onSourceChange)),e.on("styledata",this._onStyleChange),e.on("load",this._onStyleChange),e.on("mousemove",this._onMousemove),e.on("click",this._onMousemove),e.on("contextmenu",this._onRightClick),this._toggle.elem}onRemove(){this._map.off("styledata",this._onStyleChange),this._map.off("load",this._onStyleChange),this._map.off("tiledata",this._onSourceChange),this._map.off("sourcedata",this._onSourceChange),this._map.off("mousemove",this._onMousemove),this._map.off("click",this._onMousemove),this._map.off("contextmenu",this._onRightClick);const e=this._toggle.elem;e.parentNode.removeChild(e),this._map=void 0}}var zv={exports:{}},mZ=zv.exports,j7;function gZ(){return j7||(j7=1,function(n,e){(function(t,r){{var i=r();n.exports&&(e=n.exports=i),e.randomColor=i}})(mZ,function(){var t=null,r={};q();var i=[],s=function(G){if(G=G||{},G.seed!==void 0&&G.seed!==null&&G.seed===parseInt(G.seed,10))t=G.seed;else if(typeof G.seed=="string")t=V(G.seed);else{if(G.seed!==void 0&&G.seed!==null)throw new TypeError("The seed value must be an integer or string");t=null}var oe,he,pe;if(G.count!==null&&G.count!==void 0){for(var Ee=G.count,me=[],Se=0;Se<G.count;Se++)i.push(!1);for(G.count=null;Ee>me.length;){var De=s(G);t!==null&&(G.seed=t),me.push(De)}return G.count=Ee,me}return oe=a(G),he=o(oe,G),pe=d(oe,he,G),g([oe,he,pe],G)};function a(G){if(i.length>0){var oe=ne(G.hue),he=P(oe),pe=(oe[1]-oe[0])/i.length,Ee=parseInt((he-oe[0])/pe);i[Ee]===!0?Ee=(Ee+2)%i.length:i[Ee]=!0;var me=(oe[0]+Ee*pe)%359,Se=(oe[0]+(Ee+1)*pe)%359;return oe=[me,Se],he=P(oe),he<0&&(he=360+he),he}else{var oe=E(G.hue);return he=P(oe),he<0&&(he=360+he),he}}function o(G,oe){if(oe.hue==="monochrome")return 0;if(oe.luminosity==="random")return P([0,100]);var he=S(G),pe=he[0],Ee=he[1];switch(oe.luminosity){case"bright":pe=55;break;case"dark":pe=Ee-10;break;case"light":Ee=55;break}return P([pe,Ee])}function d(G,oe,he){var pe=b(G,oe),Ee=100;switch(he.luminosity){case"dark":Ee=pe+20;break;case"light":pe=(Ee+pe)/2;break;case"random":pe=0,Ee=100;break}return P([pe,Ee])}function g(G,oe){switch(oe.format){case"hsvArray":return G;case"hslArray":return te(G);case"hsl":var he=te(G);return"hsl("+he[0]+", "+he[1]+"%, "+he[2]+"%)";case"hsla":var pe=te(G),Se=oe.alpha||Math.random();return"hsla("+pe[0]+", "+pe[1]+"%, "+pe[2]+"%, "+Se+")";case"rgbArray":return Y(G);case"rgb":var Ee=Y(G);return"rgb("+Ee.join(", ")+")";case"rgba":var me=Y(G),Se=oe.alpha||Math.random();return"rgba("+me.join(", ")+", "+Se+")";default:return z(G)}}function b(G,oe){for(var he=I(G).lowerBounds,pe=0;pe<he.length-1;pe++){var Ee=he[pe][0],me=he[pe][1],Se=he[pe+1][0],De=he[pe+1][1];if(oe>=Ee&&oe<=Se){var be=(De-me)/(Se-Ee),at=me-be*Ee;return be*oe+at}}return 0}function E(G){if(typeof parseInt(G)=="number"){var oe=parseInt(G);if(oe<360&&oe>0)return[oe,oe]}if(typeof G=="string"){if(r[G]){var he=r[G];if(he.hueRange)return he.hueRange}else if(G.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var pe=ie(G)[0];return[pe,pe]}}return[0,360]}function S(G){return I(G).saturationRange}function I(G){G>=334&&G<=360&&(G-=360);for(var oe in r){var he=r[oe];if(he.hueRange&&G>=he.hueRange[0]&&G<=he.hueRange[1])return r[oe]}return"Color not found"}function P(G){if(t===null){var oe=.618033988749895,he=Math.random();return he+=oe,he%=1,Math.floor(G[0]+he*(G[1]+1-G[0]))}else{var pe=G[1]||1,Ee=G[0]||0;t=(t*9301+49297)%233280;var me=t/233280;return Math.floor(Ee+me*(pe-Ee))}}function z(G){var oe=Y(G);function he(Ee){var me=Ee.toString(16);return me.length==1?"0"+me:me}var pe="#"+he(oe[0])+he(oe[1])+he(oe[2]);return pe}function j(G,oe,he){var pe=he[0][0],Ee=he[he.length-1][0],me=he[he.length-1][1],Se=he[0][1];r[G]={hueRange:oe,lowerBounds:he,saturationRange:[pe,Ee],brightnessRange:[me,Se]}}function q(){j("monochrome",null,[[0,0],[100,0]]),j("red",[-26,18],[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]),j("orange",[18,46],[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]),j("yellow",[46,62],[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]),j("green",[62,178],[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]),j("blue",[178,257],[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]),j("purple",[257,282],[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]),j("pink",[282,334],[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]])}function Y(G){var oe=G[0];oe===0&&(oe=1),oe===360&&(oe=359),oe=oe/360;var he=G[1]/100,pe=G[2]/100,Ee=Math.floor(oe*6),me=oe*6-Ee,Se=pe*(1-he),De=pe*(1-me*he),be=pe*(1-(1-me)*he),at=256,Ze=256,Je=256;switch(Ee){case 0:at=pe,Ze=be,Je=Se;break;case 1:at=De,Ze=pe,Je=Se;break;case 2:at=Se,Ze=pe,Je=be;break;case 3:at=Se,Ze=De,Je=pe;break;case 4:at=be,Ze=Se,Je=pe;break;case 5:at=pe,Ze=Se,Je=De;break}var We=[Math.floor(at*255),Math.floor(Ze*255),Math.floor(Je*255)];return We}function ie(G){G=G.replace(/^#/,""),G=G.length===3?G.replace(/(.)/g,"$1$1"):G;var oe=parseInt(G.substr(0,2),16)/255,he=parseInt(G.substr(2,2),16)/255,pe=parseInt(G.substr(4,2),16)/255,Ee=Math.max(oe,he,pe),me=Ee-Math.min(oe,he,pe),Se=Ee?me/Ee:0;switch(Ee){case oe:return[60*((he-pe)/me%6)||0,Se,Ee];case he:return[60*((pe-oe)/me+2)||0,Se,Ee];case pe:return[60*((oe-he)/me+4)||0,Se,Ee]}}function te(G){var oe=G[0],he=G[1]/100,pe=G[2]/100,Ee=(2-he)*pe;return[oe,Math.round(he*pe/(Ee<1?Ee:2-Ee)*1e4)/100,Ee/2*100]}function V(G){for(var oe=0,he=0;he!==G.length&&!(oe>=Number.MAX_SAFE_INTEGER);he++)oe+=G.charCodeAt(he);return oe}function ne(G){if(isNaN(G)){if(typeof G=="string"){if(r[G]){var he=r[G];if(he.hueRange)return he.hueRange}else if(G.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var pe=ie(G)[0];return I(pe).hueRange}}}else{var oe=parseInt(G);if(oe<360&&oe>0)return I(G).hueRange}return[0,360]}return s})}(zv,zv.exports)),zv.exports}var yZ=gZ();const vZ=el(yZ);function CZ(n,e){let t="bright",r;return/water|ocean|lake|sea|river/.test(n)&&(r="blue"),/state|country|place/.test(n)&&(r="pink"),/road|highway|transport|streets/.test(n)&&(r="orange"),/contour|building|earth/.test(n)&&(r="monochrome"),/building/.test(n)&&(t="dark"),/earth/.test(n)&&(t="light"),/contour|landuse/.test(n)&&(r="yellow"),/wood|forest|park|landcover|land|natural/.test(n)&&(r="green"),`rgba(${vZ({luminosity:t,hue:r,seed:n,format:"rgbArray"}).join(", ")}, ${e||"1"})`}const YU={brightColor:CZ};var v4={exports:{}},C4,N7;function _Z(){if(N7)return C4;N7=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return C4=n,C4}var _4,W7;function bZ(){if(W7)return _4;W7=1;var n=_Z();function e(){}function t(){}return t.resetWarningCache=e,_4=function(){function r(a,o,d,g,b,E){if(E!==n){var S=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw S.name="Invariant Violation",S}}r.isRequired=r;function i(){return r}var s={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:t,resetWarningCache:e};return s.PropTypes=s,s},_4}var G7;function xp(){return G7||(G7=1,v4.exports=bZ()()),v4.exports}var xZ=xp();const hi=el(xZ);var Q7=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n};function wZ(n,e){var t={};for(var r in n)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r]);return t}var L0=function(e,t){var r=e.children,i=e.color,s=e.size,a=e.style,o=e.width,d=e.height,g=wZ(e,["children","color","size","style","width","height"]),b=t.reactIconBase,E=b===void 0?{}:b,S=s||E.size||"1em";return nr.createElement("svg",Q7({children:r,fill:"currentColor",preserveAspectRatio:"xMidYMid meet",height:d||S,width:o||S},E,g,{style:Q7({verticalAlign:"middle",color:i||E.color},E.style||{},a)}))};L0.propTypes={color:hi.string,size:hi.oneOfType([hi.string,hi.number]),width:hi.oneOfType([hi.string,hi.number]),height:hi.oneOfType([hi.string,hi.number]),style:hi.object};L0.contextTypes={reactIconBase:hi.shape(L0.propTypes)};function p2(){var n="/home/runner/work/maputnik/maputnik/src/components/IconLine.tsx",e="ace6118dd0ae83e2ceb20b70664ae2267741d924",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/IconLine.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:6,column:478}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:7,column:3}},line:5}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/IconLine.tsx"],names:[],mappings:"AAQQ;AARR,OAAO,WAAW;AAClB,OAAO,cAAc;AAGrB,qBAAqB,iBAAiB,MAAM,UAAU;AAAA,EACpD,SAAS;AACP,WACE,oBAAC,YAAS,SAAQ,aAAa,GAAG,KAAK,OACrC,8BAAC,UAAK,GAAE,iUAAgU,WAAU,kBAAiB,GACrW;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ace6118dd0ae83e2ceb20b70664ae2267741d924"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return p2=function(){return a},a}p2();class MZ extends nr.Component{render(){return p2().f[0]++,p2().s[0]++,ue.jsx(L0,{viewBox:"0 0 20 20",...this.props,children:ue.jsx("path",{d:"M 12.34,1.29 C 12.5114,1.1076 12.7497,1.0029 13,1 13.5523,1 14,1.4477 14,2 14.0047,2.2478 13.907,2.4866 13.73,2.66 9.785626,6.5516986 6.6148407,9.7551593 2.65,13.72 2.4793,13.8963 2.2453,13.9971 2,14 1.4477,14 1,13.5523 1,13 0.9953,12.7522 1.093,12.5134 1.27,12.34 4.9761967,8.7018093 9.0356422,4.5930579 12.34,1.29 Z",transform:"translate(2,2)"})})}}function m2(){var n="/home/runner/work/maputnik/maputnik/src/components/IconFill.tsx",e="8b9fc49e8fc93b42e35f3a9b2accdbccf6dcdb84",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/IconFill.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:6,column:562}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:7,column:3}},line:5}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/IconFill.tsx"],names:[],mappings:"AAQQ;AARR,OAAO,WAAW;AAClB,OAAO,cAAc;AAGrB,qBAAqB,iBAAiB,MAAM,UAAU;AAAA,EACpD,SAAS;AACP,WACE,oBAAC,YAAS,SAAQ,aAAa,GAAG,KAAK,OACrC,8BAAC,UAAK,GAAE,kbAAib,GAC3b;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8b9fc49e8fc93b42e35f3a9b2accdbccf6dcdb84"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return m2=function(){return a},a}m2();class ob extends nr.Component{render(){return m2().f[0]++,m2().s[0]++,ue.jsx(L0,{viewBox:"0 0 20 20",...this.props,children:ue.jsx("path",{d:"M 2.84978,9.763512 9.462149,4.7316391 16.47225,9.478015 9.859886,14.509879 2.84978,9.763512 m -1.028761,0.492069 7.414535,5.020197 c 0.372277,0.25206 0.958697,0.239771 1.30985,-0.02745 L 17.539255,9.926162 C 17.89041,9.658941 17.873288,9.238006 17.501015,8.985946 L 10.08648,3.9657402 C 9.714204,3.7136802 9.127782,3.7259703 8.776627,3.9931918 L 1.782775,9.315365 c -0.3511551,0.267221 -0.3340331,0.688156 0.03824,0.940216 l 0,0 z"})})}}function g2(){var n="/home/runner/work/maputnik/maputnik/src/components/IconSymbol.tsx",e="6ac2e596376f8b8c2e117c4345e33d1afb8f583b",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/IconSymbol.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:6,column:535}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:7,column:3}},line:5}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/IconSymbol.tsx"],names:[],mappings:"AASU;AATV,OAAO,WAAW;AAClB,OAAO,cAAc;AAGrB,qBAAqB,mBAAmB,MAAM,UAAU;AAAA,EACtD,SAAS;AACP,WACE,oBAAC,YAAS,SAAQ,aAAa,GAAG,KAAK,OACrC,8BAAC,OAAE,WAAU,wDACX,8BAAC,UAAK,GAAE,4SAA2S,GACrT,GACF;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"6ac2e596376f8b8c2e117c4345e33d1afb8f583b"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return g2=function(){return a},a}g2();class SZ extends nr.Component{render(){return g2().f[0]++,g2().s[0]++,ue.jsx(L0,{viewBox:"0 0 20 20",...this.props,children:ue.jsx("g",{transform:"matrix(1.2718518,0,0,1.2601269,16.559526,-7.4065264)",children:ue.jsx("path",{d:"m -9.7959773,11.060163 c -0.3734787,-0.724437 -0.3580577,-1.2147051 -0.00547,-1.8767873 l 8.6034029,-0.019416 c 0.39670292,0.6865644 0.38365934,1.4750693 -0.011097,1.8864953 l -3.1359613,-0.0033 -0.013695,7.1305 c -0.4055357,0.397083 -1.3146432,0.397083 -1.7769191,-0.02274 l 0.030226,-7.104422 z"})})})}}function y2(){var n="/home/runner/work/maputnik/maputnik/src/components/IconBackground.tsx",e="f8813cd7d4a9138ff3fc7253bc195b86370ed6cf",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/IconBackground.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:6,column:464}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:7,column:3}},line:5}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/IconBackground.tsx"],names:[],mappings:"AAQQ;AARR,OAAO,WAAW;AAClB,OAAO,cAAc;AAGrB,qBAAqB,uBAAuB,MAAM,UAAU;AAAA,EAC1D,SAAS;AACP,WACE,oBAAC,YAAS,SAAQ,aAAa,GAAG,KAAK,OACrC,8BAAC,UAAK,GAAE,gVAA+U,GACzV;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f8813cd7d4a9138ff3fc7253bc195b86370ed6cf"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return y2=function(){return a},a}y2();class q7 extends nr.Component{render(){return y2().f[0]++,y2().s[0]++,ue.jsx(L0,{viewBox:"0 0 20 20",...this.props,children:ue.jsx("path",{d:"m 1.821019,10.255581 7.414535,5.020197 c 0.372277,0.25206 0.958697,0.239771 1.30985,-0.02745 L 17.539255,9.926162 C 17.89041,9.658941 17.873288,9.238006 17.501015,8.985946 L 10.08648,3.9657402 C 9.714204,3.7136802 9.127782,3.7259703 8.776627,3.9931918 L 1.782775,9.315365 c -0.3511551,0.267221 -0.3340331,0.688156 0.03824,0.940216 z"})})}}function v2(){var n="/home/runner/work/maputnik/maputnik/src/components/IconCircle.tsx",e="35a8c3687dcdeffeb7f2fe2d9c05ced9e802b5ca",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/IconCircle.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:6,column:378}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:7,column:3}},line:5}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/IconCircle.tsx"],names:[],mappings:"AAQQ;AARR,OAAO,WAAW;AAClB,OAAO,cAAc;AAGrB,qBAAqB,mBAAmB,MAAM,UAAU;AAAA,EACtD,SAAS;AACP,WACE,oBAAC,YAAS,SAAQ,aAAa,GAAG,KAAK,OACrC,8BAAC,UAAK,WAAU,kBAAiB,GAAE,6NAA4N,GACjQ;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"35a8c3687dcdeffeb7f2fe2d9c05ced9e802b5ca"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return v2=function(){return a},a}v2();class EZ extends nr.Component{render(){return v2().f[0]++,v2().s[0]++,ue.jsx(L0,{viewBox:"0 0 20 20",...this.props,children:ue.jsx("path",{transform:"translate(2 2)",d:"M7.5,0C11.6422,0,15,3.3578,15,7.5S11.6422,15,7.5,15 S0,11.6422,0,7.5S3.3578,0,7.5,0z M7.5,1.6666c-3.2217,0-5.8333,2.6117-5.8333,5.8334S4.2783,13.3334,7.5,13.3334 s5.8333-2.6117,5.8333-5.8334S10.7217,1.6666,7.5,1.6666z"})})}}function $y(n){return Vl({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"},child:[]}]})(n)}function BZ(n){return Vl({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 19.59V8l-6-6H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c.45 0 .85-.15 1.19-.4l-4.43-4.43c-.8.52-1.74.83-2.76.83-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5c0 1.02-.31 1.96-.83 2.75L20 19.59zM9 13c0 1.66 1.34 3 3 3s3-1.34 3-3-1.34-3-3-3-3 1.34-3 3z"},child:[]}]})(n)}function OZ(n){return Vl({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11 18h2v-2h-2v2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4z"},child:[]}]})(n)}function IZ(n){return Vl({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M14.59 8 12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41 14.59 8zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"},child:[]}]})(n)}function kZ(n){return Vl({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M11 7h2v2h-2V7zm0 4h2v6h-2v-6zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"},child:[]}]})(n)}function TZ(n){return Vl({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zm6.93 6h-2.95a15.65 15.65 0 0 0-1.38-3.56A8.03 8.03 0 0 1 18.92 8zM12 4.04c.83 1.2 1.48 2.53 1.91 3.96h-3.82c.43-1.43 1.08-2.76 1.91-3.96zM4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2 0 .68.06 1.34.14 2H4.26zm.82 2h2.95c.32 1.25.78 2.45 1.38 3.56A7.987 7.987 0 0 1 5.08 16zm2.95-8H5.08a7.987 7.987 0 0 1 4.33-3.56A15.65 15.65 0 0 0 8.03 8zM12 19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 1.43-1.08 2.76-1.91 3.96zM14.34 14H9.66c-.09-.66-.16-1.32-.16-2 0-.68.07-1.35.16-2h4.68c.09.65.16 1.32.16 2 0 .68-.07 1.34-.16 2zm.25 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95a8.03 8.03 0 0 1-4.33 3.56zM16.36 14c.08-.66.14-1.32.14-2 0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2h-3.38z"},child:[]}]})(n)}function PZ(n){return Vl({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 4H5a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h4v-2H5V8h14v10h-4v2h4c1.1 0 2-.9 2-2V6a2 2 0 0 0-2-2zm-7 6-4 4h3v6h2v-6h3l-4-4z"},child:[]}]})(n)}function KZ(n){return Vl({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58a.49.49 0 0 0 .12-.61l-1.92-3.32a.488.488 0 0 0-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54a.484.484 0 0 0-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58a.49.49 0 0 0-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"},child:[]}]})(n)}function DZ(n){return Vl({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0zm0 0h24v24H0zm0 0h24v24H0zm0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46A11.804 11.804 0 0 0 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"},child:[]}]})(n)}function RZ(n){return Vl({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"},child:[]}]})(n)}function $U(n){return Vl({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"},child:[]}]})(n)}function FZ(n){return Vl({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"},child:[]}]})(n)}function N6(n){return Vl({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"},child:[]}]})(n)}function LZ(n){return Vl({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z"},child:[]}]})(n)}function UZ(n){return Vl({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M18 4H6v2l6.5 6L6 18v2h12v-3h-7l5-5-5-5h7z"},child:[]}]})(n)}function zZ(n){return Vl({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"},child:[]}]})(n)}function Y7(n){return Vl({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z"},child:[]}]})(n)}function jZ(n){return Vl({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m11.99 18.54-7.37-5.73L3 14.07l9 7 9-7-1.63-1.27-7.38 5.74zM12 16l7.36-5.73L21 9l-9-7-9 7 1.63 1.27L12 16z"},child:[]}]})(n)}function NZ(n){return Vl({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m20.5 3-.16.03L15 5.1 9 3 3.36 4.9c-.21.07-.36.25-.36.48V20.5c0 .28.22.5.5.5l.16-.03L9 18.9l6 2.1 5.64-1.9c.21-.07.36-.25.36-.48V3.5c0-.28-.22-.5-.5-.5zM15 19l-6-2.11V5l6 2.11V19z"},child:[]}]})(n)}function WZ(n){return Vl({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m7 10 5 5 5-5z"},child:[]}]})(n)}function GZ(n){return Vl({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m7 14 5-5 5 5z"},child:[]}]})(n)}function QZ(n){return Vl({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"},child:[]}]})(n)}function qZ(n){return Vl({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"},child:[]}]})(n)}function YZ(n){return Vl({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"19",r:"2"},child:[]},{tag:"path",attr:{d:"M10 3h4v12h-4z"},child:[]}]})(n)}function C2(){var n="/home/runner/work/maputnik/maputnik/src/components/IconMissing.tsx",e="90c8ed80956547e1dbbdff164a42850c33eed62e",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/IconMissing.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:6,column:66}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:7,column:3}},line:5}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/IconMissing.tsx"],names:[],mappings:"AAOM;AAPN,OAAO,WAAW;AAClB,SAAQ,sBAAqB;AAG7B,qBAAqB,oBAAoB,MAAM,UAAU;AAAA,EACvD,SAAS;AACP,WACE,oBAAC,kBAAgB,GAAG,KAAK,OAAO;AAAA,EAEpC;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"90c8ed80956547e1dbbdff164a42850c33eed62e"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return C2=function(){return a},a}C2();class $Z extends nr.Component{render(){return C2().f[0]++,C2().s[0]++,ue.jsx(YZ,{...this.props})}}function Pl(){var n="/home/runner/work/maputnik/maputnik/src/components/IconLayer.tsx",e="89bd7eb08374d10a1476c7cf1e0e39f530ce1ff1",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/IconLayer.tsx",statementMap:{0:{start:{line:11,column:22},end:{line:11,column:49}},1:{start:{line:12,column:4},end:{line:33,column:5}},2:{start:{line:14,column:8},end:{line:14,column:69}},3:{start:{line:16,column:8},end:{line:16,column:63}},4:{start:{line:18,column:8},end:{line:18,column:63}},5:{start:{line:20,column:8},end:{line:20,column:63}},6:{start:{line:22,column:8},end:{line:22,column:63}},7:{start:{line:24,column:8},end:{line:24,column:69}},8:{start:{line:26,column:8},end:{line:26,column:63}},9:{start:{line:28,column:8},end:{line:28,column:65}},10:{start:{line:30,column:8},end:{line:30,column:65}},11:{start:{line:32,column:8},end:{line:32,column:66}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:34,column:3}},line:10}},branchMap:{0:{loc:{start:{line:12,column:4},end:{line:33,column:5}},type:"switch",locations:[{start:{line:13,column:6},end:{line:14,column:69}},{start:{line:15,column:6},end:{line:16,column:63}},{start:{line:17,column:6},end:{line:18,column:63}},{start:{line:19,column:6},end:{line:20,column:63}},{start:{line:21,column:6},end:{line:22,column:63}},{start:{line:23,column:6},end:{line:24,column:69}},{start:{line:25,column:6},end:{line:26,column:63}},{start:{line:27,column:6},end:{line:28,column:65}},{start:{line:29,column:6},end:{line:30,column:65}},{start:{line:31,column:6},end:{line:32,column:66}}],line:12}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},f:{0:0},b:{0:[0,0,0,0,0,0,0,0,0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/IconLayer.tsx"],names:[],mappings:"AAmBkC;AAnBlC,OAAO,WAAW;AAElB,OAAO,cAAc;AACrB,OAAO,cAAc;AACrB,OAAO,gBAAgB;AACvB,OAAO,oBAAoB;AAC3B,OAAO,gBAAgB;AACvB,OAAO,iBAAiB;AAQxB,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,SAAS;AACP,UAAM,YAAY,EAAE,OAAO,KAAK,MAAM,MAAM;AAC5C,YAAO,KAAK,MAAM,MAAM;AAAA,MACxB,KAAK;AAAkB,eAAO,oBAAC,kBAAgB,GAAG,WAAW;AAAA,MAC7D,KAAK;AAAU,eAAO,oBAAC,YAAU,GAAG,WAAW;AAAA,MAC/C,KAAK;AAAa,eAAO,oBAAC,YAAU,GAAG,WAAW;AAAA,MAClD,KAAK;AAAW,eAAO,oBAAC,YAAU,GAAG,WAAW;AAAA,MAChD,KAAK;AAAQ,eAAO,oBAAC,YAAU,GAAG,WAAW;AAAA,MAC7C,KAAK;AAAc,eAAO,oBAAC,kBAAgB,GAAG,WAAW;AAAA,MACzD,KAAK;AAAQ,eAAO,oBAAC,YAAU,GAAG,WAAW;AAAA,MAC7C,KAAK;AAAU,eAAO,oBAAC,cAAY,GAAG,WAAW;AAAA,MACjD,KAAK;AAAU,eAAO,oBAAC,cAAY,GAAG,WAAW;AAAA,MACjD;AAAS,eAAO,oBAAC,eAAa,GAAG,WAAW;AAAA,IAC5C;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"89bd7eb08374d10a1476c7cf1e0e39f530ce1ff1"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Pl=function(){return a},a}Pl();class VU extends nr.Component{render(){Pl().f[0]++;const e=(Pl().s[0]++,{style:this.props.style});switch(Pl().s[1]++,this.props.type){case"fill-extrusion":return Pl().b[0][0]++,Pl().s[2]++,ue.jsx(q7,{...e});case"raster":return Pl().b[0][1]++,Pl().s[3]++,ue.jsx(ob,{...e});case"hillshade":return Pl().b[0][2]++,Pl().s[4]++,ue.jsx(ob,{...e});case"heatmap":return Pl().b[0][3]++,Pl().s[5]++,ue.jsx(ob,{...e});case"fill":return Pl().b[0][4]++,Pl().s[6]++,ue.jsx(ob,{...e});case"background":return Pl().b[0][5]++,Pl().s[7]++,ue.jsx(q7,{...e});case"line":return Pl().b[0][6]++,Pl().s[8]++,ue.jsx(MZ,{...e});case"symbol":return Pl().b[0][7]++,Pl().s[9]++,ue.jsx(SZ,{...e});case"circle":return Pl().b[0][8]++,Pl().s[10]++,ue.jsx(EZ,{...e});default:return Pl().b[0][9]++,Pl().s[11]++,ue.jsx($Z,{...e})}}}function Jr(){var n="/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlLayerPopup.tsx",e="ea1e9940e142b9a2a1c672f6983f6f5748c841e6",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlLayerPopup.tsx",statementMap:{0:{start:{line:5,column:18},end:{line:5,column:20}},1:{start:{line:6,column:27},end:{line:6,column:29}},2:{start:{line:7,column:2},end:{line:18,column:5}},3:{start:{line:8,column:22},end:{line:8,column:51}},4:{start:{line:9,column:4},end:{line:17,column:5}},5:{start:{line:10,column:6},end:{line:10,column:43}},6:{start:{line:11,column:28},end:{line:11,column:91}},7:{start:{line:11,column:59},end:{line:11,column:90}},8:{start:{line:12,column:6},end:{line:12,column:65}},9:{start:{line:14,column:6},end:{line:14,column:52}},10:{start:{line:15,column:6},end:{line:15,column:39}},11:{start:{line:16,column:6},end:{line:16,column:45}},12:{start:{line:19,column:2},end:{line:19,column:17}},13:{start:{line:23,column:4},end:{line:25,column:5}},14:{start:{line:24,column:6},end:{line:24,column:13}},15:{start:{line:26,column:4},end:{line:44,column:5}},16:{start:{line:27,column:25},end:{line:27,column:44}},17:{start:{line:28,column:6},end:{line:30,column:7}},18:{start:{line:29,column:8},end:{line:29,column:48}},19:{start:{line:31,column:6},end:{line:33,column:7}},20:{start:{line:32,column:8},end:{line:32,column:48}},21:{start:{line:34,column:6},end:{line:36,column:7}},22:{start:{line:35,column:8},end:{line:35,column:48}},23:{start:{line:37,column:6},end:{line:39,column:7}},24:{start:{line:38,column:8},end:{line:38,column:58}},25:{start:{line:40,column:6},end:{line:40,column:21}},26:{start:{line:42,column:6},end:{line:42,column:63}},27:{start:{line:43,column:6},end:{line:43,column:21}},28:{start:{line:47,column:20},end:{line:47,column:67}},29:{start:{line:48,column:18},end:{line:93,column:6}},30:{start:{line:49,column:21},end:{line:88,column:8}},31:{start:{line:50,column:29},end:{line:50,column:76}},32:{start:{line:51,column:8},end:{line:87,column:10}},33:{start:{line:68,column:20},end:{line:68,column:63}},34:{start:{line:89,column:6},end:{line:92,column:26}},35:{start:{line:94,column:4},end:{line:94,column:102}}},fnMap:{0:{name:"groupFeaturesBySourceLayer",decl:{start:{line:4,column:9},end:{line:4,column:35}},loc:{start:{line:4,column:46},end:{line:20,column:1}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:7,column:19},end:{line:7,column:20}},loc:{start:{line:7,column:32},end:{line:18,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:11,column:52},end:{line:11,column:53}},loc:{start:{line:11,column:59},end:{line:11,column:90}},line:11},3:{name:"(anonymous_3)",decl:{start:{line:22,column:2},end:{line:22,column:3}},loc:{start:{line:22,column:35},end:{line:45,column:3}},line:22},4:{name:"(anonymous_4)",decl:{start:{line:46,column:2},end:{line:46,column:3}},loc:{start:{line:46,column:11},end:{line:95,column:3}},line:46},5:{name:"(anonymous_5)",decl:{start:{line:48,column:43},end:{line:48,column:44}},loc:{start:{line:48,column:62},end:{line:93,column:5}},line:48},6:{name:"(anonymous_6)",decl:{start:{line:49,column:48},end:{line:49,column:49}},loc:{start:{line:49,column:66},end:{line:88,column:7}},line:49},7:{name:"(anonymous_7)",decl:{start:{line:67,column:27},end:{line:67,column:28}},loc:{start:{line:67,column:33},end:{line:69,column:19}},line:67}},branchMap:{0:{loc:{start:{line:9,column:4},end:{line:17,column:5}},type:"if",locations:[{start:{line:9,column:4},end:{line:17,column:5}},{start:{line:13,column:11},end:{line:17,column:5}}],line:9},1:{loc:{start:{line:14,column:27},end:{line:14,column:51}},type:"binary-expr",locations:[{start:{line:14,column:27},end:{line:14,column:45}},{start:{line:14,column:49},end:{line:14,column:51}}],line:14},2:{loc:{start:{line:23,column:4},end:{line:25,column:5}},type:"if",locations:[{start:{line:23,column:4},end:{line:25,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:23},3:{loc:{start:{line:28,column:6},end:{line:30,column:7}},type:"if",locations:[{start:{line:28,column:6},end:{line:30,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:28},4:{loc:{start:{line:28,column:10},end:{line:28,column:64}},type:"binary-expr",locations:[{start:{line:28,column:10},end:{line:28,column:36}},{start:{line:28,column:40},end:{line:28,column:64}}],line:28},5:{loc:{start:{line:31,column:6},end:{line:33,column:7}},type:"if",locations:[{start:{line:31,column:6},end:{line:33,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:31},6:{loc:{start:{line:31,column:10},end:{line:31,column:64}},type:"binary-expr",locations:[{start:{line:31,column:10},end:{line:31,column:36}},{start:{line:31,column:40},end:{line:31,column:64}}],line:31},7:{loc:{start:{line:34,column:6},end:{line:36,column:7}},type:"if",locations:[{start:{line:34,column:6},end:{line:36,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:34},8:{loc:{start:{line:34,column:10},end:{line:34,column:64}},type:"binary-expr",locations:[{start:{line:34,column:10},end:{line:34,column:36}},{start:{line:34,column:40},end:{line:34,column:64}}],line:34},9:{loc:{start:{line:37,column:6},end:{line:39,column:7}},type:"if",locations:[{start:{line:37,column:6},end:{line:39,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},10:{loc:{start:{line:37,column:10},end:{line:37,column:84}},type:"binary-expr",locations:[{start:{line:37,column:10},end:{line:37,column:46}},{start:{line:37,column:50},end:{line:37,column:84}}],line:37},11:{loc:{start:{line:71,column:20},end:{line:75,column:24}},type:"binary-expr",locations:[{start:{line:71,column:20},end:{line:71,column:38}},{start:{line:71,column:58},end:{line:75,column:24}}],line:71},12:{loc:{start:{line:77,column:20},end:{line:80,column:24}},type:"binary-expr",locations:[{start:{line:77,column:20},end:{line:77,column:35}},{start:{line:77,column:55},end:{line:80,column:24}}],line:77}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlLayerPopup.tsx"],names:[],mappings:"AA8EU,cAkBsB,YAlBtB;AA9EV,OAAO,WAAW;AAClB,OAAO,eAAe;AAGtB,SAAS,2BAA2B,UAA4B;AAC9D,QAAM,UAA6C,CAAC;AAEpD,QAAM,mBAA4C,CAAC;AAEnD,WAAS,QAAQ,aAAW;AAC1B,UAAM,YAAY,QAAQ,MAAM,cAAc;AAC9C,QAAG,OAAO,UAAU,eAAe,KAAK,kBAAkB,QAAQ,MAAM,EAAE,GAAG;AAC3E,uBAAiB,QAAQ,MAAM,EAAE;AAEjC,YAAM,gBAAgB,QAAQ,SAAS,EAAE,KAAK,CAAC,MAAsB,EAAE,MAAM,OAAO,QAAQ,MAAM,EAAE;AAEpG,oBAAe,UAAU,iBAAiB,QAAQ,MAAM,EAAE;AAAA,IAC5D,OAAO;AACL,cAAQ,SAAS,IAAI,QAAQ,SAAS,KAAK,CAAC;AAC5C,cAAQ,SAAS,EAAE,KAAK,OAAO;AAE/B,uBAAiB,QAAQ,MAAM,EAAE,IAAI;AAAA,IACvC;AAAA,EACF,CAAC;AAED,SAAO;AACT;AAQA,MAAM,0BAA0B,MAAM,UAAkC;AAAA,EACtE,iBAAiB,SAAyB,OAAgB;AAExD,QAAI,CAAC,QAAQ,MAAM,OAAO;AACxB;AAAA,IACF;AAEA,QAAI;AACF,YAAM,aAAa,QAAQ,MAAM;AAEjC,UAAG,gBAAgB,cAAc,WAAW,YAAY,GAAG;AACzD,eAAO,OAAO,WAAW,YAAY,CAAC;AAAA,MACxC;AACA,UAAI,gBAAgB,cAAc,WAAW,YAAY,GAAG;AAC1D,eAAO,OAAO,WAAW,YAAY,CAAC;AAAA,MACxC;AACA,UAAI,gBAAgB,cAAc,WAAW,YAAY,GAAG;AAC1D,eAAO,OAAO,WAAW,YAAY,CAAC;AAAA,MACxC;AACA,UAAI,0BAA0B,cAAc,WAAW,sBAAsB,GAAG;AAC9E,eAAO,OAAO,WAAW,sBAAsB,CAAC;AAAA,MAClD;AAEA,aAAO;AAAA,IACT,SAGO,KAAK;AACV,cAAQ,KAAK,uCAAuC,GAAG;AACvD,aAAO;AAAA,IACT;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,UAAU,2BAA2B,KAAK,MAAM,QAAQ;AAE9D,UAAM,QAAQ,OAAO,KAAK,OAAO,EAAE,IAAI,mBAAiB;AACtD,YAAM,SAAS,QAAQ,aAAa,EAAE,IAAI,CAAC,SAAyB,QAAgB;AAClF,cAAM,eAAe,KAAK,iBAAiB,SAAS,KAAK,MAAM,IAAI;AAEnE,eAAO;AAAA,UAAC;AAAA;AAAA,YAEN,WAAU;AAAA,YAEV;AAAA;AAAA,gBAAC;AAAA;AAAA,kBACC,WAAU;AAAA,kBACV,OAAO,EAAC,YAAY,aAAY;AAAA;AAAA,cACjC;AAAA,cACD;AAAA,gBAAC;AAAA;AAAA,kBACC,WAAU;AAAA,kBACV,SAAS,MAAM;AACb,yBAAK,MAAM,cAAc,QAAQ,MAAM,EAAE;AAAA,kBAC3C;AAAA,kBAEC;AAAA,4BAAQ,MAAM,QACb,oBAAC,aAAU,MAAM,QAAQ,MAAM,MAAM,OAAO;AAAA,sBAC1C,OAAO;AAAA,sBACP,QAAQ;AAAA,sBACR,cAAc;AAAA,oBAChB,GAAE;AAAA,oBAEH,QAAQ,MAAM;AAAA,oBACd,QAAQ,WAAW,qBAAC,UAAK;AAAA;AAAA,sBAAI,QAAQ;AAAA,uBAAQ;AAAA;AAAA;AAAA,cAChD;AAAA;AAAA;AAAA,UAtBK;AAAA,QAuBP;AAAA,MACF,CAAC;AACD,aAAO,qBAAC,SACN;AAAA,4BAAC,SAAI,WAAU,2BAA2B,yBAAc;AAAA,QACvD;AAAA,WAFc,aAGjB;AAAA,IACF,CAAC;AAED,WAAO,oBAAC,SAAI,WAAU,gCACnB,iBACH;AAAA,EACF;AACF;AAGA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ea1e9940e142b9a2a1c672f6983f6f5748c841e6"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Jr=function(){return a},a}Jr();function VZ(n){Jr().f[0]++;const e=(Jr().s[0]++,{}),t=(Jr().s[1]++,{});return Jr().s[2]++,n.forEach(r=>{Jr().f[1]++;const i=(Jr().s[3]++,r.layer["source-layer"]);if(Jr().s[4]++,Object.prototype.hasOwnProperty.call(t,r.layer.id)){Jr().b[0][0]++,Jr().s[5]++,t[r.layer.id]++;const s=(Jr().s[6]++,e[i].find(a=>(Jr().f[2]++,Jr().s[7]++,a.layer.id===r.layer.id)));Jr().s[8]++,s.counter=t[r.layer.id]}else Jr().b[0][1]++,Jr().s[9]++,e[i]=(Jr().b[1][0]++,e[i]||(Jr().b[1][1]++,[])),Jr().s[10]++,e[i].push(r),Jr().s[11]++,t[r.layer.id]=1}),Jr().s[12]++,e}class HU extends nr.Component{_getFeatureColor(e,t){if(Jr().f[3]++,Jr().s[13]++,e.layer.paint)Jr().b[2][1]++;else{Jr().b[2][0]++,Jr().s[14]++;return}Jr().s[15]++;try{const r=(Jr().s[16]++,e.layer.paint);return Jr().s[17]++,Jr().b[4][0]++,"text-color"in r&&(Jr().b[4][1]++,r["text-color"])?(Jr().b[3][0]++,Jr().s[18]++,String(r["text-color"])):(Jr().b[3][1]++,Jr().s[19]++,Jr().b[6][0]++,"fill-color"in r&&(Jr().b[6][1]++,r["fill-color"])?(Jr().b[5][0]++,Jr().s[20]++,String(r["fill-color"])):(Jr().b[5][1]++,Jr().s[21]++,Jr().b[8][0]++,"line-color"in r&&(Jr().b[8][1]++,r["line-color"])?(Jr().b[7][0]++,Jr().s[22]++,String(r["line-color"])):(Jr().b[7][1]++,Jr().s[23]++,Jr().b[10][0]++,"fill-extrusion-color"in r&&(Jr().b[10][1]++,r["fill-extrusion-color"])?(Jr().b[9][0]++,Jr().s[24]++,String(r["fill-extrusion-color"])):(Jr().b[9][1]++,Jr().s[25]++,"black"))))}catch(r){return Jr().s[26]++,console.warn("Unable to get feature color, error:",r),Jr().s[27]++,"black"}}render(){Jr().f[4]++;const e=(Jr().s[28]++,VZ(this.props.features)),t=(Jr().s[29]++,Object.keys(e).map(r=>{Jr().f[5]++;const i=(Jr().s[30]++,e[r].map((s,a)=>{Jr().f[6]++;const o=(Jr().s[31]++,this._getFeatureColor(s,this.props.zoom));return Jr().s[32]++,ue.jsxs("div",{className:"maputnik-popup-layer",children:[ue.jsx("div",{className:"maputnik-popup-layer__swatch",style:{background:o}}),ue.jsxs("label",{className:"maputnik-popup-layer__label",onClick:()=>{Jr().f[7]++,Jr().s[33]++,this.props.onLayerSelect(s.layer.id)},children:[(Jr().b[11][0]++,s.layer.type&&(Jr().b[11][1]++,ue.jsx(VU,{type:s.layer.type,style:{width:14,height:14,paddingRight:3}}))),s.layer.id,(Jr().b[12][0]++,s.counter&&(Jr().b[12][1]++,ue.jsxs("span",{children:["  ",s.counter]})))]})]},a)}));return Jr().s[34]++,ue.jsxs("div",{children:[ue.jsx("div",{className:"maputnik-popup-layer-id",children:r}),i]},r)}));return Jr().s[35]++,ue.jsx("div",{className:"maputnik-feature-layer-popup",children:t})}}function Vi(){var n="/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlFeaturePropertyPopup.tsx",e="72aafaa905031d9408c36c83b71947160ac6dbad",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlFeaturePropertyPopup.tsx",statementMap:{0:{start:{line:4,column:2},end:{line:4,column:67}},1:{start:{line:4,column:54},end:{line:4,column:67}},2:{start:{line:5,column:2},end:{line:5,column:59}},3:{start:{line:5,column:29},end:{line:5,column:59}},4:{start:{line:6,column:2},end:{line:6,column:115}},5:{start:{line:6,column:91},end:{line:6,column:115}},6:{start:{line:7,column:2},end:{line:7,column:15}},7:{start:{line:10,column:2},end:{line:13,column:12}},8:{start:{line:16,column:2},end:{line:32,column:12}},9:{start:{line:29,column:23},end:{line:29,column:55}},10:{start:{line:30,column:6},end:{line:30,column:74}},11:{start:{line:35,column:25},end:{line:35,column:27}},12:{start:{line:36,column:2},end:{line:49,column:5}},13:{start:{line:37,column:25},end:{line:39,column:6}},14:{start:{line:38,column:6},end:{line:38,column:156}},15:{start:{line:40,column:4},end:{line:48,column:5}},16:{start:{line:41,column:6},end:{line:41,column:35}},17:{start:{line:43,column:6},end:{line:47,column:7}},18:{start:{line:44,column:8},end:{line:44,column:58}},19:{start:{line:46,column:8},end:{line:46,column:60}},20:{start:{line:50,column:2},end:{line:50,column:24}},21:{start:{line:54,column:21},end:{line:54,column:66}},22:{start:{line:55,column:4},end:{line:55,column:250}}},fnMap:{0:{name:"displayValue",decl:{start:{line:3,column:9},end:{line:3,column:21}},loc:{start:{line:3,column:29},end:{line:8,column:1}},line:3},1:{name:"renderKeyValueTableRow",decl:{start:{line:9,column:9},end:{line:9,column:31}},loc:{start:{line:9,column:44},end:{line:14,column:1}},line:9},2:{name:"renderFeature",decl:{start:{line:15,column:9},end:{line:15,column:22}},loc:{start:{line:15,column:37},end:{line:33,column:1}},line:15},3:{name:"(anonymous_3)",decl:{start:{line:28,column:40},end:{line:28,column:41}},loc:{start:{line:28,column:58},end:{line:31,column:5}},line:28},4:{name:"removeDuplicatedFeatures",decl:{start:{line:34,column:9},end:{line:34,column:33}},loc:{start:{line:34,column:44},end:{line:51,column:1}},line:34},5:{name:"(anonymous_5)",decl:{start:{line:36,column:19},end:{line:36,column:20}},loc:{start:{line:36,column:32},end:{line:49,column:3}},line:36},6:{name:"(anonymous_6)",decl:{start:{line:37,column:50},end:{line:37,column:51}},loc:{start:{line:37,column:64},end:{line:39,column:5}},line:37},7:{name:"(anonymous_7)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:11},end:{line:56,column:3}},line:53}},branchMap:{0:{loc:{start:{line:4,column:2},end:{line:4,column:67}},type:"if",locations:[{start:{line:4,column:2},end:{line:4,column:67}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:4},1:{loc:{start:{line:4,column:6},end:{line:4,column:52}},type:"binary-expr",locations:[{start:{line:4,column:6},end:{line:4,column:34}},{start:{line:4,column:38},end:{line:4,column:52}}],line:4},2:{loc:{start:{line:5,column:2},end:{line:5,column:59}},type:"if",locations:[{start:{line:5,column:2},end:{line:5,column:59}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:5},3:{loc:{start:{line:6,column:2},end:{line:6,column:115}},type:"if",locations:[{start:{line:6,column:2},end:{line:6,column:115}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:6},4:{loc:{start:{line:6,column:6},end:{line:6,column:89}},type:"binary-expr",locations:[{start:{line:6,column:6},end:{line:6,column:31}},{start:{line:6,column:35},end:{line:6,column:60}},{start:{line:6,column:64},end:{line:6,column:89}}],line:6},5:{loc:{start:{line:21,column:6},end:{line:24,column:10}},type:"binary-expr",locations:[{start:{line:21,column:6},end:{line:21,column:32}},{start:{line:21,column:52},end:{line:24,column:10}}],line:21},6:{loc:{start:{line:38,column:13},end:{line:38,column:155}},type:"binary-expr",locations:[{start:{line:38,column:13},end:{line:38,column:77}},{start:{line:38,column:81},end:{line:38,column:155}}],line:38},7:{loc:{start:{line:40,column:4},end:{line:48,column:5}},type:"if",locations:[{start:{line:40,column:4},end:{line:48,column:5}},{start:{line:42,column:11},end:{line:48,column:5}}],line:40},8:{loc:{start:{line:43,column:6},end:{line:47,column:7}},type:"if",locations:[{start:{line:43,column:6},end:{line:47,column:7}},{start:{line:45,column:13},end:{line:47,column:7}}],line:43}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlFeaturePropertyPopup.tsx"],names:[],mappings:"AAkBS,SACL,KADK;AAlBT,OAAO,WAAW;AAQlB,SAAS,aAAa,OAAoD;AACxE,MAAI,OAAO,UAAU,eAAe,UAAU,KAAM,QAAO;AAC3D,MAAI,iBAAiB,KAAM,QAAO,MAAM,eAAe;AACvD,MAAI,OAAO,UAAU,YACb,OAAO,UAAU,YACjB,OAAO,UAAU,SAAU,QAAO,MAAM,SAAS;AACzD,SAAO;AACT;AAEA,SAAS,uBAAuB,KAAa,OAA2B;AACtE,SAAO,qBAAC,QACN;AAAA,wBAAC,QAAG,WAAU,6BAA6B,eAAI;AAAA,IAC/C,oBAAC,QAAG,WAAU,6BAA6B,iBAAM;AAAA,OAFnC,GAGhB;AACF;AAEA,SAAS,cAAc,SAAyB,KAAa;AAC3D,SAAO,qBAAC,MAAM,UAAN,EACN;AAAA,wBAAC,QACC,+BAAC,QAAG,SAAS,GAAG,WAAU,2BAA2B;AAAA,cAAQ,MAAM,QAAQ;AAAA,MAAE;AAAA,MAAG,QAAQ,MAAM,cAAc;AAAA,MAAG,QAAQ,sBAAsB,qBAAC,UAAK;AAAA;AAAA,QAAI,QAAQ;AAAA,SAAmB;AAAA,OAAQ,GAC5L;AAAA,IACC,uBAAuB,SAAS,QAAQ,SAAS,IAAI;AAAA,IACrD,uBAAuB,OAAO,aAAa,QAAQ,EAAE,CAAC;AAAA,IACtD,OAAO,KAAK,QAAQ,UAAU,EAAE,IAAI,kBAAgB;AACnD,YAAM,WAAW,QAAQ,WAAW,YAAY;AAChD,aAAO,uBAAuB,cAAc,aAAa,QAAQ,CAAC;AAAA,IACpE,CAAC;AAAA,OATyB,GAU5B;AACF;AAEA,SAAS,yBAAyB,UAA4B;AAC5D,QAAM,iBAAmC,CAAC;AAE1C,WAAS,QAAQ,aAAW;AAC1B,UAAM,eAAe,eAAe,UAAU,cAAY;AACxD,aAAO,QAAQ,MAAM,cAAc,MAAM,SAAS,MAAM,cAAc,KACjE,KAAK,UAAU,QAAQ,UAAU,MAAM,KAAK,UAAU,SAAS,UAAU;AAAA,IAChF,CAAC;AAED,QAAG,iBAAiB,IAAI;AACtB,qBAAe,KAAK,OAAO;AAAA,IAC7B,OAAO;AACL,UAAG,wBAAwB,eAAe,YAAY,GAAG;AACvD,uBAAe,YAAY,EAAE;AAAA,MAC/B,OAAO;AACL,uBAAe,YAAY,EAAE,qBAAqB;AAAA,MACpD;AAAA,IACF;AAAA,EACF,CAAC;AAED,SAAO;AACT;AAMA,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,SAAS;AACP,UAAM,WAAW,yBAAyB,KAAK,MAAM,QAAQ;AAC7D,WAAO,oBAAC,SAAI,WAAU,mCACpB,8BAAC,WAAM,WAAU,wBACf,8BAAC,WACE,mBAAS,IAAI,aAAa,GAC7B,GACF,GACF;AAAA,EACF;AACF;AAGA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"72aafaa905031d9408c36c83b71947160ac6dbad"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Vi=function(){return a},a}Vi();function $7(n){return Vi().f[0]++,Vi().s[0]++,Vi().b[1][0]++,typeof n>"u"||(Vi().b[1][1]++,n===null)?(Vi().b[0][0]++,Vi().s[1]++,n):(Vi().b[0][1]++,Vi().s[2]++,n instanceof Date?(Vi().b[2][0]++,Vi().s[3]++,n.toLocaleString()):(Vi().b[2][1]++,Vi().s[4]++,Vi().b[4][0]++,typeof n=="object"||(Vi().b[4][1]++,typeof n=="number")||(Vi().b[4][2]++,typeof n=="string")?(Vi().b[3][0]++,Vi().s[5]++,n.toString()):(Vi().b[3][1]++,Vi().s[6]++,n)))}function b4(n,e){return Vi().f[1]++,Vi().s[7]++,ue.jsxs("tr",{children:[ue.jsx("td",{className:"maputnik-popup-table-cell",children:n}),ue.jsx("td",{className:"maputnik-popup-table-cell",children:e})]},n)}function HZ(n,e){return Vi().f[2]++,Vi().s[8]++,ue.jsxs(nr.Fragment,{children:[ue.jsx("tr",{children:ue.jsxs("td",{colSpan:2,className:"maputnik-popup-layer-id",children:[n.layer.source,": ",n.layer["source-layer"],(Vi().b[5][0]++,n.inspectModeCounter&&(Vi().b[5][1]++,ue.jsxs("span",{children:["  ",n.inspectModeCounter]})))]})}),b4("$type",n.geometry.type),b4("$id",$7(n.id)),Object.keys(n.properties).map(t=>{Vi().f[3]++;const r=(Vi().s[9]++,n.properties[t]);return Vi().s[10]++,b4(t,$7(r))})]},e)}function ZZ(n){Vi().f[4]++;const e=(Vi().s[11]++,[]);return Vi().s[12]++,n.forEach(t=>{Vi().f[5]++;const r=(Vi().s[13]++,e.findIndex(i=>(Vi().f[6]++,Vi().s[14]++,Vi().b[6][0]++,t.layer["source-layer"]===i.layer["source-layer"]&&(Vi().b[6][1]++,JSON.stringify(t.properties)===JSON.stringify(i.properties)))));Vi().s[15]++,r===-1?(Vi().b[7][0]++,Vi().s[16]++,e.push(t)):(Vi().b[7][1]++,Vi().s[17]++,"inspectModeCounter"in e[r]?(Vi().b[8][0]++,Vi().s[18]++,e[r].inspectModeCounter++):(Vi().b[8][1]++,Vi().s[19]++,e[r].inspectModeCounter=2))}),Vi().s[20]++,e}class XZ extends nr.Component{render(){Vi().f[7]++;const e=(Vi().s[21]++,ZZ(this.props.features));return Vi().s[22]++,ue.jsx("div",{className:"maputnik-feature-property-popup",children:ue.jsx("table",{className:"maputnik-popup-table",children:ue.jsx("tbody",{children:e.map(HZ)})})})}}var x4={exports:{}},w4,V7;function ZU(){return V7||(V7=1,w4={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}),w4}var M4={exports:{}},S4,H7;function JZ(){return H7||(H7=1,S4=function(e){return!e||typeof e=="string"?!1:e instanceof Array||Array.isArray(e)||e.length>=0&&(e.splice instanceof Function||Object.getOwnPropertyDescriptor(e,e.length-1)&&e.constructor.name!=="String")}),S4}var Z7;function eX(){if(Z7)return M4.exports;Z7=1;var n=JZ(),e=Array.prototype.concat,t=Array.prototype.slice,r=M4.exports=function(s){for(var a=[],o=0,d=s.length;o<d;o++){var g=s[o];n(g)?a=e.call(a,t.call(g)):a.push(g)}return a};return r.wrap=function(i){return function(){return i(r(arguments))}},M4.exports}var X7;function tX(){if(X7)return x4.exports;X7=1;var n=ZU(),e=eX(),t=Object.hasOwnProperty,r=Object.create(null);for(var i in n)t.call(n,i)&&(r[n[i]]=i);var s=x4.exports={to:{},get:{}};s.get=function(d){var g=d.substring(0,3).toLowerCase(),b,E;switch(g){case"hsl":b=s.get.hsl(d),E="hsl";break;case"hwb":b=s.get.hwb(d),E="hwb";break;default:b=s.get.rgb(d),E="rgb";break}return b?{model:E,value:b}:null},s.get.rgb=function(d){if(!d)return null;var g=/^#([a-f0-9]{3,4})$/i,b=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,E=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,S=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,I=/^(\w+)$/,P=[0,0,0,1],z,j,q;if(z=d.match(b)){for(q=z[2],z=z[1],j=0;j<3;j++){var Y=j*2;P[j]=parseInt(z.slice(Y,Y+2),16)}q&&(P[3]=parseInt(q,16)/255)}else if(z=d.match(g)){for(z=z[1],q=z[3],j=0;j<3;j++)P[j]=parseInt(z[j]+z[j],16);q&&(P[3]=parseInt(q+q,16)/255)}else if(z=d.match(E)){for(j=0;j<3;j++)P[j]=parseInt(z[j+1],0);z[4]&&(z[5]?P[3]=parseFloat(z[4])*.01:P[3]=parseFloat(z[4]))}else if(z=d.match(S)){for(j=0;j<3;j++)P[j]=Math.round(parseFloat(z[j+1])*2.55);z[4]&&(z[5]?P[3]=parseFloat(z[4])*.01:P[3]=parseFloat(z[4]))}else return(z=d.match(I))?z[1]==="transparent"?[0,0,0,0]:t.call(n,z[1])?(P=n[z[1]],P[3]=1,P):null:null;for(j=0;j<3;j++)P[j]=a(P[j],0,255);return P[3]=a(P[3],0,1),P},s.get.hsl=function(d){if(!d)return null;var g=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,b=d.match(g);if(b){var E=parseFloat(b[4]),S=(parseFloat(b[1])%360+360)%360,I=a(parseFloat(b[2]),0,100),P=a(parseFloat(b[3]),0,100),z=a(isNaN(E)?1:E,0,1);return[S,I,P,z]}return null},s.get.hwb=function(d){if(!d)return null;var g=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,b=d.match(g);if(b){var E=parseFloat(b[4]),S=(parseFloat(b[1])%360+360)%360,I=a(parseFloat(b[2]),0,100),P=a(parseFloat(b[3]),0,100),z=a(isNaN(E)?1:E,0,1);return[S,I,P,z]}return null},s.to.hex=function(){var d=e(arguments);return"#"+o(d[0])+o(d[1])+o(d[2])+(d[3]<1?o(Math.round(d[3]*255)):"")},s.to.rgb=function(){var d=e(arguments);return d.length<4||d[3]===1?"rgb("+Math.round(d[0])+", "+Math.round(d[1])+", "+Math.round(d[2])+")":"rgba("+Math.round(d[0])+", "+Math.round(d[1])+", "+Math.round(d[2])+", "+d[3]+")"},s.to.rgb.percent=function(){var d=e(arguments),g=Math.round(d[0]/255*100),b=Math.round(d[1]/255*100),E=Math.round(d[2]/255*100);return d.length<4||d[3]===1?"rgb("+g+"%, "+b+"%, "+E+"%)":"rgba("+g+"%, "+b+"%, "+E+"%, "+d[3]+")"},s.to.hsl=function(){var d=e(arguments);return d.length<4||d[3]===1?"hsl("+d[0]+", "+d[1]+"%, "+d[2]+"%)":"hsla("+d[0]+", "+d[1]+"%, "+d[2]+"%, "+d[3]+")"},s.to.hwb=function(){var d=e(arguments),g="";return d.length>=4&&d[3]!==1&&(g=", "+d[3]),"hwb("+d[0]+", "+d[1]+"%, "+d[2]+"%"+g+")"},s.to.keyword=function(d){return r[d.slice(0,3)]};function a(d,g,b){return Math.min(Math.max(g,d),b)}function o(d){var g=Math.round(d).toString(16).toUpperCase();return g.length<2?"0"+g:g}return x4.exports}var E4,J7;function XU(){if(J7)return E4;J7=1;const n=ZU(),e={};for(const i of Object.keys(n))e[n[i]]=i;const t={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};E4=t;for(const i of Object.keys(t)){if(!("channels"in t[i]))throw new Error("missing channels property: "+i);if(!("labels"in t[i]))throw new Error("missing channel labels property: "+i);if(t[i].labels.length!==t[i].channels)throw new Error("channel and label counts mismatch: "+i);const{channels:s,labels:a}=t[i];delete t[i].channels,delete t[i].labels,Object.defineProperty(t[i],"channels",{value:s}),Object.defineProperty(t[i],"labels",{value:a})}t.rgb.hsl=function(i){const s=i[0]/255,a=i[1]/255,o=i[2]/255,d=Math.min(s,a,o),g=Math.max(s,a,o),b=g-d;let E,S;g===d?E=0:s===g?E=(a-o)/b:a===g?E=2+(o-s)/b:o===g&&(E=4+(s-a)/b),E=Math.min(E*60,360),E<0&&(E+=360);const I=(d+g)/2;return g===d?S=0:I<=.5?S=b/(g+d):S=b/(2-g-d),[E,S*100,I*100]},t.rgb.hsv=function(i){let s,a,o,d,g;const b=i[0]/255,E=i[1]/255,S=i[2]/255,I=Math.max(b,E,S),P=I-Math.min(b,E,S),z=function(j){return(I-j)/6/P+1/2};return P===0?(d=0,g=0):(g=P/I,s=z(b),a=z(E),o=z(S),b===I?d=o-a:E===I?d=1/3+s-o:S===I&&(d=2/3+a-s),d<0?d+=1:d>1&&(d-=1)),[d*360,g*100,I*100]},t.rgb.hwb=function(i){const s=i[0],a=i[1];let o=i[2];const d=t.rgb.hsl(i)[0],g=1/255*Math.min(s,Math.min(a,o));return o=1-1/255*Math.max(s,Math.max(a,o)),[d,g*100,o*100]},t.rgb.cmyk=function(i){const s=i[0]/255,a=i[1]/255,o=i[2]/255,d=Math.min(1-s,1-a,1-o),g=(1-s-d)/(1-d)||0,b=(1-a-d)/(1-d)||0,E=(1-o-d)/(1-d)||0;return[g*100,b*100,E*100,d*100]};function r(i,s){return(i[0]-s[0])**2+(i[1]-s[1])**2+(i[2]-s[2])**2}return t.rgb.keyword=function(i){const s=e[i];if(s)return s;let a=1/0,o;for(const d of Object.keys(n)){const g=n[d],b=r(i,g);b<a&&(a=b,o=d)}return o},t.keyword.rgb=function(i){return n[i]},t.rgb.xyz=function(i){let s=i[0]/255,a=i[1]/255,o=i[2]/255;s=s>.04045?((s+.055)/1.055)**2.4:s/12.92,a=a>.04045?((a+.055)/1.055)**2.4:a/12.92,o=o>.04045?((o+.055)/1.055)**2.4:o/12.92;const d=s*.4124+a*.3576+o*.1805,g=s*.2126+a*.7152+o*.0722,b=s*.0193+a*.1192+o*.9505;return[d*100,g*100,b*100]},t.rgb.lab=function(i){const s=t.rgb.xyz(i);let a=s[0],o=s[1],d=s[2];a/=95.047,o/=100,d/=108.883,a=a>.008856?a**(1/3):7.787*a+16/116,o=o>.008856?o**(1/3):7.787*o+16/116,d=d>.008856?d**(1/3):7.787*d+16/116;const g=116*o-16,b=500*(a-o),E=200*(o-d);return[g,b,E]},t.hsl.rgb=function(i){const s=i[0]/360,a=i[1]/100,o=i[2]/100;let d,g,b;if(a===0)return b=o*255,[b,b,b];o<.5?d=o*(1+a):d=o+a-o*a;const E=2*o-d,S=[0,0,0];for(let I=0;I<3;I++)g=s+1/3*-(I-1),g<0&&g++,g>1&&g--,6*g<1?b=E+(d-E)*6*g:2*g<1?b=d:3*g<2?b=E+(d-E)*(2/3-g)*6:b=E,S[I]=b*255;return S},t.hsl.hsv=function(i){const s=i[0];let a=i[1]/100,o=i[2]/100,d=a;const g=Math.max(o,.01);o*=2,a*=o<=1?o:2-o,d*=g<=1?g:2-g;const b=(o+a)/2,E=o===0?2*d/(g+d):2*a/(o+a);return[s,E*100,b*100]},t.hsv.rgb=function(i){const s=i[0]/60,a=i[1]/100;let o=i[2]/100;const d=Math.floor(s)%6,g=s-Math.floor(s),b=255*o*(1-a),E=255*o*(1-a*g),S=255*o*(1-a*(1-g));switch(o*=255,d){case 0:return[o,S,b];case 1:return[E,o,b];case 2:return[b,o,S];case 3:return[b,E,o];case 4:return[S,b,o];case 5:return[o,b,E]}},t.hsv.hsl=function(i){const s=i[0],a=i[1]/100,o=i[2]/100,d=Math.max(o,.01);let g,b;b=(2-a)*o;const E=(2-a)*d;return g=a*d,g/=E<=1?E:2-E,g=g||0,b/=2,[s,g*100,b*100]},t.hwb.rgb=function(i){const s=i[0]/360;let a=i[1]/100,o=i[2]/100;const d=a+o;let g;d>1&&(a/=d,o/=d);const b=Math.floor(6*s),E=1-o;g=6*s-b,b&1&&(g=1-g);const S=a+g*(E-a);let I,P,z;switch(b){default:case 6:case 0:I=E,P=S,z=a;break;case 1:I=S,P=E,z=a;break;case 2:I=a,P=E,z=S;break;case 3:I=a,P=S,z=E;break;case 4:I=S,P=a,z=E;break;case 5:I=E,P=a,z=S;break}return[I*255,P*255,z*255]},t.cmyk.rgb=function(i){const s=i[0]/100,a=i[1]/100,o=i[2]/100,d=i[3]/100,g=1-Math.min(1,s*(1-d)+d),b=1-Math.min(1,a*(1-d)+d),E=1-Math.min(1,o*(1-d)+d);return[g*255,b*255,E*255]},t.xyz.rgb=function(i){const s=i[0]/100,a=i[1]/100,o=i[2]/100;let d,g,b;return d=s*3.2406+a*-1.5372+o*-.4986,g=s*-.9689+a*1.8758+o*.0415,b=s*.0557+a*-.204+o*1.057,d=d>.0031308?1.055*d**(1/2.4)-.055:d*12.92,g=g>.0031308?1.055*g**(1/2.4)-.055:g*12.92,b=b>.0031308?1.055*b**(1/2.4)-.055:b*12.92,d=Math.min(Math.max(0,d),1),g=Math.min(Math.max(0,g),1),b=Math.min(Math.max(0,b),1),[d*255,g*255,b*255]},t.xyz.lab=function(i){let s=i[0],a=i[1],o=i[2];s/=95.047,a/=100,o/=108.883,s=s>.008856?s**(1/3):7.787*s+16/116,a=a>.008856?a**(1/3):7.787*a+16/116,o=o>.008856?o**(1/3):7.787*o+16/116;const d=116*a-16,g=500*(s-a),b=200*(a-o);return[d,g,b]},t.lab.xyz=function(i){const s=i[0],a=i[1],o=i[2];let d,g,b;g=(s+16)/116,d=a/500+g,b=g-o/200;const E=g**3,S=d**3,I=b**3;return g=E>.008856?E:(g-16/116)/7.787,d=S>.008856?S:(d-16/116)/7.787,b=I>.008856?I:(b-16/116)/7.787,d*=95.047,g*=100,b*=108.883,[d,g,b]},t.lab.lch=function(i){const s=i[0],a=i[1],o=i[2];let d;d=Math.atan2(o,a)*360/2/Math.PI,d<0&&(d+=360);const b=Math.sqrt(a*a+o*o);return[s,b,d]},t.lch.lab=function(i){const s=i[0],a=i[1],d=i[2]/360*2*Math.PI,g=a*Math.cos(d),b=a*Math.sin(d);return[s,g,b]},t.rgb.ansi16=function(i,s=null){const[a,o,d]=i;let g=s===null?t.rgb.hsv(i)[2]:s;if(g=Math.round(g/50),g===0)return 30;let b=30+(Math.round(d/255)<<2|Math.round(o/255)<<1|Math.round(a/255));return g===2&&(b+=60),b},t.hsv.ansi16=function(i){return t.rgb.ansi16(t.hsv.rgb(i),i[2])},t.rgb.ansi256=function(i){const s=i[0],a=i[1],o=i[2];return s===a&&a===o?s<8?16:s>248?231:Math.round((s-8)/247*24)+232:16+36*Math.round(s/255*5)+6*Math.round(a/255*5)+Math.round(o/255*5)},t.ansi16.rgb=function(i){let s=i%10;if(s===0||s===7)return i>50&&(s+=3.5),s=s/10.5*255,[s,s,s];const a=(~~(i>50)+1)*.5,o=(s&1)*a*255,d=(s>>1&1)*a*255,g=(s>>2&1)*a*255;return[o,d,g]},t.ansi256.rgb=function(i){if(i>=232){const g=(i-232)*10+8;return[g,g,g]}i-=16;let s;const a=Math.floor(i/36)/5*255,o=Math.floor((s=i%36)/6)/5*255,d=s%6/5*255;return[a,o,d]},t.rgb.hex=function(i){const a=(((Math.round(i[0])&255)<<16)+((Math.round(i[1])&255)<<8)+(Math.round(i[2])&255)).toString(16).toUpperCase();return"000000".substring(a.length)+a},t.hex.rgb=function(i){const s=i.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!s)return[0,0,0];let a=s[0];s[0].length===3&&(a=a.split("").map(E=>E+E).join(""));const o=parseInt(a,16),d=o>>16&255,g=o>>8&255,b=o&255;return[d,g,b]},t.rgb.hcg=function(i){const s=i[0]/255,a=i[1]/255,o=i[2]/255,d=Math.max(Math.max(s,a),o),g=Math.min(Math.min(s,a),o),b=d-g;let E,S;return b<1?E=g/(1-b):E=0,b<=0?S=0:d===s?S=(a-o)/b%6:d===a?S=2+(o-s)/b:S=4+(s-a)/b,S/=6,S%=1,[S*360,b*100,E*100]},t.hsl.hcg=function(i){const s=i[1]/100,a=i[2]/100,o=a<.5?2*s*a:2*s*(1-a);let d=0;return o<1&&(d=(a-.5*o)/(1-o)),[i[0],o*100,d*100]},t.hsv.hcg=function(i){const s=i[1]/100,a=i[2]/100,o=s*a;let d=0;return o<1&&(d=(a-o)/(1-o)),[i[0],o*100,d*100]},t.hcg.rgb=function(i){const s=i[0]/360,a=i[1]/100,o=i[2]/100;if(a===0)return[o*255,o*255,o*255];const d=[0,0,0],g=s%1*6,b=g%1,E=1-b;let S=0;switch(Math.floor(g)){case 0:d[0]=1,d[1]=b,d[2]=0;break;case 1:d[0]=E,d[1]=1,d[2]=0;break;case 2:d[0]=0,d[1]=1,d[2]=b;break;case 3:d[0]=0,d[1]=E,d[2]=1;break;case 4:d[0]=b,d[1]=0,d[2]=1;break;default:d[0]=1,d[1]=0,d[2]=E}return S=(1-a)*o,[(a*d[0]+S)*255,(a*d[1]+S)*255,(a*d[2]+S)*255]},t.hcg.hsv=function(i){const s=i[1]/100,a=i[2]/100,o=s+a*(1-s);let d=0;return o>0&&(d=s/o),[i[0],d*100,o*100]},t.hcg.hsl=function(i){const s=i[1]/100,o=i[2]/100*(1-s)+.5*s;let d=0;return o>0&&o<.5?d=s/(2*o):o>=.5&&o<1&&(d=s/(2*(1-o))),[i[0],d*100,o*100]},t.hcg.hwb=function(i){const s=i[1]/100,a=i[2]/100,o=s+a*(1-s);return[i[0],(o-s)*100,(1-o)*100]},t.hwb.hcg=function(i){const s=i[1]/100,o=1-i[2]/100,d=o-s;let g=0;return d<1&&(g=(o-d)/(1-d)),[i[0],d*100,g*100]},t.apple.rgb=function(i){return[i[0]/65535*255,i[1]/65535*255,i[2]/65535*255]},t.rgb.apple=function(i){return[i[0]/255*65535,i[1]/255*65535,i[2]/255*65535]},t.gray.rgb=function(i){return[i[0]/100*255,i[0]/100*255,i[0]/100*255]},t.gray.hsl=function(i){return[0,0,i[0]]},t.gray.hsv=t.gray.hsl,t.gray.hwb=function(i){return[0,100,i[0]]},t.gray.cmyk=function(i){return[0,0,0,i[0]]},t.gray.lab=function(i){return[i[0],0,0]},t.gray.hex=function(i){const s=Math.round(i[0]/100*255)&255,o=((s<<16)+(s<<8)+s).toString(16).toUpperCase();return"000000".substring(o.length)+o},t.rgb.gray=function(i){return[(i[0]+i[1]+i[2])/3/255*100]},E4}var B4,e9;function nX(){if(e9)return B4;e9=1;const n=XU();function e(){const s={},a=Object.keys(n);for(let o=a.length,d=0;d<o;d++)s[a[d]]={distance:-1,parent:null};return s}function t(s){const a=e(),o=[s];for(a[s].distance=0;o.length;){const d=o.pop(),g=Object.keys(n[d]);for(let b=g.length,E=0;E<b;E++){const S=g[E],I=a[S];I.distance===-1&&(I.distance=a[d].distance+1,I.parent=d,o.unshift(S))}}return a}function r(s,a){return function(o){return a(s(o))}}function i(s,a){const o=[a[s].parent,s];let d=n[a[s].parent][s],g=a[s].parent;for(;a[g].parent;)o.unshift(a[g].parent),d=r(n[a[g].parent][g],d),g=a[g].parent;return d.conversion=o,d}return B4=function(s){const a=t(s),o={},d=Object.keys(a);for(let g=d.length,b=0;b<g;b++){const E=d[b];a[E].parent!==null&&(o[E]=i(E,a))}return o},B4}var O4,t9;function rX(){if(t9)return O4;t9=1;const n=XU(),e=nX(),t={},r=Object.keys(n);function i(a){const o=function(...d){const g=d[0];return g==null?g:(g.length>1&&(d=g),a(d))};return"conversion"in a&&(o.conversion=a.conversion),o}function s(a){const o=function(...d){const g=d[0];if(g==null)return g;g.length>1&&(d=g);const b=a(d);if(typeof b=="object")for(let E=b.length,S=0;S<E;S++)b[S]=Math.round(b[S]);return b};return"conversion"in a&&(o.conversion=a.conversion),o}return r.forEach(a=>{t[a]={},Object.defineProperty(t[a],"channels",{value:n[a].channels}),Object.defineProperty(t[a],"labels",{value:n[a].labels});const o=e(a);Object.keys(o).forEach(g=>{const b=o[g];t[a][g]=s(b),t[a][g].raw=i(b)})}),O4=t,O4}var I4,n9;function iX(){if(n9)return I4;n9=1;const n=tX(),e=rX(),t=["keyword","gray","hex"],r={};for(const S of Object.keys(e))r[[...e[S].labels].sort().join("")]=S;const i={};function s(S,I){if(!(this instanceof s))return new s(S,I);if(I&&I in t&&(I=null),I&&!(I in e))throw new Error("Unknown model: "+I);let P,z;if(S==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(S instanceof s)this.model=S.model,this.color=[...S.color],this.valpha=S.valpha;else if(typeof S=="string"){const j=n.get(S);if(j===null)throw new Error("Unable to parse color from string: "+S);this.model=j.model,z=e[this.model].channels,this.color=j.value.slice(0,z),this.valpha=typeof j.value[z]=="number"?j.value[z]:1}else if(S.length>0){this.model=I||"rgb",z=e[this.model].channels;const j=Array.prototype.slice.call(S,0,z);this.color=E(j,z),this.valpha=typeof S[z]=="number"?S[z]:1}else if(typeof S=="number")this.model="rgb",this.color=[S>>16&255,S>>8&255,S&255],this.valpha=1;else{this.valpha=1;const j=Object.keys(S);"alpha"in S&&(j.splice(j.indexOf("alpha"),1),this.valpha=typeof S.alpha=="number"?S.alpha:0);const q=j.sort().join("");if(!(q in r))throw new Error("Unable to parse color from object: "+JSON.stringify(S));this.model=r[q];const{labels:Y}=e[this.model],ie=[];for(P=0;P<Y.length;P++)ie.push(S[Y[P]]);this.color=E(ie)}if(i[this.model])for(z=e[this.model].channels,P=0;P<z;P++){const j=i[this.model][P];j&&(this.color[P]=j(this.color[P]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}s.prototype={toString(){return this.string()},toJSON(){return this[this.model]()},string(S){let I=this.model in n.to?this:this.rgb();I=I.round(typeof S=="number"?S:1);const P=I.valpha===1?I.color:[...I.color,this.valpha];return n.to[I.model](P)},percentString(S){const I=this.rgb().round(typeof S=="number"?S:1),P=I.valpha===1?I.color:[...I.color,this.valpha];return n.to.rgb.percent(P)},array(){return this.valpha===1?[...this.color]:[...this.color,this.valpha]},object(){const S={},{channels:I}=e[this.model],{labels:P}=e[this.model];for(let z=0;z<I;z++)S[P[z]]=this.color[z];return this.valpha!==1&&(S.alpha=this.valpha),S},unitArray(){const S=this.rgb().color;return S[0]/=255,S[1]/=255,S[2]/=255,this.valpha!==1&&S.push(this.valpha),S},unitObject(){const S=this.rgb().object();return S.r/=255,S.g/=255,S.b/=255,this.valpha!==1&&(S.alpha=this.valpha),S},round(S){return S=Math.max(S||0,0),new s([...this.color.map(o(S)),this.valpha],this.model)},alpha(S){return S!==void 0?new s([...this.color,Math.max(0,Math.min(1,S))],this.model):this.valpha},red:d("rgb",0,g(255)),green:d("rgb",1,g(255)),blue:d("rgb",2,g(255)),hue:d(["hsl","hsv","hsl","hwb","hcg"],0,S=>(S%360+360)%360),saturationl:d("hsl",1,g(100)),lightness:d("hsl",2,g(100)),saturationv:d("hsv",1,g(100)),value:d("hsv",2,g(100)),chroma:d("hcg",1,g(100)),gray:d("hcg",2,g(100)),white:d("hwb",1,g(100)),wblack:d("hwb",2,g(100)),cyan:d("cmyk",0,g(100)),magenta:d("cmyk",1,g(100)),yellow:d("cmyk",2,g(100)),black:d("cmyk",3,g(100)),x:d("xyz",0,g(95.047)),y:d("xyz",1,g(100)),z:d("xyz",2,g(108.833)),l:d("lab",0,g(100)),a:d("lab",1),b:d("lab",2),keyword(S){return S!==void 0?new s(S):e[this.model].keyword(this.color)},hex(S){return S!==void 0?new s(S):n.to.hex(this.rgb().round().color)},hexa(S){if(S!==void 0)return new s(S);const I=this.rgb().round().color;let P=Math.round(this.valpha*255).toString(16).toUpperCase();return P.length===1&&(P="0"+P),n.to.hex(I)+P},rgbNumber(){const S=this.rgb().color;return(S[0]&255)<<16|(S[1]&255)<<8|S[2]&255},luminosity(){const S=this.rgb().color,I=[];for(const[P,z]of S.entries()){const j=z/255;I[P]=j<=.04045?j/12.92:((j+.055)/1.055)**2.4}return .2126*I[0]+.7152*I[1]+.0722*I[2]},contrast(S){const I=this.luminosity(),P=S.luminosity();return I>P?(I+.05)/(P+.05):(P+.05)/(I+.05)},level(S){const I=this.contrast(S);return I>=7?"AAA":I>=4.5?"AA":""},isDark(){const S=this.rgb().color;return(S[0]*2126+S[1]*7152+S[2]*722)/1e4<128},isLight(){return!this.isDark()},negate(){const S=this.rgb();for(let I=0;I<3;I++)S.color[I]=255-S.color[I];return S},lighten(S){const I=this.hsl();return I.color[2]+=I.color[2]*S,I},darken(S){const I=this.hsl();return I.color[2]-=I.color[2]*S,I},saturate(S){const I=this.hsl();return I.color[1]+=I.color[1]*S,I},desaturate(S){const I=this.hsl();return I.color[1]-=I.color[1]*S,I},whiten(S){const I=this.hwb();return I.color[1]+=I.color[1]*S,I},blacken(S){const I=this.hwb();return I.color[2]+=I.color[2]*S,I},grayscale(){const S=this.rgb().color,I=S[0]*.3+S[1]*.59+S[2]*.11;return s.rgb(I,I,I)},fade(S){return this.alpha(this.valpha-this.valpha*S)},opaquer(S){return this.alpha(this.valpha+this.valpha*S)},rotate(S){const I=this.hsl();let P=I.color[0];return P=(P+S)%360,P=P<0?360+P:P,I.color[0]=P,I},mix(S,I){if(!S||!S.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof S);const P=S.rgb(),z=this.rgb(),j=I===void 0?.5:I,q=2*j-1,Y=P.alpha()-z.alpha(),ie=((q*Y===-1?q:(q+Y)/(1+q*Y))+1)/2,te=1-ie;return s.rgb(ie*P.red()+te*z.red(),ie*P.green()+te*z.green(),ie*P.blue()+te*z.blue(),P.alpha()*j+z.alpha()*(1-j))}};for(const S of Object.keys(e)){if(t.includes(S))continue;const{channels:I}=e[S];s.prototype[S]=function(...P){return this.model===S?new s(this):P.length>0?new s(P,S):new s([...b(e[this.model][S].raw(this.color)),this.valpha],S)},s[S]=function(...P){let z=P[0];return typeof z=="number"&&(z=E(P,I)),new s(z,S)}}function a(S,I){return Number(S.toFixed(I))}function o(S){return function(I){return a(I,S)}}function d(S,I,P){S=Array.isArray(S)?S:[S];for(const z of S)(i[z]||(i[z]=[]))[I]=P;return S=S[0],function(z){let j;return z!==void 0?(P&&(z=P(z)),j=this[S](),j.color[I]=z,j):(j=this[S]().color[I],P&&(j=P(j)),j)}}function g(S){return function(I){return Math.max(0,Math.min(S,I))}}function b(S){return Array.isArray(S)?S:[S]}function E(S,I){for(let P=0;P<I;P++)typeof S[P]!="number"&&(S[P]=0);return S}return I4=s,I4}var oX=iX();const W6=el(oX);function Vs(){var n="/home/runner/work/maputnik/maputnik/src/libs/zoomcontrol.ts",e="9dd3eea5f46b0cc48ff3173a7af02bc32aa63f10",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/zoomcontrol.ts",statementMap:{0:{start:{line:2,column:9},end:{line:2,column:15}},1:{start:{line:3,column:15},end:{line:3,column:21}},2:{start:{line:4,column:12},end:{line:4,column:16}},3:{start:{line:8,column:4},end:{line:8,column:20}},4:{start:{line:9,column:4},end:{line:9,column:52}},5:{start:{line:10,column:4},end:{line:10,column:93}},6:{start:{line:11,column:4},end:{line:11,column:70}},7:{start:{line:12,column:4},end:{line:12,column:27}},8:{start:{line:13,column:4},end:{line:13,column:29}},9:{start:{line:14,column:4},end:{line:14,column:27}},10:{start:{line:17,column:4},end:{line:17,column:60}},11:{start:{line:20,column:4},end:{line:22,column:6}},12:{start:{line:23,column:4},end:{line:23,column:57}},13:{start:{line:24,column:4},end:{line:24,column:27}},14:{start:{line:27,column:4},end:{line:27,column:57}},15:{start:{line:27,column:33},end:{line:27,column:55}},16:{start:{line:28,column:4},end:{line:28,column:57}},17:{start:{line:28,column:33},end:{line:28,column:55}},18:{start:{line:29,column:4},end:{line:29,column:58}},19:{start:{line:29,column:34},end:{line:29,column:56}},20:{start:{line:32,column:4},end:{line:32,column:60}},21:{start:{line:33,column:4},end:{line:33,column:23}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:16},end:{line:6,column:3}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:13},end:{line:15,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:16,column:2},end:{line:16,column:3}},loc:{start:{line:16,column:20},end:{line:18,column:3}},line:16},3:{name:"(anonymous_3)",decl:{start:{line:19,column:2},end:{line:19,column:3}},loc:{start:{line:19,column:18},end:{line:25,column:3}},line:19},4:{name:"(anonymous_4)",decl:{start:{line:26,column:2},end:{line:26,column:3}},loc:{start:{line:26,column:22},end:{line:30,column:3}},line:26},5:{name:"(anonymous_5)",decl:{start:{line:27,column:27},end:{line:27,column:28}},loc:{start:{line:27,column:33},end:{line:27,column:55}},line:27},6:{name:"(anonymous_6)",decl:{start:{line:28,column:27},end:{line:28,column:28}},loc:{start:{line:28,column:33},end:{line:28,column:55}},line:28},7:{name:"(anonymous_7)",decl:{start:{line:29,column:28},end:{line:29,column:29}},loc:{start:{line:29,column:34},end:{line:29,column:56}},line:29},8:{name:"(anonymous_8)",decl:{start:{line:31,column:2},end:{line:31,column:3}},loc:{start:{line:31,column:13},end:{line:34,column:3}},line:31}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/zoomcontrol.ts"],names:[],mappings:"AAEA,qBAAqB,YAAY;AAAA,EAC/B,OAAuB;AAAA,EACvB,aAAyC;AAAA,EACzC,UAAkC;AAAA,EAElC,cAAc;AAAA,EAAC;AAAA,EAEf,MAAM,KAAU;AACd,SAAK,OAAO;AACZ,SAAK,aAAa,SAAS,cAAc,KAAK;AAC9C,SAAK,WAAW,YAAY;AAC5B,SAAK,WAAW,aAAa,eAAe,oBAAoB;AAChE,SAAK,SAAS,OAAO;AACrB,SAAK,kBAAkB;AAEvB,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,kBAAkB;AAChB,SAAK,QAAS,YAAY,KAAK,KAAM,QAAQ,EAAE,QAAQ,CAAC;AAAA,EAC1D;AAAA,EAEA,SAAS,OAAe;AACtB,SAAK,WAAY,YAAY;AAAA,QACzB,KAAK;AAAA;AAET,SAAK,UAAU,KAAK,WAAY,cAAc,MAAM;AACpD,SAAK,gBAAgB;AAAA,EACvB;AAAA,EAEA,oBAAoB;AAClB,SAAK,KAAM,GAAG,UAAU,MAAM,KAAK,gBAAgB,CAAC;AACpD,SAAK,KAAM,GAAG,UAAU,MAAM,KAAK,gBAAgB,CAAC;AACpD,SAAK,KAAM,GAAG,WAAW,MAAM,KAAK,gBAAgB,CAAC;AAAA,EACvD;AAAA,EAEA,WAAW;AACT,SAAK,WAAY,WAAY,YAAY,KAAK,UAAW;AACzD,SAAK,OAAO;AAAA,EACd;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"9dd3eea5f46b0cc48ff3173a7af02bc32aa63f10"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Vs=function(){return a},a}Vs();class sX{constructor(){Pn(this,"_map",(Vs().s[0]++,void 0));Pn(this,"_container",(Vs().s[1]++,void 0));Pn(this,"_textEl",(Vs().s[2]++,null));Vs().f[0]++}onAdd(e){return Vs().f[1]++,Vs().s[3]++,this._map=e,Vs().s[4]++,this._container=document.createElement("div"),Vs().s[5]++,this._container.className="maplibregl-ctrl maplibregl-ctrl-group maplibregl-ctrl-zoom",Vs().s[6]++,this._container.setAttribute("data-wd-key","maplibre:ctrl-zoom"),Vs().s[7]++,this.setLabel("Zoom:"),Vs().s[8]++,this.addEventListeners(),Vs().s[9]++,this._container}updateZoomLevel(){Vs().f[2]++,Vs().s[10]++,this._textEl.innerHTML=this._map.getZoom().toFixed(2)}setLabel(e){Vs().f[3]++,Vs().s[11]++,this._container.innerHTML=`
      ${e} <span></span>
    `,Vs().s[12]++,this._textEl=this._container.querySelector("span"),Vs().s[13]++,this.updateZoomLevel()}addEventListeners(){Vs().f[4]++,Vs().s[14]++,this._map.on("render",()=>(Vs().f[5]++,Vs().s[15]++,this.updateZoomLevel())),Vs().s[16]++,this._map.on("zoomIn",()=>(Vs().f[6]++,Vs().s[17]++,this.updateZoomLevel())),Vs().s[18]++,this._map.on("zoomOut",()=>(Vs().f[7]++,Vs().s[19]++,this.updateZoomLevel()))}onRemove(){Vs().f[8]++,Vs().s[20]++,this._container.parentNode.removeChild(this._container),Vs().s[21]++,this._map=void 0}}function G6(n,e,t){const r={id:[e,t,"circle"].join("_"),source:e,type:"circle",paint:{"circle-color":n,"circle-radius":2},filter:["==","$type","Point"]};return t&&(r["source-layer"]=t),r}function Q6(n,e,t,r){const i={id:[t,r,"polygon"].join("_"),source:t,type:"fill",paint:{"fill-color":n,"fill-antialias":!0,"fill-outline-color":n},filter:["==","$type","Polygon"]};return r&&(i["source-layer"]=r),i}function q6(n,e,t){const r={id:[e,t,"line"].join("_"),source:e,layout:{"line-join":"round","line-cap":"round"},type:"line",paint:{"line-color":n},filter:["==","$type","LineString"]};return t&&(r["source-layer"]=t),r}function aX(n,e){const t=[],r=[],i=[];function s(a){return{circle:e(a,.8),line:e(a,.6),polygon:e(a,.3),polygonOutline:e(a,.6),default:e(a,1)}}return Object.keys(n).forEach(a=>{const o=n[a];if(!o||o.length===0){const d=s(a);r.push(G6(d.circle,a)),i.push(q6(d.line,a)),t.push(Q6(d.polygon,d.polygonOutline,a))}else o.forEach(d=>{const g=s(d);r.push(G6(g.circle,a,d)),i.push(q6(g.line,a,d)),t.push(Q6(g.polygon,g.polygonOutline,a,d))})}),t.concat(i).concat(r)}function lX(n,e,t){t=Object.assign({backgroundColor:"#fff"},t);const r={id:"background",type:"background",paint:{"background-color":t.backgroundColor}},i={};return Object.keys(n.sources).forEach(s=>{const a=n.sources[s];(a.type==="vector"||a.type==="geojson")&&(i[s]=a)}),Object.assign(n,{layers:[r].concat(e),sources:i})}const k4={polygonLayer:Q6,lineLayer:q6,circleLayer:G6,generateInspectStyle:lX,generateColoredLayers:aX};function bo(){var n="/home/runner/work/maputnik/maputnik/src/libs/highlight.ts",e="aec0f701e803624fae461cc89b5fc887ff556587",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/highlight.ts",statementMap:{0:{start:{line:4,column:2},end:{line:8,column:3}},1:{start:{line:5,column:4},end:{line:5,column:33}},2:{start:{line:6,column:9},end:{line:8,column:3}},3:{start:{line:7,column:4},end:{line:7,column:30}},4:{start:{line:9,column:2},end:{line:13,column:3}},5:{start:{line:10,column:4},end:{line:10,column:28}},6:{start:{line:12,column:4},end:{line:12,column:23}},7:{start:{line:14,column:2},end:{line:14,column:29}},8:{start:{line:15,column:2},end:{line:15,column:11}},9:{start:{line:18,column:2},end:{line:18,column:84}},10:{start:{line:18,column:72},end:{line:18,column:84}},11:{start:{line:19,column:24},end:{line:19,column:51}},12:{start:{line:20,column:16},end:{line:20,column:52}},13:{start:{line:21,column:2},end:{line:23,column:3}},14:{start:{line:22,column:4},end:{line:22,column:104}},15:{start:{line:24,column:2},end:{line:26,column:3}},16:{start:{line:25,column:4},end:{line:25,column:96}},17:{start:{line:27,column:2},end:{line:29,column:3}},18:{start:{line:28,column:4},end:{line:28,column:94}},19:{start:{line:30,column:2},end:{line:30,column:14}}},fnMap:{0:{name:"changeLayer",decl:{start:{line:3,column:9},end:{line:3,column:20}},loc:{start:{line:3,column:31},end:{line:16,column:1}},line:3},1:{name:"colorHighlightedLayer",decl:{start:{line:17,column:16},end:{line:17,column:37}},loc:{start:{line:17,column:45},end:{line:31,column:1}},line:17}},branchMap:{0:{loc:{start:{line:4,column:2},end:{line:8,column:3}},type:"if",locations:[{start:{line:4,column:2},end:{line:8,column:3}},{start:{line:6,column:9},end:{line:8,column:3}}],line:4},1:{loc:{start:{line:6,column:9},end:{line:8,column:3}},type:"if",locations:[{start:{line:6,column:9},end:{line:8,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:6},2:{loc:{start:{line:9,column:2},end:{line:13,column:3}},type:"if",locations:[{start:{line:9,column:2},end:{line:13,column:3}},{start:{line:11,column:9},end:{line:13,column:3}}],line:9},3:{loc:{start:{line:18,column:2},end:{line:18,column:84}},type:"if",locations:[{start:{line:18,column:2},end:{line:18,column:84}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:18},4:{loc:{start:{line:18,column:6},end:{line:18,column:70}},type:"binary-expr",locations:[{start:{line:18,column:6},end:{line:18,column:12}},{start:{line:18,column:16},end:{line:18,column:43}},{start:{line:18,column:47},end:{line:18,column:70}}],line:18},5:{loc:{start:{line:19,column:24},end:{line:19,column:51}},type:"binary-expr",locations:[{start:{line:19,column:24},end:{line:19,column:45}},{start:{line:19,column:49},end:{line:19,column:51}}],line:19},6:{loc:{start:{line:21,column:2},end:{line:23,column:3}},type:"if",locations:[{start:{line:21,column:2},end:{line:23,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:21},7:{loc:{start:{line:21,column:6},end:{line:21,column:62}},type:"binary-expr",locations:[{start:{line:21,column:6},end:{line:21,column:27}},{start:{line:21,column:31},end:{line:21,column:62}}],line:21},8:{loc:{start:{line:24,column:2},end:{line:26,column:3}},type:"if",locations:[{start:{line:24,column:2},end:{line:26,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:24},9:{loc:{start:{line:24,column:6},end:{line:24,column:56}},type:"binary-expr",locations:[{start:{line:24,column:6},end:{line:24,column:29}},{start:{line:24,column:33},end:{line:24,column:56}}],line:24},10:{loc:{start:{line:27,column:2},end:{line:29,column:3}},type:"if",locations:[{start:{line:27,column:2},end:{line:29,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:27}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0},f:{0:0,1:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/highlight.ts"],names:[],mappings:"AAAA,OAAO,cAAc;AACrB,OAAO,YAAY;AAKnB,SAAS,YAAY,GAAqB,OAA2B;AACnE,MAAG,EAAE,SAAS,UAAU;AACtB,MAAE,MAAO,eAAe,IAAI;AAAA,EAC9B,WAAU,EAAE,SAAS,QAAQ;AAC3B,MAAE,MAAO,YAAY,IAAI;AAAA,EAC3B;AAEA,MAAG,YAAY,OAAO;AACpB,MAAE,SAAS,MAAM;AAAA,EACnB,OAAO;AACL,WAAO,EAAE,QAAQ;AAAA,EACnB;AACA,IAAE,KAAK,EAAE,KAAK;AACd,SAAO;AACT;AAEO,gBAAS,sBAAsB,OAAqD;AACzF,MAAG,CAAC,SAAS,MAAM,SAAS,gBAAgB,MAAM,SAAS,SAAU,QAAO;AAE5E,QAAM,gBAAgB,MAAM,cAAc,KAAK;AAC/C,QAAM,QAAQ,OAAO,YAAY,eAAe,CAAC;AAEjD,MAAG,MAAM,SAAS,UAAU,MAAM,SAAS,kBAAkB;AAC3D,WAAO,YAAY,SAAS,aAAa,OAAO,OAAO,MAAM,QAAQ,MAAM,cAAc,CAAC,GAAG,KAAK;AAAA,EACpG;AAEA,MAAG,MAAM,SAAS,YAAY,MAAM,SAAS,UAAU;AACrD,WAAO,YAAY,SAAS,YAAY,OAAO,MAAM,QAAQ,MAAM,cAAc,CAAC,GAAG,KAAK;AAAA,EAC5F;AAEA,MAAG,MAAM,SAAS,QAAQ;AACxB,WAAO,YAAY,SAAS,UAAU,OAAO,MAAM,QAAQ,MAAM,cAAc,CAAC,GAAG,KAAK;AAAA,EAC1F;AAEA,SAAO;AACT;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"aec0f701e803624fae461cc89b5fc887ff556587"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return bo=function(){return a},a}bo();function T4(n,e){return bo().f[0]++,bo().s[0]++,n.type==="circle"?(bo().b[0][0]++,bo().s[1]++,n.paint["circle-radius"]=3):(bo().b[0][1]++,bo().s[2]++,n.type==="line"?(bo().b[1][0]++,bo().s[3]++,n.paint["line-width"]=2):bo().b[1][1]++),bo().s[4]++,"filter"in e?(bo().b[2][0]++,bo().s[5]++,n.filter=e.filter):(bo().b[2][1]++,bo().s[6]++,delete n.filter),bo().s[7]++,n.id=n.id+"_highlight",bo().s[8]++,n}function uX(n){if(bo().f[1]++,bo().s[9]++,bo().b[4][0]++,!n||(bo().b[4][1]++,n.type==="background")||(bo().b[4][2]++,n.type==="raster"))return bo().b[3][0]++,bo().s[10]++,null;bo().b[3][1]++;const e=(bo().s[11]++,bo().b[5][0]++,n["source-layer"]||(bo().b[5][1]++,"")),t=(bo().s[12]++,YU.brightColor(e,1));return bo().s[13]++,bo().b[7][0]++,n.type==="fill"||(bo().b[7][1]++,n.type==="fill-extrusion")?(bo().b[6][0]++,bo().s[14]++,T4(k4.polygonLayer(t,t,n.source,n["source-layer"]),n)):(bo().b[6][1]++,bo().s[15]++,bo().b[9][0]++,n.type==="symbol"||(bo().b[9][1]++,n.type==="circle")?(bo().b[8][0]++,bo().s[16]++,T4(k4.circleLayer(t,n.source,n["source-layer"]),n)):(bo().b[8][1]++,bo().s[17]++,n.type==="line"?(bo().b[10][0]++,bo().s[18]++,T4(k4.lineLayer(t,n.source,n["source-layer"]),n)):(bo().b[10][1]++,bo().s[19]++,null)))}function h8(){var n="/home/runner/work/maputnik/maputnik/src/libs/maplibre-rtl.ts",e="a9dc98f82c73787713de0672aff7a601bfeb069d",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/maplibre-rtl.ts",statementMap:{0:{start:{line:2,column:0},end:{line:2,column:115}}},fnMap:{},branchMap:{},s:{0:0},f:{},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/maplibre-rtl.ts"],names:[],mappings:"AAAA,OAAO,gBAAgB;AAEvB,WAAW,iBAAiB,gFAAgF,KAAK;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a9dc98f82c73787713de0672aff7a601bfeb069d"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return h8=function(){return a},a}h8();h8().s[0]++;Z1.setRTLTextPlugin("https://unpkg.com/@mapbox/mapbox-gl-rtl-text@0.2.3/mapbox-gl-rtl-text.min.js",!1);/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function P4(n,e,t,r){return new(t||(t=Promise))(function(i,s){function a(g){try{d(r.next(g))}catch(b){s(b)}}function o(g){try{d(r.throw(g))}catch(b){s(b)}}function d(g){g.done?i(g.value):new t(function(b){b(g.value)}).then(a,o)}d((r=r.apply(n,e||[])).next())})}var sb=typeof globalThis<"u"?globalThis:typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{};function kx(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var K4,r9;function JU(){if(r9)return K4;r9=1,K4=e;var n=Object.prototype.hasOwnProperty;function e(){for(var t={},r=0;r<arguments.length;r++){var i=arguments[r];for(var s in i)n.call(i,s)&&(t[s]=i[s])}return t}return K4}var D4={exports:{}},i9;function AX(){return i9||(i9=1,function(n,e){(function(){var t={};n.exports=t,t.simpleFilter=function(r,i){return i.filter(function(s){return t.test(r,s)})},t.test=function(r,i){return t.match(r,i)!==null},t.match=function(r,i,s){s=s||{};var a=0,o=[],d=i.length,g=0,b=0,E=s.pre||"",S=s.post||"",I=s.caseSensitive&&i||i.toLowerCase(),P;r=s.caseSensitive&&r||r.toLowerCase();for(var z=0;z<d;z++)P=i[z],I[z]===r[a]?(P=E+P+S,a+=1,b+=1+b):b=0,g+=b,o[o.length]=P;return a===r.length?(g=I===r?1/0:g,{rendered:o.join(""),score:g}):null},t.filter=function(r,i,s){return!i||i.length===0?[]:typeof r!="string"?i:(s=s||{},i.reduce(function(a,o,d,g){var b=o;s.extract&&(b=s.extract(o));var E=t.match(r,b,s);return E!=null&&(a[a.length]={string:E.rendered,score:E.score,index:d,original:o}),a},[]).sort(function(a,o){var d=o.score-a.score;return d||a.index-o.index}))}})()}(D4)),D4.exports}var R4,o9;function cX(){if(o9)return R4;o9=1;var n=function(e){return this.component=e,this.items=[],this.active=e.options.noInitialSelection?-1:0,this.wrapper=document.createElement("div"),this.wrapper.className="suggestions-wrapper",this.element=document.createElement("ul"),this.element.className="suggestions",this.wrapper.appendChild(this.element),this.selectingListItem=!1,e.el.parentNode.insertBefore(this.wrapper,e.el.nextSibling),this};return n.prototype.show=function(){this.element.style.display="block"},n.prototype.hide=function(){this.element.style.display="none"},n.prototype.add=function(e){this.items.push(e)},n.prototype.clear=function(){this.items=[],this.active=this.component.options.noInitialSelection?-1:0},n.prototype.isEmpty=function(){return!this.items.length},n.prototype.isVisible=function(){return this.element.style.display==="block"},n.prototype.draw=function(){if(this.element.innerHTML="",this.items.length===0){this.hide();return}for(var e=0;e<this.items.length;e++)this.drawItem(this.items[e],this.active===e);this.show()},n.prototype.drawItem=function(e,t){var r=document.createElement("li"),i=document.createElement("a");t&&(r.className+=" active"),i.innerHTML=e.string,r.appendChild(i),this.element.appendChild(r),r.addEventListener("mousedown",(function(){this.selectingListItem=!0}).bind(this)),r.addEventListener("mouseup",(function(){this.handleMouseUp.call(this,e)}).bind(this))},n.prototype.handleMouseUp=function(e){this.selectingListItem=!1,this.component.value(e.original),this.clear(),this.draw()},n.prototype.move=function(e){this.active=e,this.draw()},n.prototype.previous=function(){this.move(this.active<=0?this.items.length-1:this.active-1)},n.prototype.next=function(){this.move(this.active>=this.items.length-1?0:this.active+1)},n.prototype.drawError=function(e){var t=document.createElement("li");t.innerHTML=e,this.element.appendChild(t),this.show()},R4=n,R4}var F4,s9;function dX(){if(s9)return F4;s9=1;var n=JU(),e=AX(),t=cX(),r=function(i,s,a){return a=a||{},this.options=n({minLength:2,limit:5,filter:!0,hideOnBlur:!0,noInitialSelection:!0},a),this.el=i,this.data=s||[],this.list=new t(this),this.query="",this.selected=null,this.list.draw(),this.el.addEventListener("keyup",(function(o){this.handleKeyUp(o.keyCode,o)}).bind(this),!1),this.el.addEventListener("keydown",(function(o){this.handleKeyDown(o)}).bind(this)),this.el.addEventListener("focus",(function(){this.handleFocus()}).bind(this)),this.el.addEventListener("blur",(function(){this.handleBlur()}).bind(this)),this.el.addEventListener("paste",(function(o){this.handlePaste(o)}).bind(this)),this.render=this.options.render?this.options.render.bind(this):this.render.bind(this),this.getItemValue=this.options.getItemValue?this.options.getItemValue.bind(this):this.getItemValue.bind(this),this};return r.prototype.handleKeyUp=function(i,s){if(!(i===40||i===38||i===27||i===9)){if(i===13){this.list.items[this.list.active]&&(this.list.handleMouseUp(this.list.items[this.list.active]),s.stopPropagation());return}this.handleInputChange(this.el.value)}},r.prototype.handleKeyDown=function(i){switch(i.keyCode){case 13:this.list.active>=0&&(this.list.selectingListItem=!0);break;case 9:this.list.isEmpty()||(this.list.isVisible()&&i.preventDefault(),this.value(this.list.active>=0?this.list.items[this.list.active].original:null),this.list.hide());break;case 27:this.list.isEmpty()||this.list.hide();break;case 38:this.list.previous();break;case 40:this.list.next();break}},r.prototype.handleBlur=function(){!this.list.selectingListItem&&this.options.hideOnBlur&&this.list.hide()},r.prototype.handlePaste=function(i){if(i.clipboardData)this.handleInputChange(i.clipboardData.getData("Text"));else{var s=this;setTimeout(function(){s.handleInputChange(i.target.value)},100)}},r.prototype.handleInputChange=function(i){if(this.query=this.normalize(i),this.list.clear(),this.query.length<this.options.minLength){this.list.draw();return}this.getCandidates((function(s){for(var a=0;a<s.length&&(this.list.add(s[a]),a!==this.options.limit-1);a++);this.list.draw()}).bind(this))},r.prototype.handleFocus=function(){this.list.isEmpty()||this.list.show(),this.list.selectingListItem=!1},r.prototype.update=function(i){this.data=i,this.handleKeyUp()},r.prototype.clear=function(){this.data=[],this.list.clear()},r.prototype.normalize=function(i){return i=i.toLowerCase(),i},r.prototype.match=function(i,s){return i.indexOf(s)>-1},r.prototype.value=function(i){if(this.selected=i,this.el.value=this.getItemValue(i||{place_name:this.query}),document.createEvent){var s=document.createEvent("HTMLEvents");s.initEvent("change",!0,!1),this.el.dispatchEvent(s)}else this.el.fireEvent("onchange")},r.prototype.getCandidates=function(i){var s={pre:"<strong>",post:"</strong>",extract:(function(o){return this.getItemValue(o)}).bind(this)},a;this.options.filter?(a=e.filter(this.query,this.data,s),a=a.map((function(o){return{original:o.original,string:this.render(o.original,o.string)}}).bind(this))):a=this.data.map((function(o){var d=this.render(o);return{original:o,string:d}}).bind(this)),i(a)},r.prototype.getItemValue=function(i){return i},r.prototype.render=function(i,s){if(s)return s;for(var a=i.original?this.getItemValue(i.original):this.getItemValue(i),o=this.normalize(a),d=o.lastIndexOf(this.query);d>-1;){var g=d+this.query.length;a=a.slice(0,d)+"<strong>"+a.slice(d,g)+"</strong>"+a.slice(g),d=o.slice(0,d).lastIndexOf(this.query)}return a},r.prototype.renderError=function(i){this.list.drawError(i)},F4=r,F4}var L4,a9;function hX(){if(a9)return L4;a9=1;var n=dX();return L4=n,typeof window<"u"&&(window.Suggestions=n),L4}var fX=hX(),pX=kx(fX),qb={exports:{}},mX=qb.exports,l9;function gX(){return l9||(l9=1,function(n){(function(e,t,r){n.exports?n.exports=r():e[t]=r()})(mX,"subtag",function(){var e="",t=/^([a-zA-Z]{2,3})(?:[_-]+([a-zA-Z]{3})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{4})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{2}|[0-9]{3})(?=$|[_-]+))?/;function r(d){return d.match(t)||[]}function i(d){return r(d).filter(function(g,b){return g&&b})}function s(d){return d=r(d),{language:d[1]||e,extlang:d[2]||e,script:d[3]||e,region:d[4]||e}}function a(d,g,b){Object.defineProperty(d,g,{value:b,enumerable:!0})}function o(d,g,b){function E(S){return r(S)[d]||e}a(E,"pattern",g),a(s,b,E)}return o(1,/^[a-zA-Z]{2,3}$/,"language"),o(2,/^[a-zA-Z]{3}$/,"extlang"),o(3,/^[a-zA-Z]{4}$/,"script"),o(4,/^[a-zA-Z]{2}$|^[0-9]{3}$/,"region"),a(s,"split",i),s})}(qb)),qb.exports}var yX=gX(),vX=kx(yX),U4,u9;function CX(){if(u9)return U4;u9=1;var n="Expected a function",e=NaN,t="[object Symbol]",r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,a=/^0o[0-7]+$/i,o=parseInt,d=typeof sb=="object"&&sb&&sb.Object===Object&&sb,g=typeof self=="object"&&self&&self.Object===Object&&self,b=d||g||Function("return this")(),E=Object.prototype,S=E.toString,I=Math.max,P=Math.min,z=function(){return b.Date.now()};function j(V,ne,G){var oe,he,pe,Ee,me,Se,De=0,be=!1,at=!1,Ze=!0;if(typeof V!="function")throw new TypeError(n);ne=te(ne)||0,q(G)&&(be=!!G.leading,at="maxWait"in G,pe=at?I(te(G.maxWait)||0,ne):pe,Ze="trailing"in G?!!G.trailing:Ze);function Je(Kt){var Ue=oe,Pe=he;return oe=he=void 0,De=Kt,Ee=V.apply(Pe,Ue),Ee}function We(Kt){return De=Kt,me=setTimeout(He,ne),be?Je(Kt):Ee}function Me(Kt){var Ue=Kt-Se,Pe=Kt-De,Be=ne-Ue;return at?P(Be,pe-Pe):Be}function Fe(Kt){var Ue=Kt-Se,Pe=Kt-De;return Se===void 0||Ue>=ne||Ue<0||at&&Pe>=pe}function He(){var Kt=z();if(Fe(Kt))return bt(Kt);me=setTimeout(He,Me(Kt))}function bt(Kt){return me=void 0,Ze&&oe?Je(Kt):(oe=he=void 0,Ee)}function Yt(){me!==void 0&&clearTimeout(me),De=0,oe=Se=he=me=void 0}function gt(){return me===void 0?Ee:bt(z())}function Lt(){var Kt=z(),Ue=Fe(Kt);if(oe=arguments,he=this,Se=Kt,Ue){if(me===void 0)return We(Se);if(at)return me=setTimeout(He,ne),Je(Se)}return me===void 0&&(me=setTimeout(He,ne)),Ee}return Lt.cancel=Yt,Lt.flush=gt,Lt}function q(V){var ne=typeof V;return!!V&&(ne=="object"||ne=="function")}function Y(V){return!!V&&typeof V=="object"}function ie(V){return typeof V=="symbol"||Y(V)&&S.call(V)==t}function te(V){if(typeof V=="number")return V;if(ie(V))return e;if(q(V)){var ne=typeof V.valueOf=="function"?V.valueOf():V;V=q(ne)?ne+"":ne}if(typeof V!="string")return V===0?V:+V;V=V.replace(r,"");var G=s.test(V);return G||a.test(V)?o(V.slice(2),G?2:8):i.test(V)?e:+V}return U4=j,U4}var _X=CX(),bX=kx(_X),xX=JU(),Ap=kx(xX),ab={exports:{}},A9;function wX(){if(A9)return ab.exports;A9=1;var n=typeof Reflect=="object"?Reflect:null,e=n&&typeof n.apply=="function"?n.apply:function(V,ne,G){return Function.prototype.apply.call(V,ne,G)},t;n&&typeof n.ownKeys=="function"?t=n.ownKeys:Object.getOwnPropertySymbols?t=function(V){return Object.getOwnPropertyNames(V).concat(Object.getOwnPropertySymbols(V))}:t=function(V){return Object.getOwnPropertyNames(V)};function r(te){console&&console.warn&&console.warn(te)}var i=Number.isNaN||function(V){return V!==V};function s(){s.init.call(this)}ab.exports=s,ab.exports.once=q,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var a=10;function o(te){if(typeof te!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof te)}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(te){if(typeof te!="number"||te<0||i(te))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+te+".");a=te}}),s.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(V){if(typeof V!="number"||V<0||i(V))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+V+".");return this._maxListeners=V,this};function d(te){return te._maxListeners===void 0?s.defaultMaxListeners:te._maxListeners}s.prototype.getMaxListeners=function(){return d(this)},s.prototype.emit=function(V){for(var ne=[],G=1;G<arguments.length;G++)ne.push(arguments[G]);var oe=V==="error",he=this._events;if(he!==void 0)oe=oe&&he.error===void 0;else if(!oe)return!1;if(oe){var pe;if(ne.length>0&&(pe=ne[0]),pe instanceof Error)throw pe;var Ee=new Error("Unhandled error."+(pe?" ("+pe.message+")":""));throw Ee.context=pe,Ee}var me=he[V];if(me===void 0)return!1;if(typeof me=="function")e(me,this,ne);else for(var Se=me.length,De=P(me,Se),G=0;G<Se;++G)e(De[G],this,ne);return!0};function g(te,V,ne,G){var oe,he,pe;if(o(ne),he=te._events,he===void 0?(he=te._events=Object.create(null),te._eventsCount=0):(he.newListener!==void 0&&(te.emit("newListener",V,ne.listener?ne.listener:ne),he=te._events),pe=he[V]),pe===void 0)pe=he[V]=ne,++te._eventsCount;else if(typeof pe=="function"?pe=he[V]=G?[ne,pe]:[pe,ne]:G?pe.unshift(ne):pe.push(ne),oe=d(te),oe>0&&pe.length>oe&&!pe.warned){pe.warned=!0;var Ee=new Error("Possible EventEmitter memory leak detected. "+pe.length+" "+String(V)+" listeners added. Use emitter.setMaxListeners() to increase limit");Ee.name="MaxListenersExceededWarning",Ee.emitter=te,Ee.type=V,Ee.count=pe.length,r(Ee)}return te}s.prototype.addListener=function(V,ne){return g(this,V,ne,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(V,ne){return g(this,V,ne,!0)};function b(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function E(te,V,ne){var G={fired:!1,wrapFn:void 0,target:te,type:V,listener:ne},oe=b.bind(G);return oe.listener=ne,G.wrapFn=oe,oe}s.prototype.once=function(V,ne){return o(ne),this.on(V,E(this,V,ne)),this},s.prototype.prependOnceListener=function(V,ne){return o(ne),this.prependListener(V,E(this,V,ne)),this},s.prototype.removeListener=function(V,ne){var G,oe,he,pe,Ee;if(o(ne),oe=this._events,oe===void 0)return this;if(G=oe[V],G===void 0)return this;if(G===ne||G.listener===ne)--this._eventsCount===0?this._events=Object.create(null):(delete oe[V],oe.removeListener&&this.emit("removeListener",V,G.listener||ne));else if(typeof G!="function"){for(he=-1,pe=G.length-1;pe>=0;pe--)if(G[pe]===ne||G[pe].listener===ne){Ee=G[pe].listener,he=pe;break}if(he<0)return this;he===0?G.shift():z(G,he),G.length===1&&(oe[V]=G[0]),oe.removeListener!==void 0&&this.emit("removeListener",V,Ee||ne)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(V){var ne,G,oe;if(G=this._events,G===void 0)return this;if(G.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):G[V]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete G[V]),this;if(arguments.length===0){var he=Object.keys(G),pe;for(oe=0;oe<he.length;++oe)pe=he[oe],pe!=="removeListener"&&this.removeAllListeners(pe);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(ne=G[V],typeof ne=="function")this.removeListener(V,ne);else if(ne!==void 0)for(oe=ne.length-1;oe>=0;oe--)this.removeListener(V,ne[oe]);return this};function S(te,V,ne){var G=te._events;if(G===void 0)return[];var oe=G[V];return oe===void 0?[]:typeof oe=="function"?ne?[oe.listener||oe]:[oe]:ne?j(oe):P(oe,oe.length)}s.prototype.listeners=function(V){return S(this,V,!0)},s.prototype.rawListeners=function(V){return S(this,V,!1)},s.listenerCount=function(te,V){return typeof te.listenerCount=="function"?te.listenerCount(V):I.call(te,V)},s.prototype.listenerCount=I;function I(te){var V=this._events;if(V!==void 0){var ne=V[te];if(typeof ne=="function")return 1;if(ne!==void 0)return ne.length}return 0}s.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]};function P(te,V){for(var ne=new Array(V),G=0;G<V;++G)ne[G]=te[G];return ne}function z(te,V){for(;V+1<te.length;V++)te[V]=te[V+1];te.pop()}function j(te){for(var V=new Array(te.length),ne=0;ne<V.length;++ne)V[ne]=te[ne].listener||te[ne];return V}function q(te,V){return new Promise(function(ne,G){function oe(pe){te.removeListener(V,he),G(pe)}function he(){typeof te.removeListener=="function"&&te.removeListener("error",oe),ne([].slice.call(arguments))}ie(te,V,he,{once:!0}),V!=="error"&&Y(te,oe,{once:!0})})}function Y(te,V,ne){typeof te.on=="function"&&ie(te,"error",V,ne)}function ie(te,V,ne,G){if(typeof te.on=="function")G.once?te.once(V,ne):te.on(V,ne);else if(typeof te.addEventListener=="function")te.addEventListener(V,function oe(he){G.once&&te.removeEventListener(V,oe),ne(he)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof te)}return ab.exports}var MX=wX();const c9={fr:{name:"France",bbox:[[-4.59235,41.380007],[9.560016,51.148506]]},us:{name:"United States",bbox:[[-171.791111,18.91619],[-66.96466,71.357764]]},ru:{name:"Russia",bbox:[[19.66064,41.151416],[190.10042,81.2504]]},ca:{name:"Canada",bbox:[[-140.99778,41.675105],[-52.648099,83.23324]]}},SX={de:"Suche",it:"Ricerca",en:"Search",nl:"Zoeken",fr:"Chercher",ca:"Cerca",he:"",ja:"",lv:"Meklt",pt:"Procurar",sr:"",zh:"",cs:"Vyhledvn",hu:"Keress",ka:"",nb:"Ske",sk:"Vyhadvanie",th:"",fi:"Hae",is:"Leita",ko:"",pl:"Szukaj",sl:"Iskanje",fa:"",ru:""},EX=/(-?\d+\.?\d*)[, ]+(-?\d+\.?\d*)[ ]*$/;class BX{constructor(e,t){this.options={zoom:16,flyTo:!0,trackProximity:!0,showResultsWhileTyping:!1,minLength:2,reverseGeocode:!1,limit:5,enableEventLogging:!0,marker:!0,popup:!1,maplibregl:void 0,collapsed:!1,clearAndBlurOnEsc:!1,clearOnBlur:!1,proximityMinZoom:9,getItemValue:r=>r.text!==void 0?r.text:r.place_name,render:function(r){if(!r.geometry){const s=r.text,a=s.toLowerCase().indexOf(this.query.toLowerCase()),o=this.query.length,d=s.substring(0,a),g=s.substring(a,a+o),b=s.substring(a+o);return'<div class="maplibregl-ctrl-geocoder--suggestion"><svg class="maplibregl-ctrl-geocoder--suggestion-icon" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M22.8702 20.1258H21.4248L20.9125 19.6318C22.7055 17.546 23.785 14.8382 23.785 11.8925C23.785 5.32419 18.4608 0 11.8925 0C5.32419 0 0 5.32419 0 11.8925C0 18.4608 5.32419 23.785 11.8925 23.785C14.8382 23.785 17.546 22.7055 19.6318 20.9125L20.1258 21.4248V22.8702L29.2739 32L32 29.2739L22.8702 20.1258ZM11.8925 20.1258C7.33676 20.1258 3.65923 16.4483 3.65923 11.8925C3.65923 7.33676 7.33676 3.65923 11.8925 3.65923C16.4483 3.65923 20.1258 7.33676 20.1258 11.8925C20.1258 16.4483 16.4483 20.1258 11.8925 20.1258Z" fill="#687078"/></svg><div class="maplibregl-ctrl-geocoder--suggestion-info"><div class="maplibregl-ctrl-geocoder--suggestion-title">'+d+'<span class="maplibregl-ctrl-geocoder--suggestion-match">'+g+"</span>"+b+"</div></div></div>"}const i=r.place_name.split(",");return'<div class="maplibregl-ctrl-geocoder--result"><svg class="maplibregl-ctrl-geocoder--result-icon" viewBox="0 0 24 32" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 0C5.36571 0 0 5.38676 0 12.0471C0 21.0824 12 32 12 32C12 32 24 21.0824 24 12.0471C24 5.38676 18.6343 0 12 0ZM12 16.3496C9.63428 16.3496 7.71429 14.4221 7.71429 12.0471C7.71429 9.67207 9.63428 7.74454 12 7.74454C14.3657 7.74454 16.2857 9.67207 16.2857 12.0471C16.2857 14.4221 14.3657 16.3496 12 16.3496Z" fill="#687078"/></svg><div><div class="maplibregl-ctrl-geocoder--result-title">'+i[0]+'</div><div class="maplibregl-ctrl-geocoder--result-address">'+i.splice(1,i.length).join(",")+"</div></div></div>"},popupRender:r=>{const i=r.place_name.split(",");return'<div class="maplibregl-ctrl-geocoder--suggestion popup-suggestion"><div class="maplibregl-ctrl-geocoder--suggestion-title popup-suggestion-title">'+i[0]+'</div><div class="maplibregl-ctrl-geocoder--suggestion-address popup-suggestion-address">'+i.splice(1,i.length).join(",")+"</div></div>"},showResultMarkers:!0,debounceSearch:200},this._eventEmitter=new MX.EventEmitter,this.options=Ap({},this.options,t),this.fresh=!0,this.lastSelected=null,this.geocoderApi=e}addTo(e){function t(r,i){if(!document.body.contains(i))throw new Error("Element provided to #addTo() exists, but is not in the DOM");const s=r.onAdd();i.appendChild(s)}if(e instanceof HTMLElement)t(this,e);else if(typeof e=="string"){const r=document.querySelectorAll(e);if(r.length===0)throw new Error("Element "+e+"not found.");if(r.length>1)throw new Error("Geocoder can only be added to a single html element");t(this,r[0])}else if("addControl"in e)e.addControl(this);else throw new Error("Error: addTo must be a maplibre-gl-js map, an html element, or a CSS selector query for a single html element")}onAdd(e){if(e&&typeof e!="string"&&(this._map=e),this.setLanguage(),this.options.localGeocoderOnly&&!this.options.localGeocoder)throw new Error("A localGeocoder function must be specified to use localGeocoderOnly mode");this._onChange=this._onChange.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onPaste=this._onPaste.bind(this),this._onBlur=this._onBlur.bind(this),this._showButton=this._showButton.bind(this),this._hideButton=this._hideButton.bind(this),this._onQueryResult=this._onQueryResult.bind(this),this.clear=this.clear.bind(this),this._updateProximity=this._updateProximity.bind(this),this._collapse=this._collapse.bind(this),this._unCollapse=this._unCollapse.bind(this),this._clear=this._clear.bind(this),this._clearOnBlur=this._clearOnBlur.bind(this);const t=this.container=document.createElement("div");t.className="maplibregl-ctrl-geocoder maplibregl-ctrl maplibregl-ctrl-geocoder maplibregl-ctrl";const r=this.createIcon("search",'<path d="M7.4 2.5c-2.7 0-4.9 2.2-4.9 4.9s2.2 4.9 4.9 4.9c1 0 1.8-.2 2.5-.8l3.7 3.7c.2.2.4.3.8.3.7 0 1.1-.4 1.1-1.1 0-.3-.1-.5-.3-.8L11.4 10c.4-.8.8-1.6.8-2.5.1-2.8-2.1-5-4.8-5zm0 1.6c1.8 0 3.2 1.4 3.2 3.2s-1.4 3.2-3.2 3.2-3.3-1.3-3.3-3.1 1.4-3.3 3.3-3.3z"/>');this._inputEl=document.createElement("input"),this._inputEl.type="text",this._inputEl.className="maplibregl-ctrl-geocoder--input",this.setPlaceholder(),this.options.collapsed&&(this._collapse(),this.container.addEventListener("mouseenter",this._unCollapse),this.container.addEventListener("mouseleave",this._collapse),this._inputEl.addEventListener("focus",this._unCollapse)),(this.options.collapsed||this.options.clearOnBlur)&&this._inputEl.addEventListener("blur",this._onBlur),this._inputEl.addEventListener("keydown",bX(this._onKeyDown,this.options.debounceSearch)),this._inputEl.addEventListener("paste",this._onPaste),this._inputEl.addEventListener("change",this._onChange),this.container.addEventListener("mouseenter",this._showButton),this.container.addEventListener("mouseleave",this._hideButton);const i=document.createElement("div");i.classList.add("maplibregl-ctrl-geocoder--pin-right"),this._clearEl=document.createElement("button"),this._clearEl.setAttribute("type","button"),this._clearEl.setAttribute("aria-label","Clear"),this._clearEl.addEventListener("click",this.clear),this._clearEl.className="maplibregl-ctrl-geocoder--button";const s=this.createIcon("close",'<path d="M3.8 2.5c-.6 0-1.3.7-1.3 1.3 0 .3.2.7.5.8L7.2 9 3 13.2c-.3.3-.5.7-.5 1 0 .6.7 1.3 1.3 1.3.3 0 .7-.2 1-.5L9 10.8l4.2 4.2c.2.3.7.3 1 .3.6 0 1.3-.7 1.3-1.3 0-.3-.2-.7-.3-1l-4.4-4L15 4.6c.3-.2.5-.5.5-.8 0-.7-.7-1.3-1.3-1.3-.3 0-.7.2-1 .3L9 7.1 4.8 2.8c-.3-.1-.7-.3-1-.3z"/>');return this._clearEl.appendChild(s),this._loadingEl=this.createIcon("loading",'<path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"/><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"/>'),i.appendChild(this._clearEl),i.appendChild(this._loadingEl),t.appendChild(r),t.appendChild(this._inputEl),t.appendChild(i),this._typeahead=new pX(this._inputEl,[],{filter:!1,minLength:this.options.minLength,limit:this.options.limit,noInitialSelection:!0}),this.setRenderFunction(this.options.render),this._typeahead.getItemValue=this.options.getItemValue,this.mapMarker=null,this.resultMarkers=[],this._handleMarker=this._handleMarker.bind(this),this._handleResultMarkers=this._handleResultMarkers.bind(this),this._map&&(this.options.trackProximity&&(this._updateProximity(),this._map.on("moveend",this._updateProximity)),this._maplibregl=this.options.maplibregl,!this._maplibregl&&this.options.marker&&(console.error("No maplibregl detected in options. Map markers are disabled. Please set options.maplibregl."),this.options.marker=!1)),t}createIcon(e,t){const r=document.createElementNS("http://www.w3.org/2000/svg","svg");if(r.setAttribute("class","maplibregl-ctrl-geocoder--icon maplibregl-ctrl-geocoder--icon-"+e),r.setAttribute("viewBox","0 0 18 18"),r.setAttribute("xml:space","preserve"),r.setAttribute("width","18"),r.setAttribute("height","18"),"innerHTML"in r)r.innerHTML=t;else{const i=document.createElement("div");i.innerHTML="<svg>"+t.valueOf().toString()+"</svg>";const s=i.firstChild,a=s.firstChild;r.appendChild(a)}return r}onRemove(){return this.container.remove(),this.options.trackProximity&&this._map&&this._map.off("moveend",this._updateProximity),this._removeMarker(),this._map=null,this}_onPaste(e){const t=(e.clipboardData||window.clipboardData).getData("text");t.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(t)}_onKeyDown(e){if(e.keyCode===27&&this.options.clearAndBlurOnEsc)return this._clear(e),this._inputEl.blur();const s=e.target&&e.target.shadowRoot?e.target.shadowRoot.activeElement:e.target;if(!(s?s.value:""))return this.fresh=!0,e.keyCode!==9&&this.clear(e),this._clearEl.style.display="none";if(!(e.metaKey||[9,27,37,39,38,40].indexOf(e.keyCode)!==-1)){if(e.keyCode===13)if(!this.options.showResultsWhileTyping)this._typeahead.selected||this._geocode(s.value);else{this._typeahead.selected==null&&this.geocoderApi.getSuggestions?this._geocode(s.value,!0):this._typeahead.selected==null&&this.options.showResultMarkers&&this._fitBoundsForMarkers();return}s.value.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(s.value)}}_showButton(){this._inputEl.value.length>0&&(this._clearEl.style.display="block")}_hideButton(){this._typeahead.selected&&(this._clearEl.style.display="none")}_onBlur(e){this.options.clearOnBlur&&this._clearOnBlur(e),this.options.collapsed&&this._collapse()}_onChange(){const e=this._typeahead.selected;if(e&&!e.geometry)e.placeId?this._geocode(e.placeId,!0,!0):this._geocode(e.text,!0);else if(e&&JSON.stringify(e)!==this.lastSelected){if(this._clearEl.style.display="none",this.options.flyTo){let t;if(this._removeResultMarkers(),e.properties&&c9[e.properties.short_code])t=Ap({},this.options.flyTo),this._map&&this._map.fitBounds(c9[e.properties.short_code].bbox,t);else if(e.bbox){const r=e.bbox;t=Ap({},this.options.flyTo),this._map&&this._map.fitBounds([[r[0],r[1]],[r[2],r[3]]],t)}else{const r={zoom:this.options.zoom};t=Ap({},r,this.options.flyTo),e.center?t.center=e.center:e.geometry&&e.geometry.type&&e.geometry.type==="Point"&&e.geometry.coordinates&&(t.center=e.geometry.coordinates),this._map&&this._map.flyTo(t)}}this.options.marker&&this._maplibregl&&this._handleMarker(e),this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0),this.lastSelected=JSON.stringify(e),this._typeahead.selected=null,this._eventEmitter.emit("result",{result:e})}}_getConfigForRequest(){return["bbox","limit","proximity","countries","types","language","reverseMode"].reduce((r,i)=>(this.options[i]&&(["countries","types","language"].indexOf(i)>-1?r[i]=this.options[i].split(/[\s,]+/):r[i]=this.options[i],i==="proximity"&&this.options[i]&&typeof this.options[i].longitude=="number"&&typeof this.options[i].latitude=="number"&&(r[i]=[this.options[i].longitude,this.options[i].latitude])),r),{})}_geocode(e){return P4(this,arguments,void 0,function*(t,r=!1,i=!1){this._loadingEl.style.display="block",this._eventEmitter.emit("loading",{query:t});const s=this._getConfigForRequest(),a=this._createGeocodeRequest(s,t,r,i),o=this.options.localGeocoder?this.options.localGeocoder(t)||[]:[];try{const d=yield a;yield this._handleGeocodeResponse(d,s,t,r,o)}catch(d){this._handleGeocodeErrorResponse(d,o)}return a})}_createGeocodeRequest(e,t,r,i){return this.options.localGeocoderOnly?Promise.resolve({}):this.options.reverseGeocode&&EX.test(t)?this._createReverseGeocodeRequest(t,e):(e.query=t,this.geocoderApi.getSuggestions?r?this.geocoderApi.searchByPlaceId&&i?this.geocoderApi.searchByPlaceId(e):this.geocoderApi.forwardGeocode(e):this.geocoderApi.getSuggestions(e):this.geocoderApi.forwardGeocode(e))}_createReverseGeocodeRequest(e,t){const r=e.split(/[\s(,)?]+/).map(i=>parseFloat(i)).reverse();return t.query=r,t.limit=1,"proximity"in t&&delete t.proximity,this.geocoderApi.reverseGeocode(t)}_handleGeocodeResponse(e,t,r,i,s){return P4(this,void 0,void 0,function*(){this._loadingEl.style.display="none";let a={};e?a=e:a={type:"FeatureCollection",features:[]},a.config=t,this.fresh&&(this.fresh=!1),a.features=a.features?s.concat(a.features):s;const o=this.options.externalGeocoder?this.options.externalGeocoder(r,a.features,t)||Promise.resolve([]):Promise.resolve([]);try{const g=yield o;a.features=a.features?g.concat(a.features):g}catch{}this.options.filter&&a.features.length&&(a.features=a.features.filter(this.options.filter));let d=[];"suggestions"in a?d=a.suggestions:"place"in a?d=[a.place]:d=a.features,d.length?(this._clearEl.style.display="block",this._typeahead.update(d),(!this.options.showResultsWhileTyping||i)&&this.options.showResultMarkers&&(a.features.length>0||"place"in a)&&this._fitBoundsForMarkers(),this._eventEmitter.emit("results",a)):(this._clearEl.style.display="none",this._typeahead.selected=null,this._renderNoResults(),this._eventEmitter.emit("results",a))})}_handleGeocodeErrorResponse(e,t){this._loadingEl.style.display="none",t.length&&this.options.localGeocoder?(this._clearEl.style.display="block",this._typeahead.update(t)):(this._clearEl.style.display="none",this._typeahead.selected=null,this._renderError()),this._eventEmitter.emit("results",{features:t}),this._eventEmitter.emit("error",{error:e})}_clear(e){e&&e.preventDefault(),this._inputEl.value="",this._typeahead.selected=null,this._typeahead.clear(),this._onChange(),this._clearEl.style.display="none",this._removeMarker(),this._removeResultMarkers(),this.lastSelected=null,this._eventEmitter.emit("clear"),this.fresh=!0}clear(e){this._clear(e),this._inputEl.focus()}_clearOnBlur(e){e.relatedTarget&&this._clear(e)}_onQueryResult(e){if(!("features"in e)||!e.features.length)return;const t=e.features[0];this._typeahead.selected=t,this._inputEl.value=t.place_name,this._onChange()}_updateProximity(){if(this._map)if(this._map.getZoom()>this.options.proximityMinZoom){const e=this._map.getCenter().wrap();this.setProximity({longitude:e.lng,latitude:e.lat})}else this.setProximity(null)}_collapse(){!this._inputEl.value&&this._inputEl!==document.activeElement&&this.container.classList.add("maplibregl-ctrl-geocoder--collapsed")}_unCollapse(){this.container.classList.remove("maplibregl-ctrl-geocoder--collapsed")}query(e){return P4(this,void 0,void 0,function*(){const t=yield this._geocode(e);this._onQueryResult(t)})}_renderError(){this._renderMessage("<div class='maplibre-gl-geocoder--error'>There was an error reaching the server</div>")}_renderNoResults(){this._renderMessage("<div class='maplibre-gl-geocoder--error maplibre-gl-geocoder--no-results'>No results found</div>")}_renderMessage(e){this._typeahead.update([]),this._typeahead.selected=null,this._typeahead.clear(),this._typeahead.renderError(e)}_getPlaceholderText(){if(this.options.placeholder)return this.options.placeholder;if(this.options.language){const e=this.options.language.split(",")[0],t=vX.language(e),r=SX[t];if(r)return r}return"Search"}_fitBoundsForMarkers(){if(this._typeahead.data.length<1)return;const e=this._typeahead.data.filter(t=>typeof t!="string").slice(0,this.options.limit);if(this._clearEl.style.display="none",this.options.flyTo&&this._maplibregl&&this._map){const r=Ap({},{padding:100},this.options.flyTo),i=new this._maplibregl.LngLatBounds;for(const s of e)i.extend(s.geometry.coordinates);this._map.fitBounds(i,r)}return e.length>0&&this._maplibregl&&this._handleResultMarkers(e),this}setInput(e){return this._inputEl.value=e,this._typeahead.selected=null,this._typeahead.clear(),e.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(e),this}setProximity(e){return this.options.proximity=e,this}getProximity(){return this.options.proximity}setRenderFunction(e){return e&&typeof e=="function"&&(this._typeahead.render=e),this}getRenderFunction(){return this._typeahead.render}setLanguage(e){return this.options.language=e||this.options.language||navigator.language,this}getLanguage(){return this.options.language}getZoom(){return this.options.zoom}setZoom(e){return this.options.zoom=e,this}getFlyTo(){return this.options.flyTo}setFlyTo(e){return this.options.flyTo=e,this}getPlaceholder(){return this.options.placeholder}setPlaceholder(e){return this.placeholder=e||this._getPlaceholderText(),this._inputEl.placeholder=this.placeholder,this._inputEl.setAttribute("aria-label",this.placeholder),this}getBbox(){return this.options.bbox}setBbox(e){return this.options.bbox=e,this}getCountries(){return this.options.countries}setCountries(e){return this.options.countries=e,this}getTypes(){return this.options.types}setTypes(e){return this.options.types=e,this}getMinLength(){return this.options.minLength}setMinLength(e){return this.options.minLength=e,this._typeahead&&(this._typeahead.options.minLength=e),this}getLimit(){return this.options.limit}setLimit(e){return this.options.limit=e,this._typeahead&&(this._typeahead.options.limit=e),this}getFilter(){return this.options.filter}setFilter(e){return this.options.filter=e,this}setGeocoderApi(e){return this.geocoderApi=e,this}getGeocoderApi(){return this.geocoderApi}_handleMarker(e){if(!this._map)return;this._removeMarker();const r=Ap({},{color:"#4668F2"},this.options.marker);this.mapMarker=new this._maplibregl.Marker(r);let i;if(this.options.popup){const a=Ap({},{},this.options.popup);i=new this._maplibregl.Popup(a).setHTML(this.options.popupRender(e))}return e.center?(this.mapMarker.setLngLat(e.center).addTo(this._map),this.options.popup&&this.mapMarker.setPopup(i)):e.geometry&&e.geometry.type&&e.geometry.type==="Point"&&e.geometry.coordinates&&(this.mapMarker.setLngLat(e.geometry.coordinates).addTo(this._map),this.options.popup&&this.mapMarker.setPopup(i)),this}_removeMarker(){this.mapMarker&&(this.mapMarker.remove(),this.mapMarker=null)}_handleResultMarkers(e){if(!this._map)return;this._removeResultMarkers();let r=Ap({},{color:"#4668F2"},this.options.showResultMarkers);for(const i of e){let s;if(this.options.showResultMarkers){this.options.showResultMarkers&&this.options.showResultMarkers.element&&(s=this.options.showResultMarkers.element.cloneNode(!0),r=Ap(r,{element:s}));const a=new this._maplibregl.Marker(Ap({},r,{element:s}));let o;if(this.options.popup){const g=Ap({},{},this.options.popup);o=new this._maplibregl.Popup(g).setHTML(this.options.popupRender(i))}i.center?(a.setLngLat(i.center).addTo(this._map),this.options.popup&&a.setPopup(o)):i.geometry&&i.geometry.type&&i.geometry.type==="Point"&&i.geometry.coordinates&&(a.setLngLat(i.geometry.coordinates).addTo(this._map),this.options.popup&&a.setPopup(o)),this.resultMarkers.push(a)}}return this}_removeResultMarkers(){this.resultMarkers&&this.resultMarkers.length>0&&(this.resultMarkers.forEach(function(e){e.remove()}),this.resultMarkers=[])}on(e,t){return this._eventEmitter.on(e,t),this}once(e){return new Promise(t=>{this._eventEmitter.once(e,t)})}off(e,t){return this._eventEmitter.removeListener(e,t),this}}function Sn(){var n="/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGl.tsx",e="300acb3537cd75ba7433c8df32ce2e40c6bb2cf5",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGl.tsx",statementMap:{0:{start:{line:21,column:2},end:{line:21,column:36}},1:{start:{line:22,column:2},end:{line:22,column:19}},2:{start:{line:25,column:26},end:{line:31,column:3}},3:{start:{line:32,column:16},end:{line:32,column:55}},4:{start:{line:33,column:2},end:{line:35,column:3}},5:{start:{line:34,column:4},end:{line:34,column:30}},6:{start:{line:36,column:18},end:{line:36,column:20}},7:{start:{line:37,column:2},end:{line:42,column:5}},8:{start:{line:38,column:19},end:{line:38,column:53}},9:{start:{line:39,column:4},end:{line:41,column:5}},10:{start:{line:40,column:6},end:{line:40,column:33}},11:{start:{line:43,column:23},end:{line:47,column:3}},12:{start:{line:48,column:2},end:{line:48,column:22}},13:{start:{line:51,column:24},end:{line:61,column:3}},14:{start:{line:62,column:14},end:{line:62,column:18}},15:{start:{line:64,column:4},end:{line:64,column:17}},16:{start:{line:65,column:4},end:{line:70,column:6}},17:{start:{line:71,column:4},end:{line:73,column:7}},18:{start:{line:72,column:6},end:{line:72,column:25}},19:{start:{line:76,column:17},end:{line:76,column:22}},20:{start:{line:77,column:4},end:{line:80,column:5}},21:{start:{line:78,column:6},end:{line:78,column:132}},22:{start:{line:81,column:4},end:{line:81,column:18}},23:{start:{line:84,column:16},end:{line:84,column:30}},24:{start:{line:85,column:28},end:{line:85,column:79}},25:{start:{line:86,column:4},end:{line:91,column:5}},26:{start:{line:87,column:6},end:{line:87,column:52}},27:{start:{line:88,column:6},end:{line:88,column:70}},28:{start:{line:89,column:6},end:{line:89,column:70}},29:{start:{line:90,column:6},end:{line:90,column:76}},30:{start:{line:92,column:4},end:{line:94,column:5}},31:{start:{line:93,column:6},end:{line:93,column:43}},32:{start:{line:95,column:4},end:{line:100,column:5}},33:{start:{line:96,column:6},end:{line:96,column:59}},34:{start:{line:97,column:6},end:{line:99,column:14}},35:{start:{line:98,column:8},end:{line:98,column:36}},36:{start:{line:103,column:20},end:{line:112,column:5}},37:{start:{line:113,column:21},end:{line:113,column:53}},38:{start:{line:114,column:4},end:{line:114,column:53}},39:{start:{line:115,column:16},end:{line:115,column:43}},40:{start:{line:116,column:26},end:{line:120,column:5}},41:{start:{line:117,column:21},end:{line:117,column:36}},42:{start:{line:118,column:19},end:{line:118,column:32}},43:{start:{line:119,column:6},end:{line:119,column:44}},44:{start:{line:121,column:4},end:{line:121,column:20}},45:{start:{line:122,column:4},end:{line:122,column:56}},46:{start:{line:123,column:4},end:{line:123,column:56}},47:{start:{line:124,column:4},end:{line:124,column:62}},48:{start:{line:125,column:21},end:{line:125,column:43}},49:{start:{line:126,column:24},end:{line:126,column:41}},50:{start:{line:127,column:4},end:{line:127,column:45}},51:{start:{line:128,column:16},end:{line:128,column:74}},52:{start:{line:129,column:4},end:{line:129,column:37}},53:{start:{line:130,column:20},end:{line:130,column:49}},54:{start:{line:131,column:20},end:{line:151,column:6}},55:{start:{line:141,column:8},end:{line:141,column:82}},56:{start:{line:143,column:62},end:{line:143,column:141}},57:{start:{line:145,column:8},end:{line:149,column:9}},58:{start:{line:146,column:10},end:{line:146,column:108}},59:{start:{line:148,column:10},end:{line:148,column:160}},60:{start:{line:152,column:4},end:{line:152,column:28}},61:{start:{line:153,column:4},end:{line:161,column:7}},62:{start:{line:154,column:6},end:{line:160,column:9}},63:{start:{line:162,column:4},end:{line:167,column:7}},64:{start:{line:163,column:6},end:{line:163,column:40}},65:{start:{line:163,column:33},end:{line:163,column:40}},66:{start:{line:164,column:6},end:{line:166,column:9}},67:{start:{line:168,column:4},end:{line:170,column:7}},68:{start:{line:169,column:6},end:{line:169,column:30}},69:{start:{line:171,column:4},end:{line:175,column:7}},70:{start:{line:172,column:6},end:{line:174,column:9}},71:{start:{line:176,column:4},end:{line:176,column:37}},72:{start:{line:177,column:4},end:{line:177,column:37}},73:{start:{line:179,column:22},end:{line:182,column:3}},74:{start:{line:180,column:18},end:{line:180,column:82}},75:{start:{line:180,column:66},end:{line:180,column:81}},76:{start:{line:181,column:4},end:{line:181,column:36}},77:{start:{line:184,column:27},end:{line:217,column:5}},78:{start:{line:186,column:25},end:{line:186,column:27}},79:{start:{line:187,column:8},end:{line:212,column:9}},80:{start:{line:188,column:26},end:{line:188,column:138}},81:{start:{line:189,column:27},end:{line:189,column:47}},82:{start:{line:190,column:26},end:{line:190,column:47}},83:{start:{line:191,column:10},end:{line:209,column:11}},84:{start:{line:192,column:27},end:{line:195,column:13}},85:{start:{line:196,column:26},end:{line:207,column:13}},86:{start:{line:208,column:12},end:{line:208,column:33}},87:{start:{line:211,column:10},end:{line:211,column:69}},88:{start:{line:213,column:8},end:{line:215,column:10}},89:{start:{line:218,column:21},end:{line:221,column:6}},90:{start:{line:222,column:4},end:{line:222,column:41}},91:{start:{line:223,column:4},end:{line:223,column:20}},92:{start:{line:226,column:14},end:{line:226,column:26}},93:{start:{line:227,column:4},end:{line:227,column:53}},94:{start:{line:228,column:4},end:{line:228,column:49}},95:{start:{line:229,column:4},end:{line:238,column:6}},96:{start:{line:235,column:20},end:{line:235,column:38}},97:{start:{line:241,column:22},end:{line:241,column:62}}},fnMap:{0:{name:"renderPopup",decl:{start:{line:20,column:9},end:{line:20,column:20}},loc:{start:{line:20,column:39},end:{line:23,column:1}},line:20},1:{name:"buildInspectStyle",decl:{start:{line:24,column:9},end:{line:24,column:26}},loc:{start:{line:24,column:78},end:{line:49,column:1}},line:24},2:{name:"(anonymous_2)",decl:{start:{line:37,column:48},end:{line:37,column:49}},loc:{start:{line:37,column:62},end:{line:42,column:3}},line:37},3:{name:"(anonymous_3)",decl:{start:{line:52,column:17},end:{line:52,column:18}},loc:{start:{line:52,column:23},end:{line:53,column:5}},line:52},4:{name:"(anonymous_4)",decl:{start:{line:54,column:18},end:{line:54,column:19}},loc:{start:{line:54,column:24},end:{line:55,column:5}},line:54},5:{name:"(anonymous_5)",decl:{start:{line:56,column:19},end:{line:56,column:20}},loc:{start:{line:56,column:25},end:{line:57,column:5}},line:56},6:{name:"(anonymous_6)",decl:{start:{line:58,column:14},end:{line:58,column:15}},loc:{start:{line:58,column:20},end:{line:59,column:5}},line:58},7:{name:"(anonymous_7)",decl:{start:{line:63,column:2},end:{line:63,column:3}},loc:{start:{line:63,column:21},end:{line:74,column:3}},line:63},8:{name:"(anonymous_8)",decl:{start:{line:71,column:34},end:{line:71,column:35}},loc:{start:{line:71,column:40},end:{line:73,column:5}},line:71},9:{name:"(anonymous_9)",decl:{start:{line:75,column:2},end:{line:75,column:3}},loc:{start:{line:75,column:46},end:{line:82,column:3}},line:75},10:{name:"(anonymous_10)",decl:{start:{line:83,column:2},end:{line:83,column:3}},loc:{start:{line:83,column:23},end:{line:101,column:3}},line:83},11:{name:"(anonymous_11)",decl:{start:{line:97,column:17},end:{line:97,column:18}},loc:{start:{line:97,column:23},end:{line:99,column:7}},line:97},12:{name:"(anonymous_12)",decl:{start:{line:102,column:2},end:{line:102,column:3}},loc:{start:{line:102,column:22},end:{line:178,column:3}},line:102},13:{name:"(anonymous_13)",decl:{start:{line:116,column:26},end:{line:116,column:27}},loc:{start:{line:116,column:32},end:{line:120,column:5}},line:116},14:{name:"(anonymous_14)",decl:{start:{line:140,column:24},end:{line:140,column:25}},loc:{start:{line:140,column:44},end:{line:142,column:7}},line:140},15:{name:"(anonymous_15)",decl:{start:{line:143,column:25},end:{line:143,column:26}},loc:{start:{line:143,column:62},end:{line:143,column:141}},line:143},16:{name:"(anonymous_16)",decl:{start:{line:144,column:19},end:{line:144,column:20}},loc:{start:{line:144,column:33},end:{line:150,column:7}},line:144},17:{name:"(anonymous_17)",decl:{start:{line:153,column:25},end:{line:153,column:26}},loc:{start:{line:153,column:31},end:{line:161,column:5}},line:153},18:{name:"(anonymous_18)",decl:{start:{line:162,column:19},end:{line:162,column:20}},loc:{start:{line:162,column:26},end:{line:167,column:5}},line:162},19:{name:"(anonymous_19)",decl:{start:{line:168,column:20},end:{line:168,column:21}},loc:{start:{line:168,column:27},end:{line:170,column:5}},line:168},20:{name:"(anonymous_20)",decl:{start:{line:171,column:19},end:{line:171,column:20}},loc:{start:{line:171,column:27},end:{line:175,column:5}},line:171},21:{name:"(anonymous_21)",decl:{start:{line:179,column:22},end:{line:179,column:23}},loc:{start:{line:179,column:30},end:{line:182,column:3}},line:179},22:{name:"(anonymous_22)",decl:{start:{line:180,column:55},end:{line:180,column:56}},loc:{start:{line:180,column:66},end:{line:180,column:81}},line:180},23:{name:"(anonymous_23)",decl:{start:{line:183,column:2},end:{line:183,column:3}},loc:{start:{line:183,column:20},end:{line:224,column:3}},line:183},24:{name:"(anonymous_24)",decl:{start:{line:185,column:22},end:{line:185,column:23}},loc:{start:{line:185,column:40},end:{line:216,column:7}},line:185},25:{name:"(anonymous_25)",decl:{start:{line:225,column:2},end:{line:225,column:3}},loc:{start:{line:225,column:11},end:{line:239,column:3}},line:225},26:{name:"(anonymous_26)",decl:{start:{line:235,column:13},end:{line:235,column:14}},loc:{start:{line:235,column:20},end:{line:235,column:38}},line:235}},branchMap:{0:{loc:{start:{line:33,column:2},end:{line:35,column:3}},type:"if",locations:[{start:{line:33,column:2},end:{line:35,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:33},1:{loc:{start:{line:39,column:4},end:{line:41,column:5}},type:"if",locations:[{start:{line:39,column:4},end:{line:41,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:39},2:{loc:{start:{line:39,column:8},end:{line:39,column:64}},type:"binary-expr",locations:[{start:{line:39,column:8},end:{line:39,column:32}},{start:{line:39,column:36},end:{line:39,column:64}}],line:39},3:{loc:{start:{line:78,column:15},end:{line:78,column:131}},type:"binary-expr",locations:[{start:{line:78,column:15},end:{line:78,column:71}},{start:{line:78,column:75},end:{line:78,column:131}}],line:78},4:{loc:{start:{line:86,column:4},end:{line:91,column:5}},type:"if",locations:[{start:{line:86,column:4},end:{line:91,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:86},5:{loc:{start:{line:92,column:4},end:{line:94,column:5}},type:"if",locations:[{start:{line:92,column:4},end:{line:94,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:92},6:{loc:{start:{line:92,column:8},end:{line:92,column:98}},type:"binary-expr",locations:[{start:{line:92,column:8},end:{line:92,column:26}},{start:{line:92,column:30},end:{line:92,column:98}}],line:92},7:{loc:{start:{line:95,column:4},end:{line:100,column:5}},type:"if",locations:[{start:{line:95,column:4},end:{line:100,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:95},8:{loc:{start:{line:95,column:8},end:{line:95,column:59}},type:"binary-expr",locations:[{start:{line:95,column:8},end:{line:95,column:26}},{start:{line:95,column:30},end:{line:95,column:59}}],line:95},9:{loc:{start:{line:145,column:8},end:{line:149,column:9}},type:"if",locations:[{start:{line:145,column:8},end:{line:149,column:9}},{start:{line:147,column:15},end:{line:149,column:9}}],line:145},10:{loc:{start:{line:163,column:6},end:{line:163,column:40}},type:"if",locations:[{start:{line:163,column:6},end:{line:163,column:40}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:163}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0,87:0,88:0,89:0,90:0,91:0,92:0,93:0,94:0,95:0,96:0,97:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGl.tsx"],names:[],mappings:"AA+L6B;AA/L7B,OAAO,WAAuB;AAC9B,OAAO,cAAc;AACrB,OAAO,gBAAwG;AAC/G,OAAO,qBAAqB;AAC5B,OAAO,YAAY;AACnB,OAAO,6BAA6B;AACpC,OAAO,uCAA2D;AAClE,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,SAA2B,6BAA6B;AACxD,OAAO;AACP,OAAO;AACP,OAAO;AACP,OAAO,sBAA0E;AACjF,OAAO;AACP,SAAS,uBAAwC;AACjD,OAAO,aAAa;AACpB,SAAS,gBAAgB;AAEzB,SAAS,YAAY,OAAoB,WAA4C;AACnF,WAAS,OAAO,OAAO,SAAS;AAChC,SAAO;AACT;AAEA,SAAS,kBAAkB,kBAAsC,eAAmC,kBAAqC;AACvI,QAAM,kBAAkB;AAAA,IACtB,MAAM;AAAA,IACN,QAAQ;AAAA,IACR,SAAS;AAAA,MACP,oBAAoB;AAAA,IACtB;AAAA,EACF;AAEA,QAAM,QAAQ,sBAAsB,gBAAgB;AACpD,MAAG,OAAO;AACR,kBAAc,KAAK,KAAK;AAAA,EAC1B;AAEA,QAAM,UAA+C,CAAC;AAEtD,SAAO,KAAK,iBAAiB,OAAO,EAAE,QAAQ,cAAY;AACxD,UAAM,SAAS,iBAAiB,QAAQ,QAAQ;AAChD,QAAG,OAAO,SAAS,YAAY,OAAO,SAAS,cAAc;AAC3D,cAAQ,QAAQ,IAAI;AAAA,IACtB;AAAA,EACF,CAAC;AAED,QAAM,eAAe;AAAA,IACnB,GAAG;AAAA,IACH;AAAA,IACA,QAAQ,CAAC,eAAe,EAAE,OAAO,aAAqC;AAAA,EACxE;AACA,SAAO;AACT;AAyBA,MAAM,8BAA8B,MAAM,UAA0D;AAAA,EAClG,OAAO,eAAe;AAAA,IACpB,aAAa,MAAM;AAAA,IAAC;AAAA,IACpB,cAAc,MAAM;AAAA,IAAC;AAAA,IACrB,eAAe,MAAM;AAAA,IAAC;AAAA,IACtB,UAAU,MAAM;AAAA,IAAC;AAAA,IACjB,SAAS,CAAC;AAAA,EACZ;AAAA,EACA,YAAmC;AAAA,EAEnC,YAAY,OAAmC;AAC7C,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,KAAK;AAAA,MACL,SAAS;AAAA,MACT,UAAU;AAAA,MACV,aAAa;AAAA,IACf;AACA,YAAQ,GAAG,mBAAmB,MAAM;AAClC,WAAK,YAAY;AAAA,IACnB,CAAC;AAAA,EACH;AAAA,EAGA,sBAAsB,WAAuC,WAA+B;AAC1F,QAAI,SAAS;AACb,QAAI;AACF,eAAS,KAAK,UAAU,KAAK,KAAK,MAAM,KAAK,UAAU,SAAS,KAAK,KAAK,UAAU,KAAK,KAAK,MAAM,KAAK,UAAU,SAAS;AAAA,IAC9H,SAAQ,IAAI;AAAA,IAEZ;AACA,WAAO;AAAA,EACT;AAAA,EAEA,qBAAqB;AACnB,UAAM,MAAM,KAAK,MAAM;AAEvB,UAAM,kBAAkB,KAAK,MAAM,oBAAoB,KAAK,MAAM,QAAQ;AAC1E,QAAI,KAAK;AAIP,UAAI,SAAS,iBAAiB,EAAC,MAAM,KAAI,CAAC;AAC1C,UAAI,qBAAqB,KAAK,MAAM,SAAS;AAC7C,UAAI,qBAAqB,KAAK,MAAM,SAAS;AAC7C,UAAI,wBAAwB,KAAK,MAAM,SAAS;AAAA,IAClD;AAEA,QAAG,KAAK,MAAM,WAAW,KAAK,MAAM,uBAAuB,KAAK,MAAM,QAAQ,iBAAiB;AAC7F,WAAK,MAAM,QAAQ,gBAAgB;AAAA,IACrC;AACA,QAAI,KAAK,MAAM,WAAW,KAAK,MAAM,oBAAoB;AACvD,WAAK,MAAM,QAAQ,iBAAiB,eAAe;AAEnD,iBAAW,MAAM;AACf,aAAK,MAAM,QAAS,OAAO;AAAA,MAC7B,GAAG,GAAG;AAAA,IACR;AAAA,EAEF;AAAA,EAEA,oBAAoB;AAClB,UAAM,UAAU;AAAA,MACd,GAAG,KAAK,MAAM;AAAA,MACd,WAAW,KAAK;AAAA,MAChB,OAAO,KAAK,MAAM;AAAA,MAClB,MAAM;AAAA,MACN,SAAS;AAAA;AAAA;AAAA,MAGT,0BAA0B;AAAA,IAC5B;AAEA,UAAM,WAAW,IAAI,SAAS,EAAC,UAAU,KAAI,CAAC;AAC9C,eAAW,YAAY,WAAU,SAAS,IAAI;AAC9C,UAAM,MAAM,IAAI,WAAW,IAAI,OAAO;AAEtC,UAAM,gBAAgB,MAAM;AAC1B,YAAM,SAAS,IAAI,UAAU;AAC7B,YAAM,OAAO,IAAI,QAAQ;AACzB,WAAK,MAAM,SAAS,EAAC,QAAQ,KAAI,CAAC;AAAA,IACpC;AACA,kBAAc;AAEd,QAAI,qBAAqB,QAAQ;AACjC,QAAI,qBAAqB,QAAQ;AACjC,QAAI,wBAAwB,QAAQ;AAEpC,UAAM,WAAW,KAAK,aAAa,GAAG;AAEtC,UAAM,cAAc,IAAI,YAAY;AACpC,QAAI,WAAW,aAAa,WAAW;AAEvC,UAAM,MAAM,IAAI,WAAW,kBAAkB,EAAC,gBAAe,KAAI,CAAC;AAClE,QAAI,WAAW,KAAK,WAAW;AAE/B,UAAM,UAAU,SAAS,cAAc,KAAK;AAE5C,UAAM,UAAU,IAAI,gBAAgB;AAAA,MAClC,OAAO,IAAI,WAAW,MAAM;AAAA,QAC1B,cAAc;AAAA,MAChB,CAAC;AAAA,MACD,cAAc;AAAA,MACd,qBAAqB;AAAA,MACrB,4BAA4B;AAAA,MAC5B,mBAAmB;AAAA,MACnB,wBAAwB;AAAA,MACxB,kBAAkB,CAAC,SAAiB,UAAkB;AACpD,eAAO,MAAM,OAAO,YAAY,SAAS,KAAK,CAAC,EAAE,WAAW,GAAG,EAAE,OAAO;AAAA,MAC1E;AAAA,MACA,mBAAmB,CAAC,kBAAsC,kBAAsC,kBAAkB,kBAAkB,eAAe,KAAK,MAAM,gBAAgB;AAAA,MAC9K,aAAa,CAAC,aAA+B;AAC3C,YAAG,KAAK,MAAM,oBAAoB;AAChC,iBAAO,YAAY,oBAAC,qCAAkC,UAAoB,GAAI,OAAO;AAAA,QACvF,OAAO;AACL,iBAAO,YAAY,oBAAC,2BAAwB,UAAoB,eAAe,KAAK,mBAAmB,MAAM,KAAK,MAAM,MAAM,GAAI,OAAO;AAAA,QAC3I;AAAA,MACF;AAAA,IACF,CAAC;AACD,QAAI,WAAW,OAAO;AAEtB,QAAI,GAAG,cAAc,MAAM;AACzB,WAAK,SAAS;AAAA,QACZ;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA,MAAM,IAAI,QAAQ;AAAA,MACpB,CAAC;AAAA,IACH,CAAC;AAED,QAAI,GAAG,QAAQ,OAAK;AAClB,UAAG,EAAE,aAAa,OAAQ;AAC1B,WAAK,MAAM,aAAc;AAAA,QACvB,KAAK,KAAK,MAAM;AAAA,MAClB,CAAC;AAAA,IACH,CAAC;AAED,QAAI,GAAG,SAAS,OAAK;AACnB,cAAQ,IAAI,SAAS,CAAC;AAAA,IACxB,CAAC;AAED,QAAI,GAAG,QAAQ,QAAM;AACnB,WAAK,SAAS;AAAA,QACZ,MAAM,IAAI,QAAQ;AAAA,MACpB,CAAC;AAAA,IACH,CAAC;AAED,QAAI,GAAG,WAAW,aAAa;AAC/B,QAAI,GAAG,WAAW,aAAa;AAAA,EACjC;AAAA,EAEA,oBAAoB,CAAC,OAAe;AAClC,UAAM,QAAQ,KAAK,MAAM,SAAS,OAAO,UAAU,WAAS,MAAM,OAAO,EAAE;AAC3E,SAAK,MAAM,cAAc,KAAK;AAAA,EAChC;AAAA,EAEA,aAAa,KAAU;AACrB,UAAM,iBAAiB;AAAA,MACrB,gBAAgB,OAAO,WAAsC;AAC3D,cAAM,WAAW,CAAC;AAClB,YAAI;AACF,gBAAM,UAAU,gDAAgD,OAAO,KAAK;AAC5E,gBAAM,WAAW,MAAM,MAAM,OAAO;AACpC,gBAAM,UAAU,MAAM,SAAS,KAAK;AACpC,qBAAW,WAAW,QAAQ,UAAU;AACtC,kBAAM,SAAS;AAAA,cACb,QAAQ,KAAK,CAAC,KACT,QAAQ,KAAK,CAAC,IAAI,QAAQ,KAAK,CAAC,KAAK;AAAA,cAC1C,QAAQ,KAAK,CAAC,KACT,QAAQ,KAAK,CAAC,IAAI,QAAQ,KAAK,CAAC,KAAK;AAAA,YAC5C;AACA,kBAAM,QAAQ;AAAA,cACZ,MAAM;AAAA,cACN,UAAU;AAAA,gBACR,MAAM;AAAA,gBACN,aAAa;AAAA,cACf;AAAA,cACA,YAAY,QAAQ,WAAW;AAAA,cAC/B,YAAY,QAAQ;AAAA,cACpB,MAAM,QAAQ,WAAW;AAAA,cACzB,YAAY,CAAC,OAAO;AAAA,cACpB;AAAA,YACF;AACA,qBAAS,KAAK,KAAK;AAAA,UACrB;AAAA,QACF,SAAS,GAAG;AACV,kBAAQ,MAAM,wCAAwC,CAAC,EAAE;AAAA,QAC3D;AACA,eAAO;AAAA,UACL;AAAA,QACF;AAAA,MACF;AAAA,IACF;AACA,UAAM,WAAW,IAAI,iBAAiB,gBAAgB;AAAA,MACpD,aAAa,KAAK,MAAM,EAAE,QAAQ;AAAA,MAClC,YAAY;AAAA,IACd,CAAC;AACD,QAAI,WAAW,UAAU,UAAU;AACnC,WAAO;AAAA,EACT;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,SAAK,MAAM,UAAU,eAAe,EAAE,QAAQ,CAAC;AAC/C,SAAK,MAAM,aAAa,SAAS,EAAE,OAAO,CAAC;AAC3C,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,MAAK;AAAA,QACL,cAAY,EAAE,UAAU;AAAA,QACxB,KAAK,OAAK,KAAK,YAAY;AAAA,QAC3B,eAAY;AAAA;AAAA,IACb;AAAA,EACH;AACF;AAEA,MAAM,gBAAgB,gBAAgB,EAAE,qBAAqB;AAC7D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"300acb3537cd75ba7433c8df32ce2e40c6bb2cf5"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Sn=function(){return a},a}Sn();function d9(n,e){return Sn().f[0]++,Sn().s[0]++,YH.render(n,e),Sn().s[1]++,e}function OX(n,e,t){Sn().f[1]++;const r=(Sn().s[2]++,{id:"background",type:"background",paint:{"background-color":"#1c1f24"}}),i=(Sn().s[3]++,uX(t));Sn().s[4]++,i?(Sn().b[0][0]++,Sn().s[5]++,e.push(i)):Sn().b[0][1]++;const s=(Sn().s[6]++,{});Sn().s[7]++,Object.keys(n.sources).forEach(o=>{Sn().f[2]++;const d=(Sn().s[8]++,n.sources[o]);Sn().s[9]++,Sn().b[2][0]++,d.type!=="raster"&&(Sn().b[2][1]++,d.type!=="raster-dem")?(Sn().b[1][0]++,Sn().s[10]++,s[o]=d):Sn().b[1][1]++});const a=(Sn().s[11]++,{...n,sources:s,layers:[r].concat(e)});return Sn().s[12]++,a}class ez extends nr.Component{constructor(t){Sn().f[7]++,Sn().s[15]++;super(t);Pn(this,"container",(Sn().s[14]++,null));Pn(this,"onLayerSelectById",(Sn().s[73]++,t=>{Sn().f[21]++;const r=(Sn().s[74]++,this.props.mapStyle.layers.findIndex(i=>(Sn().f[22]++,Sn().s[75]++,i.id===t)));Sn().s[76]++,this.props.onLayerSelect(r)}));Sn().s[16]++,this.state={map:null,inspect:null,geocoder:null,zoomControl:null},Sn().s[17]++,Nc.on("languageChanged",()=>{Sn().f[8]++,Sn().s[18]++,this.forceUpdate()})}shouldComponentUpdate(t,r){Sn().f[9]++;let i=(Sn().s[19]++,!1);Sn().s[20]++;try{Sn().s[21]++,i=(Sn().b[3][0]++,JSON.stringify(this.props)!==JSON.stringify(t)||(Sn().b[3][1]++,JSON.stringify(this.state)!==JSON.stringify(r)))}catch{}return Sn().s[22]++,i}componentDidUpdate(){var i,s,a;Sn().f[10]++;const t=(Sn().s[23]++,this.state.map),r=(Sn().s[24]++,this.props.replaceAccessTokens(this.props.mapStyle));Sn().s[25]++,t?(Sn().b[4][0]++,Sn().s[26]++,t.setStyle(r,{diff:!0}),Sn().s[27]++,t.showTileBoundaries=(i=this.props.options)==null?void 0:i.showTileBoundaries,Sn().s[28]++,t.showCollisionBoxes=(s=this.props.options)==null?void 0:s.showCollisionBoxes,Sn().s[29]++,t.showOverdrawInspector=(a=this.props.options)==null?void 0:a.showOverdrawInspector):Sn().b[4][1]++,Sn().s[30]++,Sn().b[6][0]++,this.state.inspect&&(Sn().b[6][1]++,this.props.inspectModeEnabled!==this.state.inspect._showInspectMap)?(Sn().b[5][0]++,Sn().s[31]++,this.state.inspect.toggleInspector()):Sn().b[5][1]++,Sn().s[32]++,Sn().b[8][0]++,this.state.inspect&&(Sn().b[8][1]++,this.props.inspectModeEnabled)?(Sn().b[7][0]++,Sn().s[33]++,this.state.inspect.setOriginalStyle(r),Sn().s[34]++,setTimeout(()=>{Sn().f[11]++,Sn().s[35]++,this.state.inspect.render()},500)):Sn().b[7][1]++}componentDidMount(){Sn().f[12]++;const t=(Sn().s[36]++,{...this.props.options,container:this.container,style:this.props.mapStyle,hash:!0,maxZoom:24,localIdeographFontFamily:!1}),r=(Sn().s[37]++,new LY({metadata:!0}));Sn().s[38]++,Z1.addProtocol("pmtiles",r.tile);const i=(Sn().s[39]++,new Z1.Map(t));Sn().s[40]++;const s=()=>{Sn().f[13]++;const E=(Sn().s[41]++,i.getCenter()),S=(Sn().s[42]++,i.getZoom());Sn().s[43]++,this.props.onChange({center:E,zoom:S})};Sn().s[44]++,s(),Sn().s[45]++,i.showTileBoundaries=t.showTileBoundaries,Sn().s[46]++,i.showCollisionBoxes=t.showCollisionBoxes,Sn().s[47]++,i.showOverdrawInspector=t.showOverdrawInspector;const a=(Sn().s[48]++,this.initGeocoder(i)),o=(Sn().s[49]++,new sX);Sn().s[50]++,i.addControl(o,"top-right");const d=(Sn().s[51]++,new Z1.NavigationControl({visualizePitch:!0}));Sn().s[52]++,i.addControl(d,"top-right");const g=(Sn().s[53]++,document.createElement("div")),b=(Sn().s[54]++,new d8({popup:new Z1.Popup({closeOnClick:!1}),showMapPopup:!0,showMapPopupOnHover:!1,showInspectMapPopupOnHover:!0,showInspectButton:!1,blockHoverPopupOnClick:!0,assignLayerColor:(E,S)=>(Sn().f[14]++,Sn().s[55]++,W6(YU.brightColor(E,S)).desaturate(.5).string()),buildInspectStyle:(E,S)=>(Sn().f[15]++,Sn().s[56]++,OX(E,S,this.props.highlightedLayer)),renderPopup:E=>(Sn().f[16]++,Sn().s[57]++,this.props.inspectModeEnabled?(Sn().b[9][0]++,Sn().s[58]++,d9(ue.jsx(XZ,{features:E}),g)):(Sn().b[9][1]++,Sn().s[59]++,d9(ue.jsx(HU,{features:E,onLayerSelect:this.onLayerSelectById,zoom:this.state.zoom}),g)))}));Sn().s[60]++,i.addControl(b),Sn().s[61]++,i.on("style.load",()=>{Sn().f[17]++,Sn().s[62]++,this.setState({map:i,inspect:b,geocoder:a,zoomControl:o,zoom:i.getZoom()})}),Sn().s[63]++,i.on("data",E=>{if(Sn().f[18]++,Sn().s[64]++,E.dataType!=="tile"){Sn().b[10][0]++,Sn().s[65]++;return}else Sn().b[10][1]++;Sn().s[66]++,this.props.onDataChange({map:this.state.map})}),Sn().s[67]++,i.on("error",E=>{Sn().f[19]++,Sn().s[68]++,console.log("ERROR",E)}),Sn().s[69]++,i.on("zoom",E=>{Sn().f[20]++,Sn().s[70]++,this.setState({zoom:i.getZoom()})}),Sn().s[71]++,i.on("dragend",s),Sn().s[72]++,i.on("zoomend",s)}initGeocoder(t){Sn().f[23]++;const r=(Sn().s[77]++,{forwardGeocode:async s=>{Sn().f[24]++;const a=(Sn().s[78]++,[]);Sn().s[79]++;try{const o=(Sn().s[80]++,`https://nominatim.openstreetmap.org/search?q=${s.query}&format=geojson&polygon_geojson=1&addressdetails=1`),d=(Sn().s[81]++,await fetch(o)),g=(Sn().s[82]++,await d.json());Sn().s[83]++;for(const b of g.features){const E=(Sn().s[84]++,[b.bbox[0]+(b.bbox[2]-b.bbox[0])/2,b.bbox[1]+(b.bbox[3]-b.bbox[1])/2]),S=(Sn().s[85]++,{type:"Feature",geometry:{type:"Point",coordinates:E},place_name:b.properties.display_name,properties:b.properties,text:b.properties.display_name,place_type:["place"],center:E});Sn().s[86]++,a.push(S)}}catch(o){Sn().s[87]++,console.error(`Failed to forwardGeocode with error: ${o}`)}return Sn().s[88]++,{features:a}}}),i=(Sn().s[89]++,new BX(r,{placeholder:this.props.t("Search"),maplibregl:Z1}));return Sn().s[90]++,t.addControl(i,"top-left"),Sn().s[91]++,i}render(){var r,i;Sn().f[25]++;const t=(Sn().s[92]++,this.props.t);return Sn().s[93]++,(r=this.state.geocoder)==null||r.setPlaceholder(t("Search")),Sn().s[94]++,(i=this.state.zoomControl)==null||i.setLabel(t("Zoom:")),Sn().s[95]++,ue.jsx("div",{className:"maputnik-map__map",role:"region","aria-label":t("Map view"),ref:s=>(Sn().f[26]++,Sn().s[96]++,this.container=s),"data-wd-key":"maplibre:map"})}}Pn(ez,"defaultProps",(Sn().s[13]++,{onMapLoaded:()=>{Sn().f[3]++},onDataChange:()=>{Sn().f[4]++},onLayerSelect:()=>{Sn().f[5]++},onChange:()=>{Sn().f[6]++},options:{}}));const IX=(Sn().s[97]++,Ns()(ez)),di={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4},h9={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};var f9={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function kX(n){var b,E;var e,t=[],r=1,i;if(typeof n=="number")return{space:"rgb",values:[n>>>16,(n&65280)>>>8,n&255],alpha:1};if(typeof n=="number")return{space:"rgb",values:[n>>>16,(n&65280)>>>8,n&255],alpha:1};if(n=String(n).toLowerCase(),h9[n])t=h9[n].slice(),i="rgb";else if(n==="transparent")r=0,i="rgb",t=[0,0,0];else if(n[0]==="#"){var s=n.slice(1),a=s.length,o=a<=4;r=1,o?(t=[parseInt(s[0]+s[0],16),parseInt(s[1]+s[1],16),parseInt(s[2]+s[2],16)],a===4&&(r=parseInt(s[3]+s[3],16)/255)):(t=[parseInt(s[0]+s[1],16),parseInt(s[2]+s[3],16),parseInt(s[4]+s[5],16)],a===8&&(r=parseInt(s[6]+s[7],16)/255)),t[0]||(t[0]=0),t[1]||(t[1]=0),t[2]||(t[2]=0),i="rgb"}else if(e=/^((?:rgba?|hs[lvb]a?|hwba?|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms|oklch|oklab|color))\s*\(([^\)]*)\)/.exec(n)){var d=e[1];i=d.replace(/a$/,"");var g=i==="cmyk"?4:i==="gray"?1:3;t=e[2].trim().split(/\s*[,\/]\s*|\s+/),i==="color"&&(i=t.shift()),t=t.map(function(S,I){if(S[S.length-1]==="%")return S=parseFloat(S)/100,I===3?S:i==="rgb"?S*255:i[0]==="h"||i[0]==="l"&&!I?S*100:i==="lab"?S*125:i==="lch"?I<2?S*150:S*360:i[0]==="o"&&!I?S:i==="oklab"?S*.4:i==="oklch"?I<2?S*.4:S*360:S;if(i[I]==="h"||I===2&&i[i.length-1]==="h"){if(f9[S]!==void 0)return f9[S];if(S.endsWith("deg"))return parseFloat(S);if(S.endsWith("turn"))return parseFloat(S)*360;if(S.endsWith("grad"))return parseFloat(S)*360/400;if(S.endsWith("rad"))return parseFloat(S)*180/Math.PI}return S==="none"?0:parseFloat(S)}),r=t.length>g?t.pop():1}else/[0-9](?:\s|\/|,)/.test(n)&&(t=n.match(/([0-9]+)/g).map(function(S){return parseFloat(S)}),i=((E=(b=n.match(/([a-z])/ig))==null?void 0:b.join(""))==null?void 0:E.toLowerCase())||"rgb");return{space:i,values:t,alpha:r}}const wC={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]},z4={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(n){var e=n[0]/360,t=n[1]/100,r=n[2]/100,i,s,a,o,d,g=0;if(t===0)return d=r*255,[d,d,d];for(s=r<.5?r*(1+t):r+t-r*t,i=2*r-s,o=[0,0,0];g<3;)a=e+1/3*-(g-1),a<0?a++:a>1&&a--,d=6*a<1?i+(s-i)*6*a:2*a<1?s:3*a<2?i+(s-i)*(2/3-a)*6:i,o[g++]=d*255;return o}};wC.hsl=function(n){var e=n[0]/255,t=n[1]/255,r=n[2]/255,i=Math.min(e,t,r),s=Math.max(e,t,r),a=s-i,o,d,g;return s===i?o=0:e===s?o=(t-r)/a:t===s?o=2+(r-e)/a:r===s&&(o=4+(e-t)/a),o=Math.min(o*60,360),o<0&&(o+=360),g=(i+s)/2,s===i?d=0:g<=.5?d=a/(s+i):d=a/(2-s-i),[o,d*100,g*100]};function TX(n){Array.isArray(n)&&n.raw&&(n=String.raw(...arguments)),n instanceof Number&&(n=+n);var e,t=kX(n);if(!t.space)return[];const r=t.space[0]==="h"?z4.min:wC.min,i=t.space[0]==="h"?z4.max:wC.max;return e=Array(3),e[0]=Math.min(Math.max(t.values[0],r[0]),i[0]),e[1]=Math.min(Math.max(t.values[1],r[1]),i[1]),e[2]=Math.min(Math.max(t.values[2],r[2]),i[2]),t.space[0]==="h"&&(e=z4.rgb(e)),e.push(Math.min(Math.max(t.alpha,0),1)),e}var Uc={name:"xyz",min:[0,0,0],channel:["X","Y","Z"],alias:["XYZ","ciexyz","cie1931"]};Uc.whitepoint={2:{A:[109.85,100,35.585],C:[98.074,100,118.232],D50:[96.422,100,82.521],D55:[95.682,100,92.149],D65:[95.045592705167,100,108.9057750759878],D75:[94.972,100,122.638],F2:[99.187,100,67.395],F7:[95.044,100,108.755],F11:[100.966,100,64.37],E:[100,100,100]},10:{A:[111.144,100,35.2],C:[97.285,100,116.145],D50:[96.72,100,81.427],D55:[95.799,100,90.926],D65:[94.811,100,107.304],D75:[94.416,100,120.641],F2:[103.28,100,69.026],F7:[95.792,100,107.687],F11:[103.866,100,65.627],E:[100,100,100]}};Uc.max=Uc.whitepoint[2].D65;Uc.rgb=function(n,e){e=e||Uc.whitepoint[2].E;var t=n[0]/e[0],r=n[1]/e[1],i=n[2]/e[2],s,a,o;return s=t*3.240969941904521+r*-1.537383177570093+i*-.498610760293,a=t*-.96924363628087+r*1.87596750150772+i*.041555057407175,o=t*.055630079696993+r*-.20397695888897+i*1.056971514242878,s=s>.0031308?1.055*Math.pow(s,1/2.4)-.055:s=s*12.92,a=a>.0031308?1.055*Math.pow(a,1/2.4)-.055:a=a*12.92,o=o>.0031308?1.055*Math.pow(o,1/2.4)-.055:o=o*12.92,s=Math.min(Math.max(0,s),1),a=Math.min(Math.max(0,a),1),o=Math.min(Math.max(0,o),1),[s*255,a*255,o*255]};wC.xyz=function(n,e){var t=n[0]/255,r=n[1]/255,i=n[2]/255;t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92,r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92,i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92;var s=t*.41239079926595+r*.35758433938387+i*.18048078840183,a=t*.21263900587151+r*.71516867876775+i*.072192315360733,o=t*.019330818715591+r*.11919477979462+i*.95053215224966;return e=e||Uc.whitepoint[2].E,[s*e[0],a*e[1],o*e[2]]};const f8={name:"luv",min:[0,-134,-140],max:[100,224,122],channel:["lightness","u","v"],alias:["LUV","cieluv","cie1976"],xyz:function(n,e,t){var r,i,s,a,o,d,g,b,E,S,I,P,z;if(s=n[0],a=n[1],o=n[2],s===0)return[0,0,0];var j=.0011070564598794539;return e=e||"D65",t=t||2,E=Uc.whitepoint[t][e][0],S=Uc.whitepoint[t][e][1],I=Uc.whitepoint[t][e][2],P=4*E/(E+15*S+3*I),z=9*S/(E+15*S+3*I),r=a/(13*s)+P||0,i=o/(13*s)+z||0,g=s>8?S*Math.pow((s+16)/116,3):S*s*j,d=g*9*r/(4*i)||0,b=g*(12-3*r-20*i)/(4*i)||0,[d,g,b]}};Uc.luv=function(n,e,t){var r,i,s,a,o,d,g,b,E,S,I,P,z,j=.008856451679035631,q=903.2962962962961;e=e||"D65",t=t||2,E=Uc.whitepoint[t][e][0],S=Uc.whitepoint[t][e][1],I=Uc.whitepoint[t][e][2],P=4*E/(E+15*S+3*I),z=9*S/(E+15*S+3*I),d=n[0],g=n[1],b=n[2],r=4*d/(d+15*g+3*b)||0,i=9*g/(d+15*g+3*b)||0;var Y=g/S;return s=Y<=j?q*Y:116*Math.pow(Y,1/3)-16,a=13*s*(r-P),o=13*s*(i-z),[s,a,o]};var tz={name:"lchuv",channel:["lightness","chroma","hue"],alias:["LCHuv","cielchuv"],min:[0,0,0],max:[100,100,360],luv:function(n){var e=n[0],t=n[1],r=n[2],i,s,a;return a=r/360*2*Math.PI,i=t*Math.cos(a),s=t*Math.sin(a),[e,i,s]},xyz:function(n){return f8.xyz(tz.luv(n))}};f8.lchuv=function(n){var e=n[0],t=n[1],r=n[2],i=Math.sqrt(t*t+r*r),s=Math.atan2(r,t),a=s*360/2/Math.PI;return a<0&&(a+=360),[e,i,a]};Uc.lchuv=function(n){return f8.lchuv(Uc.luv(n))};function MA(n,e,t){return Math.min(Math.max(n,e),t)}function PX(n,e,t,r,i,s){const a=i-t,o=s-r;if(a!==0||o!==0){const d=((n-t)*a+(e-r)*o)/(a*a+o*o);d>1?(t=i,r=s):d>0&&(t+=a*d,r+=o*d)}return Pg(n,e,t,r)}function Pg(n,e,t,r){const i=t-n,s=r-e;return i*i+s*s}function KX(n){const e=n.length;for(let r=0;r<e;r++){let i=r,s=Math.abs(n[r][r]);for(let o=r+1;o<e;o++){const d=Math.abs(n[o][r]);d>s&&(s=d,i=o)}if(s===0)return null;const a=n[i];n[i]=n[r],n[r]=a;for(let o=r+1;o<e;o++){const d=-n[o][r]/n[r][r];for(let g=r;g<e+1;g++)r==g?n[o][g]=0:n[o][g]+=d*n[r][g]}}const t=new Array(e);for(let r=e-1;r>=0;r--){t[r]=n[r][e]/n[r][r];for(let i=r-1;i>=0;i--)n[i][e]-=n[i][r]*t[r]}return t}function p9(n){return n*180/Math.PI}function K0(n){return n*Math.PI/180}function Kg(n,e){const t=n%e;return t*e<0?t+e:t}function Vh(n,e,t){return n+t*(e-n)}function p8(n,e){const t=Math.pow(10,e);return Math.round(n*t)/t}function lb(n,e){return Math.floor(p8(n,e))}function E0(n,e){return Math.ceil(p8(n,e))}function Y6(n,e,t){if(n>=e&&n<t)return n;const r=t-e;return((n-e)%r+r)%r+e}const m8=[NaN,NaN,NaN,0];function DX(n){return typeof n=="string"?n:y8(n)}const RX=1024,Mv={};let j4=0;function FX(n){if(n.length===4)return n;const e=n.slice();return e[3]=1,e}function m9(n){const e=Uc.lchuv(wC.xyz(n));return e[3]=n[3],e}function LX(n){const e=Uc.rgb(tz.xyz(n));return e[3]=n[3],e}function g8(n){if(n==="none")return m8;if(Mv.hasOwnProperty(n))return Mv[n];if(j4>=RX){let t=0;for(const r in Mv)t++&3||(delete Mv[r],--j4)}const e=TX(n);if(e.length!==4)throw new Error('failed to parse "'+n+'" as color');for(const t of e)if(isNaN(t))throw new Error('failed to parse "'+n+'" as color');return nz(e),Mv[n]=e,++j4,e}function Py(n){return Array.isArray(n)?n:g8(n)}function nz(n){return n[0]=MA(n[0]+.5|0,0,255),n[1]=MA(n[1]+.5|0,0,255),n[2]=MA(n[2]+.5|0,0,255),n[3]=MA(n[3],0,1),n}function y8(n){let e=n[0];e!=(e|0)&&(e=e+.5|0);let t=n[1];t!=(t|0)&&(t=t+.5|0);let r=n[2];r!=(r|0)&&(r=r+.5|0);const i=n[3]===void 0?1:Math.round(n[3]*1e3)/1e3;return"rgba("+e+","+t+","+r+","+i+")"}const U0=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",UX=U0.includes("firefox"),zX=U0.includes("safari")&&!U0.includes("chrom");zX&&(U0.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(U0));const jX=U0.includes("webkit")&&!U0.includes("edge"),rz=U0.includes("macintosh"),iz=typeof devicePixelRatio<"u"?devicePixelRatio:1,oz=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,sz=typeof Image<"u"&&Image.prototype.decode,NX=typeof createImageBitmap=="function",az=function(){let n=!1;try{const e=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return n}();function Ru(n,e,t,r){let i;return t&&t.length?i=t.shift():oz?i=new OffscreenCanvas(n||300,e||300):i=document.createElement("canvas"),n&&(i.width=n),e&&(i.height=e),i.getContext("2d",r)}let N4;function _2(){return N4||(N4=Ru(1,1)),N4}function t_(n){const e=n.canvas;e.width=1,e.height=1,n.clearRect(0,0,1,1)}function WX(n){let e=n.offsetWidth;const t=getComputedStyle(n);return e+=parseInt(t.marginLeft,10)+parseInt(t.marginRight,10),e}function GX(n){let e=n.offsetHeight;const t=getComputedStyle(n);return e+=parseInt(t.marginTop,10)+parseInt(t.marginBottom,10),e}function g9(n,e){const t=e.parentNode;t&&t.replaceChild(n,e)}function lz(n){for(;n.lastChild;)n.lastChild.remove()}function QX(n,e){const t=n.childNodes;for(let r=0;;++r){const i=t[r],s=e[r];if(!i&&!s)break;if(i!==s){if(!i){n.appendChild(s);continue}if(!s){n.removeChild(i),--r;continue}n.insertBefore(s,i)}}}const lo={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};class n_{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function qX(n,e,t){let r,i;t=t||Fm;let s=0,a=n.length,o=!1;for(;s<a;)r=s+(a-s>>1),i=+t(n[r],e),i<0?s=r+1:(a=r,o=!i);return o?s:~s}function Fm(n,e){return n>e?1:n<e?-1:0}function YX(n,e){return n<e?1:n>e?-1:0}function Tx(n,e,t){if(n[0]<=e)return 0;const r=n.length;if(e<=n[r-1])return r-1;if(typeof t=="function"){for(let i=1;i<r;++i){const s=n[i];if(s===e)return i;if(s<e)return t(e,n[i-1],s)>0?i-1:i}return r-1}if(t>0){for(let i=1;i<r;++i)if(n[i]<e)return i-1;return r-1}if(t<0){for(let i=1;i<r;++i)if(n[i]<=e)return i;return r-1}for(let i=1;i<r;++i){if(n[i]==e)return i;if(n[i]<e)return n[i-1]-e<e-n[i]?i-1:i}return r-1}function $X(n,e,t){for(;e<t;){const r=n[e];n[e]=n[t],n[t]=r,++e,--t}}function rm(n,e){const t=Array.isArray(e)?e:[e],r=t.length;for(let i=0;i<r;i++)n[n.length]=t[i]}function N0(n,e){const t=n.length;if(t!==e.length)return!1;for(let r=0;r<t;r++)if(n[r]!==e[r])return!1;return!0}function VX(n,e,t){const r=e;return n.every(function(i,s){if(s===0)return!0;const a=r(n[s-1],i);return!(a>0||a===0)})}function MC(){return!0}function Px(){return!1}function Ky(){}function uz(n){let e,t,r;return function(){const i=Array.prototype.slice.call(arguments);return(!t||this!==r||!N0(i,t))&&(r=this,t=i,e=n.apply(this,arguments)),e}}function Dy(n){function e(){let t;try{t=n()}catch(r){return Promise.reject(r)}return t instanceof Promise?t:Promise.resolve(t)}return e()}function r_(n){for(const e in n)delete n[e]}function z0(n){let e;for(e in n)return!1;return!e}class wp{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}class i_ extends n_{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;const r=this.listeners_||(this.listeners_={}),i=r[e]||(r[e]=[]);i.includes(t)||i.push(t)}dispatchEvent(e){const t=typeof e=="string",r=t?e:e.type,i=this.listeners_&&this.listeners_[r];if(!i)return;const s=t?new wp(e):e;s.target||(s.target=this.eventTarget_||this);const a=this.dispatching_||(this.dispatching_={}),o=this.pendingRemovals_||(this.pendingRemovals_={});r in a||(a[r]=0,o[r]=0),++a[r];let d;for(let g=0,b=i.length;g<b;++g)if("handleEvent"in i[g]?d=i[g].handleEvent(s):d=i[g].call(this,s),d===!1||s.propagationStopped){d=!1;break}if(--a[r]===0){let g=o[r];for(delete o[r];g--;)this.removeEventListener(r,Ky);delete a[r]}return d}disposeInternal(){this.listeners_&&r_(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,t){if(!this.listeners_)return;const r=this.listeners_[e];if(!r)return;const i=r.indexOf(t);i!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(r[i]=Ky,++this.pendingRemovals_[e]):(r.splice(i,1),r.length===0&&delete this.listeners_[e]))}}function Ks(n,e,t,r,i){if(i){const a=t;t=function(o){return n.removeEventListener(e,t),a.call(r??this,o)}}else r&&r!==n&&(t=t.bind(r));const s={target:n,type:e,listener:t};return n.addEventListener(e,t),s}function b2(n,e,t,r){return Ks(n,e,t,r,!0)}function ul(n){n&&n.target&&(n.target.removeEventListener(n.type,n.listener),r_(n))}class v8 extends i_{constructor(e,t,r,i){super(),this.extent=e,this.pixelRatio_=r,this.resolution=t,this.state=typeof i=="function"?di.IDLE:i,this.image_=null,this.loader=typeof i=="function"?i:null}changed(){this.dispatchEvent(lo.CHANGE)}getExtent(){return this.extent}getImage(){return this.image_}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){if(this.state==di.IDLE&&this.loader){this.state=di.LOADING,this.changed();const e=this.getResolution(),t=Array.isArray(e)?e[0]:e;Dy(()=>this.loader(this.getExtent(),t,this.getPixelRatio())).then(r=>{"image"in r&&(this.image_=r.image),"extent"in r&&(this.extent=r.extent),"resolution"in r&&(this.resolution=r.resolution),"pixelRatio"in r&&(this.pixelRatio_=r.pixelRatio),(r instanceof HTMLImageElement||NX&&r instanceof ImageBitmap||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement)&&(this.image_=r),this.state=di.LOADED}).catch(r=>{this.state=di.ERROR,console.error(r)}).finally(()=>this.changed())}}setImage(e){this.image_=e}setResolution(e){this.resolution=e}}function HX(n,e,t){const r=n;let i=!0,s=!1,a=!1;const o=[b2(r,lo.LOAD,function(){a=!0,s||e()})];return r.src&&sz?(s=!0,r.decode().then(function(){i&&e()}).catch(function(d){i&&(a?e():t())})):o.push(b2(r,lo.ERROR,t)),function(){i=!1,o.forEach(ul)}}function ZX(n,e){return new Promise((t,r)=>{function i(){a(),t(n)}function s(){a(),r(new Error("Image load error"))}function a(){n.removeEventListener("load",i),n.removeEventListener("error",s)}n.addEventListener("load",i),n.addEventListener("error",s)})}function XX(n,e){return e&&(n.src=e),n.src&&sz?new Promise((t,r)=>n.decode().then(()=>t(n)).catch(i=>n.complete&&n.width?t(n):r(i))):ZX(n)}class JX{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const t in this.cache_){const r=this.cache_[t];!(e++&3)&&!r.hasListener()&&(delete this.cache_[t],delete this.patternCache_[t],--this.cacheSize_)}}}get(e,t,r){const i=W4(e,t,r);return i in this.cache_?this.cache_[i]:null}getPattern(e,t,r){const i=W4(e,t,r);return i in this.patternCache_?this.patternCache_[i]:null}set(e,t,r,i,s){const a=W4(e,t,r),o=a in this.cache_;this.cache_[a]=i,s&&(i.getImageState()===di.IDLE&&i.load(),i.getImageState()===di.LOADING?i.ready().then(()=>{this.patternCache_[a]=_2().createPattern(i.getImage(1),"repeat")}):this.patternCache_[a]=_2().createPattern(i.getImage(1),"repeat")),o||++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function W4(n,e,t){const r=t?Py(t):"null";return e+":"+n+":"+r}const Uf=new JX;let Sv=null;class Az extends i_{constructor(e,t,r,i,s){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=r,this.canvas_={},this.color_=s,this.imageState_=i===void 0?di.IDLE:i,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=t,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===di.LOADED){Sv||(Sv=Ru(1,1,void 0,{willReadFrequently:!0})),Sv.drawImage(this.image_,0,0);try{Sv.getImageData(0,0,1,1),this.tainted_=!1}catch{Sv=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(lo.CHANGE)}handleImageError_(){this.imageState_=di.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=di.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],t=this.size_[1],r=Ru(e,t);r.fillRect(0,0,e,t),this.hitDetectionImage_=r.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===di.IDLE){this.image_||this.initializeImage_(),this.imageState_=di.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&XX(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==di.LOADED)return;const t=this.image_,r=Ru(Math.ceil(t.width*e),Math.ceil(t.height*e)),i=r.canvas;r.scale(e,e),r.drawImage(t,0,0),r.globalCompositeOperation="multiply",r.fillStyle=DX(this.color_),r.fillRect(0,0,i.width/e,i.height/e),r.globalCompositeOperation="destination-in",r.drawImage(t,0,0),this.canvas_[e]=i}ready(){return this.ready_||(this.ready_=new Promise(e=>{if(this.imageState_===di.LOADED||this.imageState_===di.ERROR)e();else{const t=()=>{(this.imageState_===di.LOADED||this.imageState_===di.ERROR)&&(this.removeEventListener(lo.CHANGE,t),e())};this.addEventListener(lo.CHANGE,t)}})),this.ready_}}function C8(n,e,t,r,i,s){let a=e===void 0?void 0:Uf.get(e,t,i);return a||(a=new Az(n,n&&"src"in n?n.src||void 0:e,t,r,i),Uf.set(e,t,i,a,s)),s&&a&&!Uf.getPattern(e,t,i)&&Uf.set(e,t,i,a,s),a}function Zp(n){return n?Array.isArray(n)?y8(n):typeof n=="object"&&"src"in n?eJ(n):n:null}function eJ(n){if(!n.offset||!n.size)return Uf.getPattern(n.src,"anonymous",n.color);const e=n.src+":"+n.offset,t=Uf.getPattern(e,void 0,n.color);if(t)return t;const r=Uf.get(n.src,"anonymous",null);if(r.getImageState()!==di.LOADED)return null;const i=Ru(n.size[0],n.size[1]);return i.drawImage(r.getImage(1),n.offset[0],n.offset[1],n.size[0],n.size[1],0,0,n.size[0],n.size[1]),C8(i.canvas,e,void 0,di.LOADED,n.color,!0),Uf.getPattern(e,void 0,n.color)}const Ry={PROPERTYCHANGE:"propertychange"};class o_ extends i_{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(lo.CHANGE)}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){const r=e.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=Ks(this,e[s],t);return i}return Ks(this,e,t)}onceInternal(e,t){let r;if(Array.isArray(e)){const i=e.length;r=new Array(i);for(let s=0;s<i;++s)r[s]=b2(this,e[s],t)}else r=b2(this,e,t);return t.ol_key=r,r}unInternal(e,t){const r=t.ol_key;if(r)tJ(r);else if(Array.isArray(e))for(let i=0,s=e.length;i<s;++i)this.removeEventListener(e[i],t);else this.removeEventListener(e,t)}}o_.prototype.on;o_.prototype.once;o_.prototype.un;function tJ(n){if(Array.isArray(n))for(let e=0,t=n.length;e<t;++e)ul(n[e]);else ul(n)}function xo(){throw new Error("Unimplemented abstract method.")}let nJ=0;function Go(n){return n.ol_uid||(n.ol_uid=String(++nJ))}class y9 extends wp{constructor(e,t,r){super(e),this.key=t,this.oldValue=r}}class Mp extends o_{constructor(e){super(),this.on,this.once,this.un,Go(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,t){let r;r=`change:${e}`,this.hasListener(r)&&this.dispatchEvent(new y9(r,e,t)),r=Ry.PROPERTYCHANGE,this.hasListener(r)&&this.dispatchEvent(new y9(r,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,r){const i=this.values_||(this.values_={});if(r)i[e]=t;else{const s=i[e];i[e]=t,s!==t&&this.notify(e,s)}}setProperties(e,t){for(const r in e)this.set(r,e[r],t)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){const r=this.values_[e];delete this.values_[e],z0(this.values_)&&(this.values_=null),t||this.notify(e,r)}}}const ub="ol-hidden",rJ="ol-selectable",Kx="ol-unselectable",_8="ol-control",v9="ol-collapsed",iJ=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),C9=["style","variant","weight","size","lineHeight","family"],cz=function(n){const e=n.match(iJ);if(!e)return null;const t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let r=0,i=C9.length;r<i;++r){const s=e[r+1];s!==void 0&&(t[C9[r]]=s)}return t.families=t.family.split(/,\s?/),t},dz="10px sans-serif",ch="#000",Fy="round",Lm=[],Um=0,Ly="round",SC=10,EC="#000",BC="center",x2="middle",Mg=[0,0,0,0],OC=1,jp=new Mp;let X1=null,$6;const V6={},hz=function(){const e="32px ",t=["monospace","serif"],r=t.length,i="wmytzilWMYTZIL@#/&?$%10";let s,a;function o(g,b,E){let S=!0;for(let I=0;I<r;++I){const P=t[I];if(a=w2(g+" "+b+" "+e+P,i),E!=P){const z=w2(g+" "+b+" "+e+E+","+P,i);S=S&&z!=a}}return!!S}function d(){let g=!0;const b=jp.getKeys();for(let E=0,S=b.length;E<S;++E){const I=b[E];if(jp.get(I)<100){const[P,z,j]=I.split(`
`);o(P,z,j)?(r_(V6),X1=null,$6=void 0,jp.set(I,100)):(jp.set(I,jp.get(I)+1,!0),g=!1)}}g&&(clearInterval(s),s=void 0)}return function(g){const b=cz(g);if(!b)return;const E=b.families;for(let S=0,I=E.length;S<I;++S){const P=E[S],z=b.style+`
`+b.weight+`
`+P;jp.get(z)===void 0&&(jp.set(z,100,!0),o(b.style,b.weight,P)||(jp.set(z,0,!0),s===void 0&&(s=setInterval(d,32))))}}}(),oJ=function(){let n;return function(e){let t=V6[e];if(t==null){if(oz){const r=cz(e),i=fz(e,"g");t=(isNaN(Number(r.lineHeight))?1.2:Number(r.lineHeight))*(i.actualBoundingBoxAscent+i.actualBoundingBoxDescent)}else n||(n=document.createElement("div"),n.innerHTML="M",n.style.minHeight="0",n.style.maxHeight="none",n.style.height="auto",n.style.padding="0",n.style.border="none",n.style.position="absolute",n.style.display="block",n.style.left="-99999px"),n.style.font=e,document.body.appendChild(n),t=n.offsetHeight,document.body.removeChild(n);V6[e]=t}return t}}();function fz(n,e){return X1||(X1=Ru(1,1)),n!=$6&&(X1.font=n,$6=X1.font),X1.measureText(e)}function w2(n,e){return fz(n,e).width}function _9(n,e,t){if(e in t)return t[e];const r=e.split(`
`).reduce((i,s)=>Math.max(i,w2(n,s)),0);return t[e]=r,r}function sJ(n,e){const t=[],r=[],i=[];let s=0,a=0,o=0,d=0;for(let g=0,b=e.length;g<=b;g+=2){const E=e[g];if(E===`
`||g===b){s=Math.max(s,a),i.push(a),a=0,o+=d,d=0;continue}const S=e[g+1]||n.font,I=w2(S,E);t.push(I),a+=I;const P=oJ(S);r.push(P),d=Math.max(d,P)}return{width:s,height:o,widths:t,heights:r,lineWidths:i}}function aJ(n,e,t,r,i,s,a,o,d,g,b){n.save(),t!==1&&(n.globalAlpha===void 0?n.globalAlpha=E=>E.globalAlpha*=t:n.globalAlpha*=t),e&&n.transform.apply(n,e),r.contextInstructions?(n.translate(d,g),n.scale(b[0],b[1]),lJ(r,n)):b[0]<0||b[1]<0?(n.translate(d,g),n.scale(b[0],b[1]),n.drawImage(r,i,s,a,o,0,0,a,o)):n.drawImage(r,i,s,a,o,d,g,a*b[0],o*b[1]),n.restore()}function lJ(n,e){const t=n.contextInstructions;for(let r=0,i=t.length;r<i;r+=2)Array.isArray(t[r+1])?e[t[r]].apply(e,t[r+1]):e[t[r]]=t[r+1]}function b9(n){return n[0]>0&&n[1]>0}function uJ(n,e,t){return t===void 0&&(t=[0,0]),t[0]=n[0]*e+.5|0,t[1]=n[1]*e+.5|0,t}function Ad(n,e){return Array.isArray(n)?n:(e===void 0?e=[n,n]:(e[0]=n,e[1]=n),e)}class Dx{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=Ad(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new Dx({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return xo()}getImage(e){return xo()}getHitDetectionImage(){return xo()}getPixelRatio(e){return 1}getImageState(){return xo()}getImageSize(){return xo()}getOrigin(){return xo()}getSize(){return xo()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=Ad(e)}listenImageChange(e){xo()}load(){xo()}unlistenImageChange(e){xo()}ready(){return Promise.resolve()}}class Rx extends Dx{constructor(e){super({opacity:1,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius=e.radius,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?di.LOADING:di.LOADED,this.imageState_===di.LOADING&&this.ready().then(()=>this.imageState_=di.LOADED),this.render()}clone(){const e=this.getScale(),t=new Rx({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}getAnchor(){const e=this.size_,t=this.getDisplacement(),r=this.getScaleArray();return[e[0]/2-t[0]/r[0],e[1]/2+t[1]/r[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){var s,a;const t=(s=this.fill_)==null?void 0:s.getKey(),r=`${e},${this.angle_},${this.radius},${this.radius2_},${this.points_},${t}`+Object.values(this.renderOptions_).join(",");let i=(a=Uf.get(r,null,null))==null?void 0:a.getImage(1);if(!i){const o=this.renderOptions_,d=Math.ceil(o.size*e),g=Ru(d,d);this.draw_(o,g,e),i=g.canvas,Uf.set(r,null,null,new Az(i,void 0,null,di.LOADED,null))}return i}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,r){if(t===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return t;let i=this.radius,s=this.radius2_===void 0?i:this.radius2_;if(i<s){const ne=i;i=s,s=ne}const a=this.radius2_===void 0?this.points_:this.points_*2,o=2*Math.PI/a,d=s*Math.sin(o),g=Math.sqrt(s*s-d*d),b=i-g,E=Math.sqrt(d*d+b*b),S=E/d;if(e==="miter"&&S<=r)return S*t;const I=t/2/S,P=t/2*(b/E),j=Math.sqrt((i+I)*(i+I)+P*P)-i;if(this.radius2_===void 0||e==="bevel")return j*2;const q=i*Math.sin(o),Y=Math.sqrt(i*i-q*q),ie=s-Y,V=Math.sqrt(q*q+ie*ie)/q;if(V<=r){const ne=V*t/2-s-i;return 2*Math.max(j,ne)}return j*2}createRenderOptions(){let e=Fy,t=Ly,r=0,i=null,s=0,a,o=0;this.stroke_&&(a=Zp(this.stroke_.getColor()??EC),o=this.stroke_.getWidth()??OC,i=this.stroke_.getLineDash(),s=this.stroke_.getLineDashOffset()??0,t=this.stroke_.getLineJoin()??Ly,e=this.stroke_.getLineCap()??Fy,r=this.stroke_.getMiterLimit()??SC);const d=this.calculateLineJoinSize_(t,o,r),g=Math.max(this.radius,this.radius2_||0),b=Math.ceil(2*g+d);return{strokeStyle:a,strokeWidth:o,size:b,lineCap:e,lineDash:i,lineDashOffset:s,lineJoin:t,miterLimit:r}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,t,r){if(t.scale(r,r),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let i=this.fill_.getColor();i===null&&(i=ch),t.fillStyle=Zp(i),t.fill()}e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){let t;if(this.fill_){let r=this.fill_.getColor(),i=0;typeof r=="string"&&(r=Py(r)),r===null?i=1:Array.isArray(r)&&(i=r.length===4?r[3]:1),i===0&&(t=Ru(e.size,e.size),this.drawHitDetectionCanvas_(e,t))}return t?t.canvas:this.getImage(1)}createPath_(e){let t=this.points_;const r=this.radius;if(t===1/0)e.arc(0,0,r,0,2*Math.PI);else{const i=this.radius2_===void 0?r:this.radius2_;this.radius2_!==void 0&&(t*=2);const s=this.angle_-Math.PI/2,a=2*Math.PI/t;for(let o=0;o<t;o++){const d=s+o*a,g=o%2===0?r:i;e.lineTo(g*Math.cos(d),g*Math.sin(d))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=ch,t.fill(),e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class s_ extends Rx{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),t=new s_({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}setRadius(e){this.radius=e,this.render()}}class Dm{constructor(e){e=e||{},this.patternImage_=null,this.color_=null,e.color!==void 0&&this.setColor(e.color)}clone(){const e=this.getColor();return new Dm({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){if(e!==null&&typeof e=="object"&&"src"in e){const t=C8(null,e.src,"anonymous",void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));t.ready().then(()=>{this.patternImage_=null}),t.getImageState()===di.IDLE&&t.load(),t.getImageState()===di.LOADING&&(this.patternImage_=t)}this.color_=e}getKey(){const e=this.getColor();return e?e instanceof CanvasPattern||e instanceof CanvasGradient?Go(e):typeof e=="object"&&"src"in e?e.src+":"+e.offset:Py(e).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}function Xs(n,e){if(!n)throw new Error(e)}function x9(n,e,t,r){return t!==void 0&&r!==void 0?[t/n,r/e]:t!==void 0?t/n:r!==void 0?r/e:1}let M2=class pz extends Dx{constructor(e){e=e||{};const t=e.opacity!==void 0?e.opacity:1,r=e.rotation!==void 0?e.rotation:0,i=e.scale!==void 0?e.scale:1,s=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:t,rotation:r,scale:i,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:s,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const a=e.img!==void 0?e.img:null;let o=e.src;Xs(!(o!==void 0&&a),"`image` and `src` cannot be provided at the same time"),(o===void 0||o.length===0)&&a&&(o=a.src||Go(a)),Xs(o!==void 0&&o.length>0,"A defined and non-empty `src` or `image` must be provided"),Xs(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let d;if(e.src!==void 0?d=di.IDLE:a!==void 0&&("complete"in a?a.complete?d=a.src?di.LOADED:di.IDLE:d=di.LOADING:d=di.LOADED),this.color_=e.color!==void 0?Py(e.color):null,this.iconImage_=C8(a,o,this.crossOrigin_,d,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,this.initialOptions_,e.width!==void 0||e.height!==void 0){let g,b;if(e.size)[g,b]=e.size;else{const E=this.getImage(1);if(E.width&&E.height)g=E.width,b=E.height;else if(E instanceof HTMLImageElement){this.initialOptions_=e;const S=()=>{if(this.unlistenImageChange(S),!this.initialOptions_)return;const I=this.iconImage_.getSize();this.setScale(x9(I[0],I[1],e.width,e.height))};this.listenImageChange(S);return}}g!==void 0&&this.setScale(x9(g,b,e.width,e.height))}}clone(){let e,t,r;return this.initialOptions_?(t=this.initialOptions_.width,r=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new pz({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:t,height:r,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const i=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!i)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=i[0]),this.anchorYUnits_=="fraction"&&(e[1]*=i[1])}if(this.anchorOrigin_!="top-left"){if(!i)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+i[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+i[1])}this.normalizedAnchor_=e}const t=this.getDisplacement(),r=this.getScaleArray();return[e[0]-t[0]/r[0],e[1]+t[1]/r[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const t=this.getSize(),r=this.iconImage_.getSize();if(!t||!r)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=r[0]-t[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=r[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==di.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){const e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==di.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(lo.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(lo.CHANGE,e)}ready(){return this.iconImage_.ready()}};class Fx extends Mp{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const t=e;this.setGeometry(t)}else{const t=e;this.setProperties(t)}}clone(){const e=new Fx(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const t=this.getGeometry();t&&e.setGeometry(t.clone());const r=this.getStyle();return r&&e.setStyle(r),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(ul(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=Ks(e,lo.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?AJ(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function AJ(n){if(typeof n=="function")return n;let e;return Array.isArray(n)?e=n:(Xs(typeof n.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[n]),function(){return e}}const vc={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function H6(n){const e=Wf();for(let t=0,r=n.length;t<r;++t)lC(e,n[t]);return e}function cJ(n,e,t){const r=Math.min.apply(null,n),i=Math.min.apply(null,e),s=Math.max.apply(null,n),a=Math.max.apply(null,e);return Nm(r,i,s,a,t)}function D0(n,e,t){return t?(t[0]=n[0]-e,t[1]=n[1]-e,t[2]=n[2]+e,t[3]=n[3]+e,t):[n[0]-e,n[1]-e,n[2]+e,n[3]+e]}function mz(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n.slice()}function Yg(n,e,t){let r,i;return e<n[0]?r=n[0]-e:n[2]<e?r=e-n[2]:r=0,t<n[1]?i=n[1]-t:n[3]<t?i=t-n[3]:i=0,r*r+i*i}function zg(n,e){return b8(n,e[0],e[1])}function Xp(n,e){return n[0]<=e[0]&&e[2]<=n[2]&&n[1]<=e[1]&&e[3]<=n[3]}function b8(n,e,t){return n[0]<=e&&e<=n[2]&&n[1]<=t&&t<=n[3]}function Z6(n,e){const t=n[0],r=n[1],i=n[2],s=n[3],a=e[0],o=e[1];let d=vc.UNKNOWN;return a<t?d=d|vc.LEFT:a>i&&(d=d|vc.RIGHT),o<r?d=d|vc.BELOW:o>s&&(d=d|vc.ABOVE),d===vc.UNKNOWN&&(d=vc.INTERSECTING),d}function Wf(){return[1/0,1/0,-1/0,-1/0]}function Nm(n,e,t,r,i){return i?(i[0]=n,i[1]=e,i[2]=t,i[3]=r,i):[n,e,t,r]}function Vy(n){return Nm(1/0,1/0,-1/0,-1/0,n)}function gz(n,e){const t=n[0],r=n[1];return Nm(t,r,t,r,e)}function x8(n,e,t,r,i){const s=Vy(i);return vz(s,n,e,t,r)}function Wm(n,e){return n[0]==e[0]&&n[2]==e[2]&&n[1]==e[1]&&n[3]==e[3]}function yz(n,e){return e[0]<n[0]&&(n[0]=e[0]),e[2]>n[2]&&(n[2]=e[2]),e[1]<n[1]&&(n[1]=e[1]),e[3]>n[3]&&(n[3]=e[3]),n}function lC(n,e){e[0]<n[0]&&(n[0]=e[0]),e[0]>n[2]&&(n[2]=e[0]),e[1]<n[1]&&(n[1]=e[1]),e[1]>n[3]&&(n[3]=e[1])}function vz(n,e,t,r,i){for(;t<r;t+=i)dJ(n,e[t],e[t+1]);return n}function dJ(n,e,t){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}function Cz(n,e){let t;return t=e(Lx(n)),t||(t=e(Ux(n)),t)||(t=e(zx(n)),t)||(t=e(Qm(n)),t)?t:!1}function X6(n){let e=0;return $g(n)||(e=Ds(n)*sA(n)),e}function Lx(n){return[n[0],n[1]]}function Ux(n){return[n[2],n[1]]}function Gf(n){return[(n[0]+n[2])/2,(n[1]+n[3])/2]}function hJ(n,e){let t;if(e==="bottom-left")t=Lx(n);else if(e==="bottom-right")t=Ux(n);else if(e==="top-left")t=Qm(n);else if(e==="top-right")t=zx(n);else throw new Error("Invalid corner");return t}function S2(n,e,t,r,i){const[s,a,o,d,g,b,E,S]=_z(n,e,t,r);return Nm(Math.min(s,o,g,E),Math.min(a,d,b,S),Math.max(s,o,g,E),Math.max(a,d,b,S),i)}function _z(n,e,t,r){const i=e*r[0]/2,s=e*r[1]/2,a=Math.cos(t),o=Math.sin(t),d=i*a,g=i*o,b=s*a,E=s*o,S=n[0],I=n[1];return[S-d+E,I-g-b,S-d-E,I-g+b,S+d-E,I+g+b,S+d+E,I+g-b,S-d+E,I-g-b]}function sA(n){return n[3]-n[1]}function _p(n,e,t){const r=t||Wf();return Du(n,e)?(n[0]>e[0]?r[0]=n[0]:r[0]=e[0],n[1]>e[1]?r[1]=n[1]:r[1]=e[1],n[2]<e[2]?r[2]=n[2]:r[2]=e[2],n[3]<e[3]?r[3]=n[3]:r[3]=e[3]):Vy(r),r}function Qm(n){return[n[0],n[3]]}function zx(n){return[n[2],n[3]]}function Ds(n){return n[2]-n[0]}function Du(n,e){return n[0]<=e[2]&&n[2]>=e[0]&&n[1]<=e[3]&&n[3]>=e[1]}function $g(n){return n[2]<n[0]||n[3]<n[1]}function fJ(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n}function pJ(n,e,t){let r=!1;const i=Z6(n,e),s=Z6(n,t);if(i===vc.INTERSECTING||s===vc.INTERSECTING)r=!0;else{const a=n[0],o=n[1],d=n[2],g=n[3],b=e[0],E=e[1],S=t[0],I=t[1],P=(I-E)/(S-b);let z,j;s&vc.ABOVE&&!(i&vc.ABOVE)&&(z=S-(I-g)/P,r=z>=a&&z<=d),!r&&s&vc.RIGHT&&!(i&vc.RIGHT)&&(j=I-(S-d)*P,r=j>=o&&j<=g),!r&&s&vc.BELOW&&!(i&vc.BELOW)&&(z=S-(I-o)/P,r=z>=a&&z<=d),!r&&s&vc.LEFT&&!(i&vc.LEFT)&&(j=I-(S-a)*P,r=j>=o&&j<=g)}return r}function mJ(n,e,t,r){if($g(n))return Vy(t);let i=[];i=[n[0],n[1],n[2],n[1],n[2],n[3],n[0],n[3]],e(i,i,2);const s=[],a=[];for(let o=0,d=i.length;o<d;o+=2)s.push(i[o]),a.push(i[o+1]);return cJ(s,a,t)}function bz(n,e){const t=e.getExtent(),r=Gf(n);if(e.canWrapX()&&(r[0]<t[0]||r[0]>=t[2])){const i=Ds(t),a=Math.floor((r[0]-t[0])/i)*i;n[0]-=a,n[2]-=a}return n}function xz(n,e,t){if(e.canWrapX()){const r=e.getExtent();if(!isFinite(n[0])||!isFinite(n[2]))return[[r[0],n[1],r[2],n[3]]];bz(n,e);const i=Ds(r);if(Ds(n)>i&&!t)return[[r[0],n[1],r[2],n[3]]];if(n[0]<r[0])return[[n[0]+i,n[1],r[2],n[3]],[r[0],n[1],n[2],n[3]]];if(n[2]>r[2])return[[n[0],n[1],r[2],n[3]],[r[0],n[1],n[2]-i,n[3]]]}return[n]}function wz(n,e,t,r){const i=[];let s=Wf();for(let a=0,o=t.length;a<o;++a){const d=t[a];s=x8(n,e,d[0],r),i.push((s[0]+s[2])/2,(s[1]+s[3])/2),e=d[d.length-1]}return i}function gJ(n,e,t,r,i){return!Cz(i,function(a){return!Sg(n,e,t,r,a[0],a[1])})}function Sg(n,e,t,r,i,s){let a=0,o=n[t-r],d=n[t-r+1];for(;e<t;e+=r){const g=n[e],b=n[e+1];d<=s?b>s&&(g-o)*(s-d)-(i-o)*(b-d)>0&&a++:b<=s&&(g-o)*(s-d)-(i-o)*(b-d)<0&&a--,o=g,d=b}return a!==0}function w8(n,e,t,r,i,s){if(t.length===0||!Sg(n,e,t[0],r,i,s))return!1;for(let a=1,o=t.length;a<o;++a)if(Sg(n,t[a-1],t[a],r,i,s))return!1;return!0}function yJ(n,e,t,r,i,s){if(t.length===0)return!1;for(let a=0,o=t.length;a<o;++a){const d=t[a];if(w8(n,e,d,r,i,s))return!0;e=d[d.length-1]}return!1}function M8(n,e,t,r,i,s,a){let o,d,g,b,E,S,I;const P=i[s+1],z=[];for(let Y=0,ie=t.length;Y<ie;++Y){const te=t[Y];for(b=n[te-r],S=n[te-r+1],o=e;o<te;o+=r)E=n[o],I=n[o+1],(P<=S&&I<=P||S<=P&&P<=I)&&(g=(P-S)/(I-S)*(E-b)+b,z.push(g)),b=E,S=I}let j=NaN,q=-1/0;for(z.sort(Fm),b=z[0],o=1,d=z.length;o<d;++o){E=z[o];const Y=Math.abs(E-b);Y>q&&(g=(b+E)/2,w8(n,e,t,r,g,P)&&(j=g,q=Y)),b=E}return isNaN(j)&&(j=i[s]),a?(a.push(j,P,q),a):[j,P,q]}function Mz(n,e,t,r,i){let s=[];for(let a=0,o=t.length;a<o;++a){const d=t[a];s=M8(n,e,d,r,i,2*a,s),e=d[d.length-1]}return s}function E2(n,e,t,r,i,s,a){let o,d;const g=(t-e)/r;if(g===1)o=e;else if(g===2)o=e,d=i;else if(g!==0){let b=n[e],E=n[e+1],S=0;const I=[0];for(let j=e+r;j<t;j+=r){const q=n[j],Y=n[j+1];S+=Math.sqrt((q-b)*(q-b)+(Y-E)*(Y-E)),I.push(S),b=q,E=Y}const P=i*S,z=qX(I,P);z<0?(d=(P-I[-z-2])/(I[-z-1]-I[-z-2]),o=e+(-z-2)*r):o=e+z*r}a=a>1?a:2,s=s||new Array(a);for(let b=0;b<a;++b)s[b]=o===void 0?NaN:d===void 0?n[o+b]:Vh(n[o+b],n[o+r+b],d);return s}function J6(n,e,t,r,i,s){if(t==e)return null;let a;if(i<n[e+r-1])return s?(a=n.slice(e,e+r),a[r-1]=i,a):null;if(n[t-1]<i)return s?(a=n.slice(t-r,t),a[r-1]=i,a):null;if(i==n[e+r-1])return n.slice(e,e+r);let o=e/r,d=t/r;for(;o<d;){const S=o+d>>1;i<n[(S+1)*r-1]?d=S:o=S+1}const g=n[o*r-1];if(i==g)return n.slice((o-1)*r,(o-1)*r+r);const b=n[(o+1)*r-1],E=(i-g)/(b-g);a=[];for(let S=0;S<r-1;++S)a.push(Vh(n[(o-1)*r+S],n[o*r+S],E));return a.push(i),a}function vJ(n,e,t,r,i,s,a){if(a)return J6(n,e,t[t.length-1],r,i,s);let o;if(i<n[r-1])return s?(o=n.slice(0,r),o[r-1]=i,o):null;if(n[n.length-1]<i)return s?(o=n.slice(n.length-r),o[r-1]=i,o):null;for(let d=0,g=t.length;d<g;++d){const b=t[d];if(e!=b){if(i<n[e+r-1])return null;if(i<=n[b-1])return J6(n,e,b,r,i,!1);e=b}}return null}function CJ(n,e,t,r){for(;e<t-r;){for(let i=0;i<r;++i){const s=n[e+i];n[e+i]=n[t-r+i],n[t-r+i]=s}e+=r,t-=r}}function S8(n,e,t,r){let i=0,s=n[t-r],a=n[t-r+1];for(;e<t;e+=r){const o=n[e],d=n[e+1];i+=(o-s)*(d+a),s=o,a=d}return i===0?void 0:i>0}function E8(n,e,t,r,i){i=i!==void 0?i:!1;for(let s=0,a=t.length;s<a;++s){const o=t[s],d=S8(n,e,o,r);if(s===0){if(i&&d||!i&&!d)return!1}else if(i&&!d||!i&&d)return!1;e=o}return!0}function Sz(n,e,t,r,i){for(let s=0,a=t.length;s<a;++s){const o=t[s];if(!E8(n,e,o,r,i))return!1;o.length&&(e=o[o.length-1])}return!0}function B2(n,e,t,r,i){i=i!==void 0?i:!1;for(let s=0,a=t.length;s<a;++s){const o=t[s],d=S8(n,e,o,r);(s===0?i&&d||!i&&!d:i&&!d||!i&&d)&&CJ(n,e,o,r),e=o}return e}function eB(n,e,t,r,i){for(let s=0,a=t.length;s<a;++s)e=B2(n,e,t[s],r,i);return e}function Ez(n,e){const t=[];let r=0,i=0,s;for(let a=0,o=e.length;a<o;++a){const d=e[a],g=S8(n,r,d,2);if(s===void 0&&(s=g),g===s)t.push(e.slice(i,a+1));else{if(t.length===0)continue;t[t.length-1].push(e[i])}i=a+1,r=d}return t}function jx(n,e,t,r,i,s,a){const o=(t-e)/r;if(o<3){for(;e<t;e+=r)s[a++]=n[e],s[a++]=n[e+1];return a}const d=new Array(o);d[0]=1,d[o-1]=1;const g=[e,t-r];let b=0;for(;g.length>0;){const E=g.pop(),S=g.pop();let I=0;const P=n[S],z=n[S+1],j=n[E],q=n[E+1];for(let Y=S+r;Y<E;Y+=r){const ie=n[Y],te=n[Y+1],V=PX(ie,te,P,z,j,q);V>I&&(b=Y,I=V)}I>i&&(d[(b-e)/r]=1,S+r<b&&g.push(S,b),b+r<E&&g.push(b,E))}for(let E=0;E<o;++E)d[E]&&(s[a++]=n[e+E*r],s[a++]=n[e+E*r+1]);return a}function Bz(n,e,t,r,i,s,a,o){for(let d=0,g=t.length;d<g;++d){const b=t[d];a=jx(n,e,b,r,i,s,a),o.push(a),e=b}return a}function yg(n,e){return e*Math.round(n/e)}function _J(n,e,t,r,i,s,a){if(e==t)return a;let o=yg(n[e],i),d=yg(n[e+1],i);e+=r,s[a++]=o,s[a++]=d;let g,b;do if(g=yg(n[e],i),b=yg(n[e+1],i),e+=r,e==t)return s[a++]=g,s[a++]=b,a;while(g==o&&b==d);for(;e<t;){const E=yg(n[e],i),S=yg(n[e+1],i);if(e+=r,E==g&&S==b)continue;const I=g-o,P=b-d,z=E-o,j=S-d;if(I*j==P*z&&(I<0&&z<I||I==z||I>0&&z>I)&&(P<0&&j<P||P==j||P>0&&j>P)){g=E,b=S;continue}s[a++]=g,s[a++]=b,o=g,d=b,g=E,b=S}return s[a++]=g,s[a++]=b,a}function B8(n,e,t,r,i,s,a,o){for(let d=0,g=t.length;d<g;++d){const b=t[d];a=_J(n,e,b,r,i,s,a),o.push(a),e=b}return a}function bJ(n,e,t,r,i,s,a,o){for(let d=0,g=t.length;d<g;++d){const b=t[d],E=[];a=B8(n,e,b,r,i,s,a,E),o.push(E),e=b[b.length-1]}return a}function R0(n,e,t,r,i,s,a){s=s||[],a=a||2;let o=0;for(let d=e;d<t;d+=r){const g=n[d],b=n[d+1];s[o++]=i[0]*g+i[2]*b+i[4],s[o++]=i[1]*g+i[3]*b+i[5];for(let E=2;E<a;E++)s[o++]=n[d+E]}return s&&s.length!=o&&(s.length=o),s}function Oz(n,e,t,r,i,s,a){a=a||[];const o=Math.cos(i),d=Math.sin(i),g=s[0],b=s[1];let E=0;for(let S=e;S<t;S+=r){const I=n[S]-g,P=n[S+1]-b;a[E++]=g+I*o-P*d,a[E++]=b+I*d+P*o;for(let z=S+2;z<S+r;++z)a[E++]=n[z]}return a&&a.length!=E&&(a.length=E),a}function xJ(n,e,t,r,i,s,a,o){o=o||[];const d=a[0],g=a[1];let b=0;for(let E=e;E<t;E+=r){const S=n[E]-d,I=n[E+1]-g;o[b++]=d+i*S,o[b++]=g+s*I;for(let P=E+2;P<E+r;++P)o[b++]=n[P]}return o&&o.length!=b&&(o.length=b),o}function wJ(n,e,t,r,i,s,a){a=a||[];let o=0;for(let d=e;d<t;d+=r){a[o++]=n[d]+i,a[o++]=n[d+1]+s;for(let g=d+2;g<d+r;++g)a[o++]=n[g]}return a&&a.length!=o&&(a.length=o),a}function Iz(...n){console.warn(...n)}function MJ(n,e){return n[0]+=+e[0],n[1]+=+e[1],n}function O2(n,e){let t=!0;for(let r=n.length-1;r>=0;--r)if(n[r]!=e[r]){t=!1;break}return t}function O8(n,e){const t=Math.cos(e),r=Math.sin(e),i=n[0]*t-n[1]*r,s=n[1]*t+n[0]*r;return n[0]=i,n[1]=s,n}function SJ(n,e){return n[0]*=e,n[1]*=e,n}function I8(n,e){if(e.canWrapX()){const t=Ds(e.getExtent()),r=EJ(n,e,t);r&&(n[0]-=r*t)}return n}function EJ(n,e,t){const r=e.getExtent();let i=0;return e.canWrapX()&&(n[0]<r[0]||n[0]>r[2])&&(t=t||Ds(r),i=Math.floor((n[0]-r[0])/t)),i}const j0={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class Nx{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||j0[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const a_=6378137,sy=Math.PI*a_,BJ=[-sy,-sy,sy,sy],OJ=[-180,-85,180,85],Ab=a_*Math.log(Math.tan(Math.PI/2));class C1 extends Nx{constructor(e){super({code:e,units:"m",extent:BJ,global:!0,worldExtent:OJ,getPointResolution:function(t,r){return t/Math.cosh(r[1]/a_)}})}}const w9=[new C1("EPSG:3857"),new C1("EPSG:102100"),new C1("EPSG:102113"),new C1("EPSG:900913"),new C1("http://www.opengis.net/def/crs/EPSG/0/3857"),new C1("http://www.opengis.net/gml/srs/epsg.xml#3857")];function IJ(n,e,t,r){const i=n.length;t=t>1?t:2,r=r??t,e===void 0&&(t>2?e=n.slice():e=new Array(i));for(let s=0;s<i;s+=r){e[s]=sy*n[s]/180;let a=a_*Math.log(Math.tan(Math.PI*(+n[s+1]+90)/360));a>Ab?a=Ab:a<-Ab&&(a=-Ab),e[s+1]=a}return e}function kJ(n,e,t,r){const i=n.length;t=t>1?t:2,r=r??t,e===void 0&&(t>2?e=n.slice():e=new Array(i));for(let s=0;s<i;s+=r)e[s]=180*n[s]/sy,e[s+1]=360*Math.atan(Math.exp(n[s+1]/a_))/Math.PI-90;return e}const TJ=6378137,M9=[-180,-90,180,90],PJ=Math.PI*TJ/180;class ug extends Nx{constructor(e,t){super({code:e,units:"degrees",extent:M9,axisOrientation:t,global:!0,metersPerUnit:PJ,worldExtent:M9})}}const S9=[new ug("CRS:84"),new ug("EPSG:4326","neu"),new ug("urn:ogc:def:crs:OGC:1.3:CRS84"),new ug("urn:ogc:def:crs:OGC:2:84"),new ug("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new ug("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new ug("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let tB={};function KJ(n){return tB[n]||tB[n.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function DJ(n,e){tB[n]=e}let yy={};function IC(n,e,t){const r=n.getCode(),i=e.getCode();r in yy||(yy[r]={}),yy[r][i]=t}function G4(n,e){return n in yy&&e in yy[n]?yy[n][e]:null}const I2=.9996,Nf=.00669438,Wx=Nf*Nf,Gx=Wx*Nf,Eg=Nf/(1-Nf),E9=Math.sqrt(1-Nf),Uy=(1-E9)/(1+E9),kz=Uy*Uy,k8=kz*Uy,T8=k8*Uy,Tz=T8*Uy,Pz=1-Nf/4-3*Wx/64-5*Gx/256,RJ=3*Nf/8+3*Wx/32+45*Gx/1024,FJ=15*Wx/256+45*Gx/1024,LJ=35*Gx/3072,UJ=3/2*Uy-27/32*k8+269/512*Tz,zJ=21/16*kz-55/32*T8,jJ=151/96*k8-417/128*Tz,NJ=1097/512*T8,k2=6378137;function WJ(n,e,t){const r=n-5e5,a=(t.north?e:e-1e7)/I2/(k2*Pz),o=a+UJ*Math.sin(2*a)+zJ*Math.sin(4*a)+jJ*Math.sin(6*a)+NJ*Math.sin(8*a),d=Math.sin(o),g=d*d,b=Math.cos(o),E=d/b,S=E*E,I=S*S,P=1-Nf*g,z=Math.sqrt(1-Nf*g),j=k2/z,q=(1-Nf)/P,Y=Eg*b**2,ie=Y*Y,te=r/(j*I2),V=te*te,ne=V*te,G=ne*te,oe=G*te,he=oe*te,pe=o-E/q*(V/2-G/24*(5+3*S+10*Y-4*ie-9*Eg))+he/720*(61+90*S+298*Y+45*I-252*Eg-3*ie);let Ee=(te-ne/6*(1+2*S+Y)+oe/120*(5-2*Y+28*S-3*ie+8*Eg+24*I))/b;return Ee=Y6(Ee+K0(Kz(t.number)),-Math.PI,Math.PI),[p9(Ee),p9(pe)]}const B9=-80,O9=84,GJ=-180,QJ=180;function qJ(n,e,t){n=Y6(n,GJ,QJ),e<B9?e=B9:e>O9&&(e=O9);const r=K0(e),i=Math.sin(r),s=Math.cos(r),a=i/s,o=a*a,d=o*o,g=K0(n),b=Kz(t.number),E=K0(b),S=k2/Math.sqrt(1-Nf*i**2),I=Eg*s**2,P=s*Y6(g-E,-Math.PI,Math.PI),z=P*P,j=z*P,q=j*P,Y=q*P,ie=Y*P,te=k2*(Pz*r-RJ*Math.sin(2*r)+FJ*Math.sin(4*r)-LJ*Math.sin(6*r)),V=I2*S*(P+j/6*(1-o+I)+Y/120*(5-18*o+d+72*I-58*Eg))+5e5;let ne=I2*(te+S*a*(z/2+q/24*(5-o+9*I+4*I**2)+ie/720*(61-58*o+d+600*I-330*Eg)));return t.north||(ne+=1e7),[V,ne]}function Kz(n){return(n-1)*6-180+3}const YJ=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function Dz(n){let e=0;for(const i of YJ){const s=n.match(i);if(s){e=parseInt(s[1]);break}}if(!e)return null;let t=0,r=!1;return e>32700&&e<32761?t=e-32700:e>32600&&e<32661&&(r=!0,t=e-32600),t?{number:t,north:r}:null}function I9(n,e){return function(t,r,i,s){const a=t.length;i=i>1?i:2,s=s??i,r||(i>2?r=t.slice():r=new Array(a));for(let o=0;o<a;o+=s){const d=t[o],g=t[o+1],b=n(d,g,e);r[o]=b[0],r[o+1]=b[1]}return r}}function $J(n){return Dz(n)?new Nx({code:n,units:"m"}):null}function VJ(n){const e=Dz(n.getCode());return e?{forward:I9(qJ,e),inverse:I9(WJ,e)}:null}const HJ=63710088e-1;function k9(n,e,t){t=t||HJ;const r=K0(n[1]),i=K0(e[1]),s=(i-r)/2,a=K0(e[0]-n[0])/2,o=Math.sin(s)*Math.sin(s)+Math.sin(a)*Math.sin(a)*Math.cos(r)*Math.cos(i);return 2*t*Math.atan2(Math.sqrt(o),Math.sqrt(1-o))}const ZJ=[VJ],XJ=[$J];let nB=!0;function Rz(n){nB=!1}function P8(n,e){if(e!==void 0){for(let t=0,r=n.length;t<r;++t)e[t]=n[t];e=e}else e=n.slice();return e}function rB(n){DJ(n.getCode(),n),IC(n,n,P8)}function JJ(n){n.forEach(rB)}function wa(n){if(typeof n!="string")return n;const e=KJ(n);if(e)return e;for(const t of XJ){const r=t(n);if(r)return r}return null}function iB(n,e,t,r){n=wa(n);let i;const s=n.getPointResolutionFunc();if(s){if(i=s(e,t),r&&r!==n.getUnits()){const a=n.getMetersPerUnit();a&&(i=i*a/j0[r])}}else{const a=n.getUnits();if(a=="degrees"&&!r||r=="degrees")i=e;else{const o=l_(n,wa("EPSG:4326"));if(!o&&a!=="degrees")i=e*n.getMetersPerUnit();else{let g=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];g=o(g,g,2);const b=k9(g.slice(0,2),g.slice(2,4)),E=k9(g.slice(4,6),g.slice(6,8));i=(b+E)/2}const d=r?j0[r]:n.getMetersPerUnit();d!==void 0&&(i/=d)}}return i}function T9(n){JJ(n),n.forEach(function(e){n.forEach(function(t){e!==t&&IC(e,t,P8)})})}function eee(n,e,t,r){n.forEach(function(i){e.forEach(function(s){IC(i,s,t),IC(s,i,r)})})}function K8(n,e){return n?typeof n=="string"?wa(n):n:wa(e)}function tee(n){return function(e,t,r,i){const s=e.length;r=r!==void 0?r:2,i=i??r,t=t!==void 0?t:new Array(s);for(let a=0;a<s;a+=i){const o=n(e.slice(a,a+r)),d=o.length;for(let g=0,b=i;g<b;++g)t[a+g]=g>=d?e[a+g]:o[g]}return t}}function oB(n,e){return Rz(),Qx(n,"EPSG:4326",e!==void 0?e:"EPSG:3857")}function Q4(n,e){const t=Qx(n,"EPSG:3857","EPSG:4326"),r=t[0];return(r<-180||r>180)&&(t[0]=Kg(r+180,360)-180),t}function Dg(n,e){if(n===e)return!0;const t=n.getUnits()===e.getUnits();return(n.getCode()===e.getCode()||l_(n,e)===P8)&&t}function l_(n,e){const t=n.getCode(),r=e.getCode();let i=G4(t,r);if(i)return i;let s=null,a=null;for(const d of ZJ)s||(s=d(n)),a||(a=d(e));if(!s&&!a)return null;const o="EPSG:4326";if(a)if(s)i=q4(s.inverse,a.forward);else{const d=G4(t,o);d&&(i=q4(d,a.forward))}else{const d=G4(o,r);d&&(i=q4(s.inverse,d))}return i&&(rB(n),rB(e),IC(n,e,i)),i}function q4(n,e){return function(t,r,i,s){return r=n(t,r,i,s),e(r,r,i,s)}}function kC(n,e){const t=wa(n),r=wa(e);return l_(t,r)}function Qx(n,e,t){const r=kC(e,t);if(!r){const i=wa(e).getCode(),s=wa(t).getCode();throw new Error(`No transform available between ${i} and ${s}`)}return r(n,void 0,n.length)}let nee=null;function ree(){return nee}function sB(n,e){return n}function Im(n,e){return nB&&!O2(n,[0,0])&&n[0]>=-180&&n[0]<=180&&n[1]>=-90&&n[1]<=90&&(nB=!1,Iz("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),n}function D8(n,e){return n}function Jp(n,e){return n}function iee(){T9(w9),T9(S9),eee(S9,w9,IJ,kJ)}iee();const Fz=new Array(6);function ph(){return[1,0,0,1,0,0]}function P9(n){return F8(n,1,0,0,1,0,0)}function R8(n,e){const t=n[0],r=n[1],i=n[2],s=n[3],a=n[4],o=n[5],d=e[0],g=e[1],b=e[2],E=e[3],S=e[4],I=e[5];return n[0]=t*d+i*g,n[1]=r*d+s*g,n[2]=t*b+i*E,n[3]=r*b+s*E,n[4]=t*S+i*I+a,n[5]=r*S+s*I+o,n}function F8(n,e,t,r,i,s,a){return n[0]=e,n[1]=t,n[2]=r,n[3]=i,n[4]=s,n[5]=a,n}function oee(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n}function wA(n,e){const t=e[0],r=e[1];return e[0]=n[0]*t+n[2]*r+n[4],e[1]=n[1]*t+n[3]*r+n[5],e}function Y4(n,e,t){return R8(n,F8(Fz,e,0,0,t,0,0))}function see(n,e,t){return R8(n,F8(Fz,1,0,0,1,e,t))}function sm(n,e,t,r,i,s,a,o){const d=Math.sin(s),g=Math.cos(s);return n[0]=r*g,n[1]=i*d,n[2]=-r*d,n[3]=i*g,n[4]=a*r*g-o*r*d+e,n[5]=a*i*d+o*i*g+t,n}function Lz(n,e){const t=aee(e);Xs(t!==0,"Transformation matrix cannot be inverted");const r=e[0],i=e[1],s=e[2],a=e[3],o=e[4],d=e[5];return n[0]=a/t,n[1]=-i/t,n[2]=-s/t,n[3]=r/t,n[4]=(s*d-a*o)/t,n[5]=-(r*d-i*o)/t,n}function aee(n){return n[0]*n[3]-n[1]*n[2]}const K9=[1e6,1e6,1e6,1e6,2,2];function lee(n){return"matrix("+n.map((t,r)=>Math.round(t*K9[r])/K9[r]).join(", ")+")"}const D9=ph(),uee=[NaN,NaN];class Uz extends Mp{constructor(){super(),this.extent_=Wf(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=uz((e,t,r)=>{if(!r)return this.getSimplifiedGeometry(t);const i=this.clone();return i.applyTransform(r),i.getSimplifiedGeometry(t)})}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return xo()}closestPointXY(e,t,r,i){return xo()}containsXY(e,t){return this.closestPointXY(e,t,uee,Number.MIN_VALUE)===0}getClosestPoint(e,t){return t=t||[NaN,NaN],this.closestPointXY(e[0],e[1],t,1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return xo()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&Vy(t),this.extentRevision_=this.getRevision()}return fJ(this.extent_,e)}rotate(e,t){xo()}scale(e,t,r){xo()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return xo()}getType(){return xo()}applyTransform(e){xo()}intersectsExtent(e){return xo()}translate(e,t){xo()}transform(e,t){const r=wa(e),i=r.getUnits()=="tile-pixels"?function(s,a,o){const d=r.getExtent(),g=r.getWorldExtent(),b=sA(g)/sA(d);sm(D9,g[0],g[3],b,-b,0,0,0);const E=R0(s,0,s.length,o,D9,a),S=kC(r,t);return S?S(E,E,o):E}:kC(r,t);return this.applyTransform(i),this}}class Vg extends Uz{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return x8(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return xo()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=R9(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){xo()}setLayout(e,t,r){let i;if(e)i=R9(e);else{for(let s=0;s<r;++s){if(t.length===0){this.layout="XY",this.stride=2;return}t=t[0]}i=t.length,e=Hg(i)}this.layout=e,this.stride=i}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(e,t){const r=this.getFlatCoordinates();if(r){const i=this.getStride();Oz(r,0,r.length,i,e,t,r),this.changed()}}scale(e,t,r){t===void 0&&(t=e),r||(r=Gf(this.getExtent()));const i=this.getFlatCoordinates();if(i){const s=this.getStride();xJ(i,0,i.length,s,e,t,r,i),this.changed()}}translate(e,t){const r=this.getFlatCoordinates();if(r){const i=this.getStride();wJ(r,0,r.length,i,e,t,r),this.changed()}}}function Hg(n){let e;return n==2?e="XY":n==3?e="XYZ":n==4&&(e="XYZM"),e}function R9(n){let e;return n=="XY"?e=2:n=="XYZ"||n=="XYM"?e=3:n=="XYZM"&&(e=4),e}function Aee(n,e,t){const r=n.getFlatCoordinates();if(!r)return null;const i=n.getStride();return R0(r,0,r.length,i,e,t)}function cee(n,e,t,r){for(let i=0,s=t.length;i<s;++i)n[e++]=t[i];return e}function qx(n,e,t,r){for(let i=0,s=t.length;i<s;++i){const a=t[i];for(let o=0;o<r;++o)n[e++]=a[o]}return e}function u_(n,e,t,r,i){i=i||[];let s=0;for(let a=0,o=t.length;a<o;++a){const d=qx(n,e,t[a],r);i[s++]=d,e=d}return i.length=s,i}function zz(n,e,t,r,i){i=i||[];let s=0;for(let a=0,o=t.length;a<o;++a){const d=u_(n,e,t[a],r,i[s]);d.length===0&&(d[0]=e),i[s++]=d,e=d[d.length-1]}return i.length=s,i}class T2 extends Uz{constructor(e){super(),this.geometries_=e,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(ul),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const e=this.geometries_;for(let t=0,r=e.length;t<r;++t)this.changeEventsKeys_.push(Ks(e[t],lo.CHANGE,this.changed,this))}clone(){const e=new T2($4(this.geometries_));return e.applyProperties(this),e}closestPointXY(e,t,r,i){if(i<Yg(this.getExtent(),e,t))return i;const s=this.geometries_;for(let a=0,o=s.length;a<o;++a)i=s[a].closestPointXY(e,t,r,i);return i}containsXY(e,t){const r=this.geometries_;for(let i=0,s=r.length;i<s;++i)if(r[i].containsXY(e,t))return!0;return!1}computeExtent(e){Vy(e);const t=this.geometries_;for(let r=0,i=t.length;r<i;++r)yz(e,t[r].getExtent());return e}getGeometries(){return $4(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const t=this.geometries_;for(let r=0,i=t.length;r<i;++r)t[r].getType()===this.getType()?e=e.concat(t[r].getGeometriesArrayRecursive()):e.push(t[r]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=[],r=this.geometries_;let i=!1;for(let s=0,a=r.length;s<a;++s){const o=r[s],d=o.getSimplifiedGeometry(e);t.push(d),d!==o&&(i=!0)}return i?new T2(t):(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getType(){return"GeometryCollection"}intersectsExtent(e){const t=this.geometries_;for(let r=0,i=t.length;r<i;++r)if(t[r].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,t){const r=this.geometries_;for(let i=0,s=r.length;i<s;++i)r[i].rotate(e,t);this.changed()}scale(e,t,r){r||(r=Gf(this.getExtent()));const i=this.geometries_;for(let s=0,a=i.length;s<a;++s)i[s].scale(e,t,r);this.changed()}setGeometries(e){this.setGeometriesArray($4(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const t=this.geometries_;for(let r=0,i=t.length;r<i;++r)t[r].applyTransform(e);this.changed()}translate(e,t){const r=this.geometries_;for(let i=0,s=r.length;i<s;++i)r[i].translate(e,t);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function $4(n){return n.map(e=>e.clone())}function jz(n,e,t,r){let i=0;const s=n[t-r],a=n[t-r+1];let o=0,d=0;for(;e<t;e+=r){const g=n[e]-s,b=n[e+1]-a;i+=d*g-o*b,o=g,d=b}return i/2}function Nz(n,e,t,r){let i=0;for(let s=0,a=t.length;s<a;++s){const o=t[s];i+=jz(n,e,o,r),e=o}return i}function dee(n,e,t,r){let i=0;for(let s=0,a=t.length;s<a;++s){const o=t[s];i+=Nz(n,e,o,r),e=o[o.length-1]}return i}function F9(n,e,t,r,i,s,a){const o=n[e],d=n[e+1],g=n[t]-o,b=n[t+1]-d;let E;if(g===0&&b===0)E=e;else{const S=((i-o)*g+(s-d)*b)/(g*g+b*b);if(S>1)E=t;else if(S>0){for(let I=0;I<r;++I)a[I]=Vh(n[e+I],n[t+I],S);a.length=r;return}else E=e}for(let S=0;S<r;++S)a[S]=n[E+S];a.length=r}function L8(n,e,t,r,i){let s=n[e],a=n[e+1];for(e+=r;e<t;e+=r){const o=n[e],d=n[e+1],g=Pg(s,a,o,d);g>i&&(i=g),s=o,a=d}return i}function U8(n,e,t,r,i){for(let s=0,a=t.length;s<a;++s){const o=t[s];i=L8(n,e,o,r,i),e=o}return i}function hee(n,e,t,r,i){for(let s=0,a=t.length;s<a;++s){const o=t[s];i=U8(n,e,o,r,i),e=o[o.length-1]}return i}function z8(n,e,t,r,i,s,a,o,d,g,b){if(e==t)return g;let E,S;if(i===0){if(S=Pg(a,o,n[e],n[e+1]),S<g){for(E=0;E<r;++E)d[E]=n[e+E];return d.length=r,S}return g}b=b||[NaN,NaN];let I=e+r;for(;I<t;)if(F9(n,I-r,I,r,a,o,b),S=Pg(a,o,b[0],b[1]),S<g){for(g=S,E=0;E<r;++E)d[E]=b[E];d.length=r,I+=r}else I+=r*Math.max((Math.sqrt(S)-Math.sqrt(g))/i|0,1);if(s&&(F9(n,t-r,e,r,a,o,b),S=Pg(a,o,b[0],b[1]),S<g)){for(g=S,E=0;E<r;++E)d[E]=b[E];d.length=r}return g}function j8(n,e,t,r,i,s,a,o,d,g,b){b=b||[NaN,NaN];for(let E=0,S=t.length;E<S;++E){const I=t[E];g=z8(n,e,I,r,i,s,a,o,d,g,b),e=I}return g}function fee(n,e,t,r,i,s,a,o,d,g,b){b=b||[NaN,NaN];for(let E=0,S=t.length;E<S;++E){const I=t[E];g=j8(n,e,I,r,i,s,a,o,d,g,b),e=I[I.length-1]}return g}function B0(n,e,t,r,i){i=i!==void 0?i:[];let s=0;for(let a=e;a<t;a+=r)i[s++]=n.slice(a,a+r);return i.length=s,i}function TC(n,e,t,r,i){i=i!==void 0?i:[];let s=0;for(let a=0,o=t.length;a<o;++a){const d=t[a];i[s++]=B0(n,e,d,r,i[s]),e=d}return i.length=s,i}function aB(n,e,t,r,i){i=i!==void 0?i:[];let s=0;for(let a=0,o=t.length;a<o;++a){const d=t[a];i[s++]=d.length===1&&d[0]===e?[]:TC(n,e,d,r,i[s]),e=d[d.length-1]}return i.length=s,i}class PC extends Vg{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}clone(){return new PC(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,r,i){return i<Yg(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(L8(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),z8(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,r,i))}getArea(){return jz(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return B0(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const t=[];return t.length=jx(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new PC(t,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=qx(this.flatCoordinates,0,e,this.stride),this.changed()}}function Wz(n,e,t,r,i){let s;for(e+=r;e<t;e+=r)if(s=i(n.slice(e-r,e),n.slice(e,e+r)),s)return s;return!1}function Yx(n,e,t,r,i,s){return s=s??vz(Wf(),n,e,t,r),Du(i,s)?s[0]>=i[0]&&s[2]<=i[2]||s[1]>=i[1]&&s[3]<=i[3]?!0:Wz(n,e,t,r,function(a,o){return pJ(i,a,o)}):!1}function pee(n,e,t,r,i){for(let s=0,a=t.length;s<a;++s){if(Yx(n,e,t[s],r,i))return!0;e=t[s]}return!1}function Gz(n,e,t,r,i){return!!(Yx(n,e,t,r,i)||Sg(n,e,t,r,i[0],i[1])||Sg(n,e,t,r,i[0],i[3])||Sg(n,e,t,r,i[2],i[1])||Sg(n,e,t,r,i[2],i[3]))}function Qz(n,e,t,r,i){if(!Gz(n,e,t[0],r,i))return!1;if(t.length===1)return!0;for(let s=1,a=t.length;s<a;++s)if(gJ(n,t[s-1],t[s],r,i)&&!Yx(n,t[s-1],t[s],r,i))return!1;return!0}function mee(n,e,t,r,i){for(let s=0,a=t.length;s<a;++s){const o=t[s];if(Qz(n,e,o,r,i))return!0;e=o[o.length-1]}return!1}function qz(n,e,t,r){let i=n[e],s=n[e+1],a=0;for(let o=e+r;o<t;o+=r){const d=n[o],g=n[o+1];a+=Math.sqrt((d-i)*(d-i)+(g-s)*(g-s)),i=d,s=g}return a}class jg extends Vg{constructor(e,t){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendCoordinate(e){rm(this.flatCoordinates,e),this.changed()}clone(){const e=new jg(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,r,i){return i<Yg(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(L8(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),z8(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,t,r,i))}forEachSegment(e){return Wz(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,t){return this.layout!="XYM"&&this.layout!="XYZM"?null:(t=t!==void 0?t:!1,J6(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t))}getCoordinates(){return B0(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,t){return E2(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,this.stride)}getLength(){return qz(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const t=[];return t.length=jx(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new jg(t,"XY")}getType(){return"LineString"}intersectsExtent(e){return Yx(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,this.getExtent())}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=qx(this.flatCoordinates,0,e,this.stride),this.changed()}}class KC extends Vg{constructor(e,t,r){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,t);else if(t!==void 0&&r)this.setFlatCoordinates(t,e),this.ends_=r;else{const i=e,s=[],a=[];for(let d=0,g=i.length;d<g;++d){const b=i[d];rm(s,b.getFlatCoordinates()),a.push(s.length)}const o=i.length===0?this.getLayout():i[0].getLayout();this.setFlatCoordinates(o,s),this.ends_=a}}appendLineString(e){rm(this.flatCoordinates,e.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new KC(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,r,i){return i<Yg(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(U8(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),j8(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,t,r,i))}getCoordinateAtM(e,t,r){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(t=t!==void 0?t:!1,r=r!==void 0?r:!1,vJ(this.flatCoordinates,0,this.ends_,this.stride,e,t,r))}getCoordinates(){return TC(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new jg(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,t=this.ends_,r=this.layout,i=[];let s=0;for(let a=0,o=t.length;a<o;++a){const d=t[a],g=new jg(e.slice(s,d),r);i.push(g),s=d}return i}getFlatMidpoints(){const e=[],t=this.flatCoordinates;let r=0;const i=this.ends_,s=this.stride;for(let a=0,o=i.length;a<o;++a){const d=i[a],g=E2(t,r,d,s,.5);rm(e,g),r=d}return e}getSimplifiedGeometryInternal(e){const t=[],r=[];return t.length=Bz(this.flatCoordinates,0,this.ends_,this.stride,e,t,0,r),new KC(t,"XY",r)}getType(){return"MultiLineString"}intersectsExtent(e){return pee(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const r=u_(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=r.length===0?0:r[r.length-1],this.changed()}}class Ng extends Vg{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){const e=new Ng(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,r,i){const s=this.flatCoordinates,a=Pg(e,t,s[0],s[1]);if(a<i){const o=this.stride;for(let d=0;d<o;++d)r[d]=s[d];return r.length=o,a}return i}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return gz(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return b8(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=cee(this.flatCoordinates,0,e,this.stride),this.changed()}}class A_ extends Vg{constructor(e,t){super(),t&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendPoint(e){rm(this.flatCoordinates,e.getFlatCoordinates()),this.changed()}clone(){const e=new A_(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,r,i){if(i<Yg(this.getExtent(),e,t))return i;const s=this.flatCoordinates,a=this.stride;for(let o=0,d=s.length;o<d;o+=a){const g=Pg(e,t,s[o],s[o+1]);if(g<i){i=g;for(let b=0;b<a;++b)r[b]=s[o+b];r.length=a}}return i}getCoordinates(){return B0(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){const t=this.flatCoordinates.length/this.stride;return e<0||t<=e?null:new Ng(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,t=this.layout,r=this.stride,i=[];for(let s=0,a=e.length;s<a;s+=r){const o=new Ng(e.slice(s,s+r),t);i.push(o)}return i}getType(){return"MultiPoint"}intersectsExtent(e){const t=this.flatCoordinates,r=this.stride;for(let i=0,s=t.length;i<s;i+=r){const a=t[i],o=t[i+1];if(b8(e,a,o))return!0}return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=qx(this.flatCoordinates,0,e,this.stride),this.changed()}}class Gm extends Vg{constructor(e,t,r){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,t!==void 0&&r?(this.setFlatCoordinates(t,e),this.ends_=r):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?rm(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new Gm(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,r,i){return i<Yg(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(U8(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),j8(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,r,i))}containsXY(e,t){return w8(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return Nz(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),B2(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,TC(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=Gf(this.getExtent());this.flatInteriorPoint_=M8(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Ng(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new PC(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,t=this.flatCoordinates,r=this.ends_,i=[];let s=0;for(let a=0,o=r.length;a<o;++a){const d=r[a],g=new PC(t.slice(s,d),e);i.push(g),s=d}return i}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;E8(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=B2(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],r=[];return t.length=B8(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,r),new Gm(t,"XY",r)}getType(){return"Polygon"}intersectsExtent(e){return Qz(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const r=u_(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=r.length===0?0:r[r.length-1],this.changed()}}function L9(n){if($g(n))throw new Error("Cannot create polygon from empty extent");const e=n[0],t=n[1],r=n[2],i=n[3],s=[e,t,e,i,r,i,r,t,e,t];return new Gm(s,"XY",[s.length])}class DC extends Vg{constructor(e,t,r){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!r&&!Array.isArray(e[0])){const i=e,s=[],a=[];for(let o=0,d=i.length;o<d;++o){const g=i[o],b=s.length,E=g.getEnds();for(let S=0,I=E.length;S<I;++S)E[S]+=b;rm(s,g.getFlatCoordinates()),a.push(E)}t=i.length===0?this.getLayout():i[0].getLayout(),e=s,r=a}t!==void 0&&r?(this.setFlatCoordinates(t,e),this.endss_=r):this.setCoordinates(e,t)}appendPolygon(e){let t;if(!this.flatCoordinates)this.flatCoordinates=e.getFlatCoordinates().slice(),t=e.getEnds().slice(),this.endss_.push();else{const r=this.flatCoordinates.length;rm(this.flatCoordinates,e.getFlatCoordinates()),t=e.getEnds().slice();for(let i=0,s=t.length;i<s;++i)t[i]+=r}this.endss_.push(t),this.changed()}clone(){const e=this.endss_.length,t=new Array(e);for(let i=0;i<e;++i)t[i]=this.endss_[i].slice();const r=new DC(this.flatCoordinates.slice(),this.layout,t);return r.applyProperties(this),r}closestPointXY(e,t,r,i){return i<Yg(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(hee(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),fee(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,t,r,i))}containsXY(e,t){return yJ(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,t)}getArea(){return dee(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),eB(t,0,this.endss_,this.stride,e)):t=this.flatCoordinates,aB(t,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=wz(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=Mz(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new A_(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;Sz(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=eB(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],r=[];return t.length=bJ(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),t,0,r),new DC(t,"XY",r)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let t;if(e===0)t=0;else{const s=this.endss_[e-1];t=s[s.length-1]}const r=this.endss_[e].slice(),i=r[r.length-1];if(t!==0)for(let s=0,a=r.length;s<a;++s)r[s]-=t;return new Gm(this.flatCoordinates.slice(t,i),this.layout,r)}getPolygons(){const e=this.layout,t=this.flatCoordinates,r=this.endss_,i=[];let s=0;for(let a=0,o=r.length;a<o;++a){const d=r[a].slice(),g=d[d.length-1];if(s!==0)for(let E=0,S=d.length;E<S;++E)d[E]-=s;const b=new Gm(t.slice(s,g),e,d);i.push(b),s=g}return i}getType(){return"MultiPolygon"}intersectsExtent(e){return mee(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const r=zz(this.flatCoordinates,0,e,this.stride,this.endss_);if(r.length===0)this.flatCoordinates.length=0;else{const i=r[r.length-1];this.flatCoordinates.length=i.length===0?0:i[i.length-1]}this.changed()}}const U9=ph();class ud{constructor(e,t,r,i,s,a){this.styleFunction,this.extent_,this.id_=a,this.type_=e,this.flatCoordinates_=t,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=r||null,this.properties_=s,this.squaredTolerance_,this.stride_=i,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?gz(this.flatCoordinates_):x8(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=Gf(this.getExtent());this.flatInteriorPoints_=M8(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=Ez(this.flatCoordinates_,this.ends_),t=wz(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=Mz(this.flatCoordinates_,0,e,2,t)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=E2(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let t=0;const r=this.ends_;for(let i=0,s=r.length;i<s;++i){const a=r[i],o=E2(e,t,a,2,.5);rm(this.flatMidpoints_,o),t=a}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,t){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=wa(e);const t=e.getExtent(),r=e.getWorldExtent();if(t&&r){const i=sA(r)/sA(t);sm(U9,r[0],r[3],i,-i,0,0,0),R0(this.flatCoordinates_,0,this.flatCoordinates_.length,2,U9,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){var e;return new ud(this.type_,this.flatCoordinates_.slice(),(e=this.ends_)==null?void 0:e.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=uz((e,t)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),t&&this.simplifiedGeometry_.applyTransform(t);const r=this.simplifiedGeometry_.getFlatCoordinates();let i;switch(this.type_){case"LineString":r.length=jx(r,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,r,0),i=[r.length];break;case"MultiLineString":i=[],r.length=Bz(r,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,r,0,i);break;case"Polygon":i=[],r.length=B8(r,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),r,0,i);break}return i&&(this.simplifiedGeometry_=new ud(this.type_,r,i,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}}ud.prototype.getFlatCoordinates=ud.prototype.getOrientedFlatCoordinates;class O0{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new O0({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}class Hh{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=z9,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new Hh({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(t){return t.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=z9,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function gee(n){let e;if(typeof n=="function")e=n;else{let t;Array.isArray(n)?t=n:(Xs(typeof n.getZIndex=="function","Expected an `Style` or an array of `Style`"),t=[n]),e=function(){return t}}return e}let V4=null;function Yz(n,e){if(!V4){const t=new Dm({color:"rgba(255,255,255,0.4)"}),r=new O0({color:"#3399CC",width:1.25});V4=[new Hh({image:new s_({fill:t,stroke:r,radius:5}),fill:t,stroke:r})]}return V4}function z9(n){return n.getGeometry()}const yee="#333";class $x{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.keepUpright_=e.keepUpright,this.scale_=e.scale,this.scaleArray_=Ad(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new Dm({color:yee}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new $x({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setKeepUpright(e){this.keepUpright_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=Ad(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}const Nr={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4},dh={ADD:"add",REMOVE:"remove"},j9={LENGTH:"length"};class cb extends wp{constructor(e,t,r){super(e),this.element=t,this.index=r}}class em extends Mp{constructor(e,t){if(super(),this.on,this.once,this.un,t=t||{},this.unique_=!!t.unique,this.array_=e||[],this.unique_)for(let r=0,i=this.array_.length;r<i;++r)this.assertUnique_(this.array_[r],r);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,r=e.length;t<r;++t)this.push(e[t]);return this}forEach(e){const t=this.array_;for(let r=0,i=t.length;r<i;++r)e(t[r],r,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(j9.LENGTH)}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new cb(dh.ADD,t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){const t=this.array_;for(let r=0,i=t.length;r<i;++r)if(t[r]===e)return this.removeAt(r)}removeAt(e){if(e<0||e>=this.getLength())return;const t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new cb(dh.REMOVE,t,e)),t}setAt(e,t){const r=this.getLength();if(e>=r){this.insertAt(e,t);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);const i=this.array_[e];this.array_[e]=t,this.dispatchEvent(new cb(dh.REMOVE,i,e)),this.dispatchEvent(new cb(dh.ADD,t,e))}updateLength_(){this.set(j9.LENGTH,this.array_.length)}assertUnique_(e,t){for(let r=0,i=this.array_.length;r<i;++r)if(this.array_[r]===e&&r!==t)throw new Error("Duplicate item added to a unique collection")}}const zf={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};class $z{drawCustom(e,t,r,i,s){}drawGeometry(e){}setStyle(e){}drawCircle(e,t,r){}drawFeature(e,t,r){}drawGeometryCollection(e,t,r){}drawLineString(e,t,r){}drawMultiLineString(e,t,r){}drawMultiPoint(e,t,r){}drawMultiPolygon(e,t,r){}drawPoint(e,t,r){}drawPolygon(e,t,r){}drawText(e,t,r){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}}class vee extends $z{constructor(e,t,r,i,s,a,o){super(),this.context_=e,this.pixelRatio_=t,this.extent_=r,this.transform_=i,this.transformRotation_=i?p8(Math.atan2(i[1],i[0]),10):0,this.viewRotation_=s,this.squaredTolerance_=a,this.userTransform_=o,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=ph()}drawImages_(e,t,r,i){if(!this.image_)return;const s=R0(e,t,r,i,this.transform_,this.pixelCoordinates_),a=this.context_,o=this.tmpLocalTransform_,d=a.globalAlpha;this.imageOpacity_!=1&&(a.globalAlpha=d*this.imageOpacity_);let g=this.imageRotation_;this.transformRotation_===0&&(g-=this.viewRotation_),this.imageRotateWithView_&&(g+=this.viewRotation_);for(let b=0,E=s.length;b<E;b+=2){const S=s[b]-this.imageAnchorX_,I=s[b+1]-this.imageAnchorY_;if(g!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const P=S+this.imageAnchorX_,z=I+this.imageAnchorY_;sm(o,P,z,1,1,g,-P,-z),a.save(),a.transform.apply(a,o),a.translate(P,z),a.scale(this.imageScale_[0],this.imageScale_[1]),a.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),a.restore()}else a.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,S,I,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(a.globalAlpha=d)}drawText_(e,t,r,i){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const s=R0(e,t,r,i,this.transform_,this.pixelCoordinates_),a=this.context_;let o=this.textRotation_;for(this.transformRotation_===0&&(o-=this.viewRotation_),this.textRotateWithView_&&(o+=this.viewRotation_);t<r;t+=i){const d=s[t]+this.textOffsetX_,g=s[t+1]+this.textOffsetY_;o!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(a.save(),a.translate(d-this.textOffsetX_,g-this.textOffsetY_),a.rotate(o),a.translate(this.textOffsetX_,this.textOffsetY_),a.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&a.strokeText(this.text_,0,0),this.textFillState_&&a.fillText(this.text_,0,0),a.restore()):(this.textStrokeState_&&a.strokeText(this.text_,d,g),this.textFillState_&&a.fillText(this.text_,d,g))}}moveToLineTo_(e,t,r,i,s){const a=this.context_,o=R0(e,t,r,i,this.transform_,this.pixelCoordinates_);a.moveTo(o[0],o[1]);let d=o.length;s&&(d-=2);for(let g=2;g<d;g+=2)a.lineTo(o[g],o[g+1]);return s&&a.closePath(),r}drawRings_(e,t,r,i){for(let s=0,a=r.length;s<a;++s)t=this.moveToLineTo_(e,t,r[s],i,!0);return t}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Du(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=Aee(e,this.transform_,this.pixelCoordinates_),r=t[2]-t[0],i=t[3]-t[1],s=Math.sqrt(r*r+i*i),a=this.context_;a.beginPath(),a.arc(t[0],t[1],s,0,2*Math.PI),this.fillState_&&a.fill(),this.strokeState_&&a.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,t){const r=t.getGeometryFunction()(e);r&&(this.setStyle(t),this.drawGeometry(r))}drawGeometryCollection(e){const t=e.getGeometriesArray();for(let r=0,i=t.length;r<i;++r)this.drawGeometry(t[r])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),r=e.getStride();this.image_&&this.drawImages_(t,0,t.length,r),this.text_!==""&&this.drawText_(t,0,t.length,r)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),r=e.getStride();this.image_&&this.drawImages_(t,0,t.length,r),this.text_!==""&&this.drawText_(t,0,t.length,r)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Du(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const t=this.context_,r=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(r,0,r.length,e.getStride(),!1),t.stroke()}if(this.text_!==""){const t=e.getFlatMidpoint();this.drawText_(t,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getExtent();if(Du(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const r=this.context_,i=e.getFlatCoordinates();let s=0;const a=e.getEnds(),o=e.getStride();r.beginPath();for(let d=0,g=a.length;d<g;++d)s=this.moveToLineTo_(i,s,a[d],o,!1);r.stroke()}if(this.text_!==""){const r=e.getFlatMidpoints();this.drawText_(r,0,r.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Du(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoint();this.drawText_(t,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Du(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_,r=e.getOrientedFlatCoordinates();let i=0;const s=e.getEndss(),a=e.getStride();t.beginPath();for(let o=0,d=s.length;o<d;++o){const g=s[o];i=this.drawRings_(r,i,g,a)}this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoints();this.drawText_(t,0,t.length,2)}}}setContextFillState_(e){const t=this.context_,r=this.contextFillState_;r?r.fillStyle!=e.fillStyle&&(r.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const t=this.context_,r=this.contextStrokeState_;r?(r.lineCap!=e.lineCap&&(r.lineCap=e.lineCap,t.lineCap=e.lineCap),N0(r.lineDash,e.lineDash)||t.setLineDash(r.lineDash=e.lineDash),r.lineDashOffset!=e.lineDashOffset&&(r.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset),r.lineJoin!=e.lineJoin&&(r.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),r.lineWidth!=e.lineWidth&&(r.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),r.miterLimit!=e.miterLimit&&(r.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),r.strokeStyle!=e.strokeStyle&&(r.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const t=this.context_,r=this.contextTextState_,i=e.textAlign?e.textAlign:BC;r?(r.font!=e.font&&(r.font=e.font,t.font=e.font),r.textAlign!=i&&(r.textAlign=i,t.textAlign=i),r.textBaseline!=e.textBaseline&&(r.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=i,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:i,textBaseline:e.textBaseline})}setFillStrokeStyle(e,t){if(!e)this.fillState_=null;else{const r=e.getColor();this.fillState_={fillStyle:Zp(r||ch)}}if(!t)this.strokeState_=null;else{const r=t.getColor(),i=t.getLineCap(),s=t.getLineDash(),a=t.getLineDashOffset(),o=t.getLineJoin(),d=t.getWidth(),g=t.getMiterLimit(),b=s||Lm;this.strokeState_={lineCap:i!==void 0?i:Fy,lineDash:this.pixelRatio_===1?b:b.map(E=>E*this.pixelRatio_),lineDashOffset:(a||Um)*this.pixelRatio_,lineJoin:o!==void 0?o:Ly,lineWidth:(d!==void 0?d:OC)*this.pixelRatio_,miterLimit:g!==void 0?g:SC,strokeStyle:Zp(r||EC)}}}setImageStyle(e){let t;if(!e||!(t=e.getSize())){this.image_=null;return}const r=e.getPixelRatio(this.pixelRatio_),i=e.getAnchor(),s=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=i[0]*r,this.imageAnchorY_=i[1]*r,this.imageHeight_=t[1]*r,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=s[0],this.imageOriginY_=s[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const a=e.getScaleArray();this.imageScale_=[a[0]*this.pixelRatio_/r,a[1]*this.pixelRatio_/r],this.imageWidth_=t[0]*r}setTextStyle(e){if(!e)this.text_="";else{const t=e.getFill();if(!t)this.textFillState_=null;else{const I=t.getColor();this.textFillState_={fillStyle:Zp(I||ch)}}const r=e.getStroke();if(!r)this.textStrokeState_=null;else{const I=r.getColor(),P=r.getLineCap(),z=r.getLineDash(),j=r.getLineDashOffset(),q=r.getLineJoin(),Y=r.getWidth(),ie=r.getMiterLimit();this.textStrokeState_={lineCap:P!==void 0?P:Fy,lineDash:z||Lm,lineDashOffset:j||Um,lineJoin:q!==void 0?q:Ly,lineWidth:Y!==void 0?Y:OC,miterLimit:ie!==void 0?ie:SC,strokeStyle:Zp(I||EC)}}const i=e.getFont(),s=e.getOffsetX(),a=e.getOffsetY(),o=e.getRotateWithView(),d=e.getRotation(),g=e.getScaleArray(),b=e.getText(),E=e.getTextAlign(),S=e.getTextBaseline();this.textState_={font:i!==void 0?i:dz,textAlign:E!==void 0?E:BC,textBaseline:S!==void 0?S:x2},this.text_=b!==void 0?Array.isArray(b)?b.reduce((I,P,z)=>I+=z%2?" ":P,""):b:"",this.textOffsetX_=s!==void 0?this.pixelRatio_*s:0,this.textOffsetY_=a!==void 0?this.pixelRatio_*a:0,this.textRotateWithView_=o!==void 0?o:!1,this.textRotation_=d!==void 0?d:0,this.textScale_=[this.pixelRatio_*g[0],this.pixelRatio_*g[1]]}}}const Cee=.5,Vz={Point:Bee,LineString:Mee,Polygon:Iee,MultiPoint:Oee,MultiLineString:See,MultiPolygon:Eee,GeometryCollection:wee,Circle:bee};function _ee(n,e){return parseInt(Go(n),10)-parseInt(Go(e),10)}function lB(n,e){const t=Hz(n,e);return t*t}function Hz(n,e){return Cee*n/e}function bee(n,e,t,r,i){const s=t.getFill(),a=t.getStroke();if(s||a){const d=n.getBuilder(t.getZIndex(),"Circle");d.setFillStrokeStyle(s,a),d.drawCircle(e,r,i)}const o=t.getText();if(o&&o.getText()){const d=n.getBuilder(t.getZIndex(),"Text");d.setTextStyle(o),d.drawText(e,r)}}function P2(n,e,t,r,i,s,a,o){const d=[],g=t.getImage();if(g){let S=!0;const I=g.getImageState();I==di.LOADED||I==di.ERROR?S=!1:I==di.IDLE&&g.load(),S&&d.push(g.ready())}const b=t.getFill();b&&b.loading()&&d.push(b.ready());const E=d.length>0;return E&&Promise.all(d).then(()=>i(null)),xee(n,e,t,r,s,a,o),E}function xee(n,e,t,r,i,s,a){const o=t.getGeometryFunction()(e);if(!o)return;const d=o.simplifyTransformed(r,i);if(t.getRenderer())Zz(n,d,t,e,a);else{const b=Vz[d.getType()];b(n,d,t,e,a,s)}}function Zz(n,e,t,r,i){if(e.getType()=="GeometryCollection"){const a=e.getGeometries();for(let o=0,d=a.length;o<d;++o)Zz(n,a[o],t,r,i);return}n.getBuilder(t.getZIndex(),"Default").drawCustom(e,r,t.getRenderer(),t.getHitDetectionRenderer(),i)}function wee(n,e,t,r,i,s){const a=e.getGeometriesArray();let o,d;for(o=0,d=a.length;o<d;++o){const g=Vz[a[o].getType()];g(n,a[o],t,r,i,s)}}function Mee(n,e,t,r,i){const s=t.getStroke();if(s){const o=n.getBuilder(t.getZIndex(),"LineString");o.setFillStrokeStyle(null,s),o.drawLineString(e,r,i)}const a=t.getText();if(a&&a.getText()){const o=n.getBuilder(t.getZIndex(),"Text");o.setTextStyle(a),o.drawText(e,r,i)}}function See(n,e,t,r,i){const s=t.getStroke();if(s){const o=n.getBuilder(t.getZIndex(),"LineString");o.setFillStrokeStyle(null,s),o.drawMultiLineString(e,r,i)}const a=t.getText();if(a&&a.getText()){const o=n.getBuilder(t.getZIndex(),"Text");o.setTextStyle(a),o.drawText(e,r,i)}}function Eee(n,e,t,r,i){const s=t.getFill(),a=t.getStroke();if(a||s){const d=n.getBuilder(t.getZIndex(),"Polygon");d.setFillStrokeStyle(s,a),d.drawMultiPolygon(e,r,i)}const o=t.getText();if(o&&o.getText()){const d=n.getBuilder(t.getZIndex(),"Text");d.setTextStyle(o),d.drawText(e,r,i)}}function Bee(n,e,t,r,i,s){const a=t.getImage(),o=t.getText(),d=o&&o.getText(),g=s&&a&&d?{}:void 0;if(a){if(a.getImageState()!=di.LOADED)return;const b=n.getBuilder(t.getZIndex(),"Image");b.setImageStyle(a,g),b.drawPoint(e,r,i)}if(d){const b=n.getBuilder(t.getZIndex(),"Text");b.setTextStyle(o,g),b.drawText(e,r,i)}}function Oee(n,e,t,r,i,s){const a=t.getImage(),o=a&&a.getOpacity()!==0,d=t.getText(),g=d&&d.getText(),b=s&&o&&g?{}:void 0;if(o){if(a.getImageState()!=di.LOADED)return;const E=n.getBuilder(t.getZIndex(),"Image");E.setImageStyle(a,b),E.drawMultiPoint(e,r,i)}if(g){const E=n.getBuilder(t.getZIndex(),"Text");E.setTextStyle(d,b),E.drawText(e,r,i)}}function Iee(n,e,t,r,i){const s=t.getFill(),a=t.getStroke();if(s||a){const d=n.getBuilder(t.getZIndex(),"Polygon");d.setFillStrokeStyle(s,a),d.drawPolygon(e,r,i)}const o=t.getText();if(o&&o.getText()){const d=n.getBuilder(t.getZIndex(),"Text");d.setTextStyle(o),d.drawText(e,r,i)}}let kee=!1;function Xz(n,e,t,r,i,s,a){const o=new XMLHttpRequest;o.open("GET",typeof n=="function"?n(t,r,i):n,!0),e.getType()=="arraybuffer"&&(o.responseType="arraybuffer"),o.withCredentials=kee,o.onload=function(d){if(!o.status||o.status>=200&&o.status<300){const g=e.getType();try{let b;g=="text"||g=="json"?b=o.responseText:g=="xml"?b=o.responseXML||o.responseText:g=="arraybuffer"&&(b=o.response),b?s(e.readFeatures(b,{extent:t,featureProjection:i}),e.readProjection(b)):a()}catch{a()}}else a()},o.onerror=a,o.send()}function N9(n,e){return function(t,r,i,s,a){Xz(n,e,t,r,i,(o,d)=>{this.addFeatures(o),s!==void 0&&s(o)},a||Ky)}}function Tee(n,e){return[[-1/0,-1/0,1/0,1/0]]}function Pee(n,e){return[n]}function Jz(n,e,t=0,r=n.length-1,i=Kee){for(;r>t;){if(r-t>600){const d=r-t+1,g=e-t+1,b=Math.log(d),E=.5*Math.exp(2*b/3),S=.5*Math.sqrt(b*E*(d-E)/d)*(g-d/2<0?-1:1),I=Math.max(t,Math.floor(e-g*E/d+S)),P=Math.min(r,Math.floor(e+(d-g)*E/d+S));Jz(n,e,I,P,i)}const s=n[e];let a=t,o=r;for(Ev(n,t,e),i(n[r],s)>0&&Ev(n,t,r);a<o;){for(Ev(n,a,o),a++,o--;i(n[a],s)<0;)a++;for(;i(n[o],s)>0;)o--}i(n[t],s)===0?Ev(n,t,o):(o++,Ev(n,o,r)),o<=e&&(t=o+1),e<=o&&(r=o-1)}}function Ev(n,e,t){const r=n[e];n[e]=n[t],n[t]=r}function Kee(n,e){return n<e?-1:n>e?1:0}let ej=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data;const r=[];if(!hb(e,t))return r;const i=this.toBBox,s=[];for(;t;){for(let a=0;a<t.children.length;a++){const o=t.children[a],d=t.leaf?i(o):o;hb(e,d)&&(t.leaf?r.push(o):Z4(e,d)?this._all(o,r):s.push(o))}t=s.pop()}return r}collides(e){let t=this.data;if(!hb(e,t))return!1;const r=[];for(;t;){for(let i=0;i<t.children.length;i++){const s=t.children[i],a=t.leaf?this.toBBox(s):s;if(hb(e,a)){if(t.leaf||Z4(e,a))return!0;r.push(s)}}t=r.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let r=0;r<e.length;r++)this.insert(e[r]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const r=this.data;this.data=t,t=r}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=J1([]),this}remove(e,t){if(!e)return this;let r=this.data;const i=this.toBBox(e),s=[],a=[];let o,d,g;for(;r||s.length;){if(r||(r=s.pop(),d=s[s.length-1],o=a.pop(),g=!0),r.leaf){const b=Dee(e,r.children,t);if(b!==-1)return r.children.splice(b,1),s.push(r),this._condense(s),this}!g&&!r.leaf&&Z4(r,i)?(s.push(r),a.push(o),o=0,d=r,r=r.children[0]):d?(o++,r=d.children[o],g=!1):r=null}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){const r=[];for(;e;)e.leaf?t.push(...e.children):r.push(...e.children),e=r.pop();return t}_build(e,t,r,i){const s=r-t+1;let a=this._maxEntries,o;if(s<=a)return o=J1(e.slice(t,r+1)),_1(o,this.toBBox),o;i||(i=Math.ceil(Math.log(s)/Math.log(a)),a=Math.ceil(s/Math.pow(a,i-1))),o=J1([]),o.leaf=!1,o.height=i;const d=Math.ceil(s/a),g=d*Math.ceil(Math.sqrt(a));W9(e,t,r,g,this.compareMinX);for(let b=t;b<=r;b+=g){const E=Math.min(b+g-1,r);W9(e,b,E,d,this.compareMinY);for(let S=b;S<=E;S+=d){const I=Math.min(S+d-1,E);o.children.push(this._build(e,S,I,i-1))}}return _1(o,this.toBBox),o}_chooseSubtree(e,t,r,i){for(;i.push(t),!(t.leaf||i.length-1===r);){let s=1/0,a=1/0,o;for(let d=0;d<t.children.length;d++){const g=t.children[d],b=H4(g),E=Lee(e,g)-b;E<a?(a=E,s=b<s?b:s,o=g):E===a&&b<s&&(s=b,o=g)}t=o||t.children[0]}return t}_insert(e,t,r){const i=r?e:this.toBBox(e),s=[],a=this._chooseSubtree(i,this.data,t,s);for(a.children.push(e),Nv(a,i);t>=0&&s[t].children.length>this._maxEntries;)this._split(s,t),t--;this._adjustParentBBoxes(i,s,t)}_split(e,t){const r=e[t],i=r.children.length,s=this._minEntries;this._chooseSplitAxis(r,s,i);const a=this._chooseSplitIndex(r,s,i),o=J1(r.children.splice(a,r.children.length-a));o.height=r.height,o.leaf=r.leaf,_1(r,this.toBBox),_1(o,this.toBBox),t?e[t-1].children.push(o):this._splitRoot(r,o)}_splitRoot(e,t){this.data=J1([e,t]),this.data.height=e.height+1,this.data.leaf=!1,_1(this.data,this.toBBox)}_chooseSplitIndex(e,t,r){let i,s=1/0,a=1/0;for(let o=t;o<=r-t;o++){const d=jv(e,0,o,this.toBBox),g=jv(e,o,r,this.toBBox),b=Uee(d,g),E=H4(d)+H4(g);b<s?(s=b,i=o,a=E<a?E:a):b===s&&E<a&&(a=E,i=o)}return i||r-t}_chooseSplitAxis(e,t,r){const i=e.leaf?this.compareMinX:Ree,s=e.leaf?this.compareMinY:Fee,a=this._allDistMargin(e,t,r,i),o=this._allDistMargin(e,t,r,s);a<o&&e.children.sort(i)}_allDistMargin(e,t,r,i){e.children.sort(i);const s=this.toBBox,a=jv(e,0,t,s),o=jv(e,r-t,r,s);let d=db(a)+db(o);for(let g=t;g<r-t;g++){const b=e.children[g];Nv(a,e.leaf?s(b):b),d+=db(a)}for(let g=r-t-1;g>=t;g--){const b=e.children[g];Nv(o,e.leaf?s(b):b),d+=db(o)}return d}_adjustParentBBoxes(e,t,r){for(let i=r;i>=0;i--)Nv(t[i],e)}_condense(e){for(let t=e.length-1,r;t>=0;t--)e[t].children.length===0?t>0?(r=e[t-1].children,r.splice(r.indexOf(e[t]),1)):this.clear():_1(e[t],this.toBBox)}};function Dee(n,e,t){if(!t)return e.indexOf(n);for(let r=0;r<e.length;r++)if(t(n,e[r]))return r;return-1}function _1(n,e){jv(n,0,n.children.length,e,n)}function jv(n,e,t,r,i){i||(i=J1(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(let s=e;s<t;s++){const a=n.children[s];Nv(i,n.leaf?r(a):a)}return i}function Nv(n,e){return n.minX=Math.min(n.minX,e.minX),n.minY=Math.min(n.minY,e.minY),n.maxX=Math.max(n.maxX,e.maxX),n.maxY=Math.max(n.maxY,e.maxY),n}function Ree(n,e){return n.minX-e.minX}function Fee(n,e){return n.minY-e.minY}function H4(n){return(n.maxX-n.minX)*(n.maxY-n.minY)}function db(n){return n.maxX-n.minX+(n.maxY-n.minY)}function Lee(n,e){return(Math.max(e.maxX,n.maxX)-Math.min(e.minX,n.minX))*(Math.max(e.maxY,n.maxY)-Math.min(e.minY,n.minY))}function Uee(n,e){const t=Math.max(n.minX,e.minX),r=Math.max(n.minY,e.minY),i=Math.min(n.maxX,e.maxX),s=Math.min(n.maxY,e.maxY);return Math.max(0,i-t)*Math.max(0,s-r)}function Z4(n,e){return n.minX<=e.minX&&n.minY<=e.minY&&e.maxX<=n.maxX&&e.maxY<=n.maxY}function hb(n,e){return e.minX<=n.maxX&&e.minY<=n.maxY&&e.maxX>=n.minX&&e.maxY>=n.minY}function J1(n){return{children:n,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function W9(n,e,t,r,i){const s=[e,t];for(;s.length;){if(t=s.pop(),e=s.pop(),t-e<=r)continue;const a=e+Math.ceil((t-e)/r/2)*r;Jz(n,a,e,t,i),s.push(e,a,a,t)}}class G9{constructor(e){this.rbush_=new ej(e),this.items_={}}insert(e,t){const r={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(r),this.items_[Go(t)]=r}load(e,t){const r=new Array(t.length);for(let i=0,s=t.length;i<s;i++){const a=e[i],o=t[i],d={minX:a[0],minY:a[1],maxX:a[2],maxY:a[3],value:o};r[i]=d,this.items_[Go(o)]=d}this.rbush_.load(r)}remove(e){const t=Go(e),r=this.items_[t];return delete this.items_[t],this.rbush_.remove(r)!==null}update(e,t){const r=this.items_[Go(t)],i=[r.minX,r.minY,r.maxX,r.maxY];Wm(i,e)||(this.remove(t),this.insert(e,t))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(e){const t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(t).map(function(i){return i.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,t){return this.forEach_(this.getInExtent(e),t)}forEach_(e,t){let r;for(let i=0,s=e.length;i<s;i++)if(r=t(e[i]),r)return r;return r}isEmpty(){return z0(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const t=this.rbush_.toJSON();return Nm(t.minX,t.minY,t.maxX,t.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const t in e.items_)this.items_[t]=e.items_[t]}}class Hy extends Mp{constructor(e){super(),this.projection=wa(e.projection),this.attributions_=Q9(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible??!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const t=this;this.viewPromise_=new Promise(function(r,i){t.viewResolver=r,t.viewRejector=i})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=Q9(e),this.changed()}setState(e){this.state_=e,this.changed()}}function Q9(n){return n?typeof n=="function"?n:(Array.isArray(n)||(n=[n]),e=>n):null}const kf={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};class m0 extends wp{constructor(e,t,r){super(e),this.feature=t,this.features=r}}class Yb extends Hy{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=Ky,this.format_=e.format||null,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(Xs(this.format_,"`format` must be set when `url` is set"),this.loader_=N9(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:Tee;const t=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=t?new G9:null,this.loadedExtentsRtree_=new G9,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let r,i;Array.isArray(e.features)?i=e.features:e.features&&(r=e.features,i=r.getArray()),!t&&r===void 0&&(r=new em(i)),i!==void 0&&this.addFeaturesInternal(i),r!==void 0&&this.bindFeaturesCollection_(r)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const t=Go(e);if(!this.addToIndex_(t,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(t,e);const r=e.getGeometry();if(r){const i=r.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(i,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new m0(kf.ADDFEATURE,e))}setupChangeEvents_(e,t){t instanceof ud||(this.featureChangeKeys_[e]=[Ks(t,lo.CHANGE,this.handleFeatureChange_,this),Ks(t,Ry.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(e,t){let r=!0;if(t.getId()!==void 0){const i=String(t.getId());if(!(i in this.idIndex_))this.idIndex_[i]=t;else if(t instanceof ud){const s=this.idIndex_[i];s instanceof ud?Array.isArray(s)?s.push(t):this.idIndex_[i]=[s,t]:r=!1}else r=!1}return r&&(Xs(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=t),r}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const t=[],r=[],i=[];for(let s=0,a=e.length;s<a;s++){const o=e[s],d=Go(o);this.addToIndex_(d,o)&&r.push(o)}for(let s=0,a=r.length;s<a;s++){const o=r[s],d=Go(o);this.setupChangeEvents_(d,o);const g=o.getGeometry();if(g){const b=g.getExtent();t.push(b),i.push(o)}else this.nullGeometryFeatures_[d]=o}if(this.featuresRtree_&&this.featuresRtree_.load(t,i),this.hasListener(kf.ADDFEATURE))for(let s=0,a=r.length;s<a;s++)this.dispatchEvent(new m0(kf.ADDFEATURE,r[s]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener(kf.ADDFEATURE,function(r){t||(t=!0,e.push(r.feature),t=!1)}),this.addEventListener(kf.REMOVEFEATURE,function(r){t||(t=!0,e.remove(r.feature),t=!1)}),e.addEventListener(dh.ADD,r=>{t||(t=!0,this.addFeature(r.element),t=!1)}),e.addEventListener(dh.REMOVE,r=>{t||(t=!0,this.removeFeature(r.element),t=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const r in this.featureChangeKeys_)this.featureChangeKeys_[r].forEach(ul);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(r=>{this.removeFeatureInternal(r)});for(const r in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[r])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const t=new m0(kf.CLEAR);this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){const r=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(r,function(i){const s=i.getGeometry();if(s instanceof ud||s.intersectsCoordinate(e))return t(i)})}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,function(r){const i=r.getGeometry();if(i instanceof ud||i.intersectsExtent(e)){const s=t(r);if(s)return s}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),z0(this.nullGeometryFeatures_)||rm(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const t=[];return this.forEachFeatureAtCoordinateDirect(e,function(r){t.push(r)}),t}getFeaturesInExtent(e,t){if(this.featuresRtree_){if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const i=xz(e,t);return[].concat(...i.map(s=>this.featuresRtree_.getInExtent(s)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,t){const r=e[0],i=e[1];let s=null;const a=[NaN,NaN];let o=1/0;const d=[-1/0,-1/0,1/0,1/0];return t=t||MC,this.featuresRtree_.forEachInExtent(d,function(g){if(t(g)){const b=g.getGeometry(),E=o;if(o=b instanceof ud?0:b.closestPointXY(r,i,a,o),o<E){s=g;const S=Math.sqrt(o);d[0]=r-S,d[1]=i-S,d[2]=r+S,d[3]=i+S}}}),s}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const t=this.idIndex_[e.toString()];return t!==void 0?t:null}getFeatureByUid(e){const t=this.uidIndex_[e];return t!==void 0?t:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const t=e.target,r=Go(t),i=t.getGeometry();if(!i)r in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[r]=t);else{const a=i.getExtent();r in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[r],this.featuresRtree_&&this.featuresRtree_.insert(a,t)):this.featuresRtree_&&this.featuresRtree_.update(a,t)}const s=t.getId();if(s!==void 0){const a=s.toString();this.idIndex_[a]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[a]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[r]=t;this.changed(),this.dispatchEvent(new m0(kf.CHANGEFEATURE,t))}hasFeature(e){const t=e.getId();return t!==void 0?t in this.idIndex_:Go(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&z0(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,t,r){const i=this.loadedExtentsRtree_,s=this.strategy_(e,t,r);for(let a=0,o=s.length;a<o;++a){const d=s[a];i.forEachInExtent(d,function(b){return Xp(b.extent,d)})||(++this.loadingExtentsCount_,this.dispatchEvent(new m0(kf.FEATURESLOADSTART)),this.loader_.call(this,d,t,r,b=>{--this.loadingExtentsCount_,this.dispatchEvent(new m0(kf.FEATURESLOADEND,void 0,b))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new m0(kf.FEATURESLOADERROR))}),i.insert(d,{extent:d.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const t=this.loadedExtentsRtree_,r=t.forEachInExtent(e,function(i){if(Wm(i.extent,e))return i});r&&t.remove(r)}removeFeatures(e){let t=!1;for(let r=0,i=e.length;r<i;++r)t=this.removeFeatureInternal(e[r])||t;t&&this.changed()}removeFeature(e){if(!e)return;this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const t=Go(e);if(!(t in this.uidIndex_))return!1;t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e);const r=this.featureChangeKeys_[t];r==null||r.forEach(ul),delete this.featureChangeKeys_[t];const i=e.getId();if(i!==void 0){const s=i.toString(),a=this.idIndex_[s];a===e?delete this.idIndex_[s]:Array.isArray(a)&&(a.splice(a.indexOf(e),1),a.length===1&&(this.idIndex_[s]=a[0]))}return delete this.uidIndex_[t],this.hasListener(kf.REMOVEFEATURE)&&this.dispatchEvent(new m0(kf.REMOVEFEATURE,e)),!0}removeFromIdIndex_(e){for(const t in this.idIndex_)if(this.idIndex_[t]===e){delete this.idIndex_[t];break}}setLoader(e){this.loader_=e}setUrl(e){Xs(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(N9(e,this.format_))}setOverlaps(e){this.overlaps_=e,this.changed()}}const ql={ANIMATING:0,INTERACTING:1},Qi={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},fb=[Qi.FILL],I0=[Qi.STROKE],Bg=[Qi.BEGIN_PATH],q9=[Qi.CLOSE_PATH];class c_ extends $z{constructor(e,t,r,i){super(),this.tolerance=e,this.maxExtent=t,this.pixelRatio=i,this.maxLineWidth=0,this.resolution=r,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const t=this.pixelRatio;return t==1?e:e.map(function(r){return r*t})}appendFlatPointCoordinates(e,t){const r=this.getBufferedMaxExtent(),i=this.tmpCoordinate_,s=this.coordinates;let a=s.length;for(let o=0,d=e.length;o<d;o+=t)i[0]=e[o],i[1]=e[o+1],zg(r,i)&&(s[a++]=i[0],s[a++]=i[1]);return a}appendFlatLineCoordinates(e,t,r,i,s,a){const o=this.coordinates;let d=o.length;const g=this.getBufferedMaxExtent();a&&(t+=i);let b=e[t],E=e[t+1];const S=this.tmpCoordinate_;let I=!0,P,z,j;for(P=t+i;P<r;P+=i)S[0]=e[P],S[1]=e[P+1],j=Z6(g,S),j!==z?(I&&(o[d++]=b,o[d++]=E,I=!1),o[d++]=S[0],o[d++]=S[1]):j===vc.INTERSECTING?(o[d++]=S[0],o[d++]=S[1],I=!1):I=!0,b=S[0],E=S[1],z=j;return(s&&I||P===t+i)&&(o[d++]=b,o[d++]=E),d}drawCustomCoordinates_(e,t,r,i,s){for(let a=0,o=r.length;a<o;++a){const d=r[a],g=this.appendFlatLineCoordinates(e,t,d,i,!1,!1);s.push(g),t=d}return t}drawCustom(e,t,r,i,s){this.beginGeometry(e,t,s);const a=e.getType(),o=e.getStride(),d=this.coordinates.length;let g,b,E,S,I;switch(a){case"MultiPolygon":g=e.getOrientedFlatCoordinates(),S=[];const P=e.getEndss();I=0;for(let z=0,j=P.length;z<j;++z){const q=[];I=this.drawCustomCoordinates_(g,I,P[z],o,q),S.push(q)}this.instructions.push([Qi.CUSTOM,d,S,e,r,aB,s]),this.hitDetectionInstructions.push([Qi.CUSTOM,d,S,e,i||r,aB,s]);break;case"Polygon":case"MultiLineString":E=[],g=a=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),I=this.drawCustomCoordinates_(g,0,e.getEnds(),o,E),this.instructions.push([Qi.CUSTOM,d,E,e,r,TC,s]),this.hitDetectionInstructions.push([Qi.CUSTOM,d,E,e,i||r,TC,s]);break;case"LineString":case"Circle":g=e.getFlatCoordinates(),b=this.appendFlatLineCoordinates(g,0,g.length,o,!1,!1),this.instructions.push([Qi.CUSTOM,d,b,e,r,B0,s]),this.hitDetectionInstructions.push([Qi.CUSTOM,d,b,e,i||r,B0,s]);break;case"MultiPoint":g=e.getFlatCoordinates(),b=this.appendFlatPointCoordinates(g,o),b>d&&(this.instructions.push([Qi.CUSTOM,d,b,e,r,B0,s]),this.hitDetectionInstructions.push([Qi.CUSTOM,d,b,e,i||r,B0,s]));break;case"Point":g=e.getFlatCoordinates(),this.coordinates.push(g[0],g[1]),b=this.coordinates.length,this.instructions.push([Qi.CUSTOM,d,b,e,r,void 0,s]),this.hitDetectionInstructions.push([Qi.CUSTOM,d,b,e,i||r,void 0,s]);break}this.endGeometry(t)}beginGeometry(e,t,r){this.beginGeometryInstruction1_=[Qi.BEGIN_GEOMETRY,t,0,e,r],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[Qi.BEGIN_GEOMETRY,t,0,e,r],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let t;const r=e.length;let i,s,a=-1;for(t=0;t<r;++t)i=e[t],s=i[0],s==Qi.END_GEOMETRY?a=t:s==Qi.BEGIN_GEOMETRY&&(i[2]=t,$X(this.hitDetectionInstructions,a,t),a=-1)}fillStyleToState(e,t={}){if(e){const r=e.getColor();t.fillPatternScale=r&&typeof r=="object"&&"src"in r?this.pixelRatio:1,t.fillStyle=Zp(r||ch)}else t.fillStyle=void 0;return t}strokeStyleToState(e,t={}){if(e){const r=e.getColor();t.strokeStyle=Zp(r||EC);const i=e.getLineCap();t.lineCap=i!==void 0?i:Fy;const s=e.getLineDash();t.lineDash=s?s.slice():Lm;const a=e.getLineDashOffset();t.lineDashOffset=a||Um;const o=e.getLineJoin();t.lineJoin=o!==void 0?o:Ly;const d=e.getWidth();t.lineWidth=d!==void 0?d:OC;const g=e.getMiterLimit();t.miterLimit=g!==void 0?g:SC,t.lineWidth>this.maxLineWidth&&(this.maxLineWidth=t.lineWidth,this.bufferedMaxExtent_=null)}else t.strokeStyle=void 0,t.lineCap=void 0,t.lineDash=null,t.lineDashOffset=void 0,t.lineJoin=void 0,t.lineWidth=void 0,t.miterLimit=void 0;return t}setFillStrokeStyle(e,t){const r=this.state;this.fillStyleToState(e,r),this.strokeStyleToState(t,r)}createFill(e){const t=e.fillStyle,r=[Qi.SET_FILL_STYLE,t];return typeof t!="string"&&r.push(e.fillPatternScale),r}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[Qi.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash?this.applyPixelRatio(e.lineDash):null,e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,t){const r=e.fillStyle;(typeof r!="string"||e.currentFillStyle!=r)&&(r!==void 0&&this.instructions.push(t.call(this,e)),e.currentFillStyle=r)}updateStrokeStyle(e,t){const r=e.strokeStyle,i=e.lineCap,s=e.lineDash,a=e.lineDashOffset,o=e.lineJoin,d=e.lineWidth,g=e.miterLimit;(e.currentStrokeStyle!=r||e.currentLineCap!=i||s!=e.currentLineDash&&!N0(e.currentLineDash,s)||e.currentLineDashOffset!=a||e.currentLineJoin!=o||e.currentLineWidth!=d||e.currentMiterLimit!=g)&&(r!==void 0&&t.call(this,e),e.currentStrokeStyle=r,e.currentLineCap=i,e.currentLineDash=s,e.currentLineDashOffset=a,e.currentLineJoin=o,e.currentLineWidth=d,e.currentMiterLimit=g)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const t=[Qi.END_GEOMETRY,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=mz(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;D0(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class zee extends c_{constructor(e,t,r,i){super(e,t,r,i),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,t,r){if(!this.image_||this.maxExtent&&!zg(this.maxExtent,e.getFlatCoordinates()))return;this.beginGeometry(e,t,r);const i=e.getFlatCoordinates(),s=e.getStride(),a=this.coordinates.length,o=this.appendFlatPointCoordinates(i,s);this.instructions.push([Qi.DRAW_IMAGE,a,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Qi.DRAW_IMAGE,a,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}drawMultiPoint(e,t,r){if(!this.image_)return;this.beginGeometry(e,t,r);const i=e.getFlatCoordinates(),s=[];for(let d=0,g=i.length;d<g;d+=e.getStride())(!this.maxExtent||zg(this.maxExtent,i.slice(d,d+2)))&&s.push(i[d],i[d+1]);const a=this.coordinates.length,o=this.appendFlatPointCoordinates(s,2);this.instructions.push([Qi.DRAW_IMAGE,a,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Qi.DRAW_IMAGE,a,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,t){const r=e.getAnchor(),i=e.getSize(),s=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=r[0],this.anchorY_=r[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=i[1],this.opacity_=e.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=i[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}class jee extends c_{constructor(e,t,r,i){super(e,t,r,i)}drawFlatCoordinates_(e,t,r,i){const s=this.coordinates.length,a=this.appendFlatLineCoordinates(e,t,r,i,!1,!1),o=[Qi.MOVE_TO_LINE_TO,s,a];return this.instructions.push(o),this.hitDetectionInstructions.push(o),r}drawLineString(e,t,r){const i=this.state,s=i.strokeStyle,a=i.lineWidth;if(s===void 0||a===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,t,r),this.hitDetectionInstructions.push([Qi.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Lm,Um],Bg);const o=e.getFlatCoordinates(),d=e.getStride();this.drawFlatCoordinates_(o,0,o.length,d),this.hitDetectionInstructions.push(I0),this.endGeometry(t)}drawMultiLineString(e,t,r){const i=this.state,s=i.strokeStyle,a=i.lineWidth;if(s===void 0||a===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,t,r),this.hitDetectionInstructions.push([Qi.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Lm,Um],Bg);const o=e.getEnds(),d=e.getFlatCoordinates(),g=e.getStride();let b=0;for(let E=0,S=o.length;E<S;++E)b=this.drawFlatCoordinates_(d,b,o[E],g);this.hitDetectionInstructions.push(I0),this.endGeometry(t)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(I0),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(I0),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(Bg)}}class Y9 extends c_{constructor(e,t,r,i){super(e,t,r,i)}drawFlatCoordinatess_(e,t,r,i){const s=this.state,a=s.fillStyle!==void 0,o=s.strokeStyle!==void 0,d=r.length;this.instructions.push(Bg),this.hitDetectionInstructions.push(Bg);for(let g=0;g<d;++g){const b=r[g],E=this.coordinates.length,S=this.appendFlatLineCoordinates(e,t,b,i,!0,!o),I=[Qi.MOVE_TO_LINE_TO,E,S];this.instructions.push(I),this.hitDetectionInstructions.push(I),o&&(this.instructions.push(q9),this.hitDetectionInstructions.push(q9)),t=b}return a&&(this.instructions.push(fb),this.hitDetectionInstructions.push(fb)),o&&(this.instructions.push(I0),this.hitDetectionInstructions.push(I0)),t}drawCircle(e,t,r){const i=this.state,s=i.fillStyle,a=i.strokeStyle;if(s===void 0&&a===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([Qi.SET_FILL_STYLE,ch]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Qi.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Lm,Um]);const o=e.getFlatCoordinates(),d=e.getStride(),g=this.coordinates.length;this.appendFlatLineCoordinates(o,0,o.length,d,!1,!1);const b=[Qi.CIRCLE,g];this.instructions.push(Bg,b),this.hitDetectionInstructions.push(Bg,b),i.fillStyle!==void 0&&(this.instructions.push(fb),this.hitDetectionInstructions.push(fb)),i.strokeStyle!==void 0&&(this.instructions.push(I0),this.hitDetectionInstructions.push(I0)),this.endGeometry(t)}drawPolygon(e,t,r){const i=this.state,s=i.fillStyle,a=i.strokeStyle;if(s===void 0&&a===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([Qi.SET_FILL_STYLE,ch]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Qi.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Lm,Um]);const o=e.getEnds(),d=e.getOrientedFlatCoordinates(),g=e.getStride();this.drawFlatCoordinatess_(d,0,o,g),this.endGeometry(t)}drawMultiPolygon(e,t,r){const i=this.state,s=i.fillStyle,a=i.strokeStyle;if(s===void 0&&a===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([Qi.SET_FILL_STYLE,ch]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Qi.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Lm,Um]);const o=e.getEndss(),d=e.getOrientedFlatCoordinates(),g=e.getStride();let b=0;for(let E=0,S=o.length;E<S;++E)b=this.drawFlatCoordinatess_(d,b,o[E],g);this.endGeometry(t)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const t=this.coordinates;for(let r=0,i=t.length;r<i;++r)t[r]=yg(t[r],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;e.fillStyle!==void 0&&this.updateFillStyle(e,this.createFill),e.strokeStyle!==void 0&&this.updateStrokeStyle(e,this.applyStroke)}}function Nee(n,e,t,r,i){const s=[];let a=t,o=0,d=e.slice(t,2);for(;o<n&&a+i<r;){const[g,b]=d.slice(-2),E=e[a+i],S=e[a+i+1],I=Math.sqrt((E-g)*(E-g)+(S-b)*(S-b));if(o+=I,o>=n){const P=(n-o+I)/I,z=Vh(g,E,P),j=Vh(b,S,P);d.push(z,j),s.push(d),d=[z,j],o==n&&(a+=i),o=0}else if(o<n)d.push(e[a+i],e[a+i+1]),a+=i;else{const P=I-o,z=Vh(g,E,P/I),j=Vh(b,S,P/I);d.push(z,j),s.push(d),d=[z,j],o=0,a+=i}}return o>0&&s.push(d),s}function Wee(n,e,t,r,i){let s=t,a=t,o=0,d=0,g=t,b,E,S,I,P,z,j,q,Y,ie;for(E=t;E<r;E+=i){const te=e[E],V=e[E+1];P!==void 0&&(Y=te-P,ie=V-z,I=Math.sqrt(Y*Y+ie*ie),j!==void 0&&(d+=S,b=Math.acos((j*Y+q*ie)/(S*I)),b>n&&(d>o&&(o=d,s=g,a=E),d=0,g=E-i)),S=I,j=Y,q=ie),P=te,z=V}return d+=I,d>o?[g,E]:[s,a]}const K2={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class Gee extends c_{constructor(e,t,r,i){super(e,t,r,i),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textKeepUpright_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[ch]={fillStyle:ch},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,t,r){const i=this.textFillState_,s=this.textStrokeState_,a=this.textState_;if(this.text_===""||!a||!i&&!s)return;const o=this.coordinates;let d=o.length;const g=e.getType();let b=null,E=e.getStride();if(a.placement==="line"&&(g=="LineString"||g=="MultiLineString"||g=="Polygon"||g=="MultiPolygon")){if(!Du(this.maxExtent,e.getExtent()))return;let S;if(b=e.getFlatCoordinates(),g=="LineString")S=[b.length];else if(g=="MultiLineString")S=e.getEnds();else if(g=="Polygon")S=e.getEnds().slice(0,1);else if(g=="MultiPolygon"){const j=e.getEndss();S=[];for(let q=0,Y=j.length;q<Y;++q)S.push(j[q][0])}this.beginGeometry(e,t,r);const I=a.repeat,P=I?void 0:a.textAlign;let z=0;for(let j=0,q=S.length;j<q;++j){let Y;I?Y=Nee(I*this.resolution,b,z,S[j],E):Y=[b.slice(z,S[j])];for(let ie=0,te=Y.length;ie<te;++ie){const V=Y[ie];let ne=0,G=V.length;if(P==null){const he=Wee(a.maxAngle,V,0,V.length,2);ne=he[0],G=he[1]}for(let he=ne;he<G;he+=E)o.push(V[he],V[he+1]);const oe=o.length;z=S[j],this.drawChars_(d,oe),d=oe}}this.endGeometry(t)}else{let S=a.overflow?null:[];switch(g){case"Point":case"MultiPoint":b=e.getFlatCoordinates();break;case"LineString":b=e.getFlatMidpoint();break;case"Circle":b=e.getCenter();break;case"MultiLineString":b=e.getFlatMidpoints(),E=2;break;case"Polygon":b=e.getFlatInteriorPoint(),a.overflow||S.push(b[2]/this.resolution),E=3;break;case"MultiPolygon":const te=e.getFlatInteriorPoints();b=[];for(let V=0,ne=te.length;V<ne;V+=3)a.overflow||S.push(te[V+2]/this.resolution),b.push(te[V],te[V+1]);if(b.length===0)return;E=2;break}const I=this.appendFlatPointCoordinates(b,E);if(I===d)return;if(S&&(I-d)/2!==b.length/E){let te=d/2;S=S.filter((V,ne)=>{const G=o[(te+ne)*2]===b[ne*E]&&o[(te+ne)*2+1]===b[ne*E+1];return G||--te,G})}this.saveTextStates_();const P=a.backgroundFill?this.createFill(this.fillStyleToState(a.backgroundFill)):null,z=a.backgroundStroke?this.createStroke(this.strokeStyleToState(a.backgroundStroke)):null;this.beginGeometry(e,t,r);let j=a.padding;if(j!=Mg&&(a.scale[0]<0||a.scale[1]<0)){let te=a.padding[0],V=a.padding[1],ne=a.padding[2],G=a.padding[3];a.scale[0]<0&&(V=-V,G=-G),a.scale[1]<0&&(te=-te,ne=-ne),j=[te,V,ne,G]}const q=this.pixelRatio;this.instructions.push([Qi.DRAW_IMAGE,d,I,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,j==Mg?Mg:j.map(function(te){return te*q}),P,z,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,S]);const Y=1/q,ie=P?P.slice(0):null;ie&&(ie[1]=ch),this.hitDetectionInstructions.push([Qi.DRAW_IMAGE,d,I,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[Y,Y],NaN,this.declutterMode_,this.declutterImageWithText_,j,ie,z,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?ch:this.fillKey_,this.textOffsetX_,this.textOffsetY_,S]),this.endGeometry(t)}}saveTextStates_(){const e=this.textStrokeState_,t=this.textState_,r=this.textFillState_,i=this.strokeKey_;e&&(i in this.strokeStates||(this.strokeStates[i]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const s=this.textKey_;s in this.textStates||(this.textStates[s]={font:t.font,textAlign:t.textAlign||BC,justify:t.justify,textBaseline:t.textBaseline||x2,scale:t.scale});const a=this.fillKey_;r&&(a in this.fillStates||(this.fillStates[a]={fillStyle:r.fillStyle}))}drawChars_(e,t){const r=this.textStrokeState_,i=this.textState_,s=this.strokeKey_,a=this.textKey_,o=this.fillKey_;this.saveTextStates_();const d=this.pixelRatio,g=K2[i.textBaseline],b=this.textOffsetY_*d,E=this.text_,S=r?r.lineWidth*Math.abs(i.scale[0])/2:0;this.instructions.push([Qi.DRAW_CHARS,e,t,g,i.overflow,o,i.maxAngle,d,b,s,S*d,E,a,1,this.declutterMode_,this.textKeepUpright_]),this.hitDetectionInstructions.push([Qi.DRAW_CHARS,e,t,g,i.overflow,o&&ch,i.maxAngle,d,b,s,S*d,E,a,1/d,this.declutterMode_,this.textKeepUpright_])}setTextStyle(e,t){let r,i,s;if(!e)this.text_="";else{const a=e.getFill();a?(i=this.textFillState_,i||(i={},this.textFillState_=i),i.fillStyle=Zp(a.getColor()||ch)):(i=null,this.textFillState_=i);const o=e.getStroke();if(!o)s=null,this.textStrokeState_=s;else{s=this.textStrokeState_,s||(s={},this.textStrokeState_=s);const z=o.getLineDash(),j=o.getLineDashOffset(),q=o.getWidth(),Y=o.getMiterLimit();s.lineCap=o.getLineCap()||Fy,s.lineDash=z?z.slice():Lm,s.lineDashOffset=j===void 0?Um:j,s.lineJoin=o.getLineJoin()||Ly,s.lineWidth=q===void 0?OC:q,s.miterLimit=Y===void 0?SC:Y,s.strokeStyle=Zp(o.getColor()||EC)}r=this.textState_;const d=e.getFont()||dz;hz(d);const g=e.getScaleArray();r.overflow=e.getOverflow(),r.font=d,r.maxAngle=e.getMaxAngle(),r.placement=e.getPlacement(),r.textAlign=e.getTextAlign(),r.repeat=e.getRepeat(),r.justify=e.getJustify(),r.textBaseline=e.getTextBaseline()||x2,r.backgroundFill=e.getBackgroundFill(),r.backgroundStroke=e.getBackgroundStroke(),r.padding=e.getPadding()||Mg,r.scale=g===void 0?[1,1]:g;const b=e.getOffsetX(),E=e.getOffsetY(),S=e.getRotateWithView(),I=e.getKeepUpright(),P=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=b===void 0?0:b,this.textOffsetY_=E===void 0?0:E,this.textRotateWithView_=S===void 0?!1:S,this.textKeepUpright_=I===void 0?!0:I,this.textRotation_=P===void 0?0:P,this.strokeKey_=s?(typeof s.strokeStyle=="string"?s.strokeStyle:Go(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.textKey_=r.font+r.scale+(r.textAlign||"?")+(r.repeat||"?")+(r.justify||"?")+(r.textBaseline||"?"),this.fillKey_=i&&i.fillStyle?typeof i.fillStyle=="string"?i.fillStyle:"|"+Go(i.fillStyle):""}this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}const Qee={Circle:Y9,Default:c_,Image:zee,LineString:jee,Polygon:Y9,Text:Gee};class tj{constructor(e,t,r,i){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=i,this.resolution_=r,this.buildersByZIndex_={}}finish(){const e={};for(const t in this.buildersByZIndex_){e[t]=e[t]||{};const r=this.buildersByZIndex_[t];for(const i in r){const s=r[i].finish();e[t][i]=s}}return e}getBuilder(e,t){const r=e!==void 0?e.toString():"0";let i=this.buildersByZIndex_[r];i===void 0&&(i={},this.buildersByZIndex_[r]=i);let s=i[t];if(s===void 0){const a=Qee[t];s=new a(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),i[t]=s}return s}}function qee(n,e,t,r,i,s,a,o,d,g,b,E,S=!0){let I=n[e],P=n[e+1],z=0,j=0,q=0,Y=0;function ie(){z=I,j=P,e+=r,I=n[e],P=n[e+1],Y+=q,q=Math.sqrt((I-z)*(I-z)+(P-j)*(P-j))}do ie();while(e<t-r&&Y+q<s);let te=q===0?0:(s-Y)/q;const V=Vh(z,I,te),ne=Vh(j,P,te),G=e-r,oe=Y,he=s+o*d(g,i,b);for(;e<t-r&&Y+q<he;)ie();te=q===0?0:(he-Y)/q;const pe=Vh(z,I,te),Ee=Vh(j,P,te);let me=!1;if(S)if(E){const Ze=[V,ne,pe,Ee];Oz(Ze,0,4,2,E,Ze,Ze),me=Ze[0]>Ze[2]}else me=V>pe;const Se=Math.PI,De=[],be=G+r===e;e=G,q=0,Y=oe,I=n[e],P=n[e+1];let at;if(be){ie(),at=Math.atan2(P-j,I-z),me&&(at+=at>0?-Se:Se);const Ze=(pe+V)/2,Je=(Ee+ne)/2;return De[0]=[Ze,Je,(he-s)/2,at,i],De}i=i.replace(/\n/g," ");for(let Ze=0,Je=i.length;Ze<Je;){ie();let We=Math.atan2(P-j,I-z);if(me&&(We+=We>0?-Se:Se),at!==void 0){let gt=We-at;if(gt+=gt>Se?-2*Se:gt<-Se?2*Se:0,Math.abs(gt)>a)return null}at=We;const Me=Ze;let Fe=0;for(;Ze<Je;++Ze){const gt=me?Je-Ze-1:Ze,Lt=o*d(g,i[gt],b);if(e+r<t&&Y+q<s+Fe+Lt/2)break;Fe+=Lt}if(Ze===Me)continue;const He=me?i.substring(Je-Me,Je-Ze):i.substring(Me,Ze);te=q===0?0:(s+Fe/2-Y)/q;const bt=Vh(z,I,te),Yt=Vh(j,P,te);De.push([bt,Yt,Fe/2,We,He]),s+=Fe}return De}class N8{constructor(){Pn(this,"pushMethodArgs_",(...e)=>(this.instructions_[this.zIndex+this.offset_].push(e),this));this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(_2(),{get:(e,t)=>{if(typeof _2()[t]=="function")return this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(t),this.pushMethodArgs_},set:(e,t,r)=>(this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(t,r),!0)})}pushFunction(e){this.instructions_[this.zIndex+this.offset_].push(e)}getContext(){return this.context_}draw(e){this.instructions_.forEach(t=>{for(let r=0,i=t.length;r<i;++r){const s=t[r];if(typeof s=="function"){s(e);continue}const a=t[++r];if(typeof e[s]=="function")e[s](...a);else{if(typeof a=="function"){e[s]=a(e);continue}e[s]=a}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const b1=Wf(),g0=[],Em=[],Bm=[],y0=[];function $9(n){return n[3].declutterBox}const V9=new RegExp("[-----]");function X4(n,e){return e==="start"?e=V9.test(n)?"right":"left":e==="end"&&(e=V9.test(n)?"left":"right"),K2[e]}function Yee(n,e,t){return t>0&&n.push(`
`,""),n.push(e,""),n}class $ee{constructor(e,t,r,i,s){this.overlaps=r,this.pixelRatio=t,this.resolution=e,this.alignAndScaleFill_,this.instructions=i.instructions,this.coordinates=i.coordinates,this.coordinateCache_={},this.renderedTransform_=ph(),this.hitDetectionInstructions=i.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=i.fillStates||{},this.strokeStates=i.strokeStates||{},this.textStates=i.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=s?new N8:null}getZIndexContext(){return this.zIndexContext_}createLabel(e,t,r,i){const s=e+t+r+i;if(this.labels_[s])return this.labels_[s];const a=i?this.strokeStates[i]:null,o=r?this.fillStates[r]:null,d=this.textStates[t],g=this.pixelRatio,b=[d.scale[0]*g,d.scale[1]*g],E=d.justify?K2[d.justify]:X4(Array.isArray(e)?e[0]:e,d.textAlign||BC),S=i&&a.lineWidth?a.lineWidth:0,I=Array.isArray(e)?e:String(e).split(`
`).reduce(Yee,[]),{width:P,height:z,widths:j,heights:q,lineWidths:Y}=sJ(d,I),ie=P+S,te=[],V=(ie+2)*b[0],ne=(z+S)*b[1],G={width:V<0?Math.floor(V):Math.ceil(V),height:ne<0?Math.floor(ne):Math.ceil(ne),contextInstructions:te};(b[0]!=1||b[1]!=1)&&te.push("scale",b),i&&(te.push("strokeStyle",a.strokeStyle),te.push("lineWidth",S),te.push("lineCap",a.lineCap),te.push("lineJoin",a.lineJoin),te.push("miterLimit",a.miterLimit),te.push("setLineDash",[a.lineDash]),te.push("lineDashOffset",a.lineDashOffset)),r&&te.push("fillStyle",o.fillStyle),te.push("textBaseline","middle"),te.push("textAlign","center");const oe=.5-E;let he=E*ie+oe*S;const pe=[],Ee=[];let me=0,Se=0,De=0,be=0,at;for(let Ze=0,Je=I.length;Ze<Je;Ze+=2){const We=I[Ze];if(We===`
`){Se+=me,me=0,he=E*ie+oe*S,++be;continue}const Me=I[Ze+1]||d.font;Me!==at&&(i&&pe.push("font",Me),r&&Ee.push("font",Me),at=Me),me=Math.max(me,q[De]);const Fe=[We,he+oe*j[De]+E*(j[De]-Y[be]),.5*(S+me)+Se];he+=j[De],i&&pe.push("strokeText",Fe),r&&Ee.push("fillText",Fe),++De}return Array.prototype.push.apply(te,pe),Array.prototype.push.apply(te,Ee),this.labels_[s]=G,G}replayTextBackground_(e,t,r,i,s,a,o){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,r),e.lineTo.apply(e,i),e.lineTo.apply(e,s),e.lineTo.apply(e,t),a&&(this.alignAndScaleFill_=a[2],e.fillStyle=a[1],this.fill_(e)),o&&(this.setStrokeStyle_(e,o),e.stroke())}calculateImageOrLabelDimensions_(e,t,r,i,s,a,o,d,g,b,E,S,I,P,z,j){o*=S[0],d*=S[1];let q=r-o,Y=i-d;const ie=s+g>e?e-g:s,te=a+b>t?t-b:a,V=P[3]+ie*S[0]+P[1],ne=P[0]+te*S[1]+P[2],G=q-P[3],oe=Y-P[0];(z||E!==0)&&(g0[0]=G,y0[0]=G,g0[1]=oe,Em[1]=oe,Em[0]=G+V,Bm[0]=Em[0],Bm[1]=oe+ne,y0[1]=Bm[1]);let he;return E!==0?(he=sm(ph(),r,i,1,1,E,-r,-i),wA(he,g0),wA(he,Em),wA(he,Bm),wA(he,y0),Nm(Math.min(g0[0],Em[0],Bm[0],y0[0]),Math.min(g0[1],Em[1],Bm[1],y0[1]),Math.max(g0[0],Em[0],Bm[0],y0[0]),Math.max(g0[1],Em[1],Bm[1],y0[1]),b1)):Nm(Math.min(G,G+V),Math.min(oe,oe+ne),Math.max(G,G+V),Math.max(oe,oe+ne),b1),I&&(q=Math.round(q),Y=Math.round(Y)),{drawImageX:q,drawImageY:Y,drawImageW:ie,drawImageH:te,originX:g,originY:b,declutterBox:{minX:b1[0],minY:b1[1],maxX:b1[2],maxY:b1[3],value:j},canvasTransform:he,scale:S}}replayImageOrLabel_(e,t,r,i,s,a,o){const d=!!(a||o),g=i.declutterBox,b=o?o[2]*i.scale[0]/2:0;return g.minX-b<=t[0]&&g.maxX+b>=0&&g.minY-b<=t[1]&&g.maxY+b>=0&&(d&&this.replayTextBackground_(e,g0,Em,Bm,y0,a,o),aJ(e,i.canvasTransform,s,r,i.originX,i.originY,i.drawImageW,i.drawImageH,i.drawImageX,i.drawImageY,i.scale)),!0}fill_(e){const t=this.alignAndScaleFill_;if(t){const r=wA(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;e.save(),e.translate(r[0]%i,r[1]%i),t!==1&&e.scale(t,t),e.rotate(this.viewRotation_)}e.fill(),t&&e.restore()}setStrokeStyle_(e,t){e.strokeStyle=t[1],e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6])}drawLabelWithPointPlacement_(e,t,r,i){const s=this.textStates[t],a=this.createLabel(e,t,i,r),o=this.strokeStates[r],d=this.pixelRatio,g=X4(Array.isArray(e)?e[0]:e,s.textAlign||BC),b=K2[s.textBaseline||x2],E=o&&o.lineWidth?o.lineWidth:0,S=a.width/d-2*s.scale[0],I=g*S+2*(.5-g)*E,P=b*a.height/d+2*(.5-b)*E;return{label:a,anchorX:I,anchorY:P}}execute_(e,t,r,i,s,a,o,d){const g=this.zIndexContext_;let b;this.pixelCoordinates_&&N0(r,this.renderedTransform_)?b=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),b=R0(this.coordinates,0,this.coordinates.length,2,r,this.pixelCoordinates_),oee(this.renderedTransform_,r));let E=0;const S=i.length;let I=0,P,z,j,q,Y,ie,te,V,ne,G,oe,he,pe,Ee=0,me=0;const Se=this.coordinateCache_,De=this.viewRotation_,be=Math.round(Math.atan2(-r[1],r[0])*1e12)/1e12,at={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:De},Ze=this.instructions!=i||this.overlaps?0:200;let Je,We,Me,Fe;for(;E<S;){const He=i[E];switch(He[0]){case Qi.BEGIN_GEOMETRY:Je=He[1],Fe=He[3],Je.getGeometry()?o!==void 0&&!Du(o,Fe.getExtent())?E=He[2]+1:++E:E=He[2],g&&(g.zIndex=He[4]);break;case Qi.BEGIN_PATH:Ee>Ze&&(this.fill_(e),Ee=0),me>Ze&&(e.stroke(),me=0),!Ee&&!me&&(e.beginPath(),Y=NaN,ie=NaN),++E;break;case Qi.CIRCLE:I=He[1];const Yt=b[I],gt=b[I+1],Lt=b[I+2],Kt=b[I+3],Ue=Lt-Yt,Pe=Kt-gt,Be=Math.sqrt(Ue*Ue+Pe*Pe);e.moveTo(Yt+Be,gt),e.arc(Yt,gt,Be,0,2*Math.PI,!0),++E;break;case Qi.CLOSE_PATH:e.closePath(),++E;break;case Qi.CUSTOM:I=He[1],P=He[2];const it=He[3],_t=He[4],ft=He[5];at.geometry=it,at.feature=Je,E in Se||(Se[E]=[]);const Ut=Se[E];ft?ft(b,I,P,2,Ut):(Ut[0]=b[I],Ut[1]=b[I+1],Ut.length=2),g&&(g.zIndex=He[6]),_t(Ut,at),++E;break;case Qi.DRAW_IMAGE:I=He[1],P=He[2],ne=He[3],z=He[4],j=He[5];let rn=He[6];const Dt=He[7],_n=He[8],qn=He[9],tn=He[10];let rr=He[11];const Dn=He[12];let pn=He[13];q=He[14]||"declutter";const Zn=He[15];if(!ne&&He.length>=20){G=He[19],oe=He[20],he=He[21],pe=He[22];const Gt=this.drawLabelWithPointPlacement_(G,oe,he,pe);ne=Gt.label,He[3]=ne;const jt=He[23];z=(Gt.anchorX-jt)*this.pixelRatio,He[4]=z;const xt=He[24];j=(Gt.anchorY-xt)*this.pixelRatio,He[5]=j,rn=ne.height,He[6]=rn,pn=ne.width,He[13]=pn}let dr;He.length>25&&(dr=He[25]);let vr,Jn,Qe;He.length>17?(vr=He[16],Jn=He[17],Qe=He[18]):(vr=Mg,Jn=null,Qe=null),tn&&be?rr+=De:!tn&&!be&&(rr-=De);let ce=0;for(;I<P;I+=2){if(dr&&dr[ce++]<pn/this.pixelRatio)continue;const Gt=this.calculateImageOrLabelDimensions_(ne.width,ne.height,b[I],b[I+1],pn,rn,z,j,_n,qn,rr,Dn,s,vr,!!Jn||!!Qe,Je),jt=[e,t,ne,Gt,Dt,Jn,Qe];if(d){let xt,Tn,On;if(Zn){const on=P-I;if(!Zn[on]){Zn[on]={args:jt,declutterMode:q};continue}const Rn=Zn[on];xt=Rn.args,Tn=Rn.declutterMode,delete Zn[on],On=$9(xt)}let gr,Er;if(xt&&(Tn!=="declutter"||!d.collides(On))&&(gr=!0),(q!=="declutter"||!d.collides(Gt.declutterBox))&&(Er=!0),Tn==="declutter"&&q==="declutter"){const on=gr&&Er;gr=on,Er=on}gr&&(Tn!=="none"&&d.insert(On),this.replayImageOrLabel_.apply(this,xt)),Er&&(q!=="none"&&d.insert(Gt.declutterBox),this.replayImageOrLabel_.apply(this,jt))}else this.replayImageOrLabel_.apply(this,jt)}++E;break;case Qi.DRAW_CHARS:const fe=He[1],nt=He[2],St=He[3],Ht=He[4];pe=He[5];const sn=He[6],tr=He[7],Oe=He[8];he=He[9];const se=He[10];G=He[11],oe=He[12];const ve=[He[13],He[13]];q=He[14]||"declutter";const p=He[15],Ne=this.textStates[oe],Ye=Ne.font,rt=[Ne.scale[0]*tr,Ne.scale[1]*tr];let ct;Ye in this.widths_?ct=this.widths_[Ye]:(ct={},this.widths_[Ye]=ct);const dt=qz(b,fe,nt,2),qt=Math.abs(rt[0])*_9(Ye,G,ct);if(Ht||qt<=dt){const Gt=this.textStates[oe].textAlign,jt=(dt-qt)*X4(G,Gt),xt=qee(b,fe,nt,2,G,jt,sn,Math.abs(rt[0]),_9,Ye,ct,be?0:this.viewRotation_,p);e:if(xt){const Tn=[];let On,gr,Er,on,Rn;if(he)for(On=0,gr=xt.length;On<gr;++On){Rn=xt[On],Er=Rn[4],on=this.createLabel(Er,oe,"",he),z=Rn[2]+(rt[0]<0?-se:se),j=St*on.height+(.5-St)*2*se*rt[1]/rt[0]-Oe;const er=this.calculateImageOrLabelDimensions_(on.width,on.height,Rn[0],Rn[1],on.width,on.height,z,j,0,0,Rn[3],ve,!1,Mg,!1,Je);if(d&&q==="declutter"&&d.collides(er.declutterBox))break e;Tn.push([e,t,on,er,1,null,null])}if(pe)for(On=0,gr=xt.length;On<gr;++On){Rn=xt[On],Er=Rn[4],on=this.createLabel(Er,oe,pe,""),z=Rn[2],j=St*on.height-Oe;const er=this.calculateImageOrLabelDimensions_(on.width,on.height,Rn[0],Rn[1],on.width,on.height,z,j,0,0,Rn[3],ve,!1,Mg,!1,Je);if(d&&q==="declutter"&&d.collides(er.declutterBox))break e;Tn.push([e,t,on,er,1,null,null])}d&&q!=="none"&&d.load(Tn.map($9));for(let er=0,Xr=Tn.length;er<Xr;++er)this.replayImageOrLabel_.apply(this,Tn[er])}}++E;break;case Qi.END_GEOMETRY:if(a!==void 0){Je=He[1];const Gt=a(Je,Fe,q);if(Gt)return Gt}++E;break;case Qi.FILL:Ze?Ee++:this.fill_(e),++E;break;case Qi.MOVE_TO_LINE_TO:for(I=He[1],P=He[2],We=b[I],Me=b[I+1],e.moveTo(We,Me),Y=We+.5|0,ie=Me+.5|0,I+=2;I<P;I+=2)We=b[I],Me=b[I+1],te=We+.5|0,V=Me+.5|0,(I==P-2||te!==Y||V!==ie)&&(e.lineTo(We,Me),Y=te,ie=V);++E;break;case Qi.SET_FILL_STYLE:this.alignAndScaleFill_=He[2],Ee&&(this.fill_(e),Ee=0,me&&(e.stroke(),me=0)),e.fillStyle=He[1],++E;break;case Qi.SET_STROKE_STYLE:me&&(e.stroke(),me=0),this.setStrokeStyle_(e,He),++E;break;case Qi.STROKE:Ze?me++:e.stroke(),++E;break;default:++E;break}}Ee&&this.fill_(e),me&&e.stroke()}execute(e,t,r,i,s,a){this.viewRotation_=i,this.execute_(e,t,r,this.instructions,s,void 0,void 0,a)}executeHitDetection(e,t,r,i,s){return this.viewRotation_=r,this.execute_(e,[e.canvas.width,e.canvas.height],t,this.hitDetectionInstructions,!0,i,s)}}const ay=["Polygon","Circle","LineString","Image","Text","Default"],D2=["Image","Text"],Vee=ay.filter(n=>!D2.includes(n));class nj{constructor(e,t,r,i,s,a,o){this.maxExtent_=e,this.overlaps_=i,this.pixelRatio_=r,this.resolution_=t,this.renderBuffer_=a,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=ph(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(s,o)}clip(e,t){const r=this.getClipCoords(t);e.beginPath(),e.moveTo(r[0],r[1]),e.lineTo(r[2],r[3]),e.lineTo(r[4],r[5]),e.lineTo(r[6],r[7]),e.clip()}createExecutors_(e,t){for(const r in e){let i=this.executorsByZIndex_[r];i===void 0&&(i={},this.executorsByZIndex_[r]=i);const s=e[r];for(const a in s){const o=s[a];i[a]=new $ee(this.resolution_,this.pixelRatio_,this.overlaps_,o,t)}}}hasExecutors(e){for(const t in this.executorsByZIndex_){const r=this.executorsByZIndex_[t];for(let i=0,s=e.length;i<s;++i)if(e[i]in r)return!0}return!1}forEachFeatureAtCoordinate(e,t,r,i,s,a){i=Math.round(i);const o=i*2+1,d=sm(this.hitDetectionTransform_,i+.5,i+.5,1/t,-1/t,-r,-e[0],-e[1]),g=!this.hitDetectionContext_;g&&(this.hitDetectionContext_=Ru(o,o,void 0,{willReadFrequently:!0}));const b=this.hitDetectionContext_;b.canvas.width!==o||b.canvas.height!==o?(b.canvas.width=o,b.canvas.height=o):g||b.clearRect(0,0,o,o);let E;this.renderBuffer_!==void 0&&(E=Wf(),lC(E,e),D0(E,t*(this.renderBuffer_+i),E));const S=Hee(i);let I;function P(V,ne,G){const oe=b.getImageData(0,0,o,o).data;for(let he=0,pe=S.length;he<pe;he++)if(oe[S[he]]>0){if(!a||G==="none"||I!=="Image"&&I!=="Text"||a.includes(V)){const Ee=(S[he]-3)/4,me=i-Ee%o,Se=i-(Ee/o|0),De=s(V,ne,me*me+Se*Se);if(De)return De}b.clearRect(0,0,o,o);break}}const z=Object.keys(this.executorsByZIndex_).map(Number);z.sort(Fm);let j,q,Y,ie,te;for(j=z.length-1;j>=0;--j){const V=z[j].toString();for(Y=this.executorsByZIndex_[V],q=ay.length-1;q>=0;--q)if(I=ay[q],ie=Y[I],ie!==void 0&&(te=ie.executeHitDetection(b,d,r,P,E),te))return te}}getClipCoords(e){const t=this.maxExtent_;if(!t)return null;const r=t[0],i=t[1],s=t[2],a=t[3],o=[r,i,r,a,s,a,s,i];return R0(o,0,8,2,e,o),o}isEmpty(){return z0(this.executorsByZIndex_)}execute(e,t,r,i,s,a,o){const d=Object.keys(this.executorsByZIndex_).map(Number);d.sort(o?YX:Fm),a=a||ay;const g=ay.length;for(let b=0,E=d.length;b<E;++b){const S=d[b].toString(),I=this.executorsByZIndex_[S];for(let P=0,z=a.length;P<z;++P){const j=a[P],q=I[j];if(q!==void 0){const Y=o===null?void 0:q.getZIndexContext(),ie=Y?Y.getContext():e,te=this.maxExtent_&&j!=="Image"&&j!=="Text";if(te&&(ie.save(),this.clip(ie,r)),!Y||j==="Text"||j==="Image"?q.execute(ie,t,r,i,s,o):Y.pushFunction(V=>q.execute(V,t,r,i,s,o)),te&&ie.restore(),Y){Y.offset();const V=d[b]*g+P;this.deferredZIndexContexts_[V]||(this.deferredZIndexContexts_[V]=[]),this.deferredZIndexContexts_[V].push(Y)}}}}this.renderedContext_=e}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const e=this.deferredZIndexContexts_,t=Object.keys(e).map(Number).sort(Fm);for(let r=0,i=t.length;r<i;++r)e[t[r]].forEach(s=>{s.draw(this.renderedContext_),s.clear()}),e[t[r]].length=0}}const J4={};function Hee(n){if(J4[n]!==void 0)return J4[n];const e=n*2+1,t=n*n,r=new Array(t+1);for(let s=0;s<=n;++s)for(let a=0;a<=n;++a){const o=s*s+a*a;if(o>t)break;let d=r[o];d||(d=[],r[o]=d),d.push(((n+s)*e+(n+a))*4+3),s>0&&d.push(((n-s)*e+(n+a))*4+3),a>0&&(d.push(((n+s)*e+(n-a))*4+3),s>0&&d.push(((n-s)*e+(n-a))*4+3))}const i=[];for(let s=0,a=r.length;s<a;++s)r[s]&&i.push(...r[s]);return J4[n]=i,i}const Jh=.5;function rj(n,e,t,r,i,s,a,o,d){const g=d?D8(i):i,b=n[0]*Jh,E=n[1]*Jh,S=Ru(b,E);S.imageSmoothingEnabled=!1;const I=S.canvas,P=new vee(S,Jh,i,null,a,o,d?l_(ree(),d):null),z=t.length,j=Math.floor((256*256*256-1)/z),q={};for(let ie=1;ie<=z;++ie){const te=t[ie-1],V=te.getStyleFunction()||r;if(!V)continue;let ne=V(te,s);if(!ne)continue;Array.isArray(ne)||(ne=[ne]);const oe=(ie*j).toString(16).padStart(7,"#00000");for(let he=0,pe=ne.length;he<pe;++he){const Ee=ne[he],me=Ee.getGeometryFunction()(te);if(!me||!Du(g,me.getExtent()))continue;const Se=Ee.clone(),De=Se.getFill();De&&De.setColor(oe);const be=Se.getStroke();be&&(be.setColor(oe),be.setLineDash(null)),Se.setText(void 0);const at=Ee.getImage();if(at){const Me=at.getImageSize();if(!Me)continue;const Fe=Ru(Me[0],Me[1],void 0,{alpha:!1}),He=Fe.canvas;Fe.fillStyle=oe,Fe.fillRect(0,0,He.width,He.height),Se.setImage(new M2({img:He,anchor:at.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:at.getOrigin(),opacity:1,size:at.getSize(),scale:at.getScale(),rotation:at.getRotation(),rotateWithView:at.getRotateWithView()}))}const Ze=Se.getZIndex()||0;let Je=q[Ze];Je||(Je={},q[Ze]=Je,Je.Polygon=[],Je.Circle=[],Je.LineString=[],Je.Point=[]);const We=me.getType();if(We==="GeometryCollection"){const Me=me.getGeometriesArrayRecursive();for(let Fe=0,He=Me.length;Fe<He;++Fe){const bt=Me[Fe];Je[bt.getType().replace("Multi","")].push(bt,Se)}}else Je[We.replace("Multi","")].push(me,Se)}}const Y=Object.keys(q).map(Number).sort(Fm);for(let ie=0,te=Y.length;ie<te;++ie){const V=q[Y[ie]];for(const ne in V){const G=V[ne];for(let oe=0,he=G.length;oe<he;oe+=2){P.setStyle(G[oe+1]);for(let pe=0,Ee=e.length;pe<Ee;++pe)P.setTransform(e[pe]),P.drawGeometry(G[oe])}}}return S.getImageData(0,0,I.width,I.height)}function ij(n,e,t){const r=[];if(t){const i=Math.floor(Math.round(n[0])*Jh),s=Math.floor(Math.round(n[1])*Jh),a=(MA(i,0,t.width-1)+MA(s,0,t.height-1)*t.width)*4,o=t.data[a],d=t.data[a+1],b=t.data[a+2]+256*(d+256*o),E=Math.floor((256*256*256-1)/e.length);b&&b%E===0&&r.push(e[b/E-1])}return r}class oj extends wp{constructor(e,t,r,i){super(e),this.inversePixelTransform=t,this.frameState=r,this.context=i}}const Zee=5;class Xee extends o_{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.staleKeys_=new Array,this.maxStaleKeys=Zee}getStaleKeys(){return this.staleKeys_}prependStaleKey(e){this.staleKeys_.unshift(e),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(e){return xo()}getData(e){return null}prepareFrame(e){return xo()}renderFrame(e,t){return xo()}forEachFeatureAtCoordinate(e,t,r,i,s){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const t=e.target;(t.getState()===di.LOADED||t.getState()===di.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return t!=di.LOADED&&t!=di.ERROR&&e.addEventListener(lo.CHANGE,this.boundHandleImageChange_),t==di.IDLE&&(e.load(),t=e.getState()),t==di.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}}const H9=[];let ey=null;function Jee(){ey=Ru(1,1,void 0,{willReadFrequently:!0})}class W8 extends Xee{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=ph(),this.pixelTransform=ph(),this.inversePixelTransform=ph(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(e,t,r){ey||Jee(),ey.clearRect(0,0,1,1);let i;try{ey.drawImage(e,t,r,1,1,0,0,1,1),i=ey.getImageData(0,0,1,1).data}catch{return ey=null,null}return i}getBackground(e){let r=this.getLayer().getBackground();return typeof r=="function"&&(r=r(e.viewState.resolution)),r||void 0}useContainer(e,t,r){const i=this.getLayer().getClassName();let s,a;if(e&&e.className===i&&(!r||e&&e.style.backgroundColor&&N0(Py(e.style.backgroundColor),Py(r)))){const o=e.firstElementChild;o instanceof HTMLCanvasElement&&(a=o.getContext("2d"))}if(a&&a.canvas.style.transform===t?(this.container=e,this.context=a,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){s=document.createElement("div"),s.className=i;let o=s.style;o.position="absolute",o.width="100%",o.height="100%",a=Ru();const d=a.canvas;s.appendChild(d),o=d.style,o.position="absolute",o.left="0",o.transformOrigin="top left",this.container=s,this.context=a}!this.containerReused&&r&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=r)}clipUnrotated(e,t,r){const i=Qm(r),s=zx(r),a=Ux(r),o=Lx(r);wA(t.coordinateToPixelTransform,i),wA(t.coordinateToPixelTransform,s),wA(t.coordinateToPixelTransform,a),wA(t.coordinateToPixelTransform,o);const d=this.inversePixelTransform;wA(d,i),wA(d,s),wA(d,a),wA(d,o),e.save(),e.beginPath(),e.moveTo(Math.round(i[0]),Math.round(i[1])),e.lineTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.clip()}prepareContainer(e,t){const r=e.extent,i=e.viewState.resolution,s=e.viewState.rotation,a=e.pixelRatio,o=Math.round(Ds(r)/i*a),d=Math.round(sA(r)/i*a);sm(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/a,1/a,s,-o/2,-d/2),Lz(this.inversePixelTransform,this.pixelTransform);const g=lee(this.pixelTransform);if(this.useContainer(t,g,this.getBackground(e)),!this.containerReused){const b=this.context.canvas;b.width!=o||b.height!=d?(b.width=o,b.height=d):this.context.clearRect(0,0,o,d),g!==b.style.transform&&(b.style.transform=g)}}dispatchRenderEvent_(e,t,r){const i=this.getLayer();if(i.hasListener(e)){const s=new oj(e,this.inversePixelTransform,r,t);i.dispatchEvent(s)}}preRender(e,t){this.frameState=t,!t.declutter&&this.dispatchRenderEvent_(zf.PRERENDER,e,t)}postRender(e,t){t.declutter||this.dispatchRenderEvent_(zf.POSTRENDER,e,t)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new N8),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_(zf.PRERENDER,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(zf.POSTRENDER,this.context,e))}getRenderTransform(e,t,r,i,s,a,o){const d=s/2,g=a/2,b=i/t,E=-b,S=-e[0]+o,I=-e[1];return sm(this.tempTransform,d,g,b,E,-r,S,I)}disposeInternal(){delete this.frameState,super.disposeInternal()}}class ete extends W8{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=Wf(),this.wrappedRenderedExtent_=Wf(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(e,t,r){const i=t.extent,s=t.viewState,a=s.center,o=s.resolution,d=s.projection,g=s.rotation,b=d.getExtent(),E=this.getLayer().getSource(),S=this.getLayer().getDeclutter(),I=t.pixelRatio,P=t.viewHints,z=!(P[ql.ANIMATING]||P[ql.INTERACTING]),j=this.context,q=Math.round(Ds(i)/o*I),Y=Math.round(sA(i)/o*I),ie=E.getWrapX()&&d.canWrapX(),te=ie?Ds(b):null,V=ie?Math.ceil((i[2]-b[2])/te)+1:1;let ne=ie?Math.floor((i[0]-b[0])/te):0;do{let G=this.getRenderTransform(a,o,0,I,q,Y,ne*te);t.declutter&&(G=G.slice(0)),e.execute(j,[j.canvas.width,j.canvas.height],G,g,z,r===void 0?ay:r?D2:Vee,r?S&&t.declutter[S]:void 0)}while(++ne<V)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=Ru(this.context.canvas.width,this.context.canvas.height,H9))}resetDrawContext_(){if(this.opacity_!==1){const e=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=e,t_(this.context),H9.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(e){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,e,!0)}renderDeferredInternal(e){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(e,t){const r=e.layerStatesArray[e.layerIndex];this.opacity_=r.opacity;const i=e.viewState;this.prepareContainer(e,t);const s=this.context,a=this.replayGroup_;let o=a&&!a.isEmpty();if(!o&&!(this.getLayer().hasListener(zf.PRERENDER)||this.getLayer().hasListener(zf.POSTRENDER)))return null;if(this.setDrawContext_(),this.preRender(s,e),i.projection,this.clipped_=!1,o&&r.extent&&this.clipping){const d=Jp(r.extent);o=Du(d,e.extent),this.clipped_=o&&!Xp(d,e.extent),this.clipped_&&this.clipUnrotated(s,e,d)}return o&&this.renderWorlds(a,e,this.getLayer().getDeclutter()?!1:void 0),!e.declutter&&this.clipped_&&s.restore(),this.postRender(s,e),this.renderedRotation_!==i.rotation&&(this.renderedRotation_=i.rotation,this.hitDetectionImageData_=null),e.declutter||this.resetDrawContext_(),this.container}getFeatures(e){return new Promise(t=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const r=this.frameState.size.slice(),i=this.renderedCenter_,s=this.renderedResolution_,a=this.renderedRotation_,o=this.renderedProjection_,d=this.wrappedRenderedExtent_,g=this.getLayer(),b=[],E=r[0]*Jh,S=r[1]*Jh;b.push(this.getRenderTransform(i,s,a,Jh,E,S,0).slice());const I=g.getSource(),P=o.getExtent();if(I.getWrapX()&&o.canWrapX()&&!Xp(P,d)){let z=d[0];const j=Ds(P);let q=0,Y;for(;z<P[0];)--q,Y=j*q,b.push(this.getRenderTransform(i,s,a,Jh,E,S,Y).slice()),z+=j;for(q=0,z=d[2];z>P[2];)++q,Y=j*q,b.push(this.getRenderTransform(i,s,a,Jh,E,S,Y).slice()),z-=j}this.hitDetectionImageData_=rj(r,b,this.renderedFeatures_,g.getStyleFunction(),d,s,a,lB(s,this.renderedPixelRatio_),null)}t(ij(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,t,r,i,s){var S,I;if(!this.replayGroup_)return;const a=t.viewState.resolution,o=t.viewState.rotation,d=this.getLayer(),g={},b=function(P,z,j){const q=Go(P),Y=g[q];if(Y){if(Y!==!0&&j<Y.distanceSq){if(j===0)return g[q]=!0,s.splice(s.lastIndexOf(Y),1),i(P,d,z);Y.geometry=z,Y.distanceSq=j}}else{if(j===0)return g[q]=!0,i(P,d,z);s.push(g[q]={feature:P,layer:d,geometry:z,distanceSq:j,callback:i})}},E=this.getLayer().getDeclutter();return this.replayGroup_.forEachFeatureAtCoordinate(e,a,o,r,b,E?(I=(S=t.declutter)==null?void 0:S[E])==null?void 0:I.all().map(P=>P.value):null)}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const t=this.getLayer(),r=t.getSource();if(!r)return!1;const i=e.viewHints[ql.ANIMATING],s=e.viewHints[ql.INTERACTING],a=t.getUpdateWhileAnimating(),o=t.getUpdateWhileInteracting();if(this.ready&&!a&&i||!o&&s)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const d=e.extent,g=e.viewState,b=g.projection,E=g.resolution,S=e.pixelRatio,I=t.getRevision(),P=t.getRenderBuffer();let z=t.getRenderOrder();z===void 0&&(z=_ee);const j=g.center.slice(),q=D0(d,P*E),Y=q.slice(),ie=[q.slice()],te=b.getExtent();if(r.getWrapX()&&b.canWrapX()&&!Xp(te,e.extent)){const De=Ds(te),be=Math.max(Ds(q)/2,De);q[0]=te[0]-be,q[2]=te[2]+be,I8(j,b);const at=bz(ie[0],b);at[0]<te[0]&&at[2]<te[2]?ie.push([at[0]+De,at[1],at[2]+De,at[3]]):at[0]>te[0]&&at[2]>te[2]&&ie.push([at[0]-De,at[1],at[2]-De,at[3]])}if(this.ready&&this.renderedResolution_==E&&this.renderedRevision_==I&&this.renderedRenderOrder_==z&&this.renderedFrameDeclutter_===!!e.declutter&&Xp(this.wrappedRenderedExtent_,q))return N0(this.renderedExtent_,Y)||(this.hitDetectionImageData_=null,this.renderedExtent_=Y),this.renderedCenter_=j,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const V=new tj(Hz(E,S),q,E,S);let ne;for(let De=0,be=ie.length;De<be;++De)r.loadFeatures(ie[De],E,b);const G=lB(E,S);let oe=!0;const he=(De,be)=>{let at;const Ze=De.getStyleFunction()||t.getStyleFunction();if(Ze&&(at=Ze(De,E)),at){const Je=this.renderFeature(De,G,at,V,ne,this.getLayer().getDeclutter(),be);oe=oe&&!Je}},pe=D8(q),Ee=r.getFeaturesInExtent(pe);z&&Ee.sort(z);for(let De=0,be=Ee.length;De<be;++De)he(Ee[De],De);this.renderedFeatures_=Ee,this.ready=oe;const me=V.finish(),Se=new nj(q,E,S,r.getOverlaps(),me,t.getRenderBuffer(),!!e.declutter);return this.renderedResolution_=E,this.renderedRevision_=I,this.renderedRenderOrder_=z,this.renderedFrameDeclutter_=!!e.declutter,this.renderedExtent_=Y,this.wrappedRenderedExtent_=q,this.renderedCenter_=j,this.renderedProjection_=b,this.renderedPixelRatio_=S,this.replayGroup_=Se,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,r,i,s,a,o){if(!r)return!1;let d=!1;if(Array.isArray(r))for(let g=0,b=r.length;g<b;++g)d=P2(i,e,r[g],t,this.boundHandleStyleImageChange_,s,a,o)||d;else d=P2(i,e,r,t,this.boundHandleStyleImageChange_,s,a,o);return d}}let Zg=0;const Ud=1<<Zg++,ks=1<<Zg++,hh=1<<Zg++,gp=1<<Zg++,Wg=1<<Zg++,Wv=1<<Zg++,pb=Math.pow(2,Zg)-1,G8={[Ud]:"boolean",[ks]:"number",[hh]:"string",[gp]:"color",[Wg]:"number[]",[Wv]:"size"},tte=Object.keys(G8).map(Number).sort(Fm);function nte(n){return n in G8}function Gv(n){const e=[];for(const t of tte)Qv(n,t)&&e.push(G8[t]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function Qv(n,e){return(n&e)===e}function v0(n,e){return n===e}class $A{constructor(e,t){if(!nte(e))throw new Error(`literal expressions must have a specific type, got ${Gv(e)}`);this.type=e,this.value=t}}class rte{constructor(e,t,...r){this.type=e,this.operator=t,this.args=r}}function sj(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,mapState:!1}}function zc(n,e,t){switch(typeof n){case"boolean":{if(v0(e,hh))return new $A(hh,n?"true":"false");if(!Qv(e,Ud))throw new Error(`got a boolean, but expected ${Gv(e)}`);return new $A(Ud,n)}case"number":{if(v0(e,Wv))return new $A(Wv,Ad(n));if(v0(e,Ud))return new $A(Ud,!!n);if(v0(e,hh))return new $A(hh,n.toString());if(!Qv(e,ks))throw new Error(`got a number, but expected ${Gv(e)}`);return new $A(ks,n)}case"string":{if(v0(e,gp))return new $A(gp,g8(n));if(v0(e,Ud))return new $A(Ud,!!n);if(!Qv(e,hh))throw new Error(`got a string, but expected ${Gv(e)}`);return new $A(hh,n)}}if(!Array.isArray(n))throw new Error("expression must be an array or a primitive value");if(n.length===0)throw new Error("empty expression");if(typeof n[0]=="string")return fte(n,e,t);for(const r of n)if(typeof r!="number")throw new Error("expected an array of numbers");if(v0(e,Wv)){if(n.length!==2)throw new Error(`expected an array of two values for a size, got ${n.length}`);return new $A(Wv,n)}if(v0(e,gp)){if(n.length===3)return new $A(gp,[...n,1]);if(n.length===4)return new $A(gp,n);throw new Error(`expected an array of 3 or 4 values for a color, got ${n.length}`)}if(!Qv(e,Wg))throw new Error(`got an array of numbers, but expected ${Gv(e)}`);return new $A(Wg,n)}const Gn={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},ite={[Gn.Get]:_o(es(1,1/0),Z9),[Gn.Var]:_o(es(1,1),ote),[Gn.Has]:_o(es(1,1/0),Z9),[Gn.Id]:_o(ste,x1),[Gn.Concat]:_o(es(2,1/0),da(hh)),[Gn.GeometryType]:_o(ate,x1),[Gn.LineMetric]:_o(x1),[Gn.Resolution]:_o(e5,x1),[Gn.Zoom]:_o(e5,x1),[Gn.Time]:_o(e5,x1),[Gn.Any]:_o(es(2,1/0),da(Ud)),[Gn.All]:_o(es(2,1/0),da(Ud)),[Gn.Not]:_o(es(1,1),da(Ud)),[Gn.Equal]:_o(es(2,2),da(pb)),[Gn.NotEqual]:_o(es(2,2),da(pb)),[Gn.GreaterThan]:_o(es(2,2),da(ks)),[Gn.GreaterThanOrEqualTo]:_o(es(2,2),da(ks)),[Gn.LessThan]:_o(es(2,2),da(ks)),[Gn.LessThanOrEqualTo]:_o(es(2,2),da(ks)),[Gn.Multiply]:_o(es(2,1/0),X9),[Gn.Coalesce]:_o(es(2,1/0),X9),[Gn.Divide]:_o(es(2,2),da(ks)),[Gn.Add]:_o(es(2,1/0),da(ks)),[Gn.Subtract]:_o(es(2,2),da(ks)),[Gn.Clamp]:_o(es(3,3),da(ks)),[Gn.Mod]:_o(es(2,2),da(ks)),[Gn.Pow]:_o(es(2,2),da(ks)),[Gn.Abs]:_o(es(1,1),da(ks)),[Gn.Floor]:_o(es(1,1),da(ks)),[Gn.Ceil]:_o(es(1,1),da(ks)),[Gn.Round]:_o(es(1,1),da(ks)),[Gn.Sin]:_o(es(1,1),da(ks)),[Gn.Cos]:_o(es(1,1),da(ks)),[Gn.Atan]:_o(es(1,2),da(ks)),[Gn.Sqrt]:_o(es(1,1),da(ks)),[Gn.Match]:_o(es(4,1/0),J9,ute),[Gn.Between]:_o(es(3,3),da(ks)),[Gn.Interpolate]:_o(es(6,1/0),J9,Ate),[Gn.Case]:_o(es(3,1/0),lte,cte),[Gn.In]:_o(es(2,2),dte),[Gn.Number]:_o(es(1,1/0),da(pb)),[Gn.String]:_o(es(1,1/0),da(pb)),[Gn.Array]:_o(es(1,1/0),da(ks)),[Gn.Color]:_o(es(1,4),da(ks)),[Gn.Band]:_o(es(1,3),da(ks)),[Gn.Palette]:_o(es(2,2),hte),[Gn.ToString]:_o(es(1,1),da(Ud|ks|hh|gp))};function Z9(n,e,t){const r=n.length-1,i=new Array(r);for(let s=0;s<r;++s){const a=n[s+1];switch(typeof a){case"number":{i[s]=new $A(ks,a);break}case"string":{i[s]=new $A(hh,a);break}default:throw new Error(`expected a string key or numeric array index for a get operation, got ${a}`)}s===0&&t.properties.add(String(a))}return i}function ote(n,e,t){const r=n[1];if(typeof r!="string")throw new Error("expected a string argument for var operation");return t.variables.add(r),[new $A(hh,r)]}function ste(n,e,t){t.featureId=!0}function ate(n,e,t){t.geometryType=!0}function e5(n,e,t){t.mapState=!0}function x1(n,e,t){const r=n[0];if(n.length!==1)throw new Error(`expected no arguments for ${r} operation`);return[]}function es(n,e){return function(t,r,i){const s=t[0],a=t.length-1;if(n===e){if(a!==n){const o=n===1?"":"s";throw new Error(`expected ${n} argument${o} for ${s}, got ${a}`)}}else if(a<n||a>e){const o=e===1/0?`${n} or more`:`${n} to ${e}`;throw new Error(`expected ${o} arguments for ${s}, got ${a}`)}}}function X9(n,e,t){const r=n.length-1,i=new Array(r);for(let s=0;s<r;++s){const a=zc(n[s+1],e,t);i[s]=a}return i}function da(n){return function(e,t,r){const i=e.length-1,s=new Array(i);for(let a=0;a<i;++a){const o=zc(e[a+1],n,r);s[a]=o}return s}}function lte(n,e,t){const r=n[0],i=n.length-1;if(i%2===0)throw new Error(`expected an odd number of arguments for ${r}, got ${i} instead`)}function J9(n,e,t){const r=n[0],i=n.length-1;if(i%2===1)throw new Error(`expected an even number of arguments for operation ${r}, got ${i} instead`)}function ute(n,e,t){const r=n.length-1,i=hh|ks|Ud,s=zc(n[1],i,t),a=zc(n[n.length-1],e,t),o=new Array(r-2);for(let d=0;d<r-2;d+=2){try{const g=zc(n[d+2],s.type,t);o[d]=g}catch(g){throw new Error(`failed to parse argument ${d+1} of match expression: ${g.message}`)}try{const g=zc(n[d+3],a.type,t);o[d+1]=g}catch(g){throw new Error(`failed to parse argument ${d+2} of match expression: ${g.message}`)}}return[s,...o,a]}function Ate(n,e,t){const r=n[1];let i;switch(r[0]){case"linear":i=1;break;case"exponential":const d=r[1];if(typeof d!="number"||d<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(d)} instead`);i=d;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(r)}`)}const s=new $A(ks,i);let a;try{a=zc(n[2],ks,t)}catch(d){throw new Error(`failed to parse argument 1 in interpolate expression: ${d.message}`)}const o=new Array(n.length-3);for(let d=0;d<o.length;d+=2){try{const g=zc(n[d+3],ks,t);o[d]=g}catch(g){throw new Error(`failed to parse argument ${d+2} for interpolate expression: ${g.message}`)}try{const g=zc(n[d+4],e,t);o[d+1]=g}catch(g){throw new Error(`failed to parse argument ${d+3} for interpolate expression: ${g.message}`)}}return[s,a,...o]}function cte(n,e,t){const r=zc(n[n.length-1],e,t),i=new Array(n.length-1);for(let s=0;s<i.length-1;s+=2){try{const a=zc(n[s+1],Ud,t);i[s]=a}catch(a){throw new Error(`failed to parse argument ${s} of case expression: ${a.message}`)}try{const a=zc(n[s+2],r.type,t);i[s+1]=a}catch(a){throw new Error(`failed to parse argument ${s+1} of case expression: ${a.message}`)}}return i[i.length-1]=r,i}function dte(n,e,t){let r=n[2];if(!Array.isArray(r))throw new Error('the second argument for the "in" operator must be an array');let i;if(typeof r[0]=="string"){if(r[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(r[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');r=r[1],i=hh}else i=ks;const s=new Array(r.length);for(let o=0;o<s.length;o++)try{const d=zc(r[o],i,t);s[o]=d}catch(d){throw new Error(`failed to parse haystack item ${o} for "in" expression: ${d.message}`)}return[zc(n[1],i,t),...s]}function hte(n,e,t){let r;try{r=zc(n[1],ks,t)}catch(a){throw new Error(`failed to parse first argument in palette expression: ${a.message}`)}const i=n[2];if(!Array.isArray(i))throw new Error("the second argument of palette must be an array");const s=new Array(i.length);for(let a=0;a<s.length;a++){let o;try{o=zc(i[a],gp,t)}catch(d){throw new Error(`failed to parse color at index ${a} in palette expression: ${d.message}`)}if(!(o instanceof $A))throw new Error(`the palette color at index ${a} must be a literal value`);s[a]=o}return[r,...s]}function _o(...n){return function(e,t,r){const i=e[0];let s;for(let a=0;a<n.length;a++){const o=n[a](e,t,r);if(a==n.length-1){if(!o)throw new Error("expected last argument validator to return the parsed args");s=o}}return new rte(t,i,...s)}}function fte(n,e,t){const r=n[0],i=ite[r];if(!i)throw new Error(`unknown operator: ${r}`);return i(n,e,t)}function aj(n){if(!n)return"";const e=n.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return aj(n.getGeometries()[0]);default:return""}}function lj(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function qm(n,e,t){const r=zc(n,e,t);return bp(r)}function bp(n,e){if(n instanceof $A){if(n.type===gp&&typeof n.value=="string"){const r=g8(n.value);return function(){return r}}return function(){return n.value}}const t=n.operator;switch(t){case Gn.Number:case Gn.String:case Gn.Coalesce:return pte(n);case Gn.Get:case Gn.Var:case Gn.Has:return mte(n);case Gn.Id:return r=>r.featureId;case Gn.GeometryType:return r=>r.geometryType;case Gn.Concat:{const r=n.args.map(i=>bp(i));return i=>"".concat(...r.map(s=>s(i).toString()))}case Gn.Resolution:return r=>r.resolution;case Gn.Any:case Gn.All:case Gn.Between:case Gn.In:case Gn.Not:return yte(n);case Gn.Equal:case Gn.NotEqual:case Gn.LessThan:case Gn.LessThanOrEqualTo:case Gn.GreaterThan:case Gn.GreaterThanOrEqualTo:return gte(n);case Gn.Multiply:case Gn.Divide:case Gn.Add:case Gn.Subtract:case Gn.Clamp:case Gn.Mod:case Gn.Pow:case Gn.Abs:case Gn.Floor:case Gn.Ceil:case Gn.Round:case Gn.Sin:case Gn.Cos:case Gn.Atan:case Gn.Sqrt:return vte(n);case Gn.Case:return Cte(n);case Gn.Match:return _te(n);case Gn.Interpolate:return bte(n);case Gn.ToString:return xte(n);default:throw new Error(`Unsupported operator ${t}`)}}function pte(n,e){const t=n.operator,r=n.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=bp(n.args[s]);switch(t){case Gn.Coalesce:return s=>{for(let a=0;a<r;++a){const o=i[a](s);if(typeof o<"u"&&o!==null)return o}throw new Error("Expected one of the values to be non-null")};case Gn.Number:case Gn.String:return s=>{for(let a=0;a<r;++a){const o=i[a](s);if(typeof o===t)return o}throw new Error(`Expected one of the values to be a ${t}`)};default:throw new Error(`Unsupported assertion operator ${t}`)}}function mte(n,e){const r=n.args[0].value;switch(n.operator){case Gn.Get:return i=>{const s=n.args;let a=i.properties[r];for(let o=1,d=s.length;o<d;++o){const b=s[o].value;a=a[b]}return a};case Gn.Var:return i=>i.variables[r];case Gn.Has:return i=>{const s=n.args;if(!(r in i.properties))return!1;let a=i.properties[r];for(let o=1,d=s.length;o<d;++o){const b=s[o].value;if(!a||!Object.hasOwn(a,b))return!1;a=a[b]}return!0};default:throw new Error(`Unsupported accessor operator ${n.operator}`)}}function gte(n,e){const t=n.operator,r=bp(n.args[0]),i=bp(n.args[1]);switch(t){case Gn.Equal:return s=>r(s)===i(s);case Gn.NotEqual:return s=>r(s)!==i(s);case Gn.LessThan:return s=>r(s)<i(s);case Gn.LessThanOrEqualTo:return s=>r(s)<=i(s);case Gn.GreaterThan:return s=>r(s)>i(s);case Gn.GreaterThanOrEqualTo:return s=>r(s)>=i(s);default:throw new Error(`Unsupported comparison operator ${t}`)}}function yte(n,e){const t=n.operator,r=n.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=bp(n.args[s]);switch(t){case Gn.Any:return s=>{for(let a=0;a<r;++a)if(i[a](s))return!0;return!1};case Gn.All:return s=>{for(let a=0;a<r;++a)if(!i[a](s))return!1;return!0};case Gn.Between:return s=>{const a=i[0](s),o=i[1](s),d=i[2](s);return a>=o&&a<=d};case Gn.In:return s=>{const a=i[0](s);for(let o=1;o<r;++o)if(a===i[o](s))return!0;return!1};case Gn.Not:return s=>!i[0](s);default:throw new Error(`Unsupported logical operator ${t}`)}}function vte(n,e){const t=n.operator,r=n.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=bp(n.args[s]);switch(t){case Gn.Multiply:return s=>{let a=1;for(let o=0;o<r;++o)a*=i[o](s);return a};case Gn.Divide:return s=>i[0](s)/i[1](s);case Gn.Add:return s=>{let a=0;for(let o=0;o<r;++o)a+=i[o](s);return a};case Gn.Subtract:return s=>i[0](s)-i[1](s);case Gn.Clamp:return s=>{const a=i[0](s),o=i[1](s);if(a<o)return o;const d=i[2](s);return a>d?d:a};case Gn.Mod:return s=>i[0](s)%i[1](s);case Gn.Pow:return s=>Math.pow(i[0](s),i[1](s));case Gn.Abs:return s=>Math.abs(i[0](s));case Gn.Floor:return s=>Math.floor(i[0](s));case Gn.Ceil:return s=>Math.ceil(i[0](s));case Gn.Round:return s=>Math.round(i[0](s));case Gn.Sin:return s=>Math.sin(i[0](s));case Gn.Cos:return s=>Math.cos(i[0](s));case Gn.Atan:return r===2?s=>Math.atan2(i[0](s),i[1](s)):s=>Math.atan(i[0](s));case Gn.Sqrt:return s=>Math.sqrt(i[0](s));default:throw new Error(`Unsupported numeric operator ${t}`)}}function Cte(n,e){const t=n.args.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=bp(n.args[i]);return i=>{for(let s=0;s<t-1;s+=2)if(r[s](i))return r[s+1](i);return r[t-1](i)}}function _te(n,e){const t=n.args.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=bp(n.args[i]);return i=>{const s=r[0](i);for(let a=1;a<t;a+=2)if(s===r[a](i))return r[a+1](i);return r[t-1](i)}}function bte(n,e){const t=n.args.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=bp(n.args[i]);return i=>{const s=r[0](i),a=r[1](i);let o,d;for(let g=2;g<t;g+=2){const b=r[g](i);let E=r[g+1](i);const S=Array.isArray(E);if(S&&(E=FX(E)),b>=a)return g===2?E:S?wte(s,a,o,d,b,E):qv(s,a,o,d,b,E);o=b,d=E}return d}}function xte(n,e){const t=n.operator,r=n.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=bp(n.args[s]);switch(t){case Gn.ToString:return s=>{const a=i[0](s);return n.args[0].type===gp?y8(a):a.toString()};default:throw new Error(`Unsupported convert operator ${t}`)}}function qv(n,e,t,r,i,s){const a=i-t;if(a===0)return r;const o=e-t,d=n===1?o/a:(Math.pow(n,o)-1)/(Math.pow(n,a)-1);return r+d*(s-r)}function wte(n,e,t,r,i,s){if(i-t===0)return r;const o=m9(r),d=m9(s);let g=d[2]-o[2];g>180?g-=360:g<-180&&(g+=360);const b=[qv(n,e,t,o[0],i,d[0]),qv(n,e,t,o[1],i,d[1]),o[2]+qv(n,e,t,0,i,g),qv(n,e,t,r[3],i,s[3])];return nz(LX(b))}function Mte(n){return!0}function Ste(n){const e=sj(),t=Ete(n,e),r=lj();return function(i,s){if(r.properties=i.getPropertiesInternal(),r.resolution=s,e.featureId){const a=i.getId();a!==void 0?r.featureId=a:r.featureId=null}return e.geometryType&&(r.geometryType=aj(i.getGeometry())),t(r)}}function ek(n){const e=sj(),t=n.length,r=new Array(t);for(let a=0;a<t;++a)r[a]=uB(n[a],e);const i=lj(),s=new Array(t);return function(a,o){if(i.properties=a.getPropertiesInternal(),i.resolution=o,e.featureId){const g=a.getId();g!==void 0?i.featureId=g:i.featureId=null}let d=0;for(let g=0;g<t;++g){const b=r[g](i);b&&(s[d]=b,d+=1)}return s.length=d,s}}function Ete(n,e){const t=n.length,r=new Array(t);for(let i=0;i<t;++i){const s=n[i],a="filter"in s?qm(s.filter,Ud,e):Mte;let o;if(Array.isArray(s.style)){const d=s.style.length;o=new Array(d);for(let g=0;g<d;++g)o[g]=uB(s.style[g],e)}else o=[uB(s.style,e)];r[i]={filter:a,styles:o}}return function(i){const s=[];let a=!1;for(let o=0;o<t;++o){const d=r[o].filter;if(d(i)&&!(n[o].else&&a)){a=!0;for(const g of r[o].styles){const b=g(i);b&&s.push(b)}}}return s}}function uB(n,e){const t=RC(n,"",e),r=FC(n,"",e),i=Bte(n,e),s=Ote(n,e),a=fh(n,"z-index",e);if(!t&&!r&&!i&&!s&&!z0(n))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(n));const o=new Hh;return function(d){let g=!0;if(t){const b=t(d);b&&(g=!1),o.setFill(b)}if(r){const b=r(d);b&&(g=!1),o.setStroke(b)}if(i){const b=i(d);b&&(g=!1),o.setText(b)}if(s){const b=s(d);b&&(g=!1),o.setImage(b)}return a&&o.setZIndex(a(d)),g?null:o}}function RC(n,e,t){let r;if(e+"fill-pattern-src"in n)r=Pte(n,e+"fill-",t);else{if(n[e+"fill-color"]==="none")return s=>null;r=Q8(n,e+"fill-color",t)}if(!r)return null;const i=new Dm;return function(s){const a=r(s);return a===m8?null:(i.setColor(a),i)}}function FC(n,e,t){const r=fh(n,e+"stroke-width",t),i=Q8(n,e+"stroke-color",t);if(!r&&!i)return null;const s=Tm(n,e+"stroke-line-cap",t),a=Tm(n,e+"stroke-line-join",t),o=uj(n,e+"stroke-line-dash",t),d=fh(n,e+"stroke-line-dash-offset",t),g=fh(n,e+"stroke-miter-limit",t),b=new O0;return function(E){if(i){const S=i(E);if(S===m8)return null;b.setColor(S)}if(r&&b.setWidth(r(E)),s){const S=s(E);if(S!=="butt"&&S!=="round"&&S!=="square")throw new Error("Expected butt, round, or square line cap");b.setLineCap(S)}if(a){const S=a(E);if(S!=="bevel"&&S!=="round"&&S!=="miter")throw new Error("Expected bevel, round, or miter line join");b.setLineJoin(S)}return o&&b.setLineDash(o(E)),d&&b.setLineDashOffset(d(E)),g&&b.setMiterLimit(g(E)),b}}function Bte(n,e){const t="text-",r=Tm(n,t+"value",e);if(!r)return null;const i=RC(n,t,e),s=RC(n,t+"background-",e),a=FC(n,t,e),o=FC(n,t+"background-",e),d=Tm(n,t+"font",e),g=fh(n,t+"max-angle",e),b=fh(n,t+"offset-x",e),E=fh(n,t+"offset-y",e),S=vy(n,t+"overflow",e),I=Tm(n,t+"placement",e),P=fh(n,t+"repeat",e),z=Vx(n,t+"scale",e),j=vy(n,t+"rotate-with-view",e),q=fh(n,t+"rotation",e),Y=Tm(n,t+"align",e),ie=Tm(n,t+"justify",e),te=Tm(n,t+"baseline",e),V=vy(n,t+"keep-upright",e),ne=uj(n,t+"padding",e),G=Hx(n,t+"declutter-mode"),oe=new $x({declutterMode:G});return function(he){if(oe.setText(r(he)),i&&oe.setFill(i(he)),s&&oe.setBackgroundFill(s(he)),a&&oe.setStroke(a(he)),o&&oe.setBackgroundStroke(o(he)),d&&oe.setFont(d(he)),g&&oe.setMaxAngle(g(he)),b&&oe.setOffsetX(b(he)),E&&oe.setOffsetY(E(he)),S&&oe.setOverflow(S(he)),I){const pe=I(he);if(pe!=="point"&&pe!=="line")throw new Error("Expected point or line for text-placement");oe.setPlacement(pe)}if(P&&oe.setRepeat(P(he)),z&&oe.setScale(z(he)),j&&oe.setRotateWithView(j(he)),q&&oe.setRotation(q(he)),Y){const pe=Y(he);if(pe!=="left"&&pe!=="center"&&pe!=="right"&&pe!=="end"&&pe!=="start")throw new Error("Expected left, right, center, start, or end for text-align");oe.setTextAlign(pe)}if(ie){const pe=ie(he);if(pe!=="left"&&pe!=="right"&&pe!=="center")throw new Error("Expected left, right, or center for text-justify");oe.setJustify(pe)}if(te){const pe=te(he);if(pe!=="bottom"&&pe!=="top"&&pe!=="middle"&&pe!=="alphabetic"&&pe!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");oe.setTextBaseline(pe)}return ne&&oe.setPadding(ne(he)),V&&oe.setKeepUpright(V(he)),oe}}function Ote(n,e){return"icon-src"in n?Ite(n,e):"shape-points"in n?kte(n,e):"circle-radius"in n?Tte(n,e):null}function Ite(n,e){const t="icon-",r=t+"src",i=Aj(n[r],r),s=R2(n,t+"anchor",e),a=Vx(n,t+"scale",e),o=fh(n,t+"opacity",e),d=R2(n,t+"displacement",e),g=fh(n,t+"rotation",e),b=vy(n,t+"rotate-with-view",e),E=nk(n,t+"anchor-origin"),S=rk(n,t+"anchor-x-units"),I=rk(n,t+"anchor-y-units"),P=Fte(n,t+"color"),z=Dte(n,t+"cross-origin"),j=Rte(n,t+"offset"),q=nk(n,t+"offset-origin"),Y=F2(n,t+"width"),ie=F2(n,t+"height"),te=Kte(n,t+"size"),V=Hx(n,t+"declutter-mode"),ne=new M2({src:i,anchorOrigin:E,anchorXUnits:S,anchorYUnits:I,color:P,crossOrigin:z,offset:j,offsetOrigin:q,height:ie,width:Y,size:te,declutterMode:V});return function(G){return o&&ne.setOpacity(o(G)),d&&ne.setDisplacement(d(G)),g&&ne.setRotation(g(G)),b&&ne.setRotateWithView(b(G)),a&&ne.setScale(a(G)),s&&ne.setAnchor(s(G)),ne}}function kte(n,e){const t="shape-",r=t+"points",i=t+"radius",s=AB(n[r],r),a=AB(n[i],i),o=RC(n,t,e),d=FC(n,t,e),g=Vx(n,t+"scale",e),b=R2(n,t+"displacement",e),E=fh(n,t+"rotation",e),S=vy(n,t+"rotate-with-view",e),I=F2(n,t+"radius2"),P=F2(n,t+"angle"),z=Hx(n,t+"declutter-mode"),j=new Rx({points:s,radius:a,radius2:I,angle:P,declutterMode:z});return function(q){return o&&j.setFill(o(q)),d&&j.setStroke(d(q)),b&&j.setDisplacement(b(q)),E&&j.setRotation(E(q)),S&&j.setRotateWithView(S(q)),g&&j.setScale(g(q)),j}}function Tte(n,e){const t="circle-",r=RC(n,t,e),i=FC(n,t,e),s=fh(n,t+"radius",e),a=Vx(n,t+"scale",e),o=R2(n,t+"displacement",e),d=fh(n,t+"rotation",e),g=vy(n,t+"rotate-with-view",e),b=Hx(n,t+"declutter-mode"),E=new s_({radius:5,declutterMode:b});return function(S){return s&&E.setRadius(s(S)),r&&E.setFill(r(S)),i&&E.setStroke(i(S)),o&&E.setDisplacement(o(S)),d&&E.setRotation(d(S)),g&&E.setRotateWithView(g(S)),a&&E.setScale(a(S)),E}}function fh(n,e,t){if(!(e in n))return;const r=qm(n[e],ks,t);return function(i){return AB(r(i),e)}}function Tm(n,e,t){if(!(e in n))return null;const r=qm(n[e],hh,t);return function(i){return Aj(r(i),e)}}function Pte(n,e,t){const r=Tm(n,e+"pattern-src",t),i=tk(n,e+"pattern-offset",t),s=tk(n,e+"pattern-size",t),a=Q8(n,e+"color",t);return function(o){return{src:r(o),offset:i&&i(o),size:s&&s(o),color:a&&a(o)}}}function vy(n,e,t){if(!(e in n))return null;const r=qm(n[e],Ud,t);return function(i){const s=r(i);if(typeof s!="boolean")throw new Error(`Expected a boolean for ${e}`);return s}}function Q8(n,e,t){if(!(e in n))return null;const r=qm(n[e],gp,t);return function(i){return cj(r(i),e)}}function uj(n,e,t){if(!(e in n))return null;const r=qm(n[e],Wg,t);return function(i){return d_(r(i),e)}}function R2(n,e,t){if(!(e in n))return null;const r=qm(n[e],Wg,t);return function(i){const s=d_(r(i),e);if(s.length!==2)throw new Error(`Expected two numbers for ${e}`);return s}}function tk(n,e,t){if(!(e in n))return null;const r=qm(n[e],Wg,t);return function(i){return dj(r(i),e)}}function Vx(n,e,t){if(!(e in n))return null;const r=qm(n[e],Wg|ks,t);return function(i){return Lte(r(i),e)}}function F2(n,e){const t=n[e];if(t!==void 0){if(typeof t!="number")throw new Error(`Expected a number for ${e}`);return t}}function Kte(n,e){const t=n[e];if(t!==void 0){if(typeof t=="number")return Ad(t);if(!Array.isArray(t))throw new Error(`Expected a number or size array for ${e}`);if(t.length!==2||typeof t[0]!="number"||typeof t[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return t}}function Dte(n,e){const t=n[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);return t}}function nk(n,e){const t=n[e];if(t!==void 0){if(t!=="bottom-left"&&t!=="bottom-right"&&t!=="top-left"&&t!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return t}}function rk(n,e){const t=n[e];if(t!==void 0){if(t!=="pixels"&&t!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return t}}function Rte(n,e){const t=n[e];if(t!==void 0)return d_(t,e)}function Hx(n,e){const t=n[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);if(t!=="declutter"&&t!=="obstacle"&&t!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return t}}function Fte(n,e){const t=n[e];if(t!==void 0)return cj(t,e)}function d_(n,e){if(!Array.isArray(n))throw new Error(`Expected an array for ${e}`);const t=n.length;for(let r=0;r<t;++r)if(typeof n[r]!="number")throw new Error(`Expected an array of numbers for ${e}`);return n}function Aj(n,e){if(typeof n!="string")throw new Error(`Expected a string for ${e}`);return n}function AB(n,e){if(typeof n!="number")throw new Error(`Expected a number for ${e}`);return n}function cj(n,e){if(typeof n=="string")return n;const t=d_(n,e),r=t.length;if(r<3||r>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return t}function dj(n,e){const t=d_(n,e);if(t.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return t}function Lte(n,e){return typeof n=="number"?n:dj(n,e)}const cp={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function ik(n,e,t){return function(r,i,s,a,o){if(!r)return;if(!i&&!e)return r;const d=e?0:s[0]*i,g=e?0:s[1]*i,b=o?o[0]:0,E=o?o[1]:0;let S=n[0]+d/2+b,I=n[2]-d/2+b,P=n[1]+g/2+E,z=n[3]-g/2+E;S>I&&(S=(I+S)/2,I=S),P>z&&(P=(z+P)/2,z=P);let j=MA(r[0],S,I),q=MA(r[1],P,z);if(a&&t&&i){const Y=30*i;j+=-Y*Math.log(1+Math.max(0,S-r[0])/Y)+Y*Math.log(1+Math.max(0,r[0]-I)/Y),q+=-Y*Math.log(1+Math.max(0,P-r[1])/Y)+Y*Math.log(1+Math.max(0,r[1]-z)/Y)}return[j,q]}}function Ute(n){return n}function hj(n){return Math.pow(n,3)}function Zy(n){return 1-hj(1-n)}function zte(n){return 3*n*n-2*n*n*n}function jte(n){return n}function q8(n,e,t,r){const i=Ds(e)/t[0],s=sA(e)/t[1];return r?Math.min(n,Math.max(i,s)):Math.min(n,Math.min(i,s))}function Y8(n,e,t){let r=Math.min(n,e);const i=50;return r*=Math.log(1+i*Math.max(0,n/e-1))/i+1,t&&(r=Math.max(r,t),r/=Math.log(1+i*Math.max(0,t/n-1))/i+1),MA(r,t/2,e*2)}function Nte(n,e,t,r){return e=e!==void 0?e:!0,function(i,s,a,o){if(i!==void 0){const d=n[0],g=n[n.length-1],b=t?q8(d,t,a,r):d;if(o)return e?Y8(i,b,g):MA(i,g,b);const E=Math.min(b,i),S=Math.floor(Tx(n,E,s));return n[S]>b&&S<n.length-1?n[S+1]:n[S]}}}function Wte(n,e,t,r,i,s){return r=r!==void 0?r:!0,t=t!==void 0?t:0,function(a,o,d,g){if(a!==void 0){const b=i?q8(e,i,d,s):e;if(g)return r?Y8(a,b,t):MA(a,t,b);const E=1e-9,S=Math.ceil(Math.log(e/b)/Math.log(n)-E),I=-o*(.5-E)+.5,P=Math.min(b,a),z=Math.floor(Math.log(e/P)/Math.log(n)+I),j=Math.max(S,z),q=e/Math.pow(n,j);return MA(q,t,b)}}}function ok(n,e,t,r,i){return t=t!==void 0?t:!0,function(s,a,o,d){if(s!==void 0){const g=r?q8(n,r,o,i):n;return!t||!d?MA(s,e,g):Y8(s,g,e)}}}function $8(n){if(n!==void 0)return 0}function sk(n){if(n!==void 0)return n}function Gte(n){const e=2*Math.PI/n;return function(t,r){if(r)return t;if(t!==void 0)return t=Math.floor(t/e+.5)*e,t}}function Qte(n){const e=K0(5);return function(t,r){return r||t===void 0?t:Math.abs(t)<=e?0:t}}const fj=42,V8=256,t5=0;class yp extends Mp{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=K8(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&Rz(),e.center&&(e.center=Im(e.center,this.projection_)),e.extent&&(e.extent=Jp(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const t=Object.assign({},e);for(const o in cp)delete t[o];this.setProperties(t,!0);const r=Yte(e);this.maxResolution_=r.maxResolution,this.minResolution_=r.minResolution,this.zoomFactor_=r.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=r.minZoom;const i=qte(e),s=r.constraint,a=$te(e);this.constraints_={center:i,resolution:s,rotation:a},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;const r=this.getCenterInternal();if(r){const i=e||[0,0,0,0];t=t||[0,0,0,0];const s=this.getResolution(),a=s/2*(i[3]-t[3]+t[1]-i[1]),o=s/2*(i[0]-t[0]+t[2]-i[2]);this.setCenterInternal([r[0]+a,r[1]-o])}}getUpdatedOptions_(e){const t=this.getProperties();return t.resolution!==void 0?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const t=new Array(arguments.length);for(let r=0;r<t.length;++r){let i=arguments[r];i.center&&(i=Object.assign({},i),i.center=Im(i.center,this.getProjection())),i.anchor&&(i=Object.assign({},i),i.anchor=Im(i.anchor,this.getProjection())),t[r]=i}this.animateInternal.apply(this,t)}animateInternal(e){let t=arguments.length,r;t>1&&typeof arguments[t-1]=="function"&&(r=arguments[t-1],--t);let i=0;for(;i<t&&!this.isDef();++i){const b=arguments[i];b.center&&this.setCenterInternal(b.center),b.zoom!==void 0?this.setZoom(b.zoom):b.resolution&&this.setResolution(b.resolution),b.rotation!==void 0&&this.setRotation(b.rotation)}if(i===t){r&&mb(r,!0);return}let s=Date.now(),a=this.targetCenter_.slice(),o=this.targetResolution_,d=this.targetRotation_;const g=[];for(;i<t;++i){const b=arguments[i],E={start:s,complete:!1,anchor:b.anchor,duration:b.duration!==void 0?b.duration:1e3,easing:b.easing||zte,callback:r};if(b.center&&(E.sourceCenter=a,E.targetCenter=b.center.slice(),a=E.targetCenter),b.zoom!==void 0?(E.sourceResolution=o,E.targetResolution=this.getResolutionForZoom(b.zoom),o=E.targetResolution):b.resolution&&(E.sourceResolution=o,E.targetResolution=b.resolution,o=E.targetResolution),b.rotation!==void 0){E.sourceRotation=d;const S=Kg(b.rotation-d+Math.PI,2*Math.PI)-Math.PI;E.targetRotation=d+S,d=E.targetRotation}Vte(E)?E.complete=!0:s+=E.duration,g.push(E)}this.animations_.push(g),this.setHint(ql.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[ql.ANIMATING]>0}getInteracting(){return this.hints_[ql.INTERACTING]>0}cancelAnimations(){this.setHint(ql.ANIMATING,-this.hints_[ql.ANIMATING]);let e;for(let t=0,r=this.animations_.length;t<r;++t){const i=this.animations_[t];if(i[0].callback&&mb(i[0].callback,!1),!e)for(let s=0,a=i.length;s<a;++s){const o=i[s];if(!o.complete){e=o.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let t=!1;for(let r=this.animations_.length-1;r>=0;--r){const i=this.animations_[r];let s=!0;for(let a=0,o=i.length;a<o;++a){const d=i[a];if(d.complete)continue;const g=e-d.start;let b=d.duration>0?g/d.duration:1;b>=1?(d.complete=!0,b=1):s=!1;const E=d.easing(b);if(d.sourceCenter){const S=d.sourceCenter[0],I=d.sourceCenter[1],P=d.targetCenter[0],z=d.targetCenter[1];this.nextCenter_=d.targetCenter;const j=S+E*(P-S),q=I+E*(z-I);this.targetCenter_=[j,q]}if(d.sourceResolution&&d.targetResolution){const S=E===1?d.targetResolution:d.sourceResolution+E*(d.targetResolution-d.sourceResolution);if(d.anchor){const I=this.getViewportSize_(this.getRotation()),P=this.constraints_.resolution(S,0,I,!0);this.targetCenter_=this.calculateCenterZoom(P,d.anchor)}this.nextResolution_=d.targetResolution,this.targetResolution_=S,this.applyTargetState_(!0)}if(d.sourceRotation!==void 0&&d.targetRotation!==void 0){const S=E===1?Kg(d.targetRotation+Math.PI,2*Math.PI)-Math.PI:d.sourceRotation+E*(d.targetRotation-d.sourceRotation);if(d.anchor){const I=this.constraints_.rotation(S,!0);this.targetCenter_=this.calculateCenterRotate(I,d.anchor)}this.nextRotation_=d.targetRotation,this.targetRotation_=S}if(this.applyTargetState_(!0),t=!0,!d.complete)break}if(s){this.animations_[r]=null,this.setHint(ql.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const a=i[0].callback;a&&mb(a,!0)}}this.animations_=this.animations_.filter(Boolean),t&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let r;const i=this.getCenterInternal();return i!==void 0&&(r=[i[0]-t[0],i[1]-t[1]],O8(r,e-this.getRotation()),MJ(r,t)),r}calculateCenterZoom(e,t){let r;const i=this.getCenterInternal(),s=this.getResolution();if(i!==void 0&&s!==void 0){const a=t[0]-e*(t[0]-i[0])/s,o=t[1]-e*(t[1]-i[1])/s;r=[a,o]}return r}getViewportSize_(e){const t=this.viewportSize_;if(e){const r=t[0],i=t[1];return[Math.abs(r*Math.cos(e))+Math.abs(i*Math.sin(e)),Math.abs(r*Math.sin(e))+Math.abs(i*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&sB(e,this.getProjection())}getCenterInternal(){return this.get(cp.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const t=this.calculateExtentInternal(e);return D8(t,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const t=this.getCenterInternal();Xs(t,"The view center is not defined");const r=this.getResolution();Xs(r!==void 0,"The view resolution is not defined");const i=this.getRotation();return Xs(i!==void 0,"The view rotation is not defined"),S2(t,r,i,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(cp.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal(Jp(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t=t||this.getViewportSizeMinusPadding_();const r=Ds(e)/t[0],i=sA(e)/t[1];return Math.max(r,i)}getResolutionForValueFunction(e){e=e||2;const t=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,i=Math.log(t/r)/Math.log(e);return function(s){return t/Math.pow(e,s*i)}}getRotation(){return this.get(cp.ROTATION)}getValueForResolutionFunction(e){const t=Math.log(e||2),r=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,s=Math.log(r/i)/t;return function(a){return Math.log(r/a)/t/s}}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e);const r=this.padding_;return r&&(t=[t[0]-r[1]-r[3],t[1]-r[0]-r[2]]),t}getState(){const e=this.getProjection(),t=this.getResolution(),r=this.getRotation();let i=this.getCenterInternal();const s=this.padding_;if(s){const a=this.getViewportSizeMinusPadding_();i=n5(i,this.getViewportSize_(),[a[0]/2+s[3],a[1]/2+s[0]],t,r)}return{center:i.slice(0),projection:e!==void 0?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:r,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const t=this.getResolution();return t!==void 0&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let t=this.minZoom_||0,r,i;if(this.resolutions_){const s=Tx(this.resolutions_,e,1);t=s,r=this.resolutions_[s],s==this.resolutions_.length-1?i=2:i=r/this.resolutions_[s+1]}else r=this.maxResolution_,i=this.zoomFactor_;return t+Math.log(r/e)/Math.log(i)}getResolutionForZoom(e){var t;if((t=this.resolutions_)!=null&&t.length){if(this.resolutions_.length===1)return this.resolutions_[0];const r=MA(Math.floor(e),0,this.resolutions_.length-2),i=this.resolutions_[r]/this.resolutions_[r+1];return this.resolutions_[r]/Math.pow(i,MA(e-r,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){let r;if(Xs(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){Xs(!$g(e),"Cannot fit empty extent provided as `geometry`");const i=Jp(e,this.getProjection());r=L9(i)}else if(e.getType()==="Circle"){const i=Jp(e.getExtent(),this.getProjection());r=L9(i),r.rotate(this.getRotation(),Gf(i))}else r=e;this.fitInternal(r,t)}rotatedExtentForGeometry(e){const t=this.getRotation(),r=Math.cos(t),i=Math.sin(-t),s=e.getFlatCoordinates(),a=e.getStride();let o=1/0,d=1/0,g=-1/0,b=-1/0;for(let E=0,S=s.length;E<S;E+=a){const I=s[E]*r-s[E+1]*i,P=s[E]*i+s[E+1]*r;o=Math.min(o,I),d=Math.min(d,P),g=Math.max(g,I),b=Math.max(b,P)}return[o,d,g,b]}fitInternal(e,t){t=t||{};let r=t.size;r||(r=this.getViewportSizeMinusPadding_());const i=t.padding!==void 0?t.padding:[0,0,0,0],s=t.nearest!==void 0?t.nearest:!1;let a;t.minResolution!==void 0?a=t.minResolution:t.maxZoom!==void 0?a=this.getResolutionForZoom(t.maxZoom):a=0;const o=this.rotatedExtentForGeometry(e);let d=this.getResolutionForExtentInternal(o,[r[0]-i[1]-i[3],r[1]-i[0]-i[2]]);d=isNaN(d)?a:Math.max(d,a),d=this.getConstrainedResolution(d,s?0:1);const g=this.getRotation(),b=Math.sin(g),E=Math.cos(g),S=Gf(o);S[0]+=(i[1]-i[3])/2*d,S[1]+=(i[0]-i[2])/2*d;const I=S[0]*E-S[1]*b,P=S[1]*E+S[0]*b,z=this.getConstrainedCenter([I,P],d),j=t.callback?t.callback:Ky;t.duration!==void 0?this.animateInternal({resolution:d,center:z,duration:t.duration,easing:t.easing},j):(this.targetResolution_=d,this.targetCenter_=z,this.applyTargetState_(!1,!0),mb(j,!0))}centerOn(e,t,r){this.centerOnInternal(Im(e,this.getProjection()),t,r)}centerOnInternal(e,t,r){this.setCenterInternal(n5(e,t,r,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,r,i){let s;const a=this.padding_;if(a&&e){const o=this.getViewportSizeMinusPadding_(-r),d=n5(e,i,[o[0]/2+a[3],o[1]/2+a[0]],t,r);s=[e[0]-d[0],e[1]-d[1]]}return s}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const t=sB(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){const t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t=t&&Im(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){const r=this.getAnimating()||this.getInteracting(),i=this.getViewportSize_(this.getRotation()),s=this.constraints_.resolution(this.targetResolution_*e,0,i,r);t&&(this.targetCenter_=this.calculateCenterZoom(s,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=Im(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){const r=this.getAnimating()||this.getInteracting(),i=this.constraints_.rotation(this.targetRotation_+e,r);t&&(this.targetCenter_=this.calculateCenterRotate(i,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&Im(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){const r=this.getAnimating()||this.getInteracting()||t,i=this.constraints_.rotation(this.targetRotation_,r),s=this.getViewportSize_(i),a=this.constraints_.resolution(this.targetResolution_,0,s,r),o=this.constraints_.center(this.targetCenter_,a,s,r,this.calculateCenterShift(this.targetCenter_,a,i,s));this.get(cp.ROTATION)!==i&&this.set(cp.ROTATION,i),this.get(cp.RESOLUTION)!==a&&(this.set(cp.RESOLUTION,a),this.set("zoom",this.getZoom(),!0)),(!o||!this.get(cp.CENTER)||!O2(this.get(cp.CENTER),o))&&this.set(cp.CENTER,o),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,r){e=e!==void 0?e:200;const i=t||0,s=this.constraints_.rotation(this.targetRotation_),a=this.getViewportSize_(s),o=this.constraints_.resolution(this.targetResolution_,i,a),d=this.constraints_.center(this.targetCenter_,o,a,!1,this.calculateCenterShift(this.targetCenter_,o,s,a));if(e===0&&!this.cancelAnchor_){this.targetResolution_=o,this.targetRotation_=s,this.targetCenter_=d,this.applyTargetState_();return}r=r||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==o||this.getRotation()!==s||!this.getCenterInternal()||!O2(this.getCenterInternal(),d))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:s,center:d,resolution:o,duration:e,easing:Zy,anchor:r}))}beginInteraction(){this.resolveConstraints(0),this.setHint(ql.INTERACTING,1)}endInteraction(e,t,r){r=r&&Im(r,this.getProjection()),this.endInteractionInternal(e,t,r)}endInteractionInternal(e,t,r){this.getInteracting()&&(this.setHint(ql.INTERACTING,-1),this.resolveConstraints(e,t,r))}getConstrainedCenter(e,t){const r=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),r)}getConstrainedZoom(e,t){const r=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(r,t))}getConstrainedResolution(e,t){t=t||0;const r=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,r)}}function mb(n,e){setTimeout(function(){n(e)},0)}function qte(n){if(n.extent!==void 0){const t=n.smoothExtentConstraint!==void 0?n.smoothExtentConstraint:!0;return ik(n.extent,n.constrainOnlyCenter,t)}const e=K8(n.projection,"EPSG:3857");if(n.multiWorld!==!0&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,ik(t,!1,!1)}return Ute}function Yte(n){let e,t,r,a=n.minZoom!==void 0?n.minZoom:t5,o=n.maxZoom!==void 0?n.maxZoom:28;const d=n.zoomFactor!==void 0?n.zoomFactor:2,g=n.multiWorld!==void 0?n.multiWorld:!1,b=n.smoothResolutionConstraint!==void 0?n.smoothResolutionConstraint:!0,E=n.showFullExtent!==void 0?n.showFullExtent:!1,S=K8(n.projection,"EPSG:3857"),I=S.getExtent();let P=n.constrainOnlyCenter,z=n.extent;if(!g&&!z&&S.isGlobal()&&(P=!1,z=I),n.resolutions!==void 0){const j=n.resolutions;t=j[a],r=j[o]!==void 0?j[o]:j[j.length-1],n.constrainResolution?e=Nte(j,b,!P&&z,E):e=ok(t,r,b,!P&&z,E)}else{const q=(I?Math.max(Ds(I),sA(I)):360*j0.degrees/S.getMetersPerUnit())/V8/Math.pow(2,t5),Y=q/Math.pow(2,28-t5);t=n.maxResolution,t!==void 0?a=0:t=q/Math.pow(d,a),r=n.minResolution,r===void 0&&(n.maxZoom!==void 0?n.maxResolution!==void 0?r=t/Math.pow(d,o):r=q/Math.pow(d,o):r=Y),o=a+Math.floor(Math.log(t/r)/Math.log(d)),r=t/Math.pow(d,o-a),n.constrainResolution?e=Wte(d,t,r,b,!P&&z,E):e=ok(t,r,b,!P&&z,E)}return{constraint:e,maxResolution:t,minResolution:r,minZoom:a,zoomFactor:d}}function $te(n){if(n.enableRotation!==void 0?n.enableRotation:!0){const t=n.constrainRotation;return t===void 0||t===!0?Qte():t===!1?sk:typeof t=="number"?Gte(t):sk}return $8}function Vte(n){return!(n.sourceCenter&&n.targetCenter&&!O2(n.sourceCenter,n.targetCenter)||n.sourceResolution!==n.targetResolution||n.sourceRotation!==n.targetRotation)}function n5(n,e,t,r,i){const s=Math.cos(-i);let a=Math.sin(-i),o=n[0]*s-n[1]*a,d=n[1]*s+n[0]*a;o+=(e[0]/2-t[0])*r,d+=(t[1]-e[1]/2)*r,a=-a;const g=o*s-d*a,b=d*s+o*a;return[g,b]}const La={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class pj extends Mp{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const t=Object.assign({},e);typeof e.properties=="object"&&(delete t.properties,Object.assign(t,e.properties)),t[La.OPACITY]=e.opacity!==void 0?e.opacity:1,Xs(typeof t[La.OPACITY]=="number","Layer opacity must be a number"),t[La.VISIBLE]=e.visible!==void 0?e.visible:!0,t[La.Z_INDEX]=e.zIndex,t[La.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,t[La.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,t[La.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,t[La.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=t.className!==void 0?t.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const t=this.state_||{layer:this,managed:e===void 0?!0:e},r=this.getZIndex();return t.opacity=MA(Math.round(this.getOpacity()*100)/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=r===void 0&&!t.managed?1/0:r,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return xo()}getLayerStatesArray(e){return xo()}getExtent(){return this.get(La.EXTENT)}getMaxResolution(){return this.get(La.MAX_RESOLUTION)}getMinResolution(){return this.get(La.MIN_RESOLUTION)}getMinZoom(){return this.get(La.MIN_ZOOM)}getMaxZoom(){return this.get(La.MAX_ZOOM)}getOpacity(){return this.get(La.OPACITY)}getSourceState(){return xo()}getVisible(){return this.get(La.VISIBLE)}getZIndex(){return this.get(La.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(La.EXTENT,e)}setMaxResolution(e){this.set(La.MAX_RESOLUTION,e)}setMinResolution(e){this.set(La.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(La.MAX_ZOOM,e)}setMinZoom(e){this.set(La.MIN_ZOOM,e)}setOpacity(e){Xs(typeof e=="number","Layer opacity must be a number"),this.set(La.OPACITY,e)}setVisible(e){this.set(La.VISIBLE,e)}setZIndex(e){this.set(La.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}class Xy extends pj{constructor(e){const t=Object.assign({},e);delete t.source,super(t),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(La.SOURCE,this.handleSourcePropertyChange_);const r=e.source?e.source:null;this.setSource(r)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(La.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(ul(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=Ks(e,lo.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0)),this.clearRenderer()),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let t;const r=this.getMapInternal();!e&&r&&(e=r.getView()),e instanceof yp?t={viewState:e.getState(),extent:e.calculateExtent()}:t=e,!t.layerStatesArray&&r&&(t.layerStatesArray=r.getLayerGroup().getLayerStatesArray());let i;if(t.layerStatesArray){if(i=t.layerStatesArray.find(a=>a.layer===this),!i)return!1}else i=this.getLayerState();const s=this.getExtent();return H8(i,t.viewState)&&(!s||Du(s,t.extent))}getAttributions(e){var s;if(!this.isVisible(e))return[];const t=(s=this.getSource())==null?void 0:s.getAttributions();if(!t)return[];const r=e instanceof yp?e.getViewStateAndExtent():e;let i=t(r);return Array.isArray(i)||(i=[i]),i}render(e,t){const r=this.getRenderer();return r.prepareFrame(e)?(this.rendered=!0,r.renderFrame(e,t)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,t){}renderDeferred(e){const t=this.getRenderer();t&&t.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set(La.MAP,e)}getMapInternal(){return this.get(La.MAP)}setMap(e){this.mapPrecomposeKey_&&(ul(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(ul(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=Ks(e,zf.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=Ks(this,lo.CHANGE,e.render,e),this.changed())}handlePrecompose_(e){const t=e.frameState.layerStatesArray,r=this.getLayerState(!1);Xs(!t.some(i=>i.layer===r.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),t.push(r)}setSource(e){this.set(La.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}}function H8(n,e){if(!n.visible)return!1;const t=e.resolution;if(t<n.minResolution||t>=n.maxResolution)return!1;const r=e.zoom;return r>n.minZoom&&r<=n.maxZoom}const ak={RENDER_ORDER:"renderOrder"};class Z8 extends Xy{constructor(e){e=e||{};const t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,super(t),this.declutter_=e.declutter?String(e.declutter):void 0,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(ak.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e,t){const r=this.getDeclutter();r in e.declutter||(e.declutter[r]=new ej(9)),this.getRenderer().renderDeclutter(e,t)}setRenderOrder(e){this.set(ak.RENDER_ORDER,e)}setStyle(e){this.style_=e===void 0?Yz:e;const t=Hte(e);this.styleFunction_=e===null?void 0:gee(t),this.changed()}setDeclutter(e){this.declutter_=e?String(e):void 0,this.changed()}}function Hte(n){if(n===void 0)return Yz;if(!n)return null;if(typeof n=="function"||n instanceof Hh)return n;if(!Array.isArray(n))return ek([n]);if(n.length===0)return[];const e=n.length,t=n[0];if(t instanceof Hh){const i=new Array(e);for(let s=0;s<e;++s){const a=n[s];if(!(a instanceof Hh))throw new Error("Expected a list of style instances");i[s]=a}return i}if("style"in t){const i=new Array(e);for(let s=0;s<e;++s){const a=n[s];if(!("style"in a))throw new Error("Expected a list of rules with a style property");i[s]=a}return Ste(i)}return ek(n)}class X8 extends Z8{constructor(e){super(e)}createRenderer(){return new ete(this)}}class Zte extends v8{constructor(e,t,r,i,s){const a=s!==void 0?di.IDLE:di.LOADED;super(e,t,r,a),this.loader_=s!==void 0?s:null,this.canvas_=i,this.error_=null}getError(){return this.error_}handleLoad_(e){e?(this.error_=e,this.state=di.ERROR):this.state=di.LOADED,this.changed()}load(){this.state==di.IDLE&&(this.state=di.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))}getImage(){return this.canvas_}}class h_ extends i_{constructor(e,t,r){super(),r=r||{},this.tileCoord=e,this.state=t,this.key="",this.transition_=r.transition===void 0?250:r.transition,this.transitionStarts_={},this.interpolate=!!r.interpolate}changed(){this.dispatchEvent(lo.CHANGE)}release(){this.setState(Nr.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==Nr.EMPTY){if(this.state!==Nr.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}}load(){xo()}getAlpha(e,t){if(!this.transition_)return 1;let r=this.transitionStarts_[e];if(!r)r=t,this.transitionStarts_[e]=r;else if(r===-1)return 1;const i=t-r+1e3/60;return i>=this.transition_?1:hj(i/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}disposeInternal(){this.release(),super.disposeInternal()}}class mj extends h_{constructor(e,t,r,i,s,a){super(e,t,a),this.crossOrigin_=i,this.src_=r,this.key=r,this.image_=new Image,i!==null&&(this.image_.crossOrigin=i),this.unlisten_=null,this.tileLoadFunction_=s}getImage(){return this.image_}setImage(e){this.image_=e,this.state=Nr.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=Nr.ERROR,this.unlistenImage_(),this.image_=Xte(),this.changed()}handleImageLoad_(){const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=Nr.LOADED:this.state=Nr.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==Nr.ERROR&&(this.state=Nr.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==Nr.IDLE&&(this.state=Nr.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=HX(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}}function Xte(){const n=Ru(1,1);return n.fillStyle="rgba(0,0,0,0)",n.fillRect(0,0,1,1),n.canvas}class Jte{constructor(e,t,r){this.decay_=e,this.minVelocity_=t,this.delay_=r,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,t){this.points_.push(e,t,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;let r=t-3;for(;r>0&&this.points_[r+2]>e;)r-=3;const i=this.points_[t+2]-this.points_[r+2];if(i<1e3/60)return!1;const s=this.points_[t]-this.points_[r],a=this.points_[t+1]-this.points_[r+1];return this.angle_=Math.atan2(a,s),this.initialVelocity_=Math.sqrt(s*s+a*a)/i,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}class ty extends wp{constructor(e,t,r){super(e),this.map=t,this.frameState=r!==void 0?r:null}}class b0 extends ty{constructor(e,t,r,i,s,a){super(e,t,s),this.originalEvent=r,this.pixel_=null,this.coordinate_=null,this.dragging=i!==void 0?i:!1,this.activePointers=a}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const Pu={SINGLECLICK:"singleclick",CLICK:lo.CLICK,DBLCLICK:lo.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},cB={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};class ene extends i_{constructor(e,t){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=t===void 0?1:t,this.down_=null;const r=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=r,this.pointerdownListenerKey_=Ks(r,cB.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=Ks(r,cB.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(lo.TOUCHMOVE,this.boundHandleTouchMove_,az?{passive:!1}:!1)}emulateClick_(e){let t=new b0(Pu.CLICK,this.map_,e);this.dispatchEvent(t),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new b0(Pu.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const r=new b0(Pu.SINGLECLICK,this.map_,e);this.dispatchEvent(r)},250)}updateActivePointers_(e){const t=e,r=t.pointerId;if(t.type==Pu.POINTERUP||t.type==Pu.POINTERCANCEL){delete this.trackedTouches_[r];for(const i in this.trackedTouches_)if(this.trackedTouches_[i].target!==t.target){delete this.trackedTouches_[i];break}}else(t.type==Pu.POINTERDOWN||t.type==Pu.POINTERMOVE)&&(this.trackedTouches_[r]=t);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const t=new b0(Pu.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(ul),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const t=new b0(Pu.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(t),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const r=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Ks(r,Pu.POINTERMOVE,this.handlePointerMove_,this),Ks(r,Pu.POINTERUP,this.handlePointerUp_,this),Ks(this.element_,Pu.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==r&&this.dragListenerKeys_.push(Ks(this.element_.getRootNode(),Pu.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const t=new b0(Pu.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const t=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new b0(Pu.POINTERMOVE,this.map_,e,t))}handleTouchMove_(e){const t=this.originalPointerMoveEvent_;(!t||t.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(ul(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(lo.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(ul(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(ul),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const km={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},ad={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},L2=1/0;class tne{constructor(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,r_(this.queuedElements_)}dequeue(){const e=this.elements_,t=this.priorities_,r=e[0];e.length==1?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));const i=this.keyFunction_(r);return delete this.queuedElements_[i],r}enqueue(e){Xs(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const t=this.priorityFunction_(e);return t!=L2?(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const t=this.elements_,r=this.priorities_,i=t.length,s=t[e],a=r[e],o=e;for(;e<i>>1;){const d=this.getLeftChildIndex_(e),g=this.getRightChildIndex_(e),b=g<i&&r[g]<r[d]?g:d;t[e]=t[b],r[e]=r[b],e=b}t[e]=s,r[e]=a,this.siftDown_(o,e)}siftDown_(e,t){const r=this.elements_,i=this.priorities_,s=r[t],a=i[t];for(;t>e;){const o=this.getParentIndex_(t);if(i[o]>a)r[t]=r[o],i[t]=i[o],t=o;else break}r[t]=s,i[t]=a}reprioritize(){const e=this.priorityFunction_,t=this.elements_,r=this.priorities_;let i=0;const s=t.length;let a,o,d;for(o=0;o<s;++o)a=t[o],d=e(a),d==L2?delete this.queuedElements_[this.keyFunction_(a)]:(r[i]=d,t[i++]=a);t.length=i,r.length=i,this.heapify_()}}class gj extends tne{constructor(e,t){super(r=>e.apply(null,r),r=>r[0].getKey()),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const t=super.enqueue(e);return t&&e[0].addEventListener(lo.CHANGE,this.boundHandleTileChange_),t}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const t=e.target,r=t.getState();if(r===Nr.LOADED||r===Nr.ERROR||r===Nr.EMPTY){r!==Nr.ERROR&&t.removeEventListener(lo.CHANGE,this.boundHandleTileChange_);const i=t.getKey();i in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[i],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,t){let r=0;for(;this.tilesLoading_<e&&r<t&&this.getCount()>0;){const i=this.dequeue()[0],s=i.getKey();i.getState()===Nr.IDLE&&!(s in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[s]=!0,++this.tilesLoading_,++r,i.load())}}}function nne(n,e,t,r,i){if(!n||!(t in n.wantedTiles)||!n.wantedTiles[t][e.getKey()])return L2;const s=n.viewState.center,a=r[0]-s[0],o=r[1]-s[1];return 65536*Math.log(i)+Math.sqrt(a*a+o*o)/i}class J8 extends Mp{constructor(e){super();const t=e.element;t&&!e.target&&!t.style.pointerEvents&&(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){var e;(e=this.element)==null||e.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(e){var t;this.map_&&((t=this.element)==null||t.remove());for(let r=0,i=this.listenerKeys.length;r<i;++r)ul(this.listenerKeys[r]);if(this.listenerKeys.length=0,this.map_=e,e){const r=this.target_??e.getOverlayContainerStopEvent();this.element&&r.appendChild(this.element),this.render!==Ky&&this.listenerKeys.push(Ks(e,km.POSTRENDER,this.render,this)),e.render()}}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}class rne extends J8{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.attributions_=e.attributions;const t=e.className!==void 0?e.className:"ol-attribution",r=e.tipLabel!==void 0?e.tipLabel:"Attributions",i=e.expandClassName!==void 0?e.expandClassName:t+"-expand",s=e.collapseLabel!==void 0?e.collapseLabel:"",a=e.collapseClassName!==void 0?e.collapseClassName:t+"-collapse";typeof s=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=s,this.collapseLabel_.className=a):this.collapseLabel_=s;const o=e.label!==void 0?e.label:"i";typeof o=="string"?(this.label_=document.createElement("span"),this.label_.textContent=o,this.label_.className=i):this.label_=o;const d=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=r,this.toggleButton_.appendChild(d),this.toggleButton_.addEventListener(lo.CLICK,this.handleClick_.bind(this),!1);const g=t+" "+Kx+" "+_8+(this.collapsed_&&this.collapsible_?" "+v9:"")+(this.collapsible_?"":" ol-uncollapsible"),b=this.element;b.className=g,b.appendChild(this.toggleButton_),b.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const t=this.getMap().getAllLayers(),r=new Set(t.flatMap(i=>i.getAttributions(e)));if(this.attributions_!==void 0&&(Array.isArray(this.attributions_)?this.attributions_.forEach(i=>r.add(i)):r.add(this.attributions_)),!this.overrideCollapsible_){const i=!t.some(s=>{var a;return((a=s.getSource())==null?void 0:a.getAttributionsCollapsible())===!1});this.setCollapsible(i)}return Array.from(r)}async updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=await Promise.all(this.collectSourceAttributions_(e).map(i=>Dy(()=>i))),r=t.length>0;if(this.renderedVisible_!=r&&(this.element.style.display=r?"":"none",this.renderedVisible_=r),!N0(t,this.renderedAttributions_)){lz(this.ulElement_);for(let i=0,s=t.length;i<s;++i){const a=document.createElement("li");a.innerHTML=t[i],this.ulElement_.appendChild(a)}this.renderedAttributions_=t}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(v9),this.collapsed_?g9(this.collapseLabel_,this.label_):g9(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}class ine extends J8{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const t=e.className!==void 0?e.className:"ol-rotate",r=e.label!==void 0?e.label:"",i=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof r=="string"?(this.label_=document.createElement("span"),this.label_.className=i,this.label_.textContent=r):(this.label_=r,this.label_.classList.add(i));const s=e.tipLabel?e.tipLabel:"Reset rotation",a=document.createElement("button");a.className=t+"-reset",a.setAttribute("type","button"),a.title=s,a.appendChild(this.label_),a.addEventListener(lo.CLICK,this.handleClick_.bind(this),!1);const o=t+" "+Kx+" "+_8,d=this.element;d.className=o,d.appendChild(a),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(ub)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const r=t.getRotation();r!==void 0&&(this.duration_>0&&r%(2*Math.PI)!==0?t.animate({rotation:0,duration:this.duration_,easing:Zy}):t.setRotation(0))}render(e){const t=e.frameState;if(!t)return;const r=t.viewState.rotation;if(r!=this.rotation_){const i="rotate("+r+"rad)";if(this.autoHide_){const s=this.element.classList.contains(ub);!s&&r===0?this.element.classList.add(ub):s&&r!==0&&this.element.classList.remove(ub)}this.label_.style.transform=i}this.rotation_=r}}class one extends J8{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const t=e.className!==void 0?e.className:"ol-zoom",r=e.delta!==void 0?e.delta:1,i=e.zoomInClassName!==void 0?e.zoomInClassName:t+"-in",s=e.zoomOutClassName!==void 0?e.zoomOutClassName:t+"-out",a=e.zoomInLabel!==void 0?e.zoomInLabel:"+",o=e.zoomOutLabel!==void 0?e.zoomOutLabel:"",d=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",g=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",b=document.createElement("button");b.className=i,b.setAttribute("type","button"),b.title=d,b.appendChild(typeof a=="string"?document.createTextNode(a):a),b.addEventListener(lo.CLICK,this.handleClick_.bind(this,r),!1);const E=document.createElement("button");E.className=s,E.setAttribute("type","button"),E.title=g,E.appendChild(typeof o=="string"?document.createTextNode(o):o),E.addEventListener(lo.CLICK,this.handleClick_.bind(this,-r),!1);const S=t+" "+Kx+" "+_8,I=this.element;I.className=S,I.appendChild(b),I.appendChild(E),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,t){t.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const r=this.getMap().getView();if(!r)return;const i=r.getZoom();if(i!==void 0){const s=r.getConstrainedZoom(i+e);this.duration_>0?(r.getAnimating()&&r.cancelAnimations(),r.animate({zoom:s,duration:this.duration_,easing:Zy})):r.setZoom(s)}}}function sne(n){n=n||{};const e=new em;return(n.zoom!==void 0?n.zoom:!0)&&e.push(new one(n.zoomOptions)),(n.rotate!==void 0?n.rotate:!0)&&e.push(new ine(n.rotateOptions)),(n.attribution!==void 0?n.attribution:!0)&&e.push(new rne(n.attributionOptions)),e}const lk={ACTIVE:"active"};class f_ extends Mp{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(lk.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(lk.ACTIVE,e)}setMap(e){this.map_=e}}function ane(n,e,t){const r=n.getCenterInternal();if(r){const i=[r[0]+e[0],r[1]+e[1]];n.animateInternal({duration:t!==void 0?t:250,easing:jte,center:n.getConstrainedCenter(i)})}}function eO(n,e,t,r){const i=n.getZoom();if(i===void 0)return;const s=n.getConstrainedZoom(i+e),a=n.getResolutionForZoom(s);n.getAnimating()&&n.cancelAnimations(),n.animate({resolution:a,anchor:t,duration:r!==void 0?r:250,easing:Zy})}class lne extends f_{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let t=!1;if(e.type==Pu.DBLCLICK){const r=e.originalEvent,i=e.map,s=e.coordinate,a=r.shiftKey?-this.delta_:this.delta_,o=i.getView();eO(o,a,s,this.duration_),r.preventDefault(),t=!0}return!t}}function dB(n){const e=arguments;return function(t){let r=!0;for(let i=0,s=e.length;i<s&&(r=r&&e[i](t),!!r);++i);return r}}const une=function(n){const e=n.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Ane=function(n){const e=n.map.getTargetElement(),t=e.getRootNode(),r=n.map.getOwnerDocument().activeElement;return t instanceof ShadowRoot?t.host.contains(r):e.contains(r)},yj=function(n){const e=n.map.getTargetElement(),t=e.getRootNode();return(t instanceof ShadowRoot?t.host:e).hasAttribute("tabindex")?Ane(n):!0},cne=MC,vj=function(n){const e=n.originalEvent;return e.button==0&&!(jX&&rz&&e.ctrlKey)},Cj=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},dne=function(n){const e=n.originalEvent;return rz?e.metaKey:e.ctrlKey},hne=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},_j=function(n){const e=n.originalEvent,t=e.target.tagName;return t!=="INPUT"&&t!=="SELECT"&&t!=="TEXTAREA"&&!e.target.isContentEditable},r5=function(n){const e=n.originalEvent;return Xs(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.pointerType=="mouse"},fne=function(n){const e=n.originalEvent;return Xs(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.isPrimary&&e.button===0};class p_ extends f_{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==Pu.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==Pu.POINTERUP){const r=this.handleUpEvent(e);this.handlingDownUpSequence=r&&this.targetPointers.length>0}}else if(e.type==Pu.POINTERDOWN){const r=this.handleDownEvent(e);this.handlingDownUpSequence=r,t=this.stopDown(r)}else e.type==Pu.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function tO(n){const e=n.length;let t=0,r=0;for(let i=0;i<e;i++)t+=n[i].clientX,r+=n[i].clientY;return{clientX:t/e,clientY:r/e}}class pne extends p_{constructor(e){super({stopDown:Px}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const t=e.condition?e.condition:dB(Cj,fne);this.condition_=e.onFocusOnly?dB(yj,t):t,this.noKinetic_=!1}handleDragEvent(e){const t=e.map;this.panning_||(this.panning_=!0,t.getView().beginInteraction());const r=this.targetPointers,i=t.getEventPixel(tO(r));if(r.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){const s=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],o=e.map.getView();SJ(s,o.getResolution()),O8(s,o.getRotation()),o.adjustCenterInternal(s)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=r.length,e.originalEvent.preventDefault()}handleUpEvent(e){const t=e.map,r=t.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const i=this.kinetic_.getDistance(),s=this.kinetic_.getAngle(),a=r.getCenterInternal(),o=t.getPixelFromCoordinateInternal(a),d=t.getCoordinateFromPixelInternal([o[0]-i*Math.cos(s),o[1]-i*Math.sin(s)]);r.animateInternal({center:r.getConstrainedCenter(d),duration:500,easing:Zy})}return this.panning_&&(this.panning_=!1,r.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const r=e.map.getView();return this.lastCentroid=null,r.getAnimating()&&r.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class mne extends p_{constructor(e){e=e||{},super({stopDown:Px}),this.condition_=e.condition?e.condition:une,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!r5(e))return;const t=e.map,r=t.getView();if(r.getConstraints().rotation===$8)return;const i=t.getSize(),s=e.pixel,a=Math.atan2(i[1]/2-s[1],s[0]-i[0]/2);if(this.lastAngle_!==void 0){const o=a-this.lastAngle_;r.adjustRotationInternal(-o)}this.lastAngle_=a}handleUpEvent(e){return r5(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return r5(e)&&vj(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class gne extends n_{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,t=this.endPixel_,r="px",i=this.element_.style;i.left=Math.min(e[0],t[0])+r,i.top=Math.min(e[1],t[1])+r,i.width=Math.abs(t[0]-e[0])+r,i.height=Math.abs(t[1]-e[1])+r}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const e=this.startPixel_,t=this.endPixel_,i=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);i[4]=i[0].slice(),this.geometry_?this.geometry_.setCoordinates([i]):this.geometry_=new Gm([i])}getGeometry(){return this.geometry_}}const w1={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class Bv extends wp{constructor(e,t,r){super(e),this.coordinate=t,this.mapBrowserEvent=r}}class yne extends p_{constructor(e){super(),this.on,this.once,this.un,e=e??{},this.box_=new gne(e.className||"ol-dragbox"),this.minArea_=e.minArea??64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition??vj,this.boxEndCondition_=e.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(e,t,r){const i=r[0]-t[0],s=r[1]-t[1];return i*i+s*s>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.startPixel_&&(this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new Bv(w1.BOXDRAG,e.coordinate,e)))}handleUpEvent(e){if(!this.startPixel_)return!1;const t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new Bv(t?w1.BOXEND:w1.BOXCANCEL,e.coordinate,e)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Bv(w1.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}setActive(e){e||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new Bv(w1.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(e)}setMap(e){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new Bv(w1.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setMap(e)}}class vne extends yne{constructor(e){e=e||{};const t=e.condition?e.condition:hne;super({condition:t,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const r=this.getMap().getView();let i=this.getGeometry();if(this.out_){const s=r.rotatedExtentForGeometry(i),a=r.getResolutionForExtentInternal(s),o=r.getResolution()/a;i=i.clone(),i.scale(o*o)}r.fitInternal(i,{duration:this.duration_,easing:Zy})}}const Ag={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class Cne extends f_{constructor(e){super(),e=e||{},this.defaultCondition_=function(t){return Cj(t)&&_j(t)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let t=!1;if(e.type==lo.KEYDOWN){const r=e.originalEvent,i=r.key;if(this.condition_(e)&&(i==Ag.DOWN||i==Ag.LEFT||i==Ag.RIGHT||i==Ag.UP)){const a=e.map.getView(),o=a.getResolution()*this.pixelDelta_;let d=0,g=0;i==Ag.DOWN?g=-o:i==Ag.LEFT?d=-o:i==Ag.RIGHT?d=o:g=o;const b=[d,g];O8(b,a.getRotation()),ane(a,b,this.duration_),r.preventDefault(),t=!0}}return!t}}class _ne extends f_{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(t){return!dne(t)&&_j(t)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let t=!1;if(e.type==lo.KEYDOWN||e.type==lo.KEYPRESS){const r=e.originalEvent,i=r.key;if(this.condition_(e)&&(i==="+"||i==="-")){const s=e.map,a=i==="+"?this.delta_:-this.delta_,o=s.getView();eO(o,a,void 0,this.duration_),r.preventDefault(),t=!0}}return!t}}class bne extends f_{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const t=e.condition?e.condition:cne;this.condition_=e.onFocusOnly?dB(yj,t):t,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(e){if(!this.condition_(e)||e.type!==lo.WHEEL)return!0;const r=e.map,i=e.originalEvent;i.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.pixel);let s;if(e.type==lo.WHEEL&&(s=i.deltaY,UX&&i.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(s/=iz),i.deltaMode===WheelEvent.DOM_DELTA_LINE&&(s*=40)),s===0)return!1;this.lastDelta_=s;const a=Date.now();this.startTime_===void 0&&(this.startTime_=a),(!this.mode_||a-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(s)<4?"trackpad":"wheel");const o=r.getView();if(this.mode_==="trackpad"&&!(o.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(o.getAnimating()&&o.cancelAnimations(),o.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),o.adjustZoom(-s/this.deltaPerZoom_,this.lastAnchor_?r.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=a,!1;this.totalDelta_+=s;const d=Math.max(this.timeout_-(a-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,r),d),!1}handleWheelZoom_(e){const t=e.getView();t.getAnimating()&&t.cancelAnimations();let r=-MA(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(r=r?r>0?1:-1:0),eO(t,r,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}class xne extends p_{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=Px),super(t),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let t=0;const r=this.targetPointers[0],i=this.targetPointers[1],s=Math.atan2(i.clientY-r.clientY,i.clientX-r.clientX);if(this.lastAngle_!==void 0){const d=s-this.lastAngle_;this.rotationDelta_+=d,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=d}this.lastAngle_=s;const a=e.map,o=a.getView();o.getConstraints().rotation!==$8&&(this.anchor_=a.getCoordinateFromPixelInternal(a.getEventPixel(tO(this.targetPointers))),this.rotating_&&(a.render(),o.adjustRotationInternal(t,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}class wne extends p_{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=Px),super(t),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let t=1;const r=this.targetPointers[0],i=this.targetPointers[1],s=r.clientX-i.clientX,a=r.clientY-i.clientY,o=Math.sqrt(s*s+a*a);this.lastDistance_!==void 0&&(t=this.lastDistance_/o),this.lastDistance_=o;const d=e.map,g=d.getView();t!=1&&(this.lastScaleDelta_=t),this.anchor_=d.getCoordinateFromPixelInternal(d.getEventPixel(tO(this.targetPointers))),d.render(),g.adjustResolutionInternal(t,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const r=e.map.getView(),i=this.lastScaleDelta_>1?1:-1;return r.endInteraction(this.duration_,i),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}function Mne(n){n=n||{};const e=new em,t=new Jte(-.005,.05,100);return(n.altShiftDragRotate!==void 0?n.altShiftDragRotate:!0)&&e.push(new mne),(n.doubleClickZoom!==void 0?n.doubleClickZoom:!0)&&e.push(new lne({delta:n.zoomDelta,duration:n.zoomDuration})),(n.dragPan!==void 0?n.dragPan:!0)&&e.push(new pne({onFocusOnly:n.onFocusOnly,kinetic:t})),(n.pinchRotate!==void 0?n.pinchRotate:!0)&&e.push(new xne),(n.pinchZoom!==void 0?n.pinchZoom:!0)&&e.push(new wne({duration:n.zoomDuration})),(n.keyboard!==void 0?n.keyboard:!0)&&(e.push(new Cne),e.push(new _ne({delta:n.zoomDelta,duration:n.zoomDuration}))),(n.mouseWheelZoom!==void 0?n.mouseWheelZoom:!0)&&e.push(new bne({onFocusOnly:n.onFocusOnly,duration:n.zoomDuration})),(n.shiftDragZoom!==void 0?n.shiftDragZoom:!0)&&e.push(new vne({duration:n.zoomDuration})),e}class w0 extends wp{constructor(e,t){super(e),this.layer=t}}const i5={LAYERS:"layers"};class Jy extends pj{constructor(e){e=e||{};const t=Object.assign({},e);delete t.layers;let r=e.layers;super(t),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(i5.LAYERS,this.handleLayersChanged_),r?Array.isArray(r)?r=new em(r.slice(),{unique:!0}):Xs(typeof r.getArray=="function","Expected `layers` to be an array or a `Collection`"):r=new em(void 0,{unique:!0}),this.setLayers(r)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(ul),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(Ks(e,dh.ADD,this.handleLayersAdd_,this),Ks(e,dh.REMOVE,this.handleLayersRemove_,this));for(const r in this.listenerKeys_)this.listenerKeys_[r].forEach(ul);r_(this.listenerKeys_);const t=e.getArray();for(let r=0,i=t.length;r<i;r++){const s=t[r];this.registerLayerListeners_(s),this.dispatchEvent(new w0("addlayer",s))}this.changed()}registerLayerListeners_(e){const t=[Ks(e,Ry.PROPERTYCHANGE,this.handleLayerChange_,this),Ks(e,lo.CHANGE,this.handleLayerChange_,this)];e instanceof Jy&&t.push(Ks(e,"addlayer",this.handleLayerGroupAdd_,this),Ks(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[Go(e)]=t}handleLayerGroupAdd_(e){this.dispatchEvent(new w0("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new w0("removelayer",e.layer))}handleLayersAdd_(e){const t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new w0("addlayer",t)),this.changed()}handleLayersRemove_(e){const t=e.element,r=Go(t);this.listenerKeys_[r].forEach(ul),delete this.listenerKeys_[r],this.dispatchEvent(new w0("removelayer",t)),this.changed()}getLayers(){return this.get(i5.LAYERS)}setLayers(e){const t=this.getLayers();if(t){const r=t.getArray();for(let i=0,s=r.length;i<s;++i)this.dispatchEvent(new w0("removelayer",r[i]))}this.set(i5.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(t){t.getLayersArray(e)}),e}getLayerStatesArray(e){const t=e!==void 0?e:[],r=t.length;this.getLayers().forEach(function(a){a.getLayerStatesArray(t)});const i=this.getLayerState();let s=i.zIndex;!e&&i.zIndex===void 0&&(s=0);for(let a=r,o=t.length;a<o;a++){const d=t[a];d.opacity*=i.opacity,d.visible=d.visible&&i.visible,d.maxResolution=Math.min(d.maxResolution,i.maxResolution),d.minResolution=Math.max(d.minResolution,i.minResolution),d.minZoom=Math.max(d.minZoom,i.minZoom),d.maxZoom=Math.min(d.maxZoom,i.maxZoom),i.extent!==void 0&&(d.extent!==void 0?d.extent=_p(d.extent,i.extent):d.extent=i.extent),d.zIndex===void 0&&(d.zIndex=s)}return t}getSourceState(){return"ready"}}class Sne extends n_{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,t){xo()}calculateMatrices2D(e){const t=e.viewState,r=e.coordinateToPixelTransform,i=e.pixelToCoordinateTransform;sm(r,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),Lz(i,r)}forEachFeatureAtCoordinate(e,t,r,i,s,a,o,d){let g;const b=t.viewState;function E(te,V,ne,G){return s.call(a,V,te?ne:null,G)}const S=b.projection,I=I8(e.slice(),S),P=[[0,0]];if(S.canWrapX()&&i){const te=S.getExtent(),V=Ds(te);P.push([-V,0],[V,0])}const z=t.layerStatesArray,j=z.length,q=[],Y=[];for(let te=0;te<P.length;te++)for(let V=j-1;V>=0;--V){const ne=z[V],G=ne.layer;if(G.hasRenderer()&&H8(ne,b)&&o.call(d,G)){const oe=G.getRenderer(),he=G.getSource();if(oe&&he){const pe=he.getWrapX()?I:e,Ee=E.bind(null,ne.managed);Y[0]=pe[0]+P[te][0],Y[1]=pe[1]+P[te][1],g=oe.forEachFeatureAtCoordinate(Y,t,r,Ee,q)}if(g)return g}}if(q.length===0)return;const ie=1/q.length;return q.forEach((te,V)=>te.distanceSq+=V*ie),q.sort((te,V)=>te.distanceSq-V.distanceSq),q.some(te=>g=te.callback(te.feature,te.layer,te.geometry)),g}hasFeatureAtCoordinate(e,t,r,i,s,a){return this.forEachFeatureAtCoordinate(e,t,r,i,MC,this,s,a)!==void 0}getMap(){return this.map_}renderFrame(e){xo()}scheduleExpireIconCache(e){Uf.canExpireCache()&&e.postRenderFunctions.push(Ene)}}function Ene(n,e){Uf.expire()}class Bne extends Sne{constructor(e){super(e),this.fontChangeListenerKey_=Ks(jp,Ry.PROPERTYCHANGE,e.redrawText,e),this.element_=document.createElement("div");const t=this.element_.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex="0",this.element_.className=Kx+" ol-layers";const r=e.getViewport();r.insertBefore(this.element_,r.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,t){const r=this.getMap();if(r.hasListener(e)){const i=new oj(e,void 0,t);r.dispatchEvent(i)}}disposeInternal(){ul(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(zf.PRECOMPOSE,e);const t=e.layerStatesArray.sort((o,d)=>o.zIndex-d.zIndex);t.some(o=>o.layer instanceof Z8&&o.layer.getDeclutter())&&(e.declutter={});const i=e.viewState;this.children_.length=0;const s=[];let a=null;for(let o=0,d=t.length;o<d;++o){const g=t[o];e.layerIndex=o;const b=g.layer,E=b.getSourceState();if(!H8(g,i)||E!="ready"&&E!="undefined"){b.unrender();continue}const S=b.render(e,a);S&&(S!==a&&(this.children_.push(S),a=S),s.push(g))}this.declutter(e,s),QX(this.element_,this.children_),this.dispatchRenderEvent(zf.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}declutter(e,t){if(e.declutter){for(let r=t.length-1;r>=0;--r){const i=t[r],s=i.layer;s.getDeclutter()&&s.renderDeclutter(e,i)}t.forEach(r=>r.layer.renderDeferred(e))}}}function bj(n){if(n instanceof Xy){n.setMapInternal(null);return}n instanceof Jy&&n.getLayers().forEach(bj)}function xj(n,e){if(n instanceof Xy){n.setMapInternal(e);return}if(n instanceof Jy){const t=n.getLayers().getArray();for(let r=0,i=t.length;r<i;++r)xj(t[r],e)}}let nO=class extends Mp{constructor(e){super(),e=e||{},this.on,this.once,this.un;const t=One(e);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:iz,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=ph(),this.pixelToCoordinateTransform_=ph(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=t.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=t.controls||sne(),this.interactions=t.interactions||Mne({onFocusOnly:!0}),this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new gj(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(ad.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(ad.VIEW,this.handleViewChanged_),this.addChangeListener(ad.SIZE,this.handleSizeChanged_),this.addChangeListener(ad.TARGET,this.handleTargetChanged_),this.setProperties(t.values);const r=this;e.view&&!(e.view instanceof yp)&&e.view.then(function(i){r.setView(new yp(i))}),this.controls.addEventListener(dh.ADD,i=>{i.element.setMap(this)}),this.controls.addEventListener(dh.REMOVE,i=>{i.element.setMap(null)}),this.interactions.addEventListener(dh.ADD,i=>{i.element.setMap(this)}),this.interactions.addEventListener(dh.REMOVE,i=>{i.element.setMap(null)}),this.overlays_.addEventListener(dh.ADD,i=>{this.addOverlayInternal_(i.element)}),this.overlays_.addEventListener(dh.REMOVE,i=>{const s=i.element.getId();s!==void 0&&delete this.overlayIdIndex_[s.toString()],i.element.setMap(null)}),this.controls.forEach(i=>{i.setMap(this)}),this.interactions.forEach(i=>{i.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){xj(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const t=e.getId();t!==void 0&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,t,r){if(!this.frameState_||!this.renderer_)return;const i=this.getCoordinateFromPixelInternal(e);r=r!==void 0?r:{};const s=r.hitTolerance!==void 0?r.hitTolerance:0,a=r.layerFilter!==void 0?r.layerFilter:MC,o=r.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(i,this.frameState_,s,o,t,null,a,null)}getFeaturesAtPixel(e,t){const r=[];return this.forEachFeatureAtPixel(e,function(i){r.push(i)},t),r}getAllLayers(){const e=[];function t(r){r.forEach(function(i){i instanceof Jy?t(i.getLayers()):e.push(i)})}return t(this.getLayers()),e}hasFeatureAtPixel(e,t){if(!this.frameState_||!this.renderer_)return!1;const r=this.getCoordinateFromPixelInternal(e);t=t!==void 0?t:{};const i=t.layerFilter!==void 0?t.layerFilter:MC,s=t.hitTolerance!==void 0?t.hitTolerance:0,a=t.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(r,this.frameState_,s,a,i,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const r=this.viewport_.getBoundingClientRect(),i=this.getSize(),s=r.width/i[0],a=r.height/i[1],o="changedTouches"in e?e.changedTouches[0]:e;return[(o.clientX-r.left)/s,(o.clientY-r.top)/a]}getTarget(){return this.get(ad.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return sB(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const t=this.frameState_;return t?wA(t.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const t=this.overlayIdIndex_[e.toString()];return t!==void 0?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(ad.LAYERGROUP)}setLayers(e){const t=this.getLayerGroup();if(e instanceof em){t.setLayers(e);return}const r=t.getLayers();r.clear(),r.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,r=e.length;t<r;++t){const i=e[t];if(!i.visible)continue;const s=i.layer.getRenderer();if(s&&!s.ready)return!0;const a=i.layer.getSource();if(a&&a.loading)return!0}return!1}getPixelFromCoordinate(e){const t=Im(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(e){const t=this.frameState_;return t?wA(t.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(ad.SIZE)}getView(){return this.get(ad.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,t,r,i){return nne(this.frameState_,e,t,r,i)}handleBrowserEvent(e,t){t=t||e.type;const r=new b0(t,this,e);this.handleMapBrowserEvent(r)}handleMapBrowserEvent(e){if(!this.frameState_)return;const t=e.originalEvent,r=t.type;if(r===cB.POINTERDOWN||r===lo.WHEEL||r===lo.KEYDOWN){const i=this.getOwnerDocument(),s=this.viewport_.getRootNode?this.viewport_.getRootNode():i,a=t.target,o=s instanceof ShadowRoot?s.host===a?s.host.ownerDocument:s:s===i?i.documentElement:s;if(this.overlayContainerStopEvent_.contains(a)||!o.contains(a))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const i=this.getInteractions().getArray().slice();for(let s=i.length-1;s>=0;s--){const a=i[s];if(a.getMap()!==this||!a.getActive()||!this.getTargetElement())continue;if(!a.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let i=this.maxTilesLoading_,s=i;if(e){const a=e.viewHints;if(a[ql.ANIMATING]||a[ql.INTERACTING]){const o=Date.now()-e.time>8;i=o?0:8,s=o?0:2}}t.getTilesLoading()<i&&(t.reprioritize(),t.loadMoreTiles(i,s))}e&&this.renderer_&&!e.animate&&(this.renderComplete_?(this.hasListener(zf.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(zf.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new ty(km.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new ty(km.LOADSTART,this,e))));const r=this.postRenderFunctions_;if(e)for(let i=0,s=r.length;i<s;++i)r[i](this,e);r.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let r=0,i=this.targetChangeHandlerKeys_.length;r<i;++r)ul(this.targetChangeHandlerKeys_[r]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(lo.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(lo.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const r=this.targetElement_.getRootNode();r instanceof ShadowRoot&&this.resizeObserver_.unobserve(r.host),this.setSize(void 0)}const e=this.getTarget(),t=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=t,!t)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new Bne(this)),this.mapBrowserEventHandler_=new ene(this,this.moveTolerance_);for(const s in Pu)this.mapBrowserEventHandler_.addEventListener(Pu[s],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(lo.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(lo.WHEEL,this.boundHandleBrowserEvent_,az?{passive:!1}:!1);let r;if(this.keyboardEventTarget_)r=this.keyboardEventTarget_;else{const s=t.getRootNode();r=s instanceof ShadowRoot?s.host:t}this.targetChangeHandlerKeys_=[Ks(r,lo.KEYDOWN,this.handleBrowserEvent,this),Ks(r,lo.KEYPRESS,this.handleBrowserEvent,this)];const i=t.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.observe(i.host),this.resizeObserver_.observe(t)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(ul(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(ul(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=Ks(e,Ry.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Ks(e,lo.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(ul),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new w0("addlayer",e)),this.layerGroupPropertyListenerKeys_=[Ks(e,Ry.PROPERTYCHANGE,this.render,this),Ks(e,lo.CHANGE,this.render,this),Ks(e,"addlayer",this.handleLayerAdd_,this),Ks(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,r=e.length;t<r;++t){const i=e[t].layer;i.hasRenderer()&&i.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){bj(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const t=this.getSize(),r=this.getView(),i=this.frameState_;let s=null;if(t!==void 0&&b9(t)&&r&&r.isDef()){const a=r.getHints(this.frameState_?this.frameState_.viewHints:void 0),o=r.getState();if(s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:S2(o.center,o.resolution,o.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:o,viewHints:a,wantedTiles:{},mapId:Go(this),renderTargets:{}},o.nextCenter&&o.nextResolution){const d=isNaN(o.nextRotation)?o.rotation:o.nextRotation;s.nextExtent=S2(o.nextCenter,o.nextResolution,d,t)}}this.frameState_=s,this.renderer_.renderFrame(s),s&&(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),i&&(!this.previousExtent_||!$g(this.previousExtent_)&&!Wm(s.extent,this.previousExtent_))&&(this.dispatchEvent(new ty(km.MOVESTART,this,i)),this.previousExtent_=Vy(this.previousExtent_)),this.previousExtent_&&!s.viewHints[ql.ANIMATING]&&!s.viewHints[ql.INTERACTING]&&!Wm(s.extent,this.previousExtent_)&&(this.dispatchEvent(new ty(km.MOVEEND,this,s)),mz(s.extent,this.previousExtent_))),this.dispatchEvent(new ty(km.POSTRENDER,this,s)),this.renderComplete_=(this.hasListener(km.LOADSTART)||this.hasListener(km.LOADEND)||this.hasListener(zf.RENDERCOMPLETE))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const t=this.getLayerGroup();t&&this.handleLayerRemove_(new w0("removelayer",t)),this.set(ad.LAYERGROUP,e)}setSize(e){this.set(ad.SIZE,e)}setTarget(e){this.set(ad.TARGET,e)}setView(e){if(!e||e instanceof yp){this.set(ad.VIEW,e);return}this.set(ad.VIEW,new yp);const t=this;e.then(function(r){t.setView(new yp(r))})}updateSize(){const e=this.getTargetElement();let t;if(e){const i=getComputedStyle(e),s=e.offsetWidth-parseFloat(i.borderLeftWidth)-parseFloat(i.paddingLeft)-parseFloat(i.paddingRight)-parseFloat(i.borderRightWidth),a=e.offsetHeight-parseFloat(i.borderTopWidth)-parseFloat(i.paddingTop)-parseFloat(i.paddingBottom)-parseFloat(i.borderBottomWidth);!isNaN(s)&&!isNaN(a)&&(t=[Math.max(0,s),Math.max(0,a)],!b9(t)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&Iz("No map visible because the map container's width or height are 0."))}const r=this.getSize();t&&(!r||!N0(t,r))&&(this.setSize(t),this.updateViewportSize_(t))}updateViewportSize_(e){const t=this.getView();t&&t.setViewportSize(e)}};function One(n){let e=null;n.keyboardEventTarget!==void 0&&(e=typeof n.keyboardEventTarget=="string"?document.getElementById(n.keyboardEventTarget):n.keyboardEventTarget);const t={},r=n.layers&&typeof n.layers.getLayers=="function"?n.layers:new Jy({layers:n.layers});t[ad.LAYERGROUP]=r,t[ad.TARGET]=n.target,t[ad.VIEW]=n.view instanceof yp?n.view:new yp;let i;n.controls!==void 0&&(Array.isArray(n.controls)?i=new em(n.controls.slice()):(Xs(typeof n.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),i=n.controls));let s;n.interactions!==void 0&&(Array.isArray(n.interactions)?s=new em(n.interactions.slice()):(Xs(typeof n.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),s=n.interactions));let a;return n.overlays!==void 0?Array.isArray(n.overlays)?a=new em(n.overlays.slice()):(Xs(typeof n.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),a=n.overlays):a=new em,{controls:i,interactions:s,keyboardEventTarget:e,overlays:a,values:t}}const sd={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};class Ine extends Mp{constructor(e){super(),this.on,this.once,this.un,this.options=e,this.id=e.id,this.insertFirst=e.insertFirst!==void 0?e.insertFirst:!0,this.stopEvent=e.stopEvent!==void 0?e.stopEvent:!0,this.element=document.createElement("div"),this.element.className=e.className!==void 0?e.className:"ol-overlay-container "+rJ,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=e.autoPan===!0?{}:e.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(sd.ELEMENT,this.handleElementChanged),this.addChangeListener(sd.MAP,this.handleMapChanged),this.addChangeListener(sd.OFFSET,this.handleOffsetChanged),this.addChangeListener(sd.POSITION,this.handlePositionChanged),this.addChangeListener(sd.POSITIONING,this.handlePositioningChanged),e.element!==void 0&&this.setElement(e.element),this.setOffset(e.offset!==void 0?e.offset:[0,0]),this.setPositioning(e.positioning||"top-left"),e.position!==void 0&&this.setPosition(e.position)}getElement(){return this.get(sd.ELEMENT)}getId(){return this.id}getMap(){return this.get(sd.MAP)||null}getOffset(){return this.get(sd.OFFSET)}getPosition(){return this.get(sd.POSITION)}getPositioning(){return this.get(sd.POSITIONING)}handleElementChanged(){lz(this.element);const e=this.getElement();e&&this.element.appendChild(e)}handleMapChanged(){var t;this.mapPostrenderListenerKey&&((t=this.element)==null||t.remove(),ul(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const e=this.getMap();if(e){this.mapPostrenderListenerKey=Ks(e,km.POSTRENDER,this.render,this),this.updatePixelPosition();const r=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer();this.insertFirst?r.insertBefore(this.element,r.childNodes[0]||null):r.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(e){this.set(sd.ELEMENT,e)}setMap(e){this.set(sd.MAP,e)}setOffset(e){this.set(sd.OFFSET,e)}setPosition(e){this.set(sd.POSITION,e)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(e){const t=this.getMap();if(!t||!t.getTargetElement()||!this.get(sd.POSITION))return;const r=this.getRect(t.getTargetElement(),t.getSize()),i=this.getElement(),s=this.getRect(i,[WX(i),GX(i)]);e=e||{};const a=e.margin===void 0?20:e.margin;if(!Xp(r,s)){const o=s[0]-r[0],d=r[2]-s[2],g=s[1]-r[1],b=r[3]-s[3],E=[0,0];if(o<0?E[0]=o-a:d<0&&(E[0]=Math.abs(d)+a),g<0?E[1]=g-a:b<0&&(E[1]=Math.abs(b)+a),E[0]!==0||E[1]!==0){const S=t.getView().getCenterInternal(),I=t.getPixelFromCoordinateInternal(S);if(!I)return;const P=[I[0]+E[0],I[1]+E[1]],z=e.animation||{};t.getView().animateInternal({center:t.getCoordinateFromPixelInternal(P),duration:z.duration,easing:z.easing})}}}getRect(e,t){const r=e.getBoundingClientRect(),i=r.left+window.pageXOffset,s=r.top+window.pageYOffset;return[i,s,i+t[0],s+t[1]]}setPositioning(e){this.set(sd.POSITIONING,e)}setVisible(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)}updatePixelPosition(){const e=this.getMap(),t=this.getPosition();if(!e||!e.isRendered()||!t){this.setVisible(!1);return}const r=e.getPixelFromCoordinate(t),i=e.getSize();this.updateRenderedPosition(r,i)}updateRenderedPosition(e,t){const r=this.element.style,i=this.getOffset(),s=this.getPositioning();this.setVisible(!0);const a=Math.round(e[0]+i[0])+"px",o=Math.round(e[1]+i[1])+"px";let d="0%",g="0%";s=="bottom-right"||s=="center-right"||s=="top-right"?d="-100%":(s=="bottom-center"||s=="center-center"||s=="top-center")&&(d="-50%"),s=="bottom-left"||s=="bottom-center"||s=="bottom-right"?g="-100%":(s=="center-left"||s=="center-center"||s=="center-right")&&(g="-50%");const b=`translate(${d}, ${g}) translate(${a}, ${o})`;this.rendered.transform_!=b&&(this.rendered.transform_=b,r.transform=b)}getOptions(){return this.options}}class rO{constructor(e,t,r,i){this.minX=e,this.maxX=t,this.minY=r,this.maxY=i}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function M1(n,e,t,r,i){return i!==void 0?(i.minX=n,i.maxX=e,i.minY=t,i.maxY=r,i):new rO(n,e,t,r)}const uk=[];class kne extends h_{constructor(e,t,r,i,s){super(e,t,{transition:0}),this.context_=null,this.executorGroups={},this.loadingSourceTiles=0,this.hitDetectionImageData={},this.replayState_={},this.sourceTiles=[],this.errorTileKeys={},this.wantedResolution,this.getSourceTiles=i.bind(void 0,this),this.removeSourceTiles_=s,this.wrappedTileCoord=r}getContext(){return this.context_||(this.context_=Ru(1,1,uk)),this.context_}hasContext(){return!!this.context_}getImage(){return this.hasContext()?this.getContext().canvas:null}getReplayState(e){const t=Go(e);return t in this.replayState_||(this.replayState_[t]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[t]}load(){this.getSourceTiles()}release(){this.context_&&(t_(this.context_),uk.push(this.context_.canvas),this.context_=null),this.removeSourceTiles_(this),this.sourceTiles.length=0,super.release()}}let wj=class extends h_{constructor(e,t,r,i,s,a){super(e,t,a),this.extent=null,this.format_=i,this.features_=null,this.loader_,this.projection=null,this.resolution,this.tileLoadFunction_=s,this.url_=r,this.key=r}getTileUrl(){return this.url_}getFormat(){return this.format_}getFeatures(){return this.features_}load(){this.state==Nr.IDLE&&(this.setState(Nr.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}onLoad(e,t){this.setFeatures(e)}onError(){this.setState(Nr.ERROR)}setFeatures(e){this.features_=e,this.setState(Nr.LOADED)}setLoader(e){this.loader_=e}};class Mj{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=Fx,this.supportedMediaTypes=null}getReadOptions(e,t){if(t){let r=t.dataProjection?wa(t.dataProjection):this.readProjection(e);t.extent&&r&&r.getUnits()==="tile-pixels"&&(r=wa(r),r.setWorldExtent(t.extent)),t={dataProjection:r,featureProjection:t.featureProjection}}return this.adaptOptions(t)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},e)}getType(){return xo()}readFeature(e,t){return xo()}readFeatures(e,t){return xo()}readGeometry(e,t){return xo()}readProjection(e){return xo()}writeFeature(e,t){return xo()}writeFeatures(e,t){return xo()}writeGeometry(e,t){return xo()}}function Zx(n,e,t){const r=t?wa(t.featureProjection):null,i=t?wa(t.dataProjection):null;let s=n;if(r&&i&&!Dg(r,i)){e&&(s=n.clone());const a=e?r:i,o=e?i:r;a.getUnits()==="tile-pixels"?s.transform(a,o):s.applyTransform(kC(a,o))}if(e&&t&&t.decimals!==void 0){const a=Math.pow(10,t.decimals),o=function(d){for(let g=0,b=d.length;g<b;++g)d[g]=Math.round(d[g]*a)/a;return d};s===n&&(s=n.clone()),s.applyTransform(o)}return s}const Tne={Point:Ng,LineString:jg,Polygon:Gm,MultiPoint:A_,MultiLineString:KC,MultiPolygon:DC};function Pne(n,e,t){return Array.isArray(e[0])?(Sz(n,0,e,t)||(n=n.slice(),eB(n,0,e,t)),n):(E8(n,0,e,t)||(n=n.slice(),B2(n,0,e,t)),n)}function Sj(n,e){var s;const t=n.geometry;if(!t)return[];if(Array.isArray(t))return t.map(a=>Sj({...n,geometry:a})).flat();const r=t.type==="MultiPolygon"?"Polygon":t.type;if(r==="GeometryCollection"||r==="Circle")throw new Error("Unsupported geometry type: "+r);const i=t.layout.length;return Zx(new ud(r,r==="Polygon"?Pne(t.flatCoordinates,t.ends,i):t.flatCoordinates,(s=t.ends)==null?void 0:s.flat(),i,n.properties||{},n.id).enableSimplifyTransformed(),!1,e)}function iO(n,e){if(!n)return null;if(Array.isArray(n)){const r=n.map(i=>iO(i,e));return new T2(r)}const t=Tne[n.type];return Zx(new t(n.flatCoordinates,n.layout||"XY",n.ends),!1,e)}class Kne extends Mj{constructor(){super()}getType(){return"json"}readFeature(e,t){return this.readFeatureFromObject(gb(e),this.getReadOptions(e,t))}readFeatures(e,t){return this.readFeaturesFromObject(gb(e),this.getReadOptions(e,t))}readFeatureFromObject(e,t){return xo()}readFeaturesFromObject(e,t){return xo()}readGeometry(e,t){return this.readGeometryFromObject(gb(e),this.getReadOptions(e,t))}readGeometryFromObject(e,t){return xo()}readProjection(e){return this.readProjectionFromObject(gb(e))}readProjectionFromObject(e){return xo()}writeFeature(e,t){return JSON.stringify(this.writeFeatureObject(e,t))}writeFeatureObject(e,t){return xo()}writeFeatures(e,t){return JSON.stringify(this.writeFeaturesObject(e,t))}writeFeaturesObject(e,t){return xo()}writeGeometry(e,t){return JSON.stringify(this.writeGeometryObject(e,t))}writeGeometryObject(e,t){return xo()}}function gb(n){if(typeof n=="string"){const e=JSON.parse(n);return e||null}return n!==null?n:null}class Ak extends Kne{constructor(e){e=e||{},super(),this.dataProjection=wa(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=wa(e.featureProjection)),e.featureClass&&(this.featureClass=e.featureClass),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,t){let r=null;e.type==="Feature"?r=e:r={type:"Feature",geometry:e,properties:null};const i=oO(r.geometry);if(this.featureClass===ud)return Sj({geometry:i,id:r.id,properties:r.properties},t);const s=new Fx;return this.geometryName_?s.setGeometryName(this.geometryName_):this.extractGeometryName_&&r.geometry_name&&s.setGeometryName(r.geometry_name),s.setGeometry(iO(i,t)),"id"in r&&s.setId(r.id),r.properties&&s.setProperties(r.properties,!0),s}readFeaturesFromObject(e,t){const r=e;let i=null;if(r.type==="FeatureCollection"){const s=e;i=[];const a=s.features;for(let o=0,d=a.length;o<d;++o){const g=this.readFeatureFromObject(a[o],t);g&&i.push(g)}}else i=[this.readFeatureFromObject(e,t)];return i.flat()}readGeometryFromObject(e,t){return Dne(e,t)}readProjectionFromObject(e){const t=e.crs;let r;if(t)if(t.type=="name")r=wa(t.properties.name);else if(t.type==="EPSG")r=wa("EPSG:"+t.properties.code);else throw new Error("Unknown SRS type");else r=this.dataProjection;return r}writeFeatureObject(e,t){t=this.adaptOptions(t);const r={type:"Feature",geometry:null,properties:null},i=e.getId();if(i!==void 0&&(r.id=i),!e.hasProperties())return r;const s=e.getProperties(),a=e.getGeometry();return a&&(r.geometry=hB(a,t),delete s[e.getGeometryName()]),z0(s)||(r.properties=s),r}writeFeaturesObject(e,t){t=this.adaptOptions(t);const r=[];for(let i=0,s=e.length;i<s;++i)r.push(this.writeFeatureObject(e[i],t));return{type:"FeatureCollection",features:r}}writeGeometryObject(e,t){return hB(e,this.adaptOptions(t))}}function oO(n,e){if(!n)return null;let t;switch(n.type){case"Point":{t=Fne(n);break}case"LineString":{t=Lne(n);break}case"Polygon":{t=Nne(n);break}case"MultiPoint":{t=zne(n);break}case"MultiLineString":{t=Une(n);break}case"MultiPolygon":{t=jne(n);break}case"GeometryCollection":{t=Rne(n);break}default:throw new Error("Unsupported GeoJSON type: "+n.type)}return t}function Dne(n,e){const t=oO(n);return iO(t,e)}function Rne(n,e){return n.geometries.map(function(r){return oO(r)})}function Fne(n){const e=n.coordinates;return{type:"Point",flatCoordinates:e,layout:Hg(e.length)}}function Lne(n){var r;const e=n.coordinates,t=e.flat();return{type:"LineString",flatCoordinates:t,ends:[t.length],layout:Hg(((r=e[0])==null?void 0:r.length)||2)}}function Une(n){var s,a;const e=n.coordinates,t=((a=(s=e[0])==null?void 0:s[0])==null?void 0:a.length)||2,r=[],i=u_(r,0,e,t);return{type:"MultiLineString",flatCoordinates:r,ends:i,layout:Hg(t)}}function zne(n){var t;const e=n.coordinates;return{type:"MultiPoint",flatCoordinates:e.flat(),layout:Hg(((t=e[0])==null?void 0:t.length)||2)}}function jne(n){var s,a;const e=n.coordinates,t=[],r=((a=(s=e[0])==null?void 0:s[0])==null?void 0:a[0].length)||2,i=zz(t,0,e,r);return{type:"MultiPolygon",flatCoordinates:t,ends:i,layout:Hg(r)}}function Nne(n){var s,a;const e=n.coordinates,t=[],r=(a=(s=e[0])==null?void 0:s[0])==null?void 0:a.length,i=u_(t,0,e,r);return{type:"Polygon",flatCoordinates:t,ends:i,layout:Hg(r)}}function hB(n,e){n=Zx(n,!0,e);const t=n.getType();let r;switch(t){case"Point":{r=$ne(n);break}case"LineString":{r=Gne(n);break}case"Polygon":{r=Vne(n,e);break}case"MultiPoint":{r=qne(n);break}case"MultiLineString":{r=Qne(n);break}case"MultiPolygon":{r=Yne(n,e);break}case"GeometryCollection":{r=Wne(n,e);break}case"Circle":{r={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+t)}return r}function Wne(n,e){return e=Object.assign({},e),delete e.featureProjection,{type:"GeometryCollection",geometries:n.getGeometriesArray().map(function(r){return hB(r,e)})}}function Gne(n,e){return{type:"LineString",coordinates:n.getCoordinates()}}function Qne(n,e){return{type:"MultiLineString",coordinates:n.getCoordinates()}}function qne(n,e){return{type:"MultiPoint",coordinates:n.getCoordinates()}}function Yne(n,e){let t;return e&&(t=e.rightHanded),{type:"MultiPolygon",coordinates:n.getCoordinates(t)}}function $ne(n,e){return{type:"Point",coordinates:n.getCoordinates()}}function Vne(n,e){let t;return e&&(t=e.rightHanded),{type:"Polygon",coordinates:n.getCoordinates(t)}}class Hne extends W8{constructor(e){super(e),this.image=null}getImage(){return this.image?this.image.getImage():null}prepareFrame(e){const t=e.layerStatesArray[e.layerIndex],r=e.pixelRatio,i=e.viewState,s=i.resolution,a=this.getLayer().getSource(),o=e.viewHints;let d=e.extent;if(t.extent!==void 0&&(d=_p(d,Jp(t.extent,i.projection))),!o[ql.ANIMATING]&&!o[ql.INTERACTING]&&!$g(d))if(a){const g=i.projection,b=a.getImage(d,s,r,g);b&&(this.loadImage(b)?this.image=b:b.getState()===di.EMPTY&&(this.image=null))}else this.image=null;return!!this.image}getData(e){const t=this.frameState;if(!t)return null;const r=this.getLayer(),i=wA(t.pixelToCoordinateTransform,e.slice()),s=r.getExtent();if(s&&!zg(s,i))return null;const a=this.image.getExtent(),o=this.image.getImage(),d=Ds(a),g=Math.floor(o.width*((i[0]-a[0])/d));if(g<0||g>=o.width)return null;const b=sA(a),E=Math.floor(o.height*((a[3]-i[1])/b));return E<0||E>=o.height?null:this.getImageData(o,g,E)}renderFrame(e,t){const r=this.image,i=r.getExtent(),s=r.getResolution(),[a,o]=Array.isArray(s)?s:[s,s],d=r.getPixelRatio(),g=e.layerStatesArray[e.layerIndex],b=e.pixelRatio,E=e.viewState,S=E.center,I=E.resolution,P=b*a/(I*d),z=b*o/(I*d);this.prepareContainer(e,t);const j=this.context.canvas.width,q=this.context.canvas.height,Y=this.getRenderContext(e);let ie=!1,te=!0;if(g.extent){const he=Jp(g.extent,E.projection);te=Du(he,e.extent),ie=te&&!Xp(he,e.extent),ie&&this.clipUnrotated(Y,e,he)}const V=r.getImage(),ne=sm(this.tempTransform,j/2,q/2,P,z,0,d*(i[0]-S[0])/a,d*(S[1]-i[3])/o);this.renderedResolution=o*b/d;const G=V.width*ne[0],oe=V.height*ne[3];if(this.getLayer().getSource().getInterpolate()||(Y.imageSmoothingEnabled=!1),this.preRender(Y,e),te&&G>=.5&&oe>=.5){const he=ne[4],pe=ne[5],Ee=g.opacity;Ee!==1&&(Y.save(),Y.globalAlpha=Ee),Y.drawImage(V,0,0,+V.width,+V.height,he,pe,G,oe),Ee!==1&&Y.restore()}return this.postRender(this.context,e),ie&&Y.restore(),Y.imageSmoothingEnabled=!0,this.container}}class Zne extends Xy{constructor(e){e=e||{},super(e)}}class Ej extends Zne{constructor(e){super(e)}createRenderer(){return new Hne(this)}getData(e){return super.getData(e)}}const fB=65536*65536,ck=1/fB,Xne=12,dk=typeof TextDecoder>"u"?null:new TextDecoder("utf-8"),o5=0,yb=1,Ov=2,vb=5;class Jne{constructor(e=new Uint8Array(16)){this.buf=ArrayBuffer.isView(e)?e:new Uint8Array(e),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(e,t,r=this.length){for(;this.pos<r;){const i=this.readVarint(),s=i>>3,a=this.pos;this.type=i&7,e(s,t,this),this.pos===a&&this.skip(i)}return t}readMessage(e,t){return this.readFields(e,t,this.readVarint()+this.pos)}readFixed32(){const e=this.dataView.getUint32(this.pos,!0);return this.pos+=4,e}readSFixed32(){const e=this.dataView.getInt32(this.pos,!0);return this.pos+=4,e}readFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*fB;return this.pos+=8,e}readSFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*fB;return this.pos+=8,e}readFloat(){const e=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,e}readDouble(){const e=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,e}readVarint(e){const t=this.buf;let r,i;return i=t[this.pos++],r=i&127,i<128||(i=t[this.pos++],r|=(i&127)<<7,i<128)||(i=t[this.pos++],r|=(i&127)<<14,i<128)||(i=t[this.pos++],r|=(i&127)<<21,i<128)?r:(i=t[this.pos],r|=(i&15)<<28,ere(r,e,this))}readVarint64(){return this.readVarint(!0)}readSVarint(){const e=this.readVarint();return e%2===1?(e+1)/-2:e/2}readBoolean(){return!!this.readVarint()}readString(){const e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=Xne&&dk?dk.decode(this.buf.subarray(t,e)):hre(this.buf,t,e)}readBytes(){const e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t}readPackedVarint(e=[],t){const r=this.readPackedEnd();for(;this.pos<r;)e.push(this.readVarint(t));return e}readPackedSVarint(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSVarint());return e}readPackedBoolean(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readBoolean());return e}readPackedFloat(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFloat());return e}readPackedDouble(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readDouble());return e}readPackedFixed32(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFixed32());return e}readPackedSFixed32(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSFixed32());return e}readPackedFixed64(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFixed64());return e}readPackedSFixed64(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSFixed64());return e}readPackedEnd(){return this.type===Ov?this.readVarint()+this.pos:this.pos+1}skip(e){const t=e&7;if(t===o5)for(;this.buf[this.pos++]>127;);else if(t===Ov)this.pos=this.readVarint()+this.pos;else if(t===vb)this.pos+=4;else if(t===yb)this.pos+=8;else throw new Error(`Unimplemented type: ${t}`)}writeTag(e,t){this.writeVarint(e<<3|t)}realloc(e){let t=this.length||16;for(;t<this.pos+e;)t*=2;if(t!==this.length){const r=new Uint8Array(t);r.set(this.buf),this.buf=r,this.dataView=new DataView(r.buffer),this.length=t}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeSFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,e&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*ck),!0),this.pos+=8}writeSFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,e&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*ck),!0),this.pos+=8}writeVarint(e){if(e=+e||0,e>268435455||e<0){tre(e,this);return}this.realloc(4),this.buf[this.pos++]=e&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=e>>>7&127)))}writeSVarint(e){this.writeVarint(e<0?-e*2-1:e*2)}writeBoolean(e){this.writeVarint(+e)}writeString(e){e=String(e),this.realloc(e.length*4),this.pos++;const t=this.pos;this.pos=fre(this.buf,e,this.pos);const r=this.pos-t;r>=128&&hk(t,r,this),this.pos=t-1,this.writeVarint(r),this.pos+=r}writeFloat(e){this.realloc(4),this.dataView.setFloat32(this.pos,e,!0),this.pos+=4}writeDouble(e){this.realloc(8),this.dataView.setFloat64(this.pos,e,!0),this.pos+=8}writeBytes(e){const t=e.length;this.writeVarint(t),this.realloc(t);for(let r=0;r<t;r++)this.buf[this.pos++]=e[r]}writeRawMessage(e,t){this.pos++;const r=this.pos;e(t,this);const i=this.pos-r;i>=128&&hk(r,i,this),this.pos=r-1,this.writeVarint(i),this.pos+=i}writeMessage(e,t,r){this.writeTag(e,Ov),this.writeRawMessage(t,r)}writePackedVarint(e,t){t.length&&this.writeMessage(e,ire,t)}writePackedSVarint(e,t){t.length&&this.writeMessage(e,ore,t)}writePackedBoolean(e,t){t.length&&this.writeMessage(e,lre,t)}writePackedFloat(e,t){t.length&&this.writeMessage(e,sre,t)}writePackedDouble(e,t){t.length&&this.writeMessage(e,are,t)}writePackedFixed32(e,t){t.length&&this.writeMessage(e,ure,t)}writePackedSFixed32(e,t){t.length&&this.writeMessage(e,Are,t)}writePackedFixed64(e,t){t.length&&this.writeMessage(e,cre,t)}writePackedSFixed64(e,t){t.length&&this.writeMessage(e,dre,t)}writeBytesField(e,t){this.writeTag(e,Ov),this.writeBytes(t)}writeFixed32Field(e,t){this.writeTag(e,vb),this.writeFixed32(t)}writeSFixed32Field(e,t){this.writeTag(e,vb),this.writeSFixed32(t)}writeFixed64Field(e,t){this.writeTag(e,yb),this.writeFixed64(t)}writeSFixed64Field(e,t){this.writeTag(e,yb),this.writeSFixed64(t)}writeVarintField(e,t){this.writeTag(e,o5),this.writeVarint(t)}writeSVarintField(e,t){this.writeTag(e,o5),this.writeSVarint(t)}writeStringField(e,t){this.writeTag(e,Ov),this.writeString(t)}writeFloatField(e,t){this.writeTag(e,vb),this.writeFloat(t)}writeDoubleField(e,t){this.writeTag(e,yb),this.writeDouble(t)}writeBooleanField(e,t){this.writeVarintField(e,+t)}}function ere(n,e,t){const r=t.buf;let i,s;if(s=r[t.pos++],i=(s&112)>>4,s<128||(s=r[t.pos++],i|=(s&127)<<3,s<128)||(s=r[t.pos++],i|=(s&127)<<10,s<128)||(s=r[t.pos++],i|=(s&127)<<17,s<128)||(s=r[t.pos++],i|=(s&127)<<24,s<128)||(s=r[t.pos++],i|=(s&1)<<31,s<128))return S1(n,i,e);throw new Error("Expected varint not more than 10 bytes")}function S1(n,e,t){return t?e*4294967296+(n>>>0):(e>>>0)*4294967296+(n>>>0)}function tre(n,e){let t,r;if(n>=0?(t=n%4294967296|0,r=n/4294967296|0):(t=~(-n%4294967296),r=~(-n/4294967296),t^4294967295?t=t+1|0:(t=0,r=r+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),nre(t,r,e),rre(r,e)}function nre(n,e,t){t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos]=n&127}function rre(n,e){const t=(n&7)<<4;e.buf[e.pos++]|=t|((n>>>=3)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127)))))}function hk(n,e,t){const r=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(Math.LN2*7));t.realloc(r);for(let i=t.pos-1;i>=n;i--)t.buf[i+r]=t.buf[i]}function ire(n,e){for(let t=0;t<n.length;t++)e.writeVarint(n[t])}function ore(n,e){for(let t=0;t<n.length;t++)e.writeSVarint(n[t])}function sre(n,e){for(let t=0;t<n.length;t++)e.writeFloat(n[t])}function are(n,e){for(let t=0;t<n.length;t++)e.writeDouble(n[t])}function lre(n,e){for(let t=0;t<n.length;t++)e.writeBoolean(n[t])}function ure(n,e){for(let t=0;t<n.length;t++)e.writeFixed32(n[t])}function Are(n,e){for(let t=0;t<n.length;t++)e.writeSFixed32(n[t])}function cre(n,e){for(let t=0;t<n.length;t++)e.writeFixed64(n[t])}function dre(n,e){for(let t=0;t<n.length;t++)e.writeSFixed64(n[t])}function hre(n,e,t){let r="",i=e;for(;i<t;){const s=n[i];let a=null,o=s>239?4:s>223?3:s>191?2:1;if(i+o>t)break;let d,g,b;o===1?s<128&&(a=s):o===2?(d=n[i+1],(d&192)===128&&(a=(s&31)<<6|d&63,a<=127&&(a=null))):o===3?(d=n[i+1],g=n[i+2],(d&192)===128&&(g&192)===128&&(a=(s&15)<<12|(d&63)<<6|g&63,(a<=2047||a>=55296&&a<=57343)&&(a=null))):o===4&&(d=n[i+1],g=n[i+2],b=n[i+3],(d&192)===128&&(g&192)===128&&(b&192)===128&&(a=(s&15)<<18|(d&63)<<12|(g&63)<<6|b&63,(a<=65535||a>=1114112)&&(a=null))),a===null?(a=65533,o=1):a>65535&&(a-=65536,r+=String.fromCharCode(a>>>10&1023|55296),a=56320|a&1023),r+=String.fromCharCode(a),i+=o}return r}function fre(n,e,t){for(let r=0,i,s;r<e.length;r++){if(i=e.charCodeAt(r),i>55295&&i<57344)if(s)if(i<56320){n[t++]=239,n[t++]=191,n[t++]=189,s=i;continue}else i=s-55296<<10|i-56320|65536,s=null;else{i>56319||r+1===e.length?(n[t++]=239,n[t++]=191,n[t++]=189):s=i;continue}else s&&(n[t++]=239,n[t++]=191,n[t++]=189,s=null);i<128?n[t++]=i:(i<2048?n[t++]=i>>6|192:(i<65536?n[t++]=i>>12|224:(n[t++]=i>>18|240,n[t++]=i>>12&63|128),n[t++]=i>>6&63|128),n[t++]=i&63|128)}return t}class pre extends Mj{constructor(e){super(),e=e||{},this.dataProjection=new Nx({code:"",units:"tile-pixels"}),this.featureClass=e.featureClass?e.featureClass:ud,this.geometryName_=e.geometryName,this.layerName_=e.layerName?e.layerName:"layer",this.layers_=e.layers?e.layers:null,this.idProperty_=e.idProperty,this.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"]}readRawGeometry_(e,t,r,i){e.pos=t.geometry;const s=e.readVarint()+e.pos;let a=1,o=0,d=0,g=0,b=0,E=0;for(;e.pos<s;){if(!o){const S=e.readVarint();a=S&7,o=S>>3}if(o--,a===1||a===2)d+=e.readSVarint(),g+=e.readSVarint(),a===1&&b>E&&(i.push(b),E=b),r.push(d,g),b+=2;else if(a===7)b>E&&(r.push(r[E],r[E+1]),b+=2);else throw new Error("Invalid command found in the PBF")}b>E&&(i.push(b),E=b)}createFeature_(e,t,r){const i=t.type;if(i===0)return null;let s;const a=t.properties;let o;this.idProperty_?(o=a[this.idProperty_],delete a[this.idProperty_]):o=t.id,a[this.layerName_]=t.layer.name;const d=[],g=[];this.readRawGeometry_(e,t,d,g);const b=Cre(i,g.length);if(this.featureClass===ud)s=new this.featureClass(b,d,g,2,a,o),s.transform(r.dataProjection);else{let E;if(b=="Polygon"){const P=Ez(d,g);E=P.length>1?new DC(d,"XY",P):new Gm(d,"XY",g)}else E=b==="Point"?new Ng(d,"XY"):b==="LineString"?new jg(d,"XY"):b==="MultiPoint"?new A_(d,"XY"):b==="MultiLineString"?new KC(d,"XY",g):null;const S=this.featureClass;s=new S,this.geometryName_&&s.setGeometryName(this.geometryName_);const I=Zx(E,!1,r);s.setGeometry(I),o!==void 0&&s.setId(o),s.setProperties(a,!0)}return s}getType(){return"arraybuffer"}readFeatures(e,t){const r=this.layers_;t=this.adaptOptions(t);const i=wa(t.dataProjection);i.setWorldExtent(t.extent),t.dataProjection=i;const s=new Jne(e),a=s.readFields(mre,{}),o=[];for(const d in a){if(r&&!r.includes(d))continue;const g=a[d],b=g?[0,0,g.extent,g.extent]:null;i.setExtent(b);for(let E=0,S=g.length;E<S;++E){const I=vre(s,g,E),P=this.createFeature_(s,I,t);P!==null&&o.push(P)}}return o}readProjection(e){return this.dataProjection}setLayers(e){this.layers_=e}}function mre(n,e,t){if(n===3){const r={keys:[],values:[],features:[]},i=t.readVarint()+t.pos;t.readFields(gre,r,i),r.length=r.features.length,r.length&&(e[r.name]=r)}}function gre(n,e,t){if(n===15)e.version=t.readVarint();else if(n===1)e.name=t.readString();else if(n===5)e.extent=t.readVarint();else if(n===2)e.features.push(t.pos);else if(n===3)e.keys.push(t.readString());else if(n===4){let r=null;const i=t.readVarint()+t.pos;for(;t.pos<i;)n=t.readVarint()>>3,r=n===1?t.readString():n===2?t.readFloat():n===3?t.readDouble():n===4?t.readVarint64():n===5?t.readVarint():n===6?t.readSVarint():n===7?t.readBoolean():null;e.values.push(r)}}function yre(n,e,t){if(n==1)e.id=t.readVarint();else if(n==2){const r=t.readVarint()+t.pos;for(;t.pos<r;){const i=e.layer.keys[t.readVarint()],s=e.layer.values[t.readVarint()];e.properties[i]=s}}else n==3?e.type=t.readVarint():n==4&&(e.geometry=t.pos)}function vre(n,e,t){n.pos=e.features[t];const r=n.readVarint()+n.pos,i={layer:e,type:0,properties:{}};return n.readFields(yre,i,r),i}function Cre(n,e){let t;return n===1?t=e===1?"Point":"MultiPoint":n===2?t=e===1?"LineString":"MultiLineString":n===3&&(t="Polygon"),t}function pB(n){return n instanceof Image||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageBitmap?n:null}const _re=new Error("disposed"),bre=[256,256];class fk extends h_{constructor(e){const t=Nr.IDLE;super(e.tileCoord,t,{transition:e.transition,interpolate:e.interpolate}),this.loader_=e.loader,this.data_=null,this.error_=null,this.size_=e.size||null,this.controller_=e.controller||null}getSize(){if(this.size_)return this.size_;const e=pB(this.data_);return e?[e.width,e.height]:bre}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==Nr.IDLE&&this.state!==Nr.ERROR)return;this.state=Nr.LOADING,this.changed();const e=this;this.loader_().then(function(t){e.data_=t,e.state=Nr.LOADED,e.changed()}).catch(function(t){e.error_=t,e.state=Nr.ERROR,e.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(_re),this.controller_=null),super.disposeInternal()}}let s5;const Cy=[];function pk(n,e,t,r,i){n.beginPath(),n.moveTo(0,0),n.lineTo(e,t),n.lineTo(r,i),n.closePath(),n.save(),n.clip(),n.fillRect(0,0,Math.max(e,r)+1,Math.max(t,i)),n.restore()}function a5(n,e){return Math.abs(n[e*4]-210)>2||Math.abs(n[e*4+3]-.75*255)>2}function xre(){if(s5===void 0){const n=Ru(6,6,Cy);n.globalCompositeOperation="lighter",n.fillStyle="rgba(210, 0, 0, 0.75)",pk(n,4,5,4,0),pk(n,4,5,0,5);const e=n.getImageData(0,0,3,3).data;s5=a5(e,0)||a5(e,4)||a5(e,8),t_(n),Cy.push(n.canvas)}return s5}function mB(n,e,t,r){const i=Qx(t,e,n);let s=iB(e,r,t);const a=e.getMetersPerUnit();a!==void 0&&(s*=a);const o=n.getMetersPerUnit();o!==void 0&&(s/=o);const d=n.getExtent();if(!d||zg(d,i)){const g=iB(n,s,i)/s;isFinite(g)&&g>0&&(s/=g)}return s}function wre(n,e,t,r){const i=Gf(t);let s=mB(n,e,i,r);return(!isFinite(s)||s<=0)&&Cz(t,function(a){return s=mB(n,e,a,r),isFinite(s)&&s>0}),s}function Bj(n,e,t,r,i,s,a,o,d,g,b,E,S,I){const P=Ru(Math.round(t*n),Math.round(t*e),Cy);if(E||(P.imageSmoothingEnabled=!1),d.length===0)return P.canvas;P.scale(t,t);function z(V){return Math.round(V*t)/t}P.globalCompositeOperation="lighter";const j=Wf();d.forEach(function(V,ne,G){yz(j,V.extent)});let q;const Y=t/r,ie=(E?1:1+Math.pow(2,-24))/Y;if(!S||d.length!==1||g!==0){if(q=Ru(Math.round(Ds(j)*Y),Math.round(sA(j)*Y),Cy),E||(q.imageSmoothingEnabled=!1),i&&I){const V=(i[0]-j[0])*Y,ne=-(i[3]-j[3])*Y,G=Ds(i)*Y,oe=sA(i)*Y;q.rect(V,ne,G,oe),q.clip()}d.forEach(function(V,ne,G){if(V.image.width>0&&V.image.height>0){if(V.clipExtent){q.save();const me=(V.clipExtent[0]-j[0])*Y,Se=-(V.clipExtent[3]-j[3])*Y,De=Ds(V.clipExtent)*Y,be=sA(V.clipExtent)*Y;q.rect(E?me:Math.round(me),E?Se:Math.round(Se),E?De:Math.round(me+De)-Math.round(me),E?be:Math.round(Se+be)-Math.round(Se)),q.clip()}const oe=(V.extent[0]-j[0])*Y,he=-(V.extent[3]-j[3])*Y,pe=Ds(V.extent)*Y,Ee=sA(V.extent)*Y;q.drawImage(V.image,g,g,V.image.width-2*g,V.image.height-2*g,E?oe:Math.round(oe),E?he:Math.round(he),E?pe:Math.round(oe+pe)-Math.round(oe),E?Ee:Math.round(he+Ee)-Math.round(he)),V.clipExtent&&q.restore()}})}const te=Qm(a);return o.getTriangles().forEach(function(V,ne,G){const oe=V.source,he=V.target;let pe=oe[0][0],Ee=oe[0][1],me=oe[1][0],Se=oe[1][1],De=oe[2][0],be=oe[2][1];const at=z((he[0][0]-te[0])/s),Ze=z(-(he[0][1]-te[1])/s),Je=z((he[1][0]-te[0])/s),We=z(-(he[1][1]-te[1])/s),Me=z((he[2][0]-te[0])/s),Fe=z(-(he[2][1]-te[1])/s),He=pe,bt=Ee;pe=0,Ee=0,me-=He,Se-=bt,De-=He,be-=bt;const Yt=[[me,Se,0,0,Je-at],[De,be,0,0,Me-at],[0,0,me,Se,We-Ze],[0,0,De,be,Fe-Ze]],gt=KX(Yt);if(!gt)return;if(P.save(),P.beginPath(),xre()||!E){P.moveTo(Je,We);const Kt=4,Ue=at-Je,Pe=Ze-We;for(let Be=0;Be<Kt;Be++)P.lineTo(Je+z((Be+1)*Ue/Kt),We+z(Be*Pe/(Kt-1))),Be!=Kt-1&&P.lineTo(Je+z((Be+1)*Ue/Kt),We+z((Be+1)*Pe/(Kt-1)));P.lineTo(Me,Fe)}else P.moveTo(Je,We),P.lineTo(at,Ze),P.lineTo(Me,Fe);P.clip(),P.transform(gt[0],gt[2],gt[1],gt[3],at,Ze),P.translate(j[0]-He,j[3]-bt);let Lt;if(q)Lt=q.canvas,P.scale(ie,-ie);else{const Kt=d[0],Ue=Kt.extent;Lt=Kt.image,P.scale(Ds(Ue)/Lt.width,-sA(Ue)/Lt.height)}P.drawImage(Lt,0,0),P.restore()}),q&&(t_(q),Cy.push(q.canvas)),b&&(P.save(),P.globalCompositeOperation="source-over",P.strokeStyle="black",P.lineWidth=1,o.getTriangles().forEach(function(V,ne,G){const oe=V.target,he=(oe[0][0]-te[0])/s,pe=-(oe[0][1]-te[1])/s,Ee=(oe[1][0]-te[0])/s,me=-(oe[1][1]-te[1])/s,Se=(oe[2][0]-te[0])/s,De=-(oe[2][1]-te[1])/s;P.beginPath(),P.moveTo(Ee,me),P.lineTo(he,pe),P.lineTo(Se,De),P.closePath(),P.stroke()}),P.restore()),P.canvas}const Mre=10,mk=.25;class Oj{constructor(e,t,r,i,s,a,o){this.sourceProj_=e,this.targetProj_=t;let d={};const g=o?tee(ie=>wA(o,Qx(ie,this.targetProj_,this.sourceProj_))):kC(this.targetProj_,this.sourceProj_);this.transformInv_=function(ie){const te=ie[0]+"/"+ie[1];return d[te]||(d[te]=g(ie)),d[te]},this.maxSourceExtent_=i,this.errorThresholdSquared_=s*s,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!i&&!!this.sourceProj_.getExtent()&&Ds(i)>=Ds(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Ds(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Ds(this.targetProj_.getExtent()):null;const b=Qm(r),E=zx(r),S=Ux(r),I=Lx(r),P=this.transformInv_(b),z=this.transformInv_(E),j=this.transformInv_(S),q=this.transformInv_(I),Y=Mre+(a?Math.max(0,Math.ceil(Math.log2(X6(r)/(a*a*256*256)))):0);if(this.addQuad_(b,E,S,I,P,z,j,q,Y),this.wrapsXInSource_){let ie=1/0;this.triangles_.forEach(function(te,V,ne){ie=Math.min(ie,te.source[0][0],te.source[1][0],te.source[2][0])}),this.triangles_.forEach(te=>{if(Math.max(te.source[0][0],te.source[1][0],te.source[2][0])-ie>this.sourceWorldWidth_/2){const V=[[te.source[0][0],te.source[0][1]],[te.source[1][0],te.source[1][1]],[te.source[2][0],te.source[2][1]]];V[0][0]-ie>this.sourceWorldWidth_/2&&(V[0][0]-=this.sourceWorldWidth_),V[1][0]-ie>this.sourceWorldWidth_/2&&(V[1][0]-=this.sourceWorldWidth_),V[2][0]-ie>this.sourceWorldWidth_/2&&(V[2][0]-=this.sourceWorldWidth_);const ne=Math.min(V[0][0],V[1][0],V[2][0]);Math.max(V[0][0],V[1][0],V[2][0])-ne<this.sourceWorldWidth_/2&&(te.source=V)}})}d={}}addTriangle_(e,t,r,i,s,a){this.triangles_.push({source:[i,s,a],target:[e,t,r]})}addQuad_(e,t,r,i,s,a,o,d,g){const b=H6([s,a,o,d]),E=this.sourceWorldWidth_?Ds(b)/this.sourceWorldWidth_:null,S=this.sourceWorldWidth_,I=this.sourceProj_.canWrapX()&&E>.5&&E<1;let P=!1;if(g>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const j=H6([e,t,r,i]);P=Ds(j)/this.targetWorldWidth_>mk||P}!I&&this.sourceProj_.isGlobal()&&E&&(P=E>mk||P)}if(!P&&this.maxSourceExtent_&&isFinite(b[0])&&isFinite(b[1])&&isFinite(b[2])&&isFinite(b[3])&&!Du(b,this.maxSourceExtent_))return;let z=0;if(!P&&(!isFinite(s[0])||!isFinite(s[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(d[0])||!isFinite(d[1]))){if(g>0)P=!0;else if(z=(!isFinite(s[0])||!isFinite(s[1])?8:0)+(!isFinite(a[0])||!isFinite(a[1])?4:0)+(!isFinite(o[0])||!isFinite(o[1])?2:0)+(!isFinite(d[0])||!isFinite(d[1])?1:0),z!=1&&z!=2&&z!=4&&z!=8)return}if(g>0){if(!P){const j=[(e[0]+r[0])/2,(e[1]+r[1])/2],q=this.transformInv_(j);let Y;I?Y=(Kg(s[0],S)+Kg(o[0],S))/2-Kg(q[0],S):Y=(s[0]+o[0])/2-q[0];const ie=(s[1]+o[1])/2-q[1];P=Y*Y+ie*ie>this.errorThresholdSquared_}if(P){if(Math.abs(e[0]-r[0])<=Math.abs(e[1]-r[1])){const j=[(t[0]+r[0])/2,(t[1]+r[1])/2],q=this.transformInv_(j),Y=[(i[0]+e[0])/2,(i[1]+e[1])/2],ie=this.transformInv_(Y);this.addQuad_(e,t,j,Y,s,a,q,ie,g-1),this.addQuad_(Y,j,r,i,ie,q,o,d,g-1)}else{const j=[(e[0]+t[0])/2,(e[1]+t[1])/2],q=this.transformInv_(j),Y=[(r[0]+i[0])/2,(r[1]+i[1])/2],ie=this.transformInv_(Y);this.addQuad_(e,j,Y,i,s,q,ie,d,g-1),this.addQuad_(j,t,r,Y,q,a,o,ie,g-1)}return}}if(I){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}z&11||this.addTriangle_(e,r,i,s,o,d),z&14||this.addTriangle_(e,r,t,s,o,a),z&&(z&13||this.addTriangle_(t,i,e,a,d,s),z&7||this.addTriangle_(t,i,r,a,d,o))}calculateSourceExtent(){const e=Wf();return this.triangles_.forEach(function(t,r,i){const s=t.source;lC(e,s[0]),lC(e,s[1]),lC(e,s[2])}),e}getTriangles(){return this.triangles_}}const Ij=.5;class kj extends h_{constructor(e,t,r,i,s,a,o,d,g,b,E,S){super(s,Nr.IDLE,S),this.renderEdges_=E!==void 0?E:!1,this.pixelRatio_=o,this.gutter_=d,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=i,this.wrappedTileCoord_=a||s,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=e.canWrapX()?e.getExtent():void 0;const I=i.getTileCoordExtent(this.wrappedTileCoord_),P=this.targetTileGrid_.getExtent();let z=this.sourceTileGrid_.getExtent();const j=P?_p(I,P):I;if(X6(j)===0){this.state=Nr.EMPTY;return}const q=e.getExtent();q&&(z?z=_p(z,q):z=q);const Y=i.getResolution(this.wrappedTileCoord_[0]),ie=wre(e,r,j,Y);if(!isFinite(ie)||ie<=0){this.state=Nr.EMPTY;return}const te=b!==void 0?b:Ij;if(this.triangulation_=new Oj(e,r,j,z,ie*te,Y),this.triangulation_.getTriangles().length===0){this.state=Nr.EMPTY;return}this.sourceZ_=t.getZForResolution(ie);let V=this.triangulation_.calculateSourceExtent();if(z&&(e.canWrapX()?(V[1]=MA(V[1],z[1],z[3]),V[3]=MA(V[3],z[1],z[3])):V=_p(V,z)),!X6(V))this.state=Nr.EMPTY;else{let ne=0,G=0;e.canWrapX()&&(ne=Ds(q),G=Math.floor((V[0]-q[0])/ne)),xz(V.slice(),e,!0).forEach(he=>{const pe=t.getTileRangeForExtentAndZ(he,this.sourceZ_);for(let Ee=pe.minX;Ee<=pe.maxX;Ee++)for(let me=pe.minY;me<=pe.maxY;me++){const Se=g(this.sourceZ_,Ee,me,o);if(Se){const De=G*ne;this.sourceTiles_.push({tile:Se,offset:De})}}++G}),this.sourceTiles_.length===0&&(this.state=Nr.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(t=>{var i;const r=t.tile;if(r&&r.getState()==Nr.LOADED){const s=this.sourceTileGrid_.getTileCoordExtent(r.tileCoord);s[0]+=t.offset,s[2]+=t.offset;const a=(i=this.clipExtent_)==null?void 0:i.slice();a&&(a[0]+=t.offset,a[2]+=t.offset),e.push({extent:s,clipExtent:a,image:r.getImage()})}}),this.sourceTiles_.length=0,e.length===0)this.state=Nr.ERROR;else{const t=this.wrappedTileCoord_[0],r=this.targetTileGrid_.getTileSize(t),i=typeof r=="number"?r:r[0],s=typeof r=="number"?r:r[1],a=this.targetTileGrid_.getResolution(t),o=this.sourceTileGrid_.getResolution(this.sourceZ_),d=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=Bj(i,s,this.pixelRatio_,o,this.sourceTileGrid_.getExtent(),a,d,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=Nr.LOADED}this.changed()}load(){if(this.state==Nr.IDLE){this.state=Nr.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:t})=>{const r=t.getState();if(r==Nr.IDLE||r==Nr.LOADING){e++;const i=Ks(t,lo.CHANGE,s=>{const a=t.getState();(a==Nr.LOADED||a==Nr.ERROR||a==Nr.EMPTY)&&(ul(i),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(i)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t},r,i){t.getState()==Nr.IDLE&&t.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(ul),this.sourcesListenerKeys_=null}release(){this.canvas_&&(t_(this.canvas_.getContext("2d")),Cy.push(this.canvas_),this.canvas_=null),super.release()}}class Sre{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}deleteOldest(){const e=this.pop();e instanceof n_&&e.dispose()}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.deleteOldest()}clear(){for(;this.oldest_;)this.deleteOldest()}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){const r=this.entries_[e];return Xs(r!==void 0,"Tried to get a value for a key that does not exist in the cache"),r===this.newest_||(r===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(r.newer.older=r.older,r.older.newer=r.newer),r.newer=null,r.older=this.newest_,this.newest_.newer=r,this.newest_=r),r.value_}remove(e){const t=this.entries_[e];return Xs(t!==void 0,"Tried to get a value for a key that does not exist in the cache"),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let t=0,r;for(r=this.newest_;r;r=r.older)e[t++]=r.key_;return e}getValues(){const e=new Array(this.count_);let t=0,r;for(r=this.newest_;r;r=r.older)e[t++]=r.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){var t;return(t=this.entries_[e])==null?void 0:t.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){Xs(!(e in this.entries_),"Tried to set a value for a key that is used already");const r={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=r:this.oldest_=r,this.newest_=r,this.entries_[e]=r,++this.count_}setSize(e){this.highWaterMark=e}}function U2(n,e,t,r){return r!==void 0?(r[0]=n,r[1]=e,r[2]=t,r):[n,e,t]}function Ere(n,e,t){return n+"/"+e+"/"+t}function Bre(n){return Ore(n[0],n[1],n[2])}function Ore(n,e,t){return(e<<n)+t}function Ire(n,e){const t=n[0],r=n[1],i=n[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;const s=e.getFullTileRange(t);return s?s.containsXY(r,i):!0}function l5(n,e,t,r){return`${n},${Ere(e,t,r)}`}function u5(n,e,t){if(!(t in n))return n[t]=new Set([e]),!0;const r=n[t],i=r.has(e);return i||r.add(e),!i}function kre(n,e,t){const r=n[t];return r?r.delete(e):!1}function gk(n,e){const t=n.layerStatesArray[n.layerIndex];t.extent&&(e=_p(e,Jp(t.extent,n.viewState.projection)));const r=t.layer.getRenderSource();if(!r.getWrapX()){const i=r.getTileGridForProjection(n.viewState.projection).getExtent();i&&(e=_p(e,i))}return e}class Tj extends W8{constructor(e,t){super(e),t=t||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision_,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=Wf(),this.tempTileRange_=new rO(0,0,0,0),this.tempTileCoord_=U2(0,0,0);const r=t.cacheSize!==void 0?t.cacheSize:512;this.tileCache_=new Sre(r),this.maxStaleKeys=r*.5}getTileCache(){return this.tileCache_}getOrCreateTile(e,t,r,i){const s=this.tileCache_,o=this.getLayer().getSource(),d=l5(o.getKey(),e,t,r);let g;if(s.containsKey(d))g=s.get(d);else{if(g=o.getTile(e,t,r,i.pixelRatio,i.viewState.projection),!g)return null;s.set(d,g)}return g}getTile(e,t,r,i){const s=this.getOrCreateTile(e,t,r,i);return s||null}getData(e){const t=this.frameState;if(!t)return null;const r=this.getLayer(),i=wA(t.pixelToCoordinateTransform,e.slice()),s=r.getExtent();if(s&&!zg(s,i))return null;const a=t.viewState,o=r.getRenderSource(),d=o.getTileGridForProjection(a.projection),g=o.getTilePixelRatio(t.pixelRatio);for(let b=d.getZForResolution(a.resolution);b>=d.getMinZoom();--b){const E=d.getTileCoordForCoordAndZ(i,b),S=this.getTile(b,E[1],E[2],t);if(!S||S.getState()!==Nr.LOADED)continue;const I=d.getOrigin(b),P=Ad(d.getTileSize(b)),z=d.getResolution(b);let j;if(S instanceof mj||S instanceof kj)j=S.getImage();else if(S instanceof fk){if(j=pB(S.getData()),!j)continue}else continue;const q=Math.floor(g*((i[0]-I[0])/z-E[1]*P[0])),Y=Math.floor(g*((I[1]-i[1])/z-E[2]*P[1])),ie=Math.round(g*o.getGutterForProjection(a.projection));return this.getImageData(j,q+ie,Y+ie)}return null}prepareFrame(e){this.renderedProjection?e.viewState.projection!==this.renderedProjection&&(this.tileCache_.clear(),this.renderedProjection=e.viewState.projection):this.renderedProjection=e.viewState.projection;const t=this.getLayer().getSource();if(!t)return!1;const r=t.getRevision();return this.renderedRevision_?this.renderedRevision_!==r&&(this.renderedRevision_=r,this.renderedSourceKey_===t.getKey()&&this.tileCache_.clear()):this.renderedRevision_=r,!0}enqueueTiles(e,t,r,i,s){const a=e.viewState,o=this.getLayer(),d=o.getRenderSource(),g=d.getTileGridForProjection(a.projection),b=Go(d);b in e.wantedTiles||(e.wantedTiles[b]={});const E=e.wantedTiles[b],S=o.getMapInternal(),I=Math.max(r-s,g.getMinZoom(),g.getZForResolution(Math.min(o.getMaxResolution(),S?S.getView().getResolutionForZoom(Math.max(o.getMinZoom(),0)):g.getResolution(0)),d.zDirection)),P=a.rotation,z=P?_z(a.center,a.resolution,P,e.size):void 0;for(let j=r;j>=I;--j){const q=g.getTileRangeForExtentAndZ(t,j,this.tempTileRange_),Y=g.getResolution(j);for(let ie=q.minX;ie<=q.maxX;++ie)for(let te=q.minY;te<=q.maxY;++te){if(P&&!g.tileCoordIntersectsViewport([j,ie,te],z))continue;const V=this.getTile(j,ie,te,e);if(!V||!u5(i,V,j))continue;const G=V.getKey();if(E[G]=!0,V.getState()===Nr.IDLE&&!e.tileQueue.isKeyQueued(G)){const oe=U2(j,ie,te,this.tempTileCoord_);e.tileQueue.enqueue([V,b,g.getTileCoordCenter(oe),Y])}}}}findStaleTile_(e,t){const r=this.tileCache_,i=e[0],s=e[1],a=e[2],o=this.getStaleKeys();for(let d=0;d<o.length;++d){const g=l5(o[d],i,s,a);if(r.containsKey(g)){const b=r.peek(g);if(b.getState()===Nr.LOADED)return b.endTransition(Go(this)),u5(t,b,i),!0}}return!1}findAltTiles_(e,t,r,i){const s=e.getTileRangeForTileCoordAndZ(t,r,this.tempTileRange_);if(!s)return!1;let a=!0;const o=this.tileCache_,g=this.getLayer().getRenderSource().getKey();for(let b=s.minX;b<=s.maxX;++b)for(let E=s.minY;E<=s.maxY;++E){const S=l5(g,r,b,E);let I=!1;if(o.containsKey(S)){const P=o.peek(S);P.getState()===Nr.LOADED&&(u5(i,P,r),I=!0)}I||(a=!1)}return a}renderFrame(e,t){let r=!0;this.renderComplete=!0;const i=e.layerStatesArray[e.layerIndex],s=e.viewState,a=s.projection,o=s.resolution,d=s.center,g=e.pixelRatio,b=this.getLayer(),E=b.getSource(),S=E.getTileGridForProjection(a),I=S.getZForResolution(o,E.zDirection),P=S.getResolution(I),z=E.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==z&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=z):this.renderedSourceKey_=z;let j=e.extent;const q=E.getTilePixelRatio(g);this.prepareContainer(e,t);const Y=this.context.canvas.width,ie=this.context.canvas.height,te=i.extent&&Jp(i.extent);te&&(j=_p(j,Jp(i.extent)));const V=P*Y/2/q,ne=P*ie/2/q,G=[d[0]-V,d[1]-ne,d[0]+V,d[1]+ne],oe={};this.renderedTiles.length=0;const he=b.getPreload();if(e.nextExtent){const We=S.getZForResolution(s.nextResolution,E.zDirection),Me=gk(e,e.nextExtent);this.enqueueTiles(e,Me,We,oe,he)}const pe=gk(e,j);if(this.enqueueTiles(e,pe,I,oe,0),he>0&&setTimeout(()=>{this.enqueueTiles(e,pe,I-1,oe,he-1)},0),!(I in oe))return this.container;const Ee=Go(this),me=e.time;for(const We of oe[I]){const Me=We.getState();if(Me===Nr.EMPTY)continue;const Fe=We.tileCoord;if(Me===Nr.LOADED&&We.getAlpha(Ee,me)===1){We.endTransition(Ee);continue}if(Me!==Nr.IDLE&&(r=!1),Me!==Nr.ERROR&&(this.renderComplete=!1),this.findStaleTile_(Fe,oe)){kre(oe,We,I),e.animate=!0;continue}if(this.findAltTiles_(S,Fe,I+1,oe))continue;const Yt=S.getMinZoom();for(let gt=I-1;gt>=Yt&&!this.findAltTiles_(S,Fe,gt,oe);--gt);}const Se=P/o*g/q,De=this.getRenderContext(e);sm(this.tempTransform,Y/2,ie/2,Se,Se,0,-Y/2,-ie/2),i.extent&&this.clipUnrotated(De,e,te),E.getInterpolate()||(De.imageSmoothingEnabled=!1),this.preRender(De,e);const be=Object.keys(oe).map(Number);be.sort(Fm);let at;const Ze=[],Je=[];for(let We=be.length-1;We>=0;--We){const Me=be[We],Fe=E.getTilePixelSize(Me,g,a),bt=S.getResolution(Me)/P,Yt=Fe[0]*bt*Se,gt=Fe[1]*bt*Se,Lt=S.getTileCoordForCoordAndZ(Qm(G),Me),Kt=S.getTileCoordExtent(Lt),Ue=wA(this.tempTransform,[q*(Kt[0]-G[0])/P,q*(G[3]-Kt[3])/P]),Pe=q*E.getGutterForProjection(a);for(const Be of oe[Me]){if(Be.getState()!==Nr.LOADED)continue;const it=Be.tileCoord,_t=Lt[1]-it[1],ft=Math.round(Ue[0]-(_t-1)*Yt),Ut=Lt[2]-it[2],rn=Math.round(Ue[1]-(Ut-1)*gt),Dt=Math.round(Ue[0]-_t*Yt),_n=Math.round(Ue[1]-Ut*gt),qn=ft-Dt,tn=rn-_n,rr=be.length===1;let Dn=!1;at=[Dt,_n,Dt+qn,_n,Dt+qn,_n+tn,Dt,_n+tn];for(let pn=0,Zn=Ze.length;pn<Zn;++pn)if(!rr&&Me<Je[pn]){const dr=Ze[pn];Du([Dt,_n,Dt+qn,_n+tn],[dr[0],dr[3],dr[4],dr[7]])&&(Dn||(De.save(),Dn=!0),De.beginPath(),De.moveTo(at[0],at[1]),De.lineTo(at[2],at[3]),De.lineTo(at[4],at[5]),De.lineTo(at[6],at[7]),De.moveTo(dr[6],dr[7]),De.lineTo(dr[4],dr[5]),De.lineTo(dr[2],dr[3]),De.lineTo(dr[0],dr[1]),De.clip())}Ze.push(at),Je.push(Me),this.drawTile(Be,e,Dt,_n,qn,tn,Pe,rr),Dn&&De.restore(),this.renderedTiles.unshift(Be),this.updateUsedTiles(e.usedTiles,E,Be)}}if(this.renderedResolution=P,this.extentChanged=!this.renderedExtent_||!Wm(this.renderedExtent_,G),this.renderedExtent_=G,this.renderedPixelRatio=g,this.postRender(this.context,e),i.extent&&De.restore(),De.imageSmoothingEnabled=!0,this.renderComplete){const We=(Me,Fe)=>{const He=Go(E),bt=Fe.wantedTiles[He],Yt=bt?Object.keys(bt).length:0;this.updateCacheSize(Yt),this.tileCache_.expireCache()};e.postRenderFunctions.push(We)}return!this.renderComplete&&!r&&(e.animate=!0),this.container}updateCacheSize(e){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,e*2)}drawTile(e,t,r,i,s,a,o,d){let g;if(e instanceof fk){if(g=pB(e.getData()),!g)throw new Error("Rendering array data is not yet supported")}else g=this.getTileImage(e);if(!g)return;const b=this.getRenderContext(t),E=Go(this),S=t.layerStatesArray[t.layerIndex],I=S.opacity*(d?e.getAlpha(E,t.time):1),P=I!==b.globalAlpha;P&&(b.save(),b.globalAlpha=I),b.drawImage(g,o,o,g.width-2*o,g.height-2*o,r,i,s,a),P&&b.restore(),I!==S.opacity?t.animate=!0:d&&e.endTransition(E)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}updateUsedTiles(e,t,r){const i=Go(t);i in e||(e[i]={}),e[i][r.getKey()]=!0}}const k0={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class Tre extends Xy{constructor(e){e=e||{};const t=Object.assign({},e),r=e.cacheSize;delete e.cacheSize,delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=r,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(k0.PRELOAD)}setPreload(e){this.set(k0.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(k0.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(k0.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}class Pj extends Tre{constructor(e){super(e)}createRenderer(){return new Tj(this,{cacheSize:this.getCacheSize()})}}function gB(n){return Array.isArray(n)?Math.min(...n):n}class Pre extends v8{constructor(e,t,r,i,s,a,o){let d=e.getExtent();d&&e.canWrapX()&&(d=d.slice(),d[0]=-1/0,d[2]=1/0);let g=t.getExtent();g&&t.canWrapX()&&(g=g.slice(),g[0]=-1/0,g[2]=1/0);const b=g?_p(r,g):r,E=Gf(b),S=mB(e,t,E,i),I=Ij,P=new Oj(e,t,b,d,S*I,i),z=P.calculateSourceExtent(),j=$g(z)?null:a(z,S,s),q=j?di.IDLE:di.EMPTY,Y=j?j.getPixelRatio():1;super(r,i,Y,q),this.targetProj_=t,this.maxSourceExtent_=d,this.triangulation_=P,this.targetResolution_=i,this.targetExtent_=r,this.sourceImage_=j,this.sourcePixelRatio_=Y,this.interpolate_=o,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==di.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const e=this.sourceImage_.getState();if(e==di.LOADED){const t=Ds(this.targetExtent_)/this.targetResolution_,r=sA(this.targetExtent_)/this.targetResolution_;this.canvas_=Bj(t,r,this.sourcePixelRatio_,gB(this.sourceImage_.getResolution()),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_,!0)}this.state=e,this.changed()}load(){if(this.state==di.IDLE){this.state=di.LOADING,this.changed();const e=this.sourceImage_.getState();e==di.LOADED||e==di.ERROR?this.reproject_():(this.sourceListenerKey_=Ks(this.sourceImage_,lo.CHANGE,t=>{const r=this.sourceImage_.getState();(r==di.LOADED||r==di.ERROR)&&(this.unlistenSource_(),this.reproject_())}),this.sourceImage_.load())}}unlistenSource_(){ul(this.sourceListenerKey_),this.sourceListenerKey_=null}}const Cb=4,A5={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};class Kre extends wp{constructor(e,t){super(e),this.image=t}}class Kj extends Hy{constructor(e){super({attributions:e.attributions,projection:e.projection,state:e.state,interpolate:e.interpolate!==void 0?e.interpolate:!0}),this.on,this.once,this.un,this.loader=e.loader||null,this.resolutions_=e.resolutions!==void 0?e.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0,this.image=null,this.wantedExtent_,this.wantedResolution_,this.static_=e.loader?e.loader.length===0:!1,this.wantedProjection_=null}getResolutions(){return this.resolutions_}setResolutions(e){this.resolutions_=e}findNearestResolution(e){const t=this.getResolutions();if(t){const r=Tx(t,e,0);e=t[r]}return e}getImage(e,t,r,i){const s=this.getProjection();if(!s||!i||Dg(s,i))return s&&(i=s),this.getImageInternal(e,t,r,i);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&Dg(this.reprojectedImage_.getProjection(),i)&&this.reprojectedImage_.getResolution()==t&&Wm(this.reprojectedImage_.getExtent(),e))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new Pre(s,i,e,t,r,(a,o,d)=>this.getImageInternal(a,o,d,s),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(e,t,r,i){if(this.loader){const s=Dre(e,t,r,1),a=this.findNearestResolution(t);if(this.image&&(this.static_||this.wantedProjection_===i&&(this.wantedExtent_&&Xp(this.wantedExtent_,s)||Xp(this.image.getExtent(),s))&&(this.wantedResolution_&&gB(this.wantedResolution_)===a||gB(this.image.getResolution())===a)))return this.image;this.wantedProjection_=i,this.wantedExtent_=s,this.wantedResolution_=a,this.image=new v8(s,a,r,this.loader),this.image.addEventListener(lo.CHANGE,this.handleImageChange.bind(this))}return this.image}handleImageChange(e){const t=e.target;let r;switch(t.getState()){case di.LOADING:this.loading=!0,r=A5.IMAGELOADSTART;break;case di.LOADED:this.loading=!1,r=A5.IMAGELOADEND;break;case di.ERROR:this.loading=!1,r=A5.IMAGELOADERROR;break;default:return}this.hasListener(r)&&this.dispatchEvent(new Kre(r,t))}}function Dre(n,e,t,r){const i=e/t,s=Gf(n),a=E0(Ds(n)/i,Cb),o=E0(sA(n)/i,Cb),d=E0((r-1)*a/2,Cb),g=a+2*d,b=E0((r-1)*o/2,Cb),E=o+2*b;return S2(s,i,0,[g,E])}const E1=[0,0,0],C0=5;class Xx{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,Xs(VX(this.resolutions_,(i,s)=>s-i),"`resolutions` must be sorted in descending order");let t;if(!e.origins){for(let i=0,s=this.resolutions_.length-1;i<s;++i)if(!t)t=this.resolutions_[i]/this.resolutions_[i+1];else if(this.resolutions_[i]/this.resolutions_[i+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,Xs(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const r=e.extent;r!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=Qm(r)),Xs(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,Xs(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:V8,Xs(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=r!==void 0?r:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((i,s)=>{const a=new rO(Math.min(0,i[0]),Math.max(i[0]-1,-1),Math.min(0,i[1]),Math.max(i[1]-1,-1));if(r){const o=this.getTileRangeForExtentAndZ(r,s);a.minX=Math.max(o.minX,a.minX),a.maxX=Math.min(o.maxX,a.maxX),a.minY=Math.max(o.minY,a.minY),a.maxY=Math.min(o.maxY,a.maxY)}return a}):r&&this.calculateTileRanges_(r)}forEachTileCoord(e,t,r){const i=this.getTileRangeForExtentAndZ(e,t);for(let s=i.minX,a=i.maxX;s<=a;++s)for(let o=i.minY,d=i.maxY;o<=d;++o)r([t,s,o])}forEachTileCoordParentTileRange(e,t,r,i){let s,a,o,d=null,g=e[0]-1;for(this.zoomFactor_===2?(a=e[1],o=e[2]):d=this.getTileCoordExtent(e,i);g>=this.minZoom;){if(a!==void 0&&o!==void 0?(a=Math.floor(a/2),o=Math.floor(o/2),s=M1(a,a,o,o,r)):s=this.getTileRangeForExtentAndZ(d,g,r),t(g,s))return!0;--g}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,r){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const s=e[1]*2,a=e[2]*2;return M1(s,s+1,a,a+1,t)}const i=this.getTileCoordExtent(e,r||this.tmpExtent_);return this.getTileRangeForExtentAndZ(i,e[0]+1,t)}return null}getTileRangeForTileCoordAndZ(e,t,r){if(t>this.maxZoom||t<this.minZoom)return null;const i=e[0],s=e[1],a=e[2];if(t===i)return M1(s,a,s,a,r);if(this.zoomFactor_){const d=Math.pow(this.zoomFactor_,t-i),g=Math.floor(s*d),b=Math.floor(a*d);if(t<i)return M1(g,g,b,b,r);const E=Math.floor(d*(s+1))-1,S=Math.floor(d*(a+1))-1;return M1(g,E,b,S,r)}const o=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(o,t,r)}getTileRangeForExtentAndZ(e,t,r){this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,E1);const i=E1[1],s=E1[2];this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,E1);const a=E1[1],o=E1[2];return M1(i,a,s,o,r)}getTileCoordCenter(e){const t=this.getOrigin(e[0]),r=this.getResolution(e[0]),i=Ad(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*i[0]*r,t[1]-(e[2]+.5)*i[1]*r]}getTileCoordExtent(e,t){const r=this.getOrigin(e[0]),i=this.getResolution(e[0]),s=Ad(this.getTileSize(e[0]),this.tmpSize_),a=r[0]+e[1]*s[0]*i,o=r[1]-(e[2]+1)*s[1]*i,d=a+s[0]*i,g=o+s[1]*i;return Nm(a,o,d,g,t)}getTileCoordForCoordAndResolution(e,t,r){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,r)}getTileCoordForXYAndResolution_(e,t,r,i,s){const a=this.getZForResolution(r),o=r/this.getResolution(a),d=this.getOrigin(a),g=Ad(this.getTileSize(a),this.tmpSize_);let b=o*(e-d[0])/r/g[0],E=o*(d[1]-t)/r/g[1];return i?(b=E0(b,C0)-1,E=E0(E,C0)-1):(b=lb(b,C0),E=lb(E,C0)),U2(a,b,E,s)}getTileCoordForXYAndZ_(e,t,r,i,s){const a=this.getOrigin(r),o=this.getResolution(r),d=Ad(this.getTileSize(r),this.tmpSize_);let g=(e-a[0])/o/d[0],b=(a[1]-t)/o/d[1];return i?(g=E0(g,C0)-1,b=E0(b,C0)-1):(g=lb(g,C0),b=lb(b,C0)),U2(r,g,b,s)}getTileCoordForCoordAndZ(e,t,r){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,r)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,t){const r=Tx(this.resolutions_,e,t||0);return MA(r,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,t){return Gz(t,0,t.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const t=this.resolutions_.length,r=new Array(t);for(let i=this.minZoom;i<t;++i)r[i]=this.getTileRangeForExtentAndZ(e,i);this.fullTileRanges_=r}}function Dj(n){let e=n.getDefaultTileGrid();return e||(e=Lre(n),n.setDefaultTileGrid(e)),e}function Rre(n,e,t){const r=e[0],i=n.getTileCoordCenter(e),s=Jx(t);if(!zg(s,i)){const a=Ds(s),o=Math.ceil((s[0]-i[0])/a);return i[0]+=a*o,n.getTileCoordForCoordAndZ(i,r)}return e}function Fre(n,e,t,r){r=r!==void 0?r:"top-left";const i=Rj(n,e,t);return new Xx({extent:n,origin:hJ(n,r),resolutions:i,tileSize:t})}function sO(n){const e=n||{},t=e.extent||wa("EPSG:3857").getExtent(),r={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:Rj(t,e.maxZoom,e.tileSize,e.maxResolution)};return new Xx(r)}function Rj(n,e,t,r){e=e!==void 0?e:fj,t=Ad(t!==void 0?t:V8);const i=sA(n),s=Ds(n);r=r>0?r:Math.max(s/t[0],i/t[1]);const a=e+1,o=new Array(a);for(let d=0;d<a;++d)o[d]=r/Math.pow(2,d);return o}function Lre(n,e,t,r){const i=Jx(n);return Fre(i,e,t,r)}function Jx(n){n=wa(n);let e=n.getExtent();if(!e){const t=180*j0.degrees/n.getMetersPerUnit();e=Nm(-t,-t,t,t)}return e}class Fj extends Hy{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const t=[256,256];this.tileGrid&&Ad(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),t),this.tmpSize=[0,0],this.key_=e.key||Go(this),this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getResolutions(e){const t=e?this.getTileGridForProjection(e):this.tileGrid;return t?t.getResolutions():null}getTile(e,t,r,i,s){return xo()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:Dj(e)}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,r){const i=this.getTileGridForProjection(r),s=this.getTilePixelRatio(t),a=Ad(i.getTileSize(e),this.tmpSize);return s==1?a:uJ(a,s,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){const r=t!==void 0?t:this.getProjection(),i=t!==void 0?this.getTileGridForProjection(r):this.tileGrid||this.getTileGridForProjection(r);return this.getWrapX()&&r.isGlobal()&&(e=Rre(i,e,r)),Ire(e,i)?e:null}clear(){}refresh(){this.clear(),super.refresh()}}class Ure extends wp{constructor(e,t){super(e),this.tile=t}}function Lj(n){return function(e){const t=e.buffers,r=e.meta,i=e.imageOps,s=e.width,a=e.height,o=t.length,d=t[0].byteLength;if(i){const S=new Array(o);for(let P=0;P<o;++P)S[P]=new ImageData(new Uint8ClampedArray(t[P]),s,a);return n(S,r).data.buffer}const g=new Uint8ClampedArray(d),b=new Array(o),E=new Array(o);for(let S=0;S<o;++S)b[S]=new Uint8ClampedArray(t[S]),E[S]=[0,0,0,0];for(let S=0;S<d;S+=4){for(let P=0;P<o;++P){const z=b[P];E[P][0]=z[S],E[P][1]=z[S+1],E[P][2]=z[S+2],E[P][3]=z[S+3]}const I=n(E,r);g[S]=I[0],g[S+1]=I[1],g[S+2]=I[2],g[S+3]=I[3]}return g.buffer}}function zre(n,e){const r=Object.keys(n.lib||{}).map(function(s){return"const "+s+" = "+n.lib[s].toString()+";"}).concat(["const __minion__ = ("+Lj.toString()+")(",n.operation.toString(),");",'self.addEventListener("message", function(event) {',"  const buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),i=new Worker(typeof Blob>"u"?"data:text/javascript;base64,"+Buffer.from(r.join(`
`),"binary").toString("base64"):URL.createObjectURL(new Blob(r,{type:"text/javascript"})));return i.addEventListener("message",e),i}function jre(n,e){const t=Lj(n.operation);let r=!1;return{postMessage:function(i){setTimeout(function(){r||e({data:{buffer:t(i),meta:i.meta}})},0)},terminate:function(){r=!0}}}class Nre extends n_{constructor(e){super(),this.imageOps_=!!e.imageOps;let t;e.threads===0?t=0:this.imageOps_?t=1:t=e.threads||1;const r=new Array(t);if(t)for(let i=0;i<t;++i)r[i]=zre(e,this.onWorkerMessage_.bind(this,i));else r[0]=jre(e,this.onWorkerMessage_.bind(this,0));this.workers_=r,this.queue_=[],this.maxQueueLength_=e.queue||1/0,this.running_=0,this.dataLookup_={},this.job_=null}process(e,t,r){this.enqueue_({inputs:e,meta:t,callback:r}),this.dispatch_()}enqueue_(e){for(this.queue_.push(e);this.queue_.length>this.maxQueueLength_;)this.queue_.shift().callback(null,null)}dispatch_(){if(this.running_||this.queue_.length===0)return;const e=this.queue_.shift();this.job_=e;const t=e.inputs[0].width,r=e.inputs[0].height,i=e.inputs.map(function(d){return d.data.buffer}),s=this.workers_.length;if(this.running_=s,s===1){this.workers_[0].postMessage({buffers:i,meta:e.meta,imageOps:this.imageOps_,width:t,height:r},i);return}const a=e.inputs[0].data.length,o=4*Math.ceil(a/4/s);for(let d=0;d<s;++d){const g=d*o,b=[];for(let E=0,S=i.length;E<S;++E)b.push(i[E].slice(g,g+o));this.workers_[d].postMessage({buffers:b,meta:e.meta,imageOps:this.imageOps_,width:t,height:r},b)}}onWorkerMessage_(e,t){this.disposed||(this.dataLookup_[e]=t.data,--this.running_,this.running_===0&&this.resolveJob_())}resolveJob_(){const e=this.job_,t=this.workers_.length;let r,i;if(t===1)r=new Uint8ClampedArray(this.dataLookup_[0].buffer),i=this.dataLookup_[0].meta;else{const s=e.inputs[0].data.length;r=new Uint8ClampedArray(s),i=new Array(t);const a=4*Math.ceil(s/4/t);for(let o=0;o<t;++o){const d=this.dataLookup_[o].buffer,g=o*a;r.set(new Uint8ClampedArray(d),g),i[o]=this.dataLookup_[o].meta}}this.job_=null,this.dataLookup_={},e.callback(null,new ImageData(r,e.inputs[0].width,e.inputs[0].height),i),this.dispatch_()}disposeInternal(){for(let e=0;e<this.workers_.length;++e)this.workers_[e].terminate();this.workers_.length=0}}const yk={BEFOREOPERATIONS:"beforeoperations",AFTEROPERATIONS:"afteroperations"};class vk extends wp{constructor(e,t,r){super(e),this.extent=t.extent,this.resolution=t.viewState.resolution/t.pixelRatio,this.data=r}}class Uj extends Kj{constructor(e){super({projection:null}),this.on,this.once,this.un,this.processor_=null,this.operationType_=e.operationType!==void 0?e.operationType:"pixel",this.threads_=e.threads!==void 0?e.threads:1,this.layers_=Qre(e.sources);const t=this.changed.bind(this);for(let r=0,i=this.layers_.length;r<i;++r)this.layers_[r].addEventListener(lo.CHANGE,t);this.useResolutions_=e.resolutions!==null,this.tileQueue_=new gj(function(){return 1},this.processSources_.bind(this)),this.requestedFrameState_,this.renderedImageCanvas_=null,this.renderedRevision_,this.frameState_={animate:!1,coordinateToPixelTransform:ph(),declutter:null,extent:null,index:0,layerIndex:0,layerStatesArray:Gre(this.layers_),pixelRatio:1,pixelToCoordinateTransform:ph(),postRenderFunctions:[],size:[0,0],tileQueue:this.tileQueue_,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{},mapId:Go(this),renderTargets:{}},this.setAttributions(function(r){var s;const i=[];for(let a=0,o=e.sources.length;a<o;++a){const d=e.sources[a],g=d instanceof Hy?d:d.getSource();if(!g)continue;const b=(s=g.getAttributions())==null?void 0:s(r);typeof b=="string"?i.push(b):b!==void 0&&i.push(...b)}return i}),e.operation!==void 0&&this.setOperation(e.operation,e.lib)}setOperation(e,t){this.processor_&&this.processor_.dispose(),this.processor_=new Nre({operation:e,imageOps:this.operationType_==="image",queue:1,lib:t,threads:this.threads_}),this.changed()}updateFrameState_(e,t,r){const i=Object.assign({},this.frameState_);i.viewState=Object.assign({},i.viewState);const s=Gf(e);i.size[0]=Math.ceil(Ds(e)/t),i.size[1]=Math.ceil(sA(e)/t),i.extent=[s[0]-i.size[0]*t/2,s[1]-i.size[1]*t/2,s[0]+i.size[0]*t/2,s[1]+i.size[1]*t/2],i.time=Date.now();const a=i.viewState;return a.center=s,a.projection=r,a.resolution=t,i}allSourcesReady_(){let e=!0,t;for(let r=0,i=this.layers_.length;r<i;++r)if(t=this.layers_[r].getSource(),!t||t.getState()!=="ready"){e=!1;break}return e}getImage(e,t,r,i){if(!this.allSourcesReady_())return null;this.tileQueue_.loadMoreTiles(16,16),t=this.findNearestResolution(t);const s=this.updateFrameState_(e,t,i);if(this.requestedFrameState_=s,this.renderedImageCanvas_){const a=this.renderedImageCanvas_.getResolution(),o=this.renderedImageCanvas_.getExtent();(t!==a||!Wm(s.extent,o))&&(this.renderedImageCanvas_=null)}return(!this.renderedImageCanvas_||this.getRevision()!==this.renderedRevision_)&&this.processSources_(),s.animate&&requestAnimationFrame(this.changed.bind(this)),this.renderedImageCanvas_}processSources_(){const e=this.requestedFrameState_,t=this.layers_.length,r=new Array(t);for(let s=0;s<t;++s){e.layerIndex=s,e.renderTargets={};const a=Wre(this.layers_[s],e);if(a)r[s]=a;else return}const i={};this.dispatchEvent(new vk(yk.BEFOREOPERATIONS,e,i)),this.processor_.process(r,i,this.onWorkerComplete_.bind(this,e))}onWorkerComplete_(e,t,r,i){if(t||!r)return;const s=e.extent,a=e.viewState.resolution;if(a!==this.requestedFrameState_.viewState.resolution||!Wm(s,this.requestedFrameState_.extent))return;let o;if(this.renderedImageCanvas_)o=this.renderedImageCanvas_.getImage().getContext("2d");else{const d=Math.round(Ds(s)/a),g=Math.round(sA(s)/a);o=Ru(d,g),this.renderedImageCanvas_=new Zte(s,a,1,o.canvas)}o.putImageData(r,0,0),e.animate?requestAnimationFrame(this.changed.bind(this)):this.changed(),this.renderedRevision_=this.getRevision(),this.dispatchEvent(new vk(yk.AFTEROPERATIONS,e,i))}getResolutions(e){if(!this.useResolutions_)return null;let t=super.getResolutions();if(!t)for(let r=0,i=this.layers_.length;r<i&&(t=this.layers_[r].getSource().getResolutions(e),!t);++r);return t}disposeInternal(){this.processor_&&this.processor_.dispose(),super.disposeInternal()}}Uj.prototype.dispose;let cg=null;function Wre(n,e){const t=n.getRenderer();if(!t)throw new Error("Unsupported layer type: "+n);if(!t.prepareFrame(e))return null;const r=e.size[0],i=e.size[1];if(r===0||i===0)return null;const s=t.renderFrame(e,null);let a;if(s instanceof HTMLCanvasElement)a=s;else{if(s&&(a=s.firstElementChild),!(a instanceof HTMLCanvasElement))throw new Error("Unsupported rendered element: "+a);if(a.width===r&&a.height===i)return a.getContext("2d").getImageData(0,0,r,i)}if(!cg)cg=Ru(r,i,void 0,{willReadFrequently:!0});else{const o=cg.canvas;o.width!==r||o.height!==i?cg=Ru(r,i,void 0,{willReadFrequently:!0}):cg.clearRect(0,0,r,i)}return cg.drawImage(a,0,0,r,i),cg.getImageData(0,0,r,i)}function Gre(n){return n.map(function(e){return e.getLayerState()})}function Qre(n){const e=n.length,t=new Array(e);for(let r=0;r<e;++r)t[r]=qre(n[r]);return t}function qre(n){let e;return n instanceof Hy?n instanceof Fj?e=new Pj({source:n}):n instanceof Kj&&(e=new Ej({source:n})):e=n,e}function Yre(n,e,t,r){const i=document.createElement("script"),s="olc_"+Go(e);function a(){delete window[s],i.parentNode.removeChild(i)}i.async=!0,i.src=n+(n.includes("?")?"&":"?")+"callback="+s;const o=setTimeout(function(){a(),t&&t()},1e4);window[s]=function(d){clearTimeout(o),a(),e(d)},document.head.appendChild(i)}const $re=/\{z\}/g,Vre=/\{x\}/g,Hre=/\{y\}/g,Zre=/\{-y\}/g;function Xre(n,e,t,r,i){return n.replace($re,e.toString()).replace(Vre,t.toString()).replace(Hre,r.toString()).replace(Zre,function(){if(i===void 0)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(i-r).toString()})}function Jre(n){const e=[];let t=/\{([a-z])-([a-z])\}/.exec(n);if(t){const r=t[1].charCodeAt(0),i=t[2].charCodeAt(0);let s;for(s=r;s<=i;++s)e.push(n.replace(t[0],String.fromCharCode(s)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(n),t){const r=parseInt(t[2],10);for(let i=parseInt(t[1],10);i<=r;i++)e.push(n.replace(t[0],i.toString()));return e}return e.push(n),e}function eie(n,e){return function(t,r,i){if(!t)return;let s;const a=t[0];if(e){const o=e.getFullTileRange(a);o&&(s=o.getHeight()-1)}return Xre(n,a,t[1],t[2],s)}}function zj(n,e){const t=n.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=eie(n[i],e);return tie(r)}function tie(n){return n.length===1?n[0]:function(e,t,r){if(!e)return;const i=Bre(e),s=Kg(i,n.length);return n[s](e,t,r)}}const c5={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class e3 extends Fj{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===e3.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const t=e.target,r=Go(t),i=t.getState();let s;i==Nr.LOADING?(this.tileLoadingKeys_[r]=!0,s=c5.TILELOADSTART):r in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[r],s=i==Nr.ERROR?c5.TILELOADERROR:i==Nr.LOADED?c5.TILELOADEND:void 0),s!=null&&this.dispatchEvent(new Ure(s,t))}setTileLoadFunction(e){this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,typeof t<"u"?this.setKey(t):this.changed()}setUrl(e){const t=Jre(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;const t=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(zj(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,r){}}class nie extends e3{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:rie,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:mj,this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(e){return this.getProjection()&&e&&!Dg(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||Dg(t,e)))return this.tileGrid;const r=Go(e);return r in this.tileGridForProjection||(this.tileGridForProjection[r]=Dj(e)),this.tileGridForProjection[r]}createTile_(e,t,r,i,s,a){const o=[e,t,r],d=this.getTileCoordForTileUrlFunction(o,s),g=d?this.tileUrlFunction(d,i,s):void 0,b=new this.tileClass(o,g!==void 0?Nr.IDLE:Nr.EMPTY,g!==void 0?g:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return b.key=a,b.addEventListener(lo.CHANGE,this.handleTileChange.bind(this)),b}getTile(e,t,r,i,s){const a=this.getProjection();if(!a||!s||Dg(a,s))return this.getTileInternal(e,t,r,i,a||s);const o=[e,t,r],d=this.getKey(),g=this.getTileGridForProjection(a),b=this.getTileGridForProjection(s),E=this.getTileCoordForTileUrlFunction(o,s),S=new kj(a,g,s,b,o,E,this.getTilePixelRatio(i),this.getGutter(),(I,P,z,j)=>this.getTileInternal(I,P,z,j,a),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return S.key=d,S}getTileInternal(e,t,r,i,s){const a=this.getKey();return this.createTile_(e,t,r,i,s,a)}setRenderReprojectionEdges(e){this.renderReprojectionEdges_!=e&&(this.renderReprojectionEdges_=e,this.changed())}setTileGridForProjection(e,t){const r=wa(e);if(r){const i=Go(r);i in this.tileGridForProjection||(this.tileGridForProjection[i]=t)}}}function rie(n,e){n.getImage().src=e}class jj extends nie{constructor(e){if(super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:wa("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.tileJSON_=null,this.tileSize_=e.tileSize,e.url)if(e.jsonp)Yre(e.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const t=new XMLHttpRequest;t.addEventListener("load",this.onXHRLoad_.bind(this)),t.addEventListener("error",this.onXHRError_.bind(this)),t.open("GET",e.url),t.send()}else if(e.tileJSON)this.handleTileJSONResponse(e.tileJSON);else throw new Error("Either `url` or `tileJSON` options must be provided")}onXHRLoad_(e){const t=e.target;if(!t.status||t.status>=200&&t.status<300){let r;try{r=JSON.parse(t.responseText)}catch{this.handleTileJSONError();return}this.handleTileJSONResponse(r)}else this.handleTileJSONError()}onXHRError_(e){this.handleTileJSONError()}getTileJSON(){return this.tileJSON_}handleTileJSONResponse(e){const t=wa("EPSG:4326"),r=this.getProjection();let i;if(e.bounds!==void 0){const g=l_(t,r);i=mJ(e.bounds,g)}const s=Jx(r),a=e.minzoom||0,o=e.maxzoom||22,d=sO({extent:s,maxZoom:o,minZoom:a,tileSize:this.tileSize_});if(this.tileGrid=d,this.tileUrlFunction=zj(e.tiles,d),e.attribution&&!this.getAttributions()){const g=i!==void 0?i:s;this.setAttributions(function(b){return Du(g,b.extent)?[e.attribution]:null})}this.tileJSON_=e,this.setState("ready")}handleTileJSONError(){this.setState("error")}}const iie={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},Ck={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]};class oie extends Tj{constructor(e,t){super(e,t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.renderedLayerRevision_,this.renderedPixelToCoordinateTransform_=null,this.renderedRotation_,this.renderedOpacity_=1,this.tmpTransform_=ph(),this.tileClipContexts_=null}drawTile(e,t,r,i,s,a,o,d){this.updateExecutorGroup_(e,t.pixelRatio,t.viewState.projection),this.tileImageNeedsRender_(e)&&this.renderTileImage_(e,t),super.drawTile(e,t,r,i,s,a,o,d)}getTile(e,t,r,i){const s=this.getOrCreateTile(e,t,r,i);if(!s)return null;const o=i.viewState.resolution,d=i.viewHints;return(!(d[ql.ANIMATING]||d[ql.INTERACTING])||!s.wantedResolution)&&(s.wantedResolution=o),s}prepareFrame(e){const t=this.getLayer().getRevision();return this.renderedLayerRevision_!==t&&(this.renderedLayerRevision_=t,this.renderedTiles.length=0),super.prepareFrame(e)}updateExecutorGroup_(e,t,r){const i=this.getLayer(),s=i.getRevision(),a=i.getRenderOrder()||null,o=e.wantedResolution,d=e.getReplayState(i);if(!d.dirty&&d.renderedResolution===o&&d.renderedRevision==s&&d.renderedRenderOrder==a)return;const g=i.getSource(),b=!!i.getDeclutter(),E=g.getTileGrid(),I=g.getTileGridForProjection(r).getTileCoordExtent(e.wrappedTileCoord),P=g.getSourceTiles(t,r,e),z=Go(i);delete e.hitDetectionImageData[z],e.executorGroups[z]=[],d.dirty=!1;for(let j=0,q=P.length;j<q;++j){const Y=P[j];if(Y.getState()!=Nr.LOADED)continue;const ie=Y.tileCoord,te=E.getTileCoordExtent(ie),V=_p(I,te),ne=D0(V,i.getRenderBuffer()*o,this.tempExtent),G=Wm(te,V)?null:ne,oe=new tj(0,V,o,t),he=lB(o,t),pe=function(be,at){let Ze;const Je=be.getStyleFunction()||i.getStyleFunction();if(Je&&(Ze=Je(be,o)),Ze){const We=this.renderFeature(be,he,Ze,oe,b,at);d.dirty=d.dirty||We}},Ee=Y.getFeatures();a&&a!==d.renderedRenderOrder&&Ee.sort(a);for(let be=0,at=Ee.length;be<at;++be){const Ze=Ee[be];(!G||Du(G,Ze.getGeometry().getExtent()))&&pe.call(this,Ze,be)}const me=oe.finish(),Se=i.getRenderMode()!=="vector"&&b&&P.length===1?null:V,De=new nj(Se,o,t,g.getOverlaps(),me,i.getRenderBuffer(),!0);e.executorGroups[z].push(De)}d.renderedRevision=s,d.renderedRenderOrder=a,d.renderedResolution=o}forEachFeatureAtCoordinate(e,t,r,i,s){var ie,te;const a=t.viewState.resolution,o=t.viewState.rotation;r=r??0;const d=this.getLayer(),b=d.getSource().getTileGridForProjection(t.viewState.projection),E=H6([e]);D0(E,a*r,E);const S={},I=function(V,ne,G){let oe=V.getId();oe===void 0&&(oe=Go(V));const he=S[oe];if(he){if(he!==!0&&G<he.distanceSq){if(G===0)return S[oe]=!0,s.splice(s.lastIndexOf(he),1),i(V,d,ne);he.geometry=ne,he.distanceSq=G}}else{if(G===0)return S[oe]=!0,i(V,d,ne);s.push(S[oe]={feature:V,layer:d,geometry:ne,distanceSq:G,callback:i})}},P=this.renderedTiles,z=Go(d),j=d.getDeclutter(),q=j?(te=(ie=t.declutter)==null?void 0:ie[j])==null?void 0:te.all().map(V=>V.value):null;let Y;e:for(let V=0,ne=P.length;V<ne;++V){const G=P[V],oe=b.getTileCoordExtent(G.wrappedTileCoord);if(!Du(oe,E))continue;const he=G.executorGroups[z];for(let pe=0,Ee=he.length;pe<Ee;++pe)if(Y=he[pe].forEachFeatureAtCoordinate(e,a,o,r,I,q),Y)break e}return Y}getFeatures(e){return this.renderedTiles.length===0?Promise.resolve([]):new Promise((t,r)=>{const i=this.getLayer(),s=i.getSource(),a=this.renderedProjection,o=a.getExtent(),d=this.renderedResolution,g=s.getTileGridForProjection(a),b=wA(this.renderedPixelToCoordinateTransform_,e.slice()),E=g.getTileCoordForCoordAndResolution(b,d).toString(),S=this.renderedTiles.find(ie=>ie.tileCoord.toString()===E&&ie.getState()===Nr.LOADED);if(!S||S.loadingSourceTiles>0){t([]);return}s.getWrapX()&&a.canWrapX()&&!Xp(o,g.getTileCoordExtent(S.tileCoord))&&I8(b,a);const I=Go(i),P=g.getTileCoordExtent(S.wrappedTileCoord),z=Qm(P),j=[(b[0]-z[0])/d,(z[1]-b[1])/d],q=S.getSourceTiles().reduce((ie,te)=>ie.concat(te.getFeatures()),[]);let Y=S.hitDetectionImageData[I];if(!Y){const ie=Ad(g.getTileSize(g.getZForResolution(d,s.zDirection))),te=this.renderedRotation_,V=[this.getRenderTransform(g.getTileCoordCenter(S.wrappedTileCoord),d,0,Jh,ie[0]*Jh,ie[1]*Jh,0)];Y=rj(ie,V,q,i.getStyleFunction(),g.getTileCoordExtent(S.wrappedTileCoord),S.getReplayState(i).renderedResolution,te),S.hitDetectionImageData[I]=Y}t(ij(j,q,Y))})}getFeaturesInExtent(e){const t=[],r=this.getTileCache();if(r.getCount()===0)return t;const s=this.getLayer().getSource().getTileGridForProjection(this.frameState.viewState.projection),a=s.getZForResolution(this.renderedResolution),o={};return r.forEach(d=>{if(d.tileCoord[0]!==a||d.getState()!==Nr.LOADED)return;const g=d.getSourceTiles();for(let b=0,E=g.length;b<E;++b){const S=g[b],I=S.getKey();if(I in o)continue;o[I]=!0;const P=S.tileCoord;if(Du(e,s.getTileCoordExtent(P))){const z=S.getFeatures();if(z)for(let j=0,q=z.length;j<q;++j){const Y=z[j],ie=Y.getGeometry();Du(e,ie.getExtent())&&t.push(Y)}}}}),t}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.renderedLayerRevision_!==void 0&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}renderDeclutter(e,t){var S;const r=this.context,i=r.globalAlpha;r.globalAlpha=t.opacity;const s=e.viewHints,a=!(s[ql.ANIMATING]||s[ql.INTERACTING]),o=[this.context.canvas.width,this.context.canvas.height],d=this.getLayer().getDeclutter(),g=d?(S=e.declutter)==null?void 0:S[d]:void 0,b=Go(this.getLayer()),E=this.renderedTiles;for(let I=0,P=E.length;I<P;++I){const z=E[I],j=z.executorGroups[b];if(j)for(let q=j.length-1;q>=0;--q)j[q].execute(this.context,o,this.getTileRenderTransform(z,e),e.viewState.rotation,a,D2,g)}r.globalAlpha=i}renderDeferredInternal(e){const t=this.renderedTiles,r=Go(this.getLayer()),i=t.reduce((d,g,b)=>(g.executorGroups[r].forEach(E=>d.push({executorGroup:E,index:b})),d),[]),s=i.map(({executorGroup:d})=>d.getDeferredZIndexContexts()),a={};for(let d=0,g=i.length;d<g;++d){const b=i[d].executorGroup.getDeferredZIndexContexts();for(const E in b)a[E]=!0}Object.keys(a).map(Number).sort(Fm).forEach(d=>{s.forEach((g,b)=>{g[d]&&(g[d].forEach(E=>{const{executorGroup:S,index:I}=i[b],P=S.getRenderedContext(),z=P.globalAlpha;P.globalAlpha=this.renderedOpacity_;const j=this.tileClipContexts_[I];j&&j.draw(P),E.draw(P),j&&P.restore(),P.globalAlpha=z,E.clear()}),g[d].length=0)})})}getTileRenderTransform(e,t){const r=t.pixelRatio,i=t.viewState,s=i.center,a=i.resolution,o=i.rotation,d=t.size,g=Math.round(d[0]*r),b=Math.round(d[1]*r),S=this.getLayer().getSource().getTileGridForProjection(t.viewState.projection),I=e.tileCoord,P=S.getTileCoordExtent(e.wrappedTileCoord),z=S.getTileCoordExtent(I,this.tempExtent)[0]-P[0];return R8(Y4(this.inversePixelTransform.slice(),1/r,1/r),this.getRenderTransform(s,a,o,r,g,b,z))}postRender(e,t){var V;const r=t.viewHints,i=!(r[ql.ANIMATING]||r[ql.INTERACTING]);this.renderedPixelToCoordinateTransform_=t.pixelToCoordinateTransform.slice(),this.renderedRotation_=t.viewState.rotation,this.renderedOpacity_=t.layerStatesArray[t.layerIndex].opacity;const s=this.getLayer(),a=s.getRenderMode(),o=e.globalAlpha;e.globalAlpha=this.renderedOpacity_;const d=s.getDeclutter(),g=d?Ck[a].filter(ne=>!D2.includes(ne)):Ck[a],b=t.viewState,E=b.rotation,S=s.getSource(),P=S.getTileGridForProjection(b.projection).getZForResolution(b.resolution,S.zDirection),z=this.renderedTiles,j=[],q=[],Y=[],ie=Go(s);let te=!0;for(let ne=z.length-1;ne>=0;--ne){const G=z[ne];te=te&&!G.getReplayState(s).dirty;const oe=G.executorGroups[ie].filter(be=>be.hasExecutors(g));if(oe.length===0)continue;const he=this.getTileRenderTransform(G,t),pe=G.tileCoord[0];let Ee=!1;const me=oe[0].getClipCoords(he);let Se=e,De;if(me){De=new N8,Se=De.getContext();for(let be=0,at=j.length;be<at;++be)if(P!==pe&&pe<q[be]){const Ze=j[be];Du([me[0],me[3],me[4],me[7]],[Ze[0],Ze[3],Ze[4],Ze[7]])&&(Ee||(Se.save(),Ee=!0),Se.beginPath(),Se.moveTo(me[0],me[1]),Se.lineTo(me[2],me[3]),Se.lineTo(me[4],me[5]),Se.lineTo(me[6],me[7]),Se.moveTo(Ze[6],Ze[7]),Se.lineTo(Ze[4],Ze[5]),Se.lineTo(Ze[2],Ze[3]),Se.lineTo(Ze[0],Ze[1]),Se.clip())}j.push(me),q.push(pe)}for(let be=0,at=oe.length;be<at;++be)oe[be].execute(e,[e.canvas.width,e.canvas.height],he,E,i,g,(V=t.declutter)==null?void 0:V[d]);Ee&&(Se===e?Se.restore():Y[ne]=De)}e.globalAlpha=o,this.ready=te,this.tileClipContexts_=Y,t.declutter||this.renderDeferredInternal(t),super.postRender(e,t)}renderFeature(e,t,r,i,s,a){if(!r)return!1;let o=!1;if(Array.isArray(r))for(let d=0,g=r.length;d<g;++d)o=P2(i,e,r[d],t,this.boundHandleStyleImageChange_,void 0,s,a)||o;else o=P2(i,e,r,t,this.boundHandleStyleImageChange_,void 0,s,a);return o}tileImageNeedsRender_(e){const t=this.getLayer();if(t.getRenderMode()==="vector")return!1;const r=e.getReplayState(t),i=t.getRevision(),s=e.wantedResolution;return r.renderedTileResolution!==s||r.renderedTileRevision!==i}renderTileImage_(e,t){const r=this.getLayer(),i=e.getReplayState(r),s=r.getRevision(),a=e.executorGroups[Go(r)];i.renderedTileRevision=s;const o=e.wrappedTileCoord,d=o[0],g=r.getSource();let b=t.pixelRatio;const S=t.viewState.projection,I=g.getTileGridForProjection(S),P=I.getResolution(e.tileCoord[0]),z=t.pixelRatio/e.wantedResolution*P,j=I.getResolution(d),q=e.getContext();b=Math.round(Math.max(b,z/b));const Y=g.getTilePixelSize(d,b,S);q.canvas.width=Y[0],q.canvas.height=Y[1];const ie=b/z;if(ie!==1){const G=P9(this.tmpTransform_);Y4(G,ie,ie),q.setTransform.apply(q,G)}const te=I.getTileCoordExtent(o,this.tempExtent),V=z/j,ne=P9(this.tmpTransform_);Y4(ne,V,-V),see(ne,-te[0],-te[3]);for(let G=0,oe=a.length;G<oe;++G)a[G].execute(q,[q.canvas.width*ie,q.canvas.height*ie],ne,0,!0,iie[r.getRenderMode()],null);i.renderedTileResolution=e.wantedResolution}}class uC extends Z8{constructor(e){e=e||{};const t=Object.assign({},e);delete t.preload;const r=e.cacheSize===void 0?0:e.cacheSize;delete e.cacheSize,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=r;const i=e.renderMode||"hybrid";Xs(i=="hybrid"||i=="vector","`renderMode` must be `'hybrid'` or `'vector'`"),this.renderMode_=i,this.setPreload(e.preload?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0),this.getBackground,this.setBackground}createRenderer(){return new oie(this,{cacheSize:this.cacheSize_})}getFeatures(e){return super.getFeatures(e)}getFeaturesInExtent(e){return this.getRenderer().getFeaturesInExtent(e)}getRenderMode(){return this.renderMode_}getPreload(){return this.get(k0.PRELOAD)}getUseInterimTilesOnError(){return this.get(k0.USE_INTERIM_TILES_ON_ERROR)}setPreload(e){this.set(k0.PRELOAD,e)}setUseInterimTilesOnError(e){this.set(k0.USE_INTERIM_TILES_ON_ERROR,e)}}class Nj extends e3{constructor(e){const t=e.projection||"EPSG:3857",r=e.extent||Jx(t),i=e.tileGrid||sO({extent:r,maxResolution:e.maxResolution,maxZoom:e.maxZoom!==void 0?e.maxZoom:22,minZoom:e.minZoom,tileSize:e.tileSize||512});super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,interpolate:!0,projection:t,state:e.state,tileGrid:i,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:Wj,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX===void 0?!0:e.wrapX,transition:e.transition,zDirection:e.zDirection===void 0?1:e.zDirection}),this.format_=e.format?e.format:null,this.tileKeysBySourceTileUrl_={},this.sourceTiles_={},this.overlaps_=e.overlaps==null?!0:e.overlaps,this.tileClass=e.tileClass?e.tileClass:wj,this.tileGrids_={}}getOverlaps(){return this.overlaps_}getSourceTiles(e,t,r){if(r.getState()===Nr.IDLE){r.setState(Nr.LOADING);const i=r.wrappedTileCoord,s=this.getTileGridForProjection(t),a=s.getTileCoordExtent(i),o=i[0],d=s.getResolution(o);D0(a,-d,a);const g=this.tileGrid,b=g.getExtent();b&&_p(a,b,a);const E=g.getZForResolution(d,this.zDirection);g.forEachTileCoord(a,E,S=>{const I=this.tileUrlFunction(S,e,t);this.sourceTiles_[I]||(this.sourceTiles_[I]=new this.tileClass(S,I?Nr.IDLE:Nr.EMPTY,I,this.format_,this.tileLoadFunction));const P=this.sourceTiles_[I];r.sourceTiles.push(P),this.tileKeysBySourceTileUrl_[I]||(this.tileKeysBySourceTileUrl_[I]=[]),this.tileKeysBySourceTileUrl_[I].push(r.getKey());const z=P.getState();if(z<Nr.LOADED){const j=q=>{this.handleTileChange(q);const Y=P.getState();if(Y===Nr.LOADED||Y===Nr.ERROR){const ie=P.getKey();ie in r.errorTileKeys?P.getState()===Nr.LOADED&&delete r.errorTileKeys[ie]:r.loadingSourceTiles--,Y===Nr.ERROR?r.errorTileKeys[ie]=!0:P.removeEventListener(lo.CHANGE,j),r.loadingSourceTiles===0&&r.setState(z0(r.errorTileKeys)?Nr.LOADED:Nr.ERROR)}};P.addEventListener(lo.CHANGE,j),r.loadingSourceTiles++}z===Nr.IDLE&&(P.extent=g.getTileCoordExtent(S),P.projection=t,P.resolution=g.getResolution(S[0]),P.load())}),r.loadingSourceTiles||r.setState(r.sourceTiles.some(S=>S.getState()===Nr.ERROR)?Nr.ERROR:Nr.LOADED)}return r.sourceTiles}removeSourceTiles(e){const t=e.getKey(),r=e.sourceTiles;for(let i=0,s=r.length;i<s;++i){const a=r[i].getTileUrl();if(!this.tileKeysBySourceTileUrl_[a])return;const o=this.tileKeysBySourceTileUrl_[a].indexOf(t);o!==-1&&(this.tileKeysBySourceTileUrl_[a].splice(o,1),this.tileKeysBySourceTileUrl_[a].length===0&&(delete this.tileKeysBySourceTileUrl_[a],delete this.sourceTiles_[a]))}}getTile(e,t,r,i,s){const a=[e,t,r];let o=this.getTileCoordForTileUrlFunction(a,s);const d=this.getTileGrid().getExtent(),g=this.getTileGridForProjection(s);if(o&&d){const S=g.getTileCoordExtent(o);D0(S,-g.getResolution(e),S),Du(d,S)||(o=null)}let b=!0;if(o!==null){const S=this.tileGrid,I=g.getResolution(e),P=S.getZForResolution(I,1),z=g.getTileCoordExtent(o);D0(z,-I,z),S.forEachTileCoord(z,P,j=>{b=b&&!this.tileUrlFunction(j,i,s)})}const E=new kne(a,b?Nr.EMPTY:Nr.IDLE,o,this.getSourceTiles.bind(this,i,s),this.removeSourceTiles.bind(this));return E.key=this.getKey(),E}getTileGridForProjection(e){const t=e.getCode();let r=this.tileGrids_[t];if(!r){const i=this.tileGrid,s=i.getResolutions().slice(),a=s.map(function(g,b){return i.getOrigin(b)}),o=s.map(function(g,b){return i.getTileSize(b)}),d=fj+1;for(let g=s.length;g<d;++g)s.push(s[g-1]/2),a.push(a[g-1]),o.push(o[g-1]);r=new Xx({extent:i.getExtent(),origins:a,resolutions:s,tileSizes:o}),this.tileGrids_[t]=r}return r}getTilePixelRatio(e){return e}getTilePixelSize(e,t,r){const i=this.getTileGridForProjection(r),s=Ad(i.getTileSize(e),this.tmpSize);return[Math.round(s[0]*t),Math.round(s[1]*t)]}setOverlaps(e){this.overlaps_=e,this.changed()}}function Wj(n,e){n.setLoader(function(t,r,i){Xz(e,n.getFormat(),t,r,i,n.onLoad.bind(n),n.onError.bind(n))})}function Gj(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var sie={},Qj,_k={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function AC(n){return n=Math.round(n),n<0?0:n>255?255:n}function bk(n){return n<0?0:n>1?1:n}function d5(n){return n[n.length-1]==="%"?AC(parseFloat(n)/100*255):AC(parseInt(n))}function _b(n){return n[n.length-1]==="%"?bk(parseFloat(n)/100):bk(parseFloat(n))}function h5(n,e,t){return t<0?t+=1:t>1&&(t-=1),t*6<1?n+(e-n)*t*6:t*2<1?e:t*3<2?n+(e-n)*(2/3-t)*6:n}function aie(n){var e=n.replace(/ /g,"").toLowerCase();if(e in _k)return _k[e].slice();if(e[0]==="#"){if(e.length===4){var t=parseInt(e.substr(1),16);return t>=0&&t<=4095?[(t&3840)>>4|(t&3840)>>8,t&240|(t&240)>>4,t&15|(t&15)<<4,1]:null}else if(e.length===7){var t=parseInt(e.substr(1),16);return t>=0&&t<=16777215?[(t&16711680)>>16,(t&65280)>>8,t&255,1]:null}return null}var r=e.indexOf("("),i=e.indexOf(")");if(r!==-1&&i+1===e.length){var s=e.substr(0,r),a=e.substr(r+1,i-(r+1)).split(","),o=1;switch(s){case"rgba":if(a.length!==4)return null;o=_b(a.pop());case"rgb":return a.length!==3?null:[d5(a[0]),d5(a[1]),d5(a[2]),o];case"hsla":if(a.length!==4)return null;o=_b(a.pop());case"hsl":if(a.length!==3)return null;var d=(parseFloat(a[0])%360+360)%360/360,g=_b(a[1]),b=_b(a[2]),E=b<=.5?b*(g+1):b+g-b*g,S=b*2-E;return[AC(h5(S,E,d+1/3)*255),AC(h5(S,E,d)*255),AC(h5(S,E,d-1/3)*255),o];default:return null}}return null}try{Qj=sie.parseCSSColor=aie}catch{}class mh{constructor(e,t,r,i=1){this.r=e,this.g=t,this.b=r,this.a=i}static parse(e){if(!e)return;if(e instanceof mh)return e;if(typeof e!="string")return;const t=Qj(e);if(t)return new mh(t[0]/255*t[3],t[1]/255*t[3],t[2]/255*t[3],t[3])}toString(){const[e,t,r,i]=this.toArray();return`rgba(${Math.round(e)},${Math.round(t)},${Math.round(r)},${i})`}toArray(){const{r:e,g:t,b:r,a:i}=this;return i===0?[0,0,0,0]:[e*255/i,t*255/i,r*255/i,i]}toArray01(){const{r:e,g:t,b:r,a:i}=this;return i===0?[0,0,0,0]:[e/i,t/i,r/i,i]}toArray01PremultipliedAlpha(){const{r:e,g:t,b:r,a:i}=this;return[e,t,r,i]}}mh.black=new mh(0,0,0,1);mh.white=new mh(1,1,1,1);mh.transparent=new mh(0,0,0,0);mh.red=new mh(1,0,0,1);mh.blue=new mh(0,0,1,1);var nf=mh;function LC(n){return typeof n=="object"?["literal",n]:n}function lie(n,e){let t=n.stops;if(!t)return uie(n,e);const r=t&&typeof t[0][0]=="object",i=r||n.property!==void 0,s=r||!i;return t=t.map(a=>!i&&e.tokens&&typeof a[1]=="string"?[a[0],hie(a[1])]:[a[0],LC(a[1])]),r?Aie(n,e,t):s?die(n,e,t):yB(n,e,t)}function uie(n,e){const t=["get",n.property];if(n.default===void 0)return e.type==="string"?["string",t]:t;if(e.type==="enum")return["match",t,Object.keys(e.values),t,n.default];{const r=[e.type==="color"?"to-color":e.type,t,LC(n.default)];return e.type==="array"&&r.splice(1,0,e.value,e.length||null),r}}function aO(n){switch(n.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function Aie(n,e,t){const r={},i={},s=[];for(let o=0;o<t.length;o++){const d=t[o],g=d[0].zoom;r[g]===void 0&&(r[g]={zoom:g,type:n.type,property:n.property,default:n.default},i[g]=[],s.push(g)),i[g].push([d[0].value,d[1]])}if(uO({},e)==="exponential"){const o=[aO(n),["linear"],["zoom"]];for(const d of s){const g=yB(r[d],e,i[d]);_y(o,d,g,!1)}return o}else{const o=["step",["zoom"]];for(const d of s){const g=yB(r[d],e,i[d]);_y(o,d,g,!0)}return lO(o),o}}function cie(n,e){if(n!==void 0)return n;if(e!==void 0)return e}function xk(n,e){const t=LC(cie(n.default,e.default));return t===void 0&&e.type==="resolvedImage"?"":t}function yB(n,e,t){const r=uO(n,e),i=["get",n.property];if(r==="categorical"&&typeof t[0][0]=="boolean"){const s=["case"];for(const a of t)s.push(["==",i,a[0]],a[1]);return s.push(xk(n,e)),s}else if(r==="categorical"){const s=["match",i];for(const a of t)_y(s,a[0],a[1],!1);return s.push(xk(n,e)),s}else if(r==="interval"){const s=["step",["number",i]];for(const a of t)_y(s,a[0],a[1],!0);return lO(s),n.default===void 0?s:["case",["==",["typeof",i],"number"],s,LC(n.default)]}else if(r==="exponential"){const s=n.base!==void 0?n.base:1,a=[aO(n),s===1?["linear"]:["exponential",s],["number",i]];for(const o of t)_y(a,o[0],o[1],!1);return n.default===void 0?a:["case",["==",["typeof",i],"number"],a,LC(n.default)]}else throw new Error(`Unknown property function type ${r}`)}function die(n,e,t,r=["zoom"]){const i=uO(n,e);let s,a=!1;if(i==="interval")s=["step",r],a=!0;else if(i==="exponential"){const o=n.base!==void 0?n.base:1;s=[aO(n),o===1?["linear"]:["exponential",o],r]}else throw new Error(`Unknown zoom function type "${i}"`);for(const o of t)_y(s,o[0],o[1],a);return lO(s),s}function lO(n){n[0]==="step"&&n.length===3&&(n.push(0),n.push(n[3]))}function _y(n,e,t,r){n.length>3&&e===n[n.length-2]||(r&&n.length===2||n.push(e),n.push(t))}function uO(n,e){return n.type?n.type:e.expression.interpolated?"exponential":"interval"}function hie(n){const e=["concat"],t=/{([^{}]+)}/g;let r=0;for(let i=t.exec(n);i!==null;i=t.exec(n)){const s=n.slice(r,t.lastIndex-i[0].length);r=t.lastIndex,s.length>0&&e.push(s),e.push(["get",i[1]])}if(e.length===1)return n;if(r<n.length)e.push(n.slice(r));else if(e.length===2)return["to-string",e[1]];return e}class fie extends Error{constructor(e,t){super(t),this.message=t,this.key=e}}var Vp=fie;class AO{constructor(e,t=[]){this.parent=e,this.bindings={};for(const[r,i]of t)this.bindings[r]=i}concat(e){return new AO(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return this.bindings[e]?!0:this.parent?this.parent.has(e):!1}}var pie=AO;const t3={kind:"null"},Ir={kind:"number"},As={kind:"string"},Yo={kind:"boolean"},zm={kind:"color"},by={kind:"object"},Vo={kind:"value"},mie={kind:"error"},n3={kind:"collator"},r3={kind:"formatted"},m_={kind:"resolvedImage"};function Ff(n,e){return{kind:"array",itemType:n,N:e}}function $l(n){if(n.kind==="array"){const e=$l(n.itemType);return typeof n.N=="number"?`array<${e}, ${n.N}>`:n.itemType.kind==="value"?"array":`array<${e}>`}else return n.kind}const gie=[t3,Ir,As,Yo,zm,r3,by,Ff(Vo),m_];function UC(n,e){if(e.kind==="error")return null;if(n.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!UC(n.itemType,e.itemType))&&(typeof n.N!="number"||n.N===e.N))return null}else{if(n.kind===e.kind)return null;if(n.kind==="value"){for(const t of gie)if(!UC(t,e))return null}}return`Expected ${$l(n)} but found ${$l(e)} instead.`}function cO(n,e){return e.some(t=>t.kind===n.kind)}function zC(n,e){return e.some(t=>t==="null"?n===null:t==="array"?Array.isArray(n):t==="object"?n&&!Array.isArray(n)&&typeof n=="object":t===typeof n)}class dO{constructor(e,t,r){e?this.sensitivity=t?"variant":"case":this.sensitivity=t?"accent":"base",this.locale=r,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,t){return this.collator.compare(e,t)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class vB{constructor(e,t,r,i,s){this.text=e.normalize?e.normalize():e,this.image=t,this.scale=r,this.fontStack=i,this.textColor=s}}class im{constructor(e){this.sections=e}static fromString(e){return new im([new vB(e,null,null,null,null)])}isEmpty(){return this.sections.length===0?!0:!this.sections.some(e=>e.text.length!==0||e.image&&e.image.name.length!==0)}static factory(e){return e instanceof im?e:im.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map(e=>e.text).join("")}serialize(){const e=["format"];for(const t of this.sections){if(t.image){e.push(["image",t.image.name]);continue}e.push(t.text);const r={};t.fontStack&&(r["text-font"]=["literal",t.fontStack.split(",")]),t.scale&&(r["font-scale"]=t.scale),t.textColor&&(r["text-color"]=["rgba"].concat(t.textColor.toArray())),e.push(r)}return e}}class W0{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new W0({name:e,available:!1}):null}serialize(){return["image",this.name]}}function qj(n,e,t,r){return typeof n=="number"&&n>=0&&n<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof t=="number"&&t>=0&&t<=255?typeof r>"u"||typeof r=="number"&&r>=0&&r<=1?null:`Invalid rgba value [${[n,e,t,r].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof r=="number"?[n,e,t,r]:[n,e,t]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function z2(n){if(n===null)return!0;if(typeof n=="string")return!0;if(typeof n=="boolean")return!0;if(typeof n=="number")return!0;if(n instanceof nf)return!0;if(n instanceof dO)return!0;if(n instanceof im)return!0;if(n instanceof W0)return!0;if(Array.isArray(n)){for(const e of n)if(!z2(e))return!1;return!0}else if(typeof n=="object"){for(const e in n)if(!z2(n[e]))return!1;return!0}else return!1}function ZA(n){if(n===null)return t3;if(typeof n=="string")return As;if(typeof n=="boolean")return Yo;if(typeof n=="number")return Ir;if(n instanceof nf)return zm;if(n instanceof dO)return n3;if(n instanceof im)return r3;if(n instanceof W0)return m_;if(Array.isArray(n)){const e=n.length;let t;for(const r of n){const i=ZA(r);if(!t)t=i;else{if(t===i)continue;t=Vo;break}}return Ff(t||Vo,e)}else return by}function cC(n){const e=typeof n;return n===null?"":e==="string"||e==="number"||e==="boolean"?String(n):n instanceof nf||n instanceof im||n instanceof W0?n.toString():JSON.stringify(n)}class hO{constructor(e,t){this.type=e,this.value=t}static parse(e,t){if(e.length!==2)return t.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!z2(e[1]))return t.error("invalid value");const r=e[1];let i=ZA(r);const s=t.expectedType;return i.kind==="array"&&i.N===0&&s&&s.kind==="array"&&(typeof s.N!="number"||s.N===0)&&(i=s),new hO(i,r)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof nf?["rgba"].concat(this.value.toArray()):this.value instanceof im?this.value.serialize():this.value}}var j2=hO;class yie{constructor(e){this.name="ExpressionEvaluationError",this.message=e}toJSON(){return this.message}}var jc=yie;const f5={string:As,number:Ir,boolean:Yo,object:by};class fO{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let r=1,i;const s=e[0];if(s==="array"){let o;if(e.length>2){const g=e[1];if(typeof g!="string"||!(g in f5)||g==="object")return t.error('The item type argument of "array" must be one of string, number, boolean',1);o=f5[g],r++}else o=Vo;let d;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);d=e[2],r++}i=Ff(o,d)}else i=f5[s];const a=[];for(;r<e.length;r++){const o=t.parse(e[r],r,Vo);if(!o)return null;a.push(o)}return new fO(i,a)}evaluate(e){for(let t=0;t<this.args.length;t++){const r=this.args[t].evaluate(e);if(UC(this.type,ZA(r))){if(t===this.args.length-1)throw new jc(`Expected value to be of type ${$l(this.type)}, but found ${$l(ZA(r))} instead.`)}else return r}return null}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=this.type,t=[e.kind];if(e.kind==="array"){const r=e.itemType;if(r.kind==="string"||r.kind==="number"||r.kind==="boolean"){t.push(r.kind);const i=e.N;(typeof i=="number"||this.args.length>1)&&t.push(i)}}return t.concat(this.args.map(r=>r.serialize()))}}var Km=fO;class i3{constructor(e){this.type=r3,this.sections=e}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const r=e[1];if(!Array.isArray(r)&&typeof r=="object")return t.error("First argument must be an image or text section.");const i=[];let s=!1;for(let a=1;a<=e.length-1;++a){const o=e[a];if(s&&typeof o=="object"&&!Array.isArray(o)){s=!1;let d=null;if(o["font-scale"]&&(d=t.parse(o["font-scale"],1,Ir),!d))return null;let g=null;if(o["text-font"]&&(g=t.parse(o["text-font"],1,Ff(As)),!g))return null;let b=null;if(o["text-color"]&&(b=t.parse(o["text-color"],1,zm),!b))return null;const E=i[i.length-1];E.scale=d,E.font=g,E.textColor=b}else{const d=t.parse(e[a],1,Vo);if(!d)return null;const g=d.type.kind;if(g!=="string"&&g!=="value"&&g!=="null"&&g!=="resolvedImage")return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");s=!0,i.push({content:d,scale:null,font:null,textColor:null})}}return new i3(i)}evaluate(e){const t=r=>{const i=r.content.evaluate(e);return ZA(i)===m_?new vB("",i,null,null,null):new vB(cC(i),null,r.scale?r.scale.evaluate(e):null,r.font?r.font.evaluate(e).join(","):null,r.textColor?r.textColor.evaluate(e):null)};return new im(this.sections.map(t))}eachChild(e){for(const t of this.sections)e(t.content),t.scale&&e(t.scale),t.font&&e(t.font),t.textColor&&e(t.textColor)}outputDefined(){return!1}serialize(){const e=["format"];for(const t of this.sections){e.push(t.content.serialize());const r={};t.scale&&(r["font-scale"]=t.scale.serialize()),t.font&&(r["text-font"]=t.font.serialize()),t.textColor&&(r["text-color"]=t.textColor.serialize()),e.push(r)}return e}}class o3{constructor(e){this.type=m_,this.input=e}static parse(e,t){if(e.length!==2)return t.error("Expected two arguments.");const r=t.parse(e[1],1,As);return r?new o3(r):t.error("No image name provided.")}evaluate(e){const t=this.input.evaluate(e),r=W0.fromString(t);return r&&e.availableImages&&(r.available=e.availableImages.indexOf(t)>-1),r}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const vie={"to-boolean":Yo,"to-color":zm,"to-number":Ir,"to-string":As};class pO{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const r=e[0];if((r==="to-boolean"||r==="to-string")&&e.length!==2)return t.error("Expected one argument.");const i=vie[r],s=[];for(let a=1;a<e.length;a++){const o=t.parse(e[a],a,Vo);if(!o)return null;s.push(o)}return new pO(i,s)}evaluate(e){if(this.type.kind==="boolean")return!!this.args[0].evaluate(e);if(this.type.kind==="color"){let t,r;for(const i of this.args){if(t=i.evaluate(e),r=null,t instanceof nf)return t;if(typeof t=="string"){const s=e.parseColor(t);if(s)return s}else if(Array.isArray(t)&&(t.length<3||t.length>4?r=`Invalid rbga value ${JSON.stringify(t)}: expected an array containing either three or four numeric values.`:r=qj(t[0],t[1],t[2],t[3]),!r))return new nf(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new jc(r||`Could not parse color from value '${typeof t=="string"?t:String(JSON.stringify(t))}'`)}else if(this.type.kind==="number"){let t=null;for(const r of this.args){if(t=r.evaluate(e),t===null)return 0;const i=Number(t);if(!isNaN(i))return i}throw new jc(`Could not convert ${JSON.stringify(t)} to number.`)}else return this.type.kind==="formatted"?im.fromString(cC(this.args[0].evaluate(e))):this.type.kind==="resolvedImage"?W0.fromString(cC(this.args[0].evaluate(e))):cC(this.args[0].evaluate(e))}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){if(this.type.kind==="formatted")return new i3([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new o3(this.args[0]).serialize();const e=[`to-${this.type.kind}`];return this.eachChild(t=>{e.push(t.serialize())}),e}}var ly=pO;const Cie=["Unknown","Point","LineString","Polygon"];class _ie{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Cie[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const e=this.featureDistanceData.center,t=this.featureDistanceData.scale,{x:r,y:i}=this.featureTileCoord,s=r*t-e[0],a=i*t-e[1],o=this.featureDistanceData.bearing[0],d=this.featureDistanceData.bearing[1];return o*s+d*a}return 0}parseColor(e){let t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=nf.parse(e)),t}}var Yj=_ie;class uy{constructor(e,t,r,i){this.name=e,this.type=t,this._evaluate=r,this.args=i}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(e=>e.serialize()))}static parse(e,t){const r=e[0],i=uy.definitions[r];if(!i)return t.error(`Unknown expression "${r}". If you wanted a literal array, use ["literal", [...]].`,0);const s=Array.isArray(i)?i[0]:i.type,a=Array.isArray(i)?[[i[1],i[2]]]:i.overloads,o=a.filter(([g])=>!Array.isArray(g)||g.length===e.length-1);let d=null;for(const[g,b]of o){d=new Xj(t.registry,t.path,null,t.scope);const E=[];let S=!1;for(let I=1;I<e.length;I++){const P=e[I],z=Array.isArray(g)?g[I-1]:g.type,j=d.parse(P,1+E.length,z);if(!j){S=!0;break}E.push(j)}if(!S){if(Array.isArray(g)&&g.length!==E.length){d.error(`Expected ${g.length} arguments, but found ${E.length} instead.`);continue}for(let I=0;I<E.length;I++){const P=Array.isArray(g)?g[I]:g.type,z=E[I];d.concat(I+1).checkSubtype(P,z.type)}if(d.errors.length===0)return new uy(r,s,b,E)}}if(o.length===1)t.errors.push(...d.errors);else{const b=(o.length?o:a).map(([S])=>bie(S)).join(" | "),E=[];for(let S=1;S<e.length;S++){const I=t.parse(e[S],1+E.length);if(!I)return null;E.push($l(I.type))}t.error(`Expected arguments of type ${b}, but found (${E.join(", ")}) instead.`)}return null}static register(e,t){uy.definitions=t;for(const r in t)e[r]=uy}}function bie(n){return Array.isArray(n)?`(${n.map($l).join(", ")})`:`(${$l(n.type)}...)`}var ev=uy;class s3{constructor(e,t,r){this.type=n3,this.locale=r,this.caseSensitive=e,this.diacriticSensitive=t}static parse(e,t){if(e.length!==2)return t.error("Expected one argument.");const r=e[1];if(typeof r!="object"||Array.isArray(r))return t.error("Collator options argument must be an object.");const i=t.parse(r["case-sensitive"]===void 0?!1:r["case-sensitive"],1,Yo);if(!i)return null;const s=t.parse(r["diacritic-sensitive"]===void 0?!1:r["diacritic-sensitive"],1,Yo);if(!s)return null;let a=null;return r.locale&&(a=t.parse(r.locale,1,As),!a)?null:new s3(i,s,a)}evaluate(e){return new dO(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}serialize(){const e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]}}const F0=8192;function mO(n,e){n[0]=Math.min(n[0],e[0]),n[1]=Math.min(n[1],e[1]),n[2]=Math.max(n[2],e[0]),n[3]=Math.max(n[3],e[1])}function xie(n){return(180+n)/360}function wie(n){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n*Math.PI/360)))/360}function N2(n,e){return!(n[0]<=e[0]||n[2]>=e[2]||n[1]<=e[1]||n[3]>=e[3])}function Mie(n,e){const t=xie(n[0]),r=wie(n[1]),i=Math.pow(2,e.z);return[Math.round(t*i*F0),Math.round(r*i*F0)]}function Sie(n,e,t){const r=n[0]-e[0],i=n[1]-e[1],s=n[0]-t[0],a=n[1]-t[1];return r*a-s*i===0&&r*s<=0&&i*a<=0}function Eie(n,e,t){return e[1]>n[1]!=t[1]>n[1]&&n[0]<(t[0]-e[0])*(n[1]-e[1])/(t[1]-e[1])+e[0]}function gO(n,e){let t=!1;for(let r=0,i=e.length;r<i;r++){const s=e[r];for(let a=0,o=s.length;a<o-1;a++){if(Sie(n,s[a],s[a+1]))return!1;Eie(n,s[a],s[a+1])&&(t=!t)}}return t}function Bie(n,e){for(let t=0;t<e.length;t++)if(gO(n,e[t]))return!0;return!1}function Oie(n,e){return n[0]*e[1]-n[1]*e[0]}function wk(n,e,t,r){const i=n[0]-t[0],s=n[1]-t[1],a=e[0]-t[0],o=e[1]-t[1],d=r[0]-t[0],g=r[1]-t[1],b=i*g-d*s,E=a*g-d*o;return b>0&&E<0||b<0&&E>0}function Iie(n,e,t,r){const i=[e[0]-n[0],e[1]-n[1]],s=[r[0]-t[0],r[1]-t[1]];return Oie(s,i)===0?!1:!!(wk(n,e,t,r)&&wk(t,r,n,e))}function kie(n,e,t){for(const r of t)for(let i=0;i<r.length-1;++i)if(Iie(n,e,r[i],r[i+1]))return!0;return!1}function $j(n,e){for(let t=0;t<n.length;++t)if(!gO(n[t],e))return!1;for(let t=0;t<n.length-1;++t)if(kie(n[t],n[t+1],e))return!1;return!0}function Tie(n,e){for(let t=0;t<e.length;t++)if($j(n,e[t]))return!0;return!1}function yO(n,e,t){const r=[];for(let i=0;i<n.length;i++){const s=[];for(let a=0;a<n[i].length;a++){const o=Mie(n[i][a],t);mO(e,o),s.push(o)}r.push(s)}return r}function Vj(n,e,t){const r=[];for(let i=0;i<n.length;i++){const s=yO(n[i],e,t);r.push(s)}return r}function Hj(n,e,t,r){if(n[0]<t[0]||n[0]>t[2]){const i=r*.5;let s=n[0]-t[0]>i?-r:t[0]-n[0]>i?r:0;s===0&&(s=n[0]-t[2]>i?-r:t[2]-n[0]>i?r:0),n[0]+=s}mO(e,n)}function Pie(n){n[0]=n[1]=1/0,n[2]=n[3]=-1/0}function Mk(n,e,t,r){const i=Math.pow(2,r.z)*F0,s=[r.x*F0,r.y*F0],a=[];if(!n)return a;for(const o of n)for(const d of o){const g=[d.x+s[0],d.y+s[1]];Hj(g,e,t,i),a.push(g)}return a}function Sk(n,e,t,r){const i=Math.pow(2,r.z)*F0,s=[r.x*F0,r.y*F0],a=[];if(!n)return a;for(const o of n){const d=[];for(const g of o){const b=[g.x+s[0],g.y+s[1]];mO(e,b),d.push(b)}a.push(d)}if(e[2]-e[0]<=i/2){Pie(e);for(const o of a)for(const d of o)Hj(d,e,t,i)}return a}function Kie(n,e){const t=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=n.canonicalID();if(!i)return!1;if(e.type==="Polygon"){const s=yO(e.coordinates,r,i),a=Mk(n.geometry(),t,r,i);if(!N2(t,r))return!1;for(const o of a)if(!gO(o,s))return!1}if(e.type==="MultiPolygon"){const s=Vj(e.coordinates,r,i),a=Mk(n.geometry(),t,r,i);if(!N2(t,r))return!1;for(const o of a)if(!Bie(o,s))return!1}return!0}function Die(n,e){const t=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=n.canonicalID();if(!i)return!1;if(e.type==="Polygon"){const s=yO(e.coordinates,r,i),a=Sk(n.geometry(),t,r,i);if(!N2(t,r))return!1;for(const o of a)if(!$j(o,s))return!1}if(e.type==="MultiPolygon"){const s=Vj(e.coordinates,r,i),a=Sk(n.geometry(),t,r,i);if(!N2(t,r))return!1;for(const o of a)if(!Tie(o,s))return!1}return!0}class dC{constructor(e,t){this.type=Yo,this.geojson=e,this.geometries=t}static parse(e,t){if(e.length!==2)return t.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(z2(e[1])){const r=e[1];if(r.type==="FeatureCollection")for(let i=0;i<r.features.length;++i){const s=r.features[i].geometry.type;if(s==="Polygon"||s==="MultiPolygon")return new dC(r,r.features[i].geometry)}else if(r.type==="Feature"){const i=r.geometry.type;if(i==="Polygon"||i==="MultiPolygon")return new dC(r,r.geometry)}else if(r.type==="Polygon"||r.type==="MultiPolygon")return new dC(r,r)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return Kie(e,this.geometries);if(e.geometryType()==="LineString")return Die(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var vO=dC;function a3(n){if(n instanceof ev){if(n.name==="get"&&n.args.length===1)return!1;if(n.name==="feature-state")return!1;if(n.name==="has"&&n.args.length===1)return!1;if(n.name==="properties"||n.name==="geometry-type"||n.name==="id")return!1;if(/^filter-/.test(n.name))return!1}if(n instanceof vO)return!1;let e=!0;return n.eachChild(t=>{e&&!a3(t)&&(e=!1)}),e}function CO(n){if(n instanceof ev&&n.name==="feature-state")return!1;let e=!0;return n.eachChild(t=>{e&&!CO(t)&&(e=!1)}),e}function _O(n,e){if(n instanceof ev&&e.indexOf(n.name)>=0)return!1;let t=!0;return n.eachChild(r=>{t&&!_O(r,e)&&(t=!1)}),t}class bO{constructor(e,t){this.type=t.type,this.name=e,this.boundExpression=t}static parse(e,t){if(e.length!==2||typeof e[1]!="string")return t.error("'var' expression requires exactly one string literal argument.");const r=e[1];return t.scope.has(r)?new bO(r,t.scope.get(r)):t.error(`Unknown variable "${r}". Make sure "${r}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var Zj=bO;class xO{constructor(e,t=[],r,i=new pie,s=[]){this.registry=e,this.path=t,this.key=t.map(a=>`[${a}]`).join(""),this.scope=i,this.errors=s,this.expectedType=r}parse(e,t,r,i,s={}){return t?this.concat(t,r,i)._parse(e,s):this._parse(e,s)}_parse(e,t){(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number")&&(e=["literal",e]);function r(i,s,a){return a==="assert"?new Km(s,[i]):a==="coerce"?new ly(s,[i]):i}if(Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const i=e[0];if(typeof i!="string")return this.error(`Expression name must be a string, but found ${typeof i} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const s=this.registry[i];if(s){let a=s.parse(e,this);if(!a)return null;if(this.expectedType){const o=this.expectedType,d=a.type;if((o.kind==="string"||o.kind==="number"||o.kind==="boolean"||o.kind==="object"||o.kind==="array")&&d.kind==="value")a=r(a,o,t.typeAnnotation||"assert");else if((o.kind==="color"||o.kind==="formatted"||o.kind==="resolvedImage")&&(d.kind==="value"||d.kind==="string"))a=r(a,o,t.typeAnnotation||"coerce");else if(this.checkSubtype(o,d))return null}if(!(a instanceof j2)&&a.type.kind!=="resolvedImage"&&CB(a)){const o=new Yj;try{a=new j2(a.type,a.evaluate(o))}catch(d){return this.error(d.message),null}}return a}return this.error(`Unknown expression "${i}". If you wanted a literal array, use ["literal", [...]].`,0)}else return typeof e>"u"?this.error("'undefined' value invalid. Use null instead."):typeof e=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof e} instead.`)}concat(e,t,r){const i=typeof e=="number"?this.path.concat(e):this.path,s=r?this.scope.concat(r):this.scope;return new xO(this.registry,i,t||null,s,this.errors)}error(e,...t){const r=`${this.key}${t.map(i=>`[${i}]`).join("")}`;this.errors.push(new Vp(r,e))}checkSubtype(e,t){const r=UC(e,t);return r&&this.error(r),r}}var Xj=xO;function CB(n){if(n instanceof Zj)return CB(n.boundExpression);if(n instanceof ev&&n.name==="error")return!1;if(n instanceof s3)return!1;if(n instanceof vO)return!1;const e=n instanceof ly||n instanceof Km;let t=!0;return n.eachChild(r=>{e?t=t&&CB(r):t=t&&r instanceof j2}),t?a3(n)&&_O(n,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"]):!1}function Jj(n,e){const t=n.length-1;let r=0,i=t,s=0,a,o;for(;r<=i;)if(s=Math.floor((r+i)/2),a=n[s],o=n[s+1],a<=e){if(s===t||e<o)return s;r=s+1}else if(a>e)i=s-1;else throw new jc("Input is not a number.");return 0}class wO{constructor(e,t,r){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(const[i,s]of r)this.labels.push(i),this.outputs.push(s)}static parse(e,t){if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");const r=t.parse(e[1],1,Ir);if(!r)return null;const i=[];let s=null;t.expectedType&&t.expectedType.kind!=="value"&&(s=t.expectedType);for(let a=1;a<e.length;a+=2){const o=a===1?-1/0:e[a],d=e[a+1],g=a,b=a+1;if(typeof o!="number")return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',g);if(i.length&&i[i.length-1][0]>=o)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',g);const E=t.parse(d,b,s);if(!E)return null;s=s||E.type,i.push([o,E])}return new wO(s,r,i)}evaluate(e){const t=this.labels,r=this.outputs;if(t.length===1)return r[0].evaluate(e);const i=this.input.evaluate(e);if(i<=t[0])return r[0].evaluate(e);const s=t.length;if(i>=t[s-1])return r[s-1].evaluate(e);const a=Jj(t,i);return r[a].evaluate(e)}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){const e=["step",this.input.serialize()];for(let t=0;t<this.labels.length;t++)t>0&&e.push(this.labels[t]),e.push(this.outputs[t].serialize());return e}}var eN=wO,Rie=tv;function tv(n,e,t,r){this.cx=3*n,this.bx=3*(t-n)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(r-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=n,this.p1y=r,this.p2x=t,this.p2y=r}tv.prototype.sampleCurveX=function(n){return((this.ax*n+this.bx)*n+this.cx)*n};tv.prototype.sampleCurveY=function(n){return((this.ay*n+this.by)*n+this.cy)*n};tv.prototype.sampleCurveDerivativeX=function(n){return(3*this.ax*n+2*this.bx)*n+this.cx};tv.prototype.solveCurveX=function(n,e){typeof e>"u"&&(e=1e-6);var t,r,i,s,a;for(i=n,a=0;a<8;a++){if(s=this.sampleCurveX(i)-n,Math.abs(s)<e)return i;var o=this.sampleCurveDerivativeX(i);if(Math.abs(o)<1e-6)break;i=i-s/o}if(t=0,r=1,i=n,i<t)return t;if(i>r)return r;for(;t<r;){if(s=this.sampleCurveX(i),Math.abs(s-n)<e)return i;n>s?t=i:r=i,i=(r-t)*.5+t}return i};tv.prototype.solve=function(n,e){return this.sampleCurveY(this.solveCurveX(n,e))};var Fie=Gj(Rie);function ef(n,e,t){return n*(1-t)+e*t}function Lie(n,e,t){return new nf(ef(n.r,e.r,t),ef(n.g,e.g,t),ef(n.b,e.b,t),ef(n.a,e.a,t))}function Uie(n,e,t){return n.map((r,i)=>ef(r,e[i],t))}var zie=Object.freeze({__proto__:null,number:ef,color:Lie,array:Uie});const tN=.95047,nN=1,rN=1.08883,iN=4/29,xy=6/29,oN=3*xy*xy,jie=xy*xy*xy,Nie=Math.PI/180,Wie=180/Math.PI;function p5(n){return n>jie?Math.pow(n,1/3):n/oN+iN}function m5(n){return n>xy?n*n*n:oN*(n-iN)}function g5(n){return 255*(n<=.0031308?12.92*n:1.055*Math.pow(n,1/2.4)-.055)}function y5(n){return n/=255,n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function sN(n){const e=y5(n.r),t=y5(n.g),r=y5(n.b),i=p5((.4124564*e+.3575761*t+.1804375*r)/tN),s=p5((.2126729*e+.7151522*t+.072175*r)/nN),a=p5((.0193339*e+.119192*t+.9503041*r)/rN);return{l:116*s-16,a:500*(i-s),b:200*(s-a),alpha:n.a}}function aN(n){let e=(n.l+16)/116,t=isNaN(n.a)?e:e+n.a/500,r=isNaN(n.b)?e:e-n.b/200;return e=nN*m5(e),t=tN*m5(t),r=rN*m5(r),new nf(g5(3.2404542*t-1.5371385*e-.4985314*r),g5(-.969266*t+1.8760108*e+.041556*r),g5(.0556434*t-.2040259*e+1.0572252*r),n.alpha)}function Gie(n,e,t){return{l:ef(n.l,e.l,t),a:ef(n.a,e.a,t),b:ef(n.b,e.b,t),alpha:ef(n.alpha,e.alpha,t)}}function Qie(n){const{l:e,a:t,b:r}=sN(n),i=Math.atan2(r,t)*Wie;return{h:i<0?i+360:i,c:Math.sqrt(t*t+r*r),l:e,alpha:n.a}}function qie(n){const e=n.h*Nie,t=n.c,r=n.l;return aN({l:r,a:Math.cos(e)*t,b:Math.sin(e)*t,alpha:n.alpha})}function Yie(n,e,t){const r=e-n;return n+t*(r>180||r<-180?r-360*Math.round(r/360):r)}function $ie(n,e,t){return{h:Yie(n.h,e.h,t),c:ef(n.c,e.c,t),l:ef(n.l,e.l,t),alpha:ef(n.alpha,e.alpha,t)}}const bb={forward:sN,reverse:aN,interpolate:Gie},xb={forward:Qie,reverse:qie,interpolate:$ie};class W2{constructor(e,t,r,i,s){this.type=e,this.operator=t,this.interpolation=r,this.input=i,this.labels=[],this.outputs=[];for(const[a,o]of s)this.labels.push(a),this.outputs.push(o)}static interpolationFactor(e,t,r,i){let s=0;if(e.name==="exponential")s=v5(t,e.base,r,i);else if(e.name==="linear")s=v5(t,1,r,i);else if(e.name==="cubic-bezier"){const a=e.controlPoints;s=new Fie(a[0],a[1],a[2],a[3]).solve(v5(t,1,r,i))}return s}static parse(e,t){let[r,i,s,...a]=e;if(!Array.isArray(i)||i.length===0)return t.error("Expected an interpolation type expression.",1);if(i[0]==="linear")i={name:"linear"};else if(i[0]==="exponential"){const g=i[1];if(typeof g!="number")return t.error("Exponential interpolation requires a numeric base.",1,1);i={name:"exponential",base:g}}else if(i[0]==="cubic-bezier"){const g=i.slice(1);if(g.length!==4||g.some(b=>typeof b!="number"||b<0||b>1))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);i={name:"cubic-bezier",controlPoints:g}}else return t.error(`Unknown interpolation type ${String(i[0])}`,1,0);if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");if(s=t.parse(s,2,Ir),!s)return null;const o=[];let d=null;r==="interpolate-hcl"||r==="interpolate-lab"?d=zm:t.expectedType&&t.expectedType.kind!=="value"&&(d=t.expectedType);for(let g=0;g<a.length;g+=2){const b=a[g],E=a[g+1],S=g+3,I=g+4;if(typeof b!="number")return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',S);if(o.length&&o[o.length-1][0]>=b)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',S);const P=t.parse(E,I,d);if(!P)return null;d=d||P.type,o.push([b,P])}return d.kind!=="number"&&d.kind!=="color"&&!(d.kind==="array"&&d.itemType.kind==="number"&&typeof d.N=="number")?t.error(`Type ${$l(d)} is not interpolatable.`):new W2(d,r,i,s,o)}evaluate(e){const t=this.labels,r=this.outputs;if(t.length===1)return r[0].evaluate(e);const i=this.input.evaluate(e);if(i<=t[0])return r[0].evaluate(e);const s=t.length;if(i>=t[s-1])return r[s-1].evaluate(e);const a=Jj(t,i),o=t[a],d=t[a+1],g=W2.interpolationFactor(this.interpolation,i,o,d),b=r[a].evaluate(e),E=r[a+1].evaluate(e);return this.operator==="interpolate"?zie[this.type.kind.toLowerCase()](b,E,g):this.operator==="interpolate-hcl"?xb.reverse(xb.interpolate(xb.forward(b),xb.forward(E),g)):bb.reverse(bb.interpolate(bb.forward(b),bb.forward(E),g))}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){let e;this.interpolation.name==="linear"?e=["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?e=["linear"]:e=["exponential",this.interpolation.base]:e=["cubic-bezier"].concat(this.interpolation.controlPoints);const t=[this.operator,e,this.input.serialize()];for(let r=0;r<this.labels.length;r++)t.push(this.labels[r],this.outputs[r].serialize());return t}}function v5(n,e,t,r){const i=r-t,s=n-t;return i===0?0:e===1?s/i:(Math.pow(e,s)-1)/(Math.pow(e,i)-1)}var Rg=W2;class G2{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expectected at least one argument.");let r=null;const i=t.expectedType;i&&i.kind!=="value"&&(r=i);const s=[];for(const o of e.slice(1)){const d=t.parse(o,1+s.length,r,void 0,{typeAnnotation:"omit"});if(!d)return null;r=r||d.type,s.push(d)}return i&&s.some(o=>UC(i,o.type))?new G2(Vo,s):new G2(r,s)}evaluate(e){let t=null,r=0,i;for(const s of this.args){if(r++,t=s.evaluate(e),t&&t instanceof W0&&!t.available&&(i||(i=t),t=null,r===this.args.length))return i;if(t!==null)break}return t}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=["coalesce"];return this.eachChild(t=>{e.push(t.serialize())}),e}}var lN=G2;class MO{constructor(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const t of this.bindings)e(t[1]);e(this.result)}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const r=[];for(let s=1;s<e.length-1;s+=2){const a=e[s];if(typeof a!="string")return t.error(`Expected string, but found ${typeof a} instead.`,s);if(/[^a-zA-Z0-9_]/.test(a))return t.error("Variable names must contain only alphanumeric characters or '_'.",s);const o=t.parse(e[s+1],s+1);if(!o)return null;r.push([a,o])}const i=t.parse(e[e.length-1],e.length-1,t.expectedType,r);return i?new MO(r,i):null}outputDefined(){return this.result.outputDefined()}serialize(){const e=["let"];for(const[t,r]of this.bindings)e.push(t,r.serialize());return e.push(this.result.serialize()),e}}var uN=MO;class SO{constructor(e,t,r){this.type=e,this.index=t,this.input=r}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,Ir),i=t.parse(e[2],2,Ff(t.expectedType||Vo));if(!r||!i)return null;const s=i.type;return new SO(s.itemType,r,i)}evaluate(e){const t=this.index.evaluate(e),r=this.input.evaluate(e);if(t<0)throw new jc(`Array index out of bounds: ${t} < 0.`);if(t>=r.length)throw new jc(`Array index out of bounds: ${t} > ${r.length-1}.`);if(t!==Math.floor(t))throw new jc(`Array index must be an integer, but found ${t} instead.`);return r[t]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var Vie=SO;class EO{constructor(e,t){this.type=Yo,this.needle=e,this.haystack=t}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,Vo),i=t.parse(e[2],2,Vo);return!r||!i?null:cO(r.type,[Yo,As,Ir,t3,Vo])?new EO(r,i):t.error(`Expected first argument to be of type boolean, string, number or null, but found ${$l(r.type)} instead`)}evaluate(e){const t=this.needle.evaluate(e),r=this.haystack.evaluate(e);if(r==null)return!1;if(!zC(t,["boolean","string","number","null"]))throw new jc(`Expected first argument to be of type boolean, string, number or null, but found ${$l(ZA(t))} instead.`);if(!zC(r,["string","array"]))throw new jc(`Expected second argument to be of type array or string, but found ${$l(ZA(r))} instead.`);return r.indexOf(t)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var Hie=EO;class Q2{constructor(e,t,r){this.type=Ir,this.needle=e,this.haystack=t,this.fromIndex=r}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,Vo),i=t.parse(e[2],2,Vo);if(!r||!i)return null;if(!cO(r.type,[Yo,As,Ir,t3,Vo]))return t.error(`Expected first argument to be of type boolean, string, number or null, but found ${$l(r.type)} instead`);if(e.length===4){const s=t.parse(e[3],3,Ir);return s?new Q2(r,i,s):null}else return new Q2(r,i)}evaluate(e){const t=this.needle.evaluate(e),r=this.haystack.evaluate(e);if(!zC(t,["boolean","string","number","null"]))throw new jc(`Expected first argument to be of type boolean, string, number or null, but found ${$l(ZA(t))} instead.`);if(!zC(r,["string","array"]))throw new jc(`Expected second argument to be of type array or string, but found ${$l(ZA(r))} instead.`);if(this.fromIndex){const i=this.fromIndex.evaluate(e);return r.indexOf(t,i)}return r.indexOf(t)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var Zie=Q2;class BO{constructor(e,t,r,i,s,a){this.inputType=e,this.type=t,this.input=r,this.cases=i,this.outputs=s,this.otherwise=a}static parse(e,t){if(e.length<5)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!==1)return t.error("Expected an even number of arguments.");let r,i;t.expectedType&&t.expectedType.kind!=="value"&&(i=t.expectedType);const s={},a=[];for(let g=2;g<e.length-1;g+=2){let b=e[g];const E=e[g+1];Array.isArray(b)||(b=[b]);const S=t.concat(g);if(b.length===0)return S.error("Expected at least one branch label.");for(const P of b){if(typeof P!="number"&&typeof P!="string")return S.error("Branch labels must be numbers or strings.");if(typeof P=="number"&&Math.abs(P)>Number.MAX_SAFE_INTEGER)return S.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof P=="number"&&Math.floor(P)!==P)return S.error("Numeric branch labels must be integer values.");if(!r)r=ZA(P);else if(S.checkSubtype(r,ZA(P)))return null;if(typeof s[String(P)]<"u")return S.error("Branch labels must be unique.");s[String(P)]=a.length}const I=t.parse(E,g,i);if(!I)return null;i=i||I.type,a.push(I)}const o=t.parse(e[1],1,Vo);if(!o)return null;const d=t.parse(e[e.length-1],e.length-1,i);return!d||o.type.kind!=="value"&&t.concat(1).checkSubtype(r,o.type)?null:new BO(r,i,o,s,a,d)}evaluate(e){const t=this.input.evaluate(e);return(ZA(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["match",this.input.serialize()],t=Object.keys(this.cases).sort(),r=[],i={};for(const a of t){const o=i[this.cases[a]];o===void 0?(i[this.cases[a]]=r.length,r.push([this.cases[a],[a]])):r[o][1].push(a)}const s=a=>this.inputType.kind==="number"?Number(a):a;for(const[a,o]of r)o.length===1?e.push(s(o[0])):e.push(o.map(s)),e.push(this.outputs[a].serialize());return e.push(this.otherwise.serialize()),e}}var Xie=BO;class OO{constructor(e,t,r){this.type=e,this.branches=t,this.otherwise=r}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!==0)return t.error("Expected an odd number of arguments.");let r;t.expectedType&&t.expectedType.kind!=="value"&&(r=t.expectedType);const i=[];for(let a=1;a<e.length-1;a+=2){const o=t.parse(e[a],a,Yo);if(!o)return null;const d=t.parse(e[a+1],a+1,r);if(!d)return null;i.push([o,d]),r=r||d.type}const s=t.parse(e[e.length-1],e.length-1,r);return s?new OO(r,i,s):null}evaluate(e){for(const[t,r]of this.branches)if(t.evaluate(e))return r.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[t,r]of this.branches)e(t),e(r);e(this.otherwise)}outputDefined(){return this.branches.every(([e,t])=>t.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["case"];return this.eachChild(t=>{e.push(t.serialize())}),e}}var Jie=OO;class q2{constructor(e,t,r,i){this.type=e,this.input=t,this.beginIndex=r,this.endIndex=i}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,Vo),i=t.parse(e[2],2,Ir);if(!r||!i)return null;if(!cO(r.type,[Ff(Vo),As,Vo]))return t.error(`Expected first argument to be of type array or string, but found ${$l(r.type)} instead`);if(e.length===4){const s=t.parse(e[3],3,Ir);return s?new q2(r.type,r,i,s):null}else return new q2(r.type,r,i)}evaluate(e){const t=this.input.evaluate(e),r=this.beginIndex.evaluate(e);if(!zC(t,["string","array"]))throw new jc(`Expected first argument to be of type array or string, but found ${$l(ZA(t))} instead.`);if(this.endIndex){const i=this.endIndex.evaluate(e);return t.slice(r,i)}return t.slice(r)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var eoe=q2;function Ek(n,e){return n==="=="||n==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function toe(n,e,t){return e===t}function noe(n,e,t){return e!==t}function roe(n,e,t){return e<t}function ioe(n,e,t){return e>t}function ooe(n,e,t){return e<=t}function soe(n,e,t){return e>=t}function AN(n,e,t,r){return r.compare(e,t)===0}function aoe(n,e,t,r){return!AN(n,e,t,r)}function loe(n,e,t,r){return r.compare(e,t)<0}function uoe(n,e,t,r){return r.compare(e,t)>0}function Aoe(n,e,t,r){return r.compare(e,t)<=0}function coe(n,e,t,r){return r.compare(e,t)>=0}function nv(n,e,t){const r=n!=="=="&&n!=="!=";return class cN{constructor(s,a,o){this.type=Yo,this.lhs=s,this.rhs=a,this.collator=o,this.hasUntypedArgument=s.type.kind==="value"||a.type.kind==="value"}static parse(s,a){if(s.length!==3&&s.length!==4)return a.error("Expected two or three arguments.");const o=s[0];let d=a.parse(s[1],1,Vo);if(!d)return null;if(!Ek(o,d.type))return a.concat(1).error(`"${o}" comparisons are not supported for type '${$l(d.type)}'.`);let g=a.parse(s[2],2,Vo);if(!g)return null;if(!Ek(o,g.type))return a.concat(2).error(`"${o}" comparisons are not supported for type '${$l(g.type)}'.`);if(d.type.kind!==g.type.kind&&d.type.kind!=="value"&&g.type.kind!=="value")return a.error(`Cannot compare types '${$l(d.type)}' and '${$l(g.type)}'.`);r&&(d.type.kind==="value"&&g.type.kind!=="value"?d=new Km(g.type,[d]):d.type.kind!=="value"&&g.type.kind==="value"&&(g=new Km(d.type,[g])));let b=null;if(s.length===4){if(d.type.kind!=="string"&&g.type.kind!=="string"&&d.type.kind!=="value"&&g.type.kind!=="value")return a.error("Cannot use collator to compare non-string types.");if(b=a.parse(s[3],3,n3),!b)return null}return new cN(d,g,b)}evaluate(s){const a=this.lhs.evaluate(s),o=this.rhs.evaluate(s);if(r&&this.hasUntypedArgument){const d=ZA(a),g=ZA(o);if(d.kind!==g.kind||!(d.kind==="string"||d.kind==="number"))throw new jc(`Expected arguments for "${n}" to be (string, string) or (number, number), but found (${d.kind}, ${g.kind}) instead.`)}if(this.collator&&!r&&this.hasUntypedArgument){const d=ZA(a),g=ZA(o);if(d.kind!=="string"||g.kind!=="string")return e(s,a,o)}return this.collator?t(s,a,o,this.collator.evaluate(s)):e(s,a,o)}eachChild(s){s(this.lhs),s(this.rhs),this.collator&&s(this.collator)}outputDefined(){return!0}serialize(){const s=[n];return this.eachChild(a=>{s.push(a.serialize())}),s}}}const doe=nv("==",toe,AN),hoe=nv("!=",noe,aoe),foe=nv("<",roe,loe),poe=nv(">",ioe,uoe),moe=nv("<=",ooe,Aoe),goe=nv(">=",soe,coe);class IO{constructor(e,t,r,i,s,a){this.type=As,this.number=e,this.locale=t,this.currency=r,this.unit=i,this.minFractionDigits=s,this.maxFractionDigits=a}static parse(e,t){if(e.length!==3)return t.error("Expected two arguments.");const r=t.parse(e[1],1,Ir);if(!r)return null;const i=e[2];if(typeof i!="object"||Array.isArray(i))return t.error("NumberFormat options argument must be an object.");let s=null;if(i.locale&&(s=t.parse(i.locale,1,As),!s))return null;let a=null;if(i.currency&&(a=t.parse(i.currency,1,As),!a))return null;let o=null;if(i.unit&&(o=t.parse(i.unit,1,As),!o))return null;let d=null;if(i["min-fraction-digits"]&&(d=t.parse(i["min-fraction-digits"],1,Ir),!d))return null;let g=null;return i["max-fraction-digits"]&&(g=t.parse(i["max-fraction-digits"],1,Ir),!g)?null:new IO(r,s,a,o,d,g)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency&&"currency"||this.unit&&"unit"||"decimal",currency:this.currency?this.currency.evaluate(e):void 0,unit:this.unit?this.unit.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.unit&&e(this.unit),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.unit&&(e.unit=this.unit.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]}}class kO{constructor(e){this.type=Ir,this.input=e}static parse(e,t){if(e.length!==2)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const r=t.parse(e[1],1);return r?r.type.kind!=="array"&&r.type.kind!=="string"&&r.type.kind!=="value"?t.error(`Expected argument of type string or array, but found ${$l(r.type)} instead.`):new kO(r):null}evaluate(e){const t=this.input.evaluate(e);if(typeof t=="string")return t.length;if(Array.isArray(t))return t.length;throw new jc(`Expected value to be of type string or array, but found ${$l(ZA(t))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){const e=["length"];return this.eachChild(t=>{e.push(t.serialize())}),e}}var yoe=kO;const dN={"==":doe,"!=":hoe,">":poe,"<":foe,">=":goe,"<=":moe,array:Km,at:Vie,boolean:Km,case:Jie,coalesce:lN,collator:s3,format:i3,image:o3,in:Hie,"index-of":Zie,interpolate:Rg,"interpolate-hcl":Rg,"interpolate-lab":Rg,length:yoe,let:uN,literal:j2,match:Xie,number:Km,"number-format":IO,object:Km,slice:eoe,step:eN,string:Km,"to-boolean":ly,"to-color":ly,"to-number":ly,"to-string":ly,var:Zj,within:vO};function Bk(n,[e,t,r,i]){e=e.evaluate(n),t=t.evaluate(n),r=r.evaluate(n);const s=i?i.evaluate(n):1,a=qj(e,t,r,s);if(a)throw new jc(a);return new nf(e/255*s,t/255*s,r/255*s,s)}function Ok(n,e){return n in e}function C5(n,e){const t=e[n];return typeof t>"u"?null:t}function voe(n,e,t,r){for(;t<=r;){const i=t+r>>1;if(e[i]===n)return!0;e[i]>n?r=i-1:t=i+1}return!1}function dg(n){return{type:n}}ev.register(dN,{error:[mie,[As],(n,[e])=>{throw new jc(e.evaluate(n))}],typeof:[As,[Vo],(n,[e])=>$l(ZA(e.evaluate(n)))],"to-rgba":[Ff(Ir,4),[zm],(n,[e])=>e.evaluate(n).toArray()],rgb:[zm,[Ir,Ir,Ir],Bk],rgba:[zm,[Ir,Ir,Ir,Ir],Bk],has:{type:Yo,overloads:[[[As],(n,[e])=>Ok(e.evaluate(n),n.properties())],[[As,by],(n,[e,t])=>Ok(e.evaluate(n),t.evaluate(n))]]},get:{type:Vo,overloads:[[[As],(n,[e])=>C5(e.evaluate(n),n.properties())],[[As,by],(n,[e,t])=>C5(e.evaluate(n),t.evaluate(n))]]},"feature-state":[Vo,[As],(n,[e])=>C5(e.evaluate(n),n.featureState||{})],properties:[by,[],n=>n.properties()],"geometry-type":[As,[],n=>n.geometryType()],id:[Vo,[],n=>n.id()],zoom:[Ir,[],n=>n.globals.zoom],pitch:[Ir,[],n=>n.globals.pitch||0],"distance-from-center":[Ir,[],n=>n.distanceFromCenter()],"heatmap-density":[Ir,[],n=>n.globals.heatmapDensity||0],"line-progress":[Ir,[],n=>n.globals.lineProgress||0],"sky-radial-progress":[Ir,[],n=>n.globals.skyRadialProgress||0],accumulated:[Vo,[],n=>n.globals.accumulated===void 0?null:n.globals.accumulated],"+":[Ir,dg(Ir),(n,e)=>{let t=0;for(const r of e)t+=r.evaluate(n);return t}],"*":[Ir,dg(Ir),(n,e)=>{let t=1;for(const r of e)t*=r.evaluate(n);return t}],"-":{type:Ir,overloads:[[[Ir,Ir],(n,[e,t])=>e.evaluate(n)-t.evaluate(n)],[[Ir],(n,[e])=>-e.evaluate(n)]]},"/":[Ir,[Ir,Ir],(n,[e,t])=>e.evaluate(n)/t.evaluate(n)],"%":[Ir,[Ir,Ir],(n,[e,t])=>e.evaluate(n)%t.evaluate(n)],ln2:[Ir,[],()=>Math.LN2],pi:[Ir,[],()=>Math.PI],e:[Ir,[],()=>Math.E],"^":[Ir,[Ir,Ir],(n,[e,t])=>Math.pow(e.evaluate(n),t.evaluate(n))],sqrt:[Ir,[Ir],(n,[e])=>Math.sqrt(e.evaluate(n))],log10:[Ir,[Ir],(n,[e])=>Math.log(e.evaluate(n))/Math.LN10],ln:[Ir,[Ir],(n,[e])=>Math.log(e.evaluate(n))],log2:[Ir,[Ir],(n,[e])=>Math.log(e.evaluate(n))/Math.LN2],sin:[Ir,[Ir],(n,[e])=>Math.sin(e.evaluate(n))],cos:[Ir,[Ir],(n,[e])=>Math.cos(e.evaluate(n))],tan:[Ir,[Ir],(n,[e])=>Math.tan(e.evaluate(n))],asin:[Ir,[Ir],(n,[e])=>Math.asin(e.evaluate(n))],acos:[Ir,[Ir],(n,[e])=>Math.acos(e.evaluate(n))],atan:[Ir,[Ir],(n,[e])=>Math.atan(e.evaluate(n))],min:[Ir,dg(Ir),(n,e)=>Math.min(...e.map(t=>t.evaluate(n)))],max:[Ir,dg(Ir),(n,e)=>Math.max(...e.map(t=>t.evaluate(n)))],abs:[Ir,[Ir],(n,[e])=>Math.abs(e.evaluate(n))],round:[Ir,[Ir],(n,[e])=>{const t=e.evaluate(n);return t<0?-Math.round(-t):Math.round(t)}],floor:[Ir,[Ir],(n,[e])=>Math.floor(e.evaluate(n))],ceil:[Ir,[Ir],(n,[e])=>Math.ceil(e.evaluate(n))],"filter-==":[Yo,[As,Vo],(n,[e,t])=>n.properties()[e.value]===t.value],"filter-id-==":[Yo,[Vo],(n,[e])=>n.id()===e.value],"filter-type-==":[Yo,[As],(n,[e])=>n.geometryType()===e.value],"filter-<":[Yo,[As,Vo],(n,[e,t])=>{const r=n.properties()[e.value],i=t.value;return typeof r==typeof i&&r<i}],"filter-id-<":[Yo,[Vo],(n,[e])=>{const t=n.id(),r=e.value;return typeof t==typeof r&&t<r}],"filter->":[Yo,[As,Vo],(n,[e,t])=>{const r=n.properties()[e.value],i=t.value;return typeof r==typeof i&&r>i}],"filter-id->":[Yo,[Vo],(n,[e])=>{const t=n.id(),r=e.value;return typeof t==typeof r&&t>r}],"filter-<=":[Yo,[As,Vo],(n,[e,t])=>{const r=n.properties()[e.value],i=t.value;return typeof r==typeof i&&r<=i}],"filter-id-<=":[Yo,[Vo],(n,[e])=>{const t=n.id(),r=e.value;return typeof t==typeof r&&t<=r}],"filter->=":[Yo,[As,Vo],(n,[e,t])=>{const r=n.properties()[e.value],i=t.value;return typeof r==typeof i&&r>=i}],"filter-id->=":[Yo,[Vo],(n,[e])=>{const t=n.id(),r=e.value;return typeof t==typeof r&&t>=r}],"filter-has":[Yo,[Vo],(n,[e])=>e.value in n.properties()],"filter-has-id":[Yo,[],n=>n.id()!==null&&n.id()!==void 0],"filter-type-in":[Yo,[Ff(As)],(n,[e])=>e.value.indexOf(n.geometryType())>=0],"filter-id-in":[Yo,[Ff(Vo)],(n,[e])=>e.value.indexOf(n.id())>=0],"filter-in-small":[Yo,[As,Ff(Vo)],(n,[e,t])=>t.value.indexOf(n.properties()[e.value])>=0],"filter-in-large":[Yo,[As,Ff(Vo)],(n,[e,t])=>voe(n.properties()[e.value],t.value,0,t.value.length-1)],all:{type:Yo,overloads:[[[Yo,Yo],(n,[e,t])=>e.evaluate(n)&&t.evaluate(n)],[dg(Yo),(n,e)=>{for(const t of e)if(!t.evaluate(n))return!1;return!0}]]},any:{type:Yo,overloads:[[[Yo,Yo],(n,[e,t])=>e.evaluate(n)||t.evaluate(n)],[dg(Yo),(n,e)=>{for(const t of e)if(t.evaluate(n))return!0;return!1}]]},"!":[Yo,[Yo],(n,[e])=>!e.evaluate(n)],"is-supported-script":[Yo,[As],(n,[e])=>{const t=n.globals&&n.globals.isSupportedScript;return t?t(e.evaluate(n)):!0}],upcase:[As,[As],(n,[e])=>e.evaluate(n).toUpperCase()],downcase:[As,[As],(n,[e])=>e.evaluate(n).toLowerCase()],concat:[As,dg(Vo),(n,e)=>e.map(t=>cC(t.evaluate(n))).join("")],"resolved-locale":[As,[n3],(n,[e])=>e.evaluate(n).resolvedLocale()]});var hN=dN;function _B(n){return{result:"success",value:n}}function ny(n){return{result:"error",value:n}}function Coe(n){return n["property-type"]==="data-driven"}function _oe(n){return!!n.expression&&n.expression.parameters.indexOf("zoom")>-1}function boe(n){return!!n.expression&&n.expression.interpolated}function fN(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)}class xoe{constructor(e,t){this.expression=e,this._warningHistory={},this._evaluator=new Yj,this._defaultValue=t?Eoe(t):null,this._enumValues=t&&t.type==="enum"?t.values:null}evaluateWithoutErrorHandling(e,t,r,i,s,a,o,d){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=r,this._evaluator.canonical=i||null,this._evaluator.availableImages=s||null,this._evaluator.formattedSection=a,this._evaluator.featureTileCoord=o||null,this._evaluator.featureDistanceData=d||null,this.expression.evaluate(this._evaluator)}evaluate(e,t,r,i,s,a,o,d){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=r||null,this._evaluator.canonical=i||null,this._evaluator.availableImages=s||null,this._evaluator.formattedSection=a||null,this._evaluator.featureTileCoord=o||null,this._evaluator.featureDistanceData=d||null;try{const g=this.expression.evaluate(this._evaluator);if(g==null||typeof g=="number"&&g!==g)return this._defaultValue;if(this._enumValues&&!(g in this._enumValues))throw new jc(`Expected value to be one of ${Object.keys(this._enumValues).map(b=>JSON.stringify(b)).join(", ")}, but found ${JSON.stringify(g)} instead.`);return g}catch(g){return this._warningHistory[g.message]||(this._warningHistory[g.message]=!0,typeof console<"u"&&console.warn(g.message)),this._defaultValue}}}function woe(n){return Array.isArray(n)&&n.length>0&&typeof n[0]=="string"&&n[0]in hN}function bB(n,e){const t=new Xj(hN,[],e?Soe(e):void 0),r=t.parse(n,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return r?_B(new xoe(r,e)):ny(t.errors)}class Ik{constructor(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent=e!=="constant"&&!CO(t.expression)}evaluateWithoutErrorHandling(e,t,r,i,s,a){return this._styleExpression.evaluateWithoutErrorHandling(e,t,r,i,s,a)}evaluate(e,t,r,i,s,a){return this._styleExpression.evaluate(e,t,r,i,s,a)}}class kk{constructor(e,t,r,i){this.kind=e,this.zoomStops=r,this._styleExpression=t,this.isStateDependent=e!=="camera"&&!CO(t.expression),this.interpolationType=i}evaluateWithoutErrorHandling(e,t,r,i,s,a){return this._styleExpression.evaluateWithoutErrorHandling(e,t,r,i,s,a)}evaluate(e,t,r,i,s,a){return this._styleExpression.evaluate(e,t,r,i,s,a)}interpolationFactor(e,t,r){return this.interpolationType?Rg.interpolationFactor(this.interpolationType,e,t,r):0}}function Moe(n,e){if(n=bB(n,e),n.result==="error")return n;const t=n.value.expression,r=a3(t);if(!r&&!Coe(e))return ny([new Vp("","data expressions not supported")]);const i=_O(t,["zoom","pitch","distance-from-center"]);if(!i&&!_oe(e))return ny([new Vp("","zoom expressions not supported")]);const s=$b(t);if(!s&&!i)return ny([new Vp("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(s instanceof Vp)return ny([s]);if(s instanceof Rg&&!boe(e))return ny([new Vp("",'"interpolate" expressions cannot be used with this property')]);if(!s)return _B(r?new Ik("constant",n.value):new Ik("source",n.value));const a=s instanceof Rg?s.interpolation:void 0;return _B(r?new kk("camera",n.value,s.labels,a):new kk("composite",n.value,s.labels,a))}function $b(n){let e=null;if(n instanceof uN)e=$b(n.result);else if(n instanceof lN){for(const t of n.args)if(e=$b(t),e)break}else(n instanceof eN||n instanceof Rg)&&n.input instanceof ev&&n.input.name==="zoom"&&(e=n);return e instanceof Vp||n.eachChild(t=>{const r=$b(t);r instanceof Vp?e=r:!e&&r?e=new Vp("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&r&&e!==r&&(e=new Vp("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}function Soe(n){const e={color:zm,string:As,number:Ir,enum:As,boolean:Yo,formatted:r3,resolvedImage:m_};return n.type==="array"?Ff(e[n.value]||Vo,n.length):e[n.type]}function Eoe(n){return n.type==="color"&&(fN(n.default)||Array.isArray(n.default))?new nf(0,0,0,0):n.type==="color"?nf.parse(n.default)||null:n.default===void 0?null:n.default}function Boe(n){return n instanceof Number||n instanceof String||n instanceof Boolean?n.valueOf():n}function xB(n){if(Array.isArray(n))return n.map(xB);if(n instanceof Object&&!(n instanceof Number||n instanceof String||n instanceof Boolean)){const e={};for(const t in n)e[t]=xB(n[t]);return e}return Boe(n)}var pN={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},fog:{type:"fog"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},projection:{type:"projection"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{},sky:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_sky:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"},"fill-extrusion-edge-radius":{type:"number",private:!0,default:0,minimum:0,maximum:1,"property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_symbol:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature","pitch","distance-from-center"]}},filter_fill:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_line:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_circle:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},"filter_fill-extrusion":{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_heatmap:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Camera"},pitch:{group:"Camera"},"distance-from-center":{group:"Camera"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},"sky-radial-progress":{group:"sky"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},fog:{range:{type:"array",default:[.5,10],minimum:-20,maximum:20,length:2,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"high-color":{type:"color","property-type":"data-constant",default:"#245cdf",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"space-color":{type:"color","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-blend":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,.2,7,.1],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"star-intensity":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],5,.35,6,0],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},projection:{name:{type:"enum",values:{albers:{},equalEarth:{},equirectangular:{},lambertConformalConic:{},mercator:{},naturalEarth:{},winkelTripel:{},globe:{}},default:"mercator",required:!0},center:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-180,-90],maximum:[180,90],transition:!1,requires:[{name:["albers","lambertConformalConic"]}]},parallels:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-90,-90],maximum:[90,90],transition:!1,requires:[{name:["albers","lambertConformalConic"]}]}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number","property-type":"data-constant",default:1,minimum:0,maximum:1e3,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,requires:["source"]}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant",type:"number",private:!0,default:0,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant",type:"number",private:!0,default:3,minimum:0,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,requires:["fill-extrusion-edge-radius"]}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!1,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{type:"array",value:"number",length:2,default:[0,0],minimum:[0,0],maximum:[1,1],transition:!1,requires:[{source:"geojson",has:{lineMetrics:!0}}],"property-type":"constant"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_sky:{"sky-type":{type:"enum",values:{gradient:{},atmosphere:{}},default:"atmosphere",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{type:"array",value:"number",length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,requires:[{"sky-type":"atmosphere"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{type:"number",requires:[{"sky-type":"atmosphere"}],default:10,minimum:0,maximum:100,transition:!1,"property-type":"data-constant"},"sky-gradient-center":{type:"array",requires:[{"sky-type":"gradient"}],value:"number",default:[0,0],length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{type:"number",requires:[{"sky-type":"gradient"}],default:90,minimum:0,maximum:180,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient":{type:"color",default:["interpolate",["linear"],["sky-radial-progress"],.8,"#87ceeb",1,"white"],transition:!1,requires:[{"sky-type":"gradient"}],expression:{interpolated:!0,parameters:["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};function mN(n){if(n===!0||n===!1)return!0;if(!Array.isArray(n)||n.length===0)return!1;switch(n[0]){case"has":return n.length>=2&&n[1]!=="$id"&&n[1]!=="$type";case"in":return n.length>=3&&(typeof n[1]!="string"||Array.isArray(n[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return n.length!==3||Array.isArray(n[1])||Array.isArray(n[2]);case"any":case"all":for(const e of n.slice(1))if(!mN(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}function Ooe(n,e="fill"){if(n==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};mN(n)||(n=Y2(n));const t=n;let r=!0;try{r=Ioe(t)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(t,null,2)}
        `)}const i=pN[`filter_${e}`],s=bB(r,i);let a=null;if(s.result==="error")throw new Error(s.value.map(b=>`${b.key}: ${b.message}`).join(", "));a=(b,E,S)=>s.value.evaluate(b,E,{},S);let o=null,d=null;if(r!==t){const b=bB(t,i);if(b.result==="error")throw new Error(b.value.map(E=>`${E.key}: ${E.message}`).join(", "));o=(E,S,I,P,z)=>b.value.evaluate(E,S,{},I,void 0,void 0,P,z),d=!a3(b.value.expression)}a=a;const g=vN(r);return{filter:a,dynamicFilter:o||void 0,needGeometry:g,needFeature:!!d}}function Ioe(n){if(!wy(n))return n;let e=xB(n);return yN(e),e=gN(e),e}function gN(n){if(!Array.isArray(n))return n;const e=Poe(n);return e===!0?e:e.map(t=>gN(t))}function yN(n){let e=!1;const t=[];if(n[0]==="case"){for(let r=1;r<n.length-1;r+=2)e=e||wy(n[r]),t.push(n[r+1]);t.push(n[n.length-1])}else if(n[0]==="match"){e=e||wy(n[1]);for(let r=2;r<n.length-1;r+=2)t.push(n[r+1]);t.push(n[n.length-1])}else if(n[0]==="step"){e=e||wy(n[1]);for(let r=1;r<n.length-1;r+=2)t.push(n[r+1])}e&&(n.length=0,n.push("any",...t));for(let r=1;r<n.length;r++)yN(n[r])}function wy(n){if(!Array.isArray(n))return!1;if(koe(n[0]))return!0;for(let e=1;e<n.length;e++){const t=n[e];if(wy(t))return!0}return!1}function koe(n){return n==="pitch"||n==="distance-from-center"}const Toe=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function Poe(n){if(Toe.has(n[0]))for(let e=1;e<n.length;e++){const t=n[e];if(wy(t))return!0}return n}function Koe(n,e){return n<e?-1:n>e?1:0}function vN(n){if(!Array.isArray(n))return!1;if(n[0]==="within")return!0;for(let e=1;e<n.length;e++)if(vN(n[e]))return!0;return!1}function Y2(n){if(!n)return!0;const e=n[0];return n.length<=1?e!=="any":e==="=="?_5(n[1],n[2],"=="):e==="!="?wb(_5(n[1],n[2],"==")):e==="<"||e===">"||e==="<="||e===">="?_5(n[1],n[2],e):e==="any"?Doe(n.slice(1)):e==="all"?["all"].concat(n.slice(1).map(Y2)):e==="none"?["all"].concat(n.slice(1).map(Y2).map(wb)):e==="in"?Tk(n[1],n.slice(2)):e==="!in"?wb(Tk(n[1],n.slice(2))):e==="has"?Pk(n[1]):e==="!has"?wb(Pk(n[1])):e==="within"?n:!0}function _5(n,e,t){switch(n){case"$type":return[`filter-type-${t}`,e];case"$id":return[`filter-id-${t}`,e];default:return[`filter-${t}`,n,e]}}function Doe(n){return["any"].concat(n.map(Y2))}function Tk(n,e){if(e.length===0)return!1;switch(n){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(t=>typeof t!=typeof e[0])?["filter-in-large",n,["literal",e.sort(Koe)]]:["filter-in-small",n,["literal",e]]}}function Pk(n){switch(n){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",n]}}function wb(n){return["!",n]}var Roe=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Foe(n,e){const t={};for(const r in n)r!=="ref"&&(t[r]=n[r]);return Roe.forEach(r=>{r in e&&(t[r]=e[r])}),t}function CN(n){n=n.slice();const e=Object.create(null);for(let t=0;t<n.length;t++)e[n[t].id]=n[t];for(let t=0;t<n.length;t++)"ref"in n[t]&&(n[t]=Foe(n[t],e[n[t].ref]));return n}var Kk={thin:100,hairline:100,"ultra-light":200,"extra-light":200,light:300,book:300,regular:400,normal:400,plain:400,roman:400,standard:400,medium:500,"semi-bold":600,"demi-bold":600,bold:700,"extra-bold":800,"ultra-bold":800,heavy:900,black:900,"heavy-black":900,fat:900,poster:900,"ultra-black":950,"extra-black":950},Iv=" ",Dk=/(italic|oblique)$/i,Rk={},Loe=function(n,e,t){var r=Rk[n];if(!r){Array.isArray(n)||(n=[n]);for(var i=400,s="normal",a=[],o,d,g=0,b=n.length;g<b;++g){var E=n[g],S=E.split(" "),I=S[S.length-1].toLowerCase();I=="normal"||I=="italic"||I=="oblique"?(s=d?s:I,d=!0,S.pop(),I=S[S.length-1].toLowerCase()):Dk.test(I)&&(I=I.replace(Dk,""),s=d?s:S[S.length-1].replace(I,""),d=!0);for(var P in Kk){var z=S.length>1?S[S.length-2].toLowerCase():"";if(I==P||I==P.replace("-","")||z+"-"+I==P){i=o?i:Kk[P],S.pop(),z&&P.startsWith(z)&&S.pop();break}}!o&&typeof I=="number"&&(i=I,o=!0);var j=S.join(Iv).replace("Klokantech Noto Sans","Noto Sans");j.indexOf(Iv)!==-1&&(j='"'+j+'"'),a.push(j)}r=Rk[n]=[s,i,a]}return r[0]+Iv+r[1]+Iv+e+"px"+(t?"/"+t:"")+Iv+r[2]},wB=Gj(Loe);const _N="https://api.mapbox.com";function TO(n){const e="mapbox://";return n.indexOf(e)!==0?"":n.slice(e.length)}function Uoe(n,e,t){const r=TO(n);if(!r)return decodeURI(new URL(n,t).href);const i="sprites/";if(r.indexOf(i)!==0)throw new Error(`unexpected sprites url: ${n}`);const s=r.slice(i.length);return`${_N}/styles/v1/${s}/sprite?access_token=${e}`}function $2(n,e){const t=TO(n);if(!t)return decodeURI(new URL(n,location.href).href);const r="styles/";if(t.indexOf(r)!==0)throw new Error(`unexpected style url: ${n}`);const i=t.slice(r.length);return`${_N}/styles/v1/${i}?&access_token=${e}`}const zoe=["a","b","c","d"];function Vb(n,e,t,r){const i=new URL(n,r),s=TO(n);if(!s)return e?(i.searchParams.has(t)||i.searchParams.set(t,e),[decodeURI(i.href)]):[decodeURI(i.href)];if(s==="mapbox.satellite"){const a=window.devicePixelRatio>=1.5?"@2x":"";return[`https://api.mapbox.com/v4/${s}/{z}/{x}/{y}${a}.webp?access_token=${e}`]}return zoe.map(a=>`https://${a}.tiles.mapbox.com/v4/${s}/{z}/{x}/{y}.vector.pbf?access_token=${e}`)}const Fk={},Lk={};let joe=0;function PO(n){return n.id||(n.id=joe++),n.id}function Noe(n,e){return PO(n)+"."+Go(e)}function bN(n){let e=Fk[n.id];return e||(e={},Fk[PO(n)]=e),e}function Woe(n){let e=Lk[n.id];return e||(e={},Lk[PO(n)]=e),e}function b5(n){return n*Math.PI/180}const om=function(){const n=[];for(let e=78271.51696402048;n.length<=24;e/=2)n.push(e);return n}();function l3(n,e){if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof OffscreenCanvas<"u")return new OffscreenCanvas(n,e);const t=document.createElement("canvas");return t.width=n,t.height=e,t}function KO(n,e){let t=0;const r=e.length;for(;t<r;++t)if(e[t]<n&&t+1<r){const s=e[t]/e[t+1];return t+Math.log(e[t]/n)/Math.log(s)}return r-1}function Yv(n,e){const t=Math.floor(n),r=Math.pow(2,n-t);return e[t]/r}const B1={};function zy(n,e,t={},r){if(e in B1)return r&&(r.request=B1[e][0]),B1[e][1];const i=t.transformRequest&&t.transformRequest(e,n)||e,s=Dy(()=>i).then(a=>(a instanceof Request||(a=new Request(a)),a.headers.get("Accept")||a.headers.set("Accept","application/json"),r&&(r.request=a),fetch(a).then(function(o){return delete B1[e],o.ok?o.json():Promise.reject(new Error("Error fetching source "+e))}).catch(function(o){return delete B1[e],Promise.reject(new Error("Error fetching source "+e))})));return B1[e]=[i,s],s}function xN(n,e){if(typeof n=="string")if(n.trim().startsWith("{"))try{const t=JSON.parse(n);return Promise.resolve(t)}catch(t){return Promise.reject(t)}else return n=$2(n,e.accessToken),zy("Style",n,e);else return Promise.resolve(n)}const Uk={};function wN(n,e,t={}){const r=[e,JSON.stringify(n)].toString();let i=Uk[r];if(!i||t.transformRequest){let s;t.transformRequest&&(s=(o,d)=>{const g=t.transformRequest&&t.transformRequest(d,"Tiles")||d;if(o instanceof wj)o.setLoader((b,E,S)=>{Dy(()=>g).then(I=>{fetch(I).then(P=>P.arrayBuffer()).then(P=>{const j=o.getFormat().readFeatures(P,{extent:b,featureProjection:S});o.setFeatures(j)}).catch(P=>o.setState(Nr.ERROR))})});else{const b=o.getImage();Dy(()=>g).then(E=>{E instanceof Request?fetch(E).then(S=>S.blob()).then(S=>{const I=URL.createObjectURL(S);b.addEventListener("load",()=>URL.revokeObjectURL(I)),b.addEventListener("error",()=>URL.revokeObjectURL(I)),b.src=I}).catch(S=>o.setState(Nr.ERROR)):b.src=E})}});const a=n.url;if(a&&!n.tiles){const o=Vb(a,t.accessToken,t.accessTokenParam||"access_token",e||location.href);if(a.startsWith("mapbox://"))i=Promise.resolve({tileJson:Object.assign({},n,{url:void 0,tiles:o}),tileLoadFunction:s});else{const d={};i=zy("Source",o[0],t,d).then(function(g){return g.tiles=g.tiles.map(function(b){return g.scheme==="tms"&&(b=b.replace("{y}","{-y}")),Vb(b,t.accessToken,t.accessTokenParam||"access_token",d.request.url)[0]}),Promise.resolve({tileJson:g,tileLoadFunction:s})})}}else n=Object.assign({},n,{tiles:n.tiles.map(function(o){return n.scheme==="tms"&&(o=o.replace("{y}","{-y}")),Vb(o,t.accessToken,t.accessTokenParam||"access_token",e||location.href)[0]})}),i=Promise.resolve({tileJson:Object.assign({},n),tileLoadFunction:s});Uk[r]=i}return i}function zk(n,e,t,r){const i=[2*t*e.pixelRatio+e.width,2*t*e.pixelRatio+e.height],s=l3(i[0],i[1]),a=s.getContext("2d");a.drawImage(n,e.x,e.y,e.width,e.height,t*e.pixelRatio,t*e.pixelRatio,e.width,e.height);const o=a.getImageData(0,0,i[0],i[1]);a.globalCompositeOperation="destination-over",a.fillStyle=`rgba(${r.r*255},${r.g*255},${r.b*255},${r.a})`;const d=o.data;for(let g=0,b=o.width;g<b;++g)for(let E=0,S=o.height;E<S;++E){const I=(E*b+g)*4;d[I+3]>0&&a.arc(g,E,t*e.pixelRatio,0,2*Math.PI)}return a.fill(),s}function Goe(n,e,t){const r=Math.max(0,Math.min(1,(t-n)/(e-n)));return r*r*(3-2*r)}function jk(n,e,t){const r=l3(e.width,e.height),i=r.getContext("2d");i.drawImage(n,e.x,e.y,e.width,e.height,0,0,e.width,e.height);const s=i.getImageData(0,0,e.width,e.height),a=s.data;for(let o=0,d=s.width;o<d;++o)for(let g=0,b=s.height;g<b;++g){const E=(g*d+o)*4,S=a[E+3]/255,I=.75,P=.1,z=Goe(I-P,I+P,S);z>0?(a[E+0]=Math.round(255*t.r*z),a[E+1]=Math.round(255*t.g*z),a[E+2]=Math.round(255*t.b*z),a[E+3]=Math.round(255*z)):a[E+3]=0}return i.putImageData(s,0,0),r}const Qoe=Array(256).join("");function MB(n,e){if(e>=.05){let t="";const r=n.split(`
`),i=Qoe.slice(0,Math.round(e/.1));for(let s=0,a=r.length;s<a;++s)s>0&&(t+=`
`),t+=r[s].split("").join(i);return t}return n}let x5;function MN(){return x5||(x5=l3(1,1).getContext("2d")),x5}function hg(n,e){return MN().measureText(n).width+(n.length-1)*e}const Nk={};function SB(n,e,t,r){if(n.indexOf(`
`)!==-1){const a=n.split(`
`),o=[];for(let d=0,g=a.length;d<g;++d)o.push(SB(a[d],e,t,r));return o.join(`
`)}const i=t+","+e+","+n+","+r;let s=Nk[i];if(!s){const a=n.split(" ");if(a.length>1){const o=MN();o.font=e;const g=o.measureText("M").width*t;let b="";const E=[];for(let S=0,I=a.length;S<I;++S){const P=a[S],z=b+(b?" ":"")+P;hg(z,r)<=g?b=z:(b&&E.push(b),b=P)}b&&E.push(b);for(let S=0,I=E.length;S<I&&I>1;++S){const P=E[S];if(hg(P,r)<g*.35){const z=S>0?hg(E[S-1],r):1/0,j=S<I-1?hg(E[S+1],r):1/0;E.splice(S,1),I-=1,z<j?(E[S-1]+=" "+P,S-=1):E[S]=P+" "+E[S]}}for(let S=0,I=E.length-1;S<I;++S){const P=E[S],z=E[S+1];if(hg(P,r)>g*.7&&hg(z,r)<g*.6){const j=P.split(" "),q=j.pop();hg(q,r)<g*.2&&(E[S]=j.join(" "),E[S+1]=q+" "+z),I-=1}}s=E.join(`
`)}else s=n;s=MB(s,r),Nk[i]=s}return s}const qoe=/font-family: ?([^;]*);/,Yoe=/("|')/g;let Mb;function $oe(n){if(!Mb){Mb={};const e=document.styleSheets;for(let t=0,r=e.length;t<r;++t){const i=e[t];try{const s=i.rules||i.cssRules;if(s)for(let a=0,o=s.length;a<o;++a){const d=s[a];if(d.type==5){const g=d.cssText.match(qoe);Mb[g[1].replace(Yoe,"")]=!0}}}catch{}}}return n in Mb}const w5={};function Voe(n,e="https://cdn.jsdelivr.net/npm/@fontsource/{font-family}/{fontweight}{-fontstyle}.css"){const t=n.toString();if(t in w5)return w5[t];const r=[];for(let i=0,s=n.length;i<s;++i){n[i]=n[i].replace("Arial Unicode MS","Arial");const a=n[i],o=wB(a,1);hz(o);const d=o.split(" ");r.push([d.slice(3).join(" ").replace(/"/g,""),d[1],d[0]])}for(let i=0,s=r.length;i<s;++i){const a=r[i],o=a[0];if(!$oe(o)&&jp.get(`${a[2]}
${a[1]} 
${o}`)!==100){const d=e.replace("{font-family}",o.replace(/ /g,"-").toLowerCase()).replace("{Font+Family}",o.replace(/ /g,"+")).replace("{fontweight}",a[1]).replace("{-fontstyle}",a[2].replace("normal","").replace(/(.+)/,"-$1")).replace("{fontstyle}",a[2]);if(!document.querySelector('link[href="'+d+'"]')){const g=document.createElement("link");g.href=d,g.rel="stylesheet",document.head.appendChild(g)}}}return w5[t]=n,n}const Hoe={Point:1,MultiPoint:1,LineString:2,MultiLineString:2,Polygon:3,MultiPolygon:3},Zoe={center:[.5,.5],left:[0,.5],right:[1,.5],top:[.5,0],bottom:[.5,1],"top-left":[0,0],"top-right":[1,0],"bottom-left":[0,1],"bottom-right":[1,1]},Xoe=function(n,e){const t=Moe(n,e);if(t.result==="error")throw new Error(t.value.map(r=>`${r.key}: ${r.message}`).join(", "));return t.value},EB={},V2={zoom:0};let Sb,M5;function Ci(n,e,t,r,i,s,a){const o=n.id;s||(s={},console.warn("No functionCache provided to getValue()")),s[o]||(s[o]={});const d=s[o];if(!d[t]){let g=(n[e]||EB)[t];const b=pN[`${e}_${n.type}`][t];g===void 0&&(g=b.default);let E=woe(g);if(!E&&fN(g)&&(g=lie(g,b),E=!0),E){const S=Xoe(g,b);d[t]=S.evaluate.bind(S)}else b.type=="color"&&(g=nf.parse(g)),d[t]=function(){return g}}return V2.zoom=r,d[t](V2,i,a)}function Wk(n,e,t,r,i){return Ci(n,"layout",`${r}-allow-overlap`,e,t,i)?Ci(n,"layout",`${r}-ignore-placement`,e,t,i)?"none":"obstacle":"declutter"}function Joe(n,e,t,r,i){return i||console.warn("No filterCache provided to evaluateFilter()"),n in i||(i[n]=Ooe(e).filter),V2.zoom=r,i[n](V2,t)}function x0(n,e){if(n){if(n.a===0||e===0)return;const t=n.a;return e=e===void 0?1:e,t===0?"transparent":"rgba("+Math.round(n.r*255/t)+","+Math.round(n.g*255/t)+","+Math.round(n.b*255/t)+","+t*e+")"}return n}const ese=/\{[^{}}]*\}/g;function S5(n,e){return n.replace(ese,function(t){return e[t.slice(1,-1)]||""})}const tse={};function nse(n,e,t,r=om,i=void 0,s=void 0,a=void 0,o=void 0){if(typeof e=="string"&&(e=JSON.parse(e)),e.version!=8)throw new Error("glStyle version 8 required.");tse[Noe(e,n)]=Array.from(arguments);let d,g,b;if(s){if(typeof Image<"u"){const G=new Image;let oe;Dy(()=>s).then(he=>{he instanceof Request?fetch(he).then(pe=>pe.blob()).then(pe=>{oe=URL.createObjectURL(pe),G.src=oe}).catch(()=>{}):(G.crossOrigin="anonymous",G.src=he,oe&&URL.revokeObjectURL(oe))}),G.onload=function(){d=G,g=[G.width,G.height],n.changed(),G.onload=null}}else if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope){const G=self;G.postMessage({action:"loadImage",src:s}),G.addEventListener("message",function(he){he.data.action==="imageLoaded"&&he.data.src===s&&(d=he.data.image,g=[d.width,d.height])})}}const E=CN(e.layers),S={},I=[],P={},z={},j=bN(e),q=Woe(e);let Y;for(let G=0,oe=E.length;G<oe;++G){const he=E[G],pe=he.id;if(typeof t=="string"&&he.source==t||Array.isArray(t)&&t.indexOf(pe)!==-1){const Ee=he["source-layer"];if(Y){if(he.source!==Y)throw new Error(`Layer "${pe}" does not use source "${Y}`)}else{Y=he.source;const Se=e.sources[Y];if(!Se)throw new Error(`Source "${Y}" is not defined`);const De=Se.type;if(De!=="vector"&&De!=="geojson")throw new Error(`Source "${Y}" is not of type "vector" or "geojson", but "${De}"`)}let me=S[Ee];me||(me=[],S[Ee]=me),me.push({layer:he,index:G}),I.push(pe)}}const ie=new O0,te=new Dm,V=[],ne=function(G,oe,he){const pe=G.getProperties(),Ee=S[pe.layer];if(!Ee)return;let me=r.indexOf(oe);me==-1&&(me=KO(oe,r));const Se=Hoe[G.getGeometry().getType()],De={id:G.getId(),properties:pe,type:Se},be=n.get("mapbox-featurestate")[G.getId()];let at=-1;for(let Ze=0,Je=Ee.length;Ze<Je;++Ze){const We=Ee[Ze],Me=We.layer,Fe=Me.id;if(he!==void 0&&he!==Fe)continue;const He=Me.layout||EB,bt=Me.paint||EB;if(He.visibility==="none"||"minzoom"in Me&&me<Me.minzoom||"maxzoom"in Me&&me>=Me.maxzoom)continue;const Yt=Me.filter;if(!Yt||Joe(Fe,Yt,De,me,q)){let gt,Lt,Kt,Ue,Pe,Be;const it=We.index;if(Se==3&&(Me.type=="fill"||Me.type=="fill-extrusion"))if(Lt=Ci(Me,"paint",Me.type+"-opacity",me,De,j,be),Me.type+"-pattern"in bt){const dr=Ci(Me,"paint",Me.type+"-pattern",me,De,j,be);if(dr){const vr=typeof dr=="string"?S5(dr,pe):dr.toString();if(d&&i&&i[vr]){++at,Be=V[at],(!Be||!Be.getFill()||Be.getStroke()||Be.getText())&&(Be=new Hh({fill:new Dm}),V[at]=Be),Kt=Be.getFill(),Be.setZIndex(it);const Jn=vr+"."+Lt;let Qe=z[Jn];if(!Qe){const ce=i[vr],fe=l3(ce.width,ce.height),nt=fe.getContext("2d");nt.globalAlpha=Lt,nt.drawImage(d,ce.x,ce.y,ce.width,ce.height,0,0,ce.width,ce.height),Qe=nt.createPattern(fe,"repeat"),z[Jn]=Qe}Kt.setColor(Qe)}}}else gt=x0(Ci(Me,"paint",Me.type+"-color",me,De,j,be),Lt),Me.type+"-outline-color"in bt&&(Pe=x0(Ci(Me,"paint",Me.type+"-outline-color",me,De,j,be),Lt)),Pe||(Pe=gt),(gt||Pe)&&(++at,Be=V[at],(!Be||gt&&!Be.getFill()||!gt&&Be.getFill()||Pe&&!Be.getStroke()||!Pe&&Be.getStroke()||Be.getText())&&(Be=new Hh({fill:gt?new Dm:void 0,stroke:Pe?new O0:void 0}),V[at]=Be),gt&&(Kt=Be.getFill(),Kt.setColor(gt)),Pe&&(Ue=Be.getStroke(),Ue.setColor(Pe),Ue.setWidth(.5)),Be.setZIndex(it));if(Se!=1&&Me.type=="line"){"line-pattern"in bt?gt=void 0:gt=x0(Ci(Me,"paint","line-color",me,De,j,be),Ci(Me,"paint","line-opacity",me,De,j,be));const dr=Ci(Me,"paint","line-width",me,De,j,be);gt&&dr>0&&(++at,Be=V[at],(!Be||!Be.getStroke()||Be.getFill()||Be.getText())&&(Be=new Hh({stroke:new O0}),V[at]=Be),Ue=Be.getStroke(),Ue.setLineCap(Ci(Me,"layout","line-cap",me,De,j,be)),Ue.setLineJoin(Ci(Me,"layout","line-join",me,De,j,be)),Ue.setMiterLimit(Ci(Me,"layout","line-miter-limit",me,De,j,be)),Ue.setColor(gt),Ue.setWidth(dr),Ue.setLineDash(bt["line-dasharray"]?Ci(Me,"paint","line-dasharray",me,De,j,be).map(function(vr){return vr*dr}):null),Be.setZIndex(it))}let _t=!1,ft=null,Ut=0,rn,Dt,_n;if((Se==1||Se==2)&&"icon-image"in He){const dr=Ci(Me,"layout","icon-image",me,De,j,be);if(dr){rn=typeof dr=="string"?S5(dr,pe):dr.toString();let vr;const Jn=o?o(n,rn):void 0;if(d&&i&&i[rn]||Jn){const Qe=Ci(Me,"layout","icon-rotation-alignment",me,De,j,be);if(Se==2){const ce=G.getGeometry();if(ce.getFlatMidpoint||ce.getFlatMidpoints){const fe=ce.getExtent();if(Math.sqrt(Math.max(Math.pow((fe[2]-fe[0])/oe,2),Math.pow((fe[3]-fe[1])/oe,2)))>150){const St=ce.getType()==="MultiLineString"?ce.getFlatMidpoints():ce.getFlatMidpoint();if(M5||(Sb=[NaN,NaN],M5=new ud("Point",Sb,[],2,{},void 0)),vr=M5,Sb[0]=St[0],Sb[1]=St[1],Ci(Me,"layout","symbol-placement",me,De,j,be)==="line"&&Qe==="map"){const sn=ce.getStride(),tr=ce.getFlatCoordinates();for(let Oe=0,se=tr.length-sn;Oe<se;Oe+=sn){const ve=tr[Oe],p=tr[Oe+1],Ne=tr[Oe+sn],Ye=tr[Oe+sn+1],rt=Math.min(ve,Ne),ct=Math.max(ve,Ne),dt=St[0],qt=St[1],Gt=(Ye-p)*(dt-ve)-(Ne-ve)*(qt-p);if(Math.abs(Gt)<.001&&dt<=ct&&dt>=rt){Ut=Math.atan2(p-Ye,Ne-ve);break}}}}}}if(Se!==2||vr){const ce=Ci(Me,"layout","icon-size",me,De,j,be),fe=bt["icon-color"]!==void 0?Ci(Me,"paint","icon-color",me,De,j,be):null;if(!fe||fe.a!==0){const nt=Ci(Me,"paint","icon-halo-color",me,De,j,be),St=Ci(Me,"paint","icon-halo-width",me,De,j,be);let Ht=`${rn}.${ce}.${St}.${nt}`;if(fe!==null&&(Ht+=`.${fe}`),Dt=P[Ht],!Dt){const sn=Wk(Me,me,De,"icon",j);let tr;"icon-offset"in He&&(tr=Ci(Me,"layout","icon-offset",me,De,j,be).slice(0),tr[0]*=ce,tr[1]*=-ce);let Oe=fe?[fe.r*255,fe.g*255,fe.b*255,fe.a]:void 0;if(Jn){const se={color:Oe,rotateWithView:Qe==="map",displacement:tr,declutterMode:sn,scale:ce};typeof Jn=="string"?se.src=Jn:(se.img=Jn,se.imgSize=[Jn.width,Jn.height]),Dt=new M2(se)}else{const se=i[rn];let ve,p,Ne;St?se.sdf?(ve=zk(jk(d,se,fe||[0,0,0,1]),{x:0,y:0,width:se.width,height:se.height,pixelRatio:se.pixelRatio},St,nt),Oe=void 0):ve=zk(d,se,St,nt):(se.sdf?(b||(b=jk(d,{x:0,y:0,width:g[0],height:g[1]},{r:1,g:1,b:1,a:1})),ve=b):ve=d,p=[se.width,se.height],Ne=[se.x,se.y]),Dt=new M2({color:Oe,img:ve,imgSize:g,size:p,offset:Ne,rotateWithView:Qe==="map",scale:ce/se.pixelRatio,displacement:tr,declutterMode:sn})}P[Ht]=Dt}}Dt&&(++at,Be=V[at],(!Be||!Be.getImage()||Be.getFill()||Be.getStroke())&&(Be=new Hh,V[at]=Be),Be.setGeometry(vr),Dt.setRotation(Ut+b5(Ci(Me,"layout","icon-rotate",me,De,j,be))),Dt.setOpacity(Ci(Me,"paint","icon-opacity",me,De,j,be)),Dt.setAnchor(Zoe[Ci(Me,"layout","icon-anchor",me,De,j,be)]),Be.setImage(Dt),ft=Be.getText(),Be.setText(void 0),Be.setZIndex(it),_t=!0,_n=!1)}else _n=!0}}}if(Se==1&&Me.type==="circle"){++at,Be=V[at],(!Be||!Be.getImage()||Be.getFill()||Be.getStroke())&&(Be=new Hh,V[at]=Be);const dr="circle-radius"in bt?Ci(Me,"paint","circle-radius",me,De,j,be):5,vr=x0(Ci(Me,"paint","circle-stroke-color",me,De,j,be),Ci(Me,"paint","circle-stroke-opacity",me,De,j,be)),Jn=Ci(Me,"paint","circle-translate",me,De,j,be),Qe=x0(Ci(Me,"paint","circle-color",me,De,j,be),Ci(Me,"paint","circle-opacity",me,De,j,be)),ce=Ci(Me,"paint","circle-stroke-width",me,De,j,be),fe=dr+"."+vr+"."+Qe+"."+ce+"."+Jn[0]+"."+Jn[1];Dt=P[fe],Dt||(Dt=new s_({radius:dr,displacement:[Jn[0],-Jn[1]],stroke:vr&&ce>0?new O0({width:ce,color:vr}):void 0,fill:Qe?new Dm({color:Qe}):void 0,declutterMode:"none"}),P[fe]=Dt),Be.setImage(Dt),ft=Be.getText(),Be.setText(void 0),Be.setGeometry(void 0),Be.setZIndex(it),_t=!0}let qn,tn,rr,Dn,pn,Zn;if("text-field"in He){Dn=Math.round(Ci(Me,"layout","text-size",me,De,j,be));const dr=Ci(Me,"layout","text-font",me,De,j,be);rr=Ci(Me,"layout","text-line-height",me,De,j,be),tn=wB(a?a(dr,e.metadata?e.metadata["ol:webfonts"]:void 0):dr,Dn,rr),tn.includes("sans-serif")||(tn+=",sans-serif"),pn=Ci(Me,"layout","text-letter-spacing",me,De,j,be),Zn=Ci(Me,"layout","text-max-width",me,De,j,be);const vr=Ci(Me,"layout","text-field",me,De,j,be);typeof vr=="object"&&vr.sections?vr.sections.length===1?qn=vr.toString():qn=vr.sections.reduce((Jn,Qe,ce)=>{const fe=Qe.fontStack?Qe.fontStack.split(","):dr,nt=wB(a?a(fe):fe,Dn*(Qe.scale||1),rr);let St=Qe.text;if(St===`
`)return Jn.push(`
`,""),Jn;if(Se==2)return Jn.push(MB(St,pn),nt),Jn;St=SB(St,nt,Zn,pn).split(`
`);for(let Ht=0,sn=St.length;Ht<sn;++Ht)Ht>0&&Jn.push(`
`,""),Jn.push(St[Ht],nt);return Jn},[]):qn=S5(vr,pe).trim(),Lt=Ci(Me,"paint","text-opacity",me,De,j,be)}if(qn&&Lt&&!_n){_t||(++at,Be=V[at],(!Be||!Be.getText()||Be.getFill()||Be.getStroke())&&(Be=new Hh,V[at]=Be),Be.setImage(void 0),Be.setGeometry(void 0));const dr=Wk(Me,me,De,"text",j);Be.getText()||Be.setText(ft),ft=Be.getText(),(!ft||"getDeclutterMode"in ft&&ft.getDeclutterMode()!==dr)&&(ft=new $x({padding:[2,2,2,2],declutterMode:dr}),Be.setText(ft));const vr=Ci(Me,"layout","text-transform",me,De,j,be);vr=="uppercase"?qn=Array.isArray(qn)?qn.map((Ye,rt)=>rt%2?Ye:Ye.toUpperCase()):qn.toUpperCase():vr=="lowercase"&&(qn=Array.isArray(qn)?qn.map((Ye,rt)=>rt%2?Ye:Ye.toLowerCase()):qn.toLowerCase());const Jn=Array.isArray(qn)?qn:Se==2?MB(qn,pn):SB(qn,tn,Zn,pn);if(ft.setText(Jn),ft.setFont(tn),ft.setRotation(b5(Ci(Me,"layout","text-rotate",me,De,j,be))),typeof ft.setKeepUpright=="function"){const Ye=Ci(Me,"layout","text-keep-upright",me,De,j,be);ft.setKeepUpright(Ye)}const Qe=Ci(Me,"layout","text-anchor",me,De,j,be),ce=_t||Se==1?"point":Ci(Me,"layout","symbol-placement",me,De,j,be);let fe;if(ce==="line-center"?(ft.setPlacement("line"),fe="center"):ft.setPlacement(ce),ce==="line"&&typeof ft.setRepeat=="function"){const Ye=Ci(Me,"layout","symbol-spacing",me,De,j,be);ft.setRepeat(Ye*2)}ft.setOverflow(ce==="point");let nt=Ci(Me,"paint","text-halo-width",me,De,j,be);const St=Ci(Me,"layout","text-offset",me,De,j,be),Ht=Ci(Me,"paint","text-translate",me,De,j,be);let sn=0,tr=0;if(ce=="point"){fe="center",Qe.indexOf("left")!==-1?(fe="left",tr=nt):Qe.indexOf("right")!==-1&&(fe="right",tr=-nt);const Ye=Ci(Me,"layout","text-rotation-alignment",me,De,j,be);ft.setRotateWithView(Ye=="map")}else ft.setMaxAngle(b5(Ci(Me,"layout","text-max-angle",me,De,j,be))*qn.length/Jn.length),ft.setRotateWithView(!1);ft.setTextAlign(fe);let Oe="middle";Qe.indexOf("bottom")==0?(Oe="bottom",sn=-nt-.5*(rr-1)*Dn):Qe.indexOf("top")==0&&(Oe="top",sn=nt+.5*(rr-1)*Dn),ft.setTextBaseline(Oe);const se=Ci(Me,"layout","text-justify",me,De,j,be);ft.setJustify(se==="auto"?void 0:se),ft.setOffsetX(St[0]*Dn+tr+Ht[0]),ft.setOffsetY(St[1]*Dn+sn+Ht[1]),te.setColor(x0(Ci(Me,"paint","text-color",me,De,j,be),Lt)),ft.setFill(te);const ve=x0(Ci(Me,"paint","text-halo-color",me,De,j,be),Lt);if(ve&&nt>0){ie.setColor(ve),nt*=2;const Ye=.5*Dn;ie.setWidth(nt<=Ye?nt:Ye),ft.setStroke(ie)}else ft.setStroke(void 0);const p=Ci(Me,"layout","text-padding",me,De,j,be),Ne=ft.getPadding();p!==Ne[0]&&(Ne[0]=p,Ne[1]=p,Ne[2]=p,Ne[3]=p),Be.setZIndex(it)}}}if(at>-1)return V.length=at+1,V};return n.setStyle(ne),n.set("mapbox-source",Y),n.set("mapbox-layers",I),n.set("mapbox-featurestate",n.get("mapbox-featurestate")||{}),ne}function rse(n,e){const t=n[0],r=t.width,i=t.height,s=t.data,a=new Uint8ClampedArray(s.length),o=e.resolution*2,d=r-1,g=i-1,b=[0,0,0,0],E=2*Math.PI,S=Math.PI/2,I=Math.PI*e.sunEl/180,P=Math.PI*e.sunAz/180,z=Math.cos(I),j=Math.sin(I),q=e.highlightColor,Y=e.shadowColor,ie=e.accentColor,te=e.encoding;let V,ne,G,oe,he,pe,Ee,me,Se,De,be,at,Ze,Je,We,Me,Fe,He,bt,Yt,gt,Lt;function Kt(Ue,Pe="mapbox"){if(Pe==="mapbox")return(Ue[0]*256*256+Ue[1]*256+Ue[2])*.1-1e4;if(Pe==="terrarium")return Ue[0]*256+Ue[1]+Ue[2]/256-32768}for(ne=0;ne<=g;++ne)for(he=ne===0?0:ne-1,pe=ne===g?g:ne+1,V=0;V<=d;++V)G=V===0?0:V-1,oe=V===d?d:V+1,Ee=(ne*r+G)*4,b[0]=s[Ee],b[1]=s[Ee+1],b[2]=s[Ee+2],b[3]=s[Ee+3],me=e.vert*Kt(b,te),Ee=(ne*r+oe)*4,b[0]=s[Ee],b[1]=s[Ee+1],b[2]=s[Ee+2],b[3]=s[Ee+3],Se=e.vert*Kt(b,te),De=(Se-me)/o,Ee=(he*r+V)*4,b[0]=s[Ee],b[1]=s[Ee+1],b[2]=s[Ee+2],b[3]=s[Ee+3],me=e.vert*Kt(b,te),Ee=(pe*r+V)*4,b[0]=s[Ee],b[1]=s[Ee+1],b[2]=s[Ee+2],b[3]=s[Ee+3],Se=e.vert*Kt(b,te),be=(Se-me)/o,Ze=Math.atan2(be,-De),Ze<0?Ze=S-Ze:Ze>S?Ze=E-Ze+S:Ze=S-Ze,at=Math.atan(Math.sqrt(De*De+be*be)),Lt=j*Math.cos(at)+z*Math.sin(at)*Math.cos(P-Ze),Je=Math.cos(at),We=255*Lt,bt=Math.min(Math.max(2*e.sunEl,0),1),Yt=1.875-e.opacity*1.75,gt=e.opacity!==.5?S*((Math.pow(Yt,at)-1)/(Math.pow(Yt,S)-1)):at,Fe={r:(1-Je)*ie.r*bt*255,g:(1-Je)*ie.g*bt*255,b:(1-Je)*ie.b*bt*255,a:(1-Je)*ie.a*bt*255},Me=Math.abs(((Ze+P)/Math.PI+.5)%2-1),He={r:(q.r*(1-Me)+Y.r*Me)*We,g:(q.g*(1-Me)+Y.g*Me)*We,b:(q.b*(1-Me)+Y.b*Me)*We,a:(q.a*(1-Me)+Y.a*Me)*We},Ee=(ne*r+V)*4,a[Ee]=Fe.r*(1-Me)+He.r,a[Ee+1]=Fe.g*(1-Me)+He.g,a[Ee+2]=Fe.b*(1-Me)+He.b,a[Ee+3]=s[Ee+3]*e.opacity*bt*Math.sin(gt);return new ImageData(a,r,i)}function ise(n,e=512){return n.getExtent()?sO({extent:n.getExtent(),tileSize:e,maxZoom:22}).getResolutions():om}function SN(n,e){return e.accessToken||(e=Object.assign({},e),new URL(n).searchParams.forEach((r,i)=>{e.accessToken=r,e.accessTokenParam=i})),e}function ose(n,e,t="",r={},i=void 0){let s,a,o,d,g=!0;return typeof t!="string"&&!Array.isArray(t)?(o=t,d=o.source||o.layers,r=o):d=t,typeof r=="string"?(s=r,o={}):(s=r.styleUrl,o=r),o.updateSource===!1&&(g=!1),i||(i=o.resolutions),!s&&typeof e=="string"&&!e.trim().startsWith("{")&&(s=e),s&&(s=s.startsWith("data:")?location.href:$2(s,o.accessToken),o=SN(s,o)),new Promise(function(b,E){xN(e,o).then(function(S){if(S.version!=8)return E(new Error("glStyle version 8 required."));if(!(n instanceof X8||n instanceof uC))return E(new Error("Can only apply to VectorLayer or VectorTileLayer"));const I=n instanceof uC?"vector":"geojson";if(d?Array.isArray(d)?a=S.layers.find(function(te){return te.id===d[0]}).source:a=d:(a=Object.keys(S.sources).find(function(te){return S.sources[te].type===I}),d=a),!a)return E(new Error(`No ${I} source found in the glStyle.`));function P(){if(!g)return Promise.resolve();if(n instanceof uC)return ON(S.sources[a],s,o).then(function(G){const oe=n.getSource();oe?G!==oe&&(oe.setTileUrlFunction(G.getTileUrlFunction()),typeof oe.setUrls=="function"&&typeof G.getUrls=="function"&&oe.setUrls(G.getUrls()),oe.format_||(oe.format_=G.format_),oe.getAttributions()||oe.setAttributions(G.getAttributions()),oe.getTileLoadFunction()===Wj&&oe.setTileLoadFunction(G.getTileLoadFunction()),Dg(oe.getProjection(),G.getProjection())&&(oe.tileGrid=G.getTileGrid())):n.setSource(G);const he=n.getSource().getTileGrid();!isFinite(n.getMaxResolution())&&!isFinite(n.getMinZoom())&&he.getMinZoom()>0&&n.setMaxResolution(Yv(Math.max(0,he.getMinZoom()-1e-12),he.getResolutions()))});const te=S.sources[a];let V=n.getSource();(!V||V.get("mapbox-source")!==te)&&(V=TN(te,s,o));const ne=n.getSource();return ne?V!==ne&&(ne.getAttributions()||ne.setAttributions(V.getAttributions()),ne.format_||(ne.format_=V.getFormat()),ne.url_=V.getUrl()):n.setSource(V),Promise.resolve()}let z,j,q,Y;function ie(){if(!Y&&(!S.sprite||j)){if(o.projection&&!i){const V=wa(o.projection).getUnits();V!=="m"&&(i=om.map(ne=>ne/j0[V]))}Y=nse(n,S,d,i,j,q,(te,V=o.webfonts)=>Voe(te,V),o.getImage),n.getStyle()?P().then(b).catch(E):E(new Error(`Nothing to show for source [${a}]`))}else Y?(n.setStyle(Y),P().then(b).catch(E)):E(new Error("Something went wrong trying to apply style."))}if(S.sprite){const te=new URL(Uoe(S.sprite,o.accessToken,s||location.href));z=window.devicePixelRatio>=1.5?.5:1;const V=z==.5?"@2x":"";let ne=te.origin+te.pathname+V+".json"+te.search;new Promise(function(G,oe){zy("Sprite",ne,o).then(G).catch(function(he){ne=te.origin+te.pathname+".json"+te.search,zy("Sprite",ne,o).then(G).catch(oe)})}).then(function(G){if(G===void 0&&E(new Error("No sprites found.")),j=G,q=te.origin+te.pathname+V+".png"+te.search,o.transformRequest){const oe=o.transformRequest(q,"SpriteImage")||q;(oe instanceof Request||oe instanceof Promise)&&(q=oe)}ie()}).catch(function(G){E(new Error(`Sprites cannot be loaded: ${ne}: ${G.message}`))})}else ie()}).catch(E)})}const M0={};function EN(n,e){let t;return n.some(function(r){if(r.id==e)return t=r.source,!0}),t}function sse(n,e){const t=n.bounds;if(t){const r=oB([t[0],t[1]],e),i=oB([t[2],t[3]],e);return[r[0],r[1],i[0],i[1]]}return wa(e).getExtent()}function BN(n,e,t){const r=new jj({tileJSON:e,tileSize:n.tileSize||e.tileSize||512}),i=r.getTileJSON(),s=r.getTileGrid(),a=wa(t.projection||"EPSG:3857"),o=sse(i,a),d=a.getExtent(),g=i.minzoom||0,b=i.maxzoom||22,E={attributions:r.getAttributions(),projection:a,tileGrid:new Xx({origin:d?Qm(d):s.getOrigin(0),extent:o||s.getExtent(),minZoom:g,resolutions:ise(a,e.tileSize).slice(0,b+1),tileSize:s.getTileSize(0)})};return Array.isArray(i.tiles)?E.urls=i.tiles:E.url=i.tiles,E}function ase(n,e,t,r){const i={id:n.id,type:n.type},s=n.layout||{},a=n.paint||{};i.paint=a;const o=KO(e,t.resolutions||om);let d;const g=Ci(i,"paint","background-color",o,M0,r);return a["background-opacity"]!==void 0&&(d=Ci(i,"paint","background-opacity",o,M0,r)),s.visibility=="none"?void 0:x0(g,d)}function lse(n,e,t){const r=document.createElement("div");return r.className="ol-mapbox-style-background",r.style.position="absolute",r.style.width="100%",r.style.height="100%",new Xy({source:new Hy({}),render(i){const s=ase(n,i.viewState.resolution,e,t);return r.style.backgroundColor=s,r}})}function ON(n,e,t){return new Promise(function(r,i){wN(n,e,t).then(function({tileJson:s,tileLoadFunction:a}){const o=BN(n,s,t);o.tileLoadFunction=a,o.format=new pre,r(new Nj(o))}).catch(i)})}function use(n,e,t){const r=new uC({declutter:!0,visible:!1});return ON(n,e,t).then(function(i){i.set("mapbox-source",n),r.setSource(i)}).catch(function(i){r.setSource(void 0)}),r}function IN(n){return`{bbox-${(n?n.getCode():"EPSG:3857").toLowerCase().replace(/[^a-z0-9]/g,"-")}}`}function Ase(n,e,t){return new Promise(function(r,i){wN(n,e,t).then(function({tileJson:s,tileLoadFunction:a}){const o=new jj({interpolate:t.interpolate===void 0?!0:t.interpolate,transition:0,crossOrigin:"anonymous",tileJSON:s});o.tileGrid=BN(n,s,t).tileGrid,t.projection&&(o.projection=wa(t.projection));const d=o.getTileUrlFunction();a&&o.setTileLoadFunction(a),o.setTileUrlFunction(function(g,b,E){const S=IN(E);let I=d(g,b,E);if(I.indexOf(S)!=-1){const P=o.getTileGrid().getTileCoordExtent(g);I=I.replace(S,P.toString())}return I}),o.set("mapbox-source",n),r(o)}).catch(function(s){i(s)})})}function kN(n,e,t){const r=new Pj;return Ase(n,e,t).then(function(i){r.setSource(i)}).catch(function(){r.setSource(void 0)}),r}function cse(n,e,t){const r=kN(n,e,t);return new Ej({source:new Uj({operationType:"image",operation:rse,sources:[r]})})}function TN(n,e,t){const r=t.projection?new Ak({dataProjection:t.projection}):new Ak,i=n.data,s={};if(typeof i=="string"){const[o]=Vb(i,t.accessToken,t.accessTokenParam||"access_token",e||location.href);if(/\{bbox-[0-9a-z-]+\}/.test(o)){const g=(E,S,I)=>{const P=IN(I);return o.replace(P,`${E.join(",")}`)},b=new Yb({attributions:n.attribution,format:r,loader:(E,S,I,P,z)=>{const j=typeof g=="function"?g(E,S,I):g;zy("GeoJSON",j,t).then(q=>{const Y=b.getFormat().readFeatures(q,{featureProjection:I});b.addFeatures(Y),P(Y)}).catch(q=>{b.removeLoadedExtent(E),z()})},strategy:Pee});return b.set("mapbox-source",n),b}const d=new Yb({attributions:n.attribution,format:r,url:o,loader:(g,b,E,S,I)=>{zy("GeoJSON",o,t).then(P=>{const z=d.getFormat().readFeatures(P,{featureProjection:E});d.addFeatures(z),S(z)}).catch(P=>{d.removeLoadedExtent(g),I()})}});return d}s.features=r.readFeatures(i,{featureProjection:"EPSG:3857"});const a=new Yb(Object.assign({attributions:n.attribution,format:r},s));return a.set("mapbox-source",n),a}function dse(n,e,t){return new X8({declutter:!0,source:TN(n,e,t),visible:!1})}function hse(n,e,t){let r=null;return function(i){n.paint&&"raster-opacity"in n.paint&&i.frameState.viewState.zoom!==r&&(r=i.frameState.viewState.zoom,delete t[n.id],fse(n,e,r,t))}}function fse(n,e,t,r){const i=Ci(n,"paint","raster-opacity",t,M0,r);e.setOpacity(i)}function pse(n,e){function t(){const r=e.get("mapbox-style");if(!r)return;const i=CN(r.layers),s=n.get("mapbox-layers"),a=i.filter(function(o){return s.includes(o.id)}).some(function(o){return!o.layout||!o.layout.visibility||o.layout.visibility==="visible"});n.get("visible")!==a&&n.setVisible(a)}n.on("change",t),t()}function mse(n,e,t,r){const i=bN(n),s=n.layers,a=t.type,o=t.source||EN(s,t.ref),d=n.sources[o];let g;if(a=="background")g=lse(t,r,i);else if(d.type=="vector")g=use(d,e,r);else if(d.type=="raster")g=kN(d,e,r),g.setVisible(t.layout?t.layout.visibility!=="none":!0),g.on("prerender",hse(t,g,i));else if(d.type=="geojson")g=dse(d,e,r);else if(d.type=="raster-dem"&&t.type=="hillshade"){const E=cse(d,e,r);g=E,E.getSource().on("beforeoperations",function(S){const I=S.data;I.resolution=iB(r.projection||"EPSG:3857",S.resolution,Gf(S.extent),"m");const P=KO(S.resolution,r.resolutions||om);I.encoding=d.encoding,I.vert=5*Ci(t,"paint","hillshade-exaggeration",P,M0,i),I.sunAz=Ci(t,"paint","hillshade-illumination-direction",P,M0,i),I.sunEl=35,I.opacity=.3,I.highlightColor=Ci(t,"paint","hillshade-highlight-color",P,M0,i),I.shadowColor=Ci(t,"paint","hillshade-shadow-color",P,M0,i),I.accentColor=Ci(t,"paint","hillshade-accent-color",P,M0,i)}),g.setVisible(t.layout?t.layout.visibility!=="none":!0)}const b=o;return g&&g.set("mapbox-source",b),g}function Gk(n,e,t,r){const i=[];let s=null;if(e instanceof nO){if(s=e.getView(),!s.isDef()&&!s.getRotation()&&!s.getResolutions()){const E=r.projection?wa(r.projection):s.getProjection();s=new yp(Object.assign(s.getProperties(),{maxResolution:om[0]/j0[E.getUnits()],projection:r.projection||s.getProjection()})),e.setView(s)}"center"in n&&!s.getCenter()&&s.setCenter(oB(n.center,s.getProjection())),"zoom"in n&&s.getZoom()===void 0&&s.setResolution(om[0]/j0[s.getProjection().getUnits()]/Math.pow(2,n.zoom)),(!s.getCenter()||s.getZoom()===void 0)&&s.fit(s.getProjection().getExtent(),{nearest:!0,size:e.getSize()})}e.set("mapbox-style",n),e.set("mapbox-metadata",{styleUrl:t,options:r});const a=n.layers;let o=[],d,g,b;for(let E=0,S=a.length;E<S;++E){const I=a[E],P=I.type;if(P=="heatmap"){console.debug(`layers[${E}].type "${P}" not supported`);continue}else b=I.source||EN(a,I.ref),(!b||b!=g)&&(o.length&&(i.push(Qk(d,o,n,t,e,r)),o=[]),d=mse(n,t,I,r),d instanceof X8||d instanceof uC||(o=[]),g=d.get("mapbox-source")),o.push(I.id)}return i.push(Qk(d,o,n,t,e,r)),Promise.all(i)}function gse(n,e,t={}){let r,i;if(typeof n=="string"||n instanceof HTMLElement?i=new nO({target:n}):i=n,typeof e=="string"){const s=e.startsWith("data:")?location.href:$2(e,t.accessToken);t=SN(s,t),r=new Promise(function(a,o){xN(e,t).then(function(d){Gk(d,i,s,t).then(function(){a(i)}).catch(o)}).catch(function(d){o(new Error(`Could not load ${e}: ${d.message}`))})})}else r=new Promise(function(s,a){Gk(e,i,!t.styleUrl||t.styleUrl.startsWith("data:")?location.href:$2(t.styleUrl,t.accessToken),t).then(function(){s(i)}).catch(a)});return r}function Qk(n,e,t,r,i,s={}){let a=24,o=0;const d=t.layers;for(let g=0,b=d.length;g<b;++g){const E=d[g];e.indexOf(E.id)!==-1&&(a=Math.min("minzoom"in E?E.minzoom:0,a),o=Math.max("maxzoom"in E?E.maxzoom:24,o))}return new Promise(function(g,b){const E=function(){const I=n.getSource();if(!I||I.getState()==="error"){b(new Error("Error accessing data for source "+n.get("mapbox-source")));return}if("getTileGrid"in I){const P=I.getTileGrid();if(P){const z=P.getMinZoom();(a>0||z>0)&&n.setMaxResolution(Math.min(Yv(Math.max(0,a-1e-12),om),Yv(Math.max(0,z-1e-12),P.getResolutions()))),o<24&&n.setMinResolution(Yv(o,om))}}else a>0&&n.setMaxResolution(Yv(Math.max(0,a-1e-12),om));I instanceof Yb||I instanceof Nj?ose(n,t,e,Object.assign({styleUrl:r},s)).then(function(){pse(n,i),g()}).catch(b):g()};n.set("mapbox-layers",e);const S=i.getLayers();S.getArray().indexOf(n)===-1&&S.push(n),n.getSource()?E():n.once("change:source",E)})}function ri(){var n="/home/runner/work/maputnik/maputnik/src/components/MapOpenLayers.tsx",e="28a80ffabe289131cb2e371ab6bf55f9bb46f37a",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/MapOpenLayers.tsx",statementMap:{0:{start:{line:11,column:2},end:{line:15,column:3}},1:{start:{line:12,column:4},end:{line:12,column:16}},2:{start:{line:14,column:4},end:{line:14,column:149}},3:{start:{line:14,column:103},end:{line:14,column:133}},4:{start:{line:18,column:24},end:{line:25,column:3}},5:{start:{line:28,column:14},end:{line:28,column:18}},6:{start:{line:30,column:19},end:{line:30,column:23}},7:{start:{line:32,column:4},end:{line:32,column:17}},8:{start:{line:33,column:4},end:{line:38,column:6}},9:{start:{line:39,column:4},end:{line:39,column:67}},10:{start:{line:42,column:4},end:{line:42,column:26}},11:{start:{line:42,column:19},end:{line:42,column:26}},12:{start:{line:43,column:4},end:{line:43,column:33}},13:{start:{line:44,column:4},end:{line:44,column:33}},14:{start:{line:47,column:4},end:{line:51,column:5}},15:{start:{line:48,column:6},end:{line:50,column:8}},16:{start:{line:54,column:4},end:{line:61,column:7}},17:{start:{line:62,column:16},end:{line:69,column:6}},18:{start:{line:70,column:4},end:{line:78,column:7}},19:{start:{line:71,column:21},end:{line:71,column:45}},20:{start:{line:72,column:6},end:{line:77,column:9}},21:{start:{line:79,column:22},end:{line:89,column:5}},22:{start:{line:80,column:19},end:{line:80,column:42}},23:{start:{line:81,column:21},end:{line:81,column:56}},24:{start:{line:82,column:6},end:{line:88,column:9}},25:{start:{line:90,column:4},end:{line:90,column:16}},26:{start:{line:91,column:4},end:{line:91,column:33}},27:{start:{line:92,column:4},end:{line:102,column:7}},28:{start:{line:93,column:21},end:{line:93,column:56}},29:{start:{line:94,column:6},end:{line:101,column:9}},30:{start:{line:103,column:4},end:{line:103,column:19}},31:{start:{line:104,column:4},end:{line:106,column:6}},32:{start:{line:108,column:17},end:{line:111,column:3}},33:{start:{line:109,column:4},end:{line:109,column:20}},34:{start:{line:110,column:4},end:{line:110,column:37}},35:{start:{line:113,column:14},end:{line:113,column:26}},36:{start:{line:114,column:4},end:{line:181,column:9}},37:{start:{line:118,column:22},end:{line:118,column:45}},38:{start:{line:173,column:22},end:{line:173,column:40}},39:{start:{line:184,column:22},end:{line:184,column:62}}},fnMap:{0:{name:"renderCoords",decl:{start:{line:10,column:9},end:{line:10,column:21}},loc:{start:{line:10,column:30},end:{line:16,column:1}},line:10},1:{name:"(anonymous_1)",decl:{start:{line:14,column:92},end:{line:14,column:93}},loc:{start:{line:14,column:103},end:{line:14,column:133}},line:14},2:{name:"(anonymous_2)",decl:{start:{line:19,column:17},end:{line:19,column:18}},loc:{start:{line:19,column:23},end:{line:20,column:5}},line:19},3:{name:"(anonymous_3)",decl:{start:{line:21,column:18},end:{line:21,column:19}},loc:{start:{line:21,column:24},end:{line:22,column:5}},line:21},4:{name:"(anonymous_4)",decl:{start:{line:23,column:19},end:{line:23,column:20}},loc:{start:{line:23,column:25},end:{line:24,column:5}},line:23},5:{name:"(anonymous_5)",decl:{start:{line:31,column:2},end:{line:31,column:3}},loc:{start:{line:31,column:21},end:{line:40,column:3}},line:31},6:{name:"(anonymous_6)",decl:{start:{line:41,column:2},end:{line:41,column:3}},loc:{start:{line:41,column:28},end:{line:45,column:3}},line:41},7:{name:"(anonymous_7)",decl:{start:{line:46,column:2},end:{line:46,column:3}},loc:{start:{line:46,column:32},end:{line:52,column:3}},line:46},8:{name:"(anonymous_8)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:22},end:{line:107,column:3}},line:53},9:{name:"(anonymous_9)",decl:{start:{line:70,column:26},end:{line:70,column:27}},loc:{start:{line:70,column:35},end:{line:78,column:5}},line:70},10:{name:"(anonymous_10)",decl:{start:{line:79,column:22},end:{line:79,column:23}},loc:{start:{line:79,column:28},end:{line:89,column:5}},line:79},11:{name:"(anonymous_11)",decl:{start:{line:92,column:25},end:{line:92,column:26}},loc:{start:{line:92,column:33},end:{line:102,column:5}},line:92},12:{name:"(anonymous_12)",decl:{start:{line:108,column:17},end:{line:108,column:18}},loc:{start:{line:108,column:24},end:{line:111,column:3}},line:108},13:{name:"(anonymous_13)",decl:{start:{line:112,column:2},end:{line:112,column:3}},loc:{start:{line:112,column:11},end:{line:182,column:3}},line:112},14:{name:"(anonymous_14)",decl:{start:{line:118,column:15},end:{line:118,column:16}},loc:{start:{line:118,column:22},end:{line:118,column:45}},line:118},15:{name:"(anonymous_15)",decl:{start:{line:173,column:15},end:{line:173,column:16}},loc:{start:{line:173,column:22},end:{line:173,column:40}},line:173}},branchMap:{0:{loc:{start:{line:11,column:2},end:{line:15,column:3}},type:"if",locations:[{start:{line:11,column:2},end:{line:15,column:3}},{start:{line:13,column:9},end:{line:15,column:3}}],line:11},1:{loc:{start:{line:11,column:6},end:{line:11,column:34}},type:"binary-expr",locations:[{start:{line:11,column:6},end:{line:11,column:13}},{start:{line:11,column:17},end:{line:11,column:34}}],line:11},2:{loc:{start:{line:42,column:4},end:{line:42,column:26}},type:"if",locations:[{start:{line:42,column:4},end:{line:42,column:26}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:42},3:{loc:{start:{line:47,column:4},end:{line:51,column:5}},type:"if",locations:[{start:{line:47,column:4},end:{line:51,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:47},4:{loc:{start:{line:134,column:26},end:{line:134,column:59}},type:"binary-expr",locations:[{start:{line:134,column:26},end:{line:134,column:53}},{start:{line:134,column:57},end:{line:134,column:59}}],line:134},5:{loc:{start:{line:146,column:6},end:{line:168,column:10}},type:"binary-expr",locations:[{start:{line:146,column:6},end:{line:146,column:29}},{start:{line:146,column:49},end:{line:168,column:10}}],line:146}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/MapOpenLayers.tsx"],names:[],mappings:"AAoBW,cAyIL,YAzIK;AApBX,OAAO,WAAW;AAClB,SAAQ,gBAAe;AACvB,SAA0B,uBAAuB;AAEjD,OAAO,6BAA6B;AAEpC,OAAO;AAEP,SAAQ,aAAY;AACpB,SAAQ,KAAK,MAAM,eAAc;AAEjC,SAAQ,gBAAe;AAIvB,SAAS,aAAc,QAAkB;AACvC,MAAI,CAAC,UAAU,OAAO,SAAS,GAAG;AAChC,WAAO;AAAA,EACT,OACK;AACH,WAAO,oBAAC,UAAK,WAAU,mBACpB,iBAAO,IAAI,CAAC,UAAU,OAAO,KAAK,EAAE,SAAS,GAAG,GAAQ,CAAC,EAAE,KAAK,IAAI,GACvE;AAAA,EACF;AACF;AAqBA,MAAM,8BAA8B,MAAM,UAA0D;AAAA,EAClG,OAAO,eAAe;AAAA,IACpB,aAAa,MAAM;AAAA,IAAC;AAAA,IACpB,cAAc,MAAM;AAAA,IAAC;AAAA,IACrB,eAAe,MAAM;AAAA,IAAC;AAAA,EACxB;AAAA,EACA;AAAA,EACA;AAAA,EACA,YAAmC;AAAA,EACnC;AAAA,EACA,iBAAqC;AAAA,EAErC,YAAY,OAAmC;AAC7C,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,MAAM;AAAA,MACN,UAAU;AAAA,MACV,QAAQ,CAAC;AAAA,MACT,QAAQ,CAAC;AAAA,IACX;AACA,SAAK,cAAc,SAAS,KAAK,aAAa,KAAK,IAAI,GAAG,GAAG;AAAA,EAC/D;AAAA,EAEA,aAAa,aAAiC;AAC5C,QAAG,CAAC,KAAK,IAAK;AAGd,SAAK,IAAI,UAAU,EAAE,MAAM;AAC3B,UAAM,KAAK,KAAK,WAAW;AAAA,EAC7B;AAAA,EAEA,mBAAmB,WAAuC;AACxD,QAAI,KAAK,MAAM,aAAa,UAAU,UAAU;AAC9C,WAAK;AAAA,QACH,KAAK,MAAM,oBAAoB,KAAK,MAAM,QAAQ;AAAA,MACpD;AAAA,IACF;AAAA,EACF;AAAA,EAEA,oBAAoB;AAClB,SAAK,UAAU,IAAI,QAAQ;AAAA,MACzB,SAAS,KAAK;AAAA,MACd,SAAS;AAAA,QACP,WAAW;AAAA,UACT,UAAU;AAAA,QACZ;AAAA,MACF;AAAA,IACF,CAAC;AAED,UAAM,MAAM,IAAI,IAAI;AAAA,MAClB,QAAQ,KAAK;AAAA,MACb,UAAU,CAAC,KAAK,OAAO;AAAA,MACvB,MAAM,IAAI,KAAK;AAAA,QACb,MAAM;AAAA,QACN,QAAQ,CAAC,KAAK,GAAG;AAAA,MACnB,CAAC;AAAA,IACH,CAAC;AAED,QAAI,GAAG,eAAe,CAAC,QAAQ;AAC7B,YAAM,SAAS,SAAS,IAAI,UAAU;AACtC,WAAK,SAAS;AAAA,QACZ,QAAQ;AAAA,UACN,OAAO,CAAC,EAAE,QAAQ,CAAC;AAAA,UACnB,OAAO,CAAC,EAAE,QAAQ,CAAC;AAAA,QACrB;AAAA,MACF,CAAC;AAAA,IACH,CAAC;AAED,UAAM,YAAY,MAAM;AACtB,YAAM,OAAO,IAAI,QAAQ,EAAE,QAAQ;AACnC,YAAM,SAAS,SAAS,IAAI,QAAQ,EAAE,UAAU,CAAE;AAElD,WAAK,MAAM,SAAS;AAAA,QAClB;AAAA,QACA,QAAQ;AAAA,UACN,KAAK,OAAO,CAAC;AAAA,UACb,KAAK,OAAO,CAAC;AAAA,QACf;AAAA,MACF,CAAC;AAAA,IACH;AAEA,cAAU;AACV,QAAI,GAAG,WAAW,SAAS;AAE3B,QAAI,GAAG,cAAc,CAAC,OAAO;AAC3B,YAAM,SAAS,SAAS,IAAI,QAAQ,EAAE,UAAU,CAAE;AAClD,WAAK,SAAS;AAAA,QACZ,QAAQ;AAAA,UACN,OAAO,CAAC,EAAE,QAAQ,CAAC;AAAA,UACnB,OAAO,CAAC,EAAE,QAAQ,CAAC;AAAA,QACrB;AAAA,QACA,UAAU,IAAI,QAAQ,EAAE,YAAY,EAAE,QAAQ,CAAC;AAAA,QAC/C,MAAM,IAAI,QAAQ,EAAE,QAAQ,EAAG,QAAQ,CAAC;AAAA,MAC1C,CAAC;AAAA,IACH,CAAC;AAID,SAAK,MAAM;AACX,SAAK;AAAA,MACH,KAAK,MAAM,oBAAoB,KAAK,MAAM,QAAQ;AAAA,IACpD;AAAA,EACF;AAAA,EAEA,eAAe,CAAC,MAAW;AACzB,MAAE,OAAO,KAAK;AACd,SAAK,QAAS,YAAY,MAAS;AAAA,EACrC;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SAAI,WAAU,yBACpB;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,KAAK,OAAK,KAAK,iBAAiB;AAAA,UAChC,OAAO,EAAC,YAAY,QAAO;AAAA,UAC3B,WAAU;AAAA,UAEV;AAAA;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,SAAS,KAAK;AAAA,gBACd,cAAY,EAAE,aAAa;AAAA,gBAC5B;AAAA;AAAA,YAED;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,UAAU,KAAK,MAAM,oBAAoB,CAAC;AAAA,gBAC1C,eAAe,KAAK,MAAM;AAAA;AAAA,YAC5B;AAAA;AAAA;AAAA,MACF;AAAA,MACA,qBAAC,SAAI,WAAU,oBACZ;AAAA,UAAE,OAAO;AAAA,QAAE;AAAA,QAAE,KAAK,MAAM;AAAA,SAC3B;AAAA,MACC,KAAK,MAAM,gBACV,qBAAC,SAAI,WAAU,qBACb;AAAA,6BAAC,SACC;AAAA,+BAAC,WAAO;AAAA,cAAE,SAAS;AAAA,YAAE;AAAA,aAAC;AAAA,UACtB,oBAAC,UAAM,uBAAa,KAAK,MAAM,MAAM,GAAE;AAAA,WACzC;AAAA,QACA,qBAAC,SACC;AAAA,+BAAC,WAAO;AAAA,cAAE,SAAS;AAAA,YAAE;AAAA,aAAC;AAAA,UACtB,oBAAC,UAAM,uBAAa,KAAK,MAAM,MAAM,GAAE;AAAA,WACzC;AAAA,QACA,qBAAC,SACC;AAAA,+BAAC,WAAO;AAAA,cAAE,WAAW;AAAA,YAAE;AAAA,aAAC;AAAA,UACxB,oBAAC,UAAM,eAAK,MAAM,UAAS;AAAA,WAC7B;AAAA,SACF;AAAA,MAEF;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,KAAK,OAAK,KAAK,YAAY;AAAA,UAC3B,MAAK;AAAA,UACL,cAAY,EAAE,UAAU;AAAA,UACxB,OAAO;AAAA,YACL,GAAG,KAAK,MAAM;AAAA,UAChB;AAAA;AAAA,MACF;AAAA,OACF;AAAA,EACF;AACF;AAEA,MAAM,gBAAgB,gBAAgB,EAAE,qBAAqB;AAC7D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"28a80ffabe289131cb2e371ab6bf55f9bb46f37a"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return ri=function(){return a},a}ri();function qk(n){return ri().f[0]++,ri().s[0]++,ri().b[1][0]++,!n||(ri().b[1][1]++,n.length<2)?(ri().b[0][0]++,ri().s[1]++,null):(ri().b[0][1]++,ri().s[2]++,ue.jsx("span",{className:"maputnik-coords",children:n.map(e=>(ri().f[1]++,ri().s[3]++,String(e).padStart(7,""))).join(", ")}))}class PN extends nr.Component{constructor(t){ri().f[5]++,ri().s[7]++;super(t);Pn(this,"updateStyle");Pn(this,"map");Pn(this,"container",(ri().s[5]++,null));Pn(this,"overlay");Pn(this,"popupContainer",(ri().s[6]++,null));Pn(this,"closeOverlay",(ri().s[32]++,t=>{ri().f[12]++,ri().s[33]++,t.target.blur(),ri().s[34]++,this.overlay.setPosition(void 0)}));ri().s[8]++,this.state={zoom:"0",rotation:"0",cursor:[],center:[]},ri().s[9]++,this.updateStyle=mx.throttle(this._updateStyle.bind(this),200)}_updateStyle(t){if(ri().f[6]++,ri().s[10]++,this.map)ri().b[2][1]++;else{ri().b[2][0]++,ri().s[11]++;return}ri().s[12]++,this.map.getLayers().clear(),ri().s[13]++,gse(this.map,t)}componentDidUpdate(t){ri().f[7]++,ri().s[14]++,this.props.mapStyle!==t.mapStyle?(ri().b[3][0]++,ri().s[15]++,this.updateStyle(this.props.replaceAccessTokens(this.props.mapStyle))):ri().b[3][1]++}componentDidMount(){ri().f[8]++,ri().s[16]++,this.overlay=new Ine({element:this.popupContainer,autoPan:{animation:{duration:250}}});const t=(ri().s[17]++,new nO({target:this.container,overlays:[this.overlay],view:new yp({zoom:1,center:[180,-90]})}));ri().s[18]++,t.on("pointermove",i=>{ri().f[9]++;const s=(ri().s[19]++,Q4(i.coordinate));ri().s[20]++,this.setState({cursor:[s[0].toFixed(2),s[1].toFixed(2)]})}),ri().s[21]++;const r=()=>{ri().f[10]++;const i=(ri().s[22]++,t.getView().getZoom()),s=(ri().s[23]++,Q4(t.getView().getCenter()));ri().s[24]++,this.props.onChange({zoom:i,center:{lng:s[0],lat:s[1]}})};ri().s[25]++,r(),ri().s[26]++,t.on("moveend",r),ri().s[27]++,t.on("postrender",i=>{ri().f[11]++;const s=(ri().s[28]++,Q4(t.getView().getCenter()));ri().s[29]++,this.setState({center:[s[0].toFixed(2),s[1].toFixed(2)],rotation:t.getView().getRotation().toFixed(2),zoom:t.getView().getZoom().toFixed(2)})}),ri().s[30]++,this.map=t,ri().s[31]++,this.updateStyle(this.props.replaceAccessTokens(this.props.mapStyle))}render(){ri().f[13]++;const t=(ri().s[35]++,this.props.t);return ri().s[36]++,ue.jsxs("div",{className:"maputnik-ol-container",children:[ue.jsxs("div",{ref:r=>(ri().f[14]++,ri().s[37]++,this.popupContainer=r),style:{background:"black"},className:"maputnik-popup",children:[ue.jsx("button",{className:"maplibregl-popup-close-button",onClick:this.closeOverlay,"aria-label":t("Close popup"),children:""}),ue.jsx(HU,{features:(ri().b[4][0]++,this.state.selectedFeatures||(ri().b[4][1]++,[])),onLayerSelect:this.props.onLayerSelect})]}),ue.jsxs("div",{className:"maputnik-ol-zoom",children:[t("Zoom:")," ",this.state.zoom]}),(ri().b[5][0]++,this.props.debugToolbox&&(ri().b[5][1]++,ue.jsxs("div",{className:"maputnik-ol-debug",children:[ue.jsxs("div",{children:[ue.jsxs("label",{children:[t("cursor:")," "]}),ue.jsx("span",{children:qk(this.state.cursor)})]}),ue.jsxs("div",{children:[ue.jsxs("label",{children:[t("center:")," "]}),ue.jsx("span",{children:qk(this.state.center)})]}),ue.jsxs("div",{children:[ue.jsxs("label",{children:[t("rotation:")," "]}),ue.jsx("span",{children:this.state.rotation})]})]}))),ue.jsx("div",{className:"maputnik-ol",ref:r=>(ri().f[15]++,ri().s[38]++,this.container=r),role:"region","aria-label":t("Map view"),style:{...this.props.style}})]})}}Pn(PN,"defaultProps",(ri().s[4]++,{onMapLoaded:()=>{ri().f[2]++},onDataChange:()=>{ri().f[3]++},onLayerSelect:()=>{ri().f[4]++}}));const yse=(ri().s[39]++,Ns()(PN));var E5={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var Yk;function vse(){return Yk||(Yk=1,function(n){(function(){var e={}.hasOwnProperty;function t(){for(var s="",a=0;a<arguments.length;a++){var o=arguments[a];o&&(s=i(s,r(o)))}return s}function r(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return t.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var a="";for(var o in s)e.call(s,o)&&s[o]&&(a=i(a,o));return a}function i(s,a){return a?s?s+" "+a:s+a:s}n.exports?(t.default=t,n.exports=t):window.classNames=t})()}(E5)),E5.exports}var Cse=vse();const am=el(Cse);function _g(){var n="/home/runner/work/maputnik/maputnik/src/components/Collapser.tsx",e="e73e8fb606fcd7318a8222b2e50c576ed3ad8702",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/Collapser.tsx",statementMap:{0:{start:{line:6,column:22},end:{line:10,column:5}},1:{start:{line:11,column:4},end:{line:11,column:154}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:12,column:3}},line:5}},branchMap:{0:{loc:{start:{line:11,column:11},end:{line:11,column:153}},type:"cond-expr",locations:[{start:{line:11,column:52},end:{line:11,column:92}},{start:{line:11,column:111},end:{line:11,column:153}}],line:11}},s:{0:0,1:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Collapser.tsx"],names:[],mappings:"AAeoC;AAfpC,OAAO,WAAW;AAClB,SAAQ,iBAAiB,qBAAoB;AAO7C,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,SAAS;AACP,UAAM,YAAY;AAAA,MAChB,OAAO;AAAA,MACP,QAAQ;AAAA,MACR,GAAG,KAAK,MAAM;AAAA,IAChB;AACA,WAAO,KAAK,MAAM,cAAc,oBAAC,iBAAc,OAAO,WAAU,IAAK,oBAAC,mBAAgB,OAAO,WAAW;AAAA,EAC1G;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e73e8fb606fcd7318a8222b2e50c576ed3ad8702"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return _g=function(){return a},a}_g();class _se extends nr.Component{render(){_g().f[0]++;const e=(_g().s[0]++,{width:20,height:20,...this.props.style});return _g().s[1]++,this.props.isCollapsed?(_g().b[0][0]++,ue.jsx(GZ,{style:e})):(_g().b[0][1]++,ue.jsx(WZ,{style:e}))}}function Ay(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerListGroup.tsx",e="b04bfec534013c327fd210571832bbd2813a944a",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/LayerListGroup.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:32,column:9}},1:{start:{line:11,column:25},end:{line:11,column:72}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:33,column:3}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:11,column:17},end:{line:11,column:18}},loc:{start:{line:11,column:25},end:{line:11,column:72}},line:11}},branchMap:{},s:{0:0,1:0},f:{0:0,1:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerListGroup.tsx"],names:[],mappings:"AAcM,SAIE,KAJF;AAdN,OAAO,WAAW;AAClB,OAAO,eAAe;AAUtB,qBAAqB,uBAAuB,MAAM,UAA+B;AAAA,EAC/E,SAAS;AACP,WAAO,oBAAC,QAAG,WAAU,6BACnB;AAAA,MAAC;AAAA;AAAA,QAAI,WAAU;AAAA,QACb,eAAa,sBAAoB,KAAK,MAAM,aAAa;AAAA,QACzD,SAAS,QAAM,KAAK,MAAM,eAAe,CAAC,KAAK,MAAM,QAAQ;AAAA,QAE7D;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,iBAAe,KAAK,MAAM,eAAe;AAAA,cACzC,iBAAe,KAAK,MAAM;AAAA,cAEzB,eAAK,MAAM;AAAA;AAAA,UACd;AAAA,UACA,oBAAC,UAAK,WAAU,kBAAiB;AAAA,UACjC;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,QAAQ,IAAI,OAAO,GAAG;AAAA,cAC/B,aAAa,KAAK,MAAM;AAAA;AAAA,UAC1B;AAAA;AAAA;AAAA,IACF,GACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"b04bfec534013c327fd210571832bbd2813a944a"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Ay=function(){return a},a}Ay();class bse extends nr.Component{render(){return Ay().f[0]++,Ay().s[0]++,ue.jsx("li",{className:"maputnik-layer-list-group",children:ue.jsxs("div",{className:"maputnik-layer-list-group-header","data-wd-key":"layer-list-group:"+this.props["data-wd-key"],onClick:e=>(Ay().f[1]++,Ay().s[1]++,this.props.onActiveToggle(!this.props.isActive)),children:[ue.jsx("button",{className:"maputnik-layer-list-group-title","aria-controls":this.props["aria-controls"],"aria-expanded":this.props.isActive,children:this.props.title}),ue.jsx("span",{className:"maputnik-space"}),ue.jsx(_se,{style:{height:14,width:14},isCollapsed:this.props.isActive})]})})}}function jC(){return jC=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},jC.apply(null,arguments)}function xse(n){if(Array.isArray(n))return n}function wse(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,s,a,o=[],d=!0,g=!1;try{if(s=(t=t.call(n)).next,e!==0)for(;!(d=(r=s.call(t)).done)&&(o.push(r.value),o.length!==e);d=!0);}catch(b){g=!0,i=b}finally{try{if(!d&&t.return!=null&&(a=t.return(),Object(a)!==a))return}finally{if(g)throw i}}return o}}function BB(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function KN(n,e){if(n){if(typeof n=="string")return BB(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?BB(n,e):void 0}}function Mse(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function DN(n,e){return xse(n)||wse(n,e)||KN(n,e)||Mse()}function jy(n){"@babel/helpers - typeof";return jy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jy(n)}function Sse(n,e){if(jy(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(jy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function RN(n){var e=Sse(n,"string");return jy(e)=="symbol"?e:e+""}function Ua(n,e,t){return(e=RN(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function B5(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&r.push.apply(r,Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.forEach(function(i){Ua(n,i,t[i])})}return n}function g_(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Ese(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,RN(r.key),r)}}function y_(n,e,t){return e&&Ese(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function ms(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function DO(n,e){if(e&&(jy(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ms(n)}function NC(n){return NC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},NC(n)}function OB(n,e){return OB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},OB(n,e)}function RO(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&OB(n,e)}var O5,$k;function Bse(){if($k)return O5;$k=1;var n=function(e,t,r,i,s,a,o,d){if(!e){var g;if(t===void 0)g=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var b=[r,i,s,a,o,d],E=0;g=new Error(t.replace(/%s/g,function(){return b[E++]})),g.name="Invariant Violation"}throw g.framesToPop=1,g}};return O5=n,O5}var Ose=Bse();const Gg=el(Ose);function Ise(n){if(Array.isArray(n))return BB(n)}function kse(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Tse(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pse(n){return Ise(n)||kse(n)||KN(n)||Tse()}var Kse=function(){function n(){g_(this,n),Ua(this,"refs",{})}return y_(n,[{key:"add",value:function(t,r){this.refs[t]||(this.refs[t]=[]),this.refs[t].push(r)}},{key:"remove",value:function(t,r){var i=this.getIndex(t,r);i!==-1&&this.refs[t].splice(i,1)}},{key:"isActive",value:function(){return this.active}},{key:"getActive",value:function(){var t=this;return this.refs[this.active.collection].find(function(r){var i=r.node;return i.sortableInfo.index==t.active.index})}},{key:"getIndex",value:function(t,r){return this.refs[t].indexOf(r)}},{key:"getOrderedRefs",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.active.collection;return this.refs[t].sort(Dse)}}]),n}();function Dse(n,e){var t=n.node.sortableInfo.index,r=e.node.sortableInfo.index;return t-r}function FN(n,e){return Object.keys(n).reduce(function(t,r){return e.indexOf(r)===-1&&(t[r]=n[r]),t},{})}var O1={end:["touchend","touchcancel","mouseup"],move:["touchmove","mousemove"],start:["touchstart","mousedown"]},LN=function(){if(typeof window>"u"||typeof document>"u")return"";var n=window.getComputedStyle(document.documentElement,"")||["-moz-hidden-iframe"],e=(Array.prototype.slice.call(n).join("").match(/-(moz|webkit|ms)-/)||n.OLink===""&&["","o"])[1];switch(e){case"ms":return"ms";default:return e&&e.length?e[0].toUpperCase()+e.substr(1):""}}();function Eb(n,e){Object.keys(e).forEach(function(t){n.style[t]=e[t]})}function Bb(n,e){n.style["".concat(LN,"Transform")]=e==null?"":"translate3d(".concat(e.x,"px,").concat(e.y,"px,0)")}function I5(n,e){n.style["".concat(LN,"TransitionDuration")]=e==null?"":"".concat(e,"ms")}function $v(n,e){for(;n;){if(e(n))return n;n=n.parentNode}return null}function Vk(n,e,t){return Math.max(n,Math.min(t,e))}function cy(n){return n.substr(-2)==="px"?parseFloat(n):0}function Rse(n){var e=window.getComputedStyle(n);return{bottom:cy(e.marginBottom),left:cy(e.marginLeft),right:cy(e.marginRight),top:cy(e.marginTop)}}function FO(n,e){var t=e.displayName||e.name;return t?"".concat(n,"(").concat(t,")"):n}function k5(n,e){var t=n.getBoundingClientRect();return{top:t.top+e.top,left:t.left+e.left}}function kv(n){return n.touches&&n.touches.length?{x:n.touches[0].pageX,y:n.touches[0].pageY}:n.changedTouches&&n.changedTouches.length?{x:n.changedTouches[0].pageX,y:n.changedTouches[0].pageY}:{x:n.pageX,y:n.pageY}}function Fse(n){return n.touches&&n.touches.length||n.changedTouches&&n.changedTouches.length}function Hb(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{left:0,top:0};if(n){var r={left:t.left+n.offsetLeft,top:t.top+n.offsetTop};return n.parentNode===e?r:Hb(n.parentNode,e,r)}}function Lse(n,e,t){return n<t&&n>e?n-1:n>t&&n<e?n+1:n}function Hk(n){var e=n.lockOffset,t=n.width,r=n.height,i=e,s=e,a="px";if(typeof e=="string"){var o=/^[+-]?\d*(?:\.\d*)?(px|%)$/.exec(e);Gg(o!==null,'lockOffset value should be a number or a string of a number followed by "px" or "%". Given %s',e),i=parseFloat(e),s=parseFloat(e),a=o[1]}return Gg(isFinite(i)&&isFinite(s),"lockOffset value should be a finite. Given %s",e),a==="%"&&(i=i*t/100,s=s*r/100),{x:i,y:s}}function Use(n){var e=n.height,t=n.width,r=n.lockOffset,i=Array.isArray(r)?r:[r,r];Gg(i.length===2,"lockOffset prop of SortableContainer should be a single value or an array of exactly two values. Given %s",r);var s=DN(i,2),a=s[0],o=s[1];return[Hk({height:e,lockOffset:a,width:t}),Hk({height:e,lockOffset:o,width:t})]}function zse(n){var e=window.getComputedStyle(n),t=/(auto|scroll)/,r=["overflow","overflowX","overflowY"];return r.find(function(i){return t.test(e[i])})}function UN(n){return n instanceof HTMLElement?zse(n)?n:UN(n.parentNode):null}function jse(n){var e=window.getComputedStyle(n);return e.display==="grid"?{x:cy(e.gridColumnGap),y:cy(e.gridRowGap)}:{x:0,y:0}}var fg={TAB:9,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40},bg={Anchor:"A",Button:"BUTTON",Canvas:"CANVAS",Input:"INPUT",Option:"OPTION",Textarea:"TEXTAREA",Select:"SELECT"};function Nse(n){var e="input, textarea, select, canvas, [contenteditable]",t=n.querySelectorAll(e),r=n.cloneNode(!0),i=Pse(r.querySelectorAll(e));return i.forEach(function(s,a){if(s.type!=="file"&&(s.value=t[a].value),s.type==="radio"&&s.name&&(s.name="__sortableClone__".concat(s.name)),s.tagName===bg.Canvas&&t[a].width>0&&t[a].height>0){var o=s.getContext("2d");o.drawImage(t[a],0,0)}}),r}function Wse(n){var e,t,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{withRef:!1};return t=e=function(i){RO(s,i);function s(){var a,o;g_(this,s);for(var d=arguments.length,g=new Array(d),b=0;b<d;b++)g[b]=arguments[b];return o=DO(this,(a=NC(s)).call.apply(a,[this].concat(g))),Ua(ms(ms(o)),"wrappedInstance",li.createRef()),o}return y_(s,[{key:"componentDidMount",value:function(){var o=Ix.findDOMNode(this);o.sortableHandle=!0}},{key:"getWrappedInstance",value:function(){return Gg(r.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableHandle() call"),this.wrappedInstance.current}},{key:"render",value:function(){var o=r.withRef?this.wrappedInstance:null;return li.createElement(n,jC({ref:o},this.props))}}]),s}(li.Component),Ua(e,"displayName",FO("sortableHandle",n)),t}function Zk(n){return n.sortableHandle!=null}var Gse=function(){function n(e,t){g_(this,n),this.container=e,this.onScrollCallback=t}return y_(n,[{key:"clear",value:function(){this.interval!=null&&(clearInterval(this.interval),this.interval=null)}},{key:"update",value:function(t){var r=this,i=t.translate,s=t.minTranslate,a=t.maxTranslate,o=t.width,d=t.height,g={x:0,y:0},b={x:1,y:1},E={x:10,y:10},S=this.container,I=S.scrollTop,P=S.scrollLeft,z=S.scrollHeight,j=S.scrollWidth,q=S.clientHeight,Y=S.clientWidth,ie=I===0,te=z-I-q===0,V=P===0,ne=j-P-Y===0;i.y>=a.y-d/2&&!te?(g.y=1,b.y=E.y*Math.abs((a.y-d/2-i.y)/d)):i.x>=a.x-o/2&&!ne?(g.x=1,b.x=E.x*Math.abs((a.x-o/2-i.x)/o)):i.y<=s.y+d/2&&!ie?(g.y=-1,b.y=E.y*Math.abs((i.y-d/2-s.y)/d)):i.x<=s.x+o/2&&!V&&(g.x=-1,b.x=E.x*Math.abs((i.x-o/2-s.x)/o)),this.interval&&(this.clear(),this.isAutoScrolling=!1),(g.x!==0||g.y!==0)&&(this.interval=setInterval(function(){r.isAutoScrolling=!0;var G={left:b.x*g.x,top:b.y*g.y};r.container.scrollTop+=G.top,r.container.scrollLeft+=G.left,r.onScrollCallback(G)},5))}}]),n}();function Qse(n){var e=n.node;return{height:e.offsetHeight,width:e.offsetWidth}}function qse(n){var e=[bg.Input,bg.Textarea,bg.Select,bg.Option,bg.Button];return!!(e.indexOf(n.target.tagName)!==-1||$v(n.target,function(t){return t.contentEditable==="true"}))}var zN={axis:hi.oneOf(["x","y","xy"]),contentWindow:hi.any,disableAutoscroll:hi.bool,distance:hi.number,getContainer:hi.func,getHelperDimensions:hi.func,helperClass:hi.string,helperContainer:hi.oneOfType([hi.func,typeof HTMLElement>"u"?hi.any:hi.instanceOf(HTMLElement)]),hideSortableGhost:hi.bool,keyboardSortingTransitionDuration:hi.number,lockAxis:hi.string,lockOffset:hi.oneOfType([hi.number,hi.string,hi.arrayOf(hi.oneOfType([hi.number,hi.string]))]),lockToContainerEdges:hi.bool,onSortEnd:hi.func,onSortMove:hi.func,onSortOver:hi.func,onSortStart:hi.func,pressDelay:hi.number,pressThreshold:hi.number,keyCodes:hi.shape({lift:hi.arrayOf(hi.number),drop:hi.arrayOf(hi.number),cancel:hi.arrayOf(hi.number),up:hi.arrayOf(hi.number),down:hi.arrayOf(hi.number)}),shouldCancelStart:hi.func,transitionDuration:hi.number,updateBeforeSortStart:hi.func,useDragHandle:hi.bool,useWindowAsScrollContainer:hi.bool},jN={lift:[fg.SPACE],drop:[fg.SPACE],cancel:[fg.ESC],up:[fg.UP,fg.LEFT],down:[fg.DOWN,fg.RIGHT]},Yse={axis:"y",disableAutoscroll:!1,distance:0,getHelperDimensions:Qse,hideSortableGhost:!0,lockOffset:"50%",lockToContainerEdges:!1,pressDelay:0,pressThreshold:5,keyCodes:jN,shouldCancelStart:qse,transitionDuration:300,useWindowAsScrollContainer:!1},$se=Object.keys(zN);function Vse(n){Gg(!(n.distance&&n.pressDelay),"Attempted to set both `pressDelay` and `distance` on SortableContainer, you may only use one or the other, not both at the same time.")}function Hse(n,e){try{var t=n()}catch(r){return e(!0,r)}return t&&t.then?t.then(e.bind(null,!1),e.bind(null,!0)):e(!1,value)}var NN=li.createContext({manager:{}});function Zse(n){var e,t,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{withRef:!1};return t=e=function(i){RO(s,i);function s(a){var o;g_(this,s),o=DO(this,NC(s).call(this,a)),Ua(ms(ms(o)),"state",{}),Ua(ms(ms(o)),"handleStart",function(g){var b=o.props,E=b.distance,S=b.shouldCancelStart;if(!(g.button===2||S(g))){o.touched=!0,o.position=kv(g);var I=$v(g.target,function(ie){return ie.sortableInfo!=null});if(I&&I.sortableInfo&&o.nodeIsChild(I)&&!o.state.sorting){var P=o.props.useDragHandle,z=I.sortableInfo,j=z.index,q=z.collection,Y=z.disabled;if(Y||P&&!$v(g.target,Zk))return;o.manager.active={collection:q,index:j},!Fse(g)&&g.target.tagName===bg.Anchor&&g.preventDefault(),E||(o.props.pressDelay===0?o.handlePress(g):o.pressTimer=setTimeout(function(){return o.handlePress(g)},o.props.pressDelay))}}}),Ua(ms(ms(o)),"nodeIsChild",function(g){return g.sortableInfo.manager===o.manager}),Ua(ms(ms(o)),"handleMove",function(g){var b=o.props,E=b.distance,S=b.pressThreshold;if(!o.state.sorting&&o.touched&&!o._awaitingUpdateBeforeSortStart){var I=kv(g),P={x:o.position.x-I.x,y:o.position.y-I.y},z=Math.abs(P.x)+Math.abs(P.y);o.delta=P,!E&&(!S||z>=S)?(clearTimeout(o.cancelTimer),o.cancelTimer=setTimeout(o.cancel,0)):E&&z>=E&&o.manager.isActive()&&o.handlePress(g)}}),Ua(ms(ms(o)),"handleEnd",function(){o.touched=!1,o.cancel()}),Ua(ms(ms(o)),"cancel",function(){var g=o.props.distance,b=o.state.sorting;b||(g||clearTimeout(o.pressTimer),o.manager.active=null)}),Ua(ms(ms(o)),"handlePress",function(g){try{var b=o.manager.getActive(),E=function(){if(b){var S=function(){var pe=V.sortableInfo.index,Ee=Rse(V),me=jse(o.container),Se=o.scrollContainer.getBoundingClientRect(),De=z({index:pe,node:V,collection:ne});if(o.node=V,o.margin=Ee,o.gridGap=me,o.width=De.width,o.height=De.height,o.marginOffset={x:o.margin.left+o.margin.right+o.gridGap.x,y:Math.max(o.margin.top,o.margin.bottom,o.gridGap.y)},o.boundingClientRect=V.getBoundingClientRect(),o.containerBoundingRect=Se,o.index=pe,o.newIndex=pe,o.axis={x:P.indexOf("x")>=0,y:P.indexOf("y")>=0},o.offsetEdge=Hb(V,o.container),G?o.initialOffset=kv(B5({},g,{pageX:o.boundingClientRect.left,pageY:o.boundingClientRect.top})):o.initialOffset=kv(g),o.initialScroll={left:o.scrollContainer.scrollLeft,top:o.scrollContainer.scrollTop},o.initialWindowScroll={left:window.pageXOffset,top:window.pageYOffset},o.helper=o.helperContainer.appendChild(Nse(V)),Eb(o.helper,{boxSizing:"border-box",height:"".concat(o.height,"px"),left:"".concat(o.boundingClientRect.left-Ee.left,"px"),pointerEvents:"none",position:"fixed",top:"".concat(o.boundingClientRect.top-Ee.top,"px"),width:"".concat(o.width,"px")}),G&&o.helper.focus(),q&&(o.sortableGhost=V,Eb(V,{opacity:0,visibility:"hidden"})),o.minTranslate={},o.maxTranslate={},G){var be=te?{top:0,left:0,width:o.contentWindow.innerWidth,height:o.contentWindow.innerHeight}:o.containerBoundingRect,at=be.top,Ze=be.left,Je=be.width,We=be.height,Me=at+We,Fe=Ze+Je;o.axis.x&&(o.minTranslate.x=Ze-o.boundingClientRect.left,o.maxTranslate.x=Fe-(o.boundingClientRect.left+o.width)),o.axis.y&&(o.minTranslate.y=at-o.boundingClientRect.top,o.maxTranslate.y=Me-(o.boundingClientRect.top+o.height))}else o.axis.x&&(o.minTranslate.x=(te?0:Se.left)-o.boundingClientRect.left-o.width/2,o.maxTranslate.x=(te?o.contentWindow.innerWidth:Se.left+Se.width)-o.boundingClientRect.left-o.width/2),o.axis.y&&(o.minTranslate.y=(te?0:Se.top)-o.boundingClientRect.top-o.height/2,o.maxTranslate.y=(te?o.contentWindow.innerHeight:Se.top+Se.height)-o.boundingClientRect.top-o.height/2);j&&j.split(" ").forEach(function(He){return o.helper.classList.add(He)}),o.listenerNode=g.touches?g.target:o.contentWindow,G?(o.listenerNode.addEventListener("wheel",o.handleKeyEnd,!0),o.listenerNode.addEventListener("mousedown",o.handleKeyEnd,!0),o.listenerNode.addEventListener("keydown",o.handleKeyDown)):(O1.move.forEach(function(He){return o.listenerNode.addEventListener(He,o.handleSortMove,!1)}),O1.end.forEach(function(He){return o.listenerNode.addEventListener(He,o.handleSortEnd,!1)})),o.setState({sorting:!0,sortingIndex:pe}),ie&&ie({node:V,index:pe,collection:ne,isKeySorting:G,nodes:o.manager.getOrderedRefs(),helper:o.helper},g),G&&o.keyMove(0)},I=o.props,P=I.axis,z=I.getHelperDimensions,j=I.helperClass,q=I.hideSortableGhost,Y=I.updateBeforeSortStart,ie=I.onSortStart,te=I.useWindowAsScrollContainer,V=b.node,ne=b.collection,G=o.manager.isKeySorting,oe=function(){if(typeof Y=="function"){o._awaitingUpdateBeforeSortStart=!0;var he=Hse(function(){var pe=V.sortableInfo.index;return Promise.resolve(Y({collection:ne,index:pe,node:V,isKeySorting:G},g)).then(function(){})},function(pe,Ee){if(o._awaitingUpdateBeforeSortStart=!1,pe)throw Ee;return Ee});if(he&&he.then)return he.then(function(){})}}();return oe&&oe.then?oe.then(S):S(oe)}}();return Promise.resolve(E&&E.then?E.then(function(){}):void 0)}catch(S){return Promise.reject(S)}}),Ua(ms(ms(o)),"handleSortMove",function(g){var b=o.props.onSortMove;typeof g.preventDefault=="function"&&g.cancelable&&g.preventDefault(),o.updateHelperPosition(g),o.animateNodes(),o.autoscroll(),b&&b(g)}),Ua(ms(ms(o)),"handleSortEnd",function(g){var b=o.props,E=b.hideSortableGhost,S=b.onSortEnd,I=o.manager,P=I.active.collection,z=I.isKeySorting,j=o.manager.getOrderedRefs();o.listenerNode&&(z?(o.listenerNode.removeEventListener("wheel",o.handleKeyEnd,!0),o.listenerNode.removeEventListener("mousedown",o.handleKeyEnd,!0),o.listenerNode.removeEventListener("keydown",o.handleKeyDown)):(O1.move.forEach(function(V){return o.listenerNode.removeEventListener(V,o.handleSortMove)}),O1.end.forEach(function(V){return o.listenerNode.removeEventListener(V,o.handleSortEnd)}))),o.helper.parentNode.removeChild(o.helper),E&&o.sortableGhost&&Eb(o.sortableGhost,{opacity:"",visibility:""});for(var q=0,Y=j.length;q<Y;q++){var ie=j[q],te=ie.node;ie.edgeOffset=null,ie.boundingClientRect=null,Bb(te,null),I5(te,null),ie.translate=null}o.autoScroller.clear(),o.manager.active=null,o.manager.isKeySorting=!1,o.setState({sorting:!1,sortingIndex:null}),typeof S=="function"&&S({collection:P,newIndex:o.newIndex,oldIndex:o.index,isKeySorting:z,nodes:j},g),o.touched=!1}),Ua(ms(ms(o)),"autoscroll",function(){var g=o.props.disableAutoscroll,b=o.manager.isKeySorting;if(g){o.autoScroller.clear();return}if(b){var E=B5({},o.translate),S=0,I=0;o.axis.x&&(E.x=Math.min(o.maxTranslate.x,Math.max(o.minTranslate.x,o.translate.x)),S=o.translate.x-E.x),o.axis.y&&(E.y=Math.min(o.maxTranslate.y,Math.max(o.minTranslate.y,o.translate.y)),I=o.translate.y-E.y),o.translate=E,Bb(o.helper,o.translate),o.scrollContainer.scrollLeft+=S,o.scrollContainer.scrollTop+=I;return}o.autoScroller.update({height:o.height,maxTranslate:o.maxTranslate,minTranslate:o.minTranslate,translate:o.translate,width:o.width})}),Ua(ms(ms(o)),"onAutoScroll",function(g){o.translate.x+=g.left,o.translate.y+=g.top,o.animateNodes()}),Ua(ms(ms(o)),"handleKeyDown",function(g){var b=g.keyCode,E=o.props,S=E.shouldCancelStart,I=E.keyCodes,P=I===void 0?{}:I,z=B5({},jN,P);o.manager.active&&!o.manager.isKeySorting||!o.manager.active&&(!z.lift.includes(b)||S(g)||!o.isValidSortingTarget(g))||(g.stopPropagation(),g.preventDefault(),z.lift.includes(b)&&!o.manager.active?o.keyLift(g):z.drop.includes(b)&&o.manager.active?o.keyDrop(g):z.cancel.includes(b)?(o.newIndex=o.manager.active.index,o.keyDrop(g)):z.up.includes(b)?o.keyMove(-1):z.down.includes(b)&&o.keyMove(1))}),Ua(ms(ms(o)),"keyLift",function(g){var b=g.target,E=$v(b,function(z){return z.sortableInfo!=null}),S=E.sortableInfo,I=S.index,P=S.collection;o.initialFocusedNode=b,o.manager.isKeySorting=!0,o.manager.active={index:I,collection:P},o.handlePress(g)}),Ua(ms(ms(o)),"keyMove",function(g){var b=o.manager.getOrderedRefs(),E=b[b.length-1].node.sortableInfo.index,S=o.newIndex+g,I=o.newIndex;if(!(S<0||S>E)){o.prevIndex=I,o.newIndex=S;var P=Lse(o.newIndex,o.prevIndex,o.index),z=b.find(function(G){var oe=G.node;return oe.sortableInfo.index===P}),j=z.node,q=o.containerScrollDelta,Y=z.boundingClientRect||k5(j,q),ie=z.translate||{x:0,y:0},te={top:Y.top+ie.y-q.top,left:Y.left+ie.x-q.left},V=I<S,ne={x:V&&o.axis.x?j.offsetWidth-o.width:0,y:V&&o.axis.y?j.offsetHeight-o.height:0};o.handleSortMove({pageX:te.left+ne.x,pageY:te.top+ne.y,ignoreTransition:g===0})}}),Ua(ms(ms(o)),"keyDrop",function(g){o.handleSortEnd(g),o.initialFocusedNode&&o.initialFocusedNode.focus()}),Ua(ms(ms(o)),"handleKeyEnd",function(g){o.manager.active&&o.keyDrop(g)}),Ua(ms(ms(o)),"isValidSortingTarget",function(g){var b=o.props.useDragHandle,E=g.target,S=$v(E,function(I){return I.sortableInfo!=null});return S&&S.sortableInfo&&!S.sortableInfo.disabled&&(b?Zk(E):E.sortableInfo)});var d=new Kse;return Vse(a),o.manager=d,o.wrappedInstance=li.createRef(),o.sortableContextValue={manager:d},o.events={end:o.handleEnd,move:o.handleMove,start:o.handleStart},o}return y_(s,[{key:"componentDidMount",value:function(){var o=this,d=this.props.useWindowAsScrollContainer,g=this.getContainer();Promise.resolve(g).then(function(b){o.container=b,o.document=o.container.ownerDocument||document;var E=o.props.contentWindow||o.document.defaultView||window;o.contentWindow=typeof E=="function"?E():E,o.scrollContainer=d?o.document.scrollingElement||o.document.documentElement:UN(o.container)||o.container,o.autoScroller=new Gse(o.scrollContainer,o.onAutoScroll),Object.keys(o.events).forEach(function(S){return O1[S].forEach(function(I){return o.container.addEventListener(I,o.events[S],!1)})}),o.container.addEventListener("keydown",o.handleKeyDown)})}},{key:"componentWillUnmount",value:function(){var o=this;this.helper&&this.helper.parentNode&&this.helper.parentNode.removeChild(this.helper),this.container&&(Object.keys(this.events).forEach(function(d){return O1[d].forEach(function(g){return o.container.removeEventListener(g,o.events[d])})}),this.container.removeEventListener("keydown",this.handleKeyDown))}},{key:"updateHelperPosition",value:function(o){var d=this.props,g=d.lockAxis,b=d.lockOffset,E=d.lockToContainerEdges,S=d.transitionDuration,I=d.keyboardSortingTransitionDuration,P=I===void 0?S:I,z=this.manager.isKeySorting,j=o.ignoreTransition,q=kv(o),Y={x:q.x-this.initialOffset.x,y:q.y-this.initialOffset.y};if(Y.y-=window.pageYOffset-this.initialWindowScroll.top,Y.x-=window.pageXOffset-this.initialWindowScroll.left,this.translate=Y,E){var ie=Use({height:this.height,lockOffset:b,width:this.width}),te=DN(ie,2),V=te[0],ne=te[1],G={x:this.width/2-V.x,y:this.height/2-V.y},oe={x:this.width/2-ne.x,y:this.height/2-ne.y};Y.x=Vk(this.minTranslate.x+G.x,this.maxTranslate.x-oe.x,Y.x),Y.y=Vk(this.minTranslate.y+G.y,this.maxTranslate.y-oe.y,Y.y)}g==="x"?Y.y=0:g==="y"&&(Y.x=0),z&&P&&!j&&I5(this.helper,P),Bb(this.helper,Y)}},{key:"animateNodes",value:function(){var o=this.props,d=o.transitionDuration,g=o.hideSortableGhost,b=o.onSortOver,E=this.containerScrollDelta,S=this.windowScrollDelta,I=this.manager.getOrderedRefs(),P={left:this.offsetEdge.left+this.translate.x+E.left,top:this.offsetEdge.top+this.translate.y+E.top},z=this.manager.isKeySorting,j=this.newIndex;this.newIndex=null;for(var q=0,Y=I.length;q<Y;q++){var ie=I[q].node,te=ie.sortableInfo.index,V=ie.offsetWidth,ne=ie.offsetHeight,G={height:this.height>ne?ne/2:this.height/2,width:this.width>V?V/2:this.width/2},oe=z&&te>this.index&&te<=j,he=z&&te<this.index&&te>=j,pe={x:0,y:0},Ee=I[q].edgeOffset;Ee||(Ee=Hb(ie,this.container),I[q].edgeOffset=Ee,z&&(I[q].boundingClientRect=k5(ie,E)));var me=q<I.length-1&&I[q+1],Se=q>0&&I[q-1];if(me&&!me.edgeOffset&&(me.edgeOffset=Hb(me.node,this.container),z&&(me.boundingClientRect=k5(me.node,E))),te===this.index){g&&(this.sortableGhost=ie,Eb(ie,{opacity:0,visibility:"hidden"}));continue}d&&I5(ie,d),this.axis.x?this.axis.y?he||te<this.index&&(P.left+S.left-G.width<=Ee.left&&P.top+S.top<=Ee.top+G.height||P.top+S.top+G.height<=Ee.top)?(pe.x=this.width+this.marginOffset.x,Ee.left+pe.x>this.containerBoundingRect.width-G.width&&me&&(pe.x=me.edgeOffset.left-Ee.left,pe.y=me.edgeOffset.top-Ee.top),this.newIndex===null&&(this.newIndex=te)):(oe||te>this.index&&(P.left+S.left+G.width>=Ee.left&&P.top+S.top+G.height>=Ee.top||P.top+S.top+G.height>=Ee.top+ne))&&(pe.x=-(this.width+this.marginOffset.x),Ee.left+pe.x<this.containerBoundingRect.left+G.width&&Se&&(pe.x=Se.edgeOffset.left-Ee.left,pe.y=Se.edgeOffset.top-Ee.top),this.newIndex=te):oe||te>this.index&&P.left+S.left+G.width>=Ee.left?(pe.x=-(this.width+this.marginOffset.x),this.newIndex=te):(he||te<this.index&&P.left+S.left<=Ee.left+G.width)&&(pe.x=this.width+this.marginOffset.x,this.newIndex==null&&(this.newIndex=te)):this.axis.y&&(oe||te>this.index&&P.top+S.top+G.height>=Ee.top?(pe.y=-(this.height+this.marginOffset.y),this.newIndex=te):(he||te<this.index&&P.top+S.top<=Ee.top+G.height)&&(pe.y=this.height+this.marginOffset.y,this.newIndex==null&&(this.newIndex=te))),Bb(ie,pe),I[q].translate=pe}this.newIndex==null&&(this.newIndex=this.index),z&&(this.newIndex=j);var De=z?this.prevIndex:j;b&&this.newIndex!==De&&b({collection:this.manager.active.collection,index:this.index,newIndex:this.newIndex,oldIndex:De,isKeySorting:z,nodes:I,helper:this.helper})}},{key:"getWrappedInstance",value:function(){return Gg(r.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableContainer() call"),this.wrappedInstance.current}},{key:"getContainer",value:function(){var o=this.props.getContainer;return typeof o!="function"?Ix.findDOMNode(this):o(r.withRef?this.getWrappedInstance():void 0)}},{key:"render",value:function(){var o=r.withRef?this.wrappedInstance:null;return li.createElement(NN.Provider,{value:this.sortableContextValue},li.createElement(n,jC({ref:o},FN(this.props,$se))))}},{key:"helperContainer",get:function(){var o=this.props.helperContainer;return typeof o=="function"?o():this.props.helperContainer||this.document.body}},{key:"containerScrollDelta",get:function(){var o=this.props.useWindowAsScrollContainer;return o?{left:0,top:0}:{left:this.scrollContainer.scrollLeft-this.initialScroll.left,top:this.scrollContainer.scrollTop-this.initialScroll.top}}},{key:"windowScrollDelta",get:function(){return{left:this.contentWindow.pageXOffset-this.initialWindowScroll.left,top:this.contentWindow.pageYOffset-this.initialWindowScroll.top}}}]),s}(li.Component),Ua(e,"displayName",FO("sortableList",n)),Ua(e,"defaultProps",Yse),Ua(e,"propTypes",zN),t}var WN={index:hi.number.isRequired,collection:hi.oneOfType([hi.number,hi.string]),disabled:hi.bool},Xse=Object.keys(WN);function Jse(n){var e,t,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{withRef:!1};return t=e=function(i){RO(s,i);function s(){var a,o;g_(this,s);for(var d=arguments.length,g=new Array(d),b=0;b<d;b++)g[b]=arguments[b];return o=DO(this,(a=NC(s)).call.apply(a,[this].concat(g))),Ua(ms(ms(o)),"wrappedInstance",li.createRef()),o}return y_(s,[{key:"componentDidMount",value:function(){this.register()}},{key:"componentDidUpdate",value:function(o){this.node&&(o.index!==this.props.index&&(this.node.sortableInfo.index=this.props.index),o.disabled!==this.props.disabled&&(this.node.sortableInfo.disabled=this.props.disabled)),o.collection!==this.props.collection&&(this.unregister(o.collection),this.register())}},{key:"componentWillUnmount",value:function(){this.unregister()}},{key:"register",value:function(){var o=this.props,d=o.collection,g=o.disabled,b=o.index,E=Ix.findDOMNode(this);E.sortableInfo={collection:d,disabled:g,index:b,manager:this.context.manager},this.node=E,this.ref={node:E},this.context.manager.add(d,this.ref)}},{key:"unregister",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props.collection;this.context.manager.remove(o,this.ref)}},{key:"getWrappedInstance",value:function(){return Gg(r.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableElement() call"),this.wrappedInstance.current}},{key:"render",value:function(){var o=r.withRef?this.wrappedInstance:null;return li.createElement(n,jC({ref:o},FN(this.props,Xse)))}}]),s}(li.Component),Ua(e,"displayName",FO("sortableElement",n)),Ua(e,"contextType",NN),Ua(e,"propTypes",WN),Ua(e,"defaultProps",{collection:0}),t}function ro(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerListItem.tsx",e="c4894131c5d7f6ef28da960f43f4c830425a38cb",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/LayerListItem.tsx",statementMap:{0:{start:{line:8,column:23},end:{line:19,column:2}},1:{start:{line:9,column:2},end:{line:18,column:7}},2:{start:{line:22,column:4},end:{line:31,column:5}},3:{start:{line:24,column:8},end:{line:24,column:54}},4:{start:{line:26,column:8},end:{line:26,column:53}},5:{start:{line:28,column:8},end:{line:28,column:56}},6:{start:{line:30,column:8},end:{line:30,column:49}},7:{start:{line:34,column:51},end:{line:34,column:61}},8:{start:{line:35,column:25},end:{line:35,column:27}},9:{start:{line:36,column:4},end:{line:41,column:5}},10:{start:{line:37,column:6},end:{line:37,column:76}},11:{start:{line:38,column:6},end:{line:40,column:7}},12:{start:{line:39,column:8},end:{line:39,column:103}},13:{start:{line:42,column:4},end:{line:53,column:6}},14:{start:{line:57,column:24},end:{line:66,column:3}},15:{start:{line:67,column:29},end:{line:69,column:3}},16:{start:{line:71,column:4},end:{line:73,column:6}},17:{start:{line:76,column:29},end:{line:76,column:82}},18:{start:{line:77,column:4},end:{line:122,column:6}},19:{start:{line:81,column:25},end:{line:81,column:72}},20:{start:{line:97,column:31},end:{line:97,column:79}},21:{start:{line:106,column:31},end:{line:106,column:76}},22:{start:{line:116,column:31},end:{line:116,column:88}},23:{start:{line:125,column:30},end:{line:125,column:106}},24:{start:{line:125,column:73},end:{line:125,column:105}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:38},end:{line:8,column:39}},loc:{start:{line:8,column:49},end:{line:19,column:1}},line:8},1:{name:"(anonymous_1)",decl:{start:{line:21,column:2},end:{line:21,column:3}},loc:{start:{line:21,column:15},end:{line:32,column:3}},line:21},2:{name:"(anonymous_2)",decl:{start:{line:33,column:2},end:{line:33,column:3}},loc:{start:{line:33,column:11},end:{line:54,column:3}},line:33},3:{name:"(anonymous_3)",decl:{start:{line:60,column:17},end:{line:60,column:18}},loc:{start:{line:60,column:23},end:{line:61,column:5}},line:60},4:{name:"(anonymous_4)",decl:{start:{line:62,column:20},end:{line:62,column:21}},loc:{start:{line:62,column:26},end:{line:63,column:5}},line:62},5:{name:"(anonymous_5)",decl:{start:{line:64,column:29},end:{line:64,column:30}},loc:{start:{line:64,column:35},end:{line:65,column:5}},line:64},6:{name:"(anonymous_6)",decl:{start:{line:70,column:2},end:{line:70,column:3}},loc:{start:{line:70,column:20},end:{line:74,column:3}},line:70},7:{name:"(anonymous_7)",decl:{start:{line:75,column:2},end:{line:75,column:3}},loc:{start:{line:75,column:11},end:{line:123,column:3}},line:75},8:{name:"(anonymous_8)",decl:{start:{line:81,column:17},end:{line:81,column:18}},loc:{start:{line:81,column:25},end:{line:81,column:72}},line:81},9:{name:"(anonymous_9)",decl:{start:{line:97,column:23},end:{line:97,column:24}},loc:{start:{line:97,column:31},end:{line:97,column:79}},line:97},10:{name:"(anonymous_10)",decl:{start:{line:106,column:23},end:{line:106,column:24}},loc:{start:{line:106,column:31},end:{line:106,column:76}},line:106},11:{name:"(anonymous_11)",decl:{start:{line:116,column:23},end:{line:116,column:24}},loc:{start:{line:116,column:31},end:{line:116,column:88}},line:116},12:{name:"(anonymous_12)",decl:{start:{line:125,column:46},end:{line:125,column:47}},loc:{start:{line:125,column:73},end:{line:125,column:105}},line:125}},branchMap:{0:{loc:{start:{line:22,column:4},end:{line:31,column:5}},type:"switch",locations:[{start:{line:23,column:6},end:{line:24,column:54}},{start:{line:25,column:6},end:{line:26,column:53}},{start:{line:27,column:6},end:{line:28,column:56}},{start:{line:29,column:6},end:{line:30,column:49}}],line:22},1:{loc:{start:{line:36,column:4},end:{line:41,column:5}},type:"if",locations:[{start:{line:36,column:4},end:{line:41,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:36},2:{loc:{start:{line:38,column:6},end:{line:40,column:7}},type:"if",locations:[{start:{line:38,column:6},end:{line:40,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:38},3:{loc:{start:{line:76,column:29},end:{line:76,column:82}},type:"cond-expr",locations:[{start:{line:76,column:67},end:{line:76,column:73}},{start:{line:76,column:76},end:{line:76,column:82}}],line:76}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0},b:{0:[0,0,0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerListItem.tsx"],names:[],mappings:"AAgBS,SACL,KADK;AAhBT,OAAO,WAAW;AAClB,OAAO,eAAe;AACtB,OAAO,gBAAgB;AAEvB,SAAQ,eAAe,cAAc,iBAAiB,gBAAe;AAErE,OAAO,eAAe;AACtB,SAAQ,iBAAiB,sBAAqB;AAQ9C,MAAM,iBAAiB,eAAe,CAAC,UAA+B;AACpE,SAAO,qBAAC,SAAI,WAAU,mCACpB;AAAA;AAAA,MAAC;AAAA;AAAA,QACC,WAAU;AAAA,QACV,MAAM,MAAM;AAAA;AAAA,IACd;AAAA,IACA,oBAAC,YAAO,WAAU,+BACf,gBAAM,SACT;AAAA,KACF;AACF,CAAC;AAUD,MAAM,mBAAmB,MAAM,UAA2B;AAAA,EACxD,aAAa;AACX,YAAO,KAAK,MAAM,QAAQ;AAAA,MAC1B,KAAK;AAAa,eAAO,oBAAC,iBAAc;AAAA,MACxC,KAAK;AAAQ,eAAO,oBAAC,gBAAa;AAAA,MAClC,KAAK;AAAQ,eAAO,oBAAC,mBAAgB;AAAA,MACrC,KAAK;AAAU,eAAO,oBAAC,YAAS;AAAA,IAChC;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,gBAAgB,mBAAkB,IAAI,KAAK;AAElD,QAAI,iBAAiB;AACrB,QAAI,gBAAgB;AAClB,uBAAiB,oCAAoC,cAAc;AAEnE,UAAI,oBAAoB;AACtB,0BAAkB,qCAAqC,cAAc,KAAK,kBAAkB;AAAA,MAC9F;AAAA,IACF;AAEA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,UAAU;AAAA,QACV,OAAO,KAAK,MAAM;AAAA,QAClB,WAAW,mCAAmC,cAAc;AAAA,QAC5D,eAAa,KAAK,MAAM;AAAA,QACxB,SAAS,KAAK,MAAM;AAAA,QACpB,eAAY;AAAA,QAEX,eAAK,WAAW;AAAA;AAAA,IACnB;AAAA,EACF;AACF;AAgBA,MAAM,sBAAsB,MAAM,UAA8B;AAAA,EAC9D,OAAO,eAAe;AAAA,IACpB,YAAY;AAAA,IACZ,YAAY;AAAA,IACZ,aAAa,MAAM;AAAA,IAAC;AAAA,IACpB,gBAAgB,MAAM;AAAA,IAAC;AAAA,IACvB,yBAAyB,MAAM;AAAA,IAAC;AAAA,EAClC;AAAA,EAEA,OAAO,oBAAoB;AAAA,IACzB,eAAe,UAAU;AAAA,EAC3B;AAAA,EAEA,kBAAkB;AAChB,WAAO;AAAA,MACL,eAAe,EAAE,MAAM,GAAG;AAAA,IAC5B;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,mBAAmB,KAAK,MAAM,eAAe,YAAY,SAAS;AAExE,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,IAAI,KAAK,MAAM;AAAA,QAEf,SAAS,QAAM,KAAK,MAAM,cAAc,KAAK,MAAM,UAAU;AAAA,QAC7D,eAAa,qBAAmB,KAAK,MAAM;AAAA,QAC3C,WAAW,WAAW;AAAA,UACpB,4BAA4B;AAAA,UAC5B,qCAAqC,KAAK,MAAM;AAAA,UAChD,CAAC,KAAK,MAAM,SAAU,GAAG;AAAA,QAC3B,CAAC;AAAA,QACD;AAAA,8BAAC,kBAAgB,GAAG,KAAK,OAAO;AAAA,UAChC,oBAAC,UAAK,OAAO,EAAC,UAAU,EAAC,GAAG;AAAA,UAC5B;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,qBAAmB,KAAK,MAAM,UAAQ;AAAA,cAC7C,QAAQ;AAAA,cACR,gBAAe;AAAA,cACf,SAAS,QAAM,KAAK,MAAM,eAAgB,KAAK,MAAM,UAAU;AAAA;AAAA,UACjE;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,qBAAmB,KAAK,MAAM,UAAQ;AAAA,cAC7C,QAAQ;AAAA,cACR,gBAAe;AAAA,cACf,SAAS,QAAM,KAAK,MAAM,YAAa,KAAK,MAAM,UAAU;AAAA;AAAA,UAC9D;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,qBAAmB,KAAK,MAAM,UAAQ;AAAA,cAC7C,QAAQ;AAAA,cACR,gBAAe;AAAA,cACf,oBAAoB;AAAA,cACpB,SAAS,QAAM,KAAK,MAAM,wBAAyB,KAAK,MAAM,UAAU;AAAA;AAAA,UAC1E;AAAA;AAAA;AAAA,MA5BK,KAAK,MAAM;AAAA,IA6BlB;AAAA,EACF;AACF;AAEA,MAAM,wBAAwB,gBAAoC,CAAC,UAA8B,oBAAC,iBAAe,GAAG,OAAO,CAAE;AAE7H,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"c4894131c5d7f6ef28da960f43f4c830425a38cb"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return ro=function(){return a},a}ro();const eae=(ro().s[0]++,Wse(n=>(ro().f[0]++,ro().s[1]++,ue.jsxs("div",{className:"maputnik-layer-list-item-handle",children:[ue.jsx(VU,{className:"layer-handle__icon",type:n.layerType}),ue.jsx("button",{className:"maputnik-layer-list-item-id",children:n.layerId})]}))));class T5 extends nr.Component{renderIcon(){switch(ro().f[1]++,ro().s[2]++,this.props.action){case"duplicate":return ro().b[0][0]++,ro().s[3]++,ue.jsx(FZ,{});case"show":return ro().b[0][1]++,ro().s[4]++,ue.jsx(RZ,{});case"hide":return ro().b[0][2]++,ro().s[5]++,ue.jsx(DZ,{});case"delete":return ro().b[0][3]++,ro().s[6]++,ue.jsx($y,{})}}render(){ro().f[2]++;const{classBlockName:e,classBlockModifier:t}=(ro().s[7]++,this.props);let r=(ro().s[8]++,"");return ro().s[9]++,e?(ro().b[1][0]++,ro().s[10]++,r=`maputnik-layer-list-icon-action__${e}`,ro().s[11]++,t?(ro().b[2][0]++,ro().s[12]++,r+=` maputnik-layer-list-icon-action__${e}--${t}`):ro().b[2][1]++):ro().b[1][1]++,ro().s[13]++,ue.jsx("button",{tabIndex:-1,title:this.props.action,className:`maputnik-layer-list-icon-action ${r}`,"data-wd-key":this.props.wdKey,onClick:this.props.onClick,"aria-hidden":"true",children:this.renderIcon()})}}class IB extends nr.Component{getChildContext(){return ro().f[6]++,ro().s[16]++,{reactIconBase:{size:14}}}render(){ro().f[7]++;const e=(ro().s[17]++,this.props.visibility==="visible"?(ro().b[3][0]++,"show"):(ro().b[3][1]++,"hide"));return ro().s[18]++,ue.jsxs("li",{id:this.props.id,onClick:t=>(ro().f[8]++,ro().s[19]++,this.props.onLayerSelect(this.props.layerIndex)),"data-wd-key":"layer-list-item:"+this.props.layerId,className:am({"maputnik-layer-list-item":!0,"maputnik-layer-list-item-selected":this.props.isSelected,[this.props.className]:!0}),children:[ue.jsx(eae,{...this.props}),ue.jsx("span",{style:{flexGrow:1}}),ue.jsx(T5,{wdKey:"layer-list-item:"+this.props.layerId+":delete",action:"delete",classBlockName:"delete",onClick:t=>(ro().f[9]++,ro().s[20]++,this.props.onLayerDestroy(this.props.layerIndex))}),ue.jsx(T5,{wdKey:"layer-list-item:"+this.props.layerId+":copy",action:"duplicate",classBlockName:"duplicate",onClick:t=>(ro().f[10]++,ro().s[21]++,this.props.onLayerCopy(this.props.layerIndex))}),ue.jsx(T5,{wdKey:"layer-list-item:"+this.props.layerId+":toggle-visibility",action:e,classBlockName:"visibility",classBlockModifier:e,onClick:t=>(ro().f[11]++,ro().s[22]++,this.props.onLayerVisibilityToggle(this.props.layerIndex))})]},this.props.layerId)}}Pn(IB,"defaultProps",(ro().s[14]++,{isSelected:!1,visibility:"visible",onLayerCopy:()=>{ro().f[3]++},onLayerDestroy:()=>{ro().f[4]++},onLayerVisibilityToggle:()=>{ro().f[5]++}})),Pn(IB,"childContextTypes",(ro().s[15]++,{reactIconBase:hi.object}));const tae=(ro().s[23]++,Jse(n=>(ro().f[12]++,ro().s[24]++,ue.jsx(IB,{...n}))));function H2(){var n="/home/runner/work/maputnik/maputnik/src/components/InputButton.tsx",e="522bfc6b8aacbfd03b55d947af2897dc69beb570",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputButton.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:20,column:6}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:21,column:3}},line:5}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputButton.tsx"],names:[],mappings:"AAkBW;AAlBX,OAAO,WAAW;AAClB,OAAO,gBAAgB;AAevB,qBAAqB,oBAAoB,MAAM,UAA4B;AAAA,EACzE,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,IAAI,KAAK,MAAM;AAAA,QACf,OAAO,KAAK,MAAM;AAAA,QAClB,MAAM,KAAK,MAAM;AAAA,QACjB,SAAS,KAAK,MAAM;AAAA,QACpB,UAAU,KAAK,MAAM;AAAA,QACrB,cAAY,KAAK,MAAM,YAAY;AAAA,QACnC,WAAW,WAAW,mBAAmB,KAAK,MAAM,SAAS;AAAA,QAC7D,eAAa,KAAK,MAAM,aAAa;AAAA,QACrC,OAAO,KAAK,MAAM;AAAA,QAEjB,eAAK,MAAM;AAAA;AAAA,IACd;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"522bfc6b8aacbfd03b55d947af2897dc69beb570"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return H2=function(){return a},a}H2();class Ja extends nr.Component{render(){return H2().f[0]++,H2().s[0]++,ue.jsx("button",{id:this.props.id,title:this.props.title,type:this.props.type,onClick:this.props.onClick,disabled:this.props.disabled,"aria-label":this.props["aria-label"],className:am("maputnik-button",this.props.className),"data-wd-key":this.props["data-wd-key"],style:this.props.style,children:this.props.children})}}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var GN=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Z2=GN.join(","),QN=typeof Element>"u",Qg=QN?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,X2=!QN&&Element.prototype.getRootNode?function(n){var e;return n==null||(e=n.getRootNode)===null||e===void 0?void 0:e.call(n)}:function(n){return n==null?void 0:n.ownerDocument},J2=function n(e,t){var r;t===void 0&&(t=!0);var i=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),s=i===""||i==="true",a=s||t&&e&&n(e.parentNode);return a},nae=function(e){var t,r=e==null||(t=e.getAttribute)===null||t===void 0?void 0:t.call(e,"contenteditable");return r===""||r==="true"},qN=function(e,t,r){if(J2(e))return[];var i=Array.prototype.slice.apply(e.querySelectorAll(Z2));return t&&Qg.call(e,Z2)&&i.unshift(e),i=i.filter(r),i},YN=function n(e,t,r){for(var i=[],s=Array.from(e);s.length;){var a=s.shift();if(!J2(a,!1))if(a.tagName==="SLOT"){var o=a.assignedElements(),d=o.length?o:a.children,g=n(d,!0,r);r.flatten?i.push.apply(i,g):i.push({scopeParent:a,candidates:g})}else{var b=Qg.call(a,Z2);b&&r.filter(a)&&(t||!e.includes(a))&&i.push(a);var E=a.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(a),S=!J2(E,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(a));if(E&&S){var I=n(E===!0?a.children:E.children,!0,r);r.flatten?i.push.apply(i,I):i.push({scopeParent:a,candidates:I})}else s.unshift.apply(s,a.children)}}return i},$N=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},S0=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||nae(e))&&!$N(e)?0:e.tabIndex},rae=function(e,t){var r=S0(e);return r<0&&t&&!$N(e)?0:r},iae=function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex},VN=function(e){return e.tagName==="INPUT"},oae=function(e){return VN(e)&&e.type==="hidden"},sae=function(e){var t=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return t},aae=function(e,t){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===t)return e[r]},lae=function(e){if(!e.name)return!0;var t=e.form||X2(e),r=function(o){return t.querySelectorAll('input[type="radio"][name="'+o+'"]')},i;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")i=r(window.CSS.escape(e.name));else try{i=r(e.name)}catch(a){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",a.message),!1}var s=aae(i,e.form);return!s||s===e},uae=function(e){return VN(e)&&e.type==="radio"},Aae=function(e){return uae(e)&&!lae(e)},cae=function(e){var t,r=e&&X2(e),i=(t=r)===null||t===void 0?void 0:t.host,s=!1;if(r&&r!==e){var a,o,d;for(s=!!((a=i)!==null&&a!==void 0&&(o=a.ownerDocument)!==null&&o!==void 0&&o.contains(i)||e!=null&&(d=e.ownerDocument)!==null&&d!==void 0&&d.contains(e));!s&&i;){var g,b,E;r=X2(i),i=(g=r)===null||g===void 0?void 0:g.host,s=!!((b=i)!==null&&b!==void 0&&(E=b.ownerDocument)!==null&&E!==void 0&&E.contains(i))}}return s},Xk=function(e){var t=e.getBoundingClientRect(),r=t.width,i=t.height;return r===0&&i===0},dae=function(e,t){var r=t.displayCheck,i=t.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var s=Qg.call(e,"details>summary:first-of-type"),a=s?e.parentElement:e;if(Qg.call(a,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof i=="function"){for(var o=e;e;){var d=e.parentElement,g=X2(e);if(d&&!d.shadowRoot&&i(d)===!0)return Xk(e);e.assignedSlot?e=e.assignedSlot:!d&&g!==e.ownerDocument?e=g.host:e=d}e=o}if(cae(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return Xk(e);return!1},hae=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var t=e.parentElement;t;){if(t.tagName==="FIELDSET"&&t.disabled){for(var r=0;r<t.children.length;r++){var i=t.children.item(r);if(i.tagName==="LEGEND")return Qg.call(t,"fieldset[disabled] *")?!0:!i.contains(e)}return!0}t=t.parentElement}return!1},ex=function(e,t){return!(t.disabled||J2(t)||oae(t)||dae(t,e)||sae(t)||hae(t))},kB=function(e,t){return!(Aae(t)||S0(t)<0||!ex(e,t))},fae=function(e){var t=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(t)||t>=0)},pae=function n(e){var t=[],r=[];return e.forEach(function(i,s){var a=!!i.scopeParent,o=a?i.scopeParent:i,d=rae(o,a),g=a?n(i.candidates):o;d===0?a?t.push.apply(t,g):t.push(o):r.push({documentOrder:s,tabIndex:d,item:i,isScope:a,content:g})}),r.sort(iae).reduce(function(i,s){return s.isScope?i.push.apply(i,s.content):i.push(s.content),i},[]).concat(t)},HN=function(e,t){t=t||{};var r;return t.getShadowRoot?r=YN([e],t.includeContainer,{filter:kB.bind(null,t),flatten:!1,getShadowRoot:t.getShadowRoot,shadowRootFilter:fae}):r=qN(e,t.includeContainer,kB.bind(null,t)),pae(r)},ZN=function(e,t){t=t||{};var r;return t.getShadowRoot?r=YN([e],t.includeContainer,{filter:ex.bind(null,t),flatten:!0,getShadowRoot:t.getShadowRoot}):r=qN(e,t.includeContainer,ex.bind(null,t)),r},vg=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return Qg.call(e,Z2)===!1?!1:kB(t,e)},mae=GN.concat("iframe").join(","),Zb=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return Qg.call(e,mae)===!1?!1:ex(t,e)};const gae=Object.freeze(Object.defineProperty({__proto__:null,focusable:ZN,getTabIndex:S0,isFocusable:Zb,isTabbable:vg,tabbable:HN},Symbol.toStringTag,{value:"Module"}));/*!
* focus-trap 7.5.4
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function Jk(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function eT(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Jk(Object(t),!0).forEach(function(r){yae(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Jk(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function yae(n,e,t){return e=Cae(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function vae(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Cae(n){var e=vae(n,"string");return typeof e=="symbol"?e:String(e)}var tT={activateTrap:function(e,t){if(e.length>0){var r=e[e.length-1];r!==t&&r.pause()}var i=e.indexOf(t);i===-1||e.splice(i,1),e.push(t)},deactivateTrap:function(e,t){var r=e.indexOf(t);r!==-1&&e.splice(r,1),e.length>0&&e[e.length-1].unpause()}},_ae=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},bae=function(e){return(e==null?void 0:e.key)==="Escape"||(e==null?void 0:e.key)==="Esc"||(e==null?void 0:e.keyCode)===27},hC=function(e){return(e==null?void 0:e.key)==="Tab"||(e==null?void 0:e.keyCode)===9},xae=function(e){return hC(e)&&!e.shiftKey},wae=function(e){return hC(e)&&e.shiftKey},nT=function(e){return setTimeout(e,0)},rT=function(e,t){var r=-1;return e.every(function(i,s){return t(i)?(r=s,!1):!0}),r},Tv=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return typeof e=="function"?e.apply(void 0,r):e},Ob=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},Mae=[],Sae=function(e,t){var r=(t==null?void 0:t.document)||document,i=(t==null?void 0:t.trapStack)||Mae,s=eT({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:xae,isKeyBackward:wae},t),a={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},o,d=function(me,Se,De){return me&&me[Se]!==void 0?me[Se]:s[De||Se]},g=function(me,Se){var De=typeof(Se==null?void 0:Se.composedPath)=="function"?Se.composedPath():void 0;return a.containerGroups.findIndex(function(be){var at=be.container,Ze=be.tabbableNodes;return at.contains(me)||(De==null?void 0:De.includes(at))||Ze.find(function(Je){return Je===me})})},b=function(me){var Se=s[me];if(typeof Se=="function"){for(var De=arguments.length,be=new Array(De>1?De-1:0),at=1;at<De;at++)be[at-1]=arguments[at];Se=Se.apply(void 0,be)}if(Se===!0&&(Se=void 0),!Se){if(Se===void 0||Se===!1)return Se;throw new Error("`".concat(me,"` was specified but was not a node, or did not return a node"))}var Ze=Se;if(typeof Se=="string"&&(Ze=r.querySelector(Se),!Ze))throw new Error("`".concat(me,"` as selector refers to no known node"));return Ze},E=function(){var me=b("initialFocus");if(me===!1)return!1;if(me===void 0||!Zb(me,s.tabbableOptions))if(g(r.activeElement)>=0)me=r.activeElement;else{var Se=a.tabbableGroups[0],De=Se&&Se.firstTabbableNode;me=De||b("fallbackFocus")}if(!me)throw new Error("Your focus-trap needs to have at least one focusable element");return me},S=function(){if(a.containerGroups=a.containers.map(function(me){var Se=HN(me,s.tabbableOptions),De=ZN(me,s.tabbableOptions),be=Se.length>0?Se[0]:void 0,at=Se.length>0?Se[Se.length-1]:void 0,Ze=De.find(function(Me){return vg(Me)}),Je=De.slice().reverse().find(function(Me){return vg(Me)}),We=!!Se.find(function(Me){return S0(Me)>0});return{container:me,tabbableNodes:Se,focusableNodes:De,posTabIndexesFound:We,firstTabbableNode:be,lastTabbableNode:at,firstDomTabbableNode:Ze,lastDomTabbableNode:Je,nextTabbableNode:function(Fe){var He=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,bt=Se.indexOf(Fe);return bt<0?He?De.slice(De.indexOf(Fe)+1).find(function(Yt){return vg(Yt)}):De.slice(0,De.indexOf(Fe)).reverse().find(function(Yt){return vg(Yt)}):Se[bt+(He?1:-1)]}}}),a.tabbableGroups=a.containerGroups.filter(function(me){return me.tabbableNodes.length>0}),a.tabbableGroups.length<=0&&!b("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(a.containerGroups.find(function(me){return me.posTabIndexesFound})&&a.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},I=function Ee(me){var Se=me.activeElement;if(Se)return Se.shadowRoot&&Se.shadowRoot.activeElement!==null?Ee(Se.shadowRoot):Se},P=function Ee(me){if(me!==!1&&me!==I(document)){if(!me||!me.focus){Ee(E());return}me.focus({preventScroll:!!s.preventScroll}),a.mostRecentlyFocusedNode=me,_ae(me)&&me.select()}},z=function(me){var Se=b("setReturnFocus",me);return Se||(Se===!1?!1:me)},j=function(me){var Se=me.target,De=me.event,be=me.isBackward,at=be===void 0?!1:be;Se=Se||Ob(De),S();var Ze=null;if(a.tabbableGroups.length>0){var Je=g(Se,De),We=Je>=0?a.containerGroups[Je]:void 0;if(Je<0)at?Ze=a.tabbableGroups[a.tabbableGroups.length-1].lastTabbableNode:Ze=a.tabbableGroups[0].firstTabbableNode;else if(at){var Me=rT(a.tabbableGroups,function(Lt){var Kt=Lt.firstTabbableNode;return Se===Kt});if(Me<0&&(We.container===Se||Zb(Se,s.tabbableOptions)&&!vg(Se,s.tabbableOptions)&&!We.nextTabbableNode(Se,!1))&&(Me=Je),Me>=0){var Fe=Me===0?a.tabbableGroups.length-1:Me-1,He=a.tabbableGroups[Fe];Ze=S0(Se)>=0?He.lastTabbableNode:He.lastDomTabbableNode}else hC(De)||(Ze=We.nextTabbableNode(Se,!1))}else{var bt=rT(a.tabbableGroups,function(Lt){var Kt=Lt.lastTabbableNode;return Se===Kt});if(bt<0&&(We.container===Se||Zb(Se,s.tabbableOptions)&&!vg(Se,s.tabbableOptions)&&!We.nextTabbableNode(Se))&&(bt=Je),bt>=0){var Yt=bt===a.tabbableGroups.length-1?0:bt+1,gt=a.tabbableGroups[Yt];Ze=S0(Se)>=0?gt.firstTabbableNode:gt.firstDomTabbableNode}else hC(De)||(Ze=We.nextTabbableNode(Se))}}else Ze=b("fallbackFocus");return Ze},q=function(me){var Se=Ob(me);if(!(g(Se,me)>=0)){if(Tv(s.clickOutsideDeactivates,me)){o.deactivate({returnFocus:s.returnFocusOnDeactivate});return}Tv(s.allowOutsideClick,me)||me.preventDefault()}},Y=function(me){var Se=Ob(me),De=g(Se,me)>=0;if(De||Se instanceof Document)De&&(a.mostRecentlyFocusedNode=Se);else{me.stopImmediatePropagation();var be,at=!0;if(a.mostRecentlyFocusedNode)if(S0(a.mostRecentlyFocusedNode)>0){var Ze=g(a.mostRecentlyFocusedNode),Je=a.containerGroups[Ze].tabbableNodes;if(Je.length>0){var We=Je.findIndex(function(Me){return Me===a.mostRecentlyFocusedNode});We>=0&&(s.isKeyForward(a.recentNavEvent)?We+1<Je.length&&(be=Je[We+1],at=!1):We-1>=0&&(be=Je[We-1],at=!1))}}else a.containerGroups.some(function(Me){return Me.tabbableNodes.some(function(Fe){return S0(Fe)>0})})||(at=!1);else at=!1;at&&(be=j({target:a.mostRecentlyFocusedNode,isBackward:s.isKeyBackward(a.recentNavEvent)})),P(be||a.mostRecentlyFocusedNode||E())}a.recentNavEvent=void 0},ie=function(me){var Se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;a.recentNavEvent=me;var De=j({event:me,isBackward:Se});De&&(hC(me)&&me.preventDefault(),P(De))},te=function(me){if(bae(me)&&Tv(s.escapeDeactivates,me)!==!1){me.preventDefault(),o.deactivate();return}(s.isKeyForward(me)||s.isKeyBackward(me))&&ie(me,s.isKeyBackward(me))},V=function(me){var Se=Ob(me);g(Se,me)>=0||Tv(s.clickOutsideDeactivates,me)||Tv(s.allowOutsideClick,me)||(me.preventDefault(),me.stopImmediatePropagation())},ne=function(){if(a.active)return tT.activateTrap(i,o),a.delayInitialFocusTimer=s.delayInitialFocus?nT(function(){P(E())}):P(E()),r.addEventListener("focusin",Y,!0),r.addEventListener("mousedown",q,{capture:!0,passive:!1}),r.addEventListener("touchstart",q,{capture:!0,passive:!1}),r.addEventListener("click",V,{capture:!0,passive:!1}),r.addEventListener("keydown",te,{capture:!0,passive:!1}),o},G=function(){if(a.active)return r.removeEventListener("focusin",Y,!0),r.removeEventListener("mousedown",q,!0),r.removeEventListener("touchstart",q,!0),r.removeEventListener("click",V,!0),r.removeEventListener("keydown",te,!0),o},oe=function(me){var Se=me.some(function(De){var be=Array.from(De.removedNodes);return be.some(function(at){return at===a.mostRecentlyFocusedNode})});Se&&P(E())},he=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(oe):void 0,pe=function(){he&&(he.disconnect(),a.active&&!a.paused&&a.containers.map(function(me){he.observe(me,{subtree:!0,childList:!0})}))};return o={get active(){return a.active},get paused(){return a.paused},activate:function(me){if(a.active)return this;var Se=d(me,"onActivate"),De=d(me,"onPostActivate"),be=d(me,"checkCanFocusTrap");be||S(),a.active=!0,a.paused=!1,a.nodeFocusedBeforeActivation=r.activeElement,Se==null||Se();var at=function(){be&&S(),ne(),pe(),De==null||De()};return be?(be(a.containers.concat()).then(at,at),this):(at(),this)},deactivate:function(me){if(!a.active)return this;var Se=eT({onDeactivate:s.onDeactivate,onPostDeactivate:s.onPostDeactivate,checkCanReturnFocus:s.checkCanReturnFocus},me);clearTimeout(a.delayInitialFocusTimer),a.delayInitialFocusTimer=void 0,G(),a.active=!1,a.paused=!1,pe(),tT.deactivateTrap(i,o);var De=d(Se,"onDeactivate"),be=d(Se,"onPostDeactivate"),at=d(Se,"checkCanReturnFocus"),Ze=d(Se,"returnFocus","returnFocusOnDeactivate");De==null||De();var Je=function(){nT(function(){Ze&&P(z(a.nodeFocusedBeforeActivation)),be==null||be()})};return Ze&&at?(at(z(a.nodeFocusedBeforeActivation)).then(Je,Je),this):(Je(),this)},pause:function(me){if(a.paused||!a.active)return this;var Se=d(me,"onPause"),De=d(me,"onPostPause");return a.paused=!0,Se==null||Se(),G(),pe(),De==null||De(),this},unpause:function(me){if(!a.paused||!a.active)return this;var Se=d(me,"onUnpause"),De=d(me,"onPostUnpause");return a.paused=!1,Se==null||Se(),S(),ne(),pe(),De==null||De(),this},updateContainerElements:function(me){var Se=[].concat(me).filter(Boolean);return a.containers=Se.map(function(De){return typeof De=="string"?r.querySelector(De):De}),a.active&&S(),pe(),this}},o.updateContainerElements(e),o};const Eae=Object.freeze(Object.defineProperty({__proto__:null,createFocusTrap:Sae},Symbol.toStringTag,{value:"Module"})),Bae=UB(Eae),Oae=UB(gae);var P5,iT;function Iae(){if(iT)return P5;iT=1;function n(ne){"@babel/helpers - typeof";return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(G){return typeof G}:function(G){return G&&typeof Symbol=="function"&&G.constructor===Symbol&&G!==Symbol.prototype?"symbol":typeof G},n(ne)}function e(ne,G){if(!(ne instanceof G))throw new TypeError("Cannot call a class as a function")}function t(ne,G){for(var oe=0;oe<G.length;oe++){var he=G[oe];he.enumerable=he.enumerable||!1,he.configurable=!0,"value"in he&&(he.writable=!0),Object.defineProperty(ne,S(he.key),he)}}function r(ne,G,oe){return t(ne.prototype,G),Object.defineProperty(ne,"prototype",{writable:!1}),ne}function i(ne,G){if(typeof G!="function"&&G!==null)throw new TypeError("Super expression must either be null or a function");ne.prototype=Object.create(G&&G.prototype,{constructor:{value:ne,writable:!0,configurable:!0}}),Object.defineProperty(ne,"prototype",{writable:!1}),G&&s(ne,G)}function s(ne,G){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(he,pe){return he.__proto__=pe,he},s(ne,G)}function a(ne){var G=g();return function(){var he=b(ne),pe;if(G){var Ee=b(this).constructor;pe=Reflect.construct(he,arguments,Ee)}else pe=he.apply(this,arguments);return o(this,pe)}}function o(ne,G){if(G&&(n(G)==="object"||typeof G=="function"))return G;if(G!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return d(ne)}function d(ne){if(ne===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ne}function g(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function b(ne){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(oe){return oe.__proto__||Object.getPrototypeOf(oe)},b(ne)}function E(ne,G,oe){return G=S(G),G in ne?Object.defineProperty(ne,G,{value:oe,enumerable:!0,configurable:!0,writable:!0}):ne[G]=oe,ne}function S(ne){var G=I(ne,"string");return n(G)==="symbol"?G:String(G)}function I(ne,G){if(n(ne)!=="object"||ne===null)return ne;var oe=ne[Symbol.toPrimitive];if(oe!==void 0){var he=oe.call(ne,G||"default");if(n(he)!=="object")return he;throw new TypeError("@@toPrimitive must return a primitive value.")}return(G==="string"?String:Number)(ne)}var P=za(),z=xp(),j=Bae,q=j.createFocusTrap,Y=Oae,ie=Y.isFocusable,te=function(ne){i(oe,ne);var G=a(oe);function oe(he){var pe;e(this,oe),pe=G.call(this,he),E(d(pe),"getNodeForOption",function(Se){var De,be=(De=this.internalOptions[Se])!==null&&De!==void 0?De:this.originalOptions[Se];if(typeof be=="function"){for(var at=arguments.length,Ze=new Array(at>1?at-1:0),Je=1;Je<at;Je++)Ze[Je-1]=arguments[Je];be=be.apply(void 0,Ze)}if(be===!0&&(be=void 0),!be){if(be===void 0||be===!1)return be;throw new Error("`".concat(Se,"` was specified but was not a node, or did not return a node"))}var We=be;if(typeof be=="string"){var Me;if(We=(Me=this.getDocument())===null||Me===void 0?void 0:Me.querySelector(be),!We)throw new Error("`".concat(Se,"` as selector refers to no known node"))}return We}),pe.handleDeactivate=pe.handleDeactivate.bind(d(pe)),pe.handlePostDeactivate=pe.handlePostDeactivate.bind(d(pe)),pe.handleClickOutsideDeactivates=pe.handleClickOutsideDeactivates.bind(d(pe)),pe.internalOptions={returnFocusOnDeactivate:!1,checkCanReturnFocus:null,onDeactivate:pe.handleDeactivate,onPostDeactivate:pe.handlePostDeactivate,clickOutsideDeactivates:pe.handleClickOutsideDeactivates},pe.originalOptions={returnFocusOnDeactivate:!0,onDeactivate:null,onPostDeactivate:null,checkCanReturnFocus:null,clickOutsideDeactivates:!1};var Ee=he.focusTrapOptions;for(var me in Ee)if(Object.prototype.hasOwnProperty.call(Ee,me)){if(me==="returnFocusOnDeactivate"||me==="onDeactivate"||me==="onPostDeactivate"||me==="checkCanReturnFocus"||me==="clickOutsideDeactivates"){pe.originalOptions[me]=Ee[me];continue}pe.internalOptions[me]=Ee[me]}return pe.outsideClick=null,pe.focusTrapElements=he.containerElements||[],pe.updatePreviousElement(),pe}return r(oe,[{key:"getDocument",value:function(){return this.props.focusTrapOptions.document||(typeof document<"u"?document:void 0)}},{key:"getReturnFocusNode",value:function(){var pe=this.getNodeForOption("setReturnFocus",this.previouslyFocusedElement);return pe||(pe===!1?!1:this.previouslyFocusedElement)}},{key:"updatePreviousElement",value:function(){var pe=this.getDocument();pe&&(this.previouslyFocusedElement=pe.activeElement)}},{key:"deactivateTrap",value:function(){!this.focusTrap||!this.focusTrap.active||this.focusTrap.deactivate({returnFocus:!1,checkCanReturnFocus:null,onDeactivate:this.originalOptions.onDeactivate})}},{key:"handleClickOutsideDeactivates",value:function(pe){var Ee=typeof this.originalOptions.clickOutsideDeactivates=="function"?this.originalOptions.clickOutsideDeactivates.call(null,pe):this.originalOptions.clickOutsideDeactivates;return Ee&&(this.outsideClick={target:pe.target,allowDeactivation:Ee}),Ee}},{key:"handleDeactivate",value:function(){this.originalOptions.onDeactivate&&this.originalOptions.onDeactivate.call(null),this.deactivateTrap()}},{key:"handlePostDeactivate",value:function(){var pe=this,Ee=function(){var Se=pe.getReturnFocusNode(),De=!!(pe.originalOptions.returnFocusOnDeactivate&&Se!==null&&Se!==void 0&&Se.focus&&(!pe.outsideClick||pe.outsideClick.allowDeactivation&&!ie(pe.outsideClick.target,pe.internalOptions.tabbableOptions))),be=pe.internalOptions.preventScroll,at=be===void 0?!1:be;De&&Se.focus({preventScroll:at}),pe.originalOptions.onPostDeactivate&&pe.originalOptions.onPostDeactivate.call(null),pe.outsideClick=null};this.originalOptions.checkCanReturnFocus?this.originalOptions.checkCanReturnFocus.call(null,this.getReturnFocusNode()).then(Ee,Ee):Ee()}},{key:"setupFocusTrap",value:function(){if(this.focusTrap)this.props.active&&!this.focusTrap.active&&(this.focusTrap.activate(),this.props.paused&&this.focusTrap.pause());else{var pe=this.focusTrapElements.some(Boolean);pe&&(this.focusTrap=this.props._createFocusTrap(this.focusTrapElements,this.internalOptions),this.props.active&&this.focusTrap.activate(),this.props.paused&&this.focusTrap.pause())}}},{key:"componentDidMount",value:function(){this.props.active&&this.setupFocusTrap()}},{key:"componentDidUpdate",value:function(pe){if(this.focusTrap){pe.containerElements!==this.props.containerElements&&this.focusTrap.updateContainerElements(this.props.containerElements);var Ee=!pe.active&&this.props.active,me=pe.active&&!this.props.active,Se=!pe.paused&&this.props.paused,De=pe.paused&&!this.props.paused;if(Ee&&(this.updatePreviousElement(),this.focusTrap.activate()),me){this.deactivateTrap();return}Se&&this.focusTrap.pause(),De&&this.focusTrap.unpause()}else pe.containerElements!==this.props.containerElements&&(this.focusTrapElements=this.props.containerElements),this.props.active&&(this.updatePreviousElement(),this.setupFocusTrap())}},{key:"componentWillUnmount",value:function(){this.deactivateTrap()}},{key:"render",value:function(){var pe=this,Ee=this.props.children?P.Children.only(this.props.children):void 0;if(Ee){if(Ee.type&&Ee.type===P.Fragment)throw new Error("A focus-trap cannot use a Fragment as its child container. Try replacing it with a <div> element.");var me=function(be){var at=pe.props.containerElements;Ee&&(typeof Ee.ref=="function"?Ee.ref(be):Ee.ref&&(Ee.ref.current=be)),pe.focusTrapElements=at||[be]},Se=P.cloneElement(Ee,{ref:me});return Se}return null}}]),oe}(P.Component),V=typeof Element>"u"?Function:Element;return te.propTypes={active:z.bool,paused:z.bool,focusTrapOptions:z.shape({document:z.object,onActivate:z.func,onPostActivate:z.func,checkCanFocusTrap:z.func,onPause:z.func,onPostPause:z.func,onUnpause:z.func,onPostUnpause:z.func,onDeactivate:z.func,onPostDeactivate:z.func,checkCanReturnFocus:z.func,initialFocus:z.oneOfType([z.instanceOf(V),z.string,z.bool,z.func]),fallbackFocus:z.oneOfType([z.instanceOf(V),z.string,z.func]),escapeDeactivates:z.oneOfType([z.bool,z.func]),clickOutsideDeactivates:z.oneOfType([z.bool,z.func]),returnFocusOnDeactivate:z.bool,setReturnFocus:z.oneOfType([z.instanceOf(V),z.string,z.bool,z.func]),allowOutsideClick:z.oneOfType([z.bool,z.func]),preventScroll:z.bool,tabbableOptions:z.shape({displayCheck:z.oneOf(["full","legacy-full","non-zero-area","none"]),getShadowRoot:z.oneOfType([z.bool,z.func])}),trapStack:z.array,isKeyForward:z.func,isKeyBackward:z.func}),containerElements:z.arrayOf(z.instanceOf(V)),children:z.oneOfType([z.element,z.instanceOf(V)])},te.defaultProps={active:!0,paused:!1,focusTrapOptions:{},_createFocusTrap:q},P5=te,P5}var K5={exports:{}},oT;function kae(){return oT||(oT=1,function(n){(function(e){var t=!1,r,i;function s(){if(typeof r<"u")return r;var E=document.documentElement,S=document.createElement("div");return S.setAttribute("style","width:99px;height:99px;position:absolute;top:-9999px;overflow:scroll;"),E.appendChild(S),r=S.offsetWidth-S.clientWidth,E.removeChild(S),r}function a(){return document.documentElement.scrollHeight>window.innerHeight}function o(E){if(!(typeof document>"u"||t)){var S=document.documentElement;i=window.pageYOffset,a()?S.style.width="calc(100% - "+s()+"px)":S.style.width="100%",S.style.position="fixed",S.style.top=-i+"px",S.style.overflow="hidden",t=!0}}function d(){if(!(typeof document>"u"||!t)){var E=document.documentElement;E.style.width="",E.style.position="",E.style.top="",E.style.overflow="",window.scroll(0,i),t=!1}}function g(){if(t){d();return}o()}var b={on:o,off:d,toggle:g};n.exports=b})()}(K5)),K5.exports}var D5,sT;function Tae(){if(sT)return D5;sT=1;function n(ie){"@babel/helpers - typeof";return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(te){return typeof te}:function(te){return te&&typeof Symbol=="function"&&te.constructor===Symbol&&te!==Symbol.prototype?"symbol":typeof te},n(ie)}function e(ie,te){if(!(ie instanceof te))throw new TypeError("Cannot call a class as a function")}function t(ie,te){for(var V=0;V<te.length;V++){var ne=te[V];ne.enumerable=ne.enumerable||!1,ne.configurable=!0,"value"in ne&&(ne.writable=!0),Object.defineProperty(ie,ne.key,ne)}}function r(ie,te,V){return te&&t(ie.prototype,te),Object.defineProperty(ie,"prototype",{writable:!1}),ie}function i(ie,te){if(typeof te!="function"&&te!==null)throw new TypeError("Super expression must either be null or a function");ie.prototype=Object.create(te&&te.prototype,{constructor:{value:ie,writable:!0,configurable:!0}}),Object.defineProperty(ie,"prototype",{writable:!1}),te&&s(ie,te)}function s(ie,te){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(ne,G){return ne.__proto__=G,ne},s(ie,te)}function a(ie){var te=g();return function(){var ne=b(ie),G;if(te){var oe=b(this).constructor;G=Reflect.construct(ne,arguments,oe)}else G=ne.apply(this,arguments);return o(this,G)}}function o(ie,te){if(te&&(n(te)==="object"||typeof te=="function"))return te;if(te!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return d(ie)}function d(ie){if(ie===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ie}function g(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function b(ie){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(V){return V.__proto__||Object.getPrototypeOf(V)},b(ie)}function E(ie,te,V){return te in ie?Object.defineProperty(ie,te,{value:V,enumerable:!0,configurable:!0,writable:!0}):ie[te]=V,ie}var S=za(),I=$C(),P=Iae(),z=kae(),j=function(ie){i(V,ie);var te=a(V);function V(ne){var G;if(e(this,V),G=te.call(this,ne),E(d(G),"getApplicationNode",function(){return G.props.getApplicationNode?G.props.getApplicationNode():G.props.applicationNode}),E(d(G),"checkUnderlayClick",function(oe){G.dialogNode&&G.dialogNode.contains(oe.target)||oe.pageX>oe.target.ownerDocument.documentElement.offsetWidth||oe.pageY>oe.target.ownerDocument.documentElement.offsetHeight||G.exit(oe)}),E(d(G),"checkDocumentKeyDown",function(oe){G.props.escapeExits&&(oe.key==="Escape"||oe.key==="Esc"||oe.keyCode===27)&&G.exit(oe)}),E(d(G),"exit",function(oe){G.props.onExit&&G.props.onExit(oe)}),!ne.titleText&&!ne.titleId)throw new Error("react-aria-modal instances should have a `titleText` or `titleId`");return G}return r(V,[{key:"componentDidMount",value:function(){this.props.onEnter&&this.props.onEnter();var G=this.getApplicationNode();setTimeout(function(){G&&G.setAttribute("aria-hidden","true")},0),this.props.escapeExits&&this.addKeyDownListener(),this.props.scrollDisabled&&z.on()}},{key:"componentDidUpdate",value:function(G){G.scrollDisabled&&!this.props.scrollDisabled?z.off():!G.scrollDisabled&&this.props.scrollDisabled&&z.on(),this.props.escapeExits&&!G.escapeExits?this.addKeyDownListener():!this.props.escapeExits&&G.escapeExits&&this.removeKeyDownListener()}},{key:"componentWillUnmount",value:function(){this.props.scrollDisabled&&z.off();var G=this.getApplicationNode();G&&G.setAttribute("aria-hidden","false"),this.removeKeyDownListener()}},{key:"addKeyDownListener",value:function(){var G=this;setTimeout(function(){document.addEventListener("keydown",G.checkDocumentKeyDown)})}},{key:"removeKeyDownListener",value:function(){var G=this;setTimeout(function(){document.removeEventListener("keydown",G.checkDocumentKeyDown)})}},{key:"render",value:function(){var G=this.props,oe={};if(G.includeDefaultStyles&&(oe={position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:1050,overflowX:"hidden",overflowY:"auto",WebkitOverflowScrolling:"touch",textAlign:"center"},G.underlayColor&&(oe.background=G.underlayColor),G.underlayClickExits&&(oe.cursor="pointer")),G.underlayStyle)for(var he in G.underlayStyle)G.underlayStyle.hasOwnProperty(he)&&(oe[he]=G.underlayStyle[he]);var pe={className:G.underlayClass,style:oe};G.underlayClickExits&&(pe.onMouseDown=this.checkUnderlayClick);for(var Ee in this.props.underlayProps)pe[Ee]=this.props.underlayProps[Ee];var me={};G.includeDefaultStyles&&(me={display:"inline-block",height:"100%",verticalAlign:"middle"});var Se={key:"a",style:me},De={};if(G.includeDefaultStyles&&(De={display:"inline-block",textAlign:"left",top:0,maxWidth:"100%",cursor:"auto",outline:G.focusDialog?0:null},G.verticallyCenter&&(De.verticalAlign="middle",De.top=0)),G.dialogStyle)for(var be in G.dialogStyle)G.dialogStyle.hasOwnProperty(be)&&(De[be]=G.dialogStyle[be]);var at={key:"b",ref:(function(Me){this.dialogNode=Me}).bind(this),role:G.alert?"alertdialog":"dialog",id:G.dialogId,className:G.dialogClass,style:De};G.titleId?at["aria-labelledby"]=G.titleId:G.titleText&&(at["aria-label"]=G.titleText),G.focusDialog&&(at.tabIndex="-1");for(var Ze in G)/^(data-|aria-)/.test(Ze)&&(at[Ze]=G[Ze]);var Je=[S.createElement("div",at,G.children)];G.verticallyCenter&&Je.unshift(S.createElement("div",Se));var We=G.focusTrapOptions||{};return(G.focusDialog||G.initialFocus)&&(We.initialFocus=G.focusDialog?"#".concat(this.props.dialogId):G.initialFocus),We.escapeDeactivates=G.escapeExits,S.createElement(P,{focusTrapOptions:We,paused:G.focusTrapPaused},S.createElement("div",pe,Je))}}]),V}(S.Component);E(j,"defaultProps",{underlayProps:{},dialogId:"react-aria-modal-dialog",underlayClickExits:!0,escapeExits:!0,underlayColor:"rgba(0,0,0,0.5)",includeDefaultStyles:!0,focusTrapPaused:!1,scrollDisabled:!0});function q(ie,te){if(!window.document)return function(){return null};te=te||{};var V=function(ne){i(oe,ne);var G=a(oe);function oe(){var he;e(this,oe);for(var pe=arguments.length,Ee=new Array(pe),me=0;me<pe;me++)Ee[me]=arguments[me];return he=G.call.apply(G,[this].concat(Ee)),E(d(he),"container",null),he}return r(oe,[{key:"componentDidMount",value:function(){te.renderTo?this.container=typeof te.renderTo=="string"?document.querySelector(te.renderTo):te.renderTo:(this.container=document.createElement("div"),document.body.appendChild(this.container)),this.forceUpdate()}},{key:"componentWillUnmount",value:function(){te.renderTo||this.container.parentNode.removeChild(this.container)}},{key:"render",value:function(){return this.container===null||!this.props.mounted?null:I.createPortal(S.createElement(ie,this.props,this.props.children),this.container)}}]),oe}(S.Component);return E(V,"defaultProps",{mounted:!0}),V}var Y=q(j);return Y.renderTo=function(ie){return q(j,{renderTo:ie})},D5=Y,D5}var Pae=Tae();const Kae=el(Pae);function xA(){var n="/home/runner/work/maputnik/maputnik/src/components/Modal.tsx",e="55b511200efca707daa3ccb304d63dc159a8f390",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/Modal.tsx",statementMap:{0:{start:{line:8,column:24},end:{line:10,column:3}},1:{start:{line:12,column:12},end:{line:19,column:3}},2:{start:{line:13,column:4},end:{line:15,column:5}},3:{start:{line:14,column:6},end:{line:14,column:36}},4:{start:{line:16,column:4},end:{line:18,column:10}},5:{start:{line:17,column:6},end:{line:17,column:37}},6:{start:{line:21,column:14},end:{line:21,column:26}},7:{start:{line:22,column:4},end:{line:60,column:5}},8:{start:{line:23,column:6},end:{line:57,column:8}},9:{start:{line:59,column:6},end:{line:59,column:19}},10:{start:{line:63,column:14},end:{line:63,column:46}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:12,column:12},end:{line:12,column:13}},loc:{start:{line:12,column:18},end:{line:19,column:3}},line:12},1:{name:"(anonymous_1)",decl:{start:{line:16,column:15},end:{line:16,column:16}},loc:{start:{line:16,column:21},end:{line:18,column:5}},line:16},2:{name:"(anonymous_2)",decl:{start:{line:20,column:2},end:{line:20,column:3}},loc:{start:{line:20,column:11},end:{line:61,column:3}},line:20}},branchMap:{0:{loc:{start:{line:13,column:4},end:{line:15,column:5}},type:"if",locations:[{start:{line:13,column:4},end:{line:15,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:13},1:{loc:{start:{line:22,column:4},end:{line:60,column:5}},type:"if",locations:[{start:{line:22,column:4},end:{line:60,column:5}},{start:{line:58,column:11},end:{line:60,column:5}}],line:22}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},f:{0:0,1:0,2:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Modal.tsx"],names:[],mappings:"AAgDU,SACE,KADF;AAhDV,OAAO,WAAkC;AACzC,SAAQ,eAAc;AACtB,OAAO,eAAe;AACtB,OAAO,gBAAgB;AACvB,SAA0B,uBAAuB;AAajD,MAAM,sBAAsB,MAAM,UAA8B;AAAA,EAC9D,OAAO,eAAe;AAAA,IACpB,oBAAoB;AAAA,EACtB;AAAA;AAAA,EAGA,UAAU,MAAM;AACd,QAAI,SAAS,eAAe;AAC1B,MAAC,SAAS,cAA8B,KAAK;AAAA,IAC/C;AAEA,eAAW,MAAM;AACf,WAAK,MAAM,aAAa,KAAK;AAAA,IAC/B,GAAG,CAAC;AAAA,EACN;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,QAAG,KAAK,MAAM,QAAQ;AACpB,aAAO;AAAA,QAAC;AAAA;AAAA,UACN,WAAW,KAAK,MAAM;AAAA,UACtB,oBAAoB,KAAK,MAAM;AAAA,UAE/B,eAAe,KAAK,MAAM;AAAA,UAC1B,eAAa,KAAK,MAAM,aAAa;AAAA,UACrC,kBAAkB;AAAA,UAClB,QAAQ,KAAK;AAAA,UAEb;AAAA,YAAC;AAAA;AAAA,cAAI,WAAW,WAAW,kBAAkB,KAAK,MAAM,SAAS;AAAA,cAC/D,eAAa,KAAK,MAAM,aAAa;AAAA,cAErC;AAAA,qCAAC,YAAO,WAAU,yBAChB;AAAA,sCAAC,QAAG,WAAU,+BAA+B,eAAK,MAAM,OAAM;AAAA,kBAC9D,oBAAC,UAAK,WAAU,+BAA8B;AAAA,kBAC9C;AAAA,oBAAC;AAAA;AAAA,sBAAO,WAAU;AAAA,sBAChB,OAAO,EAAE,aAAa;AAAA,sBACtB,SAAS,KAAK;AAAA,sBACd,eAAa,KAAK,MAAM,aAAa,IAAE;AAAA,sBAEvC,8BAAC,WAAQ;AAAA;AAAA,kBACX;AAAA,mBACF;AAAA,gBACA,oBAAC,SAAI,WAAU,2BACb,8BAAC,SAAI,WAAU,0BAA0B,eAAK,MAAM,UAAS,GAC/D;AAAA;AAAA;AAAA,UACF;AAAA;AAAA,MACF;AAAA,IACF,OACK;AACH,aAAO;AAAA,IACT;AAAA,EACF;AACF;AAEA,MAAM,QAAQ,gBAAgB,EAAE,aAAa;AAC7C,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"55b511200efca707daa3ccb304d63dc159a8f390"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return xA=function(){return a},a}xA();class XN extends nr.Component{constructor(){super(...arguments);Pn(this,"onClose",(xA().s[1]++,()=>{xA().f[0]++,xA().s[2]++,document.activeElement?(xA().b[0][0]++,xA().s[3]++,document.activeElement.blur()):xA().b[0][1]++,xA().s[4]++,setTimeout(()=>{xA().f[1]++,xA().s[5]++,this.props.onOpenToggle(!1)},0)}))}render(){xA().f[2]++;const t=(xA().s[6]++,this.props.t);return xA().s[7]++,this.props.isOpen?(xA().b[1][0]++,xA().s[8]++,ue.jsx(Kae,{titleText:this.props.title,underlayClickExits:this.props.underlayClickExits,underlayProps:this.props.underlayProps,"data-wd-key":this.props["data-wd-key"],verticallyCenter:!0,onExit:this.onClose,children:ue.jsxs("div",{className:am("maputnik-modal",this.props.className),"data-wd-key":this.props["data-wd-key"],children:[ue.jsxs("header",{className:"maputnik-modal-header",children:[ue.jsx("h1",{className:"maputnik-modal-header-title",children:this.props.title}),ue.jsx("span",{className:"maputnik-modal-header-space"}),ue.jsx("button",{className:"maputnik-modal-header-toggle",title:t("Close modal"),onClick:this.onClose,"data-wd-key":this.props["data-wd-key"]+".close-modal",children:ue.jsx(QZ,{})})]}),ue.jsx("div",{className:"maputnik-modal-scroller",children:ue.jsx("div",{className:"maputnik-modal-content",children:this.props.children})})]})})):(xA().b[1][1]++,xA().s[9]++,!1)}}Pn(XN,"defaultProps",(xA().s[0]++,{underlayClickExits:!0}));const G0=(xA().s[10]++,Ns()(XN)),Dae=8,Rae={version:{required:!0,type:"enum",values:[8],doc:"Style specification version number. Must be 8.",example:8},name:{type:"string",doc:"A human-readable name for the style.",example:"Bright"},metadata:{type:"*",doc:"Arbitrary properties useful to track with the stylesheet, but do not influence rendering. Properties should be prefixed to avoid collisions, like 'maplibre:'.",example:{"styleeditor:slimmode":!0,"styleeditor:comment":"Style generated 1677776383","styleeditor:version":"3.14.159265","example:object":{String:"one",Number:2,Boolean:!1}}},center:{type:"array",value:"number",doc:"Default map center in longitude and latitude.  The style center will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:[-73.9749,40.7736]},centerAltitude:{type:"number",doc:"Default map center altitude in meters above sea level. The style center altitude defines the altitude where the camera is looking at and will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:123.4,"sdk-support":{"basic functionality":{js:"5.0.0",android:"https://github.com/maplibre/maplibre-native/issues/2980",ios:"https://github.com/maplibre/maplibre-native/issues/2980"}}},zoom:{type:"number",doc:"Default zoom level.  The style zoom will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:12.5},bearing:{type:"number",default:0,period:360,units:"degrees",doc:'Default bearing, in degrees. The bearing is the compass direction that is "up"; for example, a bearing of 90 orients the map so that east is up. This value will be used only if the map has not been positioned by other means (e.g. map options or user interaction).',example:29},pitch:{type:"number",default:0,units:"degrees",doc:"Default pitch, in degrees. Zero is perpendicular to the surface, for a look straight down at the map, while a greater value like 60 looks ahead towards the horizon. The style pitch will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:50,"sdk-support":{"0-60 degrees":{js:"0.8.0",android:"1.0.0",ios:"1.0.0"},"0-85 degrees":{js:"2.0.0",android:"https://github.com/maplibre/maplibre-native/issues/1909",ios:"https://github.com/maplibre/maplibre-native/issues/1909"},"0-180 degrees":{js:"5.0.0",android:"https://github.com/maplibre/maplibre-native/issues/1909",ios:"https://github.com/maplibre/maplibre-native/issues/1909"}}},roll:{type:"number",default:0,units:"degrees",doc:"Default roll, in degrees. The roll angle is measured counterclockwise about the camera boresight. The style roll will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:45,"sdk-support":{"basic functionality":{js:"5.0.0",android:"https://github.com/maplibre/maplibre-native/issues/2941",ios:"https://github.com/maplibre/maplibre-native/issues/2941"}}},light:{type:"light",doc:"The global light source.",example:{anchor:"viewport",color:"white",intensity:.4}},sky:{type:"sky",doc:"The map's sky configuration. **Note:** this definition is still experimental and is under development in maplibre-gl-js.",example:{"sky-color":"#199EF3","sky-horizon-blend":.5,"horizon-color":"#ffffff","horizon-fog-blend":.5,"fog-color":"#0000ff","fog-ground-blend":.5,"atmosphere-blend":["interpolate",["linear"],["zoom"],0,1,10,1,12,0]}},projection:{type:"projection",doc:"The projection configuration",example:{type:["interpolate",["linear"],["zoom"],10,"vertical-perspective",12,"mercator"]}},terrain:{type:"terrain",doc:"The terrain configuration.",example:{source:"raster-dem-source",exaggeration:.5}},sources:{required:!0,type:"sources",doc:"Sources state which data the map should display. Specify the type of source with the `type` property. Adding a source isn't enough to make data appear on the map because sources don't contain styling details like color or width. Layers refer to a source and give it a visual representation. This makes it possible to style the same source in different ways, like differentiating between types of roads in a highways layer.\n\nTiled sources (vector and raster) must specify their details according to the [TileJSON specification](https://github.com/mapbox/tilejson-spec).",example:{"maplibre-demotiles":{type:"vector",url:"https://demotiles.maplibre.org/tiles/tiles.json"},"maplibre-tilejson":{type:"vector",url:"http://api.example.com/tilejson.json"},"maplibre-streets":{type:"vector",tiles:["http://a.example.com/tiles/{z}/{x}/{y}.pbf","http://b.example.com/tiles/{z}/{x}/{y}.pbf"],maxzoom:14},"wms-imagery":{type:"raster",tiles:["http://a.example.com/wms?bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&srs=EPSG:3857&width=256&height=256&layers=example"],tileSize:256}}},sprite:{type:"sprite",doc:"An array of `{id: 'my-sprite', url: 'https://example.com/sprite'}` objects. Each object should represent a unique URL to load a sprite from and and a unique ID to use as a prefix when referencing images from that sprite (i.e. 'my-sprite:image'). All the URLs are internally extended to load both .json and .png files. If the `id` field is equal to 'default', the prefix is omitted (just 'image' instead of 'default:image'). All the IDs and URLs must be unique. For backwards compatibility, instead of an array, one can also provide a single string that represent a URL to load the sprite from. The images in this case won't be prefixed.",example:"https://demotiles.maplibre.org/styles/osm-bright-gl-style/sprite"},glyphs:{type:"string",doc:`A URL template for loading signed-distance-field glyph sets in PBF format. 

The URL must include:

 - \`{fontstack}\` - When requesting glyphs, this token is replaced with a comma separated list of fonts from a font stack specified in the text-font property of a symbol layer. 

 - \`{range}\` - When requesting glyphs, this token is replaced with a range of 256 Unicode code points. For example, to load glyphs for the Unicode Basic Latin and Basic Latin-1 Supplement blocks, the range would be 0-255. The actual ranges that are loaded are determined at runtime based on what text needs to be displayed.

This property is required if any layer uses the \`text-field\` layout property. The URL must be absolute, containing the [scheme, authority and path components](https://en.wikipedia.org/wiki/URL#Syntax).`,example:"https://demotiles.maplibre.org/font/{fontstack}/{range}.pbf"},transition:{type:"transition",doc:"A global transition definition to use as a default across properties, to be used for timing transitions between one value and the next when no property-specific transition is set. Collision-based symbol fading is controlled independently of the style's `transition` property.",example:{duration:300,delay:0}},layers:{required:!0,type:"array",value:"layer",doc:"A style's `layers` property lists all the layers available in that style. The type of layer is specified by the `type` property, and must be one of `background`, `fill`, `line`, `symbol`, `raster`, `circle`, `fill-extrusion`, `heatmap`, `hillshade`.\n\nExcept for layers of the `background` type, each layer needs to refer to a source. Layers take the data that they get from a source, optionally filter features, and then define how those features are styled.",example:[{id:"coastline",source:"maplibre","source-layer":"countries",type:"line",paint:{"line-color":"#198EC8"}}]}},Fae={"*":{type:"source",doc:"Specification of a data source. For vector and raster sources, either TileJSON or a URL to a TileJSON must be provided. For image and video sources, a URL must be provided. For GeoJSON sources, a URL or inline GeoJSON must be provided."}},Lae=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],Uae={type:{required:!0,type:"enum",values:{vector:{doc:"A vector tile source."}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:` and `https:`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by MapLibre."},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`. If specified as a string for a vector tile source, the same property is used across all its source layers."},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0",js:"wontfix"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},zae={type:{required:!0,type:"enum",values:{raster:{doc:"A raster tile source."}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:` and `https:`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by MapLibre."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0",js:"wontfix"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},jae={type:{required:!0,type:"enum",values:{"raster-dem":{doc:"A RGB-encoded raster DEM source"}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:` and `https:`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by MapLibre."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},encoding:{type:"enum",values:{terrarium:{doc:"Terrarium format PNG tiles. See https://aws.amazon.com/es/public-datasets/terrain/ for more info."},mapbox:{doc:"Mapbox Terrain RGB tiles. See https://www.mapbox.com/help/access-elevation-data/#mapbox-terrain-rgb for more info."},custom:{doc:"Decodes tiles using the redFactor, blueFactor, greenFactor, baseShift parameters."}},default:"mapbox",doc:"The encoding used by this source. Mapbox Terrain RGB is used by default.","sdk-support":{"mapbox, terrarium":{js:"0.43.0",ios:"6.0.0",android:"6.0.0"},custom:{js:"3.4.0",ios:"https://github.com/maplibre/maplibre-native/issues/2783",android:"https://github.com/maplibre/maplibre-native/issues/2783"}}},redFactor:{type:"number",default:1,doc:"Value that will be multiplied by the red channel value when decoding. Only used on custom encodings.","sdk-support":{"basic functionality":{js:"3.4.0",ios:"https://github.com/maplibre/maplibre-native/issues/2783",android:"https://github.com/maplibre/maplibre-native/issues/2783"}}},blueFactor:{type:"number",default:1,doc:"Value that will be multiplied by the blue channel value when decoding. Only used on custom encodings.","sdk-support":{"basic functionality":{js:"3.4.0",ios:"https://github.com/maplibre/maplibre-native/issues/2783",android:"https://github.com/maplibre/maplibre-native/issues/2783"}}},greenFactor:{type:"number",default:1,doc:"Value that will be multiplied by the green channel value when decoding. Only used on custom encodings.","sdk-support":{"basic functionality":{js:"3.4.0",ios:"https://github.com/maplibre/maplibre-native/issues/2358",android:"https://github.com/maplibre/maplibre-native/issues/2783"}}},baseShift:{type:"number",default:0,doc:"Value that will be added to the encoding mix when decoding. Only used on custom encodings.","sdk-support":{"basic functionality":{js:"3.4.0",ios:"https://github.com/maplibre/maplibre-native/issues/2783",android:"https://github.com/maplibre/maplibre-native/issues/2783"}}},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0",js:"wontfix"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},Nae={type:{required:!0,type:"enum",values:{geojson:{doc:"A GeoJSON data source."}},doc:"The data type of the GeoJSON source."},data:{required:!0,type:"*",doc:"A URL to a GeoJSON file, or inline GeoJSON."},maxzoom:{type:"number",default:18,doc:"Maximum zoom level at which to create vector tiles (higher means greater detail at high zoom levels)."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},buffer:{type:"number",default:128,maximum:512,minimum:0,doc:"Size of the tile buffer on each side. A value of 0 produces no buffer. A value of 512 produces a buffer as wide as the tile itself. Larger values produce fewer rendering artifacts near tile edges and slower performance."},filter:{type:"*",doc:"An expression for filtering features prior to processing them for rendering."},tolerance:{type:"number",default:.375,doc:"Douglas-Peucker simplification tolerance (higher means simpler geometries and faster performance)."},cluster:{type:"boolean",default:!1,doc:"If the data is a collection of point features, setting this to true clusters the points by radius into groups. Cluster groups become new `Point` features in the source with additional properties:\n\n * `cluster` Is `true` if the point is a cluster \n\n * `cluster_id` A unique id for the cluster to be used in conjunction with the [cluster inspection methods](https://maplibre.org/maplibre-gl-js/docs/API/classes/GeoJSONSource/#getclusterexpansionzoom)\n\n * `point_count` Number of original points grouped into this cluster\n\n * `point_count_abbreviated` An abbreviated point count"},clusterRadius:{type:"number",default:50,minimum:0,doc:"Radius of each cluster if clustering is enabled. A value of 512 indicates a radius equal to the width of a tile."},clusterMaxZoom:{type:"number",doc:"Max zoom on which to cluster points if clustering is enabled. Defaults to one zoom less than maxzoom (so that last zoom features are not clustered). Clusters are re-evaluated at integer zoom levels so setting clusterMaxZoom to 14 means the clusters will be displayed until z15."},clusterMinPoints:{type:"number",doc:"Minimum number of points necessary to form a cluster if clustering is enabled. Defaults to `2`."},clusterProperties:{type:"*",doc:'An object defining custom properties on the generated clusters if clustering is enabled, aggregating values from clustered points. Has the form `{"property_name": [operator, map_expression]}`. `operator` is any expression function that accepts at least 2 operands (e.g. `"+"` or `"max"`)  it accumulates the property value from clusters/points the cluster contains; `map_expression` produces the value of a single point.\n\nExample: `{"sum": ["+", ["get", "scalerank"]]}`.\n\nFor more advanced use cases, in place of `operator`, you can use a custom reduce expression that references a special `["accumulated"]` value, e.g.:\n\n`{"sum": [["+", ["accumulated"], ["get", "sum"]], ["get", "scalerank"]]}`'},lineMetrics:{type:"boolean",default:!1,doc:"Whether to calculate line distance metrics. This is required for line layers that specify `line-gradient` values."},generateId:{type:"boolean",default:!1,doc:"Whether to generate ids for the geojson features. When enabled, the `feature.id` property will be auto assigned based on its index in the `features` array, over-writing any previous values."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`."}},Wae={type:{required:!0,type:"enum",values:{video:{doc:"A video data source."}},doc:"The data type of the video source."},urls:{required:!0,type:"array",value:"string",doc:"URLs to video content in order of preferred format."},coordinates:{required:!0,doc:"Corners of video specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},Gae={type:{required:!0,type:"enum",values:{image:{doc:"An image data source."}},doc:"The data type of the image source."},url:{required:!0,type:"string",doc:"URL that points to an image."},coordinates:{required:!0,doc:"Corners of image specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},Qae={id:{type:"string",doc:"Unique layer name.",required:!0},type:{type:"enum",values:{fill:{doc:"A filled polygon with an optional stroked border.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},line:{doc:"A stroked line.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},symbol:{doc:"An icon or a text label.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},circle:{doc:"A filled circle.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},heatmap:{doc:"A heatmap.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}}},"fill-extrusion":{doc:"An extruded (3D) polygon.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}},raster:{doc:"Raster map textures such as satellite imagery.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},hillshade:{doc:"Client-side hillshading visualization based on DEM data. The implementation supports Mapbox Terrain RGB, Mapzen Terrarium tiles and custom encodings.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}}},background:{doc:"The background color or pattern of the map.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}}},doc:"Rendering type of this layer.",required:!0},metadata:{type:"*",doc:"Arbitrary properties useful to track with the layer, but do not influence rendering. Properties should be prefixed to avoid collisions, like 'maplibre:'.",example:{"source:comment":"Hydrology FCCODE 460 - Narrow wash"}},source:{type:"string",doc:"Name of a source description to be used for this layer. Required for all layer types except `background`."},"source-layer":{type:"string",doc:"Layer to use from a vector tile source. Required for vector tile sources; prohibited for all other source types, including GeoJSON sources."},minzoom:{type:"number",minimum:0,maximum:24,doc:"The minimum zoom level for the layer. At zoom levels less than the minzoom, the layer will be hidden."},maxzoom:{type:"number",minimum:0,maximum:24,doc:"The maximum zoom level for the layer. At zoom levels equal to or greater than the maxzoom, the layer will be hidden."},filter:{type:"filter",doc:"A expression specifying conditions on source features. Only features that match the filter are displayed. Zoom expressions in filters are only evaluated at integer zoom levels. The `feature-state` expression is not supported in filter expressions."},layout:{type:"layout",doc:"Layout properties for the layer."},paint:{type:"paint",doc:"Default paint properties for this layer."}},qae=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],Yae={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},"property-type":"constant"}},$ae={"fill-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.1.0",ios:"5.8.0"},"data-driven styling":{js:"1.2.0",android:"9.1.0",ios:"5.8.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},"property-type":"constant"}},Vae={"circle-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.2.0",ios:"5.9.0"},"data-driven styling":{js:"1.2.0",android:"9.2.0",ios:"5.9.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},"property-type":"constant"}},Hae={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}},"property-type":"constant"}},Zae={"line-cap":{type:"enum",values:{butt:{doc:"A cap with a squared-off end which is drawn to the exact endpoint of the line."},round:{doc:"A cap with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},square:{doc:"A cap with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."}},default:"butt",doc:"The display of line endings.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{doc:"A join with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."},round:{doc:"A join with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},miter:{doc:"A join with a sharp, angled corner which is drawn with the outer sides beyond the endpoint of the path until they meet."}},default:"miter",doc:"The display of lines when joining.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,doc:"Used to automatically convert miter joins to bevel joins for sharp angles.",requires:[{"line-join":"miter"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,doc:"Used to automatically convert round joins to miter joins for shallow angles.",requires:[{"line-join":"round"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.1.0",ios:"5.8.0"},"data-driven styling":{js:"1.2.0",android:"9.1.0",ios:"5.8.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},"property-type":"constant"}},Xae=JSON.parse('{"symbol-placement":{"type":"enum","values":{"point":{"doc":"The label is placed at the point where the geometry is located."},"line":{"doc":"The label is placed along the line of the geometry. Can only be used on `LineString` and `Polygon` geometries."},"line-center":{"doc":"The label is placed at the center of the line of the geometry. Can only be used on `LineString` and `Polygon` geometries. Note that a single feature in a vector tile may contain multiple line geometries."}},"default":"point","doc":"Label placement relative to its geometry.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"`line-center` value":{"js":"0.47.0","android":"6.4.0","ios":"4.3.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","doc":"Distance between two symbol anchors.","requires":[{"symbol-placement":"line"}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"doc":"If true, the symbols will not cross tile edges to avoid mutual collisions. Recommended in layers that don\'t have enough padding in the vector tile to prevent collisions, or if it is a point symbol layer placed after a line symbol layer. When using a client that supports global collision detection, like MapLibre GL JS version 0.42.0 or greater, enabling this property is not needed to prevent clipped labels at tile boundaries.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","doc":"Sorts features in ascending order based on this value. Features with lower sort keys are drawn and placed first.  When `icon-allow-overlap` or `text-allow-overlap` is `false`, features with a lower sort key will have priority during placement. When `icon-allow-overlap` or `text-allow-overlap` is set to `true`, features with a higher sort key will overlap over features with a lower sort key.","sdk-support":{"basic functionality":{"js":"0.53.0","android":"7.4.0","ios":"4.11.0"},"data-driven styling":{"js":"0.53.0","android":"7.4.0","ios":"4.11.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{"doc":"Sorts symbols by `symbol-sort-key` if set. Otherwise, sorts symbols by their y-position relative to the viewport if `icon-allow-overlap` or `text-allow-overlap` is set to `true` or `icon-ignore-placement` or `text-ignore-placement` is `false`."},"viewport-y":{"doc":"Sorts symbols by their y-position relative to the viewport if `icon-allow-overlap` or `text-allow-overlap` is set to `true` or `icon-ignore-placement` or `text-ignore-placement` is `false`."},"source":{"doc":"Sorts symbols by `symbol-sort-key` if set. Otherwise, no sorting is applied; symbols are rendered in the same order as the source data."}},"default":"auto","doc":"Determines whether overlapping symbols in the same layer are rendered in the order that they appear in the data source or by their y-position relative to the viewport. To control the order and prioritization of symbols otherwise, use `symbol-sort-key`.","sdk-support":{"basic functionality":{"js":"0.49.0","android":"6.6.0","ios":"4.5.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"doc":"If true, the icon will be visible even if it collides with other previously drawn symbols.","requires":["icon-image",{"!":"icon-overlap"}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-overlap":{"type":"enum","values":{"never":{"doc":"The icon will be hidden if it collides with any other previously drawn symbol."},"always":{"doc":"The icon will be visible even if it collides with any other previously drawn symbol."},"cooperative":{"doc":"If the icon collides with another previously drawn symbol, the overlap mode for that symbol is checked. If the previous symbol was placed using `never` overlap mode, the new icon is hidden. If the previous symbol was placed using `always` or `cooperative` overlap mode, the new icon is visible."}},"doc":"Allows for control over whether to show an icon when it overlaps other symbols on the map. If `icon-overlap` is not set, `icon-allow-overlap` is used instead.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"2.1.0","android":"https://github.com/maplibre/maplibre-native/issues/251","ios":"https://github.com/maplibre/maplibre-native/issues/251"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"doc":"If true, other symbols can be visible even if they collide with the icon.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"doc":"If true, text will display without their corresponding icons when the icon collides with other symbols and the text does not.","requires":["icon-image","text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{"doc":"When `symbol-placement` is set to `point`, aligns icons east-west. When `symbol-placement` is set to `line` or `line-center`, aligns icon x-axes with the line."},"viewport":{"doc":"Produces icons whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},"auto":{"doc":"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},"default":"auto","doc":"In combination with `symbol-placement`, determines the rotation behavior of icons.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"`auto` value":{"js":"0.25.0","android":"4.2.0","ios":"3.4.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","doc":"Scales the original size of the icon by the provided factor. The new pixel size of the image will be the original pixel size multiplied by `icon-size`. 1 is the original size; 3 triples the size of the image.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.35.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{"doc":"The icon is displayed at its intrinsic aspect ratio."},"width":{"doc":"The icon is scaled in the x-dimension to fit the width of the text."},"height":{"doc":"The icon is scaled in the y-dimension to fit the height of the text."},"both":{"doc":"The icon is scaled in both x- and y-dimensions."}},"default":"none","doc":"Scales the icon to fit around the associated text.","requires":["icon-image","text-field"],"sdk-support":{"basic functionality":{"js":"0.21.0","android":"4.2.0","ios":"3.4.0"},"stretchable icons":{"js":"1.6.0","android":"9.2.0","ios":"5.8.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","doc":"Size of the additional area added to dimensions determined by `icon-text-fit`, in clockwise order: top, right, bottom, left.","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"sdk-support":{"basic functionality":{"js":"0.21.0","android":"4.2.0","ios":"3.4.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","doc":"Name of image in sprite to use for drawing an image background.","tokens":true,"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.35.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","doc":"Rotates the icon clockwise.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.21.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"padding","default":[2],"units":"pixels","doc":"Size of additional area round the icon bounding box used for detecting symbol collisions.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"2.2.0","android":"https://github.com/maplibre/maplibre-native/issues/2754","ios":"https://github.com/maplibre/maplibre-native/issues/2754"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{"type":"boolean","default":false,"doc":"If true, the icon may be flipped to prevent it from being rendered upside-down.","requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"doc":"Offset distance of icon from its anchor. Positive values indicate right and down, while negative values indicate left and up. Each component is multiplied by the value of `icon-size` to obtain the final offset in pixels. When combined with `icon-rotate` the offset will be as if the rotated direction was up.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.29.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{"doc":"The center of the icon is placed closest to the anchor."},"left":{"doc":"The left side of the icon is placed closest to the anchor."},"right":{"doc":"The right side of the icon is placed closest to the anchor."},"top":{"doc":"The top of the icon is placed closest to the anchor."},"bottom":{"doc":"The bottom of the icon is placed closest to the anchor."},"top-left":{"doc":"The top left corner of the icon is placed closest to the anchor."},"top-right":{"doc":"The top right corner of the icon is placed closest to the anchor."},"bottom-left":{"doc":"The bottom left corner of the icon is placed closest to the anchor."},"bottom-right":{"doc":"The bottom right corner of the icon is placed closest to the anchor."}},"default":"center","doc":"Part of the icon placed closest to the anchor.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.40.0","android":"5.2.0","ios":"3.7.0"},"data-driven styling":{"js":"0.40.0","android":"5.2.0","ios":"3.7.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{"doc":"The icon is aligned to the plane of the map."},"viewport":{"doc":"The icon is aligned to the plane of the viewport."},"auto":{"doc":"Automatically matches the value of `icon-rotation-alignment`."}},"default":"auto","doc":"Orientation of icon when map is pitched.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.39.0","android":"5.2.0","ios":"3.7.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{"doc":"The text is aligned to the plane of the map."},"viewport":{"doc":"The text is aligned to the plane of the viewport."},"auto":{"doc":"Automatically matches the value of `text-rotation-alignment`."}},"default":"auto","doc":"Orientation of text when map is pitched.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.21.0","android":"4.2.0","ios":"3.4.0"},"`auto` value":{"js":"0.25.0","android":"4.2.0","ios":"3.4.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{"doc":"When `symbol-placement` is set to `point`, aligns text east-west. When `symbol-placement` is set to `line` or `line-center`, aligns text x-axes with the line."},"viewport":{"doc":"Produces glyphs whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},"viewport-glyph":{"doc":"When `symbol-placement` is set to `point`, aligns text to the x-axis of the viewport. When `symbol-placement` is set to `line` or `line-center`, aligns glyphs to the x-axis of the viewport and places them along the line."},"auto":{"doc":"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},"default":"auto","doc":"In combination with `symbol-placement`, determines the rotation behavior of the individual glyphs forming the text.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"`auto` value":{"js":"0.25.0","android":"4.2.0","ios":"3.4.0"},"`viewport-glyph` value":{"js":"2.1.8","android":"https://github.com/maplibre/maplibre-native/issues/250","ios":"https://github.com/maplibre/maplibre-native/issues/250"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"doc":"Value to use for a text label. If a plain `string` is provided, it will be treated as a `formatted` with default/inherited formatting options.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.33.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"doc":"Font stack to use for displaying text.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.43.0","android":"6.0.0","ios":"4.0.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","doc":"Font size.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.35.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","doc":"The maximum line width for text wrapping.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.40.0","android":"5.2.0","ios":"3.7.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","doc":"Text leading value for multi-line text.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","doc":"Text tracking amount.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.40.0","android":"5.2.0","ios":"3.7.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{"doc":"The text is aligned towards the anchor position."},"left":{"doc":"The text is aligned to the left."},"center":{"doc":"The text is centered."},"right":{"doc":"The text is aligned to the right."}},"default":"center","doc":"Text justification options.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.39.0","android":"5.2.0","ios":"3.7.0"},"auto":{"js":"0.54.0","android":"7.4.0","ios":"4.10.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"doc":"Radial offset of text, in the direction of the symbol\'s anchor. Useful in combination with `text-variable-anchor`, which defaults to using the two-dimensional `text-offset` if present.","sdk-support":{"basic functionality":{"js":"0.54.0","android":"7.4.0","ios":"4.10.0"},"data-driven styling":{"js":"0.54.0","android":"7.4.0","ios":"4.10.0"}},"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{"doc":"The center of the text is placed closest to the anchor."},"left":{"doc":"The left side of the text is placed closest to the anchor."},"right":{"doc":"The right side of the text is placed closest to the anchor."},"top":{"doc":"The top of the text is placed closest to the anchor."},"bottom":{"doc":"The bottom of the text is placed closest to the anchor."},"top-left":{"doc":"The top left corner of the text is placed closest to the anchor."},"top-right":{"doc":"The top right corner of the text is placed closest to the anchor."},"bottom-left":{"doc":"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{"doc":"The bottom right corner of the text is placed closest to the anchor."}},"requires":["text-field",{"symbol-placement":["point"]}],"doc":"To increase the chance of placing high-priority labels on the map, you can provide an array of `text-anchor` locations: the renderer will attempt to place the label at each location, in order, before moving onto the next label. Use `text-justify: auto` to choose justification based on anchor position. To apply an offset, use the `text-radial-offset` or the two-dimensional `text-offset`.","sdk-support":{"basic functionality":{"js":"0.54.0","android":"7.4.0","ios":"4.10.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{"type":"variableAnchorOffsetCollection","requires":["text-field",{"symbol-placement":["point"]}],"doc":"To increase the chance of placing high-priority labels on the map, you can provide an array of `text-anchor` locations, each paired with an offset value. The renderer will attempt to place the label at each location, in order, before moving on to the next location+offset. Use `text-justify: auto` to choose justification based on anchor position. \\n\\n The length of the array must be even, and must alternate between enum and point entries. i.e., each anchor location must be accompanied by a point, and that point defines the offset when the corresponding anchor location is used. Positive offset values indicate right and down, while negative values indicate left and up. Anchor locations may repeat, allowing the renderer to try multiple offsets to try and place a label using the same anchor. \\n\\n When present, this property takes precedence over `text-anchor`, `text-variable-anchor`, `text-offset`, and `text-radial-offset`. \\n\\n ```json \\n\\n { \\"text-variable-anchor-offset\\": [\\"top\\", [0, 4], \\"left\\", [3,0], \\"bottom\\", [1, 1]] } \\n\\n ``` \\n\\n When the renderer chooses the `top` anchor, `[0, 4]` will be used for `text-offset`; the text will be shifted down by 4 ems. \\n\\n When the renderer chooses the `left` anchor, `[3, 0]` will be used for `text-offset`; the text will be shifted right by 3 ems.","sdk-support":{"basic functionality":{"js":"3.3.0","ios":"6.8.0","android":"11.6.0"},"data-driven styling":{"js":"3.3.0","ios":"https://github.com/maplibre/maplibre-native/issues/2358","android":"https://github.com/maplibre/maplibre-native/issues/2358"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{"type":"enum","values":{"center":{"doc":"The center of the text is placed closest to the anchor."},"left":{"doc":"The left side of the text is placed closest to the anchor."},"right":{"doc":"The right side of the text is placed closest to the anchor."},"top":{"doc":"The top of the text is placed closest to the anchor."},"bottom":{"doc":"The bottom of the text is placed closest to the anchor."},"top-left":{"doc":"The top left corner of the text is placed closest to the anchor."},"top-right":{"doc":"The top right corner of the text is placed closest to the anchor."},"bottom-left":{"doc":"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{"doc":"The bottom right corner of the text is placed closest to the anchor."}},"default":"center","doc":"Part of the text placed closest to the anchor.","requires":["text-field",{"!":"text-variable-anchor"}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.39.0","android":"5.2.0","ios":"3.7.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","doc":"Maximum angle change between adjacent characters.","requires":["text-field",{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{"doc":"If a text\'s language supports horizontal writing mode, symbols with point placement would be laid out horizontally."},"vertical":{"doc":"If a text\'s language supports vertical writing mode, symbols with point placement would be laid out vertically."}},"doc":"The property allows control over a symbol\'s orientation. Note that the property values act as a hint, so that a symbol whose language doesnt support the provided orientation will be laid out in its natural orientation. Example: English point symbol will be rendered horizontally even if array value contains single \'vertical\' enum value. The order of elements in an array define priority order for the placement of an orientation variant.","requires":["text-field",{"symbol-placement":["point"]}],"sdk-support":{"basic functionality":{"js":"1.3.0","android":"8.3.0","ios":"5.3.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","doc":"Rotates the text clockwise.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.35.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","doc":"Size of the additional area around the text bounding box used for detecting symbol collisions.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"doc":"If true, the text may be flipped vertically to prevent it from being rendered upside-down.","requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{"doc":"The text is not altered."},"uppercase":{"doc":"Forces all letters to be displayed in uppercase."},"lowercase":{"doc":"Forces all letters to be displayed in lowercase."}},"default":"none","doc":"Specifies how to capitalize text, similar to the CSS `text-transform` property.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.33.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","doc":"Offset distance of text from its anchor. Positive values indicate right and down, while negative values indicate left and up. If used with text-variable-anchor, input values will be taken as absolute values. Offsets along the x- and y-axis will be applied automatically based on the anchor position.","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.35.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"doc":"If true, the text will be visible even if it collides with other previously drawn symbols.","requires":["text-field",{"!":"text-overlap"}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-overlap":{"type":"enum","values":{"never":{"doc":"The text will be hidden if it collides with any other previously drawn symbol."},"always":{"doc":"The text will be visible even if it collides with any other previously drawn symbol."},"cooperative":{"doc":"If the text collides with another previously drawn symbol, the overlap mode for that symbol is checked. If the previous symbol was placed using `never` overlap mode, the new text is hidden. If the previous symbol was placed using `always` or `cooperative` overlap mode, the new text is visible."}},"doc":"Allows for control over whether to show symbol text when it overlaps other symbols on the map. If `text-overlap` is not set, `text-allow-overlap` is used instead","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"2.1.0","android":"https://github.com/maplibre/maplibre-native/issues/251","ios":"https://github.com/maplibre/maplibre-native/issues/251"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"doc":"If true, other symbols can be visible even if they collide with the text.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"doc":"If true, icons will display without their corresponding text when the text collides with other symbols and the icon does not.","requires":["text-field","icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{"doc":"The layer is shown."},"none":{"doc":"The layer is not shown."}},"default":"visible","doc":"Whether this layer is displayed.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"property-type":"constant"}}'),Jae={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},"property-type":"constant"}},ele={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},"property-type":"constant"}},tle={type:"array",value:"*",doc:"A filter selects specific features from a layer."},nle={type:"enum",values:{"==":{doc:'`["==", key, value]` equality: `feature[key] = value`'},"!=":{doc:'`["!=", key, value]` inequality: `feature[key]  value`'},">":{doc:'`[">", key, value]` greater than: `feature[key] > value`'},">=":{doc:'`[">=", key, value]` greater than or equal: `feature[key]  value`'},"<":{doc:'`["<", key, value]` less than: `feature[key] < value`'},"<=":{doc:'`["<=", key, value]` less than or equal: `feature[key]  value`'},in:{doc:'`["in", key, v0, ..., vn]` set inclusion: `feature[key]  {v0, ..., vn}`'},"!in":{doc:'`["!in", key, v0, ..., vn]` set exclusion: `feature[key]  {v0, ..., vn}`'},all:{doc:'`["all", f0, ..., fn]` logical `AND`: `f0  ...  fn`'},any:{doc:'`["any", f0, ..., fn]` logical `OR`: `f0  ...  fn`'},none:{doc:'`["none", f0, ..., fn]` logical `NOR`: `f0  ...  fn`'},has:{doc:'`["has", key]` `feature[key]` exists'},"!has":{doc:'`["!has", key]` `feature[key]` does not exist'}},doc:"The filter operator."},rle={type:"enum",values:{Point:{doc:"Filter to point geometries."},LineString:{doc:"Filter to line geometries."},Polygon:{doc:"Filter to polygon geometries."}},doc:"The geometry type for the filter to select."},ile={type:"array",minimum:0,maximum:24,value:["number","color"],length:2,doc:"Zoom level and value pair."},ole={type:"array",value:"*",minimum:1,doc:"An expression defines a function that can be used for data-driven style properties or feature filters."},sle=JSON.parse('{"doc":"","type":"enum","values":{"let":{"doc":"Binds expressions to named variables, which can then be referenced in the result expression using `[\\"var\\", \\"variable_name\\"]`.\\n\\n - [Visualize population density](https://maplibre.org/maplibre-gl-js/docs/examples/visualize-population-density/)","example":{"syntax":{"method":["string","value","expression"],"result":"value"},"value":["let","someNumber",500,["interpolate",["linear"],["var","someNumber"],274,"#edf8e9",1551,"#006d2c"]]},"group":"Variable binding","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"var":{"doc":"References variable bound using `let`.\\n\\n - [Visualize population density](https://maplibre.org/maplibre-gl-js/docs/examples/visualize-population-density/)","example":{"syntax":{"method":["string"],"result":"value"},"value":["var","density"]},"group":"Variable binding","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"literal":{"doc":"Provides a literal array or object value.\\n\\n - [Display and style rich text labels](https://maplibre.org/maplibre-gl-js/docs/examples/display-and-style-rich-text-labels/)","example":{"syntax":{"method":["JSON object or array"],"result":"array | object"},"value":["literal",["DIN Offc Pro Italic","Arial Unicode MS Regular"]]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"array":{"doc":"Asserts that the input is an array (optionally with a specific item type and length). If, when the input expression is evaluated, it is not of the asserted type, then this assertion will cause the whole expression to be aborted.","example":{"syntax":{"method":["value","string?","number?"],"result":"array"},"value":["array",["literal",["a","b","c"]],"string",3]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"at":{"doc":"Retrieves an item from an array.","example":{"syntax":{"method":["number","value"],"result":"value"},"value":["at",1,["literal",["a","b","c"]]]},"group":"Lookup","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"in":{"doc":"Determines whether an item exists in an array or a substring exists in a string.\\n\\n - [Measure distances](https://maplibre.org/maplibre-gl-js/docs/examples/measure/)","example":{"syntax":{"method":["value","value"],"result":"boolean"},"value":["in","$type","Point"]},"group":"Lookup","sdk-support":{"basic functionality":{"js":"1.6.0","android":"9.1.0","ios":"5.8.0"}}},"index-of":{"doc":"Returns the first position at which an item can be found in an array or a substring can be found in a string, or `-1` if the input cannot be found. Accepts an optional index from where to begin the search. In a string, a UTF-16 surrogate pair counts as a single position.","example":{"syntax":{"method":["value","value","number?"],"result":"number"},"value":["index-of","foo",["baz","bar","hello","foo","world"]]},"group":"Lookup","sdk-support":{"basic functionality":{"js":"1.10.0","android":"10.3.0","ios":"6.0.0"}}},"slice":{"doc":"Returns an item from an array or a substring from a string from a specified start index, or between a start index and an end index if set. The return value is inclusive of the start index but not of the end index. In a string, a UTF-16 surrogate pair counts as a single position.","example":{"syntax":{"method":["value","number","number?"],"result":"value"},"value":["slice",["get","name"],0,3]},"group":"Lookup","sdk-support":{"basic functionality":{"js":"1.10.0","android":"10.3.0","ios":"6.0.0"}}},"case":{"doc":"Selects the first output whose corresponding test condition evaluates to true, or the fallback value otherwise.\\n\\n - [Create a hover effect](https://maplibre.org/maplibre-gl-js/docs/examples/hover-styles/)\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/cluster-html/)","example":{"syntax":{"method":["value","value","...","fallback: value"],"result":"value"},"value":["case",["boolean",["feature-state","hover"],false],1,0.5]},"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"match":{"doc":"Selects the output whose label value matches the input value, or the fallback value if no match is found. The input can be any expression (e.g. `[\\"get\\", \\"building_type\\"]`). Each label must be either:\\n\\n - a single literal value; or\\n\\n - an array of literal values, whose values must be all strings or all numbers (e.g. `[100, 101]` or `[\\"c\\", \\"b\\"]`). The input matches if any of the values in the array matches, similar to the `\\"in\\"` operator.\\n\\nEach label must be unique. If the input type does not match the type of the labels, the result will be the fallback value.","example":{"syntax":{"method":["value","value","...","fallback: value"],"result":"value"},"value":["match",["get","building_type"],"residential","#f00","commercial","#0f0","#000"]},"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"coalesce":{"doc":"Evaluates each expression in turn until the first non-null value is obtained, and returns that value.\\n\\n - [Use a fallback image](https://maplibre.org/maplibre-gl-js/docs/examples/fallback-image/)","example":{"syntax":{"method":["coalesce","value","fallback"],"result":"value"},"value":["coalesce",["image",["concat",["get","icon"],"_15"]],["image","marker_15"]]},"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"step":{"doc":"Produces discrete, stepped results by evaluating a piecewise-constant function defined by pairs of input and output values (\\"stops\\"). The `input` may be any numeric expression (e.g., `[\\"get\\", \\"population\\"]`). Stop inputs must be numeric literals in strictly ascending order. Returns the output value of the stop just less than the input, or the first output if the input is less than the first stop.\\n\\n - [Create and style clusters](https://maplibre.org/maplibre-gl-js/docs/examples/cluster/)","example":{"syntax":{"method":["step","number","number","number","..."],"result":"number"},"value":["step",["get","point_count"],20,100,30,750,40]},"group":"Ramps, scales, curves","sdk-support":{"basic functionality":{"js":"0.42.0","android":"6.0.0","ios":"4.0.0"}}},"interpolate":{"doc":"Produces continuous, smooth results by interpolating between pairs of input and output values (\\"stops\\"). The `input` may be any numeric expression (e.g., `[\\"get\\", \\"population\\"]`). Stop inputs must be numeric literals in strictly ascending order. The output type must be `number`, `array<number>`, or `color`.\\n\\nInterpolation types:\\n\\n- `[\\"linear\\"]`, or an expression returning one of those types: Interpolates linearly between the pair of stops just less than and just greater than the input.\\n\\n- `[\\"exponential\\", base]`: Interpolates exponentially between the stops just less than and just greater than the input. `base` controls the rate at which the output increases: higher values make the output increase more towards the high end of the range. With values close to 1 the output increases linearly.\\n\\n- `[\\"cubic-bezier\\", x1, y1, x2, y2]`: Interpolates using the cubic bezier curve defined by the given control points.\\n\\n - [Animate map camera around a point](https://maplibre.org/maplibre-gl-js/docs/examples/animate-camera-around-point/)\\n\\n - [Change building color based on zoom level](https://maplibre.org/maplibre-gl-js/docs/examples/change-building-color-based-on-zoom-level/)\\n\\n - [Create a heatmap layer](https://maplibre.org/maplibre-gl-js/docs/examples/heatmap-layer/)\\n\\n - [Visualize population density](https://maplibre.org/maplibre-gl-js/docs/examples/visualize-population-density/)","example":{"syntax":{"method":["[\\"linear\\"] | [\\"exponential\\", base] | [\\"cubic-bezier\\", x1, y1, x2, y2]","number","number","number","..."],"result":"number | array<number> | color"},"value":["interpolate",["linear"],["zoom"],15,0,15.05,["get","height"]]},"group":"Ramps, scales, curves","sdk-support":{"basic functionality":{"js":"0.42.0","android":"6.0.0","ios":"4.0.0"}}},"interpolate-hcl":{"doc":"Produces continuous, smooth results by interpolating between pairs of input and output values (\\"stops\\"). Works like `interpolate`, but the output type must be `color`, and the interpolation is performed in the Hue-Chroma-Luminance color space.","example":{"syntax":{"method":["[\\"linear\\"] | [\\"exponential\\", base] | [\\"cubic-bezier\\", x1, y1, x2, y2]","number","number","number","..."],"result":"color"},"value":["interpolate-hcl",["linear"],["zoom"],15,"#f00",15.05,"#00f"]},"group":"Ramps, scales, curves","sdk-support":{"basic functionality":{"js":"0.49.0","ios":"https://github.com/maplibre/maplibre-native/issues/2784","android":"https://github.com/maplibre/maplibre-native/issues/2784"}}},"interpolate-lab":{"doc":"Produces continuous, smooth results by interpolating between pairs of input and output values (\\"stops\\"). Works like `interpolate`, but the output type must be `color`, and the interpolation is performed in the CIELAB color space.","example":{"syntax":{"method":["[\\"linear\\"] | [\\"exponential\\", base] | [\\"cubic-bezier\\", x1, y1, x2, y2]","number","number","number","..."],"result":"color"},"value":["interpolate-lab",["linear"],["zoom"],15,"#f00",15.05,"#00f"]},"group":"Ramps, scales, curves","sdk-support":{"basic functionality":{"js":"0.49.0","ios":"https://github.com/maplibre/maplibre-native/issues/2784","android":"https://github.com/maplibre/maplibre-native/issues/2784"}}},"ln2":{"doc":"Returns mathematical constant ln(2).","example":{"syntax":{"method":[],"result":"number"},"value":["ln2"]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"pi":{"doc":"Returns the mathematical constant pi.","example":{"syntax":{"method":[],"result":"number"},"value":["pi"]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"e":{"doc":"Returns the mathematical constant e.","example":{"syntax":{"method":[],"result":"number"},"value":["e"]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"typeof":{"doc":"Returns a string describing the type of the given value.","example":{"syntax":{"method":["value"],"result":"string"},"value":["typeof",["get","name"]]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"string":{"doc":"Asserts that the input value is a string. If multiple values are provided, each one is evaluated in order until a string is obtained. If none of the inputs are strings, the expression is an error.","example":{"syntax":{"method":["value","fallback: value","fallback: value","..."],"result":"string"},"value":["string",["get","name"]]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"number":{"doc":"Asserts that the input value is a number. If multiple values are provided, each one is evaluated in order until a number is obtained. If none of the inputs are numbers, the expression is an error.","example":{"syntax":{"method":["value","fallback: value","fallback: value","..."],"result":"number"},"value":["number",["get","population"]]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"boolean":{"doc":"Asserts that the input value is a boolean. If multiple values are provided, each one is evaluated in order until a boolean is obtained. If none of the inputs are booleans, the expression is an error.\\n\\n - [Create a hover effect](https://maplibre.org/maplibre-gl-js/docs/examples/hover-styles/)","example":{"syntax":{"method":["value","fallback: value","fallback: value","..."],"result":"boolean"},"value":["boolean",["feature-state","hover"],false]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"object":{"doc":"Asserts that the input value is an object. If multiple values are provided, each one is evaluated in order until an object is obtained. If none of the inputs are objects, the expression is an error.","example":{"syntax":{"method":["value","fallback: value","fallback: value","..."],"result":"object"},"value":["object",["get","some-property"]]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"collator":{"doc":"Returns a `collator` for use in locale-dependent comparison operations. The `case-sensitive` and `diacritic-sensitive` options default to `false`. The `locale` argument specifies the IETF language tag of the locale to use. If none is provided, the default locale is used. If the requested locale is not available, the `collator` will use a system-defined fallback locale. Use `resolved-locale` to test the results of locale fallback behavior.","example":{"syntax":{"method":["collator","{ \\"case-sensitive\\": boolean, \\"diacritic-sensitive\\": boolean, \\"locale\\": string }"],"result":"collator"},"value":["collator",{"case-sensitive":true,"diacritic-sensitive":true,"locale":"fr"}]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},"format":{"doc":"Returns a `formatted` string for displaying mixed-format text in the `text-field` property. The input may contain a string literal or expression, including an [`\'image\'`](#image) expression. Strings may be followed by a style override object that supports the following properties:\\n\\n- `\\"text-font\\"`: Overrides the font stack specified by the root layout property.\\n\\n- `\\"text-color\\"`: Overrides the color specified by the root paint property.\\n\\n- `\\"font-scale\\"`: Applies a scaling factor on `text-size` as specified by the root layout property.\\n\\n- `\\"vertical-align\\"`: Aligns vertically text section or image in relation to the row it belongs to. Possible values are: \\n\\t- `\\"bottom\\"` *default*: align the bottom of this section with the bottom of other sections.\\n<img alt=\\"Visual representation of bottom alignment\\" src=\\"https://github.com/user-attachments/assets/0474a2fd-a4b2-417c-9187-7a13a28695bc\\"/>\\n\\t- `\\"center\\"`: align the center of this section with the center of other sections.\\n<img alt=\\"Visual representation of center alignment\\" src=\\"https://github.com/user-attachments/assets/92237455-be6d-4c5d-b8f6-8127effc1950\\"/>\\n\\t- `\\"top\\"`: align the top of this section with the top of other sections.\\n<img alt=\\"Visual representation of top alignment\\" src=\\"https://github.com/user-attachments/assets/45dccb28-d977-4abb-a006-4ea9792b7c53\\"/>\\n\\t- Refer to [the design proposal](https://github.com/maplibre/maplibre-style-spec/issues/832) for more details.\\n\\n - [Change the case of labels](https://maplibre.org/maplibre-gl-js/docs/examples/change-case-of-labels/)\\n\\n - [Display and style rich text labels](https://maplibre.org/maplibre-gl-js/docs/examples/display-and-style-rich-text-labels/)","example":{"syntax":{"method":["value","{ \\"text-font\\": string, \\"text-color\\": color, \\"font-scale\\": number, \\"vertical-align\\": \\"bottom\\" | \\"center\\" | \\"top\\" }","..."],"result":"formatted"},"value":["format",["upcase",["get","FacilityName"]],{"font-scale":0.8},"\\n\\n",{},["downcase",["get","Comments"]],{"font-scale":0.6,"vertical-align":"center"}]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.48.0","android":"6.7.0","ios":"4.6.0"},"text-font":{"js":"0.48.0","android":"6.7.0","ios":"4.6.0"},"font-scale":{"js":"0.48.0","android":"6.7.0","ios":"4.6.0"},"text-color":{"js":"1.3.0","android":"7.3.0","ios":"4.10.0"},"vertical-align":{"js":"https://github.com/maplibre/maplibre-gl-js/issues/5043","android":"https://github.com/maplibre/maplibre-native/issues/3055","ios":"https://github.com/maplibre/maplibre-native/issues/3055"},"image":{"js":"1.6.0","android":"8.6.0","ios":"5.7.0"}}},"image":{"doc":"Returns an `image` type for use in `icon-image`, `*-pattern` entries and as a section in the `format` expression. If set, the `image` argument will check that the requested image exists in the style and will return either the resolved image name or `null`, depending on whether or not the image is currently in the style. This validation process is synchronous and requires the image to have been added to the style before requesting it in the `image` argument.\\n\\n - [Use a fallback image](https://maplibre.org/maplibre-gl-js/docs/examples/fallback-image/)","example":{"syntax":{"method":["value"],"result":"image"},"value":["image","marker_15"]},"group":"Types","sdk-support":{"basic functionality":{"js":"1.4.0","android":"8.6.0","ios":"5.7.0"}}},"number-format":{"doc":"Converts the input number into a string representation using the providing formatting rules. If set, the `locale` argument specifies the locale to use, as a BCP 47 language tag. If set, the `currency` argument specifies an ISO 4217 code to use for currency-style formatting. If set, the `min-fraction-digits` and `max-fraction-digits` arguments specify the minimum and maximum number of fractional digits to include.\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/cluster-html/)","example":{"syntax":{"method":["number","{ \\"locale\\": string, \\"currency\\": string, \\"min-fraction-digits\\": number, \\"max-fraction-digits\\": number }"],"result":"string"},"value":["number-format",["get","mag"],{"min-fraction-digits":1,"max-fraction-digits":1}]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.54.0","android":"8.4.0","ios":"supported"}}},"to-string":{"doc":"Converts the input value to a string. If the input is `null`, the result is `\\"\\"`. If the input is a boolean, the result is `\\"true\\"` or `\\"false\\"`. If the input is a number, it is converted to a string as specified by the [\\"NumberToString\\" algorithm](https://tc39.github.io/ecma262/#sec-tostring-applied-to-the-number-type) of the ECMAScript Language Specification. If the input is a color, it is converted to a string of the form `\\"rgba(r,g,b,a)\\"`, where `r`, `g`, and `b` are numerals ranging from 0 to 255, and `a` ranges from 0 to 1. Otherwise, the input is converted to a string in the format specified by the [`JSON.stringify`](https://tc39.github.io/ecma262/#sec-json.stringify) function of the ECMAScript Language Specification.\\n\\n - [Create a time slider](https://maplibre.org/maplibre-gl-js/docs/examples/timeline-animation/)","example":{"syntax":{"method":["value"],"result":"string"},"value":["to-string",["get","mag"]]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"to-number":{"doc":"Converts the input value to a number, if possible. If the input is `null` or `false`, the result is 0. If the input is `true`, the result is 1. If the input is a string, it is converted to a number as specified by the [\\"ToNumber Applied to the String Type\\" algorithm](https://tc39.github.io/ecma262/#sec-tonumber-applied-to-the-string-type) of the ECMAScript Language Specification. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.","example":{"syntax":{"method":["value","fallback: value","fallback: value","..."],"result":"number"},"value":["to-number","someProperty"]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"to-boolean":{"doc":"Converts the input value to a boolean. The result is `false` when then input is an empty string, 0, `false`, `null`, or `NaN`; otherwise it is `true`.","example":{"syntax":{"method":["value"],"result":"boolean"},"value":["to-boolean","someProperty"]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"to-rgba":{"doc":"Returns a four-element array containing the input color\'s red, green, blue, and alpha components, in that order.","example":{"syntax":{"method":["color"],"result":"array"},"value":["to-rgba","#ff0000"]},"group":"Color","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"to-color":{"doc":"Converts the input value to a color. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.\\n\\n - [Visualize population density](https://maplibre.org/maplibre-gl-js/docs/examples/visualize-population-density/)","example":{"syntax":{"method":["value","fallback: value","fallback: value","..."],"result":"color"},"value":["to-color","#edf8e9"]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"rgb":{"doc":"Creates a color value from red, green, and blue components, which must range between 0 and 255, and an alpha component of 1. If any component is out of range, the expression is an error.","example":{"syntax":{"method":["number","number","number"],"result":"color"},"value":["rgb",255,0,0]},"group":"Color","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"rgba":{"doc":"Creates a color value from red, green, blue components, which must range between 0 and 255, and an alpha component which must range between 0 and 1. If any component is out of range, the expression is an error.","example":{"syntax":{"method":["number","number","number","number"],"result":"color"},"value":["rgba",255,0,0,1]},"group":"Color","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"get":{"doc":"Retrieves a property value from the current feature\'s properties, or from another object if a second argument is provided. Returns null if the requested property is missing.\\n\\n - [Change the case of labels](https://maplibre.org/maplibre-gl-js/docs/examples/change-case-of-labels/)\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/cluster-html/)\\n\\n - [Extrude polygons for 3D indoor mapping](https://maplibre.org/maplibre-gl-js/docs/examples/3d-extrusion-floorplan/)","example":{"syntax":{"method":["string"],"result":"value"},"value":["get","someProperty"]},"group":"Lookup","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"has":{"doc":"Tests for the presence of an property value in the current feature\'s properties, or from another object if a second argument is provided.\\n\\n - [Create and style clusters](https://maplibre.org/maplibre-gl-js/docs/examples/cluster/)","example":{"syntax":{"method":["string"],"result":"boolean"},"value":["has","someProperty"]},"group":"Lookup","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"length":{"doc":"Gets the length of an array or string. In a string, a UTF-16 surrogate pair counts as a single position.","example":{"syntax":{"method":["array"],"result":"number"},"value":["length",["get","myArray"]]},"group":"Lookup","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"properties":{"doc":"Gets the feature properties object.  Note that in some cases, it may be more efficient to use [\\"get\\", \\"property_name\\"] directly.","example":{"syntax":{"method":[],"result":"value"},"value":["properties"]},"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"feature-state":{"doc":"Retrieves a property value from the current feature\'s state. Returns null if the requested property is not present on the feature\'s state. A feature\'s state is not part of the GeoJSON or vector tile data, and must be set programmatically on each feature. When `source.promoteId` is not provided, features are identified by their `id` attribute, which must be an integer or a string that can be cast to an integer. When `source.promoteId` is provided, features are identified by their `promoteId` property, which may be a number, string, or any primitive data type. Note that [\\"feature-state\\"] can only be used with paint properties that support data-driven styling.\\n\\n - [Create a hover effect](https://maplibre.org/maplibre-gl-js/docs/examples/hover-styles/)","example":{"syntax":{"method":["string"],"result":"value"},"value":["feature-state","hover"]},"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.46.0","ios":"https://github.com/maplibre/maplibre-native/issues/1698","android":"https://github.com/maplibre/maplibre-native/issues/1698"}}},"geometry-type":{"doc":"Returns the feature\'s simple geometry type: `Point`, `LineString`, or `Polygon`. `MultiPoint`, `MultiLineString`, and `MultiPolygon` are returned as `Point`, `LineString`, and `Polygon`, respectively.","example":{"syntax":{"method":[],"result":"string"},"value":["==",["geometry-type"],"Polygon"]},"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"id":{"doc":"Gets the feature\'s id, if it has one.","example":{"syntax":{"method":[],"result":"value"},"value":["id"]},"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"zoom":{"doc":"Gets the current zoom level.  Note that in style layout and paint properties, [\\"zoom\\"] may only appear as the input to a top-level \\"step\\" or \\"interpolate\\" expression.","example":{"syntax":{"method":[],"result":"number"},"value":["interpolate",["linear"],["zoom"],15,0,15.05,["get","height"]]},"group":"Zoom","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"heatmap-density":{"doc":"Gets the kernel density estimation of a pixel in a heatmap layer, which is a relative measure of how many data points are crowded around a particular pixel. Can only be used in the `heatmap-color` property.","example":{"syntax":{"method":[],"result":"number"},"value":["heatmap-density"]},"group":"Heatmap","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"line-progress":{"doc":"Gets the progress along a gradient line. Can only be used in the `line-gradient` property.","example":{"syntax":{"method":["number"],"result":"number"},"value":["line-progress",0.5]},"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.5.0","ios":"4.6.0"}}},"accumulated":{"doc":"Gets the value of a cluster property accumulated so far. Can only be used in the `clusterProperties` option of a clustered GeoJSON source.","example":{"syntax":{"method":["string"],"result":"value"},"value":["accumulated","sum"]},"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.53.0","ios":"supported","android":"supported"}}},"+":{"doc":"Returns the sum of the inputs.","example":{"syntax":{"method":["number","number","..."],"result":"number"},"value":["+",2,3]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"*":{"doc":"Returns the product of the inputs.","example":{"syntax":{"method":["number","number","..."],"result":"number"},"value":["*",2,3]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"-":{"doc":"For two inputs, returns the result of subtracting the second input from the first. For a single input, returns the result of subtracting it from 0.","example":{"syntax":{"method":["number","number?"],"result":"number"},"value":["-",10]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"/":{"doc":"Returns the result of floating point division of the first input by the second.\\n\\n - [Visualize population density](https://maplibre.org/maplibre-gl-js/docs/examples/visualize-population-density/)","example":{"syntax":{"method":["number","number"],"result":"number"},"value":["/",["get","population"],["get","sq-km"]]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"%":{"doc":"Returns the remainder after integer division of the first input by the second.","example":{"syntax":{"method":["number","number"],"result":"number"},"value":["%",10,3]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"^":{"doc":"Returns the result of raising the first input to the power specified by the second.","example":{"syntax":{"method":["number","number"],"result":"number"},"value":["^",2,3]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"sqrt":{"doc":"Returns the square root of the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["sqrt",9]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.42.0","android":"6.0.0","ios":"4.0.0"}}},"log10":{"doc":"Returns the base-ten logarithm of the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["log10",8]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"ln":{"doc":"Returns the natural logarithm of the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["ln",8]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"log2":{"doc":"Returns the base-two logarithm of the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["log2",8]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"sin":{"doc":"Returns the sine of the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["sin",1]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"cos":{"doc":"Returns the cosine of the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["cos",1]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"tan":{"doc":"Returns the tangent of the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["tan",1]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"asin":{"doc":"Returns the arcsine of the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["asin",1]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"acos":{"doc":"Returns the arccosine of the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["acos",1]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"atan":{"doc":"Returns the arctangent of the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["atan",1]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"min":{"doc":"Returns the minimum value of the inputs.","example":{"syntax":{"method":["number","number","..."],"result":"number"},"value":["min",1,2]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"max":{"doc":"Returns the maximum value of the inputs.","example":{"syntax":{"method":["number","number","..."],"result":"number"},"value":["max",1,2]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"round":{"doc":"Rounds the input to the nearest integer. Halfway values are rounded away from zero. For example, `[\\"round\\", -1.5]` evaluates to -2.","example":{"syntax":{"method":["number"],"result":"number"},"value":["round",1.5]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.0.0","ios":"4.0.0"}}},"abs":{"doc":"Returns the absolute value of the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["abs",-1.5]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.0.0","ios":"4.0.0"}}},"ceil":{"doc":"Returns the smallest integer that is greater than or equal to the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["ceil",1.5]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.0.0","ios":"4.0.0"}}},"floor":{"doc":"Returns the largest integer that is less than or equal to the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["floor",1.5]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.0.0","ios":"4.0.0"}}},"distance":{"doc":"Returns the shortest distance in meters between the evaluated feature and the input geometry. The input value can be a valid GeoJSON of type `Point`, `MultiPoint`, `LineString`, `MultiLineString`, `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Distance values returned may vary in precision due to loss in precision from encoding geometries, particularly below zoom level 13.","example":{"syntax":{"method":["GeoJSON geometry"],"result":"number"},"value":["distance",{"type":"Point","coordinates":[0,0]}]},"group":"Math","sdk-support":{"basic functionality":{"js":"4.2.0","android":"9.2.0","ios":"5.9.0"}}},"==":{"doc":"Returns `true` if the input values are equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.\\n\\n - [Add multiple geometries from one GeoJSON source](https://maplibre.org/maplibre-gl-js/docs/examples/multiple-geometries/)\\n\\n - [Create a time slider](https://maplibre.org/maplibre-gl-js/docs/examples/timeline-animation/)\\n\\n - [Display buildings in 3D](https://maplibre.org/maplibre-gl-js/docs/examples/3d-buildings/)\\n\\n - [Filter symbols by toggling a list](https://maplibre.org/maplibre-gl-js/docs/examples/filter-markers/)","example":{"syntax":{"method":["value","value","collator?"],"result":"boolean"},"value":["==","$type","Polygon"]},"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},"!=":{"doc":"Returns `true` if the input values are not equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/cluster-html/)","example":{"syntax":{"method":["value","value","collator?"],"result":"boolean"},"value":["!=","cluster",true]},"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},">":{"doc":"Returns `true` if the first input is strictly greater than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.","example":{"syntax":{"method":["value","value","collator?"],"result":"boolean"},"value":[">",["get","mag"],2]},"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},"<":{"doc":"Returns `true` if the first input is strictly less than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/cluster-html/)","example":{"syntax":{"method":["value","value","collator?"],"result":"boolean"},"value":["<",["get","mag"],2]},"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},">=":{"doc":"Returns `true` if the first input is greater than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/cluster-html/)","example":{"syntax":{"method":["value","value","collator?"],"result":"boolean"},"value":[">=",["get","mag"],6]},"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},"<=":{"doc":"Returns `true` if the first input is less than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.","example":{"syntax":{"method":["value","value","collator?"],"result":"boolean"},"value":["<=",["get","mag"],6]},"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},"all":{"doc":"Returns `true` if all the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `false`, the result is `false` and no further input expressions are evaluated.\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/cluster-html/)","example":{"syntax":{"method":["boolean","boolean","..."],"result":"boolean"},"value":["all",[">=",["get","mag"],4],["<",["get","mag"],5]]},"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"any":{"doc":"Returns `true` if any of the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `true`, the result is `true` and no further input expressions are evaluated.","example":{"syntax":{"method":["boolean","boolean","..."],"result":"boolean"},"value":["any",[">=",["get","mag"],4],["<",["get","mag"],5]]},"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"!":{"doc":"Logical negation. Returns `true` if the input is `false`, and `false` if the input is `true`.\\n\\n - [Create and style clusters](https://maplibre.org/maplibre-gl-js/docs/examples/cluster/)","example":{"syntax":{"method":["value","value","collator?"],"result":"boolean"},"value":["!",["has","point_count"]]},"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"within":{"doc":"Returns `true` if the evaluated feature is fully contained inside a boundary of the input geometry, `false` otherwise. The input value can be a valid GeoJSON of type `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Supported features for evaluation:\\n\\n- `Point`: Returns `false` if a point is on the boundary or falls outside the boundary.\\n\\n- `LineString`: Returns `false` if any part of a line falls outside the boundary, the line intersects the boundary, or a line\'s endpoint is on the boundary.","example":{"syntax":{"method":["GeoJSON geometry"],"result":"boolean"},"value":["within",{"type":"Polygon","coordinates":[[[0,0],[0,5],[5,5],[5,0],[0,0]]]}]},"group":"Decision","sdk-support":{"basic functionality":{"js":"1.9.0","android":"9.1.0","ios":"5.8.0"}}},"is-supported-script":{"doc":"Returns `true` if the input string is expected to render legibly. Returns `false` if the input string contains sections that cannot be rendered without potential loss of meaning (e.g. Indic scripts that require complex text shaping, or right-to-left scripts if the `mapbox-gl-rtl-text` plugin is not in use in MapLibre GL JS).","example":{"syntax":{"method":["string"],"result":"boolean"},"value":["is-supported-script",""]},"group":"String","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.6.0","ios":"supported"}}},"upcase":{"doc":"Returns the input string converted to uppercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.\\n\\n - [Change the case of labels](https://maplibre.org/maplibre-gl-js/docs/examples/change-case-of-labels/)","example":{"syntax":{"method":["string"],"result":"string"},"value":["upcase",["get","name"]]},"group":"String","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"downcase":{"doc":"Returns the input string converted to lowercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.\\n\\n - [Change the case of labels](https://maplibre.org/maplibre-gl-js/docs/examples/change-case-of-labels/)","example":{"syntax":{"method":["string"],"result":"string"},"value":["downcase",["get","name"]]},"group":"String","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"concat":{"doc":"Returns a `string` consisting of the concatenation of the inputs. Each input is converted to a string as if by `to-string`.\\n\\n - [Add a generated icon to the map](https://maplibre.org/maplibre-gl-js/docs/examples/add-image-missing-generated/)\\n\\n - [Create a time slider](https://maplibre.org/maplibre-gl-js/docs/examples/timeline-animation/)\\n\\n - [Use a fallback image](https://maplibre.org/maplibre-gl-js/docs/examples/fallback-image/)\\n\\n - [Variable label placement](https://maplibre.org/maplibre-gl-js/docs/examples/variable-label-placement/)","example":{"syntax":{"method":["string","string","..."],"result":"string"},"value":["concat","square-rgb-",["get","color"]]},"group":"String","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"resolved-locale":{"doc":"Returns the IETF language tag of the locale being used by the provided `collator`. This can be used to determine the default system locale, or to determine if a requested locale was successfully loaded.","example":{"syntax":{"method":["collator"],"result":"string"},"value":["resolved-locale",["collator",{"case-sensitive":true,"diacritic-sensitive":false,"locale":"de"}]]},"group":"String","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}}}}'),ale={anchor:{type:"enum",default:"viewport",values:{map:{doc:"The position of the light source is aligned to the rotation of the map."},viewport:{doc:"The position of the light source is aligned to the rotation of the viewport."}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]},doc:"Whether extruded geometries are lit relative to the map or viewport.",example:"map","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},doc:"Position of the light source relative to lit (extruded) geometries, in [r radial coordinate, a azimuthal angle, p polar angle] where r indicates the distance from the center of the base of an object to its light, a indicates the position of the light relative to 0 (0 when `light.anchor` is set to `viewport` corresponds to the top of the viewport, or 0 when `light.anchor` is set to `map` corresponds to due north, and degrees proceed clockwise), and p indicates the height of the light (from 0, directly above, to 180, directly below).",example:[1.5,90,80],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Color tint for lighting extruded geometries.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Intensity of lighting (on a scale from 0 to 1). Higher numbers will present as more extreme contrast.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}}},lle={"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The base color for the sky."},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The base color at the horizon."},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The base color for the fog. Requires 3D terrain."},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"How to blend the fog over the 3D terrain. Where 0 is the map center and 1 is the horizon."},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"How to blend the fog color and the horizon color. Where 0 is using the horizon color only and 1 is using the fog color only."},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"How to blend the sky color and the horizon color. Where 1 is blending the color at the middle of the sky and 0 is not blending at all and using the sky color only."},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"How to blend the atmosphere. Where 1 is visible atmosphere and 0 is hidden. It is best to interpolate this expression when using globe projection."}},ule={source:{type:"string",doc:"The source for the terrain data.",required:!0,"sdk-support":{"basic functionality":{js:"2.2.0",ios:"https://github.com/maplibre/maplibre-native/issues/252",android:"https://github.com/maplibre/maplibre-native/issues/252"}}},exaggeration:{type:"number",minimum:0,doc:"The exaggeration of the terrain - how high it will look.",default:1,"sdk-support":{"basic functionality":{js:"2.2.0",ios:"https://github.com/maplibre/maplibre-native/issues/252",android:"https://github.com/maplibre/maplibre-native/issues/252"}}}},Ale={type:{type:"projectionDefinition",doc:"The projection definition type. Can be specified as a string, a transition state, or an expression.",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},cle=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],dle={"fill-antialias":{type:"boolean",default:!0,doc:"Whether or not the fill should be antialiased.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill layer. In contrast to the `fill-color`, this value will also affect the 1px stroke around the fill, if the stroke is used.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.21.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",doc:"The color of the filled part of this layer. This color can be specified as `rgba` with an alpha component and the color's opacity will not affect the opacity of the 1px stroke, if it is used.",transition:!0,requires:[{"!":"fill-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",doc:"The outline color of the fill. Matches the value of `fill-color` if unspecified.",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{doc:"The fill is translated relative to the map."},viewport:{doc:"The fill is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-translate`.",default:"map",requires:["fill-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing image fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},hle={"line-opacity":{type:"number",doc:"The opacity at which the line will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",doc:"The color with which the line will be drawn.",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.23.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{doc:"The line is translated relative to the map."},viewport:{doc:"The line is translated relative to the viewport."}},doc:"Controls the frame of reference for `line-translate`.",default:"map",requires:["line-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",doc:"Stroke thickness.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,doc:"Draws a line casing outside of a line's actual path. Value indicates the width of the inner gap.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,doc:"The line's offset. For linear features, a positive value offsets the line to the right, relative to the direction of the line, and a negative value to the left. For polygon features, a positive value results in an inset, and a negative value results in an outset.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.12.1",android:"3.0.0",ios:"3.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Blur applied to the line, in pixels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",doc:"Specifies the lengths of the alternating dashes and gaps that form the dash pattern. The lengths are later scaled by the line width. To convert a dash length to pixels, multiply the length by the current line width. Note that GeoJSON sources with `lineMetrics: true` specified won't render dashed lines to the expected scale. Also note that zoom-dependent expressions will be evaluated only at integer zoom levels.",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"https://github.com/maplibre/maplibre-gl-js/issues/1235",ios:"https://github.com/maplibre/maplibre-native/issues/744",android:"https://github.com/maplibre/maplibre-native/issues/744"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing image lines. For seamless patterns, image width must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",doc:'Defines a gradient with which to color a line feature. Can only be used with GeoJSON sources that specify `"lineMetrics": true`.',transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],"sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.4.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},fle={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",doc:"Circle radius.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",doc:"The fill color of the circle.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,doc:"Amount to blur the circle. 1 blurs the circle such that only the centerpoint is full opacity.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",doc:"The opacity at which the circle will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{doc:"The circle is translated relative to the map."},viewport:{doc:"The circle is translated relative to the viewport."}},doc:"Controls the frame of reference for `circle-translate`.",default:"map",requires:["circle-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{doc:"Circles are scaled according to their apparent distance to the camera."},viewport:{doc:"Circles are not scaled."}},default:"map",doc:"Controls the scaling behavior of the circle when the map is pitched.","sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{doc:"The circle is aligned to the plane of the map."},viewport:{doc:"The circle is aligned to the plane of the viewport."}},default:"viewport",doc:"Orientation of circle when map is pitched.","sdk-support":{"basic functionality":{js:"0.39.0",android:"5.2.0",ios:"3.7.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The width of the circle's stroke. Strokes are placed outside of the `circle-radius`.","sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",doc:"The stroke color of the circle.",transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",doc:"The opacity of the circle's stroke.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},ple={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",doc:"Radius of influence of one heatmap point in pixels. Increasing the value makes the heatmap smoother, but less detailed.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"},"data-driven styling":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,doc:"A measure of how much an individual point contributes to the heatmap. A value of 10 would be equivalent to having 10 points of weight 1 in the same spot. Especially useful when combined with clustering.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"},"data-driven styling":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,doc:"Similar to `heatmap-weight` but controls the intensity of the heatmap globally. Primarily used for adjusting the heatmap based on zoom level.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],doc:'Defines the color of each pixel based on its density value in a heatmap.  Should be an expression that uses `["heatmap-density"]` as input.',transition:!1,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",doc:"The global opacity at which the heatmap layer will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},mle={"icon-opacity":{doc:"The opacity at which the icon will be drawn.",type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,doc:"The color of the icon. This can only be used with SDF icons.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,doc:"The color of the icon's halo. Icon halos can only be used with SDF icons.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the icon outline. \n\nThe unit is in pixels only for SDF sprites that were created with a blur radius of 8, multiplied by the display density. I.e., the radius needs to be 16 for `@2x` sprites, etc.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Fade out the halo towards the outside.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the icon's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{doc:"Icons are translated relative to the map."},viewport:{doc:"Icons are translated relative to the viewport."}},doc:"Controls the frame of reference for `icon-translate`.",default:"map",requires:["icon-image","icon-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",doc:"The opacity at which the text will be drawn.",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",doc:"The color with which the text will be drawn.",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,doc:"The color of the text's halo, which helps it stand out from backgrounds.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the font outline. Max text halo width is 1/4 of the font-size.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The halo's fadeout distance towards the outside.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the text's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{doc:"The text is translated relative to the map."},viewport:{doc:"The text is translated relative to the viewport."}},doc:"Controls the frame of reference for `text-translate`.",default:"map",requires:["text-field","text-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},gle={"raster-opacity":{type:"number",doc:"The opacity at which the image will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",doc:"Rotates hues around the color wheel.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the minimum brightness.",default:0,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the maximum brightness.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",doc:"Increase or reduce the saturation of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",doc:"Increase or reduce the contrast of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",doc:"The resampling/interpolation method to use for overscaling, also known as texture magnification filter",values:{linear:{doc:"(Bi)linear filtering interpolates pixel values using the weighted average of the four closest original source pixels creating a smooth but blurry look when overscaled"},nearest:{doc:"Nearest neighbor filtering interpolates pixel values using the nearest original source pixel creating a sharp but pixelated look when overscaled"}},default:"linear","sdk-support":{"basic functionality":{js:"0.47.0",android:"6.3.0",ios:"4.2.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",doc:"Fade duration when a new tile is added, or when a video is started or its coordinates are updated.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},yle={"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,doc:"The direction of the light source used to generate the hillshading with 0 as the top of the viewport if `hillshade-illumination-anchor` is set to `viewport` and due north if `hillshade-illumination-anchor` is set to `map`.",transition:!1,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{doc:"The hillshade illumination is relative to the north direction."},viewport:{doc:"The hillshade illumination is relative to the top of the viewport."}},default:"viewport",doc:"Direction of light source when map is rotated.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",doc:"Intensity of the hillshade",default:.5,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",doc:"The shading color of areas that face away from the light source.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",doc:"The shading color of areas that faces towards the light source.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",doc:"The shading color used to accentuate rugged terrain like sharp cliffs and gorges.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},vle={"background-color":{type:"color",default:"#000000",doc:"The color with which the background will be drawn.",transition:!0,requires:[{"!":"background-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing an image background. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity at which the background will be drawn.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Cle={duration:{type:"number",default:300,minimum:0,units:"milliseconds",doc:"Time allotted for transitions to complete."},delay:{type:"number",default:0,minimum:0,units:"milliseconds",doc:"Length of time before a transition begins."}},_le={"*":{type:"string",doc:"A name of a feature property to use as ID for feature state."}},ts={$version:Dae,$root:Rae,sources:Fae,source:Lae,source_vector:Uae,source_raster:zae,source_raster_dem:jae,source_geojson:Nae,source_video:Wae,source_image:Gae,layer:Qae,layout:qae,layout_background:Yae,layout_fill:$ae,layout_circle:Vae,layout_heatmap:Hae,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},"property-type":"constant"}},layout_line:Zae,layout_symbol:Xae,layout_raster:Jae,layout_hillshade:ele,filter:tle,filter_operator:nle,geometry_type:rle,function:{expression:{type:"expression",doc:"An expression."},stops:{type:"array",doc:"An array of stops.",value:"function_stop"},base:{type:"number",default:1,minimum:0,doc:"The exponential base of the interpolation curve. It controls the rate at which the result increases. Higher values make the result increase more towards the high end of the range. With `1` the stops are interpolated linearly."},property:{type:"string",doc:"The name of a feature property to use as the function input.",default:"$zoom"},type:{type:"enum",values:{identity:{doc:"Return the input value as the output value."},exponential:{doc:"Generate an output by interpolating between stops just less than and just greater than the function input."},interval:{doc:"Return the output value of the stop just less than the function input."},categorical:{doc:"Return the output value of the stop equal to the function input."}},doc:"The interpolation strategy to use in function evaluation.",default:"exponential"},colorSpace:{type:"enum",values:{rgb:{doc:"Use the RGB color space to interpolate color values"},lab:{doc:"Use the LAB color space to interpolate color values."},hcl:{doc:"Use the HCL color space to interpolate color values, interpolating the Hue, Chroma, and Luminance channels individually."}},doc:"The color space in which colors interpolated. Interpolating colors in perceptual color spaces like LAB and HCL tend to produce color ramps that look more consistent and produce colors that can be differentiated more easily than those interpolated in RGB space.",default:"rgb"},default:{type:"*",required:!1,doc:`A value to serve as a fallback function result when a value isn't otherwise available. It is used in the following circumstances:

* In categorical functions, when the feature value does not match any of the stop domain values.

* In property and zoom-and-property functions, when a feature does not contain a value for the specified property.

* In identity functions, when the feature value is not valid for the style property (for example, if the function is being used for a \`circle-color\` property but the feature property value is not a string or not a valid color).

* In interval or exponential property and zoom-and-property functions, when the feature value is not numeric.

If no default is provided, the style property's default is used in these circumstances.`}},function_stop:ile,expression:ole,expression_name:sle,light:ale,sky:lle,terrain:ule,projection:Ale,paint:cle,paint_fill:dle,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill extrusion layer. This is rendered on a per-layer, not per-feature, basis, and data-driven styling is not available.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",doc:"The base color of the extruded fill. The extrusion's surfaces will be shaded differently based on this color in combination with the root `light` settings. If this color is specified as `rgba` with an alpha component, the alpha component will be ignored; use `fill-extrusion-opacity` to set layer opacity.",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up (on the flat plane), respectively.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{doc:"The fill extrusion is translated relative to the map."},viewport:{doc:"The fill extrusion is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-extrusion-translate`.",default:"map",requires:["fill-extrusion-translate"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing images on extruded fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude this layer.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude the base of this layer. Must be less than or equal to `fill-extrusion-height`.",transition:!0,requires:["fill-extrusion-height"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,doc:"Whether to apply a vertical gradient to the sides of a fill-extrusion layer. If true, sides will be shaded slightly darker farther down.",transition:!1,"sdk-support":{"basic functionality":{js:"0.50.0",ios:"4.7.0",android:"7.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:hle,paint_circle:fle,paint_heatmap:ple,paint_symbol:mle,paint_raster:gle,paint_hillshade:yle,paint_background:vle,transition:Cle,"property-type":{"data-driven":{type:"property-type",doc:"Property is interpolable and can be represented using a property expression."},"cross-faded":{type:"property-type",doc:"Property is non-interpolable; rather, its values will be cross-faded to smoothly transition between integer zooms."},"cross-faded-data-driven":{type:"property-type",doc:"Property is non-interpolable; rather, its values will be cross-faded to smoothly transition between integer zooms. It can be represented using a property expression."},"color-ramp":{type:"property-type",doc:"Property should be specified using a color ramp from which the output color can be sampled based on a property calculation."},"data-constant":{type:"property-type",doc:"Property is interpolable but cannot be represented using a property expression."},constant:{type:"property-type",doc:"Property is constant across all zoom levels and property values."}},promoteId:_le};function Is(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldDocLabel.tsx",e="3158bd93bbefd1bd0e63d26617da070781685c25",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldDocLabel.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:6,column:17}},1:{start:{line:7,column:4},end:{line:9,column:6}},2:{start:{line:11,column:16},end:{line:19,column:3}},3:{start:{line:12,column:4},end:{line:18,column:7}},4:{start:{line:15,column:6},end:{line:17,column:7}},5:{start:{line:16,column:8},end:{line:16,column:48}},6:{start:{line:21,column:33},end:{line:21,column:43}},7:{start:{line:22,column:20},end:{line:22,column:35}},8:{start:{line:23,column:4},end:{line:42,column:5}},9:{start:{line:24,column:6},end:{line:37,column:14}},10:{start:{line:32,column:27},end:{line:32,column:61}},11:{start:{line:38,column:11},end:{line:42,column:5}},12:{start:{line:39,column:6},end:{line:39,column:174}},13:{start:{line:41,column:22},end:{line:41,column:37}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:21},end:{line:10,column:3}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:11,column:16},end:{line:11,column:17}},loc:{start:{line:11,column:26},end:{line:19,column:3}},line:11},2:{name:"(anonymous_2)",decl:{start:{line:14,column:7},end:{line:14,column:8}},loc:{start:{line:14,column:13},end:{line:18,column:5}},line:14},3:{name:"(anonymous_3)",decl:{start:{line:20,column:2},end:{line:20,column:3}},loc:{start:{line:20,column:11},end:{line:43,column:3}},line:20},4:{name:"(anonymous_4)",decl:{start:{line:32,column:21},end:{line:32,column:22}},loc:{start:{line:32,column:27},end:{line:32,column:61}},line:32}},branchMap:{0:{loc:{start:{line:15,column:6},end:{line:17,column:7}},type:"if",locations:[{start:{line:15,column:6},end:{line:17,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:15},1:{loc:{start:{line:22,column:20},end:{line:22,column:35}},type:"binary-expr",locations:[{start:{line:22,column:20},end:{line:22,column:29}},{start:{line:22,column:33},end:{line:22,column:35}}],line:22},2:{loc:{start:{line:23,column:4},end:{line:42,column:5}},type:"if",locations:[{start:{line:23,column:4},end:{line:42,column:5}},{start:{line:38,column:11},end:{line:42,column:5}}],line:23},3:{loc:{start:{line:30,column:26},end:{line:30,column:106}},type:"cond-expr",locations:[{start:{line:30,column:44},end:{line:30,column:74}},{start:{line:30,column:77},end:{line:30,column:106}}],line:30},4:{loc:{start:{line:31,column:67},end:{line:31,column:102}},type:"cond-expr",locations:[{start:{line:31,column:85},end:{line:31,column:91}},{start:{line:31,column:94},end:{line:31,column:102}}],line:31},5:{loc:{start:{line:34,column:22},end:{line:34,column:120}},type:"cond-expr",locations:[{start:{line:34,column:56},end:{line:34,column:79}},{start:{line:34,column:98},end:{line:34,column:120}}],line:34},6:{loc:{start:{line:38,column:11},end:{line:42,column:5}},type:"if",locations:[{start:{line:38,column:11},end:{line:42,column:5}},{start:{line:40,column:11},end:{line:42,column:5}}],line:38}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldDocLabel.tsx"],names:[],mappings:"AAuCQ,SASuB,KATvB;AAvCR,OAAO,WAAW;AAClB,SAAQ,eAAe,sBAAqB;AAc5C,qBAAqB,sBAAsB,MAAM,UAAkD;AAAA,EACjG,YAAa,OAA2B;AACtC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,MAAM;AAAA,IACR;AAAA,EACF;AAAA,EAEA,cAAc,CAAC,SAAkB;AAC/B,SAAK,SAAS;AAAA,MACZ;AAAA,IACF,GAAG,MAAM;AACP,UAAI,KAAK,MAAM,aAAa;AAC1B,aAAK,MAAM,YAAY,KAAK,MAAM,IAAI;AAAA,MACxC;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,OAAO,UAAS,IAAI,KAAK;AAChC,UAAM,EAAC,IAAG,IAAI,aAAa,CAAC;AAE5B,QAAI,KAAK;AACP,aAAO,oBAAC,WAAM,WAAU,wBACtB,+BAAC,SAAI,WAAU,uBACZ;AAAA;AAAA,QACA;AAAA,QACD;AAAA,UAAC;AAAA;AAAA,YACC,cAAY,KAAK,MAAM,OAAO,iCAAiC;AAAA,YAC/D,WAAW,4CAA4C,KAAK,MAAM,OAAO,SAAS,QAAQ;AAAA,YAC1F,SAAS,MAAM,KAAK,YAAY,CAAC,KAAK,MAAM,IAAI;AAAA,YAChD,eAAa,sBAAoB;AAAA,YAEhC,eAAK,MAAM,OAAO,oBAAC,kBAAe,IAAK,oBAAC,iBAAc;AAAA;AAAA,QACzD;AAAA,SACF,GACF;AAAA,IACF,WACS,OAAO;AACd,aAAO,oBAAC,WAAM,WAAU,wBACtB,8BAAC,SAAI,WAAU,uBACZ,iBACH,GACF;AAAA,IACF,OACK;AACH,0BAAC,SAAI;AAAA,IACP;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"3158bd93bbefd1bd0e63d26617da070781685c25"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Is=function(){return a},a}Is();class LO extends nr.Component{constructor(t){Is().f[0]++,Is().s[0]++;super(t);Pn(this,"onToggleDoc",(Is().s[2]++,t=>{Is().f[1]++,Is().s[3]++,this.setState({open:t},()=>{Is().f[2]++,Is().s[4]++,this.props.onToggleDoc?(Is().b[0][0]++,Is().s[5]++,this.props.onToggleDoc(this.state.open)):Is().b[0][1]++})}));Is().s[1]++,this.state={open:!1}}render(){Is().f[3]++;const{label:t,fieldSpec:r}=(Is().s[6]++,this.props),{doc:i}=(Is().s[7]++,Is().b[1][0]++,r||(Is().b[1][1]++,{}));if(Is().s[8]++,i)return Is().b[2][0]++,Is().s[9]++,ue.jsx("label",{className:"maputnik-doc-wrapper",children:ue.jsxs("div",{className:"maputnik-doc-target",children:[t,"",ue.jsx("button",{"aria-label":this.state.open?(Is().b[3][0]++,"close property documentation"):(Is().b[3][1]++,"open property documentation"),className:`maputnik-doc-button maputnik-doc-button--${this.state.open?(Is().b[4][0]++,"open"):(Is().b[4][1]++,"closed")}`,onClick:()=>(Is().f[4]++,Is().s[10]++,this.onToggleDoc(!this.state.open)),"data-wd-key":"field-doc-button-"+t,children:this.state.open?(Is().b[5][0]++,ue.jsx(IZ,{})):(Is().b[5][1]++,ue.jsx(kZ,{}))})]})});if(Is().b[2][1]++,Is().s[11]++,t)return Is().b[6][0]++,Is().s[12]++,ue.jsx("label",{className:"maputnik-doc-wrapper",children:ue.jsx("div",{className:"maputnik-doc-target",children:t})});Is().b[6][1]++,Is().s[13]++}}function oa(){var n="/home/runner/work/maputnik/maputnik/src/components/Doc.tsx",e="52a1547e724051448ae0a009c4c7c40d9bb9067f",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/Doc.tsx",statementMap:{0:{start:{line:3,column:16},end:{line:8,column:1}},1:{start:{line:11,column:26},end:{line:11,column:36}},2:{start:{line:12,column:52},end:{line:12,column:61}},3:{start:{line:13,column:23},end:{line:13,column:47}},4:{start:{line:14,column:25},end:{line:16,column:26}},5:{start:{line:17,column:4},end:{line:48,column:9}},6:{start:{line:21,column:10},end:{line:24,column:20}},7:{start:{line:31,column:12},end:{line:31,column:75}},8:{start:{line:35,column:10},end:{line:44,column:20}},9:{start:{line:38,column:14},end:{line:42,column:15}},10:{start:{line:39,column:16},end:{line:39,column:81}},11:{start:{line:41,column:16},end:{line:41,column:72}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:49,column:3}},line:10},1:{name:"(anonymous_1)",decl:{start:{line:20,column:119},end:{line:20,column:120}},loc:{start:{line:20,column:137},end:{line:25,column:9}},line:20},2:{name:"(anonymous_2)",decl:{start:{line:30,column:37},end:{line:30,column:38}},loc:{start:{line:30,column:49},end:{line:32,column:11}},line:30},3:{name:"(anonymous_3)",decl:{start:{line:34,column:80},end:{line:34,column:81}},loc:{start:{line:34,column:103},end:{line:45,column:9}},line:34},4:{name:"(anonymous_4)",decl:{start:{line:37,column:37},end:{line:37,column:38}},loc:{start:{line:37,column:44},end:{line:43,column:13}},line:37}},branchMap:{0:{loc:{start:{line:14,column:25},end:{line:16,column:26}},type:"binary-expr",locations:[{start:{line:14,column:25},end:{line:14,column:33}},{start:{line:16,column:4},end:{line:16,column:26}}],line:14},1:{loc:{start:{line:18,column:6},end:{line:26,column:10}},type:"binary-expr",locations:[{start:{line:18,column:6},end:{line:18,column:9}},{start:{line:18,column:29},end:{line:26,column:10}}],line:18},2:{loc:{start:{line:20,column:8},end:{line:25,column:13}},type:"binary-expr",locations:[{start:{line:20,column:8},end:{line:20,column:20}},{start:{line:20,column:40},end:{line:25,column:13}}],line:20},3:{loc:{start:{line:27,column:6},end:{line:46,column:13}},type:"binary-expr",locations:[{start:{line:27,column:6},end:{line:27,column:16}},{start:{line:27,column:36},end:{line:46,column:13}}],line:27},4:{loc:{start:{line:38,column:14},end:{line:42,column:15}},type:"if",locations:[{start:{line:38,column:14},end:{line:42,column:15}},{start:{line:40,column:21},end:{line:42,column:15}}],line:38},5:{loc:{start:{line:47,column:6},end:{line:47,column:215}},type:"binary-expr",locations:[{start:{line:47,column:6},end:{line:47,column:12}},{start:{line:47,column:16},end:{line:47,column:30}},{start:{line:47,column:50},end:{line:47,column:215}}],line:47}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Doc.tsx"],names:[],mappings:"AAwCM,mBAGM,KAKQ,YARd;AAxCN,OAAO,WAAW;AAElB,MAAM,UAAU;AAAA,EACd,IAAI;AAAA,EACJ,SAAS;AAAA,EACT,KAAK;AAAA,EACL,OAAO;AACT;AAkBA,qBAAqB,YAAY,MAAM,UAAoB;AAAA,EACzD,SAAU;AACR,UAAM,EAAC,UAAS,IAAI,KAAK;AAEzB,UAAM,EAAC,KAAK,QAAQ,QAAQ,eAAc,IAAI;AAC9C,UAAM,aAAa,UAAU,aAAa;AAE1C,UAAM,eACJ,CAAC,CAAC;AAAA;AAAA,IAGF,CAAC,MAAM,QAAQ,MAAM;AAGvB,WACE,iCACG;AAAA,aACC,qBAAC,SAAI,WAAU,WACb;AAAA,4BAAC,SAAI,WAAU,gBAAe,eAAY,kBAAkB,eAAI;AAAA,QAC/D,gBACC,oBAAC,QAAG,WAAU,mBACX,iBAAO,QAAQ,MAAM,EAAE,IAAI,CAAC,CAAC,KAAK,KAAK,MAAM;AAC5C,iBACE,qBAAC,QACC;AAAA,gCAAC,UAAM,eAAK,UAAU,GAAG,GAAE;AAAA,YAC3B,oBAAC,SAAK,gBAAM,KAAI;AAAA,eAFT,GAGT;AAAA,QAEJ,CAAC,GACH;AAAA,SAEJ;AAAA,MAED,cACC,oBAAC,SAAI,WAAU,wBACb,+BAAC,WAAM,WAAU,+BACf;AAAA,4BAAC,WACC,+BAAC,QACC;AAAA,8BAAC,QAAG;AAAA,UACH,OAAO,OAAO,OAAO,EAAE,IAAI,YAAU;AACpC,mBAAO,oBAAC,QAAiB,oBAAT,MAAgB;AAAA,UAClC,CAAC;AAAA,WACH,GACF;AAAA,QACA,oBAAC,WACE,iBAAO,QAAQ,UAAU,EAAE,IAAI,CAAC,CAAC,KAAK,UAAU,MAAM;AACrD,iBACE,qBAAC,QACC;AAAA,gCAAC,QAAI,eAAI;AAAA,YACR,OAAO,KAAK,OAAO,EAAE,IAAI,CAAC,MAAM;AAC/B,kBAAI,OAAO,UAAU,eAAe,KAAK,YAAY,CAAC,GAAG;AACvD,uBAAO,oBAAC,QAAY,qBAAW,CAAyB,KAAxC,CAA0C;AAAA,cAC5D,OACK;AACH,uBAAO,oBAAC,QAAW,kBAAH,CAAK;AAAA,cACvB;AAAA,YACF,CAAC;AAAA,eATM,GAUT;AAAA,QAEJ,CAAC,GACH;AAAA,SACF,GACF;AAAA,MAED,UAAU,kBACT,oBAAC,SAAI,WAAU,uBACb,8BAAC,OAAE,MAAM,QAAS,QAAO,UAAS,KAAI,cAAc,0BAAe,GACrE;AAAA,OAEJ;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"52a1547e724051448ae0a009c4c7c40d9bb9067f"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return oa=function(){return a},a}oa();const aT=(oa().s[0]++,{js:"JS",android:"Android",ios:"iOS",macos:"macOS"});class UO extends nr.Component{render(){oa().f[0]++;const{fieldSpec:e}=(oa().s[1]++,this.props),{doc:t,values:r,docUrl:i,docUrlLinkText:s}=(oa().s[2]++,e),a=(oa().s[3]++,e["sdk-support"]),o=(oa().s[4]++,oa().b[0][0]++,!!r&&(oa().b[0][1]++,!Array.isArray(r)));return oa().s[5]++,ue.jsxs(ue.Fragment,{children:[(oa().b[1][0]++,t&&(oa().b[1][1]++,ue.jsxs("div",{className:"SpecDoc",children:[ue.jsx("div",{className:"SpecDoc__doc","data-wd-key":"spec-field-doc",children:t}),(oa().b[2][0]++,o&&(oa().b[2][1]++,ue.jsx("ul",{className:"SpecDoc__values",children:Object.entries(r).map(([d,g])=>(oa().f[1]++,oa().s[6]++,ue.jsxs("li",{children:[ue.jsx("code",{children:JSON.stringify(d)}),ue.jsx("div",{children:g.doc})]},d)))})))]}))),(oa().b[3][0]++,a&&(oa().b[3][1]++,ue.jsx("div",{className:"SpecDoc__sdk-support",children:ue.jsxs("table",{className:"SpecDoc__sdk-support__table",children:[ue.jsx("thead",{children:ue.jsxs("tr",{children:[ue.jsx("th",{}),Object.values(aT).map(d=>(oa().f[2]++,oa().s[7]++,ue.jsx("th",{children:d},d)))]})}),ue.jsx("tbody",{children:Object.entries(a).map(([d,g])=>(oa().f[3]++,oa().s[8]++,ue.jsxs("tr",{children:[ue.jsx("td",{children:d}),Object.keys(aT).map(b=>(oa().f[4]++,oa().s[9]++,Object.prototype.hasOwnProperty.call(g,b)?(oa().b[4][0]++,oa().s[10]++,ue.jsx("td",{children:g[b]},b)):(oa().b[4][1]++,oa().s[11]++,ue.jsx("td",{children:"no"},b))))]},d)))})]})}))),(oa().b[5][0]++,i&&(oa().b[5][1]++,s)&&(oa().b[5][2]++,ue.jsx("div",{className:"SpecDoc__learn-more",children:ue.jsx("a",{href:i,target:"_blank",rel:"noreferrer",children:s})})))]})}}function Wo(){var n="/home/runner/work/maputnik/maputnik/src/components/Block.tsx",e="ca04d739d50d9528a1765863025280bc88ee5e77",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/Block.tsx",statementMap:{0:{start:{line:7,column:13},end:{line:7,column:17}},1:{start:{line:9,column:4},end:{line:9,column:17}},2:{start:{line:10,column:4},end:{line:12,column:6}},3:{start:{line:15,column:18},end:{line:15,column:32}},4:{start:{line:16,column:4},end:{line:18,column:5}},5:{start:{line:17,column:6},end:{line:17,column:64}},6:{start:{line:20,column:16},end:{line:24,column:3}},7:{start:{line:21,column:4},end:{line:23,column:7}},8:{start:{line:31,column:17},end:{line:40,column:3}},9:{start:{line:32,column:15},end:{line:32,column:39}},10:{start:{line:33,column:21},end:{line:33,column:48}},11:{start:{line:34,column:4},end:{line:36,column:5}},12:{start:{line:35,column:6},end:{line:35,column:30}},13:{start:{line:37,column:4},end:{line:39,column:5}},14:{start:{line:38,column:6},end:{line:38,column:29}},15:{start:{line:42,column:4},end:{line:75,column:6}},16:{start:{line:64,column:95},end:{line:64,column:113}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:21},end:{line:13,column:3}},line:8},1:{name:"(anonymous_1)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:14},end:{line:19,column:3}},line:14},2:{name:"(anonymous_2)",decl:{start:{line:20,column:16},end:{line:20,column:17}},loc:{start:{line:20,column:25},end:{line:24,column:3}},line:20},3:{name:"(anonymous_3)",decl:{start:{line:31,column:17},end:{line:31,column:18}},loc:{start:{line:31,column:28},end:{line:40,column:3}},line:31},4:{name:"(anonymous_4)",decl:{start:{line:41,column:2},end:{line:41,column:3}},loc:{start:{line:41,column:11},end:{line:76,column:3}},line:41},5:{name:"(anonymous_5)",decl:{start:{line:64,column:87},end:{line:64,column:88}},loc:{start:{line:64,column:95},end:{line:64,column:113}},line:64}},branchMap:{0:{loc:{start:{line:16,column:4},end:{line:18,column:5}},type:"if",locations:[{start:{line:16,column:4},end:{line:18,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:16},1:{loc:{start:{line:17,column:33},end:{line:17,column:62}},type:"cond-expr",locations:[{start:{line:17,column:48},end:{line:17,column:54}},{start:{line:17,column:57},end:{line:17,column:62}}],line:17},2:{loc:{start:{line:34,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:34,column:4},end:{line:36,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:34},3:{loc:{start:{line:34,column:8},end:{line:34,column:66}},type:"binary-expr",locations:[{start:{line:34,column:8},end:{line:34,column:53}},{start:{line:34,column:57},end:{line:34,column:66}}],line:34},4:{loc:{start:{line:37,column:4},end:{line:39,column:5}},type:"if",locations:[{start:{line:37,column:4},end:{line:39,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},5:{loc:{start:{line:54,column:10},end:{line:61,column:14}},type:"binary-expr",locations:[{start:{line:54,column:10},end:{line:54,column:30}},{start:{line:54,column:50},end:{line:61,column:14}}],line:54},6:{loc:{start:{line:62,column:10},end:{line:62,column:134}},type:"binary-expr",locations:[{start:{line:62,column:10},end:{line:62,column:31}},{start:{line:62,column:51},end:{line:62,column:134}}],line:62},7:{loc:{start:{line:65,column:10},end:{line:72,column:11}},type:"binary-expr",locations:[{start:{line:65,column:10},end:{line:65,column:30}},{start:{line:65,column:50},end:{line:72,column:11}}],line:65},8:{loc:{start:{line:69,column:32},end:{line:69,column:64}},type:"cond-expr",locations:[{start:{line:69,column:53},end:{line:69,column:55}},{start:{line:69,column:58},end:{line:69,column:64}}],line:69}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Block.tsx"],names:[],mappings:"AAgEW,SAWD,KAXC;AAhEX,OAAO,WAAgD;AACvD,OAAO,gBAAgB;AACvB,OAAO,mBAAmB;AAC1B,OAAO,SAAS;AAmBhB,qBAAqB,cAAc,MAAM,UAAkC;AAAA,EACzE,WAAkC;AAAA,EAElC,YAAa,OAAmB;AAC9B,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,SAAS;AAAA,IACX;AAAA,EACF;AAAA,EAEA,SAAS,GAAwE;AAC/E,UAAM,QAAQ,EAAE,OAAO;AACvB,QAAI,KAAK,MAAM,UAAU;AACvB,aAAO,KAAK,MAAM,SAAS,UAAU,KAAK,SAAY,KAAK;AAAA,IAC7D;AAAA,EACF;AAAA,EAEA,cAAc,CAAC,QAAiB;AAC9B,SAAK,SAAS;AAAA,MACZ,SAAS;AAAA,IACX,CAAC;AAAA,EACH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQA,eAAe,CAAC,UAAoC;AAClD,UAAM,KAAK,MAAM,YAAY;AAC7B,UAAM,WAAW,KAAK,UAAU,SAAS,EAAE;AAE3C,QAAI,MAAM,YAAY,OAAO,aAAa,WAAW,CAAC,UAAU;AAC9D,YAAM,gBAAgB;AAAA,IACxB;AACA,QAAI,MAAM,YAAY,OAAO,aAAa,KAAK;AAC7C,YAAM,eAAe;AAAA,IACvB;AAAA,EACF;AAAA,EAEA,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QAAM,OAAO,KAAK,MAAM;AAAA,QAC9B,eAAa,KAAK,MAAM,aAAa;AAAA,QACrC,WAAW,WAAW;AAAA,UACpB,wBAAwB;AAAA,UACxB,8BAA8B,KAAK,MAAM;AAAA,UACzC,yBAAyB,KAAK,MAAM;AAAA,QACtC,CAAC;AAAA,QACD,SAAS,KAAK;AAAA,QAEb;AAAA,eAAK,MAAM,aACV,oBAAC,SAAI,WAAU,8BACb;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,KAAK,MAAM;AAAA,cAClB,aAAa,KAAK;AAAA,cAClB,WAAW,KAAK,MAAM;AAAA;AAAA,UACxB,GACF;AAAA,UAED,CAAC,KAAK,MAAM,aACX,oBAAC,SAAI,WAAU,8BACZ,eAAK,MAAM,OACd;AAAA,UAEF,oBAAC,SAAI,WAAU,+BACZ,eAAK,MAAM,QACd;AAAA,UACA,oBAAC,SAAI,WAAU,gCAA+B,KAAK,QAAM,KAAK,WAAW,IACtE,eAAK,MAAM,UACd;AAAA,UACC,KAAK,MAAM,aACV;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,OAAO,EAAC,SAAS,KAAK,MAAM,UAAU,KAAK,OAAM;AAAA,cAEjD,8BAAC,OAAI,WAAW,KAAK,MAAM,WAAW;AAAA;AAAA,UACxC;AAAA;AAAA;AAAA,IAEJ;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ca04d739d50d9528a1765863025280bc88ee5e77"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Wo=function(){return a},a}Wo();class fa extends nr.Component{constructor(t){Wo().f[0]++,Wo().s[1]++;super(t);Pn(this,"_blockEl",(Wo().s[0]++,null));Pn(this,"onToggleDoc",(Wo().s[6]++,t=>{Wo().f[2]++,Wo().s[7]++,this.setState({showDoc:t})}));Pn(this,"onLabelClick",(Wo().s[8]++,t=>{var s;Wo().f[3]++;const r=(Wo().s[9]++,t.nativeEvent.target),i=(Wo().s[10]++,(s=this._blockEl)==null?void 0:s.contains(r));Wo().s[11]++,Wo().b[3][0]++,t.nativeEvent.target.nodeName!=="INPUT"&&(Wo().b[3][1]++,!i)?(Wo().b[2][0]++,Wo().s[12]++,t.stopPropagation()):Wo().b[2][1]++,Wo().s[13]++,t.nativeEvent.target.nodeName!=="A"?(Wo().b[4][0]++,Wo().s[14]++,t.preventDefault()):Wo().b[4][1]++}));Wo().s[2]++,this.state={showDoc:!1}}onChange(t){Wo().f[1]++;const r=(Wo().s[3]++,t.target.value);if(Wo().s[4]++,this.props.onChange)return Wo().b[0][0]++,Wo().s[5]++,this.props.onChange(r===""?(Wo().b[1][0]++,void 0):(Wo().b[1][1]++,r));Wo().b[0][1]++}render(){return Wo().f[4]++,Wo().s[15]++,ue.jsxs("label",{style:this.props.style,"data-wd-key":this.props["data-wd-key"],className:am({"maputnik-input-block":!0,"maputnik-input-block--wide":this.props.wideMode,"maputnik-action-block":this.props.action}),onClick:this.onLabelClick,children:[(Wo().b[5][0]++,this.props.fieldSpec&&(Wo().b[5][1]++,ue.jsx("div",{className:"maputnik-input-block-label",children:ue.jsx(LO,{label:this.props.label,onToggleDoc:this.onToggleDoc,fieldSpec:this.props.fieldSpec})}))),(Wo().b[6][0]++,!this.props.fieldSpec&&(Wo().b[6][1]++,ue.jsx("div",{className:"maputnik-input-block-label",children:this.props.label}))),ue.jsx("div",{className:"maputnik-input-block-action",children:this.props.action}),ue.jsx("div",{className:"maputnik-input-block-content",ref:t=>(Wo().f[5]++,Wo().s[16]++,this._blockEl=t),children:this.props.children}),(Wo().b[7][0]++,this.props.fieldSpec&&(Wo().b[7][1]++,ue.jsx("div",{className:"maputnik-doc-inline",style:{display:this.state.showDoc?(Wo().b[8][0]++,""):(Wo().b[8][1]++,"none")},children:ue.jsx(UO,{fieldSpec:this.props.fieldSpec})})))]})}}function Lc(){var n="/home/runner/work/maputnik/maputnik/src/components/InputSelect.tsx",e="1b99a181d4a9dd7b629113889cbb71c3a4bb4d42",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputSelect.tsx",statementMap:{0:{start:{line:5,column:18},end:{line:5,column:36}},1:{start:{line:6,column:4},end:{line:8,column:5}},2:{start:{line:7,column:6},end:{line:7,column:43}},3:{start:{line:7,column:35},end:{line:7,column:41}},4:{start:{line:9,column:4},end:{line:21,column:6}},5:{start:{line:17,column:25},end:{line:17,column:60}},6:{start:{line:19,column:64},end:{line:19,column:115}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:2},end:{line:4,column:3}},loc:{start:{line:4,column:11},end:{line:22,column:3}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:7,column:28},end:{line:7,column:29}},loc:{start:{line:7,column:35},end:{line:7,column:41}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:17,column:18},end:{line:17,column:19}},loc:{start:{line:17,column:25},end:{line:17,column:60}},line:17},3:{name:"(anonymous_3)",decl:{start:{line:19,column:30},end:{line:19,column:31}},loc:{start:{line:19,column:64},end:{line:19,column:115}},line:19}},branchMap:{0:{loc:{start:{line:6,column:4},end:{line:8,column:5}},type:"if",locations:[{start:{line:6,column:4},end:{line:8,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:6},1:{loc:{start:{line:6,column:8},end:{line:6,column:56}},type:"binary-expr",locations:[{start:{line:6,column:8},end:{line:6,column:26}},{start:{line:6,column:30},end:{line:6,column:56}}],line:6}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0,1:0,2:0,3:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputSelect.tsx"],names:[],mappings:"AA4BsC;AA5BtC,OAAO,WAAW;AAYlB,qBAAqB,oBAAoB,MAAM,UAA4B;AAAA,EACzE,SAAS;AACP,QAAI,UAAU,KAAK,MAAM;AACzB,QAAG,QAAQ,SAAS,KAAK,CAAC,MAAM,QAAQ,QAAQ,CAAC,CAAC,GAAG;AACnD,gBAAU,QAAQ,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;AAAA,IACrC;AAEA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,eAAa,KAAK,MAAM,aAAa;AAAA,QACrC,OAAO,KAAK,MAAM;AAAA,QAClB,OAAO,KAAK,MAAM;AAAA,QAClB,OAAO,KAAK,MAAM;AAAA,QAClB,UAAU,OAAK,KAAK,MAAM,SAAS,EAAE,OAAO,KAAK;AAAA,QACjD,cAAY,KAAK,MAAM,YAAY;AAAA,QAEjC,kBAAQ,IAAI,CAAC,CAAC,KAAK,KAAK,MAAM,oBAAC,YAAiB,OAAO,KAAM,mBAAlB,GAAwB,CAAS;AAAA;AAAA,IAChF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"1b99a181d4a9dd7b629113889cbb71c3a4bb4d42"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Lc=function(){return a},a}Lc();class Xg extends nr.Component{render(){Lc().f[0]++;let e=(Lc().s[0]++,this.props.options);return Lc().s[1]++,Lc().b[1][0]++,e.length>0&&(Lc().b[1][1]++,!Array.isArray(e[0]))?(Lc().b[0][0]++,Lc().s[2]++,e=e.map(t=>(Lc().f[1]++,Lc().s[3]++,[t,t]))):Lc().b[0][1]++,Lc().s[4]++,ue.jsx("select",{className:"maputnik-select","data-wd-key":this.props["data-wd-key"],style:this.props.style,title:this.props.title,value:this.props.value,onChange:t=>(Lc().f[2]++,Lc().s[5]++,this.props.onChange(t.target.value)),"aria-label":this.props["aria-label"],children:e.map(([t,r])=>(Lc().f[3]++,Lc().s[6]++,ue.jsx("option",{value:t,children:r},t)))})}}function Ri(){var n="/home/runner/work/maputnik/maputnik/src/components/InputString.tsx",e="ffe977722e3215b5f6718c464b93680839810a41",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputString.tsx",statementMap:{0:{start:{line:3,column:24},end:{line:6,column:3}},1:{start:{line:8,column:4},end:{line:8,column:17}},2:{start:{line:9,column:4},end:{line:12,column:6}},3:{start:{line:15,column:4},end:{line:19,column:5}},4:{start:{line:16,column:6},end:{line:18,column:8}},5:{start:{line:20,column:4},end:{line:20,column:14}},6:{start:{line:25,column:4},end:{line:36,column:5}},7:{start:{line:26,column:6},end:{line:26,column:23}},8:{start:{line:27,column:6},end:{line:30,column:8}},9:{start:{line:32,column:6},end:{line:32,column:20}},10:{start:{line:33,column:6},end:{line:35,column:8}},11:{start:{line:37,column:4},end:{line:39,column:5}},12:{start:{line:38,column:6},end:{line:38,column:48}},13:{start:{line:40,column:4},end:{line:70,column:7}},14:{start:{line:51,column:8},end:{line:56,column:11}},15:{start:{line:55,column:10},end:{line:55,column:71}},16:{start:{line:55,column:34},end:{line:55,column:71}},17:{start:{line:59,column:8},end:{line:62,column:9}},18:{start:{line:60,column:10},end:{line:60,column:44}},19:{start:{line:61,column:10},end:{line:61,column:73}},20:{start:{line:61,column:35},end:{line:61,column:73}},21:{start:{line:65,column:8},end:{line:67,column:9}},22:{start:{line:66,column:10},end:{line:66,column:48}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:13},end:{line:4,column:14}},loc:{start:{line:4,column:19},end:{line:5,column:5}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:21},end:{line:13,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:48},end:{line:21,column:3}},line:14},3:{name:"(anonymous_3)",decl:{start:{line:22,column:2},end:{line:22,column:3}},loc:{start:{line:22,column:11},end:{line:71,column:3}},line:22},4:{name:"(anonymous_4)",decl:{start:{line:50,column:16},end:{line:50,column:17}},loc:{start:{line:50,column:23},end:{line:57,column:7}},line:50},5:{name:"(anonymous_5)",decl:{start:{line:54,column:11},end:{line:54,column:12}},loc:{start:{line:54,column:17},end:{line:56,column:9}},line:54},6:{name:"(anonymous_6)",decl:{start:{line:58,column:14},end:{line:58,column:15}},loc:{start:{line:58,column:20},end:{line:63,column:7}},line:58},7:{name:"(anonymous_7)",decl:{start:{line:64,column:17},end:{line:64,column:18}},loc:{start:{line:64,column:24},end:{line:68,column:7}},line:64}},branchMap:{0:{loc:{start:{line:11,column:13},end:{line:11,column:30}},type:"binary-expr",locations:[{start:{line:11,column:13},end:{line:11,column:24}},{start:{line:11,column:28},end:{line:11,column:30}}],line:11},1:{loc:{start:{line:15,column:4},end:{line:19,column:5}},type:"if",locations:[{start:{line:15,column:4},end:{line:19,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:15},2:{loc:{start:{line:25,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:25,column:4},end:{line:36,column:5}},{start:{line:31,column:11},end:{line:36,column:5}}],line:25},3:{loc:{start:{line:37,column:4},end:{line:39,column:5}},type:"if",locations:[{start:{line:37,column:4},end:{line:39,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},4:{loc:{start:{line:43,column:18},end:{line:43,column:125}},type:"cond-expr",locations:[{start:{line:43,column:83},end:{line:43,column:104}},{start:{line:43,column:107},end:{line:43,column:125}}],line:43},5:{loc:{start:{line:47,column:13},end:{line:47,column:64}},type:"cond-expr",locations:[{start:{line:47,column:43},end:{line:47,column:45}},{start:{line:47,column:48},end:{line:47,column:64}}],line:47},6:{loc:{start:{line:55,column:10},end:{line:55,column:71}},type:"if",locations:[{start:{line:55,column:10},end:{line:55,column:71}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:55},7:{loc:{start:{line:59,column:8},end:{line:62,column:9}},type:"if",locations:[{start:{line:59,column:8},end:{line:62,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:59},8:{loc:{start:{line:61,column:10},end:{line:61,column:73}},type:"if",locations:[{start:{line:61,column:10},end:{line:61,column:73}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:61},9:{loc:{start:{line:65,column:8},end:{line:67,column:9}},type:"if",locations:[{start:{line:65,column:8},end:{line:67,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:65},10:{loc:{start:{line:65,column:12},end:{line:65,column:51}},type:"binary-expr",locations:[{start:{line:65,column:12},end:{line:65,column:28}},{start:{line:65,column:32},end:{line:65,column:51}}],line:65}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputString.tsx"],names:[],mappings:"AAAA,OAAO,WAAW;AAsBlB,qBAAqB,oBAAoB,MAAM,UAA8C;AAAA,EAC3F,OAAO,eAAe;AAAA,IACpB,SAAS,MAAM;AAAA,IAAC;AAAA,EAClB;AAAA,EAEA,YAAY,OAAyB;AACnC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,SAAS;AAAA,MACT,OAAO,MAAM,SAAS;AAAA,IACxB;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAAmC,OAAyB;AAC1F,QAAI,CAAC,MAAM,SAAS;AAClB,aAAO;AAAA,QACL,OAAO,MAAM;AAAA,MACf;AAAA,IACF;AACA,WAAO,CAAC;AAAA,EACV;AAAA,EAEA,SAAS;AACP,QAAI;AACJ,QAAI;AAEJ,QAAG,KAAK,MAAM,OAAO;AACnB,YAAM;AACN,gBAAU;AAAA,QACR;AAAA,QACA;AAAA,MACF;AAAA,IACF,OACK;AACH,YAAM;AACN,gBAAU;AAAA,QACR;AAAA,MACF;AAAA,IACF;AAEA,QAAG,KAAK,MAAM,UAAU;AACtB,cAAQ,KAAK,2BAA2B;AAAA,IAC1C;AAEA,WAAO,MAAM,cAAc,KAAK;AAAA,MAC9B,cAAc,KAAK,MAAM,YAAY;AAAA,MACrC,eAAe,KAAK,MAAM,aAAa;AAAA,MACvC,YAAY,OAAO,UAAU,eAAe,KAAK,KAAK,OAAO,YAAY,IAAI,KAAK,MAAM,aAAa,EAAE,QAAQ;AAAA,MAC/G,UAAU,KAAK,MAAM;AAAA,MACrB,WAAW,QAAQ,KAAK,GAAG;AAAA,MAC3B,OAAO,KAAK,MAAM;AAAA,MAClB,OAAO,KAAK,MAAM,UAAU,SAAY,KAAK,KAAK,MAAM;AAAA,MACxD,aAAa,KAAK,MAAM;AAAA,MACxB,OAAO,KAAK,MAAM;AAAA,MAClB,UAAU,CAAC,MAA2E;AACpF,aAAK,SAAS;AAAA,UACZ,SAAS;AAAA,UACT,OAAO,EAAE,OAAO;AAAA,QAClB,GAAG,MAAM;AACP,cAAI,KAAK,MAAM,QAAS,MAAK,MAAM,QAAQ,KAAK,MAAM,KAAK;AAAA,QAC7D,CAAC;AAAA,MACH;AAAA,MACA,QAAQ,MAAM;AACZ,YAAG,KAAK,MAAM,UAAQ,KAAK,MAAM,OAAO;AACtC,eAAK,SAAS,EAAC,SAAS,MAAK,CAAC;AAC9B,cAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,KAAK,MAAM,KAAK;AAAA,QAC/D;AAAA,MACF;AAAA,MACA,WAAW,CAAC,MAAM;AAChB,YAAI,EAAE,YAAY,MAAM,KAAK,MAAM,UAAU;AAC3C,eAAK,MAAM,SAAS,KAAK,MAAM,KAAK;AAAA,QACtC;AAAA,MACF;AAAA,MACA,UAAU,KAAK,MAAM;AAAA,IACvB,CAAC;AAAA,EACH;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ffe977722e3215b5f6718c464b93680839810a41"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Ri=function(){return a},a}Ri();class Qf extends nr.Component{constructor(e){Ri().f[1]++,Ri().s[1]++,super(e),Ri().s[2]++,this.state={editing:!1,value:(Ri().b[0][0]++,e.value||(Ri().b[0][1]++,""))}}static getDerivedStateFromProps(e,t){if(Ri().f[2]++,Ri().s[3]++,t.editing)Ri().b[1][1]++;else return Ri().b[1][0]++,Ri().s[4]++,{value:e.value};return Ri().s[5]++,{}}render(){Ri().f[3]++;let e,t;return Ri().s[6]++,this.props.multi?(Ri().b[2][0]++,Ri().s[7]++,e="textarea",Ri().s[8]++,t=["maputnik-string","maputnik-string--multi"]):(Ri().b[2][1]++,Ri().s[9]++,e="input",Ri().s[10]++,t=["maputnik-string"]),Ri().s[11]++,this.props.disabled?(Ri().b[3][0]++,Ri().s[12]++,t.push("maputnik-string--disabled")):Ri().b[3][1]++,Ri().s[13]++,nr.createElement(e,{"aria-label":this.props["aria-label"],"data-wd-key":this.props["data-wd-key"],spellCheck:Object.prototype.hasOwnProperty.call(this.props,"spellCheck")?(Ri().b[4][0]++,this.props.spellCheck):(Ri().b[4][1]++,e!=="input"),disabled:this.props.disabled,className:t.join(" "),style:this.props.style,value:this.state.value===void 0?(Ri().b[5][0]++,""):(Ri().b[5][1]++,this.state.value),placeholder:this.props.default,title:this.props.title,onChange:r=>{Ri().f[4]++,Ri().s[14]++,this.setState({editing:!0,value:r.target.value},()=>{Ri().f[5]++,Ri().s[15]++,this.props.onInput?(Ri().b[6][0]++,Ri().s[16]++,this.props.onInput(this.state.value)):Ri().b[6][1]++})},onBlur:()=>{Ri().f[6]++,Ri().s[17]++,this.state.value!==this.props.value?(Ri().b[7][0]++,Ri().s[18]++,this.setState({editing:!1}),Ri().s[19]++,this.props.onChange?(Ri().b[8][0]++,Ri().s[20]++,this.props.onChange(this.state.value)):Ri().b[8][1]++):Ri().b[7][1]++},onKeyDown:r=>{Ri().f[7]++,Ri().s[21]++,Ri().b[10][0]++,r.keyCode===13&&(Ri().b[10][1]++,this.props.onChange)?(Ri().b[9][0]++,Ri().s[22]++,this.props.onChange(this.state.value)):Ri().b[9][1]++},required:this.props.required})}}Pn(Qf,"defaultProps",(Ri().s[0]++,{onInput:()=>{Ri().f[0]++}}));function hp(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldType.tsx",e="7881723dfc9d5af5c18468677e4f429a5a061179",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldType.tsx",statementMap:{0:{start:{line:9,column:24},end:{line:11,column:3}},1:{start:{line:13,column:14},end:{line:13,column:26}},2:{start:{line:14,column:4},end:{line:50,column:6}},3:{start:{line:53,column:18},end:{line:53,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:12,column:2},end:{line:12,column:3}},loc:{start:{line:12,column:11},end:{line:51,column:3}},line:12}},branchMap:{0:{loc:{start:{line:22,column:10},end:{line:28,column:11}},type:"binary-expr",locations:[{start:{line:22,column:10},end:{line:22,column:29}},{start:{line:22,column:49},end:{line:28,column:11}}],line:22},1:{loc:{start:{line:29,column:10},end:{line:47,column:11}},type:"binary-expr",locations:[{start:{line:29,column:10},end:{line:29,column:30}},{start:{line:29,column:50},end:{line:47,column:11}}],line:29}},s:{0:0,1:0,2:0,3:0},f:{0:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldType.tsx"],names:[],mappings:"AAuBW,SAKH,KALG;AAvBX,OAAO,WAAW;AAElB,OAAO,YAAY;AACnB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,SAA0B,uBAAuB;AAUjD,MAAM,0BAA0B,MAAM,UAAkC;AAAA,EACtE,OAAO,eAAe;AAAA,IACpB,UAAU;AAAA,EACZ;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QAAM,OAAO,EAAE,MAAM;AAAA,QAAG,WAAW,OAAO,MAAM;AAAA,QACtD,eAAa,KAAK,MAAM;AAAA,QACxB,OAAO,KAAK,MAAM;AAAA,QAEjB;AAAA,eAAK,MAAM,YACV;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,KAAK,MAAM;AAAA,cAClB,UAAU;AAAA;AAAA,UACZ;AAAA,UAED,CAAC,KAAK,MAAM,YACX;AAAA,YAAC;AAAA;AAAA,cACC,SAAS;AAAA,gBACP,CAAC,cAAc,YAAY;AAAA,gBAC3B,CAAC,QAAQ,MAAM;AAAA,gBACf,CAAC,QAAQ,MAAM;AAAA,gBACf,CAAC,UAAU,QAAQ;AAAA,gBACnB,CAAC,UAAU,QAAQ;AAAA,gBACnB,CAAC,UAAU,QAAQ;AAAA,gBACnB,CAAC,kBAAkB,gBAAgB;AAAA,gBACnC,CAAC,aAAa,WAAW;AAAA,gBACzB,CAAC,WAAW,SAAS;AAAA,cACvB;AAAA,cACA,UAAU,KAAK,MAAM;AAAA,cACrB,OAAO,KAAK,MAAM;AAAA,cAClB,eAAa,KAAK,MAAM,QAAQ;AAAA;AAAA,UAClC;AAAA;AAAA;AAAA,IAEJ;AAAA,EACF;AACF;AAEA,MAAM,YAAY,gBAAgB,EAAE,iBAAiB;AACrD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"7881723dfc9d5af5c18468677e4f429a5a061179"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return hp=function(){return a},a}hp();class JN extends nr.Component{render(){hp().f[0]++;const e=(hp().s[1]++,this.props.t);return hp().s[2]++,ue.jsxs(fa,{label:e("Type"),fieldSpec:ts.layer.type,"data-wd-key":this.props.wdKey,error:this.props.error,children:[(hp().b[0][0]++,this.props.disabled&&(hp().b[0][1]++,ue.jsx(Qf,{value:this.props.value,disabled:!0}))),(hp().b[1][0]++,!this.props.disabled&&(hp().b[1][1]++,ue.jsx(Xg,{options:[["background","Background"],["fill","Fill"],["line","Line"],["symbol","Symbol"],["raster","Raster"],["circle","Circle"],["fill-extrusion","Fill Extrusion"],["hillshade","Hillshade"],["heatmap","Heatmap"]],onChange:this.props.onChange,value:this.props.value,"data-wd-key":this.props.wdKey+".select"})))]})}}Pn(JN,"defaultProps",(hp().s[0]++,{disabled:!1}));const eW=(hp().s[3]++,Ns()(JN));function tx(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldId.tsx",e="f6ac2bd12dbef0198dd96da668f75e4659321d69",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldId.tsx",statementMap:{0:{start:{line:8,column:4},end:{line:24,column:6}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:11},end:{line:25,column:3}},line:7}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldId.tsx"],names:[],mappings:"AAoBM;AApBN,OAAO,WAAW;AAElB,OAAO,YAAY;AACnB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AASxB,qBAAqB,gBAAgB,MAAM,UAAwB;AAAA,EACjE,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QAAM,OAAM;AAAA,QAAK,WAAW,OAAO,MAAM;AAAA,QAE/C,eAAa,KAAK,MAAM;AAAA,QACxB,OAAO,KAAK,MAAM;AAAA,QAElB;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,KAAK,MAAM;AAAA,YAClB,SAAS,KAAK,MAAM;AAAA,YACpB,eAAa,KAAK,MAAM,QAAQ;AAAA;AAAA,QAClC;AAAA;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f6ac2bd12dbef0198dd96da668f75e4659321d69"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return tx=function(){return a},a}tx();class tW extends nr.Component{render(){return tx().f[0]++,tx().s[0]++,ue.jsx(fa,{label:"ID",fieldSpec:ts.layer.id,"data-wd-key":this.props.wdKey,error:this.props.error,children:ue.jsx(Qf,{value:this.props.value,onInput:this.props.onChange,"data-wd-key":this.props.wdKey+".input"})})}}var R5={exports:{}},lT;function ble(){if(lT)return R5.exports;lT=1;var n=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source;function e(Ze){var Je,We,Me,Fe=Ze.ownerDocument,He=Fe.body,bt=Fe&&Fe.documentElement;return Je=Ze.getBoundingClientRect(),We=Je.left,Me=Je.top,We-=bt.clientLeft||He.clientLeft||0,Me-=bt.clientTop||He.clientTop||0,{left:We,top:Me}}function t(Ze,Je){var We=Ze["page"+(Je?"Y":"X")+"Offset"],Me="scroll"+(Je?"Top":"Left");if(typeof We!="number"){var Fe=Ze.document;We=Fe.documentElement[Me],typeof We!="number"&&(We=Fe.body[Me])}return We}function r(Ze){return t(Ze)}function i(Ze){return t(Ze,!0)}function s(Ze){var Je=e(Ze),We=Ze.ownerDocument,Me=We.defaultView||We.parentWindow;return Je.left+=r(Me),Je.top+=i(Me),Je}function a(Ze,Je,We){var Me="",Fe=Ze.ownerDocument;return(We=We||Fe.defaultView.getComputedStyle(Ze,null))&&(Me=We.getPropertyValue(Je)||We[Je]),Me}var o=new RegExp("^("+n+")(?!px)[a-z%]+$","i"),d=/^(top|right|bottom|left)$/,g="currentStyle",b="runtimeStyle",E="left",S="px";function I(Ze,Je){var We=Ze[g]&&Ze[g][Je];if(o.test(We)&&!d.test(Je)){var Me=Ze.style,Fe=Me[E],He=Ze[b][E];Ze[b][E]=Ze[g][E],Me[E]=Je==="fontSize"?"1em":We||0,We=Me.pixelLeft+S,Me[E]=Fe,Ze[b][E]=He}return We===""?"auto":We}var P;typeof window<"u"&&(P=window.getComputedStyle?a:I);function z(Ze,Je){De(Ze,"position")==="static"&&(Ze.style.position="relative");var We=s(Ze),Me={},Fe,He;for(He in Je)Fe=parseFloat(De(Ze,He))||0,Me[He]=Fe+Je[He]-We[He];De(Ze,Me)}function j(Ze,Je){for(var We=0;We<Ze.length;We++)Je(Ze[We])}function q(Ze){return P(Ze,"boxSizing")==="border-box"}var Y=["margin","border","padding"],ie=-1,te=2,V=1,ne=0;function G(Ze,Je,We){var Me={},Fe=Ze.style,He;for(He in Je)Me[He]=Fe[He],Fe[He]=Je[He];We.call(Ze);for(He in Je)Fe[He]=Me[He]}function oe(Ze,Je,We){var Me=0,Fe,He,bt;for(He=0;He<Je.length;He++)if(Fe=Je[He],Fe)for(bt=0;bt<We.length;bt++){var Yt;Fe==="border"?Yt=Fe+We[bt]+"Width":Yt=Fe+We[bt],Me+=parseFloat(P(Ze,Yt))||0}return Me}function he(Ze){return Ze!=null&&Ze==Ze.window}var pe={};j(["Width","Height"],function(Ze){pe["doc"+Ze]=function(Je){var We=Je.document;return Math.max(We.documentElement["scroll"+Ze],We.body["scroll"+Ze],pe["viewport"+Ze](We))},pe["viewport"+Ze]=function(Je){var We="client"+Ze,Me=Je.document,Fe=Me.body,He=Me.documentElement,bt=He[We];return Me.compatMode==="CSS1Compat"&&bt||Fe&&Fe[We]||bt}});function Ee(Ze,Je,We){if(he(Ze))return Je==="width"?pe.viewportWidth(Ze):pe.viewportHeight(Ze);if(Ze.nodeType===9)return Je==="width"?pe.docWidth(Ze):pe.docHeight(Ze);var Me=Je==="width"?["Left","Right"]:["Top","Bottom"],Fe=Je==="width"?Ze.offsetWidth:Ze.offsetHeight;P(Ze);var He=q(Ze),bt=0;(Fe==null||Fe<=0)&&(Fe=void 0,bt=P(Ze,Je),(bt==null||Number(bt)<0)&&(bt=Ze.style[Je]||0),bt=parseFloat(bt)||0),We===void 0&&(We=He?V:ie);var Yt=Fe!==void 0||He,gt=Fe||bt;return We===ie?Yt?gt-oe(Ze,["border","padding"],Me):bt:Yt?gt+(We===V?0:We===te?-oe(Ze,["border"],Me):oe(Ze,["margin"],Me)):bt+oe(Ze,Y.slice(We),Me)}var me={position:"absolute",visibility:"hidden",display:"block"};function Se(Ze){var Je,We=arguments;return Ze.offsetWidth!==0?Je=Ee.apply(void 0,We):G(Ze,me,function(){Je=Ee.apply(void 0,We)}),Je}j(["width","height"],function(Ze){var Je=Ze.charAt(0).toUpperCase()+Ze.slice(1);pe["outer"+Je]=function(Me,Fe){return Me&&Se(Me,Ze,Fe?ne:V)};var We=Ze==="width"?["Left","Right"]:["Top","Bottom"];pe[Ze]=function(Me,Fe){if(Fe!==void 0){if(Me){P(Me);var He=q(Me);return He&&(Fe+=oe(Me,["padding","border"],We)),De(Me,Ze,Fe)}return}return Me&&Se(Me,Ze,ie)}});function De(Ze,Je,We){if(typeof Je=="object"){for(var Me in Je)De(Ze,Me,Je[Me]);return}if(typeof We<"u")typeof We=="number"&&(We=We+"px"),Ze.style[Je]=We;else return P(Ze,Je)}function be(Ze,Je){for(var We in Je)Ze[We]=Je[We];return Ze}var at=R5.exports={getWindow:function(Ze){var Je=Ze.ownerDocument||Ze;return Je.defaultView||Je.parentWindow},offset:function(Ze,Je){if(typeof Je<"u")z(Ze,Je);else return s(Ze)},isWindow:he,each:j,css:De,clone:function(Ze){var Je={};for(var We in Ze)Je[We]=Ze[We];var Me=Ze.overflow;if(Me)for(We in Ze)Je.overflow[We]=Ze.overflow[We];return Je},mix:be,scrollLeft:function(Ze,Je){if(he(Ze)){if(Je===void 0)return r(Ze);window.scrollTo(Je,i(Ze))}else{if(Je===void 0)return Ze.scrollLeft;Ze.scrollLeft=Je}},scrollTop:function(Ze,Je){if(he(Ze)){if(Je===void 0)return i(Ze);window.scrollTo(r(Ze),Je)}else{if(Je===void 0)return Ze.scrollTop;Ze.scrollTop=Je}},merge:function(){for(var Ze={},Je=0;Je<arguments.length;Je++)at.mix(Ze,arguments[Je]);return Ze},viewportWidth:0,viewportHeight:0};return be(at,pe),R5.exports}var F5,uT;function xle(){if(uT)return F5;uT=1;var n=ble();function e(t,r,i){i=i||{},r.nodeType===9&&(r=n.getWindow(r));var s=i.allowHorizontalScroll,a=i.onlyScrollIfNeeded,o=i.alignWithTop,d=i.alignWithLeft;s=s===void 0?!0:s;var g=n.isWindow(r),b=n.offset(t),E=n.outerHeight(t),S=n.outerWidth(t),I,P,z,j,q,Y,ie,te,V,ne;g?(ie=r,ne=n.height(ie),V=n.width(ie),te={left:n.scrollLeft(ie),top:n.scrollTop(ie)},q={left:b.left-te.left,top:b.top-te.top},Y={left:b.left+S-(te.left+V),top:b.top+E-(te.top+ne)},j=te):(I=n.offset(r),P=r.clientHeight,z=r.clientWidth,j={left:r.scrollLeft,top:r.scrollTop},q={left:b.left-(I.left+(parseFloat(n.css(r,"borderLeftWidth"))||0)),top:b.top-(I.top+(parseFloat(n.css(r,"borderTopWidth"))||0))},Y={left:b.left+S-(I.left+z+(parseFloat(n.css(r,"borderRightWidth"))||0)),top:b.top+E-(I.top+P+(parseFloat(n.css(r,"borderBottomWidth"))||0))}),q.top<0||Y.top>0?o===!0?n.scrollTop(r,j.top+q.top):o===!1?n.scrollTop(r,j.top+Y.top):q.top<0?n.scrollTop(r,j.top+q.top):n.scrollTop(r,j.top+Y.top):a||(o=o===void 0?!0:!!o,o?n.scrollTop(r,j.top+q.top):n.scrollTop(r,j.top+Y.top)),s&&(q.left<0||Y.left>0?d===!0?n.scrollLeft(r,j.left+q.left):d===!1?n.scrollLeft(r,j.left+Y.left):q.left<0?n.scrollLeft(r,j.left+q.left):n.scrollLeft(r,j.left+Y.left):a||(d=d===void 0?!0:!!d,d?n.scrollLeft(r,j.left+q.left):n.scrollLeft(r,j.left+Y.left)))}return F5=e,F5}var L5,AT;function wle(){return AT||(AT=1,L5=xle()),L5}var U5,cT;function Mle(){if(cT)return U5;cT=1;var n=Object.assign||function(I){for(var P=1;P<arguments.length;P++){var z=arguments[P];for(var j in z)Object.prototype.hasOwnProperty.call(z,j)&&(I[j]=z[j])}return I},e=function(){function I(P,z){for(var j=0;j<z.length;j++){var q=z[j];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(P,q.key,q)}}return function(P,z,j){return z&&I(P.prototype,z),j&&I(P,j),P}}();function t(I,P){if(!(I instanceof P))throw new TypeError("Cannot call a class as a function")}function r(I,P){if(!I)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P&&(typeof P=="object"||typeof P=="function")?P:I}function i(I,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof P);I.prototype=Object.create(P&&P.prototype,{constructor:{value:I,enumerable:!1,writable:!0,configurable:!0}}),P&&(Object.setPrototypeOf?Object.setPrototypeOf(I,P):I.__proto__=P)}var s=za(),a=xp(),o=$C(),d=o.findDOMNode,g=wle(),b=["blur","checkValidity","click","focus","select","setCustomValidity","setSelectionRange","setRangeText"];function E(){return{x:window.pageXOffset!==void 0?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,y:window.pageYOffset!==void 0?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop}}var S=function(I){i(P,I);function P(z){t(this,P);var j=r(this,(P.__proto__||Object.getPrototypeOf(P)).call(this,z));return j.state={isOpen:!1,highlightedIndex:null},j._debugStates=[],j.ensureHighlightedIndex=j.ensureHighlightedIndex.bind(j),j.exposeAPI=j.exposeAPI.bind(j),j.handleInputFocus=j.handleInputFocus.bind(j),j.handleInputBlur=j.handleInputBlur.bind(j),j.handleChange=j.handleChange.bind(j),j.handleKeyDown=j.handleKeyDown.bind(j),j.handleInputClick=j.handleInputClick.bind(j),j.maybeAutoCompleteText=j.maybeAutoCompleteText.bind(j),j}return e(P,[{key:"componentWillMount",value:function(){this.refs={},this._ignoreBlur=!1,this._ignoreFocus=!1,this._scrollOffset=null,this._scrollTimer=null}},{key:"componentWillUnmount",value:function(){clearTimeout(this._scrollTimer),this._scrollTimer=null}},{key:"componentWillReceiveProps",value:function(j){this.state.highlightedIndex!==null&&this.setState(this.ensureHighlightedIndex),j.autoHighlight&&(this.props.value!==j.value||this.state.highlightedIndex===null)&&this.setState(this.maybeAutoCompleteText)}},{key:"componentDidMount",value:function(){this.isOpen()&&this.setMenuPositions()}},{key:"componentDidUpdate",value:function(j,q){(this.state.isOpen&&!q.isOpen||"open"in this.props&&this.props.open&&!j.open)&&this.setMenuPositions(),this.maybeScrollItemIntoView(),q.isOpen!==this.state.isOpen&&this.props.onMenuVisibilityChange(this.state.isOpen)}},{key:"exposeAPI",value:function(j){var q=this;this.refs.input=j,b.forEach(function(Y){return q[Y]=j&&j[Y]&&j[Y].bind(j)})}},{key:"maybeScrollItemIntoView",value:function(){if(this.isOpen()&&this.state.highlightedIndex!==null){var j=this.refs["item-"+this.state.highlightedIndex],q=this.refs.menu;g(d(j),d(q),{onlyScrollIfNeeded:!0})}}},{key:"handleKeyDown",value:function(j){P.keyDownHandlers[j.key]?P.keyDownHandlers[j.key].call(this,j):this.isOpen()||this.setState({isOpen:!0})}},{key:"handleChange",value:function(j){this.props.onChange(j,j.target.value)}},{key:"getFilteredItems",value:function(j){var q=j.items;return j.shouldItemRender&&(q=q.filter(function(Y){return j.shouldItemRender(Y,j.value)})),j.sortItems&&q.sort(function(Y,ie){return j.sortItems(Y,ie,j.value)}),q}},{key:"maybeAutoCompleteText",value:function(j,q){for(var Y=j.highlightedIndex,ie=q.value,te=q.getItemValue,V=Y===null?0:Y,ne=this.getFilteredItems(q),G=0;G<ne.length&&!q.isItemSelectable(ne[V]);G++)V=(V+1)%ne.length;var oe=ne[V]&&q.isItemSelectable(ne[V])?ne[V]:null;if(ie!==""&&oe){var he=te(oe),pe=he.toLowerCase().indexOf(ie.toLowerCase())===0;if(pe)return{highlightedIndex:V}}return{highlightedIndex:null}}},{key:"ensureHighlightedIndex",value:function(j,q){if(j.highlightedIndex>=this.getFilteredItems(q).length)return{highlightedIndex:null}}},{key:"setMenuPositions",value:function(){var j=this.refs.input,q=j.getBoundingClientRect(),Y=window.window.getComputedStyle(j),ie=parseInt(Y.marginBottom,10)||0,te=parseInt(Y.marginLeft,10)||0,V=parseInt(Y.marginRight,10)||0;this.setState({menuTop:q.bottom+ie,menuLeft:q.left+te,menuWidth:q.width+te+V})}},{key:"highlightItemFromMouse",value:function(j){this.setState({highlightedIndex:j})}},{key:"selectItemFromMouse",value:function(j){var q=this,Y=this.props.getItemValue(j);this.setIgnoreBlur(!1),this.setState({isOpen:!1,highlightedIndex:null},function(){q.props.onSelect(Y,j)})}},{key:"setIgnoreBlur",value:function(j){this._ignoreBlur=j}},{key:"renderMenu",value:function(){var j=this,q=this.getFilteredItems(this.props).map(function(te,V){var ne=j.props.renderItem(te,j.state.highlightedIndex===V,{cursor:"default"});return s.cloneElement(ne,{onMouseEnter:j.props.isItemSelectable(te)?function(){return j.highlightItemFromMouse(V)}:null,onClick:j.props.isItemSelectable(te)?function(){return j.selectItemFromMouse(te)}:null,ref:function(oe){return j.refs["item-"+V]=oe}})}),Y={left:this.state.menuLeft,top:this.state.menuTop,minWidth:this.state.menuWidth},ie=this.props.renderMenu(q,this.props.value,Y);return s.cloneElement(ie,{ref:function(V){return j.refs.menu=V},onTouchStart:function(){return j.setIgnoreBlur(!0)},onMouseEnter:function(){return j.setIgnoreBlur(!0)},onMouseLeave:function(){return j.setIgnoreBlur(!1)}})}},{key:"handleInputBlur",value:function(j){var q=this;if(this._ignoreBlur){this._ignoreFocus=!0,this._scrollOffset=E(),this.refs.input.focus();return}var Y=void 0,ie=this.state.highlightedIndex;if(this.props.selectOnBlur&&ie!==null){var te=this.getFilteredItems(this.props),V=te[ie],ne=this.props.getItemValue(V);Y=function(){return q.props.onSelect(ne,V)}}this.setState({isOpen:!1,highlightedIndex:null},Y);var G=this.props.inputProps.onBlur;G&&G(j)}},{key:"handleInputFocus",value:function(j){var q=this;if(this._ignoreFocus){this._ignoreFocus=!1;var Y=this._scrollOffset,ie=Y.x,te=Y.y;this._scrollOffset=null,window.scrollTo(ie,te),clearTimeout(this._scrollTimer),this._scrollTimer=setTimeout(function(){q._scrollTimer=null,window.scrollTo(ie,te)},0);return}this.setState({isOpen:!0});var V=this.props.inputProps.onFocus;V&&V(j)}},{key:"isInputFocused",value:function(){var j=this.refs.input;return j.ownerDocument&&j===j.ownerDocument.activeElement}},{key:"handleInputClick",value:function(){this.isInputFocused()&&!this.isOpen()&&this.setState({isOpen:!0})}},{key:"composeEventHandlers",value:function(j,q){return q?function(Y){j(Y),q(Y)}:j}},{key:"isOpen",value:function(){return"open"in this.props?this.props.open:this.state.isOpen}},{key:"render",value:function(){this.props.debug&&this._debugStates.push({id:this._debugStates.length,state:this.state});var j=this.props.inputProps,q=this.isOpen();return s.createElement("div",n({style:n({},this.props.wrapperStyle)},this.props.wrapperProps),this.props.renderInput(n({},j,{role:"combobox","aria-autocomplete":"list","aria-expanded":q,autoComplete:"off",ref:this.exposeAPI,onFocus:this.handleInputFocus,onBlur:this.handleInputBlur,onChange:this.handleChange,onKeyDown:this.composeEventHandlers(this.handleKeyDown,j.onKeyDown),onClick:this.composeEventHandlers(this.handleInputClick,j.onClick),value:this.props.value})),q&&this.renderMenu(),this.props.debug&&s.createElement("pre",{style:{marginLeft:300}},JSON.stringify(this._debugStates.slice(Math.max(0,this._debugStates.length-5),this._debugStates.length),null,2)))}}]),P}(s.Component);return S.propTypes={items:a.array.isRequired,value:a.any,onChange:a.func,onSelect:a.func,shouldItemRender:a.func,isItemSelectable:a.func,sortItems:a.func,getItemValue:a.func.isRequired,renderItem:a.func.isRequired,renderMenu:a.func,menuStyle:a.object,renderInput:a.func,inputProps:a.object,wrapperProps:a.object,wrapperStyle:a.object,autoHighlight:a.bool,selectOnBlur:a.bool,onMenuVisibilityChange:a.func,open:a.bool,debug:a.bool},S.defaultProps={value:"",wrapperProps:{},wrapperStyle:{display:"inline-block"},inputProps:{},renderInput:function(P){return s.createElement("input",P)},onChange:function(){},onSelect:function(){},isItemSelectable:function(){return!0},renderMenu:function(P,z,j){return s.createElement("div",{style:n({},j,this.menuStyle),children:P})},menuStyle:{borderRadius:"3px",boxShadow:"0 2px 12px rgba(0, 0, 0, 0.1)",background:"rgba(255, 255, 255, 0.9)",padding:"2px 0",fontSize:"90%",position:"fixed",overflow:"auto",maxHeight:"50%"},autoHighlight:!0,selectOnBlur:!1,onMenuVisibilityChange:function(){}},S.keyDownHandlers={ArrowDown:function(P){P.preventDefault();var z=this.getFilteredItems(this.props);if(z.length){for(var j=this.state.highlightedIndex,q=j===null?-1:j,Y=0;Y<z.length;Y++){var ie=(q+Y+1)%z.length;if(this.props.isItemSelectable(z[ie])){q=ie;break}}q>-1&&q!==j&&this.setState({highlightedIndex:q,isOpen:!0})}},ArrowUp:function(P){P.preventDefault();var z=this.getFilteredItems(this.props);if(z.length){for(var j=this.state.highlightedIndex,q=j===null?z.length:j,Y=0;Y<z.length;Y++){var ie=(q-(1+Y)+z.length)%z.length;if(this.props.isItemSelectable(z[ie])){q=ie;break}}q!==z.length&&this.setState({highlightedIndex:q,isOpen:!0})}},Enter:function(P){var z=this;if(P.keyCode===13)if(this.setIgnoreBlur(!1),this.isOpen())if(this.state.highlightedIndex==null)this.setState({isOpen:!1},function(){z.refs.input.select()});else{P.preventDefault();var j=this.getFilteredItems(this.props)[this.state.highlightedIndex],q=this.props.getItemValue(j);this.setState({isOpen:!1,highlightedIndex:null},function(){z.refs.input.setSelectionRange(q.length,q.length),z.props.onSelect(q,j)})}else return},Escape:function(){this.setIgnoreBlur(!1),this.setState({highlightedIndex:null,isOpen:!1})},Tab:function(){this.setIgnoreBlur(!1)}},U5=S,U5}var Sle=Mle();const Ele=el(Sle);function No(){var n="/home/runner/work/maputnik/maputnik/src/components/InputAutocomplete.tsx",e="6ef9facf9aeabdae687b5aca973710969d826d60",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputAutocomplete.tsx",statementMap:{0:{start:{line:5,column:19},end:{line:5,column:22}},1:{start:{line:7,column:10},end:{line:9,column:3}},2:{start:{line:10,column:23},end:{line:10,column:27}},3:{start:{line:11,column:24},end:{line:15,column:3}},4:{start:{line:17,column:4},end:{line:25,column:5}},5:{start:{line:18,column:24},end:{line:18,column:96}},6:{start:{line:19,column:31},end:{line:19,column:62}},7:{start:{line:20,column:6},end:{line:24,column:7}},8:{start:{line:21,column:8},end:{line:23,column:11}},9:{start:{line:28,column:4},end:{line:28,column:25}},10:{start:{line:31,column:4},end:{line:31,column:25}},11:{start:{line:34,column:4},end:{line:34,column:47}},12:{start:{line:37,column:4},end:{line:86,column:6}},13:{start:{line:41,column:10},end:{line:41,column:39}},14:{start:{line:63,column:36},end:{line:63,column:43}},15:{start:{line:64,column:29},end:{line:64,column:45}},16:{start:{line:65,column:33},end:{line:65,column:49}},17:{start:{line:67,column:14},end:{line:69,column:15}},18:{start:{line:68,column:16},end:{line:68,column:79}},19:{start:{line:70,column:14},end:{line:70,column:27}},20:{start:{line:72,column:65},end:{line:82,column:13}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:12,column:14},end:{line:12,column:15}},loc:{start:{line:12,column:20},end:{line:13,column:5}},line:12},1:{name:"(anonymous_1)",decl:{start:{line:16,column:2},end:{line:16,column:3}},loc:{start:{line:16,column:18},end:{line:26,column:3}},line:16},2:{name:"(anonymous_2)",decl:{start:{line:27,column:2},end:{line:27,column:3}},loc:{start:{line:27,column:22},end:{line:29,column:3}},line:27},3:{name:"(anonymous_3)",decl:{start:{line:30,column:2},end:{line:30,column:3}},loc:{start:{line:30,column:23},end:{line:32,column:3}},line:30},4:{name:"(anonymous_4)",decl:{start:{line:33,column:2},end:{line:33,column:3}},loc:{start:{line:33,column:14},end:{line:35,column:3}},line:33},5:{name:"(anonymous_5)",decl:{start:{line:36,column:2},end:{line:36,column:3}},loc:{start:{line:36,column:11},end:{line:87,column:3}},line:36},6:{name:"(anonymous_6)",decl:{start:{line:40,column:13},end:{line:40,column:14}},loc:{start:{line:40,column:21},end:{line:42,column:9}},line:40},7:{name:"(anonymous_7)",decl:{start:{line:63,column:26},end:{line:63,column:27}},loc:{start:{line:63,column:36},end:{line:63,column:43}},line:63},8:{name:"(anonymous_8)",decl:{start:{line:64,column:22},end:{line:64,column:23}},loc:{start:{line:64,column:29},end:{line:64,column:45}},line:64},9:{name:"(anonymous_9)",decl:{start:{line:65,column:22},end:{line:65,column:23}},loc:{start:{line:65,column:33},end:{line:65,column:49}},line:65},10:{name:"(anonymous_10)",decl:{start:{line:66,column:30},end:{line:66,column:31}},loc:{start:{line:66,column:52},end:{line:71,column:13}},line:66},11:{name:"(anonymous_11)",decl:{start:{line:72,column:24},end:{line:72,column:25}},loc:{start:{line:72,column:65},end:{line:82,column:13}},line:72}},branchMap:{0:{loc:{start:{line:17,column:4},end:{line:25,column:5}},type:"if",locations:[{start:{line:17,column:4},end:{line:25,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:17},1:{loc:{start:{line:20,column:6},end:{line:24,column:7}},type:"if",locations:[{start:{line:20,column:6},end:{line:24,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:20},2:{loc:{start:{line:34,column:24},end:{line:34,column:45}},type:"cond-expr",locations:[{start:{line:34,column:35},end:{line:34,column:41}},{start:{line:34,column:44},end:{line:34,column:45}}],line:34},3:{loc:{start:{line:66,column:37},end:{line:66,column:47}},type:"default-arg",locations:[{start:{line:66,column:45},end:{line:66,column:47}}],line:66},4:{loc:{start:{line:67,column:14},end:{line:69,column:15}},type:"if",locations:[{start:{line:67,column:14},end:{line:69,column:15}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:67}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0],4:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputAutocomplete.tsx"],names:[],mappings:"AAsFU;AAtFV,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,OAAO,kBAAkB;AAGzB,MAAM,aAAa;AAUnB,qBAAqB,0BAA0B,MAAM,UAAkC;AAAA,EACrF,QAAQ;AAAA,IACN,WAAW;AAAA,EACb;AAAA,EAEA,qBAA4C;AAAA,EAE5C,OAAO,eAAe;AAAA,IACpB,UAAU,MAAM;AAAA,IAAC;AAAA,IACjB,SAAS,CAAC;AAAA,EACZ;AAAA,EAEA,gBAAgB;AACd,QAAG,KAAK,MAAM,4BAA4B;AACxC,YAAM,YAAY,OAAO,cAAc,KAAK,mBAAoB,sBAAsB,EAAE;AACxF,YAAM,mBAAmB,KAAK,IAAI,WAAW,UAAU;AAEvD,UAAG,oBAAoB,KAAK,MAAM,WAAW;AAC3C,aAAK,SAAS;AAAA,UACZ,WAAW;AAAA,QACb,CAAC;AAAA,MACH;AAAA,IACF;AAAA,EACF;AAAA,EAEA,oBAAoB;AAClB,SAAK,cAAc;AAAA,EACrB;AAAA,EAEA,qBAAqB;AACnB,SAAK,cAAc;AAAA,EACrB;AAAA,EAEA,SAAS,GAAW;AAClB,SAAK,MAAM,SAAS,MAAM,KAAK,SAAY,CAAC;AAAA,EAC9C;AAAA,EAEA,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,KAAK,CAAC,OAAO;AACX,eAAK,qBAAqB;AAAA,QAC5B;AAAA,QAEA;AAAA,UAAC;AAAA;AAAA,YACC,WAAW;AAAA,cACT,UAAU;AAAA,cACV,UAAU;AAAA,cACV,WAAW,KAAK,MAAM;AAAA,cACtB,QAAQ;AAAA,YACV;AAAA,YACA,cAAc;AAAA,cACZ,WAAW;AAAA,cACX,OAAO,CAAC;AAAA,YACV;AAAA,YACA,YAAY;AAAA,cACV,cAAc,KAAK,MAAM,YAAY;AAAA,cACrC,WAAW;AAAA,cACX,YAAY;AAAA,YACd;AAAA,YACA,OAAO,KAAK,MAAM;AAAA,YAClB,OAAO,KAAK,MAAM;AAAA,YAClB,cAAc,CAAC,SAAS,KAAK,CAAC;AAAA,YAC9B,UAAU,OAAK,KAAK,SAAS,CAAC;AAAA,YAC9B,UAAU,CAAC,IAAI,MAAM,KAAK,SAAS,CAAC;AAAA,YACpC,kBAAkB,CAAC,MAAM,QAAM,OAAO;AACpC,kBAAI,OAAO,UAAW,UAAU;AAC9B,uBAAO,KAAK,CAAC,EAAE,YAAY,EAAE,QAAQ,MAAM,YAAY,CAAC,IAAI;AAAA,cAC9D;AACA,qBAAO;AAAA,YACT;AAAA,YACA,YAAY,CAAC,MAAM,kBACjB;AAAA,cAAC;AAAA;AAAA,gBAEC,WAAW,WAAW;AAAA,kBACpB,mCAAmC;AAAA,kBACnC,4CAA4C;AAAA,gBAC9C,CAAC;AAAA,gBAEA,eAAK,CAAC;AAAA;AAAA,cANF,KAAK,CAAC;AAAA,YAOb;AAAA;AAAA,QAEJ;AAAA;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"6ef9facf9aeabdae687b5aca973710969d826d60"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return No=function(){return a},a}No();const dT=(No().s[0]++,140);class rv extends nr.Component{constructor(){super(...arguments);Pn(this,"state",(No().s[1]++,{maxHeight:dT}));Pn(this,"autocompleteMenuEl",(No().s[2]++,null))}calcMaxHeight(){if(No().f[1]++,No().s[4]++,this.props.keepMenuWithinWindowBounds){No().b[0][0]++;const t=(No().s[5]++,window.innerHeight-this.autocompleteMenuEl.getBoundingClientRect().top),r=(No().s[6]++,Math.min(t,dT));No().s[7]++,r!=this.state.maxHeight?(No().b[1][0]++,No().s[8]++,this.setState({maxHeight:r})):No().b[1][1]++}else No().b[0][1]++}componentDidMount(){No().f[2]++,No().s[9]++,this.calcMaxHeight()}componentDidUpdate(){No().f[3]++,No().s[10]++,this.calcMaxHeight()}onChange(t){No().f[4]++,No().s[11]++,this.props.onChange(t===""?(No().b[2][0]++,void 0):(No().b[2][1]++,t))}render(){return No().f[5]++,No().s[12]++,ue.jsx("div",{ref:t=>{No().f[6]++,No().s[13]++,this.autocompleteMenuEl=t},children:ue.jsx(Ele,{menuStyle:{position:"fixed",overflow:"auto",maxHeight:this.state.maxHeight,zIndex:"998"},wrapperProps:{className:"maputnik-autocomplete",style:{}},inputProps:{"aria-label":this.props["aria-label"],className:"maputnik-string",spellCheck:!1},value:this.props.value,items:this.props.options,getItemValue:t=>(No().f[7]++,No().s[14]++,t[0]),onSelect:t=>(No().f[8]++,No().s[15]++,this.onChange(t)),onChange:(t,r)=>(No().f[9]++,No().s[16]++,this.onChange(r)),shouldItemRender:(t,r=(No().b[3][0]++,""))=>(No().f[10]++,No().s[17]++,typeof r=="string"?(No().b[4][0]++,No().s[18]++,t[0].toLowerCase().indexOf(r.toLowerCase())>-1):(No().b[4][1]++,No().s[19]++,!1)),renderItem:(t,r)=>(No().f[11]++,No().s[20]++,ue.jsx("div",{className:am({"maputnik-autocomplete-menu-item":!0,"maputnik-autocomplete-menu-item-selected":r}),children:t[1]},t[0]))})})}}Pn(rv,"defaultProps",(No().s[3]++,{onChange:()=>{No().f[0]++},options:[]}));function Qp(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldSource.tsx",e="ab049bb75b4ddccd0f9bdd2bba8785d564ca92f6",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldSource.tsx",statementMap:{0:{start:{line:8,column:24},end:{line:12,column:3}},1:{start:{line:14,column:14},end:{line:14,column:26}},2:{start:{line:15,column:4},end:{line:31,column:6}},3:{start:{line:27,column:56},end:{line:27,column:66}},4:{start:{line:34,column:20},end:{line:34,column:58}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:14},end:{line:9,column:15}},loc:{start:{line:9,column:20},end:{line:10,column:5}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:13,column:2},end:{line:13,column:3}},loc:{start:{line:13,column:11},end:{line:32,column:3}},line:13},2:{name:"(anonymous_2)",decl:{start:{line:27,column:47},end:{line:27,column:48}},loc:{start:{line:27,column:56},end:{line:27,column:66}},line:27}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0,1:0,2:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldSource.tsx"],names:[],mappings:"AA6BM;AA7BN,OAAO,WAAW;AAElB,OAAO,YAAY;AACnB,OAAO,WAAW;AAClB,OAAO,uBAAuB;AAC9B,SAA0B,uBAAuB;AAUjD,MAAM,4BAA4B,MAAM,UAAoC;AAAA,EAC1E,OAAO,eAAe;AAAA,IACpB,UAAU,MAAM;AAAA,IAAC;AAAA,IACjB,WAAW,CAAC;AAAA,EACd;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,OAAO,EAAE,QAAQ;AAAA,QACjB,WAAW,OAAO,MAAM;AAAA,QACxB,OAAO,KAAK,MAAM;AAAA,QAClB,eAAa,KAAK,MAAM;AAAA,QAExB;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,KAAK,MAAM;AAAA,YAClB,UAAU,KAAK,MAAM;AAAA,YACrB,SAAS,KAAK,MAAM,WAAW,IAAI,SAAO,CAAC,KAAK,GAAG,CAAC;AAAA;AAAA,QACtD;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,cAAc,gBAAgB,EAAE,mBAAmB;AACzD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ab049bb75b4ddccd0f9bdd2bba8785d564ca92f6"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Qp=function(){return a},a}Qp();class nW extends nr.Component{render(){var t;Qp().f[1]++;const e=(Qp().s[1]++,this.props.t);return Qp().s[2]++,ue.jsx(fa,{label:e("Source"),fieldSpec:ts.layer.source,error:this.props.error,"data-wd-key":this.props.wdKey,children:ue.jsx(rv,{value:this.props.value,onChange:this.props.onChange,options:(t=this.props.sourceIds)==null?void 0:t.map(r=>(Qp().f[2]++,Qp().s[3]++,[r,r]))})})}}Pn(nW,"defaultProps",(Qp().s[0]++,{onChange:()=>{Qp().f[0]++},sourceIds:[]}));const rW=(Qp().s[4]++,Ns()(nW));function qp(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldSourceLayer.tsx",e="d17faa4f03faf23184e12eb0563d322067d1f63d",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldSourceLayer.tsx",statementMap:{0:{start:{line:8,column:24},end:{line:13,column:3}},1:{start:{line:15,column:14},end:{line:15,column:26}},2:{start:{line:16,column:4},end:{line:33,column:6}},3:{start:{line:29,column:59},end:{line:29,column:65}},4:{start:{line:36,column:25},end:{line:36,column:68}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:14},end:{line:9,column:15}},loc:{start:{line:9,column:20},end:{line:10,column:5}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:11},end:{line:34,column:3}},line:14},2:{name:"(anonymous_2)",decl:{start:{line:29,column:52},end:{line:29,column:53}},loc:{start:{line:29,column:59},end:{line:29,column:65}},line:29}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0,1:0,2:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldSourceLayer.tsx"],names:[],mappings:"AA8BM;AA9BN,OAAO,WAAW;AAElB,SAAQ,cAAa;AACrB,OAAO,WAAW;AAClB,OAAO,uBAAuB;AAC9B,SAA0B,uBAAuB;AAUjD,MAAM,iCAAiC,MAAM,UAAyC;AAAA,EACpF,OAAO,eAAe;AAAA,IACpB,UAAU,MAAM;AAAA,IAAC;AAAA,IACjB,gBAAgB,CAAC;AAAA,IACjB,SAAS;AAAA,EACX;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,OAAO,EAAE,cAAc;AAAA,QACvB,WAAW,OAAO,MAAM,cAAc;AAAA,QACtC,eAAY;AAAA,QACZ,OAAO,KAAK,MAAM;AAAA,QAElB;AAAA,UAAC;AAAA;AAAA,YACC,4BAA4B,CAAC,CAAC,KAAK,MAAM;AAAA,YACzC,OAAO,KAAK,MAAM;AAAA,YAClB,UAAU,KAAK,MAAM;AAAA,YACrB,SAAS,KAAK,MAAM,gBAAgB,IAAI,OAAK,CAAC,GAAG,CAAC,CAAC;AAAA;AAAA,QACrD;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,mBAAmB,gBAAgB,EAAE,wBAAwB;AACnE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d17faa4f03faf23184e12eb0563d322067d1f63d"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return qp=function(){return a},a}qp();class iW extends nr.Component{render(){var t;qp().f[1]++;const e=(qp().s[1]++,this.props.t);return qp().s[2]++,ue.jsx(fa,{label:e("Source Layer"),fieldSpec:Ts.layer["source-layer"],"data-wd-key":"layer-source-layer",error:this.props.error,children:ue.jsx(rv,{keepMenuWithinWindowBounds:!!this.props.isFixed,value:this.props.value,onChange:this.props.onChange,options:(t=this.props.sourceLayerIds)==null?void 0:t.map(r=>(qp().f[2]++,qp().s[3]++,[r,r]))})})}}Pn(iW,"defaultProps",(qp().s[0]++,{onChange:()=>{qp().f[0]++},sourceLayerIds:[],isFixed:!1}));const oW=(qp().s[4]++,Ns()(iW));function Gr(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalAdd.tsx",e="7a9f0314912c2a2e8e47cddf3aaf5469476531e0",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalAdd.tsx",statementMap:{0:{start:{line:11,column:13},end:{line:26,column:3}},1:{start:{line:12,column:26},end:{line:12,column:52}},2:{start:{line:13,column:18},end:{line:16,column:5}},3:{start:{line:17,column:4},end:{line:22,column:5}},4:{start:{line:18,column:6},end:{line:18,column:39}},5:{start:{line:19,column:6},end:{line:21,column:7}},6:{start:{line:20,column:8},end:{line:20,column:59}},7:{start:{line:23,column:4},end:{line:23,column:30}},8:{start:{line:24,column:4},end:{line:24,column:45}},9:{start:{line:25,column:4},end:{line:25,column:35}},10:{start:{line:28,column:4},end:{line:28,column:17}},11:{start:{line:29,column:18},end:{line:32,column:5}},12:{start:{line:33,column:4},end:{line:36,column:5}},13:{start:{line:34,column:6},end:{line:34,column:56}},14:{start:{line:35,column:6},end:{line:35,column:66}},15:{start:{line:37,column:4},end:{line:37,column:23}},16:{start:{line:40,column:20},end:{line:40,column:34}},17:{start:{line:41,column:20},end:{line:41,column:35}},18:{start:{line:42,column:32},end:{line:42,column:56}},19:{start:{line:43,column:32},end:{line:43,column:56}},20:{start:{line:44,column:4},end:{line:51,column:5}},21:{start:{line:48,column:6},end:{line:50,column:9}},22:{start:{line:54,column:22},end:{line:54,column:54}},23:{start:{line:55,column:4},end:{line:55,column:34}},24:{start:{line:58,column:20},end:{line:58,column:22}},25:{start:{line:59,column:18},end:{line:79,column:5}},26:{start:{line:80,column:4},end:{line:85,column:5}},27:{start:{line:81,column:22},end:{line:81,column:30}},28:{start:{line:82,column:6},end:{line:84,column:7}},29:{start:{line:83,column:8},end:{line:83,column:26}},30:{start:{line:86,column:4},end:{line:86,column:19}},31:{start:{line:89,column:14},end:{line:89,column:26}},32:{start:{line:90,column:20},end:{line:90,column:52}},33:{start:{line:91,column:19},end:{line:91,column:61}},34:{start:{line:92,column:4},end:{line:148,column:6}},35:{start:{line:107,column:16},end:{line:107,column:41}},36:{start:{line:116,column:31},end:{line:116,column:57}},37:{start:{line:125,column:31},end:{line:125,column:59}},38:{start:{line:134,column:31},end:{line:134,column:67}},39:{start:{line:151,column:17},end:{line:151,column:52}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:11,column:13},end:{line:11,column:14}},loc:{start:{line:11,column:19},end:{line:26,column:3}},line:11},1:{name:"(anonymous_1)",decl:{start:{line:27,column:2},end:{line:27,column:3}},loc:{start:{line:27,column:21},end:{line:38,column:3}},line:27},2:{name:"(anonymous_2)",decl:{start:{line:39,column:2},end:{line:39,column:3}},loc:{start:{line:39,column:44},end:{line:52,column:3}},line:39},3:{name:"(anonymous_3)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:29},end:{line:56,column:3}},line:53},4:{name:"(anonymous_4)",decl:{start:{line:57,column:2},end:{line:57,column:3}},loc:{start:{line:57,column:19},end:{line:87,column:3}},line:57},5:{name:"(anonymous_5)",decl:{start:{line:88,column:2},end:{line:88,column:3}},loc:{start:{line:88,column:11},end:{line:149,column:3}},line:88},6:{name:"(anonymous_6)",decl:{start:{line:106,column:24},end:{line:106,column:25}},loc:{start:{line:106,column:31},end:{line:108,column:15}},line:106},7:{name:"(anonymous_7)",decl:{start:{line:116,column:24},end:{line:116,column:25}},loc:{start:{line:116,column:31},end:{line:116,column:57}},line:116},8:{name:"(anonymous_8)",decl:{start:{line:125,column:24},end:{line:125,column:25}},loc:{start:{line:125,column:31},end:{line:125,column:59}},line:125},9:{name:"(anonymous_9)",decl:{start:{line:134,column:24},end:{line:134,column:25}},loc:{start:{line:134,column:31},end:{line:134,column:67}},line:134}},branchMap:{0:{loc:{start:{line:17,column:4},end:{line:22,column:5}},type:"if",locations:[{start:{line:17,column:4},end:{line:22,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:17},1:{loc:{start:{line:19,column:6},end:{line:21,column:7}},type:"if",locations:[{start:{line:19,column:6},end:{line:21,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:19},2:{loc:{start:{line:19,column:10},end:{line:19,column:68}},type:"binary-expr",locations:[{start:{line:19,column:10},end:{line:19,column:38}},{start:{line:19,column:42},end:{line:19,column:68}}],line:19},3:{loc:{start:{line:33,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:33,column:4},end:{line:36,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:33},4:{loc:{start:{line:44,column:4},end:{line:51,column:5}},type:"if",locations:[{start:{line:44,column:4},end:{line:51,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:44},5:{loc:{start:{line:46,column:6},end:{line:46,column:160}},type:"binary-expr",locations:[{start:{line:46,column:6},end:{line:46,column:25}},{start:{line:46,column:29},end:{line:46,column:52}},{start:{line:46,column:56},end:{line:46,column:106}},{start:{line:46,column:110},end:{line:46,column:160}}],line:46},6:{loc:{start:{line:54,column:22},end:{line:54,column:54}},type:"binary-expr",locations:[{start:{line:54,column:22},end:{line:54,column:48}},{start:{line:54,column:52},end:{line:54,column:54}}],line:54},7:{loc:{start:{line:55,column:11},end:{line:55,column:33}},type:"binary-expr",locations:[{start:{line:55,column:11},end:{line:55,column:27}},{start:{line:55,column:31},end:{line:55,column:33}}],line:55},8:{loc:{start:{line:82,column:6},end:{line:84,column:7}},type:"if",locations:[{start:{line:82,column:6},end:{line:84,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:82},9:{loc:{start:{line:82,column:10},end:{line:82,column:61}},type:"binary-expr",locations:[{start:{line:82,column:10},end:{line:82,column:24}},{start:{line:82,column:28},end:{line:82,column:61}}],line:82},10:{loc:{start:{line:119,column:10},end:{line:127,column:11}},type:"binary-expr",locations:[{start:{line:119,column:10},end:{line:119,column:42}},{start:{line:119,column:62},end:{line:127,column:11}}],line:119},11:{loc:{start:{line:128,column:10},end:{line:136,column:11}},type:"binary-expr",locations:[{start:{line:128,column:10},end:{line:128,column:87}},{start:{line:128,column:107},end:{line:136,column:11}}],line:128}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0,0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalAdd.tsx"],names:[],mappings:"AA2IM,SACE,KADF;AA3IN,OAAO,WAAW;AAElB,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,OAAO,eAAe;AACtB,OAAO,aAAa;AACpB,OAAO,iBAAiB;AACxB,OAAO,sBAAsB;AAE7B,SAA0B,uBAAuB;AAkBjD,MAAM,yBAAyB,MAAM,UAAgD;AAAA,EACnF,WAAW,MAAM;AACf,UAAM,gBAAgB,KAAK,MAAM,OAAO,MAAM,CAAC;AAC/C,UAAM,QAAuB;AAAA,MAC3B,IAAI,KAAK,MAAM;AAAA,MACf,MAAM,KAAK,MAAM;AAAA,IACnB;AAEA,QAAG,KAAK,MAAM,SAAS,cAAc;AACnC,YAAM,SAAS,KAAK,MAAM;AAC1B,UAAG,KAAK,MAAM,SAAS,YAAY,KAAK,MAAM,cAAc,GAAG;AAC7D,cAAM,cAAc,IAAI,KAAK,MAAM,cAAc;AAAA,MACnD;AAAA,IACF;AAEA,kBAAc,KAAK,KAA2B;AAE9C,SAAK,MAAM,eAAe,aAAa;AACvC,SAAK,MAAM,aAAa,KAAK;AAAA,EAC/B;AAAA,EAEA,YAAY,OAA8B;AACxC,UAAM,KAAK;AACX,UAAM,QAAuB;AAAA,MAC3B,MAAM;AAAA,MACN,IAAI;AAAA,IACN;AAEA,QAAG,MAAM,QAAQ,SAAS,GAAG;AAC3B,YAAM,SAAS,OAAO,KAAK,KAAK,MAAM,OAAO,EAAE,CAAC;AAChD,YAAM,cAAc,IAAI,KAAK,MAAM,QAAQ,MAAM,MAAgD,EAAE,CAAC;AAAA,IACtG;AACA,SAAK,QAAQ;AAAA,EACf;AAAA,EAEA,mBAAmB,YAAmC,WAA0B;AAE9E,UAAM,UAAU,UAAU;AAC1B,UAAM,UAAU,KAAK,MAAM;AAE3B,UAAM,sBAAsB,KAAK,WAAW,OAAO;AACnD,UAAM,sBAAsB,KAAK,WAAW,OAAO;AAEnD;AAAA;AAAA,MAEE,YAAY,WACT,UAAU,WAAW,MAErB,oBAAoB,QAAQ,UAAU,MAAO,IAAI,MAEjD,oBAAoB,QAAQ,KAAK,MAAM,MAAO,IAAI;AAAA,MACrD;AAEA,WAAK,SAAS;AAAA,QACZ,QAAQ;AAAA,MACV,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,mBAAmB,QAAgB;AACjC,UAAM,YAAY,KAAK,MAAM,QAAQ,MAAM,KAAK,CAAC;AACjD,WAAO,UAAU,UAAU,CAAC;AAAA,EAC9B;AAAA,EAEA,WAAW,MAAc;AACvB,UAAM,UAAU,CAAC;AAEjB,UAAM,QAAQ;AAAA,MACZ,QAAQ;AAAA,QACN;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,MACF;AAAA,MACA,QAAQ;AAAA,QACN;AAAA,MACF;AAAA,MACA,SAAS;AAAA,QACP;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,MACF;AAAA,IACF;AAEA,eAAU,CAAC,KAAK,GAAG,KAAK,OAAO,QAAQ,KAAK,MAAM,OAAO,GAAU;AACjE,YAAM,UAAU,IAAI;AACpB,UAAG,MAAM,OAAO,KAAK,MAAM,OAAO,EAAE,QAAQ,IAAI,IAAI,IAAI;AACtD,gBAAQ,KAAK,GAAG;AAAA,MAClB;AAAA,IACF;AAEA,WAAO;AAAA,EACT;AAAA,EAGA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,UAAU,KAAK,WAAW,KAAK,MAAM,IAAI;AAC/C,UAAM,SAAS,KAAK,mBAAmB,KAAK,MAAM,MAAO;AAEzD,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,WAAW;AAAA,QACpB,eAAY;AAAA,QACZ,WAAU;AAAA,QAEV,+BAAC,SAAI,WAAU,sBACb;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,KAAK,MAAM;AAAA,cAClB,OAAM;AAAA,cACN,UAAU,CAAC,MAAc;AACvB,qBAAK,SAAS,EAAE,IAAI,EAAE,CAAC;AAAA,cACzB;AAAA;AAAA,UACF;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,KAAK,MAAM;AAAA,cAClB,OAAM;AAAA,cACN,UAAU,CAAC,MAAkC,KAAK,SAAS,EAAE,MAAM,EAAE,CAAC;AAAA;AAAA,UACxE;AAAA,UACC,KAAK,MAAM,SAAS,gBACvB;AAAA,YAAC;AAAA;AAAA,cACC,WAAW;AAAA,cACX,OAAM;AAAA,cACN,OAAO,KAAK,MAAM;AAAA,cAClB,UAAU,CAAC,MAAc,KAAK,SAAS,EAAE,QAAQ,EAAE,CAAC;AAAA;AAAA,UACtD;AAAA,UAEG,CAAC,cAAc,UAAU,aAAa,SAAS,EAAE,QAAQ,KAAK,MAAM,IAAI,IAAI,KAC/E;AAAA,YAAC;AAAA;AAAA,cACC,SAAS;AAAA,cACT,gBAAgB;AAAA,cAChB,OAAO,KAAK,MAAM,cAAc;AAAA,cAChC,UAAU,CAAC,MAAc,KAAK,SAAS,EAAE,gBAAgB,EAAE,CAAC;AAAA;AAAA,UAC9D;AAAA,UAEE;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK;AAAA,cACd,eAAY;AAAA,cAEX,YAAE,WAAW;AAAA;AAAA,UAChB;AAAA,WACF;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,WAAW,gBAAgB,EAAE,gBAAgB;AACnD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"7a9f0314912c2a2e8e47cddf3aaf5469476531e0"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Gr=function(){return a},a}Gr();class Ble extends nr.Component{constructor(t){Gr().f[1]++,Gr().s[10]++;super(t);Pn(this,"addLayer",(Gr().s[0]++,()=>{Gr().f[0]++;const t=(Gr().s[1]++,this.props.layers.slice(0)),r=(Gr().s[2]++,{id:this.state.id,type:this.state.type});Gr().s[3]++,this.state.type!=="background"?(Gr().b[0][0]++,Gr().s[4]++,r.source=this.state.source,Gr().s[5]++,Gr().b[2][0]++,this.state.type!=="raster"&&(Gr().b[2][1]++,this.state["source-layer"])?(Gr().b[1][0]++,Gr().s[6]++,r["source-layer"]=this.state["source-layer"]):Gr().b[1][1]++):Gr().b[0][1]++,Gr().s[7]++,t.push(r),Gr().s[8]++,this.props.onLayersChange(t),Gr().s[9]++,this.props.onOpenToggle(!1)}));const r=(Gr().s[11]++,{type:"fill",id:""});Gr().s[12]++,t.sources.length>0?(Gr().b[3][0]++,Gr().s[13]++,r.source=Object.keys(this.props.sources)[0],Gr().s[14]++,r["source-layer"]=this.props.sources[r.source][0]):Gr().b[3][1]++,Gr().s[15]++,this.state=r}componentDidUpdate(t,r){Gr().f[2]++;const i=(Gr().s[16]++,r.type),s=(Gr().s[17]++,this.state.type),a=(Gr().s[18]++,this.getSources(i)),o=(Gr().s[19]++,this.getSources(s));Gr().s[20]++,Gr().b[5][0]++,i!==s&&(Gr().b[5][1]++,r.source!=="")&&(Gr().b[5][2]++,a.indexOf(r.source)>-1)&&(Gr().b[5][3]++,o.indexOf(this.state.source)<0)?(Gr().b[4][0]++,Gr().s[21]++,this.setState({source:""})):Gr().b[4][1]++}getLayersForSource(t){Gr().f[3]++;const r=(Gr().s[22]++,Gr().b[6][0]++,this.props.sources[t]||(Gr().b[6][1]++,{}));return Gr().s[23]++,Gr().b[7][0]++,r.layers||(Gr().b[7][1]++,[])}getSources(t){Gr().f[4]++;const r=(Gr().s[24]++,[]),i=(Gr().s[25]++,{vector:["fill","line","symbol","circle","fill-extrusion","heatmap"],raster:["raster"],geojson:["fill","line","symbol","circle","fill-extrusion","heatmap"]});Gr().s[26]++;for(const[s,a]of Object.entries(this.props.sources)){const o=(Gr().s[27]++,a.type);Gr().s[28]++,Gr().b[9][0]++,i[o]&&(Gr().b[9][1]++,i[o].indexOf(t)>-1)?(Gr().b[8][0]++,Gr().s[29]++,r.push(s)):Gr().b[8][1]++}return Gr().s[30]++,r}render(){Gr().f[5]++;const t=(Gr().s[31]++,this.props.t),r=(Gr().s[32]++,this.getSources(this.state.type)),i=(Gr().s[33]++,this.getLayersForSource(this.state.source));return Gr().s[34]++,ue.jsx(G0,{isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:t("Add Layer"),"data-wd-key":"modal:add-layer",className:"maputnik-add-modal",children:ue.jsxs("div",{className:"maputnik-add-layer",children:[ue.jsx(tW,{value:this.state.id,wdKey:"add-layer.layer-id",onChange:s=>{Gr().f[6]++,Gr().s[35]++,this.setState({id:s})}}),ue.jsx(eW,{value:this.state.type,wdKey:"add-layer.layer-type",onChange:s=>(Gr().f[7]++,Gr().s[36]++,this.setState({type:s}))}),(Gr().b[10][0]++,this.state.type!=="background"&&(Gr().b[10][1]++,ue.jsx(rW,{sourceIds:r,wdKey:"add-layer.layer-source-block",value:this.state.source,onChange:s=>(Gr().f[8]++,Gr().s[37]++,this.setState({source:s}))}))),(Gr().b[11][0]++,["background","raster","hillshade","heatmap"].indexOf(this.state.type)<0&&(Gr().b[11][1]++,ue.jsx(oW,{isFixed:!0,sourceLayerIds:i,value:this.state["source-layer"],onChange:s=>(Gr().f[9]++,Gr().s[38]++,this.setState({"source-layer":s}))}))),ue.jsx(Ja,{className:"maputnik-add-layer-button",onClick:this.addLayer,"data-wd-key":"add-layer",children:t("Add Layer")})]})})}}const Ole=(Gr().s[39]++,Ns()(Ble));function Og(){var n="/home/runner/work/maputnik/maputnik/src/libs/document-uid.ts",e="a991ed6da2a27b46f1adbb88a645aa2ee0df375e",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/document-uid.ts",statementMap:{0:{start:{line:1,column:10},end:{line:1,column:11}},1:{start:{line:3,column:2},end:{line:3,column:8}},2:{start:{line:4,column:2},end:{line:4,column:22}}},fnMap:{0:{name:"generateUniqueId",decl:{start:{line:2,column:24},end:{line:2,column:40}},loc:{start:{line:2,column:54},end:{line:5,column:1}},line:2}},branchMap:{0:{loc:{start:{line:2,column:41},end:{line:2,column:52}},type:"default-arg",locations:[{start:{line:2,column:50},end:{line:2,column:52}}],line:2}},s:{0:0,1:0,2:0},f:{0:0},b:{0:[0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/document-uid.ts"],names:[],mappings:"AAGA,IAAI,MAAM;AAEV,wBAAwB,iBAAiB,SAAO,IAAI;AAClD;AACA,SAAO,SAAO;AAChB;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a991ed6da2a27b46f1adbb88a645aa2ee0df375e"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Og=function(){return a},a}Og();let hT=(Og().s[0]++,0);function Ny(n=(Og().b[0][0]++,"")){return Og().f[0]++,Og().s[1]++,hT++,Og().s[2]++,n+hT}function Ni(){var n="/home/runner/work/maputnik/maputnik/src/libs/layer.ts",e="8d7d71e3a97c0e4b8cc5fd0ca26b8fdf4aa2aa36",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/layer.ts",statementMap:{0:{start:{line:3,column:28},end:{line:3,column:46}},1:{start:{line:4,column:2},end:{line:8,column:5}},2:{start:{line:5,column:4},end:{line:7,column:5}},3:{start:{line:6,column:6},end:{line:6,column:45}},4:{start:{line:9,column:29},end:{line:9,column:48}},5:{start:{line:10,column:2},end:{line:14,column:5}},6:{start:{line:11,column:4},end:{line:13,column:5}},7:{start:{line:12,column:6},end:{line:12,column:46}},8:{start:{line:15,column:2},end:{line:20,column:4}},9:{start:{line:23,column:2},end:{line:59,column:3}},10:{start:{line:24,column:4},end:{line:43,column:5}},11:{start:{line:25,column:23},end:{line:31,column:7}},12:{start:{line:32,column:6},end:{line:32,column:39}},13:{start:{line:33,column:6},end:{line:35,column:7}},14:{start:{line:34,column:8},end:{line:34,column:31}},15:{start:{line:36,column:6},end:{line:36,column:22}},16:{start:{line:38,column:23},end:{line:40,column:7}},17:{start:{line:41,column:6},end:{line:41,column:32}},18:{start:{line:42,column:6},end:{line:42,column:22}},19:{start:{line:45,column:4},end:{line:58,column:5}},20:{start:{line:46,column:6},end:{line:52,column:8}},21:{start:{line:54,column:6},end:{line:57,column:8}},22:{start:{line:62,column:2},end:{line:62,column:64}},23:{start:{line:65,column:29},end:{line:65,column:56}},24:{start:{line:66,column:19},end:{line:66,column:22}},25:{start:{line:67,column:2},end:{line:74,column:3}},26:{start:{line:67,column:15},end:{line:67,column:18}},27:{start:{line:68,column:32},end:{line:68,column:61}},28:{start:{line:69,column:4},end:{line:73,column:5}},29:{start:{line:70,column:6},end:{line:70,column:25}},30:{start:{line:72,column:6},end:{line:72,column:24}},31:{start:{line:75,column:2},end:{line:75,column:20}}},fnMap:{0:{name:"changeType",decl:{start:{line:2,column:16},end:{line:2,column:26}},loc:{start:{line:2,column:43},end:{line:21,column:1}},line:2},1:{name:"(anonymous_1)",decl:{start:{line:4,column:41},end:{line:4,column:42}},loc:{start:{line:4,column:59},end:{line:8,column:3}},line:4},2:{name:"(anonymous_2)",decl:{start:{line:10,column:42},end:{line:10,column:43}},loc:{start:{line:10,column:60},end:{line:14,column:3}},line:10},3:{name:"changeProperty",decl:{start:{line:22,column:16},end:{line:22,column:30}},loc:{start:{line:22,column:65},end:{line:60,column:1}},line:22},4:{name:"layerPrefix",decl:{start:{line:61,column:16},end:{line:61,column:27}},loc:{start:{line:61,column:34},end:{line:63,column:1}},line:61},5:{name:"findClosestCommonPrefix",decl:{start:{line:64,column:16},end:{line:64,column:39}},loc:{start:{line:64,column:53},end:{line:76,column:1}},line:64}},branchMap:{0:{loc:{start:{line:5,column:4},end:{line:7,column:5}},type:"if",locations:[{start:{line:5,column:4},end:{line:7,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:5},1:{loc:{start:{line:11,column:4},end:{line:13,column:5}},type:"if",locations:[{start:{line:11,column:4},end:{line:13,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:11},2:{loc:{start:{line:23,column:2},end:{line:59,column:3}},type:"if",locations:[{start:{line:23,column:2},end:{line:59,column:3}},{start:{line:44,column:9},end:{line:59,column:3}}],line:23},3:{loc:{start:{line:24,column:4},end:{line:43,column:5}},type:"if",locations:[{start:{line:24,column:4},end:{line:43,column:5}},{start:{line:37,column:11},end:{line:43,column:5}}],line:24},4:{loc:{start:{line:33,column:6},end:{line:35,column:7}},type:"if",locations:[{start:{line:33,column:6},end:{line:35,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:33},5:{loc:{start:{line:45,column:4},end:{line:58,column:5}},type:"if",locations:[{start:{line:45,column:4},end:{line:58,column:5}},{start:{line:53,column:11},end:{line:58,column:5}}],line:45},6:{loc:{start:{line:69,column:4},end:{line:73,column:5}},type:"if",locations:[{start:{line:69,column:4},end:{line:73,column:5}},{start:{line:71,column:11},end:{line:73,column:5}}],line:69}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/layer.ts"],names:[],mappings:"AAAA,SAAQ,cAAa;AAGd,gBAAS,WAAW,OAA2B,SAAiB;AACrE,QAAM,oBAAiD,EAAE,GAAG,MAAM,MAAM;AACxE,SAAO,KAAK,iBAAiB,EAAE,QAAQ,kBAAgB;AACrD,QAAG,EAAE,gBAAgB,OAAO,WAAW,OAAO,IAAI;AAChD,aAAO,kBAAkB,YAAiD;AAAA,IAC5E;AAAA,EACF,CAAC;AAED,QAAM,qBAAmD,EAAE,GAAG,MAAM,OAAO;AAC3E,SAAO,KAAK,kBAAkB,EAAE,QAAQ,kBAAgB;AACtD,QAAG,EAAE,gBAAgB,OAAO,YAAY,OAAO,IAAI;AACjD,aAAO,mBAAmB,YAAkD;AAAA,IAC9E;AAAA,EACF,CAAC;AAED,SAAO;AAAA,IACL,GAAG;AAAA,IACH,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,MAAM;AAAA,EACR;AACF;AAKO,gBAAS,eAAe,OAA2B,OAAwC,UAAkB,UAAe;AAEjI,MAAG,aAAa,QAAW;AACzB,QAAG,OAAO;AACR,YAAM,WAAgB;AAAA,QACpB,GAAG;AAAA;AAAA,QAEH,CAAC,KAAK,GAAG;AAAA,UACP,GAAG,MAAM,KAAK;AAAA,QAChB;AAAA,MACF;AACA,aAAO,SAAS,KAAK,EAAE,QAAQ;AAG/B,UAAG,OAAO,KAAK,SAAS,KAAK,CAAC,EAAE,SAAS,GAAG;AAC1C,eAAO,SAAS,KAAK;AAAA,MACvB;AACA,aAAO;AAAA,IACT,OAAO;AACL,YAAM,WAAgB;AAAA,QACpB,GAAG;AAAA,MACL;AACA,aAAO,SAAS,QAAQ;AACxB,aAAO;AAAA,IACT;AAAA,EACF,OACK;AACH,QAAG,OAAO;AACR,aAAO;AAAA,QACL,GAAG;AAAA,QACH,CAAC,KAAK,GAAG;AAAA,UACP,GAAG,MAAM,KAAK;AAAA,UACd,CAAC,QAAQ,GAAG;AAAA,QACd;AAAA,MACF;AAAA,IACF,OAAO;AACL,aAAO;AAAA,QACL,GAAG;AAAA,QACH,CAAC,QAAQ,GAAG;AAAA,MACd;AAAA,IACF;AAAA,EACF;AACF;AAEO,gBAAS,YAAY,MAAc;AACxC,SAAO,KAAK,QAAQ,KAAK,GAAG,EAAE,QAAQ,KAAK,GAAG,EAAE,MAAM,GAAG,EAAE,CAAC;AAC9D;AAEO,gBAAS,wBAAwB,QAA8B,KAAa;AACjF,QAAM,qBAAqB,YAAY,OAAO,GAAG,EAAE,EAAE;AACrD,MAAI,aAAa;AACjB,WAAS,IAAI,KAAK,IAAI,GAAG,KAAK;AAC5B,UAAM,sBAAsB,YAAY,OAAO,IAAE,CAAC,EAAE,EAAE;AACtD,QAAG,wBAAwB,oBAAoB;AAC7C,mBAAa,IAAI;AAAA,IACnB,OAAO;AACL,aAAO;AAAA,IACT;AAAA,EACF;AACA,SAAO;AACT;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8d7d71e3a97c0e4b8cc5fd0ca26b8fdf4aa2aa36"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Ni=function(){return a},a}Ni();function Ile(n,e){Ni().f[0]++;const t=(Ni().s[0]++,{...n.paint});Ni().s[1]++,Object.keys(t).forEach(i=>{Ni().f[1]++,Ni().s[2]++,i in Ts["paint_"+e]?Ni().b[0][1]++:(Ni().b[0][0]++,Ni().s[3]++,delete t[i])});const r=(Ni().s[4]++,{...n.layout});return Ni().s[5]++,Object.keys(r).forEach(i=>{Ni().f[2]++,Ni().s[6]++,i in Ts["layout_"+e]?Ni().b[1][1]++:(Ni().b[1][0]++,Ni().s[7]++,delete r[i])}),Ni().s[8]++,{...n,paint:t,layout:r,type:e}}function kle(n,e,t,r){if(Ni().f[3]++,Ni().s[9]++,r===void 0)if(Ni().b[2][0]++,Ni().s[10]++,e){Ni().b[3][0]++;const i=(Ni().s[11]++,{...n,[e]:{...n[e]}});return Ni().s[12]++,delete i[e][t],Ni().s[13]++,Object.keys(i[e]).length<1?(Ni().b[4][0]++,Ni().s[14]++,delete i[e]):Ni().b[4][1]++,Ni().s[15]++,i}else{Ni().b[3][1]++;const i=(Ni().s[16]++,{...n});return Ni().s[17]++,delete i[t],Ni().s[18]++,i}else return Ni().b[2][1]++,Ni().s[19]++,e?(Ni().b[5][0]++,Ni().s[20]++,{...n,[e]:{...n[e],[t]:r}}):(Ni().b[5][1]++,Ni().s[21]++,{...n,[t]:r})}function dy(n){return Ni().f[4]++,Ni().s[22]++,n.replace(" ","-").replace("_","-").split("-")[0]}function Tle(n,e){Ni().f[5]++;const t=(Ni().s[23]++,dy(n[e].id));let r=(Ni().s[24]++,e);Ni().s[25]++;for(let i=(Ni().s[26]++,e);i>0;i--){const s=(Ni().s[27]++,dy(n[i-1].id));if(Ni().s[28]++,s===t)Ni().b[6][0]++,Ni().s[29]++,r=i-1;else return Ni().b[6][1]++,Ni().s[30]++,r}return Ni().s[31]++,r}function bn(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerList.tsx",e="fce844afd94013ad4b9b4e84bd148b8b849d3079",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/LayerList.tsx",statementMap:{0:{start:{line:13,column:24},end:{line:16,column:3}},1:{start:{line:20,column:4},end:{line:20,column:17}},2:{start:{line:21,column:4},end:{line:21,column:45}},3:{start:{line:22,column:4},end:{line:22,column:48}},4:{start:{line:23,column:4},end:{line:32,column:6}},5:{start:{line:35,column:4},end:{line:44,column:7}},6:{start:{line:46,column:17},end:{line:63,column:3}},7:{start:{line:47,column:14},end:{line:47,column:15}},8:{start:{line:48,column:22},end:{line:48,column:24}},9:{start:{line:49,column:4},end:{line:58,column:7}},10:{start:{line:50,column:26},end:{line:50,column:51}},11:{start:{line:51,column:24},end:{line:51,column:52}},12:{start:{line:52,column:6},end:{line:54,column:7}},13:{start:{line:53,column:8},end:{line:53,column:63}},14:{start:{line:55,column:6},end:{line:57,column:9}},15:{start:{line:56,column:8},end:{line:56,column:17}},16:{start:{line:59,column:4},end:{line:62,column:7}},17:{start:{line:65,column:19},end:{line:65,column:21}},18:{start:{line:66,column:41},end:{line:66,column:50}},19:{start:{line:67,column:4},end:{line:84,column:5}},20:{start:{line:67,column:17},end:{line:67,column:18}},21:{start:{line:68,column:24},end:{line:68,column:44}},22:{start:{line:69,column:28},end:{line:69,column:52}},23:{start:{line:70,column:6},end:{line:73,column:8}},24:{start:{line:74,column:20},end:{line:77,column:7}},25:{start:{line:78,column:6},end:{line:83,column:7}},26:{start:{line:79,column:26},end:{line:79,column:51}},27:{start:{line:80,column:8},end:{line:80,column:30}},28:{start:{line:82,column:8},end:{line:82,column:29}},29:{start:{line:85,column:4},end:{line:85,column:18}},30:{start:{line:88,column:22},end:{line:88,column:50}},31:{start:{line:89,column:22},end:{line:89,column:55}},32:{start:{line:90,column:4},end:{line:94,column:5}},33:{start:{line:91,column:6},end:{line:91,column:68}},34:{start:{line:93,column:6},end:{line:93,column:35}},35:{start:{line:95,column:4},end:{line:97,column:7}},36:{start:{line:100,column:22},end:{line:100,column:78}},37:{start:{line:101,column:4},end:{line:101,column:51}},38:{start:{line:104,column:4},end:{line:106,column:5}},39:{start:{line:105,column:6},end:{line:105,column:18}},40:{start:{line:108,column:18},end:{line:110,column:7}},41:{start:{line:111,column:6},end:{line:115,column:7}},42:{start:{line:112,column:8},end:{line:114,column:10}},43:{start:{line:116,column:6},end:{line:116,column:17}},44:{start:{line:118,column:24},end:{line:121,column:5}},45:{start:{line:123,column:18},end:{line:125,column:7}},46:{start:{line:126,column:6},end:{line:126,column:27}},47:{start:{line:127,column:6},end:{line:127,column:17}},48:{start:{line:129,column:23},end:{line:132,column:5}},49:{start:{line:133,column:25},end:{line:133,column:53}},50:{start:{line:134,column:4},end:{line:134,column:24}},51:{start:{line:137,column:4},end:{line:153,column:5}},52:{start:{line:138,column:31},end:{line:138,column:59}},53:{start:{line:139,column:6},end:{line:152,column:7}},54:{start:{line:140,column:23},end:{line:140,column:44}},55:{start:{line:141,column:24},end:{line:144,column:9}},56:{start:{line:145,column:25},end:{line:150,column:19}},57:{start:{line:146,column:10},end:{line:146,column:37}},58:{start:{line:147,column:10},end:{line:149,column:11}},59:{start:{line:148,column:12},end:{line:148,column:36}},60:{start:{line:151,column:8},end:{line:151,column:33}},61:{start:{line:156,column:22},end:{line:156,column:24}},62:{start:{line:157,column:14},end:{line:157,column:15}},63:{start:{line:158,column:26},end:{line:158,column:46}},64:{start:{line:159,column:4},end:{line:210,column:7}},65:{start:{line:160,column:26},end:{line:160,column:51}},66:{start:{line:161,column:6},end:{line:174,column:7}},67:{start:{line:162,column:36},end:{line:172,column:9}},68:{start:{line:166,column:47},end:{line:166,column:52}},69:{start:{line:173,column:8},end:{line:173,column:28}},70:{start:{line:175,column:6},end:{line:209,column:9}},71:{start:{line:176,column:25},end:{line:176,column:72}},72:{start:{line:177,column:27},end:{line:179,column:10}},73:{start:{line:178,column:10},end:{line:178,column:97}},74:{start:{line:180,column:32},end:{line:180,column:34}},75:{start:{line:181,column:8},end:{line:183,column:9}},76:{start:{line:182,column:10},end:{line:182,column:53}},77:{start:{line:184,column:41},end:{line:206,column:9}},78:{start:{line:207,column:8},end:{line:207,column:33}},79:{start:{line:208,column:8},end:{line:208,column:17}},80:{start:{line:211,column:14},end:{line:211,column:26}},81:{start:{line:212,column:4},end:{line:264,column:6}},82:{start:{line:267,column:27},end:{line:267,column:72}},83:{start:{line:268,column:35},end:{line:268,column:118}},84:{start:{line:268,column:80},end:{line:268,column:117}},85:{start:{line:271,column:4},end:{line:280,column:6}},86:{start:{line:278,column:33},end:{line:278,column:38}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:14,column:19},end:{line:14,column:20}},loc:{start:{line:14,column:25},end:{line:15,column:5}},line:14},1:{name:"(anonymous_1)",decl:{start:{line:19,column:2},end:{line:19,column:3}},loc:{start:{line:19,column:21},end:{line:33,column:3}},line:19},2:{name:"(anonymous_2)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:25},end:{line:45,column:3}},line:34},3:{name:"(anonymous_3)",decl:{start:{line:46,column:17},end:{line:46,column:18}},loc:{start:{line:46,column:23},end:{line:63,column:3}},line:46},4:{name:"(anonymous_4)",decl:{start:{line:49,column:33},end:{line:49,column:34}},loc:{start:{line:49,column:45},end:{line:58,column:5}},line:49},5:{name:"(anonymous_5)",decl:{start:{line:55,column:21},end:{line:55,column:22}},loc:{start:{line:55,column:33},end:{line:57,column:7}},line:55},6:{name:"(anonymous_6)",decl:{start:{line:64,column:2},end:{line:64,column:3}},loc:{start:{line:64,column:18},end:{line:86,column:3}},line:64},7:{name:"(anonymous_7)",decl:{start:{line:87,column:2},end:{line:87,column:3}},loc:{start:{line:87,column:37},end:{line:98,column:3}},line:87},8:{name:"(anonymous_8)",decl:{start:{line:99,column:2},end:{line:99,column:3}},loc:{start:{line:99,column:32},end:{line:102,column:3}},line:99},9:{name:"(anonymous_9)",decl:{start:{line:103,column:2},end:{line:103,column:3}},loc:{start:{line:103,column:46},end:{line:135,column:3}},line:103},10:{name:"getRequiredProps",decl:{start:{line:107,column:13},end:{line:107,column:29}},loc:{start:{line:107,column:37},end:{line:117,column:5}},line:107},11:{name:"withoutLayers",decl:{start:{line:122,column:13},end:{line:122,column:26}},loc:{start:{line:122,column:34},end:{line:128,column:5}},line:122},12:{name:"(anonymous_12)",decl:{start:{line:136,column:2},end:{line:136,column:3}},loc:{start:{line:136,column:32},end:{line:154,column:3}},line:136},13:{name:"(anonymous_13)",decl:{start:{line:145,column:50},end:{line:145,column:51}},loc:{start:{line:145,column:63},end:{line:150,column:9}},line:145},14:{name:"(anonymous_14)",decl:{start:{line:155,column:2},end:{line:155,column:3}},loc:{start:{line:155,column:11},end:{line:265,column:3}},line:155},15:{name:"(anonymous_15)",decl:{start:{line:159,column:26},end:{line:159,column:27}},loc:{start:{line:159,column:38},end:{line:210,column:5}},line:159},16:{name:"(anonymous_16)",decl:{start:{line:166,column:40},end:{line:166,column:41}},loc:{start:{line:166,column:47},end:{line:166,column:52}},line:166},17:{name:"(anonymous_17)",decl:{start:{line:175,column:21},end:{line:175,column:22}},loc:{start:{line:175,column:44},end:{line:209,column:7}},line:175},18:{name:"(anonymous_18)",decl:{start:{line:177,column:50},end:{line:177,column:51}},loc:{start:{line:177,column:61},end:{line:179,column:9}},line:177},19:{name:"(anonymous_19)",decl:{start:{line:268,column:53},end:{line:268,column:54}},loc:{start:{line:268,column:80},end:{line:268,column:117}},line:268},20:{name:"(anonymous_20)",decl:{start:{line:270,column:2},end:{line:270,column:3}},loc:{start:{line:270,column:11},end:{line:281,column:3}},line:270},21:{name:"(anonymous_21)",decl:{start:{line:278,column:27},end:{line:278,column:28}},loc:{start:{line:278,column:33},end:{line:278,column:38}},line:278}},branchMap:{0:{loc:{start:{line:52,column:6},end:{line:54,column:7}},type:"if",locations:[{start:{line:52,column:6},end:{line:54,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:52},1:{loc:{start:{line:72,column:8},end:{line:72,column:79}},type:"cond-expr",locations:[{start:{line:72,column:41},end:{line:72,column:75}},{start:{line:72,column:78},end:{line:72,column:79}}],line:72},2:{loc:{start:{line:78,column:6},end:{line:83,column:7}},type:"if",locations:[{start:{line:78,column:6},end:{line:83,column:7}},{start:{line:81,column:13},end:{line:83,column:7}}],line:78},3:{loc:{start:{line:78,column:10},end:{line:78,column:81}},type:"binary-expr",locations:[{start:{line:78,column:10},end:{line:78,column:23}},{start:{line:78,column:27},end:{line:78,column:81}}],line:78},4:{loc:{start:{line:90,column:4},end:{line:94,column:5}},type:"if",locations:[{start:{line:90,column:4},end:{line:94,column:5}},{start:{line:92,column:11},end:{line:94,column:5}}],line:90},5:{loc:{start:{line:101,column:11},end:{line:101,column:50}},type:"cond-expr",locations:[{start:{line:101,column:34},end:{line:101,column:38}},{start:{line:101,column:41},end:{line:101,column:50}}],line:101},6:{loc:{start:{line:104,column:4},end:{line:106,column:5}},type:"if",locations:[{start:{line:104,column:4},end:{line:106,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:104},7:{loc:{start:{line:111,column:6},end:{line:115,column:7}},type:"if",locations:[{start:{line:111,column:6},end:{line:115,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:111},8:{loc:{start:{line:133,column:27},end:{line:133,column:52}},type:"binary-expr",locations:[{start:{line:133,column:27},end:{line:133,column:38}},{start:{line:133,column:42},end:{line:133,column:52}}],line:133},9:{loc:{start:{line:137,column:4},end:{line:153,column:5}},type:"if",locations:[{start:{line:137,column:4},end:{line:153,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:137},10:{loc:{start:{line:139,column:6},end:{line:152,column:7}},type:"if",locations:[{start:{line:139,column:6},end:{line:152,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:139},11:{loc:{start:{line:139,column:10},end:{line:139,column:51}},type:"binary-expr",locations:[{start:{line:139,column:10},end:{line:139,column:26}},{start:{line:139,column:30},end:{line:139,column:51}}],line:139},12:{loc:{start:{line:147,column:10},end:{line:149,column:11}},type:"if",locations:[{start:{line:147,column:10},end:{line:149,column:11}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:147},13:{loc:{start:{line:147,column:14},end:{line:147,column:68}},type:"binary-expr",locations:[{start:{line:147,column:14},end:{line:147,column:32}},{start:{line:147,column:36},end:{line:147,column:68}}],line:147},14:{loc:{start:{line:161,column:6},end:{line:174,column:7}},type:"if",locations:[{start:{line:161,column:6},end:{line:174,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:161},15:{loc:{start:{line:168,column:22},end:{line:168,column:98}},type:"binary-expr",locations:[{start:{line:168,column:22},end:{line:168,column:57}},{start:{line:168,column:61},end:{line:168,column:98}}],line:168},16:{loc:{start:{line:178,column:17},end:{line:178,column:96}},type:"binary-expr",locations:[{start:{line:178,column:17},end:{line:178,column:29}},{start:{line:178,column:33},end:{line:178,column:62}},{start:{line:178,column:66},end:{line:178,column:96}}],line:178},17:{loc:{start:{line:181,column:8},end:{line:183,column:9}},type:"if",locations:[{start:{line:181,column:8},end:{line:183,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:181},18:{loc:{start:{line:188,column:52},end:{line:188,column:153}},type:"binary-expr",locations:[{start:{line:188,column:52},end:{line:188,column:69}},{start:{line:188,column:73},end:{line:188,column:112}},{start:{line:188,column:116},end:{line:188,column:153}}],line:188},19:{loc:{start:{line:189,column:53},end:{line:189,column:105}},type:"binary-expr",locations:[{start:{line:189,column:53},end:{line:189,column:84}},{start:{line:189,column:88},end:{line:189,column:105}}],line:189},20:{loc:{start:{line:197,column:25},end:{line:197,column:43}},type:"binary-expr",locations:[{start:{line:197,column:25},end:{line:197,column:37}},{start:{line:197,column:41},end:{line:197,column:43}}],line:197},21:{loc:{start:{line:241,column:26},end:{line:241,column:96}},type:"cond-expr",locations:[{start:{line:241,column:69},end:{line:241,column:82}},{start:{line:241,column:85},end:{line:241,column:96}}],line:241}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0,0],17:[0,0],18:[0,0,0],19:[0,0],20:[0,0],21:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerList.tsx"],names:[],mappings:"AAmNoB,cAoEd,YApEc;AAnNpB,OAAO,WAAuB;AAC9B,OAAO,gBAAgB;AACvB,OAAO,YAAY;AAEnB,OAAO,oBAAoB;AAC3B,OAAO,mBAAmB;AAC1B,OAAO,cAAc;AAErB,SAAwB,yBAAwB;AAEhD,OAAO,sBAAsB;AAC7B,SAAS,yBAAyB,mBAAmB;AACrD,SAA0B,uBAAuB;AAuBjD,MAAM,mCAAmC,MAAM,UAAoE;AAAA,EACjH,OAAO,eAAe;AAAA,IACpB,eAAe,MAAM;AAAA,IAAC;AAAA,EACxB;AAAA,EACA;AAAA,EACA;AAAA,EAEA,YAAY,OAAwC;AAClD,UAAM,KAAK;AACX,SAAK,kBAAkB,MAAM,UAAU;AACvC,SAAK,qBAAqB,MAAM,UAAU;AAC1C,SAAK,QAAQ;AAAA,MACX,iBAAiB,CAAC;AAAA,MAClB,sBAAsB;AAAA,MACtB,MAAM;AAAA,QACJ,KAAK,CAAC,iBAAiB;AAAA,MACzB;AAAA,MACA,QAAQ;AAAA,QACN,KAAK;AAAA,MACP;AAAA,IACF;AAAA,EACF;AAAA,EAEA,YAAY,WAAmB;AAC7B,SAAK,SAAS;AAAA,MACZ,MAAM;AAAA,QACJ,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,SAAS,GAAG,CAAC,iBAAiB;AAAA,MACjC;AAAA,MACA,QAAQ;AAAA,QACN,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,SAAS,GAAG,CAAC,KAAK,MAAM,OAAO,SAAS;AAAA,MAC3C;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,eAAe,MAAM;AACnB,QAAI,MAAM;AAEV,UAAM,YAAqC,CAAC;AAE5C,SAAK,cAAc,EAAE,QAAQ,YAAU;AACrC,YAAM,cAAc,YAAY,OAAO,CAAC,EAAE,EAAE;AAC5C,YAAM,YAAY,CAAC,aAAa,GAAG,EAAE,KAAK,GAAG;AAG7C,UAAI,OAAO,SAAS,GAAG;AACrB,kBAAU,SAAS,IAAI,KAAK,MAAM;AAAA,MACpC;AAEA,aAAO,QAAQ,CAAC,WAAW;AACzB,eAAO;AAAA,MACT,CAAC;AAAA,IACH,CAAC;AAED,SAAK,SAAS;AAAA,MACZ,iBAAiB;AAAA,MACjB,sBAAsB,CAAC,KAAK,MAAM;AAAA,IACpC,CAAC;AAAA,EACH;AAAA,EAEA,gBAA0D;AACxD,UAAM,SAAS,CAAC;AAChB,UAAM,eAAe,oBAAI,IAAI;AAE7B,aAAS,IAAI,GAAG,IAAI,KAAK,MAAM,OAAO,QAAQ,KAAK;AACjD,YAAM,YAAY,KAAK,MAAM,OAAO,CAAC;AACrC,YAAM,gBAAgB,KAAK,MAAM,OAAO,IAAE,CAAC;AAC3C,mBAAa;AAAA,QAAI,UAAU;AAAA,QACzB,aAAa,IAAI,UAAU,EAAE,IAAI,aAAa,IAAI,UAAU,EAAE,IAAI,IAAI;AAAA,MACxE;AACA,YAAM,QAAQ;AAAA,QACZ,GAAG;AAAA,QACH,KAAK,eAAe,UAAU,EAAE,IAAI,aAAa,IAAI,UAAU,EAAE,CAAC;AAAA,MACpE;AACA,UAAG,iBAAiB,YAAY,cAAc,EAAE,KAAK,YAAY,MAAM,EAAE,GAAG;AAC1E,cAAM,YAAY,OAAO,OAAO,SAAS,CAAC;AAC1C,kBAAU,KAAK,KAAK;AAAA,MACtB,OAAO;AACL,eAAO,KAAK,CAAC,KAAK,CAAC;AAAA,MACrB;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAAA,EAEA,iBAAiB,aAAqB,KAAa;AACjD,UAAM,YAAY,CAAC,aAAa,GAAG,EAAE,KAAK,GAAG;AAC7C,UAAM,YAAY,EAAE,GAAG,KAAK,MAAM,gBAAgB;AAClD,QAAG,aAAa,KAAK,MAAM,iBAAiB;AAC1C,gBAAU,SAAS,IAAI,CAAC,KAAK,MAAM,gBAAgB,SAAS;AAAA,IAC9D,OAAO;AACL,gBAAU,SAAS,IAAI;AAAA,IACzB;AACA,SAAK,SAAS;AAAA,MACZ,iBAAiB;AAAA,IACnB,CAAC;AAAA,EACH;AAAA,EAEA,YAAY,aAAqB,KAAa;AAC5C,UAAM,YAAY,KAAK,MAAM,gBAAgB,CAAC,aAAa,GAAG,EAAE,KAAK,GAAG,CAAC;AACzE,WAAO,cAAc,SAAY,OAAO;AAAA,EAC1C;AAAA,EAEA,sBAAuB,WAAoC,WAAoC;AAE7F,QAAI,KAAK,UAAU,WAAW;AAC5B,aAAO;AAAA,IACT;AAIA,aAAS,iBAAiB,OAA2B;AACnD,YAAM,MAAiD;AAAA,QACrD,IAAI,MAAM;AAAA,MACZ;AAEA,UAAI,MAAM,QAAQ;AAChB,YAAI,SAAS;AAAA,UACX,YAAY,MAAM,OAAO;AAAA,QAC3B;AAAA,MACF;AACA,aAAO;AAAA,IACT;AACA,UAAM,cAAc,OAAO;AAAA,MACzB,UAAU,OAAO,IAAI,gBAAgB;AAAA,MACrC,KAAK,MAAM,OAAO,IAAI,gBAAgB;AAAA,IACxC;AAEA,aAAS,cAAc,OAAgC;AACrD,YAAM,MAAM;AAAA,QACV,GAAG;AAAA,MACL;AACA,aAAO,IAAI,QAAQ;AACnB,aAAO;AAAA,IACT;AAIA,UAAM,aAAa,OAAO;AAAA,MACxB,cAAc,KAAK,KAAK;AAAA,MACxB,cAAc,SAAS;AAAA,IACzB;AAEA,UAAM,eAAe,EAAE,eAAe;AACtC,WAAO;AAAA,EACT;AAAA,EAEA,mBAAoB,WAAoC;AACtD,QAAI,UAAU,uBAAuB,KAAK,MAAM,oBAAoB;AAClE,YAAM,mBAAmB,KAAK,gBAAgB;AAC9C,UAAI,oBAAoB,iBAAiB,MAAM;AAC7C,cAAM,SAAS,iBAAiB;AAChC,cAAM,UAAU;AAAA,UACd,MAAM,KAAK,mBAAmB;AAAA,UAC9B,WAAW;AAAA,QACb;AACA,cAAM,WAAW,IAAI,qBAAqB,aAAW;AACnD,mBAAS,UAAU,MAAM;AACzB,cAAI,QAAQ,SAAS,KAAK,QAAQ,CAAC,EAAE,oBAAoB,GAAG;AAC1D,mBAAO,eAAe;AAAA,UACxB;AAAA,QACF,GAAG,OAAO;AAEV,iBAAS,QAAQ,MAAM;AAAA,MACzB;AAAA,IACF;AAAA,EACF;AAAA,EAEA,SAAS;AAEP,UAAM,YAA2B,CAAC;AAClC,QAAI,MAAM;AACV,UAAM,gBAAgB,KAAK,cAAc;AACzC,kBAAc,QAAQ,YAAU;AAC9B,YAAM,cAAc,YAAY,OAAO,CAAC,EAAE,EAAE;AAC5C,UAAG,OAAO,SAAS,GAAG;AACpB,cAAM,MAAM;AAAA,UAAC;AAAA;AAAA,YACX,eAAa,CAAC,aAAa,GAAG,EAAE,KAAK,GAAG;AAAA,YACxC,iBAAe,OAAO,IAAI,OAAK,EAAE,GAAG,EAAE,KAAK,GAAG;AAAA,YAE9C,OAAO;AAAA,YACP,UAAU,CAAC,KAAK,YAAY,aAAa,GAAG,KAAK,QAAQ,KAAK,MAAM;AAAA,YACpE,gBAAgB,KAAK,iBAAiB,KAAK,MAAM,aAAa,GAAG;AAAA;AAAA,UAH5D,SAAS,WAAW,IAAI,GAAG;AAAA,QAIlC;AACA,kBAAU,KAAK,GAAG;AAAA,MACpB;AAEA,aAAO,QAAQ,CAAC,OAAO,eAAe;AACpC,cAAM,WAAW,wBAAwB,KAAK,MAAM,QAAQ,GAAG;AAE/D,cAAM,aAAa,KAAK,MAAM,OAAO,KAAK,WAAS;AACjD,iBACE,MAAM,UACN,MAAM,OAAO,SAAS,WACtB,MAAM,OAAO,KAAK,SAAS;AAAA,QAE/B,CAAC;AAED,cAAM,kBAAgD,CAAC;AACvD,YAAI,QAAQ,KAAK,MAAM,oBAAoB;AACzC,0BAAgB,MAAM,KAAK;AAAA,QAC7B;AAEA,cAAM,WAAW;AAAA,UAAC;AAAA;AAAA,YAChB,WAAW,WAAW;AAAA,cACpB,sCAAsC,OAAO,SAAS,KAAK,KAAK,YAAY,aAAa,QAAQ,KAAK,QAAQ,KAAK,MAAM;AAAA,cACzH,uCAAuC,cAAc,OAAO,SAAS,KAAK,OAAO,SAAS;AAAA,cAC1F,mCAAmC,CAAC,CAAC;AAAA,YACvC,CAAC;AAAA,YACD,OAAO;AAAA,YAEP,IAAI,MAAM;AAAA,YACV,SAAS,MAAM;AAAA,YACf,YAAY;AAAA,YACZ,WAAW,MAAM;AAAA,YACjB,aAAa,MAAM,UAAU,CAAC,GAAG;AAAA,YACjC,YAAY,QAAQ,KAAK,MAAM;AAAA,YAC/B,eAAe,KAAK,MAAM;AAAA,YAC1B,gBAAgB,KAAK,MAAM,gBAAgB,KAAK,IAAI;AAAA,YACpD,aAAa,KAAK,MAAM,YAAY,KAAK,IAAI;AAAA,YAC7C,yBAAyB,KAAK,MAAM,wBAAwB,KAAK,IAAI;AAAA,YACpE,GAAG;AAAA;AAAA,UAXC,MAAM;AAAA,QAYb;AACA,kBAAU,KAAK,QAAQ;AACvB,eAAO;AAAA,MACT,CAAC;AAAA,IACH,CAAC;AAED,UAAM,IAAI,KAAK,MAAM;AAErB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,MAAK;AAAA,QACL,cAAY,EAAE,aAAa;AAAA,QAC3B,KAAK,KAAK;AAAA,QAEV;AAAA;AAAA,YAAC;AAAA;AAAA,cAEC,QAAQ,KAAK,MAAM;AAAA,cACnB,SAAS,KAAK,MAAM;AAAA,cACpB,QAAQ,KAAK,MAAM,OAAO;AAAA,cAC1B,cAAc,KAAK,YAAY,KAAK,MAAM,KAAK;AAAA,cAC/C,gBAAgB,KAAK,MAAM;AAAA;AAAA,YALtB,KAAK,MAAM,KAAK;AAAA,UAMvB;AAAA,UACA,qBAAC,YAAO,WAAU,8BAChB;AAAA,gCAAC,UAAK,WAAU,oCAAoC,YAAE,QAAQ,GAAE;AAAA,YAChE,oBAAC,UAAK,WAAU,kBAAiB;AAAA,YACjC,oBAAC,SAAI,WAAU,6BACb,8BAAC,SAAI,WAAU,wBACb;AAAA,cAAC;AAAA;AAAA,gBACC,IAAG;AAAA,gBACH,eAAY;AAAA,gBACZ,SAAS,KAAK;AAAA,gBACd,WAAU;AAAA,gBACT,eAAK,MAAM,yBAAyB,OACnC,EAAE,UAAU,IAEZ,EAAE,QAAQ;AAAA;AAAA,YAEd,GACF,GACF;AAAA,YACA,oBAAC,SAAI,WAAU,6BACb,8BAAC,SAAI,WAAU,wBACb;AAAA,cAAC;AAAA;AAAA,gBACC,SAAS,KAAK,YAAY,KAAK,MAAM,KAAK;AAAA,gBAC1C,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACT,YAAE,WAAW;AAAA;AAAA,YAChB,GACF,GACF;AAAA,aACF;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,MAAK;AAAA,cACL,cAAY,EAAE,aAAa;AAAA,cAE3B,8BAAC,QAAG,WAAU,iCACX,qBACH;AAAA;AAAA,UACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,qBAAqB,gBAAgB,EAAE,0BAA0B;AACvE,MAAM,6BAA6B,kBAAkB,CAAC,UAAmC,oBAAC,sBAAoB,GAAG,OAAO,CAAE;AAM1H,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QACL,GAAG,KAAK;AAAA,QACT,aAAY;AAAA,QACZ,WAAW,KAAK,MAAM,YAAY,KAAK,IAAI;AAAA,QAC3C,eAAe;AAAA,QACf,mBAAmB,MAAM;AAAA;AAAA,IAC3B;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"fce844afd94013ad4b9b4e84bd148b8b849d3079"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return bn=function(){return a},a}bn();class sW extends nr.Component{constructor(t){bn().f[1]++,bn().s[1]++;super(t);Pn(this,"selectedItemRef");Pn(this,"scrollContainerRef");Pn(this,"toggleLayers",(bn().s[6]++,()=>{bn().f[3]++;let t=(bn().s[7]++,0);const r=(bn().s[8]++,{});bn().s[9]++,this.groupedLayers().forEach(i=>{bn().f[4]++;const s=(bn().s[10]++,dy(i[0].id)),a=(bn().s[11]++,[s,t].join("-"));bn().s[12]++,i.length>1?(bn().b[0][0]++,bn().s[13]++,r[a]=this.state.areAllGroupsExpanded):bn().b[0][1]++,bn().s[14]++,i.forEach(o=>{bn().f[5]++,bn().s[15]++,t+=1})}),bn().s[16]++,this.setState({collapsedGroups:r,areAllGroupsExpanded:!this.state.areAllGroupsExpanded})}));bn().s[2]++,this.selectedItemRef=nr.createRef(),bn().s[3]++,this.scrollContainerRef=nr.createRef(),bn().s[4]++,this.state={collapsedGroups:{},areAllGroupsExpanded:!1,keys:{add:+Ny()},isOpen:{add:!1}}}toggleModal(t){bn().f[2]++,bn().s[5]++,this.setState({keys:{...this.state.keys,[t]:+Ny()},isOpen:{...this.state.isOpen,[t]:!this.state.isOpen[t]}})}groupedLayers(){bn().f[6]++;const t=(bn().s[17]++,[]),r=(bn().s[18]++,new Map);bn().s[19]++;for(let i=(bn().s[20]++,0);i<this.props.layers.length;i++){const s=(bn().s[21]++,this.props.layers[i]),a=(bn().s[22]++,this.props.layers[i-1]);bn().s[23]++,r.set(s.id,r.has(s.id)?(bn().b[1][0]++,r.get(s.id)+1):(bn().b[1][1]++,0));const o=(bn().s[24]++,{...s,key:`layers-list-${s.id}-${r.get(s.id)}`});if(bn().s[25]++,bn().b[3][0]++,a&&(bn().b[3][1]++,dy(a.id)==dy(o.id))){bn().b[2][0]++;const d=(bn().s[26]++,t[t.length-1]);bn().s[27]++,d.push(o)}else bn().b[2][1]++,bn().s[28]++,t.push([o])}return bn().s[29]++,t}toggleLayerGroup(t,r){bn().f[7]++;const i=(bn().s[30]++,[t,r].join("-")),s=(bn().s[31]++,{...this.state.collapsedGroups});bn().s[32]++,i in this.state.collapsedGroups?(bn().b[4][0]++,bn().s[33]++,s[i]=!this.state.collapsedGroups[i]):(bn().b[4][1]++,bn().s[34]++,s[i]=!1),bn().s[35]++,this.setState({collapsedGroups:s})}isCollapsed(t,r){bn().f[8]++;const i=(bn().s[36]++,this.state.collapsedGroups[[t,r].join("-")]);return bn().s[37]++,i===void 0?(bn().b[5][0]++,!0):(bn().b[5][1]++,i)}shouldComponentUpdate(t,r){if(bn().f[9]++,bn().s[38]++,this.state!==r)return bn().b[6][0]++,bn().s[39]++,!0;bn().b[6][1]++;function i(g){bn().f[10]++;const b=(bn().s[40]++,{id:g.id});return bn().s[41]++,g.layout?(bn().b[7][0]++,bn().s[42]++,b.layout={visibility:g.layout.visibility}):bn().b[7][1]++,bn().s[43]++,b}const s=(bn().s[44]++,C6.isEqual(t.layers.map(i),this.props.layers.map(i)));function a(g){bn().f[11]++;const b=(bn().s[45]++,{...g});return bn().s[46]++,delete b.layers,bn().s[47]++,b}const o=(bn().s[48]++,C6.isEqual(a(this.props),a(t))),d=(bn().s[49]++,bn().b[8][0]++,!(s&&(bn().b[8][1]++,o)));return bn().s[50]++,d}componentDidUpdate(t){if(bn().f[12]++,bn().s[51]++,t.selectedLayerIndex!==this.props.selectedLayerIndex){bn().b[9][0]++;const r=(bn().s[52]++,this.selectedItemRef.current);if(bn().s[53]++,bn().b[11][0]++,r&&(bn().b[11][1]++,r.node)){bn().b[10][0]++;const i=(bn().s[54]++,r.node),s=(bn().s[55]++,{root:this.scrollContainerRef.current,threshold:1}),a=(bn().s[56]++,new IntersectionObserver(o=>{bn().f[13]++,bn().s[57]++,a.unobserve(i),bn().s[58]++,bn().b[13][0]++,o.length>0&&(bn().b[13][1]++,o[0].intersectionRatio<1)?(bn().b[12][0]++,bn().s[59]++,i.scrollIntoView()):bn().b[12][1]++},s));bn().s[60]++,a.observe(i)}else bn().b[10][1]++}else bn().b[9][1]++}render(){bn().f[14]++;const t=(bn().s[61]++,[]);let r=(bn().s[62]++,0);const i=(bn().s[63]++,this.groupedLayers());bn().s[64]++,i.forEach(a=>{bn().f[15]++;const o=(bn().s[65]++,dy(a[0].id));if(bn().s[66]++,a.length>1){bn().b[14][0]++;const d=(bn().s[67]++,ue.jsx(bse,{"data-wd-key":[o,r].join("-"),"aria-controls":a.map(g=>(bn().f[16]++,bn().s[68]++,g.key)).join(" "),title:o,isActive:(bn().b[15][0]++,!this.isCollapsed(o,r)||(bn().b[15][1]++,r===this.props.selectedLayerIndex)),onActiveToggle:this.toggleLayerGroup.bind(this,o,r)},`group-${o}-${r}`));bn().s[69]++,t.push(d)}else bn().b[14][1]++;bn().s[70]++,a.forEach((d,g)=>{var P;bn().f[17]++;const b=(bn().s[71]++,Tle(this.props.layers,r)),E=(bn().s[72]++,this.props.errors.find(z=>(bn().f[18]++,bn().s[73]++,bn().b[16][0]++,z.parsed&&(bn().b[16][1]++,z.parsed.type==="layer")&&(bn().b[16][2]++,z.parsed.data.index==r)))),S=(bn().s[74]++,{});bn().s[75]++,r===this.props.selectedLayerIndex?(bn().b[17][0]++,bn().s[76]++,S.ref=this.selectedItemRef):bn().b[17][1]++;const I=(bn().s[77]++,ue.jsx(tae,{className:am({"maputnik-layer-list-item-collapsed":(bn().b[18][0]++,a.length>1&&(bn().b[18][1]++,this.isCollapsed(o,b))&&(bn().b[18][2]++,r!==this.props.selectedLayerIndex)),"maputnik-layer-list-item-group-last":(bn().b[19][0]++,g==a.length-1&&(bn().b[19][1]++,a.length>1)),"maputnik-layer-list-item--error":!!E}),index:r,id:d.key,layerId:d.id,layerIndex:r,layerType:d.type,visibility:(bn().b[20][0]++,d.layout||(bn().b[20][1]++,{})).visibility,isSelected:r===this.props.selectedLayerIndex,onLayerSelect:this.props.onLayerSelect,onLayerDestroy:(P=this.props.onLayerDestroy)==null?void 0:P.bind(this),onLayerCopy:this.props.onLayerCopy.bind(this),onLayerVisibilityToggle:this.props.onLayerVisibilityToggle.bind(this),...S},d.key));bn().s[78]++,t.push(I),bn().s[79]++,r+=1})});const s=(bn().s[80]++,this.props.t);return bn().s[81]++,ue.jsxs("section",{className:"maputnik-layer-list",role:"complementary","aria-label":s("Layers list"),ref:this.scrollContainerRef,children:[ue.jsx(Ole,{layers:this.props.layers,sources:this.props.sources,isOpen:this.state.isOpen.add,onOpenToggle:this.toggleModal.bind(this,"add"),onLayersChange:this.props.onLayersChange},this.state.keys.add),ue.jsxs("header",{className:"maputnik-layer-list-header",children:[ue.jsx("span",{className:"maputnik-layer-list-header-title",children:s("Layers")}),ue.jsx("span",{className:"maputnik-space"}),ue.jsx("div",{className:"maputnik-default-property",children:ue.jsx("div",{className:"maputnik-multibutton",children:ue.jsx("button",{id:"skip-target-layer-list","data-wd-key":"skip-target-layer-list",onClick:this.toggleLayers,className:"maputnik-button",children:this.state.areAllGroupsExpanded===!0?(bn().b[21][0]++,s("Collapse")):(bn().b[21][1]++,s("Expand"))})})}),ue.jsx("div",{className:"maputnik-default-property",children:ue.jsx("div",{className:"maputnik-multibutton",children:ue.jsx("button",{onClick:this.toggleModal.bind(this,"add"),"data-wd-key":"layer-list:add-layer",className:"maputnik-button maputnik-button-selected",children:s("Add Layer")})})})]}),ue.jsx("div",{role:"navigation","aria-label":s("Layers list"),children:ue.jsx("ul",{className:"maputnik-layer-list-container",children:t})})]})}}Pn(sW,"defaultProps",(bn().s[0]++,{onLayerSelect:()=>{bn().f[0]++}}));const Ple=(bn().s[82]++,Ns()(sW)),Kle=(bn().s[83]++,Zse(n=>(bn().f[19]++,bn().s[84]++,ue.jsx(Ple,{...n}))));class Dle extends nr.Component{render(){return bn().f[20]++,bn().s[85]++,ue.jsx(Kle,{...this.props,helperClass:"sortableHelper",onSortEnd:this.props.onMoveLayer.bind(this),useDragHandle:!0,shouldCancelStart:()=>(bn().f[21]++,bn().s[86]++,!1)})}}var z5,fT;function aW(){if(fT)return z5;fT=1;var n={},e="a menu outside a mounted Wrapper with an id, or a menu that does not exist";function t(a,o){n[a]=o}function r(a){delete n[a]}function i(a,o){var d=n[a];if(!d)throw new Error("Cannot open "+e);d.openMenu(o)}function s(a,o){var d=n[a];if(!d)throw new Error("Cannot close "+e);d.closeMenu(o)}return z5={registerManager:t,unregisterManager:r,openMenu:i,closeMenu:s},z5}var j5,pT;function Rle(){if(pT)return j5;pT=1;function n(i){i=i||{};var s=i.keybindings||{};this._settings={keybindings:{next:s.next||{keyCode:40},prev:s.prev||{keyCode:38},first:s.first,last:s.last},wrap:i.wrap,stringSearch:i.stringSearch,stringSearchDelay:800},this._keybindingsLookup=[];var a,o;for(a in this._settings.keybindings)o=this._settings.keybindings[a],o&&[].concat(o).forEach((function(d){d.metaKey=d.metaKey||!1,d.ctrlKey=d.ctrlKey||!1,d.altKey=d.altKey||!1,d.shiftKey=d.shiftKey||!1,this._keybindingsLookup.push({action:a,eventMatcher:d})}).bind(this));this._searchString="",this._members=[],i.members&&this.setMembers(i.members),this._boundHandleKeydownEvent=this._handleKeydownEvent.bind(this)}n.prototype.activate=function(){return document.addEventListener("keydown",this._boundHandleKeydownEvent,!0),this},n.prototype.deactivate=function(){return document.removeEventListener("keydown",this._boundHandleKeydownEvent,!0),this._clearSearchStringRefreshTimer(),this},n.prototype._handleKeydownEvent=function(i){var s=this._getActiveElementIndex();if(s!==-1){var a=!1;this._keybindingsLookup.forEach((function(o){if(e(o.eventMatcher,i))switch(a=!0,i.preventDefault(),o.action){case"next":this.moveFocusForward();break;case"prev":this.moveFocusBack();break;case"first":this.moveFocusToFirst();break;case"last":this.moveFocusToLast();break;default:return}}).bind(this)),a||this._handleUnboundKey(i)}},n.prototype.moveFocusForward=function(){var i=this._getActiveElementIndex(),s;return i<this._members.length-1?s=i+1:this._settings.wrap?s=0:s=i,this.focusNodeAtIndex(s),s},n.prototype.moveFocusBack=function(){var i=this._getActiveElementIndex(),s;return i>0?s=i-1:this._settings.wrap?s=this._members.length-1:s=i,this.focusNodeAtIndex(s),s},n.prototype.moveFocusToFirst=function(){this.focusNodeAtIndex(0)},n.prototype.moveFocusToLast=function(){this.focusNodeAtIndex(this._members.length-1)},n.prototype._handleUnboundKey=function(i){if(this._settings.stringSearch){if(this._searchString!==""&&(i.key===" "||i.keyCode===32))return i.preventDefault(),-1;if(!t(i.keyCode)||i.ctrlKey||i.metaKey||i.altKey)return-1;i.preventDefault(),this._addToSearchString(String.fromCharCode(i.keyCode)),this._runStringSearch()}},n.prototype._clearSearchString=function(){this._searchString=""},n.prototype._addToSearchString=function(i){this._searchString+=i.toLowerCase()},n.prototype._startSearchStringRefreshTimer=function(){var i=this;this._clearSearchStringRefreshTimer(),this._stringSearchTimer=setTimeout(function(){i._clearSearchString()},this._settings.stringSearchDelay)},n.prototype._clearSearchStringRefreshTimer=function(){clearTimeout(this._stringSearchTimer)},n.prototype._runStringSearch=function(){this._startSearchStringRefreshTimer(),this.moveFocusByString(this._searchString)},n.prototype.moveFocusByString=function(i){for(var s,a=0,o=this._members.length;a<o;a++)if(s=this._members[a],!!s.text&&s.text.indexOf(i)===0)return r(s.node)},n.prototype._findIndexOfNode=function(i){for(var s=0,a=this._members.length;s<a;s++)if(this._members[s].node===i)return s;return-1},n.prototype._getActiveElementIndex=function(){return this._findIndexOfNode(document.activeElement)},n.prototype.focusNodeAtIndex=function(i){var s=this._members[i];return s&&r(s.node),this},n.prototype.addMember=function(i,s){var a=i.node||i,o=i.text||a.getAttribute("data-focus-group-text")||a.textContent||"";this._checkNode(a);var d=o.replace(/[\W_]/g,"").toLowerCase(),g={node:a,text:d};return s!=null?this._members.splice(s,0,g):this._members.push(g),this},n.prototype.removeMember=function(i){var s=typeof i=="number"?i:this._findIndexOfNode(i);if(s!==-1)return this._members.splice(s,1),this},n.prototype.clearMembers=function(){return this._members=[],this},n.prototype.setMembers=function(i){this.clearMembers();for(var s=0,a=i.length;s<a;s++)this.addMember(i[s]);return this},n.prototype.getMembers=function(){return this._members},n.prototype._checkNode=function(i){if(!i.nodeType||i.nodeType!==window.Node.ELEMENT_NODE)throw new Error("focus-group: only DOM nodes allowed");return i};function e(i,s){for(var a in i)if(s[a]!==void 0&&i[a]!==s[a])return!1;return!0}function t(i){return i>=65&&i<=90}function r(i){!i||!i.focus||(i.focus(),i.tagName.toLowerCase()==="input"&&i.select())}return j5=function(s){return new n(s)},j5}var N5,mT;function Fle(){if(mT)return N5;mT=1;var n=Rle(),e=aW(),t={wrap:!0,stringSearch:!0},r={init:function(d){this.updateOptions(d),this.handleBlur=i.bind(this),this.handleSelection=s.bind(this),this.handleMenuKey=a.bind(this),this.focusGroup=n(t),this.button=null,this.menu=null,this.isOpen=!1},updateOptions:function(d){var g=this.options;this.options=d||this.options||{},typeof this.options.closeOnSelection>"u"&&(this.options.closeOnSelection=!0),typeof this.options.closeOnBlur>"u"&&(this.options.closeOnBlur=!0),this.options.id&&e.registerManager(this.options.id,this),g&&g.id&&g.id!==this.options.id&&e.unregisterManager(this.options.id,this)},focusItem:function(d){this.focusGroup.focusNodeAtIndex(d)},addItem:function(d){this.focusGroup.addMember(d)},clearItems:function(){this.focusGroup.clearMembers()},handleButtonNonArrowKey:function(d){this.focusGroup._handleUnboundKey(d)},destroy:function(){this.button=null,this.menu=null,this.focusGroup.deactivate(),clearTimeout(this.blurTimer),clearTimeout(this.moveFocusTimer)},update:function(){this.menu.setState({isOpen:this.isOpen}),this.button.setState({menuOpen:this.isOpen}),this.options.onMenuToggle&&this.options.onMenuToggle({isOpen:this.isOpen})},openMenu:function(d){if(!this.isOpen&&(d=d||{},d.focusMenu===void 0&&(d.focusMenu=!0),this.isOpen=!0,this.update(),this.focusGroup.activate(),d.focusMenu)){var g=this;this.moveFocusTimer=setTimeout(function(){g.focusItem(0)},0)}},closeMenu:function(d){this.isOpen&&(d=d||{},this.isOpen=!1,this.update(),d.focusButton&&this.button.ref.current.focus())},toggleMenu:function(d,g){d=d||{},g=g||{},this.isOpen?this.closeMenu(d):this.openMenu(g)}};function i(){var o=this;o.blurTimer=setTimeout(function(){if(o.button){var d=o.button.ref.current;if(d){var g=d.ownerDocument.activeElement;if(!(d&&g===d)){var b=o.menu.ref.current;if(b===g){o.focusItem(0);return}b&&b.contains(g)||o.isOpen&&o.closeMenu({focusButton:!1})}}}},0)}function s(o,d){this.options.closeOnSelection&&this.closeMenu({focusButton:!0}),this.options.onSelection&&this.options.onSelection(o,d)}function a(o){if(this.isOpen)switch(o.key){case"Escape":o.preventDefault(),this.closeMenu({focusButton:!0});break;case"Home":o.preventDefault(),this.focusGroup.moveFocusToFirst();break;case"End":o.preventDefault(),this.focusGroup.moveFocusToLast();break}}return N5=function(o){var d=Object.create(r);return d.init(o),d},N5}var W5,gT;function u3(){if(gT)return W5;gT=1;var n=za(),e=n.createContext();return W5=e,W5}var G5,yT;function A3(){if(yT)return G5;yT=1;var n=xp();return G5={refType:n.oneOfType([n.func,n.shape({current:n.elementType})])},G5}var Q5,vT;function c3(){return vT||(vT=1,Q5=function(n,e,t){t=t||{};for(var r in e)e.hasOwnProperty(r)&&(t[r]||(n[r]=e[r]))}),Q5}var q5,CT;function Lle(){if(CT)return q5;CT=1;function n(I,P){if(!(I instanceof P))throw new TypeError("Cannot call a class as a function")}function e(I,P){if(!I)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P&&(typeof P=="object"||typeof P=="function")?P:I}function t(I,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof P);I.prototype=Object.create(P&&P.prototype,{constructor:{value:I,enumerable:!1,writable:!0,configurable:!0}}),P&&(Object.setPrototypeOf?Object.setPrototypeOf(I,P):I.__proto__=P)}var r=za(),i=xp(),s=Fle(),a=u3(),o=A3(),d=o.refType,g=c3(),b={children:i.node.isRequired,forwardedRef:d,onMenuToggle:i.func,onSelection:i.func,closeOnSelection:i.bool,closeOnBlur:i.bool,tag:i.string},E=function(P){return{onMenuToggle:P.onMenuToggle,onSelection:P.onSelection,closeOnSelection:P.closeOnSelection,closeOnBlur:P.closeOnBlur,id:P.id}},S=function(I){t(P,I);function P(z){n(this,P);var j=e(this,I.call(this,z));return j.manager=s(E(z)),j}return P.prototype.componentDidUpdate=function(){this.manager.updateOptions(E(this.props))},P.prototype.render=function(){var j={};return g(j,this.props,b),r.createElement(a.Provider,{value:this.manager},r.createElement(this.props.tag,j,this.props.children))},P}(r.Component);return S.propTypes=b,S.defaultProps={tag:"div"},q5=r.forwardRef(function(I,P){var z={forwardedRef:P};return g(z,I,{children:b.children,forwardedRef:b.forwardedRef}),g(z,{forwardedRef:P}),r.createElement(S,z,I.children)}),q5}var Y5,_T;function Ule(){if(_T)return Y5;_T=1;function n(S,I){if(!(S instanceof I))throw new TypeError("Cannot call a class as a function")}function e(S,I){if(!S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return I&&(typeof I=="object"||typeof I=="function")?I:S}function t(S,I){if(typeof I!="function"&&I!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof I);S.prototype=Object.create(I&&I.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),I&&(Object.setPrototypeOf?Object.setPrototypeOf(S,I):S.__proto__=I)}var r=za(),i=xp(),s=u3(),a=A3(),o=a.refType,d=c3(),g={ambManager:i.object.isRequired,children:i.node.isRequired,disabled:i.bool,forwardedRef:o,tag:i.string},b=function(){return["button","fieldset","input","optgroup","option","select","textarea"]},E=function(S){t(I,S);function I(){var P,z,j;n(this,I);for(var q=arguments.length,Y=Array(q),ie=0;ie<q;ie++)Y[ie]=arguments[ie];return j=(P=(z=e(this,S.call.apply(S,[this].concat(Y))),z),z.ref=r.createRef(),z.handleKeyDown=function(te){if(!z.props.disabled){var V=z.props.ambManager;switch(te.key){case"ArrowDown":te.preventDefault(),V.isOpen?V.focusItem(0):V.openMenu();break;case"Enter":case" ":te.preventDefault(),V.toggleMenu();break;case"Escape":V.handleMenuKey(te);break;default:V.handleButtonNonArrowKey(te)}}},z.handleClick=function(){z.props.disabled||z.props.ambManager.toggleMenu({},{focusMenu:!1})},z.setRef=function(te){z.ref.current=te,typeof z.props.forwardedRef=="function"?z.props.forwardedRef(te):z.props.forwardedRef&&(z.props.forwardedRef.current=te)},P),e(z,j)}return I.prototype.componentDidMount=function(){this.props.ambManager.button=this},I.prototype.componentWillUnmount=function(){this.props.ambManager.destroy()},I.prototype.render=function(){var z=this.props,j=this.props.ambManager,q={role:"button",tabIndex:z.disabled?"":"0","aria-haspopup":!0,"aria-expanded":j.isOpen,"aria-disabled":z.disabled,onKeyDown:this.handleKeyDown,onClick:this.handleClick},Y={};return d(Y,g),b().indexOf(z.tag)>=0&&delete Y.disabled,j.options.closeOnBlur&&(q.onBlur=j.handleBlur),d(q,z,Y),d(q,{ref:this.setRef}),r.createElement(z.tag,q,z.children)},I}(r.Component);return E.propTypes=g,E.defaultProps={tag:"span"},Y5=r.forwardRef(function(S,I){return r.createElement(s.Consumer,null,function(P){var z={ambManager:P,forwardedRef:I};return d(z,S,{ambManager:g.ambManager,children:g.children,forwardedRef:g.forwardedRef}),r.createElement(E,z,S.children)})}),Y5}var $5,bT;function zle(){return bT||(bT=1,$5=function(e,t,r){var i=0,s=0,a=!1,o=!1,d=!1;e.addEventListener("click",g,r),e.addEventListener("touchstart",b,r);function g(j){d||t(j)}function b(j){d=!0,!a&&(a=!0,e.addEventListener("touchmove",E,r),e.addEventListener("touchend",S,r),e.addEventListener("touchcancel",I,r),o=!1,i=j.touches[0].clientX,s=j.touches[0].clientY)}function E(j){o||Math.abs(j.touches[0].clientX-i)<=10&&Math.abs(j.touches[0].clientY-s)<=10||(o=!0)}function S(j){a=!1,P(),o||t(j)}function I(){a=!1,o=!1,i=0,s=0}function P(){e.removeEventListener("touchmove",E,r),e.removeEventListener("touchend",S,r),e.removeEventListener("touchcancel",I,r)}function z(){e.removeEventListener("click",g,r),e.removeEventListener("touchstart",b,r),P()}return{remove:z}}),$5}var V5,xT;function jle(){if(xT)return V5;xT=1;function n(S,I){if(!(S instanceof I))throw new TypeError("Cannot call a class as a function")}function e(S,I){if(!S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return I&&(typeof I=="object"||typeof I=="function")?I:S}function t(S,I){if(typeof I!="function"&&I!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof I);S.prototype=Object.create(I&&I.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),I&&(Object.setPrototypeOf?Object.setPrototypeOf(S,I):S.__proto__=I)}var r=za(),i=xp(),s=zle(),a=u3(),o=A3(),d=o.refType,g=c3(),b={ambManager:i.object.isRequired,children:i.oneOfType([i.func,i.node]).isRequired,forwardedRef:d,tag:i.string},E=function(S){t(I,S);function I(){var P,z,j;n(this,I);for(var q=arguments.length,Y=Array(q),ie=0;ie<q;ie++)Y[ie]=arguments[ie];return j=(P=(z=e(this,S.call.apply(S,[this].concat(Y))),z),z.ref=r.createRef(),z.addTapListener=function(){var te=z.ref.current;if(te){var V=te.ownerDocument;V&&(z.tapListener=s(V.documentElement,z.handleTap))}},z.handleTap=function(te){z.ref.current.contains(te.target)||z.props.ambManager.button.ref.current.contains(te.target)||z.props.ambManager.closeMenu()},z.setRef=function(te){z.ref.current=te,typeof z.props.forwardedRef=="function"?z.props.forwardedRef(te):z.props.forwardedRef&&(z.props.forwardedRef.current=te)},P),e(z,j)}return I.prototype.componentDidMount=function(){this.props.ambManager.menu=this},I.prototype.componentDidUpdate=function(){var z=this.props.ambManager;z.options.closeOnBlur&&(z.isOpen&&!this.tapListener?this.addTapListener():!z.isOpen&&this.tapListener&&(this.tapListener.remove(),delete this.tapListener),z.isOpen||z.clearItems())},I.prototype.componentWillUnmount=function(){this.tapListener&&this.tapListener.remove(),this.props.ambManager.destroy()},I.prototype.render=function(){var z=this.props,j=this.props.ambManager,q=function(){return typeof z.children=="function"?z.children({isOpen:j.isOpen}):j.isOpen?z.children:!1}();if(!q)return!1;var Y={onKeyDown:j.handleMenuKey,role:"menu",tabIndex:-1};return j.options.closeOnBlur&&(Y.onBlur=j.handleBlur),g(Y,z,b),g(Y,{ref:this.setRef}),r.createElement(z.tag,Y,q)},I}(r.Component);return E.propTypes=b,E.defaultProps={tag:"div"},V5=r.forwardRef(function(S,I){return r.createElement(a.Consumer,null,function(P){var z={ambManager:P,forwardedRef:I};return g(z,S,{ambManager:b.ambManager,children:b.children,forwardedRef:b.forwardedRef}),r.createElement(E,z,S.children)})}),V5}var H5,wT;function Nle(){if(wT)return H5;wT=1;function n(E,S){if(!(E instanceof S))throw new TypeError("Cannot call a class as a function")}function e(E,S){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:E}function t(E,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);E.prototype=Object.create(S&&S.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(E,S):E.__proto__=S)}var r=za(),i=xp(),s=u3(),a=A3(),o=a.refType,d=c3(),g={ambManager:i.object.isRequired,children:i.node.isRequired,forwardedRef:o,tag:i.string,text:i.string,value:i.any},b=function(E){t(S,E);function S(){var I,P,z;n(this,S);for(var j=arguments.length,q=Array(j),Y=0;Y<j;Y++)q[Y]=arguments[Y];return z=(I=(P=e(this,E.call.apply(E,[this].concat(q))),P),P.ref=r.createRef(),P.handleKeyDown=function(ie){ie.key!=="Enter"&&ie.key!==" "||P.props.tag==="a"&&P.props.href||(ie.preventDefault(),P.selectItem(ie))},P.selectItem=function(ie){var te=typeof P.props.value<"u"?P.props.value:P.props.children;P.props.ambManager.handleSelection(te,ie)},P.setRef=function(ie){P.ref.current=ie,typeof P.props.forwardedRef=="function"?P.props.forwardedRef(ie):P.props.forwardedRef&&(P.props.forwardedRef.current=ie)},I),e(P,z)}return S.prototype.componentDidMount=function(){this.props.ambManager.addItem({node:this.ref.current,text:this.props.text})},S.prototype.render=function(){var P={onClick:this.selectItem,onKeyDown:this.handleKeyDown,role:"menuitem",tabIndex:"-1",ref:this.setRef};return d(P,this.props,g),r.createElement(this.props.tag,P,this.props.children)},S}(r.Component);return b.propTypes=g,b.defaultProps={tag:"div"},H5=r.forwardRef(function(E,S){return r.createElement(s.Consumer,null,function(I){var P={ambManager:I,forwardedRef:S};return d(P,E,{ambManager:g.ambManager,children:g.children,forwardedRef:g.forwardedRef}),r.createElement(b,P,E.children)})}),H5}var Z5,MT;function Wle(){if(MT)return Z5;MT=1;var n=aW();return Z5={Wrapper:Lle(),Button:Ule(),Menu:jle(),MenuItem:Nle(),openMenu:n.openMenu,closeMenu:n.closeMenu},Z5}var Ib=Wle();function ST(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function TB(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ST(Object(t),!0).forEach(function(r){Dl(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):ST(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function d3(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function ET(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function h3(n,e,t){return e&&ET(n.prototype,e),t&&ET(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function Dl(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function lm(){return lm=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},lm.apply(this,arguments)}function zO(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&PB(n,e)}function nx(n){return nx=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},nx(n)}function PB(n,e){return PB=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},PB(n,e)}function Gle(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Qle(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function f3(n,e){if(n==null)return{};var t=Qle(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function pp(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function qle(n,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pp(n)}function jO(n){var e=Gle();return function(){var r=nx(n),i;if(e){var s=nx(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return qle(this,i)}}function Yle(n,e){return Hle(n)||Xle(n,e)||lW(n,e)||eue()}function $le(n){return Vle(n)||Zle(n)||lW(n)||Jle()}function Vle(n){if(Array.isArray(n))return KB(n)}function Hle(n){if(Array.isArray(n))return n}function Zle(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Xle(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r=[],i=!0,s=!1,a,o;try{for(t=t.call(n);!(i=(a=t.next()).done)&&(r.push(a.value),!(e&&r.length===e));i=!0);}catch(d){s=!0,o=d}finally{try{!i&&t.return!=null&&t.return()}finally{if(s)throw o}}return r}}function lW(n,e){if(n){if(typeof n=="string")return KB(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return KB(n,e)}}function KB(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Jle(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eue(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var tue=h3(function n(e){var t=this,r=e.expanded,i=r===void 0?[]:r,s=e.allowMultipleExpanded,a=s===void 0?!1:s,o=e.allowZeroExpanded,d=o===void 0?!1:o;d3(this,n),Dl(this,"expanded",void 0),Dl(this,"allowMultipleExpanded",void 0),Dl(this,"allowZeroExpanded",void 0),Dl(this,"toggleExpanded",function(g){if(t.isItemDisabled(g))return t;var b=t.isItemExpanded(g);return b?t.augment({expanded:t.expanded.filter(function(E){return E!==g})}):t.augment({expanded:t.allowMultipleExpanded?[].concat($le(t.expanded),[g]):[g]})}),Dl(this,"isItemDisabled",function(g){var b=t.isItemExpanded(g),E=t.expanded.length===1;return!!(b&&!t.allowZeroExpanded&&E)}),Dl(this,"isItemExpanded",function(g){return t.expanded.indexOf(g)!==-1}),Dl(this,"getPanelAttributes",function(g,b){var E=b??t.isItemExpanded(g);return{role:t.allowMultipleExpanded?void 0:"region","aria-hidden":t.allowMultipleExpanded?!E:void 0,"aria-labelledby":t.getButtonId(g),id:t.getPanelId(g),hidden:E?void 0:!0}}),Dl(this,"getHeadingAttributes",function(){return{role:"heading"}}),Dl(this,"getButtonAttributes",function(g,b){var E=b??t.isItemExpanded(g),S=t.isItemDisabled(g);return{id:t.getButtonId(g),"aria-disabled":S,"aria-expanded":E,"aria-controls":t.getPanelId(g),role:"button",tabIndex:0}}),Dl(this,"getPanelId",function(g){return"accordion__panel-".concat(g)}),Dl(this,"getButtonId",function(g){return"accordion__heading-".concat(g)}),Dl(this,"augment",function(g){return new n(TB({expanded:t.expanded,allowMultipleExpanded:t.allowMultipleExpanded,allowZeroExpanded:t.allowZeroExpanded},g))}),this.expanded=i,this.allowMultipleExpanded=a,this.allowZeroExpanded=d}),uW=li.createContext(null),AW=function(n){zO(t,n);var e=jO(t);function t(){var r;d3(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),Dl(pp(r),"state",new tue({expanded:r.props.preExpanded,allowMultipleExpanded:r.props.allowMultipleExpanded,allowZeroExpanded:r.props.allowZeroExpanded})),Dl(pp(r),"toggleExpanded",function(o){r.setState(function(d){return d.toggleExpanded(o)},function(){r.props.onChange&&r.props.onChange(r.state.expanded)})}),Dl(pp(r),"isItemDisabled",function(o){return r.state.isItemDisabled(o)}),Dl(pp(r),"isItemExpanded",function(o){return r.state.isItemExpanded(o)}),Dl(pp(r),"getPanelAttributes",function(o,d){return r.state.getPanelAttributes(o,d)}),Dl(pp(r),"getHeadingAttributes",function(){return r.state.getHeadingAttributes()}),Dl(pp(r),"getButtonAttributes",function(o,d){return r.state.getButtonAttributes(o,d)}),r}return h3(t,[{key:"render",value:function(){var i=this.state,s=i.allowZeroExpanded,a=i.allowMultipleExpanded;return li.createElement(uW.Provider,{value:{allowMultipleExpanded:a,allowZeroExpanded:s,toggleExpanded:this.toggleExpanded,isItemDisabled:this.isItemDisabled,isItemExpanded:this.isItemExpanded,getPanelAttributes:this.getPanelAttributes,getHeadingAttributes:this.getHeadingAttributes,getButtonAttributes:this.getButtonAttributes}},this.props.children||null)}}]),t}(li.PureComponent);Dl(AW,"defaultProps",{allowMultipleExpanded:!1,allowZeroExpanded:!1});var cW=function(n){zO(t,n);var e=jO(t);function t(){var r;d3(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),Dl(pp(r),"renderChildren",function(o){return o?r.props.children(o):null}),r}return h3(t,[{key:"render",value:function(){return li.createElement(uW.Consumer,null,this.renderChildren)}}]),t}(li.PureComponent),nue=["className","allowMultipleExpanded","allowZeroExpanded","onChange","preExpanded"],rue=function(e){var t=e.className,r=t===void 0?"accordion":t,i=e.allowMultipleExpanded,s=e.allowZeroExpanded,a=e.onChange,o=e.preExpanded,d=f3(e,nue);return li.createElement(AW,{preExpanded:o,allowMultipleExpanded:i,allowZeroExpanded:s,onChange:a},li.createElement("div",lm({"data-accordion-component":"Accordion",className:r},d)))},DB;(function(n){n.Accordion="Accordion",n.AccordionItem="AccordionItem",n.AccordionItemButton="AccordionItemButton",n.AccordionItemHeading="AccordionItemHeading",n.AccordionItemPanel="AccordionItemPanel"})(DB||(DB={}));var dW=DB,X5=0;function iue(){var n=X5;return X5=X5+1,"raa-".concat(n)}var oue=li.useId||iue,sue=/[\u0009\u000a\u000c\u000d\u0020]/g;function WC(n){return n===""||sue.test(n)?(console.error('uuid must be a valid HTML5 id but was given "'.concat(n,'", ASCII whitespaces are forbidden')),!1):!0}var hW=li.createContext(null),aue=function(e){var t=e.children,r=e.uuid,i=e.accordionContext,s=e.dangerouslySetExpanded,a=function(){i.toggleExpanded(r)},o=function(g){var b=s??g.isItemExpanded(r),E=g.isItemDisabled(r),S=g.getPanelAttributes(r,s),I=g.getHeadingAttributes(r),P=g.getButtonAttributes(r,s);return li.createElement(hW.Provider,{value:{uuid:r,expanded:b,disabled:E,toggleExpanded:a,panelAttributes:S,headingAttributes:I,buttonAttributes:P}},t)};return li.createElement(cW,null,o)},lue=function(e){return li.createElement(cW,null,function(t){return li.createElement(aue,lm({},e,{accordionContext:t}))})},p3=function(e){var t=e.children,r=function(s){return s?t(s):null};return li.createElement(hW.Consumer,null,r)},uue=["uuid","dangerouslySetExpanded","className","activeClassName"],fW=function(e){var t=e.uuid,r=e.dangerouslySetExpanded,i=e.className,s=i===void 0?"accordion__item":i,a=e.activeClassName,o=f3(e,uue),d=li.useState(oue()),g=Yle(d,1),b=g[0],E=t??b,S=function(P){var z=P.expanded,j=z&&a?a:s;return li.createElement("div",lm({"data-accordion-component":"AccordionItem",className:j},o))};return WC(E.toString()),o.id&&WC(o.id),li.createElement(lue,{uuid:E,dangerouslySetExpanded:r},li.createElement(p3,null,S))};fW.displayName=dW.AccordionItem;function pW(n){return n&&(n.matches('[data-accordion-component="Accordion"]')?n:pW(n.parentElement))}function m3(n){var e=pW(n);return e&&Array.from(e.querySelectorAll('[data-accordion-component="AccordionItemButton"]'))}function Aue(n){var e=m3(n)||[],t=e[0];t&&t.focus()}function cue(n){var e=m3(n)||[],t=e[e.length-1];t&&t.focus()}function due(n){var e=m3(n)||[],t=e.indexOf(n);if(t!==-1){var r=e[t+1];r&&r.focus()}}function hue(n){var e=m3(n)||[],t=e.indexOf(n);if(t!==-1){var r=e[t-1];r&&r.focus()}}var Om={END:"End",ENTER:"Enter",HOME:"Home",SPACE:" ",SPACE_DEPRECATED:"Spacebar",UP:"ArrowUp",DOWN:"ArrowDown",LEFT:"ArrowLeft",RIGHT:"ArrowRight"},fue=["toggleExpanded","className"],pue=function(e){var t=e.toggleExpanded,r=e.className,i=r===void 0?"accordion__button":r,s=f3(e,fue),a=function(d){var g=d.key;if((g===Om.ENTER||g===Om.SPACE||g===Om.SPACE_DEPRECATED)&&(d.preventDefault(),t()),d.target instanceof HTMLElement)switch(g){case Om.HOME:{d.preventDefault(),Aue(d.target);break}case Om.END:{d.preventDefault(),cue(d.target);break}case Om.LEFT:case Om.UP:{d.preventDefault(),hue(d.target);break}case Om.RIGHT:case Om.DOWN:{d.preventDefault(),due(d.target);break}}};return s.id&&WC(s.id),li.createElement("div",lm({className:i},s,{role:"button",tabIndex:0,onClick:t,onKeyDown:a,"data-accordion-component":"AccordionItemButton"}))},mue=function(e){return li.createElement(p3,null,function(t){var r=t.toggleExpanded,i=t.buttonAttributes;return li.createElement(pue,lm({toggleExpanded:r},e,i))})},gue={className:"accordion__heading","aria-level":3},yue=`AccordionItemButton may contain only one child element, which must be an instance of AccordionItemButton.

From the WAI-ARIA spec (https://www.w3.org/TR/wai-aria-practices-1.1/#accordion):

The button element is the only element inside the heading element. That is, if there are other visually persistent elements, they are not included inside the heading element.

`,mW=function(n){zO(t,n);var e=jO(t);function t(){var r;d3(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),Dl(pp(r),"ref",void 0),Dl(pp(r),"setRef",function(o){r.ref=o}),r}return h3(t,[{key:"componentDidUpdate",value:function(){t.VALIDATE(this.ref)}},{key:"componentDidMount",value:function(){t.VALIDATE(this.ref)}},{key:"render",value:function(){return li.createElement("div",lm({"data-accordion-component":"AccordionItemHeading"},this.props,{ref:this.setRef}))}}],[{key:"VALIDATE",value:function(i){if(i===void 0)throw new Error("ref is undefined");if(!(i.childElementCount===1&&i.firstElementChild&&i.firstElementChild.getAttribute("data-accordion-component")==="AccordionItemButton"))throw new Error(yue)}}]),t}(li.PureComponent);Dl(mW,"defaultProps",gue);var gW=function(e){return li.createElement(p3,null,function(t){var r=t.headingAttributes;return e.id&&WC(e.id),li.createElement(mW,lm({},e,r))})};gW.displayName=dW.AccordionItemHeading;var vue=["className","region","id"],Cue=function(e){var t=e.className,r=t===void 0?"accordion__panel":t,i=e.region,s=e.id,a=f3(e,vue),o=function(g){var b=g.panelAttributes;s&&WC(s);var E=TB(TB({},b),{},{"aria-labelledby":i?b["aria-labelledby"]:void 0});return li.createElement("div",lm({"data-accordion-component":"AccordionItemPanel",className:r},a,E,{role:i?"region":void 0}))};return li.createElement(p3,null,o)},Xb={exports:{}},_ue=Xb.exports,BT;function g3(){return BT||(BT=1,function(n,e){(function(t,r){n.exports=r()})(_ue,function(){var t=navigator.userAgent,r=navigator.platform,i=/gecko\/\d/i.test(t),s=/MSIE \d/.test(t),a=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(t),o=/Edge\/(\d+)/.exec(t),d=s||a||o,g=d&&(s?document.documentMode||6:+(o||a)[1]),b=!o&&/WebKit\//.test(t),E=b&&/Qt\/\d+\.\d+/.test(t),S=!o&&/Chrome\/(\d+)/.exec(t),I=S&&+S[1],P=/Opera\//.test(t),z=/Apple Computer/.test(navigator.vendor),j=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(t),q=/PhantomJS/.test(t),Y=z&&(/Mobile\/\w+/.test(t)||navigator.maxTouchPoints>2),ie=/Android/.test(t),te=Y||ie||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(t),V=Y||/Mac/.test(r),ne=/\bCrOS\b/.test(t),G=/win/i.test(r),oe=P&&t.match(/Version\/(\d*\.\d*)/);oe&&(oe=Number(oe[1])),oe&&oe>=15&&(P=!1,b=!0);var he=V&&(E||P&&(oe==null||oe<12.11)),pe=i||d&&g>=9;function Ee(A){return new RegExp("(^|\\s)"+A+"(?:$|\\s)\\s*")}var me=function(A,y){var O=A.className,B=Ee(y).exec(O);if(B){var R=O.slice(B.index+B[0].length);A.className=O.slice(0,B.index)+(R?B[1]+R:"")}};function Se(A){for(var y=A.childNodes.length;y>0;--y)A.removeChild(A.firstChild);return A}function De(A,y){return Se(A).appendChild(y)}function be(A,y,O,B){var R=document.createElement(A);if(O&&(R.className=O),B&&(R.style.cssText=B),typeof y=="string")R.appendChild(document.createTextNode(y));else if(y)for(var Z=0;Z<y.length;++Z)R.appendChild(y[Z]);return R}function at(A,y,O,B){var R=be(A,y,O,B);return R.setAttribute("role","presentation"),R}var Ze;document.createRange?Ze=function(A,y,O,B){var R=document.createRange();return R.setEnd(B||A,O),R.setStart(A,y),R}:Ze=function(A,y,O){var B=document.body.createTextRange();try{B.moveToElementText(A.parentNode)}catch{return B}return B.collapse(!0),B.moveEnd("character",O),B.moveStart("character",y),B};function Je(A,y){if(y.nodeType==3&&(y=y.parentNode),A.contains)return A.contains(y);do if(y.nodeType==11&&(y=y.host),y==A)return!0;while(y=y.parentNode)}function We(A){var y=A.ownerDocument||A,O;try{O=A.activeElement}catch{O=y.body||null}for(;O&&O.shadowRoot&&O.shadowRoot.activeElement;)O=O.shadowRoot.activeElement;return O}function Me(A,y){var O=A.className;Ee(y).test(O)||(A.className+=(O?" ":"")+y)}function Fe(A,y){for(var O=A.split(" "),B=0;B<O.length;B++)O[B]&&!Ee(O[B]).test(y)&&(y+=" "+O[B]);return y}var He=function(A){A.select()};Y?He=function(A){A.selectionStart=0,A.selectionEnd=A.value.length}:d&&(He=function(A){try{A.select()}catch{}});function bt(A){return A.display.wrapper.ownerDocument}function Yt(A){return gt(A.display.wrapper)}function gt(A){return A.getRootNode?A.getRootNode():A.ownerDocument}function Lt(A){return bt(A).defaultView}function Kt(A){var y=Array.prototype.slice.call(arguments,1);return function(){return A.apply(null,y)}}function Ue(A,y,O){y||(y={});for(var B in A)A.hasOwnProperty(B)&&(O!==!1||!y.hasOwnProperty(B))&&(y[B]=A[B]);return y}function Pe(A,y,O,B,R){y==null&&(y=A.search(/[^\s\u00a0]/),y==-1&&(y=A.length));for(var Z=B||0,Ae=R||0;;){var Ce=A.indexOf("	",Z);if(Ce<0||Ce>=y)return Ae+(y-Z);Ae+=Ce-Z,Ae+=O-Ae%O,Z=Ce+1}}var Be=function(){this.id=null,this.f=null,this.time=0,this.handler=Kt(this.onTimeout,this)};Be.prototype.onTimeout=function(A){A.id=0,A.time<=+new Date?A.f():setTimeout(A.handler,A.time-+new Date)},Be.prototype.set=function(A,y){this.f=y;var O=+new Date+A;(!this.id||O<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,A),this.time=O)};function it(A,y){for(var O=0;O<A.length;++O)if(A[O]==y)return O;return-1}var _t=50,ft={toString:function(){return"CodeMirror.Pass"}},Ut={scroll:!1},rn={origin:"*mouse"},Dt={origin:"+move"};function _n(A,y,O){for(var B=0,R=0;;){var Z=A.indexOf("	",B);Z==-1&&(Z=A.length);var Ae=Z-B;if(Z==A.length||R+Ae>=y)return B+Math.min(Ae,y-R);if(R+=Z-B,R+=O-R%O,B=Z+1,R>=y)return B}}var qn=[""];function tn(A){for(;qn.length<=A;)qn.push(rr(qn)+" ");return qn[A]}function rr(A){return A[A.length-1]}function Dn(A,y){for(var O=[],B=0;B<A.length;B++)O[B]=y(A[B],B);return O}function pn(A,y,O){for(var B=0,R=O(y);B<A.length&&O(A[B])<=R;)B++;A.splice(B,0,y)}function Zn(){}function dr(A,y){var O;return Object.create?O=Object.create(A):(Zn.prototype=A,O=new Zn),y&&Ue(y,O),O}var vr=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function Jn(A){return/\w/.test(A)||A>""&&(A.toUpperCase()!=A.toLowerCase()||vr.test(A))}function Qe(A,y){return y?y.source.indexOf("\\w")>-1&&Jn(A)?!0:y.test(A):Jn(A)}function ce(A){for(var y in A)if(A.hasOwnProperty(y)&&A[y])return!1;return!0}var fe=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function nt(A){return A.charCodeAt(0)>=768&&fe.test(A)}function St(A,y,O){for(;(O<0?y>0:y<A.length)&&nt(A.charAt(y));)y+=O;return y}function Ht(A,y,O){for(var B=y>O?-1:1;;){if(y==O)return y;var R=(y+O)/2,Z=B<0?Math.ceil(R):Math.floor(R);if(Z==y)return A(Z)?y:O;A(Z)?O=Z:y=Z+B}}function sn(A,y,O,B){if(!A)return B(y,O,"ltr",0);for(var R=!1,Z=0;Z<A.length;++Z){var Ae=A[Z];(Ae.from<O&&Ae.to>y||y==O&&Ae.to==y)&&(B(Math.max(Ae.from,y),Math.min(Ae.to,O),Ae.level==1?"rtl":"ltr",Z),R=!0)}R||B(y,O,"ltr")}var tr=null;function Oe(A,y,O){var B;tr=null;for(var R=0;R<A.length;++R){var Z=A[R];if(Z.from<y&&Z.to>y)return R;Z.to==y&&(Z.from!=Z.to&&O=="before"?B=R:tr=R),Z.from==y&&(Z.from!=Z.to&&O!="before"?B=R:tr=R)}return B??tr}var se=function(){var A="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",y="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function O(je){return je<=247?A.charAt(je):1424<=je&&je<=1524?"R":1536<=je&&je<=1785?y.charAt(je-1536):1774<=je&&je<=2220?"r":8192<=je&&je<=8203?"w":je==8204?"b":"L"}var B=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,R=/[stwN]/,Z=/[LRr]/,Ae=/[Lb1n]/,Ce=/[1n]/;function Te(je,yt,Mt){this.level=je,this.from=yt,this.to=Mt}return function(je,yt){var Mt=yt=="ltr"?"L":"R";if(je.length==0||yt=="ltr"&&!B.test(je))return!1;for(var en=je.length,Qt=[],wn=0;wn<en;++wn)Qt.push(O(je.charCodeAt(wn)));for(var Ln=0,sr=Mt;Ln<en;++Ln){var Vn=Qt[Ln];Vn=="m"?Qt[Ln]=sr:sr=Vn}for(var wr=0,yr=Mt;wr<en;++wr){var Or=Qt[wr];Or=="1"&&yr=="r"?Qt[wr]="n":Z.test(Or)&&(yr=Or,Or=="r"&&(Qt[wr]="R"))}for(var ni=1,zr=Qt[0];ni<en-1;++ni){var Hi=Qt[ni];Hi=="+"&&zr=="1"&&Qt[ni+1]=="1"?Qt[ni]="1":Hi==","&&zr==Qt[ni+1]&&(zr=="1"||zr=="n")&&(Qt[ni]=zr),zr=Hi}for(var zo=0;zo<en;++zo){var Ya=Qt[zo];if(Ya==",")Qt[zo]="N";else if(Ya=="%"){var ia=void 0;for(ia=zo+1;ia<en&&Qt[ia]=="%";++ia);for(var Ca=zo&&Qt[zo-1]=="!"||ia<en&&Qt[ia]=="1"?"1":"N",$a=zo;$a<ia;++$a)Qt[$a]=Ca;zo=ia-1}}for(var _a=0,du=Mt;_a<en;++_a){var Da=Qt[_a];du=="L"&&Da=="1"?Qt[_a]="L":Z.test(Da)&&(du=Da)}for(var Ra=0;Ra<en;++Ra)if(R.test(Qt[Ra])){var as=void 0;for(as=Ra+1;as<en&&R.test(Qt[as]);++as);for(var yi=(Ra?Qt[Ra-1]:Mt)=="L",ps=(as<en?Qt[as]:Mt)=="L",js=yi==ps?yi?"L":"R":Mt,ca=Ra;ca<as;++ca)Qt[ca]=js;Ra=as-1}for(var Es=[],Iu,Co=0;Co<en;)if(Ae.test(Qt[Co])){var Kh=Co;for(++Co;Co<en&&Ae.test(Qt[Co]);++Co);Es.push(new Te(0,Kh,Co))}else{var Wl=Co,Xu=Es.length,pc=yt=="rtl"?1:0;for(++Co;Co<en&&Qt[Co]!="L";++Co);for(var gl=Wl;gl<Co;)if(Ce.test(Qt[gl])){Wl<gl&&(Es.splice(Xu,0,new Te(1,Wl,gl)),Xu+=pc);var Ol=gl;for(++gl;gl<Co&&Ce.test(Qt[gl]);++gl);Es.splice(Xu,0,new Te(2,Ol,gl)),Xu+=pc,Wl=gl}else++gl;Wl<Co&&Es.splice(Xu,0,new Te(1,Wl,Co))}return yt=="ltr"&&(Es[0].level==1&&(Iu=je.match(/^\s+/))&&(Es[0].from=Iu[0].length,Es.unshift(new Te(0,0,Iu[0].length))),rr(Es).level==1&&(Iu=je.match(/\s+$/))&&(rr(Es).to-=Iu[0].length,Es.push(new Te(0,en-Iu[0].length,en)))),yt=="rtl"?Es.reverse():Es}}();function ve(A,y){var O=A.order;return O==null&&(O=A.order=se(A.text,y)),O}var p=[],Ne=function(A,y,O){if(A.addEventListener)A.addEventListener(y,O,!1);else if(A.attachEvent)A.attachEvent("on"+y,O);else{var B=A._handlers||(A._handlers={});B[y]=(B[y]||p).concat(O)}};function Ye(A,y){return A._handlers&&A._handlers[y]||p}function rt(A,y,O){if(A.removeEventListener)A.removeEventListener(y,O,!1);else if(A.detachEvent)A.detachEvent("on"+y,O);else{var B=A._handlers,R=B&&B[y];if(R){var Z=it(R,O);Z>-1&&(B[y]=R.slice(0,Z).concat(R.slice(Z+1)))}}}function ct(A,y){var O=Ye(A,y);if(O.length)for(var B=Array.prototype.slice.call(arguments,2),R=0;R<O.length;++R)O[R].apply(null,B)}function dt(A,y,O){return typeof y=="string"&&(y={type:y,preventDefault:function(){this.defaultPrevented=!0}}),ct(A,O||y.type,A,y),On(y)||y.codemirrorIgnore}function qt(A){var y=A._handlers&&A._handlers.cursorActivity;if(y)for(var O=A.curOp.cursorActivityHandlers||(A.curOp.cursorActivityHandlers=[]),B=0;B<y.length;++B)it(O,y[B])==-1&&O.push(y[B])}function Gt(A,y){return Ye(A,y).length>0}function jt(A){A.prototype.on=function(y,O){Ne(this,y,O)},A.prototype.off=function(y,O){rt(this,y,O)}}function xt(A){A.preventDefault?A.preventDefault():A.returnValue=!1}function Tn(A){A.stopPropagation?A.stopPropagation():A.cancelBubble=!0}function On(A){return A.defaultPrevented!=null?A.defaultPrevented:A.returnValue==!1}function gr(A){xt(A),Tn(A)}function Er(A){return A.target||A.srcElement}function on(A){var y=A.which;return y==null&&(A.button&1?y=1:A.button&2?y=3:A.button&4&&(y=2)),V&&A.ctrlKey&&y==1&&(y=3),y}var Rn=function(){if(d&&g<9)return!1;var A=be("div");return"draggable"in A||"dragDrop"in A}(),er;function Xr(A){if(er==null){var y=be("span","");De(A,be("span",[y,document.createTextNode("x")])),A.firstChild.offsetHeight!=0&&(er=y.offsetWidth<=1&&y.offsetHeight>2&&!(d&&g<8))}var O=er?be("span",""):be("span","",null,"display: inline-block; width: 1px; margin-right: -1px");return O.setAttribute("cm-text",""),O}var Ur;function Dr(A){if(Ur!=null)return Ur;var y=De(A,document.createTextNode("AA")),O=Ze(y,0,1).getBoundingClientRect(),B=Ze(y,1,2).getBoundingClientRect();return Se(A),!O||O.left==O.right?!1:Ur=B.right-O.right<3}var ur=`

b`.split(/\n/).length!=3?function(A){for(var y=0,O=[],B=A.length;y<=B;){var R=A.indexOf(`
`,y);R==-1&&(R=A.length);var Z=A.slice(y,A.charAt(R-1)=="\r"?R-1:R),Ae=Z.indexOf("\r");Ae!=-1?(O.push(Z.slice(0,Ae)),y+=Ae+1):(O.push(Z),y=R+1)}return O}:function(A){return A.split(/\r\n?|\n/)},mo=window.getSelection?function(A){try{return A.selectionStart!=A.selectionEnd}catch{return!1}}:function(A){var y;try{y=A.ownerDocument.selection.createRange()}catch{}return!y||y.parentElement()!=A?!1:y.compareEndPoints("StartToEnd",y)!=0},Ma=function(){var A=be("div");return"oncopy"in A?!0:(A.setAttribute("oncopy","return;"),typeof A.oncopy=="function")}(),qi=null;function vi(A){if(qi!=null)return qi;var y=De(A,be("span","x")),O=y.getBoundingClientRect(),B=Ze(y,0,1).getBoundingClientRect();return qi=Math.abs(O.left-B.left)>1}var io={},Do={};function Ti(A,y){arguments.length>2&&(y.dependencies=Array.prototype.slice.call(arguments,2)),io[A]=y}function ja(A,y){Do[A]=y}function Sa(A){if(typeof A=="string"&&Do.hasOwnProperty(A))A=Do[A];else if(A&&typeof A.name=="string"&&Do.hasOwnProperty(A.name)){var y=Do[A.name];typeof y=="string"&&(y={name:y}),A=dr(y,A),A.name=y.name}else{if(typeof A=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(A))return Sa("application/xml");if(typeof A=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(A))return Sa("application/json")}return typeof A=="string"?{name:A}:A||{name:"null"}}function ns(A,y){y=Sa(y);var O=io[y.name];if(!O)return ns(A,"text/plain");var B=O(A,y);if(sa.hasOwnProperty(y.name)){var R=sa[y.name];for(var Z in R)R.hasOwnProperty(Z)&&(B.hasOwnProperty(Z)&&(B["_"+Z]=B[Z]),B[Z]=R[Z])}if(B.name=y.name,y.helperType&&(B.helperType=y.helperType),y.modeProps)for(var Ae in y.modeProps)B[Ae]=y.modeProps[Ae];return B}var sa={};function Al(A,y){var O=sa.hasOwnProperty(A)?sa[A]:sa[A]={};Ue(y,O)}function uo(A,y){if(y===!0)return y;if(A.copyState)return A.copyState(y);var O={};for(var B in y){var R=y[B];R instanceof Array&&(R=R.concat([])),O[B]=R}return O}function Fu(A,y){for(var O;A.innerMode&&(O=A.innerMode(y),!(!O||O.mode==A));)y=O.state,A=O.mode;return O||{mode:A,state:y}}function Hl(A,y,O){return A.startState?A.startState(y,O):!0}var oo=function(A,y,O){this.pos=this.start=0,this.string=A,this.tabSize=y||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=O};oo.prototype.eol=function(){return this.pos>=this.string.length},oo.prototype.sol=function(){return this.pos==this.lineStart},oo.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},oo.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},oo.prototype.eat=function(A){var y=this.string.charAt(this.pos),O;if(typeof A=="string"?O=y==A:O=y&&(A.test?A.test(y):A(y)),O)return++this.pos,y},oo.prototype.eatWhile=function(A){for(var y=this.pos;this.eat(A););return this.pos>y},oo.prototype.eatSpace=function(){for(var A=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>A},oo.prototype.skipToEnd=function(){this.pos=this.string.length},oo.prototype.skipTo=function(A){var y=this.string.indexOf(A,this.pos);if(y>-1)return this.pos=y,!0},oo.prototype.backUp=function(A){this.pos-=A},oo.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Pe(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?Pe(this.string,this.lineStart,this.tabSize):0)},oo.prototype.indentation=function(){return Pe(this.string,null,this.tabSize)-(this.lineStart?Pe(this.string,this.lineStart,this.tabSize):0)},oo.prototype.match=function(A,y,O){if(typeof A=="string"){var B=function(Ae){return O?Ae.toLowerCase():Ae},R=this.string.substr(this.pos,A.length);if(B(R)==B(A))return y!==!1&&(this.pos+=A.length),!0}else{var Z=this.string.slice(this.pos).match(A);return Z&&Z.index>0?null:(Z&&y!==!1&&(this.pos+=Z[0].length),Z)}},oo.prototype.current=function(){return this.string.slice(this.start,this.pos)},oo.prototype.hideFirstChars=function(A,y){this.lineStart+=A;try{return y()}finally{this.lineStart-=A}},oo.prototype.lookAhead=function(A){var y=this.lineOracle;return y&&y.lookAhead(A)},oo.prototype.baseToken=function(){var A=this.lineOracle;return A&&A.baseToken(this.pos)};function Tr(A,y){if(y-=A.first,y<0||y>=A.size)throw new Error("There is no line "+(y+A.first)+" in the document.");for(var O=A;!O.lines;)for(var B=0;;++B){var R=O.children[B],Z=R.chunkSize();if(y<Z){O=R;break}y-=Z}return O.lines[y]}function tl(A,y,O){var B=[],R=y.line;return A.iter(y.line,O.line+1,function(Z){var Ae=Z.text;R==O.line&&(Ae=Ae.slice(0,O.ch)),R==y.line&&(Ae=Ae.slice(y.ch)),B.push(Ae),++R}),B}function Bs(A,y,O){var B=[];return A.iter(y,O,function(R){B.push(R.text)}),B}function Js(A,y){var O=y-A.height;if(O)for(var B=A;B;B=B.parent)B.height+=O}function qe(A){if(A.parent==null)return null;for(var y=A.parent,O=it(y.lines,A),B=y.parent;B;y=B,B=B.parent)for(var R=0;B.children[R]!=y;++R)O+=B.children[R].chunkSize();return O+y.first}function wt(A,y){var O=A.first;e:do{for(var B=0;B<A.children.length;++B){var R=A.children[B],Z=R.height;if(y<Z){A=R;continue e}y-=Z,O+=R.chunkSize()}return O}while(!A.lines);for(var Ae=0;Ae<A.lines.length;++Ae){var Ce=A.lines[Ae],Te=Ce.height;if(y<Te)break;y-=Te}return O+Ae}function vn(A,y){return y>=A.first&&y<A.first+A.size}function Yn(A,y){return String(A.lineNumberFormatter(y+A.firstLineNumber))}function hn(A,y,O){if(O===void 0&&(O=null),!(this instanceof hn))return new hn(A,y,O);this.line=A,this.ch=y,this.sticky=O}function or(A,y){return A.line-y.line||A.ch-y.ch}function Pi(A,y){return A.sticky==y.sticky&&or(A,y)==0}function go(A){return hn(A.line,A.ch)}function Cs(A,y){return or(A,y)<0?y:A}function Rs(A,y){return or(A,y)<0?A:y}function SA(A,y){return Math.max(A.first,Math.min(y,A.first+A.size-1))}function ei(A,y){if(y.line<A.first)return hn(A.first,0);var O=A.first+A.size-1;return y.line>O?hn(O,Tr(A,O).text.length):wi(y,Tr(A,y.line).text.length)}function wi(A,y){var O=A.ch;return O==null||O>y?hn(A.line,y):O<0?hn(A.line,0):A}function nl(A,y){for(var O=[],B=0;B<y.length;B++)O[B]=ei(A,y[B]);return O}var ui=function(A,y){this.state=A,this.lookAhead=y},aa=function(A,y,O,B){this.state=y,this.doc=A,this.line=O,this.maxLookAhead=B||0,this.baseTokens=null,this.baseTokenPos=1};aa.prototype.lookAhead=function(A){var y=this.doc.getLine(this.line+A);return y!=null&&A>this.maxLookAhead&&(this.maxLookAhead=A),y},aa.prototype.baseToken=function(A){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=A;)this.baseTokenPos+=2;var y=this.baseTokens[this.baseTokenPos+1];return{type:y&&y.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-A}},aa.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},aa.fromSaved=function(A,y,O){return y instanceof ui?new aa(A,uo(A.mode,y.state),O,y.lookAhead):new aa(A,uo(A.mode,y),O)},aa.prototype.save=function(A){var y=A!==!1?uo(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new ui(y,this.maxLookAhead):y};function XA(A,y,O,B){var R=[A.state.modeGen],Z={};Lu(A,y.text,A.doc.mode,O,function(je,yt){return R.push(je,yt)},Z,B);for(var Ae=O.state,Ce=function(je){O.baseTokens=R;var yt=A.state.overlays[je],Mt=1,en=0;O.state=!0,Lu(A,y.text,yt.mode,O,function(Qt,wn){for(var Ln=Mt;en<Qt;){var sr=R[Mt];sr>Qt&&R.splice(Mt,1,Qt,R[Mt+1],sr),Mt+=2,en=Math.min(Qt,sr)}if(wn)if(yt.opaque)R.splice(Ln,Mt-Ln,Qt,"overlay "+wn),Mt=Ln+2;else for(;Ln<Mt;Ln+=2){var Vn=R[Ln+1];R[Ln+1]=(Vn?Vn+" ":"")+"overlay "+wn}},Z),O.state=Ae,O.baseTokens=null,O.baseTokenPos=1},Te=0;Te<A.state.overlays.length;++Te)Ce(Te);return{styles:R,classes:Z.bgClass||Z.textClass?Z:null}}function Ea(A,y,O){if(!y.styles||y.styles[0]!=A.state.modeGen){var B=Rr(A,qe(y)),R=y.text.length>A.options.maxHighlightLength&&uo(A.doc.mode,B.state),Z=XA(A,y,B);R&&(B.state=R),y.stateAfter=B.save(!R),y.styles=Z.styles,Z.classes?y.styleClasses=Z.classes:y.styleClasses&&(y.styleClasses=null),O===A.doc.highlightFrontier&&(A.doc.modeFrontier=Math.max(A.doc.modeFrontier,++A.doc.highlightFrontier))}return y.styles}function Rr(A,y,O){var B=A.doc,R=A.display;if(!B.mode.startState)return new aa(B,!0,y);var Z=_l(A,y,O),Ae=Z>B.first&&Tr(B,Z-1).stateAfter,Ce=Ae?aa.fromSaved(B,Ae,Z):new aa(B,Hl(B.mode),Z);return B.iter(Z,y,function(Te){Yi(A,Te.text,Ce);var je=Ce.line;Te.stateAfter=je==y-1||je%5==0||je>=R.viewFrom&&je<R.viewTo?Ce.save():null,Ce.nextLine()}),O&&(B.modeFrontier=Ce.line),Ce}function Yi(A,y,O,B){var R=A.doc.mode,Z=new oo(y,A.options.tabSize,O);for(Z.start=Z.pos=B||0,y==""&&yo(R,O.state);!Z.eol();)gu(R,Z,O.state),Z.start=Z.pos}function yo(A,y){if(A.blankLine)return A.blankLine(y);if(A.innerMode){var O=Fu(A,y);if(O.mode.blankLine)return O.mode.blankLine(O.state)}}function gu(A,y,O,B){for(var R=0;R<10;R++){B&&(B[0]=Fu(A,O).mode);var Z=A.token(y,O);if(y.pos>y.start)return Z}throw new Error("Mode "+A.name+" failed to advance stream.")}var wo=function(A,y,O){this.start=A.start,this.end=A.pos,this.string=A.current(),this.type=y||null,this.state=O};function Ws(A,y,O,B){var R=A.doc,Z=R.mode,Ae;y=ei(R,y);var Ce=Tr(R,y.line),Te=Rr(A,y.line,O),je=new oo(Ce.text,A.options.tabSize,Te),yt;for(B&&(yt=[]);(B||je.pos<y.ch)&&!je.eol();)je.start=je.pos,Ae=gu(Z,je,Te.state),B&&yt.push(new wo(je,Ae,uo(R.mode,Te.state)));return B?yt:new wo(je,Ae,Te.state)}function Gs(A,y){if(A)for(;;){var O=A.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!O)break;A=A.slice(0,O.index)+A.slice(O.index+O[0].length);var B=O[1]?"bgClass":"textClass";y[B]==null?y[B]=O[2]:new RegExp("(?:^|\\s)"+O[2]+"(?:$|\\s)").test(y[B])||(y[B]+=" "+O[2])}return A}function Lu(A,y,O,B,R,Z,Ae){var Ce=O.flattenSpans;Ce==null&&(Ce=A.options.flattenSpans);var Te=0,je=null,yt=new oo(y,A.options.tabSize,B),Mt,en=A.options.addModeClass&&[null];for(y==""&&Gs(yo(O,B.state),Z);!yt.eol();){if(yt.pos>A.options.maxHighlightLength?(Ce=!1,Ae&&Yi(A,y,B,yt.pos),yt.pos=y.length,Mt=null):Mt=Gs(gu(O,yt,B.state,en),Z),en){var Qt=en[0].name;Qt&&(Mt="m-"+(Mt?Qt+" "+Mt:Qt))}if(!Ce||je!=Mt){for(;Te<yt.start;)Te=Math.min(yt.start,Te+5e3),R(Te,je);je=Mt}yt.start=yt.pos}for(;Te<yt.pos;){var wn=Math.min(yt.pos,Te+5e3);R(wn,je),Te=wn}}function _l(A,y,O){for(var B,R,Z=A.doc,Ae=O?-1:y-(A.doc.mode.innerMode?1e3:100),Ce=y;Ce>Ae;--Ce){if(Ce<=Z.first)return Z.first;var Te=Tr(Z,Ce-1),je=Te.stateAfter;if(je&&(!O||Ce+(je instanceof ui?je.lookAhead:0)<=Z.modeFrontier))return Ce;var yt=Pe(Te.text,null,A.options.tabSize);(R==null||B>yt)&&(R=Ce-1,B=yt)}return R}function Ao(A,y){if(A.modeFrontier=Math.min(A.modeFrontier,y),!(A.highlightFrontier<y-10)){for(var O=A.first,B=y-1;B>O;B--){var R=Tr(A,B).stateAfter;if(R&&(!(R instanceof ui)||B+R.lookAhead<y)){O=B+1;break}}A.highlightFrontier=Math.min(A.highlightFrontier,O)}}var Bo=!1,Ho=!1;function Ba(){Bo=!0}function Ms(){Ho=!0}function Oa(A,y,O){this.marker=A,this.from=y,this.to=O}function ea(A,y){if(A)for(var O=0;O<A.length;++O){var B=A[O];if(B.marker==y)return B}}function EA(A,y){for(var O,B=0;B<A.length;++B)A[B]!=y&&(O||(O=[])).push(A[B]);return O}function co(A,y,O){var B=O&&window.WeakSet&&(O.markedSpans||(O.markedSpans=new WeakSet));B&&A.markedSpans&&B.has(A.markedSpans)?A.markedSpans.push(y):(A.markedSpans=A.markedSpans?A.markedSpans.concat([y]):[y],B&&B.add(A.markedSpans)),y.marker.attachLine(A)}function Zl(A,y,O){var B;if(A)for(var R=0;R<A.length;++R){var Z=A[R],Ae=Z.marker,Ce=Z.from==null||(Ae.inclusiveLeft?Z.from<=y:Z.from<y);if(Ce||Z.from==y&&Ae.type=="bookmark"&&(!O||!Z.marker.insertLeft)){var Te=Z.to==null||(Ae.inclusiveRight?Z.to>=y:Z.to>y);(B||(B=[])).push(new Oa(Ae,Z.from,Te?null:Z.to))}}return B}function Ui(A,y,O){var B;if(A)for(var R=0;R<A.length;++R){var Z=A[R],Ae=Z.marker,Ce=Z.to==null||(Ae.inclusiveRight?Z.to>=y:Z.to>y);if(Ce||Z.from==y&&Ae.type=="bookmark"&&(!O||Z.marker.insertLeft)){var Te=Z.from==null||(Ae.inclusiveLeft?Z.from<=y:Z.from<y);(B||(B=[])).push(new Oa(Ae,Te?null:Z.from-y,Z.to==null?null:Z.to-y))}}return B}function Yr(A,y){if(y.full)return null;var O=vn(A,y.from.line)&&Tr(A,y.from.line).markedSpans,B=vn(A,y.to.line)&&Tr(A,y.to.line).markedSpans;if(!O&&!B)return null;var R=y.from.ch,Z=y.to.ch,Ae=or(y.from,y.to)==0,Ce=Zl(O,R,Ae),Te=Ui(B,Z,Ae),je=y.text.length==1,yt=rr(y.text).length+(je?R:0);if(Ce)for(var Mt=0;Mt<Ce.length;++Mt){var en=Ce[Mt];if(en.to==null){var Qt=ea(Te,en.marker);Qt?je&&(en.to=Qt.to==null?null:Qt.to+yt):en.to=R}}if(Te)for(var wn=0;wn<Te.length;++wn){var Ln=Te[wn];if(Ln.to!=null&&(Ln.to+=yt),Ln.from==null){var sr=ea(Ce,Ln.marker);sr||(Ln.from=yt,je&&(Ce||(Ce=[])).push(Ln))}else Ln.from+=yt,je&&(Ce||(Ce=[])).push(Ln)}Ce&&(Ce=Xl(Ce)),Te&&Te!=Ce&&(Te=Xl(Te));var Vn=[Ce];if(!je){var wr=y.text.length-2,yr;if(wr>0&&Ce)for(var Or=0;Or<Ce.length;++Or)Ce[Or].to==null&&(yr||(yr=[])).push(new Oa(Ce[Or].marker,null,null));for(var ni=0;ni<wr;++ni)Vn.push(yr);Vn.push(Te)}return Vn}function Xl(A){for(var y=0;y<A.length;++y){var O=A[y];O.from!=null&&O.from==O.to&&O.marker.clearWhenEmpty!==!1&&A.splice(y--,1)}return A.length?A:null}function $i(A,y,O){var B=null;if(A.iter(y.line,O.line+1,function(Qt){if(Qt.markedSpans)for(var wn=0;wn<Qt.markedSpans.length;++wn){var Ln=Qt.markedSpans[wn].marker;Ln.readOnly&&(!B||it(B,Ln)==-1)&&(B||(B=[])).push(Ln)}}),!B)return null;for(var R=[{from:y,to:O}],Z=0;Z<B.length;++Z)for(var Ae=B[Z],Ce=Ae.find(0),Te=0;Te<R.length;++Te){var je=R[Te];if(!(or(je.to,Ce.from)<0||or(je.from,Ce.to)>0)){var yt=[Te,1],Mt=or(je.from,Ce.from),en=or(je.to,Ce.to);(Mt<0||!Ae.inclusiveLeft&&!Mt)&&yt.push({from:je.from,to:Ce.from}),(en>0||!Ae.inclusiveRight&&!en)&&yt.push({from:Ce.to,to:je.to}),R.splice.apply(R,yt),Te+=yt.length-3}}return R}function so(A){var y=A.markedSpans;if(y){for(var O=0;O<y.length;++O)y[O].marker.detachLine(A);A.markedSpans=null}}function Ki(A,y){if(y){for(var O=0;O<y.length;++O)y[O].marker.attachLine(A);A.markedSpans=y}}function J(A){return A.inclusiveLeft?-1:0}function Ie(A){return A.inclusiveRight?1:0}function st(A,y){var O=A.lines.length-y.lines.length;if(O!=0)return O;var B=A.find(),R=y.find(),Z=or(B.from,R.from)||J(A)-J(y);if(Z)return-Z;var Ae=or(B.to,R.to)||Ie(A)-Ie(y);return Ae||y.id-A.id}function $t(A,y){var O=Ho&&A.markedSpans,B;if(O)for(var R=void 0,Z=0;Z<O.length;++Z)R=O[Z],R.marker.collapsed&&(y?R.from:R.to)==null&&(!B||st(B,R.marker)<0)&&(B=R.marker);return B}function Kr(A){return $t(A,!0)}function $n(A){return $t(A,!1)}function ti(A,y){var O=Ho&&A.markedSpans,B;if(O)for(var R=0;R<O.length;++R){var Z=O[R];Z.marker.collapsed&&(Z.from==null||Z.from<y)&&(Z.to==null||Z.to>y)&&(!B||st(B,Z.marker)<0)&&(B=Z.marker)}return B}function Ai(A,y,O,B,R){var Z=Tr(A,y),Ae=Ho&&Z.markedSpans;if(Ae)for(var Ce=0;Ce<Ae.length;++Ce){var Te=Ae[Ce];if(Te.marker.collapsed){var je=Te.marker.find(0),yt=or(je.from,O)||J(Te.marker)-J(R),Mt=or(je.to,B)||Ie(Te.marker)-Ie(R);if(!(yt>=0&&Mt<=0||yt<=0&&Mt>=0)&&(yt<=0&&(Te.marker.inclusiveRight&&R.inclusiveLeft?or(je.to,O)>=0:or(je.to,O)>0)||yt>=0&&(Te.marker.inclusiveRight&&R.inclusiveLeft?or(je.from,B)<=0:or(je.from,B)<0)))return!0}}}function Br(A){for(var y;y=Kr(A);)A=y.find(-1,!0).line;return A}function xr(A){for(var y;y=$n(A);)A=y.find(1,!0).line;return A}function zi(A){for(var y,O;y=$n(A);)A=y.find(1,!0).line,(O||(O=[])).push(A);return O}function Zi(A,y){var O=Tr(A,y),B=Br(O);return O==B?y:qe(B)}function Si(A,y){if(y>A.lastLine())return y;var O=Tr(A,y),B;if(!Wr(A,O))return y;for(;B=$n(O);)O=B.find(1,!0).line;return qe(O)+1}function Wr(A,y){var O=Ho&&y.markedSpans;if(O){for(var B=void 0,R=0;R<O.length;++R)if(B=O[R],!!B.marker.collapsed){if(B.from==null)return!0;if(!B.marker.widgetNode&&B.from==0&&B.marker.inclusiveLeft&&Mo(A,y,B))return!0}}}function Mo(A,y,O){if(O.to==null){var B=O.marker.find(1,!0);return Mo(A,B.line,ea(B.line.markedSpans,O.marker))}if(O.marker.inclusiveRight&&O.to==y.text.length)return!0;for(var R=void 0,Z=0;Z<y.markedSpans.length;++Z)if(R=y.markedSpans[Z],R.marker.collapsed&&!R.marker.widgetNode&&R.from==O.to&&(R.to==null||R.to!=O.from)&&(R.marker.inclusiveLeft||O.marker.inclusiveRight)&&Mo(A,y,R))return!0}function Di(A){A=Br(A);for(var y=0,O=A.parent,B=0;B<O.lines.length;++B){var R=O.lines[B];if(R==A)break;y+=R.height}for(var Z=O.parent;Z;O=Z,Z=O.parent)for(var Ae=0;Ae<Z.children.length;++Ae){var Ce=Z.children[Ae];if(Ce==O)break;y+=Ce.height}return y}function cs(A){if(A.height==0)return 0;for(var y=A.text.length,O,B=A;O=Kr(B);){var R=O.find(0,!0);B=R.from.line,y+=R.from.ch-R.to.ch}for(B=A;O=$n(B);){var Z=O.find(0,!0);y-=B.text.length-Z.from.ch,B=Z.to.line,y+=B.text.length-Z.to.ch}return y}function pa(A){var y=A.display,O=A.doc;y.maxLine=Tr(O,O.first),y.maxLineLength=cs(y.maxLine),y.maxLineChanged=!0,O.iter(function(B){var R=cs(B);R>y.maxLineLength&&(y.maxLineLength=R,y.maxLine=B)})}var Na=function(A,y,O){this.text=A,Ki(this,y),this.height=O?O(this):1};Na.prototype.lineNo=function(){return qe(this)},jt(Na);function yu(A,y,O,B){A.text=y,A.stateAfter&&(A.stateAfter=null),A.styles&&(A.styles=null),A.order!=null&&(A.order=null),so(A),Ki(A,O);var R=B?B(A):1;R!=A.height&&Js(A,R)}function Qs(A){A.parent=null,so(A)}var Nd={},ma={};function bl(A,y){if(!A||/^\s*$/.test(A))return null;var O=y.addModeClass?ma:Nd;return O[A]||(O[A]=A.replace(/\S+/g,"cm-$&"))}function Wc(A,y){var O=at("span",null,null,b?"padding-right: .1px":null),B={pre:at("pre",[O],"CodeMirror-line"),content:O,col:0,pos:0,cm:A,trailingSpace:!1,splitSpaces:A.getOption("lineWrapping")};y.measure={};for(var R=0;R<=(y.rest?y.rest.length:0);R++){var Z=R?y.rest[R-1]:y.line,Ae=void 0;B.pos=0,B.addToken=Wd,Dr(A.display.measure)&&(Ae=ve(Z,A.doc.direction))&&(B.addToken=Fs(B.addToken,Ae)),B.map=[];var Ce=y!=A.display.externalMeasured&&qe(Z);cd(Z,B,Ea(A,Z,Ce)),Z.styleClasses&&(Z.styleClasses.bgClass&&(B.bgClass=Fe(Z.styleClasses.bgClass,B.bgClass||"")),Z.styleClasses.textClass&&(B.textClass=Fe(Z.styleClasses.textClass,B.textClass||""))),B.map.length==0&&B.map.push(0,0,B.content.appendChild(Xr(A.display.measure))),R==0?(y.measure.map=B.map,y.measure.cache={}):((y.measure.maps||(y.measure.maps=[])).push(B.map),(y.measure.caches||(y.measure.caches=[])).push({}))}if(b){var Te=B.content.lastChild;(/\bcm-tab\b/.test(Te.className)||Te.querySelector&&Te.querySelector(".cm-tab"))&&(B.content.className="cm-tab-wrap-hack")}return ct(A,"renderLine",A,y.line,B.pre),B.pre.className&&(B.textClass=Fe(B.pre.className,B.textClass||"")),B}function Uu(A){var y=be("span","","cm-invalidchar");return y.title="\\u"+A.charCodeAt(0).toString(16),y.setAttribute("aria-label",y.title),y}function Wd(A,y,O,B,R,Z,Ae){if(y){var Ce=A.splitSpaces?vu(y,A.trailingSpace):y,Te=A.cm.state.specialChars,je=!1,yt;if(!Te.test(y))A.col+=y.length,yt=document.createTextNode(Ce),A.map.push(A.pos,A.pos+y.length,yt),d&&g<9&&(je=!0),A.pos+=y.length;else{yt=document.createDocumentFragment();for(var Mt=0;;){Te.lastIndex=Mt;var en=Te.exec(y),Qt=en?en.index-Mt:y.length-Mt;if(Qt){var wn=document.createTextNode(Ce.slice(Mt,Mt+Qt));d&&g<9?yt.appendChild(be("span",[wn])):yt.appendChild(wn),A.map.push(A.pos,A.pos+Qt,wn),A.col+=Qt,A.pos+=Qt}if(!en)break;Mt+=Qt+1;var Ln=void 0;if(en[0]=="	"){var sr=A.cm.options.tabSize,Vn=sr-A.col%sr;Ln=yt.appendChild(be("span",tn(Vn),"cm-tab")),Ln.setAttribute("role","presentation"),Ln.setAttribute("cm-text","	"),A.col+=Vn}else en[0]=="\r"||en[0]==`
`?(Ln=yt.appendChild(be("span",en[0]=="\r"?"":"","cm-invalidchar")),Ln.setAttribute("cm-text",en[0]),A.col+=1):(Ln=A.cm.options.specialCharPlaceholder(en[0]),Ln.setAttribute("cm-text",en[0]),d&&g<9?yt.appendChild(be("span",[Ln])):yt.appendChild(Ln),A.col+=1);A.map.push(A.pos,A.pos+1,Ln),A.pos++}}if(A.trailingSpace=Ce.charCodeAt(y.length-1)==32,O||B||R||je||Z||Ae){var wr=O||"";B&&(wr+=B),R&&(wr+=R);var yr=be("span",[yt],wr,Z);if(Ae)for(var Or in Ae)Ae.hasOwnProperty(Or)&&Or!="style"&&Or!="class"&&yr.setAttribute(Or,Ae[Or]);return A.content.appendChild(yr)}A.content.appendChild(yt)}}function vu(A,y){if(A.length>1&&!/  /.test(A))return A;for(var O=y,B="",R=0;R<A.length;R++){var Z=A.charAt(R);Z==" "&&O&&(R==A.length-1||A.charCodeAt(R+1)==32)&&(Z=""),B+=Z,O=Z==" "}return B}function Fs(A,y){return function(O,B,R,Z,Ae,Ce,Te){R=R?R+" cm-force-border":"cm-force-border";for(var je=O.pos,yt=je+B.length;;){for(var Mt=void 0,en=0;en<y.length&&(Mt=y[en],!(Mt.to>je&&Mt.from<=je));en++);if(Mt.to>=yt)return A(O,B,R,Z,Ae,Ce,Te);A(O,B.slice(0,Mt.to-je),R,Z,null,Ce,Te),Z=null,B=B.slice(Mt.to-je),je=Mt.to}}}function BA(A,y,O,B){var R=!B&&O.widgetNode;R&&A.map.push(A.pos,A.pos+y,R),!B&&A.cm.display.input.needsContentAttribute&&(R||(R=A.content.appendChild(document.createElement("span"))),R.setAttribute("cm-marker",O.id)),R&&(A.cm.display.input.setUneditable(R),A.content.appendChild(R)),A.pos+=y,A.trailingSpace=!1}function cd(A,y,O){var B=A.markedSpans,R=A.text,Z=0;if(!B){for(var Ae=1;Ae<O.length;Ae+=2)y.addToken(y,R.slice(Z,Z=O[Ae]),bl(O[Ae+1],y.cm.options));return}for(var Ce=R.length,Te=0,je=1,yt="",Mt,en,Qt=0,wn,Ln,sr,Vn,wr;;){if(Qt==Te){wn=Ln=sr=en="",wr=null,Vn=null,Qt=1/0;for(var yr=[],Or=void 0,ni=0;ni<B.length;++ni){var zr=B[ni],Hi=zr.marker;if(Hi.type=="bookmark"&&zr.from==Te&&Hi.widgetNode)yr.push(Hi);else if(zr.from<=Te&&(zr.to==null||zr.to>Te||Hi.collapsed&&zr.to==Te&&zr.from==Te)){if(zr.to!=null&&zr.to!=Te&&Qt>zr.to&&(Qt=zr.to,Ln=""),Hi.className&&(wn+=" "+Hi.className),Hi.css&&(en=(en?en+";":"")+Hi.css),Hi.startStyle&&zr.from==Te&&(sr+=" "+Hi.startStyle),Hi.endStyle&&zr.to==Qt&&(Or||(Or=[])).push(Hi.endStyle,zr.to),Hi.title&&((wr||(wr={})).title=Hi.title),Hi.attributes)for(var zo in Hi.attributes)(wr||(wr={}))[zo]=Hi.attributes[zo];Hi.collapsed&&(!Vn||st(Vn.marker,Hi)<0)&&(Vn=zr)}else zr.from>Te&&Qt>zr.from&&(Qt=zr.from)}if(Or)for(var Ya=0;Ya<Or.length;Ya+=2)Or[Ya+1]==Qt&&(Ln+=" "+Or[Ya]);if(!Vn||Vn.from==Te)for(var ia=0;ia<yr.length;++ia)BA(y,0,yr[ia]);if(Vn&&(Vn.from||0)==Te){if(BA(y,(Vn.to==null?Ce+1:Vn.to)-Te,Vn.marker,Vn.from==null),Vn.to==null)return;Vn.to==Te&&(Vn=!1)}}if(Te>=Ce)break;for(var Ca=Math.min(Ce,Qt);;){if(yt){var $a=Te+yt.length;if(!Vn){var _a=$a>Ca?yt.slice(0,Ca-Te):yt;y.addToken(y,_a,Mt?Mt+wn:wn,sr,Te+_a.length==Qt?Ln:"",en,wr)}if($a>=Ca){yt=yt.slice(Ca-Te),Te=Ca;break}Te=$a,sr=""}yt=R.slice(Z,Z=O[je++]),Mt=bl(O[je++],y.cm.options)}}}function Gd(A,y,O){this.line=y,this.rest=zi(y),this.size=this.rest?qe(rr(this.rest))-O+1:1,this.node=this.text=null,this.hidden=Wr(A,y)}function bc(A,y,O){for(var B=[],R,Z=y;Z<O;Z=R){var Ae=new Gd(A.doc,Tr(A.doc,Z),Z);R=Z+Ae.size,B.push(Ae)}return B}var xc=null;function $f(A){xc?xc.ops.push(A):A.ownsGroup=xc={ops:[A],delayedCallbacks:[]}}function dd(A){var y=A.delayedCallbacks,O=0;do{for(;O<y.length;O++)y[O].call(null);for(var B=0;B<A.ops.length;B++){var R=A.ops[B];if(R.cursorActivityHandlers)for(;R.cursorActivityCalled<R.cursorActivityHandlers.length;)R.cursorActivityHandlers[R.cursorActivityCalled++].call(null,R.cm)}}while(O<y.length)}function Bp(A,y){var O=A.ownsGroup;if(O)try{dd(O)}finally{xc=null,y(O)}}var JA=null;function ta(A,y){var O=Ye(A,y);if(O.length){var B=Array.prototype.slice.call(arguments,2),R;xc?R=xc.delayedCallbacks:JA?R=JA:(R=JA=[],setTimeout(of,0));for(var Z=function(Ce){R.push(function(){return O[Ce].apply(null,B)})},Ae=0;Ae<O.length;++Ae)Z(Ae)}}function of(){var A=JA;JA=null;for(var y=0;y<A.length;++y)A[y]()}function gh(A,y,O,B){for(var R=0;R<y.changes.length;R++){var Z=y.changes[R];Z=="text"?af(A,y):Z=="gutter"?yh(A,y,O,B):Z=="class"?ec(A,y):Z=="widget"&&lf(A,y,B)}y.changes=null}function hd(A){return A.node==A.text&&(A.node=be("div",null,null,"position: relative"),A.text.parentNode&&A.text.parentNode.replaceChild(A.node,A.text),A.node.appendChild(A.text),d&&g<8&&(A.node.style.zIndex=2)),A.node}function sf(A,y){var O=y.bgClass?y.bgClass+" "+(y.line.bgClass||""):y.line.bgClass;if(O&&(O+=" CodeMirror-linebackground"),y.background)O?y.background.className=O:(y.background.parentNode.removeChild(y.background),y.background=null);else if(O){var B=hd(y);y.background=B.insertBefore(be("div",null,O),B.firstChild),A.display.input.setUneditable(y.background)}}function fd(A,y){var O=A.display.externalMeasured;return O&&O.line==y.line?(A.display.externalMeasured=null,y.measure=O.measure,O.built):Wc(A,y)}function af(A,y){var O=y.text.className,B=fd(A,y);y.text==y.node&&(y.node=B.pre),y.text.parentNode.replaceChild(B.pre,y.text),y.text=B.pre,B.bgClass!=y.bgClass||B.textClass!=y.textClass?(y.bgClass=B.bgClass,y.textClass=B.textClass,ec(A,y)):O&&(y.text.className=O)}function ec(A,y){sf(A,y),y.line.wrapClass?hd(y).className=y.line.wrapClass:y.node!=y.text&&(y.node.className="");var O=y.textClass?y.textClass+" "+(y.line.textClass||""):y.line.textClass;y.text.className=O||""}function yh(A,y,O,B){if(y.gutter&&(y.node.removeChild(y.gutter),y.gutter=null),y.gutterBackground&&(y.node.removeChild(y.gutterBackground),y.gutterBackground=null),y.line.gutterClass){var R=hd(y);y.gutterBackground=be("div",null,"CodeMirror-gutter-background "+y.line.gutterClass,"left: "+(A.options.fixedGutter?B.fixedPos:-B.gutterTotalWidth)+"px; width: "+B.gutterTotalWidth+"px"),A.display.input.setUneditable(y.gutterBackground),R.insertBefore(y.gutterBackground,y.text)}var Z=y.line.gutterMarkers;if(A.options.lineNumbers||Z){var Ae=hd(y),Ce=y.gutter=be("div",null,"CodeMirror-gutter-wrapper","left: "+(A.options.fixedGutter?B.fixedPos:-B.gutterTotalWidth)+"px");if(Ce.setAttribute("aria-hidden","true"),A.display.input.setUneditable(Ce),Ae.insertBefore(Ce,y.text),y.line.gutterClass&&(Ce.className+=" "+y.line.gutterClass),A.options.lineNumbers&&(!Z||!Z["CodeMirror-linenumbers"])&&(y.lineNumber=Ce.appendChild(be("div",Yn(A.options,O),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+B.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+A.display.lineNumInnerWidth+"px"))),Z)for(var Te=0;Te<A.display.gutterSpecs.length;++Te){var je=A.display.gutterSpecs[Te].className,yt=Z.hasOwnProperty(je)&&Z[je];yt&&Ce.appendChild(be("div",[yt],"CodeMirror-gutter-elt","left: "+B.gutterLeft[je]+"px; width: "+B.gutterWidth[je]+"px"))}}}function lf(A,y,O){y.alignable&&(y.alignable=null);for(var B=Ee("CodeMirror-linewidget"),R=y.node.firstChild,Z=void 0;R;R=Z)Z=R.nextSibling,B.test(R.className)&&y.node.removeChild(R);Ch(A,y,O)}function vh(A,y,O,B){var R=fd(A,y);return y.text=y.node=R.pre,R.bgClass&&(y.bgClass=R.bgClass),R.textClass&&(y.textClass=R.textClass),ec(A,y),yh(A,y,O,B),Ch(A,y,B),y.node}function Ch(A,y,O){if(xl(A,y.line,y,O,!0),y.rest)for(var B=0;B<y.rest.length;B++)xl(A,y.rest[B],y,O,!1)}function xl(A,y,O,B,R){if(y.widgets)for(var Z=hd(O),Ae=0,Ce=y.widgets;Ae<Ce.length;++Ae){var Te=Ce[Ae],je=be("div",[Te.node],"CodeMirror-linewidget"+(Te.className?" "+Te.className:""));Te.handleMouseEvents||je.setAttribute("cm-ignore-events","true"),_h(Te,je,O,B),A.display.input.setUneditable(je),R&&Te.above?Z.insertBefore(je,O.gutter||O.text):Z.appendChild(je),ta(Te,"redraw")}}function _h(A,y,O,B){if(A.noHScroll){(O.alignable||(O.alignable=[])).push(y);var R=B.wrapperWidth;y.style.left=B.fixedPos+"px",A.coverGutter||(R-=B.gutterTotalWidth,y.style.paddingLeft=B.gutterTotalWidth+"px"),y.style.width=R+"px"}A.coverGutter&&(y.style.zIndex=5,y.style.position="relative",A.noHScroll||(y.style.marginLeft=-B.gutterTotalWidth+"px"))}function zu(A){if(A.height!=null)return A.height;var y=A.doc.cm;if(!y)return 0;if(!Je(document.body,A.node)){var O="position: relative;";A.coverGutter&&(O+="margin-left: -"+y.display.gutters.offsetWidth+"px;"),A.noHScroll&&(O+="width: "+y.display.wrapper.clientWidth+"px;"),De(y.display.measure,be("div",[A.node],null,O))}return A.height=A.node.parentNode.offsetHeight}function lA(A,y){for(var O=Er(y);O!=A.wrapper;O=O.parentNode)if(!O||O.nodeType==1&&O.getAttribute("cm-ignore-events")=="true"||O.parentNode==A.sizer&&O!=A.mover)return!0}function Gc(A){return A.lineSpace.offsetTop}function bh(A){return A.mover.offsetHeight-A.lineSpace.offsetHeight}function xh(A){if(A.cachedPaddingH)return A.cachedPaddingH;var y=De(A.measure,be("pre","x","CodeMirror-line-like")),O=window.getComputedStyle?window.getComputedStyle(y):y.currentStyle,B={left:parseInt(O.paddingLeft),right:parseInt(O.paddingRight)};return!isNaN(B.left)&&!isNaN(B.right)&&(A.cachedPaddingH=B),B}function ju(A){return _t-A.display.nativeBarWidth}function uA(A){return A.display.scroller.clientWidth-ju(A)-A.display.barWidth}function Ll(A){return A.display.scroller.clientHeight-ju(A)-A.display.barHeight}function Qc(A,y,O){var B=A.options.lineWrapping,R=B&&uA(A);if(!y.measure.heights||B&&y.measure.width!=R){var Z=y.measure.heights=[];if(B){y.measure.width=R;for(var Ae=y.text.firstChild.getClientRects(),Ce=0;Ce<Ae.length-1;Ce++){var Te=Ae[Ce],je=Ae[Ce+1];Math.abs(Te.bottom-je.bottom)>2&&Z.push((Te.bottom+je.top)/2-O.top)}}Z.push(O.bottom-O.top)}}function uf(A,y,O){if(A.line==y)return{map:A.measure.map,cache:A.measure.cache};if(A.rest){for(var B=0;B<A.rest.length;B++)if(A.rest[B]==y)return{map:A.measure.maps[B],cache:A.measure.caches[B]};for(var R=0;R<A.rest.length;R++)if(qe(A.rest[R])>O)return{map:A.measure.maps[R],cache:A.measure.caches[R],before:!0}}}function Af(A,y){y=Br(y);var O=qe(y),B=A.display.externalMeasured=new Gd(A.doc,y,O);B.lineN=O;var R=B.built=Wc(A,B);return B.text=R.pre,De(A.display.lineMeasure,R.pre),B}function Qd(A,y,O,B){return rl(A,la(A,y),O,B)}function pd(A,y){if(y>=A.display.viewFrom&&y<A.display.viewTo)return A.display.view[AA(A,y)];var O=A.display.externalMeasured;if(O&&y>=O.lineN&&y<O.lineN+O.size)return O}function la(A,y){var O=qe(y),B=pd(A,O);B&&!B.text?B=null:B&&B.changes&&(gh(A,B,O,ao(A)),A.curOp.forceUpdate=!0),B||(B=Af(A,y));var R=uf(B,y,O);return{line:y,view:B,rect:null,map:R.map,cache:R.cache,before:R.before,hasHeights:!1}}function rl(A,y,O,B,R){y.before&&(O=-1);var Z=O+(B||""),Ae;return y.cache.hasOwnProperty(Z)?Ae=y.cache[Z]:(y.rect||(y.rect=y.view.text.getBoundingClientRect()),y.hasHeights||(Qc(A,y.view,y.rect),y.hasHeights=!0),Ae=md(A,y,O,B),Ae.bogus||(y.cache[Z]=Ae)),{left:Ae.left,right:Ae.right,top:R?Ae.rtop:Ae.top,bottom:R?Ae.rbottom:Ae.bottom}}var Zo={left:0,right:0,top:0,bottom:0};function wh(A,y,O){for(var B,R,Z,Ae,Ce,Te,je=0;je<A.length;je+=3)if(Ce=A[je],Te=A[je+1],y<Ce?(R=0,Z=1,Ae="left"):y<Te?(R=y-Ce,Z=R+1):(je==A.length-3||y==Te&&A[je+3]>y)&&(Z=Te-Ce,R=Z-1,y>=Te&&(Ae="right")),R!=null){if(B=A[je+2],Ce==Te&&O==(B.insertLeft?"left":"right")&&(Ae=O),O=="left"&&R==0)for(;je&&A[je-2]==A[je-3]&&A[je-1].insertLeft;)B=A[(je-=3)+2],Ae="left";if(O=="right"&&R==Te-Ce)for(;je<A.length-3&&A[je+3]==A[je+4]&&!A[je+5].insertLeft;)B=A[(je+=3)+2],Ae="right";break}return{node:B,start:R,end:Z,collapse:Ae,coverStart:Ce,coverEnd:Te}}function hm(A,y){var O=Zo;if(y=="left")for(var B=0;B<A.length&&(O=A[B]).left==O.right;B++);else for(var R=A.length-1;R>=0&&(O=A[R]).left==O.right;R--);return O}function md(A,y,O,B){var R=wh(y.map,O,B),Z=R.node,Ae=R.start,Ce=R.end,Te=R.collapse,je;if(Z.nodeType==3){for(var yt=0;yt<4;yt++){for(;Ae&&nt(y.line.text.charAt(R.coverStart+Ae));)--Ae;for(;R.coverStart+Ce<R.coverEnd&&nt(y.line.text.charAt(R.coverStart+Ce));)++Ce;if(d&&g<9&&Ae==0&&Ce==R.coverEnd-R.coverStart?je=Z.parentNode.getBoundingClientRect():je=hm(Ze(Z,Ae,Ce).getClientRects(),B),je.left||je.right||Ae==0)break;Ce=Ae,Ae=Ae-1,Te="right"}d&&g<11&&(je=Cu(A.display.measure,je))}else{Ae>0&&(Te=B="right");var Mt;A.options.lineWrapping&&(Mt=Z.getClientRects()).length>1?je=Mt[B=="right"?Mt.length-1:0]:je=Z.getBoundingClientRect()}if(d&&g<9&&!Ae&&(!je||!je.left&&!je.right)){var en=Z.parentNode.getClientRects()[0];en?je={left:en.left,right:en.left+Wu(A.display),top:en.top,bottom:en.bottom}:je=Zo}for(var Qt=je.top-y.rect.top,wn=je.bottom-y.rect.top,Ln=(Qt+wn)/2,sr=y.view.measure.heights,Vn=0;Vn<sr.length-1&&!(Ln<sr[Vn]);Vn++);var wr=Vn?sr[Vn-1]:0,yr=sr[Vn],Or={left:(Te=="right"?je.right:je.left)-y.rect.left,right:(Te=="left"?je.left:je.right)-y.rect.left,top:wr,bottom:yr};return!je.left&&!je.right&&(Or.bogus=!0),A.options.singleCursorHeightPerLine||(Or.rtop=Qt,Or.rbottom=wn),Or}function Cu(A,y){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!vi(A))return y;var O=screen.logicalXDPI/screen.deviceXDPI,B=screen.logicalYDPI/screen.deviceYDPI;return{left:y.left*O,right:y.right*O,top:y.top*B,bottom:y.bottom*B}}function Mh(A){if(A.measure&&(A.measure.cache={},A.measure.heights=null,A.rest))for(var y=0;y<A.rest.length;y++)A.measure.caches[y]={}}function cf(A){A.display.externalMeasure=null,Se(A.display.lineMeasure);for(var y=0;y<A.display.view.length;y++)Mh(A.display.view[y])}function wc(A){cf(A),A.display.cachedCharWidth=A.display.cachedTextHeight=A.display.cachedPaddingH=null,A.options.lineWrapping||(A.display.maxLineChanged=!0),A.display.lineNumChars=null}function qd(A){return S&&ie?-(A.body.getBoundingClientRect().left-parseInt(getComputedStyle(A.body).marginLeft)):A.defaultView.pageXOffset||(A.documentElement||A.body).scrollLeft}function Sh(A){return S&&ie?-(A.body.getBoundingClientRect().top-parseInt(getComputedStyle(A.body).marginTop)):A.defaultView.pageYOffset||(A.documentElement||A.body).scrollTop}function Eh(A){var y=Br(A),O=y.widgets,B=0;if(O)for(var R=0;R<O.length;++R)O[R].above&&(B+=zu(O[R]));return B}function Jl(A,y,O,B,R){if(!R){var Z=Eh(y);O.top+=Z,O.bottom+=Z}if(B=="line")return O;B||(B="local");var Ae=Di(y);if(B=="local"?Ae+=Gc(A.display):Ae-=A.display.viewOffset,B=="page"||B=="window"){var Ce=A.display.lineSpace.getBoundingClientRect();Ae+=Ce.top+(B=="window"?0:Sh(bt(A)));var Te=Ce.left+(B=="window"?0:qd(bt(A)));O.left+=Te,O.right+=Te}return O.top+=Ae,O.bottom+=Ae,O}function Jt(A,y,O){if(O=="div")return y;var B=y.left,R=y.top;if(O=="page")B-=qd(bt(A)),R-=Sh(bt(A));else if(O=="local"||!O){var Z=A.display.sizer.getBoundingClientRect();B+=Z.left,R+=Z.top}var Ae=A.display.lineSpace.getBoundingClientRect();return{left:B-Ae.left,top:R-Ae.top}}function En(A,y,O,B,R){return B||(B=Tr(A.doc,y.line)),Jl(A,B,Qd(A,B,y.ch,R),O)}function ln(A,y,O,B,R,Z){B=B||Tr(A.doc,y.line),R||(R=la(A,B));function Ae(wn,Ln){var sr=rl(A,R,wn,Ln?"right":"left",Z);return Ln?sr.left=sr.right:sr.right=sr.left,Jl(A,B,sr,O)}var Ce=ve(B,A.doc.direction),Te=y.ch,je=y.sticky;if(Te>=B.text.length?(Te=B.text.length,je="before"):Te<=0&&(Te=0,je="after"),!Ce)return Ae(je=="before"?Te-1:Te,je=="before");function yt(wn,Ln,sr){var Vn=Ce[Ln],wr=Vn.level==1;return Ae(sr?wn-1:wn,wr!=sr)}var Mt=Oe(Ce,Te,je),en=tr,Qt=yt(Te,Mt,je=="before");return en!=null&&(Qt.other=yt(Te,en,je!="before")),Qt}function Fr(A,y){var O=0;y=ei(A.doc,y),A.options.lineWrapping||(O=Wu(A.display)*y.ch);var B=Tr(A.doc,y.line),R=Di(B)+Gc(A.display);return{left:O,right:O,top:R,bottom:R+B.height}}function Ei(A,y,O,B,R){var Z=hn(A,y,O);return Z.xRel=R,B&&(Z.outside=B),Z}function ho(A,y,O){var B=A.doc;if(O+=A.display.viewOffset,O<0)return Ei(B.first,0,null,-1,-1);var R=wt(B,O),Z=B.first+B.size-1;if(R>Z)return Ei(B.first+B.size-1,Tr(B,Z).text.length,null,1,1);y<0&&(y=0);for(var Ae=Tr(B,R);;){var Ce=df(A,Ae,R,y,O),Te=ti(Ae,Ce.ch+(Ce.xRel>0||Ce.outside>0?1:0));if(!Te)return Ce;var je=Te.find(1);if(je.line==R)return je;Ae=Tr(B,R=je.line)}}function na(A,y,O,B){B-=Eh(y);var R=y.text.length,Z=Ht(function(Ae){return rl(A,O,Ae-1).bottom<=B},R,0);return R=Ht(function(Ae){return rl(A,O,Ae).top>B},Z,R),{begin:Z,end:R}}function rs(A,y,O,B){O||(O=la(A,y));var R=Jl(A,y,rl(A,O,B),"line").top;return na(A,y,O,R)}function OA(A,y,O,B){return A.bottom<=O?!1:A.top>O?!0:(B?A.left:A.right)>y}function df(A,y,O,B,R){R-=Di(y);var Z=la(A,y),Ae=Eh(y),Ce=0,Te=y.text.length,je=!0,yt=ve(y,A.doc.direction);if(yt){var Mt=(A.options.lineWrapping?_u:Nu)(A,y,O,Z,yt,B,R);je=Mt.level!=1,Ce=je?Mt.from:Mt.to-1,Te=je?Mt.to:Mt.from-1}var en=null,Qt=null,wn=Ht(function(ni){var zr=rl(A,Z,ni);return zr.top+=Ae,zr.bottom+=Ae,OA(zr,B,R,!1)?(zr.top<=R&&zr.left<=B&&(en=ni,Qt=zr),!0):!1},Ce,Te),Ln,sr,Vn=!1;if(Qt){var wr=B-Qt.left<Qt.right-B,yr=wr==je;wn=en+(yr?0:1),sr=yr?"after":"before",Ln=wr?Qt.left:Qt.right}else{!je&&(wn==Te||wn==Ce)&&wn++,sr=wn==0?"after":wn==y.text.length?"before":rl(A,Z,wn-(je?1:0)).bottom+Ae<=R==je?"after":"before";var Or=ln(A,hn(O,wn,sr),"line",y,Z);Ln=Or.left,Vn=R<Or.top?-1:R>=Or.bottom?1:0}return wn=St(y.text,wn,1),Ei(O,wn,sr,Vn,B-Ln)}function Nu(A,y,O,B,R,Z,Ae){var Ce=Ht(function(Mt){var en=R[Mt],Qt=en.level!=1;return OA(ln(A,hn(O,Qt?en.to:en.from,Qt?"before":"after"),"line",y,B),Z,Ae,!0)},0,R.length-1),Te=R[Ce];if(Ce>0){var je=Te.level!=1,yt=ln(A,hn(O,je?Te.from:Te.to,je?"after":"before"),"line",y,B);OA(yt,Z,Ae,!0)&&yt.top>Ae&&(Te=R[Ce-1])}return Te}function _u(A,y,O,B,R,Z,Ae){var Ce=na(A,y,B,Ae),Te=Ce.begin,je=Ce.end;/\s/.test(y.text.charAt(je-1))&&je--;for(var yt=null,Mt=null,en=0;en<R.length;en++){var Qt=R[en];if(!(Qt.from>=je||Qt.to<=Te)){var wn=Qt.level!=1,Ln=rl(A,B,wn?Math.min(je,Qt.to)-1:Math.max(Te,Qt.from)).right,sr=Ln<Z?Z-Ln+1e9:Ln-Z;(!yt||Mt>sr)&&(yt=Qt,Mt=sr)}}return yt||(yt=R[R.length-1]),yt.from<Te&&(yt={from:Te,to:yt.to,level:yt.level}),yt.to>je&&(yt={from:yt.from,to:je,level:yt.level}),yt}var bu;function Ul(A){if(A.cachedTextHeight!=null)return A.cachedTextHeight;if(bu==null){bu=be("pre",null,"CodeMirror-line-like");for(var y=0;y<49;++y)bu.appendChild(document.createTextNode("x")),bu.appendChild(be("br"));bu.appendChild(document.createTextNode("x"))}De(A.measure,bu);var O=bu.offsetHeight/50;return O>3&&(A.cachedTextHeight=O),Se(A.measure),O||1}function Wu(A){if(A.cachedCharWidth!=null)return A.cachedCharWidth;var y=be("span","xxxxxxxxxx"),O=be("pre",[y],"CodeMirror-line-like");De(A.measure,O);var B=y.getBoundingClientRect(),R=(B.right-B.left)/10;return R>2&&(A.cachedCharWidth=R),R||10}function ao(A){for(var y=A.display,O={},B={},R=y.gutters.clientLeft,Z=y.gutters.firstChild,Ae=0;Z;Z=Z.nextSibling,++Ae){var Ce=A.display.gutterSpecs[Ae].className;O[Ce]=Z.offsetLeft+Z.clientLeft+R,B[Ce]=Z.clientWidth}return{fixedPos:Oo(y),gutterTotalWidth:y.gutters.offsetWidth,gutterLeft:O,gutterWidth:B,wrapperWidth:y.wrapper.clientWidth}}function Oo(A){return A.scroller.getBoundingClientRect().left-A.sizer.getBoundingClientRect().left}function gd(A){var y=Ul(A.display),O=A.options.lineWrapping,B=O&&Math.max(5,A.display.scroller.clientWidth/Wu(A.display)-3);return function(R){if(Wr(A.doc,R))return 0;var Z=0;if(R.widgets)for(var Ae=0;Ae<R.widgets.length;Ae++)R.widgets[Ae].height&&(Z+=R.widgets[Ae].height);return O?Z+(Math.ceil(R.text.length/B)||1)*y:Z+y}}function yd(A){var y=A.doc,O=gd(A);y.iter(function(B){var R=O(B);R!=B.height&&Js(B,R)})}function eu(A,y,O,B){var R=A.display;if(!O&&Er(y).getAttribute("cm-not-content")=="true")return null;var Z,Ae,Ce=R.lineSpace.getBoundingClientRect();try{Z=y.clientX-Ce.left,Ae=y.clientY-Ce.top}catch{return null}var Te=ho(A,Z,Ae),je;if(B&&Te.xRel>0&&(je=Tr(A.doc,Te.line).text).length==Te.ch){var yt=Pe(je,je.length,A.options.tabSize)-je.length;Te=hn(Te.line,Math.max(0,Math.round((Z-xh(A.display).left)/Wu(A.display))-yt))}return Te}function AA(A,y){if(y>=A.display.viewTo||(y-=A.display.viewFrom,y<0))return null;for(var O=A.display.view,B=0;B<O.length;B++)if(y-=O[B].size,y<0)return B}function zl(A,y,O,B){y==null&&(y=A.doc.first),O==null&&(O=A.doc.first+A.doc.size),B||(B=0);var R=A.display;if(B&&O<R.viewTo&&(R.updateLineNumbers==null||R.updateLineNumbers>y)&&(R.updateLineNumbers=y),A.curOp.viewChanged=!0,y>=R.viewTo)Ho&&Zi(A.doc,y)<R.viewTo&&cA(A);else if(O<=R.viewFrom)Ho&&Si(A.doc,O+B)>R.viewFrom?cA(A):(R.viewFrom+=B,R.viewTo+=B);else if(y<=R.viewFrom&&O>=R.viewTo)cA(A);else if(y<=R.viewFrom){var Z=tu(A,O,O+B,1);Z?(R.view=R.view.slice(Z.index),R.viewFrom=Z.lineN,R.viewTo+=B):cA(A)}else if(O>=R.viewTo){var Ae=tu(A,y,y,-1);Ae?(R.view=R.view.slice(0,Ae.index),R.viewTo=Ae.lineN):cA(A)}else{var Ce=tu(A,y,y,-1),Te=tu(A,O,O+B,1);Ce&&Te?(R.view=R.view.slice(0,Ce.index).concat(bc(A,Ce.lineN,Te.lineN)).concat(R.view.slice(Te.index)),R.viewTo+=B):cA(A)}var je=R.externalMeasured;je&&(O<je.lineN?je.lineN+=B:y<je.lineN+je.size&&(R.externalMeasured=null))}function tc(A,y,O){A.curOp.viewChanged=!0;var B=A.display,R=A.display.externalMeasured;if(R&&y>=R.lineN&&y<R.lineN+R.size&&(B.externalMeasured=null),!(y<B.viewFrom||y>=B.viewTo)){var Z=B.view[AA(A,y)];if(Z.node!=null){var Ae=Z.changes||(Z.changes=[]);it(Ae,O)==-1&&Ae.push(O)}}}function cA(A){A.display.viewFrom=A.display.viewTo=A.doc.first,A.display.view=[],A.display.viewOffset=0}function tu(A,y,O,B){var R=AA(A,y),Z,Ae=A.display.view;if(!Ho||O==A.doc.first+A.doc.size)return{index:R,lineN:O};for(var Ce=A.display.viewFrom,Te=0;Te<R;Te++)Ce+=Ae[Te].size;if(Ce!=y){if(B>0){if(R==Ae.length-1)return null;Z=Ce+Ae[R].size-y,R++}else Z=Ce-y;y+=Z,O+=Z}for(;Zi(A.doc,O)!=O;){if(R==(B<0?0:Ae.length-1))return null;O+=B*Ae[R-(B<0?1:0)].size,R+=B}return{index:R,lineN:O}}function qc(A,y,O){var B=A.display,R=B.view;R.length==0||y>=B.viewTo||O<=B.viewFrom?(B.view=bc(A,y,O),B.viewFrom=y):(B.viewFrom>y?B.view=bc(A,y,B.viewFrom).concat(B.view):B.viewFrom<y&&(B.view=B.view.slice(AA(A,y))),B.viewFrom=y,B.viewTo<O?B.view=B.view.concat(bc(A,B.viewTo,O)):B.viewTo>O&&(B.view=B.view.slice(0,AA(A,O)))),B.viewTo=O}function vd(A){for(var y=A.display.view,O=0,B=0;B<y.length;B++){var R=y[B];!R.hidden&&(!R.node||R.changes)&&++O}return O}function Wa(A){A.display.input.showSelection(A.display.input.prepareSelection())}function Yc(A,y){y===void 0&&(y=!0);var O=A.doc,B={},R=B.cursors=document.createDocumentFragment(),Z=B.selection=document.createDocumentFragment(),Ae=A.options.$customCursor;Ae&&(y=!0);for(var Ce=0;Ce<O.sel.ranges.length;Ce++)if(!(!y&&Ce==O.sel.primIndex)){var Te=O.sel.ranges[Ce];if(!(Te.from().line>=A.display.viewTo||Te.to().line<A.display.viewFrom)){var je=Te.empty();if(Ae){var yt=Ae(A,Te);yt&&Cd(A,yt,R)}else(je||A.options.showCursorWhenSelecting)&&Cd(A,Te.head,R);je||Bh(A,Te,Z)}}return B}function Cd(A,y,O){var B=ln(A,y,"div",null,null,!A.options.singleCursorHeightPerLine),R=O.appendChild(be("div","","CodeMirror-cursor"));if(R.style.left=B.left+"px",R.style.top=B.top+"px",R.style.height=Math.max(0,B.bottom-B.top)*A.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(A.getWrapperElement().className)){var Z=En(A,y,"div",null,null),Ae=Z.right-Z.left;R.style.width=(Ae>0?Ae:A.defaultCharWidth())+"px"}if(B.other){var Ce=O.appendChild(be("div","","CodeMirror-cursor CodeMirror-secondarycursor"));Ce.style.display="",Ce.style.left=B.other.left+"px",Ce.style.top=B.other.top+"px",Ce.style.height=(B.other.bottom-B.other.top)*.85+"px"}}function nc(A,y){return A.top-y.top||A.left-y.left}function Bh(A,y,O){var B=A.display,R=A.doc,Z=document.createDocumentFragment(),Ae=xh(A.display),Ce=Ae.left,Te=Math.max(B.sizerWidth,uA(A)-B.sizer.offsetLeft)-Ae.right,je=R.direction=="ltr";function yt(yr,Or,ni,zr){Or<0&&(Or=0),Or=Math.round(Or),zr=Math.round(zr),Z.appendChild(be("div",null,"CodeMirror-selected","position: absolute; left: "+yr+`px;
                             top: `+Or+"px; width: "+(ni??Te-yr)+`px;
                             height: `+(zr-Or)+"px"))}function Mt(yr,Or,ni){var zr=Tr(R,yr),Hi=zr.text.length,zo,Ya;function ia(_a,du){return En(A,hn(yr,_a),"div",zr,du)}function Ca(_a,du,Da){var Ra=rs(A,zr,null,_a),as=du=="ltr"==(Da=="after")?"left":"right",yi=Da=="after"?Ra.begin:Ra.end-(/\s/.test(zr.text.charAt(Ra.end-1))?2:1);return ia(yi,as)[as]}var $a=ve(zr,R.direction);return sn($a,Or||0,ni??Hi,function(_a,du,Da,Ra){var as=Da=="ltr",yi=ia(_a,as?"left":"right"),ps=ia(du-1,as?"right":"left"),js=Or==null&&_a==0,ca=ni==null&&du==Hi,Es=Ra==0,Iu=!$a||Ra==$a.length-1;if(ps.top-yi.top<=3){var Co=(je?js:ca)&&Es,Kh=(je?ca:js)&&Iu,Wl=Co?Ce:(as?yi:ps).left,Xu=Kh?Te:(as?ps:yi).right;yt(Wl,yi.top,Xu-Wl,yi.bottom)}else{var pc,gl,Ol,bf;as?(pc=je&&js&&Es?Ce:yi.left,gl=je?Te:Ca(_a,Da,"before"),Ol=je?Ce:Ca(du,Da,"after"),bf=je&&ca&&Iu?Te:ps.right):(pc=je?Ca(_a,Da,"before"):Ce,gl=!je&&js&&Es?Te:yi.right,Ol=!je&&ca&&Iu?Ce:ps.left,bf=je?Ca(du,Da,"after"):Te),yt(pc,yi.top,gl-pc,yi.bottom),yi.bottom<ps.top&&yt(Ce,yi.bottom,null,ps.top),yt(Ol,ps.top,bf-Ol,ps.bottom)}(!zo||nc(yi,zo)<0)&&(zo=yi),nc(ps,zo)<0&&(zo=ps),(!Ya||nc(yi,Ya)<0)&&(Ya=yi),nc(ps,Ya)<0&&(Ya=ps)}),{start:zo,end:Ya}}var en=y.from(),Qt=y.to();if(en.line==Qt.line)Mt(en.line,en.ch,Qt.ch);else{var wn=Tr(R,en.line),Ln=Tr(R,Qt.line),sr=Br(wn)==Br(Ln),Vn=Mt(en.line,en.ch,sr?wn.text.length+1:null).end,wr=Mt(Qt.line,sr?0:null,Qt.ch).start;sr&&(Vn.top<wr.top-2?(yt(Vn.right,Vn.top,null,Vn.bottom),yt(Ce,wr.top,wr.left,wr.bottom)):yt(Vn.right,Vn.top,wr.left-Vn.right,Vn.bottom)),Vn.bottom<wr.top&&yt(Ce,Vn.bottom,null,wr.top)}O.appendChild(Z)}function Gu(A){if(A.state.focused){var y=A.display;clearInterval(y.blinker);var O=!0;y.cursorDiv.style.visibility="",A.options.cursorBlinkRate>0?y.blinker=setInterval(function(){A.hasFocus()||ds(A),y.cursorDiv.style.visibility=(O=!O)?"":"hidden"},A.options.cursorBlinkRate):A.options.cursorBlinkRate<0&&(y.cursorDiv.style.visibility="hidden")}}function $c(A){A.hasFocus()||(A.display.input.focus(),A.state.focused||Oh(A))}function rc(A){A.state.delayingBlurEvent=!0,setTimeout(function(){A.state.delayingBlurEvent&&(A.state.delayingBlurEvent=!1,A.state.focused&&ds(A))},100)}function Oh(A,y){A.state.delayingBlurEvent&&!A.state.draggingText&&(A.state.delayingBlurEvent=!1),A.options.readOnly!="nocursor"&&(A.state.focused||(ct(A,"focus",A,y),A.state.focused=!0,Me(A.display.wrapper,"CodeMirror-focused"),!A.curOp&&A.display.selForContextMenu!=A.doc.sel&&(A.display.input.reset(),b&&setTimeout(function(){return A.display.input.reset(!0)},20)),A.display.input.receivedFocus()),Gu(A))}function ds(A,y){A.state.delayingBlurEvent||(A.state.focused&&(ct(A,"blur",A,y),A.state.focused=!1,me(A.display.wrapper,"CodeMirror-focused")),clearInterval(A.display.blinker),setTimeout(function(){A.state.focused||(A.display.shift=!1)},150))}function Mc(A){for(var y=A.display,O=y.lineDiv.offsetTop,B=Math.max(0,y.scroller.getBoundingClientRect().top),R=y.lineDiv.getBoundingClientRect().top,Z=0,Ae=0;Ae<y.view.length;Ae++){var Ce=y.view[Ae],Te=A.options.lineWrapping,je=void 0,yt=0;if(!Ce.hidden){if(R+=Ce.line.height,d&&g<8){var Mt=Ce.node.offsetTop+Ce.node.offsetHeight;je=Mt-O,O=Mt}else{var en=Ce.node.getBoundingClientRect();je=en.bottom-en.top,!Te&&Ce.text.firstChild&&(yt=Ce.text.firstChild.getBoundingClientRect().right-en.left-1)}var Qt=Ce.line.height-je;if((Qt>.005||Qt<-.005)&&(R<B&&(Z-=Qt),Js(Ce.line,je),IA(Ce.line),Ce.rest))for(var wn=0;wn<Ce.rest.length;wn++)IA(Ce.rest[wn]);if(yt>A.display.sizerWidth){var Ln=Math.ceil(yt/Wu(A.display));Ln>A.display.maxLineLength&&(A.display.maxLineLength=Ln,A.display.maxLine=Ce.line,A.display.maxLineChanged=!0)}}}Math.abs(Z)>2&&(y.scroller.scrollTop+=Z)}function IA(A){if(A.widgets)for(var y=0;y<A.widgets.length;++y){var O=A.widgets[y],B=O.node.parentNode;B&&(O.height=B.offsetHeight)}}function Qu(A,y,O){var B=O&&O.top!=null?Math.max(0,O.top):A.scroller.scrollTop;B=Math.floor(B-Gc(A));var R=O&&O.bottom!=null?O.bottom:B+A.wrapper.clientHeight,Z=wt(y,B),Ae=wt(y,R);if(O&&O.ensure){var Ce=O.ensure.from.line,Te=O.ensure.to.line;Ce<Z?(Z=Ce,Ae=wt(y,Di(Tr(y,Ce))+A.wrapper.clientHeight)):Math.min(Te,y.lastLine())>=Ae&&(Z=wt(y,Di(Tr(y,Te))-A.wrapper.clientHeight),Ae=Te)}return{from:Z,to:Math.max(Ae,Z+1)}}function Yd(A,y){if(!dt(A,"scrollCursorIntoView")){var O=A.display,B=O.sizer.getBoundingClientRect(),R=null,Z=O.wrapper.ownerDocument;if(y.top+B.top<0?R=!0:y.bottom+B.top>(Z.defaultView.innerHeight||Z.documentElement.clientHeight)&&(R=!1),R!=null&&!q){var Ae=be("div","",null,`position: absolute;
                         top: `+(y.top-O.viewOffset-Gc(A.display))+`px;
                         height: `+(y.bottom-y.top+ju(A)+O.barHeight)+`px;
                         left: `+y.left+"px; width: "+Math.max(2,y.right-y.left)+"px;");A.display.lineSpace.appendChild(Ae),Ae.scrollIntoView(R),A.display.lineSpace.removeChild(Ae)}}}function _d(A,y,O,B){B==null&&(B=0);var R;!A.options.lineWrapping&&y==O&&(O=y.sticky=="before"?hn(y.line,y.ch+1,"before"):y,y=y.ch?hn(y.line,y.sticky=="before"?y.ch-1:y.ch,"after"):y);for(var Z=0;Z<5;Z++){var Ae=!1,Ce=ln(A,y),Te=!O||O==y?Ce:ln(A,O);R={left:Math.min(Ce.left,Te.left),top:Math.min(Ce.top,Te.top)-B,right:Math.max(Ce.left,Te.left),bottom:Math.max(Ce.bottom,Te.bottom)+B};var je=Vc(A,R),yt=A.doc.scrollTop,Mt=A.doc.scrollLeft;if(je.scrollTop!=null&&(Sc(A,je.scrollTop),Math.abs(A.doc.scrollTop-yt)>1&&(Ae=!0)),je.scrollLeft!=null&&(cl(A,je.scrollLeft),Math.abs(A.doc.scrollLeft-Mt)>1&&(Ae=!0)),!Ae)break}return R}function ic(A,y){var O=Vc(A,y);O.scrollTop!=null&&Sc(A,O.scrollTop),O.scrollLeft!=null&&cl(A,O.scrollLeft)}function Vc(A,y){var O=A.display,B=Ul(A.display);y.top<0&&(y.top=0);var R=A.curOp&&A.curOp.scrollTop!=null?A.curOp.scrollTop:O.scroller.scrollTop,Z=Ll(A),Ae={};y.bottom-y.top>Z&&(y.bottom=y.top+Z);var Ce=A.doc.height+bh(O),Te=y.top<B,je=y.bottom>Ce-B;if(y.top<R)Ae.scrollTop=Te?0:y.top;else if(y.bottom>R+Z){var yt=Math.min(y.top,(je?Ce:y.bottom)-Z);yt!=R&&(Ae.scrollTop=yt)}var Mt=A.options.fixedGutter?0:O.gutters.offsetWidth,en=A.curOp&&A.curOp.scrollLeft!=null?A.curOp.scrollLeft:O.scroller.scrollLeft-Mt,Qt=uA(A)-O.gutters.offsetWidth,wn=y.right-y.left>Qt;return wn&&(y.right=y.left+Qt),y.left<10?Ae.scrollLeft=0:y.left<en?Ae.scrollLeft=Math.max(0,y.left+Mt-(wn?0:10)):y.right>Qt+en-3&&(Ae.scrollLeft=y.right+(wn?0:10)-Qt),Ae}function kA(A,y){y!=null&&(bd(A),A.curOp.scrollTop=(A.curOp.scrollTop==null?A.doc.scrollTop:A.curOp.scrollTop)+y)}function Bi(A){bd(A);var y=A.getCursor();A.curOp.scrollToPos={from:y,to:y,margin:A.options.cursorScrollMargin}}function Ls(A,y,O){(y!=null||O!=null)&&bd(A),y!=null&&(A.curOp.scrollLeft=y),O!=null&&(A.curOp.scrollTop=O)}function dA(A,y){bd(A),A.curOp.scrollToPos=y}function bd(A){var y=A.curOp.scrollToPos;if(y){A.curOp.scrollToPos=null;var O=Fr(A,y.from),B=Fr(A,y.to);Hc(A,O,B,y.margin)}}function Hc(A,y,O,B){var R=Vc(A,{left:Math.min(y.left,O.left),top:Math.min(y.top,O.top)-B,right:Math.max(y.right,O.right),bottom:Math.max(y.bottom,O.bottom)+B});Ls(A,R.scrollLeft,R.scrollTop)}function Sc(A,y){Math.abs(A.doc.scrollTop-y)<2||(i||hr(A,{top:y}),TA(A,y,!0),i&&hr(A),fA(A,100))}function TA(A,y,O){y=Math.max(0,Math.min(A.display.scroller.scrollHeight-A.display.scroller.clientHeight,y)),!(A.display.scroller.scrollTop==y&&!O)&&(A.doc.scrollTop=y,A.display.scrollbars.setScrollTop(y),A.display.scroller.scrollTop!=y&&(A.display.scroller.scrollTop=y))}function cl(A,y,O,B){y=Math.max(0,Math.min(y,A.display.scroller.scrollWidth-A.display.scroller.clientWidth)),!((O?y==A.doc.scrollLeft:Math.abs(A.doc.scrollLeft-y)<2)&&!B)&&(A.doc.scrollLeft=y,Sd(A),A.display.scroller.scrollLeft!=y&&(A.display.scroller.scrollLeft=y),A.display.scrollbars.setScrollLeft(y))}function hA(A){var y=A.display,O=y.gutters.offsetWidth,B=Math.round(A.doc.height+bh(A.display));return{clientHeight:y.scroller.clientHeight,viewHeight:y.wrapper.clientHeight,scrollWidth:y.scroller.scrollWidth,clientWidth:y.scroller.clientWidth,viewWidth:y.wrapper.clientWidth,barLeft:A.options.fixedGutter?O:0,docHeight:B,scrollHeight:B+ju(A)+y.barHeight,nativeBarWidth:y.nativeBarWidth,gutterWidth:O}}var dl=function(A,y,O){this.cm=O;var B=this.vert=be("div",[be("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),R=this.horiz=be("div",[be("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");B.tabIndex=R.tabIndex=-1,A(B),A(R),Ne(B,"scroll",function(){B.clientHeight&&y(B.scrollTop,"vertical")}),Ne(R,"scroll",function(){R.clientWidth&&y(R.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,d&&g<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};dl.prototype.update=function(A){var y=A.scrollWidth>A.clientWidth+1,O=A.scrollHeight>A.clientHeight+1,B=A.nativeBarWidth;if(O){this.vert.style.display="block",this.vert.style.bottom=y?B+"px":"0";var R=A.viewHeight-(y?B:0);this.vert.firstChild.style.height=Math.max(0,A.scrollHeight-A.clientHeight+R)+"px"}else this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0";if(y){this.horiz.style.display="block",this.horiz.style.right=O?B+"px":"0",this.horiz.style.left=A.barLeft+"px";var Z=A.viewWidth-A.barLeft-(O?B:0);this.horiz.firstChild.style.width=Math.max(0,A.scrollWidth-A.clientWidth+Z)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&A.clientHeight>0&&(B==0&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:O?B:0,bottom:y?B:0}},dl.prototype.setScrollLeft=function(A){this.horiz.scrollLeft!=A&&(this.horiz.scrollLeft=A),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},dl.prototype.setScrollTop=function(A){this.vert.scrollTop!=A&&(this.vert.scrollTop=A),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},dl.prototype.zeroWidthHack=function(){var A=V&&!j?"12px":"18px";this.horiz.style.height=this.vert.style.width=A,this.horiz.style.visibility=this.vert.style.visibility="hidden",this.disableHoriz=new Be,this.disableVert=new Be},dl.prototype.enableZeroWidthBar=function(A,y,O){A.style.visibility="";function B(){var R=A.getBoundingClientRect(),Z=O=="vert"?document.elementFromPoint(R.right-1,(R.top+R.bottom)/2):document.elementFromPoint((R.right+R.left)/2,R.bottom-1);Z!=A?A.style.visibility="hidden":y.set(1e3,B)}y.set(1e3,B)},dl.prototype.clear=function(){var A=this.horiz.parentNode;A.removeChild(this.horiz),A.removeChild(this.vert)};var oc=function(){};oc.prototype.update=function(){return{bottom:0,right:0}},oc.prototype.setScrollLeft=function(){},oc.prototype.setScrollTop=function(){},oc.prototype.clear=function(){};function qu(A,y){y||(y=hA(A));var O=A.display.barWidth,B=A.display.barHeight;xd(A,y);for(var R=0;R<4&&O!=A.display.barWidth||B!=A.display.barHeight;R++)O!=A.display.barWidth&&A.options.lineWrapping&&Mc(A),xd(A,hA(A)),O=A.display.barWidth,B=A.display.barHeight}function xd(A,y){var O=A.display,B=O.scrollbars.update(y);O.sizer.style.paddingRight=(O.barWidth=B.right)+"px",O.sizer.style.paddingBottom=(O.barHeight=B.bottom)+"px",O.heightForcer.style.borderBottom=B.bottom+"px solid transparent",B.right&&B.bottom?(O.scrollbarFiller.style.display="block",O.scrollbarFiller.style.height=B.bottom+"px",O.scrollbarFiller.style.width=B.right+"px"):O.scrollbarFiller.style.display="",B.bottom&&A.options.coverGutterNextToScrollbar&&A.options.fixedGutter?(O.gutterFiller.style.display="block",O.gutterFiller.style.height=B.bottom+"px",O.gutterFiller.style.width=y.gutterWidth+"px"):O.gutterFiller.style.display=""}var Zc={native:dl,null:oc};function PA(A){A.display.scrollbars&&(A.display.scrollbars.clear(),A.display.scrollbars.addClass&&me(A.display.wrapper,A.display.scrollbars.addClass)),A.display.scrollbars=new Zc[A.options.scrollbarStyle](function(y){A.display.wrapper.insertBefore(y,A.display.scrollbarFiller),Ne(y,"mousedown",function(){A.state.focused&&setTimeout(function(){return A.display.input.focus()},0)}),y.setAttribute("cm-not-content","true")},function(y,O){O=="horizontal"?cl(A,y):Sc(A,y)},A),A.display.scrollbars.addClass&&Me(A.display.wrapper,A.display.scrollbars.addClass)}var sc=0;function Yu(A){A.curOp={cm:A,viewChanged:!1,startHeight:A.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++sc,markArrays:null},$f(A.curOp)}function $u(A){var y=A.curOp;y&&Bp(y,function(O){for(var B=0;B<O.ops.length;B++)O.ops[B].cm.curOp=null;KA(O)})}function KA(A){for(var y=A.ops,O=0;O<y.length;O++)Ec(y[O]);for(var B=0;B<y.length;B++)xu(y[B]);for(var R=0;R<y.length;R++)Ih(y[R]);for(var Z=0;Z<y.length;Z++)ot(y[Z]);for(var Ae=0;Ae<y.length;Ae++)DA(y[Ae])}function Ec(A){var y=A.cm,O=y.display;Us(y),A.updateMaxLine&&pa(y),A.mustUpdate=A.viewChanged||A.forceUpdate||A.scrollTop!=null||A.scrollToPos&&(A.scrollToPos.from.line<O.viewFrom||A.scrollToPos.to.line>=O.viewTo)||O.maxLineChanged&&y.options.lineWrapping,A.update=A.mustUpdate&&new Ia(y,A.mustUpdate&&{top:A.scrollTop,ensure:A.scrollToPos},A.forceUpdate)}function xu(A){A.updatedDisplay=A.mustUpdate&&ra(A.cm,A.update)}function Ih(A){var y=A.cm,O=y.display;A.updatedDisplay&&Mc(y),A.barMeasure=hA(y),O.maxLineChanged&&!y.options.lineWrapping&&(A.adjustWidthTo=Qd(y,O.maxLine,O.maxLine.text.length).left+3,y.display.sizerWidth=A.adjustWidthTo,A.barMeasure.scrollWidth=Math.max(O.scroller.clientWidth,O.sizer.offsetLeft+A.adjustWidthTo+ju(y)+y.display.barWidth),A.maxScrollLeft=Math.max(0,O.sizer.offsetLeft+A.adjustWidthTo-uA(y))),(A.updatedDisplay||A.selectionChanged)&&(A.preparedSelection=O.input.prepareSelection())}function ot(A){var y=A.cm;A.adjustWidthTo!=null&&(y.display.sizer.style.minWidth=A.adjustWidthTo+"px",A.maxScrollLeft<y.doc.scrollLeft&&cl(y,Math.min(y.display.scroller.scrollLeft,A.maxScrollLeft),!0),y.display.maxLineChanged=!1);var O=A.focus&&A.focus==We(Yt(y));A.preparedSelection&&y.display.input.showSelection(A.preparedSelection,O),(A.updatedDisplay||A.startHeight!=y.doc.height)&&qu(y,A.barMeasure),A.updatedDisplay&&Md(y,A.barMeasure),A.selectionChanged&&Gu(y),y.state.focused&&A.updateInput&&y.display.input.reset(A.typing),O&&$c(A.cm)}function DA(A){var y=A.cm,O=y.display,B=y.doc;if(A.updatedDisplay&&ua(y,A.update),O.wheelStartX!=null&&(A.scrollTop!=null||A.scrollLeft!=null||A.scrollToPos)&&(O.wheelStartX=O.wheelStartY=null),A.scrollTop!=null&&TA(y,A.scrollTop,A.forceScroll),A.scrollLeft!=null&&cl(y,A.scrollLeft,!0,!0),A.scrollToPos){var R=_d(y,ei(B,A.scrollToPos.from),ei(B,A.scrollToPos.to),A.scrollToPos.margin);Yd(y,R)}var Z=A.maybeHiddenMarkers,Ae=A.maybeUnhiddenMarkers;if(Z)for(var Ce=0;Ce<Z.length;++Ce)Z[Ce].lines.length||ct(Z[Ce],"hide");if(Ae)for(var Te=0;Te<Ae.length;++Te)Ae[Te].lines.length&&ct(Ae[Te],"unhide");O.wrapper.offsetHeight&&(B.scrollTop=y.display.scroller.scrollTop),A.changeObjs&&ct(y,"changes",y,A.changeObjs),A.update&&A.update.finish()}function Io(A,y){if(A.curOp)return y();Yu(A);try{return y()}finally{$u(A)}}function pi(A,y){return function(){if(A.curOp)return y.apply(A,arguments);Yu(A);try{return y.apply(A,arguments)}finally{$u(A)}}}function ii(A){return function(){if(this.curOp)return A.apply(this,arguments);Yu(this);try{return A.apply(this,arguments)}finally{$u(this)}}}function is(A){return function(){var y=this.cm;if(!y||y.curOp)return A.apply(this,arguments);Yu(y);try{return A.apply(this,arguments)}finally{$u(y)}}}function fA(A,y){A.doc.highlightFrontier<A.display.viewTo&&A.state.highlight.set(y,Kt($d,A))}function $d(A){var y=A.doc;if(!(y.highlightFrontier>=A.display.viewTo)){var O=+new Date+A.options.workTime,B=Rr(A,y.highlightFrontier),R=[];y.iter(B.line,Math.min(y.first+y.size,A.display.viewTo+500),function(Z){if(B.line>=A.display.viewFrom){var Ae=Z.styles,Ce=Z.text.length>A.options.maxHighlightLength?uo(y.mode,B.state):null,Te=XA(A,Z,B,!0);Ce&&(B.state=Ce),Z.styles=Te.styles;var je=Z.styleClasses,yt=Te.classes;yt?Z.styleClasses=yt:je&&(Z.styleClasses=null);for(var Mt=!Ae||Ae.length!=Z.styles.length||je!=yt&&(!je||!yt||je.bgClass!=yt.bgClass||je.textClass!=yt.textClass),en=0;!Mt&&en<Ae.length;++en)Mt=Ae[en]!=Z.styles[en];Mt&&R.push(B.line),Z.stateAfter=B.save(),B.nextLine()}else Z.text.length<=A.options.maxHighlightLength&&Yi(A,Z.text,B),Z.stateAfter=B.line%5==0?B.save():null,B.nextLine();if(+new Date>O)return fA(A,A.options.workDelay),!0}),y.highlightFrontier=B.line,y.modeFrontier=Math.max(y.modeFrontier,B.line),R.length&&Io(A,function(){for(var Z=0;Z<R.length;Z++)tc(A,R[Z],"text")})}}var Ia=function(A,y,O){var B=A.display;this.viewport=y,this.visible=Qu(B,A.doc,y),this.editorIsHidden=!B.wrapper.offsetWidth,this.wrapperHeight=B.wrapper.clientHeight,this.wrapperWidth=B.wrapper.clientWidth,this.oldDisplayWidth=uA(A),this.force=O,this.dims=ao(A),this.events=[]};Ia.prototype.signal=function(A,y){Gt(A,y)&&this.events.push(arguments)},Ia.prototype.finish=function(){for(var A=0;A<this.events.length;A++)ct.apply(null,this.events[A])};function Us(A){var y=A.display;!y.scrollbarsClipped&&y.scroller.offsetWidth&&(y.nativeBarWidth=y.scroller.offsetWidth-y.scroller.clientWidth,y.heightForcer.style.height=ju(A)+"px",y.sizer.style.marginBottom=-y.nativeBarWidth+"px",y.sizer.style.borderRightWidth=ju(A)+"px",y.scrollbarsClipped=!0)}function Ss(A){if(A.hasFocus())return null;var y=We(Yt(A));if(!y||!Je(A.display.lineDiv,y))return null;var O={activeElt:y};if(window.getSelection){var B=Lt(A).getSelection();B.anchorNode&&B.extend&&Je(A.display.lineDiv,B.anchorNode)&&(O.anchorNode=B.anchorNode,O.anchorOffset=B.anchorOffset,O.focusNode=B.focusNode,O.focusOffset=B.focusOffset)}return O}function Bc(A){if(!(!A||!A.activeElt||A.activeElt==We(gt(A.activeElt)))&&(A.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(A.activeElt.nodeName)&&A.anchorNode&&Je(document.body,A.anchorNode)&&Je(document.body,A.focusNode))){var y=A.activeElt.ownerDocument,O=y.defaultView.getSelection(),B=y.createRange();B.setEnd(A.anchorNode,A.anchorOffset),B.collapse(!1),O.removeAllRanges(),O.addRange(B),O.extend(A.focusNode,A.focusOffset)}}function ra(A,y){var O=A.display,B=A.doc;if(y.editorIsHidden)return cA(A),!1;if(!y.force&&y.visible.from>=O.viewFrom&&y.visible.to<=O.viewTo&&(O.updateLineNumbers==null||O.updateLineNumbers>=O.viewTo)&&O.renderedView==O.view&&vd(A)==0)return!1;ac(A)&&(cA(A),y.dims=ao(A));var R=B.first+B.size,Z=Math.max(y.visible.from-A.options.viewportMargin,B.first),Ae=Math.min(R,y.visible.to+A.options.viewportMargin);O.viewFrom<Z&&Z-O.viewFrom<20&&(Z=Math.max(B.first,O.viewFrom)),O.viewTo>Ae&&O.viewTo-Ae<20&&(Ae=Math.min(R,O.viewTo)),Ho&&(Z=Zi(A.doc,Z),Ae=Si(A.doc,Ae));var Ce=Z!=O.viewFrom||Ae!=O.viewTo||O.lastWrapHeight!=y.wrapperHeight||O.lastWrapWidth!=y.wrapperWidth;qc(A,Z,Ae),O.viewOffset=Di(Tr(A.doc,O.viewFrom)),A.display.mover.style.top=O.viewOffset+"px";var Te=vd(A);if(!Ce&&Te==0&&!y.force&&O.renderedView==O.view&&(O.updateLineNumbers==null||O.updateLineNumbers>=O.viewTo))return!1;var je=Ss(A);return Te>4&&(O.lineDiv.style.display="none"),wd(A,O.updateLineNumbers,y.dims),Te>4&&(O.lineDiv.style.display=""),O.renderedView=O.view,Bc(je),Se(O.cursorDiv),Se(O.selectionDiv),O.gutters.style.height=O.sizer.style.minHeight=0,Ce&&(O.lastWrapHeight=y.wrapperHeight,O.lastWrapWidth=y.wrapperWidth,fA(A,400)),O.updateLineNumbers=null,!0}function ua(A,y){for(var O=y.viewport,B=!0;;B=!1){if(!B||!A.options.lineWrapping||y.oldDisplayWidth==uA(A)){if(O&&O.top!=null&&(O={top:Math.min(A.doc.height+bh(A.display)-Ll(A),O.top)}),y.visible=Qu(A.display,A.doc,O),y.visible.from>=A.display.viewFrom&&y.visible.to<=A.display.viewTo)break}else B&&(y.visible=Qu(A.display,A.doc,O));if(!ra(A,y))break;Mc(A);var R=hA(A);Wa(A),qu(A,R),Md(A,R),y.force=!1}y.signal(A,"update",A),(A.display.viewFrom!=A.display.reportedViewFrom||A.display.viewTo!=A.display.reportedViewTo)&&(y.signal(A,"viewportChange",A,A.display.viewFrom,A.display.viewTo),A.display.reportedViewFrom=A.display.viewFrom,A.display.reportedViewTo=A.display.viewTo)}function hr(A,y){var O=new Ia(A,y);if(ra(A,O)){Mc(A),ua(A,O);var B=hA(A);Wa(A),qu(A,B),Md(A,B),O.finish()}}function wd(A,y,O){var B=A.display,R=A.options.lineNumbers,Z=B.lineDiv,Ae=Z.firstChild;function Ce(wn){var Ln=wn.nextSibling;return b&&V&&A.display.currentWheelTarget==wn?wn.style.display="none":wn.parentNode.removeChild(wn),Ln}for(var Te=B.view,je=B.viewFrom,yt=0;yt<Te.length;yt++){var Mt=Te[yt];if(!Mt.hidden)if(!Mt.node||Mt.node.parentNode!=Z){var en=vh(A,Mt,je,O);Z.insertBefore(en,Ae)}else{for(;Ae!=Mt.node;)Ae=Ce(Ae);var Qt=R&&y!=null&&y<=je&&Mt.lineNumber;Mt.changes&&(it(Mt.changes,"gutter")>-1&&(Qt=!1),gh(A,Mt,je,O)),Qt&&(Se(Mt.lineNumber),Mt.lineNumber.appendChild(document.createTextNode(Yn(A.options,je)))),Ae=Mt.node.nextSibling}je+=Mt.size}for(;Ae;)Ae=Ce(Ae)}function ga(A){var y=A.gutters.offsetWidth;A.sizer.style.marginLeft=y+"px",ta(A,"gutterChanged",A)}function Md(A,y){A.display.sizer.style.minHeight=y.docHeight+"px",A.display.heightForcer.style.top=y.docHeight+"px",A.display.gutters.style.height=y.docHeight+A.display.barHeight+ju(A)+"px"}function Sd(A){var y=A.display,O=y.view;if(!(!y.alignWidgets&&(!y.gutters.firstChild||!A.options.fixedGutter))){for(var B=Oo(y)-y.scroller.scrollLeft+A.doc.scrollLeft,R=y.gutters.offsetWidth,Z=B+"px",Ae=0;Ae<O.length;Ae++)if(!O[Ae].hidden){A.options.fixedGutter&&(O[Ae].gutter&&(O[Ae].gutter.style.left=Z),O[Ae].gutterBackground&&(O[Ae].gutterBackground.style.left=Z));var Ce=O[Ae].alignable;if(Ce)for(var Te=0;Te<Ce.length;Te++)Ce[Te].style.left=Z}A.options.fixedGutter&&(y.gutters.style.left=B+R+"px")}}function ac(A){if(!A.options.lineNumbers)return!1;var y=A.doc,O=Yn(A.options,y.first+y.size-1),B=A.display;if(O.length!=B.lineNumChars){var R=B.measure.appendChild(be("div",[be("div",O)],"CodeMirror-linenumber CodeMirror-gutter-elt")),Z=R.firstChild.offsetWidth,Ae=R.offsetWidth-Z;return B.lineGutter.style.width="",B.lineNumInnerWidth=Math.max(Z,B.lineGutter.offsetWidth-Ae)+1,B.lineNumWidth=B.lineNumInnerWidth+Ae,B.lineNumChars=B.lineNumInnerWidth?O.length:-1,B.lineGutter.style.width=B.lineNumWidth+"px",ga(A.display),!0}return!1}function nu(A,y){for(var O=[],B=!1,R=0;R<A.length;R++){var Z=A[R],Ae=null;if(typeof Z!="string"&&(Ae=Z.style,Z=Z.className),Z=="CodeMirror-linenumbers")if(y)B=!0;else continue;O.push({className:Z,style:Ae})}return y&&!B&&O.push({className:"CodeMirror-linenumbers",style:null}),O}function Xi(A){var y=A.gutters,O=A.gutterSpecs;Se(y),A.lineGutter=null;for(var B=0;B<O.length;++B){var R=O[B],Z=R.className,Ae=R.style,Ce=y.appendChild(be("div",null,"CodeMirror-gutter "+Z));Ae&&(Ce.style.cssText=Ae),Z=="CodeMirror-linenumbers"&&(A.lineGutter=Ce,Ce.style.width=(A.lineNumWidth||1)+"px")}y.style.display=O.length?"":"none",ga(A)}function hl(A){Xi(A.display),zl(A),Sd(A)}function kh(A,y,O,B){var R=this;this.input=O,R.scrollbarFiller=be("div",null,"CodeMirror-scrollbar-filler"),R.scrollbarFiller.setAttribute("cm-not-content","true"),R.gutterFiller=be("div",null,"CodeMirror-gutter-filler"),R.gutterFiller.setAttribute("cm-not-content","true"),R.lineDiv=at("div",null,"CodeMirror-code"),R.selectionDiv=be("div",null,null,"position: relative; z-index: 1"),R.cursorDiv=be("div",null,"CodeMirror-cursors"),R.measure=be("div",null,"CodeMirror-measure"),R.lineMeasure=be("div",null,"CodeMirror-measure"),R.lineSpace=at("div",[R.measure,R.lineMeasure,R.selectionDiv,R.cursorDiv,R.lineDiv],null,"position: relative; outline: none");var Z=at("div",[R.lineSpace],"CodeMirror-lines");R.mover=be("div",[Z],null,"position: relative"),R.sizer=be("div",[R.mover],"CodeMirror-sizer"),R.sizerWidth=null,R.heightForcer=be("div",null,null,"position: absolute; height: "+_t+"px; width: 1px;"),R.gutters=be("div",null,"CodeMirror-gutters"),R.lineGutter=null,R.scroller=be("div",[R.sizer,R.heightForcer,R.gutters],"CodeMirror-scroll"),R.scroller.setAttribute("tabIndex","-1"),R.wrapper=be("div",[R.scrollbarFiller,R.gutterFiller,R.scroller],"CodeMirror"),S&&I>=105&&(R.wrapper.style.clipPath="inset(0px)"),R.wrapper.setAttribute("translate","no"),d&&g<8&&(R.gutters.style.zIndex=-1,R.scroller.style.paddingRight=0),!b&&!(i&&te)&&(R.scroller.draggable=!0),A&&(A.appendChild?A.appendChild(R.wrapper):A(R.wrapper)),R.viewFrom=R.viewTo=y.first,R.reportedViewFrom=R.reportedViewTo=y.first,R.view=[],R.renderedView=null,R.externalMeasured=null,R.viewOffset=0,R.lastWrapHeight=R.lastWrapWidth=0,R.updateLineNumbers=null,R.nativeBarWidth=R.barHeight=R.barWidth=0,R.scrollbarsClipped=!1,R.lineNumWidth=R.lineNumInnerWidth=R.lineNumChars=null,R.alignWidgets=!1,R.cachedCharWidth=R.cachedTextHeight=R.cachedPaddingH=null,R.maxLine=null,R.maxLineLength=0,R.maxLineChanged=!1,R.wheelDX=R.wheelDY=R.wheelStartX=R.wheelStartY=null,R.shift=!1,R.selForContextMenu=null,R.activeTouch=null,R.gutterSpecs=nu(B.gutters,B.lineNumbers),Xi(R),O.init(R)}var Oc=0,RA=null;d?RA=-.53:i?RA=15:S?RA=-.7:z&&(RA=-1/3);function Ic(A){var y=A.wheelDeltaX,O=A.wheelDeltaY;return y==null&&A.detail&&A.axis==A.HORIZONTAL_AXIS&&(y=A.detail),O==null&&A.detail&&A.axis==A.VERTICAL_AXIS?O=A.detail:O==null&&(O=A.wheelDelta),{x:y,y:O}}function FA(A){var y=Ic(A);return y.x*=RA,y.y*=RA,y}function lc(A,y){S&&I==102&&(A.display.chromeScrollHack==null?A.display.sizer.style.pointerEvents="none":clearTimeout(A.display.chromeScrollHack),A.display.chromeScrollHack=setTimeout(function(){A.display.chromeScrollHack=null,A.display.sizer.style.pointerEvents=""},100));var O=Ic(y),B=O.x,R=O.y,Z=RA;y.deltaMode===0&&(B=y.deltaX,R=y.deltaY,Z=1);var Ae=A.display,Ce=Ae.scroller,Te=Ce.scrollWidth>Ce.clientWidth,je=Ce.scrollHeight>Ce.clientHeight;if(B&&Te||R&&je){if(R&&V&&b){e:for(var yt=y.target,Mt=Ae.view;yt!=Ce;yt=yt.parentNode)for(var en=0;en<Mt.length;en++)if(Mt[en].node==yt){A.display.currentWheelTarget=yt;break e}}if(B&&!i&&!P&&Z!=null){R&&je&&Sc(A,Math.max(0,Ce.scrollTop+R*Z)),cl(A,Math.max(0,Ce.scrollLeft+B*Z)),(!R||R&&je)&&xt(y),Ae.wheelStartX=null;return}if(R&&Z!=null){var Qt=R*Z,wn=A.doc.scrollTop,Ln=wn+Ae.wrapper.clientHeight;Qt<0?wn=Math.max(0,wn+Qt-50):Ln=Math.min(A.doc.height,Ln+Qt+50),hr(A,{top:wn,bottom:Ln})}Oc<20&&y.deltaMode!==0&&(Ae.wheelStartX==null?(Ae.wheelStartX=Ce.scrollLeft,Ae.wheelStartY=Ce.scrollTop,Ae.wheelDX=B,Ae.wheelDY=R,setTimeout(function(){if(Ae.wheelStartX!=null){var sr=Ce.scrollLeft-Ae.wheelStartX,Vn=Ce.scrollTop-Ae.wheelStartY,wr=Vn&&Ae.wheelDY&&Vn/Ae.wheelDY||sr&&Ae.wheelDX&&sr/Ae.wheelDX;Ae.wheelStartX=Ae.wheelStartY=null,wr&&(RA=(RA*Oc+wr)/(Oc+1),++Oc)}},200)):(Ae.wheelDX+=B,Ae.wheelDY+=R))}}var _s=function(A,y){this.ranges=A,this.primIndex=y};_s.prototype.primary=function(){return this.ranges[this.primIndex]},_s.prototype.equals=function(A){if(A==this)return!0;if(A.primIndex!=this.primIndex||A.ranges.length!=this.ranges.length)return!1;for(var y=0;y<this.ranges.length;y++){var O=this.ranges[y],B=A.ranges[y];if(!Pi(O.anchor,B.anchor)||!Pi(O.head,B.head))return!1}return!0},_s.prototype.deepCopy=function(){for(var A=[],y=0;y<this.ranges.length;y++)A[y]=new Ro(go(this.ranges[y].anchor),go(this.ranges[y].head));return new _s(A,this.primIndex)},_s.prototype.somethingSelected=function(){for(var A=0;A<this.ranges.length;A++)if(!this.ranges[A].empty())return!0;return!1},_s.prototype.contains=function(A,y){y||(y=A);for(var O=0;O<this.ranges.length;O++){var B=this.ranges[O];if(or(y,B.from())>=0&&or(A,B.to())<=0)return O}return-1};var Ro=function(A,y){this.anchor=A,this.head=y};Ro.prototype.from=function(){return Rs(this.anchor,this.head)},Ro.prototype.to=function(){return Cs(this.anchor,this.head)},Ro.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};function ru(A,y,O){var B=A&&A.options.selectionsMayTouch,R=y[O];y.sort(function(en,Qt){return or(en.from(),Qt.from())}),O=it(y,R);for(var Z=1;Z<y.length;Z++){var Ae=y[Z],Ce=y[Z-1],Te=or(Ce.to(),Ae.from());if(B&&!Ae.empty()?Te>0:Te>=0){var je=Rs(Ce.from(),Ae.from()),yt=Cs(Ce.to(),Ae.to()),Mt=Ce.empty()?Ae.from()==Ae.head:Ce.from()==Ce.head;Z<=O&&--O,y.splice(--Z,2,new Ro(Mt?yt:je,Mt?je:yt))}}return new _s(y,O)}function Ga(A,y){return new _s([new Ro(A,y||A)],0)}function Qa(A){return A.text?hn(A.from.line+A.text.length-1,rr(A.text).length+(A.text.length==1?A.from.ch:0)):A.to}function jl(A,y){if(or(A,y.from)<0)return A;if(or(A,y.to)<=0)return Qa(y);var O=A.line+y.text.length-(y.to.line-y.from.line)-1,B=A.ch;return A.line==y.to.line&&(B+=Qa(y).ch-y.to.ch),hn(O,B)}function Fo(A,y){for(var O=[],B=0;B<A.sel.ranges.length;B++){var R=A.sel.ranges[B];O.push(new Ro(jl(R.anchor,y),jl(R.head,y)))}return ru(A.cm,O,A.sel.primIndex)}function wu(A,y,O){return A.line==y.line?hn(O.line,A.ch-y.ch+O.ch):hn(O.line+(A.line-y.line),A.ch)}function uc(A,y,O){for(var B=[],R=hn(A.first,0),Z=R,Ae=0;Ae<y.length;Ae++){var Ce=y[Ae],Te=wu(Ce.from,R,Z),je=wu(Qa(Ce),R,Z);if(R=Ce.to,Z=je,O=="around"){var yt=A.sel.ranges[Ae],Mt=or(yt.head,yt.anchor)<0;B[Ae]=new Ro(Mt?je:Te,Mt?Te:je)}else B[Ae]=new Ro(Te,Te)}return new _s(B,A.sel.primIndex)}function Vd(A){A.doc.mode=ns(A.options,A.doc.modeOption),LA(A)}function LA(A){A.doc.iter(function(y){y.stateAfter&&(y.stateAfter=null),y.styles&&(y.styles=null)}),A.doc.modeFrontier=A.doc.highlightFrontier=A.doc.first,fA(A,100),A.state.modeGen++,A.curOp&&zl(A)}function Ac(A,y){return y.from.ch==0&&y.to.ch==0&&rr(y.text)==""&&(!A.cm||A.cm.options.wholeLineUpdateBefore)}function ka(A,y,O,B){function R(wr){return O?O[wr]:null}function Z(wr,yr,Or){yu(wr,yr,Or,B),ta(wr,"change",wr,y)}function Ae(wr,yr){for(var Or=[],ni=wr;ni<yr;++ni)Or.push(new Na(je[ni],R(ni),B));return Or}var Ce=y.from,Te=y.to,je=y.text,yt=Tr(A,Ce.line),Mt=Tr(A,Te.line),en=rr(je),Qt=R(je.length-1),wn=Te.line-Ce.line;if(y.full)A.insert(0,Ae(0,je.length)),A.remove(je.length,A.size-je.length);else if(Ac(A,y)){var Ln=Ae(0,je.length-1);Z(Mt,Mt.text,Qt),wn&&A.remove(Ce.line,wn),Ln.length&&A.insert(Ce.line,Ln)}else if(yt==Mt)if(je.length==1)Z(yt,yt.text.slice(0,Ce.ch)+en+yt.text.slice(Te.ch),Qt);else{var sr=Ae(1,je.length-1);sr.push(new Na(en+yt.text.slice(Te.ch),Qt,B)),Z(yt,yt.text.slice(0,Ce.ch)+je[0],R(0)),A.insert(Ce.line+1,sr)}else if(je.length==1)Z(yt,yt.text.slice(0,Ce.ch)+je[0]+Mt.text.slice(Te.ch),R(0)),A.remove(Ce.line+1,wn);else{Z(yt,yt.text.slice(0,Ce.ch)+je[0],R(0)),Z(Mt,en+Mt.text.slice(Te.ch),Qt);var Vn=Ae(1,je.length-1);wn>1&&A.remove(Ce.line+1,wn-1),A.insert(Ce.line+1,Vn)}ta(A,"change",A,y)}function bs(A,y,O){function B(R,Z,Ae){if(R.linked)for(var Ce=0;Ce<R.linked.length;++Ce){var Te=R.linked[Ce];if(Te.doc!=Z){var je=Ae&&Te.sharedHist;O&&!je||(y(Te.doc,je),B(Te.doc,R,je))}}}B(A,null,!0)}function hs(A,y){if(y.cm)throw new Error("This document is already in use.");A.doc=y,y.cm=A,yd(A),Vd(A),Pr(A),A.options.direction=y.direction,A.options.lineWrapping||pa(A),A.options.mode=y.modeOption,zl(A)}function Pr(A){(A.doc.direction=="rtl"?Me:me)(A.display.lineDiv,"CodeMirror-rtl")}function Hr(A){Io(A,function(){Pr(A),zl(A)})}function UA(A){this.done=[],this.undone=[],this.undoDepth=A?A.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=A?A.maxGeneration:1}function Mu(A,y){var O={from:go(y.from),to:Qa(y),text:tl(A,y.from,y.to)};return gs(A,O,y.from.line,y.to.line+1),bs(A,function(B){return gs(B,O,y.from.line,y.to.line+1)},!0),O}function fl(A){for(;A.length;){var y=rr(A);if(y.ranges)A.pop();else break}}function iu(A,y){if(y)return fl(A.done),rr(A.done);if(A.done.length&&!rr(A.done).ranges)return rr(A.done);if(A.done.length>1&&!A.done[A.done.length-2].ranges)return A.done.pop(),rr(A.done)}function Ed(A,y,O,B){var R=A.history;R.undone.length=0;var Z=+new Date,Ae,Ce;if((R.lastOp==B||R.lastOrigin==y.origin&&y.origin&&(y.origin.charAt(0)=="+"&&R.lastModTime>Z-(A.cm?A.cm.options.historyEventDelay:500)||y.origin.charAt(0)=="*"))&&(Ae=iu(R,R.lastOp==B)))Ce=rr(Ae.changes),or(y.from,y.to)==0&&or(y.from,Ce.to)==0?Ce.to=Qa(y):Ae.changes.push(Mu(A,y));else{var Te=rr(R.done);for((!Te||!Te.ranges)&&wl(A.sel,R.done),Ae={changes:[Mu(A,y)],generation:R.generation},R.done.push(Ae);R.done.length>R.undoDepth;)R.done.shift(),R.done[0].ranges||R.done.shift()}R.done.push(O),R.generation=++R.maxGeneration,R.lastModTime=R.lastSelTime=Z,R.lastOp=R.lastSelOp=B,R.lastOrigin=R.lastSelOrigin=y.origin,Ce||ct(A,"historyAdded")}function pA(A,y,O,B){var R=y.charAt(0);return R=="*"||R=="+"&&O.ranges.length==B.ranges.length&&O.somethingSelected()==B.somethingSelected()&&new Date-A.history.lastSelTime<=(A.cm?A.cm.options.historyEventDelay:500)}function cc(A,y,O,B){var R=A.history,Z=B&&B.origin;O==R.lastSelOp||Z&&R.lastSelOrigin==Z&&(R.lastModTime==R.lastSelTime&&R.lastOrigin==Z||pA(A,Z,rr(R.done),y))?R.done[R.done.length-1]=y:wl(y,R.done),R.lastSelTime=+new Date,R.lastSelOrigin=Z,R.lastSelOp=O,B&&B.clearRedo!==!1&&fl(R.undone)}function wl(A,y){var O=rr(y);O&&O.ranges&&O.equals(A)||y.push(A)}function gs(A,y,O,B){var R=y["spans_"+A.id],Z=0;A.iter(Math.max(A.first,O),Math.min(A.first+A.size,B),function(Ae){Ae.markedSpans&&((R||(R=y["spans_"+A.id]={}))[Z]=Ae.markedSpans),++Z})}function qs(A){if(!A)return null;for(var y,O=0;O<A.length;++O)A[O].marker.explicitlyCleared?y||(y=A.slice(0,O)):y&&y.push(A[O]);return y?y.length?y:null:A}function Xc(A,y){var O=y["spans_"+A.id];if(!O)return null;for(var B=[],R=0;R<y.text.length;++R)B.push(qs(O[R]));return B}function Bd(A,y){var O=Xc(A,y),B=Yr(A,y);if(!O)return B;if(!B)return O;for(var R=0;R<O.length;++R){var Z=O[R],Ae=B[R];if(Z&&Ae)e:for(var Ce=0;Ce<Ae.length;++Ce){for(var Te=Ae[Ce],je=0;je<Z.length;++je)if(Z[je].marker==Te.marker)continue e;Z.push(Te)}else Ae&&(O[R]=Ae)}return O}function mA(A,y,O){for(var B=[],R=0;R<A.length;++R){var Z=A[R];if(Z.ranges){B.push(O?_s.prototype.deepCopy.call(Z):Z);continue}var Ae=Z.changes,Ce=[];B.push({changes:Ce});for(var Te=0;Te<Ae.length;++Te){var je=Ae[Te],yt=void 0;if(Ce.push({from:je.from,to:je.to,text:je.text}),y)for(var Mt in je)(yt=Mt.match(/^spans_(\d+)$/))&&it(y,Number(yt[1]))>-1&&(rr(Ce)[Mt]=je[Mt],delete je[Mt])}}return B}function zs(A,y,O,B){if(B){var R=A.anchor;if(O){var Z=or(y,R)<0;Z!=or(O,R)<0?(R=y,y=O):Z!=or(y,O)<0&&(y=O)}return new Ro(R,y)}else return new Ro(O||y,y)}function kc(A,y,O,B,R){R==null&&(R=A.cm&&(A.cm.display.shift||A.extend)),ya(A,new _s([zs(A.sel.primary(),y,O,R)],0),B)}function Su(A,y,O){for(var B=[],R=A.cm&&(A.cm.display.shift||A.extend),Z=0;Z<A.sel.ranges.length;Z++)B[Z]=zs(A.sel.ranges[Z],y[Z],null,R);var Ae=ru(A.cm,B,A.sel.primIndex);ya(A,Ae,O)}function qa(A,y,O,B){var R=A.sel.ranges.slice(0);R[y]=O,ya(A,ru(A.cm,R,A.sel.primIndex),B)}function Vu(A,y,O,B){ya(A,Ga(y,O),B)}function Tc(A,y,O){var B={ranges:y.ranges,update:function(R){this.ranges=[];for(var Z=0;Z<R.length;Z++)this.ranges[Z]=new Ro(ei(A,R[Z].anchor),ei(A,R[Z].head))},origin:O&&O.origin};return ct(A,"beforeSelectionChange",A,B),A.cm&&ct(A.cm,"beforeSelectionChange",A.cm,B),B.ranges!=y.ranges?ru(A.cm,B.ranges,B.ranges.length-1):y}function Eu(A,y,O){var B=A.history.done,R=rr(B);R&&R.ranges?(B[B.length-1]=y,Ys(A,y,O)):ya(A,y,O)}function ya(A,y,O){Ys(A,y,O),cc(A,A.sel,A.cm?A.cm.curOp.id:NaN,O)}function Ys(A,y,O){(Gt(A,"beforeSelectionChange")||A.cm&&Gt(A.cm,"beforeSelectionChange"))&&(y=Tc(A,y,O));var B=O&&O.bias||(or(y.primary().head,A.sel.primary().head)<0?-1:1);ou(A,zA(A,y,B,!0)),!(O&&O.scroll===!1)&&A.cm&&A.cm.getOption("readOnly")!="nocursor"&&Bi(A.cm)}function ou(A,y){y.equals(A.sel)||(A.sel=y,A.cm&&(A.cm.curOp.updateInput=1,A.cm.curOp.selectionChanged=!0,qt(A.cm)),ta(A,"cursorActivity",A))}function su(A){ou(A,zA(A,A.sel,null,!1))}function zA(A,y,O,B){for(var R,Z=0;Z<y.ranges.length;Z++){var Ae=y.ranges[Z],Ce=y.ranges.length==A.sel.ranges.length&&A.sel.ranges[Z],Te=Pc(A,Ae.anchor,Ce&&Ce.anchor,O,B),je=Ae.head==Ae.anchor?Te:Pc(A,Ae.head,Ce&&Ce.head,O,B);(R||Te!=Ae.anchor||je!=Ae.head)&&(R||(R=y.ranges.slice(0,Z)),R[Z]=new Ro(Te,je))}return R?ru(A.cm,R,y.primIndex):y}function au(A,y,O,B,R){var Z=Tr(A,y.line);if(Z.markedSpans)for(var Ae=0;Ae<Z.markedSpans.length;++Ae){var Ce=Z.markedSpans[Ae],Te=Ce.marker,je="selectLeft"in Te?!Te.selectLeft:Te.inclusiveLeft,yt="selectRight"in Te?!Te.selectRight:Te.inclusiveRight;if((Ce.from==null||(je?Ce.from<=y.ch:Ce.from<y.ch))&&(Ce.to==null||(yt?Ce.to>=y.ch:Ce.to>y.ch))){if(R&&(ct(Te,"beforeCursorEnter"),Te.explicitlyCleared))if(Z.markedSpans){--Ae;continue}else break;if(!Te.atomic)continue;if(O){var Mt=Te.find(B<0?1:-1),en=void 0;if((B<0?yt:je)&&(Mt=gA(A,Mt,-B,Mt&&Mt.line==y.line?Z:null)),Mt&&Mt.line==y.line&&(en=or(Mt,O))&&(B<0?en<0:en>0))return au(A,Mt,y,B,R)}var Qt=Te.find(B<0?-1:1);return(B<0?je:yt)&&(Qt=gA(A,Qt,B,Qt.line==y.line?Z:null)),Qt?au(A,Qt,y,B,R):null}}return y}function Pc(A,y,O,B,R){var Z=B||1,Ae=au(A,y,O,Z,R)||!R&&au(A,y,O,Z,!0)||au(A,y,O,-Z,R)||!R&&au(A,y,O,-Z,!0);return Ae||(A.cantEdit=!0,hn(A.first,0))}function gA(A,y,O,B){return O<0&&y.ch==0?y.line>A.first?ei(A,hn(y.line-1)):null:O>0&&y.ch==(B||Tr(A,y.line)).text.length?y.line<A.first+A.size-1?hn(y.line+1,0):null:new hn(y.line,y.ch+O)}function Ml(A){A.setSelection(hn(A.firstLine(),0),hn(A.lastLine()),Ut)}function Od(A,y,O){var B={canceled:!1,from:y.from,to:y.to,text:y.text,origin:y.origin,cancel:function(){return B.canceled=!0}};return O&&(B.update=function(R,Z,Ae,Ce){R&&(B.from=ei(A,R)),Z&&(B.to=ei(A,Z)),Ae&&(B.text=Ae),Ce!==void 0&&(B.origin=Ce)}),ct(A,"beforeChange",A,B),A.cm&&ct(A.cm,"beforeChange",A.cm,B),B.canceled?(A.cm&&(A.cm.curOp.updateInput=2),null):{from:B.from,to:B.to,text:B.text,origin:B.origin}}function k(A,y,O){if(A.cm){if(!A.cm.curOp)return pi(A.cm,k)(A,y,O);if(A.cm.state.suppressEdits)return}if(!((Gt(A,"beforeChange")||A.cm&&Gt(A.cm,"beforeChange"))&&(y=Od(A,y,!0),!y))){var B=Bo&&!O&&$i(A,y.from,y.to);if(B)for(var R=B.length-1;R>=0;--R)l(A,{from:B[R].from,to:B[R].to,text:R?[""]:y.text,origin:y.origin});else l(A,y)}}function l(A,y){if(!(y.text.length==1&&y.text[0]==""&&or(y.from,y.to)==0)){var O=Fo(A,y);Ed(A,y,O,A.cm?A.cm.curOp.id:NaN),w(A,y,O,Yr(A,y));var B=[];bs(A,function(R,Z){!Z&&it(B,R.history)==-1&&(ae(R.history,y),B.push(R.history)),w(R,y,null,Yr(R,y))})}}function c(A,y,O){var B=A.cm&&A.cm.state.suppressEdits;if(!(B&&!O)){for(var R=A.history,Z,Ae=A.sel,Ce=y=="undo"?R.done:R.undone,Te=y=="undo"?R.undone:R.done,je=0;je<Ce.length&&(Z=Ce[je],!(O?Z.ranges&&!Z.equals(A.sel):!Z.ranges));je++);if(je!=Ce.length){for(R.lastOrigin=R.lastSelOrigin=null;;)if(Z=Ce.pop(),Z.ranges){if(wl(Z,Te),O&&!Z.equals(A.sel)){ya(A,Z,{clearRedo:!1});return}Ae=Z}else if(B){Ce.push(Z);return}else break;var yt=[];wl(Ae,Te),Te.push({changes:yt,generation:R.generation}),R.generation=Z.generation||++R.maxGeneration;for(var Mt=Gt(A,"beforeChange")||A.cm&&Gt(A.cm,"beforeChange"),en=function(Ln){var sr=Z.changes[Ln];if(sr.origin=y,Mt&&!Od(A,sr,!1))return Ce.length=0,{};yt.push(Mu(A,sr));var Vn=Ln?Fo(A,sr):rr(Ce);w(A,sr,Vn,Bd(A,sr)),!Ln&&A.cm&&A.cm.scrollIntoView({from:sr.from,to:Qa(sr)});var wr=[];bs(A,function(yr,Or){!Or&&it(wr,yr.history)==-1&&(ae(yr.history,sr),wr.push(yr.history)),w(yr,sr,null,Bd(yr,sr))})},Qt=Z.changes.length-1;Qt>=0;--Qt){var wn=en(Qt);if(wn)return wn.v}}}}function _(A,y){if(y!=0&&(A.first+=y,A.sel=new _s(Dn(A.sel.ranges,function(R){return new Ro(hn(R.anchor.line+y,R.anchor.ch),hn(R.head.line+y,R.head.ch))}),A.sel.primIndex),A.cm)){zl(A.cm,A.first,A.first-y,y);for(var O=A.cm.display,B=O.viewFrom;B<O.viewTo;B++)tc(A.cm,B,"gutter")}}function w(A,y,O,B){if(A.cm&&!A.cm.curOp)return pi(A.cm,w)(A,y,O,B);if(y.to.line<A.first){_(A,y.text.length-1-(y.to.line-y.from.line));return}if(!(y.from.line>A.lastLine())){if(y.from.line<A.first){var R=y.text.length-1-(A.first-y.from.line);_(A,R),y={from:hn(A.first,0),to:hn(y.to.line+R,y.to.ch),text:[rr(y.text)],origin:y.origin}}var Z=A.lastLine();y.to.line>Z&&(y={from:y.from,to:hn(Z,Tr(A,Z).text.length),text:[y.text[0]],origin:y.origin}),y.removed=tl(A,y.from,y.to),O||(O=Fo(A,y)),A.cm?K(A.cm,y,B):ka(A,y,B),Ys(A,O,Ut),A.cantEdit&&Pc(A,hn(A.firstLine(),0))&&(A.cantEdit=!1)}}function K(A,y,O){var B=A.doc,R=A.display,Z=y.from,Ae=y.to,Ce=!1,Te=Z.line;A.options.lineWrapping||(Te=qe(Br(Tr(B,Z.line))),B.iter(Te,Ae.line+1,function(Qt){if(Qt==R.maxLine)return Ce=!0,!0})),B.sel.contains(y.from,y.to)>-1&&qt(A),ka(B,y,O,gd(A)),A.options.lineWrapping||(B.iter(Te,Z.line+y.text.length,function(Qt){var wn=cs(Qt);wn>R.maxLineLength&&(R.maxLine=Qt,R.maxLineLength=wn,R.maxLineChanged=!0,Ce=!1)}),Ce&&(A.curOp.updateMaxLine=!0)),Ao(B,Z.line),fA(A,400);var je=y.text.length-(Ae.line-Z.line)-1;y.full?zl(A):Z.line==Ae.line&&y.text.length==1&&!Ac(A.doc,y)?tc(A,Z.line,"text"):zl(A,Z.line,Ae.line+1,je);var yt=Gt(A,"changes"),Mt=Gt(A,"change");if(Mt||yt){var en={from:Z,to:Ae,text:y.text,removed:y.removed,origin:y.origin};Mt&&ta(A,"change",A,en),yt&&(A.curOp.changeObjs||(A.curOp.changeObjs=[])).push(en)}A.display.selForContextMenu=null}function N(A,y,O,B,R){var Z;B||(B=O),or(B,O)<0&&(Z=[B,O],O=Z[0],B=Z[1]),typeof y=="string"&&(y=A.splitLines(y)),k(A,{from:O,to:B,text:y,origin:R})}function $(A,y,O,B){O<A.line?A.line+=B:y<A.line&&(A.line=y,A.ch=0)}function ee(A,y,O,B){for(var R=0;R<A.length;++R){var Z=A[R],Ae=!0;if(Z.ranges){Z.copied||(Z=A[R]=Z.deepCopy(),Z.copied=!0);for(var Ce=0;Ce<Z.ranges.length;Ce++)$(Z.ranges[Ce].anchor,y,O,B),$(Z.ranges[Ce].head,y,O,B);continue}for(var Te=0;Te<Z.changes.length;++Te){var je=Z.changes[Te];if(O<je.from.line)je.from=hn(je.from.line+B,je.from.ch),je.to=hn(je.to.line+B,je.to.ch);else if(y<=je.to.line){Ae=!1;break}}Ae||(A.splice(0,R+1),R=0)}}function ae(A,y){var O=y.from.line,B=y.to.line,R=y.text.length-(B-O)-1;ee(A.done,O,B,R),ee(A.undone,O,B,R)}function xe(A,y,O,B){var R=y,Z=y;return typeof y=="number"?Z=Tr(A,SA(A,y)):R=qe(y),R==null?null:(B(Z,R)&&A.cm&&tc(A.cm,R,O),Z)}function ke(A){this.lines=A,this.parent=null;for(var y=0,O=0;O<A.length;++O)A[O].parent=this,y+=A[O].height;this.height=y}ke.prototype={chunkSize:function(){return this.lines.length},removeInner:function(A,y){for(var O=A,B=A+y;O<B;++O){var R=this.lines[O];this.height-=R.height,Qs(R),ta(R,"delete")}this.lines.splice(A,y)},collapse:function(A){A.push.apply(A,this.lines)},insertInner:function(A,y,O){this.height+=O,this.lines=this.lines.slice(0,A).concat(y).concat(this.lines.slice(A));for(var B=0;B<y.length;++B)y[B].parent=this},iterN:function(A,y,O){for(var B=A+y;A<B;++A)if(O(this.lines[A]))return!0}};function Ke(A){this.children=A;for(var y=0,O=0,B=0;B<A.length;++B){var R=A[B];y+=R.chunkSize(),O+=R.height,R.parent=this}this.size=y,this.height=O,this.parent=null}Ke.prototype={chunkSize:function(){return this.size},removeInner:function(A,y){this.size-=y;for(var O=0;O<this.children.length;++O){var B=this.children[O],R=B.chunkSize();if(A<R){var Z=Math.min(y,R-A),Ae=B.height;if(B.removeInner(A,Z),this.height-=Ae-B.height,R==Z&&(this.children.splice(O--,1),B.parent=null),(y-=Z)==0)break;A=0}else A-=R}if(this.size-y<25&&(this.children.length>1||!(this.children[0]instanceof ke))){var Ce=[];this.collapse(Ce),this.children=[new ke(Ce)],this.children[0].parent=this}},collapse:function(A){for(var y=0;y<this.children.length;++y)this.children[y].collapse(A)},insertInner:function(A,y,O){this.size+=y.length,this.height+=O;for(var B=0;B<this.children.length;++B){var R=this.children[B],Z=R.chunkSize();if(A<=Z){if(R.insertInner(A,y,O),R.lines&&R.lines.length>50){for(var Ae=R.lines.length%25+25,Ce=Ae;Ce<R.lines.length;){var Te=new ke(R.lines.slice(Ce,Ce+=25));R.height-=Te.height,this.children.splice(++B,0,Te),Te.parent=this}R.lines=R.lines.slice(0,Ae),this.maybeSpill()}break}A-=Z}},maybeSpill:function(){if(!(this.children.length<=10)){var A=this;do{var y=A.children.splice(A.children.length-5,5),O=new Ke(y);if(A.parent){A.size-=O.size,A.height-=O.height;var R=it(A.parent.children,A);A.parent.children.splice(R+1,0,O)}else{var B=new Ke(A.children);B.parent=A,A.children=[B,O],A=B}O.parent=A.parent}while(A.children.length>10);A.parent.maybeSpill()}},iterN:function(A,y,O){for(var B=0;B<this.children.length;++B){var R=this.children[B],Z=R.chunkSize();if(A<Z){var Ae=Math.min(y,Z-A);if(R.iterN(A,Ae,O))return!0;if((y-=Ae)==0)break;A=0}else A-=Z}}};var $e=function(A,y,O){if(O)for(var B in O)O.hasOwnProperty(B)&&(this[B]=O[B]);this.doc=A,this.node=y};$e.prototype.clear=function(){var A=this.doc.cm,y=this.line.widgets,O=this.line,B=qe(O);if(!(B==null||!y)){for(var R=0;R<y.length;++R)y[R]==this&&y.splice(R--,1);y.length||(O.widgets=null);var Z=zu(this);Js(O,Math.max(0,O.height-Z)),A&&(Io(A,function(){Xe(A,O,-Z),tc(A,B,"widget")}),ta(A,"lineWidgetCleared",A,this,B))}},$e.prototype.changed=function(){var A=this,y=this.height,O=this.doc.cm,B=this.line;this.height=null;var R=zu(this)-y;R&&(Wr(this.doc,B)||Js(B,B.height+R),O&&Io(O,function(){O.curOp.forceUpdate=!0,Xe(O,B,R),ta(O,"lineWidgetChanged",O,A,qe(B))}))},jt($e);function Xe(A,y,O){Di(y)<(A.curOp&&A.curOp.scrollTop||A.doc.scrollTop)&&kA(A,O)}function pt(A,y,O,B){var R=new $e(A,O,B),Z=A.cm;return Z&&R.noHScroll&&(Z.display.alignWidgets=!0),xe(A,y,"widget",function(Ae){var Ce=Ae.widgets||(Ae.widgets=[]);if(R.insertAt==null?Ce.push(R):Ce.splice(Math.min(Ce.length,Math.max(0,R.insertAt)),0,R),R.line=Ae,Z&&!Wr(A,Ae)){var Te=Di(Ae)<A.scrollTop;Js(Ae,Ae.height+zu(R)),Te&&kA(Z,R.height),Z.curOp.forceUpdate=!0}return!0}),Z&&ta(Z,"lineWidgetAdded",Z,R,typeof y=="number"?y:qe(y)),R}var ut=0,mt=function(A,y){this.lines=[],this.type=y,this.doc=A,this.id=++ut};mt.prototype.clear=function(){if(!this.explicitlyCleared){var A=this.doc.cm,y=A&&!A.curOp;if(y&&Yu(A),Gt(this,"clear")){var O=this.find();O&&ta(this,"clear",O.from,O.to)}for(var B=null,R=null,Z=0;Z<this.lines.length;++Z){var Ae=this.lines[Z],Ce=ea(Ae.markedSpans,this);A&&!this.collapsed?tc(A,qe(Ae),"text"):A&&(Ce.to!=null&&(R=qe(Ae)),Ce.from!=null&&(B=qe(Ae))),Ae.markedSpans=EA(Ae.markedSpans,Ce),Ce.from==null&&this.collapsed&&!Wr(this.doc,Ae)&&A&&Js(Ae,Ul(A.display))}if(A&&this.collapsed&&!A.options.lineWrapping)for(var Te=0;Te<this.lines.length;++Te){var je=Br(this.lines[Te]),yt=cs(je);yt>A.display.maxLineLength&&(A.display.maxLine=je,A.display.maxLineLength=yt,A.display.maxLineChanged=!0)}B!=null&&A&&this.collapsed&&zl(A,B,R+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,A&&su(A.doc)),A&&ta(A,"markerCleared",A,this,B,R),y&&$u(A),this.parent&&this.parent.clear()}},mt.prototype.find=function(A,y){A==null&&this.type=="bookmark"&&(A=1);for(var O,B,R=0;R<this.lines.length;++R){var Z=this.lines[R],Ae=ea(Z.markedSpans,this);if(Ae.from!=null&&(O=hn(y?Z:qe(Z),Ae.from),A==-1))return O;if(Ae.to!=null&&(B=hn(y?Z:qe(Z),Ae.to),A==1))return B}return O&&{from:O,to:B}},mt.prototype.changed=function(){var A=this,y=this.find(-1,!0),O=this,B=this.doc.cm;!y||!B||Io(B,function(){var R=y.line,Z=qe(y.line),Ae=pd(B,Z);if(Ae&&(Mh(Ae),B.curOp.selectionChanged=B.curOp.forceUpdate=!0),B.curOp.updateMaxLine=!0,!Wr(O.doc,R)&&O.height!=null){var Ce=O.height;O.height=null;var Te=zu(O)-Ce;Te&&Js(R,R.height+Te)}ta(B,"markerChanged",B,A)})},mt.prototype.attachLine=function(A){if(!this.lines.length&&this.doc.cm){var y=this.doc.cm.curOp;(!y.maybeHiddenMarkers||it(y.maybeHiddenMarkers,this)==-1)&&(y.maybeUnhiddenMarkers||(y.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(A)},mt.prototype.detachLine=function(A){if(this.lines.splice(it(this.lines,A),1),!this.lines.length&&this.doc.cm){var y=this.doc.cm.curOp;(y.maybeHiddenMarkers||(y.maybeHiddenMarkers=[])).push(this)}},jt(mt);function vt(A,y,O,B,R){if(B&&B.shared)return kt(A,y,O,B,R);if(A.cm&&!A.cm.curOp)return pi(A.cm,vt)(A,y,O,B,R);var Z=new mt(A,R),Ae=or(y,O);if(B&&Ue(B,Z,!1),Ae>0||Ae==0&&Z.clearWhenEmpty!==!1)return Z;if(Z.replacedWith&&(Z.collapsed=!0,Z.widgetNode=at("span",[Z.replacedWith],"CodeMirror-widget"),B.handleMouseEvents||Z.widgetNode.setAttribute("cm-ignore-events","true"),B.insertLeft&&(Z.widgetNode.insertLeft=!0)),Z.collapsed){if(Ai(A,y.line,y,O,Z)||y.line!=O.line&&Ai(A,O.line,y,O,Z))throw new Error("Inserting collapsed marker partially overlapping an existing one");Ms()}Z.addToHistory&&Ed(A,{from:y,to:O,origin:"markText"},A.sel,NaN);var Ce=y.line,Te=A.cm,je;if(A.iter(Ce,O.line+1,function(Mt){Te&&Z.collapsed&&!Te.options.lineWrapping&&Br(Mt)==Te.display.maxLine&&(je=!0),Z.collapsed&&Ce!=y.line&&Js(Mt,0),co(Mt,new Oa(Z,Ce==y.line?y.ch:null,Ce==O.line?O.ch:null),A.cm&&A.cm.curOp),++Ce}),Z.collapsed&&A.iter(y.line,O.line+1,function(Mt){Wr(A,Mt)&&Js(Mt,0)}),Z.clearOnEnter&&Ne(Z,"beforeCursorEnter",function(){return Z.clear()}),Z.readOnly&&(Ba(),(A.history.done.length||A.history.undone.length)&&A.clearHistory()),Z.collapsed&&(Z.id=++ut,Z.atomic=!0),Te){if(je&&(Te.curOp.updateMaxLine=!0),Z.collapsed)zl(Te,y.line,O.line+1);else if(Z.className||Z.startStyle||Z.endStyle||Z.css||Z.attributes||Z.title)for(var yt=y.line;yt<=O.line;yt++)tc(Te,yt,"text");Z.atomic&&su(Te.doc),ta(Te,"markerAdded",Te,Z)}return Z}var Bt=function(A,y){this.markers=A,this.primary=y;for(var O=0;O<A.length;++O)A[O].parent=this};Bt.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var A=0;A<this.markers.length;++A)this.markers[A].clear();ta(this,"clear")}},Bt.prototype.find=function(A,y){return this.primary.find(A,y)},jt(Bt);function kt(A,y,O,B,R){B=Ue(B),B.shared=!1;var Z=[vt(A,y,O,B,R)],Ae=Z[0],Ce=B.widgetNode;return bs(A,function(Te){Ce&&(B.widgetNode=Ce.cloneNode(!0)),Z.push(vt(Te,ei(Te,y),ei(Te,O),B,R));for(var je=0;je<Te.linked.length;++je)if(Te.linked[je].isParent)return;Ae=rr(Z)}),new Bt(Z,Ae)}function Rt(A){return A.findMarks(hn(A.first,0),A.clipPos(hn(A.lastLine())),function(y){return y.parent})}function zt(A,y){for(var O=0;O<y.length;O++){var B=y[O],R=B.find(),Z=A.clipPos(R.from),Ae=A.clipPos(R.to);if(or(Z,Ae)){var Ce=vt(A,Z,Ae,B.primary,B.primary.type);B.markers.push(Ce),Ce.parent=B}}}function Tt(A){for(var y=function(B){var R=A[B],Z=[R.primary.doc];bs(R.primary.doc,function(Te){return Z.push(Te)});for(var Ae=0;Ae<R.markers.length;Ae++){var Ce=R.markers[Ae];it(Z,Ce.doc)==-1&&(Ce.parent=null,R.markers.splice(Ae--,1))}},O=0;O<A.length;O++)y(O)}var nn=0,Zt=function(A,y,O,B,R){if(!(this instanceof Zt))return new Zt(A,y,O,B,R);O==null&&(O=0),Ke.call(this,[new ke([new Na("",null)])]),this.first=O,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=O;var Z=hn(O,0);this.sel=Ga(Z),this.history=new UA(null),this.id=++nn,this.modeOption=y,this.lineSep=B,this.direction=R=="rtl"?"rtl":"ltr",this.extend=!1,typeof A=="string"&&(A=this.splitLines(A)),ka(this,{from:Z,to:Z,text:A}),ya(this,Ga(Z),Ut)};Zt.prototype=dr(Ke.prototype,{constructor:Zt,iter:function(A,y,O){O?this.iterN(A-this.first,y-A,O):this.iterN(this.first,this.first+this.size,A)},insert:function(A,y){for(var O=0,B=0;B<y.length;++B)O+=y[B].height;this.insertInner(A-this.first,y,O)},remove:function(A,y){this.removeInner(A-this.first,y)},getValue:function(A){var y=Bs(this,this.first,this.first+this.size);return A===!1?y:y.join(A||this.lineSeparator())},setValue:is(function(A){var y=hn(this.first,0),O=this.first+this.size-1;k(this,{from:y,to:hn(O,Tr(this,O).text.length),text:this.splitLines(A),origin:"setValue",full:!0},!0),this.cm&&Ls(this.cm,0,0),ya(this,Ga(y),Ut)}),replaceRange:function(A,y,O,B){y=ei(this,y),O=O?ei(this,O):y,N(this,A,y,O,B)},getRange:function(A,y,O){var B=tl(this,ei(this,A),ei(this,y));return O===!1?B:O===""?B.join(""):B.join(O||this.lineSeparator())},getLine:function(A){var y=this.getLineHandle(A);return y&&y.text},getLineHandle:function(A){if(vn(this,A))return Tr(this,A)},getLineNumber:function(A){return qe(A)},getLineHandleVisualStart:function(A){return typeof A=="number"&&(A=Tr(this,A)),Br(A)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(A){return ei(this,A)},getCursor:function(A){var y=this.sel.primary(),O;return A==null||A=="head"?O=y.head:A=="anchor"?O=y.anchor:A=="end"||A=="to"||A===!1?O=y.to():O=y.from(),O},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:is(function(A,y,O){Vu(this,ei(this,typeof A=="number"?hn(A,y||0):A),null,O)}),setSelection:is(function(A,y,O){Vu(this,ei(this,A),ei(this,y||A),O)}),extendSelection:is(function(A,y,O){kc(this,ei(this,A),y&&ei(this,y),O)}),extendSelections:is(function(A,y){Su(this,nl(this,A),y)}),extendSelectionsBy:is(function(A,y){var O=Dn(this.sel.ranges,A);Su(this,nl(this,O),y)}),setSelections:is(function(A,y,O){if(A.length){for(var B=[],R=0;R<A.length;R++)B[R]=new Ro(ei(this,A[R].anchor),ei(this,A[R].head||A[R].anchor));y==null&&(y=Math.min(A.length-1,this.sel.primIndex)),ya(this,ru(this.cm,B,y),O)}}),addSelection:is(function(A,y,O){var B=this.sel.ranges.slice(0);B.push(new Ro(ei(this,A),ei(this,y||A))),ya(this,ru(this.cm,B,B.length-1),O)}),getSelection:function(A){for(var y=this.sel.ranges,O,B=0;B<y.length;B++){var R=tl(this,y[B].from(),y[B].to());O=O?O.concat(R):R}return A===!1?O:O.join(A||this.lineSeparator())},getSelections:function(A){for(var y=[],O=this.sel.ranges,B=0;B<O.length;B++){var R=tl(this,O[B].from(),O[B].to());A!==!1&&(R=R.join(A||this.lineSeparator())),y[B]=R}return y},replaceSelection:function(A,y,O){for(var B=[],R=0;R<this.sel.ranges.length;R++)B[R]=A;this.replaceSelections(B,y,O||"+input")},replaceSelections:is(function(A,y,O){for(var B=[],R=this.sel,Z=0;Z<R.ranges.length;Z++){var Ae=R.ranges[Z];B[Z]={from:Ae.from(),to:Ae.to(),text:this.splitLines(A[Z]),origin:O}}for(var Ce=y&&y!="end"&&uc(this,B,y),Te=B.length-1;Te>=0;Te--)k(this,B[Te]);Ce?Eu(this,Ce):this.cm&&Bi(this.cm)}),undo:is(function(){c(this,"undo")}),redo:is(function(){c(this,"redo")}),undoSelection:is(function(){c(this,"undo",!0)}),redoSelection:is(function(){c(this,"redo",!0)}),setExtending:function(A){this.extend=A},getExtending:function(){return this.extend},historySize:function(){for(var A=this.history,y=0,O=0,B=0;B<A.done.length;B++)A.done[B].ranges||++y;for(var R=0;R<A.undone.length;R++)A.undone[R].ranges||++O;return{undo:y,redo:O}},clearHistory:function(){var A=this;this.history=new UA(this.history),bs(this,function(y){return y.history=A.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(A){return A&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(A){return this.history.generation==(A||this.cleanGeneration)},getHistory:function(){return{done:mA(this.history.done),undone:mA(this.history.undone)}},setHistory:function(A){var y=this.history=new UA(this.history);y.done=mA(A.done.slice(0),null,!0),y.undone=mA(A.undone.slice(0),null,!0)},setGutterMarker:is(function(A,y,O){return xe(this,A,"gutter",function(B){var R=B.gutterMarkers||(B.gutterMarkers={});return R[y]=O,!O&&ce(R)&&(B.gutterMarkers=null),!0})}),clearGutter:is(function(A){var y=this;this.iter(function(O){O.gutterMarkers&&O.gutterMarkers[A]&&xe(y,O,"gutter",function(){return O.gutterMarkers[A]=null,ce(O.gutterMarkers)&&(O.gutterMarkers=null),!0})})}),lineInfo:function(A){var y;if(typeof A=="number"){if(!vn(this,A)||(y=A,A=Tr(this,A),!A))return null}else if(y=qe(A),y==null)return null;return{line:y,handle:A,text:A.text,gutterMarkers:A.gutterMarkers,textClass:A.textClass,bgClass:A.bgClass,wrapClass:A.wrapClass,widgets:A.widgets}},addLineClass:is(function(A,y,O){return xe(this,A,y=="gutter"?"gutter":"class",function(B){var R=y=="text"?"textClass":y=="background"?"bgClass":y=="gutter"?"gutterClass":"wrapClass";if(!B[R])B[R]=O;else{if(Ee(O).test(B[R]))return!1;B[R]+=" "+O}return!0})}),removeLineClass:is(function(A,y,O){return xe(this,A,y=="gutter"?"gutter":"class",function(B){var R=y=="text"?"textClass":y=="background"?"bgClass":y=="gutter"?"gutterClass":"wrapClass",Z=B[R];if(Z)if(O==null)B[R]=null;else{var Ae=Z.match(Ee(O));if(!Ae)return!1;var Ce=Ae.index+Ae[0].length;B[R]=Z.slice(0,Ae.index)+(!Ae.index||Ce==Z.length?"":" ")+Z.slice(Ce)||null}else return!1;return!0})}),addLineWidget:is(function(A,y,O){return pt(this,A,y,O)}),removeLineWidget:function(A){A.clear()},markText:function(A,y,O){return vt(this,ei(this,A),ei(this,y),O,O&&O.type||"range")},setBookmark:function(A,y){var O={replacedWith:y&&(y.nodeType==null?y.widget:y),insertLeft:y&&y.insertLeft,clearWhenEmpty:!1,shared:y&&y.shared,handleMouseEvents:y&&y.handleMouseEvents};return A=ei(this,A),vt(this,A,A,O,"bookmark")},findMarksAt:function(A){A=ei(this,A);var y=[],O=Tr(this,A.line).markedSpans;if(O)for(var B=0;B<O.length;++B){var R=O[B];(R.from==null||R.from<=A.ch)&&(R.to==null||R.to>=A.ch)&&y.push(R.marker.parent||R.marker)}return y},findMarks:function(A,y,O){A=ei(this,A),y=ei(this,y);var B=[],R=A.line;return this.iter(A.line,y.line+1,function(Z){var Ae=Z.markedSpans;if(Ae)for(var Ce=0;Ce<Ae.length;Ce++){var Te=Ae[Ce];!(Te.to!=null&&R==A.line&&A.ch>=Te.to||Te.from==null&&R!=A.line||Te.from!=null&&R==y.line&&Te.from>=y.ch)&&(!O||O(Te.marker))&&B.push(Te.marker.parent||Te.marker)}++R}),B},getAllMarks:function(){var A=[];return this.iter(function(y){var O=y.markedSpans;if(O)for(var B=0;B<O.length;++B)O[B].from!=null&&A.push(O[B].marker)}),A},posFromIndex:function(A){var y,O=this.first,B=this.lineSeparator().length;return this.iter(function(R){var Z=R.text.length+B;if(Z>A)return y=A,!0;A-=Z,++O}),ei(this,hn(O,y))},indexFromPos:function(A){A=ei(this,A);var y=A.ch;if(A.line<this.first||A.ch<0)return 0;var O=this.lineSeparator().length;return this.iter(this.first,A.line,function(B){y+=B.text.length+O}),y},copy:function(A){var y=new Zt(Bs(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return y.scrollTop=this.scrollTop,y.scrollLeft=this.scrollLeft,y.sel=this.sel,y.extend=!1,A&&(y.history.undoDepth=this.history.undoDepth,y.setHistory(this.getHistory())),y},linkedDoc:function(A){A||(A={});var y=this.first,O=this.first+this.size;A.from!=null&&A.from>y&&(y=A.from),A.to!=null&&A.to<O&&(O=A.to);var B=new Zt(Bs(this,y,O),A.mode||this.modeOption,y,this.lineSep,this.direction);return A.sharedHist&&(B.history=this.history),(this.linked||(this.linked=[])).push({doc:B,sharedHist:A.sharedHist}),B.linked=[{doc:this,isParent:!0,sharedHist:A.sharedHist}],zt(B,Rt(this)),B},unlinkDoc:function(A){if(A instanceof Qo&&(A=A.doc),this.linked)for(var y=0;y<this.linked.length;++y){var O=this.linked[y];if(O.doc==A){this.linked.splice(y,1),A.unlinkDoc(this),Tt(Rt(this));break}}if(A.history==this.history){var B=[A.id];bs(A,function(R){return B.push(R.id)},!0),A.history=new UA(null),A.history.done=mA(this.history.done,B),A.history.undone=mA(this.history.undone,B)}},iterLinkedDocs:function(A){bs(this,A)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(A){return this.lineSep?A.split(this.lineSep):ur(A)},lineSeparator:function(){return this.lineSep||`
`},setDirection:is(function(A){A!="rtl"&&(A="ltr"),A!=this.direction&&(this.direction=A,this.iter(function(y){return y.order=null}),this.cm&&Hr(this.cm))})}),Zt.prototype.eachLine=Zt.prototype.iter;var Mn=0;function Bn(A){var y=this;if(Nn(y),!(dt(y,A)||lA(y.display,A))){xt(A),d&&(Mn=+new Date);var O=eu(y,A,!0),B=A.dataTransfer.files;if(!(!O||y.isReadOnly()))if(B&&B.length&&window.FileReader&&window.File)for(var R=B.length,Z=Array(R),Ae=0,Ce=function(){++Ae==R&&pi(y,function(){O=ei(y.doc,O);var Qt={from:O,to:O,text:y.doc.splitLines(Z.filter(function(wn){return wn!=null}).join(y.doc.lineSeparator())),origin:"paste"};k(y.doc,Qt),Eu(y.doc,Ga(ei(y.doc,O),ei(y.doc,Qa(Qt))))})()},Te=function(Qt,wn){if(y.options.allowDropFileTypes&&it(y.options.allowDropFileTypes,Qt.type)==-1){Ce();return}var Ln=new FileReader;Ln.onerror=function(){return Ce()},Ln.onload=function(){var sr=Ln.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(sr)){Ce();return}Z[wn]=sr,Ce()},Ln.readAsText(Qt)},je=0;je<B.length;je++)Te(B[je],je);else{if(y.state.draggingText&&y.doc.sel.contains(O)>-1){y.state.draggingText(A),setTimeout(function(){return y.display.input.focus()},20);return}try{var yt=A.dataTransfer.getData("Text");if(yt){var Mt;if(y.state.draggingText&&!y.state.draggingText.copy&&(Mt=y.listSelections()),Ys(y.doc,Ga(O,O)),Mt)for(var en=0;en<Mt.length;++en)N(y.doc,"",Mt[en].anchor,Mt[en].head,"drag");y.replaceSelection(yt,"around","paste"),y.display.input.focus()}}catch{}}}}function yn(A,y){if(d&&(!A.state.draggingText||+new Date-Mn<100)){gr(y);return}if(!(dt(A,y)||lA(A.display,y))&&(y.dataTransfer.setData("Text",A.getSelection()),y.dataTransfer.effectAllowed="copyMove",y.dataTransfer.setDragImage&&!z)){var O=be("img",null,null,"position: fixed; left: 0; top: 0;");O.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",P&&(O.width=O.height=1,A.display.wrapper.appendChild(O),O._top=O.offsetTop),y.dataTransfer.setDragImage(O,0,0),P&&O.parentNode.removeChild(O)}}function In(A,y){var O=eu(A,y);if(O){var B=document.createDocumentFragment();Cd(A,O,B),A.display.dragCursor||(A.display.dragCursor=be("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),A.display.lineSpace.insertBefore(A.display.dragCursor,A.display.cursorDiv)),De(A.display.dragCursor,B)}}function Nn(A){A.display.dragCursor&&(A.display.lineSpace.removeChild(A.display.dragCursor),A.display.dragCursor=null)}function Fn(A){if(document.getElementsByClassName){for(var y=document.getElementsByClassName("CodeMirror"),O=[],B=0;B<y.length;B++){var R=y[B].CodeMirror;R&&O.push(R)}O.length&&O[0].operation(function(){for(var Z=0;Z<O.length;Z++)A(O[Z])})}}var pr=!1;function ki(){pr||(Wi(),pr=!0)}function Wi(){var A;Ne(window,"resize",function(){A==null&&(A=setTimeout(function(){A=null,Fn(Lo)},100))}),Ne(window,"blur",function(){return Fn(ds)})}function Lo(A){var y=A.display;y.cachedCharWidth=y.cachedTextHeight=y.cachedPaddingH=null,y.scrollbarsClipped=!1,A.setSize()}for(var Mi={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},fs=0;fs<10;fs++)Mi[fs+48]=Mi[fs+96]=String(fs);for(var ko=65;ko<=90;ko++)Mi[ko]=String.fromCharCode(ko);for(var To=1;To<=12;To++)Mi[To+111]=Mi[To+63235]="F"+To;var vo={};vo.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},vo.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},vo.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},vo.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},vo.default=V?vo.macDefault:vo.pcDefault;function il(A){var y=A.split(/-(?!$)/);A=y[y.length-1];for(var O,B,R,Z,Ae=0;Ae<y.length-1;Ae++){var Ce=y[Ae];if(/^(cmd|meta|m)$/i.test(Ce))Z=!0;else if(/^a(lt)?$/i.test(Ce))O=!0;else if(/^(c|ctrl|control)$/i.test(Ce))B=!0;else if(/^s(hift)?$/i.test(Ce))R=!0;else throw new Error("Unrecognized modifier name: "+Ce)}return O&&(A="Alt-"+A),B&&(A="Ctrl-"+A),Z&&(A="Cmd-"+A),R&&(A="Shift-"+A),A}function Xo(A){var y={};for(var O in A)if(A.hasOwnProperty(O)){var B=A[O];if(/^(name|fallthrough|(de|at)tach)$/.test(O))continue;if(B=="..."){delete A[O];continue}for(var R=Dn(O.split(" "),il),Z=0;Z<R.length;Z++){var Ae=void 0,Ce=void 0;Z==R.length-1?(Ce=R.join(" "),Ae=B):(Ce=R.slice(0,Z+1).join(" "),Ae="...");var Te=y[Ce];if(!Te)y[Ce]=Ae;else if(Te!=Ae)throw new Error("Inconsistent bindings for "+Ce)}delete A[O]}for(var je in y)A[je]=y[je];return A}function Jo(A,y,O,B){y=Ta(y);var R=y.call?y.call(A,B):y[A];if(R===!1)return"nothing";if(R==="...")return"multi";if(R!=null&&O(R))return"handled";if(y.fallthrough){if(Object.prototype.toString.call(y.fallthrough)!="[object Array]")return Jo(A,y.fallthrough,O,B);for(var Z=0;Z<y.fallthrough.length;Z++){var Ae=Jo(A,y.fallthrough[Z],O,B);if(Ae)return Ae}}}function ol(A){var y=typeof A=="string"?A:Mi[A.keyCode];return y=="Ctrl"||y=="Alt"||y=="Shift"||y=="Mod"}function yA(A,y,O){var B=A;return y.altKey&&B!="Alt"&&(A="Alt-"+A),(he?y.metaKey:y.ctrlKey)&&B!="Ctrl"&&(A="Ctrl-"+A),(he?y.ctrlKey:y.metaKey)&&B!="Mod"&&(A="Cmd-"+A),!O&&y.shiftKey&&B!="Shift"&&(A="Shift-"+A),A}function lu(A,y){if(P&&A.keyCode==34&&A.char)return!1;var O=Mi[A.keyCode];return O==null||A.altGraphKey?!1:(A.keyCode==3&&A.code&&(O=A.code),yA(O,A,y))}function Ta(A){return typeof A=="string"?vo[A]:A}function Sl(A,y){for(var O=A.doc.sel.ranges,B=[],R=0;R<O.length;R++){for(var Z=y(O[R]);B.length&&or(Z.from,rr(B).to)<=0;){var Ae=B.pop();if(or(Ae.from,Z.from)<0){Z.from=Ae.from;break}}B.push(Z)}Io(A,function(){for(var Ce=B.length-1;Ce>=0;Ce--)N(A.doc,"",B[Ce].from,B[Ce].to,"+delete");Bi(A)})}function jA(A,y,O){var B=St(A.text,y+O,O);return B<0||B>A.text.length?null:B}function vA(A,y,O){var B=jA(A,y.ch,O);return B==null?null:new hn(y.line,B,O<0?"after":"before")}function NA(A,y,O,B,R){if(A){y.doc.direction=="rtl"&&(R=-R);var Z=ve(O,y.doc.direction);if(Z){var Ae=R<0?rr(Z):Z[0],Ce=R<0==(Ae.level==1),Te=Ce?"after":"before",je;if(Ae.level>0||y.doc.direction=="rtl"){var yt=la(y,O);je=R<0?O.text.length-1:0;var Mt=rl(y,yt,je).top;je=Ht(function(en){return rl(y,yt,en).top==Mt},R<0==(Ae.level==1)?Ae.from:Ae.to-1,je),Te=="before"&&(je=jA(O,je,1))}else je=R<0?Ae.to:Ae.from;return new hn(B,je,Te)}}return new hn(B,R<0?O.text.length:0,R<0?"before":"after")}function Aa(A,y,O,B){var R=ve(y,A.doc.direction);if(!R)return vA(y,O,B);O.ch>=y.text.length?(O.ch=y.text.length,O.sticky="before"):O.ch<=0&&(O.ch=0,O.sticky="after");var Z=Oe(R,O.ch,O.sticky),Ae=R[Z];if(A.doc.direction=="ltr"&&Ae.level%2==0&&(B>0?Ae.to>O.ch:Ae.from<O.ch))return vA(y,O,B);var Ce=function(Vn,wr){return jA(y,Vn instanceof hn?Vn.ch:Vn,wr)},Te,je=function(Vn){return A.options.lineWrapping?(Te=Te||la(A,y),rs(A,y,Te,Vn)):{begin:0,end:y.text.length}},yt=je(O.sticky=="before"?Ce(O,-1):O.ch);if(A.doc.direction=="rtl"||Ae.level==1){var Mt=Ae.level==1==B<0,en=Ce(O,Mt?1:-1);if(en!=null&&(Mt?en<=Ae.to&&en<=yt.end:en>=Ae.from&&en>=yt.begin)){var Qt=Mt?"before":"after";return new hn(O.line,en,Qt)}}var wn=function(Vn,wr,yr){for(var Or=function(zo,Ya){return Ya?new hn(O.line,Ce(zo,1),"before"):new hn(O.line,zo,"after")};Vn>=0&&Vn<R.length;Vn+=wr){var ni=R[Vn],zr=wr>0==(ni.level!=1),Hi=zr?yr.begin:Ce(yr.end,-1);if(ni.from<=Hi&&Hi<ni.to||(Hi=zr?ni.from:Ce(ni.to,-1),yr.begin<=Hi&&Hi<yr.end))return Or(Hi,zr)}},Ln=wn(Z+B,B,yt);if(Ln)return Ln;var sr=B>0?yt.end:Ce(yt.begin,-1);return sr!=null&&!(B>0&&sr==y.text.length)&&(Ln=wn(B>0?0:R.length-1,B,je(sr)),Ln)?Ln:null}var El={selectAll:Ml,singleSelection:function(A){return A.setSelection(A.getCursor("anchor"),A.getCursor("head"),Ut)},killLine:function(A){return Sl(A,function(y){if(y.empty()){var O=Tr(A.doc,y.head.line).text.length;return y.head.ch==O&&y.head.line<A.lastLine()?{from:y.head,to:hn(y.head.line+1,0)}:{from:y.head,to:hn(y.head.line,O)}}else return{from:y.from(),to:y.to()}})},deleteLine:function(A){return Sl(A,function(y){return{from:hn(y.from().line,0),to:ei(A.doc,hn(y.to().line+1,0))}})},delLineLeft:function(A){return Sl(A,function(y){return{from:hn(y.from().line,0),to:y.from()}})},delWrappedLineLeft:function(A){return Sl(A,function(y){var O=A.charCoords(y.head,"div").top+5,B=A.coordsChar({left:0,top:O},"div");return{from:B,to:y.from()}})},delWrappedLineRight:function(A){return Sl(A,function(y){var O=A.charCoords(y.head,"div").top+5,B=A.coordsChar({left:A.display.lineDiv.offsetWidth+100,top:O},"div");return{from:y.from(),to:B}})},undo:function(A){return A.undo()},redo:function(A){return A.redo()},undoSelection:function(A){return A.undoSelection()},redoSelection:function(A){return A.redoSelection()},goDocStart:function(A){return A.extendSelection(hn(A.firstLine(),0))},goDocEnd:function(A){return A.extendSelection(hn(A.lastLine()))},goLineStart:function(A){return A.extendSelectionsBy(function(y){return Pa(A,y.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(A){return A.extendSelectionsBy(function(y){return os(A,y.head)},{origin:"+move",bias:1})},goLineEnd:function(A){return A.extendSelectionsBy(function(y){return uu(A,y.head.line)},{origin:"+move",bias:-1})},goLineRight:function(A){return A.extendSelectionsBy(function(y){var O=A.cursorCoords(y.head,"div").top+5;return A.coordsChar({left:A.display.lineDiv.offsetWidth+100,top:O},"div")},Dt)},goLineLeft:function(A){return A.extendSelectionsBy(function(y){var O=A.cursorCoords(y.head,"div").top+5;return A.coordsChar({left:0,top:O},"div")},Dt)},goLineLeftSmart:function(A){return A.extendSelectionsBy(function(y){var O=A.cursorCoords(y.head,"div").top+5,B=A.coordsChar({left:0,top:O},"div");return B.ch<A.getLine(B.line).search(/\S/)?os(A,y.head):B},Dt)},goLineUp:function(A){return A.moveV(-1,"line")},goLineDown:function(A){return A.moveV(1,"line")},goPageUp:function(A){return A.moveV(-1,"page")},goPageDown:function(A){return A.moveV(1,"page")},goCharLeft:function(A){return A.moveH(-1,"char")},goCharRight:function(A){return A.moveH(1,"char")},goColumnLeft:function(A){return A.moveH(-1,"column")},goColumnRight:function(A){return A.moveH(1,"column")},goWordLeft:function(A){return A.moveH(-1,"word")},goGroupRight:function(A){return A.moveH(1,"group")},goGroupLeft:function(A){return A.moveH(-1,"group")},goWordRight:function(A){return A.moveH(1,"word")},delCharBefore:function(A){return A.deleteH(-1,"codepoint")},delCharAfter:function(A){return A.deleteH(1,"char")},delWordBefore:function(A){return A.deleteH(-1,"word")},delWordAfter:function(A){return A.deleteH(1,"word")},delGroupBefore:function(A){return A.deleteH(-1,"group")},delGroupAfter:function(A){return A.deleteH(1,"group")},indentAuto:function(A){return A.indentSelection("smart")},indentMore:function(A){return A.indentSelection("add")},indentLess:function(A){return A.indentSelection("subtract")},insertTab:function(A){return A.replaceSelection("	")},insertSoftTab:function(A){for(var y=[],O=A.listSelections(),B=A.options.tabSize,R=0;R<O.length;R++){var Z=O[R].from(),Ae=Pe(A.getLine(Z.line),Z.ch,B);y.push(tn(B-Ae%B))}A.replaceSelections(y)},defaultTab:function(A){A.somethingSelected()?A.indentSelection("add"):A.execCommand("insertTab")},transposeChars:function(A){return Io(A,function(){for(var y=A.listSelections(),O=[],B=0;B<y.length;B++)if(y[B].empty()){var R=y[B].head,Z=Tr(A.doc,R.line).text;if(Z){if(R.ch==Z.length&&(R=new hn(R.line,R.ch-1)),R.ch>0)R=new hn(R.line,R.ch+1),A.replaceRange(Z.charAt(R.ch-1)+Z.charAt(R.ch-2),hn(R.line,R.ch-2),R,"+transpose");else if(R.line>A.doc.first){var Ae=Tr(A.doc,R.line-1).text;Ae&&(R=new hn(R.line,1),A.replaceRange(Z.charAt(0)+A.doc.lineSeparator()+Ae.charAt(Ae.length-1),hn(R.line-1,Ae.length-1),R,"+transpose"))}}O.push(new Ro(R,R))}A.setSelections(O)})},newlineAndIndent:function(A){return Io(A,function(){for(var y=A.listSelections(),O=y.length-1;O>=0;O--)A.replaceRange(A.doc.lineSeparator(),y[O].anchor,y[O].head,"+input");y=A.listSelections();for(var B=0;B<y.length;B++)A.indentLine(y[B].from().line,null,!0);Bi(A)})},openLine:function(A){return A.replaceSelection(`
`,"start")},toggleOverwrite:function(A){return A.toggleOverwrite()}};function Pa(A,y){var O=Tr(A.doc,y),B=Br(O);return B!=O&&(y=qe(B)),NA(!0,A,B,y,1)}function uu(A,y){var O=Tr(A.doc,y),B=xr(O);return B!=O&&(y=qe(B)),NA(!0,A,O,y,-1)}function os(A,y){var O=Pa(A,y.line),B=Tr(A.doc,O.line),R=ve(B,A.doc.direction);if(!R||R[0].level==0){var Z=Math.max(O.ch,B.text.search(/\S/)),Ae=y.line==O.line&&y.ch<=Z&&y.ch;return hn(O.line,Ae?0:Z,O.sticky)}return O}function ss(A,y,O){if(typeof y=="string"&&(y=El[y],!y))return!1;A.display.input.ensurePolled();var B=A.display.shift,R=!1;try{A.isReadOnly()&&(A.state.suppressEdits=!0),O&&(A.display.shift=!1),R=y(A)!=ft}finally{A.display.shift=B,A.state.suppressEdits=!1}return R}function Bu(A,y,O){for(var B=0;B<A.state.keyMaps.length;B++){var R=Jo(y,A.state.keyMaps[B],O,A);if(R)return R}return A.options.extraKeys&&Jo(y,A.options.extraKeys,O,A)||Jo(y,A.options.keyMap,O,A)}var $s=new Be;function Hd(A,y,O,B){var R=A.state.keySeq;if(R){if(ol(y))return"handled";if(/\'$/.test(y)?A.state.keySeq=null:$s.set(50,function(){A.state.keySeq==R&&(A.state.keySeq=null,A.display.input.reset())}),hf(A,R+" "+y,O,B))return!0}return hf(A,y,O,B)}function hf(A,y,O,B){var R=Bu(A,y,B);return R=="multi"&&(A.state.keySeq=y),R=="handled"&&ta(A,"keyHandled",A,y,O),(R=="handled"||R=="multi")&&(xt(O),Gu(A)),!!R}function Zd(A,y){var O=lu(y,!0);return O?y.shiftKey&&!A.state.keySeq?Hd(A,"Shift-"+O,y,function(B){return ss(A,B,!0)})||Hd(A,O,y,function(B){if(typeof B=="string"?/^go[A-Z]/.test(B):B.motion)return ss(A,B)}):Hd(A,O,y,function(B){return ss(A,B)}):!1}function Op(A,y,O){return Hd(A,"'"+O+"'",y,function(B){return ss(A,B,!0)})}var dc=null;function hc(A){var y=this;if(!(A.target&&A.target!=y.display.input.getField())&&(y.curOp.focus=We(Yt(y)),!dt(y,A))){d&&g<11&&A.keyCode==27&&(A.returnValue=!1);var O=A.keyCode;y.display.shift=O==16||A.shiftKey;var B=Zd(y,A);P&&(dc=B?O:null,!B&&O==88&&!Ma&&(V?A.metaKey:A.ctrlKey)&&y.replaceSelection("",null,"cut")),i&&!V&&!B&&O==46&&A.shiftKey&&!A.ctrlKey&&document.execCommand&&document.execCommand("cut"),O==18&&!/\bCodeMirror-crosshair\b/.test(y.display.lineDiv.className)&&va(y)}}function va(A){var y=A.display.lineDiv;Me(y,"CodeMirror-crosshair");function O(B){(B.keyCode==18||!B.altKey)&&(me(y,"CodeMirror-crosshair"),rt(document,"keyup",O),rt(document,"mouseover",O))}Ne(document,"keyup",O),Ne(document,"mouseover",O)}function Hu(A){A.keyCode==16&&(this.doc.sel.shift=!1),dt(this,A)}function Jc(A){var y=this;if(!(A.target&&A.target!=y.display.input.getField())&&!(lA(y.display,A)||dt(y,A)||A.ctrlKey&&!A.altKey||V&&A.metaKey)){var O=A.keyCode,B=A.charCode;if(P&&O==dc){dc=null,xt(A);return}if(!(P&&(!A.which||A.which<10)&&Zd(y,A))){var R=String.fromCharCode(B??O);R!="\b"&&(Op(y,A,R)||y.display.input.onKeyPress(A))}}}var Vf=400,ed=function(A,y,O){this.time=A,this.pos=y,this.button=O};ed.prototype.compare=function(A,y,O){return this.time+Vf>A&&or(y,this.pos)==0&&O==this.button};var CA,pl;function ff(A,y){var O=+new Date;return pl&&pl.compare(O,A,y)?(CA=pl=null,"triple"):CA&&CA.compare(O,A,y)?(pl=new ed(O,A,y),CA=null,"double"):(CA=new ed(O,A,y),pl=null,"single")}function Hf(A){var y=this,O=y.display;if(!(dt(y,A)||O.activeTouch&&O.input.supportsTouch())){if(O.input.ensurePolled(),O.shift=A.shiftKey,lA(O,A)){b||(O.scroller.draggable=!1,setTimeout(function(){return O.scroller.draggable=!0},100));return}if(!nh(y,A)){var B=eu(y,A),R=on(A),Z=B?ff(B,R):"single";Lt(y).focus(),R==1&&y.state.selectingText&&y.state.selectingText(A),!(B&&Zf(y,R,B,Z,A))&&(R==1?B?Th(y,B,Z,A):Er(A)==O.scroller&&xt(A):R==2?(B&&kc(y.doc,B),setTimeout(function(){return O.input.focus()},20)):R==3&&(pe?y.display.input.onContextMenu(A):rc(y)))}}}function Zf(A,y,O,B,R){var Z="Click";return B=="double"?Z="Double"+Z:B=="triple"&&(Z="Triple"+Z),Z=(y==1?"Left":y==2?"Middle":"Right")+Z,Hd(A,yA(Z,R),R,function(Ae){if(typeof Ae=="string"&&(Ae=El[Ae]),!Ae)return!1;var Ce=!1;try{A.isReadOnly()&&(A.state.suppressEdits=!0),Ce=Ae(A,O)!=ft}finally{A.state.suppressEdits=!1}return Ce})}function Xd(A,y,O){var B=A.getOption("configureMouse"),R=B?B(A,y,O):{};if(R.unit==null){var Z=ne?O.shiftKey&&O.metaKey:O.altKey;R.unit=Z?"rectangle":y=="single"?"char":y=="double"?"word":"line"}return(R.extend==null||A.doc.extend)&&(R.extend=A.doc.extend||O.shiftKey),R.addNew==null&&(R.addNew=V?O.metaKey:O.ctrlKey),R.moveOnDrag==null&&(R.moveOnDrag=!(V?O.altKey:O.ctrlKey)),R}function Th(A,y,O,B){d?setTimeout(Kt($c,A),0):A.curOp.focus=We(Yt(A));var R=Xd(A,O,B),Z=A.doc.sel,Ae;A.options.dragDrop&&Rn&&!A.isReadOnly()&&O=="single"&&(Ae=Z.contains(y))>-1&&(or((Ae=Z.ranges[Ae]).from(),y)<0||y.xRel>0)&&(or(Ae.to(),y)>0||y.xRel<0)?Jd(A,B,y,R):th(A,B,y,R)}function Jd(A,y,O,B){var R=A.display,Z=!1,Ae=pi(A,function(je){b&&(R.scroller.draggable=!1),A.state.draggingText=!1,A.state.delayingBlurEvent&&(A.hasFocus()?A.state.delayingBlurEvent=!1:rc(A)),rt(R.wrapper.ownerDocument,"mouseup",Ae),rt(R.wrapper.ownerDocument,"mousemove",Ce),rt(R.scroller,"dragstart",Te),rt(R.scroller,"drop",Ae),Z||(xt(je),B.addNew||kc(A.doc,O,null,null,B.extend),b&&!z||d&&g==9?setTimeout(function(){R.wrapper.ownerDocument.body.focus({preventScroll:!0}),R.input.focus()},20):R.input.focus())}),Ce=function(je){Z=Z||Math.abs(y.clientX-je.clientX)+Math.abs(y.clientY-je.clientY)>=10},Te=function(){return Z=!0};b&&(R.scroller.draggable=!0),A.state.draggingText=Ae,Ae.copy=!B.moveOnDrag,Ne(R.wrapper.ownerDocument,"mouseup",Ae),Ne(R.wrapper.ownerDocument,"mousemove",Ce),Ne(R.scroller,"dragstart",Te),Ne(R.scroller,"drop",Ae),A.state.delayingBlurEvent=!0,setTimeout(function(){return R.input.focus()},20),R.scroller.dragDrop&&R.scroller.dragDrop()}function eh(A,y,O){if(O=="char")return new Ro(y,y);if(O=="word")return A.findWordAt(y);if(O=="line")return new Ro(hn(y.line,0),ei(A.doc,hn(y.line+1,0)));var B=O(A,y);return new Ro(B.from,B.to)}function th(A,y,O,B){d&&rc(A);var R=A.display,Z=A.doc;xt(y);var Ae,Ce,Te=Z.sel,je=Te.ranges;if(B.addNew&&!B.extend?(Ce=Z.sel.contains(O),Ce>-1?Ae=je[Ce]:Ae=new Ro(O,O)):(Ae=Z.sel.primary(),Ce=Z.sel.primIndex),B.unit=="rectangle")B.addNew||(Ae=new Ro(O,O)),O=eu(A,y,!0,!0),Ce=-1;else{var yt=eh(A,O,B.unit);B.extend?Ae=zs(Ae,yt.anchor,yt.head,B.extend):Ae=yt}B.addNew?Ce==-1?(Ce=je.length,ya(Z,ru(A,je.concat([Ae]),Ce),{scroll:!1,origin:"*mouse"})):je.length>1&&je[Ce].empty()&&B.unit=="char"&&!B.extend?(ya(Z,ru(A,je.slice(0,Ce).concat(je.slice(Ce+1)),0),{scroll:!1,origin:"*mouse"}),Te=Z.sel):qa(Z,Ce,Ae,rn):(Ce=0,ya(Z,new _s([Ae],0),rn),Te=Z.sel);var Mt=O;function en(yr){if(or(Mt,yr)!=0)if(Mt=yr,B.unit=="rectangle"){for(var Or=[],ni=A.options.tabSize,zr=Pe(Tr(Z,O.line).text,O.ch,ni),Hi=Pe(Tr(Z,yr.line).text,yr.ch,ni),zo=Math.min(zr,Hi),Ya=Math.max(zr,Hi),ia=Math.min(O.line,yr.line),Ca=Math.min(A.lastLine(),Math.max(O.line,yr.line));ia<=Ca;ia++){var $a=Tr(Z,ia).text,_a=_n($a,zo,ni);zo==Ya?Or.push(new Ro(hn(ia,_a),hn(ia,_a))):$a.length>_a&&Or.push(new Ro(hn(ia,_a),hn(ia,_n($a,Ya,ni))))}Or.length||Or.push(new Ro(O,O)),ya(Z,ru(A,Te.ranges.slice(0,Ce).concat(Or),Ce),{origin:"*mouse",scroll:!1}),A.scrollIntoView(yr)}else{var du=Ae,Da=eh(A,yr,B.unit),Ra=du.anchor,as;or(Da.anchor,Ra)>0?(as=Da.head,Ra=Rs(du.from(),Da.anchor)):(as=Da.anchor,Ra=Cs(du.to(),Da.head));var yi=Te.ranges.slice(0);yi[Ce]=Id(A,new Ro(ei(Z,Ra),as)),ya(Z,ru(A,yi,Ce),rn)}}var Qt=R.wrapper.getBoundingClientRect(),wn=0;function Ln(yr){var Or=++wn,ni=eu(A,yr,!0,B.unit=="rectangle");if(ni)if(or(ni,Mt)!=0){A.curOp.focus=We(Yt(A)),en(ni);var zr=Qu(R,Z);(ni.line>=zr.to||ni.line<zr.from)&&setTimeout(pi(A,function(){wn==Or&&Ln(yr)}),150)}else{var Hi=yr.clientY<Qt.top?-20:yr.clientY>Qt.bottom?20:0;Hi&&setTimeout(pi(A,function(){wn==Or&&(R.scroller.scrollTop+=Hi,Ln(yr))}),50)}}function sr(yr){A.state.selectingText=!1,wn=1/0,yr&&(xt(yr),R.input.focus()),rt(R.wrapper.ownerDocument,"mousemove",Vn),rt(R.wrapper.ownerDocument,"mouseup",wr),Z.history.lastSelOrigin=null}var Vn=pi(A,function(yr){yr.buttons===0||!on(yr)?sr(yr):Ln(yr)}),wr=pi(A,sr);A.state.selectingText=wr,Ne(R.wrapper.ownerDocument,"mousemove",Vn),Ne(R.wrapper.ownerDocument,"mouseup",wr)}function Id(A,y){var O=y.anchor,B=y.head,R=Tr(A.doc,O.line);if(or(O,B)==0&&O.sticky==B.sticky)return y;var Z=ve(R);if(!Z)return y;var Ae=Oe(Z,O.ch,O.sticky),Ce=Z[Ae];if(Ce.from!=O.ch&&Ce.to!=O.ch)return y;var Te=Ae+(Ce.from==O.ch==(Ce.level!=1)?0:1);if(Te==0||Te==Z.length)return y;var je;if(B.line!=O.line)je=(B.line-O.line)*(A.doc.direction=="ltr"?1:-1)>0;else{var yt=Oe(Z,B.ch,B.sticky),Mt=yt-Ae||(B.ch-O.ch)*(Ce.level==1?-1:1);yt==Te-1||yt==Te?je=Mt<0:je=Mt>0}var en=Z[Te+(je?-1:0)],Qt=je==(en.level==1),wn=Qt?en.from:en.to,Ln=Qt?"after":"before";return O.ch==wn&&O.sticky==Ln?y:new Ro(new hn(O.line,wn,Ln),B)}function pf(A,y,O,B){var R,Z;if(y.touches)R=y.touches[0].clientX,Z=y.touches[0].clientY;else try{R=y.clientX,Z=y.clientY}catch{return!1}if(R>=Math.floor(A.display.gutters.getBoundingClientRect().right))return!1;B&&xt(y);var Ae=A.display,Ce=Ae.lineDiv.getBoundingClientRect();if(Z>Ce.bottom||!Gt(A,O))return On(y);Z-=Ce.top-Ae.viewOffset;for(var Te=0;Te<A.display.gutterSpecs.length;++Te){var je=Ae.gutters.childNodes[Te];if(je&&je.getBoundingClientRect().right>=R){var yt=wt(A.doc,Z),Mt=A.display.gutterSpecs[Te];return ct(A,O,A,yt,Mt.className,y),On(y)}}}function nh(A,y){return pf(A,y,"gutterClick",!0)}function mf(A,y){lA(A.display,y)||Xf(A,y)||dt(A,y,"contextmenu")||pe||A.display.input.onContextMenu(y)}function Xf(A,y){return Gt(A,"gutterContextMenu")?pf(A,y,"gutterContextMenu",!1):!1}function fm(A){A.display.wrapper.className=A.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+A.options.theme.replace(/(^|\s)\s*/g," cm-s-"),wc(A)}var kd={toString:function(){return"CodeMirror.Init"}},gf={},Bl={};function Au(A){var y=A.optionHandlers;function O(B,R,Z,Ae){A.defaults[B]=R,Z&&(y[B]=Ae?function(Ce,Te,je){je!=kd&&Z(Ce,Te,je)}:Z)}A.defineOption=O,A.Init=kd,O("value","",function(B,R){return B.setValue(R)},!0),O("mode",null,function(B,R){B.doc.modeOption=R,Vd(B)},!0),O("indentUnit",2,Vd,!0),O("indentWithTabs",!1),O("smartIndent",!0),O("tabSize",4,function(B){LA(B),wc(B),zl(B)},!0),O("lineSeparator",null,function(B,R){if(B.doc.lineSep=R,!!R){var Z=[],Ae=B.doc.first;B.doc.iter(function(Te){for(var je=0;;){var yt=Te.text.indexOf(R,je);if(yt==-1)break;je=yt+R.length,Z.push(hn(Ae,yt))}Ae++});for(var Ce=Z.length-1;Ce>=0;Ce--)N(B.doc,R,Z[Ce],hn(Z[Ce].line,Z[Ce].ch+R.length))}}),O("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\u202d\u202e\u2066\u2067\u2069\ufeff\ufff9-\ufffc]/g,function(B,R,Z){B.state.specialChars=new RegExp(R.source+(R.test("	")?"":"|	"),"g"),Z!=kd&&B.refresh()}),O("specialCharPlaceholder",Uu,function(B){return B.refresh()},!0),O("electricChars",!0),O("inputStyle",te?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),O("spellcheck",!1,function(B,R){return B.getInputField().spellcheck=R},!0),O("autocorrect",!1,function(B,R){return B.getInputField().autocorrect=R},!0),O("autocapitalize",!1,function(B,R){return B.getInputField().autocapitalize=R},!0),O("rtlMoveVisually",!G),O("wholeLineUpdateBefore",!0),O("theme","default",function(B){fm(B),hl(B)},!0),O("keyMap","default",function(B,R,Z){var Ae=Ta(R),Ce=Z!=kd&&Ta(Z);Ce&&Ce.detach&&Ce.detach(B,Ae),Ae.attach&&Ae.attach(B,Ce||null)}),O("extraKeys",null),O("configureMouse",null),O("lineWrapping",!1,kp,!0),O("gutters",[],function(B,R){B.display.gutterSpecs=nu(R,B.options.lineNumbers),hl(B)},!0),O("fixedGutter",!0,function(B,R){B.display.gutters.style.left=R?Oo(B.display)+"px":"0",B.refresh()},!0),O("coverGutterNextToScrollbar",!1,function(B){return qu(B)},!0),O("scrollbarStyle","native",function(B){PA(B),qu(B),B.display.scrollbars.setScrollTop(B.doc.scrollTop),B.display.scrollbars.setScrollLeft(B.doc.scrollLeft)},!0),O("lineNumbers",!1,function(B,R){B.display.gutterSpecs=nu(B.options.gutters,R),hl(B)},!0),O("firstLineNumber",1,hl,!0),O("lineNumberFormatter",function(B){return B},hl,!0),O("showCursorWhenSelecting",!1,Wa,!0),O("resetSelectionOnContextMenu",!0),O("lineWiseCopyCut",!0),O("pasteLinesPerSelection",!0),O("selectionsMayTouch",!1),O("readOnly",!1,function(B,R){R=="nocursor"&&(ds(B),B.display.input.blur()),B.display.input.readOnlyChanged(R)}),O("screenReaderLabel",null,function(B,R){R=R===""?null:R,B.display.input.screenReaderLabelChanged(R)}),O("disableInput",!1,function(B,R){R||B.display.input.reset()},!0),O("dragDrop",!0,Ip),O("allowDropFileTypes",null),O("cursorBlinkRate",530),O("cursorScrollMargin",0),O("cursorHeight",1,Wa,!0),O("singleCursorHeightPerLine",!0,Wa,!0),O("workTime",100),O("workDelay",100),O("flattenSpans",!0,LA,!0),O("addModeClass",!1,LA,!0),O("pollInterval",100),O("undoDepth",200,function(B,R){return B.doc.history.undoDepth=R}),O("historyEventDelay",1250),O("viewportMargin",10,function(B){return B.refresh()},!0),O("maxHighlightLength",1e4,LA,!0),O("moveInputWithCursor",!0,function(B,R){R||B.display.input.resetPosition()}),O("tabindex",null,function(B,R){return B.display.input.getField().tabIndex=R||""}),O("autofocus",null),O("direction","ltr",function(B,R){return B.doc.setDirection(R)},!0),O("phrases",null)}function Ip(A,y,O){var B=O&&O!=kd;if(!y!=!B){var R=A.display.dragFunctions,Z=y?Ne:rt;Z(A.display.scroller,"dragstart",R.start),Z(A.display.scroller,"dragenter",R.enter),Z(A.display.scroller,"dragover",R.over),Z(A.display.scroller,"dragleave",R.leave),Z(A.display.scroller,"drop",R.drop)}}function kp(A){A.options.lineWrapping?(Me(A.display.wrapper,"CodeMirror-wrap"),A.display.sizer.style.minWidth="",A.display.sizerWidth=null):(me(A.display.wrapper,"CodeMirror-wrap"),pa(A)),yd(A),zl(A),wc(A),setTimeout(function(){return qu(A)},100)}function Qo(A,y){var O=this;if(!(this instanceof Qo))return new Qo(A,y);this.options=y=y?Ue(y):{},Ue(gf,y,!1);var B=y.value;typeof B=="string"?B=new Zt(B,y.mode,null,y.lineSeparator,y.direction):y.mode&&(B.modeOption=y.mode),this.doc=B;var R=new Qo.inputStyles[y.inputStyle](this),Z=this.display=new kh(A,B,R,y);Z.wrapper.CodeMirror=this,fm(this),y.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),PA(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new Be,keySeq:null,specialChars:null},y.autofocus&&!te&&Z.input.focus(),d&&g<11&&setTimeout(function(){return O.display.input.reset(!0)},20),Ph(this),ki(),Yu(this),this.curOp.forceUpdate=!0,hs(this,B),y.autofocus&&!te||this.hasFocus()?setTimeout(function(){O.hasFocus()&&!O.state.focused&&Oh(O)},20):ds(this);for(var Ae in Bl)Bl.hasOwnProperty(Ae)&&Bl[Ae](this,y[Ae],kd);ac(this),y.finishInit&&y.finishInit(this);for(var Ce=0;Ce<cu.length;++Ce)cu[Ce](this);$u(this),b&&y.lineWrapping&&getComputedStyle(Z.lineDiv).textRendering=="optimizelegibility"&&(Z.lineDiv.style.textRendering="auto")}Qo.defaults=gf,Qo.optionHandlers=Bl;function Ph(A){var y=A.display;Ne(y.scroller,"mousedown",pi(A,Hf)),d&&g<11?Ne(y.scroller,"dblclick",pi(A,function(Te){if(!dt(A,Te)){var je=eu(A,Te);if(!(!je||nh(A,Te)||lA(A.display,Te))){xt(Te);var yt=A.findWordAt(je);kc(A.doc,yt.anchor,yt.head)}}})):Ne(y.scroller,"dblclick",function(Te){return dt(A,Te)||xt(Te)}),Ne(y.scroller,"contextmenu",function(Te){return mf(A,Te)}),Ne(y.input.getField(),"contextmenu",function(Te){y.scroller.contains(Te.target)||mf(A,Te)});var O,B={end:0};function R(){y.activeTouch&&(O=setTimeout(function(){return y.activeTouch=null},1e3),B=y.activeTouch,B.end=+new Date)}function Z(Te){if(Te.touches.length!=1)return!1;var je=Te.touches[0];return je.radiusX<=1&&je.radiusY<=1}function Ae(Te,je){if(je.left==null)return!0;var yt=je.left-Te.left,Mt=je.top-Te.top;return yt*yt+Mt*Mt>20*20}Ne(y.scroller,"touchstart",function(Te){if(!dt(A,Te)&&!Z(Te)&&!nh(A,Te)){y.input.ensurePolled(),clearTimeout(O);var je=+new Date;y.activeTouch={start:je,moved:!1,prev:je-B.end<=300?B:null},Te.touches.length==1&&(y.activeTouch.left=Te.touches[0].pageX,y.activeTouch.top=Te.touches[0].pageY)}}),Ne(y.scroller,"touchmove",function(){y.activeTouch&&(y.activeTouch.moved=!0)}),Ne(y.scroller,"touchend",function(Te){var je=y.activeTouch;if(je&&!lA(y,Te)&&je.left!=null&&!je.moved&&new Date-je.start<300){var yt=A.coordsChar(y.activeTouch,"page"),Mt;!je.prev||Ae(je,je.prev)?Mt=new Ro(yt,yt):!je.prev.prev||Ae(je,je.prev.prev)?Mt=A.findWordAt(yt):Mt=new Ro(hn(yt.line,0),ei(A.doc,hn(yt.line+1,0))),A.setSelection(Mt.anchor,Mt.head),A.focus(),xt(Te)}R()}),Ne(y.scroller,"touchcancel",R),Ne(y.scroller,"scroll",function(){y.scroller.clientHeight&&(Sc(A,y.scroller.scrollTop),cl(A,y.scroller.scrollLeft,!0),ct(A,"scroll",A))}),Ne(y.scroller,"mousewheel",function(Te){return lc(A,Te)}),Ne(y.scroller,"DOMMouseScroll",function(Te){return lc(A,Te)}),Ne(y.wrapper,"scroll",function(){return y.wrapper.scrollTop=y.wrapper.scrollLeft=0}),y.dragFunctions={enter:function(Te){dt(A,Te)||gr(Te)},over:function(Te){dt(A,Te)||(In(A,Te),gr(Te))},start:function(Te){return yn(A,Te)},drop:pi(A,Bn),leave:function(Te){dt(A,Te)||Nn(A)}};var Ce=y.input.getField();Ne(Ce,"keyup",function(Te){return Hu.call(A,Te)}),Ne(Ce,"keydown",pi(A,hc)),Ne(Ce,"keypress",pi(A,Jc)),Ne(Ce,"focus",function(Te){return Oh(A,Te)}),Ne(Ce,"blur",function(Te){return ds(A,Te)})}var cu=[];Qo.defineInitHook=function(A){return cu.push(A)};function rh(A,y,O,B){var R=A.doc,Z;O==null&&(O="add"),O=="smart"&&(R.mode.indent?Z=Rr(A,y).state:O="prev");var Ae=A.options.tabSize,Ce=Tr(R,y),Te=Pe(Ce.text,null,Ae);Ce.stateAfter&&(Ce.stateAfter=null);var je=Ce.text.match(/^\s*/)[0],yt;if(!B&&!/\S/.test(Ce.text))yt=0,O="not";else if(O=="smart"&&(yt=R.mode.indent(Z,Ce.text.slice(je.length),Ce.text),yt==ft||yt>150)){if(!B)return;O="prev"}O=="prev"?y>R.first?yt=Pe(Tr(R,y-1).text,null,Ae):yt=0:O=="add"?yt=Te+A.options.indentUnit:O=="subtract"?yt=Te-A.options.indentUnit:typeof O=="number"&&(yt=Te+O),yt=Math.max(0,yt);var Mt="",en=0;if(A.options.indentWithTabs)for(var Qt=Math.floor(yt/Ae);Qt;--Qt)en+=Ae,Mt+="	";if(en<yt&&(Mt+=tn(yt-en)),Mt!=je)return N(R,Mt,hn(y,0),hn(y,je.length),"+input"),Ce.stateAfter=null,!0;for(var wn=0;wn<R.sel.ranges.length;wn++){var Ln=R.sel.ranges[wn];if(Ln.head.line==y&&Ln.head.ch<je.length){var sr=hn(y,je.length);qa(R,wn,new Ro(sr,sr));break}}}var Zu=null;function yf(A){Zu=A}function Jf(A,y,O,B,R){var Z=A.doc;A.display.shift=!1,B||(B=Z.sel);var Ae=+new Date-200,Ce=R=="paste"||A.state.pasteIncoming>Ae,Te=ur(y),je=null;if(Ce&&B.ranges.length>1)if(Zu&&Zu.text.join(`
`)==y){if(B.ranges.length%Zu.text.length==0){je=[];for(var yt=0;yt<Zu.text.length;yt++)je.push(Z.splitLines(Zu.text[yt]))}}else Te.length==B.ranges.length&&A.options.pasteLinesPerSelection&&(je=Dn(Te,function(Vn){return[Vn]}));for(var Mt=A.curOp.updateInput,en=B.ranges.length-1;en>=0;en--){var Qt=B.ranges[en],wn=Qt.from(),Ln=Qt.to();Qt.empty()&&(O&&O>0?wn=hn(wn.line,wn.ch-O):A.state.overwrite&&!Ce?Ln=hn(Ln.line,Math.min(Tr(Z,Ln.line).text.length,Ln.ch+rr(Te).length)):Ce&&Zu&&Zu.lineWise&&Zu.text.join(`
`)==Te.join(`
`)&&(wn=Ln=hn(wn.line,0)));var sr={from:wn,to:Ln,text:je?je[en%je.length]:Te,origin:R||(Ce?"paste":A.state.cutIncoming>Ae?"cut":"+input")};k(A.doc,sr),ta(A,"inputRead",A,sr)}y&&!Ce&&vf(A,y),Bi(A),A.curOp.updateInput<2&&(A.curOp.updateInput=Mt),A.curOp.typing=!0,A.state.pasteIncoming=A.state.cutIncoming=-1}function Kc(A,y){var O=A.clipboardData&&A.clipboardData.getData("Text");if(O)return A.preventDefault(),!y.isReadOnly()&&!y.options.disableInput&&y.hasFocus()&&Io(y,function(){return Jf(y,O,0,null,"paste")}),!0}function vf(A,y){if(!(!A.options.electricChars||!A.options.smartIndent))for(var O=A.doc.sel,B=O.ranges.length-1;B>=0;B--){var R=O.ranges[B];if(!(R.head.ch>100||B&&O.ranges[B-1].head.line==R.head.line)){var Z=A.getModeAt(R.head),Ae=!1;if(Z.electricChars){for(var Ce=0;Ce<Z.electricChars.length;Ce++)if(y.indexOf(Z.electricChars.charAt(Ce))>-1){Ae=rh(A,R.head.line,"smart");break}}else Z.electricInput&&Z.electricInput.test(Tr(A.doc,R.head.line).text.slice(0,R.head.ch))&&(Ae=rh(A,R.head.line,"smart"));Ae&&ta(A,"electricInput",A,R.head.line)}}}function Cf(A){for(var y=[],O=[],B=0;B<A.doc.sel.ranges.length;B++){var R=A.doc.sel.ranges[B].head.line,Z={anchor:hn(R,0),head:hn(R+1,0)};O.push(Z),y.push(A.getRange(Z.anchor,Z.head))}return{text:y,ranges:O}}function _f(A,y,O,B){A.setAttribute("autocorrect",O?"on":"off"),A.setAttribute("autocapitalize",B?"on":"off"),A.setAttribute("spellcheck",!!y)}function Td(){var A=be("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),y=be("div",[A],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return b?A.style.width="1000px":A.setAttribute("wrap","off"),Y&&(A.style.border="1px solid black"),y}function Dc(A){var y=A.optionHandlers,O=A.helpers={};A.prototype={constructor:A,focus:function(){Lt(this).focus(),this.display.input.focus()},setOption:function(B,R){var Z=this.options,Ae=Z[B];Z[B]==R&&B!="mode"||(Z[B]=R,y.hasOwnProperty(B)&&pi(this,y[B])(this,R,Ae),ct(this,"optionChange",this,B))},getOption:function(B){return this.options[B]},getDoc:function(){return this.doc},addKeyMap:function(B,R){this.state.keyMaps[R?"push":"unshift"](Ta(B))},removeKeyMap:function(B){for(var R=this.state.keyMaps,Z=0;Z<R.length;++Z)if(R[Z]==B||R[Z].name==B)return R.splice(Z,1),!0},addOverlay:ii(function(B,R){var Z=B.token?B:A.getMode(this.options,B);if(Z.startState)throw new Error("Overlays may not be stateful.");pn(this.state.overlays,{mode:Z,modeSpec:B,opaque:R&&R.opaque,priority:R&&R.priority||0},function(Ae){return Ae.priority}),this.state.modeGen++,zl(this)}),removeOverlay:ii(function(B){for(var R=this.state.overlays,Z=0;Z<R.length;++Z){var Ae=R[Z].modeSpec;if(Ae==B||typeof B=="string"&&Ae.name==B){R.splice(Z,1),this.state.modeGen++,zl(this);return}}}),indentLine:ii(function(B,R,Z){typeof R!="string"&&typeof R!="number"&&(R==null?R=this.options.smartIndent?"smart":"prev":R=R?"add":"subtract"),vn(this.doc,B)&&rh(this,B,R,Z)}),indentSelection:ii(function(B){for(var R=this.doc.sel.ranges,Z=-1,Ae=0;Ae<R.length;Ae++){var Ce=R[Ae];if(Ce.empty())Ce.head.line>Z&&(rh(this,Ce.head.line,B,!0),Z=Ce.head.line,Ae==this.doc.sel.primIndex&&Bi(this));else{var Te=Ce.from(),je=Ce.to(),yt=Math.max(Z,Te.line);Z=Math.min(this.lastLine(),je.line-(je.ch?0:1))+1;for(var Mt=yt;Mt<Z;++Mt)rh(this,Mt,B);var en=this.doc.sel.ranges;Te.ch==0&&R.length==en.length&&en[Ae].from().ch>0&&qa(this.doc,Ae,new Ro(Te,en[Ae].to()),Ut)}}}),getTokenAt:function(B,R){return Ws(this,B,R)},getLineTokens:function(B,R){return Ws(this,hn(B),R,!0)},getTokenTypeAt:function(B){B=ei(this.doc,B);var R=Ea(this,Tr(this.doc,B.line)),Z=0,Ae=(R.length-1)/2,Ce=B.ch,Te;if(Ce==0)Te=R[2];else for(;;){var je=Z+Ae>>1;if((je?R[je*2-1]:0)>=Ce)Ae=je;else if(R[je*2+1]<Ce)Z=je+1;else{Te=R[je*2+2];break}}var yt=Te?Te.indexOf("overlay "):-1;return yt<0?Te:yt==0?null:Te.slice(0,yt-1)},getModeAt:function(B){var R=this.doc.mode;return R.innerMode?A.innerMode(R,this.getTokenAt(B).state).mode:R},getHelper:function(B,R){return this.getHelpers(B,R)[0]},getHelpers:function(B,R){var Z=[];if(!O.hasOwnProperty(R))return Z;var Ae=O[R],Ce=this.getModeAt(B);if(typeof Ce[R]=="string")Ae[Ce[R]]&&Z.push(Ae[Ce[R]]);else if(Ce[R])for(var Te=0;Te<Ce[R].length;Te++){var je=Ae[Ce[R][Te]];je&&Z.push(je)}else Ce.helperType&&Ae[Ce.helperType]?Z.push(Ae[Ce.helperType]):Ae[Ce.name]&&Z.push(Ae[Ce.name]);for(var yt=0;yt<Ae._global.length;yt++){var Mt=Ae._global[yt];Mt.pred(Ce,this)&&it(Z,Mt.val)==-1&&Z.push(Mt.val)}return Z},getStateAfter:function(B,R){var Z=this.doc;return B=SA(Z,B??Z.first+Z.size-1),Rr(this,B+1,R).state},cursorCoords:function(B,R){var Z,Ae=this.doc.sel.primary();return B==null?Z=Ae.head:typeof B=="object"?Z=ei(this.doc,B):Z=B?Ae.from():Ae.to(),ln(this,Z,R||"page")},charCoords:function(B,R){return En(this,ei(this.doc,B),R||"page")},coordsChar:function(B,R){return B=Jt(this,B,R||"page"),ho(this,B.left,B.top)},lineAtHeight:function(B,R){return B=Jt(this,{top:B,left:0},R||"page").top,wt(this.doc,B+this.display.viewOffset)},heightAtLine:function(B,R,Z){var Ae=!1,Ce;if(typeof B=="number"){var Te=this.doc.first+this.doc.size-1;B<this.doc.first?B=this.doc.first:B>Te&&(B=Te,Ae=!0),Ce=Tr(this.doc,B)}else Ce=B;return Jl(this,Ce,{top:0,left:0},R||"page",Z||Ae).top+(Ae?this.doc.height-Di(Ce):0)},defaultTextHeight:function(){return Ul(this.display)},defaultCharWidth:function(){return Wu(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(B,R,Z,Ae,Ce){var Te=this.display;B=ln(this,ei(this.doc,B));var je=B.bottom,yt=B.left;if(R.style.position="absolute",R.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(R),Te.sizer.appendChild(R),Ae=="over")je=B.top;else if(Ae=="above"||Ae=="near"){var Mt=Math.max(Te.wrapper.clientHeight,this.doc.height),en=Math.max(Te.sizer.clientWidth,Te.lineSpace.clientWidth);(Ae=="above"||B.bottom+R.offsetHeight>Mt)&&B.top>R.offsetHeight?je=B.top-R.offsetHeight:B.bottom+R.offsetHeight<=Mt&&(je=B.bottom),yt+R.offsetWidth>en&&(yt=en-R.offsetWidth)}R.style.top=je+"px",R.style.left=R.style.right="",Ce=="right"?(yt=Te.sizer.clientWidth-R.offsetWidth,R.style.right="0px"):(Ce=="left"?yt=0:Ce=="middle"&&(yt=(Te.sizer.clientWidth-R.offsetWidth)/2),R.style.left=yt+"px"),Z&&ic(this,{left:yt,top:je,right:yt+R.offsetWidth,bottom:je+R.offsetHeight})},triggerOnKeyDown:ii(hc),triggerOnKeyPress:ii(Jc),triggerOnKeyUp:Hu,triggerOnMouseDown:ii(Hf),execCommand:function(B){if(El.hasOwnProperty(B))return El[B].call(null,this)},triggerElectric:ii(function(B){vf(this,B)}),findPosH:function(B,R,Z,Ae){var Ce=1;R<0&&(Ce=-1,R=-R);for(var Te=ei(this.doc,B),je=0;je<R&&(Te=bi(this.doc,Te,Ce,Z,Ae),!Te.hitSide);++je);return Te},moveH:ii(function(B,R){var Z=this;this.extendSelectionsBy(function(Ae){return Z.display.shift||Z.doc.extend||Ae.empty()?bi(Z.doc,Ae.head,B,R,Z.options.rtlMoveVisually):B<0?Ae.from():Ae.to()},Dt)}),deleteH:ii(function(B,R){var Z=this.doc.sel,Ae=this.doc;Z.somethingSelected()?Ae.replaceSelection("",null,"+delete"):Sl(this,function(Ce){var Te=bi(Ae,Ce.head,B,R,!1);return B<0?{from:Te,to:Ce.head}:{from:Ce.head,to:Te}})}),findPosV:function(B,R,Z,Ae){var Ce=1,Te=Ae;R<0&&(Ce=-1,R=-R);for(var je=ei(this.doc,B),yt=0;yt<R;++yt){var Mt=ln(this,je,"div");if(Te==null?Te=Mt.left:Mt.left=Te,je=fc(this,Mt,Ce,Z),je.hitSide)break}return je},moveV:ii(function(B,R){var Z=this,Ae=this.doc,Ce=[],Te=!this.display.shift&&!Ae.extend&&Ae.sel.somethingSelected();if(Ae.extendSelectionsBy(function(yt){if(Te)return B<0?yt.from():yt.to();var Mt=ln(Z,yt.head,"div");yt.goalColumn!=null&&(Mt.left=yt.goalColumn),Ce.push(Mt.left);var en=fc(Z,Mt,B,R);return R=="page"&&yt==Ae.sel.primary()&&kA(Z,En(Z,en,"div").top-Mt.top),en},Dt),Ce.length)for(var je=0;je<Ae.sel.ranges.length;je++)Ae.sel.ranges[je].goalColumn=Ce[je]}),findWordAt:function(B){var R=this.doc,Z=Tr(R,B.line).text,Ae=B.ch,Ce=B.ch;if(Z){var Te=this.getHelper(B,"wordChars");(B.sticky=="before"||Ce==Z.length)&&Ae?--Ae:++Ce;for(var je=Z.charAt(Ae),yt=Qe(je,Te)?function(Mt){return Qe(Mt,Te)}:/\s/.test(je)?function(Mt){return/\s/.test(Mt)}:function(Mt){return!/\s/.test(Mt)&&!Qe(Mt)};Ae>0&&yt(Z.charAt(Ae-1));)--Ae;for(;Ce<Z.length&&yt(Z.charAt(Ce));)++Ce}return new Ro(hn(B.line,Ae),hn(B.line,Ce))},toggleOverwrite:function(B){B!=null&&B==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?Me(this.display.cursorDiv,"CodeMirror-overwrite"):me(this.display.cursorDiv,"CodeMirror-overwrite"),ct(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==We(Yt(this))},isReadOnly:function(){return!!(this.options.readOnly||this.doc.cantEdit)},scrollTo:ii(function(B,R){Ls(this,B,R)}),getScrollInfo:function(){var B=this.display.scroller;return{left:B.scrollLeft,top:B.scrollTop,height:B.scrollHeight-ju(this)-this.display.barHeight,width:B.scrollWidth-ju(this)-this.display.barWidth,clientHeight:Ll(this),clientWidth:uA(this)}},scrollIntoView:ii(function(B,R){B==null?(B={from:this.doc.sel.primary().head,to:null},R==null&&(R=this.options.cursorScrollMargin)):typeof B=="number"?B={from:hn(B,0),to:null}:B.from==null&&(B={from:B,to:null}),B.to||(B.to=B.from),B.margin=R||0,B.from.line!=null?dA(this,B):Hc(this,B.from,B.to,B.margin)}),setSize:ii(function(B,R){var Z=this,Ae=function(Te){return typeof Te=="number"||/^\d+$/.test(String(Te))?Te+"px":Te};B!=null&&(this.display.wrapper.style.width=Ae(B)),R!=null&&(this.display.wrapper.style.height=Ae(R)),this.options.lineWrapping&&cf(this);var Ce=this.display.viewFrom;this.doc.iter(Ce,this.display.viewTo,function(Te){if(Te.widgets){for(var je=0;je<Te.widgets.length;je++)if(Te.widgets[je].noHScroll){tc(Z,Ce,"widget");break}}++Ce}),this.curOp.forceUpdate=!0,ct(this,"refresh",this)}),operation:function(B){return Io(this,B)},startOperation:function(){return Yu(this)},endOperation:function(){return $u(this)},refresh:ii(function(){var B=this.display.cachedTextHeight;zl(this),this.curOp.forceUpdate=!0,wc(this),Ls(this,this.doc.scrollLeft,this.doc.scrollTop),ga(this.display),(B==null||Math.abs(B-Ul(this.display))>.5||this.options.lineWrapping)&&yd(this),ct(this,"refresh",this)}),swapDoc:ii(function(B){var R=this.doc;return R.cm=null,this.state.selectingText&&this.state.selectingText(),hs(this,B),wc(this),this.display.input.reset(),Ls(this,B.scrollLeft,B.scrollTop),this.curOp.forceScroll=!0,ta(this,"swapDoc",this,R),R}),phrase:function(B){var R=this.options.phrases;return R&&Object.prototype.hasOwnProperty.call(R,B)?R[B]:B},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},jt(A),A.registerHelper=function(B,R,Z){O.hasOwnProperty(B)||(O[B]=A[B]={_global:[]}),O[B][R]=Z},A.registerGlobalHelper=function(B,R,Z,Ae){A.registerHelper(B,R,Ae),O[B]._global.push({pred:Z,val:Ae})}}function bi(A,y,O,B,R){var Z=y,Ae=O,Ce=Tr(A,y.line),Te=R&&A.direction=="rtl"?-O:O;function je(){var wr=y.line+Te;return wr<A.first||wr>=A.first+A.size?!1:(y=new hn(wr,y.ch,y.sticky),Ce=Tr(A,wr))}function yt(wr){var yr;if(B=="codepoint"){var Or=Ce.text.charCodeAt(y.ch+(O>0?0:-1));if(isNaN(Or))yr=null;else{var ni=O>0?Or>=55296&&Or<56320:Or>=56320&&Or<57343;yr=new hn(y.line,Math.max(0,Math.min(Ce.text.length,y.ch+O*(ni?2:1))),-O)}}else R?yr=Aa(A.cm,Ce,y,O):yr=vA(Ce,y,O);if(yr==null)if(!wr&&je())y=NA(R,A.cm,Ce,y.line,Te);else return!1;else y=yr;return!0}if(B=="char"||B=="codepoint")yt();else if(B=="column")yt(!0);else if(B=="word"||B=="group")for(var Mt=null,en=B=="group",Qt=A.cm&&A.cm.getHelper(y,"wordChars"),wn=!0;!(O<0&&!yt(!wn));wn=!1){var Ln=Ce.text.charAt(y.ch)||`
`,sr=Qe(Ln,Qt)?"w":en&&Ln==`
`?"n":!en||/\s/.test(Ln)?null:"p";if(en&&!wn&&!sr&&(sr="s"),Mt&&Mt!=sr){O<0&&(O=1,yt(),y.sticky="after");break}if(sr&&(Mt=sr),O>0&&!yt(!wn))break}var Vn=Pc(A,y,Z,Ae,!0);return Pi(Z,Vn)&&(Vn.hitSide=!0),Vn}function fc(A,y,O,B){var R=A.doc,Z=y.left,Ae;if(B=="page"){var Ce=Math.min(A.display.wrapper.clientHeight,Lt(A).innerHeight||R(A).documentElement.clientHeight),Te=Math.max(Ce-.5*Ul(A.display),3);Ae=(O>0?y.bottom:y.top)+O*Te}else B=="line"&&(Ae=O>0?y.bottom+3:y.top-3);for(var je;je=ho(A,Z,Ae),!!je.outside;){if(O<0?Ae<=0:Ae>=R.height){je.hitSide=!0;break}Ae+=O*5}return je}var Uo=function(A){this.cm=A,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new Be,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};Uo.prototype.init=function(A){var y=this,O=this,B=O.cm,R=O.div=A.lineDiv;R.contentEditable=!0,_f(R,B.options.spellcheck,B.options.autocorrect,B.options.autocapitalize);function Z(Ce){for(var Te=Ce.target;Te;Te=Te.parentNode){if(Te==R)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(Te.className))break}return!1}Ne(R,"paste",function(Ce){!Z(Ce)||dt(B,Ce)||Kc(Ce,B)||g<=11&&setTimeout(pi(B,function(){return y.updateFromDOM()}),20)}),Ne(R,"compositionstart",function(Ce){y.composing={data:Ce.data,done:!1}}),Ne(R,"compositionupdate",function(Ce){y.composing||(y.composing={data:Ce.data,done:!1})}),Ne(R,"compositionend",function(Ce){y.composing&&(Ce.data!=y.composing.data&&y.readFromDOMSoon(),y.composing.done=!0)}),Ne(R,"touchstart",function(){return O.forceCompositionEnd()}),Ne(R,"input",function(){y.composing||y.readFromDOMSoon()});function Ae(Ce){if(!(!Z(Ce)||dt(B,Ce))){if(B.somethingSelected())yf({lineWise:!1,text:B.getSelections()}),Ce.type=="cut"&&B.replaceSelection("",null,"cut");else if(B.options.lineWiseCopyCut){var Te=Cf(B);yf({lineWise:!0,text:Te.text}),Ce.type=="cut"&&B.operation(function(){B.setSelections(Te.ranges,0,Ut),B.replaceSelection("",null,"cut")})}else return;if(Ce.clipboardData){Ce.clipboardData.clearData();var je=Zu.text.join(`
`);if(Ce.clipboardData.setData("Text",je),Ce.clipboardData.getData("Text")==je){Ce.preventDefault();return}}var yt=Td(),Mt=yt.firstChild;_f(Mt),B.display.lineSpace.insertBefore(yt,B.display.lineSpace.firstChild),Mt.value=Zu.text.join(`
`);var en=We(gt(R));He(Mt),setTimeout(function(){B.display.lineSpace.removeChild(yt),en.focus(),en==R&&O.showPrimarySelection()},50)}}Ne(R,"copy",Ae),Ne(R,"cut",Ae)},Uo.prototype.screenReaderLabelChanged=function(A){A?this.div.setAttribute("aria-label",A):this.div.removeAttribute("aria-label")},Uo.prototype.prepareSelection=function(){var A=Yc(this.cm,!1);return A.focus=We(gt(this.div))==this.div,A},Uo.prototype.showSelection=function(A,y){!A||!this.cm.display.view.length||((A.focus||y)&&this.showPrimarySelection(),this.showMultipleSelections(A))},Uo.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},Uo.prototype.showPrimarySelection=function(){var A=this.getSelection(),y=this.cm,O=y.doc.sel.primary(),B=O.from(),R=O.to();if(y.display.viewTo==y.display.viewFrom||B.line>=y.display.viewTo||R.line<y.display.viewFrom){A.removeAllRanges();return}var Z=ml(y,A.anchorNode,A.anchorOffset),Ae=ml(y,A.focusNode,A.focusOffset);if(!(Z&&!Z.bad&&Ae&&!Ae.bad&&or(Rs(Z,Ae),B)==0&&or(Cs(Z,Ae),R)==0)){var Ce=y.display.view,Te=B.line>=y.display.viewFrom&&Pd(y,B)||{node:Ce[0].measure.map[2],offset:0},je=R.line<y.display.viewTo&&Pd(y,R);if(!je){var yt=Ce[Ce.length-1].measure,Mt=yt.maps?yt.maps[yt.maps.length-1]:yt.map;je={node:Mt[Mt.length-1],offset:Mt[Mt.length-2]-Mt[Mt.length-3]}}if(!Te||!je){A.removeAllRanges();return}var en=A.rangeCount&&A.getRangeAt(0),Qt;try{Qt=Ze(Te.node,Te.offset,je.offset,je.node)}catch{}Qt&&(!i&&y.state.focused?(A.collapse(Te.node,Te.offset),Qt.collapsed||(A.removeAllRanges(),A.addRange(Qt))):(A.removeAllRanges(),A.addRange(Qt)),en&&A.anchorNode==null?A.addRange(en):i&&this.startGracePeriod()),this.rememberSelection()}},Uo.prototype.startGracePeriod=function(){var A=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){A.gracePeriod=!1,A.selectionChanged()&&A.cm.operation(function(){return A.cm.curOp.selectionChanged=!0})},20)},Uo.prototype.showMultipleSelections=function(A){De(this.cm.display.cursorDiv,A.cursors),De(this.cm.display.selectionDiv,A.selection)},Uo.prototype.rememberSelection=function(){var A=this.getSelection();this.lastAnchorNode=A.anchorNode,this.lastAnchorOffset=A.anchorOffset,this.lastFocusNode=A.focusNode,this.lastFocusOffset=A.focusOffset},Uo.prototype.selectionInEditor=function(){var A=this.getSelection();if(!A.rangeCount)return!1;var y=A.getRangeAt(0).commonAncestorContainer;return Je(this.div,y)},Uo.prototype.focus=function(){this.cm.options.readOnly!="nocursor"&&((!this.selectionInEditor()||We(gt(this.div))!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},Uo.prototype.blur=function(){this.div.blur()},Uo.prototype.getField=function(){return this.div},Uo.prototype.supportsTouch=function(){return!0},Uo.prototype.receivedFocus=function(){var A=this,y=this;this.selectionInEditor()?setTimeout(function(){return A.pollSelection()},20):Io(this.cm,function(){return y.cm.curOp.selectionChanged=!0});function O(){y.cm.state.focused&&(y.pollSelection(),y.polling.set(y.cm.options.pollInterval,O))}this.polling.set(this.cm.options.pollInterval,O)},Uo.prototype.selectionChanged=function(){var A=this.getSelection();return A.anchorNode!=this.lastAnchorNode||A.anchorOffset!=this.lastAnchorOffset||A.focusNode!=this.lastFocusNode||A.focusOffset!=this.lastFocusOffset},Uo.prototype.pollSelection=function(){if(!(this.readDOMTimeout!=null||this.gracePeriod||!this.selectionChanged())){var A=this.getSelection(),y=this.cm;if(ie&&S&&this.cm.display.gutterSpecs.length&&Tp(A.anchorNode)){this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),this.focus();return}if(!this.composing){this.rememberSelection();var O=ml(y,A.anchorNode,A.anchorOffset),B=ml(y,A.focusNode,A.focusOffset);O&&B&&Io(y,function(){ya(y.doc,Ga(O,B),Ut),(O.bad||B.bad)&&(y.curOp.selectionChanged=!0)})}}},Uo.prototype.pollContent=function(){this.readDOMTimeout!=null&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var A=this.cm,y=A.display,O=A.doc.sel.primary(),B=O.from(),R=O.to();if(B.ch==0&&B.line>A.firstLine()&&(B=hn(B.line-1,Tr(A.doc,B.line-1).length)),R.ch==Tr(A.doc,R.line).text.length&&R.line<A.lastLine()&&(R=hn(R.line+1,0)),B.line<y.viewFrom||R.line>y.viewTo-1)return!1;var Z,Ae,Ce;B.line==y.viewFrom||(Z=AA(A,B.line))==0?(Ae=qe(y.view[0].line),Ce=y.view[0].node):(Ae=qe(y.view[Z].line),Ce=y.view[Z-1].node.nextSibling);var Te=AA(A,R.line),je,yt;if(Te==y.view.length-1?(je=y.viewTo-1,yt=y.lineDiv.lastChild):(je=qe(y.view[Te+1].line)-1,yt=y.view[Te+1].node.previousSibling),!Ce)return!1;for(var Mt=A.doc.splitLines(Ym(A,Ce,yt,Ae,je)),en=tl(A.doc,hn(Ae,0),hn(je,Tr(A.doc,je).text.length));Mt.length>1&&en.length>1;)if(rr(Mt)==rr(en))Mt.pop(),en.pop(),je--;else if(Mt[0]==en[0])Mt.shift(),en.shift(),Ae++;else break;for(var Qt=0,wn=0,Ln=Mt[0],sr=en[0],Vn=Math.min(Ln.length,sr.length);Qt<Vn&&Ln.charCodeAt(Qt)==sr.charCodeAt(Qt);)++Qt;for(var wr=rr(Mt),yr=rr(en),Or=Math.min(wr.length-(Mt.length==1?Qt:0),yr.length-(en.length==1?Qt:0));wn<Or&&wr.charCodeAt(wr.length-wn-1)==yr.charCodeAt(yr.length-wn-1);)++wn;if(Mt.length==1&&en.length==1&&Ae==B.line)for(;Qt&&Qt>B.ch&&wr.charCodeAt(wr.length-wn-1)==yr.charCodeAt(yr.length-wn-1);)Qt--,wn++;Mt[Mt.length-1]=wr.slice(0,wr.length-wn).replace(/^\u200b+/,""),Mt[0]=Mt[0].slice(Qt).replace(/\u200b+$/,"");var ni=hn(Ae,Qt),zr=hn(je,en.length?rr(en).length-wn:0);if(Mt.length>1||Mt[0]||or(ni,zr))return N(A.doc,Mt,ni,zr,"+input"),!0},Uo.prototype.ensurePolled=function(){this.forceCompositionEnd()},Uo.prototype.reset=function(){this.forceCompositionEnd()},Uo.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Uo.prototype.readFromDOMSoon=function(){var A=this;this.readDOMTimeout==null&&(this.readDOMTimeout=setTimeout(function(){if(A.readDOMTimeout=null,A.composing)if(A.composing.done)A.composing=null;else return;A.updateFromDOM()},80))},Uo.prototype.updateFromDOM=function(){var A=this;(this.cm.isReadOnly()||!this.pollContent())&&Io(this.cm,function(){return zl(A.cm)})},Uo.prototype.setUneditable=function(A){A.contentEditable="false"},Uo.prototype.onKeyPress=function(A){A.charCode==0||this.composing||(A.preventDefault(),this.cm.isReadOnly()||pi(this.cm,Jf)(this.cm,String.fromCharCode(A.charCode==null?A.keyCode:A.charCode),0))},Uo.prototype.readOnlyChanged=function(A){this.div.contentEditable=String(A!="nocursor")},Uo.prototype.onContextMenu=function(){},Uo.prototype.resetPosition=function(){},Uo.prototype.needsContentAttribute=!0;function Pd(A,y){var O=pd(A,y.line);if(!O||O.hidden)return null;var B=Tr(A.doc,y.line),R=uf(O,B,y.line),Z=ve(B,A.doc.direction),Ae="left";if(Z){var Ce=Oe(Z,y.ch);Ae=Ce%2?"right":"left"}var Te=wh(R.map,y.ch,Ae);return Te.offset=Te.collapse=="right"?Te.end:Te.start,Te}function Tp(A){for(var y=A;y;y=y.parentNode)if(/CodeMirror-gutter-wrapper/.test(y.className))return!0;return!1}function Ou(A,y){return y&&(A.bad=!0),A}function Ym(A,y,O,B,R){var Z="",Ae=!1,Ce=A.doc.lineSeparator(),Te=!1;function je(Qt){return function(wn){return wn.id==Qt}}function yt(){Ae&&(Z+=Ce,Te&&(Z+=Ce),Ae=Te=!1)}function Mt(Qt){Qt&&(yt(),Z+=Qt)}function en(Qt){if(Qt.nodeType==1){var wn=Qt.getAttribute("cm-text");if(wn){Mt(wn);return}var Ln=Qt.getAttribute("cm-marker"),sr;if(Ln){var Vn=A.findMarks(hn(B,0),hn(R+1,0),je(+Ln));Vn.length&&(sr=Vn[0].find(0))&&Mt(tl(A.doc,sr.from,sr.to).join(Ce));return}if(Qt.getAttribute("contenteditable")=="false")return;var wr=/^(pre|div|p|li|table|br)$/i.test(Qt.nodeName);if(!/^br$/i.test(Qt.nodeName)&&Qt.textContent.length==0)return;wr&&yt();for(var yr=0;yr<Qt.childNodes.length;yr++)en(Qt.childNodes[yr]);/^(pre|p)$/i.test(Qt.nodeName)&&(Te=!0),wr&&(Ae=!0)}else Qt.nodeType==3&&Mt(Qt.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;en(y),y!=O;)y=y.nextSibling,Te=!1;return Z}function ml(A,y,O){var B;if(y==A.display.lineDiv){if(B=A.display.lineDiv.childNodes[O],!B)return Ou(A.clipPos(hn(A.display.viewTo-1)),!0);y=null,O=0}else for(B=y;;B=B.parentNode){if(!B||B==A.display.lineDiv)return null;if(B.parentNode&&B.parentNode==A.display.lineDiv)break}for(var R=0;R<A.display.view.length;R++){var Z=A.display.view[R];if(Z.node==B)return pm(Z,y,O)}}function pm(A,y,O){var B=A.text.firstChild,R=!1;if(!y||!Je(B,y))return Ou(hn(qe(A.line),0),!0);if(y==B&&(R=!0,y=B.childNodes[O],O=0,!y)){var Z=A.rest?rr(A.rest):A.line;return Ou(hn(qe(Z),Z.text.length),R)}var Ae=y.nodeType==3?y:null,Ce=y;for(!Ae&&y.childNodes.length==1&&y.firstChild.nodeType==3&&(Ae=y.firstChild,O&&(O=Ae.nodeValue.length));Ce.parentNode!=B;)Ce=Ce.parentNode;var Te=A.measure,je=Te.maps;function yt(sr,Vn,wr){for(var yr=-1;yr<(je?je.length:0);yr++)for(var Or=yr<0?Te.map:je[yr],ni=0;ni<Or.length;ni+=3){var zr=Or[ni+2];if(zr==sr||zr==Vn){var Hi=qe(yr<0?A.line:A.rest[yr]),zo=Or[ni]+wr;return(wr<0||zr!=sr)&&(zo=Or[ni+(wr?1:0)]),hn(Hi,zo)}}}var Mt=yt(Ae,Ce,O);if(Mt)return Ou(Mt,R);for(var en=Ce.nextSibling,Qt=Ae?Ae.nodeValue.length-O:0;en;en=en.nextSibling){if(Mt=yt(en,en.firstChild,0),Mt)return Ou(hn(Mt.line,Mt.ch-Qt),R);Qt+=en.textContent.length}for(var wn=Ce.previousSibling,Ln=O;wn;wn=wn.previousSibling){if(Mt=yt(wn,wn.firstChild,-1),Mt)return Ou(hn(Mt.line,Mt.ch+Ln),R);Ln+=wn.textContent.length}}var Ka=function(A){this.cm=A,this.prevInput="",this.pollingFast=!1,this.polling=new Be,this.hasSelection=!1,this.composing=null,this.resetting=!1};Ka.prototype.init=function(A){var y=this,O=this,B=this.cm;this.createField(A);var R=this.textarea;A.wrapper.insertBefore(this.wrapper,A.wrapper.firstChild),Y&&(R.style.width="0px"),Ne(R,"input",function(){d&&g>=9&&y.hasSelection&&(y.hasSelection=null),O.poll()}),Ne(R,"paste",function(Ae){dt(B,Ae)||Kc(Ae,B)||(B.state.pasteIncoming=+new Date,O.fastPoll())});function Z(Ae){if(!dt(B,Ae)){if(B.somethingSelected())yf({lineWise:!1,text:B.getSelections()});else if(B.options.lineWiseCopyCut){var Ce=Cf(B);yf({lineWise:!0,text:Ce.text}),Ae.type=="cut"?B.setSelections(Ce.ranges,null,Ut):(O.prevInput="",R.value=Ce.text.join(`
`),He(R))}else return;Ae.type=="cut"&&(B.state.cutIncoming=+new Date)}}Ne(R,"cut",Z),Ne(R,"copy",Z),Ne(A.scroller,"paste",function(Ae){if(!(lA(A,Ae)||dt(B,Ae))){if(!R.dispatchEvent){B.state.pasteIncoming=+new Date,O.focus();return}var Ce=new Event("paste");Ce.clipboardData=Ae.clipboardData,R.dispatchEvent(Ce)}}),Ne(A.lineSpace,"selectstart",function(Ae){lA(A,Ae)||xt(Ae)}),Ne(R,"compositionstart",function(){var Ae=B.getCursor("from");O.composing&&O.composing.range.clear(),O.composing={start:Ae,range:B.markText(Ae,B.getCursor("to"),{className:"CodeMirror-composing"})}}),Ne(R,"compositionend",function(){O.composing&&(O.poll(),O.composing.range.clear(),O.composing=null)})},Ka.prototype.createField=function(A){this.wrapper=Td(),this.textarea=this.wrapper.firstChild;var y=this.cm.options;_f(this.textarea,y.spellcheck,y.autocorrect,y.autocapitalize)},Ka.prototype.screenReaderLabelChanged=function(A){A?this.textarea.setAttribute("aria-label",A):this.textarea.removeAttribute("aria-label")},Ka.prototype.prepareSelection=function(){var A=this.cm,y=A.display,O=A.doc,B=Yc(A);if(A.options.moveInputWithCursor){var R=ln(A,O.sel.primary().head,"div"),Z=y.wrapper.getBoundingClientRect(),Ae=y.lineDiv.getBoundingClientRect();B.teTop=Math.max(0,Math.min(y.wrapper.clientHeight-10,R.top+Ae.top-Z.top)),B.teLeft=Math.max(0,Math.min(y.wrapper.clientWidth-10,R.left+Ae.left-Z.left))}return B},Ka.prototype.showSelection=function(A){var y=this.cm,O=y.display;De(O.cursorDiv,A.cursors),De(O.selectionDiv,A.selection),A.teTop!=null&&(this.wrapper.style.top=A.teTop+"px",this.wrapper.style.left=A.teLeft+"px")},Ka.prototype.reset=function(A){if(!(this.contextMenuPending||this.composing&&A)){var y=this.cm;if(this.resetting=!0,y.somethingSelected()){this.prevInput="";var O=y.getSelection();this.textarea.value=O,y.state.focused&&He(this.textarea),d&&g>=9&&(this.hasSelection=O)}else A||(this.prevInput=this.textarea.value="",d&&g>=9&&(this.hasSelection=null));this.resetting=!1}},Ka.prototype.getField=function(){return this.textarea},Ka.prototype.supportsTouch=function(){return!1},Ka.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!te||We(gt(this.textarea))!=this.textarea))try{this.textarea.focus()}catch{}},Ka.prototype.blur=function(){this.textarea.blur()},Ka.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Ka.prototype.receivedFocus=function(){this.slowPoll()},Ka.prototype.slowPoll=function(){var A=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){A.poll(),A.cm.state.focused&&A.slowPoll()})},Ka.prototype.fastPoll=function(){var A=!1,y=this;y.pollingFast=!0;function O(){var B=y.poll();!B&&!A?(A=!0,y.polling.set(60,O)):(y.pollingFast=!1,y.slowPoll())}y.polling.set(20,O)},Ka.prototype.poll=function(){var A=this,y=this.cm,O=this.textarea,B=this.prevInput;if(this.contextMenuPending||this.resetting||!y.state.focused||mo(O)&&!B&&!this.composing||y.isReadOnly()||y.options.disableInput||y.state.keySeq)return!1;var R=O.value;if(R==B&&!y.somethingSelected())return!1;if(d&&g>=9&&this.hasSelection===R||V&&/[\uf700-\uf7ff]/.test(R))return y.display.input.reset(),!1;if(y.doc.sel==y.display.selForContextMenu){var Z=R.charCodeAt(0);if(Z==8203&&!B&&(B=""),Z==8666)return this.reset(),this.cm.execCommand("undo")}for(var Ae=0,Ce=Math.min(B.length,R.length);Ae<Ce&&B.charCodeAt(Ae)==R.charCodeAt(Ae);)++Ae;return Io(y,function(){Jf(y,R.slice(Ae),B.length-Ae,null,A.composing?"*compose":null),R.length>1e3||R.indexOf(`
`)>-1?O.value=A.prevInput="":A.prevInput=R,A.composing&&(A.composing.range.clear(),A.composing.range=y.markText(A.composing.start,y.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},Ka.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Ka.prototype.onKeyPress=function(){d&&g>=9&&(this.hasSelection=null),this.fastPoll()},Ka.prototype.onContextMenu=function(A){var y=this,O=y.cm,B=O.display,R=y.textarea;y.contextMenuPending&&y.contextMenuPending();var Z=eu(O,A),Ae=B.scroller.scrollTop;if(!Z||P)return;var Ce=O.options.resetSelectionOnContextMenu;Ce&&O.doc.sel.contains(Z)==-1&&pi(O,ya)(O.doc,Ga(Z),Ut);var Te=R.style.cssText,je=y.wrapper.style.cssText,yt=y.wrapper.offsetParent.getBoundingClientRect();y.wrapper.style.cssText="position: static",R.style.cssText=`position: absolute; width: 30px; height: 30px;
      top: `+(A.clientY-yt.top-5)+"px; left: "+(A.clientX-yt.left-5)+`px;
      z-index: 1000; background: `+(d?"rgba(255, 255, 255, .05)":"transparent")+`;
      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);`;var Mt;b&&(Mt=R.ownerDocument.defaultView.scrollY),B.input.focus(),b&&R.ownerDocument.defaultView.scrollTo(null,Mt),B.input.reset(),O.somethingSelected()||(R.value=y.prevInput=" "),y.contextMenuPending=Qt,B.selForContextMenu=O.doc.sel,clearTimeout(B.detectingSelectAll);function en(){if(R.selectionStart!=null){var Ln=O.somethingSelected(),sr=""+(Ln?R.value:"");R.value="",R.value=sr,y.prevInput=Ln?"":"",R.selectionStart=1,R.selectionEnd=sr.length,B.selForContextMenu=O.doc.sel}}function Qt(){if(y.contextMenuPending==Qt&&(y.contextMenuPending=!1,y.wrapper.style.cssText=je,R.style.cssText=Te,d&&g<9&&B.scrollbars.setScrollTop(B.scroller.scrollTop=Ae),R.selectionStart!=null)){(!d||d&&g<9)&&en();var Ln=0,sr=function(){B.selForContextMenu==O.doc.sel&&R.selectionStart==0&&R.selectionEnd>0&&y.prevInput==""?pi(O,Ml)(O):Ln++<10?B.detectingSelectAll=setTimeout(sr,500):(B.selForContextMenu=null,B.input.reset())};B.detectingSelectAll=setTimeout(sr,200)}}if(d&&g>=9&&en(),pe){gr(A);var wn=function(){rt(window,"mouseup",wn),setTimeout(Qt,20)};Ne(window,"mouseup",wn)}else setTimeout(Qt,50)},Ka.prototype.readOnlyChanged=function(A){A||this.reset(),this.textarea.disabled=A=="nocursor",this.textarea.readOnly=!!A},Ka.prototype.setUneditable=function(){},Ka.prototype.needsContentAttribute=!1;function ep(A,y){if(y=y?Ue(y):{},y.value=A.value,!y.tabindex&&A.tabIndex&&(y.tabindex=A.tabIndex),!y.placeholder&&A.placeholder&&(y.placeholder=A.placeholder),y.autofocus==null){var O=We(gt(A));y.autofocus=O==A||A.getAttribute("autofocus")!=null&&O==document.body}function B(){A.value=Ce.getValue()}var R;if(A.form&&(Ne(A.form,"submit",B),!y.leaveSubmitMethodAlone)){var Z=A.form;R=Z.submit;try{var Ae=Z.submit=function(){B(),Z.submit=R,Z.submit(),Z.submit=Ae}}catch{}}y.finishInit=function(Te){Te.save=B,Te.getTextArea=function(){return A},Te.toTextArea=function(){Te.toTextArea=isNaN,B(),A.parentNode.removeChild(Te.getWrapperElement()),A.style.display="",A.form&&(rt(A.form,"submit",B),!y.leaveSubmitMethodAlone&&typeof A.form.submit=="function"&&(A.form.submit=R))}},A.style.display="none";var Ce=Qo(function(Te){return A.parentNode.insertBefore(Te,A.nextSibling)},y);return Ce}function tp(A){A.off=rt,A.on=Ne,A.wheelEventPixels=FA,A.Doc=Zt,A.splitLines=ur,A.countColumn=Pe,A.findColumn=_n,A.isWordChar=Jn,A.Pass=ft,A.signal=ct,A.Line=Na,A.changeEnd=Qa,A.scrollbarModel=Zc,A.Pos=hn,A.cmpPos=or,A.modes=io,A.mimeModes=Do,A.resolveMode=Sa,A.getMode=ns,A.modeExtensions=sa,A.extendMode=Al,A.copyState=uo,A.startState=Hl,A.innerMode=Fu,A.commands=El,A.keyMap=vo,A.keyName=lu,A.isModifierKey=ol,A.lookupKey=Jo,A.normalizeKeyMap=Xo,A.StringStream=oo,A.SharedTextMarker=Bt,A.TextMarker=mt,A.LineWidget=$e,A.e_preventDefault=xt,A.e_stopPropagation=Tn,A.e_stop=gr,A.addClass=Me,A.contains=Je,A.rmClass=me,A.keyNames=Mi}Au(Qo),Dc(Qo);var Nl="iter insert remove copy getEditor constructor".split(" ");for(var ih in Zt.prototype)Zt.prototype.hasOwnProperty(ih)&&it(Nl,ih)<0&&(Qo.prototype[ih]=function(A){return function(){return A.apply(this.doc,arguments)}}(Zt.prototype[ih]));return jt(Zt),Qo.inputStyles={textarea:Ka,contenteditable:Uo},Qo.defineMode=function(A){!Qo.defaults.mode&&A!="null"&&(Qo.defaults.mode=A),Ti.apply(this,arguments)},Qo.defineMIME=ja,Qo.defineMode("null",function(){return{token:function(A){return A.skipToEnd()}}}),Qo.defineMIME("text/plain","null"),Qo.defineExtension=function(A,y){Qo.prototype[A]=y},Qo.defineDocExtension=function(A,y){Zt.prototype[A]=y},Qo.fromTextArea=ep,tp(Qo),Qo.version="5.65.18",Qo})}(Xb)),Xb.exports}var bue=g3();const vp=el(bue);var OT={exports:{}},IT;function xue(){return IT||(IT=1,function(n,e){(function(t){t(g3())})(function(t){t.defineMode("javascript",function(r,i){var s=r.indentUnit,a=i.statementIndent,o=i.jsonld,d=i.json||o,g=i.trackScope!==!1,b=i.typescript,E=i.wordCharacters||/[\w$\xa1-\uffff]/,S=function(){function qe(go){return{type:go,style:"keyword"}}var wt=qe("keyword a"),vn=qe("keyword b"),Yn=qe("keyword c"),hn=qe("keyword d"),or=qe("operator"),Pi={type:"atom",style:"atom"};return{if:qe("if"),while:wt,with:wt,else:vn,do:vn,try:vn,finally:vn,return:hn,break:hn,continue:hn,new:qe("new"),delete:Yn,void:Yn,throw:Yn,debugger:qe("debugger"),var:qe("var"),const:qe("var"),let:qe("var"),function:qe("function"),catch:qe("catch"),for:qe("for"),switch:qe("switch"),case:qe("case"),default:qe("default"),in:or,typeof:or,instanceof:or,true:Pi,false:Pi,null:Pi,undefined:Pi,NaN:Pi,Infinity:Pi,this:qe("this"),class:qe("class"),super:qe("atom"),yield:Yn,export:qe("export"),import:qe("import"),extends:Yn,await:Yn}}(),I=/[+\-*&%=<>!?|~^@]/,P=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function z(qe){for(var wt=!1,vn,Yn=!1;(vn=qe.next())!=null;){if(!wt){if(vn=="/"&&!Yn)return;vn=="["?Yn=!0:Yn&&vn=="]"&&(Yn=!1)}wt=!wt&&vn=="\\"}}var j,q;function Y(qe,wt,vn){return j=qe,q=vn,wt}function ie(qe,wt){var vn=qe.next();if(vn=='"'||vn=="'")return wt.tokenize=te(vn),wt.tokenize(qe,wt);if(vn=="."&&qe.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return Y("number","number");if(vn=="."&&qe.match(".."))return Y("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(vn))return Y(vn);if(vn=="="&&qe.eat(">"))return Y("=>","operator");if(vn=="0"&&qe.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return Y("number","number");if(/\d/.test(vn))return qe.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),Y("number","number");if(vn=="/")return qe.eat("*")?(wt.tokenize=V,V(qe,wt)):qe.eat("/")?(qe.skipToEnd(),Y("comment","comment")):Js(qe,wt,1)?(z(qe),qe.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),Y("regexp","string-2")):(qe.eat("="),Y("operator","operator",qe.current()));if(vn=="`")return wt.tokenize=ne,ne(qe,wt);if(vn=="#"&&qe.peek()=="!")return qe.skipToEnd(),Y("meta","meta");if(vn=="#"&&qe.eatWhile(E))return Y("variable","property");if(vn=="<"&&qe.match("!--")||vn=="-"&&qe.match("->")&&!/\S/.test(qe.string.slice(0,qe.start)))return qe.skipToEnd(),Y("comment","comment");if(I.test(vn))return(vn!=">"||!wt.lexical||wt.lexical.type!=">")&&(qe.eat("=")?(vn=="!"||vn=="=")&&qe.eat("="):/[<>*+\-|&?]/.test(vn)&&(qe.eat(vn),vn==">"&&qe.eat(vn))),vn=="?"&&qe.eat(".")?Y("."):Y("operator","operator",qe.current());if(E.test(vn)){qe.eatWhile(E);var Yn=qe.current();if(wt.lastType!="."){if(S.propertyIsEnumerable(Yn)){var hn=S[Yn];return Y(hn.type,hn.style,Yn)}if(Yn=="async"&&qe.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return Y("async","keyword",Yn)}return Y("variable","variable",Yn)}}function te(qe){return function(wt,vn){var Yn=!1,hn;if(o&&wt.peek()=="@"&&wt.match(P))return vn.tokenize=ie,Y("jsonld-keyword","meta");for(;(hn=wt.next())!=null&&!(hn==qe&&!Yn);)Yn=!Yn&&hn=="\\";return Yn||(vn.tokenize=ie),Y("string","string")}}function V(qe,wt){for(var vn=!1,Yn;Yn=qe.next();){if(Yn=="/"&&vn){wt.tokenize=ie;break}vn=Yn=="*"}return Y("comment","comment")}function ne(qe,wt){for(var vn=!1,Yn;(Yn=qe.next())!=null;){if(!vn&&(Yn=="`"||Yn=="$"&&qe.eat("{"))){wt.tokenize=ie;break}vn=!vn&&Yn=="\\"}return Y("quasi","string-2",qe.current())}var G="([{}])";function oe(qe,wt){wt.fatArrowAt&&(wt.fatArrowAt=null);var vn=qe.string.indexOf("=>",qe.start);if(!(vn<0)){if(b){var Yn=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(qe.string.slice(qe.start,vn));Yn&&(vn=Yn.index)}for(var hn=0,or=!1,Pi=vn-1;Pi>=0;--Pi){var go=qe.string.charAt(Pi),Cs=G.indexOf(go);if(Cs>=0&&Cs<3){if(!hn){++Pi;break}if(--hn==0){go=="("&&(or=!0);break}}else if(Cs>=3&&Cs<6)++hn;else if(E.test(go))or=!0;else if(/["'\/`]/.test(go))for(;;--Pi){if(Pi==0)return;var Rs=qe.string.charAt(Pi-1);if(Rs==go&&qe.string.charAt(Pi-2)!="\\"){Pi--;break}}else if(or&&!hn){++Pi;break}}or&&!hn&&(wt.fatArrowAt=Pi)}}var he={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function pe(qe,wt,vn,Yn,hn,or){this.indented=qe,this.column=wt,this.type=vn,this.prev=hn,this.info=or,Yn!=null&&(this.align=Yn)}function Ee(qe,wt){if(!g)return!1;for(var vn=qe.localVars;vn;vn=vn.next)if(vn.name==wt)return!0;for(var Yn=qe.context;Yn;Yn=Yn.prev)for(var vn=Yn.vars;vn;vn=vn.next)if(vn.name==wt)return!0}function me(qe,wt,vn,Yn,hn){var or=qe.cc;for(Se.state=qe,Se.stream=hn,Se.marked=null,Se.cc=or,Se.style=wt,qe.lexical.hasOwnProperty("align")||(qe.lexical.align=!0);;){var Pi=or.length?or.pop():d?it:Pe;if(Pi(vn,Yn)){for(;or.length&&or[or.length-1].lex;)or.pop()();return Se.marked?Se.marked:vn=="variable"&&Ee(qe,Yn)?"variable-2":wt}}}var Se={state:null,column:null,marked:null,cc:null};function De(){for(var qe=arguments.length-1;qe>=0;qe--)Se.cc.push(arguments[qe])}function be(){return De.apply(null,arguments),!0}function at(qe,wt){for(var vn=wt;vn;vn=vn.next)if(vn.name==qe)return!0;return!1}function Ze(qe){var wt=Se.state;if(Se.marked="def",!!g){if(wt.context){if(wt.lexical.info=="var"&&wt.context&&wt.context.block){var vn=Je(qe,wt.context);if(vn!=null){wt.context=vn;return}}else if(!at(qe,wt.localVars)){wt.localVars=new Fe(qe,wt.localVars);return}}i.globalVars&&!at(qe,wt.globalVars)&&(wt.globalVars=new Fe(qe,wt.globalVars))}}function Je(qe,wt){if(wt)if(wt.block){var vn=Je(qe,wt.prev);return vn?vn==wt.prev?wt:new Me(vn,wt.vars,!0):null}else return at(qe,wt.vars)?wt:new Me(wt.prev,new Fe(qe,wt.vars),!1);else return null}function We(qe){return qe=="public"||qe=="private"||qe=="protected"||qe=="abstract"||qe=="readonly"}function Me(qe,wt,vn){this.prev=qe,this.vars=wt,this.block=vn}function Fe(qe,wt){this.name=qe,this.next=wt}var He=new Fe("this",new Fe("arguments",null));function bt(){Se.state.context=new Me(Se.state.context,Se.state.localVars,!1),Se.state.localVars=He}function Yt(){Se.state.context=new Me(Se.state.context,Se.state.localVars,!0),Se.state.localVars=null}bt.lex=Yt.lex=!0;function gt(){Se.state.localVars=Se.state.context.vars,Se.state.context=Se.state.context.prev}gt.lex=!0;function Lt(qe,wt){var vn=function(){var Yn=Se.state,hn=Yn.indented;if(Yn.lexical.type=="stat")hn=Yn.lexical.indented;else for(var or=Yn.lexical;or&&or.type==")"&&or.align;or=or.prev)hn=or.indented;Yn.lexical=new pe(hn,Se.stream.column(),qe,null,Yn.lexical,wt)};return vn.lex=!0,vn}function Kt(){var qe=Se.state;qe.lexical.prev&&(qe.lexical.type==")"&&(qe.indented=qe.lexical.indented),qe.lexical=qe.lexical.prev)}Kt.lex=!0;function Ue(qe){function wt(vn){return vn==qe?be():qe==";"||vn=="}"||vn==")"||vn=="]"?De():be(wt)}return wt}function Pe(qe,wt){return qe=="var"?be(Lt("vardef",wt),Tn,Ue(";"),Kt):qe=="keyword a"?be(Lt("form"),ft,Pe,Kt):qe=="keyword b"?be(Lt("form"),Pe,Kt):qe=="keyword d"?Se.stream.match(/^\s*$/,!1)?be():be(Lt("stat"),rn,Ue(";"),Kt):qe=="debugger"?be(Ue(";")):qe=="{"?be(Lt("}"),Yt,Ht,Kt,gt):qe==";"?be():qe=="if"?(Se.state.lexical.info=="else"&&Se.state.cc[Se.state.cc.length-1]==Kt&&Se.state.cc.pop()(),be(Lt("form"),ft,Pe,Kt,er)):qe=="function"?be(ur):qe=="for"?be(Lt("form"),Yt,Xr,Pe,gt,Kt):qe=="class"||b&&wt=="interface"?(Se.marked="keyword",be(Lt("form",qe=="class"?qe:wt),io,Kt)):qe=="variable"?b&&wt=="declare"?(Se.marked="keyword",be(Pe)):b&&(wt=="module"||wt=="enum"||wt=="type")&&Se.stream.match(/^\s*\w/,!1)?(Se.marked="keyword",wt=="enum"?be(Tr):wt=="type"?be(Ma,Ue("operator"),ve,Ue(";")):be(Lt("form"),On,Ue("{"),Lt("}"),Ht,Kt,Kt)):b&&wt=="namespace"?(Se.marked="keyword",be(Lt("form"),it,Pe,Kt)):b&&wt=="abstract"?(Se.marked="keyword",be(Pe)):be(Lt("stat"),vr):qe=="switch"?be(Lt("form"),ft,Ue("{"),Lt("}","switch"),Yt,Ht,Kt,Kt,gt):qe=="case"?be(it,Ue(":")):qe=="default"?be(Ue(":")):qe=="catch"?be(Lt("form"),bt,Be,Pe,Kt,gt):qe=="export"?be(Lt("stat"),Sa,Kt):qe=="import"?be(Lt("stat"),sa,Kt):qe=="async"?be(Pe):wt=="@"?be(it,Pe):De(Lt("stat"),it,Ue(";"),Kt)}function Be(qe){if(qe=="(")return be(qi,Ue(")"))}function it(qe,wt){return Ut(qe,wt,!1)}function _t(qe,wt){return Ut(qe,wt,!0)}function ft(qe){return qe!="("?De():be(Lt(")"),rn,Ue(")"),Kt)}function Ut(qe,wt,vn){if(Se.state.fatArrowAt==Se.stream.start){var Yn=vn?Dn:rr;if(qe=="(")return be(bt,Lt(")"),nt(qi,")"),Kt,Ue("=>"),Yn,gt);if(qe=="variable")return De(bt,On,Ue("=>"),Yn,gt)}var hn=vn?_n:Dt;return he.hasOwnProperty(qe)?be(hn):qe=="function"?be(ur,hn):qe=="class"||b&&wt=="interface"?(Se.marked="keyword",be(Lt("form"),vi,Kt)):qe=="keyword c"||qe=="async"?be(vn?_t:it):qe=="("?be(Lt(")"),rn,Ue(")"),Kt,hn):qe=="operator"||qe=="spread"?be(vn?_t:it):qe=="["?be(Lt("]"),oo,Kt,hn):qe=="{"?St(Qe,"}",null,hn):qe=="quasi"?De(qn,hn):qe=="new"?be(pn(vn)):be()}function rn(qe){return qe.match(/[;\}\)\],]/)?De():De(it)}function Dt(qe,wt){return qe==","?be(rn):_n(qe,wt,!1)}function _n(qe,wt,vn){var Yn=vn==!1?Dt:_n,hn=vn==!1?it:_t;if(qe=="=>")return be(bt,vn?Dn:rr,gt);if(qe=="operator")return/\+\+|--/.test(wt)||b&&wt=="!"?be(Yn):b&&wt=="<"&&Se.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?be(Lt(">"),nt(ve,">"),Kt,Yn):wt=="?"?be(it,Ue(":"),hn):be(hn);if(qe=="quasi")return De(qn,Yn);if(qe!=";"){if(qe=="(")return St(_t,")","call",Yn);if(qe==".")return be(Jn,Yn);if(qe=="[")return be(Lt("]"),rn,Ue("]"),Kt,Yn);if(b&&wt=="as")return Se.marked="keyword",be(ve,Yn);if(qe=="regexp")return Se.state.lastType=Se.marked="operator",Se.stream.backUp(Se.stream.pos-Se.stream.start-1),be(hn)}}function qn(qe,wt){return qe!="quasi"?De():wt.slice(wt.length-2)!="${"?be(qn):be(rn,tn)}function tn(qe){if(qe=="}")return Se.marked="string-2",Se.state.tokenize=ne,be(qn)}function rr(qe){return oe(Se.stream,Se.state),De(qe=="{"?Pe:it)}function Dn(qe){return oe(Se.stream,Se.state),De(qe=="{"?Pe:_t)}function pn(qe){return function(wt){return wt=="."?be(qe?dr:Zn):wt=="variable"&&b?be(Gt,qe?_n:Dt):De(qe?_t:it)}}function Zn(qe,wt){if(wt=="target")return Se.marked="keyword",be(Dt)}function dr(qe,wt){if(wt=="target")return Se.marked="keyword",be(_n)}function vr(qe){return qe==":"?be(Kt,Pe):De(Dt,Ue(";"),Kt)}function Jn(qe){if(qe=="variable")return Se.marked="property",be()}function Qe(qe,wt){if(qe=="async")return Se.marked="property",be(Qe);if(qe=="variable"||Se.style=="keyword"){if(Se.marked="property",wt=="get"||wt=="set")return be(ce);var vn;return b&&Se.state.fatArrowAt==Se.stream.start&&(vn=Se.stream.match(/^\s*:\s*/,!1))&&(Se.state.fatArrowAt=Se.stream.pos+vn[0].length),be(fe)}else{if(qe=="number"||qe=="string")return Se.marked=o?"property":Se.style+" property",be(fe);if(qe=="jsonld-keyword")return be(fe);if(b&&We(wt))return Se.marked="keyword",be(Qe);if(qe=="[")return be(it,sn,Ue("]"),fe);if(qe=="spread")return be(_t,fe);if(wt=="*")return Se.marked="keyword",be(Qe);if(qe==":")return De(fe)}}function ce(qe){return qe!="variable"?De(fe):(Se.marked="property",be(ur))}function fe(qe){if(qe==":")return be(_t);if(qe=="(")return De(ur)}function nt(qe,wt,vn){function Yn(hn,or){if(vn?vn.indexOf(hn)>-1:hn==","){var Pi=Se.state.lexical;return Pi.info=="call"&&(Pi.pos=(Pi.pos||0)+1),be(function(go,Cs){return go==wt||Cs==wt?De():De(qe)},Yn)}return hn==wt||or==wt?be():vn&&vn.indexOf(";")>-1?De(qe):be(Ue(wt))}return function(hn,or){return hn==wt||or==wt?be():De(qe,Yn)}}function St(qe,wt,vn){for(var Yn=3;Yn<arguments.length;Yn++)Se.cc.push(arguments[Yn]);return be(Lt(wt,vn),nt(qe,wt),Kt)}function Ht(qe){return qe=="}"?be():De(Pe,Ht)}function sn(qe,wt){if(b){if(qe==":")return be(ve);if(wt=="?")return be(sn)}}function tr(qe,wt){if(b&&(qe==":"||wt=="in"))return be(ve)}function Oe(qe){if(b&&qe==":")return Se.stream.match(/^\s*\w+\s+is\b/,!1)?be(it,se,ve):be(ve)}function se(qe,wt){if(wt=="is")return Se.marked="keyword",be()}function ve(qe,wt){if(wt=="keyof"||wt=="typeof"||wt=="infer"||wt=="readonly")return Se.marked="keyword",be(wt=="typeof"?_t:ve);if(qe=="variable"||wt=="void")return Se.marked="type",be(qt);if(wt=="|"||wt=="&")return be(ve);if(qe=="string"||qe=="number"||qe=="atom")return be(qt);if(qe=="[")return be(Lt("]"),nt(ve,"]",","),Kt,qt);if(qe=="{")return be(Lt("}"),Ne,Kt,qt);if(qe=="(")return be(nt(dt,")"),p,qt);if(qe=="<")return be(nt(ve,">"),ve);if(qe=="quasi")return De(rt,qt)}function p(qe){if(qe=="=>")return be(ve)}function Ne(qe){return qe.match(/[\}\)\]]/)?be():qe==","||qe==";"?be(Ne):De(Ye,Ne)}function Ye(qe,wt){if(qe=="variable"||Se.style=="keyword")return Se.marked="property",be(Ye);if(wt=="?"||qe=="number"||qe=="string")return be(Ye);if(qe==":")return be(ve);if(qe=="[")return be(Ue("variable"),tr,Ue("]"),Ye);if(qe=="(")return De(mo,Ye);if(!qe.match(/[;\}\)\],]/))return be()}function rt(qe,wt){return qe!="quasi"?De():wt.slice(wt.length-2)!="${"?be(rt):be(ve,ct)}function ct(qe){if(qe=="}")return Se.marked="string-2",Se.state.tokenize=ne,be(rt)}function dt(qe,wt){return qe=="variable"&&Se.stream.match(/^\s*[?:]/,!1)||wt=="?"?be(dt):qe==":"?be(ve):qe=="spread"?be(dt):De(ve)}function qt(qe,wt){if(wt=="<")return be(Lt(">"),nt(ve,">"),Kt,qt);if(wt=="|"||qe=="."||wt=="&")return be(ve);if(qe=="[")return be(ve,Ue("]"),qt);if(wt=="extends"||wt=="implements")return Se.marked="keyword",be(ve);if(wt=="?")return be(ve,Ue(":"),ve)}function Gt(qe,wt){if(wt=="<")return be(Lt(">"),nt(ve,">"),Kt,qt)}function jt(){return De(ve,xt)}function xt(qe,wt){if(wt=="=")return be(ve)}function Tn(qe,wt){return wt=="enum"?(Se.marked="keyword",be(Tr)):De(On,sn,on,Rn)}function On(qe,wt){if(b&&We(wt))return Se.marked="keyword",be(On);if(qe=="variable")return Ze(wt),be();if(qe=="spread")return be(On);if(qe=="[")return St(Er,"]");if(qe=="{")return St(gr,"}")}function gr(qe,wt){return qe=="variable"&&!Se.stream.match(/^\s*:/,!1)?(Ze(wt),be(on)):(qe=="variable"&&(Se.marked="property"),qe=="spread"?be(On):qe=="}"?De():qe=="["?be(it,Ue("]"),Ue(":"),gr):be(Ue(":"),On,on))}function Er(){return De(On,on)}function on(qe,wt){if(wt=="=")return be(_t)}function Rn(qe){if(qe==",")return be(Tn)}function er(qe,wt){if(qe=="keyword b"&&wt=="else")return be(Lt("form","else"),Pe,Kt)}function Xr(qe,wt){if(wt=="await")return be(Xr);if(qe=="(")return be(Lt(")"),Ur,Kt)}function Ur(qe){return qe=="var"?be(Tn,Dr):qe=="variable"?be(Dr):De(Dr)}function Dr(qe,wt){return qe==")"?be():qe==";"?be(Dr):wt=="in"||wt=="of"?(Se.marked="keyword",be(it,Dr)):De(it,Dr)}function ur(qe,wt){if(wt=="*")return Se.marked="keyword",be(ur);if(qe=="variable")return Ze(wt),be(ur);if(qe=="(")return be(bt,Lt(")"),nt(qi,")"),Kt,Oe,Pe,gt);if(b&&wt=="<")return be(Lt(">"),nt(jt,">"),Kt,ur)}function mo(qe,wt){if(wt=="*")return Se.marked="keyword",be(mo);if(qe=="variable")return Ze(wt),be(mo);if(qe=="(")return be(bt,Lt(")"),nt(qi,")"),Kt,Oe,gt);if(b&&wt=="<")return be(Lt(">"),nt(jt,">"),Kt,mo)}function Ma(qe,wt){if(qe=="keyword"||qe=="variable")return Se.marked="type",be(Ma);if(wt=="<")return be(Lt(">"),nt(jt,">"),Kt)}function qi(qe,wt){return wt=="@"&&be(it,qi),qe=="spread"?be(qi):b&&We(wt)?(Se.marked="keyword",be(qi)):b&&qe=="this"?be(sn,on):De(On,sn,on)}function vi(qe,wt){return qe=="variable"?io(qe,wt):Do(qe,wt)}function io(qe,wt){if(qe=="variable")return Ze(wt),be(Do)}function Do(qe,wt){if(wt=="<")return be(Lt(">"),nt(jt,">"),Kt,Do);if(wt=="extends"||wt=="implements"||b&&qe==",")return wt=="implements"&&(Se.marked="keyword"),be(b?ve:it,Do);if(qe=="{")return be(Lt("}"),Ti,Kt)}function Ti(qe,wt){if(qe=="async"||qe=="variable"&&(wt=="static"||wt=="get"||wt=="set"||b&&We(wt))&&Se.stream.match(/^\s+#?[\w$\xa1-\uffff]/,!1))return Se.marked="keyword",be(Ti);if(qe=="variable"||Se.style=="keyword")return Se.marked="property",be(ja,Ti);if(qe=="number"||qe=="string")return be(ja,Ti);if(qe=="[")return be(it,sn,Ue("]"),ja,Ti);if(wt=="*")return Se.marked="keyword",be(Ti);if(b&&qe=="(")return De(mo,Ti);if(qe==";"||qe==",")return be(Ti);if(qe=="}")return be();if(wt=="@")return be(it,Ti)}function ja(qe,wt){if(wt=="!"||wt=="?")return be(ja);if(qe==":")return be(ve,on);if(wt=="=")return be(_t);var vn=Se.state.lexical.prev,Yn=vn&&vn.info=="interface";return De(Yn?mo:ur)}function Sa(qe,wt){return wt=="*"?(Se.marked="keyword",be(Hl,Ue(";"))):wt=="default"?(Se.marked="keyword",be(it,Ue(";"))):qe=="{"?be(nt(ns,"}"),Hl,Ue(";")):De(Pe)}function ns(qe,wt){if(wt=="as")return Se.marked="keyword",be(Ue("variable"));if(qe=="variable")return De(_t,ns)}function sa(qe){return qe=="string"?be():qe=="("?De(it):qe=="."?De(Dt):De(Al,uo,Hl)}function Al(qe,wt){return qe=="{"?St(Al,"}"):(qe=="variable"&&Ze(wt),wt=="*"&&(Se.marked="keyword"),be(Fu))}function uo(qe){if(qe==",")return be(Al,uo)}function Fu(qe,wt){if(wt=="as")return Se.marked="keyword",be(Al)}function Hl(qe,wt){if(wt=="from")return Se.marked="keyword",be(it)}function oo(qe){return qe=="]"?be():De(nt(_t,"]"))}function Tr(){return De(Lt("form"),On,Ue("{"),Lt("}"),nt(tl,"}"),Kt,Kt)}function tl(){return De(On,on)}function Bs(qe,wt){return qe.lastType=="operator"||qe.lastType==","||I.test(wt.charAt(0))||/[,.]/.test(wt.charAt(0))}function Js(qe,wt,vn){return wt.tokenize==ie&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(wt.lastType)||wt.lastType=="quasi"&&/\{\s*$/.test(qe.string.slice(0,qe.pos-(vn||0)))}return{startState:function(qe){var wt={tokenize:ie,lastType:"sof",cc:[],lexical:new pe((qe||0)-s,0,"block",!1),localVars:i.localVars,context:i.localVars&&new Me(null,null,!1),indented:qe||0};return i.globalVars&&typeof i.globalVars=="object"&&(wt.globalVars=i.globalVars),wt},token:function(qe,wt){if(qe.sol()&&(wt.lexical.hasOwnProperty("align")||(wt.lexical.align=!1),wt.indented=qe.indentation(),oe(qe,wt)),wt.tokenize!=V&&qe.eatSpace())return null;var vn=wt.tokenize(qe,wt);return j=="comment"?vn:(wt.lastType=j=="operator"&&(q=="++"||q=="--")?"incdec":j,me(wt,vn,j,q,qe))},indent:function(qe,wt){if(qe.tokenize==V||qe.tokenize==ne)return t.Pass;if(qe.tokenize!=ie)return 0;var vn=wt&&wt.charAt(0),Yn=qe.lexical,hn;if(!/^\s*else\b/.test(wt))for(var or=qe.cc.length-1;or>=0;--or){var Pi=qe.cc[or];if(Pi==Kt)Yn=Yn.prev;else if(Pi!=er&&Pi!=gt)break}for(;(Yn.type=="stat"||Yn.type=="form")&&(vn=="}"||(hn=qe.cc[qe.cc.length-1])&&(hn==Dt||hn==_n)&&!/^[,\.=+\-*:?[\(]/.test(wt));)Yn=Yn.prev;a&&Yn.type==")"&&Yn.prev.type=="stat"&&(Yn=Yn.prev);var go=Yn.type,Cs=vn==go;return go=="vardef"?Yn.indented+(qe.lastType=="operator"||qe.lastType==","?Yn.info.length+1:0):go=="form"&&vn=="{"?Yn.indented:go=="form"?Yn.indented+s:go=="stat"?Yn.indented+(Bs(qe,wt)?a||s:0):Yn.info=="switch"&&!Cs&&i.doubleIndentSwitch!=!1?Yn.indented+(/^(?:case|default)\b/.test(wt)?s:2*s):Yn.align?Yn.column+(Cs?0:1):Yn.indented+(Cs?0:s)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:d?null:"/*",blockCommentEnd:d?null:"*/",blockCommentContinue:d?null:" * ",lineComment:d?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:d?"json":"javascript",jsonldMode:o,jsonMode:d,expressionAllowed:Js,skipExpression:function(qe){me(qe,"atom","atom","true",new t.StringStream("",2,null))}}}),t.registerHelper("wordChars","javascript",/[\w$]/),t.defineMIME("text/javascript","javascript"),t.defineMIME("text/ecmascript","javascript"),t.defineMIME("application/javascript","javascript"),t.defineMIME("application/x-javascript","javascript"),t.defineMIME("application/ecmascript","javascript"),t.defineMIME("application/json",{name:"javascript",json:!0}),t.defineMIME("application/x-json",{name:"javascript",json:!0}),t.defineMIME("application/manifest+json",{name:"javascript",json:!0}),t.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),t.defineMIME("text/typescript",{name:"javascript",typescript:!0}),t.defineMIME("application/typescript",{name:"javascript",typescript:!0})})}()),OT.exports}xue();var kT={exports:{}},TT;function wue(){return TT||(TT=1,function(n,e){(function(t){t(g3())})(function(t){var r="CodeMirror-lint-markers",i="CodeMirror-lint-line-";function s(G,oe,he){var pe=document.createElement("div");pe.className="CodeMirror-lint-tooltip cm-s-"+G.options.theme,pe.appendChild(he.cloneNode(!0)),G.state.lint.options.selfContain?G.getWrapperElement().appendChild(pe):document.body.appendChild(pe);function Ee(me){if(!pe.parentNode)return t.off(document,"mousemove",Ee);var Se=Math.max(0,me.clientY-pe.offsetHeight-5),De=Math.max(0,Math.min(me.clientX+5,pe.ownerDocument.defaultView.innerWidth-pe.offsetWidth));pe.style.top=Se+"px",pe.style.left=De+"px"}return t.on(document,"mousemove",Ee),Ee(oe),pe.style.opacity!=null&&(pe.style.opacity=1),pe}function a(G){G.parentNode&&G.parentNode.removeChild(G)}function o(G){G.parentNode&&(G.style.opacity==null&&a(G),G.style.opacity=0,setTimeout(function(){a(G)},600))}function d(G,oe,he,pe){var Ee=s(G,oe,he);function me(){t.off(pe,"mouseout",me),Ee&&(o(Ee),Ee=null)}var Se=setInterval(function(){if(Ee)for(var De=pe;;De=De.parentNode){if(De&&De.nodeType==11&&(De=De.host),De==document.body)return;if(!De){me();break}}if(!Ee)return clearInterval(Se)},400);t.on(pe,"mouseout",me)}function g(G,oe,he){this.marked=[],oe instanceof Function&&(oe={getAnnotations:oe}),(!oe||oe===!0)&&(oe={}),this.options={},this.linterOptions=oe.options||{};for(var pe in b)this.options[pe]=b[pe];for(var pe in oe)b.hasOwnProperty(pe)?oe[pe]!=null&&(this.options[pe]=oe[pe]):oe.options||(this.linterOptions[pe]=oe[pe]);this.timeout=null,this.hasGutter=he,this.onMouseOver=function(Ee){ne(G,Ee)},this.waitingFor=0}var b={highlightLines:!1,tooltips:!0,delay:500,lintOnChange:!0,getAnnotations:null,async:!1,selfContain:null,formatAnnotation:null,onUpdateLinting:null};function E(G){var oe=G.state.lint;oe.hasGutter&&G.clearGutter(r),oe.options.highlightLines&&S(G);for(var he=0;he<oe.marked.length;++he)oe.marked[he].clear();oe.marked.length=0}function S(G){G.eachLine(function(oe){var he=oe.wrapClass&&/\bCodeMirror-lint-line-\w+\b/.exec(oe.wrapClass);he&&G.removeLineClass(oe,"wrap",he[0])})}function I(G,oe,he,pe,Ee){var me=document.createElement("div"),Se=me;return me.className="CodeMirror-lint-marker CodeMirror-lint-marker-"+he,pe&&(Se=me.appendChild(document.createElement("div")),Se.className="CodeMirror-lint-marker CodeMirror-lint-marker-multiple"),Ee!=!1&&t.on(Se,"mouseover",function(De){d(G,De,oe,Se)}),me}function P(G,oe){return G=="error"?G:oe}function z(G){for(var oe=[],he=0;he<G.length;++he){var pe=G[he],Ee=pe.from.line;(oe[Ee]||(oe[Ee]=[])).push(pe)}return oe}function j(G){var oe=G.severity;oe||(oe="error");var he=document.createElement("div");return he.className="CodeMirror-lint-message CodeMirror-lint-message-"+oe,typeof G.messageHTML<"u"?he.innerHTML=G.messageHTML:he.appendChild(document.createTextNode(G.message)),he}function q(G,oe){var he=G.state.lint,pe=++he.waitingFor;function Ee(){pe=-1,G.off("change",Ee)}G.on("change",Ee),oe(G.getValue(),function(me,Se){G.off("change",Ee),he.waitingFor==pe&&(Se&&me instanceof t&&(me=Se),G.operation(function(){ie(G,me)}))},he.linterOptions,G)}function Y(G){var oe=G.state.lint;if(oe){var he=oe.options,pe=he.getAnnotations||G.getHelper(t.Pos(0,0),"lint");if(pe)if(he.async||pe.async)q(G,pe);else{var Ee=pe(G.getValue(),oe.linterOptions,G);if(!Ee)return;Ee.then?Ee.then(function(me){G.operation(function(){ie(G,me)})}):G.operation(function(){ie(G,Ee)})}}}function ie(G,oe){var he=G.state.lint;if(he){var pe=he.options;E(G);for(var Ee=z(oe),me=0;me<Ee.length;++me){var Se=Ee[me];if(Se){for(var De=null,be=he.hasGutter&&document.createDocumentFragment(),at=0;at<Se.length;++at){var Ze=Se[at],Je=Ze.severity;Je||(Je="error"),De=P(De,Je),pe.formatAnnotation&&(Ze=pe.formatAnnotation(Ze)),he.hasGutter&&be.appendChild(j(Ze)),Ze.to&&he.marked.push(G.markText(Ze.from,Ze.to,{className:"CodeMirror-lint-mark CodeMirror-lint-mark-"+Je,__annotation:Ze}))}he.hasGutter&&G.setGutterMarker(me,r,I(G,be,De,Se.length>1,pe.tooltips)),pe.highlightLines&&G.addLineClass(me,"wrap",i+De)}}pe.onUpdateLinting&&pe.onUpdateLinting(oe,Ee,G)}}function te(G){var oe=G.state.lint;oe&&(clearTimeout(oe.timeout),oe.timeout=setTimeout(function(){Y(G)},oe.options.delay))}function V(G,oe,he){for(var pe=he.target||he.srcElement,Ee=document.createDocumentFragment(),me=0;me<oe.length;me++){var Se=oe[me];Ee.appendChild(j(Se))}d(G,he,Ee,pe)}function ne(G,oe){var he=oe.target||oe.srcElement;if(/\bCodeMirror-lint-mark-/.test(he.className)){for(var pe=he.getBoundingClientRect(),Ee=(pe.left+pe.right)/2,me=(pe.top+pe.bottom)/2,Se=G.findMarksAt(G.coordsChar({left:Ee,top:me},"client")),De=[],be=0;be<Se.length;++be){var at=Se[be].__annotation;at&&De.push(at)}De.length&&V(G,De,oe)}}t.defineOption("lint",!1,function(G,oe,he){if(he&&he!=t.Init&&(E(G),G.state.lint.options.lintOnChange!==!1&&G.off("change",te),t.off(G.getWrapperElement(),"mouseover",G.state.lint.onMouseOver),clearTimeout(G.state.lint.timeout),delete G.state.lint),oe){for(var pe=G.getOption("gutters"),Ee=!1,me=0;me<pe.length;++me)pe[me]==r&&(Ee=!0);var Se=G.state.lint=new g(G,oe,Ee);Se.options.lintOnChange&&G.on("change",te),Se.options.tooltips!=!1&&Se.options.tooltips!="gutter"&&t.on(G.getWrapperElement(),"mouseover",Se.onMouseOver),Y(G)}}),t.defineExtension("performLint",function(){Y(this)})})}()),kT.exports}wue();var PT={exports:{}},KT;function Mue(){return KT||(KT=1,function(n,e){(function(t){t(g3())})(function(t){var r=/MSIE \d/.test(navigator.userAgent)&&(document.documentMode==null||document.documentMode<8),i=t.Pos,s={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<","<":">>",">":"<<"};function a(S){return S&&S.bracketRegex||/[(){}[\]]/}function o(S,I,P){var z=S.getLineHandle(I.line),j=I.ch-1,q=P&&P.afterCursor;q==null&&(q=/(^| )cm-fat-cursor($| )/.test(S.getWrapperElement().className));var Y=a(P),ie=!q&&j>=0&&Y.test(z.text.charAt(j))&&s[z.text.charAt(j)]||Y.test(z.text.charAt(j+1))&&s[z.text.charAt(++j)];if(!ie)return null;var te=ie.charAt(1)==">"?1:-1;if(P&&P.strict&&te>0!=(j==I.ch))return null;var V=S.getTokenTypeAt(i(I.line,j+1)),ne=d(S,i(I.line,j+(te>0?1:0)),te,V,P);return ne==null?null:{from:i(I.line,j),to:ne&&ne.pos,match:ne&&ne.ch==ie.charAt(0),forward:te>0}}function d(S,I,P,z,j){for(var q=j&&j.maxScanLineLength||1e4,Y=j&&j.maxScanLines||1e3,ie=[],te=a(j),V=P>0?Math.min(I.line+Y,S.lastLine()+1):Math.max(S.firstLine()-1,I.line-Y),ne=I.line;ne!=V;ne+=P){var G=S.getLine(ne);if(G){var oe=P>0?0:G.length-1,he=P>0?G.length:-1;if(!(G.length>q))for(ne==I.line&&(oe=I.ch-(P<0?1:0));oe!=he;oe+=P){var pe=G.charAt(oe);if(te.test(pe)&&(z===void 0||(S.getTokenTypeAt(i(ne,oe+1))||"")==(z||""))){var Ee=s[pe];if(Ee&&Ee.charAt(1)==">"==P>0)ie.push(pe);else if(ie.length)ie.pop();else return{pos:i(ne,oe),ch:pe}}}}}return ne-P==(P>0?S.lastLine():S.firstLine())?!1:null}function g(S,I,P){for(var z=S.state.matchBrackets.maxHighlightLineLength||1e3,j=P&&P.highlightNonMatching,q=[],Y=S.listSelections(),ie=0;ie<Y.length;ie++){var te=Y[ie].empty()&&o(S,Y[ie].head,P);if(te&&(te.match||j!==!1)&&S.getLine(te.from.line).length<=z){var V=te.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";q.push(S.markText(te.from,i(te.from.line,te.from.ch+1),{className:V})),te.to&&S.getLine(te.to.line).length<=z&&q.push(S.markText(te.to,i(te.to.line,te.to.ch+1),{className:V}))}}if(q.length){r&&S.state.focused&&S.focus();var ne=function(){S.operation(function(){for(var G=0;G<q.length;G++)q[G].clear()})};if(I)setTimeout(ne,800);else return ne}}function b(S){S.operation(function(){S.state.matchBrackets.currentlyHighlighted&&(S.state.matchBrackets.currentlyHighlighted(),S.state.matchBrackets.currentlyHighlighted=null),S.state.matchBrackets.currentlyHighlighted=g(S,!1,S.state.matchBrackets)})}function E(S){S.state.matchBrackets&&S.state.matchBrackets.currentlyHighlighted&&(S.state.matchBrackets.currentlyHighlighted(),S.state.matchBrackets.currentlyHighlighted=null)}t.defineOption("matchBrackets",!1,function(S,I,P){P&&P!=t.Init&&(S.off("cursorActivity",b),S.off("focus",b),S.off("blur",E),E(S)),I&&(S.state.matchBrackets=typeof I=="object"?I:{},S.on("cursorActivity",b),S.on("focus",b),S.on("blur",E))}),t.defineExtension("matchBrackets",function(){g(this,!0)}),t.defineExtension("findMatchingBracket",function(S,I,P){return(P||typeof I=="boolean")&&(P?(P.strict=I,I=P):I=I?{strict:!0}:null),o(this,S,I)}),t.defineExtension("scanForBracket",function(S,I,P,z){return d(this,S,I,P,z)})})}()),PT.exports}Mue();const Sue=/("(?:[^\\"]|\\.)*")|[:,]/g;function yW(n,e={}){const t=JSON.stringify([1],void 0,e.indent===void 0?2:e.indent).slice(2,-3),r=t===""?1/0:e.maxLength===void 0?80:e.maxLength;let{replacer:i}=e;return function s(a,o,d){a&&typeof a.toJSON=="function"&&(a=a.toJSON());const g=JSON.stringify(a,i);if(g===void 0)return g;const b=r-o.length-d;if(g.length<=b){const E=g.replace(Sue,(S,I)=>I||`${S} `);if(E.length<=b)return E}if(i!=null&&(a=JSON.parse(g),i=void 0),typeof a=="object"&&a!==null){const E=o+t,S=[];let I=0,P,z;if(Array.isArray(a)){P="[",z="]";const{length:j}=a;for(;I<j;I++)S.push(s(a[I],E,I===j-1?0:1)||"null")}else{P="{",z="}";const j=Object.keys(a),{length:q}=j;for(;I<q;I++){const Y=j[I],ie=`${JSON.stringify(Y)}: `,te=s(a[Y],E,ie.length+(I===q-1?0:1));te!==void 0&&S.push(ie+te)}}if(S.length>0)return[P,t+S.join(`,
${E}`),z].join(`
${o}`)}return g}(n,"",0)}var Vv={exports:{}},Eue=Vv.exports,DT;function Bue(){return DT||(DT=1,function(n,e){(function(t,r){r(e)})(Eue,function(t){const r={isWhiteSpace:function(Me){return Me===" "||Me===""||Me==="\uFEFF"||Me>="	"&&Me<="\r"||Me===""||Me>=""&&Me<=""||Me==="\u2028"||Me==="\u2029"||Me===""||Me===""||Me===""},isWhiteSpaceJSON:function(Me){return Me===" "||Me==="	"||Me===`
`||Me==="\r"},isLineTerminator:function(Me){return Me===`
`||Me==="\r"||Me==="\u2028"||Me==="\u2029"},isLineTerminatorJSON:function(Me){return Me===`
`||Me==="\r"},isIdentifierStart:function(Me){return Me==="$"||Me==="_"||Me>="A"&&Me<="Z"||Me>="a"&&Me<="z"||Me>=""&&r.NonAsciiIdentifierStart.test(Me)},isIdentifierPart:function(Me){return Me==="$"||Me==="_"||Me>="A"&&Me<="Z"||Me>="a"&&Me<="z"||Me>="0"&&Me<="9"||Me>=""&&r.NonAsciiIdentifierPart.test(Me)},NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F0\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,NonAsciiIdentifierPart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0\u08A2-\u08AC\u08E4-\u08FE\u0900-\u0963\u0966-\u096F\u0971-\u0977\u0979-\u097F\u0981-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C01-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58\u0C59\u0C60-\u0C63\u0C66-\u0C6F\u0C82\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D02\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D57\u0D60-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F0\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191C\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1CD0-\u1CD2\u1CD4-\u1CF6\u1D00-\u1DE6\u1DFC-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA697\uA69F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA827\uA840-\uA873\uA880-\uA8C4\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7B\uAA80-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE26\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/};function i(We){return We>="0"&&We<="9"||We>="A"&&We<="F"||We>="a"&&We<="f"}function s(We){return We>="0"&&We<="7"}function a(We){return We>="0"&&We<="9"}function o(We){return We.charCodeAt(0)===65279}const d={"'":"'",'"':'"',"\\":"\\",b:"\b",f:"\f",n:`
`,r:"\r",t:"	",v:"\v","/":"/"},g=Object.hasOwn,b={};function E(We,Me){(typeof We!="string"||!(We instanceof String))&&(We=String(We));const Fe=Me.mode==="json5",He=Me.ignoreBOM,bt=Me.ignoreComments||Me.mode==="cjson"||Fe,Yt=Me.ignoreTrailingCommas||Fe,gt=Me.ignoreProtoKey,Lt=Me.ignorePrototypeKeys,Kt=Me.allowSingleQuotedStrings||Fe,Ue=Me.allowDuplicateObjectKeys,Pe=Me.reviver,Be=Me.tokenize,it=Me.rawTokens,_t=Me.tokenLocations,ft=Me.tokenPaths,Ut=Fe?r.isLineTerminator:r.isLineTerminatorJSON,rn=Fe?r.isWhiteSpace:r.isWhiteSpaceJSON,Dt=We.length;let _n=0,qn=0,tn=0;const rr=[];let Dn,pn,Zn;if(Be){let Ye=null,rt,ct;Dn=function(){if(Ye!==null)throw Error("internal error, token overlap");rt=_n+1,ct=tn-qn+1,Ye=tn},pn=function(dt,qt){if(Ye!==tn){const Gt={type:dt};it&&(Gt.raw=We.substr(Ye,tn-Ye)),qt!==void 0&&(Gt.value=qt),_t&&(Gt.location={start:{column:ct,line:rt,offset:Ye}}),ft&&(Gt.path=Zn.slice()),rr.push(Gt)}return Ye=null,qt},ft&&(Zn=[])}function dr(){let Ye;return tn<Dt?Ye=`Unexpected token ${JSON.stringify(We[tn])}`:Ye="Unexpected end of input",Ye}function vr(Ye){const rt=tn-qn+1;++_n;const ct=Ee(Ye,We,tn,_n,rt),dt=SyntaxError(ct.message);return dt.reason=Ye,dt.excerpt=ct.excerpt,dt.pointer=ct.pointer,dt.location={start:{column:rt,line:_n,offset:tn}},dt}function Jn(Ye){throw Ye||(Ye=dr()),vr(Ye)}function Qe(Ye){Ye==="\r"&&We[tn]===`
`&&++tn,qn=tn,++_n}function ce(){if(tn<Dt){Dn==null||Dn();const Ye=We[tn++];if(Ye==='"'||Ye==="'"&&Kt){const rt=p(Ye);return pn==null||pn("literal",rt),rt}if(Ye==="{")return pn==null||pn("symbol","{"),tr();if(Ye==="[")return pn==null||pn("symbol","["),Oe();if(Ye==="-"||Ye==="."||a(Ye)||Fe&&(Ye==="+"||Ye==="I"||Ye==="N")){const rt=se();return pn==null||pn("literal",rt),rt}if(Ye==="n")return sn("null"),pn==null||pn("literal",null),null;if(Ye==="t")return sn("true"),pn==null||pn("literal",!0),!0;if(Ye==="f")return sn("false"),pn==null||pn("literal",!1),!1;--tn,pn==null||pn();return}}function fe(){let Ye;if(tn<Dt){Dn==null||Dn();const rt=We[tn++];if(rt==='"'||rt==="'"&&Kt){const ct=p(rt);return pn==null||pn("literal",ct),ct}if(rt==="{")return pn==null||pn("symbol","{"),tr();if(rt==="[")return pn==null||pn("symbol","["),Oe();if(rt==="."||a(rt)){const ct=se();return pn==null||pn("literal",ct),ct}if(Fe&&r.isIdentifierStart(rt)||rt==="\\"&&We[tn]==="u"){const ct=tn-1;if(Ye=ve(),Ye===void 0){tn=ct,pn==null||pn();return}return pn==null||pn("literal",Ye),Ye}--tn,pn==null||pn();return}}function nt(){o(We)&&(Dn==null||Dn(),++tn,pn==null||pn("bom"))}function St(){let Ye;function rt(){Ye||(Ye=!0,--tn,Dn(),++tn)}function ct(){Ye&&(Ye=!1,pn("whitespace"))}for(;tn<Dt;){const dt=We[tn++];if(Ut(dt))Dn&&rt(),Qe(dt);else if(rn(dt))Dn&&rt();else if(dt==="/"&&bt&&(We[tn]==="/"||We[tn]==="*"))Dn&&(--tn,ct(),Dn(),++tn),Ht(We[tn++]==="*"),pn==null||pn("comment");else{--tn;break}}pn&&ct()}function Ht(Ye){for(;tn<Dt;){const rt=We[tn++];if(Ut(rt)){if(!Ye){--tn;return}Qe(rt)}else if(rt==="*"&&Ye&&We[tn]==="/"){++tn;return}}Ye&&Jn("Unclosed multiline comment")}function sn(Ye){const rt=tn;for(let ct=1,dt=Ye.length;ct<dt;++ct)(tn>=Dt||Ye[ct]!==We[tn])&&(tn=rt-1,Jn()),++tn}function tr(){let Ye={},rt=!1;for(;tn<Dt;){St();const ct=fe();Ue===!1&&g(Ye,ct)&&Jn(`Duplicate key: "${ct}"`),St(),Dn==null||Dn();let dt=We[tn++];if(pn==null||pn("symbol",dt),dt==="}"&&ct===void 0)return!Yt&&rt&&(--tn,Jn("Trailing comma in object")),Ye;if(dt===":"&&ct!==void 0){St(),Zn==null||Zn.push(ct);let qt=ce();if(Zn==null||Zn.pop(),qt===void 0&&Jn(`No value found for key "${ct}"`),typeof ct!="string"&&(!Fe||typeof ct!="number")&&Jn(`Wrong key type: "${ct}"`),Lt&&(ct in b||b[ct]!=null)||gt&&ct==="__proto__"||(Pe&&(qt=Pe(ct,qt)),qt!==void 0&&(rt=!0,ct==="__proto__"?Ye=Object.assign(JSON.parse(`{"__proto__":${JSON.stringify(qt)}}`),Ye):Ye[ct]=qt)),St(),Dn==null||Dn(),dt=We[tn++],pn==null||pn("symbol",dt),dt!==","){if(dt==="}")return Ye;Jn()}}else--tn,Jn()}Jn()}function Oe(){const Ye=[];for(;tn<Dt;){St(),Zn==null||Zn.push(Ye.length);let rt=ce();Zn==null||Zn.pop(),St(),Dn==null||Dn();const ct=We[tn++];if(pn==null||pn("symbol",ct),rt!==void 0&&(Pe&&(rt=Pe(String(Ye.length),rt)),rt===void 0?(++Ye.length,rt=!0):Ye.push(rt)),ct===",")rt===void 0&&Jn("Elisions are not supported");else{if(ct==="]")return!Yt&&rt===void 0&&Ye.length&&(--tn,Jn("Trailing comma in array")),Ye;--tn,Jn()}}}function se(){--tn;let Ye=tn,rt=We[tn++];const ct=function(dt){const qt=We.substr(Ye,tn-Ye);let Gt;if(dt?Gt=Number.parseInt(qt.replace(/^0o?/,""),8):Gt=Number(qt),Number.isNaN(Gt))--tn,Jn(`Bad numeric literal - "${We.substr(Ye,tn-Ye+1)}"`);else if(!Fe&&!qt.match(/^-?(0|[1-9][0-9]*)(\.[0-9]+)?(e[+-]?[0-9]+)?$/i))--tn,Jn(`Non-json numeric literal - "${We.substr(Ye,tn-Ye+1)}"`);else return Gt};if((rt==="-"||rt==="+"&&Fe)&&(rt=We[tn++]),rt==="N"&&Fe)return sn("NaN"),Number.NaN;if(rt==="I"&&Fe)return sn("Infinity"),ct();if(rt>="1"&&rt<="9"){for(;tn<Dt&&a(We[tn]);)++tn;rt=We[tn++]}if(rt==="0"){rt=We[tn++];const dt=rt==="o"||rt==="O"||s(rt),qt=rt==="x"||rt==="X";if(Fe&&(dt||qt)){for(;tn<Dt&&(qt?i:s)(We[tn]);)++tn;let Gt=1;return We[Ye]==="-"?(Gt=-1,++Ye):We[Ye]==="+"&&++Ye,Gt*ct(dt)}}if(rt==="."){for(;tn<Dt&&a(We[tn]);)++tn;rt=We[tn++]}if(rt==="e"||rt==="E"){for(rt=We[tn++],(rt==="-"||rt==="+")&&++tn;tn<Dt&&a(We[tn]);)++tn;rt=We[tn++]}return--tn,ct()}function ve(){--tn;let Ye="";for(;tn<Dt;){let rt=We[tn++];if(rt==="\\"&&We[tn]==="u"&&i(We[tn+1])&&i(We[tn+2])&&i(We[tn+3])&&i(We[tn+4])&&(rt=String.fromCharCode(Number.parseInt(We.substr(tn+1,4),16)),tn+=5),Ye.length)if(r.isIdentifierPart(rt))Ye+=rt;else return--tn,Ye;else if(r.isIdentifierStart(rt))Ye+=rt;else return}Jn()}function p(Ye){let rt="";for(;tn<Dt;){let ct=We[tn++];if(ct===Ye)return rt;if(ct==="\\")if(tn>=Dt&&Jn(),ct=We[tn++],d[ct]&&(Fe||ct!=="v"&&(ct!=="'"||Kt)))rt+=d[ct];else if(Fe&&Ut(ct))Qe(ct);else if(ct==="u"||ct==="x"&&Fe){const dt=ct==="u"?4:2;for(let qt=0;qt<dt;++qt)tn>=Dt&&Jn(),i(We[tn])||Jn("Bad escape sequence"),tn++;rt+=String.fromCharCode(Number.parseInt(We.substr(tn-dt,dt),16))}else if(Fe&&s(ct)){let dt;ct<"4"&&s(We[tn])&&s(We[tn+1])?dt=3:s(We[tn])?dt=2:dt=1,tn+=dt-1,rt+=String.fromCharCode(Number.parseInt(We.substr(tn-dt,dt),8))}else Fe?rt+=ct:(--tn,Jn());else Ut(ct)?Jn():(!Fe&&ct.charCodeAt(0)<32&&(--tn,Jn("Unexpected control character")),rt+=ct)}Jn()}He&&nt(),St();let Ne=ce();if(Ne!==void 0||tn<Dt){if(St(),tn>=Dt)return Pe&&(Ne=Pe("",Ne)),Be?rr:Ne;Jn()}else Jn(tn?"No data, only a whitespace":"No data, empty input")}function S(We,Me){return typeof Me=="function"?Me={reviver:Me}:Me||(Me={}),E(We,Me)}function I(We,Me){Me||(Me={});const Fe=Me.tokenize;Me.tokenize=!0;const He=E(We,Me);return Me.tokenize=Fe,He}function P(We){return We.toString().replace(/~/g,"~0").replace(/\//g,"~1")}function z(We){return We.length===0?"":`/${We.map(P).join("/")}`}function j(We){return We.replace(/~1/g,"/").replace(/~0/g,"~")}function q(We){if(We==="")return[];if(We[0]!=="/")throw new Error('Missing initial "/" in the reference');return We.substr(1).split("/").map(j)}function Y(We,Me){const Fe=We.substr(0,Me).split(/\r?\n/),He=Fe.length,bt=Fe[He-1].length+1;return{line:He,column:bt}}function ie(We,Me,Fe){if(Me>1){const He=/\r?\n/g;let bt;for(;bt=He.exec(We);)if(--Me===1)return bt.index+Fe}return Fe-1}function te(We,Me){const Fe=Math.max(0,Me-20),He=We.substr(Fe,Me-Fe);return(Me>20?"...":"")+He.replace(/\r?\n/g,"")}function V(We,Me){let Fe=Math.max(0,Me-20);Fe+=Me-Fe;const He=We.length-Fe;return We.substr(Fe,Math.min(20,He)).replace(/\r?\n/g,"")+(He>20?"...":"")}function ne(We,Me){const Fe=te(We,Me),He=V(We,Me),bt=`${new Array(Fe.length+1).join("-")}^`;return{excerpt:Fe+He,pointer:bt}}function G(We){let Me=We.message.replace("JSON.parse: ","").replace("JSON Parse error: ","");const Fe=Me.charAt(0);return Fe>="a"&&(Me=Fe.toUpperCase()+Me.substr(1)),Me}function oe(We,Me){const Fe=/ in JSON at position (\d+)$/.exec(Me);if(Fe){const He=+Fe[1],bt=Y(We,He);return{offset:He,line:bt.line,column:bt.column,reason:Me.substr(0,Fe.index)}}}function he(We,Me){const Fe=/ end of JSON input$/.exec(Me);if(Fe){const He=We.length,bt=Y(We,He);return{offset:He,line:bt.line,column:bt.column,reason:Me.substr(0,Fe.index+4)}}}function pe(We,Me){const Fe=/ at line (\d+) column (\d+) of the JSON data$/.exec(Me);if(Fe){const He=+Fe[1],bt=+Fe[2];return{offset:ie(We,He,bt),line:He,column:bt,reason:Me.substr(0,Fe.index)}}}function Ee(We,Me,Fe,He,bt){const Yt=ne(Me,Fe),gt=Yt.excerpt;let Lt,Kt;return typeof He=="number"?(Kt=Yt.pointer,Lt=`Parse error on line ${He}, column ${bt}:
${gt}
${Kt}
${We}`):Lt=`Parse error in JSON input:
${gt}
${We}`,{message:Lt,excerpt:gt,pointer:Kt}}function me(We,Me){let Fe=G(Me);const He=oe(We,Fe)||he(We,Fe)||pe(We,Fe);let bt,Yt,gt;He?(bt=He.offset,Yt=He.line,gt=He.column,Fe=He.reason):bt=0,Me.reason=Fe;const Lt=Ee(Fe,We,bt,Yt,gt);return Me.message=Lt.message,Me.excerpt=Lt.excerpt,Lt.pointer&&(Me.pointer=Lt.pointer,Me.location={start:{column:gt,line:Yt,offset:bt}}),Me}function Se(We,Me){try{return JSON.parse(We,Me)}catch(Fe){const He=me(We,Fe);if(Fe.location)throw He;return S(We,Me)}}const De=typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor),be=typeof process<"u"&&process.version.startsWith("v4.");function at(We){return We.ignoreBOM||We.ignoreComments||We.ignoreTrailingCommas||We.allowSingleQuotedStrings||We.allowDuplicateObjectKeys===!1||We.ignoreProtoKey||We.ignorePrototypeKeys||We.mode==="cjson"||We.mode==="json5"||De||be}function Ze(We){if(typeof We=="function")return We;if(We)return We.reviver}function Je(We,Me){return Me||(Me={}),at(Me)?S(We,Me):Se(We,Ze(Me))}t.parse=Je,t.tokenize=I,t.pathToPointer=z,t.pointerToPath=q,t.parseNative=Se,t.parseCustom=S,t.getErrorTexts=Ee,Object.defineProperty(t,"__esModule",{value:!0})})}(Vv,Vv.exports)),Vv.exports}var Oue=Bue(),Jb={exports:{}},Iue=Jb.exports,RT;function kue(){return RT||(RT=1,function(n,e){(function(t,r){n.exports=r()})(Iue,function(){var t=typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{};function r(Pe,Be){return Be={exports:{}},Pe(Be,Be.exports),Be.exports}var i=r(function(Pe){function Be(){var it=0,_t=1,ft=2,Ut=3,rn=4,Dt=5,_n=6,qn=7,tn=8,rr=9,Dn=10,pn=11,Zn=12,dr=13,vr=14,Jn=15,Qe=16,ce=17,fe=0,nt=1,St=2,Ht=3,sn=4;function tr(p,Ne){return 55296<=p.charCodeAt(Ne)&&p.charCodeAt(Ne)<=56319&&56320<=p.charCodeAt(Ne+1)&&p.charCodeAt(Ne+1)<=57343}function Oe(p,Ne){Ne===void 0&&(Ne=0);var Ye=p.charCodeAt(Ne);if(55296<=Ye&&Ye<=56319&&Ne<p.length-1){var rt=Ye,ct=p.charCodeAt(Ne+1);return 56320<=ct&&ct<=57343?(rt-55296)*1024+(ct-56320)+65536:rt}if(56320<=Ye&&Ye<=57343&&Ne>=1){var rt=p.charCodeAt(Ne-1),ct=Ye;return 55296<=rt&&rt<=56319?(rt-55296)*1024+(ct-56320)+65536:ct}return Ye}function se(p,Ne,Ye){var rt=[p].concat(Ne).concat([Ye]),ct=rt[rt.length-2],dt=Ye,qt=rt.lastIndexOf(vr);if(qt>1&&rt.slice(1,qt).every(function(xt){return xt==Ut})&&[Ut,dr,ce].indexOf(p)==-1)return St;var Gt=rt.lastIndexOf(rn);if(Gt>0&&rt.slice(1,Gt).every(function(xt){return xt==rn})&&[Zn,rn].indexOf(ct)==-1)return rt.filter(function(xt){return xt==rn}).length%2==1?Ht:sn;if(ct==it&&dt==_t)return fe;if(ct==ft||ct==it||ct==_t)return dt==vr&&Ne.every(function(xt){return xt==Ut})?St:nt;if(dt==ft||dt==it||dt==_t)return nt;if(ct==_n&&(dt==_n||dt==qn||dt==rr||dt==Dn))return fe;if((ct==rr||ct==qn)&&(dt==qn||dt==tn))return fe;if((ct==Dn||ct==tn)&&dt==tn)return fe;if(dt==Ut||dt==Jn)return fe;if(dt==Dt)return fe;if(ct==Zn)return fe;var jt=rt.indexOf(Ut)!=-1?rt.lastIndexOf(Ut)-1:rt.length-2;return[dr,ce].indexOf(rt[jt])!=-1&&rt.slice(jt+1,-1).every(function(xt){return xt==Ut})&&dt==vr||ct==Jn&&[Qe,ce].indexOf(dt)!=-1?fe:Ne.indexOf(rn)!=-1?St:ct==rn&&dt==rn?fe:nt}this.nextBreak=function(p,Ne){if(Ne===void 0&&(Ne=0),Ne<0)return 0;if(Ne>=p.length-1)return p.length;for(var Ye=ve(Oe(p,Ne)),rt=[],ct=Ne+1;ct<p.length;ct++)if(!tr(p,ct-1)){var dt=ve(Oe(p,ct));if(se(Ye,rt,dt))return ct;rt.push(dt)}return p.length},this.splitGraphemes=function(p){for(var Ne=[],Ye=0,rt;(rt=this.nextBreak(p,Ye))<p.length;)Ne.push(p.slice(Ye,rt)),Ye=rt;return Ye<p.length&&Ne.push(p.slice(Ye)),Ne},this.iterateGraphemes=function(p){var Ne=0,Ye={next:(function(){var rt,ct;return(ct=this.nextBreak(p,Ne))<p.length?(rt=p.slice(Ne,ct),Ne=ct,{value:rt,done:!1}):Ne<p.length?(rt=p.slice(Ne),Ne=p.length,{value:rt,done:!1}):{value:void 0,done:!0}}).bind(this)};return typeof Symbol<"u"&&Symbol.iterator&&(Ye[Symbol.iterator]=function(){return Ye}),Ye},this.countGraphemes=function(p){for(var Ne=0,Ye=0,rt;(rt=this.nextBreak(p,Ye))<p.length;)Ye=rt,Ne++;return Ye<p.length&&Ne++,Ne};function ve(p){return 1536<=p&&p<=1541||p==1757||p==1807||p==2274||p==3406||p==69821||70082<=p&&p<=70083||p==72250||72326<=p&&p<=72329||p==73030?Zn:p==13?it:p==10?_t:0<=p&&p<=9||11<=p&&p<=12||14<=p&&p<=31||127<=p&&p<=159||p==173||p==1564||p==6158||p==8203||8206<=p&&p<=8207||p==8232||p==8233||8234<=p&&p<=8238||8288<=p&&p<=8292||p==8293||8294<=p&&p<=8303||55296<=p&&p<=57343||p==65279||65520<=p&&p<=65528||65529<=p&&p<=65531||113824<=p&&p<=113827||119155<=p&&p<=119162||p==917504||p==917505||917506<=p&&p<=917535||917632<=p&&p<=917759||918e3<=p&&p<=921599?ft:768<=p&&p<=879||1155<=p&&p<=1159||1160<=p&&p<=1161||1425<=p&&p<=1469||p==1471||1473<=p&&p<=1474||1476<=p&&p<=1477||p==1479||1552<=p&&p<=1562||1611<=p&&p<=1631||p==1648||1750<=p&&p<=1756||1759<=p&&p<=1764||1767<=p&&p<=1768||1770<=p&&p<=1773||p==1809||1840<=p&&p<=1866||1958<=p&&p<=1968||2027<=p&&p<=2035||2070<=p&&p<=2073||2075<=p&&p<=2083||2085<=p&&p<=2087||2089<=p&&p<=2093||2137<=p&&p<=2139||2260<=p&&p<=2273||2275<=p&&p<=2306||p==2362||p==2364||2369<=p&&p<=2376||p==2381||2385<=p&&p<=2391||2402<=p&&p<=2403||p==2433||p==2492||p==2494||2497<=p&&p<=2500||p==2509||p==2519||2530<=p&&p<=2531||2561<=p&&p<=2562||p==2620||2625<=p&&p<=2626||2631<=p&&p<=2632||2635<=p&&p<=2637||p==2641||2672<=p&&p<=2673||p==2677||2689<=p&&p<=2690||p==2748||2753<=p&&p<=2757||2759<=p&&p<=2760||p==2765||2786<=p&&p<=2787||2810<=p&&p<=2815||p==2817||p==2876||p==2878||p==2879||2881<=p&&p<=2884||p==2893||p==2902||p==2903||2914<=p&&p<=2915||p==2946||p==3006||p==3008||p==3021||p==3031||p==3072||3134<=p&&p<=3136||3142<=p&&p<=3144||3146<=p&&p<=3149||3157<=p&&p<=3158||3170<=p&&p<=3171||p==3201||p==3260||p==3263||p==3266||p==3270||3276<=p&&p<=3277||3285<=p&&p<=3286||3298<=p&&p<=3299||3328<=p&&p<=3329||3387<=p&&p<=3388||p==3390||3393<=p&&p<=3396||p==3405||p==3415||3426<=p&&p<=3427||p==3530||p==3535||3538<=p&&p<=3540||p==3542||p==3551||p==3633||3636<=p&&p<=3642||3655<=p&&p<=3662||p==3761||3764<=p&&p<=3769||3771<=p&&p<=3772||3784<=p&&p<=3789||3864<=p&&p<=3865||p==3893||p==3895||p==3897||3953<=p&&p<=3966||3968<=p&&p<=3972||3974<=p&&p<=3975||3981<=p&&p<=3991||3993<=p&&p<=4028||p==4038||4141<=p&&p<=4144||4146<=p&&p<=4151||4153<=p&&p<=4154||4157<=p&&p<=4158||4184<=p&&p<=4185||4190<=p&&p<=4192||4209<=p&&p<=4212||p==4226||4229<=p&&p<=4230||p==4237||p==4253||4957<=p&&p<=4959||5906<=p&&p<=5908||5938<=p&&p<=5940||5970<=p&&p<=5971||6002<=p&&p<=6003||6068<=p&&p<=6069||6071<=p&&p<=6077||p==6086||6089<=p&&p<=6099||p==6109||6155<=p&&p<=6157||6277<=p&&p<=6278||p==6313||6432<=p&&p<=6434||6439<=p&&p<=6440||p==6450||6457<=p&&p<=6459||6679<=p&&p<=6680||p==6683||p==6742||6744<=p&&p<=6750||p==6752||p==6754||6757<=p&&p<=6764||6771<=p&&p<=6780||p==6783||6832<=p&&p<=6845||p==6846||6912<=p&&p<=6915||p==6964||6966<=p&&p<=6970||p==6972||p==6978||7019<=p&&p<=7027||7040<=p&&p<=7041||7074<=p&&p<=7077||7080<=p&&p<=7081||7083<=p&&p<=7085||p==7142||7144<=p&&p<=7145||p==7149||7151<=p&&p<=7153||7212<=p&&p<=7219||7222<=p&&p<=7223||7376<=p&&p<=7378||7380<=p&&p<=7392||7394<=p&&p<=7400||p==7405||p==7412||7416<=p&&p<=7417||7616<=p&&p<=7673||7675<=p&&p<=7679||p==8204||8400<=p&&p<=8412||8413<=p&&p<=8416||p==8417||8418<=p&&p<=8420||8421<=p&&p<=8432||11503<=p&&p<=11505||p==11647||11744<=p&&p<=11775||12330<=p&&p<=12333||12334<=p&&p<=12335||12441<=p&&p<=12442||p==42607||42608<=p&&p<=42610||42612<=p&&p<=42621||42654<=p&&p<=42655||42736<=p&&p<=42737||p==43010||p==43014||p==43019||43045<=p&&p<=43046||43204<=p&&p<=43205||43232<=p&&p<=43249||43302<=p&&p<=43309||43335<=p&&p<=43345||43392<=p&&p<=43394||p==43443||43446<=p&&p<=43449||p==43452||p==43493||43561<=p&&p<=43566||43569<=p&&p<=43570||43573<=p&&p<=43574||p==43587||p==43596||p==43644||p==43696||43698<=p&&p<=43700||43703<=p&&p<=43704||43710<=p&&p<=43711||p==43713||43756<=p&&p<=43757||p==43766||p==44005||p==44008||p==44013||p==64286||65024<=p&&p<=65039||65056<=p&&p<=65071||65438<=p&&p<=65439||p==66045||p==66272||66422<=p&&p<=66426||68097<=p&&p<=68099||68101<=p&&p<=68102||68108<=p&&p<=68111||68152<=p&&p<=68154||p==68159||68325<=p&&p<=68326||p==69633||69688<=p&&p<=69702||69759<=p&&p<=69761||69811<=p&&p<=69814||69817<=p&&p<=69818||69888<=p&&p<=69890||69927<=p&&p<=69931||69933<=p&&p<=69940||p==70003||70016<=p&&p<=70017||70070<=p&&p<=70078||70090<=p&&p<=70092||70191<=p&&p<=70193||p==70196||70198<=p&&p<=70199||p==70206||p==70367||70371<=p&&p<=70378||70400<=p&&p<=70401||p==70460||p==70462||p==70464||p==70487||70502<=p&&p<=70508||70512<=p&&p<=70516||70712<=p&&p<=70719||70722<=p&&p<=70724||p==70726||p==70832||70835<=p&&p<=70840||p==70842||p==70845||70847<=p&&p<=70848||70850<=p&&p<=70851||p==71087||71090<=p&&p<=71093||71100<=p&&p<=71101||71103<=p&&p<=71104||71132<=p&&p<=71133||71219<=p&&p<=71226||p==71229||71231<=p&&p<=71232||p==71339||p==71341||71344<=p&&p<=71349||p==71351||71453<=p&&p<=71455||71458<=p&&p<=71461||71463<=p&&p<=71467||72193<=p&&p<=72198||72201<=p&&p<=72202||72243<=p&&p<=72248||72251<=p&&p<=72254||p==72263||72273<=p&&p<=72278||72281<=p&&p<=72283||72330<=p&&p<=72342||72344<=p&&p<=72345||72752<=p&&p<=72758||72760<=p&&p<=72765||p==72767||72850<=p&&p<=72871||72874<=p&&p<=72880||72882<=p&&p<=72883||72885<=p&&p<=72886||73009<=p&&p<=73014||p==73018||73020<=p&&p<=73021||73023<=p&&p<=73029||p==73031||92912<=p&&p<=92916||92976<=p&&p<=92982||94095<=p&&p<=94098||113821<=p&&p<=113822||p==119141||119143<=p&&p<=119145||119150<=p&&p<=119154||119163<=p&&p<=119170||119173<=p&&p<=119179||119210<=p&&p<=119213||119362<=p&&p<=119364||121344<=p&&p<=121398||121403<=p&&p<=121452||p==121461||p==121476||121499<=p&&p<=121503||121505<=p&&p<=121519||122880<=p&&p<=122886||122888<=p&&p<=122904||122907<=p&&p<=122913||122915<=p&&p<=122916||122918<=p&&p<=122922||125136<=p&&p<=125142||125252<=p&&p<=125258||917536<=p&&p<=917631||917760<=p&&p<=917999?Ut:127462<=p&&p<=127487?rn:p==2307||p==2363||2366<=p&&p<=2368||2377<=p&&p<=2380||2382<=p&&p<=2383||2434<=p&&p<=2435||2495<=p&&p<=2496||2503<=p&&p<=2504||2507<=p&&p<=2508||p==2563||2622<=p&&p<=2624||p==2691||2750<=p&&p<=2752||p==2761||2763<=p&&p<=2764||2818<=p&&p<=2819||p==2880||2887<=p&&p<=2888||2891<=p&&p<=2892||p==3007||3009<=p&&p<=3010||3014<=p&&p<=3016||3018<=p&&p<=3020||3073<=p&&p<=3075||3137<=p&&p<=3140||3202<=p&&p<=3203||p==3262||3264<=p&&p<=3265||3267<=p&&p<=3268||3271<=p&&p<=3272||3274<=p&&p<=3275||3330<=p&&p<=3331||3391<=p&&p<=3392||3398<=p&&p<=3400||3402<=p&&p<=3404||3458<=p&&p<=3459||3536<=p&&p<=3537||3544<=p&&p<=3550||3570<=p&&p<=3571||p==3635||p==3763||3902<=p&&p<=3903||p==3967||p==4145||4155<=p&&p<=4156||4182<=p&&p<=4183||p==4228||p==6070||6078<=p&&p<=6085||6087<=p&&p<=6088||6435<=p&&p<=6438||6441<=p&&p<=6443||6448<=p&&p<=6449||6451<=p&&p<=6456||6681<=p&&p<=6682||p==6741||p==6743||6765<=p&&p<=6770||p==6916||p==6965||p==6971||6973<=p&&p<=6977||6979<=p&&p<=6980||p==7042||p==7073||7078<=p&&p<=7079||p==7082||p==7143||7146<=p&&p<=7148||p==7150||7154<=p&&p<=7155||7204<=p&&p<=7211||7220<=p&&p<=7221||p==7393||7410<=p&&p<=7411||p==7415||43043<=p&&p<=43044||p==43047||43136<=p&&p<=43137||43188<=p&&p<=43203||43346<=p&&p<=43347||p==43395||43444<=p&&p<=43445||43450<=p&&p<=43451||43453<=p&&p<=43456||43567<=p&&p<=43568||43571<=p&&p<=43572||p==43597||p==43755||43758<=p&&p<=43759||p==43765||44003<=p&&p<=44004||44006<=p&&p<=44007||44009<=p&&p<=44010||p==44012||p==69632||p==69634||p==69762||69808<=p&&p<=69810||69815<=p&&p<=69816||p==69932||p==70018||70067<=p&&p<=70069||70079<=p&&p<=70080||70188<=p&&p<=70190||70194<=p&&p<=70195||p==70197||70368<=p&&p<=70370||70402<=p&&p<=70403||p==70463||70465<=p&&p<=70468||70471<=p&&p<=70472||70475<=p&&p<=70477||70498<=p&&p<=70499||70709<=p&&p<=70711||70720<=p&&p<=70721||p==70725||70833<=p&&p<=70834||p==70841||70843<=p&&p<=70844||p==70846||p==70849||71088<=p&&p<=71089||71096<=p&&p<=71099||p==71102||71216<=p&&p<=71218||71227<=p&&p<=71228||p==71230||p==71340||71342<=p&&p<=71343||p==71350||71456<=p&&p<=71457||p==71462||72199<=p&&p<=72200||p==72249||72279<=p&&p<=72280||p==72343||p==72751||p==72766||p==72873||p==72881||p==72884||94033<=p&&p<=94078||p==119142||p==119149?Dt:4352<=p&&p<=4447||43360<=p&&p<=43388?_n:4448<=p&&p<=4519||55216<=p&&p<=55238?qn:4520<=p&&p<=4607||55243<=p&&p<=55291?tn:p==44032||p==44060||p==44088||p==44116||p==44144||p==44172||p==44200||p==44228||p==44256||p==44284||p==44312||p==44340||p==44368||p==44396||p==44424||p==44452||p==44480||p==44508||p==44536||p==44564||p==44592||p==44620||p==44648||p==44676||p==44704||p==44732||p==44760||p==44788||p==44816||p==44844||p==44872||p==44900||p==44928||p==44956||p==44984||p==45012||p==45040||p==45068||p==45096||p==45124||p==45152||p==45180||p==45208||p==45236||p==45264||p==45292||p==45320||p==45348||p==45376||p==45404||p==45432||p==45460||p==45488||p==45516||p==45544||p==45572||p==45600||p==45628||p==45656||p==45684||p==45712||p==45740||p==45768||p==45796||p==45824||p==45852||p==45880||p==45908||p==45936||p==45964||p==45992||p==46020||p==46048||p==46076||p==46104||p==46132||p==46160||p==46188||p==46216||p==46244||p==46272||p==46300||p==46328||p==46356||p==46384||p==46412||p==46440||p==46468||p==46496||p==46524||p==46552||p==46580||p==46608||p==46636||p==46664||p==46692||p==46720||p==46748||p==46776||p==46804||p==46832||p==46860||p==46888||p==46916||p==46944||p==46972||p==47e3||p==47028||p==47056||p==47084||p==47112||p==47140||p==47168||p==47196||p==47224||p==47252||p==47280||p==47308||p==47336||p==47364||p==47392||p==47420||p==47448||p==47476||p==47504||p==47532||p==47560||p==47588||p==47616||p==47644||p==47672||p==47700||p==47728||p==47756||p==47784||p==47812||p==47840||p==47868||p==47896||p==47924||p==47952||p==47980||p==48008||p==48036||p==48064||p==48092||p==48120||p==48148||p==48176||p==48204||p==48232||p==48260||p==48288||p==48316||p==48344||p==48372||p==48400||p==48428||p==48456||p==48484||p==48512||p==48540||p==48568||p==48596||p==48624||p==48652||p==48680||p==48708||p==48736||p==48764||p==48792||p==48820||p==48848||p==48876||p==48904||p==48932||p==48960||p==48988||p==49016||p==49044||p==49072||p==49100||p==49128||p==49156||p==49184||p==49212||p==49240||p==49268||p==49296||p==49324||p==49352||p==49380||p==49408||p==49436||p==49464||p==49492||p==49520||p==49548||p==49576||p==49604||p==49632||p==49660||p==49688||p==49716||p==49744||p==49772||p==49800||p==49828||p==49856||p==49884||p==49912||p==49940||p==49968||p==49996||p==50024||p==50052||p==50080||p==50108||p==50136||p==50164||p==50192||p==50220||p==50248||p==50276||p==50304||p==50332||p==50360||p==50388||p==50416||p==50444||p==50472||p==50500||p==50528||p==50556||p==50584||p==50612||p==50640||p==50668||p==50696||p==50724||p==50752||p==50780||p==50808||p==50836||p==50864||p==50892||p==50920||p==50948||p==50976||p==51004||p==51032||p==51060||p==51088||p==51116||p==51144||p==51172||p==51200||p==51228||p==51256||p==51284||p==51312||p==51340||p==51368||p==51396||p==51424||p==51452||p==51480||p==51508||p==51536||p==51564||p==51592||p==51620||p==51648||p==51676||p==51704||p==51732||p==51760||p==51788||p==51816||p==51844||p==51872||p==51900||p==51928||p==51956||p==51984||p==52012||p==52040||p==52068||p==52096||p==52124||p==52152||p==52180||p==52208||p==52236||p==52264||p==52292||p==52320||p==52348||p==52376||p==52404||p==52432||p==52460||p==52488||p==52516||p==52544||p==52572||p==52600||p==52628||p==52656||p==52684||p==52712||p==52740||p==52768||p==52796||p==52824||p==52852||p==52880||p==52908||p==52936||p==52964||p==52992||p==53020||p==53048||p==53076||p==53104||p==53132||p==53160||p==53188||p==53216||p==53244||p==53272||p==53300||p==53328||p==53356||p==53384||p==53412||p==53440||p==53468||p==53496||p==53524||p==53552||p==53580||p==53608||p==53636||p==53664||p==53692||p==53720||p==53748||p==53776||p==53804||p==53832||p==53860||p==53888||p==53916||p==53944||p==53972||p==54e3||p==54028||p==54056||p==54084||p==54112||p==54140||p==54168||p==54196||p==54224||p==54252||p==54280||p==54308||p==54336||p==54364||p==54392||p==54420||p==54448||p==54476||p==54504||p==54532||p==54560||p==54588||p==54616||p==54644||p==54672||p==54700||p==54728||p==54756||p==54784||p==54812||p==54840||p==54868||p==54896||p==54924||p==54952||p==54980||p==55008||p==55036||p==55064||p==55092||p==55120||p==55148||p==55176?rr:44033<=p&&p<=44059||44061<=p&&p<=44087||44089<=p&&p<=44115||44117<=p&&p<=44143||44145<=p&&p<=44171||44173<=p&&p<=44199||44201<=p&&p<=44227||44229<=p&&p<=44255||44257<=p&&p<=44283||44285<=p&&p<=44311||44313<=p&&p<=44339||44341<=p&&p<=44367||44369<=p&&p<=44395||44397<=p&&p<=44423||44425<=p&&p<=44451||44453<=p&&p<=44479||44481<=p&&p<=44507||44509<=p&&p<=44535||44537<=p&&p<=44563||44565<=p&&p<=44591||44593<=p&&p<=44619||44621<=p&&p<=44647||44649<=p&&p<=44675||44677<=p&&p<=44703||44705<=p&&p<=44731||44733<=p&&p<=44759||44761<=p&&p<=44787||44789<=p&&p<=44815||44817<=p&&p<=44843||44845<=p&&p<=44871||44873<=p&&p<=44899||44901<=p&&p<=44927||44929<=p&&p<=44955||44957<=p&&p<=44983||44985<=p&&p<=45011||45013<=p&&p<=45039||45041<=p&&p<=45067||45069<=p&&p<=45095||45097<=p&&p<=45123||45125<=p&&p<=45151||45153<=p&&p<=45179||45181<=p&&p<=45207||45209<=p&&p<=45235||45237<=p&&p<=45263||45265<=p&&p<=45291||45293<=p&&p<=45319||45321<=p&&p<=45347||45349<=p&&p<=45375||45377<=p&&p<=45403||45405<=p&&p<=45431||45433<=p&&p<=45459||45461<=p&&p<=45487||45489<=p&&p<=45515||45517<=p&&p<=45543||45545<=p&&p<=45571||45573<=p&&p<=45599||45601<=p&&p<=45627||45629<=p&&p<=45655||45657<=p&&p<=45683||45685<=p&&p<=45711||45713<=p&&p<=45739||45741<=p&&p<=45767||45769<=p&&p<=45795||45797<=p&&p<=45823||45825<=p&&p<=45851||45853<=p&&p<=45879||45881<=p&&p<=45907||45909<=p&&p<=45935||45937<=p&&p<=45963||45965<=p&&p<=45991||45993<=p&&p<=46019||46021<=p&&p<=46047||46049<=p&&p<=46075||46077<=p&&p<=46103||46105<=p&&p<=46131||46133<=p&&p<=46159||46161<=p&&p<=46187||46189<=p&&p<=46215||46217<=p&&p<=46243||46245<=p&&p<=46271||46273<=p&&p<=46299||46301<=p&&p<=46327||46329<=p&&p<=46355||46357<=p&&p<=46383||46385<=p&&p<=46411||46413<=p&&p<=46439||46441<=p&&p<=46467||46469<=p&&p<=46495||46497<=p&&p<=46523||46525<=p&&p<=46551||46553<=p&&p<=46579||46581<=p&&p<=46607||46609<=p&&p<=46635||46637<=p&&p<=46663||46665<=p&&p<=46691||46693<=p&&p<=46719||46721<=p&&p<=46747||46749<=p&&p<=46775||46777<=p&&p<=46803||46805<=p&&p<=46831||46833<=p&&p<=46859||46861<=p&&p<=46887||46889<=p&&p<=46915||46917<=p&&p<=46943||46945<=p&&p<=46971||46973<=p&&p<=46999||47001<=p&&p<=47027||47029<=p&&p<=47055||47057<=p&&p<=47083||47085<=p&&p<=47111||47113<=p&&p<=47139||47141<=p&&p<=47167||47169<=p&&p<=47195||47197<=p&&p<=47223||47225<=p&&p<=47251||47253<=p&&p<=47279||47281<=p&&p<=47307||47309<=p&&p<=47335||47337<=p&&p<=47363||47365<=p&&p<=47391||47393<=p&&p<=47419||47421<=p&&p<=47447||47449<=p&&p<=47475||47477<=p&&p<=47503||47505<=p&&p<=47531||47533<=p&&p<=47559||47561<=p&&p<=47587||47589<=p&&p<=47615||47617<=p&&p<=47643||47645<=p&&p<=47671||47673<=p&&p<=47699||47701<=p&&p<=47727||47729<=p&&p<=47755||47757<=p&&p<=47783||47785<=p&&p<=47811||47813<=p&&p<=47839||47841<=p&&p<=47867||47869<=p&&p<=47895||47897<=p&&p<=47923||47925<=p&&p<=47951||47953<=p&&p<=47979||47981<=p&&p<=48007||48009<=p&&p<=48035||48037<=p&&p<=48063||48065<=p&&p<=48091||48093<=p&&p<=48119||48121<=p&&p<=48147||48149<=p&&p<=48175||48177<=p&&p<=48203||48205<=p&&p<=48231||48233<=p&&p<=48259||48261<=p&&p<=48287||48289<=p&&p<=48315||48317<=p&&p<=48343||48345<=p&&p<=48371||48373<=p&&p<=48399||48401<=p&&p<=48427||48429<=p&&p<=48455||48457<=p&&p<=48483||48485<=p&&p<=48511||48513<=p&&p<=48539||48541<=p&&p<=48567||48569<=p&&p<=48595||48597<=p&&p<=48623||48625<=p&&p<=48651||48653<=p&&p<=48679||48681<=p&&p<=48707||48709<=p&&p<=48735||48737<=p&&p<=48763||48765<=p&&p<=48791||48793<=p&&p<=48819||48821<=p&&p<=48847||48849<=p&&p<=48875||48877<=p&&p<=48903||48905<=p&&p<=48931||48933<=p&&p<=48959||48961<=p&&p<=48987||48989<=p&&p<=49015||49017<=p&&p<=49043||49045<=p&&p<=49071||49073<=p&&p<=49099||49101<=p&&p<=49127||49129<=p&&p<=49155||49157<=p&&p<=49183||49185<=p&&p<=49211||49213<=p&&p<=49239||49241<=p&&p<=49267||49269<=p&&p<=49295||49297<=p&&p<=49323||49325<=p&&p<=49351||49353<=p&&p<=49379||49381<=p&&p<=49407||49409<=p&&p<=49435||49437<=p&&p<=49463||49465<=p&&p<=49491||49493<=p&&p<=49519||49521<=p&&p<=49547||49549<=p&&p<=49575||49577<=p&&p<=49603||49605<=p&&p<=49631||49633<=p&&p<=49659||49661<=p&&p<=49687||49689<=p&&p<=49715||49717<=p&&p<=49743||49745<=p&&p<=49771||49773<=p&&p<=49799||49801<=p&&p<=49827||49829<=p&&p<=49855||49857<=p&&p<=49883||49885<=p&&p<=49911||49913<=p&&p<=49939||49941<=p&&p<=49967||49969<=p&&p<=49995||49997<=p&&p<=50023||50025<=p&&p<=50051||50053<=p&&p<=50079||50081<=p&&p<=50107||50109<=p&&p<=50135||50137<=p&&p<=50163||50165<=p&&p<=50191||50193<=p&&p<=50219||50221<=p&&p<=50247||50249<=p&&p<=50275||50277<=p&&p<=50303||50305<=p&&p<=50331||50333<=p&&p<=50359||50361<=p&&p<=50387||50389<=p&&p<=50415||50417<=p&&p<=50443||50445<=p&&p<=50471||50473<=p&&p<=50499||50501<=p&&p<=50527||50529<=p&&p<=50555||50557<=p&&p<=50583||50585<=p&&p<=50611||50613<=p&&p<=50639||50641<=p&&p<=50667||50669<=p&&p<=50695||50697<=p&&p<=50723||50725<=p&&p<=50751||50753<=p&&p<=50779||50781<=p&&p<=50807||50809<=p&&p<=50835||50837<=p&&p<=50863||50865<=p&&p<=50891||50893<=p&&p<=50919||50921<=p&&p<=50947||50949<=p&&p<=50975||50977<=p&&p<=51003||51005<=p&&p<=51031||51033<=p&&p<=51059||51061<=p&&p<=51087||51089<=p&&p<=51115||51117<=p&&p<=51143||51145<=p&&p<=51171||51173<=p&&p<=51199||51201<=p&&p<=51227||51229<=p&&p<=51255||51257<=p&&p<=51283||51285<=p&&p<=51311||51313<=p&&p<=51339||51341<=p&&p<=51367||51369<=p&&p<=51395||51397<=p&&p<=51423||51425<=p&&p<=51451||51453<=p&&p<=51479||51481<=p&&p<=51507||51509<=p&&p<=51535||51537<=p&&p<=51563||51565<=p&&p<=51591||51593<=p&&p<=51619||51621<=p&&p<=51647||51649<=p&&p<=51675||51677<=p&&p<=51703||51705<=p&&p<=51731||51733<=p&&p<=51759||51761<=p&&p<=51787||51789<=p&&p<=51815||51817<=p&&p<=51843||51845<=p&&p<=51871||51873<=p&&p<=51899||51901<=p&&p<=51927||51929<=p&&p<=51955||51957<=p&&p<=51983||51985<=p&&p<=52011||52013<=p&&p<=52039||52041<=p&&p<=52067||52069<=p&&p<=52095||52097<=p&&p<=52123||52125<=p&&p<=52151||52153<=p&&p<=52179||52181<=p&&p<=52207||52209<=p&&p<=52235||52237<=p&&p<=52263||52265<=p&&p<=52291||52293<=p&&p<=52319||52321<=p&&p<=52347||52349<=p&&p<=52375||52377<=p&&p<=52403||52405<=p&&p<=52431||52433<=p&&p<=52459||52461<=p&&p<=52487||52489<=p&&p<=52515||52517<=p&&p<=52543||52545<=p&&p<=52571||52573<=p&&p<=52599||52601<=p&&p<=52627||52629<=p&&p<=52655||52657<=p&&p<=52683||52685<=p&&p<=52711||52713<=p&&p<=52739||52741<=p&&p<=52767||52769<=p&&p<=52795||52797<=p&&p<=52823||52825<=p&&p<=52851||52853<=p&&p<=52879||52881<=p&&p<=52907||52909<=p&&p<=52935||52937<=p&&p<=52963||52965<=p&&p<=52991||52993<=p&&p<=53019||53021<=p&&p<=53047||53049<=p&&p<=53075||53077<=p&&p<=53103||53105<=p&&p<=53131||53133<=p&&p<=53159||53161<=p&&p<=53187||53189<=p&&p<=53215||53217<=p&&p<=53243||53245<=p&&p<=53271||53273<=p&&p<=53299||53301<=p&&p<=53327||53329<=p&&p<=53355||53357<=p&&p<=53383||53385<=p&&p<=53411||53413<=p&&p<=53439||53441<=p&&p<=53467||53469<=p&&p<=53495||53497<=p&&p<=53523||53525<=p&&p<=53551||53553<=p&&p<=53579||53581<=p&&p<=53607||53609<=p&&p<=53635||53637<=p&&p<=53663||53665<=p&&p<=53691||53693<=p&&p<=53719||53721<=p&&p<=53747||53749<=p&&p<=53775||53777<=p&&p<=53803||53805<=p&&p<=53831||53833<=p&&p<=53859||53861<=p&&p<=53887||53889<=p&&p<=53915||53917<=p&&p<=53943||53945<=p&&p<=53971||53973<=p&&p<=53999||54001<=p&&p<=54027||54029<=p&&p<=54055||54057<=p&&p<=54083||54085<=p&&p<=54111||54113<=p&&p<=54139||54141<=p&&p<=54167||54169<=p&&p<=54195||54197<=p&&p<=54223||54225<=p&&p<=54251||54253<=p&&p<=54279||54281<=p&&p<=54307||54309<=p&&p<=54335||54337<=p&&p<=54363||54365<=p&&p<=54391||54393<=p&&p<=54419||54421<=p&&p<=54447||54449<=p&&p<=54475||54477<=p&&p<=54503||54505<=p&&p<=54531||54533<=p&&p<=54559||54561<=p&&p<=54587||54589<=p&&p<=54615||54617<=p&&p<=54643||54645<=p&&p<=54671||54673<=p&&p<=54699||54701<=p&&p<=54727||54729<=p&&p<=54755||54757<=p&&p<=54783||54785<=p&&p<=54811||54813<=p&&p<=54839||54841<=p&&p<=54867||54869<=p&&p<=54895||54897<=p&&p<=54923||54925<=p&&p<=54951||54953<=p&&p<=54979||54981<=p&&p<=55007||55009<=p&&p<=55035||55037<=p&&p<=55063||55065<=p&&p<=55091||55093<=p&&p<=55119||55121<=p&&p<=55147||55149<=p&&p<=55175||55177<=p&&p<=55203?Dn:p==9757||p==9977||9994<=p&&p<=9997||p==127877||127938<=p&&p<=127940||p==127943||127946<=p&&p<=127948||128066<=p&&p<=128067||128070<=p&&p<=128080||p==128110||128112<=p&&p<=128120||p==128124||128129<=p&&p<=128131||128133<=p&&p<=128135||p==128170||128372<=p&&p<=128373||p==128378||p==128400||128405<=p&&p<=128406||128581<=p&&p<=128583||128587<=p&&p<=128591||p==128675||128692<=p&&p<=128694||p==128704||p==128716||129304<=p&&p<=129308||129310<=p&&p<=129311||p==129318||129328<=p&&p<=129337||129341<=p&&p<=129342||129489<=p&&p<=129501?dr:127995<=p&&p<=127999?vr:p==8205?Jn:p==9792||p==9794||9877<=p&&p<=9878||p==9992||p==10084||p==127752||p==127806||p==127859||p==127891||p==127908||p==127912||p==127979||p==127981||p==128139||128187<=p&&p<=128188||p==128295||p==128300||p==128488||p==128640||p==128658?Qe:128102<=p&&p<=128105?ce:pn}return this}Pe.exports&&(Pe.exports=Be)}),s=new i,a=function(Be,it,_t){for(var ft=s.iterateGraphemes(Be.substring(it)),Ut="",rn=0;rn<_t-it;rn++){var Dt=ft.next();if(Ut+=Dt.value,Dt.done)break}return Ut},o=function(Pe,Be,it,_t,ft,Ut,rn){return{start:{line:Pe,column:Be,offset:it},end:{line:_t,column:ft,offset:Ut},source:rn||null}},d=r(function(Pe,Be){(function(it,_t){Pe.exports=_t()})(t,function(){var it="",_t,ft=Ut;function Ut(Dn,pn){if(typeof Dn!="string")throw new TypeError("expected a string");if(pn===1)return Dn;if(pn===2)return Dn+Dn;var Zn=Dn.length*pn;if(_t!==Dn||typeof _t>"u")_t=Dn,it="";else if(it.length>=Zn)return it.substr(0,Zn);for(;Zn>it.length&&pn>1;)pn&1&&(it+=Dn),pn>>=1,Dn+=Dn;return it+=Dn,it=it.substr(0,Zn),it}var rn=function(pn,Zn,dr){if(pn==null||Zn==null)return pn;var vr=String(pn),Jn=typeof Zn=="number"?Zn:parseInt(Zn,10);if(isNaN(Jn)||!isFinite(Jn))return vr;var Qe=vr.length;if(Qe>=Jn)return vr;var ce=String(dr);ce===""&&(ce=" ");for(var fe=Jn-Qe;ce.length<fe;)ce+=ce;var nt=ce.length>fe?ce.substr(0,fe):ce;return nt+vr},Dt=Object.assign||function(Dn){for(var pn=1;pn<arguments.length;pn++){var Zn=arguments[pn];for(var dr in Zn)Object.prototype.hasOwnProperty.call(Zn,dr)&&(Dn[dr]=Zn[dr])}return Dn};function _n(Dn,pn,Zn,dr){var vr=String(pn),Jn=rn(vr,Zn," "),Qe=ft(" ",dr.tabSize);return Jn+" | "+Dn.replace(/\t/g,Qe)}function qn(Dn,pn,Zn,dr,vr){return Dn.slice(pn,Zn).map(function(Jn,Qe){return _n(Jn,pn+Qe+1,dr,vr)}).join(`
`)}var tn={extraLines:2,tabSize:4},rr=function(pn,Zn,dr,vr){vr=Dt({},tn,vr);var Jn=pn.split(/\r\n?|\n|\f/),Qe=Math.max(1,Zn-vr.extraLines)-1,ce=Math.min(Zn+vr.extraLines,Jn.length),fe=String(ce).length,nt=qn(Jn,Qe,Zn,fe,vr),St=_n(Jn[Zn-1].substring(0,dr-1),Zn,fe,vr),Ht=ft(" ",St.length)+"^",sn=qn(Jn,Zn,ce,fe,vr);return[nt,Ht,sn].filter(Boolean).join(`
`)};return rr})}),g=new Error().stack,b=function(Pe){var Be=Object.create(SyntaxError.prototype);return Object.assign(Be,Pe,{name:"SyntaxError"}),Object.defineProperty(Be,"stack",{get:function(){return g?g.replace(/^(.+\n){1,3}/,String(Be)+`
`):""}}),Be},E=function(Pe,Be,it,_t,ft){throw b({message:_t?Pe+`
`+d(Be,_t,ft):Pe,rawMessage:Pe,source:it,line:_t,column:ft})},S={unexpectedEnd:function(){return"Unexpected end of input"},unexpectedToken:function(Be){for(var it=arguments.length,_t=Array(it>1?it-1:0),ft=1;ft<it;ft++)_t[ft-1]=arguments[ft];return"Unexpected token <"+Be+"> at "+_t.filter(Boolean).join(":")}},I={unexpectedSymbol:function(Be){for(var it=arguments.length,_t=Array(it>1?it-1:0),ft=1;ft<it;ft++)_t[ft-1]=arguments[ft];return"Unexpected symbol <"+Be+"> at "+_t.filter(Boolean).join(":")}},P={LEFT_BRACE:0,RIGHT_BRACE:1,LEFT_BRACKET:2,RIGHT_BRACKET:3,COLON:4,COMMA:5,STRING:6,NUMBER:7,TRUE:8,FALSE:9,NULL:10},z={"{":P.LEFT_BRACE,"}":P.RIGHT_BRACE,"[":P.LEFT_BRACKET,"]":P.RIGHT_BRACKET,":":P.COLON,",":P.COMMA},j={true:P.TRUE,false:P.FALSE,null:P.NULL},q={_START_:0,START_QUOTE_OR_CHAR:1,ESCAPE:2},Y={'"':0,"\\":1,"/":2,b:3,f:4,n:5,r:6,t:7,u:8},ie={_START_:0,MINUS:1,ZERO:2,DIGIT:3,POINT:4,DIGIT_FRACTION:5,EXP:6,EXP_DIGIT_OR_SIGN:7};function te(Pe){return Pe>="1"&&Pe<="9"}function V(Pe){return Pe>="0"&&Pe<="9"}function ne(Pe){return V(Pe)||Pe>="a"&&Pe<="f"||Pe>="A"&&Pe<="F"}function G(Pe){return Pe==="e"||Pe==="E"}function oe(Pe,Be,it,_t){var ft=Pe.charAt(Be);if(ft==="\r")Be++,it++,_t=1,Pe.charAt(Be)===`
`&&Be++;else if(ft===`
`)Be++,it++,_t=1;else if(ft==="	"||ft===" ")Be++,_t++;else return null;return{index:Be,line:it,column:_t}}function he(Pe,Be,it,_t){var ft=Pe.charAt(Be);return ft in z?{type:z[ft],line:it,column:_t+1,index:Be+1,value:null}:null}function pe(Pe,Be,it,_t){for(var ft in j)if(j.hasOwnProperty(ft)&&Pe.substr(Be,ft.length)===ft)return{type:j[ft],line:it,column:_t+ft.length,index:Be+ft.length,value:ft};return null}function Ee(Pe,Be,it,_t){for(var ft=Be,Ut=q._START_;Be<Pe.length;){var rn=Pe.charAt(Be);switch(Ut){case q._START_:{if(rn==='"')Be++,Ut=q.START_QUOTE_OR_CHAR;else return null;break}case q.START_QUOTE_OR_CHAR:{if(rn==="\\")Be++,Ut=q.ESCAPE;else{if(rn==='"')return Be++,{type:P.STRING,line:it,column:_t+Be-ft,index:Be,value:Pe.slice(ft,Be)};Be++}break}case q.ESCAPE:{if(rn in Y){if(Be++,rn==="u")for(var Dt=0;Dt<4;Dt++){var _n=Pe.charAt(Be);if(_n&&ne(_n))Be++;else return null}Ut=q.START_QUOTE_OR_CHAR}else return null;break}}}}function me(Pe,Be,it,_t){var ft=Be,Ut=Be,rn=ie._START_;e:for(;Be<Pe.length;){var Dt=Pe.charAt(Be);switch(rn){case ie._START_:{if(Dt==="-")rn=ie.MINUS;else if(Dt==="0")Ut=Be+1,rn=ie.ZERO;else if(te(Dt))Ut=Be+1,rn=ie.DIGIT;else return null;break}case ie.MINUS:{if(Dt==="0")Ut=Be+1,rn=ie.ZERO;else if(te(Dt))Ut=Be+1,rn=ie.DIGIT;else return null;break}case ie.ZERO:{if(Dt===".")rn=ie.POINT;else if(G(Dt))rn=ie.EXP;else break e;break}case ie.DIGIT:{if(V(Dt))Ut=Be+1;else if(Dt===".")rn=ie.POINT;else if(G(Dt))rn=ie.EXP;else break e;break}case ie.POINT:{if(V(Dt))Ut=Be+1,rn=ie.DIGIT_FRACTION;else break e;break}case ie.DIGIT_FRACTION:{if(V(Dt))Ut=Be+1;else if(G(Dt))rn=ie.EXP;else break e;break}case ie.EXP:{if(Dt==="+"||Dt==="-")rn=ie.EXP_DIGIT_OR_SIGN;else if(V(Dt))Ut=Be+1,rn=ie.EXP_DIGIT_OR_SIGN;else break e;break}case ie.EXP_DIGIT_OR_SIGN:{if(V(Dt))Ut=Be+1;else break e;break}}Be++}return Ut>0?{type:P.NUMBER,line:it,column:_t+Ut-ft,index:Ut,value:Pe.slice(ft,Ut)}:null}var Se=function(Be,it){for(var _t=1,ft=1,Ut=0,rn=[];Ut<Be.length;){var Dt=[Be,Ut,_t,ft],_n=oe.apply(void 0,Dt);if(_n){Ut=_n.index,_t=_n.line,ft=_n.column;continue}var qn=he.apply(void 0,Dt)||pe.apply(void 0,Dt)||Ee.apply(void 0,Dt)||me.apply(void 0,Dt);if(qn){var tn={type:qn.type,value:qn.value,loc:o(_t,ft,Ut,qn.line,qn.column,qn.index,it.source)};rn.push(tn),Ut=qn.index,_t=qn.line,ft=qn.column}else E(I.unexpectedSymbol(a(Be,Ut,Ut+1),it.source,_t,ft),Be,it.source,_t,ft)}return rn},De={_START_:0,OPEN_OBJECT:1,PROPERTY:2,COMMA:3},be={_START_:0,KEY:1,COLON:2},at={_START_:0,OPEN_ARRAY:1,VALUE:2,COMMA:3},Ze={loc:!0,source:null};function Je(Pe,Be,it){var _t=Be.length>0?Be[Be.length-1].loc.end:{line:1,column:1};E(S.unexpectedEnd(),Pe,it.source,_t.line,_t.column)}function We(Pe){for(var Be=0,it=0;it<4;it++)Be=Be*16+parseInt(Pe[it],16);return String.fromCharCode(Be)}var Me={b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},Fe=['"',"\\","/"];function He(Pe){for(var Be="",it=0;it<Pe.length;it++){var _t=Pe.charAt(it);if(_t==="\\"){it++;var ft=Pe.charAt(it);if(ft==="u")Be+=We(Pe.substr(it+1,4)),it+=4;else if(Fe.indexOf(ft)!==-1)Be+=ft;else if(ft in Me)Be+=Me[ft];else break}else Be+=_t}return Be}function bt(Pe,Be,it,_t){for(var ft=void 0,Ut={type:"Object",children:[]},rn=De._START_;it<Be.length;){var Dt=Be[it];switch(rn){case De._START_:{if(Dt.type===P.LEFT_BRACE)ft=Dt,rn=De.OPEN_OBJECT,it++;else return null;break}case De.OPEN_OBJECT:{if(Dt.type===P.RIGHT_BRACE)return _t.loc&&(Ut.loc=o(ft.loc.start.line,ft.loc.start.column,ft.loc.start.offset,Dt.loc.end.line,Dt.loc.end.column,Dt.loc.end.offset,_t.source)),{value:Ut,index:it+1};var _n=Yt(Pe,Be,it,_t);Ut.children.push(_n.value),rn=De.PROPERTY,it=_n.index;break}case De.PROPERTY:{if(Dt.type===P.RIGHT_BRACE)return _t.loc&&(Ut.loc=o(ft.loc.start.line,ft.loc.start.column,ft.loc.start.offset,Dt.loc.end.line,Dt.loc.end.column,Dt.loc.end.offset,_t.source)),{value:Ut,index:it+1};Dt.type===P.COMMA?(rn=De.COMMA,it++):E(S.unexpectedToken(a(Pe,Dt.loc.start.offset,Dt.loc.end.offset),_t.source,Dt.loc.start.line,Dt.loc.start.column),Pe,_t.source,Dt.loc.start.line,Dt.loc.start.column);break}case De.COMMA:{var qn=Yt(Pe,Be,it,_t);qn?(it=qn.index,Ut.children.push(qn.value),rn=De.PROPERTY):E(S.unexpectedToken(a(Pe,Dt.loc.start.offset,Dt.loc.end.offset),_t.source,Dt.loc.start.line,Dt.loc.start.column),Pe,_t.source,Dt.loc.start.line,Dt.loc.start.column);break}}}Je(Pe,Be,_t)}function Yt(Pe,Be,it,_t){for(var ft=void 0,Ut={type:"Property",key:null,value:null},rn=be._START_;it<Be.length;){var Dt=Be[it];switch(rn){case be._START_:{if(Dt.type===P.STRING){var _n={type:"Identifier",value:He(Pe.slice(Dt.loc.start.offset+1,Dt.loc.end.offset-1)),raw:Dt.value};_t.loc&&(_n.loc=Dt.loc),ft=Dt,Ut.key=_n,rn=be.KEY,it++}else return null;break}case be.KEY:{Dt.type===P.COLON?(rn=be.COLON,it++):E(S.unexpectedToken(a(Pe,Dt.loc.start.offset,Dt.loc.end.offset),_t.source,Dt.loc.start.line,Dt.loc.start.column),Pe,_t.source,Dt.loc.start.line,Dt.loc.start.column);break}case be.COLON:{var qn=Kt(Pe,Be,it,_t);return Ut.value=qn.value,_t.loc&&(Ut.loc=o(ft.loc.start.line,ft.loc.start.column,ft.loc.start.offset,qn.value.loc.end.line,qn.value.loc.end.column,qn.value.loc.end.offset,_t.source)),{value:Ut,index:qn.index}}}}}function gt(Pe,Be,it,_t){for(var ft=void 0,Ut={type:"Array",children:[]},rn=at._START_,Dt=void 0;it<Be.length;)switch(Dt=Be[it],rn){case at._START_:{if(Dt.type===P.LEFT_BRACKET)ft=Dt,rn=at.OPEN_ARRAY,it++;else return null;break}case at.OPEN_ARRAY:{if(Dt.type===P.RIGHT_BRACKET)return _t.loc&&(Ut.loc=o(ft.loc.start.line,ft.loc.start.column,ft.loc.start.offset,Dt.loc.end.line,Dt.loc.end.column,Dt.loc.end.offset,_t.source)),{value:Ut,index:it+1};var _n=Kt(Pe,Be,it,_t);it=_n.index,Ut.children.push(_n.value),rn=at.VALUE;break}case at.VALUE:{if(Dt.type===P.RIGHT_BRACKET)return _t.loc&&(Ut.loc=o(ft.loc.start.line,ft.loc.start.column,ft.loc.start.offset,Dt.loc.end.line,Dt.loc.end.column,Dt.loc.end.offset,_t.source)),{value:Ut,index:it+1};Dt.type===P.COMMA?(rn=at.COMMA,it++):E(S.unexpectedToken(a(Pe,Dt.loc.start.offset,Dt.loc.end.offset),_t.source,Dt.loc.start.line,Dt.loc.start.column),Pe,_t.source,Dt.loc.start.line,Dt.loc.start.column);break}case at.COMMA:{var qn=Kt(Pe,Be,it,_t);it=qn.index,Ut.children.push(qn.value),rn=at.VALUE;break}}Je(Pe,Be,_t)}function Lt(Pe,Be,it,_t){var ft=Be[it],Ut=null;switch(ft.type){case P.STRING:{Ut=He(Pe.slice(ft.loc.start.offset+1,ft.loc.end.offset-1));break}case P.NUMBER:{Ut=Number(ft.value);break}case P.TRUE:{Ut=!0;break}case P.FALSE:{Ut=!1;break}case P.NULL:{Ut=null;break}default:return null}var rn={type:"Literal",value:Ut,raw:ft.value};return _t.loc&&(rn.loc=ft.loc),{value:rn,index:it+1}}function Kt(Pe,Be,it,_t){var ft=Be[it],Ut=Lt.apply(void 0,arguments)||bt.apply(void 0,arguments)||gt.apply(void 0,arguments);if(Ut)return Ut;E(S.unexpectedToken(a(Pe,ft.loc.start.offset,ft.loc.end.offset),_t.source,ft.loc.start.line,ft.loc.start.column),Pe,_t.source,ft.loc.start.line,ft.loc.start.column)}var Ue=function(Pe,Be){Be=Object.assign({},Ze,Be);var it=Se(Pe,Be);it.length===0&&Je(Pe,it,Be);var _t=Kt(Pe,it,0,Be);if(_t.index===it.length)return _t.value;var ft=it[_t.index];E(S.unexpectedToken(a(Pe,ft.loc.start.offset,ft.loc.end.offset),Be.source,ft.loc.start.line,ft.loc.start.column),Pe,Be.source,ft.loc.start.line,ft.loc.start.column)};return Ue})}(Jb)),Jb.exports}var Tue=kue();const Pue=el(Tue);function fr(){var n="/home/runner/work/maputnik/maputnik/src/libs/codemirror-mgl.ts",e="89c156e637b20b434cfb214df7fad7d710253070",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/codemirror-mgl.ts",statementMap:{0:{start:{line:5,column:0},end:{line:10,column:3}},1:{start:{line:6,column:2},end:{line:9,column:4}},2:{start:{line:12,column:16},end:{line:12,column:18}},3:{start:{line:13,column:2},end:{line:30,column:3}},4:{start:{line:14,column:4},end:{line:14,column:16}},5:{start:{line:16,column:23},end:{line:16,column:71}},6:{start:{line:17,column:4},end:{line:29,column:5}},7:{start:{line:18,column:18},end:{line:23,column:7}},8:{start:{line:24,column:6},end:{line:28,column:9}},9:{start:{line:31,column:2},end:{line:31,column:15}},10:{start:{line:33,column:0},end:{line:35,column:3}},11:{start:{line:34,column:2},end:{line:34,column:26}},12:{start:{line:36,column:0},end:{line:130,column:3}},13:{start:{line:37,column:16},end:{line:37,column:32}},14:{start:{line:38,column:22},end:{line:38,column:26}},15:{start:{line:39,column:2},end:{line:41,column:3}},16:{start:{line:40,column:4},end:{line:40,column:17}},17:{start:{line:42,column:14},end:{line:42,column:29}},18:{start:{line:43,column:16},end:{line:43,column:32}},19:{start:{line:45,column:4},end:{line:65,column:5}},20:{start:{line:46,column:6},end:{line:46,column:20}},21:{start:{line:47,column:11},end:{line:65,column:5}},22:{start:{line:48,column:6},end:{line:48,column:18}},23:{start:{line:49,column:11},end:{line:65,column:5}},24:{start:{line:50,column:6},end:{line:50,column:20}},25:{start:{line:52,column:18},end:{line:52,column:25}},26:{start:{line:54,column:6},end:{line:63,column:7}},27:{start:{line:55,column:8},end:{line:55,column:41}},28:{start:{line:57,column:8},end:{line:59,column:11}},29:{start:{line:58,column:10},end:{line:58,column:101}},30:{start:{line:60,column:8},end:{line:62,column:9}},31:{start:{line:61,column:10},end:{line:61,column:34}},32:{start:{line:64,column:6},end:{line:64,column:63}},33:{start:{line:67,column:12},end:{line:67,column:16}},34:{start:{line:68,column:2},end:{line:99,column:3}},35:{start:{line:69,column:19},end:{line:79,column:6}},36:{start:{line:80,column:4},end:{line:94,column:5}},37:{start:{line:81,column:6},end:{line:93,column:8}},38:{start:{line:84,column:10},end:{line:84,column:76}},39:{start:{line:86,column:34},end:{line:86,column:85}},40:{start:{line:87,column:10},end:{line:91,column:12}},41:{start:{line:95,column:9},end:{line:99,column:3}},42:{start:{line:96,column:4},end:{line:96,column:56}},43:{start:{line:98,column:4},end:{line:98,column:50}},44:{start:{line:100,column:2},end:{line:128,column:3}},45:{start:{line:101,column:19},end:{line:101,column:28}},46:{start:{line:102,column:4},end:{line:127,column:7}},47:{start:{line:103,column:31},end:{line:103,column:36}},48:{start:{line:104,column:6},end:{line:126,column:7}},49:{start:{line:105,column:31},end:{line:105,column:64}},50:{start:{line:106,column:20},end:{line:110,column:9}},51:{start:{line:111,column:8},end:{line:111,column:24}},52:{start:{line:112,column:13},end:{line:126,column:7}},53:{start:{line:113,column:21},end:{line:113,column:83}},54:{start:{line:114,column:28},end:{line:114,column:64}},55:{start:{line:115,column:8},end:{line:118,column:9}},56:{start:{line:116,column:10},end:{line:116,column:69}},57:{start:{line:117,column:10},end:{line:117,column:17}},58:{start:{line:119,column:24},end:{line:119,column:35}},59:{start:{line:120,column:31},end:{line:120,column:34}},60:{start:{line:121,column:8},end:{line:125,column:11}},61:{start:{line:129,column:2},end:{line:129,column:15}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:29},end:{line:5,column:30}},loc:{start:{line:5,column:55},end:{line:10,column:1}},line:5},1:{name:"tryToParse",decl:{start:{line:11,column:9},end:{line:11,column:19}},loc:{start:{line:11,column:26},end:{line:32,column:1}},line:11},2:{name:"(anonymous_2)",decl:{start:{line:33,column:42},end:{line:33,column:43}},loc:{start:{line:33,column:52},end:{line:35,column:1}},line:33},3:{name:"(anonymous_3)",decl:{start:{line:36,column:41},end:{line:36,column:42}},loc:{start:{line:36,column:62},end:{line:130,column:1}},line:36},4:{name:"getArrayPositionalFromAst",decl:{start:{line:44,column:11},end:{line:44,column:36}},loc:{start:{line:44,column:49},end:{line:66,column:3}},line:44},5:{name:"(anonymous_5)",decl:{start:{line:57,column:37},end:{line:57,column:38}},loc:{start:{line:57,column:52},end:{line:59,column:9}},line:57},6:{name:"(anonymous_6)",decl:{start:{line:83,column:29},end:{line:83,column:30}},loc:{start:{line:83,column:38},end:{line:85,column:9}},line:83},7:{name:"(anonymous_7)",decl:{start:{line:85,column:15},end:{line:85,column:16}},loc:{start:{line:85,column:24},end:{line:92,column:9}},line:85},8:{name:"(anonymous_8)",decl:{start:{line:102,column:19},end:{line:102,column:20}},loc:{start:{line:102,column:30},end:{line:127,column:5}},line:102}},branchMap:{0:{loc:{start:{line:17,column:4},end:{line:29,column:5}},type:"if",locations:[{start:{line:17,column:4},end:{line:29,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:17},1:{loc:{start:{line:39,column:2},end:{line:41,column:3}},type:"if",locations:[{start:{line:39,column:2},end:{line:41,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:39},2:{loc:{start:{line:45,column:4},end:{line:65,column:5}},type:"if",locations:[{start:{line:45,column:4},end:{line:65,column:5}},{start:{line:47,column:11},end:{line:65,column:5}}],line:45},3:{loc:{start:{line:47,column:11},end:{line:65,column:5}},type:"if",locations:[{start:{line:47,column:11},end:{line:65,column:5}},{start:{line:49,column:11},end:{line:65,column:5}}],line:47},4:{loc:{start:{line:49,column:11},end:{line:65,column:5}},type:"if",locations:[{start:{line:49,column:11},end:{line:65,column:5}},{start:{line:51,column:11},end:{line:65,column:5}}],line:49},5:{loc:{start:{line:54,column:6},end:{line:63,column:7}},type:"if",locations:[{start:{line:54,column:6},end:{line:63,column:7}},{start:{line:56,column:13},end:{line:63,column:7}}],line:54},6:{loc:{start:{line:58,column:17},end:{line:58,column:100}},type:"binary-expr",locations:[{start:{line:58,column:17},end:{line:58,column:30}},{start:{line:58,column:34},end:{line:58,column:69}},{start:{line:58,column:73},end:{line:58,column:100}}],line:58},7:{loc:{start:{line:60,column:8},end:{line:62,column:9}},type:"if",locations:[{start:{line:60,column:8},end:{line:62,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:60},8:{loc:{start:{line:68,column:2},end:{line:99,column:3}},type:"if",locations:[{start:{line:68,column:2},end:{line:99,column:3}},{start:{line:95,column:9},end:{line:99,column:3}}],line:68},9:{loc:{start:{line:80,column:4},end:{line:94,column:5}},type:"if",locations:[{start:{line:80,column:4},end:{line:94,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:80},10:{loc:{start:{line:95,column:9},end:{line:99,column:3}},type:"if",locations:[{start:{line:95,column:9},end:{line:99,column:3}},{start:{line:97,column:9},end:{line:99,column:3}}],line:95},11:{loc:{start:{line:100,column:2},end:{line:128,column:3}},type:"if",locations:[{start:{line:100,column:2},end:{line:128,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:100},12:{loc:{start:{line:104,column:6},end:{line:126,column:7}},type:"if",locations:[{start:{line:104,column:6},end:{line:126,column:7}},{start:{line:112,column:13},end:{line:126,column:7}}],line:104},13:{loc:{start:{line:112,column:13},end:{line:126,column:7}},type:"if",locations:[{start:{line:112,column:13},end:{line:126,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:112},14:{loc:{start:{line:115,column:8},end:{line:118,column:9}},type:"if",locations:[{start:{line:115,column:8},end:{line:118,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:115}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/codemirror-mgl.ts"],names:[],mappings:"AAAA,SAAQ,aAAY;AACpB,OAAO,gBAAiC;AACxC,OAAO,eAAe;AACtB,SAAQ,YAAY,wBAAuB;AAK3C,WAAW,WAAW,OAAO,CAAC,QAAQ,iBAAiB;AAErD,SAAO,WAAW,MAAM;AAAA,IACtB,EAAC,GAAG,QAAQ,MAAM,KAAI;AAAA,IACtB;AAAA,EACF;AACF,CAAC;AAGD,SAAS,WAAW,MAAc;AAEhC,QAAM,QAAkC,CAAC;AACzC,MAAI;AACF,UAAM,IAAI;AAAA,EACZ,SACM,KAAU;AAEd,UAAM,aAAa,IAAI,SAAS,EAAE,MAAM,0BAA0B;AAClE,QAAI,YAAY;AACd,YAAM,MAAM;AAAA,QACV,YAAY,SAAS,WAAW,CAAC,GAAG,EAAE;AAAA,QACtC,cAAc,SAAS,WAAW,CAAC,GAAG,EAAE;AAAA,QACxC,WAAW,SAAS,WAAW,CAAC,GAAG,EAAE;AAAA,QACrC,aAAa,SAAS,WAAW,CAAC,GAAG,EAAE;AAAA,MACzC;AAGA,YAAM,KAAK;AAAA,QACT,MAAM,WAAW,IAAI,IAAI,aAAa,GAAG,IAAI,YAAY;AAAA,QACzD,IAAI,WAAW,IAAI,IAAI,YAAY,GAAG,IAAI,WAAW;AAAA,QACrD,SAAS;AAAA,MACX,CAAC;AAAA,IACH;AAAA,EACF;AAEA,SAAO;AACT;AAEA,WAAW,eAAe,QAAQ,QAAQ,CAAC,SAAiB;AAC1D,SAAO,WAAW,IAAI;AACxB,CAAC;AAED,WAAW,eAAe,QAAQ,OAAO,CAAC,MAAc,MAAW,QAAa;AAE9E,QAAM,QAAkC,WAAW,IAAI;AAEvD,QAAM,EAAC,QAAO,IAAI;AAElB,MAAI,MAAM,SAAS,GAAG;AAEpB,WAAO;AAAA,EACT;AAEA,QAAM,MAAM,UAAU,IAAI;AAC1B,QAAM,QAAQ,KAAK,MAAM,IAAI;AAE7B,WAAS,0BAA0B,MAAW,MAAgB;AAC5D,QAAI,CAAC,MAAM;AACT,aAAO;AAAA,IACT,WACS,KAAK,SAAS,GAAG;AACxB,aAAO;AAAA,IACT,WACS,CAAC,KAAK,UAAU;AACvB,aAAO;AAAA,IACT,OACK;AACH,YAAM,MAAM,KAAK,CAAC;AAClB,UAAI;AACJ,UAAI,IAAI,MAAM,UAAU,GAAG;AACzB,kBAAU,KAAK,SAAS,KAAK,CAAC,CAAC;AAAA,MACjC,OACK;AACH,kBAAU,KAAK,SAAS,KAAK,CAAC,cAAmB;AAC/C,iBACE,UAAU,OACV,UAAU,IAAI,SAAS,gBACvB,UAAU,IAAI,UAAU;AAAA,QAE5B,CAAC;AACD,YAAI,SAAS;AACX,oBAAU,QAAQ;AAAA,QACpB;AAAA,MACF;AACA,aAAO,0BAA0B,SAAS,KAAK,MAAM,CAAC,CAAC;AAAA,IACzD;AAAA,EACF;AAEA,MAAI,MAA6D;AACjE,MAAI,YAAY,SAAS;AAEvB,UAAM,SAAS,iBAAiB;AAAA,MAC9B,WAAW;AAAA,MACX,QAAQ;AAAA,MACR,YAAY,CAAC;AAAA,MACb,WAAW,CAAC;AAAA,MACZ,UAAU;AAAA,MACV,UAAU;AAAA,MACV,UAAU;AAAA,QACR;AAAA,MACF;AAAA,IACF,CAAC;AAED,QAAI,QAAQ;AACV,YAAM;AAAA,QACJ,QAAQ;AAAA,QACR,OAAO,OACJ,OAAO,SAAO;AAEb,iBAAO,CAAC,IAAI,QAAQ,MAAM,sCAAsC;AAAA,QAClE,CAAC,EACA,IAAI,SAAO;AAEV,gBAAM,kBAAkB,IAAI,QAAQ,QAAQ,iBAAiB,EAAE,EAAE,MAAM,GAAG;AAC1E,iBAAO;AAAA,YACL,MAAM;AAAA,YACN,KAAK,gBAAgB,CAAC;AAAA,YACtB,SAAS,gBAAgB,CAAC;AAAA,UAC5B;AAAA,QACF,CAAC;AAAA,MACL;AAAA,IACF;AAAA,EACF,WACS,YAAY,cAAc;AACjC,UAAM,WAAW,iBAAiB,OAAO,KAAK,IAAI;AAAA,EACpD,OACK;AACH,UAAM,IAAI,MAAM,mBAAmB,OAAO,EAAE;AAAA,EAC9C;AAEA,MAAI,KAAK,WAAW,SAAS;AAC3B,UAAM,SAAS,IAAI;AACnB,WAAO,QAAQ,WAAS;AACtB,YAAM,EAAC,KAAK,QAAO,IAAI;AAEvB,UAAI,CAAC,KAAK;AACR,cAAM,iBAAiB,IAAI,cAAc,IAAI,SAAS,CAAC;AACvD,cAAM,MAAM;AAAA,UACV,MAAM,WAAW,IAAI,IAAI,UAAU,GAAG,CAAC;AAAA,UACvC,IAAI,WAAW,IAAI,IAAI,SAAS,GAAG,eAAe,KAAK,MAAM;AAAA,UAC7D;AAAA,QACF;AACA,cAAM,KAAK,GAAG;AAAA,MAChB,WACS,KAAK;AACZ,cAAM,OAAO,IAAI,QAAQ,YAAY,EAAE,EAAE,MAAM,WAAW,EAAE,OAAO,OAAO;AAC1E,cAAM,cAAc,0BAA0B,KAAK,IAAI;AACvD,YAAI,CAAC,aAAa;AAChB,kBAAQ,KAAK,uCAAuC,KAAK;AACzD;AAAA,QACF;AAEA,cAAM,EAAC,IAAG,IAAI;AACd,cAAM,EAAC,OAAO,IAAG,IAAI;AAErB,cAAM,KAAK;AAAA,UACT,MAAM,WAAW,IAAI,MAAM,OAAO,GAAG,MAAM,MAAM;AAAA,UACjD,IAAI,WAAW,IAAI,IAAI,OAAO,GAAG,IAAI,MAAM;AAAA,UAC3C;AAAA,QACF,CAAC;AAAA,MACH;AAAA,IACF,CAAC;AAAA,EACH;AAEA,SAAO;AACT,CAAC;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"89c156e637b20b434cfb214df7fad7d710253070"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return fr=function(){return a},a}fr();fr().s[0]++;vp.defineMode("mgl",(n,e)=>(fr().f[0]++,fr().s[1]++,vp.modes.javascript({...n,json:!0},e)));function vW(n){fr().f[1]++;const e=(fr().s[2]++,[]);fr().s[3]++;try{fr().s[4]++,Oue.parse(n)}catch(t){const r=(fr().s[5]++,t.toString().match(/line (\d+), column (\d+)/));if(fr().s[6]++,r){fr().b[0][0]++;const i=(fr().s[7]++,{first_line:parseInt(r[1],10),first_column:parseInt(r[2],10),last_line:parseInt(r[1],10),last_column:parseInt(r[2],10)});fr().s[8]++,e.push({from:vp.Pos(i.first_line-1,i.first_column),to:vp.Pos(i.last_line-1,i.last_column),message:t})}else fr().b[0][1]++}return fr().s[9]++,e}fr().s[10]++;vp.registerHelper("lint","json",n=>(fr().f[2]++,fr().s[11]++,vW(n)));fr().s[12]++;vp.registerHelper("lint","mgl",(n,e,t)=>{fr().f[3]++;const r=(fr().s[13]++,vW(n)),{context:i}=(fr().s[14]++,e);if(fr().s[15]++,r.length>0)return fr().b[1][0]++,fr().s[16]++,r;fr().b[1][1]++;const s=(fr().s[17]++,Pue(n)),a=(fr().s[18]++,JSON.parse(n));function o(g,b){if(fr().f[4]++,fr().s[19]++,g){if(fr().b[2][1]++,fr().s[21]++,b.length<1)return fr().b[3][0]++,fr().s[22]++,g;if(fr().b[3][1]++,fr().s[23]++,g.children){fr().b[4][1]++;const E=(fr().s[25]++,b[0]);let S;return fr().s[26]++,E.match(/^[0-9]+$/)?(fr().b[5][0]++,fr().s[27]++,S=g.children[b[0]]):(fr().b[5][1]++,fr().s[28]++,S=g.children.find(I=>(fr().f[5]++,fr().s[29]++,fr().b[6][0]++,I.key&&(fr().b[6][1]++,I.key.type==="Identifier")&&(fr().b[6][2]++,I.key.value===E))),fr().s[30]++,S?(fr().b[7][0]++,fr().s[31]++,S=S.value):fr().b[7][1]++),fr().s[32]++,o(S,b.slice(1))}else{fr().b[4][0]++,fr().s[24]++;return}}else{fr().b[2][0]++,fr().s[20]++;return}}let d=(fr().s[33]++,null);if(fr().s[34]++,i==="layer"){fr().b[8][0]++;const g=(fr().s[35]++,qf({version:8,name:"Empty Style",metadata:{},sources:{},sprite:"",glyphs:"https://example.com/glyphs/{fontstack}/{range}.pbf",layers:[a]}));fr().s[36]++,g?(fr().b[9][0]++,fr().s[37]++,d={result:"error",value:g.filter(b=>(fr().f[6]++,fr().s[38]++,!b.message.match(/^layers\[0\]: source ".*" not found$/))).map(b=>{fr().f[7]++;const E=(fr().s[39]++,b.message.replace(/^layers\[0\]./,"").split(":"));return fr().s[40]++,{name:"",key:E[0],message:E[1]}})}):fr().b[9][1]++}else if(fr().b[8][1]++,fr().s[41]++,i==="expression")fr().b[10][0]++,fr().s[42]++,d=QH.createExpression(a,e.spec);else throw fr().b[10][1]++,fr().s[43]++,new Error(`Invalid context ${i}`);if(fr().s[44]++,(d==null?void 0:d.result)==="error"){fr().b[11][0]++;const g=(fr().s[45]++,d.value);fr().s[46]++,g.forEach(b=>{fr().f[8]++;const{key:E,message:S}=(fr().s[47]++,b);if(fr().s[48]++,E)if(fr().b[12][1]++,fr().s[52]++,E){fr().b[13][0]++;const I=(fr().s[53]++,E.replace(/^\[|\]$/g,"").split(/\.|[[\]]+/).filter(Boolean)),P=(fr().s[54]++,o(s,I));if(fr().s[55]++,P)fr().b[14][1]++;else{fr().b[14][0]++,fr().s[56]++,console.warn("Something went wrong parsing error:",b),fr().s[57]++;return}const{loc:z}=(fr().s[58]++,P),{start:j,end:q}=(fr().s[59]++,z);fr().s[60]++,r.push({from:vp.Pos(j.line-1,j.column),to:vp.Pos(q.line-1,q.column),message:S})}else fr().b[13][1]++;else{fr().b[12][0]++;const I=(fr().s[49]++,t.getLineHandle(t.lastLine())),P=(fr().s[50]++,{from:vp.Pos(t.firstLine(),0),to:vp.Pos(t.lastLine(),I.text.length),message:S});fr().s[51]++,r.push(P)}})}else fr().b[11][1]++;return fr().s[61]++,r});function br(){var n="/home/runner/work/maputnik/maputnik/src/components/InputJson.tsx",e="da44fe7250311daecfc0a96e15b8409621007dbc",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputJson.tsx",statementMap:{0:{start:{line:14,column:24},end:{line:29,column:3}},1:{start:{line:19,column:6},end:{line:19,column:65}},2:{start:{line:32,column:8},end:{line:32,column:12}},3:{start:{line:33,column:22},end:{line:33,column:27}},4:{start:{line:35,column:4},end:{line:35,column:17}},5:{start:{line:36,column:4},end:{line:36,column:32}},6:{start:{line:37,column:4},end:{line:41,column:6}},7:{start:{line:44,column:4},end:{line:60,column:7}},8:{start:{line:61,column:4},end:{line:61,column:42}},9:{start:{line:62,column:4},end:{line:62,column:40}},10:{start:{line:63,column:4},end:{line:63,column:38}},11:{start:{line:65,column:18},end:{line:67,column:3}},12:{start:{line:66,column:4},end:{line:66,column:31}},13:{start:{line:68,column:12},end:{line:74,column:3}},14:{start:{line:69,column:4},end:{line:69,column:49}},15:{start:{line:69,column:28},end:{line:69,column:49}},16:{start:{line:70,column:4},end:{line:73,column:7}},17:{start:{line:75,column:11},end:{line:82,column:3}},18:{start:{line:76,column:4},end:{line:76,column:32}},19:{start:{line:77,column:4},end:{line:77,column:47}},20:{start:{line:77,column:27},end:{line:77,column:47}},21:{start:{line:78,column:4},end:{line:81,column:7}},22:{start:{line:84,column:4},end:{line:84,column:43}},23:{start:{line:85,column:4},end:{line:85,column:41}},24:{start:{line:86,column:4},end:{line:86,column:39}},25:{start:{line:89,column:4},end:{line:94,column:5}},26:{start:{line:90,column:6},end:{line:90,column:36}},27:{start:{line:91,column:6},end:{line:93,column:8}},28:{start:{line:96,column:13},end:{line:123,column:3}},29:{start:{line:97,column:4},end:{line:103,column:5}},30:{start:{line:98,column:6},end:{line:98,column:37}},31:{start:{line:99,column:6},end:{line:101,column:9}},32:{start:{line:102,column:6},end:{line:102,column:13}},33:{start:{line:104,column:20},end:{line:104,column:40}},34:{start:{line:105,column:4},end:{line:119,column:5}},35:{start:{line:107,column:6},end:{line:112,column:7}},36:{start:{line:108,column:8},end:{line:108,column:42}},37:{start:{line:110,column:8},end:{line:110,column:19}},38:{start:{line:111,column:8},end:{line:111,column:27}},39:{start:{line:113,column:6},end:{line:118,column:7}},40:{start:{line:114,column:8},end:{line:114,column:35}},41:{start:{line:116,column:8},end:{line:116,column:66}},42:{start:{line:116,column:33},end:{line:116,column:66}},43:{start:{line:117,column:8},end:{line:117,column:61}},44:{start:{line:117,column:36},end:{line:117,column:61}},45:{start:{line:120,column:4},end:{line:122,column:7}},46:{start:{line:125,column:14},end:{line:125,column:26}},47:{start:{line:126,column:28},end:{line:126,column:38}},48:{start:{line:127,column:18},end:{line:127,column:20}},49:{start:{line:128,column:4},end:{line:130,column:5}},50:{start:{line:129,column:6},end:{line:129,column:45}},51:{start:{line:131,column:4},end:{line:145,column:9}},52:{start:{line:141,column:23},end:{line:141,column:36}},53:{start:{line:148,column:18},end:{line:148,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:18,column:14},end:{line:18,column:15}},loc:{start:{line:18,column:24},end:{line:20,column:5}},line:18},1:{name:"(anonymous_1)",decl:{start:{line:21,column:13},end:{line:21,column:14}},loc:{start:{line:21,column:19},end:{line:22,column:5}},line:21},2:{name:"(anonymous_2)",decl:{start:{line:23,column:12},end:{line:23,column:13}},loc:{start:{line:23,column:18},end:{line:24,column:5}},line:23},3:{name:"(anonymous_3)",decl:{start:{line:25,column:19},end:{line:25,column:20}},loc:{start:{line:25,column:25},end:{line:26,column:5}},line:25},4:{name:"(anonymous_4)",decl:{start:{line:27,column:17},end:{line:27,column:18}},loc:{start:{line:27,column:23},end:{line:28,column:5}},line:27},5:{name:"(anonymous_5)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:21},end:{line:42,column:3}},line:34},6:{name:"(anonymous_6)",decl:{start:{line:43,column:2},end:{line:43,column:3}},loc:{start:{line:43,column:22},end:{line:64,column:3}},line:43},7:{name:"(anonymous_7)",decl:{start:{line:65,column:18},end:{line:65,column:19}},loc:{start:{line:65,column:24},end:{line:67,column:3}},line:65},8:{name:"(anonymous_8)",decl:{start:{line:68,column:12},end:{line:68,column:13}},loc:{start:{line:68,column:18},end:{line:74,column:3}},line:68},9:{name:"(anonymous_9)",decl:{start:{line:75,column:11},end:{line:75,column:12}},loc:{start:{line:75,column:17},end:{line:82,column:3}},line:75},10:{name:"(anonymous_10)",decl:{start:{line:83,column:2},end:{line:83,column:3}},loc:{start:{line:83,column:25},end:{line:87,column:3}},line:83},11:{name:"(anonymous_11)",decl:{start:{line:88,column:2},end:{line:88,column:3}},loc:{start:{line:88,column:32},end:{line:95,column:3}},line:88},12:{name:"(anonymous_12)",decl:{start:{line:96,column:13},end:{line:96,column:14}},loc:{start:{line:96,column:21},end:{line:123,column:3}},line:96},13:{name:"(anonymous_13)",decl:{start:{line:124,column:2},end:{line:124,column:3}},loc:{start:{line:124,column:11},end:{line:146,column:3}},line:124},14:{name:"(anonymous_14)",decl:{start:{line:141,column:15},end:{line:141,column:16}},loc:{start:{line:141,column:23},end:{line:141,column:36}},line:141}},branchMap:{0:{loc:{start:{line:46,column:12},end:{line:48,column:7}},type:"binary-expr",locations:[{start:{line:46,column:12},end:{line:46,column:27}},{start:{line:46,column:31},end:{line:48,column:7}}],line:46},1:{loc:{start:{line:54,column:12},end:{line:56,column:7}},type:"binary-expr",locations:[{start:{line:54,column:12},end:{line:54,column:27}},{start:{line:54,column:31},end:{line:56,column:7}}],line:54},2:{loc:{start:{line:69,column:4},end:{line:69,column:49}},type:"if",locations:[{start:{line:69,column:4},end:{line:69,column:49}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:69},3:{loc:{start:{line:77,column:4},end:{line:77,column:47}},type:"if",locations:[{start:{line:77,column:4},end:{line:77,column:47}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:77},4:{loc:{start:{line:89,column:4},end:{line:94,column:5}},type:"if",locations:[{start:{line:89,column:4},end:{line:94,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:89},5:{loc:{start:{line:89,column:8},end:{line:89,column:69}},type:"binary-expr",locations:[{start:{line:89,column:8},end:{line:89,column:29}},{start:{line:89,column:33},end:{line:89,column:69}}],line:89},6:{loc:{start:{line:97,column:4},end:{line:103,column:5}},type:"if",locations:[{start:{line:97,column:4},end:{line:103,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:97},7:{loc:{start:{line:105,column:4},end:{line:119,column:5}},type:"if",locations:[{start:{line:105,column:4},end:{line:119,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:105},8:{loc:{start:{line:113,column:6},end:{line:118,column:7}},type:"if",locations:[{start:{line:113,column:6},end:{line:118,column:7}},{start:{line:115,column:13},end:{line:118,column:7}}],line:113},9:{loc:{start:{line:113,column:10},end:{line:113,column:41}},type:"binary-expr",locations:[{start:{line:113,column:10},end:{line:113,column:13}},{start:{line:113,column:17},end:{line:113,column:41}}],line:113},10:{loc:{start:{line:116,column:8},end:{line:116,column:66}},type:"if",locations:[{start:{line:116,column:8},end:{line:116,column:66}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:116},11:{loc:{start:{line:117,column:8},end:{line:117,column:61}},type:"if",locations:[{start:{line:117,column:8},end:{line:117,column:61}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:117},12:{loc:{start:{line:128,column:4},end:{line:130,column:5}},type:"if",locations:[{start:{line:128,column:4},end:{line:130,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:128}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputJson.tsx"],names:[],mappings:"AAyKQ,SACQ,KADR;AAzKR,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,OAAO,gBAA8B;AACrC,SAAS,OAAwB,uBAAuB;AAExD,OAAO;AACP,OAAO;AACP,OAAO;AACP,OAAO;AACP,OAAO;AACP,OAAO,qBAAqB;AAC5B,OAAO;AA2BP,MAAM,0BAA0B,MAAM,UAAkD;AAAA,EACtF,OAAO,eAAe;AAAA,IACpB,aAAa;AAAA,IACb,cAAc;AAAA,IACd,SAAS,CAAC,yBAAyB;AAAA,IACnC,UAAU,CAAC,SAAc;AACvB,aAAO,gBAAgB,MAAM,EAAC,QAAQ,GAAG,WAAW,GAAE,CAAC;AAAA,IACzD;AAAA,IACA,SAAS,MAAM;AAAA,IAAC;AAAA,IAChB,QAAQ,MAAM;AAAA,IAAC;AAAA,IACf,eAAe,MAAM;AAAA,IAAC;AAAA,IACtB,aAAa,MAAM;AAAA,IAAC;AAAA,EACtB;AAAA,EACA;AAAA,EACA;AAAA,EACA,MAA6B;AAAA,EAC7B,oBAA6B;AAAA,EAE7B,YAAY,OAA+B;AACzC,UAAM,KAAK;AACX,SAAK,YAAY;AACjB,SAAK,QAAQ;AAAA,MACX,WAAW;AAAA,MACX,aAAa;AAAA,MACb,WAAW,KAAK,MAAM,SAAU,KAAK,MAAM,KAAK;AAAA,IAClD;AAAA,EACF;AAAA,EAEA,oBAAqB;AACnB,SAAK,OAAO,WAAW,KAAK,KAAM;AAAA,MAChC,OAAO,KAAK,MAAM,SAAU,KAAK,MAAM,KAAK;AAAA,MAC5C,MAAM,KAAK,MAAM,QAAQ;AAAA,QACvB,MAAM;AAAA,MACR;AAAA,MACA,cAAc,KAAK,MAAM;AAAA,MACzB,SAAS;AAAA,MACT,OAAO;AAAA,MACP,gBAAgB;AAAA,MAChB,aAAa,KAAK,MAAM;AAAA,MACxB,MAAM,KAAK,MAAM,QAAQ;AAAA,QACvB,SAAS;AAAA,MACX;AAAA,MACA,eAAe;AAAA,MACf,SAAS,KAAK,MAAM;AAAA,MACpB,gBAAgB;AAAA,IAClB,CAAC;AAED,SAAK,KAAK,GAAG,UAAU,KAAK,QAAQ;AACpC,SAAK,KAAK,GAAG,SAAS,KAAK,OAAO;AAClC,SAAK,KAAK,GAAG,QAAQ,KAAK,MAAM;AAAA,EAClC;AAAA,EAEA,gBAAgB,MAAM;AACpB,SAAK,YAAY;AAAA,EACnB;AAAA,EAEA,UAAU,MAAM;AACd,QAAI,KAAK,MAAM,QAAS,MAAK,MAAM,QAAQ;AAC3C,SAAK,SAAS;AAAA,MACZ,WAAW;AAAA,MACX,aAAc,KAAK,cAAc;AAAA,IACnC,CAAC;AAAA,EACH;AAAA,EAEA,SAAS,MAAM;AACb,SAAK,YAAY;AACjB,QAAI,KAAK,MAAM,OAAQ,MAAK,MAAM,OAAO;AACzC,SAAK,SAAS;AAAA,MACZ,WAAW;AAAA,MACX,aAAa;AAAA,IACf,CAAC;AAAA,EACH;AAAA,EAEA,uBAAwB;AACtB,SAAK,KAAM,IAAI,UAAU,KAAK,QAAQ;AACtC,SAAK,KAAM,IAAI,SAAS,KAAK,OAAO;AACpC,SAAK,KAAM,IAAI,QAAQ,KAAK,MAAM;AAAA,EACpC;AAAA,EAEA,mBAAmB,WAA2B;AAC5C,QAAI,CAAC,KAAK,MAAM,aAAa,UAAU,UAAU,KAAK,MAAM,OAAO;AACjE,WAAK,oBAAoB;AACzB,WAAK,KAAM;AAAA,QACT,KAAK,MAAM,SAAU,KAAK,MAAM,KAAK;AAAA,MACvC;AAAA,IACF;AAAA,EACF;AAAA,EAEA,WAAW,CAAC,OAAgB;AAC1B,QAAI,KAAK,mBAAmB;AAC1B,WAAK,oBAAoB;AACzB,WAAK,SAAS;AAAA,QACZ,WAAW,KAAK,KAAM,SAAS;AAAA,MACjC,CAAC;AACD;AAAA,IACF;AACA,UAAM,UAAU,KAAK,KAAM,SAAS;AAEpC,QAAI,KAAK,MAAM,cAAc,SAAS;AACpC,UAAI,aAAa;AACjB,UAAI;AACF,sBAAc,KAAK,MAAM,OAAO;AAAA,MAClC,SAAQ,MAAM;AACZ,cAAM;AACN,gBAAQ,KAAK,IAAI;AAAA,MACnB;AAEA,UAAI,OAAO,KAAK,MAAM,eAAe;AACnC,aAAK,MAAM,cAAc;AAAA,MAC3B,OACK;AACH,YAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,WAAW;AACxD,YAAI,KAAK,MAAM,YAAa,MAAK,MAAM,YAAY;AAAA,MACrD;AAAA,IACF;AAEA,SAAK,SAAS;AAAA,MACZ,WAAW;AAAA,IACb,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,EAAC,YAAW,IAAI,KAAK;AAC3B,UAAM,QAAQ,CAAC;AACf,QAAI,KAAK,MAAM,WAAW;AACxB,YAAM,YAAY,KAAK,MAAM;AAAA,IAC/B;AAEA,WAAO,qBAAC,SAAI,WAAU,cAAa,eAAe,KAAK,eAAe,eAAY,QAChF;AAAA,0BAAC,SAAI,WAAW,WAAW,uBAAuB,EAAC,2BAA2B,YAAW,CAAC,GACxF,+BAAC,SAAM,GAAM;AAAA;AAAA,QACL,oBAAC,SAAI,iBAAG;AAAA,QAAM;AAAA,SACtB,GACF;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,WAAW,WAAW,wBAAwB,KAAK,MAAM,SAAS;AAAA,UAClE,KAAK,CAAC,OAAO,KAAK,MAAM;AAAA,UACxB;AAAA;AAAA,MACF;AAAA,OACF;AAAA,EACF;AACF;AAEA,MAAM,YAAY,gBAAgB,EAAE,iBAAiB;AACrD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"da44fe7250311daecfc0a96e15b8409621007dbc"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return br=function(){return a},a}br();class CW extends nr.Component{constructor(t){br().f[5]++,br().s[4]++;super(t);Pn(this,"_keyEvent");Pn(this,"_doc");Pn(this,"_el",(br().s[2]++,null));Pn(this,"_cancelNextChange",(br().s[3]++,!1));Pn(this,"onPointerDown",(br().s[11]++,()=>{br().f[7]++,br().s[12]++,this._keyEvent="pointer"}));Pn(this,"onFocus",(br().s[13]++,()=>{br().f[8]++,br().s[14]++,this.props.onFocus?(br().b[2][0]++,br().s[15]++,this.props.onFocus()):br().b[2][1]++,br().s[16]++,this.setState({isEditing:!0,showMessage:this._keyEvent==="keyboard"})}));Pn(this,"onBlur",(br().s[17]++,()=>{br().f[9]++,br().s[18]++,this._keyEvent="keyboard",br().s[19]++,this.props.onBlur?(br().b[3][0]++,br().s[20]++,this.props.onBlur()):br().b[3][1]++,br().s[21]++,this.setState({isEditing:!1,showMessage:!1})}));Pn(this,"onChange",(br().s[28]++,t=>{if(br().f[12]++,br().s[29]++,this._cancelNextChange){br().b[6][0]++,br().s[30]++,this._cancelNextChange=!1,br().s[31]++,this.setState({prevValue:this._doc.getValue()}),br().s[32]++;return}else br().b[6][1]++;const r=(br().s[33]++,this._doc.getValue());if(br().s[34]++,this.state.prevValue!==r){br().b[7][0]++;let i,s;br().s[35]++;try{br().s[36]++,i=JSON.parse(r)}catch(a){br().s[37]++,s=a,br().s[38]++,console.warn(a)}br().s[39]++,br().b[9][0]++,s&&(br().b[9][1]++,this.props.onJSONInvalid)?(br().b[8][0]++,br().s[40]++,this.props.onJSONInvalid()):(br().b[8][1]++,br().s[41]++,this.props.onChange?(br().b[10][0]++,br().s[42]++,this.props.onChange(i)):br().b[10][1]++,br().s[43]++,this.props.onJSONValid?(br().b[11][0]++,br().s[44]++,this.props.onJSONValid()):br().b[11][1]++)}else br().b[7][1]++;br().s[45]++,this.setState({prevValue:r})}));br().s[5]++,this._keyEvent="keyboard",br().s[6]++,this.state={isEditing:!1,showMessage:!1,prevValue:this.props.getValue(this.props.layer)}}componentDidMount(){br().f[6]++,br().s[7]++,this._doc=vp(this._el,{value:this.props.getValue(this.props.layer),mode:(br().b[0][0]++,this.props.mode||(br().b[0][1]++,{name:"mgl"})),lineWrapping:this.props.lineWrapping,tabSize:2,theme:"maputnik",viewportMargin:1/0,lineNumbers:this.props.lineNumbers,lint:(br().b[1][0]++,this.props.lint||(br().b[1][1]++,{context:"layer"})),matchBrackets:!0,gutters:this.props.gutters,scrollbarStyle:"null"}),br().s[8]++,this._doc.on("change",this.onChange),br().s[9]++,this._doc.on("focus",this.onFocus),br().s[10]++,this._doc.on("blur",this.onBlur)}componentWillUnMount(){br().f[10]++,br().s[22]++,this._doc.off("change",this.onChange),br().s[23]++,this._doc.off("focus",this.onFocus),br().s[24]++,this._doc.off("blur",this.onBlur)}componentDidUpdate(t){br().f[11]++,br().s[25]++,br().b[5][0]++,!this.state.isEditing&&(br().b[5][1]++,t.layer!==this.props.layer)?(br().b[4][0]++,br().s[26]++,this._cancelNextChange=!0,br().s[27]++,this._doc.setValue(this.props.getValue(this.props.layer))):br().b[4][1]++}render(){br().f[13]++;const t=(br().s[46]++,this.props.t),{showMessage:r}=(br().s[47]++,this.state),i=(br().s[48]++,{});return br().s[49]++,this.props.maxHeight?(br().b[12][0]++,br().s[50]++,i.maxHeight=this.props.maxHeight):br().b[12][1]++,br().s[51]++,ue.jsxs("div",{className:"JSONEditor",onPointerDown:this.onPointerDown,"aria-hidden":"true",children:[ue.jsx("div",{className:am("JSONEditor__message",{"JSONEditor__message--on":r}),children:ue.jsxs(T0,{t,children:["Press ",ue.jsx("kbd",{children:"ESC"})," to lose focus"]})}),ue.jsx("div",{className:am("codemirror-container",this.props.className),ref:s=>(br().f[14]++,br().s[52]++,this._el=s),style:i})]})}}Pn(CW,"defaultProps",(br().s[0]++,{lineNumbers:!0,lineWrapping:!1,gutters:["CodeMirror-lint-markers"],getValue:t=>(br().f[0]++,br().s[1]++,yW(t,{indent:2,maxLength:40})),onFocus:()=>{br().f[1]++},onBlur:()=>{br().f[2]++},onJSONInvalid:()=>{br().f[3]++},onJSONValid:()=>{br().f[4]++}}));const Kue=(br().s[53]++,Ns()(CW));function rx(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldJson.tsx",e="60f4cd40e505c4a9f8de1078b77716b10a4a4264",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldJson.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:6,column:61}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:7,column:3}},line:5}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldJson.tsx"],names:[],mappings:"AASW;AATX,OAAO,WAAW;AAClB,OAAO,eAAiC;AAMxC,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,SAAS;AACP,WAAO,oBAAC,aAAW,GAAG,KAAK,OAAO;AAAA,EACpC;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"60f4cd40e505c4a9f8de1078b77716b10a4a4264"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return rx=function(){return a},a}rx();class NO extends nr.Component{render(){return rx().f[0]++,rx().s[0]++,ue.jsx(Kue,{...this.props})}}var GC="M12.42,5.29C11.32,5.19 10.35,6 10.25,7.11L10,10H12.82V12H9.82L9.38,17.07C9.18,19.27 7.24,20.9 5.04,20.7C3.79,20.59 2.66,19.9 2,18.83L3.5,17.33C3.83,18.38 4.96,18.97 6,18.63C6.78,18.39 7.33,17.7 7.4,16.89L7.82,12H4.82V10H8L8.27,6.93C8.46,4.73 10.39,3.1 12.6,3.28C13.86,3.39 15,4.09 15.66,5.17L14.16,6.67C13.91,5.9 13.23,5.36 12.42,5.29M22,13.65L20.59,12.24L17.76,15.07L14.93,12.24L13.5,13.65L16.35,16.5L13.5,19.31L14.93,20.72L17.76,17.89L20.59,20.72L22,19.31L19.17,16.5L22,13.65Z",Due="M7,10L12,15L17,10H7Z",Rue="M7,15L12,10L17,15H7Z",WO="M22,10A2,2 0 0,1 20,12H4A2,2 0 0,1 2,10V3H4V5H8V3H10V5H14V3H16V5H20V3H22V10M4,10H8V7H4V10M10,10H14V7H10V10M20,10V7H16V10H20M11,14H13V17H16V19H13V22H11V19H8V17H11V14Z";function Fg(){var n="/home/runner/work/maputnik/maputnik/src/libs/filterops.ts",e="99dad9631fbee5fc23be2dafaf7c7eea92c38eac",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/filterops.ts",statementMap:{0:{start:{line:2,column:34},end:{line:2,column:56}},1:{start:{line:3,column:28},end:{line:3,column:41}},2:{start:{line:4,column:30},end:{line:4,column:123}},3:{start:{line:4,column:88},end:{line:4,column:122}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:80},end:{line:4,column:81}},loc:{start:{line:4,column:88},end:{line:4,column:122}},line:4}},branchMap:{},s:{0:0,1:0,2:0,3:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/filterops.ts"],names:[],mappings:"AAAA,OAAO,YAAY;AAEZ,aAAM,qBAAqB,CAAC,OAAO,OAAO,MAAM;AAChD,aAAM,eAAe,CAAC,MAAM,KAAK;AACjC,aAAM,iBAAiB,OAC3B,KAAK,OAAO,gBAAgB,MAAM,EAClC,OAAO,QAAM,mBAAmB,QAAQ,EAAE,IAAI,CAAC;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"99dad9631fbee5fc23be2dafaf7c7eea92c38eac"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Fg=function(){return a},a}Fg();const GO=(Fg().s[0]++,["all","any","none"]);Fg().s[1]++;const Fue=(Fg().s[2]++,Object.keys(ts.filter_operator.values).filter(n=>(Fg().f[0]++,Fg().s[3]++,GO.indexOf(n)<0)));function _i(){var n="/home/runner/work/maputnik/maputnik/src/components/SingleFilterEditor.tsx",e="d18e3b448d830733ac17bcacd45f7c08e364baa2",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/SingleFilterEditor.tsx",statementMap:{0:{start:{line:8,column:2},end:{line:8,column:25}},1:{start:{line:8,column:16},end:{line:8,column:25}},2:{start:{line:9,column:2},end:{line:9,column:25}},3:{start:{line:9,column:16},end:{line:9,column:25}},4:{start:{line:10,column:2},end:{line:10,column:23}},5:{start:{line:13,column:19},end:{line:13,column:40}},6:{start:{line:14,column:2},end:{line:16,column:3}},7:{start:{line:15,column:4},end:{line:15,column:13}},8:{start:{line:17,column:2},end:{line:23,column:3}},9:{start:{line:18,column:4},end:{line:18,column:16}},10:{start:{line:19,column:9},end:{line:23,column:3}},11:{start:{line:20,column:4},end:{line:20,column:17}},12:{start:{line:22,column:4},end:{line:22,column:13}},13:{start:{line:26,column:2},end:{line:26,column:21}},14:{start:{line:27,column:2},end:{line:27,column:22}},15:{start:{line:28,column:2},end:{line:28,column:11}},16:{start:{line:31,column:24},end:{line:33,column:3}},17:{start:{line:35,column:20},end:{line:35,column:76}},18:{start:{line:36,column:4},end:{line:40,column:5}},19:{start:{line:37,column:6},end:{line:37,column:43}},20:{start:{line:38,column:11},end:{line:40,column:5}},21:{start:{line:39,column:6},end:{line:39,column:47}},22:{start:{line:41,column:4},end:{line:41,column:35}},23:{start:{line:44,column:14},end:{line:44,column:31}},24:{start:{line:45,column:21},end:{line:45,column:25}},25:{start:{line:46,column:25},end:{line:46,column:29}},26:{start:{line:47,column:23},end:{line:47,column:33}},27:{start:{line:48,column:4},end:{line:75,column:9}},28:{start:{line:54,column:72},end:{line:54,column:92}},29:{start:{line:55,column:41},end:{line:55,column:104}},30:{start:{line:63,column:37},end:{line:63,column:100}},31:{start:{line:72,column:27},end:{line:72,column:89}}},fnMap:{0:{name:"tryParseInt",decl:{start:{line:7,column:9},end:{line:7,column:20}},loc:{start:{line:7,column:24},end:{line:11,column:1}},line:7},1:{name:"tryParseBool",decl:{start:{line:12,column:9},end:{line:12,column:21}},loc:{start:{line:12,column:25},end:{line:24,column:1}},line:12},2:{name:"parseFilter",decl:{start:{line:25,column:9},end:{line:25,column:20}},loc:{start:{line:25,column:24},end:{line:29,column:1}},line:25},3:{name:"(anonymous_3)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:58},end:{line:42,column:3}},line:34},4:{name:"(anonymous_4)",decl:{start:{line:43,column:2},end:{line:43,column:3}},loc:{start:{line:43,column:11},end:{line:76,column:3}},line:43},5:{name:"(anonymous_5)",decl:{start:{line:54,column:58},end:{line:54,column:59}},loc:{start:{line:54,column:72},end:{line:54,column:92}},line:54},6:{name:"(anonymous_6)",decl:{start:{line:55,column:20},end:{line:55,column:21}},loc:{start:{line:55,column:41},end:{line:55,column:104}},line:55},7:{name:"(anonymous_7)",decl:{start:{line:63,column:20},end:{line:63,column:21}},loc:{start:{line:63,column:37},end:{line:63,column:100}},line:63},8:{name:"(anonymous_8)",decl:{start:{line:72,column:20},end:{line:72,column:21}},loc:{start:{line:72,column:27},end:{line:72,column:89}},line:72}},branchMap:{0:{loc:{start:{line:8,column:2},end:{line:8,column:25}},type:"if",locations:[{start:{line:8,column:2},end:{line:8,column:25}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:8},1:{loc:{start:{line:9,column:2},end:{line:9,column:25}},type:"if",locations:[{start:{line:9,column:2},end:{line:9,column:25}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:9},2:{loc:{start:{line:14,column:2},end:{line:16,column:3}},type:"if",locations:[{start:{line:14,column:2},end:{line:16,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:14},3:{loc:{start:{line:17,column:2},end:{line:23,column:3}},type:"if",locations:[{start:{line:17,column:2},end:{line:23,column:3}},{start:{line:19,column:9},end:{line:23,column:3}}],line:17},4:{loc:{start:{line:19,column:9},end:{line:23,column:3}},type:"if",locations:[{start:{line:19,column:9},end:{line:23,column:3}},{start:{line:21,column:9},end:{line:23,column:3}}],line:19},5:{loc:{start:{line:36,column:4},end:{line:40,column:5}},type:"if",locations:[{start:{line:36,column:4},end:{line:40,column:5}},{start:{line:38,column:11},end:{line:40,column:5}}],line:36},6:{loc:{start:{line:36,column:8},end:{line:36,column:49}},type:"binary-expr",locations:[{start:{line:36,column:8},end:{line:36,column:26}},{start:{line:36,column:30},end:{line:36,column:49}}],line:36},7:{loc:{start:{line:38,column:11},end:{line:40,column:5}},type:"if",locations:[{start:{line:38,column:11},end:{line:40,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:38},8:{loc:{start:{line:67,column:6},end:{line:74,column:10}},type:"binary-expr",locations:[{start:{line:67,column:6},end:{line:67,column:27}},{start:{line:67,column:47},end:{line:74,column:10}}],line:67}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/SingleFilterEditor.tsx"],names:[],mappings:"AA+DW,SAEH,KAFG;AA/DX,OAAO,WAAW;AAElB,SAAQ,sBAAqB;AAC7B,OAAO,iBAAiB;AACxB,OAAO,uBAAuB;AAC9B,OAAO,iBAAiB;AAExB,SAAS,YAAY,GAAoB;AACvC,MAAI,MAAM,GAAI,QAAO;AACrB,MAAI,MAAM,CAAW,EAAG,QAAO;AAC/B,SAAO,WAAW,CAAW;AAC/B;AAEA,SAAS,aAAa,GAAqB;AACzC,QAAM,WAAY,OAAO,MAAO;AAChC,MAAG,CAAC,UAAU;AACZ,WAAO;AAAA,EACT;AAEA,MAAG,EAAE,MAAM,cAAc,GAAG;AAC1B,WAAO;AAAA,EACT,WACQ,EAAE,MAAM,eAAe,GAAG;AAChC,WAAO;AAAA,EACT,OACK;AACH,WAAO;AAAA,EACT;AACF;AAEA,SAAS,YAAY,GAA8B;AACjD,MAAI,YAAY,CAAQ;AACxB,MAAI,aAAa,CAAQ;AACzB,SAAO;AACT;AAQA,qBAAqB,2BAA2B,MAAM,UAAmC;AAAA,EACvF,OAAO,eAAe;AAAA,IACpB,YAAY,CAAC;AAAA,EACf;AAAA,EAEA,oBAAoB,UAAkB,cAAsB,YAAsB;AAChF,QAAI,YAAY,CAAC,UAAU,cAAc,GAAG,WAAW,IAAI,WAAW,CAAC;AACvE,QAAG,aAAa,SAAS,aAAa,QAAQ;AAC5C,kBAAY,CAAC,UAAU,YAAY;AAAA,IACrC,WAAU,WAAW,WAAW,GAAG;AACjC,kBAAY,CAAC,UAAU,cAAc,EAAE;AAAA,IACzC;AACA,SAAK,MAAM,SAAS,SAAS;AAAA,EAC/B;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,WAAW,EAAE,CAAC;AACpB,UAAM,eAAe,EAAE,CAAC;AACxB,UAAM,aAAa,EAAE,MAAM,CAAC;AAE5B,WAAO,qBAAC,SAAI,WAAU,iCACpB;AAAA,0BAAC,SAAI,WAAU,mCACb;AAAA,QAAC;AAAA;AAAA,UACC,cAAW;AAAA,UACX,OAAO;AAAA,UACP,SAAS,OAAO,KAAK,KAAK,MAAM,UAAW,EAAE,IAAI,cAAY,CAAC,UAAU,QAAQ,CAAC;AAAA,UACjF,UAAU,CAAC,oBAA4B,KAAK,oBAAoB,UAAU,iBAAiB,UAAU;AAAA;AAAA,MACvG,GACF;AAAA,MACA,oBAAC,SAAI,WAAU,mCACb;AAAA,QAAC;AAAA;AAAA,UACC,cAAW;AAAA,UACX,OAAO;AAAA,UACP,UAAU,CAAC,gBAAwB,KAAK,oBAAoB,aAAa,cAAc,UAAU;AAAA,UACjG,SAAS;AAAA;AAAA,MACX,GACF;AAAA,MACC,WAAW,SAAS,KACrB,oBAAC,SAAI,WAAU,+BACb;AAAA,QAAC;AAAA;AAAA,UACC,cAAW;AAAA,UACX,OAAO,WAAW,KAAK,GAAG;AAAA,UAC1B,UAAU,CAAC,MAAc,KAAK,oBAAoB,UAAU,cAAc,EAAE,MAAM,GAAG,CAAC;AAAA;AAAA,MACxF,GACF;AAAA,OAEF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d18e3b448d830733ac17bcacd45f7c08e364baa2"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return _i=function(){return a},a}_i();function Lue(n){return _i().f[0]++,_i().s[0]++,n===""?(_i().b[0][0]++,_i().s[1]++,n):(_i().b[0][1]++,_i().s[2]++,isNaN(n)?(_i().b[1][0]++,_i().s[3]++,n):(_i().b[1][1]++,_i().s[4]++,parseFloat(n)))}function Uue(n){_i().f[1]++;const e=(_i().s[5]++,typeof n=="string");if(_i().s[6]++,e)_i().b[2][1]++;else return _i().b[2][0]++,_i().s[7]++,n;return _i().s[8]++,n.match(/^\s*true\s*$/)?(_i().b[3][0]++,_i().s[9]++,!0):(_i().b[3][1]++,_i().s[10]++,n.match(/^\s*false\s*$/)?(_i().b[4][0]++,_i().s[11]++,!1):(_i().b[4][1]++,_i().s[12]++,n))}function zue(n){return _i().f[2]++,_i().s[13]++,n=Lue(n),_i().s[14]++,n=Uue(n),_i().s[15]++,n}class _W extends nr.Component{onFilterPartChanged(e,t,r){_i().f[3]++;let i=(_i().s[17]++,[e,t,...r.map(zue)]);_i().s[18]++,_i().b[6][0]++,e==="has"||(_i().b[6][1]++,e==="!has")?(_i().b[5][0]++,_i().s[19]++,i=[e,t]):(_i().b[5][1]++,_i().s[20]++,r.length===0?(_i().b[7][0]++,_i().s[21]++,i=[e,t,""]):_i().b[7][1]++),_i().s[22]++,this.props.onChange(i)}render(){_i().f[4]++;const e=(_i().s[23]++,this.props.filter),t=(_i().s[24]++,e[0]),r=(_i().s[25]++,e[1]),i=(_i().s[26]++,e.slice(2));return _i().s[27]++,ue.jsxs("div",{className:"maputnik-filter-editor-single",children:[ue.jsx("div",{className:"maputnik-filter-editor-property",children:ue.jsx(rv,{"aria-label":"key",value:r,options:Object.keys(this.props.properties).map(s=>(_i().f[5]++,_i().s[28]++,[s,s])),onChange:s=>(_i().f[6]++,_i().s[29]++,this.onFilterPartChanged(t,s,i))})}),ue.jsx("div",{className:"maputnik-filter-editor-operator",children:ue.jsx(Xg,{"aria-label":"function",value:t,onChange:s=>(_i().f[7]++,_i().s[30]++,this.onFilterPartChanged(s,r,i)),options:Fue})}),(_i().b[8][0]++,i.length>0&&(_i().b[8][1]++,ue.jsx("div",{className:"maputnik-filter-editor-args",children:ue.jsx(Qf,{"aria-label":"value",value:i.join(","),onChange:s=>(_i().f[8]++,_i().s[31]++,this.onFilterPartChanged(t,r,s.split(",")))})})))]})}}Pn(_W,"defaultProps",(_i().s[16]++,{properties:{}}));function My(){var n="/home/runner/work/maputnik/maputnik/src/components/FilterEditorBlock.tsx",e="cef1671f65ba48cf49a518a548a597faa051d67d",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FilterEditorBlock.tsx",statementMap:{0:{start:{line:8,column:14},end:{line:8,column:26}},1:{start:{line:9,column:4},end:{line:20,column:9}},2:{start:{line:23,column:26},end:{line:23,column:70}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:11},end:{line:21,column:3}},line:7}},branchMap:{},s:{0:0,1:0,2:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FilterEditorBlock.tsx"],names:[],mappings:"AAYW,SAOD,KAPC;AAZX,OAAO,WAAkC;AACzC,OAAO,iBAAiB;AACxB,SAAQ,gBAAe;AACvB,SAA0B,uBAAuB;AAMjD,MAAM,kCAAkC,MAAM,UAA0C;AAAA,EACtF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SAAI,WAAU,gCACpB;AAAA,0BAAC,SAAI,WAAU,uCACb;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,SAAS,KAAK,MAAM;AAAA,UACpB,OAAO,EAAE,qBAAqB;AAAA,UAE9B,8BAAC,YAAS;AAAA;AAAA,MACZ,GACF;AAAA,MACA,oBAAC,SAAI,WAAU,wCACZ,eAAK,MAAM,UACd;AAAA,OACF;AAAA,EACF;AACF;AAEA,MAAM,oBAAoB,gBAAgB,EAAE,yBAAyB;AACrE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"cef1671f65ba48cf49a518a548a597faa051d67d"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return My=function(){return a},a}My();class jue extends nr.Component{render(){My().f[0]++;const e=(My().s[0]++,this.props.t);return My().s[1]++,ue.jsxs("div",{className:"maputnik-filter-editor-block",children:[ue.jsx("div",{className:"maputnik-filter-editor-block-action",children:ue.jsx(Ja,{className:"maputnik-delete-filter",onClick:this.props.onDelete,title:e("Delete filter block"),children:ue.jsx($y,{})})}),ue.jsx("div",{className:"maputnik-filter-editor-block-content",children:this.props.children})]})}}const Nue=(My().s[2]++,Ns()(jue));var J5,FT;function Wue(){if(FT)return J5;FT=1;var n="[object Symbol]",e="\\ud800-\\udfff",t="\\u0300-\\u036f\\ufe20-\\ufe23",r="\\u20d0-\\u20f0",i="\\ufe0e\\ufe0f",s="["+e+"]",a="["+t+r+"]",o="\\ud83c[\\udffb-\\udfff]",d="(?:"+a+"|"+o+")",g="[^"+e+"]",b="(?:\\ud83c[\\udde6-\\uddff]){2}",E="[\\ud800-\\udbff][\\udc00-\\udfff]",S="\\u200d",I=d+"?",P="["+i+"]?",z="(?:"+S+"(?:"+[g,b,E].join("|")+")"+P+I+")*",j=P+I+z,q="(?:"+[g+a+"?",a,b,E,s].join("|")+")",Y=RegExp(o+"(?="+o+")|"+q+j,"g"),ie=RegExp("["+S+e+t+r+i+"]"),te=typeof window=="object"&&window&&window.Object===Object&&window,V=typeof self=="object"&&self&&self.Object===Object&&self,ne=te||V||Function("return this")();function G(gt){return gt.split("")}function oe(gt){return ie.test(gt)}function he(gt){return oe(gt)?pe(gt):G(gt)}function pe(gt){return gt.match(Y)||[]}var Ee=Object.prototype,me=Ee.toString,Se=ne.Symbol,De=Se?Se.prototype:void 0,be=De?De.toString:void 0;function at(gt,Lt,Kt){var Ue=-1,Pe=gt.length;Lt<0&&(Lt=-Lt>Pe?0:Pe+Lt),Kt=Kt>Pe?Pe:Kt,Kt<0&&(Kt+=Pe),Pe=Lt>Kt?0:Kt-Lt>>>0,Lt>>>=0;for(var Be=Array(Pe);++Ue<Pe;)Be[Ue]=gt[Ue+Lt];return Be}function Ze(gt){if(typeof gt=="string")return gt;if(Fe(gt))return be?be.call(gt):"";var Lt=gt+"";return Lt=="0"&&1/gt==-1/0?"-0":Lt}function Je(gt,Lt,Kt){var Ue=gt.length;return Kt=Kt===void 0?Ue:Kt,!Lt&&Kt>=Ue?gt:at(gt,Lt,Kt)}function We(gt){return function(Lt){Lt=He(Lt);var Kt=oe(Lt)?he(Lt):void 0,Ue=Kt?Kt[0]:Lt.charAt(0),Pe=Kt?Je(Kt,1).join(""):Lt.slice(1);return Ue[gt]()+Pe}}function Me(gt){return!!gt&&typeof gt=="object"}function Fe(gt){return typeof gt=="symbol"||Me(gt)&&me.call(gt)==n}function He(gt){return gt==null?"":Ze(gt)}function bt(gt){return Yt(He(gt).toLowerCase())}var Yt=We("toUpperCase");return J5=bt,J5}var Gue=Wue();const QO=el(Gue);function Np(){var n="/home/runner/work/maputnik/maputnik/src/libs/label-from-field-name.ts",e="8b86d889d32efa9a6cc667b2fa3579002dfb58fc",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/label-from-field-name.ts",statementMap:{0:{start:{line:4,column:16},end:{line:4,column:36}},1:{start:{line:5,column:2},end:{line:9,column:3}},2:{start:{line:6,column:4},end:{line:6,column:52}},3:{start:{line:8,column:4},end:{line:8,column:22}},4:{start:{line:10,column:2},end:{line:10,column:27}}},fnMap:{0:{name:"labelFromFieldName",decl:{start:{line:2,column:24},end:{line:2,column:42}},loc:{start:{line:2,column:54},end:{line:11,column:1}},line:2}},branchMap:{0:{loc:{start:{line:5,column:2},end:{line:9,column:3}},type:"if",locations:[{start:{line:5,column:2},end:{line:9,column:3}},{start:{line:7,column:9},end:{line:9,column:3}}],line:5}},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/label-from-field-name.ts"],names:[],mappings:"AAAA,OAAO,gBAAgB;AAEvB,wBAAwB,mBAAmB,WAAmB;AAC5D,MAAI;AACJ,QAAM,QAAQ,UAAU,MAAM,GAAG;AACjC,MAAI,MAAM,SAAS,GAAG;AACpB,YAAQ,UAAU,MAAM,GAAG,EAAE,MAAM,CAAC,EAAE,KAAK,GAAG;AAAA,EAChD,OACK;AACH,YAAQ;AAAA,EACV;AACA,SAAO,WAAW,KAAK;AACzB;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8b86d889d32efa9a6cc667b2fa3579002dfb58fc"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Np=function(){return a},a}Np();function y3(n){Np().f[0]++;let e;const t=(Np().s[0]++,n.split("-"));return Np().s[1]++,t.length>1?(Np().b[0][0]++,Np().s[2]++,e=n.split("-").slice(1).join(" ")):(Np().b[0][1]++,Np().s[3]++,e=n),Np().s[4]++,QO(e)}function Eo(){var n="/home/runner/work/maputnik/maputnik/src/components/_ExpressionProperty.tsx",e="550aede3b5713892add5bda71ec153770e1b1129",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/_ExpressionProperty.tsx",statementMap:{0:{start:{line:11,column:24},end:{line:17,column:3}},1:{start:{line:19,column:4},end:{line:19,column:17}},2:{start:{line:20,column:4},end:{line:22,column:6}},3:{start:{line:24,column:18},end:{line:28,column:3}},4:{start:{line:25,column:4},end:{line:27,column:7}},5:{start:{line:29,column:16},end:{line:33,column:3}},6:{start:{line:30,column:4},end:{line:32,column:7}},7:{start:{line:35,column:64},end:{line:35,column:74}},8:{start:{line:36,column:26},end:{line:36,column:36}},9:{start:{line:37,column:25},end:{line:37,column:52}},10:{start:{line:38,column:42},end:{line:60,column:8}},11:{start:{line:61,column:21},end:{line:61,column:83}},12:{start:{line:62,column:23},end:{line:62,column:39}},13:{start:{line:63,column:26},end:{line:63,column:40}},14:{start:{line:64,column:24},end:{line:64,column:26}},15:{start:{line:66,column:6},end:{line:66,column:65}},16:{start:{line:68,column:4},end:{line:79,column:5}},17:{start:{line:69,column:6},end:{line:69,column:52}},18:{start:{line:71,column:6},end:{line:75,column:9}},19:{start:{line:72,column:8},end:{line:72,column:45}},20:{start:{line:74,column:8},end:{line:74,column:39}},21:{start:{line:76,column:6},end:{line:78,column:7}},22:{start:{line:77,column:8},end:{line:77,column:37}},23:{start:{line:80,column:4},end:{line:110,column:6}},24:{start:{line:113,column:27},end:{line:113,column:72}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:13,column:13},end:{line:13,column:14}},loc:{start:{line:13,column:19},end:{line:14,column:5}},line:13},1:{name:"(anonymous_1)",decl:{start:{line:15,column:12},end:{line:15,column:13}},loc:{start:{line:15,column:18},end:{line:16,column:5}},line:15},2:{name:"(anonymous_2)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:21},end:{line:23,column:3}},line:18},3:{name:"(anonymous_3)",decl:{start:{line:24,column:18},end:{line:24,column:19}},loc:{start:{line:24,column:28},end:{line:28,column:3}},line:24},4:{name:"(anonymous_4)",decl:{start:{line:29,column:16},end:{line:29,column:17}},loc:{start:{line:29,column:22},end:{line:33,column:3}},line:29},5:{name:"(anonymous_5)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:11},end:{line:111,column:3}},line:34},6:{name:"getValue",decl:{start:{line:65,column:13},end:{line:65,column:21}},loc:{start:{line:65,column:28},end:{line:67,column:5}},line:65},7:{name:"(anonymous_7)",decl:{start:{line:71,column:36},end:{line:71,column:37}},loc:{start:{line:71,column:55},end:{line:73,column:7}},line:71},8:{name:"(anonymous_8)",decl:{start:{line:73,column:17},end:{line:73,column:18}},loc:{start:{line:73,column:36},end:{line:75,column:7}},line:73}},branchMap:{0:{loc:{start:{line:37,column:25},end:{line:37,column:52}},type:"cond-expr",locations:[{start:{line:37,column:35},end:{line:37,column:45}},{start:{line:37,column:48},end:{line:37,column:52}}],line:37},1:{loc:{start:{line:39,column:6},end:{line:49,column:7}},type:"binary-expr",locations:[{start:{line:39,column:6},end:{line:39,column:23}},{start:{line:39,column:43},end:{line:49,column:7}}],line:39},2:{loc:{start:{line:61,column:21},end:{line:61,column:83}},type:"cond-expr",locations:[{start:{line:61,column:44},end:{line:61,column:53}},{start:{line:61,column:56},end:{line:61,column:83}}],line:61},3:{loc:{start:{line:68,column:4},end:{line:79,column:5}},type:"if",locations:[{start:{line:68,column:4},end:{line:79,column:5}},{start:{line:70,column:11},end:{line:79,column:5}}],line:68},4:{loc:{start:{line:76,column:6},end:{line:78,column:7}},type:"if",locations:[{start:{line:76,column:6},end:{line:78,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:76}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_ExpressionProperty.tsx"],names:[],mappings:"AA6DM,mBASM,KATN;AA7DN,OAAO,WAAW;AAClB,SAAQ,UAAU,cAAa;AAC/B,OAAO,qBAAqB;AAC5B,SAA0B,uBAAuB;AAEjD,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,wBAAwB;AAC/B,OAAO,eAAe;AAqBtB,MAAM,mCAAmC,MAAM,UAAoE;AAAA,EACjH,OAAO,eAAe;AAAA,IACpB,QAAQ,CAAC;AAAA,IACT,SAAS,MAAM;AAAA,IAAC;AAAA,IAChB,QAAQ,MAAM;AAAA,IAAC;AAAA,EACjB;AAAA,EAEA,YAAY,OAAwC;AAClD,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,WAAW;AAAA,IACb;AAAA,EACF;AAAA,EAEA,gBAAgB,CAAC,SAAgB;AAC/B,SAAK,SAAS;AAAA,MACZ,WAAW;AAAA,IACb,CAAC;AAAA,EACH;AAAA,EAEA,cAAc,MAAM;AAClB,SAAK,SAAS;AAAA,MACZ,WAAW;AAAA,IACb,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,GAAG,QAAQ,WAAW,WAAW,OAAO,QAAO,IAAI,KAAK;AAC/D,UAAM,EAAC,UAAS,IAAI,KAAK;AACzB,UAAM,eAAe,UAAU,CAAC,QAAQ,IAAI;AAE5C,UAAM,gBACJ,iCACG;AAAA,WAAK,MAAM,UACV;AAAA,QAAC;AAAA;AAAA,UAEC,SAAS,KAAK,MAAM;AAAA,UACpB,UAAU;AAAA,UACV,WAAU;AAAA,UACV,OAAO,EAAE,wBAAwB;AAAA,UAEjC,8BAAC,UAAO;AAAA;AAAA,QANJ;AAAA,MAON;AAAA,MAEF;AAAA,QAAC;AAAA;AAAA,UAEC,SAAS,KAAK,MAAM;AAAA,UACpB,WAAU;AAAA,UACV,OAAO,EAAE,mBAAmB;AAAA,UAE5B,8BAAC,YAAS;AAAA;AAAA,QALN;AAAA,MAMN;AAAA,OACF;AAGF,UAAM,WAAW,cAAc,SAAY,YAAY,GAAG,SAAS,IAAI,SAAS;AAEhF,UAAM,aAAa,OAAQ,QAAQ;AACnC,UAAM,gBAAgB,GAAG,QAAQ;AACjC,UAAM,cAAc,CAAC;AAErB,aAAS,SAAS,MAAW;AAC3B,aAAO,gBAAgB,MAAM,EAAC,QAAQ,GAAG,WAAW,GAAE,CAAC;AAAA,IACzD;AAEA,QAAI,WAAW;AACb,kBAAY,KAAK,EAAC,SAAS,eAAc,CAAC;AAAA,IAC5C,OACK;AACH,aAAO,QAAQ,MAAO,EACnB,OAAO,CAAC,CAAC,KAAK,MAAM,MAAM;AACzB,eAAO,IAAI,WAAW,aAAa;AAAA,MACrC,CAAC,EACA,QAAQ,CAAC,CAAC,MAAM,KAAK,MAAM;AAC1B,eAAO,YAAY,KAAK,KAAK;AAAA,MAC/B,CAAC;AAEH,UAAI,YAAY;AACd,oBAAY,KAAK,UAAU;AAAA,MAC7B;AAAA,IACF;AAEA,WAAO;AAAA,MAAC;AAAA;AAAA,QAEN,OAAO;AAAA,QACP,WAAW,KAAK,MAAM;AAAA,QACtB,OAAO,EAAE,mBAAmB,KAAK,MAAM,SAAS,CAAC;AAAA,QACjD,QAAQ;AAAA,QACR,UAAU;AAAA,QAEV;AAAA,UAAC;AAAA;AAAA,YACC,MAAM,EAAC,MAAM,MAAK;AAAA,YAClB,MAAM;AAAA,cACJ,SAAS;AAAA,cACT,MAAM,KAAK,MAAM;AAAA,YACnB;AAAA,YACA,WAAU;AAAA,YACV,SAAS,KAAK,MAAM;AAAA,YACpB,QAAQ,KAAK,MAAM;AAAA,YACnB,eAAe,KAAK;AAAA,YACpB,aAAa,KAAK;AAAA,YAClB,OAAO;AAAA,YACP,aAAa;AAAA,YACb,WAAW;AAAA,YACX,cAAc;AAAA,YACd;AAAA,YACA,UAAU,KAAK,MAAM;AAAA;AAAA,QACvB;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,qBAAqB,gBAAgB,EAAE,0BAA0B;AACvE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"550aede3b5713892add5bda71ec153770e1b1129"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Eo=function(){return a},a}Eo();class bW extends nr.Component{constructor(t){Eo().f[2]++,Eo().s[1]++;super(t);Pn(this,"onJSONInvalid",(Eo().s[3]++,t=>{Eo().f[3]++,Eo().s[4]++,this.setState({jsonError:!0})}));Pn(this,"onJSONValid",(Eo().s[5]++,()=>{Eo().f[4]++,Eo().s[6]++,this.setState({jsonError:!1})}));Eo().s[2]++,this.state={jsonError:!1}}render(){Eo().f[5]++;const{t,errors:r,fieldName:i,fieldType:s,value:a,canUndo:o}=(Eo().s[7]++,this.props),{jsonError:d}=(Eo().s[8]++,this.state),g=(Eo().s[9]++,o?(Eo().b[0][0]++,!o()):(Eo().b[0][1]++,!0)),b=(Eo().s[10]++,ue.jsxs(ue.Fragment,{children:[(Eo().b[1][0]++,this.props.onUndo&&(Eo().b[1][1]++,ue.jsx(Ja,{onClick:this.props.onUndo,disabled:g,className:"maputnik-delete-stop",title:t("Revert from expression"),children:ue.jsx(LZ,{})},"undo_action"))),ue.jsx(Ja,{onClick:this.props.onDelete,className:"maputnik-delete-stop",title:t("Delete expression"),children:ue.jsx($y,{})},"delete_action")]})),E=(Eo().s[11]++,s===void 0?(Eo().b[2][0]++,i):(Eo().b[2][1]++,`${s}.${i}`)),S=(Eo().s[12]++,r[E]),I=(Eo().s[13]++,`${E}[`),P=(Eo().s[14]++,[]);function z(j){return Eo().f[6]++,Eo().s[15]++,yW(j,{indent:2,maxLength:38})}return Eo().s[16]++,d?(Eo().b[3][0]++,Eo().s[17]++,P.push({message:"Invalid JSON"})):(Eo().b[3][1]++,Eo().s[18]++,Object.entries(r).filter(([j,q])=>(Eo().f[7]++,Eo().s[19]++,j.startsWith(I))).forEach(([j,q])=>(Eo().f[8]++,Eo().s[20]++,P.push(q))),Eo().s[21]++,S?(Eo().b[4][0]++,Eo().s[22]++,P.push(S)):Eo().b[4][1]++),Eo().s[23]++,ue.jsx(fa,{error:P,fieldSpec:this.props.fieldSpec,label:t(y3(this.props.fieldName)),action:b,wideMode:!0,children:ue.jsx(NO,{mode:{name:"mgl"},lint:{context:"expression",spec:this.props.fieldSpec},className:"maputnik-expression-editor",onFocus:this.props.onFocus,onBlur:this.props.onBlur,onJSONInvalid:this.onJSONInvalid,onJSONValid:this.onJSONValid,layer:a,lineNumbers:!1,maxHeight:200,lineWrapping:!0,getValue:z,onChange:this.props.onChange})})}}Pn(bW,"defaultProps",(Eo().s[0]++,{errors:{},onFocus:()=>{Eo().f[0]++},onBlur:()=>{Eo().f[1]++}}));const xW=(Eo().s[24]++,Ns()(bW));function Un(){var n="/home/runner/work/maputnik/maputnik/src/components/FilterEditor.tsx",e="10bf63b3f71adfa5066d0aecd6eaecbe45ada76f",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FilterEditor.tsx",statementMap:{0:{start:{line:17,column:17},end:{line:17,column:40}},1:{start:{line:18,column:2},end:{line:20,column:3}},2:{start:{line:19,column:4},end:{line:19,column:18}},3:{start:{line:21,column:20},end:{line:21,column:29}},4:{start:{line:22,column:16},end:{line:22,column:31}},5:{start:{line:23,column:2},end:{line:26,column:3}},6:{start:{line:24,column:4},end:{line:24,column:24}},7:{start:{line:25,column:4},end:{line:25,column:32}},8:{start:{line:27,column:2},end:{line:27,column:35}},9:{start:{line:30,column:2},end:{line:30,column:65}},10:{start:{line:33,column:2},end:{line:54,column:4}},11:{start:{line:56,column:19},end:{line:60,column:1}},12:{start:{line:62,column:2},end:{line:64,column:3}},13:{start:{line:63,column:4},end:{line:63,column:16}},14:{start:{line:65,column:21},end:{line:65,column:42}},15:{start:{line:66,column:2},end:{line:66,column:38}},16:{start:{line:69,column:2},end:{line:69,column:52}},17:{start:{line:72,column:2},end:{line:74,column:3}},18:{start:{line:73,column:4},end:{line:73,column:97}},19:{start:{line:73,column:38},end:{line:73,column:59}},20:{start:{line:73,column:75},end:{line:73,column:84}},21:{start:{line:75,column:2},end:{line:75,column:15}},22:{start:{line:78,column:24},end:{line:80,column:3}},23:{start:{line:82,column:4},end:{line:82,column:17}},24:{start:{line:83,column:4},end:{line:86,column:6}},25:{start:{line:90,column:22},end:{line:90,column:58}},26:{start:{line:91,column:4},end:{line:91,column:35}},27:{start:{line:92,column:4},end:{line:92,column:35}},28:{start:{line:95,column:22},end:{line:95,column:58}},29:{start:{line:96,column:4},end:{line:96,column:39}},30:{start:{line:97,column:4},end:{line:97,column:35}},31:{start:{line:99,column:18},end:{line:103,column:3}},32:{start:{line:100,column:26},end:{line:100,column:62}},33:{start:{line:101,column:4},end:{line:101,column:43}},34:{start:{line:102,column:4},end:{line:102,column:39}},35:{start:{line:104,column:16},end:{line:108,column:3}},36:{start:{line:105,column:4},end:{line:107,column:7}},37:{start:{line:109,column:15},end:{line:113,column:3}},38:{start:{line:110,column:4},end:{line:112,column:7}},39:{start:{line:114,column:19},end:{line:120,column:3}},40:{start:{line:115,column:19},end:{line:115,column:46}},41:{start:{line:116,column:4},end:{line:116,column:47}},42:{start:{line:117,column:4},end:{line:119,column:7}},43:{start:{line:122,column:32},end:{line:122,column:75}},44:{start:{line:123,column:4},end:{line:136,column:5}},45:{start:{line:124,column:6},end:{line:127,column:8}},46:{start:{line:128,column:11},end:{line:136,column:5}},47:{start:{line:129,column:6},end:{line:131,column:8}},48:{start:{line:133,column:6},end:{line:135,column:8}},49:{start:{line:139,column:26},end:{line:139,column:36}},50:{start:{line:140,column:36},end:{line:140,column:46}},51:{start:{line:141,column:22},end:{line:143,column:5}},52:{start:{line:144,column:26},end:{line:144,column:33}},53:{start:{line:145,column:36},end:{line:145,column:112}},54:{start:{line:146,column:4},end:{line:271,column:5}},55:{start:{line:147,column:6},end:{line:160,column:11}},56:{start:{line:161,column:11},end:{line:271,column:5}},57:{start:{line:162,column:21},end:{line:162,column:48}},58:{start:{line:163,column:26},end:{line:163,column:35}},59:{start:{line:164,column:22},end:{line:164,column:37}},60:{start:{line:165,column:38},end:{line:173,column:10}},61:{start:{line:174,column:27},end:{line:187,column:8}},62:{start:{line:175,column:22},end:{line:175,column:50}},63:{start:{line:176,column:8},end:{line:186,column:29}},64:{start:{line:188,column:6},end:{line:240,column:11}},65:{start:{line:199,column:33},end:{line:199,column:63}},66:{start:{line:242,column:25},end:{line:242,column:35}},67:{start:{line:243,column:6},end:{line:270,column:11}},68:{start:{line:248,column:14},end:{line:248,column:59}},69:{start:{line:249,column:14},end:{line:249,column:49}},70:{start:{line:274,column:21},end:{line:274,column:60}}},fnMap:{0:{name:"combiningFilter",decl:{start:{line:16,column:9},end:{line:16,column:24}},loc:{start:{line:16,column:32},end:{line:28,column:1}},line:16},1:{name:"migrateFilter",decl:{start:{line:29,column:9},end:{line:29,column:22}},loc:{start:{line:29,column:31},end:{line:31,column:1}},line:29},2:{name:"createStyleFromFilter",decl:{start:{line:32,column:9},end:{line:32,column:30}},loc:{start:{line:32,column:39},end:{line:55,column:1}},line:32},3:{name:"checkIfSimpleFilter",decl:{start:{line:61,column:9},end:{line:61,column:28}},loc:{start:{line:61,column:37},end:{line:67,column:1}},line:61},4:{name:"hasCombiningFilter",decl:{start:{line:68,column:9},end:{line:68,column:27}},loc:{start:{line:68,column:36},end:{line:70,column:1}},line:68},5:{name:"hasNestedCombiningFilter",decl:{start:{line:71,column:9},end:{line:71,column:33}},loc:{start:{line:71,column:42},end:{line:76,column:1}},line:71},6:{name:"(anonymous_6)",decl:{start:{line:73,column:31},end:{line:73,column:32}},loc:{start:{line:73,column:38},end:{line:73,column:59}},line:73},7:{name:"(anonymous_7)",decl:{start:{line:73,column:68},end:{line:73,column:69}},loc:{start:{line:73,column:75},end:{line:73,column:84}},line:73},8:{name:"(anonymous_8)",decl:{start:{line:81,column:2},end:{line:81,column:3}},loc:{start:{line:81,column:21},end:{line:87,column:3}},line:81},9:{name:"(anonymous_9)",decl:{start:{line:89,column:2},end:{line:89,column:3}},loc:{start:{line:89,column:42},end:{line:93,column:3}},line:89},10:{name:"(anonymous_10)",decl:{start:{line:94,column:2},end:{line:94,column:3}},loc:{start:{line:94,column:30},end:{line:98,column:3}},line:94},11:{name:"(anonymous_11)",decl:{start:{line:99,column:18},end:{line:99,column:19}},loc:{start:{line:99,column:24},end:{line:103,column:3}},line:99},12:{name:"(anonymous_12)",decl:{start:{line:104,column:16},end:{line:104,column:17}},loc:{start:{line:104,column:25},end:{line:108,column:3}},line:104},13:{name:"(anonymous_13)",decl:{start:{line:109,column:15},end:{line:109,column:16}},loc:{start:{line:109,column:21},end:{line:113,column:3}},line:109},14:{name:"(anonymous_14)",decl:{start:{line:114,column:19},end:{line:114,column:20}},loc:{start:{line:114,column:25},end:{line:120,column:3}},line:114},15:{name:"(anonymous_15)",decl:{start:{line:121,column:2},end:{line:121,column:3}},loc:{start:{line:121,column:48},end:{line:137,column:3}},line:121},16:{name:"(anonymous_16)",decl:{start:{line:138,column:2},end:{line:138,column:3}},loc:{start:{line:138,column:11},end:{line:272,column:3}},line:138},17:{name:"(anonymous_17)",decl:{start:{line:174,column:39},end:{line:174,column:40}},loc:{start:{line:174,column:51},end:{line:187,column:7}},line:174},18:{name:"(anonymous_18)",decl:{start:{line:199,column:26},end:{line:199,column:27}},loc:{start:{line:199,column:33},end:{line:199,column:63}},line:199},19:{name:"(anonymous_19)",decl:{start:{line:247,column:22},end:{line:247,column:23}},loc:{start:{line:247,column:28},end:{line:250,column:13}},line:247}},branchMap:{0:{loc:{start:{line:17,column:17},end:{line:17,column:40}},type:"binary-expr",locations:[{start:{line:17,column:17},end:{line:17,column:29}},{start:{line:17,column:33},end:{line:17,column:40}}],line:17},1:{loc:{start:{line:18,column:2},end:{line:20,column:3}},type:"if",locations:[{start:{line:18,column:2},end:{line:20,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:18},2:{loc:{start:{line:23,column:2},end:{line:26,column:3}},type:"if",locations:[{start:{line:23,column:2},end:{line:26,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:23},3:{loc:{start:{line:62,column:2},end:{line:64,column:3}},type:"if",locations:[{start:{line:62,column:2},end:{line:64,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:62},4:{loc:{start:{line:62,column:6},end:{line:62,column:59}},type:"binary-expr",locations:[{start:{line:62,column:6},end:{line:62,column:25}},{start:{line:62,column:29},end:{line:62,column:59}}],line:62},5:{loc:{start:{line:72,column:2},end:{line:74,column:3}},type:"if",locations:[{start:{line:72,column:2},end:{line:74,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:72},6:{loc:{start:{line:123,column:4},end:{line:136,column:5}},type:"if",locations:[{start:{line:123,column:4},end:{line:136,column:5}},{start:{line:128,column:11},end:{line:136,column:5}}],line:123},7:{loc:{start:{line:123,column:8},end:{line:123,column:66}},type:"binary-expr",locations:[{start:{line:123,column:8},end:{line:123,column:28}},{start:{line:123,column:32},end:{line:123,column:66}}],line:123},8:{loc:{start:{line:128,column:11},end:{line:136,column:5}},type:"if",locations:[{start:{line:128,column:11},end:{line:136,column:5}},{start:{line:132,column:11},end:{line:136,column:5}}],line:128},9:{loc:{start:{line:128,column:15},end:{line:128,column:73}},type:"binary-expr",locations:[{start:{line:128,column:15},end:{line:128,column:34}},{start:{line:128,column:38},end:{line:128,column:73}}],line:128},10:{loc:{start:{line:145,column:36},end:{line:145,column:112}},type:"binary-expr",locations:[{start:{line:145,column:36},end:{line:145,column:55}},{start:{line:145,column:59},end:{line:145,column:112}}],line:145},11:{loc:{start:{line:146,column:4},end:{line:271,column:5}},type:"if",locations:[{start:{line:146,column:4},end:{line:271,column:5}},{start:{line:161,column:11},end:{line:271,column:5}}],line:146},12:{loc:{start:{line:161,column:11},end:{line:271,column:5}},type:"if",locations:[{start:{line:161,column:11},end:{line:271,column:5}},{start:{line:241,column:11},end:{line:271,column:5}}],line:161},13:{loc:{start:{line:185,column:10},end:{line:185,column:119}},type:"binary-expr",locations:[{start:{line:185,column:10},end:{line:185,column:15}},{start:{line:185,column:35},end:{line:185,column:119}}],line:185},14:{loc:{start:{line:235,column:30},end:{line:235,column:62}},type:"cond-expr",locations:[{start:{line:235,column:51},end:{line:235,column:53}},{start:{line:235,column:56},end:{line:235,column:62}}],line:235},15:{loc:{start:{line:258,column:8},end:{line:269,column:12}},type:"binary-expr",locations:[{start:{line:258,column:8},end:{line:258,column:38}},{start:{line:258,column:58},end:{line:269,column:12}}],line:258}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FilterEditor.tsx"],names:[],mappings:"AAgMQ,SAsDA,UAtDA,KAGA,YAHA;AAhMR,OAAO,WAAW;AAClB,SAAQ,4BAA2B;AACnC,SAAQ,eAAc;AAEtB,SAAQ,QAAQ,SAAS,qBAAoB;AAC7C,SAAQ,0BAAyB;AAEjC,SAAQ,0BAAyB;AACjC,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,OAAO,wBAAwB;AAC/B,OAAO,uBAAuB;AAC9B,OAAO,iBAAiB;AACxB,OAAO,SAAS;AAChB,OAAO,wBAAwB;AAC/B,SAA0B,uBAAuB;AAGjD,SAAS,gBAAgB,OAAuF;AAC9G,QAAM,SAAS,MAAM,UAAU,CAAC,KAAK;AAErC,MAAI,CAAC,MAAM,QAAQ,MAAM,GAAG;AAC1B,WAAO;AAAA,EACT;AAEA,MAAI,cAAc,OAAO,CAAC;AAC1B,MAAI,UAAU,OAAO,MAAM,CAAC;AAE5B,MAAG,mBAAmB,QAAQ,WAAW,IAAI,GAAG;AAC9C,kBAAc;AACd,cAAU,CAAC,OAAO,MAAM,CAAC,CAAC;AAAA,EAC5B;AAEA,SAAO,CAAC,aAAa,GAAG,OAAO;AACjC;AAEA,SAAS,cAAc,QAA6D;AAElF,SAAQ,QAAQ,sBAAsB,MAAM,CAAQ,EAAE,OAAO,CAAC,EAAU;AAC1E;AAEA,SAAS,sBAAsB,QAAgG;AAC7H,SAAO;AAAA,IACL,MAAM;AAAA,IACN,WAAW;AAAA,IACX,QAAQ;AAAA,IACR,YAAY,EAAC,qBAAqB,SAAQ;AAAA,IAC1C,WAAW;AAAA,MACT,OAAO;AAAA,QACL,QAAQ;AAAA,QACR,QAAQ;AAAA,MACV;AAAA,IACF;AAAA,IACA,UAAU;AAAA,IACV,UAAU;AAAA,IACV,UAAU;AAAA,MACR;AAAA,QACE,IAAI;AAAA,QACJ,MAAM;AAAA,QACN,QAAQ;AAAA,QACR;AAAA,MACF;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,aAAa;AAAA,EACjB;AAAA,EACA;AAAA,EACA;AACF;AAGA,SAAS,oBAAqB,QAA6D;AACzF,MAAI,OAAO,WAAW,KAAK,WAAW,SAAS,OAAO,CAAC,CAAC,GAAG;AACzD,WAAO;AAAA,EACT;AACA,QAAM,aAAa,cAAc,MAAM;AACvC,SAAO,CAAC,QAAQ,YAAY,MAAM;AACpC;AAEA,SAAS,mBAAmB,QAA6D;AACvF,SAAO,mBAAmB,QAAQ,OAAO,CAAC,CAAC,KAAK;AAClD;AAEA,SAAS,yBAAyB,QAA6D;AAC7F,MAAG,mBAAmB,MAAM,GAAG;AAC7B,WAAO,OAAO,MAAM,CAAC,EAAE,IAAI,OAAK,mBAAmB,CAAQ,CAAC,EAAE,OAAO,OAAK,KAAK,IAAI,EAAE,SAAS;AAAA,EAChG;AACA,SAAO;AACT;AAgBA,MAAM,6BAA6B,MAAM,UAAwD;AAAA,EAC/F,OAAO,eAAe;AAAA,IACpB,QAAQ,CAAC,KAAK;AAAA,EAChB;AAAA,EAEA,YAAa,OAAkC;AAC7C,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,SAAS;AAAA,MACT,qBAAqB,oBAAoB,gBAAgB,KAAK,CAAC;AAAA,IACjE;AAAA,EACF;AAAA;AAAA,EAGA,oBAAoB,WAAmB,SAAgB;AACrD,UAAM,YAAY,gBAAgB,KAAK,KAAK,EAAE,MAAM,CAAC;AACrD,cAAU,SAAS,IAAI;AACvB,SAAK,MAAM,SAAS,SAAS;AAAA,EAC/B;AAAA,EAEA,iBAAiB,WAAmB;AAClC,UAAM,YAAY,gBAAgB,KAAK,KAAK,EAAE,MAAM,CAAC;AACrD,cAAU,OAAO,YAAY,GAAG,CAAC;AACjC,SAAK,MAAM,SAAS,SAAS;AAAA,EAC/B;AAAA,EAEA,gBAAgB,MAAM;AACpB,UAAM,gBAAgB,gBAAgB,KAAK,KAAK,EAAE,MAAM,CAAC;AACzD,IAAC,cAAwB,KAAK,CAAC,MAAM,QAAQ,EAAE,CAAC;AAChD,SAAK,MAAM,SAAS,aAAa;AAAA,EACnC;AAAA,EAEA,cAAc,CAAC,QAAiB;AAC9B,SAAK,SAAS;AAAA,MACZ,SAAS;AAAA,IACX,CAAC;AAAA,EACH;AAAA,EAEA,aAAa,MAAM;AACjB,SAAK,SAAS;AAAA,MACZ,qBAAqB;AAAA,IACvB,CAAC;AAAA,EACH;AAAA,EAEA,iBAAiB,MAAM;AACrB,UAAM,SAAS,gBAAgB,KAAK,KAAK;AACzC,SAAK,MAAM,SAAS,cAAc,MAAM,CAAC;AACzC,SAAK,SAAS;AAAA,MACZ,qBAAqB;AAAA,IACvB,CAAC;AAAA,EACH;AAAA,EAEA,OAAO,yBAAyB,OAA4C,OAA0B;AACpG,UAAM,sBAAsB,oBAAoB,gBAAgB,KAAK,CAAC;AAGtE,QAAI,CAAC,uBAAuB,MAAM,wBAAwB,MAAM;AAC9D,aAAO;AAAA,QACL,qBAAqB;AAAA,QACrB,qBAAqB;AAAA,MACvB;AAAA,IACF,WACS,uBAAuB,MAAM,wBAAwB,OAAO;AACnE,aAAO;AAAA,QACL,qBAAqB;AAAA,MACvB;AAAA,IACF,OACK;AACH,aAAO;AAAA,QACL,qBAAqB;AAAA,MACvB;AAAA,IACF;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,QAAQ,EAAC,IAAI,KAAK;AACzB,UAAM,EAAC,oBAAmB,IAAI,KAAK;AACnC,UAAM,YAAU;AAAA,MACd,KAAK,OAAO,MAAM,OAAO,MAAM;AAAA,IACjC;AACA,UAAM,gBAAgB,CAAC,KAAK;AAE5B,UAAM,0BAA0B,uBAAuB,yBAAyB,gBAAgB,KAAK,KAAK,CAAC;AAE3G,QAAI,yBAAyB;AAC3B,aAAO,qBAAC,SAAI,WAAU,sCACpB;AAAA,4BAAC,OACE,YAAE,mCAAmC,GACxC;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YACC,SAAS,KAAK;AAAA,YACd,OAAO,EAAE,uBAAuB;AAAA,YAEhC;AAAA,kCAAC,SAAI,OAAO,EAAC,aAAa,SAAS,OAAM,QAAQ,QAAO,QAAQ,eAAe,SAAQ,GAAG,SAAQ,aAChG,8BAAC,UAAK,MAAK,gBAAe,GAAG,oBAAoB,GACnD;AAAA,cACC,EAAE,uBAAuB;AAAA;AAAA;AAAA,QAC5B;AAAA,SACF;AAAA,IACF,WACS,qBAAqB;AAC5B,YAAM,SAAS,gBAAgB,KAAK,KAAK;AACzC,YAAM,cAAc,OAAO,CAAC;AAC5B,YAAM,UAAU,OAAO,MAAM,CAAC;AAE9B,YAAM,UACJ,oBAAC,SACC;AAAA,QAAC;AAAA;AAAA,UACC,SAAS,KAAK;AAAA,UACd,OAAO,EAAE,uBAAuB;AAAA,UAChC,WAAU;AAAA,UAEV,8BAAC,SAAI,OAAO,EAAC,OAAM,QAAQ,QAAO,QAAQ,eAAe,SAAQ,GAAG,SAAQ,aAC1E,8BAAC,UAAK,MAAK,gBAAe,GAAG,oBAAoB,GACnD;AAAA;AAAA,MACF,GACF;AAGF,YAAM,eAAe,QAAQ,IAAI,CAAC,GAAG,QAAQ;AAC3C,cAAM,QAAQ,OAAQ,UAAU,MAAI,CAAC,GAAG;AAExC,eACE,qBAAC,SACC;AAAA,8BAAC,qBAA4B,UAAU,KAAK,iBAAiB,KAAK,MAAM,GAAG,GACzE;AAAA,YAAC;AAAA;AAAA,cACC,YAAY,KAAK,MAAM;AAAA,cACvB,QAAQ;AAAA,cACR,UAAU,KAAK,oBAAoB,KAAK,MAAM,MAAM,CAAC;AAAA;AAAA,UACvD,KALsB,GAMxB;AAAA,UACC,SACC,oBAAC,SAAgB,WAAU,yBAAyB,gBAAM,WAAjD,OAAyD;AAAA,aAT5D,SAAS,GAAG,EAWtB;AAAA,MAEJ,CAAC;AAGD,aACE,iCACE;AAAA;AAAA,UAAC;AAAA;AAAA,YAEC;AAAA,YACA,OAAO,EAAE,QAAQ;AAAA,YACjB,QAAQ;AAAA,YAER;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO;AAAA,gBACP,UAAU,CAAC,MAAqB,KAAK,oBAAoB,GAAG,CAAC;AAAA,gBAC7D,SAAS;AAAA,kBACP,CAAC,OAAO,EAAE,sBAAsB,CAAC;AAAA,kBACjC,CAAC,QAAQ,EAAE,mBAAmB,CAAC;AAAA,kBAC/B,CAAC,OAAO,EAAE,oBAAoB,CAAC;AAAA,gBACjC;AAAA;AAAA,YACF;AAAA;AAAA,UAbI;AAAA,QAcN;AAAA,QACC;AAAA,QACD;AAAA,UAAC;AAAA;AAAA,YAEC,WAAU;AAAA,YAEV;AAAA,cAAC;AAAA;AAAA,gBACC,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACV,SAAS,KAAK;AAAA,gBAEd;AAAA,sCAAC,SAAI,OAAO,EAAC,OAAM,QAAQ,QAAO,QAAQ,eAAe,cAAa,GAAG,SAAQ,aAC/E,8BAAC,UAAK,MAAK,gBAAe,GAAG,sBAAsB,GACrD;AAAA,kBAAM;AAAA,kBAAE,EAAE,YAAY;AAAA;AAAA;AAAA,YACxB;AAAA;AAAA,UAXI;AAAA,QAYN;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YAEC,WAAU;AAAA,YACV,OAAO,EAAC,SAAS,KAAK,MAAM,UAAU,KAAK,OAAM;AAAA,YAEjD,8BAAC,OAAI,WAAsB;AAAA;AAAA,UAJvB;AAAA,QAKN;AAAA,SACF;AAAA,IAEJ,OACK;AACH,YAAM,EAAC,OAAM,IAAI,KAAK;AAEtB,aACE,iCACE;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,UAAU,MAAM;AACd,mBAAK,SAAS,EAAC,qBAAqB,KAAI,CAAC;AACzC,mBAAK,MAAM,SAAS,aAAa;AAAA,YACnC;AAAA,YACA,WAAU;AAAA,YACV;AAAA,YACA,OAAO;AAAA,YACP;AAAA,YACA,UAAU,KAAK,MAAM;AAAA;AAAA,QACvB;AAAA,QACC,KAAK,MAAM,uBACV,qBAAC,SAAI,WAAU,yBACZ;AAAA,YAAE,qCAAqC;AAAA,UACvC;AAAA,UACD;AAAA,YAAC;AAAA;AAAA,cACC,SAAS,KAAK;AAAA,cACd,WAAU;AAAA,cAET,YAAE,0BAA0B;AAAA;AAAA,UAC/B;AAAA,WACF;AAAA,SAEJ;AAAA,IAEJ;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"10bf63b3f71adfa5066d0aecd6eaecbe45ada76f"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Un=function(){return a},a}Un();function _0(n){Un().f[0]++;const e=(Un().s[0]++,Un().b[0][0]++,n.filter||(Un().b[0][1]++,["all"]));if(Un().s[1]++,Array.isArray(e))Un().b[1][1]++;else return Un().b[1][0]++,Un().s[2]++,e;let t=(Un().s[3]++,e[0]),r=(Un().s[4]++,e.slice(1));return Un().s[5]++,GO.indexOf(t)<0?(Un().b[2][0]++,Un().s[6]++,t="all",Un().s[7]++,r=[e.slice(0)]):Un().b[2][1]++,Un().s[8]++,[t,...r]}function Que(n){return Un().f[1]++,Un().s[9]++,GH(que(n)).layers[0].filter}function que(n){return Un().f[2]++,Un().s[10]++,{id:"tmp",version:8,name:"Empty Style",metadata:{"maputnik:renderer":"mlgljs"},sources:{tmp:{type:"geojson",data:""}},sprite:"",glyphs:"https://orangemug.github.io/font-glyphs/glyphs/{fontstack}/{range}.pbf",layers:[{id:"tmp",type:"fill",source:"tmp",filter:n}]}}const Yue=(Un().s[11]++,["all","any","none"]);function LT(n){if(Un().f[3]++,Un().s[12]++,Un().b[4][0]++,n.length===1&&(Un().b[4][1]++,Yue.includes(n[0])))return Un().b[3][0]++,Un().s[13]++,!0;Un().b[3][1]++;const e=(Un().s[14]++,oC(n));return Un().s[15]++,!mx.isEqual(e,n)}function UT(n){return Un().f[4]++,Un().s[16]++,GO.indexOf(n[0])>=0}function $ue(n){return Un().f[5]++,Un().s[17]++,UT(n)?(Un().b[5][0]++,Un().s[18]++,n.slice(1).map(e=>(Un().f[6]++,Un().s[19]++,UT(e))).filter(e=>(Un().f[7]++,Un().s[20]++,e==!0)).length>0):(Un().b[5][1]++,Un().s[21]++,!1)}class wW extends nr.Component{constructor(t){Un().f[8]++,Un().s[23]++;super(t);Pn(this,"addFilterItem",(Un().s[31]++,()=>{Un().f[11]++;const t=(Un().s[32]++,_0(this.props).slice(0));Un().s[33]++,t.push(["==","name",""]),Un().s[34]++,this.props.onChange(t)}));Pn(this,"onToggleDoc",(Un().s[35]++,t=>{Un().f[12]++,Un().s[36]++,this.setState({showDoc:t})}));Pn(this,"makeFilter",(Un().s[37]++,()=>{Un().f[13]++,Un().s[38]++,this.setState({displaySimpleFilter:!0})}));Pn(this,"makeExpression",(Un().s[39]++,()=>{Un().f[14]++;const t=(Un().s[40]++,_0(this.props));Un().s[41]++,this.props.onChange(Que(t)),Un().s[42]++,this.setState({displaySimpleFilter:!1})}));Un().s[24]++,this.state={showDoc:!1,displaySimpleFilter:LT(_0(t))}}onFilterPartChanged(t,r){Un().f[9]++;const i=(Un().s[25]++,_0(this.props).slice(0));Un().s[26]++,i[t]=r,Un().s[27]++,this.props.onChange(i)}deleteFilterItem(t){Un().f[10]++;const r=(Un().s[28]++,_0(this.props).slice(0));Un().s[29]++,r.splice(t+1,1),Un().s[30]++,this.props.onChange(r)}static getDerivedStateFromProps(t,r){Un().f[15]++;const i=(Un().s[43]++,LT(_0(t)));return Un().s[44]++,Un().b[7][0]++,!i&&(Un().b[7][1]++,r.displaySimpleFilter===!0)?(Un().b[6][0]++,Un().s[45]++,{displaySimpleFilter:!1,valueIsSimpleFilter:!1}):(Un().b[6][1]++,Un().s[46]++,Un().b[9][0]++,i&&(Un().b[9][1]++,r.displaySimpleFilter===!1)?(Un().b[8][0]++,Un().s[47]++,{valueIsSimpleFilter:!0}):(Un().b[8][1]++,Un().s[48]++,{valueIsSimpleFilter:!1}))}render(){Un().f[16]++;const{errors:t,t:r}=(Un().s[49]++,this.props),{displaySimpleFilter:i}=(Un().s[50]++,this.state),s=(Un().s[51]++,{doc:Ts.layer.filter.doc+" Combine multiple filters together by using a compound filter."}),a=(Un().s[52]++,["all"]),o=(Un().s[53]++,Un().b[10][0]++,i&&(Un().b[10][1]++,$ue(_0(this.props))));if(Un().s[54]++,o)return Un().b[11][0]++,Un().s[55]++,ue.jsxs("div",{className:"maputnik-filter-editor-unsupported",children:[ue.jsx("p",{children:r("Nested filters are not supported.")}),ue.jsxs(Ja,{onClick:this.makeExpression,title:r("Convert to expression"),children:[ue.jsx("svg",{style:{marginRight:"0.2em",width:"14px",height:"14px",verticalAlign:"middle"},viewBox:"0 0 24 24",children:ue.jsx("path",{fill:"currentColor",d:GC})}),r("Upgrade to expression")]})]});if(Un().b[11][1]++,Un().s[56]++,i){Un().b[12][0]++;const d=(Un().s[57]++,_0(this.props)),g=(Un().s[58]++,d[0]),b=(Un().s[59]++,d.slice(1)),E=(Un().s[60]++,ue.jsx("div",{children:ue.jsx(Ja,{onClick:this.makeExpression,title:r("Convert to expression"),className:"maputnik-make-zoom-function",children:ue.jsx("svg",{style:{width:"14px",height:"14px",verticalAlign:"middle"},viewBox:"0 0 24 24",children:ue.jsx("path",{fill:"currentColor",d:GC})})})})),S=(Un().s[61]++,b.map((I,P)=>{Un().f[17]++;const z=(Un().s[62]++,t[`filter[${P+1}]`]);return Un().s[63]++,ue.jsxs("div",{children:[ue.jsx(Nue,{onDelete:this.deleteFilterItem.bind(this,P),children:ue.jsx(_W,{properties:this.props.properties,filter:I,onChange:this.onFilterPartChanged.bind(this,P+1)})},P),(Un().b[13][0]++,z&&(Un().b[13][1]++,ue.jsx("div",{className:"maputnik-inline-error",children:z.message},"error")))]},`block-${P}`)}));return Un().s[64]++,ue.jsxs(ue.Fragment,{children:[ue.jsx(fa,{fieldSpec:s,label:r("Filter"),action:E,children:ue.jsx(Xg,{value:g,onChange:I=>(Un().f[18]++,Un().s[65]++,this.onFilterPartChanged(0,I)),options:[["all",r("every filter matches")],["none",r("no filter matches")],["any",r("any filter matches")]]})},"top"),S,ue.jsx("div",{className:"maputnik-filter-editor-add-wrapper",children:ue.jsxs(Ja,{"data-wd-key":"layer-filter-button",className:"maputnik-add-filter",onClick:this.addFilterItem,children:[ue.jsx("svg",{style:{width:"14px",height:"14px",verticalAlign:"text-bottom"},viewBox:"0 0 24 24",children:ue.jsx("path",{fill:"currentColor",d:WO})})," ",r("Add filter")]})},"buttons"),ue.jsx("div",{className:"maputnik-doc-inline",style:{display:this.state.showDoc?(Un().b[14][0]++,""):(Un().b[14][1]++,"none")},children:ue.jsx(UO,{fieldSpec:s})},"doc")]})}else{Un().b[12][1]++;const{filter:d}=(Un().s[66]++,this.props);return Un().s[67]++,ue.jsxs(ue.Fragment,{children:[ue.jsx(xW,{onDelete:()=>{Un().f[19]++,Un().s[68]++,this.setState({displaySimpleFilter:!0}),Un().s[69]++,this.props.onChange(a)},fieldName:"filter",fieldSpec:s,value:d,errors:t,onChange:this.props.onChange}),(Un().b[15][0]++,this.state.valueIsSimpleFilter&&(Un().b[15][1]++,ue.jsxs("div",{className:"maputnik-expr-infobox",children:[r("You've entered an old style filter.")," ",ue.jsx("button",{onClick:this.makeFilter,className:"maputnik-expr-infobox__button",children:r("Switch to filter editor.")})]})))]})}}}Pn(wW,"defaultProps",(Un().s[22]++,{filter:["all"]}));const Vue=(Un().s[70]++,Ns()(wW));var I1={},lh={},k1={},ew,zT;function MW(){if(zT)return ew;zT=1;var n=typeof window=="object"&&window&&window.Object===Object&&window;return ew=n,ew}var tw,jT;function Sp(){if(jT)return tw;jT=1;var n=MW(),e=typeof self=="object"&&self&&self.Object===Object&&self,t=n||e||Function("return this")();return tw=t,tw}var nw,NT;function v_(){if(NT)return nw;NT=1;var n=Sp(),e=n.Symbol;return nw=e,nw}var rw,WT;function Hue(){if(WT)return rw;WT=1;var n=v_(),e=Object.prototype,t=e.hasOwnProperty,r=e.toString,i=n?n.toStringTag:void 0;function s(a){var o=t.call(a,i),d=a[i];try{a[i]=void 0;var g=!0}catch{}var b=r.call(a);return g&&(o?a[i]=d:delete a[i]),b}return rw=s,rw}var iw,GT;function Zue(){if(GT)return iw;GT=1;var n=Object.prototype,e=n.toString;function t(r){return e.call(r)}return iw=t,iw}var ow,QT;function Jg(){if(QT)return ow;QT=1;var n=v_(),e=Hue(),t=Zue(),r="[object Null]",i="[object Undefined]",s=n?n.toStringTag:void 0;function a(o){return o==null?o===void 0?i:r:s&&s in Object(o)?e(o):t(o)}return ow=a,ow}var sw,qT;function rf(){if(qT)return sw;qT=1;var n=Array.isArray;return sw=n,sw}var aw,YT;function dm(){if(YT)return aw;YT=1;function n(e){return e!=null&&typeof e=="object"}return aw=n,aw}var lw,$T;function Xue(){if($T)return lw;$T=1;var n=Jg(),e=rf(),t=dm(),r="[object String]";function i(s){return typeof s=="string"||!e(s)&&t(s)&&n(s)==r}return lw=i,lw}var uw,VT;function Jue(){if(VT)return uw;VT=1;function n(e){return function(t,r,i){for(var s=-1,a=Object(t),o=i(t),d=o.length;d--;){var g=o[e?d:++s];if(r(a[g],g,a)===!1)break}return t}}return uw=n,uw}var Aw,HT;function SW(){if(HT)return Aw;HT=1;var n=Jue(),e=n();return Aw=e,Aw}var cw,ZT;function eAe(){if(ZT)return cw;ZT=1;function n(e,t){for(var r=-1,i=Array(e);++r<e;)i[r]=t(r);return i}return cw=n,cw}var dw,XT;function tAe(){if(XT)return dw;XT=1;var n=Jg(),e=dm(),t="[object Arguments]";function r(i){return e(i)&&n(i)==t}return dw=r,dw}var hw,JT;function qO(){if(JT)return hw;JT=1;var n=tAe(),e=dm(),t=Object.prototype,r=t.hasOwnProperty,i=t.propertyIsEnumerable,s=n(function(){return arguments}())?n:function(a){return e(a)&&r.call(a,"callee")&&!i.call(a,"callee")};return hw=s,hw}var Hv={exports:{}},fw,eP;function nAe(){if(eP)return fw;eP=1;function n(){return!1}return fw=n,fw}Hv.exports;var tP;function v3(){return tP||(tP=1,function(n,e){var t=Sp(),r=nAe(),i=e&&!e.nodeType&&e,s=i&&!0&&n&&!n.nodeType&&n,a=s&&s.exports===i,o=a?t.Buffer:void 0,d=o?o.isBuffer:void 0,g=d||r;n.exports=g}(Hv,Hv.exports)),Hv.exports}var pw,nP;function YO(){if(nP)return pw;nP=1;var n=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function t(r,i){var s=typeof r;return i=i??n,!!i&&(s=="number"||s!="symbol"&&e.test(r))&&r>-1&&r%1==0&&r<i}return pw=t,pw}var mw,rP;function $O(){if(rP)return mw;rP=1;var n=9007199254740991;function e(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=n}return mw=e,mw}var gw,iP;function rAe(){if(iP)return gw;iP=1;var n=Jg(),e=$O(),t=dm(),r="[object Arguments]",i="[object Array]",s="[object Boolean]",a="[object Date]",o="[object Error]",d="[object Function]",g="[object Map]",b="[object Number]",E="[object Object]",S="[object RegExp]",I="[object Set]",P="[object String]",z="[object WeakMap]",j="[object ArrayBuffer]",q="[object DataView]",Y="[object Float32Array]",ie="[object Float64Array]",te="[object Int8Array]",V="[object Int16Array]",ne="[object Int32Array]",G="[object Uint8Array]",oe="[object Uint8ClampedArray]",he="[object Uint16Array]",pe="[object Uint32Array]",Ee={};Ee[Y]=Ee[ie]=Ee[te]=Ee[V]=Ee[ne]=Ee[G]=Ee[oe]=Ee[he]=Ee[pe]=!0,Ee[r]=Ee[i]=Ee[j]=Ee[s]=Ee[q]=Ee[a]=Ee[o]=Ee[d]=Ee[g]=Ee[b]=Ee[E]=Ee[S]=Ee[I]=Ee[P]=Ee[z]=!1;function me(Se){return t(Se)&&e(Se.length)&&!!Ee[n(Se)]}return gw=me,gw}var yw,oP;function VO(){if(oP)return yw;oP=1;function n(e){return function(t){return e(t)}}return yw=n,yw}var Zv={exports:{}};Zv.exports;var sP;function HO(){return sP||(sP=1,function(n,e){var t=MW(),r=e&&!e.nodeType&&e,i=r&&!0&&n&&!n.nodeType&&n,s=i&&i.exports===r,a=s&&t.process,o=function(){try{var d=i&&i.require&&i.require("util").types;return d||a&&a.binding&&a.binding("util")}catch{}}();n.exports=o}(Zv,Zv.exports)),Zv.exports}var vw,aP;function ZO(){if(aP)return vw;aP=1;var n=rAe(),e=VO(),t=HO(),r=t&&t.isTypedArray,i=r?e(r):n;return vw=i,vw}var Cw,lP;function EW(){if(lP)return Cw;lP=1;var n=eAe(),e=qO(),t=rf(),r=v3(),i=YO(),s=ZO(),a=Object.prototype,o=a.hasOwnProperty;function d(g,b){var E=t(g),S=!E&&e(g),I=!E&&!S&&r(g),P=!E&&!S&&!I&&s(g),z=E||S||I||P,j=z?n(g.length,String):[],q=j.length;for(var Y in g)(b||o.call(g,Y))&&!(z&&(Y=="length"||I&&(Y=="offset"||Y=="parent")||P&&(Y=="buffer"||Y=="byteLength"||Y=="byteOffset")||i(Y,q)))&&j.push(Y);return j}return Cw=d,Cw}var _w,uP;function XO(){if(uP)return _w;uP=1;var n=Object.prototype;function e(t){var r=t&&t.constructor,i=typeof r=="function"&&r.prototype||n;return t===i}return _w=e,_w}var bw,AP;function BW(){if(AP)return bw;AP=1;function n(e,t){return function(r){return e(t(r))}}return bw=n,bw}var xw,cP;function iAe(){if(cP)return xw;cP=1;var n=BW(),e=n(Object.keys,Object);return xw=e,xw}var ww,dP;function oAe(){if(dP)return ww;dP=1;var n=XO(),e=iAe(),t=Object.prototype,r=t.hasOwnProperty;function i(s){if(!n(s))return e(s);var a=[];for(var o in Object(s))r.call(s,o)&&o!="constructor"&&a.push(o);return a}return ww=i,ww}var Mw,hP;function Yf(){if(hP)return Mw;hP=1;function n(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}return Mw=n,Mw}var Sw,fP;function JO(){if(fP)return Sw;fP=1;var n=Jg(),e=Yf(),t="[object AsyncFunction]",r="[object Function]",i="[object GeneratorFunction]",s="[object Proxy]";function a(o){if(!e(o))return!1;var d=n(o);return d==r||d==i||d==t||d==s}return Sw=a,Sw}var Ew,pP;function iv(){if(pP)return Ew;pP=1;var n=JO(),e=$O();function t(r){return r!=null&&e(r.length)&&!n(r)}return Ew=t,Ew}var Bw,mP;function C_(){if(mP)return Bw;mP=1;var n=EW(),e=oAe(),t=iv();function r(i){return t(i)?n(i):e(i)}return Bw=r,Bw}var Ow,gP;function OW(){if(gP)return Ow;gP=1;var n=SW(),e=C_();function t(r,i){return r&&n(r,i,e)}return Ow=t,Ow}var Iw,yP;function C3(){if(yP)return Iw;yP=1;function n(e){return e}return Iw=n,Iw}var kw,vP;function IW(){if(vP)return kw;vP=1;var n=C3();function e(t){return typeof t=="function"?t:n}return kw=e,kw}var Tw,CP;function eI(){if(CP)return Tw;CP=1;var n=OW(),e=IW();function t(r,i){return r&&n(r,e(i))}return Tw=t,Tw}var Pw,_P;function tI(){if(_P)return Pw;_P=1;var n=BW(),e=n(Object.getPrototypeOf,Object);return Pw=e,Pw}var Kw,bP;function kW(){if(bP)return Kw;bP=1;var n=Jg(),e=tI(),t=dm(),r="[object Object]",i=Function.prototype,s=Object.prototype,a=i.toString,o=s.hasOwnProperty,d=a.call(Object);function g(b){if(!t(b)||n(b)!=r)return!1;var E=e(b);if(E===null)return!0;var S=o.call(E,"constructor")&&E.constructor;return typeof S=="function"&&S instanceof S&&a.call(S)==d}return Kw=g,Kw}var Dw,xP;function TW(){if(xP)return Dw;xP=1;function n(e,t){for(var r=-1,i=e==null?0:e.length,s=Array(i);++r<i;)s[r]=t(e[r],r,e);return s}return Dw=n,Dw}var Rw,wP;function sAe(){if(wP)return Rw;wP=1;function n(){this.__data__=[],this.size=0}return Rw=n,Rw}var Fw,MP;function __(){if(MP)return Fw;MP=1;function n(e,t){return e===t||e!==e&&t!==t}return Fw=n,Fw}var Lw,SP;function _3(){if(SP)return Lw;SP=1;var n=__();function e(t,r){for(var i=t.length;i--;)if(n(t[i][0],r))return i;return-1}return Lw=e,Lw}var Uw,EP;function aAe(){if(EP)return Uw;EP=1;var n=_3(),e=Array.prototype,t=e.splice;function r(i){var s=this.__data__,a=n(s,i);if(a<0)return!1;var o=s.length-1;return a==o?s.pop():t.call(s,a,1),--this.size,!0}return Uw=r,Uw}var zw,BP;function lAe(){if(BP)return zw;BP=1;var n=_3();function e(t){var r=this.__data__,i=n(r,t);return i<0?void 0:r[i][1]}return zw=e,zw}var jw,OP;function uAe(){if(OP)return jw;OP=1;var n=_3();function e(t){return n(this.__data__,t)>-1}return jw=e,jw}var Nw,IP;function AAe(){if(IP)return Nw;IP=1;var n=_3();function e(t,r){var i=this.__data__,s=n(i,t);return s<0?(++this.size,i.push([t,r])):i[s][1]=r,this}return Nw=e,Nw}var Ww,kP;function b3(){if(kP)return Ww;kP=1;var n=sAe(),e=aAe(),t=lAe(),r=uAe(),i=AAe();function s(a){var o=-1,d=a==null?0:a.length;for(this.clear();++o<d;){var g=a[o];this.set(g[0],g[1])}}return s.prototype.clear=n,s.prototype.delete=e,s.prototype.get=t,s.prototype.has=r,s.prototype.set=i,Ww=s,Ww}var Gw,TP;function cAe(){if(TP)return Gw;TP=1;var n=b3();function e(){this.__data__=new n,this.size=0}return Gw=e,Gw}var Qw,PP;function dAe(){if(PP)return Qw;PP=1;function n(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}return Qw=n,Qw}var qw,KP;function hAe(){if(KP)return qw;KP=1;function n(e){return this.__data__.get(e)}return qw=n,qw}var Yw,DP;function fAe(){if(DP)return Yw;DP=1;function n(e){return this.__data__.has(e)}return Yw=n,Yw}var $w,RP;function pAe(){if(RP)return $w;RP=1;var n=Sp(),e=n["__core-js_shared__"];return $w=e,$w}var Vw,FP;function mAe(){if(FP)return Vw;FP=1;var n=pAe(),e=function(){var r=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function t(r){return!!e&&e in r}return Vw=t,Vw}var Hw,LP;function PW(){if(LP)return Hw;LP=1;var n=Function.prototype,e=n.toString;function t(r){if(r!=null){try{return e.call(r)}catch{}try{return r+""}catch{}}return""}return Hw=t,Hw}var Zw,UP;function gAe(){if(UP)return Zw;UP=1;var n=JO(),e=mAe(),t=Yf(),r=PW(),i=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,a=Function.prototype,o=Object.prototype,d=a.toString,g=o.hasOwnProperty,b=RegExp("^"+d.call(g).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function E(S){if(!t(S)||e(S))return!1;var I=n(S)?b:s;return I.test(r(S))}return Zw=E,Zw}var Xw,zP;function yAe(){if(zP)return Xw;zP=1;function n(e,t){return e==null?void 0:e[t]}return Xw=n,Xw}var Jw,jP;function e1(){if(jP)return Jw;jP=1;var n=gAe(),e=yAe();function t(r,i){var s=e(r,i);return n(s)?s:void 0}return Jw=t,Jw}var eM,NP;function nI(){if(NP)return eM;NP=1;var n=e1(),e=Sp(),t=n(e,"Map");return eM=t,eM}var tM,WP;function x3(){if(WP)return tM;WP=1;var n=e1(),e=n(Object,"create");return tM=e,tM}var nM,GP;function vAe(){if(GP)return nM;GP=1;var n=x3();function e(){this.__data__=n?n(null):{},this.size=0}return nM=e,nM}var rM,QP;function CAe(){if(QP)return rM;QP=1;function n(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}return rM=n,rM}var iM,qP;function _Ae(){if(qP)return iM;qP=1;var n=x3(),e="__lodash_hash_undefined__",t=Object.prototype,r=t.hasOwnProperty;function i(s){var a=this.__data__;if(n){var o=a[s];return o===e?void 0:o}return r.call(a,s)?a[s]:void 0}return iM=i,iM}var oM,YP;function bAe(){if(YP)return oM;YP=1;var n=x3(),e=Object.prototype,t=e.hasOwnProperty;function r(i){var s=this.__data__;return n?s[i]!==void 0:t.call(s,i)}return oM=r,oM}var sM,$P;function xAe(){if($P)return sM;$P=1;var n=x3(),e="__lodash_hash_undefined__";function t(r,i){var s=this.__data__;return this.size+=this.has(r)?0:1,s[r]=n&&i===void 0?e:i,this}return sM=t,sM}var aM,VP;function wAe(){if(VP)return aM;VP=1;var n=vAe(),e=CAe(),t=_Ae(),r=bAe(),i=xAe();function s(a){var o=-1,d=a==null?0:a.length;for(this.clear();++o<d;){var g=a[o];this.set(g[0],g[1])}}return s.prototype.clear=n,s.prototype.delete=e,s.prototype.get=t,s.prototype.has=r,s.prototype.set=i,aM=s,aM}var lM,HP;function MAe(){if(HP)return lM;HP=1;var n=wAe(),e=b3(),t=nI();function r(){this.size=0,this.__data__={hash:new n,map:new(t||e),string:new n}}return lM=r,lM}var uM,ZP;function SAe(){if(ZP)return uM;ZP=1;function n(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}return uM=n,uM}var AM,XP;function w3(){if(XP)return AM;XP=1;var n=SAe();function e(t,r){var i=t.__data__;return n(r)?i[typeof r=="string"?"string":"hash"]:i.map}return AM=e,AM}var cM,JP;function EAe(){if(JP)return cM;JP=1;var n=w3();function e(t){var r=n(this,t).delete(t);return this.size-=r?1:0,r}return cM=e,cM}var dM,eK;function BAe(){if(eK)return dM;eK=1;var n=w3();function e(t){return n(this,t).get(t)}return dM=e,dM}var hM,tK;function OAe(){if(tK)return hM;tK=1;var n=w3();function e(t){return n(this,t).has(t)}return hM=e,hM}var fM,nK;function IAe(){if(nK)return fM;nK=1;var n=w3();function e(t,r){var i=n(this,t),s=i.size;return i.set(t,r),this.size+=i.size==s?0:1,this}return fM=e,fM}var pM,rK;function rI(){if(rK)return pM;rK=1;var n=MAe(),e=EAe(),t=BAe(),r=OAe(),i=IAe();function s(a){var o=-1,d=a==null?0:a.length;for(this.clear();++o<d;){var g=a[o];this.set(g[0],g[1])}}return s.prototype.clear=n,s.prototype.delete=e,s.prototype.get=t,s.prototype.has=r,s.prototype.set=i,pM=s,pM}var mM,iK;function kAe(){if(iK)return mM;iK=1;var n=b3(),e=nI(),t=rI(),r=200;function i(s,a){var o=this.__data__;if(o instanceof n){var d=o.__data__;if(!e||d.length<r-1)return d.push([s,a]),this.size=++o.size,this;o=this.__data__=new t(d)}return o.set(s,a),this.size=o.size,this}return mM=i,mM}var gM,oK;function M3(){if(oK)return gM;oK=1;var n=b3(),e=cAe(),t=dAe(),r=hAe(),i=fAe(),s=kAe();function a(o){var d=this.__data__=new n(o);this.size=d.size}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=r,a.prototype.has=i,a.prototype.set=s,gM=a,gM}var yM,sK;function TAe(){if(sK)return yM;sK=1;var n="__lodash_hash_undefined__";function e(t){return this.__data__.set(t,n),this}return yM=e,yM}var vM,aK;function PAe(){if(aK)return vM;aK=1;function n(e){return this.__data__.has(e)}return vM=n,vM}var CM,lK;function KAe(){if(lK)return CM;lK=1;var n=rI(),e=TAe(),t=PAe();function r(i){var s=-1,a=i==null?0:i.length;for(this.__data__=new n;++s<a;)this.add(i[s])}return r.prototype.add=r.prototype.push=e,r.prototype.has=t,CM=r,CM}var _M,uK;function DAe(){if(uK)return _M;uK=1;function n(e,t){for(var r=-1,i=e==null?0:e.length;++r<i;)if(t(e[r],r,e))return!0;return!1}return _M=n,_M}var bM,AK;function RAe(){if(AK)return bM;AK=1;function n(e,t){return e.has(t)}return bM=n,bM}var xM,cK;function KW(){if(cK)return xM;cK=1;var n=KAe(),e=DAe(),t=RAe(),r=1,i=2;function s(a,o,d,g,b,E){var S=d&r,I=a.length,P=o.length;if(I!=P&&!(S&&P>I))return!1;var z=E.get(a),j=E.get(o);if(z&&j)return z==o&&j==a;var q=-1,Y=!0,ie=d&i?new n:void 0;for(E.set(a,o),E.set(o,a);++q<I;){var te=a[q],V=o[q];if(g)var ne=S?g(V,te,q,o,a,E):g(te,V,q,a,o,E);if(ne!==void 0){if(ne)continue;Y=!1;break}if(ie){if(!e(o,function(G,oe){if(!t(ie,oe)&&(te===G||b(te,G,d,g,E)))return ie.push(oe)})){Y=!1;break}}else if(!(te===V||b(te,V,d,g,E))){Y=!1;break}}return E.delete(a),E.delete(o),Y}return xM=s,xM}var wM,dK;function DW(){if(dK)return wM;dK=1;var n=Sp(),e=n.Uint8Array;return wM=e,wM}var MM,hK;function FAe(){if(hK)return MM;hK=1;function n(e){var t=-1,r=Array(e.size);return e.forEach(function(i,s){r[++t]=[s,i]}),r}return MM=n,MM}var SM,fK;function LAe(){if(fK)return SM;fK=1;function n(e){var t=-1,r=Array(e.size);return e.forEach(function(i){r[++t]=i}),r}return SM=n,SM}var EM,pK;function UAe(){if(pK)return EM;pK=1;var n=v_(),e=DW(),t=__(),r=KW(),i=FAe(),s=LAe(),a=1,o=2,d="[object Boolean]",g="[object Date]",b="[object Error]",E="[object Map]",S="[object Number]",I="[object RegExp]",P="[object Set]",z="[object String]",j="[object Symbol]",q="[object ArrayBuffer]",Y="[object DataView]",ie=n?n.prototype:void 0,te=ie?ie.valueOf:void 0;function V(ne,G,oe,he,pe,Ee,me){switch(oe){case Y:if(ne.byteLength!=G.byteLength||ne.byteOffset!=G.byteOffset)return!1;ne=ne.buffer,G=G.buffer;case q:return!(ne.byteLength!=G.byteLength||!Ee(new e(ne),new e(G)));case d:case g:case S:return t(+ne,+G);case b:return ne.name==G.name&&ne.message==G.message;case I:case z:return ne==G+"";case E:var Se=i;case P:var De=he&a;if(Se||(Se=s),ne.size!=G.size&&!De)return!1;var be=me.get(ne);if(be)return be==G;he|=o,me.set(ne,G);var at=r(Se(ne),Se(G),he,pe,Ee,me);return me.delete(ne),at;case j:if(te)return te.call(ne)==te.call(G)}return!1}return EM=V,EM}var BM,mK;function RW(){if(mK)return BM;mK=1;function n(e,t){for(var r=-1,i=t.length,s=e.length;++r<i;)e[s+r]=t[r];return e}return BM=n,BM}var OM,gK;function FW(){if(gK)return OM;gK=1;var n=RW(),e=rf();function t(r,i,s){var a=i(r);return e(r)?a:n(a,s(r))}return OM=t,OM}var IM,yK;function zAe(){if(yK)return IM;yK=1;function n(e,t){for(var r=-1,i=e==null?0:e.length,s=0,a=[];++r<i;){var o=e[r];t(o,r,e)&&(a[s++]=o)}return a}return IM=n,IM}var kM,vK;function LW(){if(vK)return kM;vK=1;function n(){return[]}return kM=n,kM}var TM,CK;function iI(){if(CK)return TM;CK=1;var n=zAe(),e=LW(),t=Object.prototype,r=t.propertyIsEnumerable,i=Object.getOwnPropertySymbols,s=i?function(a){return a==null?[]:(a=Object(a),n(i(a),function(o){return r.call(a,o)}))}:e;return TM=s,TM}var PM,_K;function UW(){if(_K)return PM;_K=1;var n=FW(),e=iI(),t=C_();function r(i){return n(i,t,e)}return PM=r,PM}var KM,bK;function jAe(){if(bK)return KM;bK=1;var n=UW(),e=1,t=Object.prototype,r=t.hasOwnProperty;function i(s,a,o,d,g,b){var E=o&e,S=n(s),I=S.length,P=n(a),z=P.length;if(I!=z&&!E)return!1;for(var j=I;j--;){var q=S[j];if(!(E?q in a:r.call(a,q)))return!1}var Y=b.get(s),ie=b.get(a);if(Y&&ie)return Y==a&&ie==s;var te=!0;b.set(s,a),b.set(a,s);for(var V=E;++j<I;){q=S[j];var ne=s[q],G=a[q];if(d)var oe=E?d(G,ne,q,a,s,b):d(ne,G,q,s,a,b);if(!(oe===void 0?ne===G||g(ne,G,o,d,b):oe)){te=!1;break}V||(V=q=="constructor")}if(te&&!V){var he=s.constructor,pe=a.constructor;he!=pe&&"constructor"in s&&"constructor"in a&&!(typeof he=="function"&&he instanceof he&&typeof pe=="function"&&pe instanceof pe)&&(te=!1)}return b.delete(s),b.delete(a),te}return KM=i,KM}var DM,xK;function NAe(){if(xK)return DM;xK=1;var n=e1(),e=Sp(),t=n(e,"DataView");return DM=t,DM}var RM,wK;function WAe(){if(wK)return RM;wK=1;var n=e1(),e=Sp(),t=n(e,"Promise");return RM=t,RM}var FM,MK;function GAe(){if(MK)return FM;MK=1;var n=e1(),e=Sp(),t=n(e,"Set");return FM=t,FM}var LM,SK;function QAe(){if(SK)return LM;SK=1;var n=e1(),e=Sp(),t=n(e,"WeakMap");return LM=t,LM}var UM,EK;function S3(){if(EK)return UM;EK=1;var n=NAe(),e=nI(),t=WAe(),r=GAe(),i=QAe(),s=Jg(),a=PW(),o="[object Map]",d="[object Object]",g="[object Promise]",b="[object Set]",E="[object WeakMap]",S="[object DataView]",I=a(n),P=a(e),z=a(t),j=a(r),q=a(i),Y=s;return(n&&Y(new n(new ArrayBuffer(1)))!=S||e&&Y(new e)!=o||t&&Y(t.resolve())!=g||r&&Y(new r)!=b||i&&Y(new i)!=E)&&(Y=function(ie){var te=s(ie),V=te==d?ie.constructor:void 0,ne=V?a(V):"";if(ne)switch(ne){case I:return S;case P:return o;case z:return g;case j:return b;case q:return E}return te}),UM=Y,UM}var zM,BK;function qAe(){if(BK)return zM;BK=1;var n=M3(),e=KW(),t=UAe(),r=jAe(),i=S3(),s=rf(),a=v3(),o=ZO(),d=1,g="[object Arguments]",b="[object Array]",E="[object Object]",S=Object.prototype,I=S.hasOwnProperty;function P(z,j,q,Y,ie,te){var V=s(z),ne=s(j),G=V?b:i(z),oe=ne?b:i(j);G=G==g?E:G,oe=oe==g?E:oe;var he=G==E,pe=oe==E,Ee=G==oe;if(Ee&&a(z)){if(!a(j))return!1;V=!0,he=!1}if(Ee&&!he)return te||(te=new n),V||o(z)?e(z,j,q,Y,ie,te):t(z,j,G,q,Y,ie,te);if(!(q&d)){var me=he&&I.call(z,"__wrapped__"),Se=pe&&I.call(j,"__wrapped__");if(me||Se){var De=me?z.value():z,be=Se?j.value():j;return te||(te=new n),ie(De,be,q,Y,te)}}return Ee?(te||(te=new n),r(z,j,q,Y,ie,te)):!1}return zM=P,zM}var jM,OK;function zW(){if(OK)return jM;OK=1;var n=qAe(),e=dm();function t(r,i,s,a,o){return r===i?!0:r==null||i==null||!e(r)&&!e(i)?r!==r&&i!==i:n(r,i,s,a,t,o)}return jM=t,jM}var NM,IK;function YAe(){if(IK)return NM;IK=1;var n=M3(),e=zW(),t=1,r=2;function i(s,a,o,d){var g=o.length,b=g,E=!d;if(s==null)return!b;for(s=Object(s);g--;){var S=o[g];if(E&&S[2]?S[1]!==s[S[0]]:!(S[0]in s))return!1}for(;++g<b;){S=o[g];var I=S[0],P=s[I],z=S[1];if(E&&S[2]){if(P===void 0&&!(I in s))return!1}else{var j=new n;if(d)var q=d(P,z,I,s,a,j);if(!(q===void 0?e(z,P,t|r,d,j):q))return!1}}return!0}return NM=i,NM}var WM,kK;function jW(){if(kK)return WM;kK=1;var n=Yf();function e(t){return t===t&&!n(t)}return WM=e,WM}var GM,TK;function $Ae(){if(TK)return GM;TK=1;var n=jW(),e=C_();function t(r){for(var i=e(r),s=i.length;s--;){var a=i[s],o=r[a];i[s]=[a,o,n(o)]}return i}return GM=t,GM}var QM,PK;function NW(){if(PK)return QM;PK=1;function n(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}return QM=n,QM}var qM,KK;function VAe(){if(KK)return qM;KK=1;var n=YAe(),e=$Ae(),t=NW();function r(i){var s=e(i);return s.length==1&&s[0][2]?t(s[0][0],s[0][1]):function(a){return a===i||n(a,i,s)}}return qM=r,qM}var YM,DK;function E3(){if(DK)return YM;DK=1;var n=Jg(),e=dm(),t="[object Symbol]";function r(i){return typeof i=="symbol"||e(i)&&n(i)==t}return YM=r,YM}var $M,RK;function oI(){if(RK)return $M;RK=1;var n=rf(),e=E3(),t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(s,a){if(n(s))return!1;var o=typeof s;return o=="number"||o=="symbol"||o=="boolean"||s==null||e(s)?!0:r.test(s)||!t.test(s)||a!=null&&s in Object(a)}return $M=i,$M}var VM,FK;function HAe(){if(FK)return VM;FK=1;var n=rI(),e="Expected a function";function t(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new TypeError(e);var s=function(){var a=arguments,o=i?i.apply(this,a):a[0],d=s.cache;if(d.has(o))return d.get(o);var g=r.apply(this,a);return s.cache=d.set(o,g)||d,g};return s.cache=new(t.Cache||n),s}return t.Cache=n,VM=t,VM}var HM,LK;function ZAe(){if(LK)return HM;LK=1;var n=HAe(),e=500;function t(r){var i=n(r,function(a){return s.size===e&&s.clear(),a}),s=i.cache;return i}return HM=t,HM}var ZM,UK;function XAe(){if(UK)return ZM;UK=1;var n=ZAe(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,t=/\\(\\)?/g,r=n(function(i){var s=[];return i.charCodeAt(0)===46&&s.push(""),i.replace(e,function(a,o,d,g){s.push(d?g.replace(t,"$1"):o||a)}),s});return ZM=r,ZM}var XM,zK;function JAe(){if(zK)return XM;zK=1;var n=v_(),e=TW(),t=rf(),r=E3(),i=n?n.prototype:void 0,s=i?i.toString:void 0;function a(o){if(typeof o=="string")return o;if(t(o))return e(o,a)+"";if(r(o))return s?s.call(o):"";var d=o+"";return d=="0"&&1/o==-1/0?"-0":d}return XM=a,XM}var JM,jK;function ece(){if(jK)return JM;jK=1;var n=JAe();function e(t){return t==null?"":n(t)}return JM=e,JM}var eS,NK;function WW(){if(NK)return eS;NK=1;var n=rf(),e=oI(),t=XAe(),r=ece();function i(s,a){return n(s)?s:e(s,a)?[s]:t(r(s))}return eS=i,eS}var tS,WK;function B3(){if(WK)return tS;WK=1;var n=E3();function e(t){if(typeof t=="string"||n(t))return t;var r=t+"";return r=="0"&&1/t==-1/0?"-0":r}return tS=e,tS}var nS,GK;function GW(){if(GK)return nS;GK=1;var n=WW(),e=B3();function t(r,i){i=n(i,r);for(var s=0,a=i.length;r!=null&&s<a;)r=r[e(i[s++])];return s&&s==a?r:void 0}return nS=t,nS}var rS,QK;function tce(){if(QK)return rS;QK=1;var n=GW();function e(t,r,i){var s=t==null?void 0:n(t,r);return s===void 0?i:s}return rS=e,rS}var iS,qK;function nce(){if(qK)return iS;qK=1;function n(e,t){return e!=null&&t in Object(e)}return iS=n,iS}var oS,YK;function rce(){if(YK)return oS;YK=1;var n=WW(),e=qO(),t=rf(),r=YO(),i=$O(),s=B3();function a(o,d,g){d=n(d,o);for(var b=-1,E=d.length,S=!1;++b<E;){var I=s(d[b]);if(!(S=o!=null&&g(o,I)))break;o=o[I]}return S||++b!=E?S:(E=o==null?0:o.length,!!E&&i(E)&&r(I,E)&&(t(o)||e(o)))}return oS=a,oS}var sS,$K;function ice(){if($K)return sS;$K=1;var n=nce(),e=rce();function t(r,i){return r!=null&&e(r,i,n)}return sS=t,sS}var aS,VK;function oce(){if(VK)return aS;VK=1;var n=zW(),e=tce(),t=ice(),r=oI(),i=jW(),s=NW(),a=B3(),o=1,d=2;function g(b,E){return r(b)&&i(E)?s(a(b),E):function(S){var I=e(S,b);return I===void 0&&I===E?t(S,b):n(E,I,o|d)}}return aS=g,aS}var lS,HK;function sce(){if(HK)return lS;HK=1;function n(e){return function(t){return t==null?void 0:t[e]}}return lS=n,lS}var uS,ZK;function ace(){if(ZK)return uS;ZK=1;var n=GW();function e(t){return function(r){return n(r,t)}}return uS=e,uS}var AS,XK;function lce(){if(XK)return AS;XK=1;var n=sce(),e=ace(),t=oI(),r=B3();function i(s){return t(s)?n(r(s)):e(s)}return AS=i,AS}var cS,JK;function uce(){if(JK)return cS;JK=1;var n=VAe(),e=oce(),t=C3(),r=rf(),i=lce();function s(a){return typeof a=="function"?a:a==null?t:typeof a=="object"?r(a)?e(a[0],a[1]):n(a):i(a)}return cS=s,cS}var dS,eD;function Ace(){if(eD)return dS;eD=1;var n=iv();function e(t,r){return function(i,s){if(i==null)return i;if(!n(i))return t(i,s);for(var a=i.length,o=r?a:-1,d=Object(i);(r?o--:++o<a)&&s(d[o],o,d)!==!1;);return i}}return dS=e,dS}var hS,tD;function QW(){if(tD)return hS;tD=1;var n=OW(),e=Ace(),t=e(n);return hS=t,hS}var fS,nD;function cce(){if(nD)return fS;nD=1;var n=QW(),e=iv();function t(r,i){var s=-1,a=e(r)?Array(r.length):[];return n(r,function(o,d,g){a[++s]=i(o,d,g)}),a}return fS=t,fS}var pS,rD;function dce(){if(rD)return pS;rD=1;var n=TW(),e=uce(),t=cce(),r=rf();function i(s,a){var o=r(s)?n:t;return o(s,e(a,3))}return pS=i,pS}var iD;function hce(){if(iD)return k1;iD=1,Object.defineProperty(k1,"__esModule",{value:!0}),k1.flattenNames=void 0;var n=Xue(),e=d(n),t=eI(),r=d(t),i=kW(),s=d(i),a=dce(),o=d(a);function d(b){return b&&b.__esModule?b:{default:b}}var g=k1.flattenNames=function b(){var E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],S=[];return(0,o.default)(E,function(I){Array.isArray(I)?b(I).map(function(P){return S.push(P)}):(0,s.default)(I)?(0,r.default)(I,function(P,z){P===!0&&S.push(z),S.push(z+"-"+P)}):(0,e.default)(I)&&S.push(I)}),S};return k1.default=g,k1}var T1={},mS,oD;function qW(){if(oD)return mS;oD=1;function n(e,t){for(var r=-1,i=e==null?0:e.length;++r<i&&t(e[r],r,e)!==!1;);return e}return mS=n,mS}var gS,sD;function YW(){if(sD)return gS;sD=1;var n=e1(),e=function(){try{var t=n(Object,"defineProperty");return t({},"",{}),t}catch{}}();return gS=e,gS}var yS,aD;function sI(){if(aD)return yS;aD=1;var n=YW();function e(t,r,i){r=="__proto__"&&n?n(t,r,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[r]=i}return yS=e,yS}var vS,lD;function $W(){if(lD)return vS;lD=1;var n=sI(),e=__(),t=Object.prototype,r=t.hasOwnProperty;function i(s,a,o){var d=s[a];(!(r.call(s,a)&&e(d,o))||o===void 0&&!(a in s))&&n(s,a,o)}return vS=i,vS}var CS,uD;function b_(){if(uD)return CS;uD=1;var n=$W(),e=sI();function t(r,i,s,a){var o=!s;s||(s={});for(var d=-1,g=i.length;++d<g;){var b=i[d],E=a?a(s[b],r[b],b,s,r):void 0;E===void 0&&(E=r[b]),o?e(s,b,E):n(s,b,E)}return s}return CS=t,CS}var _S,AD;function fce(){if(AD)return _S;AD=1;var n=b_(),e=C_();function t(r,i){return r&&n(i,e(i),r)}return _S=t,_S}var bS,cD;function pce(){if(cD)return bS;cD=1;function n(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}return bS=n,bS}var xS,dD;function mce(){if(dD)return xS;dD=1;var n=Yf(),e=XO(),t=pce(),r=Object.prototype,i=r.hasOwnProperty;function s(a){if(!n(a))return t(a);var o=e(a),d=[];for(var g in a)g=="constructor"&&(o||!i.call(a,g))||d.push(g);return d}return xS=s,xS}var wS,hD;function x_(){if(hD)return wS;hD=1;var n=EW(),e=mce(),t=iv();function r(i){return t(i)?n(i,!0):e(i)}return wS=r,wS}var MS,fD;function gce(){if(fD)return MS;fD=1;var n=b_(),e=x_();function t(r,i){return r&&n(i,e(i),r)}return MS=t,MS}var Xv={exports:{}};Xv.exports;var pD;function VW(){return pD||(pD=1,function(n,e){var t=Sp(),r=e&&!e.nodeType&&e,i=r&&!0&&n&&!n.nodeType&&n,s=i&&i.exports===r,a=s?t.Buffer:void 0,o=a?a.allocUnsafe:void 0;function d(g,b){if(b)return g.slice();var E=g.length,S=o?o(E):new g.constructor(E);return g.copy(S),S}n.exports=d}(Xv,Xv.exports)),Xv.exports}var SS,mD;function HW(){if(mD)return SS;mD=1;function n(e,t){var r=-1,i=e.length;for(t||(t=Array(i));++r<i;)t[r]=e[r];return t}return SS=n,SS}var ES,gD;function yce(){if(gD)return ES;gD=1;var n=b_(),e=iI();function t(r,i){return n(r,e(r),i)}return ES=t,ES}var BS,yD;function ZW(){if(yD)return BS;yD=1;var n=RW(),e=tI(),t=iI(),r=LW(),i=Object.getOwnPropertySymbols,s=i?function(a){for(var o=[];a;)n(o,t(a)),a=e(a);return o}:r;return BS=s,BS}var OS,vD;function vce(){if(vD)return OS;vD=1;var n=b_(),e=ZW();function t(r,i){return n(r,e(r),i)}return OS=t,OS}var IS,CD;function Cce(){if(CD)return IS;CD=1;var n=FW(),e=ZW(),t=x_();function r(i){return n(i,t,e)}return IS=r,IS}var kS,_D;function _ce(){if(_D)return kS;_D=1;var n=Object.prototype,e=n.hasOwnProperty;function t(r){var i=r.length,s=new r.constructor(i);return i&&typeof r[0]=="string"&&e.call(r,"index")&&(s.index=r.index,s.input=r.input),s}return kS=t,kS}var TS,bD;function aI(){if(bD)return TS;bD=1;var n=DW();function e(t){var r=new t.constructor(t.byteLength);return new n(r).set(new n(t)),r}return TS=e,TS}var PS,xD;function bce(){if(xD)return PS;xD=1;var n=aI();function e(t,r){var i=r?n(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.byteLength)}return PS=e,PS}var KS,wD;function xce(){if(wD)return KS;wD=1;var n=/\w*$/;function e(t){var r=new t.constructor(t.source,n.exec(t));return r.lastIndex=t.lastIndex,r}return KS=e,KS}var DS,MD;function wce(){if(MD)return DS;MD=1;var n=v_(),e=n?n.prototype:void 0,t=e?e.valueOf:void 0;function r(i){return t?Object(t.call(i)):{}}return DS=r,DS}var RS,SD;function XW(){if(SD)return RS;SD=1;var n=aI();function e(t,r){var i=r?n(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)}return RS=e,RS}var FS,ED;function Mce(){if(ED)return FS;ED=1;var n=aI(),e=bce(),t=xce(),r=wce(),i=XW(),s="[object Boolean]",a="[object Date]",o="[object Map]",d="[object Number]",g="[object RegExp]",b="[object Set]",E="[object String]",S="[object Symbol]",I="[object ArrayBuffer]",P="[object DataView]",z="[object Float32Array]",j="[object Float64Array]",q="[object Int8Array]",Y="[object Int16Array]",ie="[object Int32Array]",te="[object Uint8Array]",V="[object Uint8ClampedArray]",ne="[object Uint16Array]",G="[object Uint32Array]";function oe(he,pe,Ee){var me=he.constructor;switch(pe){case I:return n(he);case s:case a:return new me(+he);case P:return e(he,Ee);case z:case j:case q:case Y:case ie:case te:case V:case ne:case G:return i(he,Ee);case o:return new me;case d:case E:return new me(he);case g:return t(he);case b:return new me;case S:return r(he)}}return FS=oe,FS}var LS,BD;function Sce(){if(BD)return LS;BD=1;var n=Yf(),e=Object.create,t=function(){function r(){}return function(i){if(!n(i))return{};if(e)return e(i);r.prototype=i;var s=new r;return r.prototype=void 0,s}}();return LS=t,LS}var US,OD;function JW(){if(OD)return US;OD=1;var n=Sce(),e=tI(),t=XO();function r(i){return typeof i.constructor=="function"&&!t(i)?n(e(i)):{}}return US=r,US}var zS,ID;function Ece(){if(ID)return zS;ID=1;var n=S3(),e=dm(),t="[object Map]";function r(i){return e(i)&&n(i)==t}return zS=r,zS}var jS,kD;function Bce(){if(kD)return jS;kD=1;var n=Ece(),e=VO(),t=HO(),r=t&&t.isMap,i=r?e(r):n;return jS=i,jS}var NS,TD;function Oce(){if(TD)return NS;TD=1;var n=S3(),e=dm(),t="[object Set]";function r(i){return e(i)&&n(i)==t}return NS=r,NS}var WS,PD;function Ice(){if(PD)return WS;PD=1;var n=Oce(),e=VO(),t=HO(),r=t&&t.isSet,i=r?e(r):n;return WS=i,WS}var GS,KD;function kce(){if(KD)return GS;KD=1;var n=M3(),e=qW(),t=$W(),r=fce(),i=gce(),s=VW(),a=HW(),o=yce(),d=vce(),g=UW(),b=Cce(),E=S3(),S=_ce(),I=Mce(),P=JW(),z=rf(),j=v3(),q=Bce(),Y=Yf(),ie=Ice(),te=C_(),V=x_(),ne=1,G=2,oe=4,he="[object Arguments]",pe="[object Array]",Ee="[object Boolean]",me="[object Date]",Se="[object Error]",De="[object Function]",be="[object GeneratorFunction]",at="[object Map]",Ze="[object Number]",Je="[object Object]",We="[object RegExp]",Me="[object Set]",Fe="[object String]",He="[object Symbol]",bt="[object WeakMap]",Yt="[object ArrayBuffer]",gt="[object DataView]",Lt="[object Float32Array]",Kt="[object Float64Array]",Ue="[object Int8Array]",Pe="[object Int16Array]",Be="[object Int32Array]",it="[object Uint8Array]",_t="[object Uint8ClampedArray]",ft="[object Uint16Array]",Ut="[object Uint32Array]",rn={};rn[he]=rn[pe]=rn[Yt]=rn[gt]=rn[Ee]=rn[me]=rn[Lt]=rn[Kt]=rn[Ue]=rn[Pe]=rn[Be]=rn[at]=rn[Ze]=rn[Je]=rn[We]=rn[Me]=rn[Fe]=rn[He]=rn[it]=rn[_t]=rn[ft]=rn[Ut]=!0,rn[Se]=rn[De]=rn[bt]=!1;function Dt(_n,qn,tn,rr,Dn,pn){var Zn,dr=qn&ne,vr=qn&G,Jn=qn&oe;if(tn&&(Zn=Dn?tn(_n,rr,Dn,pn):tn(_n)),Zn!==void 0)return Zn;if(!Y(_n))return _n;var Qe=z(_n);if(Qe){if(Zn=S(_n),!dr)return a(_n,Zn)}else{var ce=E(_n),fe=ce==De||ce==be;if(j(_n))return s(_n,dr);if(ce==Je||ce==he||fe&&!Dn){if(Zn=vr||fe?{}:P(_n),!dr)return vr?d(_n,i(Zn,_n)):o(_n,r(Zn,_n))}else{if(!rn[ce])return Dn?_n:{};Zn=I(_n,ce,dr)}}pn||(pn=new n);var nt=pn.get(_n);if(nt)return nt;pn.set(_n,Zn),ie(_n)?_n.forEach(function(sn){Zn.add(Dt(sn,qn,tn,sn,_n,pn))}):q(_n)&&_n.forEach(function(sn,tr){Zn.set(tr,Dt(sn,qn,tn,tr,_n,pn))});var St=Jn?vr?b:g:vr?V:te,Ht=Qe?void 0:St(_n);return e(Ht||_n,function(sn,tr){Ht&&(tr=sn,sn=_n[tr]),t(Zn,tr,Dt(sn,qn,tn,tr,_n,pn))}),Zn}return GS=Dt,GS}var QS,DD;function Tce(){if(DD)return QS;DD=1;var n=kce(),e=1,t=4;function r(i){return n(i,e|t)}return QS=r,QS}var RD;function Pce(){if(RD)return T1;RD=1,Object.defineProperty(T1,"__esModule",{value:!0}),T1.mergeClasses=void 0;var n=eI(),e=s(n),t=Tce(),r=s(t),i=Object.assign||function(o){for(var d=1;d<arguments.length;d++){var g=arguments[d];for(var b in g)Object.prototype.hasOwnProperty.call(g,b)&&(o[b]=g[b])}return o};function s(o){return o&&o.__esModule?o:{default:o}}var a=T1.mergeClasses=function(d){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],b=d.default&&(0,r.default)(d.default)||{};return g.map(function(E){var S=d[E];return S&&(0,e.default)(S,function(I,P){b[P]||(b[P]={}),b[P]=i({},b[P],S[P])}),E}),b};return T1.default=a,T1}var P1={},FD;function Kce(){if(FD)return P1;FD=1,Object.defineProperty(P1,"__esModule",{value:!0}),P1.autoprefix=void 0;var n=eI(),e=r(n),t=Object.assign||function(a){for(var o=1;o<arguments.length;o++){var d=arguments[o];for(var g in d)Object.prototype.hasOwnProperty.call(d,g)&&(a[g]=d[g])}return a};function r(a){return a&&a.__esModule?a:{default:a}}var i={borderRadius:function(o){return{msBorderRadius:o,MozBorderRadius:o,OBorderRadius:o,WebkitBorderRadius:o,borderRadius:o}},boxShadow:function(o){return{msBoxShadow:o,MozBoxShadow:o,OBoxShadow:o,WebkitBoxShadow:o,boxShadow:o}},userSelect:function(o){return{WebkitTouchCallout:o,KhtmlUserSelect:o,MozUserSelect:o,msUserSelect:o,WebkitUserSelect:o,userSelect:o}},flex:function(o){return{WebkitBoxFlex:o,MozBoxFlex:o,WebkitFlex:o,msFlex:o,flex:o}},flexBasis:function(o){return{WebkitFlexBasis:o,flexBasis:o}},justifyContent:function(o){return{WebkitJustifyContent:o,justifyContent:o}},transition:function(o){return{msTransition:o,MozTransition:o,OTransition:o,WebkitTransition:o,transition:o}},transform:function(o){return{msTransform:o,MozTransform:o,OTransform:o,WebkitTransform:o,transform:o}},absolute:function(o){var d=o&&o.split(" ");return{position:"absolute",top:d&&d[0],right:d&&d[1],bottom:d&&d[2],left:d&&d[3]}},extend:function(o,d){var g=d[o];return g||{extend:o}}},s=P1.autoprefix=function(o){var d={};return(0,e.default)(o,function(g,b){var E={};(0,e.default)(g,function(S,I){var P=i[I];P?E=t({},E,P(S)):E[I]=S}),d[b]=E}),d};return P1.default=s,P1}var K1={},LD;function Dce(){if(LD)return K1;LD=1,Object.defineProperty(K1,"__esModule",{value:!0}),K1.hover=void 0;var n=Object.assign||function(d){for(var g=1;g<arguments.length;g++){var b=arguments[g];for(var E in b)Object.prototype.hasOwnProperty.call(b,E)&&(d[E]=b[E])}return d},e=za(),t=r(e);function r(d){return d&&d.__esModule?d:{default:d}}function i(d,g){if(!(d instanceof g))throw new TypeError("Cannot call a class as a function")}function s(d,g){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:d}function a(d,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);d.prototype=Object.create(g&&g.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(d,g):d.__proto__=g)}var o=K1.hover=function(g){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(E){a(S,E);function S(){var I,P,z,j;i(this,S);for(var q=arguments.length,Y=Array(q),ie=0;ie<q;ie++)Y[ie]=arguments[ie];return j=(P=(z=s(this,(I=S.__proto__||Object.getPrototypeOf(S)).call.apply(I,[this].concat(Y))),z),z.state={hover:!1},z.handleMouseOver=function(){return z.setState({hover:!0})},z.handleMouseOut=function(){return z.setState({hover:!1})},z.render=function(){return t.default.createElement(b,{onMouseOver:z.handleMouseOver,onMouseOut:z.handleMouseOut},t.default.createElement(g,n({},z.props,z.state)))},P),s(z,j)}return S}(t.default.Component)};return K1.default=o,K1}var D1={},UD;function Rce(){if(UD)return D1;UD=1,Object.defineProperty(D1,"__esModule",{value:!0}),D1.active=void 0;var n=Object.assign||function(d){for(var g=1;g<arguments.length;g++){var b=arguments[g];for(var E in b)Object.prototype.hasOwnProperty.call(b,E)&&(d[E]=b[E])}return d},e=za(),t=r(e);function r(d){return d&&d.__esModule?d:{default:d}}function i(d,g){if(!(d instanceof g))throw new TypeError("Cannot call a class as a function")}function s(d,g){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:d}function a(d,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);d.prototype=Object.create(g&&g.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(d,g):d.__proto__=g)}var o=D1.active=function(g){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(E){a(S,E);function S(){var I,P,z,j;i(this,S);for(var q=arguments.length,Y=Array(q),ie=0;ie<q;ie++)Y[ie]=arguments[ie];return j=(P=(z=s(this,(I=S.__proto__||Object.getPrototypeOf(S)).call.apply(I,[this].concat(Y))),z),z.state={active:!1},z.handleMouseDown=function(){return z.setState({active:!0})},z.handleMouseUp=function(){return z.setState({active:!1})},z.render=function(){return t.default.createElement(b,{onMouseDown:z.handleMouseDown,onMouseUp:z.handleMouseUp},t.default.createElement(g,n({},z.props,z.state)))},P),s(z,j)}return S}(t.default.Component)};return D1.default=o,D1}var kb={},zD;function Fce(){if(zD)return kb;zD=1,Object.defineProperty(kb,"__esModule",{value:!0});var n=function(t,r){var i={},s=function(o){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;i[o]=d};return t===0&&s("first-child"),t===r-1&&s("last-child"),(t===0||t%2===0)&&s("even"),Math.abs(t%2)===1&&s("odd"),s("nth-child",t),i};return kb.default=n,kb}var jD;function Ep(){if(jD)return lh;jD=1,Object.defineProperty(lh,"__esModule",{value:!0}),lh.ReactCSS=lh.loop=lh.handleActive=lh.handleHover=lh.hover=void 0;var n=hce(),e=S(n),t=Pce(),r=S(t),i=Kce(),s=S(i),a=Dce(),o=S(a),d=Rce(),g=S(d),b=Fce(),E=S(b);function S(P){return P&&P.__esModule?P:{default:P}}lh.hover=o.default,lh.handleHover=o.default,lh.handleActive=g.default,lh.loop=E.default;var I=lh.ReactCSS=function(z){for(var j=arguments.length,q=Array(j>1?j-1:0),Y=1;Y<j;Y++)q[Y-1]=arguments[Y];var ie=(0,e.default)(q),te=(0,r.default)(z,ie);return(0,s.default)(te)};return lh.default=I,lh}var qS,ND;function eG(){if(ND)return qS;ND=1;var n=sI(),e=__();function t(r,i,s){(s!==void 0&&!e(r[i],s)||s===void 0&&!(i in r))&&n(r,i,s)}return qS=t,qS}var YS,WD;function Lce(){if(WD)return YS;WD=1;var n=iv(),e=dm();function t(r){return e(r)&&n(r)}return YS=t,YS}var $S,GD;function tG(){if(GD)return $S;GD=1;function n(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}return $S=n,$S}var VS,QD;function Uce(){if(QD)return VS;QD=1;var n=b_(),e=x_();function t(r){return n(r,e(r))}return VS=t,VS}var HS,qD;function zce(){if(qD)return HS;qD=1;var n=eG(),e=VW(),t=XW(),r=HW(),i=JW(),s=qO(),a=rf(),o=Lce(),d=v3(),g=JO(),b=Yf(),E=kW(),S=ZO(),I=tG(),P=Uce();function z(j,q,Y,ie,te,V,ne){var G=I(j,Y),oe=I(q,Y),he=ne.get(oe);if(he){n(j,Y,he);return}var pe=V?V(G,oe,Y+"",j,q,ne):void 0,Ee=pe===void 0;if(Ee){var me=a(oe),Se=!me&&d(oe),De=!me&&!Se&&S(oe);pe=oe,me||Se||De?a(G)?pe=G:o(G)?pe=r(G):Se?(Ee=!1,pe=e(oe,!0)):De?(Ee=!1,pe=t(oe,!0)):pe=[]:E(oe)||s(oe)?(pe=G,s(G)?pe=P(G):(!b(G)||g(G))&&(pe=i(oe))):Ee=!1}Ee&&(ne.set(oe,pe),te(pe,oe,ie,V,ne),ne.delete(oe)),n(j,Y,pe)}return HS=z,HS}var ZS,YD;function jce(){if(YD)return ZS;YD=1;var n=M3(),e=eG(),t=SW(),r=zce(),i=Yf(),s=x_(),a=tG();function o(d,g,b,E,S){d!==g&&t(g,function(I,P){if(S||(S=new n),i(I))r(d,g,P,b,o,E,S);else{var z=E?E(a(d,P),I,P+"",d,g,S):void 0;z===void 0&&(z=I),e(d,P,z)}},s)}return ZS=o,ZS}var XS,$D;function Nce(){if($D)return XS;$D=1;function n(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}return XS=n,XS}var JS,VD;function Wce(){if(VD)return JS;VD=1;var n=Nce(),e=Math.max;function t(r,i,s){return i=e(i===void 0?r.length-1:i,0),function(){for(var a=arguments,o=-1,d=e(a.length-i,0),g=Array(d);++o<d;)g[o]=a[i+o];o=-1;for(var b=Array(i+1);++o<i;)b[o]=a[o];return b[i]=s(g),n(r,this,b)}}return JS=t,JS}var eE,HD;function Gce(){if(HD)return eE;HD=1;function n(e){return function(){return e}}return eE=n,eE}var tE,ZD;function Qce(){if(ZD)return tE;ZD=1;var n=Gce(),e=YW(),t=C3(),r=e?function(i,s){return e(i,"toString",{configurable:!0,enumerable:!1,value:n(s),writable:!0})}:t;return tE=r,tE}var nE,XD;function qce(){if(XD)return nE;XD=1;var n=800,e=16,t=Date.now;function r(i){var s=0,a=0;return function(){var o=t(),d=e-(o-a);if(a=o,d>0){if(++s>=n)return arguments[0]}else s=0;return i.apply(void 0,arguments)}}return nE=r,nE}var rE,JD;function Yce(){if(JD)return rE;JD=1;var n=Qce(),e=qce(),t=e(n);return rE=t,rE}var iE,eR;function $ce(){if(eR)return iE;eR=1;var n=C3(),e=Wce(),t=Yce();function r(i,s){return t(e(i,s,n),i+"")}return iE=r,iE}var oE,tR;function Vce(){if(tR)return oE;tR=1;var n=__(),e=iv(),t=YO(),r=Yf();function i(s,a,o){if(!r(o))return!1;var d=typeof a;return(d=="number"?e(o)&&t(a,o.length):d=="string"&&a in o)?n(o[a],s):!1}return oE=i,oE}var sE,nR;function Hce(){if(nR)return sE;nR=1;var n=$ce(),e=Vce();function t(r){return n(function(i,s){var a=-1,o=s.length,d=o>1?s[o-1]:void 0,g=o>2?s[2]:void 0;for(d=r.length>3&&typeof d=="function"?(o--,d):void 0,g&&e(s[0],s[1],g)&&(d=o<3?void 0:d,o=1),i=Object(i);++a<o;){var b=s[a];b&&r(i,b,a,d)}return i})}return sE=t,sE}var aE,rR;function nG(){if(rR)return aE;rR=1;var n=jce(),e=Hce(),t=e(function(r,i,s){n(r,i,s)});return aE=t,aE}var lE={},R1={},Tb={},iR;function Zce(){return iR||(iR=1,Object.defineProperty(Tb,"__esModule",{value:!0}),Tb.calculateChange=function(e,t,r,i,s){var a=s.clientWidth,o=s.clientHeight,d=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,g=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,b=d-(s.getBoundingClientRect().left+window.pageXOffset),E=g-(s.getBoundingClientRect().top+window.pageYOffset);if(r==="vertical"){var S=void 0;if(E<0?S=0:E>o?S=1:S=Math.round(E*100/o)/100,t.a!==S)return{h:t.h,s:t.s,l:t.l,a:S,source:"rgb"}}else{var I=void 0;if(b<0?I=0:b>a?I=1:I=Math.round(b*100/a)/100,i!==I)return{h:t.h,s:t.s,l:t.l,a:I,source:"rgb"}}return null}),Tb}var F1={},Pv={},oR;function Xce(){if(oR)return Pv;oR=1,Object.defineProperty(Pv,"__esModule",{value:!0});var n={},e=Pv.render=function(r,i,s,a){if(typeof document>"u"&&!a)return null;var o=a?new a:document.createElement("canvas");o.width=s*2,o.height=s*2;var d=o.getContext("2d");return d?(d.fillStyle=r,d.fillRect(0,0,o.width,o.height),d.fillStyle=i,d.fillRect(0,0,s,s),d.translate(s,s),d.fillRect(0,0,s,s),o.toDataURL()):null};return Pv.get=function(r,i,s,a){var o=r+"-"+i+"-"+s+(a?"-server":"");if(n[o])return n[o];var d=e(r,i,s,a);return n[o]=d,d},Pv}var sR;function lI(){if(sR)return F1;sR=1,Object.defineProperty(F1,"__esModule",{value:!0}),F1.Checkboard=void 0;var n=Object.assign||function(b){for(var E=1;E<arguments.length;E++){var S=arguments[E];for(var I in S)Object.prototype.hasOwnProperty.call(S,I)&&(b[I]=S[I])}return b},e=za(),t=d(e),r=Ep(),i=d(r),s=Xce(),a=o(s);function o(b){if(b&&b.__esModule)return b;var E={};if(b!=null)for(var S in b)Object.prototype.hasOwnProperty.call(b,S)&&(E[S]=b[S]);return E.default=b,E}function d(b){return b&&b.__esModule?b:{default:b}}var g=F1.Checkboard=function(E){var S=E.white,I=E.grey,P=E.size,z=E.renderers,j=E.borderRadius,q=E.boxShadow,Y=E.children,ie=(0,i.default)({default:{grid:{borderRadius:j,boxShadow:q,absolute:"0px 0px 0px 0px",background:"url("+a.get(S,I,P,z.canvas)+") center left"}}});return(0,e.isValidElement)(Y)?t.default.cloneElement(Y,n({},Y.props,{style:n({},Y.props.style,ie.grid)})):t.default.createElement("div",{style:ie.grid})};return g.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}},F1.default=g,F1}var aR;function Jce(){if(aR)return R1;aR=1,Object.defineProperty(R1,"__esModule",{value:!0}),R1.Alpha=void 0;var n=Object.assign||function(j){for(var q=1;q<arguments.length;q++){var Y=arguments[q];for(var ie in Y)Object.prototype.hasOwnProperty.call(Y,ie)&&(j[ie]=Y[ie])}return j},e=function(){function j(q,Y){for(var ie=0;ie<Y.length;ie++){var te=Y[ie];te.enumerable=te.enumerable||!1,te.configurable=!0,"value"in te&&(te.writable=!0),Object.defineProperty(q,te.key,te)}}return function(q,Y,ie){return Y&&j(q.prototype,Y),ie&&j(q,ie),q}}(),t=za(),r=E(t),i=Ep(),s=E(i),a=Zce(),o=b(a),d=lI(),g=E(d);function b(j){if(j&&j.__esModule)return j;var q={};if(j!=null)for(var Y in j)Object.prototype.hasOwnProperty.call(j,Y)&&(q[Y]=j[Y]);return q.default=j,q}function E(j){return j&&j.__esModule?j:{default:j}}function S(j,q){if(!(j instanceof q))throw new TypeError("Cannot call a class as a function")}function I(j,q){if(!j)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return q&&(typeof q=="object"||typeof q=="function")?q:j}function P(j,q){if(typeof q!="function"&&q!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof q);j.prototype=Object.create(q&&q.prototype,{constructor:{value:j,enumerable:!1,writable:!0,configurable:!0}}),q&&(Object.setPrototypeOf?Object.setPrototypeOf(j,q):j.__proto__=q)}var z=R1.Alpha=function(j){P(q,j);function q(){var Y,ie,te,V;S(this,q);for(var ne=arguments.length,G=Array(ne),oe=0;oe<ne;oe++)G[oe]=arguments[oe];return V=(ie=(te=I(this,(Y=q.__proto__||Object.getPrototypeOf(q)).call.apply(Y,[this].concat(G))),te),te.handleChange=function(he){var pe=o.calculateChange(he,te.props.hsl,te.props.direction,te.props.a,te.container);pe&&typeof te.props.onChange=="function"&&te.props.onChange(pe,he)},te.handleMouseDown=function(he){te.handleChange(he),window.addEventListener("mousemove",te.handleChange),window.addEventListener("mouseup",te.handleMouseUp)},te.handleMouseUp=function(){te.unbindEventListeners()},te.unbindEventListeners=function(){window.removeEventListener("mousemove",te.handleChange),window.removeEventListener("mouseup",te.handleMouseUp)},ie),I(te,V)}return e(q,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var ie=this,te=this.props.rgb,V=(0,s.default)({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+te.r+","+te.g+","+te.b+`, 0) 0%,
           rgba(`+te.r+","+te.g+","+te.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:te.a*100+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+te.r+","+te.g+","+te.b+`, 0) 0%,
           rgba(`+te.r+","+te.g+","+te.b+", 1) 100%)"},pointer:{left:0,top:te.a*100+"%"}},overwrite:n({},this.props.style)},{vertical:this.props.direction==="vertical",overwrite:!0});return r.default.createElement("div",{style:V.alpha},r.default.createElement("div",{style:V.checkboard},r.default.createElement(g.default,{renderers:this.props.renderers})),r.default.createElement("div",{style:V.gradient}),r.default.createElement("div",{style:V.container,ref:function(G){return ie.container=G},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},r.default.createElement("div",{style:V.pointer},this.props.pointer?r.default.createElement(this.props.pointer,this.props):r.default.createElement("div",{style:V.slider}))))}}]),q}(t.PureComponent||t.Component);return R1.default=z,R1}var L1={},lR;function ede(){if(lR)return L1;lR=1,Object.defineProperty(L1,"__esModule",{value:!0}),L1.EditableInput=void 0;var n=function(){function Y(ie,te){for(var V=0;V<te.length;V++){var ne=te[V];ne.enumerable=ne.enumerable||!1,ne.configurable=!0,"value"in ne&&(ne.writable=!0),Object.defineProperty(ie,ne.key,ne)}}return function(ie,te,V){return te&&Y(ie.prototype,te),V&&Y(ie,V),ie}}(),e=za(),t=s(e),r=Ep(),i=s(r);function s(Y){return Y&&Y.__esModule?Y:{default:Y}}function a(Y,ie,te){return ie in Y?Object.defineProperty(Y,ie,{value:te,enumerable:!0,configurable:!0,writable:!0}):Y[ie]=te,Y}function o(Y,ie){if(!(Y instanceof ie))throw new TypeError("Cannot call a class as a function")}function d(Y,ie){if(!Y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ie&&(typeof ie=="object"||typeof ie=="function")?ie:Y}function g(Y,ie){if(typeof ie!="function"&&ie!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof ie);Y.prototype=Object.create(ie&&ie.prototype,{constructor:{value:Y,enumerable:!1,writable:!0,configurable:!0}}),ie&&(Object.setPrototypeOf?Object.setPrototypeOf(Y,ie):Y.__proto__=ie)}var b=1,E=38,S=40,I=[E,S],P=function(ie){return I.indexOf(ie)>-1},z=function(ie){return Number(String(ie).replace(/%/g,""))},j=1,q=L1.EditableInput=function(Y){g(ie,Y);function ie(te){o(this,ie);var V=d(this,(ie.__proto__||Object.getPrototypeOf(ie)).call(this));return V.handleBlur=function(){V.state.blurValue&&V.setState({value:V.state.blurValue,blurValue:null})},V.handleChange=function(ne){V.setUpdatedValue(ne.target.value,ne)},V.handleKeyDown=function(ne){var G=z(ne.target.value);if(!isNaN(G)&&P(ne.keyCode)){var oe=V.getArrowOffset(),he=ne.keyCode===E?G+oe:G-oe;V.setUpdatedValue(he,ne)}},V.handleDrag=function(ne){if(V.props.dragLabel){var G=Math.round(V.props.value+ne.movementX);G>=0&&G<=V.props.dragMax&&V.props.onChange&&V.props.onChange(V.getValueObjectWithLabel(G),ne)}},V.handleMouseDown=function(ne){V.props.dragLabel&&(ne.preventDefault(),V.handleDrag(ne),window.addEventListener("mousemove",V.handleDrag),window.addEventListener("mouseup",V.handleMouseUp))},V.handleMouseUp=function(){V.unbindEventListeners()},V.unbindEventListeners=function(){window.removeEventListener("mousemove",V.handleDrag),window.removeEventListener("mouseup",V.handleMouseUp)},V.state={value:String(te.value).toUpperCase(),blurValue:String(te.value).toUpperCase()},V.inputId="rc-editable-input-"+j++,V}return n(ie,[{key:"componentDidUpdate",value:function(V,ne){this.props.value!==this.state.value&&(V.value!==this.props.value||ne.value!==this.state.value)&&(this.input===document.activeElement?this.setState({blurValue:String(this.props.value).toUpperCase()}):this.setState({value:String(this.props.value).toUpperCase(),blurValue:!this.state.blurValue&&String(this.props.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"getValueObjectWithLabel",value:function(V){return a({},this.props.label,V)}},{key:"getArrowOffset",value:function(){return this.props.arrowOffset||b}},{key:"setUpdatedValue",value:function(V,ne){var G=this.props.label?this.getValueObjectWithLabel(V):V;this.props.onChange&&this.props.onChange(G,ne),this.setState({value:V})}},{key:"render",value:function(){var V=this,ne=(0,i.default)({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return t.default.createElement("div",{style:ne.wrap},t.default.createElement("input",{id:this.inputId,style:ne.input,ref:function(oe){return V.input=oe},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?t.default.createElement("label",{htmlFor:this.inputId,style:ne.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),ie}(e.PureComponent||e.Component);return L1.default=q,L1}var U1={},Pb={},uR;function tde(){return uR||(uR=1,Object.defineProperty(Pb,"__esModule",{value:!0}),Pb.calculateChange=function(e,t,r,i){var s=i.clientWidth,a=i.clientHeight,o=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,d=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,g=o-(i.getBoundingClientRect().left+window.pageXOffset),b=d-(i.getBoundingClientRect().top+window.pageYOffset);if(t==="vertical"){var E=void 0;if(b<0)E=359;else if(b>a)E=0;else{var S=-(b*100/a)+100;E=360*S/100}if(r.h!==E)return{h:E,s:r.s,l:r.l,a:r.a,source:"hsl"}}else{var I=void 0;if(g<0)I=0;else if(g>s)I=359;else{var P=g*100/s;I=360*P/100}if(r.h!==I)return{h:I,s:r.s,l:r.l,a:r.a,source:"hsl"}}return null}),Pb}var AR;function nde(){if(AR)return U1;AR=1,Object.defineProperty(U1,"__esModule",{value:!0}),U1.Hue=void 0;var n=function(){function I(P,z){for(var j=0;j<z.length;j++){var q=z[j];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(P,q.key,q)}}return function(P,z,j){return z&&I(P.prototype,z),j&&I(P,j),P}}(),e=za(),t=d(e),r=Ep(),i=d(r),s=tde(),a=o(s);function o(I){if(I&&I.__esModule)return I;var P={};if(I!=null)for(var z in I)Object.prototype.hasOwnProperty.call(I,z)&&(P[z]=I[z]);return P.default=I,P}function d(I){return I&&I.__esModule?I:{default:I}}function g(I,P){if(!(I instanceof P))throw new TypeError("Cannot call a class as a function")}function b(I,P){if(!I)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P&&(typeof P=="object"||typeof P=="function")?P:I}function E(I,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof P);I.prototype=Object.create(P&&P.prototype,{constructor:{value:I,enumerable:!1,writable:!0,configurable:!0}}),P&&(Object.setPrototypeOf?Object.setPrototypeOf(I,P):I.__proto__=P)}var S=U1.Hue=function(I){E(P,I);function P(){var z,j,q,Y;g(this,P);for(var ie=arguments.length,te=Array(ie),V=0;V<ie;V++)te[V]=arguments[V];return Y=(j=(q=b(this,(z=P.__proto__||Object.getPrototypeOf(P)).call.apply(z,[this].concat(te))),q),q.handleChange=function(ne){var G=a.calculateChange(ne,q.props.direction,q.props.hsl,q.container);G&&typeof q.props.onChange=="function"&&q.props.onChange(G,ne)},q.handleMouseDown=function(ne){q.handleChange(ne),window.addEventListener("mousemove",q.handleChange),window.addEventListener("mouseup",q.handleMouseUp)},q.handleMouseUp=function(){q.unbindEventListeners()},j),b(q,Y)}return n(P,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var j=this,q=this.props.direction,Y=q===void 0?"horizontal":q,ie=(0,i.default)({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:this.props.hsl.h*100/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-(this.props.hsl.h*100/360)+100+"%"}}},{vertical:Y==="vertical"});return t.default.createElement("div",{style:ie.hue},t.default.createElement("div",{className:"hue-"+Y,style:ie.container,ref:function(V){return j.container=V},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},t.default.createElement("style",null,`
            .hue-horizontal {
              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0
                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to right, #f00 0%, #ff0
                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }

            .hue-vertical {
              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,
                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,
                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }
          `),t.default.createElement("div",{style:ie.pointer},this.props.pointer?t.default.createElement(this.props.pointer,this.props):t.default.createElement("div",{style:ie.slider}))))}}]),P}(e.PureComponent||e.Component);return U1.default=S,U1}var z1={},cR;function rde(){if(cR)return z1;cR=1,Object.defineProperty(z1,"__esModule",{value:!0}),z1.Raised=void 0;var n=za(),e=d(n),t=xp(),r=d(t),i=Ep(),s=d(i),a=nG(),o=d(a);function d(b){return b&&b.__esModule?b:{default:b}}var g=z1.Raised=function(E){var S=E.zDepth,I=E.radius,P=E.background,z=E.children,j=E.styles,q=j===void 0?{}:j,Y=(0,s.default)((0,o.default)({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+S+"px "+S*4+"px rgba(0,0,0,.24)",borderRadius:I,background:P}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},q),{"zDepth-1":S===1});return e.default.createElement("div",{style:Y.wrap},e.default.createElement("div",{style:Y.bg}),e.default.createElement("div",{style:Y.content},z))};return g.propTypes={background:r.default.string,zDepth:r.default.oneOf([0,1,2,3,4,5]),radius:r.default.number,styles:r.default.object},g.defaultProps={background:"#fff",zDepth:1,radius:2,styles:{}},z1.default=g,z1}var j1={},uE,dR;function ide(){if(dR)return uE;dR=1;var n=Sp(),e=function(){return n.Date.now()};return uE=e,uE}var AE,hR;function ode(){if(hR)return AE;hR=1;var n=/\s/;function e(t){for(var r=t.length;r--&&n.test(t.charAt(r)););return r}return AE=e,AE}var cE,fR;function sde(){if(fR)return cE;fR=1;var n=ode(),e=/^\s+/;function t(r){return r&&r.slice(0,n(r)+1).replace(e,"")}return cE=t,cE}var dE,pR;function ade(){if(pR)return dE;pR=1;var n=sde(),e=Yf(),t=E3(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,a=/^0o[0-7]+$/i,o=parseInt;function d(g){if(typeof g=="number")return g;if(t(g))return r;if(e(g)){var b=typeof g.valueOf=="function"?g.valueOf():g;g=e(b)?b+"":b}if(typeof g!="string")return g===0?g:+g;g=n(g);var E=s.test(g);return E||a.test(g)?o(g.slice(2),E?2:8):i.test(g)?r:+g}return dE=d,dE}var hE,mR;function rG(){if(mR)return hE;mR=1;var n=Yf(),e=ide(),t=ade(),r="Expected a function",i=Math.max,s=Math.min;function a(o,d,g){var b,E,S,I,P,z,j=0,q=!1,Y=!1,ie=!0;if(typeof o!="function")throw new TypeError(r);d=t(d)||0,n(g)&&(q=!!g.leading,Y="maxWait"in g,S=Y?i(t(g.maxWait)||0,d):S,ie="trailing"in g?!!g.trailing:ie);function te(Se){var De=b,be=E;return b=E=void 0,j=Se,I=o.apply(be,De),I}function V(Se){return j=Se,P=setTimeout(oe,d),q?te(Se):I}function ne(Se){var De=Se-z,be=Se-j,at=d-De;return Y?s(at,S-be):at}function G(Se){var De=Se-z,be=Se-j;return z===void 0||De>=d||De<0||Y&&be>=S}function oe(){var Se=e();if(G(Se))return he(Se);P=setTimeout(oe,ne(Se))}function he(Se){return P=void 0,ie&&b?te(Se):(b=E=void 0,I)}function pe(){P!==void 0&&clearTimeout(P),j=0,b=z=E=P=void 0}function Ee(){return P===void 0?I:he(e())}function me(){var Se=e(),De=G(Se);if(b=arguments,E=this,z=Se,De){if(P===void 0)return V(z);if(Y)return clearTimeout(P),P=setTimeout(oe,d),te(z)}return P===void 0&&(P=setTimeout(oe,d)),I}return me.cancel=pe,me.flush=Ee,me}return hE=a,hE}var fE,gR;function lde(){if(gR)return fE;gR=1;var n=rG(),e=Yf(),t="Expected a function";function r(i,s,a){var o=!0,d=!0;if(typeof i!="function")throw new TypeError(t);return e(a)&&(o="leading"in a?!!a.leading:o,d="trailing"in a?!!a.trailing:d),n(i,s,{leading:o,maxWait:s,trailing:d})}return fE=r,fE}var Kb={},yR;function ude(){return yR||(yR=1,Object.defineProperty(Kb,"__esModule",{value:!0}),Kb.calculateChange=function(e,t,r){var i=r.getBoundingClientRect(),s=i.width,a=i.height,o=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,d=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,g=o-(r.getBoundingClientRect().left+window.pageXOffset),b=d-(r.getBoundingClientRect().top+window.pageYOffset);g<0?g=0:g>s&&(g=s),b<0?b=0:b>a&&(b=a);var E=g/s,S=1-b/a;return{h:t.h,s:E,v:S,a:t.a,source:"hsv"}}),Kb}var vR;function Ade(){if(vR)return j1;vR=1,Object.defineProperty(j1,"__esModule",{value:!0}),j1.Saturation=void 0;var n=function(){function z(j,q){for(var Y=0;Y<q.length;Y++){var ie=q[Y];ie.enumerable=ie.enumerable||!1,ie.configurable=!0,"value"in ie&&(ie.writable=!0),Object.defineProperty(j,ie.key,ie)}}return function(j,q,Y){return q&&z(j.prototype,q),Y&&z(j,Y),j}}(),e=za(),t=b(e),r=Ep(),i=b(r),s=lde(),a=b(s),o=ude(),d=g(o);function g(z){if(z&&z.__esModule)return z;var j={};if(z!=null)for(var q in z)Object.prototype.hasOwnProperty.call(z,q)&&(j[q]=z[q]);return j.default=z,j}function b(z){return z&&z.__esModule?z:{default:z}}function E(z,j){if(!(z instanceof j))throw new TypeError("Cannot call a class as a function")}function S(z,j){if(!z)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j&&(typeof j=="object"||typeof j=="function")?j:z}function I(z,j){if(typeof j!="function"&&j!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof j);z.prototype=Object.create(j&&j.prototype,{constructor:{value:z,enumerable:!1,writable:!0,configurable:!0}}),j&&(Object.setPrototypeOf?Object.setPrototypeOf(z,j):z.__proto__=j)}var P=j1.Saturation=function(z){I(j,z);function j(q){E(this,j);var Y=S(this,(j.__proto__||Object.getPrototypeOf(j)).call(this,q));return Y.handleChange=function(ie){typeof Y.props.onChange=="function"&&Y.throttle(Y.props.onChange,d.calculateChange(ie,Y.props.hsl,Y.container),ie)},Y.handleMouseDown=function(ie){Y.handleChange(ie);var te=Y.getContainerRenderWindow();te.addEventListener("mousemove",Y.handleChange),te.addEventListener("mouseup",Y.handleMouseUp)},Y.handleMouseUp=function(){Y.unbindEventListeners()},Y.throttle=(0,a.default)(function(ie,te,V){ie(te,V)},50),Y}return n(j,[{key:"componentWillUnmount",value:function(){this.throttle.cancel(),this.unbindEventListeners()}},{key:"getContainerRenderWindow",value:function(){for(var Y=this.container,ie=window;!ie.document.contains(Y)&&ie.parent!==ie;)ie=ie.parent;return ie}},{key:"unbindEventListeners",value:function(){var Y=this.getContainerRenderWindow();Y.removeEventListener("mousemove",this.handleChange),Y.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var Y=this,ie=this.props.style||{},te=ie.color,V=ie.white,ne=ie.black,G=ie.pointer,oe=ie.circle,he=(0,i.default)({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-(this.props.hsv.v*100)+100+"%",left:this.props.hsv.s*100+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:`0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),
            0 0 1px 2px rgba(0,0,0,.4)`,borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:te,white:V,black:ne,pointer:G,circle:oe}},{custom:!!this.props.style});return t.default.createElement("div",{style:he.color,ref:function(Ee){return Y.container=Ee},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},t.default.createElement("style",null,`
          .saturation-white {
            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));
            background: linear-gradient(to right, #fff, rgba(255,255,255,0));
          }
          .saturation-black {
            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));
            background: linear-gradient(to top, #000, rgba(0,0,0,0));
          }
        `),t.default.createElement("div",{style:he.white,className:"saturation-white"},t.default.createElement("div",{style:he.black,className:"saturation-black"}),t.default.createElement("div",{style:he.pointer},this.props.pointer?t.default.createElement(this.props.pointer,this.props):t.default.createElement("div",{style:he.circle}))))}}]),j}(e.PureComponent||e.Component);return j1.default=P,j1}var N1={},Ld={},pE,CR;function cde(){if(CR)return pE;CR=1;var n=qW(),e=QW(),t=IW(),r=rf();function i(s,a){var o=r(s)?n:e;return o(s,t(a))}return pE=i,pE}var mE,_R;function dde(){return _R||(_R=1,mE=cde()),mE}var e2={exports:{}},hde=e2.exports,bR;function fde(){return bR||(bR=1,function(n,e){(function(t,r){n.exports=r()})(hde,function(){function t(Ue){"@babel/helpers - typeof";return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Pe){return typeof Pe}:function(Pe){return Pe&&typeof Symbol=="function"&&Pe.constructor===Symbol&&Pe!==Symbol.prototype?"symbol":typeof Pe},t(Ue)}var r=/^\s+/,i=/\s+$/;function s(Ue,Pe){if(Ue=Ue||"",Pe=Pe||{},Ue instanceof s)return Ue;if(!(this instanceof s))return new s(Ue,Pe);var Be=a(Ue);this._originalInput=Ue,this._r=Be.r,this._g=Be.g,this._b=Be.b,this._a=Be.a,this._roundA=Math.round(100*this._a)/100,this._format=Pe.format||Be.format,this._gradientType=Pe.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=Be.ok}s.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var Pe=this.toRgb();return(Pe.r*299+Pe.g*587+Pe.b*114)/1e3},getLuminance:function(){var Pe=this.toRgb(),Be,it,_t,ft,Ut,rn;return Be=Pe.r/255,it=Pe.g/255,_t=Pe.b/255,Be<=.03928?ft=Be/12.92:ft=Math.pow((Be+.055)/1.055,2.4),it<=.03928?Ut=it/12.92:Ut=Math.pow((it+.055)/1.055,2.4),_t<=.03928?rn=_t/12.92:rn=Math.pow((_t+.055)/1.055,2.4),.2126*ft+.7152*Ut+.0722*rn},setAlpha:function(Pe){return this._a=De(Pe),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var Pe=b(this._r,this._g,this._b);return{h:Pe.h*360,s:Pe.s,v:Pe.v,a:this._a}},toHsvString:function(){var Pe=b(this._r,this._g,this._b),Be=Math.round(Pe.h*360),it=Math.round(Pe.s*100),_t=Math.round(Pe.v*100);return this._a==1?"hsv("+Be+", "+it+"%, "+_t+"%)":"hsva("+Be+", "+it+"%, "+_t+"%, "+this._roundA+")"},toHsl:function(){var Pe=d(this._r,this._g,this._b);return{h:Pe.h*360,s:Pe.s,l:Pe.l,a:this._a}},toHslString:function(){var Pe=d(this._r,this._g,this._b),Be=Math.round(Pe.h*360),it=Math.round(Pe.s*100),_t=Math.round(Pe.l*100);return this._a==1?"hsl("+Be+", "+it+"%, "+_t+"%)":"hsla("+Be+", "+it+"%, "+_t+"%, "+this._roundA+")"},toHex:function(Pe){return S(this._r,this._g,this._b,Pe)},toHexString:function(Pe){return"#"+this.toHex(Pe)},toHex8:function(Pe){return I(this._r,this._g,this._b,this._a,Pe)},toHex8String:function(Pe){return"#"+this.toHex8(Pe)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(be(this._r,255)*100)+"%",g:Math.round(be(this._g,255)*100)+"%",b:Math.round(be(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(be(this._r,255)*100)+"%, "+Math.round(be(this._g,255)*100)+"%, "+Math.round(be(this._b,255)*100)+"%)":"rgba("+Math.round(be(this._r,255)*100)+"%, "+Math.round(be(this._g,255)*100)+"%, "+Math.round(be(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:me[S(this._r,this._g,this._b,!0)]||!1},toFilter:function(Pe){var Be="#"+P(this._r,this._g,this._b,this._a),it=Be,_t=this._gradientType?"GradientType = 1, ":"";if(Pe){var ft=s(Pe);it="#"+P(ft._r,ft._g,ft._b,ft._a)}return"progid:DXImageTransform.Microsoft.gradient("+_t+"startColorstr="+Be+",endColorstr="+it+")"},toString:function(Pe){var Be=!!Pe;Pe=Pe||this._format;var it=!1,_t=this._a<1&&this._a>=0,ft=!Be&&_t&&(Pe==="hex"||Pe==="hex6"||Pe==="hex3"||Pe==="hex4"||Pe==="hex8"||Pe==="name");return ft?Pe==="name"&&this._a===0?this.toName():this.toRgbString():(Pe==="rgb"&&(it=this.toRgbString()),Pe==="prgb"&&(it=this.toPercentageRgbString()),(Pe==="hex"||Pe==="hex6")&&(it=this.toHexString()),Pe==="hex3"&&(it=this.toHexString(!0)),Pe==="hex4"&&(it=this.toHex8String(!0)),Pe==="hex8"&&(it=this.toHex8String()),Pe==="name"&&(it=this.toName()),Pe==="hsl"&&(it=this.toHslString()),Pe==="hsv"&&(it=this.toHsvString()),it||this.toHexString())},clone:function(){return s(this.toString())},_applyModification:function(Pe,Be){var it=Pe.apply(null,[this].concat([].slice.call(Be)));return this._r=it._r,this._g=it._g,this._b=it._b,this.setAlpha(it._a),this},lighten:function(){return this._applyModification(Y,arguments)},brighten:function(){return this._applyModification(ie,arguments)},darken:function(){return this._applyModification(te,arguments)},desaturate:function(){return this._applyModification(z,arguments)},saturate:function(){return this._applyModification(j,arguments)},greyscale:function(){return this._applyModification(q,arguments)},spin:function(){return this._applyModification(V,arguments)},_applyCombination:function(Pe,Be){return Pe.apply(null,[this].concat([].slice.call(Be)))},analogous:function(){return this._applyCombination(he,arguments)},complement:function(){return this._applyCombination(ne,arguments)},monochromatic:function(){return this._applyCombination(pe,arguments)},splitcomplement:function(){return this._applyCombination(oe,arguments)},triad:function(){return this._applyCombination(G,[3])},tetrad:function(){return this._applyCombination(G,[4])}},s.fromRatio=function(Ue,Pe){if(t(Ue)=="object"){var Be={};for(var it in Ue)Ue.hasOwnProperty(it)&&(it==="a"?Be[it]=Ue[it]:Be[it]=Fe(Ue[it]));Ue=Be}return s(Ue,Pe)};function a(Ue){var Pe={r:0,g:0,b:0},Be=1,it=null,_t=null,ft=null,Ut=!1,rn=!1;return typeof Ue=="string"&&(Ue=Lt(Ue)),t(Ue)=="object"&&(gt(Ue.r)&&gt(Ue.g)&&gt(Ue.b)?(Pe=o(Ue.r,Ue.g,Ue.b),Ut=!0,rn=String(Ue.r).substr(-1)==="%"?"prgb":"rgb"):gt(Ue.h)&&gt(Ue.s)&&gt(Ue.v)?(it=Fe(Ue.s),_t=Fe(Ue.v),Pe=E(Ue.h,it,_t),Ut=!0,rn="hsv"):gt(Ue.h)&&gt(Ue.s)&&gt(Ue.l)&&(it=Fe(Ue.s),ft=Fe(Ue.l),Pe=g(Ue.h,it,ft),Ut=!0,rn="hsl"),Ue.hasOwnProperty("a")&&(Be=Ue.a)),Be=De(Be),{ok:Ut,format:Ue.format||rn,r:Math.min(255,Math.max(Pe.r,0)),g:Math.min(255,Math.max(Pe.g,0)),b:Math.min(255,Math.max(Pe.b,0)),a:Be}}function o(Ue,Pe,Be){return{r:be(Ue,255)*255,g:be(Pe,255)*255,b:be(Be,255)*255}}function d(Ue,Pe,Be){Ue=be(Ue,255),Pe=be(Pe,255),Be=be(Be,255);var it=Math.max(Ue,Pe,Be),_t=Math.min(Ue,Pe,Be),ft,Ut,rn=(it+_t)/2;if(it==_t)ft=Ut=0;else{var Dt=it-_t;switch(Ut=rn>.5?Dt/(2-it-_t):Dt/(it+_t),it){case Ue:ft=(Pe-Be)/Dt+(Pe<Be?6:0);break;case Pe:ft=(Be-Ue)/Dt+2;break;case Be:ft=(Ue-Pe)/Dt+4;break}ft/=6}return{h:ft,s:Ut,l:rn}}function g(Ue,Pe,Be){var it,_t,ft;Ue=be(Ue,360),Pe=be(Pe,100),Be=be(Be,100);function Ut(_n,qn,tn){return tn<0&&(tn+=1),tn>1&&(tn-=1),tn<1/6?_n+(qn-_n)*6*tn:tn<1/2?qn:tn<2/3?_n+(qn-_n)*(2/3-tn)*6:_n}if(Pe===0)it=_t=ft=Be;else{var rn=Be<.5?Be*(1+Pe):Be+Pe-Be*Pe,Dt=2*Be-rn;it=Ut(Dt,rn,Ue+1/3),_t=Ut(Dt,rn,Ue),ft=Ut(Dt,rn,Ue-1/3)}return{r:it*255,g:_t*255,b:ft*255}}function b(Ue,Pe,Be){Ue=be(Ue,255),Pe=be(Pe,255),Be=be(Be,255);var it=Math.max(Ue,Pe,Be),_t=Math.min(Ue,Pe,Be),ft,Ut,rn=it,Dt=it-_t;if(Ut=it===0?0:Dt/it,it==_t)ft=0;else{switch(it){case Ue:ft=(Pe-Be)/Dt+(Pe<Be?6:0);break;case Pe:ft=(Be-Ue)/Dt+2;break;case Be:ft=(Ue-Pe)/Dt+4;break}ft/=6}return{h:ft,s:Ut,v:rn}}function E(Ue,Pe,Be){Ue=be(Ue,360)*6,Pe=be(Pe,100),Be=be(Be,100);var it=Math.floor(Ue),_t=Ue-it,ft=Be*(1-Pe),Ut=Be*(1-_t*Pe),rn=Be*(1-(1-_t)*Pe),Dt=it%6,_n=[Be,Ut,ft,ft,rn,Be][Dt],qn=[rn,Be,Be,Ut,ft,ft][Dt],tn=[ft,ft,rn,Be,Be,Ut][Dt];return{r:_n*255,g:qn*255,b:tn*255}}function S(Ue,Pe,Be,it){var _t=[Me(Math.round(Ue).toString(16)),Me(Math.round(Pe).toString(16)),Me(Math.round(Be).toString(16))];return it&&_t[0].charAt(0)==_t[0].charAt(1)&&_t[1].charAt(0)==_t[1].charAt(1)&&_t[2].charAt(0)==_t[2].charAt(1)?_t[0].charAt(0)+_t[1].charAt(0)+_t[2].charAt(0):_t.join("")}function I(Ue,Pe,Be,it,_t){var ft=[Me(Math.round(Ue).toString(16)),Me(Math.round(Pe).toString(16)),Me(Math.round(Be).toString(16)),Me(He(it))];return _t&&ft[0].charAt(0)==ft[0].charAt(1)&&ft[1].charAt(0)==ft[1].charAt(1)&&ft[2].charAt(0)==ft[2].charAt(1)&&ft[3].charAt(0)==ft[3].charAt(1)?ft[0].charAt(0)+ft[1].charAt(0)+ft[2].charAt(0)+ft[3].charAt(0):ft.join("")}function P(Ue,Pe,Be,it){var _t=[Me(He(it)),Me(Math.round(Ue).toString(16)),Me(Math.round(Pe).toString(16)),Me(Math.round(Be).toString(16))];return _t.join("")}s.equals=function(Ue,Pe){return!Ue||!Pe?!1:s(Ue).toRgbString()==s(Pe).toRgbString()},s.random=function(){return s.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function z(Ue,Pe){Pe=Pe===0?0:Pe||10;var Be=s(Ue).toHsl();return Be.s-=Pe/100,Be.s=at(Be.s),s(Be)}function j(Ue,Pe){Pe=Pe===0?0:Pe||10;var Be=s(Ue).toHsl();return Be.s+=Pe/100,Be.s=at(Be.s),s(Be)}function q(Ue){return s(Ue).desaturate(100)}function Y(Ue,Pe){Pe=Pe===0?0:Pe||10;var Be=s(Ue).toHsl();return Be.l+=Pe/100,Be.l=at(Be.l),s(Be)}function ie(Ue,Pe){Pe=Pe===0?0:Pe||10;var Be=s(Ue).toRgb();return Be.r=Math.max(0,Math.min(255,Be.r-Math.round(255*-(Pe/100)))),Be.g=Math.max(0,Math.min(255,Be.g-Math.round(255*-(Pe/100)))),Be.b=Math.max(0,Math.min(255,Be.b-Math.round(255*-(Pe/100)))),s(Be)}function te(Ue,Pe){Pe=Pe===0?0:Pe||10;var Be=s(Ue).toHsl();return Be.l-=Pe/100,Be.l=at(Be.l),s(Be)}function V(Ue,Pe){var Be=s(Ue).toHsl(),it=(Be.h+Pe)%360;return Be.h=it<0?360+it:it,s(Be)}function ne(Ue){var Pe=s(Ue).toHsl();return Pe.h=(Pe.h+180)%360,s(Pe)}function G(Ue,Pe){if(isNaN(Pe)||Pe<=0)throw new Error("Argument to polyad must be a positive number");for(var Be=s(Ue).toHsl(),it=[s(Ue)],_t=360/Pe,ft=1;ft<Pe;ft++)it.push(s({h:(Be.h+ft*_t)%360,s:Be.s,l:Be.l}));return it}function oe(Ue){var Pe=s(Ue).toHsl(),Be=Pe.h;return[s(Ue),s({h:(Be+72)%360,s:Pe.s,l:Pe.l}),s({h:(Be+216)%360,s:Pe.s,l:Pe.l})]}function he(Ue,Pe,Be){Pe=Pe||6,Be=Be||30;var it=s(Ue).toHsl(),_t=360/Be,ft=[s(Ue)];for(it.h=(it.h-(_t*Pe>>1)+720)%360;--Pe;)it.h=(it.h+_t)%360,ft.push(s(it));return ft}function pe(Ue,Pe){Pe=Pe||6;for(var Be=s(Ue).toHsv(),it=Be.h,_t=Be.s,ft=Be.v,Ut=[],rn=1/Pe;Pe--;)Ut.push(s({h:it,s:_t,v:ft})),ft=(ft+rn)%1;return Ut}s.mix=function(Ue,Pe,Be){Be=Be===0?0:Be||50;var it=s(Ue).toRgb(),_t=s(Pe).toRgb(),ft=Be/100,Ut={r:(_t.r-it.r)*ft+it.r,g:(_t.g-it.g)*ft+it.g,b:(_t.b-it.b)*ft+it.b,a:(_t.a-it.a)*ft+it.a};return s(Ut)},s.readability=function(Ue,Pe){var Be=s(Ue),it=s(Pe);return(Math.max(Be.getLuminance(),it.getLuminance())+.05)/(Math.min(Be.getLuminance(),it.getLuminance())+.05)},s.isReadable=function(Ue,Pe,Be){var it=s.readability(Ue,Pe),_t,ft;switch(ft=!1,_t=Kt(Be),_t.level+_t.size){case"AAsmall":case"AAAlarge":ft=it>=4.5;break;case"AAlarge":ft=it>=3;break;case"AAAsmall":ft=it>=7;break}return ft},s.mostReadable=function(Ue,Pe,Be){var it=null,_t=0,ft,Ut,rn,Dt;Be=Be||{},Ut=Be.includeFallbackColors,rn=Be.level,Dt=Be.size;for(var _n=0;_n<Pe.length;_n++)ft=s.readability(Ue,Pe[_n]),ft>_t&&(_t=ft,it=s(Pe[_n]));return s.isReadable(Ue,it,{level:rn,size:Dt})||!Ut?it:(Be.includeFallbackColors=!1,s.mostReadable(Ue,["#fff","#000"],Be))};var Ee=s.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},me=s.hexNames=Se(Ee);function Se(Ue){var Pe={};for(var Be in Ue)Ue.hasOwnProperty(Be)&&(Pe[Ue[Be]]=Be);return Pe}function De(Ue){return Ue=parseFloat(Ue),(isNaN(Ue)||Ue<0||Ue>1)&&(Ue=1),Ue}function be(Ue,Pe){Je(Ue)&&(Ue="100%");var Be=We(Ue);return Ue=Math.min(Pe,Math.max(0,parseFloat(Ue))),Be&&(Ue=parseInt(Ue*Pe,10)/100),Math.abs(Ue-Pe)<1e-6?1:Ue%Pe/parseFloat(Pe)}function at(Ue){return Math.min(1,Math.max(0,Ue))}function Ze(Ue){return parseInt(Ue,16)}function Je(Ue){return typeof Ue=="string"&&Ue.indexOf(".")!=-1&&parseFloat(Ue)===1}function We(Ue){return typeof Ue=="string"&&Ue.indexOf("%")!=-1}function Me(Ue){return Ue.length==1?"0"+Ue:""+Ue}function Fe(Ue){return Ue<=1&&(Ue=Ue*100+"%"),Ue}function He(Ue){return Math.round(parseFloat(Ue)*255).toString(16)}function bt(Ue){return Ze(Ue)/255}var Yt=function(){var Ue="[-\\+]?\\d+%?",Pe="[-\\+]?\\d*\\.\\d+%?",Be="(?:"+Pe+")|(?:"+Ue+")",it="[\\s|\\(]+("+Be+")[,|\\s]+("+Be+")[,|\\s]+("+Be+")\\s*\\)?",_t="[\\s|\\(]+("+Be+")[,|\\s]+("+Be+")[,|\\s]+("+Be+")[,|\\s]+("+Be+")\\s*\\)?";return{CSS_UNIT:new RegExp(Be),rgb:new RegExp("rgb"+it),rgba:new RegExp("rgba"+_t),hsl:new RegExp("hsl"+it),hsla:new RegExp("hsla"+_t),hsv:new RegExp("hsv"+it),hsva:new RegExp("hsva"+_t),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function gt(Ue){return!!Yt.CSS_UNIT.exec(Ue)}function Lt(Ue){Ue=Ue.replace(r,"").replace(i,"").toLowerCase();var Pe=!1;if(Ee[Ue])Ue=Ee[Ue],Pe=!0;else if(Ue=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var Be;return(Be=Yt.rgb.exec(Ue))?{r:Be[1],g:Be[2],b:Be[3]}:(Be=Yt.rgba.exec(Ue))?{r:Be[1],g:Be[2],b:Be[3],a:Be[4]}:(Be=Yt.hsl.exec(Ue))?{h:Be[1],s:Be[2],l:Be[3]}:(Be=Yt.hsla.exec(Ue))?{h:Be[1],s:Be[2],l:Be[3],a:Be[4]}:(Be=Yt.hsv.exec(Ue))?{h:Be[1],s:Be[2],v:Be[3]}:(Be=Yt.hsva.exec(Ue))?{h:Be[1],s:Be[2],v:Be[3],a:Be[4]}:(Be=Yt.hex8.exec(Ue))?{r:Ze(Be[1]),g:Ze(Be[2]),b:Ze(Be[3]),a:bt(Be[4]),format:Pe?"name":"hex8"}:(Be=Yt.hex6.exec(Ue))?{r:Ze(Be[1]),g:Ze(Be[2]),b:Ze(Be[3]),format:Pe?"name":"hex"}:(Be=Yt.hex4.exec(Ue))?{r:Ze(Be[1]+""+Be[1]),g:Ze(Be[2]+""+Be[2]),b:Ze(Be[3]+""+Be[3]),a:bt(Be[4]+""+Be[4]),format:Pe?"name":"hex8"}:(Be=Yt.hex3.exec(Ue))?{r:Ze(Be[1]+""+Be[1]),g:Ze(Be[2]+""+Be[2]),b:Ze(Be[3]+""+Be[3]),format:Pe?"name":"hex"}:!1}function Kt(Ue){var Pe,Be;return Ue=Ue||{level:"AA",size:"small"},Pe=(Ue.level||"AA").toUpperCase(),Be=(Ue.size||"small").toLowerCase(),Pe!=="AA"&&Pe!=="AAA"&&(Pe="AA"),Be!=="small"&&Be!=="large"&&(Be="small"),{level:Pe,size:Be}}return s})}(e2)),e2.exports}var xR;function iG(){if(xR)return Ld;xR=1,Object.defineProperty(Ld,"__esModule",{value:!0}),Ld.isvalidColorString=Ld.red=Ld.getContrastingColor=Ld.isValidHex=Ld.toState=Ld.simpleCheckForValidColor=void 0;var n=dde(),e=i(n),t=fde(),r=i(t);function i(a){return a&&a.__esModule?a:{default:a}}Ld.simpleCheckForValidColor=function(o){var d=["r","g","b","a","h","s","l","v"],g=0,b=0;return(0,e.default)(d,function(E){if(o[E]&&(g+=1,isNaN(o[E])||(b+=1),E==="s"||E==="l")){var S=/^\d+%$/;S.test(o[E])&&(b+=1)}}),g===b?o:!1};var s=Ld.toState=function(o,d){var g=o.hex?(0,r.default)(o.hex):(0,r.default)(o),b=g.toHsl(),E=g.toHsv(),S=g.toRgb(),I=g.toHex();b.s===0&&(b.h=d||0,E.h=d||0);var P=I==="000000"&&S.a===0;return{hsl:b,hex:P?"transparent":"#"+I,rgb:S,hsv:E,oldHue:o.h||d||b.h,source:o.source}};return Ld.isValidHex=function(o){if(o==="transparent")return!0;var d=String(o).charAt(0)==="#"?1:0;return o.length!==4+d&&o.length<7+d&&(0,r.default)(o).isValid()},Ld.getContrastingColor=function(o){if(!o)return"#fff";var d=s(o);if(d.hex==="transparent")return"rgba(0,0,0,0.4)";var g=(d.rgb.r*299+d.rgb.g*587+d.rgb.b*114)/1e3;return g>=128?"#000":"#fff"},Ld.red={hsl:{a:1,h:0,l:.5,s:1},hex:"#ff0000",rgb:{r:255,g:0,b:0,a:1},hsv:{h:0,s:1,v:1,a:1}},Ld.isvalidColorString=function(o,d){var g=o.replace("","");return(0,r.default)(d+" ("+g+")")._ok},Ld}var wR;function pde(){if(wR)return N1;wR=1,Object.defineProperty(N1,"__esModule",{value:!0}),N1.ColorWrap=void 0;var n=Object.assign||function(P){for(var z=1;z<arguments.length;z++){var j=arguments[z];for(var q in j)Object.prototype.hasOwnProperty.call(j,q)&&(P[q]=j[q])}return P},e=function(){function P(z,j){for(var q=0;q<j.length;q++){var Y=j[q];Y.enumerable=Y.enumerable||!1,Y.configurable=!0,"value"in Y&&(Y.writable=!0),Object.defineProperty(z,Y.key,Y)}}return function(z,j,q){return j&&P(z.prototype,j),q&&P(z,q),z}}(),t=za(),r=g(t),i=rG(),s=g(i),a=iG(),o=d(a);function d(P){if(P&&P.__esModule)return P;var z={};if(P!=null)for(var j in P)Object.prototype.hasOwnProperty.call(P,j)&&(z[j]=P[j]);return z.default=P,z}function g(P){return P&&P.__esModule?P:{default:P}}function b(P,z){if(!(P instanceof z))throw new TypeError("Cannot call a class as a function")}function E(P,z){if(!P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return z&&(typeof z=="object"||typeof z=="function")?z:P}function S(P,z){if(typeof z!="function"&&z!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof z);P.prototype=Object.create(z&&z.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),z&&(Object.setPrototypeOf?Object.setPrototypeOf(P,z):P.__proto__=z)}var I=N1.ColorWrap=function(z){var j=function(q){S(Y,q);function Y(ie){b(this,Y);var te=E(this,(Y.__proto__||Object.getPrototypeOf(Y)).call(this));return te.handleChange=function(V,ne){var G=o.simpleCheckForValidColor(V);if(G){var oe=o.toState(V,V.h||te.state.oldHue);te.setState(oe),te.props.onChangeComplete&&te.debounce(te.props.onChangeComplete,oe,ne),te.props.onChange&&te.props.onChange(oe,ne)}},te.handleSwatchHover=function(V,ne){var G=o.simpleCheckForValidColor(V);if(G){var oe=o.toState(V,V.h||te.state.oldHue);te.props.onSwatchHover&&te.props.onSwatchHover(oe,ne)}},te.state=n({},o.toState(ie.color,0)),te.debounce=(0,s.default)(function(V,ne,G){V(ne,G)},100),te}return e(Y,[{key:"render",value:function(){var te={};return this.props.onSwatchHover&&(te.onSwatchHover=this.handleSwatchHover),r.default.createElement(z,n({},this.props,this.state,{onChange:this.handleChange},te))}}],[{key:"getDerivedStateFromProps",value:function(te,V){return n({},o.toState(te.color,V.oldHue))}}]),Y}(t.PureComponent||t.Component);return j.propTypes=n({},z.propTypes),j.defaultProps=n({},z.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),j};return N1.default=I,N1}var W1={},Kv={},MR;function mde(){if(MR)return Kv;MR=1,Object.defineProperty(Kv,"__esModule",{value:!0}),Kv.handleFocus=void 0;var n=Object.assign||function(d){for(var g=1;g<arguments.length;g++){var b=arguments[g];for(var E in b)Object.prototype.hasOwnProperty.call(b,E)&&(d[E]=b[E])}return d},e=function(){function d(g,b){for(var E=0;E<b.length;E++){var S=b[E];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(g,S.key,S)}}return function(g,b,E){return b&&d(g.prototype,b),E&&d(g,E),g}}(),t=za(),r=i(t);function i(d){return d&&d.__esModule?d:{default:d}}function s(d,g){if(!(d instanceof g))throw new TypeError("Cannot call a class as a function")}function a(d,g){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:d}function o(d,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);d.prototype=Object.create(g&&g.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(d,g):d.__proto__=g)}return Kv.handleFocus=function(g){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(E){o(S,E);function S(){var I,P,z,j;s(this,S);for(var q=arguments.length,Y=Array(q),ie=0;ie<q;ie++)Y[ie]=arguments[ie];return j=(P=(z=a(this,(I=S.__proto__||Object.getPrototypeOf(S)).call.apply(I,[this].concat(Y))),z),z.state={focus:!1},z.handleFocus=function(){return z.setState({focus:!0})},z.handleBlur=function(){return z.setState({focus:!1})},P),a(z,j)}return e(S,[{key:"render",value:function(){return r.default.createElement(b,{onFocus:this.handleFocus,onBlur:this.handleBlur},r.default.createElement(g,n({},this.props,this.state)))}}]),S}(r.default.Component)},Kv}var SR;function gde(){if(SR)return W1;SR=1,Object.defineProperty(W1,"__esModule",{value:!0}),W1.Swatch=void 0;var n=Object.assign||function(E){for(var S=1;S<arguments.length;S++){var I=arguments[S];for(var P in I)Object.prototype.hasOwnProperty.call(I,P)&&(E[P]=I[P])}return E},e=za(),t=d(e),r=Ep(),i=d(r),s=mde(),a=lI(),o=d(a);function d(E){return E&&E.__esModule?E:{default:E}}var g=13,b=W1.Swatch=function(S){var I=S.color,P=S.style,z=S.onClick,j=z===void 0?function(){}:z,q=S.onHover,Y=S.title,ie=Y===void 0?I:Y,te=S.children,V=S.focus,ne=S.focusStyle,G=ne===void 0?{}:ne,oe=I==="transparent",he=(0,i.default)({default:{swatch:n({background:I,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},P,V?G:{})}}),pe=function(be){return j(I,be)},Ee=function(be){return be.keyCode===g&&j(I,be)},me=function(be){return q(I,be)},Se={};return q&&(Se.onMouseOver=me),t.default.createElement("div",n({style:he.swatch,onClick:pe,title:ie,tabIndex:0,onKeyDown:Ee},Se),te,oe&&t.default.createElement(o.default,{borderRadius:he.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))};return W1.default=(0,s.handleFocus)(b),W1}var ER;function oG(){return ER||(ER=1,function(n){Object.defineProperty(n,"__esModule",{value:!0});var e=Jce();Object.defineProperty(n,"Alpha",{enumerable:!0,get:function(){return g(e).default}});var t=lI();Object.defineProperty(n,"Checkboard",{enumerable:!0,get:function(){return g(t).default}});var r=ede();Object.defineProperty(n,"EditableInput",{enumerable:!0,get:function(){return g(r).default}});var i=nde();Object.defineProperty(n,"Hue",{enumerable:!0,get:function(){return g(i).default}});var s=rde();Object.defineProperty(n,"Raised",{enumerable:!0,get:function(){return g(s).default}});var a=Ade();Object.defineProperty(n,"Saturation",{enumerable:!0,get:function(){return g(a).default}});var o=pde();Object.defineProperty(n,"ColorWrap",{enumerable:!0,get:function(){return g(o).default}});var d=gde();Object.defineProperty(n,"Swatch",{enumerable:!0,get:function(){return g(d).default}});function g(b){return b&&b.__esModule?b:{default:b}}}(lE)),lE}var G1={},gE,BR;function yde(){if(BR)return gE;BR=1;function n(e){return e===void 0}return gE=n,gE}var Db={},OR;function vde(){if(OR)return Db;OR=1,Object.defineProperty(Db,"__esModule",{value:!0});var n=Object.assign||function(a){for(var o=1;o<arguments.length;o++){var d=arguments[o];for(var g in d)Object.prototype.hasOwnProperty.call(d,g)&&(a[g]=d[g])}return a},e=za(),t=r(e);function r(a){return a&&a.__esModule?a:{default:a}}function i(a,o){var d={};for(var g in a)o.indexOf(g)>=0||Object.prototype.hasOwnProperty.call(a,g)&&(d[g]=a[g]);return d}var s=24;return Db.default=function(a){var o=a.fill,d=o===void 0?"currentColor":o,g=a.width,b=g===void 0?s:g,E=a.height,S=E===void 0?s:E,I=a.style,P=I===void 0?{}:I,z=i(a,["fill","width","height","style"]);return t.default.createElement("svg",n({viewBox:"0 0 "+s+" "+s,style:n({fill:d,width:b,height:S},P)},z),t.default.createElement("path",{d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}))},Db}var IR;function Cde(){if(IR)return G1;IR=1,Object.defineProperty(G1,"__esModule",{value:!0}),G1.ChromeFields=void 0;var n=function(){function Y(ie,te){for(var V=0;V<te.length;V++){var ne=te[V];ne.enumerable=ne.enumerable||!1,ne.configurable=!0,"value"in ne&&(ne.writable=!0),Object.defineProperty(ie,ne.key,ne)}}return function(ie,te,V){return te&&Y(ie.prototype,te),V&&Y(ie,V),ie}}(),e=za(),t=I(e),r=Ep(),i=I(r),s=iG(),a=S(s),o=yde(),d=I(o),g=oG(),b=vde(),E=I(b);function S(Y){if(Y&&Y.__esModule)return Y;var ie={};if(Y!=null)for(var te in Y)Object.prototype.hasOwnProperty.call(Y,te)&&(ie[te]=Y[te]);return ie.default=Y,ie}function I(Y){return Y&&Y.__esModule?Y:{default:Y}}function P(Y,ie){if(!(Y instanceof ie))throw new TypeError("Cannot call a class as a function")}function z(Y,ie){if(!Y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ie&&(typeof ie=="object"||typeof ie=="function")?ie:Y}function j(Y,ie){if(typeof ie!="function"&&ie!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof ie);Y.prototype=Object.create(ie&&ie.prototype,{constructor:{value:Y,enumerable:!1,writable:!0,configurable:!0}}),ie&&(Object.setPrototypeOf?Object.setPrototypeOf(Y,ie):Y.__proto__=ie)}var q=G1.ChromeFields=function(Y){j(ie,Y);function ie(te){P(this,ie);var V=z(this,(ie.__proto__||Object.getPrototypeOf(ie)).call(this));return V.toggleViews=function(){V.state.view==="hex"?V.setState({view:"rgb"}):V.state.view==="rgb"?V.setState({view:"hsl"}):V.state.view==="hsl"&&(V.props.hsl.a===1?V.setState({view:"hex"}):V.setState({view:"rgb"}))},V.handleChange=function(ne,G){ne.hex?a.isValidHex(ne.hex)&&V.props.onChange({hex:ne.hex,source:"hex"},G):ne.r||ne.g||ne.b?V.props.onChange({r:ne.r||V.props.rgb.r,g:ne.g||V.props.rgb.g,b:ne.b||V.props.rgb.b,source:"rgb"},G):ne.a?(ne.a<0?ne.a=0:ne.a>1&&(ne.a=1),V.props.onChange({h:V.props.hsl.h,s:V.props.hsl.s,l:V.props.hsl.l,a:Math.round(ne.a*100)/100,source:"rgb"},G)):(ne.h||ne.s||ne.l)&&(typeof ne.s=="string"&&ne.s.includes("%")&&(ne.s=ne.s.replace("%","")),typeof ne.l=="string"&&ne.l.includes("%")&&(ne.l=ne.l.replace("%","")),ne.s==1?ne.s=.01:ne.l==1&&(ne.l=.01),V.props.onChange({h:ne.h||V.props.hsl.h,s:Number((0,d.default)(ne.s)?V.props.hsl.s:ne.s),l:Number((0,d.default)(ne.l)?V.props.hsl.l:ne.l),source:"hsl"},G))},V.showHighlight=function(ne){ne.currentTarget.style.background="#eee"},V.hideHighlight=function(ne){ne.currentTarget.style.background="transparent"},te.hsl.a!==1&&te.view==="hex"?V.state={view:"rgb"}:V.state={view:te.view},V}return n(ie,[{key:"render",value:function(){var V=this,ne=(0,i.default)({default:{wrap:{paddingTop:"16px",display:"flex"},fields:{flex:"1",display:"flex",marginLeft:"-6px"},field:{paddingLeft:"6px",width:"100%"},alpha:{paddingLeft:"6px",width:"100%"},toggle:{width:"32px",textAlign:"right",position:"relative"},icon:{marginRight:"-4px",marginTop:"12px",cursor:"pointer",position:"relative"},iconHighlight:{position:"absolute",width:"24px",height:"28px",background:"#eee",borderRadius:"4px",top:"10px",left:"12px",display:"none"},input:{fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px",textAlign:"center"},label:{textTransform:"uppercase",fontSize:"11px",lineHeight:"11px",color:"#969696",textAlign:"center",display:"block",marginTop:"12px"},svg:{fill:"#333",width:"24px",height:"24px",border:"1px transparent solid",borderRadius:"5px"}},disableAlpha:{alpha:{display:"none"}}},this.props,this.state),G=void 0;return this.state.view==="hex"?G=t.default.createElement("div",{style:ne.fields,className:"flexbox-fix"},t.default.createElement("div",{style:ne.field},t.default.createElement(g.EditableInput,{style:{input:ne.input,label:ne.label},label:"hex",value:this.props.hex,onChange:this.handleChange}))):this.state.view==="rgb"?G=t.default.createElement("div",{style:ne.fields,className:"flexbox-fix"},t.default.createElement("div",{style:ne.field},t.default.createElement(g.EditableInput,{style:{input:ne.input,label:ne.label},label:"r",value:this.props.rgb.r,onChange:this.handleChange})),t.default.createElement("div",{style:ne.field},t.default.createElement(g.EditableInput,{style:{input:ne.input,label:ne.label},label:"g",value:this.props.rgb.g,onChange:this.handleChange})),t.default.createElement("div",{style:ne.field},t.default.createElement(g.EditableInput,{style:{input:ne.input,label:ne.label},label:"b",value:this.props.rgb.b,onChange:this.handleChange})),t.default.createElement("div",{style:ne.alpha},t.default.createElement(g.EditableInput,{style:{input:ne.input,label:ne.label},label:"a",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):this.state.view==="hsl"&&(G=t.default.createElement("div",{style:ne.fields,className:"flexbox-fix"},t.default.createElement("div",{style:ne.field},t.default.createElement(g.EditableInput,{style:{input:ne.input,label:ne.label},label:"h",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),t.default.createElement("div",{style:ne.field},t.default.createElement(g.EditableInput,{style:{input:ne.input,label:ne.label},label:"s",value:Math.round(this.props.hsl.s*100)+"%",onChange:this.handleChange})),t.default.createElement("div",{style:ne.field},t.default.createElement(g.EditableInput,{style:{input:ne.input,label:ne.label},label:"l",value:Math.round(this.props.hsl.l*100)+"%",onChange:this.handleChange})),t.default.createElement("div",{style:ne.alpha},t.default.createElement(g.EditableInput,{style:{input:ne.input,label:ne.label},label:"a",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),t.default.createElement("div",{style:ne.wrap,className:"flexbox-fix"},G,t.default.createElement("div",{style:ne.toggle},t.default.createElement("div",{style:ne.icon,onClick:this.toggleViews,ref:function(he){return V.icon=he}},t.default.createElement(E.default,{style:ne.svg,onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight}))))}}],[{key:"getDerivedStateFromProps",value:function(V,ne){return V.hsl.a!==1&&ne.view==="hex"?{view:"rgb"}:null}}]),ie}(t.default.Component);return q.defaultProps={view:"hex"},G1.default=q,G1}var Q1={},kR;function _de(){if(kR)return Q1;kR=1,Object.defineProperty(Q1,"__esModule",{value:!0}),Q1.ChromePointer=void 0;var n=za(),e=i(n),t=Ep(),r=i(t);function i(a){return a&&a.__esModule?a:{default:a}}var s=Q1.ChromePointer=function(){var o=(0,r.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return e.default.createElement("div",{style:o.picker})};return Q1.default=s,Q1}var q1={},TR;function bde(){if(TR)return q1;TR=1,Object.defineProperty(q1,"__esModule",{value:!0}),q1.ChromePointerCircle=void 0;var n=za(),e=i(n),t=Ep(),r=i(t);function i(a){return a&&a.__esModule?a:{default:a}}var s=q1.ChromePointerCircle=function(){var o=(0,r.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}});return e.default.createElement("div",{style:o.picker})};return q1.default=s,q1}var PR;function xde(){if(PR)return I1;PR=1,Object.defineProperty(I1,"__esModule",{value:!0}),I1.Chrome=void 0;var n=za(),e=z(n),t=xp(),r=z(t),i=Ep(),s=z(i),a=nG(),o=z(a),d=oG(),g=Cde(),b=z(g),E=_de(),S=z(E),I=bde(),P=z(I);function z(q){return q&&q.__esModule?q:{default:q}}var j=I1.Chrome=function(Y){var ie=Y.width,te=Y.onChange,V=Y.disableAlpha,ne=Y.rgb,G=Y.hsl,oe=Y.hsv,he=Y.hex,pe=Y.renderers,Ee=Y.styles,me=Ee===void 0?{}:Ee,Se=Y.className,De=Se===void 0?"":Se,be=Y.defaultView,at=(0,s.default)((0,o.default)({default:{picker:{width:ie,background:"#fff",borderRadius:"2px",boxShadow:"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",boxSizing:"initial",fontFamily:"Menlo"},saturation:{width:"100%",paddingBottom:"55%",position:"relative",borderRadius:"2px 2px 0 0",overflow:"hidden"},Saturation:{radius:"2px 2px 0 0"},body:{padding:"16px 16px 12px"},controls:{display:"flex"},color:{width:"32px"},swatch:{marginTop:"6px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{absolute:"0px 0px 0px 0px",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+ne.r+", "+ne.g+", "+ne.b+", "+ne.a+")",zIndex:"2"},toggles:{flex:"1"},hue:{height:"10px",position:"relative",marginBottom:"8px"},Hue:{radius:"2px"},alpha:{height:"10px",position:"relative"},Alpha:{radius:"2px"}},disableAlpha:{color:{width:"22px"},alpha:{display:"none"},hue:{marginBottom:"0px"},swatch:{width:"10px",height:"10px",marginTop:"0px"}}},me),{disableAlpha:V});return e.default.createElement("div",{style:at.picker,className:"chrome-picker "+De},e.default.createElement("div",{style:at.saturation},e.default.createElement(d.Saturation,{style:at.Saturation,hsl:G,hsv:oe,pointer:P.default,onChange:te})),e.default.createElement("div",{style:at.body},e.default.createElement("div",{style:at.controls,className:"flexbox-fix"},e.default.createElement("div",{style:at.color},e.default.createElement("div",{style:at.swatch},e.default.createElement("div",{style:at.active}),e.default.createElement(d.Checkboard,{renderers:pe}))),e.default.createElement("div",{style:at.toggles},e.default.createElement("div",{style:at.hue},e.default.createElement(d.Hue,{style:at.Hue,hsl:G,pointer:S.default,onChange:te})),e.default.createElement("div",{style:at.alpha},e.default.createElement(d.Alpha,{style:at.Alpha,rgb:ne,hsl:G,pointer:S.default,renderers:pe,onChange:te})))),e.default.createElement(b.default,{rgb:ne,hsl:G,hex:he,view:be,onChange:te,disableAlpha:V})))};return j.propTypes={width:r.default.oneOfType([r.default.string,r.default.number]),disableAlpha:r.default.bool,styles:r.default.object,defaultView:r.default.oneOf(["hex","rgb","hsl"])},j.defaultProps={width:225,disableAlpha:!1,styles:{}},I1.default=(0,d.ColorWrap)(j),I1}var wde=xde();const Mde=el(wde);function to(){var n="/home/runner/work/maputnik/maputnik/src/components/InputColor.tsx",e="cb6d03ea084207ffce2f89af246bc26074c13af7",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputColor.tsx",statementMap:{0:{start:{line:7,column:14},end:{line:7,column:23}},1:{start:{line:8,column:2},end:{line:8,column:56}},2:{start:{line:11,column:10},end:{line:13,column:3}},3:{start:{line:14,column:15},end:{line:14,column:19}},4:{start:{line:16,column:4},end:{line:16,column:17}},5:{start:{line:17,column:4},end:{line:17,column:75}},6:{start:{line:20,column:4},end:{line:20,column:27}},7:{start:{line:25,column:21},end:{line:39,column:3}},8:{start:{line:26,column:17},end:{line:26,column:32}},9:{start:{line:27,column:4},end:{line:38,column:5}},10:{start:{line:28,column:18},end:{line:28,column:46}},11:{start:{line:29,column:6},end:{line:32,column:8}},12:{start:{line:34,column:6},end:{line:37,column:8}},13:{start:{line:40,column:17},end:{line:42,column:3}},14:{start:{line:41,column:4},end:{line:41,column:62}},15:{start:{line:44,column:4},end:{line:49,column:5}},16:{start:{line:45,column:6},end:{line:45,column:43}},17:{start:{line:47,column:6},end:{line:47,column:49}},18:{start:{line:48,column:6},end:{line:48,column:39}},19:{start:{line:52,column:4},end:{line:52,column:47}},20:{start:{line:55,column:19},end:{line:55,column:42}},21:{start:{line:56,column:25},end:{line:56,column:44}},22:{start:{line:57,column:31},end:{line:63,column:5}},23:{start:{line:64,column:35},end:{line:99,column:5}},24:{start:{line:79,column:31},end:{line:79,column:67}},25:{start:{line:100,column:24},end:{line:102,column:5}},26:{start:{line:103,column:4},end:{line:122,column:9}},27:{start:{line:113,column:26},end:{line:113,column:49}},28:{start:{line:119,column:27},end:{line:119,column:56}}},fnMap:{0:{name:"formatColor",decl:{start:{line:6,column:9},end:{line:6,column:20}},loc:{start:{line:6,column:28},end:{line:9,column:1}},line:6},1:{name:"(anonymous_1)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:21},end:{line:18,column:3}},line:15},2:{name:"(anonymous_2)",decl:{start:{line:19,column:2},end:{line:19,column:3}},loc:{start:{line:19,column:21},end:{line:21,column:3}},line:19},3:{name:"(anonymous_3)",decl:{start:{line:25,column:21},end:{line:25,column:22}},loc:{start:{line:25,column:27},end:{line:39,column:3}},line:25},4:{name:"(anonymous_4)",decl:{start:{line:40,column:17},end:{line:40,column:18}},loc:{start:{line:40,column:23},end:{line:42,column:3}},line:40},5:{name:"(anonymous_5)",decl:{start:{line:43,column:2},end:{line:43,column:3}},loc:{start:{line:43,column:14},end:{line:50,column:3}},line:43},6:{name:"(anonymous_6)",decl:{start:{line:51,column:2},end:{line:51,column:3}},loc:{start:{line:51,column:14},end:{line:53,column:3}},line:51},7:{name:"(anonymous_7)",decl:{start:{line:54,column:2},end:{line:54,column:3}},loc:{start:{line:54,column:11},end:{line:123,column:3}},line:54},8:{name:"(anonymous_8)",decl:{start:{line:79,column:24},end:{line:79,column:25}},loc:{start:{line:79,column:31},end:{line:79,column:67}},line:79},9:{name:"(anonymous_9)",decl:{start:{line:113,column:15},end:{line:113,column:16}},loc:{start:{line:113,column:26},end:{line:113,column:49}},line:113},10:{name:"(anonymous_10)",decl:{start:{line:119,column:20},end:{line:119,column:21}},loc:{start:{line:119,column:27},end:{line:119,column:56}},line:119}},branchMap:{0:{loc:{start:{line:27,column:4},end:{line:38,column:5}},type:"if",locations:[{start:{line:27,column:4},end:{line:38,column:5}},{start:{line:33,column:11},end:{line:38,column:5}}],line:27},1:{loc:{start:{line:52,column:24},end:{line:52,column:45}},type:"cond-expr",locations:[{start:{line:52,column:35},end:{line:52,column:41}},{start:{line:52,column:44},end:{line:52,column:45}}],line:52},2:{loc:{start:{line:104,column:6},end:{line:104,column:39}},type:"binary-expr",locations:[{start:{line:104,column:6},end:{line:104,column:29}},{start:{line:104,column:33},end:{line:104,column:39}}],line:104},3:{loc:{start:{line:118,column:17},end:{line:118,column:57}},type:"cond-expr",locations:[{start:{line:118,column:36},end:{line:118,column:52}},{start:{line:118,column:55},end:{line:118,column:57}}],line:118}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputColor.tsx"],names:[],mappings:"AAsFmB,SAQb,KARa;AAtFnB,OAAO,WAAW;AAClB,OAAO,WAAW;AAClB,OAAO,kBAAkB;AAEzB,OAAO,YAAY;AAEnB,SAAS,YAAY,OAA4B;AAC/C,QAAM,MAAM,MAAM;AAClB,SAAO,QAAQ,IAAI,CAAC,KAAK,IAAI,CAAC,KAAK,IAAI,CAAC,KAAK,IAAI,CAAC;AACpD;AAaA,qBAAqB,mBAAmB,MAAM,UAA2B;AAAA,EACvE,QAAQ;AAAA,IACN,cAAc;AAAA,EAChB;AAAA,EACA,aAAsC;AAAA,EAEtC,YAAa,OAAwB;AACnC,UAAM,KAAK;AACX,SAAK,kBAAkB,OAAO,SAAS,KAAK,iBAAiB,MAAK,EAAE;AAAA,EACtE;AAAA,EAEA,gBAAgB,GAAW;AACzB,SAAK,MAAM,SAAS,CAAC;AAAA,EACvB;AAAA;AAAA;AAAA;AAAA,EAKA,mBAAmB,MAAM;AACvB,UAAM,OAAO,KAAK;AAClB,QAAG,MAAM;AACP,YAAM,MAAM,KAAK,sBAAsB;AACvC,aAAO;AAAA,QACL,KAAK,IAAI;AAAA,QACT,MAAM,IAAI,OAAO;AAAA,MACnB;AAAA,IACF,OAAO;AACL,aAAO;AAAA,QACL,KAAK;AAAA,QACL,MAAM;AAAA,MACR;AAAA,IACF;AAAA,EACF;AAAA,EAEA,eAAe,MAAM;AACnB,SAAK,SAAS,EAAE,cAAc,CAAC,KAAK,MAAM,aAAa,CAAC;AAAA,EAC1D;AAAA,EAEA,IAAI,QAAQ;AAEV,QAAI;AACF,aAAO,MAAM,KAAK,MAAM,KAAK,EAAE,IAAI;AAAA,IACrC,SACM,KAAK;AACT,cAAQ,KAAK,yBAAyB,GAAG;AACzC,aAAO,MAAM,kBAAkB;AAAA,IACjC;AAAA,EACF;AAAA,EAEA,SAAU,GAAW;AACnB,SAAK,MAAM,SAAS,MAAM,KAAK,SAAY,CAAC;AAAA,EAC9C;AAAA,EAEA,SAAS;AACP,UAAM,SAAS,KAAK,iBAAiB;AACrC,UAAM,eAAe,KAAK,MAAM,OAAO;AACvC,UAAM,qBAAqB;AAAA,MACzB,GAAG,aAAa;AAAA,MAChB,GAAG,aAAa;AAAA,MAChB,GAAG,aAAa;AAAA;AAAA,MAEhB,GAAG,aAAa;AAAA,IAClB;AAEA,UAAM,SAAS;AAAA,MAAC;AAAA;AAAA,QACd,WAAU;AAAA,QACV,OAAO;AAAA,UACL,UAAU;AAAA,UACV,QAAQ;AAAA,UACR,MAAM,OAAO;AAAA,UACb,KAAK,OAAO;AAAA,QACd;AAAA,QACA;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO;AAAA,cACP,UAAU,OAAK,KAAK,gBAAgB,YAAY,CAAC,CAAC;AAAA;AAAA,UACpD;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK;AAAA,cACd,OAAO;AAAA,gBACL,QAAQ;AAAA,gBACR,UAAU;AAAA,gBACV,KAAK;AAAA,gBACL,OAAO;AAAA,gBACP,QAAQ;AAAA,gBACR,MAAM;AAAA,cACR;AAAA;AAAA,UACF;AAAA;AAAA;AAAA,IACF;AAEA,UAAM,cAAc;AAAA,MAClB,iBAAiB,KAAK,MAAM;AAAA,IAC9B;AAEA,WAAO,qBAAC,SAAI,WAAU,0BACnB;AAAA,WAAK,MAAM,gBAAgB;AAAA,MAC5B,oBAAC,SAAI,WAAU,yBAAwB,OAAO,aAAa;AAAA,MAC3D;AAAA,QAAC;AAAA;AAAA,UACC,cAAY,KAAK,MAAM,YAAY;AAAA,UACnC,YAAW;AAAA,UACX,cAAa;AAAA,UACb,WAAU;AAAA,UACV,KAAK,CAAC,UAAU,KAAK,aAAa;AAAA,UAClC,SAAS,KAAK;AAAA,UACd,OAAO,KAAK,MAAM;AAAA,UAClB,MAAM,KAAK,MAAM;AAAA,UACjB,aAAa,KAAK,MAAM;AAAA,UACxB,OAAO,KAAK,MAAM,QAAQ,KAAK,MAAM,QAAQ;AAAA,UAC7C,UAAU,CAAC,MAAM,KAAK,SAAS,EAAE,OAAO,KAAK;AAAA;AAAA,MAC/C;AAAA,OACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"cb6d03ea084207ffce2f89af246bc26074c13af7"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return to=function(){return a},a}to();function Sde(n){to().f[0]++;const e=(to().s[0]++,n.rgb);return to().s[1]++,`rgba(${e.r}, ${e.g}, ${e.b}, ${e.a})`}class sG extends nr.Component{constructor(t){to().f[1]++,to().s[4]++;super(t);Pn(this,"state",(to().s[2]++,{pickerOpened:!1}));Pn(this,"colorInput",(to().s[3]++,null));Pn(this,"calcPickerOffset",(to().s[7]++,()=>{to().f[3]++;const t=(to().s[8]++,this.colorInput);if(to().s[9]++,t){to().b[0][0]++;const r=(to().s[10]++,t.getBoundingClientRect());return to().s[11]++,{top:r.top,left:r.left+196}}else return to().b[0][1]++,to().s[12]++,{top:160,left:555}}));Pn(this,"togglePicker",(to().s[13]++,()=>{to().f[4]++,to().s[14]++,this.setState({pickerOpened:!this.state.pickerOpened})}));to().s[5]++,this.onChangeNoCheck=C6.throttle(this.onChangeNoCheck,1e3/30)}onChangeNoCheck(t){to().f[2]++,to().s[6]++,this.props.onChange(t)}get color(){to().f[5]++,to().s[15]++;try{return to().s[16]++,W6(this.props.value).rgb()}catch(t){return to().s[17]++,console.warn("Error parsing color: ",t),to().s[18]++,W6("rgb(255,255,255)")}}onChange(t){to().f[6]++,to().s[19]++,this.props.onChange(t===""?(to().b[1][0]++,void 0):(to().b[1][1]++,t))}render(){to().f[7]++;const t=(to().s[20]++,this.calcPickerOffset()),r=(to().s[21]++,this.color.object()),i=(to().s[22]++,{r:r.r,g:r.g,b:r.b,a:r.alpha}),s=(to().s[23]++,ue.jsxs("div",{className:"maputnik-color-picker-offset",style:{position:"fixed",zIndex:1,left:t.left,top:t.top},children:[ue.jsx(Mde,{color:i,onChange:o=>(to().f[8]++,to().s[24]++,this.onChangeNoCheck(Sde(o)))}),ue.jsx("div",{className:"maputnik-color-picker-offset",onClick:this.togglePicker,style:{zIndex:-1,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}})]})),a=(to().s[25]++,{backgroundColor:this.props.value});return to().s[26]++,ue.jsxs("div",{className:"maputnik-color-wrapper",children:[(to().b[2][0]++,this.state.pickerOpened&&(to().b[2][1]++,s)),ue.jsx("div",{className:"maputnik-color-swatch",style:a}),ue.jsx("input",{"aria-label":this.props["aria-label"],spellCheck:"false",autoComplete:"off",className:"maputnik-color",ref:o=>(to().f[9]++,to().s[27]++,this.colorInput=o),onClick:this.togglePicker,style:this.props.style,name:this.props.name,placeholder:this.props.default,value:this.props.value?(to().b[3][0]++,this.props.value):(to().b[3][1]++,""),onChange:o=>(to().f[10]++,to().s[28]++,this.onChange(o.target.value))})]})}}function gn(){var n="/home/runner/work/maputnik/maputnik/src/components/InputNumber.tsx",e="ab7734237b4c4e642d73d3a00f670557b7ee2f29",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputNumber.tsx",statementMap:{0:{start:{line:5,column:24},end:{line:7,column:3}},1:{start:{line:8,column:19},end:{line:8,column:24}},2:{start:{line:10,column:4},end:{line:10,column:17}},3:{start:{line:11,column:4},end:{line:16,column:6}},4:{start:{line:19,column:4},end:{line:24,column:5}},5:{start:{line:20,column:6},end:{line:23,column:8}},6:{start:{line:25,column:4},end:{line:25,column:16}},7:{start:{line:28,column:18},end:{line:28,column:77}},8:{start:{line:29,column:23},end:{line:29,column:49}},9:{start:{line:30,column:4},end:{line:39,column:5}},10:{start:{line:31,column:6},end:{line:31,column:58}},11:{start:{line:31,column:31},end:{line:31,column:58}},12:{start:{line:32,column:6},end:{line:34,column:9}},13:{start:{line:35,column:11},end:{line:39,column:5}},14:{start:{line:36,column:6},end:{line:38,column:9}},15:{start:{line:40,column:4},end:{line:42,column:7}},16:{start:{line:45,column:4},end:{line:47,column:5}},17:{start:{line:46,column:6},end:{line:46,column:18}},18:{start:{line:48,column:18},end:{line:48,column:20}},19:{start:{line:49,column:4},end:{line:51,column:5}},20:{start:{line:50,column:6},end:{line:50,column:19}},21:{start:{line:52,column:4},end:{line:54,column:5}},22:{start:{line:53,column:6},end:{line:53,column:19}},23:{start:{line:55,column:4},end:{line:57,column:5}},24:{start:{line:56,column:6},end:{line:56,column:19}},25:{start:{line:58,column:4},end:{line:58,column:16}},26:{start:{line:60,column:15},end:{line:74,column:3}},27:{start:{line:61,column:4},end:{line:61,column:38}},28:{start:{line:62,column:4},end:{line:64,column:5}},29:{start:{line:63,column:6},end:{line:63,column:13}},30:{start:{line:65,column:4},end:{line:73,column:5}},31:{start:{line:66,column:6},end:{line:72,column:7}},32:{start:{line:67,column:8},end:{line:67,column:43}},33:{start:{line:68,column:8},end:{line:68,column:56}},34:{start:{line:70,column:8},end:{line:70,column:33}},35:{start:{line:71,column:8},end:{line:71,column:46}},36:{start:{line:75,column:18},end:{line:100,column:3}},37:{start:{line:76,column:16},end:{line:76,column:42}},38:{start:{line:77,column:17},end:{line:77,column:37}},39:{start:{line:78,column:21},end:{line:78,column:26}},40:{start:{line:79,column:4},end:{line:95,column:5}},41:{start:{line:80,column:19},end:{line:80,column:31}},42:{start:{line:81,column:6},end:{line:94,column:7}},43:{start:{line:82,column:8},end:{line:86,column:9}},44:{start:{line:83,column:10},end:{line:83,column:42}},45:{start:{line:85,column:10},end:{line:85,column:42}},46:{start:{line:87,column:8},end:{line:87,column:27}},47:{start:{line:89,column:8},end:{line:93,column:9}},48:{start:{line:90,column:10},end:{line:90,column:31}},49:{start:{line:92,column:10},end:{line:92,column:40}},50:{start:{line:96,column:4},end:{line:96,column:32}},51:{start:{line:97,column:4},end:{line:97,column:70}},52:{start:{line:98,column:4},end:{line:98,column:41}},53:{start:{line:99,column:4},end:{line:99,column:56}},54:{start:{line:99,column:29},end:{line:99,column:56}},55:{start:{line:102,column:4},end:{line:185,column:5}},56:{start:{line:103,column:20},end:{line:103,column:81}},57:{start:{line:104,column:27},end:{line:104,column:82}},58:{start:{line:106,column:6},end:{line:110,column:7}},59:{start:{line:107,column:8},end:{line:107,column:38}},60:{start:{line:109,column:8},end:{line:109,column:27}},61:{start:{line:111,column:6},end:{line:165,column:11}},62:{start:{line:124,column:14},end:{line:124,column:41}},63:{start:{line:127,column:14},end:{line:127,column:67}},64:{start:{line:130,column:14},end:{line:130,column:69}},65:{start:{line:133,column:14},end:{line:137,column:17}},66:{start:{line:152,column:14},end:{line:152,column:47}},67:{start:{line:155,column:14},end:{line:155,column:47}},68:{start:{line:158,column:14},end:{line:158,column:48}},69:{start:{line:159,column:14},end:{line:159,column:32}},70:{start:{line:167,column:20},end:{line:167,column:81}},71:{start:{line:168,column:6},end:{line:184,column:8}},72:{start:{line:176,column:27},end:{line:176,column:59}},73:{start:{line:178,column:12},end:{line:178,column:45}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:2},end:{line:9,column:3}},loc:{start:{line:9,column:21},end:{line:17,column:3}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:48},end:{line:26,column:3}},line:18},2:{name:"(anonymous_2)",decl:{start:{line:27,column:2},end:{line:27,column:3}},loc:{start:{line:27,column:24},end:{line:43,column:3}},line:27},3:{name:"(anonymous_3)",decl:{start:{line:44,column:2},end:{line:44,column:3}},loc:{start:{line:44,column:13},end:{line:59,column:3}},line:44},4:{name:"(anonymous_4)",decl:{start:{line:60,column:15},end:{line:60,column:16}},loc:{start:{line:60,column:21},end:{line:74,column:3}},line:60},5:{name:"(anonymous_5)",decl:{start:{line:75,column:18},end:{line:75,column:19}},loc:{start:{line:75,column:25},end:{line:100,column:3}},line:75},6:{name:"(anonymous_6)",decl:{start:{line:101,column:2},end:{line:101,column:3}},loc:{start:{line:101,column:11},end:{line:186,column:3}},line:101},7:{name:"(anonymous_7)",decl:{start:{line:123,column:23},end:{line:123,column:24}},loc:{start:{line:123,column:29},end:{line:125,column:13}},line:123},8:{name:"(anonymous_8)",decl:{start:{line:126,column:27},end:{line:126,column:28}},loc:{start:{line:126,column:33},end:{line:128,column:13}},line:126},9:{name:"(anonymous_9)",decl:{start:{line:129,column:25},end:{line:129,column:26}},loc:{start:{line:129,column:31},end:{line:131,column:13}},line:129},10:{name:"(anonymous_10)",decl:{start:{line:132,column:20},end:{line:132,column:21}},loc:{start:{line:132,column:26},end:{line:138,column:13}},line:132},11:{name:"(anonymous_11)",decl:{start:{line:151,column:21},end:{line:151,column:22}},loc:{start:{line:151,column:29},end:{line:153,column:13}},line:151},12:{name:"(anonymous_12)",decl:{start:{line:154,column:22},end:{line:154,column:23}},loc:{start:{line:154,column:29},end:{line:156,column:13}},line:154},13:{name:"(anonymous_13)",decl:{start:{line:157,column:20},end:{line:157,column:21}},loc:{start:{line:157,column:28},end:{line:160,column:13}},line:157},14:{name:"(anonymous_14)",decl:{start:{line:176,column:20},end:{line:176,column:21}},loc:{start:{line:176,column:27},end:{line:176,column:59}},line:176},15:{name:"(anonymous_15)",decl:{start:{line:177,column:19},end:{line:177,column:20}},loc:{start:{line:177,column:25},end:{line:179,column:11}},line:177}},branchMap:{0:{loc:{start:{line:19,column:4},end:{line:24,column:5}},type:"if",locations:[{start:{line:19,column:4},end:{line:24,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:19},1:{loc:{start:{line:19,column:8},end:{line:19,column:53}},type:"binary-expr",locations:[{start:{line:19,column:8},end:{line:19,column:22}},{start:{line:19,column:26},end:{line:19,column:53}}],line:19},2:{loc:{start:{line:28,column:18},end:{line:28,column:77}},type:"cond-expr",locations:[{start:{line:28,column:59},end:{line:28,column:65}},{start:{line:28,column:68},end:{line:28,column:77}}],line:28},3:{loc:{start:{line:28,column:18},end:{line:28,column:56}},type:"binary-expr",locations:[{start:{line:28,column:18},end:{line:28,column:33}},{start:{line:28,column:37},end:{line:28,column:56}}],line:28},4:{loc:{start:{line:30,column:4},end:{line:39,column:5}},type:"if",locations:[{start:{line:30,column:4},end:{line:39,column:5}},{start:{line:35,column:11},end:{line:39,column:5}}],line:30},5:{loc:{start:{line:30,column:8},end:{line:30,column:41}},type:"binary-expr",locations:[{start:{line:30,column:8},end:{line:30,column:27}},{start:{line:30,column:31},end:{line:30,column:41}}],line:30},6:{loc:{start:{line:31,column:6},end:{line:31,column:58}},type:"if",locations:[{start:{line:31,column:6},end:{line:31,column:58}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:31},7:{loc:{start:{line:35,column:11},end:{line:39,column:5}},type:"if",locations:[{start:{line:35,column:11},end:{line:39,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:35},8:{loc:{start:{line:35,column:15},end:{line:35,column:49}},type:"binary-expr",locations:[{start:{line:35,column:15},end:{line:35,column:35}},{start:{line:35,column:39},end:{line:35,column:49}}],line:35},9:{loc:{start:{line:41,column:18},end:{line:41,column:53}},type:"cond-expr",locations:[{start:{line:41,column:36},end:{line:41,column:42}},{start:{line:41,column:45},end:{line:41,column:53}}],line:41},10:{loc:{start:{line:45,column:4},end:{line:47,column:5}},type:"if",locations:[{start:{line:45,column:4},end:{line:47,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:45},11:{loc:{start:{line:49,column:4},end:{line:51,column:5}},type:"if",locations:[{start:{line:49,column:4},end:{line:51,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:49},12:{loc:{start:{line:52,column:4},end:{line:54,column:5}},type:"if",locations:[{start:{line:52,column:4},end:{line:54,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:52},13:{loc:{start:{line:52,column:8},end:{line:52,column:56}},type:"binary-expr",locations:[{start:{line:52,column:8},end:{line:52,column:30}},{start:{line:52,column:34},end:{line:52,column:56}}],line:52},14:{loc:{start:{line:55,column:4},end:{line:57,column:5}},type:"if",locations:[{start:{line:55,column:4},end:{line:57,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:55},15:{loc:{start:{line:55,column:8},end:{line:55,column:56}},type:"binary-expr",locations:[{start:{line:55,column:8},end:{line:55,column:30}},{start:{line:55,column:34},end:{line:55,column:56}}],line:55},16:{loc:{start:{line:62,column:4},end:{line:64,column:5}},type:"if",locations:[{start:{line:62,column:4},end:{line:64,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:62},17:{loc:{start:{line:65,column:4},end:{line:73,column:5}},type:"if",locations:[{start:{line:65,column:4},end:{line:73,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:65},18:{loc:{start:{line:66,column:6},end:{line:72,column:7}},type:"if",locations:[{start:{line:66,column:6},end:{line:72,column:7}},{start:{line:69,column:13},end:{line:72,column:7}}],line:66},19:{loc:{start:{line:79,column:4},end:{line:95,column:5}},type:"if",locations:[{start:{line:79,column:4},end:{line:95,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:79},20:{loc:{start:{line:81,column:6},end:{line:94,column:7}},type:"if",locations:[{start:{line:81,column:6},end:{line:94,column:7}},{start:{line:88,column:13},end:{line:94,column:7}}],line:81},21:{loc:{start:{line:82,column:8},end:{line:86,column:9}},type:"if",locations:[{start:{line:82,column:8},end:{line:86,column:9}},{start:{line:84,column:15},end:{line:86,column:9}}],line:82},22:{loc:{start:{line:89,column:8},end:{line:93,column:9}},type:"if",locations:[{start:{line:89,column:8},end:{line:93,column:9}},{start:{line:91,column:15},end:{line:93,column:9}}],line:89},23:{loc:{start:{line:99,column:4},end:{line:99,column:56}},type:"if",locations:[{start:{line:99,column:4},end:{line:99,column:56}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:99},24:{loc:{start:{line:102,column:4},end:{line:185,column:5}},type:"if",locations:[{start:{line:102,column:4},end:{line:185,column:5}},{start:{line:166,column:11},end:{line:185,column:5}}],line:102},25:{loc:{start:{line:102,column:8},end:{line:102,column:205}},type:"binary-expr",locations:[{start:{line:102,column:8},end:{line:102,column:63}},{start:{line:102,column:67},end:{line:102,column:122}},{start:{line:102,column:126},end:{line:102,column:151}},{start:{line:102,column:155},end:{line:102,column:180}},{start:{line:102,column:184},end:{line:102,column:205}}],line:102},26:{loc:{start:{line:103,column:20},end:{line:103,column:81}},type:"cond-expr",locations:[{start:{line:103,column:41},end:{line:103,column:62}},{start:{line:103,column:65},end:{line:103,column:81}}],line:103},27:{loc:{start:{line:104,column:27},end:{line:104,column:82}},type:"cond-expr",locations:[{start:{line:104,column:59},end:{line:104,column:61}},{start:{line:104,column:64},end:{line:104,column:82}}],line:104},28:{loc:{start:{line:106,column:6},end:{line:110,column:7}},type:"if",locations:[{start:{line:106,column:6},end:{line:110,column:7}},{start:{line:108,column:13},end:{line:110,column:7}}],line:106},29:{loc:{start:{line:121,column:19},end:{line:121,column:58}},type:"cond-expr",locations:[{start:{line:121,column:38},end:{line:121,column:50}},{start:{line:121,column:53},end:{line:121,column:58}}],line:121},30:{loc:{start:{line:150,column:19},end:{line:150,column:58}},type:"cond-expr",locations:[{start:{line:150,column:43},end:{line:150,column:45}},{start:{line:150,column:48},end:{line:150,column:58}}],line:150},31:{loc:{start:{line:167,column:20},end:{line:167,column:81}},type:"cond-expr",locations:[{start:{line:167,column:41},end:{line:167,column:62}},{start:{line:167,column:65},end:{line:167,column:81}}],line:167},32:{loc:{start:{line:175,column:17},end:{line:175,column:46}},type:"cond-expr",locations:[{start:{line:175,column:36},end:{line:175,column:38}},{start:{line:175,column:41},end:{line:175,column:46}}],line:175}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0,0,0,0],26:[0,0],27:[0,0],28:[0,0],29:[0,0],30:[0,0],31:[0,0],32:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputNumber.tsx"],names:[],mappings:"AA8Ka,SACL,KADK;AA9Kb,OAAO,WAAmC;AAC1C,OAAO,sBAAsB;AA0B7B,qBAAqB,oBAAoB,MAAM,UAA8C;AAAA,EAC3F,OAAO,eAAe;AAAA,IACpB,WAAW;AAAA,EACb;AAAA,EACA,iBAA0B;AAAA,EAE1B,YAAY,OAAyB;AACnC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,MAAM,CAAC,iBAAiB;AAAA,MACxB,SAAS;AAAA,MACT,OAAO,MAAM;AAAA,MACb,YAAY,MAAM;AAAA,IACpB;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAAmC,OAAyB;AAC1F,QAAI,CAAC,MAAM,WAAW,MAAM,UAAU,MAAM,OAAO;AACjD,aAAO;AAAA,QACL,OAAO,MAAM;AAAA,QACb,YAAY,MAAM;AAAA,MACpB;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAAA,EAEA,YAAY,UAAuC;AACjD,UAAM,QAAS,aAAa,MAAM,aAAa,SAC7C,SAAY,CAAC;AAEf,UAAM,aAAa,KAAK,MAAM,UAAU;AACxC,QAAG,KAAK,QAAQ,KAAK,KAAK,YAAY;AACpC,UAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,KAAK;AAClD,WAAK,SAAS;AAAA,QACZ;AAAA,MACF,CAAC;AAAA,IACH,WACS,CAAC,KAAK,QAAQ,KAAK,KAAK,YAAY;AAC3C,WAAK,SAAS;AAAA,QACZ,OAAO;AAAA,MACT,CAAC;AAAA,IACH;AAEA,SAAK,SAAS;AAAA,MACZ,YAAY,aAAa,KAAK,SAAY;AAAA,IAC5C,CAAC;AAAA,EACH;AAAA,EAEA,QAAQ,GAAgC;AACtC,QAAI,MAAM,QAAW;AACnB,aAAO;AAAA,IACT;AAEA,UAAM,QAAQ,CAAC;AACf,QAAG,MAAM,KAAK,GAAG;AACf,aAAO;AAAA,IACT;AAEA,QAAG,CAAC,MAAM,KAAK,MAAM,GAAI,KAAK,QAAQ,KAAK,MAAM,KAAM;AACrD,aAAO;AAAA,IACT;AAEA,QAAG,CAAC,MAAM,KAAK,MAAM,GAAI,KAAK,QAAQ,KAAK,MAAM,KAAM;AACrD,aAAO;AAAA,IACT;AAEA,WAAO;AAAA,EACT;AAAA,EAEA,aAAa,MAAM;AACjB,SAAK,SAAS,EAAC,SAAS,MAAK,CAAC;AAE9B,QAAG,CAAC,KAAK,MAAM,OAAO;AACpB;AAAA,IACF;AAGA,QAAI,CAAC,KAAK,QAAQ,KAAK,MAAM,KAAK,GAAG;AACnC,UAAG,KAAK,QAAQ,KAAK,MAAM,KAAK,GAAG;AACjC,aAAK,YAAY,KAAK,MAAM,KAAK;AACjC,aAAK,SAAS,EAAC,YAAY,KAAK,MAAM,MAAK,CAAC;AAAA,MAC9C,OAAO;AACL,aAAK,YAAY,MAAS;AAC1B,aAAK,SAAS,EAAC,YAAY,OAAS,CAAC;AAAA,MACvC;AAAA,IACF;AAAA,EACF;AAAA,EAEA,gBAAgB,CAAC,MAAqE;AACpF,QAAI,QAAQ,WAAW,EAAE,OAAO,KAAK;AACrC,UAAM,OAAO,KAAK,MAAM;AACxB,QAAI,aAAa;AAEjB,QAAG,MAAM;AAEP,YAAM,OAAO,QAAQ;AAGrB,UAAI,KAAK,gBAAgB;AAKvB,YAAI,QAAQ,CAAC,KAAK,MAAM,YAAa;AACnC,kBAAQ,KAAK,MAAM,QAAS;AAAA,QAC9B,OACK;AACH,kBAAQ,KAAK,MAAM,QAAS;AAAA,QAC9B;AACA,qBAAa;AAAA,MACf,OACK;AACH,YAAI,OAAO,OAAK,GAAG;AACjB,kBAAQ,QAAQ;AAAA,QAClB,OACK;AACH,kBAAQ,SAAS,OAAO;AAAA,QAC1B;AAAA,MACF;AAAA,IACF;AAEA,SAAK,iBAAiB;AAGtB,YAAQ,KAAK,IAAI,KAAK,MAAM,KAAM,KAAK,IAAI,KAAK,MAAM,KAAM,KAAK,CAAC;AAElE,SAAK,SAAS,EAAC,OAAO,WAAU,CAAC;AACjC,QAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,KAAK;AAAA,EACpD;AAAA,EAEA,SAAS;AACP,QACE,OAAO,UAAU,eAAe,KAAK,KAAK,OAAO,KAAK,KACtD,OAAO,UAAU,eAAe,KAAK,KAAK,OAAO,KAAK,KACtD,KAAK,MAAM,QAAQ,UAAa,KAAK,MAAM,QAAQ,UACnD,KAAK,MAAM,YACX;AACA,YAAM,QAAQ,KAAK,MAAM,UAAU,KAAK,MAAM,aAAa,KAAK,MAAM;AACtE,YAAM,eAAe,KAAK,MAAM,YAAY,SAAY,KAAK,KAAK,MAAM;AACxE,UAAI;AACJ,UAAI,KAAK,MAAM,cAAc;AAC3B,qBAAa,KAAK,MAAM;AAAA,MAC1B,OACK;AACH,qBAAa;AAAA,MACf;AAEA,aAAO,qBAAC,SAAI,WAAU,6BACpB;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,WAAU;AAAA,YAEV,MAAK;AAAA,YACL,KAAK,KAAK,MAAM;AAAA,YAChB,KAAK,KAAK,MAAM;AAAA,YAChB,MAAK;AAAA,YACL,YAAW;AAAA,YACX,OAAO,UAAU,SAAY,eAAe;AAAA,YAC5C,UAAU,KAAK;AAAA,YACf,WAAW,MAAM;AACf,mBAAK,iBAAiB;AAAA,YACxB;AAAA,YACA,eAAe,MAAM;AACnB,mBAAK,SAAS,EAAC,SAAS,MAAM,cAAc,KAAI,CAAC;AAAA,YACnD;AAAA,YACA,aAAa,MAAM;AAEjB,mBAAK,SAAS,EAAC,SAAS,OAAO,cAAc,MAAK,CAAC;AAAA,YACrD;AAAA,YACA,QAAQ,MAAM;AACZ,mBAAK,SAAS;AAAA,gBACZ,SAAS;AAAA,gBACT,cAAc;AAAA,gBACd,YAAY,KAAK,MAAM;AAAA,cACzB,CAAC;AAAA,YACH;AAAA,YACA,eAAa,KAAK,MAAM,aAAa,IAAI;AAAA;AAAA,UAzBrC;AAAA,QA0BN;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YAEC,MAAK;AAAA,YACL,YAAW;AAAA,YACX,WAAU;AAAA,YACV,aAAa,KAAK,MAAM,SAAS,SAAS;AAAA,YAC1C,OAAO,eAAe,SAAY,KAAK;AAAA,YACvC,SAAS,QAAM;AACb,mBAAK,SAAS,EAAC,SAAS,KAAI,CAAC;AAAA,YAC/B;AAAA,YACA,UAAU,OAAK;AACb,mBAAK,YAAY,EAAE,OAAO,KAAK;AAAA,YACjC;AAAA,YACA,QAAQ,QAAM;AACZ,mBAAK,SAAS,EAAC,SAAS,MAAK,CAAC;AAC9B,mBAAK,WAAW;AAAA,YAClB;AAAA,YACA,eAAa,KAAK,MAAM,aAAa,IAAI;AAAA;AAAA,UAhBrC;AAAA,QAkBN;AAAA,SACF;AAAA,IACF,OACK;AACH,YAAM,QAAQ,KAAK,MAAM,UAAU,KAAK,MAAM,aAAa,KAAK,MAAM;AAEtE,aAAO;AAAA,QAAC;AAAA;AAAA,UACN,cAAY,KAAK,MAAM,YAAY;AAAA,UACnC,YAAW;AAAA,UACX,WAAU;AAAA,UACV,aAAa,KAAK,MAAM,SAAS,SAAS;AAAA,UAC1C,OAAO,UAAU,SAAY,KAAK;AAAA,UAClC,UAAU,OAAK,KAAK,YAAY,EAAE,OAAO,KAAK;AAAA,UAC9C,SAAS,MAAM;AACb,iBAAK,SAAS,EAAC,SAAS,KAAI,CAAC;AAAA,UAC/B;AAAA,UACA,QAAQ,KAAK;AAAA,UACb,UAAU,KAAK,MAAM;AAAA,UACrB,eAAa,KAAK,MAAM,aAAa;AAAA;AAAA,MACvC;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ab7734237b4c4e642d73d3a00f670557b7ee2f29"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return gn=function(){return a},a}gn();class um extends nr.Component{constructor(t){gn().f[0]++,gn().s[2]++;super(t);Pn(this,"_keyboardEvent",(gn().s[1]++,!1));Pn(this,"resetValue",(gn().s[26]++,()=>{if(gn().f[4]++,gn().s[27]++,this.setState({editing:!1}),gn().s[28]++,this.state.value)gn().b[16][1]++;else{gn().b[16][0]++,gn().s[29]++;return}gn().s[30]++,this.isValid(this.state.value)?gn().b[17][1]++:(gn().b[17][0]++,gn().s[31]++,this.isValid(this.props.value)?(gn().b[18][0]++,gn().s[32]++,this.changeValue(this.props.value),gn().s[33]++,this.setState({dirtyValue:this.props.value})):(gn().b[18][1]++,gn().s[34]++,this.changeValue(void 0),gn().s[35]++,this.setState({dirtyValue:void 0})))}));Pn(this,"onChangeRange",(gn().s[36]++,t=>{gn().f[5]++;let r=(gn().s[37]++,parseFloat(t.target.value));const i=(gn().s[38]++,this.props.rangeStep);let s=(gn().s[39]++,r);if(gn().s[40]++,i){gn().b[19][0]++;const a=(gn().s[41]++,r%i);gn().s[42]++,this._keyboardEvent?(gn().b[20][0]++,gn().s[43]++,r<+this.state.dirtyValue?(gn().b[21][0]++,gn().s[44]++,r=this.state.value-i):(gn().b[21][1]++,gn().s[45]++,r=this.state.value+i),gn().s[46]++,s=r):(gn().b[20][1]++,gn().s[47]++,a<i/2?(gn().b[22][0]++,gn().s[48]++,r=r-a):(gn().b[22][1]++,gn().s[49]++,r=r+(i-a)))}else gn().b[19][1]++;gn().s[50]++,this._keyboardEvent=!1,gn().s[51]++,r=Math.max(this.props.min,Math.min(this.props.max,r)),gn().s[52]++,this.setState({value:r,dirtyValue:s}),gn().s[53]++,this.props.onChange?(gn().b[23][0]++,gn().s[54]++,this.props.onChange(r)):gn().b[23][1]++}));gn().s[3]++,this.state={uuid:+Ny(),editing:!1,value:t.value,dirtyValue:t.value}}static getDerivedStateFromProps(t,r){return gn().f[1]++,gn().s[4]++,gn().b[1][0]++,!r.editing&&(gn().b[1][1]++,t.value!==r.value)?(gn().b[0][0]++,gn().s[5]++,{value:t.value,dirtyValue:t.value}):(gn().b[0][1]++,gn().s[6]++,null)}changeValue(t){gn().f[2]++;const r=(gn().s[7]++,gn().b[3][0]++,t===""||(gn().b[3][1]++,t===void 0)?(gn().b[2][0]++,void 0):(gn().b[2][1]++,+t)),i=(gn().s[8]++,this.props.value!==r);gn().s[9]++,gn().b[5][0]++,this.isValid(r)&&(gn().b[5][1]++,i)?(gn().b[4][0]++,gn().s[10]++,this.props.onChange?(gn().b[6][0]++,gn().s[11]++,this.props.onChange(r)):gn().b[6][1]++,gn().s[12]++,this.setState({value:r})):(gn().b[4][1]++,gn().s[13]++,gn().b[8][0]++,!this.isValid(r)&&(gn().b[8][1]++,i)?(gn().b[7][0]++,gn().s[14]++,this.setState({value:void 0})):gn().b[7][1]++),gn().s[15]++,this.setState({dirtyValue:t===""?(gn().b[9][0]++,void 0):(gn().b[9][1]++,t)})}isValid(t){if(gn().f[3]++,gn().s[16]++,t===void 0)return gn().b[10][0]++,gn().s[17]++,!0;gn().b[10][1]++;const r=(gn().s[18]++,+t);return gn().s[19]++,isNaN(r)?(gn().b[11][0]++,gn().s[20]++,!1):(gn().b[11][1]++,gn().s[21]++,gn().b[13][0]++,!isNaN(this.props.min)&&(gn().b[13][1]++,r<this.props.min)?(gn().b[12][0]++,gn().s[22]++,!1):(gn().b[12][1]++,gn().s[23]++,gn().b[15][0]++,!isNaN(this.props.max)&&(gn().b[15][1]++,r>this.props.max)?(gn().b[14][0]++,gn().s[24]++,!1):(gn().b[14][1]++,gn().s[25]++,!0)))}render(){var t,r;if(gn().f[6]++,gn().s[55]++,gn().b[25][0]++,Object.prototype.hasOwnProperty.call(this.props,"min")&&(gn().b[25][1]++,Object.prototype.hasOwnProperty.call(this.props,"max"))&&(gn().b[25][2]++,this.props.min!==void 0)&&(gn().b[25][3]++,this.props.max!==void 0)&&(gn().b[25][4]++,this.props.allowRange)){gn().b[24][0]++;const i=(gn().s[56]++,this.state.editing?(gn().b[26][0]++,this.state.dirtyValue):(gn().b[26][1]++,this.state.value)),s=(gn().s[57]++,this.props.default===void 0?(gn().b[27][0]++,""):(gn().b[27][1]++,this.props.default));let a;return gn().s[58]++,this.state.editingRange?(gn().b[28][0]++,gn().s[59]++,a=this.state.value):(gn().b[28][1]++,gn().s[60]++,a=i),gn().s[61]++,ue.jsxs("div",{className:"maputnik-number-container",children:[ue.jsx("input",{className:"maputnik-number-range",type:"range",max:this.props.max,min:this.props.min,step:"any",spellCheck:"false",value:i===void 0?(gn().b[29][0]++,s):(gn().b[29][1]++,i),onChange:this.onChangeRange,onKeyDown:()=>{gn().f[7]++,gn().s[62]++,this._keyboardEvent=!0},onPointerDown:()=>{gn().f[8]++,gn().s[63]++,this.setState({editing:!0,editingRange:!0})},onPointerUp:()=>{gn().f[9]++,gn().s[64]++,this.setState({editing:!1,editingRange:!1})},onBlur:()=>{gn().f[10]++,gn().s[65]++,this.setState({editing:!1,editingRange:!1,dirtyValue:this.state.value})},"data-wd-key":this.props["data-wd-key"]+"-range"},"range"),ue.jsx("input",{type:"text",spellCheck:"false",className:"maputnik-number",placeholder:(t=this.props.default)==null?void 0:t.toString(),value:a===void 0?(gn().b[30][0]++,""):(gn().b[30][1]++,a),onFocus:o=>{gn().f[11]++,gn().s[66]++,this.setState({editing:!0})},onChange:o=>{gn().f[12]++,gn().s[67]++,this.changeValue(o.target.value)},onBlur:o=>{gn().f[13]++,gn().s[68]++,this.setState({editing:!1}),gn().s[69]++,this.resetValue()},"data-wd-key":this.props["data-wd-key"]+"-text"},"text")]})}else{gn().b[24][1]++;const i=(gn().s[70]++,this.state.editing?(gn().b[31][0]++,this.state.dirtyValue):(gn().b[31][1]++,this.state.value));return gn().s[71]++,ue.jsx("input",{"aria-label":this.props["aria-label"],spellCheck:"false",className:"maputnik-number",placeholder:(r=this.props.default)==null?void 0:r.toString(),value:i===void 0?(gn().b[32][0]++,""):(gn().b[32][1]++,i),onChange:s=>(gn().f[14]++,gn().s[72]++,this.changeValue(s.target.value)),onFocus:()=>{gn().f[15]++,gn().s[73]++,this.setState({editing:!0})},onBlur:this.resetValue,required:this.props.required,"data-wd-key":this.props["data-wd-key"]})}}}Pn(um,"defaultProps",(gn().s[0]++,{rangeStep:1}));function Wp(){var n="/home/runner/work/maputnik/maputnik/src/components/InputCheckbox.tsx",e="e85f7924976070cbab7795bce9cf0e191e4a6b5e",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputCheckbox.tsx",statementMap:{0:{start:{line:4,column:24},end:{line:6,column:3}},1:{start:{line:7,column:13},end:{line:9,column:3}},2:{start:{line:8,column:4},end:{line:8,column:43}},3:{start:{line:11,column:4},end:{line:26,column:9}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:13},end:{line:7,column:14}},loc:{start:{line:7,column:19},end:{line:9,column:3}},line:7},1:{name:"(anonymous_1)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:27,column:3}},line:10}},branchMap:{0:{loc:{start:{line:24,column:17},end:{line:24,column:53}},type:"cond-expr",locations:[{start:{line:24,column:36},end:{line:24,column:44}},{start:{line:24,column:47},end:{line:24,column:53}}],line:24}},s:{0:0,1:0,2:0,3:0},f:{0:0,1:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputCheckbox.tsx"],names:[],mappings:"AAkBW,SACL,KADK;AAlBX,OAAO,WAAW;AAQlB,qBAAqB,sBAAsB,MAAM,UAA8B;AAAA,EAC7E,OAAO,eAAe;AAAA,IACpB,OAAO;AAAA,EACT;AAAA,EAEA,WAAW,MAAM;AACf,SAAK,MAAM,SAAS,CAAC,KAAK,MAAM,KAAK;AAAA,EACvC;AAAA,EAEA,SAAS;AACP,WAAO,qBAAC,SAAI,WAAU,6BACpB;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,MAAK;AAAA,UACL,OAAO,KAAK,MAAM;AAAA,UAClB,UAAU,KAAK;AAAA,UACf,SAAS,KAAK;AAAA,UACd,SAAS,KAAK,MAAM;AAAA;AAAA,MACtB;AAAA,MACA,oBAAC,SAAI,WAAU,yBACb,8BAAC,SAAI,OAAO;AAAA,QACV,SAAS,KAAK,MAAM,QAAQ,WAAW;AAAA,MACzC,GAAG,WAAU,0BAAyB,SAAQ,aAC5C,8BAAC,UAAK,GAAE,2CAA0C,GACpD,GACF;AAAA,OACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e85f7924976070cbab7795bce9cf0e191e4a6b5e"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Wp=function(){return a},a}Wp();class uI extends nr.Component{constructor(){super(...arguments);Pn(this,"onChange",(Wp().s[1]++,()=>{Wp().f[0]++,Wp().s[2]++,this.props.onChange(!this.props.value)}))}render(){return Wp().f[1]++,Wp().s[3]++,ue.jsxs("div",{className:"maputnik-checkbox-wrapper",children:[ue.jsx("input",{className:"maputnik-checkbox",type:"checkbox",style:this.props.style,onChange:this.onChange,onClick:this.onChange,checked:this.props.value}),ue.jsx("div",{className:"maputnik-checkbox-box",children:ue.jsx("svg",{style:{display:this.props.value?(Wp().b[0][0]++,"inline"):(Wp().b[0][1]++,"none")},className:"maputnik-checkbox-icon",viewBox:"0 0 32 32",children:ue.jsx("path",{d:"M1 14 L5 10 L13 18 L27 4 L31 8 L13 26 z"})})})]})}}Pn(uI,"defaultProps",(Wp().s[0]++,{value:!1}));function Vr(){var n="/home/runner/work/maputnik/maputnik/src/components/InputArray.tsx",e="9ed81d69001830f70ea45ac1502cde5125167d89",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputArray.tsx",statementMap:{0:{start:{line:6,column:24},end:{line:9,column:3}},1:{start:{line:11,column:4},end:{line:11,column:17}},2:{start:{line:12,column:4},end:{line:16,column:6}},3:{start:{line:19,column:18},end:{line:19,column:20}},4:{start:{line:20,column:30},end:{line:20,column:62}},5:{start:{line:21,column:4},end:{line:28,column:7}},6:{start:{line:22,column:6},end:{line:27,column:7}},7:{start:{line:23,column:8},end:{line:23,column:34}},8:{start:{line:25,column:8},end:{line:25,column:34}},9:{start:{line:26,column:8},end:{line:26,column:46}},10:{start:{line:29,column:4},end:{line:32,column:6}},11:{start:{line:35,column:4},end:{line:38,column:7}},12:{start:{line:36,column:18},end:{line:36,column:26}},13:{start:{line:37,column:6},end:{line:37,column:45}},14:{start:{line:41,column:18},end:{line:41,column:43}},15:{start:{line:42,column:4},end:{line:42,column:26}},16:{start:{line:43,column:4},end:{line:51,column:7}},17:{start:{line:46,column:6},end:{line:50,column:7}},18:{start:{line:47,column:8},end:{line:47,column:35}},19:{start:{line:48,column:13},end:{line:50,column:7}},20:{start:{line:49,column:8},end:{line:49,column:36}},21:{start:{line:54,column:22},end:{line:54,column:32}},22:{start:{line:55,column:27},end:{line:57,column:6}},23:{start:{line:56,column:6},end:{line:56,column:42}},24:{start:{line:58,column:19},end:{line:84,column:6}},25:{start:{line:59,column:6},end:{line:83,column:7}},26:{start:{line:60,column:8},end:{line:70,column:10}},27:{start:{line:66,column:29},end:{line:66,column:51}},28:{start:{line:72,column:8},end:{line:82,column:10}},29:{start:{line:85,column:4},end:{line:85,column:89}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:21},end:{line:17,column:3}},line:10},1:{name:"(anonymous_1)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:48},end:{line:33,column:3}},line:18},2:{name:"(anonymous_2)",decl:{start:{line:21,column:39},end:{line:21,column:40}},loc:{start:{line:21,column:49},end:{line:28,column:5}},line:21},3:{name:"(anonymous_3)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:20},end:{line:39,column:3}},line:34},4:{name:"(anonymous_4)",decl:{start:{line:35,column:53},end:{line:35,column:54}},loc:{start:{line:35,column:63},end:{line:38,column:5}},line:35},5:{name:"(anonymous_5)",decl:{start:{line:40,column:2},end:{line:40,column:3}},loc:{start:{line:40,column:29},end:{line:52,column:3}},line:40},6:{name:"(anonymous_6)",decl:{start:{line:45,column:7},end:{line:45,column:8}},loc:{start:{line:45,column:13},end:{line:51,column:5}},line:45},7:{name:"(anonymous_7)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:11},end:{line:86,column:3}},line:53},8:{name:"(anonymous_8)",decl:{start:{line:55,column:60},end:{line:55,column:61}},loc:{start:{line:55,column:69},end:{line:57,column:5}},line:55},9:{name:"(anonymous_9)",decl:{start:{line:58,column:59},end:{line:58,column:60}},loc:{start:{line:58,column:69},end:{line:84,column:5}},line:58},10:{name:"(anonymous_10)",decl:{start:{line:66,column:22},end:{line:66,column:23}},loc:{start:{line:66,column:29},end:{line:66,column:51}},line:66}},branchMap:{0:{loc:{start:{line:22,column:6},end:{line:27,column:7}},type:"if",locations:[{start:{line:22,column:6},end:{line:27,column:7}},{start:{line:24,column:13},end:{line:27,column:7}}],line:22},1:{loc:{start:{line:37,column:15},end:{line:37,column:43}},type:"binary-expr",locations:[{start:{line:37,column:15},end:{line:37,column:29}},{start:{line:37,column:33},end:{line:37,column:43}}],line:37},2:{loc:{start:{line:46,column:6},end:{line:50,column:7}},type:"if",locations:[{start:{line:46,column:6},end:{line:50,column:7}},{start:{line:48,column:13},end:{line:50,column:7}}],line:46},3:{loc:{start:{line:46,column:10},end:{line:46,column:55}},type:"binary-expr",locations:[{start:{line:46,column:10},end:{line:46,column:32}},{start:{line:46,column:36},end:{line:46,column:55}}],line:46},4:{loc:{start:{line:48,column:13},end:{line:50,column:7}},type:"if",locations:[{start:{line:48,column:13},end:{line:50,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:48},5:{loc:{start:{line:55,column:27},end:{line:57,column:6}},type:"binary-expr",locations:[{start:{line:55,column:27},end:{line:55,column:43}},{start:{line:55,column:47},end:{line:57,column:6}}],line:55},6:{loc:{start:{line:56,column:13},end:{line:56,column:41}},type:"binary-expr",locations:[{start:{line:56,column:13},end:{line:56,column:23}},{start:{line:56,column:27},end:{line:56,column:41}}],line:56},7:{loc:{start:{line:59,column:6},end:{line:83,column:7}},type:"if",locations:[{start:{line:59,column:6},end:{line:83,column:7}},{start:{line:71,column:13},end:{line:83,column:7}}],line:59},8:{loc:{start:{line:63,column:21},end:{line:63,column:91}},type:"cond-expr",locations:[{start:{line:63,column:61},end:{line:63,column:67}},{start:{line:63,column:70},end:{line:63,column:91}}],line:63},9:{loc:{start:{line:63,column:21},end:{line:63,column:58}},type:"binary-expr",locations:[{start:{line:63,column:21},end:{line:63,column:35}},{start:{line:63,column:39},end:{line:63,column:58}}],line:63},10:{loc:{start:{line:65,column:22},end:{line:65,column:51}},type:"cond-expr",locations:[{start:{line:65,column:39},end:{line:65,column:43}},{start:{line:65,column:46},end:{line:65,column:51}}],line:65},11:{loc:{start:{line:67,column:26},end:{line:67,column:70}},type:"binary-expr",locations:[{start:{line:67,column:26},end:{line:67,column:50}},{start:{line:67,column:54},end:{line:67,column:70}}],line:67},12:{loc:{start:{line:75,column:21},end:{line:75,column:91}},type:"cond-expr",locations:[{start:{line:75,column:61},end:{line:75,column:67}},{start:{line:75,column:70},end:{line:75,column:91}}],line:75},13:{loc:{start:{line:75,column:21},end:{line:75,column:58}},type:"binary-expr",locations:[{start:{line:75,column:21},end:{line:75,column:35}},{start:{line:75,column:39},end:{line:75,column:58}}],line:75},14:{loc:{start:{line:77,column:22},end:{line:77,column:51}},type:"cond-expr",locations:[{start:{line:77,column:39},end:{line:77,column:43}},{start:{line:77,column:46},end:{line:77,column:51}}],line:77},15:{loc:{start:{line:79,column:26},end:{line:79,column:70}},type:"binary-expr",locations:[{start:{line:79,column:26},end:{line:79,column:50}},{start:{line:79,column:54},end:{line:79,column:70}}],line:79}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputArray.tsx"],names:[],mappings:"AA0Fe;AA1Ff,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AAiBxB,qBAAqB,mBAAmB,MAAM,UAA4C;AAAA,EACxF,OAAO,eAAe;AAAA,IACpB,OAAO,CAAC;AAAA,IACR,SAAS,CAAC;AAAA,EACZ;AAAA,EAEA,YAAa,OAAwB;AACnC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,OAAO,KAAK,MAAM,MAAM,MAAM,CAAC;AAAA;AAAA,MAE/B,mBAAmB,KAAK,MAAM,MAAM,MAAM,CAAC;AAAA,IAC7C;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAAkC,OAAwB;AACxF,UAAM,QAAe,CAAC;AACtB,UAAM,oBAAoB,MAAM,kBAAkB,MAAM,CAAC;AAEzD,UAAM,MAAM,MAAM,EAAE,KAAK,IAAI,EAAE,IAAI,CAAC,GAAG,MAAM;AAC3C,UAAI,MAAM,MAAM,CAAC,MAAM,MAAM,kBAAkB,CAAC,GAAG;AACjD,cAAM,CAAC,IAAI,MAAM,MAAM,CAAC;AAAA,MAC1B,OACK;AACH,cAAM,CAAC,IAAI,MAAM,MAAM,CAAC;AACxB,0BAAkB,CAAC,IAAI,MAAM,MAAM,CAAC;AAAA,MACtC;AAAA,IACF,CAAC;AAED,WAAO;AAAA,MACL;AAAA,MACA;AAAA,IACF;AAAA,EACF;AAAA,EAEA,WAAW,OAAkB;AAC3B,WAAO,MAAM,KAAK,MAAM,MAAM,EAAE,KAAK,IAAI,EAAE,MAAM,CAAC,GAAG,MAAM;AACzD,YAAM,MAAM,MAAM,CAAC;AACnB,aAAO,EAAE,QAAQ,UAAa,QAAQ;AAAA,IACxC,CAAC;AAAA,EACH;AAAA,EAEA,YAAY,KAAa,UAAuC;AAC9D,UAAM,QAAQ,KAAK,MAAM,MAAM,MAAM,CAAC;AACtC,UAAM,GAAG,IAAI;AAEb,SAAK,SAAS;AAAA,MACZ;AAAA,IACF,GAAG,MAAM;AACP,UAAI,KAAK,WAAW,KAAK,KAAK,KAAK,MAAM,UAAU;AACjD,aAAK,MAAM,SAAS,KAAK;AAAA,MAC3B,WACS,KAAK,MAAM,UAAS;AAE3B,aAAK,MAAM,SAAS,MAAS;AAAA,MAC/B;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,MAAK,IAAI,KAAK;AAErB,UAAM,iBACJ,MAAM,SAAS,KACf,CAAC,MAAM,MAAM,SAAO;AAClB,aAAQ,QAAQ,MAAM,QAAQ;AAAA,IAChC,CAAC;AAGH,UAAM,SAAS,MAAM,KAAK,MAAM,MAAM,EAAE,KAAK,IAAI,EAAE,IAAI,CAAC,GAAG,MAAM;AAC/D,UAAG,KAAK,MAAM,SAAS,UAAU;AAC/B,eAAO;AAAA,UAAC;AAAA;AAAA,YAEN,SAAS,kBAAkB,CAAC,KAAK,MAAM,UAAU,SAAY,KAAK,MAAM,QAAQ,CAAC;AAAA,YACjF,OAAO,MAAM,CAAC;AAAA,YACd,UAAU,iBAAiB,OAAO;AAAA,YAClC,UAAU,CAAC,MAAM,KAAK,YAAY,GAAG,CAAC;AAAA,YACtC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,UAL9C;AAAA,QAMP;AAAA,MACF,OAAO;AACL,eAAO;AAAA,UAAC;AAAA;AAAA,YAEN,SAAS,kBAAkB,CAAC,KAAK,MAAM,UAAU,SAAY,KAAK,MAAM,QAAQ,CAAC;AAAA,YACjF,OAAO,MAAM,CAAC;AAAA,YACd,UAAU,iBAAiB,OAAO;AAAA,YAClC,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,UAL9C;AAAA,QAMP;AAAA,MACF;AAAA,IACF,CAAC;AAED,WACE,oBAAC,SAAI,WAAU,kBACZ,kBACH;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"9ed81d69001830f70ea45ac1502cde5125167d89"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Vr=function(){return a},a}Vr();var p6;let aG=(p6=class extends nr.Component{constructor(e){Vr().f[0]++,Vr().s[1]++,super(e),Vr().s[2]++,this.state={value:this.props.value.slice(0),initialPropsValue:this.props.value.slice(0)}}static getDerivedStateFromProps(e,t){Vr().f[1]++;const r=(Vr().s[3]++,[]),i=(Vr().s[4]++,t.initialPropsValue.slice(0));return Vr().s[5]++,Array(e.length).fill(null).map((s,a)=>{Vr().f[2]++,Vr().s[6]++,e.value[a]===t.initialPropsValue[a]?(Vr().b[0][0]++,Vr().s[7]++,r[a]=t.value[a]):(Vr().b[0][1]++,Vr().s[8]++,r[a]=t.value[a],Vr().s[9]++,i[a]=t.value[a])}),Vr().s[10]++,{value:r,initialPropsValue:i}}isComplete(e){return Vr().f[3]++,Vr().s[11]++,Array(this.props.length).fill(null).every((t,r)=>{Vr().f[4]++;const i=(Vr().s[12]++,e[r]);return Vr().s[13]++,Vr().b[1][0]++,!(i===void 0||(Vr().b[1][1]++,i===""))})}changeValue(e,t){Vr().f[5]++;const r=(Vr().s[14]++,this.state.value.slice(0));Vr().s[15]++,r[e]=t,Vr().s[16]++,this.setState({value:r},()=>{Vr().f[6]++,Vr().s[17]++,Vr().b[3][0]++,this.isComplete(r)&&(Vr().b[3][1]++,this.props.onChange)?(Vr().b[2][0]++,Vr().s[18]++,this.props.onChange(r)):(Vr().b[2][1]++,Vr().s[19]++,this.props.onChange?(Vr().b[4][0]++,Vr().s[20]++,this.props.onChange(void 0)):Vr().b[4][1]++)})}render(){Vr().f[7]++;const{value:e}=(Vr().s[21]++,this.state),t=(Vr().s[22]++,Vr().b[5][0]++,e.length>0&&(Vr().b[5][1]++,!e.every(i=>(Vr().f[8]++,Vr().s[23]++,Vr().b[6][0]++,i===""||(Vr().b[6][1]++,i===void 0))))),r=(Vr().s[24]++,Array(this.props.length).fill(null).map((i,s)=>(Vr().f[9]++,Vr().s[25]++,this.props.type==="number"?(Vr().b[7][0]++,Vr().s[26]++,ue.jsx(um,{default:(Vr().b[9][0]++,t||(Vr().b[9][1]++,!this.props.default)?(Vr().b[8][0]++,void 0):(Vr().b[8][1]++,this.props.default[s])),value:e[s],required:t?(Vr().b[10][0]++,!0):(Vr().b[10][1]++,!1),onChange:a=>(Vr().f[10]++,Vr().s[27]++,this.changeValue(s,a)),"aria-label":(Vr().b[11][0]++,this.props["aria-label"]||(Vr().b[11][1]++,this.props.label))},s)):(Vr().b[7][1]++,Vr().s[28]++,ue.jsx(Qf,{default:(Vr().b[13][0]++,t||(Vr().b[13][1]++,!this.props.default)?(Vr().b[12][0]++,void 0):(Vr().b[12][1]++,this.props.default[s])),value:e[s],required:t?(Vr().b[14][0]++,!0):(Vr().b[14][1]++,!1),onChange:this.changeValue.bind(this,s),"aria-label":(Vr().b[15][0]++,this.props["aria-label"]||(Vr().b[15][1]++,this.props.label))},s)))));return Vr().s[29]++,ue.jsx("div",{className:"maputnik-array",children:r})}},Pn(p6,"defaultProps",(Vr().s[0]++,{value:[],default:[]})),p6);function iA(){var n="/home/runner/work/maputnik/maputnik/src/components/InputMultiInput.tsx",e="c4660c9ecb80d9f1ce71e70441154e1e765b77ab",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputMultiInput.tsx",statementMap:{0:{start:{line:6,column:18},end:{line:6,column:36}},1:{start:{line:7,column:4},end:{line:9,column:5}},2:{start:{line:8,column:6},end:{line:8,column:43}},3:{start:{line:8,column:35},end:{line:8,column:41}},4:{start:{line:10,column:26},end:{line:10,column:59}},5:{start:{line:11,column:19},end:{line:32,column:6}},6:{start:{line:12,column:6},end:{line:31,column:8}},7:{start:{line:22,column:34},end:{line:22,column:58}},8:{start:{line:33,column:4},end:{line:33,column:140}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:34,column:3}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:8,column:28},end:{line:8,column:29}},loc:{start:{line:8,column:35},end:{line:8,column:41}},line:8},2:{name:"(anonymous_2)",decl:{start:{line:11,column:31},end:{line:11,column:32}},loc:{start:{line:11,column:49},end:{line:32,column:5}},line:11},3:{name:"(anonymous_3)",decl:{start:{line:22,column:26},end:{line:22,column:27}},loc:{start:{line:22,column:34},end:{line:22,column:58}},line:22}},branchMap:{0:{loc:{start:{line:7,column:4},end:{line:9,column:5}},type:"if",locations:[{start:{line:7,column:4},end:{line:9,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:7},1:{loc:{start:{line:7,column:8},end:{line:7,column:56}},type:"binary-expr",locations:[{start:{line:7,column:8},end:{line:7,column:26}},{start:{line:7,column:30},end:{line:7,column:56}}],line:7},2:{loc:{start:{line:10,column:26},end:{line:10,column:59}},type:"binary-expr",locations:[{start:{line:10,column:26},end:{line:10,column:42}},{start:{line:10,column:46},end:{line:10,column:59}}],line:10}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},f:{0:0,1:0,2:0,3:0},b:{0:[0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputMultiInput.tsx"],names:[],mappings:"AAoBa,SAIL,KAJK;AApBb,OAAO,WAAW;AAClB,OAAO,gBAAgB;AAUvB,qBAAqB,wBAAwB,MAAM,UAAgC;AAAA,EACjF,SAAS;AACP,QAAI,UAAU,KAAK,MAAM;AACzB,QAAG,QAAQ,SAAS,KAAK,CAAC,MAAM,QAAQ,QAAQ,CAAC,CAAC,GAAG;AACnD,gBAAU,QAAQ,IAAI,OAAK,CAAC,GAAG,CAAC,CAAC;AAAA,IACnC;AAEA,UAAM,gBAAgB,KAAK,MAAM,SAAS,QAAQ,CAAC,EAAE,CAAC;AACtD,UAAM,SAAS,QAAQ,IAAI,CAAC,CAAC,KAAK,KAAK,MAAK;AAC1C,aAAO;AAAA,QAAC;AAAA;AAAA,UAEN,WAAW,WAAW,4BAA4B,EAAC,4BAA4B,QAAQ,cAAa,CAAC;AAAA,UAErG;AAAA;AAAA,cAAC;AAAA;AAAA,gBAAM,MAAK;AAAA,gBACV,MAAM,KAAK,MAAM;AAAA,gBACjB,UAAU,QAAM,KAAK,MAAM,SAAS,GAAG;AAAA,gBACvC,OAAO;AAAA,gBACP,SAAS,QAAQ;AAAA;AAAA,YACnB;AAAA,YACC;AAAA;AAAA;AAAA,QATI;AAAA,MAUP;AAAA,IACF,CAAC;AAED,WAAO,oBAAC,cAAS,WAAU,wBAAuB,cAAY,KAAK,MAAM,YAAY,GAClF,kBACH;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"c4660c9ecb80d9f1ce71e70441154e1e765b77ab"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return iA=function(){return a},a}iA();class Ede extends nr.Component{render(){iA().f[0]++;let e=(iA().s[0]++,this.props.options);iA().s[1]++,iA().b[1][0]++,e.length>0&&(iA().b[1][1]++,!Array.isArray(e[0]))?(iA().b[0][0]++,iA().s[2]++,e=e.map(i=>(iA().f[1]++,iA().s[3]++,[i,i]))):iA().b[0][1]++;const t=(iA().s[4]++,iA().b[2][0]++,this.props.value||(iA().b[2][1]++,e[0][0])),r=(iA().s[5]++,e.map(([i,s])=>(iA().f[2]++,iA().s[6]++,ue.jsxs("label",{className:am("maputnik-radio-as-button",{"maputnik-button-selected":i===t}),children:[ue.jsx("input",{type:"radio",name:this.props.name,onChange:a=>(iA().f[3]++,iA().s[7]++,this.props.onChange(i)),value:i,checked:i===t}),s]},i))));return iA().s[8]++,ue.jsx("fieldset",{className:"maputnik-multibutton","aria-label":this.props["aria-label"],children:r})}}function Kl(){var n="/home/runner/work/maputnik/maputnik/src/components/InputEnum.tsx",e="d905b5da4422f2b84d44f87b04fda3de421542f5",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputEnum.tsx",statementMap:{0:{start:{line:6,column:12},end:{line:6,column:13}},1:{start:{line:7,column:2},end:{line:9,column:5}},2:{start:{line:8,column:4},end:{line:8,column:24}},3:{start:{line:10,column:2},end:{line:10,column:13}},4:{start:{line:14,column:54},end:{line:14,column:64}},5:{start:{line:15,column:4},end:{line:36,column:5}},6:{start:{line:16,column:6},end:{line:25,column:8}},7:{start:{line:27,column:6},end:{line:35,column:8}}},fnMap:{0:{name:"optionsLabelLength",decl:{start:{line:5,column:9},end:{line:5,column:27}},loc:{start:{line:5,column:37},end:{line:11,column:1}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:7,column:18},end:{line:7,column:19}},loc:{start:{line:7,column:34},end:{line:9,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:13,column:2},end:{line:13,column:3}},loc:{start:{line:13,column:11},end:{line:37,column:3}},line:13}},branchMap:{0:{loc:{start:{line:15,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:15,column:4},end:{line:36,column:5}},{start:{line:26,column:11},end:{line:36,column:5}}],line:15},1:{loc:{start:{line:15,column:8},end:{line:15,column:64}},type:"binary-expr",locations:[{start:{line:15,column:8},end:{line:15,column:27}},{start:{line:15,column:31},end:{line:15,column:64}}],line:15},2:{loc:{start:{line:21,column:17},end:{line:21,column:44}},type:"binary-expr",locations:[{start:{line:21,column:17},end:{line:21,column:22}},{start:{line:21,column:26},end:{line:21,column:44}}],line:21},3:{loc:{start:{line:23,column:24},end:{line:23,column:57}},type:"binary-expr",locations:[{start:{line:23,column:24},end:{line:23,column:48}},{start:{line:23,column:52},end:{line:23,column:57}}],line:23},4:{loc:{start:{line:31,column:17},end:{line:31,column:44}},type:"binary-expr",locations:[{start:{line:31,column:17},end:{line:31,column:22}},{start:{line:31,column:26},end:{line:31,column:44}}],line:31},5:{loc:{start:{line:33,column:24},end:{line:33,column:57}},type:"binary-expr",locations:[{start:{line:33,column:24},end:{line:33,column:48}},{start:{line:33,column:52},end:{line:33,column:57}}],line:33}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},f:{0:0,1:0,2:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputEnum.tsx"],names:[],mappings:"AAgCa;AAhCb,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,qBAAqB;AAG5B,SAAS,mBAAmB,SAAgB;AAC1C,MAAI,MAAM;AACV,UAAQ,QAAQ,CAAC,CAAC,GAAG,KAAK,MAAM;AAC9B,WAAO,MAAM;AAAA,EACf,CAAC;AACD,SAAO;AACT;AAgBA,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,SAAS;AACP,UAAM,EAAC,SAAS,OAAO,UAAU,MAAM,MAAK,IAAI,KAAK;AAErD,QAAG,QAAQ,UAAU,KAAK,mBAAmB,OAAO,KAAK,IAAI;AAC3D,aAAO;AAAA,QAAC;AAAA;AAAA,UACN;AAAA,UACA;AAAA,UACA,OAAQ,SAAS,KAAK,MAAM;AAAA,UAC5B;AAAA,UACA,cAAY,KAAK,MAAM,YAAY,KAAK;AAAA;AAAA,MAC1C;AAAA,IACF,OAAO;AACL,aAAO;AAAA,QAAC;AAAA;AAAA,UACN;AAAA,UACA,OAAQ,SAAS,KAAK,MAAM;AAAA,UAC5B;AAAA,UACA,cAAY,KAAK,MAAM,YAAY,KAAK;AAAA;AAAA,MAC1C;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d905b5da4422f2b84d44f87b04fda3de421542f5"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Kl=function(){return a},a}Kl();function Bde(n){Kl().f[0]++;let e=(Kl().s[0]++,0);return Kl().s[1]++,n.forEach(([t,r])=>{Kl().f[1]++,Kl().s[2]++,e+=r.length}),Kl().s[3]++,e}class AI extends nr.Component{render(){Kl().f[2]++;const{options:e,value:t,onChange:r,name:i,label:s}=(Kl().s[4]++,this.props);return Kl().s[5]++,Kl().b[1][0]++,e.length<=3&&(Kl().b[1][1]++,Bde(e)<=20)?(Kl().b[0][0]++,Kl().s[6]++,ue.jsx(Ede,{name:i,options:e,value:(Kl().b[2][0]++,t||(Kl().b[2][1]++,this.props.default)),onChange:r,"aria-label":(Kl().b[3][0]++,this.props["aria-label"]||(Kl().b[3][1]++,s))})):(Kl().b[0][1]++,Kl().s[7]++,ue.jsx(Xg,{options:e,value:(Kl().b[4][0]++,t||(Kl().b[4][1]++,this.props.default)),onChange:r,"aria-label":(Kl().b[5][0]++,this.props["aria-label"]||(Kl().b[5][1]++,s))}))}}function Sy(){var n="/home/runner/work/maputnik/maputnik/src/components/SmallError.tsx",e="d603f5ded455e8f3bb5709d22f215a115aa4ac65",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/SmallError.tsx",statementMap:{0:{start:{line:7,column:14},end:{line:7,column:26}},1:{start:{line:8,column:4},end:{line:12,column:9}},2:{start:{line:15,column:19},end:{line:15,column:56}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:13,column:3}},line:6}},branchMap:{},s:{0:0,1:0,2:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/SmallError.tsx"],names:[],mappings:"AAaM;AAbN,OAAO,WAAW;AAClB,SAA0B,uBAAuB;AACjD,OAAO;AAOP,MAAM,2BAA2B,MAAM,UAAmC;AAAA,EACxE,SAAU;AACR,UAAM,IAAI,KAAK,MAAM;AACrB,WACE,qBAAC,SAAI,WAAU,cACZ;AAAA,QAAE,QAAQ;AAAA,MAAE;AAAA,MAAE,KAAK,MAAM;AAAA,OAC5B;AAAA,EAEJ;AACF;AAEA,MAAM,aAAa,gBAAgB,EAAE,kBAAkB;AACvD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d603f5ded455e8f3bb5709d22f215a115aa4ac65"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Sy=function(){return a},a}Sy();class Ode extends nr.Component{render(){Sy().f[0]++;const e=(Sy().s[0]++,this.props.t);return Sy().s[1]++,ue.jsxs("div",{className:"SmallError",children:[e("Error:")," ",this.props.children]})}}const yE=(Sy().s[2]++,Ns()(Ode));function no(){var n="/home/runner/work/maputnik/maputnik/src/components/InputUrl.tsx",e="b8761d76778c2aebcb896575c951cf64cf76ecb7",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputUrl.tsx",statementMap:{0:{start:{line:7,column:2},end:{line:9,column:3}},1:{start:{line:8,column:4},end:{line:8,column:11}},2:{start:{line:11,column:22},end:{line:18,column:3}},3:{start:{line:12,column:4},end:{line:17,column:5}},4:{start:{line:13,column:21},end:{line:13,column:34}},5:{start:{line:14,column:6},end:{line:14,column:29}},6:{start:{line:16,column:6},end:{line:16,column:20}},7:{start:{line:19,column:19},end:{line:19,column:35}},8:{start:{line:20,column:16},end:{line:20,column:53}},9:{start:{line:21,column:2},end:{line:41,column:3}},10:{start:{line:22,column:4},end:{line:34,column:5}},11:{start:{line:23,column:6},end:{line:26,column:14}},12:{start:{line:28,column:6},end:{line:33,column:14}},13:{start:{line:35,column:9},end:{line:41,column:3}},14:{start:{line:36,column:4},end:{line:40,column:12}},15:{start:{line:42,column:2},end:{line:42,column:15}},16:{start:{line:45,column:24},end:{line:48,column:3}},17:{start:{line:50,column:4},end:{line:50,column:17}},18:{start:{line:51,column:4},end:{line:53,column:6}},19:{start:{line:55,column:12},end:{line:60,column:3}},20:{start:{line:56,column:4},end:{line:58,column:7}},21:{start:{line:59,column:4},end:{line:59,column:52}},22:{start:{line:59,column:28},end:{line:59,column:52}},23:{start:{line:61,column:13},end:{line:66,column:3}},24:{start:{line:62,column:4},end:{line:64,column:7}},25:{start:{line:65,column:4},end:{line:65,column:29}},26:{start:{line:68,column:4},end:{line:79,column:9}},27:{start:{line:82,column:17},end:{line:82,column:52}}},fnMap:{0:{name:"validate",decl:{start:{line:6,column:9},end:{line:6,column:17}},loc:{start:{line:6,column:26},end:{line:43,column:1}},line:6},1:{name:"(anonymous_1)",decl:{start:{line:11,column:22},end:{line:11,column:23}},loc:{start:{line:11,column:32},end:{line:18,column:3}},line:11},2:{name:"(anonymous_2)",decl:{start:{line:46,column:13},end:{line:46,column:14}},loc:{start:{line:46,column:19},end:{line:47,column:5}},line:46},3:{name:"(anonymous_3)",decl:{start:{line:49,column:2},end:{line:49,column:3}},loc:{start:{line:49,column:21},end:{line:54,column:3}},line:49},4:{name:"(anonymous_4)",decl:{start:{line:55,column:12},end:{line:55,column:13}},loc:{start:{line:55,column:21},end:{line:60,column:3}},line:55},5:{name:"(anonymous_5)",decl:{start:{line:61,column:13},end:{line:61,column:14}},loc:{start:{line:61,column:22},end:{line:66,column:3}},line:61},6:{name:"(anonymous_6)",decl:{start:{line:67,column:2},end:{line:67,column:3}},loc:{start:{line:67,column:11},end:{line:80,column:3}},line:67}},branchMap:{0:{loc:{start:{line:7,column:2},end:{line:9,column:3}},type:"if",locations:[{start:{line:7,column:2},end:{line:9,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:7},1:{loc:{start:{line:21,column:2},end:{line:41,column:3}},type:"if",locations:[{start:{line:21,column:2},end:{line:41,column:3}},{start:{line:35,column:9},end:{line:41,column:3}}],line:21},2:{loc:{start:{line:22,column:4},end:{line:34,column:5}},type:"if",locations:[{start:{line:22,column:4},end:{line:34,column:5}},{start:{line:27,column:11},end:{line:34,column:5}}],line:22},3:{loc:{start:{line:35,column:9},end:{line:41,column:3}},type:"if",locations:[{start:{line:35,column:9},end:{line:41,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:35},4:{loc:{start:{line:35,column:13},end:{line:35,column:86}},type:"binary-expr",locations:[{start:{line:35,column:13},end:{line:35,column:21}},{start:{line:35,column:25},end:{line:35,column:45}},{start:{line:35,column:49},end:{line:35,column:86}}],line:35},5:{loc:{start:{line:59,column:4},end:{line:59,column:52}},type:"if",locations:[{start:{line:59,column:4},end:{line:59,column:52}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:59}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0],5:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputUrl.tsx"],names:["url"],mappings:"AA4BU,SAAoC,KAApC;AA5BV,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,gBAAgB;AACvB,SAAS,OAAwB,uBAAuB;AAGxD,SAAS,SAAS,KAAa,GAAuC;AACpE,MAAI,QAAQ,IAAI;AACd;AAAA,EACF;AAEA,MAAI;AACJ,QAAM,cAAc,CAACA,SAAgB;AACnC,QAAI;AACF,YAAM,SAAS,IAAI,IAAIA,IAAG;AAC1B,aAAO,OAAO;AAAA,IAChB,SACO,MAAM;AACX,aAAO;AAAA,IACT;AAAA,EACF;AACA,QAAM,WAAW,YAAY,GAAG;AAChC,QAAM,QAAQ,OAAO,SAAS,aAAa;AAE3C,MAAI,CAAC,UAAU;AACb,QAAI,OAAO;AACT,cACE,oBAAC,cACC,+BAAC,SAAM,GAAM;AAAA;AAAA,QAAuB,oBAAC,UAAK,sBAAQ;AAAA,SAAO,GAC3D;AAAA,IAEJ,OAAO;AACL,cACE,oBAAC,cACC,+BAAC,SAAM,GAAM;AAAA;AAAA,QAAuB,oBAAC,UAAK,qBAAO;AAAA,QAAO;AAAA,QAAI,oBAAC,UAAK,sBAAQ;AAAA,SAAO,GACnF;AAAA,IAEJ;AAAA,EACF,WAEE,YACA,aAAa,WACb,OAAO,SAAS,aAAa,UAC7B;AACA,YACE,oBAAC,cACC,+BAAC,SAAM,GAAM;AAAA;AAAA,MACwE,oBAAC,UAAK,sBAAQ;AAAA,MAAO;AAAA,OAC1G,GACF;AAAA,EAEJ;AAEA,SAAO;AACT;AAsBA,MAAM,yBAAyB,MAAM,UAAgD;AAAA,EACnF,OAAO,eAAe;AAAA,IACpB,SAAS,MAAM;AAAA,IAAC;AAAA,EAClB;AAAA,EAEA,YAAa,OAA8B;AACzC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,OAAO,SAAS,MAAM,OAAO,MAAM,CAAC;AAAA,IACtC;AAAA,EACF;AAAA,EAEA,UAAU,CAAC,QAAgB;AACzB,SAAK,SAAS;AAAA,MACZ,OAAO,SAAS,KAAK,KAAK,MAAM,CAAC;AAAA,IACnC,CAAC;AACD,QAAI,KAAK,MAAM,QAAS,MAAK,MAAM,QAAQ,GAAG;AAAA,EAChD;AAAA,EAEA,WAAW,CAAC,QAAgB;AAC1B,SAAK,SAAS;AAAA,MACZ,OAAO,SAAS,KAAK,KAAK,MAAM,CAAC;AAAA,IACnC,CAAC;AACD,SAAK,MAAM,SAAS,GAAG;AAAA,EACzB;AAAA,EAEA,SAAU;AACR,WACE,qBAAC,SACC;AAAA;AAAA,QAAC;AAAA;AAAA,UACE,GAAG,KAAK;AAAA,UACT,SAAS,KAAK;AAAA,UACd,UAAU,KAAK;AAAA,UACf,cAAY,KAAK,MAAM,YAAY;AAAA;AAAA,MACrC;AAAA,MACC,KAAK,MAAM;AAAA,OACd;AAAA,EAEJ;AACF;AAEA,MAAM,WAAW,gBAAgB,EAAE,gBAAgB;AACnD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"b8761d76778c2aebcb896575c951cf64cf76ecb7"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return no=function(){return a},a}no();function vE(n,e){if(no().f[0]++,no().s[0]++,n===""){no().b[0][0]++,no().s[1]++;return}else no().b[0][1]++;let t;no().s[2]++;const r=a=>{no().f[1]++,no().s[3]++;try{const o=(no().s[4]++,new URL(a));return no().s[5]++,o.protocol}catch{no().s[6]++;return}},i=(no().s[7]++,r(n)),s=(no().s[8]++,window.location.protocol==="https:");return no().s[9]++,i?(no().b[1][1]++,no().s[13]++,no().b[4][0]++,i&&(no().b[4][1]++,i==="http:")&&(no().b[4][2]++,window.location.protocol==="https:")?(no().b[3][0]++,no().s[14]++,t=ue.jsx(yE,{children:ue.jsxs(T0,{t:e,children:["CORS policy won't allow fetching resources served over http from https, use a ",ue.jsx("code",{children:"https://"})," domain"]})})):no().b[3][1]++):(no().b[1][0]++,no().s[10]++,s?(no().b[2][0]++,no().s[11]++,t=ue.jsx(yE,{children:ue.jsxs(T0,{t:e,children:["Must provide protocol: ",ue.jsx("code",{children:"https://"})]})})):(no().b[2][1]++,no().s[12]++,t=ue.jsx(yE,{children:ue.jsxs(T0,{t:e,children:["Must provide protocol: ",ue.jsx("code",{children:"http://"})," or ",ue.jsx("code",{children:"https://"})]})}))),no().s[15]++,t}class lG extends nr.Component{constructor(t){no().f[3]++,no().s[17]++;super(t);Pn(this,"onInput",(no().s[19]++,t=>{no().f[4]++,no().s[20]++,this.setState({error:vE(t,this.props.t)}),no().s[21]++,this.props.onInput?(no().b[5][0]++,no().s[22]++,this.props.onInput(t)):no().b[5][1]++}));Pn(this,"onChange",(no().s[23]++,t=>{no().f[5]++,no().s[24]++,this.setState({error:vE(t,this.props.t)}),no().s[25]++,this.props.onChange(t)}));no().s[18]++,this.state={error:vE(t.value,t.t)}}render(){return no().f[6]++,no().s[26]++,ue.jsxs("div",{children:[ue.jsx(Qf,{...this.props,onInput:this.onInput,onChange:this.onChange,"aria-label":this.props["aria-label"]}),this.state.error]})}}Pn(lG,"defaultProps",(no().s[16]++,{onInput:()=>{no().f[2]++}}));const cI=(no().s[27]++,Ns()(lG));function Lr(){var n="/home/runner/work/maputnik/maputnik/src/components/InputDynamicArray.tsx",e="b43f9efa2bc6409a39f030c91aca2fefba2121b9",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputDynamicArray.tsx",statementMap:{0:{start:{line:14,column:19},end:{line:14,column:39}},1:{start:{line:15,column:4},end:{line:15,column:27}},2:{start:{line:16,column:4},end:{line:16,column:57}},3:{start:{line:16,column:29},end:{line:16,column:57}},4:{start:{line:19,column:4},end:{line:19,column:56}},5:{start:{line:21,column:13},end:{line:35,column:3}},6:{start:{line:22,column:19},end:{line:22,column:39}},7:{start:{line:23,column:4},end:{line:33,column:5}},8:{start:{line:24,column:6},end:{line:24,column:21}},9:{start:{line:25,column:11},end:{line:33,column:5}},10:{start:{line:26,column:6},end:{line:26,column:22}},11:{start:{line:27,column:11},end:{line:33,column:5}},12:{start:{line:28,column:28},end:{line:28,column:38}},13:{start:{line:29,column:27},end:{line:29,column:59}},14:{start:{line:30,column:6},end:{line:30,column:32}},15:{start:{line:32,column:6},end:{line:32,column:22}},16:{start:{line:34,column:4},end:{line:34,column:57}},17:{start:{line:34,column:29},end:{line:34,column:57}},18:{start:{line:37,column:19},end:{line:37,column:39}},19:{start:{line:38,column:4},end:{line:38,column:31}},20:{start:{line:39,column:4},end:{line:39,column:86}},21:{start:{line:39,column:29},end:{line:39,column:86}},22:{start:{line:42,column:14},end:{line:42,column:26}},23:{start:{line:43,column:22},end:{line:43,column:77}},24:{start:{line:44,column:19},end:{line:104,column:6}},25:{start:{line:45,column:45},end:{line:51,column:7}},26:{start:{line:53,column:6},end:{line:91,column:7}},27:{start:{line:54,column:8},end:{line:61,column:10}},28:{start:{line:62,column:13},end:{line:91,column:7}},29:{start:{line:63,column:8},end:{line:70,column:10}},30:{start:{line:71,column:13},end:{line:91,column:7}},31:{start:{line:72,column:24},end:{line:72,column:99}},32:{start:{line:72,column:78},end:{line:72,column:98}},33:{start:{line:73,column:8},end:{line:81,column:10}},34:{start:{line:83,column:8},end:{line:90,column:10}},35:{start:{line:92,column:6},end:{line:103,column:8}},36:{start:{line:105,column:4},end:{line:115,column:9}},37:{start:{line:118,column:26},end:{line:118,column:70}},38:{start:{line:122,column:14},end:{line:122,column:26}},39:{start:{line:123,column:4},end:{line:136,column:6}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:13,column:2},end:{line:13,column:3}},loc:{start:{line:13,column:29},end:{line:17,column:3}},line:13},1:{name:"(anonymous_1)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:15},end:{line:20,column:3}},line:18},2:{name:"(anonymous_2)",decl:{start:{line:21,column:13},end:{line:21,column:14}},loc:{start:{line:21,column:19},end:{line:35,column:3}},line:21},3:{name:"(anonymous_3)",decl:{start:{line:36,column:2},end:{line:36,column:3}},loc:{start:{line:36,column:24},end:{line:40,column:3}},line:36},4:{name:"(anonymous_4)",decl:{start:{line:41,column:2},end:{line:41,column:3}},loc:{start:{line:41,column:11},end:{line:116,column:3}},line:41},5:{name:"(anonymous_5)",decl:{start:{line:44,column:35},end:{line:44,column:36}},loc:{start:{line:44,column:45},end:{line:104,column:5}},line:44},6:{name:"(anonymous_6)",decl:{start:{line:72,column:70},end:{line:72,column:71}},loc:{start:{line:72,column:78},end:{line:72,column:98}},line:72},7:{name:"(anonymous_7)",decl:{start:{line:121,column:2},end:{line:121,column:3}},loc:{start:{line:121,column:11},end:{line:137,column:3}},line:121}},branchMap:{0:{loc:{start:{line:16,column:4},end:{line:16,column:57}},type:"if",locations:[{start:{line:16,column:4},end:{line:16,column:57}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:16},1:{loc:{start:{line:19,column:11},end:{line:19,column:55}},type:"binary-expr",locations:[{start:{line:19,column:11},end:{line:19,column:27}},{start:{line:19,column:31},end:{line:19,column:49}},{start:{line:19,column:53},end:{line:19,column:55}}],line:19},2:{loc:{start:{line:23,column:4},end:{line:33,column:5}},type:"if",locations:[{start:{line:23,column:4},end:{line:33,column:5}},{start:{line:25,column:11},end:{line:33,column:5}}],line:23},3:{loc:{start:{line:25,column:11},end:{line:33,column:5}},type:"if",locations:[{start:{line:25,column:11},end:{line:33,column:5}},{start:{line:27,column:11},end:{line:33,column:5}}],line:25},4:{loc:{start:{line:27,column:11},end:{line:33,column:5}},type:"if",locations:[{start:{line:27,column:11},end:{line:33,column:5}},{start:{line:31,column:11},end:{line:33,column:5}}],line:27},5:{loc:{start:{line:34,column:4},end:{line:34,column:57}},type:"if",locations:[{start:{line:34,column:4},end:{line:34,column:57}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:34},6:{loc:{start:{line:39,column:4},end:{line:39,column:86}},type:"if",locations:[{start:{line:39,column:4},end:{line:39,column:86}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:39},7:{loc:{start:{line:39,column:49},end:{line:39,column:84}},type:"cond-expr",locations:[{start:{line:39,column:69},end:{line:39,column:75}},{start:{line:39,column:78},end:{line:39,column:84}}],line:39},8:{loc:{start:{line:53,column:6},end:{line:91,column:7}},type:"if",locations:[{start:{line:53,column:6},end:{line:91,column:7}},{start:{line:62,column:13},end:{line:91,column:7}}],line:53},9:{loc:{start:{line:59,column:26},end:{line:59,column:70}},type:"binary-expr",locations:[{start:{line:59,column:26},end:{line:59,column:50}},{start:{line:59,column:54},end:{line:59,column:70}}],line:59},10:{loc:{start:{line:62,column:13},end:{line:91,column:7}},type:"if",locations:[{start:{line:62,column:13},end:{line:91,column:7}},{start:{line:71,column:13},end:{line:91,column:7}}],line:62},11:{loc:{start:{line:68,column:26},end:{line:68,column:70}},type:"binary-expr",locations:[{start:{line:68,column:26},end:{line:68,column:50}},{start:{line:68,column:54},end:{line:68,column:70}}],line:68},12:{loc:{start:{line:71,column:13},end:{line:91,column:7}},type:"if",locations:[{start:{line:71,column:13},end:{line:91,column:7}},{start:{line:82,column:13},end:{line:91,column:7}}],line:71},13:{loc:{start:{line:79,column:26},end:{line:79,column:70}},type:"binary-expr",locations:[{start:{line:79,column:26},end:{line:79,column:50}},{start:{line:79,column:54},end:{line:79,column:70}}],line:79},14:{loc:{start:{line:88,column:26},end:{line:88,column:70}},type:"binary-expr",locations:[{start:{line:88,column:26},end:{line:88,column:50}},{start:{line:88,column:54},end:{line:88,column:70}}],line:88}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputDynamicArray.tsx"],names:["v"],mappings:"AAqE4B,cAoCf,YApCe;AArE5B,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,SAAQ,gBAAe;AACvB,SAA0B,uBAAuB;AAEjD,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,mBAAmB;AAC1B,OAAO,eAAe;AACtB,OAAO,cAAc;AAkBrB,MAAM,kCAAkC,MAAM,UAA0C;AAAA,EACtF,YAAY,KAAa,UAAuC;AAC9D,UAAM,SAAS,KAAK,OAAO,MAAM,CAAC;AAClC,WAAO,GAAG,IAAI;AACd,QAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,MAAM;AAAA,EACrD;AAAA,EAEA,IAAI,SAAS;AACX,WAAO,KAAK,MAAM,SAAS,KAAK,MAAM,WAAW,CAAC;AAAA,EACpD;AAAA,EAEA,WAAW,MAAM;AACf,UAAM,SAAS,KAAK,OAAO,MAAM,CAAC;AAClC,QAAI,KAAK,MAAM,SAAS,UAAU;AAChC,aAAO,KAAK,CAAC;AAAA,IACf,WACS,KAAK,MAAM,SAAS,OAAO;AAClC,aAAO,KAAK,EAAE;AAAA,IAChB,WACS,KAAK,MAAM,SAAS,QAAQ;AACnC,YAAM,EAAC,UAAS,IAAI,KAAK;AACzB,YAAM,eAAe,OAAO,KAAK,UAAW,MAAM,EAAE,CAAC;AACrD,aAAO,KAAK,YAAY;AAAA,IAC1B,OAAO;AACL,aAAO,KAAK,EAAE;AAAA,IAChB;AAEA,QAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,MAAM;AAAA,EACrD;AAAA,EAEA,YAAY,UAAkB;AAC5B,UAAM,SAAS,KAAK,OAAO,MAAM,CAAC;AAClC,WAAO,OAAO,UAAU,CAAC;AAEzB,QAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,OAAO,SAAS,IAAI,SAAS,MAAS;AAAA,EACrF;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,YAAY,EAAE,GAAG,MAAM,KAAK,MAAM,MAAM,QAAQ,KAAK,MAAM,OAAO;AACxE,UAAM,SAAS,KAAK,OAAO,IAAI,CAAC,GAAG,MAAM;AACvC,YAAM,iBAAgB;AAAA,QAAC;AAAA;AAAA,UACrB,SAAS,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,UACrC,GAAG;AAAA;AAAA,MACN;AACA,UAAI;AACJ,UAAG,KAAK,MAAM,SAAS,OAAO;AAC5B,gBAAQ;AAAA,UAAC;AAAA;AAAA,YACP,OAAO;AAAA,YACP,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,QACrD;AAAA,MACF,WACS,KAAK,MAAM,SAAS,UAAU;AACrC,gBAAQ;AAAA,UAAC;AAAA;AAAA,YACP,OAAO;AAAA,YACP,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,QACrD;AAAA,MACF,WACS,KAAK,MAAM,SAAS,QAAQ;AACnC,cAAM,UAAU,OAAO,KAAK,KAAK,MAAM,WAAW,MAAM,EAAE,IAAI,CAAAA,OAAK,CAACA,IAAG,WAAWA,EAAC,CAAC,CAAC;AACrF,gBAAQ;AAAA,UAAC;AAAA;AAAA,YACP;AAAA,YACA,OAAO;AAAA,YACP,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,QACrD;AAAA,MACF,OACK;AACH,gBAAQ;AAAA,UAAC;AAAA;AAAA,YACP,OAAO;AAAA,YACP,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,QACrD;AAAA,MACF;AAEA,aAAO;AAAA,QAAC;AAAA;AAAA,UACN,OAAO,KAAK,MAAM;AAAA,UAElB,WAAU;AAAA,UAEV;AAAA,gCAAC,SAAI,WAAU,+BACZ,0BACH;AAAA,YACA,oBAAC,SAAI,WAAU,gCACZ,iBACH;AAAA;AAAA;AAAA,QARK;AAAA,MASP;AAAA,IACF,CAAC;AAED,WACE,qBAAC,SAAI,WAAU,kBACZ;AAAA;AAAA,MACD;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,SAAS,KAAK;AAAA,UAEb,YAAE,WAAW;AAAA;AAAA,MAChB;AAAA,OACF;AAAA,EAEJ;AACF;AAEA,MAAM,oBAAoB,gBAAgB,EAAE,yBAAyB;AACrE,eAAe;AAMf,MAAM,+BAA+B,MAAM,UAAuC;AAAA,EAChF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,SAAS,KAAK,MAAM;AAAA,QACpB,OAAO,EAAE,mBAAmB;AAAA,QAE5B;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,oBAAC,YAAS;AAAA;AAAA,QACnB;AAAA;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"b43f9efa2bc6409a39f030c91aca2fefba2121b9"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Lr=function(){return a},a}Lr();class Ide extends nr.Component{constructor(){super(...arguments);Pn(this,"addValue",(Lr().s[5]++,()=>{Lr().f[2]++;const t=(Lr().s[6]++,this.values.slice(0));if(Lr().s[7]++,this.props.type==="number")Lr().b[2][0]++,Lr().s[8]++,t.push(0);else if(Lr().b[2][1]++,Lr().s[9]++,this.props.type==="url")Lr().b[3][0]++,Lr().s[10]++,t.push("");else if(Lr().b[3][1]++,Lr().s[11]++,this.props.type==="enum"){Lr().b[4][0]++;const{fieldSpec:r}=(Lr().s[12]++,this.props),i=(Lr().s[13]++,Object.keys(r.values)[0]);Lr().s[14]++,t.push(i)}else Lr().b[4][1]++,Lr().s[15]++,t.push("");Lr().s[16]++,this.props.onChange?(Lr().b[5][0]++,Lr().s[17]++,this.props.onChange(t)):Lr().b[5][1]++}))}changeValue(t,r){Lr().f[0]++;const i=(Lr().s[0]++,this.values.slice(0));Lr().s[1]++,i[t]=r,Lr().s[2]++,this.props.onChange?(Lr().b[0][0]++,Lr().s[3]++,this.props.onChange(i)):Lr().b[0][1]++}get values(){return Lr().f[1]++,Lr().s[4]++,Lr().b[1][0]++,this.props.value||(Lr().b[1][1]++,this.props.default)||(Lr().b[1][2]++,[])}deleteValue(t){Lr().f[3]++;const r=(Lr().s[18]++,this.values.slice(0));Lr().s[19]++,r.splice(t,1),Lr().s[20]++,this.props.onChange?(Lr().b[6][0]++,Lr().s[21]++,this.props.onChange(r.length>0?(Lr().b[7][0]++,r):(Lr().b[7][1]++,void 0))):Lr().b[6][1]++}render(){Lr().f[4]++;const t=(Lr().s[22]++,this.props.t),r=(Lr().s[23]++,{t,i18n:this.props.i18n,tReady:this.props.tReady}),i=(Lr().s[24]++,this.values.map((s,a)=>{var g;Lr().f[5]++;const o=(Lr().s[25]++,ue.jsx(kde,{onClick:this.deleteValue.bind(this,a),...r}));let d;if(Lr().s[26]++,this.props.type==="url")Lr().b[8][0]++,Lr().s[27]++,d=ue.jsx(cI,{value:s,onChange:this.changeValue.bind(this,a),"aria-label":(Lr().b[9][0]++,this.props["aria-label"]||(Lr().b[9][1]++,this.props.label))});else if(Lr().b[8][1]++,Lr().s[28]++,this.props.type==="number")Lr().b[10][0]++,Lr().s[29]++,d=ue.jsx(um,{value:s,onChange:this.changeValue.bind(this,a),"aria-label":(Lr().b[11][0]++,this.props["aria-label"]||(Lr().b[11][1]++,this.props.label))});else if(Lr().b[10][1]++,Lr().s[30]++,this.props.type==="enum"){Lr().b[12][0]++;const b=(Lr().s[31]++,Object.keys((g=this.props.fieldSpec)==null?void 0:g.values).map(E=>(Lr().f[6]++,Lr().s[32]++,[E,QO(E)])));Lr().s[33]++,d=ue.jsx(AI,{options:b,value:s,onChange:this.changeValue.bind(this,a),"aria-label":(Lr().b[13][0]++,this.props["aria-label"]||(Lr().b[13][1]++,this.props.label))})}else Lr().b[12][1]++,Lr().s[34]++,d=ue.jsx(Qf,{value:s,onChange:this.changeValue.bind(this,a),"aria-label":(Lr().b[14][0]++,this.props["aria-label"]||(Lr().b[14][1]++,this.props.label))});return Lr().s[35]++,ue.jsxs("div",{style:this.props.style,className:"maputnik-array-block",children:[ue.jsx("div",{className:"maputnik-array-block-action",children:o}),ue.jsx("div",{className:"maputnik-array-block-content",children:d})]},a)}));return Lr().s[36]++,ue.jsxs("div",{className:"maputnik-array",children:[i,ue.jsx(Ja,{className:"maputnik-array-add-value",onClick:this.addValue,children:t("Add value")})]})}}const uG=(Lr().s[37]++,Ns()(Ide));class kde extends nr.Component{render(){Lr().f[7]++;const e=(Lr().s[38]++,this.props.t);return Lr().s[39]++,ue.jsx(Ja,{className:"maputnik-delete-stop",onClick:this.props.onClick,title:e("Remove array item"),children:ue.jsx(LO,{label:ue.jsx($y,{})})})}}function ha(){var n="/home/runner/work/maputnik/maputnik/src/components/InputFont.tsx",e="cd16dc68fc42c219caf080518fd74984d4f8d81e",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputFont.tsx",statementMap:{0:{start:{line:5,column:24},end:{line:7,column:3}},1:{start:{line:9,column:16},end:{line:9,column:60}},2:{start:{line:10,column:4},end:{line:14,column:5}},3:{start:{line:11,column:6},end:{line:11,column:28}},4:{start:{line:13,column:6},end:{line:13,column:17}},5:{start:{line:17,column:26},end:{line:17,column:46}},6:{start:{line:18,column:4},end:{line:18,column:34}},7:{start:{line:19,column:27},end:{line:19,column:92}},8:{start:{line:19,column:55},end:{line:19,column:67}},9:{start:{line:19,column:83},end:{line:19,column:91}},10:{start:{line:20,column:4},end:{line:20,column:40}},11:{start:{line:23,column:19},end:{line:39,column:6}},12:{start:{line:24,column:6},end:{line:38,column:8}},13:{start:{line:32,column:52},end:{line:32,column:58}},14:{start:{line:40,column:4},end:{line:40,column:87}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:15},end:{line:15,column:3}},line:8},1:{name:"(anonymous_1)",decl:{start:{line:16,column:2},end:{line:16,column:3}},loc:{start:{line:16,column:28},end:{line:21,column:3}},line:16},2:{name:"(anonymous_2)",decl:{start:{line:19,column:48},end:{line:19,column:49}},loc:{start:{line:19,column:55},end:{line:19,column:67}},line:19},3:{name:"(anonymous_3)",decl:{start:{line:19,column:76},end:{line:19,column:77}},loc:{start:{line:19,column:83},end:{line:19,column:91}},line:19},4:{name:"(anonymous_4)",decl:{start:{line:22,column:2},end:{line:22,column:3}},loc:{start:{line:22,column:11},end:{line:41,column:3}},line:22},5:{name:"(anonymous_5)",decl:{start:{line:23,column:35},end:{line:23,column:36}},loc:{start:{line:23,column:49},end:{line:39,column:5}},line:23},6:{name:"(anonymous_6)",decl:{start:{line:32,column:45},end:{line:32,column:46}},loc:{start:{line:32,column:52},end:{line:32,column:58}},line:32}},branchMap:{0:{loc:{start:{line:9,column:16},end:{line:9,column:60}},type:"binary-expr",locations:[{start:{line:9,column:16},end:{line:9,column:32}},{start:{line:9,column:36},end:{line:9,column:54}},{start:{line:9,column:58},end:{line:9,column:60}}],line:9},1:{loc:{start:{line:10,column:4},end:{line:14,column:5}},type:"if",locations:[{start:{line:10,column:4},end:{line:14,column:5}},{start:{line:12,column:11},end:{line:14,column:5}}],line:10},2:{loc:{start:{line:30,column:28},end:{line:30,column:71}},type:"binary-expr",locations:[{start:{line:30,column:28},end:{line:30,column:52}},{start:{line:30,column:56},end:{line:30,column:71}}],line:30}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},b:{0:[0,0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputFont.tsx"],names:[],mappings:"AA6CQ;AA7CR,OAAO,WAAW;AAClB,OAAO,uBAAuB;AAY9B,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,OAAO,eAAe;AAAA,IACpB,OAAO,CAAC;AAAA,EACV;AAAA,EAEA,IAAI,SAAS;AACX,UAAM,MAAM,KAAK,MAAM,SAAS,KAAK,MAAM,WAAW,CAAC;AAGvD,QAAI,IAAI,IAAI,SAAO,CAAC,MAAM,IAAG;AAC3B,aAAO,IAAI,OAAO,EAAE;AAAA,IACtB,OACK;AACH,aAAO;AAAA,IACT;AAAA,EACF;AAAA,EAEA,WAAW,KAAa,UAAkB;AACxC,UAAM,gBAAgB,KAAK,OAAO,MAAM,CAAC;AACzC,kBAAc,GAAG,IAAI;AACrB,UAAM,iBAAiB,cACpB,OAAO,OAAK,MAAM,MAAS,EAC3B,OAAO,OAAK,MAAM,EAAE;AAEvB,SAAK,MAAM,SAAS,cAAc;AAAA,EACpC;AAAA,EAEA,SAAS;AACP,UAAM,SAAS,KAAK,OAAO,IAAI,CAAC,OAAO,MAAM;AAC3C,aAAO;AAAA,QAAC;AAAA;AAAA,UAGN;AAAA,YAAC;AAAA;AAAA,cACC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA,cACnD;AAAA,cACA,SAAS,KAAK,MAAM,OAAO,IAAI,OAAK,CAAC,GAAG,CAAC,CAAC;AAAA,cAC1C,UAAU,KAAK,WAAW,KAAK,MAAM,CAAC;AAAA;AAAA,UACxC;AAAA;AAAA,QAPK;AAAA,MAQP;AAAA,IACF,CAAC;AAED,WACE,oBAAC,QAAG,WAAU,iBACX,kBACH;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"cd16dc68fc42c219caf080518fd74984d4f8d81e"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return ha=function(){return a},a}ha();class AG extends nr.Component{get values(){ha().f[0]++;const e=(ha().s[1]++,ha().b[0][0]++,this.props.value||(ha().b[0][1]++,this.props.default)||(ha().b[0][2]++,[]));return ha().s[2]++,e[e.length-1]!==""?(ha().b[1][0]++,ha().s[3]++,e.concat("")):(ha().b[1][1]++,ha().s[4]++,e)}changeFont(e,t){ha().f[1]++;const r=(ha().s[5]++,this.values.slice(0));ha().s[6]++,r[e]=t;const i=(ha().s[7]++,r.filter(s=>(ha().f[2]++,ha().s[8]++,s!==void 0)).filter(s=>(ha().f[3]++,ha().s[9]++,s!=="")));ha().s[10]++,this.props.onChange(i)}render(){ha().f[4]++;const e=(ha().s[11]++,this.values.map((t,r)=>{var i;return ha().f[5]++,ha().s[12]++,ue.jsx("li",{children:ue.jsx(rv,{"aria-label":(ha().b[2][0]++,this.props["aria-label"]||(ha().b[2][1]++,this.props.name)),value:t,options:(i=this.props.fonts)==null?void 0:i.map(s=>(ha().f[6]++,ha().s[13]++,[s,s])),onChange:this.changeFont.bind(this,r)})},r)}));return ha().s[14]++,ue.jsx("ul",{className:"maputnik-font",children:e})}}Pn(AG,"defaultProps",(ha().s[0]++,{fonts:[]}));function fo(){var n="/home/runner/work/maputnik/maputnik/src/components/InputSpec.tsx",e="8a7e9c26497bbcdc9141a7bf10d3ed50f729d679",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputSpec.tsx",statementMap:{0:{start:{line:13,column:23},end:{line:13,column:117}},1:{start:{line:16,column:24},end:{line:28,column:5}},2:{start:{line:26,column:30},end:{line:26,column:81}},3:{start:{line:29,column:4},end:{line:115,column:5}},4:{start:{line:31,column:8},end:{line:38,column:10}},5:{start:{line:40,column:24},end:{line:40,column:101}},6:{start:{line:40,column:82},end:{line:40,column:100}},7:{start:{line:41,column:8},end:{line:47,column:10}},8:{start:{line:52,column:8},end:{line:68,column:9}},9:{start:{line:53,column:26},end:{line:53,column:59}},10:{start:{line:54,column:10},end:{line:60,column:12}},11:{start:{line:58,column:42},end:{line:58,column:48}},12:{start:{line:62,column:10},end:{line:67,column:12}},13:{start:{line:70,column:8},end:{line:75,column:10}},14:{start:{line:77,column:8},end:{line:82,column:10}},15:{start:{line:84,column:8},end:{line:112,column:9}},16:{start:{line:85,column:10},end:{line:91,column:12}},17:{start:{line:93,column:10},end:{line:111,column:11}},18:{start:{line:94,column:12},end:{line:101,column:14}},19:{start:{line:103,column:12},end:{line:110,column:14}},20:{start:{line:114,column:8},end:{line:114,column:20}},21:{start:{line:118,column:4},end:{line:118,column:124}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:15},end:{line:116,column:3}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:26,column:16},end:{line:26,column:17}},loc:{start:{line:26,column:30},end:{line:26,column:81}},line:26},2:{name:"(anonymous_2)",decl:{start:{line:40,column:75},end:{line:40,column:76}},loc:{start:{line:40,column:82},end:{line:40,column:100}},line:40},3:{name:"(anonymous_3)",decl:{start:{line:58,column:35},end:{line:58,column:36}},loc:{start:{line:58,column:42},end:{line:58,column:48}},line:58},4:{name:"(anonymous_4)",decl:{start:{line:117,column:2},end:{line:117,column:3}},loc:{start:{line:117,column:11},end:{line:119,column:3}},line:117}},branchMap:{0:{loc:{start:{line:29,column:4},end:{line:115,column:5}},type:"switch",locations:[{start:{line:30,column:6},end:{line:38,column:10}},{start:{line:39,column:6},end:{line:48,column:7}},{start:{line:49,column:6},end:{line:49,column:27}},{start:{line:50,column:6},end:{line:50,column:23}},{start:{line:51,column:6},end:{line:68,column:9}},{start:{line:69,column:6},end:{line:75,column:10}},{start:{line:76,column:6},end:{line:82,column:10}},{start:{line:83,column:6},end:{line:112,column:9}},{start:{line:113,column:6},end:{line:114,column:20}}],line:29},1:{loc:{start:{line:40,column:36},end:{line:40,column:69}},type:"binary-expr",locations:[{start:{line:40,column:36},end:{line:40,column:63}},{start:{line:40,column:67},end:{line:40,column:69}}],line:40},2:{loc:{start:{line:52,column:8},end:{line:68,column:9}},type:"if",locations:[{start:{line:52,column:8},end:{line:68,column:9}},{start:{line:61,column:15},end:{line:68,column:9}}],line:52},3:{loc:{start:{line:53,column:26},end:{line:53,column:59}},type:"binary-expr",locations:[{start:{line:53,column:26},end:{line:53,column:53}},{start:{line:53,column:57},end:{line:53,column:59}}],line:53},4:{loc:{start:{line:84,column:8},end:{line:112,column:9}},type:"if",locations:[{start:{line:84,column:8},end:{line:112,column:9}},{start:{line:92,column:15},end:{line:112,column:9}}],line:84},5:{loc:{start:{line:93,column:10},end:{line:111,column:11}},type:"if",locations:[{start:{line:93,column:10},end:{line:111,column:11}},{start:{line:102,column:17},end:{line:111,column:11}}],line:93}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0,0,0,0,0,0,0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputSpec.tsx"],names:[],mappings:"AAyDM;AAzDN,OAAO,WAA6B;AAEpC,OAAO,gBAAqC;AAC5C,OAAO,iBAAuC;AAC9C,OAAO,mBAA2C;AAClD,OAAO,iBAAuC;AAC9C,OAAO,gBAAqC;AAC5C,OAAO,uBAAmD;AAC1D,OAAO,eAAmC;AAC1C,OAAO,uBAAmD;AAC1D,OAAO,eAAmC;AAC1C,OAAO,gBAAgB;AAEvB,MAAM,iBAAiB,CAAC,sBAAsB,gBAAgB,gBAAgB,0BAA0B,YAAY;AA0BpH,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EAErE,aAAa;AACX,UAAM,cAAc;AAAA,MAClB,OAAO,KAAK,MAAM;AAAA,MAClB,WAAW,KAAK,MAAM;AAAA,MACtB,OAAO,KAAK,MAAM;AAAA,MAClB,QAAQ,KAAK,MAAM;AAAA,MACnB,OAAO,KAAK,MAAM;AAAA,MAClB,OAAO,KAAK,MAAM;AAAA,MAClB,SAAS,KAAK,MAAM,WAAW;AAAA,MAC/B,MAAM,KAAK,MAAM;AAAA,MACjB,eAAe,sBAAsB,KAAK,MAAM;AAAA,MAChD,UAAU,CAAC,aAAmE,KAAK,MAAM,SAAU,KAAK,MAAM,WAAW,QAAQ;AAAA,MACjI,cAAc,KAAK,MAAM,YAAY;AAAA,IACvC;AACA,YAAO,KAAK,MAAM,WAAW,MAAM;AAAA,MACnC,KAAK;AAAU,eACb;AAAA,UAAC;AAAA;AAAA,YACE,GAAG;AAAA,YACJ,KAAK,KAAK,MAAM,UAAU;AAAA,YAC1B,KAAK,KAAK,MAAM,UAAU;AAAA;AAAA,QAC5B;AAAA,MAEF,KAAK,QAAQ;AACX,cAAM,UAAU,OAAO,KAAK,KAAK,MAAM,UAAU,UAAU,CAAC,CAAC,EAAE,IAAI,OAAK,CAAC,GAAG,WAAW,CAAC,CAAC,CAAC;AAE1F,eAAO;AAAA,UAAC;AAAA;AAAA,YACL,GAAG;AAAA,YACJ;AAAA;AAAA,QACF;AAAA,MACF;AAAA,MACA,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AACH,YAAI,eAAe,QAAQ,KAAK,MAAM,SAAU,KAAK,GAAG;AACtD,gBAAM,UAAU,KAAK,MAAM,UAAU,UAAU,CAAC;AAChD,iBAAO;AAAA,YAAC;AAAA;AAAA,cACL,GAAG;AAAA,cACJ,SAAS,QAAQ,IAAI,OAAK,CAAC,GAAG,CAAC,CAAC;AAAA;AAAA,UAClC;AAAA,QACF,OAAO;AACL,iBAAO;AAAA,YAAC;AAAA;AAAA,cACL,GAAG;AAAA;AAAA,UACN;AAAA,QACF;AAAA,MACF,KAAK;AAAS,eACZ;AAAA,UAAC;AAAA;AAAA,YACE,GAAG;AAAA;AAAA,QACN;AAAA,MAEF,KAAK;AAAW,eACd;AAAA,UAAC;AAAA;AAAA,YACE,GAAG;AAAA;AAAA,QACN;AAAA,MAEF,KAAK;AACH,YAAG,KAAK,MAAM,cAAc,aAAa;AACvC,iBAAO;AAAA,YAAC;AAAA;AAAA,cACL,GAAG;AAAA,cACJ,OAAO,KAAK,MAAM,UAAU;AAAA;AAAA,UAC9B;AAAA,QACF,OAAO;AACL,cAAI,KAAK,MAAM,UAAU,QAAQ;AAC/B,mBAAO;AAAA,cAAC;AAAA;AAAA,gBACL,GAAG;AAAA,gBACJ,MAAM,KAAK,MAAM,UAAU;AAAA,gBAC3B,QAAQ,KAAK,MAAM,UAAU;AAAA;AAAA,YAC/B;AAAA,UACF,OAAO;AACL,mBAAO;AAAA,cAAC;AAAA;AAAA,gBACL,GAAG;AAAA,gBACJ,WAAW,KAAK,MAAM;AAAA,gBACtB,MAAM,KAAK,MAAM,UAAU;AAAA;AAAA,YAC7B;AAAA,UACF;AAAA,QACF;AAAA,MACF;AAAS,eAAO;AAAA,IAChB;AAAA,EACF;AAAA,EAEA,SAAS;AACP,WACE,oBAAC,SAAI,eAAa,gBAAc,KAAK,MAAM,WACxC,eAAK,WAAW,GACnB;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8a7e9c26497bbcdc9141a7bf10d3ed50f729d679"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return fo=function(){return a},a}fo();const Tde=(fo().s[0]++,["background-pattern","fill-pattern","line-pattern","fill-extrusion-pattern","icon-image"]);let Ey=class extends nr.Component{childNodes(){var t,r;fo().f[0]++;const e=(fo().s[1]++,{error:this.props.error,fieldSpec:this.props.fieldSpec,label:this.props.label,action:this.props.action,style:this.props.style,value:this.props.value,default:(t=this.props.fieldSpec)==null?void 0:t.default,name:this.props.fieldName,"data-wd-key":"spec-field-input:"+this.props.fieldName,onChange:i=>(fo().f[1]++,fo().s[2]++,this.props.onChange(this.props.fieldName,i)),"aria-label":this.props["aria-label"]});switch(fo().s[3]++,(r=this.props.fieldSpec)==null?void 0:r.type){case"number":return fo().b[0][0]++,fo().s[4]++,ue.jsx(um,{...e,min:this.props.fieldSpec.minimum,max:this.props.fieldSpec.maximum});case"enum":fo().b[0][1]++;{const i=(fo().s[5]++,Object.keys((fo().b[1][0]++,this.props.fieldSpec.values||(fo().b[1][1]++,[]))).map(s=>(fo().f[2]++,fo().s[6]++,[s,QO(s)])));return fo().s[7]++,ue.jsx(AI,{...e,options:i})}case"resolvedImage":fo().b[0][2]++;case"formatted":fo().b[0][3]++;case"string":if(fo().b[0][4]++,fo().s[8]++,Tde.indexOf(this.props.fieldName)>=0){fo().b[2][0]++;const i=(fo().s[9]++,fo().b[3][0]++,this.props.fieldSpec.values||(fo().b[3][1]++,[]));return fo().s[10]++,ue.jsx(rv,{...e,options:i.map(s=>(fo().f[3]++,fo().s[11]++,[s,s]))})}else return fo().b[2][1]++,fo().s[12]++,ue.jsx(Qf,{...e});case"color":return fo().b[0][5]++,fo().s[13]++,ue.jsx(sG,{...e});case"boolean":return fo().b[0][6]++,fo().s[14]++,ue.jsx(uI,{...e});case"array":return fo().b[0][7]++,fo().s[15]++,this.props.fieldName==="text-font"?(fo().b[4][0]++,fo().s[16]++,ue.jsx(AG,{...e,fonts:this.props.fieldSpec.values})):(fo().b[4][1]++,fo().s[17]++,this.props.fieldSpec.length?(fo().b[5][0]++,fo().s[18]++,ue.jsx(aG,{...e,type:this.props.fieldSpec.value,length:this.props.fieldSpec.length})):(fo().b[5][1]++,fo().s[19]++,ue.jsx(uG,{...e,fieldSpec:this.props.fieldSpec,type:this.props.fieldSpec.value})));default:return fo().b[0][8]++,fo().s[20]++,null}}render(){return fo().f[4]++,fo().s[21]++,ue.jsx("div",{"data-wd-key":"spec-field:"+this.props.fieldName,children:this.childNodes()})}};function YA(){var n="/home/runner/work/maputnik/maputnik/src/components/Fieldset.tsx",e="81a841bc0059d656029a86501c08aa823d58e2d6",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/Fieldset.tsx",statementMap:{0:{start:{line:9,column:4},end:{line:9,column:17}},1:{start:{line:10,column:4},end:{line:10,column:56}},2:{start:{line:11,column:4},end:{line:13,column:6}},3:{start:{line:15,column:16},end:{line:19,column:3}},4:{start:{line:16,column:4},end:{line:18,column:7}},5:{start:{line:21,column:4},end:{line:41,column:9}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:21},end:{line:14,column:3}},line:8},1:{name:"(anonymous_1)",decl:{start:{line:15,column:16},end:{line:15,column:17}},loc:{start:{line:15,column:25},end:{line:19,column:3}},line:15},2:{name:"(anonymous_2)",decl:{start:{line:20,column:2},end:{line:20,column:3}},loc:{start:{line:20,column:11},end:{line:42,column:3}},line:20}},branchMap:{0:{loc:{start:{line:22,column:6},end:{line:29,column:10}},type:"binary-expr",locations:[{start:{line:22,column:6},end:{line:22,column:26}},{start:{line:22,column:46},end:{line:29,column:10}}],line:22},1:{loc:{start:{line:30,column:6},end:{line:30,column:130}},type:"binary-expr",locations:[{start:{line:30,column:6},end:{line:30,column:27}},{start:{line:30,column:47},end:{line:30,column:130}}],line:30},2:{loc:{start:{line:33,column:6},end:{line:40,column:7}},type:"binary-expr",locations:[{start:{line:33,column:6},end:{line:33,column:26}},{start:{line:33,column:46},end:{line:40,column:7}}],line:33},3:{loc:{start:{line:37,column:28},end:{line:37,column:60}},type:"cond-expr",locations:[{start:{line:37,column:49},end:{line:37,column:51}},{start:{line:37,column:54},end:{line:37,column:60}}],line:37}},s:{0:0,1:0,2:0,3:0,4:0,5:0},f:{0:0,1:0,2:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Fieldset.tsx"],names:[],mappings:"AAiCW,SAGD,KAHC;AAjCX,OAAO,WAAgD;AACvD,OAAO,mBAAmB;AAC1B,OAAO,SAAS;AAChB,OAAO,sBAAsB;AAY7B,qBAAqB,iBAAiB,MAAM,UAAwC;AAAA,EAClF;AAAA,EAEA,YAAa,OAAsB;AACjC,UAAM,KAAK;AACX,SAAK,WAAW,iBAAiB,iBAAiB;AAClD,SAAK,QAAQ;AAAA,MACX,SAAS;AAAA,IACX;AAAA,EACF;AAAA,EAEA,cAAc,CAAC,QAAiB;AAC9B,SAAK,SAAS;AAAA,MACZ,SAAS;AAAA,IACX,CAAC;AAAA,EACH;AAAA,EAEA,SAAU;AACR,WAAO,qBAAC,SAAI,WAAU,wBAAuB,MAAK,SAAQ,mBAAiB,KAAK,UAC7E;AAAA,WAAK,MAAM,aACV,oBAAC,SAAI,WAAU,8BACb;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,KAAK,MAAM;AAAA,UAClB,aAAa,KAAK;AAAA,UAClB,WAAW,KAAK,MAAM;AAAA;AAAA,MACxB,GACF;AAAA,MAED,CAAC,KAAK,MAAM,aACX,oBAAC,SAAI,WAAU,8BACZ,eAAK,MAAM,OACd;AAAA,MAEF,oBAAC,SAAI,WAAU,+BACZ,eAAK,MAAM,QACd;AAAA,MACA,oBAAC,SAAI,WAAU,gCACZ,eAAK,MAAM,UACd;AAAA,MACC,KAAK,MAAM,aACV;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,OAAO,EAAC,SAAS,KAAK,MAAM,UAAU,KAAK,OAAM;AAAA,UAEjD,8BAAC,OAAI,WAAW,KAAK,MAAM,WAAW;AAAA;AAAA,MACxC;AAAA,OAEJ;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"81a841bc0059d656029a86501c08aa823d58e2d6"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return YA=function(){return a},a}YA();class QC extends nr.Component{constructor(t){YA().f[0]++,YA().s[0]++;super(t);Pn(this,"_labelId");Pn(this,"onToggleDoc",(YA().s[3]++,t=>{YA().f[1]++,YA().s[4]++,this.setState({showDoc:t})}));YA().s[1]++,this._labelId=Ny("fieldset_label_"),YA().s[2]++,this.state={showDoc:!1}}render(){return YA().f[2]++,YA().s[5]++,ue.jsxs("div",{className:"maputnik-input-block",role:"group","aria-labelledby":this._labelId,children:[(YA().b[0][0]++,this.props.fieldSpec&&(YA().b[0][1]++,ue.jsx("div",{className:"maputnik-input-block-label",children:ue.jsx(LO,{label:this.props.label,onToggleDoc:this.onToggleDoc,fieldSpec:this.props.fieldSpec})}))),(YA().b[1][0]++,!this.props.fieldSpec&&(YA().b[1][1]++,ue.jsx("div",{className:"maputnik-input-block-label",children:this.props.label}))),ue.jsx("div",{className:"maputnik-input-block-action",children:this.props.action}),ue.jsx("div",{className:"maputnik-input-block-content",children:this.props.children}),(YA().b[2][0]++,this.props.fieldSpec&&(YA().b[2][1]++,ue.jsx("div",{className:"maputnik-doc-inline",style:{display:this.state.showDoc?(YA().b[3][0]++,""):(YA().b[3][1]++,"none")},children:ue.jsx(UO,{fieldSpec:this.props.fieldSpec})})))]})}}function Hs(){var n="/home/runner/work/maputnik/maputnik/src/components/SpecField.tsx",e="adadf49dc291f98804cd53f74e320ed51f276886",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/SpecField.tsx",statementMap:{0:{start:{line:6,column:16},end:{line:16,column:1}},1:{start:{line:7,column:15},end:{line:7,column:20}},2:{start:{line:8,column:27},end:{line:8,column:87}},3:{start:{line:9,column:17},end:{line:9,column:22}},4:{start:{line:10,column:15},end:{line:10,column:23}},5:{start:{line:11,column:23},end:{line:11,column:28}},6:{start:{line:12,column:16},end:{line:12,column:21}},7:{start:{line:13,column:16},end:{line:13,column:21}},8:{start:{line:14,column:19},end:{line:14,column:24}},9:{start:{line:15,column:17},end:{line:15,column:22}},10:{start:{line:19,column:22},end:{line:19,column:48}},11:{start:{line:20,column:24},end:{line:20,column:42}},12:{start:{line:22,column:4},end:{line:27,column:5}},13:{start:{line:23,column:6},end:{line:23,column:42}},14:{start:{line:25,column:6},end:{line:25,column:55}},15:{start:{line:26,column:6},end:{line:26,column:24}},16:{start:{line:28,column:4},end:{line:36,column:6}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:9},end:{line:7,column:10}},loc:{start:{line:7,column:15},end:{line:7,column:20}},line:7},1:{name:"(anonymous_1)",decl:{start:{line:8,column:8},end:{line:8,column:9}},loc:{start:{line:8,column:27},end:{line:8,column:87}},line:8},2:{name:"(anonymous_2)",decl:{start:{line:9,column:11},end:{line:9,column:12}},loc:{start:{line:9,column:17},end:{line:9,column:22}},line:9},3:{name:"(anonymous_3)",decl:{start:{line:10,column:9},end:{line:10,column:10}},loc:{start:{line:10,column:15},end:{line:10,column:23}},line:10},4:{name:"(anonymous_4)",decl:{start:{line:11,column:17},end:{line:11,column:18}},loc:{start:{line:11,column:23},end:{line:11,column:28}},line:11},5:{name:"(anonymous_5)",decl:{start:{line:12,column:10},end:{line:12,column:11}},loc:{start:{line:12,column:16},end:{line:12,column:21}},line:12},6:{name:"(anonymous_6)",decl:{start:{line:13,column:10},end:{line:13,column:11}},loc:{start:{line:13,column:16},end:{line:13,column:21}},line:13},7:{name:"(anonymous_7)",decl:{start:{line:14,column:13},end:{line:14,column:14}},loc:{start:{line:14,column:19},end:{line:14,column:24}},line:14},8:{name:"(anonymous_8)",decl:{start:{line:15,column:11},end:{line:15,column:12}},loc:{start:{line:15,column:17},end:{line:15,column:22}},line:15},9:{name:"(anonymous_9)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:11},end:{line:37,column:3}},line:18}},branchMap:{0:{loc:{start:{line:8,column:27},end:{line:8,column:87}},type:"cond-expr",locations:[{start:{line:8,column:71},end:{line:8,column:79}},{start:{line:8,column:82},end:{line:8,column:87}}],line:8},1:{loc:{start:{line:22,column:4},end:{line:27,column:5}},type:"if",locations:[{start:{line:22,column:4},end:{line:27,column:5}},{start:{line:24,column:11},end:{line:27,column:5}}],line:22}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/SpecField.tsx"],names:[],mappings:"AA0CM;AA1CN,OAAO,WAAW;AAClB,OAAO,WAAW;AAClB,OAAO,eAA0D;AACjE,OAAO,cAAc;AAGrB,MAAM,UAAU;AAAA,EACd,OAAO,MAAM;AAAA,EACb,MAAM,CAAC,EAAC,UAAS,MAAY,OAAO,KAAK,UAAU,MAAM,EAAE,UAAU,IAAI,WAAW;AAAA,EACpF,SAAS,MAAM;AAAA,EACf,OAAO,MAAM;AAAA,EACb,eAAe,MAAM;AAAA,EACrB,QAAQ,MAAM;AAAA,EACd,QAAQ,MAAM;AAAA,EACd,WAAW,MAAM;AAAA,EACjB,SAAS,MAAM;AACjB;AAMA,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,SAAS;AACP,UAAM,YAAY,KAAK,MAAM,WAAW;AAExC,UAAM,cAAc,QAAQ,SAAU;AAEtC,QAAI;AACJ,QAAI,aAAa;AACf,kBAAY,YAAY,KAAK,KAAK;AAAA,IACpC,OACK;AACH,cAAQ,KAAK,yBAAyB,SAAS;AAC/C,kBAAY;AAAA,IACd;AAEA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,OAAO,KAAK,MAAM;AAAA,QAClB,QAAQ,KAAK,MAAM;AAAA,QACnB,WAAW,KAAK,MAAM;AAAA,QAEtB,8BAAC,aAAW,GAAG,KAAK,OAAO;AAAA;AAAA,IAC7B;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"adadf49dc291f98804cd53f74e320ed51f276886"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Hs=function(){return a},a}Hs();const Pde=(Hs().s[0]++,{color:()=>(Hs().f[0]++,Hs().s[1]++,fa),enum:({fieldSpec:n})=>(Hs().f[1]++,Hs().s[2]++,Object.keys(n.values).length<=3?(Hs().b[0][0]++,QC):(Hs().b[0][1]++,fa)),boolean:()=>(Hs().f[2]++,Hs().s[3]++,fa),array:()=>(Hs().f[3]++,Hs().s[4]++,QC),resolvedImage:()=>(Hs().f[4]++,Hs().s[5]++,fa),number:()=>(Hs().f[5]++,Hs().s[6]++,fa),string:()=>(Hs().f[6]++,Hs().s[7]++,fa),formatted:()=>(Hs().f[7]++,Hs().s[8]++,fa),padding:()=>(Hs().f[8]++,Hs().s[9]++,fa)});class Kde extends nr.Component{render(){var i;Hs().f[9]++;const e=(Hs().s[10]++,(i=this.props.fieldSpec)==null?void 0:i.type),t=(Hs().s[11]++,Pde[e]);let r;return Hs().s[12]++,t?(Hs().b[1][0]++,Hs().s[13]++,r=t(this.props)):(Hs().b[1][1]++,Hs().s[14]++,console.warn("No such type for '%s'",e),Hs().s[15]++,r=fa),Hs().s[16]++,ue.jsx(r,{label:this.props.label,action:this.props.action,fieldSpec:this.props.fieldSpec,children:ue.jsx(Ey,{...this.props})})}}function ld(){var n="/home/runner/work/maputnik/maputnik/src/components/_FunctionButtons.tsx",e="e12cc9e5c91261e7ee42544334f5ab56bdde4e3a",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/_FunctionButtons.tsx",statementMap:{0:{start:{line:9,column:14},end:{line:9,column:26}},1:{start:{line:11,column:4},end:{line:48,column:5}},2:{start:{line:12,column:6},end:{line:20,column:8}},3:{start:{line:21,column:6},end:{line:29,column:8}},4:{start:{line:30,column:6},end:{line:40,column:7}},5:{start:{line:31,column:8},end:{line:39,column:10}},6:{start:{line:41,column:6},end:{line:45,column:11}},7:{start:{line:47,column:6},end:{line:47,column:77}},8:{start:{line:51,column:29},end:{line:51,column:76}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:11},end:{line:49,column:3}},line:8}},branchMap:{0:{loc:{start:{line:11,column:4},end:{line:48,column:5}},type:"if",locations:[{start:{line:11,column:4},end:{line:48,column:5}},{start:{line:46,column:11},end:{line:48,column:5}}],line:11},1:{loc:{start:{line:30,column:6},end:{line:40,column:7}},type:"if",locations:[{start:{line:30,column:6},end:{line:40,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:30}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},f:{0:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_FunctionButtons.tsx"],names:[],mappings:"AA2BY,cAsBC,YAtBD;AA3BZ,OAAO,WAAW;AAElB,OAAO,iBAAiB;AACxB,SAAQ,aAAa,qBAAoB;AACzC,SAAQ,0BAAyB;AACjC,SAA0B,uBAAuB;AASjD,MAAM,qCAAqC,MAAM,UAA6C;AAAA,EAC5F,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,QAAI,qBAAqB,qBAAqB;AAE9C,QAAI,KAAK,MAAM,UAAU,WAAW,WAAW,SAAS,MAAM,GAAG;AAC/D,8BACE;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,SAAS,KAAK,MAAM;AAAA,UACpB,OAAO,EAAE,uBAAuB;AAAA,UAEhC,8BAAC,SAAI,OAAO,EAAC,OAAM,QAAQ,QAAO,QAAQ,eAAe,SAAQ,GAAG,SAAQ,aAC1E,8BAAC,UAAK,MAAK,gBAAe,GAAG,oBAAoB,GACnD;AAAA;AAAA,MACF;AAGF,4BAAsB;AAAA,QAAC;AAAA;AAAA,UACrB,WAAU;AAAA,UACV,SAAS,KAAK,MAAM;AAAA,UACpB,OAAO,EAAE,uCAAuC;AAAA,UAEhD,8BAAC,eAAY;AAAA;AAAA,MACf;AAEA,UAAI,KAAK,MAAM,UAAU,eAAe,MAAM,eAAe;AAC3D,8BAAsB;AAAA,UAAC;AAAA;AAAA,YACrB,WAAU;AAAA,YACV,SAAS,KAAK,MAAM;AAAA,YACpB,OAAO,EAAE,mCAAmC;AAAA,YAE5C,8BAAC,iBAAc;AAAA;AAAA,QACjB;AAAA,MACF;AACA,aAAO,qBAAC,SACL;AAAA;AAAA,QACA;AAAA,QACA;AAAA,SACH;AAAA,IACF,OACK;AACH,aAAO,oBAAC,SAAK,iCAAsB;AAAA,IACrC;AAAA,EACF;AACF;AAEA,MAAM,uBAAuB,gBAAgB,EAAE,4BAA4B;AAC3E,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e12cc9e5c91261e7ee42544334f5ab56bdde4e3a"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return ld=function(){return a},a}ld();class Dde extends nr.Component{render(){ld().f[0]++;const e=(ld().s[0]++,this.props.t);let t,r,i;return ld().s[1]++,this.props.fieldSpec.expression.parameters.includes("zoom")?(ld().b[0][0]++,ld().s[2]++,i=ue.jsx(Ja,{className:"maputnik-make-zoom-function",onClick:this.props.onExpressionClick,title:e("Convert to expression"),children:ue.jsx("svg",{style:{width:"14px",height:"14px",verticalAlign:"middle"},viewBox:"0 0 24 24",children:ue.jsx("path",{fill:"currentColor",d:GC})})}),ld().s[3]++,t=ue.jsx(Ja,{className:"maputnik-make-zoom-function",onClick:this.props.onZoomClick,title:e("Convert property into a zoom function"),children:ue.jsx(UZ,{})}),ld().s[4]++,this.props.fieldSpec["property-type"]==="data-driven"?(ld().b[1][0]++,ld().s[5]++,r=ue.jsx(Ja,{className:"maputnik-make-data-function",onClick:this.props.onDataClick,title:e("Convert property to data function"),children:ue.jsx(zZ,{})})):ld().b[1][1]++,ld().s[6]++,ue.jsxs("div",{children:[i,r,t]})):(ld().b[0][1]++,ld().s[7]++,ue.jsx("div",{children:i}))}}const Rde=(ld().s[8]++,Ns()(Dde));function Gp(){var n="/home/runner/work/maputnik/maputnik/src/components/_SpecProperty.tsx",e="60f6f0f35f3e44d7e7f08e2966cfff09ee69557d",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/_SpecProperty.tsx",statementMap:{0:{start:{line:7,column:24},end:{line:9,column:3}},1:{start:{line:11,column:45},end:{line:11,column:55}},2:{start:{line:12,column:40},end:{line:20,column:5}},3:{start:{line:21,column:18},end:{line:21,column:53}},4:{start:{line:22,column:4},end:{line:31,column:6}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:32,column:3}},line:10}},branchMap:{0:{loc:{start:{line:28,column:34},end:{line:28,column:60}},type:"binary-expr",locations:[{start:{line:28,column:34},end:{line:28,column:54}},{start:{line:28,column:58},end:{line:28,column:60}}],line:28}},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_SpecProperty.tsx"],names:[],mappings:"AA4BwB;AA5BxB,OAAO,WAAW;AAElB,OAAO,eAAiC;AACxC,OAAO,qBAAqB;AAE5B,OAAO,wBAAwB;AAe/B,qBAAqB,qBAAqB,MAAM,UAA6B;AAAA,EAC3E,OAAO,eAAe;AAAA,IACpB,QAAQ,CAAC;AAAA,EACX;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,QAAQ,WAAW,UAAS,IAAI,KAAK;AAE5C,UAAM,cAAc;AAAA,MAAC;AAAA;AAAA,QACnB,WAAW,KAAK,MAAM;AAAA,QACtB,aAAa,KAAK,MAAM;AAAA,QACxB,aAAa,KAAK,MAAM;AAAA,QACxB,mBAAmB,KAAK,MAAM;AAAA;AAAA,IAChC;AAEA,UAAM,QAAQ,OAAQ,YAAU,MAAI,SAAgB;AAEpD,WAAO;AAAA,MAAC;AAAA;AAAA,QACL,GAAG,KAAK;AAAA,QACT;AAAA,QACA,WAAW,KAAK,MAAM;AAAA,QACtB,OAAO,mBAAmB,KAAK,MAAM,aAAa,EAAE;AAAA,QACpD,QAAQ;AAAA;AAAA,IACV;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"60f6f0f35f3e44d7e7f08e2966cfff09ee69557d"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Gp=function(){return a},a}Gp();class cG extends nr.Component{render(){Gp().f[0]++;const{errors:e,fieldName:t,fieldType:r}=(Gp().s[1]++,this.props),i=(Gp().s[2]++,ue.jsx(Rde,{fieldSpec:this.props.fieldSpec,onZoomClick:this.props.onZoomClick,onDataClick:this.props.onDataClick,onExpressionClick:this.props.onExpressionClick})),s=(Gp().s[3]++,e[r+"."+t]);return Gp().s[4]++,ue.jsx(Kde,{...this.props,error:s,fieldSpec:this.props.fieldSpec,label:y3((Gp().b[0][0]++,this.props.fieldName||(Gp().b[0][1]++,""))),action:i})}}Pn(cG,"defaultProps",(Gp().s[0]++,{errors:{}}));function uh(){var n="/home/runner/work/maputnik/maputnik/src/libs/sort-numerically.ts",e="e8906f642b33ab7d7a780fc0db870f7e4872d29c",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/sort-numerically.ts",statementMap:{0:{start:{line:2,column:12},end:{line:2,column:17}},1:{start:{line:3,column:12},end:{line:3,column:17}},2:{start:{line:4,column:2},end:{line:10,column:3}},3:{start:{line:5,column:4},end:{line:5,column:14}},4:{start:{line:6,column:9},end:{line:10,column:3}},5:{start:{line:7,column:4},end:{line:7,column:13}},6:{start:{line:9,column:4},end:{line:9,column:13}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:1,column:15},end:{line:1,column:16}},loc:{start:{line:1,column:36},end:{line:11,column:1}},line:1}},branchMap:{0:{loc:{start:{line:4,column:2},end:{line:10,column:3}},type:"if",locations:[{start:{line:4,column:2},end:{line:10,column:3}},{start:{line:6,column:9},end:{line:10,column:3}}],line:4},1:{loc:{start:{line:6,column:9},end:{line:10,column:3}},type:"if",locations:[{start:{line:6,column:9},end:{line:10,column:3}},{start:{line:8,column:9},end:{line:10,column:3}}],line:6}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/sort-numerically.ts"],names:[],mappings:"AAAA,wBAAwB,MAAuB,MAAsB;AACnE,QAAM,IAAI,CAAC;AACX,QAAM,IAAI,CAAC;AAEX,MAAG,IAAI,GAAG;AACR,WAAO;AAAA,EACT,WACQ,IAAI,GAAG;AACb,WAAO;AAAA,EACT,OACK;AACH,WAAO;AAAA,EACT;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e8906f642b33ab7d7a780fc0db870f7e4872d29c"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return uh=function(){return a},a}uh();function dG(n,e){uh().f[0]++;const t=(uh().s[0]++,+n),r=(uh().s[1]++,+e);return uh().s[2]++,t<r?(uh().b[0][0]++,uh().s[3]++,-1):(uh().b[0][1]++,uh().s[4]++,t>r?(uh().b[1][0]++,uh().s[5]++,1):(uh().b[1][1]++,uh().s[6]++,0))}function dp(){var n="/home/runner/work/maputnik/maputnik/src/libs/spec-helper.ts",e="2f98128f0f990b67a049c58486c1fab4310fbcfa",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/spec-helper.ts",statementMap:{0:{start:{line:2,column:2},end:{line:4,column:3}},1:{start:{line:3,column:4},end:{line:3,column:24}},2:{start:{line:5,column:19},end:{line:11,column:3}},3:{start:{line:12,column:2},end:{line:12,column:35}}},fnMap:{0:{name:"findDefaultFromSpec",decl:{start:{line:1,column:16},end:{line:1,column:35}},loc:{start:{line:1,column:42},end:{line:13,column:1}},line:1}},branchMap:{0:{loc:{start:{line:2,column:2},end:{line:4,column:3}},type:"if",locations:[{start:{line:2,column:2},end:{line:4,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:2},1:{loc:{start:{line:12,column:9},end:{line:12,column:34}},type:"binary-expr",locations:[{start:{line:12,column:9},end:{line:12,column:28}},{start:{line:12,column:32},end:{line:12,column:34}}],line:12}},s:{0:0,1:0,2:0,3:0},f:{0:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/spec-helper.ts"],names:[],mappings:"AAGO,gBAAS,oBAAoB,MAAyE;AAC3G,MAAI,OAAO,UAAU,eAAe,KAAK,MAAM,SAAS,GAAG;AACzD,WAAO,KAAK;AAAA,EACd;AAEA,QAAM,WAAW;AAAA,IACf,SAAS;AAAA,IACT,UAAU;AAAA,IACV,WAAW;AAAA,IACX,UAAU;AAAA,IACV,SAAS,CAAC;AAAA,EACZ;AAEA,SAAO,SAAS,KAAK,IAAI,KAAK;AAChC;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2f98128f0f990b67a049c58486c1fab4310fbcfa"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return dp=function(){return a},a}dp();function Pf(n){if(dp().f[0]++,dp().s[0]++,Object.prototype.hasOwnProperty.call(n,"default"))return dp().b[0][0]++,dp().s[1]++,n.default;dp().b[0][1]++;const e=(dp().s[2]++,{color:"#000000",string:"",boolean:!1,number:0,array:[]});return dp().s[3]++,dp().b[1][0]++,e[n.type]||(dp().b[1][1]++,"")}function By(){var n="/home/runner/work/maputnik/maputnik/src/components/_DeleteStopButton.tsx",e="04a32613b456a577be3ef20dcd48d43233f27837",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/_DeleteStopButton.tsx",statementMap:{0:{start:{line:8,column:14},end:{line:8,column:26}},1:{start:{line:9,column:4},end:{line:17,column:6}},2:{start:{line:20,column:25},end:{line:20,column:68}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:11},end:{line:18,column:3}},line:7}},branchMap:{},s:{0:0,1:0,2:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_DeleteStopButton.tsx"],names:[],mappings:"AAoBM;AApBN,OAAO,WAAW;AAElB,OAAO,iBAAiB;AACxB,SAAQ,gBAAe;AACvB,SAA0B,uBAAuB;AAQjD,MAAM,iCAAiC,MAAM,UAAyC;AAAA,EACpF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,SAAS,KAAK,MAAM;AAAA,QACpB,OAAO,EAAE,6BAA6B;AAAA,QAEtC,8BAAC,YAAS;AAAA;AAAA,IACZ;AAAA,EACF;AACF;AAEA,MAAM,mBAAmB,gBAAgB,EAAE,wBAAwB;AACnE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"04a32613b456a577be3ef20dcd48d43233f27837"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return By=function(){return a},a}By();class Fde extends nr.Component{render(){By().f[0]++;const e=(By().s[0]++,this.props.t);return By().s[1]++,ue.jsx(Ja,{className:"maputnik-delete-stop",onClick:this.props.onClick,title:e("Remove zoom level from stop"),children:ue.jsx($y,{})})}}const hG=(By().s[2]++,Ns()(Fde));function mn(){var n="/home/runner/work/maputnik/maputnik/src/components/_DataProperty.tsx",e="97b6de35ac4a8f739cf06eabc39facf249622fab",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/_DataProperty.tsx",statementMap:{0:{start:{line:19,column:2},end:{line:28,column:3}},1:{start:{line:20,column:4},end:{line:27,column:7}},2:{start:{line:21,column:6},end:{line:26,column:7}},3:{start:{line:22,column:8},end:{line:24,column:9}},4:{start:{line:23,column:10},end:{line:23,column:33}},5:{start:{line:25,column:8},end:{line:25,column:39}},6:{start:{line:29,column:2},end:{line:29,column:17}},7:{start:{line:32,column:10},end:{line:34,column:3}},8:{start:{line:36,column:20},end:{line:36,column:55}},9:{start:{line:37,column:4},end:{line:41,column:5}},10:{start:{line:38,column:6},end:{line:40,column:9}},11:{start:{line:44,column:20},end:{line:44,column:45}},12:{start:{line:45,column:4},end:{line:49,column:5}},13:{start:{line:46,column:6},end:{line:48,column:8}},14:{start:{line:50,column:4},end:{line:50,column:16}},15:{start:{line:53,column:4},end:{line:55,column:5}},16:{start:{line:54,column:6},end:{line:54,column:27}},17:{start:{line:56,column:4},end:{line:58,column:5}},18:{start:{line:57,column:6},end:{line:57,column:24}},19:{start:{line:59,column:4},end:{line:59,column:25}},20:{start:{line:62,column:4},end:{line:66,column:5}},21:{start:{line:63,column:6},end:{line:63,column:83}},22:{start:{line:65,column:6},end:{line:65,column:53}},23:{start:{line:70,column:26},end:{line:75,column:70}},24:{start:{line:71,column:6},end:{line:74,column:8}},25:{start:{line:75,column:22},end:{line:75,column:69}},26:{start:{line:76,column:20},end:{line:76,column:22}},27:{start:{line:77,column:4},end:{line:79,column:7}},28:{start:{line:78,column:6},end:{line:78,column:30}},29:{start:{line:80,column:4},end:{line:82,column:7}},30:{start:{line:83,column:4},end:{line:83,column:50}},31:{start:{line:83,column:39},end:{line:83,column:48}},32:{start:{line:85,column:13},end:{line:105,column:3}},33:{start:{line:86,column:4},end:{line:103,column:5}},34:{start:{line:87,column:6},end:{line:90,column:8}},35:{start:{line:92,column:24},end:{line:92,column:61}},36:{start:{line:93,column:6},end:{line:102,column:8}},37:{start:{line:104,column:4},end:{line:104,column:42}},38:{start:{line:107,column:18},end:{line:107,column:56}},39:{start:{line:108,column:4},end:{line:114,column:6}},40:{start:{line:115,column:25},end:{line:115,column:53}},41:{start:{line:116,column:25},end:{line:119,column:5}},42:{start:{line:120,column:4},end:{line:120,column:54}},43:{start:{line:123,column:25},end:{line:126,column:5}},44:{start:{line:127,column:4},end:{line:129,column:5}},45:{start:{line:128,column:6},end:{line:128,column:34}},46:{start:{line:130,column:4},end:{line:130,column:60}},47:{start:{line:133,column:4},end:{line:140,column:5}},48:{start:{line:134,column:6},end:{line:134,column:42}},49:{start:{line:136,column:6},end:{line:139,column:9}},50:{start:{line:143,column:4},end:{line:147,column:5}},51:{start:{line:144,column:6},end:{line:144,column:43}},52:{start:{line:146,column:6},end:{line:146,column:40}},53:{start:{line:148,column:4},end:{line:148,column:58}},54:{start:{line:151,column:14},end:{line:151,column:26}},55:{start:{line:152,column:4},end:{line:154,column:5}},56:{start:{line:153,column:6},end:{line:153,column:78}},57:{start:{line:156,column:4},end:{line:204,column:5}},58:{start:{line:157,column:6},end:{line:203,column:9}},59:{start:{line:158,column:26},end:{line:158,column:77}},60:{start:{line:159,column:20},end:{line:159,column:40}},61:{start:{line:160,column:26},end:{line:160,column:79}},62:{start:{line:161,column:22},end:{line:161,column:29}},63:{start:{line:162,column:46},end:{line:162,column:122}},64:{start:{line:163,column:26},end:{line:168,column:9}},65:{start:{line:167,column:33},end:{line:167,column:97}},66:{start:{line:170,column:8},end:{line:174,column:9}},67:{start:{line:171,column:10},end:{line:171,column:73}},68:{start:{line:173,column:10},end:{line:173,column:73}},69:{start:{line:175,column:24},end:{line:175,column:28}},70:{start:{line:176,column:8},end:{line:187,column:9}},71:{start:{line:177,column:10},end:{line:186,column:15}},72:{start:{line:182,column:37},end:{line:182,column:101}},73:{start:{line:188,column:8},end:{line:202,column:18}},74:{start:{line:198,column:41},end:{line:198,column:110}},75:{start:{line:205,column:4},end:{line:307,column:12}},76:{start:{line:216,column:39},end:{line:216,column:67}},77:{start:{line:234,column:43},end:{line:234,column:68}},78:{start:{line:249,column:39},end:{line:249,column:83}},79:{start:{line:265,column:42},end:{line:265,column:85}},80:{start:{line:310,column:21},end:{line:310,column:60}}},fnMap:{0:{name:"setStopRefs",decl:{start:{line:17,column:9},end:{line:17,column:20}},loc:{start:{line:17,column:35},end:{line:30,column:1}},line:17},1:{name:"(anonymous_1)",decl:{start:{line:20,column:30},end:{line:20,column:31}},loc:{start:{line:20,column:45},end:{line:27,column:5}},line:20},2:{name:"(anonymous_2)",decl:{start:{line:35,column:2},end:{line:35,column:3}},loc:{start:{line:35,column:22},end:{line:42,column:3}},line:35},3:{name:"(anonymous_3)",decl:{start:{line:43,column:2},end:{line:43,column:3}},loc:{start:{line:43,column:48},end:{line:51,column:3}},line:43},4:{name:"(anonymous_4)",decl:{start:{line:52,column:2},end:{line:52,column:3}},loc:{start:{line:52,column:34},end:{line:60,column:3}},line:52},5:{name:"(anonymous_5)",decl:{start:{line:61,column:2},end:{line:61,column:3}},loc:{start:{line:61,column:34},end:{line:67,column:3}},line:61},6:{name:"(anonymous_6)",decl:{start:{line:69,column:2},end:{line:69,column:3}},loc:{start:{line:69,column:26},end:{line:84,column:3}},line:69},7:{name:"(anonymous_7)",decl:{start:{line:70,column:36},end:{line:70,column:37}},loc:{start:{line:70,column:51},end:{line:75,column:5}},line:70},8:{name:"(anonymous_8)",decl:{start:{line:75,column:12},end:{line:75,column:13}},loc:{start:{line:75,column:22},end:{line:75,column:69}},line:75},9:{name:"(anonymous_9)",decl:{start:{line:77,column:26},end:{line:77,column:27}},loc:{start:{line:77,column:41},end:{line:79,column:5}},line:77},10:{name:"(anonymous_10)",decl:{start:{line:83,column:29},end:{line:83,column:30}},loc:{start:{line:83,column:39},end:{line:83,column:48}},line:83},11:{name:"(anonymous_11)",decl:{start:{line:85,column:13},end:{line:85,column:14}},loc:{start:{line:85,column:35},end:{line:105,column:3}},line:85},12:{name:"(anonymous_12)",decl:{start:{line:106,column:2},end:{line:106,column:3}},loc:{start:{line:106,column:41},end:{line:121,column:3}},line:106},13:{name:"(anonymous_13)",decl:{start:{line:122,column:2},end:{line:122,column:3}},loc:{start:{line:122,column:23},end:{line:131,column:3}},line:122},14:{name:"(anonymous_14)",decl:{start:{line:132,column:2},end:{line:132,column:3}},loc:{start:{line:132,column:26},end:{line:141,column:3}},line:132},15:{name:"(anonymous_15)",decl:{start:{line:142,column:2},end:{line:142,column:3}},loc:{start:{line:142,column:40},end:{line:149,column:3}},line:142},16:{name:"(anonymous_16)",decl:{start:{line:150,column:2},end:{line:150,column:3}},loc:{start:{line:150,column:11},end:{line:308,column:3}},line:150},17:{name:"(anonymous_17)",decl:{start:{line:157,column:46},end:{line:157,column:47}},loc:{start:{line:157,column:61},end:{line:203,column:7}},line:157},18:{name:"(anonymous_18)",decl:{start:{line:167,column:20},end:{line:167,column:21}},loc:{start:{line:167,column:33},end:{line:167,column:97}},line:167},19:{name:"(anonymous_19)",decl:{start:{line:182,column:24},end:{line:182,column:25}},loc:{start:{line:182,column:37},end:{line:182,column:101}},line:182},20:{name:"(anonymous_20)",decl:{start:{line:198,column:24},end:{line:198,column:25}},loc:{start:{line:198,column:41},end:{line:198,column:110}},line:198},21:{name:"(anonymous_21)",decl:{start:{line:216,column:26},end:{line:216,column:27}},loc:{start:{line:216,column:39},end:{line:216,column:67}},line:216},22:{name:"(anonymous_22)",decl:{start:{line:234,column:26},end:{line:234,column:27}},loc:{start:{line:234,column:43},end:{line:234,column:68}},line:234},23:{name:"(anonymous_23)",decl:{start:{line:249,column:26},end:{line:249,column:27}},loc:{start:{line:249,column:39},end:{line:249,column:83}},line:249},24:{name:"(anonymous_24)",decl:{start:{line:265,column:26},end:{line:265,column:27}},loc:{start:{line:265,column:42},end:{line:265,column:85}},line:265}},branchMap:{0:{loc:{start:{line:19,column:2},end:{line:28,column:3}},type:"if",locations:[{start:{line:19,column:2},end:{line:28,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:19},1:{loc:{start:{line:19,column:6},end:{line:19,column:38}},type:"binary-expr",locations:[{start:{line:19,column:6},end:{line:19,column:17}},{start:{line:19,column:21},end:{line:19,column:38}}],line:19},2:{loc:{start:{line:21,column:6},end:{line:26,column:7}},type:"if",locations:[{start:{line:21,column:6},end:{line:26,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:21},3:{loc:{start:{line:22,column:8},end:{line:24,column:9}},type:"if",locations:[{start:{line:22,column:8},end:{line:24,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:22},4:{loc:{start:{line:37,column:4},end:{line:41,column:5}},type:"if",locations:[{start:{line:37,column:4},end:{line:41,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},5:{loc:{start:{line:45,column:4},end:{line:49,column:5}},type:"if",locations:[{start:{line:45,column:4},end:{line:49,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:45},6:{loc:{start:{line:53,column:4},end:{line:55,column:5}},type:"if",locations:[{start:{line:53,column:4},end:{line:55,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:53},7:{loc:{start:{line:56,column:4},end:{line:58,column:5}},type:"if",locations:[{start:{line:56,column:4},end:{line:58,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:56},8:{loc:{start:{line:62,column:4},end:{line:66,column:5}},type:"if",locations:[{start:{line:62,column:4},end:{line:66,column:5}},{start:{line:64,column:11},end:{line:66,column:5}}],line:62},9:{loc:{start:{line:86,column:4},end:{line:103,column:5}},type:"if",locations:[{start:{line:86,column:4},end:{line:103,column:5}},{start:{line:91,column:11},end:{line:103,column:5}}],line:86},10:{loc:{start:{line:92,column:24},end:{line:92,column:61}},type:"cond-expr",locations:[{start:{line:92,column:55},end:{line:92,column:57}},{start:{line:92,column:60},end:{line:92,column:61}}],line:92},11:{loc:{start:{line:107,column:18},end:{line:107,column:56}},type:"binary-expr",locations:[{start:{line:107,column:18},end:{line:107,column:50}},{start:{line:107,column:54},end:{line:107,column:56}}],line:107},12:{loc:{start:{line:111,column:14},end:{line:111,column:58}},type:"cond-expr",locations:[{start:{line:111,column:41},end:{line:111,column:42}},{start:{line:111,column:45},end:{line:111,column:58}}],line:111},13:{loc:{start:{line:127,column:4},end:{line:129,column:5}},type:"if",locations:[{start:{line:127,column:4},end:{line:129,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:127},14:{loc:{start:{line:133,column:4},end:{line:140,column:5}},type:"if",locations:[{start:{line:133,column:4},end:{line:140,column:5}},{start:{line:135,column:11},end:{line:140,column:5}}],line:133},15:{loc:{start:{line:133,column:8},end:{line:133,column:70}},type:"binary-expr",locations:[{start:{line:133,column:8},end:{line:133,column:33}},{start:{line:133,column:37},end:{line:133,column:70}}],line:133},16:{loc:{start:{line:143,column:4},end:{line:147,column:5}},type:"if",locations:[{start:{line:143,column:4},end:{line:147,column:5}},{start:{line:145,column:11},end:{line:147,column:5}}],line:143},17:{loc:{start:{line:152,column:4},end:{line:154,column:5}},type:"if",locations:[{start:{line:152,column:4},end:{line:154,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:152},18:{loc:{start:{line:156,column:4},end:{line:204,column:5}},type:"if",locations:[{start:{line:156,column:4},end:{line:204,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:156},19:{loc:{start:{line:158,column:26},end:{line:158,column:77}},type:"cond-expr",locations:[{start:{line:158,column:56},end:{line:158,column:68}},{start:{line:158,column:71},end:{line:158,column:77}}],line:158},20:{loc:{start:{line:160,column:26},end:{line:160,column:79}},type:"cond-expr",locations:[{start:{line:160,column:56},end:{line:160,column:69}},{start:{line:160,column:72},end:{line:160,column:79}}],line:160},21:{loc:{start:{line:170,column:8},end:{line:174,column:9}},type:"if",locations:[{start:{line:170,column:8},end:{line:174,column:9}},{start:{line:172,column:15},end:{line:174,column:9}}],line:170},22:{loc:{start:{line:176,column:8},end:{line:187,column:9}},type:"if",locations:[{start:{line:176,column:8},end:{line:187,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:176},23:{loc:{start:{line:224,column:8},end:{line:239,column:9}},type:"binary-expr",locations:[{start:{line:224,column:8},end:{line:224,column:45}},{start:{line:224,column:65},end:{line:239,column:9}}],line:224},24:{loc:{start:{line:255,column:8},end:{line:270,column:9}},type:"binary-expr",locations:[{start:{line:255,column:8},end:{line:255,column:18}},{start:{line:255,column:38},end:{line:270,column:9}}],line:255},25:{loc:{start:{line:271,column:8},end:{line:279,column:15}},type:"binary-expr",locations:[{start:{line:271,column:8},end:{line:271,column:18}},{start:{line:271,column:38},end:{line:279,column:15}}],line:271},26:{loc:{start:{line:281,column:10},end:{line:292,column:11}},type:"binary-expr",locations:[{start:{line:281,column:10},end:{line:281,column:20}},{start:{line:281,column:40},end:{line:292,column:11}}],line:281}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0],26:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_DataProperty.tsx"],names:[],mappings:"AAqO8B,cA8Bf,YA9Be;AArO9B,OAAO,WAAW;AAClB,SAAQ,oBAAoB,4BAA2B;AACvD,OAAO,YAAY;AAEnB,OAAO,iBAAiB;AACxB,OAAO,eAAe;AACtB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,OAAO,YAAY;AACnB,OAAO,qBAAqB;AAC5B,SAAQ,2BAA0B;AAClC,SAA0B,uBAAuB;AAEjD,OAAO,wBAAwB;AAC/B,OAAO,sBAAsB;AAI7B,SAAS,YAAY,OAAkC,OAA0B;AAE/E,MAAI;AAEJ,MAAG,MAAM,SAAS,MAAM,MAAM,OAAO;AACnC,UAAM,MAAM,MAAM,QAAQ,CAAC,MAAM,QAAQ;AACvC,UAAG,CAAC,OAAO,UAAU,eAAe,KAAK,MAAM,MAAM,GAAG,GAAG;AACzD,YAAG,CAAC,SAAS;AACX,oBAAU,EAAC,GAAG,MAAK;AAAA,QACrB;AACA,gBAAQ,GAAG,IAAI,OAAO,OAAO;AAAA,MAC/B;AAAA,IACF,CAAC;AAAA,EACH;AAEA,SAAO;AACT;AAgCA,MAAM,6BAA6B,MAAM,UAAwD;AAAA,EAC/F,QAAQ;AAAA,IACN,MAAM,CAAC;AAAA,EACT;AAAA,EAEA,oBAAoB;AAClB,UAAM,UAAU,YAAY,KAAK,OAAO,KAAK,KAAK;AAElD,QAAG,SAAS;AACV,WAAK,SAAS;AAAA,QACZ,MAAM;AAAA,MACR,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAA4C,OAA0B;AACpG,UAAM,UAAU,YAAY,OAAO,KAAK;AACxC,QAAG,SAAS;AACV,aAAO;AAAA,QACL,MAAM;AAAA,MACR;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAAA,EAEA,qBAAqB,WAAgB;AACnC,QAAI,UAAU,WAAW,cAAc;AACrC,aAAO;AAAA,IACT;AACA,QAAI,UAAU,SAAS,UAAU;AAC/B,aAAO;AAAA,IACT;AACA,WAAO;AAAA,EACT;AAAA,EAEA,qBAAqB,WAAgB;AACnC,QAAI,UAAU,WAAW,cAAc;AACrC,aAAO,CAAC,eAAe,eAAe,YAAY,eAAe,UAAU;AAAA,IAC7E,OACK;AACH,aAAO,CAAC,eAAe,YAAY,UAAU;AAAA,IAC/C;AAAA,EACF;AAAA;AAAA,EAGA,iBAAiB,OAAe;AAC9B,UAAM,gBAAgB,MACnB,IAAI,CAAC,MAAM,QAAQ;AAClB,aAAO;AAAA,QACL,KAAK,KAAK,MAAM,KAAK,GAAG;AAAA,QACxB,MAAM;AAAA,MACR;AAAA,IACF,CAAC,EAEA,KAAK,CAAC,GAAG,MAAM,gBAAgB,EAAE,KAAK,CAAC,EAAE,MAAM,EAAE,KAAK,CAAC,EAAE,IAAI,CAAC;AAGjE,UAAM,UAAU,CAAC;AACjB,kBACG,QAAQ,CAAC,MAAM,QAAO;AACrB,cAAQ,GAAG,IAAI,KAAK;AAAA,IACtB,CAAC;AAEH,SAAK,SAAS;AAAA,MACZ,MAAM;AAAA,IACR,CAAC;AAED,WAAO,cAAc,IAAI,CAAC,SAAS,KAAK,IAAI;AAAA,EAC9C;AAAA,EAEA,WAAW,CAAC,WAAmB,UAAe;AAC5C,QAAI,MAAM,SAAS,YAAY;AAC7B,cAAQ;AAAA,QACN,MAAM,MAAM;AAAA,QACZ,UAAU,MAAM;AAAA,MAClB;AAAA,IACF,OACK;AACH,YAAM,YAAY,MAAM,SAAS,gBAAgB,KAAK;AACtD,cAAQ;AAAA,QACN,UAAU;AAAA,QACV,MAAM,MAAM;AAAA;AAAA,QAEZ,OAAO;AAAA,UACL,CAAC,EAAC,MAAM,GAAG,OAAO,UAAS,GAAG,oBAAoB,KAAK,MAAM,SAAgB,CAAC;AAAA,UAC9E,CAAC,EAAC,MAAM,IAAI,OAAO,UAAS,GAAG,oBAAoB,KAAK,MAAM,SAAgB,CAAC;AAAA,QACjF;AAAA,QACA,GAAG;AAAA,MACL;AAAA,IACF;AACA,SAAK,MAAM,SAAU,WAAW,KAAK;AAAA,EACvC;AAAA,EAEA,WAAW,WAAmB,UAAuD,OAAe;AAClG,UAAM,QAAQ,KAAK,MAAM,OAAO,MAAM,MAAM,CAAC,KAAK,CAAC;AAEnD,UAAM,SAAS,IAAI;AAAA,MACjB;AAAA,QACE,OAAO,SAAS;AAAA,QAChB,MAAO,SAAS,SAAS,SAAa,IAAI,SAAS;AAAA,MACrD;AAAA,MACA;AAAA,IACF;AAEA,UAAM,eAAe,KAAK,iBAAiB,KAAK;AAEhD,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,OAAO;AAAA,IACT;AACA,SAAK,SAAS,KAAK,MAAM,WAAW,YAAY;AAAA,EAClD;AAAA,EAEA,WAAW,UAA8B;AACvC,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,MAAM;AAAA,IACR;AAEA,QAAI,aAAa,SAAS,QAAW;AACnC,aAAO,aAAa,MAAM;AAAA,IAC5B;AACA,SAAK,MAAM,SAAU,KAAK,MAAM,WAAW,YAAY;AAAA,EACzD;AAAA,EAEA,eAAe,SAAiB;AAC9B,QAAI,YAAY,iBAAiB,KAAK,MAAM,wBAAwB;AAClE,WAAK,MAAM,uBAAuB;AAAA,IACpC,OACK;AACH,WAAK,SAAS,KAAK,MAAM,WAAW;AAAA,QAClC,GAAG,KAAK,MAAM;AAAA,QACd,MAAM;AAAA,MACR,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,mBAAmB,UAAkC,SAAc;AACjE,QAAI,SAAS;AACX,WAAK,MAAM,MAAO,QAAQ,IAAI;AAAA,IAChC,OACK;AACH,aAAO,KAAK,MAAM,MAAO,QAAQ;AAAA,IACnC;AACA,SAAK,SAAS,KAAK,MAAM,WAAW,KAAK,MAAM,KAAK;AAAA,EACtD;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AAErB,QAAI,OAAO,KAAK,MAAM,OAAO,SAAS,aAAa;AACjD,WAAK,MAAM,MAAO,OAAO,KAAK,qBAAqB,KAAK,MAAM,SAAS;AAAA,IACzE;AAEA,QAAI;AACJ,QAAI,KAAK,MAAM,OAAO,OAAO;AAC3B,mBAAa,KAAK,MAAM,MAAM,MAAM,IAAI,CAAC,MAAM,QAAQ;AACrD,cAAM,YAAY,OAAO,KAAK,CAAC,MAAM,WAAW,KAAK,CAAC,EAAE,OAAO;AAC/D,cAAM,MAAO,KAAK,MAAM,KAAK,GAAG;AAChC,cAAM,YAAY,OAAO,KAAK,CAAC,MAAM,WAAW,KAAK,CAAC,EAAE,QAAQ,KAAK,CAAC;AACtE,cAAM,QAAQ,KAAK,CAAC;AACpB,cAAM,gBAAgB,oBAAC,oBAAiB,SAAS,KAAK,MAAM,cAAc,KAAK,MAAM,GAAG,GAAG;AAE3F,cAAM,YAAY;AAAA,UAChB,cAAc,EAAE,aAAa;AAAA,UAC7B,OAAO,EAAE,YAAY;AAAA,UACrB,OAAO;AAAA,UACP,UAAU,CAAC,YAAyC,KAAK,WAAW,KAAK,EAAE,MAAM,WAAW,OAAO,QAAkB,GAAG,KAAK;AAAA,QAC/H;AAEA,YAAI;AACJ,YAAG,KAAK,MAAM,OAAO,SAAS,eAAe;AAC3C,sBAAY,oBAAC,eAAa,GAAG,WAAW;AAAA,QAC1C,OACK;AACH,sBAAY,oBAAC,eAAa,GAAG,WAAW;AAAA,QAC1C;AAEA,YAAI,YAAY;AAChB,YAAG,cAAc,QAAW;AAC1B,sBAAY,oBAAC,SACX;AAAA,YAAC;AAAA;AAAA,cACC,cAAW;AAAA,cACX,OAAO;AAAA,cACP,UAAU,aAAW,KAAK,WAAW,KAAK,EAAC,MAAM,SAAS,OAAO,UAAS,GAAG,KAAK;AAAA,cAClF,KAAK;AAAA,cACL,KAAK;AAAA;AAAA,UACP,GACF;AAAA,QACF;AAEA,eAAO,qBAAC,QACN;AAAA,8BAAC,QACE,qBACH;AAAA,UACA,oBAAC,QACE,qBACH;AAAA,UACA,oBAAC,QACC;AAAA,YAAC;AAAA;AAAA,cACC,cAAY,EAAE,cAAc;AAAA,cAC5B,WAAW,KAAK,MAAM;AAAA,cACtB,WAAW,KAAK,MAAM;AAAA,cACtB;AAAA,cACA,UAAU,CAAC,GAAG,aAAa,KAAK,WAAW,KAAK,EAAC,MAAM,WAAW,OAAO,UAAS,GAAG,QAAkB;AAAA;AAAA,UACzG,GACF;AAAA,UACA,oBAAC,QACE,yBACH;AAAA,aAlBc,GAmBhB;AAAA,MACF,CAAC;AAAA,IACH;AAEA,WAAO,oBAAC,SAAI,WAAU,4BACpB,+BAAC,cAAS,WAAU,+BAClB;AAAA,0BAAC,YAAQ,6BAAmB,KAAK,MAAM,SAAS,GAAE;AAAA,MAClD,qBAAC,SAAI,WAAU,gCACb;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,UAAU;AAAA,YAGnB,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,KAAK,MAAM,MAAO;AAAA,gBACzB,UAAU,CAAC,YAAoB,KAAK,eAAe,OAAO;AAAA,gBAC1D,OAAO,EAAE,yDAAyD;AAAA,gBAClE,SAAS,KAAK,qBAAqB,KAAK,MAAM,SAAS;AAAA;AAAA,YACzD,GACF;AAAA;AAAA,UATI;AAAA,QAUN;AAAA,QACC,KAAK,MAAM,OAAO,SAAS,cAC1B;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,MAAM;AAAA,YAGf,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,WAAW;AAAA,gBACX,WAAW,OAAO,SAAS;AAAA,gBAC3B,OAAO,KAAK,MAAM,OAAO;AAAA,gBACzB,UAAU,CAAC,GAAG,aAAa,KAAK,WAAW,QAAkB;AAAA;AAAA,YAC/D,GACF;AAAA;AAAA,UATI;AAAA,QAUN;AAAA,QAEF;AAAA,UAAC;AAAA;AAAA,YACC,OAAO;AAAA,YAGP,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,KAAK,MAAM,OAAO;AAAA,gBACzB,OAAO,EAAE,8CAA8C;AAAA,gBACvD,UAAU,aAAW,KAAK,mBAAmB,YAAY,OAAO;AAAA;AAAA,YAClE,GACF;AAAA;AAAA,UARI;AAAA,QASN;AAAA,QACC,cACC;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,SAAS;AAAA,YAGlB;AAAA,cAAC;AAAA;AAAA,gBACC,WAAW,KAAK,MAAM;AAAA,gBACtB,WAAW,KAAK,MAAM;AAAA,gBACtB,OAAO,KAAK,MAAM,OAAO;AAAA,gBACzB,UAAU,CAAC,GAAG,YAAY,KAAK,mBAAmB,WAAW,OAAO;AAAA;AAAA,YACtE;AAAA;AAAA,UAPI;AAAA,QAQN;AAAA,QAED,cACC,oBAAC,SAAI,WAAU,0BACb,+BAAC,WAAM,WAAU,gCACf;AAAA,8BAAC,aAAS,YAAE,OAAO,GAAE;AAAA,UACrB,oBAAC,WACC,+BAAC,QACC;AAAA,gCAAC,QAAI,YAAE,MAAM,GAAE;AAAA,YACf,oBAAC,QAAI,YAAE,aAAa,GAAE;AAAA,YACtB,oBAAC,QAAG,SAAS,GAAI,YAAE,cAAc,GAAE;AAAA,aACrC,GACF;AAAA,UACA,oBAAC,WACE,sBACH;AAAA,WACF,GACF;AAAA,QAEF,qBAAC,SAAI,WAAU,oBACZ;AAAA,wBACC;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK,MAAM,WAAW,KAAK,IAAI;AAAA,cAExC;AAAA,oCAAC,SAAI,OAAO,EAAC,OAAM,QAAQ,QAAO,QAAQ,eAAe,cAAa,GAAG,SAAQ,aAC/E,8BAAC,UAAK,MAAK,gBAAe,GAAG,sBAAsB,GACrD;AAAA,gBAAM;AAAA,gBAAE,EAAE,UAAU;AAAA;AAAA;AAAA,UACtB;AAAA,UAEF;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK,MAAM,mBAAmB,KAAK,IAAI;AAAA,cAEhD;AAAA,oCAAC,SAAI,OAAO,EAAC,OAAM,QAAQ,QAAO,QAAQ,eAAe,cAAa,GAAG,SAAQ,aAC/E,8BAAC,UAAK,MAAK,gBAAe,GAAG,oBAAoB,GACnD;AAAA,gBAAM;AAAA,gBAAE,EAAE,uBAAuB;AAAA;AAAA;AAAA,UACnC;AAAA,WACF;AAAA,SACF;AAAA,OACF,GACF;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"97b6de35ac4a8f739cf06eabc39facf249622fab"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return mn=function(){return a},a}mn();function KR(n,e){mn().f[0]++;let t;return mn().s[0]++,mn().b[1][0]++,n.value&&(mn().b[1][1]++,n.value.stops)?(mn().b[0][0]++,mn().s[1]++,n.value.stops.forEach((r,i)=>{mn().f[1]++,mn().s[2]++,Object.prototype.hasOwnProperty.call(e.refs,i)?mn().b[2][1]++:(mn().b[2][0]++,mn().s[3]++,t?mn().b[3][1]++:(mn().b[3][0]++,mn().s[4]++,t={...e}),mn().s[5]++,t[i]=Ny("stop-"))})):mn().b[0][1]++,mn().s[6]++,t}class Lde extends nr.Component{constructor(){super(...arguments);Pn(this,"state",(mn().s[7]++,{refs:{}}));Pn(this,"onChange",(mn().s[32]++,(t,r)=>{if(mn().f[11]++,mn().s[33]++,r.type==="identity")mn().b[9][0]++,mn().s[34]++,r={type:r.type,property:r.property};else{mn().b[9][1]++;const i=(mn().s[35]++,r.type==="categorical"?(mn().b[10][0]++,""):(mn().b[10][1]++,0));mn().s[36]++,r={property:"",type:r.type,stops:[[{zoom:6,value:i},Pf(this.props.fieldSpec)],[{zoom:10,value:i},Pf(this.props.fieldSpec)]],...r}}mn().s[37]++,this.props.onChange(t,r)}))}componentDidMount(){mn().f[2]++;const t=(mn().s[8]++,KR(this.props,this.state));mn().s[9]++,t?(mn().b[4][0]++,mn().s[10]++,this.setState({refs:t})):mn().b[4][1]++}static getDerivedStateFromProps(t,r){mn().f[3]++;const i=(mn().s[11]++,KR(t,r));return mn().s[12]++,i?(mn().b[5][0]++,mn().s[13]++,{refs:i}):(mn().b[5][1]++,mn().s[14]++,null)}getFieldFunctionType(t){return mn().f[4]++,mn().s[15]++,t.expression.interpolated?(mn().b[6][0]++,mn().s[16]++,"exponential"):(mn().b[6][1]++,mn().s[17]++,t.type==="number"?(mn().b[7][0]++,mn().s[18]++,"interval"):(mn().b[7][1]++,mn().s[19]++,"categorical"))}getDataFunctionTypes(t){return mn().f[5]++,mn().s[20]++,t.expression.interpolated?(mn().b[8][0]++,mn().s[21]++,["interpolate","categorical","interval","exponential","identity"]):(mn().b[8][1]++,mn().s[22]++,["categorical","interval","identity"])}orderStopsByZoom(t){mn().f[6]++;const r=(mn().s[23]++,t.map((s,a)=>(mn().f[7]++,mn().s[24]++,{ref:this.state.refs[a],data:s})).sort((s,a)=>(mn().f[8]++,mn().s[25]++,dG(s.data[0].zoom,a.data[0].zoom)))),i=(mn().s[26]++,{});return mn().s[27]++,r.forEach((s,a)=>{mn().f[9]++,mn().s[28]++,i[a]=s.ref}),mn().s[29]++,this.setState({refs:i}),mn().s[30]++,r.map(s=>(mn().f[10]++,mn().s[31]++,s.data))}changeStop(t,r,i){var d;mn().f[12]++;const s=(mn().s[38]++,mn().b[11][0]++,((d=this.props.value)==null?void 0:d.stops.slice(0))||(mn().b[11][1]++,[]));mn().s[39]++,s[t]=[{value:r.value,zoom:r.zoom===void 0?(mn().b[12][0]++,0):(mn().b[12][1]++,r.zoom)},i];const a=(mn().s[40]++,this.orderStopsByZoom(s)),o=(mn().s[41]++,{...this.props.value,stops:a});mn().s[42]++,this.onChange(this.props.fieldName,o)}changeBase(t){mn().f[13]++;const r=(mn().s[43]++,{...this.props.value,base:t});mn().s[44]++,r.base===void 0?(mn().b[13][0]++,mn().s[45]++,delete r.base):mn().b[13][1]++,mn().s[46]++,this.props.onChange(this.props.fieldName,r)}changeDataType(t){mn().f[14]++,mn().s[47]++,mn().b[15][0]++,t==="interpolate"&&(mn().b[15][1]++,this.props.onChangeToZoomFunction)?(mn().b[14][0]++,mn().s[48]++,this.props.onChangeToZoomFunction()):(mn().b[14][1]++,mn().s[49]++,this.onChange(this.props.fieldName,{...this.props.value,type:t}))}changeDataProperty(t,r){mn().f[15]++,mn().s[50]++,r?(mn().b[16][0]++,mn().s[51]++,this.props.value[t]=r):(mn().b[16][1]++,mn().s[52]++,delete this.props.value[t]),mn().s[53]++,this.onChange(this.props.fieldName,this.props.value)}render(){var i,s,a,o,d,g,b,E;mn().f[16]++;const t=(mn().s[54]++,this.props.t);mn().s[55]++,typeof((i=this.props.value)==null?void 0:i.type)>"u"?(mn().b[17][0]++,mn().s[56]++,this.props.value.type=this.getFieldFunctionType(this.props.fieldSpec)):mn().b[17][1]++;let r;return mn().s[57]++,(s=this.props.value)!=null&&s.stops?(mn().b[18][0]++,mn().s[58]++,r=this.props.value.stops.map((S,I)=>{var ne,G;mn().f[17]++;const P=(mn().s[59]++,typeof S[0]=="object"?(mn().b[19][0]++,S[0].zoom):(mn().b[19][1]++,void 0)),z=(mn().s[60]++,this.state.refs[I]),j=(mn().s[61]++,typeof S[0]=="object"?(mn().b[20][0]++,S[0].value):(mn().b[20][1]++,S[0])),q=(mn().s[62]++,S[1]),Y=(mn().s[63]++,ue.jsx(hG,{onClick:(ne=this.props.onDeleteStop)==null?void 0:ne.bind(this,I)})),ie=(mn().s[64]++,{"aria-label":t("Input value"),label:t("Data value"),value:j,onChange:oe=>(mn().f[18]++,mn().s[65]++,this.changeStop(I,{zoom:P,value:oe},q))});let te;mn().s[66]++,((G=this.props.value)==null?void 0:G.type)==="categorical"?(mn().b[21][0]++,mn().s[67]++,te=ue.jsx(Qf,{...ie})):(mn().b[21][1]++,mn().s[68]++,te=ue.jsx(um,{...ie}));let V=(mn().s[69]++,null);return mn().s[70]++,P!==void 0?(mn().b[22][0]++,mn().s[71]++,V=ue.jsx("div",{children:ue.jsx(um,{"aria-label":"Zoom",value:P,onChange:oe=>(mn().f[19]++,mn().s[72]++,this.changeStop(I,{zoom:oe,value:j},q)),min:0,max:22})})):mn().b[22][1]++,mn().s[73]++,ue.jsxs("tr",{children:[ue.jsx("td",{children:V}),ue.jsx("td",{children:te}),ue.jsx("td",{children:ue.jsx(Ey,{"aria-label":t("Output value"),fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:q,onChange:(oe,he)=>(mn().f[20]++,mn().s[74]++,this.changeStop(I,{zoom:P,value:j},he))})}),ue.jsx("td",{children:Y})]},z)})):mn().b[18][1]++,mn().s[75]++,ue.jsx("div",{className:"maputnik-data-spec-block",children:ue.jsxs("fieldset",{className:"maputnik-data-spec-property",children:[ue.jsx("legend",{children:y3(this.props.fieldName)}),ue.jsxs("div",{className:"maputnik-data-fieldset-inner",children:[ue.jsx(fa,{label:t("Function"),children:ue.jsx("div",{className:"maputnik-data-spec-property-input",children:ue.jsx(Xg,{value:this.props.value.type,onChange:S=>(mn().f[21]++,mn().s[76]++,this.changeDataType(S)),title:t("Select a type of data scale (default is 'categorical')."),options:this.getDataFunctionTypes(this.props.fieldSpec)})})},"function"),(mn().b[23][0]++,((a=this.props.value)==null?void 0:a.type)!=="identity"&&(mn().b[23][1]++,ue.jsx(fa,{label:t("Base"),children:ue.jsx("div",{className:"maputnik-data-spec-property-input",children:ue.jsx(Ey,{fieldName:"base",fieldSpec:ts.function.base,value:(o=this.props.value)==null?void 0:o.base,onChange:(S,I)=>(mn().f[22]++,mn().s[77]++,this.changeBase(I))})})},"base"))),ue.jsx(fa,{label:"Property",children:ue.jsx("div",{className:"maputnik-data-spec-property-input",children:ue.jsx(Qf,{value:(d=this.props.value)==null?void 0:d.property,title:t("Input a data property to base styles off of."),onChange:S=>(mn().f[23]++,mn().s[78]++,this.changeDataProperty("property",S))})})},"property"),(mn().b[24][0]++,r&&(mn().b[24][1]++,ue.jsx(fa,{label:t("Default"),children:ue.jsx(Ey,{fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:(g=this.props.value)==null?void 0:g.default,onChange:(S,I)=>(mn().f[24]++,mn().s[79]++,this.changeDataProperty("default",I))})},"default"))),(mn().b[25][0]++,r&&(mn().b[25][1]++,ue.jsx("div",{className:"maputnik-function-stop",children:ue.jsxs("table",{className:"maputnik-function-stop-table",children:[ue.jsx("caption",{children:t("Stops")}),ue.jsx("thead",{children:ue.jsxs("tr",{children:[ue.jsx("th",{children:t("Zoom")}),ue.jsx("th",{children:t("Input value")}),ue.jsx("th",{rowSpan:2,children:t("Output value")})]})}),ue.jsx("tbody",{children:r})]})}))),ue.jsxs("div",{className:"maputnik-toolbox",children:[(mn().b[26][0]++,r&&(mn().b[26][1]++,ue.jsxs(Ja,{className:"maputnik-add-stop",onClick:(b=this.props.onAddStop)==null?void 0:b.bind(this),children:[ue.jsx("svg",{style:{width:"14px",height:"14px",verticalAlign:"text-bottom"},viewBox:"0 0 24 24",children:ue.jsx("path",{fill:"currentColor",d:WO})})," ",t("Add stop")]}))),ue.jsxs(Ja,{className:"maputnik-add-stop",onClick:(E=this.props.onExpressionClick)==null?void 0:E.bind(this),children:[ue.jsx("svg",{style:{width:"14px",height:"14px",verticalAlign:"text-bottom"},viewBox:"0 0 24 24",children:ue.jsx("path",{fill:"currentColor",d:GC})})," ",t("Convert to expression")]})]})]})]})})}}const Ude=(mn().s[80]++,Ns()(Lde));function Mr(){var n="/home/runner/work/maputnik/maputnik/src/components/_ZoomProperty.tsx",e="6a4c93b52ca21ec4b555a0d2906ee27fc49f34f8",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/_ZoomProperty.tsx",statementMap:{0:{start:{line:16,column:16},end:{line:16,column:18}},1:{start:{line:17,column:2},end:{line:28,column:3}},2:{start:{line:18,column:4},end:{line:27,column:7}},3:{start:{line:19,column:6},end:{line:26,column:7}},4:{start:{line:20,column:8},end:{line:22,column:9}},5:{start:{line:21,column:10},end:{line:21,column:33}},6:{start:{line:23,column:8},end:{line:23,column:39}},7:{start:{line:25,column:8},end:{line:25,column:39}},8:{start:{line:29,column:2},end:{line:29,column:17}},9:{start:{line:32,column:24},end:{line:34,column:3}},10:{start:{line:35,column:10},end:{line:37,column:3}},11:{start:{line:39,column:20},end:{line:39,column:55}},12:{start:{line:40,column:4},end:{line:44,column:5}},13:{start:{line:41,column:6},end:{line:43,column:9}},14:{start:{line:47,column:20},end:{line:47,column:45}},15:{start:{line:48,column:4},end:{line:52,column:5}},16:{start:{line:49,column:6},end:{line:51,column:8}},17:{start:{line:53,column:4},end:{line:53,column:16}},18:{start:{line:57,column:26},end:{line:62,column:60}},19:{start:{line:58,column:6},end:{line:61,column:8}},20:{start:{line:62,column:22},end:{line:62,column:59}},21:{start:{line:63,column:20},end:{line:63,column:22}},22:{start:{line:64,column:4},end:{line:66,column:7}},23:{start:{line:65,column:6},end:{line:65,column:30}},24:{start:{line:67,column:4},end:{line:69,column:7}},25:{start:{line:70,column:4},end:{line:70,column:50}},26:{start:{line:70,column:39},end:{line:70,column:48}},27:{start:{line:73,column:18},end:{line:73,column:49}},28:{start:{line:74,column:4},end:{line:74,column:41}},29:{start:{line:75,column:25},end:{line:75,column:53}},30:{start:{line:76,column:25},end:{line:79,column:5}},31:{start:{line:80,column:4},end:{line:80,column:60}},32:{start:{line:83,column:25},end:{line:86,column:5}},33:{start:{line:87,column:4},end:{line:89,column:5}},34:{start:{line:88,column:6},end:{line:88,column:34}},35:{start:{line:90,column:4},end:{line:90,column:60}},36:{start:{line:92,column:19},end:{line:96,column:3}},37:{start:{line:93,column:4},end:{line:95,column:5}},38:{start:{line:94,column:6},end:{line:94,column:46}},39:{start:{line:98,column:14},end:{line:98,column:26}},40:{start:{line:99,column:23},end:{line:132,column:6}},41:{start:{line:100,column:24},end:{line:100,column:31}},42:{start:{line:101,column:20},end:{line:101,column:27}},43:{start:{line:102,column:44},end:{line:102,column:120}},44:{start:{line:103,column:6},end:{line:131,column:8}},45:{start:{line:112,column:43},end:{line:112,column:87}},46:{start:{line:124,column:43},end:{line:124,column:88}},47:{start:{line:133,column:4},end:{line:201,column:12}},48:{start:{line:144,column:39},end:{line:144,column:67}},49:{start:{line:161,column:43},end:{line:161,column:68}},50:{start:{line:204,column:4},end:{line:208,column:5}},51:{start:{line:205,column:6},end:{line:205,column:83}},52:{start:{line:207,column:6},end:{line:207,column:29}},53:{start:{line:211,column:21},end:{line:211,column:60}}},fnMap:{0:{name:"setStopRefs",decl:{start:{line:15,column:9},end:{line:15,column:20}},loc:{start:{line:15,column:35},end:{line:30,column:1}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:18,column:30},end:{line:18,column:31}},loc:{start:{line:18,column:45},end:{line:27,column:5}},line:18},2:{name:"(anonymous_2)",decl:{start:{line:38,column:2},end:{line:38,column:3}},loc:{start:{line:38,column:22},end:{line:45,column:3}},line:38},3:{name:"(anonymous_3)",decl:{start:{line:46,column:2},end:{line:46,column:3}},loc:{start:{line:46,column:48},end:{line:54,column:3}},line:46},4:{name:"(anonymous_4)",decl:{start:{line:56,column:2},end:{line:56,column:3}},loc:{start:{line:56,column:26},end:{line:71,column:3}},line:56},5:{name:"(anonymous_5)",decl:{start:{line:57,column:36},end:{line:57,column:37}},loc:{start:{line:57,column:51},end:{line:62,column:5}},line:57},6:{name:"(anonymous_6)",decl:{start:{line:62,column:12},end:{line:62,column:13}},loc:{start:{line:62,column:22},end:{line:62,column:59}},line:62},7:{name:"(anonymous_7)",decl:{start:{line:64,column:26},end:{line:64,column:27}},loc:{start:{line:64,column:41},end:{line:66,column:5}},line:64},8:{name:"(anonymous_8)",decl:{start:{line:70,column:29},end:{line:70,column:30}},loc:{start:{line:70,column:39},end:{line:70,column:48}},line:70},9:{name:"(anonymous_9)",decl:{start:{line:72,column:2},end:{line:72,column:3}},loc:{start:{line:72,column:45},end:{line:81,column:3}},line:72},10:{name:"(anonymous_10)",decl:{start:{line:82,column:2},end:{line:82,column:3}},loc:{start:{line:82,column:23},end:{line:91,column:3}},line:82},11:{name:"(anonymous_11)",decl:{start:{line:92,column:19},end:{line:92,column:20}},loc:{start:{line:92,column:29},end:{line:96,column:3}},line:92},12:{name:"(anonymous_12)",decl:{start:{line:97,column:2},end:{line:97,column:3}},loc:{start:{line:97,column:11},end:{line:202,column:3}},line:97},13:{name:"(anonymous_13)",decl:{start:{line:99,column:51},end:{line:99,column:52}},loc:{start:{line:99,column:66},end:{line:132,column:5}},line:99},14:{name:"(anonymous_14)",decl:{start:{line:112,column:26},end:{line:112,column:27}},loc:{start:{line:112,column:43},end:{line:112,column:87}},line:112},15:{name:"(anonymous_15)",decl:{start:{line:124,column:26},end:{line:124,column:27}},loc:{start:{line:124,column:43},end:{line:124,column:88}},line:124},16:{name:"(anonymous_16)",decl:{start:{line:144,column:26},end:{line:144,column:27}},loc:{start:{line:144,column:39},end:{line:144,column:67}},line:144},17:{name:"(anonymous_17)",decl:{start:{line:161,column:26},end:{line:161,column:27}},loc:{start:{line:161,column:43},end:{line:161,column:68}},line:161},18:{name:"(anonymous_18)",decl:{start:{line:203,column:2},end:{line:203,column:3}},loc:{start:{line:203,column:34},end:{line:209,column:3}},line:203}},branchMap:{0:{loc:{start:{line:17,column:2},end:{line:28,column:3}},type:"if",locations:[{start:{line:17,column:2},end:{line:28,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:17},1:{loc:{start:{line:17,column:6},end:{line:17,column:38}},type:"binary-expr",locations:[{start:{line:17,column:6},end:{line:17,column:17}},{start:{line:17,column:21},end:{line:17,column:38}}],line:17},2:{loc:{start:{line:19,column:6},end:{line:26,column:7}},type:"if",locations:[{start:{line:19,column:6},end:{line:26,column:7}},{start:{line:24,column:13},end:{line:26,column:7}}],line:19},3:{loc:{start:{line:20,column:8},end:{line:22,column:9}},type:"if",locations:[{start:{line:20,column:8},end:{line:22,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:20},4:{loc:{start:{line:40,column:4},end:{line:44,column:5}},type:"if",locations:[{start:{line:40,column:4},end:{line:44,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:40},5:{loc:{start:{line:48,column:4},end:{line:52,column:5}},type:"if",locations:[{start:{line:48,column:4},end:{line:52,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:48},6:{loc:{start:{line:87,column:4},end:{line:89,column:5}},type:"if",locations:[{start:{line:87,column:4},end:{line:89,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:87},7:{loc:{start:{line:93,column:4},end:{line:95,column:5}},type:"if",locations:[{start:{line:93,column:4},end:{line:95,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:93},8:{loc:{start:{line:93,column:8},end:{line:93,column:67}},type:"binary-expr",locations:[{start:{line:93,column:8},end:{line:93,column:30}},{start:{line:93,column:34},end:{line:93,column:67}}],line:93},9:{loc:{start:{line:204,column:4},end:{line:208,column:5}},type:"if",locations:[{start:{line:204,column:4},end:{line:208,column:5}},{start:{line:206,column:11},end:{line:208,column:5}}],line:204}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_ZoomProperty.tsx"],names:[],mappings:"AA+J4B,cACf,YADe;AA/J5B,OAAO,WAAW;AAClB,SAAQ,oBAAoB,4BAA2B;AACvD,OAAO,YAAY;AACnB,SAA0B,uBAAuB;AAEjD,OAAO,iBAAiB;AACxB,OAAO,eAAe;AACtB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAElB,OAAO,sBAAsB;AAC7B,OAAO,wBAAwB;AAE/B,OAAO,YAAY;AACnB,OAAO,qBAAqB;AAQ5B,SAAS,YAAY,OAAkC,OAA0B;AAE/E,MAAI,UAAmC,CAAC;AAExC,MAAG,MAAM,SAAU,MAAM,MAAwB,OAAO;AACtD,IAAC,MAAM,MAAwB,MAAM,QAAQ,CAAC,MAAM,QAAgB;AAClE,UAAG,OAAO,UAAU,eAAe,KAAK,CAAC,MAAM,MAAM,GAAG,GAAG;AACzD,YAAG,CAAC,SAAS;AACX,oBAAU,EAAC,GAAG,MAAK;AAAA,QACrB;AACA,gBAAQ,GAAG,IAAI,OAAO,OAAO;AAAA,MAC/B,OAAO;AACL,gBAAQ,GAAG,IAAI,MAAM,KAAK,GAAG;AAAA,MAC/B;AAAA,IACF,CAAC;AAAA,EACH;AACA,SAAO;AACT;AA4BA,MAAM,6BAA6B,MAAM,UAAwD;AAAA,EAC/F,OAAO,eAAe;AAAA,IACpB,QAAQ,CAAC;AAAA,EACX;AAAA,EAEA,QAAQ;AAAA,IACN,MAAM,CAAC;AAAA,EACT;AAAA,EAEA,oBAAoB;AAClB,UAAM,UAAU,YAAY,KAAK,OAAO,KAAK,KAAK;AAElD,QAAG,SAAS;AACV,WAAK,SAAS;AAAA,QACZ,MAAM;AAAA,MACR,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAA4C,OAA0B;AACpG,UAAM,UAAU,YAAY,OAAO,KAAK;AACxC,QAAG,SAAS;AACV,aAAO;AAAA,QACL,MAAM;AAAA,MACR;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAAA;AAAA,EAGA,iBAAiB,OAA+B;AAC9C,UAAM,gBAAgB,MACnB,IAAI,CAAC,MAAM,QAAQ;AAClB,aAAO;AAAA,QACL,KAAK,KAAK,MAAM,KAAK,GAAG;AAAA,QACxB,MAAM;AAAA,MACR;AAAA,IACF,CAAC,EAEA,KAAK,CAAC,GAAG,MAAM,gBAAgB,EAAE,KAAK,CAAC,GAAI,EAAE,KAAK,CAAC,CAAE,CAAC;AAGzD,UAAM,UAAkC,CAAC;AACzC,kBACG,QAAQ,CAAC,MAAM,QAAO;AACrB,cAAQ,GAAG,IAAI,KAAK;AAAA,IACtB,CAAC;AAEH,SAAK,SAAS;AAAA,MACZ,MAAM;AAAA,IACR,CAAC;AAED,WAAO,cAAc,IAAI,CAAC,SAAS,KAAK,IAAI;AAAA,EAC9C;AAAA,EAEA,eAAe,WAAmB,UAA8B,OAAe;AAC7E,UAAM,QAAS,KAAK,MAAM,MAAwB,MAAM,MAAM,CAAC;AAC/D,UAAM,SAAS,IAAI,CAAC,UAAU,KAAK;AAEnC,UAAM,eAAe,KAAK,iBAAiB,KAAK;AAEhD,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,OAAO;AAAA,IACT;AACA,SAAK,MAAM,SAAU,KAAK,MAAM,WAAW,YAAY;AAAA,EACzD;AAAA,EAEA,WAAW,UAA8B;AACvC,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,MAAM;AAAA,IACR;AAEA,QAAI,aAAa,SAAS,QAAW;AACnC,aAAO,aAAa,MAAM;AAAA,IAC5B;AACA,SAAK,MAAM,SAAU,KAAK,MAAM,WAAW,YAAY;AAAA,EACzD;AAAA,EAEA,iBAAiB,CAAC,SAAiB;AACjC,QAAI,SAAS,iBAAiB,KAAK,MAAM,wBAAwB;AAC/D,WAAK,MAAM,uBAAuB,IAAI;AAAA,IACxC;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,aAAa,KAAK,MAAM,OAAO,MAAM,IAAI,CAAC,MAAM,QAAQ;AAC5D,YAAM,YAAY,KAAK,CAAC;AACxB,YAAM,QAAQ,KAAK,CAAC;AACpB,YAAM,gBAAgB,oBAAC,oBAAiB,SAAS,KAAK,MAAM,cAAc,KAAK,MAAM,GAAG,GAAG;AAC3F,aAAO;AAAA,QAAC;AAAA;AAAA,UAGN;AAAA,gCAAC,QACC;AAAA,cAAC;AAAA;AAAA,gBACC,cAAY,EAAE,MAAM;AAAA,gBACpB,OAAO;AAAA,gBACP,UAAU,iBAAe,KAAK,eAAe,KAAK,aAAa,KAAK;AAAA,gBACpE,KAAK;AAAA,gBACL,KAAK;AAAA;AAAA,YACP,GACF;AAAA,YACA,oBAAC,QACC;AAAA,cAAC;AAAA;AAAA,gBACC,cAAY,EAAE,cAAc;AAAA,gBAC5B,WAAW,KAAK,MAAM;AAAA,gBACtB,WAAW,KAAK,MAAM;AAAA,gBACtB;AAAA,gBACA,UAAU,CAAC,GAAG,aAAa,KAAK,eAAe,KAAK,WAAW,QAAkB;AAAA;AAAA,YACnF,GACF;AAAA,YACA,oBAAC,QACE,yBACH;AAAA;AAAA;AAAA,QAtBK,GAAG,KAAK,CAAC,CAAC,IAAI,KAAK,CAAC,CAAC;AAAA,MAuB5B;AAAA,IACF,CAAC;AAGD,WAAO,oBAAC,SAAI,WAAU,4BACpB,+BAAC,cAAS,WAAU,+BAClB;AAAA,0BAAC,YAAQ,6BAAmB,KAAK,MAAM,SAAS,GAAE;AAAA,MAClD,qBAAC,SAAI,WAAU,gCACb;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,UAAU;AAAA,YAEnB,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO;AAAA,gBACP,UAAU,CAAC,YAAoB,KAAK,eAAe,OAAO;AAAA,gBAC1D,OAAO,EAAE,yDAAyD;AAAA,gBAClE,SAAS,KAAK,qBAAqB,KAAK,MAAM,SAAU;AAAA;AAAA,YAC1D,GACF;AAAA;AAAA,QACF;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,MAAM;AAAA,YAEf,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,WAAW;AAAA,gBACX,WAAW,OAAO,SAAS;AAAA,gBAC3B,OAAO,KAAK,MAAM,OAAO;AAAA,gBACzB,UAAU,CAAC,GAAG,aAAa,KAAK,WAAW,QAA8B;AAAA;AAAA,YAC3E,GACF;AAAA;AAAA,QACF;AAAA,QACA,oBAAC,SAAI,WAAU,0BACb,+BAAC,WAAM,WAAU,mEACf;AAAA,8BAAC,aAAS,YAAE,OAAO,GAAE;AAAA,UACrB,oBAAC,WACC,+BAAC,QACC;AAAA,gCAAC,QAAI,YAAE,MAAM,GAAE;AAAA,YACf,oBAAC,QAAG,SAAS,GAAI,YAAE,cAAc,GAAE;AAAA,aACrC,GACF;AAAA,UACA,oBAAC,WACE,sBACH;AAAA,WACF,GACF;AAAA,QACA,qBAAC,SAAI,WAAU,oBACb;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK,MAAM,WAAW,KAAK,IAAI;AAAA,cAExC;AAAA,oCAAC,SAAI,OAAO,EAAC,OAAM,QAAQ,QAAO,QAAQ,eAAe,cAAa,GAAG,SAAQ,aAC/E,8BAAC,UAAK,MAAK,gBAAe,GAAG,sBAAsB,GACrD;AAAA,gBAAM;AAAA,gBAAE,EAAE,UAAU;AAAA;AAAA;AAAA,UACtB;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK,MAAM,mBAAmB,KAAK,IAAI;AAAA,cAEhD;AAAA,oCAAC,SAAI,OAAO,EAAC,OAAM,QAAQ,QAAO,QAAQ,eAAe,cAAa,GAAG,SAAQ,aAC/E,8BAAC,UAAK,MAAK,gBAAe,GAAG,oBAAoB,GACnD;AAAA,gBAAM;AAAA,gBAAE,EAAE,uBAAuB;AAAA;AAAA;AAAA,UACnC;AAAA,WACF;AAAA,SACF;AAAA,OACF,GACF;AAAA,EACF;AAAA,EAEA,qBAAqB,WAGlB;AACD,QAAI,UAAU,eAAe,MAAM,eAAe;AAChD,aAAO,CAAC,eAAe,eAAe,YAAY,eAAe,UAAU;AAAA,IAC7E,OACK;AACH,aAAO,CAAC,aAAa;AAAA,IACvB;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"6a4c93b52ca21ec4b555a0d2906ee27fc49f34f8"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Mr=function(){return a},a}Mr();function DR(n,e){Mr().f[0]++;let t=(Mr().s[0]++,{});return Mr().s[1]++,Mr().b[1][0]++,n.value&&(Mr().b[1][1]++,n.value.stops)?(Mr().b[0][0]++,Mr().s[2]++,n.value.stops.forEach((r,i)=>{Mr().f[1]++,Mr().s[3]++,Object.prototype.hasOwnProperty.call(!e.refs,i)?(Mr().b[2][0]++,Mr().s[4]++,t?Mr().b[3][1]++:(Mr().b[3][0]++,Mr().s[5]++,t={...e}),Mr().s[6]++,t[i]=Ny("stop-")):(Mr().b[2][1]++,Mr().s[7]++,t[i]=e.refs[i])})):Mr().b[0][1]++,Mr().s[8]++,t}class fG extends nr.Component{constructor(){super(...arguments);Pn(this,"state",(Mr().s[10]++,{refs:{}}));Pn(this,"changeDataType",(Mr().s[36]++,t=>{Mr().f[11]++,Mr().s[37]++,Mr().b[8][0]++,t!=="interpolate"&&(Mr().b[8][1]++,this.props.onChangeToDataFunction)?(Mr().b[7][0]++,Mr().s[38]++,this.props.onChangeToDataFunction(t)):Mr().b[7][1]++}))}componentDidMount(){Mr().f[2]++;const t=(Mr().s[11]++,DR(this.props,this.state));Mr().s[12]++,t?(Mr().b[4][0]++,Mr().s[13]++,this.setState({refs:t})):Mr().b[4][1]++}static getDerivedStateFromProps(t,r){Mr().f[3]++;const i=(Mr().s[14]++,DR(t,r));return Mr().s[15]++,i?(Mr().b[5][0]++,Mr().s[16]++,{refs:i}):(Mr().b[5][1]++,Mr().s[17]++,null)}orderStopsByZoom(t){Mr().f[4]++;const r=(Mr().s[18]++,t.map((s,a)=>(Mr().f[5]++,Mr().s[19]++,{ref:this.state.refs[a],data:s})).sort((s,a)=>(Mr().f[6]++,Mr().s[20]++,dG(s.data[0],a.data[0])))),i=(Mr().s[21]++,{});return Mr().s[22]++,r.forEach((s,a)=>{Mr().f[7]++,Mr().s[23]++,i[a]=s.ref}),Mr().s[24]++,this.setState({refs:i}),Mr().s[25]++,r.map(s=>(Mr().f[8]++,Mr().s[26]++,s.data))}changeZoomStop(t,r,i){Mr().f[9]++;const s=(Mr().s[27]++,this.props.value.stops.slice(0));Mr().s[28]++,s[t]=[r,i];const a=(Mr().s[29]++,this.orderStopsByZoom(s)),o=(Mr().s[30]++,{...this.props.value,stops:a});Mr().s[31]++,this.props.onChange(this.props.fieldName,o)}changeBase(t){Mr().f[10]++;const r=(Mr().s[32]++,{...this.props.value,base:t});Mr().s[33]++,r.base===void 0?(Mr().b[6][0]++,Mr().s[34]++,delete r.base):Mr().b[6][1]++,Mr().s[35]++,this.props.onChange(this.props.fieldName,r)}render(){var i,s,a,o;Mr().f[12]++;const t=(Mr().s[39]++,this.props.t),r=(Mr().s[40]++,(i=this.props.value)==null?void 0:i.stops.map((d,g)=>{var I;Mr().f[13]++;const b=(Mr().s[41]++,d[0]),E=(Mr().s[42]++,d[1]),S=(Mr().s[43]++,ue.jsx(hG,{onClick:(I=this.props.onDeleteStop)==null?void 0:I.bind(this,g)}));return Mr().s[44]++,ue.jsxs("tr",{children:[ue.jsx("td",{children:ue.jsx(um,{"aria-label":t("Zoom"),value:b,onChange:P=>(Mr().f[14]++,Mr().s[45]++,this.changeZoomStop(g,P,E)),min:0,max:22})}),ue.jsx("td",{children:ue.jsx(Ey,{"aria-label":t("Output value"),fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:E,onChange:(P,z)=>(Mr().f[15]++,Mr().s[46]++,this.changeZoomStop(g,b,z))})}),ue.jsx("td",{children:S})]},`${d[0]}-${d[1]}`)}));return Mr().s[47]++,ue.jsx("div",{className:"maputnik-data-spec-block",children:ue.jsxs("fieldset",{className:"maputnik-data-spec-property",children:[ue.jsx("legend",{children:y3(this.props.fieldName)}),ue.jsxs("div",{className:"maputnik-data-fieldset-inner",children:[ue.jsx(fa,{label:t("Function"),children:ue.jsx("div",{className:"maputnik-data-spec-property-input",children:ue.jsx(Xg,{value:"interpolate",onChange:d=>(Mr().f[16]++,Mr().s[48]++,this.changeDataType(d)),title:t("Select a type of data scale (default is 'categorical')."),options:this.getDataFunctionTypes(this.props.fieldSpec)})})}),ue.jsx(fa,{label:t("Base"),children:ue.jsx("div",{className:"maputnik-data-spec-property-input",children:ue.jsx(Ey,{fieldName:"base",fieldSpec:ts.function.base,value:(s=this.props.value)==null?void 0:s.base,onChange:(d,g)=>(Mr().f[17]++,Mr().s[49]++,this.changeBase(g))})})}),ue.jsx("div",{className:"maputnik-function-stop",children:ue.jsxs("table",{className:"maputnik-function-stop-table maputnik-function-stop-table--zoom",children:[ue.jsx("caption",{children:t("Stops")}),ue.jsx("thead",{children:ue.jsxs("tr",{children:[ue.jsx("th",{children:t("Zoom")}),ue.jsx("th",{rowSpan:2,children:t("Output value")})]})}),ue.jsx("tbody",{children:r})]})}),ue.jsxs("div",{className:"maputnik-toolbox",children:[ue.jsxs(Ja,{className:"maputnik-add-stop",onClick:(a=this.props.onAddStop)==null?void 0:a.bind(this),children:[ue.jsx("svg",{style:{width:"14px",height:"14px",verticalAlign:"text-bottom"},viewBox:"0 0 24 24",children:ue.jsx("path",{fill:"currentColor",d:WO})})," ",t("Add stop")]}),ue.jsxs(Ja,{className:"maputnik-add-stop",onClick:(o=this.props.onExpressionClick)==null?void 0:o.bind(this),children:[ue.jsx("svg",{style:{width:"14px",height:"14px",verticalAlign:"text-bottom"},viewBox:"0 0 24 24",children:ue.jsx("path",{fill:"currentColor",d:GC})})," ",t("Convert to expression")]})]})]})]})})}getDataFunctionTypes(t){return Mr().f[18]++,Mr().s[50]++,t["property-type"]==="data-driven"?(Mr().b[9][0]++,Mr().s[51]++,["interpolate","categorical","interval","exponential","identity"]):(Mr().b[9][1]++,Mr().s[52]++,["interpolate"])}}Pn(fG,"defaultProps",(Mr().s[9]++,{errors:{}}));const zde=(Mr().s[53]++,Ns()(fG));function Ft(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldFunction.tsx",e="36be9049018d9eb4ab6b3a8eeeb8db87a4e7a5ee",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldFunction.tsx",statementMap:{0:{start:{line:10,column:2},end:{line:10,column:78}},1:{start:{line:13,column:2},end:{line:13,column:74}},2:{start:{line:16,column:2},end:{line:18,column:5}},3:{start:{line:17,column:4},end:{line:17,column:52}},4:{start:{line:21,column:2},end:{line:21,column:123}},5:{start:{line:24,column:2},end:{line:26,column:5}},6:{start:{line:25,column:4},end:{line:25,column:83}},7:{start:{line:29,column:2},end:{line:29,column:64}},8:{start:{line:32,column:16},end:{line:32,column:47}},9:{start:{line:33,column:2},end:{line:33,column:38}},10:{start:{line:36,column:2},end:{line:38,column:3}},11:{start:{line:37,column:4},end:{line:37,column:37}},12:{start:{line:39,column:2},end:{line:39,column:15}},13:{start:{line:42,column:2},end:{line:54,column:3}},14:{start:{line:43,column:4},end:{line:43,column:19}},15:{start:{line:44,column:9},end:{line:54,column:3}},16:{start:{line:45,column:4},end:{line:45,column:19}},17:{start:{line:46,column:9},end:{line:54,column:3}},18:{start:{line:47,column:4},end:{line:47,column:19}},19:{start:{line:48,column:9},end:{line:54,column:3}},20:{start:{line:49,column:4},end:{line:49,column:27}},21:{start:{line:50,column:9},end:{line:54,column:3}},22:{start:{line:51,column:4},end:{line:51,column:27}},23:{start:{line:53,column:4},end:{line:53,column:24}},24:{start:{line:58,column:4},end:{line:58,column:17}},25:{start:{line:59,column:4},end:{line:62,column:6}},26:{start:{line:65,column:4},end:{line:72,column:5}},27:{start:{line:66,column:6},end:{line:66,column:16}},28:{start:{line:68,column:6},end:{line:71,column:8}},29:{start:{line:75,column:4},end:{line:77,column:5}},30:{start:{line:76,column:6},end:{line:76,column:27}},31:{start:{line:78,column:4},end:{line:80,column:5}},32:{start:{line:79,column:6},end:{line:79,column:24}},33:{start:{line:81,column:4},end:{line:81,column:25}},34:{start:{line:83,column:12},end:{line:99,column:3}},35:{start:{line:84,column:18},end:{line:84,column:49}},36:{start:{line:85,column:21},end:{line:85,column:44}},37:{start:{line:86,column:4},end:{line:93,column:5}},38:{start:{line:87,column:6},end:{line:90,column:9}},39:{start:{line:92,column:6},end:{line:92,column:49}},40:{start:{line:94,column:25},end:{line:97,column:5}},41:{start:{line:98,column:4},end:{line:98,column:60}},42:{start:{line:100,column:21},end:{line:106,column:3}},43:{start:{line:101,column:37},end:{line:101,column:47}},44:{start:{line:102,column:4},end:{line:102,column:54}},45:{start:{line:103,column:4},end:{line:105,column:7}},46:{start:{line:107,column:15},end:{line:118,column:3}},47:{start:{line:108,column:18},end:{line:108,column:49}},48:{start:{line:109,column:4},end:{line:109,column:29}},49:{start:{line:110,column:23},end:{line:113,column:5}},50:{start:{line:114,column:4},end:{line:116,column:5}},51:{start:{line:115,column:6},end:{line:115,column:33}},52:{start:{line:117,column:4},end:{line:117,column:60}},53:{start:{line:119,column:21},end:{line:148,column:3}},54:{start:{line:120,column:22},end:{line:120,column:32}},55:{start:{line:122,column:4},end:{line:146,column:5}},56:{start:{line:123,column:6},end:{line:138,column:7}},57:{start:{line:124,column:8},end:{line:129,column:10}},58:{start:{line:127,column:12},end:{line:127,column:88}},59:{start:{line:131,column:8},end:{line:137,column:10}},60:{start:{line:140,column:6},end:{line:145,column:8}},61:{start:{line:147,column:4},end:{line:147,column:56}},62:{start:{line:149,column:19},end:{line:165,column:3}},63:{start:{line:150,column:33},end:{line:150,column:43}},64:{start:{line:151,column:4},end:{line:164,column:5}},65:{start:{line:152,column:6},end:{line:155,column:9}},66:{start:{line:156,column:6},end:{line:158,column:9}},67:{start:{line:159,column:11},end:{line:164,column:5}},68:{start:{line:160,column:6},end:{line:160,column:47}},69:{start:{line:161,column:6},end:{line:163,column:9}},70:{start:{line:166,column:12},end:{line:169,column:3}},71:{start:{line:167,column:33},end:{line:167,column:43}},72:{start:{line:168,column:4},end:{line:168,column:140}},73:{start:{line:170,column:19},end:{line:181,column:3}},74:{start:{line:171,column:33},end:{line:171,column:43}},75:{start:{line:173,column:4},end:{line:179,column:5}},76:{start:{line:174,column:6},end:{line:174,column:67}},77:{start:{line:175,column:11},end:{line:179,column:5}},78:{start:{line:176,column:6},end:{line:176,column:43}},79:{start:{line:178,column:6},end:{line:178,column:70}},80:{start:{line:180,column:4},end:{line:180,column:58}},81:{start:{line:182,column:21},end:{line:220,column:3}},82:{start:{line:183,column:25},end:{line:183,column:72}},83:{start:{line:184,column:22},end:{line:184,column:61}},84:{start:{line:185,column:22},end:{line:185,column:32}},85:{start:{line:187,column:4},end:{line:218,column:5}},86:{start:{line:188,column:6},end:{line:207,column:7}},87:{start:{line:189,column:8},end:{line:196,column:10}},88:{start:{line:194,column:12},end:{line:194,column:111}},89:{start:{line:198,column:8},end:{line:206,column:10}},90:{start:{line:209,column:6},end:{line:217,column:8}},91:{start:{line:219,column:4},end:{line:219,column:56}},92:{start:{line:221,column:18},end:{line:223,column:3}},93:{start:{line:222,column:4},end:{line:222,column:39}},94:{start:{line:224,column:20},end:{line:226,column:3}},95:{start:{line:225,column:4},end:{line:225,column:40}},96:{start:{line:228,column:25},end:{line:228,column:35}},97:{start:{line:229,column:22},end:{line:229,column:132}},98:{start:{line:231,column:4},end:{line:295,column:5}},99:{start:{line:232,column:6},end:{line:247,column:8}},100:{start:{line:248,column:11},end:{line:295,column:5}},101:{start:{line:249,column:6},end:{line:263,column:8}},102:{start:{line:264,column:11},end:{line:295,column:5}},103:{start:{line:265,column:6},end:{line:279,column:8}},104:{start:{line:281,column:6},end:{line:294,column:8}},105:{start:{line:296,column:4},end:{line:296,column:148}}},fnMap:{0:{name:"isLiteralExpression",decl:{start:{line:9,column:9},end:{line:9,column:28}},loc:{start:{line:9,column:36},end:{line:11,column:1}},line:9},1:{name:"isGetExpression",decl:{start:{line:12,column:9},end:{line:12,column:24}},loc:{start:{line:12,column:32},end:{line:14,column:1}},line:12},2:{name:"isZoomField",decl:{start:{line:15,column:9},end:{line:15,column:20}},loc:{start:{line:15,column:28},end:{line:19,column:1}},line:15},3:{name:"(anonymous_3)",decl:{start:{line:16,column:168},end:{line:16,column:169}},loc:{start:{line:16,column:178},end:{line:18,column:3}},line:16},4:{name:"isIdentityProperty",decl:{start:{line:20,column:9},end:{line:20,column:27}},loc:{start:{line:20,column:35},end:{line:22,column:1}},line:20},5:{name:"isDataStopProperty",decl:{start:{line:23,column:9},end:{line:23,column:27}},loc:{start:{line:23,column:35},end:{line:27,column:1}},line:23},6:{name:"(anonymous_6)",decl:{start:{line:24,column:168},end:{line:24,column:169}},loc:{start:{line:24,column:178},end:{line:26,column:3}},line:24},7:{name:"isDataField",decl:{start:{line:28,column:9},end:{line:28,column:20}},loc:{start:{line:28,column:28},end:{line:30,column:1}},line:28},8:{name:"isPrimative",decl:{start:{line:31,column:9},end:{line:31,column:20}},loc:{start:{line:31,column:28},end:{line:34,column:1}},line:31},9:{name:"isArrayOfPrimatives",decl:{start:{line:35,column:9},end:{line:35,column:28}},loc:{start:{line:35,column:37},end:{line:40,column:1}},line:35},10:{name:"getDataType",decl:{start:{line:41,column:9},end:{line:41,column:20}},loc:{start:{line:41,column:44},end:{line:55,column:1}},line:41},11:{name:"(anonymous_11)",decl:{start:{line:57,column:2},end:{line:57,column:3}},loc:{start:{line:57,column:21},end:{line:63,column:3}},line:57},12:{name:"(anonymous_12)",decl:{start:{line:64,column:2},end:{line:64,column:3}},loc:{start:{line:64,column:48},end:{line:73,column:3}},line:64},13:{name:"(anonymous_13)",decl:{start:{line:74,column:2},end:{line:74,column:3}},loc:{start:{line:74,column:34},end:{line:82,column:3}},line:74},14:{name:"(anonymous_14)",decl:{start:{line:83,column:12},end:{line:83,column:13}},loc:{start:{line:83,column:18},end:{line:99,column:3}},line:83},15:{name:"(anonymous_15)",decl:{start:{line:100,column:21},end:{line:100,column:22}},loc:{start:{line:100,column:27},end:{line:106,column:3}},line:100},16:{name:"(anonymous_16)",decl:{start:{line:107,column:15},end:{line:107,column:16}},loc:{start:{line:107,column:28},end:{line:118,column:3}},line:107},17:{name:"(anonymous_17)",decl:{start:{line:119,column:21},end:{line:119,column:22}},loc:{start:{line:119,column:27},end:{line:148,column:3}},line:119},18:{name:"(anonymous_18)",decl:{start:{line:126,column:33},end:{line:126,column:34}},loc:{start:{line:126,column:43},end:{line:128,column:11}},line:126},19:{name:"(anonymous_19)",decl:{start:{line:149,column:19},end:{line:149,column:20}},loc:{start:{line:149,column:25},end:{line:165,column:3}},line:149},20:{name:"(anonymous_20)",decl:{start:{line:166,column:12},end:{line:166,column:13}},loc:{start:{line:166,column:18},end:{line:169,column:3}},line:166},21:{name:"(anonymous_21)",decl:{start:{line:170,column:19},end:{line:170,column:20}},loc:{start:{line:170,column:25},end:{line:181,column:3}},line:170},22:{name:"(anonymous_22)",decl:{start:{line:182,column:21},end:{line:182,column:22}},loc:{start:{line:182,column:27},end:{line:220,column:3}},line:182},23:{name:"(anonymous_23)",decl:{start:{line:193,column:33},end:{line:193,column:34}},loc:{start:{line:193,column:43},end:{line:195,column:11}},line:193},24:{name:"(anonymous_24)",decl:{start:{line:221,column:18},end:{line:221,column:19}},loc:{start:{line:221,column:24},end:{line:223,column:3}},line:221},25:{name:"(anonymous_25)",decl:{start:{line:224,column:20},end:{line:224,column:21}},loc:{start:{line:224,column:26},end:{line:226,column:3}},line:224},26:{name:"(anonymous_26)",decl:{start:{line:227,column:2},end:{line:227,column:3}},loc:{start:{line:227,column:11},end:{line:297,column:3}},line:227}},branchMap:{0:{loc:{start:{line:10,column:9},end:{line:10,column:77}},type:"binary-expr",locations:[{start:{line:10,column:9},end:{line:10,column:29}},{start:{line:10,column:33},end:{line:10,column:51}},{start:{line:10,column:55},end:{line:10,column:77}}],line:10},1:{loc:{start:{line:13,column:9},end:{line:13,column:73}},type:"binary-expr",locations:[{start:{line:13,column:9},end:{line:13,column:29}},{start:{line:13,column:33},end:{line:13,column:51}},{start:{line:13,column:55},end:{line:13,column:73}}],line:13},2:{loc:{start:{line:16,column:9},end:{line:18,column:4}},type:"binary-expr",locations:[{start:{line:16,column:9},end:{line:16,column:34}},{start:{line:16,column:38},end:{line:16,column:49}},{start:{line:16,column:53},end:{line:16,column:90}},{start:{line:16,column:94},end:{line:16,column:120}},{start:{line:16,column:124},end:{line:16,column:146}},{start:{line:16,column:150},end:{line:18,column:4}}],line:16},3:{loc:{start:{line:17,column:11},end:{line:17,column:51}},type:"binary-expr",locations:[{start:{line:17,column:11},end:{line:17,column:30}},{start:{line:17,column:34},end:{line:17,column:51}}],line:17},4:{loc:{start:{line:21,column:9},end:{line:21,column:122}},type:"binary-expr",locations:[{start:{line:21,column:9},end:{line:21,column:34}},{start:{line:21,column:38},end:{line:21,column:63}},{start:{line:21,column:67},end:{line:21,column:122}}],line:21},5:{loc:{start:{line:24,column:9},end:{line:26,column:4}},type:"binary-expr",locations:[{start:{line:24,column:9},end:{line:24,column:34}},{start:{line:24,column:38},end:{line:24,column:49}},{start:{line:24,column:53},end:{line:24,column:90}},{start:{line:24,column:94},end:{line:24,column:116}},{start:{line:24,column:120},end:{line:24,column:146}},{start:{line:24,column:150},end:{line:26,column:4}}],line:24},6:{loc:{start:{line:25,column:11},end:{line:25,column:82}},type:"binary-expr",locations:[{start:{line:25,column:11},end:{line:25,column:30}},{start:{line:25,column:34},end:{line:25,column:51}},{start:{line:25,column:55},end:{line:25,column:82}}],line:25},7:{loc:{start:{line:29,column:9},end:{line:29,column:63}},type:"binary-expr",locations:[{start:{line:29,column:9},end:{line:29,column:34}},{start:{line:29,column:38},end:{line:29,column:63}}],line:29},8:{loc:{start:{line:36,column:2},end:{line:38,column:3}},type:"if",locations:[{start:{line:36,column:2},end:{line:38,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:36},9:{loc:{start:{line:41,column:28},end:{line:41,column:42}},type:"default-arg",locations:[{start:{line:41,column:40},end:{line:41,column:42}}],line:41},10:{loc:{start:{line:42,column:2},end:{line:54,column:3}},type:"if",locations:[{start:{line:42,column:2},end:{line:54,column:3}},{start:{line:44,column:9},end:{line:54,column:3}}],line:42},11:{loc:{start:{line:44,column:9},end:{line:54,column:3}},type:"if",locations:[{start:{line:44,column:9},end:{line:54,column:3}},{start:{line:46,column:9},end:{line:54,column:3}}],line:44},12:{loc:{start:{line:46,column:9},end:{line:54,column:3}},type:"if",locations:[{start:{line:46,column:9},end:{line:54,column:3}},{start:{line:48,column:9},end:{line:54,column:3}}],line:46},13:{loc:{start:{line:46,column:13},end:{line:46,column:69}},type:"binary-expr",locations:[{start:{line:46,column:13},end:{line:46,column:39}},{start:{line:46,column:43},end:{line:46,column:69}}],line:46},14:{loc:{start:{line:48,column:9},end:{line:54,column:3}},type:"if",locations:[{start:{line:48,column:9},end:{line:54,column:3}},{start:{line:50,column:9},end:{line:54,column:3}}],line:48},15:{loc:{start:{line:50,column:9},end:{line:54,column:3}},type:"if",locations:[{start:{line:50,column:9},end:{line:54,column:3}},{start:{line:52,column:9},end:{line:54,column:3}}],line:50},16:{loc:{start:{line:65,column:4},end:{line:72,column:5}},type:"if",locations:[{start:{line:65,column:4},end:{line:72,column:5}},{start:{line:67,column:11},end:{line:72,column:5}}],line:65},17:{loc:{start:{line:75,column:4},end:{line:77,column:5}},type:"if",locations:[{start:{line:75,column:4},end:{line:77,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:75},18:{loc:{start:{line:78,column:4},end:{line:80,column:5}},type:"if",locations:[{start:{line:78,column:4},end:{line:80,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:78},19:{loc:{start:{line:86,column:4},end:{line:93,column:5}},type:"if",locations:[{start:{line:86,column:4},end:{line:93,column:5}},{start:{line:91,column:11},end:{line:93,column:5}}],line:86},20:{loc:{start:{line:114,column:4},end:{line:116,column:5}},type:"if",locations:[{start:{line:114,column:4},end:{line:116,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:114},21:{loc:{start:{line:122,column:4},end:{line:146,column:5}},type:"if",locations:[{start:{line:122,column:4},end:{line:146,column:5}},{start:{line:139,column:11},end:{line:146,column:5}}],line:122},22:{loc:{start:{line:123,column:6},end:{line:138,column:7}},type:"if",locations:[{start:{line:123,column:6},end:{line:138,column:7}},{start:{line:130,column:13},end:{line:138,column:7}}],line:123},23:{loc:{start:{line:127,column:34},end:{line:127,column:86}},type:"binary-expr",locations:[{start:{line:127,column:34},end:{line:127,column:41}},{start:{line:127,column:45},end:{line:127,column:86}}],line:127},24:{loc:{start:{line:142,column:14},end:{line:142,column:64}},type:"binary-expr",locations:[{start:{line:142,column:14},end:{line:142,column:19}},{start:{line:142,column:23},end:{line:142,column:64}}],line:142},25:{loc:{start:{line:143,column:15},end:{line:143,column:65}},type:"binary-expr",locations:[{start:{line:143,column:15},end:{line:143,column:20}},{start:{line:143,column:24},end:{line:143,column:65}}],line:143},26:{loc:{start:{line:151,column:4},end:{line:164,column:5}},type:"if",locations:[{start:{line:151,column:4},end:{line:164,column:5}},{start:{line:159,column:11},end:{line:164,column:5}}],line:151},27:{loc:{start:{line:159,column:11},end:{line:164,column:5}},type:"if",locations:[{start:{line:159,column:11},end:{line:164,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:159},28:{loc:{start:{line:168,column:11},end:{line:168,column:139}},type:"binary-expr",locations:[{start:{line:168,column:11},end:{line:168,column:33}},{start:{line:168,column:37},end:{line:168,column:63}},{start:{line:168,column:67},end:{line:168,column:85}},{start:{line:168,column:89},end:{line:168,column:109}},{start:{line:168,column:113},end:{line:168,column:139}}],line:168},29:{loc:{start:{line:173,column:4},end:{line:179,column:5}},type:"if",locations:[{start:{line:173,column:4},end:{line:179,column:5}},{start:{line:175,column:11},end:{line:179,column:5}}],line:173},30:{loc:{start:{line:173,column:8},end:{line:173,column:53}},type:"binary-expr",locations:[{start:{line:173,column:8},end:{line:173,column:33}},{start:{line:173,column:37},end:{line:173,column:53}}],line:173},31:{loc:{start:{line:175,column:11},end:{line:179,column:5}},type:"if",locations:[{start:{line:175,column:11},end:{line:179,column:5}},{start:{line:177,column:11},end:{line:179,column:5}}],line:175},32:{loc:{start:{line:178,column:31},end:{line:178,column:68}},type:"binary-expr",locations:[{start:{line:178,column:31},end:{line:178,column:36}},{start:{line:178,column:40},end:{line:178,column:68}}],line:178},33:{loc:{start:{line:184,column:22},end:{line:184,column:61}},type:"cond-expr",locations:[{start:{line:184,column:55},end:{line:184,column:57}},{start:{line:184,column:60},end:{line:184,column:61}}],line:184},34:{loc:{start:{line:187,column:4},end:{line:218,column:5}},type:"if",locations:[{start:{line:187,column:4},end:{line:218,column:5}},{start:{line:208,column:11},end:{line:218,column:5}}],line:187},35:{loc:{start:{line:188,column:6},end:{line:207,column:7}},type:"if",locations:[{start:{line:188,column:6},end:{line:207,column:7}},{start:{line:197,column:13},end:{line:207,column:7}}],line:188},36:{loc:{start:{line:194,column:57},end:{line:194,column:109}},type:"binary-expr",locations:[{start:{line:194,column:57},end:{line:194,column:64}},{start:{line:194,column:68},end:{line:194,column:109}}],line:194},37:{loc:{start:{line:214,column:42},end:{line:214,column:103}},type:"binary-expr",locations:[{start:{line:214,column:42},end:{line:214,column:58}},{start:{line:214,column:62},end:{line:214,column:103}}],line:214},38:{loc:{start:{line:215,column:43},end:{line:215,column:104}},type:"binary-expr",locations:[{start:{line:215,column:43},end:{line:215,column:59}},{start:{line:215,column:63},end:{line:215,column:104}}],line:215},39:{loc:{start:{line:229,column:22},end:{line:229,column:132}},type:"cond-expr",locations:[{start:{line:229,column:74},end:{line:229,column:101}},{start:{line:229,column:104},end:{line:229,column:132}}],line:229},40:{loc:{start:{line:231,column:4},end:{line:295,column:5}},type:"if",locations:[{start:{line:231,column:4},end:{line:295,column:5}},{start:{line:248,column:11},end:{line:295,column:5}}],line:231},41:{loc:{start:{line:248,column:11},end:{line:295,column:5}},type:"if",locations:[{start:{line:248,column:11},end:{line:295,column:5}},{start:{line:264,column:11},end:{line:295,column:5}}],line:248},42:{loc:{start:{line:264,column:11},end:{line:295,column:5}},type:"if",locations:[{start:{line:264,column:11},end:{line:295,column:5}},{start:{line:280,column:11},end:{line:295,column:5}}],line:264}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0,87:0,88:0,89:0,90:0,91:0,92:0,93:0,94:0,95:0,96:0,97:0,98:0,99:0,100:0,101:0,102:0,103:0,104:0,105:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0},b:{0:[0,0,0],1:[0,0,0],2:[0,0,0,0,0,0],3:[0,0],4:[0,0,0],5:[0,0,0,0,0,0],6:[0,0,0],7:[0,0],8:[0,0],9:[0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0],26:[0,0],27:[0,0],28:[0,0,0,0,0],29:[0,0],30:[0,0],31:[0,0],32:[0,0],33:[0,0],34:[0,0],35:[0,0],36:[0,0],37:[0,0],38:[0,0],39:[0,0],40:[0,0],41:[0,0],42:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldFunction.tsx"],names:[],mappings:"AAkVQ;AAlVR,OAAO,WAAW;AAElB,OAAO,kBAAkB;AACzB,OAAO,kBAA4B;AACnC,OAAO,kBAAkB;AACzB,OAAO,wBAAwB;AAC/B,SAAQ,YAAY,qBAAoB;AACxC,SAAQ,2BAA0B;AAGlC,SAAS,oBAAoB,OAAY;AACvC,SAAQ,MAAM,QAAQ,KAAK,KAAK,MAAM,WAAW,KAAK,MAAM,CAAC,MAAM;AACrE;AAEA,SAAS,gBAAgB,OAAY;AACnC,SACE,MAAM,QAAQ,KAAK,KACnB,MAAM,WAAW,KACjB,MAAM,CAAC,MAAM;AAEjB;AAEA,SAAS,YAAY,OAAY;AAC/B,SACE,OAAO,UAAW,YAClB,MAAM,SACN,OAAO,MAAM,aAAc,eAC3B,MAAM,QAAQ,MAAM,KAAK,KACzB,MAAM,MAAM,SAAS,KACrB,MAAM,MAAM,MAAM,CAAC,SAAe;AAChC,WACE,MAAM,QAAQ,IAAI,KAClB,KAAK,WAAW;AAAA,EAEpB,CAAC;AAEL;AAEA,SAAS,mBAAmB,OAAY;AACtC,SACE,OAAO,UAAW,YAClB,MAAM,SAAS,cACf,OAAO,UAAU,eAAe,KAAK,OAAO,UAAU;AAE1D;AAEA,SAAS,mBAAmB,OAAY;AACtC,SACE,OAAO,UAAW,YAClB,MAAM,SACN,OAAO,MAAM,aAAc,eAC3B,MAAM,MAAM,SAAS,KACrB,MAAM,QAAQ,MAAM,KAAK,KACzB,MAAM,MAAM,MAAM,CAAC,SAAe;AAChC,WACE,MAAM,QAAQ,IAAI,KAClB,KAAK,WAAW,KAChB,OAAO,KAAK,CAAC,MAAO;AAAA,EAExB,CAAC;AAEL;AAEA,SAAS,YAAY,OAAY;AAC/B,SACE,mBAAmB,KAAK,KACxB,mBAAmB,KAAK;AAE5B;AAEA,SAAS,YAAY,OAAgD;AACnE,QAAM,QAAQ,CAAC,UAAU,WAAW,QAAQ;AAC5C,SAAO,MAAM,SAAS,OAAO,KAAM;AACrC;AAEA,SAAS,oBAAoB,QAAyD;AACpF,MAAI,MAAM,QAAQ,MAAM,GAAG;AACzB,WAAO,OAAO,MAAM,WAAW;AAAA,EACjC;AACA,SAAO;AACT;AAEA,SAAS,YAAY,OAAY,YAAU,CAAC,GAAU;AACpD,MAAI,UAAU,QAAW;AACvB,WAAO;AAAA,EACT,WACS,YAAY,KAAK,GAAG;AAC3B,WAAO;AAAA,EACT,WACS,UAAU,SAAS,WAAW,oBAAoB,KAAK,GAAG;AACjE,WAAO;AAAA,EACT,WACS,YAAY,KAAK,GAAG;AAC3B,WAAO;AAAA,EACT,WACS,YAAY,KAAK,GAAG;AAC3B,WAAO;AAAA,EACT,OACK;AACH,WAAO;AAAA,EACT;AACF;AAoBA,qBAAqB,sBAAsB,MAAM,UAAkD;AAAA,EACjG,YAAa,OAA2B;AACtC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,UAAU,YAAY,MAAM,OAAO,MAAM,SAAS;AAAA,MAClD,WAAW;AAAA,IACb;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAAqC,OAA2B;AAE9F,QAAI,MAAM,WAAW;AACnB,aAAO,CAAC;AAAA,IACV,OACK;AACH,aAAO;AAAA,QACL,WAAW;AAAA,QACX,UAAU,YAAY,MAAM,OAAO,MAAM,SAAS;AAAA,MACpD;AAAA,IACF;AAAA,EACF;AAAA,EAEA,qBAAqB,WAAgB;AACnC,QAAI,UAAU,WAAW,cAAc;AACrC,aAAO;AAAA,IACT;AACA,QAAI,UAAU,SAAS,UAAU;AAC/B,aAAO;AAAA,IACT;AACA,WAAO;AAAA,EACT;AAAA,EAEA,UAAU,MAAM;AACd,UAAM,QAAQ,KAAK,MAAM,MAAM,MAAM,MAAM,CAAC;AAC5C,UAAM,WAAW,MAAM,MAAM,SAAS,CAAC;AACvC,QAAI,OAAO,SAAS,CAAC,MAAM,UAAU;AACnC,YAAM,KAAK;AAAA,QACT,EAAC,MAAM,SAAS,CAAC,EAAE,OAAO,GAAG,OAAO,SAAS,CAAC,EAAE,MAAK;AAAA,QACrD,SAAS,CAAC;AAAA,MACZ,CAAC;AAAA,IACH,OACK;AACH,YAAM,KAAK,CAAC,SAAS,CAAC,IAAI,GAAG,SAAS,CAAC,CAAC,CAAC;AAAA,IAC3C;AAEA,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF;AAEA,SAAK,MAAM,SAAS,KAAK,MAAM,WAAW,YAAY;AAAA,EACxD;AAAA,EAEA,mBAAmB,MAAM;AACvB,UAAM,EAAC,WAAW,UAAS,IAAI,KAAK;AACpC,SAAK,MAAM,SAAS,WAAW,UAAU,OAAO;AAChD,SAAK,SAAS;AAAA,MACZ,UAAU;AAAA,IACZ,CAAC;AAAA,EACH;AAAA,EAEA,aAAa,CAAC,YAAoB;AAChC,UAAM,QAAQ,KAAK,MAAM,MAAM,MAAM,MAAM,CAAC;AAC5C,UAAM,OAAO,SAAS,CAAC;AAEvB,QAAI,eAAe;AAAA,MACjB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF;AAEA,QAAG,MAAM,WAAW,GAAG;AACrB,qBAAe,MAAM,CAAC,EAAE,CAAC;AAAA,IAC3B;AAEA,SAAK,MAAM,SAAS,KAAK,MAAM,WAAW,YAAY;AAAA,EACxD;AAAA,EAEA,mBAAmB,MAAM;AACvB,UAAM,EAAC,MAAK,IAAI,KAAK;AAErB,QAAI;AACJ,QAAI,OAAO,UAAW,UAAU;AAC9B,UAAI,MAAM,OAAO;AACf,mBAAW;AAAA,UACT,MAAM,MAAM;AAAA,UACZ,OAAO,MAAM,MAAM,IAAI,CAAC,SAAe;AACrC,mBAAO,CAAC,KAAK,CAAC,EAAE,MAAM,KAAK,CAAC,KAAK,oBAAoB,KAAK,MAAM,SAAS,CAAC;AAAA,UAC5E,CAAC;AAAA,QACH;AAAA,MACF,OACK;AACH,mBAAW;AAAA,UACT,MAAM,MAAM;AAAA,UACZ,OAAO;AAAA,YACL,CAAC,GAAG,oBAAoB,KAAK,MAAM,SAAS,CAAC;AAAA,YAC7C,CAAC,IAAI,oBAAoB,KAAK,MAAM,SAAS,CAAC;AAAA,UAChD;AAAA,QACF;AAAA,MACF;AAAA,IACF,OACK;AACH,iBAAW;AAAA,QACT,OAAO;AAAA,UACL,CAAC,GAAG,SAAS,oBAAoB,KAAK,MAAM,SAAS,CAAC;AAAA,UACtD,CAAC,IAAI,SAAS,oBAAoB,KAAK,MAAM,SAAS,CAAC;AAAA,QACzD;AAAA,MACF;AAAA,IACF;AAEA,SAAK,MAAM,SAAS,KAAK,MAAM,WAAW,QAAQ;AAAA,EACpD;AAAA,EAEA,iBAAiB,MAAM;AACrB,UAAM,EAAC,OAAO,UAAS,IAAI,KAAK;AAEhC,QAAI,gBAAgB,KAAK,GAAG;AAC1B,WAAK,MAAM,SAAS,WAAW;AAAA,QAC7B,QAAQ;AAAA,QACR,YAAY,MAAM,CAAC;AAAA,MACrB,CAAC;AACD,WAAK,SAAS;AAAA,QACZ,UAAU;AAAA,MACZ,CAAC;AAAA,IACH,WACS,oBAAoB,KAAK,GAAG;AACnC,WAAK,MAAM,SAAS,WAAW,MAAM,CAAC,CAAC;AACvC,WAAK,SAAS;AAAA,QACZ,UAAU;AAAA,MACZ,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,UAAU,MAAM;AACd,UAAM,EAAC,OAAO,UAAS,IAAI,KAAK;AAChC,WACE,gBAAgB,KAAK,KACrB,oBAAoB,KAAK,KACzB,YAAY,KAAK,KAChB,MAAM,QAAQ,KAAK,KAAK,UAAU,SAAS;AAAA,EAEhD;AAAA,EAEA,iBAAiB,MAAM;AACrB,UAAM,EAAC,OAAO,UAAS,IAAI,KAAK;AAChC,QAAI;AAEJ,QAAI,OAAO,UAAW,YAAY,WAAW,OAAO;AAClD,mBAAa,cAAc,gBAAgB,OAAO,SAAS;AAAA,IAC7D,WACS,mBAAmB,KAAK,GAAG;AAClC,mBAAa,CAAC,OAAO,MAAM,QAAQ;AAAA,IACrC,OACK;AACH,mBAAa,CAAC,WAAW,SAAS,KAAK,MAAM,UAAU,OAAO;AAAA,IAChE;AACA,SAAK,MAAM,SAAS,KAAK,MAAM,WAAW,UAAU;AAAA,EACtD;AAAA,EAEA,mBAAmB,MAAM;AACvB,UAAM,eAAe,KAAK,qBAAqB,KAAK,MAAM,SAAS;AACnE,UAAM,YAAY,iBAAiB,gBAAgB,KAAK;AACxD,UAAM,EAAC,MAAK,IAAI,KAAK;AACrB,QAAI;AAEJ,QAAI,OAAO,UAAW,UAAU;AAC9B,UAAI,MAAM,OAAO;AACf,mBAAW;AAAA,UACT,UAAU;AAAA,UACV,MAAM;AAAA,UACN,MAAM,MAAM;AAAA,UACZ,OAAO,MAAM,MAAM,IAAI,CAAC,SAAe;AACrC,mBAAO,CAAC,EAAC,MAAM,KAAK,CAAC,GAAG,OAAO,UAAS,GAAG,KAAK,CAAC,KAAK,oBAAoB,KAAK,MAAM,SAAS,CAAC;AAAA,UACjG,CAAC;AAAA,QACH;AAAA,MACF,OACK;AACH,mBAAW;AAAA,UACT,UAAU;AAAA,UACV,MAAM;AAAA,UACN,MAAM,MAAM;AAAA,UACZ,OAAO;AAAA,YACL,CAAC,EAAC,MAAM,GAAG,OAAO,UAAS,GAAG,oBAAoB,KAAK,MAAM,SAAS,CAAC;AAAA,YACvE,CAAC,EAAC,MAAM,IAAI,OAAO,UAAS,GAAG,oBAAoB,KAAK,MAAM,SAAS,CAAC;AAAA,UAC1E;AAAA,QACF;AAAA,MACF;AAAA,IACF,OACK;AACH,iBAAW;AAAA,QACT,UAAU;AAAA,QACV,MAAM;AAAA,QACN,MAAM,MAAM;AAAA,QACZ,OAAO;AAAA,UACL,CAAC,EAAC,MAAM,GAAG,OAAO,UAAS,GAAG,KAAK,MAAM,SAAS,oBAAoB,KAAK,MAAM,SAAS,CAAC;AAAA,UAC3F,CAAC,EAAC,MAAM,IAAI,OAAO,UAAS,GAAG,KAAK,MAAM,SAAS,oBAAoB,KAAK,MAAM,SAAS,CAAC;AAAA,QAC9F;AAAA,MACF;AAAA,IACF;AAEA,SAAK,MAAM,SAAS,KAAK,MAAM,WAAW,QAAQ;AAAA,EACpD;AAAA,EAEA,gBAAgB,MAAM;AACpB,SAAK,SAAS,EAAC,WAAW,KAAI,CAAC;AAAA,EACjC;AAAA,EAEA,kBAAkB,MAAM;AACtB,SAAK,SAAS,EAAC,WAAW,MAAK,CAAC;AAAA,EAClC;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,SAAQ,IAAI,KAAK;AACxB,UAAM,YAAY,KAAK,MAAM,UAAU,YAAY,KAAK,MAAM,QAAQ,8BAA8B;AACpG,QAAI;AAEJ,QAAI,aAAa,cAAc;AAC7B,kBACE;AAAA,QAAC;AAAA;AAAA,UACC,QAAQ,KAAK,MAAM;AAAA,UACnB,UAAU,KAAK,MAAM,SAAS,KAAK,MAAM,KAAK,MAAM,SAAS;AAAA,UAC7D,SAAS,KAAK;AAAA,UACd,QAAQ,KAAK;AAAA,UACb,UAAU,KAAK;AAAA,UACf,WAAW,KAAK,MAAM;AAAA,UACtB,WAAW,KAAK,MAAM;AAAA,UACtB,WAAW,KAAK,MAAM;AAAA,UACtB,OAAO,KAAK,MAAM;AAAA,UAClB,SAAS,KAAK;AAAA,UACd,QAAQ,KAAK;AAAA;AAAA,MACf;AAAA,IAEJ,WACS,aAAa,iBAAiB;AACrC,kBACE;AAAA,QAAC;AAAA;AAAA,UACC,QAAQ,KAAK,MAAM;AAAA,UACnB,UAAU,KAAK,MAAM,SAAS,KAAK,IAAI;AAAA,UACvC,WAAW,KAAK,MAAM;AAAA,UACtB,WAAW,KAAK,MAAM;AAAA,UACtB,WAAW,KAAK,MAAM;AAAA,UACtB,OAAO,KAAK,MAAM;AAAA,UAClB,cAAc,KAAK;AAAA,UACnB,WAAW,KAAK;AAAA,UAChB,wBAAwB,KAAK;AAAA,UAC7B,mBAAmB,KAAK;AAAA;AAAA,MAC1B;AAAA,IAEJ,WACS,aAAa,iBAAiB;AAErC,kBACE;AAAA,QAAC;AAAA;AAAA,UACC,QAAQ,KAAK,MAAM;AAAA,UACnB,UAAU,KAAK,MAAM,SAAS,KAAK,IAAI;AAAA,UACvC,WAAW,KAAK,MAAM;AAAA,UACtB,WAAW,KAAK,MAAM;AAAA,UACtB,WAAW,KAAK,MAAM;AAAA,UACtB,OAAO,KAAK,MAAM;AAAA,UAClB,cAAc,KAAK;AAAA,UACnB,WAAW,KAAK;AAAA,UAChB,wBAAwB,KAAK;AAAA,UAC7B,mBAAmB,KAAK;AAAA;AAAA,MAC1B;AAAA,IAEJ,OACK;AACH,kBACE;AAAA,QAAC;AAAA;AAAA,UACC,QAAQ,KAAK,MAAM;AAAA,UACnB,UAAU,KAAK,MAAM,SAAS,KAAK,IAAI;AAAA,UACvC,WAAW,KAAK,MAAM;AAAA,UACtB,WAAW,KAAK,MAAM;AAAA,UACtB,WAAW,KAAK,MAAM;AAAA,UACtB,OAAO,KAAK,MAAM;AAAA,UAClB,aAAa,KAAK;AAAA,UAClB,aAAa,KAAK;AAAA,UAClB,mBAAmB,KAAK;AAAA;AAAA,MAC1B;AAAA,IAEJ;AACA,WAAO,oBAAC,SAAI,WAAW,WAAW,eAAa,0BAAwB,KAAK,MAAM,WAC/E,qBACH;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"36be9049018d9eb4ab6b3a8eeeb8db87a4e7a5ee"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Ft=function(){return a},a}Ft();function RR(n){return Ft().f[0]++,Ft().s[0]++,Ft().b[0][0]++,Array.isArray(n)&&(Ft().b[0][1]++,n.length===2)&&(Ft().b[0][2]++,n[0]==="literal")}function FR(n){return Ft().f[1]++,Ft().s[1]++,Ft().b[1][0]++,Array.isArray(n)&&(Ft().b[1][1]++,n.length===2)&&(Ft().b[1][2]++,n[0]==="get")}function jde(n){return Ft().f[2]++,Ft().s[2]++,Ft().b[2][0]++,typeof n=="object"&&(Ft().b[2][1]++,n.stops)&&(Ft().b[2][2]++,typeof n.property>"u")&&(Ft().b[2][3]++,Array.isArray(n.stops))&&(Ft().b[2][4]++,n.stops.length>1)&&(Ft().b[2][5]++,n.stops.every(e=>(Ft().f[3]++,Ft().s[3]++,Ft().b[3][0]++,Array.isArray(e)&&(Ft().b[3][1]++,e.length===2))))}function pG(n){return Ft().f[4]++,Ft().s[4]++,Ft().b[4][0]++,typeof n=="object"&&(Ft().b[4][1]++,n.type==="identity")&&(Ft().b[4][2]++,Object.prototype.hasOwnProperty.call(n,"property"))}function Nde(n){return Ft().f[5]++,Ft().s[5]++,Ft().b[5][0]++,typeof n=="object"&&(Ft().b[5][1]++,n.stops)&&(Ft().b[5][2]++,typeof n.property<"u")&&(Ft().b[5][3]++,n.stops.length>1)&&(Ft().b[5][4]++,Array.isArray(n.stops))&&(Ft().b[5][5]++,n.stops.every(e=>(Ft().f[6]++,Ft().s[6]++,Ft().b[6][0]++,Array.isArray(e)&&(Ft().b[6][1]++,e.length===2)&&(Ft().b[6][2]++,typeof e[0]=="object"))))}function Wde(n){return Ft().f[7]++,Ft().s[7]++,Ft().b[7][0]++,pG(n)||(Ft().b[7][1]++,Nde(n))}function dI(n){Ft().f[8]++;const e=(Ft().s[8]++,["string","boolean","number"]);return Ft().s[9]++,e.includes(typeof n)}function Gde(n){return Ft().f[9]++,Ft().s[10]++,Array.isArray(n)?(Ft().b[8][0]++,Ft().s[11]++,n.every(dI)):(Ft().b[8][1]++,Ft().s[12]++,!1)}function LR(n,e=(Ft().b[9][0]++,{})){return Ft().f[10]++,Ft().s[13]++,n===void 0?(Ft().b[10][0]++,Ft().s[14]++,"value"):(Ft().b[10][1]++,Ft().s[15]++,dI(n)?(Ft().b[11][0]++,Ft().s[16]++,"value"):(Ft().b[11][1]++,Ft().s[17]++,Ft().b[13][0]++,e.type==="array"&&(Ft().b[13][1]++,Gde(n))?(Ft().b[12][0]++,Ft().s[18]++,"value"):(Ft().b[12][1]++,Ft().s[19]++,jde(n)?(Ft().b[14][0]++,Ft().s[20]++,"zoom_function"):(Ft().b[14][1]++,Ft().s[21]++,Wde(n)?(Ft().b[15][0]++,Ft().s[22]++,"data_function"):(Ft().b[15][1]++,Ft().s[23]++,"expression")))))}class Qde extends nr.Component{constructor(t){Ft().f[11]++,Ft().s[24]++;super(t);Pn(this,"addStop",(Ft().s[34]++,()=>{Ft().f[14]++;const t=(Ft().s[35]++,this.props.value.stops.slice(0)),r=(Ft().s[36]++,t[t.length-1]);Ft().s[37]++,typeof r[0]=="object"?(Ft().b[19][0]++,Ft().s[38]++,t.push([{zoom:r[0].zoom+1,value:r[0].value},r[1]])):(Ft().b[19][1]++,Ft().s[39]++,t.push([r[0]+1,r[1]]));const i=(Ft().s[40]++,{...this.props.value,stops:t});Ft().s[41]++,this.props.onChange(this.props.fieldName,i)}));Pn(this,"deleteExpression",(Ft().s[42]++,()=>{Ft().f[15]++;const{fieldSpec:t,fieldName:r}=(Ft().s[43]++,this.props);Ft().s[44]++,this.props.onChange(r,t.default),Ft().s[45]++,this.setState({dataType:"value"})}));Pn(this,"deleteStop",(Ft().s[46]++,t=>{Ft().f[16]++;const r=(Ft().s[47]++,this.props.value.stops.slice(0));Ft().s[48]++,r.splice(t,1);let i=(Ft().s[49]++,{...this.props.value,stops:r});Ft().s[50]++,r.length===1?(Ft().b[20][0]++,Ft().s[51]++,i=r[0][1]):Ft().b[20][1]++,Ft().s[52]++,this.props.onChange(this.props.fieldName,i)}));Pn(this,"makeZoomFunction",(Ft().s[53]++,()=>{Ft().f[17]++;const{value:t}=(Ft().s[54]++,this.props);let r;Ft().s[55]++,typeof t=="object"?(Ft().b[21][0]++,Ft().s[56]++,t.stops?(Ft().b[22][0]++,Ft().s[57]++,r={base:t.base,stops:t.stops.map(i=>(Ft().f[18]++,Ft().s[58]++,[i[0].zoom,(Ft().b[23][0]++,i[1]||(Ft().b[23][1]++,Pf(this.props.fieldSpec)))]))}):(Ft().b[22][1]++,Ft().s[59]++,r={base:t.base,stops:[[6,Pf(this.props.fieldSpec)],[10,Pf(this.props.fieldSpec)]]})):(Ft().b[21][1]++,Ft().s[60]++,r={stops:[[6,(Ft().b[24][0]++,t||(Ft().b[24][1]++,Pf(this.props.fieldSpec)))],[10,(Ft().b[25][0]++,t||(Ft().b[25][1]++,Pf(this.props.fieldSpec)))]]}),Ft().s[61]++,this.props.onChange(this.props.fieldName,r)}));Pn(this,"undoExpression",(Ft().s[62]++,()=>{Ft().f[19]++;const{value:t,fieldName:r}=(Ft().s[63]++,this.props);Ft().s[64]++,FR(t)?(Ft().b[26][0]++,Ft().s[65]++,this.props.onChange(r,{type:"identity",property:t[1]}),Ft().s[66]++,this.setState({dataType:"value"})):(Ft().b[26][1]++,Ft().s[67]++,RR(t)?(Ft().b[27][0]++,Ft().s[68]++,this.props.onChange(r,t[1]),Ft().s[69]++,this.setState({dataType:"value"})):Ft().b[27][1]++)}));Pn(this,"canUndo",(Ft().s[70]++,()=>{Ft().f[20]++;const{value:t,fieldSpec:r}=(Ft().s[71]++,this.props);return Ft().s[72]++,Ft().b[28][0]++,FR(t)||(Ft().b[28][1]++,RR(t))||(Ft().b[28][2]++,dI(t))||(Ft().b[28][3]++,Array.isArray(t)&&(Ft().b[28][4]++,r.type==="array"))}));Pn(this,"makeExpression",(Ft().s[73]++,()=>{Ft().f[21]++;const{value:t,fieldSpec:r}=(Ft().s[74]++,this.props);let i;Ft().s[75]++,Ft().b[30][0]++,typeof t=="object"&&(Ft().b[30][1]++,"stops"in t)?(Ft().b[29][0]++,Ft().s[76]++,i=qH.convertFunction(t,r)):(Ft().b[29][1]++,Ft().s[77]++,pG(t)?(Ft().b[31][0]++,Ft().s[78]++,i=["get",t.property]):(Ft().b[31][1]++,Ft().s[79]++,i=["literal",(Ft().b[32][0]++,t||(Ft().b[32][1]++,this.props.fieldSpec.default))])),Ft().s[80]++,this.props.onChange(this.props.fieldName,i)}));Pn(this,"makeDataFunction",(Ft().s[81]++,()=>{Ft().f[22]++;const t=(Ft().s[82]++,this.getFieldFunctionType(this.props.fieldSpec)),r=(Ft().s[83]++,t==="categorical"?(Ft().b[33][0]++,""):(Ft().b[33][1]++,0)),{value:i}=(Ft().s[84]++,this.props);let s;Ft().s[85]++,typeof i=="object"?(Ft().b[34][0]++,Ft().s[86]++,i.stops?(Ft().b[35][0]++,Ft().s[87]++,s={property:"",type:t,base:i.base,stops:i.stops.map(a=>(Ft().f[23]++,Ft().s[88]++,[{zoom:a[0],value:r},(Ft().b[36][0]++,a[1]||(Ft().b[36][1]++,Pf(this.props.fieldSpec)))]))}):(Ft().b[35][1]++,Ft().s[89]++,s={property:"",type:t,base:i.base,stops:[[{zoom:6,value:r},Pf(this.props.fieldSpec)],[{zoom:10,value:r},Pf(this.props.fieldSpec)]]})):(Ft().b[34][1]++,Ft().s[90]++,s={property:"",type:t,base:i.base,stops:[[{zoom:6,value:r},(Ft().b[37][0]++,this.props.value||(Ft().b[37][1]++,Pf(this.props.fieldSpec)))],[{zoom:10,value:r},(Ft().b[38][0]++,this.props.value||(Ft().b[38][1]++,Pf(this.props.fieldSpec)))]]}),Ft().s[91]++,this.props.onChange(this.props.fieldName,s)}));Pn(this,"onMarkEditing",(Ft().s[92]++,()=>{Ft().f[24]++,Ft().s[93]++,this.setState({isEditing:!0})}));Pn(this,"onUnmarkEditing",(Ft().s[94]++,()=>{Ft().f[25]++,Ft().s[95]++,this.setState({isEditing:!1})}));Ft().s[25]++,this.state={dataType:LR(t.value,t.fieldSpec),isEditing:!1}}static getDerivedStateFromProps(t,r){return Ft().f[12]++,Ft().s[26]++,r.isEditing?(Ft().b[16][0]++,Ft().s[27]++,{}):(Ft().b[16][1]++,Ft().s[28]++,{isEditing:!1,dataType:LR(t.value,t.fieldSpec)})}getFieldFunctionType(t){return Ft().f[13]++,Ft().s[29]++,t.expression.interpolated?(Ft().b[17][0]++,Ft().s[30]++,"exponential"):(Ft().b[17][1]++,Ft().s[31]++,t.type==="number"?(Ft().b[18][0]++,Ft().s[32]++,"interval"):(Ft().b[18][1]++,Ft().s[33]++,"categorical"))}render(){Ft().f[26]++;const{dataType:t}=(Ft().s[96]++,this.state),r=(Ft().s[97]++,this.props.fieldSpec.default===this.props.value?(Ft().b[39][0]++,"maputnik-default-property"):(Ft().b[39][1]++,"maputnik-modified-property"));let i;return Ft().s[98]++,t==="expression"?(Ft().b[40][0]++,Ft().s[99]++,i=ue.jsx(xW,{errors:this.props.errors,onChange:this.props.onChange.bind(this,this.props.fieldName),canUndo:this.canUndo,onUndo:this.undoExpression,onDelete:this.deleteExpression,fieldType:this.props.fieldType,fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:this.props.value,onFocus:this.onMarkEditing,onBlur:this.onUnmarkEditing})):(Ft().b[40][1]++,Ft().s[100]++,t==="zoom_function"?(Ft().b[41][0]++,Ft().s[101]++,i=ue.jsx(zde,{errors:this.props.errors,onChange:this.props.onChange.bind(this),fieldType:this.props.fieldType,fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:this.props.value,onDeleteStop:this.deleteStop,onAddStop:this.addStop,onChangeToDataFunction:this.makeDataFunction,onExpressionClick:this.makeExpression})):(Ft().b[41][1]++,Ft().s[102]++,t==="data_function"?(Ft().b[42][0]++,Ft().s[103]++,i=ue.jsx(Ude,{errors:this.props.errors,onChange:this.props.onChange.bind(this),fieldType:this.props.fieldType,fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:this.props.value,onDeleteStop:this.deleteStop,onAddStop:this.addStop,onChangeToZoomFunction:this.makeZoomFunction,onExpressionClick:this.makeExpression})):(Ft().b[42][1]++,Ft().s[104]++,i=ue.jsx(cG,{errors:this.props.errors,onChange:this.props.onChange.bind(this),fieldType:this.props.fieldType,fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:this.props.value,onZoomClick:this.makeZoomFunction,onDataClick:this.makeDataFunction,onExpressionClick:this.makeExpression})))),Ft().s[105]++,ue.jsx("div",{className:r,"data-wd-key":"spec-field-container:"+this.props.fieldName,children:i})}}function po(){var n="/home/runner/work/maputnik/maputnik/src/components/PropertyGroup.tsx",e="411d3be261f729b266d6cb26884b34616b925c83",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/PropertyGroup.tsx",statementMap:{0:{start:{line:4,column:23},end:{line:4,column:117}},1:{start:{line:6,column:20},end:{line:6,column:60}},2:{start:{line:7,column:16},end:{line:7,column:49}},3:{start:{line:8,column:20},end:{line:8,column:36}},4:{start:{line:9,column:2},end:{line:14,column:3}},5:{start:{line:10,column:4},end:{line:13,column:6}},6:{start:{line:15,column:2},end:{line:20,column:3}},7:{start:{line:16,column:4},end:{line:19,column:6}},8:{start:{line:21,column:2},end:{line:21,column:19}},9:{start:{line:24,column:16},end:{line:24,column:48}},10:{start:{line:25,column:2},end:{line:29,column:3}},11:{start:{line:26,column:4},end:{line:26,column:19}},12:{start:{line:28,column:4},end:{line:28,column:20}},13:{start:{line:32,column:21},end:{line:35,column:3}},14:{start:{line:33,column:18},end:{line:33,column:80}},15:{start:{line:34,column:4},end:{line:34,column:51}},16:{start:{line:37,column:23},end:{line:37,column:33}},17:{start:{line:38,column:19},end:{line:56,column:6}},18:{start:{line:39,column:24},end:{line:39,column:87}},19:{start:{line:40,column:20},end:{line:40,column:48}},20:{start:{line:41,column:21},end:{line:41,column:50}},21:{start:{line:42,column:25},end:{line:42,column:82}},22:{start:{line:43,column:24},end:{line:43,column:63}},23:{start:{line:44,column:6},end:{line:55,column:8}},24:{start:{line:57,column:4},end:{line:57,column:98}}},fnMap:{0:{name:"getFieldSpec",decl:{start:{line:5,column:9},end:{line:5,column:21}},loc:{start:{line:5,column:50},end:{line:22,column:1}},line:5},1:{name:"getGroupName",decl:{start:{line:23,column:9},end:{line:23,column:21}},loc:{start:{line:23,column:50},end:{line:30,column:1}},line:23},2:{name:"(anonymous_2)",decl:{start:{line:32,column:21},end:{line:32,column:22}},loc:{start:{line:32,column:45},end:{line:35,column:3}},line:32},3:{name:"(anonymous_3)",decl:{start:{line:36,column:2},end:{line:36,column:3}},loc:{start:{line:36,column:11},end:{line:58,column:3}},line:36},4:{name:"(anonymous_4)",decl:{start:{line:38,column:46},end:{line:38,column:47}},loc:{start:{line:38,column:61},end:{line:56,column:5}},line:38}},branchMap:{0:{loc:{start:{line:9,column:2},end:{line:14,column:3}},type:"if",locations:[{start:{line:9,column:2},end:{line:14,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:9},1:{loc:{start:{line:15,column:2},end:{line:20,column:3}},type:"if",locations:[{start:{line:15,column:2},end:{line:20,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:15},2:{loc:{start:{line:24,column:16},end:{line:24,column:48}},type:"binary-expr",locations:[{start:{line:24,column:16},end:{line:24,column:42}},{start:{line:24,column:46},end:{line:24,column:48}}],line:24},3:{loc:{start:{line:25,column:2},end:{line:29,column:3}},type:"if",locations:[{start:{line:25,column:2},end:{line:29,column:3}},{start:{line:27,column:9},end:{line:29,column:3}}],line:25},4:{loc:{start:{line:40,column:20},end:{line:40,column:48}},type:"binary-expr",locations:[{start:{line:40,column:20},end:{line:40,column:42}},{start:{line:40,column:46},end:{line:40,column:48}}],line:40},5:{loc:{start:{line:41,column:21},end:{line:41,column:50}},type:"binary-expr",locations:[{start:{line:41,column:21},end:{line:41,column:44}},{start:{line:41,column:48},end:{line:41,column:50}}],line:41},6:{loc:{start:{line:42,column:25},end:{line:42,column:82}},type:"cond-expr",locations:[{start:{line:42,column:46},end:{line:42,column:62}},{start:{line:42,column:65},end:{line:42,column:82}}],line:42},7:{loc:{start:{line:43,column:24},end:{line:43,column:63}},type:"cond-expr",locations:[{start:{line:43,column:45},end:{line:43,column:52}},{start:{line:43,column:55},end:{line:43,column:63}}],line:43}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/PropertyGroup.tsx"],names:[],mappings:"AA+Da;AA/Db,OAAO,WAAW;AAElB,OAAO,mBAAmB;AAG1B,MAAM,iBAAiB,CAAC,sBAAsB,gBAAgB,gBAAgB,0BAA0B,YAAY;AAIpH,SAAS,aAAa,MAAW,WAAuC,WAAmB;AACzF,QAAM,YAAY,aAAa,MAAM,WAAW,SAAS;AACzD,QAAM,QAAQ,KAAK,YAAY,MAAM,SAAS;AAC9C,QAAM,YAAY,MAAM,SAAS;AACjC,MAAG,eAAe,QAAQ,SAAS,KAAK,GAAG;AACzC,WAAO;AAAA,MACL,GAAG;AAAA,MACH,QAAQ,KAAK,MAAM,OAAO;AAAA,IAC5B;AAAA,EACF;AACA,MAAG,cAAc,aAAa;AAC5B,WAAO;AAAA,MACL,GAAG;AAAA,MACH,QAAQ,KAAK,MAAM,OAAO;AAAA,IAC5B;AAAA,EACF;AACA,SAAO;AACT;AAEA,SAAS,aAAa,MAAW,WAAuC,WAAmB;AACzF,QAAM,QAAS,KAAK,WAAW,SAAS,KAAK,CAAC;AAC9C,MAAI,aAAa,OAAO;AACtB,WAAO;AAAA,EACT,OAAO;AACL,WAAO;AAAA,EACT;AACF;AAUA,qBAAqB,sBAAsB,MAAM,UAA8B;AAAA,EAC7E,mBAAmB,CAAC,UAAkB,aAAkB;AACtD,UAAM,QAAQ,aAAa,KAAK,MAAM,MAAM,KAAK,MAAM,MAAM,MAAM,QAAQ;AAC3E,SAAK,MAAM,SAAS,OAAO,UAAU,QAAQ;AAAA,EAC/C;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,OAAM,IAAI,KAAK;AACtB,UAAM,SAAS,KAAK,MAAM,YAAY,IAAI,eAAa;AACrD,YAAM,YAAY,aAAa,KAAK,MAAM,MAAM,KAAK,MAAM,MAAM,MAAM,SAAS;AAEhF,YAAM,QAAQ,KAAK,MAAM,MAAM,SAAS,CAAC;AACzC,YAAM,SAAS,KAAK,MAAM,MAAM,UAAU,CAAC;AAC3C,YAAM,aAAa,aAAa,QAC5B,MAAM,SAA+B,IACrC,OAAO,SAAgC;AAC3C,YAAM,YAAY,aAAa,QAAQ,UAAU;AAEjD,aAAO;AAAA,QAAC;AAAA;AAAA,UACN;AAAA,UACA,UAAU,KAAK;AAAA,UAEf;AAAA,UACA,OAAO;AAAA,UACP;AAAA,UACA;AAAA;AAAA,QAJK;AAAA,MAKP;AAAA,IACF,CAAC;AAED,WAAO,oBAAC,SAAI,WAAU,2BACnB,kBACH;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"411d3be261f729b266d6cb26884b34616b925c83"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return po=function(){return a},a}po();const qde=(po().s[0]++,["background-pattern","fill-pattern","line-pattern","fill-extrusion-pattern","icon-image"]);function Yde(n,e,t){po().f[0]++;const r=(po().s[1]++,mG(n,e,t)),i=(po().s[2]++,n[r+"_"+e]),s=(po().s[3]++,i[t]);return po().s[4]++,qde.indexOf(t)>=0?(po().b[0][0]++,po().s[5]++,{...s,values:n.$root.sprite.values}):(po().b[0][1]++,po().s[6]++,t==="text-font"?(po().b[1][0]++,po().s[7]++,{...s,values:n.$root.glyphs.values}):(po().b[1][1]++,po().s[8]++,s))}function mG(n,e,t){po().f[1]++;const r=(po().s[9]++,po().b[2][0]++,n["paint_"+e]||(po().b[2][1]++,{}));return po().s[10]++,t in r?(po().b[3][0]++,po().s[11]++,"paint"):(po().b[3][1]++,po().s[12]++,"layout")}class $de extends nr.Component{constructor(){super(...arguments);Pn(this,"onPropertyChange",(po().s[13]++,(t,r)=>{po().f[2]++;const i=(po().s[14]++,mG(this.props.spec,this.props.layer.type,t));po().s[15]++,this.props.onChange(i,t,r)}))}render(){po().f[3]++;const{errors:t}=(po().s[16]++,this.props),r=(po().s[17]++,this.props.groupFields.map(i=>{po().f[4]++;const s=(po().s[18]++,Yde(this.props.spec,this.props.layer.type,i)),a=(po().s[19]++,po().b[4][0]++,this.props.layer.paint||(po().b[4][1]++,{})),o=(po().s[20]++,po().b[5][0]++,this.props.layer.layout||(po().b[5][1]++,{})),d=(po().s[21]++,i in a?(po().b[6][0]++,a[i]):(po().b[6][1]++,o[i])),g=(po().s[22]++,i in a?(po().b[7][0]++,"paint"):(po().b[7][1]++,"layout"));return po().s[23]++,ue.jsx(Qde,{errors:t,onChange:this.onPropertyChange,fieldName:i,value:d,fieldType:g,fieldSpec:s},i)}));return po().s[24]++,ue.jsx("div",{className:"maputnik-property-group",children:r})}}var CE,UR;function Vde(){return UR||(UR=1,CE=function(n){var e={};function t(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return n[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}return t.m=n,t.c=e,t.d=function(r,i,s){t.o(r,i)||Object.defineProperty(r,i,{enumerable:!0,get:s})},t.r=function(r){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},t.t=function(r,i){if(1&i&&(r=t(r)),8&i||4&i&&typeof r=="object"&&r&&r.__esModule)return r;var s=Object.create(null);if(t.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:r}),2&i&&typeof r!="string")for(var a in r)t.d(s,a,(function(o){return r[o]}).bind(null,a));return s},t.n=function(r){var i=r&&r.__esModule?function(){return r.default}:function(){return r};return t.d(i,"a",i),i},t.o=function(r,i){return Object.prototype.hasOwnProperty.call(r,i)},t.p="",t(t.s=2)}([function(n,e){n.exports=xp()},function(n,e){n.exports=za()},function(n,e,t){t.r(e);var r=t(1),i=t(0),s=function(){return(s=Object.assign||function(P){for(var z,j=1,q=arguments.length;j<q;j++)for(var Y in z=arguments[j])Object.prototype.hasOwnProperty.call(z,Y)&&(P[Y]=z[Y]);return P}).apply(this,arguments)},a=function(P,z){var j={};for(var q in P)Object.prototype.hasOwnProperty.call(P,q)&&z.indexOf(q)<0&&(j[q]=P[q]);if(P!=null&&typeof Object.getOwnPropertySymbols=="function"){var Y=0;for(q=Object.getOwnPropertySymbols(P);Y<q.length;Y++)z.indexOf(q[Y])<0&&Object.prototype.propertyIsEnumerable.call(P,q[Y])&&(j[q[Y]]=P[q[Y]])}return j},o=0,d=r.forwardRef(function(P,z){var j=P.title,q=j===void 0?null:j,Y=P.description,ie=Y===void 0?null:Y,te=P.size,V=te===void 0?null:te,ne=P.color,G=ne===void 0?"currentColor":ne,oe=P.horizontal,he=oe===void 0?null:oe,pe=P.vertical,Ee=pe===void 0?null:pe,me=P.rotate,Se=me===void 0?null:me,De=P.spin,be=De===void 0?null:De,at=P.style,Ze=at===void 0?{}:at,Je=P.children,We=a(P,["title","description","size","color","horizontal","vertical","rotate","spin","style","children"]);o++;var Me,Fe=be!==null&&be,He=r.Children.map(Je,function(Lt){var Kt=Lt;Fe!==!0&&(Fe=(be===null?Kt.props.spin:be)===!0);var Ue=Kt.props.size;typeof V=="number"&&typeof Kt.props.size=="number"&&(Ue=Kt.props.size/V);var Pe={size:Ue,color:G===null?Kt.props.color:G,horizontal:he===null?Kt.props.horizontal:he,vertical:Ee===null?Kt.props.vertical:Ee,rotate:Se===null?Kt.props.rotate:Se,spin:be===null?Kt.props.spin:be,inStack:!0};return r.cloneElement(Kt,Pe)});V!==null&&(Ze.width=typeof V=="string"?V:1.5*V+"rem");var bt,Yt="stack_labelledby_"+o,gt="stack_describedby_"+o;if(q)Me=ie?Yt+" "+gt:Yt;else if(bt="presentation",ie)throw new Error("title attribute required when description is set");return r.createElement("svg",s({ref:z,viewBox:"0 0 24 24",style:Ze,role:bt,"aria-labelledby":Me},We),q&&r.createElement("title",{id:Yt},q),ie&&r.createElement("desc",{id:gt},ie),Fe&&r.createElement("style",null,"@keyframes spin { from { transform: rotate(0deg) } to { transform: rotate(360deg) } }","@keyframes spin-inverse { from { transform: rotate(0deg) } to { transform: rotate(-360deg) } }"),He)});d.displayName="Stack",d.propTypes={size:i.oneOfType([i.number,i.string]),color:i.string,horizontal:i.bool,vertical:i.bool,rotate:i.number,spin:i.oneOfType([i.bool,i.number]),children:i.oneOfType([i.arrayOf(i.node),i.node]).isRequired,className:i.string,style:i.object},d.defaultProps={size:null,color:null,horizontal:null,vertical:null,rotate:null,spin:null};var g=d;t.d(e,"Icon",function(){return I}),t.d(e,"Stack",function(){return g});var b=function(){return(b=Object.assign||function(P){for(var z,j=1,q=arguments.length;j<q;j++)for(var Y in z=arguments[j])Object.prototype.hasOwnProperty.call(z,Y)&&(P[Y]=z[Y]);return P}).apply(this,arguments)},E=function(P,z){var j={};for(var q in P)Object.prototype.hasOwnProperty.call(P,q)&&z.indexOf(q)<0&&(j[q]=P[q]);if(P!=null&&typeof Object.getOwnPropertySymbols=="function"){var Y=0;for(q=Object.getOwnPropertySymbols(P);Y<q.length;Y++)z.indexOf(q[Y])<0&&Object.prototype.propertyIsEnumerable.call(P,q[Y])&&(j[q[Y]]=P[q[Y]])}return j},S=0,I=r.forwardRef(function(P,z){var j=P.path,q=P.id,Y=q===void 0?++S:q,ie=P.title,te=ie===void 0?null:ie,V=P.description,ne=V===void 0?null:V,G=P.size,oe=G===void 0?null:G,he=P.color,pe=he===void 0?"currentColor":he,Ee=P.horizontal,me=Ee!==void 0&&Ee,Se=P.vertical,De=Se!==void 0&&Se,be=P.rotate,at=be===void 0?0:be,Ze=P.spin,Je=Ze!==void 0&&Ze,We=P.style,Me=We===void 0?{}:We,Fe=P.inStack,He=Fe!==void 0&&Fe,bt=E(P,["path","id","title","description","size","color","horizontal","vertical","rotate","spin","style","inStack"]),Yt={},gt=[];oe!==null&&(He?gt.push("scale("+oe+")"):(Me.width=typeof oe=="string"?oe:1.5*oe+"rem",Me.height=Me.width)),me&&gt.push("scaleX(-1)"),De&&gt.push("scaleY(-1)"),at!==0&&gt.push("rotate("+at+"deg)"),pe!==null&&(Yt.fill=pe);var Lt=r.createElement("path",b({d:j,style:Yt},He?bt:{})),Kt=Lt;gt.length>0&&(Me.transform=gt.join(" "),Me.transformOrigin="center",He&&(Kt=r.createElement("g",{style:Me},Lt,r.createElement("rect",{width:"24",height:"24",fill:"transparent"}))));var Ue,Pe=Kt,Be=Je===!0||typeof Je!="number"?2:Je,it=!He&&(me||De);if(Be<0&&(it=!it),Je&&(Pe=r.createElement("g",{style:{animation:"spin"+(it?"-inverse":"")+" linear "+Math.abs(Be)+"s infinite",transformOrigin:"center"}},Kt,!(me||De||at!==0)&&r.createElement("rect",{width:"24",height:"24",fill:"transparent"}))),He)return Pe;var _t,ft="icon_labelledby_"+Y,Ut="icon_describedby_"+Y;if(te)Ue=ne?ft+" "+Ut:ft;else if(_t="presentation",ne)throw new Error("title attribute required when description is set");return r.createElement("svg",b({ref:z,viewBox:"0 0 24 24",style:Me,role:_t,"aria-labelledby":Ue},bt),te&&r.createElement("title",{id:ft},te),ne&&r.createElement("desc",{id:Ut},ne),!He&&Je&&(it?r.createElement("style",null,"@keyframes spin-inverse { from { transform: rotate(0deg) } to { transform: rotate(-360deg) } }"):r.createElement("style",null,"@keyframes spin { from { transform: rotate(0deg) } to { transform: rotate(360deg) } }")),Pe)});I.displayName="Icon",I.propTypes={path:i.string.isRequired,size:i.oneOfType([i.number,i.string]),color:i.string,horizontal:i.bool,vertical:i.bool,rotate:i.number,spin:i.oneOfType([i.bool,i.number]),style:i.object,inStack:i.bool,className:i.string},I.defaultProps={size:null,color:"currentColor",horizontal:!1,vertical:!1,rotate:0,spin:!1},e.default=I}])),CE}var Hde=Vde();const zR=el(Hde);function hy(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerEditorGroup.tsx",e="2f1dde9b3c8e927b8e8868bcb310eb3d6a65eb08",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/LayerEditorGroup.tsx",statementMap:{0:{start:{line:16,column:4},end:{line:45,column:9}},1:{start:{line:22,column:27},end:{line:22,column:74}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:11},end:{line:46,column:3}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:22,column:19},end:{line:22,column:20}},loc:{start:{line:22,column:27},end:{line:22,column:74}},line:22}},branchMap:{},s:{0:0,1:0},f:{0:0,1:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerEditorGroup.tsx"],names:[],mappings:"AA+BQ,SACE,KADF;AA/BR,OAAO,WAAW;AAClB,OAAO,UAAU;AACjB;AAAA,EACE;AAAA,EACA;AAAA,OACK;AACP;AAAA,EACE;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,OACK;AAaP,qBAAqB,yBAAyB,MAAM,UAAiC;AAAA,EACnF,SAAS;AACP,WAAO,qBAAC,iBAAc,MAAM,KAAK,MAAM,IACrC;AAAA;AAAA,QAAC;AAAA;AAAA,UAAqB,WAAU;AAAA,UAC9B,eAAa,wBAAsB,KAAK,MAAM,aAAa;AAAA,UAC3D,SAAS,QAAM,KAAK,MAAM,eAAe,CAAC,KAAK,MAAM,QAAQ;AAAA,UAE7D,+BAAC,uBAAoB,WAAU,uCAC7B;AAAA,gCAAC,UAAK,OAAO,EAAC,UAAU,EAAC,GAAI,eAAK,MAAM,OAAM;AAAA,YAC9C;AAAA,cAAC;AAAA;AAAA,gBACC,MAAM;AAAA,gBACN,MAAM;AAAA,gBACN,WAAU;AAAA;AAAA,YACZ;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,MAAM;AAAA,gBACN,MAAM;AAAA,gBACN,WAAU;AAAA;AAAA,YACZ;AAAA,aACF;AAAA;AAAA,MACF;AAAA,MACA,oBAAC,sBACE,eAAK,MAAM,UACd;AAAA,OACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2f1dde9b3c8e927b8e8868bcb310eb3d6a65eb08"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return hy=function(){return a},a}hy();class Zde extends nr.Component{render(){return hy().f[0]++,hy().s[0]++,ue.jsxs(fW,{uuid:this.props.id,children:[ue.jsx(gW,{className:"maputnik-layer-editor-group","data-wd-key":"layer-editor-group:"+this.props["data-wd-key"],onClick:e=>(hy().f[1]++,hy().s[1]++,this.props.onActiveToggle(!this.props.isActive)),children:ue.jsxs(mue,{className:"maputnik-layer-editor-group__button",children:[ue.jsx("span",{style:{flexGrow:1},children:this.props.title}),ue.jsx(zR,{path:Rue,size:1,className:"maputnik-layer-editor-group__button__icon maputnik-layer-editor-group__button__icon--up"}),ue.jsx(zR,{path:Due,size:1,className:"maputnik-layer-editor-group__button__icon maputnik-layer-editor-group__button__icon--down"})]})}),ue.jsx(Cue,{children:this.props.children})]})}}function Oy(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldMinZoom.tsx",e="32f7af2e1a9dc4f673c1fba818006229f9fd6490",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldMinZoom.tsx",statementMap:{0:{start:{line:9,column:14},end:{line:9,column:26}},1:{start:{line:10,column:4},end:{line:30,column:6}},2:{start:{line:33,column:21},end:{line:33,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:11},end:{line:31,column:3}},line:8}},branchMap:{},s:{0:0,1:0,2:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldMinZoom.tsx"],names:[],mappings:"AAoBM;AApBN,OAAO,WAAW;AAElB,OAAO,YAAY;AACnB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,SAA0B,uBAAuB;AAQjD,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QAAM,OAAO,EAAE,UAAU;AAAA,QAAG,WAAW,OAAO,MAAM;AAAA,QAC1D,OAAO,KAAK,MAAM;AAAA,QAClB,eAAY;AAAA,QAEZ;AAAA,UAAC;AAAA;AAAA,YACC,YAAY;AAAA,YACZ,OAAO,KAAK,MAAM;AAAA,YAClB,UAAU,KAAK,MAAM;AAAA,YACrB,KAAK,OAAO,MAAM,QAAQ;AAAA,YAC1B,KAAK,OAAO,MAAM,QAAQ;AAAA,YAC1B,SAAS,OAAO,MAAM,QAAQ;AAAA,YAC9B,eAAY;AAAA;AAAA,QACd;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"32f7af2e1a9dc4f673c1fba818006229f9fd6490"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Oy=function(){return a},a}Oy();class Xde extends nr.Component{render(){Oy().f[0]++;const e=(Oy().s[0]++,this.props.t);return Oy().s[1]++,ue.jsx(fa,{label:e("Min Zoom"),fieldSpec:ts.layer.minzoom,error:this.props.error,"data-wd-key":"min-zoom",children:ue.jsx(um,{allowRange:!0,value:this.props.value,onChange:this.props.onChange,min:ts.layer.minzoom.minimum,max:ts.layer.minzoom.maximum,default:ts.layer.minzoom.minimum,"data-wd-key":"min-zoom.input"})})}}const Jde=(Oy().s[2]++,Ns()(Xde));function Iy(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldMaxZoom.tsx",e="f706dc673f9397f2919007f4b702470461bf0f7c",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldMaxZoom.tsx",statementMap:{0:{start:{line:9,column:14},end:{line:9,column:26}},1:{start:{line:10,column:4},end:{line:30,column:6}},2:{start:{line:33,column:21},end:{line:33,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:11},end:{line:31,column:3}},line:8}},branchMap:{},s:{0:0,1:0,2:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldMaxZoom.tsx"],names:[],mappings:"AAoBM;AApBN,OAAO,WAAW;AAElB,OAAO,YAAY;AACnB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,SAA0B,uBAAuB;AAQjD,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QAAM,OAAO,EAAE,UAAU;AAAA,QAAG,WAAW,OAAO,MAAM;AAAA,QAC1D,OAAO,KAAK,MAAM;AAAA,QAClB,eAAY;AAAA,QAEZ;AAAA,UAAC;AAAA;AAAA,YACC,YAAY;AAAA,YACZ,OAAO,KAAK,MAAM;AAAA,YAClB,UAAU,KAAK,MAAM;AAAA,YACrB,KAAK,OAAO,MAAM,QAAQ;AAAA,YAC1B,KAAK,OAAO,MAAM,QAAQ;AAAA,YAC1B,SAAS,OAAO,MAAM,QAAQ;AAAA,YAC9B,eAAY;AAAA;AAAA,QACd;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f706dc673f9397f2919007f4b702470461bf0f7c"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Iy=function(){return a},a}Iy();class ehe extends nr.Component{render(){Iy().f[0]++;const e=(Iy().s[0]++,this.props.t);return Iy().s[1]++,ue.jsx(fa,{label:e("Max Zoom"),fieldSpec:ts.layer.maxzoom,error:this.props.error,"data-wd-key":"max-zoom",children:ue.jsx(um,{allowRange:!0,value:this.props.value,onChange:this.props.onChange,min:ts.layer.maxzoom.minimum,max:ts.layer.maxzoom.maximum,default:ts.layer.maxzoom.maximum,"data-wd-key":"max-zoom.input"})})}}const the=(Iy().s[2]++,Ns()(ehe));function Ig(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldComment.tsx",e="875d9bef6002e38aa0b5bf03af99ab4fc2308047",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldComment.tsx",statementMap:{0:{start:{line:8,column:14},end:{line:8,column:26}},1:{start:{line:9,column:22},end:{line:11,column:5}},2:{start:{line:12,column:4},end:{line:30,column:6}},3:{start:{line:33,column:21},end:{line:33,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:11},end:{line:31,column:3}},line:7}},branchMap:{},s:{0:0,1:0,2:0,3:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldComment.tsx"],names:[],mappings:"AAyBM;AAzBN,OAAO,WAAW;AAElB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,SAA0B,uBAAuB;AAQjD,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,YAAY;AAAA,MAChB,KAAK,EAAE,2EAA2E;AAAA,IACpF;AAEA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,OAAO,EAAE,UAAU;AAAA,QACnB;AAAA,QACA,eAAY;AAAA,QACZ,OAAO,KAAK,MAAM;AAAA,QAElB;AAAA,UAAC;AAAA;AAAA,YACC,OAAO;AAAA,YACP,OAAO,KAAK,MAAM;AAAA,YAClB,UAAU,KAAK,MAAM;AAAA,YACrB,SAAS,EAAE,YAAY;AAAA,YACvB,eAAY;AAAA;AAAA,QACd;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"875d9bef6002e38aa0b5bf03af99ab4fc2308047"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Ig=function(){return a},a}Ig();class nhe extends nr.Component{render(){Ig().f[0]++;const e=(Ig().s[0]++,this.props.t),t=(Ig().s[1]++,{doc:e("Comments for the current layer. This is non-standard and not in the spec.")});return Ig().s[2]++,ue.jsx(fa,{label:e("Comments"),fieldSpec:t,"data-wd-key":"layer-comment",error:this.props.error,children:ue.jsx(Qf,{multi:!0,value:this.props.value,onChange:this.props.onChange,default:e("Comment..."),"data-wd-key":"layer-comment.input"})})}}const rhe=(Ig().s[3]++,Ns()(nhe)),ihe={groups:[{title:"Paint properties",type:"properties",fields:["line-opacity","line-color","line-width","line-offset","line-blur","line-dasharray","line-pattern","line-translate","line-translate-anchor","line-gap-width"]},{title:"Layout properties",type:"properties",fields:["line-cap","line-join","line-miter-limit","line-round-limit"]}]},ohe={groups:[{title:"Paint properties",type:"properties",fields:["background-color","background-pattern","background-opacity"]}]},she={groups:[{title:"Paint properties",type:"properties",fields:["fill-opacity","fill-color","fill-antialias","fill-outline-color","fill-pattern","fill-translate","fill-translate-anchor"]}]},ahe={groups:[{title:"Paint properties",type:"properties",fields:["circle-color","circle-opacity","circle-stroke-color","circle-stroke-opacity","circle-blur","circle-radius","circle-stroke-width","circle-pitch-scale","circle-translate","circle-translate-anchor","circle-pitch-alignment"]}]},lhe={groups:[{title:"General layout properties",type:"properties",fields:["symbol-placement","symbol-spacing","symbol-avoid-edges","symbol-z-order"]},{title:"Text layout properties",type:"properties",fields:["text-field","text-font","text-size","text-line-height","text-padding","text-allow-overlap","text-ignore-placement","text-pitch-alignment","text-rotation-alignment","text-max-width","text-letter-spacing","text-justify","text-anchor","text-max-angle","text-writing-mode","text-rotate","text-keep-upright","text-transform","text-offset","text-optional","text-variable-anchor","text-radial-offset"]},{title:"Icon layout properties",type:"properties",fields:["icon-image","icon-allow-overlap","icon-ignore-placement","icon-optional","icon-rotation-alignment","icon-size","icon-text-fit","icon-text-fit-padding","icon-rotate","icon-padding","icon-keep-upright","icon-offset","icon-anchor","icon-pitch-alignment"]},{title:"Text paint properties",type:"properties",fields:["text-color","text-opacity","text-halo-color","text-halo-width","text-halo-blur","text-translate","text-translate-anchor"]},{title:"Icon paint properties",type:"properties",fields:["icon-color","icon-opacity","icon-halo-color","icon-halo-width","icon-halo-blur","icon-translate","icon-translate-anchor"]}]},uhe={groups:[{title:"Paint properties",type:"properties",fields:["raster-opacity","raster-hue-rotate","raster-brightness-min","raster-brightness-max","raster-saturation","raster-contrast","raster-fade-duration","raster-resampling"]}]},Ahe={groups:[{title:"Paint properties",type:"properties",fields:["hillshade-illumination-direction","hillshade-illumination-anchor","hillshade-exaggeration","hillshade-shadow-color","hillshade-highlight-color","hillshade-accent-color"]}]},che={groups:[{title:"Paint properties",type:"properties",fields:["heatmap-radius","heatmap-weight","heatmap-intensity","heatmap-opacity"]}]},dhe={groups:[]},Rb={line:ihe,background:ohe,fill:she,"fill-extrusion":{groups:[{title:"Paint properties",type:"properties",fields:["fill-extrusion-opacity","fill-extrusion-color","fill-extrusion-translate","fill-extrusion-translate-anchor","fill-extrusion-pattern","fill-extrusion-height","fill-extrusion-base","fill-extrusion-vertical-gradient"]}]},circle:ahe,symbol:lhe,raster:uhe,hillshade:Ahe,heatmap:che,invalid:dhe};function fy(){var n="/home/runner/work/maputnik/maputnik/src/libs/format.ts",e="c45fbfac66e994b59070a295e5a7f219cd5d66ac",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/format.ts",statementMap:{0:{start:{line:2,column:2},end:{line:2,column:50}}},fnMap:{0:{name:"formatLayerId",decl:{start:{line:1,column:16},end:{line:1,column:29}},loc:{start:{line:1,column:34},end:{line:3,column:1}},line:1}},branchMap:{0:{loc:{start:{line:2,column:9},end:{line:2,column:49}},type:"cond-expr",locations:[{start:{line:2,column:21},end:{line:2,column:37}},{start:{line:2,column:40},end:{line:2,column:49}}],line:2}},s:{0:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/format.ts"],names:[],mappings:"AAAO,gBAAS,cAAe,IAAwB;AACrD,SAAO,OAAO,KAAK,mBAAmB,IAAI,EAAE;AAC9C;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"c45fbfac66e994b59070a295e5a7f219cd5d66ac"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return fy=function(){return a},a}fy();function gG(n){return fy().f[0]++,fy().s[0]++,n===""?(fy().b[0][0]++,"[empty_string]"):(fy().b[0][1]++,`'${n}'`)}function Kn(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerEditor.tsx",e="555ef41c8141fe537bdb43523a4ef7ec4c287394",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/LayerEditor.tsx",statementMap:{0:{start:{line:23,column:2},end:{line:32,column:21}},1:{start:{line:26,column:6},end:{line:30,column:8}},2:{start:{line:35,column:21},end:{line:39,column:3}},3:{start:{line:40,column:22},end:{line:44,column:3}},4:{start:{line:45,column:22},end:{line:49,column:3}},5:{start:{line:50,column:2},end:{line:50,column:103}},6:{start:{line:53,column:24},end:{line:60,column:3}},7:{start:{line:61,column:29},end:{line:63,column:3}},8:{start:{line:65,column:4},end:{line:65,column:17}},9:{start:{line:66,column:25},end:{line:66,column:27}},10:{start:{line:67,column:4},end:{line:69,column:7}},11:{start:{line:68,column:6},end:{line:68,column:39}},12:{start:{line:70,column:4},end:{line:70,column:34}},13:{start:{line:73,column:29},end:{line:73,column:54}},14:{start:{line:74,column:4},end:{line:78,column:7}},15:{start:{line:75,column:6},end:{line:77,column:7}},16:{start:{line:76,column:8},end:{line:76,column:45}},17:{start:{line:79,column:4},end:{line:81,column:6}},18:{start:{line:84,column:4},end:{line:89,column:6}},19:{start:{line:92,column:4},end:{line:95,column:6}},20:{start:{line:98,column:32},end:{line:101,column:5}},21:{start:{line:102,column:4},end:{line:104,column:7}},22:{start:{line:107,column:18},end:{line:107,column:20}},23:{start:{line:108,column:4},end:{line:110,column:5}},24:{start:{line:109,column:6},end:{line:109,column:62}},25:{start:{line:111,column:35},end:{line:111,column:45}},26:{start:{line:112,column:22},end:{line:112,column:24}},27:{start:{line:113,column:4},end:{line:119,column:7}},28:{start:{line:114,column:6},end:{line:118,column:7}},29:{start:{line:115,column:8},end:{line:117,column:10}},30:{start:{line:121,column:18},end:{line:121,column:34}},31:{start:{line:122,column:4},end:{line:124,column:5}},32:{start:{line:123,column:6},end:{line:123,column:63}},33:{start:{line:125,column:4},end:{line:228,column:5}},34:{start:{line:127,column:8},end:{line:191,column:13}},35:{start:{line:134,column:35},end:{line:134,column:112}},36:{start:{line:143,column:37},end:{line:146,column:15}},37:{start:{line:155,column:31},end:{line:155,column:69}},38:{start:{line:164,column:31},end:{line:164,column:75}},39:{start:{line:172,column:31},end:{line:172,column:70}},40:{start:{line:180,column:31},end:{line:180,column:70}},41:{start:{line:188,column:31},end:{line:188,column:104}},42:{start:{line:193,column:8},end:{line:201,column:16}},43:{start:{line:199,column:29},end:{line:199,column:67}},44:{start:{line:203,column:8},end:{line:212,column:10}},45:{start:{line:214,column:8},end:{line:225,column:10}},46:{start:{line:219,column:14},end:{line:222,column:16}},47:{start:{line:227,column:8},end:{line:227,column:49}},48:{start:{line:231,column:4},end:{line:234,column:7}},49:{start:{line:237,column:14},end:{line:237,column:26}},50:{start:{line:238,column:21},end:{line:238,column:23}},51:{start:{line:239,column:22},end:{line:239,column:43}},52:{start:{line:240,column:19},end:{line:257,column:6}},53:{start:{line:241,column:6},end:{line:241,column:70}},54:{start:{line:243,column:22},end:{line:243,column:30}},55:{start:{line:244,column:6},end:{line:244,column:29}},56:{start:{line:245,column:6},end:{line:256,column:8}},57:{start:{line:258,column:20},end:{line:258,column:49}},58:{start:{line:259,column:18},end:{line:284,column:5}},59:{start:{line:262,column:23},end:{line:262,column:71}},60:{start:{line:266,column:23},end:{line:266,column:68}},61:{start:{line:270,column:23},end:{line:270,column:80}},62:{start:{line:276,column:23},end:{line:276,column:41}},63:{start:{line:282,column:23},end:{line:282,column:40}},64:{start:{line:286,column:6},end:{line:286,column:30}},65:{start:{line:287,column:6},end:{line:287,column:26}},66:{start:{line:289,column:4},end:{line:334,column:6}},67:{start:{line:316,column:33},end:{line:316,column:42}},68:{start:{line:317,column:20},end:{line:317,column:174}},69:{start:{line:337,column:20},end:{line:337,column:58}}},fnMap:{0:{name:"getLayoutForType",decl:{start:{line:22,column:9},end:{line:22,column:25}},loc:{start:{line:22,column:35},end:{line:33,column:1}},line:22},1:{name:"(anonymous_1)",decl:{start:{line:25,column:36},end:{line:25,column:37}},loc:{start:{line:25,column:47},end:{line:31,column:5}},line:25},2:{name:"layoutGroups",decl:{start:{line:34,column:9},end:{line:34,column:21}},loc:{start:{line:34,column:36},end:{line:51,column:1}},line:34},3:{name:"(anonymous_3)",decl:{start:{line:54,column:20},end:{line:54,column:21}},loc:{start:{line:54,column:26},end:{line:55,column:5}},line:54},4:{name:"(anonymous_4)",decl:{start:{line:56,column:21},end:{line:56,column:22}},loc:{start:{line:56,column:27},end:{line:57,column:5}},line:56},5:{name:"(anonymous_5)",decl:{start:{line:58,column:22},end:{line:58,column:23}},loc:{start:{line:58,column:28},end:{line:59,column:5}},line:58},6:{name:"(anonymous_6)",decl:{start:{line:64,column:2},end:{line:64,column:3}},loc:{start:{line:64,column:21},end:{line:71,column:3}},line:64},7:{name:"(anonymous_7)",decl:{start:{line:67,column:57},end:{line:67,column:58}},loc:{start:{line:67,column:68},end:{line:69,column:5}},line:67},8:{name:"(anonymous_8)",decl:{start:{line:72,column:2},end:{line:72,column:3}},loc:{start:{line:72,column:48},end:{line:82,column:3}},line:72},9:{name:"(anonymous_9)",decl:{start:{line:74,column:63},end:{line:74,column:64}},loc:{start:{line:74,column:74},end:{line:78,column:5}},line:74},10:{name:"(anonymous_10)",decl:{start:{line:83,column:2},end:{line:83,column:3}},loc:{start:{line:83,column:20},end:{line:90,column:3}},line:83},11:{name:"(anonymous_11)",decl:{start:{line:91,column:2},end:{line:91,column:3}},loc:{start:{line:91,column:44},end:{line:96,column:3}},line:91},12:{name:"(anonymous_12)",decl:{start:{line:97,column:2},end:{line:97,column:3}},loc:{start:{line:97,column:36},end:{line:105,column:3}},line:97},13:{name:"(anonymous_13)",decl:{start:{line:106,column:2},end:{line:106,column:3}},loc:{start:{line:106,column:32},end:{line:229,column:3}},line:106},14:{name:"(anonymous_14)",decl:{start:{line:113,column:19},end:{line:113,column:20}},loc:{start:{line:113,column:30},end:{line:119,column:5}},line:113},15:{name:"(anonymous_15)",decl:{start:{line:134,column:24},end:{line:134,column:25}},loc:{start:{line:134,column:35},end:{line:134,column:112}},line:134},16:{name:"(anonymous_16)",decl:{start:{line:143,column:24},end:{line:143,column:25}},loc:{start:{line:143,column:37},end:{line:146,column:15}},line:143},17:{name:"(anonymous_17)",decl:{start:{line:155,column:24},end:{line:155,column:25}},loc:{start:{line:155,column:31},end:{line:155,column:69}},line:155},18:{name:"(anonymous_18)",decl:{start:{line:164,column:24},end:{line:164,column:25}},loc:{start:{line:164,column:31},end:{line:164,column:75}},line:164},19:{name:"(anonymous_19)",decl:{start:{line:172,column:24},end:{line:172,column:25}},loc:{start:{line:172,column:31},end:{line:172,column:70}},line:172},20:{name:"(anonymous_20)",decl:{start:{line:180,column:24},end:{line:180,column:25}},loc:{start:{line:180,column:31},end:{line:180,column:70}},line:180},21:{name:"(anonymous_21)",decl:{start:{line:188,column:24},end:{line:188,column:25}},loc:{start:{line:188,column:31},end:{line:188,column:104}},line:188},22:{name:"(anonymous_22)",decl:{start:{line:199,column:22},end:{line:199,column:23}},loc:{start:{line:199,column:29},end:{line:199,column:67}},line:199},23:{name:"(anonymous_23)",decl:{start:{line:218,column:22},end:{line:218,column:23}},loc:{start:{line:218,column:34},end:{line:223,column:13}},line:218},24:{name:"(anonymous_24)",decl:{start:{line:230,column:2},end:{line:230,column:3}},loc:{start:{line:230,column:20},end:{line:235,column:3}},line:230},25:{name:"(anonymous_25)",decl:{start:{line:236,column:2},end:{line:236,column:3}},loc:{start:{line:236,column:11},end:{line:335,column:3}},line:236},26:{name:"(anonymous_26)",decl:{start:{line:240,column:53},end:{line:240,column:54}},loc:{start:{line:240,column:64},end:{line:242,column:5}},line:240},27:{name:"(anonymous_27)",decl:{start:{line:242,column:11},end:{line:242,column:12}},loc:{start:{line:242,column:22},end:{line:257,column:5}},line:242},28:{name:"(anonymous_28)",decl:{start:{line:262,column:17},end:{line:262,column:18}},loc:{start:{line:262,column:23},end:{line:262,column:71}},line:262},29:{name:"(anonymous_29)",decl:{start:{line:266,column:17},end:{line:266,column:18}},loc:{start:{line:266,column:23},end:{line:266,column:68}},line:266},30:{name:"(anonymous_30)",decl:{start:{line:270,column:17},end:{line:270,column:18}},loc:{start:{line:270,column:23},end:{line:270,column:80}},line:270},31:{name:"(anonymous_31)",decl:{start:{line:276,column:17},end:{line:276,column:18}},loc:{start:{line:276,column:23},end:{line:276,column:41}},line:276},32:{name:"(anonymous_32)",decl:{start:{line:282,column:17},end:{line:282,column:18}},loc:{start:{line:282,column:23},end:{line:282,column:40}},line:282},33:{name:"handleSelection",decl:{start:{line:285,column:13},end:{line:285,column:28}},loc:{start:{line:285,column:40},end:{line:288,column:5}},line:285},34:{name:"(anonymous_34)",decl:{start:{line:315,column:147},end:{line:315,column:148}},loc:{start:{line:315,column:155},end:{line:318,column:19}},line:315}},branchMap:{0:{loc:{start:{line:23,column:9},end:{line:32,column:20}},type:"cond-expr",locations:[{start:{line:23,column:24},end:{line:32,column:3}},{start:{line:32,column:6},end:{line:32,column:20}}],line:23},1:{loc:{start:{line:75,column:6},end:{line:77,column:7}},type:"if",locations:[{start:{line:75,column:6},end:{line:77,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:75},2:{loc:{start:{line:108,column:4},end:{line:110,column:5}},type:"if",locations:[{start:{line:108,column:4},end:{line:110,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:108},3:{loc:{start:{line:114,column:6},end:{line:118,column:7}},type:"if",locations:[{start:{line:114,column:6},end:{line:118,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:114},4:{loc:{start:{line:114,column:10},end:{line:114,column:96}},type:"binary-expr",locations:[{start:{line:114,column:10},end:{line:114,column:22}},{start:{line:114,column:26},end:{line:114,column:55}},{start:{line:114,column:59},end:{line:114,column:96}}],line:114},5:{loc:{start:{line:122,column:4},end:{line:124,column:5}},type:"if",locations:[{start:{line:122,column:4},end:{line:124,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:122},6:{loc:{start:{line:125,column:4},end:{line:228,column:5}},type:"switch",locations:[{start:{line:126,column:6},end:{line:191,column:13}},{start:{line:192,column:6},end:{line:201,column:16}},{start:{line:202,column:6},end:{line:212,column:10}},{start:{line:213,column:6},end:{line:225,column:10}},{start:{line:226,column:6},end:{line:227,column:49}}],line:125},7:{loc:{start:{line:149,column:10},end:{line:157,column:11}},type:"binary-expr",locations:[{start:{line:149,column:10},end:{line:149,column:48}},{start:{line:149,column:68},end:{line:157,column:11}}],line:149},8:{loc:{start:{line:158,column:10},end:{line:166,column:11}},type:"binary-expr",locations:[{start:{line:158,column:10},end:{line:158,column:93}},{start:{line:158,column:113},end:{line:166,column:11}}],line:158},9:{loc:{start:{line:188,column:83},end:{line:188,column:103}},type:"cond-expr",locations:[{start:{line:188,column:93},end:{line:188,column:99}},{start:{line:188,column:102},end:{line:188,column:103}}],line:188},10:{loc:{start:{line:241,column:15},end:{line:241,column:68}},type:"binary-expr",locations:[{start:{line:241,column:15},end:{line:241,column:41}},{start:{line:241,column:45},end:{line:241,column:68}}],line:241},11:{loc:{start:{line:258,column:20},end:{line:258,column:49}},type:"binary-expr",locations:[{start:{line:258,column:20},end:{line:258,column:43}},{start:{line:258,column:47},end:{line:258,column:49}}],line:258},12:{loc:{start:{line:269,column:14},end:{line:269,column:67}},type:"cond-expr",locations:[{start:{line:269,column:46},end:{line:269,column:55}},{start:{line:269,column:58},end:{line:269,column:67}}],line:269}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0],5:[0,0],6:[0,0,0,0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerEditor.tsx"],names:["layer","layout"],mappings:"AA2KyB,SA2EL,UA1Ed,KADmB;AA3KzB,OAAO,WAAuB;AAC9B,OAAO,eAAe;AACtB,SAAS,SAAS,QAAQ,MAAM,gBAAgB;AAChD,SAAQ,iBAAgB;AACxB,SAAQ,kBAAiB;AAGzB,OAAO,eAAe;AACtB,OAAO,kBAAkB;AACzB,OAAO,mBAAmB;AAC1B,OAAO,sBAAsB;AAC7B,OAAO,eAAe;AACtB,OAAO,aAAa;AACpB,OAAO,kBAAkB;AACzB,OAAO,kBAAkB;AACzB,OAAO,kBAAkB;AACzB,OAAO,iBAAiB;AACxB,OAAO,sBAAsB;AAC7B,SAAS,YAAY,sBAAsB;AAC3C,OAAO,YAAY;AACnB,SAAQ,qBAAoB;AAC5B,SAA0B,uBAAuB;AAIjD,SAAS,iBAAiB,MAAkC,GAAc;AACxE,SAAO,OAAO,IAAI,IAAI;AAAA,IACpB,GAAG,OAAO,IAAI;AAAA,IACd,QAAQ,OAAO,IAAI,EAAE,OAAO,IAAI,WAAS;AACvC,aAAO;AAAA,QACL,GAAG;AAAA,QACH,IAAI,MAAM,MAAM,QAAQ,MAAM,GAAG;AAAA,QACjC,OAAO,EAAE,MAAM,KAAK;AAAA,MACtB;AAAA,IACF,CAAC;AAAA,EACH,IAAI,OAAO;AACb;AAEA,SAAS,aAAa,WAAuC,GAA8E;AACzI,QAAM,aAAa;AAAA,IACjB,IAAI;AAAA,IACJ,OAAO,EAAE,OAAO;AAAA,IAChB,MAAM;AAAA,EACR;AACA,QAAM,cAAc;AAAA,IAClB,IAAI;AAAA,IACJ,OAAO,EAAE,QAAQ;AAAA,IACjB,MAAM;AAAA,EACR;AACA,QAAM,cAAc;AAAA,IAClB,IAAI;AAAA,IACJ,OAAO,EAAE,aAAa;AAAA,IACtB,MAAM;AAAA,EACR;AACA,SAAO,CAAC,YAAY,WAAW,EAC5B,OAAO,iBAAiB,WAAW,CAAC,EAAE,MAAM,EAC5C,OAAO,CAAC,WAAW,CAAC;AACzB;AAwBA,MAAM,4BAA4B,MAAM,UAAsD;AAAA,EAC5F,OAAO,eAAe;AAAA,IACpB,gBAAgB,MAAM;AAAA,IAAC;AAAA,IACvB,iBAAiB,MAAM;AAAA,IAAC;AAAA,IACxB,kBAAkB,MAAM;AAAA,IAAC;AAAA,EAC3B;AAAA,EAEA,OAAO,oBAAoB;AAAA,IACzB,eAAe,UAAU;AAAA,EAC3B;AAAA,EAEA,YAAY,OAAiC;AAC3C,UAAM,KAAK;AAGX,UAAM,eAAyC,CAAC;AAChD,iBAAa,KAAK,MAAM,MAAM,MAAM,MAAM,CAAC,EAAE,QAAQ,WAAS;AAC5D,mBAAa,MAAM,KAAK,IAAI;AAAA,IAC9B,CAAC;AAED,SAAK,QAAQ,EAAE,aAAa;AAAA,EAC9B;AAAA,EAEA,OAAO,yBAAyB,OAA2C,OAAyB;AAClG,UAAM,mBAAmB,EAAE,GAAG,MAAM,aAAa;AAEjD,qBAAiB,MAAM,MAAM,MAAM,MAAM,CAAC,EAAE,OAAO,QAAQ,WAAS;AAClE,UAAG,EAAE,MAAM,SAAS,mBAAmB;AACrC,yBAAiB,MAAM,KAAK,IAAI;AAAA,MAClC;AAAA,IACF,CAAC;AAED,WAAO;AAAA,MACL,cAAc;AAAA,IAChB;AAAA,EACF;AAAA,EAEA,kBAAmB;AACjB,WAAO;AAAA,MACL,eAAe;AAAA,QACb,MAAM;AAAA,QACN,OAAO;AAAA,MACT;AAAA,IACF;AAAA,EACF;AAAA,EAEA,eAAe,OAAwC,UAAkB,UAAe;AACtF,SAAK,MAAM;AAAA,MACT,KAAK,MAAM;AAAA,MACX,eAAe,KAAK,MAAM,OAAO,OAAO,UAAU,QAAQ;AAAA,IAC5D;AAAA,EACF;AAAA,EAEA,cAAc,YAAoB,QAAiB;AACjD,UAAM,sBAAsB;AAAA,MAC1B,GAAG,KAAK,MAAM;AAAA,MACd,CAAC,UAAU,GAAG;AAAA,IAChB;AACA,SAAK,SAAS;AAAA,MACZ,cAAc;AAAA,IAChB,CAAC;AAAA,EACH;AAAA,EAEA,gBAAgB,MAAc,QAAgC;AAC5D,QAAI,UAAU;AACd,QAAG,KAAK,MAAM,MAAM,UAAU;AAC5B,gBAAW,KAAK,MAAM,MAAM,SAAiB,kBAAkB;AAAA,IACjE;AACA,UAAM,EAAC,QAAQ,WAAU,IAAI,KAAK;AAElC,UAAM,YAAwE,CAAC;AAC/E,WAAQ,QAAQ,WAAS;AACvB,UACE,MAAM,UACN,MAAM,OAAO,SAAS,WACtB,MAAM,OAAO,KAAK,SAAS,YAC3B;AACA,kBAAU,MAAM,OAAO,KAAK,GAAG,IAAI;AAAA,UACjC,SAAS,MAAM,OAAO,KAAK;AAAA,QAC7B;AAAA,MACF;AAAA,IACF,CAAC;AAED,QAAI;AACJ,UAAM,QAAQ,KAAK,MAAM;AACzB,QAAG,OAAO,UAAU,eAAe,KAAK,KAAK,MAAM,SAAS,MAAM,MAAM,GAAG;AACzE,uBAAkB,KAAK,MAAM,QAAQ,MAAM,MAAM,EAAU;AAAA,IAC7D;AAEA,YAAO,MAAM;AAAA,MACb,KAAK;AAAS,eAAO,qBAAC,SACpB;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,OAAM;AAAA,cACN,OAAO,UAAU;AAAA,cACjB,UAAU,WAAS,KAAK,MAAM,gBAAgB,KAAK,MAAM,YAAY,KAAK,MAAM,MAAM,IAAI,KAAK;AAAA;AAAA,UACjG;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,UAAU;AAAA,cACV,OAAO,UAAU;AAAA,cACjB,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,UAAU,aAAW,KAAK,MAAM;AAAA,gBAC9B,KAAK,MAAM;AAAA,gBACX,WAAW,KAAK,MAAM,OAAO,OAAO;AAAA,cACtC;AAAA;AAAA,UACF;AAAA,UACC,KAAK,MAAM,MAAM,SAAS,gBAAgB;AAAA,YAAC;AAAA;AAAA,cAC1C,OAAO,UAAU;AAAA,cACjB,WAAW,OAAO,KAAK,KAAK,MAAM,OAAQ;AAAA,cAC1C,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,UAAU,OAAK,KAAK,eAAe,MAAM,UAAU,CAAC;AAAA;AAAA,UACtD;AAAA,UAEC,CAAC,cAAc,UAAU,aAAa,SAAS,EAAE,QAAQ,KAAK,MAAM,MAAM,IAAI,IAAI,KACjF;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,UAAU,cAAc;AAAA,cAC/B;AAAA,cACA,OAAQ,KAAK,MAAM,MAAc,cAAc;AAAA,cAC/C,UAAU,OAAK,KAAK,eAAe,MAAM,gBAAgB,CAAC;AAAA;AAAA,UAC5D;AAAA,UAEF;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,UAAU;AAAA,cACjB,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,UAAU,OAAK,KAAK,eAAe,MAAM,WAAW,CAAC;AAAA;AAAA,UACvD;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,UAAU;AAAA,cACjB,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,UAAU,OAAK,KAAK,eAAe,MAAM,WAAW,CAAC;AAAA;AAAA,UACvD;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,UAAU;AAAA,cACjB,OAAO;AAAA,cACP,UAAU,OAAK,KAAK,eAAe,YAAY,oBAAoB,KAAK,KAAM,SAAY,CAAC;AAAA;AAAA,UAC7F;AAAA,WACF;AAAA,MACA,KAAK;AAAU,eAAO,oBAAC,SACrB,8BAAC,SAAI,WAAU,kCACb;AAAA,UAAC;AAAA;AAAA,YACC,QAAQ;AAAA,YACR,QAAS,KAAK,MAAM,MAAc;AAAA,YAClC,YAAY,KAAK,MAAM,aAAc,KAAK,MAAM,MAAc,cAAc,CAAC;AAAA,YAC7E,UAAU,OAAK,KAAK,eAAe,MAAM,UAAU,CAAC;AAAA;AAAA,QACtD,GACF,GACF;AAAA,MACA,KAAK;AACH,eAAO;AAAA,UAAC;AAAA;AAAA,YACN,QAAQ;AAAA,YACR,OAAO,KAAK,MAAM;AAAA,YAClB,aAAa;AAAA,YACb,MAAM,KAAK,MAAM;AAAA,YACjB,UAAU,KAAK,eAAe,KAAK,IAAI;AAAA;AAAA,QACzC;AAAA,MACF,KAAK;AACH,eAAO;AAAA,UAAC;AAAA;AAAA,YACN,OAAO,KAAK,MAAM;AAAA,YAClB,UAAU,CAACA,WAAU;AACnB,mBAAK,MAAM;AAAA,gBACT,KAAK,MAAM;AAAA,gBACXA;AAAA,cACF;AAAA,YACF;AAAA;AAAA,QACF;AAAA,MACF;AAAS,eAAO,gCAAE;AAAA,IAClB;AAAA,EACF;AAAA,EAEA,UAAU,QAAgB;AACxB,SAAK,MAAM,YAAY;AAAA,MACrB,UAAU,KAAK,MAAM;AAAA,MACrB,UAAU,KAAK,MAAM,aAAW;AAAA,IAClC,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AAErB,UAAM,WAAqB,CAAC;AAC5B,UAAM,YAAY,KAAK,MAAM,MAAM;AACnC,UAAM,SAAS,aAAa,WAAW,CAAC,EAAE,OAAO,WAAS;AACxD,aAAO,EAAE,cAAc,gBAAgB,MAAM,SAAS;AAAA,IACxD,CAAC,EAAE,IAAI,WAAS;AACd,YAAM,UAAU,MAAM;AACtB,eAAS,KAAK,OAAO;AACrB,aAAO;AAAA,QAAC;AAAA;AAAA,UACN,eAAa,MAAM;AAAA,UACnB,IAAI;AAAA,UAEJ,OAAO,MAAM;AAAA,UACb,UAAU,KAAK,MAAM,aAAa,MAAM,KAAK;AAAA,UAC7C,gBAAgB,KAAK,cAAc,KAAK,MAAM,MAAM,KAAK;AAAA,UAExD,eAAK,gBAAgB,MAAM,MAAM,MAAM,MAAM;AAAA;AAAA,QALzC;AAAA,MAMP;AAAA,IACF,CAAC;AAED,UAAMC,UAAS,KAAK,MAAM,MAAM,UAAU,CAAC;AAE3C,UAAM,QAAkF;AAAA,MACtF,QAAQ;AAAA,QACN,MAAM,EAAE,QAAQ;AAAA,QAChB,SAAS,MAAM,KAAK,MAAM,eAAe,KAAK,MAAM,UAAU;AAAA,MAChE;AAAA,MACA,WAAW;AAAA,QACT,MAAM,EAAE,WAAW;AAAA,QACnB,SAAS,MAAM,KAAK,MAAM,YAAY,KAAK,MAAM,UAAU;AAAA,MAC7D;AAAA,MACA,MAAM;AAAA,QACJ,MAAOA,QAAO,eAAe,SAAU,EAAE,MAAM,IAAI,EAAE,MAAM;AAAA,QAC3D,SAAS,MAAM,KAAK,MAAM,wBAAwB,KAAK,MAAM,UAAU;AAAA,MACzE;AAAA,MACA,aAAa;AAAA,QACX,MAAM,EAAE,eAAe;AAAA;AAAA,QAEvB,UAAU,KAAK,MAAM;AAAA,QACrB,SAAS,MAAM,KAAK,UAAU,EAAE;AAAA,MAClC;AAAA,MACA,eAAe;AAAA,QACb,MAAM,EAAE,iBAAiB;AAAA;AAAA,QAEzB,UAAU,KAAK,MAAM;AAAA,QACrB,SAAS,MAAM,KAAK,UAAU,CAAE;AAAA,MAClC;AAAA,IACF;AAEA,aAAS,gBAAgB,IAAY,OAA6B;AAChE,YAAM,gBAAgB;AACtB,YAAM,EAAE,EAAE,QAAQ;AAAA,IACpB;AAEA,WAAO;AAAA,MAAC;AAAA;AAAA,QAAQ,WAAU;AAAA,QACxB,MAAK;AAAA,QACL,cAAY,EAAE,cAAc;AAAA,QAE5B;AAAA,8BAAC,YACC,+BAAC,SAAI,WAAU,gBACb;AAAA,gCAAC,QAAG,WAAU,uBACX,YAAE,sBAAsB,EAAE,SAAS,cAAc,KAAK,MAAM,MAAM,EAAE,EAAE,CAAC,GAC1E;AAAA,YACA,oBAAC,SAAI,WAAU,sBACb;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,aAAa;AAAA,gBACb,kBAAkB;AAAA,gBAElB;AAAA;AAAA,oBAAC;AAAA;AAAA,sBACC,IAAG;AAAA,sBACH,eAAY;AAAA,sBACZ,WAAU;AAAA,sBACV,OAAO;AAAA,sBACP,8BAAC,cAAW,WAAU,0BAAyB;AAAA;AAAA,kBACjD;AAAA,kBACA,oBAAC,QACC,8BAAC,QAAG,WAAU,mBACX,iBAAO,KAAK,KAAK,EAAE,IAAI,CAAC,OAAO;AAC9B,0BAAM,OAAO,MAAM,EAAE;AACrB,2BAAO,oBAAC,QACN,8BAAC,YAAS,OAAO,IAAI,WAAU,yBAC5B,eAAK,MACR,KAHc,EAIhB;AAAA,kBACF,CAAC,GACH,GACF;AAAA;AAAA;AAAA,YACF,GACF;AAAA,aACF,GAEF;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,uBAAuB;AAAA,cACvB,mBAAmB;AAAA,cACnB,aAAa;AAAA,cAEZ;AAAA;AAAA,UACH;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,cAAc,gBAAgB,EAAE,mBAAmB;AACzD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"555ef41c8141fe537bdb43523a4ef7ec4c287394"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Kn=function(){return a},a}Kn();function yG(n,e){return Kn().f[0]++,Kn().s[0]++,Rb[n]?(Kn().b[0][0]++,{...Rb[n],groups:Rb[n].groups.map(t=>(Kn().f[1]++,Kn().s[1]++,{...t,id:t.title.replace(/ /g,"_"),title:e(t.title)}))}):(Kn().b[0][1]++,Rb.invalid)}function jR(n,e){Kn().f[2]++;const t=(Kn().s[2]++,{id:"layer",title:e("Layer"),type:"layer"}),r=(Kn().s[3]++,{id:"filter",title:e("Filter"),type:"filter"}),i=(Kn().s[4]++,{id:"jsoneditor",title:e("JSON Editor"),type:"jsoneditor"});return Kn().s[5]++,[t,r].concat(yG(n,e).groups).concat([i])}class RB extends nr.Component{constructor(e){Kn().f[6]++,Kn().s[8]++,super(e);const t=(Kn().s[9]++,{});Kn().s[10]++,jR(this.props.layer.type,e.t).forEach(r=>{Kn().f[7]++,Kn().s[11]++,t[r.title]=!0}),Kn().s[12]++,this.state={editorGroups:t}}static getDerivedStateFromProps(e,t){Kn().f[8]++;const r=(Kn().s[13]++,{...t.editorGroups});return Kn().s[14]++,yG(e.layer.type,e.t).groups.forEach(i=>{Kn().f[9]++,Kn().s[15]++,i.title in r?Kn().b[1][1]++:(Kn().b[1][0]++,Kn().s[16]++,r[i.title]=!0)}),Kn().s[17]++,{editorGroups:r}}getChildContext(){return Kn().f[10]++,Kn().s[18]++,{reactIconBase:{size:14,color:"#8e8e8e"}}}changeProperty(e,t,r){Kn().f[11]++,Kn().s[19]++,this.props.onLayerChanged(this.props.layerIndex,kle(this.props.layer,e,t,r))}onGroupToggle(e,t){Kn().f[12]++;const r=(Kn().s[20]++,{...this.state.editorGroups,[e]:t});Kn().s[21]++,this.setState({editorGroups:r})}renderGroupType(e,t){Kn().f[13]++;let r=(Kn().s[22]++,"");Kn().s[23]++,this.props.layer.metadata?(Kn().b[2][0]++,Kn().s[24]++,r=this.props.layer.metadata["maputnik:comment"]):Kn().b[2][1]++;const{errors:i,layerIndex:s}=(Kn().s[25]++,this.props),a=(Kn().s[26]++,{});Kn().s[27]++,i.forEach(g=>{Kn().f[14]++,Kn().s[28]++,Kn().b[4][0]++,g.parsed&&(Kn().b[4][1]++,g.parsed.type==="layer")&&(Kn().b[4][2]++,g.parsed.data.index==s)?(Kn().b[3][0]++,Kn().s[29]++,a[g.parsed.data.key]={message:g.parsed.data.message}):Kn().b[3][1]++});let o;const d=(Kn().s[30]++,this.props.layer);switch(Kn().s[31]++,Object.prototype.hasOwnProperty.call(this.props.sources,d.source)?(Kn().b[5][0]++,Kn().s[32]++,o=this.props.sources[d.source].layers):Kn().b[5][1]++,Kn().s[33]++,e){case"layer":return Kn().b[6][0]++,Kn().s[34]++,ue.jsxs("div",{children:[ue.jsx(tW,{value:this.props.layer.id,wdKey:"layer-editor.layer-id",error:a.id,onChange:g=>(Kn().f[15]++,Kn().s[35]++,this.props.onLayerIdChange(this.props.layerIndex,this.props.layer.id,g))}),ue.jsx(eW,{disabled:!0,error:a.type,value:this.props.layer.type,onChange:g=>(Kn().f[16]++,Kn().s[36]++,this.props.onLayerChanged(this.props.layerIndex,Ile(this.props.layer,g)))}),(Kn().b[7][0]++,this.props.layer.type!=="background"&&(Kn().b[7][1]++,ue.jsx(rW,{error:a.source,sourceIds:Object.keys(this.props.sources),value:this.props.layer.source,onChange:g=>(Kn().f[17]++,Kn().s[37]++,this.changeProperty(null,"source",g))}))),(Kn().b[8][0]++,["background","raster","hillshade","heatmap"].indexOf(this.props.layer.type)<0&&(Kn().b[8][1]++,ue.jsx(oW,{error:a["source-layer"],sourceLayerIds:o,value:this.props.layer["source-layer"],onChange:g=>(Kn().f[18]++,Kn().s[38]++,this.changeProperty(null,"source-layer",g))}))),ue.jsx(Jde,{error:a.minzoom,value:this.props.layer.minzoom,onChange:g=>(Kn().f[19]++,Kn().s[39]++,this.changeProperty(null,"minzoom",g))}),ue.jsx(the,{error:a.maxzoom,value:this.props.layer.maxzoom,onChange:g=>(Kn().f[20]++,Kn().s[40]++,this.changeProperty(null,"maxzoom",g))}),ue.jsx(rhe,{error:a.comment,value:r,onChange:g=>(Kn().f[21]++,Kn().s[41]++,this.changeProperty("metadata","maputnik:comment",g==""?(Kn().b[9][0]++,void 0):(Kn().b[9][1]++,g)))})]});case"filter":return Kn().b[6][1]++,Kn().s[42]++,ue.jsx("div",{children:ue.jsx("div",{className:"maputnik-filter-editor-wrapper",children:ue.jsx(Vue,{errors:a,filter:this.props.layer.filter,properties:this.props.vectorLayers[this.props.layer["source-layer"]],onChange:g=>(Kn().f[22]++,Kn().s[43]++,this.changeProperty(null,"filter",g))})})});case"properties":return Kn().b[6][2]++,Kn().s[44]++,ue.jsx($de,{errors:a,layer:this.props.layer,groupFields:t,spec:this.props.spec,onChange:this.changeProperty.bind(this)});case"jsoneditor":return Kn().b[6][3]++,Kn().s[45]++,ue.jsx(NO,{layer:this.props.layer,onChange:g=>{Kn().f[23]++,Kn().s[46]++,this.props.onLayerChanged(this.props.layerIndex,g)}});default:return Kn().b[6][4]++,Kn().s[47]++,ue.jsx(ue.Fragment,{})}}moveLayer(e){Kn().f[24]++,Kn().s[48]++,this.props.onMoveLayer({oldIndex:this.props.layerIndex,newIndex:this.props.layerIndex+e})}render(){Kn().f[25]++;const e=(Kn().s[49]++,this.props.t),t=(Kn().s[50]++,[]),r=(Kn().s[51]++,this.props.layer.type),i=(Kn().s[52]++,jR(r,e).filter(d=>(Kn().f[26]++,Kn().s[53]++,Kn().b[10][0]++,!(r==="background"&&(Kn().b[10][1]++,d.type==="source")))).map(d=>{Kn().f[27]++;const g=(Kn().s[54]++,d.id);return Kn().s[55]++,t.push(g),Kn().s[56]++,ue.jsx(Zde,{"data-wd-key":d.title,id:g,title:d.title,isActive:this.state.editorGroups[d.title],onActiveToggle:this.onGroupToggle.bind(this,d.title),children:this.renderGroupType(d.type,d.fields)},g)})),s=(Kn().s[57]++,Kn().b[11][0]++,this.props.layer.layout||(Kn().b[11][1]++,{})),a=(Kn().s[58]++,{delete:{text:e("Delete"),handler:()=>(Kn().f[28]++,Kn().s[59]++,this.props.onLayerDestroy(this.props.layerIndex))},duplicate:{text:e("Duplicate"),handler:()=>(Kn().f[29]++,Kn().s[60]++,this.props.onLayerCopy(this.props.layerIndex))},hide:{text:s.visibility==="none"?(Kn().b[12][0]++,e("Show")):(Kn().b[12][1]++,e("Hide")),handler:()=>(Kn().f[30]++,Kn().s[61]++,this.props.onLayerVisibilityToggle(this.props.layerIndex))},moveLayerUp:{text:e("Move layer up"),disabled:this.props.isFirstLayer,handler:()=>(Kn().f[31]++,Kn().s[62]++,this.moveLayer(-1))},moveLayerDown:{text:e("Move layer down"),disabled:this.props.isLastLayer,handler:()=>(Kn().f[32]++,Kn().s[63]++,this.moveLayer(1))}});function o(d,g){Kn().f[33]++,Kn().s[64]++,g.stopPropagation(),Kn().s[65]++,a[d].handler()}return Kn().s[66]++,ue.jsxs("section",{className:"maputnik-layer-editor",role:"main","aria-label":e("Layer editor"),children:[ue.jsx("header",{children:ue.jsxs("div",{className:"layer-header",children:[ue.jsx("h2",{className:"layer-header__title",children:e("Layer: {{layerId}}",{layerId:gG(this.props.layer.id)})}),ue.jsx("div",{className:"layer-header__info",children:ue.jsxs(Ib.Wrapper,{className:"more-menu",onSelection:o,closeOnSelection:!1,children:[ue.jsx(Ib.Button,{id:"skip-target-layer-editor","data-wd-key":"skip-target-layer-editor",className:"more-menu__button",title:"Layer options",children:ue.jsx(qZ,{className:"more-menu__button__svg"})}),ue.jsx(Ib.Menu,{children:ue.jsx("ul",{className:"more-menu__menu",children:Object.keys(a).map(d=>{Kn().f[34]++;const g=(Kn().s[67]++,a[d]);return Kn().s[68]++,ue.jsx("li",{children:ue.jsx(Ib.MenuItem,{value:d,className:"more-menu__menu__item",children:g.text})},d)})})})]})})]})}),ue.jsx(rue,{allowMultipleExpanded:!0,allowZeroExpanded:!0,preExpanded:t,children:i})]})}}Pn(RB,"defaultProps",(Kn().s[6]++,{onLayerChanged:()=>{Kn().f[3]++},onLayerIdChange:()=>{Kn().f[4]++},onLayerDestroyed:()=>{Kn().f[5]++}})),Pn(RB,"childContextTypes",(Kn().s[7]++,{reactIconBase:hi.object}));const hhe=(Kn().s[69]++,Ns()(RB));var NR=function(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return n.concat(s||Array.prototype.slice.call(e))},fhe=function(){function n(e,t,r){this.name=e,this.version=t,this.os=r,this.type="browser"}return n}(),phe=function(){function n(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return n}(),mhe=function(){function n(e,t,r,i){this.name=e,this.version=t,this.os=r,this.bot=i,this.type="bot-device"}return n}(),ghe=function(){function n(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return n}(),yhe=function(){function n(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return n}(),vhe=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,Che=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,WR=3,_he=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",vhe]],GR=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function bhe(n){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new yhe:typeof navigator<"u"?whe(navigator.userAgent):She()}function xhe(n){return n!==""&&_he.reduce(function(e,t){var r=t[0],i=t[1];if(e)return e;var s=i.exec(n);return!!s&&[r,s]},!1)}function whe(n){var e=xhe(n);if(!e)return null;var t=e[0],r=e[1];if(t==="searchbot")return new ghe;var i=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);i?i.length<WR&&(i=NR(NR([],i,!0),Ehe(WR-i.length),!0)):i=[];var s=i.join("."),a=Mhe(n),o=Che.exec(n);return o&&o[1]?new mhe(t,s,a,o[1]):new fhe(t,s,a)}function Mhe(n){for(var e=0,t=GR.length;e<t;e++){var r=GR[e],i=r[0],s=r[1],a=s.exec(n);if(a)return i}return null}function She(){var n=typeof process<"u"&&process.version;return n?new phe(process.version.slice(1)):null}function Ehe(n){for(var e=[],t=0;t<n;t++)e.push("0");return e}const Bhe="maputnik",Ohe="2.1.1",Ihe="A MapLibre GL visual style editor",khe="module",The="''",Phe={start:"vite",build:"tsc && vite build --base=/maputnik/","build-desktop":"tsc && vite build --base=/ && cd desktop && make","i18n:refresh":"i18next 'src/**/*.{ts,tsx,js,jsx}'",lint:"eslint",test:"cypress run","cy:open":"cypress open","lint-css":'stylelint "src/styles/*.scss"',"sort-styles":"jq 'sort_by(.id)' src/config/styles.json > tmp.json && mv tmp.json src/config/styles.json"},Khe={type:"git",url:"https://github.com/maplibre/maputnik"},Dhe="Lukas Martinelli",Rhe="MIT",Fhe="https://github.com/maplibre/maputnik#readme",Lhe={"@mapbox/mapbox-gl-rtl-text":"^0.3.0","@maplibre/maplibre-gl-geocoder":"^1.7.1","@maplibre/maplibre-gl-inspect":"^1.7.1","@maplibre/maplibre-gl-style-spec":"^23.1.0","@mdi/js":"^7.4.47","@mdi/react":"^1.6.1","@prantlf/jsonlint":"^16.0.0","array-move":"^4.0.0",buffer:"^6.0.3",classnames:"^2.5.1",codemirror:"^5.65.18",color:"^4.2.3","detect-browser":"^5.3.0",events:"^3.3.0","file-saver":"^2.0.5",i18next:"^24.2.2","i18next-browser-languagedetector":"^8.0.2","i18next-resources-to-backend":"^1.2.1","json-stringify-pretty-compact":"^4.0.0","json-to-ast":"^2.1.0",lodash:"^4.17.21","lodash.capitalize":"^4.2.1","lodash.clamp":"^4.0.3","lodash.clonedeep":"^4.5.0","lodash.get":"^4.4.2","lodash.isequal":"^4.5.0","lodash.throttle":"^4.1.1","maplibre-gl":"^5.1.0","maputnik-design":"github:maputnik/design#172b06c",ol:"^10.4.0","ol-mapbox-style":"^12.4.0",pmtiles:"^4.1.0","prop-types":"^15.8.1",react:"^18.2.0","react-accessible-accordion":"^5.0.0","react-aria-menubutton":"^7.0.3","react-aria-modal":"^5.0.2","react-autobind":"^1.0.6","react-autocomplete":"^1.8.1","react-collapse":"^5.1.1","react-color":"^2.19.3","react-dom":"^18.2.0","react-file-reader-input":"^2.0.0","react-i18next":"^15.4.0","react-icon-base":"^2.1.2","react-icons":"^5.4.0","react-sortable-hoc":"^2.0.0","reconnecting-websocket":"^4.4.0",slugify:"^1.6.6","string-hash":"^1.1.3",url:"^0.11.4"},Uhe={esversion:6},zhe={extends:"stylelint-config-recommended-scss",rules:{"no-descending-specificity":null,"media-feature-name-no-unknown":[!0,{ignoreMediaFeatureNames:["prefers-reduced-motion"]}]}},jhe={"@cypress/code-coverage":"^3.13.11","@eslint/js":"^9.19.0","@istanbuljs/nyc-config-typescript":"^1.0.2","@rollup/plugin-replace":"^6.0.2","@shellygo/cypress-test-utils":"^4.1.12","@types/codemirror":"^5.60.15","@types/color":"^4.2.0","@types/cors":"^2.8.17","@types/file-saver":"^2.0.7","@types/geojson":"^7946.0.16","@types/json-to-ast":"^2.1.4","@types/lodash.capitalize":"^4.2.9","@types/lodash.clamp":"^4.0.9","@types/lodash.clonedeep":"^4.5.9","@types/lodash.get":"^4.4.9","@types/lodash.isequal":"^4.5.8","@types/lodash.throttle":"^4.1.9","@types/randomcolor":"^0.5.9","@types/react":"^18.2.67","@types/react-aria-menubutton":"^6.2.14","@types/react-aria-modal":"^5.0.0","@types/react-autocomplete":"^1.8.11","@types/react-collapse":"^5.0.4","@types/react-color":"^3.0.13","@types/react-dom":"^18.2.22","@types/react-file-reader-input":"^2.0.4","@types/react-icon-base":"^2.1.6","@types/string-hash":"^1.1.3","@types/uuid":"^10.0.0","@types/wicg-file-system-access":"^2023.10.5","@vitejs/plugin-react":"^4.3.4",cors:"^2.8.5",cypress:"^14.0.1","cypress-plugin-tab":"^1.0.5",eslint:"^9.19.0","eslint-plugin-react":"^7.37.4","eslint-plugin-react-hooks":"^5.1.0","eslint-plugin-react-refresh":"^0.4.18","i18next-parser":"^9.1.0",istanbul:"^0.4.5","istanbul-lib-coverage":"^3.2.2",postcss:"^8.5.1","react-hot-loader":"^4.13.1",sass:"^1.83.4",stylelint:"^16.14.1","stylelint-config-recommended-scss":"^14.1.0","stylelint-scss":"^6.11.0",typescript:"^5.7.3","typescript-eslint":"^8.22.0",uuid:"^11.0.5",vite:"^6.0.11","vite-plugin-istanbul":"^6.0.2"},QR={name:Bhe,version:Ohe,description:Ihe,type:khe,main:The,scripts:Phe,repository:Khe,author:Dhe,license:Rhe,homepage:Fhe,dependencies:Lhe,jshintConfig:Uhe,stylelint:zhe,devDependencies:jhe},Nhe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='1200'%20height='1200'%20viewBox='0%200%20100%20100'%3e%3cg%20class='map'%20stroke='%23000'%3e%3cuse%20xlink:href='%23ref-1--map__main'%20fill='%234eba6f'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--map__line1'%20fill='none'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--map__line2'%20fill='none'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--map__line3'%20fill='none'%3e%3c/use%3e%3c/g%3e%3cg%20class='palette'%3e%3cuse%20xlink:href='%23ref-1--palette__main'%20fill='%23fff'%20stroke='%23000'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__inner'%20fill='none'%20stroke='%23000'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle5'%20fill='%23f7c44c'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle4'%20fill='%234eba6f'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle3'%20fill='%23f7c44c'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle2'%20fill='%234eba6f'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle1'%20fill='%23f7c44c'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle0'%20fill='%234eba6f'%3e%3c/use%3e%3c/g%3e%3cg%20class='brush'%20stroke='%23000'%3e%3cuse%20xlink:href='%23ref-1--brush__bottom'%20fill='%23f7c44c'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--brush__top'%20fill='%23fff'%3e%3c/use%3e%3c/g%3e%3cdefs%3e%3cpath%20id='ref-1--map__main'%20stroke-width='2.366'%20stroke-linejoin='round'%20d='M18.84%207.717l15.44%207.542%2015.75-7.762%2015.7%207.857L81.005%207.67%2096.31%2054.052%2073.598%2062.12%2050.93%2053.872l-25.1%208.066-22.668-8.066z'%3e%3c/path%3e%3cpath%20id='ref-1--map__line1'%20d='M65.556%2015.07l7.647%2046.838'%20stroke-width='1.104'%3e%3c/path%3e%3cpath%20id='ref-1--map__line2'%20d='M50.261%207.422l.717%2046.6'%20stroke-width='1.104'%3e%3c/path%3e%3cpath%20id='ref-1--map__line3'%20d='M34.011%2015.07l-8.603%2046.6'%20stroke-width='1.104'%3e%3c/path%3e%3cpath%20id='ref-1--palette__main'%20stroke-width='2.3'%20d='M47.352%2030.887c7.993.226%2016.934%209.725%2017.954%2015.25%201.02%205.527-.743%2011.125-4.298%2013.875-3.554%202.75-8.6%202.905-8.723%208.302-.097%204.237%208.457%208.5%208.088%2015.653-.406%207.857-15.508%2013.15-30.943%206.102-8.556-3.906-14.249-13.653-13.385-26.238C16.833%2052.334%2022.32%2043.658%2027.382%2039c5.977-5.503%2011.977-8.337%2019.97-8.112z'%3e%3c/path%3e%3ccircle%20id='ref-1--palette__inner'%20stroke-width='2.3'%20cx='41.873'%20cy='61.901'%20r='6.389'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle5'%20cy='44.56'%20cx='54.347'%20r='4.336'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle4'%20cx='40.443'%20cy='41.555'%20r='4.336'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle3'%20r='4.336'%20cy='51.102'%20cx='29.651'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle2'%20cx='25.293'%20cy='65.836'%20r='4.336'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle1'%20r='4.336'%20cy='79.326'%20cx='32.764'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle0'%20cx='46.669'%20cy='80.571'%20r='4.336'%3e%3c/circle%3e%3cpath%20id='ref-1--brush__bottom'%20d='M76.333%2089.333c-1.645-9.794-4.375-35.26-4.32-37.887.056-2.627%202.52-4.34%205.36-4.317%202.842.022%205.098%201.87%205.314%204.27.107%201.2-1.576%2028.06-2.318%2037.844-.332%204.374-3.31%204.413-4.036.09z'%20stroke-width='2.3'%20stroke-linejoin='round'%3e%3c/path%3e%3cpath%20id='ref-1--brush__top'%20stroke-linejoin='round'%20stroke-width='2.3'%20d='M77.184%2026.428s-5.621%207.02-5.621%2011.978c0%204.957%202.206%206.878%205.81%206.878%203.606%200%205.148-1.708%205.29-6.736.142-5.028-5.479-12.12-5.479-12.12z'%3e%3c/path%3e%3c/defs%3e%3c/svg%3e";function Gi(){var n="/home/runner/work/maputnik/maputnik/src/components/AppToolbar.tsx",e="7ffd82d4f3aa9239b1c505abaafac5bdb522b791",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/AppToolbar.tsx",statementMap:{0:{start:{line:18,column:16},end:{line:18,column:24}},1:{start:{line:19,column:41},end:{line:19,column:89}},2:{start:{line:22,column:4},end:{line:22,column:107}},3:{start:{line:27,column:4},end:{line:37,column:6}},4:{start:{line:42,column:4},end:{line:49,column:6}},5:{start:{line:54,column:4},end:{line:62,column:6}},6:{start:{line:66,column:10},end:{line:74,column:3}},7:{start:{line:76,column:4},end:{line:76,column:34}},8:{start:{line:79,column:4},end:{line:79,column:40}},9:{start:{line:81,column:11},end:{line:88,column:3}},10:{start:{line:82,column:4},end:{line:87,column:5}},11:{start:{line:83,column:6},end:{line:83,column:59}},12:{start:{line:85,column:17},end:{line:85,column:65}},13:{start:{line:86,column:6},end:{line:86,column:17}},14:{start:{line:90,column:14},end:{line:90,column:26}},15:{start:{line:91,column:18},end:{line:127,column:5}},16:{start:{line:128,column:24},end:{line:130,column:6}},17:{start:{line:129,column:6},end:{line:129,column:45}},18:{start:{line:131,column:4},end:{line:249,column:12}},19:{start:{line:142,column:33},end:{line:142,column:58}},20:{start:{line:151,column:33},end:{line:151,column:60}},21:{start:{line:160,column:33},end:{line:160,column:51}},22:{start:{line:212,column:33},end:{line:212,column:69}},23:{start:{line:215,column:38},end:{line:215,column:59}},24:{start:{line:216,column:20},end:{line:216,column:157}},25:{start:{line:218,column:115},end:{line:218,column:148}},26:{start:{line:219,column:20},end:{line:219,column:133}},27:{start:{line:235,column:33},end:{line:235,column:74}},28:{start:{line:238,column:18},end:{line:238,column:94}},29:{start:{line:252,column:19},end:{line:252,column:56}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:21,column:2},end:{line:21,column:3}},loc:{start:{line:21,column:11},end:{line:23,column:3}},line:21},1:{name:"(anonymous_1)",decl:{start:{line:26,column:2},end:{line:26,column:3}},loc:{start:{line:26,column:11},end:{line:38,column:3}},line:26},2:{name:"(anonymous_2)",decl:{start:{line:41,column:2},end:{line:41,column:3}},loc:{start:{line:41,column:11},end:{line:50,column:3}},line:41},3:{name:"(anonymous_3)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:11},end:{line:63,column:3}},line:53},4:{name:"(anonymous_4)",decl:{start:{line:75,column:2},end:{line:75,column:3}},loc:{start:{line:75,column:23},end:{line:77,column:3}},line:75},5:{name:"(anonymous_5)",decl:{start:{line:78,column:2},end:{line:78,column:3}},loc:{start:{line:78,column:28},end:{line:80,column:3}},line:78},6:{name:"(anonymous_6)",decl:{start:{line:81,column:11},end:{line:81,column:12}},loc:{start:{line:81,column:23},end:{line:88,column:3}},line:81},7:{name:"(anonymous_7)",decl:{start:{line:89,column:2},end:{line:89,column:3}},loc:{start:{line:89,column:11},end:{line:250,column:3}},line:89},8:{name:"(anonymous_8)",decl:{start:{line:128,column:35},end:{line:128,column:36}},loc:{start:{line:128,column:45},end:{line:130,column:5}},line:128},9:{name:"(anonymous_9)",decl:{start:{line:142,column:25},end:{line:142,column:26}},loc:{start:{line:142,column:33},end:{line:142,column:58}},line:142},10:{name:"(anonymous_10)",decl:{start:{line:151,column:25},end:{line:151,column:26}},loc:{start:{line:151,column:33},end:{line:151,column:60}},line:151},11:{name:"(anonymous_11)",decl:{start:{line:160,column:25},end:{line:160,column:26}},loc:{start:{line:160,column:33},end:{line:160,column:51}},line:160},12:{name:"(anonymous_12)",decl:{start:{line:212,column:26},end:{line:212,column:27}},loc:{start:{line:212,column:33},end:{line:212,column:69}},line:212},13:{name:"(anonymous_13)",decl:{start:{line:215,column:31},end:{line:215,column:32}},loc:{start:{line:215,column:38},end:{line:215,column:59}},line:215},14:{name:"(anonymous_14)",decl:{start:{line:215,column:65},end:{line:215,column:66}},loc:{start:{line:215,column:75},end:{line:217,column:19}},line:215},15:{name:"(anonymous_15)",decl:{start:{line:218,column:108},end:{line:218,column:109}},loc:{start:{line:218,column:115},end:{line:218,column:148}},line:218},16:{name:"(anonymous_16)",decl:{start:{line:218,column:154},end:{line:218,column:155}},loc:{start:{line:218,column:164},end:{line:220,column:19}},line:218},17:{name:"(anonymous_17)",decl:{start:{line:235,column:26},end:{line:235,column:27}},loc:{start:{line:235,column:33},end:{line:235,column:74}},line:235},18:{name:"(anonymous_18)",decl:{start:{line:237,column:65},end:{line:237,column:66}},loc:{start:{line:237,column:83},end:{line:239,column:17}},line:237}},branchMap:{0:{loc:{start:{line:82,column:4},end:{line:87,column:5}},type:"if",locations:[{start:{line:82,column:4},end:{line:87,column:5}},{start:{line:84,column:11},end:{line:87,column:5}}],line:82}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/AppToolbar.tsx"],names:[],mappings:"AA+BW,cAyLG,YAzLH;AA/BX,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,SAAQ,cAAa;AAErB;AAAA,EACE;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,OACK;AACP,OAAO,aAAa;AAEpB,OAAO,kBAAkB;AACzB,SAAS,uBAAwC;AACjD,SAAS,0BAA0B;AAGnC,MAAM,UAAU,OAAO;AACvB,MAAM,mCAAmC,CAAC,UAAU,SAAS,EAAE,QAAQ,QAAS,IAAI,IAAI;AAQxF,MAAM,iBAAiB,MAAM,UAAyB;AAAA,EACpD,SAAS;AACP,WAAO,oBAAC,UAAK,WAAU,sBAAsB,eAAK,MAAM,UAAS;AAAA,EACnE;AACF;AASA,MAAM,oBAAoB,MAAM,UAA4B;AAAA,EAC1D,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAW,WAAW,yBAAyB,KAAK,MAAM,SAAS;AAAA,QACnE,MAAM,KAAK,MAAM;AAAA,QACjB,KAAI;AAAA,QACJ,QAAO;AAAA,QACP,eAAY;AAAA,QAEX,eAAK,MAAM;AAAA;AAAA,IACd;AAAA,EACF;AACF;AAOA,MAAM,sBAAsB,MAAM,UAA8B;AAAA,EAC9D,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,eAAa,KAAK,MAAM;AAAA,QAEvB,eAAK,MAAM;AAAA;AAAA,IACd;AAAA,EACF;AACF;AAQA,MAAM,sBAAsB,MAAM,UAA8B;AAAA,EAC9D,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,eAAa,KAAK,MAAM;AAAA,QACxB,SAAS,KAAK,MAAM;AAAA,QAEnB,eAAK,MAAM;AAAA;AAAA,IACd;AAAA,EACF;AACF;AAmBA,MAAM,2BAA2B,MAAM,UAAmC;AAAA,EACxE,QAAQ;AAAA,IACN,QAAQ;AAAA,MACN,UAAU;AAAA,MACV,SAAS;AAAA,MACT,MAAM;AAAA,MACN,KAAK;AAAA,MACL,QAAQ;AAAA,IACV;AAAA,EACF;AAAA,EAEA,gBAAgB,KAAe;AAC7B,SAAK,MAAM,cAAc,GAAG;AAAA,EAC9B;AAAA,EAEA,qBAAqB,KAAa;AAChC,SAAK,MAAM,KAAK,eAAe,GAAG;AAAA,EACpC;AAAA,EAEA,SAAS,CAAC,WAAmB;AAC3B,QAAI,WAAW,OAAO;AACpB,MAAC,SAAS,cAAc,oBAAoB,EAAwB,MAAM;AAAA,IAC5E,OACK;AACH,YAAM,KAAK,SAAS,cAAc,kBAAgB,MAAM;AACxD,SAAG,MAAM;AAAA,IACX;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,QAAQ;AAAA,MACZ;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,KAAK;AAAA,MAChB;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,SAAS;AAAA,QAClB,UAAU,KAAK,MAAM,aAAa;AAAA,MACpC;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,qBAAqB;AAAA,QAC9B,UAAU,CAAC;AAAA,MACb;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,mBAAmB;AAAA,QAC5B,UAAU,CAAC;AAAA,MACb;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,mBAAmB;AAAA,QAC5B,UAAU,CAAC;AAAA,MACb;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,sBAAsB;AAAA,QAC/B,UAAU,CAAC;AAAA,MACb;AAAA,IACF;AAEA,UAAM,cAAc,MAAM,KAAK,CAAC,SAAS;AACvC,aAAO,KAAK,OAAO,KAAK,MAAM;AAAA,IAChC,CAAC;AAED,WAAO,oBAAC,SAAI,WAAU,oBACpB,+BAAC,SAAI,WAAU,2BACb;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UAGV;AAAA;AAAA,cAAC;AAAA;AAAA,gBACC,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACV,SAAS,QAAM,KAAK,OAAO,YAAY;AAAA,gBAEtC,YAAE,aAAa;AAAA;AAAA,YAClB;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACV,SAAS,QAAM,KAAK,OAAO,cAAc;AAAA,gBAExC,YAAE,cAAc;AAAA;AAAA,YACnB;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACV,SAAS,QAAM,KAAK,OAAO,KAAK;AAAA,gBAE/B,YAAE,UAAU;AAAA;AAAA,YACf;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,QAAO;AAAA,gBACP,KAAI;AAAA,gBACJ,MAAK;AAAA,gBAEL;AAAA,sCAAC,SAAI,KAAK,cAAc,KAAK,EAAE,oBAAoB,GAAG;AAAA,kBACtD,qBAAC,QACC;AAAA,wCAAC,UAAK,WAAU,yBAAyB,kBAAQ,MAAK;AAAA,oBACtD,qBAAC,UAAK,WAAU,4BAA2B;AAAA;AAAA,sBAAE,QAAQ;AAAA,uBAAQ;AAAA,qBAC/D;AAAA;AAAA;AAAA,YACF;AAAA;AAAA;AAAA,MACF;AAAA,MACA,qBAAC,SAAI,WAAU,6BAA4B,MAAK,cAAa,cAAW,WACtE;AAAA,6BAAC,iBAAc,OAAM,YAAW,SAAS,KAAK,MAAM,cAAc,KAAK,MAAM,MAAM,GACjF;AAAA,8BAAC,mBAAgB;AAAA,UACjB,oBAAC,YAAU,YAAE,MAAM,GAAE;AAAA,WACvB;AAAA,QACA,qBAAC,iBAAc,OAAM,cAAa,SAAS,KAAK,MAAM,cAAc,KAAK,MAAM,QAAQ,GACrF;AAAA,8BAAC,UAAO;AAAA,UACR,oBAAC,YAAU,YAAE,MAAM,GAAE;AAAA,WACvB;AAAA,QACA,qBAAC,iBAAc,OAAM,eAAc,SAAS,KAAK,MAAM,cAAc,KAAK,MAAM,SAAS,GACvF;AAAA,8BAAC,YAAS;AAAA,UACV,oBAAC,YAAU,YAAE,cAAc,GAAE;AAAA,WAC/B;AAAA,QACA,qBAAC,iBAAc,OAAM,gBAAe,SAAS,KAAK,MAAM,cAAc,KAAK,MAAM,UAAU,GACzF;AAAA,8BAAC,cAAW;AAAA,UACZ,oBAAC,YAAU,YAAE,gBAAgB,GAAE;AAAA,WACjC;AAAA,QAEA,qBAAC,iBAAc,OAAM,eACnB;AAAA,8BAAC,gBAAa;AAAA,UACd,qBAAC,YAAU;AAAA,cAAE,MAAM;AAAA,YACjB;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,eAAY;AAAA,gBACZ,UAAU,CAAC,MAAM,KAAK,gBAAgB,EAAE,OAAO,KAAiB;AAAA,gBAChE,OAAO,aAAa;AAAA,gBAEnB;AAAA,wBAAM,OAAO,OAAK,EAAE,UAAU,SAAS,EAAE,IAAI,CAAC,SAAS;AACtD,2BACE,oBAAC,YAAqB,OAAO,KAAK,IAAI,UAAU,KAAK,UAAU,eAAa,KAAK,IAC9E,eAAK,SADK,KAAK,EAElB;AAAA,kBAEJ,CAAC;AAAA,kBACD,oBAAC,cAAS,OAAO,EAAE,qBAAqB,GACrC,gBAAM,OAAO,OAAK,EAAE,UAAU,qBAAqB,EAAE,IAAI,CAAC,SAAS;AAClE,2BACE,oBAAC,YAAqB,OAAO,KAAK,IAAI,UAAU,KAAK,UAClD,eAAK,SADK,KAAK,EAElB;AAAA,kBAEJ,CAAC,GACH;AAAA;AAAA;AAAA,YACF;AAAA,aACF;AAAA,WACF;AAAA,QAEA,qBAAC,iBAAc,OAAM,gBACnB;AAAA,8BAAC,cAAW;AAAA,UACZ,qBAAC,YAAS;AAAA;AAAA,YACR;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,eAAY;AAAA,gBACZ,UAAU,CAAC,MAAM,KAAK,qBAAqB,EAAE,OAAO,KAAK;AAAA,gBACzD,OAAO,KAAK,MAAM,KAAK;AAAA,gBAEtB,iBAAO,QAAQ,kBAAkB,EAAE,IAAI,CAAC,CAAC,MAAM,IAAI,MAAM;AACxD,yBACE,oBAAC,YAAkB,OAAO,MACvB,kBADU,IAEb;AAAA,gBAEJ,CAAC;AAAA;AAAA,YACH;AAAA,aACF;AAAA,WACF;AAAA,QAEA,qBAAC,eAAY,MAAM,6CACjB;AAAA,8BAAC,iBAAc;AAAA,UACf,oBAAC,YAAU,YAAE,MAAM,GAAE;AAAA,WACvB;AAAA,SACF;AAAA,OACF,GACF;AAAA,EACF;AACF;AAEA,MAAM,aAAa,gBAAgB,EAAE,kBAAkB;AACvD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"7ffd82d4f3aa9239b1c505abaafac5bdb522b791"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Gi=function(){return a},a}Gi();const Whe=(Gi().s[0]++,bhe()),Fb=(Gi().s[1]++,["chrome","firefox"].indexOf(Whe.name)>-1);class pg extends nr.Component{render(){return Gi().f[0]++,Gi().s[2]++,ue.jsx("span",{className:"maputnik-icon-text",children:this.props.children})}}class Ghe extends nr.Component{render(){return Gi().f[1]++,Gi().s[3]++,ue.jsx("a",{className:am("maputnik-toolbar-link",this.props.className),href:this.props.href,rel:"noopener noreferrer",target:"_blank","data-wd-key":"toolbar:link",children:this.props.children})}}class qR extends nr.Component{render(){return Gi().f[2]++,Gi().s[4]++,ue.jsx("div",{className:"maputnik-toolbar-select","data-wd-key":this.props.wdKey,children:this.props.children})}}class Lb extends nr.Component{render(){return Gi().f[3]++,Gi().s[5]++,ue.jsx("button",{className:"maputnik-toolbar-action","data-wd-key":this.props.wdKey,onClick:this.props.onClick,children:this.props.children})}}class Qhe extends nr.Component{constructor(){super(...arguments);Pn(this,"state",(Gi().s[6]++,{isOpen:{settings:!1,sources:!1,open:!1,add:!1,export:!1}}));Pn(this,"onSkip",(Gi().s[9]++,t=>{if(Gi().f[6]++,Gi().s[10]++,t==="map")Gi().b[0][0]++,Gi().s[11]++,document.querySelector(".maplibregl-canvas").focus();else{Gi().b[0][1]++;const r=(Gi().s[12]++,document.querySelector("#skip-target-"+t));Gi().s[13]++,r.focus()}}))}handleSelection(t){Gi().f[4]++,Gi().s[7]++,this.props.onSetMapState(t)}handleLanguageChange(t){Gi().f[5]++,Gi().s[8]++,this.props.i18n.changeLanguage(t)}render(){Gi().f[7]++;const t=(Gi().s[14]++,this.props.t),r=(Gi().s[15]++,[{id:"map",group:"general",title:t("Map")},{id:"inspect",group:"general",title:t("Inspect"),disabled:this.props.renderer==="ol"},{id:"filter-deuteranopia",group:"color-accessibility",title:t("Deuteranopia filter"),disabled:!Fb},{id:"filter-protanopia",group:"color-accessibility",title:t("Protanopia filter"),disabled:!Fb},{id:"filter-tritanopia",group:"color-accessibility",title:t("Tritanopia filter"),disabled:!Fb},{id:"filter-achromatopsia",group:"color-accessibility",title:t("Achromatopsia filter"),disabled:!Fb}]),i=(Gi().s[16]++,r.find(s=>(Gi().f[8]++,Gi().s[17]++,s.id===this.props.mapState)));return Gi().s[18]++,ue.jsx("nav",{className:"maputnik-toolbar",children:ue.jsxs("div",{className:"maputnik-toolbar__inner",children:[ue.jsxs("div",{className:"maputnik-toolbar-logo-container",children:[ue.jsx("button",{"data-wd-key":"root:skip:layer-list",className:"maputnik-toolbar-skip",onClick:s=>(Gi().f[9]++,Gi().s[19]++,this.onSkip("layer-list")),children:t("Layers list")}),ue.jsx("button",{"data-wd-key":"root:skip:layer-editor",className:"maputnik-toolbar-skip",onClick:s=>(Gi().f[10]++,Gi().s[20]++,this.onSkip("layer-editor")),children:t("Layer editor")}),ue.jsx("button",{"data-wd-key":"root:skip:map-view",className:"maputnik-toolbar-skip",onClick:s=>(Gi().f[11]++,Gi().s[21]++,this.onSkip("map")),children:t("Map view")}),ue.jsxs("a",{className:"maputnik-toolbar-logo",target:"blank",rel:"noreferrer noopener",href:"https://github.com/maplibre/maputnik",children:[ue.jsx("img",{src:Nhe,alt:t("Maputnik on GitHub")}),ue.jsxs("h1",{children:[ue.jsx("span",{className:"maputnik-toolbar-name",children:QR.name}),ue.jsxs("span",{className:"maputnik-toolbar-version",children:["v",QR.version]})]})]})]}),ue.jsxs("div",{className:"maputnik-toolbar__actions",role:"navigation","aria-label":"Toolbar",children:[ue.jsxs(Lb,{wdKey:"nav:open",onClick:this.props.onToggleModal.bind(this,"open"),children:[ue.jsx(PZ,{}),ue.jsx(pg,{children:t("Open")})]}),ue.jsxs(Lb,{wdKey:"nav:export",onClick:this.props.onToggleModal.bind(this,"export"),children:[ue.jsx(N6,{}),ue.jsx(pg,{children:t("Save")})]}),ue.jsxs(Lb,{wdKey:"nav:sources",onClick:this.props.onToggleModal.bind(this,"sources"),children:[ue.jsx(jZ,{}),ue.jsx(pg,{children:t("Data Sources")})]}),ue.jsxs(Lb,{wdKey:"nav:settings",onClick:this.props.onToggleModal.bind(this,"settings"),children:[ue.jsx(KZ,{}),ue.jsx(pg,{children:t("Style Settings")})]}),ue.jsxs(qR,{wdKey:"nav:inspect",children:[ue.jsx(BZ,{}),ue.jsxs(pg,{children:[t("View"),ue.jsxs("select",{className:"maputnik-select","data-wd-key":"maputnik-select",onChange:s=>(Gi().f[12]++,Gi().s[22]++,this.handleSelection(s.target.value)),value:i==null?void 0:i.id,children:[r.filter(s=>(Gi().f[13]++,Gi().s[23]++,s.group==="general")).map(s=>(Gi().f[14]++,Gi().s[24]++,ue.jsx("option",{value:s.id,disabled:s.disabled,"data-wd-key":s.id,children:s.title},s.id))),ue.jsx("optgroup",{label:t("Color accessibility"),children:r.filter(s=>(Gi().f[15]++,Gi().s[25]++,s.group==="color-accessibility")).map(s=>(Gi().f[16]++,Gi().s[26]++,ue.jsx("option",{value:s.id,disabled:s.disabled,children:s.title},s.id)))})]})]})]}),ue.jsxs(qR,{wdKey:"nav:language",children:[ue.jsx(TZ,{}),ue.jsxs(pg,{children:["Language",ue.jsx("select",{className:"maputnik-select","data-wd-key":"maputnik-lang-select",onChange:s=>(Gi().f[17]++,Gi().s[27]++,this.handleLanguageChange(s.target.value)),value:this.props.i18n.language,children:Object.entries(yL).map(([s,a])=>(Gi().f[18]++,Gi().s[28]++,ue.jsx("option",{value:s,children:a},s)))})]})]}),ue.jsxs(Ghe,{href:"https://github.com/maplibre/maputnik/wiki",children:[ue.jsx(OZ,{}),ue.jsx(pg,{children:t("Help")})]})]})]})})}}const qhe=(Gi().s[29]++,Ns()(Qhe));function ix(){var n="/home/runner/work/maputnik/maputnik/src/components/ScrollContainer.tsx",e="d17a642b15310eb6111b086bd920c67ec86a8271",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ScrollContainer.tsx",statementMap:{0:{start:{line:5,column:4},end:{line:5,column:113}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:2},end:{line:4,column:3}},loc:{start:{line:4,column:11},end:{line:6,column:3}},line:4}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ScrollContainer.tsx"],names:[],mappings:"AAQW;AARX,OAAO,WAAW;AAMlB,qBAAqB,wBAAwB,MAAM,UAAgC;AAAA,EACjF,SAAS;AACP,WAAO,oBAAC,SAAI,WAAU,6BACnB,eAAK,MAAM,UACd;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d17a642b15310eb6111b086bd920c67ec86a8271"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return ix=function(){return a},a}ix();class Yhe extends nr.Component{render(){return ix().f[0]++,ix().s[0]++,ue.jsx("div",{className:"maputnik-scroll-container",children:this.props.children})}}function fp(){var n="/home/runner/work/maputnik/maputnik/src/components/AppLayout.tsx",e="1ee946cae22aef585acbff88e7256312e8bd0812",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/AppLayout.tsx",statementMap:{0:{start:{line:7,column:29},end:{line:9,column:3}},1:{start:{line:11,column:4},end:{line:13,column:6}},2:{start:{line:16,column:4},end:{line:16,column:46}},3:{start:{line:17,column:4},end:{line:26,column:9}},4:{start:{line:29,column:18},end:{line:29,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:20},end:{line:14,column:3}},line:10},1:{name:"(anonymous_1)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:11},end:{line:27,column:3}},line:15}},branchMap:{0:{loc:{start:{line:24,column:6},end:{line:24,column:123}},type:"binary-expr",locations:[{start:{line:24,column:6},end:{line:24,column:23}},{start:{line:24,column:43},end:{line:24,column:123}}],line:24}},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0,1:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/AppLayout.tsx"],names:[],mappings:"AA8BM,SACE,KADF;AA9BN,OAAO,WAAW;AAClB,OAAO,eAAe;AACtB,OAAO,qBAAqB;AAC5B,SAA0B,uBAAuB;AAWjD,MAAM,0BAA0B,MAAM,UAAkC;AAAA,EACtE,OAAO,oBAAoB;AAAA,IACzB,eAAe,UAAU;AAAA,EAC3B;AAAA,EAEA,kBAAkB;AAChB,WAAO;AAAA,MACL,eAAe,EAAE,MAAM,GAAG;AAAA,IAC5B;AAAA,EACF;AAAA,EAEA,SAAS;AACP,aAAS,KAAK,MAAM,KAAK,MAAM,KAAK,IAAI;AAExC,WAAO,qBAAC,SAAI,WAAU,mBACnB;AAAA,WAAK,MAAM;AAAA,MACZ,qBAAC,SAAI,WAAU,wBACb;AAAA,4BAAC,SAAI,WAAU,wBACZ,eAAK,MAAM,WACd;AAAA,QACA,oBAAC,SAAI,WAAU,0BACb,8BAAC,mBACE,eAAK,MAAM,aACd,GACF;AAAA,QACC,KAAK,MAAM;AAAA,SACd;AAAA,MACC,KAAK,MAAM,UAAU,oBAAC,SAAI,WAAU,0BAClC,eAAK,MAAM,QACd;AAAA,MAEC,KAAK,MAAM;AAAA,OACd;AAAA,EACF;AACF;AAEA,MAAM,YAAY,gBAAgB,EAAE,iBAAiB;AACrD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"1ee946cae22aef585acbff88e7256312e8bd0812"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return fp=function(){return a},a}fp();class vG extends nr.Component{getChildContext(){return fp().f[0]++,fp().s[1]++,{reactIconBase:{size:14}}}render(){return fp().f[1]++,fp().s[2]++,document.body.dir=this.props.i18n.dir(),fp().s[3]++,ue.jsxs("div",{className:"maputnik-layout",children:[this.props.toolbar,ue.jsxs("div",{className:"maputnik-layout-main",children:[ue.jsx("div",{className:"maputnik-layout-list",children:this.props.layerList}),ue.jsx("div",{className:"maputnik-layout-drawer",children:ue.jsx(Yhe,{children:this.props.layerEditor})}),this.props.map]}),(fp().b[0][0]++,this.props.bottom&&(fp().b[0][1]++,ue.jsx("div",{className:"maputnik-layout-bottom",children:this.props.bottom}))),this.props.modals]})}}Pn(vG,"childContextTypes",(fp().s[0]++,{reactIconBase:hi.object}));const $he=(fp().s[4]++,Ns()(vG));function ll(){var n="/home/runner/work/maputnik/maputnik/src/components/AppMessagePanel.tsx",e="79207020c1a6a62db4f3db3338a49c0819045455",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/AppMessagePanel.tsx",statementMap:{0:{start:{line:6,column:24},end:{line:9,column:3}},1:{start:{line:11,column:38},end:{line:11,column:48}},2:{start:{line:12,column:19},end:{line:40,column:6}},3:{start:{line:14,column:6},end:{line:38,column:7}},4:{start:{line:15,column:27},end:{line:15,column:32}},5:{start:{line:16,column:24},end:{line:16,column:73}},6:{start:{line:17,column:8},end:{line:35,column:13}},7:{start:{line:30,column:31},end:{line:30,column:74}},8:{start:{line:37,column:8},end:{line:37,column:32}},9:{start:{line:39,column:6},end:{line:39,column:120}},10:{start:{line:41,column:18},end:{line:43,column:6}},11:{start:{line:42,column:6},end:{line:42,column:68}},12:{start:{line:44,column:4},end:{line:47,column:9}},13:{start:{line:50,column:24},end:{line:50,column:66}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:19},end:{line:7,column:20}},loc:{start:{line:7,column:25},end:{line:8,column:5}},line:7},1:{name:"(anonymous_1)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:48,column:3}},line:10},2:{name:"(anonymous_2)",decl:{start:{line:12,column:42},end:{line:12,column:43}},loc:{start:{line:12,column:58},end:{line:40,column:5}},line:12},3:{name:"(anonymous_3)",decl:{start:{line:30,column:25},end:{line:30,column:26}},loc:{start:{line:30,column:31},end:{line:30,column:74}},line:30},4:{name:"(anonymous_4)",decl:{start:{line:41,column:40},end:{line:41,column:41}},loc:{start:{line:41,column:50},end:{line:43,column:5}},line:41}},branchMap:{0:{loc:{start:{line:14,column:6},end:{line:38,column:7}},type:"if",locations:[{start:{line:14,column:6},end:{line:38,column:7}},{start:{line:36,column:13},end:{line:38,column:7}}],line:14},1:{loc:{start:{line:14,column:10},end:{line:14,column:55}},type:"binary-expr",locations:[{start:{line:14,column:10},end:{line:14,column:22}},{start:{line:14,column:26},end:{line:14,column:55}}],line:14},2:{loc:{start:{line:24,column:10},end:{line:34,column:14}},type:"binary-expr",locations:[{start:{line:24,column:10},end:{line:24,column:50}},{start:{line:24,column:70},end:{line:34,column:14}}],line:24}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/AppMessagePanel.tsx"],names:[],mappings:"AA4BY,SAIE,UAHM,KADR;AA5BZ,OAAO,WAAW;AAClB,SAAQ,qBAAoB;AAE5B,SAAS,OAAwB,uBAAuB;AAWxD,MAAM,gCAAgC,MAAM,UAAwC;AAAA,EAClF,OAAO,eAAe;AAAA,IACpB,eAAe,MAAM;AAAA,IAAC;AAAA,EACxB;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,GAAG,mBAAkB,IAAI,KAAK;AACrC,UAAM,SAAS,KAAK,MAAM,QAAQ,IAAI,CAAC,OAAY,QAAQ;AACzD,UAAI;AACJ,UAAI,MAAM,UAAU,MAAM,OAAO,SAAS,SAAS;AACjD,cAAM,EAAC,OAAM,IAAI;AACjB,cAAM,UAAU,KAAK,MAAM,UAAU,OAAO,OAAO,KAAK,KAAK,EAAE;AAC/D,kBACE,iCACE;AAAA,+BAAC,SAAM,GAAM;AAAA;AAAA,YACL,oBAAC,UAAM,wBAAc,OAAO,GAAE;AAAA,YAAO;AAAA,YAAG,OAAO,KAAK;AAAA,aAC5D;AAAA,UACC,uBAAuB,OAAO,KAAK,SAClC,iCAAE;AAAA;AAAA,YAEA;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,SAAS,MAAM,KAAK,MAAM,cAAe,OAAO,KAAK,KAAK;AAAA,gBAEzD,YAAE,iBAAiB;AAAA;AAAA,YACtB;AAAA,aACF;AAAA,WAEJ;AAAA,MAEJ,OACK;AACH,kBAAU,MAAM;AAAA,MAClB;AACA,aAAO,oBAAC,OAAqB,WAAU,gCACpC,qBADY,WAAS,GAExB;AAAA,IACF,CAAC;AAED,UAAM,QAAQ,KAAK,MAAM,OAAO,IAAI,CAAC,GAAG,MAAM;AAC5C,aAAO,oBAAC,OAAmB,eAAZ,UAAQ,CAAM;AAAA,IAC/B,CAAC;AAED,WAAO,qBAAC,SAAI,WAAU,0BACnB;AAAA;AAAA,MACA;AAAA,OACH;AAAA,EACF;AACF;AAEA,MAAM,kBAAkB,gBAAgB,EAAE,uBAAuB;AACjE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"79207020c1a6a62db4f3db3338a49c0819045455"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return ll=function(){return a},a}ll();class CG extends nr.Component{render(){var s,a;ll().f[1]++;const{t:e,selectedLayerIndex:t}=(ll().s[1]++,this.props),r=(ll().s[2]++,(s=this.props.errors)==null?void 0:s.map((o,d)=>{var b;ll().f[2]++;let g;if(ll().s[3]++,ll().b[1][0]++,o.parsed&&(ll().b[1][1]++,o.parsed.type==="layer")){ll().b[0][0]++;const{parsed:E}=(ll().s[4]++,o),S=(ll().s[5]++,(b=this.props.mapStyle)==null?void 0:b.layers[E.data.index].id);ll().s[6]++,g=ue.jsxs(ue.Fragment,{children:[ue.jsxs(T0,{t:e,children:["Layer ",ue.jsx("span",{children:gG(S)}),": ",E.data.message]}),(ll().b[2][0]++,t!==E.data.index&&(ll().b[2][1]++,ue.jsxs(ue.Fragment,{children:["",ue.jsx("button",{className:"maputnik-message-panel__switch-button",onClick:()=>(ll().f[3]++,ll().s[7]++,this.props.onLayerSelect(E.data.index)),children:e("switch to layer")})]})))]})}else ll().b[0][1]++,ll().s[8]++,g=o.message;return ll().s[9]++,ue.jsx("p",{className:"maputnik-message-panel-error",children:g},"error-"+d)})),i=(ll().s[10]++,(a=this.props.infos)==null?void 0:a.map((o,d)=>(ll().f[4]++,ll().s[11]++,ue.jsx("p",{children:o},"info-"+d))));return ll().s[12]++,ue.jsxs("div",{className:"maputnik-message-panel",children:[r,i]})}}Pn(CG,"defaultProps",(ll().s[0]++,{onLayerSelect:()=>{ll().f[0]++}}));const Vhe=(ll().s[13]++,Ns()(CG));function ox(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldArray.tsx",e="a416dfabb7eaa48bd0505cf98cb9c66326bca3ec",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldArray.tsx",statementMap:{0:{start:{line:7,column:4},end:{line:7,column:165}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:8,column:3}},line:6}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldArray.tsx"],names:[],mappings:"AAcM;AAdN,OAAO,WAAW;AAClB,OAAO,gBAAwD;AAC/D,OAAO,cAAc;AASrB,qBAAqB,mBAAmB,MAAM,UAA2B;AAAA,EACvE,SAAS;AACP,WAAO,oBAAC,YAAS,OAAO,KAAK,MAAM,OAAO,WAAW,KAAK,MAAM,WAC9D,8BAAC,cAAY,GAAG,KAAK,OAAO,GAC9B;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a416dfabb7eaa48bd0505cf98cb9c66326bca3ec"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return ox=function(){return a},a}ox();class sx extends nr.Component{render(){return ox().f[0]++,ox().s[0]++,ue.jsx(QC,{label:this.props.label,fieldSpec:this.props.fieldSpec,children:ue.jsx(aG,{...this.props})})}}function ax(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldNumber.tsx",e="4931f85d3ebf1a60a85ac9883e78e028b7a388d8",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldNumber.tsx",statementMap:{0:{start:{line:7,column:4},end:{line:7,column:163}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:8,column:3}},line:6}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldNumber.tsx"],names:[],mappings:"AAgBM;AAhBN,OAAO,WAAW;AAClB,OAAO,iBAAqC;AAC5C,OAAO,WAAW;AAWlB,qBAAqB,oBAAoB,MAAM,UAA4B;AAAA,EACzE,SAAS;AACP,WAAO,oBAAC,SAAM,OAAO,KAAK,MAAM,OAAO,WAAW,KAAK,MAAM,WAC3D,8BAAC,eAAa,GAAG,KAAK,OAAO,GAC/B;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"4931f85d3ebf1a60a85ac9883e78e028b7a388d8"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return ax=function(){return a},a}ax();class mp extends nr.Component{render(){return ax().f[0]++,ax().s[0]++,ue.jsx(fa,{label:this.props.label,fieldSpec:this.props.fieldSpec,children:ue.jsx(um,{...this.props})})}}function lx(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldString.tsx",e="37d7b9547efb8875177dbe7a186e7965cd9eb1c0",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldString.tsx",statementMap:{0:{start:{line:7,column:4},end:{line:7,column:163}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:8,column:3}},line:6}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldString.tsx"],names:[],mappings:"AAeM;AAfN,OAAO,WAAW;AAClB,OAAO,WAAW;AAClB,OAAO,iBAAqC;AAU5C,qBAAqB,oBAAoB,MAAM,UAA4B;AAAA,EACzE,SAAS;AACP,WAAO,oBAAC,SAAM,OAAO,KAAK,MAAM,OAAO,WAAW,KAAK,MAAM,WAC3D,8BAAC,eAAa,GAAG,KAAK,OAAO,GAC/B;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"37d7b9547efb8875177dbe7a186e7965cd9eb1c0"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return lx=function(){return a},a}lx();class Yp extends nr.Component{render(){return lx().f[0]++,lx().s[0]++,ue.jsx(fa,{label:this.props.label,fieldSpec:this.props.fieldSpec,children:ue.jsx(Qf,{...this.props})})}}function ux(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldUrl.tsx",e="a176a83ddcea7ca7f45b0bf957355a9e0c40a3af",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldUrl.tsx",statementMap:{0:{start:{line:7,column:4},end:{line:7,column:160}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:8,column:3}},line:6}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldUrl.tsx"],names:[],mappings:"AAiBQ;AAjBR,OAAO,WAAW;AAClB,OAAO,cAAgD;AACvD,OAAO,WAAW;AAWlB,qBAAqB,iBAAiB,MAAM,UAAyB;AAAA,EACnE,SAAU;AACR,WACE,oBAAC,SAAM,OAAO,KAAK,MAAM,OAAO,WAAW,KAAK,MAAM,WACpD,8BAAC,YAAU,GAAG,KAAK,OAAO,GAC5B;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a176a83ddcea7ca7f45b0bf957355a9e0c40a3af"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return ux=function(){return a},a}ux();class Wy extends nr.Component{render(){return ux().f[0]++,ux().s[0]++,ue.jsx(fa,{label:this.props.label,fieldSpec:this.props.fieldSpec,children:ue.jsx(cI,{...this.props})})}}function Ax(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldSelect.tsx",e="ed4136288b91381a6bd6755cdb2ea1dcf45e2f6b",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldSelect.tsx",statementMap:{0:{start:{line:7,column:4},end:{line:7,column:163}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:8,column:3}},line:6}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldSelect.tsx"],names:[],mappings:"AAgBM;AAhBN,OAAO,WAAW;AAClB,OAAO,WAAW;AAClB,OAAO,iBAAqC;AAW5C,qBAAqB,oBAAoB,MAAM,UAA4B;AAAA,EACzE,SAAS;AACP,WAAO,oBAAC,SAAM,OAAO,KAAK,MAAM,OAAO,WAAW,KAAK,MAAM,WAC3D,8BAAC,eAAa,GAAG,KAAK,OAAM,GAC9B;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ed4136288b91381a6bd6755cdb2ea1dcf45e2f6b"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Ax=function(){return a},a}Ax();class O3 extends nr.Component{render(){return Ax().f[0]++,Ax().s[0]++,ue.jsx(fa,{label:this.props.label,fieldSpec:this.props.fieldSpec,children:ue.jsx(Xg,{...this.props})})}}function cx(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldEnum.tsx",e="5745e67ee75c0f352c022256ef8bf31e8fa7367f",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldEnum.tsx",statementMap:{0:{start:{line:7,column:4},end:{line:7,column:164}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:8,column:3}},line:6}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldEnum.tsx"],names:[],mappings:"AAgBM;AAhBN,OAAO,WAAW;AAClB,OAAO,eAAiC;AACxC,OAAO,cAAc;AAWrB,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,SAAS;AACP,WAAO,oBAAC,YAAS,OAAO,KAAK,MAAM,OAAO,WAAW,KAAK,MAAM,WAC9D,8BAAC,aAAW,GAAG,KAAK,OAAO,GAC7B;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"5745e67ee75c0f352c022256ef8bf31e8fa7367f"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return cx=function(){return a},a}cx();class Hhe extends nr.Component{render(){return cx().f[0]++,cx().s[0]++,ue.jsx(QC,{label:this.props.label,fieldSpec:this.props.fieldSpec,children:ue.jsx(AI,{...this.props})})}}function dx(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldColor.tsx",e="4d9e98bd5e7819496a7ef6b66981b81e318fe1bf",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldColor.tsx",statementMap:{0:{start:{line:7,column:4},end:{line:7,column:162}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:8,column:3}},line:6}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldColor.tsx"],names:[],mappings:"AAgBM;AAhBN,OAAO,WAAW;AAClB,OAAO,WAAW;AAClB,OAAO,gBAAmC;AAW1C,qBAAqB,mBAAmB,MAAM,UAA2B;AAAA,EACvE,SAAS;AACP,WAAO,oBAAC,SAAM,OAAO,KAAK,MAAM,OAAO,WAAW,KAAK,MAAM,WAC3D,8BAAC,cAAY,GAAG,KAAK,OAAO,GAC9B;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"4d9e98bd5e7819496a7ef6b66981b81e318fe1bf"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return dx=function(){return a},a}dx();class Zhe extends nr.Component{render(){return dx().f[0]++,dx().s[0]++,ue.jsx(fa,{label:this.props.label,fieldSpec:this.props.fieldSpec,children:ue.jsx(sG,{...this.props})})}}function qC(){var n="/home/runner/work/maputnik/maputnik/src/libs/field-spec-additional.ts",e="3f2b222219042b3cb4a75b927d846ca17e6201aa",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/field-spec-additional.ts",statementMap:{0:{start:{line:1,column:13},end:{line:26,column:2}},1:{start:{line:1,column:21},end:{line:26,column:1}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:1,column:13},end:{line:1,column:14}},loc:{start:{line:1,column:21},end:{line:26,column:1}},line:1}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/field-spec-additional.ts"],names:[],mappings:"AAEA,MAAM,OAAO,CAAC,OAAkB;AAAA,EAC9B,UAAU;AAAA,IACR,uBAAuB;AAAA,MACrB,OAAO,EAAE,uBAAuB;AAAA,MAChC,KAAK,EAAE,yCAAyC;AAAA,MAChD,QAAQ;AAAA,MACR,gBAAgB,EAAE,YAAY;AAAA,IAChC;AAAA,IACA,4BAA4B;AAAA,MAC1B,OAAO,EAAE,4BAA4B;AAAA,MACrC,KAAK,EAAE,iDAAiD;AAAA,MACxD,QAAQ;AAAA,MACR,gBAAgB,EAAE,YAAY;AAAA,IAChC;AAAA,IACA,qBAAqB;AAAA,MACnB,OAAO,EAAE,qBAAqB;AAAA,MAC9B,KAAK,EAAE,0BAA0B;AAAA,MACjC,QAAQ;AAAA,MACR,gBAAgB,EAAE,YAAY;AAAA,IAChC;AAAA,IACA,gBAAgB;AAAA,MACd,OAAO,EAAE,gBAAgB;AAAA,MACzB,KAAK,EAAE,sDAAsD;AAAA,IAC/D;AAAA,EACF;AACF;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"3f2b222219042b3cb4a75b927d846ca17e6201aa"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return qC=function(){return a},a}qC();qC().s[0]++;const _G=n=>(qC().f[0]++,qC().s[1]++,{maputnik:{maptiler_access_token:{label:n("MapTiler Access Token"),doc:n("Public access token for MapTiler Cloud."),docUrl:"https://docs.maptiler.com/cloud/api/authentication-key/",docUrlLinkText:n("Learn More")},thunderforest_access_token:{label:n("Thunderforest Access Token"),doc:n("Public access token for Thunderforest services."),docUrl:"https://www.thunderforest.com/docs/apikeys/",docUrlLinkText:n("Learn More")},stadia_access_token:{label:n("Stadia Maps API Key"),doc:n("API key for Stadia Maps."),docUrl:"https://docs.stadiamaps.com/authentication/",docUrlLinkText:n("Learn More")},style_renderer:{label:n("Style Renderer"),doc:n("Choose the default Maputnik renderer for this style.")}}});function Li(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalSettings.tsx",e="2bfcb2bc337b915a29f70f26bbf03f5047260e49",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalSettings.tsx",statementMap:{0:{start:{line:16,column:23},end:{line:18,column:5}},1:{start:{line:19,column:4},end:{line:23,column:5}},2:{start:{line:20,column:6},end:{line:20,column:34}},3:{start:{line:22,column:6},end:{line:22,column:35}},4:{start:{line:24,column:4},end:{line:27,column:7}},5:{start:{line:30,column:18},end:{line:32,column:5}},6:{start:{line:33,column:4},end:{line:37,column:5}},7:{start:{line:34,column:6},end:{line:34,column:29}},8:{start:{line:36,column:6},end:{line:36,column:30}},9:{start:{line:38,column:4},end:{line:41,column:7}},10:{start:{line:44,column:20},end:{line:46,column:5}},11:{start:{line:47,column:4},end:{line:51,column:5}},12:{start:{line:48,column:6},end:{line:48,column:31}},13:{start:{line:50,column:6},end:{line:50,column:32}},14:{start:{line:52,column:4},end:{line:55,column:7}},15:{start:{line:58,column:25},end:{line:60,column:5}},16:{start:{line:61,column:4},end:{line:65,column:5}},17:{start:{line:62,column:6},end:{line:62,column:36}},18:{start:{line:64,column:6},end:{line:64,column:37}},19:{start:{line:66,column:4},end:{line:66,column:44}},20:{start:{line:69,column:21},end:{line:69,column:55}},21:{start:{line:70,column:54},end:{line:70,column:64}},22:{start:{line:71,column:16},end:{line:71,column:38}},23:{start:{line:72,column:18},end:{line:72,column:49}},24:{start:{line:73,column:23},end:{line:73,column:59}},25:{start:{line:74,column:20},end:{line:74,column:53}},26:{start:{line:75,column:4},end:{line:295,column:6}},27:{start:{line:298,column:22},end:{line:298,column:62}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:44},end:{line:28,column:3}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:29,column:2},end:{line:29,column:3}},loc:{start:{line:29,column:39},end:{line:42,column:3}},line:29},2:{name:"(anonymous_2)",decl:{start:{line:43,column:2},end:{line:43,column:3}},loc:{start:{line:43,column:41},end:{line:56,column:3}},line:43},3:{name:"(anonymous_3)",decl:{start:{line:57,column:2},end:{line:57,column:3}},loc:{start:{line:57,column:39},end:{line:67,column:3}},line:57},4:{name:"(anonymous_4)",decl:{start:{line:68,column:2},end:{line:68,column:3}},loc:{start:{line:68,column:11},end:{line:296,column:3}},line:68}},branchMap:{0:{loc:{start:{line:19,column:4},end:{line:23,column:5}},type:"if",locations:[{start:{line:19,column:4},end:{line:23,column:5}},{start:{line:21,column:11},end:{line:23,column:5}}],line:19},1:{loc:{start:{line:33,column:4},end:{line:37,column:5}},type:"if",locations:[{start:{line:33,column:4},end:{line:37,column:5}},{start:{line:35,column:11},end:{line:37,column:5}}],line:33},2:{loc:{start:{line:47,column:4},end:{line:51,column:5}},type:"if",locations:[{start:{line:47,column:4},end:{line:51,column:5}},{start:{line:49,column:11},end:{line:51,column:5}}],line:47},3:{loc:{start:{line:61,column:4},end:{line:65,column:5}},type:"if",locations:[{start:{line:61,column:4},end:{line:65,column:5}},{start:{line:63,column:11},end:{line:65,column:5}}],line:61},4:{loc:{start:{line:69,column:21},end:{line:69,column:55}},type:"binary-expr",locations:[{start:{line:69,column:21},end:{line:69,column:49}},{start:{line:69,column:53},end:{line:69,column:55}}],line:69},5:{loc:{start:{line:72,column:18},end:{line:72,column:49}},type:"binary-expr",locations:[{start:{line:72,column:18},end:{line:72,column:43}},{start:{line:72,column:47},end:{line:72,column:49}}],line:72},6:{loc:{start:{line:73,column:23},end:{line:73,column:59}},type:"binary-expr",locations:[{start:{line:73,column:23},end:{line:73,column:53}},{start:{line:73,column:57},end:{line:73,column:59}}],line:73},7:{loc:{start:{line:74,column:20},end:{line:74,column:53}},type:"binary-expr",locations:[{start:{line:74,column:20},end:{line:74,column:47}},{start:{line:74,column:51},end:{line:74,column:53}}],line:74},8:{loc:{start:{line:160,column:21},end:{line:160,column:42}},type:"binary-expr",locations:[{start:{line:160,column:21},end:{line:160,column:36}},{start:{line:160,column:40},end:{line:160,column:42}}],line:160},9:{loc:{start:{line:289,column:21},end:{line:289,column:62}},type:"binary-expr",locations:[{start:{line:289,column:21},end:{line:289,column:50}},{start:{line:289,column:54},end:{line:289,column:62}}],line:289}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalSettings.tsx"],names:[],mappings:"AA+GM,SACE,KADF;AA/GN,OAAO,WAAW;AAClB,OAAO,YAAY;AAEnB,SAA0B,uBAAuB;AAEjD,OAAO,gBAAgB;AACvB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,cAAc;AACrB,OAAO,iBAAiB;AACxB,OAAO,eAAe;AACtB,OAAO,gBAAgB;AACvB,OAAO,WAAW;AAClB,OAAO,yBAAyB;AAUhC,MAAM,8BAA8B,MAAM,UAAsC;AAAA,EAC9E,yBAAyB,UAAyC,OAA2B;AAC3F,UAAM,aAAa;AAAA,MACjB,GAAG,KAAK,MAAM,SAAS;AAAA,IACzB;AAEA,QAAI,UAAU,QAAW;AACvB,aAAO,WAAW,QAAQ;AAAA,IAC5B,OACK;AACH,iBAAW,QAAQ,IAAI;AAAA,IACzB;AAEA,SAAK,MAAM,eAAe;AAAA,MACxB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,oBAAoB,UAAoC,OAAY;AAClE,UAAM,QAAQ;AAAA,MACZ,GAAG,KAAK,MAAM,SAAS;AAAA,IACzB;AAEA,QAAI,UAAU,QAAW;AACvB,aAAO,MAAM,QAAQ;AAAA,IACvB,OACK;AAEH,YAAM,QAAQ,IAAI;AAAA,IACpB;AAEA,SAAK,MAAM,eAAe;AAAA,MACxB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,sBAAsB,UAAsC,OAAY;AACtE,UAAM,UAAU;AAAA,MACd,GAAG,KAAK,MAAM,SAAS;AAAA,IACzB;AAEA,QAAI,UAAU,QAAW;AACvB,aAAO,QAAQ,QAAQ;AAAA,IACzB,OACK;AAEH,cAAQ,QAAQ,IAAI;AAAA,IACtB;AAEA,SAAK,MAAM,eAAe;AAAA,MACxB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,oBAAoB,UAA8C,OAAY;AAC5E,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,IAChB;AAEA,QAAI,UAAU,QAAW;AAEvB,aAAO,aAAa,QAAQ;AAAA,IAC9B,OACK;AAEH,mBAAa,QAAQ,IAAI;AAAA,IAC3B;AACA,SAAK,MAAM,eAAe,YAAY;AAAA,EACxC;AAAA,EAEA,SAAS;AACP,UAAM,WAAW,KAAK,MAAM,SAAS,YAAY,CAAC;AAClD,UAAM,EAAC,GAAG,0BAA0B,SAAQ,IAAI,KAAK;AACrD,UAAM,MAAM,oBAAoB,CAAC;AAEjC,UAAM,QAAQ,KAAK,MAAM,SAAS,SAAS,CAAC;AAC5C,UAAM,aAAa,KAAK,MAAM,SAAS,cAAc,CAAC;AACtD,UAAM,UAAU,KAAK,MAAM,SAAS,WAAW,CAAC;AAEhD,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,gBAAgB;AAAA,QAEzB,+BAAC,SAAI,WAAU,kBACb;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,MAAM;AAAA,cACf,WAAW,OAAO,MAAM;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,KAAK,MAAM,SAAS;AAAA,cAC3B,UAAU,KAAK,oBAAoB,KAAK,MAAM,MAAM;AAAA;AAAA,UACtD;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,OAAO;AAAA,cAChB,WAAW,EAAC,KAAK,EAAE,6DAA6D,EAAC;AAAA,cACjF,eAAY;AAAA,cACZ,OAAQ,KAAK,MAAM,SAAiB;AAAA,cACpC,UAAU,KAAK,oBAAoB,KAAK,MAAM,OAAO;AAAA;AAAA,UACvD;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,EAAE,YAAY;AAAA,cACrB,eAAY;AAAA,cACZ,OAAO,KAAK,MAAM,SAAS;AAAA,cAC3B,UAAU,KAAK,oBAAoB,KAAK,MAAM,QAAQ;AAAA;AAAA,UACxD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,YAAY;AAAA,cACrB,WAAW,OAAO,MAAM;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,KAAK,MAAM,SAAS;AAAA,cAC3B,UAAU,KAAK,oBAAoB,KAAK,MAAM,QAAQ;AAAA;AAAA,UACxD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,sBAAsB;AAAA,cAC1C,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,SAAS,oCAAoC;AAAA,cACpD,UAAU,yBAAyB,KAAK,MAAM,oCAAoC;AAAA;AAAA,UACpF;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,2BAA2B;AAAA,cAC/C,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,SAAS,qCAAqC;AAAA,cACrD,UAAU,yBAAyB,KAAK,MAAM,qCAAqC;AAAA;AAAA,UACrF;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,oBAAoB;AAAA,cACxC,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,SAAS,8BAA8B;AAAA,cAC9C,UAAU,yBAAyB,KAAK,MAAM,8BAA8B;AAAA;AAAA,UAC9E;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,QAAQ;AAAA,cACjB,WAAW,OAAO,MAAM;AAAA,cACxB,QAAQ;AAAA,cACR,MAAK;AAAA,cACL,OAAO,SAAS,UAAU,CAAC;AAAA,cAC3B,SAAS,CAAC,GAAG,CAAC;AAAA,cACd,UAAU,KAAK,oBAAoB,KAAK,MAAM,QAAQ;AAAA;AAAA,UACxD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,MAAM;AAAA,cACf,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,SAAS;AAAA,cAChB,SAAS;AAAA,cACT,UAAU,KAAK,oBAAoB,KAAK,MAAM,MAAM;AAAA;AAAA,UACtD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,SAAS;AAAA,cAClB,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,SAAS;AAAA,cAChB,SAAS,OAAO,MAAM,QAAQ;AAAA,cAC9B,UAAU,KAAK,oBAAoB,KAAK,MAAM,SAAS;AAAA;AAAA,UACzD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,OAAO;AAAA,cAChB,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,SAAS;AAAA,cAChB,SAAS,OAAO,MAAM,MAAM;AAAA,cAC5B,UAAU,KAAK,oBAAoB,KAAK,MAAM,OAAO;AAAA;AAAA,UACvD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,cAAc;AAAA,cACvB,WAAW,OAAO,MAAM;AAAA,cACxB,MAAK;AAAA,cACL,OAAO,MAAM;AAAA,cACb,SAAS,OAAO,KAAK,OAAO,MAAM,OAAO,MAAM;AAAA,cAC/C,SAAS,OAAO,MAAM,OAAO;AAAA,cAC7B,UAAU,KAAK,oBAAoB,KAAK,MAAM,QAAQ;AAAA;AAAA,UACxD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,aAAa;AAAA,cACtB,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,MAAM;AAAA,cACb,SAAS,OAAO,MAAM,MAAM;AAAA,cAC5B,UAAU,KAAK,oBAAoB,KAAK,MAAM,OAAO;AAAA;AAAA,UACvD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,iBAAiB;AAAA,cAC1B,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,MAAM;AAAA,cACb,SAAS,OAAO,MAAM,UAAU;AAAA,cAChC,UAAU,KAAK,oBAAoB,KAAK,MAAM,WAAW;AAAA;AAAA,UAC3D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,gBAAgB;AAAA,cACzB,WAAW,OAAO,MAAM;AAAA,cACxB,MAAK;AAAA,cACL,QAAQ,OAAO,MAAM,SAAS;AAAA,cAC9B,OAAO,MAAM;AAAA,cACb,SAAS,OAAO,MAAM,SAAS;AAAA,cAC/B,UAAU,KAAK,oBAAoB,KAAK,MAAM,UAAU;AAAA;AAAA,UAC1D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,gBAAgB;AAAA,cACzB,WAAW,OAAO,QAAQ;AAAA,cAC1B,eAAY;AAAA,cACZ,OAAO,QAAQ;AAAA,cACf,UAAU,KAAK,sBAAsB,KAAK,MAAM,QAAQ;AAAA;AAAA,UAC1D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,sBAAsB;AAAA,cAC/B,WAAW,OAAO,QAAQ;AAAA,cAC1B,OAAO,QAAQ;AAAA,cACf,SAAS,OAAO,QAAQ,aAAa;AAAA,cACrC,UAAU,KAAK,sBAAsB,KAAK,MAAM,cAAc;AAAA;AAAA,UAChE;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,kBAAkB;AAAA,cAC3B,WAAW,OAAO,WAAW;AAAA,cAC7B,OAAO,WAAW;AAAA,cAClB,SAAS,OAAO,WAAW,MAAM;AAAA,cACjC,UAAU,KAAK,yBAAyB,KAAK,MAAM,OAAO;AAAA;AAAA,UAC5D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,qBAAqB;AAAA,cAC9B,WAAW,OAAO,WAAW;AAAA,cAC7B,OAAO,WAAW;AAAA,cAClB,SAAS,OAAO,WAAW,SAAS;AAAA,cACpC,UAAU,KAAK,yBAAyB,KAAK,MAAM,UAAU;AAAA;AAAA,UAC/D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,eAAe;AAAA,cACnC,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,SAAS;AAAA,gBACP,CAAC,UAAU,eAAe;AAAA,gBAC1B,CAAC,MAAM,EAAE,4BAA4B,CAAC;AAAA,cACxC;AAAA,cACA,OAAO,SAAS,mBAAmB,KAAK;AAAA,cACxC,UAAU,yBAAyB,KAAK,MAAM,mBAAmB;AAAA;AAAA,UACnE;AAAA,WACF;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,gBAAgB,gBAAgB,EAAE,qBAAqB;AAC7D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2bfcb2bc337b915a29f70f26bbf03f5047260e49"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Li=function(){return a},a}Li();class Xhe extends nr.Component{changeTransitionProperty(e,t){Li().f[0]++;const r=(Li().s[0]++,{...this.props.mapStyle.transition});Li().s[1]++,t===void 0?(Li().b[0][0]++,Li().s[2]++,delete r[e]):(Li().b[0][1]++,Li().s[3]++,r[e]=t),Li().s[4]++,this.props.onStyleChanged({...this.props.mapStyle,transition:r})}changeLightProperty(e,t){Li().f[1]++;const r=(Li().s[5]++,{...this.props.mapStyle.light});Li().s[6]++,t===void 0?(Li().b[1][0]++,Li().s[7]++,delete r[e]):(Li().b[1][1]++,Li().s[8]++,r[e]=t),Li().s[9]++,this.props.onStyleChanged({...this.props.mapStyle,light:r})}changeTerrainProperty(e,t){Li().f[2]++;const r=(Li().s[10]++,{...this.props.mapStyle.terrain});Li().s[11]++,t===void 0?(Li().b[2][0]++,Li().s[12]++,delete r[e]):(Li().b[2][1]++,Li().s[13]++,r[e]=t),Li().s[14]++,this.props.onStyleChanged({...this.props.mapStyle,terrain:r})}changeStyleProperty(e,t){Li().f[3]++;const r=(Li().s[15]++,{...this.props.mapStyle});Li().s[16]++,t===void 0?(Li().b[3][0]++,Li().s[17]++,delete r[e]):(Li().b[3][1]++,Li().s[18]++,r[e]=t),Li().s[19]++,this.props.onStyleChanged(r)}render(){Li().f[4]++;const e=(Li().s[20]++,Li().b[4][0]++,this.props.mapStyle.metadata||(Li().b[4][1]++,{})),{t,onChangeMetadataProperty:r,mapStyle:i}=(Li().s[21]++,this.props),s=(Li().s[22]++,_G(t)),a=(Li().s[23]++,Li().b[5][0]++,this.props.mapStyle.light||(Li().b[5][1]++,{})),o=(Li().s[24]++,Li().b[6][0]++,this.props.mapStyle.transition||(Li().b[6][1]++,{})),d=(Li().s[25]++,Li().b[7][0]++,this.props.mapStyle.terrain||(Li().b[7][1]++,{}));return Li().s[26]++,ue.jsx(G0,{"data-wd-key":"modal:settings",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:t("Style Settings"),children:ue.jsxs("div",{className:"modal:settings",children:[ue.jsx(Yp,{label:t("Name"),fieldSpec:ts.$root.name,"data-wd-key":"modal:settings.name",value:this.props.mapStyle.name,onChange:this.changeStyleProperty.bind(this,"name")}),ue.jsx(Yp,{label:t("Owner"),fieldSpec:{doc:t("Owner ID of the style. Used by Mapbox or future style APIs.")},"data-wd-key":"modal:settings.owner",value:this.props.mapStyle.owner,onChange:this.changeStyleProperty.bind(this,"owner")}),ue.jsx(Wy,{fieldSpec:ts.$root.sprite,label:t("Sprite URL"),"data-wd-key":"modal:settings.sprite",value:this.props.mapStyle.sprite,onChange:this.changeStyleProperty.bind(this,"sprite")}),ue.jsx(Wy,{label:t("Glyphs URL"),fieldSpec:ts.$root.glyphs,"data-wd-key":"modal:settings.glyphs",value:this.props.mapStyle.glyphs,onChange:this.changeStyleProperty.bind(this,"glyphs")}),ue.jsx(Yp,{label:s.maputnik.maptiler_access_token.label,fieldSpec:s.maputnik.maptiler_access_token,"data-wd-key":"modal:settings.maputnik:openmaptiles_access_token",value:e["maputnik:openmaptiles_access_token"],onChange:r.bind(this,"maputnik:openmaptiles_access_token")}),ue.jsx(Yp,{label:s.maputnik.thunderforest_access_token.label,fieldSpec:s.maputnik.thunderforest_access_token,"data-wd-key":"modal:settings.maputnik:thunderforest_access_token",value:e["maputnik:thunderforest_access_token"],onChange:r.bind(this,"maputnik:thunderforest_access_token")}),ue.jsx(Yp,{label:s.maputnik.stadia_access_token.label,fieldSpec:s.maputnik.stadia_access_token,"data-wd-key":"modal:settings.maputnik:stadia_access_token",value:e["maputnik:stadia_access_token"],onChange:r.bind(this,"maputnik:stadia_access_token")}),ue.jsx(sx,{label:t("Center"),fieldSpec:ts.$root.center,length:2,type:"number",value:(Li().b[8][0]++,i.center||(Li().b[8][1]++,[])),default:[0,0],onChange:this.changeStyleProperty.bind(this,"center")}),ue.jsx(mp,{label:t("Zoom"),fieldSpec:ts.$root.zoom,value:i.zoom,default:0,onChange:this.changeStyleProperty.bind(this,"zoom")}),ue.jsx(mp,{label:t("Bearing"),fieldSpec:ts.$root.bearing,value:i.bearing,default:ts.$root.bearing.default,onChange:this.changeStyleProperty.bind(this,"bearing")}),ue.jsx(mp,{label:t("Pitch"),fieldSpec:ts.$root.pitch,value:i.pitch,default:ts.$root.pitch.default,onChange:this.changeStyleProperty.bind(this,"pitch")}),ue.jsx(Hhe,{label:t("Light anchor"),fieldSpec:ts.light.anchor,name:"light-anchor",value:a.anchor,options:Object.keys(ts.light.anchor.values),default:ts.light.anchor.default,onChange:this.changeLightProperty.bind(this,"anchor")}),ue.jsx(Zhe,{label:t("Light color"),fieldSpec:ts.light.color,value:a.color,default:ts.light.color.default,onChange:this.changeLightProperty.bind(this,"color")}),ue.jsx(mp,{label:t("Light intensity"),fieldSpec:ts.light.intensity,value:a.intensity,default:ts.light.intensity.default,onChange:this.changeLightProperty.bind(this,"intensity")}),ue.jsx(sx,{label:t("Light position"),fieldSpec:ts.light.position,type:"number",length:ts.light.position.length,value:a.position,default:ts.light.position.default,onChange:this.changeLightProperty.bind(this,"position")}),ue.jsx(Yp,{label:t("Terrain source"),fieldSpec:ts.terrain.source,"data-wd-key":"modal:settings.maputnik:terrain_source",value:d.source,onChange:this.changeTerrainProperty.bind(this,"source")}),ue.jsx(mp,{label:t("Terrain exaggeration"),fieldSpec:ts.terrain.exaggeration,value:d.exaggeration,default:ts.terrain.exaggeration.default,onChange:this.changeTerrainProperty.bind(this,"exaggeration")}),ue.jsx(mp,{label:t("Transition delay"),fieldSpec:ts.transition.delay,value:o.delay,default:ts.transition.delay.default,onChange:this.changeTransitionProperty.bind(this,"delay")}),ue.jsx(mp,{label:t("Transition duration"),fieldSpec:ts.transition.duration,value:o.duration,default:ts.transition.duration.default,onChange:this.changeTransitionProperty.bind(this,"duration")}),ue.jsx(O3,{label:s.maputnik.style_renderer.label,fieldSpec:s.maputnik.style_renderer,"data-wd-key":"modal:settings.maputnik:renderer",options:[["mlgljs","MapLibreGL JS"],["ol",t("Open Layers (experimental)")]],value:(Li().b[9][0]++,e["maputnik:renderer"]||(Li().b[9][1]++,"mlgljs")),onChange:r.bind(this,"maputnik:renderer")})]})})}}const Jhe=(Li().s[27]++,Ns()(Xhe));var t2={exports:{}},efe=t2.exports,YR;function tfe(){return YR||(YR=1,function(n,e){(function(t,r,i){n.exports=i(),n.exports.default=i()})("slugify",efe,function(){var t=JSON.parse(`{"$":"dollar","%":"percent","&":"and","<":"less",">":"greater","|":"or","":"cent","":"pound","":"currency","":"yen","":"(c)","":"a","":"(r)","":"o","":"A","":"A","":"A","":"A","":"A","":"A","":"AE","":"C","":"E","":"E","":"E","":"E","":"I","":"I","":"I","":"I","":"D","":"N","":"O","":"O","":"O","":"O","":"O","":"O","":"U","":"U","":"U","":"U","":"Y","":"TH","":"ss","":"a","":"a","":"a","":"a","":"a","":"a","":"ae","":"c","":"e","":"e","":"e","":"e","":"i","":"i","":"i","":"i","":"d","":"n","":"o","":"o","":"o","":"o","":"o","":"o","":"u","":"u","":"u","":"u","":"y","":"th","":"y","":"A","":"a","":"A","":"a","":"A","":"a","":"C","":"c","":"C","":"c","":"D","":"d","":"DJ","":"dj","":"E","":"e","":"E","":"e","":"e","":"e","":"E","":"e","":"G","":"g","":"G","":"g","":"I","":"i","":"i","":"i","":"I","":"i","":"I","":"i","":"k","":"k","":"L","":"l","":"L","":"l","":"L","":"l","":"N","":"n","":"N","":"n","":"N","":"n","":"O","":"o","":"O","":"o","":"OE","":"oe","":"R","":"r","":"R","":"r","":"S","":"s","":"S","":"s","":"S","":"s","":"T","":"t","":"T","":"t","":"U","":"u","":"u","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"z","":"Z","":"z","":"Z","":"z","":"E","":"f","":"O","":"o","":"U","":"u","":"LJ","":"lj","":"NJ","":"nj","":"S","":"s","":"T","":"t","":"e","":"o","":"A","":"E","":"H","":"I","":"O","":"Y","":"W","":"i","":"A","":"B","":"G","":"D","":"E","":"Z","":"H","":"8","":"I","":"K","":"L","":"M","":"N","":"3","":"O","":"P","":"R","":"S","":"T","":"Y","":"F","":"X","":"PS","":"W","":"I","":"Y","":"a","":"e","":"h","":"i","":"y","":"a","":"b","":"g","":"d","":"e","":"z","":"h","":"8","":"i","":"k","":"l","":"m","":"n","":"3","":"o","":"p","":"r","":"s","":"s","":"t","":"y","":"f","":"x","":"ps","":"w","":"i","":"y","":"o","":"y","":"w","":"Yo","":"DJ","":"Ye","":"I","":"Yi","":"J","":"LJ","":"NJ","":"C","":"DZ","":"A","":"B","":"V","":"G","":"D","":"E","":"Zh","":"Z","":"I","":"J","":"K","":"L","":"M","":"N","":"O","":"P","":"R","":"S","":"T","":"U","":"F","":"H","":"C","":"Ch","":"Sh","":"Sh","":"U","":"Y","":"","":"E","":"Yu","":"Ya","":"a","":"b","":"v","":"g","":"d","":"e","":"zh","":"z","":"i","":"j","":"k","":"l","":"m","":"n","":"o","":"p","":"r","":"s","":"t","":"u","":"f","":"h","":"c","":"ch","":"sh","":"sh","":"u","":"y","":"","":"e","":"yu","":"ya","":"yo","":"dj","":"ye","":"i","":"yi","":"j","":"lj","":"nj","":"c","":"u","":"dz","":"G","":"g","":"GH","":"gh","":"KH","":"kh","":"NG","":"ng","":"UE","":"ue","":"U","":"u","":"H","":"h","":"AE","":"ae","":"OE","":"oe","":"A","":"B","":"G","":"D","":"E","":"Z","":"E'","":"Y'","":"T'","":"JH","":"I","":"L","":"X","":"C'","":"K","":"H","":"D'","":"GH","":"TW","":"M","":"Y","":"N","":"SH","":"CH","":"P","":"J","":"R'","":"S","":"V","":"T","":"R","":"C","":"P'","":"Q'","":"O''","":"F","":"EV","":"a","":"aa","":"a","":"u","":"i","":"e","":"a","":"b","":"h","":"t","":"th","":"j","":"h","":"kh","":"d","":"th","":"r","":"z","":"s","":"sh","":"s","":"dh","":"t","":"z","":"a","":"gh","":"f","":"q","":"k","":"l","":"m","":"n","":"h","":"w","":"a","":"y","":"an","":"on","":"en","":"a","":"u","":"e","":"","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"p","":"ch","":"zh","":"k","":"g","":"y","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"baht","":"a","":"b","":"g","":"d","":"e","":"v","":"z","":"t","":"i","":"k","":"l","":"m","":"n","":"o","":"p","":"zh","":"r","":"s","":"t","":"u","":"f","":"k","":"gh","":"q","":"sh","":"ch","":"ts","":"dz","":"ts","":"ch","":"kh","":"j","":"h","":"S","":"s","":"W","":"w","":"W","":"w","":"W","":"w","":"SS","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"I","":"i","":"I","":"i","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"Y","":"y","":"Y","":"y","":"Y","":"y","":"Y","":"y","":"-","":"'","":"'","":"\\"","":"\\"","":"\\"","":"+","":"*","":"...","":"ecu","":"cruzeiro","":"french franc","":"lira","":"mill","":"naira","":"peseta","":"rupee","":"won","":"new shequel","":"dong","":"euro","":"kip","":"tugrik","":"drachma","":"penny","":"peso","":"guarani","":"austral","":"hryvnia","":"cedi","":"kazakhstani tenge","":"indian rupee","":"turkish lira","":"russian ruble","":"bitcoin","":"sm","":"tm","":"d","":"delta","":"sum","":"infinity","":"love","":"yuan","":"yen","":"rial","":"laa","":"laa","":"lai","":"la"}`),r=JSON.parse('{"bg":{"":"Y","":"Ts","":"Sht","":"A","":"Y","":"y","":"ts","":"sht","":"a","":"y"},"de":{"":"AE","":"ae","":"OE","":"oe","":"UE","":"ue","":"ss","%":"prozent","&":"und","|":"oder","":"summe","":"unendlich","":"liebe"},"es":{"%":"por ciento","&":"y","<":"menor que",">":"mayor que","|":"o","":"centavos","":"libras","":"moneda","":"francos","":"suma","":"infinito","":"amor"},"fr":{"%":"pourcent","&":"et","<":"plus petit",">":"plus grand","|":"ou","":"centime","":"livre","":"devise","":"franc","":"somme","":"infini","":"amour"},"pt":{"%":"porcento","&":"e","<":"menor",">":"maior","|":"ou","":"centavo","":"soma","":"libra","":"infinito","":"amor"},"uk":{"":"Y","":"y","":"Y","":"y","":"Ts","":"ts","":"Kh","":"kh","":"Shch","":"shch","":"H","":"h"},"vi":{"":"D","":"d"},"da":{"":"OE","":"oe","":"AA","":"aa","%":"procent","&":"og","|":"eller","$":"dollar","<":"mindre end",">":"strre end"},"nb":{"&":"og","":"AA","":"AE","":"OE","":"aa","":"ae","":"oe"},"it":{"&":"e"},"nl":{"&":"en"},"sv":{"&":"och","":"AA","":"AE","":"OE","":"aa","":"ae","":"oe"}}');function i(s,a){if(typeof s!="string")throw new Error("slugify: string argument expected");a=typeof a=="string"?{replacement:a}:a||{};var o=r[a.locale]||{},d=a.replacement===void 0?"-":a.replacement,g=a.trim===void 0?!0:a.trim,b=s.normalize().split("").reduce(function(E,S){var I=o[S];return I===void 0&&(I=t[S]),I===void 0&&(I=S),I===d&&(I=" "),E+I.replace(a.remove||/[^\w\s$*_+~.()'"!\-:@]+/g,"")},"");return a.strict&&(b=b.replace(/[^A-Za-z0-9\s]/g,"")),g&&(b=b.trim()),b=b.replace(/\s+/g,d),a.lower&&(b=b.toLowerCase()),b}return i.extend=function(s){Object.assign(t,s)},i})}(t2)),t2.exports}var nfe=tfe();const rfe=el(nfe);var n2={exports:{}},ife=n2.exports,$R;function ofe(){return $R||($R=1,function(n,e){(function(t,r){r()})(ife,function(){function t(g,b){return typeof b>"u"?b={autoBom:!1}:typeof b!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),b={autoBom:!b}),b.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(g.type)?new Blob(["\uFEFF",g],{type:g.type}):g}function r(g,b,E){var S=new XMLHttpRequest;S.open("GET",g),S.responseType="blob",S.onload=function(){d(S.response,b,E)},S.onerror=function(){console.error("could not download file")},S.send()}function i(g){var b=new XMLHttpRequest;b.open("HEAD",g,!1);try{b.send()}catch{}return 200<=b.status&&299>=b.status}function s(g){try{g.dispatchEvent(new MouseEvent("click"))}catch{var b=document.createEvent("MouseEvents");b.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),g.dispatchEvent(b)}}var a=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof window=="object"&&window.global===window?window:void 0,o=a.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),d=a.saveAs||(typeof window!="object"||window!==a?function(){}:"download"in HTMLAnchorElement.prototype&&!o?function(g,b,E){var S=a.URL||a.webkitURL,I=document.createElement("a");b=b||g.name||"download",I.download=b,I.rel="noopener",typeof g=="string"?(I.href=g,I.origin===location.origin?s(I):i(I.href)?r(g,b,E):s(I,I.target="_blank")):(I.href=S.createObjectURL(g),setTimeout(function(){S.revokeObjectURL(I.href)},4e4),setTimeout(function(){s(I)},0))}:"msSaveOrOpenBlob"in navigator?function(g,b,E){if(b=b||g.name||"download",typeof g!="string")navigator.msSaveOrOpenBlob(t(g,E),b);else if(i(g))r(g,b,E);else{var S=document.createElement("a");S.href=g,S.target="_blank",setTimeout(function(){s(S)})}}:function(g,b,E,S){if(S=S||open("","_blank"),S&&(S.document.title=S.document.body.innerText="downloading..."),typeof g=="string")return r(g,b,E);var I=g.type==="application/octet-stream",P=/constructor/i.test(a.HTMLElement)||a.safari,z=/CriOS\/[\d]+/.test(navigator.userAgent);if((z||I&&P||o)&&typeof FileReader<"u"){var j=new FileReader;j.onloadend=function(){var ie=j.result;ie=z?ie:ie.replace(/^data:[^;]*;/,"data:attachment/file;"),S?S.location.href=ie:location=ie,S=null},j.readAsDataURL(g)}else{var q=a.URL||a.webkitURL,Y=q.createObjectURL(g);S?S.location=Y:location.href=Y,S=null,setTimeout(function(){q.revokeObjectURL(Y)},4e4)}});a.saveAs=d.saveAs=d,n.exports=d})}(n2)),n2.exports}var VR=ofe();const sfe="5.1.0",afe="get_your_own_OpIi9ZULNHzrESv6T2vL",lfe="b71f7f0ba4064f5eb9e903859a9cf5c6",bG={openmaptiles:afe,thunderforest:lfe};function lr(){var n="/home/runner/work/maputnik/maputnik/src/libs/style.ts",e="c162664fcb147ac7caff0efb860cd8a0c7d435d1",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/style.ts",statementMap:{0:{start:{line:3,column:19},end:{line:7,column:2}},1:{start:{line:9,column:2},end:{line:9,column:52}},2:{start:{line:12,column:2},end:{line:15,column:3}},3:{start:{line:13,column:4},end:{line:13,column:28}},4:{start:{line:14,column:4},end:{line:14,column:17}},5:{start:{line:16,column:2},end:{line:16,column:15}},6:{start:{line:19,column:24},end:{line:23,column:4}},7:{start:{line:20,column:25},end:{line:20,column:37}},8:{start:{line:21,column:4},end:{line:21,column:36}},9:{start:{line:22,column:4},end:{line:22,column:24}},10:{start:{line:24,column:2},end:{line:27,column:4}},11:{start:{line:30,column:2},end:{line:33,column:4}},12:{start:{line:36,column:2},end:{line:36,column:69}},13:{start:{line:39,column:2},end:{line:43,column:3}},14:{start:{line:39,column:15},end:{line:39,column:16}},15:{start:{line:40,column:4},end:{line:42,column:5}},16:{start:{line:41,column:6},end:{line:41,column:15}},17:{start:{line:44,column:2},end:{line:44,column:14}},18:{start:{line:47,column:19},end:{line:47,column:42}},19:{start:{line:48,column:20},end:{line:48,column:67}},20:{start:{line:49,column:2},end:{line:51,column:3}},21:{start:{line:50,column:4},end:{line:50,column:37}},22:{start:{line:52,column:2},end:{line:52,column:21}},23:{start:{line:55,column:17},end:{line:55,column:45}},24:{start:{line:56,column:2},end:{line:56,column:31}},25:{start:{line:56,column:15},end:{line:56,column:31}},26:{start:{line:57,column:2},end:{line:57,column:57}},27:{start:{line:57,column:41},end:{line:57,column:57}},28:{start:{line:58,column:23},end:{line:58,column:33}},29:{start:{line:59,column:2},end:{line:63,column:3}},30:{start:{line:60,column:4},end:{line:60,column:37}},31:{start:{line:61,column:9},end:{line:63,column:3}},32:{start:{line:62,column:4},end:{line:62,column:30}},33:{start:{line:64,column:22},end:{line:64,column:68}},34:{start:{line:65,column:2},end:{line:67,column:3}},35:{start:{line:66,column:4},end:{line:66,column:20}},36:{start:{line:69,column:2},end:{line:73,column:3}},37:{start:{line:70,column:4},end:{line:70,column:55}},38:{start:{line:72,column:4},end:{line:72,column:57}},39:{start:{line:74,column:25},end:{line:80,column:3}},40:{start:{line:81,column:23},end:{line:84,column:3}},41:{start:{line:85,column:2},end:{line:85,column:22}},42:{start:{line:88,column:21},end:{line:88,column:29}},43:{start:{line:89,column:2},end:{line:91,column:5}},44:{start:{line:90,column:4},end:{line:90,column:76}},45:{start:{line:92,column:2},end:{line:100,column:3}},46:{start:{line:93,column:27},end:{line:93,column:73}},47:{start:{line:94,column:4},end:{line:99,column:5}},48:{start:{line:95,column:6},end:{line:98,column:8}},49:{start:{line:101,column:2},end:{line:101,column:22}},50:{start:{line:104,column:26},end:{line:106,column:3}},51:{start:{line:107,column:2},end:{line:107,column:63}},52:{start:{line:108,column:2},end:{line:108,column:64}},53:{start:{line:109,column:2},end:{line:109,column:57}},54:{start:{line:110,column:2},end:{line:113,column:4}}},fnMap:{0:{name:"generateId",decl:{start:{line:8,column:9},end:{line:8,column:19}},loc:{start:{line:8,column:22},end:{line:10,column:1}},line:8},1:{name:"ensureHasId",decl:{start:{line:11,column:9},end:{line:11,column:20}},loc:{start:{line:11,column:28},end:{line:17,column:1}},line:11},2:{name:"ensureHasNoInteractive",decl:{start:{line:18,column:9},end:{line:18,column:31}},loc:{start:{line:18,column:39},end:{line:28,column:1}},line:18},3:{name:"(anonymous_3)",decl:{start:{line:19,column:41},end:{line:19,column:42}},loc:{start:{line:19,column:52},end:{line:23,column:3}},line:19},4:{name:"ensureHasNoRefs",decl:{start:{line:29,column:9},end:{line:29,column:24}},loc:{start:{line:29,column:32},end:{line:34,column:1}},line:29},5:{name:"ensureStyleValidity",decl:{start:{line:35,column:9},end:{line:35,column:28}},loc:{start:{line:35,column:36},end:{line:37,column:1}},line:35},6:{name:"indexOfLayer",decl:{start:{line:38,column:9},end:{line:38,column:21}},loc:{start:{line:38,column:39},end:{line:45,column:1}},line:38},7:{name:"getAccessToken",decl:{start:{line:46,column:9},end:{line:46,column:23}},loc:{start:{line:46,column:52},end:{line:53,column:1}},line:46},8:{name:"replaceSourceAccessToken",decl:{start:{line:54,column:9},end:{line:54,column:33}},loc:{start:{line:54,column:67},end:{line:86,column:1}},line:54},9:{name:"replaceAccessTokens",decl:{start:{line:87,column:9},end:{line:87,column:28}},loc:{start:{line:87,column:50},end:{line:102,column:1}},line:87},10:{name:"(anonymous_10)",decl:{start:{line:89,column:40},end:{line:89,column:41}},loc:{start:{line:89,column:56},end:{line:91,column:3}},line:89},11:{name:"stripAccessTokens",decl:{start:{line:103,column:9},end:{line:103,column:26}},loc:{start:{line:103,column:37},end:{line:114,column:1}},line:103}},branchMap:{0:{loc:{start:{line:12,column:2},end:{line:15,column:3}},type:"if",locations:[{start:{line:12,column:2},end:{line:15,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:12},1:{loc:{start:{line:12,column:6},end:{line:12,column:35}},type:"binary-expr",locations:[{start:{line:12,column:6},end:{line:12,column:22}},{start:{line:12,column:26},end:{line:12,column:35}}],line:12},2:{loc:{start:{line:40,column:4},end:{line:42,column:5}},type:"if",locations:[{start:{line:40,column:4},end:{line:42,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:40},3:{loc:{start:{line:47,column:19},end:{line:47,column:42}},type:"binary-expr",locations:[{start:{line:47,column:19},end:{line:47,column:36}},{start:{line:47,column:40},end:{line:47,column:42}}],line:47},4:{loc:{start:{line:49,column:2},end:{line:51,column:3}},type:"if",locations:[{start:{line:49,column:2},end:{line:51,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:49},5:{loc:{start:{line:49,column:6},end:{line:49,column:40}},type:"binary-expr",locations:[{start:{line:49,column:6},end:{line:49,column:24}},{start:{line:49,column:28},end:{line:49,column:40}}],line:49},6:{loc:{start:{line:54,column:56},end:{line:54,column:65}},type:"default-arg",locations:[{start:{line:54,column:63},end:{line:54,column:65}}],line:54},7:{loc:{start:{line:56,column:2},end:{line:56,column:31}},type:"if",locations:[{start:{line:56,column:2},end:{line:56,column:31}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:56},8:{loc:{start:{line:57,column:2},end:{line:57,column:57}},type:"if",locations:[{start:{line:57,column:2},end:{line:57,column:57}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:57},9:{loc:{start:{line:57,column:6},end:{line:57,column:39}},type:"binary-expr",locations:[{start:{line:57,column:6},end:{line:57,column:24}},{start:{line:57,column:28},end:{line:57,column:39}}],line:57},10:{loc:{start:{line:59,column:2},end:{line:63,column:3}},type:"if",locations:[{start:{line:59,column:2},end:{line:63,column:3}},{start:{line:61,column:9},end:{line:63,column:3}}],line:59},11:{loc:{start:{line:59,column:6},end:{line:59,column:89}},type:"binary-expr",locations:[{start:{line:59,column:6},end:{line:59,column:46}},{start:{line:59,column:50},end:{line:59,column:89}}],line:59},12:{loc:{start:{line:61,column:9},end:{line:63,column:3}},type:"if",locations:[{start:{line:61,column:9},end:{line:63,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:61},13:{loc:{start:{line:61,column:13},end:{line:61,column:70}},type:"binary-expr",locations:[{start:{line:61,column:13},end:{line:61,column:28}},{start:{line:61,column:32},end:{line:61,column:70}}],line:61},14:{loc:{start:{line:65,column:2},end:{line:67,column:3}},type:"if",locations:[{start:{line:65,column:2},end:{line:67,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:65},15:{loc:{start:{line:69,column:2},end:{line:73,column:3}},type:"if",locations:[{start:{line:69,column:2},end:{line:73,column:3}},{start:{line:71,column:9},end:{line:73,column:3}}],line:69},16:{loc:{start:{line:87,column:39},end:{line:87,column:48}},type:"default-arg",locations:[{start:{line:87,column:46},end:{line:87,column:48}}],line:87},17:{loc:{start:{line:92,column:2},end:{line:100,column:3}},type:"if",locations:[{start:{line:92,column:2},end:{line:100,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:92},18:{loc:{start:{line:92,column:6},end:{line:92,column:114}},type:"binary-expr",locations:[{start:{line:92,column:6},end:{line:92,column:21}},{start:{line:92,column:26},end:{line:92,column:69}},{start:{line:92,column:73},end:{line:92,column:113}}],line:92},19:{loc:{start:{line:94,column:4},end:{line:99,column:5}},type:"if",locations:[{start:{line:94,column:4},end:{line:99,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:94}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0],17:[0,0],18:[0,0,0],19:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/style.ts"],names:[],mappings:"AAAA,SAAQ,mBAAkB;AAE1B,OAAO,YAAY;AAGnB,MAAM,aAAa,oBAAoB;AAAA,EACrC,SAAS;AAAA,EACT,SAAS,CAAC;AAAA,EACV,QAAQ,CAAC;AACX,CAAC;AAED,SAAS,aAAa;AACpB,SAAO,KAAK,OAAO,EAAE,SAAS,EAAE,EAAE,UAAU,GAAG,CAAC;AAClD;AAEA,SAAS,YAAY,OAAkF;AACrG,MAAG,EAAE,QAAQ,UAAU,CAAC,MAAM,IAAI;AAChC,UAAM,KAAK,WAAW;AACtB,WAAO;AAAA,EACT;AACA,SAAO;AACT;AAEA,SAAS,uBAAuB,OAA0C;AACxE,QAAM,gBAAgB,MAAM,OAAO,IAAI,WAAS;AAC9C,UAAM,eAA2D,EAAE,GAAG,MAAM;AAC5E,WAAO,aAAa;AACpB,WAAO;AAAA,EACT,CAAC;AAED,SAAO;AAAA,IACL,GAAG;AAAA,IACH,QAAQ;AAAA,EACV;AACF;AAEA,SAAS,gBAAgB,OAA0C;AACjE,SAAO;AAAA,IACL,GAAG;AAAA,IACH,QAAQ,YAAY,MAAM,MAAM;AAAA,EAClC;AACF;AAEA,SAAS,oBAAoB,OAAgE;AAC3F,SAAO,uBAAuB,gBAAgB,YAAY,KAAK,CAAC,CAAC;AACnE;AAEA,SAAS,aAAa,QAA8B,SAAiB;AACnE,WAAS,IAAI,GAAG,IAAI,OAAO,QAAQ,KAAK;AACtC,QAAG,OAAO,CAAC,EAAE,OAAO,SAAS;AAC3B,aAAO;AAAA,IACT;AAAA,EACF;AACA,SAAO;AACT;AAEA,SAAS,eAAe,YAAoB,UAA8B,MAAiC;AACzG,QAAM,WAAW,SAAS,YAAY,CAAC;AACvC,MAAI,cAAc,SAAS,YAAY,UAAU,eAAe;AAEhE,MAAG,KAAK,iBAAiB,CAAC,aAAa;AACrC,kBAAc,OAAO,UAAiC;AAAA,EACxD;AAEA,SAAO;AACT;AAEA,SAAS,yBAAyB,UAA8B,YAAoB,OAAK,CAAC,GAAG;AAC3F,QAAM,SAAS,SAAS,QAAQ,UAAU;AAC1C,MAAG,CAAC,OAAQ,QAAO;AACnB,MAAG,EAAE,SAAS,WAAW,CAAC,OAAO,IAAK,QAAO;AAE7C,MAAI,iBAAiB;AACrB,MAAG,eAAe,6BAA6B,eAAe,0BAA0B;AACtF,qBAAiB;AAAA,EACnB,WACU,SAAS,UAAW,OAAO,KAAK,MAAM,mBAAmB,GAAG;AAGpE,qBAAiB;AAAA,EACnB;AAEA,QAAM,cAAc,eAAe,gBAAgB,UAAU,IAAI;AAEjE,MAAG,CAAC,aAAa;AAEf,WAAO;AAAA,EACT;AAEA,MAAI;AACJ,MAAI,kBAAkB,UAAU;AAI9B,gBAAY,GAAG,OAAO,GAAG,YAAY,WAAW;AAAA,EAClD,OAAO;AACL,gBAAY,OAAO,IAAI,QAAQ,SAAS,WAAW;AAAA,EACrD;AAEA,QAAM,iBAAiB;AAAA,IACrB,GAAG,SAAS;AAAA,IACZ,CAAC,UAAU,GAAG;AAAA,MACZ,GAAG;AAAA,MACH,KAAK;AAAA,IACP;AAAA,EACF;AACA,QAAM,eAAe;AAAA,IACnB,GAAG;AAAA,IACH,SAAS;AAAA,EACX;AACA,SAAO;AACT;AAEA,SAAS,oBAAoB,UAA8B,OAAK,CAAC,GAAG;AAClE,MAAI,eAAe;AAEnB,SAAO,KAAK,SAAS,OAAO,EAAE,QAAQ,CAAC,eAAe;AACpD,mBAAe,yBAAyB,cAAc,YAAY,IAAI;AAAA,EACxE,CAAC;AAED,MAAI,SAAS,WAAW,SAAS,OAAO,MAAM,oBAAoB,KAAK,SAAS,OAAO,MAAM,iBAAiB,IAAI;AAChH,UAAM,iBAAiB,eAAe,gBAAgB,UAAU,IAAI;AACpE,QAAI,gBAAgB;AAClB,qBAAe;AAAA,QACb,GAAG;AAAA,QACH,QAAQ,SAAS,OAAO,QAAQ,SAAS,cAAc;AAAA,MACzD;AAAA,IACF;AAAA,EACF;AAEA,SAAO;AACT;AAEA,SAAS,kBAAkB,UAA8B;AACvD,QAAM,kBAAkB;AAAA,IACtB,GAAG,SAAS;AAAA,EACd;AACA,SAAO,gBAAgB,oCAAoC;AAC3D,SAAO,gBAAgB,qCAAqC;AAC5D,SAAO,gBAAgB,8BAA8B;AACrD,SAAO;AAAA,IACL,GAAG;AAAA,IACH,UAAU;AAAA,EACZ;AACF;AAEA,eAAe;AAAA,EACb;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"c162664fcb147ac7caff0efb860cd8a0c7d435d1"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return lr=function(){return a},a}lr();const ufe=(lr().s[0]++,wG({version:8,sources:{},layers:[]}));function xG(){return lr().f[0]++,lr().s[1]++,Math.random().toString(36).substring(2,9)}function Afe(n){return lr().f[1]++,lr().s[2]++,lr().b[1][0]++,!("id"in n)||(lr().b[1][1]++,!n.id)?(lr().b[0][0]++,lr().s[3]++,n.id=xG(),lr().s[4]++,n):(lr().b[0][1]++,lr().s[5]++,n)}function cfe(n){lr().f[2]++;const e=(lr().s[6]++,n.layers.map(t=>{lr().f[3]++;const r=(lr().s[7]++,{...t});return lr().s[8]++,delete r.interactive,lr().s[9]++,r}));return lr().s[10]++,{...n,layers:e}}function dfe(n){return lr().f[4]++,lr().s[11]++,{...n,layers:R$(n.layers)}}function wG(n){return lr().f[5]++,lr().s[12]++,cfe(dfe(Afe(n)))}function hfe(n,e){lr().f[6]++,lr().s[13]++;for(let t=(lr().s[14]++,0);t<n.length;t++){if(lr().s[15]++,n[t].id===e)return lr().b[2][0]++,lr().s[16]++,t;lr().b[2][1]++}return lr().s[17]++,null}function hI(n,e,t){lr().f[7]++;const r=(lr().s[18]++,lr().b[3][0]++,e.metadata||(lr().b[3][1]++,{}));let i=(lr().s[19]++,r[`maputnik:${n}_access_token`]);return lr().s[20]++,lr().b[5][0]++,t.allowFallback&&(lr().b[5][1]++,!i)?(lr().b[4][0]++,lr().s[21]++,i=bG[n]):lr().b[4][1]++,lr().s[22]++,i}function ffe(n,e,t=(lr().b[6][0]++,{})){var g;lr().f[8]++;const r=(lr().s[23]++,n.sources[e]);if(lr().s[24]++,r)lr().b[7][1]++;else return lr().b[7][0]++,lr().s[25]++,n;if(lr().s[26]++,lr().b[9][0]++,!("url"in r)||(lr().b[9][1]++,!r.url))return lr().b[8][0]++,lr().s[27]++,n;lr().b[8][1]++;let i=(lr().s[28]++,e);lr().s[29]++,lr().b[11][0]++,e==="thunderforest_transport"||(lr().b[11][1]++,e==="thunderforest_outdoors")?(lr().b[10][0]++,lr().s[30]++,i="thunderforest"):(lr().b[10][1]++,lr().s[31]++,lr().b[13][0]++,"url"in r&&(lr().b[13][1]++,(g=r.url)==null?void 0:g.match(/\.stadiamaps\.com/))?(lr().b[12][0]++,lr().s[32]++,i="stadia"):lr().b[12][1]++);const s=(lr().s[33]++,hI(i,n,t));if(lr().s[34]++,s)lr().b[14][1]++;else return lr().b[14][0]++,lr().s[35]++,n;let a;lr().s[36]++,i=="stadia"?(lr().b[15][0]++,lr().s[37]++,a=`${r.url}?api_key=${s}`):(lr().b[15][1]++,lr().s[38]++,a=r.url.replace("{key}",s));const o=(lr().s[39]++,{...n.sources,[e]:{...r,url:a}}),d=(lr().s[40]++,{...n,sources:o});return lr().s[41]++,d}function pfe(n,e=(lr().b[16][0]++,{})){lr().f[9]++;let t=(lr().s[42]++,n);if(lr().s[43]++,Object.keys(n.sources).forEach(r=>{lr().f[10]++,lr().s[44]++,t=ffe(t,r,e)}),lr().s[45]++,lr().b[18][0]++,n.glyphs&&(lr().b[18][1]++,n.glyphs.match(/\.tilehosting\.com/)||(lr().b[18][2]++,n.glyphs.match(/\.maptiler\.com/)))){lr().b[17][0]++;const r=(lr().s[46]++,hI("openmaptiles",n,e));lr().s[47]++,r?(lr().b[19][0]++,lr().s[48]++,t={...t,glyphs:n.glyphs.replace("{key}",r)}):lr().b[19][1]++}else lr().b[17][1]++;return lr().s[49]++,t}function mfe(n){lr().f[11]++;const e=(lr().s[50]++,{...n.metadata});return lr().s[51]++,delete e["maputnik:openmaptiles_access_token"],lr().s[52]++,delete e["maputnik:thunderforest_access_token"],lr().s[53]++,delete e["maputnik:stadia_access_token"],lr().s[54]++,{...n,metadata:e}}const _c={ensureStyleValidity:wG,emptyStyle:ufe,indexOfLayer:hfe,generateId:xG,getAccessToken:hI,replaceAccessTokens:pfe,stripAccessTokens:mfe};function Qr(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalExport.tsx",e="66cf81ab709608eec5a644a6a17a019c5afe48ce",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalExport.tsx",statementMap:{0:{start:{line:14,column:28},end:{line:14,column:35}},1:{start:{line:15,column:36},end:{line:15,column:83}},2:{start:{line:18,column:4},end:{line:22,column:6}},3:{start:{line:25,column:4},end:{line:33,column:5}},4:{start:{line:26,column:6},end:{line:30,column:9}},5:{start:{line:32,column:6},end:{line:32,column:36}},6:{start:{line:36,column:23},end:{line:36,column:44}},7:{start:{line:37,column:22},end:{line:37,column:69}},8:{start:{line:38,column:17},end:{line:62,column:1}},9:{start:{line:63,column:17},end:{line:63,column:70}},10:{start:{line:64,column:23},end:{line:64,column:40}},11:{start:{line:65,column:4},end:{line:65,column:39}},12:{start:{line:68,column:23},end:{line:68,column:44}},13:{start:{line:69,column:4},end:{line:74,column:5}},14:{start:{line:70,column:19},end:{line:70,column:85}},15:{start:{line:71,column:25},end:{line:71,column:42}},16:{start:{line:72,column:6},end:{line:72,column:41}},17:{start:{line:73,column:6},end:{line:73,column:13}},18:{start:{line:75,column:21},end:{line:75,column:42}},19:{start:{line:76,column:4},end:{line:80,column:5}},20:{start:{line:77,column:6},end:{line:77,column:49}},21:{start:{line:78,column:6},end:{line:78,column:45}},22:{start:{line:79,column:6},end:{line:79,column:37}},23:{start:{line:79,column:30},end:{line:79,column:37}},24:{start:{line:81,column:21},end:{line:81,column:54}},25:{start:{line:82,column:4},end:{line:82,column:37}},26:{start:{line:83,column:4},end:{line:83,column:27}},27:{start:{line:84,column:4},end:{line:84,column:30}},28:{start:{line:87,column:23},end:{line:87,column:44}},29:{start:{line:88,column:23},end:{line:88,column:52}},30:{start:{line:89,column:4},end:{line:89,column:43}},31:{start:{line:90,column:4},end:{line:90,column:35}},32:{start:{line:90,column:28},end:{line:90,column:35}},33:{start:{line:91,column:21},end:{line:91,column:54}},34:{start:{line:92,column:4},end:{line:92,column:37}},35:{start:{line:93,column:4},end:{line:93,column:27}},36:{start:{line:94,column:4},end:{line:94,column:30}},37:{start:{line:97,column:23},end:{line:105,column:5}},38:{start:{line:106,column:23},end:{line:106,column:66}},39:{start:{line:107,column:4},end:{line:107,column:43}},40:{start:{line:108,column:4},end:{line:108,column:22}},41:{start:{line:111,column:25},end:{line:117,column:5}},42:{start:{line:118,column:4},end:{line:118,column:44}},43:{start:{line:121,column:14},end:{line:121,column:26}},44:{start:{line:122,column:16},end:{line:122,column:38}},45:{start:{line:123,column:4},end:{line:179,column:6}},46:{start:{line:182,column:20},end:{line:182,column:58}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:17,column:2},end:{line:17,column:3}},loc:{start:{line:17,column:19},end:{line:23,column:3}},line:17},1:{name:"(anonymous_1)",decl:{start:{line:24,column:2},end:{line:24,column:3}},loc:{start:{line:24,column:15},end:{line:34,column:3}},line:24},2:{name:"(anonymous_2)",decl:{start:{line:35,column:2},end:{line:35,column:3}},loc:{start:{line:35,column:15},end:{line:66,column:3}},line:35},3:{name:"(anonymous_3)",decl:{start:{line:67,column:2},end:{line:67,column:3}},loc:{start:{line:67,column:20},end:{line:85,column:3}},line:67},4:{name:"(anonymous_4)",decl:{start:{line:86,column:2},end:{line:86,column:3}},loc:{start:{line:86,column:22},end:{line:95,column:3}},line:86},5:{name:"(anonymous_5)",decl:{start:{line:96,column:2},end:{line:96,column:3}},loc:{start:{line:96,column:27},end:{line:109,column:3}},line:96},6:{name:"(anonymous_6)",decl:{start:{line:110,column:2},end:{line:110,column:3}},loc:{start:{line:110,column:42},end:{line:119,column:3}},line:110},7:{name:"(anonymous_7)",decl:{start:{line:120,column:2},end:{line:120,column:3}},loc:{start:{line:120,column:11},end:{line:180,column:3}},line:120}},branchMap:{0:{loc:{start:{line:25,column:4},end:{line:33,column:5}},type:"if",locations:[{start:{line:25,column:4},end:{line:33,column:5}},{start:{line:31,column:11},end:{line:33,column:5}}],line:25},1:{loc:{start:{line:37,column:22},end:{line:37,column:69}},type:"binary-expr",locations:[{start:{line:37,column:22},end:{line:37,column:46}},{start:{line:37,column:50},end:{line:37,column:69}}],line:37},2:{loc:{start:{line:69,column:4},end:{line:74,column:5}},type:"if",locations:[{start:{line:69,column:4},end:{line:74,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:69},3:{loc:{start:{line:76,column:4},end:{line:80,column:5}},type:"if",locations:[{start:{line:76,column:4},end:{line:80,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:76},4:{loc:{start:{line:79,column:6},end:{line:79,column:37}},type:"if",locations:[{start:{line:79,column:6},end:{line:79,column:37}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:79},5:{loc:{start:{line:90,column:4},end:{line:90,column:35}},type:"if",locations:[{start:{line:90,column:4},end:{line:90,column:35}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:90},6:{loc:{start:{line:140,column:24},end:{line:140,column:58}},type:"binary-expr",locations:[{start:{line:140,column:24},end:{line:140,column:52}},{start:{line:140,column:56},end:{line:140,column:58}}],line:140},7:{loc:{start:{line:149,column:24},end:{line:149,column:58}},type:"binary-expr",locations:[{start:{line:149,column:24},end:{line:149,column:52}},{start:{line:149,column:56},end:{line:149,column:58}}],line:149},8:{loc:{start:{line:158,column:24},end:{line:158,column:58}},type:"binary-expr",locations:[{start:{line:158,column:24},end:{line:158,column:52}},{start:{line:158,column:56},end:{line:158,column:58}}],line:158},9:{loc:{start:{line:168,column:12},end:{line:171,column:16}},type:"binary-expr",locations:[{start:{line:168,column:12},end:{line:168,column:39}},{start:{line:168,column:59},end:{line:171,column:16}}],line:168}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalExport.tsx"],names:[],mappings:"AAoKQ,cAKA,YALA;AApKR,OAAO,WAAW;AAClB,OAAO,aAAa;AACpB,SAAQ,cAAa;AACrB,SAAQ,eAAc;AACtB,SAAQ,cAAa;AAErB,SAAQ,OAAO,cAAa;AAC5B,SAAyB,uBAAsB;AAE/C,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,OAAO,WAAW;AAClB,OAAO,yBAAyB;AAGhC,MAAM,sBAAsB;AAC5B,MAAM,8BAA8B,OAAO,OAAO,uBAAuB;AAazE,MAAM,4BAA4B,MAAM,UAAoC;AAAA,EAE1E,iBAAiB;AACf,WAAO;AAAA,MACL,MAAM;AAAA,QACJ,MAAM,oBAAoB,KAAK,MAAM,QAAQ;AAAA,MAC/C;AAAA,IACF;AAAA,EACF;AAAA,EAEA,aAAa;AACX,QAAI,KAAK,MAAM,SAAS,MAAM;AAC5B,aAAO,QAAQ,KAAK,MAAM,SAAS,MAAM;AAAA,QACvC,aAAa;AAAA,QACb,QAAQ;AAAA,QACR,OAAO;AAAA,MACT,CAAC;AAAA,IACH,OAAO;AACL,aAAO,KAAK,MAAM,SAAS;AAAA,IAC7B;AAAA,EACF;AAAA,EAEA,aAAa;AACX,UAAM,aAAa,KAAK,eAAe;AACvC,UAAM,YAAY,KAAK,MAAM,SAAS,QAAQ,KAAK,MAAM,EAAE,KAAK;AAChE,UAAM,OAAO;AAAA;AAAA;AAAA;AAAA,WAIN,SAAS;AAAA;AAAA,+CAE2B,mBAAmB;AAAA,8CACpB,mBAAmB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAW/C,UAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQxB,UAAM,OAAO,IAAI,KAAK,CAAC,IAAI,GAAG,EAAC,MAAM,0BAAyB,CAAC;AAC/D,UAAM,aAAa,KAAK,WAAW;AACnC,WAAO,MAAM,aAAa,OAAO;AAAA,EACnC;AAAA,EAEA,MAAM,YAAY;AAChB,UAAM,aAAa,KAAK,eAAe;AAIvC,QAAI,CAAC,6BAA6B;AAChC,YAAM,OAAO,IAAI,KAAK,CAAC,UAAU,GAAG,EAAC,MAAM,iCAAgC,CAAC;AAC5E,YAAM,aAAa,KAAK,WAAW;AACnC,aAAO,MAAM,aAAa,OAAO;AACjC;AAAA,IACF;AAEA,QAAI,aAAa,KAAK,MAAM;AAC5B,QAAI,cAAc,MAAM;AACtB,mBAAa,MAAM,KAAK,iBAAiB;AACzC,WAAK,MAAM,gBAAgB,UAAU;AACrC,UAAI,cAAc,KAAM;AAAA,IAC1B;AAEA,UAAM,WAAW,MAAM,WAAW,eAAe;AACjD,UAAM,SAAS,MAAM,UAAU;AAC/B,UAAM,SAAS,MAAM;AACrB,SAAK,MAAM,aAAa;AAAA,EAC1B;AAAA,EAEA,MAAM,cAAc;AAClB,UAAM,aAAa,KAAK,eAAe;AAEvC,UAAM,aAAa,MAAM,KAAK,iBAAiB;AAC/C,SAAK,MAAM,gBAAgB,UAAU;AACrC,QAAI,cAAc,KAAM;AAExB,UAAM,WAAW,MAAM,WAAW,eAAe;AACjD,UAAM,SAAS,MAAM,UAAU;AAC/B,UAAM,SAAS,MAAM;AACrB,SAAK,MAAM,aAAa;AAAA,EAC1B;AAAA,EAEA,MAAM,mBAAyD;AAC7D,UAAM,aAAoC;AAAA,MACxC,OAAO;AAAA,QACL;AAAA,UACE,aAAa;AAAA,UACb,QAAQ,EAAC,oBAAoB,CAAC,OAAO,EAAC;AAAA,QACxC;AAAA,MACF;AAAA,MACA,eAAe,KAAK,WAAW;AAAA,IACjC;AAEA,UAAM,aAAa,MAAM,OAAO,mBAAmB,UAAU;AAC7D,SAAK,MAAM,gBAAgB,UAAU;AACrC,WAAO;AAAA,EACT;AAAA,EAEA,uBAAuB,UAAkB,OAAY;AACnD,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,UAAU;AAAA,QACR,GAAG,KAAK,MAAM,SAAS;AAAA,QACvB,CAAC,QAAQ,GAAG;AAAA,MACd;AAAA,IACF;AACA,SAAK,MAAM,eAAe,YAAY;AAAA,EACxC;AAAA,EAGA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,MAAM,oBAAoB,CAAC;AACjC,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,YAAY;AAAA,QACrB,WAAU;AAAA,QAGV,+BAAC,aAAQ,WAAU,0BACjB;AAAA,8BAAC,QAAI,YAAE,YAAY,GAAE;AAAA,UACrB,oBAAC,OACE,YAAE,uCAAuC,GAC5C;AAAA,UAEA,qBAAC,SACC;AAAA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,IAAI,SAAS,sBAAsB;AAAA,gBAC1C,WAAW,IAAI,SAAS;AAAA,gBACxB,QAAQ,KAAK,MAAM,SAAS,YAAY,CAAC,GAAU,oCAAoC;AAAA,gBACvF,UAAU,KAAK,uBAAuB,KAAK,MAAM,oCAAoC;AAAA;AAAA,YACvF;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,IAAI,SAAS,2BAA2B;AAAA,gBAC/C,WAAW,IAAI,SAAS;AAAA,gBACxB,QAAQ,KAAK,MAAM,SAAS,YAAY,CAAC,GAAU,qCAAqC;AAAA,gBACxF,UAAU,KAAK,uBAAuB,KAAK,MAAM,qCAAqC;AAAA;AAAA,YACxF;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,IAAI,SAAS,oBAAoB;AAAA,gBACxC,WAAW,IAAI,SAAS;AAAA,gBACxB,QAAQ,KAAK,MAAM,SAAS,YAAY,CAAC,GAAU,8BAA8B;AAAA,gBACjF,UAAU,KAAK,uBAAuB,KAAK,MAAM,8BAA8B;AAAA;AAAA,YACjF;AAAA,aACF;AAAA,UAEA,qBAAC,SAAI,WAAU,iCACb;AAAA,iCAAC,eAAY,SAAS,KAAK,UAAU,KAAK,IAAI,GAC5C;AAAA,kCAAC,UAAM;AAAA,cACN,EAAE,MAAM;AAAA,eACX;AAAA,YACC,+BACC,qBAAC,eAAY,SAAS,KAAK,YAAY,KAAK,IAAI,GAC9C;AAAA,kCAAC,UAAM;AAAA,cACN,EAAE,SAAS;AAAA,eACd;AAAA,YAGF,qBAAC,eAAY,SAAS,KAAK,WAAW,KAAK,IAAI,GAC7C;AAAA,kCAAC,SAAK;AAAA,cACL,EAAE,aAAa;AAAA,eAClB;AAAA,aACF;AAAA,WACF;AAAA;AAAA,IAEF;AAAA,EACF;AACF;AAEA,MAAM,cAAc,gBAAgB,EAAE,mBAAmB;AACzD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"66cf81ab709608eec5a644a6a17a019c5afe48ce"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Qr=function(){return a},a}Qr();const HR=(Qr().s[0]++,sfe),ZR=(Qr().s[1]++,typeof window.showSaveFilePicker=="function");class gfe extends nr.Component{tokenizedStyle(){return Qr().f[0]++,Qr().s[2]++,GU(_c.stripAccessTokens(_c.replaceAccessTokens(this.props.mapStyle)))}exportName(){return Qr().f[1]++,Qr().s[3]++,this.props.mapStyle.name?(Qr().b[0][0]++,Qr().s[4]++,rfe(this.props.mapStyle.name,{replacement:"_",remove:/[*\-+~.()'"!:]/g,lower:!0})):(Qr().b[0][1]++,Qr().s[5]++,this.props.mapStyle.id)}createHtml(){Qr().f[2]++;const e=(Qr().s[6]++,this.tokenizedStyle()),t=(Qr().s[7]++,Qr().b[1][0]++,this.props.mapStyle.name||(Qr().b[1][1]++,this.props.t("Map"))),r=(Qr().s[8]++,`<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>${t}</title>
  <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />
  <script src="https://unpkg.com/maplibre-gl@${HR}/dist/maplibre-gl.js"><\/script>
  <link href="https://unpkg.com/maplibre-gl@${HR}/dist/maplibre-gl.css" rel="stylesheet" />
  <style>
    body { margin: 0; padding: 0; }
    #map { position: absolute; top: 0; bottom: 0; width: 100%; }
  </style>
</head>
<body>
  <div id="map"></div>
  <script>
      const map = new maplibregl.Map({
         container: 'map',
         style: ${e},
      });
      map.addControl(new maplibregl.NavigationControl());
  <\/script>
</body>
</html>
`),i=(Qr().s[9]++,new Blob([r],{type:"text/html;charset=utf-8"})),s=(Qr().s[10]++,this.exportName());Qr().s[11]++,VR.saveAs(i,s+".html")}async saveStyle(){Qr().f[3]++;const e=(Qr().s[12]++,this.tokenizedStyle());if(Qr().s[13]++,ZR)Qr().b[2][1]++;else{Qr().b[2][0]++;const i=(Qr().s[14]++,new Blob([e],{type:"application/json;charset=utf-8"})),s=(Qr().s[15]++,this.exportName());Qr().s[16]++,VR.saveAs(i,s+".json"),Qr().s[17]++;return}let t=(Qr().s[18]++,this.props.fileHandle);if(Qr().s[19]++,t==null)if(Qr().b[3][0]++,Qr().s[20]++,t=await this.createFileHandle(),Qr().s[21]++,this.props.onSetFileHandle(t),Qr().s[22]++,t==null){Qr().b[4][0]++,Qr().s[23]++;return}else Qr().b[4][1]++;else Qr().b[3][1]++;const r=(Qr().s[24]++,await t.createWritable());Qr().s[25]++,await r.write(e),Qr().s[26]++,await r.close(),Qr().s[27]++,this.props.onOpenToggle()}async saveStyleAs(){Qr().f[4]++;const e=(Qr().s[28]++,this.tokenizedStyle()),t=(Qr().s[29]++,await this.createFileHandle());if(Qr().s[30]++,this.props.onSetFileHandle(t),Qr().s[31]++,t==null){Qr().b[5][0]++,Qr().s[32]++;return}else Qr().b[5][1]++;const r=(Qr().s[33]++,await t.createWritable());Qr().s[34]++,await r.write(e),Qr().s[35]++,await r.close(),Qr().s[36]++,this.props.onOpenToggle()}async createFileHandle(){Qr().f[5]++;const e=(Qr().s[37]++,{types:[{description:"json",accept:{"application/json":[".json"]}}],suggestedName:this.exportName()}),t=(Qr().s[38]++,await window.showSaveFilePicker(e));return Qr().s[39]++,this.props.onSetFileHandle(t),Qr().s[40]++,t}changeMetadataProperty(e,t){Qr().f[6]++;const r=(Qr().s[41]++,{...this.props.mapStyle,metadata:{...this.props.mapStyle.metadata,[e]:t}});Qr().s[42]++,this.props.onStyleChanged(r)}render(){Qr().f[7]++;const e=(Qr().s[43]++,this.props.t),t=(Qr().s[44]++,_G(e));return Qr().s[45]++,ue.jsx(G0,{"data-wd-key":"modal:export",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Save Style"),className:"maputnik-export-modal",children:ue.jsxs("section",{className:"maputnik-modal-section",children:[ue.jsx("h1",{children:e("Save Style")}),ue.jsx("p",{children:e("Save the JSON style to your computer.")}),ue.jsxs("div",{children:[ue.jsx(Yp,{label:t.maputnik.maptiler_access_token.label,fieldSpec:t.maputnik.maptiler_access_token,value:(Qr().b[6][0]++,this.props.mapStyle.metadata||(Qr().b[6][1]++,{}))["maputnik:openmaptiles_access_token"],onChange:this.changeMetadataProperty.bind(this,"maputnik:openmaptiles_access_token")}),ue.jsx(Yp,{label:t.maputnik.thunderforest_access_token.label,fieldSpec:t.maputnik.thunderforest_access_token,value:(Qr().b[7][0]++,this.props.mapStyle.metadata||(Qr().b[7][1]++,{}))["maputnik:thunderforest_access_token"],onChange:this.changeMetadataProperty.bind(this,"maputnik:thunderforest_access_token")}),ue.jsx(Yp,{label:t.maputnik.stadia_access_token.label,fieldSpec:t.maputnik.stadia_access_token,value:(Qr().b[8][0]++,this.props.mapStyle.metadata||(Qr().b[8][1]++,{}))["maputnik:stadia_access_token"],onChange:this.changeMetadataProperty.bind(this,"maputnik:stadia_access_token")})]}),ue.jsxs("div",{className:"maputnik-modal-export-buttons",children:[ue.jsxs(Ja,{onClick:this.saveStyle.bind(this),children:[ue.jsx(N6,{}),e("Save")]}),(Qr().b[9][0]++,ZR&&(Qr().b[9][1]++,ue.jsxs(Ja,{onClick:this.saveStyleAs.bind(this),children:[ue.jsx(N6,{}),e("Save as")]}))),ue.jsxs(Ja,{onClick:this.createHtml.bind(this),children:[ue.jsx(NZ,{}),e("Create HTML")]})]})]})})}}const yfe=(Qr().s[46]++,Ns()(gfe));function hx(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldDynamicArray.tsx",e="950dd35e62562a3439b74678b95f406e749c6958",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldDynamicArray.tsx",statementMap:{0:{start:{line:7,column:4},end:{line:7,column:139}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:8,column:3}},line:6}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldDynamicArray.tsx"],names:[],mappings:"AAWM;AAXN,OAAO,WAAW;AAClB,OAAO,uBAA2E;AAClF,OAAO,cAAc;AAMrB,qBAAqB,0BAA0B,MAAM,UAAkC;AAAA,EACrF,SAAS;AACP,WAAO,oBAAC,YAAS,OAAO,KAAK,MAAM,OACjC,8BAAC,qBAAmB,GAAG,KAAK,OAAO,GACrC;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"950dd35e62562a3439b74678b95f406e749c6958"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return hx=function(){return a},a}hx();class MG extends nr.Component{render(){return hx().f[0]++,hx().s[0]++,ue.jsx(QC,{label:this.props.label,children:ue.jsx(uG,{...this.props})})}}function fx(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldCheckbox.tsx",e="a27c35e986d22656fa80c276efb67df518853ac2",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldCheckbox.tsx",statementMap:{0:{start:{line:7,column:4},end:{line:7,column:132}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:8,column:3}},line:6}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldCheckbox.tsx"],names:[],mappings:"AAaM;AAbN,OAAO,WAAW;AAClB,OAAO,WAAW;AAClB,OAAO,mBAAyC;AAQhD,qBAAqB,sBAAsB,MAAM,UAA8B;AAAA,EAC7E,SAAS;AACP,WAAO,oBAAC,SAAM,OAAO,KAAK,MAAM,OAC9B,8BAAC,iBAAe,GAAG,KAAK,OAAO,GACjC;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a27c35e986d22656fa80c276efb67df518853ac2"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return fx=function(){return a},a}fx();class vfe extends nr.Component{render(){return fx().f[0]++,fx().s[0]++,ue.jsx(fa,{label:this.props.label,children:ue.jsx(uI,{...this.props})})}}function Qn(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalSourcesTypeEditor.tsx",e="dab453a2f232d0ad88af178ab26f5244dd676038",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalSourcesTypeEditor.tsx",statementMap:{0:{start:{line:15,column:14},end:{line:15,column:26}},1:{start:{line:16,column:4},end:{line:30,column:9}},2:{start:{line:23,column:29},end:{line:26,column:12}},3:{start:{line:35,column:4},end:{line:38,column:7}},4:{start:{line:41,column:18},end:{line:41,column:47}},5:{start:{line:42,column:4},end:{line:51,column:6}},6:{start:{line:54,column:14},end:{line:54,column:26}},7:{start:{line:55,column:4},end:{line:99,column:9}},8:{start:{line:66,column:32},end:{line:69,column:12}},9:{start:{line:80,column:33},end:{line:83,column:12}},10:{start:{line:92,column:33},end:{line:95,column:12}},11:{start:{line:102,column:27},end:{line:107,column:1}},12:{start:{line:102,column:34},end:{line:107,column:1}},13:{start:{line:110,column:14},end:{line:110,column:26}},14:{start:{line:111,column:24},end:{line:118,column:5}},15:{start:{line:112,column:26},end:{line:112,column:64}},16:{start:{line:113,column:6},end:{line:113,column:29}},17:{start:{line:114,column:6},end:{line:117,column:9}},18:{start:{line:119,column:4},end:{line:146,column:9}},19:{start:{line:126,column:29},end:{line:129,column:12}},20:{start:{line:133,column:8},end:{line:144,column:10}},21:{start:{line:141,column:31},end:{line:141,column:52}},22:{start:{line:151,column:14},end:{line:151,column:26}},23:{start:{line:152,column:24},end:{line:159,column:5}},24:{start:{line:153,column:26},end:{line:153,column:64}},25:{start:{line:154,column:6},end:{line:154,column:29}},26:{start:{line:155,column:6},end:{line:158,column:9}},27:{start:{line:160,column:23},end:{line:165,column:5}},28:{start:{line:161,column:6},end:{line:164,column:9}},29:{start:{line:166,column:4},end:{line:192,column:9}},30:{start:{line:179,column:8},end:{line:190,column:10}},31:{start:{line:187,column:31},end:{line:187,column:52}},32:{start:{line:197,column:14},end:{line:197,column:26}},33:{start:{line:198,column:4},end:{line:209,column:6}},34:{start:{line:204,column:28},end:{line:207,column:10}},35:{start:{line:214,column:14},end:{line:214,column:26}},36:{start:{line:215,column:4},end:{line:247,column:9}},37:{start:{line:227,column:12},end:{line:230,column:15}},38:{start:{line:240,column:12},end:{line:243,column:15}},39:{start:{line:252,column:14},end:{line:252,column:26}},40:{start:{line:253,column:4},end:{line:268,column:9}},41:{start:{line:261,column:29},end:{line:264,column:12}},42:{start:{line:273,column:14},end:{line:273,column:26}},43:{start:{line:274,column:24},end:{line:280,column:5}},44:{start:{line:281,column:4},end:{line:345,column:5}},45:{start:{line:283,column:8},end:{line:283,column:79}},46:{start:{line:285,column:8},end:{line:285,column:85}},47:{start:{line:287,column:8},end:{line:287,column:77}},48:{start:{line:289,column:8},end:{line:289,column:76}},49:{start:{line:291,column:8},end:{line:291,column:77}},50:{start:{line:293,column:8},end:{line:305,column:13}},51:{start:{line:298,column:36},end:{line:301,column:14}},52:{start:{line:307,column:8},end:{line:307,column:77}},53:{start:{line:309,column:8},end:{line:336,column:13}},54:{start:{line:315,column:38},end:{line:318,column:16}},55:{start:{line:329,column:38},end:{line:332,column:16}},56:{start:{line:338,column:8},end:{line:338,column:76}},57:{start:{line:340,column:8},end:{line:340,column:74}},58:{start:{line:342,column:8},end:{line:342,column:74}},59:{start:{line:344,column:8},end:{line:344,column:20}},60:{start:{line:348,column:31},end:{line:348,column:80}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:11},end:{line:31,column:3}},line:14},1:{name:"(anonymous_1)",decl:{start:{line:23,column:20},end:{line:23,column:21}},loc:{start:{line:23,column:29},end:{line:26,column:12}},line:23},2:{name:"(anonymous_2)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:24},end:{line:39,column:3}},line:34},3:{name:"(anonymous_3)",decl:{start:{line:40,column:2},end:{line:40,column:3}},loc:{start:{line:40,column:19},end:{line:52,column:3}},line:40},4:{name:"(anonymous_4)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:11},end:{line:100,column:3}},line:53},5:{name:"(anonymous_5)",decl:{start:{line:66,column:20},end:{line:66,column:21}},loc:{start:{line:66,column:32},end:{line:69,column:12}},line:66},6:{name:"(anonymous_6)",decl:{start:{line:80,column:20},end:{line:80,column:21}},loc:{start:{line:80,column:33},end:{line:83,column:12}},line:80},7:{name:"(anonymous_7)",decl:{start:{line:92,column:20},end:{line:92,column:21}},loc:{start:{line:92,column:33},end:{line:95,column:12}},line:92},8:{name:"(anonymous_8)",decl:{start:{line:102,column:27},end:{line:102,column:28}},loc:{start:{line:102,column:34},end:{line:107,column:1}},line:102},9:{name:"(anonymous_9)",decl:{start:{line:109,column:2},end:{line:109,column:3}},loc:{start:{line:109,column:11},end:{line:147,column:3}},line:109},10:{name:"(anonymous_10)",decl:{start:{line:111,column:24},end:{line:111,column:25}},loc:{start:{line:111,column:38},end:{line:118,column:5}},line:111},11:{name:"(anonymous_11)",decl:{start:{line:126,column:20},end:{line:126,column:21}},loc:{start:{line:126,column:29},end:{line:129,column:12}},line:126},12:{name:"(anonymous_12)",decl:{start:{line:132,column:32},end:{line:132,column:33}},loc:{start:{line:132,column:57},end:{line:145,column:7}},line:132},13:{name:"(anonymous_13)",decl:{start:{line:141,column:22},end:{line:141,column:23}},loc:{start:{line:141,column:31},end:{line:141,column:52}},line:141},14:{name:"(anonymous_14)",decl:{start:{line:150,column:2},end:{line:150,column:3}},loc:{start:{line:150,column:11},end:{line:193,column:3}},line:150},15:{name:"(anonymous_15)",decl:{start:{line:152,column:24},end:{line:152,column:25}},loc:{start:{line:152,column:38},end:{line:159,column:5}},line:152},16:{name:"(anonymous_16)",decl:{start:{line:160,column:23},end:{line:160,column:24}},loc:{start:{line:160,column:33},end:{line:165,column:5}},line:160},17:{name:"(anonymous_17)",decl:{start:{line:178,column:32},end:{line:178,column:33}},loc:{start:{line:178,column:57},end:{line:191,column:7}},line:178},18:{name:"(anonymous_18)",decl:{start:{line:187,column:22},end:{line:187,column:23}},loc:{start:{line:187,column:31},end:{line:187,column:52}},line:187},19:{name:"(anonymous_19)",decl:{start:{line:196,column:2},end:{line:196,column:3}},loc:{start:{line:196,column:11},end:{line:210,column:3}},line:196},20:{name:"(anonymous_20)",decl:{start:{line:204,column:18},end:{line:204,column:19}},loc:{start:{line:204,column:28},end:{line:207,column:10}},line:204},21:{name:"(anonymous_21)",decl:{start:{line:213,column:2},end:{line:213,column:3}},loc:{start:{line:213,column:11},end:{line:248,column:3}},line:213},22:{name:"(anonymous_22)",decl:{start:{line:226,column:20},end:{line:226,column:21}},loc:{start:{line:226,column:30},end:{line:231,column:11}},line:226},23:{name:"(anonymous_23)",decl:{start:{line:239,column:20},end:{line:239,column:21}},loc:{start:{line:239,column:33},end:{line:244,column:11}},line:239},24:{name:"(anonymous_24)",decl:{start:{line:251,column:2},end:{line:251,column:3}},loc:{start:{line:251,column:11},end:{line:269,column:3}},line:251},25:{name:"(anonymous_25)",decl:{start:{line:261,column:20},end:{line:261,column:21}},loc:{start:{line:261,column:29},end:{line:264,column:12}},line:261},26:{name:"(anonymous_26)",decl:{start:{line:272,column:2},end:{line:272,column:3}},loc:{start:{line:272,column:11},end:{line:346,column:3}},line:272},27:{name:"(anonymous_27)",decl:{start:{line:298,column:22},end:{line:298,column:23}},loc:{start:{line:298,column:36},end:{line:301,column:14}},line:298},28:{name:"(anonymous_28)",decl:{start:{line:315,column:24},end:{line:315,column:25}},loc:{start:{line:315,column:38},end:{line:318,column:16}},line:315},29:{name:"(anonymous_29)",decl:{start:{line:329,column:24},end:{line:329,column:25}},loc:{start:{line:329,column:38},end:{line:332,column:16}},line:329}},branchMap:{0:{loc:{start:{line:41,column:18},end:{line:41,column:47}},type:"binary-expr",locations:[{start:{line:41,column:18},end:{line:41,column:41}},{start:{line:41,column:45},end:{line:41,column:47}}],line:41},1:{loc:{start:{line:79,column:17},end:{line:79,column:47}},type:"binary-expr",locations:[{start:{line:79,column:17},end:{line:79,column:42}},{start:{line:79,column:46},end:{line:79,column:47}}],line:79},2:{loc:{start:{line:91,column:17},end:{line:91,column:48}},type:"binary-expr",locations:[{start:{line:91,column:17},end:{line:91,column:42}},{start:{line:91,column:46},end:{line:91,column:48}}],line:91},3:{loc:{start:{line:263,column:17},end:{line:263,column:72}},type:"cond-expr",locations:[{start:{line:263,column:48},end:{line:263,column:51}},{start:{line:263,column:54},end:{line:263,column:72}}],line:263},4:{loc:{start:{line:281,column:4},end:{line:345,column:5}},type:"switch",locations:[{start:{line:282,column:6},end:{line:283,column:79}},{start:{line:284,column:6},end:{line:285,column:85}},{start:{line:286,column:6},end:{line:287,column:77}},{start:{line:288,column:6},end:{line:289,column:76}},{start:{line:290,column:6},end:{line:291,column:77}},{start:{line:292,column:6},end:{line:305,column:13}},{start:{line:306,column:6},end:{line:307,column:77}},{start:{line:308,column:6},end:{line:336,column:13}},{start:{line:337,column:6},end:{line:338,column:76}},{start:{line:339,column:6},end:{line:340,column:74}},{start:{line:341,column:6},end:{line:342,column:74}},{start:{line:343,column:6},end:{line:344,column:20}}],line:281},5:{loc:{start:{line:302,column:19},end:{line:302,column:86}},type:"binary-expr",locations:[{start:{line:302,column:19},end:{line:302,column:45}},{start:{line:302,column:49},end:{line:302,column:86}}],line:302},6:{loc:{start:{line:319,column:21},end:{line:319,column:92}},type:"binary-expr",locations:[{start:{line:319,column:21},end:{line:319,column:47}},{start:{line:319,column:51},end:{line:319,column:92}}],line:319},7:{loc:{start:{line:333,column:21},end:{line:333,column:92}},type:"binary-expr",locations:[{start:{line:333,column:21},end:{line:333,column:47}},{start:{line:333,column:51},end:{line:333,column:92}}],line:333}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0,0,0,0,0,0,0,0,0,0],5:[0,0],6:[0,0],7:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalSourcesTypeEditor.tsx"],names:[],mappings:"AA2BW,SACL,KADK;AA3BX,OAAO,WAAW;AAClB,SAAQ,cAAa;AACrB,OAAO,WAAW;AAClB,OAAO,cAAc;AACrB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,uBAAuB;AAC9B,OAAO,gBAAgB;AACvB,OAAO,eAAe;AACtB,OAAO,mBAAmB;AAC1B,SAA0B,uBAAuB;AAcjD,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SACN;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,cAAc;AAAA,UACvB,WAAW,OAAO,cAAc;AAAA,UAChC,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,UAAU,SAAO,KAAK,MAAM,SAAS;AAAA,YACnC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA;AAAA,MACH;AAAA,MACC,KAAK,MAAM;AAAA,OACd;AAAA,EACF;AACF;AAaA,MAAM,4BAA4B,MAAM,UAAoC;AAAA,EAC1E,eAAe,OAAiB;AAC9B,SAAK,MAAM,SAAS;AAAA,MAClB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,iBAAiB;AACf,UAAM,QAAQ,KAAK,MAAM,OAAO,SAAS,CAAC;AAC1C,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,OAAO,KAAK,MAAM,EAAE,UAAU;AAAA,QAC9B,WAAW,OAAO,cAAc;AAAA,QAChC,MAAK;AAAA,QACL,OAAO;AAAA,QACP,UAAU,KAAK,eAAe,KAAK,IAAI;AAAA;AAAA,IACzC;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SACL;AAAA,WAAK,eAAe;AAAA,MACrB;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,aAAa;AAAA,UACtB,WAAW,OAAO,cAAc;AAAA,UAChC,SAAS;AAAA,YACP,CAAC,OAAO,mCAAmC;AAAA,YAC3C,CAAC,OAAO,yBAAyB;AAAA,UACnC;AAAA,UACA,UAAU,YAAU,KAAK,MAAM,SAAS;AAAA,YACtC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA,UACD,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,eAAY;AAAA;AAAA,MACd;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,UAAU;AAAA,UACnB,WAAW,OAAO,cAAc;AAAA,UAChC,OAAO,KAAK,MAAM,OAAO,WAAW;AAAA,UACpC,UAAU,aAAW,KAAK,MAAM,SAAS;AAAA,YACvC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA;AAAA,MACH;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,UAAU;AAAA,UACnB,WAAW,OAAO,cAAc;AAAA,UAChC,OAAO,KAAK,MAAM,OAAO,WAAW;AAAA,UACpC,UAAU,aAAW,KAAK,MAAM,SAAS;AAAA,YACvC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA;AAAA,MACH;AAAA,MACC,KAAK,MAAM;AAAA,OACd;AAAA,EAEF;AACF;AAEA,MAAM,qBAAyE,CAAC,MAAO;AAAA,EACrF,EAAE,OAAO,EAAE,gBAAgB,GAAG,KAAK,WAAW;AAAA,EAC9C,EAAE,OAAO,EAAE,iBAAiB,GAAG,KAAK,YAAY;AAAA,EAChD,EAAE,OAAO,EAAE,oBAAoB,GAAG,KAAK,eAAe;AAAA,EACtD,EAAE,OAAO,EAAE,mBAAmB,GAAG,KAAK,cAAc;AACtD;AAUA,MAAM,0BAA0B,MAAM,UAAkC;AAAA,EACtE,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,cAAc,CAAC,KAAa,QAA0B;AAC1D,YAAM,cAAc,KAAK,MAAM,OAAO,YAAY,MAAM,CAAC;AACzD,kBAAY,GAAG,IAAI;AAEnB,WAAK,MAAM,SAAS;AAAA,QAClB,GAAG,KAAK,MAAM;AAAA,QACd;AAAA,MACF,CAAC;AAAA,IACH;AAEA,WAAO,qBAAC,SACN;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,WAAW;AAAA,UACpB,WAAW,OAAO,aAAa;AAAA,UAC/B,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,UAAU,SAAO,KAAK,MAAM,SAAS;AAAA,YACnC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA;AAAA,MACH;AAAA,MACC,mBAAmB,CAAC,EAAE,IAAI,CAAC,EAAC,OAAO,IAAG,GAAG,QAAQ;AAChD,eACE;AAAA,UAAC;AAAA;AAAA,YACC;AAAA,YAEA,QAAQ;AAAA,YACR,MAAK;AAAA,YACL,OAAO,KAAK,MAAM,OAAO,YAAY,GAAG;AAAA,YACxC,SAAS,CAAC,GAAG,CAAC;AAAA,YACd,UAAU,CAAC,QAA0B,YAAY,KAAK,GAAG;AAAA;AAAA,UALpD;AAAA,QAMP;AAAA,MAEJ,CAAC;AAAA,OACH;AAAA,EACF;AACF;AAUA,MAAM,0BAA0B,MAAM,UAAkC;AAAA,EACtE,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,cAAc,CAAC,KAAa,QAA0B;AAC1D,YAAM,cAAc,KAAK,MAAM,OAAO,YAAY,MAAM,CAAC;AACzD,kBAAY,GAAG,IAAI;AAEnB,WAAK,MAAM,SAAS;AAAA,QAClB,GAAG,KAAK,MAAM;AAAA,QACd;AAAA,MACF,CAAC;AAAA,IACH;AAEA,UAAM,aAAa,CAAC,SAAmB;AACrC,WAAK,MAAM,SAAS;AAAA,QAClB,GAAG,KAAK,MAAM;AAAA,QACd;AAAA,MACF,CAAC;AAAA,IACH;AAEA,WAAO,qBAAC,SACN;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,WAAW;AAAA,UACpB,WAAW,OAAO,aAAa;AAAA,UAC/B,MAAK;AAAA,UACL,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,SAAS,CAAC;AAAA,UACV,UAAU;AAAA;AAAA,MACZ;AAAA,MACC,mBAAmB,CAAC,EAAE,IAAI,CAAC,EAAC,OAAO,IAAG,GAAG,QAAQ;AAChD,eACE;AAAA,UAAC;AAAA;AAAA,YACC;AAAA,YAEA,QAAQ;AAAA,YACR,MAAK;AAAA,YACL,OAAO,KAAK,MAAM,OAAO,YAAY,GAAG;AAAA,YACxC,SAAS,CAAC,GAAG,CAAC;AAAA,YACd,UAAU,CAAC,QAA0B,YAAY,KAAK,GAAG;AAAA;AAAA,UALpD;AAAA,QAMP;AAAA,MAEJ,CAAC;AAAA,OACH;AAAA,EACF;AACF;AASA,MAAM,+BAA+B,MAAM,UAAuC;AAAA,EAChF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,OAAO,EAAE,aAAa;AAAA,QACtB,WAAW,OAAO,eAAe;AAAA,QACjC,OAAO,KAAK,MAAM,OAAO;AAAA,QACzB,UAAU,UAAQ,KAAK,MAAM,SAAS;AAAA,UACpC,GAAG,KAAK,MAAM;AAAA,UACd;AAAA,QACF,CAAC;AAAA;AAAA,IACH;AAAA,EACF;AACF;AAUA,MAAM,qCAAqC,MAAM,UAA6C;AAAA,EAC5F,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SACN;AAAA,0BAAC,SAAM,OAAO,EAAE,SAAS,GAAG,WAAW,OAAO,eAAe,MAC3D;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,WAAW;AAAA,UACX,MAAM;AAAA,YACJ,MAAM;AAAA,YACN,MAAM;AAAA,UACR;AAAA,UACA,MAAM;AAAA,UACN,UAAU,UAAQ;AAChB,iBAAK,MAAM,SAAS;AAAA,cAClB,GAAG,KAAK,MAAM;AAAA,cACd;AAAA,YACF,CAAC;AAAA,UACH;AAAA;AAAA,MACF,GACF;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,SAAS;AAAA,UAClB,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,UAAU,aAAW;AACnB,iBAAK,MAAM,SAAS;AAAA,cAClB,GAAG,KAAK,MAAM;AAAA,cACd;AAAA,YACF,CAAC;AAAA,UACH;AAAA;AAAA,MACF;AAAA,OACF;AAAA,EACF;AACF;AAUA,MAAM,4BAA4B,MAAM,UAAoC;AAAA,EAC1E,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SACN;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,aAAa;AAAA,UACtB,WAAW,OAAO,cAAc;AAAA,UAChC,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,eAAY;AAAA,UACZ,UAAU,CAAC,QAAgB,KAAK,MAAM,SAAS;AAAA,YAC7C,GAAG,KAAK,MAAM;AAAA,YACd,KAAK,IAAI,WAAW,YAAY,IAAI,MAAM,aAAa,GAAG;AAAA,UAC5D,CAAC;AAAA;AAAA,MACH;AAAA,MACC,KAAK,MAAM;AAAA,OACd;AAAA,EACF;AACF;AAQA,MAAM,uCAAuC,MAAM,UAA+C;AAAA,EAChG,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,cAAc;AAAA,MAClB,QAAQ,KAAK,MAAM;AAAA,MACnB,UAAU,KAAK,MAAM;AAAA,MACrB,GAAG,KAAK,MAAM;AAAA,MACd,MAAM,KAAK,MAAM;AAAA,MACjB,QAAQ,KAAK,MAAM;AAAA,IACrB;AACA,YAAO,KAAK,MAAM,MAAM;AAAA,MACxB,KAAK;AAAe,eAAO,oBAAC,0BAAwB,GAAG,aAAa;AAAA,MACpE,KAAK;AAAgB,eAAO,oBAAC,gCAA8B,GAAG,aAAa;AAAA,MAC3E,KAAK;AAAmB,eAAO,oBAAC,wBAAsB,GAAG,aAAa;AAAA,MACtE,KAAK;AAAe,eAAO,oBAAC,uBAAqB,GAAG,aAAa;AAAA,MACjE,KAAK;AAAmB,eAAO,oBAAC,wBAAsB,GAAG,aAAa;AAAA,MACtE,KAAK;AAAe,eAAO,oBAAC,uBAAqB,GAAG,aAClD;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,WAAW;AAAA,YACpB,WAAW,OAAO,cAAc;AAAA,YAChC,UAAU,cAAY,KAAK,MAAM,SAAS;AAAA,cACxC,GAAG,KAAK,MAAM;AAAA,cACd;AAAA,YACF,CAAC;AAAA,YACD,OAAO,KAAK,MAAM,OAAO,YAAY,OAAO,cAAc,SAAS;AAAA,YACnE,eAAY;AAAA;AAAA,QACd,GACF;AAAA,MACA,KAAK;AAAuB,eAAO,oBAAC,wBAAsB,GAAG,aAAa;AAAA,MAC1E,KAAK;AAAsB,eAAO,qBAAC,uBAAqB,GAAG,aACzD;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,WAAW;AAAA,cACpB,WAAW,OAAO,kBAAkB;AAAA,cACpC,UAAU,cAAY,KAAK,MAAM,SAAS;AAAA,gBACxC,GAAG,KAAK,MAAM;AAAA,gBACd;AAAA,cACF,CAAC;AAAA,cACD,OAAO,KAAK,MAAM,OAAO,YAAY,OAAO,kBAAkB,SAAS;AAAA,cACvE,eAAY;AAAA;AAAA,UACd;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,UAAU;AAAA,cACnB,WAAW,OAAO,kBAAkB;AAAA,cACpC,SAAS,OAAO,KAAK,OAAO,kBAAkB,SAAS,MAAM;AAAA,cAC7D,UAAU,cAAY,KAAK,MAAM,SAAS;AAAA,gBACxC,GAAG,KAAK,MAAM;AAAA,gBACd;AAAA,cACF,CAAC;AAAA,cACD,OAAO,KAAK,MAAM,OAAO,YAAY,OAAO,kBAAkB,SAAS;AAAA;AAAA,UACzE;AAAA,WACF;AAAA,MACA,KAAK;AAAkB,eAAO,oBAAC,uBAAqB,GAAG,aAAa;AAAA,MACpE,KAAK;AAAS,eAAO,oBAAC,qBAAmB,GAAG,aAAa;AAAA,MACzD,KAAK;AAAS,eAAO,oBAAC,qBAAmB,GAAG,aAAa;AAAA,MACzD;AAAS,eAAO;AAAA,IAChB;AAAA,EACF;AACF;AAEA,MAAM,yBAAyB,gBAAgB,EAAE,8BAA8B;AAC/E,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"dab453a2f232d0ad88af178ab26f5244dd676038"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Qn=function(){return a},a}Qn();class _E extends nr.Component{render(){Qn().f[0]++;const e=(Qn().s[0]++,this.props.t);return Qn().s[1]++,ue.jsxs("div",{children:[ue.jsx(Wy,{label:e("TileJSON URL"),fieldSpec:Ts.source_vector.url,value:this.props.source.url,onChange:t=>(Qn().f[1]++,Qn().s[2]++,this.props.onChange({...this.props.source,url:t}))}),this.props.children]})}}class bE extends nr.Component{changeTileUrls(e){Qn().f[2]++,Qn().s[3]++,this.props.onChange({...this.props.source,tiles:e})}renderTileUrls(){Qn().f[3]++;const e=(Qn().s[4]++,Qn().b[0][0]++,this.props.source.tiles||(Qn().b[0][1]++,[]));return Qn().s[5]++,ue.jsx(MG,{label:this.props.t("Tile URL"),fieldSpec:Ts.source_vector.tiles,type:"url",value:e,onChange:this.changeTileUrls.bind(this)})}render(){Qn().f[4]++;const e=(Qn().s[6]++,this.props.t);return Qn().s[7]++,ue.jsxs("div",{children:[this.renderTileUrls(),ue.jsx(O3,{label:e("Scheme Type"),fieldSpec:Ts.source_vector.scheme,options:[["xyz","xyz (Slippy map tilenames scheme)"],["tms","tms (OSGeo spec scheme)"]],onChange:t=>(Qn().f[5]++,Qn().s[8]++,this.props.onChange({...this.props.source,scheme:t})),value:this.props.source.scheme,"data-wd-key":"modal:sources.add.scheme_type"}),ue.jsx(mp,{label:e("Min Zoom"),fieldSpec:Ts.source_vector.minzoom,value:(Qn().b[1][0]++,this.props.source.minzoom||(Qn().b[1][1]++,0)),onChange:t=>(Qn().f[6]++,Qn().s[9]++,this.props.onChange({...this.props.source,minzoom:t}))}),ue.jsx(mp,{label:e("Max Zoom"),fieldSpec:Ts.source_vector.maxzoom,value:(Qn().b[2][0]++,this.props.source.maxzoom||(Qn().b[2][1]++,22)),onChange:t=>(Qn().f[7]++,Qn().s[10]++,this.props.onChange({...this.props.source,maxzoom:t}))}),this.props.children]})}}Qn().s[11]++;const SG=n=>(Qn().f[8]++,Qn().s[12]++,[{label:n("Coord top left"),key:"top left"},{label:n("Coord top right"),key:"top right"},{label:n("Coord bottom right"),key:"bottom right"},{label:n("Coord bottom left"),key:"bottom left"}]);class Cfe extends nr.Component{render(){Qn().f[9]++;const e=(Qn().s[13]++,this.props.t);Qn().s[14]++;const t=(r,i)=>{Qn().f[10]++;const s=(Qn().s[15]++,this.props.source.coordinates.slice(0));Qn().s[16]++,s[r]=i,Qn().s[17]++,this.props.onChange({...this.props.source,coordinates:s})};return Qn().s[18]++,ue.jsxs("div",{children:[ue.jsx(Wy,{label:e("Image URL"),fieldSpec:Ts.source_image.url,value:this.props.source.url,onChange:r=>(Qn().f[11]++,Qn().s[19]++,this.props.onChange({...this.props.source,url:r}))}),SG(e).map(({label:r,key:i},s)=>(Qn().f[12]++,Qn().s[20]++,ue.jsx(sx,{label:r,length:2,type:"number",value:this.props.source.coordinates[s],default:[0,0],onChange:a=>(Qn().f[13]++,Qn().s[21]++,t(s,a))},i)))]})}}class _fe extends nr.Component{render(){Qn().f[14]++;const e=(Qn().s[22]++,this.props.t);Qn().s[23]++;const t=(i,s)=>{Qn().f[15]++;const a=(Qn().s[24]++,this.props.source.coordinates.slice(0));Qn().s[25]++,a[i]=s,Qn().s[26]++,this.props.onChange({...this.props.source,coordinates:a})};Qn().s[27]++;const r=i=>{Qn().f[16]++,Qn().s[28]++,this.props.onChange({...this.props.source,urls:i})};return Qn().s[29]++,ue.jsxs("div",{children:[ue.jsx(MG,{label:e("Video URL"),fieldSpec:Ts.source_video.urls,type:"string",value:this.props.source.urls,default:[],onChange:r}),SG(e).map(({label:i,key:s},a)=>(Qn().f[17]++,Qn().s[30]++,ue.jsx(sx,{label:i,length:2,type:"number",value:this.props.source.coordinates[a],default:[0,0],onChange:o=>(Qn().f[18]++,Qn().s[31]++,t(a,o))},s)))]})}}class bfe extends nr.Component{render(){Qn().f[19]++;const e=(Qn().s[32]++,this.props.t);return Qn().s[33]++,ue.jsx(Wy,{label:e("GeoJSON URL"),fieldSpec:Ts.source_geojson.data,value:this.props.source.data,onChange:t=>(Qn().f[20]++,Qn().s[34]++,this.props.onChange({...this.props.source,data:t}))})}}class xfe extends nr.Component{render(){Qn().f[21]++;const e=(Qn().s[35]++,this.props.t);return Qn().s[36]++,ue.jsxs("div",{children:[ue.jsx(fa,{label:e("GeoJSON"),fieldSpec:Ts.source_geojson.data,children:ue.jsx(NO,{layer:this.props.source.data,maxHeight:200,mode:{name:"javascript",json:!0},lint:!0,onChange:t=>{Qn().f[22]++,Qn().s[37]++,this.props.onChange({...this.props.source,data:t})}})}),ue.jsx(vfe,{label:e("Cluster"),value:this.props.source.cluster,onChange:t=>{Qn().f[23]++,Qn().s[38]++,this.props.onChange({...this.props.source,cluster:t})}})]})}}class wfe extends nr.Component{render(){Qn().f[24]++;const e=(Qn().s[39]++,this.props.t);return Qn().s[40]++,ue.jsxs("div",{children:[ue.jsx(Wy,{label:e("PMTiles URL"),fieldSpec:Ts.source_vector.url,value:this.props.source.url,"data-wd-key":"modal:sources.add.source_url",onChange:t=>(Qn().f[25]++,Qn().s[41]++,this.props.onChange({...this.props.source,url:t.startsWith("pmtiles://")?(Qn().b[3][0]++,t):(Qn().b[3][1]++,`pmtiles://${t}`)}))}),this.props.children]})}}class Mfe extends nr.Component{render(){Qn().f[26]++;const e=(Qn().s[42]++,this.props.t),t=(Qn().s[43]++,{source:this.props.source,onChange:this.props.onChange,t:this.props.t,i18n:this.props.i18n,tReady:this.props.tReady});switch(Qn().s[44]++,this.props.mode){case"geojson_url":return Qn().b[4][0]++,Qn().s[45]++,ue.jsx(bfe,{...t});case"geojson_json":return Qn().b[4][1]++,Qn().s[46]++,ue.jsx(xfe,{...t});case"tilejson_vector":return Qn().b[4][2]++,Qn().s[47]++,ue.jsx(_E,{...t});case"tile_vector":return Qn().b[4][3]++,Qn().s[48]++,ue.jsx(bE,{...t});case"tilejson_raster":return Qn().b[4][4]++,Qn().s[49]++,ue.jsx(_E,{...t});case"tile_raster":return Qn().b[4][5]++,Qn().s[50]++,ue.jsx(bE,{...t,children:ue.jsx(mp,{label:e("Tile Size"),fieldSpec:Ts.source_raster.tileSize,onChange:r=>(Qn().f[27]++,Qn().s[51]++,this.props.onChange({...this.props.source,tileSize:r})),value:(Qn().b[5][0]++,this.props.source.tileSize||(Qn().b[5][1]++,Ts.source_raster.tileSize.default)),"data-wd-key":"modal:sources.add.tile_size"})});case"tilejson_raster-dem":return Qn().b[4][6]++,Qn().s[52]++,ue.jsx(_E,{...t});case"tilexyz_raster-dem":return Qn().b[4][7]++,Qn().s[53]++,ue.jsxs(bE,{...t,children:[ue.jsx(mp,{label:e("Tile Size"),fieldSpec:Ts.source_raster_dem.tileSize,onChange:r=>(Qn().f[28]++,Qn().s[54]++,this.props.onChange({...this.props.source,tileSize:r})),value:(Qn().b[6][0]++,this.props.source.tileSize||(Qn().b[6][1]++,Ts.source_raster_dem.tileSize.default)),"data-wd-key":"modal:sources.add.tile_size"}),ue.jsx(O3,{label:e("Encoding"),fieldSpec:Ts.source_raster_dem.encoding,options:Object.keys(Ts.source_raster_dem.encoding.values),onChange:r=>(Qn().f[29]++,Qn().s[55]++,this.props.onChange({...this.props.source,encoding:r})),value:(Qn().b[7][0]++,this.props.source.encoding||(Qn().b[7][1]++,Ts.source_raster_dem.encoding.default))})]});case"pmtiles_vector":return Qn().b[4][8]++,Qn().s[56]++,ue.jsx(wfe,{...t});case"image":return Qn().b[4][9]++,Qn().s[57]++,ue.jsx(Cfe,{...t});case"video":return Qn().b[4][10]++,Qn().s[58]++,ue.jsx(_fe,{...t});default:return Qn().b[4][11]++,Qn().s[59]++,null}}}const EG=(Qn().s[60]++,Ns()(Mfe));function Cp(){var n="/home/runner/work/maputnik/maputnik/src/libs/source.ts",e="315b9927ffd3b5bf51669bb9e53779783a451930",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/source.ts",statementMap:{0:{start:{line:2,column:27},end:{line:2,column:50}},1:{start:{line:3,column:2},end:{line:3,column:36}},2:{start:{line:4,column:2},end:{line:7,column:4}},3:{start:{line:10,column:2},end:{line:10,column:50}},4:{start:{line:13,column:25},end:{line:16,column:3}},5:{start:{line:17,column:2},end:{line:20,column:4}}},fnMap:{0:{name:"deleteSource",decl:{start:{line:1,column:16},end:{line:1,column:28}},loc:{start:{line:1,column:49},end:{line:8,column:1}},line:1},1:{name:"addSource",decl:{start:{line:9,column:16},end:{line:9,column:25}},loc:{start:{line:9,column:54},end:{line:11,column:1}},line:9},2:{name:"changeSource",decl:{start:{line:12,column:16},end:{line:12,column:28}},loc:{start:{line:12,column:57},end:{line:21,column:1}},line:12}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0},f:{0:0,1:0,2:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/source.ts"],names:[],mappings:"AAEO,gBAAS,aAAa,UAA8B,UAAkB;AAC3E,QAAM,mBAAmB,EAAE,GAAG,SAAS,QAAO;AAC9C,SAAO,iBAAiB,QAAQ;AAChC,SAAO;AAAA,IACL,GAAG;AAAA,IACH,SAAS;AAAA,EACX;AACF;AAGO,gBAAS,UAAU,UAA8B,UAAkB,QAA6B;AACrG,SAAO,aAAa,UAAU,UAAU,MAAM;AAChD;AAEO,gBAAS,aAAa,UAA8B,UAAkB,QAA6B;AACxG,QAAM,iBAAiB;AAAA,IACrB,GAAG,SAAS;AAAA,IACZ,CAAC,QAAQ,GAAG;AAAA,EACd;AACA,SAAO;AAAA,IACL,GAAG;AAAA,IACH,SAAS;AAAA,EACX;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"315b9927ffd3b5bf51669bb9e53779783a451930"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Cp=function(){return a},a}Cp();function Sfe(n,e){Cp().f[0]++;const t=(Cp().s[0]++,{...n.sources});return Cp().s[1]++,delete t[e],Cp().s[2]++,{...n,sources:t}}function XR(n,e,t){return Cp().f[1]++,Cp().s[3]++,BG(n,e,t)}function BG(n,e,t){Cp().f[2]++;const r=(Cp().s[4]++,{...n.sources,[e]:t});return Cp().s[5]++,{...n,sources:r}}const Efe={type:"vector",url:"https://api.maptiler.com/tiles/v3-openmaptiles/tiles.json?key={key}",title:"OpenMapTiles v3"},Bfe={type:"vector",url:"https://tile.thunderforest.com/thunderforest.transport-v2.json?apikey={key}",title:"Thunderforest Transport v2"},Ofe={type:"vector",url:"https://tile.thunderforest.com/thunderforest.outdoors-v2.json?apikey={key}",title:"Thunderforest Outdoors v2"},Ife={type:"vector",url:"https://s3-eu-west-1.amazonaws.com/tiles.os.uk/v2/data/vector/open-zoomstack/config.json",title:"OS Open Zoomstack v2"},JR={openmaptiles:Efe,thunderforest_transport:Bfe,thunderforest_outdoors:Ofe,open_zoomstack:Ife};function un(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalSources.tsx",e="1a321f05fdc2b3edcde8eeb4fd25459ef69ddd1e",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalSources.tsx",statementMap:{0:{start:{line:16,column:4},end:{line:33,column:9}},1:{start:{line:20,column:23},end:{line:20,column:57}},2:{start:{line:37,column:2},end:{line:40,column:3}},3:{start:{line:38,column:4},end:{line:38,column:43}},4:{start:{line:38,column:22},end:{line:38,column:43}},5:{start:{line:39,column:4},end:{line:39,column:29}},6:{start:{line:41,column:2},end:{line:44,column:3}},7:{start:{line:42,column:4},end:{line:42,column:50}},8:{start:{line:42,column:22},end:{line:42,column:50}},9:{start:{line:43,column:4},end:{line:43,column:33}},10:{start:{line:45,column:2},end:{line:49,column:3}},11:{start:{line:46,column:4},end:{line:46,column:43}},12:{start:{line:46,column:22},end:{line:46,column:43}},13:{start:{line:47,column:4},end:{line:47,column:83}},14:{start:{line:47,column:59},end:{line:47,column:83}},15:{start:{line:48,column:4},end:{line:48,column:29}},16:{start:{line:50,column:2},end:{line:56,column:3}},17:{start:{line:51,column:4},end:{line:55,column:5}},18:{start:{line:52,column:6},end:{line:52,column:27}},19:{start:{line:54,column:6},end:{line:54,column:28}},20:{start:{line:57,column:2},end:{line:59,column:3}},21:{start:{line:58,column:4},end:{line:58,column:19}},22:{start:{line:60,column:2},end:{line:62,column:3}},23:{start:{line:61,column:4},end:{line:61,column:19}},24:{start:{line:63,column:2},end:{line:63,column:14}},25:{start:{line:67,column:14},end:{line:67,column:26}},26:{start:{line:68,column:4},end:{line:94,column:9}},27:{start:{line:80,column:27},end:{line:80,column:67}},28:{start:{line:99,column:4},end:{line:99,column:17}},29:{start:{line:100,column:4},end:{line:104,column:6}},30:{start:{line:107,column:19},end:{line:107,column:50}},31:{start:{line:108,column:25},end:{line:108,column:40}},32:{start:{line:109,column:4},end:{line:192,column:5}},33:{start:{line:111,column:8},end:{line:114,column:10}},34:{start:{line:116,column:8},end:{line:119,column:10}},35:{start:{line:121,column:8},end:{line:125,column:10}},36:{start:{line:127,column:8},end:{line:130,column:10}},37:{start:{line:132,column:8},end:{line:138,column:10}},38:{start:{line:140,column:8},end:{line:143,column:10}},39:{start:{line:145,column:8},end:{line:152,column:10}},40:{start:{line:154,column:8},end:{line:157,column:10}},41:{start:{line:159,column:8},end:{line:165,column:10}},42:{start:{line:167,column:8},end:{line:176,column:10}},43:{start:{line:178,column:8},end:{line:189,column:10}},44:{start:{line:191,column:8},end:{line:191,column:18}},45:{start:{line:194,column:10},end:{line:197,column:3}},46:{start:{line:195,column:33},end:{line:195,column:43}},47:{start:{line:196,column:4},end:{line:196,column:39}},48:{start:{line:198,column:19},end:{line:200,column:3}},49:{start:{line:199,column:4},end:{line:199,column:30}},50:{start:{line:202,column:14},end:{line:202,column:26}},51:{start:{line:203,column:32},end:{line:205,column:5}},52:{start:{line:206,column:4},end:{line:257,column:9}},53:{start:{line:213,column:27},end:{line:213,column:57}},54:{start:{line:235,column:30},end:{line:235,column:87}},55:{start:{line:262,column:27},end:{line:262,column:40}},56:{start:{line:263,column:4},end:{line:263,column:35}},57:{start:{line:264,column:4},end:{line:264,column:26}},58:{start:{line:267,column:28},end:{line:267,column:38}},59:{start:{line:268,column:22},end:{line:268,column:77}},60:{start:{line:269,column:26},end:{line:282,column:6}},61:{start:{line:270,column:21},end:{line:270,column:47}},62:{start:{line:271,column:6},end:{line:281,column:8}},63:{start:{line:276,column:29},end:{line:276,column:93}},64:{start:{line:277,column:26},end:{line:277,column:85}},65:{start:{line:283,column:27},end:{line:295,column:6}},66:{start:{line:283,column:75},end:{line:283,column:106}},67:{start:{line:284,column:21},end:{line:284,column:44}},68:{start:{line:285,column:6},end:{line:294,column:8}},69:{start:{line:291,column:26},end:{line:291,column:107}},70:{start:{line:296,column:4},end:{line:326,column:6}},71:{start:{line:319,column:45},end:{line:319,column:109}},72:{start:{line:329,column:21},end:{line:329,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:11},end:{line:34,column:3}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:20,column:17},end:{line:20,column:18}},loc:{start:{line:20,column:23},end:{line:20,column:57}},line:20},2:{name:"editorMode",decl:{start:{line:36,column:9},end:{line:36,column:19}},loc:{start:{line:36,column:28},end:{line:64,column:1}},line:36},3:{name:"(anonymous_3)",decl:{start:{line:66,column:2},end:{line:66,column:3}},loc:{start:{line:66,column:11},end:{line:95,column:3}},line:66},4:{name:"(anonymous_4)",decl:{start:{line:80,column:21},end:{line:80,column:22}},loc:{start:{line:80,column:27},end:{line:80,column:67}},line:80},5:{name:"(anonymous_5)",decl:{start:{line:98,column:2},end:{line:98,column:3}},loc:{start:{line:98,column:21},end:{line:105,column:3}},line:98},6:{name:"(anonymous_6)",decl:{start:{line:106,column:2},end:{line:106,column:3}},loc:{start:{line:106,column:22},end:{line:193,column:3}},line:106},7:{name:"(anonymous_7)",decl:{start:{line:194,column:10},end:{line:194,column:11}},loc:{start:{line:194,column:16},end:{line:197,column:3}},line:194},8:{name:"(anonymous_8)",decl:{start:{line:198,column:19},end:{line:198,column:20}},loc:{start:{line:198,column:31},end:{line:200,column:3}},line:198},9:{name:"(anonymous_9)",decl:{start:{line:201,column:2},end:{line:201,column:3}},loc:{start:{line:201,column:11},end:{line:258,column:3}},line:201},10:{name:"(anonymous_10)",decl:{start:{line:213,column:20},end:{line:213,column:21}},loc:{start:{line:213,column:27},end:{line:213,column:57}},line:213},11:{name:"(anonymous_11)",decl:{start:{line:235,column:20},end:{line:235,column:21}},loc:{start:{line:235,column:30},end:{line:235,column:87}},line:235},12:{name:"(anonymous_12)",decl:{start:{line:261,column:2},end:{line:261,column:3}},loc:{start:{line:261,column:21},end:{line:265,column:3}},line:261},13:{name:"(anonymous_13)",decl:{start:{line:266,column:2},end:{line:266,column:3}},loc:{start:{line:266,column:11},end:{line:327,column:3}},line:266},14:{name:"(anonymous_14)",decl:{start:{line:269,column:60},end:{line:269,column:61}},loc:{start:{line:269,column:74},end:{line:282,column:5}},line:269},15:{name:"(anonymous_15)",decl:{start:{line:276,column:20},end:{line:276,column:21}},loc:{start:{line:276,column:29},end:{line:276,column:93}},line:276},16:{name:"(anonymous_16)",decl:{start:{line:277,column:20},end:{line:277,column:21}},loc:{start:{line:277,column:26},end:{line:277,column:85}},line:277},17:{name:"(anonymous_17)",decl:{start:{line:283,column:61},end:{line:283,column:62}},loc:{start:{line:283,column:75},end:{line:283,column:106}},line:283},18:{name:"(anonymous_18)",decl:{start:{line:283,column:112},end:{line:283,column:113}},loc:{start:{line:283,column:126},end:{line:295,column:5}},line:283},19:{name:"(anonymous_19)",decl:{start:{line:291,column:20},end:{line:291,column:21}},loc:{start:{line:291,column:26},end:{line:291,column:107}},line:291},20:{name:"(anonymous_20)",decl:{start:{line:319,column:23},end:{line:319,column:24}},loc:{start:{line:319,column:45},end:{line:319,column:109}},line:319}},branchMap:{0:{loc:{start:{line:37,column:2},end:{line:40,column:3}},type:"if",locations:[{start:{line:37,column:2},end:{line:40,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},1:{loc:{start:{line:38,column:4},end:{line:38,column:43}},type:"if",locations:[{start:{line:38,column:4},end:{line:38,column:43}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:38},2:{loc:{start:{line:41,column:2},end:{line:44,column:3}},type:"if",locations:[{start:{line:41,column:2},end:{line:44,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:41},3:{loc:{start:{line:42,column:4},end:{line:42,column:50}},type:"if",locations:[{start:{line:42,column:4},end:{line:42,column:50}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:42},4:{loc:{start:{line:45,column:2},end:{line:49,column:3}},type:"if",locations:[{start:{line:45,column:2},end:{line:49,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:45},5:{loc:{start:{line:46,column:4},end:{line:46,column:43}},type:"if",locations:[{start:{line:46,column:4},end:{line:46,column:43}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:46},6:{loc:{start:{line:47,column:4},end:{line:47,column:83}},type:"if",locations:[{start:{line:47,column:4},end:{line:47,column:83}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:47},7:{loc:{start:{line:47,column:8},end:{line:47,column:57}},type:"binary-expr",locations:[{start:{line:47,column:8},end:{line:47,column:18}},{start:{line:47,column:22},end:{line:47,column:57}}],line:47},8:{loc:{start:{line:50,column:2},end:{line:56,column:3}},type:"if",locations:[{start:{line:50,column:2},end:{line:56,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:50},9:{loc:{start:{line:51,column:4},end:{line:55,column:5}},type:"if",locations:[{start:{line:51,column:4},end:{line:55,column:5}},{start:{line:53,column:11},end:{line:55,column:5}}],line:51},10:{loc:{start:{line:57,column:2},end:{line:59,column:3}},type:"if",locations:[{start:{line:57,column:2},end:{line:59,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:57},11:{loc:{start:{line:60,column:2},end:{line:62,column:3}},type:"if",locations:[{start:{line:60,column:2},end:{line:62,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:60},12:{loc:{start:{line:107,column:19},end:{line:107,column:50}},type:"binary-expr",locations:[{start:{line:107,column:19},end:{line:107,column:44}},{start:{line:107,column:48},end:{line:107,column:50}}],line:107},13:{loc:{start:{line:107,column:20},end:{line:107,column:36}},type:"binary-expr",locations:[{start:{line:107,column:20},end:{line:107,column:30}},{start:{line:107,column:34},end:{line:107,column:36}}],line:107},14:{loc:{start:{line:109,column:4},end:{line:192,column:5}},type:"switch",locations:[{start:{line:110,column:6},end:{line:114,column:10}},{start:{line:115,column:6},end:{line:119,column:10}},{start:{line:120,column:6},end:{line:125,column:10}},{start:{line:126,column:6},end:{line:130,column:10}},{start:{line:131,column:6},end:{line:138,column:10}},{start:{line:139,column:6},end:{line:143,column:10}},{start:{line:144,column:6},end:{line:152,column:10}},{start:{line:153,column:6},end:{line:157,column:10}},{start:{line:158,column:6},end:{line:165,column:10}},{start:{line:166,column:6},end:{line:176,column:10}},{start:{line:177,column:6},end:{line:189,column:10}},{start:{line:190,column:6},end:{line:191,column:18}}],line:109},15:{loc:{start:{line:123,column:19},end:{line:123,column:42}},type:"binary-expr",locations:[{start:{line:123,column:19},end:{line:123,column:33}},{start:{line:123,column:37},end:{line:123,column:42}}],line:123},16:{loc:{start:{line:129,column:15},end:{line:129,column:72}},type:"binary-expr",locations:[{start:{line:129,column:15},end:{line:129,column:25}},{start:{line:129,column:29},end:{line:129,column:72}}],line:129},17:{loc:{start:{line:134,column:17},end:{line:134,column:80}},type:"binary-expr",locations:[{start:{line:134,column:17},end:{line:134,column:29}},{start:{line:134,column:33},end:{line:134,column:80}}],line:134},18:{loc:{start:{line:135,column:19},end:{line:135,column:38}},type:"binary-expr",locations:[{start:{line:135,column:19},end:{line:135,column:33}},{start:{line:135,column:37},end:{line:135,column:38}}],line:135},19:{loc:{start:{line:136,column:19},end:{line:136,column:39}},type:"binary-expr",locations:[{start:{line:136,column:19},end:{line:136,column:33}},{start:{line:136,column:37},end:{line:136,column:39}}],line:136},20:{loc:{start:{line:137,column:18},end:{line:137,column:40}},type:"binary-expr",locations:[{start:{line:137,column:18},end:{line:137,column:31}},{start:{line:137,column:35},end:{line:137,column:40}}],line:137},21:{loc:{start:{line:142,column:15},end:{line:142,column:72}},type:"binary-expr",locations:[{start:{line:142,column:15},end:{line:142,column:25}},{start:{line:142,column:29},end:{line:142,column:72}}],line:142},22:{loc:{start:{line:147,column:17},end:{line:147,column:80}},type:"binary-expr",locations:[{start:{line:147,column:17},end:{line:147,column:29}},{start:{line:147,column:33},end:{line:147,column:80}}],line:147},23:{loc:{start:{line:148,column:19},end:{line:148,column:38}},type:"binary-expr",locations:[{start:{line:148,column:19},end:{line:148,column:33}},{start:{line:148,column:37},end:{line:148,column:38}}],line:148},24:{loc:{start:{line:149,column:19},end:{line:149,column:39}},type:"binary-expr",locations:[{start:{line:149,column:19},end:{line:149,column:33}},{start:{line:149,column:37},end:{line:149,column:39}}],line:149},25:{loc:{start:{line:150,column:18},end:{line:150,column:40}},type:"binary-expr",locations:[{start:{line:150,column:18},end:{line:150,column:31}},{start:{line:150,column:35},end:{line:150,column:40}}],line:150},26:{loc:{start:{line:151,column:20},end:{line:151,column:42}},type:"binary-expr",locations:[{start:{line:151,column:20},end:{line:151,column:35}},{start:{line:151,column:39},end:{line:151,column:42}}],line:151},27:{loc:{start:{line:156,column:15},end:{line:156,column:72}},type:"binary-expr",locations:[{start:{line:156,column:15},end:{line:156,column:25}},{start:{line:156,column:29},end:{line:156,column:72}}],line:156},28:{loc:{start:{line:161,column:17},end:{line:161,column:80}},type:"binary-expr",locations:[{start:{line:161,column:17},end:{line:161,column:29}},{start:{line:161,column:33},end:{line:161,column:80}}],line:161},29:{loc:{start:{line:162,column:19},end:{line:162,column:38}},type:"binary-expr",locations:[{start:{line:162,column:19},end:{line:162,column:33}},{start:{line:162,column:37},end:{line:162,column:38}}],line:162},30:{loc:{start:{line:163,column:19},end:{line:163,column:39}},type:"binary-expr",locations:[{start:{line:163,column:19},end:{line:163,column:33}},{start:{line:163,column:37},end:{line:163,column:39}}],line:163},31:{loc:{start:{line:164,column:20},end:{line:164,column:42}},type:"binary-expr",locations:[{start:{line:164,column:20},end:{line:164,column:35}},{start:{line:164,column:39},end:{line:164,column:42}}],line:164}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0,0,0,0,0,0,0,0,0,0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0],26:[0,0],27:[0,0],28:[0,0],29:[0,0],30:[0,0],31:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalSources.tsx"],names:[],mappings:"AAgCU,cACA,YADA;AAhCV,OAAO,WAAW;AAClB,SAAQ,oBAAoB,gBAAe;AAC3C,OAAO,YAAY;AAEnB,SAA0B,uBAAuB;AAEjD,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,4BAA4C;AAEnD,OAAO,WAAW;AAClB,SAAS,cAAc,WAAW,oBAAoB;AACtD,OAAO,mBAAmB;AAU1B,MAAM,qBAAqB,MAAM,UAA6B;AAAA,EAC5D,SAAS;AACP,WAAO,oBAAC,SAAI,WAAU,0BACpB;AAAA,MAAC;AAAA;AAAA,QACC,WAAU;AAAA,QACV,SAAS,MAAM,KAAK,MAAM,SAAS,KAAK,MAAM,EAAE;AAAA,QAEhD;AAAA,+BAAC,SAAI,WAAU,+BACb;AAAA,gCAAC,OAAE,WAAU,+BAA+B,eAAK,MAAM,OAAM;AAAA,YAC7D,qBAAC,OAAE,WAAU,6BAA4B;AAAA;AAAA,cAAE,KAAK,MAAM;AAAA,eAAG;AAAA,aAC3D;AAAA,UACA,oBAAC,UAAK,WAAU,kBAAiB;AAAA,UACjC,oBAAC,sBAAmB;AAAA;AAAA;AAAA,IACtB,GACF;AAAA,EACF;AACF;AAEA,SAAS,WAAW,QAA6B;AAC/C,MAAG,OAAO,SAAS,UAAU;AAC3B,QAAG,OAAO,MAAO,QAAO;AACxB,WAAO;AAAA,EACT;AACA,MAAG,OAAO,SAAS,cAAc;AAC/B,QAAG,OAAO,MAAO,QAAO;AACxB,WAAO;AAAA,EACT;AACA,MAAG,OAAO,SAAS,UAAU;AAC3B,QAAG,OAAO,MAAO,QAAO;AACxB,QAAG,OAAO,OAAO,OAAO,IAAI,WAAW,YAAY,EAAG,QAAO;AAC7D,WAAO;AAAA,EACT;AACA,MAAG,OAAO,SAAS,WAAW;AAC5B,QAAI,OAAO,OAAO,SAAU,UAAU;AACpC,aAAO;AAAA,IACT,OACK;AACH,aAAO;AAAA,IACT;AAAA,EACF;AACA,MAAG,OAAO,SAAS,SAAS;AAC1B,WAAO;AAAA,EACT;AACA,MAAG,OAAO,SAAS,SAAS;AAC1B,WAAO;AAAA,EACT;AACA,SAAO;AACT;AASA,MAAM,qCAAqC,MAAM,UAA6C;AAAA,EAC5F,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SAAI,WAAU,sCACpB;AAAA,2BAAC,SAAI,WAAU,6CACb;AAAA,6BAAC,UAAK,WAAU,gDAA+C;AAAA;AAAA,UAAE,KAAK,MAAM;AAAA,WAAS;AAAA,QACrF,oBAAC,UAAK,WAAU,kBAAiB;AAAA,QACjC;AAAA,UAAC;AAAA;AAAA,YACC,cAAY,EAAE,gCAAgC,EAAC,UAAU,KAAK,MAAM,SAAQ,CAAC;AAAA,YAC7E,WAAU;AAAA,YACV,SAAS,MAAK,KAAK,MAAM,SAAS,KAAK,MAAM,QAAQ;AAAA,YACrD,OAAO,EAAC,iBAAiB,cAAa;AAAA,YAEtC,8BAAC,YAAS;AAAA;AAAA,QACZ;AAAA,SACF;AAAA,MACA,oBAAC,SAAI,WAAU,8CACb;AAAA,QAAC;AAAA;AAAA,UACC,UAAU,KAAK,MAAM;AAAA,UACrB,MAAM,WAAW,KAAK,MAAM,MAAM;AAAA,UAClC,QAAQ,KAAK,MAAM;AAAA;AAAA,MACrB,GACF;AAAA,OACF;AAAA,EACF;AACF;AAYA,MAAM,kBAAkB,MAAM,UAA0C;AAAA,EACtE,YAAY,OAAuB;AACjC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,MAAM;AAAA,MACN,UAAU,MAAM,WAAW;AAAA,MAC3B,QAAQ,KAAK,cAAc,iBAAiB;AAAA,IAC9C;AAAA,EACF;AAAA,EAEA,cAAc,MAAuC;AACnD,UAAM,UAAU,KAAK,SAAS,CAAC,GAAG,UAAU,CAAC;AAC7C,UAAM,EAAC,SAAQ,IAAI,OAAO;AAE1B,YAAO,MAAM;AAAA,MACb,KAAK;AAAkB,eAAO;AAAA,UAC5B,MAAM;AAAA,UACN,KAAK,GAAG,QAAQ;AAAA,QAClB;AAAA,MACA,KAAK;AAAe,eAAO;AAAA,UACzB,MAAM;AAAA,UACN,MAAM,GAAG,QAAQ;AAAA,QACnB;AAAA,MACA,KAAK;AAAgB,eAAO;AAAA,UAC1B,MAAM;AAAA,UACN,SAAU,OAAsC,WAAW;AAAA,UAC3D,MAAM;AAAA,QACR;AAAA,MACA,KAAK;AAAmB,eAAO;AAAA,UAC7B,MAAM;AAAA,UACN,KAAM,OAAqC,OAAO,GAAG,QAAQ;AAAA,QAC/D;AAAA,MACA,KAAK;AAAe,eAAO;AAAA,UACzB,MAAM;AAAA,UACN,OAAQ,OAAqC,SAAS,CAAC,GAAG,QAAQ,kCAAkC;AAAA,UACpG,SAAU,OAAqC,WAAW;AAAA,UAC1D,SAAU,OAAqC,WAAW;AAAA,UAC1D,QAAS,OAAqC,UAAU;AAAA,QAC1D;AAAA,MACA,KAAK;AAAmB,eAAO;AAAA,UAC7B,MAAM;AAAA,UACN,KAAM,OAAqC,OAAO,GAAG,QAAQ;AAAA,QAC/D;AAAA,MACA,KAAK;AAAe,eAAO;AAAA,UACzB,MAAM;AAAA,UACN,OAAQ,OAAqC,SAAS,CAAC,GAAG,QAAQ,kCAAkC;AAAA,UACpG,SAAU,OAAqC,WAAW;AAAA,UAC1D,SAAU,OAAqC,WAAW;AAAA,UAC1D,QAAS,OAAqC,UAAU;AAAA,UACxD,UAAW,OAAqC,YAAY;AAAA,QAC9D;AAAA,MACA,KAAK;AAAuB,eAAO;AAAA,UACjC,MAAM;AAAA,UACN,KAAM,OAAwC,OAAO,GAAG,QAAQ;AAAA,QAClE;AAAA,MACA,KAAK;AAAsB,eAAO;AAAA,UAChC,MAAM;AAAA,UACN,OAAQ,OAAwC,SAAS,CAAC,GAAG,QAAQ,kCAAkC;AAAA,UACvG,SAAU,OAAwC,WAAW;AAAA,UAC7D,SAAU,OAAwC,WAAW;AAAA,UAC7D,UAAW,OAAwC,YAAY;AAAA,QACjE;AAAA,MACA,KAAK;AAAS,eAAO;AAAA,UACnB,MAAM;AAAA,UACN,KAAK,GAAG,QAAQ;AAAA,UAChB,aAAa;AAAA,YACX,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,UACN;AAAA,QACF;AAAA,MACA,KAAK;AAAS,eAAO;AAAA,UACnB,MAAM;AAAA,UACN,MAAM;AAAA,YACJ,GAAG,QAAQ;AAAA,UACb;AAAA,UACA,aAAa;AAAA,YACX,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,UACN;AAAA,QACF;AAAA,MACA;AAAS,eAAO,CAAC;AAAA,IACjB;AAAA,EACF;AAAA,EAEA,QAAQ,MAAM;AACZ,UAAM,EAAC,QAAQ,SAAQ,IAAI,KAAK;AAChC,SAAK,MAAM,MAAM,UAAU,MAAM;AAAA,EACnC;AAAA,EAEA,iBAAiB,CAAC,WAAgC;AAChD,SAAK,SAAS,EAAC,OAAM,CAAC;AAAA,EACxB;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AAQrB,UAAM,sBAAsB;AAAA,MAC1B,KAAK,OAAO,cAAc,KAAK;AAAA,IACjC;AAEA,WAAO,qBAAC,SAAI,WAAU,uBACpB;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,WAAW;AAAA,UACpB,WAAW,EAAC,KAAK,EAAE,wFAAwF,EAAC;AAAA,UAC5G,OAAO,KAAK,MAAM;AAAA,UAClB,UAAU,CAAC,MAAc,KAAK,SAAS,EAAE,UAAU,EAAC,CAAC;AAAA,UACrD,eAAY;AAAA;AAAA,MACd;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,aAAa;AAAA,UACtB,WAAW;AAAA,UACX,SAAS;AAAA,YACP,CAAC,gBAAgB,EAAE,gBAAgB,CAAC;AAAA,YACpC,CAAC,eAAe,EAAE,eAAe,CAAC;AAAA,YAClC,CAAC,mBAAmB,EAAE,uBAAuB,CAAC;AAAA,YAC9C,CAAC,eAAe,EAAE,oBAAoB,CAAC;AAAA,YACvC,CAAC,mBAAmB,EAAE,uBAAuB,CAAC;AAAA,YAC9C,CAAC,eAAe,EAAE,oBAAoB,CAAC;AAAA,YACvC,CAAC,uBAAuB,EAAE,2BAA2B,CAAC;AAAA,YACtD,CAAC,sBAAsB,EAAE,uBAAuB,CAAC;AAAA,YACjD,CAAC,kBAAkB,EAAE,kBAAkB,CAAC;AAAA,YACxC,CAAC,SAAS,EAAE,OAAO,CAAC;AAAA,YACpB,CAAC,SAAS,EAAE,OAAO,CAAC;AAAA,UACtB;AAAA,UACA,UAAU,UAAQ,KAAK,SAAS,EAAC,MAA0B,QAAQ,KAAK,cAAc,IAAkB,EAAC,CAAC;AAAA,UAC1G,OAAO,KAAK,MAAM;AAAA,UAClB,eAAY;AAAA;AAAA,MACd;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,UAAU,KAAK;AAAA,UACf,MAAM,KAAK,MAAM;AAAA,UACjB,QAAQ,KAAK,MAAM;AAAA;AAAA,MACrB;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,SAAS,KAAK;AAAA,UACd,eAAY;AAAA,UAEX,YAAE,YAAY;AAAA;AAAA,MACjB;AAAA,OACF;AAAA,EACF;AACF;AASA,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,WAAW,QAAqE;AAC9E,UAAM,iBAAiB,EAAC,GAAG,OAAM;AACjC,WAAO,eAAe,OAAO;AAC7B,WAAO;AAAA,EACT;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,GAAG,SAAQ,IAAI,KAAK;AAC3B,UAAM,YAAY,EAAC,GAAG,MAAM,KAAK,MAAM,MAAM,QAAQ,KAAK,MAAM,OAAM;AACtE,UAAM,gBAAgB,OAAO,KAAK,SAAS,OAAO,EAAE,IAAI,cAAY;AAClE,YAAM,SAAS,SAAS,QAAQ,QAAQ;AACxC,aAAO;AAAA,QAAC;AAAA;AAAA,UAEN;AAAA,UACA;AAAA,UACA,UAAU,CAAC,QAA6B,KAAK,MAAM,eAAe,aAAa,UAAU,UAAU,GAAG,CAAC;AAAA,UACvG,UAAU,MAAM,KAAK,MAAM,eAAe,aAAa,UAAU,QAAQ,CAAC;AAAA,UACzE,GAAG;AAAA;AAAA,QALC;AAAA,MAMP;AAAA,IACF,CAAC;AAED,UAAM,iBAAiB,OAAO,KAAK,aAAa,EAAE,OAAO,CAAC,aAAqB,EAAE,YAAY,SAAS,QAAQ,EAAE,IAAI,CAAC,aAAqB;AACxI,YAAM,SAAS,cAAc,QAAsC;AACnE,aAAO;AAAA,QAAC;AAAA;AAAA,UAEN,IAAI;AAAA,UACJ,MAAM,OAAO;AAAA,UACb,OAAO,OAAO;AAAA,UACd,UAAU,MAAM,KAAK,MAAM,eAAe,UAAU,UAAU,UAAU,KAAK,WAAW,MAAM,CAAC,CAAC;AAAA;AAAA,QAJ3F;AAAA,MAKP;AAAA,IACF,CAAC;AAED,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,SAAS;AAAA,QAElB;AAAA,+BAAC,aAAQ,WAAU,0BACjB;AAAA,gCAAC,QAAI,YAAE,gBAAgB,GAAE;AAAA,YACxB;AAAA,aACH;AAAA,UAEA,qBAAC,aAAQ,WAAU,0BACjB;AAAA,gCAAC,QAAI,YAAE,sBAAsB,GAAE;AAAA,YAC/B,oBAAC,OACE,YAAE,0DAA0D,GAC/D;AAAA,YACA,oBAAC,SAAI,WAAU,2BAA0B,OAAO,EAAC,UAAU,IAAG,GAC3D,0BACH;AAAA,aACF;AAAA,UAEA,qBAAC,aAAQ,WAAU,0BACjB;AAAA,gCAAC,QAAI,YAAE,gBAAgB,GAAE;AAAA,YACzB,oBAAC,OAAG,YAAE,8FAA8F,GAAE;AAAA,YACtG;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,CAAC,UAAkB,WAAgC,KAAK,MAAM,eAAe,UAAU,UAAU,UAAU,MAAM,CAAC;AAAA,gBACxH,GAAG;AAAA;AAAA,YACN;AAAA,aACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"1a321f05fdc2b3edcde8eeb4fd25459ef69ddd1e"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return un=function(){return a},a}un();class kfe extends nr.Component{render(){return un().f[0]++,un().s[0]++,ue.jsx("div",{className:"maputnik-public-source",children:ue.jsxs(Ja,{className:"maputnik-public-source-select",onClick:()=>(un().f[1]++,un().s[1]++,this.props.onSelect(this.props.id)),children:[ue.jsxs("div",{className:"maputnik-public-source-info",children:[ue.jsx("p",{className:"maputnik-public-source-name",children:this.props.title}),ue.jsxs("p",{className:"maputnik-public-source-id",children:["#",this.props.id]})]}),ue.jsx("span",{className:"maputnik-space"}),ue.jsx($U,{})]})})}}function Tfe(n){return un().f[2]++,un().s[2]++,n.type==="raster"?(un().b[0][0]++,un().s[3]++,n.tiles?(un().b[1][0]++,un().s[4]++,"tile_raster"):(un().b[1][1]++,un().s[5]++,"tilejson_raster")):(un().b[0][1]++,un().s[6]++,n.type==="raster-dem"?(un().b[2][0]++,un().s[7]++,n.tiles?(un().b[3][0]++,un().s[8]++,"tilexyz_raster-dem"):(un().b[3][1]++,un().s[9]++,"tilejson_raster-dem")):(un().b[2][1]++,un().s[10]++,n.type==="vector"?(un().b[4][0]++,un().s[11]++,n.tiles?(un().b[5][0]++,un().s[12]++,"tile_vector"):(un().b[5][1]++,un().s[13]++,un().b[7][0]++,n.url&&(un().b[7][1]++,n.url.startsWith("pmtiles://"))?(un().b[6][0]++,un().s[14]++,"pmtiles_vector"):(un().b[6][1]++,un().s[15]++,"tilejson_vector"))):(un().b[4][1]++,un().s[16]++,n.type==="geojson"?(un().b[8][0]++,un().s[17]++,typeof n.data=="string"?(un().b[9][0]++,un().s[18]++,"geojson_url"):(un().b[9][1]++,un().s[19]++,"geojson_json")):(un().b[8][1]++,un().s[20]++,n.type==="image"?(un().b[10][0]++,un().s[21]++,"image"):(un().b[10][1]++,un().s[22]++,n.type==="video"?(un().b[11][0]++,un().s[23]++,"video"):(un().b[11][1]++,un().s[24]++,null))))))}class Pfe extends nr.Component{render(){un().f[3]++;const e=(un().s[25]++,this.props.t);return un().s[26]++,ue.jsxs("div",{className:"maputnik-active-source-type-editor",children:[ue.jsxs("div",{className:"maputnik-active-source-type-editor-header",children:[ue.jsxs("span",{className:"maputnik-active-source-type-editor-header-id",children:["#",this.props.sourceId]}),ue.jsx("span",{className:"maputnik-space"}),ue.jsx(Ja,{"aria-label":e("Remove '{{sourceId}}' source",{sourceId:this.props.sourceId}),className:"maputnik-active-source-type-editor-header-delete",onClick:()=>(un().f[4]++,un().s[27]++,this.props.onDelete(this.props.sourceId)),style:{backgroundColor:"transparent"},children:ue.jsx($y,{})})]}),ue.jsx("div",{className:"maputnik-active-source-type-editor-content",children:ue.jsx(EG,{onChange:this.props.onChange,mode:Tfe(this.props.source),source:this.props.source})})]})}}class Kfe extends nr.Component{constructor(t){un().f[5]++,un().s[28]++;super(t);Pn(this,"onAdd",(un().s[45]++,()=>{un().f[7]++;const{source:t,sourceId:r}=(un().s[46]++,this.state);un().s[47]++,this.props.onAdd(r,t)}));Pn(this,"onChangeSource",(un().s[48]++,t=>{un().f[8]++,un().s[49]++,this.setState({source:t})}));un().s[29]++,this.state={mode:"tilejson_vector",sourceId:_c.generateId(),source:this.defaultSource("tilejson_vector")}}defaultSource(t){un().f[6]++;const r=(un().s[30]++,un().b[12][0]++,(un().b[13][0]++,this.state||(un().b[13][1]++,{})).source||(un().b[12][1]++,{})),{protocol:i}=(un().s[31]++,window.location);switch(un().s[32]++,t){case"pmtiles_vector":return un().b[14][0]++,un().s[33]++,{type:"vector",url:`${i}//localhost:3000/file.pmtiles`};case"geojson_url":return un().b[14][1]++,un().s[34]++,{type:"geojson",data:`${i}//localhost:3000/geojson.json`};case"geojson_json":return un().b[14][2]++,un().s[35]++,{type:"geojson",cluster:(un().b[15][0]++,r.cluster||(un().b[15][1]++,!1)),data:""};case"tilejson_vector":return un().b[14][3]++,un().s[36]++,{type:"vector",url:(un().b[16][0]++,r.url||(un().b[16][1]++,`${i}//localhost:3000/tilejson.json`))};case"tile_vector":return un().b[14][4]++,un().s[37]++,{type:"vector",tiles:(un().b[17][0]++,r.tiles||(un().b[17][1]++,[`${i}//localhost:3000/{x}/{y}/{z}.pbf`])),minzoom:(un().b[18][0]++,r.minzoom||(un().b[18][1]++,0)),maxzoom:(un().b[19][0]++,r.maxzoom||(un().b[19][1]++,14)),scheme:(un().b[20][0]++,r.scheme||(un().b[20][1]++,"xyz"))};case"tilejson_raster":return un().b[14][5]++,un().s[38]++,{type:"raster",url:(un().b[21][0]++,r.url||(un().b[21][1]++,`${i}//localhost:3000/tilejson.json`))};case"tile_raster":return un().b[14][6]++,un().s[39]++,{type:"raster",tiles:(un().b[22][0]++,r.tiles||(un().b[22][1]++,[`${i}//localhost:3000/{x}/{y}/{z}.png`])),minzoom:(un().b[23][0]++,r.minzoom||(un().b[23][1]++,0)),maxzoom:(un().b[24][0]++,r.maxzoom||(un().b[24][1]++,14)),scheme:(un().b[25][0]++,r.scheme||(un().b[25][1]++,"xyz")),tileSize:(un().b[26][0]++,r.tileSize||(un().b[26][1]++,512))};case"tilejson_raster-dem":return un().b[14][7]++,un().s[40]++,{type:"raster-dem",url:(un().b[27][0]++,r.url||(un().b[27][1]++,`${i}//localhost:3000/tilejson.json`))};case"tilexyz_raster-dem":return un().b[14][8]++,un().s[41]++,{type:"raster-dem",tiles:(un().b[28][0]++,r.tiles||(un().b[28][1]++,[`${i}//localhost:3000/{x}/{y}/{z}.png`])),minzoom:(un().b[29][0]++,r.minzoom||(un().b[29][1]++,0)),maxzoom:(un().b[30][0]++,r.maxzoom||(un().b[30][1]++,14)),tileSize:(un().b[31][0]++,r.tileSize||(un().b[31][1]++,512))};case"image":return un().b[14][9]++,un().s[42]++,{type:"image",url:`${i}//localhost:3000/image.png`,coordinates:[[0,0],[0,0],[0,0],[0,0]]};case"video":return un().b[14][10]++,un().s[43]++,{type:"video",urls:[`${i}//localhost:3000/movie.mp4`],coordinates:[[0,0],[0,0],[0,0],[0,0]]};default:return un().b[14][11]++,un().s[44]++,{}}}render(){un().f[9]++;const t=(un().s[50]++,this.props.t),r=(un().s[51]++,{doc:ts.source_vector.type.doc});return un().s[52]++,ue.jsxs("div",{className:"maputnik-add-source",children:[ue.jsx(Yp,{label:t("Source ID"),fieldSpec:{doc:t("Unique ID that identifies the source and is used in the layer to reference the source.")},value:this.state.sourceId,onChange:i=>(un().f[10]++,un().s[53]++,this.setState({sourceId:i})),"data-wd-key":"modal:sources.add.source_id"}),ue.jsx(O3,{label:t("Source Type"),fieldSpec:r,options:[["geojson_json",t("GeoJSON (JSON)")],["geojson_url",t("GeoJSON (URL)")],["tilejson_vector",t("Vector (TileJSON URL)")],["tile_vector",t("Vector (Tile URLs)")],["tilejson_raster",t("Raster (TileJSON URL)")],["tile_raster",t("Raster (Tile URLs)")],["tilejson_raster-dem",t("Raster DEM (TileJSON URL)")],["tilexyz_raster-dem",t("Raster DEM (XYZ URLs)")],["pmtiles_vector",t("Vector (PMTiles)")],["image",t("Image")],["video",t("Video")]],onChange:i=>(un().f[11]++,un().s[54]++,this.setState({mode:i,source:this.defaultSource(i)})),value:this.state.mode,"data-wd-key":"modal:sources.add.source_type"}),ue.jsx(EG,{onChange:this.onChangeSource,mode:this.state.mode,source:this.state.source}),ue.jsx(Ja,{className:"maputnik-add-source-button",onClick:this.onAdd,"data-wd-key":"modal:sources.add.add_source",children:t("Add Source")})]})}}class Dfe extends nr.Component{stripTitle(e){un().f[12]++;const t=(un().s[55]++,{...e});return un().s[56]++,delete t.title,un().s[57]++,t}render(){un().f[13]++;const{t:e,mapStyle:t}=(un().s[58]++,this.props),r=(un().s[59]++,{t:e,i18n:this.props.i18n,tReady:this.props.tReady}),i=(un().s[60]++,Object.keys(t.sources).map(a=>{un().f[14]++;const o=(un().s[61]++,t.sources[a]);return un().s[62]++,ue.jsx(Pfe,{sourceId:a,source:o,onChange:d=>(un().f[15]++,un().s[63]++,this.props.onStyleChanged(BG(t,a,d))),onDelete:()=>(un().f[16]++,un().s[64]++,this.props.onStyleChanged(Sfe(t,a))),...r},a)})),s=(un().s[65]++,Object.keys(JR).filter(a=>(un().f[17]++,un().s[66]++,!(a in t.sources))).map(a=>{un().f[18]++;const o=(un().s[67]++,JR[a]);return un().s[68]++,ue.jsx(kfe,{id:a,type:o.type,title:o.title,onSelect:()=>(un().f[19]++,un().s[69]++,this.props.onStyleChanged(XR(t,a,this.stripTitle(o))))},a)}));return un().s[70]++,ue.jsxs(G0,{"data-wd-key":"modal:sources",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Sources"),children:[ue.jsxs("section",{className:"maputnik-modal-section",children:[ue.jsx("h1",{children:e("Active Sources")}),i]}),ue.jsxs("section",{className:"maputnik-modal-section",children:[ue.jsx("h1",{children:e("Choose Public Source")}),ue.jsx("p",{children:e("Add one of the publicly available sources to your style.")}),ue.jsx("div",{className:"maputnik-public-sources",style:{maxWidth:500},children:s})]}),ue.jsxs("section",{className:"maputnik-modal-section",children:[ue.jsx("h1",{children:e("Add New Source")}),ue.jsx("p",{children:e("Add a new source to your style. You can only choose the source type and id at creation time!")}),ue.jsx(Kfe,{onAdd:(a,o)=>(un().f[20]++,un().s[71]++,this.props.onStyleChanged(XR(t,a,o))),...r})]})]})}}const Rfe=(un().s[72]++,Ns()(Dfe));var Ub={},eF;function Ffe(){if(eF)return Ub;eF=1,Object.defineProperty(Ub,"__esModule",{value:!0});var n=Object.assign||function(P){for(var z=1;z<arguments.length;z++){var j=arguments[z];for(var q in j)Object.prototype.hasOwnProperty.call(j,q)&&(P[q]=j[q])}return P},e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},t=function(){function P(z,j){for(var q=0;q<j.length;q++){var Y=j[q];Y.enumerable=Y.enumerable||!1,Y.configurable=!0,"value"in Y&&(Y.writable=!0),Object.defineProperty(z,Y.key,Y)}}return function(z,j,q){return j&&P(z.prototype,j),q&&P(z,q),z}}(),r=za(),i=d(r),s=$C(),a=o(s);function o(P){return P&&P.__esModule?P:{default:P}}function d(P){if(P&&P.__esModule)return P;var z={};if(P!=null)for(var j in P)Object.prototype.hasOwnProperty.call(P,j)&&(z[j]=P[j]);return z.default=P,z}function g(P,z){var j={};for(var q in P)z.indexOf(q)>=0||Object.prototype.hasOwnProperty.call(P,q)&&(j[q]=P[q]);return j}function b(P,z){if(!(P instanceof z))throw new TypeError("Cannot call a class as a function")}function E(P,z){if(!P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return z&&(typeof z=="object"||typeof z=="function")?z:P}function S(P,z){if(typeof z!="function"&&z!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof z);P.prototype=Object.create(z&&z.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),z&&(Object.setPrototypeOf?Object.setPrototypeOf(P,z):P.__proto__=z)}var I=function(P){S(z,P);function z(j){b(this,z);var q=E(this,(z.__proto__||Object.getPrototypeOf(z)).call(this,j));q.handleChange=function(ie){var te=Array.prototype.slice.call(ie.target.files),V=(q.props.as||"url").toLowerCase();Promise.all(te.map(function(ne){return new Promise(function(G,oe){var he=new FileReader;switch(he.onload=function(pe){G([pe,ne])},V){case"binary":{he.readAsBinaryString(ne);break}case"buffer":{he.readAsArrayBuffer(ne);break}case"text":{he.readAsText(ne);break}case"url":{he.readAsDataURL(ne);break}}})})).then(function(ne){q.props.onChange(ie,ne)})},q.triggerInput=function(){var ie=a.default.findDOMNode(q._reactFileReaderInput);ie&&ie.click()};var Y=(typeof window>"u"?"undefined":e(window))==="object"?window:{};return(!Y.File||!Y.FileReader||!Y.FileList||!Y.Blob)&&console.warn("[react-file-reader-input] Some file APIs detected as not supported. File reader functionality may not fully work."),q}return t(z,[{key:"render",value:function(){var q=this,Y=this.props;Y.as;var ie=Y.children,te=Y.style,V=g(Y,["as","children","style"]),ne=ie?{position:"absolute",top:"-9999px"}:{};return i.createElement("div",{className:"_react-file-reader-input",onClick:this.triggerInput,style:te},i.createElement("input",n({},V,{type:"file",ref:function(oe){q._reactFileReaderInput=oe},onChange:this.handleChange,onClick:function(){q._reactFileReaderInput.value=null},style:ne})),ie)}}]),z}(i.Component);return Ub.default=I,Ub}var Lfe=Ffe();const Ufe=el(Lfe);function Ah(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalLoading.tsx",e="8092b056f21d597f3cd7d476fbebca118ff97879",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalLoading.tsx",statementMap:{0:{start:{line:8,column:4},end:{line:8,column:24}},1:{start:{line:11,column:14},end:{line:11,column:26}},2:{start:{line:12,column:4},end:{line:29,column:6}},3:{start:{line:20,column:26},end:{line:20,column:42}},4:{start:{line:23,column:28},end:{line:23,column:49}},5:{start:{line:26,column:137},end:{line:26,column:159}},6:{start:{line:32,column:21},end:{line:32,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:21},end:{line:9,column:3}},line:7},1:{name:"(anonymous_1)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:30,column:3}},line:10},2:{name:"(anonymous_2)",decl:{start:{line:20,column:19},end:{line:20,column:20}},loc:{start:{line:20,column:26},end:{line:20,column:42}},line:20},3:{name:"(anonymous_3)",decl:{start:{line:23,column:22},end:{line:23,column:23}},loc:{start:{line:23,column:28},end:{line:23,column:49}},line:23},4:{name:"(anonymous_4)",decl:{start:{line:26,column:130},end:{line:26,column:131}},loc:{start:{line:26,column:137},end:{line:26,column:159}},line:26}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0,1:0,2:0,3:0,4:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalLoading.tsx"],names:[],mappings:"AAuBW,SAWL,KAXK;AAvBX,OAAO,WAAW;AAElB,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,SAA0B,uBAAuB;AAWjD,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,gBAAgB,GAAU;AAExB,MAAE,gBAAgB;AAAA,EACpB;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,oBAAoB;AAAA,QACpB,eAAe;AAAA;AAAA,UAEb,SAAS,CAAC,MAAa,cAAc,CAAC;AAAA,QACxC;AAAA,QACA,OAAO,KAAK,MAAM;AAAA,QAClB,cAAc,MAAM,KAAK,MAAM,SAAS;AAAA,QAExC;AAAA,8BAAC,OACE,eAAK,MAAM,SACd;AAAA,UACA,oBAAC,OAAE,WAAU,4BACX,8BAAC,eAAY,SAAS,CAAC,MAAM,KAAK,MAAM,SAAS,CAAC,GAC/C,YAAE,QAAQ,GACb,GACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8092b056f21d597f3cd7d476fbebca118ff97879"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Ah=function(){return a},a}Ah();class zfe extends nr.Component{underlayOnClick(e){Ah().f[0]++,Ah().s[0]++,e.stopPropagation()}render(){Ah().f[1]++;const e=(Ah().s[1]++,this.props.t);return Ah().s[2]++,ue.jsxs(G0,{"data-wd-key":"modal:loading",isOpen:this.props.isOpen,underlayClickExits:!1,underlayProps:{onClick:t=>(Ah().f[2]++,Ah().s[3]++,underlayProps(t))},title:this.props.title,onOpenToggle:()=>(Ah().f[3]++,Ah().s[4]++,this.props.onCancel()),children:[ue.jsx("p",{children:this.props.message}),ue.jsx("p",{className:"maputnik-dialog__buttons",children:ue.jsx(Ja,{onClick:t=>(Ah().f[4]++,Ah().s[5]++,this.props.onCancel(t)),children:e("Cancel")})})]})}}const jfe=(Ah().s[6]++,Ns()(zfe)),OG=[{id:"0-empty-style",title:"Empty Style",url:"https://cdn.jsdelivr.net/gh/maputnik/editor@9cf74ca405d2be0608b57db8109cf3a6af5b9f49/src/config/empty-style.json",thumbnail:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAECAQAAAAHDYbIAAAAEUlEQVR42mP8/58BDhiJ4wAA974H/U5Xe1oAAAAASUVORK5CYII="},{id:"americana",title:"Americana",url:"https://americanamap.org/style.json",thumbnail:"https://github.com/maplibre/maputnik/assets/649392/23fa75ad-63e6-43f5-8837-03cdb0428bac"},{id:"dark-matter",title:"Dark Matter",url:"https://cdn.jsdelivr.net/gh/openmaptiles/dark-matter-gl-style@v1.9/style.json",thumbnail:"https://maputnik.github.io/thumbnails/dark-matter.png"},{id:"maptiler-basic-gl-style",title:"MapTiler Basic",url:"https://cdn.jsdelivr.net/gh/openmaptiles/klokantech-basic-gl-style@v1.10/style.json",thumbnail:"https://maputnik.github.io/thumbnails/klokantech-basic.png"},{id:"maptiler-toner-gl-style",title:"Toner",url:"https://cdn.jsdelivr.net/gh/openmaptiles/toner-gl-style@v1.0/style.json",thumbnail:"https://maputnik.github.io/thumbnails/toner.png"},{id:"os-zoomstack-light",title:"Zoomstack Light",url:"https://s3-eu-west-1.amazonaws.com/tiles.os.uk/v2/styles/open-zoomstack-light/style.json",thumbnail:"https://maputnik.github.io/thumbnails/os-zoomstack-light.png"},{id:"os-zoomstack-night",title:"Zoomstack Night",url:"https://s3-eu-west-1.amazonaws.com/tiles.os.uk/v2/styles/open-zoomstack-night/style.json",thumbnail:"https://maputnik.github.io/thumbnails/os-zoomstack-night.png"},{id:"os-zoomstack-outdoor",title:"Zoomstack Outdoor",url:"https://s3-eu-west-1.amazonaws.com/tiles.os.uk/v2/styles/open-zoomstack-outdoor/style.json",thumbnail:"https://maputnik.github.io/thumbnails/os-zoomstack-outdoor.png"},{id:"os-zoomstack-road",title:"Zoomstack Road",url:"https://s3-eu-west-1.amazonaws.com/tiles.os.uk/v2/styles/open-zoomstack-road/style.json",thumbnail:"https://maputnik.github.io/thumbnails/os-zoomstack-road.png"},{id:"osm-bright",title:"OSM Bright",url:"https://cdn.jsdelivr.net/gh/openmaptiles/osm-bright-gl-style@v1.11/style.json",thumbnail:"https://maputnik.github.io/thumbnails/osm-bright.png"},{id:"osm-liberty",title:"OSM Liberty",url:"https://maputnik.github.io/osm-liberty/style.json",thumbnail:"https://maputnik.github.io/thumbnails/osm-liberty.png"},{id:"osm-openmaptiles",title:"OSM OpenMapTiles",url:"https://api.maptiler.com/maps/openstreetmap/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL",thumbnail:"https://openmaptiles.org/img/styles/openmaptiles.png"},{id:"positron",title:"Positron",url:"https://cdn.jsdelivr.net/gh/openmaptiles/positron-gl-style@v1.9/style.json",thumbnail:"https://maputnik.github.io/thumbnails/positron.png"},{id:"protomaps-light",title:"Protomaps Light",url:"https://api.protomaps.com/styles/v4/light/en.json?key=d828297496b11844",thumbnail:"https://github.com/user-attachments/assets/911f9765-4a7d-4736-9ec0-f2d4c90ae587"},{id:"stadia-outdoors",title:"Stadia Outdoors",url:"https://tiles.stadiamaps.com/styles/outdoors.json",thumbnail:"https://tiles.stadiamaps.com/static/outdoors.png?size=480x320&center=47.350259,8.49035&zoom=16"},{id:"versatiles-colorful",title:"Versatiles Colorful",url:"https://tiles.versatiles.org/assets/styles/colorful.json",thumbnail:"https://github.com/maplibre/maputnik/assets/649392/6cd69818-c541-46e4-a920-65fb4f654931"}];function ar(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalOpen.tsx",e="29ff9eb08a4518c25ccd9ea0089ac05d05f682b1",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalOpen.tsx",statementMap:{0:{start:{line:15,column:4},end:{line:38,column:9}},1:{start:{line:20,column:23},end:{line:20,column:58}},2:{start:{line:43,column:4},end:{line:43,column:17}},3:{start:{line:44,column:4},end:{line:46,column:6}},4:{start:{line:49,column:4},end:{line:51,column:7}},5:{start:{line:54,column:4},end:{line:54,column:31}},6:{start:{line:54,column:11},end:{line:54,column:31}},7:{start:{line:55,column:4},end:{line:61,column:5}},8:{start:{line:56,column:6},end:{line:56,column:39}},9:{start:{line:57,column:6},end:{line:60,column:9}},10:{start:{line:63,column:18},end:{line:100,column:3}},11:{start:{line:64,column:4},end:{line:64,column:22}},12:{start:{line:65,column:19},end:{line:65,column:24}},13:{start:{line:66,column:4},end:{line:91,column:7}},14:{start:{line:70,column:6},end:{line:70,column:29}},15:{start:{line:72,column:6},end:{line:74,column:7}},16:{start:{line:73,column:8},end:{line:73,column:15}},17:{start:{line:75,column:6},end:{line:78,column:9}},18:{start:{line:79,column:23},end:{line:79,column:54}},19:{start:{line:80,column:6},end:{line:80,column:48}},20:{start:{line:81,column:6},end:{line:81,column:39}},21:{start:{line:82,column:6},end:{line:82,column:26}},22:{start:{line:84,column:6},end:{line:88,column:9}},23:{start:{line:89,column:6},end:{line:89,column:25}},24:{start:{line:90,column:6},end:{line:90,column:61}},25:{start:{line:92,column:4},end:{line:99,column:7}},26:{start:{line:95,column:10},end:{line:95,column:26}},27:{start:{line:101,column:16},end:{line:104,column:3}},28:{start:{line:102,column:4},end:{line:102,column:23}},29:{start:{line:103,column:4},end:{line:103,column:44}},30:{start:{line:105,column:15},end:{line:132,column:3}},31:{start:{line:106,column:4},end:{line:106,column:22}},32:{start:{line:107,column:23},end:{line:115,column:5}},33:{start:{line:116,column:25},end:{line:116,column:68}},34:{start:{line:117,column:17},end:{line:117,column:43}},35:{start:{line:118,column:20},end:{line:118,column:37}},36:{start:{line:120,column:4},end:{line:127,column:5}},37:{start:{line:121,column:6},end:{line:121,column:37}},38:{start:{line:123,column:6},end:{line:125,column:9}},39:{start:{line:126,column:6},end:{line:126,column:13}},40:{start:{line:128,column:4},end:{line:128,column:51}},41:{start:{line:129,column:4},end:{line:129,column:49}},42:{start:{line:130,column:4},end:{line:130,column:24}},43:{start:{line:131,column:4},end:{line:131,column:16}},44:{start:{line:135,column:18},end:{line:155,column:3}},45:{start:{line:136,column:21},end:{line:136,column:29}},46:{start:{line:137,column:19},end:{line:137,column:35}},47:{start:{line:138,column:4},end:{line:138,column:22}},48:{start:{line:139,column:4},end:{line:139,column:37}},49:{start:{line:140,column:4},end:{line:153,column:6}},50:{start:{line:142,column:6},end:{line:149,column:7}},51:{start:{line:143,column:8},end:{line:143,column:48}},52:{start:{line:145,column:8},end:{line:147,column:11}},53:{start:{line:148,column:8},end:{line:148,column:15}},54:{start:{line:150,column:6},end:{line:150,column:53}},55:{start:{line:151,column:6},end:{line:151,column:39}},56:{start:{line:152,column:6},end:{line:152,column:26}},57:{start:{line:154,column:4},end:{line:154,column:50}},58:{start:{line:154,column:28},end:{line:154,column:49}},59:{start:{line:157,column:4},end:{line:159,column:7}},60:{start:{line:160,column:4},end:{line:160,column:22}},61:{start:{line:161,column:4},end:{line:161,column:30}},62:{start:{line:163,column:16},end:{line:167,column:3}},63:{start:{line:164,column:4},end:{line:166,column:7}},64:{start:{line:169,column:14},end:{line:169,column:26}},65:{start:{line:170,column:25},end:{line:181,column:6}},66:{start:{line:171,column:6},end:{line:180,column:8}},67:{start:{line:183,column:4},end:{line:188,column:5}},68:{start:{line:184,column:6},end:{line:187,column:11}},69:{start:{line:186,column:61},end:{line:186,column:78}},70:{start:{line:189,column:4},end:{line:267,column:9}},71:{start:{line:195,column:30},end:{line:195,column:49}},72:{start:{line:263,column:27},end:{line:263,column:56}},73:{start:{line:270,column:18},end:{line:270,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:11},end:{line:39,column:3}},line:14},1:{name:"(anonymous_1)",decl:{start:{line:20,column:17},end:{line:20,column:18}},loc:{start:{line:20,column:23},end:{line:20,column:58}},line:20},2:{name:"(anonymous_2)",decl:{start:{line:42,column:2},end:{line:42,column:3}},loc:{start:{line:42,column:21},end:{line:47,column:3}},line:42},3:{name:"(anonymous_3)",decl:{start:{line:48,column:2},end:{line:48,column:3}},loc:{start:{line:48,column:15},end:{line:52,column:3}},line:48},4:{name:"(anonymous_4)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:27},end:{line:62,column:3}},line:53},5:{name:"(anonymous_5)",decl:{start:{line:63,column:18},end:{line:63,column:19}},loc:{start:{line:63,column:32},end:{line:100,column:3}},line:63},6:{name:"(anonymous_6)",decl:{start:{line:69,column:12},end:{line:69,column:13}},loc:{start:{line:69,column:31},end:{line:71,column:5}},line:69},7:{name:"(anonymous_7)",decl:{start:{line:71,column:12},end:{line:71,column:13}},loc:{start:{line:71,column:22},end:{line:83,column:5}},line:71},8:{name:"(anonymous_8)",decl:{start:{line:83,column:13},end:{line:83,column:14}},loc:{start:{line:83,column:22},end:{line:91,column:5}},line:83},9:{name:"(anonymous_9)",decl:{start:{line:94,column:15},end:{line:94,column:16}},loc:{start:{line:94,column:26},end:{line:96,column:9}},line:94},10:{name:"(anonymous_10)",decl:{start:{line:101,column:16},end:{line:101,column:17}},loc:{start:{line:101,column:23},end:{line:104,column:3}},line:101},11:{name:"(anonymous_11)",decl:{start:{line:105,column:15},end:{line:105,column:16}},loc:{start:{line:105,column:27},end:{line:132,column:3}},line:105},12:{name:"(anonymous_12)",decl:{start:{line:135,column:18},end:{line:135,column:19}},loc:{start:{line:135,column:38},end:{line:155,column:3}},line:135},13:{name:"(anonymous_13)",decl:{start:{line:140,column:20},end:{line:140,column:21}},loc:{start:{line:140,column:27},end:{line:153,column:5}},line:140},14:{name:"(anonymous_14)",decl:{start:{line:154,column:21},end:{line:154,column:22}},loc:{start:{line:154,column:28},end:{line:154,column:49}},line:154},15:{name:"(anonymous_15)",decl:{start:{line:156,column:2},end:{line:156,column:3}},loc:{start:{line:156,column:17},end:{line:162,column:3}},line:156},16:{name:"(anonymous_16)",decl:{start:{line:163,column:16},end:{line:163,column:17}},loc:{start:{line:163,column:25},end:{line:167,column:3}},line:163},17:{name:"(anonymous_17)",decl:{start:{line:168,column:2},end:{line:168,column:3}},loc:{start:{line:168,column:11},end:{line:268,column:3}},line:168},18:{name:"(anonymous_18)",decl:{start:{line:170,column:42},end:{line:170,column:43}},loc:{start:{line:170,column:54},end:{line:181,column:5}},line:170},19:{name:"(anonymous_19)",decl:{start:{line:186,column:55},end:{line:186,column:56}},loc:{start:{line:186,column:61},end:{line:186,column:78}},line:186},20:{name:"(anonymous_20)",decl:{start:{line:195,column:24},end:{line:195,column:25}},loc:{start:{line:195,column:30},end:{line:195,column:49}},line:195},21:{name:"(anonymous_21)",decl:{start:{line:263,column:20},end:{line:263,column:21}},loc:{start:{line:263,column:27},end:{line:263,column:56}},line:263}},branchMap:{0:{loc:{start:{line:54,column:4},end:{line:54,column:31}},type:"if",locations:[{start:{line:54,column:4},end:{line:54,column:31}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:54},1:{loc:{start:{line:55,column:4},end:{line:61,column:5}},type:"if",locations:[{start:{line:55,column:4},end:{line:61,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:55},2:{loc:{start:{line:72,column:6},end:{line:74,column:7}},type:"if",locations:[{start:{line:72,column:6},end:{line:74,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:72},3:{loc:{start:{line:183,column:4},end:{line:188,column:5}},type:"if",locations:[{start:{line:183,column:4},end:{line:188,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:183},4:{loc:{start:{line:202,column:53},end:{line:217,column:21}},type:"cond-expr",locations:[{start:{line:202,column:119},end:{line:213,column:15}},{start:{line:213,column:34},end:{line:217,column:21}}],line:202}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalOpen.tsx"],names:["style"],mappings:"AA6BQ,SACE,KADF;AA7BR,OAAO,WAA0B;AACjC,SAAQ,oBAAmB;AAC3B,SAAQ,0BAAyB;AACjC,OAAO,qBAAiC;AACxC,SAAS,OAAwB,uBAAuB;AAExD,OAAO,kBAAkB;AACzB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,cAAc;AAErB,OAAO,WAAW;AAClB,OAAO,kBAAkB;AASzB,MAAM,oBAAoB,MAAM,UAA4B;AAAA,EAC1D,SAAS;AACP,WAAO,oBAAC,SAAI,WAAU,yBACpB;AAAA,MAAC;AAAA;AAAA,QACC,WAAU;AAAA,QACV,cAAY,KAAK,MAAM;AAAA,QACvB,SAAS,MAAM,KAAK,MAAM,SAAS,KAAK,MAAM,GAAG;AAAA,QAEjD;AAAA,+BAAC,SAAI,WAAU,gCACb;AAAA,gCAAC,SAAK,eAAK,MAAM,OAAM;AAAA,YACvB,oBAAC,UAAK,WAAU,kBAAiB;AAAA,YACjC,oBAAC,sBAAmB;AAAA,aACtB;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,OAAO;AAAA,gBACL,iBAAiB,OAAO,KAAK,MAAM,YAAY;AAAA,cACjD;AAAA;AAAA,UACD;AAAA;AAAA;AAAA,IACH,GACF;AAAA,EACF;AACF;AAgBA,MAAM,0BAA0B,MAAM,UAAkD;AAAA,EACtF,YAAY,OAA+B;AACzC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,UAAU;AAAA,IACZ;AAAA,EACF;AAAA,EAEA,aAAa;AACX,SAAK,SAAS;AAAA,MACZ,OAAO;AAAA,IACT,CAAC;AAAA,EACH;AAAA,EAEA,sBAAsB,GAAU;AAE9B,QAAG,EAAG,GAAE,gBAAgB;AAExB,QAAG,KAAK,MAAM,eAAe;AAC3B,WAAK,MAAM,cAAc,MAAM;AAC/B,WAAK,SAAS;AAAA,QACZ,eAAe;AAAA,QACf,kBAAkB;AAAA,MACpB,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,gBAAgB,CAAC,aAAqB;AACpC,SAAK,WAAW;AAEhB,QAAI,WAAoB;AAExB,UAAM,UAAU;AAAA,MACd,MAAM;AAAA,MACN,aAAa;AAAA,IACf,CAAC,EACE,KAAK,SAAS,UAAU;AACvB,aAAO,SAAS,KAAK;AAAA,IACvB,CAAC,EACA,KAAK,CAAC,SAAS;AACd,UAAG,UAAU;AACX;AAAA,MACF;AAEA,WAAK,SAAS;AAAA,QACZ,eAAe;AAAA,QACf,kBAAkB;AAAA,MACpB,CAAC;AAED,YAAM,WAAW,MAAM,oBAAoB,IAAI;AAC/C,cAAQ,IAAI,iBAAiB,SAAS,EAAE;AACxC,WAAK,MAAM,YAAY,QAAQ;AAC/B,WAAK,aAAa;AAAA,IACpB,CAAC,EACA,MAAM,CAAC,QAAQ;AACd,WAAK,SAAS;AAAA,QACZ,OAAO,oBAAoB,QAAQ;AAAA,QACnC,eAAe;AAAA,QACf,kBAAkB;AAAA,MACpB,CAAC;AACD,cAAQ,MAAM,GAAG;AACjB,cAAQ,KAAK,gCAAgC,QAAQ;AAAA,IACvD,CAAC;AAEH,SAAK,SAAS;AAAA,MACZ,eAAe;AAAA,QACb,OAAO,WAAW;AAChB,qBAAW;AAAA,QACb;AAAA,MACF;AAAA,MACA,kBAAkB;AAAA,IACpB,CAAC;AAAA,EACH;AAAA,EAEA,cAAc,CAAC,MAAkC;AAC/C,MAAE,eAAe;AACjB,SAAK,cAAc,KAAK,MAAM,QAAQ;AAAA,EACxC;AAAA,EAEA,aAAa,YAAY;AACvB,SAAK,WAAW;AAEhB,UAAM,aAAoC;AAAA,MACxC,OAAO;AAAA,QACL;AAAA,UACE,aAAa;AAAA,UACb,QAAQ,EAAE,oBAAoB,CAAC,OAAO,EAAE;AAAA,QAC1C;AAAA,MACF;AAAA,MACA,UAAU;AAAA,IACZ;AAEA,UAAM,CAAC,UAAU,IAAI,MAAM,OAAO,mBAAmB,UAAU;AAC/D,UAAM,OAAO,MAAM,WAAW,QAAQ;AACtC,UAAM,UAAU,MAAM,KAAK,KAAK;AAEhC,QAAI;AACJ,QAAI;AACF,iBAAW,KAAK,MAAM,OAAO;AAAA,IAC/B,SAAS,KAAK;AACZ,WAAK,SAAS;AAAA,QACZ,OAAQ,IAAc,SAAS;AAAA,MACjC,CAAC;AACD;AAAA,IACF;AACA,eAAW,MAAM,oBAAoB,QAAQ;AAE7C,SAAK,MAAM,YAAY,UAAU,UAAU;AAC3C,SAAK,aAAa;AAClB,WAAO;AAAA,EACT;AAAA;AAAA;AAAA,EAIA,gBAAgB,OAAO,GAAQ,UAAoB;AACjD,UAAM,CAAC,EAAE,IAAI,IAAI,MAAM,CAAC;AACxB,UAAM,SAAS,IAAI,WAAW;AAC9B,SAAK,WAAW;AAEhB,WAAO,WAAW,MAAM,OAAO;AAC/B,WAAO,SAAS,OAAK;AACnB,UAAI;AACJ,UAAI;AACF,mBAAW,KAAK,MAAM,EAAE,QAAQ,MAAgB;AAAA,MAClD,SACM,KAAK;AACT,aAAK,SAAS;AAAA,UACZ,OAAQ,IAAc,SAAS;AAAA,QACjC,CAAC;AACD;AAAA,MACF;AACA,iBAAW,MAAM,oBAAoB,QAAQ;AAC7C,WAAK,MAAM,YAAY,QAAQ;AAC/B,WAAK,aAAa;AAAA,IACpB;AACA,WAAO,UAAU,OAAK,QAAQ,IAAI,EAAE,MAAM;AAAA,EAC5C;AAAA,EAEA,eAAe;AACb,SAAK,SAAS;AAAA,MACZ,UAAU;AAAA,IACZ,CAAC;AACD,SAAK,WAAW;AAChB,SAAK,MAAM,aAAa;AAAA,EAC1B;AAAA,EAEA,cAAc,CAAC,QAAgB;AAC7B,SAAK,SAAS;AAAA,MACZ,UAAU;AAAA,IACZ,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,eAAe,aAAa,IAAI,CAAAA,WAAS;AAC7C,aAAO;AAAA,QAAC;AAAA;AAAA,UAEN,KAAKA,OAAM;AAAA,UACX,OAAOA,OAAM;AAAA,UACb,cAAcA,OAAM;AAAA,UACpB,UAAU,KAAK;AAAA;AAAA,QAJVA,OAAM;AAAA,MAKb;AAAA,IACF,CAAC;AAED,QAAI;AACJ,QAAG,KAAK,MAAM,OAAO;AACnB,qBACE,qBAAC,SAAI,WAAU,wBACZ;AAAA,aAAK,MAAM;AAAA,QACZ,oBAAC,OAAE,MAAK,KAAI,SAAS,MAAM,KAAK,WAAW,GAAG,WAAU,8BAA6B,eAAC;AAAA,SACxF;AAAA,IAEJ;AAEA,WACE,qBAAC,SACC;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,eAAY;AAAA,UACZ,QAAQ,KAAK,MAAM;AAAA,UACnB,cAAc,MAAM,KAAK,aAAa;AAAA,UACtC,OAAO,EAAE,YAAY;AAAA,UAEpB;AAAA;AAAA,YACD,qBAAC,aAAQ,WAAU,0BACjB;AAAA,kCAAC,QAAI,YAAE,kBAAkB,GAAE;AAAA,cAC3B,oBAAC,OAAG,YAAE,6CAA6C,GAAE;AAAA,cACrD,oBAAC,SACE,iBAAO,OAAO,uBAAuB,aACpC;AAAA,gBAAC;AAAA;AAAA,kBACC,WAAU;AAAA,kBACV,SAAS,KAAK;AAAA,kBAAY;AAAA,wCAAC,gBAAY;AAAA,oBAAE;AAAA,oBAAE,EAAE,YAAY;AAAA;AAAA;AAAA,cAC3D,IAEA,oBAAC,mBAAgB,UAAU,KAAK,eAAe,UAAU,IAAI,cAAY,EAAE,YAAY,GACrF,+BAAC,eAAY,WAAU,0BAAyB;AAAA,oCAAC,gBAAa;AAAA,gBAAE;AAAA,gBAAE,EAAE,YAAY;AAAA,iBAAE,GACpF,GAEJ;AAAA,eACF;AAAA,YAEA,oBAAC,aAAQ,WAAU,0BACjB,+BAAC,UAAK,UAAU,KAAK,aACnB;AAAA,kCAAC,QAAI,YAAE,eAAe,GAAE;AAAA,cACxB,oBAAC,OACC,+BAAC,SAAM,GAAM;AAAA;AAAA,gBACkC,oBAAC,OAAE,MAAK,2BAA0B,QAAO,UAAS,KAAI,uBAAsB,0BAAY;AAAA,gBAAI;AAAA,iBAC3I,GACF;AAAA,cACA;AAAA,gBAAC;AAAA;AAAA,kBACC,cAAY,EAAE,WAAW;AAAA,kBACzB,eAAY;AAAA,kBACZ,MAAK;AAAA,kBACL,WAAU;AAAA,kBACV,SAAS,EAAE,cAAc;AAAA,kBACzB,OAAO,KAAK,MAAM;AAAA,kBAClB,SAAS,KAAK;AAAA,kBACd,UAAU,KAAK;AAAA;AAAA,cACjB;AAAA,cACA,oBAAC,SACC;AAAA,gBAAC;AAAA;AAAA,kBACC,eAAY;AAAA,kBACZ,MAAK;AAAA,kBACL,WAAU;AAAA,kBACV,UAAU,KAAK,MAAM,SAAS,SAAS;AAAA,kBACxC;AAAA;AAAA,cAAa,GAChB;AAAA,eACF,GACF;AAAA,YAEA,qBAAC,aAAQ,WAAU,yDACjB;AAAA,kCAAC,QAAI,YAAE,gBAAgB,GAAE;AAAA,cACzB,oBAAC,OACE,YAAE,0DAA0D,GAC/D;AAAA,cACA,oBAAC,SAAI,WAAU,oCACZ,wBACH;AAAA,eACF;AAAA;AAAA;AAAA,MACF;AAAA,MAEA;AAAA,QAAC;AAAA;AAAA,UACC,QAAQ,CAAC,CAAC,KAAK,MAAM;AAAA,UACrB,OAAO,EAAE,eAAe;AAAA,UACxB,UAAU,CAAC,MAAa,KAAK,sBAAsB,CAAC;AAAA,UACpD,SAAS,EAAE,2BAA2B,EAAE,YAAY,KAAK,MAAM,iBAAiB,CAAC;AAAA;AAAA,MACnF;AAAA,OACF;AAAA,EAEJ;AACF;AAEA,MAAM,YAAY,gBAAgB,EAAE,iBAAiB;AACrD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"29ff9eb08a4518c25ccd9ea0089ac05d05f682b1"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return ar=function(){return a},a}ar();class Nfe extends nr.Component{render(){return ar().f[0]++,ar().s[0]++,ue.jsx("div",{className:"maputnik-public-style",children:ue.jsxs(Ja,{className:"maputnik-public-style-button","aria-label":this.props.title,onClick:()=>(ar().f[1]++,ar().s[1]++,this.props.onSelect(this.props.url)),children:[ue.jsxs("div",{className:"maputnik-public-style-header",children:[ue.jsx("div",{children:this.props.title}),ue.jsx("span",{className:"maputnik-space"}),ue.jsx($U,{})]}),ue.jsx("div",{className:"maputnik-public-style-thumbnail",style:{backgroundImage:`url(${this.props.thumbnailUrl})`}})]})})}}class Wfe extends nr.Component{constructor(t){ar().f[2]++,ar().s[2]++;super(t);Pn(this,"onStyleSelect",(ar().s[10]++,t=>{ar().f[5]++,ar().s[11]++,this.clearError();let r=(ar().s[12]++,!1);ar().s[13]++,fetch(t,{mode:"cors",credentials:"same-origin"}).then(function(i){return ar().f[6]++,ar().s[14]++,i.json()}).then(i=>{if(ar().f[7]++,ar().s[15]++,r){ar().b[2][0]++,ar().s[16]++;return}else ar().b[2][1]++;ar().s[17]++,this.setState({activeRequest:null,activeRequestUrl:null});const s=(ar().s[18]++,_c.ensureStyleValidity(i));ar().s[19]++,console.log("Loaded style ",s.id),ar().s[20]++,this.props.onStyleOpen(s),ar().s[21]++,this.onOpenToggle()}).catch(i=>{ar().f[8]++,ar().s[22]++,this.setState({error:`Failed to load: '${t}'`,activeRequest:null,activeRequestUrl:null}),ar().s[23]++,console.error(i),ar().s[24]++,console.warn("Could not open the style URL",t)}),ar().s[25]++,this.setState({activeRequest:{abort:function(){ar().f[9]++,ar().s[26]++,r=!0}},activeRequestUrl:t})}));Pn(this,"onSubmitUrl",(ar().s[27]++,t=>{ar().f[10]++,ar().s[28]++,t.preventDefault(),ar().s[29]++,this.onStyleSelect(this.state.styleUrl)}));Pn(this,"onOpenFile",(ar().s[30]++,async()=>{ar().f[11]++,ar().s[31]++,this.clearError();const t=(ar().s[32]++,{types:[{description:"json",accept:{"application/json":[".json"]}}],multiple:!1}),[r]=(ar().s[33]++,await window.showOpenFilePicker(t)),i=(ar().s[34]++,await r.getFile()),s=(ar().s[35]++,await i.text());let a;ar().s[36]++;try{ar().s[37]++,a=JSON.parse(s)}catch(o){ar().s[38]++,this.setState({error:o.toString()}),ar().s[39]++;return}return ar().s[40]++,a=_c.ensureStyleValidity(a),ar().s[41]++,this.props.onStyleOpen(a,r),ar().s[42]++,this.onOpenToggle(),ar().s[43]++,i}));Pn(this,"onFileChanged",(ar().s[44]++,async(t,r)=>{ar().f[12]++;const[,i]=(ar().s[45]++,r[0]),s=(ar().s[46]++,new FileReader);ar().s[47]++,this.clearError(),ar().s[48]++,s.readAsText(i,"UTF-8"),ar().s[49]++,s.onload=a=>{var d;ar().f[13]++;let o;ar().s[50]++;try{ar().s[51]++,o=JSON.parse((d=a.target)==null?void 0:d.result)}catch(g){ar().s[52]++,this.setState({error:g.toString()}),ar().s[53]++;return}ar().s[54]++,o=_c.ensureStyleValidity(o),ar().s[55]++,this.props.onStyleOpen(o),ar().s[56]++,this.onOpenToggle()},ar().s[57]++,s.onerror=a=>(ar().f[14]++,ar().s[58]++,console.log(a.target))}));Pn(this,"onChangeUrl",(ar().s[62]++,t=>{ar().f[16]++,ar().s[63]++,this.setState({styleUrl:t})}));ar().s[3]++,this.state={styleUrl:""}}clearError(){ar().f[3]++,ar().s[4]++,this.setState({error:null})}onCancelActiveRequest(t){ar().f[4]++,ar().s[5]++,t?(ar().b[0][0]++,ar().s[6]++,t.stopPropagation()):ar().b[0][1]++,ar().s[7]++,this.state.activeRequest?(ar().b[1][0]++,ar().s[8]++,this.state.activeRequest.abort(),ar().s[9]++,this.setState({activeRequest:null,activeRequestUrl:null})):ar().b[1][1]++}onOpenToggle(){ar().f[15]++,ar().s[59]++,this.setState({styleUrl:""}),ar().s[60]++,this.clearError(),ar().s[61]++,this.props.onOpenToggle()}render(){ar().f[17]++;const t=(ar().s[64]++,this.props.t),r=(ar().s[65]++,OG.map(s=>(ar().f[18]++,ar().s[66]++,ue.jsx(Nfe,{url:s.url,title:s.title,thumbnailUrl:s.thumbnail,onSelect:this.onStyleSelect},s.id))));let i;return ar().s[67]++,this.state.error?(ar().b[3][0]++,ar().s[68]++,i=ue.jsxs("div",{className:"maputnik-modal-error",children:[this.state.error,ue.jsx("a",{href:"#",onClick:()=>(ar().f[19]++,ar().s[69]++,this.clearError()),className:"maputnik-modal-error-close",children:""})]})):ar().b[3][1]++,ar().s[70]++,ue.jsxs("div",{children:[ue.jsxs(G0,{"data-wd-key":"modal:open",isOpen:this.props.isOpen,onOpenToggle:()=>(ar().f[20]++,ar().s[71]++,this.onOpenToggle()),title:t("Open Style"),children:[i,ue.jsxs("section",{className:"maputnik-modal-section",children:[ue.jsx("h1",{children:t("Open local Style")}),ue.jsx("p",{children:t("Open a local JSON style from your computer.")}),ue.jsx("div",{children:typeof window.showOpenFilePicker=="function"?(ar().b[4][0]++,ue.jsxs(Ja,{className:"maputnik-big-button",onClick:this.onOpenFile,children:[ue.jsx(Y7,{})," ",t("Open Style")]})):(ar().b[4][1]++,ue.jsx(Ufe,{onChange:this.onFileChanged,tabIndex:-1,"aria-label":t("Open Style"),children:ue.jsxs(Ja,{className:"maputnik-upload-button",children:[ue.jsx(Y7,{})," ",t("Open Style")]})}))})]}),ue.jsx("section",{className:"maputnik-modal-section",children:ue.jsxs("form",{onSubmit:this.onSubmitUrl,children:[ue.jsx("h1",{children:t("Load from URL")}),ue.jsx("p",{children:ue.jsxs(T0,{t,children:["Load from a URL. Note that the URL must have ",ue.jsx("a",{href:"https://enable-cors.org",target:"_blank",rel:"noopener noreferrer",children:"CORS enabled"}),"."]})}),ue.jsx(cI,{"aria-label":t("Style URL"),"data-wd-key":"modal:open.url.input",type:"text",className:"maputnik-input",default:t("Enter URL..."),value:this.state.styleUrl,onInput:this.onChangeUrl,onChange:this.onChangeUrl}),ue.jsx("div",{children:ue.jsx(Ja,{"data-wd-key":"modal:open.url.button",type:"submit",className:"maputnik-big-button",disabled:this.state.styleUrl.length<1,children:"Load from URL"})})]})}),ue.jsxs("section",{className:"maputnik-modal-section maputnik-modal-section--shrink",children:[ue.jsx("h1",{children:t("Gallery Styles")}),ue.jsx("p",{children:t("Open one of the publicly available styles to start from.")}),ue.jsx("div",{className:"maputnik-style-gallery-container",children:r})]})]}),ue.jsx(jfe,{isOpen:!!this.state.activeRequest,title:t("Loading style"),onCancel:s=>(ar().f[21]++,ar().s[72]++,this.onCancelActiveRequest(s)),message:t("Loading: {{requestUrl}}",{requestUrl:this.state.activeRequestUrl})})]})}}const Gfe=(ar().s[73]++,Ns()(Wfe));function Df(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalShortcuts.tsx",e="2fa0c1760625a188da3b2788fa0924b96bb7f3e1",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalShortcuts.tsx",statementMap:{0:{start:{line:7,column:14},end:{line:7,column:26}},1:{start:{line:8,column:17},end:{line:41,column:5}},2:{start:{line:42,column:25},end:{line:115,column:5}},3:{start:{line:116,column:4},end:{line:145,column:6}},4:{start:{line:130,column:12},end:{line:133,column:22}},5:{start:{line:137,column:12},end:{line:141,column:22}},6:{start:{line:148,column:23},end:{line:148,column:64}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:146,column:3}},line:6},1:{name:"(anonymous_1)",decl:{start:{line:129,column:57},end:{line:129,column:58}},loc:{start:{line:129,column:72},end:{line:134,column:11}},line:129},2:{name:"(anonymous_2)",decl:{start:{line:136,column:65},end:{line:136,column:66}},loc:{start:{line:136,column:80},end:{line:142,column:11}},line:136}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0,1:0,2:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalShortcuts.tsx"],names:[],mappings:"AAiBa,SAwCA,UAxCA,KAwCA,YAxCA;AAjBb,OAAO,WAAW;AAClB,SAAS,OAAwB,uBAAuB;AAExD,OAAO,WAAW;AASlB,MAAM,+BAA+B,MAAM,UAAuC;AAAA,EAChF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,OAAO;AAAA,MACX;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,gBAAgB;AAAA,MAC1B;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,YAAY;AAAA,MACtB;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,cAAc;AAAA,MACxB;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,oBAAoB;AAAA,MAC9B;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,sBAAsB;AAAA,MAChC;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,gBAAgB;AAAA,MAC1B;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,WAAW;AAAA,MACrB;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,aAAa;AAAA,MACvB;AAAA,IACF;AAGA,UAAM,eAAe;AAAA,MACnB;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,+BAAgC;AAAA,MAC1C;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,eAAC;AAAA,WAAM;AAAA,QACtC,MAAM,EAAE,+BAAgC;AAAA,MAC1C;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,+BAAgC;AAAA,MAC1C;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,eAAC;AAAA,WAAM;AAAA,QACtC,MAAM,EAAE,+BAAgC;AAAA,MAC1C;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,gBAAE;AAAA,QACZ,MAAM,EAAE,uBAAwB;AAAA,MAClC;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,kBAAI;AAAA,QACd,MAAM,EAAE,yBAA0B;AAAA,MACpC;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,kBAAI;AAAA,QACd,MAAM,EAAE,yBAA0B;AAAA,MACpC;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,mBAAK;AAAA,QACf,MAAM,EAAE,0BAA2B;AAAA,MACrC;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,mBAAK;AAAA,WAAM;AAAA,QAC1C,MAAM,EAAE,sCAAuC;AAAA,MACjD;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,kBAAI;AAAA,WAAM;AAAA,QACzC,MAAM,EAAE,sCAAsC;AAAA,MAChD;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,gBAAE;AAAA,WAAM;AAAA,QACvC,MAAM,EAAE,mCAAmC;AAAA,MAC7C;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,kBAAI;AAAA,WAAM;AAAA,QACzC,MAAM,EAAE,mCAAmC;AAAA,MAC7C;AAAA,IACF;AAGA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,WAAW;AAAA,QAEpB,+BAAC,aAAQ,WAAU,mDACjB;AAAA,8BAAC,OACC,+BAAC,SAAM,GAAM;AAAA;AAAA,YACL,oBAAC,UAAK,iBAAG;AAAA,YAAO;AAAA,aACxB,GACF;AAAA,UACA,oBAAC,QACE,eAAK,IAAI,CAAC,MAAM,QAAQ;AACvB,mBAAO,qBAAC,SAAc,WAAU,sCAC9B;AAAA,kCAAC,QAAmB,eAAK,OAAhB,OAAK,GAAe;AAAA,cAC7B,oBAAC,QAAmB,eAAK,QAAhB,OAAK,GAAgB;AAAA,iBAFf,GAGjB;AAAA,UACF,CAAC,GACH;AAAA,UACA,oBAAC,OAAG,YAAE,8DAA8D,GAAE;AAAA,UACtE,oBAAC,QACE,uBAAa,IAAI,CAAC,MAAM,QAAQ;AAC/B,mBAAO,qBAAC,QACN;AAAA,kCAAC,UAAM,eAAK,KAAI;AAAA,cAAO;AAAA,cAAE,KAAK;AAAA,iBADhB,GAEhB;AAAA,UACF,CAAC,GACH;AAAA,WACF;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,iBAAiB,gBAAgB,EAAE,sBAAsB;AAC/D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2fa0c1760625a188da3b2788fa0924b96bb7f3e1"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Df=function(){return a},a}Df();class Qfe extends nr.Component{render(){Df().f[0]++;const e=(Df().s[0]++,this.props.t),t=(Df().s[1]++,[{key:ue.jsx("kbd",{children:"?"}),text:e("Shortcuts menu")},{key:ue.jsx("kbd",{children:"o"}),text:e("Open modal")},{key:ue.jsx("kbd",{children:"e"}),text:e("Export modal")},{key:ue.jsx("kbd",{children:"d"}),text:e("Data Sources modal")},{key:ue.jsx("kbd",{children:"s"}),text:e("Style Settings modal")},{key:ue.jsx("kbd",{children:"i"}),text:e("Toggle inspect")},{key:ue.jsx("kbd",{children:"m"}),text:e("Focus map")},{key:ue.jsx("kbd",{children:"!"}),text:e("Debug modal")}]),r=(Df().s[2]++,[{key:ue.jsx("kbd",{children:"+"}),text:e("Increase the zoom level by 1.")},{key:ue.jsxs(ue.Fragment,{children:[ue.jsx("kbd",{children:"Shift"})," + ",ue.jsx("kbd",{children:"+"})]}),text:e("Increase the zoom level by 2.")},{key:ue.jsx("kbd",{children:"-"}),text:e("Decrease the zoom level by 1.")},{key:ue.jsxs(ue.Fragment,{children:[ue.jsx("kbd",{children:"Shift"})," + ",ue.jsx("kbd",{children:"-"})]}),text:e("Decrease the zoom level by 2.")},{key:ue.jsx("kbd",{children:"Up"}),text:e("Pan up by 100 pixels.")},{key:ue.jsx("kbd",{children:"Down"}),text:e("Pan down by 100 pixels.")},{key:ue.jsx("kbd",{children:"Left"}),text:e("Pan left by 100 pixels.")},{key:ue.jsx("kbd",{children:"Right"}),text:e("Pan right by 100 pixels.")},{key:ue.jsxs(ue.Fragment,{children:[ue.jsx("kbd",{children:"Shift"})," + ",ue.jsx("kbd",{children:"Right"})]}),text:e("Increase the rotation by 15 degrees.")},{key:ue.jsxs(ue.Fragment,{children:[ue.jsx("kbd",{children:"Shift"})," + ",ue.jsx("kbd",{children:"Left"})]}),text:e("Decrease the rotation by 15 degrees.")},{key:ue.jsxs(ue.Fragment,{children:[ue.jsx("kbd",{children:"Shift"})," + ",ue.jsx("kbd",{children:"Up"})]}),text:e("Increase the pitch by 10 degrees.")},{key:ue.jsxs(ue.Fragment,{children:[ue.jsx("kbd",{children:"Shift"})," + ",ue.jsx("kbd",{children:"Down"})]}),text:e("Decrease the pitch by 10 degrees.")}]);return Df().s[3]++,ue.jsx(G0,{"data-wd-key":"modal:shortcuts",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Shortcuts"),children:ue.jsxs("section",{className:"maputnik-modal-section maputnik-modal-shortcuts",children:[ue.jsx("p",{children:ue.jsxs(T0,{t:e,children:["Press ",ue.jsx("code",{children:"ESC"})," to lose focus of any active elements, then press one of:"]})}),ue.jsx("dl",{children:t.map((i,s)=>(Df().f[1]++,Df().s[4]++,ue.jsxs("div",{className:"maputnik-modal-shortcuts__shortcut",children:[ue.jsx("dt",{children:i.key},"dt"+s),ue.jsx("dd",{children:i.text},"dd"+s)]},s)))}),ue.jsx("p",{children:e("If the Map is in focused you can use the following shortcuts")}),ue.jsx("ul",{children:r.map((i,s)=>(Df().f[2]++,Df().s[5]++,ue.jsxs("li",{children:[ue.jsx("span",{children:i.key})," ",i.text]},s)))})]})})}}const qfe=(Df().s[6]++,Ns()(Qfe));function oA(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalDebug.tsx",e="a1d210f2dd55b03f0e8aae655258e8184b2d45b3",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalDebug.tsx",statementMap:{0:{start:{line:7,column:27},end:{line:7,column:37}},1:{start:{line:8,column:20},end:{line:8,column:48}},2:{start:{line:9,column:19},end:{line:9,column:49}},3:{start:{line:10,column:19},end:{line:10,column:49}},4:{start:{line:11,column:4},end:{line:53,column:6}},5:{start:{line:22,column:14},end:{line:26,column:27}},6:{start:{line:23,column:96},end:{line:23,column:153}},7:{start:{line:29,column:14},end:{line:33,column:27}},8:{start:{line:30,column:96},end:{line:30,column:153}},9:{start:{line:56,column:19},end:{line:56,column:56}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:54,column:3}},line:6},1:{name:"(anonymous_1)",decl:{start:{line:21,column:140},end:{line:21,column:141}},loc:{start:{line:21,column:156},end:{line:27,column:13}},line:21},2:{name:"(anonymous_2)",decl:{start:{line:23,column:89},end:{line:23,column:90}},loc:{start:{line:23,column:96},end:{line:23,column:153}},line:23},3:{name:"(anonymous_3)",decl:{start:{line:28,column:136},end:{line:28,column:137}},loc:{start:{line:28,column:152},end:{line:34,column:13}},line:28},4:{name:"(anonymous_4)",decl:{start:{line:30,column:89},end:{line:30,column:90}},loc:{start:{line:30,column:96},end:{line:30,column:153}},line:30}},branchMap:{0:{loc:{start:{line:21,column:12},end:{line:27,column:17}},type:"binary-expr",locations:[{start:{line:21,column:12},end:{line:21,column:44}},{start:{line:21,column:64},end:{line:27,column:17}}],line:21},1:{loc:{start:{line:28,column:12},end:{line:34,column:17}},type:"binary-expr",locations:[{start:{line:28,column:12},end:{line:28,column:40}},{start:{line:28,column:60},end:{line:34,column:17}}],line:28}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalDebug.tsx"],names:[],mappings:"AAuCQ,cAKQ,YALR;AAvCR,OAAO,WAAW;AAElB,SAAS,OAAwB,uBAAuB;AACxD,OAAO,WAAW;AAqBlB,MAAM,2BAA2B,MAAM,UAAmC;AAAA,EACxE,SAAS;AACP,UAAM,EAAC,GAAG,QAAO,IAAI,KAAK;AAE1B,UAAM,UAAU,KAAK,MAAM,QAAQ,IAAI,IAAE;AACzC,UAAM,SAAS,CAAE,QAAQ,OAAO,IAAK,QAAQ,CAAC;AAC9C,UAAM,SAAS,CAAE,QAAQ,OAAO,IAAK,QAAQ,CAAC;AAE9C,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,OAAO;AAAA,QAEhB;AAAA,+BAAC,aAAQ,WAAU,mDACjB;AAAA,gCAAC,QAAI,YAAE,SAAS,GAAE;AAAA,YACjB,KAAK,MAAM,aAAa,YACvB,oBAAC,QACE,iBAAO,QAAQ,KAAK,MAAM,sBAAuB,EAAE,IAAI,CAAC,CAAC,KAAK,GAAG,MAAM;AACtE,qBAAO,oBAAC,QACN,+BAAC,WACC;AAAA,oCAAC,WAAM,MAAK,YAAW,SAAS,KAAK,UAAU,CAAC,MAAM,KAAK,MAAM,wBAAwB,KAAK,EAAE,OAAO,OAAO,GAAG;AAAA,gBAAE;AAAA,gBAAE;AAAA,iBACvH,KAHc,GAIhB;AAAA,YACF,CAAC,GACH;AAAA,YAED,KAAK,MAAM,aAAa,QACvB,oBAAC,QACE,iBAAO,QAAQ,KAAK,MAAM,sBAAuB,EAAE,IAAI,CAAC,CAAC,KAAK,GAAG,MAAM;AACtE,qBAAO,oBAAC,QACN,+BAAC,WACC;AAAA,oCAAC,WAAM,MAAK,YAAW,SAAS,KAAK,UAAU,CAAC,MAAM,KAAK,MAAM,wBAAwB,KAAK,EAAE,OAAO,OAAO,GAAG;AAAA,gBAAE;AAAA,gBAAE;AAAA,iBACvH,KAHc,GAIhB;AAAA,YACF,CAAC,GACH;AAAA,aAEJ;AAAA,UACA,qBAAC,aAAQ,WAAU,0BACjB;AAAA,gCAAC,QAAG,mBAAK;AAAA,YACT,oBAAC,OACC,+BAAC,SAAM,GACL;AAAA;AAAA,gBAAC;AAAA;AAAA,kBACC,QAAO;AAAA,kBACP,KAAI;AAAA,kBACJ,MAAM,sCAAsC,OAAO,IAAI,MAAM,IAAI,MAAM;AAAA,kBACxE;AAAA;AAAA,cAED;AAAA,cAAI;AAAA,eACN,GACF;AAAA,aACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,aAAa,gBAAgB,EAAE,kBAAkB;AACvD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a1d210f2dd55b03f0e8aae655258e8184b2d45b3"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return oA=function(){return a},a}oA();class Yfe extends nr.Component{render(){oA().f[0]++;const{t:e,mapView:t}=(oA().s[0]++,this.props),r=(oA().s[1]++,Math.round(t.zoom)+1),i=(oA().s[2]++,+t.center.lng.toFixed(5)),s=(oA().s[3]++,+t.center.lat.toFixed(5));return oA().s[4]++,ue.jsxs(G0,{"data-wd-key":"modal:debug",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Debug"),children:[ue.jsxs("section",{className:"maputnik-modal-section maputnik-modal-shortcuts",children:[ue.jsx("h1",{children:e("Options")}),(oA().b[0][0]++,this.props.renderer==="mlgljs"&&(oA().b[0][1]++,ue.jsx("ul",{children:Object.entries(this.props.maplibreGlDebugOptions).map(([a,o])=>(oA().f[1]++,oA().s[5]++,ue.jsx("li",{children:ue.jsxs("label",{children:[ue.jsx("input",{type:"checkbox",checked:o,onChange:d=>(oA().f[2]++,oA().s[6]++,this.props.onChangeMaplibreGlDebug(a,d.target.checked))})," ",a]})},a)))}))),(oA().b[1][0]++,this.props.renderer==="ol"&&(oA().b[1][1]++,ue.jsx("ul",{children:Object.entries(this.props.openlayersDebugOptions).map(([a,o])=>(oA().f[3]++,oA().s[7]++,ue.jsx("li",{children:ue.jsxs("label",{children:[ue.jsx("input",{type:"checkbox",checked:o,onChange:d=>(oA().f[4]++,oA().s[8]++,this.props.onChangeOpenlayersDebug(a,d.target.checked))})," ",a]})},a)))})))]}),ue.jsxs("section",{className:"maputnik-modal-section",children:[ue.jsx("h1",{children:"Links"}),ue.jsx("p",{children:ue.jsxs(T0,{t:e,children:[ue.jsx("a",{target:"_blank",rel:"noopener noreferrer",href:`https://www.openstreetmap.org/#map=${r}/${s}/${i}`,children:"Open in OSM"}),"  Opens the current view on openstreetmap.org"]})})]})]})}}const $fe=(oA().s[9]++,Ns()(Yfe));var mg={},Jv={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */var Vfe=Jv.exports,tF;function Hfe(){return tF||(tF=1,function(n,e){(function(t){var r=e&&!e.nodeType&&e,i=!n.nodeType&&n,s=typeof window=="object"&&window;(s.global===s||s.window===s||s.self===s)&&(t=s);var a,o=2147483647,d=36,g=1,b=26,E=38,S=700,I=72,P=128,z="-",j=/^xn--/,q=/[^\x20-\x7E]/,Y=/[\x2E\u3002\uFF0E\uFF61]/g,ie={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},te=d-g,V=Math.floor,ne=String.fromCharCode,G;function oe(Me){throw new RangeError(ie[Me])}function he(Me,Fe){for(var He=Me.length,bt=[];He--;)bt[He]=Fe(Me[He]);return bt}function pe(Me,Fe){var He=Me.split("@"),bt="";He.length>1&&(bt=He[0]+"@",Me=He[1]),Me=Me.replace(Y,".");var Yt=Me.split("."),gt=he(Yt,Fe).join(".");return bt+gt}function Ee(Me){for(var Fe=[],He=0,bt=Me.length,Yt,gt;He<bt;)Yt=Me.charCodeAt(He++),Yt>=55296&&Yt<=56319&&He<bt?(gt=Me.charCodeAt(He++),(gt&64512)==56320?Fe.push(((Yt&1023)<<10)+(gt&1023)+65536):(Fe.push(Yt),He--)):Fe.push(Yt);return Fe}function me(Me){return he(Me,function(Fe){var He="";return Fe>65535&&(Fe-=65536,He+=ne(Fe>>>10&1023|55296),Fe=56320|Fe&1023),He+=ne(Fe),He}).join("")}function Se(Me){return Me-48<10?Me-22:Me-65<26?Me-65:Me-97<26?Me-97:d}function De(Me,Fe){return Me+22+75*(Me<26)-((Fe!=0)<<5)}function be(Me,Fe,He){var bt=0;for(Me=He?V(Me/S):Me>>1,Me+=V(Me/Fe);Me>te*b>>1;bt+=d)Me=V(Me/te);return V(bt+(te+1)*Me/(Me+E))}function at(Me){var Fe=[],He=Me.length,bt,Yt=0,gt=P,Lt=I,Kt,Ue,Pe,Be,it,_t,ft,Ut,rn;for(Kt=Me.lastIndexOf(z),Kt<0&&(Kt=0),Ue=0;Ue<Kt;++Ue)Me.charCodeAt(Ue)>=128&&oe("not-basic"),Fe.push(Me.charCodeAt(Ue));for(Pe=Kt>0?Kt+1:0;Pe<He;){for(Be=Yt,it=1,_t=d;Pe>=He&&oe("invalid-input"),ft=Se(Me.charCodeAt(Pe++)),(ft>=d||ft>V((o-Yt)/it))&&oe("overflow"),Yt+=ft*it,Ut=_t<=Lt?g:_t>=Lt+b?b:_t-Lt,!(ft<Ut);_t+=d)rn=d-Ut,it>V(o/rn)&&oe("overflow"),it*=rn;bt=Fe.length+1,Lt=be(Yt-Be,bt,Be==0),V(Yt/bt)>o-gt&&oe("overflow"),gt+=V(Yt/bt),Yt%=bt,Fe.splice(Yt++,0,gt)}return me(Fe)}function Ze(Me){var Fe,He,bt,Yt,gt,Lt,Kt,Ue,Pe,Be,it,_t=[],ft,Ut,rn,Dt;for(Me=Ee(Me),ft=Me.length,Fe=P,He=0,gt=I,Lt=0;Lt<ft;++Lt)it=Me[Lt],it<128&&_t.push(ne(it));for(bt=Yt=_t.length,Yt&&_t.push(z);bt<ft;){for(Kt=o,Lt=0;Lt<ft;++Lt)it=Me[Lt],it>=Fe&&it<Kt&&(Kt=it);for(Ut=bt+1,Kt-Fe>V((o-He)/Ut)&&oe("overflow"),He+=(Kt-Fe)*Ut,Fe=Kt,Lt=0;Lt<ft;++Lt)if(it=Me[Lt],it<Fe&&++He>o&&oe("overflow"),it==Fe){for(Ue=He,Pe=d;Be=Pe<=gt?g:Pe>=gt+b?b:Pe-gt,!(Ue<Be);Pe+=d)Dt=Ue-Be,rn=d-Be,_t.push(ne(De(Be+Dt%rn,0))),Ue=V(Dt/rn);_t.push(ne(De(Ue,0))),gt=be(He,Ut,bt==Yt),He=0,++bt}++He,++Fe}return _t.join("")}function Je(Me){return pe(Me,function(Fe){return j.test(Fe)?at(Fe.slice(4).toLowerCase()):Fe})}function We(Me){return pe(Me,function(Fe){return q.test(Fe)?"xn--"+Ze(Fe):Fe})}if(a={version:"1.4.1",ucs2:{decode:Ee,encode:me},decode:at,encode:Ze,toASCII:We,toUnicode:Je},r&&i)if(n.exports==r)i.exports=a;else for(G in a)a.hasOwnProperty(G)&&(r[G]=a[G]);else t.punycode=a})(Vfe)}(Jv,Jv.exports)),Jv.exports}var xE,nF;function ov(){return nF||(nF=1,xE=TypeError),xE}const Zfe={},Xfe=Object.freeze(Object.defineProperty({__proto__:null,default:Zfe},Symbol.toStringTag,{value:"Module"})),Jfe=UB(Xfe);var wE,rF;function I3(){if(rF)return wE;rF=1;var n=typeof Map=="function"&&Map.prototype,e=Object.getOwnPropertyDescriptor&&n?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,t=n&&e&&typeof e.get=="function"?e.get:null,r=n&&Map.prototype.forEach,i=typeof Set=="function"&&Set.prototype,s=Object.getOwnPropertyDescriptor&&i?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,a=i&&s&&typeof s.get=="function"?s.get:null,o=i&&Set.prototype.forEach,d=typeof WeakMap=="function"&&WeakMap.prototype,g=d?WeakMap.prototype.has:null,b=typeof WeakSet=="function"&&WeakSet.prototype,E=b?WeakSet.prototype.has:null,S=typeof WeakRef=="function"&&WeakRef.prototype,I=S?WeakRef.prototype.deref:null,P=Boolean.prototype.valueOf,z=Object.prototype.toString,j=Function.prototype.toString,q=String.prototype.match,Y=String.prototype.slice,ie=String.prototype.replace,te=String.prototype.toUpperCase,V=String.prototype.toLowerCase,ne=RegExp.prototype.test,G=Array.prototype.concat,oe=Array.prototype.join,he=Array.prototype.slice,pe=Math.floor,Ee=typeof BigInt=="function"?BigInt.prototype.valueOf:null,me=Object.getOwnPropertySymbols,Se=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,De=typeof Symbol=="function"&&typeof Symbol.iterator=="object",be=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===De||!0)?Symbol.toStringTag:null,at=Object.prototype.propertyIsEnumerable,Ze=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(Oe){return Oe.__proto__}:null);function Je(Oe,se){if(Oe===1/0||Oe===-1/0||Oe!==Oe||Oe&&Oe>-1e3&&Oe<1e3||ne.call(/e/,se))return se;var ve=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof Oe=="number"){var p=Oe<0?-pe(-Oe):pe(Oe);if(p!==Oe){var Ne=String(p),Ye=Y.call(se,Ne.length+1);return ie.call(Ne,ve,"$&_")+"."+ie.call(ie.call(Ye,/([0-9]{3})/g,"$&_"),/_$/,"")}}return ie.call(se,ve,"$&_")}var We=Jfe,Me=We.custom,Fe=ft(Me)?Me:null,He={__proto__:null,double:'"',single:"'"},bt={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};wE=function Oe(se,ve,p,Ne){var Ye=ve||{};if(Dt(Ye,"quoteStyle")&&!Dt(He,Ye.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Dt(Ye,"maxStringLength")&&(typeof Ye.maxStringLength=="number"?Ye.maxStringLength<0&&Ye.maxStringLength!==1/0:Ye.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var rt=Dt(Ye,"customInspect")?Ye.customInspect:!0;if(typeof rt!="boolean"&&rt!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Dt(Ye,"indent")&&Ye.indent!==null&&Ye.indent!=="	"&&!(parseInt(Ye.indent,10)===Ye.indent&&Ye.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Dt(Ye,"numericSeparator")&&typeof Ye.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var ct=Ye.numericSeparator;if(typeof se>"u")return"undefined";if(se===null)return"null";if(typeof se=="boolean")return se?"true":"false";if(typeof se=="string")return Jn(se,Ye);if(typeof se=="number"){if(se===0)return 1/0/se>0?"0":"-0";var dt=String(se);return ct?Je(se,dt):dt}if(typeof se=="bigint"){var qt=String(se)+"n";return ct?Je(se,qt):qt}var Gt=typeof Ye.depth>"u"?5:Ye.depth;if(typeof p>"u"&&(p=0),p>=Gt&&Gt>0&&typeof se=="object")return Lt(se)?"[Array]":"[Object]";var jt=Ht(Ye,p);if(typeof Ne>"u")Ne=[];else if(tn(Ne,se)>=0)return"[Circular]";function xt(Do,Ti,ja){if(Ti&&(Ne=he.call(Ne),Ne.push(Ti)),ja){var Sa={depth:Ye.depth};return Dt(Ye,"quoteStyle")&&(Sa.quoteStyle=Ye.quoteStyle),Oe(Do,Sa,p+1,Ne)}return Oe(Do,Ye,p+1,Ne)}if(typeof se=="function"&&!Ue(se)){var Tn=qn(se),On=tr(se,xt);return"[Function"+(Tn?": "+Tn:" (anonymous)")+"]"+(On.length>0?" { "+oe.call(On,", ")+" }":"")}if(ft(se)){var gr=De?ie.call(String(se),/^(Symbol\(.*\))_[^)]*$/,"$1"):Se.call(se);return typeof se=="object"&&!De?ce(gr):gr}if(vr(se)){for(var Er="<"+V.call(String(se.nodeName)),on=se.attributes||[],Rn=0;Rn<on.length;Rn++)Er+=" "+on[Rn].name+"="+Yt(gt(on[Rn].value),"double",Ye);return Er+=">",se.childNodes&&se.childNodes.length&&(Er+="..."),Er+="</"+V.call(String(se.nodeName))+">",Er}if(Lt(se)){if(se.length===0)return"[]";var er=tr(se,xt);return jt&&!St(er)?"["+sn(er,jt)+"]":"[ "+oe.call(er,", ")+" ]"}if(Pe(se)){var Xr=tr(se,xt);return!("cause"in Error.prototype)&&"cause"in se&&!at.call(se,"cause")?"{ ["+String(se)+"] "+oe.call(G.call("[cause]: "+xt(se.cause),Xr),", ")+" }":Xr.length===0?"["+String(se)+"]":"{ ["+String(se)+"] "+oe.call(Xr,", ")+" }"}if(typeof se=="object"&&rt){if(Fe&&typeof se[Fe]=="function"&&We)return We(se,{depth:Gt-p});if(rt!=="symbol"&&typeof se.inspect=="function")return se.inspect()}if(rr(se)){var Ur=[];return r&&r.call(se,function(Do,Ti){Ur.push(xt(Ti,se,!0)+" => "+xt(Do,se))}),nt("Map",t.call(se),Ur,jt)}if(Zn(se)){var Dr=[];return o&&o.call(se,function(Do){Dr.push(xt(Do,se))}),nt("Set",a.call(se),Dr,jt)}if(Dn(se))return fe("WeakMap");if(dr(se))return fe("WeakSet");if(pn(se))return fe("WeakRef");if(it(se))return ce(xt(Number(se)));if(Ut(se))return ce(xt(Ee.call(se)));if(_t(se))return ce(P.call(se));if(Be(se))return ce(xt(String(se)));if(typeof window<"u"&&se===window)return"{ [object Window] }";if(typeof globalThis<"u"&&se===globalThis||typeof window<"u"&&se===window)return"{ [object globalThis] }";if(!Kt(se)&&!Ue(se)){var ur=tr(se,xt),mo=Ze?Ze(se)===Object.prototype:se instanceof Object||se.constructor===Object,Ma=se instanceof Object?"":"null prototype",qi=!mo&&be&&Object(se)===se&&be in se?Y.call(_n(se),8,-1):Ma?"Object":"",vi=mo||typeof se.constructor!="function"?"":se.constructor.name?se.constructor.name+" ":"",io=vi+(qi||Ma?"["+oe.call(G.call([],qi||[],Ma||[]),": ")+"] ":"");return ur.length===0?io+"{}":jt?io+"{"+sn(ur,jt)+"}":io+"{ "+oe.call(ur,", ")+" }"}return String(se)};function Yt(Oe,se,ve){var p=ve.quoteStyle||se,Ne=He[p];return Ne+Oe+Ne}function gt(Oe){return ie.call(String(Oe),/"/g,"&quot;")}function Lt(Oe){return _n(Oe)==="[object Array]"&&(!be||!(typeof Oe=="object"&&be in Oe))}function Kt(Oe){return _n(Oe)==="[object Date]"&&(!be||!(typeof Oe=="object"&&be in Oe))}function Ue(Oe){return _n(Oe)==="[object RegExp]"&&(!be||!(typeof Oe=="object"&&be in Oe))}function Pe(Oe){return _n(Oe)==="[object Error]"&&(!be||!(typeof Oe=="object"&&be in Oe))}function Be(Oe){return _n(Oe)==="[object String]"&&(!be||!(typeof Oe=="object"&&be in Oe))}function it(Oe){return _n(Oe)==="[object Number]"&&(!be||!(typeof Oe=="object"&&be in Oe))}function _t(Oe){return _n(Oe)==="[object Boolean]"&&(!be||!(typeof Oe=="object"&&be in Oe))}function ft(Oe){if(De)return Oe&&typeof Oe=="object"&&Oe instanceof Symbol;if(typeof Oe=="symbol")return!0;if(!Oe||typeof Oe!="object"||!Se)return!1;try{return Se.call(Oe),!0}catch{}return!1}function Ut(Oe){if(!Oe||typeof Oe!="object"||!Ee)return!1;try{return Ee.call(Oe),!0}catch{}return!1}var rn=Object.prototype.hasOwnProperty||function(Oe){return Oe in this};function Dt(Oe,se){return rn.call(Oe,se)}function _n(Oe){return z.call(Oe)}function qn(Oe){if(Oe.name)return Oe.name;var se=q.call(j.call(Oe),/^function\s*([\w$]+)/);return se?se[1]:null}function tn(Oe,se){if(Oe.indexOf)return Oe.indexOf(se);for(var ve=0,p=Oe.length;ve<p;ve++)if(Oe[ve]===se)return ve;return-1}function rr(Oe){if(!t||!Oe||typeof Oe!="object")return!1;try{t.call(Oe);try{a.call(Oe)}catch{return!0}return Oe instanceof Map}catch{}return!1}function Dn(Oe){if(!g||!Oe||typeof Oe!="object")return!1;try{g.call(Oe,g);try{E.call(Oe,E)}catch{return!0}return Oe instanceof WeakMap}catch{}return!1}function pn(Oe){if(!I||!Oe||typeof Oe!="object")return!1;try{return I.call(Oe),!0}catch{}return!1}function Zn(Oe){if(!a||!Oe||typeof Oe!="object")return!1;try{a.call(Oe);try{t.call(Oe)}catch{return!0}return Oe instanceof Set}catch{}return!1}function dr(Oe){if(!E||!Oe||typeof Oe!="object")return!1;try{E.call(Oe,E);try{g.call(Oe,g)}catch{return!0}return Oe instanceof WeakSet}catch{}return!1}function vr(Oe){return!Oe||typeof Oe!="object"?!1:typeof HTMLElement<"u"&&Oe instanceof HTMLElement?!0:typeof Oe.nodeName=="string"&&typeof Oe.getAttribute=="function"}function Jn(Oe,se){if(Oe.length>se.maxStringLength){var ve=Oe.length-se.maxStringLength,p="... "+ve+" more character"+(ve>1?"s":"");return Jn(Y.call(Oe,0,se.maxStringLength),se)+p}var Ne=bt[se.quoteStyle||"single"];Ne.lastIndex=0;var Ye=ie.call(ie.call(Oe,Ne,"\\$1"),/[\x00-\x1f]/g,Qe);return Yt(Ye,"single",se)}function Qe(Oe){var se=Oe.charCodeAt(0),ve={8:"b",9:"t",10:"n",12:"f",13:"r"}[se];return ve?"\\"+ve:"\\x"+(se<16?"0":"")+te.call(se.toString(16))}function ce(Oe){return"Object("+Oe+")"}function fe(Oe){return Oe+" { ? }"}function nt(Oe,se,ve,p){var Ne=p?sn(ve,p):oe.call(ve,", ");return Oe+" ("+se+") {"+Ne+"}"}function St(Oe){for(var se=0;se<Oe.length;se++)if(tn(Oe[se],`
`)>=0)return!1;return!0}function Ht(Oe,se){var ve;if(Oe.indent==="	")ve="	";else if(typeof Oe.indent=="number"&&Oe.indent>0)ve=oe.call(Array(Oe.indent+1)," ");else return null;return{base:ve,prev:oe.call(Array(se+1),ve)}}function sn(Oe,se){if(Oe.length===0)return"";var ve=`
`+se.prev+se.base;return ve+oe.call(Oe,","+ve)+`
`+se.prev}function tr(Oe,se){var ve=Lt(Oe),p=[];if(ve){p.length=Oe.length;for(var Ne=0;Ne<Oe.length;Ne++)p[Ne]=Dt(Oe,Ne)?se(Oe[Ne],Oe):""}var Ye=typeof me=="function"?me(Oe):[],rt;if(De){rt={};for(var ct=0;ct<Ye.length;ct++)rt["$"+Ye[ct]]=Ye[ct]}for(var dt in Oe)Dt(Oe,dt)&&(ve&&String(Number(dt))===dt&&dt<Oe.length||De&&rt["$"+dt]instanceof Symbol||(ne.call(/[^\w$]/,dt)?p.push(se(dt,Oe)+": "+se(Oe[dt],Oe)):p.push(dt+": "+se(Oe[dt],Oe))));if(typeof me=="function")for(var qt=0;qt<Ye.length;qt++)at.call(Oe,Ye[qt])&&p.push("["+se(Ye[qt])+"]: "+se(Oe[Ye[qt]],Oe));return p}return wE}var ME,iF;function epe(){if(iF)return ME;iF=1;var n=I3(),e=ov(),t=function(o,d,g){for(var b=o,E;(E=b.next)!=null;b=E)if(E.key===d)return b.next=E.next,g||(E.next=o.next,o.next=E),E},r=function(o,d){if(o){var g=t(o,d);return g&&g.value}},i=function(o,d,g){var b=t(o,d);b?b.value=g:o.next={key:d,next:o.next,value:g}},s=function(o,d){return o?!!t(o,d):!1},a=function(o,d){if(o)return t(o,d,!0)};return ME=function(){var d,g={assert:function(b){if(!g.has(b))throw new e("Side channel does not contain "+n(b))},delete:function(b){var E=d&&d.next,S=a(d,b);return S&&E&&E===S&&(d=void 0),!!S},get:function(b){return r(d,b)},has:function(b){return s(d,b)},set:function(b,E){d||(d={next:void 0}),i(d,b,E)}};return g},ME}var SE,oF;function IG(){return oF||(oF=1,SE=Object),SE}var EE,sF;function tpe(){return sF||(sF=1,EE=Error),EE}var BE,aF;function npe(){return aF||(aF=1,BE=EvalError),BE}var OE,lF;function rpe(){return lF||(lF=1,OE=RangeError),OE}var IE,uF;function ipe(){return uF||(uF=1,IE=ReferenceError),IE}var kE,AF;function ope(){return AF||(AF=1,kE=SyntaxError),kE}var TE,cF;function spe(){return cF||(cF=1,TE=URIError),TE}var PE,dF;function ape(){return dF||(dF=1,PE=Math.abs),PE}var KE,hF;function lpe(){return hF||(hF=1,KE=Math.floor),KE}var DE,fF;function upe(){return fF||(fF=1,DE=Math.max),DE}var RE,pF;function Ape(){return pF||(pF=1,RE=Math.min),RE}var FE,mF;function cpe(){return mF||(mF=1,FE=Math.pow),FE}var LE,gF;function dpe(){return gF||(gF=1,LE=Math.round),LE}var UE,yF;function hpe(){return yF||(yF=1,UE=Number.isNaN||function(e){return e!==e}),UE}var zE,vF;function fpe(){if(vF)return zE;vF=1;var n=hpe();return zE=function(t){return n(t)||t===0?t:t<0?-1:1},zE}var jE,CF;function ppe(){return CF||(CF=1,jE=Object.getOwnPropertyDescriptor),jE}var NE,_F;function kG(){if(_F)return NE;_F=1;var n=ppe();if(n)try{n([],"length")}catch{n=null}return NE=n,NE}var WE,bF;function mpe(){if(bF)return WE;bF=1;var n=Object.defineProperty||!1;if(n)try{n({},"a",{value:1})}catch{n=!1}return WE=n,WE}var GE,xF;function gpe(){return xF||(xF=1,GE=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),r=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var i=42;e[t]=i;for(var s in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var a=Object.getOwnPropertySymbols(e);if(a.length!==1||a[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(e,t);if(o.value!==i||o.enumerable!==!0)return!1}return!0}),GE}var QE,wF;function ype(){if(wF)return QE;wF=1;var n=typeof Symbol<"u"&&Symbol,e=gpe();return QE=function(){return typeof n!="function"||typeof Symbol!="function"||typeof n("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},QE}var qE,MF;function TG(){return MF||(MF=1,qE=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),qE}var YE,SF;function PG(){if(SF)return YE;SF=1;var n=IG();return YE=n.getPrototypeOf||null,YE}var $E,EF;function vpe(){if(EF)return $E;EF=1;var n="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,t=Math.max,r="[object Function]",i=function(d,g){for(var b=[],E=0;E<d.length;E+=1)b[E]=d[E];for(var S=0;S<g.length;S+=1)b[S+d.length]=g[S];return b},s=function(d,g){for(var b=[],E=g,S=0;E<d.length;E+=1,S+=1)b[S]=d[E];return b},a=function(o,d){for(var g="",b=0;b<o.length;b+=1)g+=o[b],b+1<o.length&&(g+=d);return g};return $E=function(d){var g=this;if(typeof g!="function"||e.apply(g)!==r)throw new TypeError(n+g);for(var b=s(arguments,1),E,S=function(){if(this instanceof E){var q=g.apply(this,i(b,arguments));return Object(q)===q?q:this}return g.apply(d,i(b,arguments))},I=t(0,g.length-b.length),P=[],z=0;z<I;z++)P[z]="$"+z;if(E=Function("binder","return function ("+a(P,",")+"){ return binder.apply(this,arguments); }")(S),g.prototype){var j=function(){};j.prototype=g.prototype,E.prototype=new j,j.prototype=null}return E},$E}var VE,BF;function k3(){if(BF)return VE;BF=1;var n=vpe();return VE=Function.prototype.bind||n,VE}var HE,OF;function fI(){return OF||(OF=1,HE=Function.prototype.call),HE}var ZE,IF;function KG(){return IF||(IF=1,ZE=Function.prototype.apply),ZE}var XE,kF;function Cpe(){return kF||(kF=1,XE=typeof Reflect<"u"&&Reflect&&Reflect.apply),XE}var JE,TF;function _pe(){if(TF)return JE;TF=1;var n=k3(),e=KG(),t=fI(),r=Cpe();return JE=r||n.call(t,e),JE}var e6,PF;function DG(){if(PF)return e6;PF=1;var n=k3(),e=ov(),t=fI(),r=_pe();return e6=function(s){if(s.length<1||typeof s[0]!="function")throw new e("a function is required");return r(n,t,s)},e6}var t6,KF;function bpe(){if(KF)return t6;KF=1;var n=DG(),e=kG(),t;try{t=[].__proto__===Array.prototype}catch(a){if(!a||typeof a!="object"||!("code"in a)||a.code!=="ERR_PROTO_ACCESS")throw a}var r=!!t&&e&&e(Object.prototype,"__proto__"),i=Object,s=i.getPrototypeOf;return t6=r&&typeof r.get=="function"?n([r.get]):typeof s=="function"?function(o){return s(o==null?o:i(o))}:!1,t6}var n6,DF;function xpe(){if(DF)return n6;DF=1;var n=TG(),e=PG(),t=bpe();return n6=n?function(i){return n(i)}:e?function(i){if(!i||typeof i!="object"&&typeof i!="function")throw new TypeError("getProto: not an object");return e(i)}:t?function(i){return t(i)}:null,n6}var r6,RF;function wpe(){if(RF)return r6;RF=1;var n=Function.prototype.call,e=Object.prototype.hasOwnProperty,t=k3();return r6=t.call(n,e),r6}var i6,FF;function pI(){if(FF)return i6;FF=1;var n,e=IG(),t=tpe(),r=npe(),i=rpe(),s=ipe(),a=ope(),o=ov(),d=spe(),g=ape(),b=lpe(),E=upe(),S=Ape(),I=cpe(),P=dpe(),z=fpe(),j=Function,q=function(Pe){try{return j('"use strict"; return ('+Pe+").constructor;")()}catch{}},Y=kG(),ie=mpe(),te=function(){throw new o},V=Y?function(){try{return arguments.callee,te}catch{try{return Y(arguments,"callee").get}catch{return te}}}():te,ne=ype()(),G=xpe(),oe=PG(),he=TG(),pe=KG(),Ee=fI(),me={},Se=typeof Uint8Array>"u"||!G?n:G(Uint8Array),De={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?n:ArrayBuffer,"%ArrayIteratorPrototype%":ne&&G?G([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":me,"%AsyncGenerator%":me,"%AsyncGeneratorFunction%":me,"%AsyncIteratorPrototype%":me,"%Atomics%":typeof Atomics>"u"?n:Atomics,"%BigInt%":typeof BigInt>"u"?n:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?n:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?n:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":t,"%eval%":eval,"%EvalError%":r,"%Float32Array%":typeof Float32Array>"u"?n:Float32Array,"%Float64Array%":typeof Float64Array>"u"?n:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?n:FinalizationRegistry,"%Function%":j,"%GeneratorFunction%":me,"%Int8Array%":typeof Int8Array>"u"?n:Int8Array,"%Int16Array%":typeof Int16Array>"u"?n:Int16Array,"%Int32Array%":typeof Int32Array>"u"?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":ne&&G?G(G([][Symbol.iterator]())):n,"%JSON%":typeof JSON=="object"?JSON:n,"%Map%":typeof Map>"u"?n:Map,"%MapIteratorPrototype%":typeof Map>"u"||!ne||!G?n:G(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":e,"%Object.getOwnPropertyDescriptor%":Y,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?n:Promise,"%Proxy%":typeof Proxy>"u"?n:Proxy,"%RangeError%":i,"%ReferenceError%":s,"%Reflect%":typeof Reflect>"u"?n:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?n:Set,"%SetIteratorPrototype%":typeof Set>"u"||!ne||!G?n:G(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":ne&&G?G(""[Symbol.iterator]()):n,"%Symbol%":ne?Symbol:n,"%SyntaxError%":a,"%ThrowTypeError%":V,"%TypedArray%":Se,"%TypeError%":o,"%Uint8Array%":typeof Uint8Array>"u"?n:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?n:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?n:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?n:Uint32Array,"%URIError%":d,"%WeakMap%":typeof WeakMap>"u"?n:WeakMap,"%WeakRef%":typeof WeakRef>"u"?n:WeakRef,"%WeakSet%":typeof WeakSet>"u"?n:WeakSet,"%Function.prototype.call%":Ee,"%Function.prototype.apply%":pe,"%Object.defineProperty%":ie,"%Object.getPrototypeOf%":oe,"%Math.abs%":g,"%Math.floor%":b,"%Math.max%":E,"%Math.min%":S,"%Math.pow%":I,"%Math.round%":P,"%Math.sign%":z,"%Reflect.getPrototypeOf%":he};if(G)try{null.error}catch(Pe){var be=G(G(Pe));De["%Error.prototype%"]=be}var at=function Pe(Be){var it;if(Be==="%AsyncFunction%")it=q("async function () {}");else if(Be==="%GeneratorFunction%")it=q("function* () {}");else if(Be==="%AsyncGeneratorFunction%")it=q("async function* () {}");else if(Be==="%AsyncGenerator%"){var _t=Pe("%AsyncGeneratorFunction%");_t&&(it=_t.prototype)}else if(Be==="%AsyncIteratorPrototype%"){var ft=Pe("%AsyncGenerator%");ft&&G&&(it=G(ft.prototype))}return De[Be]=it,it},Ze={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Je=k3(),We=wpe(),Me=Je.call(Ee,Array.prototype.concat),Fe=Je.call(pe,Array.prototype.splice),He=Je.call(Ee,String.prototype.replace),bt=Je.call(Ee,String.prototype.slice),Yt=Je.call(Ee,RegExp.prototype.exec),gt=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Lt=/\\(\\)?/g,Kt=function(Be){var it=bt(Be,0,1),_t=bt(Be,-1);if(it==="%"&&_t!=="%")throw new a("invalid intrinsic syntax, expected closing `%`");if(_t==="%"&&it!=="%")throw new a("invalid intrinsic syntax, expected opening `%`");var ft=[];return He(Be,gt,function(Ut,rn,Dt,_n){ft[ft.length]=Dt?He(_n,Lt,"$1"):rn||Ut}),ft},Ue=function(Be,it){var _t=Be,ft;if(We(Ze,_t)&&(ft=Ze[_t],_t="%"+ft[0]+"%"),We(De,_t)){var Ut=De[_t];if(Ut===me&&(Ut=at(_t)),typeof Ut>"u"&&!it)throw new o("intrinsic "+Be+" exists, but is not available. Please file an issue!");return{alias:ft,name:_t,value:Ut}}throw new a("intrinsic "+Be+" does not exist!")};return i6=function(Be,it){if(typeof Be!="string"||Be.length===0)throw new o("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof it!="boolean")throw new o('"allowMissing" argument must be a boolean');if(Yt(/^%?[^%]*%?$/,Be)===null)throw new a("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var _t=Kt(Be),ft=_t.length>0?_t[0]:"",Ut=Ue("%"+ft+"%",it),rn=Ut.name,Dt=Ut.value,_n=!1,qn=Ut.alias;qn&&(ft=qn[0],Fe(_t,Me([0,1],qn)));for(var tn=1,rr=!0;tn<_t.length;tn+=1){var Dn=_t[tn],pn=bt(Dn,0,1),Zn=bt(Dn,-1);if((pn==='"'||pn==="'"||pn==="`"||Zn==='"'||Zn==="'"||Zn==="`")&&pn!==Zn)throw new a("property names with quotes must have matching quotes");if((Dn==="constructor"||!rr)&&(_n=!0),ft+="."+Dn,rn="%"+ft+"%",We(De,rn))Dt=De[rn];else if(Dt!=null){if(!(Dn in Dt)){if(!it)throw new o("base intrinsic for "+Be+" exists, but the property is not available.");return}if(Y&&tn+1>=_t.length){var dr=Y(Dt,Dn);rr=!!dr,rr&&"get"in dr&&!("originalValue"in dr.get)?Dt=dr.get:Dt=Dt[Dn]}else rr=We(Dt,Dn),Dt=Dt[Dn];rr&&!_n&&(De[rn]=Dt)}}return Dt},i6}var o6,LF;function RG(){if(LF)return o6;LF=1;var n=pI(),e=DG(),t=e([n("%String.prototype.indexOf%")]);return o6=function(i,s){var a=n(i,!!s);return typeof a=="function"&&t(i,".prototype.")>-1?e([a]):a},o6}var s6,UF;function FG(){if(UF)return s6;UF=1;var n=pI(),e=RG(),t=I3(),r=ov(),i=n("%Map%",!0),s=e("Map.prototype.get",!0),a=e("Map.prototype.set",!0),o=e("Map.prototype.has",!0),d=e("Map.prototype.delete",!0),g=e("Map.prototype.size",!0);return s6=!!i&&function(){var E,S={assert:function(I){if(!S.has(I))throw new r("Side channel does not contain "+t(I))},delete:function(I){if(E){var P=d(E,I);return g(E)===0&&(E=void 0),P}return!1},get:function(I){if(E)return s(E,I)},has:function(I){return E?o(E,I):!1},set:function(I,P){E||(E=new i),a(E,I,P)}};return S},s6}var a6,zF;function Mpe(){if(zF)return a6;zF=1;var n=pI(),e=RG(),t=I3(),r=FG(),i=ov(),s=n("%WeakMap%",!0),a=e("WeakMap.prototype.get",!0),o=e("WeakMap.prototype.set",!0),d=e("WeakMap.prototype.has",!0),g=e("WeakMap.prototype.delete",!0);return a6=s?function(){var E,S,I={assert:function(P){if(!I.has(P))throw new i("Side channel does not contain "+t(P))},delete:function(P){if(s&&P&&(typeof P=="object"||typeof P=="function")){if(E)return g(E,P)}else if(r&&S)return S.delete(P);return!1},get:function(P){return s&&P&&(typeof P=="object"||typeof P=="function")&&E?a(E,P):S&&S.get(P)},has:function(P){return s&&P&&(typeof P=="object"||typeof P=="function")&&E?d(E,P):!!S&&S.has(P)},set:function(P,z){s&&P&&(typeof P=="object"||typeof P=="function")?(E||(E=new s),o(E,P,z)):r&&(S||(S=r()),S.set(P,z))}};return I}:r,a6}var l6,jF;function Spe(){if(jF)return l6;jF=1;var n=ov(),e=I3(),t=epe(),r=FG(),i=Mpe(),s=i||r||t;return l6=function(){var o,d={assert:function(g){if(!d.has(g))throw new n("Side channel does not contain "+e(g))},delete:function(g){return!!o&&o.delete(g)},get:function(g){return o&&o.get(g)},has:function(g){return!!o&&o.has(g)},set:function(g,b){o||(o=s()),o.set(g,b)}};return d},l6}var u6,NF;function mI(){if(NF)return u6;NF=1;var n=String.prototype.replace,e=/%20/g,t={RFC1738:"RFC1738",RFC3986:"RFC3986"};return u6={default:t.RFC3986,formatters:{RFC1738:function(r){return n.call(r,e,"+")},RFC3986:function(r){return String(r)}},RFC1738:t.RFC1738,RFC3986:t.RFC3986},u6}var A6,WF;function LG(){if(WF)return A6;WF=1;var n=mI(),e=Object.prototype.hasOwnProperty,t=Array.isArray,r=function(){for(var j=[],q=0;q<256;++q)j.push("%"+((q<16?"0":"")+q.toString(16)).toUpperCase());return j}(),i=function(q){for(;q.length>1;){var Y=q.pop(),ie=Y.obj[Y.prop];if(t(ie)){for(var te=[],V=0;V<ie.length;++V)typeof ie[V]<"u"&&te.push(ie[V]);Y.obj[Y.prop]=te}}},s=function(q,Y){for(var ie=Y&&Y.plainObjects?{__proto__:null}:{},te=0;te<q.length;++te)typeof q[te]<"u"&&(ie[te]=q[te]);return ie},a=function j(q,Y,ie){if(!Y)return q;if(typeof Y!="object"&&typeof Y!="function"){if(t(q))q.push(Y);else if(q&&typeof q=="object")(ie&&(ie.plainObjects||ie.allowPrototypes)||!e.call(Object.prototype,Y))&&(q[Y]=!0);else return[q,Y];return q}if(!q||typeof q!="object")return[q].concat(Y);var te=q;return t(q)&&!t(Y)&&(te=s(q,ie)),t(q)&&t(Y)?(Y.forEach(function(V,ne){if(e.call(q,ne)){var G=q[ne];G&&typeof G=="object"&&V&&typeof V=="object"?q[ne]=j(G,V,ie):q.push(V)}else q[ne]=V}),q):Object.keys(Y).reduce(function(V,ne){var G=Y[ne];return e.call(V,ne)?V[ne]=j(V[ne],G,ie):V[ne]=G,V},te)},o=function(q,Y){return Object.keys(Y).reduce(function(ie,te){return ie[te]=Y[te],ie},q)},d=function(j,q,Y){var ie=j.replace(/\+/g," ");if(Y==="iso-8859-1")return ie.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(ie)}catch{return ie}},g=1024,b=function(q,Y,ie,te,V){if(q.length===0)return q;var ne=q;if(typeof q=="symbol"?ne=Symbol.prototype.toString.call(q):typeof q!="string"&&(ne=String(q)),ie==="iso-8859-1")return escape(ne).replace(/%u[0-9a-f]{4}/gi,function(Se){return"%26%23"+parseInt(Se.slice(2),16)+"%3B"});for(var G="",oe=0;oe<ne.length;oe+=g){for(var he=ne.length>=g?ne.slice(oe,oe+g):ne,pe=[],Ee=0;Ee<he.length;++Ee){var me=he.charCodeAt(Ee);if(me===45||me===46||me===95||me===126||me>=48&&me<=57||me>=65&&me<=90||me>=97&&me<=122||V===n.RFC1738&&(me===40||me===41)){pe[pe.length]=he.charAt(Ee);continue}if(me<128){pe[pe.length]=r[me];continue}if(me<2048){pe[pe.length]=r[192|me>>6]+r[128|me&63];continue}if(me<55296||me>=57344){pe[pe.length]=r[224|me>>12]+r[128|me>>6&63]+r[128|me&63];continue}Ee+=1,me=65536+((me&1023)<<10|he.charCodeAt(Ee)&1023),pe[pe.length]=r[240|me>>18]+r[128|me>>12&63]+r[128|me>>6&63]+r[128|me&63]}G+=pe.join("")}return G},E=function(q){for(var Y=[{obj:{o:q},prop:"o"}],ie=[],te=0;te<Y.length;++te)for(var V=Y[te],ne=V.obj[V.prop],G=Object.keys(ne),oe=0;oe<G.length;++oe){var he=G[oe],pe=ne[he];typeof pe=="object"&&pe!==null&&ie.indexOf(pe)===-1&&(Y.push({obj:ne,prop:he}),ie.push(pe))}return i(Y),q},S=function(q){return Object.prototype.toString.call(q)==="[object RegExp]"},I=function(q){return!q||typeof q!="object"?!1:!!(q.constructor&&q.constructor.isBuffer&&q.constructor.isBuffer(q))},P=function(q,Y){return[].concat(q,Y)},z=function(q,Y){if(t(q)){for(var ie=[],te=0;te<q.length;te+=1)ie.push(Y(q[te]));return ie}return Y(q)};return A6={arrayToObject:s,assign:o,combine:P,compact:E,decode:d,encode:b,isBuffer:I,isRegExp:S,maybeMap:z,merge:a},A6}var c6,GF;function Epe(){if(GF)return c6;GF=1;var n=Spe(),e=LG(),t=mI(),r=Object.prototype.hasOwnProperty,i={brackets:function(j){return j+"[]"},comma:"comma",indices:function(j,q){return j+"["+q+"]"},repeat:function(j){return j}},s=Array.isArray,a=Array.prototype.push,o=function(z,j){a.apply(z,s(j)?j:[j])},d=Date.prototype.toISOString,g=t.default,b={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:e.encode,encodeValuesOnly:!1,filter:void 0,format:g,formatter:t.formatters[g],indices:!1,serializeDate:function(j){return d.call(j)},skipNulls:!1,strictNullHandling:!1},E=function(j){return typeof j=="string"||typeof j=="number"||typeof j=="boolean"||typeof j=="symbol"||typeof j=="bigint"},S={},I=function z(j,q,Y,ie,te,V,ne,G,oe,he,pe,Ee,me,Se,De,be,at,Ze){for(var Je=j,We=Ze,Me=0,Fe=!1;(We=We.get(S))!==void 0&&!Fe;){var He=We.get(j);if(Me+=1,typeof He<"u"){if(He===Me)throw new RangeError("Cyclic object value");Fe=!0}typeof We.get(S)>"u"&&(Me=0)}if(typeof he=="function"?Je=he(q,Je):Je instanceof Date?Je=me(Je):Y==="comma"&&s(Je)&&(Je=e.maybeMap(Je,function(rn){return rn instanceof Date?me(rn):rn})),Je===null){if(V)return oe&&!be?oe(q,b.encoder,at,"key",Se):q;Je=""}if(E(Je)||e.isBuffer(Je)){if(oe){var bt=be?q:oe(q,b.encoder,at,"key",Se);return[De(bt)+"="+De(oe(Je,b.encoder,at,"value",Se))]}return[De(q)+"="+De(String(Je))]}var Yt=[];if(typeof Je>"u")return Yt;var gt;if(Y==="comma"&&s(Je))be&&oe&&(Je=e.maybeMap(Je,oe)),gt=[{value:Je.length>0?Je.join(",")||null:void 0}];else if(s(he))gt=he;else{var Lt=Object.keys(Je);gt=pe?Lt.sort(pe):Lt}var Kt=G?String(q).replace(/\./g,"%2E"):String(q),Ue=ie&&s(Je)&&Je.length===1?Kt+"[]":Kt;if(te&&s(Je)&&Je.length===0)return Ue+"[]";for(var Pe=0;Pe<gt.length;++Pe){var Be=gt[Pe],it=typeof Be=="object"&&Be&&typeof Be.value<"u"?Be.value:Je[Be];if(!(ne&&it===null)){var _t=Ee&&G?String(Be).replace(/\./g,"%2E"):String(Be),ft=s(Je)?typeof Y=="function"?Y(Ue,_t):Ue:Ue+(Ee?"."+_t:"["+_t+"]");Ze.set(j,Me);var Ut=n();Ut.set(S,Ze),o(Yt,z(it,ft,Y,ie,te,V,ne,G,Y==="comma"&&be&&s(Je)?null:oe,he,pe,Ee,me,Se,De,be,at,Ut))}}return Yt},P=function(j){if(!j)return b;if(typeof j.allowEmptyArrays<"u"&&typeof j.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof j.encodeDotInKeys<"u"&&typeof j.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(j.encoder!==null&&typeof j.encoder<"u"&&typeof j.encoder!="function")throw new TypeError("Encoder has to be a function.");var q=j.charset||b.charset;if(typeof j.charset<"u"&&j.charset!=="utf-8"&&j.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var Y=t.default;if(typeof j.format<"u"){if(!r.call(t.formatters,j.format))throw new TypeError("Unknown format option provided.");Y=j.format}var ie=t.formatters[Y],te=b.filter;(typeof j.filter=="function"||s(j.filter))&&(te=j.filter);var V;if(j.arrayFormat in i?V=j.arrayFormat:"indices"in j?V=j.indices?"indices":"repeat":V=b.arrayFormat,"commaRoundTrip"in j&&typeof j.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var ne=typeof j.allowDots>"u"?j.encodeDotInKeys===!0?!0:b.allowDots:!!j.allowDots;return{addQueryPrefix:typeof j.addQueryPrefix=="boolean"?j.addQueryPrefix:b.addQueryPrefix,allowDots:ne,allowEmptyArrays:typeof j.allowEmptyArrays=="boolean"?!!j.allowEmptyArrays:b.allowEmptyArrays,arrayFormat:V,charset:q,charsetSentinel:typeof j.charsetSentinel=="boolean"?j.charsetSentinel:b.charsetSentinel,commaRoundTrip:!!j.commaRoundTrip,delimiter:typeof j.delimiter>"u"?b.delimiter:j.delimiter,encode:typeof j.encode=="boolean"?j.encode:b.encode,encodeDotInKeys:typeof j.encodeDotInKeys=="boolean"?j.encodeDotInKeys:b.encodeDotInKeys,encoder:typeof j.encoder=="function"?j.encoder:b.encoder,encodeValuesOnly:typeof j.encodeValuesOnly=="boolean"?j.encodeValuesOnly:b.encodeValuesOnly,filter:te,format:Y,formatter:ie,serializeDate:typeof j.serializeDate=="function"?j.serializeDate:b.serializeDate,skipNulls:typeof j.skipNulls=="boolean"?j.skipNulls:b.skipNulls,sort:typeof j.sort=="function"?j.sort:null,strictNullHandling:typeof j.strictNullHandling=="boolean"?j.strictNullHandling:b.strictNullHandling}};return c6=function(z,j){var q=z,Y=P(j),ie,te;typeof Y.filter=="function"?(te=Y.filter,q=te("",q)):s(Y.filter)&&(te=Y.filter,ie=te);var V=[];if(typeof q!="object"||q===null)return"";var ne=i[Y.arrayFormat],G=ne==="comma"&&Y.commaRoundTrip;ie||(ie=Object.keys(q)),Y.sort&&ie.sort(Y.sort);for(var oe=n(),he=0;he<ie.length;++he){var pe=ie[he],Ee=q[pe];Y.skipNulls&&Ee===null||o(V,I(Ee,pe,ne,G,Y.allowEmptyArrays,Y.strictNullHandling,Y.skipNulls,Y.encodeDotInKeys,Y.encode?Y.encoder:null,Y.filter,Y.sort,Y.allowDots,Y.serializeDate,Y.format,Y.formatter,Y.encodeValuesOnly,Y.charset,oe))}var me=V.join(Y.delimiter),Se=Y.addQueryPrefix===!0?"?":"";return Y.charsetSentinel&&(Y.charset==="iso-8859-1"?Se+="utf8=%26%2310003%3B&":Se+="utf8=%E2%9C%93&"),me.length>0?Se+me:""},c6}var d6,QF;function Bpe(){if(QF)return d6;QF=1;var n=LG(),e=Object.prototype.hasOwnProperty,t=Array.isArray,r={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:n.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1},i=function(S){return S.replace(/&#(\d+);/g,function(I,P){return String.fromCharCode(parseInt(P,10))})},s=function(S,I){return S&&typeof S=="string"&&I.comma&&S.indexOf(",")>-1?S.split(","):S},a="utf8=%26%2310003%3B",o="utf8=%E2%9C%93",d=function(I,P){var z={__proto__:null},j=P.ignoreQueryPrefix?I.replace(/^\?/,""):I;j=j.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var q=P.parameterLimit===1/0?void 0:P.parameterLimit,Y=j.split(P.delimiter,q),ie=-1,te,V=P.charset;if(P.charsetSentinel)for(te=0;te<Y.length;++te)Y[te].indexOf("utf8=")===0&&(Y[te]===o?V="utf-8":Y[te]===a&&(V="iso-8859-1"),ie=te,te=Y.length);for(te=0;te<Y.length;++te)if(te!==ie){var ne=Y[te],G=ne.indexOf("]="),oe=G===-1?ne.indexOf("="):G+1,he,pe;oe===-1?(he=P.decoder(ne,r.decoder,V,"key"),pe=P.strictNullHandling?null:""):(he=P.decoder(ne.slice(0,oe),r.decoder,V,"key"),pe=n.maybeMap(s(ne.slice(oe+1),P),function(me){return P.decoder(me,r.decoder,V,"value")})),pe&&P.interpretNumericEntities&&V==="iso-8859-1"&&(pe=i(String(pe))),ne.indexOf("[]=")>-1&&(pe=t(pe)?[pe]:pe);var Ee=e.call(z,he);Ee&&P.duplicates==="combine"?z[he]=n.combine(z[he],pe):(!Ee||P.duplicates==="last")&&(z[he]=pe)}return z},g=function(S,I,P,z){for(var j=z?I:s(I,P),q=S.length-1;q>=0;--q){var Y,ie=S[q];if(ie==="[]"&&P.parseArrays)Y=P.allowEmptyArrays&&(j===""||P.strictNullHandling&&j===null)?[]:[].concat(j);else{Y=P.plainObjects?{__proto__:null}:{};var te=ie.charAt(0)==="["&&ie.charAt(ie.length-1)==="]"?ie.slice(1,-1):ie,V=P.decodeDotInKeys?te.replace(/%2E/g,"."):te,ne=parseInt(V,10);!P.parseArrays&&V===""?Y={0:j}:!isNaN(ne)&&ie!==V&&String(ne)===V&&ne>=0&&P.parseArrays&&ne<=P.arrayLimit?(Y=[],Y[ne]=j):V!=="__proto__"&&(Y[V]=j)}j=Y}return j},b=function(I,P,z,j){if(I){var q=z.allowDots?I.replace(/\.([^.[]+)/g,"[$1]"):I,Y=/(\[[^[\]]*])/,ie=/(\[[^[\]]*])/g,te=z.depth>0&&Y.exec(q),V=te?q.slice(0,te.index):q,ne=[];if(V){if(!z.plainObjects&&e.call(Object.prototype,V)&&!z.allowPrototypes)return;ne.push(V)}for(var G=0;z.depth>0&&(te=ie.exec(q))!==null&&G<z.depth;){if(G+=1,!z.plainObjects&&e.call(Object.prototype,te[1].slice(1,-1))&&!z.allowPrototypes)return;ne.push(te[1])}if(te){if(z.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+z.depth+" and strictDepth is true");ne.push("["+q.slice(te.index)+"]")}return g(ne,P,z,j)}},E=function(I){if(!I)return r;if(typeof I.allowEmptyArrays<"u"&&typeof I.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof I.decodeDotInKeys<"u"&&typeof I.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(I.decoder!==null&&typeof I.decoder<"u"&&typeof I.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof I.charset<"u"&&I.charset!=="utf-8"&&I.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var P=typeof I.charset>"u"?r.charset:I.charset,z=typeof I.duplicates>"u"?r.duplicates:I.duplicates;if(z!=="combine"&&z!=="first"&&z!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var j=typeof I.allowDots>"u"?I.decodeDotInKeys===!0?!0:r.allowDots:!!I.allowDots;return{allowDots:j,allowEmptyArrays:typeof I.allowEmptyArrays=="boolean"?!!I.allowEmptyArrays:r.allowEmptyArrays,allowPrototypes:typeof I.allowPrototypes=="boolean"?I.allowPrototypes:r.allowPrototypes,allowSparse:typeof I.allowSparse=="boolean"?I.allowSparse:r.allowSparse,arrayLimit:typeof I.arrayLimit=="number"?I.arrayLimit:r.arrayLimit,charset:P,charsetSentinel:typeof I.charsetSentinel=="boolean"?I.charsetSentinel:r.charsetSentinel,comma:typeof I.comma=="boolean"?I.comma:r.comma,decodeDotInKeys:typeof I.decodeDotInKeys=="boolean"?I.decodeDotInKeys:r.decodeDotInKeys,decoder:typeof I.decoder=="function"?I.decoder:r.decoder,delimiter:typeof I.delimiter=="string"||n.isRegExp(I.delimiter)?I.delimiter:r.delimiter,depth:typeof I.depth=="number"||I.depth===!1?+I.depth:r.depth,duplicates:z,ignoreQueryPrefix:I.ignoreQueryPrefix===!0,interpretNumericEntities:typeof I.interpretNumericEntities=="boolean"?I.interpretNumericEntities:r.interpretNumericEntities,parameterLimit:typeof I.parameterLimit=="number"?I.parameterLimit:r.parameterLimit,parseArrays:I.parseArrays!==!1,plainObjects:typeof I.plainObjects=="boolean"?I.plainObjects:r.plainObjects,strictDepth:typeof I.strictDepth=="boolean"?!!I.strictDepth:r.strictDepth,strictNullHandling:typeof I.strictNullHandling=="boolean"?I.strictNullHandling:r.strictNullHandling}};return d6=function(S,I){var P=E(I);if(S===""||S===null||typeof S>"u")return P.plainObjects?{__proto__:null}:{};for(var z=typeof S=="string"?d(S,P):S,j=P.plainObjects?{__proto__:null}:{},q=Object.keys(z),Y=0;Y<q.length;++Y){var ie=q[Y],te=b(ie,z[ie],P,typeof S=="string");j=n.merge(j,te,P)}return P.allowSparse===!0?j:n.compact(j)},d6}var h6,qF;function Ope(){if(qF)return h6;qF=1;var n=Epe(),e=Bpe(),t=mI();return h6={formats:t,parse:e,stringify:n},h6}var YF;function Ipe(){if(YF)return mg;YF=1;var n=Hfe();function e(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var t=/^([a-z0-9.+-]+:)/i,r=/:[0-9]*$/,i=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,s=["<",">",'"',"`"," ","\r",`
`,"	"],a=["{","}","|","\\","^","`"].concat(s),o=["'"].concat(a),d=["%","/","?",";","#"].concat(o),g=["/","?","#"],b=255,E=/^[+a-z0-9A-Z_-]{0,63}$/,S=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,I={javascript:!0,"javascript:":!0},P={javascript:!0,"javascript:":!0},z={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},j=Ope();function q(V,ne,G){if(V&&typeof V=="object"&&V instanceof e)return V;var oe=new e;return oe.parse(V,ne,G),oe}e.prototype.parse=function(V,ne,G){if(typeof V!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof V);var oe=V.indexOf("?"),he=oe!==-1&&oe<V.indexOf("#")?"?":"#",pe=V.split(he),Ee=/\\/g;pe[0]=pe[0].replace(Ee,"/"),V=pe.join(he);var me=V;if(me=me.trim(),!G&&V.split("#").length===1){var Se=i.exec(me);if(Se)return this.path=me,this.href=me,this.pathname=Se[1],Se[2]?(this.search=Se[2],ne?this.query=j.parse(this.search.substr(1)):this.query=this.search.substr(1)):ne&&(this.search="",this.query={}),this}var De=t.exec(me);if(De){De=De[0];var be=De.toLowerCase();this.protocol=be,me=me.substr(De.length)}if(G||De||me.match(/^\/\/[^@/]+@[^@/]+/)){var at=me.substr(0,2)==="//";at&&!(De&&P[De])&&(me=me.substr(2),this.slashes=!0)}if(!P[De]&&(at||De&&!z[De])){for(var Ze=-1,Je=0;Je<g.length;Je++){var We=me.indexOf(g[Je]);We!==-1&&(Ze===-1||We<Ze)&&(Ze=We)}var Me,Fe;Ze===-1?Fe=me.lastIndexOf("@"):Fe=me.lastIndexOf("@",Ze),Fe!==-1&&(Me=me.slice(0,Fe),me=me.slice(Fe+1),this.auth=decodeURIComponent(Me)),Ze=-1;for(var Je=0;Je<d.length;Je++){var We=me.indexOf(d[Je]);We!==-1&&(Ze===-1||We<Ze)&&(Ze=We)}Ze===-1&&(Ze=me.length),this.host=me.slice(0,Ze),me=me.slice(Ze),this.parseHost(),this.hostname=this.hostname||"";var He=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!He)for(var bt=this.hostname.split(/\./),Je=0,Yt=bt.length;Je<Yt;Je++){var gt=bt[Je];if(gt&&!gt.match(E)){for(var Lt="",Kt=0,Ue=gt.length;Kt<Ue;Kt++)gt.charCodeAt(Kt)>127?Lt+="x":Lt+=gt[Kt];if(!Lt.match(E)){var Pe=bt.slice(0,Je),Be=bt.slice(Je+1),it=gt.match(S);it&&(Pe.push(it[1]),Be.unshift(it[2])),Be.length&&(me="/"+Be.join(".")+me),this.hostname=Pe.join(".");break}}}this.hostname.length>b?this.hostname="":this.hostname=this.hostname.toLowerCase(),He||(this.hostname=n.toASCII(this.hostname));var _t=this.port?":"+this.port:"",ft=this.hostname||"";this.host=ft+_t,this.href+=this.host,He&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),me[0]!=="/"&&(me="/"+me))}if(!I[be])for(var Je=0,Yt=o.length;Je<Yt;Je++){var Ut=o[Je];if(me.indexOf(Ut)!==-1){var rn=encodeURIComponent(Ut);rn===Ut&&(rn=escape(Ut)),me=me.split(Ut).join(rn)}}var Dt=me.indexOf("#");Dt!==-1&&(this.hash=me.substr(Dt),me=me.slice(0,Dt));var _n=me.indexOf("?");if(_n!==-1?(this.search=me.substr(_n),this.query=me.substr(_n+1),ne&&(this.query=j.parse(this.query)),me=me.slice(0,_n)):ne&&(this.search="",this.query={}),me&&(this.pathname=me),z[be]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var _t=this.pathname||"",qn=this.search||"";this.path=_t+qn}return this.href=this.format(),this};function Y(V){return typeof V=="string"&&(V=q(V)),V instanceof e?V.format():e.prototype.format.call(V)}e.prototype.format=function(){var V=this.auth||"";V&&(V=encodeURIComponent(V),V=V.replace(/%3A/i,":"),V+="@");var ne=this.protocol||"",G=this.pathname||"",oe=this.hash||"",he=!1,pe="";this.host?he=V+this.host:this.hostname&&(he=V+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(he+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(pe=j.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var Ee=this.search||pe&&"?"+pe||"";return ne&&ne.substr(-1)!==":"&&(ne+=":"),this.slashes||(!ne||z[ne])&&he!==!1?(he="//"+(he||""),G&&G.charAt(0)!=="/"&&(G="/"+G)):he||(he=""),oe&&oe.charAt(0)!=="#"&&(oe="#"+oe),Ee&&Ee.charAt(0)!=="?"&&(Ee="?"+Ee),G=G.replace(/[?#]/g,function(me){return encodeURIComponent(me)}),Ee=Ee.replace("#","%23"),ne+he+G+Ee+oe};function ie(V,ne){return q(V,!1,!0).resolve(ne)}e.prototype.resolve=function(V){return this.resolveObject(q(V,!1,!0)).format()};function te(V,ne){return V?q(V,!1,!0).resolveObject(ne):ne}return e.prototype.resolveObject=function(V){if(typeof V=="string"){var ne=new e;ne.parse(V,!1,!0),V=ne}for(var G=new e,oe=Object.keys(this),he=0;he<oe.length;he++){var pe=oe[he];G[pe]=this[pe]}if(G.hash=V.hash,V.href==="")return G.href=G.format(),G;if(V.slashes&&!V.protocol){for(var Ee=Object.keys(V),me=0;me<Ee.length;me++){var Se=Ee[me];Se!=="protocol"&&(G[Se]=V[Se])}return z[G.protocol]&&G.hostname&&!G.pathname&&(G.pathname="/",G.path=G.pathname),G.href=G.format(),G}if(V.protocol&&V.protocol!==G.protocol){if(!z[V.protocol]){for(var De=Object.keys(V),be=0;be<De.length;be++){var at=De[be];G[at]=V[at]}return G.href=G.format(),G}if(G.protocol=V.protocol,!V.host&&!P[V.protocol]){for(var Yt=(V.pathname||"").split("/");Yt.length&&!(V.host=Yt.shift()););V.host||(V.host=""),V.hostname||(V.hostname=""),Yt[0]!==""&&Yt.unshift(""),Yt.length<2&&Yt.unshift(""),G.pathname=Yt.join("/")}else G.pathname=V.pathname;if(G.search=V.search,G.query=V.query,G.host=V.host||"",G.auth=V.auth,G.hostname=V.hostname||V.host,G.port=V.port,G.pathname||G.search){var Ze=G.pathname||"",Je=G.search||"";G.path=Ze+Je}return G.slashes=G.slashes||V.slashes,G.href=G.format(),G}var We=G.pathname&&G.pathname.charAt(0)==="/",Me=V.host||V.pathname&&V.pathname.charAt(0)==="/",Fe=Me||We||G.host&&V.pathname,He=Fe,bt=G.pathname&&G.pathname.split("/")||[],Yt=V.pathname&&V.pathname.split("/")||[],gt=G.protocol&&!z[G.protocol];if(gt&&(G.hostname="",G.port=null,G.host&&(bt[0]===""?bt[0]=G.host:bt.unshift(G.host)),G.host="",V.protocol&&(V.hostname=null,V.port=null,V.host&&(Yt[0]===""?Yt[0]=V.host:Yt.unshift(V.host)),V.host=null),Fe=Fe&&(Yt[0]===""||bt[0]==="")),Me)G.host=V.host||V.host===""?V.host:G.host,G.hostname=V.hostname||V.hostname===""?V.hostname:G.hostname,G.search=V.search,G.query=V.query,bt=Yt;else if(Yt.length)bt||(bt=[]),bt.pop(),bt=bt.concat(Yt),G.search=V.search,G.query=V.query;else if(V.search!=null){if(gt){G.host=bt.shift(),G.hostname=G.host;var Lt=G.host&&G.host.indexOf("@")>0?G.host.split("@"):!1;Lt&&(G.auth=Lt.shift(),G.hostname=Lt.shift(),G.host=G.hostname)}return G.search=V.search,G.query=V.query,(G.pathname!==null||G.search!==null)&&(G.path=(G.pathname?G.pathname:"")+(G.search?G.search:"")),G.href=G.format(),G}if(!bt.length)return G.pathname=null,G.search?G.path="/"+G.search:G.path=null,G.href=G.format(),G;for(var Kt=bt.slice(-1)[0],Ue=(G.host||V.host||bt.length>1)&&(Kt==="."||Kt==="..")||Kt==="",Pe=0,Be=bt.length;Be>=0;Be--)Kt=bt[Be],Kt==="."?bt.splice(Be,1):Kt===".."?(bt.splice(Be,1),Pe++):Pe&&(bt.splice(Be,1),Pe--);if(!Fe&&!He)for(;Pe--;Pe)bt.unshift("..");Fe&&bt[0]!==""&&(!bt[0]||bt[0].charAt(0)!=="/")&&bt.unshift(""),Ue&&bt.join("/").substr(-1)!=="/"&&bt.push("");var it=bt[0]===""||bt[0]&&bt[0].charAt(0)==="/";if(gt){G.hostname=it?"":bt.length?bt.shift():"",G.host=G.hostname;var Lt=G.host&&G.host.indexOf("@")>0?G.host.split("@"):!1;Lt&&(G.auth=Lt.shift(),G.hostname=Lt.shift(),G.host=G.hostname)}return Fe=Fe||G.host&&bt.length,Fe&&!it&&bt.unshift(""),bt.length>0?G.pathname=bt.join("/"):(G.pathname=null,G.path=null),(G.pathname!==null||G.search!==null)&&(G.path=(G.pathname?G.pathname:"")+(G.search?G.search:"")),G.auth=V.auth||G.auth,G.slashes=G.slashes||V.slashes,G.href=G.format(),G},e.prototype.parseHost=function(){var V=this.host,ne=r.exec(V);ne&&(ne=ne[0],ne!==":"&&(this.port=ne.substr(1)),V=V.substr(0,V.length-ne.length)),V&&(this.hostname=V)},mg.parse=q,mg.resolve=ie,mg.resolveObject=te,mg.format=Y,mg.Url=e,mg}var kpe=Ipe();const $F=el(kpe);function vs(){var n="/home/runner/work/maputnik/maputnik/src/libs/metadata.ts",e="370277aff056c0894d7ae34686219318414cc635",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/metadata.ts",statementMap:{0:{start:{line:3,column:2},end:{line:16,column:5}},1:{start:{line:7,column:4},end:{line:9,column:5}},2:{start:{line:8,column:6},end:{line:8,column:60}},3:{start:{line:10,column:4},end:{line:10,column:27}},4:{start:{line:12,column:4},end:{line:12,column:13}},5:{start:{line:14,column:4},end:{line:14,column:95}},6:{start:{line:15,column:4},end:{line:15,column:21}},7:{start:{line:19,column:2},end:{line:19,column:34}},8:{start:{line:19,column:20},end:{line:19,column:34}},9:{start:{line:20,column:17},end:{line:20,column:42}},10:{start:{line:21,column:23},end:{line:21,column:57}},11:{start:{line:22,column:2},end:{line:26,column:3}},12:{start:{line:23,column:4},end:{line:23,column:41}},13:{start:{line:25,column:4},end:{line:25,column:69}},14:{start:{line:27,column:14},end:{line:27,column:35}},15:{start:{line:28,column:2},end:{line:28,column:24}},16:{start:{line:31,column:2},end:{line:31,column:30}},17:{start:{line:31,column:16},end:{line:31,column:30}},18:{start:{line:32,column:14},end:{line:32,column:31}},19:{start:{line:33,column:2},end:{line:33,column:57}},20:{start:{line:33,column:32},end:{line:33,column:55}}},fnMap:{0:{name:"loadJSON",decl:{start:{line:2,column:9},end:{line:2,column:17}},loc:{start:{line:2,column:41},end:{line:17,column:1}},line:2},1:{name:"(anonymous_1)",decl:{start:{line:6,column:10},end:{line:6,column:11}},loc:{start:{line:6,column:24},end:{line:11,column:3}},line:6},2:{name:"(anonymous_2)",decl:{start:{line:11,column:10},end:{line:11,column:11}},loc:{start:{line:11,column:20},end:{line:13,column:3}},line:11},3:{name:"(anonymous_3)",decl:{start:{line:13,column:11},end:{line:13,column:12}},loc:{start:{line:13,column:17},end:{line:16,column:3}},line:13},4:{name:"downloadGlyphsMetadata",decl:{start:{line:18,column:16},end:{line:18,column:38}},loc:{start:{line:18,column:56},end:{line:29,column:1}},line:18},5:{name:"downloadSpriteMetadata",decl:{start:{line:30,column:16},end:{line:30,column:38}},loc:{start:{line:30,column:52},end:{line:34,column:1}},line:30},6:{name:"(anonymous_6)",decl:{start:{line:33,column:20},end:{line:33,column:21}},loc:{start:{line:33,column:32},end:{line:33,column:55}},line:33}},branchMap:{0:{loc:{start:{line:7,column:4},end:{line:9,column:5}},type:"if",locations:[{start:{line:7,column:4},end:{line:9,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:7},1:{loc:{start:{line:19,column:2},end:{line:19,column:34}},type:"if",locations:[{start:{line:19,column:2},end:{line:19,column:34}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:19},2:{loc:{start:{line:22,column:2},end:{line:26,column:3}},type:"if",locations:[{start:{line:22,column:2},end:{line:26,column:3}},{start:{line:24,column:9},end:{line:26,column:3}}],line:22},3:{loc:{start:{line:31,column:2},end:{line:31,column:30}},type:"if",locations:[{start:{line:31,column:2},end:{line:31,column:30}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:31}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/metadata.ts"],names:[],mappings:"AAAA,OAAO,YAAY;AAEnB,SAAS,SAAS,KAAa,cAAmB,IAA8B;AAC9E,QAAM,KAAK;AAAA,IACT,MAAM;AAAA,IACN,aAAa;AAAA,EACf,CAAC,EACE,KAAK,CAAC,aAAa;AAClB,QAAI,CAAC,SAAS,IAAI;AAChB,YAAM,IAAI,MAAM,iCAAiC,GAAG;AAAA,IACtD;AACA,WAAO,SAAS,KAAK;AAAA,EACvB,CAAC,EACA,KAAK,CAAC,SAAS;AACd,OAAG,IAAI;AAAA,EACT,CAAC,EACA,MAAM,MAAM;AACX,YAAQ,KAAK,+BAA+B,MAAM,2BAA2B,YAAY;AACzF,OAAG,YAAY;AAAA,EACjB,CAAC;AACL;AAEO,gBAAS,uBAAuB,aAAqB,IAA8B;AACxF,MAAG,CAAC,YAAa,QAAO,GAAG,CAAC,CAAC;AAI7B,QAAM,SAAS,OAAO,MAAM,WAAW;AACvC,QAAM,eAAe;AACrB,MAAG,OAAO,aAAa,cAAc;AACnC,WAAO,WAAW;AAAA,EACpB,OAAO;AACL,WAAO,WAAW,OAAO,SAAU,QAAQ,cAAc,OAAO;AAAA,EAClE;AACA,QAAM,MAAM,OAAO,OAAO,MAAM;AAEhC,WAAS,KAAK,CAAC,GAAG,EAAE;AACtB;AAEO,gBAAS,uBAAuB,SAAiB,IAA8B;AACpF,MAAG,CAAC,QAAS,QAAO,GAAG,CAAC,CAAC;AACzB,QAAM,MAAM,UAAU;AACtB,WAAS,KAAK,CAAC,GAAG,YAAU,GAAG,OAAO,KAAK,MAAM,CAAC,CAAC;AACrD;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"370277aff056c0894d7ae34686219318414cc635"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return vs=function(){return a},a}vs();function UG(n,e,t){vs().f[0]++,vs().s[0]++,fetch(n,{mode:"cors",credentials:"same-origin"}).then(r=>{if(vs().f[1]++,vs().s[1]++,r.ok)vs().b[0][1]++;else throw vs().b[0][0]++,vs().s[2]++,new Error("Failed to load metadata for "+n);return vs().s[3]++,r.json()}).then(r=>{vs().f[2]++,vs().s[4]++,t(r)}).catch(()=>{vs().f[3]++,vs().s[5]++,console.warn("Can not load metadata for "+n+", using default value "+e),vs().s[6]++,t(e)})}function Tpe(n,e){if(vs().f[4]++,vs().s[7]++,n)vs().b[1][1]++;else return vs().b[1][0]++,vs().s[8]++,e([]);const t=(vs().s[9]++,$F.parse(n)),r=(vs().s[10]++,"/%7Bfontstack%7D/%7Brange%7D.pbf");vs().s[11]++,t.pathname===r?(vs().b[2][0]++,vs().s[12]++,t.pathname="/fontstacks.json"):(vs().b[2][1]++,vs().s[13]++,t.pathname=t.pathname.replace(r,".json"));const i=(vs().s[14]++,$F.format(t));vs().s[15]++,UG(i,[],e)}function Ppe(n,e){if(vs().f[5]++,vs().s[16]++,n)vs().b[3][1]++;else return vs().b[3][0]++,vs().s[17]++,e([]);const t=(vs().s[18]++,n+".json");vs().s[19]++,UG(t,{},r=>(vs().f[6]++,vs().s[20]++,e(Object.keys(r))))}function VA(){var n="/home/runner/work/maputnik/maputnik/src/libs/urlopen.ts",e="16cd8175e865a1f27680600ab24a4fbadf5fb4b2",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/urlopen.ts",statementMap:{0:{start:{line:3,column:21},end:{line:3,column:50}},1:{start:{line:4,column:2},end:{line:4,column:46}},2:{start:{line:7,column:2},end:{line:7,column:41}},3:{start:{line:8,column:2},end:{line:18,column:5}},4:{start:{line:12,column:4},end:{line:12,column:27}},5:{start:{line:14,column:4},end:{line:14,column:40}},6:{start:{line:16,column:4},end:{line:16,column:60}},7:{start:{line:17,column:4},end:{line:17,column:25}},8:{start:{line:21,column:21},end:{line:21,column:50}},9:{start:{line:22,column:2},end:{line:22,column:42}},10:{start:{line:23,column:2},end:{line:23,column:73}}},fnMap:{0:{name:"initialStyleUrl",decl:{start:{line:2,column:16},end:{line:2,column:31}},loc:{start:{line:2,column:34},end:{line:5,column:1}},line:2},1:{name:"loadStyleUrl",decl:{start:{line:6,column:16},end:{line:6,column:28}},loc:{start:{line:6,column:43},end:{line:19,column:1}},line:6},2:{name:"(anonymous_2)",decl:{start:{line:11,column:10},end:{line:11,column:11}},loc:{start:{line:11,column:29},end:{line:13,column:3}},line:11},3:{name:"(anonymous_3)",decl:{start:{line:13,column:10},end:{line:13,column:11}},loc:{start:{line:13,column:25},end:{line:15,column:3}},line:13},4:{name:"(anonymous_4)",decl:{start:{line:15,column:11},end:{line:15,column:12}},loc:{start:{line:15,column:22},end:{line:18,column:3}},line:15},5:{name:"removeStyleQuerystring",decl:{start:{line:20,column:16},end:{line:20,column:38}},loc:{start:{line:20,column:41},end:{line:24,column:1}},line:20}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/urlopen.ts"],names:[],mappings:"AAAA,OAAO,WAAW;AAEX,gBAAS,kBAAkB;AAChC,QAAM,aAAa,IAAI,IAAI,OAAO,SAAS,IAAI;AAC/C,SAAO,WAAW,aAAa,IAAI,OAAO;AAC5C;AAEO,gBAAS,aAAa,UAAkB,IAA8B;AAC3E,UAAQ,IAAI,iBAAiB,QAAQ;AACrC,QAAM,UAAU;AAAA,IACd,MAAM;AAAA,IACN,aAAa;AAAA,EACf,CAAC,EACE,KAAK,SAAS,UAAU;AACvB,WAAO,SAAS,KAAK;AAAA,EACvB,CAAC,EACA,KAAK,SAAS,MAAM;AACnB,OAAG,MAAM,oBAAoB,IAAI,CAAC;AAAA,EACpC,CAAC,EACA,MAAM,WAAW;AAChB,YAAQ,KAAK,iCAAiC,QAAQ;AACtD,OAAG,MAAM,UAAU;AAAA,EACrB,CAAC;AACL;AAEO,gBAAS,yBAAyB;AACvC,QAAM,aAAa,IAAI,IAAI,OAAO,SAAS,IAAI;AAC/C,aAAW,aAAa,OAAO,OAAO;AACtC,SAAO,QAAQ,aAAa,CAAC,GAAG,SAAS,OAAO,WAAW,SAAS,CAAC;AACvE;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"16cd8175e865a1f27680600ab24a4fbadf5fb4b2"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return VA=function(){return a},a}VA();function Kpe(){VA().f[0]++;const n=(VA().s[0]++,new URL(window.location.href));return VA().s[1]++,n.searchParams.get("style")}function zG(n,e){VA().f[1]++,VA().s[2]++,console.log("Loading style",n),VA().s[3]++,fetch(n,{mode:"cors",credentials:"same-origin"}).then(function(t){return VA().f[2]++,VA().s[4]++,t.json()}).then(function(t){VA().f[3]++,VA().s[5]++,e(_c.ensureStyleValidity(t))}).catch(function(){VA().f[4]++,VA().s[6]++,console.warn("Could not fetch default style",n),VA().s[7]++,e(_c.emptyStyle)})}function VF(){VA().f[5]++;const n=(VA().s[8]++,new URL(window.location.href));VA().s[9]++,n.searchParams.delete("style"),VA().s[10]++,window.history.replaceState({},document.title,n.toString())}function zd(){var n="/home/runner/work/maputnik/maputnik/src/libs/diffmessage.ts",e="f92fa2abb31199d99fd3ae02d967dc6702faf862",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/diffmessage.ts",statementMap:{0:{start:{line:3,column:18},end:{line:3,column:47}},1:{start:{line:4,column:2},end:{line:4,column:70}},2:{start:{line:4,column:30},end:{line:4,column:68}},3:{start:{line:7,column:2},end:{line:7,column:71}},4:{start:{line:7,column:58},end:{line:7,column:69}},5:{start:{line:10,column:2},end:{line:10,column:71}},6:{start:{line:10,column:58},end:{line:10,column:69}}},fnMap:{0:{name:"diffMessages",decl:{start:{line:2,column:9},end:{line:2,column:21}},loc:{start:{line:2,column:47},end:{line:5,column:1}},line:2},1:{name:"(anonymous_1)",decl:{start:{line:4,column:21},end:{line:4,column:22}},loc:{start:{line:4,column:30},end:{line:4,column:68}},line:4},2:{name:"undoMessages",decl:{start:{line:6,column:16},end:{line:6,column:28}},loc:{start:{line:6,column:54},end:{line:8,column:1}},line:6},3:{name:"(anonymous_3)",decl:{start:{line:7,column:51},end:{line:7,column:52}},loc:{start:{line:7,column:58},end:{line:7,column:69}},line:7},4:{name:"redoMessages",decl:{start:{line:9,column:16},end:{line:9,column:28}},loc:{start:{line:9,column:54},end:{line:11,column:1}},line:9},5:{name:"(anonymous_5)",decl:{start:{line:10,column:51},end:{line:10,column:52}},loc:{start:{line:10,column:58},end:{line:10,column:69}},line:10}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/diffmessage.ts"],names:[],mappings:"AAAA,SAAQ,YAAW;AAGnB,SAAS,aAAa,aAAiC,YAAgC;AACrF,QAAM,UAAU,KAAK,aAAa,UAAU;AAC5C,SAAO,QAAQ,IAAI,SAAO,IAAI,UAAU,MAAM,IAAI,KAAK,KAAK,GAAG,CAAC;AAClE;AAEO,gBAAS,aAAa,aAAiC,YAAgC;AAC5F,SAAO,aAAa,aAAa,UAAU,EAAE,IAAI,OAAK,UAAU,CAAC;AACnE;AACO,gBAAS,aAAa,aAAiC,YAAgC;AAC5F,SAAO,aAAa,aAAa,UAAU,EAAE,IAAI,OAAK,UAAU,CAAC;AACnE;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f92fa2abb31199d99fd3ae02d967dc6702faf862"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return zd=function(){return a},a}zd();function jG(n,e){zd().f[0]++;const t=(zd().s[0]++,j$(n,e));return zd().s[1]++,t.map(r=>(zd().f[1]++,zd().s[2]++,r.command+" "+r.args.join(" ")))}function Dpe(n,e){return zd().f[2]++,zd().s[3]++,jG(n,e).map(t=>(zd().f[3]++,zd().s[4]++,"Undo "+t))}function Rpe(n,e){return zd().f[4]++,zd().s[5]++,jG(n,e).map(t=>(zd().f[5]++,zd().s[6]++,"Redo "+t))}function fi(){var n="/home/runner/work/maputnik/maputnik/src/libs/stylestore.ts",e="d0461aebf8a7391762efd074af8c5c2674087e64",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/stylestore.ts",statementMap:{0:{start:{line:4,column:22},end:{line:4,column:32}},1:{start:{line:5,column:20},end:{line:5,column:27}},2:{start:{line:6,column:20},end:{line:9,column:1}},3:{start:{line:10,column:24},end:{line:10,column:44}},4:{start:{line:12,column:2},end:{line:12,column:36}},5:{start:{line:15,column:17},end:{line:15,column:19}},6:{start:{line:16,column:2},end:{line:21,column:3}},7:{start:{line:16,column:15},end:{line:16,column:16}},8:{start:{line:17,column:16},end:{line:17,column:42}},9:{start:{line:18,column:4},end:{line:20,column:5}},10:{start:{line:19,column:6},end:{line:19,column:32}},11:{start:{line:22,column:2},end:{line:22,column:16}},12:{start:{line:25,column:16},end:{line:25,column:30}},13:{start:{line:26,column:2},end:{line:26,column:86}},14:{start:{line:29,column:2},end:{line:31,column:3}},15:{start:{line:30,column:4},end:{line:30,column:41}},16:{start:{line:32,column:16},end:{line:32,column:30}},17:{start:{line:33,column:18},end:{line:33,column:26}},18:{start:{line:34,column:2},end:{line:34,column:17}},19:{start:{line:37,column:2},end:{line:37,column:57}},20:{start:{line:47,column:4},end:{line:47,column:40}},21:{start:{line:50,column:4},end:{line:50,column:13}},22:{start:{line:54,column:4},end:{line:59,column:5}},23:{start:{line:54,column:17},end:{line:54,column:18}},24:{start:{line:55,column:18},end:{line:55,column:44}},25:{start:{line:56,column:6},end:{line:58,column:7}},26:{start:{line:57,column:8},end:{line:57,column:44}},27:{start:{line:63,column:4},end:{line:63,column:65}},28:{start:{line:63,column:37},end:{line:63,column:65}},29:{start:{line:64,column:20},end:{line:64,column:67}},30:{start:{line:65,column:22},end:{line:65,column:68}},31:{start:{line:66,column:4},end:{line:66,column:52}},32:{start:{line:66,column:19},end:{line:66,column:52}},33:{start:{line:67,column:4},end:{line:67,column:25}},34:{start:{line:71,column:4},end:{line:71,column:51}},35:{start:{line:72,column:16},end:{line:72,column:37}},36:{start:{line:73,column:4},end:{line:73,column:63}},37:{start:{line:74,column:4},end:{line:74,column:65}},38:{start:{line:75,column:4},end:{line:75,column:20}}},fnMap:{0:{name:"loadDefaultStyle",decl:{start:{line:11,column:16},end:{line:11,column:32}},loc:{start:{line:11,column:37},end:{line:13,column:1}},line:11},1:{name:"loadStoredStyles",decl:{start:{line:14,column:9},end:{line:14,column:25}},loc:{start:{line:14,column:28},end:{line:23,column:1}},line:14},2:{name:"isStyleKey",decl:{start:{line:24,column:9},end:{line:24,column:19}},loc:{start:{line:24,column:25},end:{line:27,column:1}},line:24},3:{name:"fromKey",decl:{start:{line:28,column:9},end:{line:28,column:16}},loc:{start:{line:28,column:22},end:{line:35,column:1}},line:28},4:{name:"styleKey",decl:{start:{line:36,column:9},end:{line:36,column:17}},loc:{start:{line:36,column:27},end:{line:38,column:1}},line:36},5:{name:"(anonymous_5)",decl:{start:{line:46,column:2},end:{line:46,column:3}},loc:{start:{line:46,column:16},end:{line:48,column:3}},line:46},6:{name:"(anonymous_6)",decl:{start:{line:49,column:2},end:{line:49,column:3}},loc:{start:{line:49,column:11},end:{line:51,column:3}},line:49},7:{name:"(anonymous_7)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:10},end:{line:60,column:3}},line:53},8:{name:"(anonymous_8)",decl:{start:{line:62,column:2},end:{line:62,column:3}},loc:{start:{line:62,column:18},end:{line:68,column:3}},line:62},9:{name:"(anonymous_9)",decl:{start:{line:70,column:2},end:{line:70,column:3}},loc:{start:{line:70,column:17},end:{line:76,column:3}},line:70}},branchMap:{0:{loc:{start:{line:18,column:4},end:{line:20,column:5}},type:"if",locations:[{start:{line:18,column:4},end:{line:20,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:18},1:{loc:{start:{line:26,column:9},end:{line:26,column:85}},type:"binary-expr",locations:[{start:{line:26,column:9},end:{line:26,column:27}},{start:{line:26,column:31},end:{line:26,column:57}},{start:{line:26,column:61},end:{line:26,column:85}}],line:26},2:{loc:{start:{line:29,column:2},end:{line:31,column:3}},type:"if",locations:[{start:{line:29,column:2},end:{line:31,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:29},3:{loc:{start:{line:56,column:6},end:{line:58,column:7}},type:"if",locations:[{start:{line:56,column:6},end:{line:58,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:56},4:{loc:{start:{line:63,column:4},end:{line:63,column:65}},type:"if",locations:[{start:{line:63,column:4},end:{line:63,column:65}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:63},5:{loc:{start:{line:66,column:4},end:{line:66,column:52}},type:"if",locations:[{start:{line:66,column:4},end:{line:66,column:52}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:66}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0},b:{0:[0,0],1:[0,0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/stylestore.ts"],names:[],mappings:"AAAA,OAAO,WAAW;AAClB,SAAQ,oBAAmB;AAC3B,OAAO,mBAAmB;AAG1B,MAAM,gBAAgB;AACtB,MAAM,cAAc;AACpB,MAAM,cAAc;AAAA,EAClB,QAAQ,CAAC,eAAe,cAAc,EAAE,KAAK,GAAG;AAAA,EAChD,aAAa,CAAC,eAAe,cAAc,EAAE,KAAK,GAAG;AACvD;AAEA,MAAM,kBAAkB,cAAc,CAAC,EAAE;AAGlC,gBAAS,iBAAiB,IAA8B;AAC7D,eAAa,iBAAiB,EAAE;AAClC;AAGA,SAAS,mBAAmB;AAC1B,QAAM,SAAS,CAAC;AAChB,WAAS,IAAI,GAAG,IAAI,OAAO,aAAa,QAAQ,KAAK;AACnD,UAAM,MAAM,OAAO,aAAa,IAAI,CAAC;AACrC,QAAG,WAAW,GAAI,GAAG;AACnB,aAAO,KAAK,QAAQ,GAAI,CAAC;AAAA,IAC3B;AAAA,EACF;AACA,SAAO;AACT;AAEA,SAAS,WAAW,KAAa;AAC/B,QAAM,QAAQ,IAAI,MAAM,GAAG;AAC3B,SAAO,MAAM,WAAW,KAAK,MAAM,CAAC,MAAM,iBAAiB,MAAM,CAAC,MAAM;AAC1E;AAGA,SAAS,QAAQ,KAAa;AAC5B,MAAG,CAAC,WAAW,GAAG,GAAG;AACnB,UAAM;AAAA,EACR;AAEA,QAAM,QAAQ,IAAI,MAAM,GAAG;AAC3B,QAAM,UAAU,MAAM,CAAC;AACvB,SAAO;AACT;AAGA,SAAS,SAAS,SAAiB;AACjC,SAAO,CAAC,eAAe,aAAa,OAAO,EAAE,KAAK,GAAG;AACvD;AAGO,aAAM,WAAW;AAAA;AAAA;AAAA;AAAA,EAItB;AAAA;AAAA;AAAA,EAIA,cAAc;AACZ,SAAK,YAAY,iBAAiB;AAAA,EACpC;AAAA,EAEA,KAAK,IAA8B;AACjC,OAAG,IAAI;AAAA,EACT;AAAA;AAAA,EAGA,QAAQ;AACN,aAAS,IAAI,GAAG,IAAI,OAAO,aAAa,QAAQ,KAAK;AACnD,YAAM,MAAM,OAAO,aAAa,IAAI,CAAC;AACrC,UAAG,IAAI,WAAW,aAAa,GAAG;AAChC,eAAO,aAAa,WAAW,GAAG;AAAA,MACpC;AAAA,IACF;AAAA,EACF;AAAA;AAAA,EAGA,YAAY,IAA8B;AACxC,QAAG,KAAK,UAAU,WAAW,EAAG,QAAO,iBAAiB,EAAE;AAC1D,UAAM,UAAU,OAAO,aAAa,QAAQ,YAAY,MAAM;AAC9D,UAAM,YAAY,OAAO,aAAa,QAAQ,SAAS,OAAO,CAAC;AAE/D,QAAG,UAAW,QAAO,GAAG,KAAK,MAAM,SAAS,CAAC;AAC7C,qBAAiB,EAAE;AAAA,EACrB;AAAA;AAAA,EAGA,KAAK,UAA+C;AAClD,eAAW,MAAM,oBAAoB,QAAQ;AAC7C,UAAM,MAAM,SAAS,SAAS,EAAE;AAChC,WAAO,aAAa,QAAQ,KAAK,KAAK,UAAU,QAAQ,CAAC;AACzD,WAAO,aAAa,QAAQ,YAAY,QAAQ,SAAS,EAAE;AAC3D,WAAO;AAAA,EACT;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d0461aebf8a7391762efd074af8c5c2674087e64"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return fi=function(){return a},a}fi();const YC=(fi().s[0]++,"maputnik"),NG=(fi().s[1]++,"style"),HF=(fi().s[2]++,{latest:[YC,"latest_style"].join(":"),accessToken:[YC,"access_token"].join(":")}),Fpe=(fi().s[3]++,OG[0].url);function ZF(n){fi().f[0]++,fi().s[4]++,zG(Fpe,n)}function Lpe(){fi().f[1]++;const n=(fi().s[5]++,[]);fi().s[6]++;for(let e=(fi().s[7]++,0);e<window.localStorage.length;e++){const t=(fi().s[8]++,window.localStorage.key(e));fi().s[9]++,WG(t)?(fi().b[0][0]++,fi().s[10]++,n.push(Upe(t))):fi().b[0][1]++}return fi().s[11]++,n}function WG(n){fi().f[2]++;const e=(fi().s[12]++,n.split(":"));return fi().s[13]++,fi().b[1][0]++,e.length===3&&(fi().b[1][1]++,e[0]===YC)&&(fi().b[1][2]++,e[1]===NG)}function Upe(n){if(fi().f[3]++,fi().s[14]++,WG(n))fi().b[2][1]++;else throw fi().b[2][0]++,fi().s[15]++,"Key is not a valid style key";const e=(fi().s[16]++,n.split(":")),t=(fi().s[17]++,e[2]);return fi().s[18]++,t}function XF(n){return fi().f[4]++,fi().s[19]++,[YC,NG,n].join(":")}class JF{constructor(){Pn(this,"mapStyles");fi().f[5]++,fi().s[20]++,this.mapStyles=Lpe()}init(e){fi().f[6]++,fi().s[21]++,e(null)}purge(){fi().f[7]++,fi().s[22]++;for(let e=(fi().s[23]++,0);e<window.localStorage.length;e++){const t=(fi().s[24]++,window.localStorage.key(e));fi().s[25]++,t.startsWith(YC)?(fi().b[3][0]++,fi().s[26]++,window.localStorage.removeItem(t)):fi().b[3][1]++}}latestStyle(e){if(fi().f[8]++,fi().s[27]++,this.mapStyles.length===0)return fi().b[4][0]++,fi().s[28]++,ZF(e);fi().b[4][1]++;const t=(fi().s[29]++,window.localStorage.getItem(HF.latest)),r=(fi().s[30]++,window.localStorage.getItem(XF(t)));if(fi().s[31]++,r)return fi().b[5][0]++,fi().s[32]++,e(JSON.parse(r));fi().b[5][1]++,fi().s[33]++,ZF(e)}save(e){fi().f[9]++,fi().s[34]++,e=_c.ensureStyleValidity(e);const t=(fi().s[35]++,XF(e.id));return fi().s[36]++,window.localStorage.setItem(t,JSON.stringify(e)),fi().s[37]++,window.localStorage.setItem(HF.latest,e.id),fi().s[38]++,e}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var FB=function(n,e){return FB=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])},FB(n,e)};function GG(n,e){FB(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function zpe(n){var e=typeof Symbol=="function"&&n[Symbol.iterator],t=0;return e?e.call(n):{next:function(){return n&&t>=n.length&&(n=void 0),{value:n&&n[t++],done:!n}}}}function jpe(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,s=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(o){a={error:o}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return s}function Npe(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(jpe(arguments[e]));return n}var QG=function(){function n(e,t){this.target=t,this.type=e}return n}(),Wpe=function(n){GG(e,n);function e(t,r){var i=n.call(this,"error",r)||this;return i.message=t.message,i.error=t,i}return e}(QG),Gpe=function(n){GG(e,n);function e(t,r,i){t===void 0&&(t=1e3),r===void 0&&(r="");var s=n.call(this,"close",i)||this;return s.wasClean=!0,s.code=t,s.reason=r,s}return e}(QG);/*!
 * Reconnecting WebSocket
 * by Pedro Ladaria <pedro.ladaria@gmail.com>
 * https://github.com/pladaria/reconnecting-websocket
 * License MIT
 */var Qpe=function(){if(typeof WebSocket<"u")return WebSocket},qpe=function(n){return typeof n<"u"&&!!n&&n.CLOSING===2},gg={maxReconnectionDelay:1e4,minReconnectionDelay:1e3+Math.random()*4e3,minUptime:5e3,reconnectionDelayGrowFactor:1.3,connectionTimeout:4e3,maxRetries:1/0,maxEnqueuedMessages:1/0,startClosed:!1,debug:!1},Ype=function(){function n(e,t,r){var i=this;r===void 0&&(r={}),this._listeners={error:[],message:[],open:[],close:[]},this._retryCount=-1,this._shouldReconnect=!0,this._connectLock=!1,this._binaryType="blob",this._closeCalled=!1,this._messageQueue=[],this.onclose=null,this.onerror=null,this.onmessage=null,this.onopen=null,this._handleOpen=function(s){i._debug("open event");var a=i._options.minUptime,o=a===void 0?gg.minUptime:a;clearTimeout(i._connectTimeout),i._uptimeTimeout=setTimeout(function(){return i._acceptOpen()},o),i._ws.binaryType=i._binaryType,i._messageQueue.forEach(function(d){return i._ws.send(d)}),i._messageQueue=[],i.onopen&&i.onopen(s),i._listeners.open.forEach(function(d){return i._callEventListener(s,d)})},this._handleMessage=function(s){i._debug("message event"),i.onmessage&&i.onmessage(s),i._listeners.message.forEach(function(a){return i._callEventListener(s,a)})},this._handleError=function(s){i._debug("error event",s.message),i._disconnect(void 0,s.message==="TIMEOUT"?"timeout":void 0),i.onerror&&i.onerror(s),i._debug("exec error listeners"),i._listeners.error.forEach(function(a){return i._callEventListener(s,a)}),i._connect()},this._handleClose=function(s){i._debug("close event"),i._clearTimeouts(),i._shouldReconnect&&i._connect(),i.onclose&&i.onclose(s),i._listeners.close.forEach(function(a){return i._callEventListener(s,a)})},this._url=e,this._protocols=t,this._options=r,this._options.startClosed&&(this._shouldReconnect=!1),this._connect()}return Object.defineProperty(n,"CONNECTING",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(n,"OPEN",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(n,"CLOSING",{get:function(){return 2},enumerable:!0,configurable:!0}),Object.defineProperty(n,"CLOSED",{get:function(){return 3},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"CONNECTING",{get:function(){return n.CONNECTING},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"OPEN",{get:function(){return n.OPEN},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"CLOSING",{get:function(){return n.CLOSING},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"CLOSED",{get:function(){return n.CLOSED},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"binaryType",{get:function(){return this._ws?this._ws.binaryType:this._binaryType},set:function(e){this._binaryType=e,this._ws&&(this._ws.binaryType=e)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"retryCount",{get:function(){return Math.max(this._retryCount,0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"bufferedAmount",{get:function(){var e=this._messageQueue.reduce(function(t,r){return typeof r=="string"?t+=r.length:r instanceof Blob?t+=r.size:t+=r.byteLength,t},0);return e+(this._ws?this._ws.bufferedAmount:0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"extensions",{get:function(){return this._ws?this._ws.extensions:""},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"protocol",{get:function(){return this._ws?this._ws.protocol:""},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"readyState",{get:function(){return this._ws?this._ws.readyState:this._options.startClosed?n.CLOSED:n.CONNECTING},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"url",{get:function(){return this._ws?this._ws.url:""},enumerable:!0,configurable:!0}),n.prototype.close=function(e,t){if(e===void 0&&(e=1e3),this._closeCalled=!0,this._shouldReconnect=!1,this._clearTimeouts(),!this._ws){this._debug("close enqueued: no ws instance");return}if(this._ws.readyState===this.CLOSED){this._debug("close: already closed");return}this._ws.close(e,t)},n.prototype.reconnect=function(e,t){this._shouldReconnect=!0,this._closeCalled=!1,this._retryCount=-1,!this._ws||this._ws.readyState===this.CLOSED?this._connect():(this._disconnect(e,t),this._connect())},n.prototype.send=function(e){if(this._ws&&this._ws.readyState===this.OPEN)this._debug("send",e),this._ws.send(e);else{var t=this._options.maxEnqueuedMessages,r=t===void 0?gg.maxEnqueuedMessages:t;this._messageQueue.length<r&&(this._debug("enqueue",e),this._messageQueue.push(e))}},n.prototype.addEventListener=function(e,t){this._listeners[e]&&this._listeners[e].push(t)},n.prototype.dispatchEvent=function(e){var t,r,i=this._listeners[e.type];if(i)try{for(var s=zpe(i),a=s.next();!a.done;a=s.next()){var o=a.value;this._callEventListener(e,o)}}catch(d){t={error:d}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return!0},n.prototype.removeEventListener=function(e,t){this._listeners[e]&&(this._listeners[e]=this._listeners[e].filter(function(r){return r!==t}))},n.prototype._debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._options.debug&&console.log.apply(console,Npe(["RWS>"],e))},n.prototype._getNextDelay=function(){var e=this._options,t=e.reconnectionDelayGrowFactor,r=t===void 0?gg.reconnectionDelayGrowFactor:t,i=e.minReconnectionDelay,s=i===void 0?gg.minReconnectionDelay:i,a=e.maxReconnectionDelay,o=a===void 0?gg.maxReconnectionDelay:a,d=0;return this._retryCount>0&&(d=s*Math.pow(r,this._retryCount-1),d>o&&(d=o)),this._debug("next delay",d),d},n.prototype._wait=function(){var e=this;return new Promise(function(t){setTimeout(t,e._getNextDelay())})},n.prototype._getNextUrl=function(e){if(typeof e=="string")return Promise.resolve(e);if(typeof e=="function"){var t=e();if(typeof t=="string")return Promise.resolve(t);if(t.then)return t}throw Error("Invalid URL")},n.prototype._connect=function(){var e=this;if(!(this._connectLock||!this._shouldReconnect)){this._connectLock=!0;var t=this._options,r=t.maxRetries,i=r===void 0?gg.maxRetries:r,s=t.connectionTimeout,a=s===void 0?gg.connectionTimeout:s,o=t.WebSocket,d=o===void 0?Qpe():o;if(this._retryCount>=i){this._debug("max retries reached",this._retryCount,">=",i);return}if(this._retryCount++,this._debug("connect",this._retryCount),this._removeListeners(),!qpe(d))throw Error("No valid WebSocket class provided");this._wait().then(function(){return e._getNextUrl(e._url)}).then(function(g){e._closeCalled||(e._debug("connect",{url:g,protocols:e._protocols}),e._ws=e._protocols?new d(g,e._protocols):new d(g),e._ws.binaryType=e._binaryType,e._connectLock=!1,e._addListeners(),e._connectTimeout=setTimeout(function(){return e._handleTimeout()},a))})}},n.prototype._handleTimeout=function(){this._debug("timeout event"),this._handleError(new Wpe(Error("TIMEOUT"),this))},n.prototype._disconnect=function(e,t){if(e===void 0&&(e=1e3),this._clearTimeouts(),!!this._ws){this._removeListeners();try{this._ws.close(e,t),this._handleClose(new Gpe(e,t,this))}catch{}}},n.prototype._acceptOpen=function(){this._debug("accept open"),this._retryCount=0},n.prototype._callEventListener=function(e,t){"handleEvent"in t?t.handleEvent(e):t(e)},n.prototype._removeListeners=function(){this._ws&&(this._debug("removeListeners"),this._ws.removeEventListener("open",this._handleOpen),this._ws.removeEventListener("close",this._handleClose),this._ws.removeEventListener("message",this._handleMessage),this._ws.removeEventListener("error",this._handleError))},n.prototype._addListeners=function(){this._ws&&(this._debug("addListeners"),this._ws.addEventListener("open",this._handleOpen),this._ws.addEventListener("close",this._handleClose),this._ws.addEventListener("message",this._handleMessage),this._ws.addEventListener("error",this._handleError))},n.prototype._clearTimeouts=function(){clearTimeout(this._connectTimeout),clearTimeout(this._uptimeTimeout)},n}();function gi(){var n="/home/runner/work/maputnik/maputnik/src/libs/apistore.ts",e="fa2411bec13fe7a0c74835456fb0c60c3fdde9e5",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/apistore.ts",statementMap:{0:{start:{line:7,column:18},end:{line:7,column:24}},1:{start:{line:10,column:4},end:{line:11,column:7}},2:{start:{line:12,column:17},end:{line:12,column:36}},3:{start:{line:13,column:17},end:{line:13,column:41}},4:{start:{line:14,column:4},end:{line:14,column:45}},5:{start:{line:15,column:4},end:{line:15,column:50}},6:{start:{line:16,column:4},end:{line:16,column:37}},7:{start:{line:19,column:4},end:{line:30,column:7}},8:{start:{line:22,column:6},end:{line:22,column:29}},9:{start:{line:24,column:23},end:{line:24,column:27}},10:{start:{line:25,column:6},end:{line:25,column:39}},11:{start:{line:26,column:6},end:{line:26,column:32}},12:{start:{line:27,column:6},end:{line:27,column:15}},13:{start:{line:29,column:6},end:{line:29,column:52}},14:{start:{line:33,column:23},end:{line:33,column:67}},15:{start:{line:34,column:4},end:{line:45,column:6}},16:{start:{line:35,column:6},end:{line:35,column:26}},17:{start:{line:35,column:19},end:{line:35,column:26}},18:{start:{line:36,column:6},end:{line:36,column:52}},19:{start:{line:37,column:24},end:{line:37,column:40}},20:{start:{line:38,column:6},end:{line:42,column:7}},21:{start:{line:39,column:8},end:{line:39,column:41}},22:{start:{line:41,column:8},end:{line:41,column:27}},23:{start:{line:43,column:27},end:{line:43,column:65}},24:{start:{line:44,column:6},end:{line:44,column:44}},25:{start:{line:48,column:4},end:{line:58,column:5}},26:{start:{line:49,column:6},end:{line:55,column:9}},27:{start:{line:52,column:8},end:{line:52,column:31}},28:{start:{line:54,column:8},end:{line:54,column:44}},29:{start:{line:57,column:6},end:{line:57,column:92}},30:{start:{line:62,column:22},end:{line:66,column:5}},31:{start:{line:67,column:15},end:{line:67,column:26}},32:{start:{line:68,column:4},end:{line:77,column:7}},33:{start:{line:76,column:6},end:{line:76,column:38}},34:{start:{line:76,column:17},end:{line:76,column:38}},35:{start:{line:78,column:4},end:{line:78,column:20}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:2},end:{line:9,column:3}},loc:{start:{line:9,column:20},end:{line:17,column:3}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:10,column:58},end:{line:10,column:59}},loc:{start:{line:10,column:64},end:{line:11,column:5}},line:10},2:{name:"(anonymous_2)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:11},end:{line:31,column:3}},line:18},3:{name:"(anonymous_3)",decl:{start:{line:21,column:12},end:{line:21,column:13}},loc:{start:{line:21,column:26},end:{line:23,column:5}},line:21},4:{name:"(anonymous_4)",decl:{start:{line:23,column:12},end:{line:23,column:13}},loc:{start:{line:23,column:22},end:{line:28,column:5}},line:23},5:{name:"(anonymous_5)",decl:{start:{line:28,column:13},end:{line:28,column:14}},loc:{start:{line:28,column:19},end:{line:30,column:5}},line:28},6:{name:"(anonymous_6)",decl:{start:{line:32,column:2},end:{line:32,column:3}},loc:{start:{line:32,column:23},end:{line:46,column:3}},line:32},7:{name:"(anonymous_7)",decl:{start:{line:34,column:27},end:{line:34,column:28}},loc:{start:{line:34,column:34},end:{line:45,column:5}},line:34},8:{name:"(anonymous_8)",decl:{start:{line:47,column:2},end:{line:47,column:3}},loc:{start:{line:47,column:18},end:{line:59,column:3}},line:47},9:{name:"(anonymous_9)",decl:{start:{line:51,column:14},end:{line:51,column:15}},loc:{start:{line:51,column:33},end:{line:53,column:7}},line:51},10:{name:"(anonymous_10)",decl:{start:{line:53,column:14},end:{line:53,column:15}},loc:{start:{line:53,column:29},end:{line:55,column:7}},line:53},11:{name:"(anonymous_11)",decl:{start:{line:61,column:2},end:{line:61,column:3}},loc:{start:{line:61,column:17},end:{line:79,column:3}},line:61},12:{name:"(anonymous_12)",decl:{start:{line:75,column:13},end:{line:75,column:14}},loc:{start:{line:75,column:29},end:{line:77,column:5}},line:75}},branchMap:{0:{loc:{start:{line:10,column:30},end:{line:11,column:6}},type:"binary-expr",locations:[{start:{line:10,column:30},end:{line:10,column:53}},{start:{line:10,column:58},end:{line:11,column:5}}],line:10},1:{loc:{start:{line:12,column:17},end:{line:12,column:36}},type:"binary-expr",locations:[{start:{line:12,column:17},end:{line:12,column:26}},{start:{line:12,column:30},end:{line:12,column:36}}],line:12},2:{loc:{start:{line:13,column:17},end:{line:13,column:41}},type:"binary-expr",locations:[{start:{line:13,column:17},end:{line:13,column:26}},{start:{line:13,column:30},end:{line:13,column:41}}],line:13},3:{loc:{start:{line:35,column:6},end:{line:35,column:26}},type:"if",locations:[{start:{line:35,column:6},end:{line:35,column:26}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:35},4:{loc:{start:{line:48,column:4},end:{line:58,column:5}},type:"if",locations:[{start:{line:48,column:4},end:{line:58,column:5}},{start:{line:56,column:11},end:{line:58,column:5}}],line:48},5:{loc:{start:{line:76,column:6},end:{line:76,column:38}},type:"if",locations:[{start:{line:76,column:6},end:{line:76,column:38}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:76}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/apistore.ts"],names:[],mappings:"AAAA,OAAO,WAAW;AAClB,SAAQ,cAAa;AAErB,OAAO,2BAA2B;AAQ3B,aAAM,cAAc;AAAA,EAEzB;AAAA,EACA;AAAA,EACA,gBAAoC;AAAA,EACpC;AAAA,EAEA,YAAY,MAA4B;AACtC,SAAK,qBAAqB,KAAK,uBAAuB,MAAM;AAAA,IAAC;AAC7D,UAAM,OAAO,KAAK,QAAQ;AAC1B,UAAM,OAAO,KAAK,QAAQ;AAC1B,SAAK,WAAW,UAAU,IAAI,IAAI,IAAI;AACtC,SAAK,eAAe,QAAQ,IAAI,IAAI,IAAI;AACxC,SAAK,OAAO,KAAK,KAAK,KAAK,IAAI;AAAA,EACjC;AAAA,EAEA,KAAK,IAA8B;AACjC,UAAM,KAAK,WAAW,WAAW;AAAA,MAC/B,MAAM;AAAA,IACR,CAAC,EACE,KAAK,CAAC,aAAc;AACnB,aAAO,SAAS,KAAK;AAAA,IACvB,CAAC,EACA,KAAK,CAAC,SAAS;AACd,YAAM,WAAW;AACjB,WAAK,gBAAgB,SAAS,CAAC;AAC/B,WAAK,mBAAmB;AACxB,SAAG,IAAI;AAAA,IACT,CAAC,EACA,MAAM,MAAM;AACX,SAAG,IAAI,MAAM,8BAA8B,CAAC;AAAA,IAC9C,CAAC;AAAA,EACL;AAAA,EAEA,qBAAqB;AACnB,UAAM,aAAa,IAAI,sBAAsB,KAAK,YAAY;AAC9D,eAAW,YAAY,OAAK;AAC1B,UAAG,CAAC,EAAE,KAAM;AACZ,cAAQ,IAAI,gCAAgC;AAC5C,UAAI,cAAc,MAAM;AACxB,UAAI;AACF,sBAAc,KAAK,MAAM,EAAE,IAAI;AAAA,MACjC,SAAQ,KAAK;AACX,gBAAQ,MAAM,GAAG;AAAA,MACnB;AACA,YAAM,eAAe,MAAM,oBAAoB,WAAW;AAC1D,WAAK,mBAAmB,YAAY;AAAA,IACtC;AAAA,EACF;AAAA,EAEA,YAAY,IAA8B;AACxC,QAAG,KAAK,eAAe;AACrB,YAAM,KAAK,WAAW,aAAa,KAAK,eAAe;AAAA,QACrD,MAAM;AAAA,MACR,CAAC,EACE,KAAK,SAAS,UAAU;AACvB,eAAO,SAAS,KAAK;AAAA,MACvB,CAAC,EACA,KAAK,SAAS,MAAM;AACnB,WAAG,MAAM,oBAAoB,IAAI,CAAC;AAAA,MACpC,CAAC;AAAA,IACL,OAAO;AACL,YAAM,IAAI,MAAM,oEAAoE;AAAA,IACtF;AAAA,EACF;AAAA;AAAA,EAGA,KAAK,UAA+C;AAClD,UAAM,YAAY;AAAA,MAChB,MAAM;AAAA,QACJ,MAAM,oBAAoB,QAAQ;AAAA,MACpC;AAAA,IACF;AAEA,UAAM,KAAK,SAAS;AACpB,UAAM,KAAK,WAAW,aAAa,IAAI;AAAA,MACrC,QAAQ;AAAA,MACR,MAAM;AAAA,MACN,SAAS;AAAA,QACP,gBAAgB;AAAA,MAClB;AAAA,MACA,MAAM;AAAA,IACR,CAAC,EACE,MAAM,SAAS,OAAO;AACrB,UAAG,MAAO,SAAQ,MAAM,KAAK;AAAA,IAC/B,CAAC;AACH,WAAO;AAAA,EACT;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"fa2411bec13fe7a0c74835456fb0c60c3fdde9e5"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return gi=function(){return a},a}gi();class $pe{constructor(e){Pn(this,"localUrl");Pn(this,"websocketUrl");Pn(this,"latestStyleId",(gi().s[0]++,void 0));Pn(this,"onLocalStyleChange");gi().f[0]++,gi().s[1]++,this.onLocalStyleChange=(gi().b[0][0]++,e.onLocalStyleChange||(gi().b[0][1]++,()=>{gi().f[1]++}));const t=(gi().s[2]++,gi().b[1][0]++,e.port||(gi().b[1][1]++,"8000")),r=(gi().s[3]++,gi().b[2][0]++,e.host||(gi().b[2][1]++,"localhost"));gi().s[4]++,this.localUrl=`http://${r}:${t}`,gi().s[5]++,this.websocketUrl=`ws://${r}:${t}/ws`,gi().s[6]++,this.init=this.init.bind(this)}init(e){gi().f[2]++,gi().s[7]++,fetch(this.localUrl+"/styles",{mode:"cors"}).then(t=>(gi().f[3]++,gi().s[8]++,t.json())).then(t=>{gi().f[4]++;const r=(gi().s[9]++,t);gi().s[10]++,this.latestStyleId=r[0],gi().s[11]++,this.notifyLocalChanges(),gi().s[12]++,e(null)}).catch(()=>{gi().f[5]++,gi().s[13]++,e(new Error("Can not connect to style API"))})}notifyLocalChanges(){gi().f[6]++;const e=(gi().s[14]++,new Ype(this.websocketUrl));gi().s[15]++,e.onmessage=t=>{if(gi().f[7]++,gi().s[16]++,t.data)gi().b[3][1]++;else{gi().b[3][0]++,gi().s[17]++;return}gi().s[18]++,console.log("Received style update from API");let r=(gi().s[19]++,_c.emptyStyle);gi().s[20]++;try{gi().s[21]++,r=JSON.parse(t.data)}catch(s){gi().s[22]++,console.error(s)}const i=(gi().s[23]++,_c.ensureStyleValidity(r));gi().s[24]++,this.onLocalStyleChange(i)}}latestStyle(e){if(gi().f[8]++,gi().s[25]++,this.latestStyleId)gi().b[4][0]++,gi().s[26]++,fetch(this.localUrl+"/styles/"+this.latestStyleId,{mode:"cors"}).then(function(t){return gi().f[9]++,gi().s[27]++,t.json()}).then(function(t){gi().f[10]++,gi().s[28]++,e(_c.ensureStyleValidity(t))});else throw gi().b[4][1]++,gi().s[29]++,new Error("No latest style available. You need to init the api backend first.")}save(e){gi().f[11]++;const t=(gi().s[30]++,GU(_c.stripAccessTokens(_c.replaceAccessTokens(e)))),r=(gi().s[31]++,e.id);return gi().s[32]++,fetch(this.localUrl+"/styles/"+r,{method:"PUT",mode:"cors",headers:{"Content-Type":"application/json; charset=utf-8"},body:t}).catch(function(i){gi().f[12]++,gi().s[33]++,i?(gi().b[5][0]++,gi().s[34]++,console.error(i)):gi().b[5][1]++}),gi().s[35]++,e}}function Cl(){var n="/home/runner/work/maputnik/maputnik/src/libs/revisions.ts",e="9277d165d3b1fd7c235a1faab33cf41596d9966e",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/revisions.ts",statementMap:{0:{start:{line:5,column:4},end:{line:5,column:38}},1:{start:{line:6,column:4},end:{line:6,column:50}},2:{start:{line:9,column:4},end:{line:9,column:53}},3:{start:{line:12,column:4},end:{line:12,column:43}},4:{start:{line:15,column:4},end:{line:15,column:66}},5:{start:{line:16,column:4},end:{line:16,column:34}},6:{start:{line:17,column:4},end:{line:17,column:22}},7:{start:{line:20,column:4},end:{line:22,column:5}},8:{start:{line:21,column:6},end:{line:21,column:24}},9:{start:{line:23,column:4},end:{line:23,column:24}},10:{start:{line:26,column:4},end:{line:28,column:5}},11:{start:{line:27,column:6},end:{line:27,column:24}},12:{start:{line:29,column:4},end:{line:29,column:24}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:2},end:{line:4,column:3}},loc:{start:{line:4,column:37},end:{line:7,column:3}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:15},end:{line:10,column:3}},line:8},2:{name:"(anonymous_2)",decl:{start:{line:11,column:2},end:{line:11,column:3}},loc:{start:{line:11,column:16},end:{line:13,column:3}},line:11},3:{name:"(anonymous_3)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:24},end:{line:18,column:3}},line:14},4:{name:"(anonymous_4)",decl:{start:{line:19,column:2},end:{line:19,column:3}},loc:{start:{line:19,column:9},end:{line:24,column:3}},line:19},5:{name:"(anonymous_5)",decl:{start:{line:25,column:2},end:{line:25,column:3}},loc:{start:{line:25,column:9},end:{line:30,column:3}},line:25}},branchMap:{0:{loc:{start:{line:4,column:14},end:{line:4,column:35}},type:"default-arg",locations:[{start:{line:4,column:33},end:{line:4,column:35}}],line:4},1:{loc:{start:{line:20,column:4},end:{line:22,column:5}},type:"if",locations:[{start:{line:20,column:4},end:{line:22,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:20},2:{loc:{start:{line:26,column:4},end:{line:28,column:5}},type:"if",locations:[{start:{line:26,column:4},end:{line:28,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:26}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{0:[0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/revisions.ts"],names:[],mappings:"AAEO,aAAM,cAAc;AAAA,EACzB;AAAA,EACA;AAAA,EAGA,YAAY,mBAAiB,CAAC,GAAG;AAC/B,SAAK,YAAY;AACjB,SAAK,aAAa,iBAAiB,SAAS;AAAA,EAC9C;AAAA,EAEA,IAAI,SAAS;AACX,WAAO,KAAK,UAAU,KAAK,UAAU,SAAS,CAAC;AAAA,EACjD;AAAA,EAEA,IAAI,UAAU;AACZ,WAAO,KAAK,UAAU,KAAK,UAAU;AAAA,EACvC;AAAA,EAEA,YAAY,UAA6C;AAGvD,SAAK,YAAY,KAAK,UAAU,MAAM,GAAG,KAAK,aAAa,CAAC;AAE5D,SAAK,UAAU,KAAK,QAAQ;AAC5B,SAAK;AAAA,EAEP;AAAA,EAEA,OAAO;AACL,QAAG,KAAK,aAAa,GAAG;AACtB,WAAK;AAAA,IACP;AACA,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,OAAO;AACL,QAAG,KAAK,aAAa,KAAK,UAAU,SAAS,GAAG;AAC9C,WAAK;AAAA,IACP;AACA,WAAO,KAAK;AAAA,EACd;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"9277d165d3b1fd7c235a1faab33cf41596d9966e"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Cl=function(){return a},a}Cl();class Vpe{constructor(e=(Cl().b[0][0]++,[])){Pn(this,"revisions");Pn(this,"currentIdx");Cl().f[0]++,Cl().s[0]++,this.revisions=e,Cl().s[1]++,this.currentIdx=e.length-1}get latest(){return Cl().f[1]++,Cl().s[2]++,this.revisions[this.revisions.length-1]}get current(){return Cl().f[2]++,Cl().s[3]++,this.revisions[this.currentIdx]}addRevision(e){Cl().f[3]++,Cl().s[4]++,this.revisions=this.revisions.slice(0,this.currentIdx+1),Cl().s[5]++,this.revisions.push(e),Cl().s[6]++,this.currentIdx++}undo(){return Cl().f[4]++,Cl().s[7]++,this.currentIdx>0?(Cl().b[1][0]++,Cl().s[8]++,this.currentIdx--):Cl().b[1][1]++,Cl().s[9]++,this.current}redo(){return Cl().f[5]++,Cl().s[10]++,this.currentIdx<this.revisions.length-1?(Cl().b[2][0]++,Cl().s[11]++,this.currentIdx++):Cl().b[2][1]++,Cl().s[12]++,this.current}}var f6,eL;function Hpe(){if(eL)return f6;eL=1;var n="Expected a function",e=NaN,t="[object Symbol]",r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,a=/^0o[0-7]+$/i,o=parseInt,d=typeof window=="object"&&window&&window.Object===Object&&window,g=typeof self=="object"&&self&&self.Object===Object&&self,b=d||g||Function("return this")(),E=Object.prototype,S=E.toString,I=Math.max,P=Math.min,z=function(){return b.Date.now()};function j(ne,G,oe){var he,pe,Ee,me,Se,De,be=0,at=!1,Ze=!1,Je=!0;if(typeof ne!="function")throw new TypeError(n);G=V(G)||0,Y(oe)&&(at=!!oe.leading,Ze="maxWait"in oe,Ee=Ze?I(V(oe.maxWait)||0,G):Ee,Je="trailing"in oe?!!oe.trailing:Je);function We(Ue){var Pe=he,Be=pe;return he=pe=void 0,be=Ue,me=ne.apply(Be,Pe),me}function Me(Ue){return be=Ue,Se=setTimeout(bt,G),at?We(Ue):me}function Fe(Ue){var Pe=Ue-De,Be=Ue-be,it=G-Pe;return Ze?P(it,Ee-Be):it}function He(Ue){var Pe=Ue-De,Be=Ue-be;return De===void 0||Pe>=G||Pe<0||Ze&&Be>=Ee}function bt(){var Ue=z();if(He(Ue))return Yt(Ue);Se=setTimeout(bt,Fe(Ue))}function Yt(Ue){return Se=void 0,Je&&he?We(Ue):(he=pe=void 0,me)}function gt(){Se!==void 0&&clearTimeout(Se),be=0,he=De=pe=Se=void 0}function Lt(){return Se===void 0?me:Yt(z())}function Kt(){var Ue=z(),Pe=He(Ue);if(he=arguments,pe=this,De=Ue,Pe){if(Se===void 0)return Me(De);if(Ze)return Se=setTimeout(bt,G),We(De)}return Se===void 0&&(Se=setTimeout(bt,G)),me}return Kt.cancel=gt,Kt.flush=Lt,Kt}function q(ne,G,oe){var he=!0,pe=!0;if(typeof ne!="function")throw new TypeError(n);return Y(oe)&&(he="leading"in oe?!!oe.leading:he,pe="trailing"in oe?!!oe.trailing:pe),j(ne,G,{leading:he,maxWait:G,trailing:pe})}function Y(ne){var G=typeof ne;return!!ne&&(G=="object"||G=="function")}function ie(ne){return!!ne&&typeof ne=="object"}function te(ne){return typeof ne=="symbol"||ie(ne)&&S.call(ne)==t}function V(ne){if(typeof ne=="number")return ne;if(te(ne))return e;if(Y(ne)){var G=typeof ne.valueOf=="function"?ne.valueOf():ne;ne=Y(G)?G+"":G}if(typeof ne!="string")return ne===0?ne:+ne;ne=ne.replace(r,"");var oe=s.test(ne);return oe||a.test(ne)?o(ne.slice(2),oe?2:8):i.test(ne)?e:+ne}return f6=q,f6}var Zpe=Hpe();const Xpe=el(Zpe);var eC={exports:{}};eC.exports;var tL;function Jpe(){return tL||(tL=1,function(n,e){var t=200,r="__lodash_hash_undefined__",i=1,s=2,a=9007199254740991,o="[object Arguments]",d="[object Array]",g="[object AsyncFunction]",b="[object Boolean]",E="[object Date]",S="[object Error]",I="[object Function]",P="[object GeneratorFunction]",z="[object Map]",j="[object Number]",q="[object Null]",Y="[object Object]",ie="[object Promise]",te="[object Proxy]",V="[object RegExp]",ne="[object Set]",G="[object String]",oe="[object Symbol]",he="[object Undefined]",pe="[object WeakMap]",Ee="[object ArrayBuffer]",me="[object DataView]",Se="[object Float32Array]",De="[object Float64Array]",be="[object Int8Array]",at="[object Int16Array]",Ze="[object Int32Array]",Je="[object Uint8Array]",We="[object Uint8ClampedArray]",Me="[object Uint16Array]",Fe="[object Uint32Array]",He=/[\\^$.*+?()[\]{}|]/g,bt=/^\[object .+?Constructor\]$/,Yt=/^(?:0|[1-9]\d*)$/,gt={};gt[Se]=gt[De]=gt[be]=gt[at]=gt[Ze]=gt[Je]=gt[We]=gt[Me]=gt[Fe]=!0,gt[o]=gt[d]=gt[Ee]=gt[b]=gt[me]=gt[E]=gt[S]=gt[I]=gt[z]=gt[j]=gt[Y]=gt[V]=gt[ne]=gt[G]=gt[pe]=!1;var Lt=typeof window=="object"&&window&&window.Object===Object&&window,Kt=typeof self=="object"&&self&&self.Object===Object&&self,Ue=Lt||Kt||Function("return this")(),Pe=e&&!e.nodeType&&e,Be=Pe&&!0&&n&&!n.nodeType&&n,it=Be&&Be.exports===Pe,_t=it&&Lt.process,ft=function(){try{return _t&&_t.binding&&_t.binding("util")}catch{}}(),Ut=ft&&ft.isTypedArray;function rn(J,Ie){for(var st=-1,$t=J==null?0:J.length,Kr=0,$n=[];++st<$t;){var ti=J[st];Ie(ti,st,J)&&($n[Kr++]=ti)}return $n}function Dt(J,Ie){for(var st=-1,$t=Ie.length,Kr=J.length;++st<$t;)J[Kr+st]=Ie[st];return J}function _n(J,Ie){for(var st=-1,$t=J==null?0:J.length;++st<$t;)if(Ie(J[st],st,J))return!0;return!1}function qn(J,Ie){for(var st=-1,$t=Array(J);++st<J;)$t[st]=Ie(st);return $t}function tn(J){return function(Ie){return J(Ie)}}function rr(J,Ie){return J.has(Ie)}function Dn(J,Ie){return J==null?void 0:J[Ie]}function pn(J){var Ie=-1,st=Array(J.size);return J.forEach(function($t,Kr){st[++Ie]=[Kr,$t]}),st}function Zn(J,Ie){return function(st){return J(Ie(st))}}function dr(J){var Ie=-1,st=Array(J.size);return J.forEach(function($t){st[++Ie]=$t}),st}var vr=Array.prototype,Jn=Function.prototype,Qe=Object.prototype,ce=Ue["__core-js_shared__"],fe=Jn.toString,nt=Qe.hasOwnProperty,St=function(){var J=/[^.]+$/.exec(ce&&ce.keys&&ce.keys.IE_PROTO||"");return J?"Symbol(src)_1."+J:""}(),Ht=Qe.toString,sn=RegExp("^"+fe.call(nt).replace(He,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),tr=it?Ue.Buffer:void 0,Oe=Ue.Symbol,se=Ue.Uint8Array,ve=Qe.propertyIsEnumerable,p=vr.splice,Ne=Oe?Oe.toStringTag:void 0,Ye=Object.getOwnPropertySymbols,rt=tr?tr.isBuffer:void 0,ct=Zn(Object.keys,Object),dt=Yi(Ue,"DataView"),qt=Yi(Ue,"Map"),Gt=Yi(Ue,"Promise"),jt=Yi(Ue,"Set"),xt=Yi(Ue,"WeakMap"),Tn=Yi(Object,"create"),On=Bo(dt),gr=Bo(qt),Er=Bo(Gt),on=Bo(jt),Rn=Bo(xt),er=Oe?Oe.prototype:void 0,Xr=er?er.valueOf:void 0;function Ur(J){var Ie=-1,st=J==null?0:J.length;for(this.clear();++Ie<st;){var $t=J[Ie];this.set($t[0],$t[1])}}function Dr(){this.__data__=Tn?Tn(null):{},this.size=0}function ur(J){var Ie=this.has(J)&&delete this.__data__[J];return this.size-=Ie?1:0,Ie}function mo(J){var Ie=this.__data__;if(Tn){var st=Ie[J];return st===r?void 0:st}return nt.call(Ie,J)?Ie[J]:void 0}function Ma(J){var Ie=this.__data__;return Tn?Ie[J]!==void 0:nt.call(Ie,J)}function qi(J,Ie){var st=this.__data__;return this.size+=this.has(J)?0:1,st[J]=Tn&&Ie===void 0?r:Ie,this}Ur.prototype.clear=Dr,Ur.prototype.delete=ur,Ur.prototype.get=mo,Ur.prototype.has=Ma,Ur.prototype.set=qi;function vi(J){var Ie=-1,st=J==null?0:J.length;for(this.clear();++Ie<st;){var $t=J[Ie];this.set($t[0],$t[1])}}function io(){this.__data__=[],this.size=0}function Do(J){var Ie=this.__data__,st=or(Ie,J);if(st<0)return!1;var $t=Ie.length-1;return st==$t?Ie.pop():p.call(Ie,st,1),--this.size,!0}function Ti(J){var Ie=this.__data__,st=or(Ie,J);return st<0?void 0:Ie[st][1]}function ja(J){return or(this.__data__,J)>-1}function Sa(J,Ie){var st=this.__data__,$t=or(st,J);return $t<0?(++this.size,st.push([J,Ie])):st[$t][1]=Ie,this}vi.prototype.clear=io,vi.prototype.delete=Do,vi.prototype.get=Ti,vi.prototype.has=ja,vi.prototype.set=Sa;function ns(J){var Ie=-1,st=J==null?0:J.length;for(this.clear();++Ie<st;){var $t=J[Ie];this.set($t[0],$t[1])}}function sa(){this.size=0,this.__data__={hash:new Ur,map:new(qt||vi),string:new Ur}}function Al(J){var Ie=Rr(this,J).delete(J);return this.size-=Ie?1:0,Ie}function uo(J){return Rr(this,J).get(J)}function Fu(J){return Rr(this,J).has(J)}function Hl(J,Ie){var st=Rr(this,J),$t=st.size;return st.set(J,Ie),this.size+=st.size==$t?0:1,this}ns.prototype.clear=sa,ns.prototype.delete=Al,ns.prototype.get=uo,ns.prototype.has=Fu,ns.prototype.set=Hl;function oo(J){var Ie=-1,st=J==null?0:J.length;for(this.__data__=new ns;++Ie<st;)this.add(J[Ie])}function Tr(J){return this.__data__.set(J,r),this}function tl(J){return this.__data__.has(J)}oo.prototype.add=oo.prototype.push=Tr,oo.prototype.has=tl;function Bs(J){var Ie=this.__data__=new vi(J);this.size=Ie.size}function Js(){this.__data__=new vi,this.size=0}function qe(J){var Ie=this.__data__,st=Ie.delete(J);return this.size=Ie.size,st}function wt(J){return this.__data__.get(J)}function vn(J){return this.__data__.has(J)}function Yn(J,Ie){var st=this.__data__;if(st instanceof vi){var $t=st.__data__;if(!qt||$t.length<t-1)return $t.push([J,Ie]),this.size=++st.size,this;st=this.__data__=new ns($t)}return st.set(J,Ie),this.size=st.size,this}Bs.prototype.clear=Js,Bs.prototype.delete=qe,Bs.prototype.get=wt,Bs.prototype.has=vn,Bs.prototype.set=Yn;function hn(J,Ie){var st=Ms(J),$t=!st&&Ba(J),Kr=!st&&!$t&&ea(J),$n=!st&&!$t&&!Kr&&Xl(J),ti=st||$t||Kr||$n,Ai=ti?qn(J.length,String):[],Br=Ai.length;for(var xr in J)nt.call(J,xr)&&!(ti&&(xr=="length"||Kr&&(xr=="offset"||xr=="parent")||$n&&(xr=="buffer"||xr=="byteLength"||xr=="byteOffset")||Ws(xr,Br)))&&Ai.push(xr);return Ai}function or(J,Ie){for(var st=J.length;st--;)if(Ho(J[st][0],Ie))return st;return-1}function Pi(J,Ie,st){var $t=Ie(J);return Ms(J)?$t:Dt($t,st(J))}function go(J){return J==null?J===void 0?he:q:Ne&&Ne in Object(J)?yo(J):Ao(J)}function Cs(J){return Yr(J)&&go(J)==o}function Rs(J,Ie,st,$t,Kr){return J===Ie?!0:J==null||Ie==null||!Yr(J)&&!Yr(Ie)?J!==J&&Ie!==Ie:SA(J,Ie,st,$t,Rs,Kr)}function SA(J,Ie,st,$t,Kr,$n){var ti=Ms(J),Ai=Ms(Ie),Br=ti?d:wo(J),xr=Ai?d:wo(Ie);Br=Br==o?Y:Br,xr=xr==o?Y:xr;var zi=Br==Y,Zi=xr==Y,Si=Br==xr;if(Si&&ea(J)){if(!ea(Ie))return!1;ti=!0,zi=!1}if(Si&&!zi)return $n||($n=new Bs),ti||Xl(J)?ui(J,Ie,st,$t,Kr,$n):aa(J,Ie,Br,st,$t,Kr,$n);if(!(st&i)){var Wr=zi&&nt.call(J,"__wrapped__"),Mo=Zi&&nt.call(Ie,"__wrapped__");if(Wr||Mo){var Di=Wr?J.value():J,cs=Mo?Ie.value():Ie;return $n||($n=new Bs),Kr(Di,cs,st,$t,$n)}}return Si?($n||($n=new Bs),XA(J,Ie,st,$t,Kr,$n)):!1}function ei(J){if(!Ui(J)||Lu(J))return!1;var Ie=co(J)?sn:bt;return Ie.test(Bo(J))}function wi(J){return Yr(J)&&Zl(J.length)&&!!gt[go(J)]}function nl(J){if(!_l(J))return ct(J);var Ie=[];for(var st in Object(J))nt.call(J,st)&&st!="constructor"&&Ie.push(st);return Ie}function ui(J,Ie,st,$t,Kr,$n){var ti=st&i,Ai=J.length,Br=Ie.length;if(Ai!=Br&&!(ti&&Br>Ai))return!1;var xr=$n.get(J);if(xr&&$n.get(Ie))return xr==Ie;var zi=-1,Zi=!0,Si=st&s?new oo:void 0;for($n.set(J,Ie),$n.set(Ie,J);++zi<Ai;){var Wr=J[zi],Mo=Ie[zi];if($t)var Di=ti?$t(Mo,Wr,zi,Ie,J,$n):$t(Wr,Mo,zi,J,Ie,$n);if(Di!==void 0){if(Di)continue;Zi=!1;break}if(Si){if(!_n(Ie,function(cs,pa){if(!rr(Si,pa)&&(Wr===cs||Kr(Wr,cs,st,$t,$n)))return Si.push(pa)})){Zi=!1;break}}else if(!(Wr===Mo||Kr(Wr,Mo,st,$t,$n))){Zi=!1;break}}return $n.delete(J),$n.delete(Ie),Zi}function aa(J,Ie,st,$t,Kr,$n,ti){switch(st){case me:if(J.byteLength!=Ie.byteLength||J.byteOffset!=Ie.byteOffset)return!1;J=J.buffer,Ie=Ie.buffer;case Ee:return!(J.byteLength!=Ie.byteLength||!$n(new se(J),new se(Ie)));case b:case E:case j:return Ho(+J,+Ie);case S:return J.name==Ie.name&&J.message==Ie.message;case V:case G:return J==Ie+"";case z:var Ai=pn;case ne:var Br=$t&i;if(Ai||(Ai=dr),J.size!=Ie.size&&!Br)return!1;var xr=ti.get(J);if(xr)return xr==Ie;$t|=s,ti.set(J,Ie);var zi=ui(Ai(J),Ai(Ie),$t,Kr,$n,ti);return ti.delete(J),zi;case oe:if(Xr)return Xr.call(J)==Xr.call(Ie)}return!1}function XA(J,Ie,st,$t,Kr,$n){var ti=st&i,Ai=Ea(J),Br=Ai.length,xr=Ea(Ie),zi=xr.length;if(Br!=zi&&!ti)return!1;for(var Zi=Br;Zi--;){var Si=Ai[Zi];if(!(ti?Si in Ie:nt.call(Ie,Si)))return!1}var Wr=$n.get(J);if(Wr&&$n.get(Ie))return Wr==Ie;var Mo=!0;$n.set(J,Ie),$n.set(Ie,J);for(var Di=ti;++Zi<Br;){Si=Ai[Zi];var cs=J[Si],pa=Ie[Si];if($t)var Na=ti?$t(pa,cs,Si,Ie,J,$n):$t(cs,pa,Si,J,Ie,$n);if(!(Na===void 0?cs===pa||Kr(cs,pa,st,$t,$n):Na)){Mo=!1;break}Di||(Di=Si=="constructor")}if(Mo&&!Di){var yu=J.constructor,Qs=Ie.constructor;yu!=Qs&&"constructor"in J&&"constructor"in Ie&&!(typeof yu=="function"&&yu instanceof yu&&typeof Qs=="function"&&Qs instanceof Qs)&&(Mo=!1)}return $n.delete(J),$n.delete(Ie),Mo}function Ea(J){return Pi(J,$i,gu)}function Rr(J,Ie){var st=J.__data__;return Gs(Ie)?st[typeof Ie=="string"?"string":"hash"]:st.map}function Yi(J,Ie){var st=Dn(J,Ie);return ei(st)?st:void 0}function yo(J){var Ie=nt.call(J,Ne),st=J[Ne];try{J[Ne]=void 0;var $t=!0}catch{}var Kr=Ht.call(J);return $t&&(Ie?J[Ne]=st:delete J[Ne]),Kr}var gu=Ye?function(J){return J==null?[]:(J=Object(J),rn(Ye(J),function(Ie){return ve.call(J,Ie)}))}:so,wo=go;(dt&&wo(new dt(new ArrayBuffer(1)))!=me||qt&&wo(new qt)!=z||Gt&&wo(Gt.resolve())!=ie||jt&&wo(new jt)!=ne||xt&&wo(new xt)!=pe)&&(wo=function(J){var Ie=go(J),st=Ie==Y?J.constructor:void 0,$t=st?Bo(st):"";if($t)switch($t){case On:return me;case gr:return z;case Er:return ie;case on:return ne;case Rn:return pe}return Ie});function Ws(J,Ie){return Ie=Ie??a,!!Ie&&(typeof J=="number"||Yt.test(J))&&J>-1&&J%1==0&&J<Ie}function Gs(J){var Ie=typeof J;return Ie=="string"||Ie=="number"||Ie=="symbol"||Ie=="boolean"?J!=="__proto__":J===null}function Lu(J){return!!St&&St in J}function _l(J){var Ie=J&&J.constructor,st=typeof Ie=="function"&&Ie.prototype||Qe;return J===st}function Ao(J){return Ht.call(J)}function Bo(J){if(J!=null){try{return fe.call(J)}catch{}try{return J+""}catch{}}return""}function Ho(J,Ie){return J===Ie||J!==J&&Ie!==Ie}var Ba=Cs(function(){return arguments}())?Cs:function(J){return Yr(J)&&nt.call(J,"callee")&&!ve.call(J,"callee")},Ms=Array.isArray;function Oa(J){return J!=null&&Zl(J.length)&&!co(J)}var ea=rt||Ki;function EA(J,Ie){return Rs(J,Ie)}function co(J){if(!Ui(J))return!1;var Ie=go(J);return Ie==I||Ie==P||Ie==g||Ie==te}function Zl(J){return typeof J=="number"&&J>-1&&J%1==0&&J<=a}function Ui(J){var Ie=typeof J;return J!=null&&(Ie=="object"||Ie=="function")}function Yr(J){return J!=null&&typeof J=="object"}var Xl=Ut?tn(Ut):wi;function $i(J){return Oa(J)?hn(J):nl(J)}function so(){return[]}function Ki(){return!1}n.exports=EA}(eC,eC.exports)),eC.exports}var eme=Jpe();const LB=el(eme);function Fi(){var n="/home/runner/work/maputnik/maputnik/src/libs/layerwatcher.ts",e="77d2098743f5a64765174c6e14fc4dc25f900f6c",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/layerwatcher.ts",statementMap:{0:{start:{line:10,column:4},end:{line:11,column:7}},1:{start:{line:12,column:4},end:{line:13,column:7}},2:{start:{line:14,column:4},end:{line:14,column:23}},3:{start:{line:15,column:4},end:{line:15,column:28}},4:{start:{line:16,column:4},end:{line:16,column:90}},5:{start:{line:19,column:28},end:{line:19,column:48}},6:{start:{line:20,column:4},end:{line:22,column:7}},7:{start:{line:21,column:6},end:{line:21,column:88}},8:{start:{line:23,column:4},end:{line:25,column:5}},9:{start:{line:24,column:6},end:{line:24,column:42}},10:{start:{line:26,column:4},end:{line:26,column:48}},11:{start:{line:29,column:33},end:{line:29,column:58}},12:{start:{line:30,column:4},end:{line:43,column:7}},13:{start:{line:31,column:6},end:{line:42,column:9}},14:{start:{line:32,column:32},end:{line:32,column:71}},15:{start:{line:33,column:23},end:{line:33,column:53}},16:{start:{line:34,column:8},end:{line:40,column:11}},17:{start:{line:35,column:10},end:{line:39,column:13}},18:{start:{line:36,column:40},end:{line:36,column:75}},19:{start:{line:37,column:12},end:{line:37,column:71}},20:{start:{line:38,column:12},end:{line:38,column:64}},21:{start:{line:41,column:8},end:{line:41,column:60}},22:{start:{line:44,column:4},end:{line:46,column:5}},23:{start:{line:45,column:6},end:{line:45,column:52}},24:{start:{line:50,column:4},end:{line:50,column:25}},25:{start:{line:53,column:4},end:{line:53,column:30}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:2},end:{line:9,column:3}},loc:{start:{line:9,column:25},end:{line:17,column:3}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:10,column:52},end:{line:10,column:53}},loc:{start:{line:10,column:58},end:{line:11,column:5}},line:10},2:{name:"(anonymous_2)",decl:{start:{line:12,column:62},end:{line:12,column:63}},loc:{start:{line:12,column:68},end:{line:13,column:5}},line:12},3:{name:"(anonymous_3)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:18},end:{line:27,column:3}},line:18},4:{name:"(anonymous_4)",decl:{start:{line:20,column:48},end:{line:20,column:49}},loc:{start:{line:20,column:62},end:{line:22,column:5}},line:20},5:{name:"(anonymous_5)",decl:{start:{line:28,column:2},end:{line:28,column:3}},loc:{start:{line:28,column:32},end:{line:47,column:3}},line:28},6:{name:"(anonymous_6)",decl:{start:{line:30,column:39},end:{line:30,column:40}},loc:{start:{line:30,column:53},end:{line:43,column:5}},line:30},7:{name:"(anonymous_7)",decl:{start:{line:31,column:46},end:{line:31,column:47}},loc:{start:{line:31,column:65},end:{line:42,column:7}},line:31},8:{name:"(anonymous_8)",decl:{start:{line:34,column:58},end:{line:34,column:59}},loc:{start:{line:34,column:71},end:{line:40,column:9}},line:34},9:{name:"(anonymous_9)",decl:{start:{line:35,column:50},end:{line:35,column:51}},loc:{start:{line:35,column:68},end:{line:39,column:11}},line:35},10:{name:"(anonymous_10)",decl:{start:{line:49,column:2},end:{line:49,column:3}},loc:{start:{line:49,column:16},end:{line:51,column:3}},line:49},11:{name:"(anonymous_11)",decl:{start:{line:52,column:2},end:{line:52,column:3}},loc:{start:{line:52,column:21},end:{line:54,column:3}},line:52}},branchMap:{0:{loc:{start:{line:9,column:14},end:{line:9,column:23}},type:"default-arg",locations:[{start:{line:9,column:21},end:{line:9,column:23}}],line:9},1:{loc:{start:{line:10,column:27},end:{line:11,column:6}},type:"binary-expr",locations:[{start:{line:10,column:27},end:{line:10,column:47}},{start:{line:10,column:52},end:{line:11,column:5}}],line:10},2:{loc:{start:{line:12,column:32},end:{line:13,column:6}},type:"binary-expr",locations:[{start:{line:12,column:32},end:{line:12,column:57}},{start:{line:12,column:62},end:{line:13,column:5}}],line:12},3:{loc:{start:{line:23,column:4},end:{line:25,column:5}},type:"if",locations:[{start:{line:23,column:4},end:{line:25,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:23},4:{loc:{start:{line:31,column:7},end:{line:31,column:36}},type:"binary-expr",locations:[{start:{line:31,column:7},end:{line:31,column:30}},{start:{line:31,column:34},end:{line:31,column:36}}],line:31},5:{loc:{start:{line:32,column:32},end:{line:32,column:71}},type:"binary-expr",locations:[{start:{line:32,column:32},end:{line:32,column:65}},{start:{line:32,column:69},end:{line:32,column:71}}],line:32},6:{loc:{start:{line:36,column:40},end:{line:36,column:75}},type:"binary-expr",locations:[{start:{line:36,column:40},end:{line:36,column:69}},{start:{line:36,column:73},end:{line:36,column:75}}],line:36},7:{loc:{start:{line:44,column:4},end:{line:46,column:5}},type:"if",locations:[{start:{line:44,column:4},end:{line:46,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:44}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},b:{0:[0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/layerwatcher.ts"],names:[],mappings:"AAAA,OAAO,cAAc;AACrB,OAAO,aAAa;AAUpB,qBAAqB,aAAa;AAAA,EAChC;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EAEA,YAAY,OAA4B,CAAC,GAAG;AAC1C,SAAK,kBAAkB,KAAK,oBAAoB,MAAM;AAAA,IAAC;AACvD,SAAK,uBAAuB,KAAK,yBAAyB,MAAM;AAAA,IAAC;AAEjE,SAAK,WAAW,CAAC;AACjB,SAAK,gBAAgB,CAAC;AAKtB,SAAK,oCAAoC,SAAS,KAAK,0BAA0B,GAAI;AAAA,EACvF;AAAA,EAEA,WAAW,KAAU;AACnB,UAAM,kBAAkB,EAAE,GAAG,KAAK,SAAS;AAE3C,WAAO,KAAK,IAAI,MAAM,YAAY,EAAE,QAAQ,cAAY;AAGtD,WAAK,SAAS,QAAQ,IAAI,IAAI,MAAM,aAAa,QAAQ,EAAE,QAAQ;AAAA,IACrE,CAAC;AAED,QAAG,CAAC,QAAQ,iBAAiB,KAAK,QAAQ,GAAG;AAC3C,WAAK,gBAAgB,KAAK,QAAQ;AAAA,IACpC;AAEA,SAAK,kCAAkC,GAAG;AAAA,EAC5C;AAAA,EAEA,yBAAyB,KAAU;AACjC,UAAM,uBAAuB,EAAE,GAAG,KAAK,cAAc;AAErD,WAAO,KAAK,KAAK,QAAQ,EAAE,QAAQ,cAAY;AAC7C,OAAC,KAAK,SAAS,QAAQ,KAAK,CAAC,GAAG,QAAQ,mBAAiB;AACvD,cAAM,kBAAkB,KAAK,cAAc,aAAa,KAAK,CAAC;AAC9D,cAAM,SAAS,EAAE,aAAa,cAAc;AAC5C,YAAI,oBAAoB,UAAU,MAAa,EAAE,QAAQ,aAAW;AAClE,iBAAO,KAAK,QAAQ,UAAU,EAAE,QAAQ,kBAAgB;AACtD,kBAAM,sBAAsB,gBAAgB,YAAY,KAAK,CAAC;AAC9D,gCAAoB,QAAQ,WAAW,YAAY,CAAC,IAAI,CAAC;AACzD,4BAAgB,YAAY,IAAI;AAAA,UAClC,CAAC;AAAA,QACH,CAAC;AAED,aAAK,cAAc,aAAa,IAAI;AAAA,MACtC,CAAC;AAAA,IACH,CAAC;AAED,QAAG,CAAC,QAAQ,sBAAsB,KAAK,aAAa,GAAG;AACrD,WAAK,qBAAqB,KAAK,aAAa;AAAA,IAC9C;AAAA,EAEF;AAAA;AAAA,EAGA,IAAI,UAAU;AACZ,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,IAAI,eAAe;AACjB,WAAO,KAAK;AAAA,EACd;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"77d2098743f5a64765174c6e14fc4dc25f900f6c"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Fi=function(){return a},a}Fi();class tme{constructor(e=(Fi().b[0][0]++,{})){Pn(this,"onSourcesChange");Pn(this,"onVectorLayersChange");Pn(this,"throttledAnalyzeVectorLayerFields");Pn(this,"_sources");Pn(this,"_vectorLayers");Fi().f[0]++,Fi().s[0]++,this.onSourcesChange=(Fi().b[1][0]++,e.onSourcesChange||(Fi().b[1][1]++,()=>{Fi().f[1]++})),Fi().s[1]++,this.onVectorLayersChange=(Fi().b[2][0]++,e.onVectorLayersChange||(Fi().b[2][1]++,()=>{Fi().f[2]++})),Fi().s[2]++,this._sources={},Fi().s[3]++,this._vectorLayers={},Fi().s[4]++,this.throttledAnalyzeVectorLayerFields=Xpe(this.analyzeVectorLayerFields,5e3)}analyzeMap(e){Fi().f[3]++;const t=(Fi().s[5]++,{...this._sources});Fi().s[6]++,Object.keys(e.style.sourceCaches).forEach(r=>{Fi().f[4]++,Fi().s[7]++,this._sources[r]=e.style.sourceCaches[r]._source.vectorLayerIds}),Fi().s[8]++,LB(t,this._sources)?Fi().b[3][1]++:(Fi().b[3][0]++,Fi().s[9]++,this.onSourcesChange(this._sources)),Fi().s[10]++,this.throttledAnalyzeVectorLayerFields(e)}analyzeVectorLayerFields(e){Fi().f[5]++;const t=(Fi().s[11]++,{...this._vectorLayers});Fi().s[12]++,Object.keys(this._sources).forEach(r=>{Fi().f[6]++,Fi().s[13]++,(Fi().b[4][0]++,this._sources[r]||(Fi().b[4][1]++,[])).forEach(i=>{Fi().f[7]++;const s=(Fi().s[14]++,Fi().b[5][0]++,this._vectorLayers[i]||(Fi().b[5][1]++,{})),a=(Fi().s[15]++,{sourceLayer:i});Fi().s[16]++,e.querySourceFeatures(r,a).forEach(o=>{Fi().f[8]++,Fi().s[17]++,Object.keys(o.properties).forEach(d=>{Fi().f[9]++;const g=(Fi().s[18]++,Fi().b[6][0]++,s[d]||(Fi().b[6][1]++,{}));Fi().s[19]++,g[o.properties[d]]={},Fi().s[20]++,s[d]=g})}),Fi().s[21]++,this._vectorLayers[i]=s})}),Fi().s[22]++,LB(t,this._vectorLayers)?Fi().b[7][1]++:(Fi().b[7][0]++,Fi().s[23]++,this.onVectorLayersChange(this._vectorLayers))}get sources(){return Fi().f[10]++,Fi().s[24]++,this._sources}get vectorLayers(){return Fi().f[11]++,Fi().s[25]++,this._vectorLayers}}function Zs(){var n="/home/runner/work/maputnik/maputnik/src/libs/debug.ts",e="f3fc52390a8e0125df8ac2b3d3c29ba103bd1c39",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/debug.ts",statementMap:{0:{start:{line:1,column:19},end:{line:1,column:21}},1:{start:{line:3,column:13},end:{line:3,column:55}},2:{start:{line:4,column:18},end:{line:4,column:33}},3:{start:{line:5,column:2},end:{line:9,column:3}},4:{start:{line:6,column:4},end:{line:6,column:42}},5:{start:{line:8,column:4},end:{line:8,column:17}},6:{start:{line:12,column:2},end:{line:12,column:91}},7:{start:{line:15,column:2},end:{line:17,column:3}},8:{start:{line:16,column:4},end:{line:16,column:19}},9:{start:{line:18,column:2},end:{line:18,column:54}},10:{start:{line:19,column:2},end:{line:19,column:37}},11:{start:{line:22,column:2},end:{line:24,column:3}},12:{start:{line:23,column:4},end:{line:23,column:19}},13:{start:{line:25,column:2},end:{line:27,column:3}},14:{start:{line:26,column:4},end:{line:26,column:38}},15:{start:{line:29,column:12},end:{line:33,column:1}},16:{start:{line:34,column:0},end:{line:34,column:19}}},fnMap:{0:{name:"enabled",decl:{start:{line:2,column:9},end:{line:2,column:16}},loc:{start:{line:2,column:19},end:{line:10,column:1}},line:2},1:{name:"genErr",decl:{start:{line:11,column:9},end:{line:11,column:15}},loc:{start:{line:11,column:18},end:{line:13,column:1}},line:11},2:{name:"set",decl:{start:{line:14,column:9},end:{line:14,column:12}},loc:{start:{line:14,column:36},end:{line:20,column:1}},line:14},3:{name:"get",decl:{start:{line:21,column:9},end:{line:21,column:12}},loc:{start:{line:21,column:29},end:{line:28,column:1}},line:21}},branchMap:{0:{loc:{start:{line:5,column:2},end:{line:9,column:3}},type:"if",locations:[{start:{line:5,column:2},end:{line:9,column:3}},{start:{line:7,column:9},end:{line:9,column:3}}],line:5},1:{loc:{start:{line:15,column:2},end:{line:17,column:3}},type:"if",locations:[{start:{line:15,column:2},end:{line:17,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:15},2:{loc:{start:{line:18,column:26},end:{line:18,column:53}},type:"binary-expr",locations:[{start:{line:18,column:26},end:{line:18,column:47}},{start:{line:18,column:51},end:{line:18,column:53}}],line:18},3:{loc:{start:{line:22,column:2},end:{line:24,column:3}},type:"if",locations:[{start:{line:22,column:2},end:{line:24,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:22},4:{loc:{start:{line:25,column:2},end:{line:27,column:3}},type:"if",locations:[{start:{line:25,column:2},end:{line:27,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:25}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0},f:{0:0,1:0,2:0,3:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/debug.ts"],names:[],mappings:"AAMA,MAAM,aAAyB,CAAC;AAEhC,SAAS,UAAU;AACjB,QAAM,KAAK,IAAI,IAAI,OAAO,SAAS,IAAI,EAAE;AACzC,QAAM,UAAU,GAAG,IAAI,OAAO;AAC9B,MAAG,SAAS;AACV,WAAO,CAAC,CAAC,QAAQ,MAAM,aAAa;AAAA,EACtC,OACK;AACH,WAAO;AAAA,EACT;AACF;AAEA,SAAS,SAAS;AAChB,SAAO,IAAI,MAAM,sEAAsE;AACzF;AAEA,SAAS,IAAI,WAA6B,KAAa,OAAY;AACjE,MAAG,CAAC,QAAQ,GAAG;AACb,UAAM,OAAO;AAAA,EACf;AACA,aAAW,SAAS,IAAI,WAAW,SAAS,KAAK,CAAC;AAClD,aAAW,SAAS,EAAE,GAAG,IAAI;AAC/B;AAEA,SAAS,IAAI,WAA6B,KAAa;AACrD,MAAG,CAAC,QAAQ,GAAG;AACb,UAAM,OAAO;AAAA,EACf;AACA,MAAG,OAAO,UAAU,eAAe,KAAK,YAAY,SAAS,GAAG;AAC9D,WAAO,WAAW,SAAS,EAAE,GAAG;AAAA,EAClC;AACF;AAEA,MAAM,MAAM;AAAA,EACV;AAAA,EACA;AAAA,EACA;AACF;AAEC,OAAe,QAAQ;AACxB,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f3fc52390a8e0125df8ac2b3d3c29ba103bd1c39"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Zs=function(){return a},a}Zs();const fC=(Zs().s[0]++,{});function gI(){Zs().f[0]++;const n=(Zs().s[1]++,new URL(window.location.href).searchParams),e=(Zs().s[2]++,n.get("debug"));return Zs().s[3]++,e?(Zs().b[0][0]++,Zs().s[4]++,!!e.match(/^(|1|true)$/)):(Zs().b[0][1]++,Zs().s[5]++,!1)}function qG(){return Zs().f[1]++,Zs().s[6]++,new Error("Debug not enabled, enable by appending '?debug' to your query string")}function nme(n,e,t){if(Zs().f[2]++,Zs().s[7]++,gI())Zs().b[1][1]++;else throw Zs().b[1][0]++,Zs().s[8]++,qG();Zs().s[9]++,fC[n]=(Zs().b[2][0]++,fC[n]||(Zs().b[2][1]++,{})),Zs().s[10]++,fC[n][e]=t}function rme(n,e){if(Zs().f[3]++,Zs().s[11]++,gI())Zs().b[3][1]++;else throw Zs().b[3][0]++,Zs().s[12]++,qG();if(Zs().s[13]++,Object.prototype.hasOwnProperty.call(fC,n))return Zs().b[4][0]++,Zs().s[14]++,fC[n][e];Zs().b[4][1]++}const Cg=(Zs().s[15]++,{enabled:gI,get:rme,set:nme});Zs().s[16]++;window.debug=Cg;function we(){var n="/home/runner/work/maputnik/maputnik/src/components/App.tsx",e="bafcb93873c2a71cab2bdafeb2ce6a3195766cd8",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/App.tsx",statementMap:{0:{start:{line:37,column:0},end:{line:37,column:30}},1:{start:{line:39,column:29},end:{line:39,column:60}},2:{start:{line:40,column:26},end:{line:40,column:54}},3:{start:{line:41,column:31},end:{line:41,column:64}},4:{start:{line:42,column:2},end:{line:54,column:3}},5:{start:{line:43,column:24},end:{line:43,column:95}},6:{start:{line:44,column:4},end:{line:46,column:5}},7:{start:{line:45,column:6},end:{line:45,column:47}},8:{start:{line:47,column:9},end:{line:54,column:3}},9:{start:{line:48,column:24},end:{line:48,column:96}},10:{start:{line:49,column:4},end:{line:51,column:5}},11:{start:{line:50,column:6},end:{line:50,column:47}},12:{start:{line:53,column:4},end:{line:53,column:15}},13:{start:{line:57,column:2},end:{line:66,column:4}},14:{start:{line:73,column:4},end:{line:73,column:17}},15:{start:{line:74,column:4},end:{line:74,column:19}},16:{start:{line:75,column:4},end:{line:75,column:45}},17:{start:{line:76,column:19},end:{line:76,column:75}},18:{start:{line:77,column:15},end:{line:77,column:38}},19:{start:{line:78,column:4},end:{line:80,column:5}},20:{start:{line:79,column:6},end:{line:79,column:34}},21:{start:{line:81,column:4},end:{line:85,column:7}},22:{start:{line:82,column:40},end:{line:82,column:86}},23:{start:{line:86,column:22},end:{line:137,column:5}},24:{start:{line:90,column:10},end:{line:90,column:40}},25:{start:{line:96,column:10},end:{line:96,column:35}},26:{start:{line:102,column:10},end:{line:102,column:37}},27:{start:{line:108,column:10},end:{line:108,column:38}},28:{start:{line:114,column:10},end:{line:114,column:39}},29:{start:{line:120,column:10},end:{line:122,column:12}},30:{start:{line:128,column:10},end:{line:128,column:63}},31:{start:{line:134,column:10},end:{line:134,column:36}},32:{start:{line:138,column:4},end:{line:151,column:7}},33:{start:{line:139,column:6},end:{line:150,column:7}},34:{start:{line:140,column:8},end:{line:140,column:24}},35:{start:{line:141,column:8},end:{line:141,column:30}},36:{start:{line:142,column:13},end:{line:150,column:7}},37:{start:{line:143,column:25},end:{line:145,column:10}},38:{start:{line:144,column:10},end:{line:144,column:41}},39:{start:{line:146,column:8},end:{line:149,column:9}},40:{start:{line:147,column:10},end:{line:147,column:44}},41:{start:{line:148,column:10},end:{line:148,column:29}},42:{start:{line:152,column:21},end:{line:152,column:38}},43:{start:{line:153,column:4},end:{line:172,column:5}},44:{start:{line:154,column:6},end:{line:154,column:41}},45:{start:{line:155,column:6},end:{line:155,column:74}},46:{start:{line:155,column:43},end:{line:155,column:72}},47:{start:{line:156,column:6},end:{line:156,column:31}},48:{start:{line:158,column:6},end:{line:160,column:7}},49:{start:{line:159,column:8},end:{line:159,column:33}},50:{start:{line:161,column:6},end:{line:171,column:9}},51:{start:{line:162,column:8},end:{line:165,column:9}},52:{start:{line:163,column:10},end:{line:163,column:74}},53:{start:{line:164,column:10},end:{line:164,column:45}},54:{start:{line:166,column:8},end:{line:166,column:104}},55:{start:{line:166,column:50},end:{line:166,column:102}},56:{start:{line:167,column:8},end:{line:170,column:9}},57:{start:{line:168,column:10},end:{line:168,column:63}},58:{start:{line:169,column:10},end:{line:169,column:69}},59:{start:{line:173,column:4},end:{line:176,column:5}},60:{start:{line:174,column:6},end:{line:174,column:65}},61:{start:{line:175,column:6},end:{line:175,column:59}},62:{start:{line:177,column:4},end:{line:211,column:6}},63:{start:{line:212,column:4},end:{line:214,column:7}},64:{start:{line:213,column:35},end:{line:213,column:69}},65:{start:{line:216,column:19},end:{line:234,column:3}},66:{start:{line:217,column:4},end:{line:233,column:5}},67:{start:{line:218,column:6},end:{line:224,column:7}},68:{start:{line:219,column:8},end:{line:219,column:27}},69:{start:{line:220,column:8},end:{line:220,column:22}},70:{start:{line:221,column:13},end:{line:224,column:7}},71:{start:{line:222,column:8},end:{line:222,column:27}},72:{start:{line:223,column:8},end:{line:223,column:22}},73:{start:{line:226,column:6},end:{line:232,column:7}},74:{start:{line:227,column:8},end:{line:227,column:27}},75:{start:{line:228,column:8},end:{line:228,column:22}},76:{start:{line:229,column:13},end:{line:232,column:7}},77:{start:{line:230,column:8},end:{line:230,column:27}},78:{start:{line:231,column:8},end:{line:231,column:22}},79:{start:{line:236,column:4},end:{line:236,column:60}},80:{start:{line:239,column:4},end:{line:239,column:63}},81:{start:{line:242,column:4},end:{line:242,column:40}},82:{start:{line:245,column:21},end:{line:245,column:55}},83:{start:{line:246,column:24},end:{line:246,column:93}},84:{start:{line:247,column:21},end:{line:247,column:110}},85:{start:{line:248,column:4},end:{line:250,column:7}},86:{start:{line:249,column:6},end:{line:249,column:80}},87:{start:{line:253,column:4},end:{line:255,column:7}},88:{start:{line:254,column:6},end:{line:254,column:80}},89:{start:{line:257,column:29},end:{line:271,column:3}},90:{start:{line:258,column:4},end:{line:262,column:5}},91:{start:{line:259,column:6},end:{line:261,column:9}},92:{start:{line:263,column:25},end:{line:269,column:5}},93:{start:{line:270,column:4},end:{line:270,column:38}},94:{start:{line:272,column:19},end:{line:395,column:3}},95:{start:{line:273,column:4},end:{line:278,column:6}},96:{start:{line:279,column:4},end:{line:281,column:5}},97:{start:{line:280,column:6},end:{line:280,column:71}},98:{start:{line:282,column:4},end:{line:284,column:5}},99:{start:{line:283,column:6},end:{line:283,column:71}},100:{start:{line:285,column:4},end:{line:289,column:5}},101:{start:{line:286,column:6},end:{line:288,column:7}},102:{start:{line:287,column:8},end:{line:287,column:63}},103:{start:{line:290,column:4},end:{line:292,column:5}},104:{start:{line:291,column:6},end:{line:291,column:44}},105:{start:{line:293,column:19},end:{line:293,column:51}},106:{start:{line:294,column:24},end:{line:294,column:26}},107:{start:{line:295,column:4},end:{line:306,column:5}},108:{start:{line:296,column:26},end:{line:296,column:42}},109:{start:{line:297,column:6},end:{line:305,column:9}},110:{start:{line:298,column:8},end:{line:303,column:9}},111:{start:{line:299,column:24},end:{line:301,column:11}},112:{start:{line:302,column:10},end:{line:302,column:34}},113:{start:{line:304,column:8},end:{line:304,column:40}},114:{start:{line:307,column:25},end:{line:358,column:6}},115:{start:{line:308,column:23},end:{line:308,column:109}},116:{start:{line:309,column:6},end:{line:322,column:7}},117:{start:{line:310,column:35},end:{line:310,column:43}},118:{start:{line:311,column:8},end:{line:321,column:10}},119:{start:{line:323,column:33},end:{line:323,column:100}},120:{start:{line:324,column:6},end:{line:337,column:7}},121:{start:{line:325,column:35},end:{line:325,column:53}},122:{start:{line:326,column:8},end:{line:336,column:10}},123:{start:{line:338,column:25},end:{line:338,column:88}},124:{start:{line:339,column:6},end:{line:357,column:7}},125:{start:{line:340,column:52},end:{line:340,column:62}},126:{start:{line:341,column:20},end:{line:341,column:78}},127:{start:{line:342,column:8},end:{line:352,column:10}},128:{start:{line:354,column:8},end:{line:356,column:10}},129:{start:{line:359,column:24},end:{line:359,column:30}},130:{start:{line:360,column:4},end:{line:374,column:5}},131:{start:{line:361,column:6},end:{line:361,column:42}},132:{start:{line:362,column:6},end:{line:373,column:9}},133:{start:{line:363,column:28},end:{line:363,column:33}},134:{start:{line:364,column:8},end:{line:372,column:9}},135:{start:{line:365,column:10},end:{line:371,column:11}},136:{start:{line:366,column:28},end:{line:366,column:49}},137:{start:{line:367,column:30},end:{line:367,column:69}},138:{start:{line:368,column:12},end:{line:368,column:44}},139:{start:{line:370,column:12},end:{line:370,column:30}},140:{start:{line:375,column:4},end:{line:377,column:5}},141:{start:{line:376,column:6},end:{line:376,column:40}},142:{start:{line:378,column:4},end:{line:380,column:5}},143:{start:{line:379,column:6},end:{line:379,column:40}},144:{start:{line:381,column:4},end:{line:383,column:5}},145:{start:{line:382,column:6},end:{line:382,column:47}},146:{start:{line:384,column:4},end:{line:386,column:5}},147:{start:{line:385,column:6},end:{line:385,column:31}},148:{start:{line:387,column:4},end:{line:394,column:7}},149:{start:{line:392,column:6},end:{line:392,column:26}},150:{start:{line:393,column:6},end:{line:393,column:27}},151:{start:{line:396,column:11},end:{line:403,column:3}},152:{start:{line:397,column:24},end:{line:397,column:49}},153:{start:{line:398,column:21},end:{line:398,column:67}},154:{start:{line:399,column:4},end:{line:399,column:61}},155:{start:{line:400,column:4},end:{line:402,column:7}},156:{start:{line:404,column:11},end:{line:411,column:3}},157:{start:{line:405,column:24},end:{line:405,column:49}},158:{start:{line:406,column:21},end:{line:406,column:67}},159:{start:{line:407,column:4},end:{line:407,column:61}},160:{start:{line:408,column:4},end:{line:410,column:7}},161:{start:{line:412,column:16},end:{line:426,column:3}},162:{start:{line:413,column:33},end:{line:413,column:37}},163:{start:{line:414,column:17},end:{line:414,column:43}},164:{start:{line:415,column:4},end:{line:415,column:53}},165:{start:{line:416,column:4},end:{line:416,column:53}},166:{start:{line:417,column:4},end:{line:417,column:38}},167:{start:{line:417,column:31},end:{line:417,column:38}},168:{start:{line:418,column:4},end:{line:422,column:5}},169:{start:{line:419,column:6},end:{line:421,column:9}},170:{start:{line:423,column:4},end:{line:423,column:29}},171:{start:{line:424,column:4},end:{line:424,column:49}},172:{start:{line:425,column:4},end:{line:425,column:32}},173:{start:{line:427,column:19},end:{line:433,column:3}},174:{start:{line:428,column:25},end:{line:431,column:5}},175:{start:{line:432,column:4},end:{line:432,column:38}},176:{start:{line:434,column:19},end:{line:439,column:3}},177:{start:{line:435,column:19},end:{line:435,column:45}},178:{start:{line:436,column:28},end:{line:436,column:43}},179:{start:{line:437,column:4},end:{line:437,column:37}},180:{start:{line:438,column:4},end:{line:438,column:41}},181:{start:{line:440,column:16},end:{line:447,column:3}},182:{start:{line:441,column:19},end:{line:441,column:45}},183:{start:{line:442,column:26},end:{line:442,column:41}},184:{start:{line:443,column:24},end:{line:443,column:55}},185:{start:{line:444,column:4},end:{line:444,column:46}},186:{start:{line:445,column:4},end:{line:445,column:48}},187:{start:{line:446,column:4},end:{line:446,column:39}},188:{start:{line:448,column:28},end:{line:457,column:3}},189:{start:{line:449,column:19},end:{line:449,column:45}},190:{start:{line:450,column:26},end:{line:450,column:41}},191:{start:{line:451,column:18},end:{line:451,column:45}},192:{start:{line:452,column:26},end:{line:452,column:70}},193:{start:{line:453,column:4},end:{line:453,column:88}},194:{start:{line:454,column:4},end:{line:454,column:33}},195:{start:{line:455,column:4},end:{line:455,column:33}},196:{start:{line:456,column:4},end:{line:456,column:39}},197:{start:{line:458,column:20},end:{line:465,column:3}},198:{start:{line:459,column:26},end:{line:459,column:61}},199:{start:{line:460,column:4},end:{line:463,column:6}},200:{start:{line:464,column:4},end:{line:464,column:39}},201:{start:{line:466,column:19},end:{line:470,column:3}},202:{start:{line:467,column:26},end:{line:467,column:61}},203:{start:{line:468,column:4},end:{line:468,column:33}},204:{start:{line:469,column:4},end:{line:469,column:39}},205:{start:{line:471,column:16},end:{line:475,column:3}},206:{start:{line:472,column:4},end:{line:474,column:27}},207:{start:{line:476,column:21},end:{line:490,column:3}},208:{start:{line:477,column:21},end:{line:477,column:44}},209:{start:{line:478,column:4},end:{line:489,column:5}},210:{start:{line:479,column:27},end:{line:485,column:7}},211:{start:{line:486,column:6},end:{line:486,column:26}},212:{start:{line:488,column:6},end:{line:488,column:22}},213:{start:{line:491,column:14},end:{line:495,column:3}},214:{start:{line:492,column:4},end:{line:492,column:34}},215:{start:{line:493,column:4},end:{line:493,column:47}},216:{start:{line:494,column:4},end:{line:494,column:34}},217:{start:{line:497,column:23},end:{line:497,column:25}},218:{start:{line:498,column:4},end:{line:538,column:5}},219:{start:{line:499,column:6},end:{line:537,column:7}},220:{start:{line:500,column:8},end:{line:503,column:10}},221:{start:{line:504,column:18},end:{line:504,column:25}},222:{start:{line:505,column:8},end:{line:509,column:9}},223:{start:{line:506,column:10},end:{line:506,column:62}},224:{start:{line:508,column:10},end:{line:508,column:63}},225:{start:{line:510,column:32},end:{line:523,column:9}},226:{start:{line:511,column:10},end:{line:513,column:11}},227:{start:{line:512,column:12},end:{line:512,column:19}},228:{start:{line:514,column:26},end:{line:516,column:12}},229:{start:{line:517,column:10},end:{line:519,column:11}},230:{start:{line:518,column:12},end:{line:518,column:47}},231:{start:{line:520,column:10},end:{line:522,column:13}},232:{start:{line:524,column:8},end:{line:534,column:9}},233:{start:{line:525,column:10},end:{line:527,column:13}},234:{start:{line:525,column:69},end:{line:525,column:90}},235:{start:{line:526,column:12},end:{line:526,column:74}},236:{start:{line:529,column:10},end:{line:533,column:13}},237:{start:{line:531,column:32},end:{line:531,column:47}},238:{start:{line:531,column:64},end:{line:531,column:85}},239:{start:{line:532,column:12},end:{line:532,column:74}},240:{start:{line:536,column:8},end:{line:536,column:86}},241:{start:{line:539,column:4},end:{line:544,column:5}},242:{start:{line:540,column:6},end:{line:540,column:39}},243:{start:{line:541,column:6},end:{line:543,column:9}},244:{start:{line:547,column:21},end:{line:547,column:55}},245:{start:{line:548,column:4},end:{line:548,column:53}},246:{start:{line:550,column:16},end:{line:554,column:3}},247:{start:{line:551,column:4},end:{line:553,column:7}},248:{start:{line:556,column:40},end:{line:556,column:50}},249:{start:{line:557,column:21},end:{line:568,column:5}},250:{start:{line:560,column:8},end:{line:562,column:11}},251:{start:{line:565,column:8},end:{line:565,column:44}},252:{start:{line:566,column:8},end:{line:566,column:28}},253:{start:{line:569,column:21},end:{line:569,column:40}},254:{start:{line:571,column:4},end:{line:593,column:5}},255:{start:{line:572,column:6},end:{line:580,column:8}},256:{start:{line:582,column:6},end:{line:592,column:8}},257:{start:{line:595,column:4},end:{line:597,column:5}},258:{start:{line:596,column:6},end:{line:596,column:63}},259:{start:{line:598,column:25},end:{line:598,column:27}},260:{start:{line:599,column:4},end:{line:601,column:5}},261:{start:{line:600,column:6},end:{line:600,column:52}},262:{start:{line:602,column:4},end:{line:602,column:160}},263:{start:{line:604,column:18},end:{line:622,column:3}},264:{start:{line:605,column:43},end:{line:605,column:53}},265:{start:{line:606,column:35},end:{line:606,column:45}},266:{start:{line:607,column:16},end:{line:607,column:38}},267:{start:{line:608,column:20},end:{line:608,column:50}},268:{start:{line:609,column:4},end:{line:609,column:70}},269:{start:{line:610,column:23},end:{line:610,column:122}},270:{start:{line:610,column:66},end:{line:610,column:91}},271:{start:{line:610,column:109},end:{line:610,column:121}},272:{start:{line:611,column:4},end:{line:615,column:5}},273:{start:{line:612,column:6},end:{line:612,column:58}},274:{start:{line:614,column:6},end:{line:614,column:39}},275:{start:{line:616,column:4},end:{line:620,column:5}},276:{start:{line:617,column:6},end:{line:617,column:38}},277:{start:{line:618,column:11},end:{line:620,column:5}},278:{start:{line:619,column:6},end:{line:619,column:46}},279:{start:{line:621,column:4},end:{line:621,column:71}},280:{start:{line:623,column:27},end:{line:668,column:3}},281:{start:{line:624,column:16},end:{line:624,column:38}},282:{start:{line:625,column:23},end:{line:625,column:52}},283:{start:{line:626,column:4},end:{line:638,column:5}},284:{start:{line:627,column:21},end:{line:627,column:42}},285:{start:{line:628,column:23},end:{line:628,column:25}},286:{start:{line:629,column:6},end:{line:631,column:9}},287:{start:{line:630,column:8},end:{line:630,column:35}},288:{start:{line:632,column:6},end:{line:637,column:9}},289:{start:{line:639,column:17},end:{line:639,column:45}},290:{start:{line:640,column:4},end:{line:642,column:5}},291:{start:{line:641,column:6},end:{line:641,column:29}},292:{start:{line:643,column:17},end:{line:643,column:46}},293:{start:{line:644,column:4},end:{line:667,column:5}},294:{start:{line:645,column:6},end:{line:666,column:7}},295:{start:{line:646,column:22},end:{line:646,column:37}},296:{start:{line:647,column:46},end:{line:650,column:9}},297:{start:{line:651,column:20},end:{line:651,column:24}},298:{start:{line:652,column:8},end:{line:657,column:9}},299:{start:{line:653,column:33},end:{line:653,column:63}},300:{start:{line:654,column:10},end:{line:656,column:11}},301:{start:{line:655,column:12},end:{line:655,column:26}},302:{start:{line:658,column:8},end:{line:663,column:9}},303:{start:{line:659,column:10},end:{line:662,column:13}},304:{start:{line:665,column:8},end:{line:665,column:26}},305:{start:{line:669,column:18},end:{line:674,column:3}},306:{start:{line:670,column:4},end:{line:673,column:27}},307:{start:{line:676,column:4},end:{line:681,column:27}},308:{start:{line:684,column:4},end:{line:684,column:60}},309:{start:{line:687,column:4},end:{line:687,column:34}},310:{start:{line:689,column:28},end:{line:696,column:3}},311:{start:{line:690,column:4},end:{line:695,column:7}},312:{start:{line:697,column:28},end:{line:704,column:3}},313:{start:{line:698,column:4},end:{line:703,column:7}},314:{start:{line:706,column:19},end:{line:706,column:51}},315:{start:{line:707,column:26},end:{line:707,column:92}},316:{start:{line:708,column:36},end:{line:721,column:5}},317:{start:{line:722,column:38},end:{line:736,column:5}},318:{start:{line:737,column:24},end:{line:756,column:14}},319:{start:{line:757,column:24},end:{line:767,column:14}},320:{start:{line:768,column:35},end:{line:828,column:8}},321:{start:{line:829,column:4},end:{line:839,column:6}}},fnMap:{0:{name:"setFetchAccessToken",decl:{start:{line:38,column:9},end:{line:38,column:28}},loc:{start:{line:38,column:44},end:{line:55,column:1}},line:38},1:{name:"updateRootSpec",decl:{start:{line:56,column:9},end:{line:56,column:23}},loc:{start:{line:56,column:52},end:{line:67,column:1}},line:56},2:{name:"(anonymous_2)",decl:{start:{line:72,column:2},end:{line:72,column:3}},loc:{start:{line:72,column:21},end:{line:215,column:3}},line:72},3:{name:"(anonymous_3)",decl:{start:{line:82,column:26},end:{line:82,column:27}},loc:{start:{line:82,column:40},end:{line:82,column:86}},line:82},4:{name:"(anonymous_4)",decl:{start:{line:89,column:17},end:{line:89,column:18}},loc:{start:{line:89,column:23},end:{line:91,column:9}},line:89},5:{name:"(anonymous_5)",decl:{start:{line:95,column:17},end:{line:95,column:18}},loc:{start:{line:95,column:23},end:{line:97,column:9}},line:95},6:{name:"(anonymous_6)",decl:{start:{line:101,column:17},end:{line:101,column:18}},loc:{start:{line:101,column:23},end:{line:103,column:9}},line:101},7:{name:"(anonymous_7)",decl:{start:{line:107,column:17},end:{line:107,column:18}},loc:{start:{line:107,column:23},end:{line:109,column:9}},line:107},8:{name:"(anonymous_8)",decl:{start:{line:113,column:17},end:{line:113,column:18}},loc:{start:{line:113,column:23},end:{line:115,column:9}},line:113},9:{name:"(anonymous_9)",decl:{start:{line:119,column:17},end:{line:119,column:18}},loc:{start:{line:119,column:23},end:{line:123,column:9}},line:119},10:{name:"(anonymous_10)",decl:{start:{line:127,column:17},end:{line:127,column:18}},loc:{start:{line:127,column:23},end:{line:129,column:9}},line:127},11:{name:"(anonymous_11)",decl:{start:{line:133,column:17},end:{line:133,column:18}},loc:{start:{line:133,column:23},end:{line:135,column:9}},line:133},12:{name:"(anonymous_12)",decl:{start:{line:138,column:44},end:{line:138,column:45}},loc:{start:{line:138,column:51},end:{line:151,column:5}},line:138},13:{name:"(anonymous_13)",decl:{start:{line:143,column:40},end:{line:143,column:41}},loc:{start:{line:143,column:55},end:{line:145,column:9}},line:143},14:{name:"(anonymous_14)",decl:{start:{line:155,column:29},end:{line:155,column:30}},loc:{start:{line:155,column:43},end:{line:155,column:72}},line:155},15:{name:"(anonymous_15)",decl:{start:{line:161,column:27},end:{line:161,column:28}},loc:{start:{line:161,column:36},end:{line:171,column:7}},line:161},16:{name:"(anonymous_16)",decl:{start:{line:166,column:36},end:{line:166,column:37}},loc:{start:{line:166,column:50},end:{line:166,column:102}},line:166},17:{name:"(anonymous_17)",decl:{start:{line:213,column:28},end:{line:213,column:29}},loc:{start:{line:213,column:35},end:{line:213,column:69}},line:213},18:{name:"(anonymous_18)",decl:{start:{line:216,column:19},end:{line:216,column:20}},loc:{start:{line:216,column:26},end:{line:234,column:3}},line:216},19:{name:"(anonymous_19)",decl:{start:{line:235,column:2},end:{line:235,column:3}},loc:{start:{line:235,column:22},end:{line:237,column:3}},line:235},20:{name:"(anonymous_20)",decl:{start:{line:238,column:2},end:{line:238,column:3}},loc:{start:{line:238,column:25},end:{line:240,column:3}},line:238},21:{name:"(anonymous_21)",decl:{start:{line:241,column:2},end:{line:241,column:3}},loc:{start:{line:241,column:27},end:{line:243,column:3}},line:241},22:{name:"(anonymous_22)",decl:{start:{line:244,column:2},end:{line:244,column:3}},loc:{start:{line:244,column:27},end:{line:251,column:3}},line:244},23:{name:"(anonymous_23)",decl:{start:{line:248,column:37},end:{line:248,column:38}},loc:{start:{line:248,column:48},end:{line:250,column:5}},line:248},24:{name:"(anonymous_24)",decl:{start:{line:252,column:2},end:{line:252,column:3}},loc:{start:{line:252,column:23},end:{line:256,column:3}},line:252},25:{name:"(anonymous_25)",decl:{start:{line:253,column:36},end:{line:253,column:37}},loc:{start:{line:253,column:47},end:{line:255,column:5}},line:253},26:{name:"(anonymous_26)",decl:{start:{line:257,column:29},end:{line:257,column:30}},loc:{start:{line:257,column:50},end:{line:271,column:3}},line:257},27:{name:"(anonymous_27)",decl:{start:{line:272,column:19},end:{line:272,column:20}},loc:{start:{line:272,column:44},end:{line:395,column:3}},line:272},28:{name:"(anonymous_28)",decl:{start:{line:297,column:30},end:{line:297,column:31}},loc:{start:{line:297,column:48},end:{line:305,column:7}},line:297},29:{name:"(anonymous_29)",decl:{start:{line:307,column:56},end:{line:307,column:57}},loc:{start:{line:307,column:67},end:{line:358,column:5}},line:307},30:{name:"(anonymous_30)",decl:{start:{line:362,column:21},end:{line:362,column:22}},loc:{start:{line:362,column:32},end:{line:373,column:7}},line:362},31:{name:"(anonymous_31)",decl:{start:{line:391,column:7},end:{line:391,column:8}},loc:{start:{line:391,column:13},end:{line:394,column:5}},line:391},32:{name:"(anonymous_32)",decl:{start:{line:396,column:11},end:{line:396,column:12}},loc:{start:{line:396,column:17},end:{line:403,column:3}},line:396},33:{name:"(anonymous_33)",decl:{start:{line:404,column:11},end:{line:404,column:12}},loc:{start:{line:404,column:17},end:{line:411,column:3}},line:404},34:{name:"(anonymous_34)",decl:{start:{line:412,column:16},end:{line:412,column:17}},loc:{start:{line:412,column:26},end:{line:426,column:3}},line:412},35:{name:"(anonymous_35)",decl:{start:{line:427,column:19},end:{line:427,column:20}},loc:{start:{line:427,column:38},end:{line:433,column:3}},line:427},36:{name:"(anonymous_36)",decl:{start:{line:434,column:19},end:{line:434,column:20}},loc:{start:{line:434,column:30},end:{line:439,column:3}},line:434},37:{name:"(anonymous_37)",decl:{start:{line:440,column:16},end:{line:440,column:17}},loc:{start:{line:440,column:27},end:{line:447,column:3}},line:440},38:{name:"(anonymous_38)",decl:{start:{line:448,column:28},end:{line:448,column:29}},loc:{start:{line:448,column:39},end:{line:457,column:3}},line:448},39:{name:"(anonymous_39)",decl:{start:{line:458,column:20},end:{line:458,column:21}},loc:{start:{line:458,column:46},end:{line:465,column:3}},line:458},40:{name:"(anonymous_40)",decl:{start:{line:466,column:19},end:{line:466,column:20}},loc:{start:{line:466,column:37},end:{line:470,column:3}},line:466},41:{name:"(anonymous_41)",decl:{start:{line:471,column:16},end:{line:471,column:17}},loc:{start:{line:471,column:30},end:{line:475,column:3}},line:471},42:{name:"(anonymous_42)",decl:{start:{line:476,column:21},end:{line:476,column:22}},loc:{start:{line:476,column:35},end:{line:490,column:3}},line:476},43:{name:"(anonymous_43)",decl:{start:{line:491,column:14},end:{line:491,column:15}},loc:{start:{line:491,column:40},end:{line:495,column:3}},line:491},44:{name:"(anonymous_44)",decl:{start:{line:496,column:2},end:{line:496,column:3}},loc:{start:{line:496,column:17},end:{line:545,column:3}},line:496},45:{name:"(anonymous_45)",decl:{start:{line:510,column:32},end:{line:510,column:33}},loc:{start:{line:510,column:42},end:{line:523,column:9}},line:510},46:{name:"(anonymous_46)",decl:{start:{line:525,column:59},end:{line:525,column:60}},loc:{start:{line:525,column:69},end:{line:525,column:90}},line:525},47:{name:"(anonymous_47)",decl:{start:{line:525,column:98},end:{line:525,column:99}},loc:{start:{line:525,column:107},end:{line:527,column:11}},line:525},48:{name:"(anonymous_48)",decl:{start:{line:531,column:18},end:{line:531,column:19}},loc:{start:{line:531,column:32},end:{line:531,column:47}},line:531},49:{name:"(anonymous_49)",decl:{start:{line:531,column:54},end:{line:531,column:55}},loc:{start:{line:531,column:64},end:{line:531,column:85}},line:531},50:{name:"(anonymous_50)",decl:{start:{line:531,column:93},end:{line:531,column:94}},loc:{start:{line:531,column:102},end:{line:533,column:11}},line:531},51:{name:"(anonymous_51)",decl:{start:{line:546,column:2},end:{line:546,column:3}},loc:{start:{line:546,column:17},end:{line:549,column:3}},line:546},52:{name:"(anonymous_52)",decl:{start:{line:550,column:16},end:{line:550,column:17}},loc:{start:{line:550,column:29},end:{line:554,column:3}},line:550},53:{name:"(anonymous_53)",decl:{start:{line:555,column:2},end:{line:555,column:3}},loc:{start:{line:555,column:16},end:{line:603,column:3}},line:555},54:{name:"(anonymous_54)",decl:{start:{line:559,column:27},end:{line:559,column:28}},loc:{start:{line:559,column:42},end:{line:563,column:7}},line:559},55:{name:"(anonymous_55)",decl:{start:{line:564,column:20},end:{line:564,column:21}},loc:{start:{line:564,column:27},end:{line:567,column:7}},line:564},56:{name:"(anonymous_56)",decl:{start:{line:604,column:18},end:{line:604,column:19}},loc:{start:{line:604,column:24},end:{line:622,column:3}},line:604},57:{name:"(anonymous_57)",decl:{start:{line:610,column:50},end:{line:610,column:51}},loc:{start:{line:610,column:66},end:{line:610,column:91}},line:610},58:{name:"(anonymous_58)",decl:{start:{line:610,column:100},end:{line:610,column:101}},loc:{start:{line:610,column:109},end:{line:610,column:121}},line:610},59:{name:"(anonymous_59)",decl:{start:{line:623,column:27},end:{line:623,column:28}},loc:{start:{line:623,column:41},end:{line:668,column:3}},line:623},60:{name:"(anonymous_60)",decl:{start:{line:629,column:21},end:{line:629,column:22}},loc:{start:{line:629,column:36},end:{line:631,column:7}},line:629},61:{name:"(anonymous_61)",decl:{start:{line:669,column:18},end:{line:669,column:19}},loc:{start:{line:669,column:29},end:{line:674,column:3}},line:669},62:{name:"(anonymous_62)",decl:{start:{line:675,column:2},end:{line:675,column:3}},loc:{start:{line:675,column:29},end:{line:682,column:3}},line:675},63:{name:"(anonymous_63)",decl:{start:{line:683,column:2},end:{line:683,column:3}},loc:{start:{line:683,column:25},end:{line:685,column:3}},line:683},64:{name:"(anonymous_64)",decl:{start:{line:686,column:2},end:{line:686,column:3}},loc:{start:{line:686,column:30},end:{line:688,column:3}},line:686},65:{name:"(anonymous_65)",decl:{start:{line:689,column:28},end:{line:689,column:29}},loc:{start:{line:689,column:44},end:{line:696,column:3}},line:689},66:{name:"(anonymous_66)",decl:{start:{line:697,column:28},end:{line:697,column:29}},loc:{start:{line:697,column:44},end:{line:704,column:3}},line:697},67:{name:"(anonymous_67)",decl:{start:{line:705,column:2},end:{line:705,column:3}},loc:{start:{line:705,column:11},end:{line:840,column:3}},line:705}},branchMap:{0:{loc:{start:{line:42,column:2},end:{line:54,column:3}},type:"if",locations:[{start:{line:42,column:2},end:{line:54,column:3}},{start:{line:47,column:9},end:{line:54,column:3}}],line:42},1:{loc:{start:{line:42,column:6},end:{line:42,column:43}},type:"binary-expr",locations:[{start:{line:42,column:6},end:{line:42,column:24}},{start:{line:42,column:28},end:{line:42,column:43}}],line:42},2:{loc:{start:{line:44,column:4},end:{line:46,column:5}},type:"if",locations:[{start:{line:44,column:4},end:{line:46,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:44},3:{loc:{start:{line:47,column:9},end:{line:54,column:3}},type:"if",locations:[{start:{line:47,column:9},end:{line:54,column:3}},{start:{line:52,column:9},end:{line:54,column:3}}],line:47},4:{loc:{start:{line:49,column:4},end:{line:51,column:5}},type:"if",locations:[{start:{line:49,column:4},end:{line:51,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:49},5:{loc:{start:{line:78,column:4},end:{line:80,column:5}},type:"if",locations:[{start:{line:78,column:4},end:{line:80,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:78},6:{loc:{start:{line:78,column:8},end:{line:78,column:89}},type:"binary-expr",locations:[{start:{line:78,column:8},end:{line:78,column:20}},{start:{line:78,column:25},end:{line:78,column:54}},{start:{line:78,column:58},end:{line:78,column:88}}],line:78},7:{loc:{start:{line:121,column:12},end:{line:121,column:61}},type:"cond-expr",locations:[{start:{line:121,column:44},end:{line:121,column:53}},{start:{line:121,column:56},end:{line:121,column:61}}],line:121},8:{loc:{start:{line:139,column:6},end:{line:150,column:7}},type:"if",locations:[{start:{line:139,column:6},end:{line:150,column:7}},{start:{line:142,column:13},end:{line:150,column:7}}],line:139},9:{loc:{start:{line:142,column:13},end:{line:150,column:7}},type:"if",locations:[{start:{line:142,column:13},end:{line:150,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:142},10:{loc:{start:{line:142,column:17},end:{line:142,column:88}},type:"binary-expr",locations:[{start:{line:142,column:17},end:{line:142,column:44}},{start:{line:142,column:48},end:{line:142,column:88}}],line:142},11:{loc:{start:{line:146,column:8},end:{line:149,column:9}},type:"if",locations:[{start:{line:146,column:8},end:{line:149,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:146},12:{loc:{start:{line:153,column:4},end:{line:172,column:5}},type:"if",locations:[{start:{line:153,column:4},end:{line:172,column:5}},{start:{line:157,column:11},end:{line:172,column:5}}],line:153},13:{loc:{start:{line:153,column:8},end:{line:153,column:104}},type:"binary-expr",locations:[{start:{line:153,column:8},end:{line:153,column:16}},{start:{line:153,column:20},end:{line:153,column:104}}],line:153},14:{loc:{start:{line:158,column:6},end:{line:160,column:7}},type:"if",locations:[{start:{line:158,column:6},end:{line:160,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:158},15:{loc:{start:{line:162,column:8},end:{line:165,column:9}},type:"if",locations:[{start:{line:162,column:8},end:{line:165,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:162},16:{loc:{start:{line:167,column:8},end:{line:170,column:9}},type:"if",locations:[{start:{line:167,column:8},end:{line:170,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:167},17:{loc:{start:{line:173,column:4},end:{line:176,column:5}},type:"if",locations:[{start:{line:173,column:4},end:{line:176,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:173},18:{loc:{start:{line:217,column:4},end:{line:233,column:5}},type:"if",locations:[{start:{line:217,column:4},end:{line:233,column:5}},{start:{line:225,column:11},end:{line:233,column:5}}],line:217},19:{loc:{start:{line:218,column:6},end:{line:224,column:7}},type:"if",locations:[{start:{line:218,column:6},end:{line:224,column:7}},{start:{line:221,column:13},end:{line:224,column:7}}],line:218},20:{loc:{start:{line:218,column:10},end:{line:218,column:53}},type:"binary-expr",locations:[{start:{line:218,column:10},end:{line:218,column:19}},{start:{line:218,column:23},end:{line:218,column:33}},{start:{line:218,column:37},end:{line:218,column:53}}],line:218},21:{loc:{start:{line:221,column:13},end:{line:224,column:7}},type:"if",locations:[{start:{line:221,column:13},end:{line:224,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:221},22:{loc:{start:{line:221,column:17},end:{line:221,column:46}},type:"binary-expr",locations:[{start:{line:221,column:17},end:{line:221,column:26}},{start:{line:221,column:30},end:{line:221,column:46}}],line:221},23:{loc:{start:{line:226,column:6},end:{line:232,column:7}},type:"if",locations:[{start:{line:226,column:6},end:{line:232,column:7}},{start:{line:229,column:13},end:{line:232,column:7}}],line:226},24:{loc:{start:{line:226,column:10},end:{line:226,column:39}},type:"binary-expr",locations:[{start:{line:226,column:10},end:{line:226,column:19}},{start:{line:226,column:23},end:{line:226,column:39}}],line:226},25:{loc:{start:{line:229,column:13},end:{line:232,column:7}},type:"if",locations:[{start:{line:229,column:13},end:{line:232,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:229},26:{loc:{start:{line:229,column:17},end:{line:229,column:46}},type:"binary-expr",locations:[{start:{line:229,column:17},end:{line:229,column:26}},{start:{line:229,column:30},end:{line:229,column:46}}],line:229},27:{loc:{start:{line:245,column:21},end:{line:245,column:55}},type:"binary-expr",locations:[{start:{line:245,column:21},end:{line:245,column:49}},{start:{line:245,column:53},end:{line:245,column:55}}],line:245},28:{loc:{start:{line:246,column:24},end:{line:246,column:93}},type:"binary-expr",locations:[{start:{line:246,column:24},end:{line:246,column:70}},{start:{line:246,column:74},end:{line:246,column:93}}],line:246},29:{loc:{start:{line:247,column:21},end:{line:247,column:110}},type:"cond-expr",locations:[{start:{line:247,column:55},end:{line:247,column:96}},{start:{line:247,column:99},end:{line:247,column:110}}],line:247},30:{loc:{start:{line:258,column:4},end:{line:262,column:5}},type:"if",locations:[{start:{line:258,column:4},end:{line:262,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:258},31:{loc:{start:{line:258,column:8},end:{line:258,column:123}},type:"binary-expr",locations:[{start:{line:258,column:8},end:{line:258,column:40}},{start:{line:258,column:44},end:{line:258,column:123}}],line:258},32:{loc:{start:{line:272,column:30},end:{line:272,column:39}},type:"default-arg",locations:[{start:{line:272,column:37},end:{line:272,column:39}}],line:272},33:{loc:{start:{line:279,column:4},end:{line:281,column:5}},type:"if",locations:[{start:{line:279,column:4},end:{line:281,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:279},34:{loc:{start:{line:279,column:8},end:{line:279,column:62}},type:"binary-expr",locations:[{start:{line:279,column:8},end:{line:279,column:23}},{start:{line:279,column:27},end:{line:279,column:62}}],line:279},35:{loc:{start:{line:282,column:4},end:{line:284,column:5}},type:"if",locations:[{start:{line:282,column:4},end:{line:284,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:282},36:{loc:{start:{line:282,column:8},end:{line:282,column:62}},type:"binary-expr",locations:[{start:{line:282,column:8},end:{line:282,column:23}},{start:{line:282,column:27},end:{line:282,column:62}}],line:282},37:{loc:{start:{line:286,column:6},end:{line:288,column:7}},type:"if",locations:[{start:{line:286,column:6},end:{line:288,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:286},38:{loc:{start:{line:286,column:10},end:{line:286,column:69}},type:"binary-expr",locations:[{start:{line:286,column:10},end:{line:286,column:16}},{start:{line:286,column:20},end:{line:286,column:35}},{start:{line:286,column:39},end:{line:286,column:69}}],line:286},39:{loc:{start:{line:290,column:4},end:{line:292,column:5}},type:"if",locations:[{start:{line:290,column:4},end:{line:292,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:290},40:{loc:{start:{line:293,column:19},end:{line:293,column:51}},type:"binary-expr",locations:[{start:{line:293,column:19},end:{line:293,column:45}},{start:{line:293,column:49},end:{line:293,column:51}}],line:293},41:{loc:{start:{line:295,column:4},end:{line:306,column:5}},type:"if",locations:[{start:{line:295,column:4},end:{line:306,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:295},42:{loc:{start:{line:295,column:8},end:{line:295,column:35}},type:"binary-expr",locations:[{start:{line:295,column:8},end:{line:295,column:16}},{start:{line:295,column:20},end:{line:295,column:35}}],line:295},43:{loc:{start:{line:298,column:8},end:{line:303,column:9}},type:"if",locations:[{start:{line:298,column:8},end:{line:303,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:298},44:{loc:{start:{line:298,column:12},end:{line:298,column:56}},type:"binary-expr",locations:[{start:{line:298,column:12},end:{line:298,column:27}},{start:{line:298,column:31},end:{line:298,column:56}}],line:298},45:{loc:{start:{line:309,column:6},end:{line:322,column:7}},type:"if",locations:[{start:{line:309,column:6},end:{line:322,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:309},46:{loc:{start:{line:324,column:6},end:{line:337,column:7}},type:"if",locations:[{start:{line:324,column:6},end:{line:337,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:324},47:{loc:{start:{line:339,column:6},end:{line:357,column:7}},type:"if",locations:[{start:{line:339,column:6},end:{line:357,column:7}},{start:{line:353,column:13},end:{line:357,column:7}}],line:339},48:{loc:{start:{line:341,column:20},end:{line:341,column:78}},type:"cond-expr",locations:[{start:{line:341,column:40},end:{line:341,column:67}},{start:{line:341,column:70},end:{line:341,column:78}}],line:341},49:{loc:{start:{line:341,column:20},end:{line:341,column:37}},type:"binary-expr",locations:[{start:{line:341,column:20},end:{line:341,column:25}},{start:{line:341,column:29},end:{line:341,column:37}}],line:341},50:{loc:{start:{line:360,column:4},end:{line:374,column:5}},type:"if",locations:[{start:{line:360,column:4},end:{line:374,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:360},51:{loc:{start:{line:364,column:8},end:{line:372,column:9}},type:"if",locations:[{start:{line:364,column:8},end:{line:372,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:364},52:{loc:{start:{line:375,column:4},end:{line:377,column:5}},type:"if",locations:[{start:{line:375,column:4},end:{line:377,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:375},53:{loc:{start:{line:378,column:4},end:{line:380,column:5}},type:"if",locations:[{start:{line:378,column:4},end:{line:380,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:378},54:{loc:{start:{line:381,column:4},end:{line:383,column:5}},type:"if",locations:[{start:{line:381,column:4},end:{line:383,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:381},55:{loc:{start:{line:384,column:4},end:{line:386,column:5}},type:"if",locations:[{start:{line:384,column:4},end:{line:386,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:384},56:{loc:{start:{line:417,column:4},end:{line:417,column:38}},type:"if",locations:[{start:{line:417,column:4},end:{line:417,column:38}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:417},57:{loc:{start:{line:418,column:4},end:{line:422,column:5}},type:"if",locations:[{start:{line:418,column:4},end:{line:422,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:418},58:{loc:{start:{line:452,column:26},end:{line:452,column:70}},type:"cond-expr",locations:[{start:{line:452,column:46},end:{line:452,column:65}},{start:{line:452,column:68},end:{line:452,column:70}}],line:452},59:{loc:{start:{line:453,column:31},end:{line:453,column:87}},type:"cond-expr",locations:[{start:{line:453,column:69},end:{line:453,column:78}},{start:{line:453,column:81},end:{line:453,column:87}}],line:453},60:{loc:{start:{line:477,column:21},end:{line:477,column:44}},type:"binary-expr",locations:[{start:{line:477,column:21},end:{line:477,column:38}},{start:{line:477,column:42},end:{line:477,column:44}}],line:477},61:{loc:{start:{line:478,column:4},end:{line:489,column:5}},type:"if",locations:[{start:{line:478,column:4},end:{line:489,column:5}},{start:{line:487,column:11},end:{line:489,column:5}}],line:478},62:{loc:{start:{line:499,column:6},end:{line:537,column:7}},type:"if",locations:[{start:{line:499,column:6},end:{line:537,column:7}},{start:{line:535,column:13},end:{line:537,column:7}}],line:499},63:{loc:{start:{line:499,column:10},end:{line:499,column:149}},type:"binary-expr",locations:[{start:{line:499,column:10},end:{line:499,column:72}},{start:{line:499,column:76},end:{line:499,column:97}},{start:{line:499,column:101},end:{line:499,column:149}}],line:499},64:{loc:{start:{line:511,column:10},end:{line:513,column:11}},type:"if",locations:[{start:{line:511,column:10},end:{line:513,column:11}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:511},65:{loc:{start:{line:524,column:8},end:{line:534,column:9}},type:"if",locations:[{start:{line:524,column:8},end:{line:534,column:9}},{start:{line:528,column:15},end:{line:534,column:9}}],line:524},66:{loc:{start:{line:536,column:26},end:{line:536,column:85}},type:"binary-expr",locations:[{start:{line:536,column:26},end:{line:536,column:49}},{start:{line:536,column:53},end:{line:536,column:85}}],line:536},67:{loc:{start:{line:539,column:4},end:{line:544,column:5}},type:"if",locations:[{start:{line:539,column:4},end:{line:544,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:539},68:{loc:{start:{line:547,column:21},end:{line:547,column:55}},type:"binary-expr",locations:[{start:{line:547,column:21},end:{line:547,column:49}},{start:{line:547,column:53},end:{line:547,column:55}}],line:547},69:{loc:{start:{line:548,column:11},end:{line:548,column:52}},type:"binary-expr",locations:[{start:{line:548,column:11},end:{line:548,column:40}},{start:{line:548,column:44},end:{line:548,column:52}}],line:548},70:{loc:{start:{line:558,column:16},end:{line:558,column:41}},type:"binary-expr",locations:[{start:{line:558,column:16},end:{line:558,column:29}},{start:{line:558,column:33},end:{line:558,column:41}}],line:558},71:{loc:{start:{line:571,column:4},end:{line:593,column:5}},type:"if",locations:[{start:{line:571,column:4},end:{line:593,column:5}},{start:{line:581,column:11},end:{line:593,column:5}}],line:571},72:{loc:{start:{line:595,column:4},end:{line:597,column:5}},type:"if",locations:[{start:{line:595,column:4},end:{line:597,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:595},73:{loc:{start:{line:599,column:4},end:{line:601,column:5}},type:"if",locations:[{start:{line:599,column:4},end:{line:601,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:599},74:{loc:{start:{line:610,column:66},end:{line:610,column:91}},type:"cond-expr",locations:[{start:{line:610,column:81},end:{line:610,column:84}},{start:{line:610,column:87},end:{line:610,column:91}}],line:610},75:{loc:{start:{line:611,column:4},end:{line:615,column:5}},type:"if",locations:[{start:{line:611,column:4},end:{line:615,column:5}},{start:{line:613,column:11},end:{line:615,column:5}}],line:611},76:{loc:{start:{line:616,column:4},end:{line:620,column:5}},type:"if",locations:[{start:{line:616,column:4},end:{line:620,column:5}},{start:{line:618,column:11},end:{line:620,column:5}}],line:616},77:{loc:{start:{line:618,column:11},end:{line:620,column:5}},type:"if",locations:[{start:{line:618,column:11},end:{line:620,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:618},78:{loc:{start:{line:626,column:4},end:{line:638,column:5}},type:"if",locations:[{start:{line:626,column:4},end:{line:638,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:626},79:{loc:{start:{line:626,column:8},end:{line:626,column:39}},type:"binary-expr",locations:[{start:{line:626,column:8},end:{line:626,column:18}},{start:{line:626,column:22},end:{line:626,column:39}}],line:626},80:{loc:{start:{line:640,column:4},end:{line:642,column:5}},type:"if",locations:[{start:{line:640,column:4},end:{line:642,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:640},81:{loc:{start:{line:640,column:8},end:{line:640,column:27}},type:"binary-expr",locations:[{start:{line:640,column:8},end:{line:640,column:12}},{start:{line:640,column:16},end:{line:640,column:27}}],line:640},82:{loc:{start:{line:644,column:4},end:{line:667,column:5}},type:"if",locations:[{start:{line:644,column:4},end:{line:667,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:644},83:{loc:{start:{line:652,column:8},end:{line:657,column:9}},type:"if",locations:[{start:{line:652,column:8},end:{line:657,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:652},84:{loc:{start:{line:654,column:10},end:{line:656,column:11}},type:"if",locations:[{start:{line:654,column:10},end:{line:656,column:11}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:654},85:{loc:{start:{line:658,column:8},end:{line:663,column:9}},type:"if",locations:[{start:{line:658,column:8},end:{line:663,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:658},86:{loc:{start:{line:706,column:19},end:{line:706,column:51}},type:"binary-expr",locations:[{start:{line:706,column:19},end:{line:706,column:45}},{start:{line:706,column:49},end:{line:706,column:51}}],line:706},87:{loc:{start:{line:707,column:26},end:{line:707,column:92}},type:"cond-expr",locations:[{start:{line:707,column:46},end:{line:707,column:83}},{start:{line:707,column:86},end:{line:707,column:92}}],line:707},88:{loc:{start:{line:737,column:24},end:{line:756,column:14}},type:"cond-expr",locations:[{start:{line:737,column:56},end:{line:756,column:5}},{start:{line:756,column:8},end:{line:756,column:14}}],line:737},89:{loc:{start:{line:757,column:24},end:{line:767,column:14}},type:"cond-expr",locations:[{start:{line:757,column:97},end:{line:767,column:5}},{start:{line:767,column:8},end:{line:767,column:14}}],line:757}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0,87:0,88:0,89:0,90:0,91:0,92:0,93:0,94:0,95:0,96:0,97:0,98:0,99:0,100:0,101:0,102:0,103:0,104:0,105:0,106:0,107:0,108:0,109:0,110:0,111:0,112:0,113:0,114:0,115:0,116:0,117:0,118:0,119:0,120:0,121:0,122:0,123:0,124:0,125:0,126:0,127:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:0,136:0,137:0,138:0,139:0,140:0,141:0,142:0,143:0,144:0,145:0,146:0,147:0,148:0,149:0,150:0,151:0,152:0,153:0,154:0,155:0,156:0,157:0,158:0,159:0,160:0,161:0,162:0,163:0,164:0,165:0,166:0,167:0,168:0,169:0,170:0,171:0,172:0,173:0,174:0,175:0,176:0,177:0,178:0,179:0,180:0,181:0,182:0,183:0,184:0,185:0,186:0,187:0,188:0,189:0,190:0,191:0,192:0,193:0,194:0,195:0,196:0,197:0,198:0,199:0,200:0,201:0,202:0,203:0,204:0,205:0,206:0,207:0,208:0,209:0,210:0,211:0,212:0,213:0,214:0,215:0,216:0,217:0,218:0,219:0,220:0,221:0,222:0,223:0,224:0,225:0,226:0,227:0,228:0,229:0,230:0,231:0,232:0,233:0,234:0,235:0,236:0,237:0,238:0,239:0,240:0,241:0,242:0,243:0,244:0,245:0,246:0,247:0,248:0,249:0,250:0,251:0,252:0,253:0,254:0,255:0,256:0,257:0,258:0,259:0,260:0,261:0,262:0,263:0,264:0,265:0,266:0,267:0,268:0,269:0,270:0,271:0,272:0,273:0,274:0,275:0,276:0,277:0,278:0,279:0,280:0,281:0,282:0,283:0,284:0,285:0,286:0,287:0,288:0,289:0,290:0,291:0,292:0,293:0,294:0,295:0,296:0,297:0,298:0,299:0,300:0,301:0,302:0,303:0,304:0,305:0,306:0,307:0,308:0,309:0,310:0,311:0,312:0,313:0,314:0,315:0,316:0,317:0,318:0,319:0,320:0,321:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0],26:[0,0],27:[0,0],28:[0,0],29:[0,0],30:[0,0],31:[0,0],32:[0],33:[0,0],34:[0,0],35:[0,0],36:[0,0],37:[0,0],38:[0,0,0],39:[0,0],40:[0,0],41:[0,0],42:[0,0],43:[0,0],44:[0,0],45:[0,0],46:[0,0],47:[0,0],48:[0,0],49:[0,0],50:[0,0],51:[0,0],52:[0,0],53:[0,0],54:[0,0],55:[0,0],56:[0,0],57:[0,0],58:[0,0],59:[0,0],60:[0,0],61:[0,0],62:[0,0],63:[0,0,0],64:[0,0],65:[0,0],66:[0,0],67:[0,0],68:[0,0],69:[0,0],70:[0,0],71:[0,0],72:[0,0],73:[0,0],74:[0,0],75:[0,0],76:[0,0],77:[0,0],78:[0,0],79:[0,0],80:[0,0],81:[0,0],82:[0,0],83:[0,0],84:[0,0],85:[0,0],86:[0,0],87:[0,0],88:[0,0],89:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/App.tsx"],names:["shortcut","mapStyle"],mappings:"AA+uBmB,SAAA,KAkNA,YAlNA;AA9uBnB,OAAO,cAAc;AACrB,OAAO,WAAW;AAClB,OAAO,eAAe;AACtB,OAAO,WAAW;AAClB,OAAO,YAAY;AACnB,OAAO,SAAS;AAChB,SAAQ,aAAY;AACpB,SAAQ,wBAAuB;AAC/B,OAAO,UAAU;AACjB,SAAS,eAAe;AAExB,SAAQ,QAAQ,wBAAuB;AAEvC,OAAO,mBAAmB;AAC1B,OAAO,mBAAmB;AAC1B,OAAO,eAAe;AACtB,OAAO,iBAAiB;AACxB,OAAO,gBAA8B;AACrC,OAAO,eAAe;AACtB,OAAO,kBAAkB;AAEzB,OAAO,mBAAmB;AAC1B,OAAO,iBAAiB;AACxB,OAAO,kBAAkB;AACzB,OAAO,eAAe;AACtB,OAAO,oBAAoB;AAC3B,OAAO,gBAAgB;AAEvB,SAAQ,wBAAwB,8BAA6B;AAC7D,OAAO,WAAW;AAClB,SAAS,iBAAiB,cAAc,8BAA8B;AACtE,SAAS,cAAc,oBAAoB;AAC3C,SAAS,kBAAkB;AAC3B,SAAS,qBAAqB;AAC9B,SAAS,qBAAqB;AAC9B,OAAO,kBAAkB;AACzB,OAAO,YAAY;AACnB,OAAO,aAAa;AACpB,OAAO,WAAW;AAKlB,OAAO,SAAS,OAAO;AAEvB,SAAS,oBAAoB,KAAa,UAA8B;AAChE,QAAA,qBAAqB,IAAI,MAAM,oBAAoB;AACnD,QAAA,kBAAkB,IAAI,MAAM,iBAAiB;AAC7C,QAAA,uBAAuB,IAAI,MAAM,sBAAsB;AAC7D,MAAI,sBAAsB,iBAAiB;AACnC,UAAA,cAAc,MAAM,eAAe,gBAAgB,UAAU,EAAC,eAAe,KAAI,CAAC;AACxF,QAAI,aAAa;AACR,aAAA,IAAI,QAAQ,SAAS,WAAW;AAAA,IACzC;AAAA,EACF,WACS,sBAAsB;AACvB,UAAA,cAAc,MAAM,eAAe,iBAAiB,UAAU,EAAC,eAAe,KAAI,CAAC;AACzF,QAAI,aAAa;AACR,aAAA,IAAI,QAAQ,SAAS,WAAW;AAAA,IACzC;AAAA,EACF,OACK;AACI,WAAA;AAAA,EACT;AACF;AAEA,SAAS,eAAe,MAAW,WAAmB,WAAgB;AAC7D,SAAA;AAAA,IACL,GAAG;AAAA,IACH,OAAO;AAAA,MACL,GAAG,KAAK;AAAA,MACR,CAAC,SAAS,GAAG;AAAA,QACX,GAAG,KAAK,MAAM,SAAS;AAAA,QACvB,QAAQ;AAAA,MACV;AAAA,IACF;AAAA,EACF;AACF;AAyDA,qBAAqB,YAAY,MAAM,UAAyB;AAAA,EAC9D;AAAA,EACA;AAAA,EACA;AAAA,EAEA,YAAY,OAAY;AACtB,UAAM,KAAK;AACX,aAAS,IAAI;AAER,SAAA,gBAAgB,IAAI,cAAc;AACjC,UAAA,SAAS,IAAI,gBAAgB,OAAO,SAAS,OAAO,UAAU,CAAC,CAAC;AAClE,QAAA,OAAO,OAAO,IAAI,WAAW;AAC7B,QAAA,QAAQ,SAAS,OAAO,SAAS,SAAS,QAAQ,OAAO,SAAS,SAAS,QAAQ;AACrF,aAAO,OAAO,SAAS;AAAA,IACzB;AACK,SAAA,aAAa,IAAI,cAAc;AAAA,MAClC,oBAAoB,cAAY,KAAK,eAAe,UAAU,EAAC,MAAM,MAAK,CAAC;AAAA,MAC3E;AAAA,MACA,MAAM,OAAO,IAAI,WAAW;AAAA,IAC9B,CAAC;AAGD,UAAM,YAAY;AAAA,MAChB;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,WAAW;AAAA,QAC9B;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,MAAM;AAAA,QACzB;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,QAAQ;AAAA,QAC3B;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,SAAS;AAAA,QAC5B;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,UAAU;AAAA,QAC7B;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACR,eAAA;AAAA,YACH,KAAK,MAAM,aAAa,QAAQ,YAAY;AAAA,UAC9C;AAAA,QACF;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACZ,mBAAS,cAAc,oBAAoB,EAAwB,MAAM;AAAA,QAC5E;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,OAAO;AAAA,QAC1B;AAAA,MACF;AAAA,IACF;AAEA,aAAS,KAAK,iBAAiB,SAAS,CAAC,MAAM;AAC1C,UAAA,EAAE,QAAQ,UAAU;AACpB,UAAE,OAAuB,KAAK;AAC/B,iBAAS,KAAK,MAAM;AAAA,MACtB,WACQ,KAAK,MAAM,OAAO,aAAa,SAAS,kBAAkB,SAAS,MAAM;AAC/E,cAAM,WAAW,UAAU,KAAK,CAACA,cAAa;AACpCA,iBAAAA,UAAS,QAAQ,EAAE;AAAA,QAC7B,CAAC;AAED,YAAG,UAAU;AACN,eAAA,SAAS,aAAa,KAAK;AAChC,mBAAS,QAAQ;AAAA,QACnB;AAAA,MACF;AAAA,IACF,CAAC;AAED,UAAM,WAAW,gBAAgB;AACjC,QAAG,YAAY,OAAO,QAAQ,0BAA0B,WAAW,+BAA+B,GAAG;AAC9F,WAAA,aAAa,IAAI,WAAW;AACjC,mBAAa,UAAU,CAAA,aAAY,KAAK,eAAe,QAAQ,CAAC;AACzC,6BAAA;AAAA,IACzB,OAAO;AACL,UAAG,UAAU;AACY,+BAAA;AAAA,MACzB;AACK,WAAA,WAAW,KAAK,CAAO,QAAA;AAC1B,YAAG,KAAK;AACN,kBAAQ,IAAI,kDAAkD;AACzD,eAAA,aAAa,IAAI,WAAW;AAAA,QACnC;AACK,aAAA,WAAW,YAAY,CAAA,aAAY,KAAK,eAAe,UAAU,EAAC,aAAa,KAAI,CAAC,CAAC;AAEvF,YAAA,MAAM,QAAQ,GAAG;AAClB,gBAAM,IAAI,YAAY,cAAc,KAAK,UAAU;AACnD,gBAAM,IAAI,YAAY,iBAAiB,KAAK,aAAa;AAAA,QAC3D;AAAA,MACF,CAAC;AAAA,IACH;AAEG,QAAA,MAAM,QAAQ,GAAG;AAClB,YAAM,IAAI,YAAY,iBAAiB,KAAK,aAAa;AACzD,YAAM,IAAI,YAAY,cAAc,KAAK,UAAU;AAAA,IACrD;AAEA,SAAK,QAAQ;AAAA,MACX,QAAQ,CAAC;AAAA,MACT,OAAO,CAAC;AAAA,MACR,UAAU,MAAM;AAAA,MAChB,oBAAoB;AAAA,MACpB,SAAS,CAAC;AAAA,MACV,cAAc,CAAC;AAAA,MACf,UAAU;AAAA,MACV,MAAM;AAAA,MACN,SAAS;AAAA,QACP,MAAM;AAAA,QACN,QAAQ;AAAA,UACN,KAAK;AAAA,UACL,KAAK;AAAA,QACP;AAAA,MACF;AAAA,MACA,QAAQ;AAAA,QACN,UAAU;AAAA,QACV,SAAS;AAAA,QACT,MAAM;AAAA,QACN,WAAW;AAAA,QACX,QAAQ;AAAA;AAAA,QAER,OAAO;AAAA,MACT;AAAA,MACA,wBAAwB;AAAA,QACtB,oBAAoB;AAAA,QACpB,oBAAoB;AAAA,QACpB,uBAAuB;AAAA,MACzB;AAAA,MACA,wBAAwB;AAAA,QACtB,cAAc;AAAA,MAChB;AAAA,MACA,YAAY;AAAA,IACd;AAEK,SAAA,eAAe,IAAI,aAAa;AAAA,MACnC,sBAAsB,CAAK,MAAA,KAAK,SAAS,EAAE,cAAc,EAAE,CAAC;AAAA,IAC9D,CAAC;AAAA,EACH;AAAA,EAEA,iBAAiB,CAAC,MAAqB;AACrC,QAAG,UAAU,SAAS,YAAY,EAAE,QAAQ,KAAK,KAAK,GAAG;AACvD,UAAG,EAAE,WAAW,EAAE,YAAY,EAAE,YAAY,IAAI;AAC9C,UAAE,eAAe;AACjB,aAAK,OAAO;AAAA,MACd,WACQ,EAAE,WAAW,EAAE,YAAY,IAAI;AACrC,UAAE,eAAe;AACjB,aAAK,OAAO;AAAA,MACd;AAAA,IACF,OACK;AACH,UAAG,EAAE,WAAW,EAAE,YAAY,IAAI;AAChC,UAAE,eAAe;AACjB,aAAK,OAAO;AAAA,MACd,WACQ,EAAE,WAAW,EAAE,YAAY,IAAI;AACrC,UAAE,eAAe;AACjB,aAAK,OAAO;AAAA,MACd;AAAA,IACF;AAAA,EACF;AAAA,EAEA,oBAAoB;AACX,WAAA,iBAAiB,WAAW,KAAK,cAAc;AAAA,EACxD;AAAA,EAEA,uBAAuB;AACd,WAAA,oBAAoB,WAAW,KAAK,cAAc;AAAA,EAC3D;AAAA,EAEA,UAAU,eAAkD;AACrD,SAAA,WAAW,KAAK,aAAa;AAAA,EACpC;AAAA,EAEA,YAAY,aAAqB;AAC/B,UAAM,WAAoC,KAAK,MAAM,SAAS,YAAY,CAAC;AAC3E,UAAM,cAAc,SAAS,oCAAoC,KAAK,OAAO;AAEvE,UAAA,WAAY,OAAO,gBAAgB,WAAW,YAAY,QAAQ,SAAS,WAAW,IAAG;AAC/F,2BAAuB,UAAU,CAAS,UAAA;AACnC,WAAA,SAAS,EAAE,MAAM,eAAe,KAAK,MAAM,MAAM,UAAU,KAAK,EAAC,CAAC;AAAA,IACzE,CAAC;AAAA,EACH;AAAA,EAEA,YAAY,SAAiB;AAC3B,2BAAuB,SAAS,CAAS,UAAA;AAClC,WAAA,SAAS,EAAE,MAAM,eAAe,KAAK,MAAM,MAAM,UAAU,KAAK,EAAC,CAAC;AAAA,IACzE,CAAC;AAAA,EACH;AAAA,EAEA,2BAA2B,CAAC,UAAkB,UAAe;AAE3D,QACE,aAAa,uBACb,UAAU,IAAI,KAAK,MAAM,UAAU,CAAC,YAAY,mBAAmB,GAAG,QAAQ,GAC9E;AACA,WAAK,SAAS;AAAA,QACZ,UAAU;AAAA,MACZ,CAAC;AAAA,IACH;AAEA,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,UAAU;AAAA,QACR,GAAI,KAAK,MAAM,SAAiB;AAAA,QAChC,CAAC,QAAQ,GAAG;AAAA,MACd;AAAA,IACF;AAEA,SAAK,eAAe,YAAY;AAAA,EAClC;AAAA,EAEA,iBAAiB,CAAC,UAA6C,OAAyB,CAAC,MAAM;AACtF,WAAA;AAAA,MACL,MAAM;AAAA,MACN,aAAa;AAAA,MACb,aAAa;AAAA,MACb,GAAG;AAAA,IACL;AAKA,QAAI,SAAS,UAAU,OAAO,SAAS,WAAW,UAAU;AAC1D,eAAS,SAAS,oBAAoB,SAAS,QAAQ,QAAQ;AAAA,IACjE;AAEA,QAAI,SAAS,UAAU,OAAO,SAAS,WAAW,UAAU;AAC1D,eAAS,SAAS,oBAAoB,SAAS,QAAQ,QAAQ;AAAA,IACjE;AAEW,eAAA,CAAC,WAAW,MAAM,KAAK,OAAO,QAAQ,SAAS,OAAO,GAAG;AAClE,UAAI,UAAU,SAAS,UAAU,OAAO,OAAO,QAAQ,UAAU;AAC/D,eAAO,MAAM,oBAAoB,OAAO,KAAK,QAAQ;AAAA,MACvD;AAAA,IACF;AAGA,QAAI,KAAK,aAAa;AACpB,WAAK,uBAAuB,QAAQ;AAAA,IACtC;AAEA,UAAM,SAA4B,iBAAiB,QAAQ,KAAK,CAAC;AAIjE,UAAM,cAA2C,CAAC;AAC9C,QAAA,YAAY,SAAS,QAAQ;AACzB,YAAA,cAAc,IAAI,OAAO,IAAI;AACnC,eAAS,OAAO,QAAQ,CAAC,OAAO,UAAU;AACxC,YAAI,MAAM,OAAO,MAAM,YAAY,IAAI,MAAM,EAAE,GAAG;AAChD,gBAAM,QAAQ,IAAI;AAAA,YAChB,UAAU,KAAK;AAAA,UACjB;AACA,sBAAY,KAAK,KAAK;AAAA,QACxB;AACY,oBAAA,IAAI,MAAM,IAAI,IAAI;AAAA,MAChC,CAAC;AAAA,IACH;AAEA,UAAM,eAAe,YAAY,OAAO,MAAM,EAAE,IAAI,CAAS,UAAA;AAE3D,YAAM,WAAW,MAAM,QAAQ,MAAM,iEAAiE;AACtG,UAAI,UAAU;AACZ,cAAM,CAAC,EAAE,OAAO,OAAO,IAAI;AACpB,eAAA;AAAA,UACL,SAAS,MAAM;AAAA,UACf,QAAQ;AAAA,YACN,MAAM;AAAA,YACN,MAAM;AAAA,cACJ,OAAO,SAAS,OAAO,EAAE;AAAA,cACzB,KAAK;AAAA,cACL;AAAA,YACF;AAAA,UACF;AAAA,QACF;AAAA,MACF;AAGA,YAAM,qBAAqB,MAAM,QAAQ,MAAM,8CAA8C;AAC7F,UAAI,oBAAoB;AACtB,cAAM,CAAC,EAAE,OAAO,OAAO,IAAI;AACpB,eAAA;AAAA,UACL,SAAS,MAAM;AAAA,UACf,QAAQ;AAAA,YACN,MAAM;AAAA,YACN,MAAM;AAAA,cACJ,OAAO,SAAS,OAAO,EAAE;AAAA,cACzB,KAAK;AAAA,cACL;AAAA,YACF;AAAA,UACF;AAAA,QACF;AAAA,MACF;AAEA,YAAM,aAAa,MAAM,QAAQ,MAAM,0CAA0C;AACjF,UAAI,YAAY;AACd,cAAM,CAAC,EAAE,OAAO,OAAO,UAAU,OAAO,IAAI;AACtC,cAAA,MAAO,SAAS,WAAY,CAAC,OAAO,QAAQ,EAAE,KAAK,GAAG,IAAI;AACzD,eAAA;AAAA,UACL,SAAS,MAAM;AAAA,UACf,QAAQ;AAAA,YACN,MAAM;AAAA,YACN,MAAM;AAAA,cACJ,OAAO,SAAS,OAAO,EAAE;AAAA,cACzB;AAAA,cACA;AAAA,YACF;AAAA,UACF;AAAA,QACF;AAAA,MACF,OACK;AACI,eAAA;AAAA,UACL,SAAS,MAAM;AAAA,QACjB;AAAA,MACF;AAAA,IACF,CAAC;AAED,QAAI,gBAAgD;AAChD,QAAA,OAAO,SAAS,GAAG;AACrB,sBAAgB,UAAU,QAAQ;AAElC,aAAO,QAAQ,CAAS,UAAA;AAChB,cAAA,EAAC,QAAO,IAAI;AAClB,YAAI,SAAS;AACP,cAAA;AACF,kBAAM,UAAU,QAAQ,MAAM,GAAG,EAAE,CAAC;AAEpC,kBAAM,YAAY,QAAQ,MAAM,qBAAqB,EAAG,CAAC;AACzD,kBAAM,eAAe,SAAS;AAAA,UAChC,SACO,KAAK;AACV,oBAAQ,KAAK,GAAG;AAAA,UAClB;AAAA,QACF;AAAA,MACF,CAAC;AAAA,IACH;AAEA,QAAG,SAAS,WAAW,KAAK,MAAM,SAAS,QAAQ;AAC5C,WAAA,YAAY,SAAS,MAAgB;AAAA,IAC5C;AACA,QAAG,SAAS,WAAW,KAAK,MAAM,SAAS,QAAQ;AAC5C,WAAA,YAAY,SAAS,MAAgB;AAAA,IAC5C;AAEA,QAAI,KAAK,aAAa;AACf,WAAA,cAAc,YAAY,QAAQ;AAAA,IACzC;AACA,QAAI,KAAK,MAAM;AACb,WAAK,UAAU,QAA6C;AAAA,IAC9D;AAEA,SAAK,SAAS;AAAA,MACZ,UAAU;AAAA,MACV;AAAA,MACA,QAAQ;AAAA,IACV,GAAG,MAAM;AACP,WAAK,aAAa;AAClB,WAAK,cAAc;AAAA,IACrB,CAAC;AAAA,EAEH;AAAA,EAEA,SAAS,MAAM;AACP,UAAA,cAAc,KAAK,cAAc,KAAK;AAE5C,UAAM,WAAW,aAAa,KAAK,MAAM,UAAU,WAAW;AAC9D,SAAK,eAAe,aAAa,EAAC,aAAa,MAAK,CAAC;AACrD,SAAK,SAAS;AAAA,MACZ,OAAO;AAAA,IACT,CAAC;AAAA,EACH;AAAA,EAEA,SAAS,MAAM;AACP,UAAA,cAAc,KAAK,cAAc,KAAK;AAC5C,UAAM,WAAW,aAAa,KAAK,MAAM,UAAU,WAAW;AAC9D,SAAK,eAAe,aAAa,EAAC,aAAa,MAAK,CAAC;AACrD,SAAK,SAAS;AAAA,MACZ,OAAO;AAAA,IACT,CAAC;AAAA,EACH;AAAA,EAEA,cAAc,CAAC,SAAkB;AAC3B,QAAA,EAAE,UAAU,SAAS,IAAI;AACzB,QAAA,SAAS,KAAK,MAAM,SAAS;AACjC,eAAW,MAAM,UAAU,GAAG,OAAO,SAAO,CAAC;AAC7C,eAAW,MAAM,UAAU,GAAG,OAAO,SAAO,CAAC;AAC7C,QAAG,aAAa,SAAU;AAEtB,QAAA,aAAa,KAAK,MAAM,oBAAoB;AAC9C,WAAK,SAAS;AAAA,QACZ,oBAAoB;AAAA,MACtB,CAAC;AAAA,IACH;AAES,aAAA,OAAO,MAAM,CAAC;AACN,qBAAA,QAAQ,UAAU,QAAQ;AAC3C,SAAK,eAAe,MAAM;AAAA,EAC5B;AAAA,EAEA,iBAAiB,CAAC,kBAAwC;AACxD,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,QAAQ;AAAA,IACV;AACA,SAAK,eAAe,YAAY;AAAA,EAClC;AAAA,EAEA,iBAAiB,CAAC,UAAkB;AAC5B,UAAA,SAAS,KAAK,MAAM,SAAS;AAC7B,UAAA,kBAAkB,OAAO,MAAM,CAAC;AACtB,oBAAA,OAAO,OAAO,CAAC;AAC/B,SAAK,eAAe,eAAe;AAAA,EACrC;AAAA,EAEA,cAAc,CAAC,UAAkB;AACzB,UAAA,SAAS,KAAK,MAAM,SAAS;AAC7B,UAAA,gBAAgB,OAAO,MAAM,CAAC;AAEpC,UAAM,cAAc,UAAU,cAAc,KAAK,CAAC;AACtC,gBAAA,KAAK,YAAY,KAAK;AACpB,kBAAA,OAAO,OAAO,GAAG,WAAW;AAC1C,SAAK,eAAe,aAAa;AAAA,EACnC;AAAA,EAEA,0BAA0B,CAAC,UAAkB;AACrC,UAAA,SAAS,KAAK,MAAM,SAAS;AAC7B,UAAA,gBAAgB,OAAO,MAAM,CAAC;AAEpC,UAAM,QAAQ,EAAE,GAAG,cAAc,KAAK,EAAE;AAClC,UAAA,gBAAgB,YAAY,QAAQ,EAAC,GAAG,MAAM,OAAM,IAAI,CAAC;AAC/D,kBAAc,aAAa,cAAc,eAAe,SAAS,YAAY;AAE7E,UAAM,SAAS;AACf,kBAAc,KAAK,IAAI;AACvB,SAAK,eAAe,aAAa;AAAA,EACnC;AAAA,EAGA,kBAAkB,CAAC,OAAe,QAAgB,UAAkB;AAClE,UAAM,gBAAgB,KAAK,MAAM,SAAS,OAAO,MAAM,CAAC;AACxD,kBAAc,KAAK,IAAI;AAAA,MACrB,GAAG,cAAc,KAAK;AAAA,MACtB,IAAI;AAAA,IACN;AAEA,SAAK,eAAe,aAAa;AAAA,EACnC;AAAA,EAEA,iBAAiB,CAAC,OAAe,UAA8B;AAC7D,UAAM,gBAAgB,KAAK,MAAM,SAAS,OAAO,MAAM,CAAC;AACxD,kBAAc,KAAK,IAAI;AAEvB,SAAK,eAAe,aAAa;AAAA,EACnC;AAAA,EAEA,cAAc,CAAC,aAAuB;AACpC,SAAK,SAAS;AAAA,MACZ,UAAU;AAAA,IACZ,GAAG,KAAK,aAAa;AAAA,EACvB;AAAA,EAEA,mBAAmB,CAAC,aAAgD;AAC5D,UAAA,WAAoC,SAAS,YAAY,CAAC;AAC7D,QAAA,SAAS,mBAAmB,MAAM,QAAW;AAC9C,YAAM,eAAe;AAAA,QACnB,GAAG;AAAA,QACH,UAAU;AAAA,UACR,GAAG,SAAS;AAAA,UACZ,qBAAqB;AAAA,QACvB;AAAA,MACF;AACO,aAAA;AAAA,IACT,OAAO;AACE,aAAA;AAAA,IACT;AAAA,EACF;AAAA,EAEA,YAAY,CAAC,UAA6C,eAA4C;AAC/F,SAAA,SAAS,EAAC,WAAsB,CAAC;AAC3B,eAAA,KAAK,iBAAiB,QAAQ;AACzC,SAAK,eAAe,QAAQ;AAAA,EAC9B;AAAA,EAEA,eAAe;AACb,UAAM,aAAmC,CAAC;AAEhC,eAAA,CAAC,KAAK,GAAG,KAAK,OAAO,QAAQ,KAAK,MAAM,SAAS,OAAO,GAAG;AACnE,UACE,CAAC,OAAO,UAAU,eAAe,KAAK,KAAK,MAAM,SAAS,GAAG,KAC7D,IAAI,SAAS,YACb,OAAO,UAAU,eAAe,KAAK,KAAK,KAAK,GAC/C;AACA,mBAAW,GAAG,IAAI;AAAA,UAChB,MAAM,IAAI;AAAA,UACV,QAAQ,CAAC;AAAA,QACX;AAEA,YAAI,MAAM,IAAI;AAEV,YAAA;AACF,gBAAM,oBAAoB,KAAM,KAAK,MAAM,QAAQ;AAAA,QACrD,SAAQ,KAAK;AACH,kBAAA,KAAK,mCAAmC,GAAG;AAAA,QACrD;AAEM,cAAA,kBAAkB,CAAC,SAAa;AACpC,cAAG,CAAC,OAAO,UAAU,eAAe,KAAK,MAAM,eAAe,GAAG;AAC/D;AAAA,UACF;AAGA,gBAAM,UAAU,OAAO,OAAO,CAAC,GAAG;AAAA,YAChC,CAAC,GAAG,GAAG,KAAK,MAAM,QAAQ,GAAG;AAAA,UAC/B,CAAC;AAES,qBAAA,SAAS,KAAK,eAAe;AACpC,oBAAQ,GAAG,EAAU,OAAO,KAAK,MAAM,EAAE;AAAA,UAC5C;AAEA,eAAK,SAAS;AAAA,YACZ;AAAA,UACF,CAAC;AAAA,QACH;AAEI,YAAA,IAAK,WAAW,YAAY,GAAG;AAChC,cAAI,QAAQ,IAAK,OAAO,EAAE,CAAC,EAAG,YAAY,EAAE,EAC1C,KAAK,CAAQ,SAAA,gBAAgB,IAAI,CAAC,EAClC,MAAM,CAAO,QAAA;AACJ,oBAAA,MAAM,sCAAsC,KAAK,GAAG;AAAA,UAC9D,CAAC;AAAA,QACL,OAAO;AACL,gBAAM,KAAM;AAAA,YACV,MAAM;AAAA,UACR,CAAC,EACE,KAAK,CAAA,aAAY,SAAS,KAAK,CAAC,EAChC,KAAK,UAAQ,gBAAgB,IAAI,CAAC,EAClC,MAAM,CAAO,QAAA;AACJ,oBAAA,MAAM,sCAAsC,KAAK,GAAG;AAAA,UAC9D,CAAC;AAAA,QACL;AAAA,MACF,OACK;AACQ,mBAAA,GAAG,IAAI,KAAK,MAAM,QAAQ,GAAG,KAAK,KAAK,MAAM,SAAS,QAAQ,GAAG;AAAA,MAC9E;AAAA,IACF;AAEA,QAAG,CAAC,QAAQ,KAAK,MAAM,SAAS,UAAU,GAAG;AAC3C,cAAQ,MAAM,iBAAiB;AAC/B,WAAK,SAAS;AAAA,QACZ,SAAS;AAAA,MACX,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,eAAgB;AACd,UAAM,WAAmC,KAAK,MAAM,SAAS,YAAY,CAAC;AACnE,WAAA,SAAS,mBAAmB,KAAK;AAAA,EAC1C;AAAA,EAEA,cAAc,CAAC,YAMT;AACJ,SAAK,SAAS;AAAA,MACZ;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,cAAc;AACZ,UAAM,EAAC,UAAU,cAAa,IAAI,KAAK;AAEvC,UAAM,WAAW;AAAA,MACf,UAAW,iBAAiB;AAAA,MAC5B,qBAAqB,CAACC,cAAiC;AAC9C,eAAA,MAAM,oBAAoBA,WAAU;AAAA,UACzC,eAAe;AAAA,QACjB,CAAC;AAAA,MACH;AAAA,MACA,cAAc,CAAC,MAAkB;AAC1B,aAAA,aAAa,WAAW,EAAE,GAAG;AAClC,aAAK,aAAa;AAAA,MACpB;AAAA,IACF;AAEM,UAAA,WAAW,KAAK,aAAa;AAE/B,QAAA;AAGJ,QAAG,aAAa,MAAM;AACP,mBAAA;AAAA,QAAC;AAAA,QAAA;AAAA,UACX,GAAG;AAAA,UACJ,UAAU,KAAK;AAAA,UACf,cAAc,KAAK,MAAM,uBAAuB;AAAA,UAChD,eAAe,KAAK;AAAA,QAAA;AAAA,MACtB;AAAA,IACF,OAAO;AAEQ,mBAAA;AAAA,QAAC;AAAA,QAAA;AAAA,UAAe,GAAG;AAAA,UAC9B,UAAU,KAAK;AAAA,UACf,SAAS,KAAK,MAAM;AAAA,UACpB,oBAAoB,KAAK,MAAM,aAAa;AAAA,UAC5C,kBAAkB,KAAK,MAAM,SAAS,OAAO,KAAK,MAAM,kBAAkB;AAAA,UAC1E,eAAe,KAAK;AAAA,QAAA;AAAA,MAAe;AAAA,IACvC;AAEI,QAAA;AACJ,QAAG,KAAK,MAAM,SAAS,MAAM,UAAU,GAAG;AACxC,mBAAa,KAAK,MAAM,SAAS,QAAQ,YAAY,EAAE;AAAA,IACzD;AACA,UAAM,eAAkC,CAAC;AACzC,QAAI,YAAY;AACD,mBAAA,SAAS,SAAS,UAAU;AAAA,IAC3C;AAEO,WAAA,oBAAC,SAAI,OAAO,cAAc,WAAU,2BAA0B,eAAY,sBAC9E,UACH,WAAA,CAAA;AAAA,EACF;AAAA,EAEA,gBAAgB,MAAM;AACpB,UAAM,EAAC,UAAU,UAAU,OAAM,IAAI,KAAK;AACpC,UAAA,EAAC,mBAAkB,IAAI,KAAK;AAClC,UAAM,MAAM,IAAI,IAAI,SAAS,IAAI;AACjC,UAAM,UAAU,KAAK,KAAK,UAAU,QAAQ,CAAC;AAC7C,QAAI,aAAa,IAAI,SAAS,GAAG,OAAO,IAAI,kBAAkB,EAAE;AAEhE,UAAM,aAAa,OAAO,QAAQ,MAAM,EACrC,IAAI,CAAC,CAAC,KAAK,GAAG,MAAO,QAAQ,OAAO,MAAM,IAAK,EAC/C,OAAO,CAAA,QAAO,QAAQ,IAAI;AAEzB,QAAA,WAAW,SAAS,GAAG;AACzB,UAAI,aAAa,IAAI,SAAS,WAAW,KAAK,GAAG,CAAC;AAAA,IACpD,OACK;AACC,UAAA,aAAa,OAAO,OAAO;AAAA,IACjC;AAEA,QAAI,aAAa,OAAO;AAClB,UAAA,aAAa,OAAO,MAAM;AAAA,IAChC,WACS,aAAa,WAAW;AAC3B,UAAA,aAAa,IAAI,QAAQ,SAAS;AAAA,IACxC;AAEA,YAAQ,aAAa,EAAC,mBAAkB,GAAG,YAAY,IAAI,IAAI;AAAA,EACjE;AAAA,EAEA,yBAAyB,CAAC,aAAiC;AACzD,UAAM,MAAM,IAAI,IAAI,SAAS,IAAI;AACjC,UAAM,aAAa,IAAI,aAAa,IAAI,OAAO;AAE3C,QAAA,cAAc,eAAe,IAAI;AAC7B,YAAA,SAAS,WAAW,MAAM,GAAG;AACnC,YAAM,WAAqC,CAAC;AAC5C,aAAO,QAAQ,CAAa,cAAA;AAC1B,iBAAS,SAAS,IAAI;AAAA,MACxB,CAAC;AAED,WAAK,SAAS;AAAA,QACZ,QAAQ;AAAA,UACN,GAAG,KAAK,MAAM;AAAA,UACd,GAAG;AAAA,QACL;AAAA,MACF,CAAC;AAAA,IACH;AAEA,UAAM,OAAO,IAAI,aAAa,IAAI,MAAM;AACpC,QAAA,QAAQ,SAAS,IAAI;AACvB,WAAK,YAAY,IAAgB;AAAA,IACnC;AAEA,UAAM,OAAO,IAAI,aAAa,IAAI,OAAO;AACzC,QAAI,MAAM;AACJ,UAAA;AACI,cAAA,QAAQ,KAAK,MAAM,GAAG;AACtB,cAAA,CAAC,SAAS,kBAAkB,IAAI;AAAA,UACpC,MAAM,CAAC;AAAA,UACP,SAAS,MAAM,CAAC,GAAG,EAAE;AAAA,QACvB;AAEA,YAAI,QAAQ;AACZ,YAAI,YAAY,KAAK;AACnB,gBAAM,iBAAiB,KAAK,KAAK,UAAU,QAAQ,CAAC;AACpD,cAAI,mBAAmB,SAAS,SAAS,EAAE,GAAG;AACpC,oBAAA;AAAA,UACV;AAAA,QACF;AACA,YAAI,OAAO;AACT,eAAK,SAAS;AAAA,YACZ;AAAA,YACA,yBAAyB,SAAS,OAAO,kBAAkB,EAAE;AAAA,UAC/D,CAAC;AAAA,QACH;AAAA,MACF,SACO,KAAK;AACV,gBAAQ,KAAK,GAAG;AAAA,MAClB;AAAA,IACF;AAAA,EACF;AAAA,EAEA,gBAAgB,CAAC,UAAkB;AACjC,SAAK,SAAS;AAAA,MACZ,oBAAoB;AAAA,MACpB,yBAAyB,KAAK,MAAM,SAAS,OAAO,KAAK,EAAE;AAAA,IAC7D,GAAG,KAAK,aAAa;AAAA,EACvB;AAAA,EAEA,SAAS,WAAqC,OAAgB;AAC5D,SAAK,SAAS;AAAA,MACZ,QAAQ;AAAA,QACN,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,SAAS,GAAG;AAAA,MACf;AAAA,IACF,GAAG,KAAK,aAAa;AAAA,EACvB;AAAA,EAEA,YAAY,WAAqC;AAC/C,SAAK,SAAS,WAAW,CAAC,KAAK,MAAM,OAAO,SAAS,CAAC;AAAA,EACxD;AAAA,EAEA,gBAAgB,YAAyC;AAClD,SAAA,SAAS,EAAC,WAAsB,CAAC;AAAA,EACxC;AAAA,EAEA,0BAA0B,CAAC,KAA+C,UAAmB;AAC3F,SAAK,SAAS;AAAA,MACZ,wBAAwB;AAAA,QACtB,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,GAAG,GAAG;AAAA,MACT;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,0BAA0B,CAAC,KAA+C,UAAe;AACvF,SAAK,SAAS;AAAA,MACZ,wBAAwB;AAAA,QACtB,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,GAAG,GAAG;AAAA,MACT;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,SAAS,KAAK,MAAM,SAAS,UAAU,CAAC;AACxC,UAAA,gBAAgB,OAAO,SAAS,IAAI,OAAO,KAAK,MAAM,kBAAkB,IAAI;AAElF,UAAM,UAAU;AAAA,MAAC;AAAA,MAAA;AAAA,QACf,UAAU,KAAK,aAAa;AAAA,QAC5B,UAAU,KAAK,MAAM;AAAA,QACrB,UAAU,KAAK,MAAM;AAAA,QACrB,oBAAoB,KAAK,MAAM,aAAa;AAAA,QAC5C,SAAS,KAAK,MAAM;AAAA,QACpB,gBAAgB,KAAK;AAAA,QACrB,aAAa,KAAK;AAAA,QAClB,eAAe,KAAK;AAAA,QACpB,eAAe,KAAK,YAAY,KAAK,IAAI;AAAA,MAAA;AAAA,IAC3C;AAEA,UAAM,YAAY;AAAA,MAAC;AAAA,MAAA;AAAA,QACjB,aAAa,KAAK;AAAA,QAClB,gBAAgB,KAAK;AAAA,QACrB,aAAa,KAAK;AAAA,QAClB,yBAAyB,KAAK;AAAA,QAC9B,gBAAgB,KAAK;AAAA,QACrB,eAAe,KAAK;AAAA,QACpB,oBAAoB,KAAK,MAAM;AAAA,QAC/B;AAAA,QACA,SAAS,KAAK,MAAM;AAAA,QACpB,QAAQ,KAAK,MAAM;AAAA,MAAA;AAAA,IACrB;AAEA,UAAM,cAAc,gBAAgB;AAAA,MAAC;AAAA,MAAA;AAAA,QAEnC,OAAO;AAAA,QACP,YAAY,KAAK,MAAM;AAAA,QACvB,cAAc,KAAK,MAAM,qBAAqB;AAAA,QAC9C,aAAa,KAAK,MAAM,uBAAuB,KAAK,MAAM,SAAS,OAAO,SAAO;AAAA,QACjF,SAAS,KAAK,MAAM;AAAA,QACpB,cAAc,KAAK,MAAM;AAAA,QACzB,MAAM,KAAK,MAAM;AAAA,QACjB,aAAa,KAAK;AAAA,QAClB,gBAAgB,KAAK;AAAA,QACrB,gBAAgB,KAAK;AAAA,QACrB,aAAa,KAAK;AAAA,QAClB,yBAAyB,KAAK;AAAA,QAC9B,iBAAiB,KAAK;AAAA,QACtB,QAAQ,KAAK,MAAM;AAAA,MAAA;AAAA,MAdd,KAAK,MAAM;AAAA,IAelB,IAAK;AAEC,UAAA,cAAe,KAAK,MAAM,OAAO,SAAS,KAAK,MAAM,MAAM,SAAU,IAAI;AAAA,MAAC;AAAA,MAAA;AAAA,QAC9E,cAAc;AAAA,QACd,oBAAoB,KAAK,MAAM;AAAA,QAC/B,eAAe,KAAK;AAAA,QACpB,UAAU,KAAK,MAAM;AAAA,QACrB,QAAQ,KAAK,MAAM;AAAA,QACnB,OAAO,KAAK,MAAM;AAAA,MAAA;AAAA,IACpB,IAAK;AAGC,UAAA,8BAAU,OACd,EAAA,UAAA;AAAA,MAAA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,UAAU,KAAK,aAAa;AAAA,UAC5B,wBAAwB,KAAK,MAAM;AAAA,UACnC,wBAAwB,KAAK,MAAM;AAAA,UACnC,yBAAyB,KAAK;AAAA,UAC9B,yBAAyB,KAAK;AAAA,UAC9B,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,KAAK,YAAY,KAAK,MAAM,OAAO;AAAA,UACjD,SAAS,KAAK,MAAM;AAAA,QAAA;AAAA,MACtB;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,KAAK,YAAY,KAAK,MAAM,WAAW;AAAA,QAAA;AAAA,MACvD;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,UAAU,KAAK,MAAM;AAAA,UACrB,gBAAgB,KAAK;AAAA,UACrB,0BAA0B,KAAK;AAAA,UAC/B,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,KAAK,YAAY,KAAK,MAAM,UAAU;AAAA,QAAA;AAAA,MACtD;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,UAAU,KAAK,MAAM;AAAA,UACrB,gBAAgB,KAAK;AAAA,UACrB,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,KAAK,YAAY,KAAK,MAAM,QAAQ;AAAA,UAClD,YAAY,KAAK,MAAM;AAAA,UACvB,iBAAiB,KAAK;AAAA,QAAA;AAAA,MACxB;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,aAAa,KAAK;AAAA,UAClB,cAAc,KAAK,YAAY,KAAK,MAAM,MAAM;AAAA,UAChD,YAAY,KAAK,MAAM;AAAA,QAAA;AAAA,MACzB;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,UAAU,KAAK,MAAM;AAAA,UACrB,gBAAgB,KAAK;AAAA,UACrB,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,KAAK,YAAY,KAAK,MAAM,SAAS;AAAA,QAAA;AAAA,MACrD;AAAA,IACF,EAAA,CAAA;AAEO,WAAA;AAAA,MAAC;AAAA,MAAA;AAAA,QACN;AAAA,QACA;AAAA,QACA;AAAA,QACA,KAAK,KAAK,YAAY;AAAA,QACtB,QAAQ;AAAA,QACR;AAAA,MAAA;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"bafcb93873c2a71cab2bdafeb2ce6a3195766cd8"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return we=function(){return a},a}we();we().s[0]++;window.Buffer=aY.Buffer;function zb(n,e){we().f[0]++;const t=(we().s[1]++,n.match(/\.tilehosting\.com/)),r=(we().s[2]++,n.match(/\.maptiler\.com/)),i=(we().s[3]++,n.match(/\.thunderforest\.com/));if(we().s[4]++,we().b[1][0]++,t||(we().b[1][1]++,r)){we().b[0][0]++;const s=(we().s[5]++,_c.getAccessToken("openmaptiles",e,{allowFallback:!0}));if(we().s[6]++,s)return we().b[2][0]++,we().s[7]++,n.replace("{key}",s);we().b[2][1]++}else if(we().b[0][1]++,we().s[8]++,i){we().b[3][0]++;const s=(we().s[9]++,_c.getAccessToken("thunderforest",e,{allowFallback:!0}));if(we().s[10]++,s)return we().b[4][0]++,we().s[11]++,n.replace("{key}",s);we().b[4][1]++}else return we().b[3][1]++,we().s[12]++,n}function nL(n,e,t){return we().f[1]++,we().s[13]++,{...n,$root:{...n.$root,[e]:{...n.$root[e],values:t}}}}class ime extends nr.Component{constructor(t){we().f[2]++,we().s[14]++;super(t);Pn(this,"revisionStore");Pn(this,"styleStore");Pn(this,"layerWatcher");Pn(this,"handleKeyPress",(we().s[65]++,t=>{we().f[18]++,we().s[66]++,navigator.platform.toUpperCase().indexOf("MAC")>=0?(we().b[18][0]++,we().s[67]++,we().b[20][0]++,t.metaKey&&(we().b[20][1]++,t.shiftKey)&&(we().b[20][2]++,t.keyCode===90)?(we().b[19][0]++,we().s[68]++,t.preventDefault(),we().s[69]++,this.onRedo()):(we().b[19][1]++,we().s[70]++,we().b[22][0]++,t.metaKey&&(we().b[22][1]++,t.keyCode===90)?(we().b[21][0]++,we().s[71]++,t.preventDefault(),we().s[72]++,this.onUndo()):we().b[21][1]++)):(we().b[18][1]++,we().s[73]++,we().b[24][0]++,t.ctrlKey&&(we().b[24][1]++,t.keyCode===90)?(we().b[23][0]++,we().s[74]++,t.preventDefault(),we().s[75]++,this.onUndo()):(we().b[23][1]++,we().s[76]++,we().b[26][0]++,t.ctrlKey&&(we().b[26][1]++,t.keyCode===89)?(we().b[25][0]++,we().s[77]++,t.preventDefault(),we().s[78]++,this.onRedo()):we().b[25][1]++))}));Pn(this,"onChangeMetadataProperty",(we().s[89]++,(t,r)=>{we().f[26]++,we().s[90]++,we().b[31][0]++,t==="maputnik:renderer"&&(we().b[31][1]++,r!==AY(this.state.mapStyle,["metadata","maputnik:renderer"],"mlgljs"))?(we().b[30][0]++,we().s[91]++,this.setState({mapState:"map"})):we().b[30][1]++;const i=(we().s[92]++,{...this.state.mapStyle,metadata:{...this.state.mapStyle.metadata,[t]:r}});we().s[93]++,this.onStyleChanged(i)}));Pn(this,"onStyleChanged",(we().s[94]++,(t,r=(we().b[32][0]++,{}))=>{we().f[27]++,we().s[95]++,r={save:!0,addRevision:!0,initialLoad:!1,...r},we().s[96]++,we().b[34][0]++,t.glyphs&&(we().b[34][1]++,typeof t.glyphs=="string")?(we().b[33][0]++,we().s[97]++,t.glyphs=zb(t.glyphs,t)):we().b[33][1]++,we().s[98]++,we().b[36][0]++,t.sprite&&(we().b[36][1]++,typeof t.sprite=="string")?(we().b[35][0]++,we().s[99]++,t.sprite=zb(t.sprite,t)):we().b[35][1]++,we().s[100]++;for(const[d,g]of Object.entries(t.sources))we().s[101]++,we().b[38][0]++,g&&(we().b[38][1]++,"url"in g)&&(we().b[38][2]++,typeof g.url=="string")?(we().b[37][0]++,we().s[102]++,g.url=zb(g.url,t)):we().b[37][1]++;we().s[103]++,r.initialLoad?(we().b[39][0]++,we().s[104]++,this.getInitialStateFromUrl(t)):we().b[39][1]++;const i=(we().s[105]++,we().b[40][0]++,qf(t)||(we().b[40][1]++,[])),s=(we().s[106]++,[]);if(we().s[107]++,we().b[42][0]++,t&&(we().b[42][1]++,t.layers)){we().b[41][0]++;const d=(we().s[108]++,new window.Map);we().s[109]++,t.layers.forEach((g,b)=>{if(we().f[28]++,we().s[110]++,we().b[44][0]++,g.id===""&&(we().b[44][1]++,d.has(g.id))){we().b[43][0]++;const E=(we().s[111]++,new Error(`layers[${b}]: duplicate layer id [empty_string], previously used`));we().s[112]++,s.push(E)}else we().b[43][1]++;we().s[113]++,d.set(g.id,!0)})}else we().b[41][1]++;const a=(we().s[114]++,s.concat(i).map(d=>{we().f[29]++;const g=(we().s[115]++,d.message.match(/layers\[(\d+)\]: (duplicate layer id "?(.*)"?, previously used)/));if(we().s[116]++,g){we().b[45][0]++;const[,S,I]=(we().s[117]++,g);return we().s[118]++,{message:d.message,parsed:{type:"layer",data:{index:parseInt(S,10),key:"id",message:I}}}}else we().b[45][1]++;const b=(we().s[119]++,d.message.match(/layers\[(\d+)\]: (source "(?:.*)" not found)/));if(we().s[120]++,b){we().b[46][0]++;const[,S,I]=(we().s[121]++,b);return we().s[122]++,{message:d.message,parsed:{type:"layer",data:{index:parseInt(S,10),key:"source",message:I}}}}else we().b[46][1]++;const E=(we().s[123]++,d.message.match(/layers\[(\d+)\]\.(?:(\S+)\.)?(\S+): (.*)/));if(we().s[124]++,E){we().b[47][0]++;const[,S,I,P,z]=(we().s[125]++,E),j=(we().s[126]++,we().b[49][0]++,I&&(we().b[49][1]++,P)?(we().b[48][0]++,[I,P].join(".")):(we().b[48][1]++,P));return we().s[127]++,{message:d.message,parsed:{type:"layer",data:{index:parseInt(S,10),key:j,message:z}}}}else return we().b[47][1]++,we().s[128]++,{message:d.message}}));let o=(we().s[129]++,void 0);we().s[130]++,i.length>0?(we().b[50][0]++,we().s[131]++,o=t7(t),we().s[132]++,i.forEach(d=>{we().f[30]++;const{message:g}=(we().s[133]++,d);if(we().s[134]++,g){we().b[51][0]++,we().s[135]++;try{const b=(we().s[136]++,g.split(":")[0]),E=(we().s[137]++,b.match(/^\S+?\[\d+\]\.[^[]+/)[0]);we().s[138]++,mx.unset(o,E)}catch(b){we().s[139]++,console.warn(b)}}else we().b[51][1]++})):we().b[50][1]++,we().s[140]++,t.glyphs!==this.state.mapStyle.glyphs?(we().b[52][0]++,we().s[141]++,this.updateFonts(t.glyphs)):we().b[52][1]++,we().s[142]++,t.sprite!==this.state.mapStyle.sprite?(we().b[53][0]++,we().s[143]++,this.updateIcons(t.sprite)):we().b[53][1]++,we().s[144]++,r.addRevision?(we().b[54][0]++,we().s[145]++,this.revisionStore.addRevision(t)):we().b[54][1]++,we().s[146]++,r.save?(we().b[55][0]++,we().s[147]++,this.saveStyle(t)):we().b[55][1]++,we().s[148]++,this.setState({mapStyle:t,dirtyMapStyle:o,errors:a},()=>{we().f[31]++,we().s[149]++,this.fetchSources(),we().s[150]++,this.setStateInUrl()})}));Pn(this,"onUndo",(we().s[151]++,()=>{we().f[32]++;const t=(we().s[152]++,this.revisionStore.undo()),r=(we().s[153]++,Dpe(this.state.mapStyle,t));we().s[154]++,this.onStyleChanged(t,{addRevision:!1}),we().s[155]++,this.setState({infos:r})}));Pn(this,"onRedo",(we().s[156]++,()=>{we().f[33]++;const t=(we().s[157]++,this.revisionStore.redo()),r=(we().s[158]++,Rpe(this.state.mapStyle,t));we().s[159]++,this.onStyleChanged(t,{addRevision:!1}),we().s[160]++,this.setState({infos:r})}));Pn(this,"onMoveLayer",(we().s[161]++,t=>{we().f[34]++;let{oldIndex:r,newIndex:i}=(we().s[162]++,t),s=(we().s[163]++,this.state.mapStyle.layers);if(we().s[164]++,r=r7(r,0,s.length-1),we().s[165]++,i=r7(i,0,s.length-1),we().s[166]++,r===i){we().b[56][0]++,we().s[167]++;return}else we().b[56][1]++;we().s[168]++,r===this.state.selectedLayerIndex?(we().b[57][0]++,we().s[169]++,this.setState({selectedLayerIndex:i})):we().b[57][1]++,we().s[170]++,s=s.slice(0),we().s[171]++,hY(s,r,i),we().s[172]++,this.onLayersChange(s)}));Pn(this,"onLayersChange",(we().s[173]++,t=>{we().f[35]++;const r=(we().s[174]++,{...this.state.mapStyle,layers:t});we().s[175]++,this.onStyleChanged(r)}));Pn(this,"onLayerDestroy",(we().s[176]++,t=>{we().f[36]++;const r=(we().s[177]++,this.state.mapStyle.layers),i=(we().s[178]++,r.slice(0));we().s[179]++,i.splice(t,1),we().s[180]++,this.onLayersChange(i)}));Pn(this,"onLayerCopy",(we().s[181]++,t=>{we().f[37]++;const r=(we().s[182]++,this.state.mapStyle.layers),i=(we().s[183]++,r.slice(0)),s=(we().s[184]++,t7(i[t]));we().s[185]++,s.id=s.id+"-copy",we().s[186]++,i.splice(t,0,s),we().s[187]++,this.onLayersChange(i)}));Pn(this,"onLayerVisibilityToggle",(we().s[188]++,t=>{we().f[38]++;const r=(we().s[189]++,this.state.mapStyle.layers),i=(we().s[190]++,r.slice(0)),s=(we().s[191]++,{...i[t]}),a=(we().s[192]++,"layout"in s?(we().b[58][0]++,{...s.layout}):(we().b[58][1]++,{}));we().s[193]++,a.visibility=a.visibility==="none"?(we().b[59][0]++,"visible"):(we().b[59][1]++,"none"),we().s[194]++,s.layout=a,we().s[195]++,i[t]=s,we().s[196]++,this.onLayersChange(i)}));Pn(this,"onLayerIdChange",(we().s[197]++,(t,r,i)=>{we().f[39]++;const s=(we().s[198]++,this.state.mapStyle.layers.slice(0));we().s[199]++,s[t]={...s[t],id:i},we().s[200]++,this.onLayersChange(s)}));Pn(this,"onLayerChanged",(we().s[201]++,(t,r)=>{we().f[40]++;const i=(we().s[202]++,this.state.mapStyle.layers.slice(0));we().s[203]++,i[t]=r,we().s[204]++,this.onLayersChange(i)}));Pn(this,"setMapState",(we().s[205]++,t=>{we().f[41]++,we().s[206]++,this.setState({mapState:t},this.setStateInUrl)}));Pn(this,"setDefaultValues",(we().s[207]++,t=>{we().f[42]++;const r=(we().s[208]++,we().b[60][0]++,t.metadata||(we().b[60][1]++,{}));if(we().s[209]++,r["maputnik:renderer"]===void 0){we().b[61][0]++;const i=(we().s[210]++,{...t,metadata:{...t.metadata,"maputnik:renderer":"mlgljs"}});return we().s[211]++,i}else return we().b[61][1]++,we().s[212]++,t}));Pn(this,"openStyle",(we().s[213]++,(t,r)=>{we().f[43]++,we().s[214]++,this.setState({fileHandle:r}),we().s[215]++,t=this.setDefaultValues(t),we().s[216]++,this.onStyleChanged(t)}));Pn(this,"onMapChange",(we().s[246]++,t=>{we().f[52]++,we().s[247]++,this.setState({mapView:t})}));Pn(this,"setStateInUrl",(we().s[263]++,()=>{we().f[56]++;const{mapState:t,mapStyle:r,isOpen:i}=(we().s[264]++,this.state),{selectedLayerIndex:s}=(we().s[265]++,this.state),a=(we().s[266]++,new URL(location.href)),o=(we().s[267]++,A7(JSON.stringify(r)));we().s[268]++,a.searchParams.set("layer",`${o}~${s}`);const d=(we().s[269]++,Object.entries(i).map(([g,b])=>(we().f[57]++,we().s[270]++,b===!0?(we().b[74][0]++,g):(we().b[74][1]++,null))).filter(g=>(we().f[58]++,we().s[271]++,g!==null)));we().s[272]++,d.length>0?(we().b[75][0]++,we().s[273]++,a.searchParams.set("modal",d.join(","))):(we().b[75][1]++,we().s[274]++,a.searchParams.delete("modal")),we().s[275]++,t==="map"?(we().b[76][0]++,we().s[276]++,a.searchParams.delete("view")):(we().b[76][1]++,we().s[277]++,t==="inspect"?(we().b[77][0]++,we().s[278]++,a.searchParams.set("view","inspect")):we().b[77][1]++),we().s[279]++,history.replaceState({selectedLayerIndex:s},"Maputnik",a.href)}));Pn(this,"getInitialStateFromUrl",(we().s[280]++,t=>{we().f[59]++;const r=(we().s[281]++,new URL(location.href)),i=(we().s[282]++,r.searchParams.get("modal"));if(we().s[283]++,we().b[79][0]++,i&&(we().b[79][1]++,i!=="")){we().b[78][0]++;const o=(we().s[284]++,i.split(",")),d=(we().s[285]++,{});we().s[286]++,o.forEach(g=>{we().f[60]++,we().s[287]++,d[g]=!0}),we().s[288]++,this.setState({isOpen:{...this.state.isOpen,...d}})}else we().b[78][1]++;const s=(we().s[289]++,r.searchParams.get("view"));we().s[290]++,we().b[81][0]++,s&&(we().b[81][1]++,s!=="")?(we().b[80][0]++,we().s[291]++,this.setMapState(s)):we().b[80][1]++;const a=(we().s[292]++,r.searchParams.get("layer"));if(we().s[293]++,a){we().b[82][0]++,we().s[294]++;try{const o=(we().s[295]++,a.split("~")),[d,g]=(we().s[296]++,[o[0],parseInt(o[1],10)]);let b=(we().s[297]++,!0);if(we().s[298]++,d!=="-"){we().b[83][0]++;const E=(we().s[299]++,A7(JSON.stringify(t)));we().s[300]++,E!==parseInt(d,10)?(we().b[84][0]++,we().s[301]++,b=!1):we().b[84][1]++}else we().b[83][1]++;we().s[302]++,b?(we().b[85][0]++,we().s[303]++,this.setState({selectedLayerIndex:g,selectedLayerOriginalId:t.layers[g].id})):we().b[85][1]++}catch(o){we().s[304]++,console.warn(o)}}else we().b[82][1]++}));Pn(this,"onLayerSelect",(we().s[305]++,t=>{we().f[61]++,we().s[306]++,this.setState({selectedLayerIndex:t,selectedLayerOriginalId:this.state.mapStyle.layers[t].id},this.setStateInUrl)}));Pn(this,"onChangeOpenlayersDebug",(we().s[310]++,(t,r)=>{we().f[65]++,we().s[311]++,this.setState({openlayersDebugOptions:{...this.state.openlayersDebugOptions,[t]:r}})}));Pn(this,"onChangeMaplibreGlDebug",(we().s[312]++,(t,r)=>{we().f[66]++,we().s[313]++,this.setState({maplibreGlDebugOptions:{...this.state.maplibreGlDebugOptions,[t]:r}})}));we().s[15]++,Xq(this),we().s[16]++,this.revisionStore=new Vpe;const r=(we().s[17]++,new URLSearchParams(window.location.search.substring(1)));let i=(we().s[18]++,r.get("localport"));we().s[19]++,we().b[6][0]++,i==null&&(we().b[6][1]++,window.location.port!=="80")&&(we().b[6][2]++,window.location.port!=="443")?(we().b[5][0]++,we().s[20]++,i=window.location.port):we().b[5][1]++,we().s[21]++,this.styleStore=new $pe({onLocalStyleChange:o=>(we().f[3]++,we().s[22]++,this.onStyleChanged(o,{save:!1})),port:i,host:r.get("localhost")});const s=(we().s[23]++,[{key:"?",handler:()=>{we().f[4]++,we().s[24]++,this.toggleModal("shortcuts")}},{key:"o",handler:()=>{we().f[5]++,we().s[25]++,this.toggleModal("open")}},{key:"e",handler:()=>{we().f[6]++,we().s[26]++,this.toggleModal("export")}},{key:"d",handler:()=>{we().f[7]++,we().s[27]++,this.toggleModal("sources")}},{key:"s",handler:()=>{we().f[8]++,we().s[28]++,this.toggleModal("settings")}},{key:"i",handler:()=>{we().f[9]++,we().s[29]++,this.setMapState(this.state.mapState==="map"?(we().b[7][0]++,"inspect"):(we().b[7][1]++,"map"))}},{key:"m",handler:()=>{we().f[10]++,we().s[30]++,document.querySelector(".maplibregl-canvas").focus()}},{key:"!",handler:()=>{we().f[11]++,we().s[31]++,this.toggleModal("debug")}}]);we().s[32]++,document.body.addEventListener("keyup",o=>{if(we().f[12]++,we().s[33]++,o.key==="Escape")we().b[8][0]++,we().s[34]++,o.target.blur(),we().s[35]++,document.body.focus();else if(we().b[8][1]++,we().s[36]++,we().b[10][0]++,this.state.isOpen.shortcuts||(we().b[10][1]++,document.activeElement===document.body)){we().b[9][0]++;const d=(we().s[37]++,s.find(g=>(we().f[13]++,we().s[38]++,g.key===o.key)));we().s[39]++,d?(we().b[11][0]++,we().s[40]++,this.setModal("shortcuts",!1),we().s[41]++,d.handler()):we().b[11][1]++}else we().b[9][1]++});const a=(we().s[42]++,Kpe());we().s[43]++,we().b[13][0]++,a&&(we().b[13][1]++,window.confirm("Load style from URL: "+a+" and discard current changes?"))?(we().b[12][0]++,we().s[44]++,this.styleStore=new JF,we().s[45]++,zG(a,o=>(we().f[14]++,we().s[46]++,this.onStyleChanged(o))),we().s[47]++,VF()):(we().b[12][1]++,we().s[48]++,a?(we().b[14][0]++,we().s[49]++,VF()):we().b[14][1]++,we().s[50]++,this.styleStore.init(o=>{we().f[15]++,we().s[51]++,o?(we().b[15][0]++,we().s[52]++,console.log("Falling back to local storage for storing styles"),we().s[53]++,this.styleStore=new JF):we().b[15][1]++,we().s[54]++,this.styleStore.latestStyle(d=>(we().f[16]++,we().s[55]++,this.onStyleChanged(d,{initialLoad:!0}))),we().s[56]++,Cg.enabled()?(we().b[16][0]++,we().s[57]++,Cg.set("maputnik","styleStore",this.styleStore),we().s[58]++,Cg.set("maputnik","revisionStore",this.revisionStore)):we().b[16][1]++})),we().s[59]++,Cg.enabled()?(we().b[17][0]++,we().s[60]++,Cg.set("maputnik","revisionStore",this.revisionStore),we().s[61]++,Cg.set("maputnik","styleStore",this.styleStore)):we().b[17][1]++,we().s[62]++,this.state={errors:[],infos:[],mapStyle:_c.emptyStyle,selectedLayerIndex:0,sources:{},vectorLayers:{},mapState:"map",spec:Ts,mapView:{zoom:0,center:{lng:0,lat:0}},isOpen:{settings:!1,sources:!1,open:!1,shortcuts:!1,export:!1,debug:!1},maplibreGlDebugOptions:{showTileBoundaries:!1,showCollisionBoxes:!1,showOverdrawInspector:!1},openlayersDebugOptions:{debugToolbox:!1},fileHandle:null},we().s[63]++,this.layerWatcher=new tme({onVectorLayersChange:o=>(we().f[17]++,we().s[64]++,this.setState({vectorLayers:o}))})}componentDidMount(){we().f[19]++,we().s[79]++,window.addEventListener("keydown",this.handleKeyPress)}componentWillUnmount(){we().f[20]++,we().s[80]++,window.removeEventListener("keydown",this.handleKeyPress)}saveStyle(t){we().f[21]++,we().s[81]++,this.styleStore.save(t)}updateFonts(t){we().f[22]++;const r=(we().s[82]++,we().b[27][0]++,this.state.mapStyle.metadata||(we().b[27][1]++,{})),i=(we().s[83]++,we().b[28][0]++,r["maputnik:openmaptiles_access_token"]||(we().b[28][1]++,bG.openmaptiles)),s=(we().s[84]++,typeof t=="string"?(we().b[29][0]++,t.replace("{key}",i)):(we().b[29][1]++,t));we().s[85]++,Tpe(s,a=>{we().f[23]++,we().s[86]++,this.setState({spec:nL(this.state.spec,"glyphs",a)})})}updateIcons(t){we().f[24]++,we().s[87]++,Ppe(t,r=>{we().f[25]++,we().s[88]++,this.setState({spec:nL(this.state.spec,"sprite",r)})})}fetchSources(){we().f[44]++;const t=(we().s[217]++,{});we().s[218]++;for(const[r,i]of Object.entries(this.state.mapStyle.sources))if(we().s[219]++,we().b[63][0]++,!Object.prototype.hasOwnProperty.call(this.state.sources,r)&&(we().b[63][1]++,i.type==="vector")&&(we().b[63][2]++,Object.prototype.hasOwnProperty.call(i,"url"))){we().b[62][0]++,we().s[220]++,t[r]={type:i.type,layers:[]};let s=(we().s[221]++,i.url);we().s[222]++;try{we().s[223]++,s=zb(s,this.state.mapStyle)}catch(o){we().s[224]++,console.warn("Failed to setFetchAccessToken: ",o)}we().s[225]++;const a=o=>{if(we().f[45]++,we().s[226]++,Object.prototype.hasOwnProperty.call(o,"vector_layers"))we().b[64][1]++;else{we().b[64][0]++,we().s[227]++;return}const d=(we().s[228]++,Object.assign({},{[r]:this.state.sources[r]}));we().s[229]++;for(const g of o.vector_layers)we().s[230]++,d[r].layers.push(g.id);we().s[231]++,this.setState({sources:d})};we().s[232]++,s.startsWith("pmtiles://")?(we().b[65][0]++,we().s[233]++,new x6(s.substr(10)).getTileJson("").then(o=>(we().f[46]++,we().s[234]++,a(o))).catch(o=>{we().f[47]++,we().s[235]++,console.error("Failed to process sources for '%s'",s,o)})):(we().b[65][1]++,we().s[236]++,fetch(s,{mode:"cors"}).then(o=>(we().f[48]++,we().s[237]++,o.json())).then(o=>(we().f[49]++,we().s[238]++,a(o))).catch(o=>{we().f[50]++,we().s[239]++,console.error("Failed to process sources for '%s'",s,o)}))}else we().b[62][1]++,we().s[240]++,t[r]=(we().b[66][0]++,this.state.sources[r]||(we().b[66][1]++,this.state.mapStyle.sources[r]));we().s[241]++,LB(this.state.sources,t)?we().b[67][1]++:(we().b[67][0]++,we().s[242]++,console.debug("Setting sources"),we().s[243]++,this.setState({sources:t}))}_getRenderer(){we().f[51]++;const t=(we().s[244]++,we().b[68][0]++,this.state.mapStyle.metadata||(we().b[68][1]++,{}));return we().s[245]++,we().b[69][0]++,t["maputnik:renderer"]||(we().b[69][1]++,"mlgljs")}mapRenderer(){we().f[53]++;const{mapStyle:t,dirtyMapStyle:r}=(we().s[248]++,this.state),i=(we().s[249]++,{mapStyle:(we().b[70][0]++,r||(we().b[70][1]++,t)),replaceAccessTokens:g=>(we().f[54]++,we().s[250]++,_c.replaceAccessTokens(g,{allowFallback:!0})),onDataChange:g=>{we().f[55]++,we().s[251]++,this.layerWatcher.analyzeMap(g.map),we().s[252]++,this.fetchSources()}}),s=(we().s[253]++,this._getRenderer());let a;we().s[254]++,s==="ol"?(we().b[71][0]++,we().s[255]++,a=ue.jsx(yse,{...i,onChange:this.onMapChange,debugToolbox:this.state.openlayersDebugOptions.debugToolbox,onLayerSelect:this.onLayerSelect})):(we().b[71][1]++,we().s[256]++,a=ue.jsx(IX,{...i,onChange:this.onMapChange,options:this.state.maplibreGlDebugOptions,inspectModeEnabled:this.state.mapState==="inspect",highlightedLayer:this.state.mapStyle.layers[this.state.selectedLayerIndex],onLayerSelect:this.onLayerSelect}));let o;we().s[257]++,this.state.mapState.match(/^filter-/)?(we().b[72][0]++,we().s[258]++,o=this.state.mapState.replace(/^filter-/,"")):we().b[72][1]++;const d=(we().s[259]++,{});return we().s[260]++,o?(we().b[73][0]++,we().s[261]++,d.filter=`url('#${o}')`):we().b[73][1]++,we().s[262]++,ue.jsx("div",{style:d,className:"maputnik-map__container","data-wd-key":"maplibre:container",children:a})}setModal(t,r){we().f[62]++,we().s[307]++,this.setState({isOpen:{...this.state.isOpen,[t]:r}},this.setStateInUrl)}toggleModal(t){we().f[63]++,we().s[308]++,this.setModal(t,!this.state.isOpen[t])}onSetFileHandle(t){we().f[64]++,we().s[309]++,this.setState({fileHandle:t})}render(){we().f[67]++;const t=(we().s[314]++,we().b[86][0]++,this.state.mapStyle.layers||(we().b[86][1]++,[])),r=(we().s[315]++,t.length>0?(we().b[87][0]++,t[this.state.selectedLayerIndex]):(we().b[87][1]++,void 0)),i=(we().s[316]++,ue.jsx(qhe,{renderer:this._getRenderer(),mapState:this.state.mapState,mapStyle:this.state.mapStyle,inspectModeEnabled:this.state.mapState==="inspect",sources:this.state.sources,onStyleChanged:this.onStyleChanged,onStyleOpen:this.onStyleChanged,onSetMapState:this.setMapState,onToggleModal:this.toggleModal.bind(this)})),s=(we().s[317]++,ue.jsx(Dle,{onMoveLayer:this.onMoveLayer,onLayerDestroy:this.onLayerDestroy,onLayerCopy:this.onLayerCopy,onLayerVisibilityToggle:this.onLayerVisibilityToggle,onLayersChange:this.onLayersChange,onLayerSelect:this.onLayerSelect,selectedLayerIndex:this.state.selectedLayerIndex,layers:t,sources:this.state.sources,errors:this.state.errors})),a=(we().s[318]++,r?(we().b[88][0]++,ue.jsx(hhe,{layer:r,layerIndex:this.state.selectedLayerIndex,isFirstLayer:this.state.selectedLayerIndex<1,isLastLayer:this.state.selectedLayerIndex===this.state.mapStyle.layers.length-1,sources:this.state.sources,vectorLayers:this.state.vectorLayers,spec:this.state.spec,onMoveLayer:this.onMoveLayer,onLayerChanged:this.onLayerChanged,onLayerDestroy:this.onLayerDestroy,onLayerCopy:this.onLayerCopy,onLayerVisibilityToggle:this.onLayerVisibilityToggle,onLayerIdChange:this.onLayerIdChange,errors:this.state.errors},this.state.selectedLayerOriginalId)):(we().b[88][1]++,void 0)),o=(we().s[319]++,this.state.errors.length+this.state.infos.length>0?(we().b[89][0]++,ue.jsx(Vhe,{currentLayer:r,selectedLayerIndex:this.state.selectedLayerIndex,onLayerSelect:this.onLayerSelect,mapStyle:this.state.mapStyle,errors:this.state.errors,infos:this.state.infos})):(we().b[89][1]++,void 0)),d=(we().s[320]++,ue.jsxs("div",{children:[ue.jsx($fe,{renderer:this._getRenderer(),maplibreGlDebugOptions:this.state.maplibreGlDebugOptions,openlayersDebugOptions:this.state.openlayersDebugOptions,onChangeMaplibreGlDebug:this.onChangeMaplibreGlDebug,onChangeOpenlayersDebug:this.onChangeOpenlayersDebug,isOpen:this.state.isOpen.debug,onOpenToggle:this.toggleModal.bind(this,"debug"),mapView:this.state.mapView}),ue.jsx(qfe,{isOpen:this.state.isOpen.shortcuts,onOpenToggle:this.toggleModal.bind(this,"shortcuts")}),ue.jsx(Jhe,{mapStyle:this.state.mapStyle,onStyleChanged:this.onStyleChanged,onChangeMetadataProperty:this.onChangeMetadataProperty,isOpen:this.state.isOpen.settings,onOpenToggle:this.toggleModal.bind(this,"settings")}),ue.jsx(yfe,{mapStyle:this.state.mapStyle,onStyleChanged:this.onStyleChanged,isOpen:this.state.isOpen.export,onOpenToggle:this.toggleModal.bind(this,"export"),fileHandle:this.state.fileHandle,onSetFileHandle:this.onSetFileHandle}),ue.jsx(Gfe,{isOpen:this.state.isOpen.open,onStyleOpen:this.openStyle,onOpenToggle:this.toggleModal.bind(this,"open"),fileHandle:this.state.fileHandle}),ue.jsx(Rfe,{mapStyle:this.state.mapStyle,onStyleChanged:this.onStyleChanged,isOpen:this.state.isOpen.sources,onOpenToggle:this.toggleModal.bind(this,"sources")})]}));return we().s[321]++,ue.jsx($he,{toolbar:i,layerList:s,layerEditor:a,map:this.mapRenderer(),bottom:o,modals:d})}}const ome=UQ.createRoot(document.querySelector("#app"));ome.render(ue.jsx(m6.Provider,{value:{className:"react-icons"},children:ue.jsx(ime,{})}));document.querySelector(".loading").style.display="none";
//# sourceMappingURL=index-B73seVKO.js.map
